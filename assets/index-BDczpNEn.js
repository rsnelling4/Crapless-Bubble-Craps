var u4=Object.defineProperty;var XE=d=>{throw TypeError(d)};var f4=(d,t,i)=>t in d?u4(d,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[t]=i;var Xr=(d,t,i)=>f4(d,typeof t!="symbol"?t+"":t,i),Yg=(d,t,i)=>t.has(d)||XE("Cannot "+i);var Nt=(d,t,i)=>(Yg(d,t,"read from private field"),i?i.call(d):t.get(d)),ke=(d,t,i)=>t.has(d)?XE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,i),We=(d,t,i,n)=>(Yg(d,t,"write to private field"),n?n.call(d,i):t.set(d,i),i),Xn=(d,t,i)=>(Yg(d,t,"access private method"),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))n(x);new MutationObserver(x=>{for(const S of x)if(S.type==="childList")for(const s of S.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function i(x){const S={};return x.integrity&&(S.integrity=x.integrity),x.referrerPolicy&&(S.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?S.credentials="include":x.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function n(x){if(x.ep)return;x.ep=!0;const S=i(x);fetch(x.href,S)}})();const ux=!1;var qm=Array.isArray,c4=Array.prototype.indexOf,of=Array.prototype.includes,tg=Array.from,d4=Object.defineProperty,Ka=Object.getOwnPropertyDescriptor,ew=Object.getOwnPropertyDescriptors,p4=Object.prototype,v4=Array.prototype,g1=Object.getPrototypeOf,YE=Object.isExtensible;function Mc(d){return typeof d=="function"}function m4(d){return d()}function fx(d){for(var t=0;t<d.length;t++)d[t]()}function iw(){var d,t,i=new Promise((n,x)=>{d=n,t=x});return{promise:i,resolve:d,reject:t}}function $c(d,t){if(Array.isArray(d))return d;if(t===void 0||!(Symbol.iterator in d))return Array.from(d);const i=[];for(const n of d)if(i.push(n),i.length===t)break;return i}const Gn=2,am=4,ep=8,x1=1<<24,oo=16,Ur=32,Uh=64,y1=128,hr=512,yn=1024,_n=2048,cr=4096,Us=8192,ja=16384,T1=32768,Eh=65536,kE=1<<17,nw=1<<18,kf=1<<19,sw=1<<20,Wa=1<<25,Sh=32768,cx=1<<21,E1=1<<22,Ho=1<<23,oa=Symbol("$state"),rw=Symbol("legacy props"),g4=Symbol(""),Ou=new class extends Error{constructor(){super(...arguments);Xr(this,"name","StaleReactionError");Xr(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function S1(d){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function x4(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function y4(d,t,i){throw new Error("https://svelte.dev/e/each_key_duplicate")}function T4(d){throw new Error("https://svelte.dev/e/effect_in_teardown")}function E4(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function S4(d){throw new Error("https://svelte.dev/e/effect_orphan")}function C4(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function A4(d){throw new Error("https://svelte.dev/e/props_invalid_value")}function w4(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function M4(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function R4(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function P4(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const b4=1,I4=2,aw=4,L4=8,F4=16,D4=1,O4=2,ow=4,N4=8,B4=16,U4=1,V4=2,Pn=Symbol(),z4="http://www.w3.org/1999/xhtml",G4="http://www.w3.org/2000/svg",_4="@attach";function W4(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function H4(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function lw(d){return d===this.v}function X4(d,t){return d!=d?t==t:d!==t||d!==null&&typeof d=="object"||typeof d=="function"}function hw(d){return!X4(d,this.v)}let $f=!1,Y4=!1;function k4(){$f=!0}let Fi=null;function lf(d){Fi=d}function ks(d,t=!1,i){Fi={p:Fi,i:!1,c:null,e:null,s:d,x:null,l:$f&&!t?{s:null,u:null,$:[]}:null}}function $s(d){var t=Fi,i=t.e;if(i!==null){t.e=null;for(var n of i)bw(n)}return d!==void 0&&(t.x=d),t.i=!0,Fi=t.p,d??{}}function ip(){return!$f||Fi!==null&&Fi.l===null}let Zl=[];function uw(){var d=Zl;Zl=[],fx(d)}function la(d){if(Zl.length===0&&!od){var t=Zl;queueMicrotask(()=>{t===Zl&&uw()})}Zl.push(d)}function $4(){for(;Zl.length>0;)uw()}function fw(d){var t=oi;if(t===null)return Je.f|=Ho,d;if((t.f&T1)===0){if((t.f&y1)===0)throw d;t.b.error(d)}else hf(d,t)}function hf(d,t){for(;t!==null;){if((t.f&y1)!==0)try{t.b.error(d);return}catch(i){d=i}t=t.parent}throw d}const K4=-7169;function ji(d,t){d.f=d.f&K4|t}function C1(d){(d.f&hr)!==0||d.deps===null?ji(d,yn):ji(d,cr)}function cw(d){if(d!==null)for(const t of d)(t.f&Gn)===0||(t.f&Sh)===0||(t.f^=Sh,cw(t.deps))}function dw(d,t,i){(d.f&_n)!==0?t.add(d):(d.f&cr)!==0&&i.add(d),cw(d.deps),ji(d,yn)}const kp=new Set;let Ke=null,dx=null,Un=null,fs=[],eg=null,px=!1,od=!1;var qu,tf,nh,ef,Jd,Qd,sh,Va,nf,ga,vx,mx,pw;const AE=class AE{constructor(){ke(this,ga);Xr(this,"committed",!1);Xr(this,"current",new Map);Xr(this,"previous",new Map);ke(this,qu,new Set);ke(this,tf,new Set);ke(this,nh,0);ke(this,ef,0);ke(this,Jd,null);ke(this,Qd,new Set);ke(this,sh,new Set);ke(this,Va,new Map);Xr(this,"is_fork",!1);ke(this,nf,!1)}is_deferred(){return this.is_fork||Nt(this,ef)>0}skip_effect(t){Nt(this,Va).has(t)||Nt(this,Va).set(t,{d:[],m:[]})}unskip_effect(t){var i=Nt(this,Va).get(t);if(i){Nt(this,Va).delete(t);for(var n of i.d)ji(n,_n),Rr(n);for(n of i.m)ji(n,cr),Rr(n)}}process(t){var x;fs=[],this.apply();var i=[],n=[];for(const S of t)Xn(this,ga,vx).call(this,S,i,n);if(this.is_deferred()){Xn(this,ga,mx).call(this,n),Xn(this,ga,mx).call(this,i);for(const[S,s]of Nt(this,Va))xw(S,s)}else{for(const S of Nt(this,qu))S();Nt(this,qu).clear(),Nt(this,nh)===0&&Xn(this,ga,pw).call(this),dx=this,Ke=null,$E(n),$E(i),dx=null,(x=Nt(this,Jd))==null||x.resolve()}Un=null}capture(t,i){i!==Pn&&!this.previous.has(t)&&this.previous.set(t,i),(t.f&Ho)===0&&(this.current.set(t,t.v),Un==null||Un.set(t,t.v))}activate(){Ke=this,this.apply()}deactivate(){Ke===this&&(Ke=null,Un=null)}flush(){if(this.activate(),fs.length>0){if(vw(),Ke!==null&&Ke!==this)return}else Nt(this,nh)===0&&this.process([]);this.deactivate()}discard(){for(const t of Nt(this,tf))t(this);Nt(this,tf).clear()}increment(t){We(this,nh,Nt(this,nh)+1),t&&We(this,ef,Nt(this,ef)+1)}decrement(t){We(this,nh,Nt(this,nh)-1),t&&We(this,ef,Nt(this,ef)-1),!Nt(this,nf)&&(We(this,nf,!0),la(()=>{We(this,nf,!1),this.is_deferred()?fs.length>0&&this.flush():this.revive()}))}revive(){for(const t of Nt(this,Qd))Nt(this,sh).delete(t),ji(t,_n),Rr(t);for(const t of Nt(this,sh))ji(t,cr),Rr(t);this.flush()}oncommit(t){Nt(this,qu).add(t)}ondiscard(t){Nt(this,tf).add(t)}settled(){return(Nt(this,Jd)??We(this,Jd,iw())).promise}static ensure(){if(Ke===null){const t=Ke=new AE;kp.add(Ke),od||la(()=>{Ke===t&&t.flush()})}return Ke}apply(){}};qu=new WeakMap,tf=new WeakMap,nh=new WeakMap,ef=new WeakMap,Jd=new WeakMap,Qd=new WeakMap,sh=new WeakMap,Va=new WeakMap,nf=new WeakMap,ga=new WeakSet,vx=function(t,i,n){t.f^=yn;for(var x=t.first,S=null;x!==null;){var s=x.f,T=(s&(Ur|Uh))!==0,e=T&&(s&yn)!==0,a=e||(s&Us)!==0||Nt(this,Va).has(x);if(!a&&x.fn!==null){T?x.f^=yn:S!==null&&(s&(am|ep|x1))!==0?S.b.defer_effect(x):(s&am)!==0?i.push(x):Kf(x)&&((s&oo)!==0&&Nt(this,sh).add(x),cf(x));var g=x.first;if(g!==null){x=g;continue}}var f=x.parent;for(x=x.next;x===null&&f!==null;)f===S&&(S=null),x=f.next,f=f.parent}},mx=function(t){for(var i=0;i<t.length;i+=1)dw(t[i],Nt(this,Qd),Nt(this,sh))},pw=function(){var x;if(kp.size>1){this.previous.clear();var t=Un,i=!0;for(const S of kp){if(S===this){i=!1;continue}const s=[];for(const[e,a]of this.current){if(S.current.has(e))if(i&&a!==S.current.get(e))S.current.set(e,a);else continue;s.push(e)}if(s.length===0)continue;const T=[...S.current.keys()].filter(e=>!this.current.has(e));if(T.length>0){var n=fs;fs=[];const e=new Set,a=new Map;for(const g of s)mw(g,T,e,a);if(fs.length>0){Ke=S,S.apply();for(const g of fs)Xn(x=S,ga,vx).call(x,g,[],[]);S.deactivate()}fs=n}}Ke=null,Un=t}this.committed=!0,kp.delete(this)};let Xo=AE;function j4(d){var t=od;od=!0;try{for(var i;;){if($4(),fs.length===0&&(Ke==null||Ke.flush(),fs.length===0))return eg=null,i;vw()}}finally{od=t}}function vw(){px=!0;var d=null;try{for(var t=0;fs.length>0;){var i=Xo.ensure();if(t++>1e3){var n,x;Z4()}i.process(fs),Yo.clear()}}finally{fs=[],px=!1,eg=null}}function Z4(){try{C4()}catch(d){hf(d,eg)}}let Cr=null;function $E(d){var t=d.length;if(t!==0){for(var i=0;i<t;){var n=d[i++];if((n.f&(ja|Us))===0&&Kf(n)&&(Cr=new Set,cf(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Dw(n):n.fn=null),(Cr==null?void 0:Cr.size)>0)){Yo.clear();for(const x of Cr){if((x.f&(ja|Us))!==0)continue;const S=[x];let s=x.parent;for(;s!==null;)Cr.has(s)&&(Cr.delete(s),S.push(s)),s=s.parent;for(let T=S.length-1;T>=0;T--){const e=S[T];(e.f&(ja|Us))===0&&cf(e)}}Cr.clear()}}Cr=null}}function mw(d,t,i,n){if(!i.has(d)&&(i.add(d),d.reactions!==null))for(const x of d.reactions){const S=x.f;(S&Gn)!==0?mw(x,t,i,n):(S&(E1|oo))!==0&&(S&_n)===0&&gw(x,t,n)&&(ji(x,_n),Rr(x))}}function gw(d,t,i){const n=i.get(d);if(n!==void 0)return n;if(d.deps!==null)for(const x of d.deps){if(of.call(t,x))return!0;if((x.f&Gn)!==0&&gw(x,t,i))return i.set(x,!0),!0}return i.set(d,!1),!1}function Rr(d){for(var t=eg=d;t.parent!==null;){t=t.parent;var i=t.f;if(px&&t===oi&&(i&oo)!==0&&(i&nw)===0)return;if((i&(Uh|Ur))!==0){if((i&yn)===0)return;t.f^=yn}}fs.push(t)}function xw(d,t){if(!((d.f&Ur)!==0&&(d.f&yn)!==0)){(d.f&_n)!==0?t.d.push(d):(d.f&cr)!==0&&t.m.push(d),ji(d,yn);for(var i=d.first;i!==null;)xw(i,t),i=i.next}}function J4(d){let t=0,i=il(0),n;return()=>{w1()&&(Y(i),ap(()=>(t===0&&(n=Ht(()=>d(()=>ld(i)))),t+=1,()=>{la(()=>{t-=1,t===0&&(n==null||n(),n=void 0,ld(i))})})))}}var Q4=Eh|kf|y1;function q4(d,t,i){new tL(d,t,i)}var er,m1,Zr,rh,Jr,ir,us,Qr,za,Uo,ah,Vo,sf,oh,rf,af,Ga,Jm,In,eL,iL,gx,Iv,Lv,xx;class tL{constructor(t,i,n){ke(this,In);Xr(this,"parent");Xr(this,"is_pending",!1);ke(this,er);ke(this,m1,null);ke(this,Zr);ke(this,rh);ke(this,Jr);ke(this,ir,null);ke(this,us,null);ke(this,Qr,null);ke(this,za,null);ke(this,Uo,null);ke(this,ah,0);ke(this,Vo,0);ke(this,sf,!1);ke(this,oh,!1);ke(this,rf,new Set);ke(this,af,new Set);ke(this,Ga,null);ke(this,Jm,J4(()=>(We(this,Ga,il(Nt(this,ah))),()=>{We(this,Ga,null)})));We(this,er,t),We(this,Zr,i),We(this,rh,n),this.parent=oi.b,this.is_pending=!!Nt(this,Zr).pending,We(this,Jr,ng(()=>{oi.b=this;{var x=Xn(this,In,gx).call(this);try{We(this,ir,ds(()=>n(x)))}catch(S){this.error(S)}Nt(this,Vo)>0?Xn(this,In,Lv).call(this):this.is_pending=!1}return()=>{var S;(S=Nt(this,Uo))==null||S.remove()}},Q4))}defer_effect(t){dw(t,Nt(this,rf),Nt(this,af))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!Nt(this,Zr).pending}update_pending_count(t){Xn(this,In,xx).call(this,t),We(this,ah,Nt(this,ah)+t),!(!Nt(this,Ga)||Nt(this,sf))&&(We(this,sf,!0),la(()=>{We(this,sf,!1),Nt(this,Ga)&&uf(Nt(this,Ga),Nt(this,ah))}))}get_effect_pending(){return Nt(this,Jm).call(this),Y(Nt(this,Ga))}error(t){var i=Nt(this,Zr).onerror;let n=Nt(this,Zr).failed;if(Nt(this,oh)||!i&&!n)throw t;Nt(this,ir)&&(Vn(Nt(this,ir)),We(this,ir,null)),Nt(this,us)&&(Vn(Nt(this,us)),We(this,us,null)),Nt(this,Qr)&&(Vn(Nt(this,Qr)),We(this,Qr,null));var x=!1,S=!1;const s=()=>{if(x){H4();return}x=!0,S&&P4(),Xo.ensure(),We(this,ah,0),Nt(this,Qr)!==null&&hh(Nt(this,Qr),()=>{We(this,Qr,null)}),this.is_pending=this.has_pending_snippet(),We(this,ir,Xn(this,In,Iv).call(this,()=>(We(this,oh,!1),ds(()=>Nt(this,rh).call(this,Nt(this,er)))))),Nt(this,Vo)>0?Xn(this,In,Lv).call(this):this.is_pending=!1};la(()=>{try{S=!0,i==null||i(t,s),S=!1}catch(T){hf(T,Nt(this,Jr)&&Nt(this,Jr).parent)}n&&We(this,Qr,Xn(this,In,Iv).call(this,()=>{Xo.ensure(),We(this,oh,!0);try{return ds(()=>{n(Nt(this,er),()=>t,()=>s)})}catch(T){return hf(T,Nt(this,Jr).parent),null}finally{We(this,oh,!1)}}))})}}er=new WeakMap,m1=new WeakMap,Zr=new WeakMap,rh=new WeakMap,Jr=new WeakMap,ir=new WeakMap,us=new WeakMap,Qr=new WeakMap,za=new WeakMap,Uo=new WeakMap,ah=new WeakMap,Vo=new WeakMap,sf=new WeakMap,oh=new WeakMap,rf=new WeakMap,af=new WeakMap,Ga=new WeakMap,Jm=new WeakMap,In=new WeakSet,eL=function(){try{We(this,ir,ds(()=>Nt(this,rh).call(this,Nt(this,er))))}catch(t){this.error(t)}},iL=function(){const t=Nt(this,Zr).pending;t&&(We(this,us,ds(()=>t(Nt(this,er)))),la(()=>{var i=Xn(this,In,gx).call(this);We(this,ir,Xn(this,In,Iv).call(this,()=>(Xo.ensure(),ds(()=>Nt(this,rh).call(this,i))))),Nt(this,Vo)>0?Xn(this,In,Lv).call(this):(hh(Nt(this,us),()=>{We(this,us,null)}),this.is_pending=!1)}))},gx=function(){var t=Nt(this,er);return this.is_pending&&(We(this,Uo,Za()),Nt(this,er).before(Nt(this,Uo)),t=Nt(this,Uo)),t},Iv=function(t){var i=oi,n=Je,x=Fi;pr(Nt(this,Jr)),dr(Nt(this,Jr)),lf(Nt(this,Jr).ctx);try{return t()}catch(S){return fw(S),null}finally{pr(i),dr(n),lf(x)}},Lv=function(){const t=Nt(this,Zr).pending;Nt(this,ir)!==null&&(We(this,za,document.createDocumentFragment()),Nt(this,za).append(Nt(this,Uo)),Bw(Nt(this,ir),Nt(this,za))),Nt(this,us)===null&&We(this,us,ds(()=>t(Nt(this,er))))},xx=function(t){var i;if(!this.has_pending_snippet()){this.parent&&Xn(i=this.parent,In,xx).call(i,t);return}if(We(this,Vo,Nt(this,Vo)+t),Nt(this,Vo)===0){this.is_pending=!1;for(const n of Nt(this,rf))ji(n,_n),Rr(n);for(const n of Nt(this,af))ji(n,cr),Rr(n);Nt(this,rf).clear(),Nt(this,af).clear(),Nt(this,us)&&hh(Nt(this,us),()=>{We(this,us,null)}),Nt(this,za)&&(Nt(this,er).before(Nt(this,za)),We(this,za,null))}};function yw(d,t,i,n){const x=ip()?np:hn;var S=d.filter(o=>!o.settled);if(i.length===0&&S.length===0){n(t.map(x));return}var s=Ke,T=oi,e=nL(),a=S.length===1?S[0].promise:S.length>1?Promise.all(S.map(o=>o.promise)):null;function g(o){e();try{n(o)}catch(u){(T.f&ja)===0&&hf(u,T)}s==null||s.deactivate(),yx()}if(i.length===0){a.then(()=>g(t.map(x)));return}function f(){e(),Promise.all(i.map(o=>sL(o))).then(o=>g([...t.map(x),...o])).catch(o=>hf(o,T))}a?a.then(f):f()}function nL(){var d=oi,t=Je,i=Fi,n=Ke;return function(S=!0){pr(d),dr(t),lf(i),S&&(n==null||n.activate())}}function yx(){pr(null),dr(null),lf(null)}function np(d){var t=Gn|_n,i=Je!==null&&(Je.f&Gn)!==0?Je:null;return oi!==null&&(oi.f|=kf),{ctx:Fi,deps:null,effects:null,equals:lw,f:t,fn:d,reactions:null,rv:0,v:Pn,wv:0,parent:i??oi,ac:null}}function sL(d,t,i){let n=oi;n===null&&x4();var x=n.b,S=void 0,s=il(Pn),T=!Je,e=new Map;return mL(()=>{var u;var a=iw();S=a.promise;try{Promise.resolve(d()).then(a.resolve,a.reject).then(()=>{g===Ke&&g.committed&&g.deactivate(),yx()})}catch(r){a.reject(r),yx()}var g=Ke;if(T){var f=x.is_rendered();x.update_pending_count(1),g.increment(f),(u=e.get(g))==null||u.reject(Ou),e.delete(g),e.set(g,a)}const o=(r,h=void 0)=>{if(g.activate(),h)h!==Ou&&(s.f|=Ho,uf(s,h));else{(s.f&Ho)!==0&&(s.f^=Ho),uf(s,r);for(const[c,l]of e){if(e.delete(c),c===g)break;l.reject(Ou)}}T&&(x.update_pending_count(-1),g.decrement(f))};a.promise.then(o,r=>o(null,r||"unknown"))}),rp(()=>{for(const a of e.values())a.reject(Ou)}),new Promise(a=>{function g(f){function o(){f===S?a(s):g(S)}f.then(o,o)}g(S)})}function Kc(d){const t=np(d);return Uw(t),t}function hn(d){const t=np(d);return t.equals=hw,t}function Tw(d){var t=d.effects;if(t!==null){d.effects=null;for(var i=0;i<t.length;i+=1)Vn(t[i])}}function rL(d){for(var t=d.parent;t!==null;){if((t.f&Gn)===0)return(t.f&ja)===0?t:null;t=t.parent}return null}function A1(d){var t,i=oi;pr(rL(d));try{d.f&=~Sh,Tw(d),t=_w(d)}finally{pr(i)}return t}function Ew(d){var t=A1(d);if(!d.equals(t)&&(d.wv=zw(),(!(Ke!=null&&Ke.is_fork)||d.deps===null)&&(d.v=t,d.deps===null))){ji(d,yn);return}nl||(Un!==null?(w1()||Ke!=null&&Ke.is_fork)&&Un.set(d,t):C1(d))}let Tx=new Set;const Yo=new Map;let Sw=!1;function il(d,t){var i={f:0,v:d,reactions:null,equals:lw,rv:0,wv:0};return i}function xo(d,t){const i=il(d);return Uw(i),i}function fe(d,t=!1,i=!0){var x;const n=il(d);return t||(n.equals=hw),$f&&i&&Fi!==null&&Fi.l!==null&&((x=Fi.l).s??(x.s=[])).push(n),n}function Js(d,t){return ut(d,Ht(()=>Y(d))),t}function ut(d,t,i=!1){Je!==null&&(!Pr||(Je.f&kE)!==0)&&ip()&&(Je.f&(Gn|oo|E1|kE))!==0&&(ur===null||!of.call(ur,d))&&R4();let n=i?Nu(t):t;return uf(d,n)}function uf(d,t){if(!d.equals(t)){var i=d.v;nl?Yo.set(d,t):Yo.set(d,i),d.v=t;var n=Xo.ensure();if(n.capture(d,i),(d.f&Gn)!==0){const x=d;(d.f&_n)!==0&&A1(x),C1(x)}d.wv=zw(),Cw(d,_n),ip()&&oi!==null&&(oi.f&yn)!==0&&(oi.f&(Ur|Uh))===0&&(tr===null?yL([d]):tr.push(d)),!n.is_fork&&Tx.size>0&&!Sw&&aL()}return t}function aL(){Sw=!1;for(const d of Tx)(d.f&yn)!==0&&ji(d,cr),Kf(d)&&cf(d);Tx.clear()}function KE(d,t=1){var i=Y(d),n=t===1?i++:i--;return ut(d,i),n}function ld(d){ut(d,d.v+1)}function Cw(d,t){var i=d.reactions;if(i!==null)for(var n=ip(),x=i.length,S=0;S<x;S++){var s=i[S],T=s.f;if(!(!n&&s===oi)){var e=(T&_n)===0;if(e&&ji(s,t),(T&Gn)!==0){var a=s;Un==null||Un.delete(a),(T&Sh)===0&&(T&hr&&(s.f|=Sh),Cw(a,cr))}else e&&((T&oo)!==0&&Cr!==null&&Cr.add(s),Rr(s))}}}function Nu(d){if(typeof d!="object"||d===null||oa in d)return d;const t=g1(d);if(t!==p4&&t!==v4)return d;var i=new Map,n=qm(d),x=xo(0),S=uh,s=T=>{if(uh===S)return T();var e=Je,a=uh;dr(null),QE(S);var g=T();return dr(e),QE(a),g};return n&&i.set("length",xo(d.length)),new Proxy(d,{defineProperty(T,e,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&w4();var g=i.get(e);return g===void 0?g=s(()=>{var f=xo(a.value);return i.set(e,f),f}):ut(g,a.value,!0),!0},deleteProperty(T,e){var a=i.get(e);if(a===void 0){if(e in T){const g=s(()=>xo(Pn));i.set(e,g),ld(x)}}else ut(a,Pn),ld(x);return!0},get(T,e,a){var u;if(e===oa)return d;var g=i.get(e),f=e in T;if(g===void 0&&(!f||(u=Ka(T,e))!=null&&u.writable)&&(g=s(()=>{var r=Nu(f?T[e]:Pn),h=xo(r);return h}),i.set(e,g)),g!==void 0){var o=Y(g);return o===Pn?void 0:o}return Reflect.get(T,e,a)},getOwnPropertyDescriptor(T,e){var a=Reflect.getOwnPropertyDescriptor(T,e);if(a&&"value"in a){var g=i.get(e);g&&(a.value=Y(g))}else if(a===void 0){var f=i.get(e),o=f==null?void 0:f.v;if(f!==void 0&&o!==Pn)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return a},has(T,e){var o;if(e===oa)return!0;var a=i.get(e),g=a!==void 0&&a.v!==Pn||Reflect.has(T,e);if(a!==void 0||oi!==null&&(!g||(o=Ka(T,e))!=null&&o.writable)){a===void 0&&(a=s(()=>{var u=g?Nu(T[e]):Pn,r=xo(u);return r}),i.set(e,a));var f=Y(a);if(f===Pn)return!1}return g},set(T,e,a,g){var m;var f=i.get(e),o=e in T;if(n&&e==="length")for(var u=a;u<f.v;u+=1){var r=i.get(u+"");r!==void 0?ut(r,Pn):u in T&&(r=s(()=>xo(Pn)),i.set(u+"",r))}if(f===void 0)(!o||(m=Ka(T,e))!=null&&m.writable)&&(f=s(()=>xo(void 0)),ut(f,Nu(a)),i.set(e,f));else{o=f.v!==Pn;var h=s(()=>Nu(a));ut(f,h)}var c=Reflect.getOwnPropertyDescriptor(T,e);if(c!=null&&c.set&&c.set.call(g,a),!o){if(n&&typeof e=="string"){var l=i.get("length"),p=Number(e);Number.isInteger(p)&&p>=l.v&&ut(l,p+1)}ld(x)}return!0},ownKeys(T){Y(x);var e=Reflect.ownKeys(T).filter(f=>{var o=i.get(f);return o===void 0||o.v!==Pn});for(var[a,g]of i)g.v!==Pn&&!(a in T)&&e.push(a);return e},setPrototypeOf(){M4()}})}function jE(d){try{if(d!==null&&typeof d=="object"&&oa in d)return d[oa]}catch{}return d}function oL(d,t){return Object.is(jE(d),jE(t))}var Ex,Aw,ww,Mw;function lL(){if(Ex===void 0){Ex=window,Aw=/Firefox/.test(navigator.userAgent);var d=Element.prototype,t=Node.prototype,i=Text.prototype;ww=Ka(t,"firstChild").get,Mw=Ka(t,"nextSibling").get,YE(d)&&(d.__click=void 0,d.__className=void 0,d.__attributes=null,d.__style=void 0,d.__e=void 0),YE(i)&&(i.__t=void 0)}}function Za(d=""){return document.createTextNode(d)}function ff(d){return ww.call(d)}function sp(d){return Mw.call(d)}function ht(d,t){return ff(d)}function pi(d,t=!1){{var i=ff(d);return i instanceof Comment&&i.data===""?sp(i):i}}function xt(d,t=1,i=!1){let n=d;for(;t--;)n=sp(n);return n}function hL(d){d.textContent=""}function Rw(){return!1}function uL(d,t){if(t){const i=document.body;d.autofocus=!0,la(()=>{document.activeElement===i&&d.focus()})}}let ZE=!1;function fL(){ZE||(ZE=!0,document.addEventListener("reset",d=>{Promise.resolve().then(()=>{var t;if(!d.defaultPrevented)for(const i of d.target.elements)(t=i.__on_r)==null||t.call(i)})},{capture:!0}))}function ig(d){var t=Je,i=oi;dr(null),pr(null);try{return d()}finally{dr(t),pr(i)}}function cL(d,t,i,n=i){d.addEventListener(t,()=>ig(i));const x=d.__on_r;x?d.__on_r=()=>{x(),n(!0)}:d.__on_r=()=>n(!0),fL()}function Pw(d){oi===null&&(Je===null&&S4(),E4()),nl&&T4()}function dL(d,t){var i=t.last;i===null?t.last=t.first=d:(i.next=d,d.prev=i,t.last=d)}function Vr(d,t,i){var n=oi;n!==null&&(n.f&Us)!==0&&(d|=Us);var x={ctx:Fi,deps:null,nodes:null,f:d|_n|hr,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(i)try{cf(x),x.f|=T1}catch(T){throw Vn(x),T}else t!==null&&Rr(x);var S=x;if(i&&S.deps===null&&S.teardown===null&&S.nodes===null&&S.first===S.last&&(S.f&kf)===0&&(S=S.first,(d&oo)!==0&&(d&Eh)!==0&&S!==null&&(S.f|=Eh)),S!==null&&(S.parent=n,n!==null&&dL(S,n),Je!==null&&(Je.f&Gn)!==0&&(d&Uh)===0)){var s=Je;(s.effects??(s.effects=[])).push(S)}return x}function w1(){return Je!==null&&!Pr}function rp(d){const t=Vr(ep,null,!1);return ji(t,yn),t.teardown=d,t}function Sx(d){Pw();var t=oi.f,i=!Je&&(t&Ur)!==0&&(t&T1)===0;if(i){var n=Fi;(n.e??(n.e=[])).push(d)}else return bw(d)}function bw(d){return Vr(am|sw,d,!1)}function pL(d){return Pw(),Vr(ep|sw,d,!0)}function vL(d){Xo.ensure();const t=Vr(Uh|kf,d,!0);return(i={})=>new Promise(n=>{i.outro?hh(t,()=>{Vn(t),n(void 0)}):(Vn(t),n(void 0))})}function M1(d){return Vr(am,d,!1)}function un(d,t){var i=Fi,n={effect:null,ran:!1,deps:d};i.l.$.push(n),n.effect=ap(()=>{d(),!n.ran&&(n.ran=!0,Ht(t))})}function Vh(){var d=Fi;ap(()=>{for(var t of d.l.$){t.deps();var i=t.effect;(i.f&yn)!==0&&i.deps!==null&&ji(i,cr),Kf(i)&&cf(i),t.ran=!1}})}function mL(d){return Vr(E1|kf,d,!0)}function ap(d,t=0){return Vr(ep|t,d,!0)}function ai(d,t=[],i=[],n=[]){yw(n,t,i,x=>{Vr(ep,()=>d(...x.map(Y)),!0)})}function ng(d,t=0){var i=Vr(oo|t,d,!0);return i}function Iw(d,t=0){var i=Vr(x1|t,d,!0);return i}function ds(d){return Vr(Ur|kf,d,!0)}function Lw(d){var t=d.teardown;if(t!==null){const i=nl,n=Je;JE(!0),dr(null);try{t.call(null)}finally{JE(i),dr(n)}}}function Fw(d,t=!1){var i=d.first;for(d.first=d.last=null;i!==null;){const x=i.ac;x!==null&&ig(()=>{x.abort(Ou)});var n=i.next;(i.f&Uh)!==0?i.parent=null:Vn(i,t),i=n}}function gL(d){for(var t=d.first;t!==null;){var i=t.next;(t.f&Ur)===0&&Vn(t),t=i}}function Vn(d,t=!0){var i=!1;(t||(d.f&nw)!==0)&&d.nodes!==null&&d.nodes.end!==null&&(xL(d.nodes.start,d.nodes.end),i=!0),Fw(d,t&&!i),om(d,0),ji(d,ja);var n=d.nodes&&d.nodes.t;if(n!==null)for(const S of n)S.stop();Lw(d);var x=d.parent;x!==null&&x.first!==null&&Dw(d),d.next=d.prev=d.teardown=d.ctx=d.deps=d.fn=d.nodes=d.ac=null}function xL(d,t){for(;d!==null;){var i=d===t?null:sp(d);d.remove(),d=i}}function Dw(d){var t=d.parent,i=d.prev,n=d.next;i!==null&&(i.next=n),n!==null&&(n.prev=i),t!==null&&(t.first===d&&(t.first=n),t.last===d&&(t.last=i))}function hh(d,t,i=!0){var n=[];Ow(d,n,!0);var x=()=>{i&&Vn(d),t&&t()},S=n.length;if(S>0){var s=()=>--S||x();for(var T of n)T.out(s)}else x()}function Ow(d,t,i){if((d.f&Us)===0){d.f^=Us;var n=d.nodes&&d.nodes.t;if(n!==null)for(const T of n)(T.is_global||i)&&t.push(T);for(var x=d.first;x!==null;){var S=x.next,s=(x.f&Eh)!==0||(x.f&Ur)!==0&&(d.f&oo)!==0;Ow(x,t,s?i:!1),x=S}}}function R1(d){Nw(d,!0)}function Nw(d,t){if((d.f&Us)!==0){d.f^=Us,(d.f&yn)===0&&(ji(d,_n),Rr(d));for(var i=d.first;i!==null;){var n=i.next,x=(i.f&Eh)!==0||(i.f&Ur)!==0;Nw(i,x?t:!1),i=n}var S=d.nodes&&d.nodes.t;if(S!==null)for(const s of S)(s.is_global||t)&&s.in()}}function Bw(d,t){if(d.nodes)for(var i=d.nodes.start,n=d.nodes.end;i!==null;){var x=i===n?null:sp(i);t.append(i),i=x}}let Fv=!1,nl=!1;function JE(d){nl=d}let Je=null,Pr=!1;function dr(d){Je=d}let oi=null;function pr(d){oi=d}let ur=null;function Uw(d){Je!==null&&(ur===null?ur=[d]:ur.push(d))}let cs=null,Rs=0,tr=null;function yL(d){tr=d}let Vw=1,Jl=0,uh=Jl;function QE(d){uh=d}function zw(){return++Vw}function Kf(d){var t=d.f;if((t&_n)!==0)return!0;if(t&Gn&&(d.f&=~Sh),(t&cr)!==0){for(var i=d.deps,n=i.length,x=0;x<n;x++){var S=i[x];if(Kf(S)&&Ew(S),S.wv>d.wv)return!0}(t&hr)!==0&&Un===null&&ji(d,yn)}return!1}function Gw(d,t,i=!0){var n=d.reactions;if(n!==null&&!(ur!==null&&of.call(ur,d)))for(var x=0;x<n.length;x++){var S=n[x];(S.f&Gn)!==0?Gw(S,t,!1):t===S&&(i?ji(S,_n):(S.f&yn)!==0&&ji(S,cr),Rr(S))}}function _w(d){var h;var t=cs,i=Rs,n=tr,x=Je,S=ur,s=Fi,T=Pr,e=uh,a=d.f;cs=null,Rs=0,tr=null,Je=(a&(Ur|Uh))===0?d:null,ur=null,lf(d.ctx),Pr=!1,uh=++Jl,d.ac!==null&&(ig(()=>{d.ac.abort(Ou)}),d.ac=null);try{d.f|=cx;var g=d.fn,f=g(),o=d.deps,u=Ke==null?void 0:Ke.is_fork;if(cs!==null){var r;if(u||om(d,Rs),o!==null&&Rs>0)for(o.length=Rs+cs.length,r=0;r<cs.length;r++)o[Rs+r]=cs[r];else d.deps=o=cs;if(w1()&&(d.f&hr)!==0)for(r=Rs;r<o.length;r++)((h=o[r]).reactions??(h.reactions=[])).push(d)}else!u&&o!==null&&Rs<o.length&&(om(d,Rs),o.length=Rs);if(ip()&&tr!==null&&!Pr&&o!==null&&(d.f&(Gn|cr|_n))===0)for(r=0;r<tr.length;r++)Gw(tr[r],d);if(x!==null&&x!==d){if(Jl++,x.deps!==null)for(let c=0;c<i;c+=1)x.deps[c].rv=Jl;if(t!==null)for(const c of t)c.rv=Jl;tr!==null&&(n===null?n=tr:n.push(...tr))}return(d.f&Ho)!==0&&(d.f^=Ho),f}catch(c){return fw(c)}finally{d.f^=cx,cs=t,Rs=i,tr=n,Je=x,ur=S,lf(s),Pr=T,uh=e}}function TL(d,t){let i=t.reactions;if(i!==null){var n=c4.call(i,d);if(n!==-1){var x=i.length-1;x===0?i=t.reactions=null:(i[n]=i[x],i.pop())}}if(i===null&&(t.f&Gn)!==0&&(cs===null||!of.call(cs,t))){var S=t;(S.f&hr)!==0&&(S.f^=hr,S.f&=~Sh),C1(S),Tw(S),om(S,0)}}function om(d,t){var i=d.deps;if(i!==null)for(var n=t;n<i.length;n++)TL(d,i[n])}function cf(d){var t=d.f;if((t&ja)===0){ji(d,yn);var i=oi,n=Fv;oi=d,Fv=!0;try{(t&(oo|x1))!==0?gL(d):Fw(d),Lw(d);var x=_w(d);d.teardown=typeof x=="function"?x:null,d.wv=Vw;var S;ux&&Y4&&(d.f&_n)!==0&&d.deps}finally{Fv=n,oi=i}}}async function EL(){await Promise.resolve(),j4()}function Y(d){var t=d.f,i=(t&Gn)!==0;if(Je!==null&&!Pr){var n=oi!==null&&(oi.f&ja)!==0;if(!n&&(ur===null||!of.call(ur,d))){var x=Je.deps;if((Je.f&cx)!==0)d.rv<Jl&&(d.rv=Jl,cs===null&&x!==null&&x[Rs]===d?Rs++:cs===null?cs=[d]:cs.push(d));else{(Je.deps??(Je.deps=[])).push(d);var S=d.reactions;S===null?d.reactions=[Je]:of.call(S,Je)||S.push(Je)}}}if(nl&&Yo.has(d))return Yo.get(d);if(i){var s=d;if(nl){var T=s.v;return((s.f&yn)===0&&s.reactions!==null||Hw(s))&&(T=A1(s)),Yo.set(s,T),T}var e=(s.f&hr)===0&&!Pr&&Je!==null&&(Fv||(Je.f&hr)!==0),a=s.deps===null;Kf(s)&&(e&&(s.f|=hr),Ew(s)),e&&!a&&Ww(s)}if(Un!=null&&Un.has(d))return Un.get(d);if((d.f&Ho)!==0)throw d.v;return d.v}function Ww(d){if(d.deps!==null){d.f|=hr;for(const t of d.deps)(t.reactions??(t.reactions=[])).push(d),(t.f&Gn)!==0&&(t.f&hr)===0&&Ww(t)}}function Hw(d){if(d.v===Pn)return!0;if(d.deps===null)return!1;for(const t of d.deps)if(Yo.has(t)||(t.f&Gn)!==0&&Hw(t))return!0;return!1}function Ht(d){var t=Pr;try{return Pr=!0,d()}finally{Pr=t}}function xn(d){if(!(typeof d!="object"||!d||d instanceof EventTarget)){if(oa in d)Cx(d);else if(!Array.isArray(d))for(let t in d){const i=d[t];typeof i=="object"&&i&&oa in i&&Cx(i)}}}function Cx(d,t=new Set){if(typeof d=="object"&&d!==null&&!(d instanceof EventTarget)&&!t.has(d)){t.add(d),d instanceof Date&&d.getTime();for(let n in d)try{Cx(d[n],t)}catch{}const i=g1(d);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const n=ew(i);for(let x in n){const S=n[x].get;if(S)try{S.call(d)}catch{}}}}}function SL(d){return d.endsWith("capture")&&d!=="gotpointercapture"&&d!=="lostpointercapture"}const CL=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function AL(d){return CL.includes(d)}const wL={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function ML(d){return d=d.toLowerCase(),wL[d]??d}const RL=["touchstart","touchmove"];function PL(d){return RL.includes(d)}const Xw=new Set,Ax=new Set;function Yw(d,t,i,n={}){function x(S){if(n.capture||jc.call(t,S),!S.cancelBubble)return ig(()=>i==null?void 0:i.call(this,S))}return d.startsWith("pointer")||d.startsWith("touch")||d==="wheel"?la(()=>{t.addEventListener(d,x,n)}):t.addEventListener(d,x,n),x}function Ze(d,t,i,n,x){var S={capture:n,passive:x},s=Yw(d,t,i,S);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&rp(()=>{t.removeEventListener(d,s,S)})}function bL(d){for(var t=0;t<d.length;t++)Xw.add(d[t]);for(var i of Ax)i(d)}let qE=null;function jc(d){var c;var t=this,i=t.ownerDocument,n=d.type,x=((c=d.composedPath)==null?void 0:c.call(d))||[],S=x[0]||d.target;qE=d;var s=0,T=qE===d&&d.__root;if(T){var e=x.indexOf(T);if(e!==-1&&(t===document||t===window)){d.__root=t;return}var a=x.indexOf(t);if(a===-1)return;e<=a&&(s=e)}if(S=x[s]||d.target,S!==t){d4(d,"currentTarget",{configurable:!0,get(){return S||i}});var g=Je,f=oi;dr(null),pr(null);try{for(var o,u=[];S!==null;){var r=S.assignedSlot||S.parentNode||S.host||null;try{var h=S["__"+n];h!=null&&(!S.disabled||d.target===S)&&h.call(S,d)}catch(l){o?u.push(l):o=l}if(d.cancelBubble||r===t||r===null)break;S=r}if(o){for(let l of u)queueMicrotask(()=>{throw l});throw o}}finally{d.__root=t,delete d.currentTarget,dr(g),pr(f)}}}function kw(d){var t=document.createElement("template");return t.innerHTML=d.replaceAll("<!>","<!---->"),t.content}function wd(d,t){var i=oi;i.nodes===null&&(i.nodes={start:d,end:t,a:null,t:null})}function Qt(d,t){var i=(t&U4)!==0,n=(t&V4)!==0,x,S=!d.startsWith("<!>");return()=>{x===void 0&&(x=kw(S?d:"<!>"+d),i||(x=ff(x)));var s=n||Aw?document.importNode(x,!0):x.cloneNode(!0);if(i){var T=ff(s),e=s.lastChild;wd(T,e)}else wd(s,s);return s}}function IL(d,t,i="svg"){var n=!d.startsWith("<!>"),x=`<${i}>${n?d:"<!>"+d}</${i}>`,S;return()=>{if(!S){var s=kw(x),T=ff(s);S=ff(T)}var e=S.cloneNode(!0);return wd(e,e),e}}function LL(d,t){return IL(d,t,"svg")}function Pi(){var d=document.createDocumentFragment(),t=document.createComment(""),i=Za();return d.append(t,i),wd(t,i),d}function _t(d,t){d!==null&&d.before(t)}function be(d,t){var i=t==null?"":typeof t=="object"?t+"":t;i!==(d.__t??(d.__t=d.nodeValue))&&(d.__t=i,d.nodeValue=i+"")}function FL(d,t){return DL(d,t)}const su=new Map;function DL(d,{target:t,anchor:i,props:n={},events:x,context:S,intro:s=!0}){lL();var T=new Set,e=f=>{for(var o=0;o<f.length;o++){var u=f[o];if(!T.has(u)){T.add(u);var r=PL(u);t.addEventListener(u,jc,{passive:r});var h=su.get(u);h===void 0?(document.addEventListener(u,jc,{passive:r}),su.set(u,1)):su.set(u,h+1)}}};e(tg(Xw)),Ax.add(e);var a=void 0,g=vL(()=>{var f=i??t.appendChild(Za());return q4(f,{pending:()=>{}},o=>{ks({});var u=Fi;S&&(u.c=S),x&&(n.$$events=x),a=d(o,n)||{},$s()}),()=>{var r;for(var o of T){t.removeEventListener(o,jc);var u=su.get(o);--u===0?(document.removeEventListener(o,jc),su.delete(o)):su.set(o,u)}Ax.delete(e),f!==i&&((r=f.parentNode)==null||r.removeChild(f))}});return OL.set(a,g),a}let OL=new WeakMap;var Ar,qr,Ps,lh,qd,tp,Qm;class $w{constructor(t,i=!0){Xr(this,"anchor");ke(this,Ar,new Map);ke(this,qr,new Map);ke(this,Ps,new Map);ke(this,lh,new Set);ke(this,qd,!0);ke(this,tp,()=>{var t=Ke;if(Nt(this,Ar).has(t)){var i=Nt(this,Ar).get(t),n=Nt(this,qr).get(i);if(n)R1(n),Nt(this,lh).delete(i);else{var x=Nt(this,Ps).get(i);x&&(Nt(this,qr).set(i,x.effect),Nt(this,Ps).delete(i),x.fragment.lastChild.remove(),this.anchor.before(x.fragment),n=x.effect)}for(const[S,s]of Nt(this,Ar)){if(Nt(this,Ar).delete(S),S===t)break;const T=Nt(this,Ps).get(s);T&&(Vn(T.effect),Nt(this,Ps).delete(s))}for(const[S,s]of Nt(this,qr)){if(S===i||Nt(this,lh).has(S))continue;const T=()=>{if(Array.from(Nt(this,Ar).values()).includes(S)){var a=document.createDocumentFragment();Bw(s,a),a.append(Za()),Nt(this,Ps).set(S,{effect:s,fragment:a})}else Vn(s);Nt(this,lh).delete(S),Nt(this,qr).delete(S)};Nt(this,qd)||!n?(Nt(this,lh).add(S),hh(s,T,!1)):T()}}});ke(this,Qm,t=>{Nt(this,Ar).delete(t);const i=Array.from(Nt(this,Ar).values());for(const[n,x]of Nt(this,Ps))i.includes(n)||(Vn(x.effect),Nt(this,Ps).delete(n))});this.anchor=t,We(this,qd,i)}ensure(t,i){var n=Ke,x=Rw();if(i&&!Nt(this,qr).has(t)&&!Nt(this,Ps).has(t))if(x){var S=document.createDocumentFragment(),s=Za();S.append(s),Nt(this,Ps).set(t,{effect:ds(()=>i(s)),fragment:S})}else Nt(this,qr).set(t,ds(()=>i(this.anchor)));if(Nt(this,Ar).set(n,t),x){for(const[T,e]of Nt(this,qr))T===t?n.unskip_effect(e):n.skip_effect(e);for(const[T,e]of Nt(this,Ps))T===t?n.unskip_effect(e.effect):n.skip_effect(e.effect);n.oncommit(Nt(this,tp)),n.ondiscard(Nt(this,Qm))}else Nt(this,tp).call(this)}}Ar=new WeakMap,qr=new WeakMap,Ps=new WeakMap,lh=new WeakMap,qd=new WeakMap,tp=new WeakMap,Qm=new WeakMap;function Pe(d,t,i=!1){var n=new $w(d),x=i?Eh:0;function S(s,T){n.ensure(s,T)}ng(()=>{var s=!1;t((T,e=!0)=>{s=!0,S(e,T)}),s||S(!1,null)},x)}function Ji(d,t){return t}function NL(d,t,i){for(var n=[],x=t.length,S,s=t.length,T=0;T<x;T++){let f=t[T];hh(f,()=>{if(S){if(S.pending.delete(f),S.done.add(f),S.pending.size===0){var o=d.outrogroups;wx(tg(S.done)),o.delete(S),o.size===0&&(d.outrogroups=null)}}else s-=1},!1)}if(s===0){var e=n.length===0&&i!==null;if(e){var a=i,g=a.parentNode;hL(g),g.append(a),d.items.clear()}wx(t,!e)}else S={pending:new Set(t),done:new Set},(d.outrogroups??(d.outrogroups=new Set)).add(S)}function wx(d,t=!0){for(var i=0;i<d.length;i++)Vn(d[i],t)}var tS;function Qi(d,t,i,n,x,S=null){var s=d,T=new Map,e=(t&aw)!==0;if(e){var a=d;s=a.appendChild(Za())}var g=null,f=hn(()=>{var l=i();return qm(l)?l:l==null?[]:tg(l)}),o,u=!0;function r(){c.fallback=g,BL(c,o,s,t,n),g!==null&&(o.length===0?(g.f&Wa)===0?R1(g):(g.f^=Wa,Zc(g,null,s)):hh(g,()=>{g=null}))}var h=ng(()=>{o=Y(f);for(var l=o.length,p=new Set,m=Ke,v=Rw(),y=0;y<l;y+=1){var E=o[y],C=n(E,y),w=u?null:T.get(C);w?(w.v&&uf(w.v,E),w.i&&uf(w.i,y),v&&m.unskip_effect(w.e)):(w=UL(T,u?s:tS??(tS=Za()),E,C,y,x,t,i),u||(w.e.f|=Wa),T.set(C,w)),p.add(C)}if(l===0&&S&&!g&&(u?g=ds(()=>S(s)):(g=ds(()=>S(tS??(tS=Za()))),g.f|=Wa)),l>p.size&&y4(),!u)if(v){for(const[A,M]of T)p.has(A)||m.skip_effect(M.e);m.oncommit(r),m.ondiscard(()=>{})}else r();Y(f)}),c={effect:h,items:T,outrogroups:null,fallback:g};u=!1}function Rc(d){for(;d!==null&&(d.f&Ur)===0;)d=d.next;return d}function BL(d,t,i,n,x){var M,R,P,b,F,I,L,D,O;var S=(n&L4)!==0,s=t.length,T=d.items,e=Rc(d.effect.first),a,g=null,f,o=[],u=[],r,h,c,l;if(S)for(l=0;l<s;l+=1)r=t[l],h=x(r,l),c=T.get(h).e,(c.f&Wa)===0&&((R=(M=c.nodes)==null?void 0:M.a)==null||R.measure(),(f??(f=new Set)).add(c));for(l=0;l<s;l+=1){if(r=t[l],h=x(r,l),c=T.get(h).e,d.outrogroups!==null)for(const z of d.outrogroups)z.pending.delete(c),z.done.delete(c);if((c.f&Wa)!==0)if(c.f^=Wa,c===e)Zc(c,null,i);else{var p=g?g.next:e;c===d.effect.last&&(d.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),yo(d,g,c),yo(d,c,p),Zc(c,p,i),g=c,o=[],u=[],e=Rc(g.next);continue}if((c.f&Us)!==0&&(R1(c),S&&((b=(P=c.nodes)==null?void 0:P.a)==null||b.unfix(),(f??(f=new Set)).delete(c))),c!==e){if(a!==void 0&&a.has(c)){if(o.length<u.length){var m=u[0],v;g=m.prev;var y=o[0],E=o[o.length-1];for(v=0;v<o.length;v+=1)Zc(o[v],m,i);for(v=0;v<u.length;v+=1)a.delete(u[v]);yo(d,y.prev,E.next),yo(d,g,y),yo(d,E,m),e=m,g=E,l-=1,o=[],u=[]}else a.delete(c),Zc(c,e,i),yo(d,c.prev,c.next),yo(d,c,g===null?d.effect.first:g.next),yo(d,g,c),g=c;continue}for(o=[],u=[];e!==null&&e!==c;)(a??(a=new Set)).add(e),u.push(e),e=Rc(e.next);if(e===null)continue}(c.f&Wa)===0&&o.push(c),g=c,e=Rc(c.next)}if(d.outrogroups!==null){for(const z of d.outrogroups)z.pending.size===0&&(wx(tg(z.done)),(F=d.outrogroups)==null||F.delete(z));d.outrogroups.size===0&&(d.outrogroups=null)}if(e!==null||a!==void 0){var C=[];if(a!==void 0)for(c of a)(c.f&Us)===0&&C.push(c);for(;e!==null;)(e.f&Us)===0&&e!==d.fallback&&C.push(e),e=Rc(e.next);var w=C.length;if(w>0){var A=(n&aw)!==0&&s===0?i:null;if(S){for(l=0;l<w;l+=1)(L=(I=C[l].nodes)==null?void 0:I.a)==null||L.measure();for(l=0;l<w;l+=1)(O=(D=C[l].nodes)==null?void 0:D.a)==null||O.fix()}NL(d,C,A)}}S&&la(()=>{var z,_;if(f!==void 0)for(c of f)(_=(z=c.nodes)==null?void 0:z.a)==null||_.apply()})}function UL(d,t,i,n,x,S,s,T){var e=(s&b4)!==0?(s&F4)===0?fe(i,!1,!1):il(i):null,a=(s&I4)!==0?il(x):null;return{v:e,i:a,e:ds(()=>(S(t,e??i,a??x,T),()=>{d.delete(n)}))}}function Zc(d,t,i){if(d.nodes)for(var n=d.nodes.start,x=d.nodes.end,S=t&&(t.f&Wa)===0?t.nodes.start:i;n!==null;){var s=sp(n);if(S.before(n),n===x)return;n=s}}function yo(d,t,i){t===null?d.effect.first=i:t.next=i,i===null?d.effect.last=t:i.prev=t}function Xi(d,t,i,n,x){var T;var S=(T=t.$$slots)==null?void 0:T[i],s=!1;S===!0&&(S=t[i==="default"?"children":i],s=!0),S===void 0||S(d,s?()=>n:n)}function VL(d,t,i,n,x,S){var s=null,T=d,e=new $w(T,!1);ng(()=>{const a=t()||null;var g=G4;if(a===null){e.ensure(null,null);return}return e.ensure(a,f=>{if(a){if(s=document.createElementNS(g,a),wd(s,s),n){var o=s.appendChild(Za());n(s,o)}oi.nodes.end=s,f.before(s)}}),()=>{}},Eh),rp(()=>{})}function zL(d,t){var i=void 0,n;Iw(()=>{i!==(i=t())&&(n&&(Vn(n),n=null),i&&(n=ds(()=>{M1(()=>i(d))})))})}function Kw(d){var t,i,n="";if(typeof d=="string"||typeof d=="number")n+=d;else if(typeof d=="object")if(Array.isArray(d)){var x=d.length;for(t=0;t<x;t++)d[t]&&(i=Kw(d[t]))&&(n&&(n+=" "),n+=i)}else for(i in d)d[i]&&(n&&(n+=" "),n+=i);return n}function GL(){for(var d,t,i=0,n="",x=arguments.length;i<x;i++)(d=arguments[i])&&(t=Kw(d))&&(n&&(n+=" "),n+=t);return n}function _L(d){return typeof d=="object"?GL(d):d??""}const eS=[...` 	
\r\fÂ \v\uFEFF`];function WL(d,t,i){var n=d==null?"":""+d;if(t&&(n=n?n+" "+t:t),i){for(var x in i)if(i[x])n=n?n+" "+x:x;else if(n.length)for(var S=x.length,s=0;(s=n.indexOf(x,s))>=0;){var T=s+S;(s===0||eS.includes(n[s-1]))&&(T===n.length||eS.includes(n[T]))?n=(s===0?"":n.substring(0,s))+n.substring(T+1):s=T}}return n===""?null:n}function iS(d,t=!1){var i=t?" !important;":";",n="";for(var x in d){var S=d[x];S!=null&&S!==""&&(n+=" "+x+": "+S+i)}return n}function kg(d){return d[0]!=="-"||d[1]!=="-"?d.toLowerCase():d}function HL(d,t){if(t){var i="",n,x;if(Array.isArray(t)?(n=t[0],x=t[1]):n=t,d){d=String(d).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var S=!1,s=0,T=!1,e=[];n&&e.push(...Object.keys(n).map(kg)),x&&e.push(...Object.keys(x).map(kg));var a=0,g=-1;const h=d.length;for(var f=0;f<h;f++){var o=d[f];if(T?o==="/"&&d[f-1]==="*"&&(T=!1):S?S===o&&(S=!1):o==="/"&&d[f+1]==="*"?T=!0:o==='"'||o==="'"?S=o:o==="("?s++:o===")"&&s--,!T&&S===!1&&s===0){if(o===":"&&g===-1)g=f;else if(o===";"||f===h-1){if(g!==-1){var u=kg(d.substring(a,g).trim());if(!e.includes(u)){o!==";"&&f++;var r=d.substring(a,f).trim();i+=" "+r+";"}}a=f+1,g=-1}}}}return n&&(i+=iS(n)),x&&(i+=iS(x,!0)),i=i.trim(),i===""?null:i}return d==null?null:String(d)}function $e(d,t,i,n,x,S){var s=d.__className;if(s!==i||s===void 0){var T=WL(i,n,S);T==null?d.removeAttribute("class"):t?d.className=T:d.setAttribute("class",T),d.__className=i}else if(S&&x!==S)for(var e in S){var a=!!S[e];(x==null||a!==!!x[e])&&d.classList.toggle(e,a)}return S}function $g(d,t={},i,n){for(var x in i){var S=i[x];t[x]!==S&&(i[x]==null?d.style.removeProperty(x):d.style.setProperty(x,S,n))}}function Md(d,t,i,n){var x=d.__style;if(x!==t){var S=HL(t,n);S==null?d.removeAttribute("style"):d.style.cssText=S,d.__style=t}else n&&(Array.isArray(n)?($g(d,i==null?void 0:i[0],n[0]),$g(d,i==null?void 0:i[1],n[1],"important")):$g(d,i,n));return n}function Mx(d,t,i=!1){if(d.multiple){if(t==null)return;if(!qm(t))return W4();for(var n of d.options)n.selected=t.includes(nS(n));return}for(n of d.options){var x=nS(n);if(oL(x,t)){n.selected=!0;return}}(!i||t!==void 0)&&(d.selectedIndex=-1)}function XL(d){var t=new MutationObserver(()=>{Mx(d,d.__value)});t.observe(d,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),rp(()=>{t.disconnect()})}function nS(d){return"__value"in d?d.__value:d.value}const Pc=Symbol("class"),bc=Symbol("style"),jw=Symbol("is custom element"),Zw=Symbol("is html");function YL(d,t){t?d.hasAttribute("selected")||d.setAttribute("selected",""):d.removeAttribute("selected")}function Rx(d,t,i,n){var x=Jw(d);x[t]!==(x[t]=i)&&(t==="loading"&&(d[g4]=i),i==null?d.removeAttribute(t):typeof i!="string"&&Qw(d).includes(t)?d[t]=i:d.setAttribute(t,i))}function kL(d,t,i,n,x=!1,S=!1){var s=Jw(d),T=s[jw],e=!s[Zw],a=t||{},g=d.tagName==="OPTION";for(var f in t)f in i||(i[f]=null);i.class?i.class=_L(i.class):i[Pc]&&(i.class=null),i[bc]&&(i.style??(i.style=null));var o=Qw(d);for(const v in i){let y=i[v];if(g&&v==="value"&&y==null){d.value=d.__value="",a[v]=y;continue}if(v==="class"){var u=d.namespaceURI==="http://www.w3.org/1999/xhtml";$e(d,u,y,n,t==null?void 0:t[Pc],i[Pc]),a[v]=y,a[Pc]=i[Pc];continue}if(v==="style"){Md(d,y,t==null?void 0:t[bc],i[bc]),a[v]=y,a[bc]=i[bc];continue}var r=a[v];if(!(y===r&&!(y===void 0&&d.hasAttribute(v)))){a[v]=y;var h=v[0]+v[1];if(h!=="$$")if(h==="on"){const E={},C="$$"+v;let w=v.slice(2);var c=AL(w);if(SL(w)&&(w=w.slice(0,-7),E.capture=!0),!c&&r){if(y!=null)continue;d.removeEventListener(w,a[C],E),a[C]=null}if(y!=null)if(c)d[`__${w}`]=y,bL([w]);else{let A=function(M){a[v].call(this,M)};var m=A;a[C]=Yw(w,d,A,E)}else c&&(d[`__${w}`]=void 0)}else if(v==="style")Rx(d,v,y);else if(v==="autofocus")uL(d,!!y);else if(!T&&(v==="__value"||v==="value"&&y!=null))d.value=d.__value=y;else if(v==="selected"&&g)YL(d,y);else{var l=v;e||(l=ML(l));var p=l==="defaultValue"||l==="defaultChecked";if(y==null&&!T&&!p)if(s[v]=null,l==="value"||l==="checked"){let E=d;const C=t===void 0;if(l==="value"){let w=E.defaultValue;E.removeAttribute(l),E.defaultValue=w,E.value=E.__value=C?w:null}else{let w=E.defaultChecked;E.removeAttribute(l),E.defaultChecked=w,E.checked=C?w:!1}}else d.removeAttribute(v);else p||o.includes(l)&&(T||typeof y!="string")?(d[l]=y,l in s&&(s[l]=Pn)):typeof y!="function"&&Rx(d,l,y)}}}return a}function sS(d,t,i=[],n=[],x=[],S,s=!1,T=!1){yw(x,i,n,e=>{var a=void 0,g={},f=d.nodeName==="SELECT",o=!1;if(Iw(()=>{var r=t(...e.map(Y)),h=kL(d,a,r,S,s,T);o&&f&&"value"in r&&Mx(d,r.value);for(let l of Object.getOwnPropertySymbols(g))r[l]||Vn(g[l]);for(let l of Object.getOwnPropertySymbols(r)){var c=r[l];l.description===_4&&(!a||c!==a[l])&&(g[l]&&Vn(g[l]),g[l]=ds(()=>zL(d,()=>c))),h[l]=c}a=h}),f){var u=d;M1(()=>{Mx(u,a.value,!0),XL(u)})}o=!0})}function Jw(d){return d.__attributes??(d.__attributes={[jw]:d.nodeName.includes("-"),[Zw]:d.namespaceURI===z4})}var rS=new Map;function Qw(d){var t=d.getAttribute("is")||d.nodeName,i=rS.get(t);if(i)return i;rS.set(t,i=[]);for(var n,x=d,S=Element.prototype;S!==x;){n=ew(x);for(var s in n)n[s].set&&i.push(s);x=g1(x)}return i}function Kg(d,t,i=t){var n=new WeakSet;cL(d,"input",async x=>{var S=x?d.defaultValue:d.value;if(S=jg(d)?Zg(S):S,i(S),Ke!==null&&n.add(Ke),await EL(),S!==(S=t())){var s=d.selectionStart,T=d.selectionEnd,e=d.value.length;if(d.value=S??"",T!==null){var a=d.value.length;s===T&&T===e&&a>e?(d.selectionStart=a,d.selectionEnd=a):(d.selectionStart=s,d.selectionEnd=Math.min(T,a))}}}),Ht(t)==null&&d.value&&(i(jg(d)?Zg(d.value):d.value),Ke!==null&&n.add(Ke)),ap(()=>{var x=t();if(d===document.activeElement){var S=dx??Ke;if(n.has(S))return}jg(d)&&x===Zg(d.value)||d.type==="date"&&!x&&!d.value||x!==d.value&&(d.value=x??"")})}function jg(d){var t=d.type;return t==="number"||t==="range"}function Zg(d){return d===""?null:+d}function Px(d,t,i){var n=Ka(d,t);n&&n.set&&(d[t]=i,rp(()=>{d[t]=null}))}function aS(d,t){return d===t||(d==null?void 0:d[oa])===t}function lm(d={},t,i,n){return M1(()=>{var x,S;return ap(()=>{x=S,S=[],Ht(()=>{d!==i(...S)&&(t(d,...S),x&&aS(i(...x),d)&&t(null,...x))})}),()=>{la(()=>{S&&aS(i(...S),d)&&t(null,...S)})}}),d}function $L(d){return function(...t){var i=t[0];i.target===this&&(d==null||d.apply(this,t))}}function qw(d){return function(...t){var i=t[0];return i.preventDefault(),d==null?void 0:d.apply(this,t)}}function vr(d=!1){const t=Fi,i=t.l.u;if(!i)return;let n=()=>xn(t.s);if(d){let x=0,S={};const s=np(()=>{let T=!1;const e=t.s;for(const a in e)e[a]!==S[a]&&(S[a]=e[a],T=!0);return T&&x++,x});n=()=>Y(s)}i.b.length&&pL(()=>{oS(t,n),fx(i.b)}),Sx(()=>{const x=Ht(()=>i.m.map(m4));return()=>{for(const S of x)typeof S=="function"&&S()}}),i.a.length&&Sx(()=>{oS(t,n),fx(i.a)})}function oS(d,t){if(d.l.s)for(const i of d.l.s)Y(i);t()}let $p=!1;function KL(d){var t=$p;try{return $p=!1,[d(),$p]}finally{$p=t}}const jL={get(d,t){if(!d.exclude.includes(t))return Y(d.version),t in d.special?d.special[t]():d.props[t]},set(d,t,i){if(!(t in d.special)){var n=oi;try{pr(d.parent_effect),d.special[t]=Fe({get[t](){return d.props[t]}},t,ow)}finally{pr(n)}}return d.special[t](i),KE(d.version),!0},getOwnPropertyDescriptor(d,t){if(!d.exclude.includes(t)&&t in d.props)return{enumerable:!0,configurable:!0,value:d.props[t]}},deleteProperty(d,t){return d.exclude.includes(t)||(d.exclude.push(t),KE(d.version)),!0},has(d,t){return d.exclude.includes(t)?!1:t in d.props},ownKeys(d){return Reflect.ownKeys(d.props).filter(t=>!d.exclude.includes(t))}};function en(d,t){return new Proxy({props:d,exclude:t,special:{},version:il(0),parent_effect:oi},jL)}const ZL={get(d,t){let i=d.props.length;for(;i--;){let n=d.props[i];if(Mc(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(d,t,i){let n=d.props.length;for(;n--;){let x=d.props[n];Mc(x)&&(x=x());const S=Ka(x,t);if(S&&S.set)return S.set(i),!0}return!1},getOwnPropertyDescriptor(d,t){let i=d.props.length;for(;i--;){let n=d.props[i];if(Mc(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const x=Ka(n,t);return x&&!x.configurable&&(x.configurable=!0),x}}},has(d,t){if(t===oa||t===rw)return!1;for(let i of d.props)if(Mc(i)&&(i=i()),i!=null&&t in i)return!0;return!1},ownKeys(d){const t=[];for(let i of d.props)if(Mc(i)&&(i=i()),!!i){for(const n in i)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(i))t.includes(n)||t.push(n)}return t}};function Cn(...d){return new Proxy({props:d},ZL)}function Fe(d,t,i,n){var m;var x=!$f||(i&O4)!==0,S=(i&N4)!==0,s=(i&B4)!==0,T=n,e=!0,a=()=>(e&&(e=!1,T=s?Ht(n):n),T),g;if(S){var f=oa in d||rw in d;g=((m=Ka(d,t))==null?void 0:m.set)??(f&&t in d?v=>d[t]=v:void 0)}var o,u=!1;S?[o,u]=KL(()=>d[t]):o=d[t],o===void 0&&n!==void 0&&(o=a(),g&&(x&&A4(),g(o)));var r;if(x?r=()=>{var v=d[t];return v===void 0?a():(e=!0,v)}:r=()=>{var v=d[t];return v!==void 0&&(T=void 0),v===void 0?T:v},x&&(i&ow)===0)return r;if(g){var h=d.$$legacy;return(function(v,y){return arguments.length>0?((!x||!y||h||u)&&g(y?r():v),v):r()})}var c=!1,l=((i&D4)!==0?np:hn)(()=>(c=!1,r()));S&&Y(l);var p=oi;return(function(v,y){if(arguments.length>0){const E=y?Y(l):x&&S?Nu(v):v;return ut(l,E),c=!0,T!==void 0&&(T=E),v}return nl&&c||(p.f&ja)!==0?l.v:Y(l)})}function Rd(d){Fi===null&&S1(),$f&&Fi.l!==null?QL(Fi).m.push(d):Sx(()=>{const t=Ht(d);if(typeof t=="function")return t})}function P1(d){Fi===null&&S1(),Rd(()=>()=>Ht(d))}function JL(d,t,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(d,{detail:t,bubbles:i,cancelable:n})}function pl(){const d=Fi;return d===null&&S1(),(t,i,n)=>{var S;const x=(S=d.s.$$events)==null?void 0:S[t];if(x){const s=qm(x)?x.slice():[x],T=JL(t,i,n);for(const e of s)e.call(d.x,T);return!T.defaultPrevented}return!0}}function QL(d){var t=d.l;return t.u??(t.u={a:[],b:[],m:[]})}const qL="5";var tw;typeof window<"u"&&((tw=window.__svelte??(window.__svelte={})).v??(tw.v=new Set)).add(qL);k4();/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const tF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var eF=LL("<svg><!><!></svg>");function An(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]),n=en(i,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ks(t,!1);let x=Fe(t,"name",8,void 0),S=Fe(t,"color",8,"currentColor"),s=Fe(t,"size",8,24),T=Fe(t,"strokeWidth",8,2),e=Fe(t,"absoluteStrokeWidth",8,!1),a=Fe(t,"iconNode",24,()=>[]);const g=(...r)=>r.filter((h,c,l)=>!!h&&l.indexOf(h)===c).join(" ");vr();var f=eF();sS(f,(r,h)=>({...tF,...n,width:s(),height:s(),stroke:S(),"stroke-width":r,class:h}),[()=>(xn(e()),xn(T()),xn(s()),Ht(()=>e()?Number(T())*24/Number(s()):T())),()=>(xn(x()),xn(i),Ht(()=>g("lucide-icon","lucide",x()?`lucide-${x()}`:"",i.class)))]);var o=ht(f);Qi(o,1,a,Ji,(r,h)=>{var c=Kc(()=>$c(Y(h),2));let l=()=>Y(c)[0],p=()=>Y(c)[1];var m=Pi(),v=pi(m);VL(v,l,!0,(y,E)=>{sS(y,()=>({...p()}))}),_t(r,m)});var u=xt(o);Xi(u,t,"default",{}),_t(d,f),$s()}function tM(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];An(d,Cn({name:"circle-help"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function bx(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["line",{x1:"12",x2:"12",y1:"2",y2:"22"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}]];An(d,Cn({name:"dollar-sign"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function iF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];An(d,Cn({name:"house"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function nF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];An(d,Cn({name:"info"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function sF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]];An(d,Cn({name:"lock"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function rF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}],["polyline",{points:"10 17 15 12 10 7"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}]];An(d,Cn({name:"log-in"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function aF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["polygon",{points:"6 3 20 12 6 21 6 3"}]];An(d,Cn({name:"play"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function hd(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];An(d,Cn({name:"rotate-ccw"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function lS(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];An(d,Cn({name:"settings"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function oF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]];An(d,Cn({name:"smile"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function lF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}],["polyline",{points:"16 17 22 17 22 11"}]];An(d,Cn({name:"trending-down"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function hF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}],["polyline",{points:"16 7 22 7 22 13"}]];An(d,Cn({name:"trending-up"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function Ix(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}],["path",{d:"M4 22h16"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"}]];An(d,Cn({name:"trophy"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function uF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];An(d,Cn({name:"user-plus"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function eM(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];An(d,Cn({name:"user"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function fF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]];An(d,Cn({name:"volume-2"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function cF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15"}]];An(d,Cn({name:"volume-x"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function sg(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];An(d,Cn({name:"x"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}function dF(d,t){const i=en(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];An(d,Cn({name:"zap"},()=>i,{get iconNode(){return n},children:(x,S)=>{var s=Pi(),T=pi(s);Xi(T,t,"default",{}),_t(x,s)},$$slots:{default:!0}}))}var pF=Qt('<div class="relative animate-in fade-in slide-in-from-top-2 duration-300"><!> <input type="text" placeholder="Display Nickname" class="w-full bg-black/40 border border-white/10 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-zinc-500 focus:outline-none focus:border-emerald-500/50 transition-colors shadow-inner disabled:opacity-50"/></div>'),vF=Qt('<p class="text-red-400 text-xs font-bold text-center animate-pulse"> </p>'),mF=Qt('<div class="w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"></div> Processing...',1),gF=Qt("<!> Sign In",1),xF=Qt("<!> Create Account",1),yF=Qt('<div class="space-y-4"><div class="relative"><!> <input type="text" placeholder="Username" class="w-full bg-black/40 border border-white/10 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-zinc-500 focus:outline-none focus:border-emerald-500/50 transition-colors shadow-inner disabled:opacity-50"/> <p class="text-[9px] text-zinc-500 mt-1 ml-2 uppercase font-bold tracking-tighter">Note: Usernames are case insensitive</p></div> <div class="relative"><!> <input type="password" placeholder="Password" class="w-full bg-black/40 border border-white/10 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-zinc-500 focus:outline-none focus:border-emerald-500/50 transition-colors shadow-inner disabled:opacity-50"/></div> <!></div> <!> <button type="submit" class="w-full py-4 bg-emerald-500 hover:bg-emerald-400 text-black font-black uppercase tracking-widest rounded-xl transition-all shadow-lg shadow-emerald-500/20 active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <div class="flex items-center justify-between px-2"><button type="button" class="text-xs font-black text-zinc-400 hover:text-white uppercase tracking-tighter transition-colors disabled:opacity-50"> </button> <button type="button" class="text-xs font-black text-emerald-400 hover:text-emerald-300 uppercase tracking-tighter transition-colors disabled:opacity-50">Play as Guest</button></div>',1),TF=Qt('<div class="text-center py-4 space-y-6 animate-in zoom-in-95 duration-300"><p class="text-zinc-300 text-sm font-medium px-4">Guest progress is <span class="text-red-400">not saved</span>. Create an account to track your bankroll and shooter stats across sessions!</p> <button type="button" class="w-full py-4 bg-white hover:bg-zinc-200 text-black font-black uppercase tracking-widest rounded-xl transition-all shadow-lg active:scale-[0.98] flex items-center justify-center gap-2"><!> Start Guest Session</button> <button type="button" class="text-xs font-black text-zinc-400 hover:text-white uppercase tracking-tighter transition-colors">Go Back to Login</button></div>'),EF=Qt(`<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-xl"><div class="w-full max-w-md p-8 bg-[#1a4d2e] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8),inset_0_0_30px_rgba(0,0,0,0.4)] relative overflow-hidden group"><div class="absolute -top-24 -left-24 w-48 h-48 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors duration-700"></div> <div class="absolute -bottom-24 -right-24 w-48 h-48 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors duration-700"></div> <div class="text-center mb-8 relative z-10"><div class="inline-flex gap-2 p-4 rounded-2xl bg-black/40 border border-white/10 mb-4 shadow-inner"><img src="https://img.icons8.com/color/96/dice.png" alt="logo" class="w-16 h-16 drop-shadow-lg"/> <img src="https://img.icons8.com/color/96/dice.png" alt="logo" class="w-16 h-16 drop-shadow-lg"/></div> <h1 class="text-3xl font-black text-white tracking-tighter uppercase italic">Bobby's Bubble <span class="text-emerald-400">Craps</span></h1> <p class="text-zinc-400 text-sm font-medium mt-1">Authentic Casino Craps Experience</p></div> <form class="space-y-4 relative z-10"><!></form></div></div>`);function SF(d,t){ks(t,!1);const i=pl();let n=Fe(t,"errorMessage",8,""),x=fe("login"),S=fe(""),s=fe(""),T=fe(""),e=fe(""),a=fe(!1);function g(){if(ut(e,""),console.log("handleAuth triggered",{mode:Y(x),username:Y(S),password:Y(s),nickname:Y(T)}),Y(x)==="signup"){if(!Y(S)||!Y(s)||!Y(T)){ut(e,"All fields are required for signup");return}ut(a,!0),i("signup",{username:Y(S),password:Y(s),nickname:Y(T)})}else if(Y(x)==="login"){if(!Y(S)||!Y(s)){ut(e,"Username and password are required");return}console.log("Dispatching login event",{username:Y(S),password:Y(s)}),ut(a,!0),i("login",{username:Y(S),password:Y(s)})}}function f(){console.log("handleGuest triggered"),i("guest")}un(()=>xn(n()),()=>{n()&&(ut(e,n()),ut(a,!1))}),un(()=>Y(e),()=>{Y(e)&&ut(a,!1)}),Vh(),vr();var o=EF(),u=ht(o),r=xt(ht(u),6),h=ht(r);{var c=p=>{var m=yF(),v=pi(m),y=ht(v),E=ht(y);eM(E,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500",size:18});var C=xt(E,2),w=xt(y,2),A=ht(w);sF(A,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500",size:18});var M=xt(A,2),R=xt(w,2);{var P=U=>{var G=pF(),N=ht(G);oF(N,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500",size:18});var W=xt(N,2);ai(()=>W.disabled=Y(a)),Kg(W,()=>Y(T),V=>ut(T,V)),_t(U,G)};Pe(R,U=>{Y(x)==="signup"&&U(P)})}var b=xt(v,2);{var F=U=>{var G=vF(),N=ht(G);ai(()=>be(N,Y(e))),_t(U,G)};Pe(b,U=>{Y(e)&&U(F)})}var I=xt(b,2),L=ht(I);{var D=U=>{var G=mF();_t(U,G)},O=U=>{var G=Pi(),N=pi(G);{var W=$=>{var j=gF(),k=pi(j);rF(k,{size:20}),_t($,j)},V=$=>{var j=xF(),k=pi(j);uF(k,{size:20}),_t($,j)};Pe(N,$=>{Y(x)==="login"?$(W):$(V,!1)})}_t(U,G)};Pe(L,U=>{Y(a)?U(D):U(O,!1)})}var z=xt(I,2),_=ht(z),X=ht(_),H=xt(_,2);ai(()=>{C.disabled=Y(a),M.disabled=Y(a),I.disabled=Y(a),_.disabled=Y(a),be(X,Y(x)==="login"?"Don't have an account? Sign Up":"Already have an account? Sign In"),H.disabled=Y(a)}),Kg(C,()=>Y(S),U=>ut(S,U)),Kg(M,()=>Y(s),U=>ut(s,U)),Ze("click",_,()=>{ut(x,Y(x)==="login"?"signup":"login"),ut(e,"")}),Ze("click",H,()=>ut(x,"guest")),_t(p,m)},l=p=>{var m=TF(),v=xt(ht(m),2),y=ht(v);aF(y,{size:20,fill:"currentColor"});var E=xt(v,2);Ze("click",v,f),Ze("click",E,()=>ut(x,"login")),_t(p,m)};Pe(h,p=>{Y(x)!=="guest"?p(c):p(l,!1)})}Ze("submit",r,qw(g)),_t(d,o),$s()}var CF=Qt(`<div class="absolute inset-[-8px] rounded-full bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-ogjsci"></div> <div class="absolute inset-[-25px] rounded-full z-0 pointer-events-none svelte-ogjsci"><div class="absolute inset-0 animate-eclipse-rays svelte-ogjsci" style="background: repeating-conic-gradient(from 0deg, #9eff00 0deg 1deg, transparent 1deg 6deg);
                  mask-image: radial-gradient(circle, black 30%, transparent 75%);
                  -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div> <div class="absolute inset-[-15px] rounded-full bg-[#9eff00]/30 blur-2xl z-0 svelte-ogjsci"></div>`,1),AF=Qt("<div></div>"),wF=Qt("<span> </span>"),MF=Qt('<div class="absolute -top-1 -left-1 z-[100] svelte-ogjsci"><div class="absolute inset-0 rounded-full bg-[#9eff00]/80 blur-[4px] animate-pulse svelte-ogjsci"></div> <div class="relative w-4 h-4 bg-white rounded-sm border border-zinc-400 flex items-center justify-center shadow-[0_2px_4px_rgba(0,0,0,0.5),inset_0_1px_1px_white] svelte-ogjsci"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-2.5 h-2.5 text-zinc-800 svelte-ogjsci"><path fill-rule="evenodd" d="M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z" clip-rule="evenodd" class="svelte-ogjsci"></path></svg></div></div>'),RF=Qt('<div><!> <div><div class="absolute inset-0 opacity-10 pointer-events-none svelte-ogjsci" style="background: repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.5) 2px, rgba(0,0,0,0.5) 4px);"></div> <div class="absolute inset-0 rounded-full overflow-hidden svelte-ogjsci"></div> <div class="absolute inset-[6px] rounded-full bg-white shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] border border-black/5 flex flex-col items-center justify-center svelte-ogjsci"><!> <span> </span></div> <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-transparent via-white/30 to-white/10 pointer-events-none svelte-ogjsci"></div></div> <!></div>');function Lx(d,t){ks(t,!1);const i=fe();let n=Fe(t,"value",8,1),x=Fe(t,"displayValue",8,null),S=Fe(t,"selected",8,!1),s=Fe(t,"size",8,"w-12 h-12"),T=Fe(t,"fontSize",8,"text-[10px]"),e=Fe(t,"locked",8,!1),a=Fe(t,"betType",8,"");const g={1:{border:"border-zinc-300",accent:"bg-zinc-400"},2:{border:"border-blue-500",accent:"bg-blue-600"},3:{border:"border-amber-300",accent:"bg-amber-400"},5:{border:"border-red-500",accent:"bg-red-600"},10:{border:"border-orange-400",accent:"bg-orange-500"},25:{border:"border-emerald-400",accent:"bg-emerald-500"},50:{border:"border-blue-400",accent:"bg-blue-500"},100:{border:"border-zinc-800",accent:"bg-zinc-900"}};un(()=>xn(n()),()=>{ut(i,g[n()]||g[1])}),Vh(),vr();var f=RF(),o=ht(f);{var u=C=>{var w=CF();_t(C,w)};Pe(o,C=>{S()&&C(u)})}var r=xt(o,2),h=xt(ht(r),2);Qi(h,4,()=>Array(3),Ji,(C,w,A)=>{var M=AF();Md(M,`transform: translate(-50%, -50%) rotate(${A*60}deg); clip-path: polygon(0 0, 15% 0, 15% 100%, 0 100%, 85% 0, 100% 0, 100% 100%, 85% 100%);`),ai(()=>$e(M,1,`absolute top-1/2 left-1/2 w-[120%] h-[20%] ${Y(i),Ht(()=>Y(i).accent)??""} -translate-x-1/2 -translate-y-1/2 opacity-90`,"svelte-ogjsci")),_t(C,M)});var c=xt(h,2),l=ht(c);{var p=C=>{var w=wF(),A=ht(w);ai(()=>{$e(w,1,`${xn(a()),Ht(()=>a().length>3?"text-[7px]":"text-[9px]")??""} font-black text-zinc-500 uppercase leading-none -mb-0.5`,"svelte-ogjsci"),be(A,a())}),_t(C,w)};Pe(l,C=>{a()&&C(p)})}var m=xt(l,2),v=ht(m),y=xt(r,2);{var E=C=>{var w=MF();_t(C,w)};Pe(y,C=>{e()&&C(E)})}ai(()=>{$e(f,1,`relative ${s()??""} rounded-full flex items-center justify-center transition-all duration-300
         ${S()?"scale-110 -translate-y-2":""}`,"svelte-ogjsci"),$e(r,1,`absolute inset-0 rounded-full bg-white shadow-xl overflow-hidden border-2 ${Y(i),Ht(()=>Y(i).border)??""} z-10`,"svelte-ogjsci"),$e(m,1,`${T()??""} font-black text-zinc-800 drop-shadow-sm tracking-tighter leading-none`,"svelte-ogjsci"),be(v,`$${(x()!==null?x():n())??""}`)}),_t(d,f),$s()}var PF=Qt('<div class="absolute w-[18%] h-[18%] bg-zinc-900 rounded-full"></div>'),bF=Qt('<div class="w-6 h-6 bg-white rounded-[4px] relative shadow-[0_1px_2px_rgba(0,0,0,0.3)] flex-shrink-0"></div>'),IF=Qt('<span class="text-[10px] font-black text-white drop-shadow-md mb-0.5 italic"> </span>'),LF=Qt('<span class="text-sm font-black text-white italic leading-none uppercase drop-shadow-sm"> </span>'),FF=Qt('<span class="text-[10px] font-bold text-white/60 uppercase tracking-tighter drop-shadow-sm"> </span> <span class="text-xl font-black text-white italic leading-none drop-shadow-md"> </span>',1),DF=Qt('<div class="flex flex-col items-center justify-center bg-black/50 rounded-lg px-2 py-1 border border-white/10 min-w-[32px] shadow-lg"><span class="text-[8px] font-bold text-white/50 uppercase leading-none mb-0.5 tracking-tighter">Rolls</span> <span> </span></div>'),OF=Qt('<div><div class="flex gap-1"></div> <div><!> <div class="flex items-baseline gap-1"><!></div></div> <!></div>'),NF=Qt('<span class="text-[10px] font-bold uppercase tracking-widest opacity-60 leading-none mb-1 pointer-events-none"> </span>'),BF=Qt("<span> </span>"),UF=Qt('<span class="text-[9px] font-black mt-1 opacity-30 pointer-events-none"> </span>'),VF=Qt("<!> <!> <!> <!>",1),zF=Qt('<div class="absolute"><!></div>'),GF=Qt('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-10"><div class="relative w-12 h-12 flex items-center justify-center"></div></div>'),_F=Qt('<div class="absolute inset-0 bg-emerald-500/20 animate-pulse pointer-events-none border-2 border-emerald-400"></div>'),WF=Qt('<div class="absolute inset-0 bg-red-500/20 animate-pulse pointer-events-none border-2 border-red-400"></div>'),HF=Qt('<button><div class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"></div> <!> <!> <!> <!> <!></button>');function ui(d,t){ks(t,!1);const i=fe(),n=pl();let x=Fe(t,"label",8,""),S=Fe(t,"subLabel",8,""),s=Fe(t,"odds",8,""),T=Fe(t,"amount",8,0),e=Fe(t,"className",8,""),a=Fe(t,"isActive",8,!1),g=Fe(t,"color",8,"green"),f=Fe(t,"glow",8,!1),o=Fe(t,"isLocked",8,!1),u=Fe(t,"labelClassName",8,""),r=Fe(t,"id",8,""),h=Fe(t,"type",8,""),c=Fe(t,"dice",24,()=>[]),l=Fe(t,"payout",8,""),p=Fe(t,"hardwayCounter",8,null),m=Fe(t,"reverse",8,!1),v=Fe(t,"status",8,null),y=Fe(t,"hideChips",8,!1),E=Fe(t,"betType",8,"");const C={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]},w={green:a()?"bg-emerald-500/20 border-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.4)]":"bg-emerald-950/40 hover:bg-emerald-900/60 border-emerald-500/20",zinc:"bg-zinc-900/60 hover:bg-zinc-800/80 border-white/10 backdrop-blur-md",blue:"bg-blue-950/40 hover:bg-blue-900/60 border-blue-500/20",red:"bg-red-950/40 hover:bg-red-900/60 border-red-500/20",gold:"bg-amber-950/40 hover:bg-amber-900/60 border-amber-500/20"};function A(H){const U=[];let G=H;const N=[100,50,25,10,5,3,2,1];for(const W of N){const V=Math.floor(G/W);for(let $=0;$<V&&(U.push(W),G-=W,!(U.length>=6));$++);if(U.length>=6)break}return U}function M(H,U){const G=U.split("").reduce(($,j)=>$+j.charCodeAt(0),0)+H*137,N=G*123.456%16-8,W=G*789.012%8-4,V=G*456.789%60-30;return`
            z-index: ${H};
            transform: translate(${N}px, ${-H*5+W}px) rotate(${V}deg);
        `}un(()=>xn(T()),()=>{ut(i,T()>0?A(T()):[])}),Vh(),vr();var R=HF(),P=xt(ht(R),2);Xi(P,t,"top",{});var b=xt(P,2);{var F=H=>{var U=OF(),G=ht(U);Qi(G,5,c,Ji,(q,ft)=>{var vt=bF();Qi(vt,5,()=>(Y(ft),Ht(()=>C[Y(ft)]||[])),Ji,(Tt,ct)=>{var Ut=PF();ai(yt=>Md(Ut,`left: ${Y(ct)%3*25+16}%; top: ${yt??""}%`),[()=>(Y(ct),Ht(()=>Math.floor(Y(ct)/3)*25+16))]),_t(Tt,Ut)}),_t(q,vt)});var N=xt(G,2),W=ht(N);{var V=q=>{var ft=IF(),vt=ht(ft);ai(()=>be(vt,l())),_t(q,ft)};Pe(W,q=>{l()&&q(V)})}var $=xt(W,2),j=ht($);{var k=q=>{var ft=LF(),vt=ht(ft);ai(()=>be(vt,x())),_t(q,ft)},Q=q=>{var ft=FF(),vt=pi(ft),Tt=ht(vt),ct=xt(vt,2),Ut=ht(ct);ai(()=>{be(Tt,(xn(c()),Ht(()=>c()[0]===c()[1]?"Hard":""))),be(Ut,(xn(c()),Ht(()=>c()[0]+c()[1])))}),_t(q,ft)};Pe(j,q=>{x()?q(k):q(Q,!1)})}var et=xt(N,2);{var at=q=>{var ft=DF(),vt=xt(ht(ft),2),Tt=ht(vt);ai(()=>{$e(vt,1,`text-sm font-black ${p()>15?"text-red-400":"text-emerald-400"} leading-none drop-shadow-sm`),be(Tt,p())}),_t(q,ft)};Pe(et,q=>{p()!==null&&q(at)})}ai(()=>{$e(U,1,`flex ${m()?"flex-row-reverse":"flex-row"} items-center gap-2 w-full px-2`),$e(N,1,`flex-1 flex flex-col ${m()?"items-end":"items-start"} leading-none`)}),_t(H,U)},I=H=>{var U=VF(),G=pi(U);{var N=Q=>{var et=NF(),at=ht(et);ai(()=>be(at,S())),_t(Q,et)};Pe(G,Q=>{S()&&Q(N)})}var W=xt(G,2);{var V=Q=>{var et=BF(),at=ht(et);ai(()=>{$e(et,1,`font-black leading-none pointer-events-none tracking-tight ${(u()||"text-xl")??""}`),be(at,x())}),_t(Q,et)};Pe(W,Q=>{x()&&Q(V)})}var $=xt(W,2);Xi($,t,"default",{});var j=xt($,2);{var k=Q=>{var et=UF(),at=ht(et);ai(()=>be(at,s())),_t(Q,et)};Pe(j,Q=>{s()&&Q(k)})}_t(H,U)};Pe(b,H=>{h()==="dice"?H(F):H(I,!1)})}var L=xt(b,2);Xi(L,t,"bottom",{});var D=xt(L,2);{var O=H=>{var U=GF(),G=ht(U);Qi(G,5,()=>Y(i),Ji,(N,W,V)=>{var $=zF(),j=ht($);{let k=hn(()=>(xn(o()),Y(i),Ht(()=>o()&&V===Y(i).length-1)));Lx(j,{get value(){return Y(W)},size:"w-12 h-12",fontSize:"text-[10px]",get locked(){return Y(k)},get betType(){return E()}})}ai(k=>Md($,k),[()=>(xn(r()),Ht(()=>M(V,r())))]),_t(N,$)}),_t(H,U)};Pe(D,H=>{T()>0&&!y()&&H(O)})}var z=xt(D,2);{var _=H=>{var U=_F();_t(H,U)},X=H=>{var U=Pi(),G=pi(U);{var N=W=>{var V=WF();_t(W,V)};Pe(G,W=>{v()==="lose"&&W(N)},!0)}_t(H,U)};Pe(z,H=>{v()==="win"?H(_):H(X,!1)})}ai(()=>{Rx(R,"data-bet-id",r()),$e(R,1,`relative flex flex-col items-center justify-center border transition-all active:scale-95 overflow-hidden ${xn(g()),Ht(()=>w[g()])??""} ${f()?"animate-pulse":""} ${e()??""}`)}),Ze("click",R,H=>n("click",H)),Ze("contextmenu",R,qw(H=>n("contextmenu",H))),_t(d,R),$s()}function XF(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Dv={exports:{}},YF=Dv.exports,hS;function kF(){return hS||(hS=1,(function(d,t){(function(n,x){d.exports=x()})(YF,()=>(()=>{var i={50792:(s=>{var T=Object.prototype.hasOwnProperty,e="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(e=!1));function g(r,h,c){this.fn=r,this.context=h,this.once=c||!1}function f(r,h,c,l,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new g(c,l||r,p),v=e?e+h:h;return r._events[v]?r._events[v].fn?r._events[v]=[r._events[v],m]:r._events[v].push(m):(r._events[v]=m,r._eventsCount++),r}function o(r,h){--r._eventsCount===0?r._events=new a:delete r._events[h]}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],c,l;if(this._eventsCount===0)return h;for(l in c=this._events)T.call(c,l)&&h.push(e?l.slice(1):l);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},u.prototype.listeners=function(h){var c=e?e+h:h,l=this._events[c];if(!l)return[];if(l.fn)return[l.fn];for(var p=0,m=l.length,v=new Array(m);p<m;p++)v[p]=l[p].fn;return v},u.prototype.listenerCount=function(h){var c=e?e+h:h,l=this._events[c];return l?l.fn?1:l.length:0},u.prototype.emit=function(h,c,l,p,m,v){var y=e?e+h:h;if(!this._events[y])return!1;var E=this._events[y],C=arguments.length,w,A;if(E.fn){switch(E.once&&this.removeListener(h,E.fn,void 0,!0),C){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,c),!0;case 3:return E.fn.call(E.context,c,l),!0;case 4:return E.fn.call(E.context,c,l,p),!0;case 5:return E.fn.call(E.context,c,l,p,m),!0;case 6:return E.fn.call(E.context,c,l,p,m,v),!0}for(A=1,w=new Array(C-1);A<C;A++)w[A-1]=arguments[A];E.fn.apply(E.context,w)}else{var M=E.length,R;for(A=0;A<M;A++)switch(E[A].once&&this.removeListener(h,E[A].fn,void 0,!0),C){case 1:E[A].fn.call(E[A].context);break;case 2:E[A].fn.call(E[A].context,c);break;case 3:E[A].fn.call(E[A].context,c,l);break;case 4:E[A].fn.call(E[A].context,c,l,p);break;default:if(!w)for(R=1,w=new Array(C-1);R<C;R++)w[R-1]=arguments[R];E[A].fn.apply(E[A].context,w)}}return!0},u.prototype.on=function(h,c,l){return f(this,h,c,l,!1)},u.prototype.once=function(h,c,l){return f(this,h,c,l,!0)},u.prototype.removeListener=function(h,c,l,p){var m=e?e+h:h;if(!this._events[m])return this;if(!c)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===c&&(!p||v.once)&&(!l||v.context===l)&&o(this,m);else{for(var y=0,E=[],C=v.length;y<C;y++)(v[y].fn!==c||p&&!v[y].once||l&&v[y].context!==l)&&E.push(v[y]);E.length?this._events[m]=E.length===1?E[0]:E:o(this,m)}return this},u.prototype.removeAllListeners=function(h){var c;return h?(c=e?e+h:h,this._events[c]&&o(this,c)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,s.exports=u}),11517:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38829),g=function(f,o,u,r){for(var h=f[0],c=1;c<f.length;c++){var l=f[c];a(l,h,o,u,r),h=l}return f};s.exports=g}),80318:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),g=function(f,o,u,r,h){return a(f,"angle",o,u,r,h)};s.exports=g}),60757:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){for(var f=0;f<e.length;f++){var o=e[f];a.call(g,o)}return e};s.exports=T}),69927:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){g===void 0&&(g=0);for(var f=g;f<e.length;f++){var o=e[f],u=!0;for(var r in a)o[r]!==a[r]&&(u=!1);if(u)return o}return null};s.exports=T}),32265:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){g===void 0&&(g=0);for(var f=e.length-1;f>=g;f--){var o=e[f],u=!0;for(var r in a)o[r]!==a[r]&&(u=!1);if(u)return o}return null};s.exports=T}),94420:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(11879),g=e(60461),f=e(95540),o=e(29747),u=e(41481),r=new u({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1).setOrigin(0,0),h=function(c,l){l===void 0&&(l={});var p=l.hasOwnProperty("width"),m=l.hasOwnProperty("height"),v=f(l,"width",-1),y=f(l,"height",-1),E=f(l,"cellWidth",1),C=f(l,"cellHeight",E),w=f(l,"position",g.TOP_LEFT),A=f(l,"x",0),M=f(l,"y",0),R=0,P=0,b=v*E,F=y*C;r.setPosition(A,M),r.setSize(E,C);for(var I=0;I<c.length;I++)if(a(c[I],r,w),p&&v===-1)r.x+=E;else if(m&&y===-1)r.y+=C;else if(m&&!p){if(P+=C,r.y+=C,P===F&&(P=0,R+=E,r.y=M,r.x+=E,R===b))break}else if(R+=E,r.x+=E,R===b&&(R=0,P+=C,r.x=A,r.y+=C,P===F))break;return c};s.exports=h}),41721:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),g=function(f,o,u,r,h){return a(f,"alpha",o,u,r,h)};s.exports=g}),67285:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),g=function(f,o,u,r,h){return a(f,"x",o,u,r,h)};s.exports=g}),9074:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),g=function(f,o,u,r,h,c,l){return u==null&&(u=o),a(f,"x",o,r,c,l),a(f,"y",u,h,c,l)};s.exports=g}),75222:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),g=function(f,o,u,r,h){return a(f,"y",o,u,r,h)};s.exports=g}),22983:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g===void 0&&(g=0),f===void 0&&(f=6.28);for(var o=g,u=(f-g)/e.length,r=a.x,h=a.y,c=a.radius,l=0;l<e.length;l++)e[l].x=r+c*Math.cos(o),e[l].y=h+c*Math.sin(o),o+=u;return e};s.exports=T}),95253:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g===void 0&&(g=0),f===void 0&&(f=6.28);for(var o=g,u=(f-g)/e.length,r=a.width/2,h=a.height/2,c=0;c<e.length;c++)e[c].x=a.x+r*Math.cos(o),e[c].y=a.y+h*Math.sin(o),o+=u;return e};s.exports=T}),88505:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15258),g=e(26708),f=function(o,u,r){var h;r?h=g(u,r,o.length):h=a(u,o.length);for(var c=0;c<o.length;c++){var l=o[c],p=h[c];l.x=p.x,l.y=p.y}return o};s.exports=f}),41346:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14649),g=e(86003),f=e(49498),o=function(u,r,h){h===void 0&&(h=0);var c=a(r,!1,u.length);h>0?g(c,h):h<0&&f(c,Math.abs(h));for(var l=0;l<u.length;l++)u[l].x=c[l].x,u[l].y=c[l].y;return u};s.exports=o}),11575:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84993),g=function(f,o,u){var r=a({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},u),h=a({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},u),c=a({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},u);r.pop(),h.pop(),c.pop(),r=r.concat(h,c);for(var l=r.length/f.length,p=0,m=0;m<f.length;m++){var v=f[m],y=r[Math.floor(p)];v.x=y.x,v.y=y.y,p+=l}return f};s.exports=g}),29953:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){for(var f=0;f<e.length;f++){var o=e[f];o.anims&&o.anims.play(a,g)}return e};s.exports=T}),66979:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o,u){f===void 0&&(f=0),o===void 0&&(o=0),u===void 0&&(u=1);var r,h=0,c=e.length;if(u===1)for(r=o;r<c;r++)e[r][a]+=g+h*f,h++;else for(r=o;r>=0;r--)e[r][a]+=g+h*f,h++;return e};s.exports=T}),43967:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o,u){f===void 0&&(f=0),o===void 0&&(o=0),u===void 0&&(u=1);var r,h=0,c=e.length;if(u===1)for(r=o;r<c;r++)e[r][a]=g+h*f,h++;else for(r=o;r>=0;r--)e[r][a]=g+h*f,h++;return e};s.exports=T}),88926:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28176),g=function(f,o){for(var u=0;u<f.length;u++)a(o,f[u]);return f};s.exports=g}),33286:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(24820),g=function(f,o){for(var u=0;u<f.length;u++)a(o,f[u]);return f};s.exports=g}),96e3:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65822),g=function(f,o){for(var u=0;u<f.length;u++)a(o,f[u]);return f};s.exports=g}),28789:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26597),g=function(f,o){for(var u=0;u<f.length;u++)a(o,f[u]);return f};s.exports=g}),97154:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90260),g=function(f,o){for(var u=0;u<f.length;u++)a(o,f[u]);return f};s.exports=g}),20510:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),g=function(f,o,u,r,h){return a(f,"rotation",o,u,r,h)};s.exports=g}),91051:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1163),g=e(20339),f=function(o,u,r){for(var h=u.x,c=u.y,l=0;l<o.length;l++){var p=o[l];a(p,h,c,r,Math.max(1,g(p.x,p.y,h,c)))}return o};s.exports=f}),76332:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1163),g=function(f,o,u,r){var h=o.x,c=o.y;if(r===0)return f;for(var l=0;l<f.length;l++)a(f[l],h,c,u,r);return f};s.exports=g}),61619:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),g=function(f,o,u,r,h){return a(f,"scaleX",o,u,r,h)};s.exports=g}),94868:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),g=function(f,o,u,r,h,c,l){return u==null&&(u=o),a(f,"scaleX",o,r,c,l),a(f,"scaleY",u,h,c,l)};s.exports=g}),95532:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),g=function(f,o,u,r,h){return a(f,"scaleY",o,u,r,h)};s.exports=g}),8689:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h){return a(f,"alpha",o,u,r,h)};s.exports=g}),2645:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r){return a(f,"blendMode",o,0,u,r)};s.exports=g}),32372:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h){return a(f,"depth",o,u,r,h)};s.exports=g}),85373:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){for(var f=0;f<e.length;f++)e[f].setInteractive(a,g);return e};s.exports=T}),81583:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h,c,l){return u==null&&(u=o),a(f,"originX",o,r,c,l),a(f,"originY",u,h,c,l),f.forEach(function(p){p.updateDisplayOrigin()}),f};s.exports=g}),79939:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h){return a(f,"rotation",o,u,r,h)};s.exports=g}),2699:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h,c,l){return u==null&&(u=o),a(f,"scaleX",o,r,c,l),a(f,"scaleY",u,h,c,l)};s.exports=g}),98739:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h){return a(f,"scaleX",o,u,r,h)};s.exports=g}),98476:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h){return a(f,"scaleY",o,u,r,h)};s.exports=g}),6207:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h,c,l){return u==null&&(u=o),a(f,"scrollFactorX",o,r,c,l),a(f,"scrollFactorY",u,h,c,l)};s.exports=g}),6607:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h){return a(f,"scrollFactorX",o,u,r,h)};s.exports=g}),72248:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h){return a(f,"scrollFactorY",o,u,r,h)};s.exports=g}),14036:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o){for(var u=0;u<e.length;u++)e[u].setTint(a,g,f,o);return e};s.exports=T}),50159:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r){return a(f,"visible",o,0,u,r)};s.exports=g}),77597:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h){return a(f,"x",o,u,r,h)};s.exports=g}),83194:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h,c,l){return u==null&&(u=o),a(f,"x",o,r,c,l),a(f,"y",u,h,c,l)};s.exports=g}),67678:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),g=function(f,o,u,r,h){return a(f,"y",o,u,r,h)};s.exports=g}),35850:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r,h){r===void 0&&(r=0),h===void 0&&(h=new a);var c,l,p=f.length;if(p===1)c=f[0].x,l=f[0].y,f[0].x=o,f[0].y=u;else{var m=1,v=0;r===0&&(v=p-1,m=p-2),c=f[v].x,l=f[v].y,f[v].x=o,f[v].y=u;for(var y=0;y<p;y++)if(!(m>=p||m===-1)){var E=f[m],C=E.x,w=E.y;E.x=c,E.y=l,c=C,l=w,r===0?m--:m++}}return h.x=c,h.y=l,h};s.exports=g}),8628:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33680),g=function(f){return a(f)};s.exports=g}),21837:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7602),g=function(f,o,u,r,h){h===void 0&&(h=!1);var c=Math.abs(r-u)/f.length,l;if(h)for(l=0;l<f.length;l++)f[l][o]+=a(l*c,u,r);else for(l=0;l<f.length;l++)f[l][o]=a(l*c,u,r);return f};s.exports=g}),21910:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54261),g=function(f,o,u,r,h){h===void 0&&(h=!1);var c=Math.abs(r-u)/f.length,l;if(h)for(l=0;l<f.length;l++)f[l][o]+=a(l*c,u,r);else for(l=0;l<f.length;l++)f[l][o]=a(l*c,u,r);return f};s.exports=g}),62054:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o){if(o===void 0&&(o=!1),e.length===0)return e;if(e.length===1)return o?e[0][a]+=(f+g)/2:e[0][a]=(f+g)/2,e;var u=Math.abs(f-g)/(e.length-1),r;if(o)for(r=0;r<e.length;r++)e[r][a]+=r*u+g;else for(r=0;r<e.length;r++)e[r][a]=r*u+g;return e};s.exports=T}),79815:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=0;a<e.length;a++)e[a].visible=!e[a].visible;return e};s.exports=T}),39665:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),g=function(f,o,u){u===void 0&&(u=0);for(var r=0;r<f.length;r++){var h=f[r];h.x=a(h.x,o.left-u,o.right+u),h.y=a(h.y,o.top-u,o.bottom+u)}return f};s.exports=g}),61061:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AlignTo:e(11517),Angle:e(80318),Call:e(60757),GetFirst:e(69927),GetLast:e(32265),GridAlign:e(94420),IncAlpha:e(41721),IncX:e(67285),IncXY:e(9074),IncY:e(75222),PlaceOnCircle:e(22983),PlaceOnEllipse:e(95253),PlaceOnLine:e(88505),PlaceOnRectangle:e(41346),PlaceOnTriangle:e(11575),PlayAnimation:e(29953),PropertyValueInc:e(66979),PropertyValueSet:e(43967),RandomCircle:e(88926),RandomEllipse:e(33286),RandomLine:e(96e3),RandomRectangle:e(28789),RandomTriangle:e(97154),Rotate:e(20510),RotateAround:e(91051),RotateAroundDistance:e(76332),ScaleX:e(61619),ScaleXY:e(94868),ScaleY:e(95532),SetAlpha:e(8689),SetBlendMode:e(2645),SetDepth:e(32372),SetHitArea:e(85373),SetOrigin:e(81583),SetRotation:e(79939),SetScale:e(2699),SetScaleX:e(98739),SetScaleY:e(98476),SetScrollFactor:e(6207),SetScrollFactorX:e(6607),SetScrollFactorY:e(72248),SetTint:e(14036),SetVisible:e(50159),SetX:e(77597),SetXY:e(83194),SetY:e(67678),ShiftPosition:e(35850),Shuffle:e(8628),SmootherStep:e(21910),SmoothStep:e(21837),Spread:e(62054),ToggleVisible:e(79815),WrapInRectangle:e(39665)}}),42099:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(74943),o=e(81957),u=e(41138),r=e(35154),h=e(90126),c=new g({initialize:function(p,m,v){this.manager=p,this.key=m,this.type="frame",this.frames=this.getFrames(p.textureManager,r(v,"frames",[]),r(v,"defaultTextureKey",null),r(v,"sortFrames",!0)),this.frameRate=r(v,"frameRate",null),this.duration=r(v,"duration",null),this.msPerFrame,this.skipMissedFrames=r(v,"skipMissedFrames",!0),this.delay=r(v,"delay",0),this.repeat=r(v,"repeat",0),this.repeatDelay=r(v,"repeatDelay",0),this.yoyo=r(v,"yoyo",!1),this.showBeforeDelay=r(v,"showBeforeDelay",!1),this.showOnStart=r(v,"showOnStart",!1),this.hideOnComplete=r(v,"hideOnComplete",!1),this.randomFrame=r(v,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(f.PAUSE_ALL,this.pause,this),this.manager.on(f.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(l,p,m,v){m===null&&v===null?(l.frameRate=24,l.duration=24/p*1e3):m&&v===null?(l.duration=m,l.frameRate=p/(m/1e3)):(l.frameRate=v,l.duration=p/v*1e3),l.msPerFrame=1e3/l.frameRate},addFrame:function(l){return this.addFrameAt(this.frames.length,l)},addFrameAt:function(l,p){var m=this.getFrames(this.manager.textureManager,p);if(m.length>0){if(l===0)this.frames=m.concat(this.frames);else if(l===this.frames.length)this.frames=this.frames.concat(m);else{var v=this.frames.slice(0,l),y=this.frames.slice(l);this.frames=v.concat(m,y)}this.updateFrameSequence()}return this},checkFrame:function(l){return l>=0&&l<this.frames.length},getFirstTick:function(l){l.accumulator=0,l.nextTick=l.frameRate===l.currentAnim.frameRate&&l.currentFrame.duration||l.msPerFrame},getFrameAt:function(l){return this.frames[l]},getFrames:function(l,p,m,v){v===void 0&&(v=!0);var y=[],E,C,w=1,A,M;if(typeof p=="string"){if(M=p,!l.exists(M))return console.warn('Texture "%s" not found',M),y;var R=l.get(M),P=R.getFrameNames();v&&h(P),p=[],P.forEach(function(O){p.push({key:M,frame:O})})}if(!Array.isArray(p)||p.length===0)return y;for(A=0;A<p.length;A++){var b=p[A],F=r(b,"key",m);if(F){var I=r(b,"frame",0),L=l.getFrame(F,I);if(!L){console.warn('Texture "%s" not found',F);continue}C=new u(F,I,w,L),C.duration=r(b,"duration",0),C.isFirst=!E,E&&(E.nextFrame=C,C.prevFrame=E),y.push(C),E=C,w++}}if(y.length>0){C.isLast=!0,C.nextFrame=y[0],y[0].prevFrame=C;var D=1/(y.length-1);for(A=0;A<y.length;A++)y[A].progress=A*D}return y},getNextTick:function(l){l.accumulator-=l.nextTick,l.nextTick=l.frameRate===l.currentAnim.frameRate&&l.currentFrame.duration||l.msPerFrame},getFrameByProgress:function(l){return l=a(l,0,1),o(l,this.frames,"progress")},nextFrame:function(l){var p=l.currentFrame;p.isLast?l.yoyo?this.handleYoyoFrame(l,!1):l.repeatCounter>0?l.inReverse&&l.forward?l.forward=!1:this.repeatAnimation(l):l.complete():this.updateAndGetNextTick(l,p.nextFrame)},handleYoyoFrame:function(l,p){if(p||(p=!1),l.inReverse===!p&&l.repeatCounter>0){(l.repeatDelay===0||l.pendingRepeat)&&(l.forward=p),this.repeatAnimation(l);return}if(l.inReverse!==p&&l.repeatCounter===0){l.complete();return}l.forward=p;var m=p?l.currentFrame.nextFrame:l.currentFrame.prevFrame;this.updateAndGetNextTick(l,m)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(l){var p=l.currentFrame;p.isFirst?l.yoyo?this.handleYoyoFrame(l,!0):l.repeatCounter>0?l.inReverse&&!l.forward?this.repeatAnimation(l):(l.forward=!0,this.repeatAnimation(l)):l.complete():this.updateAndGetNextTick(l,p.prevFrame)},updateAndGetNextTick:function(l,p){l.setCurrentFrame(p),this.getNextTick(l)},removeFrame:function(l){var p=this.frames.indexOf(l);return p!==-1&&this.removeFrameAt(p),this},removeFrameAt:function(l){return this.frames.splice(l,1),this.updateFrameSequence(),this},repeatAnimation:function(l){if(l._pendingStop===2){if(l._pendingStopValue===0)return l.stop();l._pendingStopValue--}l.repeatDelay>0&&!l.pendingRepeat?(l.pendingRepeat=!0,l.accumulator-=l.nextTick,l.nextTick+=l.repeatDelay):(l.repeatCounter--,l.forward?l.setCurrentFrame(l.currentFrame.nextFrame):l.setCurrentFrame(l.currentFrame.prevFrame),l.isPlaying&&(this.getNextTick(l),l.handleRepeat()))},toJSON:function(){var l={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(p){l.frames.push(p.toJSON())}),l},updateFrameSequence:function(){for(var l=this.frames.length,p=1/(l-1),m,v=0;v<l;v++)m=this.frames[v],m.index=v+1,m.isFirst=!1,m.isLast=!1,m.progress=v*p,v===0?(m.isFirst=!0,l===1?(m.isLast=!0,m.nextFrame=m,m.prevFrame=m):(m.isLast=!1,m.prevFrame=this.frames[l-1],m.nextFrame=this.frames[v+1])):v===l-1&&l>1?(m.isLast=!0,m.prevFrame=this.frames[l-2],m.nextFrame=this.frames[0]):l>1&&(m.prevFrame=this.frames[v-1],m.nextFrame=this.frames[v+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(f.PAUSE_ALL,this.pause,this),this.manager.off(f.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var l=0;l<this.frames.length;l++)this.frames[l].destroy();this.frames=[],this.manager=null}});s.exports=c}),41138:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r,h,c){c===void 0&&(c=!1),this.textureKey=o,this.textureFrame=u,this.index=r,this.frame=h,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});s.exports=g}),60848:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42099),g=e(83419),f=e(90330),o=e(50792),u=e(74943),r=e(8443),h=e(95540),c=e(35154),l=e(36383),p=e(20283),m=e(41836),v=new g({Extends:o,initialize:function(E){o.call(this),this.game=E,this.textureManager=null,this.globalTimeScale=1,this.anims=new f,this.mixes=new f,this.paused=!1,this.name="AnimationManager",E.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(y,E,C){var w=this.anims,A=this.mixes,M=typeof y=="string"?y:y.key,R=typeof E=="string"?E:E.key;if(w.has(M)&&w.has(R)){var P=A.get(M);P||(P={}),P[R]=C,A.set(M,P)}return this},removeMix:function(y,E){var C=this.mixes,w=typeof y=="string"?y:y.key,A=C.get(w);if(A)if(E){var M=typeof E=="string"?E:E.key;A.hasOwnProperty(M)&&delete A[M]}else E||C.delete(w);return this},getMix:function(y,E){var C=this.mixes,w=typeof y=="string"?y:y.key,A=typeof E=="string"?E:E.key,M=C.get(w);return M&&M.hasOwnProperty(A)?M[A]:0},add:function(y,E){return this.anims.has(y)?(console.warn("Animation key exists: "+y),this):(E.key=y,this.anims.set(y,E),this.emit(u.ADD_ANIMATION,y,E),this)},exists:function(y){return this.anims.has(y)},createFromAseprite:function(y,E,C){var w=[],A=this.game.cache.json.get(y);if(!A)return console.warn("No Aseprite data found for: "+y),w;var M=this,R=c(A,"meta",null),P=c(A,"frames",null);if(R&&P){var b=c(R,"frameTags",[]);b.forEach(function(F){var I=[],L=h(F,"name",null),D=h(F,"from",0),O=h(F,"to",0),z=h(F,"direction","forward");if(L&&(!E||E&&E.indexOf(L)>-1)){for(var _=0,X=D;X<=O;X++){var H=X.toString(),U=P[H];if(U){var G=h(U,"duration",l.MAX_SAFE_INTEGER);I.push({key:y,frame:H,duration:G}),_+=G}}z==="reverse"&&(I=I.reverse());var N={key:L,frames:I,duration:_,yoyo:z==="pingpong"},W;C?C.anims&&(W=C.anims.create(N)):W=M.create(N),W&&w.push(W)}})}return w},create:function(y){var E=y.key,C=!1;return E&&(C=this.get(E),C?console.warn("AnimationManager key already exists: "+E):(C=new a(this,E,y),this.anims.set(E,C),this.emit(u.ADD_ANIMATION,E,C))),C},fromJSON:function(y,E){E===void 0&&(E=!1),E&&this.anims.clear(),typeof y=="string"&&(y=JSON.parse(y));var C=[];if(y.hasOwnProperty("anims")&&Array.isArray(y.anims)){for(var w=0;w<y.anims.length;w++)C.push(this.create(y.anims[w]));y.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=y.globalTimeScale)}else y.hasOwnProperty("key")&&y.type==="frame"&&C.push(this.create(y));return C},generateFrameNames:function(y,E){var C=c(E,"prefix",""),w=c(E,"start",0),A=c(E,"end",0),M=c(E,"suffix",""),R=c(E,"zeroPad",0),P=c(E,"outputArray",[]),b=c(E,"frames",!1);if(!this.textureManager.exists(y))return console.warn('Texture "%s" not found',y),P;var F=this.textureManager.get(y);if(!F)return P;var I;if(E)for(b||(b=p(w,A)),I=0;I<b.length;I++){var L=C+m(b[I],R,"0",1)+M;F.has(L)?P.push({key:y,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,y)}else for(b=F.getFrameNames(),I=0;I<b.length;I++)P.push({key:y,frame:b[I]});return P},generateFrameNumbers:function(y,E){var C=c(E,"start",0),w=c(E,"end",-1),A=c(E,"first",!1),M=c(E,"outputArray",[]),R=c(E,"frames",!1);if(!this.textureManager.exists(y))return console.warn('Texture "%s" not found',y),M;var P=this.textureManager.get(y);if(!P)return M;A&&P.has(A)&&M.push({key:y,frame:A}),R||(w===-1&&(w=P.frameTotal-2),R=p(C,w));for(var b=0;b<R.length;b++){var F=R[b];P.has(F)?M.push({key:y,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,y)}return M},get:function(y){return this.anims.get(y)},getAnimsFromTexture:function(y){for(var E=this.textureManager.get(y),C=E.key,w=this.anims.getArray(),A=[],M=0;M<w.length;M++)for(var R=w[M],P=R.frames,b=0;b<P.length;b++)if(P[b].textureKey===C){A.push(R.key);break}return A},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(u.PAUSE_ALL)),this},play:function(y,E){Array.isArray(E)||(E=[E]);for(var C=0;C<E.length;C++)E[C].anims.play(y);return this},staggerPlay:function(y,E,C,w){C===void 0&&(C=0),w===void 0&&(w=!0),Array.isArray(E)||(E=[E]);var A=E.length;w||A--;for(var M=0;M<E.length;M++){var R=C<0?Math.abs(C)*(A-M):C*M;E[M].anims.playAfterDelay(y,R)}return this},remove:function(y){var E=this.get(y);return E&&(this.emit(u.REMOVE_ANIMATION,y,E),this.anims.delete(y),this.removeMix(y)),E},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(u.RESUME_ALL)),this},toJSON:function(y){var E={anims:[],globalTimeScale:this.globalTimeScale};return y!==void 0&&y!==""?E.anims.push(this.anims.get(y).toJSON()):this.anims.each(function(C,w){E.anims.push(w.toJSON())}),E},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});s.exports=v}),9674:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42099),g=e(30976),f=e(83419),o=e(90330),u=e(74943),r=e(95540),h=new f({initialize:function(l){this.parent=l,this.animationManager=l.scene.sys.anims,this.animationManager.on(u.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(c){var l=this.parent;if(c===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,l;Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var m=c[p];this.nextAnim?this.nextAnimsQueue.push(m):this.nextAnim=m}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(c){this.isPlaying&&this.stop();var l=this.animationManager,p=typeof c=="string"?c:r(c,"key",null),m=this.exists(p)?this.get(p):l.get(p);if(!m)console.warn("Missing animation: "+p);else{this.currentAnim=m;var v=m.getTotalFrames(),y=r(c,"frameRate",m.frameRate),E=r(c,"duration",m.duration);m.calculateDuration(this,v,E,y),this.delay=r(c,"delay",m.delay),this.repeat=r(c,"repeat",m.repeat),this.repeatDelay=r(c,"repeatDelay",m.repeatDelay),this.yoyo=r(c,"yoyo",m.yoyo),this.showBeforeDelay=r(c,"showBeforeDelay",m.showBeforeDelay),this.showOnStart=r(c,"showOnStart",m.showOnStart),this.hideOnComplete=r(c,"hideOnComplete",m.hideOnComplete),this.skipMissedFrames=r(c,"skipMissedFrames",m.skipMissedFrames),this.randomFrame=r(c,"randomFrame",m.randomFrame),this.timeScale=r(c,"timeScale",this.timeScale);var C=r(c,"startFrame",0);C>v&&(C=0),this.randomFrame&&(C=g(0,v-1));var w=m.frames[C];C===0&&!this.forward&&(w=m.getLastFrame()),this.currentFrame=w}return this.parent},pause:function(c){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),c!==void 0&&this.setCurrentFrame(c),this.parent},resume:function(c){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),c!==void 0&&this.setCurrentFrame(c),this.parent},playAfterDelay:function(c,l){if(!this.isPlaying)this.delayCounter=l,this.play(c,!0);else{var p=this.nextAnim,m=this.nextAnimsQueue;p&&m.unshift(p),this.nextAnim=c,this._pendingStop=1,this._pendingStopValue=l}return this.parent},playAfterRepeat:function(c,l){if(l===void 0&&(l=1),!this.isPlaying)this.play(c);else{var p=this.nextAnim,m=this.nextAnimsQueue;p&&m.unshift(p),this.repeatCounter!==-1&&l>this.repeatCounter&&(l=this.repeatCounter),this.nextAnim=c,this._pendingStop=2,this._pendingStopValue=l}return this.parent},play:function(c,l){l===void 0&&(l=!1);var p=this.currentAnim,m=this.parent,v=typeof c=="string"?c:c.key;if(l&&this.isPlaying&&p.key===v)return m;if(p&&this.isPlaying){var y=this.animationManager.getMix(p.key,c);if(y>0)return this.playAfterDelay(c,y)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(c)},playReverse:function(c,l){l===void 0&&(l=!1);var p=typeof c=="string"?c:c.key;return l&&this.isPlaying&&this.currentAnim.key===p?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(c))},startAnimation:function(c){this.load(c);var l=this.currentAnim,p=this.parent;return l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,l.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),p},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(u.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(u.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(u.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(u.ANIMATION_COMPLETE,u.ANIMATION_COMPLETE_KEY)},emitEvents:function(c,l){var p=this.currentAnim;if(p){var m=this.currentFrame,v=this.parent,y=m.textureFrame;v.emit(c,p,m,v,y),l&&v.emit(l+p.key,p,m,v,y)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var c=this.currentFrame;if(!c)return 0;var l=c.progress;return this.inReverse&&(l*=-1),l},setProgress:function(c){return this.forward||(c=1-c),this.setCurrentFrame(this.currentAnim.getFrameByProgress(c)),this.parent},setRepeat:function(c){return this.repeatCounter=c===-1?Number.MAX_VALUE:c,this.parent},globalRemove:function(c,l){l===void 0&&(l=this.currentAnim),this.isPlaying&&l.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(c,l){c===void 0&&(c=!1),l===void 0&&(l=!1);var p=this.currentAnim,m=this.parent;return p?(l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),p.getFirstTick(this),this.emitEvents(u.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!c,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(p.frames[0]),this.parent):m},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var c=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(c)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var c=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(c)}return this.parent},stopAfterDelay:function(c){return this._pendingStop=1,this._pendingStopValue=c,this.parent},stopAfterRepeat:function(c){return c===void 0&&(c=1),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=c,this.parent},stopOnFrame:function(c){return this._pendingStop=3,this._pendingStopValue=c,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(c,l){var p=this.currentAnim;if(!(!this.isPlaying||!p||p.paused)){if(this.accumulator+=l*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=l,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?p.nextFrame(this):p.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var m=0;do this.forward?p.nextFrame(this):p.previousFrame(this),m++;while(this.isPlaying&&this.accumulator>this.nextTick&&m<60)}}},setCurrentFrame:function(c){var l=this.parent;return this.currentFrame=c,l.texture=c.frame.texture,l.frame=c.frame,l.isCropped&&l.frame.updateCropUVs(l._crop,l.flipX,l.flipY),c.setAlpha&&(l.alpha=c.alpha),l.setSizeToFrame(),l._originComponent&&(c.frame.customPivot?l.setOrigin(c.frame.pivotX,c.frame.pivotY):l.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(u.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===c&&this.stop()),l},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(c){return this.anims?this.anims.get(c):null},exists:function(c){return this.anims?this.anims.has(c):!1},create:function(c){var l=c.key,p=!1;return l&&(p=this.get(l),p?console.warn("Animation key already exists: "+l):(p=new a(this,l,c),this.anims||(this.anims=new o),this.anims.set(l,p))),p},createFromAseprite:function(c,l){return this.animationManager.createFromAseprite(c,l,this.parent)},generateFrameNames:function(c,l){return this.animationManager.generateFrameNames(c,l)},generateFrameNumbers:function(c,l){return this.animationManager.generateFrameNumbers(c,l)},remove:function(c){var l=this.get(c);return l&&(this.currentAnim===l&&this.stop(),this.anims.delete(c)),l},destroy:function(){this.animationManager.off(u.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});s.exports=h}),57090:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="add"}),25312:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationcomplete"}),89580:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationcomplete-"}),52860:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationrepeat"}),63850:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationrestart"}),99085:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationstart"}),28087:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationstop"}),1794:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationupdate"}),52562:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pauseall"}),57953:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="remove"}),68339:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resumeall"}),74943:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADD_ANIMATION:e(57090),ANIMATION_COMPLETE:e(25312),ANIMATION_COMPLETE_KEY:e(89580),ANIMATION_REPEAT:e(52860),ANIMATION_RESTART:e(63850),ANIMATION_START:e(99085),ANIMATION_STOP:e(28087),ANIMATION_UPDATE:e(1794),PAUSE_ALL:e(52562),REMOVE_ANIMATION:e(57953),RESUME_ALL:e(68339)}}),60421:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Animation:e(42099),AnimationFrame:e(41138),AnimationManager:e(60848),AnimationState:e(9674),Events:e(74943)}}),2161:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(90330),f=e(50792),o=e(24736),u=new a({initialize:function(){this.entries=new g,this.events=new f},add:function(r,h){return this.entries.set(r,h),this.events.emit(o.ADD,this,r,h),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var h=this.get(r);return h&&(this.entries.delete(r),this.events.emit(o.REMOVE,this,r,h.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});s.exports=u}),24047:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2161),g=e(83419),f=e(8443),o=new g({initialize:function(r){this.game=r,this.binary=new a,this.bitmapFont=new a,this.json=new a,this.physics=new a,this.shader=new a,this.audio=new a,this.video=new a,this.text=new a,this.html=new a,this.obj=new a,this.tilemap=new a,this.xml=new a,this.custom={},this.game.events.once(f.DESTROY,this.destroy,this)},addCustom:function(u){return this.custom.hasOwnProperty(u)||(this.custom[u]=new a),this.custom[u]},destroy:function(){for(var u=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<u.length;r++)this[u[r]].destroy(),this[u[r]]=null;for(var h in this.custom)this.custom[h].destroy();this.custom=null,this.game=null}});s.exports=o}),51464:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="add"}),59261:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="remove"}),24736:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADD:e(51464),REMOVE:e(59261)}}),83388:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BaseCache:e(2161),CacheManager:e(24047),Events:e(24736)}}),71911:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(39506),o=e(50792),u=e(19715),r=e(87841),h=e(61340),c=e(80333),l=e(26099),p=new a({Extends:o,Mixins:[g.AlphaSingle,g.Visible],initialize:function(v,y,E,C){v===void 0&&(v=0),y===void 0&&(y=0),E===void 0&&(E=0),C===void 0&&(C=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=v,this._y=y,this._width=E,this._height=C,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new h,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(E/2,C/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(m){this.renderList.push(m)},setOrigin:function(m,v){return m===void 0&&(m=.5),v===void 0&&(v=m),this.originX=m,this.originY=v,this},getScroll:function(m,v,y){y===void 0&&(y=new l);var E=this.width*.5,C=this.height*.5;return y.x=m-E,y.y=v-C,this.useBounds&&(y.x=this.clampX(y.x),y.y=this.clampY(y.y)),y},centerOnX:function(m){var v=this.width*.5;return this.midPoint.x=m,this.scrollX=m-v,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(m){var v=this.height*.5;return this.midPoint.y=m,this.scrollY=m-v,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(m,v){return this.centerOnX(m),this.centerOnY(v),this},centerToBounds:function(){if(this.useBounds){var m=this._bounds,v=this.width*.5,y=this.height*.5;this.midPoint.set(m.centerX,m.centerY),this.scrollX=m.centerX-v,this.scrollY=m.centerY-y}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(m){if(this.disableCull)return m;var v=this.matrix.matrix,y=v[0],E=v[1],C=v[2],w=v[3],A=y*w-E*C;if(!A)return m;var M=v[4],R=v[5],P=this.scrollX,b=this.scrollY,F=this.width,I=this.height,L=this.y,D=L+I,O=this.x,z=O+F,_=this.culledObjects,X=m.length;A=1/A,_.length=0;for(var H=0;H<X;++H){var U=m[H];if(!U.hasOwnProperty("width")||U.parentContainer){_.push(U);continue}var G=U.width,N=U.height,W=U.x-P*U.scrollFactorX-G*U.originX,V=U.y-b*U.scrollFactorY-N*U.originY,$=W*y+V*C+M,j=W*E+V*w+R,k=(W+G)*y+(V+N)*C+M,Q=(W+G)*E+(V+N)*w+R;k>O&&$<z&&Q>L&&j<D&&_.push(U)}return _},getWorldPoint:function(m,v,y){y===void 0&&(y=new l);var E=this.matrix.matrix,C=E[0],w=E[1],A=E[2],M=E[3],R=E[4],P=E[5],b=C*M-w*A;if(!b)return y.x=m,y.y=v,y;b=1/b;var F=M*b,I=-w*b,L=-A*b,D=C*b,O=(A*P-M*R)*b,z=(w*R-C*P)*b,_=Math.cos(this.rotation),X=Math.sin(this.rotation),H=this.zoomX,U=this.zoomY,G=this.scrollX,N=this.scrollY,W=m+(G*_-N*X)*H,V=v+(G*X+N*_)*U;return y.x=W*F+V*L+O,y.y=W*I+V*D+z,y},ignore:function(m){var v=this.id;Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++){var E=m[y];Array.isArray(E)?this.ignore(E):E.isParent?this.ignore(E.getChildren()):E.cameraFilter|=v}return this},clampX:function(m){var v=this._bounds,y=this.displayWidth,E=v.x+(y-this.width)/2,C=Math.max(E,E+v.width-y);return m<E?m=E:m>C&&(m=C),m},clampY:function(m){var v=this._bounds,y=this.displayHeight,E=v.y+(y-this.height)/2,C=Math.max(E,E+v.height-y);return m<E?m=E:m>C&&(m=C),m},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(m){return m===void 0&&(m=0),this.rotation=f(m),this},setBackgroundColor:function(m){return m===void 0&&(m="rgba(0,0,0,0)"),this.backgroundColor=c(m),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(m,v,y,E,C){return C===void 0&&(C=!1),this._bounds.setTo(m,v,y,E),this.dirty=!0,this.useBounds=!0,C?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(m){m===void 0&&(m=new r);var v=this._bounds;return m.setTo(v.x,v.y,v.width,v.height),m},setName:function(m){return m===void 0&&(m=""),this.name=m,this},setPosition:function(m,v){return v===void 0&&(v=m),this.x=m,this.y=v,this},setRotation:function(m){return m===void 0&&(m=0),this.rotation=m,this},setRoundPixels:function(m){return this.roundPixels=m,this},setScene:function(m,v){v===void 0&&(v=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=m,this.isSceneCamera=v;var y=m.sys;return this.sceneManager=y.game.scene,this.scaleManager=y.scale,this.cameraManager=y.cameras,this.updateSystem(),this},setScroll:function(m,v){return v===void 0&&(v=m),this.scrollX=m,this.scrollY=v,this},setSize:function(m,v){return v===void 0&&(v=m),this.width=m,this.height=v,this},setViewport:function(m,v,y,E){return this.x=m,this.y=v,this.width=y,this.height=E,this},setZoom:function(m,v){return m===void 0&&(m=1),v===void 0&&(v=m),m===0&&(m=.001),v===0&&(v=.001),this.zoomX=m,this.zoomY=v,this},setMask:function(m,v){return v===void 0&&(v=!0),this.mask=m,this._maskCamera=v?this.cameraManager.default:this,this},clearMask:function(m){return m===void 0&&(m=!1),m&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var m={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(m.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),m},update:function(){},setIsSceneCamera:function(m){return this.isSceneCamera=m,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var m=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,v=this.sceneManager;m&&!this._customViewport?v.customViewports++:!m&&this._customViewport&&v.customViewports--,this.dirty=!0,this._customViewport=m}},destroy:function(){this.emit(u.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(m){this._x=m,this.updateSystem()}},y:{get:function(){return this._y},set:function(m){this._y=m,this.updateSystem()}},width:{get:function(){return this._width},set:function(m){this._width=m,this.updateSystem()}},height:{get:function(){return this._height},set:function(m){this._height=m,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(m){m!==this._scrollX&&(this._scrollX=m,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(m){m!==this._scrollY&&(this._scrollY=m,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(m){this._zoomX=m,this._zoomY=m,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(m){this._zoomX=m,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(m){this._zoomY=m,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(m){this._rotation=m,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});s.exports=p}),38058:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71911),g=e(67502),f=e(45319),o=e(83419),u=e(31401),r=e(20052),h=e(19715),c=e(28915),l=e(87841),p=e(26099),m=new o({Extends:a,Mixins:[u.PostPipeline],initialize:function(y,E,C,w){a.call(this,y,E,C,w),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new p(1,1),this.followOffset=new p,this.deadzone=null,this._follow=null},setDeadzone:function(v,y){if(v===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=v,this.deadzone.height=y):this.deadzone=new l(0,0,v,y),this._follow){var E=this.width/2,C=this.height/2,w=this._follow.x-this.followOffset.x,A=this._follow.y-this.followOffset.y;this.midPoint.set(w,A),this.scrollX=w-E,this.scrollY=A-C}g(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(v,y,E,C,w,A){return this.fadeEffect.start(!1,v,y,E,C,!0,w,A)},fadeOut:function(v,y,E,C,w,A){return this.fadeEffect.start(!0,v,y,E,C,!0,w,A)},fadeFrom:function(v,y,E,C,w,A,M){return this.fadeEffect.start(!1,v,y,E,C,w,A,M)},fade:function(v,y,E,C,w,A,M){return this.fadeEffect.start(!0,v,y,E,C,w,A,M)},flash:function(v,y,E,C,w,A,M){return this.flashEffect.start(v,y,E,C,w,A,M)},shake:function(v,y,E,C,w){return this.shakeEffect.start(v,y,E,C,w)},pan:function(v,y,E,C,w,A,M){return this.panEffect.start(v,y,E,C,w,A,M)},rotateTo:function(v,y,E,C,w,A,M){return this.rotateToEffect.start(v,y,E,C,w,A,M)},zoomTo:function(v,y,E,C,w,A){return this.zoomEffect.start(v,y,E,C,w,A)},preRender:function(){this.renderList.length=0;var v=this.width,y=this.height,E=v*.5,C=y*.5,w=this.zoomX,A=this.zoomY,M=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(w)&&Number.isInteger(A);var R=v*this.originX,P=y*this.originY,b=this._follow,F=this.deadzone,I=this.scrollX,L=this.scrollY;F&&g(F,this.midPoint.x,this.midPoint.y);var D=!1;if(b&&!this.panEffect.isRunning){var O=this.lerp,z=b.x-this.followOffset.x,_=b.y-this.followOffset.y;F?(z<F.x?I=c(I,I-(F.x-z),O.x):z>F.right&&(I=c(I,I+(z-F.right),O.x)),_<F.y?L=c(L,L-(F.y-_),O.y):_>F.bottom&&(L=c(L,L+(_-F.bottom),O.y))):(I=c(I,z-R,O.x),L=c(L,_-P,O.y)),D=!0}this.roundPixels&&(I=Math.floor(I),L=Math.floor(L)),this.useBounds&&(I=this.clampX(I),L=this.clampY(L)),this.scrollX=I,this.scrollY=L;var X=I+E,H=L+C;this.midPoint.set(X,H);var U=Math.floor(v/w+.5),G=Math.floor(y/A+.5),N=Math.floor(X-U/2+.5),W=Math.floor(H-G/2+.5);this.worldView.setTo(N,W,U,G),M.applyITRS(Math.floor(this.x+R+.5),Math.floor(this.y+P+.5),this.rotation,w,A),M.translate(-R,-P),this.shakeEffect.preRender(),D&&this.emit(h.FOLLOW_UPDATE,this,b)},setLerp:function(v,y){return v===void 0&&(v=1),y===void 0&&(y=v),this.lerp.set(v,y),this},setFollowOffset:function(v,y){return v===void 0&&(v=0),y===void 0&&(y=0),this.followOffset.set(v,y),this},startFollow:function(v,y,E,C,w,A){y===void 0&&(y=!1),E===void 0&&(E=1),C===void 0&&(C=E),w===void 0&&(w=0),A===void 0&&(A=w),this._follow=v,this.roundPixels=y,E=f(E,0,1),C=f(C,0,1),this.lerp.set(E,C),this.followOffset.set(w,A);var M=this.width/2,R=this.height/2,P=v.x-w,b=v.y-A;return this.midPoint.set(P,b),this.scrollX=P-M,this.scrollY=b-R,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(v,y){this.visible&&(this.rotateToEffect.update(v,y),this.panEffect.update(v,y),this.zoomEffect.update(v,y),this.shakeEffect.update(v,y),this.flashEffect.update(v,y),this.fadeEffect.update(v,y))},destroy:function(){this.resetFX(),a.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});s.exports=m}),32743:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38058),g=e(83419),f=e(95540),o=e(37277),u=e(37303),r=e(97480),h=e(44594),c=new g({initialize:function(p){this.scene=p,this.systems=p.sys,this.roundPixels=p.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,p.sys.events.once(h.BOOT,this.boot,this),p.sys.events.on(h.START,this.start,this)},boot:function(){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new a(0,0,l.scale.width,l.scale.height).setScene(this.scene),l.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){if(!this.main){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0]}var p=this.systems.events;p.on(h.UPDATE,this.update,this),p.once(h.SHUTDOWN,this.shutdown,this)},add:function(l,p,m,v,y,E){l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),y===void 0&&(y=!1),E===void 0&&(E="");var C=new a(l,p,m,v);return C.setName(E),C.setScene(this.scene),C.setRoundPixels(this.roundPixels),C.id=this.getNextID(),this.cameras.push(C),y&&(this.main=C),C},addExisting:function(l,p){p===void 0&&(p=!1);var m=this.cameras.indexOf(l);return m===-1?(l.id=this.getNextID(),l.setRoundPixels(this.roundPixels),this.cameras.push(l),p&&(this.main=l),l):null},getNextID:function(){for(var l=this.cameras,p=1,m=0;m<32;m++){for(var v=!1,y=0;y<l.length;y++){var E=l[y];if(E&&E.id===p){v=!0;continue}}if(v)p=p<<1;else return p}return 0},getTotal:function(l){l===void 0&&(l=!1);for(var p=0,m=this.cameras,v=0;v<m.length;v++){var y=m[v];(!l||l&&y.visible)&&p++}return p},fromJSON:function(l){Array.isArray(l)||(l=[l]);for(var p=this.scene.sys.scale.width,m=this.scene.sys.scale.height,v=0;v<l.length;v++){var y=l[v],E=f(y,"x",0),C=f(y,"y",0),w=f(y,"width",p),A=f(y,"height",m),M=this.add(E,C,w,A);M.name=f(y,"name",""),M.zoom=f(y,"zoom",1),M.rotation=f(y,"rotation",0),M.scrollX=f(y,"scrollX",0),M.scrollY=f(y,"scrollY",0),M.roundPixels=f(y,"roundPixels",!1),M.visible=f(y,"visible",!0);var R=f(y,"backgroundColor",!1);R&&M.setBackgroundColor(R);var P=f(y,"bounds",null);if(P){var b=f(P,"x",0),F=f(P,"y",0),I=f(P,"width",p),L=f(P,"height",m);M.setBounds(b,F,I,L)}}return this},getCamera:function(l){for(var p=this.cameras,m=0;m<p.length;m++)if(p[m].name===l)return p[m];return null},getCamerasBelowPointer:function(l){for(var p=this.cameras,m=l.x,v=l.y,y=[],E=0;E<p.length;E++){var C=p[E];C.visible&&C.inputEnabled&&u(C,m,v)&&y.unshift(C)}return y},remove:function(l,p){p===void 0&&(p=!0),Array.isArray(l)||(l=[l]);for(var m=0,v=this.cameras,y=0;y<l.length;y++){var E=v.indexOf(l[y]);E!==-1&&(p?v[E].destroy():v[E].renderList=[],v.splice(E,1),m++)}return!this.main&&v[0]&&(this.main=v[0]),m},render:function(l,p){for(var m=this.scene,v=this.cameras,y=0;y<v.length;y++){var E=v[y];if(E.visible&&E.alpha>0){E.preRender();var C=this.getVisibleChildren(p.getChildren(),E);l.render(m,C,E)}}},getVisibleChildren:function(l,p){return l.filter(function(m){return m.willRender(p)})},resetAll:function(){for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(l,p){for(var m=0;m<this.cameras.length;m++)this.cameras[m].update(l,p)},onResize:function(l,p,m,v,y){for(var E=0;E<this.cameras.length;E++){var C=this.cameras[E];C._x===0&&C._y===0&&C._width===v&&C._height===y&&C.setSize(p.width,p.height)}},resize:function(l,p){for(var m=0;m<this.cameras.length;m++)this.cameras[m].setSize(l,p)},shutdown:function(){this.main=void 0;for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();this.cameras=[];var p=this.systems.events;p.off(h.UPDATE,this.update,this),p.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(h.START,this.start,this),this.systems.events.off(h.DESTROY,this.destroy,this),this.systems.game.scale.off(r.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});o.register("CameraManager",c,"cameras"),s.exports=c}),5020:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(19715),o=new g({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,r,h,c,l,p,m,v){if(u===void 0&&(u=!0),r===void 0&&(r=1e3),h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=!1),m===void 0&&(m=null),v===void 0&&(v=this.camera.scene),!p&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=u,this.progress=0,this.red=h,this.green=c,this.blue=l,this.alpha=u?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=m,this._onUpdateScope=v;var y=u?f.FADE_OUT_START:f.FADE_IN_START;return this.camera.emit(y,this.camera,this,r,h,c,l),this.camera},update:function(u,r){this.isRunning&&(this._elapsed+=r,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(u){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(u,r){if(!this.isRunning&&!this.isComplete)return!1;var h=this.camera,c=this.red/255,l=this.green/255,p=this.blue/255;return u.drawFillRect(h.x,h.y,h.width,h.height,r(p,l,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var u=this.direction?f.FADE_OUT_COMPLETE:f.FADE_IN_COMPLETE;this.camera.emit(u,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=o}),10662:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(19715),o=new g({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(u,r,h,c,l,p,m){return u===void 0&&(u=250),r===void 0&&(r=255),h===void 0&&(h=255),c===void 0&&(c=255),l===void 0&&(l=!1),p===void 0&&(p=null),m===void 0&&(m=this.camera.scene),!l&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=u,this.progress=0,this.red=r,this.green=h,this.blue=c,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=m,this.camera.emit(f.FLASH_START,this.camera,this,u,r,h,c),this.camera)},update:function(u,r){this.isRunning&&(this._elapsed+=r,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(u){if(!this.isRunning)return!1;var r=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(u,r){if(!this.isRunning)return!1;var h=this.camera,c=this.red/255,l=this.green/255,p=this.blue/255;return u.drawFillRect(h.x,h.y,h.width,h.height,r(p,l,c,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(f.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=o}),20359:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(62640),o=e(19715),u=e(26099),r=new g({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new u,this.current=new u,this.destination=new u,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,c,l,p,m,v,y){l===void 0&&(l=1e3),p===void 0&&(p=f.Linear),m===void 0&&(m=!1),v===void 0&&(v=null),y===void 0&&(y=this.camera.scene);var E=this.camera;return!m&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source.set(E.scrollX,E.scrollY),this.destination.set(h,c),E.getScroll(h,c,this.current),typeof p=="string"&&f.hasOwnProperty(p)?this.ease=f[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=y,this.camera.emit(o.PAN_START,this.camera,this,l,h,c)),E},update:function(h,c){if(this.isRunning){this._elapsed+=c;var l=a(this._elapsed/this.duration,0,1);this.progress=l;var p=this.camera;if(this._elapsed<this.duration){var m=this.ease(l);p.getScroll(this.destination.x,this.destination.y,this.current);var v=this.source.x+(this.current.x-this.source.x)*m,y=this.source.y+(this.current.y-this.source.y)*m;p.setScroll(v,y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,l,v,y)}else p.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,l,p.scrollX,p.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});s.exports=r}),34208:((s,T,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var a=e(45319),g=e(83419),f=e(19715),o=e(62640),u=new g({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,h,c,l,p,m,v){c===void 0&&(c=1e3),l===void 0&&(l=o.Linear),p===void 0&&(p=!1),m===void 0&&(m=null),v===void 0&&(v=this.camera.scene),h===void 0&&(h=!1),this.shortestPath=h;var y=r;r<0?(y=-1*r,this.clockwise=!1):this.clockwise=!0;var E=360*Math.PI/180;y=y-Math.floor(y/E)*E;var C=this.camera;if(!p&&this.isRunning)return C;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=C.rotation,this.destination=y,typeof l=="string"&&o.hasOwnProperty(l)?this.ease=o[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=m,this._onUpdateScope=v,this.shortestPath){var w=0,A=0;this.destination>this.source?w=Math.abs(this.destination-this.source):w=Math.abs(this.destination+E)-this.source,this.source>this.destination?A=Math.abs(this.source-this.destination):A=Math.abs(this.source+E)-this.destination,w<A?this.clockwise=!0:w>A&&(this.clockwise=!1)}return this.camera.emit(f.ROTATE_START,this.camera,this,c,y),C},update:function(r,h){if(this.isRunning){this._elapsed+=h;var c=a(this._elapsed/this.duration,0,1);this.progress=c;var l=this.camera;if(this._elapsed<this.duration){var p=this.ease(c);this.current=l.rotation;var m=0,v=360*Math.PI/180,y=this.destination,E=this.current;this.clockwise===!1&&(y=this.current,E=this.destination),y>=E?m=Math.abs(y-E):m=Math.abs(y+v)-E;var C=0;this.clockwise?C=l.rotation+m*p:C=l.rotation-m*p,l.rotation=C,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,c,C)}else l.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(f.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});s.exports=u}),30330:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(19715),o=e(26099),u=new g({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,h,c,l,p){return r===void 0&&(r=100),h===void 0&&(h=.05),c===void 0&&(c=!1),l===void 0&&(l=null),p===void 0&&(p=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof h=="number"?this.intensity.set(h):this.intensity.set(h.x,h.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=l,this._onUpdateScope=p,this.camera.emit(f.SHAKE_START,this.camera,this,r,h),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,h){if(this.isRunning)if(this._elapsed+=h,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,l=this.camera.width,p=this.camera.height,m=this.camera.zoom;this._offsetX=(Math.random()*c.x*l*2-c.x*l)*m,this._offsetY=(Math.random()*c.y*p*2-c.y*p)*m,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(f.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});s.exports=u}),45641:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(62640),o=e(19715),u=new g({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,h,c,l,p,m){h===void 0&&(h=1e3),c===void 0&&(c=f.Linear),l===void 0&&(l=!1),p===void 0&&(p=null),m===void 0&&(m=this.camera.scene);var v=this.camera;return!l&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source=v.zoom,this.destination=r,typeof c=="string"&&f.hasOwnProperty(c)?this.ease=f[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=m,this.camera.emit(o.ZOOM_START,this.camera,this,h,r)),v},update:function(r,h){this.isRunning&&(this._elapsed+=h,this.progress=a(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=u}),20052:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Fade:e(5020),Flash:e(10662),Pan:e(20359),Shake:e(30330),RotateTo:e(34208),Zoom:e(45641)}}),16438:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="cameradestroy"}),32726:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerafadeincomplete"}),87807:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerafadeinstart"}),45917:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerafadeoutcomplete"}),95666:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerafadeoutstart"}),47056:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="cameraflashcomplete"}),91261:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="cameraflashstart"}),45047:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="followupdate"}),81927:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerapancomplete"}),74264:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerapanstart"}),54419:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postrender"}),79330:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prerender"}),93183:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerarotatecomplete"}),80112:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerarotatestart"}),62252:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerashakecomplete"}),86017:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerashakestart"}),539:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerazoomcomplete"}),51892:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerazoomstart"}),19715:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={DESTROY:e(16438),FADE_IN_COMPLETE:e(32726),FADE_IN_START:e(87807),FADE_OUT_COMPLETE:e(45917),FADE_OUT_START:e(95666),FLASH_COMPLETE:e(47056),FLASH_START:e(91261),FOLLOW_UPDATE:e(45047),PAN_COMPLETE:e(81927),PAN_START:e(74264),POST_RENDER:e(54419),PRE_RENDER:e(79330),ROTATE_COMPLETE:e(93183),ROTATE_START:e(80112),SHAKE_COMPLETE:e(62252),SHAKE_START:e(86017),ZOOM_COMPLETE:e(539),ZOOM_START:e(51892)}}),87969:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Camera:e(38058),BaseCamera:e(71911),CameraManager:e(32743),Effects:e(20052),Events:e(19715)}}),63091:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(35154),f=new a({initialize:function(u){this.camera=g(u,"camera",null),this.left=g(u,"left",null),this.right=g(u,"right",null),this.up=g(u,"up",null),this.down=g(u,"down",null),this.zoomIn=g(u,"zoomIn",null),this.zoomOut=g(u,"zoomOut",null),this.zoomSpeed=g(u,"zoomSpeed",.01),this.minZoom=g(u,"minZoom",.001),this.maxZoom=g(u,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=g(u,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=g(u,"speed.x",0),this.speedY=g(u,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var u=this.camera;this.up&&this.up.isDown?u.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(u.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?u.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(u.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(u.zoom-=this.zoomSpeed,u.zoom<this.minZoom&&(u.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(u.zoom+=this.zoomSpeed,u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});s.exports=f}),58818:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(35154),f=new a({initialize:function(u){this.camera=g(u,"camera",null),this.left=g(u,"left",null),this.right=g(u,"right",null),this.up=g(u,"up",null),this.down=g(u,"down",null),this.zoomIn=g(u,"zoomIn",null),this.zoomOut=g(u,"zoomOut",null),this.zoomSpeed=g(u,"zoomSpeed",.01),this.minZoom=g(u,"minZoom",.001),this.maxZoom=g(u,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=g(u,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=g(u,"acceleration.x",0),this.accelY=g(u,"acceleration.y",0)),this.dragX=0,this.dragY=0;var h=g(u,"drag",null);typeof h=="number"?(this.dragX=h,this.dragY=h):(this.dragX=g(u,"drag.x",0),this.dragY=g(u,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=g(u,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=g(u,"maxSpeed.x",0),this.maxSpeedY=g(u,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var u=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(u.scrollX-=this._speedX*o|0),this._speedY!==0&&(u.scrollY-=this._speedY*o|0),this._zoom!==0&&(u.zoom+=this._zoom,u.zoom<this.minZoom?u.zoom=this.minZoom:u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});s.exports=f}),38865:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={FixedKeyControl:e(63091),SmoothedKeyControl:e(58818)}}),26638:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Controls:e(38865),Scene2D:e(87969)}}),8054:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:e(10312),ScaleModes:e(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};s.exports=a}),69547:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(8054),f=e(42363),o=e(82264),u=e(95540),r=e(35154),h=e(41212),c=e(29747),l=e(75508),p=e(36060),m=e(80333),v=new a({initialize:function(E){E===void 0&&(E={});var C=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],w="#ffffff",A=r(E,"scale",null);this.width=r(A,"width",1024,E),this.height=r(A,"height",768,E),this.zoom=r(A,"zoom",1,E),this.parent=r(A,"parent",void 0,E),this.scaleMode=r(A,A?"mode":"scaleMode",0,E),this.expandParent=r(A,"expandParent",!0,E),this.autoRound=r(A,"autoRound",!1,E),this.autoCenter=r(A,"autoCenter",0,E),this.resizeInterval=r(A,"resizeInterval",500,E),this.fullscreenTarget=r(A,"fullscreenTarget",null,E),this.minWidth=r(A,"min.width",0,E),this.maxWidth=r(A,"max.width",0,E),this.minHeight=r(A,"min.height",0,E),this.maxHeight=r(A,"max.height",0,E),this.snapWidth=r(A,"snap.width",0,E),this.snapHeight=r(A,"snap.height",0,E),this.renderType=r(E,"type",g.AUTO),this.canvas=r(E,"canvas",null),this.context=r(E,"context",null),this.canvasStyle=r(E,"canvasStyle",null),this.customEnvironment=r(E,"customEnvironment",!1),this.sceneConfig=r(E,"scene",null),this.seed=r(E,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=r(E,"title",""),this.gameURL=r(E,"url","https://phaser.io/"+g.LOG_VERSION),this.gameVersion=r(E,"version",""),this.autoFocus=r(E,"autoFocus",!0),this.stableSort=r(E,"stableSort",-1),this.stableSort===-1&&(this.stableSort=o.browser.es2019?1:0),o.features.stableSort=this.stableSort,this.domCreateContainer=r(E,"dom.createContainer",!1),this.domPointerEvents=r(E,"dom.pointerEvents","none"),this.inputKeyboard=r(E,"input.keyboard",!0),this.inputKeyboardEventTarget=r(E,"input.keyboard.target",window),this.inputKeyboardCapture=r(E,"input.keyboard.capture",[]),this.inputMouse=r(E,"input.mouse",!0),this.inputMouseEventTarget=r(E,"input.mouse.target",null),this.inputMousePreventDefaultDown=r(E,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=r(E,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=r(E,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=r(E,"input.mouse.preventDefaultWheel",!0),this.inputTouch=r(E,"input.touch",o.input.touch),this.inputTouchEventTarget=r(E,"input.touch.target",null),this.inputTouchCapture=r(E,"input.touch.capture",!0),this.inputActivePointers=r(E,"input.activePointers",1),this.inputSmoothFactor=r(E,"input.smoothFactor",0),this.inputWindowEvents=r(E,"input.windowEvents",!0),this.inputGamepad=r(E,"input.gamepad",!1),this.inputGamepadEventTarget=r(E,"input.gamepad.target",window),this.disableContextMenu=r(E,"disableContextMenu",!1),this.audio=r(E,"audio",{}),this.hideBanner=r(E,"banner",null)===!1,this.hidePhaser=r(E,"banner.hidePhaser",!1),this.bannerTextColor=r(E,"banner.text",w),this.bannerBackgroundColor=r(E,"banner.background",C),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=r(E,"fps",null),this.disablePreFX=r(E,"disablePreFX",!1),this.disablePostFX=r(E,"disablePostFX",!1);var M=r(E,"render",null);this.pipeline=r(M,"pipeline",null,E),this.autoMobilePipeline=r(M,"autoMobilePipeline",!0,E),this.defaultPipeline=r(M,"defaultPipeline",p.MULTI_PIPELINE,E),this.antialias=r(M,"antialias",!0,E),this.antialiasGL=r(M,"antialiasGL",!0,E),this.mipmapFilter=r(M,"mipmapFilter","",E),this.desynchronized=r(M,"desynchronized",!1,E),this.roundPixels=r(M,"roundPixels",!1,E),this.pixelArt=r(M,"pixelArt",this.zoom!==1,E),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=r(M,"transparent",!1,E),this.clearBeforeRender=r(M,"clearBeforeRender",!0,E),this.preserveDrawingBuffer=r(M,"preserveDrawingBuffer",!1,E),this.premultipliedAlpha=r(M,"premultipliedAlpha",!0,E),this.failIfMajorPerformanceCaveat=r(M,"failIfMajorPerformanceCaveat",!1,E),this.powerPreference=r(M,"powerPreference","default",E),this.batchSize=r(M,"batchSize",4096,E),this.maxTextures=r(M,"maxTextures",-1,E),this.maxLights=r(M,"maxLights",10,E);var R=r(E,"backgroundColor",0);this.backgroundColor=m(R),this.transparent&&(this.backgroundColor=m(0),this.backgroundColor.alpha=0),this.preBoot=r(E,"callbacks.preBoot",c),this.postBoot=r(E,"callbacks.postBoot",c),this.physics=r(E,"physics",{}),this.defaultPhysicsSystem=r(this.physics,"default",!1),this.loaderBaseURL=r(E,"loader.baseURL",""),this.loaderPath=r(E,"loader.path",""),this.loaderMaxParallelDownloads=r(E,"loader.maxParallelDownloads",o.os.android?6:32),this.loaderCrossOrigin=r(E,"loader.crossOrigin",void 0),this.loaderResponseType=r(E,"loader.responseType",""),this.loaderAsync=r(E,"loader.async",!0),this.loaderUser=r(E,"loader.user",""),this.loaderPassword=r(E,"loader.password",""),this.loaderTimeout=r(E,"loader.timeout",0),this.loaderMaxRetries=r(E,"loader.maxRetries",2),this.loaderWithCredentials=r(E,"loader.withCredentials",!1),this.loaderImageLoadType=r(E,"loader.imageLoadType","XHR"),this.loaderLocalScheme=r(E,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=r(E,"fx.glow.quality",.1),this.glowFXDistance=r(E,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=r(E,"plugins",null),b=f.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:h(P)&&(this.installGlobalPlugins=u(P,"global",[]),this.installScenePlugins=u(P,"scene",[]),Array.isArray(P.default)?b=P.default:Array.isArray(P.defaultMerge)&&(b=b.concat(P.defaultMerge)))),this.defaultPlugins=b;var F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=r(E,"images.default",F+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=r(E,"images.missing",F+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=r(E,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=g.WEBGL:window.FORCE_CANVAS&&(this.renderType=g.CANVAS))}});s.exports=v}),86054:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20623),g=e(27919),f=e(8054),o=e(89357),u=function(r){var h=r.config;if((h.customEnvironment||h.canvas)&&h.renderType===f.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!h.customEnvironment&&!h.canvas&&h.renderType!==f.HEADLESS)if(h.renderType===f.AUTO&&(h.renderType=o.webGL?f.WEBGL:f.CANVAS),h.renderType===f.WEBGL){if(!o.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(h.renderType===f.CANVAS){if(!o.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+h.renderType);h.antialias||g.disableSmoothing();var c=r.scale.baseSize,l=c.width,p=c.height;if(h.canvas?(r.canvas=h.canvas,r.canvas.width=l,r.canvas.height=p):r.canvas=g.create(r,l,p,h.renderType),h.canvasStyle&&(r.canvas.style=h.canvasStyle),h.antialias||a.setCrisp(r.canvas),h.renderType!==f.HEADLESS){var m,v;m=e(68627),v=e(74797),h.renderType===f.WEBGL?r.renderer=new v(r):(r.renderer=new m(r),r.context=r.renderer.gameContext)}};s.exports=u}),96391:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8054),g=function(f){var o=f.config;if(!o.hideBanner){var u="WebGL";o.renderType===a.CANVAS?u="Canvas":o.renderType===a.HEADLESS&&(u="Headless");var r=o.audio,h=f.device.audio,c;if(h.webAudio&&!r.disableWebAudio?c="Web Audio":r.noAudio||!h.webAudio&&!h.audioData?c="No Audio":c="HTML5 Audio",f.device.browser.ie)window.console&&console.log("Phaser v"+a.VERSION+" / https://phaser.io");else{var l="",p=[l];if(Array.isArray(o.bannerBackgroundColor)){var m;o.bannerBackgroundColor.forEach(function(y){l=l.concat("%c "),p.push("background: "+y),m=y}),p[p.length-1]="color: "+o.bannerTextColor+"; background: "+m}else l=l.concat("%c "),p.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);p.push("background: transparent"),o.gameTitle&&(l=l.concat(o.gameTitle),o.gameVersion&&(l=l.concat(" v"+o.gameVersion)),o.hidePhaser||(l=l.concat(" / ")));var v="";o.hidePhaser||(l=l.concat("Phaser v"+a.VERSION+v+" ("+u+" | "+c+")")),l=l.concat(" %c "+o.gameURL),p[0]=l,console.log.apply(console,p)}}};s.exports=g}),50127:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),g=e(60848),f=e(24047),o=e(27919),u=e(83419),r=e(69547),h=e(83719),c=e(86054),l=e(45893),p=e(96391),m=e(82264),v=e(57264),y=e(50792),E=e(8443),C=e(7003),w=e(37277),A=e(77332),M=e(76531),R=e(60903),P=e(69442),b=e(17130),F=e(65898),I=e(51085),L=e(14747),D=new u({initialize:function(z){this.config=new r(z),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new y,this.anims=new g(this),this.textures=new b(this),this.cache=new f(this),this.registry=new l(this,new y),this.input=new C(this,this.config),this.scene=new R(this,this.config.sceneConfig),this.device=m,this.scale=new M(this,this.config),this.sound=null,this.sound=L.create(this),this.loop=new F(this,this.config.fps),this.plugins=new A(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,v(this.boot.bind(this))},boot:function(){if(!w.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),h(this),p(this),a(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(E.BOOT)},texturesReady:function(){this.events.emit(E.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),I(this);var O=this.events;O.on(E.HIDDEN,this.onHidden,this),O.on(E.VISIBLE,this.onVisible,this),O.on(E.BLUR,this.onBlur,this),O.on(E.FOCUS,this.onFocus,this)},step:function(O,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var _=this.events;_.emit(E.PRE_STEP,O,z),_.emit(E.STEP,O,z),this.scene.update(O,z),_.emit(E.POST_STEP,O,z);var X=this.renderer;X.preRender(),_.emit(E.PRE_RENDER,X,O,z),this.scene.render(X),X.postRender(),_.emit(E.POST_RENDER,X,O,z)}},headlessStep:function(O,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var _=this.events;_.emit(E.PRE_STEP,O,z),_.emit(E.STEP,O,z),this.scene.update(O,z),_.emit(E.POST_STEP,O,z),this.scene.isProcessing=!1,_.emit(E.PRE_RENDER,null,O,z),_.emit(E.POST_RENDER,null,O,z)}},onHidden:function(){this.loop.pause(),this.events.emit(E.PAUSE)},pause:function(){var O=this.isPaused;this.isPaused=!0,O||this.events.emit(E.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(E.RESUME,this.loop.pauseDuration)},resume:function(){var O=this.isPaused;this.isPaused=!1,O&&this.events.emit(E.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(O,z){z===void 0&&(z=!1),this.pendingDestroy=!0,this.removeCanvas=O,this.noReturn=z},runDestroy:function(){this.scene.destroy(),this.events.emit(E.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});s.exports=D}),65898:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(35154),f=e(29747),o=e(43092),u=new a({initialize:function(h,c){this.game=h,this.raf=new o,this.started=!1,this.running=!1,this.minFps=g(c,"min",5),this.targetFps=g(c,"target",60),this.fpsLimit=g(c,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=f,this.forceSetTimeOut=g(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=g(c,"deltaHistory",10),this.panicMax=g(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=g(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=Math.min(this._target,this.deltaHistory[h]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r;var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target)},smoothDelta:function(r){var h=this.deltaIndex,c=this.deltaHistory,l=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,r=Math.min(r,this._target)),r>this._min&&(r=c[h],r=Math.min(r,this._min)),c[h]=r,this.deltaIndex++,this.deltaIndex>=l&&(this.deltaIndex=0);for(var p=0,m=0;m<l;m++)p+=c[m];return p/=l,p},updateFPS:function(r){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0},stepLimitFPS:function(r){this.now=r;var h=Math.max(0,r-this.lastTime);this.rawDelta=h,this.time+=this.rawDelta,this.smoothStep&&(h=this.smoothDelta(h)),this.delta+=h,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(r,this.delta),this.delta=0),this.lastTime=r,this.frame++},step:function(r){this.now=r;var h=Math.max(0,r-this.lastTime);this.rawDelta=h,this.time+=this.rawDelta,this.smoothStep&&(h=this.smoothDelta(h)),this.delta=h,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.callback(r,h),this.lastTime=r,this.frame++},tick:function(){var r=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(r):this.step(r)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){r===void 0&&(r=!1);var h=window.performance.now();if(!this.running){r&&(this.startTime+=-this.lastTime+(this.lastTime+h));var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=h+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});s.exports=u}),51085:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8443),g=function(f){var o,u=f.events;if(document.hidden!==void 0)o="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},o=c+"visibilitychange")})}var h=function(c){document.hidden||c.type==="pause"?u.emit(a.HIDDEN):u.emit(a.VISIBLE)};o&&document.addEventListener(o,h,!1),window.onblur=function(){u.emit(a.BLUR)},window.onfocus=function(){u.emit(a.FOCUS)},window.focus&&f.config.autoFocus&&window.focus()};s.exports=g}),97217:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="blur"}),47548:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="boot"}),19814:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="contextlost"}),68446:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),41700:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="focus"}),25432:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="hidden"}),65942:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),59211:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postrender"}),47789:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="poststep"}),39066:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prerender"}),460:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prestep"}),16175:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="ready"}),42331:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),11966:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="step"}),32969:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="systemready"}),94830:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="visible"}),8443:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BLUR:e(97217),BOOT:e(47548),CONTEXT_LOST:e(19814),DESTROY:e(68446),FOCUS:e(41700),HIDDEN:e(25432),PAUSE:e(65942),POST_RENDER:e(59211),POST_STEP:e(47789),PRE_RENDER:e(39066),PRE_STEP:e(460),READY:e(16175),RESUME:e(42331),STEP:e(11966),SYSTEM_READY:e(32969),VISIBLE:e(94830)}}),42857:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Config:e(69547),CreateRenderer:e(86054),DebugHeader:e(96391),Events:e(8443),TimeStep:e(65898),VisibilityHandler:e(51085)}}),99584:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(5290),g=e(27919),f=e(35154),o=function(u){var r=f(u,"data",[]),h=f(u,"canvas",null),c=f(u,"palette",a),l=f(u,"pixelWidth",1),p=f(u,"pixelHeight",l),m=f(u,"resizeCanvas",!0),v=f(u,"clearCanvas",!0),y=f(u,"preRender",null),E=f(u,"postRender",null),C=Math.floor(Math.abs(r[0].length*l)),w=Math.floor(Math.abs(r.length*p));h||(h=g.create2D(this,C,w),m=!1,v=!1),m&&(h.width=C,h.height=w);var A=h.getContext("2d",{willReadFrequently:!0});v&&A.clearRect(0,0,C,w),y&&y(h,A);for(var M=0;M<r.length;M++)for(var R=r[M],P=0;P<R.length;P++){var b=R[P];b!=="."&&b!==" "&&(A.fillStyle=c[b],A.fillRect(P*l,M*p,l,p))}return E&&E(h,A),h};s.exports=o}),15822:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={GenerateTexture:e(99584),Palettes:e(57763)}}),5290:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}}),23816:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}}),9866:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}}),77552:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}}),92259:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}}),57763:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ARNE16:e(5290),C64:e(23816),CGA:e(9866),JMP:e(77552),MSX:e(92259)}}),46728:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(36316),f=e(80021),o=e(26099),u=new a({Extends:f,initialize:function(h,c,l,p){f.call(this,"CubicBezierCurve"),Array.isArray(h)&&(p=new o(h[6],h[7]),l=new o(h[4],h[5]),c=new o(h[2],h[3]),h=new o(h[0],h[1])),this.p0=h,this.p1=c,this.p2=l,this.p3=p},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,h){h===void 0&&(h=new o);var c=this.p0,l=this.p1,p=this.p2,m=this.p3;return h.set(g(r,c.x,l.x,p.x,m.x),g(r,c.y,l.y,p.y,m.y))},draw:function(r,h){h===void 0&&(h=32);var c=this.getPoints(h);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<c.length;l++)r.lineTo(c[l].x,c[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});u.fromJSON=function(r){var h=r.points,c=new o(h[0],h[1]),l=new o(h[2],h[3]),p=new o(h[4],h[5]),m=new o(h[6],h[7]);return new u(c,l,p,m)},s.exports=u}),80021:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(19217),f=e(87841),o=e(26099),u=new a({initialize:function(h){this.type=h,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(r,h){return h===void 0&&(h=32),r.strokePoints(this.getPoints(h))},getBounds:function(r,h){r||(r=new f),h===void 0&&(h=16);var c=this.getLength();h>c&&(h=c/2);var l=Math.max(1,Math.round(c/h));return g(this.getSpacedPoints(l),r)},getDistancePoints:function(r){var h=this.getLength(),c=Math.max(1,h/r);return this.getSpacedPoints(c)},getEndPoint:function(r){return r===void 0&&(r=new o),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var h=[],c,l=this.getPoint(0,this._tmpVec2A),p=0;h.push(0);for(var m=1;m<=r;m++)c=this.getPoint(m/r,this._tmpVec2B),p+=c.distance(l),h.push(p),l.copy(c);return this.cacheArcLengths=h,h},getPointAt:function(r,h){var c=this.getUtoTmapping(r);return this.getPoint(c,h)},getPoints:function(r,h,c){c===void 0&&(c=[]),r||(h?r=this.getLength()/h:r=this.defaultDivisions);for(var l=0;l<=r;l++)c.push(this.getPoint(l/r));return c},getRandomPoint:function(r){return r===void 0&&(r=new o),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,h,c){c===void 0&&(c=[]),r||(h?r=this.getLength()/h:r=this.defaultDivisions);for(var l=0;l<=r;l++){var p=this.getUtoTmapping(l/r,null,r);c.push(this.getPoint(p))}return c},getStartPoint:function(r){return r===void 0&&(r=new o),this.getPointAt(0,r)},getTangent:function(r,h){h===void 0&&(h=new o);var c=1e-4,l=r-c,p=r+c;return l<0&&(l=0),p>1&&(p=1),this.getPoint(l,this._tmpVec2A),this.getPoint(p,h),h.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,h){var c=this.getUtoTmapping(r);return this.getTangent(c,h)},getTFromDistance:function(r,h){return r<=0?0:this.getUtoTmapping(0,r,h)},getUtoTmapping:function(r,h,c){var l=this.getLengths(c),p=0,m=l.length,v;h?v=Math.min(h,l[m-1]):v=r*l[m-1];for(var y=0,E=m-1,C;y<=E;)if(p=Math.floor(y+(E-y)/2),C=l[p]-v,C<0)y=p+1;else if(C>0)E=p-1;else{E=p;break}if(p=E,l[p]===v)return p/(m-1);var w=l[p],A=l[p+1],M=A-w,R=(v-w)/M;return(p+R)/(m-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});s.exports=u}),73825:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(80021),f=e(39506),o=e(35154),u=e(43396),r=e(26099),h=new a({Extends:g,initialize:function(l,p,m,v,y,E,C,w){if(typeof l=="object"){var A=l;l=o(A,"x",0),p=o(A,"y",0),m=o(A,"xRadius",0),v=o(A,"yRadius",m),y=o(A,"startAngle",0),E=o(A,"endAngle",360),C=o(A,"clockwise",!1),w=o(A,"rotation",0)}else v===void 0&&(v=m),y===void 0&&(y=0),E===void 0&&(E=360),C===void 0&&(C=!1),w===void 0&&(w=0);g.call(this,"EllipseCurve"),this.p0=new r(l,p),this._xRadius=m,this._yRadius=v,this._startAngle=f(y),this._endAngle=f(E),this._clockwise=C,this._rotation=f(w)},getStartPoint:function(c){return c===void 0&&(c=new r),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,l){l===void 0&&(l=new r);for(var p=Math.PI*2,m=this._endAngle-this._startAngle,v=Math.abs(m)<Number.EPSILON;m<0;)m+=p;for(;m>p;)m-=p;m<Number.EPSILON&&(v?m=0:m=p),this._clockwise&&!v&&(m===p?m=-p:m=m-p);var y=this._startAngle+c*m,E=this.p0.x+this._xRadius*Math.cos(y),C=this.p0.y+this._yRadius*Math.sin(y);if(this._rotation!==0){var w=Math.cos(this._rotation),A=Math.sin(this._rotation),M=E-this.p0.x,R=C-this.p0.y;E=M*w-R*A+this.p0.x,C=M*A+R*w+this.p0.y}return l.set(E,C)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return u(this._startAngle)},set:function(c){this._startAngle=f(c)}},endAngle:{get:function(){return u(this._endAngle)},set:function(c){this._endAngle=f(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return u(this._rotation)},set:function(c){this._rotation=f(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:u(this._startAngle),endAngle:u(this._endAngle),clockwise:this._clockwise,rotation:u(this._rotation)}}});h.fromJSON=function(c){return new h(c)},s.exports=h}),33951:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(80021),f=e(19217),o=e(87841),u=e(26099),r=new a({Extends:g,initialize:function(c,l){g.call(this,"LineCurve"),Array.isArray(c)&&(l=new u(c[2],c[3]),c=new u(c[0],c[1])),this.p0=c,this.p1=l,this.arcLengthDivisions=1},getBounds:function(h){return h===void 0&&(h=new o),f([this.p0,this.p1],h)},getStartPoint:function(h){return h===void 0&&(h=new u),h.copy(this.p0)},getResolution:function(h){return h===void 0&&(h=1),h},getPoint:function(h,c){return c===void 0&&(c=new u),h===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(h).add(this.p0),c)},getPointAt:function(h,c){return this.getPoint(h,c)},getTangent:function(h,c){return c===void 0&&(c=new u),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(h,c,l){var p;if(c){var m=this.getLengths(l),v=m[m.length-1],y=Math.min(c,v);p=y/v}else p=h;return p},draw:function(h){return h.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),h},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(h){var c=h.points,l=new u(c[0],c[1]),p=new u(c[2],c[3]);return new r(l,p)},s.exports=r}),14744:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(80021),f=e(32112),o=e(26099),u=new a({Extends:g,initialize:function(h,c,l){g.call(this,"QuadraticBezierCurve"),Array.isArray(h)&&(l=new o(h[4],h[5]),c=new o(h[2],h[3]),h=new o(h[0],h[1])),this.p0=h,this.p1=c,this.p2=l},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,h){h===void 0&&(h=new o);var c=this.p0,l=this.p1,p=this.p2;return h.set(f(r,c.x,l.x,p.x),f(r,c.y,l.y,p.y))},draw:function(r,h){h===void 0&&(h=32);var c=this.getPoints(h);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<c.length;l++)r.lineTo(c[l].x,c[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});u.fromJSON=function(r){var h=r.points,c=new o(h[0],h[1]),l=new o(h[2],h[3]),p=new o(h[4],h[5]);return new u(c,l,p)},s.exports=u}),42534:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87842),g=e(83419),f=e(80021),o=e(26099),u=new g({Extends:f,initialize:function(h){h===void 0&&(h=[]),f.call(this,"SplineCurve"),this.points=[],this.addPoints(h)},addPoints:function(r){for(var h=0;h<r.length;h++){var c=new o;typeof r[h]=="number"?(c.x=r[h],c.y=r[h+1],h++):Array.isArray(r[h])?(c.x=r[h][0],c.y=r[h][1]):(c.x=r[h].x,c.y=r[h].y),this.points.push(c)}return this},addPoint:function(r,h){var c=new o(r,h);return this.points.push(c),c},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,h){h===void 0&&(h=new o);var c=this.points,l=(c.length-1)*r,p=Math.floor(l),m=l-p,v=c[p===0?p:p-1],y=c[p],E=c[p>c.length-2?c.length-1:p+1],C=c[p>c.length-3?c.length-1:p+2];return h.set(a(m,v.x,y.x,E.x,C.x),a(m,v.y,y.y,E.y,C.y))},toJSON:function(){for(var r=[],h=0;h<this.points.length;h++)r.push(this.points[h].x),r.push(this.points[h].y);return{type:this.type,points:r}}});u.fromJSON=function(r){return new u(r.points)},s.exports=u}),25410:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Path:e(46669),MoveTo:e(68618),CubicBezier:e(46728),Curve:e(80021),Ellipse:e(73825),Line:e(33951),QuadraticBezier:e(14744),Spline:e(42534)}}),68618:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(26099),f=new a({initialize:function(u,r){this.active=!1,this.p0=new g(u,r)},getPoint:function(o,u){return u===void 0&&(u=new g),u.copy(this.p0)},getPointAt:function(o,u){return this.getPoint(o,u)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});s.exports=f}),46669:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(46728),f=e(73825),o=e(39429),u=e(33951),r=e(68618),h=e(14744),c=e(87841),l=e(42534),p=e(26099),m=e(36383),v=new a({initialize:function(E,C){E===void 0&&(E=0),C===void 0&&(C=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new p,this._tmpVec2A=new p,this._tmpVec2B=new p,typeof E=="object"?this.fromJSON(E):this.startPoint.set(E,C)},add:function(y){return this.curves.push(y),this},circleTo:function(y,E,C){return E===void 0&&(E=!1),this.ellipseTo(y,y,0,360,E,C)},closePath:function(){var y=this.curves[0].getPoint(0),E=this.curves[this.curves.length-1].getPoint(1);return y.equals(E)||this.curves.push(new u(E,y)),this},cubicBezierTo:function(y,E,C,w,A,M){var R=this.getEndPoint(),P,b,F;return y instanceof p?(P=y,b=E,F=C):(P=new p(C,w),b=new p(A,M),F=new p(y,E)),this.add(new g(R,P,b,F))},quadraticBezierTo:function(y,E,C,w){var A=this.getEndPoint(),M,R;return y instanceof p?(M=y,R=E):(M=new p(C,w),R=new p(y,E)),this.add(new h(A,M,R))},draw:function(y,E){for(var C=0;C<this.curves.length;C++){var w=this.curves[C];w.active&&w.draw(y,E)}return y},ellipseTo:function(y,E,C,w,A,M){var R=new f(0,0,y,E,C,w,A,M),P=this.getEndPoint(this._tmpVec2A),b=R.getStartPoint(this._tmpVec2B);return P.subtract(b),R.x=P.x,R.y=P.y,this.add(R)},fromJSON:function(y){this.curves=[],this.cacheLengths=[],this.startPoint.set(y.x,y.y),this.autoClose=y.autoClose;for(var E=0;E<y.curves.length;E++){var C=y.curves[E];switch(C.type){case"LineCurve":this.add(u.fromJSON(C));break;case"EllipseCurve":this.add(f.fromJSON(C));break;case"SplineCurve":this.add(l.fromJSON(C));break;case"CubicBezierCurve":this.add(g.fromJSON(C));break;case"QuadraticBezierCurve":this.add(h.fromJSON(C));break}}return this},getBounds:function(y,E){y===void 0&&(y=new c),E===void 0&&(E=16),y.x=Number.MAX_VALUE,y.y=Number.MAX_VALUE;for(var C=new c,w=m.MIN_SAFE_INTEGER,A=m.MIN_SAFE_INTEGER,M=0;M<this.curves.length;M++){var R=this.curves[M];R.active&&(R.getBounds(C,E),y.x=Math.min(y.x,C.x),y.y=Math.min(y.y,C.y),w=Math.max(w,C.right),A=Math.max(A,C.bottom))}return y.right=w,y.bottom=A,y},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var y=[],E=0,C=0;C<this.curves.length;C++)E+=this.curves[C].getLength(),y.push(E);return this.cacheLengths=y,y},getCurveAt:function(y){for(var E=y*this.getLength(),C=this.getCurveLengths(),w=0;w<C.length;){if(C[w]>=E)return this.curves[w];w++}return null},getEndPoint:function(y){return y===void 0&&(y=new p),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,y):y.copy(this.startPoint),y},getLength:function(){var y=this.getCurveLengths();return y[y.length-1]},getPoint:function(y,E){E===void 0&&(E=new p);for(var C=y*this.getLength(),w=this.getCurveLengths(),A=0;A<w.length;){if(w[A]>=C){var M=w[A]-C,R=this.curves[A],P=R.getLength(),b=P===0?0:1-M/P;return R.getPointAt(b,E)}A++}return null},getPoints:function(y,E){!y&&!E&&(y=this.defaultDivisions);for(var C=[],w,A=0;A<this.curves.length;A++){var M=this.curves[A];if(M.active)for(var R=M.getResolution(y),P=M.getPoints(R,E),b=0;b<P.length;b++){var F=P[b];w&&w.equals(F)||(C.push(F),w=F)}}return this.autoClose&&C.length>1&&!C[C.length-1].equals(C[0])&&C.push(C[0]),C},getRandomPoint:function(y){return y===void 0&&(y=new p),this.getPoint(Math.random(),y)},getSpacedPoints:function(y){y===void 0&&(y=40);for(var E=[],C=0;C<=y;C++)E.push(this.getPoint(C/y));return this.autoClose&&E.push(E[0]),E},getStartPoint:function(y){return y===void 0&&(y=new p),y.copy(this.startPoint)},getTangent:function(y,E){E===void 0&&(E=new p);for(var C=y*this.getLength(),w=this.getCurveLengths(),A=0;A<w.length;){if(w[A]>=C){var M=w[A]-C,R=this.curves[A],P=R.getLength(),b=P===0?0:1-M/P;return R.getTangentAt(b,E)}A++}return null},lineTo:function(y,E){y instanceof p?this._tmpVec2B.copy(y):typeof y=="object"?this._tmpVec2B.setFromObject(y):this._tmpVec2B.set(y,E);var C=this.getEndPoint(this._tmpVec2A);return this.add(new u([C.x,C.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(y){return y.unshift(this.getEndPoint()),this.add(new l(y))},moveTo:function(y,E){return y instanceof p?this.add(new r(y.x,y.y)):this.add(new r(y,E))},toJSON:function(){for(var y=[],E=0;E<this.curves.length;E++)y.push(this.curves[E].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:y}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(y,E){return new v(y,E)}),s.exports=v}),45893:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(24882),f=new a({initialize:function(u,r){this.parent=u,this.events=r,r||(this.events=u.events?u.events:u),this.list={},this.values={},this._frozen=!1,!u.hasOwnProperty("sys")&&this.events&&this.events.once(g.DESTROY,this.destroy,this)},get:function(o){var u=this.list;if(Array.isArray(o)){for(var r=[],h=0;h<o.length;h++)r.push(u[o[h]]);return r}else return u[o]},getAll:function(){var o={};for(var u in this.list)this.list.hasOwnProperty(u)&&(o[u]=this.list[u]);return o},query:function(o){var u={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(o)&&(u[r]=this.list[r]);return u},set:function(o,u){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,u);for(var r in o)this.setValue(r,o[r]);return this},inc:function(o,u){if(this._frozen)return this;u===void 0&&(u=1);var r=this.get(o);return r===void 0&&(r=0),this.set(o,r+u),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,u){if(this._frozen)return this;if(this.has(o))this.values[o]=u;else{var r=this,h=this.list,c=this.events,l=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return h[o]},set:function(p){if(!r._frozen){var m=h[o];h[o]=p,c.emit(g.CHANGE_DATA,l,o,p,m),c.emit(g.CHANGE_DATA_KEY+o,l,p,m)}}}),h[o]=u,c.emit(g.SET_DATA,l,o,u)}return this},each:function(o,u){for(var r=[this.parent,null,void 0],h=1;h<arguments.length;h++)r.push(arguments[h]);for(var c in this.list)r[1]=c,r[2]=this.list[c],o.apply(u,r);return this},merge:function(o,u){u===void 0&&(u=!0);for(var r in o)o.hasOwnProperty(r)&&(u||!u&&!this.has(r))&&this.setValue(r,o[r]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var u=0;u<o.length;u++)this.removeValue(o[u]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var u=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(g.REMOVE_DATA,this.parent,o,u)}return this},pop:function(o){var u=void 0;return!this._frozen&&this.has(o)&&(u=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(g.REMOVE_DATA,this.parent,o,u)),u},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(g.CHANGE_DATA),this.events.off(g.SET_DATA),this.events.off(g.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var u in this.list)this.list[u]!==void 0&&o++;return o}}});s.exports=f}),63646:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(45893),f=e(37277),o=e(44594),u=new a({Extends:g,initialize:function(h){g.call(this,h,h.sys.events),this.scene=h,this.systems=h.sys,h.sys.events.once(o.BOOT,this.boot,this),h.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){g.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});f.register("DataManagerPlugin",u,"data"),s.exports=u}),10700:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="changedata"}),93608:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="changedata-"}),60883:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),69780:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removedata"}),22166:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="setdata"}),24882:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CHANGE_DATA:e(10700),CHANGE_DATA_KEY:e(93608),DESTROY:e(60883),REMOVE_DATA:e(69780),SET_DATA:e(22166)}}),44965:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={DataManager:e(45893),DataManagerPlugin:e(63646),Events:e(24882)}}),7098:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84148),g={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function f(){if(typeof importScripts=="function")return g;g.audioData=!!window.Audio,g.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),u=!!o.canPlayType;try{if(u){var r=function(l,p){var m=o.canPlayType("audio/"+l).replace(/^no$/,"");return p?!!(m||o.canPlayType("audio/"+p).replace(/^no$/,"")):!!m};if(g.ogg=r('ogg; codecs="vorbis"'),g.opus=r('ogg; codecs="opus"',"opus"),g.mp3=r("mpeg"),g.wav=r("wav"),g.m4a=r("x-m4a"),g.aac=r("aac"),g.flac=r("flac","x-flac"),g.webm=r('webm; codecs="vorbis"'),o.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(a.edge)g.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var h=parseInt(RegExp.$1,10),c=parseInt(RegExp.$2,10);(h===10&&c>=11||h>10)&&(g.dolby=!0)}}}}catch{}return g}s.exports=f()}),84148:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),g={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function f(){var o=navigator.userAgent;return/Edg\/\d+/.test(o)?(g.edge=!0,g.es2019=!0):/OPR/.test(o)?(g.opera=!0,g.es2019=!0):/Chrome\/(\d+)/.test(o)&&!a.windowsPhone?(g.chrome=!0,g.chromeVersion=parseInt(RegExp.$1,10),g.es2019=g.chromeVersion>69):/Firefox\D+(\d+)/.test(o)?(g.firefox=!0,g.firefoxVersion=parseInt(RegExp.$1,10),g.es2019=g.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(o)&&a.iOS?(g.mobileSafari=!0,g.es2019=!0):/MSIE (\d+\.\d+);/.test(o)?(g.ie=!0,g.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(o)&&!a.windowsPhone?(g.safari=!0,g.safariVersion=parseInt(RegExp.$1,10),g.es2019=g.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(g.ie=!0,g.trident=!0,g.tridentVersion=parseInt(RegExp.$1,10),g.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(g.silk=!0),g}s.exports=f()}),89289:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),g={supportInverseAlpha:!1,supportNewBlendModes:!1};function f(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",h="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var l=new Image;l.onload=function(){var p=a.create2D(l,6),m=p.getContext("2d",{willReadFrequently:!0});if(m.globalCompositeOperation="multiply",m.drawImage(c,0,0),m.drawImage(l,2,0),!m.getImageData(2,0,1,1))return!1;var v=m.getImageData(2,0,1,1).data;a.remove(l),g.supportNewBlendModes=v[0]===255&&v[1]===0&&v[2]===0},l.src=r+"/wCKxvRF"+h},c.src=r+"AP804Oa6"+h,!1}function o(){var r=a.create2D(this,2),h=r.getContext("2d",{willReadFrequently:!0});h.fillStyle="rgba(10, 20, 30, 0.5)",h.fillRect(0,0,1,1);var c=h.getImageData(0,0,1,1);if(c===null)return!1;h.putImageData(c,1,0);var l=h.getImageData(1,0,1,1),p=l.data[0]===c.data[0]&&l.data[1]===c.data[1]&&l.data[2]===c.data[2]&&l.data[3]===c.data[3];return a.remove(this),p}function u(){return typeof importScripts!="function"&&document!==void 0&&(g.supportNewBlendModes=f(),g.supportInverseAlpha=o()),g}s.exports=u()}),89357:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),g=e(84148),f=e(27919),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function u(){var h=new ArrayBuffer(4),c=new Uint8Array(h),l=new Uint32Array(h);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,l[0]===3569595041?!0:l[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch{o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var h=!1,c=function(){if(window.WebGLRenderingContext)try{var l=f.createWebGL(this),p=l.getContext("webgl")||l.getContext("experimental-webgl"),m=f.create2D(this),v=m.getContext("2d",{willReadFrequently:!0}),y=v.createImageData(1,1);return h=y.data instanceof Uint8ClampedArray,f.remove(l),f.remove(m),!!p}catch{return!1}return!1};return o.webGL=c(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,g.firefox&&g.firefoxVersion<21&&(o.getUserMedia=!1),!a.iOS&&(g.ie||g.firefox||g.chrome)&&(o.canvasBitBltShift=!0),(g.safari||g.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(o.littleEndian=u()),o.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&o.littleEndian!==null&&h,o}s.exports=r()}),91639:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return T;var a,g="Fullscreen",f="FullScreen",o=["request"+g,"request"+f,"webkitRequest"+g,"webkitRequest"+f,"msRequest"+g,"msRequest"+f,"mozRequest"+f,"mozRequest"+g];for(a=0;a<o.length;a++)if(document.documentElement[o[a]]){T.available=!0,T.request=o[a];break}var u=["cancel"+f,"exit"+g,"webkitCancel"+f,"webkitExit"+g,"msCancel"+f,"msExit"+g,"mozCancel"+f,"mozExit"+g];if(T.available){for(a=0;a<u.length;a++)if(document[u[a]]){T.cancel=u[a];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(T.keyboard=!0),Object.defineProperty(T,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),T}s.exports=e()}),31784:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84148),g={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function f(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(g.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(g.mspointer=!0),navigator.getGamepads&&(g.gamepads=!0),"onwheel"in window||a.ie&&"WheelEvent"in window?g.wheelEvent="wheel":"onmousewheel"in window?g.wheelEvent="mousewheel":a.firefox&&"MouseScrollEvent"in window&&(g.wheelEvent="DOMMouseScroll")),g}s.exports=f()}),25892:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return T;var a=navigator.userAgent;/Windows/.test(a)?T.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(T.iOS=!0,T.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),T.iOSVersion=parseInt(RegExp.$1,10)):T.macOS=!0:/Android/.test(a)?T.android=!0:/Linux/.test(a)?T.linux=!0:/iP[ao]d|iPhone/i.test(a)?(T.iOS=!0,navigator.appVersion.match(/OS (\d+)/),T.iOSVersion=parseInt(RegExp.$1,10),T.iPhone=a.toLowerCase().indexOf("iphone")!==-1,T.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?T.kindle=!0:/CrOS/.test(a)&&(T.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(T.android=!1,T.iOS=!1,T.macOS=!1,T.windows=!0,T.windowsPhone=!0);var g=/Silk/.test(a);return(T.windows||T.macOS||T.linux&&!g||T.chromeOS)&&(T.desktop=!0),(T.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(T.desktop=!1),navigator.standalone&&(T.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(T.cordova=!0),window.ejecta!==void 0&&(T.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(T.node=!0),T.node&&typeof process.versions=="object"&&(T.nodeWebkit=!!process.versions["node-webkit"],T.electron=!!process.versions.electron),/Crosswalk/.test(a)&&(T.crosswalk=!0),T.pixelRatio=window.devicePixelRatio||1,T}s.exports=e()}),43267:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),g={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function f(){if(typeof importScripts=="function")return g;var o=document.createElement("video"),u=!!o.canPlayType,r=/^no$/;try{u&&(o.canPlayType('video/ogg; codecs="theora"').replace(r,"")&&(g.ogg=!0),o.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(r,"")&&(g.h264=!0,g.mp4=!0),o.canPlayType("video/x-m4v").replace(r,"")&&(g.m4v=!0),o.canPlayType('video/webm; codecs="vp8, vorbis"').replace(r,"")&&(g.webm=!0),o.canPlayType('video/webm; codecs="vp9"').replace(r,"")&&(g.vp9=!0),o.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(r,"")&&(g.hls=!0))}catch{}return o.parentNode&&o.parentNode.removeChild(o),g.getVideoURL=function(h){Array.isArray(h)||(h=[h]);for(var c=0;c<h.length;c++){var l=a(h[c],"url",h[c]);if(l.indexOf("blob:")===0)return{url:l,type:""};var p;if(l.indexOf("data:")===0?p=l.split(",")[0].match(/\/(.*?);/):p=l.match(/\.([a-zA-Z0-9]+)($|\?)/),p=a(h[c],"type",p?p[1]:"").toLowerCase(),g[p])return{url:l,type:p}}return null},g}s.exports=f()}),82264:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={os:e(25892),browser:e(84148),features:e(89357),input:e(31784),audio:e(7098),video:e(43267),fullscreen:e(91639),canvasFeatures:e(89289)}}),89422:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new Float32Array(20),f=new a({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(o){return this._matrix.set(o),this._dirty=!0,this},reset:function(){var o=this._matrix;return o.fill(0),o[0]=1,o[6]=1,o[12]=1,o[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var o=this._data;return this._dirty&&(o.set(this._matrix),o[4]/=255,o[9]/=255,o[14]/=255,o[19]/=255,this._dirty=!1),o},brightness:function(o,u){o===void 0&&(o=0),u===void 0&&(u=!1);var r=o;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],u)},saturate:function(o,u){o===void 0&&(o=0),u===void 0&&(u=!1);var r=o*2/3+1,h=(r-1)*-.5;return this.multiply([r,h,h,0,0,h,r,h,0,0,h,h,r,0,0,0,0,0,1,0],u)},desaturate:function(o){return o===void 0&&(o=!1),this.saturate(-1,o)},hue:function(o,u){o===void 0&&(o=0),u===void 0&&(u=!1),o=o/180*Math.PI;var r=Math.cos(o),h=Math.sin(o),c=.213,l=.715,p=.072;return this.multiply([c+r*(1-c)+h*-c,l+r*-l+h*-l,p+r*-p+h*(1-p),0,0,c+r*-c+h*.143,l+r*(1-l)+h*.14,p+r*-p+h*-.283,0,0,c+r*-c+h*-.787,l+r*-l+h*l,p+r*(1-p)+h*p,0,0,0,0,0,1,0],u)},grayscale:function(o,u){return o===void 0&&(o=1),u===void 0&&(u=!1),this.saturate(-o,u)},blackWhite:function(o){return o===void 0&&(o=!1),this.multiply(f.BLACK_WHITE,o)},contrast:function(o,u){o===void 0&&(o=0),u===void 0&&(u=!1);var r=o+1,h=-.5*(r-1);return this.multiply([r,0,0,0,h,0,r,0,0,h,0,0,r,0,h,0,0,0,1,0],u)},negative:function(o){return o===void 0&&(o=!1),this.multiply(f.NEGATIVE,o)},desaturateLuminance:function(o){return o===void 0&&(o=!1),this.multiply(f.DESATURATE_LUMINANCE,o)},sepia:function(o){return o===void 0&&(o=!1),this.multiply(f.SEPIA,o)},night:function(o,u){return o===void 0&&(o=.1),u===void 0&&(u=!1),this.multiply([o*-2,-o,0,0,0,-o,0,o,0,0,0,o,o*2,0,0,0,0,0,1,0],u)},lsd:function(o){return o===void 0&&(o=!1),this.multiply(f.LSD,o)},brown:function(o){return o===void 0&&(o=!1),this.multiply(f.BROWN,o)},vintagePinhole:function(o){return o===void 0&&(o=!1),this.multiply(f.VINTAGE,o)},kodachrome:function(o){return o===void 0&&(o=!1),this.multiply(f.KODACHROME,o)},technicolor:function(o){return o===void 0&&(o=!1),this.multiply(f.TECHNICOLOR,o)},polaroid:function(o){return o===void 0&&(o=!1),this.multiply(f.POLAROID,o)},shiftToBGR:function(o){return o===void 0&&(o=!1),this.multiply(f.SHIFT_BGR,o)},multiply:function(o,u){u===void 0&&(u=!1),u||this.reset();var r=this._matrix,h=g;return h.set(r),r.set([h[0]*o[0]+h[1]*o[5]+h[2]*o[10]+h[3]*o[15],h[0]*o[1]+h[1]*o[6]+h[2]*o[11]+h[3]*o[16],h[0]*o[2]+h[1]*o[7]+h[2]*o[12]+h[3]*o[17],h[0]*o[3]+h[1]*o[8]+h[2]*o[13]+h[3]*o[18],h[0]*o[4]+h[1]*o[9]+h[2]*o[14]+h[3]*o[19]+h[4],h[5]*o[0]+h[6]*o[5]+h[7]*o[10]+h[8]*o[15],h[5]*o[1]+h[6]*o[6]+h[7]*o[11]+h[8]*o[16],h[5]*o[2]+h[6]*o[7]+h[7]*o[12]+h[8]*o[17],h[5]*o[3]+h[6]*o[8]+h[7]*o[13]+h[8]*o[18],h[5]*o[4]+h[6]*o[9]+h[7]*o[14]+h[8]*o[19]+h[9],h[10]*o[0]+h[11]*o[5]+h[12]*o[10]+h[13]*o[15],h[10]*o[1]+h[11]*o[6]+h[12]*o[11]+h[13]*o[16],h[10]*o[2]+h[11]*o[7]+h[12]*o[12]+h[13]*o[17],h[10]*o[3]+h[11]*o[8]+h[12]*o[13]+h[13]*o[18],h[10]*o[4]+h[11]*o[9]+h[12]*o[14]+h[13]*o[19]+h[14],h[15]*o[0]+h[16]*o[5]+h[17]*o[10]+h[18]*o[15],h[15]*o[1]+h[16]*o[6]+h[17]*o[11]+h[18]*o[16],h[15]*o[2]+h[16]*o[7]+h[17]*o[12]+h[18]*o[17],h[15]*o[3]+h[16]*o[8]+h[17]*o[13]+h[18]*o[18],h[15]*o[4]+h[16]*o[9]+h[17]*o[14]+h[18]*o[19]+h[19]]),this._dirty=!0,this}});f.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],f.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],f.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],f.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],f.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],f.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],f.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],f.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],f.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],f.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],f.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],s.exports=f}),51767:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(29747),f=new a({initialize:function(u,r,h){this._rgb=[0,0,0],this.onChangeCallback=g,this.dirty=!1,this.set(u,r,h)},set:function(o,u,r){return o===void 0&&(o=0),u===void 0&&(u=0),r===void 0&&(r=0),this._rgb=[o,u,r],this.onChange(),this},equals:function(o,u,r){var h=this._rgb;return h[0]===o&&h[1]===u&&h[2]===r},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});s.exports=f}),60461:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};s.exports=T}),54312:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),g=e(35893),f=e(86327),o=e(88417),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,g(h)+c),f(r,a(h)+l),r};s.exports=u}),46768:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),g=e(26541),f=e(86327),o=e(385),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,g(h)-c),f(r,a(h)+l),r};s.exports=u}),35827:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),g=e(54380),f=e(86327),o=e(40136),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,g(h)+c),f(r,a(h)+l),r};s.exports=u}),46871:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66786),g=e(35893),f=e(7702),o=function(u,r,h,c){return h===void 0&&(h=0),c===void 0&&(c=0),a(u,g(r)+h,f(r)+c),u};s.exports=o}),5198:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),g=e(26541),f=e(20786),o=e(385),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,g(h)-c),f(r,a(h)+l),r};s.exports=u}),11879:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),g=[];g[a.BOTTOM_CENTER]=e(54312),g[a.BOTTOM_LEFT]=e(46768),g[a.BOTTOM_RIGHT]=e(35827),g[a.CENTER]=e(46871),g[a.LEFT_CENTER]=e(5198),g[a.RIGHT_CENTER]=e(80503),g[a.TOP_CENTER]=e(89698),g[a.TOP_LEFT]=e(922),g[a.TOP_RIGHT]=e(21373),g[a.LEFT_BOTTOM]=g[a.BOTTOM_LEFT],g[a.LEFT_TOP]=g[a.TOP_LEFT],g[a.RIGHT_BOTTOM]=g[a.BOTTOM_RIGHT],g[a.RIGHT_TOP]=g[a.TOP_RIGHT];var f=function(o,u,r,h,c){return g[r](o,u,h,c)};s.exports=f}),80503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),g=e(54380),f=e(20786),o=e(40136),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,g(h)+c),f(r,a(h)+l),r};s.exports=u}),89698:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35893),g=e(17717),f=e(88417),o=e(66737),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(r,a(h)+c),o(r,g(h)-l),r};s.exports=u}),922:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),g=e(17717),f=e(385),o=e(66737),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(r,a(h)-c),o(r,g(h)-l),r};s.exports=u}),21373:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),g=e(17717),f=e(40136),o=e(66737),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(r,a(h)+c),o(r,g(h)-l),r};s.exports=u}),91660:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BottomCenter:e(54312),BottomLeft:e(46768),BottomRight:e(35827),Center:e(46871),LeftCenter:e(5198),QuickSet:e(11879),RightCenter:e(80503),TopCenter:e(89698),TopLeft:e(922),TopRight:e(21373)}}),71926:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),g=e(79291),f={In:e(91660),To:e(16694)};f=g(!1,f,a),s.exports=f}),21578:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),g=e(35893),f=e(88417),o=e(66737),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(r,g(h)+c),o(r,a(h)+l),r};s.exports=u}),10210:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),g=e(26541),f=e(385),o=e(66737),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(r,g(h)-c),o(r,a(h)+l),r};s.exports=u}),82341:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),g=e(54380),f=e(40136),o=e(66737),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(r,g(h)+c),o(r,a(h)+l),r};s.exports=u}),87958:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),g=e(26541),f=e(86327),o=e(40136),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,g(h)-c),f(r,a(h)+l),r};s.exports=u}),40080:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),g=e(26541),f=e(20786),o=e(40136),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,g(h)-c),f(r,a(h)+l),r};s.exports=u}),88466:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),g=e(17717),f=e(40136),o=e(66737),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(r,a(h)-c),o(r,g(h)-l),r};s.exports=u}),38829:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),g=[];g[a.BOTTOM_CENTER]=e(21578),g[a.BOTTOM_LEFT]=e(10210),g[a.BOTTOM_RIGHT]=e(82341),g[a.LEFT_BOTTOM]=e(87958),g[a.LEFT_CENTER]=e(40080),g[a.LEFT_TOP]=e(88466),g[a.RIGHT_BOTTOM]=e(19211),g[a.RIGHT_CENTER]=e(34609),g[a.RIGHT_TOP]=e(48741),g[a.TOP_CENTER]=e(49440),g[a.TOP_LEFT]=e(81288),g[a.TOP_RIGHT]=e(61323);var f=function(o,u,r,h,c){return g[r](o,u,h,c)};s.exports=f}),19211:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),g=e(54380),f=e(86327),o=e(385),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,g(h)+c),f(r,a(h)+l),r};s.exports=u}),34609:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),g=e(54380),f=e(20786),o=e(385),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,g(h)+c),f(r,a(h)+l),r};s.exports=u}),48741:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),g=e(17717),f=e(385),o=e(66737),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),f(r,a(h)+c),o(r,g(h)-l),r};s.exports=u}),49440:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35893),g=e(17717),f=e(86327),o=e(88417),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,a(h)+c),f(r,g(h)-l),r};s.exports=u}),81288:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),g=e(17717),f=e(86327),o=e(385),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,a(h)-c),f(r,g(h)-l),r};s.exports=u}),61323:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),g=e(17717),f=e(86327),o=e(40136),u=function(r,h,c,l){return c===void 0&&(c=0),l===void 0&&(l=0),o(r,a(h)+c),f(r,g(h)-l),r};s.exports=u}),16694:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BottomCenter:e(21578),BottomLeft:e(10210),BottomRight:e(82341),LeftBottom:e(87958),LeftCenter:e(40080),LeftTop:e(88466),QuickSet:e(38829),RightBottom:e(19211),RightCenter:e(34609),RightTop:e(48741),TopCenter:e(49440),TopLeft:e(81288),TopRight:e(61323)}}),66786:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88417),g=e(20786),f=function(o,u,r){return a(o,u),g(o,r)};s.exports=f}),62235:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y+e.height-e.height*e.originY};s.exports=T}),72873:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),g=e(26541),f=e(54380),o=e(17717),u=e(87841),r=function(h,c){c===void 0&&(c=new u);var l=g(h),p=o(h);return c.x=l,c.y=p,c.width=f(h)-l,c.height=a(h)-p,c};s.exports=r}),35893:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX+e.width*.5};s.exports=T}),7702:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY+e.height*.5};s.exports=T}),26541:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX};s.exports=T}),87431:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.originX};s.exports=T}),46928:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height*e.originY};s.exports=T}),54380:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x+e.width-e.width*e.originX};s.exports=T}),17717:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY};s.exports=T}),86327:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.y=a-e.height+e.height*e.originY,e};s.exports=T}),88417:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.width*e.originX;return e.x=a+g-e.width*.5,e};s.exports=T}),20786:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.height*e.originY;return e.y=a+g-e.height*.5,e};s.exports=T}),385:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x=a+e.width*e.originX,e};s.exports=T}),40136:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x=a-e.width+e.width*e.originX,e};s.exports=T}),66737:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.y=a+e.height*e.originY,e};s.exports=T}),58724:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CenterOn:e(66786),GetBottom:e(62235),GetBounds:e(72873),GetCenterX:e(35893),GetCenterY:e(7702),GetLeft:e(26541),GetOffsetX:e(87431),GetOffsetY:e(46928),GetRight:e(54380),GetTop:e(17717),SetBottom:e(86327),SetCenterX:e(88417),SetCenterY:e(20786),SetLeft:e(385),SetRight:e(40136),SetTop:e(66737)}}),20623:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCrisp:function(e){var a=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return a.forEach(function(g){e.style["image-rendering"]=g}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};s.exports=T}),27919:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8054),g=e(68703),f=[],o=!1,u=function(){var r=function(C,w,A,M,R){w===void 0&&(w=1),A===void 0&&(A=1),M===void 0&&(M=a.CANVAS),R===void 0&&(R=!1);var P,b=l(M);return b===null?(b={parent:C,canvas:document.createElement("canvas"),type:M},M===a.CANVAS&&f.push(b),P=b.canvas):(b.parent=C,P=b.canvas),R&&(b.parent=P),P.width=w,P.height=A,o&&M===a.CANVAS&&g.disable(P.getContext("2d",{willReadFrequently:!1})),P},h=function(C,w,A){return r(C,w,A,a.CANVAS)},c=function(C,w,A){return r(C,w,A,a.WEBGL)},l=function(C){if(C===void 0&&(C=a.CANVAS),C===a.WEBGL)return null;for(var w=0;w<f.length;w++){var A=f[w];if(!A.parent&&A.type===C)return A}return null},p=function(C){var w=C instanceof HTMLCanvasElement;f.forEach(function(A){(w&&A.canvas===C||!w&&A.parent===C)&&(A.parent=null,A.canvas.width=1,A.canvas.height=1)})},m=function(){var C=0;return f.forEach(function(w){w.parent&&C++}),C},v=function(){return f.length-m()},y=function(){o=!0},E=function(){o=!1};return{create2D:h,create:r,createWebGL:c,disableSmoothing:y,enableSmoothing:E,first:l,free:v,pool:f,remove:p,total:m}};s.exports=u()}),68703:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="",e=function(){var a=function(u){for(var r=["i","webkitI","msI","mozI","oI"],h=0;h<r.length;h++){var c=r[h]+"mageSmoothingEnabled";if(c in u)return c}return null},g=function(u){return T===""&&(T=a(u)),T&&(u[T]=!0),u},f=function(u){return T===""&&(T=a(u)),T&&(u[T]=!1),u},o=function(u){return T!==null?u[T]:null};return{disable:f,enable:g,getPrefix:a,isEnabled:o}};s.exports=e()}),65208:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a="none"),e.style.msTouchAction=a,e.style["ms-touch-action"]=a,e.style["touch-action"]=a,e};s.exports=T}),91610:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a="none");var g=["-webkit-","-khtml-","-moz-","-ms-",""];return g.forEach(function(f){e.style[f+"user-select"]=a}),e.style["-webkit-touch-callout"]=a,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};s.exports=T}),26253:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CanvasInterpolation:e(20623),CanvasPool:e(27919),Smoothing:e(68703),TouchAction:e(65208),UserSelect:e(91610)}}),40987:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(37589),f=e(1e3),o=e(7537),u=e(87837),r=new a({initialize:function(c,l,p,m){c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,l,p,m)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(h,c,l,p,m){return p===void 0&&(p=255),m===void 0&&(m=!0),this._locked=!0,this.red=h,this.green=c,this.blue=l,this.alpha=p,this._locked=!1,this.update(m)},setGLTo:function(h,c,l,p){return p===void 0&&(p=1),this._locked=!0,this.redGL=h,this.greenGL=c,this.blueGL=l,this.alphaGL=p,this._locked=!1,this.update(!0)},setFromRGB:function(h){return this._locked=!0,this.red=h.r,this.green=h.g,this.blue=h.b,h.hasOwnProperty("a")&&(this.alpha=h.a),this._locked=!1,this.update(!0)},setFromHSV:function(h,c,l){return o(h,c,l,this)},update:function(h){if(h===void 0&&(h=!1),this._locked)return this;var c=this.r,l=this.g,p=this.b,m=this.a;return this._color=g(c,l,p),this._color32=f(c,l,p,m),this._rgba="rgba("+c+","+l+","+p+","+m/255+")",h&&u(c,l,p,this),this},updateHSV:function(){var h=this.r,c=this.g,l=this.b;return u(h,c,l,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(h){return this.setTo(h,h,h)},random:function(h,c){h===void 0&&(h=0),c===void 0&&(c=255);var l=Math.floor(h+Math.random()*(c-h)),p=Math.floor(h+Math.random()*(c-h)),m=Math.floor(h+Math.random()*(c-h));return this.setTo(l,p,m)},randomGray:function(h,c){h===void 0&&(h=0),c===void 0&&(c=255);var l=Math.floor(h+Math.random()*(c-h));return this.setTo(l,l,l)},saturate:function(h){return this.s+=h/100,this},desaturate:function(h){return this.s-=h/100,this},lighten:function(h){return this.v+=h/100,this},darken:function(h){return this.v-=h/100,this},brighten:function(h){var c=this.r,l=this.g,p=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(h/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(h/100)))),p=Math.max(0,Math.min(255,p-Math.round(255*-(h/100)))),this.setTo(c,l,p)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(h){this.gl[0]=Math.min(Math.abs(h),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(h){this.gl[1]=Math.min(Math.abs(h),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(h){this.gl[2]=Math.min(Math.abs(h),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(h){this.gl[3]=Math.min(Math.abs(h),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(h){h=Math.floor(Math.abs(h)),this.r=Math.min(h,255),this.gl[0]=h/255,this.update(!0)}},green:{get:function(){return this.g},set:function(h){h=Math.floor(Math.abs(h)),this.g=Math.min(h,255),this.gl[1]=h/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(h){h=Math.floor(Math.abs(h)),this.b=Math.min(h,255),this.gl[2]=h/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(h){h=Math.floor(Math.abs(h)),this.a=Math.min(h,255),this.gl[3]=h/255,this.update()}},h:{get:function(){return this._h},set:function(h){this._h=h,o(h,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(h){this._s=h,o(this._h,h,this._v,this)}},v:{get:function(){return this._v},set:function(h){this._v=h,o(this._h,this._s,h,this)}}});s.exports=r}),92728:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589),g=function(f){f===void 0&&(f=1024);var o=[],u=255,r,h=255,c=0,l=0;for(r=0;r<=u;r++)o.push({r:h,g:r,b:l,color:a(h,r,l)});for(c=255,r=u;r>=0;r--)o.push({r,g:c,b:l,color:a(r,c,l)});for(h=0,r=0;r<=u;r++,c--)o.push({r:h,g:c,b:r,color:a(h,c,r)});for(c=0,l=255,r=0;r<=u;r++,l--,h++)o.push({r:h,g:c,b:l,color:a(h,c,l)});if(f===1024)return o;var p=[],m=0,v=1024/f;for(r=0;r<f;r++)p.push(o[Math.floor(m)]),m+=v;return p};s.exports=g}),91588:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(a.a=e>>>24),a};s.exports=T}),62957:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=e.toString(16);return a.length===1?"0"+a:a};s.exports=T}),37589:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e<<16|a<<8|g};s.exports=T}),1e3:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){return f<<24|e<<16|a<<8|g};s.exports=T}),62183:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),g=e(89528),f=function(o,u,r){var h=r,c=r,l=r;if(u!==0){var p=r<.5?r*(1+u):r+u-r*u,m=2*r-p;h=g(m,p,o+1/3),c=g(m,p,o),l=g(m,p,o-1/3)}var v=new a;return v.setGLTo(h,c,l,1)};s.exports=f}),27939:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7537),g=function(f,o){f===void 0&&(f=1),o===void 0&&(o=1);for(var u=[],r=0;r<=359;r++)u.push(a(r/359,f,o));return u};s.exports=g}),7537:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589);function g(o,u,r,h){var c=(o+u*6)%6,l=Math.min(c,4-c,1);return Math.round(255*(h-h*r*Math.max(0,l)))}var f=function(o,u,r,h){u===void 0&&(u=1),r===void 0&&(r=1);var c=g(5,o,u,r),l=g(3,o,u,r),p=g(1,o,u,r);return h?h.setTo?h.setTo(c,l,p,h.alpha,!0):(h.r=c,h.g=l,h.b=p,h.color=a(c,l,p),h):{r:c,g:l,b:p,color:a(c,l,p)}};s.exports=f}),70238:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),g=function(f){var o=new a;f=f.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(l,p,m,v){return p+p+m+m+v+v});var u=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);if(u){var r=parseInt(u[1],16),h=parseInt(u[2],16),c=parseInt(u[3],16);o.setTo(r,h,c)}return o};s.exports=g}),89528:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?e+(a-e)*6*g:g<.5?a:g<.6666666666666666?e+(a-e)*(.6666666666666666-g)*6:e};s.exports=T}),30100:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),g=e(90664),f=function(o){var u=g(o);return new a(u.r,u.g,u.b,u.a)};s.exports=f}),90664:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};s.exports=T}),13699:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28915),g=e(37589),f=function(r,h,c,l,p,m,v,y){v===void 0&&(v=100),y===void 0&&(y=0);var E=y/v,C=a(r,l,E),w=a(h,p,E),A=a(c,m,E);return{r:C,g:w,b:A,a:255,color:g(C,w,A)}},o=function(r,h,c,l){return c===void 0&&(c=100),l===void 0&&(l=0),f(r.r,r.g,r.b,h.r,h.g,h.b,c,l)},u=function(r,h,c,l,p,m){return p===void 0&&(p=100),m===void 0&&(m=0),f(r.r,r.g,r.b,h,c,l,p,m)};s.exports={RGBWithRGB:f,ColorWithRGB:u,ColorWithColor:o}}),68957:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),g=function(f){return new a(f.r,f.g,f.b,f.a)};s.exports=g}),87388:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),g=function(f){var o=new a,u=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(f.toLowerCase());if(u){var r=parseInt(u[1],10),h=parseInt(u[2],10),c=parseInt(u[3],10),l=u[4]!==void 0?parseFloat(u[4]):1;o.setTo(r,h,c,l*255)}return o};s.exports=g}),87837:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){f===void 0&&(f={h:0,s:0,v:0}),e/=255,a/=255,g/=255;var o=Math.min(e,a,g),u=Math.max(e,a,g),r=u-o,h=0,c=u===0?0:r/u,l=u;return u!==o&&(u===e?h=(a-g)/r+(a<g?6:0):u===a?h=(g-e)/r+2:u===g&&(h=(e-a)/r+4),h/=6),f.hasOwnProperty("_h")?(f._h=h,f._s=c,f._v=l):(f.h=h,f.s=c,f.v=l),f};s.exports=T}),75723:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62957),g=function(f,o,u,r,h){return r===void 0&&(r=255),h===void 0&&(h="#"),h==="#"?"#"+((1<<24)+(f<<16)+(o<<8)+u).toString(16).slice(1,7):"0x"+a(r)+a(f)+a(o)+a(u)};s.exports=g}),85386:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),g=e(40987),f=function(o,u){return o===void 0&&(o=0),u===void 0&&(u=255),new g(a(o,u),a(o,u),a(o,u))};s.exports=f}),80333:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70238),g=e(30100),f=e(68957),o=e(87388),u=function(r){var h=typeof r;switch(h){case"string":return r.substr(0,3).toLowerCase()==="rgb"?o(r):a(r);case"number":return g(r);case"object":return f(r)}};s.exports=u}),3956:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987);a.ColorSpectrum=e(92728),a.ColorToRGBA=e(91588),a.ComponentToHex=e(62957),a.GetColor=e(37589),a.GetColor32=e(1e3),a.HexStringToColor=e(70238),a.HSLToColor=e(62183),a.HSVColorWheel=e(27939),a.HSVToRGB=e(7537),a.HueToComponent=e(89528),a.IntegerToColor=e(30100),a.IntegerToRGB=e(90664),a.Interpolate=e(13699),a.ObjectToColor=e(68957),a.RandomRGB=e(85386),a.RGBStringToColor=e(87388),a.RGBToHSV=e(87837),a.RGBToString=e(75723),a.ValueToColor=e(80333),s.exports=a}),27460:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Align:e(71926),BaseShader:e(73894),Bounds:e(58724),Canvas:e(26253),Color:e(3956),ColorMatrix:e(89422),Masks:e(69781),RGB:e(51767)}}),6858:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(39429),f=new a({initialize:function(u,r,h,c,l,p){r||(r=u.sys.make.image({x:h,y:c,key:l,frame:p,add:!1})),this.bitmapMask=r,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(o){this.bitmapMask=o},preRenderWebGL:function(o,u,r){o.pipelines.BITMAPMASK_PIPELINE.beginMask(this,u,r)},postRenderWebGL:function(o,u,r){o.pipelines.BITMAPMASK_PIPELINE.endMask(this,u,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});g.register("bitmapMask",function(o,u,r,h,c){return new f(this.scene,o,u,r,h,c)}),s.exports=f}),80661:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u){this.geometryMask=u,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(f){return this.geometryMask=f,this},setInvertAlpha:function(f){return f===void 0&&(f=!0),this.invertAlpha=f,this},preRenderWebGL:function(f,o,u){var r=f.gl;f.flush(),f.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),f.maskCount=0),f.currentCameraMask.mask!==this&&(f.currentMask.mask=this),f.maskStack.push({mask:this,camera:u}),this.applyStencil(f,u,!0),f.maskCount++},applyStencil:function(f,o,u){var r=f.gl,h=this.geometryMask,c=f.maskCount,l=255;r.colorMask(!1,!1,!1,!1),u?(r.stencilFunc(r.EQUAL,c,l),r.stencilOp(r.KEEP,r.KEEP,r.INCR),c++):(r.stencilFunc(r.EQUAL,c+1,l),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),this.level=c,h.renderWebGL(f,h,o),f.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.invertAlpha?r.stencilFunc(r.NOTEQUAL,c,l):r.stencilFunc(r.EQUAL,c,l)},postRenderWebGL:function(f){var o=f.gl;f.maskStack.pop(),f.maskCount--,f.flush();var u=f.currentMask;if(f.maskStack.length===0)u.mask=null,o.disable(o.STENCIL_TEST);else{var r=f.maskStack[f.maskStack.length-1];r.mask.applyStencil(f,r.camera,!1),f.currentCameraMask.mask!==r.mask?(u.mask=r.mask,u.camera=r.camera):u.mask=null}},preRenderCanvas:function(f,o,u){var r=this.geometryMask;f.currentContext.save(),r.renderCanvas(f,r,u,null,null,!0),f.currentContext.clip()},postRenderCanvas:function(f){f.currentContext.restore()},destroy:function(){this.geometryMask=null}});s.exports=g}),69781:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BitmapMask:e(6858),GeometryMask:e(80661)}}),73894:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r,h){(!u||u==="")&&(u=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),h===void 0&&(h=null),this.key=o,this.fragmentSrc=u,this.vertexSrc=r,this.uniforms=h}});s.exports=g}),40366:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g;if(a)typeof a=="string"?g=document.getElementById(a):typeof a=="object"&&a.nodeType===1&&(g=a);else if(e.parentElement||a===null)return e;return g||(g=document.body),g.appendChild(e),e};s.exports=T}),83719:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),g=function(f){var o=f.config;if(!(!o.parent||!o.domCreateContainer)){var u=document.createElement("div");u.style.cssText=["display: block;","width: "+f.scale.width+"px;","height: "+f.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),f.domContainer=u,a(u,o.parent)}};s.exports=g}),57264:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),g=function(f){if(document.readyState==="complete"||document.readyState==="interactive"){f();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),f()};document.body?a.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};s.exports=g}),57811:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e)return window.innerHeight;var a=Math.abs(window.orientation),g={w:0,h:0},f=document.createElement("div");return f.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(f),g.w=a===90?f.offsetHeight:window.innerWidth,g.h=a===90?window.innerWidth:f.offsetHeight,document.documentElement.removeChild(f),f=null,Math.abs(window.orientation)!==90?g.h:g.w};s.exports=T}),45818:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13560),g=function(f,o){var u=window.screen,r=u?u.orientation||u.mozOrientation||u.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return a.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return a.ORIENTATION.LANDSCAPE}else return o>f?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE};s.exports=g}),74403:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a;return e!==""&&(typeof e=="string"?a=document.getElementById(e):e&&e.nodeType===1&&(a=e)),a||(a=document.body),a};s.exports=T}),56836:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a="";try{if(window.DOMParser){var g=new DOMParser;a=g.parseFromString(e,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.loadXML(e)}catch{a=null}return!a||!a.documentElement||a.getElementsByTagName("parsererror").length?null:a};s.exports=T}),35846:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){e.parentNode&&e.parentNode.removeChild(e)};s.exports=T}),43092:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(29747),f=new a({initialize:function(){this.isRunning=!1,this.callback=g,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var u=this;this.step=function r(h){u.callback(h),u.isRunning&&(u.timeOutID=window.requestAnimationFrame(r))},this.stepTimeout=function r(){u.isRunning&&(u.timeOutID=window.setTimeout(r,u.delay)),u.callback(window.performance.now())}},start:function(o,u,r){this.isRunning||(this.callback=o,this.isSetTimeOut=u,this.delay=r,this.isRunning=!0,this.timeOutID=u?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=g}});s.exports=f}),84902:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={AddToDOM:e(40366),DOMContentLoaded:e(57264),GetInnerHeight:e(57811),GetScreenOrientation:e(45818),GetTarget:e(74403),ParseXML:e(56836),RemoveFromDOM:e(35846),RequestAnimationFrame:e(43092)};s.exports=a}),47565:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50792),f=e(37277),o=new a({Extends:g,initialize:function(){g.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});f.register("EventEmitter",o,"events"),s.exports=o}),93055:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={EventEmitter:e(47565)}}),20122:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h){h===void 0&&(h=1),g.call(this,f.BARREL,r),this.amount=h}});s.exports=o}),32251:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p,m,v){c===void 0&&(c=1),l===void 0&&(l=1),p===void 0&&(p=1),m===void 0&&(m=1),v===void 0&&(v=4),g.call(this,f.BLOOM,r),this.steps=v,this.offsetX=c,this.offsetY=l,this.blurStrength=p,this.strength=m,this.glcolor=[1,1,1],h!=null&&(this.color=h)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}}});s.exports=o}),9047:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p,m,v){h===void 0&&(h=0),c===void 0&&(c=2),l===void 0&&(l=2),p===void 0&&(p=1),v===void 0&&(v=4),g.call(this,f.BLUR,r),this.quality=h,this.x=c,this.y=l,this.steps=v,this.strength=p,this.glcolor=[1,1,1],m!=null&&(this.color=m)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}}});s.exports=o}),27885:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p,m,v,y){h===void 0&&(h=.5),c===void 0&&(c=1),l===void 0&&(l=.2),p===void 0&&(p=!1),m===void 0&&(m=1),v===void 0&&(v=1),y===void 0&&(y=1),g.call(this,f.BOKEH,r),this.radius=h,this.amount=c,this.contrast=l,this.isTiltShift=p,this.strength=y,this.blurX=m,this.blurY=v}});s.exports=o}),12578:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p,m){h===void 0&&(h=8),p===void 0&&(p=1),m===void 0&&(m=.005),g.call(this,f.CIRCLE,r),this.scale=p,this.feather=m,this.thickness=h,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],c!=null&&(this.color=c),l!=null&&(this.backgroundColor=l)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}},backgroundColor:{get:function(){var u=this.glcolor2;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor2;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(u){this.glcolor2[3]=u}}});s.exports=o}),15802:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(89422),f=e(14811),o=new a({Extends:g,initialize:function(r){g.call(this),this.type=f.COLOR_MATRIX,this.gameObject=r,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});s.exports=o}),72898:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u){this.type=o,this.gameObject=u,this.active=!0},setActive:function(f){return this.active=f,this},destroy:function(){this.gameObject=null,this.active=!1}});s.exports=g}),44553:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l){h===void 0&&(h="__WHITE"),c===void 0&&(c=.005),l===void 0&&(l=.005),g.call(this,f.DISPLACEMENT,r),this.x=c,this.y=l,this.glTexture,this.setTexture(h)},setTexture:function(u){var r=this.gameObject.scene.sys.textures.getFrame(u);return r&&(this.glTexture=r.glTexture),this}});s.exports=o}),68531:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p){c===void 0&&(c=4),l===void 0&&(l=0),p===void 0&&(p=!1),g.call(this,f.GLOW,r),this.outerStrength=c,this.innerStrength=l,this.knockout=p,this.glcolor=[1,1,1,1],h!==void 0&&(this.color=h)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}}});s.exports=o}),37102:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p,m,v,y,E){l===void 0&&(l=.2),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),y===void 0&&(y=1),E===void 0&&(E=0),g.call(this,f.GRADIENT,r),this.alpha=l,this.size=E,this.fromX=p,this.fromY=m,this.toX=v,this.toY=y,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],h!=null&&(this.color1=h),c!=null&&(this.color2=c)},color1:{get:function(){var u=this.glcolor1;return(u[0]<<16)+(u[1]<<8)+(u[2]|0)},set:function(u){var r=this.glcolor1;r[0]=u>>16&255,r[1]=u>>8&255,r[2]=u&255}},color2:{get:function(){var u=this.glcolor2;return(u[0]<<16)+(u[1]<<8)+(u[2]|0)},set:function(u){var r=this.glcolor2;r[0]=u>>16&255,r[1]=u>>8&255,r[2]=u&255}}});s.exports=o}),86886:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h){h===void 0&&(h=1),g.call(this,f.PIXELATE,r),this.amount=h}});s.exports=o}),92322:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p,m,v,y){h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l=.1),p===void 0&&(p=1),v===void 0&&(v=6),y===void 0&&(y=1),g.call(this,f.SHADOW,r),this.x=h,this.y=c,this.decay=l,this.power=p,this.glcolor=[0,0,0,1],this.samples=v,this.intensity=y,m!==void 0&&(this.color=m)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}}});s.exports=o}),39563:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p){h===void 0&&(h=.5),c===void 0&&(c=.5),l===void 0&&(l=3),p===void 0&&(p=!1),g.call(this,f.SHINE,r),this.speed=h,this.lineWidth=c,this.gradient=l,this.reveal=p}});s.exports=o}),56448:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p){h===void 0&&(h=.5),c===void 0&&(c=.5),l===void 0&&(l=.5),p===void 0&&(p=.5),g.call(this,f.VIGNETTE,r),this.x=h,this.y=c,this.radius=l,this.strength=p}});s.exports=o}),38433:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72898),f=e(14811),o=new a({Extends:g,initialize:function(r,h,c,l,p){h===void 0&&(h=.1),c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=!1),g.call(this,f.WIPE,r),this.progress=0,this.wipeWidth=h,this.direction=c,this.axis=l,this.reveal=p}});s.exports=o}),14811:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};s.exports=T}),66064:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),g=e(14811),f={Barrel:e(20122),Controller:e(72898),Bloom:e(32251),Blur:e(9047),Bokeh:e(27885),Circle:e(12578),ColorMatrix:e(15802),Displacement:e(44553),Glow:e(68531),Gradient:e(37102),Pixelate:e(86886),Shadow:e(92322),Shine:e(39563),Vignette:e(56448),Wipe:e(38433)};f=a(!1,f,g),s.exports=f}),25305:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),g=e(23568),f=function(o,u,r){u.x=g(r,"x",0),u.y=g(r,"y",0),u.depth=g(r,"depth",0),u.flipX=g(r,"flipX",!1),u.flipY=g(r,"flipY",!1);var h=g(r,"scale",null);typeof h=="number"?u.setScale(h):h!==null&&(u.scaleX=g(h,"x",1),u.scaleY=g(h,"y",1));var c=g(r,"scrollFactor",null);typeof c=="number"?u.setScrollFactor(c):c!==null&&(u.scrollFactorX=g(c,"x",1),u.scrollFactorY=g(c,"y",1)),u.rotation=g(r,"rotation",0);var l=g(r,"angle",null);l!==null&&(u.angle=l),u.alpha=g(r,"alpha",1);var p=g(r,"origin",null);if(typeof p=="number")u.setOrigin(p);else if(p!==null){var m=g(p,"x",.5),v=g(p,"y",.5);u.setOrigin(m,v)}u.blendMode=g(r,"blendMode",a.NORMAL),u.visible=g(r,"visible",!0);var y=g(r,"add",!0);return y&&o.sys.displayList.add(u),u.preUpdate&&o.sys.updateList.add(u),u};s.exports=f}),13059:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23568),g=function(f,o){var u=a(o,"anims",null);if(u===null)return f;if(typeof u=="string")f.anims.play(u);else if(typeof u=="object"){var r=f.anims,h=a(u,"key",void 0);if(h){var c=a(u,"startFrame",void 0),l=a(u,"delay",0),p=a(u,"repeat",0),m=a(u,"repeatDelay",0),v=a(u,"yoyo",!1),y=a(u,"play",!1),E=a(u,"delayedPlay",0),C={key:h,delay:l,repeat:p,repeatDelay:m,yoyo:v,startFrame:c};y?r.play(C):E>0?r.playAfterDelay(C,E):r.load(C)}}return f};s.exports=g}),8050:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(73162),f=e(37277),o=e(51708),u=e(44594),r=e(19186),h=new a({Extends:g,initialize:function(l){g.call(this,l),this.sortChildrenFlag=!1,this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.events.once(u.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.parentContainer&&c.parentContainer.remove(c),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(o.ADDED_TO_SCENE,c,this.scene),this.events.emit(u.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(o.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(u.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,l){return c._depth-l._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list,l=c.length;l--;)c[l]&&c[l].destroy(!0);c.length=0,this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});f.register("DisplayList",h,"displayList"),s.exports=h}),95643:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(53774),f=e(45893),o=e(50792),u=e(51708),r=e(44594),h=new a({Extends:o,initialize:function(l,p){o.call(this),this.scene=l,this.displayList=null,this.type=p,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this),l.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new f(this)),this},setData:function(c,l){return this.data||(this.data=new f(this)),this.data.set(c,l),this},incData:function(c,l){return this.data||(this.data=new f(this)),this.data.inc(c,l),this},toggleData:function(c){return this.data||(this.data=new f(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new f(this)),this.data.get(c)},setInteractive:function(c,l,p){return this.scene.sys.input.enable(this,c,l,p),this},disableInteractive:function(c){return c===void 0&&(c=!1),this.scene.sys.input.disable(this,c),this},removeInteractive:function(c){return c===void 0&&(c=!1),this.scene.sys.input.clear(this),c&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return g(this)},willRender:function(c){var l=this.displayList&&this.displayList.active?this.displayList.willRender(c):!0;return!(!l||h.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,l=this.parentContainer,p=[];l&&(p.unshift(l.getIndex(c)),c=l,l.parentContainer);)l=l.parentContainer;return this.displayList?p.unshift(this.displayList.getIndex(c)):p.unshift(this.scene.sys.displayList.getIndex(c)),p},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(u.ADDED_TO_SCENE,this,this.scene),c.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c&&c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(u.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var c=null;return this.parentContainer?c=this.parentContainer.list:this.displayList&&(c=this.displayList.list),c},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(u.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});h.RENDER_MASK=15,s.exports=h}),44603:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(37277),f=e(44594),o=new a({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(f.BOOT,this.boot,this),this.events.on(f.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(f.DESTROY,this.destroy,this)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(u,r){o.prototype.hasOwnProperty(u)||(o.prototype[u]=r)},o.remove=function(u){o.prototype.hasOwnProperty(u)&&delete o.prototype[u]},g.register("GameObjectCreator",o,"make"),s.exports=o}),39429:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(37277),f=e(44594),o=new a({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(f.BOOT,this.boot,this),this.events.on(f.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(f.DESTROY,this.destroy,this)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},existing:function(u){return(u.renderCanvas||u.renderWebGL)&&this.displayList.add(u),u.preUpdate&&this.updateList.add(u),u},shutdown:function(){this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(u,r){o.prototype.hasOwnProperty(u)||(o.prototype[u]=r)},o.remove=function(u){o.prototype.hasOwnProperty(u)&&delete o.prototype[u]},g.register("GameObjectFactory",o,"add"),s.exports=o}),91296:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),g=new a,f=new a,o=new a,u={camera:g,sprite:f,calc:o},r=function(h,c,l){var p=g,m=f,v=o;return m.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),p.copyFrom(c.matrix),l?(p.multiplyWithOffset(l,-c.scrollX*h.scrollFactorX,-c.scrollY*h.scrollFactorY),m.e=h.x,m.f=h.y):(m.e-=c.scrollX*h.scrollFactorX,m.f-=c.scrollY*h.scrollFactorY),p.multiply(m,v),u};s.exports=r}),45027:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(25774),f=e(37277),o=e(44594),u=new a({Extends:g,initialize:function(h){g.call(this),this.checkQueue=!0,this.scene=h,this.systems=h.sys,h.sys.events.once(o.BOOT,this.boot,this),h.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(o.PRE_UPDATE,this.update,this),r.on(o.UPDATE,this.sceneUpdate,this),r.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,h){for(var c=this._active,l=c.length,p=0;p<l;p++){var m=c[p];m.active&&m.preUpdate.call(m,r,h)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var h=this.systems.events;h.off(o.PRE_UPDATE,this.update,this),h.off(o.UPDATE,this.sceneUpdate,this),h.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});f.register("UpdateList",u,"updateList"),s.exports=u}),3217:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o,u,r,h,c,l,p,m,v,y,E){var C=g.x-a.displayOriginX+o,w=g.y-a.displayOriginY+u,A=C+g.w,M=w+g.h,R=r.a,P=r.b,b=r.c,F=r.d,I=r.e,L=r.f,D=C*R+w*b+I,O=C*P+w*F+L,z=C*R+M*b+I,_=C*P+M*F+L,X=A*R+M*b+I,H=A*P+M*F+L,U=A*R+w*b+I,G=A*P+w*F+L;h&&(D=Math.round(D),O=Math.round(O),z=Math.round(z),_=Math.round(_),X=Math.round(X),H=Math.round(H),U=Math.round(U),G=Math.round(G)),e.batchQuad(a,D,O,z,_,X,H,U,G,f.u0,f.v0,f.u1,f.v1,c,l,p,m,v,y,E)};s.exports=T}),53048:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){if(g===void 0&&(g=!1),f===void 0)return f={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},f;var o=e.text,u=o.length,r=e.maxWidth,h=e.wordWrapCharCode,c=Number.MAX_VALUE,l=Number.MAX_VALUE,p=0,m=0,v=e.fontData.chars,y=e.fontData.lineHeight,E=e.letterSpacing,C=e.lineSpacing,w=0,A=0,M=0,R=null,P=e._align,b=0,F=0,I=e.fontSize/e.fontData.size,L=I*e.scaleX,D=I*e.scaleY,O=null,z=0,_=[],X=Number.MAX_VALUE,H=0,U=0,G=0,N,W,V,$=[],j=[],k=null,Q=function(ue,Gt){for(var zt=0,Yt=0;Yt<ue.length;Yt++){var bt=ue.charCodeAt(Yt),Kt=Gt.chars[bt];Kt&&(zt+=Kt.xAdvance)}return zt*L};if(r>0){V=o.split(`
`);var et=[];for(N=0;N<V.length;N++){var at=V[N],q="",ft="",vt="",Tt="";for(W=0;W<at.length;W++)if(M=at.charCodeAt(W),q+=at[W],M===h||W===at.length-1){Tt=vt+q;var ct=Q(Tt,e.fontData);ct<=r?vt=Tt:(ft=ft.slice(0,-1),ft+=(ft?`
`:"")+vt,vt=q),q=""}ft=ft.slice(0,-1),ft+=(ft?`
`:"")+vt,et.push(ft)}o=et.join(`
`),f.wrappedText=o,u=o.length}var Ut=0;for(N=0;N<u;N++){if(M=o.charCodeAt(N),M===10){k!==null&&($.push({word:k.word,i:k.i,x:k.x*L,y:k.y*D,w:k.w*L,h:k.h*D}),k=null),O=null,_[U]=G,G>H&&(H=G),G<X&&(X=G),U++,G=0,w=0,A=(y+C)*U;continue}if(R=v[M],!!R){if(b=w,F=A,O!==null){var yt=R.kerning[z];b+=yt!==void 0?yt:0}c>b&&(c=b),l>F&&(l=F);var it=b+R.xAdvance,Z=F+y;p<it&&(p=it),m<Z&&(m=Z);var lt=R.xOffset+R.xAdvance+(yt!==void 0?yt:0);M===h?k!==null&&($.push({word:k.word,i:k.i,x:k.x*L,y:k.y*D,w:k.w*L,h:k.h*D}),k=null):(k===null&&(k={word:"",i:Ut,x:w,y:A,w:0,h:y}),k.word=k.word.concat(o[N]),k.w+=lt),j.push({i:Ut,idx:N,char:o[N],code:M,x:(R.xOffset+b)*I,y:(R.yOffset+A)*I,w:R.width*I,h:R.height*I,t:A*I,r:it*I,b:y*I,line:U,glyph:R}),w+=R.xAdvance+E+(yt!==void 0?yt:0),O=R,z=M,G=it*I,Ut++}}if(k!==null&&$.push({word:k.word,i:k.i,x:k.x*L,y:k.y*D,w:k.w*L,h:k.h*D}),_[U]=G,G>H&&(H=G),G<X&&(X=G),P>0)for(var pt=0;pt<j.length;pt++){var Pt=j[pt];if(P===1){var wt=(H-_[Pt.line])/2;Pt.x+=wt,Pt.r+=wt}else if(P===2){var jt=H-_[Pt.line];Pt.x+=jt,Pt.r+=jt}}var Vt=f.local,Wt=f.global;return V=f.lines,Vt.x=c*I,Vt.y=l*I,Vt.width=p*I,Vt.height=m*I,Wt.x=e.x-e._displayOriginX+c*L,Wt.y=e.y-e._displayOriginY+l*D,Wt.width=p*L,Wt.height=m*D,V.shortest=X,V.longest=H,V.lengths=_,a&&(Vt.x=Math.ceil(Vt.x),Vt.y=Math.ceil(Vt.y),Vt.width=Math.ceil(Vt.width),Vt.height=Math.ceil(Vt.height),Wt.x=Math.ceil(Wt.x),Wt.y=Math.ceil(Wt.y),Wt.width=Math.ceil(Wt.width),Wt.height=Math.ceil(Wt.height),V.shortest=Math.ceil(X),V.longest=Math.ceil(H)),g&&(e._displayOriginX=e.originX*Vt.width,e._displayOriginY=e.originY*Vt.height,Wt.x=e.x-e._displayOriginX*e.scaleX,Wt.y=e.y-e._displayOriginY*e.scaleY,a&&(Wt.x=Math.ceil(Wt.x),Wt.y=Math.ceil(Wt.y))),f.words=$,f.characters=j,f.lines.height=y,f.scale=I,f.scaleX=e.scaleX,f.scaleY=e.scaleY,f};s.exports=T}),61327:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21859),g=function(f,o,u,r,h,c,l){var p=f.sys.textures.get(u),m=p.get(r),v=f.sys.cache.xml.get(h);if(m&&v){var y=a(v,m,c,l,p);return f.sys.cache.bitmapFont.add(o,{data:y,texture:u,frame:r,fromAtlas:!0}),!0}else return!1};s.exports=g}),6925:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),g=function(f,o){var u=o.width,r=o.height,h=Math.floor(u/2),c=Math.floor(r/2),l=a(o,"chars","");if(l!==""){var p=a(o,"image",""),m=f.sys.textures.getFrame(p),v=m.cutX,y=m.cutY,E=m.source.width,C=m.source.height,w=a(o,"offset.x",0),A=a(o,"offset.y",0),M=a(o,"spacing.x",0),R=a(o,"spacing.y",0),P=a(o,"lineSpacing",0),b=a(o,"charsPerRow",null);b===null&&(b=E/u,b>l.length&&(b=l.length));for(var F=w,I=A,L={retroFont:!0,font:p,size:u,lineHeight:r+P,chars:{}},D=0,O=0;O<l.length;O++){var z=l.charCodeAt(O),_=(v+F)/E,X=(y+I)/C,H=(v+F+u)/E,U=(y+I+r)/C;L.chars[z]={x:F,y:I,width:u,height:r,centerX:h,centerY:c,xOffset:0,yOffset:0,xAdvance:u,data:{},kerning:{},u0:_,v0:X,u1:H,v1:U},D++,D===b?(D=0,F=w,I+=r+R):F+=u+M}var G={data:L,frame:null,texture:p};return G}};s.exports=g}),21859:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(a,g){return parseInt(a.getAttribute(g),10)}var e=function(a,g,f,o,u){f===void 0&&(f=0),o===void 0&&(o=0);var r=g.cutX,h=g.cutY,c=g.source.width,l=g.source.height,p=g.sourceIndex,m={},v=a.getElementsByTagName("info")[0],y=a.getElementsByTagName("common")[0];m.font=v.getAttribute("face"),m.size=T(v,"size"),m.lineHeight=T(y,"lineHeight")+o,m.chars={};var E=a.getElementsByTagName("char"),C=g!==void 0&&g.trimmed;if(C)var w=g.height,A=g.width;for(var M=0;M<E.length;M++){var R=E[M],P=T(R,"id"),b=String.fromCharCode(P),F=T(R,"x"),I=T(R,"y"),L=T(R,"width"),D=T(R,"height");C&&(F<A&&(A=F),I<w&&(w=I)),C&&w!==0&&A!==0&&(F-=g.x,I-=g.y);var O=(r+F)/c,z=(h+I)/l,_=(r+F+L)/c,X=(h+I+D)/l;if(m.chars[P]={x:F,y:I,width:L,height:D,centerX:Math.floor(L/2),centerY:Math.floor(D/2),xOffset:T(R,"xoffset"),yOffset:T(R,"yoffset"),xAdvance:T(R,"xadvance")+f,data:{},kerning:{},u0:O,v0:z,u1:_,v1:X},u&&L!==0&&D!==0){var H=u.add(b,p,F,I,L,D);H&&H.setUVs(L,D,O,z,_,X)}}var U=a.getElementsByTagName("kerning");for(M=0;M<U.length;M++){var G=U[M],N=T(G,"first"),W=T(G,"second"),V=T(G,"amount");m.chars[W].kerning[N]=V}return m};s.exports=e}),196:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87662),g=e(79291),f={Parse:e(6925)};f=g(!1,f,a),s.exports=f}),87662:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};s.exports=T}),2638:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),g=e(83419),f=e(12310),o=new g({Extends:a,Mixins:[f],initialize:function(r,h,c,l,p,m,v){a.call(this,r,h,c,l,p,m,v),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(u,r){return this.cropWidth=u,this.cropHeight=r,this},setDisplayCallback:function(u){return this.displayCallback=u,this},setScrollX:function(u){return this.scrollX=u,this},setScrollY:function(u){return this.scrollY=u,this}});s.exports=o}),86741:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20926),g=function(f,o,u,r){var h=o._text,c=h.length,l=f.currentContext;if(!(c===0||!a(f,l,o,u,r))){u.addToRenderList(o);var p=o.fromAtlas?o.frame:o.texture.frames.__BASE,m=o.displayCallback,v=o.callbackData,y=o.fontData.chars,E=o.fontData.lineHeight,C=o._letterSpacing,w=0,A=0,M=0,R=null,P=0,b=0,F=0,I=0,L=0,D=0,O=null,z=0,_=o.frame.source.image,X=p.cutX,H=p.cutY,U=0,G=0,N=o._fontSize/o.fontData.size,W=o._align,V=0,$=0;o.getTextBounds(!1);var j=o._bounds.lines;W===1?$=(j.longest-j.lengths[0])/2:W===2&&($=j.longest-j.lengths[0]),l.translate(-o.displayOriginX,-o.displayOriginY);var k=u.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(l.beginPath(),l.rect(0,0,o.cropWidth,o.cropHeight),l.clip());for(var Q=0;Q<c;Q++){if(G=N,U=0,M=h.charCodeAt(Q),M===10){V++,W===1?$=(j.longest-j.lengths[V])/2:W===2&&($=j.longest-j.lengths[V]),w=0,A+=E,O=null;continue}if(R=y[M],!!R){if(P=X+R.x,b=H+R.y,F=R.width,I=R.height,L=R.xOffset+w-o.scrollX,D=R.yOffset+A-o.scrollY,O!==null){var et=R.kerning[z];L+=et!==void 0?et:0}if(m){v.index=Q,v.charCode=M,v.x=L,v.y=D,v.scale=G,v.rotation=U,v.data=R.data;var at=m(v);L=at.x,D=at.y,G=at.scale,U=at.rotation}L*=G,D*=G,L+=$,w+=R.xAdvance+C+(et!==void 0?et:0),O=R,z=M,!(F===0||I===0||M===32)&&(k&&(L=Math.round(L),D=Math.round(D)),l.save(),l.translate(L,D),l.rotate(U),l.scale(G,G),l.drawImage(_,P,b,F,I,0,0,F,I),l.restore())}}l.restore()}};s.exports=g}),11164:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2638),g=e(25305),f=e(44603),o=e(23568);f.register("dynamicBitmapText",function(u,r){u===void 0&&(u={});var h=o(u,"font",""),c=o(u,"text",""),l=o(u,"size",!1),p=new a(this.scene,0,0,h,c,l);return r!==void 0&&(u.add=r),g(this.scene,p,u),p})}),72566:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2638),g=e(39429);g.register("dynamicBitmapText",function(f,o,u,r,h){return this.displayList.add(new a(this.scene,f,o,u,r,h))})}),12310:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(73482),f=e(86741),s.exports={renderWebGL:g,renderCanvas:f}}),73482:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=e(61340),f=e(70554),o=new g,u=function(r,h,c,l){var p=h.text,m=p.length;if(m!==0){c.addToRenderList(h);var v=r.pipelines.set(h.pipeline,h),y=a(h,c,l);r.pipelines.preBatch(h);var E=y.sprite,C=y.calc,w=o,A=h.cropWidth>0||h.cropHeight>0;A&&(v.flush(),r.pushScissor(C.tx,C.ty,h.cropWidth*C.scaleX,h.cropHeight*C.scaleY));var M=h.frame,R=M.glTexture,P=h.tintFill,b=f.getTintAppendFloatAlpha(h.tintTopLeft,c.alpha*h._alphaTL),F=f.getTintAppendFloatAlpha(h.tintTopRight,c.alpha*h._alphaTR),I=f.getTintAppendFloatAlpha(h.tintBottomLeft,c.alpha*h._alphaBL),L=f.getTintAppendFloatAlpha(h.tintBottomRight,c.alpha*h._alphaBR),D=v.setGameObject(h),O=0,z=0,_=0,X=0,H=h.letterSpacing,U,G=0,N=0,W,V=h.scrollX,$=h.scrollY,j=h.fontData,k=j.chars,Q=j.lineHeight,et=h.fontSize/j.size,at=0,q=h._align,ft=0,vt=0,Tt=h.getTextBounds(!1);h.maxWidth>0&&(p=Tt.wrappedText,m=p.length);var ct=h._bounds.lines;q===1?vt=(ct.longest-ct.lengths[0])/2:q===2&&(vt=ct.longest-ct.lengths[0]);for(var Ut=c.roundPixels,yt=h.displayCallback,it=h.callbackData,Z=0;Z<m;Z++){if(_=p.charCodeAt(Z),_===10){ft++,q===1?vt=(ct.longest-ct.lengths[ft])/2:q===2&&(vt=ct.longest-ct.lengths[ft]),O=0,z+=Q,W=null;continue}if(U=k[_],!!U){G=U.width,N=U.height;var lt=U.xOffset+O-V,pt=U.yOffset+z-$;if(W!==null){var Pt=U.kerning[X]||0;lt+=Pt,O+=Pt}if(O+=U.xAdvance+H,W=U,X=_,!(G===0||N===0||_===32)){if(et=h.fontSize/h.fontData.size,at=0,yt){it.color=0,it.tint.topLeft=b,it.tint.topRight=F,it.tint.bottomLeft=I,it.tint.bottomRight=L,it.index=Z,it.charCode=_,it.x=lt,it.y=pt,it.scale=et,it.rotation=at,it.data=U.data;var wt=yt(it);lt=wt.x,pt=wt.y,et=wt.scale,at=wt.rotation,wt.color?(b=wt.color,F=wt.color,I=wt.color,L=wt.color):(b=wt.tint.topLeft,F=wt.tint.topRight,I=wt.tint.bottomLeft,L=wt.tint.bottomRight),b=f.getTintAppendFloatAlpha(b,c.alpha*h._alphaTL),F=f.getTintAppendFloatAlpha(F,c.alpha*h._alphaTR),I=f.getTintAppendFloatAlpha(I,c.alpha*h._alphaBL),L=f.getTintAppendFloatAlpha(L,c.alpha*h._alphaBR)}lt*=et,pt*=et,lt-=h.displayOriginX,pt-=h.displayOriginY,lt+=vt,w.applyITRS(lt,pt,at,et,et),C.multiply(w,E);var jt=U.u0,Vt=U.v0,Wt=U.u1,ue=U.v1,Gt=G,zt=N,Yt=E.e,bt=E.f,Kt=zt*E.c+E.e,ge=zt*E.d+E.f,ce=Gt*E.a+zt*E.c+E.e,Oe=Gt*E.b+zt*E.d+E.f,dt=Gt*E.a+E.e,Jt=Gt*E.b+E.f;Ut&&(Yt=Math.round(Yt),bt=Math.round(bt),Kt=Math.round(Kt),ge=Math.round(ge),ce=Math.round(ce),Oe=Math.round(Oe),dt=Math.round(dt),Jt=Math.round(Jt)),v.shouldFlush(6)&&(v.flush(),D=v.setGameObject(h)),v.batchQuad(h,Yt,bt,Kt,ge,ce,Oe,dt,Jt,jt,Vt,Wt,ue,b,F,I,L,P,R,D)}}}A&&(v.flush(),r.popScissor()),r.pipelines.postBatch(h)}};s.exports=u}),22186:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(45319),f=e(31401),o=e(95643),u=e(53048),r=e(61327),h=e(21859),c=e(87841),l=e(18658),p=new a({Extends:o,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Texture,f.Tint,f.Transform,f.Visible,l],initialize:function(v,y,E,C,w,A,M){w===void 0&&(w=""),M===void 0&&(M=0),o.call(this,v,"BitmapText"),this.font=C;var R=this.scene.sys.cache.bitmapFont.get(C);if(!R)throw new Error("Invalid BitmapText key: "+C);this.fontData=R.data,this._text="",this._fontSize=A||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=M,this._bounds=u(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=R.fromAtlas,this.setTexture(R.texture,R.frame),this.setPosition(y,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(w)},setLeftAlign:function(){return this._align=p.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=p.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=p.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(m){return this._fontSize=m,this._dirty=!0,this},setLetterSpacing:function(m){return m===void 0&&(m=0),this._letterSpacing=m,this._dirty=!0,this},setLineSpacing:function(m){return m===void 0&&(m=0),this.lineSpacing=m,this},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this.text&&(this._text=m.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(m,v,y,E){return m===void 0&&(m=0),v===void 0&&(v=0),y===void 0&&(y=0),E===void 0&&(E=.5),this.dropShadowX=m,this.dropShadowY=v,this.dropShadowColor=y,this.dropShadowAlpha=E,this},setCharacterTint:function(m,v,y,E,C,w,A){m===void 0&&(m=0),v===void 0&&(v=1),y===void 0&&(y=!1),E===void 0&&(E=-1),C===void 0&&(C=E,w=E,A=E);var M=this.text.length;v===-1&&(v=M),m<0&&(m=M+m),m=g(m,0,M-1);for(var R=g(m+v,m,M),P=this.charColors,b=m;b<R;b++){var F=P[b];if(E===-1)P[b]=null;else{var I=y?1:0;F?(F.tintEffect=I,F.tintTL=E,F.tintTR=C,F.tintBL=w,F.tintBR=A):P[b]={tintEffect:I,tintTL:E,tintTR:C,tintBL:w,tintBR:A}}}return this},setWordTint:function(m,v,y,E,C,w,A){v===void 0&&(v=1);for(var M=this.getTextBounds(),R=M.words,P=typeof m=="number",b=0,F=0;F<R.length;F++){var I=R[F];if((P&&F===m||!P&&I.word===m)&&(this.setCharacterTint(I.i,I.word.length,y,E,C,w,A),b++,b===v))return this}return this},getTextBounds:function(m){var v=this._bounds;return(this._dirty||m||this.scaleX!==v.scaleX||this.scaleY!==v.scaleY)&&(u(this,m,!0,v),this._dirty=!1),v},getCharacterAt:function(m,v,y){for(var E=this.getLocalPoint(m,v,null,y),C=this.getTextBounds(),w=C.characters,A=new c,M=0;M<w.length;M++){var R=w[M];if(A.setTo(R.x,R.t,R.r-R.x,R.b),A.contains(E.x,E.y))return R}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(m,v,y){v===void 0&&(v=this._fontSize),y===void 0&&(y=this._align);var E=this.scene.sys.cache.bitmapFont.get(m);return E&&(this.font=m,this.fontData=E.data,this._fontSize=v,this._align=y,this.fromAtlas=E.fromAtlas===!0,this.setTexture(E.texture,E.frame),u(this,!1,!0,this._bounds)),this},setMaxWidth:function(m,v){return this._maxWidth=m,this._dirty=!0,v!==void 0&&(this.wordWrapCharCode=v),this},setDisplaySize:function(m,v){this.setScale(1,1),this.getTextBounds(!1);var y=m/this.width,E=v/this.height;return this.setScale(y,E),this},align:{set:function(m){this._align=m,this._dirty=!0},get:function(){return this._align}},text:{set:function(m){this.setText(m)},get:function(){return this._text}},fontSize:{set:function(m){this._fontSize=m,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(m){this._letterSpacing=m,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(m){this._lineSpacing=m,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(m){this._maxWidth=m,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(m){this.setScaleX(1),this.getTextBounds(!1);var v=m/this.width;this.setScaleX(v)},get:function(){return this.width}},displayHeight:{set:function(m){this.setScaleY(1),this.getTextBounds(!1);var v=m/this.height;this.setScaleY(v)},get:function(){return this.height}},toJSON:function(){var m=f.ToJSON(this),v={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return m.data=v,m},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});p.ALIGN_LEFT=0,p.ALIGN_CENTER=1,p.ALIGN_RIGHT=2,p.ParseFromAtlas=r,p.ParseXMLBitmapFont=h,s.exports=p}),37289:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20926),g=function(f,o,u,r){var h=o._text,c=h.length,l=f.currentContext;if(!(c===0||!a(f,l,o,u,r))){u.addToRenderList(o);var p=o.fromAtlas?o.frame:o.texture.frames.__BASE,m=o.fontData.chars,v=o.fontData.lineHeight,y=o._letterSpacing,E=o._lineSpacing,C=0,w=0,A=0,M=null,R=0,P=0,b=0,F=0,I=0,L=0,D=null,O=0,z=p.source.image,_=p.cutX,X=p.cutY,H=o._fontSize/o.fontData.size,U=o._align,G=0,N=0,W=o.getTextBounds(!1);o.maxWidth>0&&(h=W.wrappedText,c=h.length);var V=o._bounds.lines;U===1?N=(V.longest-V.lengths[0])/2:U===2&&(N=V.longest-V.lengths[0]),l.translate(-o.displayOriginX,-o.displayOriginY);for(var $=u.roundPixels,j=0;j<c;j++){if(A=h.charCodeAt(j),A===10){G++,U===1?N=(V.longest-V.lengths[G])/2:U===2&&(N=V.longest-V.lengths[G]),C=0,w+=v+E,D=null;continue}if(M=m[A],!!M){if(R=_+M.x,P=X+M.y,b=M.width,F=M.height,I=M.xOffset+C,L=M.yOffset+w,D!==null){var k=M.kerning[O];I+=k!==void 0?k:0}I*=H,L*=H,I+=N,C+=M.xAdvance+y+(k!==void 0?k:0),D=M,O=A,!(b===0||F===0||A===32)&&($&&(I=Math.round(I),L=Math.round(L)),l.save(),l.translate(I,L),l.scale(H,H),l.drawImage(z,R,P,b,F,0,0,b,F),l.restore())}}l.restore()}};s.exports=g}),57336:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),g=e(25305),f=e(44603),o=e(23568),u=e(35154);f.register("bitmapText",function(r,h){r===void 0&&(r={});var c=u(r,"font",""),l=o(r,"text",""),p=o(r,"size",!1),m=u(r,"align",0),v=new a(this.scene,0,0,c,l,p,m);return h!==void 0&&(r.add=h),g(this.scene,v,r),v})}),34914:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),g=e(39429);g.register("bitmapText",function(f,o,u,r,h,c){return this.displayList.add(new a(this.scene,f,o,u,r,h,c))})}),18658:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(33590),f=e(37289),s.exports={renderWebGL:g,renderCanvas:f}}),33590:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3217),g=e(91296),f=e(70554),o=function(u,r,h,c){var l=r._text,p=l.length;if(p!==0){h.addToRenderList(r);var m=u.pipelines.set(r.pipeline,r),v=g(r,h,c).calc;u.pipelines.preBatch(r);var y=h.roundPixels,E=h.alpha,C=r.charColors,w=r.tintFill,A=f.getTintAppendFloatAlpha,M=A(r.tintTopLeft,E*r._alphaTL),R=A(r.tintTopRight,E*r._alphaTR),P=A(r.tintBottomLeft,E*r._alphaBL),b=A(r.tintBottomRight,E*r._alphaBR),F=r.frame.glTexture,I=m.setGameObject(r),L=r.getTextBounds(!1),D,O,z,_=L.characters,X=r.dropShadowX,H=r.dropShadowY,U=X!==0||H!==0;if(U){var G=r.dropShadowColor,N=r.dropShadowAlpha,W=A(G,E*N*r._alphaTL),V=A(G,E*N*r._alphaTR),$=A(G,E*N*r._alphaBL),j=A(G,E*N*r._alphaBR);for(D=0;D<_.length;D++)O=_[D],z=O.glyph,!(O.code===32||z.width===0||z.height===0)&&a(m,r,O,z,X,H,v,y,W,V,$,j,1,F,I)}for(D=0;D<_.length;D++)if(O=_[D],z=O.glyph,!(O.code===32||z.width===0||z.height===0))if(m.shouldFlush(6)&&(m.flush(),I=m.setGameObject(r)),C[O.i]){var k=C[O.i],Q=k.tintEffect,et=A(k.tintTL,E*r._alphaTL),at=A(k.tintTR,E*r._alphaTR),q=A(k.tintBL,E*r._alphaBL),ft=A(k.tintBR,E*r._alphaBR);a(m,r,O,z,0,0,v,y,et,at,q,ft,Q,F,I)}else a(m,r,O,z,0,0,v,y,M,R,P,b,w,F,I);u.pipelines.postBatch(r)}};s.exports=o}),6107:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(48011),g=e(46590),f=e(83419),o=e(31401),u=e(4327),r=e(95643),h=e(73162),c=new f({Extends:r,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,a],initialize:function(p,m,v,y,E){r.call(this,p,"Blitter"),this.setTexture(y,E),this.setPosition(m,v),this.initPipeline(),this.initPostPipeline(),this.children=new h,this.renderList=[],this.dirty=!1},create:function(l,p,m,v,y){v===void 0&&(v=!0),y===void 0&&(y=this.children.length),m===void 0?m=this.frame:m instanceof u||(m=this.texture.get(m));var E=new g(this,l,p,m,v);return this.children.addAt(E,y,!1),this.dirty=!0,E},createFromCallback:function(l,p,m,v){for(var y=this.createMultiple(p,m,v),E=0;E<y.length;E++){var C=y[E];l.call(this,C,E)}return y},createMultiple:function(l,p,m){p===void 0&&(p=this.frame.name),m===void 0&&(m=!0),Array.isArray(p)||(p=[p]);var v=[],y=this;return p.forEach(function(E){for(var C=0;C<l;C++)v.push(y.create(0,0,E,m))}),v},childCanRender:function(l){return l.visible&&l.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});s.exports=c}),72396:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=a.getRenderList();if(o.length!==0){var u=e.currentContext,r=g.alpha*a.alpha;if(r!==0){g.addToRenderList(a),u.globalCompositeOperation=e.blendModes[a.blendMode],u.imageSmoothingEnabled=!a.frame.source.scaleMode;var h=a.x-g.scrollX*a.scrollFactorX,c=a.y-g.scrollY*a.scrollFactorY;u.save(),f&&f.copyToContext(u);for(var l=g.roundPixels,p=0;p<o.length;p++){var m=o[p],v=m.flipX||m.flipY,y=m.frame,E=y.canvasData,C=y.x,w=y.y,A=1,M=1,R=m.alpha*r;R!==0&&(u.globalAlpha=R,v?(m.flipX&&(A=-1,C-=E.width),m.flipY&&(M=-1,w-=E.height),E.width>0&&E.height>0&&(u.save(),u.translate(m.x+h,m.y+c),u.scale(A,M),u.drawImage(y.source.image,E.x,E.y,E.width,E.height,C,w,E.width,E.height),u.restore())):(l&&(C=Math.round(C),w=Math.round(w)),E.width>0&&E.height>0&&u.drawImage(y.source.image,E.x,E.y,E.width,E.height,C+m.x+h,w+m.y+c,E.width,E.height)))}u.restore()}}};s.exports=T}),9403:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6107),g=e(25305),f=e(44603),o=e(23568);f.register("blitter",function(u,r){u===void 0&&(u={});var h=o(u,"key",null),c=o(u,"frame",null),l=new a(this.scene,0,0,h,c);return r!==void 0&&(u.add=r),g(this.scene,l,u),l})}),12709:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6107),g=e(39429);g.register("blitter",function(f,o,u,r){return this.displayList.add(new a(this.scene,f,o,u,r))})}),48011:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(99485),f=e(72396),s.exports={renderWebGL:g,renderCanvas:f}}),99485:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),g=e(70554),f=new a,o=function(u,r,h,c){var l=r.getRenderList(),p=h.alpha*r.alpha;if(!(l.length===0||p===0)){h.addToRenderList(r);var m=u.pipelines.set(this.pipeline,r),v=h.scrollX*r.scrollFactorX,y=h.scrollY*r.scrollFactorY,E=f.copyFrom(h.matrix);c&&(E.multiplyWithOffset(c,-v,-y),v=0,y=0);var C=r.x-v,w=r.y-y,A=-1,M=!1,R=h.roundPixels;u.pipelines.preBatch(r);for(var P=0;P<l.length;P++){var b=l[P],F=b.frame,I=b.alpha*p;if(I!==0){var L=F.width,D=F.height,O=C+b.x+F.x,z=w+b.y+F.y;b.flipX&&(L*=-1,O+=F.width),b.flipY&&(D*=-1,z+=F.height);var _=E.setQuad(O,z,O+L,z+D,R),X=g.getTintAppendFloatAlpha(b.tint,I);if(F.sourceIndex!==A){var H=m.setGameObject(r,F);A=F.sourceIndex}m.batchQuad(r,_[0],_[1],_[2],_[3],_[4],_[5],_[6],_[7],F.u0,F.v0,F.u1,F.v1,X,X,X,X,M,F.glTexture,H)&&(A=-1)}}u.pipelines.postBatch(r)}};s.exports=o}),46590:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(4327),f=new a({initialize:function(u,r,h,c,l){this.parent=u,this.x=r,this.y=h,this.frame=c,this.data={},this.tint=16777215,this._visible=l,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof g&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,u,r){return this.x=o,this.y=u,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(o,u){return this.x=o,this.y=u,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,u){return this.flipX=o,this.flipY=u,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});s.exports=f}),16005:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=2,f={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,u,r,h){return o===void 0&&(o=1),u===void 0?this.alpha=o:(this._alphaTL=a(o,0,1),this._alphaTR=a(u,0,1),this._alphaBL=a(r,0,1),this._alphaBR=a(h,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var u=a(o,0,1);this._alpha=u,this._alphaTL=u,this._alphaTR=u,this._alphaBL=u,this._alphaBR=u,u===0?this.renderFlags&=~g:this.renderFlags|=g}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var u=a(o,0,1);this._alphaTL=u,u!==0&&(this.renderFlags|=g)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var u=a(o,0,1);this._alphaTR=u,u!==0&&(this.renderFlags|=g)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var u=a(o,0,1);this._alphaBL=u,u!==0&&(this.renderFlags|=g)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var u=a(o,0,1);this._alphaBR=u,u!==0&&(this.renderFlags|=g)}}};s.exports=f}),88509:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=2,f={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var u=a(o,0,1);this._alpha=u,u===0?this.renderFlags&=~g:this.renderFlags|=g}}};s.exports=f}),90065:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),g={_blendMode:a.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(f){typeof f=="string"&&(f=a[f]),f|=0,f>=-1&&(this._blendMode=f)}},setBlendMode:function(f){return this.blendMode=f,this}};s.exports=g}),94215:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};s.exports=T}),61683:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={texture:null,frame:null,isCropped:!1,setCrop:function(e,a,g,f){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,a,g,f,this.flipX,this.flipY);else{var o=e;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};s.exports=T}),89272:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),g={_depth:0,depth:{get:function(){return this._depth},set:function(f){this.displayList&&this.displayList.queueDepthSort(),this._depth=f}},setDepth:function(f){return f===void 0&&(f=0),this.depth=f,this},setToTop:function(){var f=this.getDisplayList();return f&&a.BringToTop(f,this),this},setToBack:function(){var f=this.getDisplayList();return f&&a.SendToBack(f,this),this},setAbove:function(f){var o=this.getDisplayList();return o&&f&&a.MoveAbove(o,this,f),this},setBelow:function(f){var o=this.getDisplayList();return o&&f&&a.MoveBelow(o,this,f),this}};s.exports=g}),47059:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(66064),f=e(19133),o=new a({initialize:function(r,h){this.gameObject=r,this.isPost=h,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(u){return u===void 0&&(u=0),this.padding=u,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(u){if(!this.isPost){var r=this.gameObject.scene.sys.renderer;r&&r.pipelines?(this.gameObject.pipeline=r.pipelines.FX_PIPELINE,u!==void 0&&(this.padding=u),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var u=this.list,r=0;r<u.length;r++)u[r].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(u){var r;if(this.isPost){var h=this.gameObject.getPostPipeline(String(u.type));for(Array.isArray(h)||(h=[h]),r=0;r<h.length;r++){var c=h[r];if(c.controller===u){this.gameObject.removePostPipeline(c),u.destroy();break}}}else{var l=this.list;for(r=0;r<l.length;r++)l[r]===u&&(f(l,r),u.destroy())}return this.gameObject},disable:function(u){return u===void 0&&(u=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,u&&this.clear(),this.gameObject},add:function(u,r){if(this.isPost){var h=String(u.type);this.gameObject.setPostPipeline(h,r);var c=this.gameObject.getPostPipeline(h);if(c)return Array.isArray(c)&&(c=c.pop()),c&&(c.controller=u),u}else return this.enabled||this.enable(),this.list.push(u),u},addGlow:function(u,r,h,c,l,p){return this.add(new g.Glow(this.gameObject,u,r,h,c),{quality:l,distance:p})},addShadow:function(u,r,h,c,l,p,m){return this.add(new g.Shadow(this.gameObject,u,r,h,c,l,p,m))},addPixelate:function(u){return this.add(new g.Pixelate(this.gameObject,u))},addVignette:function(u,r,h,c){return this.add(new g.Vignette(this.gameObject,u,r,h,c))},addShine:function(u,r,h,c){return this.add(new g.Shine(this.gameObject,u,r,h,c))},addBlur:function(u,r,h,c,l,p){return this.add(new g.Blur(this.gameObject,u,r,h,c,l,p))},addGradient:function(u,r,h,c,l,p,m,v){return this.add(new g.Gradient(this.gameObject,u,r,h,c,l,p,m,v))},addBloom:function(u,r,h,c,l,p){return this.add(new g.Bloom(this.gameObject,u,r,h,c,l,p))},addColorMatrix:function(){return this.add(new g.ColorMatrix(this.gameObject))},addCircle:function(u,r,h,c,l){return this.add(new g.Circle(this.gameObject,u,r,h,c,l))},addBarrel:function(u){return this.add(new g.Barrel(this.gameObject,u))},addDisplacement:function(u,r,h){return this.add(new g.Displacement(this.gameObject,u,r,h))},addWipe:function(u,r,h){return this.add(new g.Wipe(this.gameObject,u,r,h))},addReveal:function(u,r,h){return this.add(new g.Wipe(this.gameObject,u,r,h,!0))},addBokeh:function(u,r,h){return this.add(new g.Bokeh(this.gameObject,u,r,h))},addTiltShift:function(u,r,h,c,l,p){return this.add(new g.Bokeh(this.gameObject,u,r,h,!0,c,l,p))},destroy:function(){this.clear(),this.gameObject=null}});s.exports=o}),54434:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,a){return this.flipX=e,this.flipY=a,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};s.exports=T}),8004:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=e(11520),f=e(26099),o={prepareBoundsOutput:function(u,r){if(r===void 0&&(r=!1),this.rotation!==0&&g(u,this.x,this.y,this.rotation),r&&this.parentContainer){var h=this.parentContainer.getBoundsTransformMatrix();h.transformPoint(u.x,u.y,u)}return u},getCenter:function(u,r){return u===void 0&&(u=new f),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,r)},getTopLeft:function(u,r){return u||(u=new f),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,r)},getTopCenter:function(u,r){return u||(u=new f),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,r)},getTopRight:function(u,r){return u||(u=new f),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,r)},getLeftCenter:function(u,r){return u||(u=new f),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,r)},getRightCenter:function(u,r){return u||(u=new f),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,r)},getBottomLeft:function(u,r){return u||(u=new f),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,r)},getBottomCenter:function(u,r){return u||(u=new f),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,r)},getBottomRight:function(u,r){return u||(u=new f),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,r)},getBounds:function(u){u===void 0&&(u=new a);var r,h,c,l,p,m,v,y;if(this.parentContainer){var E=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(u),E.transformPoint(u.x,u.y,u),r=u.x,h=u.y,this.getTopRight(u),E.transformPoint(u.x,u.y,u),c=u.x,l=u.y,this.getBottomLeft(u),E.transformPoint(u.x,u.y,u),p=u.x,m=u.y,this.getBottomRight(u),E.transformPoint(u.x,u.y,u),v=u.x,y=u.y}else this.getTopLeft(u),r=u.x,h=u.y,this.getTopRight(u),c=u.x,l=u.y,this.getBottomLeft(u),p=u.x,m=u.y,this.getBottomRight(u),v=u.x,y=u.y;return u.x=Math.min(r,c,p,v),u.y=Math.min(h,l,m,y),u.width=Math.max(r,c,p,v)-u.x,u.height=Math.max(h,l,m,y)-u.y,u}};s.exports=o}),8573:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6858),g=e(80661),f={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o,u,r,h,c){return o===void 0&&(this.texture||this.shader||this.geom)&&(o=this),new a(this.scene,o,u,r,h,c)},createGeometryMask:function(o){return o===void 0&&(this.type==="Graphics"||this.geom)&&(o=this),new g(this.scene,o)}};s.exports=f}),27387:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,a){return e===void 0&&(e=.5),a===void 0&&(a=e),this.originX=e,this.originY=a,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,a){return e===void 0&&(e=0),a===void 0&&(a=e),this.displayOriginX=e,this.displayOriginY=a,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};s.exports=T}),37640:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39506),g=e(57355),f=e(35154),o=e(86353),u=e(26099),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(h,c){c===void 0&&(c=this.pathConfig);var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this.path=h,c&&this.startFollow(c),this},setRotateToPath:function(h,c){return c===void 0&&(c=0),this.rotateToPath=h,this.pathRotationOffset=c,this},isFollowing:function(){var h=this.pathTween;return h&&h.isPlaying()},startFollow:function(h,c){h===void 0&&(h={}),c===void 0&&(c=0);var l=this.pathTween;l&&l.isPlaying()&&l.stop(),typeof h=="number"&&(h={duration:h}),h.from=f(h,"from",0),h.to=f(h,"to",1);var p=g(h,"positionOnPath",!1);this.rotateToPath=g(h,"rotateToPath",!1),this.pathRotationOffset=f(h,"rotationOffset",0);var m=f(h,"startAt",c);if(m&&(h.onStart=function(y){var E=y.data[0];E.progress=m,E.elapsed=E.duration*m;var C=E.ease(E.progress);E.current=E.start+(E.end-E.start)*C,E.setTargetValue()}),this.pathOffset||(this.pathOffset=new u(this.x,this.y)),this.pathVector||(this.pathVector=new u),this.pathDelta||(this.pathDelta=new u),this.pathDelta.reset(),h.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(h),this.path.getStartPoint(this.pathOffset),p&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var v=this.path.getPoint(.1);this.rotation=Math.atan2(v.y-this.y,v.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=h,this},pauseFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.pause(),this},resumeFollow:function(){var h=this.pathTween;return h&&h.isPaused()&&h.resume(),this},stopFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this},pathUpdate:function(){var h=this.pathTween;if(h&&h.data){var c=h.data[0],l=this.pathDelta,p=this.pathVector;if(l.copy(p).negate(),c.state===o.COMPLETE){this.path.getPoint(c.end,p),l.add(p),p.add(this.pathOffset),this.setPosition(p.x,p.y);return}else if(c.state!==o.PLAYING_FORWARD&&c.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(h.getValue(),p),l.add(p),p.add(this.pathOffset);var m=this.x,v=this.y;this.setPosition(p.x,p.y);var y=this.x-m,E=this.y-v;if(y===0&&E===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(E,y)+a(this.pathRotationOffset))}}};s.exports=r}),72699:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),g={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(f){this.pipelineData={};var o=this.scene.sys.renderer;if(!o)return!1;var u=o.pipelines;if(u){f===void 0&&(f=u.default);var r=u.get(f);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(f,o,u){var r=this.scene.sys.renderer;if(!r)return this;var h=r.pipelines;if(h){var c=h.get(f);c&&(this.pipeline=c),o&&(this.pipelineData=u?a(o):o)}return this},setPipelineData:function(f,o){var u=this.pipelineData;return o===void 0?delete u[f]:u[f]=o,this},resetPipeline:function(f){return f===void 0&&(f=!1),this.pipeline=this.defaultPipeline,f&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};s.exports=g}),17581:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),g=e(47059),f=e(19133),o={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(u){this.postPipelines=[],this.postPipelineData={},this.postFX=new g(this,!0),u&&(this.preFX=new g(this,!1))},setPostPipeline:function(u,r,h){var c=this.scene.sys.renderer;if(!c)return this;var l=c.pipelines;if(l){Array.isArray(u)||(u=[u]);for(var p=0;p<u.length;p++){var m=l.getPostPipeline(u[p],this,r);m&&this.postPipelines.push(m)}r&&(this.postPipelineData=h?a(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(u,r){var h=this.postPipelineData;return r===void 0?delete h[u]:h[u]=r,this},getPostPipeline:function(u){for(var r=typeof u=="string",h=this.postPipelines,c=[],l=0;l<h.length;l++){var p=h[l];(r&&p.name===u||!r&&p instanceof u)&&c.push(p)}return c.length===1?c[0]:c},resetPostPipeline:function(u){u===void 0&&(u=!1);for(var r=this.postPipelines,h=0;h<r.length;h++)r[h].destroy();this.postPipelines=[],this.hasPostPipeline=!1,u&&(this.postPipelineData={})},removePostPipeline:function(u){for(var r=typeof u=="string",h=this.postPipelines,c=h.length-1;c>=0;c--){var l=h[c];(r&&l.name===u||!r&&l===u)&&(l.destroy(),f(h,c))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};s.exports=o}),80227:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,a){return a===void 0&&(a=e),this.scrollFactorX=e,this.scrollFactorY=a,this}};s.exports=T}),16736:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};s.exports=T}),37726:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4327),g=8,f={texture:null,frame:null,isCropped:!1,setTexture:function(o,u,r,h){return this.texture=this.scene.sys.textures.get(o),this.setFrame(u,r,h)},setFrame:function(o,u,r){return u===void 0&&(u=!0),r===void 0&&(r=!0),o instanceof a?(this.texture=this.scene.sys.textures.get(o.texture.key),this.frame=o):this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&u&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};s.exports=f}),79812:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4327),g=8,f={texture:null,frame:null,isCropped:!1,setCrop:function(o,u,r,h){if(o===void 0)this.isCropped=!1;else if(this.frame){if(typeof o=="number")this.frame.setCropUVs(this._crop,o,u,r,h,this.flipX,this.flipY);else{var c=o;this.frame.setCropUVs(this._crop,c.x,c.y,c.width,c.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(o,u){return this.texture=this.scene.sys.textures.get(o),this.setFrame(u)},setFrame:function(o,u,r){return u===void 0&&(u=!0),r===void 0&&(r=!0),o instanceof a?(this.texture=this.scene.sys.textures.get(o.texture.key),this.frame=o):this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&u&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};s.exports=f}),27472:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,a,g,f){return e===void 0&&(e=16777215),a===void 0&&(a=e,g=e,f=e),this.tintTopLeft=e,this.tintTopRight=a,this.tintBottomLeft=g,this.tintBottomRight=f,this.tintFill=!1,this},setTintFill:function(e,a,g,f){return this.setTint(e,a,g,f),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};s.exports=T}),53774:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(a.textureKey=e.texture.key,a.frameKey=e.frame.name),a};s.exports=T}),16901:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=e(61340),f=e(85955),o=e(86554),u=e(30954),r=e(26099),h=4,c={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this._scaleX=l,this._scaleY=l,l===0?this.renderFlags&=~h:this.renderFlags|=h}},scaleX:{get:function(){return this._scaleX},set:function(l){this._scaleX=l,l===0?this.renderFlags&=~h:this._scaleY!==0&&(this.renderFlags|=h)}},scaleY:{get:function(){return this._scaleY},set:function(l){this._scaleY=l,l===0?this.renderFlags&=~h:this._scaleX!==0&&(this.renderFlags|=h)}},angle:{get:function(){return u(this._rotation*a.RAD_TO_DEG)},set:function(l){this.rotation=u(l)*a.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=o(l)}},setPosition:function(l,p,m,v){return l===void 0&&(l=0),p===void 0&&(p=l),m===void 0&&(m=0),v===void 0&&(v=0),this.x=l,this.y=p,this.z=m,this.w=v,this},copyPosition:function(l){return l.x!==void 0&&(this.x=l.x),l.y!==void 0&&(this.y=l.y),l.z!==void 0&&(this.z=l.z),l.w!==void 0&&(this.w=l.w),this},setRandomPosition:function(l,p,m,v){return l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),this.x=l+Math.random()*m,this.y=p+Math.random()*v,this},setRotation:function(l){return l===void 0&&(l=0),this.rotation=l,this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,this},setScale:function(l,p){return l===void 0&&(l=1),p===void 0&&(p=l),this.scaleX=l,this.scaleY=p,this},setX:function(l){return l===void 0&&(l=0),this.x=l,this},setY:function(l){return l===void 0&&(l=0),this.y=l,this},setZ:function(l){return l===void 0&&(l=0),this.z=l,this},setW:function(l){return l===void 0&&(l=0),this.w=l,this},getLocalTransformMatrix:function(l){return l===void 0&&(l=new g),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(l,p){l===void 0&&(l=new g);var m=this.parentContainer;if(!m)return this.getLocalTransformMatrix(l);var v=!1;for(p||(p=new g,v=!0),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);m;)p.applyITRS(m.x,m.y,m._rotation,m._scaleX,m._scaleY),p.multiply(l,l),m=m.parentContainer;return v&&p.destroy(),l},getLocalPoint:function(l,p,m,v){m||(m=new r),v||(v=this.scene.sys.cameras.main);var y=v.scrollX,E=v.scrollY,C=l+y*this.scrollFactorX-y,w=p+E*this.scrollFactorY-E;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(C,w,m):f(C,w,this.x,this.y,this.rotation,this.scaleX,this.scaleY,m),this._originComponent&&(m.x+=this._displayOriginX,m.y+=this._displayOriginY),m},getWorldPoint:function(l,p,m){l===void 0&&(l=new r);var v=this.parentContainer;if(!v)return l.x=this.x,l.y=this.y,l;var y=this.getWorldTransformMatrix(p,m);return l.x=y.tx,l.y=y.ty,l},getParentRotation:function(){for(var l=0,p=this.parentContainer;p;)l+=p.rotation,p=p.parentContainer;return l}};s.exports=c}),61340:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(36383),f=e(26099),o=new a({initialize:function(r,h,c,l,p,m){r===void 0&&(r=1),h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l=1),p===void 0&&(p=0),m===void 0&&(m=0),this.matrix=new Float32Array([r,h,c,l,p,m,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(u){this.matrix[0]=u}},b:{get:function(){return this.matrix[1]},set:function(u){this.matrix[1]=u}},c:{get:function(){return this.matrix[2]},set:function(u){this.matrix[2]=u}},d:{get:function(){return this.matrix[3]},set:function(u){this.matrix[3]=u}},e:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},f:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},tx:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},ty:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var u=this.matrix,r=u[0],h=u[1],c=u[2],l=u[3];return r||h?h>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):c||l?g.TAU-(l>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var u=this.matrix;return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0,this},translate:function(u,r){var h=this.matrix;return h[4]=h[0]*u+h[2]*r+h[4],h[5]=h[1]*u+h[3]*r+h[5],this},scale:function(u,r){var h=this.matrix;return h[0]*=u,h[1]*=u,h[2]*=r,h[3]*=r,this},rotate:function(u){var r=Math.sin(u),h=Math.cos(u),c=this.matrix,l=c[0],p=c[1],m=c[2],v=c[3];return c[0]=l*h+m*r,c[1]=p*h+v*r,c[2]=l*-r+m*h,c[3]=p*-r+v*h,this},multiply:function(u,r){var h=this.matrix,c=u.matrix,l=h[0],p=h[1],m=h[2],v=h[3],y=h[4],E=h[5],C=c[0],w=c[1],A=c[2],M=c[3],R=c[4],P=c[5],b=r===void 0?h:r.matrix;return b[0]=C*l+w*m,b[1]=C*p+w*v,b[2]=A*l+M*m,b[3]=A*p+M*v,b[4]=R*l+P*m+y,b[5]=R*p+P*v+E,b},multiplyWithOffset:function(u,r,h){var c=this.matrix,l=u.matrix,p=c[0],m=c[1],v=c[2],y=c[3],E=c[4],C=c[5],w=r*p+h*v+E,A=r*m+h*y+C,M=l[0],R=l[1],P=l[2],b=l[3],F=l[4],I=l[5];return c[0]=M*p+R*v,c[1]=M*m+R*y,c[2]=P*p+b*v,c[3]=P*m+b*y,c[4]=F*p+I*v+w,c[5]=F*m+I*y+A,this},transform:function(u,r,h,c,l,p){var m=this.matrix,v=m[0],y=m[1],E=m[2],C=m[3],w=m[4],A=m[5];return m[0]=u*v+r*E,m[1]=u*y+r*C,m[2]=h*v+c*E,m[3]=h*y+c*C,m[4]=l*v+p*E+w,m[5]=l*y+p*C+A,this},transformPoint:function(u,r,h){h===void 0&&(h={x:0,y:0});var c=this.matrix,l=c[0],p=c[1],m=c[2],v=c[3],y=c[4],E=c[5];return h.x=u*l+r*m+y,h.y=u*p+r*v+E,h},invert:function(){var u=this.matrix,r=u[0],h=u[1],c=u[2],l=u[3],p=u[4],m=u[5],v=r*l-h*c;return u[0]=l/v,u[1]=-h/v,u[2]=-c/v,u[3]=r/v,u[4]=(c*m-l*p)/v,u[5]=-(r*m-h*p)/v,this},copyFrom:function(u){var r=this.matrix;return r[0]=u.a,r[1]=u.b,r[2]=u.c,r[3]=u.d,r[4]=u.e,r[5]=u.f,this},copyFromArray:function(u){var r=this.matrix;return r[0]=u[0],r[1]=u[1],r[2]=u[2],r[3]=u[3],r[4]=u[4],r[5]=u[5],this},copyToContext:function(u){var r=this.matrix;return u.transform(r[0],r[1],r[2],r[3],r[4],r[5]),u},setToContext:function(u){return u.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),u},copyToArray:function(u){var r=this.matrix;return u===void 0?u=[r[0],r[1],r[2],r[3],r[4],r[5]]:(u[0]=r[0],u[1]=r[1],u[2]=r[2],u[3]=r[3],u[4]=r[4],u[5]=r[5]),u},setTransform:function(u,r,h,c,l,p){var m=this.matrix;return m[0]=u,m[1]=r,m[2]=h,m[3]=c,m[4]=l,m[5]=p,this},decomposeMatrix:function(){var u=this.decomposedMatrix,r=this.matrix,h=r[0],c=r[1],l=r[2],p=r[3],m=h*p-c*l;if(u.translateX=r[4],u.translateY=r[5],h||c){var v=Math.sqrt(h*h+c*c);u.rotation=c>0?Math.acos(h/v):-Math.acos(h/v),u.scaleX=v,u.scaleY=m/v}else if(l||p){var y=Math.sqrt(l*l+p*p);u.rotation=Math.PI*.5-(p>0?Math.acos(-l/y):-Math.acos(l/y)),u.scaleX=m/y,u.scaleY=y}else u.rotation=0,u.scaleX=0,u.scaleY=0;return u},applyITRS:function(u,r,h,c,l){var p=this.matrix,m=Math.sin(h),v=Math.cos(h);return p[4]=u,p[5]=r,p[0]=v*c,p[1]=m*c,p[2]=-m*l,p[3]=v*l,this},applyInverse:function(u,r,h){h===void 0&&(h=new f);var c=this.matrix,l=c[0],p=c[1],m=c[2],v=c[3],y=c[4],E=c[5],C=1/(l*v+m*-p);return h.x=v*C*u+-m*C*r+(E*m-y*v)*C,h.y=l*C*r+-p*C*u+(-E*l+y*p)*C,h},setQuad:function(u,r,h,c,l,p){l===void 0&&(l=!1),p===void 0&&(p=this.quad);var m=this.matrix,v=m[0],y=m[1],E=m[2],C=m[3],w=m[4],A=m[5],M=u*v+r*E+w,R=u*y+r*C+A,P=u*v+c*E+w,b=u*y+c*C+A,F=h*v+c*E+w,I=h*y+c*C+A,L=h*v+r*E+w,D=h*y+r*C+A;if(l){var O=Math.floor(M+.5),z=Math.floor(R+.5),_=O-M,X=z-R;p[0]=O,p[1]=z,p[2]=P+_,p[3]=b+X,p[4]=F+_,p[5]=I+X,p[6]=L+_,p[7]=D+X}else p[0]=M,p[1]=R,p[2]=P,p[3]=b,p[4]=F,p[5]=I,p[6]=L,p[7]=D;return p},getX:function(u,r){return u*this.a+r*this.c+this.e},getY:function(u,r){return u*this.b+r*this.d+this.f},getXRound:function(u,r,h){var c=this.getX(u,r);return h&&(c=Math.floor(c+.5)),c},getYRound:function(u,r,h){var c=this.getY(u,r);return h&&(c=Math.floor(c+.5)),c},getCSSMatrix:function(){var u=this.matrix;return"matrix("+u[0]+","+u[1]+","+u[2]+","+u[3]+","+u[4]+","+u[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});s.exports=o}),59715:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(a){a?(this._visible=!0,this.renderFlags|=T):(this._visible=!1,this.renderFlags&=~T)}},setVisible:function(a){return this.visible=a,this}};s.exports=e}),31401:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Alpha:e(16005),AlphaSingle:e(88509),BlendMode:e(90065),ComputedSize:e(94215),Crop:e(61683),Depth:e(89272),Flip:e(54434),FX:e(47059),GetBounds:e(8004),Mask:e(8573),Origin:e(27387),PathFollower:e(37640),Pipeline:e(72699),PostPipeline:e(17581),ScrollFactor:e(80227),Size:e(16736),Texture:e(37726),TextureCrop:e(79812),Tint:e(27472),ToJSON:e(53774),Transform:e(16901),TransformMatrix:e(61340),Visible:e(59715)}}),31559:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),g=e(10312),f=e(83419),o=e(31401),u=e(51708),r=e(95643),h=e(87841),c=e(29959),l=e(36899),p=e(26099),m=new o.TransformMatrix,v=new f({Extends:r,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.PostPipeline,o.Transform,o.Visible,c],initialize:function(E,C,w,A){r.call(this,E,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this._sortKey="",this._sysEvents=E.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(C,w),this.setBlendMode(g.SKIP_CHECK),A&&this.add(A)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(y){return y===void 0&&(y=!0),this.exclusive=y,this},getBounds:function(y){if(y===void 0&&(y=new h),y.setTo(this.x,this.y,0,0),this.parentContainer){var E=this.parentContainer.getBoundsTransformMatrix(),C=E.transformPoint(this.x,this.y);y.setTo(C.x,C.y,0,0)}if(this.list.length>0){var w=this.list,A=new h,M=!1;y.setEmpty();for(var R=0;R<w.length;R++){var P=w[R];P.getBounds&&(P.getBounds(A),M?l(A,y,y):(y.setTo(A.x,A.y,A.width,A.height),M=!0))}}return y},addHandler:function(y){y.once(u.DESTROY,this.onChildDestroyed,this),this.exclusive&&(y.parentContainer&&y.parentContainer.remove(y),y.parentContainer=this,y.removeFromDisplayList(),y.addedToScene())},removeHandler:function(y){y.off(u.DESTROY,this.remove,this),this.exclusive&&(y.parentContainer=null,y.removedFromScene(),y.addToDisplayList())},pointToContainer:function(y,E){E===void 0&&(E=new p),this.parentContainer?this.parentContainer.pointToContainer(y,E):(E.x=y.x,E.y=y.y);var C=m;return C.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),C.invert(),C.transformPoint(y.x,y.y,E),E},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(m,this.localTransform)},add:function(y){return a.Add(this.list,y,this.maxSize,this.addHandler,this),this},addAt:function(y,E){return a.AddAt(this.list,y,E,this.maxSize,this.addHandler,this),this},getAt:function(y){return this.list[y]},getIndex:function(y){return this.list.indexOf(y)},sort:function(y,E){return y?(E===void 0&&(E=function(C,w){return C[y]-w[y]}),a.StableSort(this.list,E),this):this},getByName:function(y){return a.GetFirst(this.list,"name",y)},getRandom:function(y,E){return a.GetRandom(this.list,y,E)},getFirst:function(y,E,C,w){return a.GetFirst(this.list,y,E,C,w)},getAll:function(y,E,C,w){return a.GetAll(this.list,y,E,C,w)},count:function(y,E,C,w){return a.CountAllMatching(this.list,y,E,C,w)},swap:function(y,E){return a.Swap(this.list,y,E),this},moveTo:function(y,E){return a.MoveTo(this.list,y,E),this},moveAbove:function(y,E){return a.MoveAbove(this.list,y,E),this},moveBelow:function(y,E){return a.MoveBelow(this.list,y,E),this},remove:function(y,E){var C=a.Remove(this.list,y,this.removeHandler,this);if(E&&C){Array.isArray(C)||(C=[C]);for(var w=0;w<C.length;w++)C[w].destroy()}return this},removeAt:function(y,E){var C=a.RemoveAt(this.list,y,this.removeHandler,this);return E&&C&&C.destroy(),this},removeBetween:function(y,E,C){var w=a.RemoveBetween(this.list,y,E,this.removeHandler,this);if(C)for(var A=0;A<w.length;A++)w[A].destroy();return this},removeAll:function(y){var E=this.list;if(y){for(var C=0;C<E.length;C++)E[C]&&E[C].scene&&(E[C].off(u.DESTROY,this.onChildDestroyed,this),E[C].destroy());this.list=[]}else a.RemoveBetween(E,0,E.length,this.removeHandler,this);return this},bringToTop:function(y){return a.BringToTop(this.list,y),this},sendToBack:function(y){return a.SendToBack(this.list,y),this},moveUp:function(y){return a.MoveUp(this.list,y),this},moveDown:function(y){return a.MoveDown(this.list,y),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(y,E,C){var w=a.Replace(this.list,y,E);return w&&(this.addHandler(E),this.removeHandler(y),C&&y.destroy()),this},exists:function(y){return this.list.indexOf(y)>-1},setAll:function(y,E,C,w){return a.SetAll(this.list,y,E,C,w),this},each:function(y,E){var C=[null],w,A=this.list.slice(),M=A.length;for(w=2;w<arguments.length;w++)C.push(arguments[w]);for(w=0;w<M;w++)C[0]=A[w],y.apply(E,C);return this},iterate:function(y,E){var C=[null],w;for(w=2;w<arguments.length;w++)C.push(arguments[w]);for(w=0;w<this.list.length;w++)C[0]=this.list[w],y.apply(E,C);return this},setScrollFactor:function(y,E,C){return E===void 0&&(E=y),C===void 0&&(C=!1),this.scrollFactorX=y,this.scrollFactorY=E,C&&(a.SetAll(this.list,"scrollFactorX",y),a.SetAll(this.list,"scrollFactorY",E)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(y){a.Remove(this.list,y),this.exclusive&&(y.parentContainer=null,y.removedFromScene())}});s.exports=v}),53584:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g.addToRenderList(a);var o=a.list;if(o.length!==0){var u=a.localTransform;f?(u.loadIdentity(),u.multiply(f),u.translate(a.x,a.y),u.rotate(a.rotation),u.scale(a.scaleX,a.scaleY)):u.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var r=a.blendMode!==-1;r||e.setBlendMode(0);var h=a._alpha,c=a.scrollFactorX,l=a.scrollFactorY;a.mask&&a.mask.preRenderCanvas(e,null,g);for(var p=0;p<o.length;p++){var m=o[p];if(m.willRender(g)){var v=m.alpha,y=m.scrollFactorX,E=m.scrollFactorY;!r&&m.blendMode!==e.currentBlendMode&&e.setBlendMode(m.blendMode),m.setScrollFactor(y*c,E*l),m.setAlpha(v*h),m.renderCanvas(e,m,g,u),m.setAlpha(v),m.setScrollFactor(y,E)}}a.mask&&a.mask.postRenderCanvas(e)}};s.exports=T}),77143:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(31559),f=e(44603),o=e(23568),u=e(95540);f.register("container",function(r,h){r===void 0&&(r={});var c=o(r,"x",0),l=o(r,"y",0),p=u(r,"children",null),m=new g(this.scene,c,l,p);return h!==void 0&&(r.add=h),a(this.scene,m,r),m})}),24961:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31559),g=e(39429);g.register("container",function(f,o,u){return this.displayList.add(new a(this.scene,f,o,u))})}),29959:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(72249),f=e(53584),s.exports={renderWebGL:g,renderCanvas:f}}),72249:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g.addToRenderList(a);var o=a.list,u=o.length;if(u!==0){var r=a.localTransform;f?(r.loadIdentity(),r.multiply(f),r.translate(a.x,a.y),r.rotate(a.rotation),r.scale(a.scaleX,a.scaleY)):r.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),e.pipelines.preBatch(a);var h=a.blendMode!==-1;h||e.setBlendMode(0);for(var c=a.alpha,l=a.scrollFactorX,p=a.scrollFactorY,m=0;m<u;m++){var v=o[m];if(v.willRender(g)){var y,E,C,w;if(v.alphaTopLeft!==void 0)y=v.alphaTopLeft,E=v.alphaTopRight,C=v.alphaBottomLeft,w=v.alphaBottomRight;else{var A=v.alpha;y=A,E=A,C=A,w=A}var M=v.scrollFactorX,R=v.scrollFactorY;!h&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var P=v.mask;P&&P.preRenderWebGL(e,v,g);var b=v.type;b!==e.currentType&&(e.newType=!0,e.currentType=b),e.nextTypeMatch=m<u-1?o[m+1].type===e.currentType:!1,v.setScrollFactor(M*l,R*p),v.setAlpha(y*c,E*c,C*c,w*c),v.renderWebGL(e,v,g,r,a),v.setAlpha(y,E,C,w),v.setScrollFactor(M,R),P&&P.postRenderWebGL(e,g),e.newType=!1}}e.pipelines.postBatch(a)}};s.exports=T}),47407:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}),3069:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(441),o=e(95643),u=e(41212),r=e(35846),h=e(44594),c=e(61369),l=new a({Extends:o,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Origin,g.ScrollFactor,g.Transform,g.Visible,f],initialize:function(m,v,y,E,C,w){if(o.call(this,m,"DOMElement"),this.parent=m.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=m.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(v,y),typeof E=="string"?E[0]==="#"?this.setElement(E.substr(1),C,w):this.createElement(E,C,w):E&&this.setElement(E,C,w),m.sys.events.on(h.SLEEP,this.handleSceneEvent,this),m.sys.events.on(h.WAKE,this.handleSceneEvent,this),m.sys.events.on(h.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(p){var m=this.node,v=m.style;m&&(v.display=p.settings.visible?"block":"none")},setSkew:function(p,m){return p===void 0&&(p=0),m===void 0&&(m=p),this.skewX=p,this.skewY=m,this},setPerspective:function(p){return this.parent.style.perspective=p+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(p){this.parent.style.perspective=p+"px"}},addListener:function(p){if(this.node){p=p.split(" ");for(var m=0;m<p.length;m++)this.node.addEventListener(p[m],this.handler,!1)}return this},removeListener:function(p){if(this.node){p=p.split(" ");for(var m=0;m<p.length;m++)this.node.removeEventListener(p[m],this.handler)}return this},dispatchNativeEvent:function(p){this.emit(p.type,p)},createElement:function(p,m,v){return this.setElement(document.createElement(p),m,v)},setElement:function(p,m,v){this.removeElement();var y;if(typeof p=="string"?(p[0]==="#"&&(p=p.substr(1)),y=document.getElementById(p)):typeof p=="object"&&p.nodeType===1&&(y=p),!y)return this;if(this.node=y,m&&u(m))for(var E in m)y.style[E]=m[E];else typeof m=="string"&&(y.style=m);return y.style.zIndex="0",y.style.display="inline",y.style.position="absolute",y.phaser=this,this.parent.appendChild(y),v&&(y.innerText=v),this.updateSize()},createFromCache:function(p,m){var v=this.cache.get(p);return v&&this.createFromHTML(v,m),this},createFromHTML:function(p,m){m===void 0&&(m="div"),this.removeElement();var v=document.createElement(m);return this.node=v,v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent.appendChild(v),v.innerHTML=p,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var p=this.node;return this.width=p.clientWidth,this.height=p.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(p,m){if(this.node){for(var v=this.node.querySelectorAll("*"),y=0;y<v.length;y++)if(v[y][p]===m)return v[y]}return null},getChildByID:function(p){return this.getChildByProperty("id",p)},getChildByName:function(p){return this.getChildByProperty("name",p)},setClassName:function(p){return this.node&&(this.node.className=p,this.updateSize()),this},setText:function(p){return this.node&&(this.node.innerText=p,this.updateSize()),this},setHTML:function(p){return this.node&&(this.node.innerHTML=p,this.updateSize()),this},preRender:function(){var p=this.parentContainer,m=this.node;m&&p&&!p.willRender()&&(m.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(h.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(h.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(h.PRE_RENDER,this.preRender,this)}});s.exports=l}),49381:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47407),g=e(95643),f=e(61340),o=new f,u=new f,r=new f,h=function(c,l,p,m){if(l.node){var v=l.node.style,y=l.scene.sys.settings;if(!v||!y.visible||g.RENDER_MASK!==l.renderFlags||l.cameraFilter!==0&&l.cameraFilter&p.id||l.parentContainer&&!l.parentContainer.willRender()){v.display="none";return}var E=l.parentContainer,C=p.alpha*l.alpha;E&&(C*=E.alpha);var w=o,A=u,M=r,R=0,P=0,b="0%",F="0%";m?(R=l.width*l.scaleX*l.originX,P=l.height*l.scaleY*l.originY,A.applyITRS(l.x-R,l.y-P,l.rotation,l.scaleX,l.scaleY),w.copyFrom(p.matrix),w.multiplyWithOffset(m,-p.scrollX*l.scrollFactorX,-p.scrollY*l.scrollFactorY),A.e=l.x-R,A.f=l.y-P,w.multiply(A,M)):(R=l.width*l.originX,P=l.height*l.originY,A.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),w.copyFrom(p.matrix),b=100*l.originX+"%",F=100*l.originY+"%",A.e-=p.scrollX*l.scrollFactorX,A.f-=p.scrollY*l.scrollFactorY,w.multiply(A,M),M.e-=R,M.f-=P),l.transformOnly||(v.display="block",v.opacity=C,v.zIndex=l._depth,v.pointerEvents=l.pointerEvents,v.mixBlendMode=a[l._blendMode]),v.transform=M.getCSSMatrix()+" skew("+l.skewX+"rad, "+l.skewY+"rad) rotate3d("+l.rotate3d.x+","+l.rotate3d.y+","+l.rotate3d.z+","+l.rotate3d.w+l.rotate3dAngle+")",v.transformOrigin=b+" "+F}};s.exports=h}),2611:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3069),g=e(39429);g.register("dom",function(f,o,u,r,h){var c=new a(this.scene,f,o,u,r,h);return this.displayList.add(c),c})}),441:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(49381),f=e(49381),s.exports={renderWebGL:g,renderCanvas:f}}),62980:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addedtoscene"}),41337:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),44947:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removedfromscene"}),49358:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),35163:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="created"}),97249:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="error"}),19483:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="locked"}),56059:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="loop"}),26772:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="metadata"}),64437:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="playing"}),83411:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="play"}),75780:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="seeked"}),67799:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="seeking"}),63500:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stalled"}),55541:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stop"}),53208:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="textureready"}),4992:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="unlocked"}),12:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="unsupported"}),51708:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADDED_TO_SCENE:e(62980),DESTROY:e(41337),REMOVED_FROM_SCENE:e(44947),VIDEO_COMPLETE:e(49358),VIDEO_CREATED:e(35163),VIDEO_ERROR:e(97249),VIDEO_LOCKED:e(19483),VIDEO_LOOP:e(56059),VIDEO_METADATA:e(26772),VIDEO_PLAY:e(83411),VIDEO_PLAYING:e(64437),VIDEO_SEEKED:e(75780),VIDEO_SEEKING:e(67799),VIDEO_STALLED:e(63500),VIDEO_STOP:e(55541),VIDEO_TEXTURE:e(53208),VIDEO_UNLOCKED:e(4992),VIDEO_UNSUPPORTED:e(12)}}),42421:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(95643),o=e(64993),u=new a({Extends:f,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.Origin,g.ScrollFactor,g.Size,g.Texture,g.Tint,g.Transform,g.Visible,o],initialize:function(h){f.call(this,h,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});s.exports=u}),70217:(()=>{}),56315:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42421),g=e(39429);g.register("extern",function(){var f=new a(this.scene);return this.displayList.add(f),f})}),64993:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(80287),f=e(70217),s.exports={renderWebGL:g,renderCanvas:f}}),80287:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=function(f,o,u,r){f.pipelines.clear();var h=a(o,u,r).calc;o.render.call(o,f,u,h),f.pipelines.rebind()};s.exports=g}),85592:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}}),43831:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71911),g=e(83419),f=e(85592),o=e(31401),u=e(8497),r=e(95643),h=e(95540),c=e(35154),l=e(36383),p=e(84503),m=new g({Extends:r,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.PostPipeline,o.Transform,o.Visible,o.ScrollFactor,p],initialize:function(y,E){var C=c(E,"x",0),w=c(E,"y",0);r.call(this,y,"Graphics"),this.setPosition(C,w),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(E)},setDefaultStyles:function(v){return c(v,"lineStyle",null)&&(this.defaultStrokeWidth=c(v,"lineStyle.width",1),this.defaultStrokeColor=c(v,"lineStyle.color",16777215),this.defaultStrokeAlpha=c(v,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),c(v,"fillStyle",null)&&(this.defaultFillColor=c(v,"fillStyle.color",16777215),this.defaultFillAlpha=c(v,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(v,y,E){return E===void 0&&(E=1),this.commandBuffer.push(f.LINE_STYLE,v,y,E),this._lineWidth=v,this},fillStyle:function(v,y){return y===void 0&&(y=1),this.commandBuffer.push(f.FILL_STYLE,v,y),this},fillGradientStyle:function(v,y,E,C,w,A,M,R){return w===void 0&&(w=1),A===void 0&&(A=w),M===void 0&&(M=w),R===void 0&&(R=w),this.commandBuffer.push(f.GRADIENT_FILL_STYLE,w,A,M,R,v,y,E,C),this},lineGradientStyle:function(v,y,E,C,w,A){return A===void 0&&(A=1),this.commandBuffer.push(f.GRADIENT_LINE_STYLE,v,A,y,E,C,w),this},beginPath:function(){return this.commandBuffer.push(f.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(f.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(f.FILL_PATH),this},fill:function(){return this.commandBuffer.push(f.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(f.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(f.STROKE_PATH),this},fillCircleShape:function(v){return this.fillCircle(v.x,v.y,v.radius)},strokeCircleShape:function(v){return this.strokeCircle(v.x,v.y,v.radius)},fillCircle:function(v,y,E){return this.beginPath(),this.arc(v,y,E,0,l.PI2),this.fillPath(),this},strokeCircle:function(v,y,E){return this.beginPath(),this.arc(v,y,E,0,l.PI2),this.strokePath(),this},fillRectShape:function(v){return this.fillRect(v.x,v.y,v.width,v.height)},strokeRectShape:function(v){return this.strokeRect(v.x,v.y,v.width,v.height)},fillRect:function(v,y,E,C){return this.commandBuffer.push(f.FILL_RECT,v,y,E,C),this},strokeRect:function(v,y,E,C){var w=this._lineWidth/2,A=v-w,M=v+w;return this.beginPath(),this.moveTo(v,y),this.lineTo(v,y+C),this.strokePath(),this.beginPath(),this.moveTo(v+E,y),this.lineTo(v+E,y+C),this.strokePath(),this.beginPath(),this.moveTo(A,y),this.lineTo(M+E,y),this.strokePath(),this.beginPath(),this.moveTo(A,y+C),this.lineTo(M+E,y+C),this.strokePath(),this},fillRoundedRect:function(v,y,E,C,w){w===void 0&&(w=20);var A=w,M=w,R=w,P=w;typeof w!="number"&&(A=h(w,"tl",20),M=h(w,"tr",20),R=h(w,"bl",20),P=h(w,"br",20));var b=A>=0,F=M>=0,I=R>=0,L=P>=0;return A=Math.abs(A),M=Math.abs(M),R=Math.abs(R),P=Math.abs(P),this.beginPath(),this.moveTo(v+A,y),this.lineTo(v+E-M,y),F?this.arc(v+E-M,y+M,M,-l.TAU,0):this.arc(v+E,y,M,Math.PI,l.TAU,!0),this.lineTo(v+E,y+C-P),L?this.arc(v+E-P,y+C-P,P,0,l.TAU):this.arc(v+E,y+C,P,-l.TAU,Math.PI,!0),this.lineTo(v+R,y+C),I?this.arc(v+R,y+C-R,R,l.TAU,Math.PI):this.arc(v,y+C,R,0,-l.TAU,!0),this.lineTo(v,y+A),b?this.arc(v+A,y+A,A,-Math.PI,-l.TAU):this.arc(v,y,A,l.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(v,y,E,C,w){w===void 0&&(w=20);var A=w,M=w,R=w,P=w,b=Math.min(E,C)/2;typeof w!="number"&&(A=h(w,"tl",20),M=h(w,"tr",20),R=h(w,"bl",20),P=h(w,"br",20));var F=A>=0,I=M>=0,L=R>=0,D=P>=0;return A=Math.min(Math.abs(A),b),M=Math.min(Math.abs(M),b),R=Math.min(Math.abs(R),b),P=Math.min(Math.abs(P),b),this.beginPath(),this.moveTo(v+A,y),this.lineTo(v+E-M,y),this.moveTo(v+E-M,y),I?this.arc(v+E-M,y+M,M,-l.TAU,0):this.arc(v+E,y,M,Math.PI,l.TAU,!0),this.lineTo(v+E,y+C-P),this.moveTo(v+E,y+C-P),D?this.arc(v+E-P,y+C-P,P,0,l.TAU):this.arc(v+E,y+C,P,-l.TAU,Math.PI,!0),this.lineTo(v+R,y+C),this.moveTo(v+R,y+C),L?this.arc(v+R,y+C-R,R,l.TAU,Math.PI):this.arc(v,y+C,R,0,-l.TAU,!0),this.lineTo(v,y+A),this.moveTo(v,y+A),F?this.arc(v+A,y+A,A,-Math.PI,-l.TAU):this.arc(v,y,A,l.TAU,0,!0),this.strokePath(),this},fillPointShape:function(v,y){return this.fillPoint(v.x,v.y,y)},fillPoint:function(v,y,E){return!E||E<1?E=1:(v-=E/2,y-=E/2),this.commandBuffer.push(f.FILL_RECT,v,y,E,E),this},fillTriangleShape:function(v){return this.fillTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},strokeTriangleShape:function(v){return this.strokeTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},fillTriangle:function(v,y,E,C,w,A){return this.commandBuffer.push(f.FILL_TRIANGLE,v,y,E,C,w,A),this},strokeTriangle:function(v,y,E,C,w,A){return this.commandBuffer.push(f.STROKE_TRIANGLE,v,y,E,C,w,A),this},strokeLineShape:function(v){return this.lineBetween(v.x1,v.y1,v.x2,v.y2)},lineBetween:function(v,y,E,C){return this.beginPath(),this.moveTo(v,y),this.lineTo(E,C),this.strokePath(),this},lineTo:function(v,y){return this.commandBuffer.push(f.LINE_TO,v,y),this},moveTo:function(v,y){return this.commandBuffer.push(f.MOVE_TO,v,y),this},strokePoints:function(v,y,E,C){y===void 0&&(y=!1),E===void 0&&(E=!1),C===void 0&&(C=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var w=1;w<C;w++)this.lineTo(v[w].x,v[w].y);return y&&this.lineTo(v[0].x,v[0].y),E&&this.closePath(),this.strokePath(),this},fillPoints:function(v,y,E,C){y===void 0&&(y=!1),E===void 0&&(E=!1),C===void 0&&(C=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var w=1;w<C;w++)this.lineTo(v[w].x,v[w].y);return y&&this.lineTo(v[0].x,v[0].y),E&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(v,y){y===void 0&&(y=32);var E=v.getPoints(y);return this.strokePoints(E,!0)},strokeEllipse:function(v,y,E,C,w){w===void 0&&(w=32);var A=new u(v,y,E,C),M=A.getPoints(w);return this.strokePoints(M,!0)},fillEllipseShape:function(v,y){y===void 0&&(y=32);var E=v.getPoints(y);return this.fillPoints(E,!0)},fillEllipse:function(v,y,E,C,w){w===void 0&&(w=32);var A=new u(v,y,E,C),M=A.getPoints(w);return this.fillPoints(M,!0)},arc:function(v,y,E,C,w,A,M){return A===void 0&&(A=!1),M===void 0&&(M=0),this.commandBuffer.push(f.ARC,v,y,E,C,w,A,M),this},slice:function(v,y,E,C,w,A,M){return A===void 0&&(A=!1),M===void 0&&(M=0),this.commandBuffer.push(f.BEGIN_PATH),this.commandBuffer.push(f.MOVE_TO,v,y),this.commandBuffer.push(f.ARC,v,y,E,C,w,A,M),this.commandBuffer.push(f.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(f.SAVE),this},restore:function(){return this.commandBuffer.push(f.RESTORE),this},translateCanvas:function(v,y){return this.commandBuffer.push(f.TRANSLATE,v,y),this},scaleCanvas:function(v,y){return this.commandBuffer.push(f.SCALE,v,y),this},rotateCanvas:function(v){return this.commandBuffer.push(f.ROTATE,v),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(v,y,E){var C=this.scene.sys,w=C.game.renderer;y===void 0&&(y=C.scale.width),E===void 0&&(E=C.scale.height),m.TargetCamera.setScene(this.scene),m.TargetCamera.setViewport(0,0,y,E),m.TargetCamera.scrollX=this.x,m.TargetCamera.scrollY=this.y;var A,M,R={willReadFrequently:!0};if(typeof v=="string")if(C.textures.exists(v)){A=C.textures.get(v);var P=A.getSourceImage();P instanceof HTMLCanvasElement&&(M=P.getContext("2d",R))}else A=C.textures.createCanvas(v,y,E),M=A.getSourceImage().getContext("2d",R);else v instanceof HTMLCanvasElement&&(M=v.getContext("2d",R));return M&&(this.renderCanvas(w,this,m.TargetCamera,null,M,!1),A&&A.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});m.TargetCamera=new a,s.exports=m}),32768:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85592),g=e(20926),f=function(o,u,r,h,c,l){var p=u.commandBuffer,m=p.length,v=c||o.currentContext;if(!(m===0||!g(o,v,u,r,h))){r.addToRenderList(u);var y=1,E=1,C=0,w=0,A=1,M=0,R=0,P=0;v.beginPath();for(var b=0;b<m;++b){var F=p[b];switch(F){case a.ARC:v.arc(p[b+1],p[b+2],p[b+3],p[b+4],p[b+5],p[b+6]),b+=7;break;case a.LINE_STYLE:A=p[b+1],C=p[b+2],y=p[b+3],M=(C&16711680)>>>16,R=(C&65280)>>>8,P=C&255,v.strokeStyle="rgba("+M+","+R+","+P+","+y+")",v.lineWidth=A,b+=3;break;case a.FILL_STYLE:w=p[b+1],E=p[b+2],M=(w&16711680)>>>16,R=(w&65280)>>>8,P=w&255,v.fillStyle="rgba("+M+","+R+","+P+","+E+")",b+=2;break;case a.BEGIN_PATH:v.beginPath();break;case a.CLOSE_PATH:v.closePath();break;case a.FILL_PATH:l||v.fill();break;case a.STROKE_PATH:l||v.stroke();break;case a.FILL_RECT:l?v.rect(p[b+1],p[b+2],p[b+3],p[b+4]):v.fillRect(p[b+1],p[b+2],p[b+3],p[b+4]),b+=4;break;case a.FILL_TRIANGLE:v.beginPath(),v.moveTo(p[b+1],p[b+2]),v.lineTo(p[b+3],p[b+4]),v.lineTo(p[b+5],p[b+6]),v.closePath(),l||v.fill(),b+=6;break;case a.STROKE_TRIANGLE:v.beginPath(),v.moveTo(p[b+1],p[b+2]),v.lineTo(p[b+3],p[b+4]),v.lineTo(p[b+5],p[b+6]),v.closePath(),l||v.stroke(),b+=6;break;case a.LINE_TO:v.lineTo(p[b+1],p[b+2]),b+=2;break;case a.MOVE_TO:v.moveTo(p[b+1],p[b+2]),b+=2;break;case a.LINE_FX_TO:v.lineTo(p[b+1],p[b+2]),b+=5;break;case a.MOVE_FX_TO:v.moveTo(p[b+1],p[b+2]),b+=5;break;case a.SAVE:v.save();break;case a.RESTORE:v.restore();break;case a.TRANSLATE:v.translate(p[b+1],p[b+2]),b+=2;break;case a.SCALE:v.scale(p[b+1],p[b+2]),b+=2;break;case a.ROTATE:v.rotate(p[b+1]),b+=1;break;case a.GRADIENT_FILL_STYLE:b+=5;break;case a.GRADIENT_LINE_STYLE:b+=6;break}}v.restore()}};s.exports=f}),87079:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),g=e(43831);a.register("graphics",function(f,o){f===void 0&&(f={}),o!==void 0&&(f.add=o);var u=new g(this.scene,f);return f.add&&this.scene.sys.displayList.add(u),u})}),1201:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43831),g=e(39429);g.register("graphics",function(f){return this.displayList.add(new a(this.scene,f))})}),84503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(77545),f=e(32768),f=e(32768),s.exports={renderWebGL:g,renderCanvas:f}}),77545:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85592),g=e(91296),f=e(61340),o=e(70554),u=function(p,m,v){this.x=p,this.y=m,this.width=v},r=function(p,m,v){this.points=[],this.pointsLength=1,this.points[0]=new u(p,m,v)},h=[],c=new f,l=function(p,m,v,y){if(m.commandBuffer.length!==0){v.addToRenderList(m);var E=p.pipelines.set(m.pipeline,m);p.pipelines.preBatch(m);for(var C=g(m,v,y).calc,w=c.loadIdentity(),A=m.commandBuffer,M=v.alpha*m.alpha,R=1,P=E.fillTint,b=E.strokeTint,F=0,I=0,L=0,D=.01,O=Math.PI*2,z,_=[],X=0,H=!0,U=null,G=o.getTintAppendFloatAlpha,N=0;N<A.length;N++)switch(z=A[N],z){case a.BEGIN_PATH:{_.length=0,U=null,H=!0;break}case a.CLOSE_PATH:{H=!1,U&&U.points.length&&U.points.push(U.points[0]);break}case a.FILL_PATH:{for(X=0;X<_.length;X++)E.batchFillPath(_[X].points,w,C);break}case a.STROKE_PATH:{for(X=0;X<_.length;X++)E.batchStrokePath(_[X].points,R,H,w,C);break}case a.LINE_STYLE:{R=A[++N];var W=A[++N],V=A[++N]*M,$=G(W,V);b.TL=$,b.TR=$,b.BL=$,b.BR=$;break}case a.FILL_STYLE:{var j=A[++N],k=A[++N]*M,Q=G(j,k);P.TL=Q,P.TR=Q,P.BL=Q,P.BR=Q;break}case a.GRADIENT_FILL_STYLE:{var et=A[++N]*M,at=A[++N]*M,q=A[++N]*M,ft=A[++N]*M;P.TL=G(A[++N],et),P.TR=G(A[++N],at),P.BL=G(A[++N],q),P.BR=G(A[++N],ft);break}case a.GRADIENT_LINE_STYLE:{R=A[++N];var vt=A[++N]*M;b.TL=G(A[++N],vt),b.TR=G(A[++N],vt),b.BL=G(A[++N],vt),b.BR=G(A[++N],vt);break}case a.ARC:{var Tt=0,ct=A[++N],Ut=A[++N],yt=A[++N],it=A[++N],Z=A[++N],lt=A[++N],pt=A[++N];for(Z-=it,lt?Z<-O?Z=-O:Z>0&&(Z=-O+Z%O):Z>O?Z=O:Z<0&&(Z=O+Z%O),U===null&&(U=new r(ct+Math.cos(it)*yt,Ut+Math.sin(it)*yt,R),_.push(U),Tt+=D);Tt<1+pt;)L=Z*Tt+it,F=ct+Math.cos(L)*yt,I=Ut+Math.sin(L)*yt,U.points.push(new u(F,I,R)),Tt+=D;L=Z+it,F=ct+Math.cos(L)*yt,I=Ut+Math.sin(L)*yt,U.points.push(new u(F,I,R));break}case a.FILL_RECT:{E.batchFillRect(A[++N],A[++N],A[++N],A[++N],w,C);break}case a.FILL_TRIANGLE:{E.batchFillTriangle(A[++N],A[++N],A[++N],A[++N],A[++N],A[++N],w,C);break}case a.STROKE_TRIANGLE:{E.batchStrokeTriangle(A[++N],A[++N],A[++N],A[++N],A[++N],A[++N],R,w,C);break}case a.LINE_TO:{U!==null?U.points.push(new u(A[++N],A[++N],R)):(U=new r(A[++N],A[++N],R),_.push(U));break}case a.MOVE_TO:{U=new r(A[++N],A[++N],R),_.push(U);break}case a.SAVE:{h.push(w.copyToArray());break}case a.RESTORE:{w.copyFromArray(h.pop());break}case a.TRANSLATE:{ct=A[++N],Ut=A[++N],w.translate(ct,Ut);break}case a.SCALE:{ct=A[++N],Ut=A[++N],w.scale(ct,Ut);break}case a.ROTATE:{w.rotate(A[++N]);break}}p.pipelines.postBatch(m)}};s.exports=l}),26479:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61061),g=e(83419),f=e(51708),o=e(50792),u=e(46710),r=e(95540),h=e(35154),c=e(97022),l=e(41212),p=e(88492),m=e(35072),v=e(68287),y=new g({Extends:o,initialize:function(C,w,A){o.call(this),A?w&&!Array.isArray(w)&&(w=[w]):Array.isArray(w)?l(w[0])&&(A=w,w=null):l(w)&&(A=w,w=null),this.scene=C,this.children=new m,this.isParent=!0,this.type="Group",this.classType=r(A,"classType",v),this.name=r(A,"name",""),this.active=r(A,"active",!0),this.maxSize=r(A,"maxSize",-1),this.defaultKey=r(A,"defaultKey",null),this.defaultFrame=r(A,"defaultFrame",null),this.runChildUpdate=r(A,"runChildUpdate",!1),this.createCallback=r(A,"createCallback",null),this.removeCallback=r(A,"removeCallback",null),this.createMultipleCallback=r(A,"createMultipleCallback",null),this.internalCreateCallback=r(A,"internalCreateCallback",null),this.internalRemoveCallback=r(A,"internalRemoveCallback",null),w&&this.addMultiple(w),A&&this.createMultiple(A),this.on(f.ADDED_TO_SCENE,this.addedToScene,this),this.on(f.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(E,C,w,A,M,R){if(E===void 0&&(E=0),C===void 0&&(C=0),w===void 0&&(w=this.defaultKey),A===void 0&&(A=this.defaultFrame),M===void 0&&(M=!0),R===void 0&&(R=!0),this.isFull())return null;var P=new this.classType(this.scene,E,C,w,A);return P.addToDisplayList(this.scene.sys.displayList),P.addToUpdateList(),P.visible=M,P.setActive(R),this.add(P),P},createMultiple:function(E){if(this.isFull())return[];Array.isArray(E)||(E=[E]);var C=[];if(E[0].key)for(var w=0;w<E.length;w++){var A=this.createFromConfig(E[w]);C=C.concat(A)}return C},createFromConfig:function(E){if(this.isFull())return[];this.classType=r(E,"classType",this.classType);var C=r(E,"key",void 0),w=r(E,"frame",null),A=r(E,"visible",!0),M=r(E,"active",!0),R=[];if(C===void 0)return R;Array.isArray(C)||(C=[C]),Array.isArray(w)||(w=[w]);var P=r(E,"repeat",0),b=r(E,"randomKey",!1),F=r(E,"randomFrame",!1),I=r(E,"yoyo",!1),L=r(E,"quantity",!1),D=r(E,"frameQuantity",1),O=r(E,"max",0),z=p(C,w,{max:O,qty:L||D,random:b,randomB:F,repeat:P,yoyo:I});E.createCallback&&(this.createCallback=E.createCallback),E.removeCallback&&(this.removeCallback=E.removeCallback),E.internalCreateCallback&&(this.internalCreateCallback=E.internalCreateCallback),E.internalRemoveCallback&&(this.internalRemoveCallback=E.internalRemoveCallback);for(var _=0;_<z.length;_++){var X=this.create(0,0,z[_].a,z[_].b,A,M);if(!X)break;R.push(X)}if(c(E,"setXY")){var H=h(E,"setXY.x",0),U=h(E,"setXY.y",0),G=h(E,"setXY.stepX",0),N=h(E,"setXY.stepY",0);a.SetXY(R,H,U,G,N)}if(c(E,"setRotation")){var W=h(E,"setRotation.value",0),V=h(E,"setRotation.step",0);a.SetRotation(R,W,V)}if(c(E,"setScale")){var $=h(E,"setScale.x",1),j=h(E,"setScale.y",$),k=h(E,"setScale.stepX",0),Q=h(E,"setScale.stepY",0);a.SetScale(R,$,j,k,Q)}if(c(E,"setOrigin")){var et=h(E,"setOrigin.x",.5),at=h(E,"setOrigin.y",et),q=h(E,"setOrigin.stepX",0),ft=h(E,"setOrigin.stepY",0);a.SetOrigin(R,et,at,q,ft)}if(c(E,"setAlpha")){var vt=h(E,"setAlpha.value",1),Tt=h(E,"setAlpha.step",0);a.SetAlpha(R,vt,Tt)}if(c(E,"setDepth")){var ct=h(E,"setDepth.value",0),Ut=h(E,"setDepth.step",0);a.SetDepth(R,ct,Ut)}if(c(E,"setScrollFactor")){var yt=h(E,"setScrollFactor.x",1),it=h(E,"setScrollFactor.y",yt),Z=h(E,"setScrollFactor.stepX",0),lt=h(E,"setScrollFactor.stepY",0);a.SetScrollFactor(R,yt,it,Z,lt)}var pt=r(E,"hitArea",null),Pt=r(E,"hitAreaCallback",null);pt&&a.SetHitArea(R,pt,Pt);var wt=r(E,"gridAlign",!1);return wt&&a.GridAlign(R,wt),this.createMultipleCallback&&this.createMultipleCallback.call(this,R),R},preUpdate:function(E,C){if(!(!this.runChildUpdate||this.children.size===0))for(var w=this.children.entries.slice(),A=0;A<w.length;A++){var M=w[A];M.active&&M.update(E,C)}},add:function(E,C){return C===void 0&&(C=!1),this.isFull()?this:(this.children.set(E),this.internalCreateCallback&&this.internalCreateCallback.call(this,E),this.createCallback&&this.createCallback.call(this,E),C&&(E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList()),E.on(f.DESTROY,this.remove,this),this)},addMultiple:function(E,C){if(C===void 0&&(C=!1),Array.isArray(E))for(var w=0;w<E.length;w++)this.add(E[w],C);return this},remove:function(E,C,w){return C===void 0&&(C=!1),w===void 0&&(w=!1),this.children.contains(E)?(this.children.delete(E),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,E),this.removeCallback&&this.removeCallback.call(this,E),E.off(f.DESTROY,this.remove,this),w?E.destroy():C&&(E.removeFromDisplayList(),E.removeFromUpdateList()),this):this},clear:function(E,C){E===void 0&&(E=!1),C===void 0&&(C=!1);for(var w=this.children,A=0;A<w.size;A++){var M=w.entries[A];M.off(f.DESTROY,this.remove,this),C?M.destroy():E&&(M.removeFromDisplayList(),M.removeFromUpdateList())}return this.children.clear(),this},contains:function(E){return this.children.contains(E)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(E,C,w,A){return u(this.children.entries,E,C,w,A)},getFirst:function(E,C,w,A,M,R,P){return this.getHandler(!0,1,E,C,w,A,M,R,P)},getFirstNth:function(E,C,w,A,M,R,P,b){return this.getHandler(!0,E,C,w,A,M,R,P,b)},getLast:function(E,C,w,A,M,R,P){return this.getHandler(!1,1,E,C,w,A,M,R,P)},getLastNth:function(E,C,w,A,M,R,P,b){return this.getHandler(!1,E,C,w,A,M,R,P,b)},getHandler:function(E,C,w,A,M,R,P,b,F){w===void 0&&(w=!1),A===void 0&&(A=!1);var I,L,D=0,O=this.children.entries;if(E)for(L=0;L<O.length;L++)if(I=O[L],I.active===w){if(D++,D===C)break}else I=null;else for(L=O.length-1;L>=0;L--)if(I=O[L],I.active===w){if(D++,D===C)break}else I=null;return I?(typeof M=="number"&&(I.x=M),typeof R=="number"&&(I.y=R),I):A?this.create(M,R,P,b,F):null},get:function(E,C,w,A,M){return this.getFirst(!1,!0,E,C,w,A,M)},getFirstAlive:function(E,C,w,A,M,R){return this.getFirst(!0,E,C,w,A,M,R)},getFirstDead:function(E,C,w,A,M,R){return this.getFirst(!1,E,C,w,A,M,R)},playAnimation:function(E,C){return a.PlayAnimation(this.children.entries,E,C),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(E){E===void 0&&(E=!0);for(var C=0,w=0;w<this.children.size;w++)this.children.entries[w].active===E&&C++;return C},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var E=this.getTotalUsed(),C=this.maxSize===-1?999999999999:this.maxSize;return C-E},setActive:function(E){return this.active=E,this},setName:function(E){return this.name=E,this},propertyValueSet:function(E,C,w,A,M){return a.PropertyValueSet(this.children.entries,E,C,w,A,M),this},propertyValueInc:function(E,C,w,A,M){return a.PropertyValueInc(this.children.entries,E,C,w,A,M),this},setX:function(E,C){return a.SetX(this.children.entries,E,C),this},setY:function(E,C){return a.SetY(this.children.entries,E,C),this},setXY:function(E,C,w,A){return a.SetXY(this.children.entries,E,C,w,A),this},incX:function(E,C){return a.IncX(this.children.entries,E,C),this},incY:function(E,C){return a.IncY(this.children.entries,E,C),this},incXY:function(E,C,w,A){return a.IncXY(this.children.entries,E,C,w,A),this},shiftPosition:function(E,C,w){return a.ShiftPosition(this.children.entries,E,C,w),this},angle:function(E,C){return a.Angle(this.children.entries,E,C),this},rotate:function(E,C){return a.Rotate(this.children.entries,E,C),this},rotateAround:function(E,C){return a.RotateAround(this.children.entries,E,C),this},rotateAroundDistance:function(E,C,w){return a.RotateAroundDistance(this.children.entries,E,C,w),this},setAlpha:function(E,C){return a.SetAlpha(this.children.entries,E,C),this},setTint:function(E,C,w,A){return a.SetTint(this.children.entries,E,C,w,A),this},setOrigin:function(E,C,w,A){return a.SetOrigin(this.children.entries,E,C,w,A),this},scaleX:function(E,C){return a.ScaleX(this.children.entries,E,C),this},scaleY:function(E,C){return a.ScaleY(this.children.entries,E,C),this},scaleXY:function(E,C,w,A){return a.ScaleXY(this.children.entries,E,C,w,A),this},setDepth:function(E,C){return a.SetDepth(this.children.entries,E,C),this},setBlendMode:function(E){return a.SetBlendMode(this.children.entries,E),this},setHitArea:function(E,C){return a.SetHitArea(this.children.entries,E,C),this},shuffle:function(){return a.Shuffle(this.children.entries),this},kill:function(E){this.children.contains(E)&&E.setActive(!1)},killAndHide:function(E){this.children.contains(E)&&(E.setActive(!1),E.setVisible(!1))},setVisible:function(E,C,w){return a.SetVisible(this.children.entries,E,C,w),this},toggleVisible:function(){return a.ToggleVisible(this.children.entries),this},destroy:function(E,C){E===void 0&&(E=!1),C===void 0&&(C=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(f.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(C,E),this.scene=void 0,this.children=void 0)}});s.exports=y}),94975:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),g=e(26479);a.register("group",function(f){return new g(this.scene,null,f)})}),3385:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26479),g=e(39429);g.register("group",function(f,o){return this.updateList.add(new a(this.scene,f,o))})}),88571:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(95643),o=e(59819),u=new a({Extends:f,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.TextureCrop,g.Tint,g.Transform,g.Visible,o],initialize:function(h,c,l,p,m){f.call(this,h,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,m),this.setPosition(c,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=u}),40652:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g.addToRenderList(a),e.batchSprite(a,a.frame,g,f)};s.exports=T}),82459:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(88571);g.register("image",function(u,r){u===void 0&&(u={});var h=f(u,"key",null),c=f(u,"frame",null),l=new o(this.scene,0,0,h,c);return r!==void 0&&(u.add=r),a(this.scene,l,u),l})}),2117:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88571),g=e(39429);g.register("image",function(f,o,u,r){return this.displayList.add(new a(this.scene,f,o,u,r))})}),59819:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(99517),f=e(40652),s.exports={renderWebGL:g,renderCanvas:f}}),99517:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g.addToRenderList(a),this.pipeline.batchSprite(a,g,f)};s.exports=T}),77856:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Events:e(51708),DisplayList:e(8050),GameObjectCreator:e(44603),GameObjectFactory:e(39429),UpdateList:e(45027),Components:e(31401),GetCalcMatrix:e(91296),BuildGameObject:e(25305),BuildGameObjectAnimation:e(13059),GameObject:e(95643),BitmapText:e(22186),Blitter:e(6107),Bob:e(46590),Container:e(31559),DOMElement:e(3069),DynamicBitmapText:e(2638),Extern:e(42421),Graphics:e(43831),Group:e(26479),Image:e(88571),Layer:e(93595),Particles:e(18404),PathFollower:e(1159),RenderTexture:e(591),RetroFont:e(196),Rope:e(77757),Sprite:e(68287),Text:e(50171),GetTextSize:e(14220),MeasureText:e(79557),TextStyle:e(35762),TileSprite:e(20839),Zone:e(41481),Video:e(18471),Shape:e(17803),Arc:e(23629),Curve:e(89),Ellipse:e(19921),Grid:e(30479),IsoBox:e(61475),IsoTriangle:e(16933),Line:e(57847),Polygon:e(24949),Rectangle:e(74561),Star:e(55911),Triangle:e(36931),Factories:{Blitter:e(12709),Container:e(24961),DOMElement:e(2611),DynamicBitmapText:e(72566),Extern:e(56315),Graphics:e(1201),Group:e(3385),Image:e(2117),Layer:e(20005),Particles:e(676),PathFollower:e(90145),RenderTexture:e(60505),Rope:e(96819),Sprite:e(46409),StaticBitmapText:e(34914),Text:e(68005),TileSprite:e(91681),Zone:e(84175),Video:e(89025),Arc:e(42563),Curve:e(40511),Ellipse:e(1543),Grid:e(34137),IsoBox:e(3933),IsoTriangle:e(49803),Line:e(2481),Polygon:e(64827),Rectangle:e(87959),Star:e(93697),Triangle:e(45245)},Creators:{Blitter:e(9403),Container:e(77143),DynamicBitmapText:e(11164),Graphics:e(87079),Group:e(94975),Image:e(82459),Layer:e(25179),Particles:e(92730),RenderTexture:e(34495),Rope:e(26209),Sprite:e(15567),StaticBitmapText:e(57336),Text:e(71259),TileSprite:e(14167),Zone:e(95261),Video:e(11511)}};a.Shader=e(20071),a.Mesh=e(4703),a.NineSlice=e(28103),a.PointLight=e(80321),a.Plane=e(33663),a.Factories.Shader=e(74177),a.Factories.Mesh=e(9225),a.Factories.NineSlice=e(47521),a.Factories.PointLight=e(71255),a.Factories.Plane=e(30985),a.Creators.Shader=e(54935),a.Creators.Mesh=e(20527),a.Creators.NineSlice=e(28279),a.Creators.PointLight=e(39829),a.Creators.Plane=e(56015),a.Light=e(41432),a.LightsManager=e(61356),a.LightsPlugin=e(88992),s.exports=a}),93595:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),g=e(83419),f=e(31401),o=e(53774),u=e(45893),r=e(50792),h=e(51708),c=e(73162),l=e(33963),p=e(44594),m=e(19186),v=new g({Extends:c,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Mask,f.PostPipeline,f.Visible,r,l],initialize:function(E,C){c.call(this,E),r.call(this),this.scene=E,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=E.sys,this.events=E.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),C&&this.add(C),E.sys.queueDepthSort()},setActive:function(y){return this.active=y,this},setName:function(y){return this.name=y,this},setState:function(y){return this.state=y,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(y,E){return this.data||(this.data=new u(this)),this.data.set(y,E),this},incData:function(y,E){return this.data||(this.data=new u(this)),this.data.inc(y,E),this},toggleData:function(y){return this.data||(this.data=new u(this)),this.data.toggle(y),this},getData:function(y){return this.data||(this.data=new u(this)),this.data.get(y)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(y){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&y.id)},getIndexList:function(){for(var y=this,E=this.parentContainer,C=[];E&&(C.unshift(E.getIndex(y)),y=E,E.parentContainer);)E=E.parentContainer;return C.unshift(this.displayList.getIndex(y)),C},addChildCallback:function(y){var E=y.displayList;E&&E!==this&&y.removeFromDisplayList(),y.displayList||(this.queueDepthSort(),y.displayList=this,y.emit(h.ADDED_TO_SCENE,y,this.scene),this.events.emit(p.ADDED_TO_SCENE,y,this.scene))},removeChildCallback:function(y){this.queueDepthSort(),y.displayList=null,y.emit(h.REMOVED_FROM_SCENE,y,this.scene),this.events.emit(p.REMOVED_FROM_SCENE,y,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(m(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(y,E){return y._depth-E._depth},getChildren:function(){return this.list},addToDisplayList:function(y){return y===void 0&&(y=this.scene.sys.displayList),this.displayList&&this.displayList!==y&&this.removeFromDisplayList(),y.exists(this)||(this.displayList=y,y.add(this,!0),y.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),y.events.emit(p.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var y=this.displayList||this.scene.sys.displayList;return y.exists(this)&&(y.remove(this,!0),y.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),y.events.emit(p.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var y=null;return this.parentContainer?y=this.parentContainer.list:this.displayList&&(y=this.displayList.list),y},destroy:function(y){if(!(!this.scene||this.ignoreDestroy)){this.emit(h.DESTROY,this);for(var E=this.list;E.length;)E[0].destroy(y);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});s.exports=v}),2956:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=a.list;if(f.length!==0){a.depthSort();var o=a.blendMode!==-1;o||e.setBlendMode(0);var u=a._alpha;a.mask&&a.mask.preRenderCanvas(e,null,g);for(var r=0;r<f.length;r++){var h=f[r];if(h.willRender(g)){var c=h.alpha;!o&&h.blendMode!==e.currentBlendMode&&e.setBlendMode(h.blendMode),h.setAlpha(c*u),h.renderCanvas(e,h,g),h.setAlpha(c)}}a.mask&&a.mask.postRenderCanvas(e)}};s.exports=T}),25179:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(93595),f=e(44603),o=e(23568);f.register("layer",function(u,r){u===void 0&&(u={});var h=o(u,"children",null),c=new g(this.scene,h);return r!==void 0&&(u.add=r),a(this.scene,c,u),c})}),20005:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93595),g=e(39429);g.register("layer",function(f){return this.displayList.add(new a(this.scene,f))})}),33963:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(15869),f=e(2956),s.exports={renderWebGL:g,renderCanvas:f}}),15869:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=a.list,o=f.length;if(o!==0){a.depthSort(),e.pipelines.preBatch(a);var u=a.blendMode!==-1;u||e.setBlendMode(0);for(var r=a.alpha,h=0;h<o;h++){var c=f[h];if(c.willRender(g)){var l,p,m,v;if(c.alphaTopLeft!==void 0)l=c.alphaTopLeft,p=c.alphaTopRight,m=c.alphaBottomLeft,v=c.alphaBottomRight;else{var y=c.alpha;l=y,p=y,m=y,v=y}!u&&c.blendMode!==e.currentBlendMode&&e.setBlendMode(c.blendMode);var E=c.mask;E&&E.preRenderWebGL(e,c,g);var C=c.type;C!==e.currentType&&(e.newType=!0,e.currentType=C),e.nextTypeMatch=h<o-1?f[h+1].type===e.currentType:!1,c.setAlpha(l*r,p*r,m*r,v*r),c.renderWebGL(e,c,g),c.setAlpha(l,p,m,v),E&&E.postRenderWebGL(e,g),e.newType=!1}}e.pipelines.postBatch(a)}};s.exports=T}),41432:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),g=e(83419),f=e(31401),o=e(51767),u=e(70554),r=new g({Extends:a,Mixins:[f.Origin,f.ScrollFactor,f.Visible],initialize:function(c,l,p,m,v,y,E){a.call(this,c,l,p),this.color=new o(m,v,y),this.intensity=E,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(p)},displayWidth:{get:function(){return this.diameter},set:function(h){this.diameter=h}},displayHeight:{get:function(){return this.diameter},set:function(h){this.diameter=h}},width:{get:function(){return this.diameter},set:function(h){this.diameter=h}},height:{get:function(){return this.diameter},set:function(h){this.diameter=h}},willRender:function(h){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&h.id)},setColor:function(h){var c=u.getFloatsFromUintRGB(h);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(h){return this.intensity=h,this},setRadius:function(h){return this.radius=h,this}});r.RENDER_MASK=15,s.exports=r}),61356:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81491),g=e(83419),f=e(20339),o=e(41432),u=e(80321),r=e(51767),h=e(19133),c=e(19186),l=e(70554),p=new g({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(m,v,y,E,C,w){return this.systems.displayList.add(new u(this.scene,m,v,y,E,C,w))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(m){for(var v=this.lights,y=m.worldView,E=[],C=0;C<v.length;C++){var w=v[C];w.willRender(m)&&a(w,y)&&E.push({light:w,distance:f(w.x,w.y,y.centerX,y.centerY)})}return E.length>this.maxLights&&(c(E,this.sortByDistance),E=E.slice(0,this.maxLights)),this.visibleLights=E.length,E},sortByDistance:function(m,v){return m.distance>=v.distance},setAmbientColor:function(m){var v=l.getFloatsFromUintRGB(m);return this.ambientColor.set(v[0],v[1],v[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(m,v,y,E,C){m===void 0&&(m=0),v===void 0&&(v=0),y===void 0&&(y=128),E===void 0&&(E=16777215),C===void 0&&(C=1);var w=l.getFloatsFromUintRGB(E),A=new o(m,v,y,w[0],w[1],w[2],C);return this.lights.push(A),A},removeLight:function(m){var v=this.lights.indexOf(m);return v>=0&&h(this.lights,v),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});s.exports=p}),88992:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(61356),f=e(37277),o=e(44594),u=new a({Extends:g,initialize:function(h){this.scene=h,this.systems=h.sys,h.sys.settings.isBooted||h.sys.events.once(o.BOOT,this.boot,this),g.call(this)},boot:function(){var r=this.systems.events;r.on(o.SHUTDOWN,this.shutdown,this),r.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});f.register("LightsPlugin",u,"lights"),s.exports=u}),4703:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(39506),o=e(83997),u=e(95643),r=e(34684),h=e(92515),c=e(91296),l=e(37867),p=e(29807),m=e(43396),v=e(19186),y=e(25836),E=e(39318),C=new a({Extends:u,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.Texture,g.Transform,g.Visible,p],initialize:function(A,M,R,P,b,F,I,L,D,O,z,_){M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P="__WHITE"),u.call(this,A,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new y,this.modelScale=new y(1,1,1),this.modelRotation=new y,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new l,this.viewPosition=new y,this.viewMatrix=new l,this.projectionMatrix=new l,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var X=A.sys.renderer;this.setPosition(M,R),this.setTexture(P,b),this.setSize(X.width,X.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(X.width,X.height),F&&this.addVertices(F,I,L,D,O,z,_)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(w){return this.viewPosition.addScale(y.LEFT,w),this.dirtyCache[10]=1,this},panY:function(w){return this.viewPosition.y+=y.DOWN.y*w,this.dirtyCache[10]=1,this},panZ:function(w){return this.viewPosition.z+=w,this.dirtyCache[10]=1,this},setPerspective:function(w,A,M,R,P){return M===void 0&&(M=45),R===void 0&&(R=.01),P===void 0&&(P=1e3),this.fov=M,this.projectionMatrix.perspective(f(M),w/A,R,P),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(w,A,M,R){return w===void 0&&(w=this.scene.sys.renderer.getAspectRatio()),A===void 0&&(A=1),M===void 0&&(M=-1e3),R===void 0&&(R=1e3),this.fov=0,this.projectionMatrix.ortho(-w,w,-A,A,M,R),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(w){w.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(w,A,M,R,P,b,F,I,L){var D=this.scene.sys.cache.obj.get(w),O;return D&&(O=r(D,this,A,M,R,P,b,F,I,L)),(!O||O.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",w),this},sortByDepth:function(w,A){return w.depth-A.depth},depthSort:function(){return v(this.faces,this.sortByDepth),this},addVertex:function(w,A,M,R,P,b,F){var I=new E(w,A,M,R,P,b,F);return this.vertices.push(I),I},addFace:function(w,A,M){var R=new o(w,A,M);return this.faces.push(R),this.dirtyCache[9]=-1,R},addVertices:function(w,A,M,R,P,b,F){var I=h(w,A,M,R,P,b,F);return I?(this.faces=this.faces.concat(I.faces),this.vertices=this.vertices.concat(I.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(w){return this.faces[w]},hasFaceAt:function(w,A,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var R=c(this,M).calc,P=this.faces,b=0;b<P.length;b++){var F=P[b];if(F.contains(w,A,R))return!0}return!1},getFaceAt:function(w,A,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var R=c(this,M).calc,P=this.faces,b=[],F=0;F<P.length;F++){var I=P[F];I.contains(w,A,R)&&b.push(I)}return v(b,this.sortByDepth)},setDebug:function(w,A){return this.debugGraphic=w,!w&&!A?this.debugCallback=null:A?this.debugCallback=A:this.debugCallback=this.renderDebug,this},isDirty:function(){var w=this.modelPosition,A=this.modelRotation,M=this.modelScale,R=this.dirtyCache,P=w.x,b=w.y,F=w.z,I=A.x,L=A.y,D=A.z,O=M.x,z=M.y,_=M.z,X=this.getFaceCount(),H=R[0],U=R[1],G=R[2],N=R[3],W=R[4],V=R[5],$=R[6],j=R[7],k=R[8],Q=R[9];return R[0]=P,R[1]=b,R[2]=F,R[3]=I,R[4]=L,R[5]=D,R[6]=O,R[7]=z,R[8]=_,R[9]=X,H!==P||U!==b||G!==F||N!==I||W!==L||V!==D||$!==O||j!==z||k!==_||Q!==X},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var w=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!w[10]&&!this.isDirty())){var A=this.width,M=this.height,R=this.viewMatrix,P=this.viewPosition;w[10]&&(R.identity(),R.translate(P),R.invert(),w[10]=0);var b=this.transformMatrix;b.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var F=P.z,I=this.faces,L=0;L<I.length;L++)I[L].transformCoordinatesLocal(b,A,M,F);this.depthSort()}},renderDebug:function(w,A){for(var M=w.debugGraphic,R=0;R<A.length;R++){var P=A[R],b=P.vertex1.tx,F=P.vertex1.ty,I=P.vertex2.tx,L=P.vertex2.ty,D=P.vertex3.tx,O=P.vertex3.ty;M.strokeTriangle(b,F,I,L,D,O)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(w){w===void 0&&(w={});var A=(function(M,R,P){for(var b=this.faces,F=0;F<b.length;F++){var I=b[F];if(I.contains(R,P))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,w,A),this},setTint:function(w){w===void 0&&(w=16777215);for(var A=this.vertices,M=0;M<A.length;M++)A[M].color=w;return this},uvScroll:function(w,A){for(var M=this.faces,R=0;R<M.length;R++)M[R].scrollUV(w,A);return this},uvScale:function(w,A){for(var M=this.faces,R=0;R<M.length;R++)M[R].scaleUV(w,A);return this},tint:{set:function(w){this.setTint(w)}},rotateX:{get:function(){return m(this.modelRotation.x)},set:function(w){this.modelRotation.x=f(w)}},rotateY:{get:function(){return m(this.modelRotation.y)},set:function(w){this.modelRotation.y=f(w)}},rotateZ:{get:function(){return m(this.modelRotation.z)},set:function(w){this.modelRotation.z=f(w)}}});s.exports=C}),36488:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};s.exports=T}),20527:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(35154),u=e(4703);g.register("mesh",function(r,h){r===void 0&&(r={});var c=f(r,"key",null),l=f(r,"frame",null),p=o(r,"vertices",[]),m=o(r,"uvs",[]),v=o(r,"indicies",[]),y=o(r,"containsZ",!1),E=o(r,"normals",[]),C=o(r,"colors",16777215),w=o(r,"alphas",1),A=new u(this.scene,0,0,c,l,p,m,v,y,E,C,w);return h!==void 0&&(r.add=h),a(this.scene,A,r),A})}),9225:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4703),g=e(39429);g.register("mesh",function(f,o,u,r,h,c,l,p,m,v,y){return this.displayList.add(new a(this.scene,f,o,u,r,h,c,l,p,m,v,y))})}),29807:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(48833),f=e(36488),s.exports={renderWebGL:g,renderCanvas:f}}),48833:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=function(f,o,u,r){var h=o.faces,c=h.length;if(c!==0){u.addToRenderList(o);var l=f.pipelines.set(o.pipeline,o),p=a(o,u,r).calc;f.pipelines.preBatch(o);for(var m=l.setGameObject(o),v=l.vertexViewF32,y=l.vertexViewU32,E=l.vertexCount*l.currentShader.vertexComponentCount-1,C=o.tintFill,w=[],A=o.debugCallback,M=p.a,R=p.b,P=p.c,b=p.d,F=p.e,I=p.f,L=o.viewPosition.z,D=o.hideCCW,O=u.roundPixels,z=u.alpha*o.alpha,_=0,X=0;X<c;X++){var H=h[X];H.isInView(u,D,L,z,M,R,P,b,F,I,O)&&(l.shouldFlush(3)&&(l.flush(),m=l.setGameObject(o),E=l.vertexCount*l.currentShader.vertexComponentCount-1),E=H.load(v,y,E,m,C),_++,l.vertexCount+=3,l.currentBatch.count=l.vertexCount-l.currentBatch.start,A&&w.push(H))}o.totalFrame+=_,A&&A.call(o,o,w),f.pipelines.postBatch(o)}};s.exports=g}),28103:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(95643),o=e(78023),u=e(39318),r=new a({Extends:f,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,o],initialize:function(c,l,p,m,v,y,E,C,w,A,M){f.call(this,c,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var R=c.textures.getFrame(m,v);this.is3Slice=!A&&!M,R&&R.scale9&&(this.is3Slice=R.is3Slice);for(var P=this.is3Slice?18:54,b=0;b<P;b++)this.vertices.push(new u);this.setPosition(l,p),this.setTexture(m,v),this.setSlices(y,E,C,w,A,M,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(h,c,l,p,m,v,y){l===void 0&&(l=10),p===void 0&&(p=10),m===void 0&&(m=0),v===void 0&&(v=0),y===void 0&&(y=!1);var E=this.frame,C=!1;if(this.is3Slice&&y&&m!==0&&v!==0&&(C=!0),C)console.warn("Cannot change 9 slice to 3 slice");else{if(E&&E.scale9&&!y){var w=E.data.scale9Borders,A=w.x,M=w.y;l=A,p=E.width-w.w-A,m=M,v=E.height-w.h-M,h===void 0&&(h=E.width),c===void 0&&(c=E.height)}else h===void 0&&(h=256),c===void 0&&(c=256);this._width=h,this._height=c,this.leftWidth=l,this.rightWidth=p,this.topHeight=m,this.bottomHeight=v,this.is3Slice&&(c=E.height,this._height=c,this.topHeight=c,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var h=this.leftWidth,c=this.rightWidth,l=this.topHeight,p=this.bottomHeight,m=this.frame.width,v=this.frame.height;this.updateQuadUVs(0,0,0,h/m,l/v),this.updateQuadUVs(6,h/m,0,1-c/m,l/v),this.updateQuadUVs(12,1-c/m,0,1,l/v),this.is3Slice||(this.updateQuadUVs(18,0,l/v,h/m,1-p/v),this.updateQuadUVs(24,h/m,l/v,1-c/m,1-p/v),this.updateQuadUVs(30,1-c/m,l/v,1,1-p/v),this.updateQuadUVs(36,0,1-p/v,h/m,1),this.updateQuadUVs(42,h/m,1-p/v,1-c/m,1),this.updateQuadUVs(48,1-c/m,1-p/v,1,1))},updateVertices:function(){var h=this.leftWidth,c=this.rightWidth,l=this.topHeight,p=this.bottomHeight,m=this.width,v=this.height;this.updateQuad(0,-.5,.5,-.5+h/m,.5-l/v),this.updateQuad(6,-.5+h/m,.5,.5-c/m,.5-l/v),this.updateQuad(12,.5-c/m,.5,.5,.5-l/v),this.is3Slice||(this.updateQuad(18,-.5,.5-l/v,-.5+h/m,-.5+p/v),this.updateQuad(24,-.5+h/m,.5-l/v,.5-c/m,-.5+p/v),this.updateQuad(30,.5-c/m,.5-l/v,.5,-.5+p/v),this.updateQuad(36,-.5,-.5+p/v,-.5+h/m,-.5),this.updateQuad(42,-.5+h/m,-.5+p/v,.5-c/m,-.5),this.updateQuad(48,.5-c/m,-.5+p/v,.5,-.5))},updateQuad:function(h,c,l,p,m){var v=this.width,y=this.height,E=this.originX,C=this.originY,w=this.vertices;w[h+0].resize(c,l,v,y,E,C),w[h+1].resize(c,m,v,y,E,C),w[h+2].resize(p,l,v,y,E,C),w[h+3].resize(c,m,v,y,E,C),w[h+4].resize(p,m,v,y,E,C),w[h+5].resize(p,l,v,y,E,C)},updateQuadUVs:function(h,c,l,p,m){var v=this.vertices,y=this.frame,E=y.u0,C=y.v0,w=y.u1,A=y.v1;if(E!==0||w!==1){var M=w-E;c=E+c*M,p=E+p*M}if(C!==0||A!==1){var R=A-C;l=C+l*R,m=C+m*R}v[h+0].setUVs(c,l),v[h+1].setUVs(c,m),v[h+2].setUVs(p,l),v[h+3].setUVs(c,m),v[h+4].setUVs(p,m),v[h+5].setUVs(p,l)},clearTint:function(){return this.setTint(16777215),this},setTint:function(h){return h===void 0&&(h=16777215),this.tint=h,this.tintFill=!1,this},setTintFill:function(h){return this.setTint(h),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(h){this._width=Math.max(h,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(h){this.is3Slice||(this._height=Math.max(h,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(h){this.scaleX=h/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(h){this.scaleY=h/this.height}},setSize:function(h,c){this.width=h,this.height=c,this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=this.width,l.hitArea.height=this.height),this},setDisplaySize:function(h,c){return this.displayWidth=h,this.displayHeight=c,this},originX:{get:function(){return this._originX},set:function(h){this._originX=h,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(h){this._originY=h,this.updateVertices()}},setOrigin:function(h,c){return h===void 0&&(h=.5),c===void 0&&(c=h),this._originX=h,this._originY=c,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var h=this.frame.height;this._height=h,this.topHeight=h,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});s.exports=r}),28279:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(35154),u=e(28103);g.register("nineslice",function(r,h){r===void 0&&(r={});var c=f(r,"key",null),l=f(r,"frame",null),p=o(r,"width",256),m=o(r,"height",256),v=o(r,"leftWidth",10),y=o(r,"rightWidth",10),E=o(r,"topHeight",0),C=o(r,"bottomHeight",0),w=new u(this.scene,0,0,c,l,p,m,v,y,E,C);return h!==void 0&&(r.add=h),a(this.scene,w,r),w})}),47521:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28103),g=e(39429);g.register("nineslice",function(f,o,u,r,h,c,l,p,m,v){return this.displayList.add(new a(this.scene,f,o,u,r,h,c,l,p,m,v))})}),78023:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(52230),s.exports={renderWebGL:g,renderCanvas:f}}),52230:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=e(70554),f=function(o,u,r,h){var c=u.vertices,l=c.length;if(l!==0){r.addToRenderList(u);var p=o.pipelines.set(u.pipeline,u),m=a(u,r,h,!1).calc;o.pipelines.preBatch(u);var v=p.setGameObject(u),y=p.vertexViewF32,E=p.vertexViewU32,C=p.vertexCount*p.currentShader.vertexComponentCount-1,w=r.roundPixels,A=u.tintFill,M=r.alpha*u.alpha,R=g.getTintAppendFloatAlpha(u.tint,M),P=p.vertexAvailable(),b=-1;P<l&&(b=P);for(var F=0;F<l;F++){var I=c[F];F===b&&(p.flush(),v=p.setGameObject(u),C=0),y[++C]=m.getXRound(I.vx,I.vy,w),y[++C]=m.getYRound(I.vx,I.vy,w),y[++C]=I.u,y[++C]=I.v,y[++C]=v,y[++C]=A,E[++C]=R,p.vertexCount++,p.currentBatch.count=p.vertexCount-p.currentBatch.start}o.pipelines.postBatch(u)}};s.exports=f}),76472:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(44777),f=e(37589),o=e(6113),u=e(91389),r=e(90664),h=new a({Extends:g,initialize:function(l){g.call(this,l,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var c=this.propertyValue,l=c,p=this.defaultEmit,m=this.defaultUpdate;if(this.method===9){this.start=c[0],this.ease=o("Linear"),this.interpolation=u("linear"),p=this.easedValueEmit,m=this.easeValueUpdate,l=c[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var v=0;v<c.length;v++){var y=r(c[v]);this.r.push(y.r),this.g.push(y.g),this.b.push(y.b)}}return this.onEmit=p,this.onUpdate=m,this.current=l,this},setEase:function(c){this.easeName=c,this.ease=o(c)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(c,l,p){var m=this.ease(p),v=this.interpolation(this.r,m),y=this.interpolation(this.g,m),E=this.interpolation(this.b,m),C=f(v,y,E);return this.current=C,C}});s.exports=h}),44777:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),g=e(45319),f=e(83419),o=e(99472),u=e(6113),r=e(95540),h=e(91389),c=e(77720),l=e(15994),p=new f({initialize:function(v,y,E){E===void 0&&(E=!1),this.propertyKey=v,this.propertyValue=y,this.defaultValue=y,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=E,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(m,v){m===void 0&&(m={}),v&&(this.propertyKey=v),this.propertyValue=r(m,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(m){var v;switch(this.method){case 1:case 3:case 8:v=m;break;case 2:this.propertyValue.indexOf(m)>=0&&(v=m);break;case 4:var y=(this.end-this.start)/this.steps;v=c(m,y),this.counter=v;break;case 5:case 6:case 7:v=g(m,this.start,this.end);break;case 9:v=this.start[0];break}return this.current=v,this},getMethod:function(){var m=this.propertyValue;if(m===null)return 0;var v=typeof m;if(v==="number")return 1;if(Array.isArray(m))return 2;if(v==="function")return 3;if(v==="object"){if(this.hasBoth(m,"start","end"))return this.has(m,"steps")?4:5;if(this.hasBoth(m,"min","max"))return 6;if(this.has(m,"random"))return 7;if(this.hasEither(m,"onEmit","onUpdate"))return 8;if(this.hasEither(m,"values","interpolation"))return 9}return 0},setMethods:function(){var m=this.propertyValue,v=m,y=this.defaultEmit,E=this.defaultUpdate;switch(this.method){case 1:y=this.staticValueEmit;break;case 2:y=this.randomStaticValueEmit,v=m[0];break;case 3:this._onEmit=m,y=this.proxyEmit,v=this.defaultValue;break;case 4:this.start=m.start,this.end=m.end,this.steps=m.steps,this.counter=this.start,this.yoyo=this.has(m,"yoyo")?m.yoyo:!1,this.direction=0,y=this.steppedEmit,v=this.start;break;case 5:this.start=m.start,this.end=m.end;var C=this.has(m,"ease")?m.ease:"Linear";this.ease=u(C,m.easeParams),y=this.has(m,"random")&&m.random?this.randomRangedValueEmit:this.easedValueEmit,E=this.easeValueUpdate,v=this.start;break;case 6:this.start=m.min,this.end=m.max,y=this.has(m,"int")&&m.int?this.randomRangedIntEmit:this.randomRangedValueEmit,v=this.start;break;case 7:var w=m.random;Array.isArray(w)&&(this.start=w[0],this.end=w[1]),y=this.randomRangedIntEmit,v=this.start;break;case 8:this._onEmit=this.has(m,"onEmit")?m.onEmit:this.defaultEmit,this._onUpdate=this.has(m,"onUpdate")?m.onUpdate:this.defaultUpdate,y=this.proxyEmit,E=this.proxyUpdate,v=this.defaultValue;break;case 9:this.start=m.values;var A=this.has(m,"ease")?m.ease:"Linear";this.ease=u(A,m.easeParams),this.interpolation=h(m.interpolation),y=this.easedValueEmit,E=this.easeValueUpdate,v=this.start[0];break}return this.onEmit=y,this.onUpdate=E,this.current=v,this},has:function(m,v){return m.hasOwnProperty(v)},hasBoth:function(m,v,y){return m.hasOwnProperty(v)&&m.hasOwnProperty(y)},hasEither:function(m,v,y){return m.hasOwnProperty(v)||m.hasOwnProperty(y)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(m,v,y,E){return E},proxyEmit:function(m,v,y){var E=this._onEmit(m,v,y);return this.current=E,E},proxyUpdate:function(m,v,y,E){var C=this._onUpdate(m,v,y,E);return this.current=C,C},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var m=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[m],this.current},randomRangedValueEmit:function(m,v){var y=o(this.start,this.end);return m&&m.data[v]&&(m.data[v].min=y,m.data[v].max=this.end),this.current=y,y},randomRangedIntEmit:function(m,v){var y=a(this.start,this.end);return m&&m.data[v]&&(m.data[v].min=y,m.data[v].max=this.end),this.current=y,y},steppedEmit:function(){var m=this.counter,v=m,y=(this.end-this.start)/this.steps;if(this.yoyo){var E;this.direction===0?(v+=y,v>=this.end&&(E=v-this.end,v=this.end-E,this.direction=1)):(v-=y,v<=this.start&&(E=this.start-v,v=this.start+E,this.direction=0)),this.counter=v}else this.counter=l(v+y,this.start,this.end);return this.current=m,m},easedValueEmit:function(m,v){if(m&&m.data[v]){var y=m.data[v];y.min=this.start,y.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(m,v,y){var E=m.data[v],C,w=this.ease(y);return this.interpolation?C=this.interpolation(this.start,w):C=(E.max-E.min)*w+E.min,this.current=C,C},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});s.exports=p}),24502:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=e(20286),o=new a({Extends:f,initialize:function(r,h,c,l,p){if(typeof r=="object"){var m=r;r=g(m,"x",0),h=g(m,"y",0),c=g(m,"power",0),l=g(m,"epsilon",100),p=g(m,"gravity",50)}else r===void 0&&(r=0),h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l=100),p===void 0&&(p=50);f.call(this,r,h,!0),this._gravity=p,this._power=c*p,this._epsilon=l*l},update:function(u,r){var h=this.x-u.x,c=this.y-u.y,l=h*h+c*c;if(l!==0){var p=Math.sqrt(l);l<this._epsilon&&(l=this._epsilon);var m=this._power*r/(l*p)*100;u.velocityX+=h*m,u.velocityY+=c*m}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(u){this._epsilon=u*u}},power:{get:function(){return this._power/this._gravity},set:function(u){this._power=u*this._gravity}},gravity:{get:function(){return this._gravity},set:function(u){var r=this.power;this._gravity=u,this.power=r}}});s.exports=o}),56480:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),g=e(45319),f=e(83419),o=e(39506),u=e(87841),r=e(11520),h=e(26099),c=new f({initialize:function(p){this.emitter=p,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new h,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=p.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new a(this)),this.bounds=new u},emit:function(l,p,m,v,y,E){return this.emitter.emit(l,p,m,v,y,E)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(l,p){l===void 0&&(l=0),p===void 0&&(p=0),this.x=l,this.y=p},fire:function(l,p){var m=this.emitter,v=m.ops,y=m.getAnim();if(y?this.anims.play(y):(this.frame=m.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(m.getEmitZone(this),l===void 0?this.x+=v.x.onEmit(this,"x"):v.x.steps>0?this.x+=l+v.x.onEmit(this,"x"):this.x+=l,p===void 0?this.y+=v.y.onEmit(this,"y"):v.y.steps>0?this.y+=p+v.y.onEmit(this,"y"):this.y+=p,this.life=v.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=v.delay.onEmit(this,"delay"),this.holdCurrent=v.hold.onEmit(this,"hold"),this.scaleX=v.scaleX.onEmit(this,"scaleX"),this.scaleY=v.scaleY.active?v.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=v.rotate.onEmit(this,"rotate"),this.rotation=o(this.angle),m.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&m.getDeathZone(this))return this.lifeCurrent=0,!1;var E=v.speedX.onEmit(this,"speedX"),C=v.speedY.active?v.speedY.onEmit(this,"speedY"):E;if(m.radial){var w=o(v.angle.onEmit(this,"angle"));this.velocityX=Math.cos(w)*Math.abs(E),this.velocityY=Math.sin(w)*Math.abs(C)}else if(m.moveTo){var A=v.moveToX.onEmit(this,"moveToX"),M=v.moveToY.onEmit(this,"moveToY"),R=this.life/1e3;this.velocityX=(A-this.x)/R,this.velocityY=(M-this.y)/R}else this.velocityX=E,this.velocityY=C;return m.acceleration&&(this.accelerationX=v.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=v.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=v.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=v.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=v.bounce.onEmit(this,"bounce"),this.alpha=v.alpha.onEmit(this,"alpha"),v.color.active?this.tint=v.color.onEmit(this,"tint"):this.tint=v.tint.onEmit(this,"tint"),!0},update:function(l,p,m){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=l,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=l,!1;this.anims&&this.anims.update(0,l);var v=this.emitter,y=v.ops,E=1-this.lifeCurrent/this.life;if(this.lifeT=E,this.x=y.x.onUpdate(this,"x",E,this.x),this.y=y.y.onUpdate(this,"y",E,this.y),v.moveTo){var C=y.moveToX.onUpdate(this,"moveToX",E,v.moveToX),w=y.moveToY.onUpdate(this,"moveToY",E,v.moveToY),A=this.lifeCurrent/1e3;this.velocityX=(C-this.x)/A,this.velocityY=(w-this.y)/A}return this.computeVelocity(v,l,p,m,E),this.scaleX=y.scaleX.onUpdate(this,"scaleX",E,this.scaleX),y.scaleY.active?this.scaleY=y.scaleY.onUpdate(this,"scaleY",E,this.scaleY):this.scaleY=this.scaleX,this.angle=y.rotate.onUpdate(this,"rotate",E,this.angle),this.rotation=o(this.angle),v.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=g(y.alpha.onUpdate(this,"alpha",E,this.alpha),0,1),y.color.active?this.tint=y.color.onUpdate(this,"color",E,this.tint):this.tint=y.tint.onUpdate(this,"tint",E,this.tint),this.lifeCurrent-=l,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(l,p,m,v,y){var E=l.ops,C=this.velocityX,w=this.velocityY,A=E.accelerationX.onUpdate(this,"accelerationX",y,this.accelerationX),M=E.accelerationY.onUpdate(this,"accelerationY",y,this.accelerationY),R=E.maxVelocityX.onUpdate(this,"maxVelocityX",y,this.maxVelocityX),P=E.maxVelocityY.onUpdate(this,"maxVelocityY",y,this.maxVelocityY);this.bounce=E.bounce.onUpdate(this,"bounce",y,this.bounce),C+=l.gravityX*m+A*m,w+=l.gravityY*m+M*m,C=g(C,-R,R),w=g(w,-P,P),this.velocityX=C,this.velocityY=w,this.x+=C*m,this.y+=w*m,l.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var b=0;b<v.length;b++){var F=v[b];F.active&&F.update(this,p,m,y)}},setSizeToFrame:function(){},getBounds:function(l){l===void 0&&(l=this.emitter.getWorldTransformMatrix());var p=Math.abs(l.scaleX)*this.scaleX,m=Math.abs(l.scaleY)*this.scaleY,v=this.x,y=this.y,E=this.rotation,C=this.frame.width*p/2,w=this.frame.height*m/2,A=this.bounds,M=new h(v-C,y-w),R=new h(v+C,y-w),P=new h(v-C,y+w),b=new h(v+C,y+w);return E!==0&&(r(M,v,y,E),r(R,v,y,E),r(P,v,y,E),r(b,v,y,E)),l.transformPoint(M.x,M.y,M),l.transformPoint(R.x,R.y,R),l.transformPoint(P.x,P.y,P),l.transformPoint(b.x,b.y,b),A.x=Math.min(M.x,R.x,P.x,b.x),A.y=Math.min(M.y,R.y,P.y,b.y),A.width=Math.max(M.x,R.x,P.x,b.x)-A.x,A.height=Math.max(M.y,R.y,P.y,b.y)-A.y,A},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});s.exports=c}),69601:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(20286),f=e(87841),o=new a({Extends:g,initialize:function(r,h,c,l,p,m,v,y){p===void 0&&(p=!0),m===void 0&&(m=!0),v===void 0&&(v=!0),y===void 0&&(y=!0),g.call(this,r,h,!0),this.bounds=new f(r,h,c,l),this.collideLeft=p,this.collideRight=m,this.collideTop=v,this.collideBottom=y},update:function(u){var r=this.bounds,h=-u.bounce,c=u.worldPosition;c.x<r.x&&this.collideLeft?(u.x+=r.x-c.x,u.velocityX*=h):c.x>r.right&&this.collideRight&&(u.x-=c.x-r.right,u.velocityX*=h),c.y<r.y&&this.collideTop?(u.y+=r.y-c.y,u.velocityY*=h):c.y>r.bottom&&this.collideBottom&&(u.y-=c.y-r.bottom,u.velocityY*=h)}});s.exports=o}),31600:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(53774),o=e(43459),u=e(26388),r=e(19909),h=e(76472),c=e(44777),l=e(20696),p=e(95643),m=e(95540),v=e(26546),y=e(24502),E=e(69036),C=e(1985),w=e(97022),A=e(86091),M=e(73162),R=e(20074),P=e(269),b=e(56480),F=e(69601),I=e(68875),L=e(87841),D=e(59996),O=e(72905),z=e(90668),_=e(19186),X=e(61340),H=e(26099),U=e(15994),G=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],N=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],W=new a({Extends:p,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,z],initialize:function($,j,k,Q,et){p.call(this,$,"ParticleEmitter"),this.particleClass=b,this.config=null,this.ops={accelerationX:new c("accelerationX",0),accelerationY:new c("accelerationY",0),alpha:new c("alpha",1),angle:new c("angle",{min:0,max:360},!0),bounce:new c("bounce",0),color:new h("color"),delay:new c("delay",0,!0),hold:new c("hold",0,!0),lifespan:new c("lifespan",1e3,!0),maxVelocityX:new c("maxVelocityX",1e4),maxVelocityY:new c("maxVelocityY",1e4),moveToX:new c("moveToX",0),moveToY:new c("moveToY",0),quantity:new c("quantity",1,!0),rotate:new c("rotate",0),scaleX:new c("scaleX",1),scaleY:new c("scaleY",1),speedX:new c("speedX",0,!0),speedY:new c("speedY",0,!0),tint:new c("tint",16777215),x:new c("x",0),y:new c("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new H,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new X,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new M(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(j,k),this.setTexture(Q),et&&this.setConfig(et)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(V){if(!V)return this;this.config=V;var $=0,j="",k=this.ops;for($=0;$<N.length;$++)j=N[$],k[j].loadConfig(V);for($=0;$<G.length;$++)j=G[$],w(V,j)&&(this[j]=m(V,j));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=E(V,["moveToX","moveToY"]),w(V,"speed")&&(k.speedX.loadConfig(V,"speed"),k.speedY.active=!1),(C(V,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),w(V,"scale")&&(k.scaleX.loadConfig(V,"scale"),k.scaleY.active=!1),w(V,"callbackScope")){var Q=m(V,"callbackScope",null);this.emitCallbackScope=Q,this.deathCallbackScope=Q}if(w(V,"emitZone")&&this.addEmitZone(V.emitZone),w(V,"deathZone")&&this.addDeathZone(V.deathZone),w(V,"bounds")){var et=this.addParticleBounds(V.bounds);et.collideLeft=m(V,"collideLeft",!0),et.collideRight=m(V,"collideRight",!0),et.collideTop=m(V,"collideTop",!0),et.collideBottom=m(V,"collideBottom",!0)}return w(V,"followOffset")&&this.followOffset.setFromObject(m(V,"followOffset",0)),w(V,"texture")&&this.setTexture(V.texture),w(V,"frame")?this.setEmitterFrame(V.frame):w(V,"anim")&&this.setAnim(V.anim),w(V,"reserve")&&this.reserve(V.reserve),w(V,"advance")&&this.fastForward(V.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(l.START,this),this},updateConfig:function(V){return V&&(this.config?this.setConfig(P(this.config,V)):this.setConfig(V)),this},toJSON:function(){var V=f(this),$=0,j="";for($=0;$<G.length;$++)j=G[$],V[j]=this[j];var k=this.ops;for($=0;$<N.length;$++)j=N[$],k[j]&&(V[j]=k[j].toJSON());return k.speedY.active||(delete V.speedX,V.speed=k.speedX.toJSON()),this.scaleX===this.scaleY&&(delete V.scaleX,delete V.scaleY,V.scale=k.scaleX.toJSON()),V},resetCounters:function(V,$){var j=this.counters;j.fill(0),j[0]=V,$&&(j[5]=1)},startFollow:function(V,$,j,k){return $===void 0&&($=0),j===void 0&&(j=0),k===void 0&&(k=!1),this.follow=V,this.followOffset.set($,j),this.trackVisible=k,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var V=this.frames,$=V.length,j;return $===1?j=V[0]:this.randomFrame?j=v(V):(j=V[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===$&&(this.currentFrame=0))),this.texture.get(j)},setEmitterFrame:function(V,$,j){$===void 0&&($=!0),j===void 0&&(j=1),this.randomFrame=$,this.frameQuantity=j,this.currentFrame=0;var k=typeof V;if(this.frames.length=0,Array.isArray(V))this.frames=this.frames.concat(V);else if(k==="string"||k==="number")this.frames.push(V);else if(k==="object"){var Q=V;V=m(Q,"frames",null),V&&(this.frames=this.frames.concat(V));var et=m(Q,"cycle",!1);this.randomFrame=!et,this.frameQuantity=m(Q,"quantity",j)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var V=this.anims,$=V.length;if($===0)return null;if($===1)return V[0];if(this.randomAnim)return v(V);var j=V[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=U(this.currentAnim+1,0,$)),j},setAnim:function(V,$,j){$===void 0&&($=!0),j===void 0&&(j=1),this.randomAnim=$,this.animQuantity=j,this.currentAnim=0;var k=typeof V;if(this.anims.length=0,Array.isArray(V))this.anims=this.anims.concat(V);else if(k==="string")this.anims.push(V);else if(k==="object"){var Q=V;V=m(Q,"anims",null),V&&(this.anims=this.anims.concat(V));var et=m(Q,"cycle",!1);this.randomAnim=!et,this.animQuantity=m(Q,"quantity",j)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(V){return V===void 0&&(V=!0),this.radial=V,this},addParticleBounds:function(V,$,j,k,Q,et,at,q){if(typeof V=="object"){var ft=V;V=ft.x,$=ft.y,j=w(ft,"w")?ft.w:ft.width,k=w(ft,"h")?ft.h:ft.height}return this.addParticleProcessor(new F(V,$,j,k,Q,et,at,q))},setParticleSpeed:function(V,$){return $===void 0&&($=V),this.ops.speedX.onChange(V),V===$?this.ops.speedY.active=!1:this.ops.speedY.onChange($),this.radial=!0,this},setParticleScale:function(V,$){return V===void 0&&(V=1),$===void 0&&($=V),this.ops.scaleX.onChange(V),this.ops.scaleY.onChange($),this},setParticleGravity:function(V,$){return this.gravityX=V,this.gravityY=$,this},setParticleAlpha:function(V){return this.ops.alpha.onChange(V),this},setParticleTint:function(V){return this.ops.tint.onChange(V),this},setEmitterAngle:function(V){return this.ops.angle.onChange(V),this},setParticleLifespan:function(V){return this.ops.lifespan.onChange(V),this},setQuantity:function(V){return this.quantity=V,this},setFrequency:function(V,$){return this.frequency=V,this.flowCounter=V>0?V:0,$&&(this.quantity=$),this},addDeathZone:function(V){Array.isArray(V)||(V=[V]);for(var $,j=[],k=0;k<V.length;k++)if($=V[k],$ instanceof u)j.push($);else if(typeof $.contains=="function")$=new u($,!0),j.push($);else{var Q=m($,"type","onEnter"),et=m($,"source",null);if(et&&typeof et.contains=="function"){var at=Q==="onEnter";$=new u(et,at),j.push($)}}return this.deathZones=this.deathZones.concat(j),j},removeDeathZone:function(V){return O(this.deathZones,V),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(V){Array.isArray(V)||(V=[V]);for(var $,j=[],k=0;k<V.length;k++)if($=V[k],$ instanceof I||$ instanceof r)j.push($);else{var Q=m($,"source",null);if(Q){var et=m($,"type","random");if(et==="random"&&typeof Q.getRandomPoint=="function")$=new I(Q),j.push($);else if(et==="edge"&&typeof Q.getPoints=="function"){var at=m($,"quantity",1),q=m($,"stepRate",0),ft=m($,"yoyo",!1),vt=m($,"seamless",!0),Tt=m($,"total",-1);$=new r(Q,at,q,ft,vt,Tt),j.push($)}}}return this.emitZones=this.emitZones.concat(j),j},removeEmitZone:function(V){return O(this.emitZones,V),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(V){var $=this.emitZones,j=$.length;if(j!==0){var k=$[this.zoneIndex];k.getPoint(V),k.total>-1&&(this.zoneTotal++,this.zoneTotal===k.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===j&&(this.zoneIndex=0)))}},getDeathZone:function(V){for(var $=this.deathZones,j=0;j<$.length;j++){var k=$[j];if(k.willKill(V))return this.emit(l.DEATH_ZONE,this,V,k),!0}return!1},setEmitZone:function(V){var $;return isFinite(V)?$=V:$=this.emitZones.indexOf(V),$>=0&&(this.zoneIndex=$),this},addParticleProcessor:function(V){return this.processors.exists(V)||(V.emitter&&V.emitter.removeParticleProcessor(V),this.processors.add(V),V.emitter=this),V},removeParticleProcessor:function(V){return this.processors.exists(V)&&(this.processors.remove(V,!0),V.emitter=null),V},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(V){return this.addParticleProcessor(new y(V))},reserve:function(V){var $=this.dead;if(this.maxParticles>0){var j=this.getParticleCount();j+V>this.maxParticles&&(V=this.maxParticles-(j+V))}for(var k=0;k<V;k++)$.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(V,$){return V===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof V=="function"&&(this.emitCallback=V,$&&(this.emitCallbackScope=$)),this},onParticleDeath:function(V,$){return V===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof V=="function"&&(this.deathCallback=V,$&&(this.deathCallbackScope=$)),this},killAll:function(){for(var V=this.dead,$=this.alive;$.length>0;)V.push($.pop());return this},forEachAlive:function(V,$){for(var j=this.alive,k=j.length,Q=0;Q<k;Q++)V.call($,j[Q],this);return this},forEachDead:function(V,$){for(var j=this.dead,k=j.length,Q=0;Q<k;Q++)V.call($,j[Q],this);return this},start:function(V,$){return V===void 0&&(V=0),this.emitting||(V>0&&this.fastForward(V),this.emitting=!0,this.resetCounters(this.frequency,!0),$!==void 0&&(this.duration=Math.abs($)),this.emit(l.START,this)),this},stop:function(V){return V===void 0&&(V=!1),this.emitting&&(this.emitting=!1,V&&this.killAll(),this.emit(l.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(V,$){return V===void 0&&(V=""),$===void 0&&($=this.true),this.sortProperty=V,this.sortOrderAsc=$,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(V){return this.sortProperty!==""?V=this.depthSortCallback:V=null,this.sortCallback=V,this},depthSort:function(){return _(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(V,$){var j=this.sortProperty;return this.sortOrderAsc?V[j]-$[j]:$[j]-V[j]},flow:function(V,$,j){return $===void 0&&($=1),this.emitting=!1,this.frequency=V,this.quantity=$,j!==void 0&&(this.stopAfter=j),this.start()},explode:function(V,$,j){this.frequency=-1,this.resetCounters(-1,!0);var k=this.emitParticle(V,$,j);return this.emit(l.EXPLODE,this,k),k},emitParticleAt:function(V,$,j){return this.emitParticle(j,V,$)},emitParticle:function(V,$,j){if(!this.atLimit()){V===void 0&&(V=this.ops.quantity.onEmit());for(var k=this.dead,Q=this.stopAfter,et=this.follow?this.follow.x+this.followOffset.x:$,at=this.follow?this.follow.y+this.followOffset.y:j,q=0;q<V;q++){var ft=k.pop();if(ft||(ft=new this.particleClass(this)),ft.fire(et,at)?(this.particleBringToTop?this.alive.push(ft):this.alive.unshift(ft),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,ft,this)):this.dead.push(ft),Q>0&&(this.stopCounter++,this.stopCounter>=Q)||this.atLimit())break}return ft}},fastForward:function(V,$){$===void 0&&($=1e3/60);var j=0;for(this.skipping=!0;j<Math.abs(V);)this.preUpdate(0,$),j+=$;return this.skipping=!1,this},preUpdate:function(V,$){$*=this.timeScale;var j=$/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var k=this.getProcessors(),Q=this.alive,et=this.dead,at=0,q=[],ft=Q.length;for(at=0;at<ft;at++){var vt=Q[at];vt.update($,j,k)&&q.push({index:at,particle:vt})}if(ft=q.length,ft>0){var Tt=this.deathCallback,ct=this.deathCallbackScope;for(at=ft-1;at>=0;at--){var Ut=q[at];Q.splice(Ut.index,1),et.push(Ut.particle),Tt&&Tt.call(ct,Ut.particle),Ut.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&Q.length===0&&(this.completeFlag=0,this.emit(l.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=$;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=$,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(V){for(var $=this.getWorldTransformMatrix(),j=this.alive,k=j.length,Q=[],et=0;et<k;et++){var at=j[et];D(V,at.getBounds($))&&Q.push(at)}return Q},getBounds:function(V,$,j,k){V===void 0&&(V=0),$===void 0&&($=0),j===void 0&&(j=1e3/60),k===void 0&&(k=new L);var Q=this.getWorldTransformMatrix(),et,at,q=this.alive,ft=!1;if(k.setTo(0,0,0,0),$>0){var vt=0;for(this.skipping=!0;vt<Math.abs($);){for(this.preUpdate(0,j),et=0;et<q.length;et++)at=q[et].getBounds(Q),ft?R(k,at):(ft=!0,o(at,k));vt+=j}this.skipping=!1}else for(et=0;et<q.length;et++)at=q[et].getBounds(Q),ft?R(k,at):(ft=!0,o(at,k));return V>0&&A(k,V,V),k},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(V){this.ops.x.onChange(V)}},particleY:{get:function(){return this.ops.y.current},set:function(V){this.ops.y.onChange(V)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(V){this.ops.accelerationX.onChange(V)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(V){this.ops.accelerationY.onChange(V)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(V){this.ops.maxVelocityX.onChange(V)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(V){this.ops.maxVelocityY.onChange(V)}},speed:{get:function(){return this.ops.speedX.current},set:function(V){this.ops.speedX.onChange(V),this.ops.speedY.onChange(V)}},speedX:{get:function(){return this.ops.speedX.current},set:function(V){this.ops.speedX.onChange(V)}},speedY:{get:function(){return this.ops.speedY.current},set:function(V){this.ops.speedY.onChange(V)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(V){this.ops.moveToX.onChange(V)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(V){this.ops.moveToY.onChange(V)}},bounce:{get:function(){return this.ops.bounce.current},set:function(V){this.ops.bounce.onChange(V)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(V){this.ops.scaleX.onChange(V)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(V){this.ops.scaleY.onChange(V)}},particleColor:{get:function(){return this.ops.color.current},set:function(V){this.ops.color.onChange(V)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(V){this.ops.color.setEase(V)}},particleTint:{get:function(){return this.ops.tint.current},set:function(V){this.ops.tint.onChange(V)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(V){this.ops.alpha.onChange(V)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(V){this.ops.lifespan.onChange(V)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(V){this.ops.angle.onChange(V)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(V){this.ops.rotate.onChange(V)}},quantity:{get:function(){return this.ops.quantity.current},set:function(V){this.ops.quantity.onChange(V)}},delay:{get:function(){return this.ops.delay.current},set:function(V){this.ops.delay.onChange(V)}},hold:{get:function(){return this.ops.hold.current},set:function(V){this.ops.hold.onChange(V)}},flowCounter:{get:function(){return this.counters[0]},set:function(V){this.counters[0]=V}},frameCounter:{get:function(){return this.counters[1]},set:function(V){this.counters[1]=V}},animCounter:{get:function(){return this.counters[2]},set:function(V){this.counters[2]=V}},elapsed:{get:function(){return this.counters[3]},set:function(V){this.counters[3]=V}},stopCounter:{get:function(){return this.counters[4]},set:function(V){this.counters[4]=V}},completeFlag:{get:function(){return this.counters[5]},set:function(V){this.counters[5]=V}},zoneIndex:{get:function(){return this.counters[6]},set:function(V){this.counters[6]=V}},zoneTotal:{get:function(){return this.counters[7]},set:function(V){this.counters[7]=V}},currentFrame:{get:function(){return this.counters[8]},set:function(V){this.counters[8]=V}},currentAnim:{get:function(){return this.counters[9]},set:function(V){this.counters[9]=V}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var V,$=this.ops;for(V=0;V<N.length;V++){var j=N[V];$[j].destroy()}for(V=0;V<this.alive.length;V++)this.alive[V].destroy();for(V=0;V<this.dead.length;V++)this.dead[V].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});s.exports=W}),9871:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59996),g=e(61340),f=new g,o=new g,u=new g,r=new g,h=function(c,l,p,m){var v=f,y=o,E=u,C=r;m?(C.loadIdentity(),C.multiply(m),C.translate(l.x,l.y),C.rotate(l.rotation),C.scale(l.scaleX,l.scaleY)):C.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var w=c.currentContext,A=p.roundPixels,M=p.alpha,R=l.alpha,P=l.alive,b=P.length,F=l.viewBounds;if(!(!l.visible||b===0||F&&!a(F,p.worldView))){l.sortCallback&&l.depthSort(),p.addToRenderList(l);var I=l.scrollFactorX,L=l.scrollFactorY;w.save(),w.globalCompositeOperation=c.blendModes[l.blendMode];for(var D=0;D<b;D++){var O=P[D],z=O.alpha*R*M;if(!(z<=0||O.scaleX===0||O.scaleY===0)){E.applyITRS(O.x,O.y,O.rotation,O.scaleX,O.scaleY),v.copyFrom(p.matrix),v.multiplyWithOffset(C,-p.scrollX*I,-p.scrollY*L),E.e=O.x,E.f=O.y,v.multiply(E,y);var _=O.frame,X=_.canvasData;if(X.width>0&&X.height>0){var H=-_.halfWidth,U=-_.halfHeight;w.globalAlpha=z,w.save(),y.setToContext(w),A&&(H=Math.round(H),U=Math.round(U)),w.imageSmoothingEnabled=!_.source.scaleMode,w.drawImage(_.source.image,X.x,X.y,X.width,X.height,H,U,X.width,X.height),w.restore()}}}w.restore()}};s.exports=h}),92730:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(95540),u=e(31600);g.register("particles",function(r,h){r===void 0&&(r={});var c=f(r,"key",null),l=o(r,"config",null),p=new u(this.scene,0,0,c);return h!==void 0&&(r.add=h),a(this.scene,p,r),l&&p.setConfig(l),p})}),676:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(31600);a.register("particles",function(f,o,u,r){return f!==void 0&&typeof f=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new g(this.scene,f,o,u,r))})}),90668:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(21188),f=e(9871),s.exports={renderWebGL:g,renderCanvas:f}}),21188:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59996),g=e(61340),f=e(70554),o=new g,u=new g,r=new g,h=new g,c=function(l,p,m,v){var y=l.pipelines.set(p.pipeline),E=o,C=u,w=r,A=h;v?(A.loadIdentity(),A.multiply(v),A.translate(p.x,p.y),A.rotate(p.rotation),A.scale(p.scaleX,p.scaleY)):A.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY);var M=f.getTintAppendFloatAlpha,R=m.alpha,P=p.alpha;l.pipelines.preBatch(p);var b=p.alive,F=b.length,I=p.viewBounds;if(!(F===0||I&&!a(I,m.worldView))){p.sortCallback&&p.depthSort(),m.addToRenderList(p),E.copyFrom(m.matrix),E.multiplyWithOffset(A,-m.scrollX*p.scrollFactorX,-m.scrollY*p.scrollFactorY),l.setBlendMode(p.blendMode),p.mask&&(p.mask.preRenderWebGL(l,p,m),l.pipelines.set(p.pipeline));for(var L=p.tintFill,D,O,z=0;z<F;z++){var _=b[z],X=_.alpha*P*R;if(!(X<=0||_.scaleX===0||_.scaleY===0)){w.applyITRS(_.x,_.y,_.rotation,_.scaleX,_.scaleY),w.e=_.x,w.f=_.y,E.multiply(w,C);var H=_.frame;H.glTexture!==O&&(O=H.glTexture,D=y.setGameObject(p,H));var U=-H.halfWidth,G=-H.halfHeight,N=C.setQuad(U,G,U+H.width,G+H.height),W=M(_.tint,X);y.shouldFlush(6)&&(y.flush(),D=y.setGameObject(p,H)),y.batchQuad(p,N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],H.u0,H.v0,H.u1,H.v1,W,W,W,W,L,O,D)}}p.mask&&p.mask.postRenderWebGL(l,m),l.pipelines.postBatch(p)}};s.exports=c}),20286:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r){o===void 0&&(o=0),u===void 0&&(u=0),r===void 0&&(r=!0),this.emitter,this.x=o,this.y=u,this.active=r},update:function(){},destroy:function(){this.emitter=null}});s.exports=g}),9774:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),812:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="deathzone"}),30522:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="explode"}),96695:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),18677:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stop"}),20696:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={COMPLETE:e(9774),DEATH_ZONE:e(812),EXPLODE:e(30522),START:e(96695),STOP:e(18677)}}),18404:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={EmitterColorOp:e(76472),EmitterOp:e(44777),Events:e(20696),GravityWell:e(24502),Particle:e(56480),ParticleBounds:e(69601),ParticleEmitter:e(31600),ParticleProcessor:e(20286),Zones:e(21024)}}),26388:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u){this.source=o,this.killOnEnter=u},willKill:function(f){var o=f.worldPosition,u=this.source.contains(o.x,o.y);return u&&this.killOnEnter||!u&&!this.killOnEnter}});s.exports=g}),19909:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r,h,c,l){h===void 0&&(h=!1),c===void 0&&(c=!0),l===void 0&&(l=-1),this.source=o,this.points=[],this.quantity=u,this.stepRate=r,this.yoyo=h,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.total=l,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var f=this.points[0],o=this.points[this.points.length-1];f.x===o.x&&f.y===o.y&&this.points.pop()}var u=this._length;return this._length=this.points.length,this._length<u&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(f){return this.source=f,this.updateSource()},getPoint:function(f){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(f.x=o.x,f.y=o.y)}});s.exports=g}),68875:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(26099),f=new a({initialize:function(u){this.source=u,this._tempVec=new g,this.total=-1},getPoint:function(o){var u=this._tempVec;this.source.getRandomPoint(u),o.x=u.x,o.y=u.y}});s.exports=f}),21024:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={DeathZone:e(26388),EdgeZone:e(19909),RandomZone:e(68875)}}),1159:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(68287),o=new a({Extends:f,Mixins:[g.PathFollower],initialize:function(r,h,c,l,p,m){f.call(this,r,c,l,p,m),this.path=h},preUpdate:function(u,r){this.anims.update(u,r),this.pathUpdate(u)}});s.exports=o}),90145:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(1159);a.register("follower",function(f,o,u,r,h){var c=new g(this.scene,f,o,u,r,h);return this.displayList.add(c),this.updateList.add(c),c})}),33663:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),g=e(83419),f=e(48803),o=e(90664),u=e(4703),r=e(45650),h=new g({Extends:u,initialize:function(l,p,m,v,y,E,C,w){v||(v="__DEFAULT"),u.call(this,l,p,m,v,y),this.type="Plane",this.anims=new a(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(E,C,w),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(c,l,p){c===void 0&&(c=8),l===void 0&&(l=8),p===void 0&&(p=!1);var m=!1;return p&&(m=!0),this.gridWidth=c,this.gridHeight=l,this.isTiled=p,this.clear(),f({mesh:this,widthSegments:c,heightSegments:l,isOrtho:!1,tile:p,flipY:m}),this},setSizeToFrame:function(c){c===void 0&&(c=!0);var l=this.frame;if(this.setPerspective(this.width/l.width,this.height/l.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!c)return this;var p=this.gridWidth,m=this.gridHeight,v=this.vertices,y=l.u0,E=l.u1,C=l.v0,w=l.v1,A,M,R=0;if(this.isTiled)for(C=l.v1,w=l.v0,M=0;M<m;M++)for(A=0;A<p;A++)v[R++].setUVs(y,w),v[R++].setUVs(y,C),v[R++].setUVs(E,w),v[R++].setUVs(y,C),v[R++].setUVs(E,C),v[R++].setUVs(E,w);else{var P=p+1,b=m+1,F=E-y,I=w-C,L=[];for(M=0;M<b;M++)for(A=0;A<P;A++){var D=y+F*(A/p),O=C+I*(M/m);L.push(D,O)}for(M=0;M<m;M++)for(A=0;A<p;A++){var z=(A+P*M)*2,_=(A+P*(M+1))*2,X=(A+1+P*(M+1))*2,H=(A+1+P*M)*2;v[R++].setUVs(L[z],L[z+1]),v[R++].setUVs(L[_],L[_+1]),v[R++].setUVs(L[H],L[H+1]),v[R++].setUVs(L[_],L[_+1]),v[R++].setUVs(L[X],L[X+1]),v[R++].setUVs(L[H],L[H+1])}}return this},setViewHeight:function(c){c===void 0&&(c=this.frame.height);var l=this.fov*(Math.PI/180);this.viewPosition.z=this.height/c/Math.tan(l/2),this.dirtyCache[10]=1},createCheckerboard:function(c,l,p,m,v){c===void 0&&(c=16777215),l===void 0&&(l=255),p===void 0&&(p=255),m===void 0&&(m=255),v===void 0&&(v=128);for(var y=o(c),E=o(l),C=[],w=0;w<16;w++)for(var A=0;A<16;A++)w<8&&A<8||w>7&&A>7?C.push(y.r,y.g,y.b,p):C.push(E.r,E.g,E.b,m);var M=this.scene.sys.textures.addUint8Array(r(),new Uint8Array(C),16,16);return this.removeCheckerboard(),this.setTexture(M),this.setSizeToFrame(),this.setViewHeight(v),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(c,l){return this.anims.play(c,l)},playReverse:function(c,l){return this.anims.playReverse(c,l)},playAfterDelay:function(c,l){return this.anims.playAfterDelay(c,l)},playAfterRepeat:function(c,l){return this.anims.playAfterRepeat(c,l)},stop:function(){return this.anims.stop()},stopAfterDelay:function(c){return this.anims.stopAfterDelay(c)},stopAfterRepeat:function(c){return this.anims.stopAfterRepeat(c)},stopOnFrame:function(c){return this.anims.stopOnFrame(c)},preUpdate:function(c,l){u.prototype.preUpdate.call(this,c,l),this.anims.update(c,l)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});s.exports=h}),56015:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(13059),f=e(44603),o=e(23568),u=e(35154),r=e(33663);f.register("plane",function(h,c){h===void 0&&(h={});var l=o(h,"key",null),p=o(h,"frame",null),m=u(h,"width",8),v=u(h,"height",8),y=u(h,"tile",!1),E=new r(this.scene,0,0,l,p,m,v,y);c!==void 0&&(h.add=c);var C=u(h,"checkerboard",null);if(C){var w=u(C,"color1",16777215),A=u(C,"color2",255),M=u(C,"alpha1",255),R=u(C,"alpha2",255),P=u(C,"height",128);E.createCheckerboard(w,A,M,R,P)}return a(this.scene,E,h),g(E,h),E})}),30985:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33663),g=e(39429);g.register("plane",function(f,o,u,r,h,c,l){return this.displayList.add(new a(this.scene,f,o,u,r,h,c,l))})}),80321:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(95643),o=e(30100),u=e(36060),r=e(67277),h=new a({Extends:f,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible,r],initialize:function(l,p,m,v,y,E,C){v===void 0&&(v=16777215),y===void 0&&(y=128),E===void 0&&(E=1),C===void 0&&(C=.1),f.call(this,l,"PointLight"),this.initPipeline(u.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(p,m),this.color=o(v),this.intensity=E,this.attenuation=C,this.width=y*2,this.height=y*2,this._radius=y},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});s.exports=h}),39829:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(80321);g.register("pointlight",function(u,r){u===void 0&&(u={});var h=f(u,"color",16777215),c=f(u,"radius",128),l=f(u,"intensity",1),p=f(u,"attenuation",.1),m=new o(this.scene,0,0,h,c,l,p);return r!==void 0&&(u.add=r),a(this.scene,m,u),m})}),71255:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(80321);a.register("pointlight",function(f,o,u,r,h,c){return this.displayList.add(new g(this.scene,f,o,u,r,h,c))})}),67277:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(57787),s.exports={renderWebGL:g,renderCanvas:f}}),57787:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=function(f,o,u,r){u.addToRenderList(o);var h=f.pipelines.set(o.pipeline),c=a(o,u,r).calc,l=o.width,p=o.height,m=-o._radius,v=-o._radius,y=m+l,E=v+p,C=c.getX(0,0),w=c.getY(0,0),A=c.getX(m,v),M=c.getY(m,v),R=c.getX(m,E),P=c.getY(m,E),b=c.getX(y,E),F=c.getY(y,E),I=c.getX(y,v),L=c.getY(y,v);f.pipelines.preBatch(o),h.batchPointLight(o,u,A,M,R,P,b,F,I,L,C,w),f.pipelines.postBatch(o)};s.exports=g}),591:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(81320),f=e(88571),o=new a({Extends:f,initialize:function(r,h,c,l,p,m){h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l=32),p===void 0&&(p=32),m===void 0&&(m=!0);var v=new g(r.sys.textures,"",l,p,m);f.call(this,r,h,c,v),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(u,r){this.width=u,this.height=r,this.updateDisplayOrigin();var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=u,h.hitArea.height=r),this},resize:function(u,r,h){return this.texture.setSize(u,r,h),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(u){var r=this.texture;return r.key=u,r.manager.addDynamicTexture(r)&&(this._saved=!0),r},fill:function(u,r,h,c,l,p){return this.texture.fill(u,r,h,c,l,p),this},clear:function(){return this.texture.clear(),this},stamp:function(u,r,h,c,l){return this.texture.stamp(u,r,h,c,l),this},erase:function(u,r,h){return this.texture.erase(u,r,h),this},draw:function(u,r,h,c,l){return this.texture.draw(u,r,h,c,l),this},drawFrame:function(u,r,h,c,l,p){return this.texture.drawFrame(u,r,h,c,l,p),this},repeat:function(u,r,h,c,l,p,m,v,y){return this.texture.repeat(u,r,h,c,l,p,m,v,y),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(u,r,h,c,l){return this.texture.batchDraw(u,r,h,c,l),this},batchDrawFrame:function(u,r,h,c,l,p){return this.texture.batchDrawFrame(u,r,h,c,l,p),this},endDraw:function(u){return this.texture.endDraw(u),this},snapshotArea:function(u,r,h,c,l,p,m){return this.texture.snapshotArea(u,r,h,c,l,p,m),this},snapshot:function(u,r,h){return this.snapshotArea(0,0,this.width,this.height,u,r,h)},snapshotPixel:function(u,r,h){return this.snapshotArea(u,r,1,1,h,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});s.exports=o}),34495:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(591);g.register("renderTexture",function(u,r){u===void 0&&(u={});var h=f(u,"x",0),c=f(u,"y",0),l=f(u,"width",32),p=f(u,"height",32),m=new o(this.scene,h,c,l,p);return r!==void 0&&(u.add=r),a(this.scene,m,u),m})}),60505:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(591);a.register("renderTexture",function(f,o,u,r){return this.displayList.add(new g(this.scene,f,o,u,r))})}),77757:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),g=e(83419),f=e(31401),o=e(95643),u=e(36060),r=e(38745),h=e(26099),c=new g({Extends:o,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Flip,f.Mask,f.Pipeline,f.PostPipeline,f.Size,f.Texture,f.Transform,f.Visible,f.ScrollFactor,r],initialize:function(p,m,v,y,E,C,w,A,M){y===void 0&&(y="__DEFAULT"),C===void 0&&(C=2),w===void 0&&(w=!0),o.call(this,p,"Rope"),this.anims=new a(this),this.points=C,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=y==="__DEFAULT",this.dirty=!1,this.horizontal=w,this._flipX=!1,this._flipY=!1,this._perp=new h,this.debugCallback=null,this.debugGraphic=null,this.setTexture(y,E),this.setPosition(m,v),this.setSizeToFrame(),this.initPipeline(u.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(C)&&this.resizeArrays(C.length),this.setPoints(C,A,M),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,p){var m=this.anims.currentFrame;this.anims.update(l,p),this.anims.currentFrame!==m&&(this.updateUVs(),this.updateVertices())},play:function(l,p,m){return this.anims.play(l,p,m),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(l,p,m){return l===void 0&&(l=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(l,p,m))},setVertical:function(l,p,m){return l===void 0&&(l=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(l,p,m)):this},setTintFill:function(l){return l===void 0&&(l=!1),this.tintFill=l,this},setAlphas:function(l,p){var m=this.points.length;if(m<1)return this;var v=this.alphas;l===void 0?l=[1]:!Array.isArray(l)&&p===void 0&&(l=[l]);var y,E=0;if(p!==void 0)for(y=0;y<m;y++)E=y*2,v[E]=l,v[E+1]=p;else if(l.length===m)for(y=0;y<m;y++)E=y*2,v[E]=l[y],v[E+1]=l[y];else{var C=l[0];for(y=0;y<m;y++)E=y*2,l.length>E&&(C=l[E]),v[E]=C,l.length>E+1&&(C=l[E+1]),v[E+1]=C}return this},setColors:function(l){var p=this.points.length;if(p<1)return this;var m=this.colors;l===void 0?l=[16777215]:Array.isArray(l)||(l=[l]);var v,y=0;if(l.length===p)for(v=0;v<p;v++)y=v*2,m[y]=l[v],m[y+1]=l[v];else{var E=l[0];for(v=0;v<p;v++)y=v*2,l.length>y&&(E=l[y]),m[y]=E,l.length>y+1&&(E=l[y+1]),m[y+1]=E}return this},setPoints:function(l,p,m){if(l===void 0&&(l=2),typeof l=="number"){var v=l;v<2&&(v=2),l=[];var y,E,C;if(this.horizontal)for(C=-this.frame.halfWidth,E=this.frame.width/(v-1),y=0;y<v;y++)l.push({x:C+y*E,y:0});else for(C=-this.frame.halfHeight,E=this.frame.height/(v-1),y=0;y<v;y++)l.push({x:0,y:C+y*E})}var w=l.length,A=this.points.length;return w<1?(console.warn("Rope: Not enough points given"),this):(w===1&&(l.unshift({x:0,y:0}),w++),A!==w&&this.resizeArrays(w),this.dirty=!0,this.points=l,this.updateUVs(),p!=null&&this.setColors(p),m!=null&&this.setAlphas(m),this)},updateUVs:function(){for(var l=this.uv,p=this.points.length,m=this.frame.u0,v=this.frame.v0,y=this.frame.u1,E=this.frame.v1,C=(y-m)/(p-1),w=(E-v)/(p-1),A=0;A<p;A++){var M=A*4,R,P,b,F;this.horizontal?(this._flipX?(R=y-A*C,b=y-A*C):(R=m+A*C,b=m+A*C),this._flipY?(P=E,F=v):(P=v,F=E)):(this._flipX?(R=m,b=y):(R=y,b=m),this._flipY?(P=E-A*w,F=E-A*w):(P=v+A*w,F=v+A*w)),l[M+0]=R,l[M+1]=P,l[M+2]=b,l[M+3]=F}return this},resizeArrays:function(l){var p=this.colors,m=this.alphas;this.vertices=new Float32Array(l*4),this.uv=new Float32Array(l*4),p=new Uint32Array(l*2),m=new Float32Array(l*2);for(var v=0;v<l*2;v++)p[v]=16777215,m[v]=1;return this.colors=p,this.alphas=m,this.dirty=!0,this},updateVertices:function(){var l=this._perp,p=this.points,m=this.vertices,v=p.length;if(this.dirty=!1,!(v<1)){for(var y,E=p[0],C=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,w=0;w<v;w++){var A=p[w],M=w*4;w<v-1?y=p[w+1]:y=A,l.x=y.y-E.y,l.y=-(y.x-E.x);var R=l.length();l.x/=R,l.y/=R,l.x*=C,l.y*=C,m[M]=A.x+l.x,m[M+1]=A.y+l.y,m[M+2]=A.x-l.x,m[M+3]=A.y-l.y,E=A}return this}},setDebug:function(l,p){return this.debugGraphic=l,!l&&!p?this.debugCallback=null:p?this.debugCallback=p:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(l,p,m){var v=l.debugGraphic,y=m[0],E=m[1],C=m[2],w=m[3];v.lineBetween(y,E,C,w);for(var A=4;A<p;A+=4){var M=m[A+0],R=m[A+1],P=m[A+2],b=m[A+3];v.lineBetween(y,E,M,R),v.lineBetween(C,w,P,b),v.lineBetween(C,w,M,R),v.lineBetween(M,R,P,b),y=M,E=R,C=P,w=b}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(l){return this._flipX=l,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(l){return this._flipY=l,this.updateUVs()}}});s.exports=c}),95262:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};s.exports=T}),26209:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(35154),u=e(77757);g.register("rope",function(r,h){r===void 0&&(r={});var c=f(r,"key",null),l=f(r,"frame",null),p=f(r,"horizontal",!0),m=o(r,"points",void 0),v=o(r,"colors",void 0),y=o(r,"alphas",void 0),E=new u(this.scene,0,0,c,l,m,p,v,y);return h!==void 0&&(r.add=h),a(this.scene,E,r),E})}),96819:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(77757),g=e(39429);g.register("rope",function(f,o,u,r,h,c,l,p){return this.displayList.add(new a(this.scene,f,o,u,r,h,c,l,p))})}),38745:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(20439),f=e(95262),s.exports={renderWebGL:g,renderCanvas:f}}),20439:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=e(70554),f=function(o,u,r,h){r.addToRenderList(u);var c=o.pipelines.set(u.pipeline,u),l=a(u,r,h).calc,p=u.vertices,m=u.uv,v=u.colors,y=u.alphas,E=u.alpha,C=g.getTintAppendFloatAlpha,w=r.roundPixels,A=p.length,M=Math.floor(A*.5);c.flush(),o.pipelines.preBatch(u);var R=c.setGameObject(u),P=c.vertexViewF32,b=c.vertexViewU32,F=c.vertexCount*c.currentShader.vertexComponentCount-1,I=0,L=u.tintFill;u.dirty&&u.updateVertices();for(var D=u.debugCallback,O=[],z=0;z<A;z+=2){var _=p[z+0],X=p[z+1],H=_*l.a+X*l.c+l.e,U=_*l.b+X*l.d+l.f;w&&(H=Math.round(H),U=Math.round(U)),P[++F]=H,P[++F]=U,P[++F]=m[z+0],P[++F]=m[z+1],P[++F]=R,P[++F]=L,b[++F]=C(v[I],r.alpha*(y[I]*E)),I++,D&&(O[z+0]=H,O[z+1]=U)}D&&D.call(u,u,A,O),c.vertexCount+=M,c.currentBatch.count=c.vertexCount-c.currentBatch.start,o.pipelines.postBatch(u)};s.exports=f}),20071:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(95643),o=e(95540),u=e(79291),r=e(61622),h=e(25479),c=e(61340),l=e(95428),p=e(92503),m=new a({Extends:f,Mixins:[g.ComputedSize,g.Depth,g.GetBounds,g.Mask,g.Origin,g.ScrollFactor,g.Transform,g.Visible,h],initialize:function(y,E,C,w,A,M,R,P){C===void 0&&(C=0),w===void 0&&(w=0),A===void 0&&(A=128),M===void 0&&(M=128),f.call(this,y,"Shader"),this.blendMode=-1,this.shader;var b=y.sys.renderer;this.renderer=b,this.gl=b.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=b.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=b.width,this._rendererHeight=b.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(C,w),this.setSize(A,M),this.setOrigin(.5,.5),this.setShader(E,R,P),this.renderer.on(p.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(v){return this.renderToTexture?!0:!(f.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},setRenderToTexture:function(v,y){if(!this.renderToTexture){var E=this.width,C=this.height,w=this.renderer;this.glTexture=w.createTextureFromSource(null,E,C,0),this.framebuffer=w.createFramebuffer(E,C,this.glTexture,!1),this._rendererWidth=E,this._rendererHeight=C,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),v&&(this.texture=this.scene.sys.textures.addGLTexture(v,this.glTexture))}return this.shader&&(w.pipelines.clear(),this.load(),this.flush(),w.pipelines.rebind()),this},setShader:function(v,y,E){if(this.renderer.contextLost)return this._deferSetShader={key:v,textures:y,textureData:E},this;if(y===void 0&&(y=[]),typeof v=="string"){var C=this.scene.sys.cache.shader;if(!C.has(v))return console.warn("Shader missing: "+v),this;this.shader=C.get(v)}else this.shader=v;var w=this.gl,A=this.renderer;this.program&&A.deleteProgram(this.program);var M=A.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);w.uniformMatrix4fv(w.getUniformLocation(M.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),w.uniformMatrix4fv(w.getUniformLocation(M.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),w.uniform2f(w.getUniformLocation(M.webGLProgram,"uResolution"),this.width,this.height),this.program=M;var R=new Date,P={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[R.getFullYear(),R.getMonth(),R.getDate(),R.getHours()*60*60+R.getMinutes()*60+R.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=u(!0,{},this.shader.uniforms,P):this.uniforms=P;for(var b=0;b<4;b++)y[b]&&this.setSampler2D("iChannel"+b,y[b],b,E);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(v){return this.pointer=v,this},projOrtho:function(v,y,E,C){if(this.renderer.contextLost){this._deferProjOrtho={left:v,right:y,bottom:E,top:C};return}var w=-1e3,A=1e3,M=1/(v-y),R=1/(E-C),P=1/(w-A),b=this.projectionMatrix;b[0]=-2*M,b[5]=-2*R,b[10]=2*P,b[12]=(v+y)*M,b[13]=(C+E)*R,b[14]=(A+w)*P;var F=this.program,I=this.gl,L=this.renderer;L.setProgram(F),I.uniformMatrix4fv(I.getUniformLocation(F.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=y,this._rendererHeight=E},initUniforms:function(){var v=this.renderer.glFuncMap,y=this.program;this._textureCount=0;for(var E in this.uniforms){var C=this.uniforms[E],w=C.type,A=v[w];C.uniformLocation=this.renderer.createUniformLocation(y,E),w!=="sampler2D"&&(C.glMatrix=A.matrix,C.glValueLength=A.length,C.glFunc=A.func)}},setSampler2DBuffer:function(v,y,E,C,w,A){w===void 0&&(w=0),A===void 0&&(A={});var M=this.uniforms[v];return M.value=y,A.width=E,A.height=C,M.textureData=A,this._textureCount=w,this.initSampler2D(M),this},setSampler2D:function(v,y,E,C){E===void 0&&(E=0);var w=this.scene.sys.textures;if(w.exists(y)){var A=w.getFrame(y);if(A.glTexture&&A.glTexture.isRenderTexture)return this.setSampler2DBuffer(v,A.glTexture,A.width,A.height,E,C);var M=this.uniforms[v],R=A.source;M.textureKey=y,M.source=R.image,M.value=A.glTexture,R.isGLTexture&&(C||(C={}),C.width=R.width,C.height=R.height),C&&(M.textureData=C),this._textureCount=E,this.initSampler2D(M)}return this},setUniform:function(v,y){return r(this.uniforms,v,y),this},getUniform:function(v){return o(this.uniforms,v,null)},setChannel0:function(v,y){return this.setSampler2D("iChannel0",v,0,y)},setChannel1:function(v,y){return this.setSampler2D("iChannel1",v,1,y)},setChannel2:function(v,y){return this.setSampler2D("iChannel2",v,2,y)},setChannel3:function(v,y){return this.setSampler2D("iChannel3",v,3,y)},initSampler2D:function(v){if(v.value){var y=v.textureData;if(y&&!v.value.isRenderTexture){var E=this.gl,C=v.value,w=E[o(y,"magFilter","linear").toUpperCase()],A=E[o(y,"minFilter","linear").toUpperCase()],M=E[o(y,"wrapS","repeat").toUpperCase()],R=E[o(y,"wrapT","repeat").toUpperCase()],P=E[o(y,"format","rgba").toUpperCase()],b=o(y,"flipY",!1),F=o(y,"width",C.width),I=o(y,"height",C.height),L=o(y,"source",C.pixels);y.repeat&&(M=E.REPEAT,R=E.REPEAT),y.width&&(L=null),C.update(L,F,I,b,M,R,A,w,P)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var v=this.gl,y=this.uniforms,E,C,w,A,M,R=0;for(var P in y)E=y[P],w=E.glFunc,C=E.glValueLength,A=E.uniformLocation,M=E.value,M!==null&&(C===1?E.glMatrix?w.call(v,A.webGLUniformLocation,E.transpose,M):w.call(v,A.webGLUniformLocation,M):C===2?w.call(v,A.webGLUniformLocation,M.x,M.y):C===3?w.call(v,A.webGLUniformLocation,M.x,M.y,M.z):C===4?w.call(v,A.webGLUniformLocation,M.x,M.y,M.z,M.w):E.type==="sampler2D"&&(v.activeTexture(v.TEXTURE0+R),v.bindTexture(v.TEXTURE_2D,M.webGLTexture),v.uniform1i(A.webGLUniformLocation,R),R++))},load:function(v){var y=this.gl,E=this.width,C=this.height,w=this.renderer,A=this.program,M=this.viewMatrix;if(!this.renderToTexture){var R=-this._displayOriginX,P=-this._displayOriginY;M[0]=v[0],M[1]=v[1],M[4]=v[2],M[5]=v[3],M[8]=v[4],M[9]=v[5],M[12]=M[0]*R+M[4]*P,M[13]=M[1]*R+M[5]*P}y.useProgram(A.webGLProgram),y.uniformMatrix4fv(y.getUniformLocation(A.webGLProgram,"uViewMatrix"),!1,M),y.uniformMatrix4fv(y.getUniformLocation(A.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),y.uniform2f(y.getUniformLocation(A.webGLProgram,"uResolution"),this.width,this.height);var b=this.uniforms,F=b.resolution;F.value.x=E,F.value.y=C,b.time.value=w.game.loop.getDuration();var I=this.pointer;if(I){var L=b.mouse,D=I.x/E,O=1-I.y/C;L.value.x=D.toFixed(2),L.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var v=this.width,y=this.height,E=this.program,C=this.gl,w=this.vertexBuffer,A=this.renderer,M=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(A.setFramebuffer(this.framebuffer),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT)),C.bindBuffer(C.ARRAY_BUFFER,w.webGLBuffer);var R=C.getAttribLocation(E.webGLProgram,"inPosition");R!==-1&&(C.enableVertexAttribArray(R),C.vertexAttribPointer(R,2,C.FLOAT,!1,M,0));var P=this.vertexViewF32;P[3]=y,P[4]=v,P[5]=y,P[8]=v,P[9]=y,P[10]=v;var b=6;C.bufferSubData(C.ARRAY_BUFFER,0,this.bytes.subarray(0,b*M)),C.drawArrays(C.TRIANGLES,0,b),this.renderToTexture&&A.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var v=this._deferSetShader.key,y=this._deferSetShader.textures,E=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(v,y,E)}if(this._deferProjOrtho!==null){var C=this._deferProjOrtho.left,w=this._deferProjOrtho.right,A=this._deferProjOrtho.bottom,M=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(C,w,A,M)}},preDestroy:function(){var v=this.renderer;v.off(p.RESTORE_WEBGL,this.onContextRestored,this),v.deleteProgram(this.program),v.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(v.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),l(this.uniforms,function(y){v.deleteUniformLocation(y.uniformLocation),y.uniformLocation=null})}});s.exports=m}),80464:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};s.exports=T}),54935:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(20071);g.register("shader",function(u,r){u===void 0&&(u={});var h=f(u,"key",null),c=f(u,"x",0),l=f(u,"y",0),p=f(u,"width",128),m=f(u,"height",128),v=new o(this.scene,h,c,l,p,m);return r!==void 0&&(u.add=r),a(this.scene,v,u),v})}),74177:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20071),g=e(39429);g.register("shader",function(f,o,u,r,h,c,l){return this.displayList.add(new a(this.scene,f,o,u,r,h,c,l))})}),25479:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(19257),f=e(80464),s.exports={renderWebGL:g,renderCanvas:f}}),19257:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=function(f,o,u,r){if(o.shader){if(u.addToRenderList(o),f.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var h=a(o,u,r).calc;(f.width!==o._rendererWidth||f.height!==o._rendererHeight)&&o.projOrtho(0,f.width,f.height,0),o.load(h.matrix),o.flush()}f.pipelines.rebind()}};s.exports=g}),10441:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),g=function(f,o,u,r,h,c){for(var l=a.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*r),p=u.pathData,m=u.pathIndexes,v=0;v<m.length;v+=3){var y=m[v]*2,E=m[v+1]*2,C=m[v+2]*2,w=p[y+0]-h,A=p[y+1]-c,M=p[E+0]-h,R=p[E+1]-c,P=p[C+0]-h,b=p[C+1]-c,F=o.getX(w,A),I=o.getY(w,A),L=o.getX(M,R),D=o.getY(M,R),O=o.getX(P,b),z=o.getY(P,b);f.batchTri(u,F,I,L,D,O,z,0,0,1,1,l,l,l,2)}};s.exports=g}),65960:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=g||a.fillColor,u=f||a.fillAlpha,r=(o&16711680)>>>16,h=(o&65280)>>>8,c=o&255;e.fillStyle="rgba("+r+","+h+","+c+","+u+")"};s.exports=T}),75177:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=g||a.strokeColor,u=f||a.strokeAlpha,r=(o&16711680)>>>16,h=(o&65280)>>>8,c=o&255;e.strokeStyle="rgba("+r+","+h+","+c+","+u+")",e.lineWidth=a.lineWidth};s.exports=T}),17803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(95643),o=e(23031),u=new a({Extends:f,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible],initialize:function(h,c,l){c===void 0&&(c="Shape"),f.call(this,h,c),this.geom=l,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(r,h){return h===void 0&&(h=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=h,this.isFilled=!0),this},setStrokeStyle:function(r,h,c){return c===void 0&&(c=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=h,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,h){return this.width=r,this.height=h,this},setDisplaySize:function(r,h){return this.displayWidth=r,this.displayHeight=h,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});s.exports=u}),34682:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),g=function(f,o,u,r,h){var c=f.strokeTint,l=a.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*u);c.TL=l,c.TR=l,c.BL=l,c.BR=l;var p=o.pathData,m=p.length-1,v=o.lineWidth,y=v/2,E=p[0]-r,C=p[1]-h;o.closePath||(m-=2);for(var w=2;w<m;w+=2){var A=p[w]-r,M=p[w+1]-h;f.batchLine(E,C,A,M,y,y,v,w-2,o.closePath?w===m-1:!1),E=A,C=M}};s.exports=g}),23629:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13609),g=e(83419),f=e(39506),o=e(94811),u=e(96503),r=e(36383),h=e(17803),c=new g({Extends:h,Mixins:[a],initialize:function(p,m,v,y,E,C,w,A,M){m===void 0&&(m=0),v===void 0&&(v=0),y===void 0&&(y=128),E===void 0&&(E=0),C===void 0&&(C=360),w===void 0&&(w=!1),h.call(this,p,"Arc",new u(0,0,y)),this._startAngle=E,this._endAngle=C,this._anticlockwise=w,this._iterations=.01,this.setPosition(m,v);var R=this.geom.radius*2;this.setSize(R,R),A!==void 0&&this.setFillStyle(A,M),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(l){this._iterations=l,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(l){this.geom.radius=l;var p=l*2;this.setSize(p,p),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(l){this._startAngle=l,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(l){this._endAngle=l,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(l){this._anticlockwise=l,this.updateData()}},setRadius:function(l){return this.radius=l,this},setIterations:function(l){return l===void 0&&(l=.01),this.iterations=l,this},setStartAngle:function(l,p){return this._startAngle=l,p!==void 0&&(this._anticlockwise=p),this.updateData()},setEndAngle:function(l,p){return this._endAngle=l,p!==void 0&&(this._anticlockwise=p),this.updateData()},updateData:function(){var l=this._iterations,p=l,m=this.geom.radius,v=f(this._startAngle),y=f(this._endAngle),E=this._anticlockwise,C=m,w=m;y-=v,E?y<-r.PI2?y=-r.PI2:y>0&&(y=-r.PI2+y%r.PI2):y>r.PI2?y=r.PI2:y<0&&(y=r.PI2+y%r.PI2);for(var A=[C+Math.cos(v)*m,w+Math.sin(v)*m],M;p<1;)M=y*p+v,A.push(C+Math.cos(M)*m,w+Math.sin(M)*m),p+=l;return M=y+v,A.push(C+Math.cos(M)*m,w+Math.sin(M)*m),A.push(C+Math.cos(v)*m,w+Math.sin(v)*m),this.pathIndexes=o(A),this.pathData=A,this}});s.exports=c}),42542:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39506),g=e(65960),f=e(75177),o=e(20926),u=function(r,h,c,l){c.addToRenderList(h);var p=r.currentContext;if(o(r,p,h,c,l)){var m=h.radius;p.beginPath(),p.arc(m-h.originX*(m*2),m-h.originY*(m*2),m,a(h._startAngle),a(h._endAngle),h.anticlockwise),h.closePath&&p.closePath(),h.isFilled&&(g(p,h),p.fill()),h.isStroked&&(f(p,h),p.stroke()),p.restore()}};s.exports=u}),42563:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23629),g=e(39429);g.register("arc",function(f,o,u,r,h,c,l,p){return this.displayList.add(new a(this.scene,f,o,u,r,h,c,l,p))}),g.register("circle",function(f,o,u,r,h){return this.displayList.add(new a(this.scene,f,o,u,0,360,!1,r,h))})}),13609:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(41447),f=e(42542),s.exports={renderWebGL:g,renderCanvas:f}}),41447:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=e(10441),f=e(34682),o=function(u,r,h,c){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=a(r,h,c),m=l.calcMatrix.copyFrom(p.calc),v=r._displayOriginX,y=r._displayOriginY,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&g(l,m,r,E,v,y),r.isStroked&&f(l,r,E,v,y),u.pipelines.postBatch(r)};s.exports=o}),89:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(33141),f=e(94811),o=e(87841),u=e(17803),r=new a({Extends:u,Mixins:[g],initialize:function(c,l,p,m,v,y){l===void 0&&(l=0),p===void 0&&(p=0),u.call(this,c,"Curve",m),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(l,p),v!==void 0&&this.setFillStyle(v,y),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){var h=this._curveBounds,c=this._smoothness;this.geom.getBounds(h,c),this.setSize(h.width,h.height),this.updateDisplayOrigin();for(var l=[],p=this.geom.getPoints(c),m=0;m<p.length;m++)l.push(p[m].x,p[m].y);return l.push(p[0].x,p[0].y),this.pathIndexes=f(l),this.pathData=l,this}});s.exports=r}),3170:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),g=e(75177),f=e(20926),o=function(u,r,h,c){h.addToRenderList(r);var l=u.currentContext;if(f(u,l,r,h,c)){var p=r._displayOriginX+r._curveBounds.x,m=r._displayOriginY+r._curveBounds.y,v=r.pathData,y=v.length-1,E=v[0]-p,C=v[1]-m;l.beginPath(),l.moveTo(E,C),r.closePath||(y-=2);for(var w=2;w<y;w+=2){var A=v[w]-p,M=v[w+1]-m;l.lineTo(A,M)}r.closePath&&l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(g(l,r),l.stroke()),l.restore()}};s.exports=o}),40511:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(89);a.register("curve",function(f,o,u,r,h){return this.displayList.add(new g(this.scene,f,o,u,r,h))})}),33141:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(53987),f=e(3170),s.exports={renderWebGL:g,renderCanvas:f}}),53987:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),g=e(91296),f=e(34682),o=function(u,r,h,c){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=g(r,h,c),m=l.calcMatrix.copyFrom(p.calc),v=r._displayOriginX+r._curveBounds.x,y=r._displayOriginY+r._curveBounds.y,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&a(l,m,r,E,v,y),r.isStroked&&f(l,r,E,v,y),u.pipelines.postBatch(r)};s.exports=o}),19921:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(94811),f=e(54205),o=e(8497),u=e(17803),r=new a({Extends:u,Mixins:[f],initialize:function(c,l,p,m,v,y,E){l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=128),v===void 0&&(v=128),u.call(this,c,"Ellipse",new o(m/2,v/2,m,v)),this._smoothness=64,this.setPosition(l,p),this.width=m,this.height=v,y!==void 0&&this.setFillStyle(y,E),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSize:function(h,c){return this.width=h,this.height=c,this.geom.setPosition(h/2,c/2),this.geom.setSize(h,c),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){for(var h=[],c=this.geom.getPoints(this._smoothness),l=0;l<c.length;l++)h.push(c[l].x,c[l].y);return h.push(c[0].x,c[0].y),this.pathIndexes=g(h),this.pathData=h,this}});s.exports=r}),7930:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),g=e(75177),f=e(20926),o=function(u,r,h,c){h.addToRenderList(r);var l=u.currentContext;if(f(u,l,r,h,c)){var p=r._displayOriginX,m=r._displayOriginY,v=r.pathData,y=v.length-1,E=v[0]-p,C=v[1]-m;l.beginPath(),l.moveTo(E,C),r.closePath||(y-=2);for(var w=2;w<y;w+=2){var A=v[w]-p,M=v[w+1]-m;l.lineTo(A,M)}l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(g(l,r),l.stroke()),l.restore()}};s.exports=o}),1543:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19921),g=e(39429);g.register("ellipse",function(f,o,u,r,h,c){return this.displayList.add(new a(this.scene,f,o,u,r,h,c))})}),54205:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(19467),f=e(7930),s.exports={renderWebGL:g,renderCanvas:f}}),19467:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),g=e(91296),f=e(34682),o=function(u,r,h,c){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=g(r,h,c),m=l.calcMatrix.copyFrom(p.calc),v=r._displayOriginX,y=r._displayOriginY,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&a(l,m,r,E,v,y),r.isStroked&&f(l,r,E,v,y),u.pipelines.postBatch(r)};s.exports=o}),30479:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(17803),f=e(26015),o=new a({Extends:g,Mixins:[f],initialize:function(r,h,c,l,p,m,v,y,E,C,w){h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l=128),p===void 0&&(p=128),m===void 0&&(m=32),v===void 0&&(v=32),g.call(this,r,"Grid",null),this.cellWidth=m,this.cellHeight=v,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(h,c),this.setSize(l,p),this.setFillStyle(y,E),C!==void 0&&this.setOutlineStyle(C,w),this.updateDisplayOrigin()},setFillStyle:function(u,r){return r===void 0&&(r=1),u===void 0?this.showCells=!1:(this.fillColor=u,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(u,r){return r===void 0&&(r=1),u===void 0?this.showAltCells=!1:(this.altFillColor=u,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(u,r){return r===void 0&&(r=1),u===void 0?this.showOutline=!1:(this.outlineFillColor=u,this.outlineFillAlpha=r,this.showOutline=!0),this}});s.exports=o}),49912:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),g=e(75177),f=e(20926),o=function(u,r,h,c){h.addToRenderList(r);var l=u.currentContext;if(f(u,l,r,h,c)){var p=-r._displayOriginX,m=-r._displayOriginY,v=h.alpha*r.alpha,y=r.width,E=r.height,C=r.cellWidth,w=r.cellHeight,A=Math.ceil(y/C),M=Math.ceil(E/w),R=C,P=w,b=C-(A*C-y),F=w-(M*w-E),I=r.showCells,L=r.showAltCells,D=r.showOutline,O=0,z=0,_=0,X=0,H=0;if(D&&(R--,P--,b===C&&b--,F===w&&F--),I&&r.fillAlpha>0)for(a(l,r),z=0;z<M;z++)for(L&&(_=z%2),O=0;O<A;O++){if(L&&_){_=0;continue}_++,X=O<A-1?R:b,H=z<M-1?P:F,l.fillRect(p+O*C,m+z*w,X,H)}if(L&&r.altFillAlpha>0)for(a(l,r,r.altFillColor,r.altFillAlpha*v),z=0;z<M;z++)for(L&&(_=z%2),O=0;O<A;O++){if(L&&!_){_=1;continue}_=0,X=O<A-1?R:b,H=z<M-1?P:F,l.fillRect(p+O*C,m+z*w,X,H)}if(D&&r.outlineFillAlpha>0){for(g(l,r,r.outlineFillColor,r.outlineFillAlpha*v),O=1;O<A;O++){var U=O*C;l.beginPath(),l.moveTo(U+p,m),l.lineTo(U+p,E+m),l.stroke()}for(z=1;z<M;z++){var G=z*w;l.beginPath(),l.moveTo(p,G+m),l.lineTo(p+y,G+m),l.stroke()}}l.restore()}};s.exports=o}),34137:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(30479);a.register("grid",function(f,o,u,r,h,c,l,p,m,v){return this.displayList.add(new g(this.scene,f,o,u,r,h,c,l,p,m,v))})}),26015:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(46161),f=e(49912),s.exports={renderWebGL:g,renderCanvas:f}}),46161:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=e(70554),f=function(o,u,r,h){r.addToRenderList(u);var c=o.pipelines.set(u.pipeline),l=a(u,r,h),p=c.calcMatrix.copyFrom(l.calc);p.translate(-u._displayOriginX,-u._displayOriginY);var m=r.alpha*u.alpha,v=u.width,y=u.height,E=u.cellWidth,C=u.cellHeight,w=Math.ceil(v/E),A=Math.ceil(y/C),M=E,R=C,P=E-(w*E-v),b=C-(A*C-y),F,I,L=u.showCells,D=u.showAltCells,O=u.showOutline,z=0,_=0,X=0,H=0,U=0;if(O&&(M--,R--,P===E&&P--,b===C&&b--),o.pipelines.preBatch(u),L&&u.fillAlpha>0)for(F=c.fillTint,I=g.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*m),F.TL=I,F.TR=I,F.BL=I,F.BR=I,_=0;_<A;_++)for(D&&(X=_%2),z=0;z<w;z++){if(D&&X){X=0;continue}X++,H=z<w-1?M:P,U=_<A-1?R:b,c.batchFillRect(z*E,_*C,H,U)}if(D&&u.altFillAlpha>0)for(F=c.fillTint,I=g.getTintAppendFloatAlpha(u.altFillColor,u.altFillAlpha*m),F.TL=I,F.TR=I,F.BL=I,F.BR=I,_=0;_<A;_++)for(D&&(X=_%2),z=0;z<w;z++){if(D&&!X){X=1;continue}X=0,H=z<w-1?M:P,U=_<A-1?R:b,c.batchFillRect(z*E,_*C,H,U)}if(O&&u.outlineFillAlpha>0){var G=c.strokeTint,N=g.getTintAppendFloatAlpha(u.outlineFillColor,u.outlineFillAlpha*m);for(G.TL=N,G.TR=N,G.BL=N,G.BR=N,z=1;z<w;z++){var W=z*E;c.batchLine(W,0,W,y,u.lineWidth,u.lineWidth,1,0,!1)}for(_=1;_<A;_++){var V=_*C;c.batchLine(0,V,v,V,u.lineWidth,u.lineWidth,1,0,!1)}}o.pipelines.postBatch(u)};s.exports=f}),61475:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99651),g=e(83419),f=e(17803),o=new g({Extends:f,Mixins:[a],initialize:function(r,h,c,l,p,m,v,y){h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l=48),p===void 0&&(p=32),m===void 0&&(m=15658734),v===void 0&&(v=10066329),y===void 0&&(y=13421772),f.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=m,this.fillLeft=v,this.fillRight=y,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(h,c),this.setSize(l,p),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setFaces:function(u,r,h){return u===void 0&&(u=!0),r===void 0&&(r=!0),h===void 0&&(h=!0),this.showTop=u,this.showLeft=r,this.showRight=h,this},setFillStyle:function(u,r,h){return this.fillTop=u,this.fillLeft=r,this.fillRight=h,this.isFilled=!0,this}});s.exports=o}),11508:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),g=e(20926),f=function(o,u,r,h){r.addToRenderList(u);var c=o.currentContext;if(g(o,c,u,r,h)&&u.isFilled){var l=u.width,p=u.height,m=l/2,v=l/u.projection;u.showTop&&(a(c,u,u.fillTop),c.beginPath(),c.moveTo(-m,-p),c.lineTo(0,-v-p),c.lineTo(m,-p),c.lineTo(m,-1),c.lineTo(0,v-1),c.lineTo(-m,-1),c.lineTo(-m,-p),c.fill()),u.showLeft&&(a(c,u,u.fillLeft),c.beginPath(),c.moveTo(-m,0),c.lineTo(0,v),c.lineTo(0,v-p),c.lineTo(-m,-p),c.lineTo(-m,0),c.fill()),u.showRight&&(a(c,u,u.fillRight),c.beginPath(),c.moveTo(m,0),c.lineTo(0,v),c.lineTo(0,v-p),c.lineTo(m,-p),c.lineTo(m,0),c.fill()),c.restore()}};s.exports=f}),3933:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(61475);a.register("isobox",function(f,o,u,r,h,c,l){return this.displayList.add(new g(this.scene,f,o,u,r,h,c,l))})}),99651:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(68149),f=e(11508),s.exports={renderWebGL:g,renderCanvas:f}}),68149:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=e(70554),f=function(o,u,r,h){r.addToRenderList(u);var c=o.pipelines.set(u.pipeline),l=a(u,r,h),p=c.calcMatrix.copyFrom(l.calc),m=u.width,v=u.height,y=m/2,E=m/u.projection,C=r.alpha*u.alpha;if(u.isFilled){var w,A,M,R,P,b,F,I,L;o.pipelines.preBatch(u),u.showTop&&(w=g.getTintAppendFloatAlpha(u.fillTop,C),A=p.getX(-y,-v),M=p.getY(-y,-v),R=p.getX(0,-E-v),P=p.getY(0,-E-v),b=p.getX(y,-v),F=p.getY(y,-v),I=p.getX(0,E-v),L=p.getY(0,E-v),c.batchQuad(u,A,M,R,P,b,F,I,L,0,0,1,1,w,w,w,w,2)),u.showLeft&&(w=g.getTintAppendFloatAlpha(u.fillLeft,C),A=p.getX(-y,0),M=p.getY(-y,0),R=p.getX(0,E),P=p.getY(0,E),b=p.getX(0,E-v),F=p.getY(0,E-v),I=p.getX(-y,-v),L=p.getY(-y,-v),c.batchQuad(u,A,M,R,P,b,F,I,L,0,0,1,1,w,w,w,w,2)),u.showRight&&(w=g.getTintAppendFloatAlpha(u.fillRight,C),A=p.getX(y,0),M=p.getY(y,0),R=p.getX(0,E),P=p.getY(0,E),b=p.getX(0,E-v),F=p.getY(0,E-v),I=p.getX(y,-v),L=p.getY(y,-v),c.batchQuad(u,A,M,R,P,b,F,I,L,0,0,1,1,w,w,w,w,2)),o.pipelines.postBatch(u)}};s.exports=f}),16933:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(60561),f=e(17803),o=new a({Extends:f,Mixins:[g],initialize:function(r,h,c,l,p,m,v,y,E){h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l=48),p===void 0&&(p=32),m===void 0&&(m=!1),v===void 0&&(v=15658734),y===void 0&&(y=10066329),E===void 0&&(E=13421772),f.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=v,this.fillLeft=y,this.fillRight=E,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=m,this.isFilled=!0,this.setPosition(h,c),this.setSize(l,p),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setReversed:function(u){return this.isReversed=u,this},setFaces:function(u,r,h){return u===void 0&&(u=!0),r===void 0&&(r=!0),h===void 0&&(h=!0),this.showTop=u,this.showLeft=r,this.showRight=h,this},setFillStyle:function(u,r,h){return this.fillTop=u,this.fillLeft=r,this.fillRight=h,this.isFilled=!0,this}});s.exports=o}),79590:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),g=e(20926),f=function(o,u,r,h){r.addToRenderList(u);var c=o.currentContext;if(g(o,c,u,r,h)&&u.isFilled){var l=u.width,p=u.height,m=l/2,v=l/u.projection,y=u.isReversed;u.showTop&&y&&(a(c,u,u.fillTop),c.beginPath(),c.moveTo(-m,-p),c.lineTo(0,-v-p),c.lineTo(m,-p),c.lineTo(0,v-p),c.fill()),u.showLeft&&(a(c,u,u.fillLeft),c.beginPath(),y?(c.moveTo(-m,-p),c.lineTo(0,v),c.lineTo(0,v-p)):(c.moveTo(-m,0),c.lineTo(0,v),c.lineTo(0,v-p)),c.fill()),u.showRight&&(a(c,u,u.fillRight),c.beginPath(),y?(c.moveTo(m,-p),c.lineTo(0,v),c.lineTo(0,v-p)):(c.moveTo(m,0),c.lineTo(0,v),c.lineTo(0,v-p)),c.fill()),c.restore()}};s.exports=f}),49803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(16933);a.register("isotriangle",function(f,o,u,r,h,c,l,p){return this.displayList.add(new g(this.scene,f,o,u,r,h,c,l,p))})}),60561:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(51503),f=e(79590),s.exports={renderWebGL:g,renderCanvas:f}}),51503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=e(70554),f=function(o,u,r,h){r.addToRenderList(u);var c=o.pipelines.set(u.pipeline),l=a(u,r,h),p=c.calcMatrix.copyFrom(l.calc),m=u.width,v=u.height,y=m/2,E=m/u.projection,C=u.isReversed,w=r.alpha*u.alpha;if(u.isFilled){o.pipelines.preBatch(u);var A,M,R,P,b,F,I;if(u.showTop&&C){A=g.getTintAppendFloatAlpha(u.fillTop,w),M=p.getX(-y,-v),R=p.getY(-y,-v),P=p.getX(0,-E-v),b=p.getY(0,-E-v),F=p.getX(y,-v),I=p.getY(y,-v);var L=p.getX(0,E-v),D=p.getY(0,E-v);c.batchQuad(u,M,R,P,b,F,I,L,D,0,0,1,1,A,A,A,A,2)}u.showLeft&&(A=g.getTintAppendFloatAlpha(u.fillLeft,w),C?(M=p.getX(-y,-v),R=p.getY(-y,-v),P=p.getX(0,E),b=p.getY(0,E),F=p.getX(0,E-v),I=p.getY(0,E-v)):(M=p.getX(-y,0),R=p.getY(-y,0),P=p.getX(0,E),b=p.getY(0,E),F=p.getX(0,E-v),I=p.getY(0,E-v)),c.batchTri(u,M,R,P,b,F,I,0,0,1,1,A,A,A,2)),u.showRight&&(A=g.getTintAppendFloatAlpha(u.fillRight,w),C?(M=p.getX(y,-v),R=p.getY(y,-v),P=p.getX(0,E),b=p.getY(0,E),F=p.getX(0,E-v),I=p.getY(0,E-v)):(M=p.getX(y,0),R=p.getY(y,0),P=p.getX(0,E),b=p.getY(0,E),F=p.getX(0,E-v),I=p.getY(0,E-v)),c.batchTri(u,M,R,P,b,F,I,0,0,1,1,A,A,A,2)),o.pipelines.postBatch(u)}};s.exports=f}),57847:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(17803),f=e(23031),o=e(36823),u=new a({Extends:g,Mixins:[o],initialize:function(h,c,l,p,m,v,y,E,C){c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=128),y===void 0&&(y=0),g.call(this,h,"Line",new f(p,m,v,y));var w=Math.max(1,this.geom.right-this.geom.left),A=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,l),this.setSize(w,A),E!==void 0&&this.setStrokeStyle(1,E,C),this.updateDisplayOrigin()},setLineWidth:function(r,h){return h===void 0&&(h=r),this._startWidth=r,this._endWidth=h,this.lineWidth=r,this},setTo:function(r,h,c,l){return this.geom.setTo(r,h,c,l),this}});s.exports=u}),17440:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75177),g=e(20926),f=function(o,u,r,h){r.addToRenderList(u);var c=o.currentContext;if(g(o,c,u,r,h)){var l=u._displayOriginX,p=u._displayOriginY;u.isStroked&&(a(c,u),c.beginPath(),c.moveTo(u.geom.x1-l,u.geom.y1-p),c.lineTo(u.geom.x2-l,u.geom.y2-p),c.stroke()),c.restore()}};s.exports=f}),2481:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(57847);a.register("line",function(f,o,u,r,h,c,l,p){return this.displayList.add(new g(this.scene,f,o,u,r,h,c,l,p))})}),36823:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(77385),f=e(17440),s.exports={renderWebGL:g,renderCanvas:f}}),77385:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=e(70554),f=function(o,u,r,h){r.addToRenderList(u);var c=o.pipelines.set(u.pipeline),l=a(u,r,h);c.calcMatrix.copyFrom(l.calc);var p=u._displayOriginX,m=u._displayOriginY,v=r.alpha*u.alpha;if(o.pipelines.preBatch(u),u.isStroked){var y=c.strokeTint,E=g.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*v);y.TL=E,y.TR=E,y.BL=E,y.BR=E,c.batchLine(u.geom.x1-p,u.geom.y1-m,u.geom.x2-p,u.geom.y2-m,u._startWidth/2,u._endWidth/2,1,0,!1,l.sprite,l.camera)}o.pipelines.postBatch(u)};s.exports=f}),24949:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90273),g=e(83419),f=e(94811),o=e(13829),u=e(25717),r=e(17803),h=e(5469),c=new g({Extends:r,Mixins:[a],initialize:function(p,m,v,y,E,C){m===void 0&&(m=0),v===void 0&&(v=0),r.call(this,p,"Polygon",new u(y));var w=o(this.geom);this.setPosition(m,v),this.setSize(w.width,w.height),E!==void 0&&this.setFillStyle(E,C),this.updateDisplayOrigin(),this.updateData()},smooth:function(l){l===void 0&&(l=1);for(var p=0;p<l;p++)h(this.geom);return this.updateData()},setTo:function(l){this.geom.setTo(l);var p=o(this.geom);return this.setSize(p.width,p.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var l=[],p=this.geom.points,m=0;m<p.length;m++)l.push(p[m].x,p[m].y);return l.push(p[0].x,p[0].y),this.pathIndexes=f(l),this.pathData=l,this}});s.exports=c}),38710:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),g=e(75177),f=e(20926),o=function(u,r,h,c){h.addToRenderList(r);var l=u.currentContext;if(f(u,l,r,h,c)){var p=r._displayOriginX,m=r._displayOriginY,v=r.pathData,y=v.length-1,E=v[0]-p,C=v[1]-m;l.beginPath(),l.moveTo(E,C),r.closePath||(y-=2);for(var w=2;w<y;w+=2){var A=v[w]-p,M=v[w+1]-m;l.lineTo(A,M)}r.closePath&&l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(g(l,r),l.stroke()),l.restore()}};s.exports=o}),64827:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(24949);a.register("polygon",function(f,o,u,r,h){return this.displayList.add(new g(this.scene,f,o,u,r,h))})}),90273:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(73695),f=e(38710),s.exports={renderWebGL:g,renderCanvas:f}}),73695:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),g=e(91296),f=e(34682),o=function(u,r,h,c){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=g(r,h,c),m=l.calcMatrix.copyFrom(p.calc),v=r._displayOriginX,y=r._displayOriginY,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&a(l,m,r,E,v,y),r.isStroked&&f(l,r,E,v,y),u.pipelines.postBatch(r)};s.exports=o}),74561:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(94811),f=e(87841),o=e(17803),u=e(95597),r=new a({Extends:o,Mixins:[u],initialize:function(c,l,p,m,v,y,E){l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=128),v===void 0&&(v=128),o.call(this,c,"Rectangle",new f(0,0,m,v)),this.radius=20,this.isRounded=!1,this.setPosition(l,p),this.setSize(m,v),y!==void 0&&this.setFillStyle(y,E),this.updateDisplayOrigin(),this.updateData()},setRounded:function(h){return h===void 0&&(h=16),this.radius=h,this.isRounded=h>0,this.updateRoundedData()},setSize:function(h,c){this.width=h,this.height=c,this.geom.setSize(h,c),this.updateData(),this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=h,l.hitArea.height=c),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var h=[],c=this.geom,l=this._tempLine;return c.getLineA(l),h.push(l.x1,l.y1,l.x2,l.y2),c.getLineB(l),h.push(l.x2,l.y2),c.getLineC(l),h.push(l.x2,l.y2),c.getLineD(l),h.push(l.x2,l.y2),this.pathData=h,this},updateRoundedData:function(){var h=[],c=this.width/2,l=this.height/2,p=Math.min(c,l),m=Math.min(this.radius,p),v=c,y=l,E=Math.max(1,Math.floor(m/5));return this.arcTo(h,v-c+m,y-l+m,m,Math.PI,Math.PI*1.5,E),h.push(v+c-m,y-l),this.arcTo(h,v+c-m,y-l+m,m,Math.PI*1.5,Math.PI*2,E),h.push(v+c,y+l-m),this.arcTo(h,v+c-m,y+l-m,m,0,Math.PI*.5,E),h.push(v-c+m,y+l),this.arcTo(h,v-c+m,y+l-m,m,Math.PI*.5,Math.PI,E),h.push(v-c,y-l+m),this.pathIndexes=g(h),this.pathData=h,this},arcTo:function(h,c,l,p,m,v,y){for(var E=(v-m)/y,C=0;C<=y;C++){var w=m+E*C;h.push(c+Math.cos(w)*p,l+Math.sin(w)*p)}}});s.exports=r}),48682:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),g=e(75177),f=e(20926),o=function(r,h,c,l,p,m){var v=Math.min(l/2,p/2),y=Math.min(m,v);if(y===0){r.rect(h,c,l,p);return}r.moveTo(h+y,c),r.lineTo(h+l-y,c),r.arcTo(h+l,c,h+l,c+y,y),r.lineTo(h+l,c+p-y),r.arcTo(h+l,c+p,h+l-y,c+p,y),r.lineTo(h+y,c+p),r.arcTo(h,c+p,h,c+p-y,y),r.lineTo(h,c+y),r.arcTo(h,c,h+y,c,y),r.closePath()},u=function(r,h,c,l){c.addToRenderList(h);var p=r.currentContext;if(f(r,p,h,c,l)){var m=h._displayOriginX,v=h._displayOriginY;h.isFilled&&(a(p,h),h.isRounded?(p.beginPath(),o(p,-m,-v,h.width,h.height,h.radius),p.fill()):p.fillRect(-m,-v,h.width,h.height)),h.isStroked&&(g(p,h),p.beginPath(),h.isRounded?o(p,-m,-v,h.width,h.height,h.radius):p.rect(-m,-v,h.width,h.height),p.stroke()),p.restore()}};s.exports=u}),87959:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(74561);a.register("rectangle",function(f,o,u,r,h,c){return this.displayList.add(new g(this.scene,f,o,u,r,h,c))})}),95597:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(52059),f=e(48682),s.exports={renderWebGL:g,renderCanvas:f}}),52059:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),g=e(91296),f=e(34682),o=e(70554),u=function(r,h,c,l){c.addToRenderList(h);var p=r.pipelines.set(h.pipeline),m=g(h,c,l);p.calcMatrix.copyFrom(m.calc);var v=h._displayOriginX,y=h._displayOriginY,E=c.alpha*h.alpha;if(r.pipelines.preBatch(h),h.isRounded&&h.isFilled)a(p,m.calc,h,E,v,y);else if(h.isFilled){var C=p.fillTint,w=o.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*E);C.TL=w,C.TR=w,C.BL=w,C.BR=w,p.batchFillRect(-v,-y,h.width,h.height)}h.isStroked&&f(p,h,E,v,y),r.pipelines.postBatch(h)};s.exports=u}),55911:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81991),g=e(83419),f=e(94811),o=e(17803),u=new g({Extends:o,Mixins:[a],initialize:function(h,c,l,p,m,v,y,E){c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=5),m===void 0&&(m=32),v===void 0&&(v=64),o.call(this,h,"Star",null),this._points=p,this._innerRadius=m,this._outerRadius=v,this.setPosition(c,l),this.setSize(v*2,v*2),y!==void 0&&this.setFillStyle(y,E),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],h=this._points,c=this._innerRadius,l=this._outerRadius,p=Math.PI/2*3,m=Math.PI/h,v=l,y=l;r.push(v,y+-l);for(var E=0;E<h;E++)r.push(v+Math.cos(p)*l,y+Math.sin(p)*l),p+=m,r.push(v+Math.cos(p)*c,y+Math.sin(p)*c),p+=m;return r.push(v,y+-l),this.pathIndexes=f(r),this.pathData=r,this}});s.exports=u}),64272:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),g=e(75177),f=e(20926),o=function(u,r,h,c){h.addToRenderList(r);var l=u.currentContext;if(f(u,l,r,h,c)){var p=r._displayOriginX,m=r._displayOriginY,v=r.pathData,y=v.length-1,E=v[0]-p,C=v[1]-m;l.beginPath(),l.moveTo(E,C),r.closePath||(y-=2);for(var w=2;w<y;w+=2){var A=v[w]-p,M=v[w+1]-m;l.lineTo(A,M)}l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(g(l,r),l.stroke()),l.restore()}};s.exports=o}),93697:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55911),g=e(39429);g.register("star",function(f,o,u,r,h,c,l){return this.displayList.add(new a(this.scene,f,o,u,r,h,c,l))})}),81991:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(57017),f=e(64272),s.exports={renderWebGL:g,renderCanvas:f}}),57017:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),g=e(91296),f=e(34682),o=function(u,r,h,c){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=g(r,h,c),m=l.calcMatrix.copyFrom(p.calc),v=r._displayOriginX,y=r._displayOriginY,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&a(l,m,r,E,v,y),r.isStroked&&f(l,r,E,v,y),u.pipelines.postBatch(r)};s.exports=o}),36931:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(17803),f=e(16483),o=e(96195),u=new a({Extends:g,Mixins:[o],initialize:function(h,c,l,p,m,v,y,E,C,w,A){c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=128),v===void 0&&(v=64),y===void 0&&(y=0),E===void 0&&(E=128),C===void 0&&(C=128),g.call(this,h,"Triangle",new f(p,m,v,y,E,C));var M=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(c,l),this.setSize(M,R),w!==void 0&&this.setFillStyle(w,A),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,h,c,l,p,m){return this.geom.setTo(r,h,c,l,p,m),this.updateData()},updateData:function(){var r=[],h=this.geom,c=this._tempLine;return h.getLineA(c),r.push(c.x1,c.y1,c.x2,c.y2),h.getLineB(c),r.push(c.x2,c.y2),h.getLineC(c),r.push(c.x2,c.y2),this.pathData=r,this}});s.exports=u}),85172:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),g=e(75177),f=e(20926),o=function(u,r,h,c){h.addToRenderList(r);var l=u.currentContext;if(f(u,l,r,h,c)){var p=r._displayOriginX,m=r._displayOriginY,v=r.geom.x1-p,y=r.geom.y1-m,E=r.geom.x2-p,C=r.geom.y2-m,w=r.geom.x3-p,A=r.geom.y3-m;l.beginPath(),l.moveTo(v,y),l.lineTo(E,C),l.lineTo(w,A),l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(g(l,r),l.stroke()),l.restore()}};s.exports=o}),45245:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(36931);a.register("triangle",function(f,o,u,r,h,c,l,p,m,v){return this.displayList.add(new g(this.scene,f,o,u,r,h,c,l,p,m,v))})}),96195:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(83253),f=e(85172),s.exports={renderWebGL:g,renderCanvas:f}}),83253:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=e(34682),f=e(70554),o=function(u,r,h,c){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=a(r,h,c);l.calcMatrix.copyFrom(p.calc);var m=r._displayOriginX,v=r._displayOriginY,y=h.alpha*r.alpha;if(u.pipelines.preBatch(r),r.isFilled){var E=l.fillTint,C=f.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*y);E.TL=C,E.TR=C,E.BL=C,E.BR=C;var w=r.geom.x1-m,A=r.geom.y1-v,M=r.geom.x2-m,R=r.geom.y2-v,P=r.geom.x3-m,b=r.geom.y3-v;l.batchFillTriangle(w,A,M,R,P,b,p.sprite,p.camera)}r.isStroked&&g(l,r,y,m,v),u.pipelines.postBatch(r)};s.exports=o}),68287:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),g=e(83419),f=e(31401),o=e(95643),u=e(92751),r=new g({Extends:o,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Size,f.TextureCrop,f.Tint,f.Transform,f.Visible,u],initialize:function(c,l,p,m,v){o.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(m,v),this.setPosition(l,p),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,c){this.anims.update(h,c)},play:function(h,c){return this.anims.play(h,c)},playReverse:function(h,c){return this.anims.playReverse(h,c)},playAfterDelay:function(h,c){return this.anims.playAfterDelay(h,c)},playAfterRepeat:function(h,c){return this.anims.playAfterRepeat(h,c)},chain:function(h){return this.anims.chain(h)},stop:function(){return this.anims.stop()},stopAfterDelay:function(h){return this.anims.stopAfterDelay(h)},stopAfterRepeat:function(h){return this.anims.stopAfterRepeat(h)},stopOnFrame:function(h){return this.anims.stopOnFrame(h)},toJSON:function(){return f.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});s.exports=r}),76552:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g.addToRenderList(a),e.batchSprite(a,a.frame,g,f)};s.exports=T}),15567:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(13059),f=e(44603),o=e(23568),u=e(68287);f.register("sprite",function(r,h){r===void 0&&(r={});var c=o(r,"key",null),l=o(r,"frame",null),p=new u(this.scene,0,0,c,l);return h!==void 0&&(r.add=h),a(this.scene,p,r),g(p,r),p})}),46409:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(68287);a.register("sprite",function(f,o,u,r){return this.displayList.add(new g(this.scene,f,o,u,r))})}),92751:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(9409),f=e(76552),s.exports={renderWebGL:g,renderCanvas:f}}),9409:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g.addToRenderList(a),a.pipeline.batchSprite(a,g,f)};s.exports=T}),14220:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=e.canvas,o=e.context,u=e.style,r=[],h=0,c=g.length;u.maxLines>0&&u.maxLines<g.length&&(c=u.maxLines),u.syncFont(f,o);for(var l=e.letterSpacing,p=0;p<c;p++){var m=u.strokeThickness;if(l===0)m+=o.measureText(g[p]).width;else{for(var v=g[p],y=0;y<v.length;y++)m+=o.measureText(v[y]).width;v.length>1&&(m+=l*(v.length-1))}u.wordWrap&&(m-=o.measureText(" ").width),r[p]=Math.ceil(m),h=Math.max(h,r[p])}var E=a.fontSize+u.strokeThickness,C=E*c,w=e.lineSpacing;return c>1&&(C+=w*(c-1)),{width:h,height:C,lines:c,lineWidths:r,lineSpacing:w,lineHeight:E}};s.exports=T}),79557:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),g=function(f){var o=a.create(this),u=o.getContext("2d",{willReadFrequently:!0});f.syncFont(o,u);var r=u.measureText(f.testString);if("actualBoundingBoxAscent"in r){var h=r.actualBoundingBoxAscent,c=r.actualBoundingBoxDescent;return a.remove(o),{ascent:h,descent:c,fontSize:h+c}}var l=Math.ceil(r.width*f.baselineX),p=l,m=2*p;p=p*f.baselineY|0,o.width=l,o.height=m,u.fillStyle="#f00",u.fillRect(0,0,l,m),u.font=f._font,u.textBaseline="alphabetic",u.fillStyle="#000",u.fillText(f.testString,0,p);var v={ascent:0,descent:0,fontSize:0},y=u.getImageData(0,0,l,m);if(!y)return v.ascent=p,v.descent=p+6,v.fontSize=v.ascent+v.descent,a.remove(o),v;var E=y.data,C=E.length,w=l*4,A,M,R=0,P=!1;for(A=0;A<p;A++){for(M=0;M<w;M+=4)if(E[R+M]!==255){P=!0;break}if(!P)R+=w;else break}for(v.ascent=p-A,R=C-w,P=!1,A=m;A>p;A--){for(M=0;M<w;M+=4)if(E[R+M]!==255){P=!0;break}if(!P)R-=w;else break}return v.descent=A-p,v.fontSize=v.ascent+v.descent,a.remove(o),v};s.exports=g}),50171:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),g=e(27919),f=e(83419),o=e(31401),u=e(95643),r=e(14220),h=e(35154),c=e(35846),l=e(61771),p=e(35762),m=e(45650),v=new f({Extends:u,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,l],initialize:function(E,C,w,A,M){C===void 0&&(C=0),w===void 0&&(w=0),u.call(this,E,"Text"),this.renderer=E.sys.renderer,this.setPosition(C,w),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=g.create(this),this.context,this.style=new p(this,M),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=m(),this.texture=E.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(A),M&&M.padding&&this.setPadding(M.padding),M&&M.lineSpacing&&this.setLineSpacing(M.lineSpacing),M&&M.letterSpacing&&this.setLetterSpacing(M.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(y){var E=this.style;if(E.wordWrapCallback){var C=E.wordWrapCallback.call(E.wordWrapCallbackScope,y,this);return Array.isArray(C)&&(C=C.join(`
`)),C}else return E.wordWrapWidth?E.wordWrapUseAdvanced?this.advancedWordWrap(y,this.context,this.style.wordWrapWidth):this.basicWordWrap(y,this.context,this.style.wordWrapWidth):y},advancedWordWrap:function(y,E,C){for(var w="",A=y.replace(/ +/gi," ").split(this.splitRegExp),M=A.length,R=0;R<M;R++){var P=A[R],b="";P=P.replace(/^ *|\s*$/gi,"");var F=P.length*this.letterSpacing,I=E.measureText(P).width+F;if(I<C){w+=P+`
`;continue}for(var L=C,D=P.split(" "),O=0;O<D.length;O++){var z=D[O],_=z+" ",X=_.length*this.letterSpacing,H=E.measureText(_).width+X;if(H>L){if(O===0){for(var U=_;U.length;){U=U.slice(0,-1);var G=U.length*this.letterSpacing;if(H=E.measureText(U).width+G,H<=L)break}if(!U.length)throw new Error("wordWrapWidth < a single character");var N=z.substr(U.length);D[O]=N,b+=U}var W=D[O].length?O:O+1,V=D.slice(W).join(" ").replace(/[ \n]*$/gi,"");A.splice(R+1,0,V),M=A.length;break}else b+=_,L-=H}w+=b.replace(/[ \n]*$/gi,"")+`
`}return w=w.replace(/[\s|\n]*$/gi,""),w},basicWordWrap:function(y,E,C){for(var w="",A=y.split(this.splitRegExp),M=A.length-1,R=E.measureText(" ").width,P=0;P<=M;P++){for(var b=C,F=A[P].split(" "),I=F.length-1,L=0;L<=I;L++){var D=F[L],O=D.length*this.letterSpacing,z=E.measureText(D).width+O,_=z;L<I&&(_+=R),_>b&&L>0&&(w+=`
`,b=C),w+=D,L<I?(w+=" ",b-=_):b-=z}P<M&&(w+=`
`)}return w},getWrappedText:function(y){y===void 0&&(y=this._text),this.style.syncFont(this.canvas,this.context);var E=this.runWordWrap(y);return E.split(this.splitRegExp)},setText:function(y){return!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y!==this._text&&(this._text=y.toString(),this.updateText()),this},appendText:function(y,E){E===void 0&&(E=!0),!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y=y.toString();var C=this._text.concat(E?`
`+y:y);return C!==this._text&&(this._text=C,this.updateText()),this},setStyle:function(y){return this.style.setStyle(y)},setFont:function(y){return this.style.setFont(y)},setFontFamily:function(y){return this.style.setFontFamily(y)},setFontSize:function(y){return this.style.setFontSize(y)},setFontStyle:function(y){return this.style.setFontStyle(y)},setFixedSize:function(y,E){return this.style.setFixedSize(y,E)},setBackgroundColor:function(y){return this.style.setBackgroundColor(y)},setFill:function(y){return this.style.setFill(y)},setColor:function(y){return this.style.setColor(y)},setStroke:function(y,E){return this.style.setStroke(y,E)},setShadow:function(y,E,C,w,A,M){return this.style.setShadow(y,E,C,w,A,M)},setShadowOffset:function(y,E){return this.style.setShadowOffset(y,E)},setShadowColor:function(y){return this.style.setShadowColor(y)},setShadowBlur:function(y){return this.style.setShadowBlur(y)},setShadowStroke:function(y){return this.style.setShadowStroke(y)},setShadowFill:function(y){return this.style.setShadowFill(y)},setWordWrapWidth:function(y,E){return this.style.setWordWrapWidth(y,E)},setWordWrapCallback:function(y,E){return this.style.setWordWrapCallback(y,E)},setAlign:function(y){return this.style.setAlign(y)},setResolution:function(y){return this.style.setResolution(y)},setLineSpacing:function(y){return this.lineSpacing=y,this.updateText()},setLetterSpacing:function(y){return this.letterSpacing=y,this.updateText()},setPadding:function(y,E,C,w){if(typeof y=="object"){var A=y,M=h(A,"x",null);M!==null?(y=M,C=M):(y=h(A,"left",0),C=h(A,"right",y));var R=h(A,"y",null);R!==null?(E=R,w=R):(E=h(A,"top",0),w=h(A,"bottom",E))}else y===void 0&&(y=0),E===void 0&&(E=y),C===void 0&&(C=y),w===void 0&&(w=E);return this.padding.left=y,this.padding.top=E,this.padding.right=C,this.padding.bottom=w,this.updateText()},setMaxLines:function(y){return this.style.setMaxLines(y)},setRTL:function(y){y===void 0&&(y=!0);var E=this.style;return E.rtl===y?this:(E.rtl=y,y?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),E.align==="left"?E.align="right":E.align==="right"&&(E.align="left"),this)},updateText:function(){var y=this.canvas,E=this.context,C=this.style,w=C.resolution,A=C.metrics;C.syncFont(y,E);var M=this._text;(C.wordWrapWidth||C.wordWrapCallback)&&(M=this.runWordWrap(this._text));var R=M.split(this.splitRegExp),P=r(this,A,R),b=this.padding,F;C.fixedWidth===0?(this.width=P.width+b.left+b.right,F=P.width):(this.width=C.fixedWidth,F=this.width-b.left-b.right,F<P.width&&(F=P.width)),C.fixedHeight===0?this.height=P.height+b.top+b.bottom:this.height=C.fixedHeight;var I=this.width,L=this.height;this.updateDisplayOrigin(),I*=w,L*=w,I=Math.max(I,1),L=Math.max(L,1),y.width!==I||y.height!==L?(y.width=I,y.height=L,this.frame.setSize(I,L),C.syncFont(y,E),C.rtl&&(E.direction="rtl")):E.clearRect(0,0,I,L),E.save(),E.scale(w,w),C.backgroundColor&&(E.fillStyle=C.backgroundColor,E.fillRect(0,0,I,L)),C.syncStyle(y,E),E.translate(b.left,b.top);for(var D,O,z=0;z<P.lines;z++){if(D=C.strokeThickness/2,O=C.strokeThickness/2+z*P.lineHeight+A.ascent,z>0&&(O+=P.lineSpacing*z),C.rtl)D=I-D-b.left-b.right;else if(C.align==="right")D+=F-P.lineWidths[z];else if(C.align==="center")D+=(F-P.lineWidths[z])/2;else if(C.align==="justify"){var _=.85;if(P.lineWidths[z]/P.width>=_){var X=P.width-P.lineWidths[z],H=E.measureText(" ").width,U=R[z].trim(),G=U.split(" ");X+=(R[z].length-U.length)*H;for(var N=Math.floor(X/H),W=0;N>0;)G[W]+=" ",W=(W+1)%(G.length-1||1),--N;R[z]=G.join(" ")}}this.autoRound&&(D=Math.round(D),O=Math.round(O));var V=this.letterSpacing;if(C.strokeThickness&&V===0&&(C.syncShadow(E,C.shadowStroke),E.strokeText(R[z],D,O)),C.color)if(C.syncShadow(E,C.shadowFill),V!==0)for(var $=0,j=R[z].split(""),k=0;k<j.length;k++)C.strokeThickness&&(C.syncShadow(E,C.shadowStroke),E.strokeText(j[k],D+$,O),C.syncShadow(E,C.shadowFill)),E.fillText(j[k],D+$,O),$+=E.measureText(j[k]).width+V;else E.fillText(R[z],D,O)}E.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(y,this.frame.source.glTexture,!0));var Q=this.input;return Q&&!Q.customHitArea&&(Q.hitArea.width=this.width,Q.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(y){this.setText(y)}},toJSON:function(){var y=o.ToJSON(this),E={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return y.data=E,y},preDestroy:function(){c(this.canvas),g.remove(this.canvas);var y=this.texture;y&&y.destroy()}});s.exports=v}),79724:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){a.width===0||a.height===0||(g.addToRenderList(a),e.batchSprite(a,a.frame,g,f))};s.exports=T}),71259:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(50171);g.register("text",function(u,r){u===void 0&&(u={});var h=f(u,"text",""),c=f(u,"style",null),l=f(u,"padding",null);l!==null&&(c.padding=l);var p=new o(this.scene,0,0,h,c);return r!==void 0&&(u.add=r),a(this.scene,p,u),p.autoRound=f(u,"autoRound",!0),p.resolution=f(u,"resolution",1),p})}),68005:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50171),g=e(39429);g.register("text",function(f,o,u,r){return this.displayList.add(new a(this.scene,f,o,u,r))})}),61771:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(34397),f=e(79724),s.exports={renderWebGL:g,renderCanvas:f}}),35762:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23568),f=e(35154),o=e(79557),u={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃâ°qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new a({initialize:function(c,l){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(l,!1,!0)},setStyle:function(h,c,l){c===void 0&&(c=!0),l===void 0&&(l=!1);for(var p in u){var m=l?u[p][1]:this[p];p==="wordWrapCallback"||p==="wordWrapCallbackScope"?this[p]=f(h,u[p][0],m):h&&p==="fontSize"&&typeof h.fontSize=="number"?this[p]=h.fontSize.toString()+"px":this[p]=g(h,u[p][0],m)}var v=f(h,"font",null);v!==null&&this.setFont(v,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var y=f(h,"fill",null);y!==null&&(this.color=y);var E=f(h,"metrics",!1);return E?this.metrics={ascent:f(E,"ascent",0),descent:f(E,"descent",0),fontSize:f(E,"fontSize",0)}:(c||!this.metrics)&&(this.metrics=o(this)),c?this.parent.updateText():this.parent},syncFont:function(h,c){c.font=this._font},syncStyle:function(h,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(h,c){c?(h.shadowOffsetX=this.shadowOffsetX,h.shadowOffsetY=this.shadowOffsetY,h.shadowColor=this.shadowColor,h.shadowBlur=this.shadowBlur):(h.shadowOffsetX=0,h.shadowOffsetY=0,h.shadowColor=0,h.shadowBlur=0)},update:function(h){return h&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(h,c){c===void 0&&(c=!0);var l=h,p="",m="";if(typeof h!="string")l=f(h,"fontFamily","Courier"),p=f(h,"fontSize","16px"),m=f(h,"fontStyle","");else{var v=h.split(" "),y=0;m=v.length>2?v[y++]:"",p=v[y++]||"16px",l=v[y++]||"Courier"}return(l!==this.fontFamily||p!==this.fontSize||m!==this.fontStyle)&&(this.fontFamily=l,this.fontSize=p,this.fontStyle=m,c&&this.update(!0)),this.parent},setFontFamily:function(h){return this.fontFamily!==h&&(this.fontFamily=h,this.update(!0)),this.parent},setFontStyle:function(h){return this.fontStyle!==h&&(this.fontStyle=h,this.update(!0)),this.parent},setFontSize:function(h){return typeof h=="number"&&(h=h.toString()+"px"),this.fontSize!==h&&(this.fontSize=h,this.update(!0)),this.parent},setTestString:function(h){return this.testString=h,this.update(!0)},setFixedSize:function(h,c){return this.fixedWidth=h,this.fixedHeight=c,h&&(this.parent.width=h),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(h){return this.backgroundColor=h,this.update(!1)},setFill:function(h){return this.color=h,this.update(!1)},setColor:function(h){return this.color=h,this.update(!1)},setResolution:function(h){return this.resolution=h,this.update(!1)},setStroke:function(h,c){return c===void 0&&(c=this.strokeThickness),h===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==h||this.strokeThickness!==c)&&(this.stroke=h,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(h,c,l,p,m,v){return h===void 0&&(h=0),c===void 0&&(c=0),l===void 0&&(l="#000"),p===void 0&&(p=0),m===void 0&&(m=!1),v===void 0&&(v=!0),this.shadowOffsetX=h,this.shadowOffsetY=c,this.shadowColor=l,this.shadowBlur=p,this.shadowStroke=m,this.shadowFill=v,this.update(!1)},setShadowOffset:function(h,c){return h===void 0&&(h=0),c===void 0&&(c=h),this.shadowOffsetX=h,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(h){return h===void 0&&(h="#000"),this.shadowColor=h,this.update(!1)},setShadowBlur:function(h){return h===void 0&&(h=0),this.shadowBlur=h,this.update(!1)},setShadowStroke:function(h){return this.shadowStroke=h,this.update(!1)},setShadowFill:function(h){return this.shadowFill=h,this.update(!1)},setWordWrapWidth:function(h,c){return c===void 0&&(c=!1),this.wordWrapWidth=h,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(h,c){return c===void 0&&(c=null),this.wordWrapCallback=h,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(h){return h===void 0&&(h="left"),this.align=h,this.update(!1)},setMaxLines:function(h){return h===void 0&&(h=0),this.maxLines=h,this.update(!1)},getTextMetrics:function(){var h=this.metrics;return{ascent:h.ascent,descent:h.descent,fontSize:h.fontSize}},toJSON:function(){var h={};for(var c in u)h[c]=this[c];return h.metrics=this.getTextMetrics(),h},destroy:function(){this.parent=void 0}});s.exports=r}),34397:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),g=function(f,o,u,r){if(!(o.width===0||o.height===0)){u.addToRenderList(o);var h=o.frame,c=h.width,l=h.height,p=a.getTintAppendFloatAlpha,m=f.pipelines.set(o.pipeline,o),v=m.setTexture2D(h.glTexture,o);m.batchTexture(o,h.glTexture,c,l,o.x,o.y,c/o.style.resolution,l/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,c,l,p(o.tintTopLeft,u.alpha*o._alphaTL),p(o.tintTopRight,u.alpha*o._alphaTR),p(o.tintBottomLeft,u.alpha*o._alphaBL),p(o.tintBottomRight,u.alpha*o._alphaBR),o.tintFill,0,0,u,r,!1,v)}};s.exports=g}),20839:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),g=e(83419),f=e(31401),o=e(95643),u=e(98439),r=e(68703),h=e(56295),c=e(45650),l=e(26099),p=8,m=new g({Extends:o,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Crop,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.Tint,f.Transform,f.Visible,h],initialize:function(y,E,C,w,A,M,R){var P=y.sys.renderer;o.call(this,y,"TileSprite");var b=y.sys.textures.get(M),F=b.get(R);F.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),b=y.sys.textures.get("__MISSING"),F=b.get()),b.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),b=y.sys.textures.get("__MISSING"),F=b.get()),!w||!A?(w=w||F.width,A=A||F.height):(w=Math.floor(w),A=Math.floor(A)),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=P,this.canvas=a.create(this,w,A),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=b,this.displayFrame=F,this._crop=this.resetCropObject(),this._textureKey=c(),this.texture=y.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=u(F.width),this.potHeight=u(F.height),this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(E,C),this.setSize(w,A),this.setFrame(R),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(v,y){return this.displayTexture=this.scene.sys.textures.get(v),this.setFrame(y)},setFrame:function(v){var y=this.displayTexture.get(v);return this.potWidth=u(y.width),this.potHeight=u(y.height),this.canvas.width=0,!y.cutWidth||!y.cutHeight?this.renderFlags&=~p:this.renderFlags|=p,this.displayFrame=y,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(v,y){return v!==void 0&&(this.tilePositionX=v),y!==void 0&&(this.tilePositionY=y),this},setTileScale:function(v,y){return v===void 0&&(v=this.tileScaleX),y===void 0&&(y=v),this.tileScaleX=v,this.tileScaleY=y,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var v=this.displayFrame;if(v.source.isRenderTexture||v.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var y=this.fillContext,E=this.fillCanvas,C=this.potWidth,w=this.potHeight;(!this.renderer||!this.renderer.gl)&&(C=v.cutWidth,w=v.cutHeight),y.clearRect(0,0,C,w),E.width=C,E.height=w,y.drawImage(v.source.image,v.cutX,v.cutY,v.cutWidth,v.cutHeight,0,0,C,w),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(E,this.fillPattern):this.fillPattern=y.createPattern(E,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var v=this.canvas;if((v.width!==this.width||v.height!==this.height)&&(v.width=this.width,v.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var y=this.context;this.scene.sys.game.config.antialias||r.disable(y);var E=this._tileScale.x,C=this._tileScale.y,w=this._tilePosition.x,A=this._tilePosition.y;y.clearRect(0,0,this.width,this.height),y.save(),y.scale(E,C),y.translate(-w,-A),y.fillStyle=this.fillPattern,y.fillRect(w,A,this.width/E,this.height/C),y.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),a.remove(this.canvas),a.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var v=this.texture;v&&v.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(v){this._tilePosition.x=v,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(v){this._tilePosition.y=v,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(v){this._tileScale.x=v,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(v){this._tileScale.y=v,this.dirty=!0}}});s.exports=m}),46992:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){a.updateCanvas(),g.addToRenderList(a),e.batchSprite(a,a.frame,g,f)};s.exports=T}),14167:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(20839);g.register("tileSprite",function(u,r){u===void 0&&(u={});var h=f(u,"x",0),c=f(u,"y",0),l=f(u,"width",512),p=f(u,"height",512),m=f(u,"key",""),v=f(u,"frame",""),y=new o(this.scene,h,c,l,p,m,v);return r!==void 0&&(u.add=r),a(this.scene,y,u),y})}),91681:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20839),g=e(39429);g.register("tileSprite",function(f,o,u,r,h,c){return this.displayList.add(new a(this.scene,f,o,u,r,h,c))})}),56295:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(18553),f=e(46992),s.exports={renderWebGL:g,renderCanvas:f}}),18553:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),g=function(f,o,u,r){o.updateCanvas();var h=o.width,c=o.height;if(!(h===0||c===0)){u.addToRenderList(o);var l=a.getTintAppendFloatAlpha,p=f.pipelines.set(o.pipeline,o),m=p.setTexture2D(o.fillPattern,o);p.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,h,c,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*h,o.originY*c,0,0,h,c,l(o.tintTopLeft,u.alpha*o._alphaTL),l(o.tintTopRight,u.alpha*o._alphaTR),l(o.tintBottomLeft,u.alpha*o._alphaBL),l(o.tintBottomRight,u.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,u,r,!1,m)}};s.exports=g}),18471:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(31401),o=e(51708),u=e(8443),r=e(95643),h=e(36383),c=e(14463),l=e(45650),p=e(10247),m=new g({Extends:r,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.ScrollFactor,f.TextureCrop,f.Tint,f.Transform,f.Visible,p],initialize:function(y,E,C,w){r.call(this,y,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=l(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var A=y.sys.game;this._device=A.device.video,this.setPosition(E,C),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),A.events.on(u.PAUSE,this.globalPause,this),A.events.on(u.RESUME,this.globalResume,this);var M=y.sys.sound;M&&M.on(c.GLOBAL_MUTE,this.globalMute,this),w&&this.load(w)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(v){var y=this.scene.sys.cache.video.get(v);return y?(this.cacheKey=v,this.loadHandler(y.url,y.noAudio,y.crossOrigin)):console.warn("No video in cache for key: "+v),this},changeSource:function(v,y,E,C,w){y===void 0&&(y=!0),E===void 0&&(E=!1),this.cacheKey!==v&&(this.load(v),y&&this.play(E,C,w))},getVideoKey:function(){return this.cacheKey},loadURL:function(v,y,E){y===void 0&&(y=!1);var C=this._device.getVideoURL(v);return C?(this.cacheKey="",this.loadHandler(C.url,y,E)):console.warn("No supported video format found for "+v),this},loadMediaStream:function(v,y,E){return this.loadHandler(null,y,E,v)},loadHandler:function(v,y,E,C){y||(y=!1);var w=this.video;if(w?(this.removeLoadEventHandlers(),this.stop()):(w=document.createElement("video"),w.controls=!1,w.setAttribute("playsinline","playsinline"),w.setAttribute("preload","auto"),w.setAttribute("disablePictureInPicture","true")),y?(w.muted=!0,w.defaultMuted=!0,w.setAttribute("autoplay","autoplay")):(w.muted=!1,w.defaultMuted=!1,w.removeAttribute("autoplay")),E?w.setAttribute("crossorigin",E):w.removeAttribute("crossorigin"),C)if("srcObject"in w)try{w.srcObject=C}catch(M){if(M.name!=="TypeError")throw M;w.src=URL.createObjectURL(C)}else w.src=URL.createObjectURL(C);else w.src=v;this.retry=0,this.video=w,this._playCalled=!1,w.load(),this.addLoadEventHandlers();var A=this.scene.sys.textures.get(this._key);return this.setTexture(A),this},requestVideoFrame:function(v,y){var E=this.video;if(E){var C=y.width,w=y.height,A=this.videoTexture,M=this.videoTextureSource,R=!A||M.source!==E;R?(this._codePaused=E.paused,this._codeMuted=E.muted,A?(M.source=E,M.width=C,M.height=w,A.get().setSize(C,w)):(A=this.scene.sys.textures.create(this._key,E,C,w),A.add("__BASE",0,0,0,C,w),this.setTexture(A),this.videoTexture=A,this.videoTextureSource=A.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(o.VIDEO_TEXTURE,this,A)),this.setSizeToFrame(),this.updateDisplayOrigin()):M.update(),this.isStalled=!1,this.metadata=y;var P=y.mediaTime;R&&(this._lastUpdate=P,this.emit(o.VIDEO_CREATED,this,C,w),this.frameReady||(this.frameReady=!0,this.emit(o.VIDEO_PLAY,this))),this._playingMarker?P>=this._markerOut&&(E.loop?(E.currentTime=this._markerIn,this.emit(o.VIDEO_LOOP,this)):(this.stop(!1),this.emit(o.VIDEO_COMPLETE,this))):P<this._lastUpdate&&this.emit(o.VIDEO_LOOP,this),this._lastUpdate=P,this._getFrame?(this.removeEventHandlers(),E.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(v,y,E){y===void 0&&(y=-1),E===void 0&&(E=h.MAX_SAFE_INTEGER);var C=this.video;return!C||this.isPlaying()?(C||console.warn("Video not loaded"),this):(v===void 0&&(v=C.loop),C.loop=v,this._markerIn=y,this._markerOut=E,this._playingMarker=y>-1&&E>y&&E<h.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=C.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var v=this.video;return!v||this.isPlaying()?(v||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=v.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var v=this.video;v&&(v.addEventListener("error",this._loadCallbackHandler),v.addEventListener("abort",this._loadCallbackHandler),v.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var v=this.video;v&&(v.removeEventListener("error",this._loadCallbackHandler),v.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var v=this.video;if(v){var y=this._callbacks;for(var E in y)v.addEventListener(E,y[E])}},removeEventHandlers:function(){var v=this.video;if(v){var y=this._callbacks;for(var E in y)v.removeEventListener(E,y[E])}},createPlayPromise:function(v){v===void 0&&(v=!0);var y=this.video,E=y.play();if(E!==void 0){var C=this.playSuccess.bind(this),w=this.playError.bind(this);if(!v){var A=this;w=function(){A.failedPlayAttempts++}}E.then(C).catch(w)}else y.addEventListener("playing",this._callbacks.legacy),v||this.failedPlayAttempts++},addMarker:function(v,y,E){return!isNaN(y)&&y>=0&&!isNaN(E)&&E>y&&(this.markers[v]=[y,E]),this},playMarker:function(v,y){var E=this.markers[v];return E&&this.play(y,E[0],E[1]),this},removeMarker:function(v){return delete this.markers[v],this},snapshot:function(v,y){return v===void 0&&(v=this.width),y===void 0&&(y=this.height),this.snapshotArea(0,0,this.width,this.height,v,y)},snapshotArea:function(v,y,E,C,w,A){v===void 0&&(v=0),y===void 0&&(y=0),E===void 0&&(E=this.width),C===void 0&&(C=this.height),w===void 0&&(w=E),A===void 0&&(A=C);var M=this.video,R=this.snapshotTexture;return R?(R.setSize(w,A),M&&R.context.drawImage(M,v,y,E,C,0,0,w,A)):(R=this.scene.sys.textures.createCanvas(l(),w,A),this.snapshotTexture=R,M&&R.context.drawImage(M,v,y,E,C,0,0,w,A)),R.update()},saveSnapshotTexture:function(v){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,v):this.snapshotTexture=this.scene.sys.textures.createCanvas(v,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(o.VIDEO_UNLOCKED,this));var v=this.scene.sys.sound;v&&v.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(v){var y=v.name;y==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(o.VIDEO_LOCKED,this)):y==="NotSupportedError"?(this.stop(!1),this.emit(o.VIDEO_UNSUPPORTED,this,v)):(this.stop(!1),this.emit(o.VIDEO_ERROR,this,v))},legacyPlayHandler:function(){var v=this.video;v&&(this.playSuccess(),v.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(o.VIDEO_PLAYING,this)},loadErrorHandler:function(v){this.stop(!1),this.emit(o.VIDEO_ERROR,this,v)},metadataHandler:function(v){this.emit(o.VIDEO_METADATA,this,v)},setSizeToFrame:function(v){v||(v=this.frame),this.width=v.realWidth,this.height=v.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var y=this.input;return y&&!y.customHitArea&&(y.hitArea.width=this.width,y.hitArea.height=this.height),this},stalledHandler:function(v){this.isStalled=!0,this.emit(o.VIDEO_STALLED,this,v)},completeHandler:function(){this._playCalled=!1,this.emit(o.VIDEO_COMPLETE,this)},preUpdate:function(v,y){var E=this.video;!E||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=y,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(v){var y=this.video;if(y){var E=y.duration;if(E!==1/0&&!isNaN(E)){var C=E*v;this.setCurrentTime(C)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(v){var y=this.video;if(y){if(typeof v=="string"){var E=v[0],C=parseFloat(v.substr(1));E==="+"?v=y.currentTime+C:E==="-"&&(v=y.currentTime-C)}y.currentTime=v}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(o.VIDEO_SEEKED,this)},getProgress:function(){var v=this.video;if(v){var y=v.duration;if(y!==1/0&&!isNaN(y))return v.currentTime/y}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(v){v===void 0&&(v=!0),this._codeMuted=v;var y=this.video;return y&&(y.muted=this._systemMuted?!0:v),this},isMuted:function(){return this._codeMuted},globalMute:function(v,y){this._systemMuted=y;var E=this.video;E&&(E.muted=this._codeMuted?!0:y)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(v){v===void 0&&(v=!0);var y=this.video;return this._codePaused=v,y&&!y.ended&&(v?y.paused||(this.removeEventHandlers(),y.pause()):v||(this._playCalled?y.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(v){return v===void 0&&(v=1),this.video&&(this.video.volume=a(v,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(v){return this.video&&(this.video.playbackRate=v),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(v){return v===void 0&&(v=!0),this.video&&(this.video.loop=v),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(v,y){return y===void 0&&(y=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,v),this.videoTextureSource.setFlipY(y)),this._key=v,this.flipY=y,!!this.videoTexture},stop:function(v){v===void 0&&(v=!0);var y=this.video;return y&&(this.removeEventHandlers(),y.cancelVideoFrameCallback(this._rfvCallbackId),y.pause()),this.retry=0,this._playCalled=!1,v&&this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var v=this.video;if(v){for(v.parentNode&&v.parentNode.removeChild(v);v.hasChildNodes();)v.removeChild(v.firstChild);v.removeAttribute("autoplay"),v.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var v=this.scene.sys.game.events;v.off(u.PAUSE,this.globalPause,this),v.off(u.RESUME,this.globalResume,this);var y=this.scene.sys.sound;y&&y.off(c.GLOBAL_MUTE,this.globalMute,this)}});s.exports=m}),58352:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){a.videoTexture&&(g.addToRenderList(a),e.batchSprite(a,a.frame,g,f))};s.exports=T}),11511:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),g=e(44603),f=e(23568),o=e(18471);g.register("video",function(u,r){u===void 0&&(u={});var h=f(u,"key",null),c=new o(this.scene,0,0,h);return r!==void 0&&(u.add=r),a(this.scene,c,u),c})}),89025:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18471),g=e(39429);g.register("video",function(f,o,u){return this.displayList.add(new a(this.scene,f,o,u))})}),10247:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(29849),f=e(58352),s.exports={renderWebGL:g,renderCanvas:f}}),29849:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){a.videoTexture&&(g.addToRenderList(a),a.pipeline.batchSprite(a,g,f))};s.exports=T}),41481:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),g=e(96503),f=e(87902),o=e(83419),u=e(31401),r=e(95643),h=e(87841),c=e(37303),l=new o({Extends:r,Mixins:[u.Depth,u.GetBounds,u.Origin,u.Transform,u.ScrollFactor,u.Visible],initialize:function(m,v,y,E,C){E===void 0&&(E=1),C===void 0&&(C=E),r.call(this,m,"Zone"),this.setPosition(v,y),this.width=E,this.height=C,this.blendMode=a.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(p){this.scaleX=p/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(p){this.scaleY=p/this.height}},setSize:function(p,m,v){v===void 0&&(v=!0),this.width=p,this.height=m,this.updateDisplayOrigin();var y=this.input;return v&&y&&!y.customHitArea&&(y.hitArea.width=p,y.hitArea.height=m),this},setDisplaySize:function(p,m){return this.displayWidth=p,this.displayHeight=m,this},setCircleDropZone:function(p){return this.setDropZone(new g(0,0,p),f)},setRectangleDropZone:function(p,m){return this.setDropZone(new h(0,0,p,m),c)},setDropZone:function(p,m){return this.input||this.setInteractive(p,m,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(p,m,v){v.addToRenderList(m)},renderWebGL:function(p,m,v){v.addToRenderList(m)}});s.exports=l}),95261:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),g=e(23568),f=e(41481);a.register("zone",function(o){var u=g(o,"x",0),r=g(o,"y",0),h=g(o,"width",1),c=g(o,"height",h);return new f(this.scene,u,r,h,c)})}),84175:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41481),g=e(39429);g.register("zone",function(f,o,u,r){return this.displayList.add(new a(this.scene,f,o,u,r))})}),95166:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};s.exports=T}),96503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(87902),f=e(26241),o=e(79124),u=e(23777),r=e(28176),h=new a({initialize:function(l,p,m){l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=0),this.type=u.CIRCLE,this.x=l,this.y=p,this._radius=m,this._diameter=m*2},contains:function(c,l){return g(this,c,l)},getPoint:function(c,l){return f(this,c,l)},getPoints:function(c,l,p){return o(this,c,l,p)},getRandomPoint:function(c){return r(this,c)},setTo:function(c,l,p){return this.x=c,this.y=l,this._radius=p,this._diameter=p*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,l){return l===void 0&&(l=c),this.x=c,this.y=l,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});s.exports=h}),71562:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(Math.PI*e.radius)};s.exports=T}),92110:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o,u){return u===void 0&&(u=new a),u.x=f.x+f.radius*Math.cos(o),u.y=f.y+f.radius*Math.sin(o),u};s.exports=g}),42250:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),g=function(f){return new a(f.x,f.y,f.radius)};s.exports=g}),87902:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(e.radius>0&&a>=e.left&&a<=e.right&&g>=e.top&&g<=e.bottom){var f=(e.x-a)*(e.x-a),o=(e.y-g)*(e.y-g);return f+o<=e.radius*e.radius}else return!1};s.exports=T}),5698:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),g=function(f,o){return a(f,o.x,o.y)};s.exports=g}),70588:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),g=function(f,o){return a(f,o.x,o.y)&&a(f,o.right,o.y)&&a(f,o.x,o.bottom)&&a(f,o.right,o.bottom)};s.exports=g}),26394:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x,e.y,e.radius)};s.exports=T}),76278:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x===a.x&&e.y===a.y&&e.radius===a.radius};s.exports=T}),2074:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=function(f,o){return o===void 0&&(o=new a),o.x=f.left,o.y=f.top,o.width=f.diameter,o.height=f.diameter,o};s.exports=g}),26241:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92110),g=e(62945),f=e(36383),o=e(2141),u=function(r,h,c){c===void 0&&(c=new o);var l=g(h,0,f.PI2);return a(r,l,c)};s.exports=u}),79124:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71562),g=e(92110),f=e(62945),o=e(36383),u=function(r,h,c,l){l===void 0&&(l=[]),!h&&c>0&&(h=a(r)/c);for(var p=0;p<h;p++){var m=f(p/h,0,o.PI2);l.push(g(r,m))}return l};s.exports=u}),50884:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e.x+=a,e.y+=g,e};s.exports=T}),39212:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x+=a.x,e.y+=a.y,e};s.exports=T}),28176:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){o===void 0&&(o=new a);var u=2*Math.PI*Math.random(),r=Math.random()+Math.random(),h=r>1?2-r:r,c=h*Math.cos(u),l=h*Math.sin(u);return o.x=f.x+c*f.radius,o.y=f.y+l*f.radius,o};s.exports=g}),88911:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503);a.Area=e(95166),a.Circumference=e(71562),a.CircumferencePoint=e(92110),a.Clone=e(42250),a.Contains=e(87902),a.ContainsPoint=e(5698),a.ContainsRect=e(70588),a.CopyFrom=e(26394),a.Equals=e(76278),a.GetBounds=e(2074),a.GetPoint=e(26241),a.GetPoints=e(79124),a.Offset=e(50884),a.OffsetPoint=e(39212),a.Random=e(28176),s.exports=a}),23777:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};s.exports=T}),78874:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};s.exports=T}),92990:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=e.width/2,g=e.height/2,f=Math.pow(a-g,2)/Math.pow(a+g,2);return Math.PI*(a+g)*(1+3*f/(10+Math.sqrt(4-3*f)))};s.exports=T}),79522:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o,u){u===void 0&&(u=new a);var r=f.width/2,h=f.height/2;return u.x=f.x+r*Math.cos(o),u.y=f.y+h*Math.sin(o),u};s.exports=g}),58102:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8497),g=function(f){return new a(f.x,f.y,f.width,f.height)};s.exports=g}),81154:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(e.width<=0||e.height<=0)return!1;var f=(a-e.x)/e.width,o=(g-e.y)/e.height;return f*=f,o*=o,f+o<.25};s.exports=T}),46662:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81154),g=function(f,o){return a(f,o.x,o.y)};s.exports=g}),1632:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81154),g=function(f,o){return a(f,o.x,o.y)&&a(f,o.right,o.y)&&a(f,o.x,o.bottom)&&a(f,o.right,o.bottom)};s.exports=g}),65534:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};s.exports=T}),8497:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(81154),f=e(90549),o=e(48320),u=e(23777),r=e(24820),h=new a({initialize:function(l,p,m,v){l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),this.type=u.ELLIPSE,this.x=l,this.y=p,this.width=m,this.height=v},contains:function(c,l){return g(this,c,l)},getPoint:function(c,l){return f(this,c,l)},getPoints:function(c,l,p){return o(this,c,l,p)},getRandomPoint:function(c){return r(this,c)},setTo:function(c,l,p,m){return this.x=c,this.y=l,this.width=p,this.height=m,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,l){return l===void 0&&(l=c),this.x=c,this.y=l,this},setSize:function(c,l){return l===void 0&&(l=c),this.width=c,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});s.exports=h}),36146:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};s.exports=T}),23694:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=function(f,o){return o===void 0&&(o=new a),o.x=f.left,o.y=f.top,o.width=f.width,o.height=f.height,o};s.exports=g}),90549:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79522),g=e(62945),f=e(36383),o=e(2141),u=function(r,h,c){c===void 0&&(c=new o);var l=g(h,0,f.PI2);return a(r,l,c)};s.exports=u}),48320:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92990),g=e(79522),f=e(62945),o=e(36383),u=function(r,h,c,l){l===void 0&&(l=[]),!h&&c>0&&(h=a(r)/c);for(var p=0;p<h;p++){var m=f(p/h,0,o.PI2);l.push(g(r,m))}return l};s.exports=u}),73424:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e.x+=a,e.y+=g,e};s.exports=T}),44808:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x+=a.x,e.y+=a.y,e};s.exports=T}),24820:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){o===void 0&&(o=new a);var u=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return o.x=f.x+r*Math.cos(u)*f.width/2,o.y=f.y+r*Math.sin(u)*f.height/2,o};s.exports=g}),49203:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8497);a.Area=e(78874),a.Circumference=e(92990),a.CircumferencePoint=e(79522),a.Clone=e(58102),a.Contains=e(81154),a.ContainsPoint=e(46662),a.ContainsRect=e(1632),a.CopyFrom=e(65534),a.Equals=e(36146),a.GetBounds=e(23694),a.GetPoint=e(90549),a.GetPoints=e(48320),a.Offset=e(73424),a.OffsetPoint=e(44808),a.Random=e(24820),s.exports=a}),55738:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23777),g=e(79291),f={Circle:e(88911),Ellipse:e(49203),Intersects:e(91865),Line:e(2529),Mesh:e(73090),Point:e(43711),Polygon:e(58423),Rectangle:e(93232),Triangle:e(84435)};f=g(!1,f,a),s.exports=f}),2044:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20339),g=function(f,o){return a(f.x,f.y,o.x,o.y)<=f.radius+o.radius};s.exports=g}),81491:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=a.width/2,f=a.height/2,o=Math.abs(e.x-a.x-g),u=Math.abs(e.y-a.y-f),r=g+e.radius,h=f+e.radius;if(o>r||u>h)return!1;if(o<=g||u<=f)return!0;var c=o-g,l=u-f,p=c*c,m=l*l,v=e.radius*e.radius;return p+m<=v};s.exports=T}),63376:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=e(2044),f=function(o,u,r){if(r===void 0&&(r=[]),g(o,u)){var h=o.x,c=o.y,l=o.radius,p=u.x,m=u.y,v=u.radius,y,E,C,w,A;if(c===m)A=(v*v-l*l-p*p+h*h)/(2*(h-p)),y=1,E=-2*m,C=p*p+A*A-2*p*A+m*m-v*v,w=E*E-4*y*C,w===0?r.push(new a(A,-E/(2*y))):w>0&&(r.push(new a(A,(-E+Math.sqrt(w))/(2*y))),r.push(new a(A,(-E-Math.sqrt(w))/(2*y))));else{var M=(h-p)/(c-m),R=(v*v-l*l-p*p+h*h-m*m+c*c)/(2*(c-m));y=M*M+1,E=2*c*M-2*R*M-2*h,C=h*h+c*c+R*R-l*l-2*c*R,w=E*E-4*y*C,w===0?(A=-E/(2*y),r.push(new a(A,R-A*M))):w>0&&(A=(-E+Math.sqrt(w))/(2*y),r.push(new a(A,R-A*M)),A=(-E-Math.sqrt(w))/(2*y),r.push(new a(A,R-A*M)))}}return r};s.exports=f}),97439:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4042),g=e(81491),f=function(o,u,r){if(r===void 0&&(r=[]),g(o,u)){var h=u.getLineA(),c=u.getLineB(),l=u.getLineC(),p=u.getLineD();a(h,o,r),a(c,o,r),a(l,o,r),a(p,o,r)}return r};s.exports=f}),4042:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=e(80462),f=function(o,u,r){if(r===void 0&&(r=[]),g(o,u)){var h=o.x1,c=o.y1,l=o.x2,p=o.y2,m=u.x,v=u.y,y=u.radius,E=l-h,C=p-c,w=h-m,A=c-v,M=E*E+C*C,R=2*(E*w+C*A),P=w*w+A*A-y*y,b=R*R-4*M*P,F,I;if(b===0){var L=-R/(2*M);F=h+L*E,I=c+L*C,L>=0&&L<=1&&r.push(new a(F,I))}else if(b>0){var D=(-R-Math.sqrt(b))/(2*M);F=h+D*E,I=c+D*C,D>=0&&D<=1&&r.push(new a(F,I));var O=(-R+Math.sqrt(b))/(2*M);F=h+O*E,I=c+O*C,O>=0&&O<=1&&r.push(new a(F,I))}}return r};s.exports=f}),36100:((s,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),g=function(f,o,u,r){u===void 0&&(u=!1);var h=f.x1,c=f.y1,l=f.x2,p=f.y2,m=o.x1,v=o.y1,y=o.x2,E=o.y2,C=l-h,w=p-c,A=y-m,M=E-v,R=C*M-w*A;if(R===0)return null;var P,b,F;if(u){if(P=(C*(v-c)+w*(h-m))/(A*w-M*C),C!==0)b=(m+A*P-h)/C;else if(w!==0)b=(v+M*P-c)/w;else return null;if(b<0||P<0||P>1)return null;F=b}else{if(P=((m-h)*M-(v-c)*A)/R,b=((c-v)*C-(h-m)*w)/R,P<0||P>1||b<0||b>1)return null;F=P}return r===void 0&&(r=new a),r.set(h+C*F,c+w*F,F)};s.exports=g}),3073:((s,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36100),g=e(23031),f=e(25836),o=new g,u=new f,r=function(h,c,l,p){l===void 0&&(l=!1),p===void 0&&(p=new f);var m=!1;p.set(),u.set();for(var v=c[c.length-1],y=0;y<c.length;y++){var E=c[y];o.setTo(v.x,v.y,E.x,E.y),v=E,a(h,o,l,u)&&(!m||u.z<p.z)&&(p.copy(u),m=!0)}return m?p:null};s.exports=r}),56362:((s,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),g=e(61369),f=e(3073),o=new a,u=function(r,h,c,l){l===void 0&&(l=new g),Array.isArray(h)||(h=[h]);var p=!1;l.set(),o.set();for(var m=0;m<h.length;m++)f(r,h[m].points,c,o)&&(!p||o.z<l.z)&&(l.set(o.x,o.y,o.z,m),p=!0);return p?l:null};s.exports=u}),60646:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=e(76112),f=e(92773),o=function(u,r,h){if(h===void 0&&(h=[]),f(u,r))for(var c=r.getLineA(),l=r.getLineB(),p=r.getLineC(),m=r.getLineD(),v=[new a,new a,new a,new a],y=[g(c,u,v[0]),g(l,u,v[1]),g(p,u,v[2]),g(m,u,v[3])],E=0;E<4;E++)y[E]&&h.push(v[E]);return h};s.exports=o}),71147:((s,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61369),g=e(56362),f=e(23031),o=new f;function u(c,l,p,m,v){var y=Math.cos(c),E=Math.sin(c);o.setTo(l,p,l+y,p+E);var C=g(o,m,!0);C&&v.push(new a(C.x,C.y,c,C.w))}function r(c,l){return c.z-l.z}var h=function(c,l,p){Array.isArray(p)||(p=[p]);for(var m=[],v=[],y=0;y<p.length;y++)for(var E=p[y].points,C=0;C<E.length;C++){var w=Math.atan2(E[C].y-l,E[C].x-c);v.indexOf(w)===-1&&(u(w,c,l,p,m),u(w-1e-5,c,l,p,m),u(w+1e-5,c,l,p,m),v.push(w))}return m.sort(r)};s.exports=h}),68389:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=e(59996),f=function(o,u,r){return r===void 0&&(r=new a),g(o,u)&&(r.x=Math.max(o.x,u.x),r.y=Math.max(o.y,u.y),r.width=Math.min(o.right,u.right)-r.x,r.height=Math.min(o.bottom,u.bottom)-r.y),r};s.exports=f}),52784:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60646),g=e(59996),f=function(o,u,r){if(r===void 0&&(r=[]),g(o,u)){var h=o.getLineA(),c=o.getLineB(),l=o.getLineC(),p=o.getLineD();a(h,u,r),a(c,u,r),a(l,u,r),a(p,u,r)}return r};s.exports=f}),26341:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89265),g=e(60646),f=function(o,u,r){if(r===void 0&&(r=[]),a(o,u)){var h=u.getLineA(),c=u.getLineB(),l=u.getLineC();g(h,o,r),g(c,o,r),g(l,o,r)}return r};s.exports=f}),38720:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4042),g=e(67636),f=function(o,u,r){if(r===void 0&&(r=[]),g(o,u)){var h=o.getLineA(),c=o.getLineB(),l=o.getLineC();a(h,u,r),a(c,u,r),a(l,u,r)}return r};s.exports=f}),13882:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=e(2822),f=e(76112),o=function(u,r,h){if(h===void 0&&(h=[]),g(u,r))for(var c=u.getLineA(),l=u.getLineB(),p=u.getLineC(),m=[new a,new a,new a],v=[f(c,r,m[0]),f(l,r,m[1]),f(p,r,m[2])],y=0;y<3;y++)v[y]&&h.push(m[y]);return h};s.exports=o}),75636:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82944),g=e(13882),f=function(o,u,r){if(r===void 0&&(r=[]),a(o,u)){var h=u.getLineA(),c=u.getLineB(),l=u.getLineC();g(o,h,r),g(o,c,r),g(o,l,r)}return r};s.exports=f}),80462:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),g=e(2141),f=new g,o=function(u,r,h){if(h===void 0&&(h=f),a(r,u.x1,u.y1))return h.x=u.x1,h.y=u.y1,!0;if(a(r,u.x2,u.y2))return h.x=u.x2,h.y=u.y2,!0;var c=u.x2-u.x1,l=u.y2-u.y1,p=r.x-u.x1,m=r.y-u.y1,v=c*c+l*l,y=c,E=l;if(v>0){var C=(p*c+m*l)/v;y*=C,E*=C}h.x=u.x1+y,h.y=u.y1+E;var w=y*y+E*E;return w<=v&&y*c+E*l>=0&&a(r,h.x,h.y)};s.exports=o}),76112:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=e.x1,o=e.y1,u=e.x2,r=e.y2,h=a.x1,c=a.y1,l=a.x2,p=a.y2;if(f===u&&o===r||h===l&&c===p)return!1;var m=(p-c)*(u-f)-(l-h)*(r-o);if(m===0)return!1;var v=((l-h)*(o-c)-(p-c)*(f-h))/m,y=((u-f)*(o-c)-(r-o)*(f-h))/m;return v<0||v>1||y<0||y>1?!1:(g&&(g.x=f+v*(u-f),g.y=o+v*(r-o)),!0)};s.exports=T}),92773:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.x1,f=e.y1,o=e.x2,u=e.y2,r=a.x,h=a.y,c=a.right,l=a.bottom,p=0;if(g>=r&&g<=c&&f>=h&&f<=l||o>=r&&o<=c&&u>=h&&u<=l)return!0;if(g<r&&o>=r){if(p=f+(u-f)*(r-g)/(o-g),p>h&&p<=l)return!0}else if(g>c&&o<=c&&(p=f+(u-f)*(c-g)/(o-g),p>=h&&p<=l))return!0;if(f<h&&u>=h){if(p=g+(o-g)*(h-f)/(u-f),p>=r&&p<=c)return!0}else if(f>l&&u<=l&&(p=g+(o-g)*(l-f)/(u-f),p>=r&&p<=c))return!0;return!1};s.exports=T}),16204:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){g===void 0&&(g=1);var f=a.x1,o=a.y1,u=a.x2,r=a.y2,h=e.x,c=e.y,l=(u-f)*(u-f)+(r-o)*(r-o);if(l===0)return!1;var p=((h-f)*(u-f)+(c-o)*(r-o))/l;if(p<0)return Math.sqrt((f-h)*(f-h)+(o-c)*(o-c))<=g;if(p>=0&&p<=1){var m=((o-c)*(u-f)-(f-h)*(r-o))/l;return Math.abs(m)*Math.sqrt(l)<=g}else return Math.sqrt((u-h)*(u-h)+(r-c)*(r-c))<=g};s.exports=T}),14199:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16204),g=function(f,o){if(!a(f,o))return!1;var u=Math.min(o.x1,o.x2),r=Math.max(o.x1,o.x2),h=Math.min(o.y1,o.y2),c=Math.max(o.y1,o.y2);return f.x>=u&&f.x<=r&&f.y>=h&&f.y<=c};s.exports=g}),59996:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.width<=0||e.height<=0||a.width<=0||a.height<=0?!1:!(e.right<a.x||e.bottom<a.y||e.x>a.right||e.y>a.bottom)};s.exports=T}),89265:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76112),g=e(37303),f=e(48653),o=e(77493),u=function(r,h){if(h.left>r.right||h.right<r.left||h.top>r.bottom||h.bottom<r.top)return!1;var c=h.getLineA(),l=h.getLineB(),p=h.getLineC();if(g(r,c.x1,c.y1)||g(r,c.x2,c.y2)||g(r,l.x1,l.y1)||g(r,l.x2,l.y2)||g(r,p.x1,p.y1)||g(r,p.x2,p.y2))return!0;var m=r.getLineA(),v=r.getLineB(),y=r.getLineC(),E=r.getLineD();if(a(c,m)||a(c,v)||a(c,y)||a(c,E)||a(l,m)||a(l,v)||a(l,y)||a(l,E)||a(p,m)||a(p,v)||a(p,y)||a(p,E))return!0;var C=o(r),w=f(h,C,!0);return w.length>0};s.exports=u}),84411:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o,u){return u===void 0&&(u=0),!(a>e.right+u||g<e.left-u||f>e.bottom+u||o<e.top-u)};s.exports=T}),67636:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80462),g=e(10690),f=function(o,u){return o.left>u.right||o.right<u.left||o.top>u.bottom||o.bottom<u.top?!1:!!(g(o,u.x,u.y)||a(o.getLineA(),u)||a(o.getLineB(),u)||a(o.getLineC(),u))};s.exports=f}),2822:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76112),g=function(f,o){return!!(f.contains(o.x1,o.y1)||f.contains(o.x2,o.y2)||a(f.getLineA(),o)||a(f.getLineB(),o)||a(f.getLineC(),o))};s.exports=g}),82944:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(48653),g=e(71694),f=e(76112),o=function(u,r){if(u.left>r.right||u.right<r.left||u.top>r.bottom||u.bottom<r.top)return!1;var h=u.getLineA(),c=u.getLineB(),l=u.getLineC(),p=r.getLineA(),m=r.getLineB(),v=r.getLineC();if(f(h,p)||f(h,m)||f(h,v)||f(c,p)||f(c,m)||f(c,v)||f(l,p)||f(l,m)||f(l,v))return!0;var y=g(u),E=a(r,y,!0);return E.length>0||(y=g(r),E=a(u,y,!0),E.length>0)};s.exports=o}),91865:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CircleToCircle:e(2044),CircleToRectangle:e(81491),GetCircleToCircle:e(63376),GetCircleToRectangle:e(97439),GetLineToCircle:e(4042),GetLineToLine:e(36100),GetLineToPoints:e(3073),GetLineToPolygon:e(56362),GetLineToRectangle:e(60646),GetRaysFromPointToPolygon:e(71147),GetRectangleIntersection:e(68389),GetRectangleToRectangle:e(52784),GetRectangleToTriangle:e(26341),GetTriangleToCircle:e(38720),GetTriangleToLine:e(13882),GetTriangleToTriangle:e(75636),LineToCircle:e(80462),LineToLine:e(76112),LineToRectangle:e(92773),PointToLine:e(16204),PointToLineSegment:e(14199),RectangleToRectangle:e(59996),RectangleToTriangle:e(89265),RectangleToValues:e(84411),TriangleToCircle:e(67636),TriangleToLine:e(2822),TriangleToTriangle:e(82944)}}),91938:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};s.exports=T}),84993:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){a===void 0&&(a=1),g===void 0&&(g=[]);var f=Math.round(e.x1),o=Math.round(e.y1),u=Math.round(e.x2),r=Math.round(e.y2),h=Math.abs(u-f),c=Math.abs(r-o),l=f<u?1:-1,p=o<r?1:-1,m=h-c;g.push({x:f,y:o});for(var v=1;!(f===u&&o===r);){var y=m<<1;y>-c&&(m-=c,f+=l),y<h&&(m+=h,o+=p),v%a===0&&g.push({x:f,y:o}),v++}return g};s.exports=T}),36469:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=a-(e.x1+e.x2)/2,o=g-(e.y1+e.y2)/2;return e.x1+=f,e.y1+=o,e.x2+=f,e.y2+=o,e};s.exports=T}),31116:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23031),g=function(f){return new a(f.x1,f.y1,f.x2,f.y2)};s.exports=g}),59944:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2)};s.exports=T}),59220:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2};s.exports=T}),78177:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),g=function(f,o,u){u===void 0&&(u=o);var r=a(f),h=f.x2-f.x1,c=f.y2-f.y1;return o&&(f.x1=f.x1-h/r*o,f.y1=f.y1-c/r*o),u&&(f.x2=f.x2+h/r*u,f.y2=f.y2+c/r*u),f};s.exports=g}),26708:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(52816),g=e(6113),f=e(2141),o=function(u,r,h,c,l){c===void 0&&(c=0),l===void 0&&(l=[]);var p=[],m=u.x1,v=u.y1,y=u.x2-m,E=u.y2-v,C=g(r,l),w,A,M=h-1;for(w=0;w<M;w++)A=C(w/M),p.push(new f(m+y*A,v+E*A));if(A=C(1),p.push(new f(m+y*A,v+E*A)),c>0){var R=p[0],P=[R];for(w=1;w<p.length-1;w++){var b=p[w];a(R,b)>=c&&(P.push(b),R=b)}var F=p[p.length-1];return a(R,F)<c&&P.pop(),P.push(F),P}else return p};s.exports=o}),32125:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){return o===void 0&&(o=new a),o.x=(f.x1+f.x2)/2,o.y=(f.y1+f.y2)/2,o};s.exports=g}),99569:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o,u){u===void 0&&(u=new a);var r=f.x1,h=f.y1,c=f.x2,l=f.y2,p=(c-r)*(c-r)+(l-h)*(l-h);if(p===0)return u;var m=((o.x-r)*(c-r)+(o.y-h)*(l-h))/p;return u.x=r+m*(c-r),u.y=h+m*(l-h),u};s.exports=g}),34638:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=e(91938),f=e(2141),o=function(u,r){r===void 0&&(r=new f);var h=g(u)-a.TAU;return r.x=Math.cos(h),r.y=Math.sin(h),r};s.exports=o}),13151:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o,u){return u===void 0&&(u=new a),u.x=f.x1+(f.x2-f.x1)*o,u.y=f.y1+(f.y2-f.y1)*o,u};s.exports=g}),15258:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),g=e(2141),f=function(o,u,r,h){h===void 0&&(h=[]),!u&&r>0&&(u=a(o)/r);for(var c=o.x1,l=o.y1,p=o.x2,m=o.y2,v=0;v<u;v++){var y=v/u,E=c+(p-c)*y,C=l+(m-l)*y;h.push(new g(E,C))}return h};s.exports=f}),26408:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.x1,f=e.y1,o=e.x2,u=e.y2,r=(o-g)*(o-g)+(u-f)*(u-f);if(r===0)return!1;var h=((f-a.y)*(o-g)-(g-a.x)*(u-f))/r;return Math.abs(h)*Math.sqrt(r)};s.exports=T}),98770:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.y1-e.y2)};s.exports=T}),35001:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};s.exports=T}),23031:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(13151),f=e(15258),o=e(23777),u=e(65822),r=e(26099),h=new a({initialize:function(l,p,m,v){l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),this.type=o.LINE,this.x1=l,this.y1=p,this.x2=m,this.y2=v},getPoint:function(c,l){return g(this,c,l)},getPoints:function(c,l,p){return f(this,c,l,p)},getRandomPoint:function(c){return u(this,c)},setTo:function(c,l,p,m){return c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=0),this.x1=c,this.y1=l,this.x2=p,this.y2=m,this},setFromObjects:function(c,l){return this.x1=c.x,this.y1=c.y,this.x2=l.x,this.y2=l.y,this},getPointA:function(c){return c===void 0&&(c=new r),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new r),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});s.exports=h}),64795:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=e(15994),f=e(91938),o=function(u){var r=f(u)-a.TAU;return g(r,-Math.PI,Math.PI)};s.exports=o}),52616:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=e(91938),f=function(o){return Math.cos(g(o)-a.TAU)};s.exports=f}),87231:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=e(91938),f=function(o){return Math.sin(g(o)-a.TAU)};s.exports=f}),89662:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e.x1+=a,e.y1+=g,e.x2+=a,e.y2+=g,e};s.exports=T}),71165:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};s.exports=T}),65822:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){o===void 0&&(o=new a);var u=Math.random();return o.x=f.x1+u*(f.x2-f.x1),o.y=f.y1+u*(f.y2-f.y1),o};s.exports=g}),69777:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91938),g=e(64795),f=function(o,u){return 2*g(u)-Math.PI-a(o)};s.exports=f}),39706:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64400),g=function(f,o){var u=(f.x1+f.x2)/2,r=(f.y1+f.y2)/2;return a(f,u,r,o)};s.exports=g}),82585:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64400),g=function(f,o,u){return a(f,o.x,o.y,u)};s.exports=g}),64400:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=Math.cos(f),u=Math.sin(f),r=e.x1-a,h=e.y1-g;return e.x1=r*o-h*u+a,e.y1=r*u+h*o+g,r=e.x2-a,h=e.y2-g,e.x2=r*o-h*u+a,e.y2=r*u+h*o+g,e};s.exports=T}),62377:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o){return e.x1=a,e.y1=g,e.x2=a+Math.cos(f)*o,e.y2=g+Math.sin(f)*o,e};s.exports=T}),71366:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};s.exports=T}),10809:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.x1-e.x2)};s.exports=T}),2529:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23031);a.Angle=e(91938),a.BresenhamPoints=e(84993),a.CenterOn=e(36469),a.Clone=e(31116),a.CopyFrom=e(59944),a.Equals=e(59220),a.Extend=e(78177),a.GetEasedPoints=e(26708),a.GetMidPoint=e(32125),a.GetNearestPoint=e(99569),a.GetNormal=e(34638),a.GetPoint=e(13151),a.GetPoints=e(15258),a.GetShortestDistance=e(26408),a.Height=e(98770),a.Length=e(35001),a.NormalAngle=e(64795),a.NormalX=e(52616),a.NormalY=e(87231),a.Offset=e(89662),a.PerpSlope=e(71165),a.Random=e(65822),a.ReflectAngle=e(69777),a.Rotate=e(39706),a.RotateAroundPoint=e(82585),a.RotateAroundXY=e(64400),a.SetToAngle=e(62377),a.Slope=e(71366),a.Width=e(10809),s.exports=a}),83997:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(87841),f=e(26099);function o(r,h,c,l){var p=r-c,m=h-l,v=p*p+m*m;return Math.sqrt(v)}var u=new a({initialize:function(h,c,l){this.vertex1=h,this.vertex2=c,this.vertex3=l,this.bounds=new g,this._inCenter=new f},getInCenter:function(r){r===void 0&&(r=!0);var h=this.vertex1,c=this.vertex2,l=this.vertex3,p,m,v,y,E,C;r?(p=h.x,m=h.y,v=c.x,y=c.y,E=l.x,C=l.y):(p=h.vx,m=h.vy,v=c.vx,y=c.vy,E=l.vx,C=l.vy);var w=o(E,C,v,y),A=o(p,m,E,C),M=o(v,y,p,m),R=w+A+M;return this._inCenter.set((p*w+v*A+E*M)/R,(m*w+y*A+C*M)/R)},contains:function(r,h,c){var l=this.vertex1,p=this.vertex2,m=this.vertex3,v=l.vx,y=l.vy,E=p.vx,C=p.vy,w=m.vx,A=m.vy;if(c){var M=c.a,R=c.b,P=c.c,b=c.d,F=c.e,I=c.f;v=l.vx*M+l.vy*P+F,y=l.vx*R+l.vy*b+I,E=p.vx*M+p.vy*P+F,C=p.vx*R+p.vy*b+I,w=m.vx*M+m.vy*P+F,A=m.vx*R+m.vy*b+I}var L=w-v,D=A-y,O=E-v,z=C-y,_=r-v,X=h-y,H=L*L+D*D,U=L*O+D*z,G=L*_+D*X,N=O*O+z*z,W=O*_+z*X,V=H*N-U*U,$=V===0?0:1/V,j=(N*G-U*W)*$,k=(H*W-U*G)*$;return j>=0&&k>=0&&j+k<1},isCounterClockwise:function(r){var h=this.vertex1,c=this.vertex2,l=this.vertex3,p=(c.vx-h.vx)*(l.vy-h.vy)-(c.vy-h.vy)*(l.vx-h.vx);return r<=0?p>=0:p<0},load:function(r,h,c,l,p){return c=this.vertex1.load(r,h,c,l,p),c=this.vertex2.load(r,h,c,l,p),c=this.vertex3.load(r,h,c,l,p),c},transformCoordinatesLocal:function(r,h,c,l){return this.vertex1.transformCoordinatesLocal(r,h,c,l),this.vertex2.transformCoordinatesLocal(r,h,c,l),this.vertex3.transformCoordinatesLocal(r,h,c,l),this},updateBounds:function(){var r=this.vertex1,h=this.vertex2,c=this.vertex3,l=this.bounds;return l.x=Math.min(r.vx,h.vx,c.vx),l.y=Math.min(r.vy,h.vy,c.vy),l.width=Math.max(r.vx,h.vx,c.vx)-l.x,l.height=Math.max(r.vy,h.vy,c.vy)-l.y,this},isInView:function(r,h,c,l,p,m,v,y,E,C,w){this.update(l,p,m,v,y,E,C,w);var A=this.vertex1,M=this.vertex2,R=this.vertex3;if(A.ta<=0&&M.ta<=0&&R.ta<=0||h&&!this.isCounterClockwise(c))return!1;var P=this.bounds;P.x=Math.min(A.tx,M.tx,R.tx),P.y=Math.min(A.ty,M.ty,R.ty),P.width=Math.max(A.tx,M.tx,R.tx)-P.x,P.height=Math.max(A.ty,M.ty,R.ty)-P.y;var b=r.x+r.width,F=r.y+r.height;return P.width<=0||P.height<=0||r.width<=0||r.height<=0?!1:!(P.right<r.x||P.bottom<r.y||P.x>b||P.y>F)},scrollUV:function(r,h){return this.vertex1.scrollUV(r,h),this.vertex2.scrollUV(r,h),this.vertex3.scrollUV(r,h),this},scaleUV:function(r,h){return this.vertex1.scaleUV(r,h),this.vertex2.scaleUV(r,h),this.vertex3.scaleUV(r,h),this},setColor:function(r){return this.vertex1.color=r,this.vertex2.color=r,this.vertex3.color=r,this},update:function(r,h,c,l,p,m,v,y){return this.vertex1.update(h,c,l,p,m,v,y,r),this.vertex2.update(h,c,l,p,m,v,y,r),this.vertex3.update(h,c,l,p,m,v,y,r),this},translate:function(r,h){h===void 0&&(h=0);var c=this.vertex1,l=this.vertex2,p=this.vertex3;return c.x+=r,c.y+=h,l.x+=r,l.y+=h,p.x+=r,p.y+=h,this},x:{get:function(){return this.getInCenter().x},set:function(r){var h=this.getInCenter();this.translate(r-h.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var h=this.getInCenter();this.translate(0,r-h.y)}},alpha:{get:function(){var r=this.vertex1,h=this.vertex2,c=this.vertex3;return(r.alpha+h.alpha+c.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,h=this.vertex2,c=this.vertex3;return(r.vz+h.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});s.exports=u}),48803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),g=e(95540),f=e(37867),o=e(25836),u=e(39318),r=new o,h=new o,c=new f,l=function(p){var m=g(p,"mesh"),v=g(p,"texture",null),y=g(p,"frame"),E=g(p,"width",1),C=g(p,"height",E),w=g(p,"widthSegments",1),A=g(p,"heightSegments",w),M=g(p,"x",0),R=g(p,"y",0),P=g(p,"z",0),b=g(p,"rotateX",0),F=g(p,"rotateY",0),I=g(p,"rotateZ",0),L=g(p,"zIsUp",!0),D=g(p,"isOrtho",m?m.dirtyCache[11]:!1),O=g(p,"colors",[16777215]),z=g(p,"alphas",[1]),_=g(p,"tile",!1),X=g(p,"flipY",!1),H=g(p,"width",null),U={faces:[],verts:[]};r.set(M,R,P),h.set(b,F,I),c.fromRotationXYTranslation(h,r,L);var G;if(!v&&m)v=m.texture,y||(G=m.frame);else if(m&&typeof v=="string")v=m.scene.sys.textures.get(v);else if(!v)return U;G||(G=v.get(y)),!H&&D&&v&&m&&(E=G.width/m.height,C=G.height/m.height);var N=E/2,W=C/2,V=Math.floor(w),$=Math.floor(A),j=V+1,k=$+1,Q=E/V,et=C/$,at=[],q=[],ft,vt,Tt=0,ct=1,Ut=0,yt=1;G&&(Tt=G.u0,ct=G.u1,X?(Ut=G.v1,yt=G.v0):(Ut=G.v0,yt=G.v1));var it=ct-Tt,Z=yt-Ut;for(vt=0;vt<k;vt++){var lt=vt*et-W;for(ft=0;ft<j;ft++){var pt=ft*Q-N;q.push(pt,-lt);var Pt=Tt+it*(ft/V),wt=Ut+Z*(vt/$);at.push(Pt,wt)}}Array.isArray(O)||(O=[O]),Array.isArray(z)||(z=[z]);var jt=0,Vt=0;for(vt=0;vt<$;vt++)for(ft=0;ft<V;ft++){var Wt=(ft+j*vt)*2,ue=(ft+j*(vt+1))*2,Gt=(ft+1+j*(vt+1))*2,zt=(ft+1+j*vt)*2,Yt=O[Vt],bt=z[jt],Kt=new u(q[Wt],q[Wt+1],0,at[Wt],at[Wt+1],Yt,bt).transformMat4(c),ge=new u(q[ue],q[ue+1],0,at[ue],at[ue+1],Yt,bt).transformMat4(c),ce=new u(q[zt],q[zt+1],0,at[zt],at[zt+1],Yt,bt).transformMat4(c),Oe=new u(q[ue],q[ue+1],0,at[ue],at[ue+1],Yt,bt).transformMat4(c),dt=new u(q[Gt],q[Gt+1],0,at[Gt],at[Gt+1],Yt,bt).transformMat4(c),Jt=new u(q[zt],q[zt+1],0,at[zt],at[zt+1],Yt,bt).transformMat4(c);_&&(Kt.setUVs(Tt,yt),ge.setUVs(Tt,Ut),ce.setUVs(ct,yt),Oe.setUVs(Tt,Ut),dt.setUVs(ct,Ut),Jt.setUVs(ct,yt)),Vt++,Vt===O.length&&(Vt=0),jt++,jt===z.length&&(jt=0),U.verts.push(Kt,ge,ce,Oe,dt,Jt),U.faces.push(new a(Kt,ge,ce),new a(Oe,dt,Jt))}return m&&(m.faces=m.faces.concat(U.faces),m.vertices=m.vertices.concat(U.verts)),U};s.exports=l}),34684:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),g=e(37867),f=e(25836),o=e(39318),u=new f,r=new f,h=new g,c=function(l,p,m,v,y,E,C,w,A,M){m===void 0&&(m=1),v===void 0&&(v=0),y===void 0&&(y=0),E===void 0&&(E=0),C===void 0&&(C=0),w===void 0&&(w=0),A===void 0&&(A=0),M===void 0&&(M=!0);var R={faces:[],verts:[]},P=l.materials;u.set(v,y,E),r.set(C,w,A),h.fromRotationXYTranslation(r,u,M);for(var b=0;b<l.models.length;b++)for(var F=l.models[b],I=F.vertices,L=F.textureCoords,D=F.faces,O=0;O<D.length;O++){var z=D[O],_=z.vertices[0],X=z.vertices[1],H=z.vertices[2],U=I[_.vertexIndex],G=I[X.vertexIndex],N=I[H.vertexIndex],W=_.textureCoordsIndex,V=X.textureCoordsIndex,$=H.textureCoordsIndex,j=W===-1?{u:0,v:1}:L[W],k=V===-1?{u:0,v:0}:L[V],Q=$===-1?{u:1,v:1}:L[$],et=16777215;z.material!==""&&P[z.material]&&(et=P[z.material]);var at=new o(U.x*m,U.y*m,U.z*m,j.u,j.v,et).transformMat4(h),q=new o(G.x*m,G.y*m,G.z*m,k.u,k.v,et).transformMat4(h),ft=new o(N.x*m,N.y*m,N.z*m,Q.u,Q.v,et).transformMat4(h);R.verts.push(at,q,ft),R.faces.push(new a(at,q,ft))}return p&&(p.faces=p.faces.concat(R.faces),p.vertices=p.vertices.concat(R.verts)),R};s.exports=c}),92515:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),g=e(39318),f=function(o,u,r,h,c,l,p,m){if(h===void 0&&(h=!1),l===void 0&&(l=16777215),p===void 0&&(p=1),m===void 0&&(m=!1),o.length!==u.length&&!h){console.warn("GenerateVerts: vertices and uvs count not equal");return}var v={faces:[],vertices:[]},y,E,C,w,A,M,R,P,b,F,I,L=h?3:2,D=Array.isArray(l),O=Array.isArray(p);if(Array.isArray(r)&&r.length>0)for(y=0;y<r.length;y++){var z=r[y],_=r[y]*2,X=r[y]*L;E=o[X],C=o[X+1],w=h?o[X+2]:0,A=u[_],M=u[_+1],m&&(M=1-M),R=D?l[z]:l,P=O?p[z]:p,b=0,F=0,I=0,c&&(b=c[X],F=c[X+1],I=h?c[X+2]:0),v.vertices.push(new g(E,C,w,A,M,R,P,b,F,I))}else{var H=0,U=0;for(y=0;y<o.length;y+=L)E=o[y],C=o[y+1],w=h?o[y+2]:0,A=u[H],M=u[H+1],R=D?l[U]:l,P=O?p[U]:p,b=0,F=0,I=0,c&&(b=c[y],F=c[y+1],I=h?c[y+2]:0),v.vertices.push(new g(E,C,w,A,M,R,P,b,F,I)),H+=2,U++}for(y=0;y<v.vertices.length;y+=3){var G=v.vertices[y],N=v.vertices[y+1],W=v.vertices[y+2];v.faces.push(new a(G,N,W))}return v};s.exports=f}),85048:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=!0,e="untitled",a="",g="";function f(E){var C=E.indexOf("#");return C>-1?E.substring(0,C):E}function o(E){return E.models.length===0&&E.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),a="",E.models[E.models.length-1]}function u(E,C){var w=E.length>=2?E[1]:e;C.models.push({faces:[],name:w,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function r(E){E.length===2&&(a=E[1])}function h(E,C){var w=E.length,A=w>=2?parseFloat(E[1]):0,M=w>=3?parseFloat(E[2]):0,R=w>=4?parseFloat(E[3]):0;o(C).vertices.push({x:A,y:M,z:R})}function c(E,C){var w=E.length,A=w>=2?parseFloat(E[1]):0,M=w>=3?parseFloat(E[2]):0,R=w>=4?parseFloat(E[3]):0;isNaN(A)&&(A=0),isNaN(M)&&(M=0),isNaN(R)&&(R=0),T&&(M=1-M),o(C).textureCoords.push({u:A,v:M,w:R})}function l(E,C){var w=E.length,A=w>=2?parseFloat(E[1]):0,M=w>=3?parseFloat(E[2]):0,R=w>=4?parseFloat(E[3]):0;o(C).vertexNormals.push({x:A,y:M,z:R})}function p(E,C){var w=E.length-1;if(!(w<3)){for(var A={group:a,material:g,vertices:[]},M=0;M<w;M++){var R=E[M+1],P=R.split("/"),b=P.length;if(!(b<1||b>3)){var F=0,I=0,L=0;F=parseInt(P[0],10),b>1&&P[1]!==""&&(I=parseInt(P[1],10)),b>2&&(L=parseInt(P[2],10)),F!==0&&(F<0&&(F=o(C).vertices.length+1+F),I-=1,F-=1,L-=1,A.vertices.push({textureCoordsIndex:I,vertexIndex:F,vertexNormalIndex:L}))}}o(C).faces.push(A)}}function m(E,C){E.length>=2&&C.materialLibraries.push(E[1])}function v(E){E.length>=2&&(g=E[1])}var y=function(E,C){C===void 0&&(C=!0),T=C;var w={materials:{},materialLibraries:[],models:[]};a="",g="";for(var A=E.split(`
`),M=0;M<A.length;M++){var R=f(A[M]),P=R.replace(/\s\s+/g," ").trim().split(" ");switch(P[0].toLowerCase()){case"o":u(P,w);break;case"g":r(P);break;case"v":h(P,w);break;case"vt":c(P,w);break;case"vn":l(P,w);break;case"f":p(P,w);break;case"mtllib":m(P,w);break;case"usemtl":v(P);break}}return w};s.exports=y}),61485:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589),g=function(f){for(var o={},u=f.split(`
`),r="",h=0;h<u.length;h++){var c=u[h].trim();if(!(c.indexOf("#")===0||c==="")){var l=c.replace(/\s\s+/g," ").trim().split(" ");switch(l[0].toLowerCase()){case"newmtl":{r=l[1];break}case"kd":{var p=Math.floor(l[1]*255),m=l.length>=2?Math.floor(l[2]*255):p,v=l.length>=3?Math.floor(l[3]*255):p;o[r]=a(p,m,v);break}}}}return o};s.exports=g}),92570:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o,u;if(g===void 0&&f===void 0){var r=e.getInCenter();o=r.x,u=r.y}var h=Math.cos(a),c=Math.sin(a),l=e.vertex1,p=e.vertex2,m=e.vertex3,v=l.x-o,y=l.y-u;l.set(v*h-y*c+o,v*c+y*h+u),v=p.x-o,y=p.y-u,p.set(v*h-y*c+o,v*c+y*h+u),v=m.x-o,y=m.y-u,m.set(v*h-y*c+o,v*c+y*h+u)};s.exports=T}),39318:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(70554),f=e(25836),o=new a({Extends:f,initialize:function(r,h,c,l,p,m,v,y,E,C){m===void 0&&(m=16777215),v===void 0&&(v=1),y===void 0&&(y=0),E===void 0&&(E=0),C===void 0&&(C=0),f.call(this,r,h,c),this.vx=0,this.vy=0,this.vz=0,this.nx=y,this.ny=E,this.nz=C,this.u=l,this.v=p,this.color=m,this.alpha=v,this.tx=0,this.ty=0,this.ta=0,this.tu=l,this.tv=p},setUVs:function(u,r){return this.u=u,this.v=r,this.tu=u,this.tv=r,this},scrollUV:function(u,r){return this.tu+=u,this.tv+=r,this},scaleUV:function(u,r){return this.tu=this.u*u,this.tv=this.v*r,this},transformCoordinatesLocal:function(u,r,h,c){var l=this.x,p=this.y,m=this.z,v=u.val,y=l*v[0]+p*v[4]+m*v[8]+v[12],E=l*v[1]+p*v[5]+m*v[9]+v[13],C=l*v[2]+p*v[6]+m*v[10]+v[14],w=l*v[3]+p*v[7]+m*v[11]+v[15];this.vx=y/w*r,this.vy=-(E/w)*h,c<=0?this.vz=C/w:this.vz=-(C/w)},resize:function(u,r,h,c,l,p){return this.x=u,this.y=r,this.vx=this.x*h,this.vy=-this.y*c,this.vz=0,l<.5?this.vx+=h*(.5-l):l>.5&&(this.vx-=h*(l-.5)),p<.5?this.vy+=c*(.5-p):p>.5&&(this.vy-=c*(p-.5)),this},update:function(u,r,h,c,l,p,m,v){var y=this.vx*u+this.vy*h+l,E=this.vx*r+this.vy*c+p;return m&&(y=Math.round(y),E=Math.round(E)),this.tx=y,this.ty=E,this.ta=this.alpha*v,this},load:function(u,r,h,c,l){return u[++h]=this.tx,u[++h]=this.ty,u[++h]=this.tu,u[++h]=this.tv,u[++h]=c,u[++h]=l,r[++h]=g.getTintAppendFloatAlpha(this.color,this.ta),h}});s.exports=o}),73090:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Face:e(83997),GenerateGridVerts:e(48803),GenerateObjVerts:e(34684),GenerateVerts:e(92515),ParseObj:e(85048),ParseObjMaterial:e(61485),RotateFace:e(92570),Vertex:e(39318)};s.exports=a}),96550:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};s.exports=T}),99706:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f){return new a(f.x,f.y)};s.exports=g}),68010:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x,e.y)};s.exports=T}),27814:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x===a.x&&e.y===a.y};s.exports=T}),73565:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};s.exports=T}),87555:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){if(o===void 0&&(o=new a),!Array.isArray(f))throw new Error("GetCentroid points argument must be an array");var u=f.length;if(u<1)throw new Error("GetCentroid points array must not be empty");if(u===1)o.x=f[0].x,o.y=f[0].y;else{for(var r=0;r<u;r++)o.x+=f[r].x,o.y+=f[r].y;o.x/=u,o.y/=u}return o};s.exports=g}),28793:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};s.exports=T}),44405:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x*e.x+e.y*e.y};s.exports=T}),20873:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=function(f,o){o===void 0&&(o=new a);for(var u=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,l=0;l<f.length;l++){var p=f[l];p.x>u&&(u=p.x),p.x<r&&(r=p.x),p.y>h&&(h=p.y),p.y<c&&(c=p.y)}return o.x=r,o.y=c,o.width=u-r,o.height=h-c,o};s.exports=g}),26152:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o,u,r){return u===void 0&&(u=0),r===void 0&&(r=new a),r.x=f.x+(o.x-f.x)*u,r.y=f.y+(o.y-f.y)*u,r};s.exports=g}),55767:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(e.y,e.x)};s.exports=T}),79432:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){return o===void 0&&(o=new a),o.setTo(-f.x,-f.y)};s.exports=g}),2141:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23777),f=new a({initialize:function(u,r){u===void 0&&(u=0),r===void 0&&(r=u),this.type=g.POINT,this.x=u,this.y=r},setTo:function(o,u){return o===void 0&&(o=0),u===void 0&&(u=o),this.x=o,this.y=u,this}});s.exports=f}),72930:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=e(44405),f=function(o,u,r){r===void 0&&(r=new a);var h=o.x*u.x+o.y*u.y,c=h/g(u);return c!==0&&(r.x=c*u.x,r.y=c*u.y),r};s.exports=f}),62880:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o,u){u===void 0&&(u=new a);var r=f.x*o.x+f.y*o.y;return r!==0&&(u.x=r*o.x,u.y=r*o.y),u};s.exports=g}),15093:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28793),g=function(f,o){if(f.x!==0||f.y!==0){var u=a(f);f.x/=u,f.y/=u}return f.x*=o,f.y*=o,f};s.exports=g}),43711:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141);a.Ceil=e(96550),a.Clone=e(99706),a.CopyFrom=e(68010),a.Equals=e(27814),a.Floor=e(73565),a.GetCentroid=e(87555),a.GetMagnitude=e(28793),a.GetMagnitudeSq=e(44405),a.GetRectangleFromPoints=e(20873),a.Interpolate=e(26152),a.Invert=e(55767),a.Negative=e(79432),a.Project=e(72930),a.ProjectUnit=e(62880),a.SetMagnitude=e(15093),s.exports=a}),12306:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25717),g=function(f){return new a(f.points)};s.exports=g}),63814:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){for(var f=!1,o=-1,u=e.points.length-1;++o<e.points.length;u=o){var r=e.points[o].x,h=e.points[o].y,c=e.points[u].x,l=e.points[u].y;(h<=g&&g<l||l<=g&&g<h)&&a<(c-r)*(g-h)/(l-h)+r&&(f=!f)}return f};s.exports=T}),99338:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63814),g=function(f,o){return a(f,o.x,o.y)};s.exports=g}),94811:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(U,G,N){N=N||2;var W=G&&G.length,V=W?G[0]*N:U.length,$=e(U,0,V,N,!0),j=[];if(!$||$.next===$.prev)return j;var k,Q,et,at,q,ft,vt;if(W&&($=h(U,G,$,N)),U.length>80*N){k=et=U[0],Q=at=U[1];for(var Tt=N;Tt<V;Tt+=N)q=U[Tt],ft=U[Tt+1],q<k&&(k=q),ft<Q&&(Q=ft),q>et&&(et=q),ft>at&&(at=ft);vt=Math.max(et-k,at-Q),vt=vt!==0?32767/vt:0}return g($,j,N,k,Q,vt,0),j}function e(U,G,N,W,V){var $,j;if(V===H(U,G,N,W)>0)for($=G;$<N;$+=W)j=z($,U[$],U[$+1],j);else for($=N-W;$>=G;$-=W)j=z($,U[$],U[$+1],j);return j&&R(j,j.next)&&(_(j),j=j.next),j}function a(U,G){if(!U)return U;G||(G=U);var N=U,W;do if(W=!1,!N.steiner&&(R(N,N.next)||M(N.prev,N,N.next)===0)){if(_(N),N=G=N.prev,N===N.next)break;W=!0}else N=N.next;while(W||N!==G);return G}function g(U,G,N,W,V,$,j){if(U){!j&&$&&v(U,W,V,$);for(var k=U,Q,et;U.prev!==U.next;){if(Q=U.prev,et=U.next,$?o(U,W,V,$):f(U)){G.push(Q.i/N|0),G.push(U.i/N|0),G.push(et.i/N|0),_(U),U=et.next,k=et.next;continue}if(U=et,U===k){j?j===1?(U=u(a(U),G,N),g(U,G,N,W,V,$,2)):j===2&&r(U,G,N,W,V,$):g(a(U),G,N,W,V,$,1);break}}}}function f(U){var G=U.prev,N=U,W=U.next;if(M(G,N,W)>=0)return!1;for(var V=G.x,$=N.x,j=W.x,k=G.y,Q=N.y,et=W.y,at=V<$?V<j?V:j:$<j?$:j,q=k<Q?k<et?k:et:Q<et?Q:et,ft=V>$?V>j?V:j:$>j?$:j,vt=k>Q?k>et?k:et:Q>et?Q:et,Tt=W.next;Tt!==G;){if(Tt.x>=at&&Tt.x<=ft&&Tt.y>=q&&Tt.y<=vt&&w(V,k,$,Q,j,et,Tt.x,Tt.y)&&M(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.next}return!0}function o(U,G,N,W){var V=U.prev,$=U,j=U.next;if(M(V,$,j)>=0)return!1;for(var k=V.x,Q=$.x,et=j.x,at=V.y,q=$.y,ft=j.y,vt=k<Q?k<et?k:et:Q<et?Q:et,Tt=at<q?at<ft?at:ft:q<ft?q:ft,ct=k>Q?k>et?k:et:Q>et?Q:et,Ut=at>q?at>ft?at:ft:q>ft?q:ft,yt=E(vt,Tt,G,N,W),it=E(ct,Ut,G,N,W),Z=U.prevZ,lt=U.nextZ;Z&&Z.z>=yt&&lt&&lt.z<=it;){if(Z.x>=vt&&Z.x<=ct&&Z.y>=Tt&&Z.y<=Ut&&Z!==V&&Z!==j&&w(k,at,Q,q,et,ft,Z.x,Z.y)&&M(Z.prev,Z,Z.next)>=0||(Z=Z.prevZ,lt.x>=vt&&lt.x<=ct&&lt.y>=Tt&&lt.y<=Ut&&lt!==V&&lt!==j&&w(k,at,Q,q,et,ft,lt.x,lt.y)&&M(lt.prev,lt,lt.next)>=0))return!1;lt=lt.nextZ}for(;Z&&Z.z>=yt;){if(Z.x>=vt&&Z.x<=ct&&Z.y>=Tt&&Z.y<=Ut&&Z!==V&&Z!==j&&w(k,at,Q,q,et,ft,Z.x,Z.y)&&M(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;lt&&lt.z<=it;){if(lt.x>=vt&&lt.x<=ct&&lt.y>=Tt&&lt.y<=Ut&&lt!==V&&lt!==j&&w(k,at,Q,q,et,ft,lt.x,lt.y)&&M(lt.prev,lt,lt.next)>=0)return!1;lt=lt.nextZ}return!0}function u(U,G,N){var W=U;do{var V=W.prev,$=W.next.next;!R(V,$)&&P(V,W,W.next,$)&&L(V,$)&&L($,V)&&(G.push(V.i/N|0),G.push(W.i/N|0),G.push($.i/N|0),_(W),_(W.next),W=U=$),W=W.next}while(W!==U);return a(W)}function r(U,G,N,W,V,$){var j=U;do{for(var k=j.next.next;k!==j.prev;){if(j.i!==k.i&&A(j,k)){var Q=O(j,k);j=a(j,j.next),Q=a(Q,Q.next),g(j,G,N,W,V,$,0),g(Q,G,N,W,V,$,0);return}k=k.next}j=j.next}while(j!==U)}function h(U,G,N,W){var V=[],$,j,k,Q,et;for($=0,j=G.length;$<j;$++)k=G[$]*W,Q=$<j-1?G[$+1]*W:U.length,et=e(U,k,Q,W,!1),et===et.next&&(et.steiner=!0),V.push(C(et));for(V.sort(c),$=0;$<V.length;$++)N=l(V[$],N);return N}function c(U,G){return U.x-G.x}function l(U,G){var N=p(U,G);if(!N)return G;var W=O(N,U);return a(W,W.next),a(N,N.next)}function p(U,G){var N=G,W=U.x,V=U.y,$=-1/0,j;do{if(V<=N.y&&V>=N.next.y&&N.next.y!==N.y){var k=N.x+(V-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(k<=W&&k>$&&($=k,j=N.x<N.next.x?N:N.next,k===W))return j}N=N.next}while(N!==G);if(!j)return null;var Q=j,et=j.x,at=j.y,q=1/0,ft;N=j;do W>=N.x&&N.x>=et&&W!==N.x&&w(V<at?W:$,V,et,at,V<at?$:W,V,N.x,N.y)&&(ft=Math.abs(V-N.y)/(W-N.x),L(N,U)&&(ft<q||ft===q&&(N.x>j.x||N.x===j.x&&m(j,N)))&&(j=N,q=ft)),N=N.next;while(N!==Q);return j}function m(U,G){return M(U.prev,U,G.prev)<0&&M(G.next,U,U.next)<0}function v(U,G,N,W){var V=U;do V.z===0&&(V.z=E(V.x,V.y,G,N,W)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==U);V.prevZ.nextZ=null,V.prevZ=null,y(V)}function y(U){var G,N,W,V,$,j,k,Q,et=1;do{for(N=U,U=null,$=null,j=0;N;){for(j++,W=N,k=0,G=0;G<et&&(k++,W=W.nextZ,!!W);G++);for(Q=et;k>0||Q>0&&W;)k!==0&&(Q===0||!W||N.z<=W.z)?(V=N,N=N.nextZ,k--):(V=W,W=W.nextZ,Q--),$?$.nextZ=V:U=V,V.prevZ=$,$=V;N=W}$.nextZ=null,et*=2}while(j>1);return U}function E(U,G,N,W,V){return U=(U-N)*V|0,G=(G-W)*V|0,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,U|G<<1}function C(U){var G=U,N=U;do(G.x<N.x||G.x===N.x&&G.y<N.y)&&(N=G),G=G.next;while(G!==U);return N}function w(U,G,N,W,V,$,j,k){return(V-j)*(G-k)>=(U-j)*($-k)&&(U-j)*(W-k)>=(N-j)*(G-k)&&(N-j)*($-k)>=(V-j)*(W-k)}function A(U,G){return U.next.i!==G.i&&U.prev.i!==G.i&&!I(U,G)&&(L(U,G)&&L(G,U)&&D(U,G)&&(M(U.prev,U,G.prev)||M(U,G.prev,G))||R(U,G)&&M(U.prev,U,U.next)>0&&M(G.prev,G,G.next)>0)}function M(U,G,N){return(G.y-U.y)*(N.x-G.x)-(G.x-U.x)*(N.y-G.y)}function R(U,G){return U.x===G.x&&U.y===G.y}function P(U,G,N,W){var V=F(M(U,G,N)),$=F(M(U,G,W)),j=F(M(N,W,U)),k=F(M(N,W,G));return!!(V!==$&&j!==k||V===0&&b(U,N,G)||$===0&&b(U,W,G)||j===0&&b(N,U,W)||k===0&&b(N,G,W))}function b(U,G,N){return G.x<=Math.max(U.x,N.x)&&G.x>=Math.min(U.x,N.x)&&G.y<=Math.max(U.y,N.y)&&G.y>=Math.min(U.y,N.y)}function F(U){return U>0?1:U<0?-1:0}function I(U,G){var N=U;do{if(N.i!==U.i&&N.next.i!==U.i&&N.i!==G.i&&N.next.i!==G.i&&P(N,N.next,U,G))return!0;N=N.next}while(N!==U);return!1}function L(U,G){return M(U.prev,U,U.next)<0?M(U,G,U.next)>=0&&M(U,U.prev,G)>=0:M(U,G,U.prev)<0||M(U,U.next,G)<0}function D(U,G){var N=U,W=!1,V=(U.x+G.x)/2,$=(U.y+G.y)/2;do N.y>$!=N.next.y>$&&N.next.y!==N.y&&V<(N.next.x-N.x)*($-N.y)/(N.next.y-N.y)+N.x&&(W=!W),N=N.next;while(N!==U);return W}function O(U,G){var N=new X(U.i,U.x,U.y),W=new X(G.i,G.x,G.y),V=U.next,$=G.prev;return U.next=G,G.prev=U,N.next=V,V.prev=N,W.next=N,N.prev=W,$.next=W,W.prev=$,W}function z(U,G,N,W){var V=new X(U,G,N);return W?(V.next=W.next,V.prev=W,W.next.prev=V,W.next=V):(V.prev=V,V.next=V),V}function _(U){U.next.prev=U.prev,U.prev.next=U.next,U.prevZ&&(U.prevZ.nextZ=U.nextZ),U.nextZ&&(U.nextZ.prevZ=U.prevZ)}function X(U,G,N){this.i=U,this.x=G,this.y=N,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}T.deviation=function(U,G,N,W){var V=G&&G.length,$=V?G[0]*N:U.length,j=Math.abs(H(U,0,$,N));if(V)for(var k=0,Q=G.length;k<Q;k++){var et=G[k]*N,at=k<Q-1?G[k+1]*N:U.length;j-=Math.abs(H(U,et,at,N))}var q=0;for(k=0;k<W.length;k+=3){var ft=W[k]*N,vt=W[k+1]*N,Tt=W[k+2]*N;q+=Math.abs((U[ft]-U[Tt])*(U[vt+1]-U[ft+1])-(U[ft]-U[vt])*(U[Tt+1]-U[ft+1]))}return j===0&&q===0?0:Math.abs((q-j)/j)};function H(U,G,N,W){for(var V=0,$=G,j=N-W;$<N;$+=W)V+=(U[j]-U[$])*(U[$+1]+U[j+1]),j=$;return V}T.flatten=function(U){for(var G=U[0][0].length,N={vertices:[],holes:[],dimensions:G},W=0,V=0;V<U.length;V++){for(var $=0;$<U[V].length;$++)for(var j=0;j<G;j++)N.vertices.push(U[V][$][j]);V>0&&(W+=U[V-1].length,N.holes.push(W))}return N},s.exports=T}),13829:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=function(f,o){o===void 0&&(o=new a);for(var u=1/0,r=1/0,h=-u,c=-r,l,p=0;p<f.points.length;p++)l=f.points[p],u=Math.min(u,l.x),r=Math.min(r,l.y),h=Math.max(h,l.x),c=Math.max(c,l.y);return o.x=u,o.y=r,o.width=h-u,o.height=c-r,o};s.exports=g}),26173:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=[]);for(var g=0;g<e.points.length;g++)a.push(e.points[g].x),a.push(e.points[g].y);return a};s.exports=T}),9564:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),g=e(23031),f=e(30052),o=function(u,r,h,c){c===void 0&&(c=[]);var l=u.points,p=f(u);!r&&h>0&&(r=p/h);for(var m=0;m<r;m++)for(var v=p*(m/r),y=0,E=0;E<l.length;E++){var C=l[E],w=l[(E+1)%l.length],A=new g(C.x,C.y,w.x,w.y),M=a(A);if(v<y||v>y+M){y+=M;continue}var R=A.getPoint((v-y)/M);c.push(R);break}return c};s.exports=o}),30052:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),g=e(23031),f=function(o){for(var u=o.points,r=0,h=0;h<u.length;h++){var c=u[h],l=u[(h+1)%u.length],p=new g(c.x,c.y,l.x,l.y);r+=a(p)}return r};s.exports=f}),25717:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(63814),f=e(9564),o=e(23777),u=new a({initialize:function(h){this.type=o.POLYGON,this.area=0,this.points=[],h&&this.setTo(h)},contains:function(r,h){return g(this,r,h)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var h,c=0;c<r.length;c++)h={x:0,y:0},typeof r[c]=="number"||typeof r[c]=="string"?(h.x=parseFloat(r[c]),h.y=parseFloat(r[c+1]),c++):Array.isArray(r[c])?(h.x=r[c][0],h.y=r[c][1]):(h.x=r[c].x,h.y=r[c].y),this.points.push(h);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,h,c,l=0;l<this.points.length-1;l++)h=this.points[l],c=this.points[l+1],r+=(c.x-h.x)*(h.y+c.y);return h=this.points[0],c=this.points[this.points.length-1],r+=(h.x-c.x)*(c.y+h.y),this.area=-r*.5,this.area},getPoints:function(r,h,c){return f(this,r,h,c)}});s.exports=u}),8133:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.points.reverse(),e};s.exports=T}),29524:(s=>{function T(u,r){var h=u.x-r.x,c=u.y-r.y;return h*h+c*c}function e(u,r,h){var c=r.x,l=r.y,p=h.x-c,m=h.y-l;if(p!==0||m!==0){var v=((u.x-c)*p+(u.y-l)*m)/(p*p+m*m);v>1?(c=h.x,l=h.y):v>0&&(c+=p*v,l+=m*v)}return p=u.x-c,m=u.y-l,p*p+m*m}function a(u,r){for(var h=u[0],c=[h],l,p=1,m=u.length;p<m;p++)l=u[p],T(l,h)>r&&(c.push(l),h=l);return h!==l&&c.push(l),c}function g(u,r,h,c,l){for(var p=c,m,v=r+1;v<h;v++){var y=e(u[v],u[r],u[h]);y>p&&(m=v,p=y)}p>c&&(m-r>1&&g(u,r,m,c,l),l.push(u[m]),h-m>1&&g(u,m,h,c,l))}function f(u,r){var h=u.length-1,c=[u[0]];return g(u,0,h,r,c),c.push(u[h]),c}var o=function(u,r,h){r===void 0&&(r=1),h===void 0&&(h=!1);var c=u.points;if(c.length>2){var l=r*r;h||(c=a(c,l)),u.setTo(f(c,l))}return u};s.exports=o}),5469:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(a,g){return a[0]=g[0],a[1]=g[1],a},e=function(a){var g,f=[],o=a.points;for(g=0;g<o.length;g++)f.push([o[g].x,o[g].y]);var u=[];for(f.length>0&&u.push(T([0,0],f[0])),g=0;g<f.length-1;g++){var r=f[g],h=f[g+1],c=r[0],l=r[1],p=h[0],m=h[1];u.push([.85*c+.15*p,.85*l+.15*m]),u.push([.15*c+.85*p,.15*l+.85*m])}return f.length>1&&u.push(T([0,0],f[f.length-1])),a.setTo(u)};s.exports=e}),24709:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){for(var f=e.points,o=0;o<f.length;o++)f[o].x+=a,f[o].y+=g;return e};s.exports=T}),58423:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25717);a.Clone=e(12306),a.Contains=e(63814),a.ContainsPoint=e(99338),a.Earcut=e(94811),a.GetAABB=e(13829),a.GetNumberArray=e(26173),a.GetPoints=e(9564),a.Perimeter=e(30052),a.Reverse=e(8133),a.Simplify=e(29524),a.Smooth=e(5469),a.Translate=e(24709),s.exports=a}),62224:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.height};s.exports=T}),98615:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};s.exports=T}),31688:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};s.exports=T}),67502:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e.x=a-e.width/2,e.y=g-e.height/2,e};s.exports=T}),65085:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=function(f){return new a(f.x,f.y,f.width,f.height)};s.exports=g}),37303:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e.width<=0||e.height<=0?!1:e.x<=a&&e.x+e.width>=a&&e.y<=g&&e.y+e.height>=g};s.exports=T}),96553:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37303),g=function(f,o){return a(f,o.x,o.y)};s.exports=g}),70273:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.width*a.height>e.width*e.height?!1:a.x>e.x&&a.x<e.right&&a.right>e.x&&a.right<e.right&&a.y>e.y&&a.y<e.bottom&&a.bottom>e.y&&a.bottom<e.bottom};s.exports=T}),43459:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};s.exports=T}),77493:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x,y:e.y}),a.push({x:e.right,y:e.y}),a.push({x:e.right,y:e.bottom}),a.push({x:e.x,y:e.bottom}),a};s.exports=T}),9219:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};s.exports=T}),53751:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8249),g=function(f,o){var u=a(f);return u<a(o)?f.setSize(o.height*u,o.height):f.setSize(o.width,o.width/u),f.setPosition(o.centerX-f.width/2,o.centerY-f.height/2)};s.exports=g}),16088:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8249),g=function(f,o){var u=a(f);return u>a(o)?f.setSize(o.height*u,o.height):f.setSize(o.width,o.width/u),f.setPosition(o.centerX-f.width/2,o.centerY-f.height/2)};s.exports=g}),80774:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};s.exports=T}),83859:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};s.exports=T}),19217:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=e(36383),f=function(o,u){if(u===void 0&&(u=new a),o.length===0)return u;for(var r=Number.MAX_VALUE,h=Number.MAX_VALUE,c=g.MIN_SAFE_INTEGER,l=g.MIN_SAFE_INTEGER,p,m,v,y=0;y<o.length;y++)p=o[y],Array.isArray(p)?(m=p[0],v=p[1]):(m=p.x,v=p.y),r=Math.min(r,m),h=Math.min(h,v),c=Math.max(c,m),l=Math.max(l,v);return u.x=r,u.y=h,u.width=c-r,u.height=l-h,u};s.exports=f}),9477:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=function(f,o,u,r,h){return h===void 0&&(h=new a),h.setTo(Math.min(f,u),Math.min(o,r),Math.abs(f-u),Math.abs(o-r))};s.exports=g}),8249:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height===0?NaN:e.width/e.height};s.exports=T}),27165:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){return o===void 0&&(o=new a),o.x=f.centerX,o.y=f.centerY,o};s.exports=g}),20812:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13019),g=e(2141),f=function(o,u,r){if(r===void 0&&(r=new g),u<=0||u>=1)return r.x=o.x,r.y=o.y,r;var h=a(o)*u;return u>.5?(h-=o.width+o.height,h<=o.width?(r.x=o.right-h,r.y=o.bottom):(r.x=o.x,r.y=o.bottom-(h-o.width))):h<=o.width?(r.x=o.x+h,r.y=o.y):(r.x=o.right,r.y=o.y+(h-o.width)),r};s.exports=f}),34819:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20812),g=e(13019),f=function(o,u,r,h){h===void 0&&(h=[]),!u&&r>0&&(u=g(o)/r);for(var c=0;c<u;c++){var l=c/u;h.push(a(o,l))}return h};s.exports=f}),51313:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){return o===void 0&&(o=new a),o.x=f.width,o.y=f.height,o};s.exports=g}),86091:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67502),g=function(f,o,u){var r=f.centerX,h=f.centerY;return f.setSize(f.width+o*2,f.height+u*2),a(f,r,h)};s.exports=g}),53951:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=e(59996),f=function(o,u,r){return r===void 0&&(r=new a),g(o,u)?(r.x=Math.max(o.x,u.x),r.y=Math.max(o.y,u.y),r.width=Math.min(o.right,u.right)-r.x,r.height=Math.min(o.bottom,u.bottom)-r.y):r.setEmpty(),r};s.exports=f}),14649:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13019),g=e(2141),f=function(o,u,r,h){if(h===void 0&&(h=[]),!u&&!r)return h;u?r=Math.round(a(o)/u):u=a(o)/r;for(var c=o.x,l=o.y,p=0,m=0;m<r;m++)switch(h.push(new g(c,l)),p){case 0:c+=u,c>=o.right&&(p=1,l+=c-o.right,c=o.right);break;case 1:l+=u,l>=o.bottom&&(p=2,c-=l-o.bottom,l=o.bottom);break;case 2:c-=u,c<=o.left&&(p=3,l-=o.left-c,c=o.left);break;case 3:l-=u,l<=o.top&&(p=0,l=o.top);break}return h};s.exports=f}),33595:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){for(var g=e.x,f=e.right,o=e.y,u=e.bottom,r=0;r<a.length;r++)g=Math.min(g,a[r].x),f=Math.max(f,a[r].x),o=Math.min(o,a[r].y),u=Math.max(u,a[r].y);return e.x=g,e.y=o,e.width=f-g,e.height=u-o,e};s.exports=T}),20074:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=Math.min(e.x,a.x),f=Math.max(e.right,a.right);e.x=g,e.width=f-g;var o=Math.min(e.y,a.y),u=Math.max(e.bottom,a.bottom);return e.y=o,e.height=u-o,e};s.exports=T}),92171:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=Math.min(e.x,a),o=Math.max(e.right,a);e.x=f,e.width=o-f;var u=Math.min(e.y,g),r=Math.max(e.bottom,g);return e.y=u,e.height=r-u,e};s.exports=T}),42981:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e.x+=a,e.y+=g,e};s.exports=T}),46907:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x+=a.x,e.y+=a.y,e};s.exports=T}),60170:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x<a.right&&e.right>a.x&&e.y<a.bottom&&e.bottom>a.y};s.exports=T}),13019:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(e.width+e.height)};s.exports=T}),85133:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=e(39506),f=function(o,u,r){r===void 0&&(r=new a),u=g(u);var h=Math.sin(u),c=Math.cos(u),l=c>0?o.width/2:o.width/-2,p=h>0?o.height/2:o.height/-2;return Math.abs(l*h)<Math.abs(p*c)?p=l*h/c:l=p*c/h,r.x=l+o.centerX,r.y=p+o.centerY,r};s.exports=f}),26597:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){return o===void 0&&(o=new a),o.x=f.x+Math.random()*f.width,o.y=f.y+Math.random()*f.height,o};s.exports=g}),86470:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),g=e(70273),f=e(2141),o=function(u,r,h){if(h===void 0&&(h=new f),g(u,r))switch(a(0,3)){case 0:h.x=u.x+Math.random()*(r.right-u.x),h.y=u.y+Math.random()*(r.top-u.y);break;case 1:h.x=r.x+Math.random()*(u.right-r.x),h.y=r.bottom+Math.random()*(u.bottom-r.bottom);break;case 2:h.x=u.x+Math.random()*(r.x-u.x),h.y=r.y+Math.random()*(u.bottom-r.y);break;case 3:h.x=r.right+Math.random()*(u.right-r.right),h.y=u.y+Math.random()*(r.bottom-u.y);break}return h};s.exports=o}),87841:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(37303),f=e(20812),o=e(34819),u=e(23777),r=e(23031),h=e(26597),c=new a({initialize:function(p,m,v,y){p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),y===void 0&&(y=0),this.type=u.RECTANGLE,this.x=p,this.y=m,this.width=v,this.height=y},contains:function(l,p){return g(this,l,p)},getPoint:function(l,p){return f(this,l,p)},getPoints:function(l,p,m){return o(this,l,p,m)},getRandomPoint:function(l){return h(this,l)},setTo:function(l,p,m,v){return this.x=l,this.y=p,this.width=m,this.height=v,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(l,p){return p===void 0&&(p=l),this.x=l,this.y=p,this},setSize:function(l,p){return p===void 0&&(p=l),this.width=l,this.height=p,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.y,this.right,this.y),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.y,this.right,this.bottom),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.bottom,this.x,this.bottom),l},getLineD:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.bottom,this.x,this.y),l},left:{get:function(){return this.x},set:function(l){l>=this.right?this.width=0:this.width=this.right-l,this.x=l}},right:{get:function(){return this.x+this.width},set:function(l){l<=this.x?this.width=0:this.width=l-this.x}},top:{get:function(){return this.y},set:function(l){l>=this.bottom?this.height=0:this.height=this.bottom-l,this.y=l}},bottom:{get:function(){return this.y+this.height},set:function(l){l<=this.y?this.height=0:this.height=l-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});s.exports=c}),94845:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.width===a.width&&e.height===a.height};s.exports=T}),31730:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return g===void 0&&(g=a),e.width*=a,e.height*=g,e};s.exports=T}),36899:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=function(f,o,u){u===void 0&&(u=new a);var r=Math.min(f.x,o.x),h=Math.min(f.y,o.y),c=Math.max(f.right,o.right)-r,l=Math.max(f.bottom,o.bottom)-h;return u.setTo(r,h,c,l)};s.exports=g}),93232:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841);a.Area=e(62224),a.Ceil=e(98615),a.CeilAll=e(31688),a.CenterOn=e(67502),a.Clone=e(65085),a.Contains=e(37303),a.ContainsPoint=e(96553),a.ContainsRect=e(70273),a.CopyFrom=e(43459),a.Decompose=e(77493),a.Equals=e(9219),a.FitInside=e(53751),a.FitOutside=e(16088),a.Floor=e(80774),a.FloorAll=e(83859),a.FromPoints=e(19217),a.FromXY=e(9477),a.GetAspectRatio=e(8249),a.GetCenter=e(27165),a.GetPoint=e(20812),a.GetPoints=e(34819),a.GetSize=e(51313),a.Inflate=e(86091),a.Intersection=e(53951),a.MarchingAnts=e(14649),a.MergePoints=e(33595),a.MergeRect=e(20074),a.MergeXY=e(92171),a.Offset=e(42981),a.OffsetPoint=e(46907),a.Overlaps=e(60170),a.Perimeter=e(13019),a.PerimeterPoint=e(85133),a.Random=e(26597),a.RandomOutside=e(86470),a.SameDimensions=e(94845),a.Scale=e(31730),a.Union=e(36899),s.exports=a}),41658:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=e.x1,g=e.y1,f=e.x2,o=e.y2,u=e.x3,r=e.y3;return Math.abs(((u-a)*(o-g)-(f-a)*(r-g))/2)};s.exports=T}),39208:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),g=function(f,o,u){var r=u*(Math.sqrt(3)/2),h=f,c=o,l=f+u/2,p=o+r,m=f-u/2,v=o+r;return new a(h,c,l,p,m,v)};s.exports=g}),39545:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(94811),g=e(16483),f=function(o,u,r,h,c){u===void 0&&(u=null),r===void 0&&(r=1),h===void 0&&(h=1),c===void 0&&(c=[]);for(var l=a(o,u),p,m,v,y,E,C,w,A,M,R=0;R<l.length;R+=3)p=l[R],m=l[R+1],v=l[R+2],y=o[p*2]*r,E=o[p*2+1]*h,C=o[m*2]*r,w=o[m*2+1]*h,A=o[v*2]*r,M=o[v*2+1]*h,c.push(new g(y,E,C,w,A,M));return c};s.exports=f}),90301:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),g=function(f,o,u,r){r===void 0&&(r=u);var h=f,c=o,l=f,p=o-r,m=f+u,v=o;return new a(h,c,l,p,m,v)};s.exports=g}),23707:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97523),g=e(13584),f=function(o,u,r,h){h===void 0&&(h=a);var c=h(o),l=u-c.x,p=r-c.y;return g(o,l,p)};s.exports=f}),97523:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){return o===void 0&&(o=new a),o.x=(f.x1+f.x2+f.x3)/3,o.y=(f.y1+f.y2+f.y3)/3,o};s.exports=g}),24951:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099);function g(o,u,r,h){return o*h-u*r}var f=function(o,u){u===void 0&&(u=new a);var r=o.x3,h=o.y3,c=o.x1-r,l=o.y1-h,p=o.x2-r,m=o.y2-h,v=2*g(c,l,p,m),y=g(l,c*c+l*l,m,p*p+m*m),E=g(c,c*c+l*l,p,p*p+m*m);return u.x=r-y/v,u.y=h+E/v,u};s.exports=f}),85614:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),g=function(f,o){o===void 0&&(o=new a);var u=f.x1,r=f.y1,h=f.x2,c=f.y2,l=f.x3,p=f.y3,m=h-u,v=c-r,y=l-u,E=p-r,C=m*(u+h)+v*(r+c),w=y*(u+l)+E*(r+p),A=2*(m*(p-c)-v*(l-h)),M,R;if(Math.abs(A)<1e-6){var P=Math.min(u,h,l),b=Math.min(r,c,p);M=(Math.max(u,h,l)-P)*.5,R=(Math.max(r,c,p)-b)*.5,o.x=P+M,o.y=b+R,o.radius=Math.sqrt(M*M+R*R)}else o.x=(E*C-v*w)/A,o.y=(m*w-y*C)/A,M=o.x-u,R=o.y-r,o.radius=Math.sqrt(M*M+R*R);return o};s.exports=g}),74422:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),g=function(f){return new a(f.x1,f.y1,f.x2,f.y2,f.x3,f.y3)};s.exports=g}),10690:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=e.x3-e.x1,o=e.y3-e.y1,u=e.x2-e.x1,r=e.y2-e.y1,h=a-e.x1,c=g-e.y1,l=f*f+o*o,p=f*u+o*r,m=f*h+o*c,v=u*u+r*r,y=u*h+r*c,E=l*v-p*p,C=E===0?0:1/E,w=(v*m-p*y)*C,A=(l*y-p*m)*C;return w>=0&&A>=0&&w+A<1};s.exports=T}),48653:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g===void 0&&(g=!1),f===void 0&&(f=[]);for(var o=e.x3-e.x1,u=e.y3-e.y1,r=e.x2-e.x1,h=e.y2-e.y1,c=o*o+u*u,l=o*r+u*h,p=r*r+h*h,m=c*p-l*l,v=m===0?0:1/m,y,E,C,w,A,M,R=e.x1,P=e.y1,b=0;b<a.length&&(C=a[b].x-R,w=a[b].y-P,A=o*C+u*w,M=r*C+h*w,y=(p*A-l*M)*v,E=(c*M-l*A)*v,!(y>=0&&E>=0&&y+E<1&&(f.push({x:a[b].x,y:a[b].y}),g)));b++);return f};s.exports=T}),96006:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10690),g=function(f,o){return a(f,o.x,o.y)};s.exports=g}),71326:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};s.exports=T}),71694:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x1,y:e.y1}),a.push({x:e.x2,y:e.y2}),a.push({x:e.x3,y:e.y3}),a};s.exports=T}),33522:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2&&e.x3===a.x3&&e.y3===a.y3};s.exports=T}),20437:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=e(35001),f=function(o,u,r){r===void 0&&(r=new a);var h=o.getLineA(),c=o.getLineB(),l=o.getLineC();if(u<=0||u>=1)return r.x=h.x1,r.y=h.y1,r;var p=g(h),m=g(c),v=g(l),y=p+m+v,E=y*u,C=0;return E<p?(C=E/p,r.x=h.x1+(h.x2-h.x1)*C,r.y=h.y1+(h.y2-h.y1)*C):E>p+m?(E-=p+m,C=E/v,r.x=l.x1+(l.x2-l.x1)*C,r.y=l.y1+(l.y2-l.y1)*C):(E-=p,C=E/m,r.x=c.x1+(c.x2-c.x1)*C,r.y=c.y1+(c.y2-c.y1)*C),r};s.exports=f}),80672:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),g=e(2141),f=function(o,u,r,h){h===void 0&&(h=[]);var c=o.getLineA(),l=o.getLineB(),p=o.getLineC(),m=a(c),v=a(l),y=a(p),E=m+v+y;!u&&r>0&&(u=E/r);for(var C=0;C<u;C++){var w=E*(C/u),A=0,M=new g;w<m?(A=w/m,M.x=c.x1+(c.x2-c.x1)*A,M.y=c.y1+(c.y2-c.y1)*A):w>m+v?(w-=m+v,A=w/y,M.x=p.x1+(p.x2-p.x1)*A,M.y=p.y1+(p.y2-p.y1)*A):(w-=m,A=w/v,M.x=l.x1+(l.x2-l.x1)*A,M.y=l.y1+(l.y2-l.y1)*A),h.push(M)}return h};s.exports=f}),39757:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141);function g(o,u,r,h){var c=o-r,l=u-h,p=c*c+l*l;return Math.sqrt(p)}var f=function(o,u){u===void 0&&(u=new a);var r=o.x1,h=o.y1,c=o.x2,l=o.y2,p=o.x3,m=o.y3,v=g(p,m,c,l),y=g(r,h,p,m),E=g(c,l,r,h),C=v+y+E;return u.x=(r*v+c*y+p*E)/C,u.y=(h*v+l*y+m*E)/C,u};s.exports=f}),13584:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e.x1+=a,e.y1+=g,e.x2+=a,e.y2+=g,e.x3+=a,e.y3+=g,e};s.exports=T}),1376:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),g=function(f){var o=f.getLineA(),u=f.getLineB(),r=f.getLineC();return a(o)+a(u)+a(r)};s.exports=g}),90260:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),g=function(f,o){o===void 0&&(o=new a);var u=f.x2-f.x1,r=f.y2-f.y1,h=f.x3-f.x1,c=f.y3-f.y1,l=Math.random(),p=Math.random();return l+p>=1&&(l=1-l,p=1-p),o.x=f.x1+(u*l+h*p),o.y=f.y1+(r*l+c*p),o};s.exports=g}),52172:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99614),g=e(39757),f=function(o,u){var r=g(o);return a(o,r.x,r.y,u)};s.exports=f}),49907:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99614),g=function(f,o,u){return a(f,o.x,o.y,u)};s.exports=g}),99614:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=Math.cos(f),u=Math.sin(f),r=e.x1-a,h=e.y1-g;return e.x1=r*o-h*u+a,e.y1=r*u+h*o+g,r=e.x2-a,h=e.y2-g,e.x2=r*o-h*u+a,e.y2=r*u+h*o+g,r=e.x3-a,h=e.y3-g,e.x3=r*o-h*u+a,e.y3=r*u+h*o+g,e};s.exports=T}),16483:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(10690),f=e(20437),o=e(80672),u=e(23777),r=e(23031),h=e(90260),c=new a({initialize:function(p,m,v,y,E,C){p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),y===void 0&&(y=0),E===void 0&&(E=0),C===void 0&&(C=0),this.type=u.TRIANGLE,this.x1=p,this.y1=m,this.x2=v,this.y2=y,this.x3=E,this.y3=C},contains:function(l,p){return g(this,l,p)},getPoint:function(l,p){return f(this,l,p)},getPoints:function(l,p,m){return o(this,l,p,m)},getRandomPoint:function(l){return h(this,l)},setTo:function(l,p,m,v,y,E){return l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=0),y===void 0&&(y=0),E===void 0&&(E=0),this.x1=l,this.y1=p,this.x2=m,this.y2=v,this.x3=y,this.y3=E,this},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x1,this.y1,this.x2,this.y2),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.x2,this.y2,this.x3,this.y3),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.x3,this.y3,this.x1,this.y1),l},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(l){var p=0;this.x1<=this.x2&&this.x1<=this.x3?p=this.x1-l:this.x2<=this.x1&&this.x2<=this.x3?p=this.x2-l:p=this.x3-l,this.x1-=p,this.x2-=p,this.x3-=p}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(l){var p=0;this.x1>=this.x2&&this.x1>=this.x3?p=this.x1-l:this.x2>=this.x1&&this.x2>=this.x3?p=this.x2-l:p=this.x3-l,this.x1-=p,this.x2-=p,this.x3-=p}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(l){var p=0;this.y1<=this.y2&&this.y1<=this.y3?p=this.y1-l:this.y2<=this.y1&&this.y2<=this.y3?p=this.y2-l:p=this.y3-l,this.y1-=p,this.y2-=p,this.y3-=p}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(l){var p=0;this.y1>=this.y2&&this.y1>=this.y3?p=this.y1-l:this.y2>=this.y1&&this.y2>=this.y3?p=this.y2-l:p=this.y3-l,this.y1-=p,this.y2-=p,this.y3-=p}}});s.exports=c}),84435:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483);a.Area=e(41658),a.BuildEquilateral=e(39208),a.BuildFromPolygon=e(39545),a.BuildRight=e(90301),a.CenterOn=e(23707),a.Centroid=e(97523),a.CircumCenter=e(24951),a.CircumCircle=e(85614),a.Clone=e(74422),a.Contains=e(10690),a.ContainsArray=e(48653),a.ContainsPoint=e(96006),a.CopyFrom=e(71326),a.Decompose=e(71694),a.Equals=e(33522),a.GetPoint=e(20437),a.GetPoints=e(80672),a.InCenter=e(39757),a.Perimeter=e(1376),a.Offset=e(13584),a.Random=e(90260),a.Rotate=e(52172),a.RotateAroundPoint=e(49907),a.RotateAroundXY=e(99614),s.exports=a}),74457:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:a,hitAreaCallback:g,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};s.exports=T}),84409:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return function(g,f,o,u){var r=e.getPixelAlpha(f,o,u.texture.key,u.frame.name);return r&&r>=a}};s.exports=T}),7003:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(93301),f=e(50792),o=e(8214),u=e(8443),r=e(78970),h=e(85098),c=e(42515),l=e(36210),p=e(61340),m=e(85955),v=new a({initialize:function(E,C){this.game=E,this.scaleManager,this.canvas,this.config=C,this.enabled=!0,this.events=new f,this.isOver=!0,this.defaultCursor="",this.keyboard=C.inputKeyboard?new r(this):null,this.mouse=C.inputMouse?new h(this):null,this.touch=C.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=C.inputActivePointers;for(var w=0;w<=this.pointersTotal;w++){var A=new c(this,w);A.smoothFactor=C.inputSmoothFactor,this.pointers.push(A)}this.mousePointer=C.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new p,this._tempMatrix2=new p,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],E.events.once(u.BOOT,this.boot,this)},boot:function(){var y=this.game,E=y.events;this.canvas=y.canvas,this.scaleManager=y.scale,this.events.emit(o.MANAGER_BOOT),E.on(u.PRE_RENDER,this.preRender,this),E.once(u.DESTROY,this.destroy,this)},setCanvasOver:function(y){this.isOver=!0,this.events.emit(o.GAME_OVER,y)},setCanvasOut:function(y){this.isOver=!1,this.events.emit(o.GAME_OUT,y)},preRender:function(){var y=this.game.loop.now,E=this.game.loop.delta,C=this.game.scene.getScenes(!0,!0);this.time=y,this.events.emit(o.MANAGER_UPDATE);for(var w=0;w<C.length;w++){var A=C[w];if(A.sys.input&&A.sys.input.updatePoll(y,E)&&this.globalTopOnly)return}},setDefaultCursor:function(y){this.defaultCursor=y,this.canvas.style.cursor!==y&&(this.canvas.style.cursor=y)},setCursor:function(y){y.cursor&&(this.canvas.style.cursor=y.cursor)},resetCursor:function(y,E){(E||y&&y.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(y){y===void 0&&(y=1);var E=[];this.pointersTotal+y>10&&(y=10-this.pointersTotal);for(var C=0;C<y;C++){var w=this.pointers.length,A=new c(this,w);A.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(A),this.pointersTotal++,E.push(A)}return E},updateInputPlugins:function(y,E){var C=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var w=0;w<C.length;w++){var A=C[w];if(A.sys.input){var M=A.sys.input.update(y,E);if(M&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(y){for(var E=this.pointers,C=[],w=0;w<y.changedTouches.length;w++)for(var A=y.changedTouches[w],M=1;M<E.length;M++){var R=E[M];if(!R.active){R.touchstart(A,y),this.activePointer=R,C.push(R);break}}this.updateInputPlugins(g.TOUCH_START,C)},onTouchMove:function(y){for(var E=this.pointers,C=[],w=0;w<y.changedTouches.length;w++)for(var A=y.changedTouches[w],M=1;M<E.length;M++){var R=E[M];if(R.active&&R.identifier===A.identifier){var P=document.elementFromPoint(A.clientX,A.clientY),b=P===this.canvas;!this.isOver&&b?this.setCanvasOver(y):this.isOver&&!b&&this.setCanvasOut(y),this.isOver&&(R.touchmove(A,y),this.activePointer=R,C.push(R));break}}this.updateInputPlugins(g.TOUCH_MOVE,C)},onTouchEnd:function(y){for(var E=this.pointers,C=[],w=0;w<y.changedTouches.length;w++)for(var A=y.changedTouches[w],M=1;M<E.length;M++){var R=E[M];if(R.active&&R.identifier===A.identifier){R.touchend(A,y),C.push(R);break}}this.updateInputPlugins(g.TOUCH_END,C)},onTouchCancel:function(y){for(var E=this.pointers,C=[],w=0;w<y.changedTouches.length;w++)for(var A=y.changedTouches[w],M=1;M<E.length;M++){var R=E[M];if(R.active&&R.identifier===A.identifier){R.touchcancel(A,y),C.push(R);break}}this.updateInputPlugins(g.TOUCH_CANCEL,C)},onMouseDown:function(y){var E=this.mousePointer;E.down(y),E.updateMotion(),this.activePointer=E,this.updateInputPlugins(g.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(y){var E=this.mousePointer;E.move(y),E.updateMotion(),this.activePointer=E,this.updateInputPlugins(g.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(y){var E=this.mousePointer;E.up(y),E.updateMotion(),this.activePointer=E,this.updateInputPlugins(g.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(y){var E=this.mousePointer;E.wheel(y),this.activePointer=E,this.updateInputPlugins(g.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(y){var E=this.mouse.locked;this.mousePointer.locked=E,this.events.emit(o.POINTERLOCK_CHANGE,y,E)},inputCandidate:function(y,E){var C=y.input;if(!C||!C.enabled||!y.willRender(E))return!1;var w=!0,A=y.parentContainer;if(A)do{if(!A.willRender(E)){w=!1;break}A=A.parentContainer}while(A);return w},hitTest:function(y,E,C,w){w===void 0&&(w=this._tempHitTest);var A=this._tempPoint,M=C.scrollX,R=C.scrollY;w.length=0;var P=y.x,b=y.y;C.getWorldPoint(P,b,A),y.worldX=A.x,y.worldY=A.y;for(var F={x:0,y:0},I=this._tempMatrix,L=this._tempMatrix2,D=0;D<E.length;D++){var O=E[D];if(this.inputCandidate(O,C)){var z=A.x+M*O.scrollFactorX-M,_=A.y+R*O.scrollFactorY-R;O.parentContainer?(O.getWorldTransformMatrix(I,L),I.applyInverse(z,_,F)):m(z,_,O.x,O.y,O.rotation,O.scaleX,O.scaleY,F),this.pointWithinHitArea(O,F.x,F.y)&&w.push(O)}}return w},pointWithinHitArea:function(y,E,C){E+=y.displayOriginX,C+=y.displayOriginY;var w=y.input;return w&&w.hitAreaCallback(w.hitArea,E,C,y)?(w.localX=E,w.localY=C,!0):!1},pointWithinInteractiveObject:function(y,E,C){return y.hitArea?(E+=y.gameObject.displayOriginX,C+=y.gameObject.displayOriginY,y.localX=E,y.localY=C,y.hitAreaCallback(y.hitArea,E,C,y)):!1},transformPointer:function(y,E,C,w){var A=y.position,M=y.prevPosition;M.x=A.x,M.y=A.y;var R=this.scaleManager.transformX(E),P=this.scaleManager.transformY(C),b=y.smoothFactor;!w||b===0?(A.x=R,A.y=P):(A.x=R*b+M.x*(1-b),A.y=P*b+M.y*(1-b))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(u.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var y=0;y<this.pointers.length;y++)this.pointers[y].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});s.exports=v}),48205:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),g=e(87902),f=e(83419),o=e(93301),u=e(74457),r=e(84409),h=e(20339),c=e(8497),l=e(81154),p=e(8214),m=e(50792),v=e(95540),y=e(23777),E=e(89639),C=e(41212),w=e(37277),A=e(87841),M=e(37303),R=e(44594),P=e(16483),b=e(10690),F=new f({Extends:m,initialize:function(L){m.call(this),this.scene=L,this.systems=L.sys,this.settings=L.sys.settings,this.manager=L.sys.game.input,this.pluginEvents=new m,this.enabled=!0,this.displayList,this.cameras,E.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,L.sys.events.once(R.BOOT,this.boot,this),L.sys.events.on(R.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(R.DESTROY,this.destroy,this),this.pluginEvents.emit(p.BOOT)},start:function(){var I=this.systems.events;I.on(R.TRANSITION_START,this.transitionIn,this),I.on(R.TRANSITION_OUT,this.transitionOut,this),I.on(R.TRANSITION_COMPLETE,this.transitionComplete,this),I.on(R.PRE_UPDATE,this.preUpdate,this),I.once(R.SHUTDOWN,this.shutdown,this),this.manager.events.on(p.GAME_OUT,this.onGameOut,this),this.manager.events.on(p.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(p.START)},onGameOver:function(I){this.isActive()&&this.emit(p.GAME_OVER,I.timeStamp,I)},onGameOut:function(I){this.isActive()&&this.emit(p.GAME_OUT,I.timeStamp,I)},preUpdate:function(){this.pluginEvents.emit(p.PRE_UPDATE);var I=this._pendingRemoval,L=this._pendingInsertion,D=I.length,O=L.length;if(!(D===0&&O===0)){for(var z=this._list,_=0;_<D;_++){var X=I[_],H=z.indexOf(X);H>-1&&(z.splice(H,1),this.clear(X,!0))}this._pendingRemoval.length=0,this._list=z.concat(L.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(I){this.manager&&this.manager.setCursor(I)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(I,L){if(!this.isActive())return!1;if(this.pluginEvents.emit(p.UPDATE,I,L),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,O=this.manager,z=O.pointers;for(D=0;D<z.length;D++)z[D].updateMotion();if(this._list.length===0)return!1;var _=this.pollRate;if(_===-1)return!1;if(_>0)if(this._pollTimer-=L,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var X=!1;for(D=0;D<z.length;D++){var H=0,U=z[D];this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),H+=this.processOverOutEvents(U),this.getDragState(U)===2&&this.processDragThresholdEvent(U,I),H>0&&(X=!0)}return X},update:function(I,L){if(!this.isActive())return!1;for(var D=!1,O=0;O<L.length;O++){var z=0,_=L[O];switch(this._tempZones=[],this._temp=this.hitTestPointer(_),this.sortGameObjects(this._temp,_),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),I){case o.MOUSE_DOWN:z+=this.processDragDownEvent(_),z+=this.processDownEvents(_),z+=this.processOverOutEvents(_);break;case o.MOUSE_UP:z+=this.processDragUpEvent(_),z+=this.processUpEvents(_),z+=this.processOverOutEvents(_);break;case o.TOUCH_START:z+=this.processDragDownEvent(_),z+=this.processDownEvents(_),z+=this.processOverEvents(_);break;case o.TOUCH_END:case o.TOUCH_CANCEL:z+=this.processDragUpEvent(_),z+=this.processUpEvents(_),z+=this.processOutEvents(_);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:z+=this.processDragMoveEvent(_),z+=this.processMoveEvents(_),z+=this.processOverOutEvents(_);break;case o.MOUSE_WHEEL:z+=this.processWheelEvent(_);break}z>0&&(D=!0)}return this._updatedThisFrame=!0,D},clear:function(I,L){L===void 0&&(L=!1),this.disable(I);var D=I.input;D&&(this.removeDebug(I),this.manager.resetCursor(D),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,I.input=null),L||this.queueForRemoval(I);var O=this._draggable.indexOf(I);return O>-1&&this._draggable.splice(O,1),I},disable:function(I,L){L===void 0&&(L=!1);var D=I.input;D&&(D.enabled=!1,D.dragState=0);for(var O=this._drag,z=this._over,_=this.manager,X=0,H;X<_.pointers.length;X++)H=O[X].indexOf(I),H>-1&&O[X].splice(H,1),H=z[X].indexOf(I),H>-1&&z[X].splice(H,1);return L&&this.resetCursor(),this},enable:function(I,L,D,O){return O===void 0&&(O=!1),I.input?I.input.enabled=!0:this.setHitArea(I,L,D),I.input&&O&&!I.input.dropZone&&(I.input.dropZone=O),this},hitTestPointer:function(I){for(var L=this.cameras.getCamerasBelowPointer(I),D=0;D<L.length;D++){for(var O=L[D],z=this.manager.hitTest(I,this._list,O),_=0;_<z.length;_++){var X=z[_];X.input.dropZone&&this._tempZones.push(X)}if(z.length>0)return I.camera=O,z}return I.camera=L[0],[]},processDownEvents:function(I){var L=0,D=this._temp,O=this._eventData,z=this._eventContainer;O.cancelled=!1;for(var _=0;_<D.length;_++){var X=D[_];if(!(!X.input||!X.input.enabled)&&(L++,X.emit(p.GAMEOBJECT_POINTER_DOWN,I,X.input.localX,X.input.localY,z),O.cancelled||!this.isActive()||X.input&&X.input.enabled&&(this.emit(p.GAMEOBJECT_DOWN,I,X,z),O.cancelled||!this.isActive())))break}return!O.cancelled&&this.isActive()&&(I.downElement===this.manager.game.canvas?this.emit(p.POINTER_DOWN,I,D):this.emit(p.POINTER_DOWN_OUTSIDE,I)),L},getDragState:function(I){return this._dragState[I.id]},setDragState:function(I,L){this._dragState[I.id]=L},processDragThresholdEvent:function(I,L){var D=!1,O=this.dragTimeThreshold,z=this.dragDistanceThreshold;if((z>0&&h(I.x,I.y,I.downX,I.downY)>=z||O>0&&L>=I.downTime+O)&&(D=!0),D)return this.setDragState(I,3),this.processDragStartList(I)},processDragStartList:function(I){if(this.getDragState(I)!==3)return 0;var L=this._drag[I.id];L.length>1&&(L=L.slice(0));for(var D=0;D<L.length;D++){var O=L[D],z=O.input;z.dragState=2,z.dragStartX=O.x,z.dragStartY=O.y,z.dragStartXGlobal=I.worldX,z.dragStartYGlobal=I.worldY,z.dragStartCamera=I.camera,z.dragX=z.dragStartXGlobal-z.dragStartX,z.dragY=z.dragStartYGlobal-z.dragStartY,O.emit(p.GAMEOBJECT_DRAG_START,I,z.dragX,z.dragY),this.emit(p.DRAG_START,I,O)}return this.setDragState(I,4),L.length},processDragDownEvent:function(I){var L=this._temp;if(this._draggable.length===0||L.length===0||!I.primaryDown||this.getDragState(I)!==0)return 0;this.setDragState(I,1);for(var D=[],O=0;O<L.length;O++){var z=L[O];z.input.draggable&&z.input.dragState===0&&D.push(z)}return D.length===0?(this.setDragState(I,0),0):(D.length>1&&(this.sortGameObjects(D,I),this.topOnly&&D.splice(1)),this._drag[I.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(I,3),this.processDragStartList(I)):(this.setDragState(I,2),0))},processDragMoveEvent:function(I){if(this.getDragState(I)===2&&this.processDragThresholdEvent(I,this.manager.game.loop.now),this.getDragState(I)!==4)return 0;var L=this._tempZones,D=this._drag[I.id];D.length>1&&(D=D.slice(0));for(var O=0;O<D.length;O++){var z=D[O],_=z.input,X=_.target;if(X){var H=L.indexOf(X);H===0?(z.emit(p.GAMEOBJECT_DRAG_OVER,I,X),this.emit(p.DRAG_OVER,I,z,X)):H>0?(z.emit(p.GAMEOBJECT_DRAG_LEAVE,I,X),this.emit(p.DRAG_LEAVE,I,z,X),_.target=L[0],X=_.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,I,X),this.emit(p.DRAG_ENTER,I,z,X)):(z.emit(p.GAMEOBJECT_DRAG_LEAVE,I,X),this.emit(p.DRAG_LEAVE,I,z,X),L[0]?(_.target=L[0],X=_.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,I,X),this.emit(p.DRAG_ENTER,I,z,X)):_.target=null)}else!X&&L[0]&&(_.target=L[0],X=_.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,I,X),this.emit(p.DRAG_ENTER,I,z,X));var U,G,N=I.positionToCamera(_.dragStartCamera);if(!z.parentContainer)U=N.x-_.dragX,G=N.y-_.dragY;else{var W=N.x-_.dragStartXGlobal,V=N.y-_.dragStartYGlobal,$=z.getParentRotation(),j=W*Math.cos($)+V*Math.sin($),k=V*Math.cos($)-W*Math.sin($);j*=1/z.parentContainer.scaleX,k*=1/z.parentContainer.scaleY,U=j+_.dragStartX,G=k+_.dragStartY}z.emit(p.GAMEOBJECT_DRAG,I,U,G),this.emit(p.DRAG,I,z,U,G)}return D.length},processDragUpEvent:function(I){var L=this._drag[I.id];L.length>1&&(L=L.slice(0));for(var D=0;D<L.length;D++){var O=L[D],z=O.input;if(z&&z.dragState===2){z.dragState=0,z.dragX=z.localX-O.displayOriginX,z.dragY=z.localY-O.displayOriginY,z.dragStartCamera=null;var _=!1,X=z.target;X&&(O.emit(p.GAMEOBJECT_DROP,I,X),this.emit(p.DROP,I,O,X),z.target=null,_=!0),O.input&&O.input.enabled&&(O.emit(p.GAMEOBJECT_DRAG_END,I,z.dragX,z.dragY,_),this.emit(p.DRAG_END,I,O,_))}}return this.setDragState(I,0),L.splice(0),0},processMoveEvents:function(I){var L=0,D=this._temp,O=this._eventData,z=this._eventContainer;O.cancelled=!1;for(var _=0;_<D.length;_++){var X=D[_];if(!(!X.input||!X.input.enabled)&&(L++,X.emit(p.GAMEOBJECT_POINTER_MOVE,I,X.input.localX,X.input.localY,z),O.cancelled||!this.isActive()||X.input&&X.input.enabled&&(this.emit(p.GAMEOBJECT_MOVE,I,X,z),O.cancelled||!this.isActive()||this.topOnly)))break}return!O.cancelled&&this.isActive()&&this.emit(p.POINTER_MOVE,I,D),L},processWheelEvent:function(I){var L=0,D=this._temp,O=this._eventData,z=this._eventContainer;O.cancelled=!1;for(var _=I.deltaX,X=I.deltaY,H=I.deltaZ,U=0;U<D.length;U++){var G=D[U];if(!(!G.input||!G.input.enabled)&&(L++,G.emit(p.GAMEOBJECT_POINTER_WHEEL,I,_,X,H,z),O.cancelled||!this.isActive()||G.input&&G.input.enabled&&(this.emit(p.GAMEOBJECT_WHEEL,I,G,_,X,H,z),O.cancelled||!this.isActive())))break}return!O.cancelled&&this.isActive()&&this.emit(p.POINTER_WHEEL,I,D,_,X,H),L},processOverEvents:function(I){var L=this._temp,D=0,O=L.length,z=[];if(O>0){var _=this.manager,X=this._eventData,H=this._eventContainer;X.cancelled=!1;for(var U=0;U<O;U++){var G=L[U];if(!(!G.input||!G.input.enabled)&&(z.push(G),_.setCursor(G.input),G.emit(p.GAMEOBJECT_POINTER_OVER,I,G.input.localX,G.input.localY,H),D++,X.cancelled||!this.isActive()||G.input&&G.input.enabled&&(this.emit(p.GAMEOBJECT_OVER,I,G,H),X.cancelled||!this.isActive())))break}!X.cancelled&&this.isActive()&&this.emit(p.POINTER_OVER,I,z)}return this._over[I.id]=z,D},processOutEvents:function(I){var L=this._over[I.id],D=0,O=L.length;if(O>0){var z=this.manager,_=this._eventData,X=this._eventContainer;_.cancelled=!1,this.sortGameObjects(L,I);for(var H=0;H<O;H++){var U=L[H];if(U=L[H],!(!U.input||!U.input.enabled)&&(z.resetCursor(U.input),U.emit(p.GAMEOBJECT_POINTER_OUT,I,X),D++,_.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(p.GAMEOBJECT_OUT,I,U,X),_.cancelled||!this.isActive())))break}!_.cancelled&&this.isActive()&&this.emit(p.POINTER_OUT,I,L),this._over[I.id]=[]}return D},processOverOutEvents:function(I){var L=this._temp,D,O,z=[],_=[],X=[],H=this._over[I.id],U=this._drag[I.id],G=this.manager;for(D=0;D<H.length;D++)O=H[D],L.indexOf(O)===-1&&U.indexOf(O)===-1?z.push(O):X.push(O);for(D=0;D<L.length;D++)O=L[D],H.indexOf(O)===-1&&_.push(O);var N=z.length,W=0,V=this._eventData,$=this._eventContainer;if(V.cancelled=!1,N>0){for(this.sortGameObjects(z,I),D=0;D<N&&(O=z[D],!(!(!O.input||!O.input.enabled)&&(G.resetCursor(O.input),O.emit(p.GAMEOBJECT_POINTER_OUT,I,$),W++,V.cancelled||!this.isActive()||O.input&&O.input.enabled&&(this.emit(p.GAMEOBJECT_OUT,I,O,$),V.cancelled||!this.isActive()))));D++);(!V.cancelled||this.isActive())&&this.emit(p.POINTER_OUT,I,z)}if(N=_.length,V.cancelled=!1,N>0){for(this.sortGameObjects(_,I),D=0;D<N&&(O=_[D],!(!(!O.input||!O.input.enabled)&&(G.setCursor(O.input),O.emit(p.GAMEOBJECT_POINTER_OVER,I,O.input.localX,O.input.localY,$),W++,V.cancelled||!this.isActive()||O.input&&O.input.enabled&&(this.emit(p.GAMEOBJECT_OVER,I,O,$),V.cancelled||!this.isActive()))));D++);!V.cancelled&&this.isActive()&&this.emit(p.POINTER_OVER,I,_)}return H=X.concat(_),this._over[I.id]=this.sortGameObjects(H,I),W},processUpEvents:function(I){var L=this._temp,D=this._eventData,O=this._eventContainer;D.cancelled=!1;for(var z=0;z<L.length;z++){var _=L[z];if(!(!_.input||!_.input.enabled)&&(_.emit(p.GAMEOBJECT_POINTER_UP,I,_.input.localX,_.input.localY,O),D.cancelled||!this.isActive()||_.input&&_.input.enabled&&(this.emit(p.GAMEOBJECT_UP,I,_,O),D.cancelled||!this.isActive())))break}return!D.cancelled&&this.isActive()&&(I.upElement===this.manager.game.canvas?this.emit(p.POINTER_UP,I,L):this.emit(p.POINTER_UP_OUTSIDE,I)),L.length},forceDownState:function(I,L){this.forceState(I,L,p.GAMEOBJECT_POINTER_DOWN,p.GAMEOBJECT_DOWN,!1)},forceUpState:function(I,L){this.forceState(I,L,p.GAMEOBJECT_POINTER_UP,p.GAMEOBJECT_UP,!1)},forceOverState:function(I,L){this.forceState(I,L,p.GAMEOBJECT_POINTER_OVER,p.GAMEOBJECT_OVER,!0)},forceOutState:function(I,L){this.forceState(I,L,p.GAMEOBJECT_POINTER_OUT,p.GAMEOBJECT_OUT,!1)},forceState:function(I,L,D,O,z){var _=this._eventData,X=this._eventContainer;_.cancelled=!1,L.input&&L.input.enabled&&(L.emit(D,I,L.input.localX,L.input.localY,X),z&&this.setCursor(L.input),!_.cancelled&&this.isActive()&&L.input&&L.input.enabled&&this.emit(O,I,L,X))},queueForInsertion:function(I){return this._pendingInsertion.indexOf(I)===-1&&this._list.indexOf(I)===-1&&this._pendingInsertion.push(I),this},queueForRemoval:function(I){return this._pendingRemoval.push(I),this},setDraggable:function(I,L){L===void 0&&(L=!0),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var O=I[D];O.input.draggable=L;var z=this._draggable.indexOf(O);L&&z===-1?this._draggable.push(O):!L&&z>-1&&this._draggable.splice(z,1)}return this},makePixelPerfect:function(I){I===void 0&&(I=1);var L=this.systems.textures;return r(L,I)},setHitArea:function(I,L,D){if(L===void 0)return this.setHitAreaFromTexture(I);Array.isArray(I)||(I=[I]);var O=!1,z=!1,_=!1,X=!1,H=!1,U=!0;if(C(L)&&Object.keys(L).length){var G=L,N=I.some(function(k){return k.hasOwnProperty("faces")});if(!N){L=v(G,"hitArea",null),D=v(G,"hitAreaCallback",null),H=v(G,"pixelPerfect",!1);var W=v(G,"alphaTolerance",1);H&&(L={},D=this.makePixelPerfect(W))}O=v(G,"draggable",!1),z=v(G,"dropZone",!1),_=v(G,"cursor",!1),X=v(G,"useHandCursor",!1),(!L||!D)&&(this.setHitAreaFromTexture(I),U=!1)}else typeof L=="function"&&!D&&(D=L,L={});for(var V=0;V<I.length;V++){var $=I[V];if(H&&$.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var j=$.input?$.input:u($,L,D);j.customHitArea=U,j.dropZone=z,j.cursor=X?"pointer":_,$.input=j,O&&this.setDraggable($),this.queueForInsertion($)}return this},setHitAreaCircle:function(I,L,D,O,z){z===void 0&&(z=g);var _=new a(L,D,O);return this.setHitArea(I,_,z)},setHitAreaEllipse:function(I,L,D,O,z,_){_===void 0&&(_=l);var X=new c(L,D,O,z);return this.setHitArea(I,X,_)},setHitAreaFromTexture:function(I,L){L===void 0&&(L=M),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var O=I[D],z=O.frame,_=0,X=0;if(O.width?(_=O.width,X=O.height):z&&(_=z.realWidth,X=z.realHeight),O.type==="Container"&&(_===0||X===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}_!==0&&X!==0&&(O.input=u(O,new A(0,0,_,X),L),this.queueForInsertion(O))}return this},setHitAreaRectangle:function(I,L,D,O,z,_){_===void 0&&(_=M);var X=new A(L,D,O,z);return this.setHitArea(I,X,_)},setHitAreaTriangle:function(I,L,D,O,z,_,X,H){H===void 0&&(H=b);var U=new P(L,D,O,z,_,X);return this.setHitArea(I,U,H)},enableDebug:function(I,L){L===void 0&&(L=65280);var D=I.input;if(!D||!D.hitArea)return this;var O=D.hitArea,z=O.type,_=D.hitAreaDebug,X=this.systems.add,H=this.systems.updateList;_&&(H.remove(_),_.destroy(),_=null);var U=0,G=0;switch(z){case y.CIRCLE:_=X.arc(0,0,O.radius),U=O.x-O.radius,G=O.y-O.radius;break;case y.ELLIPSE:_=X.ellipse(0,0,O.width,O.height),U=O.x-O.width/2,G=O.y-O.height/2;break;case y.LINE:_=X.line(0,0,O.x1,O.y1,O.x2,O.y2);break;case y.POLYGON:_=X.polygon(0,0,O.points);break;case y.RECTANGLE:_=X.rectangle(0,0,O.width,O.height),U=O.x,G=O.y;break;case y.TRIANGLE:_=X.triangle(0,0,O.x1,O.y1,O.x2,O.y2,O.x3,O.y3);break}return _&&(_.isFilled=!1,_.strokeColor=L,_.preUpdate=function(){_.setVisible(I.visible),_.setStrokeStyle(1/I.scale,_.strokeColor),_.setDisplayOrigin(I.displayOriginX,I.displayOriginY);var N=I.x,W=I.y,V=I.rotation,$=I.scaleX,j=I.scaleY;if(I.parentContainer){var k=I.getWorldTransformMatrix();N=k.tx,W=k.ty,V=k.rotation,$=k.scaleX,j=k.scaleY}_.setRotation(V),_.setScale($,j),_.setPosition(N+U*$,W+G*j),_.setScrollFactor(I.scrollFactorX,I.scrollFactorY),_.setDepth(I.depth)},H.add(_),D.hitAreaDebug=_),this},removeDebug:function(I){var L=I.input;if(L&&L.hitAreaDebug){var D=L.hitAreaDebug;D.destroy(),L.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(I){return this.pollRate=I,this._pollTimer=0,this},setGlobalTopOnly:function(I){return this.manager.globalTopOnly=I,this},setTopOnly:function(I){return this.topOnly=I,this},sortGameObjects:function(I,L){if(I.length<2||!L.camera)return I;var D=L.camera.renderList;return I.sort(function(O,z){var _=Math.max(D.indexOf(O),0),X=Math.max(D.indexOf(z),0);return X-_})},sortDropZones:function(I){return I.length<2?I:(this.scene.sys.depthSort(),I.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(I,L){if(!I.parentContainer&&!L.parentContainer)return this.displayList.getIndex(L)-this.displayList.getIndex(I);if(I.parentContainer===L.parentContainer)return L.parentContainer.getIndex(L)-I.parentContainer.getIndex(I);if(I.parentContainer===L)return-1;if(L.parentContainer===I)return 1;for(var D=I.getIndexList(),O=L.getIndexList(),z=Math.min(D.length,O.length),_=0;_<z;_++){var X=D[_],H=O[_];if(X!==H)return H-X}return O.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(I){return this.manager.addPointer(I)},setDefaultCursor:function(I){return this.manager.setDefaultCursor(I),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(p.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var I=0;I<10;I++)this._drag[I]=[],this._over[I]=[];this.removeAllListeners();var L=this.manager;L.canvas.style.cursor=L.defaultCursor;var D=this.systems.events;D.off(R.TRANSITION_START,this.transitionIn,this),D.off(R.TRANSITION_OUT,this.transitionOut,this),D.off(R.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(R.PRE_UPDATE,this.preUpdate,this),L.events.off(p.GAME_OUT,this.onGameOut,this),L.events.off(p.GAME_OVER,this.onGameOver,this),D.off(R.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var I=this.manager.pointers,L=0;L<I.length;L++)I[L].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(p.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(R.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});w.register("InputPlugin",F,"input"),s.exports=F}),89639:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),g={},f={};f.register=function(o,u,r,h,c){g[o]={plugin:u,mapping:r,settingsKey:h,configKey:c}},f.getPlugin=function(o){return g[o]},f.install=function(o){var u=o.scene.sys,r=u.settings.input,h=u.game.config;for(var c in g){var l=g[c].plugin,p=g[c].mapping,m=g[c].settingsKey,v=g[c].configKey;a(r,m,h[v])&&(o[p]=new l(o))}},f.remove=function(o){g.hasOwnProperty(o)&&delete g[o]},s.exports=f}),42515:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31040),g=e(83419),f=e(20339),o=e(43855),u=e(47235),r=e(26099),h=e(25892),c=new g({initialize:function(p,m){this.manager=p,this.id=m,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=m===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(l){var p=l.getWorldPoint(this.x,this.y);return this.worldX=p.x,this.worldY=p.y,this},positionToCamera:function(l,p){return l.getWorldPoint(this.x,this.y,p)},updateMotion:function(){var l=this.position.x,p=this.position.y,m=this.midPoint.x,v=this.midPoint.y;if(!(l===m&&p===v)){var y=u(this.motionFactor,m,l),E=u(this.motionFactor,v,p);o(y,l,.1)&&(y=l),o(E,p,.1)&&(E=p),this.midPoint.set(y,E);var C=l-y,w=p-E;this.velocity.set(C,w),this.angle=a(y,E,l,p),this.distance=Math.sqrt(C*C+w*w)}},up:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=l.timeStamp,this.wasTouch=!1)},down:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),h.macOS&&l.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=l.timeStamp),this.wasTouch=!1},move:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.locked&&(this.movementX=l.movementX||l.mozMovementX||l.webkitMovementX||0,this.movementY=l.movementY||l.mozMovementY||l.webkitMovementY||0),this.moveTime=l.timeStamp,this.wasTouch=!1},wheel:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.deltaX=l.deltaX,this.deltaY=l.deltaY,this.deltaZ=l.deltaZ,this.wasTouch=!1},touchstart:function(l,p){l.pointerId&&(this.pointerId=l.pointerId),this.identifier=l.identifier,this.target=l.target,this.active=!0,this.buttons=1,this.event=p,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=p.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(l,p){this.event=p,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.moveTime=p.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(l,p){this.buttons=0,this.event=p,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(l,p){this.buttons=0,this.event=p,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?f(this.downX,this.downY,this.x,this.y):f(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(l,p){l===void 0&&(l=10),p===void 0&&(p=[]);for(var m=this.prevPosition.x,v=this.prevPosition.y,y=this.position.x,E=this.position.y,C=0;C<l;C++){var w=1/l*C;p[C]={x:u(w,m,y),y:u(w,v,E)}}return p},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},time:{get:function(){return this.event?this.event.timeStamp:0}}});s.exports=c}),93301:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};s.exports=T}),7179:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="boot"}),85375:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),39843:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragend"}),23388:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragenter"}),16133:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drag"}),27829:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragleave"}),53904:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragover"}),56058:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragstart"}),2642:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drop"}),88171:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectdown"}),36147:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragend"}),71692:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragenter"}),96149:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drag"}),81285:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragleave"}),74048:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragover"}),21322:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragstart"}),49378:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drop"}),86754:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectmove"}),86433:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectout"}),60709:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectover"}),24081:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerdown"}),11172:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointermove"}),18907:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerout"}),95579:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerover"}),35368:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerup"}),26972:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="wheel"}),47078:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectup"}),73802:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectwheel"}),56718:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameout"}),25936:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameover"}),27503:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="boot"}),50852:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="process"}),96438:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="update"}),59152:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerlockchange"}),47777:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerdown"}),27957:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerdownoutside"}),19444:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointermove"}),54251:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerout"}),18667:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerover"}),27192:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerup"}),24652:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerupoutside"}),45132:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="wheel"}),44512:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="preupdate"}),15757:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="shutdown"}),41637:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),93802:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="update"}),8214:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BOOT:e(7179),DESTROY:e(85375),DRAG_END:e(39843),DRAG_ENTER:e(23388),DRAG:e(16133),DRAG_LEAVE:e(27829),DRAG_OVER:e(53904),DRAG_START:e(56058),DROP:e(2642),GAME_OUT:e(56718),GAME_OVER:e(25936),GAMEOBJECT_DOWN:e(88171),GAMEOBJECT_DRAG_END:e(36147),GAMEOBJECT_DRAG_ENTER:e(71692),GAMEOBJECT_DRAG:e(96149),GAMEOBJECT_DRAG_LEAVE:e(81285),GAMEOBJECT_DRAG_OVER:e(74048),GAMEOBJECT_DRAG_START:e(21322),GAMEOBJECT_DROP:e(49378),GAMEOBJECT_MOVE:e(86754),GAMEOBJECT_OUT:e(86433),GAMEOBJECT_OVER:e(60709),GAMEOBJECT_POINTER_DOWN:e(24081),GAMEOBJECT_POINTER_MOVE:e(11172),GAMEOBJECT_POINTER_OUT:e(18907),GAMEOBJECT_POINTER_OVER:e(95579),GAMEOBJECT_POINTER_UP:e(35368),GAMEOBJECT_POINTER_WHEEL:e(26972),GAMEOBJECT_UP:e(47078),GAMEOBJECT_WHEEL:e(73802),MANAGER_BOOT:e(27503),MANAGER_PROCESS:e(50852),MANAGER_UPDATE:e(96438),POINTER_DOWN:e(47777),POINTER_DOWN_OUTSIDE:e(27957),POINTER_MOVE:e(19444),POINTER_OUT:e(54251),POINTER_OVER:e(18667),POINTER_UP:e(27192),POINTER_UP_OUTSIDE:e(24652),POINTER_WHEEL:e(45132),POINTERLOCK_CHANGE:e(59152),PRE_UPDATE:e(44512),SHUTDOWN:e(15757),START:e(41637),UPDATE:e(93802)}}),97421:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u){this.pad=o,this.events=o.events,this.index=u,this.value=0,this.threshold=.1},update:function(f){this.value=f},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});s.exports=g}),28884:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(92734),f=new a({initialize:function(u,r){this.pad=u,this.events=u.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var u=this.pad,r=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(g.BUTTON_DOWN,u,this,o),this.pad.emit(g.GAMEPAD_BUTTON_DOWN,r,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(g.BUTTON_UP,u,this,o),this.pad.emit(g.GAMEPAD_BUTTON_UP,r,o,this))},destroy:function(){this.pad=null,this.events=null}});s.exports=f}),99125:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97421),g=e(28884),f=e(83419),o=e(50792),u=e(26099),r=new f({Extends:o,initialize:function(c,l){o.call(this),this.manager=c,this.pad=l,this.id=l.id,this.index=l.index;for(var p=[],m=0;m<l.buttons.length;m++)p.push(new g(this,m));this.buttons=p;var v=[];for(m=0;m<l.axes.length;m++)v.push(new a(this,m));this.axes=v,this.vibration=l.vibrationActuator;var y={value:0,pressed:!1};this._LCLeft=p[14]?p[14]:y,this._LCRight=p[15]?p[15]:y,this._LCTop=p[12]?p[12]:y,this._LCBottom=p[13]?p[13]:y,this._RCLeft=p[2]?p[2]:y,this._RCRight=p[1]?p[1]:y,this._RCTop=p[3]?p[3]:y,this._RCBottom=p[0]?p[0]:y,this._FBLeftTop=p[4]?p[4]:y,this._FBLeftBottom=p[6]?p[6]:y,this._FBRightTop=p[5]?p[5]:y,this._FBRightBottom=p[7]?p[7]:y;var E={value:0};this._HAxisLeft=v[0]?v[0]:E,this._VAxisLeft=v[1]?v[1]:E,this._HAxisRight=v[2]?v[2]:E,this._VAxisRight=v[3]?v[3]:E,this.leftStick=new u,this.rightStick=new u,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(h){return this.axes[h].getValue()},setAxisThreshold:function(h){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=h},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(h){return this.buttons[h].value},isButtonDown:function(h){return this.buttons[h].pressed},update:function(h){if(!(h.timestamp<this._created)){var c,l=this.buttons,p=h.buttons,m=l.length;for(c=0;c<m;c++)l[c].update(p[c].value);var v=this.axes,y=h.axes;for(m=v.length,c=0;c<m;c++)v[c].update(y[c]);m>=2&&(this.leftStick.set(v[0].getValue(),v[1].getValue()),m>=4&&this.rightStick.set(v[2].getValue(),v[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var h;for(h=0;h<this.buttons.length;h++)this.buttons[h].destroy();for(h=0;h<this.axes.length;h++)this.axes[h].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});s.exports=r}),56654:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50792),f=e(92734),o=e(99125),u=e(35154),r=e(89639),h=e(8214),c=new a({Extends:g,initialize:function(p){g.call(this),this.scene=p.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=p,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,p.pluginEvents.once(h.BOOT,this.boot,this),p.pluginEvents.on(h.START,this.start,this)},boot:function(){var l=this.scene.sys.game,p=this.settings.input,m=l.config;this.enabled=u(p,"gamepad",m.inputGamepad)&&l.device.input.gamepads,this.target=u(p,"gamepad.target",m.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var l=this,p=this.target,m=function(v){v.defaultPrevented||!l.isActive()||(l.refreshPads(),l.queue.push(v))};this.onGamepadHandler=m,p.addEventListener("gamepadconnected",m,!1),p.addEventListener("gamepaddisconnected",m,!1),this.sceneInputPlugin.pluginEvents.on(h.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(h.UPDATE,this.update);for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].removeAllListeners()},disconnectAll:function(){for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].pad.connected=!1},refreshPads:function(){var l=navigator.getGamepads();if(!l)this.disconnectAll();else for(var p=this.gamepads,m=0;m<l.length;m++){var v=l[m];if(v){var y=v.id,E=v.index,C=p[E];if(C)C.id!==y?(C.destroy(),p[E]=new o(this,v)):C.update(v);else{var w=new o(this,v);p[E]=w,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=w):this._pad3=w:this._pad2=w:this._pad1=w}}}},getAll:function(){for(var l=[],p=this.gamepads,m=0;m<p.length;m++)p[m]&&l.push(p[m]);return l},getPad:function(l){for(var p=this.gamepads,m=0;m<p.length;m++)if(p[m]&&p[m].index===l)return p[m]},update:function(){if(this.enabled){this.refreshPads();var l=this.queue.length;if(l!==0)for(var p=this.queue.splice(0,l),m=0;m<l;m++){var v=p[m],y=this.getPad(v.gamepad.index);v.type==="gamepadconnected"?this.emit(f.CONNECTED,y,v):v.type==="gamepaddisconnected"&&this.emit(f.DISCONNECTED,y,v)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var l=0;l<this.gamepads.length;l++)this.gamepads[l]&&this.gamepads[l].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),s.exports=c}),89651:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}}),65294:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),90089:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),64894:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={DUALSHOCK_4:e(65294),SNES_USB:e(89651),XBOX_360:e(90089)}}),46008:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="down"}),7629:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="up"}),42206:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="connected"}),86544:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="disconnected"}),94784:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="down"}),14325:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="up"}),92734:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BUTTON_DOWN:e(46008),BUTTON_UP:e(7629),CONNECTED:e(42206),DISCONNECTED:e(86544),GAMEPAD_BUTTON_DOWN:e(94784),GAMEPAD_BUTTON_UP:e(14325)}}),48646:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Axis:e(97421),Button:e(28884),Events:e(92734),Gamepad:e(99125),GamepadPlugin:e(56654),Configs:e(64894)}}),14350:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93301),g=e(79291),f={CreatePixelPerfectHandler:e(84409),CreateInteractiveObject:e(74457),Events:e(8214),Gamepad:e(48646),InputManager:e(7003),InputPlugin:e(48205),InputPluginCache:e(89639),Keyboard:e(51442),Mouse:e(87078),Pointer:e(42515),Touch:e(95618)};f=g(!1,f,a),s.exports=f}),78970:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),g=e(83419),f=e(8443),o=e(8214),u=e(46032),r=e(29747),h=new g({initialize:function(l){this.manager=l,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,l.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(f.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(p){if(!(p.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(p),c.manager.events.emit(o.MANAGER_PROCESS);var m=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;c.preventDefault&&!m&&c.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}},this.onKeyUp=function(p){if(!(p.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(p),c.manager.events.emit(o.MANAGER_PROCESS);var m=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;c.preventDefault&&!m&&c.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}};var l=this.target;l&&(l.addEventListener("keydown",this.onKeyDown,!1),l.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var l=this.captures,p=0;p<c.length;p++){var m=c[p];typeof m=="string"&&(m=u[m.trim().toUpperCase()]),l.indexOf(m)===-1&&l.push(m)}this.preventDefault=l.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var l=this.captures,p=0;p<c.length;p++){var m=c[p];typeof m=="string"&&(m=u[m.toUpperCase()]),a(l,m)}this.preventDefault=l.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(f.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});s.exports=h}),28846:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50792),f=e(95922),o=e(8443),u=e(35154),r=e(8214),h=e(89639),c=e(30472),l=e(46032),p=e(87960),m=e(74600),v=e(44594),y=e(56583),E=new a({Extends:g,initialize:function(w){g.call(this),this.game=w.systems.game,this.scene=w.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=w,this.manager=w.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,w.pluginEvents.once(r.BOOT,this.boot,this),w.pluginEvents.on(r.START,this.start,this)},boot:function(){var C=this.settings.input;this.enabled=u(C,"keyboard",!0);var w=u(C,"keyboard.capture",null);w&&this.addCaptures(w),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(v.PAUSE,this.resetKeys,this),this.scene.sys.events.on(v.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(C){return this.manager.addCapture(C),this},removeCapture:function(C){return this.manager.removeCapture(C),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(C,w,A){w===void 0&&(w=!0),A===void 0&&(A=!1);var M={};if(typeof C=="string"){C=C.split(",");for(var R=0;R<C.length;R++){var P=C[R].trim();P&&(M[P]=this.addKey(P,w,A))}}else for(var b in C)M[b]=this.addKey(C[b],w,A);return M},addKey:function(C,w,A){w===void 0&&(w=!0),A===void 0&&(A=!1);var M=this.keys;if(C instanceof c){var R=M.indexOf(C);return R>-1?M[R]=C:M[C.keyCode]=C,w&&this.addCapture(C.keyCode),C.setEmitOnRepeat(A),C}return typeof C=="string"&&(C=l[C.toUpperCase()]),M[C]||(M[C]=new c(this,C),w&&this.addCapture(C),M[C].setEmitOnRepeat(A)),M[C]},removeKey:function(C,w,A){w===void 0&&(w=!1),A===void 0&&(A=!1);var M=this.keys,R;if(C instanceof c){var P=M.indexOf(C);P>-1&&(R=this.keys[P],this.keys[P]=void 0)}else typeof C=="string"&&(C=l[C.toUpperCase()]);return M[C]&&(R=M[C],M[C]=void 0),R&&(R.plugin=null,A&&this.removeCapture(R.keyCode),w&&R.destroy()),this},removeAllKeys:function(C,w){C===void 0&&(C=!1),w===void 0&&(w=!1);for(var A=this.keys,M=0;M<A.length;M++){var R=A[M];R&&(A[M]=void 0,w&&this.removeCapture(R.keyCode),C&&R.destroy())}return this},createCombo:function(C,w){return new p(this,C,w)},checkDown:function(C,w){if(w===void 0&&(w=0),this.enabled&&C.isDown){var A=y(this.time-C.timeDown,w);if(A>C._tick)return C._tick=A,!0}return!1},update:function(){var C=this.manager.queue,w=C.length;if(!(!this.isActive()||w===0))for(var A=this.keys,M=0;M<w;M++){var R=C[M],P=R.keyCode,b=A[P],F=!1;R.cancelled===void 0&&(R.cancelled=0,R.stopImmediatePropagation=function(){R.cancelled=1},R.stopPropagation=function(){R.cancelled=-1}),R.cancelled!==-1&&(P===this.prevCode&&R.timeStamp===this.prevTime&&R.type===this.prevType||(this.prevCode=P,this.prevTime=R.timeStamp,this.prevType=R.type,R.type==="keydown"?(b&&(F=b.isDown,b.onDown(R)),!R.cancelled&&(!b||!F)&&(m[P]&&this.emit(f.KEY_DOWN+m[P],R),R.cancelled||this.emit(f.ANY_KEY_DOWN,R))):(b&&b.onUp(R),R.cancelled||(m[P]&&this.emit(f.KEY_UP+m[P],R),R.cancelled||this.emit(f.ANY_KEY_UP,R))),R.cancelled===1&&(R.cancelled=0)))}},resetKeys:function(){for(var C=this.keys,w=0;w<C.length;w++)C[w]&&C[w].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(v.PAUSE,this.resetKeys,this),this.scene.sys.events.off(v.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var C=this.keys,w=0;w<C.length;w++)C[w]&&C[w].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});h.register("KeyboardPlugin",E,"keyboard","keyboard","inputKeyboard"),s.exports=E}),66970:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.timeLastMatched=e.timeStamp,a.index++,a.index===a.size?!0:(a.current=a.keyCodes[a.index],!1)};s.exports=T}),87960:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95922),f=e(95540),o=e(68769),u=e(92803),r=new a({initialize:function(c,l,p){if(p===void 0&&(p={}),l.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var m=0;m<l.length;m++){var v=l[m];typeof v=="string"?this.keyCodes.push(v.toUpperCase().charCodeAt(0)):typeof v=="number"?this.keyCodes.push(v):v.hasOwnProperty("keyCode")&&this.keyCodes.push(v.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=f(p,"resetOnWrongKey",!0),this.maxKeyDelay=f(p,"maxKeyDelay",0),this.resetOnMatch=f(p,"resetOnMatch",!1),this.deleteOnMatch=f(p,"deleteOnMatch",!1);var y=this,E=function(C){if(!(y.matched||!y.enabled)){var w=o(C,y);w&&(y.manager.emit(g.COMBO_MATCH,y,C),y.resetOnMatch?u(y):y.deleteOnMatch&&y.destroy())}};this.onKeyDown=E,this.manager.on(g.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(g.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});s.exports=r}),68769:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66970),g=function(f,o){if(o.matched)return!0;var u=!1,r=!1;if(f.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var h=o.timeLastMatched+o.maxKeyDelay;f.timeStamp<=h&&(r=!0,u=a(f,o))}else r=!0,u=a(f,o);return!r&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),u&&(o.timeLastMatched=f.timeStamp,o.matched=!0,o.timeMatched=f.timeStamp),u};s.exports=g}),92803:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};s.exports=T}),92612:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keydown"}),23345:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keyup"}),21957:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keycombomatch"}),44743:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="down"}),3771:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keydown-"}),46358:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keyup-"}),75674:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="up"}),95922:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ANY_KEY_DOWN:e(92612),ANY_KEY_UP:e(23345),COMBO_MATCH:e(21957),DOWN:e(44743),KEY_DOWN:e(3771),KEY_UP:e(46358),UP:e(75674)}}),51442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Events:e(95922),KeyboardManager:e(78970),KeyboardPlugin:e(28846),Key:e(30472),KeyCodes:e(46032),KeyCombo:e(87960),AdvanceKeyCombo:e(66970),ProcessKeyCombo:e(68769),ResetKeyCombo:e(92803),JustDown:e(90229),JustUp:e(38796),DownDuration:e(37015),UpDuration:e(41170)}}),37015:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=50);var g=e.plugin.game.loop.time-e.timeDown;return e.isDown&&g<a};s.exports=T}),90229:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justDown?(e._justDown=!1,!0):!1};s.exports=T}),38796:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justUp?(e._justUp=!1,!0):!1};s.exports=T}),30472:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50792),f=e(95922),o=new a({Extends:g,initialize:function(r,h){g.call(this),this.plugin=r,this.keyCode=h,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(u){return this.emitOnRepeat=u,this},onDown:function(u){this.originalEvent=u,this.enabled&&(this.altKey=u.altKey,this.ctrlKey=u.ctrlKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.location=u.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(f.DOWN,this,u):(this.isDown=!0,this.isUp=!1,this.timeDown=u.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(f.DOWN,this,u)))},onUp:function(u){this.originalEvent=u,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=u.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(f.UP,this,u))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});s.exports=o}),46032:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};s.exports=T}),74600:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(46032),g={};for(var f in a)g[a[f]]=f;s.exports=g}),41170:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=50);var g=e.plugin.game.loop.time-e.timeUp;return e.isUp&&g<a};s.exports=T}),85098:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(89357),f=e(8214),o=e(29747),u=new a({initialize:function(h){this.manager=h,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,h.events.once(f.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(g.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){g.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(r){var h=this,c=this.manager,l=c.canvas,p=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(v){!v.defaultPrevented&&h.enabled&&c&&c.enabled&&(c.onMouseMove(v),h.preventDefaultMove&&v.preventDefault())},this.onMouseDown=function(v){p&&window.focus(),!v.defaultPrevented&&h.enabled&&c&&c.enabled&&(c.onMouseDown(v),h.preventDefaultDown&&v.target===l&&v.preventDefault())},this.onMouseDownWindow=function(v){v.sourceCapabilities&&v.sourceCapabilities.firesTouchEvents||!v.defaultPrevented&&h.enabled&&c&&c.enabled&&v.target!==l&&c.onMouseDown(v)},this.onMouseUp=function(v){!v.defaultPrevented&&h.enabled&&c&&c.enabled&&(c.onMouseUp(v),h.preventDefaultUp&&v.target===l&&v.preventDefault())},this.onMouseUpWindow=function(v){v.sourceCapabilities&&v.sourceCapabilities.firesTouchEvents||!v.defaultPrevented&&h.enabled&&c&&c.enabled&&v.target!==l&&c.onMouseUp(v)},this.onMouseOver=function(v){!v.defaultPrevented&&h.enabled&&c&&c.enabled&&c.setCanvasOver(v)},this.onMouseOut=function(v){!v.defaultPrevented&&h.enabled&&c&&c.enabled&&c.setCanvasOut(v)},this.onMouseWheel=function(v){!v.defaultPrevented&&h.enabled&&c&&c.enabled&&c.onMouseWheel(v),h.preventDefaultWheel&&v.target===l&&v.preventDefault()};var m={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,m),r.addEventListener("mouseout",this.onMouseOut,m),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,m),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,m),window.top.addEventListener("mouseup",this.onMouseUpWindow,m)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,m),window.addEventListener("mouseup",this.onMouseUpWindow,m),this.isTop=!1}g.pointerLock&&(this.pointerLockChange=function(v){var y=h.target;h.locked=document.pointerLockElement===y||document.mozPointerLockElement===y||document.webkitPointerLockElement===y,c.onPointerLockChange(v)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),g.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});s.exports=u}),87078:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={MouseManager:e(85098)}}),36210:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(8214),f=e(29747),o=new a({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=f,this.onTouchStartWindow=f,this.onTouchMove=f,this.onTouchEnd=f,this.onTouchEndWindow=f,this.onTouchCancel=f,this.onTouchCancelWindow=f,this.isTop=!0,r.events.once(g.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputTouch,this.target=u.inputTouchEventTarget,this.capture=u.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,u.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),this},startListeners:function(){var u=this.target;if(u){var r=this,h=this.manager,c=h.canvas,l=window&&window.focus&&h.game.config.autoFocus;this.onTouchMove=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&(h.onTouchMove(y),r.capture&&y.cancelable&&y.preventDefault())},this.onTouchStart=function(y){l&&window.focus(),!y.defaultPrevented&&r.enabled&&h&&h.enabled&&(h.onTouchStart(y),r.capture&&y.cancelable&&y.target===c&&y.preventDefault())},this.onTouchStartWindow=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&y.target!==c&&h.onTouchStart(y)},this.onTouchEnd=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&(h.onTouchEnd(y),r.capture&&y.cancelable&&y.target===c&&y.preventDefault())},this.onTouchEndWindow=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&y.target!==c&&h.onTouchEnd(y)},this.onTouchCancel=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&(h.onTouchCancel(y),r.capture&&y.preventDefault())},this.onTouchCancelWindow=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&h.onTouchCancel(y)};var p=this.capture,m={passive:!0},v={passive:!1};if(u.addEventListener("touchstart",this.onTouchStart,p?v:m),u.addEventListener("touchmove",this.onTouchMove,p?v:m),u.addEventListener("touchend",this.onTouchEnd,p?v:m),u.addEventListener("touchcancel",this.onTouchCancel,p?v:m),window&&h.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,v),window.top.addEventListener("touchend",this.onTouchEndWindow,v),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,v)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var u=this.target;u.removeEventListener("touchstart",this.onTouchStart),u.removeEventListener("touchmove",this.onTouchMove),u.removeEventListener("touchend",this.onTouchEnd),u.removeEventListener("touchcancel",this.onTouchCancel),window&&(u=this.isTop?window.top:window,u.removeEventListener("touchstart",this.onTouchStartWindow),u.removeEventListener("touchend",this.onTouchEndWindow),u.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});s.exports=o}),95618:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={TouchManager:e(36210)}}),41299:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(54899),o=e(95540),u=e(98356),r=e(3374),h=e(84376),c=e(92638),l=new a({initialize:function(m,v){if(this.loader=m,this.cache=o(v,"cache",!1),this.type=o(v,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=o(v,"key",!1);var y=this.key;if(m.prefix&&m.prefix!==""&&(this.key=m.prefix+y),!this.key)throw new Error("Invalid File key: "+this.key);var E=o(v,"url");E===void 0?E=m.path+y+"."+o(v,"extension",""):typeof E=="string"&&!E.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(E=m.path+E),this.url=E,this.src="",this.xhrSettings=c(o(v,"responseType",void 0)),o(v,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,o(v,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?g.FILE_POPULATED:g.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(v,"config",{}),this.multiFile,this.linkFile,this.base64=typeof E=="string"&&E.indexOf("data:")===0,this.retryAttempts=o(v,"maxRetries",m.maxRetries)},setLink:function(p){this.linkFile=p,p.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===g.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=g.FILE_LOADING,this.src=u(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=h(this,this.loader.xhr)}},onLoad:function(p,m){var v=p.responseURL&&this.loader.localSchemes.some(function(C){return p.responseURL.indexOf(C)===0}),y=v&&m.target.status===0,E=!(m.target&&m.target.status!==200)||y;p.readyState===4&&p.status>=400&&p.status<=599&&(E=!1),this.state=g.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,E)},onBase64Load:function(p){this.xhrLoader=p,this.state=g.FILE_LOADED,this.percentComplete=1,this.loader.emit(f.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(p){p.lengthComputable&&(this.bytesLoaded=p.loaded,this.bytesTotal=p.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(f.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=g.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=g.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=g.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(p){if(this.state!==g.FILE_PENDING_DESTROY){p===void 0&&(p=this.data);var m=this.key,v=this.type;this.loader.emit(f.FILE_COMPLETE,m,v,p),this.loader.emit(f.FILE_KEY_COMPLETE+v+"-"+m,m,v,p),this.loader.flagForRemoval(this),this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(p,m,v){if(typeof URL=="function")p.src=URL.createObjectURL(m);else{var y=new FileReader;y.onload=function(){p.removeAttribute("crossOrigin"),p.src="data:"+(m.type||v)+";base64,"+y.result.split(",")[1]},y.onerror=p.onerror,y.readAsDataURL(m)}},l.revokeObjectURL=function(p){typeof URL=="function"&&URL.revokeObjectURL(p.src)},s.exports=l}),74099:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={install:function(a){for(var g in T)a[g]=T[g]},register:function(a,g){T[a]=g},destroy:function(){T={}}};s.exports=e}),98356:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:a+e.url:!1};s.exports=T}),74261:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(35072),o=e(50792),u=e(54899),r=e(74099),h=e(95540),c=e(35154),l=e(41212),p=e(37277),m=e(44594),v=e(92638),y=new a({Extends:o,initialize:function(C){o.call(this);var w=C.sys.game.config,A=C.sys.settings.loader;this.scene=C,this.systems=C.sys,this.cacheManager=C.sys.cache,this.textureManager=C.sys.textures,this.sceneManager=C.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(h(A,"baseURL",w.loaderBaseURL)),this.setPath(h(A,"path",w.loaderPath)),this.setPrefix(h(A,"prefix",w.loaderPrefix)),this.maxParallelDownloads=h(A,"maxParallelDownloads",w.loaderMaxParallelDownloads),this.xhr=v(h(A,"responseType",w.loaderResponseType),h(A,"async",w.loaderAsync),h(A,"user",w.loaderUser),h(A,"password",w.loaderPassword),h(A,"timeout",w.loaderTimeout),h(A,"withCredentials",w.loaderWithCredentials)),this.crossOrigin=h(A,"crossOrigin",w.loaderCrossOrigin),this.imageLoadType=h(A,"imageLoadType",w.loaderImageLoadType),this.localSchemes=h(A,"localScheme",w.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new f,this.inflight=new f,this.queue=new f,this._deleteQueue=new f,this.totalFailed=0,this.totalComplete=0,this.state=g.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=h(A,"maxRetries",w.loaderMaxRetries),C.sys.events.once(m.BOOT,this.boot,this),C.sys.events.on(m.START,this.pluginStart,this)},boot:function(){this.systems.events.once(m.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(m.SHUTDOWN,this.shutdown,this)},setBaseURL:function(E){return E===void 0&&(E=""),E!==""&&E.substr(-1)!=="/"&&(E=E.concat("/")),this.baseURL=E,this},setPath:function(E){return E===void 0&&(E=""),E!==""&&E.substr(-1)!=="/"&&(E=E.concat("/")),this.path=E,this},setPrefix:function(E){return E===void 0&&(E=""),this.prefix=E,this},setCORS:function(E){return this.crossOrigin=E,this},addFile:function(E){Array.isArray(E)||(E=[E]);for(var C=0;C<E.length;C++){var w=E[C];this.keyExists(w)||(this.list.set(w),this.emit(u.ADD,w.key,w.type,this,w),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(E){var C=E.hasCacheConflict();return C||this.list.iterate(function(w){if(w.type===E.type&&w.key===E.key)return C=!0,!1}),!C&&this.isLoading()&&(this.inflight.iterate(function(w){if(w.type===E.type&&w.key===E.key)return C=!0,!1}),this.queue.iterate(function(w){if(w.type===E.type&&w.key===E.key)return C=!0,!1})),C},addPack:function(E,C){if(typeof C=="string"){var w=c(E,C);w&&(E={packKey:w})}var A=0,M=this.baseURL,R=this.path,P=this.prefix;for(var b in E)if(Object.prototype.hasOwnProperty.call(E,b)){var F=E[b],I=h(F,"baseURL",M),L=h(F,"path",R),D=h(F,"prefix",P),O=h(F,"files",null),z=h(F,"defaultType","void");if(Array.isArray(O)){this.setBaseURL(I),this.setPath(L),this.setPrefix(D);for(var _=0;_<O.length;_++){var X=O[_],H=X.hasOwnProperty("type")?X.type:z;this[H]&&(this[H](X),A++)}}}return this.setBaseURL(M),this.setPath(R),this.setPrefix(P),A>0},removePack:function(E,C){var w=this.systems.anims,A=this.cacheManager,M=this.textureManager,R={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},P;if(l(E))P=E;else if(P=A.json.get(E),!P){console.warn("Asset Pack not found in JSON cache:",E);return}C&&(P={_:P[C]});for(var b in P){var F=P[b],I=h(F,"prefix",""),L=h(F,"files"),D=h(F,"defaultType");if(Array.isArray(L))for(var O=0;O<L.length;O++){var z=L[O],_=z.hasOwnProperty("type")?z.type:D;if(!_){console.warn("No type:",z);continue}var X=I+z.key;if(_==="animation"&&w.remove(X),!((_==="aseprite"||_==="atlas"||_==="atlasXML"||_==="htmlTexture"||_==="image"||_==="multiatlas"||_==="spritesheet"||_==="svg"||_==="texture"||_==="unityAtlas")&&(M.remove(X),!R[_]))){if(_==="pack"){this.removePack(X,z.dataKey);continue}if(_==="spine"){var H=A.custom.spine.get(X);if(!H)continue;var U=H.prefix===void 0?"":H.prefix;A.custom.spine.remove(X);var G=A.custom.spineTextures.get(X);if(!G)continue;A.custom.spineTextures.remove(X);for(var N=0;N<G.pages.length;N++){var W=G.pages[N],V=U+W.name,$=X+":"+V;M.exists($)?M.remove($):M.remove(V)}}var j=R[_];if(j!==null){if(!j){console.warn("Unknown type:",_);continue}var k=A[j];k.remove(X)}}}}},isLoading:function(){return this.state===g.LOADER_LOADING||this.state===g.LOADER_PROCESSING},isReady:function(){return this.state===g.LOADER_IDLE||this.state===g.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(u.START,this),this.list.size===0?this.loadComplete():(this.state=g.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(m.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(u.PROGRESS,this.progress)},update:function(){this.state===g.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(E){if((E.state===g.FILE_POPULATED||E.state===g.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(E),this.list.delete(E),E.crossOrigin||(E.crossOrigin=this.crossOrigin),E.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(E,C){this.inflight&&(this.inflight.delete(E),this.updateProgress(),C?(this.totalComplete++,this.queue.set(E),this.emit(u.FILE_LOAD,E),E.onProcess()):(this.totalFailed++,this._deleteQueue.set(E),this.emit(u.FILE_LOAD_ERROR,E),this.fileProcessComplete(E)))},fileProcessComplete:function(E){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(E.state===g.FILE_ERRORED?E.multiFile&&E.multiFile.onFileFailed(E):E.state===g.FILE_COMPLETE&&(E.multiFile?E.multiFile.isReadyToProcess()&&(E.multiFile.addToCache(),E.multiFile.pendingDestroy()):(E.addToCache(),E.pendingDestroy())),this.queue.delete(E),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(u.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=g.LOADER_COMPLETE,this.systems.events.off(m.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(u.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(E){this._deleteQueue.set(E)},saveJSON:function(E,C){return this.save(JSON.stringify(E),C)},save:function(E,C,w){C===void 0&&(C="file.json"),w===void 0&&(w="application/json");var A=new Blob([E],{type:w}),M=URL.createObjectURL(A),R=document.createElement("a");return R.download=C,R.textContent="Download "+C,R.href=M,R.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var E=this.systems.game.config,C=this.systems.settings.loader;this.setBaseURL(h(C,"baseURL",E.loaderBaseURL)),this.setPath(h(C,"path",E.loaderPath)),this.setPrefix(h(C,"prefix",E.loaderPrefix)),this.state=g.LOADER_IDLE},shutdown:function(){this.reset(),this.state=g.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(m.UPDATE,this.update,this),this.systems.events.off(m.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=g.LOADER_DESTROYED,this.systems.events.off(m.UPDATE,this.update,this),this.systems.events.off(m.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});p.register("Loader",y,"load"),s.exports=y}),3374:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),g=e(92638),f=function(o,u){var r=o===void 0?g():a({},o);if(u)for(var h in u)u[h]!==void 0&&(r[h]=u[h]);return r};s.exports=f}),26430:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(54899),o=new a({initialize:function(r,h,c,l){var p=[];l.forEach(function(y){y&&p.push(y)}),this.loader=r,this.type=h,this.key=c;var m=this.key;r.prefix&&r.prefix!==""&&(this.key=r.prefix+m),this.multiKeyIndex=r.multiKeyIndex++,this.files=p,this.state=g.FILE_PENDING,this.complete=!1,this.pending=p.length,this.failed=0,this.config={},this.baseURL=r.baseURL,this.path=r.path,this.prefix=r.prefix;for(var v=0;v<p.length;v++)p[v].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(u){return this.files.push(u),u.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(u){var r=this.files.indexOf(u);r!==-1&&this.pending--},onFileFailed:function(u){var r=this.files.indexOf(u);r!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,u.type,u.key))},pendingDestroy:function(){if(this.state!==g.FILE_PENDING_DESTROY){var u=this.key,r=this.type;this.loader.emit(f.FILE_COMPLETE,u,r),this.loader.emit(f.FILE_KEY_COMPLETE+r+"-"+u,u,r),this.loader.flagForRemoval(this);for(var h=0;h<this.files.length;h++)this.files[h].pendingDestroy();this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});s.exports=o}),84376:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3374),g=function(f,o){var u=a(o,f.xhrSettings);if(f.base64){var r=f.url.split(";base64,").pop()||f.url.split(",").pop(),h;f.xhrSettings.responseType==="arraybuffer"?h={response:Uint8Array.from(atob(r),function(p){return p.charCodeAt(0)}).buffer}:h={responseText:atob(r)},f.onBase64Load(h);return}var c=new XMLHttpRequest;if(c.open("GET",f.src,u.async,u.user,u.password),c.responseType=f.xhrSettings.responseType,c.timeout=u.timeout,u.headers)for(var l in u.headers)c.setRequestHeader(l,u.headers[l]);return u.header&&u.headerValue&&c.setRequestHeader(u.header,u.headerValue),u.requestedWith&&c.setRequestHeader("X-Requested-With",u.requestedWith),u.overrideMimeType&&c.overrideMimeType(u.overrideMimeType),u.withCredentials&&(c.withCredentials=!0),c.onload=f.onLoad.bind(f,c),c.onerror=f.onError.bind(f,c),c.onprogress=f.onProgress.bind(f),c.ontimeout=f.onError.bind(f,c),c.send(),c};s.exports=g}),92638:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o,u){return e===void 0&&(e=""),a===void 0&&(a=!0),g===void 0&&(g=""),f===void 0&&(f=""),o===void 0&&(o=0),u===void 0&&(u=!1),{responseType:e,async:a,user:g,password:f,timeout:o,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:u}};s.exports=T}),23906:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};s.exports=T}),42155:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addfile"}),38991:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),27540:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="filecomplete"}),87464:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="filecomplete-"}),94486:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="loaderror"}),13035:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="load"}),38144:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="fileprogress"}),97520:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postprocess"}),85595:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="progress"}),55680:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),54899:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADD:e(42155),COMPLETE:e(38991),FILE_COMPLETE:e(27540),FILE_KEY_COMPLETE:e(87464),FILE_LOAD_ERROR:e(94486),FILE_LOAD:e(13035),FILE_PROGRESS:e(38144),POST_PROCESS:e(97520),PROGRESS:e(85595),START:e(55680)}}),14135:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(518),o=e(54899),u=new a({Extends:f,initialize:function(h,c,l,p,m){f.call(this,h,c,l,p,m),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),f.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});g.register("animation",function(r,h,c,l){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new u(this,r[p]));else this.addFile(new u(this,r,h,l,c));return this}),s.exports=u}),76272:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(95540),o=e(19550),u=e(41212),r=e(518),h=e(26430),c=new a({Extends:h,initialize:function(p,m,v,y,E,C){var w,A;if(u(m)){var M=m;m=f(M,"key"),w=new o(p,{key:m,url:f(M,"textureURL"),extension:f(M,"textureExtension","png"),normalMap:f(M,"normalMap"),xhrSettings:f(M,"textureXhrSettings")}),A=new r(p,{key:m,url:f(M,"atlasURL"),extension:f(M,"atlasExtension","json"),xhrSettings:f(M,"atlasXhrSettings")})}else w=new o(p,m,v,E),A=new r(p,m,y,C);w.linkFile?h.call(this,p,"atlasjson",m,[w,A,w.linkFile]):h.call(this,p,"atlasjson",m,[w,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,p.data,m),p.addToCache(),this.complete=!0}}});g.register("aseprite",function(l,p,m,v,y){var E;if(Array.isArray(l))for(var C=0;C<l.length;C++)E=new c(this,l[C]),this.addFile(E.files);else E=new c(this,l,p,m,v,y),this.addFile(E.files);return this}),s.exports=c}),38734:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(95540),o=e(19550),u=e(41212),r=e(518),h=e(26430),c=new a({Extends:h,initialize:function(p,m,v,y,E,C){var w,A;if(u(m)){var M=m;m=f(M,"key"),w=new o(p,{key:m,url:f(M,"textureURL"),extension:f(M,"textureExtension","png"),normalMap:f(M,"normalMap"),xhrSettings:f(M,"textureXhrSettings")}),A=new r(p,{key:m,url:f(M,"atlasURL"),extension:f(M,"atlasExtension","json"),xhrSettings:f(M,"atlasXhrSettings")})}else w=new o(p,m,v,E),A=new r(p,m,y,C);w.linkFile?h.call(this,p,"atlasjson",m,[w,A,w.linkFile]):h.call(this,p,"atlasjson",m,[w,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,p.data,m),this.complete=!0}}});g.register("atlas",function(l,p,m,v,y){var E;if(Array.isArray(l))for(var C=0;C<l.length;C++)E=new c(this,l[C]),this.addFile(E.files);else E=new c(this,l,p,m,v,y),this.addFile(E.files);return this}),s.exports=c}),74599:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(95540),o=e(19550),u=e(41212),r=e(26430),h=e(57318),c=new a({Extends:r,initialize:function(p,m,v,y,E,C){var w,A;if(u(m)){var M=m;m=f(M,"key"),w=new o(p,{key:m,url:f(M,"textureURL"),extension:f(M,"textureExtension","png"),normalMap:f(M,"normalMap"),xhrSettings:f(M,"textureXhrSettings")}),A=new h(p,{key:m,url:f(M,"atlasURL"),extension:f(M,"atlasExtension","xml"),xhrSettings:f(M,"atlasXhrSettings")})}else w=new o(p,m,v,E),A=new h(p,m,y,C);w.linkFile?r.call(this,p,"atlasxml",m,[w,A,w.linkFile]):r.call(this,p,"atlasxml",m,[w,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(l.key,l.data,p.data,m),this.complete=!0}}});g.register("atlasXML",function(l,p,m,v,y){var E;if(Array.isArray(l))for(var C=0;C<l.length;C++)E=new c(this,l[C]),this.addFile(E.files);else E=new c(this,l,p,m,v,y),this.addFile(E.files);return this}),s.exports=c}),21097:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(89749),h=e(41212),c=new a({Extends:f,initialize:function(p,m,v,y,E){if(h(m)){var C=m;m=u(C,"key"),y=u(C,"xhrSettings"),E=u(C,"context",E)}var w={type:"audio",cache:p.cacheManager.audio,extension:v.type,responseType:"arraybuffer",key:m,url:v.url,xhrSettings:y,config:{context:E}};f.call(this,p,w)},onProcess:function(){this.state=g.FILE_PROCESSING;var l=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(p){l.data=p,l.onProcessComplete()},function(p){console.error("Error decoding audio: "+l.key+" - ",p?p.message:null),l.onProcessError()}),this.config.context=null}});c.create=function(l,p,m,v,y){var E=l.systems.game,C=E.config.audio,w=E.device.audio;h(p)&&(m=u(p,"url",[]),v=u(p,"config",{}));var A=c.getAudioURL(E,m);return A?w.webAudio&&!C.disableWebAudio?new c(l,p,A,y,E.sound.context):new r(l,p,A,v):(console.warn('No audio URLs for "%s" can play on this device',p),null)},c.getAudioURL=function(l,p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var v=u(p[m],"url",p[m]);if(v.indexOf("blob:")===0||v.indexOf("data:")===0)return{url:v,type:""};var y=v.match(/\.([a-zA-Z0-9]+)($|\?)/);if(y=u(p[m],"type",y?y[1]:"").toLowerCase(),l.device.audio[y])return{url:v,type:y}}return null},o.register("audio",function(l,p,m,v){var y=this.systems.game,E=y.config.audio,C=y.device.audio;if(E.noAudio||!C.webAudio&&!C.audioData)return this;var w;if(Array.isArray(l))for(var A=0;A<l.length;A++)w=c.create(this,l[A]),w&&this.addFile(w);else w=c.create(this,l,p,m,v),w&&this.addFile(w);return this}),s.exports=c}),89524:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21097),g=e(83419),f=e(74099),o=e(95540),u=e(41212),r=e(518),h=e(26430),c=new g({Extends:h,initialize:function(p,m,v,y,E,C,w){if(u(m)){var A=m;m=o(A,"key"),v=o(A,"jsonURL"),y=o(A,"audioURL"),E=o(A,"audioConfig"),C=o(A,"audioXhrSettings"),w=o(A,"jsonXhrSettings")}var M;if(!y)M=new r(p,m,v,w),h.call(this,p,"audiosprite",m,[M]),this.config.resourceLoad=!0,this.config.audioConfig=E,this.config.audioXhrSettings=C;else{var R=a.create(p,m,y,E,C);R&&(M=new r(p,m,v,w),h.call(this,p,"audiosprite",m,[R,M]),this.config.resourceLoad=!1)}},onFileComplete:function(l){var p=this.files.indexOf(l);if(p!==-1&&(this.pending--,this.config.resourceLoad&&l.type==="json"&&l.data.hasOwnProperty("resources"))){var m=l.data.resources,v=o(this.config,"audioConfig"),y=o(this.config,"audioXhrSettings"),E=a.create(this.loader,l.key,m,v,y);E&&(this.addToMultiFile(E),this.loader.addFile(E))}},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1];l.addToCache(),p.addToCache(),this.complete=!0}}});f.register("audioSprite",function(l,p,m,v,y,E){var C=this.systems.game,w=C.config.audio,A=C.device.audio;if(w&&w.noAudio||!A.webAudio&&!A.audioData)return this;var M;if(Array.isArray(l))for(var R=0;R<l.length;R++)M=new c(this,l[R]),M.files&&this.addFile(M.files);else M=new c(this,l,p,m,v,y,E),M.files&&this.addFile(M.files);return this})}),85722:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v,y){var E="bin";if(r(p)){var C=p;p=u(C,"key"),m=u(C,"url"),v=u(C,"xhrSettings"),E=u(C,"extension",E),y=u(C,"dataType",y)}var w={type:"binary",cache:l.cacheManager.binary,extension:E,responseType:"arraybuffer",key:p,url:m,xhrSettings:v,config:{dataType:y}};f.call(this,l,w)},onProcess:function(){this.state=g.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(c,l,p,m){if(Array.isArray(c))for(var v=0;v<c.length;v++)this.addFile(new h(this,c[v]));else this.addFile(new h(this,c,l,m,p));return this}),s.exports=h}),97025:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(95540),o=e(19550),u=e(41212),r=e(26430),h=e(21859),c=e(57318),l=new a({Extends:r,initialize:function(m,v,y,E,C,w){var A,M;if(u(v)){var R=v;v=f(R,"key"),A=new o(m,{key:v,url:f(R,"textureURL"),extension:f(R,"textureExtension","png"),normalMap:f(R,"normalMap"),xhrSettings:f(R,"textureXhrSettings")}),M=new c(m,{key:v,url:f(R,"fontDataURL"),extension:f(R,"fontDataExtension","xml"),xhrSettings:f(R,"fontDataXhrSettings")})}else A=new o(m,v,y,C),M=new c(m,v,E,w);A.linkFile?r.call(this,m,"bitmapfont",v,[A,M,A.linkFile]):r.call(this,m,"bitmapfont",v,[A,M])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],m=this.files[1];p.addToCache();var v=p.cache.get(p.key),y=h(m.data,p.cache.getFrame(p.key),0,0,v);this.loader.cacheManager.bitmapFont.add(p.key,{data:y,texture:p.key,frame:null}),this.complete=!0}}});g.register("bitmapFont",function(p,m,v,y,E){var C;if(Array.isArray(p))for(var w=0;w<p.length;w++)C=new l(this,p[w]),this.addFile(C.files);else C=new l(this,p,m,v,y,E),this.addFile(C.files);return this}),s.exports=l}),16024:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v){var y="css";if(r(p)){var E=p;p=u(E,"key"),m=u(E,"url"),v=u(E,"xhrSettings"),y=u(E,"extension",y)}var C={type:"script",cache:!1,extension:y,responseType:"text",key:p,url:m,xhrSettings:v};f.call(this,l,C)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(c,l,p){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new h(this,c[m]));else this.addFile(new h(this,c,l,p));return this}),s.exports=h}),69559:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38734),g=e(85722),f=e(83419),o=e(74099),u=e(95540),r=e(19550),h=e(41212),c=e(518),l=e(31403),p=e(46975),m=e(59327),v=e(26430),y=e(82038),E=e(55222),C=new f({Extends:v,initialize:function(A,M,R,P){if(R.multiAtlasURL){var b=new c(A,{key:M,url:R.multiAtlasURL,xhrSettings:P,config:R});v.call(this,A,"texture",M,[b])}else{var F=R.textureURL.substr(R.textureURL.length-3);R.type||(R.type=F.toLowerCase()==="ktx"?"KTX":"PVR");var I=new g(A,{key:M,url:R.textureURL,extension:F,xhrSettings:P,config:R});if(R.atlasURL){var L=new c(A,{key:M,url:R.atlasURL,xhrSettings:P,config:R});v.call(this,A,"texture",M,[I,L])}else v.call(this,A,"texture",M,[I])}this.config=R},onFileComplete:function(w){var A=this.files.indexOf(w);if(A!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(w.type==="json"&&w.data.hasOwnProperty("textures")){var M=w.data.textures,R=this.config,P=this.loader,b=P.baseURL,F=P.path,I=P.prefix,L=u(R,"multiBaseURL",this.baseURL),D=u(R,"multiPath",this.path),O=u(R,"prefix",this.prefix),z=u(R,"textureXhrSettings");L&&P.setBaseURL(L),D&&P.setPath(D),O&&P.setPrefix(O);for(var _=0;_<M.length;_++){var X=M[_].image,H="CMA"+this.multiKeyIndex+"_"+X,U=new g(P,H,X,z);if(this.addToMultiFile(U),P.addFile(U),M[_].normalMap){var G=new g(P,H,M[_].normalMap,z);G.type="normalMap",U.setLink(G),this.addToMultiFile(G),P.addFile(G)}}P.setBaseURL(b),P.setPath(F),P.setPrefix(I)}}},addToCache:function(){function w(L){console.warn('Compressed Texture Invalid: "'+b.key+'". '+L)}if(this.isReadyToProcess()){var A=this.config;if(A.multiAtlasURL)this.addMultiToCache();else{var M=this.loader.systems.renderer,R=this.loader.textureManager,P,b=this.files[0],F=this.files[1];if(A.type==="PVR"?P=y(b.data):A.type==="KTX"&&(P=l(b.data),P||w("KTX file contains unsupported format.")),P&&!E(P)&&(w("Texture dimensions failed verification. Check the texture format specifications for "+A.format+" 0x"+P.internalFormat.toString(16)+"."),P=null),P&&!M.supportsCompressedTexture(A.format,P.internalFormat)&&(w("Texture format "+A.format+" with internal format "+P.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),P=null),P){P.format=M.getCompressedTextureName(A.format,P.internalFormat);var I=F&&F.data?F.data:null;R.addCompressedTexture(b.key,P,I)}}this.complete=!0}},addMultiToCache:function(){for(var w=this.config,A=this.files[0],M=[],R=[],P=[],b=this.loader.systems.renderer,F=this.loader.textureManager,I,L=1;L<this.files.length;L++){var D=this.files[L];if(D.type!=="normalMap")for(var O=D.key.indexOf("_"),z=D.key.substr(O+1),_=D.data,X=0;X<A.data.textures.length;X++){var H=A.data.textures[X];if(H.image===z){w.type==="PVR"?I=y(_):w.type==="KTX"&&(I=l(_)),I&&b.supportsCompressedTexture(w.format,I.internalFormat)&&(I.format=b.getCompressedTextureName(w.format,I.internalFormat),R.push(I),M.push(H),D.linkFile&&P.push(D.linkFile.data));break}}}P.length===0&&(P=void 0),F.addAtlasJSONArray(this.key,R,M,P),this.complete=!0}});o.register("texture",function(w,A,M){var R=this.systems.renderer,P=function(F,I,L,D){var O={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(h(I)){var z=I;I=u(z,"key"),L=u(z,"url"),D=u(z,"xhrSettings")}var _=!1;for(var X in L)if(R.supportsCompressedTexture(X)){var H=L[X];typeof H=="string"?O.textureURL=H:O=p(H,O),O.format=X.toUpperCase(),_=!0;break}if(!_)console.warn("No supported compressed texture format or IMG fallback",I);else if(O.format==="IMG"){var U,G;O.multiAtlasURL?(G=new m(F,I,O.multiAtlasURL,O.multiPath,O.multiBaseURL,D),U=G.files):O.atlasURL?(G=new a(F,I,O.textureURL,O.atlasURL,D),U=G.files):U=new r(F,I,O.textureURL,D),F.addFile(U)}else{var N=new C(F,I,O,D);F.addFile(N.files)}};if(Array.isArray(w))for(var b=0;b<w.length;b++)P(this,w[b]);else P(this,w,A,M);return this}),s.exports=C}),87674:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(98356),h=e(41212),c=new a({Extends:f,initialize:function(p,m,v,y,E,C){var w="ttf";if(h(m)){var A=m;m=u(A,"key"),v=u(A,"url"),y=u(A,"format","truetype"),E=u(A,"descriptors",null),C=u(A,"xhrSettings"),w=u(A,"extension",w)}else y===void 0&&(y="truetype");var M={type:"font",cache:!1,extension:w,responseType:"text",key:m,url:v,xhrSettings:C};f.call(this,p,M),this.data={format:y,descriptors:E},this.state=g.FILE_POPULATED},onProcess:function(){this.state=g.FILE_PROCESSING,this.src=r(this,this.loader.baseURL);var l,p=this.key,m="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?l=new FontFace(p,m,this.data.descriptors):l=new FontFace(p,m);var v=this;l.load().then(function(){document.fonts.add(l),document.body.classList.add("fonts-loaded"),v.onProcessComplete()}).catch(function(){console.warn("Font failed to load",m),v.onProcessComplete()})}});o.register("font",function(l,p,m,v,y){if(Array.isArray(l))for(var E=0;E<l.length;E++)this.addFile(new c(this,l[E]));else this.addFile(new c(this,l,p,m,v,y));return this}),s.exports=c}),47931:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=e(73894),c=new a({Extends:f,initialize:function(p,m,v,y,E){var C="glsl";if(r(m)){var w=m;m=u(w,"key"),v=u(w,"url"),y=u(w,"shaderType","fragment"),E=u(w,"xhrSettings"),C=u(w,"extension",C)}else y===void 0&&(y="fragment");var A={type:"glsl",cache:p.cacheManager.shader,extension:C,responseType:"text",key:m,url:v,config:{shaderType:y},xhrSettings:E};f.call(this,p,A)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.split(`
`),p=this.extractBlock(l,0);if(p)for(;p;){var m=this.getShaderName(p.header),v=this.getShaderType(p.header),y=this.getShaderUniforms(p.header),E=p.shader;if(this.cache.has(m)){var C=this.cache.get(m);v==="fragment"?C.fragmentSrc=E:C.vertexSrc=E,C.uniforms||(C.uniforms=y)}else v==="fragment"?this.cache.add(m,new h(m,E,"",y)):this.cache.add(m,new h(m,"",E,y));p=this.extractBlock(l,p.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new h(this.key,this.data)):this.cache.add(this.key,new h(this.key,"",this.data))},getShaderName:function(l){for(var p=0;p<l.length;p++){var m=l[p].trim();if(m.substring(0,5)==="name:")return m.substring(5).trim()}return this.key},getShaderType:function(l){for(var p=0;p<l.length;p++){var m=l[p].trim();if(m.substring(0,5)==="type:")return m.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(l){for(var p={},m=0;m<l.length;m++){var v=l[m].trim();if(v.substring(0,8)==="uniform."){var y=v.indexOf(":");if(y){var E=v.substring(8,y);try{p[E]=JSON.parse(v.substring(y+1))}catch{console.warn("Invalid uniform JSON: "+E)}}}}return p},extractBlock:function(l,p){for(var m=-1,v=-1,y=-1,E=!1,C=!1,w=[],A=[],M=p;M<l.length;M++){var R=l[M].trim();if(R==="---")if(m===-1)m=M,E=!0;else if(E)v=M,E=!1,C=!0;else{C=!1;break}else E?w.push(R):C&&(A.push(R),y=M)}return!E&&v!==-1?{header:w,shader:A.join(`
`),offset:y}:null}});o.register("glsl",function(l,p,m,v){if(Array.isArray(l))for(var y=0;y<l.length;y++)this.addFile(new c(this,l[y]));else this.addFile(new c(this,l,p,m,v));return this}),s.exports=c}),89749:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(54899),f=e(41299),o=e(95540),u=e(98356),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v){if(r(p)){var y=p;p=o(y,"key"),v=o(y,"config",v)}var E={type:"audio",cache:l.cacheManager.audio,extension:m.type,key:p,url:m.url,config:v};f.call(this,l,E),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var l=this.data[c];l.oncanplaythrough=null,l.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var l=c.target;l.oncanplaythrough=null,l.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(g.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var l=0;l<c;l++){var p=new Audio;p.dataset||(p.dataset={}),p.dataset.name=this.key+("0"+l).slice(-2),p.dataset.used="false",this.locked?p.dataset.locked="true":(p.dataset.locked="false",p.preload="auto",p.oncanplaythrough=this.onProgress.bind(this),p.onerror=this.onError.bind(this)),this.data.push(p)}for(l=0;l<this.data.length;l++)p=this.data[l],p.src=u(this,this.loader.baseURL),this.locked||p.load();this.locked&&setTimeout(this.onLoad.bind(this))}});s.exports=h}),88470:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v){var y="html";if(r(p)){var E=p;p=u(E,"key"),m=u(E,"url"),v=u(E,"xhrSettings"),y=u(E,"extension",y)}var C={type:"text",cache:l.cacheManager.html,extension:y,responseType:"text",key:p,url:m,xhrSettings:v};f.call(this,l,C)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(c,l,p){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new h(this,c[m]));else this.addFile(new h(this,c,l,p));return this}),s.exports=h}),14643:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v,y,E){v===void 0&&(v=512),y===void 0&&(y=512);var C="html";if(r(p)){var w=p;p=u(w,"key"),m=u(w,"url"),E=u(w,"xhrSettings"),C=u(w,"extension",C),v=u(w,"width",v),y=u(w,"height",y)}var A={type:"html",cache:l.textureManager,extension:C,responseType:"text",key:p,url:m,xhrSettings:E,config:{width:v,height:y}};f.call(this,l,A)},onProcess:function(){this.state=g.FILE_PROCESSING;var c=this.config.width,l=this.config.height,p=[];p.push('<svg width="'+c+'px" height="'+l+'px" viewBox="0 0 '+c+" "+l+'" xmlns="http://www.w3.org/2000/svg">'),p.push('<foreignObject width="100%" height="100%">'),p.push('<body xmlns="http://www.w3.org/1999/xhtml">'),p.push(this.xhrLoader.responseText),p.push("</body>"),p.push("</foreignObject>"),p.push("</svg>");var m=[p.join(`
`)],v=this;try{var y=new window.Blob(m,{type:"image/svg+xml;charset=utf-8"})}catch{v.state=g.FILE_ERRORED,v.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){f.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){f.revokeObjectURL(v.data),v.onProcessError()},f.createObjectURL(this.data,y,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});o.register("htmlTexture",function(c,l,p,m,v){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new h(this,c[y]));else this.addFile(new h(this,c,l,p,m,v));return this}),s.exports=h}),19550:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=e(98356),c=new a({Extends:f,initialize:function l(p,m,v,y,E){var C="png",w;if(r(m)){var A=m;m=u(A,"key"),v=u(A,"url"),w=u(A,"normalMap"),y=u(A,"xhrSettings"),C=u(A,"extension",C),E=u(A,"frameConfig")}Array.isArray(v)&&(w=v[1],v=v[0]);var M={type:"image",cache:p.textureManager,extension:C,responseType:"blob",key:m,url:v,xhrSettings:y,config:E};if(f.call(this,p,M),w){var R=new l(p,this.key,w,y,E);R.type="normalMap",this.setLink(R),p.addFile(R)}this.useImageElementLoad=p.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){f.revokeObjectURL(l.data),l.onProcessComplete()},this.data.onerror=function(){f.revokeObjectURL(l.data),l.onProcessError()},f.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var l=this.state;this.state=g.FILE_PROCESSING,l===g.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=g.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){l.state=g.FILE_LOADED,l.loader.nextFile(l,!0)},this.data.onerror=function(){l.loader.nextFile(l,!1)},this.data.src=this.src},addToCache:function(){var l=this.linkFile;l?l.state>=g.FILE_COMPLETE&&(l.type==="spritesheet"?l.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,l.data,this.data):this.cache.addImage(this.key,this.data,l.data)):this.cache.addImage(this.key,this.data)}});o.register("image",function(l,p,m){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new c(this,l[v]));else this.addFile(new c(this,l,p,m));return this}),s.exports=c}),518:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(35154),h=e(41212),c=new a({Extends:f,initialize:function(p,m,v,y,E){var C="json";if(h(m)){var w=m;m=u(w,"key"),v=u(w,"url"),y=u(w,"xhrSettings"),C=u(w,"extension",C),E=u(w,"dataKey",E)}var A={type:"json",cache:p.cacheManager.json,extension:C,responseType:"text",key:m,url:v,xhrSettings:y,config:E};f.call(this,p,A),h(v)&&(E?this.data=r(v,E):this.data=v,this.state=g.FILE_POPULATED)},onProcess:function(){if(this.state!==g.FILE_POPULATED){this.state=g.FILE_PROCESSING;try{var l=JSON.parse(this.xhrLoader.responseText)}catch(m){throw this.onProcessError(),m}var p=this.config;typeof p=="string"?this.data=r(l,p,l):this.data=l}this.onProcessComplete()}});o.register("json",function(l,p,m,v){if(Array.isArray(l))for(var y=0;y<l.length;y++)this.addFile(new c(this,l[y]));else this.addFile(new c(this,l,p,v,m));return this}),s.exports=c}),59327:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(95540),o=e(19550),u=e(41212),r=e(518),h=e(26430),c=new a({Extends:h,initialize:function(p,m,v,y,E,C,w){if(u(m)){var A=m;m=f(A,"key"),f(A,"url",!1)?v=f(A,"url"):v=f(A,"atlasURL"),C=f(A,"xhrSettings"),y=f(A,"path"),E=f(A,"baseURL"),w=f(A,"textureXhrSettings")}var M=new r(p,m,v,C);h.call(this,p,"multiatlas",m,[M]),this.config.path=y,this.config.baseURL=E,this.config.textureXhrSettings=w},onFileComplete:function(l){var p=this.files.indexOf(l);if(p!==-1&&(this.pending--,l.type==="json"&&l.data.hasOwnProperty("textures"))){var m=l.data.textures,v=this.config,y=this.loader,E=y.baseURL,C=y.path,w=y.prefix,A=f(v,"baseURL",this.baseURL),M=f(v,"path",this.path),R=f(v,"prefix",this.prefix),P=f(v,"textureXhrSettings");y.setBaseURL(A),y.setPath(M),y.setPrefix(R);for(var b=0;b<m.length;b++){var F=m[b].image,I="MA"+this.multiKeyIndex+"_"+F,L=new o(y,I,F,P);if(this.addToMultiFile(L),y.addFile(L),m[b].normalMap){var D=new o(y,I,m[b].normalMap,P);D.type="normalMap",L.setLink(D),this.addToMultiFile(D),y.addFile(D)}}y.setBaseURL(E),y.setPath(C),y.setPrefix(w)}},addToCache:function(){if(this.isReadyToProcess()){for(var l=this.files[0],p=[],m=[],v=[],y=1;y<this.files.length;y++){var E=this.files[y];if(E.type!=="normalMap")for(var C=E.key.indexOf("_"),w=E.key.substr(C+1),A=E.data,M=0;M<l.data.textures.length;M++){var R=l.data.textures[M];if(R.image===w){m.push(A),p.push(R),E.linkFile&&v.push(E.linkFile.data);break}}}v.length===0&&(v=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,m,p,v),this.complete=!0}}});g.register("multiatlas",function(l,p,m,v,y){var E;if(Array.isArray(l))for(var C=0;C<l.length;C++)E=new c(this,l[C]),this.addFile(E.files);else E=new c(this,l,p,m,v,y),this.addFile(E.files);return this}),s.exports=c}),99297:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(95540),o=e(41212),u=e(26430),r=e(34328),h=new a({Extends:u,initialize:function(l,p,m,v){var y="js",E=[];if(o(p)){var C=p;p=f(C,"key"),m=f(C,"url"),v=f(C,"xhrSettings"),y=f(C,"extension",y)}Array.isArray(m)||(m=[m]);for(var w=0;w<m.length;w++){var A=new r(l,{key:p+"_"+w.toString(),url:m[w],extension:y,xhrSettings:v});A.onProcess=function(){this.onProcessComplete()},E.push(A)}u.call(this,l,"scripts",p,E)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var l=this.files[c];l.data=document.createElement("script"),l.data.language="javascript",l.data.type="text/javascript",l.data.defer=!1,l.data.text=l.xhrLoader.responseText,document.head.appendChild(l.data)}this.complete=!0}}});g.register("scripts",function(c,l,p){var m;if(Array.isArray(c))for(var v=0;v<c.length;v++)m=new h(this,c[v]),this.addFile(m.files);else m=new h(this,c,l,p),this.addFile(m.files);return this}),s.exports=h}),41846:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(95540),o=e(41212),u=e(26430),r=e(85048),h=e(61485),c=e(78776),l=new a({Extends:u,initialize:function(m,v,y,E,C,w){var A,M,R=m.cacheManager.obj;if(o(v)){var P=v;v=f(P,"key"),A=new c(m,{key:v,type:"obj",cache:R,url:f(P,"url"),extension:f(P,"extension","obj"),xhrSettings:f(P,"xhrSettings"),config:{flipUV:f(P,"flipUV",C)}}),E=f(P,"matURL"),E&&(M=new c(m,{key:v,type:"mat",cache:R,url:E,extension:f(P,"matExtension","mat"),xhrSettings:f(P,"xhrSettings")}))}else A=new c(m,{key:v,url:y,type:"obj",cache:R,extension:"obj",xhrSettings:w,config:{flipUV:C}}),E&&(M=new c(m,{key:v,url:E,type:"mat",cache:R,extension:"mat",xhrSettings:w}));u.call(this,m,"obj",v,[A,M])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],m=this.files[1],v=r(p.data,p.config.flipUV);m&&(v.materials=h(m.data)),p.cache.add(p.key,v),this.complete=!0}}});g.register("obj",function(p,m,v,y,E){var C;if(Array.isArray(p))for(var w=0;w<p.length;w++)C=new l(this,p[w]),this.addFile(C.files);else C=new l(this,p,m,v,y,E),this.addFile(C.files);return this}),s.exports=l}),58610:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(74099),o=e(518),u=new a({Extends:o,initialize:function(h,c,l,p,m){o.call(this,h,c,l,p,m),this.type="packfile"},onProcess:function(){if(this.state!==g.FILE_POPULATED&&(this.state=g.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var r={};r[this.config]=this.data,this.data=r}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});f.register("pack",function(r,h,c,l){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new u(this,r[p]));else this.addFile(new u(this,r,h,l,c));return this}),s.exports=u}),48988:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v,y,E){var C="js";if(r(p)){var w=p;p=u(w,"key"),m=u(w,"url"),E=u(w,"xhrSettings"),C=u(w,"extension",C),v=u(w,"start"),y=u(w,"mapping")}var A={type:"plugin",cache:!1,extension:C,responseType:"text",key:p,url:m,xhrSettings:E,config:{start:v,mapping:y}};f.call(this,l,A),typeof m=="function"&&(this.data=m,this.state=g.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,l=this.config,p=u(l,"start",!1),m=u(l,"mapping",null);if(this.state===g.FILE_POPULATED)c.install(this.key,this.data,p,m);else{this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var v=c.install(this.key,window[this.key],p,m);(p||m)&&(this.loader.systems[m]=v,this.loader.scene[m]=v)}this.onProcessComplete()}});o.register("plugin",function(c,l,p,m,v){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new h(this,c[y]));else this.addFile(new h(this,c,l,p,m,v));return this}),s.exports=h}),67397:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v,y){var E="svg";if(r(p)){var C=p;p=u(C,"key"),m=u(C,"url"),v=u(C,"svgConfig",{}),y=u(C,"xhrSettings"),E=u(C,"extension",E)}var w={type:"svg",cache:l.textureManager,extension:E,responseType:"text",key:p,url:m,xhrSettings:y,config:{width:u(v,"width"),height:u(v,"height"),scale:u(v,"scale")}};f.call(this,l,w)},onProcess:function(){this.state=g.FILE_PROCESSING;var c=this.xhrLoader.responseText,l=[c],p=this.config.width,m=this.config.height,v=this.config.scale;t:if(p&&m||v){var y=null,E=new DOMParser;y=E.parseFromString(c,"text/xml");var C=y.getElementsByTagName("svg")[0],w=C.hasAttribute("viewBox"),A=parseFloat(C.getAttribute("width")),M=parseFloat(C.getAttribute("height"));if(!w&&A&&M)C.setAttribute("viewBox","0  0 "+A+" "+M);else if(w&&!A&&!M){var R=C.getAttribute("viewBox").split(/\s+|,/);A=R[2],M=R[3]}if(v)if(A&&M)p=A*v,m=M*v;else break t;C.setAttribute("width",p.toString()+"px"),C.setAttribute("height",m.toString()+"px"),l=[new XMLSerializer().serializeToString(C)]}try{var P=new window.Blob(l,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var b=this,F=!1;this.data.onload=function(){F||f.revokeObjectURL(b.data),b.onProcessComplete()},this.data.onerror=function(){F?b.onProcessError():(F=!0,f.revokeObjectURL(b.data),b.data.src="data:image/svg+xml,"+encodeURIComponent(l.join("")))},f.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});o.register("svg",function(c,l,p,m){if(Array.isArray(c))for(var v=0;v<c.length;v++)this.addFile(new h(this,c[v]));else this.addFile(new h(this,c,l,p,m));return this}),s.exports=h}),88423:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v){var y="js";if(r(p)){var E=p;p=u(E,"key"),m=u(E,"url"),v=u(E,"xhrSettings"),y=u(E,"extension",y)}var C={type:"text",extension:y,responseType:"text",key:p,url:m,xhrSettings:v};f.call(this,l,C)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),l=eval;this.loader.sceneManager.add(this.key,l(c)),this.complete=!0}});o.register("sceneFile",function(c,l,p){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new h(this,c[m]));else this.addFile(new h(this,c,l,p));return this}),s.exports=h}),56812:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v,y,E){var C="js";if(r(p)){var w=p;p=u(w,"key"),m=u(w,"url"),E=u(w,"xhrSettings"),C=u(w,"extension",C),v=u(w,"systemKey"),y=u(w,"sceneKey")}var A={type:"scenePlugin",cache:!1,extension:C,responseType:"text",key:p,url:m,xhrSettings:E,config:{systemKey:v,sceneKey:y}};f.call(this,l,A),typeof m=="function"&&(this.data=m,this.state=g.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,l=this.config,p=this.key,m=u(l,"systemKey",p),v=u(l,"sceneKey",p);this.state===g.FILE_POPULATED?c.installScenePlugin(m,this.data,v,this.loader.scene,!0):(this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(m,window[this.key],v,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(c,l,p,m,v){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new h(this,c[y]));else this.addFile(new h(this,c,l,p,m,v));return this}),s.exports=h}),34328:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v,y){var E="js";if(r(p)){var C=p;p=u(C,"key"),m=u(C,"url"),v=u(C,"type","script"),y=u(C,"xhrSettings"),E=u(C,"extension",E)}else v===void 0&&(v="script");var w={type:v,cache:!1,extension:E,responseType:"text",key:p,url:m,xhrSettings:y};f.call(this,l,w)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(c,l,p,m){if(Array.isArray(c))for(var v=0;v<c.length;v++)this.addFile(new h(this,c[v]));else this.addFile(new h(this,c,l,p,m));return this}),s.exports=h}),85035:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(74099),o=e(19550),u=new a({Extends:o,initialize:function(h,c,l,p,m){o.call(this,h,c,l,m,p),this.type="spritesheet"},addToCache:function(){var r=this.linkFile;r?r.state>=g.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,r.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,r.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});f.register("spritesheet",function(r,h,c,l){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new u(this,r[p]));else this.addFile(new u(this,r,h,c,l));return this}),s.exports=u}),78776:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:f,initialize:function(l,p,m,v){var y="text",E="txt",C=l.cacheManager.text;if(r(p)){var w=p;p=u(w,"key"),m=u(w,"url"),v=u(w,"xhrSettings"),E=u(w,"extension",E),y=u(w,"type",y),C=u(w,"cache",C)}var A={type:y,cache:C,extension:E,responseType:"text",key:p,url:m,xhrSettings:v};f.call(this,l,A)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(c,l,p){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new h(this,c[m]));else this.addFile(new h(this,c,l,p));return this}),s.exports=h}),49477:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=e(80341),c=new a({Extends:f,initialize:function(p,m,v,y){var E="csv";if(r(m)){var C=m;m=u(C,"key"),v=u(C,"url"),y=u(C,"xhrSettings"),E=u(C,"extension",E)}var w={type:"tilemapCSV",cache:p.cacheManager.tilemap,extension:E,responseType:"text",key:m,url:v,xhrSettings:y};f.call(this,p,w),this.tilemapFormat=h.CSV},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,l)}});o.register("tilemapCSV",function(l,p,m){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new c(this,l[v]));else this.addFile(new c(this,l,p,m));return this}),s.exports=c}),40807:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(518),o=e(80341),u=new a({Extends:f,initialize:function(h,c,l,p){f.call(this,h,c,l,p),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var r={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,r)}});g.register("tilemapImpact",function(r,h,c){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new u(this,r[l]));else this.addFile(new u(this,r,h,c));return this}),s.exports=u}),56775:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(518),o=e(80341),u=new a({Extends:f,initialize:function(h,c,l,p){f.call(this,h,c,l,p),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var r={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,r)}});g.register("tilemapTiledJSON",function(r,h,c){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new u(this,r[l]));else this.addFile(new u(this,r,h,c));return this}),s.exports=u}),25771:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(74099),f=e(95540),o=e(19550),u=e(41212),r=e(26430),h=e(78776),c=new a({Extends:r,initialize:function(p,m,v,y,E,C){var w,A;if(u(m)){var M=m;m=f(M,"key"),w=new o(p,{key:m,url:f(M,"textureURL"),extension:f(M,"textureExtension","png"),normalMap:f(M,"normalMap"),xhrSettings:f(M,"textureXhrSettings")}),A=new h(p,{key:m,url:f(M,"atlasURL"),extension:f(M,"atlasExtension","txt"),xhrSettings:f(M,"atlasXhrSettings")})}else w=new o(p,m,v,E),A=new h(p,m,y,C);w.linkFile?r.call(this,p,"unityatlas",m,[w,A,w.linkFile]):r.call(this,p,"unityatlas",m,[w,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(l.key,l.data,p.data,m),this.complete=!0}}});g.register("unityAtlas",function(l,p,m,v,y){var E;if(Array.isArray(l))for(var C=0;C<l.length;C++)E=new c(this,l[C]),this.addFile(E.files);else E=new c(this,l,p,m,v,y),this.addFile(E.files);return this}),s.exports=c}),33720:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(98356),r=e(95540),h=e(41212),c=new a({Extends:f,initialize:function(p,m,v,y){if(y===void 0&&(y=!1),h(m)){var E=m;m=r(E,"key"),v=r(E,"url",[]),y=r(E,"noAudio",!1)}var C=p.systems.game.device.video.getVideoURL(v);C||console.warn("VideoFile: No supported format for "+m);var w={type:"video",cache:p.cacheManager.video,extension:C.type,key:m,url:C.url,config:{noAudio:y}};f.call(this,p,w)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=u(this,this.loader.baseURL),this.state=g.FILE_LOADED,this.loader.nextFile(this,!0)}});o.register("video",function(l,p,m){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new c(this,l[v]));else this.addFile(new c(this,l,p,m));return this}),s.exports=c}),57318:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(23906),f=e(41299),o=e(74099),u=e(95540),r=e(41212),h=e(56836),c=new a({Extends:f,initialize:function(p,m,v,y){var E="xml";if(r(m)){var C=m;m=u(C,"key"),v=u(C,"url"),y=u(C,"xhrSettings"),E=u(C,"extension",E)}var w={type:"xml",cache:p.cacheManager.xml,extension:E,responseType:"text",key:m,url:v,xhrSettings:y};f.call(this,p,w)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=h(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});o.register("xml",function(l,p,m){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new c(this,l[v]));else this.addFile(new c(this,l,p,m));return this}),s.exports=c}),64589:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AnimationJSONFile:e(14135),AsepriteFile:e(76272),AtlasJSONFile:e(38734),AtlasXMLFile:e(74599),AudioFile:e(21097),AudioSpriteFile:e(89524),BinaryFile:e(85722),BitmapFontFile:e(97025),CompressedTextureFile:e(69559),CSSFile:e(16024),FontFile:e(87674),GLSLFile:e(47931),HTML5AudioFile:e(89749),HTMLFile:e(88470),HTMLTextureFile:e(14643),ImageFile:e(19550),JSONFile:e(518),MultiAtlasFile:e(59327),MultiScriptFile:e(99297),OBJFile:e(41846),PackFile:e(58610),PluginFile:e(48988),SceneFile:e(88423),ScenePluginFile:e(56812),ScriptFile:e(34328),SpriteSheetFile:e(85035),SVGFile:e(67397),TextFile:e(78776),TilemapCSVFile:e(49477),TilemapImpactFile:e(40807),TilemapJSONFile:e(56775),UnityAtlasFile:e(25771),VideoFile:e(33720),XMLFile:e(57318)}}),57777:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23906),g=e(79291),f={Events:e(54899),FileTypes:e(64589),File:e(41299),FileTypesManager:e(74099),GetURL:e(98356),LoaderPlugin:e(74261),MergeXHRSettings:e(3374),MultiFile:e(26430),XHRLoader:e(84376),XHRSettings:e(92638)};f=g(!1,f,a),s.exports=f}),53307:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=0,g=0;g<e.length;g++)a+=+e[g];return a/e.length};s.exports=T}),85710:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6411),g=function(f,o){return a(f)/a(o)/a(f-o)};s.exports=g}),30976:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.floor(Math.random()*(a-e+1)+e)};s.exports=T}),87842:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o){var u=(f-a)*.5,r=(o-g)*.5,h=e*e,c=e*h;return(2*g-2*f+u+r)*c+(-3*g+3*f-2*u-r)*h+u*e+g};s.exports=T}),26302:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){a===void 0&&(a=0),g===void 0&&(g=10);var f=Math.pow(g,-a);return Math.ceil(e*f)/f};s.exports=T}),45319:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return Math.max(a,Math.min(g,e))};s.exports=T}),39506:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=function(f){return f*a.DEG_TO_RAD};s.exports=g}),61241:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.abs(e-a)};s.exports=T}),38857:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(37867),o=e(29747),u=new f,r=new g({initialize:function h(c,l,p,m){c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m=h.DefaultOrder),this._x=c,this._y=l,this._z=p,this._order=m,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(h){this._x=h,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(h){this._y=h,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(h){this._z=h,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(h){this._order=h,this.onChangeCallback(this)}},set:function(h,c,l,p){return p===void 0&&(p=this._order),this._x=h,this._y=c,this._z=l,this._order=p,this.onChangeCallback(this),this},copy:function(h){return this.set(h.x,h.y,h.z,h.order)},setFromQuaternion:function(h,c,l){return c===void 0&&(c=this._order),l===void 0&&(l=!1),u.fromQuat(h),this.setFromRotationMatrix(u,c,l)},setFromRotationMatrix:function(h,c,l){c===void 0&&(c=this._order),l===void 0&&(l=!1);var p=h.val,m=p[0],v=p[4],y=p[8],E=p[1],C=p[5],w=p[9],A=p[2],M=p[6],R=p[10],P=0,b=0,F=0,I=.99999;switch(c){case"XYZ":{b=Math.asin(a(y,-1,1)),Math.abs(y)<I?(P=Math.atan2(-w,R),F=Math.atan2(-v,m)):P=Math.atan2(M,C);break}case"YXZ":{P=Math.asin(-a(w,-1,1)),Math.abs(w)<I?(b=Math.atan2(y,R),F=Math.atan2(E,C)):b=Math.atan2(-A,m);break}case"ZXY":{P=Math.asin(a(M,-1,1)),Math.abs(M)<I?(b=Math.atan2(-A,R),F=Math.atan2(-v,C)):F=Math.atan2(E,m);break}case"ZYX":{b=Math.asin(-a(A,-1,1)),Math.abs(A)<I?(P=Math.atan2(M,R),F=Math.atan2(E,m)):F=Math.atan2(-v,C);break}case"YZX":{F=Math.asin(a(E,-1,1)),Math.abs(E)<I?(P=Math.atan2(-w,C),b=Math.atan2(-A,m)):b=Math.atan2(y,R);break}case"XZY":{F=Math.asin(-a(v,-1,1)),Math.abs(v)<I?(P=Math.atan2(M,C),b=Math.atan2(y,m)):P=Math.atan2(-w,R);break}}return this._x=P,this._y=b,this._z=F,this._order=c,l&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",s.exports=r}),6411:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(e===0)return 1;for(var a=e;--e;)a*=e;return a};s.exports=T}),99472:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.random()*(a-e)+e};s.exports=T}),77623:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){a===void 0&&(a=0),g===void 0&&(g=10);var f=Math.pow(g,-a);return Math.floor(e*f)/f};s.exports=T}),62945:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=function(f,o,u){return f=a(f,0,1),(u-o)*f+o};s.exports=g}),38265:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e/a/1e3};s.exports=T}),78702:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e==parseFloat(e)?!(e%2):void 0};s.exports=T}),94883:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===parseFloat(e)?!(e%2):void 0};s.exports=T}),28915:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return(a-e)*g+e};s.exports=T}),94908:(s=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return g===void 0&&(g=0),e.clone().lerp(a,g)};s.exports=T}),94434:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new g(this)},set:function(f){return this.copy(f)},copy:function(f){var o=this.val,u=f.val;return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],this},fromMat4:function(f){var o=f.val,u=this.val;return u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[4],u[4]=o[5],u[5]=o[6],u[6]=o[8],u[7]=o[9],u[8]=o[10],this},fromArray:function(f){var o=this.val;return o[0]=f[0],o[1]=f[1],o[2]=f[2],o[3]=f[3],o[4]=f[4],o[5]=f[5],o[6]=f[6],o[7]=f[7],o[8]=f[8],this},identity:function(){var f=this.val;return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,this},transpose:function(){var f=this.val,o=f[1],u=f[2],r=f[5];return f[1]=f[3],f[2]=f[6],f[3]=o,f[5]=f[7],f[6]=u,f[7]=r,this},invert:function(){var f=this.val,o=f[0],u=f[1],r=f[2],h=f[3],c=f[4],l=f[5],p=f[6],m=f[7],v=f[8],y=v*c-l*m,E=-v*h+l*p,C=m*h-c*p,w=o*y+u*E+r*C;return w?(w=1/w,f[0]=y*w,f[1]=(-v*u+r*m)*w,f[2]=(l*u-r*c)*w,f[3]=E*w,f[4]=(v*o-r*p)*w,f[5]=(-l*o+r*h)*w,f[6]=C*w,f[7]=(-m*o+u*p)*w,f[8]=(c*o-u*h)*w,this):null},adjoint:function(){var f=this.val,o=f[0],u=f[1],r=f[2],h=f[3],c=f[4],l=f[5],p=f[6],m=f[7],v=f[8];return f[0]=c*v-l*m,f[1]=r*m-u*v,f[2]=u*l-r*c,f[3]=l*p-h*v,f[4]=o*v-r*p,f[5]=r*h-o*l,f[6]=h*m-c*p,f[7]=u*p-o*m,f[8]=o*c-u*h,this},determinant:function(){var f=this.val,o=f[0],u=f[1],r=f[2],h=f[3],c=f[4],l=f[5],p=f[6],m=f[7],v=f[8];return o*(v*c-l*m)+u*(-v*h+l*p)+r*(m*h-c*p)},multiply:function(f){var o=this.val,u=o[0],r=o[1],h=o[2],c=o[3],l=o[4],p=o[5],m=o[6],v=o[7],y=o[8],E=f.val,C=E[0],w=E[1],A=E[2],M=E[3],R=E[4],P=E[5],b=E[6],F=E[7],I=E[8];return o[0]=C*u+w*c+A*m,o[1]=C*r+w*l+A*v,o[2]=C*h+w*p+A*y,o[3]=M*u+R*c+P*m,o[4]=M*r+R*l+P*v,o[5]=M*h+R*p+P*y,o[6]=b*u+F*c+I*m,o[7]=b*r+F*l+I*v,o[8]=b*h+F*p+I*y,this},translate:function(f){var o=this.val,u=f.x,r=f.y;return o[6]=u*o[0]+r*o[3]+o[6],o[7]=u*o[1]+r*o[4]+o[7],o[8]=u*o[2]+r*o[5]+o[8],this},rotate:function(f){var o=this.val,u=o[0],r=o[1],h=o[2],c=o[3],l=o[4],p=o[5],m=Math.sin(f),v=Math.cos(f);return o[0]=v*u+m*c,o[1]=v*r+m*l,o[2]=v*h+m*p,o[3]=v*c-m*u,o[4]=v*l-m*r,o[5]=v*p-m*h,this},scale:function(f){var o=this.val,u=f.x,r=f.y;return o[0]=u*o[0],o[1]=u*o[1],o[2]=u*o[2],o[3]=r*o[3],o[4]=r*o[4],o[5]=r*o[5],this},fromQuat:function(f){var o=f.x,u=f.y,r=f.z,h=f.w,c=o+o,l=u+u,p=r+r,m=o*c,v=o*l,y=o*p,E=u*l,C=u*p,w=r*p,A=h*c,M=h*l,R=h*p,P=this.val;return P[0]=1-(E+w),P[3]=v+R,P[6]=y-M,P[1]=v-R,P[4]=1-(m+w),P[7]=C+A,P[2]=y+M,P[5]=C-A,P[8]=1-(m+E),this},normalFromMat4:function(f){var o=f.val,u=this.val,r=o[0],h=o[1],c=o[2],l=o[3],p=o[4],m=o[5],v=o[6],y=o[7],E=o[8],C=o[9],w=o[10],A=o[11],M=o[12],R=o[13],P=o[14],b=o[15],F=r*m-h*p,I=r*v-c*p,L=r*y-l*p,D=h*v-c*m,O=h*y-l*m,z=c*y-l*v,_=E*R-C*M,X=E*P-w*M,H=E*b-A*M,U=C*P-w*R,G=C*b-A*R,N=w*b-A*P,W=F*N-I*G+L*U+D*H-O*X+z*_;return W?(W=1/W,u[0]=(m*N-v*G+y*U)*W,u[1]=(v*H-p*N-y*X)*W,u[2]=(p*G-m*H+y*_)*W,u[3]=(c*G-h*N-l*U)*W,u[4]=(r*N-c*H+l*X)*W,u[5]=(h*H-r*G-l*_)*W,u[6]=(R*z-P*O+b*D)*W,u[7]=(P*L-M*z-b*I)*W,u[8]=(M*O-R*L+b*F)*W,this):null}});s.exports=g}),37867:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(25836),f=1e-6,o=new a({initialize:function(m){this.val=new Float32Array(16),m?this.copy(m):this.identity()},clone:function(){return new o(this)},set:function(p){return this.copy(p)},setValues:function(p,m,v,y,E,C,w,A,M,R,P,b,F,I,L,D){var O=this.val;return O[0]=p,O[1]=m,O[2]=v,O[3]=y,O[4]=E,O[5]=C,O[6]=w,O[7]=A,O[8]=M,O[9]=R,O[10]=P,O[11]=b,O[12]=F,O[13]=I,O[14]=L,O[15]=D,this},copy:function(p){var m=p.val;return this.setValues(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15])},fromArray:function(p){return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(p,m,v){var y=u.fromQuat(v),E=y.val,C=m.x,w=m.y,A=m.z;return this.setValues(E[0]*C,E[1]*C,E[2]*C,0,E[4]*w,E[5]*w,E[6]*w,0,E[8]*A,E[9]*A,E[10]*A,0,p.x,p.y,p.z,1)},xyz:function(p,m,v){this.identity();var y=this.val;return y[12]=p,y[13]=m,y[14]=v,this},scaling:function(p,m,v){this.zero();var y=this.val;return y[0]=p,y[5]=m,y[10]=v,y[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var p=this.val,m=p[1],v=p[2],y=p[3],E=p[6],C=p[7],w=p[11];return p[1]=p[4],p[2]=p[8],p[3]=p[12],p[4]=m,p[6]=p[9],p[7]=p[13],p[8]=v,p[9]=E,p[11]=p[14],p[12]=y,p[13]=C,p[14]=w,this},getInverse:function(p){return this.copy(p),this.invert()},invert:function(){var p=this.val,m=p[0],v=p[1],y=p[2],E=p[3],C=p[4],w=p[5],A=p[6],M=p[7],R=p[8],P=p[9],b=p[10],F=p[11],I=p[12],L=p[13],D=p[14],O=p[15],z=m*w-v*C,_=m*A-y*C,X=m*M-E*C,H=v*A-y*w,U=v*M-E*w,G=y*M-E*A,N=R*L-P*I,W=R*D-b*I,V=R*O-F*I,$=P*D-b*L,j=P*O-F*L,k=b*O-F*D,Q=z*k-_*j+X*$+H*V-U*W+G*N;return Q?(Q=1/Q,this.setValues((w*k-A*j+M*$)*Q,(y*j-v*k-E*$)*Q,(L*G-D*U+O*H)*Q,(b*U-P*G-F*H)*Q,(A*V-C*k-M*W)*Q,(m*k-y*V+E*W)*Q,(D*X-I*G-O*_)*Q,(R*G-b*X+F*_)*Q,(C*j-w*V+M*N)*Q,(v*V-m*j-E*N)*Q,(I*U-L*X+O*z)*Q,(P*X-R*U-F*z)*Q,(w*W-C*$-A*N)*Q,(m*$-v*W+y*N)*Q,(L*_-I*H-D*z)*Q,(R*H-P*_+b*z)*Q)):this},adjoint:function(){var p=this.val,m=p[0],v=p[1],y=p[2],E=p[3],C=p[4],w=p[5],A=p[6],M=p[7],R=p[8],P=p[9],b=p[10],F=p[11],I=p[12],L=p[13],D=p[14],O=p[15];return this.setValues(w*(b*O-F*D)-P*(A*O-M*D)+L*(A*F-M*b),-(v*(b*O-F*D)-P*(y*O-E*D)+L*(y*F-E*b)),v*(A*O-M*D)-w*(y*O-E*D)+L*(y*M-E*A),-(v*(A*F-M*b)-w*(y*F-E*b)+P*(y*M-E*A)),-(C*(b*O-F*D)-R*(A*O-M*D)+I*(A*F-M*b)),m*(b*O-F*D)-R*(y*O-E*D)+I*(y*F-E*b),-(m*(A*O-M*D)-C*(y*O-E*D)+I*(y*M-E*A)),m*(A*F-M*b)-C*(y*F-E*b)+R*(y*M-E*A),C*(P*O-F*L)-R*(w*O-M*L)+I*(w*F-M*P),-(m*(P*O-F*L)-R*(v*O-E*L)+I*(v*F-E*P)),m*(w*O-M*L)-C*(v*O-E*L)+I*(v*M-E*w),-(m*(w*F-M*P)-C*(v*F-E*P)+R*(v*M-E*w)),-(C*(P*D-b*L)-R*(w*D-A*L)+I*(w*b-A*P)),m*(P*D-b*L)-R*(v*D-y*L)+I*(v*b-y*P),-(m*(w*D-A*L)-C*(v*D-y*L)+I*(v*A-y*w)),m*(w*b-A*P)-C*(v*b-y*P)+R*(v*A-y*w))},determinant:function(){var p=this.val,m=p[0],v=p[1],y=p[2],E=p[3],C=p[4],w=p[5],A=p[6],M=p[7],R=p[8],P=p[9],b=p[10],F=p[11],I=p[12],L=p[13],D=p[14],O=p[15],z=m*w-v*C,_=m*A-y*C,X=m*M-E*C,H=v*A-y*w,U=v*M-E*w,G=y*M-E*A,N=R*L-P*I,W=R*D-b*I,V=R*O-F*I,$=P*D-b*L,j=P*O-F*L,k=b*O-F*D;return z*k-_*j+X*$+H*V-U*W+G*N},multiply:function(p){var m=this.val,v=m[0],y=m[1],E=m[2],C=m[3],w=m[4],A=m[5],M=m[6],R=m[7],P=m[8],b=m[9],F=m[10],I=m[11],L=m[12],D=m[13],O=m[14],z=m[15],_=p.val,X=_[0],H=_[1],U=_[2],G=_[3];return m[0]=X*v+H*w+U*P+G*L,m[1]=X*y+H*A+U*b+G*D,m[2]=X*E+H*M+U*F+G*O,m[3]=X*C+H*R+U*I+G*z,X=_[4],H=_[5],U=_[6],G=_[7],m[4]=X*v+H*w+U*P+G*L,m[5]=X*y+H*A+U*b+G*D,m[6]=X*E+H*M+U*F+G*O,m[7]=X*C+H*R+U*I+G*z,X=_[8],H=_[9],U=_[10],G=_[11],m[8]=X*v+H*w+U*P+G*L,m[9]=X*y+H*A+U*b+G*D,m[10]=X*E+H*M+U*F+G*O,m[11]=X*C+H*R+U*I+G*z,X=_[12],H=_[13],U=_[14],G=_[15],m[12]=X*v+H*w+U*P+G*L,m[13]=X*y+H*A+U*b+G*D,m[14]=X*E+H*M+U*F+G*O,m[15]=X*C+H*R+U*I+G*z,this},multiplyLocal:function(p){var m=this.val,v=p.val;return this.setValues(m[0]*v[0]+m[1]*v[4]+m[2]*v[8]+m[3]*v[12],m[0]*v[1]+m[1]*v[5]+m[2]*v[9]+m[3]*v[13],m[0]*v[2]+m[1]*v[6]+m[2]*v[10]+m[3]*v[14],m[0]*v[3]+m[1]*v[7]+m[2]*v[11]+m[3]*v[15],m[4]*v[0]+m[5]*v[4]+m[6]*v[8]+m[7]*v[12],m[4]*v[1]+m[5]*v[5]+m[6]*v[9]+m[7]*v[13],m[4]*v[2]+m[5]*v[6]+m[6]*v[10]+m[7]*v[14],m[4]*v[3]+m[5]*v[7]+m[6]*v[11]+m[7]*v[15],m[8]*v[0]+m[9]*v[4]+m[10]*v[8]+m[11]*v[12],m[8]*v[1]+m[9]*v[5]+m[10]*v[9]+m[11]*v[13],m[8]*v[2]+m[9]*v[6]+m[10]*v[10]+m[11]*v[14],m[8]*v[3]+m[9]*v[7]+m[10]*v[11]+m[11]*v[15],m[12]*v[0]+m[13]*v[4]+m[14]*v[8]+m[15]*v[12],m[12]*v[1]+m[13]*v[5]+m[14]*v[9]+m[15]*v[13],m[12]*v[2]+m[13]*v[6]+m[14]*v[10]+m[15]*v[14],m[12]*v[3]+m[13]*v[7]+m[14]*v[11]+m[15]*v[15])},premultiply:function(p){return this.multiplyMatrices(p,this)},multiplyMatrices:function(p,m){var v=p.val,y=m.val,E=v[0],C=v[4],w=v[8],A=v[12],M=v[1],R=v[5],P=v[9],b=v[13],F=v[2],I=v[6],L=v[10],D=v[14],O=v[3],z=v[7],_=v[11],X=v[15],H=y[0],U=y[4],G=y[8],N=y[12],W=y[1],V=y[5],$=y[9],j=y[13],k=y[2],Q=y[6],et=y[10],at=y[14],q=y[3],ft=y[7],vt=y[11],Tt=y[15];return this.setValues(E*H+C*W+w*k+A*q,M*H+R*W+P*k+b*q,F*H+I*W+L*k+D*q,O*H+z*W+_*k+X*q,E*U+C*V+w*Q+A*ft,M*U+R*V+P*Q+b*ft,F*U+I*V+L*Q+D*ft,O*U+z*V+_*Q+X*ft,E*G+C*$+w*et+A*vt,M*G+R*$+P*et+b*vt,F*G+I*$+L*et+D*vt,O*G+z*$+_*et+X*vt,E*N+C*j+w*at+A*Tt,M*N+R*j+P*at+b*Tt,F*N+I*j+L*at+D*Tt,O*N+z*j+_*at+X*Tt)},translate:function(p){return this.translateXYZ(p.x,p.y,p.z)},translateXYZ:function(p,m,v){var y=this.val;return y[12]=y[0]*p+y[4]*m+y[8]*v+y[12],y[13]=y[1]*p+y[5]*m+y[9]*v+y[13],y[14]=y[2]*p+y[6]*m+y[10]*v+y[14],y[15]=y[3]*p+y[7]*m+y[11]*v+y[15],this},scale:function(p){return this.scaleXYZ(p.x,p.y,p.z)},scaleXYZ:function(p,m,v){var y=this.val;return y[0]=y[0]*p,y[1]=y[1]*p,y[2]=y[2]*p,y[3]=y[3]*p,y[4]=y[4]*m,y[5]=y[5]*m,y[6]=y[6]*m,y[7]=y[7]*m,y[8]=y[8]*v,y[9]=y[9]*v,y[10]=y[10]*v,y[11]=y[11]*v,this},makeRotationAxis:function(p,m){var v=Math.cos(m),y=Math.sin(m),E=1-v,C=p.x,w=p.y,A=p.z,M=E*C,R=E*w;return this.setValues(M*C+v,M*w-y*A,M*A+y*w,0,M*w+y*A,R*w+v,R*A-y*C,0,M*A-y*w,R*A+y*C,E*A*A+v,0,0,0,0,1)},rotate:function(p,m){var v=this.val,y=m.x,E=m.y,C=m.z,w=Math.sqrt(y*y+E*E+C*C);if(Math.abs(w)<f)return this;w=1/w,y*=w,E*=w,C*=w;var A=Math.sin(p),M=Math.cos(p),R=1-M,P=v[0],b=v[1],F=v[2],I=v[3],L=v[4],D=v[5],O=v[6],z=v[7],_=v[8],X=v[9],H=v[10],U=v[11],G=v[12],N=v[13],W=v[14],V=v[15],$=y*y*R+M,j=E*y*R+C*A,k=C*y*R-E*A,Q=y*E*R-C*A,et=E*E*R+M,at=C*E*R+y*A,q=y*C*R+E*A,ft=E*C*R-y*A,vt=C*C*R+M;return this.setValues(P*$+L*j+_*k,b*$+D*j+X*k,F*$+O*j+H*k,I*$+z*j+U*k,P*Q+L*et+_*at,b*Q+D*et+X*at,F*Q+O*et+H*at,I*Q+z*et+U*at,P*q+L*ft+_*vt,b*q+D*ft+X*vt,F*q+O*ft+H*vt,I*q+z*ft+U*vt,G,N,W,V)},rotateX:function(p){var m=this.val,v=Math.sin(p),y=Math.cos(p),E=m[4],C=m[5],w=m[6],A=m[7],M=m[8],R=m[9],P=m[10],b=m[11];return m[4]=E*y+M*v,m[5]=C*y+R*v,m[6]=w*y+P*v,m[7]=A*y+b*v,m[8]=M*y-E*v,m[9]=R*y-C*v,m[10]=P*y-w*v,m[11]=b*y-A*v,this},rotateY:function(p){var m=this.val,v=Math.sin(p),y=Math.cos(p),E=m[0],C=m[1],w=m[2],A=m[3],M=m[8],R=m[9],P=m[10],b=m[11];return m[0]=E*y-M*v,m[1]=C*y-R*v,m[2]=w*y-P*v,m[3]=A*y-b*v,m[8]=E*v+M*y,m[9]=C*v+R*y,m[10]=w*v+P*y,m[11]=A*v+b*y,this},rotateZ:function(p){var m=this.val,v=Math.sin(p),y=Math.cos(p),E=m[0],C=m[1],w=m[2],A=m[3],M=m[4],R=m[5],P=m[6],b=m[7];return m[0]=E*y+M*v,m[1]=C*y+R*v,m[2]=w*y+P*v,m[3]=A*y+b*v,m[4]=M*y-E*v,m[5]=R*y-C*v,m[6]=P*y-w*v,m[7]=b*y-A*v,this},fromRotationTranslation:function(p,m){var v=p.x,y=p.y,E=p.z,C=p.w,w=v+v,A=y+y,M=E+E,R=v*w,P=v*A,b=v*M,F=y*A,I=y*M,L=E*M,D=C*w,O=C*A,z=C*M;return this.setValues(1-(F+L),P+z,b-O,0,P-z,1-(R+L),I+D,0,b+O,I-D,1-(R+F),0,m.x,m.y,m.z,1)},fromQuat:function(p){var m=p.x,v=p.y,y=p.z,E=p.w,C=m+m,w=v+v,A=y+y,M=m*C,R=m*w,P=m*A,b=v*w,F=v*A,I=y*A,L=E*C,D=E*w,O=E*A;return this.setValues(1-(b+I),R+O,P-D,0,R-O,1-(M+I),F+L,0,P+D,F-L,1-(M+b),0,0,0,0,1)},frustum:function(p,m,v,y,E,C){var w=1/(m-p),A=1/(y-v),M=1/(E-C);return this.setValues(E*2*w,0,0,0,0,E*2*A,0,0,(m+p)*w,(y+v)*A,(C+E)*M,-1,0,0,C*E*2*M,0)},perspective:function(p,m,v,y){var E=1/Math.tan(p/2),C=1/(v-y);return this.setValues(E/m,0,0,0,0,E,0,0,0,0,(y+v)*C,-1,0,0,2*y*v*C,0)},perspectiveLH:function(p,m,v,y){return this.setValues(2*v/p,0,0,0,0,2*v/m,0,0,0,0,-y/(v-y),1,0,0,v*y/(v-y),0)},ortho:function(p,m,v,y,E,C){var w=p-m,A=v-y,M=E-C;return w=w===0?w:1/w,A=A===0?A:1/A,M=M===0?M:1/M,this.setValues(-2*w,0,0,0,0,-2*A,0,0,0,0,2*M,0,(p+m)*w,(y+v)*A,(C+E)*M,1)},lookAtRH:function(p,m,v){var y=this.val;return l.subVectors(p,m),l.lengthSq()===0&&(l.z=1),l.normalize(),h.crossVectors(v,l),h.lengthSq()===0&&(Math.abs(v.z)===1?l.x+=1e-4:l.z+=1e-4,l.normalize(),h.crossVectors(v,l)),h.normalize(),c.crossVectors(l,h),y[0]=h.x,y[1]=h.y,y[2]=h.z,y[4]=c.x,y[5]=c.y,y[6]=c.z,y[8]=l.x,y[9]=l.y,y[10]=l.z,this},lookAt:function(p,m,v){var y=p.x,E=p.y,C=p.z,w=v.x,A=v.y,M=v.z,R=m.x,P=m.y,b=m.z;if(Math.abs(y-R)<f&&Math.abs(E-P)<f&&Math.abs(C-b)<f)return this.identity();var F=y-R,I=E-P,L=C-b,D=1/Math.sqrt(F*F+I*I+L*L);F*=D,I*=D,L*=D;var O=A*L-M*I,z=M*F-w*L,_=w*I-A*F;D=Math.sqrt(O*O+z*z+_*_),D?(D=1/D,O*=D,z*=D,_*=D):(O=0,z=0,_=0);var X=I*_-L*z,H=L*O-F*_,U=F*z-I*O;return D=Math.sqrt(X*X+H*H+U*U),D?(D=1/D,X*=D,H*=D,U*=D):(X=0,H=0,U=0),this.setValues(O,X,F,0,z,H,I,0,_,U,L,0,-(O*y+z*E+_*C),-(X*y+H*E+U*C),-(F*y+I*E+L*C),1)},yawPitchRoll:function(p,m,v){this.zero(),u.zero(),r.zero();var y=this.val,E=u.val,C=r.val,w=Math.sin(v),A=Math.cos(v);return y[10]=1,y[15]=1,y[0]=A,y[1]=w,y[4]=-w,y[5]=A,w=Math.sin(m),A=Math.cos(m),E[0]=1,E[15]=1,E[5]=A,E[10]=A,E[9]=-w,E[6]=w,w=Math.sin(p),A=Math.cos(p),C[5]=1,C[15]=1,C[0]=A,C[2]=-w,C[8]=w,C[10]=A,this.multiplyLocal(u),this.multiplyLocal(r),this},setWorldMatrix:function(p,m,v,y,E){return this.yawPitchRoll(p.y,p.x,p.z),u.scaling(v.x,v.y,v.z),r.xyz(m.x,m.y,m.z),this.multiplyLocal(u),this.multiplyLocal(r),y&&this.multiplyLocal(y),E&&this.multiplyLocal(E),this},multiplyToMat4:function(p,m){var v=this.val,y=p.val,E=v[0],C=v[1],w=v[2],A=v[3],M=v[4],R=v[5],P=v[6],b=v[7],F=v[8],I=v[9],L=v[10],D=v[11],O=v[12],z=v[13],_=v[14],X=v[15],H=y[0],U=y[1],G=y[2],N=y[3],W=y[4],V=y[5],$=y[6],j=y[7],k=y[8],Q=y[9],et=y[10],at=y[11],q=y[12],ft=y[13],vt=y[14],Tt=y[15];return m.setValues(H*E+U*M+G*F+N*O,U*C+U*R+G*I+N*z,G*w+U*P+G*L+N*_,N*A+U*b+G*D+N*X,W*E+V*M+$*F+j*O,W*C+V*R+$*I+j*z,W*w+V*P+$*L+j*_,W*A+V*b+$*D+j*X,k*E+Q*M+et*F+at*O,k*C+Q*R+et*I+at*z,k*w+Q*P+et*L+at*_,k*A+Q*b+et*D+at*X,q*E+ft*M+vt*F+Tt*O,q*C+ft*R+vt*I+Tt*z,q*w+ft*P+vt*L+Tt*_,q*A+ft*b+vt*D+Tt*X)},fromRotationXYTranslation:function(p,m,v){var y=m.x,E=m.y,C=m.z,w=Math.sin(p.x),A=Math.cos(p.x),M=Math.sin(p.y),R=Math.cos(p.y),P=y,b=E,F=C,I=-w,L=0-I*M,D=0-A*M,O=I*R,z=A*R;return v||(P=R*y+M*C,b=L*y+A*E+O*C,F=D*y+w*E+z*C),this.setValues(R,L,D,0,0,A,w,0,M,O,z,0,P,b,F,1)},getMaxScaleOnAxis:function(){var p=this.val,m=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],v=p[4]*p[4]+p[5]*p[5]+p[6]*p[6],y=p[8]*p[8]+p[9]*p[9]+p[10]*p[10];return Math.sqrt(Math.max(m,v,y))}}),u=new o,r=new o,h=new g,c=new g,l=new g;s.exports=o}),86883:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return Math.min(e+a,g)};s.exports=T}),50040:(s=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=e.length;if(a===0)return 0;e.sort(function(f,o){return f-o});var g=Math.floor(a/2);return a%2===0?(e[g]+e[g-1])/2:e[g]};s.exports=T}),37204:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return Math.max(e-a,g)};s.exports=T}),65201:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){g===void 0&&(g=a+1);var o=(e-a)/(g-a);return o>1?f!==void 0?(o=(f-e)/(f-g),o<0&&(o=0)):o=1:o<0&&(o=0),o};s.exports=T}),15746:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(94434),f=e(29747),o=e(25836),u=1e-6,r=new Int8Array([1,2,0]),h=new Float32Array([0,0,0]),c=new o(1,0,0),l=new o(0,1,0),p=new o,m=new g,v=new a({initialize:function(E,C,w,A){this.onChangeCallback=f,this.set(E,C,w,A)},x:{get:function(){return this._x},set:function(y){this._x=y,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(y){this._y=y,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(y){this._z=y,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(y){this._w=y,this.onChangeCallback(this)}},copy:function(y){return this.set(y)},set:function(y,E,C,w,A){return A===void 0&&(A=!0),typeof y=="object"?(this._x=y.x||0,this._y=y.y||0,this._z=y.z||0,this._w=y.w||0):(this._x=y||0,this._y=E||0,this._z=C||0,this._w=w||0),A&&this.onChangeCallback(this),this},add:function(y){return this._x+=y.x,this._y+=y.y,this._z+=y.z,this._w+=y.w,this.onChangeCallback(this),this},subtract:function(y){return this._x-=y.x,this._y-=y.y,this._z-=y.z,this._w-=y.w,this.onChangeCallback(this),this},scale:function(y){return this._x*=y,this._y*=y,this._z*=y,this._w*=y,this.onChangeCallback(this),this},length:function(){var y=this.x,E=this.y,C=this.z,w=this.w;return Math.sqrt(y*y+E*E+C*C+w*w)},lengthSq:function(){var y=this.x,E=this.y,C=this.z,w=this.w;return y*y+E*E+C*C+w*w},normalize:function(){var y=this.x,E=this.y,C=this.z,w=this.w,A=y*y+E*E+C*C+w*w;return A>0&&(A=1/Math.sqrt(A),this._x=y*A,this._y=E*A,this._z=C*A,this._w=w*A),this.onChangeCallback(this),this},dot:function(y){return this.x*y.x+this.y*y.y+this.z*y.z+this.w*y.w},lerp:function(y,E){E===void 0&&(E=0);var C=this.x,w=this.y,A=this.z,M=this.w;return this.set(C+E*(y.x-C),w+E*(y.y-w),A+E*(y.z-A),M+E*(y.w-M))},rotationTo:function(y,E){var C=y.x*E.x+y.y*E.y+y.z*E.z;return C<-.999999?(p.copy(c).cross(y).length()<u&&p.copy(l).cross(y),p.normalize(),this.setAxisAngle(p,Math.PI)):C>.999999?this.set(0,0,0,1):(p.copy(y).cross(E),this._x=p.x,this._y=p.y,this._z=p.z,this._w=1+C,this.normalize())},setAxes:function(y,E,C){var w=m.val;return w[0]=E.x,w[3]=E.y,w[6]=E.z,w[1]=C.x,w[4]=C.y,w[7]=C.z,w[2]=-y.x,w[5]=-y.y,w[8]=-y.z,this.fromMat3(m).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(y,E){E=E*.5;var C=Math.sin(E);return this.set(C*y.x,C*y.y,C*y.z,Math.cos(E))},multiply:function(y){var E=this.x,C=this.y,w=this.z,A=this.w,M=y.x,R=y.y,P=y.z,b=y.w;return this.set(E*b+A*M+C*P-w*R,C*b+A*R+w*M-E*P,w*b+A*P+E*R-C*M,A*b-E*M-C*R-w*P)},slerp:function(y,E){var C=this.x,w=this.y,A=this.z,M=this.w,R=y.x,P=y.y,b=y.z,F=y.w,I=C*R+w*P+A*b+M*F;I<0&&(I=-I,R=-R,P=-P,b=-b,F=-F);var L=1-E,D=E;if(1-I>u){var O=Math.acos(I),z=Math.sin(O);L=Math.sin((1-E)*O)/z,D=Math.sin(E*O)/z}return this.set(L*C+D*R,L*w+D*P,L*A+D*b,L*M+D*F)},invert:function(){var y=this.x,E=this.y,C=this.z,w=this.w,A=y*y+E*E+C*C+w*w,M=A?1/A:0;return this.set(-y*M,-E*M,-C*M,w*M)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(y){y*=.5;var E=this.x,C=this.y,w=this.z,A=this.w,M=Math.sin(y),R=Math.cos(y);return this.set(E*R+A*M,C*R+w*M,w*R-C*M,A*R-E*M)},rotateY:function(y){y*=.5;var E=this.x,C=this.y,w=this.z,A=this.w,M=Math.sin(y),R=Math.cos(y);return this.set(E*R-w*M,C*R+A*M,w*R+E*M,A*R-C*M)},rotateZ:function(y){y*=.5;var E=this.x,C=this.y,w=this.z,A=this.w,M=Math.sin(y),R=Math.cos(y);return this.set(E*R+C*M,C*R-E*M,w*R+A*M,A*R-w*M)},calculateW:function(){var y=this.x,E=this.y,C=this.z;return this.w=-Math.sqrt(1-y*y-E*E-C*C),this},setFromEuler:function(y,E){var C=y.x/2,w=y.y/2,A=y.z/2,M=Math.cos(C),R=Math.cos(w),P=Math.cos(A),b=Math.sin(C),F=Math.sin(w),I=Math.sin(A);switch(y.order){case"XYZ":{this.set(b*R*P+M*F*I,M*F*P-b*R*I,M*R*I+b*F*P,M*R*P-b*F*I,E);break}case"YXZ":{this.set(b*R*P+M*F*I,M*F*P-b*R*I,M*R*I-b*F*P,M*R*P+b*F*I,E);break}case"ZXY":{this.set(b*R*P-M*F*I,M*F*P+b*R*I,M*R*I+b*F*P,M*R*P-b*F*I,E);break}case"ZYX":{this.set(b*R*P-M*F*I,M*F*P+b*R*I,M*R*I-b*F*P,M*R*P+b*F*I,E);break}case"YZX":{this.set(b*R*P+M*F*I,M*F*P+b*R*I,M*R*I-b*F*P,M*R*P-b*F*I,E);break}case"XZY":{this.set(b*R*P-M*F*I,M*F*P-b*R*I,M*R*I+b*F*P,M*R*P+b*F*I,E);break}}return this},setFromRotationMatrix:function(y){var E=y.val,C=E[0],w=E[4],A=E[8],M=E[1],R=E[5],P=E[9],b=E[2],F=E[6],I=E[10],L=C+R+I,D;return L>0?(D=.5/Math.sqrt(L+1),this.set((F-P)*D,(A-b)*D,(M-w)*D,.25/D)):C>R&&C>I?(D=2*Math.sqrt(1+C-R-I),this.set(.25*D,(w+M)/D,(A+b)/D,(F-P)/D)):R>I?(D=2*Math.sqrt(1+R-C-I),this.set((w+M)/D,.25*D,(P+F)/D,(A-b)/D)):(D=2*Math.sqrt(1+I-C-R),this.set((A+b)/D,(P+F)/D,.25*D,(M-w)/D)),this},fromMat3:function(y){var E=y.val,C=E[0]+E[4]+E[8],w;if(C>0)w=Math.sqrt(C+1),this.w=.5*w,w=.5/w,this._x=(E[7]-E[5])*w,this._y=(E[2]-E[6])*w,this._z=(E[3]-E[1])*w;else{var A=0;E[4]>E[0]&&(A=1),E[8]>E[A*3+A]&&(A=2);var M=r[A],R=r[M];w=Math.sqrt(E[A*3+A]-E[M*3+M]-E[R*3+R]+1),h[A]=.5*w,w=.5/w,h[M]=(E[M*3+A]+E[A*3+M])*w,h[R]=(E[R*3+A]+E[A*3+R])*w,this._x=h[0],this._y=h[1],this._z=h[2],this._w=(E[R*3+M]-E[M*3+R])*w}return this.onChangeCallback(this),this}});s.exports=v}),43396:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=function(f){return f*a.RAD_TO_DEG};s.exports=g}),74362:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1);var g=Math.random()*2*Math.PI;return e.x=Math.cos(g)*a,e.y=Math.sin(g)*a,e};s.exports=T}),60706:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1);var g=Math.random()*2*Math.PI,f=Math.random()*2-1,o=Math.sqrt(1-f*f)*a;return e.x=Math.cos(g)*o,e.y=Math.sin(g)*o,e.z=f*a,e};s.exports=T}),67421:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1),e.x=(Math.random()*2-1)*a,e.y=(Math.random()*2-1)*a,e.z=(Math.random()*2-1)*a,e.w=(Math.random()*2-1)*a,e};s.exports=T}),36305:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.x,f=e.y;return e.x=g*Math.cos(a)-f*Math.sin(a),e.y=g*Math.sin(a)+f*Math.cos(a),e};s.exports=T}),11520:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=Math.cos(f),u=Math.sin(f),r=e.x-a,h=e.y-g;return e.x=r*o-h*u+a,e.y=r*u+h*o+g,e};s.exports=T}),1163:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o){var u=f+Math.atan2(e.y-g,e.x-a);return e.x=a+o*Math.cos(u),e.y=g+o*Math.sin(u),e};s.exports=T}),70336:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o){return e.x=a+o*Math.cos(f),e.y=g+o*Math.sin(f),e};s.exports=T}),72678:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),g=e(37867),f=e(15746),o=new g,u=new f,r=new a,h=function(c,l,p){return u.setAxisAngle(l,p),o.fromRotationTranslation(u,r.set(0,0,0)),c.transformMat4(o)};s.exports=h}),2284:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0?Math.ceil(e):Math.floor(e)};s.exports=T}),41013:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){a===void 0&&(a=0),g===void 0&&(g=10);var f=Math.pow(g,-a);return Math.round(e*f)/f};s.exports=T}),16922:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){a===void 0&&(a=1),g===void 0&&(g=1),f===void 0&&(f=1),f*=Math.PI/e;for(var o=[],u=[],r=0;r<e;r++)g-=a*f,a+=g*f,o[r]=g,u[r]=a;return{sin:u,cos:o,length:e}};s.exports=T}),7602:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e<=a?0:e>=g?1:(e=(e-a)/(g-a),e*e*(3-2*e))};s.exports=T}),54261:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e=Math.max(0,Math.min(1,(e-a)/(g-a))),e*e*e*(e*(e*6-15)+10)};s.exports=T}),44408:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r){r===void 0&&(r=new a);var h=0,c=0,l=o*u;return f>0&&f<=l&&(f>o-1?(c=Math.floor(f/o),h=f-c*o):h=f),r.set(h,c)};s.exports=g}),85955:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r,h,c,l,p){p===void 0&&(p=new a);var m=Math.sin(h),v=Math.cos(h),y=v*c,E=m*c,C=-m*l,w=v*l,A=1/(y*w+C*-E);return p.x=w*A*f+-C*A*o+(r*C-u*w)*A,p.y=y*A*o+-E*A*f+(-r*y+u*E)*A,p};s.exports=g}),26099:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(43855),f=new a({initialize:function(u,r){this.x=0,this.y=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0):(r===void 0&&(r=u),this.x=u||0,this.y=r||0)},clone:function(){return new f(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,u){return u===void 0&&(u=o),this.x=o,this.y=u,this},setTo:function(o,u){return this.set(o,u)},setToPolar:function(o,u){return u==null&&(u=1),this.x=Math.cos(o)*u,this.y=Math.sin(o)*u,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,u){return g(this.x,o.x,u)&&g(this.y,o.y,u)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var u=o.x-this.x,r=o.y-this.y;return Math.sqrt(u*u+r*r)},distanceSq:function(o){var u=o.x-this.x,r=o.y-this.y;return u*u+r*r},length:function(){var o=this.x,u=this.y;return Math.sqrt(o*o+u*u)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,u=this.y;return o*o+u*u},normalize:function(){var o=this.x,u=this.y,r=o*o+u*u;return r>0&&(r=1/Math.sqrt(r),this.x=o*r,this.y=u*r),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,u){u===void 0&&(u=0);var r=this.x,h=this.y;return this.x=r+u*(o.x-r),this.y=h+u*(o.y-h),this},transformMat3:function(o){var u=this.x,r=this.y,h=o.val;return this.x=h[0]*u+h[3]*r+h[6],this.y=h[1]*u+h[4]*r+h[7],this},transformMat4:function(o){var u=this.x,r=this.y,h=o.val;return this.x=h[0]*u+h[4]*r+h[12],this.y=h[1]*u+h[5]*r+h[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var u=this.length();return u&&u>o&&this.scale(o/u),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var u=Math.cos(o),r=Math.sin(o);return this.set(u*this.x-r*this.y,r*this.x+u*this.y)},project:function(o){var u=this.dot(o)/o.dot(o);return this.copy(o).scale(u)}});f.ZERO=new f,f.RIGHT=new f(1,0),f.LEFT=new f(-1,0),f.UP=new f(0,-1),f.DOWN=new f(0,1),f.ONE=new f(1,1),s.exports=f}),25836:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=u||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(f){return this.x=Math.min(this.x,f.x),this.y=Math.min(this.y,f.y),this.z=Math.min(this.z,f.z),this},max:function(f){return this.x=Math.max(this.x,f.x),this.y=Math.max(this.y,f.y),this.z=Math.max(this.z,f.z),this},clone:function(){return new g(this.x,this.y,this.z)},addVectors:function(f,o){return this.x=f.x+o.x,this.y=f.y+o.y,this.z=f.z+o.z,this},subVectors:function(f,o){return this.x=f.x-o.x,this.y=f.y-o.y,this.z=f.z-o.z,this},crossVectors:function(f,o){var u=f.x,r=f.y,h=f.z,c=o.x,l=o.y,p=o.z;return this.x=r*p-h*l,this.y=h*c-u*p,this.z=u*l-r*c,this},equals:function(f){return this.x===f.x&&this.y===f.y&&this.z===f.z},copy:function(f){return this.x=f.x,this.y=f.y,this.z=f.z||0,this},set:function(f,o,u){return typeof f=="object"?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0):(this.x=f||0,this.y=o||0,this.z=u||0),this},setFromMatrixPosition:function(f){return this.fromArray(f.val,12)},setFromMatrixColumn:function(f,o){return this.fromArray(f.val,o*4)},fromArray:function(f,o){return o===void 0&&(o=0),this.x=f[o],this.y=f[o+1],this.z=f[o+2],this},add:function(f){return this.x+=f.x,this.y+=f.y,this.z+=f.z||0,this},addScalar:function(f){return this.x+=f,this.y+=f,this.z+=f,this},addScale:function(f,o){return this.x+=f.x*o,this.y+=f.y*o,this.z+=f.z*o||0,this},subtract:function(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z||0,this},multiply:function(f){return this.x*=f.x,this.y*=f.y,this.z*=f.z||1,this},scale:function(f){return isFinite(f)?(this.x*=f,this.y*=f,this.z*=f):(this.x=0,this.y=0,this.z=0),this},divide:function(f){return this.x/=f.x,this.y/=f.y,this.z/=f.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(f){var o=f.x-this.x,u=f.y-this.y,r=f.z-this.z||0;return Math.sqrt(o*o+u*u+r*r)},distanceSq:function(f){var o=f.x-this.x,u=f.y-this.y,r=f.z-this.z||0;return o*o+u*u+r*r},length:function(){var f=this.x,o=this.y,u=this.z;return Math.sqrt(f*f+o*o+u*u)},lengthSq:function(){var f=this.x,o=this.y,u=this.z;return f*f+o*o+u*u},normalize:function(){var f=this.x,o=this.y,u=this.z,r=f*f+o*o+u*u;return r>0&&(r=1/Math.sqrt(r),this.x=f*r,this.y=o*r,this.z=u*r),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z},cross:function(f){var o=this.x,u=this.y,r=this.z,h=f.x,c=f.y,l=f.z;return this.x=u*l-r*c,this.y=r*h-o*l,this.z=o*c-u*h,this},lerp:function(f,o){o===void 0&&(o=0);var u=this.x,r=this.y,h=this.z;return this.x=u+o*(f.x-u),this.y=r+o*(f.y-r),this.z=h+o*(f.z-h),this},applyMatrix3:function(f){var o=this.x,u=this.y,r=this.z,h=f.val;return this.x=h[0]*o+h[3]*u+h[6]*r,this.y=h[1]*o+h[4]*u+h[7]*r,this.z=h[2]*o+h[5]*u+h[8]*r,this},applyMatrix4:function(f){var o=this.x,u=this.y,r=this.z,h=f.val,c=1/(h[3]*o+h[7]*u+h[11]*r+h[15]);return this.x=(h[0]*o+h[4]*u+h[8]*r+h[12])*c,this.y=(h[1]*o+h[5]*u+h[9]*r+h[13])*c,this.z=(h[2]*o+h[6]*u+h[10]*r+h[14])*c,this},transformMat3:function(f){var o=this.x,u=this.y,r=this.z,h=f.val;return this.x=o*h[0]+u*h[3]+r*h[6],this.y=o*h[1]+u*h[4]+r*h[7],this.z=o*h[2]+u*h[5]+r*h[8],this},transformMat4:function(f){var o=this.x,u=this.y,r=this.z,h=f.val;return this.x=h[0]*o+h[4]*u+h[8]*r+h[12],this.y=h[1]*o+h[5]*u+h[9]*r+h[13],this.z=h[2]*o+h[6]*u+h[10]*r+h[14],this},transformCoordinates:function(f){var o=this.x,u=this.y,r=this.z,h=f.val,c=o*h[0]+u*h[4]+r*h[8]+h[12],l=o*h[1]+u*h[5]+r*h[9]+h[13],p=o*h[2]+u*h[6]+r*h[10]+h[14],m=o*h[3]+u*h[7]+r*h[11]+h[15];return this.x=c/m,this.y=l/m,this.z=p/m,this},transformQuat:function(f){var o=this.x,u=this.y,r=this.z,h=f.x,c=f.y,l=f.z,p=f.w,m=p*o+c*r-l*u,v=p*u+l*o-h*r,y=p*r+h*u-c*o,E=-h*o-c*u-l*r;return this.x=m*p+E*-h+v*-l-y*-c,this.y=v*p+E*-c+y*-h-m*-l,this.z=y*p+E*-l+m*-c-v*-h,this},project:function(f){var o=this.x,u=this.y,r=this.z,h=f.val,c=h[0],l=h[1],p=h[2],m=h[3],v=h[4],y=h[5],E=h[6],C=h[7],w=h[8],A=h[9],M=h[10],R=h[11],P=h[12],b=h[13],F=h[14],I=h[15],L=1/(o*m+u*C+r*R+I);return this.x=(o*c+u*v+r*w+P)*L,this.y=(o*l+u*y+r*A+b)*L,this.z=(o*p+u*E+r*M+F)*L,this},projectViewMatrix:function(f,o){return this.applyMatrix4(f).applyMatrix4(o)},unprojectViewMatrix:function(f,o){return this.applyMatrix4(f).applyMatrix4(o)},unproject:function(f,o){var u=f.x,r=f.y,h=f.z,c=f.w,l=this.x-u,p=c-this.y-1-r,m=this.z;return this.x=2*l/h-1,this.y=2*p/c-1,this.z=2*m-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});g.ZERO=new g,g.RIGHT=new g(1,0,0),g.LEFT=new g(-1,0,0),g.UP=new g(0,-1,0),g.DOWN=new g(0,1,0),g.FORWARD=new g(0,0,1),g.BACK=new g(0,0,-1),g.ONE=new g(1,1,1),s.exports=g}),61369:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r,h){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=u||0,this.z=r||0,this.w=h||0)},clone:function(){return new g(this.x,this.y,this.z,this.w)},copy:function(f){return this.x=f.x,this.y=f.y,this.z=f.z||0,this.w=f.w||0,this},equals:function(f){return this.x===f.x&&this.y===f.y&&this.z===f.z&&this.w===f.w},set:function(f,o,u,r){return typeof f=="object"?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0,this.w=f.w||0):(this.x=f||0,this.y=o||0,this.z=u||0,this.w=r||0),this},add:function(f){return this.x+=f.x,this.y+=f.y,this.z+=f.z||0,this.w+=f.w||0,this},subtract:function(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z||0,this.w-=f.w||0,this},scale:function(f){return this.x*=f,this.y*=f,this.z*=f,this.w*=f,this},length:function(){var f=this.x,o=this.y,u=this.z,r=this.w;return Math.sqrt(f*f+o*o+u*u+r*r)},lengthSq:function(){var f=this.x,o=this.y,u=this.z,r=this.w;return f*f+o*o+u*u+r*r},normalize:function(){var f=this.x,o=this.y,u=this.z,r=this.w,h=f*f+o*o+u*u+r*r;return h>0&&(h=1/Math.sqrt(h),this.x=f*h,this.y=o*h,this.z=u*h,this.w=r*h),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z+this.w*f.w},lerp:function(f,o){o===void 0&&(o=0);var u=this.x,r=this.y,h=this.z,c=this.w;return this.x=u+o*(f.x-u),this.y=r+o*(f.y-r),this.z=h+o*(f.z-h),this.w=c+o*(f.w-c),this},multiply:function(f){return this.x*=f.x,this.y*=f.y,this.z*=f.z||1,this.w*=f.w||1,this},divide:function(f){return this.x/=f.x,this.y/=f.y,this.z/=f.z||1,this.w/=f.w||1,this},distance:function(f){var o=f.x-this.x,u=f.y-this.y,r=f.z-this.z||0,h=f.w-this.w||0;return Math.sqrt(o*o+u*u+r*r+h*h)},distanceSq:function(f){var o=f.x-this.x,u=f.y-this.y,r=f.z-this.z||0,h=f.w-this.w||0;return o*o+u*u+r*r+h*h},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(f){var o=this.x,u=this.y,r=this.z,h=this.w,c=f.val;return this.x=c[0]*o+c[4]*u+c[8]*r+c[12]*h,this.y=c[1]*o+c[5]*u+c[9]*r+c[13]*h,this.z=c[2]*o+c[6]*u+c[10]*r+c[14]*h,this.w=c[3]*o+c[7]*u+c[11]*r+c[15]*h,this},transformQuat:function(f){var o=this.x,u=this.y,r=this.z,h=f.x,c=f.y,l=f.z,p=f.w,m=p*o+c*r-l*u,v=p*u+l*o-h*r,y=p*r+h*u-c*o,E=-h*o-c*u-l*r;return this.x=m*p+E*-h+v*-l-y*-c,this.y=v*p+E*-c+y*-h-m*-l,this.z=y*p+E*-l+m*-c-v*-h,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});g.prototype.sub=g.prototype.subtract,g.prototype.mul=g.prototype.multiply,g.prototype.div=g.prototype.divide,g.prototype.dist=g.prototype.distance,g.prototype.distSq=g.prototype.distanceSq,g.prototype.len=g.prototype.length,g.prototype.lenSq=g.prototype.lengthSq,s.exports=g}),60417:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return Math.abs(e-a)<=g};s.exports=T}),15994:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=g-a;return a+((e-a)%f+f)%f};s.exports=T}),31040:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){return Math.atan2(f-a,g-e)};s.exports=T}),55495:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)};s.exports=T}),128:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.atan2(a.x-e.x,a.y-e.y)};s.exports=T}),41273:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){return Math.atan2(g-e,f-a)};s.exports=T}),1432:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=function(f){return f>Math.PI&&(f-=a.PI2),Math.abs(((f+a.TAU)%a.PI2-a.PI2)%a.PI2)};s.exports=g}),49127:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),g=function(f,o){return a(o-f)};s.exports=g}),52285:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),g=2*Math.PI,f=function(o,u){var r=a(u-o);return r>0&&(r-=g),r};s.exports=f}),67317:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86554),g=function(f,o){return a(o-f)};s.exports=g}),12407:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};s.exports=T}),53993:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99472),g=function(){return a(-Math.PI,Math.PI)};s.exports=g}),86564:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99472),g=function(){return a(-180,180)};s.exports=g}),90154:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),g=function(f){return a(f+Math.PI)};s.exports=g}),48736:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=function(f,o,u){return u===void 0&&(u=.05),f===o||(Math.abs(o-f)<=u||Math.abs(o-f)>=a.PI2-u?f=o:(Math.abs(o-f)>Math.PI&&(o<f?o+=a.PI2:o-=a.PI2),o>f?f+=u:o<f&&(f-=u))),f};s.exports=g}),61430:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=a-e;if(g===0)return 0;var f=Math.floor((g- -180)/360);return g-f*360};s.exports=T}),86554:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),g=function(f){return a(f,-Math.PI,Math.PI)};s.exports=g}),30954:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),g=function(f){return a(f,-180,180)};s.exports=g}),25588:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Between:e(31040),BetweenPoints:e(55495),BetweenPointsY:e(128),BetweenY:e(41273),CounterClockwise:e(1432),GetClockwiseDistance:e(49127),GetCounterClockwiseDistance:e(52285),GetShortestDistance:e(67317),Normalize:e(12407),Random:e(53993),RandomDegrees:e(86564),Reverse:e(90154),RotateTo:e(48736),ShortestBetween:e(61430),Wrap:e(86554),WrapDegrees:e(30954)}}),36383:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};s.exports=T}),20339:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=e-g,u=a-f;return Math.sqrt(o*o+u*u)};s.exports=T}),52816:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.x-a.x,f=e.y-a.y;return Math.sqrt(g*g+f*f)};s.exports=T}),64559:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.x-a.x,f=e.y-a.y;return g*g+f*f};s.exports=T}),82340:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){return Math.max(Math.abs(e-g),Math.abs(a-f))};s.exports=T}),14390:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o){return o===void 0&&(o=2),Math.sqrt(Math.pow(g-e,o)+Math.pow(f-a,o))};s.exports=T}),2243:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){return Math.abs(e-g)+Math.abs(a-f)};s.exports=T}),89774:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=e-g,u=a-f;return o*o+u*u};s.exports=T}),50994:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Between:e(20339),BetweenPoints:e(52816),BetweenPointsSquared:e(64559),Chebyshev:e(82340),Power:e(14390),Snake:e(2243),Squared:e(89774)}}),62640:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54178),g=e(41521),f=e(79980),o=e(85433),u=e(99140),r=e(48857),h=e(81596),c=e(59133),l=e(98516),p=e(35248),m=e(82500),v=e(49752);s.exports={Power0:h,Power1:c.Out,Power2:o.Out,Power3:l.Out,Power4:p.Out,Linear:h,Quad:c.Out,Cubic:o.Out,Quart:l.Out,Quint:p.Out,Sine:m.Out,Expo:r.Out,Circ:f.Out,Elastic:u.Out,Back:a.Out,Bounce:g.Out,Stepped:v,"Quad.easeIn":c.In,"Cubic.easeIn":o.In,"Quart.easeIn":l.In,"Quint.easeIn":p.In,"Sine.easeIn":m.In,"Expo.easeIn":r.In,"Circ.easeIn":f.In,"Elastic.easeIn":u.In,"Back.easeIn":a.In,"Bounce.easeIn":g.In,"Quad.easeOut":c.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":l.Out,"Quint.easeOut":p.Out,"Sine.easeOut":m.Out,"Expo.easeOut":r.Out,"Circ.easeOut":f.Out,"Elastic.easeOut":u.Out,"Back.easeOut":a.Out,"Bounce.easeOut":g.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":p.InOut,"Sine.easeInOut":m.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":f.InOut,"Elastic.easeInOut":u.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":g.InOut}}),1639:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1.70158),e*e*((a+1)*e-a)};s.exports=T}),50099:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1.70158);var g=a*1.525;return(e*=2)<1?.5*(e*e*((g+1)*e-g)):.5*((e-=2)*e*((g+1)*e+g)+2)};s.exports=T}),41286:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1.70158),--e*e*((a+1)*e+a)+1};s.exports=T}),54178:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(1639),Out:e(41286),InOut:e(50099)}}),59590:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};s.exports=T}),41788:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=!1;return e<.5?(e=1-e*2,a=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,a?(1-e)*.5:e*.5+.5};s.exports=T}),69905:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};s.exports=T}),41521:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(59590),Out:e(69905),InOut:e(41788)}}),91861:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.sqrt(1-e*e)};s.exports=T}),4177:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};s.exports=T}),57512:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(1- --e*e)};s.exports=T}),79980:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(91861),Out:e(57512),InOut:e(4177)}}),51150:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e};s.exports=T}),82820:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};s.exports=T}),35033:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e+1};s.exports=T}),85433:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(51150),Out:e(35033),InOut:e(82820)}}),69965:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(a===void 0&&(a=.1),g===void 0&&(g=.1),e===0)return 0;if(e===1)return 1;var f=g/4;return a<1?a=1:f=g*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(e-=1))*Math.sin((e-f)*(2*Math.PI)/g))};s.exports=T}),50665:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(a===void 0&&(a=.1),g===void 0&&(g=.1),e===0)return 0;if(e===1)return 1;var f=g/4;return a<1?a=1:f=g*Math.asin(1/a)/(2*Math.PI),(e*=2)<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e-f)*(2*Math.PI)/g)):a*Math.pow(2,-10*(e-=1))*Math.sin((e-f)*(2*Math.PI)/g)*.5+1};s.exports=T}),7744:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(a===void 0&&(a=.1),g===void 0&&(g=.1),e===0)return 0;if(e===1)return 1;var f=g/4;return a<1?a=1:f=g*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*e)*Math.sin((e-f)*(2*Math.PI)/g)+1};s.exports=T}),99140:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(69965),Out:e(7744),InOut:e(50665)}}),24590:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.pow(2,10*(e-1))-.001};s.exports=T}),87844:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};s.exports=T}),89433:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.pow(2,-10*e)};s.exports=T}),48857:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(24590),Out:e(89433),InOut:e(87844)}}),48820:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Back:e(54178),Bounce:e(41521),Circular:e(79980),Cubic:e(85433),Elastic:e(99140),Expo:e(48857),Linear:e(81596),Quadratic:e(59133),Quartic:e(98516),Quintic:e(35248),Sine:e(82500),Stepped:e(49752)}}),7147:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e};s.exports=T}),81596:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports=e(7147)}),34826:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e};s.exports=T}),20544:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};s.exports=T}),92029:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*(2-e)};s.exports=T}),59133:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(34826),Out:e(92029),InOut:e(20544)}}),64413:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e};s.exports=T}),78137:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};s.exports=T}),45840:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1- --e*e*e*e};s.exports=T}),98516:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(64413),Out:e(45840),InOut:e(78137)}}),87745:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e*e};s.exports=T}),16509:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};s.exports=T}),17868:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e*e*e+1};s.exports=T}),35248:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(87745),Out:e(17868),InOut:e(16509)}}),80461:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};s.exports=T}),34025:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};s.exports=T}),52768:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};s.exports=T}),82500:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(80461),Out:e(52768),InOut:e(34025)}}),72251:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1),e<=0?0:e>=1?1:((a*e|0)+1)*(1/a)};s.exports=T}),49752:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports=e(72251)}),75698:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1e-4),Math.ceil(e-a)};s.exports=T}),43855:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return g===void 0&&(g=1e-4),Math.abs(e-a)<g};s.exports=T}),25777:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1e-4),Math.floor(e+a)};s.exports=T}),5470:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return g===void 0&&(g=1e-4),e>a-g};s.exports=T}),94977:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return g===void 0&&(g=1e-4),e<a+g};s.exports=T}),48379:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Ceil:e(75698),Equal:e(43855),Floor:e(25777),GreaterThan:e(5470),LessThan:e(94977)}}),75508:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),g=e(79291),f={Angle:e(25588),Distance:e(50994),Easing:e(48820),Fuzzy:e(48379),Interpolation:e(38289),Pow2:e(49001),Snap:e(73697),RandomDataGenerator:e(28453),Average:e(53307),Bernstein:e(85710),Between:e(30976),CatmullRom:e(87842),CeilTo:e(26302),Clamp:e(45319),DegToRad:e(39506),Difference:e(61241),Euler:e(38857),Factorial:e(6411),FloatBetween:e(99472),FloorTo:e(77623),FromPercent:e(62945),GetSpeed:e(38265),IsEven:e(78702),IsEvenStrict:e(94883),Linear:e(28915),LinearXY:e(94908),MaxAdd:e(86883),Median:e(50040),MinSub:e(37204),Percent:e(65201),RadToDeg:e(43396),RandomXY:e(74362),RandomXYZ:e(60706),RandomXYZW:e(67421),Rotate:e(36305),RotateAround:e(11520),RotateAroundDistance:e(1163),RotateTo:e(70336),RoundAwayFromZero:e(2284),RoundTo:e(41013),SinCosTableGenerator:e(16922),SmootherStep:e(54261),SmoothStep:e(7602),ToXY:e(44408),TransformXY:e(85955),Within:e(60417),Wrap:e(15994),Vector2:e(26099),Vector3:e(25836),Vector4:e(61369),Matrix3:e(94434),Matrix4:e(37867),Quaternion:e(15746),RotateVec3:e(72678)};f=g(!1,f,a),s.exports=f}),89318:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85710),g=function(f,o){for(var u=0,r=f.length-1,h=0;h<=r;h++)u+=Math.pow(1-o,r-h)*Math.pow(o,h)*f[h]*a(r,h);return u};s.exports=g}),77259:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87842),g=function(f,o){var u=f.length-1,r=u*o,h=Math.floor(r);return f[0]===f[u]?(o<0&&(h=Math.floor(r=u*(1+o))),a(r-h,f[(h-1+u)%u],f[h],f[(h+1)%u],f[(h+2)%u])):o<0?f[0]-(a(-r,f[0],f[0],f[1],f[1])-f[0]):o>1?f[u]-(a(r-u,f[u],f[u],f[u-1],f[u-1])-f[u]):a(r-h,f[h?h-1:0],f[h],f[u<h+1?u:h+1],f[u<h+2?u:h+2])};s.exports=g}),36316:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(o,u){var r=1-o;return r*r*r*u}function e(o,u){var r=1-o;return 3*r*r*o*u}function a(o,u){return 3*(1-o)*o*o*u}function g(o,u){return o*o*o*u}var f=function(o,u,r,h,c){return T(o,u)+e(o,r)+a(o,h)+g(o,c)};s.exports=f}),28392:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28915),g=function(f,o){var u=f.length-1,r=u*o,h=Math.floor(r);return o<0?a(f[0],f[1],r):o>1?a(f[u],f[u-1],u-r):a(f[h],f[h+1>u?u:h+1],r-h)};s.exports=g}),32112:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(f,o){var u=1-f;return u*u*o}function e(f,o){return 2*(1-f)*f*o}function a(f,o){return f*f*o}var g=function(f,o,u,r){return T(f,o)+e(f,u)+a(f,r)};s.exports=g}),47235:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7602),g=function(f,o,u){return o+(u-o)*a(f,0,1)};s.exports=g}),50178:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54261),g=function(f,o,u){return o+(u-o)*a(f,0,1)};s.exports=g}),38289:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Bezier:e(89318),CatmullRom:e(77259),CubicBezier:e(36316),Linear:e(28392),QuadraticBezier:e(32112),SmoothStep:e(47235),SmootherStep:e(50178)}}),98439:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=Math.log(e)/.6931471805599453;return 1<<Math.ceil(a)};s.exports=T}),50030:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e>0&&(e&e-1)===0&&a>0&&(a&a-1)===0};s.exports=T}),81230:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0&&(e&e-1)===0};s.exports=T}),49001:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={GetNext:e(98439),IsSize:e(50030),IsValue:e(81230)}}),28453:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var f=2091639*this.s0+this.c*23283064365386963e-26;return this.c=f|0,this.s0=this.s1,this.s1=this.s2,this.s2=f-this.c,this.s2},hash:function(f){var o,u=this.n;f=f.toString();for(var r=0;r<f.length;r++)u+=f.charCodeAt(r),o=.02519603282416938*u,u=o>>>0,o-=u,o*=u,u=o>>>0,o-=u,u+=o*4294967296;return this.n=u,(u>>>0)*23283064365386963e-26},init:function(f){typeof f=="string"?this.state(f):this.sow(f)},sow:function(f){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!f)for(var o=0;o<f.length&&f[o]!=null;o++){var u=f[o];this.s0-=this.hash(u),this.s0+=~~(this.s0<0),this.s1-=this.hash(u),this.s1+=~~(this.s1<0),this.s2-=this.hash(u),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(f,o){return Math.floor(this.realInRange(0,o-f+1)+f)},between:function(f,o){return Math.floor(this.realInRange(0,o-f+1)+f)},realInRange:function(f,o){return this.frac()*(o-f)+f},normal:function(){return 1-2*this.frac()},uuid:function(){var f="",o="";for(o=f="";f++<36;o+=~f%5|f*3&4?(f^15?8^this.frac()*(f^20?16:4):4).toString(16):"-");return o},pick:function(f){return f[this.integerInRange(0,f.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(f){return f[~~(Math.pow(this.frac(),2)*(f.length-.5)+.5)]},timestamp:function(f,o){return this.realInRange(f||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(f){return typeof f=="string"&&f.match(/^!rnd/)&&(f=f.split(","),this.c=parseFloat(f[1]),this.s0=parseFloat(f[2]),this.s1=parseFloat(f[3]),this.s2=parseFloat(f[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(f){for(var o=f.length-1,u=o;u>0;u--){var r=Math.floor(this.frac()*(u+1)),h=f[r];f[r]=f[u],f[u]=h}return f}});s.exports=g}),63448:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){return g===void 0&&(g=0),a===0?e:(e-=g,e=a*Math.ceil(e/a),f?(g+e)/a:g+e)};s.exports=T}),56583:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){return g===void 0&&(g=0),a===0?e:(e-=g,e=a*Math.floor(e/a),f?(g+e)/a:g+e)};s.exports=T}),77720:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){return g===void 0&&(g=0),a===0?e:(e-=g,e=a*Math.round(e/a),f?(g+e)/a:g+e)};s.exports=T}),73697:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Ceil:e(63448),Floor:e(56583),To:e(77720)}}),85454:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(63595);var a=e(8054),g=e(79291),f={Actions:e(61061),Animations:e(60421),BlendModes:e(10312),Cache:e(83388),Cameras:e(26638),Core:e(42857),Class:e(83419),Create:e(15822),Curves:e(25410),Data:e(44965),Display:e(27460),DOM:e(84902),Events:e(93055),FX:e(66064),Game:e(50127),GameObjects:e(77856),Geom:e(55738),Input:e(14350),Loader:e(57777),Math:e(75508),Physics:e(44563),Plugins:e(18922),Renderer:e(36909),Scale:e(93364),ScaleModes:e(29795),Scene:e(97482),Scenes:e(62194),Structs:e(41392),Textures:e(27458),Tilemaps:e(62501),Time:e(90291),Tweens:e(43066),Utils:e(91799)};f.Sound=e(23717),f=g(!1,f,a),s.exports=f,e.g.Phaser=f}),71289:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(92209),f=e(88571),o=new a({Extends:f,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(r,h,c,l,p){f.call(this,r,h,c,l,p),this.body=null}});s.exports=o}),86689:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(39506),f=e(20339),o=e(89774),u=e(66022),r=e(95540),h=e(46975),c=e(72441),l=e(47956),p=e(37277),m=e(44594),v=e(26099),y=e(82248),E=new a({initialize:function(w){this.scene=w,this.systems=w.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,w.sys.events.once(m.BOOT,this.boot,this),w.sys.events.on(m.START,this.start,this)},boot:function(){this.world=new y(this.scene,this.config),this.add=new u(this.world),this.systems.events.once(m.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new y(this.scene,this.config),this.add=new u(this.world));var C=this.systems.events;r(this.config,"customUpdate",!1)||C.on(m.UPDATE,this.world.update,this.world),C.on(m.POST_UPDATE,this.world.postUpdate,this.world),C.once(m.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(m.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(m.UPDATE,this.world.update,this.world)},getConfig:function(){var C=this.systems.game.config.physics,w=this.systems.settings.physics,A=h(r(w,"arcade",{}),r(C,"arcade",{}));return A},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(C,w,A,M,R){return A===void 0&&(A=null),M===void 0&&(M=null),R===void 0&&(R=A),this.world.collideObjects(C,w,A,M,R,!0)},collide:function(C,w,A,M,R){return A===void 0&&(A=null),M===void 0&&(M=null),R===void 0&&(R=A),this.world.collideObjects(C,w,A,M,R,!1)},collideTiles:function(C,w,A,M,R){return this.world.collideTiles(C,w,A,M,R)},overlapTiles:function(C,w,A,M,R){return this.world.overlapTiles(C,w,A,M,R)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(C,w,A,M,R,P){M===void 0&&(M=60);var b=Math.atan2(A-C.y,w-C.x);return C.body.acceleration.setToPolar(b,M),R!==void 0&&P!==void 0&&C.body.maxVelocity.set(R,P),b},accelerateToObject:function(C,w,A,M,R){return this.accelerateTo(C,w.x,w.y,A,M,R)},closest:function(C,w){w||(w=this.world.bodies.entries);for(var A=Number.MAX_VALUE,M=null,R=C.x,P=C.y,b=w.length,F=0;F<b;F++){var I=w[F],L=I.body||I;if(!(C===I||C===L||C===L.gameObject||C===L.center)){var D=o(R,P,L.center.x,L.center.y);D<A&&(M=I,A=D)}}return M},furthest:function(C,w){w||(w=this.world.bodies.entries);for(var A=-1,M=null,R=C.x,P=C.y,b=w.length,F=0;F<b;F++){var I=w[F],L=I.body||I;if(!(C===I||C===L||C===L.gameObject||C===L.center)){var D=o(R,P,L.center.x,L.center.y);D>A&&(M=I,A=D)}}return M},moveTo:function(C,w,A,M,R){M===void 0&&(M=60),R===void 0&&(R=0);var P=Math.atan2(A-C.y,w-C.x);return R>0&&(M=f(C.x,C.y,w,A)/(R/1e3)),C.body.velocity.setToPolar(P,M),P},moveToObject:function(C,w,A,M){return this.moveTo(C,w.x,w.y,A,M)},velocityFromAngle:function(C,w,A){return w===void 0&&(w=60),A===void 0&&(A=new v),A.setToPolar(g(C),w)},velocityFromRotation:function(C,w,A){return w===void 0&&(w=60),A===void 0&&(A=new v),A.setToPolar(C,w)},overlapRect:function(C,w,A,M,R,P){return l(this.world,C,w,A,M,R,P)},overlapCirc:function(C,w,A,M,R){return c(this.world,C,w,A,M,R)},shutdown:function(){if(this.world){var C=this.systems.events;C.off(m.UPDATE,this.world.update,this.world),C.off(m.POST_UPDATE,this.world.postUpdate,this.world),C.off(m.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(m.START,this.start,this),this.scene=null,this.systems=null}});p.register("ArcadePhysics",E,"arcadePhysics"),s.exports=E}),13759:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(92209),f=e(68287),o=new a({Extends:f,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(r,h,c,l,p){f.call(this,r,h,c,l,p),this.body=null}});s.exports=o}),37742:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(78389),f=e(37747),o=e(63012),u=e(43396),r=e(87841),h=e(37303),c=e(95829),l=e(26099),p=new a({Mixins:[g],initialize:function(v,y){var E=64,C=64,w={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},A=y!==void 0;A&&y.displayWidth&&(E=y.displayWidth,C=y.displayHeight),A||(y=w),this.world=v,this.gameObject=A?y:void 0,this.isBody=!0,this.transform={x:y.x,y:y.y,rotation:y.angle,scaleX:y.scaleX,scaleY:y.scaleY,displayOriginX:y.displayOriginX,displayOriginY:y.displayOriginY},this.debugShowBody=v.defaults.debugShowBody,this.debugShowVelocity=v.defaults.debugShowVelocity,this.debugBodyColor=v.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(y.x-y.scaleX*y.displayOriginX,y.y-y.scaleY*y.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=y.angle,this.preRotation=y.angle,this.width=E,this.height=C,this.sourceWidth=E,this.sourceHeight=C,y.frame&&(this.sourceWidth=y.frame.realWidth,this.sourceHeight=y.frame.realHeight),this.halfWidth=Math.abs(E/2),this.halfHeight=Math.abs(C/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=v.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=f.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new l(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=c(!1),this.touching=c(!0),this.wasTouching=c(!0),this.blocked=c(!0),this.syncBounds=!1,this.physicsType=f.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=y.scaleX,this._sy=y.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new r,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var m=this.gameObject,v=this.transform;if(m.parentContainer){var y=m.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=y.tx,v.y=y.ty,v.rotation=u(y.rotation),v.scaleX=y.scaleX,v.scaleY=y.scaleY,v.displayOriginX=m.displayOriginX,v.displayOriginY=m.displayOriginY}else v.x=m.x,v.y=m.y,v.rotation=m.angle,v.scaleX=m.scaleX,v.scaleY=m.scaleY,v.displayOriginX=m.displayOriginX,v.displayOriginY=m.displayOriginY;var E=!1;if(this.syncBounds){var C=m.getBounds(this._bounds);this.width=C.width,this.height=C.height,E=!0}else{var w=Math.abs(v.scaleX),A=Math.abs(v.scaleY);(this._sx!==w||this._sy!==A)&&(this.width=this.sourceWidth*w,this.height=this.sourceHeight*A,this._sx=w,this._sy=A,E=!0)}E&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var m=this.transform;this.position.x=m.x+m.scaleX*(this.offset.x-m.displayOriginX),this.position.y=m.y+m.scaleY*(this.offset.y-m.displayOriginY),this.updateCenter()},resetFlags:function(m){m===void 0&&(m=!1);var v=this.wasTouching,y=this.touching,E=this.blocked;m?c(!0,v):(v.none=y.none,v.up=y.up,v.down=y.down,v.left=y.left,v.right=y.right),c(!0,y),c(!0,E),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(m,v){if(m&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var y=this.position;this.prev.x=y.x,this.prev.y=y.y,this.prevFrame.x=y.x,this.prevFrame.y=y.y}m&&this.update(v)},update:function(m){var v=this.prev,y=this.position,E=this.velocity;if(v.set(y.x,y.y),!this.moves){this._dx=y.x-v.x,this._dy=y.y-v.y;return}if(this.directControl){var C=this.autoFrame;E.set((y.x-C.x)/m,(y.y-C.y)/m),this.world.updateMotion(this,m),this._dx=y.x-C.x,this._dy=y.y-C.y}else this.world.updateMotion(this,m),this.newVelocity.set(E.x*m,E.y*m),y.add(this.newVelocity),this._dx=y.x-v.x,this._dy=y.y-v.y;var w=E.x,A=E.y;if(this.updateCenter(),this.angle=Math.atan2(A,w),this.speed=Math.sqrt(w*w+A*A),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var M=this.blocked;this.world.emit(o.WORLD_BOUNDS,this,M.up,M.down,M.left,M.right)}},postUpdate:function(){var m=this.position,v=m.x-this.prevFrame.x,y=m.y-this.prevFrame.y,E=this.gameObject;if(this.moves){var C=this.deltaMax.x,w=this.deltaMax.y;C!==0&&v!==0&&(v<0&&v<-C?v=-C:v>0&&v>C&&(v=C)),w!==0&&y!==0&&(y<0&&y<-w?y=-w:y>0&&y>w&&(y=w)),E&&(E.x+=v,E.y+=y)}v<0?this.facing=f.FACING_LEFT:v>0&&(this.facing=f.FACING_RIGHT),y<0?this.facing=f.FACING_UP:y>0&&(this.facing=f.FACING_DOWN),this.allowRotation&&E&&(E.angle+=this.deltaZ()),this._tx=v,this._ty=y,this.autoFrame.set(m.x,m.y)},setBoundsRectangle:function(m){return this.customBoundsRectangle=m||this.world.bounds,this},checkWorldBounds:function(){var m=this.position,v=this.velocity,y=this.blocked,E=this.customBoundsRectangle,C=this.world.checkCollision,w=this.worldBounce?-this.worldBounce.x:-this.bounce.x,A=this.worldBounce?-this.worldBounce.y:-this.bounce.y,M=!1;return m.x<E.x&&C.left?(m.x=E.x,v.x*=w,y.left=!0,M=!0):this.right>E.right&&C.right&&(m.x=E.right-this.width,v.x*=w,y.right=!0,M=!0),m.y<E.y&&C.up?(m.y=E.y,v.y*=A,y.up=!0,M=!0):this.bottom>E.bottom&&C.down&&(m.y=E.bottom-this.height,v.y*=A,y.down=!0,M=!0),M&&(this.blocked.none=!1,this.updateCenter()),M},setOffset:function(m,v){return v===void 0&&(v=m),this.offset.set(m,v),this},setGameObject:function(m,v){if(v===void 0&&(v=!0),!m||!m.hasTransformComponent)return this;var y=this.world;return this.gameObject&&this.gameObject.body&&(y.disable(this.gameObject),this.gameObject.body=null),m.body&&y.disable(m),this.gameObject=m,m.body=this,this.setSize(),this.enable=v,this},setSize:function(m,v,y){y===void 0&&(y=!0);var E=this.gameObject;if(E&&(!m&&E.frame&&(m=E.frame.realWidth),!v&&E.frame&&(v=E.frame.realHeight)),this.sourceWidth=m,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),y&&E&&E.getCenter){var C=(E.width-m)/2,w=(E.height-v)/2;this.offset.set(C,w)}return this.isCircle=!1,this.radius=0,this},setCircle:function(m,v,y){return v===void 0&&(v=this.offset.x),y===void 0&&(y=this.offset.y),m>0?(this.isCircle=!0,this.radius=m,this.sourceWidth=m*2,this.sourceHeight=m*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,y),this.updateCenter()):this.isCircle=!1,this},reset:function(m,v){this.stop();var y=this.gameObject;y&&(y.setPosition(m,v),this.rotation=y.angle,this.preRotation=y.angle);var E=this.position;y&&y.getTopLeft?y.getTopLeft(E):E.set(m,v),this.prev.copy(E),this.prevFrame.copy(E),this.autoFrame.copy(E),y&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(m){return m.x=this.x,m.y=this.y,m.right=this.right,m.bottom=this.bottom,m},hitTest:function(m,v){if(!this.isCircle)return h(this,m,v);if(this.radius>0&&m>=this.left&&m<=this.right&&v>=this.top&&v<=this.bottom){var y=(this.center.x-m)*(this.center.x-m),E=(this.center.y-v)*(this.center.y-v);return y+E<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(m){var v=this.position,y=v.x+this.halfWidth,E=v.y+this.halfHeight;this.debugShowBody&&(m.lineStyle(m.defaultStrokeWidth,this.debugBodyColor),this.isCircle?m.strokeCircle(y,E,this.width/2):(this.checkCollision.up&&m.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&m.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&m.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&m.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(m.lineStyle(m.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),m.lineBetween(y,E,y+this.velocity.x/2,E+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(m){return m===void 0&&(m=!0),this.directControl=m,this},setCollideWorldBounds:function(m,v,y,E){m===void 0&&(m=!0),this.collideWorldBounds=m;var C=v!==void 0,w=y!==void 0;return(C||w)&&(this.worldBounce||(this.worldBounce=new l),C&&(this.worldBounce.x=v),w&&(this.worldBounce.y=y)),E!==void 0&&(this.onWorldBounds=E),this},setVelocity:function(m,v){return this.velocity.set(m,v),m=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(m*m+v*v),this},setVelocityX:function(m){return this.setVelocity(m,this.velocity.y)},setVelocityY:function(m){return this.setVelocity(this.velocity.x,m)},setMaxVelocity:function(m,v){return this.maxVelocity.set(m,v),this},setMaxVelocityX:function(m){return this.maxVelocity.x=m,this},setMaxVelocityY:function(m){return this.maxVelocity.y=m,this},setMaxSpeed:function(m){return this.maxSpeed=m,this},setSlideFactor:function(m,v){return this.slideFactor.set(m,v),this},setBounce:function(m,v){return this.bounce.set(m,v),this},setBounceX:function(m){return this.bounce.x=m,this},setBounceY:function(m){return this.bounce.y=m,this},setAcceleration:function(m,v){return this.acceleration.set(m,v),this},setAccelerationX:function(m){return this.acceleration.x=m,this},setAccelerationY:function(m){return this.acceleration.y=m,this},setAllowDrag:function(m){return m===void 0&&(m=!0),this.allowDrag=m,this},setAllowGravity:function(m){return m===void 0&&(m=!0),this.allowGravity=m,this},setAllowRotation:function(m){return m===void 0&&(m=!0),this.allowRotation=m,this},setDrag:function(m,v){return this.drag.set(m,v),this},setDamping:function(m){return this.useDamping=m,this},setDragX:function(m){return this.drag.x=m,this},setDragY:function(m){return this.drag.y=m,this},setGravity:function(m,v){return this.gravity.set(m,v),this},setGravityX:function(m){return this.gravity.x=m,this},setGravityY:function(m){return this.gravity.y=m,this},setFriction:function(m,v){return this.friction.set(m,v),this},setFrictionX:function(m){return this.friction.x=m,this},setFrictionY:function(m){return this.friction.y=m,this},setAngularVelocity:function(m){return this.angularVelocity=m,this},setAngularAcceleration:function(m){return this.angularAcceleration=m,this},setAngularDrag:function(m){return this.angularDrag=m,this},setMass:function(m){return this.mass=m,this},setImmovable:function(m){return m===void 0&&(m=!0),this.immovable=m,this},setEnable:function(m){return m===void 0&&(m=!0),this.enable=m,this},processX:function(m,v,y,E){this.x+=m,this.updateCenter(),v!==null&&(this.velocity.x=v*this.slideFactor.x);var C=this.blocked;y&&(C.left=!0,C.none=!1),E&&(C.right=!0,C.none=!1)},processY:function(m,v,y,E){this.y+=m,this.updateCenter(),v!==null&&(this.velocity.y=v*this.slideFactor.y);var C=this.blocked;y&&(C.up=!0,C.none=!1),E&&(C.down=!0,C.none=!1)},x:{get:function(){return this.position.x},set:function(m){this.position.x=m}},y:{get:function(){return this.position.y},set:function(m){this.position.y=m}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});s.exports=p}),79342:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r,h,c,l,p){this.world=o,this.name="",this.active=!0,this.overlapOnly=u,this.object1=r,this.object2=h,this.collideCallback=c,this.processCallback=l,this.callbackContext=p},setName:function(f){return this.name=f,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});s.exports=g}),66022:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71289),g=e(13759),f=e(37742),o=e(83419),u=e(37747),r=e(60758),h=e(72624),c=e(71464),l=new o({initialize:function(m){this.world=m,this.scene=m.scene,this.sys=m.scene.sys},collider:function(p,m,v,y,E){return this.world.addCollider(p,m,v,y,E)},overlap:function(p,m,v,y,E){return this.world.addOverlap(p,m,v,y,E)},existing:function(p,m){var v=m?u.STATIC_BODY:u.DYNAMIC_BODY;return this.world.enableBody(p,v),p},staticImage:function(p,m,v,y){var E=new a(this.scene,p,m,v,y);return this.sys.displayList.add(E),this.world.enableBody(E,u.STATIC_BODY),E},image:function(p,m,v,y){var E=new a(this.scene,p,m,v,y);return this.sys.displayList.add(E),this.world.enableBody(E,u.DYNAMIC_BODY),E},staticSprite:function(p,m,v,y){var E=new g(this.scene,p,m,v,y);return this.sys.displayList.add(E),this.sys.updateList.add(E),this.world.enableBody(E,u.STATIC_BODY),E},sprite:function(p,m,v,y){var E=new g(this.scene,p,m,v,y);return this.sys.displayList.add(E),this.sys.updateList.add(E),this.world.enableBody(E,u.DYNAMIC_BODY),E},staticGroup:function(p,m){return this.sys.updateList.add(new c(this.world,this.world.scene,p,m))},group:function(p,m){return this.sys.updateList.add(new r(this.world,this.world.scene,p,m))},body:function(p,m,v,y){var E=new f(this.world);return E.position.set(p,m),v&&y&&E.setSize(v,y),this.world.add(E,u.DYNAMIC_BODY),E},staticBody:function(p,m,v,y){var E=new h(this.world);return E.position.set(p,m),v&&y&&E.setSize(v,y),this.world.add(E,u.STATIC_BODY),E},destroy:function(){this.world=null,this.scene=null,this.sys=null}});s.exports=l}),79599:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=0;if(!Array.isArray(e))a=e;else for(var g=0;g<e.length;g++)a|=e[g];return a};s.exports=T}),64897:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),g=function(f,o,u,r){var h=0,c=f.deltaAbsX()+o.deltaAbsX()+r;return f._dx===0&&o._dx===0?(f.embedded=!0,o.embedded=!0):f._dx>o._dx?(h=f.right-o.x,h>c&&!u||f.checkCollision.right===!1||o.checkCollision.left===!1?h=0:(f.touching.none=!1,f.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===a.STATIC_BODY&&!u&&(f.blocked.none=!1,f.blocked.right=!0),f.physicsType===a.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.left=!0))):f._dx<o._dx&&(h=f.x-o.width-o.x,-h>c&&!u||f.checkCollision.left===!1||o.checkCollision.right===!1?h=0:(f.touching.none=!1,f.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===a.STATIC_BODY&&!u&&(f.blocked.none=!1,f.blocked.left=!0),f.physicsType===a.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.right=!0))),f.overlapX=h,o.overlapX=h,h};s.exports=g}),45170:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),g=function(f,o,u,r){var h=0,c=f.deltaAbsY()+o.deltaAbsY()+r;return f._dy===0&&o._dy===0?(f.embedded=!0,o.embedded=!0):f._dy>o._dy?(h=f.bottom-o.y,h>c&&!u||f.checkCollision.down===!1||o.checkCollision.up===!1?h=0:(f.touching.none=!1,f.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===a.STATIC_BODY&&!u&&(f.blocked.none=!1,f.blocked.down=!0),f.physicsType===a.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.up=!0))):f._dy<o._dy&&(h=f.y-o.bottom,-h>c&&!u||f.checkCollision.up===!1||o.checkCollision.down===!1?h=0:(f.touching.none=!1,f.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===a.STATIC_BODY&&!u&&(f.blocked.none=!1,f.blocked.up=!0),f.physicsType===a.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.down=!0))),f.overlapY=h,o.overlapY=h,h};s.exports=g}),60758:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13759),g=e(83419),f=e(78389),o=e(37747),u=e(95540),r=e(26479),h=e(41212),c=new g({Extends:r,Mixins:[f],initialize:function(p,m,v,y){if(!v&&!y)y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(h(v))y=v,v=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(v)&&h(v[0])){var E=this;v.forEach(function(C){C.internalCreateCallback=E.createCallbackHandler,C.internalRemoveCallback=E.removeCallbackHandler,C.classType=u(C,"classType",a)}),y=null}else y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=p,y&&(y.classType=u(y,"classType",a)),this.physicsType=o.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:u(y,"collideWorldBounds",!1),setBoundsRectangle:u(y,"customBoundsRectangle",null),setAccelerationX:u(y,"accelerationX",0),setAccelerationY:u(y,"accelerationY",0),setAllowDrag:u(y,"allowDrag",!0),setAllowGravity:u(y,"allowGravity",!0),setAllowRotation:u(y,"allowRotation",!0),setDamping:u(y,"useDamping",!1),setBounceX:u(y,"bounceX",0),setBounceY:u(y,"bounceY",0),setDragX:u(y,"dragX",0),setDragY:u(y,"dragY",0),setEnable:u(y,"enable",!0),setGravityX:u(y,"gravityX",0),setGravityY:u(y,"gravityY",0),setFrictionX:u(y,"frictionX",0),setFrictionY:u(y,"frictionY",0),setMaxSpeed:u(y,"maxSpeed",-1),setMaxVelocityX:u(y,"maxVelocityX",1e4),setMaxVelocityY:u(y,"maxVelocityY",1e4),setVelocityX:u(y,"velocityX",0),setVelocityY:u(y,"velocityY",0),setAngularVelocity:u(y,"angularVelocity",0),setAngularAcceleration:u(y,"angularAcceleration",0),setAngularDrag:u(y,"angularDrag",0),setMass:u(y,"mass",1),setImmovable:u(y,"immovable",!1)},r.call(this,m,v,y),this.type="PhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,o.DYNAMIC_BODY);var p=l.body;for(var m in this.defaults)p[m](this.defaults[m])},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},setVelocity:function(l,p,m){m===void 0&&(m=0);for(var v=this.getChildren(),y=0;y<v.length;y++)v[y].body.velocity.set(l+y*m,p+y*m);return this},setVelocityX:function(l,p){p===void 0&&(p=0);for(var m=this.getChildren(),v=0;v<m.length;v++)m[v].body.velocity.x=l+v*p;return this},setVelocityY:function(l,p){p===void 0&&(p=0);for(var m=this.getChildren(),v=0;v<m.length;v++)m[v].body.velocity.y=l+v*p;return this}});s.exports=c}),3017:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,a,g,f,o,u,r,h,c,l,p,m,v,y,E,C,w=function(F,I,L){T=F,e=I;var D=T.velocity.x,O=e.velocity.x;return a=T.pushable,h=T._dx<0,c=T._dx>0,l=T._dx===0,y=Math.abs(T.right-e.x)<=Math.abs(e.right-T.x),u=O-D*T.bounce.x,g=e.pushable,p=e._dx<0,m=e._dx>0,v=e._dx===0,E=!y,r=D-O*e.bounce.x,C=Math.abs(L),A()},A=function(){return c&&y&&e.blocked.right?(T.processX(-C,u,!1,!0),1):h&&E&&e.blocked.left?(T.processX(C,u,!0),1):m&&E&&T.blocked.right?(e.processX(-C,r,!1,!0),2):p&&y&&T.blocked.left?(e.processX(C,r,!0),2):0},M=function(){var F=T.velocity.x,I=e.velocity.x,L=Math.sqrt(I*I*e.mass/T.mass)*(I>0?1:-1),D=Math.sqrt(F*F*T.mass/e.mass)*(F>0?1:-1),O=(L+D)*.5;return L-=O,D-=O,f=O+L*T.bounce.x,o=O+D*e.bounce.x,h&&E?R(0):p&&y?R(1):c&&y?R(2):m&&E?R(3):!1},R=function(F){if(a&&g)C*=.5,F===0||F===3?(T.processX(C,f),e.processX(-C,o)):(T.processX(-C,f),e.processX(C,o));else if(a&&!g)F===0||F===3?T.processX(C,u,!0):T.processX(-C,u,!1,!0);else if(!a&&g)F===0||F===3?e.processX(-C,r,!1,!0):e.processX(C,r,!0);else{var I=C*.5;F===0?v?(T.processX(C,0,!0),e.processX(0,null,!1,!0)):m?(T.processX(I,0,!0),e.processX(-I,0,!1,!0)):(T.processX(I,e.velocity.x,!0),e.processX(-I,null,!1,!0)):F===1?l?(T.processX(0,null,!1,!0),e.processX(C,0,!0)):c?(T.processX(-I,0,!1,!0),e.processX(I,0,!0)):(T.processX(-I,null,!1,!0),e.processX(I,T.velocity.x,!0)):F===2?v?(T.processX(-C,0,!1,!0),e.processX(0,null,!0)):p?(T.processX(-I,0,!1,!0),e.processX(I,0,!0)):(T.processX(-I,e.velocity.x,!1,!0),e.processX(I,null,!0)):F===3&&(l?(T.processX(0,null,!0),e.processX(-C,0,!1,!0)):h?(T.processX(I,0,!0),e.processX(-I,0,!1,!0)):(T.processX(I,e.velocity.y,!0),e.processX(-I,null,!1,!0)))}return!0},P=function(F){if(F===1?e.velocity.x=0:y?e.processX(C,r,!0):e.processX(-C,r,!1,!0),T.moves){var I=T.directControl?T.y-T.autoFrame.y:T.y-T.prev.y;e.y+=I*T.friction.y,e._dy=e.y-e.prev.y}},b=function(F){if(F===2?T.velocity.x=0:E?T.processX(C,u,!0):T.processX(-C,u,!1,!0),e.moves){var I=e.directControl?e.y-e.autoFrame.y:e.y-e.prev.y;T.y+=I*e.friction.y,T._dy=T.y-T.prev.y}};s.exports={BlockCheck:A,Check:M,Set:w,Run:R,RunImmovableBody1:P,RunImmovableBody2:b}}),47962:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,a,g,f,o,u,r,h,c,l,p,m,v,y,E,C,w=function(F,I,L){T=F,e=I;var D=T.velocity.y,O=e.velocity.y;return a=T.pushable,h=T._dy<0,c=T._dy>0,l=T._dy===0,y=Math.abs(T.bottom-e.y)<=Math.abs(e.bottom-T.y),u=O-D*T.bounce.y,g=e.pushable,p=e._dy<0,m=e._dy>0,v=e._dy===0,E=!y,r=D-O*e.bounce.y,C=Math.abs(L),A()},A=function(){return c&&y&&e.blocked.down?(T.processY(-C,u,!1,!0),1):h&&E&&e.blocked.up?(T.processY(C,u,!0),1):m&&E&&T.blocked.down?(e.processY(-C,r,!1,!0),2):p&&y&&T.blocked.up?(e.processY(C,r,!0),2):0},M=function(){var F=T.velocity.y,I=e.velocity.y,L=Math.sqrt(I*I*e.mass/T.mass)*(I>0?1:-1),D=Math.sqrt(F*F*T.mass/e.mass)*(F>0?1:-1),O=(L+D)*.5;return L-=O,D-=O,f=O+L*T.bounce.y,o=O+D*e.bounce.y,h&&E?R(0):p&&y?R(1):c&&y?R(2):m&&E?R(3):!1},R=function(F){if(a&&g)C*=.5,F===0||F===3?(T.processY(C,f),e.processY(-C,o)):(T.processY(-C,f),e.processY(C,o));else if(a&&!g)F===0||F===3?T.processY(C,u,!0):T.processY(-C,u,!1,!0);else if(!a&&g)F===0||F===3?e.processY(-C,r,!1,!0):e.processY(C,r,!0);else{var I=C*.5;F===0?v?(T.processY(C,0,!0),e.processY(0,null,!1,!0)):m?(T.processY(I,0,!0),e.processY(-I,0,!1,!0)):(T.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)):F===1?l?(T.processY(0,null,!1,!0),e.processY(C,0,!0)):c?(T.processY(-I,0,!1,!0),e.processY(I,0,!0)):(T.processY(-I,null,!1,!0),e.processY(I,T.velocity.y,!0)):F===2?v?(T.processY(-C,0,!1,!0),e.processY(0,null,!0)):p?(T.processY(-I,0,!1,!0),e.processY(I,0,!0)):(T.processY(-I,e.velocity.y,!1,!0),e.processY(I,null,!0)):F===3&&(l?(T.processY(0,null,!0),e.processY(-C,0,!1,!0)):h?(T.processY(I,0,!0),e.processY(-I,0,!1,!0)):(T.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)))}return!0},P=function(F){if(F===1?e.velocity.y=0:y?e.processY(C,r,!0):e.processY(-C,r,!1,!0),T.moves){var I=T.directControl?T.x-T.autoFrame.x:T.x-T.prev.x;e.x+=I*T.friction.x,e._dx=e.x-e.prev.x}},b=function(F){if(F===2?T.velocity.y=0:E?T.processY(C,u,!0):T.processY(-C,u,!1,!0),e.moves){var I=e.directControl?e.x-e.autoFrame.x:e.x-e.prev.x;T.x+=I*e.friction.x,T._dx=T.x-T.prev.x}};s.exports={BlockCheck:A,Check:M,Set:w,Run:R,RunImmovableBody1:P,RunImmovableBody2:b}}),14087:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64897),g=e(3017),f=function(o,u,r,h,c){c===void 0&&(c=a(o,u,r,h));var l=o.immovable,p=u.immovable;if(r||c===0||l&&p||o.customSeparateX||u.customSeparateX)return c!==0||o.embedded&&u.embedded;var m=g.Set(o,u,c);return!l&&!p?m>0?!0:g.Check():(l?g.RunImmovableBody1(m):p&&g.RunImmovableBody2(m),!0)};s.exports=f}),89936:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45170),g=e(47962),f=function(o,u,r,h,c){c===void 0&&(c=a(o,u,r,h));var l=o.immovable,p=u.immovable;if(r||c===0||l&&p||o.customSeparateY||u.customSeparateY)return c!==0||o.embedded&&u.embedded;var m=g.Set(o,u,c);return!l&&!p?m>0?!0:g.Check():(l?g.RunImmovableBody1(m):p&&g.RunImmovableBody2(m),!0)};s.exports=f}),95829:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a={}),a.none=e,a.up=!1,a.down=!1,a.left=!1,a.right=!1,e||(a.up=!0,a.down=!0,a.left=!0,a.right=!0),a};s.exports=T}),72624:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),g=e(83419),f=e(78389),o=e(37747),u=e(37303),r=e(95829),h=e(26099),c=new g({Mixins:[f],initialize:function(p,m){var v=64,y=64,E={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},C=m!==void 0;C&&m.displayWidth&&(v=m.displayWidth,y=m.displayHeight),C||(m=E),this.world=p,this.gameObject=C?m:void 0,this.isBody=!0,this.debugShowBody=p.defaults.debugShowStaticBody,this.debugBodyColor=p.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(m.x-v*m.originX,m.y-y*m.originY),this.width=v,this.height=y,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=r(!1),this.touching=r(!0),this.wasTouching=r(!0),this.blocked=r(!0),this.physicsType=o.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(l,p,m){if(p===void 0&&(p=!0),m===void 0&&(m=!0),!l||!l.hasTransformComponent)return this;var v=this.world;return this.gameObject&&this.gameObject.body&&(v.disable(this.gameObject),this.gameObject.body=null),l.body&&v.disable(l),this.gameObject=l,l.body=this,this.setSize(),p&&this.updateFromGameObject(),this.enable=m,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var l=this.gameObject;return l.getTopLeft(this.position),this.width=l.displayWidth,this.height=l.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(l,p){return p===void 0&&(p=l),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(l,p),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(l,p,m){m===void 0&&(m=!0);var v=this.gameObject;if(v&&v.frame&&(l||(l=v.frame.realWidth),p||(p=v.frame.realHeight)),this.world.staticTree.remove(this),this.width=l,this.height=p,this.halfWidth=Math.floor(l/2),this.halfHeight=Math.floor(p/2),m&&v&&v.getCenter){var y=v.displayWidth/2,E=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(y-this.halfWidth,E-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(l,p,m){return p===void 0&&(p=this.offset.x),m===void 0&&(m=this.offset.y),l>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=l,this.width=l*2,this.height=l*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(p,m),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(l,p){var m=this.gameObject;l===void 0&&(l=m.x),p===void 0&&(p=m.y),this.world.staticTree.remove(this),m.setPosition(l,p),m.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,p){return this.isCircle?a(this,l,p):u(this,l,p)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(l){var p=this.position,m=p.x+this.halfWidth,v=p.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?l.strokeCircle(m,v,this.width/2):l.strokeRect(p.x,p.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(l){return l<=0&&(l=.1),this.mass=l,this},x:{get:function(){return this.position.x},set:function(l){this.world.staticTree.remove(this),this.position.x=l,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(l){this.world.staticTree.remove(this),this.position.y=l,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});s.exports=c}),71464:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13759),g=e(83419),f=e(78389),o=e(37747),u=e(95540),r=e(26479),h=e(41212),c=new g({Extends:r,Mixins:[f],initialize:function(p,m,v,y){!v&&!y?y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a}:h(v)?(y=v,v=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler,y.createMultipleCallback=this.createMultipleCallbackHandler,y.classType=u(y,"classType",a)):Array.isArray(v)&&h(v[0])?(y=v,v=null,y.forEach(function(E){E.internalCreateCallback=this.createCallbackHandler,E.internalRemoveCallback=this.removeCallbackHandler,E.createMultipleCallback=this.createMultipleCallbackHandler,E.classType=u(E,"classType",a)})):y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=p,this.physicsType=o.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,r.call(this,m,v,y),this.type="StaticPhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,o.STATIC_BODY)},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var l=this.children.entries,p=0;p<l.length;p++)l[p].body.reset();return this}});s.exports=c}),82248:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55495),g=e(37742),f=e(45319),o=e(83419),u=e(79342),r=e(37747),h=e(20339),c=e(52816),l=e(50792),p=e(63012),m=e(43855),v=e(5470),y=e(94977),E=e(64897),C=e(45170),w=e(96523),A=e(35154),M=e(36383),R=e(25774),P=e(96602),b=e(87841),F=e(59542),I=e(40012),L=e(14087),D=e(89936),O=e(35072),z=e(72624),_=e(2483),X=e(61340),H=e(26099),U=e(15994),G=new o({Extends:l,initialize:function(W,V){l.call(this),this.scene=W,this.bodies=new O,this.staticBodies=new O,this.pendingDestroy=new O,this.colliders=new R,this.gravity=new H(A(V,"gravity.x",0),A(V,"gravity.y",0)),this.bounds=new b(A(V,"x",0),A(V,"y",0),A(V,"width",W.sys.scale.width),A(V,"height",W.sys.scale.height)),this.checkCollision={up:A(V,"checkCollision.up",!0),down:A(V,"checkCollision.down",!0),left:A(V,"checkCollision.left",!0),right:A(V,"checkCollision.right",!0)},this.fps=A(V,"fps",60),this.fixedStep=A(V,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=A(V,"timeScale",1),this.OVERLAP_BIAS=A(V,"overlapBias",4),this.TILE_BIAS=A(V,"tileBias",16),this.forceX=A(V,"forceX",!1),this.isPaused=A(V,"isPaused",!1),this._total=0,this.drawDebug=A(V,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:A(V,"debugShowBody",!0),debugShowStaticBody:A(V,"debugShowStaticBody",!0),debugShowVelocity:A(V,"debugShowVelocity",!0),bodyDebugColor:A(V,"debugBodyColor",16711935),staticBodyDebugColor:A(V,"debugStaticBodyColor",255),velocityDebugColor:A(V,"debugVelocityColor",65280)},this.maxEntries=A(V,"maxEntries",16),this.useTree=A(V,"useTree",!0),this.tree=new F(this.maxEntries),this.staticTree=new F(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new X,this._tempMatrix2=new X,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(N,W){W===void 0&&(W=r.DYNAMIC_BODY),Array.isArray(N)||(N=[N]);for(var V=0;V<N.length;V++){var $=N[V];if($.isParent)for(var j=$.getChildren(),k=0;k<j.length;k++){var Q=j[k];Q.isParent?this.enable(Q,W):this.enableBody(Q,W)}else this.enableBody($,W)}},enableBody:function(N,W){return W===void 0&&(W=r.DYNAMIC_BODY),N.hasTransformComponent&&(N.body||(W===r.DYNAMIC_BODY?N.body=new g(this,N):W===r.STATIC_BODY&&(N.body=new z(this,N))),this.add(N.body)),N},add:function(N){return N.physicsType===r.DYNAMIC_BODY?this.bodies.set(N):N.physicsType===r.STATIC_BODY&&(this.staticBodies.set(N),this.staticTree.insert(N)),N.enable=!0,N},disable:function(N){Array.isArray(N)||(N=[N]);for(var W=0;W<N.length;W++){var V=N[W];if(V.isParent)for(var $=V.getChildren(),j=0;j<$.length;j++){var k=$[j];k.isParent?this.disable(k):this.disableBody(k.body)}else this.disableBody(V.body)}},disableBody:function(N){this.remove(N),N.enable=!1},remove:function(N){N.physicsType===r.DYNAMIC_BODY?(this.tree.remove(N),this.bodies.delete(N)):N.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(N),this.staticTree.remove(N))},createDebugGraphic:function(){var N=this.scene.sys.add.graphics({x:0,y:0});return N.setDepth(Number.MAX_VALUE),this.debugGraphic=N,this.drawDebug=!0,N},setBounds:function(N,W,V,$,j,k,Q,et){return this.bounds.setTo(N,W,V,$),j!==void 0&&this.setBoundsCollision(j,k,Q,et),this},setBoundsCollision:function(N,W,V,$){return N===void 0&&(N=!0),W===void 0&&(W=!0),V===void 0&&(V=!0),$===void 0&&($=!0),this.checkCollision.left=N,this.checkCollision.right=W,this.checkCollision.up=V,this.checkCollision.down=$,this},pause:function(){return this.isPaused=!0,this.emit(p.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(p.RESUME),this},addCollider:function(N,W,V,$,j){V===void 0&&(V=null),$===void 0&&($=null),j===void 0&&(j=V);var k=new u(this,!1,N,W,V,$,j);return this.colliders.add(k),k},addOverlap:function(N,W,V,$,j){V===void 0&&(V=null),$===void 0&&($=null),j===void 0&&(j=V);var k=new u(this,!0,N,W,V,$,j);return this.colliders.add(k),k},removeCollider:function(N){return this.colliders.remove(N),this},setFPS:function(N){return this.fps=N,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(N,W){if(!(this.isPaused||this.bodies.size===0)){var V,$=this._frameTime,j=this._frameTimeMS*this.timeScale;this._elapsed+=W;var k,Q=this.bodies.entries,et=this._elapsed>=j;for(this.fixedStep||($=W*.001,et=!0,this._elapsed=0),V=0;V<Q.length;V++)k=Q[V],k.enable&&k.preUpdate(et,$);if(et){this._elapsed-=j,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Q));var at=this.colliders.update();for(V=0;V<at.length;V++){var q=at[V];q.active&&q.update()}this.emit(p.WORLD_STEP,$)}for(;this._elapsed>=j;)this._elapsed-=j,this.step($)}},step:function(N){var W,V,$=this.bodies.entries,j=$.length;for(W=0;W<j;W++)V=$[W],V.enable&&V.update(N);this.useTree&&(this.tree.clear(),this.tree.load($));var k=this.colliders.update();for(W=0;W<k.length;W++){var Q=k[W];Q.active&&Q.update()}this.emit(p.WORLD_STEP,N),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var N,W,V=this.bodies.entries,$=V.length,j=this.bodies,k=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,N=0;N<$;N++)W=V[N],W.enable&&W.postUpdate();if(this.drawDebug){var Q=this.debugGraphic;for(Q.clear(),N=0;N<$;N++)W=V[N],W.willDrawDebug()&&W.drawDebug(Q);for(V=k.entries,$=V.length,N=0;N<$;N++)W=V[N],W.willDrawDebug()&&W.drawDebug(Q)}var et=this.pendingDestroy;if(et.size>0){var at=this.tree,q=this.staticTree;for(V=et.entries,$=V.length,N=0;N<$;N++)W=V[N],W.physicsType===r.DYNAMIC_BODY?(at.remove(W),j.delete(W)):W.physicsType===r.STATIC_BODY&&(q.remove(W),k.delete(W)),W.world=void 0,W.gameObject=void 0;et.clear()}},updateMotion:function(N,W){N.allowRotation&&this.computeAngularVelocity(N,W),this.computeVelocity(N,W)},computeAngularVelocity:function(N,W){var V=N.angularVelocity,$=N.angularAcceleration,j=N.angularDrag,k=N.maxAngular;$?V+=$*W:N.allowDrag&&j&&(j*=W,v(V-j,0,.1)?V-=j:y(V+j,0,.1)?V+=j:V=0),V=f(V,-k,k);var Q=V-N.angularVelocity;N.angularVelocity+=Q,N.rotation+=N.angularVelocity*W},computeVelocity:function(N,W){var V=N.velocity.x,$=N.acceleration.x,j=N.drag.x,k=N.maxVelocity.x,Q=N.velocity.y,et=N.acceleration.y,at=N.drag.y,q=N.maxVelocity.y,ft=N.speed,vt=N.maxSpeed,Tt=N.allowDrag,ct=N.useDamping;N.allowGravity&&(V+=(this.gravity.x+N.gravity.x)*W,Q+=(this.gravity.y+N.gravity.y)*W),$?V+=$*W:Tt&&j&&(ct?(j=Math.pow(j,W),V*=j,ft=Math.sqrt(V*V+Q*Q),m(ft,0,.001)&&(V=0)):(j*=W,v(V-j,0,.01)?V-=j:y(V+j,0,.01)?V+=j:V=0)),et?Q+=et*W:Tt&&at&&(ct?(at=Math.pow(at,W),Q*=at,ft=Math.sqrt(V*V+Q*Q),m(ft,0,.001)&&(Q=0)):(at*=W,v(Q-at,0,.01)?Q-=at:y(Q+at,0,.01)?Q+=at:Q=0)),V=f(V,-k,k),Q=f(Q,-q,q),N.velocity.set(V,Q),vt>-1&&N.velocity.length()>vt&&(N.velocity.normalize().scale(vt),ft=vt),N.speed=ft},separate:function(N,W,V,$,j){var k,Q,et=!1,at=!0;if(!N.enable||!W.enable||N.checkCollision.none||W.checkCollision.none||!this.intersects(N,W)||(N.collisionMask&W.collisionCategory)===0||(W.collisionMask&N.collisionCategory)===0||V&&V.call($,N.gameObject||N,W.gameObject||W)===!1)return et;if(N.isCircle||W.isCircle){var q=this.separateCircle(N,W,j);q.result?(et=!0,at=!1):(k=q.x,Q=q.y,at=!0)}if(at){var ft=!1,vt=!1,Tt=this.OVERLAP_BIAS;j?(ft=L(N,W,j,Tt,k),vt=D(N,W,j,Tt,Q)):this.forceX||Math.abs(this.gravity.y+N.gravity.y)<Math.abs(this.gravity.x+N.gravity.x)?(ft=L(N,W,j,Tt,k),this.intersects(N,W)&&(vt=D(N,W,j,Tt,Q))):(vt=D(N,W,j,Tt,Q),this.intersects(N,W)&&(ft=L(N,W,j,Tt,k))),et=ft||vt}return et&&(j?(N.onOverlap||W.onOverlap)&&this.emit(p.OVERLAP,N.gameObject,W.gameObject,N,W):(N.onCollide||W.onCollide)&&this.emit(p.COLLIDE,N.gameObject,W.gameObject,N,W)),et},separateCircle:function(N,W,V){E(N,W,!1,0),C(N,W,!1,0);var $=N.isCircle,j=W.isCircle,k=N.center,Q=W.center,et=N.immovable,at=W.immovable,q=N.velocity,ft=W.velocity,vt=0,Tt=!0;if($!==j){Tt=!1;var ct=k.x,Ut=k.y,yt=N.halfWidth,it=W.position.x,Z=W.position.y,lt=W.right,pt=W.bottom;j&&(ct=Q.x,Ut=Q.y,yt=W.halfWidth,it=N.position.x,Z=N.position.y,lt=N.right,pt=N.bottom),Ut<Z?ct<it?vt=h(ct,Ut,it,Z)-yt:ct>lt&&(vt=h(ct,Ut,lt,Z)-yt):Ut>pt&&(ct<it?vt=h(ct,Ut,it,pt)-yt:ct>lt&&(vt=h(ct,Ut,lt,pt)-yt)),vt*=-1}else vt=N.halfWidth+W.halfWidth-c(k,Q);N.overlapR=vt,W.overlapR=vt;var Pt=a(k,Q),wt=(vt+M.EPSILON)*Math.cos(Pt),jt=(vt+M.EPSILON)*Math.sin(Pt),Vt={overlap:vt,result:!1,x:wt,y:jt};if(V&&(!Tt||Tt&&vt!==0))return Vt.result=!0,Vt;if(!Tt&&vt===0||et&&at||N.customSeparateX||W.customSeparateX)return Vt.x=void 0,Vt.y=void 0,Vt;var Wt=!N.pushable&&!W.pushable;if(Tt){var ue=k.x-Q.x,Gt=k.y-Q.y,zt=Math.sqrt(Math.pow(ue,2)+Math.pow(Gt,2)),Yt=(Q.x-k.x)/zt||0,bt=(Q.y-k.y)/zt||0,Kt=2*(q.x*Yt+q.y*bt-ft.x*Yt-ft.y*bt)/(N.mass+W.mass);(et||at||!N.pushable||!W.pushable)&&(Kt*=2),!et&&N.pushable&&(q.x=q.x-Kt/N.mass*Yt,q.y=q.y-Kt/N.mass*bt,q.multiply(N.bounce)),!at&&W.pushable&&(ft.x=ft.x+Kt/W.mass*Yt,ft.y=ft.y+Kt/W.mass*bt,ft.multiply(W.bounce)),!et&&!at&&(wt*=.5,jt*=.5),(!et||N.pushable||Wt)&&(N.x-=wt,N.y-=jt,N.updateCenter()),(!at||W.pushable||Wt)&&(W.x+=wt,W.y+=jt,W.updateCenter()),Vt.result=!0}else!et&&(N.pushable||Wt)&&(N.x-=wt,N.y-=jt,N.updateCenter()),!at&&(W.pushable||Wt)&&(W.x+=wt,W.y+=jt,W.updateCenter()),Vt.x=void 0,Vt.y=void 0;return Vt},intersects:function(N,W){return N===W?!1:!N.isCircle&&!W.isCircle?!(N.right<=W.left||N.bottom<=W.top||N.left>=W.right||N.top>=W.bottom):N.isCircle?W.isCircle?c(N.center,W.center)<=N.halfWidth+W.halfWidth:this.circleBodyIntersects(N,W):this.circleBodyIntersects(W,N)},circleBodyIntersects:function(N,W){var V=f(N.center.x,W.left,W.right),$=f(N.center.y,W.top,W.bottom),j=(N.center.x-V)*(N.center.x-V),k=(N.center.y-$)*(N.center.y-$);return j+k<=N.halfWidth*N.halfWidth},overlap:function(N,W,V,$,j){return V===void 0&&(V=null),$===void 0&&($=null),j===void 0&&(j=V),this.collideObjects(N,W,V,$,j,!0)},collide:function(N,W,V,$,j){return V===void 0&&(V=null),$===void 0&&($=null),j===void 0&&(j=V),this.collideObjects(N,W,V,$,j,!1)},collideObjects:function(N,W,V,$,j,k){var Q,et;N.isParent&&(N.physicsType===void 0||W===void 0||N===W)&&(N=N.children.entries),W&&W.isParent&&W.physicsType===void 0&&(W=W.children.entries);var at=Array.isArray(N),q=Array.isArray(W);if(this._total=0,!at&&!q)this.collideHandler(N,W,V,$,j,k);else if(!at&&q)for(Q=0;Q<W.length;Q++)this.collideHandler(N,W[Q],V,$,j,k);else if(at&&!q)if(W)for(Q=0;Q<N.length;Q++)this.collideHandler(N[Q],W,V,$,j,k);else for(Q=0;Q<N.length;Q++){var ft=N[Q];for(et=Q+1;et<N.length;et++)Q!==et&&this.collideHandler(ft,N[et],V,$,j,k)}else for(Q=0;Q<N.length;Q++)for(et=0;et<W.length;et++)this.collideHandler(N[Q],W[et],V,$,j,k);return this._total>0},collideHandler:function(N,W,V,$,j,k){if(W===void 0&&N.isParent)return this.collideGroupVsGroup(N,N,V,$,j,k);if(!N||!W)return!1;if(N.body||N.isBody){if(W.body||W.isBody)return this.collideSpriteVsSprite(N,W,V,$,j,k);if(W.isParent)return this.collideSpriteVsGroup(N,W,V,$,j,k);if(W.isTilemap)return this.collideSpriteVsTilemapLayer(N,W,V,$,j,k)}else if(N.isParent){if(W.body||W.isBody)return this.collideSpriteVsGroup(W,N,V,$,j,k);if(W.isParent)return this.collideGroupVsGroup(N,W,V,$,j,k);if(W.isTilemap)return this.collideGroupVsTilemapLayer(N,W,V,$,j,k)}else if(N.isTilemap){if(W.body||W.isBody)return this.collideSpriteVsTilemapLayer(W,N,V,$,j,k);if(W.isParent)return this.collideGroupVsTilemapLayer(W,N,V,$,j,k)}},canCollide:function(N,W){return N&&W&&(N.collisionMask&W.collisionCategory)!==0&&(W.collisionMask&N.collisionCategory)!==0},collideSpriteVsSprite:function(N,W,V,$,j,k){var Q=N.isBody?N:N.body,et=W.isBody?W:W.body;return this.canCollide(Q,et)?(this.separate(Q,et,$,j,k)&&(V&&V.call(j,N,W),this._total++),!0):!1},collideSpriteVsGroup:function(N,W,V,$,j,k){var Q=N.isBody?N:N.body;if(!(W.getLength()===0||!Q||!Q.enable||Q.checkCollision.none||!this.canCollide(Q,W))){var et,at,q;if(this.useTree||W.physicsType===r.STATIC_BODY){var ft=this.treeMinMax;ft.minX=Q.left,ft.minY=Q.top,ft.maxX=Q.right,ft.maxY=Q.bottom;var vt=W.physicsType===r.DYNAMIC_BODY?this.tree.search(ft):this.staticTree.search(ft);for(at=vt.length,et=0;et<at;et++)q=vt[et],!(Q===q||!q.enable||q.checkCollision.none||!W.contains(q.gameObject))&&this.separate(Q,q,$,j,k)&&(V&&V.call(j,Q.gameObject,q.gameObject),this._total++)}else{var Tt=W.getChildren(),ct=W.children.entries.indexOf(N);for(at=Tt.length,et=0;et<at;et++)q=Tt[et].body,!(!q||et===ct||!q.enable)&&this.separate(Q,q,$,j,k)&&(V&&V.call(j,Q.gameObject,q.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(N,W,V,$,j,k){if(!this.canCollide(N,W))return!1;var Q=N.getChildren();if(Q.length===0)return!1;for(var et=!1,at=0;at<Q.length;at++)(Q[at].body||Q[at].isBody)&&this.collideSpriteVsTilemapLayer(Q[at],W,V,$,j,k)&&(et=!0);return et},collideTiles:function(N,W,V,$,j){return W.length===0||N.body&&!N.body.enable||N.isBody&&!N.enable?!1:this.collideSpriteVsTilesHandler(N,W,V,$,j,!1,!1)},overlapTiles:function(N,W,V,$,j){return W.length===0||N.body&&!N.body.enable||N.isBody&&!N.enable?!1:this.collideSpriteVsTilesHandler(N,W,V,$,j,!0,!1)},collideSpriteVsTilemapLayer:function(N,W,V,$,j,k){var Q=N.isBody?N:N.body;if(!Q.enable||Q.checkCollision.none||!this.canCollide(Q,W))return!1;var et=W.layer,at=Q.x-et.tileWidth*W.scaleX,q=Q.y-et.tileHeight*W.scaleY,ft=Q.width+et.tileWidth*W.scaleX,vt=Q.height+et.tileHeight*W.scaleY,Tt=k?null:this.tileFilterOptions,ct=w(at,q,ft,vt,Tt,W.scene.cameras.main,W.layer);return ct.length===0?!1:this.collideSpriteVsTilesHandler(N,ct,V,$,j,k,!0)},collideSpriteVsTilesHandler:function(N,W,V,$,j,k,Q){for(var et=N.isBody?N:N.body,at,q={left:0,right:0,top:0,bottom:0},ft,vt=!1,Tt=0;Tt<W.length;Tt++){at=W[Tt],ft=at.tilemapLayer;var ct=ft.tileToWorldXY(at.x,at.y);q.left=ct.x,q.top=ct.y,q.right=q.left+at.width*ft.scaleX,q.bottom=q.top+at.height*ft.scaleY,_(q,et)&&(!$||$.call(j,N,at))&&P(at,N)&&(k||I(Tt,et,at,q,ft,this.TILE_BIAS,Q))&&(this._total++,vt=!0,V&&V.call(j,N,at),k&&et.onOverlap?this.emit(p.TILE_OVERLAP,N,at,et):et.onCollide&&this.emit(p.TILE_COLLIDE,N,at,et))}return vt},collideGroupVsGroup:function(N,W,V,$,j,k){if(!(N.getLength()===0||W.getLength()===0||!this.canCollide(N,W)))for(var Q=N.getChildren(),et=0;et<Q.length;et++)this.collideSpriteVsGroup(Q[et],W,V,$,j,k)},wrap:function(N,W){N.body?this.wrapObject(N,W):N.getChildren?this.wrapArray(N.getChildren(),W):Array.isArray(N)?this.wrapArray(N,W):this.wrapObject(N,W)},wrapArray:function(N,W){for(var V=0;V<N.length;V++)this.wrapObject(N[V],W)},wrapObject:function(N,W){W===void 0&&(W=0),N.x=U(N.x,this.bounds.left-W,this.bounds.right+W),N.y=U(N.y,this.bounds.top-W,this.bounds.bottom+W)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});s.exports=G}),1093:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAcceleration:function(e,a){return this.body.acceleration.set(e,a),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};s.exports=T}),59023:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};s.exports=T}),62069:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e,a){return this.body.bounce.set(e,a),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,a,g,f){return this.body.setCollideWorldBounds(e,a,g,f),this}};s.exports=T}),78389:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79599),g={setCollisionCategory:function(f){var o=this.body?this.body:this;return o.collisionCategory=f,this},willCollideWith:function(f){var o=this.body?this.body:this;return(o.collisionMask&f)!==0},addCollidesWith:function(f){var o=this.body?this.body:this;return o.collisionMask=o.collisionMask|f,this},removeCollidesWith:function(f){var o=this.body?this.body:this;return o.collisionMask=o.collisionMask&~f,this},setCollidesWith:function(f){var o=this.body?this.body:this;return o.collisionMask=a(f),this},resetCollisionCategory:function(){var f=this.body?this.body:this;return f.collisionCategory=1,f.collisionMask=2147483647,this}};s.exports=g}),87118:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDebug:function(e,a,g){return this.debugShowBody=e,this.debugShowVelocity=a,this.debugBodyColor=g,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};s.exports=T}),52819:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDrag:function(e,a){return this.body.drag.set(e,a),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};s.exports=T}),4074:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDirectControl:function(e){return this.body.setDirectControl(e),this},enableBody:function(e,a,g,f,o){return e&&this.body.reset(a,g),f&&(this.body.gameObject.active=!0),o&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,a){return e===void 0&&(e=!1),a===void 0&&(a=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),a&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};s.exports=T}),40831:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,a){return this.body.friction.set(e,a),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};s.exports=T}),26775:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setGravity:function(e,a){return this.body.gravity.set(e,a),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};s.exports=T}),9437:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};s.exports=T}),30621:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setMass:function(e){return this.body.mass=e,this}};s.exports=T}),72441:((s,T,e)=>{var a=e(47956),g=e(96503),f=e(2044),o=e(81491),u=function(r,h,c,l,p,m){var v=a(r,h-l,c-l,2*l,2*l,p,m);if(v.length===0)return v;for(var y=new g(h,c,l),E=new g,C=[],w=0;w<v.length;w++){var A=v[w];A.isCircle?(E.setTo(A.center.x,A.center.y,A.halfWidth),f(y,E)&&C.push(A)):o(y,A)&&C.push(A)}return C};s.exports=u}),47956:(s=>{var T=function(e,a,g,f,o,u,r){u===void 0&&(u=!0),r===void 0&&(r=!1);var h=[],c=[],l=e.treeMinMax;if(l.minX=a,l.minY=g,l.maxX=a+f,l.maxY=g+o,r&&(c=e.staticTree.search(l)),u&&e.useTree)h=e.tree.search(l);else if(u){var p=e.bodies,m={position:{x:a,y:g},left:a,top:g,right:a+f,bottom:g+o,isCircle:!1},v=e.intersects;p.iterate(function(y){v(y,m)&&h.push(y)})}return c.concat(h)};s.exports=T}),62121:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};s.exports=T}),29384:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setOffset:function(e,a){return this.body.setOffset(e,a),this},setSize:function(e,a,g){return this.body.setSize(e,a,g),this},setBodySize:function(e,a,g){return this.body.setSize(e,a,g),this},setCircle:function(e,a,g){return this.body.setCircle(e,a,g),this}};s.exports=T}),15098:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setVelocity:function(e,a){return this.body.setVelocity(e,a),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,a){return this.body.maxVelocity.set(e,a),this}};s.exports=T}),92209:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Acceleration:e(1093),Angular:e(59023),Bounce:e(62069),Collision:e(78389),Debug:e(87118),Drag:e(52819),Enable:e(4074),Friction:e(40831),Gravity:e(26775),Immovable:e(9437),Mass:e(30621),OverlapCirc:e(72441),OverlapRect:e(47956),Pushable:e(62121),Size:e(29384),Velocity:e(15098)}}),37747:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};s.exports=T}),20009:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="collide"}),36768:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="overlap"}),60473:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),89954:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),61804:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="tilecollide"}),7161:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="tileoverlap"}),34689:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="worldbounds"}),16006:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="worldstep"}),63012:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={COLLIDE:e(20009),OVERLAP:e(36768),PAUSE:e(60473),RESUME:e(89954),TILE_COLLIDE:e(61804),TILE_OVERLAP:e(7161),WORLD_BOUNDS:e(34689),WORLD_STEP:e(16006)}}),27064:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),g=e(79291),f={ArcadePhysics:e(86689),Body:e(37742),Collider:e(79342),Components:e(92209),Events:e(63012),Factory:e(66022),GetCollidesWith:e(79599),GetOverlapX:e(64897),GetOverlapY:e(45170),SeparateX:e(14087),SeparateY:e(89936),Group:e(60758),Image:e(71289),Sprite:e(13759),StaticBody:e(72624),StaticGroup:e(71464),Tilemap:e(55173),World:e(82248)};f=g(!1,f,a),s.exports=f}),96602:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,a,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,a,e):!0};s.exports=T}),36294:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a<0?(e.blocked.none=!1,e.blocked.left=!0):a>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=a,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};s.exports=T}),67013:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a<0?(e.blocked.none=!1,e.blocked.up=!0):a>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=a,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};s.exports=T}),40012:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21329),g=e(53442),f=e(2483),o=function(u,r,h,c,l,p,m){var v=c.left,y=c.top,E=c.right,C=c.bottom,w=h.faceLeft||h.faceRight,A=h.faceTop||h.faceBottom;if(m||(w=!0,A=!0),!w&&!A)return!1;var M=0,R=0,P=0,b=1;if(r.deltaAbsX()>r.deltaAbsY()?P=-1:r.deltaAbsX()<r.deltaAbsY()&&(b=-1),r.deltaX()!==0&&r.deltaY()!==0&&w&&A&&(P=Math.min(Math.abs(r.position.x-E),Math.abs(r.right-v)),b=Math.min(Math.abs(r.position.y-C),Math.abs(r.bottom-y))),P<b){if(w&&(M=a(r,h,v,E,p,m),M!==0&&!f(c,r)))return!0;A&&(R=g(r,h,y,C,p,m))}else{if(A&&(R=g(r,h,y,C,p,m),R!==0&&!f(c,r)))return!0;w&&(M=a(r,h,v,E,p,m))}return M!==0||R!==0};s.exports=o}),21329:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36294),g=function(f,o,u,r,h,c){var l=0,p=o.faceLeft,m=o.faceRight,v=o.collideLeft,y=o.collideRight;return c||(p=!0,m=!0,v=!0,y=!0),f.deltaX()<0&&y&&f.checkCollision.left?m&&f.x<r&&(l=f.x-r,l<-h&&(l=0)):f.deltaX()>0&&v&&f.checkCollision.right&&p&&f.right>u&&(l=f.right-u,l>h&&(l=0)),l!==0&&(f.customSeparateX?f.overlapX=l:a(f,l)),l};s.exports=g}),53442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67013),g=function(f,o,u,r,h,c){var l=0,p=o.faceTop,m=o.faceBottom,v=o.collideUp,y=o.collideDown;return c||(p=!0,m=!0,v=!0,y=!0),f.deltaY()<0&&y&&f.checkCollision.up?m&&f.y<r&&(l=f.y-r,l<-h&&(l=0)):f.deltaY()>0&&v&&f.checkCollision.down&&p&&f.bottom>u&&(l=f.bottom-u,l>h&&(l=0)),l!==0&&(f.customSeparateY?f.overlapY=l:a(f,l)),l};s.exports=g}),2483:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return!(a.right<=e.left||a.bottom<=e.top||a.position.x>=e.right||a.position.y>=e.bottom)};s.exports=T}),55173:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ProcessTileCallbacks:e(96602),ProcessTileSeparationX:e(36294),ProcessTileSeparationY:e(67013),SeparateTile:e(40012),TileCheckX:e(21329),TileCheckY:e(53442),TileIntersectsBody:e(2483)};s.exports=a}),44563:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Arcade:e(27064),Matter:e(3875)}}),68174:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(26099),f=new a({initialize:function(){this.boundsCenter=new g,this.centerDiff=new g},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var u=this.boundsCenter,r=this.centerDiff,h=o.bounds.max.x-o.bounds.min.x,c=o.bounds.max.y-o.bounds.min.y,l=h*o.centerOfMass.x,p=c*o.centerOfMass.y;return u.set(h/2,c/2),r.set(l-u.x,p-u.y),!0},getTopLeft:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,c=this.centerDiff;return new g(u+h.x+c.x,r+h.y+c.y)}return!1},getTopCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,c=this.centerDiff;return new g(u+c.x,r+h.y+c.y)}return!1},getTopRight:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,c=this.centerDiff;return new g(u-(h.x-c.x),r+h.y+c.y)}return!1},getLeftCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,c=this.centerDiff;return new g(u+h.x+c.x,r+c.y)}return!1},getCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.centerDiff;return new g(u+h.x,r+h.y)}return!1},getRightCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,c=this.centerDiff;return new g(u-(h.x-c.x),r+c.y)}return!1},getBottomLeft:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,c=this.centerDiff;return new g(u+h.x+c.x,r-(h.y-c.y))}return!1},getBottomCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,c=this.centerDiff;return new g(u+c.x,r-(h.y-c.y))}return!1},getBottomRight:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,c=this.centerDiff;return new g(u-(h.x-c.x),r-(h.y-c.y))}return!1}});s.exports=f}),19933:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6790);a.Body=e(22562),a.Composite=e(69351),a.World=e(4372),a.Collision=e(52284),a.Detector=e(81388),a.Pairs=e(99561),a.Pair=e(4506),a.Query=e(73296),a.Resolver=e(66272),a.Constraint=e(48140),a.Common=e(53402),a.Engine=e(48413),a.Events=e(35810),a.Sleeping=e(53614),a.Plugin=e(73832),a.Bodies=e(66280),a.Composites=e(74116),a.Axes=e(66615),a.Bounds=e(15647),a.Svg=e(74058),a.Vector=e(31725),a.Vertices=e(41598),a.World.add=a.Composite.add,a.World.remove=a.Composite.remove,a.World.addComposite=a.Composite.addComposite,a.World.addBody=a.Composite.addBody,a.World.addConstraint=a.Composite.addConstraint,a.World.clear=a.Composite.clear,s.exports=a}),28137:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),g=e(83419),f=e(74116),o=e(48140),u=e(74058),r=e(75803),h=e(23181),c=e(34803),l=e(73834),p=e(19496),m=e(85791),v=e(98713),y=e(41598),E=new g({initialize:function(w){this.world=w,this.scene=w.scene,this.sys=w.scene.sys},rectangle:function(C,w,A,M,R){var P=a.rectangle(C,w,A,M,R);return this.world.add(P),P},trapezoid:function(C,w,A,M,R,P){var b=a.trapezoid(C,w,A,M,R,P);return this.world.add(b),b},circle:function(C,w,A,M,R){var P=a.circle(C,w,A,M,R);return this.world.add(P),P},polygon:function(C,w,A,M,R){var P=a.polygon(C,w,A,M,R);return this.world.add(P),P},fromVertices:function(C,w,A,M,R,P,b){typeof A=="string"&&(A=y.fromPath(A));var F=a.fromVertices(C,w,A,M,R,P,b);return this.world.add(F),F},fromPhysicsEditor:function(C,w,A,M,R){R===void 0&&(R=!0);var P=p.parseBody(C,w,A,M);return R&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(C,w,A,M,R,P){M===void 0&&(M=1),R===void 0&&(R={}),P===void 0&&(P=!0);for(var b=A.getElementsByTagName("path"),F=[],I=0;I<b.length;I++){var L=u.pathToVertices(b[I],30);M!==1&&y.scale(L,M,M),F.push(L)}var D=a.fromVertices(C,w,F,R);return P&&this.world.add(D),D},fromJSON:function(C,w,A,M,R){M===void 0&&(M={}),R===void 0&&(R=!0);var P=m.parseBody(C,w,A,M);return P&&R&&this.world.add(P),P},imageStack:function(C,w,A,M,R,P,b,F,I){b===void 0&&(b=0),F===void 0&&(F=0),I===void 0&&(I={});var L=this.world,D=this.sys.displayList;I.addToWorld=!1;var O=f.stack(A,M,R,P,b,F,function(z,_){var X=new h(L,z,_,C,w,I);return D.add(X),X.body});return L.add(O),O},stack:function(C,w,A,M,R,P,b){var F=f.stack(C,w,A,M,R,P,b);return this.world.add(F),F},pyramid:function(C,w,A,M,R,P,b){var F=f.pyramid(C,w,A,M,R,P,b);return this.world.add(F),F},chain:function(C,w,A,M,R,P){return f.chain(C,w,A,M,R,P)},mesh:function(C,w,A,M,R){return f.mesh(C,w,A,M,R)},newtonsCradle:function(C,w,A,M,R){var P=f.newtonsCradle(C,w,A,M,R);return this.world.add(P),P},car:function(C,w,A,M,R){var P=f.car(C,w,A,M,R);return this.world.add(P),P},softBody:function(C,w,A,M,R,P,b,F,I,L){var D=f.softBody(C,w,A,M,R,P,b,F,I,L);return this.world.add(D),D},joint:function(C,w,A,M,R){return this.constraint(C,w,A,M,R)},spring:function(C,w,A,M,R){return this.constraint(C,w,A,M,R)},constraint:function(C,w,A,M,R){M===void 0&&(M=1),R===void 0&&(R={}),R.bodyA=C.type==="body"?C:C.body,R.bodyB=w.type==="body"?w:w.body,isNaN(A)||(R.length=A),R.stiffness=M;var P=o.create(R);return this.world.add(P),P},worldConstraint:function(C,w,A,M){A===void 0&&(A=1),M===void 0&&(M={}),M.bodyB=C.type==="body"?C:C.body,isNaN(w)||(M.length=w),M.stiffness=A;var R=o.create(M);return this.world.add(R),R},mouseSpring:function(C){return this.pointerConstraint(C)},pointerConstraint:function(C){C===void 0&&(C={}),C.hasOwnProperty("render")||(C.render={visible:!1});var w=new v(this.scene,this.world,C);return this.world.add(w.constraint),w},image:function(C,w,A,M,R){var P=new h(this.world,C,w,A,M,R);return this.sys.displayList.add(P),P},tileBody:function(C,w){return new l(this.world,C,w)},sprite:function(C,w,A,M,R){var P=new c(this.world,C,w,A,M,R);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(C,w,A){return r(this.world,C,w,A)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});s.exports=E}),75803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31884),g=e(95540),f=e(26099);function o(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var u=function(r,h,c,l){c===void 0&&(c={}),l===void 0&&(l=!0);var p=h.x,m=h.y;h.body={temp:!0,position:{x:p,y:m}};var v=[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity];if(v.forEach(function(E){for(var C in E)o(E[C])?Object.defineProperty(h,C,{get:E[C].get,set:E[C].set}):Object.defineProperty(h,C,{value:E[C]})}),h.world=r,h._tempVec2=new f(p,m),c.hasOwnProperty("type")&&c.type==="body")h.setExistingBody(c,l);else{var y=g(c,"shape",null);y||(y="rectangle"),c.addToWorld=l,h.setBody(y,c)}return h};s.exports=u}),23181:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31884),f=e(95643),o=e(95540),u=e(88571),r=e(72699),h=e(26099),c=new a({Extends:u,Mixins:[g.Bounce,g.Collision,g.Force,g.Friction,g.Gravity,g.Mass,g.Sensor,g.SetBody,g.Sleep,g.Static,g.Transform,g.Velocity,r],initialize:function(p,m,v,y,E,C){f.call(this,p.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(y,E),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new h(m,v);var w=o(C,"shape",null);w?this.setBody(w,C):this.setRectangle(this.width,this.height,C),this.setPosition(m,v),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=c}),42045:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),g=e(66615),f=e(66280),o=e(22562),u=e(68174),r=e(15647),h=e(83419),c=e(52284),l=e(53402),p=e(69351),m=e(74116),v=e(48140),y=e(81388),E=e(20339),C=e(28137),w=e(95540),A=e(35154),M=e(46975),R=e(4506),P=e(99561),b=e(37277),F=e(73296),I=e(66272),L=e(44594),D=e(74058),O=e(31725),z=e(41598),_=e(68243);l.setDecomp(e(55973));var X=new h({initialize:function(U){this.scene=U,this.systems=U.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=p,this.collision=c,this.detector=y,this.pair=R,this.pairs=P,this.query=F,this.resolver=I,this.constraint=v,this.bodies=f,this.composites=m,this.axes=g,this.bounds=r,this.svg=D,this.vector=O,this.vertices=z,this.verts=z,this._tempVec2=O.create(),I._restingThresh=A(this.config,"restingThresh",4),I._restingThreshTangent=A(this.config,"restingThreshTangent",6),I._positionDampen=A(this.config,"positionDampen",.9),I._positionWarming=A(this.config,"positionWarming",.8),I._frictionNormalMultiplier=A(this.config,"frictionNormalMultiplier",5),U.sys.events.once(L.BOOT,this.boot,this),U.sys.events.on(L.START,this.start,this)},boot:function(){this.world=new _(this.scene,this.config),this.add=new C(this.world),this.bodyBounds=new u,this.systems.events.once(L.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new _(this.scene,this.config),this.add=new C(this.world));var H=this.systems.events;H.on(L.UPDATE,this.world.update,this.world),H.on(L.POST_UPDATE,this.world.postUpdate,this.world),H.once(L.SHUTDOWN,this.shutdown,this)},getConfig:function(){var H=this.systems.game.config.physics,U=this.systems.settings.physics,G=M(w(U,"matter",{}),w(H,"matter",{}));return G},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(H,U){this.world.step(H,U)},containsPoint:function(H,U,G){H=this.getMatterBodies(H);var N=O.create(U,G),W=F.point(H,N);return W.length>0},intersectPoint:function(H,U,G){G=this.getMatterBodies(G);var N=O.create(H,U),W=[],V=F.point(G,N);return V.forEach(function($){W.indexOf($)===-1&&W.push($)}),W},intersectRect:function(H,U,G,N,W,V){W===void 0&&(W=!1),V=this.getMatterBodies(V);var $={min:{x:H,y:U},max:{x:H+G,y:U+N}},j=[],k=F.region(V,$,W);return k.forEach(function(Q){j.indexOf(Q)===-1&&j.push(Q)}),j},intersectRay:function(H,U,G,N,W,V){W===void 0&&(W=1),V=this.getMatterBodies(V);for(var $=[],j=F.ray(V,O.create(H,U),O.create(G,N),W),k=0;k<j.length;k++)$.push(j[k].body);return $},intersectBody:function(H,U){U=this.getMatterBodies(U);for(var G=[],N=F.collides(H,U),W=0;W<N.length;W++){var V=N[W];V.bodyA===H?G.push(V.bodyB):G.push(V.bodyA)}return G},overlap:function(H,U,G,N,W){G===void 0&&(G=null),N===void 0&&(N=null),W===void 0&&(W=G),Array.isArray(H)||(H=[H]),H=this.getMatterBodies(H),U=this.getMatterBodies(U);for(var V=!1,$=0;$<H.length;$++)for(var j=H[$],k=F.collides(j,U),Q=0;Q<k.length;Q++){var et=k[Q],at=et.bodyA.id===j.id?et.bodyB:et.bodyA;if(!N||N.call(W,j,at,et)){if(V=!0,G)G.call(W,j,at,et);else if(!N)return!0}}return V},setCollisionCategory:function(H,U){return H=this.getMatterBodies(H),H.forEach(function(G){G.collisionFilter.category=U}),this},setCollisionGroup:function(H,U){return H=this.getMatterBodies(H),H.forEach(function(G){G.collisionFilter.group=U}),this},setCollidesWith:function(H,U){H=this.getMatterBodies(H);var G=0;if(!Array.isArray(U))G=U;else for(var N=0;N<U.length;N++)G|=U[N];return H.forEach(function(W){W.collisionFilter.mask=G}),this},getMatterBodies:function(H){if(!H)return this.world.getAllBodies();Array.isArray(H)||(H=[H]);for(var U=[],G=0;G<H.length;G++){var N=H[G].hasOwnProperty("body")?H[G].body:H[G];U.push(N)}return U},setVelocity:function(H,U,G){H=this.getMatterBodies(H);var N=this._tempVec2;return N.x=U,N.y=G,H.forEach(function(W){o.setVelocity(W,N)}),this},setVelocityX:function(H,U){H=this.getMatterBodies(H);var G=this._tempVec2;return G.x=U,H.forEach(function(N){G.y=N.velocity.y,o.setVelocity(N,G)}),this},setVelocityY:function(H,U){H=this.getMatterBodies(H);var G=this._tempVec2;return G.y=U,H.forEach(function(N){G.x=N.velocity.x,o.setVelocity(N,G)}),this},setAngularVelocity:function(H,U){return H=this.getMatterBodies(H),H.forEach(function(G){o.setAngularVelocity(G,U)}),this},applyForce:function(H,U){H=this.getMatterBodies(H);var G=this._tempVec2;return H.forEach(function(N){G.x=N.position.x,G.y=N.position.y,o.applyForce(N,G,U)}),this},applyForceFromPosition:function(H,U,G,N){H=this.getMatterBodies(H);var W=this._tempVec2;return H.forEach(function(V){N===void 0&&(N=V.angle),W.x=G*Math.cos(N),W.y=G*Math.sin(N),o.applyForce(V,U,W)}),this},applyForceFromAngle:function(H,U,G){H=this.getMatterBodies(H);var N=this._tempVec2;return H.forEach(function(W){G===void 0&&(G=W.angle),N.x=U*Math.cos(G),N.y=U*Math.sin(G),o.applyForce(W,{x:W.position.x,y:W.position.y},N)}),this},getConstraintLength:function(H){var U=H.pointA.x,G=H.pointA.y,N=H.pointB.x,W=H.pointB.y;return H.bodyA&&(U+=H.bodyA.position.x,G+=H.bodyA.position.y),H.bodyB&&(N+=H.bodyB.position.x,W+=H.bodyB.position.y),E(U,G,N,W)},alignBody:function(H,U,G,N){H=H.hasOwnProperty("body")?H.body:H;var W;switch(N){case a.TOP_LEFT:case a.LEFT_TOP:W=this.bodyBounds.getTopLeft(H,U,G);break;case a.TOP_CENTER:W=this.bodyBounds.getTopCenter(H,U,G);break;case a.TOP_RIGHT:case a.RIGHT_TOP:W=this.bodyBounds.getTopRight(H,U,G);break;case a.LEFT_CENTER:W=this.bodyBounds.getLeftCenter(H,U,G);break;case a.CENTER:W=this.bodyBounds.getCenter(H,U,G);break;case a.RIGHT_CENTER:W=this.bodyBounds.getRightCenter(H,U,G);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:W=this.bodyBounds.getBottomLeft(H,U,G);break;case a.BOTTOM_CENTER:W=this.bodyBounds.getBottomCenter(H,U,G);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:W=this.bodyBounds.getBottomRight(H,U,G);break}return W&&o.setPosition(H,W),this},shutdown:function(){var H=this.systems.events;this.world&&(H.off(L.UPDATE,this.world.update,this.world),H.off(L.POST_UPDATE,this.world.postUpdate,this.world)),H.off(L.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(L.START,this.start,this),this.scene=null,this.systems=null}});b.register("MatterPhysics",X,"matterPhysics"),s.exports=X}),34803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),g=e(83419),f=e(31884),o=e(95643),u=e(95540),r=e(72699),h=e(68287),c=e(26099),l=new g({Extends:h,Mixins:[f.Bounce,f.Collision,f.Force,f.Friction,f.Gravity,f.Mass,f.Sensor,f.SetBody,f.Sleep,f.Static,f.Transform,f.Velocity,r],initialize:function(m,v,y,E,C,w){o.call(this,m.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(E,C),this.setSizeToFrame(),this.setOrigin(),this.world=m,this._tempVec2=new c(v,y);var A=u(w,"shape",null);A?this.setBody(A,w):this.setRectangle(this.width,this.height,w),this.setPosition(v,y),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=l}),73834:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),g=e(22562),f=e(83419),o=e(31884),u=e(62644),r=e(50792),h=e(95540),c=e(97022),l=e(41598),p=new f({Extends:r,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(v,y,E){r.call(this),this.tile=y,this.world=v,y.physics.matterBody&&y.physics.matterBody.destroy(),y.physics.matterBody=this;var C=h(E,"body",null),w=h(E,"addToWorld",!0);if(C)this.setBody(C,w);else{var A=y.getCollisionGroup(),M=h(A,"objects",[]);M.length>0?this.setFromTileCollision(E):this.setFromTileRectangle(E)}if(y.flipX||y.flipY){var R={x:y.getCenterX(),y:y.getCenterY()},P=y.flipX?-1:1,b=y.flipY?-1:1;g.scale(C,P,b,R)}},setFromTileRectangle:function(m){m===void 0&&(m={}),c(m,"isStatic")||(m.isStatic=!0),c(m,"addToWorld")||(m.addToWorld=!0);var v=this.tile.getBounds(),y=v.x+v.width/2,E=v.y+v.height/2,C=a.rectangle(y,E,v.width,v.height,m);return this.setBody(C,m.addToWorld),this},setFromTileCollision:function(m){m===void 0&&(m={}),c(m,"isStatic")||(m.isStatic=!0),c(m,"addToWorld")||(m.addToWorld=!0);for(var v=this.tile.tilemapLayer.scaleX,y=this.tile.tilemapLayer.scaleY,E=this.tile.getLeft(),C=this.tile.getTop(),w=this.tile.getCollisionGroup(),A=h(w,"objects",[]),M=[],R=0;R<A.length;R++){var P=A[R],b=E+P.x*v,F=C+P.y*y,I=P.width*v,L=P.height*y,D=null;if(P.rectangle)D=a.rectangle(b+I/2,F+L/2,I,L,m);else if(P.ellipse)D=a.circle(b+I/2,F+L/2,I/2,m);else if(P.polygon||P.polyline){var O=P.polygon?P.polygon:P.polyline,z=O.map(function(U){return{x:U.x*v,y:U.y*y}}),_=l.create(z),X=l.centre(_);b+=X.x,F+=X.y,D=a.fromVertices(b,F,_,m)}D&&M.push(D)}if(M.length===1)this.setBody(M[0],m.addToWorld);else if(M.length>1){var H=u(m);H.parts=M,this.setBody(g.create(H),H.addToWorld)}return this},setBody:function(m,v){return v===void 0&&(v=!0),this.body&&this.removeBody(),this.body=m,this.body.gameObject=this,v&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});s.exports=p}),19496:((s,T,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),g=e(22562),f=e(53402),o=e(95540),u=e(41598),r={parseBody:function(h,c,l,p){p===void 0&&(p={});for(var m=o(l,"fixtures",[]),v=[],y=0;y<m.length;y++)for(var E=this.parseFixture(m[y]),C=0;C<E.length;C++)v.push(E[C]);var w=f.clone(l,!0);f.extend(w,p,!0),delete w.fixtures,delete w.type;var A=g.create(w);return g.setParts(A,v),g.setPosition(A,{x:h,y:c}),A},parseFixture:function(h){var c=f.extend({},!1,h);delete c.circle,delete c.vertices;var l;if(h.circle){var p=o(h.circle,"x"),m=o(h.circle,"y"),v=o(h.circle,"radius");l=[a.circle(p,m,v,c)]}else h.vertices&&(l=this.parseVertices(h.vertices,c));return l},parseVertices:function(h,c){c===void 0&&(c={});for(var l=[],p=0;p<h.length;p++)u.clockwiseSort(h[p]),l.push(g.create(f.extend({position:u.centre(h[p]),vertices:h[p]},c)));return a.flagCoincidentParts(l)}};s.exports=r}),85791:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),g=e(22562),f={parseBody:function(o,u,r,h){h===void 0&&(h={});var c,l=r.vertices;if(l.length===1)h.vertices=l[0],c=g.create(h),a.flagCoincidentParts(c.parts);else{for(var p=[],m=0;m<l.length;m++){var v=g.create({vertices:l[m]});p.push(v)}a.flagCoincidentParts(p),h.parts=p,c=g.create(h)}return c.label=r.label,g.setPosition(c,{x:o,y:u}),c}};s.exports=f}),98713:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15647),g=e(83419),f=e(69351),o=e(48140),u=e(81388),r=e(1121),h=e(8214),c=e(46975),l=e(53614),p=e(26099),m=e(41598),v=new g({initialize:function(E,C,w){w===void 0&&(w={});var A={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=E,this.world=C,this.camera=null,this.pointer=null,this.active=!0,this.position=new p,this.body=null,this.part=null,this.constraint=o.create(c(w,A)),this.world.on(r.BEFORE_UPDATE,this.update,this),E.sys.input.on(h.POINTER_DOWN,this.onDown,this),E.sys.input.on(h.POINTER_UP,this.onUp,this)},onDown:function(y){this.pointer||(this.pointer=y,this.camera=y.camera)},onUp:function(y){y===this.pointer&&(this.pointer=null)},getBody:function(y){var E=this.position,C=this.constraint;this.camera.getWorldPoint(y.x,y.y,E);for(var w=f.allBodies(this.world.localWorld),A=0;A<w.length;A++){var M=w[A];if(!M.ignorePointer&&a.contains(M.bounds,E)&&u.canCollide(M.collisionFilter,C.collisionFilter)&&this.hitTestBody(M,E))return this.world.emit(r.DRAG_START,M,this.part,this),!0}return!1},hitTestBody:function(y,E){for(var C=this.constraint,w=y.parts.length,A=w>1?1:0,M=A;M<w;M++){var R=y.parts[M];if(m.contains(R.vertices,E))return C.pointA=E,C.pointB={x:E.x-y.position.x,y:E.y-y.position.y},C.bodyB=y,C.angleB=y.angle,l.set(y,!1),this.part=R,this.body=y,!0}return!1},update:function(){var y=this.pointer,E=this.body;if(!this.active||!y){E&&this.stopDrag();return}if(!y.isDown&&E){this.stopDrag();return}else if(y.isDown){if(!this.camera||!E&&!this.getBody(y))return;E=this.body;var C=this.position,w=this.constraint;this.camera.getWorldPoint(y.x,y.y,C),w.pointA.x=C.x,w.pointA.y=C.y,l.set(E,!1),this.world.emit(r.DRAG,E,this)}},stopDrag:function(){var y=this.body,E=this.constraint;E.bodyB=null,E.pointB=null,this.pointer=null,this.body=null,this.part=null,y&&this.world.emit(r.DRAG_END,y,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(h.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(h.POINTER_UP,this.onUp,this)}});s.exports=v}),68243:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),g=e(22562),f=e(83419),o=e(53402),u=e(69351),r=e(48413),h=e(50792),c=e(1121),l=e(95540),p=e(35154),m=e(22562),v=e(35810),y=e(73834),E=e(4372),C=e(13037),w=e(31725),A=new f({Extends:h,initialize:function(R,P){h.call(this),this.scene=R,this.engine=r.create(P),this.localWorld=this.engine.world;var b=p(P,"gravity",null);b?this.setGravity(b.x,b.y,b.scale):b===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=p(P,"enabled",!0),this.getDelta=p(P,"getDelta",this.update60Hz);var F=l(P,"runner",{}),I=l(F,"fps",!1);I&&(F.delta=1e3/l(F,"fps",60)),this.runner=C.create(F),this.autoUpdate=p(P,"autoUpdate",!0);var L=p(P,"debug",!1);if(this.drawDebug=typeof L=="object"?!0:L,this.debugGraphic,this.debugConfig={showAxes:l(L,"showAxes",!1),showAngleIndicator:l(L,"showAngleIndicator",!1),angleColor:l(L,"angleColor",15208787),showBroadphase:l(L,"showBroadphase",!1),broadphaseColor:l(L,"broadphaseColor",16757760),showBounds:l(L,"showBounds",!1),boundsColor:l(L,"boundsColor",16777215),showVelocity:l(L,"showVelocity",!1),velocityColor:l(L,"velocityColor",44783),showCollisions:l(L,"showCollisions",!1),collisionColor:l(L,"collisionColor",16094476),showSeparations:l(L,"showSeparations",!1),separationColor:l(L,"separationColor",16753920),showBody:l(L,"showBody",!0),showStaticBody:l(L,"showStaticBody",!0),showInternalEdges:l(L,"showInternalEdges",!1),renderFill:l(L,"renderFill",!1),renderLine:l(L,"renderLine",!0),fillColor:l(L,"fillColor",1075465),fillOpacity:l(L,"fillOpacity",1),lineColor:l(L,"lineColor",2678297),lineOpacity:l(L,"lineOpacity",1),lineThickness:l(L,"lineThickness",1),staticFillColor:l(L,"staticFillColor",857979),staticLineColor:l(L,"staticLineColor",1255396),showSleeping:l(L,"showSleeping",!1),staticBodySleepOpacity:l(L,"staticBodySleepOpacity",.7),sleepFillColor:l(L,"sleepFillColor",4605510),sleepLineColor:l(L,"sleepLineColor",10066585),showSensors:l(L,"showSensors",!0),sensorFillColor:l(L,"sensorFillColor",857979),sensorLineColor:l(L,"sensorLineColor",1255396),showPositions:l(L,"showPositions",!0),positionSize:l(L,"positionSize",4),positionColor:l(L,"positionColor",14697178),showJoint:l(L,"showJoint",!0),jointColor:l(L,"jointColor",14737474),jointLineOpacity:l(L,"jointLineOpacity",1),jointLineThickness:l(L,"jointLineThickness",2),pinSize:l(L,"pinSize",4),pinColor:l(L,"pinColor",4382944),springColor:l(L,"springColor",14697184),anchorColor:l(L,"anchorColor",15724527),anchorSize:l(L,"anchorSize",4),showConvexHulls:l(L,"showConvexHulls",!1),hullColor:l(L,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),l(P,"setBounds",!1)){var D=P.setBounds;if(typeof D=="boolean")this.setBounds();else{var O=l(D,"x",0),z=l(D,"y",0),_=l(D,"width",R.sys.scale.width),X=l(D,"height",R.sys.scale.height),H=l(D,"thickness",64),U=l(D,"left",!0),G=l(D,"right",!0),N=l(D,"top",!0),W=l(D,"bottom",!0);this.setBounds(O,z,_,X,H,U,G,N,W)}}},setCompositeRenderStyle:function(M){var R=M.bodies,P=M.constraints,b=M.composites,F,I,L;for(F=0;F<R.length;F++)I=R[F],L=I.render,this.setBodyRenderStyle(I,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity);for(F=0;F<P.length;F++)I=P[F],L=I.render,this.setConstraintRenderStyle(I,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize);for(F=0;F<b.length;F++)I=b[F],this.setCompositeRenderStyle(I);return this},setBodyRenderStyle:function(M,R,P,b,F,I){var L=M.render,D=this.debugConfig;return L?(R==null&&(R=M.isStatic?D.staticLineColor:D.lineColor),P==null&&(P=D.lineOpacity),b==null&&(b=D.lineThickness),F==null&&(F=M.isStatic?D.staticFillColor:D.fillColor),I==null&&(I=D.fillOpacity),R!==!1&&(L.lineColor=R),P!==!1&&(L.lineOpacity=P),b!==!1&&(L.lineThickness=b),F!==!1&&(L.fillColor=F),I!==!1&&(L.fillOpacity=I),this):this},setConstraintRenderStyle:function(M,R,P,b,F,I,L){var D=M.render,O=this.debugConfig;if(!D)return this;if(R==null){var z=D.type;z==="line"?R=O.jointColor:z==="pin"?R=O.pinColor:z==="spring"&&(R=O.springColor)}return P==null&&(P=O.jointLineOpacity),b==null&&(b=O.jointLineThickness),F==null&&(F=O.pinSize),I==null&&(I=O.anchorColor),L==null&&(L=O.anchorSize),R!==!1&&(D.lineColor=R),P!==!1&&(D.lineOpacity=P),b!==!1&&(D.lineThickness=b),F!==!1&&(D.pinSize=F),I!==!1&&(D.anchorColor=I),L!==!1&&(D.anchorSize=L),this},setEventsProxy:function(){var M=this,R=this.engine,P=this.localWorld;this.drawDebug&&(v.on(P,"compositeModified",function(b){M.setCompositeRenderStyle(b)}),v.on(P,"beforeAdd",function(b){for(var F=[].concat(b.object),I=0;I<F.length;I++){var L=F[I],D=L.render;L.type==="body"?M.setBodyRenderStyle(L,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):L.type==="composite"?M.setCompositeRenderStyle(L):L.type==="constraint"&&M.setConstraintRenderStyle(L,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),v.on(P,"beforeAdd",function(b){M.emit(c.BEFORE_ADD,b)}),v.on(P,"afterAdd",function(b){M.emit(c.AFTER_ADD,b)}),v.on(P,"beforeRemove",function(b){M.emit(c.BEFORE_REMOVE,b)}),v.on(P,"afterRemove",function(b){M.emit(c.AFTER_REMOVE,b)}),v.on(R,"beforeUpdate",function(b){M.emit(c.BEFORE_UPDATE,b)}),v.on(R,"afterUpdate",function(b){M.emit(c.AFTER_UPDATE,b)}),v.on(R,"collisionStart",function(b){var F=b.pairs,I,L;F.length>0&&F.map(function(D){I=D.bodyA,L=D.bodyB,I.gameObject&&I.gameObject.emit("collide",I,L,D),L.gameObject&&L.gameObject.emit("collide",L,I,D),v.trigger(I,"onCollide",{pair:D}),v.trigger(L,"onCollide",{pair:D}),I.onCollideCallback&&I.onCollideCallback(D),L.onCollideCallback&&L.onCollideCallback(D),I.onCollideWith[L.id]&&I.onCollideWith[L.id](L,D),L.onCollideWith[I.id]&&L.onCollideWith[I.id](I,D)}),M.emit(c.COLLISION_START,b,I,L)}),v.on(R,"collisionActive",function(b){var F=b.pairs,I,L;F.length>0&&F.map(function(D){I=D.bodyA,L=D.bodyB,I.gameObject&&I.gameObject.emit("collideActive",I,L,D),L.gameObject&&L.gameObject.emit("collideActive",L,I,D),v.trigger(I,"onCollideActive",{pair:D}),v.trigger(L,"onCollideActive",{pair:D}),I.onCollideActiveCallback&&I.onCollideActiveCallback(D),L.onCollideActiveCallback&&L.onCollideActiveCallback(D)}),M.emit(c.COLLISION_ACTIVE,b,I,L)}),v.on(R,"collisionEnd",function(b){var F=b.pairs,I,L;F.length>0&&F.map(function(D){I=D.bodyA,L=D.bodyB,I.gameObject&&I.gameObject.emit("collideEnd",I,L,D),L.gameObject&&L.gameObject.emit("collideEnd",L,I,D),v.trigger(I,"onCollideEnd",{pair:D}),v.trigger(L,"onCollideEnd",{pair:D}),I.onCollideEndCallback&&I.onCollideEndCallback(D),L.onCollideEndCallback&&L.onCollideEndCallback(D)}),M.emit(c.COLLISION_END,b,I,L)})},setBounds:function(M,R,P,b,F,I,L,D,O){return M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P=this.scene.sys.scale.width),b===void 0&&(b=this.scene.sys.scale.height),F===void 0&&(F=64),I===void 0&&(I=!0),L===void 0&&(L=!0),D===void 0&&(D=!0),O===void 0&&(O=!0),this.updateWall(I,"left",M-F,R-F,F,b+F*2),this.updateWall(L,"right",M+P,R-F,F,b+F*2),this.updateWall(D,"top",M,R-F,P,F),this.updateWall(O,"bottom",M,R+b,P,F),this},updateWall:function(M,R,P,b,F,I){var L=this.walls[R];M?(L&&E.remove(this.localWorld,L),P+=F/2,b+=I/2,this.walls[R]=this.create(P,b,F,I,{isStatic:!0,friction:0,frictionStatic:0})):(L&&E.remove(this.localWorld,L),this.walls[R]=null)},createDebugGraphic:function(){var M=this.scene.sys.add.graphics({x:0,y:0});return M.setDepth(Number.MAX_VALUE),this.debugGraphic=M,this.drawDebug=!0,M},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(M,R,P){return M===void 0&&(M=0),R===void 0&&(R=1),P===void 0&&(P=.001),this.localWorld.gravity.x=M,this.localWorld.gravity.y=R,this.localWorld.gravity.scale=P,this},create:function(M,R,P,b,F){var I=a.rectangle(M,R,P,b,F);return E.add(this.localWorld,I),I},add:function(M){return E.add(this.localWorld,M),this},remove:function(M,R){Array.isArray(M)||(M=[M]);for(var P=0;P<M.length;P++){var b=M[P],F=b.body?b.body:b;u.remove(this.localWorld,F,R)}return this},removeConstraint:function(M,R){return u.remove(this.localWorld,M,R),this},convertTilemapLayer:function(M,R){var P=M.layer,b=M.getTilesWithin(0,0,P.width,P.height,{isColliding:!0});return this.convertTiles(b,R),this},convertTiles:function(M,R){if(M.length===0)return this;for(var P=0;P<M.length;P++)new y(this,M[P],R);return this},nextGroup:function(M){return m.nextGroup(M)},nextCategory:function(){return m.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=o.now(),this.emit(c.RESUME),this},update:function(M){if(!(!this.enabled||!this.autoUpdate)){var R=this.engine,P=this.runner,b=o.now(),F=P.delta,I=0,L=M-P.timeLastTick;if((!L||!P.timeLastTick||L>Math.max(C._maxFrameDelta,P.maxFrameTime))&&(L=P.frameDelta||C._frameDeltaFallback),P.frameDeltaSmoothing){P.frameDeltaHistory.push(L),P.frameDeltaHistory=P.frameDeltaHistory.slice(-P.frameDeltaHistorySize);var D=P.frameDeltaHistory.slice(0).sort(),O=P.frameDeltaHistory.slice(D.length*C._smoothingLowerBound,D.length*C._smoothingUpperBound),z=C._mean(O);L=z||L}P.frameDeltaSnapping&&(L=1e3/Math.round(1e3/L)),P.frameDelta=L,P.timeLastTick=M,P.timeBuffer+=P.frameDelta,P.timeBuffer=o.clamp(P.timeBuffer,0,P.frameDelta+F*C._timeBufferMargin),P.lastUpdatesDeferred=0;for(var _=P.maxUpdates||Math.ceil(P.maxFrameTime/F),X=o.now();F>0&&P.timeBuffer>=F*C._timeBufferMargin;){r.update(R,F),P.timeBuffer-=F,I+=1;var H=o.now()-b,U=o.now()-X,G=H+C._elapsedNextEstimate*U/I;if(I>=_||G>P.maxFrameTime){P.lastUpdatesDeferred=Math.round(Math.max(0,P.timeBuffer/F-C._timeBufferMargin));break}}}},step:function(M){r.update(this.engine,M)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(M){var R=M.hasOwnProperty("body")?M.body:M;return u.get(this.localWorld,R.id,R.type)!==null},getAllBodies:function(){return u.allBodies(this.localWorld)},getAllConstraints:function(){return u.allConstraints(this.localWorld)},getAllComposites:function(){return u.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var M=this.debugConfig,R=this.engine,P=this.debugGraphic,b=u.allBodies(this.localWorld);this.debugGraphic.clear(),M.showBroadphase&&R.broadphase.controller&&this.renderGrid(R.broadphase,P,M.broadphaseColor,.5),M.showBounds&&this.renderBodyBounds(b,P,M.boundsColor,.5),(M.showBody||M.showStaticBody)&&this.renderBodies(b),M.showJoint&&this.renderJoints(),(M.showAxes||M.showAngleIndicator)&&this.renderBodyAxes(b,P,M.showAxes,M.angleColor,.5),M.showVelocity&&this.renderBodyVelocity(b,P,M.velocityColor,1,2),M.showSeparations&&this.renderSeparations(R.pairs.list,P,M.separationColor),M.showCollisions&&this.renderCollisions(R.pairs.list,P,M.collisionColor)}},renderGrid:function(M,R,P,b){R.lineStyle(1,P,b);for(var F=o.keys(M.buckets),I=0;I<F.length;I++){var L=F[I];if(!(M.buckets[L].length<2)){var D=L.split(/C|R/);R.strokeRect(parseInt(D[1],10)*M.bucketWidth,parseInt(D[2],10)*M.bucketHeight,M.bucketWidth,M.bucketHeight)}}return this},renderSeparations:function(M,R,P){R.lineStyle(1,P,1);for(var b=0;b<M.length;b++){var F=M[b];if(F.isActive){var I=F.collision,L=I.bodyA,D=I.bodyB,O=L.position,z=D.position,_=I.penetration,X=!L.isStatic&&!D.isStatic?4:1;D.isStatic&&(X=0),R.lineBetween(z.x,z.y,z.x-_.x*X,z.y-_.y*X),X=!L.isStatic&&!D.isStatic?4:1,L.isStatic&&(X=0),R.lineBetween(O.x,O.y,O.x-_.x*X,O.y-_.y*X)}}return this},renderCollisions:function(M,R,P){R.lineStyle(1,P,.5),R.fillStyle(P,1);var b,F;for(b=0;b<M.length;b++)if(F=M[b],!!F.isActive)for(var I=0;I<F.contactCount;I++){var L=F.contacts[I],D=L.vertex;D&&R.fillRect(D.x-2,D.y-2,5,5)}for(b=0;b<M.length;b++)if(F=M[b],!!F.isActive){var O=F.collision,z=F.contacts;if(F.contactCount>0){var _=z[0].vertex.x,X=z[0].vertex.y;F.contactCount===2&&(_=(z[0].vertex.x+z[1].vertex.x)/2,X=(z[0].vertex.y+z[1].vertex.y)/2),O.bodyB===O.supports[0].body||O.bodyA.isStatic?R.lineBetween(_-O.normal.x*8,X-O.normal.y*8,_,X):R.lineBetween(_+O.normal.x*8,X+O.normal.y*8,_,X)}}return this},renderBodyBounds:function(M,R,P,b){R.lineStyle(1,P,b);for(var F=0;F<M.length;F++){var I=M[F];if(I.render.visible){var L=I.bounds;if(L)R.strokeRect(L.min.x,L.min.y,L.max.x-L.min.x,L.max.y-L.min.y);else for(var D=I.parts,O=D.length>1?1:0;O<D.length;O++){var z=D[O];R.strokeRect(z.bounds.min.x,z.bounds.min.y,z.bounds.max.x-z.bounds.min.x,z.bounds.max.y-z.bounds.min.y)}}}return this},renderBodyAxes:function(M,R,P,b,F){R.lineStyle(1,b,F);for(var I=0;I<M.length;I++){var L=M[I],D=L.parts;if(L.render.visible){var O,z,_;if(P)for(z=D.length>1?1:0;z<D.length;z++)for(O=D[z],_=0;_<O.axes.length;_++){var X=O.axes[_];R.lineBetween(O.position.x,O.position.y,O.position.x+X.x*20,O.position.y+X.y*20)}else for(z=D.length>1?1:0;z<D.length;z++)for(O=D[z],_=0;_<O.axes.length;_++)R.lineBetween(O.position.x,O.position.y,(O.vertices[0].x+O.vertices[O.vertices.length-1].x)/2,(O.vertices[0].y+O.vertices[O.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(M,R,P,b,F){R.lineStyle(F,P,b);for(var I=0;I<M.length;I++){var L=M[I];L.render.visible&&R.lineBetween(L.position.x,L.position.y,L.position.x+(L.position.x-L.positionPrev.x)*2,L.position.y+(L.position.y-L.positionPrev.y)*2)}return this},renderBodies:function(M){for(var R=this.debugGraphic,P=this.debugConfig,b=P.showBody,F=P.showStaticBody,I=P.showSleeping,L=P.showInternalEdges,D=P.showConvexHulls,O=P.renderFill,z=P.renderLine,_=P.staticBodySleepOpacity,X=P.sleepFillColor,H=P.sleepLineColor,U=P.hullColor,G=0;G<M.length;G++){var N=M[G];if(N.render.visible&&!(!F&&N.isStatic||!b&&!N.isStatic)){var W=N.render.lineColor,V=N.render.lineOpacity,$=N.render.lineThickness,j=N.render.fillColor,k=N.render.fillOpacity;I&&N.isSleeping&&(N.isStatic?(V*=_,k*=_):(W=H,j=X)),O||(j=null),z||(W=null),this.renderBody(N,R,L,W,V,$,j,k);var Q=N.parts.length;D&&Q>1&&this.renderConvexHull(N,R,U,$)}}},renderBody:function(M,R,P,b,F,I,L,D){b===void 0&&(b=null),F===void 0&&(F=null),I===void 0&&(I=1),L===void 0&&(L=null),D===void 0&&(D=null);for(var O=this.debugConfig,z=O.sensorFillColor,_=O.sensorLineColor,X=M.parts,H=X.length,U=H>1?1:0;U<H;U++){var G=X[U],N=G.render,W=N.opacity;if(!(!N.visible||W===0||G.isSensor&&!O.showSensors)){var V=G.circleRadius;if(R.beginPath(),G.isSensor?(L!==null&&R.fillStyle(z,D*W),b!==null&&R.lineStyle(I,_,F*W)):(L!==null&&R.fillStyle(L,D*W),b!==null&&R.lineStyle(I,b,F*W)),V)R.arc(G.position.x,G.position.y,V,0,2*Math.PI);else{var $=G.vertices,j=$.length;R.moveTo($[0].x,$[0].y);for(var k=1;k<j;k++){var Q=$[k];if(!$[k-1].isInternal||P?R.lineTo(Q.x,Q.y):R.moveTo(Q.x,Q.y),k<j&&Q.isInternal&&!P){var et=(k+1)%j;R.moveTo($[et].x,$[et].y)}}R.closePath()}L!==null&&R.fillPath(),b!==null&&R.strokePath()}}if(O.showPositions&&!M.isStatic){var at=M.position.x,q=M.position.y,ft=Math.ceil(O.positionSize/2);R.fillStyle(O.positionColor,1),R.fillRect(at-ft,q-ft,O.positionSize,O.positionSize)}return this},renderConvexHull:function(M,R,P,b){b===void 0&&(b=1);var F=M.parts,I=F.length;if(I>1){var L=M.vertices;R.lineStyle(b,P),R.beginPath(),R.moveTo(L[0].x,L[0].y);for(var D=1;D<L.length;D++)R.lineTo(L[D].x,L[D].y);R.lineTo(L[0].x,L[0].y),R.strokePath()}return this},renderJoints:function(){for(var M=this.debugGraphic,R=u.allConstraints(this.localWorld),P=0;P<R.length;P++){var b=R[P].render,F=b.lineColor,I=b.lineOpacity,L=b.lineThickness,D=b.pinSize,O=b.anchorColor,z=b.anchorSize;this.renderConstraint(R[P],M,F,I,L,D,O,z)}},renderConstraint:function(M,R,P,b,F,I,L,D){var O=M.render;if(!O.visible||!M.pointA||!M.pointB)return this;R.lineStyle(F,P,b);var z=M.bodyA,_=M.bodyB,X,H;if(z?X=w.add(z.position,M.pointA):X=M.pointA,O.type==="pin")R.strokeCircle(X.x,X.y,I);else{if(_?H=w.add(_.position,M.pointB):H=M.pointB,R.beginPath(),R.moveTo(X.x,X.y),O.type==="spring")for(var U=w.sub(H,X),G=w.perp(w.normalise(U)),N=Math.ceil(o.clamp(M.length/5,12,20)),W,V=1;V<N;V+=1)W=V%2===0?1:-1,R.lineTo(X.x+U.x*(V/N)+G.x*W*4,X.y+U.y*(V/N)+G.y*W*4);R.lineTo(H.x,H.y)}return R.strokePath(),O.anchors&&D>0&&(R.fillStyle(L),R.fillCircle(X.x,X.y,D),R.fillCircle(H.x,H.y,D)),this},resetCollisionIDs:function(){return g._nextCollidingGroupId=1,g._nextNonCollidingGroupId=-1,g._nextCategory=1,this},shutdown:function(){v.off(this.engine),this.removeAllListeners(),E.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});s.exports=A}),70410:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e){return this.body.restitution=e,this}};s.exports=T}),66968:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var a=0;if(!Array.isArray(e))a=e;else for(var g=0;g<e.length;g++)a|=e[g];return this.body.collisionFilter.mask=a,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,a){Array.isArray(e)||(e=[e]);for(var g=0;g<e.length;g++){var f=e[g].hasOwnProperty("body")?e[g].body:e[g];this.body.setOnCollideWith(f,a)}return this}};s.exports=T}),51607:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),g={applyForce:function(f){return this._tempVec2.set(this.body.position.x,this.body.position.y),a.applyForce(this.body,this._tempVec2,f),this},applyForceFrom:function(f,o){return a.applyForce(this.body,f,o),this},thrust:function(f){var o=this.body.angle;return this._tempVec2.set(f*Math.cos(o),f*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(f){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(f*Math.cos(o),f*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(f){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(f*Math.cos(o),f*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(f){var o=this.body.angle-Math.PI;return this._tempVec2.set(f*Math.cos(o),f*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};s.exports=g}),5436:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,a,g){return this.body.friction=e,a!==void 0&&(this.body.frictionAir=a),g!==void 0&&(this.body.frictionStatic=g),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};s.exports=T}),39858:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};s.exports=T}),37302:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),g=e(26099),f={setMass:function(o){return a.setMass(this.body,o),this},setDensity:function(o){return a.setDensity(this.body,o),this},centerOfMass:{get:function(){return new g(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};s.exports=f}),39132:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};s.exports=T}),57772:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),g=e(22562),f=e(43855),o=e(95540),u=e(19496),r=e(85791),h=e(41598),c={setRectangle:function(l,p,m){return this.setBody({type:"rectangle",width:l,height:p},m)},setCircle:function(l,p){return this.setBody({type:"circle",radius:l},p)},setPolygon:function(l,p,m){return this.setBody({type:"polygon",sides:p,radius:l},m)},setTrapezoid:function(l,p,m,v){return this.setBody({type:"trapezoid",width:l,height:p,slope:m},v)},setExistingBody:function(l,p){p===void 0&&(p=!0),this.body&&this.world.remove(this.body,!0),this.body=l;for(var m=0;m<l.parts.length;m++)l.parts[m].gameObject=this;var v=this;if(l.destroy=function(){v.world.remove(v.body,!0),v.body.gameObject=null},p&&(this.world.has(l)&&this.world.remove(l,!0),this.world.add(l)),this._originComponent){var y=l.render.sprite.xOffset,E=l.render.sprite.yOffset,C=l.centerOfMass.x,w=l.centerOfMass.y;if(f(C,.5)&&f(w,.5))this.setOrigin(y+.5,E+.5);else{var A=l.centerOffset.x,M=l.centerOffset.y;this.setOrigin(y+A/this.displayWidth,E+M/this.displayHeight)}}return this},setBody:function(l,p){if(!l)return this;var m;typeof l=="string"&&(l={type:l});var v=o(l,"type","rectangle"),y=o(l,"x",this._tempVec2.x),E=o(l,"y",this._tempVec2.y),C=o(l,"width",this.width),w=o(l,"height",this.height);switch(v){case"rectangle":m=a.rectangle(y,E,C,w,p);break;case"circle":var A=o(l,"radius",Math.max(C,w)/2),M=o(l,"maxSides",25);m=a.circle(y,E,A,p,M);break;case"trapezoid":var R=o(l,"slope",.5);m=a.trapezoid(y,E,C,w,R,p);break;case"polygon":var P=o(l,"sides",5),b=o(l,"radius",Math.max(C,w)/2);m=a.polygon(y,E,P,b,p);break;case"fromVertices":case"fromVerts":var F=o(l,"verts",null);if(F)if(typeof F=="string"&&(F=h.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))g.setVertices(this.body,F),m=this.body;else{var I=o(l,"flagInternal",!1),L=o(l,"removeCollinear",.01),D=o(l,"minimumArea",10);m=a.fromVertices(y,E,F,p,I,L,D)}break;case"fromPhysicsEditor":m=u.parseBody(y,E,l,p);break;case"fromPhysicsTracer":m=r.parseBody(y,E,l,p);break}return m&&this.setExistingBody(m,l.addToWorld),this}};s.exports=c}),38083:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1121),g=e(53614),f=e(35810),o={setToSleep:function(){return g.set(this.body,!0),this},setAwake:function(){return g.set(this.body,!1),this},setSleepThreshold:function(u){return u===void 0&&(u=60),this.body.sleepThreshold=u,this},setSleepEvents:function(u,r){return this.setSleepStartEvent(u),this.setSleepEndEvent(r),this},setSleepStartEvent:function(u){if(u){var r=this.world;f.on(this.body,"sleepStart",function(h){r.emit(a.SLEEP_START,h,this)})}else f.off(this.body,"sleepStart");return this},setSleepEndEvent:function(u){if(u){var r=this.world;f.on(this.body,"sleepEnd",function(h){r.emit(a.SLEEP_END,h,this)})}else f.off(this.body,"sleepEnd");return this}};s.exports=o}),90556:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),g={setStatic:function(f){return a.setStatic(this.body,f),this},isStatic:function(){return this.body.isStatic}};s.exports=g}),85436:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),g=e(36383),f=e(86554),o=e(30954),u=4,r={x:{get:function(){return this.body.position.x},set:function(h){this._tempVec2.set(h,this.y),a.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(h){this._tempVec2.set(this.x,h),a.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(h){this.setScale(h,h)}},scaleX:{get:function(){return this._scaleX},set:function(h){var c=1/this._scaleX,l=1/this._scaleY;this._scaleX=h,this._scaleX===0?this.renderFlags&=~u:this.renderFlags|=u,a.scale(this.body,c,l),a.scale(this.body,h,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(h){var c=1/this._scaleX,l=1/this._scaleY;this._scaleY=h,this._scaleY===0?this.renderFlags&=~u:this.renderFlags|=u,a.scale(this.body,c,l),a.scale(this.body,this._scaleX,h)}},angle:{get:function(){return o(this.body.angle*g.RAD_TO_DEG)},set:function(h){this.rotation=o(h)*g.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(h){this._rotation=f(h),a.setAngle(this.body,this._rotation)}},setPosition:function(h,c){return h===void 0&&(h=0),c===void 0&&(c=h),this._tempVec2.set(h,c),a.setPosition(this.body,this._tempVec2),this},setRotation:function(h){return h===void 0&&(h=0),this._rotation=f(h),a.setAngle(this.body,h),this},setFixedRotation:function(){return a.setInertia(this.body,1/0),this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,a.setAngle(this.body,this.rotation),this},setScale:function(h,c,l){h===void 0&&(h=1),c===void 0&&(c=h);var p=1/this._scaleX,m=1/this._scaleY;return this._scaleX=h,this._scaleY=c,a.scale(this.body,p,m,l),a.scale(this.body,h,c,l),this}};s.exports=r}),42081:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),g={setVelocityX:function(f){return this._tempVec2.set(f,this.body.velocity.y),a.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(f){return this._tempVec2.set(this.body.velocity.x,f),a.setVelocity(this.body,this._tempVec2),this},setVelocity:function(f,o){return this._tempVec2.set(f,o),a.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return a.getVelocity(this.body)},setAngularVelocity:function(f){return a.setAngularVelocity(this.body,f),this},getAngularVelocity:function(){return a.getAngularVelocity(this.body)},setAngularSpeed:function(f){return a.setAngularSpeed(this.body,f),this},getAngularSpeed:function(){return a.getAngularSpeed(this.body)}};s.exports=g}),31884:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Bounce:e(70410),Collision:e(66968),Force:e(51607),Friction:e(5436),Gravity:e(39858),Mass:e(37302),Sensor:e(39132),SetBody:e(57772),Sleep:e(38083),Static:e(90556),Transform:e(85436),Velocity:e(42081)}}),85608:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="afteradd"}),1213:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="afterremove"}),25968:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="afterupdate"}),67205:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="beforeadd"}),39438:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="beforeremove"}),44823:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="beforeupdate"}),92593:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="collisionactive"}),60128:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="collisionend"}),76861:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="collisionstart"}),92362:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragend"}),76408:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drag"}),93971:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragstart"}),5656:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),47861:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),79099:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="sleepend"}),35906:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="sleepstart"}),1121:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AFTER_ADD:e(85608),AFTER_REMOVE:e(1213),AFTER_UPDATE:e(25968),BEFORE_ADD:e(67205),BEFORE_REMOVE:e(39438),BEFORE_UPDATE:e(44823),COLLISION_ACTIVE:e(92593),COLLISION_END:e(60128),COLLISION_START:e(76861),DRAG_END:e(92362),DRAG:e(76408),DRAG_START:e(93971),PAUSE:e(5656),RESUME:e(47861),SLEEP_END:e(79099),SLEEP_START:e(35906)}}),3875:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BodyBounds:e(68174),Components:e(31884),Events:e(1121),Factory:e(28137),MatterGameObject:e(75803),Image:e(23181),Matter:e(19933),MatterPhysics:e(42045),PolyDecomp:e(55973),Sprite:e(34803),TileBody:e(73834),PhysicsEditorParser:e(19496),PhysicsJSONParser:e(85791),PointerConstraint:e(98713),World:e(68243)}}),22562:((s,T,e)=>{var a={};s.exports=a;var g=e(41598),f=e(31725),o=e(53614),u=e(53402),r=e(15647),h=e(66615);(function(){a._timeCorrection=!0,a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a._baseDelta=16.666666666666668,a.create=function(l){var p={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:l.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!l.hasOwnProperty("position")&&l.hasOwnProperty("vertices")?l.position=g.centre(l.vertices):l.hasOwnProperty("vertices")||(p.vertices=g.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var m=u.extend(p,l);return c(m,l),m.setOnCollideWith=function(v,y){return y?this.onCollideWith[v.id]=y:delete this.onCollideWith[v.id],this},m},a.nextGroup=function(l){return l?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var c=function(l,p){if(p=p||{},a.set(l,{bounds:l.bounds||r.create(l.vertices),positionPrev:l.positionPrev||f.clone(l.position),anglePrev:l.anglePrev||l.angle,vertices:l.vertices,parts:l.parts||[l],isStatic:l.isStatic,isSleeping:l.isSleeping,parent:l.parent||l}),g.rotate(l.vertices,l.angle,l.position),h.rotate(l.axes,l.angle),r.update(l.bounds,l.vertices,l.velocity),a.set(l,{axes:p.axes||l.axes,area:p.area||l.area,mass:p.mass||l.mass,inertia:p.inertia||l.inertia}),l.parts.length===1){var m=l.bounds,v=l.centerOfMass,y=l.centerOffset,E=m.max.x-m.min.x,C=m.max.y-m.min.y;v.x=-(m.min.x-l.position.x)/E,v.y=-(m.min.y-l.position.y)/C,y.x=E*v.x,y.y=C*v.y}};a.set=function(l,p,m){var v;typeof p=="string"&&(v=p,p={},p[v]=m);for(v in p)if(Object.prototype.hasOwnProperty.call(p,v))switch(m=p[v],v){case"isStatic":a.setStatic(l,m);break;case"isSleeping":o.set(l,m);break;case"mass":a.setMass(l,m);break;case"density":a.setDensity(l,m);break;case"inertia":a.setInertia(l,m);break;case"vertices":a.setVertices(l,m);break;case"position":a.setPosition(l,m);break;case"angle":a.setAngle(l,m);break;case"velocity":a.setVelocity(l,m);break;case"angularVelocity":a.setAngularVelocity(l,m);break;case"speed":a.setSpeed(l,m);break;case"angularSpeed":a.setAngularSpeed(l,m);break;case"parts":a.setParts(l,m);break;case"centre":a.setCentre(l,m);break;default:l[v]=m}},a.setStatic=function(l,p){for(var m=0;m<l.parts.length;m++){var v=l.parts[m];p?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=p}},a.setMass=function(l,p){var m=l.inertia/(l.mass/6);l.inertia=m*(p/6),l.inverseInertia=1/l.inertia,l.mass=p,l.inverseMass=1/l.mass,l.density=l.mass/l.area},a.setDensity=function(l,p){a.setMass(l,p*l.area),l.density=p},a.setInertia=function(l,p){l.inertia=p,l.inverseInertia=1/l.inertia},a.setVertices=function(l,p){p[0].body===l?l.vertices=p:l.vertices=g.create(p,l),l.axes=h.fromVertices(l.vertices),l.area=g.area(l.vertices),a.setMass(l,l.density*l.area);var m=g.centre(l.vertices);g.translate(l.vertices,m,-1),a.setInertia(l,a._inertiaScale*g.inertia(l.vertices,l.mass)),g.translate(l.vertices,l.position),r.update(l.bounds,l.vertices,l.velocity)},a.setParts=function(l,p,m){var v;for(p=p.slice(0),l.parts.length=0,l.parts.push(l),l.parent=l,v=0;v<p.length;v++){var y=p[v];y!==l&&(y.parent=l,l.parts.push(y))}if(l.parts.length!==1){if(m=typeof m<"u"?m:!0,m){var E=[];for(v=0;v<p.length;v++)E=E.concat(p[v].vertices);g.clockwiseSort(E);var C=g.hull(E),w=g.centre(C);a.setVertices(l,C),g.translate(l.vertices,w)}var A=a._totalProperties(l),M=A.centre.x,R=A.centre.y,P=l.bounds,b=l.centerOfMass,F=l.centerOffset;r.update(P,l.vertices,l.velocity),b.x=-(P.min.x-M)/(P.max.x-P.min.x),b.y=-(P.min.y-R)/(P.max.y-P.min.y),F.x=M,F.y=R,l.area=A.area,l.parent=l,l.position.x=M,l.position.y=R,l.positionPrev.x=M,l.positionPrev.y=R,a.setMass(l,A.mass),a.setInertia(l,A.inertia),a.setPosition(l,A.centre)}},a.setCentre=function(l,p,m){m?(l.positionPrev.x+=p.x,l.positionPrev.y+=p.y,l.position.x+=p.x,l.position.y+=p.y):(l.positionPrev.x=p.x-(l.position.x-l.positionPrev.x),l.positionPrev.y=p.y-(l.position.y-l.positionPrev.y),l.position.x=p.x,l.position.y=p.y)},a.setPosition=function(l,p,m){var v=f.sub(p,l.position);m?(l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.velocity.x=v.x,l.velocity.y=v.y,l.speed=f.magnitude(v)):(l.positionPrev.x+=v.x,l.positionPrev.y+=v.y);for(var y=0;y<l.parts.length;y++){var E=l.parts[y];E.position.x+=v.x,E.position.y+=v.y,g.translate(E.vertices,v),r.update(E.bounds,E.vertices,l.velocity)}},a.setAngle=function(l,p,m){var v=p-l.angle;m?(l.anglePrev=l.angle,l.angularVelocity=v,l.angularSpeed=Math.abs(v)):l.anglePrev+=v;for(var y=0;y<l.parts.length;y++){var E=l.parts[y];E.angle+=v,g.rotate(E.vertices,v,l.position),h.rotate(E.axes,v),r.update(E.bounds,E.vertices,l.velocity),y>0&&f.rotateAbout(E.position,v,l.position,E.position)}},a.setVelocity=function(l,p){var m=l.deltaTime/a._baseDelta;l.positionPrev.x=l.position.x-p.x*m,l.positionPrev.y=l.position.y-p.y*m,l.velocity.x=(l.position.x-l.positionPrev.x)/m,l.velocity.y=(l.position.y-l.positionPrev.y)/m,l.speed=f.magnitude(l.velocity)},a.getVelocity=function(l){var p=a._baseDelta/l.deltaTime;return{x:(l.position.x-l.positionPrev.x)*p,y:(l.position.y-l.positionPrev.y)*p}},a.getSpeed=function(l){return f.magnitude(a.getVelocity(l))},a.setSpeed=function(l,p){a.setVelocity(l,f.mult(f.normalise(a.getVelocity(l)),p))},a.setAngularVelocity=function(l,p){var m=l.deltaTime/a._baseDelta;l.anglePrev=l.angle-p*m,l.angularVelocity=(l.angle-l.anglePrev)/m,l.angularSpeed=Math.abs(l.angularVelocity)},a.getAngularVelocity=function(l){return(l.angle-l.anglePrev)*a._baseDelta/l.deltaTime},a.getAngularSpeed=function(l){return Math.abs(a.getAngularVelocity(l))},a.setAngularSpeed=function(l,p){a.setAngularVelocity(l,u.sign(a.getAngularVelocity(l))*p)},a.translate=function(l,p,m){a.setPosition(l,f.add(l.position,p),m)},a.rotate=function(l,p,m,v){if(!m)a.setAngle(l,l.angle+p,v);else{var y=Math.cos(p),E=Math.sin(p),C=l.position.x-m.x,w=l.position.y-m.y;a.setPosition(l,{x:m.x+(C*y-w*E),y:m.y+(C*E+w*y)},v),a.setAngle(l,l.angle+p,v)}},a.scale=function(l,p,m,v){var y=0,E=0;v=v||l.position;for(var C=l.inertia===1/0,w=0;w<l.parts.length;w++){var A=l.parts[w];A.scale.x=p,A.scale.y=m,g.scale(A.vertices,p,m,v),A.axes=h.fromVertices(A.vertices),A.area=g.area(A.vertices),a.setMass(A,l.density*A.area),g.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),a.setInertia(A,a._inertiaScale*g.inertia(A.vertices,A.mass)),g.translate(A.vertices,{x:A.position.x,y:A.position.y}),w>0&&(y+=A.area,E+=A.inertia),A.position.x=v.x+(A.position.x-v.x)*p,A.position.y=v.y+(A.position.y-v.y)*m,r.update(A.bounds,A.vertices,l.velocity)}l.parts.length>1&&(l.area=y,l.isStatic||(a.setMass(l,l.density*y),a.setInertia(l,E))),l.circleRadius&&(p===m?l.circleRadius*=p:l.circleRadius=null),C&&a.setInertia(l,1/0)},a.update=function(l,p){p=(typeof p<"u"?p:16.666666666666668)*l.timeScale;var m=p*p,v=a._timeCorrection?p/(l.deltaTime||p):1,y=1-l.frictionAir*(p/u._baseDelta),E=(l.position.x-l.positionPrev.x)*v,C=(l.position.y-l.positionPrev.y)*v;l.velocity.x=E*y+l.force.x/l.mass*m,l.velocity.y=C*y+l.force.y/l.mass*m,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.position.x+=l.velocity.x,l.position.y+=l.velocity.y,l.deltaTime=p,l.angularVelocity=(l.angle-l.anglePrev)*y*v+l.torque/l.inertia*m,l.anglePrev=l.angle,l.angle+=l.angularVelocity,l.speed=f.magnitude(l.velocity),l.angularSpeed=Math.abs(l.angularVelocity);for(var w=0;w<l.parts.length;w++){var A=l.parts[w];g.translate(A.vertices,l.velocity),w>0&&(A.position.x+=l.velocity.x,A.position.y+=l.velocity.y),l.angularVelocity!==0&&(g.rotate(A.vertices,l.angularVelocity,l.position),h.rotate(A.axes,l.angularVelocity),w>0&&f.rotateAbout(A.position,l.angularVelocity,l.position,A.position)),r.update(A.bounds,A.vertices,l.velocity)}},a.updateVelocities=function(l){var p=a._baseDelta/l.deltaTime,m=l.velocity;m.x=(l.position.x-l.positionPrev.x)*p,m.y=(l.position.y-l.positionPrev.y)*p,l.speed=Math.sqrt(m.x*m.x+m.y*m.y),l.angularVelocity=(l.angle-l.anglePrev)*p,l.angularSpeed=Math.abs(l.angularVelocity)},a.applyForce=function(l,p,m){var v={x:p.x-l.position.x,y:p.y-l.position.y};l.force.x+=m.x,l.force.y+=m.y,l.torque+=v.x*m.y-v.y*m.x},a._totalProperties=function(l){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},m=l.parts.length===1?0:1;m<l.parts.length;m++){var v=l.parts[m],y=v.mass!==1/0?v.mass:1;p.mass+=y,p.area+=v.area,p.inertia+=v.inertia,p.centre=f.add(p.centre,f.mult(v.position,y))}return p.centre=f.div(p.centre,p.mass),p},a.wrap=function(l,p){var m=r.wrap(l.bounds,p);return m&&a.translate(l,m),m}})()}),69351:((s,T,e)=>{var a={};s.exports=a;var g=e(35810),f=e(53402),o=e(15647),u=e(22562);(function(){a.create=function(r){return f.extend({id:f.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},a.setModified=function(r,h,c,l){if(g.trigger(r,"compositeModified",r),r.isModified=h,h&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),c&&r.parent&&a.setModified(r.parent,h,c,l),l)for(var p=0;p<r.composites.length;p++){var m=r.composites[p];a.setModified(m,h,c,l)}},a.add=function(r,h){var c=[].concat(h);g.trigger(r,"beforeAdd",{object:h});for(var l=0;l<c.length;l++){var p=c[l];switch(p.type){case"body":if(p.parent!==p){f.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(r,p);break;case"constraint":a.addConstraint(r,p);break;case"composite":a.addComposite(r,p);break;case"mouseConstraint":a.addConstraint(r,p.constraint);break}}return g.trigger(r,"afterAdd",{object:h}),r},a.remove=function(r,h,c){var l=[].concat(h);g.trigger(r,"beforeRemove",{object:h});for(var p=0;p<l.length;p++){var m=l[p];switch(m.type){case"body":a.removeBody(r,m,c);break;case"constraint":a.removeConstraint(r,m,c);break;case"composite":a.removeComposite(r,m,c);break;case"mouseConstraint":a.removeConstraint(r,m.constraint);break}}return g.trigger(r,"afterRemove",{object:h}),r},a.addComposite=function(r,h){return r.composites.push(h),h.parent=r,a.setModified(r,!0,!0,!1),r},a.removeComposite=function(r,h,c){var l=f.indexOf(r.composites,h);if(l!==-1){var p=a.allBodies(h);a.removeCompositeAt(r,l);for(var m=0;m<p.length;m++)p[m].sleepCounter=0}if(c)for(var m=0;m<r.composites.length;m++)a.removeComposite(r.composites[m],h,!0);return r},a.removeCompositeAt=function(r,h){return r.composites.splice(h,1),a.setModified(r,!0,!0,!1),r},a.addBody=function(r,h){return r.bodies.push(h),a.setModified(r,!0,!0,!1),r},a.removeBody=function(r,h,c){var l=f.indexOf(r.bodies,h);if(l!==-1&&(a.removeBodyAt(r,l),h.sleepCounter=0),c)for(var p=0;p<r.composites.length;p++)a.removeBody(r.composites[p],h,!0);return r},a.removeBodyAt=function(r,h){return r.bodies.splice(h,1),a.setModified(r,!0,!0,!1),r},a.addConstraint=function(r,h){return r.constraints.push(h),a.setModified(r,!0,!0,!1),r},a.removeConstraint=function(r,h,c){var l=f.indexOf(r.constraints,h);if(l!==-1&&a.removeConstraintAt(r,l),c)for(var p=0;p<r.composites.length;p++)a.removeConstraint(r.composites[p],h,!0);return r},a.removeConstraintAt=function(r,h){return r.constraints.splice(h,1),a.setModified(r,!0,!0,!1),r},a.clear=function(r,h,c){if(c)for(var l=0;l<r.composites.length;l++)a.clear(r.composites[l],h,!0);return h?r.bodies=r.bodies.filter(function(p){return p.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,a.setModified(r,!0,!0,!1),r},a.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var h=[].concat(r.bodies),c=0;c<r.composites.length;c++)h=h.concat(a.allBodies(r.composites[c]));return r.cache&&(r.cache.allBodies=h),h},a.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var h=[].concat(r.constraints),c=0;c<r.composites.length;c++)h=h.concat(a.allConstraints(r.composites[c]));return r.cache&&(r.cache.allConstraints=h),h},a.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var h=[].concat(r.composites),c=0;c<r.composites.length;c++)h=h.concat(a.allComposites(r.composites[c]));return r.cache&&(r.cache.allComposites=h),h},a.get=function(r,h,c){var l,p;switch(c){case"body":l=a.allBodies(r);break;case"constraint":l=a.allConstraints(r);break;case"composite":l=a.allComposites(r).concat(r);break}return l?(p=l.filter(function(m){return m.id.toString()===h.toString()}),p.length===0?null:p[0]):null},a.move=function(r,h,c){return a.remove(r,h),a.add(c,h),r},a.rebase=function(r){for(var h=a.allBodies(r).concat(a.allConstraints(r)).concat(a.allComposites(r)),c=0;c<h.length;c++)h[c].id=f.nextId();return r},a.translate=function(r,h,c){for(var l=c?a.allBodies(r):r.bodies,p=0;p<l.length;p++)u.translate(l[p],h);return r},a.rotate=function(r,h,c,l){for(var p=Math.cos(h),m=Math.sin(h),v=l?a.allBodies(r):r.bodies,y=0;y<v.length;y++){var E=v[y],C=E.position.x-c.x,w=E.position.y-c.y;u.setPosition(E,{x:c.x+(C*p-w*m),y:c.y+(C*m+w*p)}),u.rotate(E,h)}return r},a.scale=function(r,h,c,l,p){for(var m=p?a.allBodies(r):r.bodies,v=0;v<m.length;v++){var y=m[v],E=y.position.x-l.x,C=y.position.y-l.y;u.setPosition(y,{x:l.x+E*h,y:l.y+C*c}),u.scale(y,h,c)}return r},a.bounds=function(r){for(var h=a.allBodies(r),c=[],l=0;l<h.length;l+=1){var p=h[l];c.push(p.bounds.min,p.bounds.max)}return o.create(c)},a.wrap=function(r,h){var c=o.wrap(a.bounds(r),h);return c&&a.translate(r,c),c}})()}),4372:((s,T,e)=>{var a={};s.exports=a;var g=e(69351);(function(){a.create=g.create,a.add=g.add,a.remove=g.remove,a.clear=g.clear,a.addComposite=g.addComposite,a.addBody=g.addBody,a.addConstraint=g.addConstraint})()}),52284:((s,T,e)=>{var a={};s.exports=a;var g=e(41598),f=e(4506);(function(){var o=[],u={overlap:0,axis:null},r={overlap:0,axis:null};a.create=function(h,c){return{pair:null,collided:!1,bodyA:h,bodyB:c,parentA:h.parent,parentB:c.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},a.collides=function(h,c,l){if(a._overlapAxes(u,h.vertices,c.vertices,h.axes),u.overlap<=0||(a._overlapAxes(r,c.vertices,h.vertices,c.axes),r.overlap<=0))return null;var p=l&&l.table[f.id(h,c)],m;p?m=p.collision:(m=a.create(h,c),m.collided=!0,m.bodyA=h.id<c.id?h:c,m.bodyB=h.id<c.id?c:h,m.parentA=m.bodyA.parent,m.parentB=m.bodyB.parent),h=m.bodyA,c=m.bodyB;var v;u.overlap<r.overlap?v=u:v=r;var y=m.normal,E=m.tangent,C=m.penetration,w=m.supports,A=v.overlap,M=v.axis,R=M.x,P=M.y,b=c.position.x-h.position.x,F=c.position.y-h.position.y;R*b+P*F>=0&&(R=-R,P=-P),y.x=R,y.y=P,E.x=-P,E.y=R,C.x=R*A,C.y=P*A,m.depth=A;var I=a._findSupports(h,c,y,1),L=0;if(g.contains(h.vertices,I[0])&&(w[L++]=I[0]),g.contains(h.vertices,I[1])&&(w[L++]=I[1]),L<2){var D=a._findSupports(c,h,y,-1);g.contains(c.vertices,D[0])&&(w[L++]=D[0]),L<2&&g.contains(c.vertices,D[1])&&(w[L++]=D[1])}return L===0&&(w[L++]=I[0]),m.supportCount=L,m},a._overlapAxes=function(h,c,l,p){var m=c.length,v=l.length,y=c[0].x,E=c[0].y,C=l[0].x,w=l[0].y,A=p.length,M=Number.MAX_VALUE,R=0,P,b,F,I,L,D;for(L=0;L<A;L++){var O=p[L],z=O.x,_=O.y,X=y*z+E*_,H=C*z+w*_,U=X,G=H;for(D=1;D<m;D+=1)I=c[D].x*z+c[D].y*_,I>U?U=I:I<X&&(X=I);for(D=1;D<v;D+=1)I=l[D].x*z+l[D].y*_,I>G?G=I:I<H&&(H=I);if(b=U-H,F=G-X,P=b<F?b:F,P<M&&(M=P,R=L,P<=0))break}h.axis=p[R],h.overlap=M},a._findSupports=function(h,c,l,p){var m=c.vertices,v=m.length,y=h.position.x,E=h.position.y,C=l.x*p,w=l.y*p,A=m[0],M=A,R=C*(y-M.x)+w*(E-M.y),P,b,F;for(F=1;F<v;F+=1)M=m[F],b=C*(y-M.x)+w*(E-M.y),b<R&&(R=b,A=M);return P=m[(v+A.index-1)%v],R=C*(y-P.x)+w*(E-P.y),M=m[(A.index+1)%v],C*(y-M.x)+w*(E-M.y)<R?(o[0]=A,o[1]=M,o):(o[0]=A,o[1]=P,o)}})()}),43424:(s=>{var T={};s.exports=T,(function(){T.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}})()}),81388:((s,T,e)=>{var a={};s.exports=a;var g=e(53402),f=e(52284);(function(){a.create=function(o){var u={bodies:[],collisions:[],pairs:null};return g.extend(u,o)},a.setBodies=function(o,u){o.bodies=u.slice(0)},a.clear=function(o){o.bodies=[],o.collisions=[]},a.collisions=function(o){var u=o.pairs,r=o.bodies,h=r.length,c=a.canCollide,l=f.collides,p=o.collisions,m=0,v,y;for(r.sort(a._compareBoundsX),v=0;v<h;v++){var E=r[v],C=E.bounds,w=E.bounds.max.x,A=E.bounds.max.y,M=E.bounds.min.y,R=E.isStatic||E.isSleeping,P=E.parts.length,b=P===1;for(y=v+1;y<h;y++){var F=r[y],I=F.bounds;if(I.min.x>w)break;if(!(A<I.min.y||M>I.max.y)&&!(R&&(F.isStatic||F.isSleeping))&&c(E.collisionFilter,F.collisionFilter)){var L=F.parts.length;if(b&&L===1){var D=l(E,F,u);D&&(p[m++]=D)}else for(var O=P>1?1:0,z=L>1?1:0,_=O;_<P;_++)for(var X=E.parts[_],C=X.bounds,H=z;H<L;H++){var U=F.parts[H],I=U.bounds;if(!(C.min.x>I.max.x||C.max.x<I.min.x||C.max.y<I.min.y||C.min.y>I.max.y)){var D=l(X,U,u);D&&(p[m++]=D)}}}}}return p.length!==m&&(p.length=m),p},a.canCollide=function(o,u){return o.group===u.group&&o.group!==0?o.group>0:(o.mask&u.category)!==0&&(u.mask&o.category)!==0},a._compareBoundsX=function(o,u){return o.bounds.min.x-u.bounds.min.x}})()}),4506:((s,T,e)=>{var a={};s.exports=a;var g=e(43424);(function(){a.create=function(f,o){var u=f.bodyA,r=f.bodyB,h={id:a.id(u,r),bodyA:u,bodyB:r,collision:f,contacts:[g.create(),g.create()],contactCount:0,separation:0,isActive:!0,isSensor:u.isSensor||r.isSensor,timeCreated:o,timeUpdated:o,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(h,f,o),h},a.update=function(f,o,u){var r=o.supports,h=o.supportCount,c=f.contacts,l=o.parentA,p=o.parentB;f.isActive=!0,f.timeUpdated=u,f.collision=o,f.separation=o.depth,f.inverseMass=l.inverseMass+p.inverseMass,f.friction=l.friction<p.friction?l.friction:p.friction,f.frictionStatic=l.frictionStatic>p.frictionStatic?l.frictionStatic:p.frictionStatic,f.restitution=l.restitution>p.restitution?l.restitution:p.restitution,f.slop=l.slop>p.slop?l.slop:p.slop,f.contactCount=h,o.pair=f;var m=r[0],v=c[0],y=r[1],E=c[1];(E.vertex===m||v.vertex===y)&&(c[1]=v,c[0]=v=E,E=c[1]),v.vertex=m,E.vertex=y},a.setActive=function(f,o,u){o?(f.isActive=!0,f.timeUpdated=u):(f.isActive=!1,f.contactCount=0)},a.id=function(f,o){return f.id<o.id?f.id.toString(36)+":"+o.id.toString(36):o.id.toString(36)+":"+f.id.toString(36)}})()}),99561:((s,T,e)=>{var a={};s.exports=a;var g=e(4506),f=e(53402);(function(){a.create=function(o){return f.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},a.update=function(o,u,r){var h=g.update,c=g.create,l=g.setActive,p=o.table,m=o.list,v=m.length,y=v,E=o.collisionStart,C=o.collisionEnd,w=o.collisionActive,A=u.length,M=0,R=0,P=0,b,F,I;for(I=0;I<A;I++)b=u[I],F=b.pair,F?(F.isActive&&(w[P++]=F),h(F,b,r)):(F=c(b,r),p[F.id]=F,E[M++]=F,m[y++]=F);for(y=0,v=m.length,I=0;I<v;I++)F=m[I],F.timeUpdated>=r?m[y++]=F:(l(F,!1,r),F.collision.bodyA.sleepCounter>0&&F.collision.bodyB.sleepCounter>0?m[y++]=F:(C[R++]=F,delete p[F.id]));m.length!==y&&(m.length=y),E.length!==M&&(E.length=M),C.length!==R&&(C.length=R),w.length!==P&&(w.length=P)},a.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()}),73296:((s,T,e)=>{var a={};s.exports=a;var g=e(31725),f=e(52284),o=e(15647),u=e(66280),r=e(41598);(function(){a.collides=function(h,c){for(var l=[],p=c.length,m=h.bounds,v=f.collides,y=o.overlaps,E=0;E<p;E++){var C=c[E],w=C.parts.length,A=w===1?0:1;if(h!==C&&y(C.bounds,m))for(var M=A;M<w;M++){var R=C.parts[M];if(y(R.bounds,m)){var P=v(R,h);if(P){l.push(P);break}}}}return l},a.ray=function(h,c,l,p){p=p||1e-100;for(var m=g.angle(c,l),v=g.magnitude(g.sub(c,l)),y=(l.x+c.x)*.5,E=(l.y+c.y)*.5,C=u.rectangle(y,E,v,p,{angle:m}),w=a.collides(C,h),A=0;A<w.length;A+=1){var M=w[A];M.body=M.bodyB=M.bodyA}return w},a.region=function(h,c,l){for(var p=[],m=0;m<h.length;m++){var v=h[m],y=o.overlaps(v.bounds,c);(y&&!l||!y&&l)&&p.push(v)}return p},a.point=function(h,c){for(var l=[],p=0;p<h.length;p++){var m=h[p];if(o.contains(m.bounds,c))for(var v=m.parts.length===1?0:1;v<m.parts.length;v++){var y=m.parts[v];if(o.contains(y.bounds,c)&&r.contains(y.vertices,c)){l.push(m);break}}}return l}})()}),66272:((s,T,e)=>{var a={};s.exports=a;var g=e(41598),f=e(53402),o=e(15647);(function(){a._restingThresh=2,a._restingThreshTangent=Math.sqrt(6),a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a._frictionMaxStatic=Number.MAX_VALUE,a.preSolvePosition=function(u){var r,h,c,l=u.length;for(r=0;r<l;r++)h=u[r],h.isActive&&(c=h.contactCount,h.collision.parentA.totalContacts+=c,h.collision.parentB.totalContacts+=c)},a.solvePosition=function(u,r,h){var c,l,p,m,v,y,E,C,w=a._positionDampen*(h||1),A=f.clamp(r/f._baseDelta,0,1),M=u.length;for(c=0;c<M;c++)l=u[c],!(!l.isActive||l.isSensor)&&(p=l.collision,m=p.parentA,v=p.parentB,y=p.normal,l.separation=p.depth+y.x*(v.positionImpulse.x-m.positionImpulse.x)+y.y*(v.positionImpulse.y-m.positionImpulse.y));for(c=0;c<M;c++)l=u[c],!(!l.isActive||l.isSensor)&&(p=l.collision,m=p.parentA,v=p.parentB,y=p.normal,C=l.separation-l.slop*A,(m.isStatic||v.isStatic)&&(C*=2),m.isStatic||m.isSleeping||(E=w/m.totalContacts,m.positionImpulse.x+=y.x*C*E,m.positionImpulse.y+=y.y*C*E),v.isStatic||v.isSleeping||(E=w/v.totalContacts,v.positionImpulse.x-=y.x*C*E,v.positionImpulse.y-=y.y*C*E))},a.postSolvePosition=function(u){for(var r=a._positionWarming,h=u.length,c=g.translate,l=o.update,p=0;p<h;p++){var m=u[p],v=m.positionImpulse,y=v.x,E=v.y,C=m.velocity;if(m.totalContacts=0,y!==0||E!==0){for(var w=0;w<m.parts.length;w++){var A=m.parts[w];c(A.vertices,v),l(A.bounds,A.vertices,C),A.position.x+=y,A.position.y+=E}m.positionPrev.x+=y,m.positionPrev.y+=E,y*C.x+E*C.y<0?(v.x=0,v.y=0):(v.x*=r,v.y*=r)}}},a.preSolveVelocity=function(u){var r=u.length,h,c;for(h=0;h<r;h++){var l=u[h];if(!(!l.isActive||l.isSensor)){var p=l.contacts,m=l.contactCount,v=l.collision,y=v.parentA,E=v.parentB,C=v.normal,w=v.tangent;for(c=0;c<m;c++){var A=p[c],M=A.vertex,R=A.normalImpulse,P=A.tangentImpulse;if(R!==0||P!==0){var b=C.x*R+w.x*P,F=C.y*R+w.y*P;y.isStatic||y.isSleeping||(y.positionPrev.x+=b*y.inverseMass,y.positionPrev.y+=F*y.inverseMass,y.anglePrev+=y.inverseInertia*((M.x-y.position.x)*F-(M.y-y.position.y)*b)),E.isStatic||E.isSleeping||(E.positionPrev.x-=b*E.inverseMass,E.positionPrev.y-=F*E.inverseMass,E.anglePrev-=E.inverseInertia*((M.x-E.position.x)*F-(M.y-E.position.y)*b))}}}}},a.solveVelocity=function(u,r){var h=r/f._baseDelta,c=h*h,l=c*h,p=-a._restingThresh*h,m=a._restingThreshTangent,v=a._frictionNormalMultiplier*h,y=a._frictionMaxStatic,E=u.length,C,w,A,M;for(A=0;A<E;A++){var R=u[A];if(!(!R.isActive||R.isSensor)){var P=R.collision,b=P.parentA,F=P.parentB,I=P.normal.x,L=P.normal.y,D=P.tangent.x,O=P.tangent.y,z=R.inverseMass,_=R.friction*R.frictionStatic*v,X=R.contacts,H=R.contactCount,U=1/H,G=b.position.x-b.positionPrev.x,N=b.position.y-b.positionPrev.y,W=b.angle-b.anglePrev,V=F.position.x-F.positionPrev.x,$=F.position.y-F.positionPrev.y,j=F.angle-F.anglePrev;for(M=0;M<H;M++){var k=X[M],Q=k.vertex,et=Q.x-b.position.x,at=Q.y-b.position.y,q=Q.x-F.position.x,ft=Q.y-F.position.y,vt=G-at*W,Tt=N+et*W,ct=V-ft*j,Ut=$+q*j,yt=vt-ct,it=Tt-Ut,Z=I*yt+L*it,lt=D*yt+O*it,pt=R.separation+Z,Pt=Math.min(pt,1);Pt=pt<0?0:Pt;var wt=Pt*_;lt<-wt||lt>wt?(w=lt>0?lt:-lt,C=R.friction*(lt>0?1:-1)*l,C<-w?C=-w:C>w&&(C=w)):(C=lt,w=y);var jt=et*L-at*I,Vt=q*L-ft*I,Wt=U/(z+b.inverseInertia*jt*jt+F.inverseInertia*Vt*Vt),ue=(1+R.restitution)*Z*Wt;if(C*=Wt,Z<p)k.normalImpulse=0;else{var Gt=k.normalImpulse;k.normalImpulse+=ue,k.normalImpulse>0&&(k.normalImpulse=0),ue=k.normalImpulse-Gt}if(lt<-m||lt>m)k.tangentImpulse=0;else{var zt=k.tangentImpulse;k.tangentImpulse+=C,k.tangentImpulse<-w&&(k.tangentImpulse=-w),k.tangentImpulse>w&&(k.tangentImpulse=w),C=k.tangentImpulse-zt}var Yt=I*ue+D*C,bt=L*ue+O*C;b.isStatic||b.isSleeping||(b.positionPrev.x+=Yt*b.inverseMass,b.positionPrev.y+=bt*b.inverseMass,b.anglePrev+=(et*bt-at*Yt)*b.inverseInertia),F.isStatic||F.isSleeping||(F.positionPrev.x-=Yt*F.inverseMass,F.positionPrev.y-=bt*F.inverseMass,F.anglePrev-=(q*bt-ft*Yt)*F.inverseInertia)}}}}})()}),48140:((s,T,e)=>{var a={};s.exports=a;var g=e(41598),f=e(31725),o=e(53614),u=e(15647),r=e(66615),h=e(53402);(function(){a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(c){var l=c;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var p=l.bodyA?f.add(l.bodyA.position,l.pointA):l.pointA,m=l.bodyB?f.add(l.bodyB.position,l.pointB):l.pointB,v=f.magnitude(f.sub(p,m));l.length=typeof l.length<"u"?l.length:v,l.id=l.id||h.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var y={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return l.length===0&&l.stiffness>.1?(y.type="pin",y.anchors=!1):l.stiffness<.9&&(y.type="spring"),l.render=h.extend(y,l.render),l},a.preSolveAll=function(c){for(var l=0;l<c.length;l+=1){var p=c[l],m=p.constraintImpulse;p.isStatic||m.x===0&&m.y===0&&m.angle===0||(p.position.x+=m.x,p.position.y+=m.y,p.angle+=m.angle)}},a.solveAll=function(c,l){for(var p=h.clamp(l/h._baseDelta,0,1),m=0;m<c.length;m+=1){var v=c[m],y=!v.bodyA||v.bodyA&&v.bodyA.isStatic,E=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(y||E)&&a.solve(c[m],p)}for(m=0;m<c.length;m+=1)v=c[m],y=!v.bodyA||v.bodyA&&v.bodyA.isStatic,E=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!y&&!E&&a.solve(c[m],p)},a.solve=function(c,l){var p=c.bodyA,m=c.bodyB,v=c.pointA,y=c.pointB;if(!(!p&&!m)){p&&!p.isStatic&&(f.rotate(v,p.angle-c.angleA,v),c.angleA=p.angle),m&&!m.isStatic&&(f.rotate(y,m.angle-c.angleB,y),c.angleB=m.angle);var E=v,C=y;if(p&&(E=f.add(p.position,v)),m&&(C=f.add(m.position,y)),!(!E||!C)){var w=f.sub(E,C),A=f.magnitude(w);A<a._minLength&&(A=a._minLength);var M=(A-c.length)/A,R=c.stiffness>=1||c.length===0,P=R?c.stiffness*l:c.stiffness*l*l,b=c.damping*l,F=f.mult(w,M*P),I=(p?p.inverseMass:0)+(m?m.inverseMass:0),L=(p?p.inverseInertia:0)+(m?m.inverseInertia:0),D=I+L,O,z,_,X,H;if(b>0){var U=f.create();_=f.div(w,A),H=f.sub(m&&f.sub(m.position,m.positionPrev)||U,p&&f.sub(p.position,p.positionPrev)||U),X=f.dot(_,H)}p&&!p.isStatic&&(z=p.inverseMass/I,p.constraintImpulse.x-=F.x*z,p.constraintImpulse.y-=F.y*z,p.position.x-=F.x*z,p.position.y-=F.y*z,b>0&&(p.positionPrev.x-=b*_.x*X*z,p.positionPrev.y-=b*_.y*X*z),O=f.cross(v,F)/D*a._torqueDampen*p.inverseInertia*(1-c.angularStiffness),p.constraintImpulse.angle-=O,p.angle-=O),m&&!m.isStatic&&(z=m.inverseMass/I,m.constraintImpulse.x+=F.x*z,m.constraintImpulse.y+=F.y*z,m.position.x+=F.x*z,m.position.y+=F.y*z,b>0&&(m.positionPrev.x+=b*_.x*X*z,m.positionPrev.y+=b*_.y*X*z),O=f.cross(y,F)/D*a._torqueDampen*m.inverseInertia*(1-c.angularStiffness),m.constraintImpulse.angle+=O,m.angle+=O)}}},a.postSolveAll=function(c){for(var l=0;l<c.length;l++){var p=c[l],m=p.constraintImpulse;if(!(p.isStatic||m.x===0&&m.y===0&&m.angle===0)){o.set(p,!1);for(var v=0;v<p.parts.length;v++){var y=p.parts[v];g.translate(y.vertices,m),v>0&&(y.position.x+=m.x,y.position.y+=m.y),m.angle!==0&&(g.rotate(y.vertices,m.angle,p.position),r.rotate(y.axes,m.angle),v>0&&f.rotateAbout(y.position,m.angle,p.position,y.position)),u.update(y.bounds,y.vertices,p.velocity)}m.angle*=a._warming,m.x*=a._warming,m.y*=a._warming}}},a.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),y:(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0)}},a.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),y:(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0)}},a.currentLength=function(c){var l=(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),p=(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0),m=(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),v=(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0),y=l-m,E=p-v;return Math.sqrt(y*y+E*E)}})()}),53402:((s,T,e)=>{var a={};s.exports=a,(function(){a._baseDelta=16.666666666666668,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(f,o){var u,r;typeof o=="boolean"?(u=2,r=o):(u=1,r=!0);for(var h=u;h<arguments.length;h++){var c=arguments[h];if(c)for(var l in c)r&&c[l]&&c[l].constructor===Object&&(!f[l]||f[l].constructor===Object)?(f[l]=f[l]||{},a.extend(f[l],r,c[l])):f[l]=c[l]}return f},a.clone=function(f,o){return a.extend({},o,f)},a.keys=function(f){if(Object.keys)return Object.keys(f);var o=[];for(var u in f)o.push(u);return o},a.values=function(f){var o=[];if(Object.keys){for(var u=Object.keys(f),r=0;r<u.length;r++)o.push(f[u[r]]);return o}for(var h in f)o.push(f[h]);return o},a.get=function(f,o,u,r){o=o.split(".").slice(u,r);for(var h=0;h<o.length;h+=1)f=f[o[h]];return f},a.set=function(f,o,u,r,h){var c=o.split(".").slice(r,h);return a.get(f,o,0,-1)[c[c.length-1]]=u,u},a.shuffle=function(f){for(var o=f.length-1;o>0;o--){var u=Math.floor(a.random()*(o+1)),r=f[o];f[o]=f[u],f[u]=r}return f},a.choose=function(f){return f[Math.floor(a.random()*f.length)]},a.isElement=function(f){return typeof HTMLElement<"u"?f instanceof HTMLElement:!!(f&&f.nodeType&&f.nodeName)},a.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"},a.isFunction=function(f){return typeof f=="function"},a.isPlainObject=function(f){return typeof f=="object"&&f.constructor===Object},a.isString=function(f){return toString.call(f)==="[object String]"},a.clamp=function(f,o,u){return f<o?o:f>u?u:f},a.sign=function(f){return f<0?-1:1},a.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(f,o){return f=typeof f<"u"?f:0,o=typeof o<"u"?o:1,f+g()*(o-f)};var g=function(){return a._seed=(a._seed*9301+49297)%233280,a._seed/233280};a.colorToNumber=function(f){return f=f.replace("#",""),f.length==3&&(f=f.charAt(0)+f.charAt(0)+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)),parseInt(f,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var f=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[f]||(a.warn(f),a._warnedOnce[f]=!0)},a.deprecated=function(f,o,u){f[o]=a.chain(function(){a.warnOnce("ð deprecated ð",u)},f[o])},a.nextId=function(){return a._nextId++},a.indexOf=function(f,o){if(f.indexOf)return f.indexOf(o);for(var u=0;u<f.length;u++)if(f[u]===o)return u;return-1},a.map=function(f,o){if(f.map)return f.map(o);for(var u=[],r=0;r<f.length;r+=1)u.push(o(f[r]));return u},a.topologicalSort=function(f){var o=[],u=[],r=[];for(var h in f)!u[h]&&!r[h]&&a._topologicalSort(h,u,r,f,o);return o},a._topologicalSort=function(f,o,u,r,h){var c=r[f]||[];u[f]=!0;for(var l=0;l<c.length;l+=1){var p=c[l];u[p]||o[p]||a._topologicalSort(p,o,u,r,h)}u[f]=!1,o[f]=!0,h.push(f)},a.chain=function(){for(var f=[],o=0;o<arguments.length;o+=1){var u=arguments[o];u._chained?f.push.apply(f,u._chained):f.push(u)}var r=function(){for(var h,c=new Array(arguments.length),l=0,p=arguments.length;l<p;l++)c[l]=arguments[l];for(l=0;l<f.length;l+=1){var m=f[l].apply(h,c);typeof m<"u"&&(h=m)}return h};return r._chained=f,r},a.chainPathBefore=function(f,o,u){return a.set(f,o,a.chain(u,a.get(f,o)))},a.chainPathAfter=function(f,o,u){return a.set(f,o,a.chain(a.get(f,o),u))},a.setDecomp=function(f){a._decomp=f},a.getDecomp=function(){var f=a._decomp;try{!f&&typeof window<"u"&&(f=window.decomp),!f&&typeof e.g<"u"&&(f=e.g.decomp)}catch{f=null}return f}})()}),48413:((s,T,e)=>{var a={};s.exports=a;var g=e(53614),f=e(66272),o=e(81388),u=e(99561),r=e(35810),h=e(69351),c=e(48140),l=e(53402),p=e(22562);(function(){a._deltaMax=16.666666666666668,a.create=function(m){m=m||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},y=l.extend(v,m);return y.world=m.world||h.create({label:"World"}),y.pairs=m.pairs||u.create(),y.detector=m.detector||o.create(),y.detector.pairs=y.pairs,y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},a.update=function(m,v){var y=l.now(),E=m.world,C=m.detector,w=m.pairs,A=m.timing,M=A.timestamp,R;v>a._deltaMax&&l.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",a._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:l._baseDelta,v*=A.timeScale,A.timestamp+=v,A.lastDelta=v;var P={timestamp:A.timestamp,delta:v};r.trigger(m,"beforeUpdate",P);var b=h.allBodies(E),F=h.allConstraints(E),I=h.allComposites(E);for(E.isModified&&(o.setBodies(C,b),h.setModified(E,!1,!1,!0)),m.enableSleeping&&g.update(b,v),a._bodiesApplyGravity(b,m.gravity),a.wrap(b,I),a.attractors(b),v>0&&a._bodiesUpdate(b,v),r.trigger(m,"beforeSolve",P),c.preSolveAll(b),R=0;R<m.constraintIterations;R++)c.solveAll(F,v);c.postSolveAll(b);var L=o.collisions(C);u.update(w,L,M),m.enableSleeping&&g.afterCollisions(w.list),w.collisionStart.length>0&&r.trigger(m,"collisionStart",{pairs:w.collisionStart,timestamp:A.timestamp,delta:v});var D=l.clamp(20/m.positionIterations,0,1);for(f.preSolvePosition(w.list),R=0;R<m.positionIterations;R++)f.solvePosition(w.list,v,D);for(f.postSolvePosition(b),c.preSolveAll(b),R=0;R<m.constraintIterations;R++)c.solveAll(F,v);for(c.postSolveAll(b),f.preSolveVelocity(w.list),R=0;R<m.velocityIterations;R++)f.solveVelocity(w.list,v);return a._bodiesUpdateVelocities(b),w.collisionActive.length>0&&r.trigger(m,"collisionActive",{pairs:w.collisionActive,timestamp:A.timestamp,delta:v}),w.collisionEnd.length>0&&r.trigger(m,"collisionEnd",{pairs:w.collisionEnd,timestamp:A.timestamp,delta:v}),a._bodiesClearForces(b),r.trigger(m,"afterUpdate",P),m.timing.lastElapsed=l.now()-y,m},a.merge=function(m,v){if(l.extend(m,v),v.world){m.world=v.world,a.clear(m);for(var y=h.allBodies(m.world),E=0;E<y.length;E++){var C=y[E];g.set(C,!1),C.id=l.nextId()}}},a.clear=function(m){u.clear(m.pairs),o.clear(m.detector)},a._bodiesClearForces=function(m){for(var v=m.length,y=0;y<v;y++){var E=m[y];E.force.x=0,E.force.y=0,E.torque=0}},a._bodiesApplyGravity=function(m,v){var y=typeof v.scale<"u"?v.scale:.001,E=m.length;if(!(v.x===0&&v.y===0||y===0))for(var C=0;C<E;C++){var w=m[C];w.ignoreGravity||w.isStatic||w.isSleeping||(w.force.y+=w.mass*v.y*y,w.force.x+=w.mass*v.x*y)}},a._bodiesUpdate=function(m,v){for(var y=m.length,E=0;E<y;E++){var C=m[E];C.isStatic||C.isSleeping||p.update(C,v)}},a._bodiesUpdateVelocities=function(m){for(var v=m.length,y=0;y<v;y++)p.updateVelocities(m[y])},a.wrap=function(m,v){for(var y=0;y<m.length;y+=1){var E=m[y];E.wrapBounds!==null&&p.wrap(E,E.wrapBounds)}for(y=0;y<v.length;y+=1){var C=v[y];C.wrapBounds!==null&&h.wrap(C,C.wrapBounds)}},a.attractors=function(m){for(var v=0;v<m.length;v++){var y=m[v],E=y.attractors;if(E&&E.length>0)for(var C=0;C<m.length;C++){var w=m[C];if(v!==C)for(var A=0;A<E.length;A++){var M=E[A],R=M;l.isFunction(M)&&(R=M(y,w)),R&&p.applyForce(w,w.position,R)}}}}})()}),35810:((s,T,e)=>{var a={};s.exports=a;var g=e(53402);(function(){a.on=function(f,o,u){for(var r=o.split(" "),h,c=0;c<r.length;c++)h=r[c],f.events=f.events||{},f.events[h]=f.events[h]||[],f.events[h].push(u);return u},a.off=function(f,o,u){if(!o){f.events={};return}typeof o=="function"&&(u=o,o=g.keys(f.events).join(" "));for(var r=o.split(" "),h=0;h<r.length;h++){var c=f.events[r[h]],l=[];if(u&&c)for(var p=0;p<c.length;p++)c[p]!==u&&l.push(c[p]);f.events[r[h]]=l}},a.trigger=function(f,o,u){var r,h,c,l,p=f.events;if(p&&g.keys(p).length>0){u||(u={}),r=o.split(" ");for(var m=0;m<r.length;m++)if(h=r[m],c=p[h],c){l=g.clone(u,!1),l.name=h,l.source=f;for(var v=0;v<c.length;v++)c[v].apply(f,[l])}}}})()}),6790:((s,T,e)=>{var a={};s.exports=a;var g=e(73832),f=e(53402);(function(){a.name="matter-js",a.version="0.20.0",a.uses=[],a.used=[],a.use=function(){g.use(a,Array.prototype.slice.call(arguments))},a.before=function(o,u){return o=o.replace(/^Matter./,""),f.chainPathBefore(a,o,u)},a.after=function(o,u){return o=o.replace(/^Matter./,""),f.chainPathAfter(a,o,u)}})()}),73832:((s,T,e)=>{var a={};s.exports=a;var g=e(53402);(function(){a._registry={},a.register=function(f){if(a.isPlugin(f)||g.warn("Plugin.register:",a.toString(f),"does not implement all required fields."),f.name in a._registry){var o=a._registry[f.name],u=a.versionParse(f.version).number,r=a.versionParse(o.version).number;u>r?(g.warn("Plugin.register:",a.toString(o),"was upgraded to",a.toString(f)),a._registry[f.name]=f):u<r?g.warn("Plugin.register:",a.toString(o),"can not be downgraded to",a.toString(f)):f!==o&&g.warn("Plugin.register:",a.toString(f),"is already registered to different plugin object")}else a._registry[f.name]=f;return f},a.resolve=function(f){return a._registry[a.dependencyParse(f).name]},a.toString=function(f){return typeof f=="string"?f:(f.name||"anonymous")+"@"+(f.version||f.range||"0.0.0")},a.isPlugin=function(f){return f&&f.name&&f.version&&f.install},a.isUsed=function(f,o){return f.used.indexOf(o)>-1},a.isFor=function(f,o){var u=f.for&&a.dependencyParse(f.for);return!f.for||o.name===u.name&&a.versionSatisfies(o.version,u.range)},a.use=function(f,o){if(f.uses=(f.uses||[]).concat(o||[]),f.uses.length===0){g.warn("Plugin.use:",a.toString(f),"does not specify any dependencies to install.");return}for(var u=a.dependencies(f),r=g.topologicalSort(u),h=[],c=0;c<r.length;c+=1)if(r[c]!==f.name){var l=a.resolve(r[c]);if(!l){h.push("â "+r[c]);continue}a.isUsed(f,l.name)||(a.isFor(l,f)||(g.warn("Plugin.use:",a.toString(l),"is for",l.for,"but installed on",a.toString(f)+"."),l._warned=!0),l.install?l.install(f):(g.warn("Plugin.use:",a.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(h.push("ð¶ "+a.toString(l)),delete l._warned):h.push("â "+a.toString(l)),f.used.push(l.name))}h.length>0&&!l.silent&&g.info(h.join("  "))},a.dependencies=function(f,o){var u=a.dependencyParse(f),r=u.name;if(o=o||{},!(r in o)){f=a.resolve(f)||f,o[r]=g.map(f.uses||[],function(c){a.isPlugin(c)&&a.register(c);var l=a.dependencyParse(c),p=a.resolve(c);return p&&!a.versionSatisfies(p.version,l.range)?(g.warn("Plugin.dependencies:",a.toString(p),"does not satisfy",a.toString(l),"used by",a.toString(u)+"."),p._warned=!0,f._warned=!0):p||(g.warn("Plugin.dependencies:",a.toString(c),"used by",a.toString(u),"could not be resolved."),f._warned=!0),l.name});for(var h=0;h<o[r].length;h+=1)a.dependencies(o[r][h],o);return o}},a.dependencyParse=function(f){if(g.isString(f)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return o.test(f)||g.warn("Plugin.dependencyParse:",f,"is not a valid dependency string."),{name:f.split("@")[0],range:f.split("@")[1]||"*"}}return{name:f.name,range:f.range||f.version}},a.versionParse=function(f){var o=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;o.test(f)||g.warn("Plugin.versionParse:",f,"is not a valid version or range.");var u=o.exec(f),r=Number(u[4]),h=Number(u[5]),c=Number(u[6]);return{isRange:!!(u[1]||u[2]),version:u[3],range:f,operator:u[1]||u[2]||"",major:r,minor:h,patch:c,parts:[r,h,c],prerelease:u[7],number:r*1e8+h*1e4+c}},a.versionSatisfies=function(f,o){o=o||"*";var u=a.versionParse(o),r=a.versionParse(f);if(u.isRange){if(u.operator==="*"||f==="*")return!0;if(u.operator===">")return r.number>u.number;if(u.operator===">=")return r.number>=u.number;if(u.operator==="~")return r.major===u.major&&r.minor===u.minor&&r.patch>=u.patch;if(u.operator==="^")return u.major>0?r.major===u.major&&r.number>=u.number:u.minor>0?r.minor===u.minor&&r.patch>=u.patch:r.patch===u.patch}return f===o||f==="*"}})()}),13037:((s,T,e)=>{var a={};s.exports=a;var g=e(35810),f=e(48413),o=e(53402);(function(){a._maxFrameDelta=66.66666666666667,a._frameDeltaFallback=16.666666666666668,a._timeBufferMargin=1.5,a._elapsedNextEstimate=1,a._smoothingLowerBound=.1,a._smoothingUpperBound=.9,a.create=function(r){var h={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},c=o.extend(h,r);return c.fps=0,c},a.run=function(r,h){return r.timeBuffer=a._frameDeltaFallback,(function c(l){r.frameRequestId=a._onNextFrame(r,c),l&&r.enabled&&a.tick(r,h,l)})(),r},a.tick=function(r,h,c){var l=o.now(),p=r.delta,m=0,v=c-r.timeLastTick;if((!v||!r.timeLastTick||v>Math.max(a._maxFrameDelta,r.maxFrameTime))&&(v=r.frameDelta||a._frameDeltaFallback),r.frameDeltaSmoothing){r.frameDeltaHistory.push(v),r.frameDeltaHistory=r.frameDeltaHistory.slice(-r.frameDeltaHistorySize);var y=r.frameDeltaHistory.slice(0).sort(),E=r.frameDeltaHistory.slice(y.length*a._smoothingLowerBound,y.length*a._smoothingUpperBound),C=u(E);v=C||v}r.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),r.frameDelta=v,r.timeLastTick=c,r.timeBuffer+=r.frameDelta,r.timeBuffer=o.clamp(r.timeBuffer,0,r.frameDelta+p*a._timeBufferMargin),r.lastUpdatesDeferred=0;var w=r.maxUpdates||Math.ceil(r.maxFrameTime/p),A={timestamp:h.timing.timestamp};g.trigger(r,"beforeTick",A),g.trigger(r,"tick",A);for(var M=o.now();p>0&&r.timeBuffer>=p*a._timeBufferMargin;){g.trigger(r,"beforeUpdate",A),f.update(h,p),g.trigger(r,"afterUpdate",A),r.timeBuffer-=p,m+=1;var R=o.now()-l,P=o.now()-M,b=R+a._elapsedNextEstimate*P/m;if(m>=w||b>r.maxFrameTime){r.lastUpdatesDeferred=Math.round(Math.max(0,r.timeBuffer/p-a._timeBufferMargin));break}}h.timing.lastUpdatesPerFrame=m,g.trigger(r,"afterTick",A),r.frameDeltaHistory.length>=100&&(r.lastUpdatesDeferred&&Math.round(r.frameDelta/p)>w?o.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):r.lastUpdatesDeferred&&o.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof r.isFixed<"u"&&o.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(r.deltaMin||r.deltaMax)&&o.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),r.fps!==0&&o.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},a.stop=function(r){a._cancelNextFrame(r)},a._onNextFrame=function(r,h){if(typeof window<"u"&&window.requestAnimationFrame)r.frameRequestId=window.requestAnimationFrame(h);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return r.frameRequestId},a._cancelNextFrame=function(r){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(r.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var u=function(r){for(var h=0,c=r.length,l=0;l<c;l+=1)h+=r[l];return h/c||0};a._mean=u})()}),53614:((s,T,e)=>{var a={};s.exports=a;var g=e(22562),f=e(35810),o=e(53402);(function(){a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(u,r){for(var h=r/o._baseDelta,c=a._motionSleepThreshold,l=0;l<u.length;l++){var p=u[l],m=g.getSpeed(p),v=g.getAngularSpeed(p),y=m*m+v*v;if(p.force.x!==0||p.force.y!==0){a.set(p,!1);continue}var E=Math.min(p.motion,y),C=Math.max(p.motion,y);p.motion=a._minBias*E+(1-a._minBias)*C,p.sleepThreshold>0&&p.motion<c?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/h&&a.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},a.afterCollisions=function(u){for(var r=a._motionSleepThreshold,h=0;h<u.length;h++){var c=u[h];if(c.isActive){var l=c.collision,p=l.bodyA.parent,m=l.bodyB.parent;if(!(p.isSleeping&&m.isSleeping||p.isStatic||m.isStatic)&&(p.isSleeping||m.isSleeping)){var v=p.isSleeping&&!p.isStatic?p:m,y=v===p?m:p;!v.isStatic&&y.motion>r&&a.set(v,!1)}}}},a.set=function(u,r){var h=u.isSleeping;r?(u.isSleeping=!0,u.sleepCounter=u.sleepThreshold,u.positionImpulse.x=0,u.positionImpulse.y=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.speed=0,u.angularSpeed=0,u.motion=0,h||f.trigger(u,"sleepStart")):(u.isSleeping=!1,u.sleepCounter=0,h&&f.trigger(u,"sleepEnd"))}})()}),66280:((s,T,e)=>{var a={};s.exports=a;var g=e(41598),f=e(53402),o=e(22562),u=e(15647),r=e(31725);(function(){a.rectangle=function(h,c,l,p,m){m=m||{};var v={label:"Rectangle Body",position:{x:h,y:c},vertices:g.fromPath("L 0 0 L "+l+" 0 L "+l+" "+p+" L 0 "+p)};if(m.chamfer){var y=m.chamfer;v.vertices=g.chamfer(v.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete m.chamfer}return o.create(f.extend({},v,m))},a.trapezoid=function(h,c,l,p,m,v){v=v||{},m>=1&&f.warn("Bodies.trapezoid: slope parameter must be < 1."),m*=.5;var y=(1-m*2)*l,E=l*m,C=E+y,w=C+E,A;m<.5?A="L 0 0 L "+E+" "+-p+" L "+C+" "+-p+" L "+w+" 0":A="L 0 0 L "+C+" "+-p+" L "+w+" 0";var M={label:"Trapezoid Body",position:{x:h,y:c},vertices:g.fromPath(A)};if(v.chamfer){var R=v.chamfer;M.vertices=g.chamfer(M.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete v.chamfer}return o.create(f.extend({},M,v))},a.circle=function(h,c,l,p,m){p=p||{};var v={label:"Circle Body",circleRadius:l};m=m||25;var y=Math.ceil(Math.max(10,Math.min(m,l)));return y%2===1&&(y+=1),a.polygon(h,c,y,l,f.extend({},v,p))},a.polygon=function(h,c,l,p,m){if(m=m||{},l<3)return a.circle(h,c,p,m);for(var v=2*Math.PI/l,y="",E=v*.5,C=0;C<l;C+=1){var w=E+C*v,A=Math.cos(w)*p,M=Math.sin(w)*p;y+="L "+A.toFixed(3)+" "+M.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:h,y:c},vertices:g.fromPath(y)};if(m.chamfer){var P=m.chamfer;R.vertices=g.chamfer(R.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete m.chamfer}return o.create(f.extend({},R,m))},a.fromVertices=function(h,c,l,p,m,v,y,E){var C=f.getDecomp(),w,A,M,R,P,b,F,I,L,D,O;for(w=!!(C&&C.quickDecomp),p=p||{},M=[],m=typeof m<"u"?m:!1,v=typeof v<"u"?v:.01,y=typeof y<"u"?y:10,E=typeof E<"u"?E:.01,f.isArray(l[0])||(l=[l]),D=0;D<l.length;D+=1)if(b=l[D],R=g.isConvex(b),P=!R,P&&!w&&f.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!w)R?b=g.clockwiseSort(b):b=g.hull(b),M.push({position:{x:h,y:c},vertices:b});else{var z=b.map(function(k){return[k.x,k.y]});C.makeCCW(z),v!==!1&&C.removeCollinearPoints(z,v),E!==!1&&C.removeDuplicatePoints&&C.removeDuplicatePoints(z,E);var _=C.quickDecomp(z);for(F=0;F<_.length;F++){var X=_[F],H=X.map(function(k){return{x:k[0],y:k[1]}});y>0&&g.area(H)<y||M.push({position:g.centre(H),vertices:H})}}for(F=0;F<M.length;F++)M[F]=o.create(f.extend(M[F],p));if(m){var U=5;for(F=0;F<M.length;F++){var G=M[F];for(I=F+1;I<M.length;I++){var N=M[I];if(u.overlaps(G.bounds,N.bounds)){var W=G.vertices,V=N.vertices;for(L=0;L<G.vertices.length;L++)for(O=0;O<N.vertices.length;O++){var $=r.magnitudeSquared(r.sub(W[(L+1)%W.length],V[O])),j=r.magnitudeSquared(r.sub(W[L],V[(O+1)%V.length]));$<U&&j<U&&(W[L].isInternal=!0,V[O].isInternal=!0)}}}}}return M.length>1?(A=o.create(f.extend({parts:M.slice(0)},p)),o.setPosition(A,{x:h,y:c}),A):M[0]},a.flagCoincidentParts=function(h,c){c===void 0&&(c=5);for(var l=0;l<h.length;l++)for(var p=h[l],m=l+1;m<h.length;m++){var v=h[m];if(u.overlaps(p.bounds,v.bounds))for(var y=p.vertices,E=v.vertices,C=0;C<p.vertices.length;C++)for(var w=0;w<v.vertices.length;w++){var A=r.magnitudeSquared(r.sub(y[(C+1)%y.length],E[w])),M=r.magnitudeSquared(r.sub(y[C],E[(w+1)%E.length]));A<c&&M<c&&(y[C].isInternal=!0,E[w].isInternal=!0)}}return h}})()}),74116:((s,T,e)=>{var a={};s.exports=a;var g=e(69351),f=e(48140),o=e(53402),u=e(22562),r=e(66280);(function(){a.stack=function(h,c,l,p,m,v,y){for(var E=g.create({label:"Stack"}),C=h,w=c,A,M=0,R=0;R<p;R++){for(var P=0,b=0;b<l;b++){var F=y(C,w,b,R,A,M);if(F){var I=F.bounds.max.y-F.bounds.min.y,L=F.bounds.max.x-F.bounds.min.x;I>P&&(P=I),u.translate(F,{x:L*.5,y:I*.5}),C=F.bounds.max.x+m,g.addBody(E,F),A=F,M+=1}else C+=m}w+=P+v,C=h}return E},a.chain=function(h,c,l,p,m,v){for(var y=h.bodies,E=1;E<y.length;E++){var C=y[E-1],w=y[E],A=C.bounds.max.y-C.bounds.min.y,M=C.bounds.max.x-C.bounds.min.x,R=w.bounds.max.y-w.bounds.min.y,P=w.bounds.max.x-w.bounds.min.x,b={bodyA:C,pointA:{x:M*c,y:A*l},bodyB:w,pointB:{x:P*p,y:R*m}},F=o.extend(b,v);g.addConstraint(h,f.create(F))}return h.label+=" Chain",h},a.mesh=function(h,c,l,p,m){var v=h.bodies,y,E,C,w,A;for(y=0;y<l;y++){for(E=1;E<c;E++)C=v[E-1+y*c],w=v[E+y*c],g.addConstraint(h,f.create(o.extend({bodyA:C,bodyB:w},m)));if(y>0)for(E=0;E<c;E++)C=v[E+(y-1)*c],w=v[E+y*c],g.addConstraint(h,f.create(o.extend({bodyA:C,bodyB:w},m))),p&&E>0&&(A=v[E-1+(y-1)*c],g.addConstraint(h,f.create(o.extend({bodyA:A,bodyB:w},m)))),p&&E<c-1&&(A=v[E+1+(y-1)*c],g.addConstraint(h,f.create(o.extend({bodyA:A,bodyB:w},m))))}return h.label+=" Mesh",h},a.pyramid=function(h,c,l,p,m,v,y){return a.stack(h,c,l,p,m,v,function(E,C,w,A,M,R){var P=Math.min(p,Math.ceil(l/2)),b=M?M.bounds.max.x-M.bounds.min.x:0;if(!(A>P)){A=P-A;var F=A,I=l-1-A;if(!(w<F||w>I)){R===1&&u.translate(M,{x:(w+(l%2===1?1:-1))*b,y:0});var L=M?w*b:0;return y(h+L+w*m,C,w,A,M,R)}}})},a.newtonsCradle=function(h,c,l,p,m){for(var v=g.create({label:"Newtons Cradle"}),y=0;y<l;y++){var E=1.9,C=r.circle(h+y*(p*E),c+m,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),w=f.create({pointA:{x:h+y*(p*E),y:c},bodyB:C});g.addBody(v,C),g.addConstraint(v,w)}return v},a.car=function(h,c,l,p,m){var v=u.nextGroup(!0),y=20,E=-l*.5+y,C=l*.5-y,w=0,A=g.create({label:"Car"}),M=r.rectangle(h,c,l,p,{collisionFilter:{group:v},chamfer:{radius:p*.5},density:2e-4}),R=r.circle(h+E,c+w,m,{collisionFilter:{group:v},friction:.8}),P=r.circle(h+C,c+w,m,{collisionFilter:{group:v},friction:.8}),b=f.create({bodyB:M,pointB:{x:E,y:w},bodyA:R,stiffness:1,length:0}),F=f.create({bodyB:M,pointB:{x:C,y:w},bodyA:P,stiffness:1,length:0});return g.addBody(A,M),g.addBody(A,R),g.addBody(A,P),g.addConstraint(A,b),g.addConstraint(A,F),A},a.softBody=function(h,c,l,p,m,v,y,E,C,w){C=o.extend({inertia:1/0},C),w=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},w);var A=a.stack(h,c,l,p,m,v,function(M,R){return r.circle(M,R,E,C)});return a.mesh(A,l,p,y,w),A.label="Soft Body",A}})()}),66615:((s,T,e)=>{var a={};s.exports=a;var g=e(31725),f=e(53402);(function(){a.fromVertices=function(o){for(var u={},r=0;r<o.length;r++){var h=(r+1)%o.length,c=g.normalise({x:o[h].y-o[r].y,y:o[r].x-o[h].x}),l=c.y===0?1/0:c.x/c.y;l=l.toFixed(3).toString(),u[l]=c}return f.values(u)},a.rotate=function(o,u){if(u!==0)for(var r=Math.cos(u),h=Math.sin(u),c=0;c<o.length;c++){var l=o[c],p;p=l.x*r-l.y*h,l.y=l.x*h+l.y*r,l.x=p}}})()}),15647:(s=>{var T={};s.exports=T,(function(){T.create=function(e){var a={min:{x:0,y:0},max:{x:0,y:0}};return e&&T.update(a,e),a},T.update=function(e,a,g){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var f=0;f<a.length;f++){var o=a[f];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}g&&(g.x>0?e.max.x+=g.x:e.min.x+=g.x,g.y>0?e.max.y+=g.y:e.min.y+=g.y)},T.contains=function(e,a){return a.x>=e.min.x&&a.x<=e.max.x&&a.y>=e.min.y&&a.y<=e.max.y},T.overlaps=function(e,a){return e.min.x<=a.max.x&&e.max.x>=a.min.x&&e.max.y>=a.min.y&&e.min.y<=a.max.y},T.translate=function(e,a){e.min.x+=a.x,e.max.x+=a.x,e.min.y+=a.y,e.max.y+=a.y},T.shift=function(e,a){var g=e.max.x-e.min.x,f=e.max.y-e.min.y;e.min.x=a.x,e.max.x=a.x+g,e.min.y=a.y,e.max.y=a.y+f},T.wrap=function(e,a,g){var f=null,o=null;if(typeof a.min.x<"u"&&typeof a.max.x<"u"&&(e.min.x>a.max.x?f=a.min.x-e.max.x:e.max.x<a.min.x&&(f=a.max.x-e.min.x)),typeof a.min.y<"u"&&typeof a.max.y<"u"&&(e.min.y>a.max.y?o=a.min.y-e.max.y:e.max.y<a.min.y&&(o=a.max.y-e.min.y)),f!==null||o!==null)return{x:f||0,y:o||0}}})()}),74058:((s,T,e)=>{var a={};s.exports=a,e(15647);var g=e(53402);(function(){a.pathToVertices=function(f,o){typeof window<"u"&&!("SVGPathSeg"in window)&&g.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,r,h,c,l,p,m,v,y,E,C=[],w,A,M=0,R=0,P=0;o=o||15;var b=function(I,L,D){var O=D%2===1&&D>1;if(!y||I!=y.x||L!=y.y){y&&O?(w=y.x,A=y.y):(w=0,A=0);var z={x:w+I,y:A+L};(O||!y)&&(y=z),C.push(z),R=w+I,P=A+L}},F=function(I){var L=I.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":R=I.x,P=I.y;break;case"H":R=I.x;break;case"V":P=I.y;break}b(R,P,I.pathSegType)}};for(a._svgPathToAbsolute(f),h=f.getTotalLength(),p=[],u=0;u<f.pathSegList.numberOfItems;u+=1)p.push(f.pathSegList.getItem(u));for(m=p.concat();M<h;){if(E=f.getPathSegAtLength(M),l=p[E],l!=v){for(;m.length&&m[0]!=l;)F(m.shift());v=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=f.getPointAtLength(M),b(c.x,c.y,0);break}M+=o}for(u=0,r=m.length;u<r;++u)F(m[u]);return C},a._svgPathToAbsolute=function(f){for(var o,u,r,h,c,l,p=f.pathSegList,m=0,v=0,y=p.numberOfItems,E=0;E<y;++E){var C=p.getItem(E),w=C.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(w))"x"in C&&(m=C.x),"y"in C&&(v=C.y);else switch("x1"in C&&(r=m+C.x1),"x2"in C&&(c=m+C.x2),"y1"in C&&(h=v+C.y1),"y2"in C&&(l=v+C.y2),"x"in C&&(m+=C.x),"y"in C&&(v+=C.y),w){case"m":p.replaceItem(f.createSVGPathSegMovetoAbs(m,v),E);break;case"l":p.replaceItem(f.createSVGPathSegLinetoAbs(m,v),E);break;case"h":p.replaceItem(f.createSVGPathSegLinetoHorizontalAbs(m),E);break;case"v":p.replaceItem(f.createSVGPathSegLinetoVerticalAbs(v),E);break;case"c":p.replaceItem(f.createSVGPathSegCurvetoCubicAbs(m,v,r,h,c,l),E);break;case"s":p.replaceItem(f.createSVGPathSegCurvetoCubicSmoothAbs(m,v,c,l),E);break;case"q":p.replaceItem(f.createSVGPathSegCurvetoQuadraticAbs(m,v,r,h),E);break;case"t":p.replaceItem(f.createSVGPathSegCurvetoQuadraticSmoothAbs(m,v),E);break;case"a":p.replaceItem(f.createSVGPathSegArcAbs(m,v,C.r1,C.r2,C.angle,C.largeArcFlag,C.sweepFlag),E);break;case"z":case"Z":m=o,v=u;break}(w=="M"||w=="m")&&(o=m,u=v)}}})()}),31725:(s=>{var T={};s.exports=T,(function(){T.create=function(e,a){return{x:e||0,y:a||0}},T.clone=function(e){return{x:e.x,y:e.y}},T.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},T.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},T.rotate=function(e,a,g){var f=Math.cos(a),o=Math.sin(a);g||(g={});var u=e.x*f-e.y*o;return g.y=e.x*o+e.y*f,g.x=u,g},T.rotateAbout=function(e,a,g,f){var o=Math.cos(a),u=Math.sin(a);f||(f={});var r=g.x+((e.x-g.x)*o-(e.y-g.y)*u);return f.y=g.y+((e.x-g.x)*u+(e.y-g.y)*o),f.x=r,f},T.normalise=function(e){var a=T.magnitude(e);return a===0?{x:0,y:0}:{x:e.x/a,y:e.y/a}},T.dot=function(e,a){return e.x*a.x+e.y*a.y},T.cross=function(e,a){return e.x*a.y-e.y*a.x},T.cross3=function(e,a,g){return(a.x-e.x)*(g.y-e.y)-(a.y-e.y)*(g.x-e.x)},T.add=function(e,a,g){return g||(g={}),g.x=e.x+a.x,g.y=e.y+a.y,g},T.sub=function(e,a,g){return g||(g={}),g.x=e.x-a.x,g.y=e.y-a.y,g},T.mult=function(e,a){return{x:e.x*a,y:e.y*a}},T.div=function(e,a){return{x:e.x/a,y:e.y/a}},T.perp=function(e,a){return a=a===!0?-1:1,{x:a*-e.y,y:a*e.x}},T.neg=function(e){return{x:-e.x,y:-e.y}},T.angle=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)},T._temp=[T.create(),T.create(),T.create(),T.create(),T.create(),T.create()]})()}),41598:((s,T,e)=>{var a={};s.exports=a;var g=e(31725),f=e(53402);(function(){a.create=function(o,u){for(var r=[],h=0;h<o.length;h++){var c=o[h],l={x:c.x,y:c.y,index:h,body:u,isInternal:!1};r.push(l)}return r},a.fromPath=function(o,u){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,h=[];return o.replace(r,function(c,l,p){h.push({x:parseFloat(l),y:parseFloat(p)})}),a.create(h,u)},a.centre=function(o){for(var u=a.area(o,!0),r={x:0,y:0},h,c,l,p=0;p<o.length;p++)l=(p+1)%o.length,h=g.cross(o[p],o[l]),c=g.mult(g.add(o[p],o[l]),h),r=g.add(r,c);return g.div(r,6*u)},a.mean=function(o){for(var u={x:0,y:0},r=0;r<o.length;r++)u.x+=o[r].x,u.y+=o[r].y;return g.div(u,o.length)},a.area=function(o,u){for(var r=0,h=o.length-1,c=0;c<o.length;c++)r+=(o[h].x-o[c].x)*(o[h].y+o[c].y),h=c;return u?r/2:Math.abs(r)/2},a.inertia=function(o,u){for(var r=0,h=0,c=o,l,p,m=0;m<c.length;m++)p=(m+1)%c.length,l=Math.abs(g.cross(c[p],c[m])),r+=l*(g.dot(c[p],c[p])+g.dot(c[p],c[m])+g.dot(c[m],c[m])),h+=l;return u/6*(r/h)},a.translate=function(o,u,r){r=typeof r<"u"?r:1;var h=o.length,c=u.x*r,l=u.y*r,p;for(p=0;p<h;p++)o[p].x+=c,o[p].y+=l;return o},a.rotate=function(o,u,r){if(u!==0){var h=Math.cos(u),c=Math.sin(u),l=r.x,p=r.y,m=o.length,v,y,E,C;for(C=0;C<m;C++)v=o[C],y=v.x-l,E=v.y-p,v.x=l+(y*h-E*c),v.y=p+(y*c+E*h);return o}},a.contains=function(o,u){for(var r=u.x,h=u.y,c=o.length,l=o[c-1],p,m=0;m<c;m++){if(p=o[m],(r-l.x)*(p.y-l.y)+(h-l.y)*(l.x-p.x)>0)return!1;l=p}return!0},a.scale=function(o,u,r,h){if(u===1&&r===1)return o;h=h||a.centre(o);for(var c,l,p=0;p<o.length;p++)c=o[p],l=g.sub(c,h),o[p].x=h.x+l.x*u,o[p].y=h.y+l.y*r;return o},a.chamfer=function(o,u,r,h,c){typeof u=="number"?u=[u]:u=u||[8],r=typeof r<"u"?r:-1,h=h||2,c=c||14;for(var l=[],p=0;p<o.length;p++){var m=o[p-1>=0?p-1:o.length-1],v=o[p],y=o[(p+1)%o.length],E=u[p<u.length?p:u.length-1];if(E===0){l.push(v);continue}var C=g.normalise({x:v.y-m.y,y:m.x-v.x}),w=g.normalise({x:y.y-v.y,y:v.x-y.x}),A=Math.sqrt(2*Math.pow(E,2)),M=g.mult(f.clone(C),E),R=g.normalise(g.mult(g.add(C,w),.5)),P=g.sub(v,g.mult(R,A)),b=r;r===-1&&(b=Math.pow(E,.32)*1.75),b=f.clamp(b,h,c),b%2===1&&(b+=1);for(var F=Math.acos(g.dot(C,w)),I=F/b,L=0;L<b;L++)l.push(g.add(g.rotate(M,I*L),P))}return l},a.clockwiseSort=function(o){var u=a.mean(o);return o.sort(function(r,h){return g.angle(u,r)-g.angle(u,h)}),o},a.isConvex=function(o){var u=0,r=o.length,h,c,l,p;if(r<3)return null;for(h=0;h<r;h++)if(c=(h+1)%r,l=(h+2)%r,p=(o[c].x-o[h].x)*(o[l].y-o[c].y),p-=(o[c].y-o[h].y)*(o[l].x-o[c].x),p<0?u|=1:p>0&&(u|=2),u===3)return!1;return u!==0?!0:null},a.hull=function(o){var u=[],r=[],h,c;for(o=o.slice(0),o.sort(function(l,p){var m=l.x-p.x;return m!==0?m:l.y-p.y}),c=0;c<o.length;c+=1){for(h=o[c];r.length>=2&&g.cross3(r[r.length-2],r[r.length-1],h)<=0;)r.pop();r.push(h)}for(c=o.length-1;c>=0;c-=1){for(h=o[c];u.length>=2&&g.cross3(u[u.length-2],u[u.length-1],h)<=0;)u.pop();u.push(h)}return u.pop(),r.pop(),u.concat(r)}})()}),55973:(s=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={decomp:F,quickDecomp:O,isSimple:L,removeCollinearPoints:z,removeDuplicatePoints:_,makeCCW:y};function T(U,G,N){N=N||0;var W=[0,0],V,$,j,k,Q,et,at;return V=U[1][1]-U[0][1],$=U[0][0]-U[1][0],j=V*U[0][0]+$*U[0][1],k=G[1][1]-G[0][1],Q=G[0][0]-G[1][0],et=k*G[0][0]+Q*G[0][1],at=V*Q-k*$,X(at,0,N)||(W[0]=(Q*j-$*et)/at,W[1]=(V*et-k*j)/at),W}function e(U,G,N,W){var V=G[0]-U[0],$=G[1]-U[1],j=W[0]-N[0],k=W[1]-N[1];if(j*$-k*V===0)return!1;var Q=(V*(N[1]-U[1])+$*(U[0]-N[0]))/(j*$-k*V),et=(j*(U[1]-N[1])+k*(N[0]-U[0]))/(k*V-j*$);return Q>=0&&Q<=1&&et>=0&&et<=1}function a(U,G,N){return(G[0]-U[0])*(N[1]-U[1])-(N[0]-U[0])*(G[1]-U[1])}function g(U,G,N){return a(U,G,N)>0}function f(U,G,N){return a(U,G,N)>=0}function o(U,G,N){return a(U,G,N)<0}function u(U,G,N){return a(U,G,N)<=0}var r=[],h=[];function c(U,G,N,W){if(W){var V=r,$=h;V[0]=G[0]-U[0],V[1]=G[1]-U[1],$[0]=N[0]-G[0],$[1]=N[1]-G[1];var j=V[0]*$[0]+V[1]*$[1],k=Math.sqrt(V[0]*V[0]+V[1]*V[1]),Q=Math.sqrt($[0]*$[0]+$[1]*$[1]),et=Math.acos(j/(k*Q));return et<W}else return a(U,G,N)===0}function l(U,G){var N=G[0]-U[0],W=G[1]-U[1];return N*N+W*W}function p(U,G){var N=U.length;return U[G<0?G%N+N:G%N]}function m(U){U.length=0}function v(U,G,N,W){for(var V=N;V<W;V++)U.push(G[V])}function y(U){for(var G=0,N=U,W=1;W<U.length;++W)(N[W][1]<N[G][1]||N[W][1]===N[G][1]&&N[W][0]>N[G][0])&&(G=W);return g(p(U,G-1),p(U,G),p(U,G+1))?!1:(E(U),!0)}function E(U){for(var G=[],N=U.length,W=0;W!==N;W++)G.push(U.pop());for(var W=0;W!==N;W++)U[W]=G[W]}function C(U,G){return o(p(U,G-1),p(U,G),p(U,G+1))}var w=[],A=[];function M(U,G,N){var W,V,$=w,j=A;if(f(p(U,G+1),p(U,G),p(U,N))&&u(p(U,G-1),p(U,G),p(U,N)))return!1;V=l(p(U,G),p(U,N));for(var k=0;k!==U.length;++k)if(!((k+1)%U.length===G||k===G)&&f(p(U,G),p(U,N),p(U,k+1))&&u(p(U,G),p(U,N),p(U,k))&&($[0]=p(U,G),$[1]=p(U,N),j[0]=p(U,k),j[1]=p(U,k+1),W=T($,j),l(p(U,G),W)<V))return!1;return!0}function R(U,G,N){for(var W=0;W!==U.length;++W)if(!(W===G||W===N||(W+1)%U.length===G||(W+1)%U.length===N)&&e(p(U,G),p(U,N),p(U,W),p(U,W+1)))return!1;return!0}function P(U,G,N,W){var V=W||[];if(m(V),G<N)for(var $=G;$<=N;$++)V.push(U[$]);else{for(var $=0;$<=N;$++)V.push(U[$]);for(var $=G;$<U.length;$++)V.push(U[$])}return V}function b(U){for(var G=[],N=[],W=[],V=[],$=Number.MAX_VALUE,j=0;j<U.length;++j)if(C(U,j)){for(var k=0;k<U.length;++k)if(M(U,j,k)){N=b(P(U,j,k,V)),W=b(P(U,k,j,V));for(var Q=0;Q<W.length;Q++)N.push(W[Q]);N.length<$&&(G=N,$=N.length,G.push([p(U,j),p(U,k)]))}}return G}function F(U){var G=b(U);return G.length>0?I(U,G):[U]}function I(U,G){if(G.length===0)return[U];if(G instanceof Array&&G.length&&G[0]instanceof Array&&G[0].length===2&&G[0][0]instanceof Array){for(var N=[U],W=0;W<G.length;W++)for(var V=G[W],$=0;$<N.length;$++){var j=N[$],k=I(j,V);if(k){N.splice($,1),N.push(k[0],k[1]);break}}return N}else{var V=G,W=U.indexOf(V[0]),$=U.indexOf(V[1]);return W!==-1&&$!==-1?[P(U,W,$),P(U,$,W)]:!1}}function L(U){var G=U,N;for(N=0;N<G.length-1;N++)for(var W=0;W<N-1;W++)if(e(G[N],G[N+1],G[W],G[W+1]))return!1;for(N=1;N<G.length-2;N++)if(e(G[0],G[G.length-1],G[N],G[N+1]))return!1;return!0}function D(U,G,N,W,V){V=V||0;var $=G[1]-U[1],j=U[0]-G[0],k=$*U[0]+j*U[1],Q=W[1]-N[1],et=N[0]-W[0],at=Q*N[0]+et*N[1],q=$*et-Q*j;return X(q,0,V)?[0,0]:[(et*k-j*at)/q,($*at-Q*k)/q]}function O(U,G,N,W,V,$,j){$=$||100,j=j||0,V=V||25,G=typeof G<"u"?G:[],N=N||[],W=W||[];var k=[0,0],Q=[0,0],et=[0,0],at=0,q=0,ft=0,vt=0,Tt=0,ct=0,Ut=0,yt=[],it=[],Z=U,lt=U;if(lt.length<3)return G;if(j++,j>$)return console.warn("quickDecomp: max level ("+$+") reached."),G;for(var pt=0;pt<U.length;++pt)if(C(Z,pt)){N.push(Z[pt]),at=q=Number.MAX_VALUE;for(var Pt=0;Pt<U.length;++Pt)g(p(Z,pt-1),p(Z,pt),p(Z,Pt))&&u(p(Z,pt-1),p(Z,pt),p(Z,Pt-1))&&(et=D(p(Z,pt-1),p(Z,pt),p(Z,Pt),p(Z,Pt-1)),o(p(Z,pt+1),p(Z,pt),et)&&(ft=l(Z[pt],et),ft<q&&(q=ft,Q=et,ct=Pt))),g(p(Z,pt+1),p(Z,pt),p(Z,Pt+1))&&u(p(Z,pt+1),p(Z,pt),p(Z,Pt))&&(et=D(p(Z,pt+1),p(Z,pt),p(Z,Pt),p(Z,Pt+1)),g(p(Z,pt-1),p(Z,pt),et)&&(ft=l(Z[pt],et),ft<at&&(at=ft,k=et,Tt=Pt)));if(ct===(Tt+1)%U.length)et[0]=(Q[0]+k[0])/2,et[1]=(Q[1]+k[1])/2,W.push(et),pt<Tt?(v(yt,Z,pt,Tt+1),yt.push(et),it.push(et),ct!==0&&v(it,Z,ct,Z.length),v(it,Z,0,pt+1)):(pt!==0&&v(yt,Z,pt,Z.length),v(yt,Z,0,Tt+1),yt.push(et),it.push(et),v(it,Z,ct,pt+1));else{if(ct>Tt&&(Tt+=U.length),vt=Number.MAX_VALUE,Tt<ct)return G;for(var Pt=ct;Pt<=Tt;++Pt)f(p(Z,pt-1),p(Z,pt),p(Z,Pt))&&u(p(Z,pt+1),p(Z,pt),p(Z,Pt))&&(ft=l(p(Z,pt),p(Z,Pt)),ft<vt&&R(Z,pt,Pt)&&(vt=ft,Ut=Pt%U.length));pt<Ut?(v(yt,Z,pt,Ut+1),Ut!==0&&v(it,Z,Ut,lt.length),v(it,Z,0,pt+1)):(pt!==0&&v(yt,Z,pt,lt.length),v(yt,Z,0,Ut+1),v(it,Z,Ut,pt+1))}return yt.length<it.length?(O(yt,G,N,W,V,$,j),O(it,G,N,W,V,$,j)):(O(it,G,N,W,V,$,j),O(yt,G,N,W,V,$,j)),G}return G.push(U),G}function z(U,G){for(var N=0,W=U.length-1;U.length>3&&W>=0;--W)c(p(U,W-1),p(U,W),p(U,W+1),G)&&(U.splice(W%U.length,1),N++);return N}function _(U,G){for(var N=U.length-1;N>=1;--N)for(var W=U[N],V=N-1;V>=0;--V)if(H(W,U[V],G)){U.splice(N,1);continue}}function X(U,G,N){return N=N||0,Math.abs(U-G)<=N}function H(U,G,N){return X(U[0],G[0],N)&&X(U[1],G[1],N)}}),52018:((s,T,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(83419),g=new a({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});s.exports=g}),42363:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};s.exports=T}),37277:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={},a={};a.register=function(g,f,o,u){u===void 0&&(u=!1),T[g]={plugin:f,mapping:o,custom:u}},a.registerCustom=function(g,f,o,u){e[g]={plugin:f,mapping:o,data:u}},a.hasCore=function(g){return T.hasOwnProperty(g)},a.hasCustom=function(g){return e.hasOwnProperty(g)},a.getCore=function(g){return T[g]},a.getCustom=function(g){return e[g]},a.getCustomClass=function(g){return e.hasOwnProperty(g)?e[g].plugin:null},a.remove=function(g){T.hasOwnProperty(g)&&delete T[g]},a.removeCustom=function(g){e.hasOwnProperty(g)&&delete e[g]},a.destroyCorePlugins=function(){for(var g in T)T.hasOwnProperty(g)&&delete T[g]},a.destroyCustomPlugins=function(){for(var g in e)e.hasOwnProperty(g)&&delete e[g]},s.exports=a}),77332:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(8443),f=e(50792),o=e(74099),u=e(44603),r=e(39429),h=e(95540),c=e(37277),l=e(72905),p=e(8054),m=new a({Extends:f,initialize:function(y){f.call(this),this.game=y,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],y.isBooted||y.config.renderType===p.HEADLESS?this.boot():y.events.once(g.BOOT,this.boot,this)},boot:function(){var v,y,E,C,w,A,M,R=this.game.config,P=R.installGlobalPlugins;for(P=P.concat(this._pendingGlobal),v=0;v<P.length;v++)y=P[v],E=h(y,"key",null),C=h(y,"plugin",null),w=h(y,"start",!1),A=h(y,"mapping",null),M=h(y,"data",null),E&&(C?this.install(E,C,w,A,M):console.warn("Missing `plugin` for key: "+E));for(P=R.installScenePlugins,P=P.concat(this._pendingScene),v=0;v<P.length;v++)y=P[v],E=h(y,"key",null),C=h(y,"plugin",null),A=h(y,"mapping",null),E&&(C?this.installScenePlugin(E,C,A):console.warn("Missing `plugin` for key: "+E));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(g.DESTROY,this.destroy,this)},addToScene:function(v,y,E){var C,w,A,M=this.game,R=v.scene,P=v.settings.map,b=v.settings.isBooted;for(C=0;C<y.length;C++)w=y[C],M[w]?(v[w]=M[w],P.hasOwnProperty(w)&&(R[P[w]]=v[w])):w==="game"&&P.hasOwnProperty(w)&&(R[P[w]]=M);for(var F=0;F<E.length;F++)for(A=E[F],C=0;C<A.length;C++)if(w=A[C],!!c.hasCore(w)){var I=c.getCore(w),L=I.mapping,D=new I.plugin(R,this,L);v[L]=D,I.custom?R[L]=D:P.hasOwnProperty(L)&&(R[P[L]]=D),b&&D.boot()}for(A=this.plugins,C=0;C<A.length;C++){var O=A[C];O.mapping&&(R[O.mapping]=O.plugin)}},getDefaultScenePlugins:function(){var v=this.game.config.defaultPlugins;return v=v.concat(this.scenePlugins),v},installScenePlugin:function(v,y,E,C,w){if(w===void 0&&(w=!1),typeof y!="function"){console.warn("Invalid Scene Plugin: "+v);return}if(c.hasCore(v)||c.register(v,y,E,!0),this.scenePlugins.indexOf(v)===-1)this.scenePlugins.push(v);else if(!w&&c.hasCore(v)){console.warn("Scene Plugin key in use: "+v);return}if(C){var A=new y(C,this,v);C.sys[v]=A,E&&E!==""&&(C[E]=A),A.boot()}},install:function(v,y,E,C,w){if(E===void 0&&(E=!1),C===void 0&&(C=null),w===void 0&&(w=null),typeof y!="function")return console.warn("Invalid Plugin: "+v),null;if(c.hasCustom(v))return console.warn("Plugin key in use: "+v),null;if(C!==null&&(E=!0),!this.game.isBooted)this._pendingGlobal.push({key:v,plugin:y,start:E,mapping:C,data:w});else if(c.registerCustom(v,y,C,w),E)return this.start(v);return null},getIndex:function(v){for(var y=this.plugins,E=0;E<y.length;E++){var C=y[E];if(C.key===v)return E}return-1},getEntry:function(v){var y=this.getIndex(v);if(y!==-1)return this.plugins[y]},isActive:function(v){var y=this.getEntry(v);return y&&y.active},start:function(v,y){y===void 0&&(y=v);var E=this.getEntry(y);return E&&!E.active?(E.active=!0,E.plugin.start()):E||(E=this.createEntry(v,y)),E?E.plugin:null},createEntry:function(v,y){var E=c.getCustom(v);if(E){var C=new E.plugin(this);E={key:y,plugin:C,active:!0,mapping:E.mapping,data:E.data},this.plugins.push(E),C.init(E.data),C.start()}return E},stop:function(v){var y=this.getEntry(v);return y&&y.active&&(y.active=!1,y.plugin.stop()),this},get:function(v,y){y===void 0&&(y=!0);var E=this.getEntry(v);if(E)return E.plugin;var C=this.getClass(v);return C&&y?(E=this.createEntry(v,v),E?E.plugin:null):C||null},getClass:function(v){return c.getCustomClass(v)},removeGlobalPlugin:function(v){var y=this.getEntry(v);y&&l(this.plugins,y),c.removeCustom(v)},removeScenePlugin:function(v){l(this.scenePlugins,v),c.remove(v)},registerGameObject:function(v,y,E){return y&&r.register(v,y),E&&u.register(v,E),this},removeGameObject:function(v,y,E){return y===void 0&&(y=!0),E===void 0&&(E=!0),y&&r.remove(v),E&&u.remove(v),this},registerFileType:function(v,y,E){o.register(v,y),E&&E.sys.load&&(E.sys.load[v]=y)},destroy:function(){for(var v=0;v<this.plugins.length;v++)this.plugins[v].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});s.exports=m}),45145:((s,T,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(52018),g=e(83419),f=e(44594),o=new g({Extends:a,initialize:function(r,h,c){a.call(this,h),this.scene=r,this.systems=r.sys,this.pluginKey=c,r.sys.events.once(f.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});s.exports=o}),18922:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BasePlugin:e(52018),DefaultPlugins:e(42363),PluginCache:e(37277),PluginManager:e(77332),ScenePlugin:e(45145)}}),63595:(()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(s){const T=performance.now(),e=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,g=(f,o)=>{const u=this.getVideoPlaybackQuality(),r=this.mozPresentedFrames||this.mozPaintedFrames||u.totalVideoFrames-u.droppedVideoFrames;if(r>a){const h=this.mozFrameDelay||u.totalFrameDelay-e.totalFrameDelay||0,c=o-f;s(o,{presentationTime:o+h*1e3,expectedDisplayTime:o+c,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+c/1e3,presentedFrames:r,processingDuration:h}),delete this._rvfcpolyfillmap[T]}else this._rvfcpolyfillmap[T]=requestAnimationFrame(h=>g(o,h))};return this._rvfcpolyfillmap[T]=requestAnimationFrame(f=>g(T,f)),T},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(s){cancelAnimationFrame(this._rvfcpolyfillmap[s]),delete this._rvfcpolyfillmap[s]})}),10312:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}}),29795:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DEFAULT:0,LINEAR:0,NEAREST:1};s.exports=T}),68627:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19715),g=e(32880),f=e(83419),o=e(8054),u=e(50792),r=e(92503),h=e(56373),c=e(97480),l=e(69442),p=e(8443),m=e(61340),v=new f({Extends:u,initialize:function(E){u.call(this);var C=E.config;this.config={clearBeforeRender:C.clearBeforeRender,backgroundColor:C.backgroundColor,antialias:C.antialias,roundPixels:C.roundPixels,transparent:C.transparent},this.game=E,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=E.canvas;var w={alpha:C.transparent,desynchronized:C.desynchronized,willReadFrequently:!1};this.gameContext=C.context?C.context:this.gameCanvas.getContext("2d",w),this.currentContext=this.gameContext,this.antialias=C.antialias,this.blendModes=h(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new m,this._tempMatrix2=new m,this._tempMatrix3=new m,this.isBooted=!1,this.init()},init:function(){var y=this.game;y.events.once(p.BOOT,function(){var E=this.config;if(!E.transparent){var C=this.gameContext,w=this.gameCanvas;C.fillStyle=E.backgroundColor.rgba,C.fillRect(0,0,w.width,w.height)}},this),y.textures.once(l.READY,this.boot,this)},boot:function(){var y=this.game,E=y.scale.baseSize;this.width=E.width,this.height=E.height,this.isBooted=!0,y.scale.on(c.RESIZE,this.onResize,this),this.resize(E.width,E.height)},onResize:function(y,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},resize:function(y,E){this.width=y,this.height=E,this.emit(r.RESIZE,y,E)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(y){return this.currentContext.globalCompositeOperation=y,this},setContext:function(y){return this.currentContext=y||this.gameContext,this},setAlpha:function(y){return this.currentContext.globalAlpha=y,this},preRender:function(){var y=this.gameContext,E=this.config,C=this.width,w=this.height;y.globalAlpha=1,y.globalCompositeOperation="source-over",y.setTransform(1,0,0,1,0,0),this.emit(r.PRE_RENDER_CLEAR),E.clearBeforeRender&&(y.clearRect(0,0,C,w),E.transparent||(y.fillStyle=E.backgroundColor.rgba,y.fillRect(0,0,C,w))),y.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(y,E,C){var w=E.length;this.emit(r.RENDER,y,C);var A=C.x,M=C.y,R=C.width,P=C.height,b=C.renderToTexture?C.context:y.sys.context;b.save(),this.game.scene.customViewports&&(b.beginPath(),b.rect(A,M,R,P),b.clip()),C.emit(a.PRE_RENDER,C),this.currentContext=b;var F=C.mask;F&&F.preRenderCanvas(this,null,C._maskCamera),C.transparent||(b.fillStyle=C.backgroundColor.rgba,b.fillRect(A,M,R,P)),b.globalAlpha=C.alpha,b.globalCompositeOperation="source-over",this.drawCount+=w,C.renderToTexture&&C.emit(a.PRE_RENDER,C),C.matrix.copyToContext(b);for(var I=0;I<w;I++){var L=E[I];L.mask&&L.mask.preRenderCanvas(this,L,C),L.renderCanvas(this,L,C),L.mask&&L.mask.postRenderCanvas(this,L,C)}b.setTransform(1,0,0,1,0,0),b.globalCompositeOperation="source-over",b.globalAlpha=1,C.flashEffect.postRenderCanvas(b),C.fadeEffect.postRenderCanvas(b),C.dirty=!1,F&&F.postRenderCanvas(this),b.restore(),C.renderToTexture&&(C.emit(a.POST_RENDER,C),C.renderToGame&&y.sys.context.drawImage(C.canvas,A,M)),C.emit(a.POST_RENDER,C)},postRender:function(){var y=this.gameContext;y.restore(),this.emit(r.POST_RENDER);var E=this.snapshotState;E.callback&&(g(this.gameCanvas,E),E.callback=null)},snapshotCanvas:function(y,E,C,w,A,M,R,P,b){C===void 0&&(C=!1),this.snapshotArea(w,A,M,R,E,P,b);var F=this.snapshotState;return F.getPixel=C,g(y,F),F.callback=null,this},snapshot:function(y,E,C){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,y,E,C)},snapshotArea:function(y,E,C,w,A,M,R){var P=this.snapshotState;return P.callback=A,P.type=M,P.encoder=R,P.getPixel=!1,P.x=y,P.y=E,P.width=Math.min(C,this.gameCanvas.width),P.height=Math.min(w,this.gameCanvas.height),this},snapshotPixel:function(y,E,C){return this.snapshotArea(y,E,1,1,C),this.snapshotState.getPixel=!0,this},batchSprite:function(y,E,C,w){var A=C.alpha*y.alpha;if(A!==0){var M=this.currentContext,R=this._tempMatrix1,P=this._tempMatrix2,b=E.canvasData,F=b.x,I=b.y,L=E.cutWidth,D=E.cutHeight,O=E.customPivot,z=E.source.resolution,_=y.displayOriginX,X=y.displayOriginY,H=-_+E.x,U=-X+E.y;if(y.isCropped){var G=y._crop;(G.flipX!==y.flipX||G.flipY!==y.flipY)&&E.updateCropUVs(G,y.flipX,y.flipY),L=G.cw,D=G.ch,F=G.cx,I=G.cy,H=-_+G.x,U=-X+G.y,y.flipX&&(H>=0?H=-(H+L):H<0&&(H=Math.abs(H)-L)),y.flipY&&(U>=0?U=-(U+D):U<0&&(U=Math.abs(U)-D))}var N=1,W=1;y.flipX&&(O||(H+=-E.realWidth+_*2),N=-1),y.flipY&&(O||(U+=-E.realHeight+X*2),W=-1);var V=y.x,$=y.y;if(C.roundPixels&&(V=Math.floor(V),$=Math.floor($)),P.applyITRS(V,$,y.rotation,y.scaleX*N,y.scaleY*W),R.copyFrom(C.matrix),w?(R.multiplyWithOffset(w,-C.scrollX*y.scrollFactorX,-C.scrollY*y.scrollFactorY),P.e=V,P.f=$):(P.e-=C.scrollX*y.scrollFactorX,P.f-=C.scrollY*y.scrollFactorY),R.multiply(P),C.renderRoundPixels&&(R.e=Math.floor(R.e+.5),R.f=Math.floor(R.f+.5)),M.save(),R.setToContext(M),M.globalCompositeOperation=this.blendModes[y.blendMode],M.globalAlpha=A,M.imageSmoothingEnabled=!E.source.scaleMode,y.mask&&y.mask.preRenderCanvas(this,y,C),L>0&&D>0){var j=L/z,k=D/z;C.roundPixels&&(H=Math.floor(H+.5),U=Math.floor(U+.5),j+=.5,k+=.5),M.drawImage(E.source.image,F,I,L,D,H,U,j,k)}y.mask&&y.mask.postRenderCanvas(this,y,C),M.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});s.exports=v}),55830:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CanvasRenderer:e(68627),GetBlendModes:e(56373),SetTransform:e(20926)}}),56373:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),g=e(89289),f=function(){var o=[],u=g.supportNewBlendModes,r="source-over";return o[a.NORMAL]=r,o[a.ADD]="lighter",o[a.MULTIPLY]=u?"multiply":r,o[a.SCREEN]=u?"screen":r,o[a.OVERLAY]=u?"overlay":r,o[a.DARKEN]=u?"darken":r,o[a.LIGHTEN]=u?"lighten":r,o[a.COLOR_DODGE]=u?"color-dodge":r,o[a.COLOR_BURN]=u?"color-burn":r,o[a.HARD_LIGHT]=u?"hard-light":r,o[a.SOFT_LIGHT]=u?"soft-light":r,o[a.DIFFERENCE]=u?"difference":r,o[a.EXCLUSION]=u?"exclusion":r,o[a.HUE]=u?"hue":r,o[a.SATURATION]=u?"saturation":r,o[a.COLOR]=u?"color":r,o[a.LUMINOSITY]=u?"luminosity":r,o[a.ERASE]="destination-out",o[a.SOURCE_IN]="source-in",o[a.SOURCE_OUT]="source-out",o[a.SOURCE_ATOP]="source-atop",o[a.DESTINATION_OVER]="destination-over",o[a.DESTINATION_IN]="destination-in",o[a.DESTINATION_OUT]="destination-out",o[a.DESTINATION_ATOP]="destination-atop",o[a.LIGHTER]="lighter",o[a.COPY]="copy",o[a.XOR]="xor",o};s.exports=f}),20926:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),g=function(f,o,u,r,h){var c=r.alpha*u.alpha;if(c<=0)return!1;var l=a(u,r,h).calc;return o.globalCompositeOperation=f.blendModes[u.blendMode],o.globalAlpha=c,o.save(),l.setToContext(o),o.imageSmoothingEnabled=u.frame?!u.frame.source.scaleMode:f.antialias,!0};s.exports=g}),63899:(s=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="losewebgl"}),6119:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postrender"}),48070:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prerender"}),15640:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="render"}),8912:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resize"}),87124:(s=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="restorewebgl"}),92503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={LOSE_WEBGL:e(63899),POST_RENDER:e(6119),PRE_RENDER:e(48070),RENDER:e(15640),RESIZE:e(8912),RESTORE_WEBGL:e(87124)}}),36909:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Events:e(92503),Snapshot:e(89966)},s.exports.Canvas=e(55830),s.exports.WebGL=e(4159)}),32880:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),g=e(40987),f=e(95540),o=function(u,r){var h=f(r,"callback"),c=f(r,"type","image/png"),l=f(r,"encoder",.92),p=Math.abs(Math.round(f(r,"x",0))),m=Math.abs(Math.round(f(r,"y",0))),v=Math.floor(f(r,"width",u.width)),y=Math.floor(f(r,"height",u.height)),E=f(r,"getPixel",!1);if(E){var C=u.getContext("2d",{willReadFrequently:!1}),w=C.getImageData(p,m,1,1),A=w.data;h.call(null,new g(A[0],A[1],A[2],A[3]))}else if(p!==0||m!==0||v!==u.width||y!==u.height){var M=a.createWebGL(this,v,y),R=M.getContext("2d",{willReadFrequently:!0});v>0&&y>0&&R.drawImage(u,p,m,v,y,0,0,v,y);var P=new Image;P.onerror=function(){h.call(null),a.remove(M)},P.onload=function(){h.call(null,P),a.remove(M)},P.src=M.toDataURL(c,l)}else{var b=new Image;b.onerror=function(){h.call(null)},b.onload=function(){h.call(null,b)},b.src=u.toDataURL(c,l)}};s.exports=o}),88815:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),g=e(40987),f=e(95540),o=function(u,r){var h=u,c=f(r,"callback"),l=f(r,"type","image/png"),p=f(r,"encoder",.92),m=Math.abs(Math.round(f(r,"x",0))),v=Math.abs(Math.round(f(r,"y",0))),y=f(r,"getPixel",!1),E=f(r,"isFramebuffer",!1),C=E?f(r,"bufferWidth",1):h.drawingBufferWidth,w=E?f(r,"bufferHeight",1):h.drawingBufferHeight;if(y){var A=new Uint8Array(4),M=E?v:w-v;h.readPixels(m,M,1,1,h.RGBA,h.UNSIGNED_BYTE,A),c.call(null,new g(A[0],A[1],A[2],A[3]))}else{var R=Math.floor(f(r,"width",C)),P=Math.floor(f(r,"height",w)),b=R*P*4,F=new Uint8Array(b);h.readPixels(m,w-v-P,R,P,h.RGBA,h.UNSIGNED_BYTE,F);for(var I=a.createWebGL(this,R,P),L=I.getContext("2d",{willReadFrequently:!0}),D=L.getImageData(0,0,R,P),O=D.data,z=0;z<P;z++)for(var _=0;_<R;_++){var X=((P-z-1)*R+_)*4,H=E?b-(z*R+(R-_))*4:(z*R+_)*4;O[H+0]=F[X+0],O[H+1]=F[X+1],O[H+2]=F[X+2],O[H+3]=F[X+3]}L.putImageData(D,0,0);var U=new Image;U.onerror=function(){c.call(null),a.remove(I)},U.onload=function(){c.call(null,U),a.remove(I)},U.src=I.toDataURL(l,p)}};s.exports=o}),89966:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Canvas:e(32880),WebGL:e(88815)}}),7530:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(36060),f=e(90330),o=e(82264),u=e(95540),r=e(32302),h=e(63448),c=e(31302),l=e(58918),p=e(14811),m=e(92651),v=e(96569),y=e(56527),E=e(57516),C=e(43439),w=e(81041),A=e(12385),M=e(7589),R=e(95428),P=e(72905),b=new a({initialize:function(I){this.game=I.game,this.renderer=I,this.classes=new f([[g.UTILITY_PIPELINE,M],[g.MULTI_PIPELINE,E],[g.BITMAPMASK_PIPELINE,c],[g.SINGLE_PIPELINE,A],[g.ROPE_PIPELINE,w],[g.LIGHT_PIPELINE,v],[g.POINTLIGHT_PIPELINE,C],[g.MOBILE_PIPELINE,y]]),this.postPipelineClasses=new f,this.pipelines=new f,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(F,I,L){var D=this.renderer,O=this.renderTargets;this.frameInc=Math.floor(u(F,"frameInc",32));var z=D.width,_=D.height,X=this.game.config.disablePreFX,H=this.game.config.disablePostFX;if(H||this.postPipelineClasses.setAll([[String(p.BARREL),l.Barrel],[String(p.BLOOM),l.Bloom],[String(p.BLUR),l.Blur],[String(p.BOKEH),l.Bokeh],[String(p.CIRCLE),l.Circle],[String(p.COLOR_MATRIX),l.ColorMatrix],[String(p.DISPLACEMENT),l.Displacement],[String(p.GLOW),l.Glow],[String(p.GRADIENT),l.Gradient],[String(p.PIXELATE),l.Pixelate],[String(p.SHADOW),l.Shadow],[String(p.SHINE),l.Shine],[String(p.VIGNETTE),l.Vignette],[String(p.WIPE),l.Wipe]]),!X){this.classes.set(g.FX_PIPELINE,m);for(var U=Math.min(z,_),G=Math.ceil(U/this.frameInc),N=1;N<G;N++){var W=N*this.frameInc;O.push(new r(D,W,W)),O.push(new r(D,W,W)),O.push(new r(D,W,W)),this.maxDimension=W}O.push(new r(D,z,_,1,0,!0,!0)),O.push(new r(D,z,_,1,0,!0,!0)),O.push(new r(D,z,_,1,0,!0,!0))}var V,$,j=this,k=this.game;if(this.classes.each(function(et,at){V=j.add(et,new at({game:k})),et===g.UTILITY_PIPELINE&&(j.UTILITY_PIPELINE=V,j.fullFrame1=V.fullFrame1,j.fullFrame2=V.fullFrame2,j.halfFrame1=V.halfFrame1,j.halfFrame2=V.halfFrame2)}),this.MULTI_PIPELINE=this.get(g.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(g.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(g.MOBILE_PIPELINE),X||(this.FX_PIPELINE=this.get(g.FX_PIPELINE)),F)for($ in F){var Q=F[$];V=new Q(k),V.name=$,V.isPostFX?this.postPipelineClasses.set($,Q):this.has($)||(this.classes.set($,Q),this.add($,V))}this.default=this.get(I),L&&!o.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(F){var I=this.get(F);return I&&(this.default=I),I},add:function(F,I){if(I.isPostFX){console.warn(F+" is a Post Pipeline. Use `addPostPipeline` instead");return}var L=this.pipelines,D=this.renderer;return L.has(F)?console.warn("Pipeline exists: "+F):(I.name=F,I.manager=this,L.set(F,I)),I.hasBooted||I.boot(),D.width!==0&&D.height!==0&&!I.isPreFX&&I.resize(D.width,D.height),I},addPostPipeline:function(F,I){this.postPipelineClasses.has(F)||this.postPipelineClasses.set(F,I)},flush:function(){this.current&&this.current.flush()},has:function(F){var I=this.pipelines;return typeof F=="string"?I.has(F):!!I.contains(F)},get:function(F){var I=this.pipelines;if(typeof F=="string")return I.get(F);if(I.contains(F))return F},getPostPipeline:function(F,I,L){var D=this.postPipelineClasses,O,z="",_=typeof F;if(_==="string"||_==="number"?(O=D.get(F),z=F):_==="function"?(D.contains(F)&&(O=F),z=F.name):_==="object"&&(O=D.get(F.name),z=F.name),O){var X=new O(this.game,L);return X.name=z,I&&(X.gameObject=I),this.postPipelineInstances.push(X),X}},removePostPipeline:function(F){P(this.postPipelineInstances,F)},remove:function(F,I,L){I===void 0&&(I=!0),L===void 0&&(L=!0),this.pipelines.delete(F),I&&this.classes.delete(F),L&&this.postPipelineClasses.delete(F)},set:function(F,I,L){if(!F.isPostFX)return this.isCurrent(F,L)||(this.flush(),this.current&&this.current.unbind(),this.current=F,F.bind(L)),F.updateProjectionMatrix(),F.onBind(I),F},preBatch:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=I.length-1;L>=0;L--){var D=I[L];D.active&&D.preBatch(F)}}},postBatch:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=0;L<I.length;L++){var D=I[L];D.active&&D.postBatch(F)}}},preBatchCamera:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=I.length-1;L>=0;L--){var D=I[L];D.active&&D.preBatch(F)}}},postBatchCamera:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=0;L<I.length;L++){var D=I[L];D.active&&D.postBatch(F)}}},isCurrent:function(F,I){var L=this.renderer,D=this.current;return D&&!I&&(I=D.currentShader),!(D!==F||I.program!==L.currentProgram)},copyFrame:function(F,I,L,D,O){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(F,I,L,D,O),this},copyToGame:function(F){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(F),this},drawFrame:function(F,I,L,D){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(F,I,L,D),this},blendFrames:function(F,I,L,D,O){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(F,I,L,D,O),this},blendFramesAdditive:function(F,I,L,D,O){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(F,I,L,D,O),this},clearFrame:function(F,I){return this.UTILITY_PIPELINE.clearFrame(F,I),this},blitFrame:function(F,I,L,D,O,z){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(F,I,L,D,O,z),this},copyFrameRect:function(F,I,L,D,O,z,_,X){return this.UTILITY_PIPELINE.copyFrameRect(F,I,L,D,O,z,_,X),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(F){return this.UTILITY_PIPELINE.bind(F)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(F,I){I.restoreContext()}),R(this.postPipelineInstances,function(F){F.restoreContext()})},rebind:function(F){F===void 0&&this.previous&&(F=this.previous);var I=this.renderer,L=I.gl;L.disable(L.DEPTH_TEST),L.disable(L.CULL_FACE),I.hasActiveStencilMask()?L.clear(L.DEPTH_BUFFER_BIT):(L.disable(L.STENCIL_TEST),L.clear(L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)),L.viewport(0,0,I.width,I.height),I.currentProgram=null,I.setBlendMode(0,!0);var D=I.vaoExtension;D&&D.bindVertexArrayOES(null);var O=this.pipelines.entries;for(var z in O)O[z].glReset=!0;F&&(this.current=F,F.rebind())},clear:function(){var F=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,F.currentProgram=null,F.setBlendMode(0,!0);var I=F.vaoExtension;I&&I.bindVertexArrayOES(null)},getRenderTarget:function(F){var I=this.renderTargets,L=3;if(F>this.maxDimension)return this.targetIndex=I.length-L,I[this.targetIndex];var D=(h(F,this.frameInc,0,!0)-1)*L;return this.targetIndex=D,I[D]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});s.exports=b}),32302:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(92503),f=new a({initialize:function(u,r,h,c,l,p,m,v,y){c===void 0&&(c=1),l===void 0&&(l=0),p===void 0&&(p=!0),m===void 0&&(m=!1),v===void 0&&(v=!0),y===void 0&&(y=!0),this.renderer=u,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=l,this.autoClear=p,this.autoResize=!0,this.hasDepthBuffer=v,this.forceClamp=y,this.init(r,h),m?this.renderer.on(g.RESIZE,this.resize,this):this.autoResize=!1},init:function(o,u){var r=this.renderer;this.texture=r.createTextureFromSource(null,o,u,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(o,u,this.texture,this.hasDepthBuffer),this.width=o,this.height=u},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(g.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(g.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,u){if(this.autoResize&&this.willResize(o,u)){var r=this.renderer;r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.texture=r.createTextureFromSource(null,o,u,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(o,u,this.texture,this.hasDepthBuffer),this.width=o,this.height=u}return this},willResize:function(o,u){return typeof o!="number"||typeof u!="number"?!1:(o=Math.round(o*this.scale),u=Math.round(u*this.scale),o=Math.max(o,1),u=Math.max(u,1),o!==this.width||u!==this.height)},bind:function(o,u,r){o===void 0&&(o=!1);var h=this.renderer;if(o&&h.flush(),u&&r&&this.resize(u,r),h.pushFramebuffer(this.framebuffer,!1,!1),o&&this.adjustViewport(),this.autoClear){var c=this.renderer.gl;c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT)}h.clearStencilMask()},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(o,u,r,h){var c=this.renderer,l=c.gl;c.pushFramebuffer(this.framebuffer),o!==void 0&&u!==void 0&&r!==void 0&&h!==void 0?(l.enable(l.SCISSOR_TEST),l.scissor(o,u,r,h)):l.disable(l.SCISSOR_TEST),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),c.popFramebuffer(),c.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var u=this.renderer;return o&&u.flush(),u.popFramebuffer()},destroy:function(){var o=this.renderer;o.off(g.RESIZE,this.resize,this),o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});s.exports=f}),70554:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={getTintFromFloats:function(T,e,a,g){var f=(T*255|0)&255,o=(e*255|0)&255,u=(a*255|0)&255,r=(g*255|0)&255;return(r<<24|f<<16|o<<8|u)>>>0},getTintAppendFloatAlpha:function(T,e){var a=(e*255|0)&255;return(a<<24|T)>>>0},getTintAppendFloatAlphaAndSwap:function(T,e){var a=(T>>16|0)&255,g=(T>>8|0)&255,f=(T|0)&255,o=(e*255|0)&255;return(o<<24|f<<16|g<<8|a)>>>0},getFloatsFromUintRGB:function(T){var e=(T>>16|0)&255,a=(T>>8|0)&255,g=(T|0)&255;return[e/255,a/255,g/255]},checkShaderMax:function(T,e){var a=Math.min(16,T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?a:Math.min(a,e)},parseFragmentShaderMaxTextures:function(T,e){if(!T)return"";for(var a="",g=0;g<e;g++)g>0&&(a+=`
	else `),g<e-1&&(a+="if (outTexId < "+g+".5)"),a+=`
	{`,a+=`
		texture = texture2D(uMainSampler[`+g+"], outTexCoord);",a+=`
	}`;return T=T.replace(/%count%/gi,e.toString()),T.replace(/%forloop%/gi,a)},setGlowQuality:function(T,e,a,g){return a===void 0&&(a=e.config.glowFXQuality),g===void 0&&(g=e.config.glowFXDistance),T=T.replace(/__SIZE__/gi,(1/a/g).toFixed(7)),T=T.replace(/__DIST__/gi,g.toFixed(0)+".0"),T}}}),29100:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(62644),f=e(50792),o=e(77085),u=e(95540),r=e(37867),h=e(92503),c=e(32302),l=e(70554),p=e(38683),m=new a({Extends:f,initialize:function(y){f.call(this);var E=y.game,C=E.renderer,w=C.gl;this.name=u(y,"name","WebGLPipeline"),this.game=E,this.renderer=C,this.manager,this.gl=w,this.view=E.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=u(y,"topology",w.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=u(y,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=y,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=u(y,"resizeUniform","")},boot:function(){var v,y=this.gl,E=this.config,C=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var w=this.renderTargets,A=u(E,"renderTarget",!1);typeof A=="boolean"&&A&&(A=1);var M=C.width,R=C.height;if(typeof A=="number")for(v=0;v<A;v++)w.push(new c(C,M,R,1,0,!0));else if(Array.isArray(A))for(v=0;v<A.length;v++){var P=u(A[v],"scale",1),b=u(A[v],"minFilter",0),F=u(A[v],"autoClear",1),I=u(A[v],"autoResize",!1),L=u(A[v],"width",null),D=u(A[v],"height",L);L?w.push(new c(C,L,D,1,b,F,I)):w.push(new c(C,M,R,P,b,F,I))}w.length&&(this.currentRenderTarget=w[0]),this.setShadersFromConfig(E);var O=this.shaders,z=0;for(v=0;v<O.length;v++)O[v].vertexSize>z&&(z=O[v].vertexSize);var _=u(E,"batchSize",C.config.batchSize);this.vertexCapacity=_*6;var X=new ArrayBuffer(this.vertexCapacity*z);this.vertexData=X,this.bytes=new Uint8Array(X),this.vertexViewF32=new Float32Array(X),this.vertexViewU32=new Uint32Array(X);var H=u(E,"vertices",null);for(H?(this.vertexViewF32.set(H),this.vertexBuffer=C.createVertexBuffer(X,y.STATIC_DRAW)):this.vertexBuffer=C.createVertexBuffer(X.byteLength,y.DYNAMIC_DRAW),this.setVertexBuffer(),v=O.length-1;v>=0;v--)O[v].rebind();this.hasBooted=!0,C.on(h.RESIZE,this.resize,this),C.on(h.PRE_RENDER,this.onPreRender,this),C.on(h.RENDER,this.onRender,this),C.on(h.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(v,y,E){var C=this.renderer;if(v!==this.currentShader||C.currentProgram!==this.currentShader.program){this.flush();var w=this.setVertexBuffer(E);w&&!y&&(y=!0),v.bind(y,!1),this.currentShader=v}return this},getShaderByName:function(v){for(var y=this.shaders,E=0;E<y.length;E++)if(y[E].name===v)return y[E]},setShadersFromConfig:function(v){var y,E=this.shaders,C=this.renderer;for(y=0;y<E.length;y++)E[y].destroy();var w="vertShader",A="fragShader",M="attributes",R=u(v,w,null),P=l.parseFragmentShaderMaxTextures(u(v,A,null),C.maxTextures),b=u(v,M,null),F=u(v,"shaders",[]),I=F.length;if(I===0)R&&P&&(this.shaders=[new p(this,"default",R,P,g(b))]);else{var L=[];for(y=0;y<I;y++){var D=F[y],O,z,_,X;if(typeof D=="string"?(O="default",z=R,_=l.parseFragmentShaderMaxTextures(D,C.maxTextures),X=b):(O=u(D,"name","default"),z=u(D,w,R),_=l.parseFragmentShaderMaxTextures(u(D,A,P),C.maxTextures),X=u(D,M,b)),O==="default"){var H=_.split(`
`),U=H[0].trim();U.indexOf("#define SHADER_NAME")>-1&&(O=U.substring(20))}z&&_&&L.push(new p(this,O,z,_,g(X)))}this.shaders=L}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(v){return this.currentBatch={start:this.vertexCount,count:0,texture:[v],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=v,this.batch.push(this.currentBatch),0},addTextureToBatch:function(v){var y=this.currentBatch;y&&(y.texture.push(v),y.unit++,y.maxUnit++)},pushBatch:function(v){if(!this.currentBatch||this.forceZero&&v!==this.currentTexture)return this.createBatch(v);if(v===this.currentTexture)return this.currentUnit;var y=this.currentBatch,E=y.texture.indexOf(v);return E===-1?y.texture.length===this.renderer.maxTextures?this.createBatch(v):(y.unit++,y.maxUnit++,y.texture.push(v),this.currentUnit=y.unit,this.currentTexture=v,y.unit):(this.currentUnit=E,this.currentTexture=v,E)},setGameObject:function(v,y){return y===void 0&&(y=v.frame),this.pushBatch(y.source.glTexture)},shouldFlush:function(v){return v===void 0&&(v=0),this.vertexCount+v>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(v,y){(v!==this.width||y!==this.height)&&this.flush(),this.width=v,this.height=y;for(var E=this.renderTargets,C=0;C<E.length;C++)E[C].resize(v,y);return this.setProjectionMatrix(v,y),this.resizeUniform&&this.set2f(this.resizeUniform,v,y),this.emit(o.RESIZE,v,y,this),this.onResize(v,y),this},setProjectionMatrix:function(v,y){var E=this.projectionMatrix;if(!E)return this;this.projectionWidth=v,this.projectionHeight=y,E.ortho(0,v,y,0,-1e3,1e3);for(var C=this.shaders,w="uProjectionMatrix",A=0;A<C.length;A++){var M=C[A];M.hasUniform(w)&&(M.resetUniform(w),M.setMatrix4fv(w,!1,E.val,M))}return this},flipProjectionMatrix:function(v){v===void 0&&(v=!0);var y=this.projectionMatrix;if(!y)return this;var E=this.projectionWidth,C=this.projectionHeight;v?y.ortho(0,E,0,C,-1e3,1e3):y.ortho(0,E,C,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,y.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var v=this.renderer.projectionWidth,y=this.renderer.projectionHeight;(this.projectionWidth!==v||this.projectionHeight!==y)&&this.setProjectionMatrix(v,y)}},bind:function(v){if(v===void 0&&(v=this.currentShader),this.glReset)return this.rebind(v);var y=!1,E=this.gl;return E.getParameter(E.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(E.bindBuffer(E.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,y=!0),v.bind(y),this.currentShader=v,this.activeTextures.length=0,this.emit(o.BIND,this,v),this.onActive(v),this},rebind:function(v){this.activeBuffer=null,this.setVertexBuffer();for(var y=this.shaders,E=y.length-1;E>=0;E--){var C=y[E].rebind();(!v||C===v)&&(this.currentShader=C)}return this.activeTextures.length=0,this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var v=this.shaders,y=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,y&&this.setVertexBuffer();for(var E=0;E<v.length;E++){var C=v[E];C.syncUniforms(),y&&C.rebind()}},setVertexBuffer:function(v){if(v===void 0&&(v=this.vertexBuffer),v!==this.activeBuffer){var y=this.gl;return this.gl.bindBuffer(y.ARRAY_BUFFER,v.webGLBuffer),this.activeBuffer=v,!0}return!1},preBatch:function(v){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(v),this},postBatch:function(v){return this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(v){if(v===void 0&&(v=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,v),this.onBeforeFlush(v);var y=this.gl,E=this.vertexCount,C=this.currentShader.vertexSize,w=this.topology;if(this.active){this.setVertexBuffer(),E===this.vertexCapacity?y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.DYNAMIC_DRAW):y.bufferSubData(y.ARRAY_BUFFER,0,this.bytes.subarray(0,E*C));var A,M,R,P=this.batch,b=this.activeTextures;if(this.forceZero)for(b[0]||y.activeTexture(y.TEXTURE0),A=0;A<P.length;A++)M=P[A],R=M.texture[0],b[0]!==R&&(y.bindTexture(y.TEXTURE_2D,R.webGLTexture),b[0]=R),y.drawArrays(w,M.start,M.count);else for(A=0;A<P.length;A++){M=P[A];for(var F=0;F<=M.maxUnit;F++)R=M.texture[F],b[F]!==R&&(y.activeTexture(y.TEXTURE0+F),y.bindTexture(y.TEXTURE_2D,R.webGLTexture),b[F]=R);y.drawArrays(w,M.start,M.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(o.AFTER_FLUSH,this,v),this.onAfterFlush(v)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(v,y,E,C,w,A,M){var R=this.vertexViewF32,P=this.vertexViewU32,b=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++b]=v,R[++b]=y,R[++b]=E,R[++b]=C,R[++b]=w,R[++b]=A,P[++b]=M,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(v,y,E,C,w,A,M,R,P,b,F,I,L,D,O,z,_,X,H,U){U===void 0&&(U=this.currentUnit);var G=!1;this.shouldFlush(6)&&(this.flush(),G=!0),this.currentBatch||(U=this.setTexture2D(H));var N=this.vertexViewF32,W=this.vertexViewU32,V=this.vertexCount*this.currentShader.vertexComponentCount-1;return N[++V]=y,N[++V]=E,N[++V]=b,N[++V]=F,N[++V]=U,N[++V]=X,W[++V]=D,N[++V]=C,N[++V]=w,N[++V]=b,N[++V]=L,N[++V]=U,N[++V]=X,W[++V]=z,N[++V]=A,N[++V]=M,N[++V]=I,N[++V]=L,N[++V]=U,N[++V]=X,W[++V]=_,N[++V]=y,N[++V]=E,N[++V]=b,N[++V]=F,N[++V]=U,N[++V]=X,W[++V]=D,N[++V]=A,N[++V]=M,N[++V]=I,N[++V]=L,N[++V]=U,N[++V]=X,W[++V]=_,N[++V]=R,N[++V]=P,N[++V]=I,N[++V]=F,N[++V]=U,N[++V]=X,W[++V]=O,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),G},batchTri:function(v,y,E,C,w,A,M,R,P,b,F,I,L,D,O,z,_){_===void 0&&(_=this.currentUnit);var X=!1;this.shouldFlush(3)&&(this.flush(),X=!0),this.currentBatch||(_=this.setTexture2D(z));var H=this.vertexViewF32,U=this.vertexViewU32,G=this.vertexCount*this.currentShader.vertexComponentCount-1;return H[++G]=y,H[++G]=E,H[++G]=R,H[++G]=P,H[++G]=_,H[++G]=O,U[++G]=I,H[++G]=C,H[++G]=w,H[++G]=R,H[++G]=F,H[++G]=_,H[++G]=O,U[++G]=L,H[++G]=A,H[++G]=M,H[++G]=b,H[++G]=F,H[++G]=_,H[++G]=O,U[++G]=D,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),X},drawFillRect:function(v,y,E,C,w,A,M,R){M===void 0&&(M=this.renderer.whiteTexture),R===void 0&&(R=!0),v=Math.floor(v),y=Math.floor(y);var P=Math.floor(v+E),b=Math.floor(y+C),F=this.setTexture2D(M),I=l.getTintAppendFloatAlphaAndSwap(w,A),L=0,D=0,O=1,z=1;R&&(D=1,z=0),this.batchQuad(null,v,y,v,b,P,b,P,y,L,D,O,z,I,I,I,I,0,M,F)},setTexture2D:function(v){return v===void 0&&(v=this.renderer.whiteTexture),this.pushBatch(v)},bindTexture:function(v,y){y===void 0&&(y=0);var E=this.gl;return E.activeTexture(E.TEXTURE0+y),E.bindTexture(E.TEXTURE_2D,v.webGLTexture),this},bindRenderTarget:function(v,y){return this.bindTexture(v.texture,y)},setTime:function(v,y){return this.set1f(v,this.game.loop.getDuration(),y),this},setBoolean:function(v,y,E){return E===void 0&&(E=this.currentShader),E.setBoolean(v,y),this},set1f:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set1f(v,y),this},set2f:function(v,y,E,C){return C===void 0&&(C=this.currentShader),C.set2f(v,y,E),this},set3f:function(v,y,E,C,w){return w===void 0&&(w=this.currentShader),w.set3f(v,y,E,C),this},set4f:function(v,y,E,C,w,A){return A===void 0&&(A=this.currentShader),A.set4f(v,y,E,C,w),this},set1fv:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set1fv(v,y),this},set2fv:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set2fv(v,y),this},set3fv:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set3fv(v,y),this},set4fv:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set4fv(v,y),this},set1iv:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set1iv(v,y),this},set2iv:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set2iv(v,y),this},set3iv:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set3iv(v,y),this},set4iv:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set4iv(v,y),this},set1i:function(v,y,E){return E===void 0&&(E=this.currentShader),E.set1i(v,y),this},set2i:function(v,y,E,C){return C===void 0&&(C=this.currentShader),C.set2i(v,y,E),this},set3i:function(v,y,E,C,w){return w===void 0&&(w=this.currentShader),w.set3i(v,y,E,C),this},set4i:function(v,y,E,C,w,A){return A===void 0&&(A=this.currentShader),A.set4i(v,y,E,C,w),this},setMatrix2fv:function(v,y,E,C){return C===void 0&&(C=this.currentShader),C.setMatrix2fv(v,y,E),this},setMatrix3fv:function(v,y,E,C){return C===void 0&&(C=this.currentShader),C.setMatrix3fv(v,y,E),this},setMatrix4fv:function(v,y,E,C){return C===void 0&&(C=this.currentShader),C.setMatrix4fv(v,y,E),this},destroy:function(){this.emit(o.DESTROY,this);var v,y=this.shaders;for(v=0;v<y.length;v++)y[v].destroy();var E=this.renderTargets;for(v=0;v<E.length;v++)E[v].destroy();var C=this.renderer;return C.deleteBuffer(this.vertexBuffer),C.off(h.RESIZE,this.resize,this),C.off(h.PRE_RENDER,this.onPreRender,this),C.off(h.RENDER,this.onRender,this),C.off(h.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});s.exports=m}),74797:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95428),g=e(72905),f=e(19715),o=e(83419),u=e(8054),r=e(50792),h=e(92503),c=e(50030),l=e(37867),p=e(29747),m=e(7530),v=e(32302),y=e(97480),E=e(69442),C=e(70554),w=e(88815),A=e(26128),M=e(1482),R=e(82751),P=e(84387),b=e(93567),F=e(57183),I=new o({Extends:r,initialize:function(D){r.call(this);var O=D.config,z={alpha:O.transparent,desynchronized:O.desynchronized,depth:!0,antialias:O.antialiasGL,premultipliedAlpha:O.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:O.failIfMajorPerformanceCaveat,powerPreference:O.powerPreference,preserveDrawingBuffer:O.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:O.clearBeforeRender,antialias:O.antialias,backgroundColor:O.backgroundColor,contextCreation:z,roundPixels:O.roundPixels,maxTextures:O.maxTextures,maxTextureSize:O.maxTextureSize,batchSize:O.batchSize,maxLights:O.maxLights,mipmapFilter:O.mipmapFilter},this.game=D,this.type=u.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=D.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=p,this.contextRestoredHandler=p,this.previousContextLostHandler=p,this.previousContextRestoredHandler=p,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(L){var D,O=this.game,z=this.canvas,_=L.backgroundColor;if(O.config.context?D=O.config.context:D=z.getContext("webgl",L.contextCreation)||z.getContext("experimental-webgl",L.contextCreation),!D||D.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=D,this.setExtensions(),this.setContextHandlers(),O.context=D;for(var X=0;X<=27;X++)this.blendModes.push({func:[D.ONE,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_ADD});this.blendModes[1].func=[D.ONE,D.DST_ALPHA],this.blendModes[2].func=[D.DST_COLOR,D.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[D.ONE,D.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[D.ZERO,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_REVERSE_SUBTRACT},this.glFormats=[D.BYTE,D.SHORT,D.UNSIGNED_BYTE,D.UNSIGNED_SHORT,D.FLOAT],this.glFuncMap={mat2:{func:D.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:D.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:D.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:D.uniform1f,length:1},"1fv":{func:D.uniform1fv,length:1},"1i":{func:D.uniform1i,length:1},"1iv":{func:D.uniform1iv,length:1},"2f":{func:D.uniform2f,length:2},"2fv":{func:D.uniform2fv,length:1},"2i":{func:D.uniform2i,length:2},"2iv":{func:D.uniform2iv,length:1},"3f":{func:D.uniform3f,length:3},"3fv":{func:D.uniform3fv,length:1},"3i":{func:D.uniform3i,length:3},"3iv":{func:D.uniform3iv,length:1},"4f":{func:D.uniform4f,length:4},"4fv":{func:D.uniform4fv,length:1},"4i":{func:D.uniform4i,length:4},"4iv":{func:D.uniform4iv,length:1}},(!L.maxTextures||L.maxTextures===-1)&&(L.maxTextures=D.getParameter(D.MAX_TEXTURE_IMAGE_UNITS)),L.maxTextureSize||(L.maxTextureSize=D.getParameter(D.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),D.disable(D.DEPTH_TEST),D.disable(D.CULL_FACE),D.enable(D.BLEND),D.clearColor(_.redGL,_.greenGL,_.blueGL,_.alphaGL),D.clear(D.COLOR_BUFFER_BIT);var H=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return H.indexOf(L.mipmapFilter)!==-1&&(this.mipmapFilter=D[L.mipmapFilter]),this.maxTextures=C.checkShaderMax(D,L.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new m(this),this.setBlendMode(u.BlendModes.NORMAL),this.projectionMatrix=new l().identity(),O.textures.once(E.READY,this.boot,this),this},boot:function(){var L=this.game,D=this.pipelines,O=L.scale.baseSize,z=O.width,_=O.height;this.width=z,this.height=_,this.isBooted=!0,this.renderTarget=new v(this,z,_,1,0,!0,!0),this.maskTarget=new v(this,z,_,1,0,!0,!0),this.maskSource=new v(this,z,_,1,0,!0,!0);var X=L.config;D.boot(X.pipeline,X.defaultPipeline,X.autoMobilePipeline),this.blankTexture=L.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=L.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=L.textures.getFrame("__WHITE").glTexture;var H=this.gl;H.bindFramebuffer(H.FRAMEBUFFER,null),H.enable(H.SCISSOR_TEST),L.scale.on(y.RESIZE,this.onResize,this),this.resize(z,_)},setExtensions:function(){var L=this.gl,D=L.getSupportedExtensions();this.supportedExtensions=D;var O="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(O)>-1?L.getExtension(O):null;var z="OES_vertex_array_object";this.vaoExtension=D.indexOf(z)>-1?L.getExtension(z):null},setContextHandlers:function(L,D){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof L=="function"?this.contextLostHandler=L.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof D=="function"?this.contextRestoredHandler=D.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(L){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(h.LOSE_WEBGL,this),L.preventDefault()},dispatchContextRestored:function(L){var D=this.gl;if(D.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(u.BlendModes.NORMAL),D.disable(D.BLEND),D.disable(D.DEPTH_TEST),D.enable(D.CULL_FACE),this.compression=this.getCompressedTextures();var O=function(z){z.createResource()};a(this.glTextureWrappers,O),a(this.glBufferWrappers,O),a(this.glFramebufferWrappers,O),a(this.glProgramWrappers,O),a(this.glAttribLocationWrappers,O),a(this.glUniformLocationWrappers,O),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(h.RESTORE_WEBGL,this),L.preventDefault()},createTemporaryTextures:function(){for(var L=this.gl,D=0;D<this.maxTextures;D++){var O=L.createTexture();L.activeTexture(L.TEXTURE0+D),L.bindTexture(L.TEXTURE_2D,O),L.texImage2D(L.TEXTURE_2D,0,L.RGBA,1,1,0,L.RGBA,L.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(D)}},captureFrame:function(L,D){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(L,D,O){},stopCapture:function(){},onCapture:function(L){},onResize:function(L,D){(D.width!==this.width||D.height!==this.height)&&this.resize(D.width,D.height)},beginCapture:function(L,D){L===void 0&&(L=this.width),D===void 0&&(D=this.height),this.renderTarget.bind(!0,L,D),this.setProjectionMatrix(L,D)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(L,D){var O=this.gl;return this.width=L,this.height=D,this.setProjectionMatrix(L,D),O.viewport(0,0,L,D),this.drawingBufferHeight=O.drawingBufferHeight,O.scissor(0,O.drawingBufferHeight-D,L,D),this.defaultScissor[2]=L,this.defaultScissor[3]=D,this.emit(h.RESIZE,L,D),this},getCompressedTextures:function(){var L="WEBGL_compressed_texture_",D="WEBKIT_"+L,O="EXT_texture_compression_",z=function(X,H){var U=X.getExtension(L+H)||X.getExtension(D+H)||X.getExtension(O+H);if(U){var G={};for(var N in U)G[U[N]]=N;return G}},_=this.gl;return{ETC:z(_,"etc"),ETC1:z(_,"etc1"),ATC:z(_,"atc"),ASTC:z(_,"astc"),BPTC:z(_,"bptc"),RGTC:z(_,"rgtc"),PVRTC:z(_,"pvrtc"),S3TC:z(_,"s3tc"),S3TCSRGB:z(_,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(L,D){var O=this.compression[L.toUpperCase()];if(D in O)return O[D]},supportsCompressedTexture:function(L,D){var O=this.compression[L.toUpperCase()];return O?D?D in O:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(L,D){return(L!==this.projectionWidth||D!==this.projectionHeight)&&(this.projectionWidth=L,this.projectionHeight=D,this.projectionMatrix.ortho(0,L,D,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(L){return this.supportedExtensions?this.supportedExtensions.indexOf(L):!1},getExtension:function(L){return this.hasExtension(L)?(L in this.extensions||(this.extensions[L]=this.gl.getExtension(L)),this.extensions[L]):null},flush:function(){this.pipelines.flush()},pushScissor:function(L,D,O,z,_){_===void 0&&(_=this.drawingBufferHeight);var X=this.scissorStack,H=[L,D,O,z];return X.push(H),this.setScissor(L,D,O,z,_),this.currentScissor=H,H},setScissor:function(L,D,O,z,_){_===void 0&&(_=this.drawingBufferHeight);var X=this.gl,H=this.currentScissor,U=O>0&&z>0;if(H&&U){var G=H[0],N=H[1],W=H[2],V=H[3];U=G!==L||N!==D||W!==O||V!==z}U&&(this.flush(),X.scissor(L,_-D-z,O,z))},resetScissor:function(){var L=this.gl;L.enable(L.SCISSOR_TEST);var D=this.currentScissor;if(D){var O=D[0],z=D[1],_=D[2],X=D[3];_>0&&X>0&&L.scissor(O,this.drawingBufferHeight-z-X,_,X)}},popScissor:function(){var L=this.scissorStack;L.pop();var D=L[L.length-1];D&&this.setScissor(D[0],D[1],D[2],D[3]),this.currentScissor=D},hasActiveStencilMask:function(){var L=this.currentMask.mask,D=this.currentCameraMask.mask;return L&&L.isStencil||D&&D.isStencil},resetViewport:function(){var L=this.gl;L.viewport(0,0,this.width,this.height),this.drawingBufferHeight=L.drawingBufferHeight},setBlendMode:function(L,D){D===void 0&&(D=!1);var O=this.gl,z=this.blendModes[L];return D||L!==u.BlendModes.SKIP_CHECK&&this.currentBlendMode!==L?(this.flush(),O.enable(O.BLEND),O.blendEquation(z.equation),z.func.length>2?O.blendFuncSeparate(z.func[0],z.func[1],z.func[2],z.func[3]):O.blendFunc(z.func[0],z.func[1]),this.currentBlendMode=L,!0):!1},addBlendMode:function(L,D){var O=this.blendModes.push({func:L,equation:D});return O-1},updateBlendMode:function(L,D,O){return this.blendModes[L]&&(this.blendModes[L].func=D,O&&(this.blendModes[L].equation=O)),this},removeBlendMode:function(L){return L>17&&this.blendModes[L]&&this.blendModes.splice(L,1),this},pushFramebuffer:function(L,D,O,z,_){return L===this.currentFramebuffer?this:(this.fboStack.push(L),this.setFramebuffer(L,D,O,z,_))},setFramebuffer:function(L,D,O,z,_){if(D===void 0&&(D=!1),O===void 0&&(O=!0),z===void 0&&(z=null),_===void 0&&(_=!1),L===this.currentFramebuffer)return this;var X=this.gl,H=this.width,U=this.height;return L&&L.renderTexture&&O?(H=L.renderTexture.width,U=L.renderTexture.height):this.flush(),L?X.bindFramebuffer(X.FRAMEBUFFER,L.webGLFramebuffer):X.bindFramebuffer(X.FRAMEBUFFER,null),O&&X.viewport(0,0,H,U),z&&X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,z.webGLTexture,0),_&&(X.clearColor(0,0,0,0),X.clear(X.COLOR_BUFFER_BIT)),D&&(L?(this.drawingBufferHeight=U,this.pushScissor(0,0,H,U)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=L,this},popFramebuffer:function(L,D){L===void 0&&(L=!1),D===void 0&&(D=!0);var O=this.fboStack;O.pop();var z=O[O.length-1];return z||(z=null),this.setFramebuffer(z,L,D),z},restoreFramebuffer:function(L,D){L===void 0&&(L=!1),D===void 0&&(D=!0);var O=this.fboStack,z=O[O.length-1];z||(z=null),this.currentFramebuffer=null,this.setFramebuffer(z,L,D)},setProgram:function(L){return L!==this.currentProgram?(this.flush(),this.gl.useProgram(L.webGLProgram),this.currentProgram=L,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(L,D,O,z,_){_===void 0&&(_=!1);var X=this.gl,H=X.NEAREST,U=X.NEAREST,G=X.CLAMP_TO_EDGE,N=null;D=L?L.width:D,O=L?L.height:O;var W=c(D,O);if(W&&!_&&(G=X.REPEAT),z===u.ScaleModes.LINEAR&&this.config.antialias){var V=L&&L.compressed,$=!V&&W||V&&L.mipmaps.length>1;H=this.mipmapFilter&&$?this.mipmapFilter:X.LINEAR,U=X.LINEAR}return!L&&typeof D=="number"&&typeof O=="number"?N=this.createTexture2D(0,H,U,G,G,X.RGBA,null,D,O):N=this.createTexture2D(0,H,U,G,G,X.RGBA,L),N},createTexture2D:function(L,D,O,z,_,X,H,U,G,N,W,V){typeof U!="number"&&(U=H?H.width:1),typeof G!="number"&&(G=H?H.height:1);var $=new R(this.gl,L,D,O,z,_,X,H,U,G,N,W,V);return this.glTextureWrappers.push($),$},createFramebuffer:function(L,D,O,z){this.currentFramebuffer=null;var _=new P(this.gl,L,D,O,z);return this.glFramebufferWrappers.push(_),_},beginBitmapMask:function(L,D){var O=this.gl;O&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==L&&(this.currentMask.mask=L,this.currentMask.camera=D))},drawBitmapMask:function(L,D,O){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),L.renderWebGL(this,L,D),this.maskSource.unbind(!0),this.maskTarget.unbind();var z=this.gl,_=this.getCurrentStencilMask();_?(z.enable(z.STENCIL_TEST),_.mask.applyStencil(this,_.camera,!0)):this.currentMask.mask=null,this.pipelines.set(O),z.activeTexture(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,this.maskTarget.texture.webGLTexture),z.activeTexture(z.TEXTURE1),z.bindTexture(z.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(L,D){var O=new M(this.gl,L,D);return this.glProgramWrappers.push(O),O},createVertexBuffer:function(L,D){var O=this.gl,z=new A(O,L,O.ARRAY_BUFFER,D);return this.glBufferWrappers.push(z),z},createAttribLocation:function(L,D){var O=new b(this.gl,L,D);return this.glAttribLocationWrappers.push(O),O},createUniformLocation:function(L,D){var O=new F(this.gl,L,D);return this.glUniformLocationWrappers.push(O),O},createIndexBuffer:function(L,D){var O=this.gl,z=new A(O,L,O.ELEMENT_ARRAY_BUFFER,D);return this.glBufferWrappers.push(z),z},deleteTexture:function(L){if(L)return g(this.glTextureWrappers,L),L.destroy(),this},deleteFramebuffer:function(L){return L?(g(this.fboStack,L),g(this.glFramebufferWrappers,L),L.destroy(),this):this},deleteProgram:function(L){return L&&(g(this.glProgramWrappers,L),L.destroy()),this},deleteAttribLocation:function(L){return L&&(g(this.glAttribLocationWrappers,L),L.destroy()),this},deleteUniformLocation:function(L){return L&&(g(this.glUniformLocationWrappers,L),L.destroy()),this},deleteBuffer:function(L){return L?(g(this.glBufferWrappers,L),L.destroy(),this):this},preRenderCamera:function(L){var D=L.x,O=L.y,z=L.width,_=L.height,X=L.backgroundColor;if(L.emit(f.PRE_RENDER,L),this.pipelines.preBatchCamera(L),this.pushScissor(D,O,z,_),L.mask&&(this.currentCameraMask.mask=L.mask,this.currentCameraMask.camera=L._maskCamera,L.mask.preRenderWebGL(this,L,L._maskCamera)),X.alphaGL>0){var H=this.pipelines.setMulti();H.drawFillRect(D,O,z,_,C.getTintFromFloats(X.blueGL,X.greenGL,X.redGL,1),X.alphaGL)}},getCurrentStencilMask:function(){var L=null,D=this.maskStack,O=this.currentCameraMask;return D.length>0?L=D[D.length-1]:O.mask&&O.mask.isStencil&&(L=O),L},postRenderCamera:function(L){var D=L.flashEffect,O=L.fadeEffect;if(D.isRunning||O.isRunning||O.isComplete){var z=this.pipelines.setMulti();D.postRenderWebGL(z,C.getTintFromFloats),O.postRenderWebGL(z,C.getTintFromFloats)}L.dirty=!1,this.popScissor(),L.mask&&(this.currentCameraMask.mask=null,L.mask.postRenderWebGL(this,L._maskCamera)),this.pipelines.postBatchCamera(L),L.emit(f.POST_RENDER,L)},preRender:function(){if(!this.contextLost){var L=this.gl;if(L.bindFramebuffer(L.FRAMEBUFFER,null),this.emit(h.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var D=this.config.backgroundColor;L.clearColor(D.redGL,D.greenGL,D.blueGL,D.alphaGL),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)}L.enable(L.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&L.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(h.PRE_RENDER)}},render:function(L,D,O){if(!this.contextLost){var z=D.length;if(this.emit(h.RENDER,L,O),this.preRenderCamera(O),z===0){this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(O);return}this.currentType="";for(var _=this.currentMask,X=0;X<z;X++){this.finalType=X===z-1;var H=D[X],U=H.mask;_=this.currentMask,_.mask&&_.mask!==U&&_.mask.postRenderWebGL(this,_.camera),U&&_.mask!==U&&U.preRenderWebGL(this,H,O),H.blendMode!==this.currentBlendMode&&this.setBlendMode(H.blendMode);var G=H.type;G!==this.currentType&&(this.newType=!0,this.currentType=G),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=D[X+1].type===this.currentType,H.renderWebGL(this,H,O),this.newType=!1}_=this.currentMask,_.mask&&_.mask.postRenderWebGL(this,_.camera),this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(O)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(h.POST_RENDER);var L=this.snapshotState;L.callback&&(w(this.gl,L),L.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var L=this.gl,D=this.getCurrentStencilMask();if(D){var O=D.mask;L.enable(L.STENCIL_TEST),O.invertAlpha?L.stencilFunc(L.NOTEQUAL,O.level,255):L.stencilFunc(L.EQUAL,O.level,255)}},snapshot:function(L,D,O){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,L,D,O)},snapshotArea:function(L,D,O,z,_,X,H){var U=this.snapshotState;return U.callback=_,U.type=X,U.encoder=H,U.getPixel=!1,U.x=L,U.y=D,U.width=O,U.height=z,this},snapshotPixel:function(L,D,O){return this.snapshotArea(L,D,1,1,O),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(L,D,O,z,_,X,H,U,G,N,W){_===void 0&&(_=!1),X===void 0&&(X=0),H===void 0&&(H=0),U===void 0&&(U=D),G===void 0&&(G=O),N==="pixel"&&(_=!0,N="image/png");var V=this.currentFramebuffer;this.snapshotArea(X,H,U,G,z,N,W);var $=this.snapshotState;return $.getPixel=_,$.isFramebuffer=!0,$.bufferWidth=D,$.bufferHeight=O,$.width=Math.min($.width,D),$.height=Math.min($.height,O),this.setFramebuffer(L),w(this.gl,$),this.setFramebuffer(V),$.callback=null,$.isFramebuffer=!1,this},canvasToTexture:function(L,D,O,z){O===void 0&&(O=!1),z===void 0&&(z=!1);var _=this.gl,X=_.NEAREST,H=_.NEAREST,U=L.width,G=L.height,N=_.CLAMP_TO_EDGE,W=c(U,G);return!O&&W&&(N=_.REPEAT),this.config.antialias&&(X=W&&this.mipmapFilter?this.mipmapFilter:_.LINEAR,H=_.LINEAR),D?(D.update(L,U,G,z,N,N,X,H,D.format),D):this.createTexture2D(0,X,H,N,N,_.RGBA,L,U,G,!0,!1,z)},createCanvasTexture:function(L,D,O){return D===void 0&&(D=!1),O===void 0&&(O=!1),this.canvasToTexture(L,null,D,O)},updateCanvasTexture:function(L,D,O,z){return O===void 0&&(O=!1),z===void 0&&(z=!1),this.canvasToTexture(L,D,z,O)},videoToTexture:function(L,D,O,z){O===void 0&&(O=!1),z===void 0&&(z=!1);var _=this.gl,X=_.NEAREST,H=_.NEAREST,U=L.videoWidth,G=L.videoHeight,N=_.CLAMP_TO_EDGE,W=c(U,G);return!O&&W&&(N=_.REPEAT),this.config.antialias&&(X=W&&this.mipmapFilter?this.mipmapFilter:_.LINEAR,H=_.LINEAR),D?(D.update(L,U,G,z,N,N,X,H,D.format),D):this.createTexture2D(0,X,H,N,N,_.RGBA,L,U,G,!0,!0,z)},createVideoTexture:function(L,D,O){return D===void 0&&(D=!1),O===void 0&&(O=!1),this.videoToTexture(L,null,D,O)},updateVideoTexture:function(L,D,O,z){return O===void 0&&(O=!1),z===void 0&&(z=!1),this.videoToTexture(L,D,z,O)},createUint8ArrayTexture:function(L,D,O){var z=this.gl,_=z.NEAREST,X=z.NEAREST,H=z.CLAMP_TO_EDGE,U=c(D,O);return U&&(H=z.REPEAT),this.createTexture2D(0,_,X,H,H,z.RGBA,L,D,O)},setTextureFilter:function(L,D){var O=this.gl,z=D===0?O.LINEAR:O.NEAREST;O.activeTexture(O.TEXTURE0);var _=O.getParameter(O.TEXTURE_BINDING_2D);return O.bindTexture(O.TEXTURE_2D,L.webGLTexture),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,z),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,z),L.minFilter=z,L.magFilter=z,_&&O.bindTexture(O.TEXTURE_2D,_),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var L=function(D){D.destroy()};a(this.glAttribLocationWrappers,L),a(this.glBufferWrappers,L),a(this.glFramebufferWrappers,L),a(this.glProgramWrappers,L),a(this.glTextureWrappers,L),a(this.glUniformLocationWrappers,L),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});s.exports=I}),38683:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95428),f=e(95540),o=e(14500),u=new a({initialize:function(h,c,l,p,m){this.pipeline=h,this.name=c,this.renderer=h.renderer,this.gl=this.renderer.gl,this.fragSrc=p,this.vertSrc=l,this.program=this.renderer.createProgram(l,p),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(m),this.createUniforms()},createAttributes:function(r){var h=0,c=0,l=[];this.vertexComponentCount=0;for(var p=0;p<r.length;p++){var m=r[p],v=m.name,y=f(m,"size",1),E=f(m,"type",o.FLOAT),C=E.enum,w=E.size,A=!!m.normalized;l.push({name:v,size:y,type:C,normalized:A,offset:c,enabled:!1,location:-1}),w===4?h+=y:h++,c+=y*w}this.vertexSize=c,this.vertexComponentCount=h,this.attributes=l},bind:function(r,h){return r===void 0&&(r=!1),h===void 0&&(h=!1),h&&this.pipeline.flush(),this.renderer.setProgram(this.program),r&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(r){r===void 0&&(r=!1);for(var h=this.gl,c=this.renderer,l=this.vertexSize,p=this.attributes,m=this.program,v=0;v<p.length;v++){var y=p[v],E=y.size,C=y.type,w=y.offset,A=y.enabled,M=y.location,R=!!y.normalized;if(r){M!==-1&&c.deleteAttribLocation(M);var P=this.renderer.createAttribLocation(m,y.name);P.webGLAttribLocation>=0?(h.enableVertexAttribArray(P.webGLAttribLocation),h.vertexAttribPointer(P.webGLAttribLocation,E,C,R,l,w),y.enabled=!0,y.location=P):P.webGLAttribLocation!==-1&&h.disableVertexAttribArray(P.webGLAttribLocation)}else A?h.vertexAttribPointer(M.webGLAttribLocation,E,C,R,l,w):!A&&M!==-1&&M.webGLAttribLocation>-1&&(h.disableVertexAttribArray(M.webGLAttribLocation),y.location=-1)}return this},createUniforms:function(){var r=this.gl,h=this.program,c=this.uniforms,l,p,m,v=r.getProgramParameter(h.webGLProgram,r.ACTIVE_UNIFORMS);for(l=0;l<v;l++){var y=r.getActiveUniform(h.webGLProgram,l);if(y){p=y.name,m=this.renderer.createUniformLocation(h,p),m!==null&&(c[p]={name:p,location:m,setter:null,value1:null,value2:null,value3:null,value4:null});var E=p.indexOf("[");E>0&&(p=p.substr(0,E),c.hasOwnProperty(p)||(m=this.renderer.createUniformLocation(h,p),m!==null&&(c[p]={name:p,location:m,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var r=this.gl;this.renderer.setProgram(this.program);for(var h in this.uniforms){var c=this.uniforms[h];c.setter&&c.setter.call(r,c.location.webGLUniformLocation,c.value1,c.value2,c.value3,c.value4)}},hasUniform:function(r){return this.uniforms.hasOwnProperty(r)},resetUniform:function(r){var h=this.uniforms[r];return h&&(h.value1=null,h.value2=null,h.value3=null,h.value4=null),this},setUniform1:function(r,h,c,l){var p=this.uniforms[h];return p?((l||p.value1!==c)&&(p.setter||(p.setter=r),p.value1=c,this.renderer.setProgram(this.program),r.call(this.gl,p.location.webGLUniformLocation,c),this.pipeline.currentShader=this),this):this},setUniform2:function(r,h,c,l,p){var m=this.uniforms[h];return m?((p||m.value1!==c||m.value2!==l)&&(m.setter||(m.setter=r),m.value1=c,m.value2=l,this.renderer.setProgram(this.program),r.call(this.gl,m.location.webGLUniformLocation,c,l),this.pipeline.currentShader=this),this):this},setUniform3:function(r,h,c,l,p,m){var v=this.uniforms[h];return v?((m||v.value1!==c||v.value2!==l||v.value3!==p)&&(v.setter||(v.setter=r),v.value1=c,v.value2=l,v.value3=p,this.renderer.setProgram(this.program),r.call(this.gl,v.location.webGLUniformLocation,c,l,p),this.pipeline.currentShader=this),this):this},setUniform4:function(r,h,c,l,p,m,v){var y=this.uniforms[h];return y?((v||y.value1!==c||y.value2!==l||y.value3!==p||y.value4!==m)&&(y.setter||(y.setter=r),y.value1=c,y.value2=l,y.value3=p,y.value4=m,this.renderer.setProgram(this.program),r.call(this.gl,y.location.webGLUniformLocation,c,l,p,m),this.pipeline.currentShader=this),this):this},setBoolean:function(r,h){return this.setUniform1(this.gl.uniform1i,r,Number(h))},set1f:function(r,h){return this.setUniform1(this.gl.uniform1f,r,h)},set2f:function(r,h,c){return this.setUniform2(this.gl.uniform2f,r,h,c)},set3f:function(r,h,c,l){return this.setUniform3(this.gl.uniform3f,r,h,c,l)},set4f:function(r,h,c,l,p){return this.setUniform4(this.gl.uniform4f,r,h,c,l,p)},set1fv:function(r,h){return this.setUniform1(this.gl.uniform1fv,r,h,!0)},set2fv:function(r,h){return this.setUniform1(this.gl.uniform2fv,r,h,!0)},set3fv:function(r,h){return this.setUniform1(this.gl.uniform3fv,r,h,!0)},set4fv:function(r,h){return this.setUniform1(this.gl.uniform4fv,r,h,!0)},set1iv:function(r,h){return this.setUniform1(this.gl.uniform1iv,r,h,!0)},set2iv:function(r,h){return this.setUniform1(this.gl.uniform2iv,r,h,!0)},set3iv:function(r,h){return this.setUniform1(this.gl.uniform3iv,r,h,!0)},set4iv:function(r,h){return this.setUniform1(this.gl.uniform4iv,r,h,!0)},set1i:function(r,h){return this.setUniform1(this.gl.uniform1i,r,h)},set2i:function(r,h,c){return this.setUniform2(this.gl.uniform2i,r,h,c)},set3i:function(r,h,c,l){return this.setUniform3(this.gl.uniform3i,r,h,c,l)},set4i:function(r,h,c,l,p){return this.setUniform4(this.gl.uniform4i,r,h,c,l,p)},setMatrix2fv:function(r,h,c){return this.setUniform2(this.gl.uniformMatrix2fv,r,h,c,!0)},setMatrix3fv:function(r,h,c){return this.setUniform2(this.gl.uniformMatrix3fv,r,h,c,!0)},setMatrix4fv:function(r,h,c){return this.setUniform2(this.gl.uniformMatrix4fv,r,h,c,!0)},createProgram:function(r,h){return r===void 0&&(r=this.vertSrc),h===void 0&&(h=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=r,this.fragSrc=h,this.program=this.renderer.createProgram(r,h),this.createUniforms(),this.rebind()},destroy:function(){var r=this.renderer;g(this.uniforms,function(h){r.deleteUniformLocation(h.location)}),this.uniforms=null,g(this.attributes,function(h){r.deleteAttribLocation(h.location)}),this.attributes=null,r.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});s.exports=u}),14500:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};s.exports=T}),4159:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14500),g=e(79291),f={PipelineManager:e(7530),Pipelines:e(96615),RenderTarget:e(32302),Utils:e(70554),WebGLPipeline:e(29100),WebGLRenderer:e(74797),WebGLShader:e(38683),Wrappers:e(9503)};f=g(!1,f,a),s.exports=f}),31302:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=e(78908),o=e(85191),u=e(14500),r=e(29100),h=new a({Extends:r,initialize:function(l){l.fragShader=g(l,"fragShader",f),l.vertShader=g(l,"vertShader",o),l.batchSize=g(l,"batchSize",1),l.vertices=g(l,"vertices",[-1,1,-1,-7,7,1]),l.attributes=g(l,"attributes",[{name:"inPosition",size:2,type:u.FLOAT}]),r.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,l){r.prototype.resize.call(this,c,l),this.set2f("uResolution",c,l)},beginMask:function(c,l,p){this.renderer.beginBitmapMask(c,p)},endMask:function(c,l,p){var m=this.gl,v=this.renderer,y=c.bitmapMask;y&&m&&(v.drawBitmapMask(y,l,this),p&&this.set2f("uResolution",p.width,p.height),this.set1i("uInvertMaskAlpha",c.invertAlpha),m.drawArrays(this.topology,0,3),p&&this.set2f("uResolution",this.width,this.height),m.bindTexture(m.TEXTURE_2D,null))}});s.exports=h}),92651:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(58918),f=e(14811),o=e(95540),u=e(43558),r=e(89350),h=e(70554),c=new a({Extends:u,initialize:function(p){p.shaders=[h.setGlowQuality(r.FXGlowFrag,p.game),r.FXShadowFrag,r.FXPixelateFrag,r.FXVignetteFrag,r.FXShineFrag,r.FXBlurLowFrag,r.FXBlurMedFrag,r.FXBlurHighFrag,r.FXGradientFrag,r.FXBloomFrag,r.ColorMatrixFrag,r.FXCircleFrag,r.FXBarrelFrag,r.FXDisplacementFrag,r.FXWipeFrag,r.FXBokehFrag],u.call(this,p);var m=this.game;this.glow=new g.Glow(m),this.shadow=new g.Shadow(m),this.pixelate=new g.Pixelate(m),this.vignette=new g.Vignette(m),this.shine=new g.Shine(m),this.gradient=new g.Gradient(m),this.circle=new g.Circle(m),this.barrel=new g.Barrel(m),this.wipe=new g.Wipe(m),this.bokeh=new g.Bokeh(m);var v=[];v[f.GLOW]=this.onGlow,v[f.SHADOW]=this.onShadow,v[f.PIXELATE]=this.onPixelate,v[f.VIGNETTE]=this.onVignette,v[f.SHINE]=this.onShine,v[f.BLUR]=this.onBlur,v[f.GRADIENT]=this.onGradient,v[f.BLOOM]=this.onBloom,v[f.COLOR_MATRIX]=this.onColorMatrix,v[f.CIRCLE]=this.onCircle,v[f.BARREL]=this.onBarrel,v[f.DISPLACEMENT]=this.onDisplacement,v[f.WIPE]=this.onWipe,v[f.BOKEH]=this.onBokeh,this.fxHandlers=v,this.source,this.target,this.swap},onDraw:function(l,p,m){this.source=l,this.target=p,this.swap=m;var v=l.width,y=l.height,E=this.tempSprite,C=this.fxHandlers;if(E&&E.preFX)for(var w=E.preFX.list,A=0;A<w.length;A++){var M=w[A];M.active&&C[M.type].call(this,M,v,y)}this.drawToGame(this.source)},runDraw:function(){var l=this.source,p=this.target;this.copy(l,p),this.source=p,this.target=l},onGlow:function(l,p,m){var v=this.shaders[f.GLOW];this.setShader(v),this.glow.onPreRender(l,v,p,m),this.runDraw()},onShadow:function(l){var p=this.shaders[f.SHADOW];this.setShader(p),this.shadow.onPreRender(l,p),this.runDraw()},onPixelate:function(l,p,m){var v=this.shaders[f.PIXELATE];this.setShader(v),this.pixelate.onPreRender(l,v,p,m),this.runDraw()},onVignette:function(l){var p=this.shaders[f.VIGNETTE];this.setShader(p),this.vignette.onPreRender(l,p),this.runDraw()},onShine:function(l,p,m){var v=this.shaders[f.SHINE];this.setShader(v),this.shine.onPreRender(l,v,p,m),this.runDraw()},onBlur:function(l,p,m){var v=o(l,"quality"),y=this.shaders[f.BLUR+v];this.setShader(y),this.set1i("uMainSampler",0),this.set2f("resolution",p,m),this.set1f("strength",o(l,"strength")),this.set3fv("color",o(l,"glcolor"));for(var E=o(l,"x"),C=o(l,"y"),w=o(l,"steps"),A=0;A<w;A++)this.set2f("offset",E,0),this.runDraw(),this.set2f("offset",0,C),this.runDraw()},onGradient:function(l){var p=this.shaders[f.GRADIENT];this.setShader(p),this.gradient.onPreRender(l,p),this.runDraw()},onBloom:function(l,p,m){var v=this.shaders[f.BLOOM];this.copySprite(this.source,this.swap),this.setShader(v),this.set1i("uMainSampler",0),this.set1f("strength",o(l,"blurStrength")),this.set3fv("color",o(l,"glcolor"));for(var y=2/p*o(l,"offsetX"),E=2/m*o(l,"offsetY"),C=o(l,"steps"),w=0;w<C;w++)this.set2f("offset",y,0),this.runDraw(),this.set2f("offset",0,E),this.runDraw();this.blendFrames(this.swap,this.source,this.target,o(l,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(l){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",l.getData()),this.set1f("uAlpha",l.alpha),this.runDraw()},onCircle:function(l,p,m){var v=this.shaders[f.CIRCLE];this.setShader(v),this.circle.onPreRender(l,v,p,m),this.runDraw()},onBarrel:function(l){var p=this.shaders[f.BARREL];this.setShader(p),this.barrel.onPreRender(l,p),this.runDraw()},onDisplacement:function(l){this.setShader(this.shaders[f.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",l.x,l.y),this.bindTexture(l.glTexture,1),this.runDraw()},onWipe:function(l){var p=this.shaders[f.WIPE];this.setShader(p),this.wipe.onPreRender(l,p),this.runDraw()},onBokeh:function(l,p,m){var v=this.shaders[f.BOKEH];this.setShader(v),this.bokeh.onPreRender(l,v,p,m),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,u.prototype.destroy.call(this),this}});s.exports=c}),96569:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=e(31063),o=e(57516),u=e(61340),r=e(26099),h=e(29100),c=new a({Extends:o,initialize:function(p){var m=g(p,"fragShader",f);p.fragShader=m.replace("%LIGHT_COUNT%",p.game.renderer.config.maxLights),o.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new r,this._tempMatrix=new u,this._tempMatrix2=new u},boot:function(){h.prototype.boot.call(this)},onRender:function(l,p){var m=l.sys.lights;if(this.lightsActive=!1,!(!m||!m.active)){var v=m.getLights(p),y=v.length;this.lightsActive=!0;var E,C=this.renderer,w=C.height,A=p.matrix,M=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",m.ambientColor.r,m.ambientColor.g,m.ambientColor.b),this.set1i("uLightCount",y),E=0;E<y;E++){var R=v[E].light,P=R.color,b="uLights["+E+"].";A.transformPoint(R.x,R.y,M),this.set2f(b+"position",M.x-p.scrollX*R.scrollFactorX*p.zoom,w-(M.y-p.scrollY*R.scrollFactorY*p.zoom)),this.set3f(b+"color",P.r,P.g,P.b),this.set1f(b+"intensity",R.intensity),this.set1f(b+"radius",R.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(l){if(l!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(l){var m=-l,v=Math.cos(m),y=Math.sin(m);p[1]=y,p[3]=-y,p[0]=p[4]=v}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=l}},setTexture2D:function(l,p){var m=this.renderer;l===void 0&&(l=m.whiteTexture);var v=this.getNormalMap(p);this.isNewNormalMap(l,v)&&(this.flush(),this.createBatch(l),this.addTextureToBatch(v),this.currentNormalMap=v);var y=0;if(p&&p.parentContainer){var E=p.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);y=E.rotationNormalized}else p&&(y=p.rotation);return this.currentBatch===null&&(this.createBatch(l),this.addTextureToBatch(v)),this.setNormalMapRotation(y),0},setGameObject:function(l,p){p===void 0&&(p=l.frame);var m=p.glTexture,v=this.getNormalMap(l);if(this.isNewNormalMap(m,v)&&(this.flush(),this.createBatch(m),this.addTextureToBatch(v),this.currentNormalMap=v),l.parentContainer){var y=l.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(y.rotationNormalized)}else this.setNormalMapRotation(l.rotation);return this.currentBatch===null&&(this.createBatch(m),this.addTextureToBatch(v)),0},isNewNormalMap:function(l,p){return this.currentTexture!==l||this.currentNormalMap!==p},getNormalMap:function(l){var p;if(l)l.displayTexture?p=l.displayTexture.dataSource[l.displayFrame.sourceIndex]:l.texture?p=l.texture.dataSource[l.frame.sourceIndex]:l.tileset&&(Array.isArray(l.tileset)?p=l.tileset[0].image.dataSource[0]:p=l.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return p?p.glTexture:this.renderer.normalTexture},batchSprite:function(l,p,m){this.lightsActive&&o.prototype.batchSprite.call(this,l,p,m)},batchTexture:function(l,p,m,v,y,E,C,w,A,M,R,P,b,F,I,L,D,O,z,_,X,H,U,G,N,W,V,$,j,k,Q,et){this.lightsActive&&o.prototype.batchTexture.call(this,l,p,m,v,y,E,C,w,A,M,R,P,b,F,I,L,D,O,z,_,X,H,U,G,N,W,V,$,j,k,Q,et)},batchTextureFrame:function(l,p,m,v,y,E,C){this.lightsActive&&o.prototype.batchTextureFrame.call(this,l,p,m,v,y,E,C)}});s.exports=c}),56527:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=e(57516),o=e(45561),u=e(60722),r=e(14500),h=e(29100),c=new a({Extends:f,initialize:function(p){p.fragShader=g(p,"fragShader",o),p.vertShader=g(p,"vertShader",u),p.attributes=g(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),p.forceZero=!0,p.resizeUniform="uResolution",f.call(this,p)},boot:function(){h.prototype.boot.call(this);var l=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height)}});s.exports=c}),57516:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(94811),f=e(95540),o=e(98840),u=e(44667),r=e(61340),h=e(70554),c=e(14500),l=e(29100),p=new a({Extends:l,initialize:function(v){var y=v.game.renderer,E=f(v,"fragShader",o);v.fragShader=h.parseFragmentShaderMaxTextures(E,y.maxTextures),v.vertShader=f(v,"vertShader",u),v.attributes=f(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),v.resizeUniform="uResolution",l.call(this,v),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this);var m=this.renderer;this.set1iv("uMainSampler",m.textureIndexes),this.set2f("uResolution",m.width,m.height)},batchSprite:function(m,v,y){this.manager.set(this,m);var E=this._tempMatrix1,C=this._tempMatrix2,w=this._tempMatrix3,A=m.frame,M=A.glTexture,R=A.u0,P=A.v0,b=A.u1,F=A.v1,I=A.x,L=A.y,D=A.cutWidth,O=A.cutHeight,z=A.customPivot,_=m.displayOriginX,X=m.displayOriginY,H=-_+I,U=-X+L;if(m.isCropped){var G=m._crop;(G.flipX!==m.flipX||G.flipY!==m.flipY)&&A.updateCropUVs(G,m.flipX,m.flipY),R=G.u0,P=G.v0,b=G.u1,F=G.v1,D=G.width,O=G.height,I=G.x,L=G.y,H=-_+I,U=-X+L}var N=1,W=1;m.flipX&&(z||(H+=-A.realWidth+_*2),N=-1),m.flipY&&(z||(U+=-A.realHeight+X*2),W=-1);var V=m.x,$=m.y;v.roundPixels&&(V=Math.floor(V),$=Math.floor($)),C.applyITRS(V,$,m.rotation,m.scaleX*N,m.scaleY*W),E.copyFrom(v.matrix),y?(E.multiplyWithOffset(y,-v.scrollX*m.scrollFactorX,-v.scrollY*m.scrollFactorY),C.e=V,C.f=$):(C.e-=v.scrollX*m.scrollFactorX,C.f-=v.scrollY*m.scrollFactorY),E.multiply(C,w);var j=w.setQuad(H,U,H+D,U+O,v.renderRoundPixels),k=h.getTintAppendFloatAlpha,Q=v.alpha,et=k(m.tintTopLeft,Q*m._alphaTL),at=k(m.tintTopRight,Q*m._alphaTR),q=k(m.tintBottomLeft,Q*m._alphaBL),ft=k(m.tintBottomRight,Q*m._alphaBR);this.shouldFlush(6)&&this.flush();var vt=this.setGameObject(m,A);this.manager.preBatch(m),this.batchQuad(m,j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],R,P,b,F,et,at,q,ft,m.tintFill,M,vt),this.manager.postBatch(m)},batchTexture:function(m,v,y,E,C,w,A,M,R,P,b,F,I,L,D,O,z,_,X,H,U,G,N,W,V,$,j,k,Q,et,at,q,ft){ft===void 0&&(ft=!1),this.manager.set(this,m);var vt=this._tempMatrix1,Tt=this._tempMatrix2,ct=this._tempMatrix3,Ut=_/y+j,yt=X/E+k,it=(_+H)/y+j,Z=(X+U)/E+k,lt=A,pt=M,Pt=-O,wt=-z;if(m.isCropped){var jt=m._crop,Vt=jt.width,Wt=jt.height;lt=Vt,pt=Wt,A=Vt,M=Wt,_=jt.x,X=jt.y;var ue=_,Gt=X;F&&(ue=H-jt.x-Vt),I&&(Gt=U-jt.y-Wt),Ut=ue/y+j,yt=Gt/E+k,it=(ue+Vt)/y+j,Z=(Gt+Wt)/E+k,Pt=-O+_,wt=-z+X}I=I^(!at&&v.isRenderTexture?1:0),F&&(lt*=-1,Pt+=A),I&&(pt*=-1,wt+=M),Q.roundPixels&&(C=Math.floor(C),w=Math.floor(w)),Tt.applyITRS(C,w,b,R,P),vt.copyFrom(Q.matrix),et?(vt.multiplyWithOffset(et,-Q.scrollX*L,-Q.scrollY*D),Tt.e=C,Tt.f=w):(Tt.e-=Q.scrollX*L,Tt.f-=Q.scrollY*D),vt.multiply(Tt,ct);var zt=ct.setQuad(Pt,wt,Pt+lt,wt+pt,Q.renderRoundPixels);q==null&&(q=this.setTexture2D(v)),m&&!ft&&this.manager.preBatch(m),this.batchQuad(m,zt[0],zt[1],zt[2],zt[3],zt[4],zt[5],zt[6],zt[7],Ut,yt,it,Z,G,N,W,V,$,v,q),m&&!ft&&this.manager.postBatch(m)},batchTextureFrame:function(m,v,y,E,C,w,A){this.manager.set(this);var M=this._tempMatrix1.copyFrom(w),R=this._tempMatrix2;A?M.multiply(A,R):R=M;var P=R.setQuad(v,y,v+m.width,y+m.height),b=this.setTexture2D(m.source.glTexture);E=h.getTintAppendFloatAlpha(E,C),this.batchQuad(null,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],m.u0,m.v0,m.u1,m.v1,E,E,E,E,0,m.glTexture,b)},batchFillRect:function(m,v,y,E,C,w){this.renderer.pipelines.set(this);var A=this.calcMatrix;w&&w.multiply(C,A);var M=A.setQuad(m,v,m+y,v+E),R=this.fillTint;this.batchQuad(null,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],0,0,1,1,R.TL,R.TR,R.BL,R.BR,2)},batchFillTriangle:function(m,v,y,E,C,w,A,M){this.renderer.pipelines.set(this);var R=this.calcMatrix;M&&M.multiply(A,R);var P=R.getX(m,v),b=R.getY(m,v),F=R.getX(y,E),I=R.getY(y,E),L=R.getX(C,w),D=R.getY(C,w),O=this.fillTint;this.batchTri(null,P,b,F,I,L,D,0,0,1,1,O.TL,O.TR,O.BL,2)},batchStrokeTriangle:function(m,v,y,E,C,w,A,M,R){var P=this.tempTriangle;P[0].x=m,P[0].y=v,P[0].width=A,P[1].x=y,P[1].y=E,P[1].width=A,P[2].x=C,P[2].y=w,P[2].width=A,P[3].x=m,P[3].y=v,P[3].width=A,this.batchStrokePath(P,A,!1,M,R)},batchFillPath:function(m,v,y){this.renderer.pipelines.set(this);var E=this.calcMatrix;y&&y.multiply(v,E);for(var C=m.length,w=this.polygonCache,A,M,R=this.fillTint.TL,P=this.fillTint.TR,b=this.fillTint.BL,F=0;F<C;++F)M=m[F],w.push(M.x,M.y);A=g(w),C=A.length;for(var I=0;I<C;I+=3){var L=A[I+0]*2,D=A[I+1]*2,O=A[I+2]*2,z=w[L+0],_=w[L+1],X=w[D+0],H=w[D+1],U=w[O+0],G=w[O+1],N=E.getX(z,_),W=E.getY(z,_),V=E.getX(X,H),$=E.getY(X,H),j=E.getX(U,G),k=E.getY(U,G);this.batchTri(null,N,W,V,$,j,k,0,0,1,1,R,P,b,2)}w.length=0},batchStrokePath:function(m,v,y,E,C){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var w=m.length-1,A=0;A<w;A++){var M=m[A],R=m[A+1];this.batchLine(M.x,M.y,R.x,R.y,M.width/2,R.width/2,v,A,!y&&A===w-1,E,C)}},batchLine:function(m,v,y,E,C,w,A,M,R,P,b){this.renderer.pipelines.set(this);var F=this.calcMatrix;b&&b.multiply(P,F);var I=y-m,L=E-v,D=Math.sqrt(I*I+L*L);if(D!==0){var O=C*(E-v)/D,z=C*(m-y)/D,_=w*(E-v)/D,X=w*(m-y)/D,H=y-_,U=E-X,G=m-O,N=v-z,W=y+_,V=E+X,$=m+O,j=v+z,k=F.getX(H,U),Q=F.getY(H,U),et=F.getX(G,N),at=F.getY(G,N),q=F.getX(W,V),ft=F.getY(W,V),vt=F.getX($,j),Tt=F.getY($,j),ct=this.strokeTint,Ut=ct.TL,yt=ct.TR,it=ct.BL,Z=ct.BR;if(this.batchQuad(null,vt,Tt,et,at,k,Q,q,ft,0,0,1,1,Ut,yt,it,Z,2),!(A<=2)){var lt=this.prevQuad,pt=this.firstQuad;M>0&&lt[4]?this.batchQuad(null,vt,Tt,et,at,lt[0],lt[1],lt[2],lt[3],0,0,1,1,Ut,yt,it,Z,2):(pt[0]=vt,pt[1]=Tt,pt[2]=et,pt[3]=at,pt[4]=1),R&&pt[4]?this.batchQuad(null,k,Q,q,ft,pt[0],pt[1],pt[2],pt[3],0,0,1,1,Ut,yt,it,Z,2):(lt[0]=k,lt[1]=Q,lt[2]=q,lt[3]=ft,lt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,l.prototype.destroy.call(this),this}});s.exports=p}),43439:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=e(4127),o=e(89924),u=e(29100),r=new a({Extends:u,initialize:function(c){c.vertShader=g(c,"vertShader",o),c.fragShader=g(c,"fragShader",f),c.attributes=g(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),u.call(this,c)},onRender:function(h,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(h,c,l,p,m,v,y,E,C,w,A,M){var R=h.color,P=h.intensity,b=h.radius,F=h.attenuation,I=R.r*P,L=R.g*P,D=R.b*P,O=c.alpha*h.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(l,p,A,M,b,F,I,L,D,O),this.batchLightVert(m,v,A,M,b,F,I,L,D,O),this.batchLightVert(y,E,A,M,b,F,I,L,D,O),this.batchLightVert(l,p,A,M,b,F,I,L,D,O),this.batchLightVert(y,E,A,M,b,F,I,L,D,O),this.batchLightVert(C,w,A,M,b,F,I,L,D,O),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(h,c,l,p,m,v,y,E,C,w){var A=this.vertexViewF32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;A[++M]=h,A[++M]=c,A[++M]=l,A[++M]=p,A[++M]=m,A[++M]=v,A[++M]=y,A[++M]=E,A[++M]=C,A[++M]=w,this.vertexCount++}});s.exports=r}),84057:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(89422),f=e(95540),o=e(27681),u=e(49627),r=e(29100),h=new a({Extends:r,initialize:function(l){l.renderTarget=f(l,"renderTarget",1),l.fragShader=f(l,"fragShader",o),l.vertShader=f(l,"vertShader",u),l.attributes=f(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),l.batchSize=1,l.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,l),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new g,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){r.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2;var l=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height);for(var p=this.renderTargets,m=0;m<p.length;m++)p[m].autoResize=!0},postBatch:function(c){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(c),this},onDraw:function(c){this.bindAndDraw(c)},getController:function(c){return c!==void 0?c:this.controller?this.controller:this},copySprite:function(c,l,p){p===void 0&&(p=!1);var m=this.gl;m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,c.texture.webGLTexture);var v=m.getParameter(m.FRAMEBUFFER_BINDING);m.bindFramebuffer(m.FRAMEBUFFER,l.framebuffer.webGLFramebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,l.texture.webGLTexture,0),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),p&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,v))},copyFrame:function(c,l,p,m,v){this.manager.copyFrame(c,l,p,m,v)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,l,p){this.manager.drawFrame(c,l,p,this.colorMatrix)},blendFrames:function(c,l,p,m,v){this.manager.blendFrames(c,l,p,m,v)},blendFramesAdditive:function(c,l,p,m,v){this.manager.blendFramesAdditive(c,l,p,m,v)},clearFrame:function(c,l){this.manager.clearFrame(c,l)},blitFrame:function(c,l,p,m,v,y){this.manager.blitFrame(c,l,p,m,v,y)},copyFrameRect:function(c,l,p,m,v,y,E,C){this.manager.copyFrameRect(c,l,p,m,v,y,E,C)},bindAndDraw:function(c,l,p,m,v){p===void 0&&(p=!0),m===void 0&&(m=!0);var y=this.gl,E=this.renderer;this.bind(v),this.set1i("uMainSampler",0),l?(y.viewport(0,0,l.width,l.height),y.bindFramebuffer(y.FRAMEBUFFER,l.framebuffer.webGLFramebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,l.texture.webGLTexture,0),p&&(m?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT))):(E.popFramebuffer(!1,!1),E.currentFramebuffer||y.viewport(0,0,E.width,E.height)),E.restoreStencilMask(),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,c.texture.webGLTexture),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),l&&(y.bindTexture(y.TEXTURE_2D,null),y.bindFramebuffer(y.FRAMEBUFFER,E.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),r.prototype.destroy.call(this),this}});s.exports=h}),43558:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),g=e(67502),f=e(83419),o=e(96293),u=e(95540),r=e(57516),h=e(27681),c=e(87841),l=e(32302),p=e(45561),m=e(60722),v=e(29100),y=new f({Extends:r,initialize:function(C){var w=u(C,"fragShader",h),A=u(C,"vertShader",m),M=u(C,"drawShader",h),R=[{name:"DrawSprite",fragShader:p,vertShader:m},{name:"CopySprite",fragShader:w,vertShader:A},{name:"DrawGame",fragShader:M,vertShader:m},{name:"ColorMatrix",fragShader:o}],P=u(C,"shaders",[]);C.shaders=R.concat(P),C.vertShader||(C.vertShader=A),C.batchSize=1,r.call(this,C),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new c,this.targetBounds=new c,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){v.prototype.boot.call(this);var E=this.shaders,C=this.renderer;this.drawSpriteShader=E[0],this.copyShader=E[1],this.gameShader=E[2],this.colorMatrixShader=E[3],this.fsTarget=new l(C,C.width,C.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var w=new ArrayBuffer(168);this.quadVertexData=w,this.quadVertexViewF32=new Float32Array(w),this.quadVertexBuffer=C.createVertexBuffer(w,this.gl.STATIC_DRAW),this.onResize(C.width,C.height),this.currentShader=this.copyShader,this.set2f("uResolution",C.width,C.height)},onResize:function(E,C){var w=this.quadVertexViewF32;w[1]=C,w[22]=C,w[14]=E,w[28]=E,w[35]=E,w[36]=C},batchQuad:function(E,C,w,A,M,R,P,b,F,I,L,D,O,z,_,X,H,U,G){var N=Math.min(C,A,R,b),W=Math.min(w,M,P,F),V=Math.max(C,A,R,b),$=Math.max(w,M,P,F),j=V-N,k=$-W,Q=this.spriteBounds.setTo(N,W,j,k),et=E?E.preFX.padding:0,at=j+et*2,q=k+et*2,ft=Math.abs(Math.max(at,q)),vt=this.manager.getRenderTarget(ft),Tt=this.targetBounds.setTo(0,0,vt.width,vt.height);g(Tt,Math.round(Q.centerX),Math.round(Q.centerY)),this.tempSprite=E;var ct=this.gl,Ut=this.renderer;Ut.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Ut.width,Ut.height),this.flipProjectionMatrix(!0),E&&(this.onDrawSprite(E,vt),E.preFX.onFX(this));var yt=this.fsTarget;return this.flush(),ct.viewport(0,0,Ut.width,Ut.height),ct.bindFramebuffer(ct.FRAMEBUFFER,yt.framebuffer.webGLFramebuffer),ct.framebufferTexture2D(ct.FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ct.TEXTURE_2D,yt.texture.webGLTexture,0),ct.clearColor(0,0,0,0),ct.clear(ct.COLOR_BUFFER_BIT),this.setTexture2D(G),this.batchVert(C,w,I,L,0,U,z),this.batchVert(A,M,I,O,0,U,X),this.batchVert(R,P,D,O,0,U,H),this.batchVert(C,w,I,L,0,U,z),this.batchVert(R,P,D,O,0,U,H),this.batchVert(b,F,D,L,0,U,_),this.flush(),this.flipProjectionMatrix(!1),ct.activeTexture(ct.TEXTURE0),ct.bindTexture(ct.TEXTURE_2D,vt.texture.webGLTexture),ct.copyTexSubImage2D(ct.TEXTURE_2D,0,0,0,Tt.x,Tt.y,Tt.width,Tt.height),ct.bindFramebuffer(ct.FRAMEBUFFER,null),ct.bindTexture(ct.TEXTURE_2D,null),this.onBatch(E),this.currentShader=this.copyShader,this.onDraw(vt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(E,C,w,A,M,R,P){w===void 0&&(w=!0),A===void 0&&(A=!0),M===void 0&&(M=!1),P===void 0&&(P=this.copyShader);var b=this.gl,F=this.tempSprite;R&&(P=this.colorMatrixShader),this.currentShader=P;var I=this.setVertexBuffer(this.quadVertexBuffer);P.bind(I,!1);var L=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",L.width,L.height),F.preFX.onFXCopy(this),this.onCopySprite(E,C,F),R&&(this.set1fv("uColorMatrix",R.getData()),this.set1f("uAlpha",R.alpha)),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,E.texture.webGLTexture),E.height>C.height)b.viewport(0,0,E.width,E.height),this.setTargetUVs(E,C);else{var D=C.height-E.height;b.viewport(0,D,E.width,E.height),this.resetUVs()}if(b.bindFramebuffer(b.FRAMEBUFFER,C.framebuffer.webGLFramebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,C.texture.webGLTexture,0),w&&(b.clearColor(0,0,0,+!A),b.clear(b.COLOR_BUFFER_BIT)),M){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}b.bufferData(b.ARRAY_BUFFER,this.quadVertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),M&&this.renderer.setBlendMode(O),b.bindFramebuffer(b.FRAMEBUFFER,null)},copy:function(E,C){var w=this.gl;this.set1i("uMainSampler",0),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,E.texture.webGLTexture),w.viewport(0,0,E.width,E.height),this.setUVs(0,0,0,1,1,1,1,0),w.bindFramebuffer(w.FRAMEBUFFER,C.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,C.texture.webGLTexture,0),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.quadVertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null)},blendFrames:function(E,C,w,A,M){this.manager.blendFrames(E,C,w,A,M)},blendFramesAdditive:function(E,C,w,A,M){this.manager.blendFramesAdditive(E,C,w,A,M)},drawToGame:function(E){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(E)},copyToGame:function(E){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(E)},bindAndDraw:function(E){var C=this.gl,w=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(E.texture);var A=this._tempMatrix1.loadIdentity(),M=this.targetBounds.x,R=this.targetBounds.y,P=M+E.width,b=R+E.height,F=A.getX(M,R),I=A.getX(M,b),L=A.getX(P,b),D=A.getX(P,R),O=A.getY(M,R),z=A.getY(M,b),_=A.getY(P,b),X=A.getY(P,R),H=16777215;this.batchVert(F,O,0,0,0,0,H),this.batchVert(I,z,0,1,0,0,H),this.batchVert(L,_,1,1,0,0,H),this.batchVert(F,O,0,0,0,0,H),this.batchVert(L,_,1,1,0,0,H),this.batchVert(D,X,1,0,0,0,H),w.restoreFramebuffer(!1,!0),w.currentFramebuffer||C.viewport(0,0,w.width,w.height),w.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(E){this.drawToGame(E)},setUVs:function(E,C,w,A,M,R,P,b){var F=this.quadVertexViewF32;F[2]=E,F[3]=C,F[9]=w,F[10]=A,F[16]=M,F[17]=R,F[23]=E,F[24]=C,F[30]=M,F[31]=R,F[37]=P,F[38]=b},setTargetUVs:function(E,C){var w=C.height/E.height;w>.5?w=.5-(w-.5):w=.5+(.5-w),this.setUVs(0,w,0,1+w,1,1+w,1,w)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,r.prototype.destroy.call(this),this}});s.exports=y}),81041:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=e(57516),o=new a({Extends:f,initialize:function(r){r.topology=5,r.batchSize=g(r,"batchSize",256),f.call(this,r)}});s.exports=o}),12385:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=e(57516),o=e(45561),u=e(60722),r=e(29100),h=new a({Extends:f,initialize:function(l){l.fragShader=g(l,"fragShader",o),l.vertShader=g(l,"vertShader",u),l.forceZero=!0,f.call(this,l)},boot:function(){r.prototype.boot.call(this);var c=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",c.width,c.height)}});s.exports=h}),7589:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35407),g=e(10312),f=e(83419),o=e(89422),u=e(96293),r=e(36682),h=e(95540),c=e(48247),l=e(49627),p=e(29100),m=new f({Extends:p,initialize:function(y){y.renderTarget=h(y,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),y.vertShader=h(y,"vertShader",l),y.shaders=h(y,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:a},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:u}]),y.attributes=h(y,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),y.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],y.batchSize=1,p.call(this,y),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){p.prototype.boot.call(this);var v=this.shaders,y=this.renderTargets;this.copyShader=v[0],this.addShader=v[1],this.linearShader=v[2],this.colorMatrixShader=v[3],this.fullFrame1=y[0],this.fullFrame2=y[1],this.halfFrame1=y[2],this.halfFrame2=y[3]},copyFrame:function(v,y,E,C,w){E===void 0&&(E=1),C===void 0&&(C=!0),w===void 0&&(w=!0);var A=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",E),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,v.texture.webGLTexture),y?(A.viewport(0,0,y.width,y.height),A.bindFramebuffer(A.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,y.texture.webGLTexture,0)):A.viewport(0,0,v.width,v.height),C&&(w?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blitFrame:function(v,y,E,C,w,A,M){E===void 0&&(E=1),C===void 0&&(C=!0),w===void 0&&(w=!0),A===void 0&&(A=!1),M===void 0&&(M=!1);var R=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",E),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,v.texture.webGLTexture),v.height>y.height)R.viewport(0,0,v.width,v.height),this.setTargetUVs(v,y);else{var P=y.height-v.height;R.viewport(0,P,v.width,v.height)}if(R.bindFramebuffer(R.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,y.texture.webGLTexture,0),C&&(w?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),A){var b=this.renderer.currentBlendMode;this.renderer.setBlendMode(g.ERASE)}M&&this.flipY(),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),A&&this.renderer.setBlendMode(b),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(v,y,E,C,w,A,M,R){M===void 0&&(M=!0),R===void 0&&(R=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,v.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,v.texture.webGLTexture,0),M&&(R?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,y.texture.webGLTexture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,E,C,w,A),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(v){var y=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,v.texture.webGLTexture),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6)},drawFrame:function(v,y,E,C){E===void 0&&(E=!0),C===void 0&&(C=this.colorMatrix);var w=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",C.getData()),this.set1f("uAlpha",C.alpha),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,v.texture.webGLTexture),y?(w.viewport(0,0,y.width,y.height),w.bindFramebuffer(w.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,y.texture.webGLTexture,0)):w.viewport(0,0,v.width,v.height),E?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blendFrames:function(v,y,E,C,w,A){C===void 0&&(C=1),w===void 0&&(w=!0),A===void 0&&(A=this.linearShader);var M=this.gl;this.setShader(A),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",C),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,v.texture.webGLTexture),M.activeTexture(M.TEXTURE1),M.bindTexture(M.TEXTURE_2D,y.texture.webGLTexture),E?(M.bindFramebuffer(M.FRAMEBUFFER,E.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,E.texture.webGLTexture,0),M.viewport(0,0,E.width,E.height)):M.viewport(0,0,v.width,v.height),w?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blendFramesAdditive:function(v,y,E,C,w){this.blendFrames(v,y,E,C,w,this.addShader)},clearFrame:function(v,y){y===void 0&&(y=!0);var E=this.gl;E.viewport(0,0,v.width,v.height),E.bindFramebuffer(E.FRAMEBUFFER,v.framebuffer.webGLFramebuffer),y?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT);var C=this.renderer.currentFramebuffer;E.bindFramebuffer(E.FRAMEBUFFER,C.webGLFramebuffer)},setUVs:function(v,y,E,C,w,A,M,R){var P=this.vertexViewF32;P[2]=v,P[3]=y,P[6]=E,P[7]=C,P[10]=w,P[11]=A,P[14]=v,P[15]=y,P[18]=w,P[19]=A,P[22]=M,P[23]=R},setTargetUVs:function(v,y){var E=y.height/v.height;E>.5?E=.5-(E-.5):E=.5+(.5-E),this.setUVs(0,E,0,1+E,1,1+E,1,E)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});s.exports=m}),36060:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};s.exports=T}),84817:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelineafterflush"}),36712:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelinebeforeflush"}),40285:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelinebind"}),65918:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelineboot"}),92852:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelinedestroy"}),56072:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelinerebind"}),57566:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelineresize"}),77085:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AFTER_FLUSH:e(84817),BEFORE_FLUSH:e(36712),BIND:e(40285),BOOT:e(65918),DESTROY:e(92852),REBIND:e(56072),RESIZE:e(57566)}}),54812:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(99155),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.amount=1},onPreRender:function(u,r){u=this.getController(u),this.set1f("amount",u.amount,r)}});s.exports=o}),67329:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(24400),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(u){u=this.getController(u),this.set1f("strength",u.blurStrength),this.set3fv("color",u.glcolor)},onDraw:function(u){var r=this.getController(),h=this.fullFrame1,c=this.fullFrame2;this.copyFrame(u,c);for(var l=2/u.width*r.offsetX,p=2/u.height*r.offsetY,m=0;m<r.steps;m++)this.set2f("offset",l,0),this.copySprite(u,h),this.set2f("offset",0,p),this.copySprite(h,u);this.blendFrames(c,u,h,r.strength),this.copyToGame(h)}});s.exports=o}),8861:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(41514),f=e(51078),o=e(94328),u=e(84057),r=new a({Extends:u,initialize:function(c){u.call(this,{game:c,shaders:[{name:"Gaussian5",fragShader:g},{name:"Gaussian9",fragShader:f},{name:"Gaussian13",fragShader:o}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(h){var c=this.getController(),l=this.gl,p=this.fullFrame1,m=l.getParameter(l.FRAMEBUFFER_BINDING);this.bind(this.shaders[c.quality]),l.activeTexture(l.TEXTURE0),l.viewport(0,0,h.width,h.height),this.set1i("uMainSampler",0),this.set2f("resolution",h.width,h.height),this.set1f("strength",c.strength),this.set3fv("color",c.glcolor);for(var v=0;v<c.steps;v++)this.set2f("offset",c.x,0),this.copySprite(h,p),this.set2f("offset",0,c.y),this.copySprite(p,h);l.bindFramebuffer(l.FRAMEBUFFER,m),l.bindTexture(l.TEXTURE_2D,null),this.copyToGame(h)}});s.exports=r}),51051:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(90610),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(u,r,h,c){u=this.getController(u),this.set1f("radius",u.radius,r),this.set1f("amount",u.amount,r),this.set1f("contrast",u.contrast,r),this.set1f("strength",u.strength,r),this.set2f("blur",u.blurX,u.blurY,r),this.setBoolean("isTiltShift",u.isTiltShift,r),h&&c&&this.set2f("resolution",h,c,r)},onDraw:function(u){this.set2f("resolution",u.width,u.height),this.bindAndDraw(u)}});s.exports=o}),89428:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(91899),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(u,r,h,c){u=this.getController(u),this.set1f("scale",u.scale,r),this.set1f("feather",u.feather,r),this.set1f("thickness",u.thickness,r),this.set3fv("color",u.glcolor,r),this.set4fv("backgroundColor",u.glcolor2,r),h&&c&&this.set2f("resolution",h,c,r)},onDraw:function(u){this.set2f("resolution",u.width,u.height),this.bindAndDraw(u)}});s.exports=o}),88904:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(84057),f=new a({Extends:g,initialize:function(u){g.call(this,{game:u})},onDraw:function(o){var u=this.fullFrame1;this.controller?this.manager.drawFrame(o,u,!0,this.controller):this.drawFrame(o,u),this.copyToGame(u)}});s.exports=f}),63563:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(47838),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(u){var r=this.game.textures.getFrame(u);r&&(this.glTexture=r.glTexture)},onDraw:function(u){var r=this.getController(),h=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",r.x,r.y),this.bindTexture(r.glTexture,1),this.copySprite(u,h),this.copyToGame(h)}});s.exports=o}),94045:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=e(98656),o=e(84057),u=e(70554),r=new a({Extends:o,initialize:function(c,l){var p=g(l,"quality",.1),m=g(l,"distance",10);o.call(this,{game:c,fragShader:u.setGlowQuality(f,c,p,m)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(h,c,l,p){h=this.getController(h),this.set1f("outerStrength",h.outerStrength,c),this.set1f("innerStrength",h.innerStrength,c),this.set4fv("glowColor",h.glcolor,c),this.setBoolean("knockout",h.knockout,c),l&&p&&this.set2f("resolution",l,p,c)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});s.exports=r}),74088:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(70463),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(u,r){u=this.getController(u),this.set1f("alpha",u.alpha,r),this.set1i("size",u.size,r),this.set3fv("color1",u.glcolor1,r),this.set3fv("color2",u.glcolor2,r),this.set2f("positionFrom",u.fromX,u.fromY,r),this.set2f("positionTo",u.toX,u.toY,r)}});s.exports=o}),99636:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50831),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.amount=1},onPreRender:function(u,r,h,c){u=this.getController(u),this.set1f("amount",u.amount,r),h&&c&&this.set2f("resolution",h,c,r)},onDraw:function(u){this.set2f("resolution",u.width,u.height),this.bindAndDraw(u)}});s.exports=o}),34700:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(92595),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(u,r){u=this.getController(u);var h=u.samples;this.set1i("samples",h,r),this.set1f("intensity",u.intensity,r),this.set1f("decay",u.decay,r),this.set1f("power",u.power/h,r),this.set2f("lightPosition",u.x,u.y,r),this.set4fv("color",u.glcolor,r)}});s.exports=o}),91157:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(72464),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(u,r,h,c){u=this.getController(u),this.setTime("time",r),this.set1f("speed",u.speed,r),this.set1f("lineWidth",u.lineWidth,r),this.set1f("gradient",u.gradient,r),this.setBoolean("reveal",u.reveal,r),h&&c&&this.set2f("resolution",h,c,r)},onDraw:function(u){this.set2f("resolution",u.width,u.height),this.bindAndDraw(u)}});s.exports=o}),27797:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(39249),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(u,r){u=this.getController(u),this.set1f("radius",u.radius,r),this.set1f("strength",u.strength,r),this.set2f("position",u.x,u.y,r)}});s.exports=o}),67603:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(2878),f=e(84057),o=new a({Extends:f,initialize:function(r){f.call(this,{game:r,fragShader:g}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(u,r){u=this.getController(u);var h=u.progress,c=u.wipeWidth,l=u.direction,p=u.axis;this.set4f("config",h,c,l,p,r),this.setBoolean("reveal",u.reveal,r)}});s.exports=o}),58918:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Barrel:e(54812),Bloom:e(67329),Blur:e(8861),Bokeh:e(51051),Circle:e(89428),ColorMatrix:e(88904),Displacement:e(63563),Glow:e(94045),Gradient:e(74088),Pixelate:e(99636),Shadow:e(34700),Shine:e(91157),Vignette:e(27797),Wipe:e(67603)};s.exports=a}),96615:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36060),g=e(79291),f={FX:e(58918),BitmapMaskPipeline:e(31302),Events:e(77085),FXPipeline:e(92651),LightPipeline:e(96569),MobilePipeline:e(56527),MultiPipeline:e(57516),PointLightPipeline:e(43439),PostFXPipeline:e(84057),PreFXPipeline:e(43558),RopePipeline:e(81041),SinglePipeline:e(12385),UtilityPipeline:e(7589)};f=g(!1,f,a),s.exports=f}),35407:(s=>{s.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)}),78908:(s=>{s.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)}),85191:(s=>{s.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)}),96293:(s=>{s.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)}),36682:(s=>{s.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)}),99155:(s=>{s.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)}),24400:(s=>{s.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)}),94328:(s=>{s.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),41514:(s=>{s.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),51078:(s=>{s.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),90610:(s=>{s.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)}),91899:(s=>{s.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)}),47838:(s=>{s.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)}),98656:(s=>{s.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)}),70463:(s=>{s.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)}),50831:(s=>{s.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)}),92595:(s=>{s.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)}),72464:(s=>{s.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)}),39249:(s=>{s.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)}),2878:(s=>{s.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)}),31063:(s=>{s.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)}),48247:(s=>{s.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)}),41214:(s=>{s.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)}),39653:(s=>{s.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)}),62143:(s=>{s.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),47940:(s=>{s.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),98840:(s=>{s.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),44667:(s=>{s.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),4127:(s=>{s.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)}),89924:(s=>{s.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)}),27681:(s=>{s.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)}),49627:(s=>{s.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)}),45561:(s=>{s.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),60722:(s=>{s.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),89350:((s,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AddBlendFrag:e(35407),BitmapMaskFrag:e(78908),BitmapMaskVert:e(85191),ColorMatrixFrag:e(96293),CopyFrag:e(36682),FXBarrelFrag:e(99155),FXBloomFrag:e(24400),FXBlurHighFrag:e(94328),FXBlurLowFrag:e(41514),FXBlurMedFrag:e(51078),FXBokehFrag:e(90610),FXCircleFrag:e(91899),FXDisplacementFrag:e(47838),FXGlowFrag:e(98656),FXGradientFrag:e(70463),FXPixelateFrag:e(50831),FXShadowFrag:e(92595),FXShineFrag:e(72464),FXVignetteFrag:e(39249),FXWipeFrag:e(2878),LightFrag:e(31063),LinearBlendFrag:e(48247),MeshFrag:e(41214),MeshVert:e(39653),MobileFrag:e(62143),MobileVert:e(47940),MultiFrag:e(98840),MultiVert:e(44667),PointLightFrag:e(4127),PointLightVert:e(89924),PostFXFrag:e(27681),QuadVert:e(49627),SingleFrag:e(45561),SingleVert:e(60722)}}),93567:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r){this.webGLAttribLocation=-1,this.gl=o,this.program=u,this.name=r,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var f=this.gl;f.isContextLost()||(this.webGLAttribLocation=f.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});s.exports=g}),26128:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r,h){this.webGLBuffer=null,this.gl=o,this.initialDataOrSize=u,this.bufferType=r,this.bufferUsage=h,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var f=this.gl;if(!f.isContextLost()){var o=this.bufferType,u=f.createBuffer();this.webGLBuffer=u,f.bindBuffer(o,this.webGLBuffer),f.bufferData(o,this.initialDataOrSize,this.bufferUsage),f.bindBuffer(o,null)}}},destroy:function(){var f=this.gl;f.isContextLost()||f.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});s.exports=g}),84387:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},f=new a({initialize:function(u,r,h,c,l){this.webGLFramebuffer=null,this.gl=u,this.width=r,this.height=h,this.renderTexture=c,this.addDepthStencilBuffer=!!l,this.createResource()},createResource:function(){var o=this.gl;if(!o.isContextLost()){var u=this.renderTexture,r=0,h=o.createFramebuffer();if(this.webGLFramebuffer=h,o.bindFramebuffer(o.FRAMEBUFFER,h),u.isRenderTexture=!0,u.isAlphaPremultiplied=!1,o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,u.webGLTexture,0),r=o.checkFramebufferStatus(o.FRAMEBUFFER),r!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(g[r]||r));if(this.addDepthStencilBuffer){var c=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,c),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,this.width,this.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,c)}o.bindFramebuffer(o.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var o=this.gl;if(!o.isContextLost()){o.bindFramebuffer(o.FRAMEBUFFER,this.webGLFramebuffer);var u=o.getFramebufferAttachmentParameter(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);u!==null&&(o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,null,0),o.deleteTexture(u));var r=o.getFramebufferAttachmentParameter(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);r!==null&&o.deleteRenderbuffer(r),o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});s.exports=f}),1482:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r){this.webGLProgram=null,this.gl=o,this.vertexSource=u,this.fragmentSource=r,this.createResource()},createResource:function(){var f=this.gl;if(!f.isContextLost()){var o=f.createProgram(),u=f.createShader(f.VERTEX_SHADER),r=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(u,this.vertexSource),f.shaderSource(r,this.fragmentSource),f.compileShader(u),f.compileShader(r);var h=`Shader failed:
`;if(!f.getShaderParameter(u,f.COMPILE_STATUS))throw new Error("Vertex "+h+f.getShaderInfoLog(u));if(!f.getShaderParameter(r,f.COMPILE_STATUS))throw new Error("Fragment "+h+f.getShaderInfoLog(r));if(f.attachShader(o,u),f.attachShader(o,r),f.linkProgram(o),!f.getProgramParameter(o,f.LINK_STATUS))throw new Error("Link "+h+f.getProgramInfoLog(o));f.useProgram(o),this.webGLProgram=o}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});s.exports=g}),82751:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50030),f=new a({initialize:function(u,r,h,c,l,p,m,v,y,E,C,w,A){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=u,this.mipLevel=r,this.minFilter=h,this.magFilter=c,this.wrapT=l,this.wrapS=p,this.format=m,this.pixels=v,this.width=y,this.height=E,this.pma=C??!0,this.forceSize=!!w,this.flipY=!!A,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var o=this.gl;if(!o.isContextLost()){if(this.pixels instanceof f){this.webGLTexture=this.pixels.webGLTexture;return}var u=o.createTexture();u.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=u,this._processTexture()}},update:function(o,u,r,h,c,l,p,m,v){if(!(u===0||r===0)){this.pixels=o,this.width=u,this.height=r,this.flipY=h,this.wrapS=c,this.wrapT=l,this.minFilter=p,this.magFilter=m,this.format=v;var y=this.gl;y.isContextLost()||this._processTexture()}},_processTexture:function(){var o=this.gl;o.activeTexture(o.TEXTURE0);var u=o.getParameter(o.TEXTURE_BINDING_2D);o.bindTexture(o.TEXTURE_2D,this.webGLTexture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.minFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,this.magFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,this.wrapS),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,this.wrapT),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,this.flipY);var r=this.pixels,h=this.mipLevel,c=this.width,l=this.height,p=this.format,m=!1;if(r==null)o.texImage2D(o.TEXTURE_2D,h,p,c,l,0,p,o.UNSIGNED_BYTE,null),m=g(c,l);else if(r.compressed){c=r.width,l=r.height,m=r.generateMipmap;for(var v=0;v<r.mipmaps.length;v++)o.compressedTexImage2D(o.TEXTURE_2D,v,r.internalFormat,r.mipmaps[v].width,r.mipmaps[v].height,0,r.mipmaps[v].data)}else r instanceof Uint8Array?(o.texImage2D(o.TEXTURE_2D,h,p,c,l,0,p,o.UNSIGNED_BYTE,r),m=g(c,l)):(this.forceSize||(c=r.width,l=r.height),o.texImage2D(o.TEXTURE_2D,h,p,p,o.UNSIGNED_BYTE,r),m=g(c,l));m&&o.generateMipmap(o.TEXTURE_2D),u?o.bindTexture(o.TEXTURE_2D,u):o.bindTexture(o.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(o){this.__SPECTOR_Metadata=o,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=o)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof f||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});s.exports=f}),57183:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r){this.webGLUniformLocation=null,this.gl=o,this.program=u,this.name=r,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var f=this.gl;f.isContextLost()||(this.webGLUniformLocation=f.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});s.exports=g}),9503:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={WebGLAttribLocationWrapper:e(93567),WebGLBufferWrapper:e(26128),WebGLProgramWrapper:e(1482),WebGLTextureWrapper:e(82751),WebGLFramebufferWrapper:e(84387),WebGLUniformLocationWrapper:e(57183)};s.exports=a}),76531:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13560),g=e(83419),f=e(45319),o=e(50792),u=e(97480),r=e(8443),h=e(57811),c=e(74403),l=e(45818),p=e(29747),m=e(87841),v=e(86555),y=e(56583),E=e(26099),C=e(38058),w=new g({Extends:o,initialize:function(M){o.call(this),this.game=M,this.canvas,this.canvasBounds=new m,this.parent=null,this.parentIsWindow=!1,this.parentSize=new v,this.gameSize=new v,this.baseSize=new v,this.displaySize=new v,this.scaleMode=a.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new E(1,1),this.autoRound=!1,this.autoCenter=a.CENTER.NO_CENTER,this.orientation=a.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:p,windowResize:p,fullScreenChange:p,fullScreenError:p}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(r.BOOT,this.boot,this)},boot:function(){var A=this.game;this.canvas=A.canvas,this.fullscreen=A.device.fullscreen;var M=this.scaleMode;M!==a.SCALE_MODE.RESIZE&&M!==a.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(M),M===a.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),A.events.on(r.PRE_STEP,this.step,this),A.events.once(r.READY,this.refresh,this),A.events.once(r.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(A){this.getParent(A),this.getParentBounds();var M=A.width,R=A.height,P=A.scaleMode,b=A.zoom,F=A.autoRound;if(typeof M=="string")if(M.substr(-1)!=="%")M=parseInt(M,10);else{var I=this.parentSize.width;I===0&&(I=window.innerWidth);var L=parseInt(M,10)/100;M=Math.floor(I*L)}if(typeof R=="string")if(R.substr(-1)!=="%")R=parseInt(R,10);else{var D=this.parentSize.height;D===0&&(D=window.innerHeight);var O=parseInt(R,10)/100;R=Math.floor(D*O)}this.scaleMode=P,this.autoRound=F,this.autoCenter=A.autoCenter,this.resizeInterval=A.resizeInterval,F&&(M=Math.floor(M),R=Math.floor(R)),this.gameSize.setSize(M,R),b===a.ZOOM.MAX_ZOOM&&(b=this.getMaxZoom()),this.zoom=b,b!==1&&(this._resetZoom=!0),this.baseSize.setSize(M,R),F&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),A.minWidth>0&&this.displaySize.setMin(A.minWidth*b,A.minHeight*b),A.maxWidth>0&&this.displaySize.setMax(A.maxWidth*b,A.maxHeight*b),this.displaySize.setSize(M,R),(A.snapWidth>0||A.snapHeight>0)&&this.displaySize.setSnap(A.snapWidth,A.snapHeight),this.orientation=l(M,R)},getParent:function(A){var M=A.parent;if(M!==null){if(this.parent=c(M),this.parentIsWindow=this.parent===document.body,A.expandParent&&A.scaleMode!==a.SCALE_MODE.NONE){var R=this.parent.getBoundingClientRect();(this.parentIsWindow||R.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",R=this.parent.getBoundingClientRect(),!this.parentIsWindow&&R.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}A.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=c(A.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var A=this.parentSize,M=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(M.height=h(!0));var R=M.width,P=M.height;if(A.width!==R||A.height!==P)return A.setSize(R,P),!0;if(this.canvas){var b=this.canvasBounds,F=this.canvas.getBoundingClientRect();if(F.x!==b.x||F.y!==b.y)return!0}return!1},lockOrientation:function(A){var M=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return M?M.call(screen,A):!1},setParentSize:function(A,M){return this.parentSize.setSize(A,M),this.refresh()},setGameSize:function(A,M){var R=this.autoRound;R&&(A=Math.floor(A),M=Math.floor(M));var P=this.width,b=this.height;return this.gameSize.resize(A,M),this.baseSize.resize(A,M),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(A/M),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(P,b)},resize:function(A,M){var R=this.zoom,P=this.autoRound;P&&(A=Math.floor(A),M=Math.floor(M));var b=this.width,F=this.height;this.gameSize.resize(A,M),this.baseSize.resize(A,M),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(A*R,M*R),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var I=this.canvas.style,L=A*R,D=M*R;return P&&(L=Math.floor(L),D=Math.floor(D)),(L!==A||D!==M)&&(I.width=L+"px",I.height=D+"px"),this.refresh(b,F)},setZoom:function(A){return this.zoom=A,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(A,M){return A===void 0&&(A=0),M===void 0&&(M=A),this.displaySize.setSnap(A,M),this.refresh()},refresh:function(A,M){A===void 0&&(A=this.width),M===void 0&&(M=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var R=this.game.domContainer;if(R){this.baseSize.setCSS(R);var P=this.canvas.style,b=R.style;b.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",b.marginLeft=P.marginLeft,b.marginTop=P.marginTop}return this.emit(u.RESIZE,this.gameSize,this.baseSize,this.displaySize,A,M),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var A=l(this.width,this.height);A!==this.orientation&&(this.orientation=A,this.emit(u.ORIENTATION_CHANGE,A))}},updateScale:function(){var A=this.canvas.style,M=this.gameSize.width,R=this.gameSize.height,P,b,F=this.zoom,I=this.autoRound;if(this.scaleMode===a.SCALE_MODE.NONE)this.displaySize.setSize(M*F,R*F),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),this._resetZoom&&(A.width=P+"px",A.height=b+"px",this._resetZoom=!1);else if(this.scaleMode===a.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),this.canvas.width=P,this.canvas.height=b;else if(this.scaleMode===a.SCALE_MODE.EXPAND){var L=this.game.config.width,D=this.game.config.height,O=this.parentSize.width,z=this.parentSize.height,_=O/L,X=z/D,H,U;_<X?(H=L,U=_!==0?z/_:D):(H=X!==0?O/X:L,U=D);var G=f(H,this.displaySize.minWidth,this.displaySize.maxWidth),N=f(U,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(G,N),this.gameSize.setSize(G,N),I&&(G=Math.floor(G),N=Math.floor(N)),this.canvas.width=G,this.canvas.height=N;var W=O*(G/H),V=z*(N/U);this.displaySize.setSize(W,V),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),A.width=P+"px",A.height=b+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),A.width=P+"px",A.height=b+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var A=y(this.parentSize.width,this.gameSize.width,0,!0),M=y(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(A,M),1)},updateCenter:function(){var A=this.autoCenter;if(A!==a.CENTER.NO_CENTER){var M=this.canvas,R=M.style,P=M.getBoundingClientRect(),b=P.width,F=P.height,I=Math.floor((this.parentSize.width-b)/2),L=Math.floor((this.parentSize.height-F)/2);A===a.CENTER.CENTER_HORIZONTALLY?L=0:A===a.CENTER.CENTER_VERTICALLY&&(I=0),R.marginLeft=I+"px",R.marginTop=L+"px"}},updateBounds:function(){var A=this.canvasBounds,M=this.canvas.getBoundingClientRect();A.x=M.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),A.y=M.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),A.width=M.width,A.height=M.height},transformX:function(A){return(A-this.canvasBounds.left)*this.displayScale.x},transformY:function(A){return(A-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(A){A===void 0&&(A={navigationUI:"hide"});var M=this.fullscreen;if(!M.available){this.emit(u.FULLSCREEN_UNSUPPORTED);return}if(!M.active){var R=this.getFullscreenTarget();M.keyboard?R[M.request](Element.ALLOW_KEYBOARD_INPUT):R[M.request](A)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(u.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(A){this.removeFullscreenTarget(),this.emit(u.FULLSCREEN_FAILED,A)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var A=document.createElement("div");A.style.margin="0",A.style.padding="0",A.style.width="100%",A.style.height="100%",this.fullscreenTarget=A,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var M=this.canvas.parentNode;M.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var A=this.fullscreenTarget;if(A&&A.parentNode){var M=A.parentNode;M.insertBefore(this.canvas,A),M.removeChild(A)}}},stopFullscreen:function(){var A=this.fullscreen;if(!A.available)return this.emit(u.FULLSCREEN_UNSUPPORTED),!1;A.active&&document[A.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(u.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(A){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(A)},startListeners:function(){var A=this,M=this.domlisteners;if(M.orientationChange=function(){A.updateBounds(),A._checkOrientation=!0,A.dirty=!0,A.refresh()},M.windowResize=function(){A.updateBounds(),A.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",M.orientationChange,!1):window.addEventListener("orientationchange",M.orientationChange,!1),window.addEventListener("resize",M.windowResize,!1),this.fullscreen.available){M.fullScreenChange=function(P){return A.onFullScreenChange(P)},M.fullScreenError=function(P){return A.onFullScreenError(P)};var R=["webkit","moz",""];R.forEach(function(P){document.addEventListener(P+"fullscreenchange",M.fullScreenChange,!1),document.addEventListener(P+"fullscreenerror",M.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",M.fullScreenChange,!1),document.addEventListener("MSFullscreenError",M.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(A,M){A instanceof C||(M=A,A=void 0),M===void 0&&(M=new m);var R=this.baseSize,P=this.parentSize,b=this.canvasBounds,F=this.displayScale,I=b.x>=0?0:-(b.x*F.x),L=b.y>=0?0:-(b.y*F.y),D;P.width>=b.width?D=R.width:D=R.width-(b.width-P.width)*F.x;var O;return P.height>=b.height?O=R.height:O=R.height-(b.height-P.height)*F.y,M.setTo(I,L,D,O),A&&(M.width/=A.zoomX,M.height/=A.zoomY,M.centerX=A.centerX+A.scrollX,M.centerY=A.centerY+A.scrollY),M},step:function(A,M){this.parent&&(this._lastCheck+=M,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var A=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",A.orientationChange,!1):window.removeEventListener("orientationchange",A.orientationChange,!1),window.removeEventListener("resize",A.windowResize,!1);var M=["webkit","moz",""];M.forEach(function(R){document.removeEventListener(R+"fullscreenchange",A.fullScreenChange,!1),document.removeEventListener(R+"fullscreenerror",A.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",A.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",A.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});s.exports=w}),64743:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}}),39218:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}}),81050:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}}),80805:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}}),13560:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={CENTER:e(64743),ORIENTATION:e(39218),SCALE_MODE:e(81050),ZOOM:e(80805)};s.exports=a}),56139:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="enterfullscreen"}),2336:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="fullscreenfailed"}),47412:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="fullscreenunsupported"}),51452:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="leavefullscreen"}),20666:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="orientationchange"}),47945:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resize"}),97480:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ENTER_FULLSCREEN:e(56139),FULLSCREEN_FAILED:e(2336),FULLSCREEN_UNSUPPORTED:e(47412),LEAVE_FULLSCREEN:e(51452),ORIENTATION_CHANGE:e(20666),RESIZE:e(47945)}}),93364:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),g=e(13560),f={Center:e(64743),Events:e(97480),Orientation:e(39218),ScaleManager:e(76531),ScaleModes:e(81050),Zoom:e(80805)};f=a(!1,f,g.CENTER),f=a(!1,f,g.ORIENTATION),f=a(!1,f,g.SCALE_MODE),f=a(!1,f,g.ZOOM),s.exports=f}),27397:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),g=e(35355),f=function(o){var u=o.game.config.defaultPhysicsSystem,r=a(o.settings,"physics",!1);if(!(!u&&!r)){var h=[];if(u&&h.push(g(u+"Physics")),r)for(var c in r)c=g(c.concat("Physics")),h.indexOf(c)===-1&&h.push(c);return h}};s.exports=f}),52106:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),g=function(f){var o=f.plugins.getDefaultScenePlugins(),u=a(f.settings,"plugins",!1);return Array.isArray(u)?u:o||[]};s.exports=g}),87033:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};s.exports=T}),97482:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(2368),f=new a({initialize:function(u){this.sys=new g(this,u),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});s.exports=f}),60903:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(89993),f=e(44594),o=e(8443),u=e(35154),r=e(54899),h=e(29747),c=e(97482),l=e(2368),p=new a({initialize:function(v,y){if(this.game=v,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,y){Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++)this._pending.push({key:"default",scene:y[E],autoStart:E===0,data:{}})}v.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new c),this.game.events.emit(o.SYSTEM_READY,this.systemScene,this);var m,v,y,E;for(m=0;m<this._pending.length;m++){v=this._pending[m],y=v.key,E=v.scene;var C;E instanceof c?C=this.createSceneFromInstance(y,E):typeof E=="object"?C=this.createSceneFromObject(y,E):typeof E=="function"&&(C=this.createSceneFromFunction(y,E)),y=C.sys.settings.key,this.keys[y]=C,this.scenes.push(C),this._data[y]&&(C.sys.settings.data=this._data[y].data,this._data[y].autoStart&&(v.autoStart=!0)),(v.autoStart||C.sys.settings.active)&&this._start.push(y)}for(this._pending.length=0,this._data={},this.isBooted=!0,m=0;m<this._start.length;m++)v=this._start[m],this.start(v);this._start.length=0}},processQueue:function(){var m=this._pending.length,v=this._queue.length;if(!(m===0&&v===0)){var y,E;if(m){for(y=0;y<m;y++)E=this._pending[y],this.add(E.key,E.scene,E.autoStart,E.data);for(y=0;y<this._start.length;y++)E=this._start[y],this.start(E);this._start.length=0,this._pending.length=0}for(y=0;y<this._queue.length;y++)E=this._queue[y],this[E.op](E.keyA,E.keyB,E.data);this._queue.length=0}},add:function(m,v,y,E){if(y===void 0&&(y=!1),E===void 0&&(E={}),this.isProcessing||!this.isBooted)return this._pending.push({key:m,scene:v,autoStart:y,data:E}),this.isBooted||(this._data[m]={data:E}),null;m=this.getKey(m,v);var C;return v instanceof c?C=this.createSceneFromInstance(m,v):typeof v=="object"?(v.key=m,C=this.createSceneFromObject(m,v)):typeof v=="function"&&(C=this.createSceneFromFunction(m,v)),C.sys.settings.data=E,m=C.sys.settings.key,this.keys[m]=C,this.scenes.push(C),(y||C.sys.settings.active)&&(this._pending.length?this._start.push(m):this.start(m)),C},remove:function(m){if(this.isProcessing)return this.queueOp("remove",m);var v=this.getScene(m);if(!v||v.sys.isTransitioning())return this;var y=this.scenes.indexOf(v),E=v.sys.settings.key;return y>-1&&(delete this.keys[E],this.scenes.splice(y,1),this._start.indexOf(E)>-1&&(y=this._start.indexOf(E),this._start.splice(y,1)),v.sys.destroy()),this},bootScene:function(m){var v=m.sys,y=v.settings;v.sceneUpdate=h,m.init&&(m.init.call(m,y.data),y.status=g.INIT,y.isTransition&&v.events.emit(f.TRANSITION_INIT,y.transitionFrom,y.transitionDuration));var E;v.load&&(E=v.load,E.reset()),E&&m.preload?(m.preload.call(m),y.status=g.LOADING,E.once(r.COMPLETE,this.loadComplete,this),E.start()):this.create(m)},loadComplete:function(m){this.create(m.scene)},payloadComplete:function(m){this.bootScene(m.scene)},update:function(m,v){this.processQueue(),this.isProcessing=!0;for(var y=this.scenes.length-1;y>=0;y--){var E=this.scenes[y].sys;E.settings.status>g.START&&E.settings.status<=g.RUNNING&&E.step(m,v),E.scenePlugin&&E.scenePlugin._target&&E.scenePlugin.step(m,v)}},render:function(m){for(var v=0;v<this.scenes.length;v++){var y=this.scenes[v].sys;y.settings.visible&&y.settings.status>=g.LOADING&&y.settings.status<g.SLEEPING&&y.render(m)}this.isProcessing=!1},create:function(m){var v=m.sys,y=v.settings;m.create&&(y.status=g.CREATING,m.create.call(m,y.data),y.status===g.DESTROYED)||(y.isTransition&&v.events.emit(f.TRANSITION_START,y.transitionFrom,y.transitionDuration),m.update&&(v.sceneUpdate=m.update),y.status=g.RUNNING,v.events.emit(f.CREATE,m))},createSceneFromFunction:function(m,v){var y=new v;if(y instanceof c){var E=y.sys.settings.key;if(E!==""&&(m=E),this.keys.hasOwnProperty(m))throw new Error("Cannot add Scene with duplicate key: "+m);return this.createSceneFromInstance(m,y)}else return y.sys=new l(y),y.sys.settings.key=m,y.sys.init(this.game),y},createSceneFromInstance:function(m,v){var y=v.sys.settings.key;return y===""&&(v.sys.settings.key=m),v.sys.init(this.game),v},createSceneFromObject:function(m,v){var y=new c(v),E=y.sys.settings.key;E!==""?m=E:y.sys.settings.key=m,y.sys.init(this.game);for(var C=["init","preload","create","update","render"],w=0;w<C.length;w++){var A=u(v,C[w],null);A&&(y[C[w]]=A)}if(v.hasOwnProperty("extend")){for(var M in v.extend)if(v.extend.hasOwnProperty(M)){var R=v.extend[M];M==="data"&&y.hasOwnProperty("data")&&typeof R=="object"?y.data.merge(R):M!=="sys"&&(y[M]=R)}}return y},getKey:function(m,v){if(m||(m="default"),typeof v=="function")return m;if(v instanceof c?m=v.sys.settings.key:typeof v=="object"&&v.hasOwnProperty("key")&&(m=v.key),this.keys.hasOwnProperty(m))throw new Error("Cannot add Scene with duplicate key: "+m);return m},getScenes:function(m,v){m===void 0&&(m=!0),v===void 0&&(v=!1);for(var y=[],E=this.scenes,C=0;C<E.length;C++){var w=E[C];w&&(!m||m&&w.sys.isActive())&&y.push(w)}return v?y.reverse():y},getScene:function(m){if(typeof m=="string"){if(this.keys[m])return this.keys[m]}else for(var v=0;v<this.scenes.length;v++)if(m===this.scenes[v])return m;return null},isActive:function(m){var v=this.getScene(m);return v?v.sys.isActive():null},isPaused:function(m){var v=this.getScene(m);return v?v.sys.isPaused():null},isVisible:function(m){var v=this.getScene(m);return v?v.sys.isVisible():null},isSleeping:function(m){var v=this.getScene(m);return v?v.sys.isSleeping():null},pause:function(m,v){var y=this.getScene(m);return y&&y.sys.pause(v),this},resume:function(m,v){var y=this.getScene(m);return y&&y.sys.resume(v),this},sleep:function(m,v){var y=this.getScene(m);return y&&!y.sys.isTransitioning()&&y.sys.sleep(v),this},wake:function(m,v){var y=this.getScene(m);return y&&y.sys.wake(v),this},run:function(m,v){var y=this.getScene(m);if(!y){for(var E=0;E<this._pending.length;E++)if(this._pending[E].key===m){this.queueOp("start",m,v);break}return this}y.sys.isSleeping()?y.sys.wake(v):y.sys.isPaused()?y.sys.resume(v):this.start(m,v)},start:function(m,v){if(!this.isBooted)return this._data[m]={autoStart:!0,data:v},this;var y=this.getScene(m);if(!y)return console.warn("Scene key not found: "+m),this;var E=y.sys,C=E.settings.status;if(C>=g.START&&C<=g.CREATING)return this;if(C>=g.RUNNING&&C<=g.SLEEPING)E.shutdown(),E.sceneUpdate=h,E.start(v);else{E.sceneUpdate=h,E.start(v);var w;if(E.load&&(w=E.load),w&&E.settings.hasOwnProperty("pack")&&(w.reset(),w.addPack({payload:E.settings.pack})))return E.settings.status=g.LOADING,w.once(r.COMPLETE,this.payloadComplete,this),w.start(),this}return this.bootScene(y),this},stop:function(m,v){var y=this.getScene(m);if(y&&!y.sys.isTransitioning()&&y.sys.settings.status!==g.SHUTDOWN){var E=y.sys.load;E&&(E.off(r.COMPLETE,this.loadComplete,this),E.off(r.COMPLETE,this.payloadComplete,this)),y.sys.shutdown(v)}return this},switch:function(m,v,y){var E=this.getScene(m),C=this.getScene(v);return E&&C&&E!==C&&(this.sleep(m),this.isSleeping(v)?this.wake(v,y):this.start(v,y)),this},getAt:function(m){return this.scenes[m]},getIndex:function(m){var v=this.getScene(m);return this.scenes.indexOf(v)},bringToTop:function(m){if(this.isProcessing)return this.queueOp("bringToTop",m);var v=this.getIndex(m),y=this.scenes;if(v!==-1&&v<y.length){var E=this.getScene(m);y.splice(v,1),y.push(E)}return this},sendToBack:function(m){if(this.isProcessing)return this.queueOp("sendToBack",m);var v=this.getIndex(m);if(v!==-1&&v>0){var y=this.getScene(m);this.scenes.splice(v,1),this.scenes.unshift(y)}return this},moveDown:function(m){if(this.isProcessing)return this.queueOp("moveDown",m);var v=this.getIndex(m);if(v>0){var y=v-1,E=this.getScene(m),C=this.getAt(y);this.scenes[v]=C,this.scenes[y]=E}return this},moveUp:function(m){if(this.isProcessing)return this.queueOp("moveUp",m);var v=this.getIndex(m);if(v<this.scenes.length-1){var y=v+1,E=this.getScene(m),C=this.getAt(y);this.scenes[v]=C,this.scenes[y]=E}return this},moveAbove:function(m,v){if(m===v)return this;if(this.isProcessing)return this.queueOp("moveAbove",m,v);var y=this.getIndex(m),E=this.getIndex(v);if(y!==-1&&E!==-1&&E<y){var C=this.getAt(E);this.scenes.splice(E,1),this.scenes.splice(y+(E>y),0,C)}return this},moveBelow:function(m,v){if(m===v)return this;if(this.isProcessing)return this.queueOp("moveBelow",m,v);var y=this.getIndex(m),E=this.getIndex(v);if(y!==-1&&E!==-1&&E>y){var C=this.getAt(E);this.scenes.splice(E,1),y===0?this.scenes.unshift(C):this.scenes.splice(y-(E<y),0,C)}return this},queueOp:function(m,v,y,E){return this._queue.push({op:m,keyA:v,keyB:y,data:E}),this},swapPosition:function(m,v){if(m===v)return this;if(this.isProcessing)return this.queueOp("swapPosition",m,v);var y=this.getIndex(m),E=this.getIndex(v);if(y!==E&&y!==-1&&E!==-1){var C=this.getAt(y);this.scenes[y]=this.scenes[E],this.scenes[E]=C}return this},dump:function(){for(var m=[],v=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],y=0;y<this.scenes.length;y++){var E=this.scenes[y].sys,C=E.settings.visible&&(E.settings.status===g.RUNNING||E.settings.status===g.PAUSED)?"[*] ":"[-] ";C+=E.settings.key+" ("+v[E.settings.status]+")",m.push(C)}console.log(m.join(`
`))},destroy:function(){for(var m=0;m<this.scenes.length;m++){var v=this.scenes[m].sys;v.destroy()}this.systemScene.sys.destroy(),this.update=h,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});s.exports=p}),52209:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(44594),o=e(95540),u=e(37277),r=new g({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(f.BOOT,this.boot,this),c.sys.events.on(f.START,this.pluginStart,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(f.SHUTDOWN,this.shutdown,this)},start:function(h,c){return h===void 0&&(h=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",h,c),this},restart:function(h){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,h),this},transition:function(h){h===void 0&&(h={});var c=o(h,"target",!1),l=this.manager.getScene(c);if(!c||!this.checkValidTransition(l))return!1;var p=o(h,"duration",1e3);this._elapsed=0,this._target=l,this._duration=p,this._willSleep=o(h,"sleep",!1),this._willRemove=o(h,"remove",!1);var m=o(h,"onUpdate",null);m&&(this._onUpdate=m,this._onUpdateScope=o(h,"onUpdateScope",this.scene));var v=o(h,"allowInput",!1);this.settings.transitionAllowInput=v;var y=l.sys.settings;y.isTransition=!0,y.transitionFrom=this.scene,y.transitionDuration=p,y.transitionAllowInput=v,o(h,"moveAbove",!1)?this.manager.moveAbove(this.key,c):o(h,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),l.sys.isSleeping()?l.sys.wake(o(h,"data")):this.manager.start(c,o(h,"data"));var E=o(h,"onStart",null),C=o(h,"onStartScope",this.scene);return E&&E.call(C,this.scene,l,p),this.systems.events.emit(f.TRANSITION_OUT,l,p),!0},checkValidTransition:function(h){return!(!h||h.sys.isActive()||h.sys.isTransitioning()||h===this.scene||this.systems.isTransitioning())},step:function(h,c){this._elapsed+=c,this.transitionProgress=a(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var h=this._target.sys,c=this._target.sys.settings;h.events.emit(f.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(h,c,l,p){return this.manager.add(h,c,l,p)},launch:function(h,c){return h&&h!==this.key&&this.manager.queueOp("start",h,c),this},run:function(h,c){return h&&h!==this.key&&this.manager.queueOp("run",h,c),this},pause:function(h,c){return h===void 0&&(h=this.key),this.manager.queueOp("pause",h,c),this},resume:function(h,c){return h===void 0&&(h=this.key),this.manager.queueOp("resume",h,c),this},sleep:function(h,c){return h===void 0&&(h=this.key),this.manager.queueOp("sleep",h,c),this},wake:function(h,c){return h===void 0&&(h=this.key),this.manager.queueOp("wake",h,c),this},switch:function(h,c){return h!==this.key&&this.manager.queueOp("switch",this.key,h,c),this},stop:function(h,c){return h===void 0&&(h=this.key),this.manager.queueOp("stop",h,c),this},setActive:function(h,c,l){c===void 0&&(c=this.key);var p=this.manager.getScene(c);return p&&p.sys.setActive(h,l),this},setVisible:function(h,c){c===void 0&&(c=this.key);var l=this.manager.getScene(c);return l&&l.sys.setVisible(h),this},isSleeping:function(h){return h===void 0&&(h=this.key),this.manager.isSleeping(h)},isActive:function(h){return h===void 0&&(h=this.key),this.manager.isActive(h)},isPaused:function(h){return h===void 0&&(h=this.key),this.manager.isPaused(h)},isVisible:function(h){return h===void 0&&(h=this.key),this.manager.isVisible(h)},swapPosition:function(h,c){return c===void 0&&(c=this.key),h!==c&&this.manager.swapPosition(h,c),this},moveAbove:function(h,c){return c===void 0&&(c=this.key),h!==c&&this.manager.moveAbove(h,c),this},moveBelow:function(h,c){return c===void 0&&(c=this.key),h!==c&&this.manager.moveBelow(h,c),this},remove:function(h){return h===void 0&&(h=this.key),this.manager.remove(h),this},moveUp:function(h){return h===void 0&&(h=this.key),this.manager.moveUp(h),this},moveDown:function(h){return h===void 0&&(h=this.key),this.manager.moveDown(h),this},bringToTop:function(h){return h===void 0&&(h=this.key),this.manager.bringToTop(h),this},sendToBack:function(h){return h===void 0&&(h=this.key),this.manager.sendToBack(h),this},get:function(h){return this.manager.getScene(h)},getStatus:function(h){var c=this.manager.getScene(h);if(c)return c.sys.getStatus()},getIndex:function(h){return h===void 0&&(h=this.key),this.manager.getIndex(h)},shutdown:function(){var h=this.systems.events;h.off(f.SHUTDOWN,this.shutdown,this),h.off(f.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});u.register("ScenePlugin",r,"scenePlugin"),s.exports=r}),55681:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89993),g=e(35154),f=e(46975),o=e(87033),u={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:a.PENDING,key:g(r,"key",""),active:g(r,"active",!1),visible:g(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:g(r,"pack",!1),cameras:g(r,"cameras",null),map:g(r,"map",f(o,g(r,"mapAdd",{}))),physics:g(r,"physics",{}),loader:g(r,"loader",{}),plugins:g(r,"plugins",!1),input:g(r,"input",{})}}};s.exports=u}),2368:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(89993),f=e(42363),o=e(44594),u=e(27397),r=e(52106),h=e(29747),c=e(55681),l=new a({initialize:function(m,v){this.scene=m,this.game,this.renderer,this.config=v,this.settings=c.create(v),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=h},init:function(p){this.settings.status=g.INIT,this.sceneUpdate=h,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var m=p.plugins;this.plugins=m,m.addToScene(this,f.Global,[f.CoreScene,r(this),u(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(p,m){var v=this.events;v.emit(o.PRE_UPDATE,p,m),v.emit(o.UPDATE,p,m),this.sceneUpdate.call(this.scene,p,m),v.emit(o.POST_UPDATE,p,m)},render:function(p){var m=this.displayList;m.depthSort(),this.events.emit(o.PRE_RENDER,p),this.cameras.render(p,m),this.events.emit(o.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var m=this.settings,v=this.getStatus();return v!==g.CREATING&&v!==g.RUNNING?console.warn("Cannot pause non-running Scene",m.key):this.settings.active&&(m.status=g.PAUSED,m.active=!1,this.events.emit(o.PAUSE,this,p)),this},resume:function(p){var m=this.events,v=this.settings;return this.settings.active||(v.status=g.RUNNING,v.active=!0,m.emit(o.RESUME,this,p)),this},sleep:function(p){var m=this.settings,v=this.getStatus();return v!==g.CREATING&&v!==g.RUNNING?console.warn("Cannot sleep non-running Scene",m.key):(m.status=g.SLEEPING,m.active=!1,m.visible=!1,this.events.emit(o.SLEEP,this,p)),this},wake:function(p){var m=this.events,v=this.settings;return v.status=g.RUNNING,v.active=!0,v.visible=!0,m.emit(o.WAKE,this,p),v.isTransition&&m.emit(o.TRANSITION_WAKE,v.transitionFrom,v.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var p=this.settings.status;return p>g.PENDING&&p<=g.RUNNING},isSleeping:function(){return this.settings.status===g.SLEEPING},isActive:function(){return this.settings.status===g.RUNNING},isPaused:function(){return this.settings.status===g.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,m){return p?this.resume(m):this.pause(m)},start:function(p){var m=this.events,v=this.settings;p&&(v.data=p),v.status=g.START,v.active=!0,v.visible=!0,m.emit(o.START,this),m.emit(o.READY,this,p)},shutdown:function(p){var m=this.events,v=this.settings;m.off(o.TRANSITION_INIT),m.off(o.TRANSITION_START),m.off(o.TRANSITION_COMPLETE),m.off(o.TRANSITION_OUT),v.status=g.SHUTDOWN,v.active=!1,v.visible=!1,m.emit(o.SHUTDOWN,this,p)},destroy:function(){var p=this.events,m=this.settings;m.status=g.DESTROYED,m.active=!1,m.visible=!1,p.emit(o.DESTROY,this),p.removeAllListeners();for(var v=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],y=0;y<v.length;y++)this[v[y]]=null}});s.exports=l}),89993:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};s.exports=T}),69830:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addedtoscene"}),7919:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="boot"}),46763:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="create"}),11763:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),71555:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),36735:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postupdate"}),3809:(s=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prerender"}),90716:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="preupdate"}),58262:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="ready"}),91633:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removedfromscene"}),10319:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="render"}),87132:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),81961:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="shutdown"}),90194:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="sleep"}),6265:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),33178:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitioncomplete"}),43063:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitioninit"}),11259:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitionout"}),61611:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitionstart"}),45209:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitionwake"}),22966:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="update"}),21747:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="wake"}),44594:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADDED_TO_SCENE:e(69830),BOOT:e(7919),CREATE:e(46763),DESTROY:e(11763),PAUSE:e(71555),POST_UPDATE:e(36735),PRE_RENDER:e(3809),PRE_UPDATE:e(90716),READY:e(58262),REMOVED_FROM_SCENE:e(91633),RENDER:e(10319),RESUME:e(87132),SHUTDOWN:e(81961),SLEEP:e(90194),START:e(6265),TRANSITION_COMPLETE:e(33178),TRANSITION_INIT:e(43063),TRANSITION_OUT:e(11259),TRANSITION_START:e(61611),TRANSITION_WAKE:e(45209),UPDATE:e(22966),WAKE:e(21747)}}),62194:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89993),g=e(79291),f={Events:e(44594),GetPhysicsPlugins:e(27397),GetScenePlugins:e(52106),SceneManager:e(60903),ScenePlugin:e(52209),Settings:e(55681),Systems:e(2368)};f=g(!1,f,a),s.exports=f}),30341:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50792),f=e(14463),o=e(79291),u=e(29747),r=new a({Extends:g,initialize:function(c,l,p){g.call(this),this.manager=c,this.key=l,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,p),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(console.error("addMarker "+h.name+" already exists in Sound"),!1):(h=o(!0,{name:"",start:0,duration:this.totalDuration-(h.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},h),this.markers[h.name]=h,!0)},updateMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(this.markers[h.name]=o(!0,this.markers[h.name],h),!0):(console.warn("Audio Marker: "+h.name+" missing in Sound: "+this.key),!1)},removeMarker:function(h){var c=this.markers[h];return c?(this.markers[h]=null,c):null},play:function(h,c){if(h===void 0&&(h=""),typeof h=="object"&&(c=h,h=""),typeof h!="string")return!1;if(!h)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[h])return console.warn("Marker: "+h+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[h],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:u,calculateRate:function(){var h=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,l=Math.pow(h,c);this.totalRate=this.currentConfig.rate*this.manager.rate*l},destroy:function(){this.pendingRemove||(this.stop(),this.emit(f.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});s.exports=r}),85034:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(41786),f=e(50792),o=e(14463),u=e(8443),r=e(46710),h=e(58731),c=e(29747),l=e(26099),p=new a({Extends:f,initialize:function(v){f.call(this),this.game=v,this.jsonCache=v.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new l;var y=v.events;y.on(u.BLUR,this.onGameBlur,this),y.on(u.FOCUS,this.onGameFocus,this),y.on(u.PRE_STEP,this.update,this),y.once(u.DESTROY,this.destroy,this)},add:c,addAudioSprite:function(m,v){v===void 0&&(v={});var y=this.add(m,v);y.spritemap=this.jsonCache.get(m).spritemap;for(var E in y.spritemap)if(y.spritemap.hasOwnProperty(E)){var C=g(v),w=y.spritemap[E];C.loop=w.hasOwnProperty("loop")?w.loop:!1,y.addMarker({name:E,start:w.start,duration:w.end-w.start,config:C})}return y},get:function(m){return h(this.sounds,"key",m)},getAll:function(m){return m?r(this.sounds,"key",m):r(this.sounds)},getAllPlaying:function(){return r(this.sounds,"isPlaying",!0)},play:function(m,v){var y=this.add(m);return y.once(o.COMPLETE,y.destroy,y),v?v.name?(y.addMarker(v),y.play(v.name)):y.play(v):y.play()},playAudioSprite:function(m,v,y){var E=this.addAudioSprite(m);return E.once(o.COMPLETE,E.destroy,E),E.play(v,y)},remove:function(m){var v=this.sounds.indexOf(m);return v!==-1?(m.destroy(),this.sounds.splice(v,1),!0):!1},removeAll:function(){this.sounds.forEach(function(m){m.destroy()}),this.sounds.length=0},removeByKey:function(m){for(var v=0,y=this.sounds.length-1;y>=0;y--){var E=this.sounds[y];E.key===m&&(E.destroy(),this.sounds.splice(y,1),v++)}return v},pauseAll:function(){this.forEachActiveSound(function(m){m.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(m){m.resume()}),this.emit(o.RESUME_ALL,this)},setListenerPosition:c,stopAll:function(){this.forEachActiveSound(function(m){m.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(m){var v=0;return this.getAll(m).forEach(function(y){y.stop()&&v++}),v},isPlaying:function(m){var v=this.sounds,y=v.length-1,E;if(m===void 0){for(;y>=0;y--)if(E=this.sounds[y],E.isPlaying)return!0}else for(;y>=0;y--)if(E=this.sounds[y],E.key===m&&E.isPlaying)return!0;return!1},unlock:c,onBlur:c,onFocus:c,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(m,v){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var y=this.sounds.length-1;y>=0;y--)this.sounds[y].pendingRemove&&this.sounds.splice(y,1);this.sounds.forEach(function(E){E.update(m,v)})},destroy:function(){this.game.events.off(u.BLUR,this.onGameBlur,this),this.game.events.off(u.FOCUS,this.onGameFocus,this),this.game.events.off(u.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(m,v){var y=this;this.sounds.forEach(function(E,C){E&&!E.pendingRemove&&m.call(v||y,E,C,y.sounds)})},setRate:function(m){return this.rate=m,this},rate:{get:function(){return this._rate},set:function(m){this._rate=m,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(o.GLOBAL_RATE,this,m)}},setDetune:function(m){return this.detune=m,this},detune:{get:function(){return this._detune},set:function(m){this._detune=m,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,m)}}});s.exports=p}),14747:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33684),g=e(25960),f=e(57490),o={create:function(u){var r=u.config.audio,h=u.device.audio;return r.noAudio||!h.webAudio&&!h.audioData?new g(u):h.webAudio&&!r.disableWebAudio?new f(u):new a(u)}};s.exports=o}),19723:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),98882:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="decodedall"}),57506:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="decoded"}),73146:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),11305:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="detune"}),40577:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="detune"}),30333:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="mute"}),20394:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="rate"}),21802:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="volume"}),1299:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="looped"}),99190:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="loop"}),97125:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="mute"}),89259:(s=>{/**
 * @author       pi-kei
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pan"}),79986:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pauseall"}),17586:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),19618:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="play"}),42306:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="rate"}),10387:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resumeall"}),48959:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),9960:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="seek"}),19180:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stopall"}),98328:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stop"}),50401:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="unlocked"}),52498:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="volume"}),14463:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={COMPLETE:e(19723),DECODED:e(57506),DECODED_ALL:e(98882),DESTROY:e(73146),DETUNE:e(11305),GLOBAL_DETUNE:e(40577),GLOBAL_MUTE:e(30333),GLOBAL_RATE:e(20394),GLOBAL_VOLUME:e(21802),LOOP:e(99190),LOOPED:e(1299),MUTE:e(97125),PAN:e(89259),PAUSE_ALL:e(79986),PAUSE:e(17586),PLAY:e(19618),RATE:e(42306),RESUME_ALL:e(10387),RESUME:e(48959),SEEK:e(9960),STOP_ALL:e(19180),STOP:e(98328),UNLOCKED:e(50401),VOLUME:e(52498)}}),64895:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),g=e(83419),f=e(14463),o=e(45319),u=new g({Extends:a,initialize:function(h,c,l){if(l===void 0&&(l={}),this.tags=h.game.cache.audio.get(c),!this.tags)throw new Error('No cached audio asset with key "'+c);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,a.call(this,h,c,l)},play:function(r,h){return this.manager.isLocked(this,"play",[r,h])||!a.prototype.play.call(this,r,h)||!this.pickAndPlayAudioTag()?!1:(this.emit(f.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(f.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!a.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(f.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!a.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(f.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,h=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),h===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+h*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var h=this.tags[r];if(h.dataset.used==="false")return h.dataset.used="true",this.audio=h,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(p){p.key===this.key&&p.audio&&c.push(p)},this),c.sort(function(p,m){return p.loop===m.loop?m.seek/m.duration-p.seek/p.duration:p.loop?1:-1});var l=c[0];return this.audio=l.audio,l.reset(),l.audio=null,l.startTime=0,l.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(h){console.warn(h)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){a.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var h=this.currentMarker?this.currentMarker.start:0,c=h+this.duration,l=this.audio.currentTime;if(this.currentConfig.loop)l>=c-this.manager.loopEndOffset?(this.audio.currentTime=h+Math.max(0,l-c),l=this.audio.currentTime):l<h&&(this.audio.currentTime+=h,l=this.audio.currentTime),l<this.previousTime&&this.emit(f.LOOPED,this);else if(l>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(f.COMPLETE,this);return}this.previousTime=l}},destroy:function(){a.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){a.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(f.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(f.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,f.RATE,r)&&(this.calculateRate(),this.emit(f.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,f.DETUNE,r)&&(this.calculateRate(),this.emit(f.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(f.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(f.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(f.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});s.exports=u}),33684:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85034),g=e(83419),f=e(14463),o=e(64895),u=new g({Extends:a,initialize:function(h){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,a.call(this,h)},add:function(r,h){var c=new o(this,r,h);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(p,m){for(var v=0;v<m.length;v++)if(m[v].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var h=!1,c=function(){h=!0},l=function(){if(h){h=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",l);var p=[];if(r.game.cache.audio.entries.each(function(v,y){for(var E=0;E<y.length;E++){var C=y[E];C.dataset.locked==="true"&&p.push(C)}return!0}),p.length!==0){var m=p[p.length-1];m.oncanplaythrough=function(){m.oncanplaythrough=null,p.forEach(function(v){v.dataset.locked="false"}),r.unlocked=!0},p.forEach(function(v){v.load()})}};this.once(f.UNLOCKED,function(){for(this.forEachActiveSound(function(m){m.currentMarker===null&&m.duration===0&&(m.duration=m.tags[0].duration),m.totalDuration=m.tags[0].duration});this.lockedActionsQueue.length;){var p=this.lockedActionsQueue.shift();p.sound[p.prop].apply?p.sound[p.prop].apply(p.sound,p.value||[]):p.sound[p.prop]=p.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",l,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){a.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,h,c){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:h,value:c}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(h){h.updateMute()}),this.emit(f.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(h){h.updateVolume()}),this.emit(f.GLOBAL_VOLUME,this,r)}}});s.exports=u}),23717:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={SoundManagerCreator:e(14747),Events:e(14463),BaseSound:e(30341),BaseSoundManager:e(85034),WebAudioSound:e(71741),WebAudioSoundManager:e(57490),HTML5AudioSound:e(64895),HTML5AudioSoundManager:e(33684),NoAudioSound:e(4603),NoAudioSoundManager:e(25960)}}),4603:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),g=e(83419),f=e(50792),o=e(79291),u=e(29747),r=function(){return!1},h=function(){return null},c=function(){return this},l=new g({Extends:f,initialize:function(m,v,y){y===void 0&&(y={}),f.call(this),this.manager=m,this.key=v,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},y),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:r,updateMarker:r,removeMarker:h,play:r,pause:r,resume:r,stop:r,setMute:c,setVolume:c,setRate:c,setDetune:c,setSeek:c,setLoop:c,setPan:c,applyConfig:h,resetConfig:h,update:u,calculateRate:h,destroy:function(){a.prototype.destroy.call(this)}});s.exports=l}),25960:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85034),g=e(83419),f=e(50792),o=e(4603),u=e(29747),r=new g({Extends:f,initialize:function(c){f.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(h,c){var l=new o(this,h,c);return this.sounds.push(l),l},addAudioSprite:function(h,c){var l=this.add(h,c);return l.spritemap={},l},get:function(h){return a.prototype.get.call(this,h)},getAll:function(h){return a.prototype.getAll.call(this,h)},play:function(h,c){return!1},playAudioSprite:function(h,c,l){return!1},remove:function(h){return a.prototype.remove.call(this,h)},removeAll:function(){return a.prototype.removeAll.call(this)},removeByKey:function(h){return a.prototype.removeByKey.call(this,h)},stopByKey:function(h){return a.prototype.stopByKey.call(this,h)},onBlur:u,onFocus:u,onGameBlur:u,onGameFocus:u,pauseAll:u,resumeAll:u,stopAll:u,update:u,setRate:u,setDetune:u,setMute:u,setVolume:u,unlock:u,forEachActiveSound:function(h,c){a.prototype.forEachActiveSound.call(this,h,c)},destroy:function(){a.prototype.destroy.call(this)}});s.exports=r}),71741:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),g=e(83419),f=e(14463),o=e(95540),u=new g({Extends:a,initialize:function(h,c,l){if(l===void 0&&(l={}),this.audioBuffer=h.game.cache.audio.get(c),!this.audioBuffer)throw new Error('Audio key "'+c+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=h.context.createGain(),this.volumeNode=h.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),h.context.createPanner&&(this.spatialNode=h.context.createPanner(),this.volumeNode.connect(this.spatialNode)),h.context.createStereoPanner?(this.pannerNode=h.context.createStereoPanner(),h.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(h.destination)):h.context.createPanner?this.spatialNode.connect(h.destination):this.volumeNode.connect(h.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,a.call(this,h,c,l)},play:function(r,h){return a.prototype.play.call(this,r,h)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(f.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(f.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(f.RESUME,this),!0)},stop:function(){return a.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(f.STOP,this),!0):!1},createAndStartBufferSource:function(){var r=this.currentConfig.seek,h=this.currentConfig.delay,c=this.manager.context.currentTime+h,l=(this.currentMarker?this.currentMarker.start:0)+r,p=this.duration-r;this.playTime=c-r,this.startTime=c,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,c),Math.max(0,l),Math.max(0,p)),this.resetConfig()},createAndStartLoopBufferSource:function(){var r=this.getLoopTime(),h=this.currentMarker?this.currentMarker.start:0,c=this.duration;this.loopTime=r,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,r),Math.max(0,h),Math.max(0,c))},createBufferSource:function(){var r=this,h=this.manager.context.createBufferSource();return h.buffer=this.audioBuffer,h.connect(this.muteNode),h.onended=function(c){var l=c.target;(l===r.source||l===r.loopSource)&&(r.currentConfig.loop?r.hasLooped=!0:r.hasEnded=!0)},h},stopAndRemoveBufferSource:function(){if(this.source){var r=this.source;this.source=null,r.stop(),r.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var r=this.currentConfig.source;if(r&&this.manager.context.createPanner){var h=this.spatialNode;h.panningModel=o(r,"panningModel","equalpower"),h.distanceModel=o(r,"distanceModel","inverse"),h.orientationX.value=o(r,"orientationX",0),h.orientationY.value=o(r,"orientationY",0),h.orientationZ.value=o(r,"orientationZ",-1),h.refDistance=o(r,"refDistance",1),h.maxDistance=o(r,"maxDistance",1e4),h.rolloffFactor=o(r,"rolloffFactor",1),h.coneInnerAngle=o(r,"coneInnerAngle",360),h.coneOuterAngle=o(r,"coneOuterAngle",0),h.coneOuterGain=o(r,"coneOuterGain",0),this.spatialSource=o(r,"follow",null),this.spatialSource||(h.positionX.value=o(r,"x",0),h.positionY.value=o(r,"y",0),h.positionZ.value=o(r,"z",0))}a.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(r){this.spatialNode&&(this.spatialNode.positionX.value=r)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(r){this.spatialNode&&(this.spatialNode.positionY.value=r)}},update:function(){if(this.isPlaying&&this.spatialSource){var r=o(this.spatialSource,"x",null),h=o(this.spatialSource,"y",null);r&&r!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=r),h&&h!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=h)}this.hasEnded?(a.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(f.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(f.LOOPED,this))},destroy:function(){this.pendingRemove||(a.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){a.prototype.calculateRate.call(this);var r=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,r),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,r)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var r=0,h=0;h<this.rateUpdates.length;h++){var c=0;h<this.rateUpdates.length-1?c=this.rateUpdates[h+1].time:c=this.manager.context.currentTime-this.playTime,r+=(c-this.rateUpdates[h].time)*this.rateUpdates[h].rate}return r},getLoopTime:function(){for(var r=0,h=0;h<this.rateUpdates.length-1;h++)r+=(this.rateUpdates[h+1].time-this.rateUpdates[h].time)*this.rateUpdates[h].rate;var c=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+c.time+(this.duration-r)/c.rate},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,this.calculateRate(),this.emit(f.RATE,this,r)}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,this.calculateRate(),this.emit(f.DETUNE,this,r)}},setDetune:function(r){return this.detune=r,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(r){this.currentConfig.mute=r,this.muteNode.gain.setValueAtTime(r?0:1,0),this.emit(f.MUTE,this,r)}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(r){this.currentConfig.volume=r,this.volumeNode.gain.setValueAtTime(r,0),this.emit(f.VOLUME,this,r)}},setVolume:function(r){return this.volume=r,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.currentConfig.seek=r,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(f.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),r&&this.createAndStartLoopBufferSource()),this.emit(f.LOOP,this,r)}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(r){this.currentConfig.pan=r,this.pannerNode&&this.pannerNode.pan.setValueAtTime(r,this.manager.context.currentTime),this.emit(f.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});s.exports=u}),57490:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(53134),g=e(85034),f=e(83419),o=e(14463),u=e(8443),r=e(71741),h=e(95540),c=new f({Extends:g,initialize:function(p){this.context=this.createAudioContext(p),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",g.call(this,p),this.locked&&(p.isBooted?this.unlock():p.events.once(u.BOOT,this.unlock,this)),p.events.on(u.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var l=this.context;window.setTimeout(function(){l&&(l.suspend(),l.resume())},100)},createAudioContext:function(l){var p=l.config.audio;if(p.context)return p.context.resume(),p.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(l){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=l,this.masterMuteNode=l.createGain(),this.masterVolumeNode=l.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(l.destination),this.destination=this.masterMuteNode,this},add:function(l,p){var m=new r(this,l,p);return this.sounds.push(m),m},decodeAudio:function(l,p){var m;Array.isArray(l)?m=l:m=[{key:l,data:p}];for(var v=this.game.cache.audio,y=m.length,E=0;E<m.length;E++){var C=m[E],w=C.key,A=C.data;typeof A=="string"&&(A=a(A));var M=(function(P,b){v.add(P,b),this.emit(o.DECODED,P),y--,y===0&&this.emit(o.DECODED_ALL)}).bind(this,w),R=(function(P,b){console.error("Error decoding audio: "+P+" - ",b?b.message:""),y--,y===0&&this.emit(o.DECODED_ALL)}).bind(this,w);this.context.decodeAudioData(A,M,R)}},setListenerPosition:function(l,p){return l===void 0&&(l=this.game.scale.width/2),p===void 0&&(p=this.game.scale.height/2),this.listenerPosition.set(l,p),this},unlock:function(){var l=this,p=document.body,m=function v(){if(l.context&&p){var y=p.removeEventListener.bind(p);l.context.resume().then(function(){y("touchstart",v),y("touchend",v),y("mousedown",v),y("mouseup",v),y("keydown",v),l.unlocked=!0},function(){y("touchstart",v),y("touchend",v),y("mousedown",v),y("mouseup",v),y("keydown",v)})}};p&&(p.addEventListener("touchstart",m,!1),p.addEventListener("touchend",m,!1),p.addEventListener("mousedown",m,!1),p.addEventListener("mouseup",m,!1),p.addEventListener("keydown",m,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var l=this.context;l&&!this.locked&&(l.state==="suspended"||l.state==="interrupted")&&l.resume()},update:function(l,p){var m=this.context.listener,v=h(this.listenerPosition,"x",null),y=h(this.listenerPosition,"y",null);if(m&&m.positionX!==void 0)v&&v!==this._spatialx&&(this._spatialx=m.positionX.value=v),y&&y!==this._spatialy&&(this._spatialy=m.positionY.value=y);else if(m){v&&v!==this._spatialx&&(this._spatialx=v),y&&y!==this._spatialy&&(this._spatialy=y);var E=h(m,"z",0);m.setPosition(this._spatialx||0,this._spatialy||0,E)}g.prototype.update.call(this,l,p),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var l=this;this.context.close().then(function(){l.context=null})}this.game.events.off(u.VISIBLE,this.onGameVisible,this),g.prototype.destroy.call(this)},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(l){this.masterMuteNode.gain.setValueAtTime(l?0:1,0),this.emit(o.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(l){this.masterVolumeNode.gain.setValueAtTime(l,0),this.emit(o.GLOBAL_VOLUME,this,l)}}});s.exports=c}),73162:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),g=e(83419),f=e(29747),o=e(19186),u=new g({initialize:function(h){this.parent=h,this.list=[],this.position=0,this.addCallback=f,this.removeCallback=f,this._sortKey=""},add:function(r,h){return h?a.Add(this.list,r):a.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,h,c){return c?a.AddAt(this.list,r,h):a.AddAt(this.list,r,h,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,h){return r?(h===void 0&&(h=function(c,l){return c[r]-l[r]}),o(this.list,h),this):this},getByName:function(r){return a.GetFirst(this.list,"name",r)},getRandom:function(r,h){return a.GetRandom(this.list,r,h)},getFirst:function(r,h,c,l){return a.GetFirst(this.list,r,h,c,l)},getAll:function(r,h,c,l){return a.GetAll(this.list,r,h,c,l)},count:function(r,h){return a.CountAllMatching(this.list,r,h)},swap:function(r,h){a.Swap(this.list,r,h)},moveTo:function(r,h){return a.MoveTo(this.list,r,h)},moveAbove:function(r,h){return a.MoveAbove(this.list,r,h)},moveBelow:function(r,h){return a.MoveBelow(this.list,r,h)},remove:function(r,h){return h?a.Remove(this.list,r):a.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,h){return h?a.RemoveAt(this.list,r):a.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,h,c){return c?a.RemoveBetween(this.list,r,h):a.RemoveBetween(this.list,r,h,this.removeCallback,this)},removeAll:function(r){for(var h=this.list.length;h--;)this.remove(this.list[h],r);return this},bringToTop:function(r){return a.BringToTop(this.list,r)},sendToBack:function(r){return a.SendToBack(this.list,r)},moveUp:function(r){return a.MoveUp(this.list,r),r},moveDown:function(r){return a.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(r,h){return a.Replace(this.list,r,h)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,h,c,l){return a.SetAll(this.list,r,h,c,l),this},each:function(r,h){for(var c=[null],l=2;l<arguments.length;l++)c.push(arguments[l]);for(l=0;l<this.list.length;l++)c[0]=this.list[l],r.apply(h,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});s.exports=u}),90330:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o){this.entries={},this.size=0,this.setAll(o)},setAll:function(f){if(Array.isArray(f))for(var o=0;o<f.length;o++)this.set(f[o][0],f[o][1]);return this},set:function(f,o){return this.has(f)||this.size++,this.entries[f]=o,this},get:function(f){if(this.has(f))return this.entries[f]},getArray:function(){var f=[],o=this.entries;for(var u in o)f.push(o[u]);return f},has:function(f){return this.entries.hasOwnProperty(f)},delete:function(f){return this.has(f)&&(delete this.entries[f],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(f){delete this.entries[f]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var f=[],o=this.entries;for(var u in o)f.push(o[u]);return f},dump:function(){var f=this.entries;console.group("Map");for(var o in f)console.log(o,f[o]);console.groupEnd()},each:function(f){var o=this.entries;for(var u in o)if(f(u,o[u])===!1)break;return this},contains:function(f){var o=this.entries;for(var u in o)if(o[u]===f)return!0;return!1},merge:function(f,o){o===void 0&&(o=!1);var u=this.entries,r=f.entries;for(var h in r)u.hasOwnProperty(h)&&o?u[h]=r[h]:this.set(h,r[h]);return this}});s.exports=g}),25774:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50792),f=e(82348),o=new a({Extends:g,initialize:function(){g.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(u){return this._active.indexOf(u)>-1},isPending:function(u){return this._toProcess>0&&this._pending.indexOf(u)>-1},isDestroying:function(u){return this._destroy.indexOf(u)>-1},add:function(u){return this.checkQueue&&this.isActive(u)&&!this.isDestroying(u)||this.isPending(u)||(this._pending.push(u),this._toProcess++),u},remove:function(u){if(this.isPending(u)){var r=this._pending,h=r.indexOf(u);h!==-1&&r.splice(h,1)}else this.isActive(u)&&(this._destroy.push(u),this._toProcess++);return u},removeAll:function(){for(var u=this._active,r=this._destroy,h=u.length;h--;)r.push(u[h]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var u=this._destroy,r=this._active,h,c;for(h=0;h<u.length;h++){c=u[h];var l=r.indexOf(c);l!==-1&&(r.splice(l,1),this.emit(f.PROCESS_QUEUE_REMOVE,c))}for(u.length=0,u=this._pending,h=0;h<u.length;h++)c=u[h],(!this.checkQueue||this.checkQueue&&r.indexOf(c)===-1)&&(r.push(c),this.emit(f.PROCESS_QUEUE_ADD,c));return u.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});s.exports=o}),59542:((s,T,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43886);function g(A){if(!(this instanceof g))return new g(A);this._maxEntries=Math.max(4,A||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}g.prototype={all:function(){return this._all(this.data,[])},search:function(A){var M=this.data,R=[],P=this.toBBox;if(!E(A,M))return R;for(var b=[],F,I,L,D;M;){for(F=0,I=M.children.length;F<I;F++)L=M.children[F],D=M.leaf?P(L):L,E(A,D)&&(M.leaf?R.push(L):y(A,D)?this._all(L,R):b.push(L));M=b.pop()}return R},collides:function(A){var M=this.data,R=this.toBBox;if(!E(A,M))return!1;for(var P=[],b,F,I,L;M;){for(b=0,F=M.children.length;b<F;b++)if(I=M.children[b],L=M.leaf?R(I):I,E(A,L)){if(M.leaf||y(A,L))return!0;P.push(I)}M=P.pop()}return!1},load:function(A){if(!(A&&A.length))return this;if(A.length<this._minEntries){for(var M=0,R=A.length;M<R;M++)this.insert(A[M]);return this}var P=this._build(A.slice(),0,A.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var b=this.data;this.data=P,P=b}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(A){return A&&this._insert(A,this.data.height-1),this},clear:function(){return this.data=C([]),this},remove:function(A,M){if(!A)return this;for(var R=this.data,P=this.toBBox(A),b=[],F=[],I,L,D,O;R||b.length;){if(R||(R=b.pop(),L=b[b.length-1],I=F.pop(),O=!0),R.leaf&&(D=f(A,R.children,M),D!==-1))return R.children.splice(D,1),b.push(R),this._condense(b),this;!O&&!R.leaf&&y(R,P)?(b.push(R),F.push(I),I=0,L=R,R=R.children[0]):L?(I++,R=L.children[I],O=!1):R=null}return this},toBBox:function(A){return A},compareMinX:h,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(A){return this.data=A,this},_all:function(A,M){for(var R=[];A;)A.leaf?M.push.apply(M,A.children):R.push.apply(R,A.children),A=R.pop();return M},_build:function(A,M,R,P){var b=R-M+1,F=this._maxEntries,I;if(b<=F)return I=C(A.slice(M,R+1)),o(I,this.toBBox),I;P||(P=Math.ceil(Math.log(b)/Math.log(F)),F=Math.ceil(b/Math.pow(F,P-1))),I=C([]),I.leaf=!1,I.height=P;var L=Math.ceil(b/F),D=L*Math.ceil(Math.sqrt(F)),O,z,_,X;for(w(A,M,R,D,this.compareMinX),O=M;O<=R;O+=D)for(_=Math.min(O+D-1,R),w(A,O,_,L,this.compareMinY),z=O;z<=_;z+=L)X=Math.min(z+L-1,_),I.children.push(this._build(A,z,X,P-1));return o(I,this.toBBox),I},_chooseSubtree:function(A,M,R,P){for(var b,F,I,L,D,O,z,_;P.push(M),!(M.leaf||P.length-1===R);){for(z=_=1/0,b=0,F=M.children.length;b<F;b++)I=M.children[b],D=l(I),O=m(A,I)-D,O<_?(_=O,z=D<z?D:z,L=I):O===_&&D<z&&(z=D,L=I);M=L||M.children[0]}return M},_insert:function(A,M,R){var P=this.toBBox,b=R?A:P(A),F=[],I=this._chooseSubtree(b,this.data,M,F);for(I.children.push(A),r(I,b);M>=0&&F[M].children.length>this._maxEntries;)this._split(F,M),M--;this._adjustParentBBoxes(b,F,M)},_split:function(A,M){var R=A[M],P=R.children.length,b=this._minEntries;this._chooseSplitAxis(R,b,P);var F=this._chooseSplitIndex(R,b,P),I=C(R.children.splice(F,R.children.length-F));I.height=R.height,I.leaf=R.leaf,o(R,this.toBBox),o(I,this.toBBox),M?A[M-1].children.push(I):this._splitRoot(R,I)},_splitRoot:function(A,M){this.data=C([A,M]),this.data.height=A.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(A,M,R){var P,b,F,I,L,D,O,z;for(D=O=1/0,P=M;P<=R-M;P++)b=u(A,0,P,this.toBBox),F=u(A,P,R,this.toBBox),I=v(b,F),L=l(b)+l(F),I<D?(D=I,z=P,O=L<O?L:O):I===D&&L<O&&(O=L,z=P);return z},_chooseSplitAxis:function(A,M,R){var P=A.leaf?this.compareMinX:h,b=A.leaf?this.compareMinY:c,F=this._allDistMargin(A,M,R,P),I=this._allDistMargin(A,M,R,b);F<I&&A.children.sort(P)},_allDistMargin:function(A,M,R,P){A.children.sort(P);var b=this.toBBox,F=u(A,0,M,b),I=u(A,R-M,R,b),L=p(F)+p(I),D,O;for(D=M;D<R-M;D++)O=A.children[D],r(F,A.leaf?b(O):O),L+=p(F);for(D=R-M-1;D>=M;D--)O=A.children[D],r(I,A.leaf?b(O):O),L+=p(I);return L},_adjustParentBBoxes:function(A,M,R){for(var P=R;P>=0;P--)r(M[P],A)},_condense:function(A){for(var M=A.length-1,R;M>=0;M--)A[M].children.length===0?M>0?(R=A[M-1].children,R.splice(R.indexOf(A[M]),1)):this.clear():o(A[M],this.toBBox)},compareMinX:function(A,M){return A.left-M.left},compareMinY:function(A,M){return A.top-M.top},toBBox:function(A){return{minX:A.left,minY:A.top,maxX:A.right,maxY:A.bottom}}};function f(A,M,R){if(!R)return M.indexOf(A);for(var P=0;P<M.length;P++)if(R(A,M[P]))return P;return-1}function o(A,M){u(A,0,A.children.length,M,A)}function u(A,M,R,P,b){b||(b=C(null)),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0;for(var F=M,I;F<R;F++)I=A.children[F],r(b,A.leaf?P(I):I);return b}function r(A,M){return A.minX=Math.min(A.minX,M.minX),A.minY=Math.min(A.minY,M.minY),A.maxX=Math.max(A.maxX,M.maxX),A.maxY=Math.max(A.maxY,M.maxY),A}function h(A,M){return A.minX-M.minX}function c(A,M){return A.minY-M.minY}function l(A){return(A.maxX-A.minX)*(A.maxY-A.minY)}function p(A){return A.maxX-A.minX+(A.maxY-A.minY)}function m(A,M){return(Math.max(M.maxX,A.maxX)-Math.min(M.minX,A.minX))*(Math.max(M.maxY,A.maxY)-Math.min(M.minY,A.minY))}function v(A,M){var R=Math.max(A.minX,M.minX),P=Math.max(A.minY,M.minY),b=Math.min(A.maxX,M.maxX),F=Math.min(A.maxY,M.maxY);return Math.max(0,b-R)*Math.max(0,F-P)}function y(A,M){return A.minX<=M.minX&&A.minY<=M.minY&&M.maxX<=A.maxX&&M.maxY<=A.maxY}function E(A,M){return M.minX<=A.maxX&&M.minY<=A.maxY&&M.maxX>=A.minX&&M.maxY>=A.minY}function C(A){return{children:A,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(A,M,R,P,b){for(var F=[M,R],I;F.length;)R=F.pop(),M=F.pop(),!(R-M<=P)&&(I=M+Math.ceil((R-M)/P/2)*P,a(A,I,M,R,b),F.push(M,I,I,R))}s.exports=g}),35072:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var u=0;u<o.length;u++)this.set(o[u])},set:function(f){return this.entries.indexOf(f)===-1&&this.entries.push(f),this},get:function(f,o){for(var u=0;u<this.entries.length;u++){var r=this.entries[u];if(r[f]===o)return r}},getArray:function(){return this.entries.slice(0)},delete:function(f){var o=this.entries.indexOf(f);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var f=0;f<this.entries.length;f++){var o=this.entries[f];console.log(o)}console.groupEnd()},each:function(f,o){var u,r=this.entries.slice(),h=r.length;if(o)for(u=0;u<h&&f.call(o,r[u],u)!==!1;u++);else for(u=0;u<h&&f(r[u],u)!==!1;u++);return this},iterate:function(f,o){var u,r=this.entries.length;if(o)for(u=0;u<r&&f.call(o,this.entries[u],u)!==!1;u++);else for(u=0;u<r&&f(this.entries[u],u)!==!1;u++);return this},iterateLocal:function(f){var o,u=[];for(o=1;o<arguments.length;o++)u.push(arguments[o]);var r=this.entries.length;for(o=0;o<r;o++){var h=this.entries[o];h[f].apply(h,u)}return this},clear:function(){return this.entries.length=0,this},contains:function(f){return this.entries.indexOf(f)>-1},union:function(f){var o=new g;return f.entries.forEach(function(u){o.set(u)}),this.entries.forEach(function(u){o.set(u)}),o},intersect:function(f){var o=new g;return this.entries.forEach(function(u){f.contains(u)&&o.set(u)}),o},difference:function(f){var o=new g;return this.entries.forEach(function(u){f.contains(u)||o.set(u)}),o},size:{get:function(){return this.entries.length},set:function(f){return f<this.entries.length?this.entries.length=f:this.entries.length}}});s.exports=g}),86555:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),g=e(83419),f=e(56583),o=e(26099),u=new g({initialize:function(h,c,l,p){h===void 0&&(h=0),c===void 0&&(c=h),l===void 0&&(l=0),p===void 0&&(p=null),this._width=h,this._height=c,this._parent=p,this.aspectMode=l,this.aspectRatio=c===0?1:h/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,h){return r===void 0&&(r=0),h===void 0&&(h=r),this.snapTo.set(r,h),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,h){return r===void 0&&(r=0),h===void 0&&(h=r),this.minWidth=a(r,0,this.maxWidth),this.minHeight=a(h,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,h){return r===void 0&&(r=Number.MAX_VALUE),h===void 0&&(h=r),this.maxWidth=a(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=a(h,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,h){switch(r===void 0&&(r=0),h===void 0&&(h=r),this.aspectMode){case u.NONE:this._width=this.getNewWidth(f(r,this.snapTo.x)),this._height=this.getNewHeight(f(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case u.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(f(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case u.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(f(h,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case u.FIT:this.constrain(r,h,!0);break;case u.ENVELOP:this.constrain(r,h,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,h){return this._width=this.getNewWidth(f(r,this.snapTo.x)),this._height=this.getNewHeight(f(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,h){return h===void 0&&(h=!0),r=a(r,this.minWidth,this.maxWidth),h&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,h){return h===void 0&&(h=!0),r=a(r,this.minHeight,this.maxHeight),h&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,h,c){r===void 0&&(r=0),h===void 0&&(h=r),c===void 0&&(c=!0),r=this.getNewWidth(r),h=this.getNewHeight(h);var l=this.snapTo,p=h===0?1:r/h;return c&&this.aspectRatio>p||!c&&this.aspectRatio<p?(r=f(r,l.x),h=r/this.aspectRatio,l.y>0&&(h=f(h,l.y),r=h*this.aspectRatio)):(c&&this.aspectRatio<p||!c&&this.aspectRatio>p)&&(h=f(h,l.y),r=h*this.aspectRatio,l.x>0&&(r=f(r,l.x),h=r*(1/this.aspectRatio))),this._width=r,this._height=h,this},fitTo:function(r,h){return this.constrain(r,h,!0)},envelop:function(r,h){return this.constrain(r,h,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});u.NONE=0,u.WIDTH_CONTROLS_HEIGHT=1,u.HEIGHT_CONTROLS_WIDTH=2,u.FIT=3,u.ENVELOP=4,s.exports=u}),15238:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="add"}),56187:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="remove"}),82348:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={PROCESS_QUEUE_ADD:e(15238),PROCESS_QUEUE_REMOVE:e(56187)}}),41392:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Events:e(82348),List:e(73162),Map:e(90330),ProcessQueue:e(25774),RTree:e(59542),Set:e(35072),Size:e(86555)}}),57382:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(45319),f=e(40987),o=e(8054),u=e(50030),r=e(79237),h=new a({Extends:r,initialize:function(l,p,m,v,y){r.call(this,l,p,m,v,y),this.add("__BASE",0,0,0,v,y),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=v,this.height=y,this.imageData=this.context.getImageData(0,0,v,y),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(c,l,p,m){return m===void 0&&(m=!0),this.context.drawImage(p,c,l),m&&this.update(),this},drawFrame:function(c,l,p,m,v){p===void 0&&(p=0),m===void 0&&(m=0),v===void 0&&(v=!0);var y=this.manager.getFrame(c,l);if(y){var E=y.canvasData,C=y.cutWidth,w=y.cutHeight,A=y.source.resolution;this.context.drawImage(y.source.image,E.x,E.y,C,w,p,m,C/A,w/A),v&&this.update()}return this},setPixel:function(c,l,p,m,v,y){y===void 0&&(y=255),c=Math.abs(Math.floor(c)),l=Math.abs(Math.floor(l));var E=this.getIndex(c,l);if(E>-1){var C=this.context.getImageData(c,l,1,1);C.data[0]=p,C.data[1]=m,C.data[2]=v,C.data[3]=y,this.context.putImageData(C,c,l)}return this},putData:function(c,l,p,m,v,y,E){return m===void 0&&(m=0),v===void 0&&(v=0),y===void 0&&(y=c.width),E===void 0&&(E=c.height),this.context.putImageData(c,l,p,m,v,y,E),this},getData:function(c,l,p,m){c=g(Math.floor(c),0,this.width-1),l=g(Math.floor(l),0,this.height-1),p=g(p,1,this.width-c),m=g(m,1,this.height-l);var v=this.context.getImageData(c,l,p,m);return v},getPixel:function(c,l,p){p||(p=new f);var m=this.getIndex(c,l);if(m>-1){var v=this.data,y=v[m+0],E=v[m+1],C=v[m+2],w=v[m+3];p.setTo(y,E,C,w)}return p},getPixels:function(c,l,p,m){c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=this.width),m===void 0&&(m=p),c=Math.abs(Math.round(c)),l=Math.abs(Math.round(l));for(var v=g(c,0,this.width),y=g(c+p,0,this.width),E=g(l,0,this.height),C=g(l+m,0,this.height),w=new f,A=[],M=E;M<C;M++){for(var R=[],P=v;P<y;P++)w=this.getPixel(P,M,w),R.push({x:P,y:M,color:w.color,alpha:w.alphaGL});A.push(R)}return A},getIndex:function(c,l){return c=Math.abs(Math.round(c)),l=Math.abs(Math.round(l)),c<this.width&&l<this.height?(c+l*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,l,p,m,v){return c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=this.width),m===void 0&&(m=this.height),v===void 0&&(v=!0),this.context.clearRect(c,l,p,m),v&&this.update(),this},setSize:function(c,l){return l===void 0&&(l=c),(c!==this.width||l!==this.height)&&(this.canvas.width=c,this.canvas.height=l,this._source.width=c,this._source.height=l,this._source.isPowerOf2=u(c,l),this.frames.__BASE.setSize(c,l,0,0),this.width=c,this.height=l,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});s.exports=h}),81320:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),g=e(38058),f=e(27919),o=e(83419),u=e(8054),r=e(4327),h=e(95540),c=e(36060),l=e(32302),p=e(79237),m=e(70554),v=new o({Extends:p,initialize:function(E,C,w,A,M){w===void 0&&(w=256),A===void 0&&(A=256),M===void 0&&(M=!0),this.type="DynamicTexture";var R=E.game.renderer,P=R&&R.type===u.CANVAS,b=P?f.create2D(this,w,A):[this];p.call(this,E,C,b,w,A),this.add("__BASE",0,0,0,w,A),this.renderer=R,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=P?b:null,this.context=P?b.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new g(0,0,w,A).setScene(E.game.scene.systemScene,!1),this.renderTarget=P?null:new l(R,w,A,1,0,!1,!1,!0,!1),this.pipeline=P?null:R.pipelines.get(c.SINGLE_PIPELINE),this.setSize(w,A,M)},setSize:function(y,E,C){E===void 0&&(E=y),C===void 0&&(C=!0),C&&(y=Math.floor(y),E=Math.floor(E),y%2!==0&&y++,E%2!==0&&E++);var w=this.get(),A=w.source;if(y!==this.width||E!==this.height){this.canvas&&(this.canvas.width=y,this.canvas.height=E);var M=this.renderTarget;M&&(M.willResize(y,E)&&M.resize(y,E),M.texture!==A.glTexture&&this.renderer.deleteTexture(A.glTexture),this.setFromRenderTarget()),this.camera.setSize(y,E),A.width=y,A.height=E,w.setSize(y,E),this.width=y,this.height=E}else{var R=this.getSourceImage();w.cutX+y>R.width&&(y=R.width-w.cutX),w.cutY+E>R.height&&(E=R.height-w.cutY),w.setSize(y,E,w.cutX,w.cutY)}return this},setFromRenderTarget:function(){var y=this.get(),E=y.source,C=this.renderTarget;return E.isRenderTexture=!0,E.isGLTexture=!0,E.glTexture=C.texture,this},setIsSpriteTexture:function(y){return this.isSpriteTexture=y,this},fill:function(y,E,C,w,A,M){var R=this.camera,P=this.renderer;E===void 0&&(E=1),C===void 0&&(C=0),w===void 0&&(w=0),A===void 0&&(A=this.width),M===void 0&&(M=this.height);var b=y>>16&255,F=y>>8&255,I=y&255,L=this.renderTarget;if(R.preRender(),L){L.bind(!0);var D=this.pipeline.manager.set(this.pipeline),O=P.width/L.width,z=P.height/L.height,_=L.height-(w+M);D.drawFillRect(C*O,_*z,A*O,M*z,m.getTintFromFloats(I/255,F/255,b/255,1),E),L.unbind(!0)}else{var X=this.context;P.setContext(X),X.globalCompositeOperation="source-over",X.fillStyle="rgba("+b+","+F+","+I+","+E+")",X.fillRect(C,w,A,M),P.setContext()}return this.dirty=!0,this},clear:function(y,E,C,w){if(this.dirty){var A=this.context,M=this.renderTarget;M?M.clear(y,E,C,w):A&&(y!==void 0&&E!==void 0&&C!==void 0&&w!==void 0?A.clearRect(y,E,C,w):(A.save(),A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,this.width,this.height),A.restore())),this.dirty=!1}return this},stamp:function(y,E,C,w,A){C===void 0&&(C=0),w===void 0&&(w=0);var M=h(A,"alpha",1),R=h(A,"tint",16777215),P=h(A,"angle",0),b=h(A,"rotation",0),F=h(A,"scale",1),I=h(A,"scaleX",F),L=h(A,"scaleY",F),D=h(A,"originX",.5),O=h(A,"originY",.5),z=h(A,"blendMode",0),_=h(A,"erase",!1),X=h(A,"skipBatch",!1),H=this.manager.resetStamp(M,R);return H.setAngle(0),P!==0?H.setAngle(P):b!==0&&H.setRotation(b),H.setScale(I,L),H.setTexture(y,E),H.setOrigin(D,O),H.setBlendMode(z),_&&(this._eraseMode=!0),X?this.batchGameObject(H,C,w):this.draw(H,C,w),_&&(this._eraseMode=!1),this},erase:function(y,E,C){return this._eraseMode=!0,this.draw(y,E,C),this._eraseMode=!1,this},draw:function(y,E,C,w,A){return this.beginDraw(),this.batchDraw(y,E,C,w,A),this.endDraw(),this},drawFrame:function(y,E,C,w,A,M){return this.beginDraw(),this.batchDrawFrame(y,E,C,w,A,M),this.endDraw(),this},repeat:function(y,E,C,w,A,M,R,P,b){if(C===void 0&&(C=0),w===void 0&&(w=0),A===void 0&&(A=this.width),M===void 0&&(M=this.height),R===void 0&&(R=1),P===void 0&&(P=16777215),b===void 0&&(b=!1),y instanceof r?E=y:E=this.manager.getFrame(y,E),!E)return this;var F=this.manager.resetStamp(R,P);F.setFrame(E),F.setOrigin(0);var I=E.width,L=E.height;A=Math.floor(A),M=Math.floor(M);var D=Math.ceil(A/I),O=Math.ceil(M/L),z=D*I-A,_=O*L-M;z>0&&(z=I-z),_>0&&(_=L-_),C<0&&(D+=Math.ceil(Math.abs(C)/I)),w<0&&(O+=Math.ceil(Math.abs(w)/L));var X=C,H=w,U=!1,G=this.manager.stampCrop.setTo(0,0,I,L);b||this.beginDraw();for(var N=0;N<O;N++){if(H+L<0){H+=L;continue}for(var W=0;W<D;W++){if(U=!1,X+I<0){X+=I;continue}else X<0&&(U=!0,G.width=I+X,G.x=I-G.width);H<0&&(U=!0,G.height=L+H,G.y=L-G.height),z>0&&W===D-1&&(U=!0,G.width=z),_>0&&N===O-1&&(U=!0,G.height=_),U&&F.setCrop(G),this.batchGameObject(F,X,H),F.isCropped=!1,G.setTo(0,0,I,L),X+=I}X=C,H+=L}return b||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var y=this.camera,E=this.renderer,C=this.renderTarget;y.preRender(),C?E.beginCapture(C.width,C.height):E.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(y,E,C,w,A){return Array.isArray(y)||(y=[y]),this.batchList(y,E,C,w,A),this},batchDrawFrame:function(y,E,C,w,A,M){C===void 0&&(C=0),w===void 0&&(w=0),A===void 0&&(A=1),M===void 0&&(M=16777215);var R=this.manager.getFrame(y,E);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,C,w,M,A,this.camera.matrix,null):this.batchTextureFrame(R,C,w,A,M)),this},endDraw:function(y){if(y===void 0&&(y=this._eraseMode),this.isDrawing){var E=this.renderer,C=this.renderTarget;if(C){var w=E.endCapture(),A=E.pipelines.setUtility();A.blitFrame(w,C,1,!1,!1,y,this.isSpriteTexture),E.resetScissor(),E.resetViewport()}else E.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(y,E,C,w,A){var M=y.length;if(M!==0)for(var R=0;R<M;R++){var P=y[R];!P||P===this||(P.renderWebGL||P.renderCanvas?this.batchGameObject(P,E,C):P.isParent||P.list?this.batchGroup(P.getChildren(),E,C):typeof P=="string"?this.batchTextureFrameKey(P,null,E,C,w,A):P instanceof r?this.batchTextureFrame(P,E,C,w,A):Array.isArray(P)&&this.batchList(P,E,C,w,A))}},batchGroup:function(y,E,C){E===void 0&&(E=0),C===void 0&&(C=0);for(var w=0;w<y.length;w++){var A=y[w];A.willRender(this.camera)&&this.batchGameObject(A,A.x+E,A.y+C)}},batchGameObject:function(y,E,C){E===void 0&&(E=y.x),C===void 0&&(C=y.y);var w=y.x,A=y.y,M=this.camera,R=this.renderer,P=this._eraseMode,b=y.mask;if(y.setPosition(E,C),this.canvas){if(P){var F=y.blendMode;y.blendMode=a.ERASE}b&&b.preRenderCanvas(R,y,M),y.renderCanvas(R,y,M,null),b&&b.postRenderCanvas(R,y,M),P&&(y.blendMode=F)}else R&&(b&&b.preRenderWebGL(R,y,M),P||R.setBlendMode(y.blendMode),y.renderWebGL(R,y,M),b&&b.postRenderWebGL(R,M,this.renderTarget));y.setPosition(w,A)},batchTextureFrameKey:function(y,E,C,w,A,M){var R=this.manager.getFrame(y,E);R&&this.batchTextureFrame(R,C,w,A,M)},batchTextureFrame:function(y,E,C,w,A){E===void 0&&(E=0),C===void 0&&(C=0),w===void 0&&(w=1),A===void 0&&(A=16777215);var M=this.camera.matrix,R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(y,E,C,A,w,M,null);else{var P=this.context,b=y.canvasData,F=y.source.image;P.save(),P.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",P.globalAlpha=w,M.setToContext(P),b.width>0&&b.height>0&&P.drawImage(F,b.x,b.y,b.width,b.height,E,C,b.width,b.height),P.restore()}},snapshotArea:function(y,E,C,w,A,M,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,A,!1,y,E,C,w,M,R):this.renderer.snapshotCanvas(this.canvas,A,!1,y,E,C,w,M,R),this},snapshot:function(y,E,C){return this.snapshotArea(0,0,this.width,this.height,y,E,C)},snapshotPixel:function(y,E,C){return this.snapshotArea(y,E,1,1,C,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(y,E,C,w){var A=this.manager.resetStamp();A.setTexture(this),A.setOrigin(0),A.renderWebGL(y,A,C,w)},renderCanvas:function(){},destroy:function(){var y=this.manager.stamp;y&&y.texture===this&&this.manager.resetStamp(),p.prototype.destroy.call(this),f.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});s.exports=v}),4327:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(45319),f=e(79291),o=new a({initialize:function(r,h,c,l,p,m,v){this.texture=r,this.name=h,this.source=r.source[c],this.sourceIndex=c,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(m,v,l,p)},setCutPosition:function(u,r){return u===void 0&&(u=0),r===void 0&&(r=0),this.cutX=u,this.cutY=r,this.updateUVs()},setCutSize:function(u,r){return this.cutWidth=u,this.cutHeight=r,this.updateUVs()},setSize:function(u,r,h,c){h===void 0&&(h=0),c===void 0&&(c=0),this.setCutPosition(h,c),this.setCutSize(u,r),this.width=u,this.height=r,this.halfWidth=Math.floor(u*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(u/2),this.centerY=Math.floor(r/2);var l=this.data,p=l.cut;p.x=h,p.y=c,p.w=u,p.h=r,p.r=h+u,p.b=c+r,l.sourceSize.w=u,l.sourceSize.h=r,l.spriteSourceSize.w=u,l.spriteSourceSize.h=r,l.radius=.5*Math.sqrt(u*u+r*r);var m=l.drawImage;return m.x=h,m.y=c,m.width=u,m.height=r,this.updateUVs()},setTrim:function(u,r,h,c,l,p){var m=this.data,v=m.spriteSourceSize;return m.trim=!0,m.sourceSize.w=u,m.sourceSize.h=r,v.x=h,v.y=c,v.w=l,v.h=p,v.r=h+l,v.b=c+p,this.x=h,this.y=c,this.width=l,this.height=p,this.halfWidth=l*.5,this.halfHeight=p*.5,this.centerX=Math.floor(l/2),this.centerY=Math.floor(p/2),this.updateUVs()},setScale9:function(u,r,h,c){var l=this.data;return l.scale9=!0,l.is3Slice=r===0&&c===this.height,l.scale9Borders.x=u,l.scale9Borders.y=r,l.scale9Borders.w=h,l.scale9Borders.h=c,this},setCropUVs:function(u,r,h,c,l,p,m){var v=this.cutX,y=this.cutY,E=this.cutWidth,C=this.cutHeight,w=this.realWidth,A=this.realHeight;r=g(r,0,w),h=g(h,0,A),c=g(c,0,w-r),l=g(l,0,A-h);var M=v+r,R=y+h,P=c,b=l,F=this.data;if(F.trim){var I=F.spriteSourceSize;c=g(c,0,I.x+E-r),l=g(l,0,I.y+C-h);var L=r+c,D=h+l,O=!(I.r<r||I.b<h||I.x>L||I.y>D);if(O){var z=Math.max(I.x,r),_=Math.max(I.y,h),X=Math.min(I.r,L)-z,H=Math.min(I.b,D)-_;P=X,b=H,p?M=v+(E-(z-I.x)-X):M=v+(z-I.x),m?R=y+(C-(_-I.y)-H):R=y+(_-I.y),r=z,h=_,c=X,l=H}else M=0,R=0,P=0,b=0}else p&&(M=v+(E-r-c)),m&&(R=y+(C-h-l));var U=this.source.width,G=this.source.height;return u.u0=Math.max(0,M/U),u.v0=Math.max(0,R/G),u.u1=Math.min(1,(M+P)/U),u.v1=Math.min(1,(R+b)/G),u.x=r,u.y=h,u.cx=M,u.cy=R,u.cw=P,u.ch=b,u.width=c,u.height=l,u.flipX=p,u.flipY=m,u},updateCropUVs:function(u,r,h){return this.setCropUVs(u,u.x,u.y,u.width,u.height,r,h)},setUVs:function(u,r,h,c,l,p){var m=this.data.drawImage;return m.width=u,m.height=r,this.u0=h,this.v0=c,this.u1=l,this.v1=p,this},updateUVs:function(){var u=this.cutX,r=this.cutY,h=this.cutWidth,c=this.cutHeight,l=this.data.drawImage;l.width=h,l.height=c;var p=this.source.width,m=this.source.height;return this.u0=u/p,this.v0=r/m,this.u1=(u+h)/p,this.v1=(r+c)/m,this},updateUVsInverted:function(){var u=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/u,this.v0=this.cutY/r,this.u1=this.cutX/u,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var u=new o(this.texture,this.name,this.sourceIndex);return u.cutX=this.cutX,u.cutY=this.cutY,u.cutWidth=this.cutWidth,u.cutHeight=this.cutHeight,u.x=this.x,u.y=this.y,u.width=this.width,u.height=this.height,u.halfWidth=this.halfWidth,u.halfHeight=this.halfHeight,u.centerX=this.centerX,u.centerY=this.centerY,u.rotated=this.rotated,u.data=f(!0,u.data,this.data),u.updateUVs(),u},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});s.exports=o}),79237:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(4327),f=e(11876),o='Texture "%s" has no frame "%s"',u=new a({initialize:function(h,c,l,p,m){Array.isArray(l)||(l=[l]),this.manager=h,this.key=c,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var v=0;v<l.length;v++)this.source.push(new f(this,l[v],p,m))},add:function(r,h,c,l,p,m){if(this.has(r))return null;var v=new g(this,r,h,c,l,p,m);return this.frames[r]=v,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,v},remove:function(r){if(this.has(r)){var h=this.get(r);return h.destroy(),delete this.frames[r],!0}return!1},has:function(r){return this.frames.hasOwnProperty(r)},get:function(r){r||(r=this.firstFrame);var h=this.frames[r];return h||(console.warn(o,this.key,r),h=this.frames[this.firstFrame]),h},getTextureSourceIndex:function(r){for(var h=0;h<this.source.length;h++)if(this.source[h]===r)return h;return-1},getFramesFromTextureSource:function(r,h){h===void 0&&(h=!1);var c=[];for(var l in this.frames)if(!(l==="__BASE"&&!h)){var p=this.frames[l];p.sourceIndex===r&&c.push(p)}return c},getFrameBounds:function(r){r===void 0&&(r=0);for(var h=this.getFramesFromTextureSource(r,!0),c=h[0],l=c.cutX,p=c.cutY,m=c.cutX+c.cutWidth,v=c.cutY+c.cutHeight,y=1;y<h.length;y++){var E=h[y];E.cutX<l&&(l=E.cutX),E.cutY<p&&(p=E.cutY),E.cutX+E.cutWidth>m&&(m=E.cutX+E.cutWidth),E.cutY+E.cutHeight>v&&(v=E.cutY+E.cutHeight)}return{x:l,y:p,width:m-l,height:v-p}},getFrameNames:function(r){r===void 0&&(r=!1);var h=Object.keys(this.frames);if(!r){var c=h.indexOf("__BASE");c!==-1&&h.splice(c,1)}return h},getSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var h=this.frames[r];return h?h.source.image:(console.warn(o,this.key,r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var h=this.frames[r],c;return h?c=h.sourceIndex:(console.warn(o,this.key,r),c=this.frames.__BASE.sourceIndex),this.dataSource[c].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var h=0;h<r.length;h++){var c=this.source[h];this.dataSource.push(new f(this,r[h],c.width,c.height))}},setFilter:function(r){var h;for(h=0;h<this.source.length;h++)this.source[h].setFilter(r);for(h=0;h<this.dataSource.length;h++)this.dataSource[h].setFilter(r)},destroy:function(){var r,h=this.source,c=this.dataSource;for(r=0;r<h.length;r++)h[r]&&h[r].destroy();for(r=0;r<c.length;r++)c[r]&&c[r].destroy();for(var l in this.frames){var p=this.frames[l];p&&p.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});s.exports=u}),17130:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),g=e(57382),f=e(83419),o=e(40987),u=e(8054),r=e(81320),h=e(50792),c=e(69442),l=e(4327),p=e(8443),m=e(99584),v=e(35154),y=e(88571),E=e(41212),C=e(61309),w=e(87841),A=e(79237),M=new f({Extends:h,initialize:function(P){h.call(this),this.game=P,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new w,this.silentWarnings=!1,P.events.once(p.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this);var R=this.game.config;R.defaultImage!==null&&this.addBase64("__DEFAULT",R.defaultImage),R.missingImage!==null&&this.addBase64("__MISSING",R.missingImage),R.whiteImage!==null&&this.addBase64("__WHITE",R.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(p.DESTROY,this.destroy,this),this.game.events.once(p.SYSTEM_READY,function(P){this.stamp=new y(P).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY))},checkKey:function(R){return!R||typeof R!="string"||this.exists(R)?(this.silentWarnings||console.error("Texture key already in use: "+R),!1):!0},remove:function(R){if(typeof R=="string")if(this.exists(R))R=this.get(R);else return this.silentWarnings||console.warn("No texture found matching key: "+R),this;var P=R.key;return this.list.hasOwnProperty(P)&&(R.destroy(),this.emit(c.REMOVE,P),this.emit(c.REMOVE_KEY+P)),this},removeKey:function(R){return this.list.hasOwnProperty(R)&&delete this.list[R],this},addBase64:function(R,P){if(this.checkKey(R)){var b=this,F=new Image;F.onerror=function(){b.emit(c.ERROR,R)},F.onload=function(){var I=b.create(R,F);I&&(C.Image(I,0),b.emit(c.ADD,R,I),b.emit(c.ADD_KEY+R,I),b.emit(c.LOAD,R,I))},F.src=P}return this},getBase64:function(R,P,b,F){b===void 0&&(b="image/png"),F===void 0&&(F=.92);var I="",L=this.getFrame(R,P);if(L&&(L.source.isRenderTexture||L.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(L){var D=L.canvasData,O=a.create2D(this,D.width,D.height),z=O.getContext("2d",{willReadFrequently:!0});D.width>0&&D.height>0&&z.drawImage(L.source.image,D.x,D.y,D.width,D.height,0,0,D.width,D.height),I=O.toDataURL(b,F),a.remove(O)}return I},addImage:function(R,P,b){var F=null;return this.checkKey(R)&&(F=this.create(R,P),C.Image(F,0),b&&F.setDataSource(b),this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)),F},addGLTexture:function(R,P){var b=null;if(this.checkKey(R)){var F=P.width,I=P.height;b=this.create(R,P,F,I),b.add("__BASE",0,0,0,F,I),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)}return b},addCompressedTexture:function(R,P,b){var F=null;if(this.checkKey(R)){if(F=this.create(R,P),F.add("__BASE",0,0,0,P.width,P.height),b){var I=function(D,O,z){Array.isArray(z.textures)||Array.isArray(z.frames)?C.JSONArray(D,O,z):C.JSONHash(D,O,z)};if(Array.isArray(b))for(var L=0;L<b.length;L++)I(F,L,b[L]);else I(F,0,b)}this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)}return F},addRenderTexture:function(R,P){var b=null;return this.checkKey(R)&&(b=this.create(R,P),b.add("__BASE",0,0,0,P.width,P.height),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)),b},generate:function(R,P){if(this.checkKey(R)){var b=a.create(this,1,1);return P.canvas=b,m(P),this.addCanvas(R,b)}else return null},createCanvas:function(R,P,b){if(P===void 0&&(P=256),b===void 0&&(b=256),this.checkKey(R)){var F=a.create(this,P,b,u.CANVAS,!0);return this.addCanvas(R,F)}return null},addCanvas:function(R,P,b){b===void 0&&(b=!1);var F=null;return b?F=new g(this,R,P,P.width,P.height):this.checkKey(R)&&(F=new g(this,R,P,P.width,P.height),this.list[R]=F,this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)),F},addDynamicTexture:function(R,P,b){var F=null;return typeof R=="string"&&!this.exists(R)?F=new r(this,R,P,b):(F=R,R=F.key),this.checkKey(R)?(this.list[R]=F,this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)):F=null,F},addAtlas:function(R,P,b,F){return Array.isArray(b.textures)||Array.isArray(b.frames)?this.addAtlasJSONArray(R,P,b,F):this.addAtlasJSONHash(R,P,b,F)},addAtlasJSONArray:function(R,P,b,F){var I=null;if(P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I){if(Array.isArray(b))for(var L=b.length===1,D=0;D<I.source.length;D++){var O=L?b[0]:b[D];C.JSONArray(I,D,O)}else C.JSONArray(I,0,b);F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)}return I},addAtlasJSONHash:function(R,P,b,F){var I=null;if(P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I){if(Array.isArray(b))for(var L=0;L<b.length;L++)C.JSONHash(I,L,b[L]);else C.JSONHash(I,0,b);F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)}return I},addAtlasXML:function(R,P,b,F){var I=null;return P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I&&(C.AtlasXML(I,0,b),F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)),I},addUnityAtlas:function(R,P,b,F){var I=null;return P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I&&(C.UnityYAML(I,0,b),F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)),I},addSpriteSheet:function(R,P,b,F){var I=null;if(P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I){var L=I.source[0].width,D=I.source[0].height;C.SpriteSheet(I,0,0,0,L,D,b),F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)}return I},addSpriteSheetFromAtlas:function(R,P){if(!this.checkKey(R))return null;var b=v(P,"atlas",null),F=v(P,"frame",null);if(!(!b||!F)){var I=this.get(b),L=I.get(F);if(L){var D=L.source.image;D||(D=L.source.glTexture);var O=this.create(R,D);return L.trimmed?C.SpriteSheetFromAtlas(O,L,P):C.SpriteSheet(O,0,L.cutX,L.cutY,L.cutWidth,L.cutHeight,P),this.emit(c.ADD,R,O),this.emit(c.ADD_KEY+R,O),O}}},addUint8Array:function(R,P,b,F){if(!this.checkKey(R)||P.length/4!==b*F)return null;var I=this.create(R,P,b,F);return I.add("__BASE",0,0,0,b,F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I),I},create:function(R,P,b,F){var I=null;return this.checkKey(R)&&(I=new A(this,R,P,b,F),this.list[R]=I),I},exists:function(R){return this.list.hasOwnProperty(R)},get:function(R){return R===void 0&&(R="__DEFAULT"),this.list[R]?this.list[R]:R instanceof A?R:R instanceof l?R.texture:this.list.__MISSING},cloneFrame:function(R,P){if(this.list[R])return this.list[R].get(P).clone()},getFrame:function(R,P){if(this.list[R])return this.list[R].get(P)},parseFrame:function(R){if(R){if(typeof R=="string")return this.getFrame(R);if(Array.isArray(R)&&R.length===2)return this.getFrame(R[0],R[1]);if(E(R))return this.getFrame(R.key,R.frame);if(R instanceof A)return R.get();if(R instanceof l)return R}else return},getTextureKeys:function(){var R=[];for(var P in this.list)P!=="__DEFAULT"&&P!=="__MISSING"&&P!=="__WHITE"&&P!=="__NORMAL"&&R.push(P);return R},getPixel:function(R,P,b,F){var I=this.getFrame(b,F);if(I){R-=I.x,P-=I.y;var L=I.data.cut;if(R+=L.x,P+=L.y,R>=L.x&&R<L.r&&P>=L.y&&P<L.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,R,P,1,1,0,0,1,1);var O=D.getImageData(0,0,1,1);return new o(O.data[0],O.data[1],O.data[2],O.data[3])}}return null},getPixelAlpha:function(R,P,b,F){var I=this.getFrame(b,F);if(I){R-=I.x,P-=I.y;var L=I.data.cut;if(R+=L.x,P+=L.y,R>=L.x&&R<L.r&&P>=L.y&&P<L.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,R,P,1,1,0,0,1,1);var O=D.getImageData(0,0,1,1);return O.data[3]}}return null},setTexture:function(R,P,b){return this.list[P]&&(R.texture=this.list[P],R.frame=R.texture.get(b)),R},renameTexture:function(R,P){var b=this.get(R);return b&&R!==P?(b.key=P,this.list[P]=b,delete this.list[R],!0):!1},each:function(R,P){for(var b=[null],F=1;F<arguments.length;F++)b.push(arguments[F]);for(var I in this.list)b[0]=this.list[I],R.apply(P,b)},resetStamp:function(R,P){R===void 0&&(R=1),P===void 0&&(P=16777215);var b=this.stamp;return b.setCrop(),b.setPosition(0),b.setAngle(0),b.setScale(1),b.setAlpha(R),b.setTint(P),b.setTexture("__WHITE"),b},destroy:function(){for(var R in this.list)this.list[R].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,a.remove(this._tempCanvas)}});s.exports=M}),11876:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),g=e(83419),f=e(50030),o=e(29795),u=e(82751),r=new g({initialize:function(c,l,p,m,v){v===void 0&&(v=!1);var y=c.manager.game;this.renderer=y.renderer,this.texture=c,this.source=l,this.image=l.compressed?null:l,this.compressionAlgorithm=l.compressed?l.format:null,this.resolution=1,this.width=p||l.naturalWidth||l.videoWidth||l.width||0,this.height=m||l.naturalHeight||l.videoHeight||l.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=l instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&l instanceof HTMLVideoElement,this.isRenderTexture=l.type==="RenderTexture"||l.type==="DynamicTexture",this.isGLTexture=l instanceof u,this.isPowerOf2=f(this.width,this.height),this.glTexture=null,this.flipY=v,this.init(y)},init:function(h){var c=this.renderer;if(c){var l=this.source;if(c.gl){var p=this.image,m=this.flipY,v=this.width,y=this.height,E=this.scaleMode;this.isCanvas?this.glTexture=c.createCanvasTexture(p,!1,m):this.isVideo?this.glTexture=c.createVideoTexture(p,!1,m):this.isRenderTexture?this.glTexture=c.createTextureFromSource(null,v,y,E):this.isGLTexture?this.glTexture=l:this.compressionAlgorithm?this.glTexture=c.createTextureFromSource(l,void 0,void 0,E):l instanceof Uint8Array?this.glTexture=c.createUint8ArrayTexture(l,v,y,E):this.glTexture=c.createTextureFromSource(p,v,y,E)}else this.isRenderTexture&&(this.image=l.canvas)}h.config.antialias||this.setFilter(1)},setFilter:function(h){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,h),this.scaleMode=h},setFlipY:function(h){return h===void 0&&(h=!0),h===this.flipY?this:(this.flipY=h,this.update(),this)},update:function(){var h=this.renderer,c=this.image,l=this.flipY,p=h.gl;p&&this.isCanvas?h.updateCanvasTexture(c,this.glTexture,l):p&&this.isVideo&&h.updateVideoTexture(c,this.glTexture,l)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&a.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});s.exports=r}),19673:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LINEAR:0,NEAREST:1};s.exports=T}),44538:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addtexture"}),63486:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addtexture-"}),94851:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="onerror"}),29099:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="onload"}),8678:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="ready"}),86415:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removetexture"}),30879:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removetexture-"}),69442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADD:e(44538),ADD_KEY:e(63486),ERROR:e(94851),LOAD:e(29099),READY:e(8678),REMOVE:e(86415),REMOVE_KEY:e(30879)}}),27458:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),g=e(19673),f={CanvasTexture:e(57382),DynamicTexture:e(81320),Events:e(69442),FilterMode:g,Frame:e(4327),Parsers:e(61309),Texture:e(79237),TextureManager:e(17130),TextureSource:e(11876)};f=a(!1,f,g),s.exports=f}),89905:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(!g.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var f=e.source[a];e.add("__BASE",a,0,0,f.width,f.height);for(var o=g.getElementsByTagName("SubTexture"),u,r=0;r<o.length;r++){var h=o[r].attributes,c=h.name.value,l=parseInt(h.x.value,10),p=parseInt(h.y.value,10),m=parseInt(h.width.value,10),v=parseInt(h.height.value,10);if(u=e.add(c,a,l,p,m,v),h.frameX){var y=Math.abs(parseInt(h.frameX.value,10)),E=Math.abs(parseInt(h.frameY.value,10)),C=parseInt(h.frameWidth.value,10),w=parseInt(h.frameHeight.value,10);u.setTrim(m,v,y,E,C,w)}}return e};s.exports=T}),72893:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.source[a];return e.add("__BASE",a,0,0,g.width,g.height),e};s.exports=T}),4832:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.source[a];return e.add("__BASE",a,0,0,g.width,g.height),e};s.exports=T}),78566:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),g=function(f,o,u){if(!u.frames&&!u.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=f.source[o];f.add("__BASE",o,0,0,r.width,r.height);for(var h=Array.isArray(u.textures)?u.textures[o].frames:u.frames,c,l=0;l<h.length;l++){var p=h[l];if(c=f.add(p.filename,o,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+p.filename);continue}p.trimmed&&c.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(c.rotated=!0,c.updateUVsInverted());var m=p.anchor||p.pivot;m&&(c.customPivot=!0,c.pivotX=m.x,c.pivotY=m.y),p.scale9Borders&&c.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),c.customData=a(p)}for(var v in u)v!=="frames"&&(Array.isArray(u[v])?f.customData[v]=u[v].slice(0):f.customData[v]=u[v]);return f};s.exports=g}),39711:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),g=function(f,o,u){if(!u.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=f.source[o];f.add("__BASE",o,0,0,r.width,r.height);var h=u.frames,c;for(var l in h)if(h.hasOwnProperty(l)){var p=h[l];if(c=f.add(l,o,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+l);continue}p.trimmed&&c.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(c.rotated=!0,c.updateUVsInverted());var m=p.anchor||p.pivot;m&&(c.customPivot=!0,c.pivotX=m.x,c.pivotY=m.y),p.scale9Borders&&c.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),c.customData=a(p)}for(var v in u)v!=="frames"&&(Array.isArray(u[v])?f.customData[v]=u[v].slice(0):f.customData[v]=u[v]);return f};s.exports=g}),31403:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=[171,75,84,88,32,49,49,187,13,10,26,10],g,f=new Uint8Array(e,0,12);for(g=0;g<f.length;g++)if(f[g]!==a[g]){console.warn("KTXParser - Invalid file format");return}var o=Uint32Array.BYTES_PER_ELEMENT,u=new DataView(e,12,13*o),r=u.getUint32(0,!0)===67305985,h=u.getUint32(1*o,r);if(h!==0){console.warn("KTXParser - Only compressed formats supported");return}var c=u.getUint32(4*o,r),l=u.getUint32(6*o,r),p=u.getUint32(7*o,r),m=Math.max(1,u.getUint32(11*o,r)),v=u.getUint32(12*o,r),y=new Array(m),E=64+v,C=l,w=p;for(g=0;g<m;g++){var A=new Int32Array(e,E,1)[0];E+=4,y[g]={data:new Uint8Array(e,E,A),width:C,height:w},C=Math.max(1,C>>1),w=Math.max(1,w>>1),E+=A}return{mipmaps:y,width:l,height:p,internalFormat:c,compressed:!0,generateMipmap:!1}};s.exports=T}),82038:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(P,b,F,I,L,D,O){return O===void 0&&(O=16),Math.floor((P+F)/L)*Math.floor((b+I)/D)*O}function e(P,b){return P=Math.max(P,16),b=Math.max(b,8),P*b/4}function a(P,b){return P=Math.max(P,8),b=Math.max(b,8),P*b/2}function g(P,b){return Math.ceil(P/4)*Math.ceil(b/4)*16}function f(P,b){return T(P,b,3,3,4,4,8)}function o(P,b){return T(P,b,3,3,4,4)}function u(P,b){return T(P,b,4,3,5,4)}function r(P,b){return T(P,b,4,4,5,5)}function h(P,b){return T(P,b,5,4,6,5)}function c(P,b){return T(P,b,5,5,6,6)}function l(P,b){return T(P,b,7,4,8,5)}function p(P,b){return T(P,b,7,5,8,6)}function m(P,b){return T(P,b,7,7,8,8)}function v(P,b){return T(P,b,9,4,10,5)}function y(P,b){return T(P,b,9,5,10,6)}function E(P,b){return T(P,b,9,7,10,8)}function C(P,b){return T(P,b,9,9,10,10)}function w(P,b){return T(P,b,11,9,12,10)}function A(P,b){return T(P,b,11,11,12,12)}var M={0:{sizeFunc:e,glFormat:[35841]},1:{sizeFunc:e,glFormat:[35843]},2:{sizeFunc:a,glFormat:[35840]},3:{sizeFunc:a,glFormat:[35842]},6:{sizeFunc:f,glFormat:[36196]},7:{sizeFunc:f,glFormat:[33776,35916]},8:{sizeFunc:o,glFormat:[33777,35917]},9:{sizeFunc:o,glFormat:[33778,35918]},11:{sizeFunc:o,glFormat:[33779,35919]},14:{sizeFunc:g,glFormat:[36494,36495]},15:{sizeFunc:g,glFormat:[36492,36493]},22:{sizeFunc:f,glFormat:[37492,37493]},23:{sizeFunc:o,glFormat:[37496,37497]},24:{sizeFunc:f,glFormat:[37494,37495]},25:{sizeFunc:f,glFormat:[37488]},26:{sizeFunc:o,glFormat:[37490]},27:{sizeFunc:o,glFormat:[37808,37840]},28:{sizeFunc:u,glFormat:[37809,37841]},29:{sizeFunc:r,glFormat:[37810,37842]},30:{sizeFunc:h,glFormat:[37811,37843]},31:{sizeFunc:c,glFormat:[37812,37844]},32:{sizeFunc:l,glFormat:[37813,37845]},33:{sizeFunc:p,glFormat:[37814,37846]},34:{sizeFunc:m,glFormat:[37815,37847]},35:{sizeFunc:v,glFormat:[37816,37848]},36:{sizeFunc:y,glFormat:[37817,37849]},37:{sizeFunc:E,glFormat:[37818,37850]},38:{sizeFunc:C,glFormat:[37819,37851]},39:{sizeFunc:w,glFormat:[37820,37852]},40:{sizeFunc:A,glFormat:[37821,37853]}},R=function(P){for(var b=new Uint32Array(P,0,13),F=b[0],I=F===55727696,L=I?b[2]:b[3],D=b[4],O=M[L].glFormat[D],z=M[L].sizeFunc,_=b[11],X=b[7],H=b[6],U=52+b[12],G=new Uint8Array(P,U),N=new Array(_),W=0,V=X,$=H,j=0;j<_;j++){var k=z(V,$);N[j]={data:new Uint8Array(G.buffer,G.byteOffset+W,k),width:V,height:$},V=Math.max(1,V>>1),$=Math.max(1,$>>1),W+=k}return{mipmaps:N,width:X,height:H,internalFormat:O,compressed:!0,generateMipmap:!1}};s.exports=R}),75549:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),g=function(f,o,u,r,h,c,l){var p=a(l,"frameWidth",null),m=a(l,"frameHeight",p);if(p===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var v=f.source[o];f.add("__BASE",o,0,0,v.width,v.height);var y=a(l,"startFrame",0),E=a(l,"endFrame",-1),C=a(l,"margin",0),w=a(l,"spacing",0),A=Math.floor((h-C+w)/(p+w)),M=Math.floor((c-C+w)/(m+w)),R=A*M;R===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",f.key),(y>R||y<-R)&&(y=0),y<0&&(y=R+y),(E===-1||E>R||E<y)&&(E=R);for(var P=C,b=C,F=0,I=0,L=0,D=0;D<R;D++){F=0,I=0;var O=P+p,z=b+m;O>h&&(F=O-h),z>c&&(I=z-c),D>=y&&D<=E&&(f.add(L,o,u+P,r+b,p-F,m-I),L++),P+=p+w,P+p>h&&(P=C,b+=m+w)}return f};s.exports=g}),47534:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),g=function(f,o,u){var r=a(u,"frameWidth",null),h=a(u,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=f.source[0];f.add("__BASE",0,0,0,c.width,c.height),a(u,"startFrame",0),a(u,"endFrame",-1);for(var l=a(u,"margin",0),p=a(u,"spacing",0),m=o.cutX,v=o.cutY,y=o.cutWidth,E=o.cutHeight,C=o.realWidth,w=o.realHeight,A=Math.floor((C-l+p)/(r+p)),M=Math.floor((w-l+p)/(h+p)),R=o.x,P=r-R,b=r-(C-y-R),F=o.y,I=h-F,L=h-(w-E-F),D,O=l,z=l,_=0,X=0,H=0;H<M;H++){for(var U=H===0,G=H===M-1,N=0;N<A;N++){var W=N===0,V=N===A-1;if(D=f.add(_,X,m+O,v+z,r,h),W||U||V||G){var $=W?R:0,j=U?F:0,k=0,Q=0;W&&(k+=r-P),V&&(k+=r-b),U&&(Q+=h-I),G&&(Q+=h-L);var et=r-k,at=h-Q;D.cutWidth=et,D.cutHeight=at,D.setTrim(r,h,$,j,et,at)}O+=p,W?O+=P:V?O+=b:O+=r,_++}O=l,z+=p,U?z+=I:G?z+=L:z+=h}return f};s.exports=g}),86147:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=0,e=function(g,f,o,u){var r=T-u.y-u.height;g.add(o,f,u.x,r,u.width,u.height)},a=function(g,f,o){var u=g.source[f];g.add("__BASE",f,0,0,u.width,u.height),T=u.height;for(var r=o.split(`
`),h=/^[ ]*(- )*(\w+)+[: ]+(.*)/,c="",l="",p={x:0,y:0,width:0,height:0},m=0;m<r.length;m++){var v=r[m].match(h);if(v){var y=v[1]==="- ",E=v[2],C=v[3];if(y&&(l!==c&&(e(g,f,l,p),c=l),p={x:0,y:0,width:0,height:0}),E==="name"){l=C;continue}switch(E){case"x":case"y":case"width":case"height":p[E]=parseInt(C,10);break}}}return l!==c&&e(g,f,l,p),g};s.exports=a}),55222:((s,T,e)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50030),g=function(c){for(var l=c.mipmaps,p=1;p<l.length;p++){var m=l[p].width,v=l[p].height;if(!a(m,v))return console.warn("Mip level "+p+" is not a power-of-two size: "+m+"x"+v),!1}var y=h[c.internalFormat];return y?y(c):(console.warn("No format checker found for internal format "+c.internalFormat+". Assuming valid."),!0)};function f(c){for(var l=c.mipmaps,p=0;p<l.length;p++){var m=l[p].width,v=l[p].height;if((m<<p)%4!==0||(v<<p)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+p+" is "+m+"x"+v),!1}return!0}function o(){return!0}function u(c){var l=c.mipmaps,p=l[0];return a(p.width,p.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+p.width+"x"+p.height),!1)}function r(c){var l=c.mipmaps,p=l[0];return p.width%4!==0||p.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+p.width+"x"+p.height+" pixels"),!1):!0}var h={37488:o,37489:o,37490:o,37491:o,37492:o,37493:o,37494:o,37495:o,37496:o,37497:o,36196:o,37808:o,37809:o,37810:o,37811:o,37812:o,37813:o,37814:o,37815:o,37816:o,37817:o,37818:o,37819:o,37820:o,37821:o,37840:o,37841:o,37842:o,37843:o,37844:o,37845:o,37846:o,37847:o,37848:o,37849:o,37850:o,37851:o,37852:o,37853:o,36492:f,36493:f,36494:f,36495:f,36283:f,36284:f,36285:f,36286:f,35840:u,35841:u,35842:u,35843:u,33776:f,33777:f,33778:f,33779:f,35916:r,35917:r,35918:r,35919:r};s.exports=g}),61309:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AtlasXML:e(89905),Canvas:e(72893),Image:e(4832),JSONArray:e(78566),JSONHash:e(39711),KTXParser:e(31403),PVRParser:e(82038),SpriteSheet:e(75549),SpriteSheetFromAtlas:e(47534),UnityYAML:e(86147)}}),80341:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}}),16536:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o,u,r,h,c,l,p){(r===void 0||r<=0)&&(r=32),(h===void 0||h<=0)&&(h=32),c===void 0&&(c=0),l===void 0&&(l=0),this.name=o,this.firstgid=u|0,this.imageWidth=r|0,this.imageHeight=h|0,this.imageMargin=c|0,this.imageSpacing=l|0,this.properties=p||{},this.images=[],this.total=0},containsImageIndex:function(f){return f>=this.firstgid&&f<this.firstgid+this.total},addImage:function(f,o,u,r){return this.images.push({gid:f,image:o,width:u,height:r}),this.total++,this}});s.exports=g}),27462:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=new a({initialize:function(o){if(this.gids=[],o!==void 0)for(var u=0;u<o.length;++u)for(var r=o[u],h=0;h<r.total;++h)this.gids[r.firstgid+h]=r;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(f){this.gids=f?this._gids:void 0}},getTypeIncludingTile:function(f){if(f.type!==void 0&&f.type!=="")return f.type;if(!(!this.gids||f.gid===void 0)){var o=this.gids[f.gid];if(o){var u=o.getTileData(f.gid);if(u)return u.type}}},setTextureAndFrame:function(f,o,u,r){if(o===null&&this.gids&&r.gid!==void 0){var h=this.gids[r.gid];h&&(o===null&&h.image!==void 0&&(o=h.image.key),u===null&&(u=r.gid-h.firstgid),f.scene.textures.getFrame(o,u)||(o=null,u=null))}f.setTexture(o,u)},setPropertiesFromTiledObject:function(f,o){if(this.gids!==void 0&&o.gid!==void 0){var u=this.gids[o.gid];u!==void 0&&this.setFromJSON(f,u.getTileProperties(o.gid))}this.setFromJSON(f,o.properties)},setFromJSON:function(f,o){if(o){if(Array.isArray(o)){for(var u=0;u<o.length;u++){var r=o[u];f[r.name]!==void 0?f[r.name]=r.value:f.setData(r.name,r.value)}return}for(var h in o)f[h]!==void 0?f[h]=o[h]:f.setData(h,o[h])}}});s.exports=g}),31989:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),g=e(87010),f=e(46177),o=e(49075),u=function(r,h,c,l,p,m,v,y){c===void 0&&(c=32),l===void 0&&(l=32),p===void 0&&(p=10),m===void 0&&(m=10),y===void 0&&(y=!1);var E=null;if(Array.isArray(v)){var C=h!==void 0?h:"map";E=f(C,a.ARRAY_2D,v,c,l,y)}else if(h!==void 0){var w=r.cache.tilemap.get(h);w?E=f(h,w.format,w.data,c,l,y):console.warn("No map data found for key "+h)}return E===null&&(E=new g({tileWidth:c,tileHeight:l,width:p,height:m})),new o(r,E)};s.exports=u}),23029:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(31401),f=e(91907),o=e(62644),u=e(93232),r=new a({Mixins:[g.AlphaSingle,g.Flip,g.Visible],initialize:function(c,l,p,m,v,y,E,C){this.layer=c,this.index=l,this.x=p,this.y=m,this.width=v,this.height=y,this.right,this.bottom,this.baseWidth=E!==void 0?E:v,this.baseHeight=C!==void 0?C:y,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(h,c){return!(h<this.pixelX||c<this.pixelY||h>this.right||c>this.bottom)},copy:function(h){return this.index=h.index,this.alpha=h.alpha,this.properties=o(h.properties),this.visible=h.visible,this.setFlip(h.flipX,h.flipY),this.tint=h.tint,this.rotation=h.rotation,this.collideUp=h.collideUp,this.collideDown=h.collideDown,this.collideLeft=h.collideLeft,this.collideRight=h.collideRight,this.collisionCallback=h.collisionCallback,this.collisionCallbackContext=h.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(h){var c=this.tilemapLayer;if(c){var l=c.tileToWorldXY(this.x,this.y,void 0,h);return l.x}return this.x*this.baseWidth},getRight:function(h){var c=this.tilemapLayer;return c?this.getLeft(h)+this.width*c.scaleX:this.getLeft(h)+this.width},getTop:function(h){var c=this.tilemapLayer;if(c){var l=c.tileToWorldXY(this.x,this.y,void 0,h);return l.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(h){var c=this.tilemapLayer;return c?this.getTop(h)+this.height*c.scaleY:this.getTop(h)+this.height},getBounds:function(h,c){return c===void 0&&(c=new u),c.x=this.getLeft(h),c.y=this.getTop(h),c.width=this.getRight(h)-c.x,c.height=this.getBottom(h)-c.y,c},getCenterX:function(h){return(this.getLeft(h)+this.getRight(h))/2},getCenterY:function(h){return(this.getTop(h)+this.getBottom(h))/2},intersects:function(h,c,l,p){return!(l<=this.pixelX||p<=this.pixelY||h>=this.right||c>=this.bottom)},isInteresting:function(h,c){return h&&c?this.canCollide||this.hasInterestingFace:h?this.collides:c?this.hasInterestingFace:!1},resetCollision:function(h){if(h===void 0&&(h=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,h){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(h,c,l,p,m){if(c===void 0&&(c=h),l===void 0&&(l=h),p===void 0&&(p=h),m===void 0&&(m=!0),this.collideLeft=h,this.collideRight=c,this.collideUp=l,this.collideDown=p,this.faceLeft=h,this.faceRight=c,this.faceTop=l,this.faceBottom=p,m){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(h,c){return h===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=h,this.collisionCallbackContext=c),this},setSize:function(h,c,l,p){return h!==void 0&&(this.width=h),c!==void 0&&(this.height=c),l!==void 0&&(this.baseWidth=l),p!==void 0&&(this.baseHeight=p),this.updatePixelXY(),this},updatePixelXY:function(){var h=this.layer.orientation;if(h===f.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(h===f.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(h===f.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(h===f.HEXAGONAL){var c=this.layer.staggerAxis,l=this.layer.staggerIndex,p=this.layer.hexSideLength,m,v;c==="y"?(v=(this.baseHeight-p)/2+p,l==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*v):c==="x"&&(m=(this.baseWidth-p)/2+p,this.pixelX=this.x*m,l==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var h=this.layer.tilemapLayer;if(h){var c=h.gidMap[this.index];if(c)return c}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var h=this.tilemapLayer;return h?h.tilemap:null}}});s.exports=r}),49075:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84101),g=e(83419),f=e(39506),o=e(80341),u=e(95540),r=e(14977),h=e(27462),c=e(91907),l=e(36305),p=e(19133),m=e(68287),v=e(23029),y=e(81086),E=e(20442),C=e(33629),w=new g({initialize:function(M,R){this.scene=M,this.tileWidth=R.tileWidth,this.tileHeight=R.tileHeight,this.width=R.width,this.height=R.height,this.orientation=R.orientation,this.renderOrder=R.renderOrder,this.format=R.format,this.version=R.version,this.properties=R.properties,this.widthInPixels=R.widthInPixels,this.heightInPixels=R.heightInPixels,this.imageCollections=R.imageCollections,this.images=R.images,this.layers=R.layers,this.tiles=R.tiles,this.tilesets=R.tilesets,this.objects=R.objects,this.currentLayerIndex=0,this.hexSideLength=R.hexSideLength;var P=this.orientation;this._convert={WorldToTileXY:y.GetWorldToTileXYFunction(P),WorldToTileX:y.GetWorldToTileXFunction(P),WorldToTileY:y.GetWorldToTileYFunction(P),TileToWorldXY:y.GetTileToWorldXYFunction(P),TileToWorldX:y.GetTileToWorldXFunction(P),TileToWorldY:y.GetTileToWorldYFunction(P),GetTileCorners:y.GetTileCornersFunction(P)}},setRenderOrder:function(A){var M=["right-down","left-down","right-up","left-up"];return typeof A=="number"&&(A=M[A]),M.indexOf(A)>-1&&(this.renderOrder=A),this},addTilesetImage:function(A,M,R,P,b,F,I,L){if(A===void 0)return null;M==null&&(M=A);var D=this.scene.sys.textures;if(!D.exists(M))return console.warn('Texture key "%s" not found',M),null;var O=D.get(M),z=this.getTilesetIndex(A);if(z===null&&this.format===o.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',A,this.tilesets),null;var _=this.tilesets[z];return _?((R||P)&&_.setTileSize(R,P),(b||F)&&_.setSpacing(b,F),_.setImage(O),_):(R===void 0&&(R=this.tileWidth),P===void 0&&(P=this.tileHeight),b===void 0&&(b=0),F===void 0&&(F=0),I===void 0&&(I=0),L===void 0&&(L={x:0,y:0}),_=new C(A,I,R,P,b,F,void 0,void 0,L),_.setImage(O),this.tilesets.push(_),this.tiles=a(this),_)},copy:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L!==null?(y.Copy(A,M,R,P,b,F,I,L),this):null},createBlankLayer:function(A,M,R,P,b,F,I,L){R===void 0&&(R=0),P===void 0&&(P=0),b===void 0&&(b=this.width),F===void 0&&(F=this.height),I===void 0&&(I=this.tileWidth),L===void 0&&(L=this.tileHeight);var D=this.getLayerIndex(A);if(D!==null)return console.warn("Invalid Tilemap Layer ID: "+A),null;for(var O=new r({name:A,tileWidth:I,tileHeight:L,width:b,height:F,orientation:this.orientation,hexSideLength:this.hexSideLength}),z,_=0;_<F;_++){z=[];for(var X=0;X<b;X++)z.push(new v(O,-1,X,_,I,L,this.tileWidth,this.tileHeight));O.data.push(z)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var H=new E(this.scene,this,this.currentLayerIndex,M,R,P);return H.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(H),H},createLayer:function(A,M,R,P){var b=this.getLayerIndex(A);if(b===null)return console.warn("Invalid Tilemap Layer ID: "+A),typeof A=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var F=this.layers[b];if(F.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+A),null;this.currentLayerIndex=b,R===void 0&&(R=F.x),P===void 0&&(P=F.y);var I=new E(this.scene,this,b,M,R,P);return I.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(I),I},createFromObjects:function(A,M,R){R===void 0&&(R=!0);var P=[],b=this.getObjectLayer(A);if(!b)return console.warn("createFromObjects: Invalid objectLayerName given: "+A),P;var F=new h(R?this.tilesets:void 0);Array.isArray(M)||(M=[M]);for(var I=b.objects,L=0;L<M.length;L++){var D=M[L],O=u(D,"id",null),z=u(D,"gid",null),_=u(D,"name",null),X=u(D,"type",null);F.enabled=!u(D,"ignoreTileset",null);for(var H,U=[],G=0;G<I.length;G++)H=I[G],(O===null&&z===null&&_===null&&X===null||O!==null&&H.id===O||z!==null&&H.gid===z||_!==null&&H.name===_||X!==null&&F.getTypeIncludingTile(H)===X)&&U.push(H);for(var N=u(D,"classType",m),W=u(D,"scene",this.scene),V=u(D,"container",null),$=u(D,"key",null),j=u(D,"frame",null),k=0;k<U.length;k++){H=U[k];var Q=new N(W);if(Q.setName(H.name),Q.setPosition(H.x,H.y),F.setTextureAndFrame(Q,$,j,H),H.width&&(Q.displayWidth=H.width),H.height&&(Q.displayHeight=H.height),this.orientation===c.ISOMETRIC){var et=this.tileWidth/this.tileHeight,at={x:Q.x-Q.y,y:(Q.x+Q.y)/et};Q.x=at.x,Q.y=at.y}var q={x:Q.originX*H.width,y:(Q.originY-(H.gid?1:0))*H.height};if(H.rotation){var ft=f(H.rotation);l(q,ft),Q.rotation=ft}Q.x+=q.x,Q.y+=q.y,(H.flippedHorizontal!==void 0||H.flippedVertical!==void 0)&&Q.setFlip(H.flippedHorizontal,H.flippedVertical),H.visible||(Q.visible=!1),F.setPropertiesFromTiledObject(Q,H),V?V.add(Q):W.add.existing(Q),P.push(Q)}}return P},createFromTiles:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:y.CreateFromTiles(A,M,R,P,b,F)},fill:function(A,M,R,P,b,F,I){return F===void 0&&(F=!0),I=this.getLayer(I),I===null?null:(y.Fill(A,M,R,P,b,F,I),this)},filterObjects:function(A,M,R){if(typeof A=="string"){var P=A;if(A=this.getObjectLayer(A),!A)return console.warn("No object layer found with the name: "+P),null}return A.objects.filter(M,R)},filterTiles:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L===null?null:y.FilterTiles(A,M,R,P,b,F,I,L)},findByIndex:function(A,M,R,P){return P=this.getLayer(P),P===null?null:y.FindByIndex(A,M,R,P)},findObject:function(A,M,R){if(typeof A=="string"){var P=A;if(A=this.getObjectLayer(A),!A)return console.warn("No object layer found with the name: "+P),null}return A.objects.find(M,R)||null},findTile:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L===null?null:y.FindTile(A,M,R,P,b,F,I,L)},forEachTile:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L===null?null:(y.ForEachTile(A,M,R,P,b,F,I,L),this)},getImageIndex:function(A){return this.getIndex(this.images,A)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(A){return A.name})},getIndex:function(A,M){for(var R=0;R<A.length;R++)if(A[R].name===M)return R;return null},getLayer:function(A){var M=this.getLayerIndex(A);return M!==null?this.layers[M]:null},getObjectLayer:function(A){var M=this.getIndex(this.objects,A);return M!==null?this.objects[M]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(A){return A.name})},getLayerIndex:function(A){return A===void 0?this.currentLayerIndex:typeof A=="string"?this.getLayerIndexByName(A):typeof A=="number"&&A<this.layers.length?A:A instanceof E&&A.tilemap===this?A.layerIndex:null},getLayerIndexByName:function(A){return this.getIndex(this.layers,A)},getTileAt:function(A,M,R,P){return P=this.getLayer(P),P===null?null:y.GetTileAt(A,M,R,P)},getTileAtWorldXY:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:y.GetTileAtWorldXY(A,M,R,P,b)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(A){return A.name})},getTilesWithin:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:y.GetTilesWithin(A,M,R,P,b,F)},getTilesWithinShape:function(A,M,R,P){return P=this.getLayer(P),P===null?null:y.GetTilesWithinShape(A,M,R,P)},getTilesWithinWorldXY:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:y.GetTilesWithinWorldXY(A,M,R,P,b,F,I)},getTileset:function(A){var M=this.getIndex(this.tilesets,A);return M!==null?this.tilesets[M]:null},getTilesetIndex:function(A){return this.getIndex(this.tilesets,A)},hasTileAt:function(A,M,R){return R=this.getLayer(R),R===null?null:y.HasTileAt(A,M,R)},hasTileAtWorldXY:function(A,M,R,P){return P=this.getLayer(P),P===null?null:y.HasTileAtWorldXY(A,M,R,P)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(A){this.setLayer(A)}},putTileAt:function(A,M,R,P,b){return P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:y.PutTileAt(A,M,R,P,b)},putTileAtWorldXY:function(A,M,R,P,b,F){return P===void 0&&(P=!0),F=this.getLayer(F),F===null?null:y.PutTileAtWorldXY(A,M,R,P,b,F)},putTilesAt:function(A,M,R,P,b){return P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:(y.PutTilesAt(A,M,R,P,b),this)},randomize:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:(y.Randomize(A,M,R,P,b,F),this)},calculateFacesAt:function(A,M,R){return R=this.getLayer(R),R===null?null:(y.CalculateFacesAt(A,M,R),this)},calculateFacesWithin:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:(y.CalculateFacesWithin(A,M,R,P,b),this)},removeLayer:function(A){var M=this.getLayerIndex(A);if(M!==null){p(this.layers,M);for(var R=M;R<this.layers.length;R++)this.layers[R].tilemapLayer&&this.layers[R].tilemapLayer.layerIndex--;return this.currentLayerIndex===M&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(A){var M=this.getLayerIndex(A);return M!==null?(A=this.layers[M],A.tilemapLayer.destroy(),p(this.layers,M),this.currentLayerIndex===M&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var A=this.layers,M=0;M<A.length;M++)A[M].tilemapLayer&&A[M].tilemapLayer.destroy(!1);return A.length=0,this.currentLayerIndex=0,this},removeTile:function(A,M,R){M===void 0&&(M=-1),R===void 0&&(R=!0);var P=[];Array.isArray(A)||(A=[A]);for(var b=0;b<A.length;b++){var F=A[b];P.push(this.removeTileAt(F.x,F.y,!0,R,F.tilemapLayer)),M>-1&&this.putTileAt(M,F.x,F.y,R,F.tilemapLayer)}return P},removeTileAt:function(A,M,R,P,b){return R===void 0&&(R=!0),P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:y.RemoveTileAt(A,M,R,P,b)},removeTileAtWorldXY:function(A,M,R,P,b,F){return R===void 0&&(R=!0),P===void 0&&(P=!0),F=this.getLayer(F),F===null?null:y.RemoveTileAtWorldXY(A,M,R,P,b,F)},renderDebug:function(A,M,R){return R=this.getLayer(R),R===null?null:(this.orientation===c.ORTHOGONAL&&y.RenderDebug(A,M,R),this)},renderDebugFull:function(A,M){for(var R=this.layers,P=0;P<R.length;P++)y.RenderDebug(A,M,R[P]);return this},replaceByIndex:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:(y.ReplaceByIndex(A,M,R,P,b,F,I),this)},setCollision:function(A,M,R,P,b){return M===void 0&&(M=!0),R===void 0&&(R=!0),b===void 0&&(b=!0),P=this.getLayer(P),P===null?null:(y.SetCollision(A,M,R,P,b),this)},setCollisionBetween:function(A,M,R,P,b){return R===void 0&&(R=!0),P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:(y.SetCollisionBetween(A,M,R,P,b),this)},setCollisionByProperty:function(A,M,R,P){return M===void 0&&(M=!0),R===void 0&&(R=!0),P=this.getLayer(P),P===null?null:(y.SetCollisionByProperty(A,M,R,P),this)},setCollisionByExclusion:function(A,M,R,P){return M===void 0&&(M=!0),R===void 0&&(R=!0),P=this.getLayer(P),P===null?null:(y.SetCollisionByExclusion(A,M,R,P),this)},setCollisionFromCollisionGroup:function(A,M,R){return A===void 0&&(A=!0),M===void 0&&(M=!0),R=this.getLayer(R),R===null?null:(y.SetCollisionFromCollisionGroup(A,M,R),this)},setTileIndexCallback:function(A,M,R,P){return P=this.getLayer(P),P===null?null:(y.SetTileIndexCallback(A,M,R,P),this)},setTileLocationCallback:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:(y.SetTileLocationCallback(A,M,R,P,b,F,I),this)},setLayer:function(A){var M=this.getLayerIndex(A);return M!==null&&(this.currentLayerIndex=M),this},setBaseTileSize:function(A,M){this.tileWidth=A,this.tileHeight=M,this.widthInPixels=this.width*A,this.heightInPixels=this.height*M;for(var R=0;R<this.layers.length;R++){this.layers[R].baseTileWidth=A,this.layers[R].baseTileHeight=M;for(var P=this.layers[R].data,b=this.layers[R].width,F=this.layers[R].height,I=0;I<F;I++)for(var L=0;L<b;L++){var D=P[I][L];D!==null&&D.setSize(void 0,void 0,A,M)}}return this},setLayerTileSize:function(A,M,R){if(R=this.getLayer(R),R===null)return this;R.tileWidth=A,R.tileHeight=M;for(var P=R.data,b=R.width,F=R.height,I=0;I<F;I++)for(var L=0;L<b;L++){var D=P[I][L];D!==null&&D.setSize(A,M)}return this},shuffle:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:(y.Shuffle(A,M,R,P,b),this)},swapByIndex:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:(y.SwapByIndex(A,M,R,P,b,F,I),this)},tileToWorldX:function(A,M,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldX(A,M,R)},tileToWorldY:function(A,M,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldY(A,M,R)},tileToWorldXY:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:this._convert.TileToWorldXY(A,M,R,P,b)},getTileCorners:function(A,M,R,P){return P=this.getLayer(P),P===null?null:this._convert.GetTileCorners(A,M,R,P)},weightedRandomize:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:(y.WeightedRandomize(M,R,P,b,A,F),this)},worldToTileX:function(A,M,R,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileX(A,M,R,P)},worldToTileY:function(A,M,R,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileY(A,M,R,P)},worldToTileXY:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:this._convert.WorldToTileXY(A,M,R,P,b,F)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});s.exports=w}),45939:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),g=e(31989);a.register("tilemap",function(f){var o=f!==void 0?f:{};return g(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})}),46029:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),g=e(31989);a.register("tilemap",function(f,o,u,r,h,c,l){return f===null&&(f=void 0),o===null&&(o=void 0),u===null&&(u=void 0),r===null&&(r=void 0),h===null&&(h=void 0),g(this.scene,f,o,u,r,h,c,l)})}),20442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(78389),f=e(31401),o=e(95643),u=e(81086),r=e(19218),h=e(26099),c=new a({Extends:o,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.PostPipeline,f.Transform,f.Visible,f.ScrollFactor,g,r],initialize:function(p,m,v,y,E,C){o.call(this,p,"TilemapLayer"),this.isTilemap=!0,this.tilemap=m,this.layerIndex=v,this.layer=m.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=u.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new h,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(y),this.setAlpha(this.layer.alpha),this.setPosition(E,C),this.setOrigin(0,0),this.setSize(m.tileWidth*this.layer.width,m.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(l){var p=[],m=[],v=this.tilemap;Array.isArray(l)||(l=[l]);for(var y=0;y<l.length;y++){var E=l[y];if(typeof E=="string"&&(E=v.getTileset(E)),E){m.push(E);for(var C=E.firstgid,w=0;w<E.total;w++)p[C+w]=E}}this.gidMap=p,this.tileset=m},setRenderOrder:function(l){var p=["right-down","left-down","right-up","left-up"];return typeof l=="string"&&(l=p.indexOf(l)),l>=0&&l<4&&(this._renderOrder=l),this},calculateFacesAt:function(l,p){return u.CalculateFacesAt(l,p,this.layer),this},calculateFacesWithin:function(l,p,m,v){return u.CalculateFacesWithin(l,p,m,v,this.layer),this},createFromTiles:function(l,p,m,v,y){return u.CreateFromTiles(l,p,m,v,y,this.layer)},cull:function(l){return this.cullCallback(this.layer,l,this.culledTiles,this._renderOrder)},copy:function(l,p,m,v,y,E,C){return u.Copy(l,p,m,v,y,E,C,this.layer),this},fill:function(l,p,m,v,y,E){return u.Fill(l,p,m,v,y,E,this.layer),this},filterTiles:function(l,p,m,v,y,E,C){return u.FilterTiles(l,p,m,v,y,E,C,this.layer)},findByIndex:function(l,p,m){return u.FindByIndex(l,p,m,this.layer)},findTile:function(l,p,m,v,y,E,C){return u.FindTile(l,p,m,v,y,E,C,this.layer)},forEachTile:function(l,p,m,v,y,E,C){return u.ForEachTile(l,p,m,v,y,E,C,this.layer),this},setTint:function(l,p,m,v,y,E){l===void 0&&(l=16777215);var C=function(w){w.tint=l,w.tintFill=!1};return this.forEachTile(C,this,p,m,v,y,E)},setTintFill:function(l,p,m,v,y,E){l===void 0&&(l=16777215);var C=function(w){w.tint=l,w.tintFill=!0};return this.forEachTile(C,this,p,m,v,y,E)},getTileAt:function(l,p,m){return u.GetTileAt(l,p,m,this.layer)},getTileAtWorldXY:function(l,p,m,v){return u.GetTileAtWorldXY(l,p,m,v,this.layer)},getIsoTileAtWorldXY:function(l,p,m,v,y){m===void 0&&(m=!0);var E=this.tempVec;return u.IsometricWorldToTileXY(l,p,!0,E,y,this.layer,m),this.getTileAt(E.x,E.y,v)},getTilesWithin:function(l,p,m,v,y){return u.GetTilesWithin(l,p,m,v,y,this.layer)},getTilesWithinShape:function(l,p,m){return u.GetTilesWithinShape(l,p,m,this.layer)},getTilesWithinWorldXY:function(l,p,m,v,y,E){return u.GetTilesWithinWorldXY(l,p,m,v,y,E,this.layer)},hasTileAt:function(l,p){return u.HasTileAt(l,p,this.layer)},hasTileAtWorldXY:function(l,p,m){return u.HasTileAtWorldXY(l,p,m,this.layer)},putTileAt:function(l,p,m,v){return u.PutTileAt(l,p,m,v,this.layer)},putTileAtWorldXY:function(l,p,m,v,y){return u.PutTileAtWorldXY(l,p,m,v,y,this.layer)},putTilesAt:function(l,p,m,v){return u.PutTilesAt(l,p,m,v,this.layer),this},randomize:function(l,p,m,v,y){return u.Randomize(l,p,m,v,y,this.layer),this},removeTileAt:function(l,p,m,v){return u.RemoveTileAt(l,p,m,v,this.layer)},removeTileAtWorldXY:function(l,p,m,v,y){return u.RemoveTileAtWorldXY(l,p,m,v,y,this.layer)},renderDebug:function(l,p){return u.RenderDebug(l,p,this.layer),this},replaceByIndex:function(l,p,m,v,y,E){return u.ReplaceByIndex(l,p,m,v,y,E,this.layer),this},setSkipCull:function(l){return l===void 0&&(l=!0),this.skipCull=l,this},setCullPadding:function(l,p){return l===void 0&&(l=1),p===void 0&&(p=1),this.cullPaddingX=l,this.cullPaddingY=p,this},setCollision:function(l,p,m,v){return u.SetCollision(l,p,m,this.layer,v),this},setCollisionBetween:function(l,p,m,v){return u.SetCollisionBetween(l,p,m,v,this.layer),this},setCollisionByProperty:function(l,p,m){return u.SetCollisionByProperty(l,p,m,this.layer),this},setCollisionByExclusion:function(l,p,m){return u.SetCollisionByExclusion(l,p,m,this.layer),this},setCollisionFromCollisionGroup:function(l,p){return u.SetCollisionFromCollisionGroup(l,p,this.layer),this},setTileIndexCallback:function(l,p,m){return u.SetTileIndexCallback(l,p,m,this.layer),this},setTileLocationCallback:function(l,p,m,v,y,E){return u.SetTileLocationCallback(l,p,m,v,y,E,this.layer),this},shuffle:function(l,p,m,v){return u.Shuffle(l,p,m,v,this.layer),this},swapByIndex:function(l,p,m,v,y,E){return u.SwapByIndex(l,p,m,v,y,E,this.layer),this},tileToWorldX:function(l,p){return this.tilemap.tileToWorldX(l,p,this)},tileToWorldY:function(l,p){return this.tilemap.tileToWorldY(l,p,this)},tileToWorldXY:function(l,p,m,v){return this.tilemap.tileToWorldXY(l,p,m,v,this)},getTileCorners:function(l,p,m){return this.tilemap.getTileCorners(l,p,m,this)},weightedRandomize:function(l,p,m,v,y){return u.WeightedRandomize(p,m,v,y,l,this.layer),this},worldToTileX:function(l,p,m){return this.tilemap.worldToTileX(l,p,m,this)},worldToTileY:function(l,p,m){return this.tilemap.worldToTileY(l,p,m,this)},worldToTileXY:function(l,p,m,v,y){return this.tilemap.worldToTileXY(l,p,m,v,y,this)},destroy:function(l){l===void 0&&(l=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),l&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],o.prototype.destroy.call(this))}});s.exports=c}),16153:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),g=new a,f=new a,o=new a,u=function(r,h,c,l){var p=h.cull(c),m=p.length,v=c.alpha*h.alpha;if(!(m===0||v<=0)){var y=g,E=f,C=o;E.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),y.copyFrom(c.matrix);var w=r.currentContext,A=h.gidMap;w.save(),l?(y.multiplyWithOffset(l,-c.scrollX*h.scrollFactorX,-c.scrollY*h.scrollFactorY),E.e=h.x,E.f=h.y,y.multiply(E,C),C.copyToContext(w)):(E.e-=c.scrollX*h.scrollFactorX,E.f-=c.scrollY*h.scrollFactorY,E.copyToContext(w)),(!r.antialias||h.scaleX>1||h.scaleY>1)&&(w.imageSmoothingEnabled=!1);for(var M=0;M<m;M++){var R=p[M],P=A[R.index];if(P){var b=P.image.getSourceImage(),F=P.getTileTextureCoordinates(R.index),I=P.tileWidth,L=P.tileHeight;if(!(F===null||I===0||L===0)){var D=I*.5,O=L*.5;F.x+=P.tileOffset.x,F.y+=P.tileOffset.y,w.save(),w.translate(R.pixelX+D,R.pixelY+O),R.rotation!==0&&w.rotate(R.rotation),(R.flipX||R.flipY)&&w.scale(R.flipX?-1:1,R.flipY?-1:1),w.globalAlpha=v*R.alpha,w.drawImage(b,F.x,F.y,I,L,-D,-O,I,L),w.restore()}}}w.restore()}};s.exports=u}),19218:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),g=a,f=a;g=e(99558),f=e(16153),s.exports={renderWebGL:g,renderCanvas:f}}),99558:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),g=function(f,o,u){var r=o.cull(u),h=r.length,c=u.alpha*o.alpha;if(!(h===0||c<=0)){var l=o.gidMap,p=f.pipelines.set(o.pipeline,o),m=a.getTintAppendFloatAlpha,v=o.scrollFactorX,y=o.scrollFactorY,E=o.x,C=o.y,w=o.scaleX,A=o.scaleY;f.pipelines.preBatch(o);for(var M=0;M<h;M++){var R=r[M],P=l[R.index];if(P){var b=P.getTileTextureCoordinates(R.index),F=P.tileWidth,I=P.tileHeight;if(!(!b||F===0||I===0)){var L=F*.5,D=I*.5,O=P.glTexture,z=p.setTexture2D(O,o),_=F,X=I,H=b.x,U=b.y,G=P.tileOffset.x,N=P.tileOffset.y,W=m(R.tint,c*R.alpha);p.batchTexture(o,O,O.width,O.height,E+R.pixelX*w+(L*w-G),C+R.pixelY*A+(D*A-N),F,I,w,A,R.rotation,R.flipX,R.flipY,v,y,L,D,H,U,_,X,W,W,W,W,R.tintFill,0,0,u,null,!0,z,!0)}}}f.pipelines.postBatch(o)}};s.exports=g}),33629:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(26099),f=new a({initialize:function(u,r,h,c,l,p,m,v,y){(h===void 0||h<=0)&&(h=32),(c===void 0||c<=0)&&(c=32),l===void 0&&(l=0),p===void 0&&(p=0),m===void 0&&(m={}),v===void 0&&(v={}),this.name=u,this.firstgid=r,this.tileWidth=h,this.tileHeight=c,this.tileMargin=l,this.tileSpacing=p,this.tileProperties=m,this.tileData=v,this.tileOffset=new g,y!==void 0&&this.tileOffset.set(y.x,y.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(o){return this.containsTileIndex(o)?this.tileProperties[o-this.firstgid]:null},getTileData:function(o){return this.containsTileIndex(o)?this.tileData[o-this.firstgid]:null},getTileCollisionGroup:function(o){var u=this.getTileData(o);return u&&u.objectgroup?u.objectgroup:null},containsTileIndex:function(o){return o>=this.firstgid&&o<this.firstgid+this.total},getTileTextureCoordinates:function(o){return this.containsTileIndex(o)?this.texCoordinates[o-this.firstgid]:null},setImage:function(o){this.image=o;var u=o.get(),r=o.getFrameBounds();return this.glTexture=u.source.glTexture,u.width>r.width||u.height>r.height?this.updateTileData(u.width,u.height):this.updateTileData(r.width,r.height,r.x,r.y),this},setTileSize:function(o,u){return o!==void 0&&(this.tileWidth=o),u!==void 0&&(this.tileHeight=u),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(o,u){return o!==void 0&&(this.tileMargin=o),u!==void 0&&(this.tileSpacing=u),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(o,u,r,h){r===void 0&&(r=0),h===void 0&&(h=0);var c=(u-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),l=(o-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(c%1!==0||l%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),c=Math.floor(c),l=Math.floor(l),this.rows=c,this.columns=l,this.total=c*l,this.texCoordinates.length=0;for(var p=this.tileMargin+r,m=this.tileMargin+h,v=0;v<this.rows;v++){for(var y=0;y<this.columns;y++)this.texCoordinates.push({x:p,y:m}),p+=this.tileWidth+this.tileSpacing;p=this.tileMargin+r,m+=this.tileHeight+this.tileSpacing}return this}});s.exports=f}),72023:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),g=function(f,o,u){var r=a(f,o,!0,u),h=a(f,o-1,!0,u),c=a(f,o+1,!0,u),l=a(f-1,o,!0,u),p=a(f+1,o,!0,u),m=r&&r.collides;return m&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),h&&h.collides&&(m&&(r.faceTop=!1),h.faceBottom=!m),c&&c.collides&&(m&&(r.faceBottom=!1),c.faceTop=!m),l&&l.collides&&(m&&(r.faceLeft=!1),l.faceRight=!m),p&&p.collides&&(m&&(r.faceRight=!1),p.faceLeft=!m),r&&!r.collides&&r.resetFaces(),r};s.exports=g}),42573:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),g=e(7386),f=function(o,u,r,h,c){for(var l=null,p=null,m=null,v=null,y=g(o,u,r,h,null,c),E=0;E<y.length;E++){var C=y[E];C&&(C.collides?(l=a(C.x,C.y-1,!0,c),p=a(C.x,C.y+1,!0,c),m=a(C.x-1,C.y,!0,c),v=a(C.x+1,C.y,!0,c),C.faceTop=!(l&&l.collides),C.faceBottom=!(p&&p.collides),C.faceLeft=!(m&&m.collides),C.faceRight=!(v&&v.collides)):C.resetFaces())}};s.exports=f}),33528:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=new a,f=function(o,u,r,h){var c=r.tilemapLayer,l=c.cullPaddingX,p=c.cullPaddingY,m=c.tilemap.tileToWorldXY(o,u,g,h,c);return m.x>h.worldView.x+c.scaleX*r.tileWidth*(-l-.5)&&m.x<h.worldView.right+c.scaleX*r.tileWidth*(l-.5)&&m.y>h.worldView.y+c.scaleY*r.tileHeight*(-p-1)&&m.y<h.worldView.bottom+c.scaleY*r.tileHeight*(p-.5)};s.exports=f}),1785:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42573),g=e(7386),f=e(62991),o=e(23029),u=function(r,h,c,l,p,m,v,y){v===void 0&&(v=!0);var E=g(r,h,c,l,null,y),C=[];E.forEach(function(F){var I=new o(F.layer,F.index,F.x,F.y,F.width,F.height,F.baseWidth,F.baseHeight);I.copy(F),C.push(I)});for(var w=p-r,A=m-h,M=0;M<C.length;M++){var R=C[M],P=R.x+w,b=R.y+A;f(P,b,y)&&y.data[b][P]&&(R.x=P,R.y=b,R.updatePixelXY(),y.data[b][P]=R)}v&&a(p-1,m-1,c+2,l+2,y),E.length=0,C.length=0};s.exports=u}),78419:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),g=e(7386),f=e(27987),o=function(u,r,h,c,l,p){h||(h={}),Array.isArray(u)||(u=[u]);var m=p.tilemapLayer;c||(c=m.scene),l||(l=c.cameras.main);var v=p.width,y=p.height,E=g(0,0,v,y,null,p),C=[],w,A=function(b,F,I){for(var L=0;L<I.length;L++){var D=I[L];b.hasOwnProperty(D)||(b[D]=F[D])}};for(w=0;w<E.length;w++){var M=E[w],R=a(h);if(u.indexOf(M.index)!==-1){var P=m.tileToWorldXY(M.x,M.y,void 0,l,p);R.x=P.x,R.y=P.y,A(R,M,["rotation","flipX","flipY","alpha","visible","tint"]),R.hasOwnProperty("origin")||(R.x+=M.width*.5,R.y+=M.height*.5),R.hasOwnProperty("useSpriteSheet")&&(R.key=M.tileset.image,R.frame=M.index-M.tileset.firstgid),C.push(c.make.sprite(R))}}if(Array.isArray(r))for(w=0;w<u.length;w++)f(u[w],r[w],0,0,v,y,p);else if(r!==null)for(w=0;w<u.length;w++)f(u[w],r,0,0,v,y,p);return C};s.exports=o}),19545:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),g=e(63448),f=e(56583),o=new a,u=function(r,h){var c=r.tilemapLayer.tilemap,l=r.tilemapLayer,p=Math.floor(c.tileWidth*l.scaleX),m=Math.floor(c.tileHeight*l.scaleY),v=f(h.worldView.x-l.x,p,0,!0)-l.cullPaddingX,y=g(h.worldView.right-l.x,p,0,!0)+l.cullPaddingX,E=f(h.worldView.y-l.y,m,0,!0)-l.cullPaddingY,C=g(h.worldView.bottom-l.y,m,0,!0)+l.cullPaddingY;return o.setTo(v,E,y-v,C-E)};s.exports=u}),30003:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19545),g=e(32483),f=function(o,u,r,h){r===void 0&&(r=[]),h===void 0&&(h=0),r.length=0;var c=o.tilemapLayer,l=a(o,u);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(l.left=0,l.right=o.width,l.top=0,l.bottom=o.height),g(o,l,h,r),r};s.exports=f}),35137:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=e(42573),f=e(20576),o=function(u,r,h,c,l,p,m){for(var v=m.collideIndexes.indexOf(u)!==-1,y=a(r,h,c,l,null,m),E=0;E<y.length;E++)y[E].index=u,f(y[E],v);p&&g(r-1,h-1,c+2,l+2,m)};s.exports=o}),40253:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=function(f,o,u,r,h,c,l,p){var m=a(u,r,h,c,l,p);return m.filter(f,o)};s.exports=g}),52692:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){a===void 0&&(a=0),g===void 0&&(g=!1);var o=0,u,r,h;if(g){for(r=f.height-1;r>=0;r--)for(u=f.width-1;u>=0;u--)if(h=f.data[r][u],h&&h.index===e){if(o===a)return h;o+=1}}else for(r=0;r<f.height;r++)for(u=0;u<f.width;u++)if(h=f.data[r][u],h&&h.index===e){if(o===a)return h;o+=1}return null};s.exports=T}),66151:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=function(f,o,u,r,h,c,l,p){var m=a(u,r,h,c,l,p);return m.find(f,o)||null};s.exports=g}),97560:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=function(f,o,u,r,h,c,l,p){var m=a(u,r,h,c,l,p);m.forEach(f,o)};s.exports=g}),43305:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),g=e(30003),f=e(9474),o=e(14018),u=e(29747),r=e(54503),h=function(c){return c===a.ORTHOGONAL?g:c===a.HEXAGONAL?f:c===a.STAGGERED?r:c===a.ISOMETRIC?o:u};s.exports=h}),7423:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62991),g=function(f,o,u,r){if(a(f,o,r)){var h=r.data[o][f]||null;return h?h.index===-1?u?h:null:h:null}else return null};s.exports=g}),60540:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),g=e(26099),f=new g,o=function(u,r,h,c,l){return l.tilemapLayer.worldToTileXY(u,r,!0,f,c),a(f.x,f.y,h,l)};s.exports=o}),55826:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r){var h=r.baseTileWidth,c=r.baseTileHeight,l=r.tilemapLayer,p=0,m=0;l&&(u||(u=l.scene.cameras.main),p=l.x+u.scrollX*(1-l.scrollFactorX),m=l.y+u.scrollY*(1-l.scrollFactorY),h*=l.scaleX,c*=l.scaleY);var v=p+f*h,y=m+o*c;return[new a(v,y),new a(v+h,y),new a(v+h,y+c),new a(v,y+c)]};s.exports=g}),11758:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),g=e(27229),f=e(29747),o=e(55826),u=function(r){return r===a.ORTHOGONAL?o:r===a.ISOMETRIC?f:r===a.HEXAGONAL?g:(r===a.STAGGERED,f)};s.exports=u}),39167:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),g=e(29747),f=e(97281),o=function(u){return u===a.ORTHOGONAL?f:g};s.exports=o}),62e3:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),g=e(19951),f=e(14127),o=e(29747),u=e(97202),r=e(70326),h=function(c){return c===a.ORTHOGONAL?r:c===a.ISOMETRIC?f:c===a.HEXAGONAL?g:c===a.STAGGERED?u:o};s.exports=h}),5984:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),g=e(29747),f=e(28054),o=e(29650),u=function(r){return r===a.ORTHOGONAL?o:r===a.STAGGERED?f:g};s.exports=u}),7386:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),g=function(f,o,u,r,h,c){f===void 0&&(f=0),o===void 0&&(o=0),u===void 0&&(u=c.width),r===void 0&&(r=c.height),h||(h={});var l=a(h,"isNotEmpty",!1),p=a(h,"isColliding",!1),m=a(h,"hasInterestingFace",!1);f<0&&(u+=f,f=0),o<0&&(r+=o,o=0),f+u>c.width&&(u=Math.max(c.width-f,0)),o+r>c.height&&(r=Math.max(c.height-o,0));for(var v=[],y=o;y<o+r;y++)for(var E=f;E<f+u;E++){var C=c.data[y][E];if(C!==null){if(l&&C.index===-1||p&&!C.collides||m&&!C.hasInterestingFace)continue;v.push(C)}}return v};s.exports=g}),91141:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55738),g=e(7386),f=e(91865),o=e(29747),u=e(26099),r=e(91907),h=function(v,y){return f.RectangleToTriangle(y,v)},c=new u,l=new u,p=new u,m=function(v,y,E,C){if(C.orientation!==r.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(v===void 0)return[];var w=o;v instanceof a.Circle?w=f.CircleToRectangle:v instanceof a.Rectangle?w=f.RectangleToRectangle:v instanceof a.Triangle?w=h:v instanceof a.Line&&(w=f.LineToRectangle),C.tilemapLayer.worldToTileXY(v.left,v.top,!0,l,E);var A=l.x,M=l.y;C.tilemapLayer.worldToTileXY(v.right,v.bottom,!1,p,E);var R=Math.ceil(p.x),P=Math.ceil(p.y),b=Math.max(R-A,1),F=Math.max(P-M,1),I=g(A,M,b,F,y,C),L=C.tileWidth,D=C.tileHeight;C.tilemapLayer&&(L*=C.tilemapLayer.scaleX,D*=C.tilemapLayer.scaleY);for(var O=[],z=new a.Rectangle(0,0,L,D),_=0;_<I.length;_++){var X=I[_];C.tilemapLayer.tileToWorldXY(X.x,X.y,c,E),z.x=c.x,z.y=c.y,w(v,z)&&O.push(X)}return O};s.exports=m}),96523:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=e(26099),f=new g,o=new g,u=function(r,h,c,l,p,m,v){var y=v.tilemapLayer.tilemap._convert.WorldToTileXY;y(r,h,!0,f,m,v);var E=f.x,C=f.y;y(r+c,h+l,!1,o,m,v);var w=Math.ceil(o.x),A=Math.ceil(o.y);return a(E,C,w-E,A-C,p,v)};s.exports=u}),96113:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),g=e(20242),f=e(10095),o=function(u){return u===a.ORTHOGONAL?f:g};s.exports=o}),16926:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),g=e(86625),f=e(96897),o=e(29747),u=e(15108),r=e(85896),h=function(c){return c===a.ORTHOGONAL?r:c===a.ISOMETRIC?f:c===a.HEXAGONAL?g:c===a.STAGGERED?u:o};s.exports=h}),55762:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),g=e(20242),f=e(51900),o=e(63288),u=function(r){return r===a.ORTHOGONAL?o:r===a.STAGGERED?f:g};s.exports=u}),45091:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62991),g=function(f,o,u){if(a(f,o,u)){var r=u.data[o][f];return r!==null&&r.index>-1}else return!1};s.exports=g}),24152:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45091),g=e(26099),f=new g,o=function(u,r,h,c){c.tilemapLayer.worldToTileXY(u,r,!0,f,h);var l=f.x,p=f.y;return a(l,p,c)};s.exports=o}),90454:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63448),g=e(56583),f=function(o,u){var r=o.tilemapLayer.tilemap,h=o.tilemapLayer,c=Math.floor(r.tileWidth*h.scaleX),l=Math.floor(r.tileHeight*h.scaleY),p=o.hexSideLength,m,v,y,E;if(o.staggerAxis==="y"){var C=(l-p)/2+p;m=g(u.worldView.x-h.x,c,0,!0)-h.cullPaddingX,v=a(u.worldView.right-h.x,c,0,!0)+h.cullPaddingX,y=g(u.worldView.y-h.y,C,0,!0)-h.cullPaddingY,E=a(u.worldView.bottom-h.y,C,0,!0)+h.cullPaddingY}else{var w=(c-p)/2+p;m=g(u.worldView.x-h.x,w,0,!0)-h.cullPaddingX,v=a(u.worldView.right-h.x,w,0,!0)+h.cullPaddingX,y=g(u.worldView.y-h.y,l,0,!0)-h.cullPaddingY,E=a(u.worldView.bottom-h.y,l,0,!0)+h.cullPaddingY}return{left:m,right:v,top:y,bottom:E}};s.exports=f}),9474:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90454),g=e(32483),f=function(o,u,r,h){r===void 0&&(r=[]),h===void 0&&(h=0),r.length=0;var c=o.tilemapLayer,l=a(o,u);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(l.left=0,l.right=o.width,l.top=0,l.bottom=o.height),g(o,l,h,r),r};s.exports=f}),27229:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19951),g=e(26099),f=new g,o=function(u,r,h,c){var l=c.baseTileWidth,p=c.baseTileHeight,m=c.tilemapLayer;m&&(l*=m.scaleX,p*=m.scaleY);var v=a(u,r,f,h,c),y=[],E=.5773502691896257,C,w;c.staggerAxis==="y"?(C=E*l,w=p/2):(C=l/2,w=E*p);for(var A=0;A<6;A++){var M=2*Math.PI*(.5-A)/6;y.push(new g(v.x+C*Math.cos(M),v.y+w*Math.sin(M)))}return y};s.exports=o}),19951:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r,h){u||(u=new a);var c=h.baseTileWidth,l=h.baseTileHeight,p=h.tilemapLayer,m=0,v=0;p&&(r||(r=p.scene.cameras.main),m=p.x+r.scrollX*(1-p.scrollFactorX),v=p.y+r.scrollY*(1-p.scrollFactorY),c*=p.scaleX,l*=p.scaleY);var y=c/2,E=l/2,C,w,A=h.staggerAxis,M=h.staggerIndex;return A==="y"?(C=m+c*f+c,w=v+1.5*o*E+E,o%2===0&&(M==="odd"?C-=y:C+=y)):A==="x"&&M==="odd"&&(C=m+1.5*f*y+y,w=v+l*f+l,f%2===0&&(M==="odd"?w-=E:w+=E)),u.set(C,w)};s.exports=g}),86625:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r,h,c){r||(r=new a);var l=c.baseTileWidth,p=c.baseTileHeight,m=c.tilemapLayer;m&&(h||(h=m.scene.cameras.main),f=f-(m.x+h.scrollX*(1-m.scrollFactorX)),o=o-(m.y+h.scrollY*(1-m.scrollFactorY)),l*=m.scaleX,p*=m.scaleY);var v=.5773502691896257,y=-.3333333333333333,E=0,C=.6666666666666666,w=l/2,A=p/2,M,R,P,b,F;c.staggerAxis==="y"?(M=(f-w)/(v*l),R=(o-A)/A,P=v*M+y*R,b=E*M+C*R):(M=(f-w)/w,R=(o-A)/(v*p),P=y*M+v*R,b=C*M+E*R),F=-P-b;var I=Math.round(P),L=Math.round(b),D=Math.round(F),O=Math.abs(I-P),z=Math.abs(L-b),_=Math.abs(D-F);O>z&&O>_?I=-L-D:z>_&&(L=-I-D);var X,H=L;return c.staggerIndex==="odd"?X=H%2===0?L/2+I:L/2+I-.5:X=H%2===0?L/2+I:L/2+I+.5,r.set(X,H)};s.exports=g}),62991:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e>=0&&e<g.width&&a>=0&&a<g.height};s.exports=T}),14018:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33528),g=function(f,o,u,r){u===void 0&&(u=[]),r===void 0&&(r=0),u.length=0;var h=f.tilemapLayer,c=f.data,l=f.width,p=f.height,m=h.skipCull,v=0,y=l,E=0,C=p,w,A,M;if(r===0)for(A=E;A<C;A++)for(w=v;w<y;w++)M=c[A][w],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!a(w,A,f,o)||u.push(M));else if(r===1)for(A=E;A<C;A++)for(w=y;w>=v;w--)M=c[A][w],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!a(w,A,f,o)||u.push(M));else if(r===2)for(A=C;A>=E;A--)for(w=v;w<y;w++)M=c[A][w],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!a(w,A,f,o)||u.push(M));else if(r===3)for(A=C;A>=E;A--)for(w=y;w>=v;w--)M=c[A][w],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!a(w,A,f,o)||u.push(M));return h.tilesDrawn=u.length,h.tilesTotal=l*p,u};s.exports=g}),14127:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r,h){u||(u=new a);var c=h.baseTileWidth,l=h.baseTileHeight,p=h.tilemapLayer,m=0,v=0;p&&(r||(r=p.scene.cameras.main),m=p.x+r.scrollX*(1-p.scrollFactorX),c*=p.scaleX,v=p.y+r.scrollY*(1-p.scrollFactorY),l*=p.scaleY);var y=m+(f-o)*(c/2),E=v+(f+o)*(l/2);return u.set(y,E)};s.exports=g}),96897:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r,h,c,l){r||(r=new a);var p=c.baseTileWidth,m=c.baseTileHeight,v=c.tilemapLayer;v&&(h||(h=v.scene.cameras.main),o=o-(v.y+h.scrollY*(1-v.scrollFactorY)),m*=v.scaleY,f=f-(v.x+h.scrollX*(1-v.scrollFactorX)),p*=v.scaleX);var y=p/2,E=m/2;f=f-y,l||(o=o-m);var C=.5*(f/y+o/E),w=.5*(-f/y+o/E);return u&&(C=Math.floor(C),w=Math.floor(w)),r.set(C,w)};s.exports=g}),71558:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23029),g=e(62991),f=e(72023),o=e(20576),u=function(r,h,c,l,p){if(l===void 0&&(l=!0),!g(h,c,p))return null;var m,v=p.data[c][h],y=v&&v.collides;r instanceof a?(p.data[c][h]===null&&(p.data[c][h]=new a(p,r.index,h,c,p.tileWidth,p.tileHeight)),p.data[c][h].copy(r)):(m=r,p.data[c][h]===null?p.data[c][h]=new a(p,m,h,c,p.tileWidth,p.tileHeight):p.data[c][h].index=m);var E=p.data[c][h],C=p.collideIndexes.indexOf(E.index)!==-1;if(m=r instanceof a?r.index:r,m===-1)E.width=p.tileWidth,E.height=p.tileHeight;else{var w=p.tilemapLayer.tilemap,A=w.tiles,M=A[m][2],R=w.tilesets[M];E.width=R.tileWidth,E.height=R.tileHeight}return o(E,C),l&&y!==E.collides&&f(h,c,p),E};s.exports=u}),26303:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71558),g=e(26099),f=new g,o=function(u,r,h,c,l,p){return p.tilemapLayer.worldToTileXY(r,h,!0,f,l,p),a(u,f.x,f.y,c,p)};s.exports=o}),14051:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42573),g=e(71558),f=function(o,u,r,h,c){if(h===void 0&&(h=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var l=o.length,p=o[0].length,m=0;m<l;m++)for(var v=0;v<p;v++){var y=o[m][v];g(y,u+v,r+m,!1,c)}h&&a(u-1,r-1,p+2,l+2,c)};s.exports=f}),77389:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=e(26546),f=function(o,u,r,h,c,l){var p,m=a(o,u,r,h,{},l);if(!c)for(c=[],p=0;p<m.length;p++)c.indexOf(m[p].index)===-1&&c.push(m[p].index);for(p=0;p<m.length;p++)m[p].index=g(c)};s.exports=f}),63557:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23029),g=e(62991),f=e(72023),o=function(u,r,h,c,l){if(h===void 0&&(h=!0),c===void 0&&(c=!0),!g(u,r,l))return null;var p=l.data[r][u];if(p)l.data[r][u]=h?null:new a(l,-1,u,r,l.tileWidth,l.tileHeight);else return null;return c&&p&&p.collides&&f(u,r,l),p};s.exports=o}),94178:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63557),g=e(26099),f=new g,o=function(u,r,h,c,l,p){return p.tilemapLayer.worldToTileXY(u,r,!0,f,l,p),a(f.x,f.y,h,c,p)};s.exports=o}),15533:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=e(3956),f=new g(105,210,231,150),o=new g(243,134,48,200),u=new g(40,39,37,150),r=function(h,c,l){c===void 0&&(c={});var p=c.tileColor!==void 0?c.tileColor:f,m=c.collidingTileColor!==void 0?c.collidingTileColor:o,v=c.faceColor!==void 0?c.faceColor:u,y=a(0,0,l.width,l.height,null,l);h.translateCanvas(l.tilemapLayer.x,l.tilemapLayer.y),h.scaleCanvas(l.tilemapLayer.scaleX,l.tilemapLayer.scaleY);for(var E=0;E<y.length;E++){var C=y[E],w=C.tileset?C.tileset.tileOffset:{x:0,y:0},A=C.width,M=C.height,R=C.pixelX-w.x,P=C.pixelY-w.y,b=C.collides?m:p;b!==null&&(h.fillStyle(b.color,b.alpha/255),h.fillRect(R,P,A,M)),R+=1,P+=1,A-=2,M-=2,v!==null&&(h.lineStyle(1,v.color,v.alpha/255),C.faceTop&&h.lineBetween(R,P,R+A,P),C.faceRight&&h.lineBetween(R+A,P,R+A,P+M),C.faceBottom&&h.lineBetween(R,P+M,R+A,P+M),C.faceLeft&&h.lineBetween(R,P,R,P+M))}};s.exports=r}),27987:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=function(f,o,u,r,h,c,l){for(var p=a(u,r,h,c,null,l),m=0;m<p.length;m++)p[m]&&p[m].index===f&&(p[m].index=o)};s.exports=g}),32483:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=e.data,u=e.width,r=e.height,h=e.tilemapLayer,c=Math.max(0,a.left),l=Math.min(u,a.right),p=Math.max(0,a.top),m=Math.min(r,a.bottom),v,y,E;if(g===0)for(y=p;y<m;y++)for(v=c;o[y]&&v<l;v++)E=o[y][v],!(!E||E.index===-1||!E.visible||E.alpha===0)&&f.push(E);else if(g===1)for(y=p;y<m;y++)for(v=l;o[y]&&v>=c;v--)E=o[y][v],!(!E||E.index===-1||!E.visible||E.alpha===0)&&f.push(E);else if(g===2)for(y=m;y>=p;y--)for(v=c;o[y]&&v<l;v++)E=o[y][v],!(!E||E.index===-1||!E.visible||E.alpha===0)&&f.push(E);else if(g===3)for(y=m;y>=p;y--)for(v=l;o[y]&&v>=c;v--)E=o[y][v],!(!E||E.index===-1||!E.visible||E.alpha===0)&&f.push(E);return h.tilesDrawn=f.length,h.tilesTotal=u*r,f};s.exports=T}),57068:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),g=e(42573),f=e(9589),o=function(u,r,h,c,l){r===void 0&&(r=!0),h===void 0&&(h=!0),l===void 0&&(l=!0),Array.isArray(u)||(u=[u]);for(var p=0;p<u.length;p++)f(u[p],r,c);if(l)for(var m=0;m<c.height;m++)for(var v=0;v<c.width;v++){var y=c.data[m][v];y&&u.indexOf(y.index)!==-1&&a(y,r)}h&&g(0,0,c.width,c.height,c)};s.exports=o}),37266:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),g=e(42573),f=e(9589),o=function(u,r,h,c,l,p){if(h===void 0&&(h=!0),c===void 0&&(c=!0),p===void 0&&(p=!0),!(u>r)){for(var m=u;m<=r;m++)f(m,h,l);if(p)for(var v=0;v<l.height;v++)for(var y=0;y<l.width;y++){var E=l.data[v][y];E&&E.index>=u&&E.index<=r&&a(E,h)}c&&g(0,0,l.width,l.height,l)}};s.exports=o}),75661:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),g=e(42573),f=e(9589),o=function(u,r,h,c){r===void 0&&(r=!0),h===void 0&&(h=!0),Array.isArray(u)||(u=[u]);for(var l=0;l<c.height;l++)for(var p=0;p<c.width;p++){var m=c.data[l][p];m&&u.indexOf(m.index)===-1&&(a(m,r),f(m.index,r,c))}h&&g(0,0,c.width,c.height,c)};s.exports=o}),64740:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),g=e(42573),f=e(97022),o=function(u,r,h,c){r===void 0&&(r=!0),h===void 0&&(h=!0);for(var l=0;l<c.height;l++)for(var p=0;p<c.width;p++){var m=c.data[l][p];if(m){for(var v in u)if(f(m.properties,v)){var y=u[v];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++)m.properties[v]===y[E]&&a(m,r)}}}h&&g(0,0,c.width,c.height,c)};s.exports=o}),63307:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),g=e(42573),f=function(o,u,r){o===void 0&&(o=!0),u===void 0&&(u=!0);for(var h=0;h<r.height;h++)for(var c=0;c<r.width;c++){var l=r.data[h][c];if(l){var p=l.getCollisionGroup();p&&p.objects&&p.objects.length>0&&a(l,o)}}u&&g(0,0,r.width,r.height,r)};s.exports=f}),9589:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=g.collideIndexes.indexOf(e);a&&f===-1?g.collideIndexes.push(e):!a&&f!==-1&&g.collideIndexes.splice(f,1)};s.exports=T}),20576:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};s.exports=T}),79583:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){if(typeof e=="number")f.callbacks[e]=a!==null?{callback:a,callbackContext:g}:void 0;else for(var o=0,u=e.length;o<u;o++)f.callbacks[e[o]]=a!==null?{callback:a,callbackContext:g}:void 0};s.exports=T}),93254:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=function(f,o,u,r,h,c,l){for(var p=a(f,o,u,r,null,l),m=0;m<p.length;m++)p[m].setCollisionCallback(h,c)};s.exports=g}),32903:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=e(33680),f=function(o,u,r,h,c){var l=a(o,u,r,h,null,c),p=l.map(function(v){return v.index});g(p);for(var m=0;m<l.length;m++)l[m].index=p[m]};s.exports=f}),61325:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63448),g=e(56583),f=function(o,u){var r=o.tilemapLayer.tilemap,h=o.tilemapLayer,c=Math.floor(r.tileWidth*h.scaleX),l=Math.floor(r.tileHeight*h.scaleY),p=g(u.worldView.x-h.x,c,0,!0)-h.cullPaddingX,m=a(u.worldView.right-h.x,c,0,!0)+h.cullPaddingX,v=g(u.worldView.y-h.y,l/2,0,!0)-h.cullPaddingY,y=a(u.worldView.bottom-h.y,l/2,0,!0)+h.cullPaddingY;return{left:p,right:m,top:v,bottom:y}};s.exports=f}),54503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61325),g=e(32483),f=function(o,u,r,h){r===void 0&&(r=[]),h===void 0&&(h=0),r.length=0;var c=o.tilemapLayer,l=a(o,u);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(l.left=0,l.right=o.width,l.top=0,l.bottom=o.height),g(o,l,h,r),r};s.exports=f}),97202:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r,h){u||(u=new a);var c=h.baseTileWidth,l=h.baseTileHeight,p=h.tilemapLayer,m=0,v=0;p&&(r||(r=p.scene.cameras.main),m=p.x+r.scrollX*(1-p.scrollFactorX),c*=p.scaleX,v=p.y+r.scrollY*(1-p.scrollFactorY),l*=p.scaleY);var y=m+f*c+o%2*(c/2),E=v+o*(l/2);return u.set(y,E)};s.exports=g}),28054:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=g.baseTileHeight,o=g.tilemapLayer,u=0;return o&&(a===void 0&&(a=o.scene.cameras.main),u=o.y+a.scrollY*(1-o.scrollFactorY),f*=o.scaleY),u+e*(f/2)+f};s.exports=T}),15108:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r,h,c){r||(r=new a);var l=c.baseTileWidth,p=c.baseTileHeight,m=c.tilemapLayer;m&&(h||(h=m.scene.cameras.main),o=o-(m.y+h.scrollY*(1-m.scrollFactorY)),p*=m.scaleY,f=f-(m.x+h.scrollX*(1-m.scrollFactorX)),l*=m.scaleX);var v=u?Math.floor(o/(p/2)):o/(p/2),y=u?Math.floor((f+v%2*.5*l)/l):(f+v%2*.5*l)/l;return r.set(y,v)};s.exports=g}),51900:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=f.baseTileHeight,u=f.tilemapLayer;return u&&(g||(g=u.scene.cameras.main),e=e-(u.y+g.scrollY*(1-u.scrollFactorY)),o*=u.scaleY),a?Math.floor(e/(o/2)):e/(o/2)};s.exports=T}),86560:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=function(f,o,u,r,h,c,l){for(var p=a(u,r,h,c,null,l),m=0;m<p.length;m++)p[m]&&(p[m].index===f?p[m].index=o:p[m].index===o&&(p[m].index=f))};s.exports=g}),97281:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=g.baseTileWidth,o=g.tilemapLayer,u=0;return o&&(a||(a=o.scene.cameras.main),u=o.x+a.scrollX*(1-o.scrollFactorX),f*=o.scaleX),u+e*f};s.exports=T}),70326:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97281),g=e(29650),f=e(26099),o=function(u,r,h,c,l){return h||(h=new f(0,0)),h.x=a(u,c,l),h.y=g(r,c,l),h};s.exports=o}),29650:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=g.baseTileHeight,o=g.tilemapLayer,u=0;return o&&(a||(a=o.scene.cameras.main),u=o.y+a.scrollY*(1-o.scrollFactorY),f*=o.scaleY),u+e*f};s.exports=T}),77366:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),g=e(75508),f=function(o,u,r,h,c,l){if(c){var p,m=a(o,u,r,h,null,l),v=0;for(p=0;p<c.length;p++)v+=c[p].weight;if(!(v<=0))for(p=0;p<m.length;p++){for(var y=g.RND.frac()*v,E=0,C=-1,w=0;w<c.length;w++)if(E+=c[w].weight,y<=E){var A=c[w].index;C=Array.isArray(A)?A[Math.floor(g.RND.frac()*A.length)]:A;break}m[p].index=C}}};s.exports=f}),10095:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85896),g=e(26099),f=new g,o=function(u,r,h,c){return a(u,0,r,f,h,c),f.x};s.exports=o}),85896:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),g=function(f,o,u,r,h,c){u===void 0&&(u=!0),r||(r=new a);var l=c.baseTileWidth,p=c.baseTileHeight,m=c.tilemapLayer;m&&(h||(h=m.scene.cameras.main),f=f-(m.x+h.scrollX*(1-m.scrollFactorX)),o=o-(m.y+h.scrollY*(1-m.scrollFactorY)),l*=m.scaleX,p*=m.scaleY);var v=f/l,y=o/p;return u&&(v=Math.floor(v),y=Math.floor(y)),r.set(v,y)};s.exports=g}),63288:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85896),g=e(26099),f=new g,o=function(u,r,h,c){return a(0,u,r,f,h,c),f.y};s.exports=o}),81086:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CalculateFacesAt:e(72023),CalculateFacesWithin:e(42573),CheckIsoBounds:e(33528),Copy:e(1785),CreateFromTiles:e(78419),CullBounds:e(19545),CullTiles:e(30003),Fill:e(35137),FilterTiles:e(40253),FindByIndex:e(52692),FindTile:e(66151),ForEachTile:e(97560),GetCullTilesFunction:e(43305),GetTileAt:e(7423),GetTileAtWorldXY:e(60540),GetTileCorners:e(55826),GetTileCornersFunction:e(11758),GetTilesWithin:e(7386),GetTilesWithinShape:e(91141),GetTilesWithinWorldXY:e(96523),GetTileToWorldXFunction:e(39167),GetTileToWorldXYFunction:e(62e3),GetTileToWorldYFunction:e(5984),GetWorldToTileXFunction:e(96113),GetWorldToTileXYFunction:e(16926),GetWorldToTileYFunction:e(55762),HasTileAt:e(45091),HasTileAtWorldXY:e(24152),HexagonalCullBounds:e(90454),HexagonalCullTiles:e(9474),HexagonalGetTileCorners:e(27229),HexagonalTileToWorldXY:e(19951),HexagonalWorldToTileXY:e(86625),IsInLayerBounds:e(62991),IsometricCullTiles:e(14018),IsometricTileToWorldXY:e(14127),IsometricWorldToTileXY:e(96897),PutTileAt:e(71558),PutTileAtWorldXY:e(26303),PutTilesAt:e(14051),Randomize:e(77389),RemoveTileAt:e(63557),RemoveTileAtWorldXY:e(94178),RenderDebug:e(15533),ReplaceByIndex:e(27987),RunCull:e(32483),SetCollision:e(57068),SetCollisionBetween:e(37266),SetCollisionByExclusion:e(75661),SetCollisionByProperty:e(64740),SetCollisionFromCollisionGroup:e(63307),SetLayerCollisionIndex:e(9589),SetTileCollision:e(20576),SetTileIndexCallback:e(79583),SetTileLocationCallback:e(93254),Shuffle:e(32903),StaggeredCullBounds:e(61325),StaggeredCullTiles:e(54503),StaggeredTileToWorldXY:e(97202),StaggeredTileToWorldY:e(28054),StaggeredWorldToTileXY:e(15108),StaggeredWorldToTileY:e(51900),SwapByIndex:e(86560),TileToWorldX:e(97281),TileToWorldXY:e(70326),TileToWorldY:e(29650),WeightedRandomize:e(77366),WorldToTileX:e(10095),WorldToTileXY:e(85896),WorldToTileY:e(63288)}}),91907:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}}),21829:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ORIENTATION:e(91907)};s.exports=a}),62501:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),g=e(21829),f={Components:e(81086),Parsers:e(57442),Formats:e(80341),ImageCollection:e(16536),ParseToTilemap:e(31989),Tile:e(23029),Tilemap:e(49075),TilemapCreator:e(45939),TilemapFactory:e(46029),Tileset:e(33629),TilemapLayer:e(20442),Orientation:e(91907),LayerData:e(14977),MapData:e(87010),ObjectLayer:e(48700)};f=a(!1,f,g.ORIENTATION),s.exports=f}),14977:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(91907),f=e(95540),o=new a({initialize:function(r){r===void 0&&(r={}),this.name=f(r,"name","layer"),this.id=f(r,"id",0),this.x=f(r,"x",0),this.y=f(r,"y",0),this.width=f(r,"width",0),this.height=f(r,"height",0),this.tileWidth=f(r,"tileWidth",0),this.tileHeight=f(r,"tileHeight",0),this.baseTileWidth=f(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=f(r,"baseTileHeight",this.tileHeight),this.orientation=f(r,"orientation",g.ORTHOGONAL),this.widthInPixels=f(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=f(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=f(r,"alpha",1),this.visible=f(r,"visible",!0),this.properties=f(r,"properties",[]),this.indexes=f(r,"indexes",[]),this.collideIndexes=f(r,"collideIndexes",[]),this.callbacks=f(r,"callbacks",[]),this.bodies=f(r,"bodies",[]),this.data=f(r,"data",[]),this.tilemapLayer=f(r,"tilemapLayer",null),this.hexSideLength=f(r,"hexSideLength",0),this.staggerAxis=f(r,"staggerAxis","y"),this.staggerIndex=f(r,"staggerIndex","odd")}});s.exports=o}),87010:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(91907),f=e(95540),o=new a({initialize:function(r){r===void 0&&(r={}),this.name=f(r,"name","map"),this.width=f(r,"width",0),this.height=f(r,"height",0),this.infinite=f(r,"infinite",!1),this.tileWidth=f(r,"tileWidth",0),this.tileHeight=f(r,"tileHeight",0),this.widthInPixels=f(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=f(r,"heightInPixels",this.height*this.tileHeight),this.format=f(r,"format",null),this.orientation=f(r,"orientation",g.ORTHOGONAL),this.renderOrder=f(r,"renderOrder","right-down"),this.version=f(r,"version","1"),this.properties=f(r,"properties",{}),this.layers=f(r,"layers",[]),this.images=f(r,"images",[]),this.objects=f(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=f(r,"collision",{}),this.tilesets=f(r,"tilesets",[]),this.imageCollections=f(r,"imageCollections",[]),this.tiles=f(r,"tiles",[]),this.hexSideLength=f(r,"hexSideLength",0),this.staggerAxis=f(r,"staggerAxis","y"),this.staggerIndex=f(r,"staggerIndex","odd")}});s.exports=o}),48700:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=new a({initialize:function(u){u===void 0&&(u={}),this.name=g(u,"name","object layer"),this.id=g(u,"id",0),this.opacity=g(u,"opacity",1),this.properties=g(u,"properties",{}),this.propertyTypes=g(u,"propertytypes",{}),this.type=g(u,"type","objectgroup"),this.visible=g(u,"visible",!0),this.objects=g(u,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});s.exports=f}),6641:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),g=function(f){return f=f.toLowerCase(),f==="isometric"?a.ISOMETRIC:f==="staggered"?a.STAGGERED:f==="hexagonal"?a.HEXAGONAL:a.ORTHOGONAL};s.exports=g}),46177:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),g=e(2342),f=e(82593),o=e(46594),u=e(87021),r=function(h,c,l,p,m,v){var y;switch(c){case a.ARRAY_2D:y=g(h,l,p,m,v);break;case a.CSV:y=f(h,l,p,m,v);break;case a.TILED_JSON:y=o(h,l,v);break;case a.WELTMEISTER:y=u(h,l,v);break;default:console.warn("Unrecognized tilemap data format: "+c),y=null}return y};s.exports=r}),2342:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),g=e(14977),f=e(87010),o=e(23029),u=function(r,h,c,l,p){for(var m=new g({tileWidth:c,tileHeight:l}),v=new f({name:r,tileWidth:c,tileHeight:l,format:a.ARRAY_2D,layers:[m]}),y=[],E=h.length,C=0,w=0;w<h.length;w++){y[w]=[];for(var A=h[w],M=0;M<A.length;M++){var R=parseInt(A[M],10);isNaN(R)||R===-1?y[w][M]=p?null:new o(m,-1,M,w,c,l):y[w][M]=new o(m,R,M,w,c,l)}C===0&&(C=A.length)}return v.width=m.width=C,v.height=m.height=E,v.widthInPixels=m.widthInPixels=C*c,v.heightInPixels=m.heightInPixels=E*l,m.data=y,v};s.exports=u}),82593:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),g=e(2342),f=function(o,u,r,h,c){var l=u.trim().split(`
`).map(function(m){return m.split(",")}),p=g(o,l,r,h,c);return p.format=a.CSV,p};s.exports=f}),6656:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14977),g=e(23029),f=function(o,u){for(var r=[],h=0;h<o.layer.length;h++){for(var c=o.layer[h],l=new a({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),p=[],m=[],v=0;v<c.data.length;v++){for(var y=0;y<c.data[v].length;y++){var E=c.data[v][y]-1,C;E>-1?C=new g(l,E,y,v,c.tilesize,c.tilesize):C=u?null:new g(l,-1,y,v,c.tilesize,c.tilesize),p.push(C)}m.push(p),p=[]}l.data=m,r.push(l)}return r};s.exports=f}),96483:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),g=function(f){for(var o=[],u=[],r=0;r<f.layer.length;r++){var h=f.layer[r],c=h.tilesetName;c!==""&&u.indexOf(c)===-1&&(u.push(c),o.push(new a(c,0,h.tilesize,h.tilesize,0,0)))}return o};s.exports=g}),87021:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),g=e(87010),f=e(6656),o=e(96483),u=function(r,h,c){if(h.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var l=0,p=0,m=0;m<h.layer.length;m++)h.layer[m].width>l&&(l=h.layer[m].width),h.layer[m].height>p&&(p=h.layer[m].height);var v=new g({width:l,height:p,name:r,tileWidth:h.layer[0].tilesize,tileHeight:h.layer[0].tilesize,format:a.WELTMEISTER});return v.layers=f(h,c),v.tilesets=o(h),v};s.exports=u}),52833:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ParseTileLayers:e(6656),ParseTilesets:e(96483),ParseWeltmeister:e(87021)}}),57442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={FromOrientationString:e(6641),Parse:e(46177),Parse2DArray:e(2342),ParseCSV:e(82593),Impact:e(52833),Tiled:e(96761)}}),51233:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),g=function(f){for(var o,u,r,h,c,l=0;l<f.layers.length;l++){o=f.layers[l],h=null;for(var p=0;p<o.data.length;p++){c=o.data[p];for(var m=0;m<c.length;m++)u=c[m],!(u===null||u.index<0)&&(r=f.tiles[u.index][2],h=f.tilesets[r],u.width=h.tileWidth,u.height=h.tileHeight,h.tileProperties&&h.tileProperties[u.index-h.firstgid]&&(u.properties=a(u.properties,h.tileProperties[u.index-h.firstgid])))}}};s.exports=g}),41868:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=window.atob(e),g=a.length,f=new Array(g/4),o=0;o<g;o+=4)f[o/4]=(a.charCodeAt(o)|a.charCodeAt(o+1)<<8|a.charCodeAt(o+2)<<16|a.charCodeAt(o+3)<<24)>>>0;return f};s.exports=T}),84101:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),g=function(f){var o,u,r=[];for(o=0;o<f.imageCollections.length;o++)for(var h=f.imageCollections[o],c=h.images,l=0;l<c.length;l++){var p=c[l],m={x:0,y:p.height-f.tileHeight};u=new a(p.image,p.gid,p.width,p.height,0,0,void 0,void 0,m),u.updateTileData(p.width,p.height),f.tilesets.push(u)}for(o=0;o<f.tilesets.length;o++){u=f.tilesets[o];for(var v=u.tileMargin,y=u.tileMargin,E=0,C=0,w=0,A=u.firstgid;A<u.firstgid+u.total&&(r[A]=[v,y,o],v+=u.tileWidth+u.tileSpacing,E++,!(E===u.total||(C++,C===u.columns&&(v=u.tileMargin,y+=u.tileHeight+u.tileSpacing,C=0,w++,w===u.rows))));A++);}return r};s.exports=g}),79677:((s,T,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),g=function(f,o,u){if(!o)return{i:0,layers:f.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=o.x+a(o,"startx",0)*f.tilewidth+a(o,"offsetx",0),h=o.y+a(o,"starty",0)*f.tileheight+a(o,"offsety",0);return{i:0,layers:o.layers,name:u.name+o.name+"/",opacity:u.opacity*o.opacity,visible:u.visible&&o.visible,x:u.x+r,y:u.y+h}};s.exports=g}),29920:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=2147483648,e=1073741824,a=536870912,g=function(f){var o=!!(f&T),u=!!(f&e),r=!!(f&a);f=f&536870911;var h=0,c=!1;return o&&u&&r?(h=Math.PI/2,c=!0):o&&u&&!r?(h=Math.PI,c=!1):o&&!u&&r?(h=Math.PI/2,c=!1):o&&!u&&!r?(h=0,c=!0):!o&&u&&r?(h=3*Math.PI/2,c=!1):!o&&u&&!r?(h=Math.PI,c=!0):!o&&!u&&r?(h=3*Math.PI/2,c=!0):!o&&!u&&!r&&(h=0,c=!1),{gid:f,flippedHorizontal:o,flippedVertical:u,flippedAntiDiagonal:r,rotation:h,flipped:c}};s.exports=g}),12635:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),g=e(79677),f=function(o){for(var u=[],r=[],h=g(o);h.i<h.layers.length||r.length>0;){if(h.i>=h.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=r.pop();continue}var c=h.layers[h.i];if(h.i++,c.type!=="imagelayer"){if(c.type==="group"){var l=g(o,c,h);r.push(h),h=l}continue}var p=a(c,"offsetx",0)+a(c,"startx",0),m=a(c,"offsety",0)+a(c,"starty",0);u.push({name:h.name+c.name,image:c.image,x:h.x+p+c.x,y:h.y+m+c.y,alpha:h.opacity*c.opacity,visible:h.visible&&c.visible,properties:a(c,"properties",{})})}return u};s.exports=f}),46594:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(51233),g=e(84101),f=e(91907),o=e(62644),u=e(80341),r=e(6641),h=e(87010),c=e(12635),l=e(22611),p=e(28200),m=e(24619),v=function(y,E,C){var w=o(E),A=new h({width:w.width,height:w.height,name:y,tileWidth:w.tilewidth,tileHeight:w.tileheight,orientation:r(w.orientation),format:u.TILED_JSON,version:w.version,properties:w.properties,renderOrder:w.renderorder,infinite:w.infinite});if(A.orientation===f.HEXAGONAL)if(A.hexSideLength=w.hexsidelength,A.staggerAxis=w.staggeraxis,A.staggerIndex=w.staggerindex,A.staggerAxis==="y"){var M=(A.tileHeight-A.hexSideLength)/2;A.widthInPixels=A.tileWidth*(A.width+.5),A.heightInPixels=A.height*(A.hexSideLength+M)+M}else{var R=(A.tileWidth-A.hexSideLength)/2;A.widthInPixels=A.width*(A.hexSideLength+R)+R,A.heightInPixels=A.tileHeight*(A.height+.5)}A.layers=p(w,C),A.images=c(w);var P=m(w);return A.tilesets=P.tilesets,A.imageCollections=P.imageCollections,A.objects=l(w),A.tiles=g(A),a(A),A};s.exports=v}),52205:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18254),g=e(29920),f=function(r){return{x:r.x,y:r.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],u=function(r,h,c){h===void 0&&(h=0),c===void 0&&(c=0);var l=a(r,o);if(l.x+=h,l.y+=c,r.gid){var p=g(r.gid);l.gid=p.gid,l.flippedHorizontal=p.flippedHorizontal,l.flippedVertical=p.flippedVertical,l.flippedAntiDiagonal=p.flippedAntiDiagonal}else r.polyline?l.polyline=r.polyline.map(f):r.polygon?l.polygon=r.polygon.map(f):r.ellipse?l.ellipse=r.ellipse:r.text?l.text=r.text:r.point?l.point=!0:l.rectangle=!0;return l};s.exports=u}),22611:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),g=e(52205),f=e(48700),o=e(79677),u=function(r){for(var h=[],c=[],l=o(r);l.i<l.layers.length||c.length>0;){if(l.i>=l.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=c.pop();continue}var p=l.layers[l.i];if(l.i++,p.opacity*=l.opacity,p.visible=l.visible&&p.visible,p.type!=="objectgroup"){if(p.type==="group"){var m=o(r,p,l);c.push(l),l=m}continue}p.name=l.name+p.name;for(var v=l.x+a(p,"startx",0)+a(p,"offsetx",0),y=l.y+a(p,"starty",0)+a(p,"offsety",0),E=[],C=0;C<p.objects.length;C++){var w=g(p.objects[C],v,y);E.push(w)}var A=new f(p);A.objects=E,h.push(A)}return h};s.exports=u}),28200:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41868),g=e(91907),f=e(79677),o=e(6641),u=e(95540),r=e(14977),h=e(29920),c=e(23029),l=function(p,m){for(var v=u(p,"infinite",!1),y=[],E=[],C=f(p);C.i<C.layers.length||E.length>0;){if(C.i>=C.layers.length){if(E.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}C=E.pop();continue}var w=C.layers[C.i];if(C.i++,w.type!=="tilelayer"){if(w.type==="group"){var A=f(p,w,C);E.push(C),C=A}continue}if(w.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+w.name+"'");continue}else if(w.encoding&&w.encoding==="base64"){if(w.chunks)for(var M=0;M<w.chunks.length;M++)w.chunks[M].data=a(w.chunks[M].data);w.data&&(w.data=a(w.data)),delete w.encoding}var R,P,b,F,I,L,D=[],O=0;if(v){var z=u(w,"startx",0)+w.x,_=u(w,"starty",0)+w.y;R=new r({name:C.name+w.name,id:w.id,x:C.x+u(w,"offsetx",0)+z*p.tilewidth,y:C.y+u(w,"offsety",0)+_*p.tileheight,width:w.width,height:w.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:C.opacity*w.opacity,visible:C.visible&&w.visible,properties:u(w,"properties",[]),orientation:o(p.orientation)}),R.orientation===g.HEXAGONAL&&(R.hexSideLength=p.hexsidelength,R.staggerAxis=p.staggeraxis,R.staggerIndex=p.staggerindex,R.staggerAxis==="y"?(I=(R.tileHeight-R.hexSideLength)/2,R.widthInPixels=R.tileWidth*(R.width+.5),R.heightInPixels=R.height*(R.hexSideLength+I)+I):(L=(R.tileWidth-R.hexSideLength)/2,R.widthInPixels=R.width*(R.hexSideLength+L)+L,R.heightInPixels=R.tileHeight*(R.height+.5)));for(var X=0;X<w.height;X++){D[X]=[null];for(var H=0;H<w.width;H++)D[X][H]=null}for(X=0,at=w.chunks.length;X<at;X++)for(var U=w.chunks[X],G=U.x-z,N=U.y-_,W=0,V=0,$=U.data.length;V<$;V++){var j=O+G,k=W+N;P=h(U.data[V]),P.gid>0?(b=new c(R,P.gid,j,k,p.tilewidth,p.tileheight),b.rotation=P.rotation,b.flipX=P.flipped,D[k][j]=b):(F=m?null:new c(R,-1,j,k,p.tilewidth,p.tileheight),D[k][j]=F),O++,O===U.width&&(W++,O=0)}}else{R=new r({name:C.name+w.name,id:w.id,x:C.x+u(w,"offsetx",0)+w.x,y:C.y+u(w,"offsety",0)+w.y,width:w.width,height:w.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:C.opacity*w.opacity,visible:C.visible&&w.visible,properties:u(w,"properties",[]),orientation:o(p.orientation)}),R.orientation===g.HEXAGONAL&&(R.hexSideLength=p.hexsidelength,R.staggerAxis=p.staggeraxis,R.staggerIndex=p.staggerindex,R.staggerAxis==="y"?(I=(R.tileHeight-R.hexSideLength)/2,R.widthInPixels=R.tileWidth*(R.width+.5),R.heightInPixels=R.height*(R.hexSideLength+I)+I):(L=(R.tileWidth-R.hexSideLength)/2,R.widthInPixels=R.width*(R.hexSideLength+L)+L,R.heightInPixels=R.tileHeight*(R.height+.5)));for(var Q=[],et=0,at=w.data.length;et<at;et++)P=h(w.data[et]),P.gid>0?(b=new c(R,P.gid,O,D.length,p.tilewidth,p.tileheight),b.rotation=P.rotation,b.flipX=P.flipped,Q.push(b)):(F=m?null:new c(R,-1,O,D.length,p.tilewidth,p.tileheight),Q.push(F)),O++,O===w.width&&(D.push(Q),O=0,Q=[])}R.data=D,y.push(R)}return y};s.exports=l}),24619:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),g=e(16536),f=e(52205),o=e(57880),u=function(r){for(var h=[],c=[],l=null,p,m=0;m<r.tilesets.length;m++){var v=r.tilesets[m];if(v.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(v.image){var y=new a(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,void 0,void 0,v.tileoffset);if(r.version>1){var E=void 0,C=void 0;if(Array.isArray(v.tiles)){E=E||{},C=C||{};for(var w=0;w<v.tiles.length;w++){var A=v.tiles[w];if(A.properties){var M={};A.properties.forEach(function(X){M[X.name]=X.value}),C[A.id]=M}if(A.objectgroup&&((E[A.id]||(E[A.id]={})).objectgroup=A.objectgroup,A.objectgroup.objects)){var R=A.objectgroup.objects.map(function(X){return f(X)});E[A.id].objectgroup.objects=R}A.animation&&((E[A.id]||(E[A.id]={})).animation=A.animation),A.type&&((E[A.id]||(E[A.id]={})).type=A.type)}}Array.isArray(v.wangsets)&&(E=E||{},C=C||{},o(v.wangsets,E)),E&&(y.tileData=E,y.tileProperties=C)}else if(v.tileproperties&&(y.tileProperties=v.tileproperties),v.tiles){y.tileData=v.tiles;for(p in y.tileData){var P=y.tileData[p].objectgroup;if(P&&P.objects){var b=P.objects.map(function(X){return f(X)});y.tileData[p].objectgroup.objects=b}}}y.updateTileData(v.imagewidth,v.imageheight),h.push(y)}else{var F=new g(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,v.properties),I=0;for(w=0;w<v.tiles.length;w++){A=v.tiles[w];var L=A.image,D=parseInt(A.id,10),O=v.firstgid+D,z=A.imagewidth,_=A.imageheight;F.addImage(O,L,z,_),I=Math.max(D,I)}F.maxId=I,c.push(F)}l&&(l.lastgid=v.firstgid-1),l=v}return{tilesets:h,imageCollections:c}};s.exports=u}),57880:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){for(var g=0;g<e.length;g++){var f=e[g],o=g;if(f.name&&f.name!==""&&(o=f.name),Array.isArray(f.wangtiles)&&f.wangtiles.length>0){var u={},r={},h,c,l;if(Array.isArray(f.edgecolors))for(h=0;h<f.edgecolors.length;h++)l=1+h,c=f.edgecolors[h],c.name!==""&&(u[l]=c.name);if(Array.isArray(f.cornercolors))for(h=0;h<f.cornercolors.length;h++)l=1+h,c=f.cornercolors[h],c.name!==""&&(r[l]=c.name);if(Array.isArray(f.colors))for(h=0;h<f.colors.length;h++)c=f.colors[h],l=1+h,c.name!==""&&(u[l]=r[l]=c.name);for(var p=[u,r,u,r,u,r,u,r],m=0;m<f.wangtiles.length;m++){var v=f.wangtiles[m],y=a[v.tileid]||(a[v.tileid]={});y=y.wangid||(y.wangid={});for(var E=[],C=0;C<Math.min(p.length,v.wangid.length);C++){if(c=v.wangid[C],c===0){E.push(void 0);continue}var w=p[C][c];if(w!==void 0){E.push(w);continue}E.push(c)}y[o]=E}}}};s.exports=T}),96761:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AssignTileProperties:e(51233),Base64Decode:e(41868),BuildTilesetIndex:e(84101),CreateGroupLayer:e(79677),ParseGID:e(29920),ParseImageLayers:e(12635),ParseJSONTiled:e(46594),ParseObject:e(52205),ParseObjectLayers:e(22611),ParseTileLayers:e(28200),ParseTilesets:e(24619)}}),33385:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(37277),f=e(44594),o=e(94880),u=e(72905),r=new a({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(f.BOOT,this.boot,this),c.sys.events.on(f.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var h=this.systems.events;h.on(f.PRE_UPDATE,this.preUpdate,this),h.on(f.UPDATE,this.update,this),h.once(f.SHUTDOWN,this.shutdown,this)},addEvent:function(h){var c;if(h instanceof o){if(c=h,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat,c.delay<=0&&c.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else c=new o(h);return this._pendingInsertion.push(c),c},delayedCall:function(h,c,l,p){return this.addEvent({delay:h,callback:c,args:l,callbackScope:p})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(h){Array.isArray(h)||(h=[h]);for(var c=0;c<h.length;c++){var l=h[c];u(this._pendingRemoval,l),u(this._pendingInsertion,l),u(this._active,l)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var h=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(h===0&&c===0)){var l,p;for(l=0;l<h;l++){p=this._pendingRemoval[l];var m=this._active.indexOf(p);m>-1&&this._active.splice(m,1),p.destroy()}for(l=0;l<c;l++)p=this._pendingInsertion[l],this._active.push(p);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(h,c){if(this.now=h,!this.paused){c*=this.timeScale;for(var l=0;l<this._active.length;l++){var p=this._active[l];if(!p.paused&&(p.elapsed+=c*p.timeScale,p.elapsed>=p.delay)){var m=p.elapsed-p.delay;if(p.elapsed=p.delay,!p.hasDispatched&&p.callback&&(p.hasDispatched=!0,p.callback.apply(p.callbackScope,p.args)),p.repeatCount>0){if(p.repeatCount--,m>=p.delay)for(;m>=p.delay&&p.repeatCount>0;)p.callback&&p.callback.apply(p.callbackScope,p.args),m-=p.delay,p.repeatCount--;p.elapsed=m,p.hasDispatched=!1}else p.hasDispatched&&this._pendingRemoval.push(p)}}}},shutdown:function(){var h;for(h=0;h<this._pendingInsertion.length;h++)this._pendingInsertion[h].destroy();for(h=0;h<this._active.length;h++)this._active[h].destroy();for(h=0;h<this._pendingRemoval.length;h++)this._pendingRemoval[h].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(f.PRE_UPDATE,this.preUpdate,this),c.off(f.UPDATE,this.update,this),c.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});g.register("Clock",r,"time"),s.exports=r}),96120:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50792),f=e(39429),o=e(95540),u=e(44594),r=e(89809),h=new a({Extends:g,initialize:function(l,p){g.call(this),this.scene=l,this.systems=l.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var m=this.systems.events;m.on(u.PRE_UPDATE,this.preUpdate,this),m.on(u.UPDATE,this.update,this),m.once(u.SHUTDOWN,this.destroy,this),p&&this.add(p)},preUpdate:function(c,l){this.paused||(this.elapsed+=l*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var c,l=this.events,p=!1,m=this.systems,v;for(c=0;c<l.length;c++){var y=l[c];if(!y.complete&&y.time<=this.elapsed){if(y.complete=!0,this.totalComplete++,v=y.target?y.target:this,y.if&&!y.if.call(v,y))continue;if(y.once&&(p=!0),y.set&&y.target)for(var E in y.set)y.target[E]=y.set[E];this.iteration&&y.repeat++,y.loop&&y.repeat&&y.loop.call(v),y.tween&&(y.tweenInstance=m.tweens.add(y.tween)),y.sound&&(typeof y.sound=="string"?m.sound.play(y.sound):m.sound.play(y.sound.key,y.sound.config)),y.event&&this.emit(y.event,v),y.run&&y.run.call(v),y.stop&&this.stop()}}if(p)for(c=0;c<l.length;c++)l[c].complete&&l[c].once&&(l.splice(c,1),c--);this.totalComplete>=l.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(r.COMPLETE,this)}},play:function(c){return c===void 0&&(c=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,c&&this.reset(),this},pause:function(){this.paused=!0;for(var c=this.events,l=0;l<c.length;l++){var p=c[l];p.tweenInstance&&(p.tweenInstance.paused=!0)}return this},repeat:function(c){return(c===void 0||c===!0)&&(c=-1),c===!1&&(c=0),this.loop=c,this},resume:function(){this.paused=!1;for(var c=this.events,l=0;l<c.length;l++){var p=c[l];p.tweenInstance&&(p.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(c){c===void 0&&(c=!1),this.elapsed=0,c||(this.iteration=0);for(var l=this.events,p=0;p<l.length;p++){var m=l[p];m.complete=!1,c||(m.repeat=0),m.tweenInstance&&m.tweenInstance.stop()}return this.play(!1)},add:function(c){Array.isArray(c)||(c=[c]);var l=this.events,p=0;l.length>0&&(p=l[l.length-1].time);for(var m=0;m<c.length;m++){var v=c[m],y=o(v,"at",0),E=o(v,"in",null);E!==null&&(y=this.elapsed+E);var C=o(v,"from",null);C!==null&&(y=p+C),l.push({complete:!1,time:y,repeat:0,if:o(v,"if",null),run:o(v,"run",null),loop:o(v,"loop",null),event:o(v,"event",null),target:o(v,"target",null),set:o(v,"set",null),tween:o(v,"tween",null),sound:o(v,"sound",null),once:o(v,"once",!1),stop:o(v,"stop",!1)}),p=y}return this.complete=!1,this},clear:function(){for(var c=this.events,l=0;l<c.length;l++){var p=c[l];p.tweenInstance&&p.tweenInstance.stop()}return c=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var c=Math.min(this.totalComplete,this.events.length);return c/this.events.length},destroy:function(){var c=this.systems.events;c.off(u.PRE_UPDATE,this.preUpdate,this),c.off(u.UPDATE,this.update,this),c.off(u.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});f.register("timeline",function(c){return new h(this.scene,c)}),s.exports=h}),94880:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(95540),f=new a({initialize:function(u){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(u)},reset:function(o){if(this.delay=g(o,"delay",0),this.repeat=g(o,"repeat",0),this.loop=g(o,"loop",!1),this.callback=g(o,"callback",void 0),this.callbackScope=g(o,"callbackScope",this),this.args=g(o,"args",[]),this.timeScale=g(o,"timeScale",1),this.startAt=g(o,"startAt",0),this.paused=g(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,u=this.elapsed+this.delay*(this.repeat-this.repeatCount);return u/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});s.exports=f}),35945:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),89809:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={COMPLETE:e(35945)}}),90291:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Clock:e(33385),Events:e(89809),Timeline:e(96120),TimerEvent:e(94880)}}),40382:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),g=e(83419),f=e(43491),o=e(88032),u=e(37277),r=e(44594),h=e(93109),c=e(86081),l=e(8357),p=e(43960),m=e(26012),v=new g({initialize:function(E){this.scene=E,this.events=E.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(r.UPDATE,this.update,this),this.events.once(r.SHUTDOWN,this.shutdown,this)},create:function(y){Array.isArray(y)||(y=[y]);for(var E=[],C=0;C<y.length;C++){var w=y[C];w instanceof c||w instanceof p?E.push(w):Array.isArray(w.tweens)?E.push(m(this,w)):E.push(l(this,w))}return E.length===1?E[0]:E},add:function(y){var E=y,C=this.tweens;return E instanceof c||E instanceof p||(Array.isArray(E.tweens)?E=m(this,E):E=l(this,E)),C.push(E.reset()),E},addMultiple:function(y){for(var E,C=[],w=this.tweens,A=0;A<y.length;A++)E=y[A],E instanceof c||E instanceof p||(Array.isArray(E.tweens)?E=m(this,E):E=l(this,E)),w.push(E.reset()),C.push(E);return C},chain:function(y){var E=m(this,y);return this.tweens.push(E.init()),E},getChainedTweens:function(y){return y.getChainedTweens()},has:function(y){return this.tweens.indexOf(y)>-1},existing:function(y){return this.has(y)||this.tweens.push(y.reset()),this},addCounter:function(y){var E=o(this,y);return this.tweens.push(E.reset()),E},stagger:function(y,E){return h(y,E)},setLagSmooth:function(y,E){return y===void 0&&(y=1/1e-8),E===void 0&&(E=0),this.maxLag=y,this.lagSkip=Math.min(E,this.maxLag),this},setFps:function(y){return y===void 0&&(y=240),this.gap=1e3/y,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(y){var E=Date.now()-this.prevTime;E>this.maxLag&&(this.startTime+=E-this.lagSkip),this.prevTime+=E;var C=this.prevTime-this.startTime,w=C-this.nextTime,A=C-this.time*1e3;return w>0||y?(C/=1e3,this.time=C,this.nextTime+=w+(w>=this.gap?4:this.gap-w)):A=0,A},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(y){y===void 0&&(y=!1);var E=this.getDelta(y);if(!(E<=0)){this.processing=!0;var C,w,A=[],M=this.tweens;for(C=0;C<M.length;C++)w=M[C],w.update(E)&&A.push(w);var R=A.length;if(R&&M.length>0){for(C=0;C<R;C++){w=A[C];var P=M.indexOf(w);P>-1&&(w.isPendingRemove()||w.isDestroyed())&&(M.splice(P,1),w.destroy())}A.length=0}this.processing=!1}},remove:function(y){return this.processing?y.setPendingRemoveState():(a(this.tweens,y),y.setRemovedState()),this},reset:function(y){return this.existing(y),y.seek(),y.setActiveState(),this},makeActive:function(y){return this.existing(y),y.setActiveState(),this},each:function(y,E){var C,w=[null];for(C=1;C<arguments.length;C++)w.push(arguments[C]);return this.tweens.forEach(function(A){w[0]=A,y.apply(E,w)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(y){var E=[],C=this.tweens;Array.isArray(y)?y=f(y):y=[y];for(var w=y.length,A=0;A<C.length;A++)for(var M=C[A],R=0;R<w;R++)!M.isDestroyed()&&M.hasTarget(y[R])&&E.push(M);return E},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(y){return this.timeScale=y,this},isTweening:function(y){for(var E=this.tweens,C,w=0;w<E.length;w++)if(C=E[w],C.isPlaying()&&C.hasTarget(y))return!0;return!1},killAll:function(){for(var y=this.processing?this.getTweens():this.tweens,E=0;E<y.length;E++)y[E].destroy();return this.processing||(y.length=0),this},killTweensOf:function(y){for(var E=this.getTweensOf(y),C=0;C<E.length;C++)E[C].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(r.UPDATE,this.update,this),this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.events=null}});u.register("TweenManager",v,"tweens"),s.exports=v}),57355:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){return e&&e.hasOwnProperty(a)?e[a]:g};s.exports=T}),6113:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62640),g=e(35355),f=function(o,u){var r=a.Power0;if(typeof o=="string")if(a.hasOwnProperty(o))r=a[o];else{var h="";if(o.indexOf(".")){h=o.substring(o.indexOf(".")+1);var c=h.toLowerCase();c==="in"?h="easeIn":c==="out"?h="easeOut":c==="inout"&&(h="easeInOut")}o=g(o.substring(0,o.indexOf(".")+1)+h),a.hasOwnProperty(o)&&(r=a[o])}else typeof o=="function"&&(r=o);if(!u)return r;var l=u.slice(0);return l.unshift(0),function(p){return l[0]=p,r.apply(this,l)}};s.exports=f}),91389:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89318),g=e(77259),f=e(28392),o={bezier:a,catmull:g,catmullrom:g,linear:f},u=function(r){if(r===null)return null;var h=o.linear;return typeof r=="string"?o.hasOwnProperty(r)&&(h=o[r]):typeof r=="function"&&(h=r),h};s.exports=u}),55292:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f;if(e.hasOwnProperty(a)){var o=typeof e[a];o==="function"?f=function(u,r,h,c,l,p){return e[a](u,r,h,c,l,p)}:f=function(){return e[a]}}else typeof g=="function"?f=g:f=function(){return g};return f};s.exports=T}),82985:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81076),g=function(f){var o,u=[];if(f.hasOwnProperty("props"))for(o in f.props)o.substring(0,1)!=="_"&&u.push({key:o,value:f.props[o]});else for(o in f)a.indexOf(o)===-1&&o.substring(0,1)!=="_"&&u.push({key:o,value:f[o]});return u};s.exports=g}),62329:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),g=function(f){var o=a(f,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};s.exports=g}),17777:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),g=e(99472);function f(c){return!!c.getActive&&typeof c.getActive=="function"}function o(c){return!!c.getStart&&typeof c.getStart=="function"}function u(c){return!!c.getEnd&&typeof c.getEnd=="function"}function r(c){return o(c)||u(c)||f(c)}var h=function(c,l){var p,m=function(X,H,U){return U},v=function(X,H,U){return U},y=null,E=typeof l;if(E==="number")m=function(){return l};else if(Array.isArray(l))v=function(){return l[0]},m=function(){return l[l.length-1]};else if(E==="string"){var C=l.toLowerCase(),w=C.substring(0,6)==="random",A=C.substring(0,3)==="int";if(w||A){var M=C.indexOf("("),R=C.indexOf(")"),P=C.indexOf(",");if(M&&R&&P){var b=parseFloat(C.substring(M+1,P)),F=parseFloat(C.substring(P+1,R));w?m=function(){return g(b,F)}:m=function(){return a(b,F)}}else throw new Error("invalid random() format")}else{C=C[0];var I=parseFloat(l.substr(2));switch(C){case"+":m=function(X,H,U){return U+I};break;case"-":m=function(X,H,U){return U-I};break;case"*":m=function(X,H,U){return U*I};break;case"/":m=function(X,H,U){return U/I};break;default:m=function(){return parseFloat(l)}}}}else if(E==="function")m=l;else if(E==="object")if(r(l))f(l)&&(y=l.getActive),u(l)&&(m=l.getEnd),o(l)&&(v=l.getStart);else if(l.hasOwnProperty("value"))p=h(c,l.value);else{var L=l.hasOwnProperty("to"),D=l.hasOwnProperty("from"),O=l.hasOwnProperty("start");if(L&&(D||O)){if(p=h(c,l.to),O){var z=h(c,l.start);p.getActive=z.getEnd}if(D){var _=h(c,l.from);p.getStart=_.getEnd}}}return p||(p={getActive:y,getEnd:m,getStart:v}),p};s.exports=h}),88032:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),g=e(69902),f=e(23568),o=e(57355),u=e(6113),r=e(95540),h=e(55292),c=e(35154),l=e(17777),p=e(269),m=e(86081),v=function(y,E,C){if(E instanceof m)return E.parent=y,E;C===void 0?C=g:C=p(g,C);var w=r(E,"from",0),A=r(E,"to",1),M=[{value:w}],R=r(E,"delay",C.delay),P=r(E,"easeParams",C.easeParams),b=r(E,"ease",C.ease),F=l("value",A),I=new m(y,M),L=I.add(0,"value",F.getEnd,F.getStart,F.getActive,u(r(E,"ease",b),r(E,"easeParams",P)),h(E,"delay",R),r(E,"duration",C.duration),o(E,"yoyo",C.yoyo),r(E,"hold",C.hold),r(E,"repeat",C.repeat),r(E,"repeatDelay",C.repeatDelay),!1,!1);L.start=w,L.current=w,I.completeDelay=f(E,"completeDelay",0),I.loop=Math.round(f(E,"loop",0)),I.loopDelay=Math.round(f(E,"loopDelay",0)),I.paused=o(E,"paused",!1),I.persist=o(E,"persist",!1),I.isNumberTween=!0,I.callbackScope=c(E,"callbackScope",I);for(var D=a.TYPES,O=0;O<D.length;O++){var z=D[O],_=c(E,z,!1);if(_){var X=c(E,z+"Params",[]);I.setCallback(z,_,X)}}return I};s.exports=v}),93109:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6113),g=e(35154),f=e(36383),o=function(u,r){r===void 0&&(r={});var h,c=g(r,"start",0),l=g(r,"ease",null),p=g(r,"grid",null),m=g(r,"from",0),v=m==="first",y=m==="center",E=m==="last",C=typeof m=="number",w=Array.isArray(u),A=parseFloat(w?u[0]:u),M=w?parseFloat(u[1]):0,R=Math.max(A,M);if(w&&(c+=A),p){var P=p[0],b=p[1],F=0,I=0,L=0,D=0,O=[];E?(F=P-1,I=b-1):C?(F=m%P,I=Math.floor(m/P)):y&&(F=(P-1)/2,I=(b-1)/2);for(var z=f.MIN_SAFE_INTEGER,_=0;_<b;_++){O[_]=[];for(var X=0;X<P;X++){L=F-X,D=I-_;var H=Math.sqrt(L*L+D*D);H>z&&(z=H),O[_][X]=H}}}var U=l?a(l):null;return p?h=function(G,N,W,V){var $=0,j=V%P,k=Math.floor(V/P);j>=0&&j<P&&k>=0&&k<b&&($=O[k][j]);var Q;if(w){var et=M-A;U?Q=$/z*et*U($/z):Q=$/z*et}else U?Q=$*A*U($/z):Q=$*A;return Q+c}:h=function(G,N,W,V,$){$--;var j;v?j=V:y?j=Math.abs($/2-V):E?j=$-V:C&&(j=Math.abs(m-V));var k;if(w){var Q;y?Q=(M-A)/$*(j*2):Q=(M-A)/$*j,U?k=Q*U(j/$):k=Q}else U?k=$*R*U(j/$):k=j*A;return k+c},h};s.exports=o}),8357:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),g=e(69902),f=e(23568),o=e(57355),u=e(6113),r=e(95540),h=e(91389),c=e(55292),l=e(82985),p=e(62329),m=e(35154),v=e(17777),y=e(269),E=e(86081),C=function(w,A,M){if(A instanceof E)return A.parent=w,A;M===void 0?M=g:M=y(g,M);var R=p(A);!R&&M.targets&&(R=M.targets);for(var P=l(A),b=r(A,"delay",M.delay),F=r(A,"duration",M.duration),I=r(A,"easeParams",M.easeParams),L=r(A,"ease",M.ease),D=r(A,"hold",M.hold),O=r(A,"repeat",M.repeat),z=r(A,"repeatDelay",M.repeatDelay),_=o(A,"yoyo",M.yoyo),X=o(A,"flipX",M.flipX),H=o(A,"flipY",M.flipY),U=r(A,"interpolation",M.interpolation),G=function(ft,vt,Tt,ct){if(Tt==="texture"){var Ut=ct,yt=void 0;Array.isArray(ct)?(Ut=ct[0],yt=ct[1]):ct.hasOwnProperty("value")?(Ut=ct.value,Array.isArray(ct.value)?(Ut=ct.value[0],yt=ct.value[1]):typeof ct.value=="string"&&(Ut=ct.value)):typeof ct=="string"&&(Ut=ct),ft.addFrame(vt,Ut,yt,c(ct,"delay",b),r(ct,"duration",F),r(ct,"hold",D),r(ct,"repeat",O),r(ct,"repeatDelay",z),o(ct,"flipX",X),o(ct,"flipY",H))}else{var it=v(Tt,ct),Z=h(r(ct,"interpolation",U));ft.add(vt,Tt,it.getEnd,it.getStart,it.getActive,u(r(ct,"ease",L),r(ct,"easeParams",I)),c(ct,"delay",b),r(ct,"duration",F),o(ct,"yoyo",_),r(ct,"hold",D),r(ct,"repeat",O),r(ct,"repeatDelay",z),o(ct,"flipX",X),o(ct,"flipY",H),Z,Z?ct:null)}},N=new E(w,R),W=0;W<P.length;W++)for(var V=P[W].key,$=P[W].value,j=0;j<R.length;j++)V==="scale"&&!R[j].hasOwnProperty("scale")?(G(N,j,"scaleX",$),G(N,j,"scaleY",$)):G(N,j,V,$);N.completeDelay=f(A,"completeDelay",0),N.loop=Math.round(f(A,"loop",0)),N.loopDelay=Math.round(f(A,"loopDelay",0)),N.paused=o(A,"paused",!1),N.persist=o(A,"persist",!1),N.callbackScope=r(A,"callbackScope",N);for(var k=a.TYPES,Q=0;Q<k.length;Q++){var et=k[Q],at=m(A,et,!1);if(at){var q=m(A,et+"Params",[]);N.setCallback(et,at,q)}}return N};s.exports=C}),26012:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),g=e(23568),f=e(57355),o=e(62329),u=e(35154),r=e(8357),h=e(43960),c=function(l,p){if(p instanceof h)return p.parent=l,p;var m=new h(l);m.startDelay=u(p,"delay",0),m.completeDelay=g(p,"completeDelay",0),m.loop=Math.round(g(p,"loop",u(p,"repeat",0))),m.loopDelay=Math.round(g(p,"loopDelay",u(p,"repeatDelay",0))),m.paused=f(p,"paused",!1),m.persist=f(p,"persist",!1),m.callbackScope=u(p,"callbackScope",m);var v,y=a.TYPES;for(v=0;v<y.length;v++){var E=y[v],C=u(p,E,!1);if(C){var w=u(p,E+"Params",[]);m.setCallback(E,C,w)}}var A=u(p,"tweens",null);if(Array.isArray(A)){var M=[],R=o(p),P=void 0;for(R&&(P={targets:R}),v=0;v<A.length;v++)M.push(r(m,A[v],P));m.add(M)}return m};s.exports=c}),30231:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={GetBoolean:e(57355),GetEaseFunction:e(6113),GetInterpolationFunction:e(91389),GetNewValue:e(55292),GetProps:e(82985),GetTargets:e(62329),GetValueOp:e(17777),NumberTweenBuilder:e(88032),StaggerBuilder:e(93109),TweenBuilder:e(8357)}}),73685:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="active"}),98540:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),67233:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="loop"}),2859:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),98336:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="repeat"}),25764:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),32193:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),84371:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stop"}),70766:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="update"}),55659:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="yoyo"}),842:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={TWEEN_ACTIVE:e(73685),TWEEN_COMPLETE:e(98540),TWEEN_LOOP:e(67233),TWEEN_PAUSE:e(2859),TWEEN_RESUME:e(25764),TWEEN_REPEAT:e(98336),TWEEN_START:e(32193),TWEEN_STOP:e(84371),TWEEN_UPDATE:e(70766),TWEEN_YOYO:e(55659)}}),43066:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={States:e(86353),Builders:e(30231),Events:e(842),TweenManager:e(40382),Tween:e(86081),TweenData:e(48177),TweenFrameData:e(42220),BaseTween:e(70402),TweenChain:e(43960)};s.exports=a}),70402:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(50792),f=e(842),o=e(86353),u=new a({Extends:g,initialize:function(h){g.call(this),this.parent=h,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=o.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(f.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(f.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(f.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(f.TWEEN_COMPLETE,"onComplete")},complete:function(r){return r===void 0&&(r=0),r?(this.setCompleteDelayState(),this.countdown=r):this.onCompleteHandler(),this},completeAfterLoop:function(r){return r===void 0&&(r=0),this.loopCounter>r&&(this.loopCounter=r),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(f.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(r){this.countdown-=r,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(f.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(r){return this.countdown-=r,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(f.TWEEN_START,"onStart"),r=0),r},updateCompleteDelay:function(r){this.countdown-=r,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(r,h,c){return c===void 0&&(c=[]),this.callbacks.hasOwnProperty(r)&&(this.callbacks[r]={func:h,params:c}),this},setPendingState:function(){this.state=o.PENDING},setActiveState:function(){this.state=o.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=o.LOOP_DELAY},setCompleteDelayState:function(){this.state=o.COMPLETE_DELAY},setStartDelayState:function(){this.state=o.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=o.PENDING_REMOVE},setRemovedState:function(){this.state=o.REMOVED},setFinishedState:function(){this.state=o.FINISHED},setDestroyedState:function(){this.state=o.DESTROYED},isPending:function(){return this.state===o.PENDING},isActive:function(){return this.state===o.ACTIVE},isLoopDelayed:function(){return this.state===o.LOOP_DELAY},isCompleteDelayed:function(){return this.state===o.COMPLETE_DELAY},isStartDelayed:function(){return this.state===o.START_DELAY},isPendingRemove:function(){return this.state===o.PENDING_REMOVE},isRemoved:function(){return this.state===o.REMOVED},isFinished:function(){return this.state===o.FINISHED},isDestroyed:function(){return this.state===o.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(r){r.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});u.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],s.exports=u}),95042:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),g=e(842),f=e(86353),o=new a({initialize:function(r,h,c,l,p,m,v,y,E,C){this.tween=r,this.targetIndex=h,this.duration=l<=0?.01:l,this.totalDuration=0,this.delay=0,this.getDelay=c,this.yoyo=p,this.hold=m,this.repeat=v,this.repeatDelay=y,this.repeatCounter=0,this.flipX=E,this.flipY=C,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(u){u===void 0&&(u=this.current),this.tween.targets[this.targetIndex][this.key]=u},setCreatedState:function(){this.state=f.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=f.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=f.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=f.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=f.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=f.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=f.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=f.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===f.CREATED},isDelayed:function(){return this.state===f.DELAY},isPendingRender:function(){return this.state===f.PENDING_RENDER},isPlayingForward:function(){return this.state===f.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===f.PLAYING_BACKWARD},isHolding:function(){return this.state===f.HOLD_DELAY},isRepeating:function(){return this.state===f.REPEAT_DELAY},isComplete:function(){return this.state===f.COMPLETE},setStateFromEnd:function(u){this.yoyo?this.onRepeat(u,!0,!0):this.repeatCounter>0?this.onRepeat(u,!0,!1):this.setCompleteState()},setStateFromStart:function(u){this.repeatCounter>0?this.onRepeat(u,!1):this.setCompleteState()},reset:function(){var u=this.tween,r=u.totalTargets,h=this.targetIndex,c=u.targets[h],l=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(c,l,0,h,r,u),this.repeatCounter=this.repeat===-1?f.MAX:this.repeat,this.setPendingRenderState();var p=this.duration+this.hold;this.yoyo&&(p+=this.duration);var m=p+this.repeatDelay;this.totalDuration=this.delay+p,this.repeat===-1?(this.totalDuration+=m*f.MAX,u.isInfinite=!0):this.repeat>0&&(this.totalDuration+=m*this.repeat),this.totalDuration>u.duration&&(u.duration=this.totalDuration),this.delay<u.startDelay&&(u.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(u,r,h){var c=this.tween,l=c.totalTargets,p=this.targetIndex,m=c.targets[p],v=this.key,y=v!=="texture";if(this.elapsed=u,this.progress=u/this.duration,this.flipX&&m.toggleFlipX(),this.flipY&&m.toggleFlipY(),y&&(r||h)&&(this.start=this.getStartValue(m,v,this.start,p,l,c)),h){this.setPlayingBackwardState(),this.dispatchEvent(g.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,y&&(this.end=this.getEndValue(m,v,this.start,p,l,c)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-u,y&&(this.current=this.start,m[v]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(g.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});s.exports=o}),69902:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};s.exports=T}),81076:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]}),86081:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),g=e(83419),f=e(842),o=e(44603),u=e(39429),r=e(36383),h=e(86353),c=e(48177),l=e(42220),p=new g({Extends:a,initialize:function(v,y){a.call(this,v),this.targets=y,this.totalTargets=y.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(m,v,y,E,C,w,A,M,R,P,b,F,I,L,D,O){var z=new c(this,m,v,y,E,C,w,A,M,R,P,b,F,I,L,D,O);return this.totalData=this.data.push(z),z},addFrame:function(m,v,y,E,C,w,A,M,R,P){var b=new l(this,m,v,y,E,C,w,A,M,R,P);return this.totalData=this.data.push(b),b},getValue:function(m){m===void 0&&(m=0);var v=null;return this.data&&(v=this.data[m].current),v},hasTarget:function(m){return this.targets&&this.targets.indexOf(m)!==-1},updateTo:function(m,v,y){if(y===void 0&&(y=!1),m!=="texture")for(var E=0;E<this.totalData;E++){var C=this.data[E];C.key===m&&(C.isPlayingForward()||C.isPlayingBackward())&&(C.end=v,y&&(C.start=C.current))}return this},restart:function(){switch(this.state){case h.REMOVED:case h.FINISHED:this.seek(),this.parent.makeActive(this);break;case h.PENDING:case h.PENDING_REMOVE:this.parent.reset(this);break;case h.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(f.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,a.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(m,v,y){if(m===void 0&&(m=0),v===void 0&&(v=16.6),y===void 0&&(y=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;y||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(f.TWEEN_ACTIVE,"onActive");var E=this.paused;if(this.paused=!1,m>0){for(var C=Math.floor(m/v),w=m-C*v,A=0;A<C;A++)this.update(v);w>0&&this.update(w)}return this.paused=E,this.isSeeking=!1,this},initTweenData:function(m){m===void 0&&(m=!1),this.duration=0,this.startDelay=r.MAX_SAFE_INTEGER;for(var v=this.data,y=0;y<this.totalData;y++)v[y].reset(m);this.duration=Math.max(this.duration,.01);var E=this.duration,C=this.completeDelay,w=this.loopCounter,A=this.loopDelay;w>0?this.totalDuration=E+C+(E+A)*w:this.totalDuration=E+C},reset:function(m){return m===void 0&&(m=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=h.MAX),m||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(f.TWEEN_ACTIVE,"onActive")),this},update:function(m){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(m*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(m),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(m),!1;this.hasStarted||(this.startDelay-=m,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(f.TWEEN_START,"onStart"),m=0));var v=!1;if(this.isActive())for(var y=this.data,E=0;E<this.totalData;E++)y[E].update(m)&&(v=!0);this.elapsed+=m,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=m,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),v||this.nextState();var C=this.isPendingRemove();return C&&this.persist&&(this.setFinishedState(),C=!1),C},forward:function(m){return this.update(m),this},rewind:function(m){return this.update(-m),this},dispatchEvent:function(m,v){if(!this.isSeeking){if(this.emit(m,this,this.targets),!this.callbacks)return;var y=this.callbacks[v];y&&y.func.apply(this.callbackScope,[this,this.targets].concat(y.params))}},destroy:function(){a.prototype.destroy.call(this),this.targets=null}});u.register("tween",function(m){return this.scene.sys.tweens.add(m)}),o.register("tween",function(m){return this.scene.sys.tweens.create(m)}),s.exports=p}),43960:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),g=e(70402),f=e(83419),o=e(842),u=e(44603),r=e(39429),h=e(86353),c=new f({Extends:g,initialize:function(p){g.call(this,p),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?h.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(l){var p=this.parent.create(l);Array.isArray(p)||(p=[p]);for(var m=this.data,v=0;v<p.length;v++){var y=p[v];y.parent=this,m.push(y.reset())}return this.totalData=m.length,this},remove:function(l){return a(this.data,l),l.setRemovedState(),l===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(l){for(var p=this.data,m=0;m<this.totalData;m++)if(p[m].hasTarget(l))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(l){return l.seek(),l.setActiveState(),this},makeActive:function(l){return l.reset(),l.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var l=this.data,p=this.totalData,m=0;m<p;m++)l[m].reset(!1);this.setCurrentTween(0)},update:function(l){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(l*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(l),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(l),!1;this.hasStarted||(this.startDelay-=l,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(o.TWEEN_START,"onStart"),l=0));var p=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(l)&&this.nextTween()&&this.nextState(),p=this.isPendingRemove(),p&&this.persist&&(this.setFinishedState(),p=!1)),p},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(l){this.currentIndex=l,this.currentTween=this.data[l],this.currentTween.setActiveState()},dispatchEvent:function(l,p){this.emit(l,this);var m=this.callbacks[p];m&&m.func.apply(this.callbackScope,[this].concat(m.params))},destroy:function(){g.prototype.destroy.call(this),this.currentTween=null}});r.register("tweenchain",function(l){return this.scene.sys.tweens.chain(l)}),u.register("tweenchain",function(l){return this.scene.sys.tweens.create(l)}),s.exports=c}),48177:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95042),g=e(45319),f=e(83419),o=e(842),u=new f({Extends:a,initialize:function(h,c,l,p,m,v,y,E,C,w,A,M,R,P,b,F,I){a.call(this,h,c,E,C,w,A,M,R,P,b),this.key=l,this.getActiveValue=v,this.getEndValue=p,this.getStartValue=m,this.ease=y,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=F,this.interpolationData=I},reset:function(r){a.prototype.reset.call(this);var h=this.tween.targets[this.targetIndex],c=this.key;r&&(h[c]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(h[c]=this.getActiveValue(h,c,0))},update:function(r){var h=this.tween,c=h.totalTargets,l=this.targetIndex,p=h.targets[l],m=this.key;if(!p)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(o.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(p,m,p[m],l,c,h),this.end=this.getEndValue(p,m,this.start,l,c,h),this.current=this.start,p[m]=this.start,this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),y=this.isPlayingBackward();if(v||y){var E=this.elapsed,C=this.duration,w=0,A=!1;E+=r,E>=C?(w=E-C,E=C,A=!0):E<0&&(E=0);var M=g(E/C,0,1);this.elapsed=E,this.progress=M,this.previous=this.current,v||(M=1-M);var R=this.ease(M);this.interpolation?this.current=this.interpolation(this.interpolationData,R):this.current=this.start+(this.end-this.start)*R,p[m]=this.current,A&&(v?(h.isNumberTween&&(this.current=this.end,p[m]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(w)):(h.isNumberTween&&(this.current=this.start,p[m]=this.current),this.setStateFromStart(w))),this.dispatchEvent(o.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,h){var c=this.tween;if(!c.isSeeking){var l=c.targets[this.targetIndex],p=this.key,m=this.current,v=this.previous;c.emit(r,c,p,l,m,v);var y=c.callbacks[h];y&&y.func.apply(c.callbackScope,[c,l,p,m,v].concat(y.params))}},destroy:function(){a.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});s.exports=u}),42220:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95042),g=e(45319),f=e(83419),o=e(842),u=new f({Extends:a,initialize:function(h,c,l,p,m,v,y,E,C,w,A){a.call(this,h,c,m,v,!1,y,E,C,w,A),this.key="texture",this.startTexture=null,this.endTexture=l,this.startFrame=null,this.endFrame=p,this.yoyo=E!==0},reset:function(r){a.prototype.reset.call(this);var h=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=h.texture.key,this.startFrame=h.frame.name),r&&h.setTexture(this.startTexture,this.startFrame)},update:function(r){var h=this.tween,c=this.targetIndex,l=h.targets[c];if(!l)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(o.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&l.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),m=this.isPlayingBackward();if(p||m){var v=this.elapsed,y=this.duration,E=0,C=!1;v+=r,v>=y?(E=v-y,v=y,C=!0):v<0&&(v=0);var w=g(v/y,0,1);this.elapsed=v,this.progress=w,C&&(p?(l.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(E)):(l.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(E))),this.dispatchEvent(o.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,h){var c=this.tween;if(!c.isSeeking){var l=c.targets[this.targetIndex],p=this.key;c.emit(r,c,p,l);var m=c.callbacks[h];m&&m.func.apply(c.callbackScope,[c,l,p].concat(m.params))}},destroy:function(){a.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});s.exports=u}),86353:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};s.exports=T}),83419:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(u){return!!u.get&&typeof u.get=="function"||!!u.set&&typeof u.set=="function"}function e(u,r,h){var c=h?u[r]:Object.getOwnPropertyDescriptor(u,r);return!h&&c.value&&typeof c.value=="object"&&(c=c.value),c&&T(c)?(typeof c.enumerable>"u"&&(c.enumerable=!0),typeof c.configurable>"u"&&(c.configurable=!0),c):!1}function a(u,r){var h=Object.getOwnPropertyDescriptor(u,r);return h?(h.value&&typeof h.value=="object"&&(h=h.value),h.configurable===!1):!1}function g(u,r,h,c){for(var l in r)if(r.hasOwnProperty(l)){var p=e(r,l,h);if(p!==!1){var m=c||u;if(a(m.prototype,l)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+l+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(u.prototype,l,p)}else u.prototype[l]=r[l]}}function f(u,r){if(r){Array.isArray(r)||(r=[r]);for(var h=0;h<r.length;h++)g(u,r[h].prototype||r[h])}}function o(u){u||(u={});var r,h;if(u.initialize){if(typeof u.initialize!="function")throw new Error("initialize must be a function");r=u.initialize,delete u.initialize}else if(u.Extends){var c=u.Extends;r=function(){c.apply(this,arguments)}}else r=function(){};u.Extends?(r.prototype=Object.create(u.Extends.prototype),r.prototype.constructor=r,h=u.Extends,delete u.Extends):r.prototype.constructor=r;var l=null;return u.Mixins&&(l=u.Mixins,delete u.Mixins),f(r,l),g(r,u,!0,h),r}o.extend=g,o.mixin=f,o.ignoreFinals=!1,s.exports=o}),29747:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};s.exports=T}),20242:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return null};s.exports=T}),71146:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o){if(o===void 0&&(o=e),g>0){var u=g-e.length;if(u<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.push(a),f&&f.call(o,a),a):null;for(var r=a.length-1;r>=0;)e.indexOf(a[r])!==-1&&a.splice(r,1),r--;if(r=a.length,r===0)return null;g>0&&r>u&&(a.splice(u),r=u);for(var h=0;h<r;h++){var c=a[h];e.push(c),f&&f.call(o,c)}return a};s.exports=T}),51067:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f,o,u){if(g===void 0&&(g=0),u===void 0&&(u=e),f>0){var r=f-e.length;if(r<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.splice(g,0,a),o&&o.call(u,a),a):null;for(var h=a.length-1;h>=0;)e.indexOf(a[h])!==-1&&a.pop(),h--;if(h=a.length,h===0)return null;f>0&&h>r&&(a.splice(r),h=r);for(var c=h-1;c>=0;c--){var l=a[c];e.splice(g,0,l),o&&o.call(u,l)}return a};s.exports=T}),66905:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.indexOf(a);return g!==-1&&g<e.length&&(e.splice(g,1),e.push(a)),a};s.exports=T}),21612:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),g=function(f,o,u,r,h){r===void 0&&(r=0),h===void 0&&(h=f.length);var c=0;if(a(f,r,h))for(var l=r;l<h;l++){var p=f[l];p[o]===u&&c++}return c};s.exports=g}),95428:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f,o=[null];for(f=3;f<arguments.length;f++)o.push(arguments[f]);for(f=0;f<e.length;f++)o[0]=e[f],a.apply(g,o);return e};s.exports=T}),36914:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),g=function(f,o,u,r,h){if(r===void 0&&(r=0),h===void 0&&(h=f.length),a(f,r,h)){var c,l=[null];for(c=5;c<arguments.length;c++)l.push(arguments[c]);for(c=r;c<h;c++)l[0]=f[c],o.apply(u,l)}return f};s.exports=g}),81957:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(a.length){if(a.length===1)return a[0]}else return NaN;var f=1,o,u;if(g){if(e<a[0][g])return a[0];for(;a[f][g]<e;)f++}else for(;a[f]<e;)f++;return f>a.length&&(f=a.length),g?(o=a[f-1][g],u=a[f][g],u-e<=e-o?a[f]:a[f-1]):(o=a[f-1],u=a[f],u-e<=e-o?u:o)};s.exports=T}),43491:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=[]);for(var g=0;g<e.length;g++)Array.isArray(e[g])?T(e[g],a):a.push(e[g]);return a};s.exports=T}),46710:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),g=function(f,o,u,r,h){r===void 0&&(r=0),h===void 0&&(h=f.length);var c=[];if(a(f,r,h))for(var l=r;l<h;l++){var p=f[l];(!o||o&&u===void 0&&p.hasOwnProperty(o)||o&&u!==void 0&&p[o]===u)&&c.push(p)}return c};s.exports=g}),58731:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),g=function(f,o,u,r,h){if(r===void 0&&(r=0),h===void 0&&(h=f.length),r!==-1){if(a(f,r,h))for(var c=r;c<h;c++){var l=f[c];if(!o||o&&u===void 0&&l.hasOwnProperty(o)||o&&u!==void 0&&l[o]===u)return l}}else if(a(f,0,h))for(var c=h;c>=0;c--){var l=f[c];if(!o||o&&u===void 0&&l.hasOwnProperty(o)||o&&u!==void 0&&l[o]===u)return l}return null};s.exports=g}),26546:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){a===void 0&&(a=0),g===void 0&&(g=e.length);var f=a+Math.floor(Math.random()*g);return e[f]===void 0?null:e[f]};s.exports=T}),85835:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(a===g)return e;var f=e.indexOf(a),o=e.indexOf(g);if(f<0||o<0)throw new Error("Supplied items must be elements of the same array");return f>o||(e.splice(f,1),o=e.indexOf(g),e.splice(o+1,0,a)),e};s.exports=T}),83371:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(a===g)return e;var f=e.indexOf(a),o=e.indexOf(g);if(f<0||o<0)throw new Error("Supplied items must be elements of the same array");return f<o||(e.splice(f,1),o===0?e.unshift(a):e.splice(o,0,a)),e};s.exports=T}),70864:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.indexOf(a);if(g>0){var f=e[g-1],o=e.indexOf(f);e[g]=f,e[o]=a}return e};s.exports=T}),69693:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=e.indexOf(a);if(f===-1||g<0||g>=e.length)throw new Error("Supplied index out of bounds");return f!==g&&(e.splice(f,1),e.splice(g,0,a)),a};s.exports=T}),40853:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.indexOf(a);if(g!==-1&&g<e.length-1){var f=e[g+1],o=e.indexOf(f);e[g]=f,e[o]=a}return e};s.exports=T}),20283:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=[],u,r=!1;if((g||f)&&(r=!0,g||(g=""),f||(f="")),a<e)for(u=e;u>=a;u--)r?o.push(g+u.toString()+f):o.push(u);else for(u=e;u<=a;u++)r?o.push(g+u.toString()+f):o.push(u);return o};s.exports=T}),593:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2284),g=function(f,o,u){f===void 0&&(f=0),o===void 0&&(o=null),u===void 0&&(u=1),o===null&&(o=f,f=0);for(var r=[],h=Math.max(a((o-f)/(u||1)),0),c=0;c<h;c++)r.push(f),f+=u;return r};s.exports=g}),43886:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(g,f,o){var u=g[f];g[f]=g[o],g[o]=u}function e(g,f){return g<f?-1:g>f?1:0}var a=function(g,f,o,u,r){for(o===void 0&&(o=0),u===void 0&&(u=g.length-1),r===void 0&&(r=e);u>o;){if(u-o>600){var h=u-o+1,c=f-o+1,l=Math.log(h),p=.5*Math.exp(2*l/3),m=.5*Math.sqrt(l*p*(h-p)/h)*(c-h/2<0?-1:1),v=Math.max(o,Math.floor(f-c*p/h+m)),y=Math.min(u,Math.floor(f+(h-c)*p/h+m));a(g,f,v,y,r)}var E=g[f],C=o,w=u;for(T(g,o,f),r(g[u],E)>0&&T(g,o,u);C<w;){for(T(g,C,w),C++,w--;r(g[C],E)<0;)C++;for(;r(g[w],E)>0;)w--}r(g[o],E)===0?T(g,o,w):(w++,T(g,w,u)),w<=f&&(o=w+1),f<=w&&(u=w-1)}};s.exports=a}),88492:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),g=e(33680),f=function(u,r,h){for(var c=[],l=0;l<u.length;l++)for(var p=0;p<r.length;p++)for(var m=0;m<h;m++)c.push({a:u[l],b:r[p]});return c},o=function(u,r,h){var c=a(h,"max",0),l=a(h,"qty",1),p=a(h,"random",!1),m=a(h,"randomB",!1),v=a(h,"repeat",0),y=a(h,"yoyo",!1),E=[];if(m&&g(r),v===-1)if(c===0)v=0;else{var C=u.length*r.length*l;y&&(C*=2),v=Math.ceil(c/C)}for(var w=0;w<=v;w++){var A=f(u,r,l);p&&g(A),E=E.concat(A),y&&(A.reverse(),E=E.concat(A))}return c&&E.splice(c),E};s.exports=o}),72905:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),g=function(f,o,u,r){r===void 0&&(r=f);var h;if(!Array.isArray(o))return h=f.indexOf(o),h!==-1?(a(f,h),u&&u.call(r,o),o):null;for(var c=o.length-1,l=[];c>=0;){var p=o[c];h=f.indexOf(p),h!==-1&&(a(f,h),l.push(p),u&&u.call(r,p)),c--}return l};s.exports=g}),60248:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),g=function(f,o,u,r){if(r===void 0&&(r=f),o<0||o>f.length-1)throw new Error("Index out of bounds");var h=a(f,o);return u&&u.call(r,h),h};s.exports=g}),81409:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),g=function(f,o,u,r,h){if(o===void 0&&(o=0),u===void 0&&(u=f.length),h===void 0&&(h=f),a(f,o,u)){var c=u-o,l=f.splice(o,c);if(r)for(var p=0;p<l.length;p++){var m=l[p];r.call(h,m)}return l}else return[]};s.exports=g}),31856:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),g=function(f,o,u){o===void 0&&(o=0),u===void 0&&(u=f.length);var r=o+Math.floor(Math.random()*u);return a(f,r)};s.exports=g}),42169:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=e.indexOf(a),o=e.indexOf(g);return f!==-1&&o===-1?(e[f]=g,!0):!1};s.exports=T}),86003:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1);for(var g=null,f=0;f<a;f++)g=e.shift(),e.push(g);return g};s.exports=T}),49498:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1);for(var g=null,f=0;f<a;f++)g=e.pop(),e.unshift(g);return g};s.exports=T}),82011:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){var o=e.length;if(a<0||a>=o||a>=g||g>o){if(f)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};s.exports=T}),89545:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var g=e.indexOf(a);return g!==-1&&g>0&&(e.splice(g,1),e.unshift(a)),a};s.exports=T}),17810:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),g=function(f,o,u,r,h){if(r===void 0&&(r=0),h===void 0&&(h=f.length),a(f,r,h))for(var c=r;c<h;c++){var l=f[c];l.hasOwnProperty(o)&&(l[o]=u)}return f};s.exports=g}),33680:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=e.length-1;a>0;a--){var g=Math.floor(Math.random()*(a+1)),f=e[a];e[a]=e[g],e[g]=f}return e};s.exports=T}),90126:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=/\D/g;return e.sort(function(g,f){return parseInt(g.replace(a,""),10)-parseInt(f.replace(a,""),10)}),e};s.exports=T}),19133:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){if(!(a>=e.length)){for(var g=e.length-1,f=e[a],o=a;o<g;o++)e[o]=e[o+1];return e.length=g,f}};s.exports=T}),19186:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82264);function g(r,h){return String(r).localeCompare(h)}function f(r,h){var c=r.length;if(c<=1)return r;for(var l=new Array(c),p=1;p<c;p*=2){o(r,h,p,l);var m=r;r=l,l=m}return r}function o(r,h,c,l){var p=r.length,m=0,v=c*2,y,E,C,w,A;for(y=0;y<p;y+=v)for(E=y+c,C=E+c,E>p&&(E=p),C>p&&(C=p),w=y,A=E;;)if(w<E&&A<C)h(r[w],r[A])<=0?l[m++]=r[w++]:l[m++]=r[A++];else if(w<E)l[m++]=r[w++];else if(A<C)l[m++]=r[A++];else break}var u=function(r,h){if(h===void 0&&(h=g),!r||r.length<2)return r;if(a.features.stableSort)return r.sort(h);var c=f(r,h);return c!==r&&o(c,null,r.length,r),r};s.exports=u}),25630:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(a===g)return e;var f=e.indexOf(a),o=e.indexOf(g);if(f<0||o<0)throw new Error("Supplied items must be elements of the same array");return e[f]=g,e[o]=a,e};s.exports=T}),37105:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Matrix:e(54915),Add:e(71146),AddAt:e(51067),BringToTop:e(66905),CountAllMatching:e(21612),Each:e(95428),EachInRange:e(36914),FindClosestInSorted:e(81957),Flatten:e(43491),GetAll:e(46710),GetFirst:e(58731),GetRandom:e(26546),MoveDown:e(70864),MoveTo:e(69693),MoveUp:e(40853),MoveAbove:e(85835),MoveBelow:e(83371),NumberArray:e(20283),NumberArrayStep:e(593),QuickSelect:e(43886),Range:e(88492),Remove:e(72905),RemoveAt:e(60248),RemoveBetween:e(81409),RemoveRandomElement:e(31856),Replace:e(42169),RotateLeft:e(86003),RotateRight:e(49498),SafeRange:e(82011),SendToBack:e(89545),SetAll:e(17810),Shuffle:e(33680),SortByDigits:e(90126),SpliceOne:e(19133),StableSort:e(19186),Swap:e(25630)}}),86922:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var a=e[0].length,g=1;g<e.length;g++)if(e[g].length!==a)return!1;return!0};s.exports=T}),63362:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41836),g=e(86922),f=function(o){var u="";if(!g(o))return u;for(var r=0;r<o.length;r++){for(var h=0;h<o[r].length;h++){var c=o[r][h].toString();c!=="undefined"?u+=a(c,2):u+="?",h<o[r].length-1&&(u+=" |")}if(r<o.length-1){u+=`
`;for(var l=0;l<o[r].length;l++)u+="---",l<o[r].length-1&&(u+="+");u+=`
`}}return u};s.exports=f}),92598:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.reverse()};s.exports=T}),21224:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=0;a<e.length;a++)e[a].reverse();return e};s.exports=T}),98717:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),g=function(f){return a(f,180)};s.exports=g}),44657:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),g=function(f,o){o===void 0&&(o=1);for(var u=0;u<o;u++)f=a(f,90);return f};s.exports=g}),37829:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86922),g=e(2429),f=function(o,u){if(u===void 0&&(u=90),!a(o))return null;if(typeof u!="string"&&(u=(u%360+360)%360),u===90||u===-270||u==="rotateLeft")o=g(o),o.reverse();else if(u===-90||u===270||u==="rotateRight")o.reverse(),o=g(o);else if(Math.abs(u)===180||u==="rotate180"){for(var r=0;r<o.length;r++)o[r].reverse();o.reverse()}return o};s.exports=f}),92632:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),g=function(f,o){o===void 0&&(o=1);for(var u=0;u<o;u++)f=a(f,-90);return f};s.exports=g}),69512:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86003),g=e(49498),f=function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),r!==0&&(r<0?a(o,Math.abs(r)):g(o,r)),u!==0)for(var h=0;h<o.length;h++){var c=o[h];u<0?a(c,Math.abs(u)):g(c,u)}return o};s.exports=f}),2429:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=e.length,g=e[0].length,f=new Array(g),o=0;o<g;o++){f[o]=new Array(a);for(var u=a-1;u>-1;u--)f[o][u]=e[u][o]}return f};s.exports=T}),54915:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CheckMatrix:e(86922),MatrixToString:e(63362),ReverseColumns:e(92598),ReverseRows:e(21224),Rotate180:e(98717),RotateLeft:e(44657),RotateMatrix:e(37829),RotateRight:e(92632),Translate:e(69512),TransposeMatrix:e(2429)}}),71334:(s=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(a,g){for(var f=new Uint8Array(a),o=f.length,u=g?"data:"+g+";base64,":"",r=0;r<o;r+=3)u+=T[f[r]>>2],u+=T[(f[r]&3)<<4|f[r+1]>>4],u+=T[(f[r+1]&15)<<2|f[r+2]>>6],u+=T[f[r+2]&63];return o%3===2?u=u.substring(0,u.length-1)+"=":o%3===1&&(u=u.substring(0,u.length-2)+"=="),u};s.exports=e}),53134:(s=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),a=0;a<T.length;a++)e[T.charCodeAt(a)]=a;var g=function(f){f=f.substr(f.indexOf(",")+1);var o=f.length,u=o*.75,r=0,h,c,l,p;f[o-1]==="="&&(u--,f[o-2]==="="&&u--);for(var m=new ArrayBuffer(u),v=new Uint8Array(m),y=0;y<o;y+=4)h=e[f.charCodeAt(y)],c=e[f.charCodeAt(y+1)],l=e[f.charCodeAt(y+2)],p=e[f.charCodeAt(y+3)],v[r++]=h<<2|c>>4,v[r++]=(c&15)<<4|l>>2,v[r++]=(l&3)<<6|p&63;return m};s.exports=g}),65839:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ArrayBufferToBase64:e(71334),Base64ToArrayBuffer:e(53134)}}),91799:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Array:e(37105),Base64:e(65839),Objects:e(1183),String:e(31749),NOOP:e(29747),NULL:e(20242)}}),41786:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a={};for(var g in e)Array.isArray(e[g])?a[g]=e[g].slice(0):a[g]=e[g];return a};s.exports=T}),62644:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a,g,f;if(typeof e!="object"||e===null)return e;a=Array.isArray(e)?[]:{};for(f in e)g=e[f],a[f]=T(g);return a};s.exports=T}),79291:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41212),g=function(){var f,o,u,r,h,c,l=arguments[0]||{},p=1,m=arguments.length,v=!1;for(typeof l=="boolean"&&(v=l,l=arguments[1]||{},p=2),m===p&&(l=this,--p);p<m;p++)if((f=arguments[p])!=null)for(o in f)u=l[o],r=f[o],l!==r&&(v&&r&&(a(r)||(h=Array.isArray(r)))?(h?(h=!1,c=u&&Array.isArray(u)?u:[]):c=u&&a(u)?u:{},l[o]=g(v,c,r)):r!==void 0&&(l[o]=r));return l};s.exports=g}),23568:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75508),g=e(35154),f=function(o,u,r){var h=g(o,u,null);if(h===null)return r;if(Array.isArray(h))return a.RND.pick(h);if(typeof h=="object"){if(h.hasOwnProperty("randInt"))return a.RND.integerInRange(h.randInt[0],h.randInt[1]);if(h.hasOwnProperty("randFloat"))return a.RND.realInRange(h.randFloat[0],h.randFloat[1])}else if(typeof h=="function")return h(u);return h};s.exports=f}),95540:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){var f=typeof e;return!e||f==="number"||f==="string"?g:e.hasOwnProperty(a)&&e[a]!==void 0?e[a]:g};s.exports=T}),82840:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),g=e(45319),f=function(o,u,r,h,c){c===void 0&&(c=r);var l=a(o,u,c);return g(l,r,h)};s.exports=f}),35154:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){if(!e&&!f||typeof e=="number")return g;if(e&&e.hasOwnProperty(a))return e[a];if(f&&f.hasOwnProperty(a))return f[a];if(a.indexOf(".")!==-1){for(var o=a.split("."),u=e,r=f,h=g,c=g,l=!0,p=!0,m=0;m<o.length;m++)u&&u.hasOwnProperty(o[m])?(h=u[o[m]],u=u[o[m]]):l=!1,r&&r.hasOwnProperty(o[m])?(c=r[o[m]],r=r[o[m]]):p=!1;return l?h:p?c:g}else return g};s.exports=T}),69036:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){for(var g=0;g<a.length;g++)if(!e.hasOwnProperty(a[g]))return!1;return!0};s.exports=T}),1985:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){for(var g=0;g<a.length;g++)if(e.hasOwnProperty(a[g]))return!0;return!1};s.exports=T}),97022:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.hasOwnProperty(a)};s.exports=T}),41212:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};s.exports=T}),46975:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),g=function(f,o){var u=a(f);for(var r in o)u.hasOwnProperty(r)||(u[r]=o[r]);return u};s.exports=g}),269:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),g=function(f,o){var u=a(f);for(var r in o)u.hasOwnProperty(r)&&(u[r]=o[r]);return u};s.exports=g}),18254:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97022),g=function(f,o){for(var u={},r=0;r<o.length;r++){var h=o[r];a(f,h)&&(u[h]=f[h])}return u};s.exports=g}),61622:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(a))return e[a]=g,!0;if(a.indexOf(".")!==-1){for(var f=a.split("."),o=e,u=e,r=0;r<f.length;r++)if(o.hasOwnProperty(f[r]))u=o,o=o[f[r]];else return!1;return u[f[f.length-1]]=g,!0}return!1};s.exports=T}),1183:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Clone:e(41786),DeepCopy:e(62644),Extend:e(79291),GetAdvancedValue:e(23568),GetFastValue:e(95540),GetMinMaxValue:e(82840),GetValue:e(35154),HasAll:e(69036),HasAny:e(1985),HasValue:e(97022),IsPlainObject:e(41212),Merge:e(46975),MergeRight:e(269),Pick:e(18254),SetValue:e(61622)}}),27902:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.replace(/%([0-9]+)/g,function(g,f){return a[Number(f)-1]})};s.exports=T}),41836:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,g,f){a===void 0&&(a=0),g===void 0&&(g=" "),f===void 0&&(f=3),e=e.toString();var o=0;if(a+1>=e.length)switch(f){case 1:e=new Array(a+1-e.length).join(g)+e;break;case 3:var u=Math.ceil((o=a-e.length)/2),r=o-u;e=new Array(r+1).join(g)+e+new Array(u+1).join(g);break;default:e=e+new Array(a+1-e.length).join(g);break}return e};s.exports=T}),33628:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===0?e.slice(1):e.slice(0,a)+e.slice(a+1)};s.exports=T}),27671:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.split("").reverse().join("")};s.exports=T}),45650:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=Math.random()*16|0,g=e==="x"?a:a&3|8;return g.toString(16)})};s.exports=T}),35355:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e&&e[0].toUpperCase()+e.slice(1)};s.exports=T}),31749:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Format:e(27902),Pad:e(41836),RemoveAt:e(33628),Reverse:e(27671),UppercaseFirst:e(35355),UUID:e(45650)}})},n={};function x(s){var T=n[s];if(T!==void 0)return T.exports;var e=n[s]={exports:{}};return i[s](e,e.exports,x),e.exports}x.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var S=x(85454);return S})())})(Dv)),Dv.exports}var $F=kF();const uS=XF($F);var KF=Qt('<div class="absolute inset-0 pointer-events-none z-0 svelte-qbv4n9"></div>');function jF(d,t){ks(t,!1);let i=fe(),n,x={x:0,y:0};function S(a){if(!n||!n.scene.scenes[0])return;const g=n.scene.scenes[0];a.forEach(f=>{if(f)for(let o=0;o<3;o++){const u=g.add.circle(f.x,f.y,10,10419968,.8);g.physics.add.existing(u),g.tweens.add({targets:u,x:x.x,y:x.y,duration:1500+Math.random()*1e3,ease:"Cubic.easeOut",onComplete:()=>u.destroy()})}})}function s(a){if(!n||!n.scene.scenes[0])return;const g=n.scene.scenes[0];a.forEach(f=>{if(f)for(let o=0;o<3;o++){const u=g.add.circle(f.x,f.y,10,16726832,.8);g.physics.add.existing(u),g.tweens.add({targets:u,x:f.x+(Math.random()-.5)*100,y:window.innerHeight+100,duration:800+Math.random()*400,ease:"Power2.easeIn",onComplete:()=>u.destroy()})}})}Rd(()=>{const a=document.querySelector(".playable-balance");if(a){const u=a.getBoundingClientRect();x={x:u.left+u.width/2,y:u.top+u.height/2}}else x={x:window.innerWidth*.8,y:150};const g={type:uS.AUTO,parent:Y(i),width:"100%",height:"100%",transparent:!0,backgroundColor:"rgba(0,0,0,0)",scene:{create:f,update:o},physics:{default:"arcade",arcade:{gravity:{y:0}}}};n=new uS.Game(g);function f(){const u=this;u.input.on("pointerdown",r=>{const h=u.add.circle(r.x,r.y,2,16777215,.3);u.tweens.add({targets:h,radius:100,alpha:0,duration:1e3,ease:"Power2",onComplete:()=>h.destroy()})}),this.particles=u.add.particles(0,0,"flare",{speed:{min:-5,max:5},scale:{start:.05,end:0},alpha:{start:.15,end:0},blendMode:"ADD",frequency:-1,gravityY:0}),u.input.on("pointermove",r=>{Math.random()>.5&&this.particles.emitParticleAt(r.x,r.y)})}function o(u,r){}window.addEventListener("resize",()=>{n&&n.scale.resize(window.innerWidth,window.innerHeight)})}),P1(()=>{n&&n.destroy(!0)});var T={triggerWinAnimation:S,triggerLossAnimation:s};vr();var e=KF();return lm(e,a=>ut(i,a),()=>Y(i)),_t(d,e),Px(t,"triggerWinAnimation",S),Px(t,"triggerLossAnimation",s),$s(T)}var ZF=Qt('<button class="w-16 h-16 rounded-full bg-[#e5e7eb] border-2 border-zinc-400 shadow-[0_4px_8px_rgba(0,0,0,0.4),inset_0_2px_4px_white] flex items-center justify-center transition-transform active:scale-95"><span class="text-zinc-800 font-black text-xl"> </span></button>'),JF=Qt('<div class="text-white/40 text-[10px] uppercase tracking-widest font-bold"> </div>'),QF=Qt('<div class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[200] flex items-center justify-center p-4"><div class="bg-[#2a2a2a] rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.5),inset_0_1px_1px_rgba(255,255,255,0.1)] border border-white/10 p-8 max-w-lg w-full flex flex-col items-center gap-8"><h2 class="text-white text-xl font-medium text-center leading-tight">What odds do you want to take on a bet "Pass line odds"?</h2> <div class="flex flex-wrap items-center justify-center gap-4"><!> <button class="w-16 h-16 rounded-full bg-[#e5e7eb] border-2 border-zinc-400 shadow-[0_4px_8px_rgba(0,0,0,0.4),inset_0_2px_4px_white] flex items-center justify-center transition-transform active:scale-95"><span class="text-zinc-800 font-black text-[10px] leading-tight text-center uppercase">NO ODDS</span></button></div> <!></div></div>');function qF(d,t){ks(t,!1);const i=fe(),n=fe(),x=pl();let S=Fe(t,"passlineAmount",8,0),s=Fe(t,"point",8,null);const T={2:2,12:2,3:2,11:2,4:3,10:3,5:4,9:4,6:5,8:5};function e(c){x("select",c)}un(()=>xn(s()),()=>{ut(i,T[s()]||3)}),un(()=>Y(i),()=>{ut(n,Array.from({length:Y(i)},(c,l)=>l+1))}),Vh(),vr();var a=QF(),g=ht(a),f=xt(ht(g),2),o=ht(f);Qi(o,1,()=>Y(n),Ji,(c,l)=>{var p=ZF(),m=ht(p),v=ht(m);ai(()=>be(v,`${Y(l)??""}x`)),Ze("click",p,()=>e(Y(l))),_t(c,p)});var u=xt(o,2),r=xt(f,2);{var h=c=>{var l=JF(),p=ht(l);ai(()=>be(p,`Point: ${s()??""} | Line Bet: $${S()??""}`)),_t(c,l)};Pe(r,c=>{S()>0&&c(h)})}Ze("click",u,()=>e(0)),_t(d,a),$s()}var tD=Qt('<div><button class="flex-1 bg-[#0d3b1e] border border-white/20 rounded-t-md p-4 flex flex-col items-center justify-center hover:bg-[#1a4d2e] transition-colors group"><span> </span></button> <div class="flex border border-white/20 rounded-b-md overflow-hidden h-10"><div class="flex-1 bg-transparent border-r border-white/10"></div> <button class="flex-1 bg-[#0d3b1e] hover:bg-[#1a4d2e] transition-colors flex items-center justify-center px-2"><span class="text-[10px] font-black text-white tracking-widest uppercase">BUY</span></button></div></div>'),eD=Qt('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[200] flex items-center justify-center p-4"><div class="bg-[#2a2a2a] rounded-lg shadow-2xl border border-white/10 max-w-4xl w-full flex flex-col overflow-hidden"><div class="flex items-center justify-between px-4 py-2 border-b border-white/5"><span class="text-zinc-300 text-sm font-medium">You have chips on the new point... Where do you want to move them?</span> <button class="text-zinc-500 hover:text-white transition-colors"><!></button></div> <div class="p-2 flex gap-1 overflow-x-auto svelte-a32c0m"></div></div></div>');function iD(d,t){ks(t,!1);const i=pl();let n=Fe(t,"currentPoint",8,null),x=Fe(t,"betToMove",24,()=>({id:"",amount:0}));const S=[2,3,4,5,6,8,9,10,11,12];function s(h,c){i("move",{targetNumber:h,type:c,amount:x().amount,sourceId:x().id})}function T(){i("close")}function e(h){return h===6?"SIX":h===9?"NINE":h.toString()}vr();var a=eD(),g=ht(a),f=ht(g),o=xt(ht(f),2),u=ht(o);sg(u,{size:20});var r=xt(f,2);Qi(r,5,()=>S,Ji,(h,c)=>{const l=hn(()=>Y(c)===n());var p=tD(),m=ht(p),v=ht(m),y=ht(v),E=xt(m,2),C=xt(ht(E),2);ai(w=>{$e(p,1,`flex-1 min-w-[100px] flex flex-col gap-1 ${Y(l)?"opacity-40 grayscale pointer-events-none":""}`),$e(v,1,`text-4xl font-black text-white drop-shadow-md ${Y(c)===6||Y(c)===9?"rotate-[-15deg]":""}`),be(y,w)},[()=>(Y(c),Ht(()=>e(Y(c))))]),Ze("click",m,()=>s(Y(c),"place")),Ze("click",C,()=>s(Y(c),"buy")),_t(h,p)}),Ze("click",o,T),_t(d,a),$s()}var nD=Qt('<div class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[200] flex items-center justify-center p-4"><div class="bg-[#2a2a2a] rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.5),inset_0_1px_1px_rgba(255,255,255,0.1)] border border-white/10 p-8 max-w-md w-full flex flex-col items-center gap-8"><div class="flex flex-col items-center gap-2"><h2 class="text-white text-xl font-medium text-center leading-tight"> </h2> <p class="text-zinc-400 text-sm text-center">A 5% commission of <span class="text-emerald-400 font-bold"> </span> </p></div> <div class="flex items-center justify-center gap-6 w-full"><button class="flex-1 h-16 rounded-lg bg-emerald-500 hover:bg-emerald-400 border-2 border-emerald-600 shadow-lg flex items-center justify-center transition-all active:scale-95 group"><span class="text-white font-black text-xl uppercase tracking-widest">YES</span></button> <button class="flex-1 h-16 rounded-lg bg-red-500 hover:bg-red-400 border-2 border-red-600 shadow-lg flex items-center justify-center transition-all active:scale-95 group"><span class="text-white font-black text-xl uppercase tracking-widest">NO</span></button></div> <div class="text-white/40 text-[10px] uppercase tracking-widest font-bold text-center">COMMISSION IS DEDUCTED UPON CONFIRMATION</div></div></div>');function sD(d,t){ks(t,!1);const i=pl();let n=Fe(t,"amount",8,0),x=Fe(t,"betType",8,"Buy"),S=Fe(t,"commission",8,0);function s(){i("confirm")}function T(){i("decline")}vr();var e=nD(),a=ht(e),g=ht(a),f=ht(g),o=ht(f),u=xt(f,2),r=xt(ht(u)),h=ht(r),c=xt(r),l=xt(g,2),p=ht(l),m=xt(p,2);ai(v=>{be(o,`Confirm ${x()??""} Bet Commission`),be(h,`$${v??""}`),be(c,` is required for this $${n()??""} ${x()??""} bet.`)},[()=>(xn(S()),Ht(()=>S().toFixed(2)))]),Ze("click",p,s),Ze("click",m,T),_t(d,e),$s()}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const b1="173",rD=0,fS=1,aD=2,iM=1,oD=2,Na=3,qa=0,gs=1,_a=2,ko=0,_u=1,cS=2,dS=3,pS=4,lD=5,Hl=100,hD=101,uD=102,fD=103,cD=104,dD=200,pD=201,vD=202,mD=203,Fx=204,Dx=205,gD=206,xD=207,yD=208,TD=209,ED=210,SD=211,CD=212,AD=213,wD=214,Ox=0,Nx=1,Bx=2,df=3,Ux=4,Vx=5,zx=6,Gx=7,nM=0,MD=1,RD=2,$o=0,PD=1,bD=2,ID=3,LD=4,FD=5,DD=6,OD=7,sM=300,pf=301,vf=302,_x=303,Wx=304,rg=306,Hx=1e3,Ql=1001,Xx=1002,Fr=1003,ND=1004,Kp=1005,na=1006,Jg=1007,ql=1008,to=1009,rM=1010,aM=1011,Pd=1012,I1=1013,Ch=1014,Ha=1015,op=1016,L1=1017,F1=1018,mf=1020,oM=35902,lM=1021,hM=1022,br=1023,uM=1024,fM=1025,Wu=1026,gf=1027,cM=1028,D1=1029,dM=1030,O1=1031,N1=1033,Ov=33776,Nv=33777,Bv=33778,Uv=33779,Yx=35840,kx=35841,$x=35842,Kx=35843,jx=36196,Zx=37492,Jx=37496,Qx=37808,qx=37809,ty=37810,ey=37811,iy=37812,ny=37813,sy=37814,ry=37815,ay=37816,oy=37817,ly=37818,hy=37819,uy=37820,fy=37821,Vv=36492,cy=36494,dy=36495,pM=36283,py=36284,vy=36285,my=36286,BD=3200,UD=3201,vM=0,VD=1,Lo="",nr="srgb",xf="srgb-linear",hm="linear",Ei="srgb",ru=7680,vS=519,zD=512,GD=513,_D=514,mM=515,WD=516,HD=517,XD=518,YD=519,mS=35044,gS="300 es",Xa=2e3,um=2001;class jf{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(i)===-1&&n[t].push(i)}hasEventListener(t,i){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(i)!==-1}removeEventListener(t,i){const n=this._listeners;if(n===void 0)return;const x=n[t];if(x!==void 0){const S=x.indexOf(i);S!==-1&&x.splice(S,1)}}dispatchEvent(t){const i=this._listeners;if(i===void 0)return;const n=i[t.type];if(n!==void 0){t.target=this;const x=n.slice(0);for(let S=0,s=x.length;S<s;S++)x[S].call(this,t);t.target=null}}}const Yn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Qg=Math.PI/180,gy=180/Math.PI;function lp(){const d=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Yn[d&255]+Yn[d>>8&255]+Yn[d>>16&255]+Yn[d>>24&255]+"-"+Yn[t&255]+Yn[t>>8&255]+"-"+Yn[t>>16&15|64]+Yn[t>>24&255]+"-"+Yn[i&63|128]+Yn[i>>8&255]+"-"+Yn[i>>16&255]+Yn[i>>24&255]+Yn[n&255]+Yn[n>>8&255]+Yn[n>>16&255]+Yn[n>>24&255]).toLowerCase()}function ei(d,t,i){return Math.max(t,Math.min(i,d))}function kD(d,t){return(d%t+t)%t}function qg(d,t,i){return(1-i)*d+i*t}function Ic(d,t){switch(t.constructor){case Float32Array:return d;case Uint32Array:return d/4294967295;case Uint16Array:return d/65535;case Uint8Array:return d/255;case Int32Array:return Math.max(d/2147483647,-1);case Int16Array:return Math.max(d/32767,-1);case Int8Array:return Math.max(d/127,-1);default:throw new Error("Invalid component type.")}}function ls(d,t){switch(t.constructor){case Float32Array:return d;case Uint32Array:return Math.round(d*4294967295);case Uint16Array:return Math.round(d*65535);case Uint8Array:return Math.round(d*255);case Int32Array:return Math.round(d*2147483647);case Int16Array:return Math.round(d*32767);case Int8Array:return Math.round(d*127);default:throw new Error("Invalid component type.")}}class ni{constructor(t=0,i=0){ni.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,n=this.y,x=t.elements;return this.x=x[0]*i+x[3]*n+x[6],this.y=x[1]*i+x[4]*n+x[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=ei(this.x,t.x,i.x),this.y=ei(this.y,t.y,i.y),this}clampScalar(t,i){return this.x=ei(this.x,t,i),this.y=ei(this.y,t,i),this}clampLength(t,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ei(n,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const n=this.dot(t)/i;return Math.acos(ei(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,n=this.y-t.y;return i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const n=Math.cos(i),x=Math.sin(i),S=this.x-t.x,s=this.y-t.y;return this.x=S*n-s*x+t.x,this.y=S*x+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ve{constructor(t,i,n,x,S,s,T,e,a){Ve.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,i,n,x,S,s,T,e,a)}set(t,i,n,x,S,s,T,e,a){const g=this.elements;return g[0]=t,g[1]=x,g[2]=T,g[3]=i,g[4]=S,g[5]=e,g[6]=n,g[7]=s,g[8]=a,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,n=t.elements;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this}extractBasis(t,i,n){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const n=t.elements,x=i.elements,S=this.elements,s=n[0],T=n[3],e=n[6],a=n[1],g=n[4],f=n[7],o=n[2],u=n[5],r=n[8],h=x[0],c=x[3],l=x[6],p=x[1],m=x[4],v=x[7],y=x[2],E=x[5],C=x[8];return S[0]=s*h+T*p+e*y,S[3]=s*c+T*m+e*E,S[6]=s*l+T*v+e*C,S[1]=a*h+g*p+f*y,S[4]=a*c+g*m+f*E,S[7]=a*l+g*v+f*C,S[2]=o*h+u*p+r*y,S[5]=o*c+u*m+r*E,S[8]=o*l+u*v+r*C,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],n=t[1],x=t[2],S=t[3],s=t[4],T=t[5],e=t[6],a=t[7],g=t[8];return i*s*g-i*T*a-n*S*g+n*T*e+x*S*a-x*s*e}invert(){const t=this.elements,i=t[0],n=t[1],x=t[2],S=t[3],s=t[4],T=t[5],e=t[6],a=t[7],g=t[8],f=g*s-T*a,o=T*e-g*S,u=a*S-s*e,r=i*f+n*o+x*u;if(r===0)return this.set(0,0,0,0,0,0,0,0,0);const h=1/r;return t[0]=f*h,t[1]=(x*a-g*n)*h,t[2]=(T*n-x*s)*h,t[3]=o*h,t[4]=(g*i-x*e)*h,t[5]=(x*S-T*i)*h,t[6]=u*h,t[7]=(n*e-a*i)*h,t[8]=(s*i-n*S)*h,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,n,x,S,s,T){const e=Math.cos(S),a=Math.sin(S);return this.set(n*e,n*a,-n*(e*s+a*T)+s+t,-x*a,x*e,-x*(-a*s+e*T)+T+i,0,0,1),this}scale(t,i){return this.premultiply(t0.makeScale(t,i)),this}rotate(t){return this.premultiply(t0.makeRotation(-t)),this}translate(t,i){return this.premultiply(t0.makeTranslation(t,i)),this}makeTranslation(t,i){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,i,0,0,1),this}makeRotation(t){const i=Math.cos(t),n=Math.sin(t);return this.set(i,-n,0,n,i,0,0,0,1),this}makeScale(t,i){return this.set(t,0,0,0,i,0,0,0,1),this}equals(t){const i=this.elements,n=t.elements;for(let x=0;x<9;x++)if(i[x]!==n[x])return!1;return!0}fromArray(t,i=0){for(let n=0;n<9;n++)this.elements[n]=t[n+i];return this}toArray(t=[],i=0){const n=this.elements;return t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const t0=new Ve;function gM(d){for(let t=d.length-1;t>=0;--t)if(d[t]>=65535)return!0;return!1}function fm(d){return document.createElementNS("http://www.w3.org/1999/xhtml",d)}function $D(){const d=fm("canvas");return d.style.display="block",d}const xS={};function Pu(d){d in xS||(xS[d]=!0,console.warn(d))}function KD(d,t,i){return new Promise(function(n,x){function S(){switch(d.clientWaitSync(t,d.SYNC_FLUSH_COMMANDS_BIT,0)){case d.WAIT_FAILED:x();break;case d.TIMEOUT_EXPIRED:setTimeout(S,i);break;default:n()}}setTimeout(S,i)})}function jD(d){const t=d.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function ZD(d){const t=d.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const yS=new Ve().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),TS=new Ve().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function JD(){const d={enabled:!0,workingColorSpace:xf,spaces:{},convert:function(x,S,s){return this.enabled===!1||S===s||!S||!s||(this.spaces[S].transfer===Ei&&(x.r=Ja(x.r),x.g=Ja(x.g),x.b=Ja(x.b)),this.spaces[S].primaries!==this.spaces[s].primaries&&(x.applyMatrix3(this.spaces[S].toXYZ),x.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Ei&&(x.r=Hu(x.r),x.g=Hu(x.g),x.b=Hu(x.b))),x},fromWorkingColorSpace:function(x,S){return this.convert(x,this.workingColorSpace,S)},toWorkingColorSpace:function(x,S){return this.convert(x,S,this.workingColorSpace)},getPrimaries:function(x){return this.spaces[x].primaries},getTransfer:function(x){return x===Lo?hm:this.spaces[x].transfer},getLuminanceCoefficients:function(x,S=this.workingColorSpace){return x.fromArray(this.spaces[S].luminanceCoefficients)},define:function(x){Object.assign(this.spaces,x)},_getMatrix:function(x,S,s){return x.copy(this.spaces[S].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(x){return this.spaces[x].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(x=this.workingColorSpace){return this.spaces[x].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],n=[.3127,.329];return d.define({[xf]:{primaries:t,whitePoint:n,transfer:hm,toXYZ:yS,fromXYZ:TS,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:nr},outputColorSpaceConfig:{drawingBufferColorSpace:nr}},[nr]:{primaries:t,whitePoint:n,transfer:Ei,toXYZ:yS,fromXYZ:TS,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:nr}}}),d}const hi=JD();function Ja(d){return d<.04045?d*.0773993808:Math.pow(d*.9478672986+.0521327014,2.4)}function Hu(d){return d<.0031308?d*12.92:1.055*Math.pow(d,.41666)-.055}let au;class QD{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{au===void 0&&(au=fm("canvas")),au.width=t.width,au.height=t.height;const n=au.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),i=au}return i.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const i=fm("canvas");i.width=t.width,i.height=t.height;const n=i.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const x=n.getImageData(0,0,t.width,t.height),S=x.data;for(let s=0;s<S.length;s++)S[s]=Ja(S[s]/255)*255;return n.putImageData(x,0,0),i}else if(t.data){const i=t.data.slice(0);for(let n=0;n<i.length;n++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[n]=Math.floor(Ja(i[n]/255)*255):i[n]=Ja(i[n]);return{data:i,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let qD=0;class xM{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:qD++}),this.uuid=lp(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},x=this.data;if(x!==null){let S;if(Array.isArray(x)){S=[];for(let s=0,T=x.length;s<T;s++)x[s].isDataTexture?S.push(e0(x[s].image)):S.push(e0(x[s]))}else S=e0(x);n.url=S}return i||(t.images[this.uuid]=n),n}}function e0(d){return typeof HTMLImageElement<"u"&&d instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&d instanceof ImageBitmap?QD.getDataURL(d):d.data?{data:Array.from(d.data),width:d.width,height:d.height,type:d.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let t5=0;class xs extends jf{constructor(t=xs.DEFAULT_IMAGE,i=xs.DEFAULT_MAPPING,n=Ql,x=Ql,S=na,s=ql,T=br,e=to,a=xs.DEFAULT_ANISOTROPY,g=Lo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:t5++}),this.uuid=lp(),this.name="",this.source=new xM(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=n,this.wrapT=x,this.magFilter=S,this.minFilter=s,this.anisotropy=a,this.format=T,this.internalFormat=null,this.type=e,this.offset=new ni(0,0),this.repeat=new ni(1,1),this.center=new ni(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ve,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),i||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==sM)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Hx:t.x=t.x-Math.floor(t.x);break;case Ql:t.x=t.x<0?0:1;break;case Xx:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Hx:t.y=t.y-Math.floor(t.y);break;case Ql:t.y=t.y<0?0:1;break;case Xx:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}xs.DEFAULT_IMAGE=null;xs.DEFAULT_MAPPING=sM;xs.DEFAULT_ANISOTROPY=1;class Si{constructor(t=0,i=0,n=0,x=1){Si.prototype.isVector4=!0,this.x=t,this.y=i,this.z=n,this.w=x}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,n,x){return this.x=t,this.y=i,this.z=n,this.w=x,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,n=this.y,x=this.z,S=this.w,s=t.elements;return this.x=s[0]*i+s[4]*n+s[8]*x+s[12]*S,this.y=s[1]*i+s[5]*n+s[9]*x+s[13]*S,this.z=s[2]*i+s[6]*n+s[10]*x+s[14]*S,this.w=s[3]*i+s[7]*n+s[11]*x+s[15]*S,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,n,x,S;const e=t.elements,a=e[0],g=e[4],f=e[8],o=e[1],u=e[5],r=e[9],h=e[2],c=e[6],l=e[10];if(Math.abs(g-o)<.01&&Math.abs(f-h)<.01&&Math.abs(r-c)<.01){if(Math.abs(g+o)<.1&&Math.abs(f+h)<.1&&Math.abs(r+c)<.1&&Math.abs(a+u+l-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const m=(a+1)/2,v=(u+1)/2,y=(l+1)/2,E=(g+o)/4,C=(f+h)/4,w=(r+c)/4;return m>v&&m>y?m<.01?(n=0,x=.707106781,S=.707106781):(n=Math.sqrt(m),x=E/n,S=C/n):v>y?v<.01?(n=.707106781,x=0,S=.707106781):(x=Math.sqrt(v),n=E/x,S=w/x):y<.01?(n=.707106781,x=.707106781,S=0):(S=Math.sqrt(y),n=C/S,x=w/S),this.set(n,x,S,i),this}let p=Math.sqrt((c-r)*(c-r)+(f-h)*(f-h)+(o-g)*(o-g));return Math.abs(p)<.001&&(p=1),this.x=(c-r)/p,this.y=(f-h)/p,this.z=(o-g)/p,this.w=Math.acos((a+u+l-1)/2),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this.w=i[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=ei(this.x,t.x,i.x),this.y=ei(this.y,t.y,i.y),this.z=ei(this.z,t.z,i.z),this.w=ei(this.w,t.w,i.w),this}clampScalar(t,i){return this.x=ei(this.x,t,i),this.y=ei(this.y,t,i),this.z=ei(this.z,t,i),this.w=ei(this.w,t,i),this}clampLength(t,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ei(n,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this.w=t.w+(i.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class e5 extends jf{constructor(t=1,i=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=i,this.depth=1,this.scissor=new Si(0,0,t,i),this.scissorTest=!1,this.viewport=new Si(0,0,t,i);const x={width:t,height:i,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:na,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const S=new xs(x,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);S.flipY=!1,S.generateMipmaps=n.generateMipmaps,S.internalFormat=n.internalFormat,this.textures=[];const s=n.count;for(let T=0;T<s;T++)this.textures[T]=S.clone(),this.textures[T].isRenderTargetTexture=!0,this.textures[T].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,i,n=1){if(this.width!==t||this.height!==i||this.depth!==n){this.width=t,this.height=i,this.depth=n;for(let x=0,S=this.textures.length;x<S;x++)this.textures[x].image.width=t,this.textures[x].image.height=i,this.textures[x].image.depth=n;this.dispose()}this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,x=t.textures.length;n<x;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},t.texture.image);return this.texture.source=new xM(i),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ah extends e5{constructor(t=1,i=1,n={}){super(t,i,n),this.isWebGLRenderTarget=!0}}class yM extends xs{constructor(t=null,i=1,n=1,x=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:i,height:n,depth:x},this.magFilter=Fr,this.minFilter=Fr,this.wrapR=Ql,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class i5 extends xs{constructor(t=null,i=1,n=1,x=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:i,height:n,depth:x},this.magFilter=Fr,this.minFilter=Fr,this.wrapR=Ql,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let hp=class{constructor(t=0,i=0,n=0,x=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=n,this._w=x}static slerpFlat(t,i,n,x,S,s,T){let e=n[x+0],a=n[x+1],g=n[x+2],f=n[x+3];const o=S[s+0],u=S[s+1],r=S[s+2],h=S[s+3];if(T===0){t[i+0]=e,t[i+1]=a,t[i+2]=g,t[i+3]=f;return}if(T===1){t[i+0]=o,t[i+1]=u,t[i+2]=r,t[i+3]=h;return}if(f!==h||e!==o||a!==u||g!==r){let c=1-T;const l=e*o+a*u+g*r+f*h,p=l>=0?1:-1,m=1-l*l;if(m>Number.EPSILON){const y=Math.sqrt(m),E=Math.atan2(y,l*p);c=Math.sin(c*E)/y,T=Math.sin(T*E)/y}const v=T*p;if(e=e*c+o*v,a=a*c+u*v,g=g*c+r*v,f=f*c+h*v,c===1-T){const y=1/Math.sqrt(e*e+a*a+g*g+f*f);e*=y,a*=y,g*=y,f*=y}}t[i]=e,t[i+1]=a,t[i+2]=g,t[i+3]=f}static multiplyQuaternionsFlat(t,i,n,x,S,s){const T=n[x],e=n[x+1],a=n[x+2],g=n[x+3],f=S[s],o=S[s+1],u=S[s+2],r=S[s+3];return t[i]=T*r+g*f+e*u-a*o,t[i+1]=e*r+g*o+a*f-T*u,t[i+2]=a*r+g*u+T*o-e*f,t[i+3]=g*r-T*f-e*o-a*u,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,n,x){return this._x=t,this._y=i,this._z=n,this._w=x,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i=!0){const n=t._x,x=t._y,S=t._z,s=t._order,T=Math.cos,e=Math.sin,a=T(n/2),g=T(x/2),f=T(S/2),o=e(n/2),u=e(x/2),r=e(S/2);switch(s){case"XYZ":this._x=o*g*f+a*u*r,this._y=a*u*f-o*g*r,this._z=a*g*r+o*u*f,this._w=a*g*f-o*u*r;break;case"YXZ":this._x=o*g*f+a*u*r,this._y=a*u*f-o*g*r,this._z=a*g*r-o*u*f,this._w=a*g*f+o*u*r;break;case"ZXY":this._x=o*g*f-a*u*r,this._y=a*u*f+o*g*r,this._z=a*g*r+o*u*f,this._w=a*g*f-o*u*r;break;case"ZYX":this._x=o*g*f-a*u*r,this._y=a*u*f+o*g*r,this._z=a*g*r-o*u*f,this._w=a*g*f+o*u*r;break;case"YZX":this._x=o*g*f+a*u*r,this._y=a*u*f+o*g*r,this._z=a*g*r-o*u*f,this._w=a*g*f-o*u*r;break;case"XZY":this._x=o*g*f-a*u*r,this._y=a*u*f-o*g*r,this._z=a*g*r+o*u*f,this._w=a*g*f+o*u*r;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const n=i/2,x=Math.sin(n);return this._x=t.x*x,this._y=t.y*x,this._z=t.z*x,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,n=i[0],x=i[4],S=i[8],s=i[1],T=i[5],e=i[9],a=i[2],g=i[6],f=i[10],o=n+T+f;if(o>0){const u=.5/Math.sqrt(o+1);this._w=.25/u,this._x=(g-e)*u,this._y=(S-a)*u,this._z=(s-x)*u}else if(n>T&&n>f){const u=2*Math.sqrt(1+n-T-f);this._w=(g-e)/u,this._x=.25*u,this._y=(x+s)/u,this._z=(S+a)/u}else if(T>f){const u=2*Math.sqrt(1+T-n-f);this._w=(S-a)/u,this._x=(x+s)/u,this._y=.25*u,this._z=(e+g)/u}else{const u=2*Math.sqrt(1+f-n-T);this._w=(s-x)/u,this._x=(S+a)/u,this._y=(e+g)/u,this._z=.25*u}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let n=t.dot(i)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ei(this.dot(t),-1,1)))}rotateTowards(t,i){const n=this.angleTo(t);if(n===0)return this;const x=Math.min(1,i/n);return this.slerp(t,x),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const n=t._x,x=t._y,S=t._z,s=t._w,T=i._x,e=i._y,a=i._z,g=i._w;return this._x=n*g+s*T+x*a-S*e,this._y=x*g+s*e+S*T-n*a,this._z=S*g+s*a+n*e-x*T,this._w=s*g-n*T-x*e-S*a,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);const n=this._x,x=this._y,S=this._z,s=this._w;let T=s*t._w+n*t._x+x*t._y+S*t._z;if(T<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,T=-T):this.copy(t),T>=1)return this._w=s,this._x=n,this._y=x,this._z=S,this;const e=1-T*T;if(e<=Number.EPSILON){const u=1-i;return this._w=u*s+i*this._w,this._x=u*n+i*this._x,this._y=u*x+i*this._y,this._z=u*S+i*this._z,this.normalize(),this}const a=Math.sqrt(e),g=Math.atan2(a,T),f=Math.sin((1-i)*g)/a,o=Math.sin(i*g)/a;return this._w=s*f+this._w*o,this._x=n*f+this._x*o,this._y=x*f+this._y*o,this._z=S*f+this._z*o,this._onChangeCallback(),this}slerpQuaternions(t,i,n){return this.copy(t).slerp(i,n)}random(){const t=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),n=Math.random(),x=Math.sqrt(1-n),S=Math.sqrt(n);return this.set(x*Math.sin(t),x*Math.cos(t),S*Math.sin(i),S*Math.cos(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};class Ct{constructor(t=0,i=0,n=0){Ct.prototype.isVector3=!0,this.x=t,this.y=i,this.z=n}set(t,i,n){return n===void 0&&(n=this.z),this.x=t,this.y=i,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(ES.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(ES.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,n=this.y,x=this.z,S=t.elements;return this.x=S[0]*i+S[3]*n+S[6]*x,this.y=S[1]*i+S[4]*n+S[7]*x,this.z=S[2]*i+S[5]*n+S[8]*x,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,n=this.y,x=this.z,S=t.elements,s=1/(S[3]*i+S[7]*n+S[11]*x+S[15]);return this.x=(S[0]*i+S[4]*n+S[8]*x+S[12])*s,this.y=(S[1]*i+S[5]*n+S[9]*x+S[13])*s,this.z=(S[2]*i+S[6]*n+S[10]*x+S[14])*s,this}applyQuaternion(t){const i=this.x,n=this.y,x=this.z,S=t.x,s=t.y,T=t.z,e=t.w,a=2*(s*x-T*n),g=2*(T*i-S*x),f=2*(S*n-s*i);return this.x=i+e*a+s*f-T*g,this.y=n+e*g+T*a-S*f,this.z=x+e*f+S*g-s*a,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,n=this.y,x=this.z,S=t.elements;return this.x=S[0]*i+S[4]*n+S[8]*x,this.y=S[1]*i+S[5]*n+S[9]*x,this.z=S[2]*i+S[6]*n+S[10]*x,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=ei(this.x,t.x,i.x),this.y=ei(this.y,t.y,i.y),this.z=ei(this.z,t.z,i.z),this}clampScalar(t,i){return this.x=ei(this.x,t,i),this.y=ei(this.y,t,i),this.z=ei(this.z,t,i),this}clampLength(t,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ei(n,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const n=t.x,x=t.y,S=t.z,s=i.x,T=i.y,e=i.z;return this.x=x*e-S*T,this.y=S*s-n*e,this.z=n*T-x*s,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const n=t.dot(this)/i;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return i0.copy(this).projectOnVector(t),this.sub(i0)}reflect(t){return this.sub(i0.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const n=this.dot(t)/i;return Math.acos(ei(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,n=this.y-t.y,x=this.z-t.z;return i*i+n*n+x*x}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,n){const x=Math.sin(i)*t;return this.x=x*Math.sin(n),this.y=Math.cos(i)*t,this.z=x*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,n){return this.x=t*Math.sin(i),this.y=n,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),x=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=n,this.z=x,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,i=Math.random()*2-1,n=Math.sqrt(1-i*i);return this.x=n*Math.cos(t),this.y=i,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const i0=new Ct,ES=new hp;class up{constructor(t=new Ct(1/0,1/0,1/0),i=new Ct(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){this.makeEmpty();for(let i=0,n=t.length;i<n;i+=3)this.expandByPoint(yr.fromArray(t,i));return this}setFromBufferAttribute(t){this.makeEmpty();for(let i=0,n=t.count;i<n;i++)this.expandByPoint(yr.fromBufferAttribute(t,i));return this}setFromPoints(t){this.makeEmpty();for(let i=0,n=t.length;i<n;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const n=yr.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const S=n.getAttribute("position");if(i===!0&&S!==void 0&&t.isInstancedMesh!==!0)for(let s=0,T=S.count;s<T;s++)t.isMesh===!0?t.getVertexPosition(s,yr):yr.fromBufferAttribute(S,s),yr.applyMatrix4(t.matrixWorld),this.expandByPoint(yr);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),jp.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),jp.copy(n.boundingBox)),jp.applyMatrix4(t.matrixWorld),this.union(jp)}const x=t.children;for(let S=0,s=x.length;S<s;S++)this.expandByObject(x[S],i);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,yr),yr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,n;return t.normal.x>0?(i=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),i<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Lc),Zp.subVectors(this.max,Lc),ou.subVectors(t.a,Lc),lu.subVectors(t.b,Lc),hu.subVectors(t.c,Lc),To.subVectors(lu,ou),Eo.subVectors(hu,lu),Rl.subVectors(ou,hu);let i=[0,-To.z,To.y,0,-Eo.z,Eo.y,0,-Rl.z,Rl.y,To.z,0,-To.x,Eo.z,0,-Eo.x,Rl.z,0,-Rl.x,-To.y,To.x,0,-Eo.y,Eo.x,0,-Rl.y,Rl.x,0];return!n0(i,ou,lu,hu,Zp)||(i=[1,0,0,0,1,0,0,0,1],!n0(i,ou,lu,hu,Zp))?!1:(Jp.crossVectors(To,Eo),i=[Jp.x,Jp.y,Jp.z],n0(i,ou,lu,hu,Zp))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,yr).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(yr).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(wa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),wa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),wa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),wa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),wa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),wa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),wa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),wa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(wa),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const wa=[new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct],yr=new Ct,jp=new up,ou=new Ct,lu=new Ct,hu=new Ct,To=new Ct,Eo=new Ct,Rl=new Ct,Lc=new Ct,Zp=new Ct,Jp=new Ct,Pl=new Ct;function n0(d,t,i,n,x){for(let S=0,s=d.length-3;S<=s;S+=3){Pl.fromArray(d,S);const T=x.x*Math.abs(Pl.x)+x.y*Math.abs(Pl.y)+x.z*Math.abs(Pl.z),e=t.dot(Pl),a=i.dot(Pl),g=n.dot(Pl);if(Math.max(-Math.max(e,a,g),Math.min(e,a,g))>T)return!1}return!0}const n5=new up,Fc=new Ct,s0=new Ct;class B1{constructor(t=new Ct,i=-1){this.isSphere=!0,this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const n=this.center;i!==void 0?n.copy(i):n5.setFromPoints(t).getCenter(n);let x=0;for(let S=0,s=t.length;S<s;S++)x=Math.max(x,n.distanceToSquared(t[S]));return this.radius=Math.sqrt(x),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const n=this.center.distanceToSquared(t);return i.copy(t),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Fc.subVectors(t,this.center);const i=Fc.lengthSq();if(i>this.radius*this.radius){const n=Math.sqrt(i),x=(n-this.radius)*.5;this.center.addScaledVector(Fc,x/n),this.radius+=x}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(s0.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Fc.copy(t.center).add(s0)),this.expandByPoint(Fc.copy(t.center).sub(s0))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ma=new Ct,r0=new Ct,Qp=new Ct,So=new Ct,a0=new Ct,qp=new Ct,o0=new Ct;let s5=class{constructor(t=new Ct,i=new Ct(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ma)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);const n=i.dot(this.direction);return n<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=Ma.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(Ma.copy(this.origin).addScaledVector(this.direction,i),Ma.distanceToSquared(t))}distanceSqToSegment(t,i,n,x){r0.copy(t).add(i).multiplyScalar(.5),Qp.copy(i).sub(t).normalize(),So.copy(this.origin).sub(r0);const S=t.distanceTo(i)*.5,s=-this.direction.dot(Qp),T=So.dot(this.direction),e=-So.dot(Qp),a=So.lengthSq(),g=Math.abs(1-s*s);let f,o,u,r;if(g>0)if(f=s*e-T,o=s*T-e,r=S*g,f>=0)if(o>=-r)if(o<=r){const h=1/g;f*=h,o*=h,u=f*(f+s*o+2*T)+o*(s*f+o+2*e)+a}else o=S,f=Math.max(0,-(s*o+T)),u=-f*f+o*(o+2*e)+a;else o=-S,f=Math.max(0,-(s*o+T)),u=-f*f+o*(o+2*e)+a;else o<=-r?(f=Math.max(0,-(-s*S+T)),o=f>0?-S:Math.min(Math.max(-S,-e),S),u=-f*f+o*(o+2*e)+a):o<=r?(f=0,o=Math.min(Math.max(-S,-e),S),u=o*(o+2*e)+a):(f=Math.max(0,-(s*S+T)),o=f>0?S:Math.min(Math.max(-S,-e),S),u=-f*f+o*(o+2*e)+a);else o=s>0?-S:S,f=Math.max(0,-(s*o+T)),u=-f*f+o*(o+2*e)+a;return n&&n.copy(this.origin).addScaledVector(this.direction,f),x&&x.copy(r0).addScaledVector(Qp,o),u}intersectSphere(t,i){Ma.subVectors(t.center,this.origin);const n=Ma.dot(this.direction),x=Ma.dot(Ma)-n*n,S=t.radius*t.radius;if(x>S)return null;const s=Math.sqrt(S-x),T=n-s,e=n+s;return e<0?null:T<0?this.at(e,i):this.at(T,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/i;return n>=0?n:null}intersectPlane(t,i){const n=this.distanceToPlane(t);return n===null?null:this.at(n,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return i===0||t.normal.dot(this.direction)*i<0}intersectBox(t,i){let n,x,S,s,T,e;const a=1/this.direction.x,g=1/this.direction.y,f=1/this.direction.z,o=this.origin;return a>=0?(n=(t.min.x-o.x)*a,x=(t.max.x-o.x)*a):(n=(t.max.x-o.x)*a,x=(t.min.x-o.x)*a),g>=0?(S=(t.min.y-o.y)*g,s=(t.max.y-o.y)*g):(S=(t.max.y-o.y)*g,s=(t.min.y-o.y)*g),n>s||S>x||((S>n||isNaN(n))&&(n=S),(s<x||isNaN(x))&&(x=s),f>=0?(T=(t.min.z-o.z)*f,e=(t.max.z-o.z)*f):(T=(t.max.z-o.z)*f,e=(t.min.z-o.z)*f),n>e||T>x)||((T>n||n!==n)&&(n=T),(e<x||x!==x)&&(x=e),x<0)?null:this.at(n>=0?n:x,i)}intersectsBox(t){return this.intersectBox(t,Ma)!==null}intersectTriangle(t,i,n,x,S){a0.subVectors(i,t),qp.subVectors(n,t),o0.crossVectors(a0,qp);let s=this.direction.dot(o0),T;if(s>0){if(x)return null;T=1}else if(s<0)T=-1,s=-s;else return null;So.subVectors(this.origin,t);const e=T*this.direction.dot(qp.crossVectors(So,qp));if(e<0)return null;const a=T*this.direction.dot(a0.cross(So));if(a<0||e+a>s)return null;const g=-T*So.dot(o0);return g<0?null:this.at(g/s,S)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class Yi{constructor(t,i,n,x,S,s,T,e,a,g,f,o,u,r,h,c){Yi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,i,n,x,S,s,T,e,a,g,f,o,u,r,h,c)}set(t,i,n,x,S,s,T,e,a,g,f,o,u,r,h,c){const l=this.elements;return l[0]=t,l[4]=i,l[8]=n,l[12]=x,l[1]=S,l[5]=s,l[9]=T,l[13]=e,l[2]=a,l[6]=g,l[10]=f,l[14]=o,l[3]=u,l[7]=r,l[11]=h,l[15]=c,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yi().fromArray(this.elements)}copy(t){const i=this.elements,n=t.elements;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this}copyPosition(t){const i=this.elements,n=t.elements;return i[12]=n[12],i[13]=n[13],i[14]=n[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,n){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,i,n){return this.set(t.x,i.x,n.x,0,t.y,i.y,n.y,0,t.z,i.z,n.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,n=t.elements,x=1/uu.setFromMatrixColumn(t,0).length(),S=1/uu.setFromMatrixColumn(t,1).length(),s=1/uu.setFromMatrixColumn(t,2).length();return i[0]=n[0]*x,i[1]=n[1]*x,i[2]=n[2]*x,i[3]=0,i[4]=n[4]*S,i[5]=n[5]*S,i[6]=n[6]*S,i[7]=0,i[8]=n[8]*s,i[9]=n[9]*s,i[10]=n[10]*s,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){const i=this.elements,n=t.x,x=t.y,S=t.z,s=Math.cos(n),T=Math.sin(n),e=Math.cos(x),a=Math.sin(x),g=Math.cos(S),f=Math.sin(S);if(t.order==="XYZ"){const o=s*g,u=s*f,r=T*g,h=T*f;i[0]=e*g,i[4]=-e*f,i[8]=a,i[1]=u+r*a,i[5]=o-h*a,i[9]=-T*e,i[2]=h-o*a,i[6]=r+u*a,i[10]=s*e}else if(t.order==="YXZ"){const o=e*g,u=e*f,r=a*g,h=a*f;i[0]=o+h*T,i[4]=r*T-u,i[8]=s*a,i[1]=s*f,i[5]=s*g,i[9]=-T,i[2]=u*T-r,i[6]=h+o*T,i[10]=s*e}else if(t.order==="ZXY"){const o=e*g,u=e*f,r=a*g,h=a*f;i[0]=o-h*T,i[4]=-s*f,i[8]=r+u*T,i[1]=u+r*T,i[5]=s*g,i[9]=h-o*T,i[2]=-s*a,i[6]=T,i[10]=s*e}else if(t.order==="ZYX"){const o=s*g,u=s*f,r=T*g,h=T*f;i[0]=e*g,i[4]=r*a-u,i[8]=o*a+h,i[1]=e*f,i[5]=h*a+o,i[9]=u*a-r,i[2]=-a,i[6]=T*e,i[10]=s*e}else if(t.order==="YZX"){const o=s*e,u=s*a,r=T*e,h=T*a;i[0]=e*g,i[4]=h-o*f,i[8]=r*f+u,i[1]=f,i[5]=s*g,i[9]=-T*g,i[2]=-a*g,i[6]=u*f+r,i[10]=o-h*f}else if(t.order==="XZY"){const o=s*e,u=s*a,r=T*e,h=T*a;i[0]=e*g,i[4]=-f,i[8]=a*g,i[1]=o*f+h,i[5]=s*g,i[9]=u*f-r,i[2]=r*f-u,i[6]=T*g,i[10]=h*f+o}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(r5,t,a5)}lookAt(t,i,n){const x=this.elements;return ws.subVectors(t,i),ws.lengthSq()===0&&(ws.z=1),ws.normalize(),Co.crossVectors(n,ws),Co.lengthSq()===0&&(Math.abs(n.z)===1?ws.x+=1e-4:ws.z+=1e-4,ws.normalize(),Co.crossVectors(n,ws)),Co.normalize(),tv.crossVectors(ws,Co),x[0]=Co.x,x[4]=tv.x,x[8]=ws.x,x[1]=Co.y,x[5]=tv.y,x[9]=ws.y,x[2]=Co.z,x[6]=tv.z,x[10]=ws.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const n=t.elements,x=i.elements,S=this.elements,s=n[0],T=n[4],e=n[8],a=n[12],g=n[1],f=n[5],o=n[9],u=n[13],r=n[2],h=n[6],c=n[10],l=n[14],p=n[3],m=n[7],v=n[11],y=n[15],E=x[0],C=x[4],w=x[8],A=x[12],M=x[1],R=x[5],P=x[9],b=x[13],F=x[2],I=x[6],L=x[10],D=x[14],O=x[3],z=x[7],_=x[11],X=x[15];return S[0]=s*E+T*M+e*F+a*O,S[4]=s*C+T*R+e*I+a*z,S[8]=s*w+T*P+e*L+a*_,S[12]=s*A+T*b+e*D+a*X,S[1]=g*E+f*M+o*F+u*O,S[5]=g*C+f*R+o*I+u*z,S[9]=g*w+f*P+o*L+u*_,S[13]=g*A+f*b+o*D+u*X,S[2]=r*E+h*M+c*F+l*O,S[6]=r*C+h*R+c*I+l*z,S[10]=r*w+h*P+c*L+l*_,S[14]=r*A+h*b+c*D+l*X,S[3]=p*E+m*M+v*F+y*O,S[7]=p*C+m*R+v*I+y*z,S[11]=p*w+m*P+v*L+y*_,S[15]=p*A+m*b+v*D+y*X,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],n=t[4],x=t[8],S=t[12],s=t[1],T=t[5],e=t[9],a=t[13],g=t[2],f=t[6],o=t[10],u=t[14],r=t[3],h=t[7],c=t[11],l=t[15];return r*(+S*e*f-x*a*f-S*T*o+n*a*o+x*T*u-n*e*u)+h*(+i*e*u-i*a*o+S*s*o-x*s*u+x*a*g-S*e*g)+c*(+i*a*f-i*T*u-S*s*f+n*s*u+S*T*g-n*a*g)+l*(-x*T*g-i*e*f+i*T*o+x*s*f-n*s*o+n*e*g)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,n){const x=this.elements;return t.isVector3?(x[12]=t.x,x[13]=t.y,x[14]=t.z):(x[12]=t,x[13]=i,x[14]=n),this}invert(){const t=this.elements,i=t[0],n=t[1],x=t[2],S=t[3],s=t[4],T=t[5],e=t[6],a=t[7],g=t[8],f=t[9],o=t[10],u=t[11],r=t[12],h=t[13],c=t[14],l=t[15],p=f*c*a-h*o*a+h*e*u-T*c*u-f*e*l+T*o*l,m=r*o*a-g*c*a-r*e*u+s*c*u+g*e*l-s*o*l,v=g*h*a-r*f*a+r*T*u-s*h*u-g*T*l+s*f*l,y=r*f*e-g*h*e-r*T*o+s*h*o+g*T*c-s*f*c,E=i*p+n*m+x*v+S*y;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/E;return t[0]=p*C,t[1]=(h*o*S-f*c*S-h*x*u+n*c*u+f*x*l-n*o*l)*C,t[2]=(T*c*S-h*e*S+h*x*a-n*c*a-T*x*l+n*e*l)*C,t[3]=(f*e*S-T*o*S-f*x*a+n*o*a+T*x*u-n*e*u)*C,t[4]=m*C,t[5]=(g*c*S-r*o*S+r*x*u-i*c*u-g*x*l+i*o*l)*C,t[6]=(r*e*S-s*c*S-r*x*a+i*c*a+s*x*l-i*e*l)*C,t[7]=(s*o*S-g*e*S+g*x*a-i*o*a-s*x*u+i*e*u)*C,t[8]=v*C,t[9]=(r*f*S-g*h*S-r*n*u+i*h*u+g*n*l-i*f*l)*C,t[10]=(s*h*S-r*T*S+r*n*a-i*h*a-s*n*l+i*T*l)*C,t[11]=(g*T*S-s*f*S-g*n*a+i*f*a+s*n*u-i*T*u)*C,t[12]=y*C,t[13]=(g*h*x-r*f*x+r*n*o-i*h*o-g*n*c+i*f*c)*C,t[14]=(r*T*x-s*h*x-r*n*e+i*h*e+s*n*c-i*T*c)*C,t[15]=(s*f*x-g*T*x+g*n*e-i*f*e-s*n*o+i*T*o)*C,this}scale(t){const i=this.elements,n=t.x,x=t.y,S=t.z;return i[0]*=n,i[4]*=x,i[8]*=S,i[1]*=n,i[5]*=x,i[9]*=S,i[2]*=n,i[6]*=x,i[10]*=S,i[3]*=n,i[7]*=x,i[11]*=S,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],x=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,n,x))}makeTranslation(t,i,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,i,0,0,1,n,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),n=Math.sin(t);return this.set(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),n=Math.sin(t);return this.set(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const n=Math.cos(i),x=Math.sin(i),S=1-n,s=t.x,T=t.y,e=t.z,a=S*s,g=S*T;return this.set(a*s+n,a*T-x*e,a*e+x*T,0,a*T+x*e,g*T+n,g*e-x*s,0,a*e-x*T,g*e+x*s,S*e*e+n,0,0,0,0,1),this}makeScale(t,i,n){return this.set(t,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,i,n,x,S,s){return this.set(1,n,S,0,t,1,s,0,i,x,1,0,0,0,0,1),this}compose(t,i,n){const x=this.elements,S=i._x,s=i._y,T=i._z,e=i._w,a=S+S,g=s+s,f=T+T,o=S*a,u=S*g,r=S*f,h=s*g,c=s*f,l=T*f,p=e*a,m=e*g,v=e*f,y=n.x,E=n.y,C=n.z;return x[0]=(1-(h+l))*y,x[1]=(u+v)*y,x[2]=(r-m)*y,x[3]=0,x[4]=(u-v)*E,x[5]=(1-(o+l))*E,x[6]=(c+p)*E,x[7]=0,x[8]=(r+m)*C,x[9]=(c-p)*C,x[10]=(1-(o+h))*C,x[11]=0,x[12]=t.x,x[13]=t.y,x[14]=t.z,x[15]=1,this}decompose(t,i,n){const x=this.elements;let S=uu.set(x[0],x[1],x[2]).length();const s=uu.set(x[4],x[5],x[6]).length(),T=uu.set(x[8],x[9],x[10]).length();this.determinant()<0&&(S=-S),t.x=x[12],t.y=x[13],t.z=x[14],Tr.copy(this);const a=1/S,g=1/s,f=1/T;return Tr.elements[0]*=a,Tr.elements[1]*=a,Tr.elements[2]*=a,Tr.elements[4]*=g,Tr.elements[5]*=g,Tr.elements[6]*=g,Tr.elements[8]*=f,Tr.elements[9]*=f,Tr.elements[10]*=f,i.setFromRotationMatrix(Tr),n.x=S,n.y=s,n.z=T,this}makePerspective(t,i,n,x,S,s,T=Xa){const e=this.elements,a=2*S/(i-t),g=2*S/(n-x),f=(i+t)/(i-t),o=(n+x)/(n-x);let u,r;if(T===Xa)u=-(s+S)/(s-S),r=-2*s*S/(s-S);else if(T===um)u=-s/(s-S),r=-s*S/(s-S);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+T);return e[0]=a,e[4]=0,e[8]=f,e[12]=0,e[1]=0,e[5]=g,e[9]=o,e[13]=0,e[2]=0,e[6]=0,e[10]=u,e[14]=r,e[3]=0,e[7]=0,e[11]=-1,e[15]=0,this}makeOrthographic(t,i,n,x,S,s,T=Xa){const e=this.elements,a=1/(i-t),g=1/(n-x),f=1/(s-S),o=(i+t)*a,u=(n+x)*g;let r,h;if(T===Xa)r=(s+S)*f,h=-2*f;else if(T===um)r=S*f,h=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+T);return e[0]=2*a,e[4]=0,e[8]=0,e[12]=-o,e[1]=0,e[5]=2*g,e[9]=0,e[13]=-u,e[2]=0,e[6]=0,e[10]=h,e[14]=-r,e[3]=0,e[7]=0,e[11]=0,e[15]=1,this}equals(t){const i=this.elements,n=t.elements;for(let x=0;x<16;x++)if(i[x]!==n[x])return!1;return!0}fromArray(t,i=0){for(let n=0;n<16;n++)this.elements[n]=t[n+i];return this}toArray(t=[],i=0){const n=this.elements;return t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t[i+9]=n[9],t[i+10]=n[10],t[i+11]=n[11],t[i+12]=n[12],t[i+13]=n[13],t[i+14]=n[14],t[i+15]=n[15],t}}const uu=new Ct,Tr=new Yi,r5=new Ct(0,0,0),a5=new Ct(1,1,1),Co=new Ct,tv=new Ct,ws=new Ct,SS=new Yi,CS=new hp;class da{constructor(t=0,i=0,n=0,x=da.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=n,this._order=x}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,n,x=this._order){return this._x=t,this._y=i,this._z=n,this._order=x,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,n=!0){const x=t.elements,S=x[0],s=x[4],T=x[8],e=x[1],a=x[5],g=x[9],f=x[2],o=x[6],u=x[10];switch(i){case"XYZ":this._y=Math.asin(ei(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(-g,u),this._z=Math.atan2(-s,S)):(this._x=Math.atan2(o,a),this._z=0);break;case"YXZ":this._x=Math.asin(-ei(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(T,u),this._z=Math.atan2(e,a)):(this._y=Math.atan2(-f,S),this._z=0);break;case"ZXY":this._x=Math.asin(ei(o,-1,1)),Math.abs(o)<.9999999?(this._y=Math.atan2(-f,u),this._z=Math.atan2(-s,a)):(this._y=0,this._z=Math.atan2(e,S));break;case"ZYX":this._y=Math.asin(-ei(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(o,u),this._z=Math.atan2(e,S)):(this._x=0,this._z=Math.atan2(-s,a));break;case"YZX":this._z=Math.asin(ei(e,-1,1)),Math.abs(e)<.9999999?(this._x=Math.atan2(-g,a),this._y=Math.atan2(-f,S)):(this._x=0,this._y=Math.atan2(T,u));break;case"XZY":this._z=Math.asin(-ei(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(o,a),this._y=Math.atan2(T,S)):(this._x=Math.atan2(-g,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,n){return SS.makeRotationFromQuaternion(t),this.setFromRotationMatrix(SS,i,n)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return CS.setFromEuler(this),this.setFromQuaternion(CS,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}da.DEFAULT_ORDER="XYZ";class TM{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let o5=0;const AS=new Ct,fu=new hp,Ra=new Yi,ev=new Ct,Dc=new Ct,l5=new Ct,h5=new hp,wS=new Ct(1,0,0),MS=new Ct(0,1,0),RS=new Ct(0,0,1),PS={type:"added"},u5={type:"removed"},cu={type:"childadded",child:null},l0={type:"childremoved",child:null};class Jn extends jf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:o5++}),this.uuid=lp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jn.DEFAULT_UP.clone();const t=new Ct,i=new da,n=new hp,x=new Ct(1,1,1);function S(){n.setFromEuler(i,!1)}function s(){i.setFromQuaternion(n,void 0,!1)}i._onChange(S),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:x},modelViewMatrix:{value:new Yi},normalMatrix:{value:new Ve}}),this.matrix=new Yi,this.matrixWorld=new Yi,this.matrixAutoUpdate=Jn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new TM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return fu.setFromAxisAngle(t,i),this.quaternion.multiply(fu),this}rotateOnWorldAxis(t,i){return fu.setFromAxisAngle(t,i),this.quaternion.premultiply(fu),this}rotateX(t){return this.rotateOnAxis(wS,t)}rotateY(t){return this.rotateOnAxis(MS,t)}rotateZ(t){return this.rotateOnAxis(RS,t)}translateOnAxis(t,i){return AS.copy(t).applyQuaternion(this.quaternion),this.position.add(AS.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(wS,t)}translateY(t){return this.translateOnAxis(MS,t)}translateZ(t){return this.translateOnAxis(RS,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ra.copy(this.matrixWorld).invert())}lookAt(t,i,n){t.isVector3?ev.copy(t):ev.set(t,i,n);const x=this.parent;this.updateWorldMatrix(!0,!1),Dc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ra.lookAt(Dc,ev,this.up):Ra.lookAt(ev,Dc,this.up),this.quaternion.setFromRotationMatrix(Ra),x&&(Ra.extractRotation(x.matrixWorld),fu.setFromRotationMatrix(Ra),this.quaternion.premultiply(fu.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(PS),cu.child=t,this.dispatchEvent(cu),cu.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(u5),l0.child=t,this.dispatchEvent(l0),l0.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ra.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ra.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ra),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(PS),cu.child=t,this.dispatchEvent(cu),cu.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let n=0,x=this.children.length;n<x;n++){const s=this.children[n].getObjectByProperty(t,i);if(s!==void 0)return s}}getObjectsByProperty(t,i,n=[]){this[t]===i&&n.push(this);const x=this.children;for(let S=0,s=x.length;S<s;S++)x[S].getObjectsByProperty(t,i,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dc,t,l5),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dc,h5,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let n=0,x=i.length;n<x;n++)i[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const i=this.children;for(let n=0,x=i.length;n<x;n++)i[n].traverseVisible(t)}traverseAncestors(t){const i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let n=0,x=i.length;n<x;n++)i[n].updateMatrixWorld(t)}updateWorldMatrix(t,i){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){const x=this.children;for(let S=0,s=x.length;S<s;S++)x[S].updateWorldMatrix(!1,!0)}}toJSON(t){const i=t===void 0||typeof t=="string",n={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const x={};x.uuid=this.uuid,x.type=this.type,this.name!==""&&(x.name=this.name),this.castShadow===!0&&(x.castShadow=!0),this.receiveShadow===!0&&(x.receiveShadow=!0),this.visible===!1&&(x.visible=!1),this.frustumCulled===!1&&(x.frustumCulled=!1),this.renderOrder!==0&&(x.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(x.userData=this.userData),x.layers=this.layers.mask,x.matrix=this.matrix.toArray(),x.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(x.matrixAutoUpdate=!1),this.isInstancedMesh&&(x.type="InstancedMesh",x.count=this.count,x.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(x.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(x.type="BatchedMesh",x.perObjectFrustumCulled=this.perObjectFrustumCulled,x.sortObjects=this.sortObjects,x.drawRanges=this._drawRanges,x.reservedRanges=this._reservedRanges,x.visibility=this._visibility,x.active=this._active,x.bounds=this._bounds.map(T=>({boxInitialized:T.boxInitialized,boxMin:T.box.min.toArray(),boxMax:T.box.max.toArray(),sphereInitialized:T.sphereInitialized,sphereRadius:T.sphere.radius,sphereCenter:T.sphere.center.toArray()})),x.maxInstanceCount=this._maxInstanceCount,x.maxVertexCount=this._maxVertexCount,x.maxIndexCount=this._maxIndexCount,x.geometryInitialized=this._geometryInitialized,x.geometryCount=this._geometryCount,x.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(x.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(x.boundingSphere={center:x.boundingSphere.center.toArray(),radius:x.boundingSphere.radius}),this.boundingBox!==null&&(x.boundingBox={min:x.boundingBox.min.toArray(),max:x.boundingBox.max.toArray()}));function S(T,e){return T[e.uuid]===void 0&&(T[e.uuid]=e.toJSON(t)),e.uuid}if(this.isScene)this.background&&(this.background.isColor?x.background=this.background.toJSON():this.background.isTexture&&(x.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(x.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){x.geometry=S(t.geometries,this.geometry);const T=this.geometry.parameters;if(T!==void 0&&T.shapes!==void 0){const e=T.shapes;if(Array.isArray(e))for(let a=0,g=e.length;a<g;a++){const f=e[a];S(t.shapes,f)}else S(t.shapes,e)}}if(this.isSkinnedMesh&&(x.bindMode=this.bindMode,x.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(S(t.skeletons,this.skeleton),x.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const T=[];for(let e=0,a=this.material.length;e<a;e++)T.push(S(t.materials,this.material[e]));x.material=T}else x.material=S(t.materials,this.material);if(this.children.length>0){x.children=[];for(let T=0;T<this.children.length;T++)x.children.push(this.children[T].toJSON(t).object)}if(this.animations.length>0){x.animations=[];for(let T=0;T<this.animations.length;T++){const e=this.animations[T];x.animations.push(S(t.animations,e))}}if(i){const T=s(t.geometries),e=s(t.materials),a=s(t.textures),g=s(t.images),f=s(t.shapes),o=s(t.skeletons),u=s(t.animations),r=s(t.nodes);T.length>0&&(n.geometries=T),e.length>0&&(n.materials=e),a.length>0&&(n.textures=a),g.length>0&&(n.images=g),f.length>0&&(n.shapes=f),o.length>0&&(n.skeletons=o),u.length>0&&(n.animations=u),r.length>0&&(n.nodes=r)}return n.object=x,n;function s(T){const e=[];for(const a in T){const g=T[a];delete g.metadata,e.push(g)}return e}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let n=0;n<t.children.length;n++){const x=t.children[n];this.add(x.clone())}return this}}Jn.DEFAULT_UP=new Ct(0,1,0);Jn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Er=new Ct,Pa=new Ct,h0=new Ct,ba=new Ct,du=new Ct,pu=new Ct,bS=new Ct,u0=new Ct,f0=new Ct,c0=new Ct,d0=new Si,p0=new Si,v0=new Si;class Mr{constructor(t=new Ct,i=new Ct,n=new Ct){this.a=t,this.b=i,this.c=n}static getNormal(t,i,n,x){x.subVectors(n,i),Er.subVectors(t,i),x.cross(Er);const S=x.lengthSq();return S>0?x.multiplyScalar(1/Math.sqrt(S)):x.set(0,0,0)}static getBarycoord(t,i,n,x,S){Er.subVectors(x,i),Pa.subVectors(n,i),h0.subVectors(t,i);const s=Er.dot(Er),T=Er.dot(Pa),e=Er.dot(h0),a=Pa.dot(Pa),g=Pa.dot(h0),f=s*a-T*T;if(f===0)return S.set(0,0,0),null;const o=1/f,u=(a*e-T*g)*o,r=(s*g-T*e)*o;return S.set(1-u-r,r,u)}static containsPoint(t,i,n,x){return this.getBarycoord(t,i,n,x,ba)===null?!1:ba.x>=0&&ba.y>=0&&ba.x+ba.y<=1}static getInterpolation(t,i,n,x,S,s,T,e){return this.getBarycoord(t,i,n,x,ba)===null?(e.x=0,e.y=0,"z"in e&&(e.z=0),"w"in e&&(e.w=0),null):(e.setScalar(0),e.addScaledVector(S,ba.x),e.addScaledVector(s,ba.y),e.addScaledVector(T,ba.z),e)}static getInterpolatedAttribute(t,i,n,x,S,s){return d0.setScalar(0),p0.setScalar(0),v0.setScalar(0),d0.fromBufferAttribute(t,i),p0.fromBufferAttribute(t,n),v0.fromBufferAttribute(t,x),s.setScalar(0),s.addScaledVector(d0,S.x),s.addScaledVector(p0,S.y),s.addScaledVector(v0,S.z),s}static isFrontFacing(t,i,n,x){return Er.subVectors(n,i),Pa.subVectors(t,i),Er.cross(Pa).dot(x)<0}set(t,i,n){return this.a.copy(t),this.b.copy(i),this.c.copy(n),this}setFromPointsAndIndices(t,i,n,x){return this.a.copy(t[i]),this.b.copy(t[n]),this.c.copy(t[x]),this}setFromAttributeAndIndices(t,i,n,x){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,x),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Er.subVectors(this.c,this.b),Pa.subVectors(this.a,this.b),Er.cross(Pa).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Mr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return Mr.getBarycoord(t,this.a,this.b,this.c,i)}getInterpolation(t,i,n,x,S){return Mr.getInterpolation(t,this.a,this.b,this.c,i,n,x,S)}containsPoint(t){return Mr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Mr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){const n=this.a,x=this.b,S=this.c;let s,T;du.subVectors(x,n),pu.subVectors(S,n),u0.subVectors(t,n);const e=du.dot(u0),a=pu.dot(u0);if(e<=0&&a<=0)return i.copy(n);f0.subVectors(t,x);const g=du.dot(f0),f=pu.dot(f0);if(g>=0&&f<=g)return i.copy(x);const o=e*f-g*a;if(o<=0&&e>=0&&g<=0)return s=e/(e-g),i.copy(n).addScaledVector(du,s);c0.subVectors(t,S);const u=du.dot(c0),r=pu.dot(c0);if(r>=0&&u<=r)return i.copy(S);const h=u*a-e*r;if(h<=0&&a>=0&&r<=0)return T=a/(a-r),i.copy(n).addScaledVector(pu,T);const c=g*r-u*f;if(c<=0&&f-g>=0&&u-r>=0)return bS.subVectors(S,x),T=(f-g)/(f-g+(u-r)),i.copy(x).addScaledVector(bS,T);const l=1/(c+h+o);return s=h*l,T=o*l,i.copy(n).addScaledVector(du,s).addScaledVector(pu,T)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const EM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ao={h:0,s:0,l:0},iv={h:0,s:0,l:0};function m0(d,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?d+(t-d)*6*i:i<1/2?t:i<2/3?d+(t-d)*6*(2/3-i):d}class ci{constructor(t,i,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,i,n)}set(t,i,n){if(i===void 0&&n===void 0){const x=t;x&&x.isColor?this.copy(x):typeof x=="number"?this.setHex(x):typeof x=="string"&&this.setStyle(x)}else this.setRGB(t,i,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=nr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,hi.toWorkingColorSpace(this,i),this}setRGB(t,i,n,x=hi.workingColorSpace){return this.r=t,this.g=i,this.b=n,hi.toWorkingColorSpace(this,x),this}setHSL(t,i,n,x=hi.workingColorSpace){if(t=kD(t,1),i=ei(i,0,1),n=ei(n,0,1),i===0)this.r=this.g=this.b=n;else{const S=n<=.5?n*(1+i):n+i-n*i,s=2*n-S;this.r=m0(s,S,t+1/3),this.g=m0(s,S,t),this.b=m0(s,S,t-1/3)}return hi.toWorkingColorSpace(this,x),this}setStyle(t,i=nr){function n(S){S!==void 0&&parseFloat(S)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let x;if(x=/^(\w+)\(([^\)]*)\)/.exec(t)){let S;const s=x[1],T=x[2];switch(s){case"rgb":case"rgba":if(S=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return n(S[4]),this.setRGB(Math.min(255,parseInt(S[1],10))/255,Math.min(255,parseInt(S[2],10))/255,Math.min(255,parseInt(S[3],10))/255,i);if(S=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return n(S[4]),this.setRGB(Math.min(100,parseInt(S[1],10))/100,Math.min(100,parseInt(S[2],10))/100,Math.min(100,parseInt(S[3],10))/100,i);break;case"hsl":case"hsla":if(S=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return n(S[4]),this.setHSL(parseFloat(S[1])/360,parseFloat(S[2])/100,parseFloat(S[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(x=/^\#([A-Fa-f\d]+)$/.exec(t)){const S=x[1],s=S.length;if(s===3)return this.setRGB(parseInt(S.charAt(0),16)/15,parseInt(S.charAt(1),16)/15,parseInt(S.charAt(2),16)/15,i);if(s===6)return this.setHex(parseInt(S,16),i);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,i);return this}setColorName(t,i=nr){const n=EM[t.toLowerCase()];return n!==void 0?this.setHex(n,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ja(t.r),this.g=Ja(t.g),this.b=Ja(t.b),this}copyLinearToSRGB(t){return this.r=Hu(t.r),this.g=Hu(t.g),this.b=Hu(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=nr){return hi.fromWorkingColorSpace(kn.copy(this),t),Math.round(ei(kn.r*255,0,255))*65536+Math.round(ei(kn.g*255,0,255))*256+Math.round(ei(kn.b*255,0,255))}getHexString(t=nr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=hi.workingColorSpace){hi.fromWorkingColorSpace(kn.copy(this),i);const n=kn.r,x=kn.g,S=kn.b,s=Math.max(n,x,S),T=Math.min(n,x,S);let e,a;const g=(T+s)/2;if(T===s)e=0,a=0;else{const f=s-T;switch(a=g<=.5?f/(s+T):f/(2-s-T),s){case n:e=(x-S)/f+(x<S?6:0);break;case x:e=(S-n)/f+2;break;case S:e=(n-x)/f+4;break}e/=6}return t.h=e,t.s=a,t.l=g,t}getRGB(t,i=hi.workingColorSpace){return hi.fromWorkingColorSpace(kn.copy(this),i),t.r=kn.r,t.g=kn.g,t.b=kn.b,t}getStyle(t=nr){hi.fromWorkingColorSpace(kn.copy(this),t);const i=kn.r,n=kn.g,x=kn.b;return t!==nr?`color(${t} ${i.toFixed(3)} ${n.toFixed(3)} ${x.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(n*255)},${Math.round(x*255)})`}offsetHSL(t,i,n){return this.getHSL(Ao),this.setHSL(Ao.h+t,Ao.s+i,Ao.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,n){return this.r=t.r+(i.r-t.r)*n,this.g=t.g+(i.g-t.g)*n,this.b=t.b+(i.b-t.b)*n,this}lerpHSL(t,i){this.getHSL(Ao),t.getHSL(iv);const n=qg(Ao.h,iv.h,i),x=qg(Ao.s,iv.s,i),S=qg(Ao.l,iv.l,i);return this.setHSL(n,x,S),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const i=this.r,n=this.g,x=this.b,S=t.elements;return this.r=S[0]*i+S[3]*n+S[6]*x,this.g=S[1]*i+S[4]*n+S[7]*x,this.b=S[2]*i+S[5]*n+S[8]*x,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const kn=new ci;ci.NAMES=EM;let f5=0,fp=class extends jf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:f5++}),this.uuid=lp(),this.name="",this.type="Material",this.blending=_u,this.side=qa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Fx,this.blendDst=Dx,this.blendEquation=Hl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ci(0,0,0),this.blendAlpha=0,this.depthFunc=df,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ru,this.stencilZFail=ru,this.stencilZPass=ru,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const i in t){const n=t[i];if(n===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}const x=this[i];if(x===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}x&&x.isColor?x.set(n):x&&x.isVector3&&n&&n.isVector3?x.copy(n):this[i]=n}}toJSON(t){const i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_u&&(n.blending=this.blending),this.side!==qa&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Fx&&(n.blendSrc=this.blendSrc),this.blendDst!==Dx&&(n.blendDst=this.blendDst),this.blendEquation!==Hl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==df&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==vS&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ru&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ru&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ru&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function x(S){const s=[];for(const T in S){const e=S[T];delete e.metadata,s.push(e)}return s}if(i){const S=x(t.textures),s=x(t.images);S.length>0&&(n.textures=S),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let n=null;if(i!==null){const x=i.length;n=new Array(x);for(let S=0;S!==x;++S)n[S]=i[S].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class SM extends fp{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ci(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new da,this.combine=nM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const on=new Ct,nv=new ni;let c5=0;class ha{constructor(t,i,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:c5++}),this.name="",this.array=t,this.itemSize=i,this.count=t!==void 0?t.length/i:0,this.normalized=n,this.usage=mS,this.updateRanges=[],this.gpuType=Ha,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,i,n){t*=this.itemSize,n*=i.itemSize;for(let x=0,S=this.itemSize;x<S;x++)this.array[t+x]=i.array[n+x];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let i=0,n=this.count;i<n;i++)nv.fromBufferAttribute(this,i),nv.applyMatrix3(t),this.setXY(i,nv.x,nv.y);else if(this.itemSize===3)for(let i=0,n=this.count;i<n;i++)on.fromBufferAttribute(this,i),on.applyMatrix3(t),this.setXYZ(i,on.x,on.y,on.z);return this}applyMatrix4(t){for(let i=0,n=this.count;i<n;i++)on.fromBufferAttribute(this,i),on.applyMatrix4(t),this.setXYZ(i,on.x,on.y,on.z);return this}applyNormalMatrix(t){for(let i=0,n=this.count;i<n;i++)on.fromBufferAttribute(this,i),on.applyNormalMatrix(t),this.setXYZ(i,on.x,on.y,on.z);return this}transformDirection(t){for(let i=0,n=this.count;i<n;i++)on.fromBufferAttribute(this,i),on.transformDirection(t),this.setXYZ(i,on.x,on.y,on.z);return this}set(t,i=0){return this.array.set(t,i),this}getComponent(t,i){let n=this.array[t*this.itemSize+i];return this.normalized&&(n=Ic(n,this.array)),n}setComponent(t,i,n){return this.normalized&&(n=ls(n,this.array)),this.array[t*this.itemSize+i]=n,this}getX(t){let i=this.array[t*this.itemSize];return this.normalized&&(i=Ic(i,this.array)),i}setX(t,i){return this.normalized&&(i=ls(i,this.array)),this.array[t*this.itemSize]=i,this}getY(t){let i=this.array[t*this.itemSize+1];return this.normalized&&(i=Ic(i,this.array)),i}setY(t,i){return this.normalized&&(i=ls(i,this.array)),this.array[t*this.itemSize+1]=i,this}getZ(t){let i=this.array[t*this.itemSize+2];return this.normalized&&(i=Ic(i,this.array)),i}setZ(t,i){return this.normalized&&(i=ls(i,this.array)),this.array[t*this.itemSize+2]=i,this}getW(t){let i=this.array[t*this.itemSize+3];return this.normalized&&(i=Ic(i,this.array)),i}setW(t,i){return this.normalized&&(i=ls(i,this.array)),this.array[t*this.itemSize+3]=i,this}setXY(t,i,n){return t*=this.itemSize,this.normalized&&(i=ls(i,this.array),n=ls(n,this.array)),this.array[t+0]=i,this.array[t+1]=n,this}setXYZ(t,i,n,x){return t*=this.itemSize,this.normalized&&(i=ls(i,this.array),n=ls(n,this.array),x=ls(x,this.array)),this.array[t+0]=i,this.array[t+1]=n,this.array[t+2]=x,this}setXYZW(t,i,n,x,S){return t*=this.itemSize,this.normalized&&(i=ls(i,this.array),n=ls(n,this.array),x=ls(x,this.array),S=ls(S,this.array)),this.array[t+0]=i,this.array[t+1]=n,this.array[t+2]=x,this.array[t+3]=S,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==mS&&(t.usage=this.usage),t}}class CM extends ha{constructor(t,i,n){super(new Uint16Array(t),i,n)}}class AM extends ha{constructor(t,i,n){super(new Uint32Array(t),i,n)}}class Vs extends ha{constructor(t,i,n){super(new Float32Array(t),i,n)}}let d5=0;const Qs=new Yi,g0=new Jn,vu=new Ct,Ms=new up,Oc=new up,Rn=new Ct;class lo extends jf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:d5++}),this.uuid=lp(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(gM(t)?AM:CM)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,i,n=0){this.groups.push({start:t,count:i,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const S=new Ve().getNormalMatrix(t);n.applyNormalMatrix(S),n.needsUpdate=!0}const x=this.attributes.tangent;return x!==void 0&&(x.transformDirection(t),x.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Qs.makeRotationFromQuaternion(t),this.applyMatrix4(Qs),this}rotateX(t){return Qs.makeRotationX(t),this.applyMatrix4(Qs),this}rotateY(t){return Qs.makeRotationY(t),this.applyMatrix4(Qs),this}rotateZ(t){return Qs.makeRotationZ(t),this.applyMatrix4(Qs),this}translate(t,i,n){return Qs.makeTranslation(t,i,n),this.applyMatrix4(Qs),this}scale(t,i,n){return Qs.makeScale(t,i,n),this.applyMatrix4(Qs),this}lookAt(t){return g0.lookAt(t),g0.updateMatrix(),this.applyMatrix4(g0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(vu).negate(),this.translate(vu.x,vu.y,vu.z),this}setFromPoints(t){const i=this.getAttribute("position");if(i===void 0){const n=[];for(let x=0,S=t.length;x<S;x++){const s=t[x];n.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Vs(n,3))}else{const n=Math.min(t.length,i.count);for(let x=0;x<n;x++){const S=t[x];i.setXYZ(x,S.x,S.y,S.z||0)}t.length>i.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),i.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new up);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ct(-1/0,-1/0,-1/0),new Ct(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i)for(let n=0,x=i.length;n<x;n++){const S=i[n];Ms.setFromBufferAttribute(S),this.morphTargetsRelative?(Rn.addVectors(this.boundingBox.min,Ms.min),this.boundingBox.expandByPoint(Rn),Rn.addVectors(this.boundingBox.max,Ms.max),this.boundingBox.expandByPoint(Rn)):(this.boundingBox.expandByPoint(Ms.min),this.boundingBox.expandByPoint(Ms.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new B1);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ct,1/0);return}if(t){const n=this.boundingSphere.center;if(Ms.setFromBufferAttribute(t),i)for(let S=0,s=i.length;S<s;S++){const T=i[S];Oc.setFromBufferAttribute(T),this.morphTargetsRelative?(Rn.addVectors(Ms.min,Oc.min),Ms.expandByPoint(Rn),Rn.addVectors(Ms.max,Oc.max),Ms.expandByPoint(Rn)):(Ms.expandByPoint(Oc.min),Ms.expandByPoint(Oc.max))}Ms.getCenter(n);let x=0;for(let S=0,s=t.count;S<s;S++)Rn.fromBufferAttribute(t,S),x=Math.max(x,n.distanceToSquared(Rn));if(i)for(let S=0,s=i.length;S<s;S++){const T=i[S],e=this.morphTargetsRelative;for(let a=0,g=T.count;a<g;a++)Rn.fromBufferAttribute(T,a),e&&(vu.fromBufferAttribute(t,a),Rn.add(vu)),x=Math.max(x,n.distanceToSquared(Rn))}this.boundingSphere.radius=Math.sqrt(x),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,i=this.attributes;if(t===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=i.position,x=i.normal,S=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ha(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),T=[],e=[];for(let w=0;w<n.count;w++)T[w]=new Ct,e[w]=new Ct;const a=new Ct,g=new Ct,f=new Ct,o=new ni,u=new ni,r=new ni,h=new Ct,c=new Ct;function l(w,A,M){a.fromBufferAttribute(n,w),g.fromBufferAttribute(n,A),f.fromBufferAttribute(n,M),o.fromBufferAttribute(S,w),u.fromBufferAttribute(S,A),r.fromBufferAttribute(S,M),g.sub(a),f.sub(a),u.sub(o),r.sub(o);const R=1/(u.x*r.y-r.x*u.y);isFinite(R)&&(h.copy(g).multiplyScalar(r.y).addScaledVector(f,-u.y).multiplyScalar(R),c.copy(f).multiplyScalar(u.x).addScaledVector(g,-r.x).multiplyScalar(R),T[w].add(h),T[A].add(h),T[M].add(h),e[w].add(c),e[A].add(c),e[M].add(c))}let p=this.groups;p.length===0&&(p=[{start:0,count:t.count}]);for(let w=0,A=p.length;w<A;++w){const M=p[w],R=M.start,P=M.count;for(let b=R,F=R+P;b<F;b+=3)l(t.getX(b+0),t.getX(b+1),t.getX(b+2))}const m=new Ct,v=new Ct,y=new Ct,E=new Ct;function C(w){y.fromBufferAttribute(x,w),E.copy(y);const A=T[w];m.copy(A),m.sub(y.multiplyScalar(y.dot(A))).normalize(),v.crossVectors(E,A);const R=v.dot(e[w])<0?-1:1;s.setXYZW(w,m.x,m.y,m.z,R)}for(let w=0,A=p.length;w<A;++w){const M=p[w],R=M.start,P=M.count;for(let b=R,F=R+P;b<F;b+=3)C(t.getX(b+0)),C(t.getX(b+1)),C(t.getX(b+2))}}computeVertexNormals(){const t=this.index,i=this.getAttribute("position");if(i!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new ha(new Float32Array(i.count*3),3),this.setAttribute("normal",n);else for(let o=0,u=n.count;o<u;o++)n.setXYZ(o,0,0,0);const x=new Ct,S=new Ct,s=new Ct,T=new Ct,e=new Ct,a=new Ct,g=new Ct,f=new Ct;if(t)for(let o=0,u=t.count;o<u;o+=3){const r=t.getX(o+0),h=t.getX(o+1),c=t.getX(o+2);x.fromBufferAttribute(i,r),S.fromBufferAttribute(i,h),s.fromBufferAttribute(i,c),g.subVectors(s,S),f.subVectors(x,S),g.cross(f),T.fromBufferAttribute(n,r),e.fromBufferAttribute(n,h),a.fromBufferAttribute(n,c),T.add(g),e.add(g),a.add(g),n.setXYZ(r,T.x,T.y,T.z),n.setXYZ(h,e.x,e.y,e.z),n.setXYZ(c,a.x,a.y,a.z)}else for(let o=0,u=i.count;o<u;o+=3)x.fromBufferAttribute(i,o+0),S.fromBufferAttribute(i,o+1),s.fromBufferAttribute(i,o+2),g.subVectors(s,S),f.subVectors(x,S),g.cross(f),n.setXYZ(o+0,g.x,g.y,g.z),n.setXYZ(o+1,g.x,g.y,g.z),n.setXYZ(o+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let i=0,n=t.count;i<n;i++)Rn.fromBufferAttribute(t,i),Rn.normalize(),t.setXYZ(i,Rn.x,Rn.y,Rn.z)}toNonIndexed(){function t(T,e){const a=T.array,g=T.itemSize,f=T.normalized,o=new a.constructor(e.length*g);let u=0,r=0;for(let h=0,c=e.length;h<c;h++){T.isInterleavedBufferAttribute?u=e[h]*T.data.stride+T.offset:u=e[h]*g;for(let l=0;l<g;l++)o[r++]=a[u++]}return new ha(o,g,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new lo,n=this.index.array,x=this.attributes;for(const T in x){const e=x[T],a=t(e,n);i.setAttribute(T,a)}const S=this.morphAttributes;for(const T in S){const e=[],a=S[T];for(let g=0,f=a.length;g<f;g++){const o=a[g],u=t(o,n);e.push(u)}i.morphAttributes[T]=e}i.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let T=0,e=s.length;T<e;T++){const a=s[T];i.addGroup(a.start,a.count,a.materialIndex)}return i}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const e=this.parameters;for(const a in e)e[a]!==void 0&&(t[a]=e[a]);return t}t.data={attributes:{}};const i=this.index;i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const n=this.attributes;for(const e in n){const a=n[e];t.data.attributes[e]=a.toJSON(t.data)}const x={};let S=!1;for(const e in this.morphAttributes){const a=this.morphAttributes[e],g=[];for(let f=0,o=a.length;f<o;f++){const u=a[f];g.push(u.toJSON(t.data))}g.length>0&&(x[e]=g,S=!0)}S&&(t.data.morphAttributes=x,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const T=this.boundingSphere;return T!==null&&(t.data.boundingSphere={center:T.center.toArray(),radius:T.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone(i));const x=t.attributes;for(const a in x){const g=x[a];this.setAttribute(a,g.clone(i))}const S=t.morphAttributes;for(const a in S){const g=[],f=S[a];for(let o=0,u=f.length;o<u;o++)g.push(f[o].clone(i));this.morphAttributes[a]=g}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let a=0,g=s.length;a<g;a++){const f=s[a];this.addGroup(f.start,f.count,f.materialIndex)}const T=t.boundingBox;T!==null&&(this.boundingBox=T.clone());const e=t.boundingSphere;return e!==null&&(this.boundingSphere=e.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const IS=new Yi,bl=new s5,sv=new B1,LS=new Ct,rv=new Ct,av=new Ct,ov=new Ct,x0=new Ct,lv=new Ct,FS=new Ct,hv=new Ct;class ps extends Jn{constructor(t=new lo,i=new SM){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,n=Object.keys(i);if(n.length>0){const x=i[n[0]];if(x!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let S=0,s=x.length;S<s;S++){const T=x[S].name||String(S);this.morphTargetInfluences.push(0),this.morphTargetDictionary[T]=S}}}}getVertexPosition(t,i){const n=this.geometry,x=n.attributes.position,S=n.morphAttributes.position,s=n.morphTargetsRelative;i.fromBufferAttribute(x,t);const T=this.morphTargetInfluences;if(S&&T){lv.set(0,0,0);for(let e=0,a=S.length;e<a;e++){const g=T[e],f=S[e];g!==0&&(x0.fromBufferAttribute(f,t),s?lv.addScaledVector(x0,g):lv.addScaledVector(x0.sub(i),g))}i.add(lv)}return i}raycast(t,i){const n=this.geometry,x=this.material,S=this.matrixWorld;x!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),sv.copy(n.boundingSphere),sv.applyMatrix4(S),bl.copy(t.ray).recast(t.near),!(sv.containsPoint(bl.origin)===!1&&(bl.intersectSphere(sv,LS)===null||bl.origin.distanceToSquared(LS)>(t.far-t.near)**2))&&(IS.copy(S).invert(),bl.copy(t.ray).applyMatrix4(IS),!(n.boundingBox!==null&&bl.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,i,bl)))}_computeIntersections(t,i,n){let x;const S=this.geometry,s=this.material,T=S.index,e=S.attributes.position,a=S.attributes.uv,g=S.attributes.uv1,f=S.attributes.normal,o=S.groups,u=S.drawRange;if(T!==null)if(Array.isArray(s))for(let r=0,h=o.length;r<h;r++){const c=o[r],l=s[c.materialIndex],p=Math.max(c.start,u.start),m=Math.min(T.count,Math.min(c.start+c.count,u.start+u.count));for(let v=p,y=m;v<y;v+=3){const E=T.getX(v),C=T.getX(v+1),w=T.getX(v+2);x=uv(this,l,t,n,a,g,f,E,C,w),x&&(x.faceIndex=Math.floor(v/3),x.face.materialIndex=c.materialIndex,i.push(x))}}else{const r=Math.max(0,u.start),h=Math.min(T.count,u.start+u.count);for(let c=r,l=h;c<l;c+=3){const p=T.getX(c),m=T.getX(c+1),v=T.getX(c+2);x=uv(this,s,t,n,a,g,f,p,m,v),x&&(x.faceIndex=Math.floor(c/3),i.push(x))}}else if(e!==void 0)if(Array.isArray(s))for(let r=0,h=o.length;r<h;r++){const c=o[r],l=s[c.materialIndex],p=Math.max(c.start,u.start),m=Math.min(e.count,Math.min(c.start+c.count,u.start+u.count));for(let v=p,y=m;v<y;v+=3){const E=v,C=v+1,w=v+2;x=uv(this,l,t,n,a,g,f,E,C,w),x&&(x.faceIndex=Math.floor(v/3),x.face.materialIndex=c.materialIndex,i.push(x))}}else{const r=Math.max(0,u.start),h=Math.min(e.count,u.start+u.count);for(let c=r,l=h;c<l;c+=3){const p=c,m=c+1,v=c+2;x=uv(this,s,t,n,a,g,f,p,m,v),x&&(x.faceIndex=Math.floor(c/3),i.push(x))}}}}function p5(d,t,i,n,x,S,s,T){let e;if(t.side===gs?e=n.intersectTriangle(s,S,x,!0,T):e=n.intersectTriangle(x,S,s,t.side===qa,T),e===null)return null;hv.copy(T),hv.applyMatrix4(d.matrixWorld);const a=i.ray.origin.distanceTo(hv);return a<i.near||a>i.far?null:{distance:a,point:hv.clone(),object:d}}function uv(d,t,i,n,x,S,s,T,e,a){d.getVertexPosition(T,rv),d.getVertexPosition(e,av),d.getVertexPosition(a,ov);const g=p5(d,t,i,n,rv,av,ov,FS);if(g){const f=new Ct;Mr.getBarycoord(FS,rv,av,ov,f),x&&(g.uv=Mr.getInterpolatedAttribute(x,T,e,a,f,new ni)),S&&(g.uv1=Mr.getInterpolatedAttribute(S,T,e,a,f,new ni)),s&&(g.normal=Mr.getInterpolatedAttribute(s,T,e,a,f,new Ct),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const o={a:T,b:e,c:a,normal:new Ct,materialIndex:0};Mr.getNormal(rv,av,ov,o.normal),g.face=o,g.barycoord=f}return g}class Zf extends lo{constructor(t=1,i=1,n=1,x=1,S=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:n,widthSegments:x,heightSegments:S,depthSegments:s};const T=this;x=Math.floor(x),S=Math.floor(S),s=Math.floor(s);const e=[],a=[],g=[],f=[];let o=0,u=0;r("z","y","x",-1,-1,n,i,t,s,S,0),r("z","y","x",1,-1,n,i,-t,s,S,1),r("x","z","y",1,1,t,n,i,x,s,2),r("x","z","y",1,-1,t,n,-i,x,s,3),r("x","y","z",1,-1,t,i,n,x,S,4),r("x","y","z",-1,-1,t,i,-n,x,S,5),this.setIndex(e),this.setAttribute("position",new Vs(a,3)),this.setAttribute("normal",new Vs(g,3)),this.setAttribute("uv",new Vs(f,2));function r(h,c,l,p,m,v,y,E,C,w,A){const M=v/C,R=y/w,P=v/2,b=y/2,F=E/2,I=C+1,L=w+1;let D=0,O=0;const z=new Ct;for(let _=0;_<L;_++){const X=_*R-b;for(let H=0;H<I;H++){const U=H*M-P;z[h]=U*p,z[c]=X*m,z[l]=F,a.push(z.x,z.y,z.z),z[h]=0,z[c]=0,z[l]=E>0?1:-1,g.push(z.x,z.y,z.z),f.push(H/C),f.push(1-_/w),D+=1}}for(let _=0;_<w;_++)for(let X=0;X<C;X++){const H=o+X+I*_,U=o+X+I*(_+1),G=o+(X+1)+I*(_+1),N=o+(X+1)+I*_;e.push(H,U,N),e.push(U,G,N),O+=6}T.addGroup(u,O,A),u+=O,o+=D}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Zf(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function yf(d){const t={};for(const i in d){t[i]={};for(const n in d[i]){const x=d[i][n];x&&(x.isColor||x.isMatrix3||x.isMatrix4||x.isVector2||x.isVector3||x.isVector4||x.isTexture||x.isQuaternion)?x.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[i][n]=null):t[i][n]=x.clone():Array.isArray(x)?t[i][n]=x.slice():t[i][n]=x}}return t}function ns(d){const t={};for(let i=0;i<d.length;i++){const n=yf(d[i]);for(const x in n)t[x]=n[x]}return t}function v5(d){const t=[];for(let i=0;i<d.length;i++)t.push(d[i].clone());return t}function wM(d){const t=d.getRenderTarget();return t===null?d.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:hi.workingColorSpace}const m5={clone:yf,merge:ns};var g5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,x5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class sl extends fp{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=g5,this.fragmentShader=x5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=yf(t.uniforms),this.uniformsGroups=v5(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(const x in this.uniforms){const s=this.uniforms[x].value;s&&s.isTexture?i.uniforms[x]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?i.uniforms[x]={type:"c",value:s.getHex()}:s&&s.isVector2?i.uniforms[x]={type:"v2",value:s.toArray()}:s&&s.isVector3?i.uniforms[x]={type:"v3",value:s.toArray()}:s&&s.isVector4?i.uniforms[x]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?i.uniforms[x]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?i.uniforms[x]={type:"m4",value:s.toArray()}:i.uniforms[x]={value:s}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;const n={};for(const x in this.extensions)this.extensions[x]===!0&&(n[x]=!0);return Object.keys(n).length>0&&(i.extensions=n),i}}class MM extends Jn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yi,this.projectionMatrix=new Yi,this.projectionMatrixInverse=new Yi,this.coordinateSystem=Xa}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const wo=new Ct,DS=new ni,OS=new ni;class Ls extends MM{constructor(t=50,i=1,n=.1,x=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=x,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const i=.5*this.getFilmHeight()/t;this.fov=gy*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Qg*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return gy*2*Math.atan(Math.tan(Qg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,i,n){wo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(wo.x,wo.y).multiplyScalar(-t/wo.z),wo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(wo.x,wo.y).multiplyScalar(-t/wo.z)}getViewSize(t,i){return this.getViewBounds(t,DS,OS),i.subVectors(OS,DS)}setViewOffset(t,i,n,x,S,s){this.aspect=t/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=n,this.view.offsetY=x,this.view.width=S,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let i=t*Math.tan(Qg*.5*this.fov)/this.zoom,n=2*i,x=this.aspect*n,S=-.5*x;const s=this.view;if(this.view!==null&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;S+=s.offsetX*x/e,i-=s.offsetY*n/a,x*=s.width/e,n*=s.height/a}const T=this.filmOffset;T!==0&&(S+=t*T/this.getFilmWidth()),this.projectionMatrix.makePerspective(S,S+x,i,i-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const mu=-90,gu=1;class y5 extends Jn{constructor(t,i,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const x=new Ls(mu,gu,t,i);x.layers=this.layers,this.add(x);const S=new Ls(mu,gu,t,i);S.layers=this.layers,this.add(S);const s=new Ls(mu,gu,t,i);s.layers=this.layers,this.add(s);const T=new Ls(mu,gu,t,i);T.layers=this.layers,this.add(T);const e=new Ls(mu,gu,t,i);e.layers=this.layers,this.add(e);const a=new Ls(mu,gu,t,i);a.layers=this.layers,this.add(a)}updateCoordinateSystem(){const t=this.coordinateSystem,i=this.children.concat(),[n,x,S,s,T,e]=i;for(const a of i)this.remove(a);if(t===Xa)n.up.set(0,1,0),n.lookAt(1,0,0),x.up.set(0,1,0),x.lookAt(-1,0,0),S.up.set(0,0,-1),S.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),T.up.set(0,1,0),T.lookAt(0,0,1),e.up.set(0,1,0),e.lookAt(0,0,-1);else if(t===um)n.up.set(0,-1,0),n.lookAt(-1,0,0),x.up.set(0,-1,0),x.lookAt(1,0,0),S.up.set(0,0,1),S.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),T.up.set(0,-1,0),T.lookAt(0,0,1),e.up.set(0,-1,0),e.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const a of i)this.add(a),a.updateMatrixWorld()}update(t,i){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:x}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[S,s,T,e,a,g]=this.children,f=t.getRenderTarget(),o=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),r=t.xr.enabled;t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,x),t.render(i,S),t.setRenderTarget(n,1,x),t.render(i,s),t.setRenderTarget(n,2,x),t.render(i,T),t.setRenderTarget(n,3,x),t.render(i,e),t.setRenderTarget(n,4,x),t.render(i,a),n.texture.generateMipmaps=h,t.setRenderTarget(n,5,x),t.render(i,g),t.setRenderTarget(f,o,u),t.xr.enabled=r,n.texture.needsPMREMUpdate=!0}}class RM extends xs{constructor(t,i,n,x,S,s,T,e,a,g){t=t!==void 0?t:[],i=i!==void 0?i:pf,super(t,i,n,x,S,s,T,e,a,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class T5 extends Ah{constructor(t=1,i={}){super(t,t,i),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},x=[n,n,n,n,n,n];this.texture=new RM(x,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:na}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},x=new Zf(5,5,5),S=new sl({name:"CubemapFromEquirect",uniforms:yf(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:gs,blending:ko});S.uniforms.tEquirect.value=i;const s=new ps(x,S),T=i.minFilter;return i.minFilter===ql&&(i.minFilter=na),new y5(1,10,this).update(t,s),i.minFilter=T,s.geometry.dispose(),s.material.dispose(),this}clear(t,i,n,x){const S=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(i,n,x);t.setRenderTarget(S)}}class Jc extends Jn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const E5={type:"move"};class y0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Jc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Jc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ct,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ct),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Jc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ct,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ct),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const i=this._hand;if(i)for(const n of t.hand.values())this._getHandJoint(i,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,i,n){let x=null,S=null,s=null;const T=this._targetRay,e=this._grip,a=this._hand;if(t&&i.session.visibilityState!=="visible-blurred"){if(a&&t.hand){s=!0;for(const h of t.hand.values()){const c=i.getJointPose(h,n),l=this._getHandJoint(a,h);c!==null&&(l.matrix.fromArray(c.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,l.jointRadius=c.radius),l.visible=c!==null}const g=a.joints["index-finger-tip"],f=a.joints["thumb-tip"],o=g.position.distanceTo(f.position),u=.02,r=.005;a.inputState.pinching&&o>u+r?(a.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!a.inputState.pinching&&o<=u-r&&(a.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else e!==null&&t.gripSpace&&(S=i.getPose(t.gripSpace,n),S!==null&&(e.matrix.fromArray(S.transform.matrix),e.matrix.decompose(e.position,e.rotation,e.scale),e.matrixWorldNeedsUpdate=!0,S.linearVelocity?(e.hasLinearVelocity=!0,e.linearVelocity.copy(S.linearVelocity)):e.hasLinearVelocity=!1,S.angularVelocity?(e.hasAngularVelocity=!0,e.angularVelocity.copy(S.angularVelocity)):e.hasAngularVelocity=!1));T!==null&&(x=i.getPose(t.targetRaySpace,n),x===null&&S!==null&&(x=S),x!==null&&(T.matrix.fromArray(x.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,x.linearVelocity?(T.hasLinearVelocity=!0,T.linearVelocity.copy(x.linearVelocity)):T.hasLinearVelocity=!1,x.angularVelocity?(T.hasAngularVelocity=!0,T.angularVelocity.copy(x.angularVelocity)):T.hasAngularVelocity=!1,this.dispatchEvent(E5)))}return T!==null&&(T.visible=x!==null),e!==null&&(e.visible=S!==null),a!==null&&(a.visible=s!==null),this}_getHandJoint(t,i){if(t.joints[i.jointName]===void 0){const n=new Jc;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[i.jointName]=n,t.add(n)}return t.joints[i.jointName]}}class S5 extends Jn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new da,this.environmentIntensity=1,this.environmentRotation=new da,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}const T0=new Ct,C5=new Ct,A5=new Ve;let Ul=class{constructor(t=new Ct(1,0,0),i=0){this.isPlane=!0,this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,n,x){return this.normal.set(t,i,n),this.constant=x,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,n){const x=T0.subVectors(n,i).cross(C5.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(x,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,i){const n=t.delta(T0),x=this.normal.dot(n);if(x===0)return this.distanceToPoint(t.start)===0?i.copy(t.start):null;const S=-(t.start.dot(this.normal)+this.constant)/x;return S<0||S>1?null:i.copy(t.start).addScaledVector(n,S)}intersectsLine(t){const i=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return i<0&&n>0||n<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const n=i||A5.getNormalMatrix(t),x=this.coplanarPoint(T0).applyMatrix4(t),S=this.normal.applyMatrix3(n).normalize();return this.constant=-x.dot(S),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Il=new B1,fv=new Ct;class U1{constructor(t=new Ul,i=new Ul,n=new Ul,x=new Ul,S=new Ul,s=new Ul){this.planes=[t,i,n,x,S,s]}set(t,i,n,x,S,s){const T=this.planes;return T[0].copy(t),T[1].copy(i),T[2].copy(n),T[3].copy(x),T[4].copy(S),T[5].copy(s),this}copy(t){const i=this.planes;for(let n=0;n<6;n++)i[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,i=Xa){const n=this.planes,x=t.elements,S=x[0],s=x[1],T=x[2],e=x[3],a=x[4],g=x[5],f=x[6],o=x[7],u=x[8],r=x[9],h=x[10],c=x[11],l=x[12],p=x[13],m=x[14],v=x[15];if(n[0].setComponents(e-S,o-a,c-u,v-l).normalize(),n[1].setComponents(e+S,o+a,c+u,v+l).normalize(),n[2].setComponents(e+s,o+g,c+r,v+p).normalize(),n[3].setComponents(e-s,o-g,c-r,v-p).normalize(),n[4].setComponents(e-T,o-f,c-h,v-m).normalize(),i===Xa)n[5].setComponents(e+T,o+f,c+h,v+m).normalize();else if(i===um)n[5].setComponents(T,f,h,m).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Il.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const i=t.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),Il.copy(i.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Il)}intersectsSprite(t){return Il.center.set(0,0,0),Il.radius=.7071067811865476,Il.applyMatrix4(t.matrixWorld),this.intersectsSphere(Il)}intersectsSphere(t){const i=this.planes,n=t.center,x=-t.radius;for(let S=0;S<6;S++)if(i[S].distanceToPoint(n)<x)return!1;return!0}intersectsBox(t){const i=this.planes;for(let n=0;n<6;n++){const x=i[n];if(fv.x=x.normal.x>0?t.max.x:t.min.x,fv.y=x.normal.y>0?t.max.y:t.min.y,fv.z=x.normal.z>0?t.max.z:t.min.z,x.distanceToPoint(fv)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let n=0;n<6;n++)if(i[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class PM extends xs{constructor(t,i,n,x,S,s,T,e,a,g=Wu){if(g!==Wu&&g!==gf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&g===Wu&&(n=Ch),n===void 0&&g===gf&&(n=mf),super(null,x,S,s,T,e,g,n,a),this.isDepthTexture=!0,this.image={width:t,height:i},this.magFilter=T!==void 0?T:Fr,this.minFilter=e!==void 0?e:Fr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const i=super.toJSON(t);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}}class cm extends lo{constructor(t=1,i=1,n=1,x=32,S=1,s=!1,T=0,e=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:i,height:n,radialSegments:x,heightSegments:S,openEnded:s,thetaStart:T,thetaLength:e};const a=this;x=Math.floor(x),S=Math.floor(S);const g=[],f=[],o=[],u=[];let r=0;const h=[],c=n/2;let l=0;p(),s===!1&&(t>0&&m(!0),i>0&&m(!1)),this.setIndex(g),this.setAttribute("position",new Vs(f,3)),this.setAttribute("normal",new Vs(o,3)),this.setAttribute("uv",new Vs(u,2));function p(){const v=new Ct,y=new Ct;let E=0;const C=(i-t)/n;for(let w=0;w<=S;w++){const A=[],M=w/S,R=M*(i-t)+t;for(let P=0;P<=x;P++){const b=P/x,F=b*e+T,I=Math.sin(F),L=Math.cos(F);y.x=R*I,y.y=-M*n+c,y.z=R*L,f.push(y.x,y.y,y.z),v.set(I,C,L).normalize(),o.push(v.x,v.y,v.z),u.push(b,1-M),A.push(r++)}h.push(A)}for(let w=0;w<x;w++)for(let A=0;A<S;A++){const M=h[A][w],R=h[A+1][w],P=h[A+1][w+1],b=h[A][w+1];(t>0||A!==0)&&(g.push(M,R,b),E+=3),(i>0||A!==S-1)&&(g.push(R,P,b),E+=3)}a.addGroup(l,E,0),l+=E}function m(v){const y=r,E=new ni,C=new Ct;let w=0;const A=v===!0?t:i,M=v===!0?1:-1;for(let P=1;P<=x;P++)f.push(0,c*M,0),o.push(0,M,0),u.push(.5,.5),r++;const R=r;for(let P=0;P<=x;P++){const F=P/x*e+T,I=Math.cos(F),L=Math.sin(F);C.x=A*L,C.y=c*M,C.z=A*I,f.push(C.x,C.y,C.z),o.push(0,M,0),E.x=I*.5+.5,E.y=L*.5*M+.5,u.push(E.x,E.y),r++}for(let P=0;P<x;P++){const b=y+P,F=R+P;v===!0?g.push(F,F+1,b):g.push(F+1,F,b),w+=3}a.addGroup(l,w,v===!0?1:2),l+=w}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cm(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class ag extends lo{constructor(t=1,i=1,n=1,x=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:n,heightSegments:x};const S=t/2,s=i/2,T=Math.floor(n),e=Math.floor(x),a=T+1,g=e+1,f=t/T,o=i/e,u=[],r=[],h=[],c=[];for(let l=0;l<g;l++){const p=l*o-s;for(let m=0;m<a;m++){const v=m*f-S;r.push(v,-p,0),h.push(0,0,1),c.push(m/T),c.push(1-l/e)}}for(let l=0;l<e;l++)for(let p=0;p<T;p++){const m=p+a*l,v=p+a*(l+1),y=p+1+a*(l+1),E=p+1+a*l;u.push(m,v,E),u.push(v,y,E)}this.setIndex(u),this.setAttribute("position",new Vs(r,3)),this.setAttribute("normal",new Vs(h,3)),this.setAttribute("uv",new Vs(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ag(t.width,t.height,t.widthSegments,t.heightSegments)}}class dm extends lo{constructor(t=1,i=32,n=16,x=0,S=Math.PI*2,s=0,T=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:i,heightSegments:n,phiStart:x,phiLength:S,thetaStart:s,thetaLength:T},i=Math.max(3,Math.floor(i)),n=Math.max(2,Math.floor(n));const e=Math.min(s+T,Math.PI);let a=0;const g=[],f=new Ct,o=new Ct,u=[],r=[],h=[],c=[];for(let l=0;l<=n;l++){const p=[],m=l/n;let v=0;l===0&&s===0?v=.5/i:l===n&&e===Math.PI&&(v=-.5/i);for(let y=0;y<=i;y++){const E=y/i;f.x=-t*Math.cos(x+E*S)*Math.sin(s+m*T),f.y=t*Math.cos(s+m*T),f.z=t*Math.sin(x+E*S)*Math.sin(s+m*T),r.push(f.x,f.y,f.z),o.copy(f).normalize(),h.push(o.x,o.y,o.z),c.push(E+v,1-m),p.push(a++)}g.push(p)}for(let l=0;l<n;l++)for(let p=0;p<i;p++){const m=g[l][p+1],v=g[l][p],y=g[l+1][p],E=g[l+1][p+1];(l!==0||s>0)&&u.push(m,v,E),(l!==n-1||e<Math.PI)&&u.push(v,y,E)}this.setIndex(u),this.setAttribute("position",new Vs(r,3)),this.setAttribute("normal",new Vs(h,3)),this.setAttribute("uv",new Vs(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new dm(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class cv extends fp{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ci(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ci(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vM,this.normalScale=new ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new da,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class w5 extends fp{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class M5 extends fp{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class V1 extends Jn{constructor(t,i=1){super(),this.isLight=!0,this.type="Light",this.color=new ci(t),this.intensity=i}dispose(){}copy(t,i){return super.copy(t,i),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(i.object.target=this.target.uuid),i}}const E0=new Yi,NS=new Ct,BS=new Ct;class bM{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ni(512,512),this.map=null,this.mapPass=null,this.matrix=new Yi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new U1,this._frameExtents=new ni(1,1),this._viewportCount=1,this._viewports=[new Si(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const i=this.camera,n=this.matrix;NS.setFromMatrixPosition(t.matrixWorld),i.position.copy(NS),BS.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(BS),i.updateMatrixWorld(),E0.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(E0),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(E0)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}const US=new Yi,Nc=new Ct,S0=new Ct;class R5 extends bM{constructor(){super(new Ls(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ni(4,2),this._viewportCount=6,this._viewports=[new Si(2,1,1,1),new Si(0,1,1,1),new Si(3,1,1,1),new Si(1,1,1,1),new Si(3,0,1,1),new Si(1,0,1,1)],this._cubeDirections=[new Ct(1,0,0),new Ct(-1,0,0),new Ct(0,0,1),new Ct(0,0,-1),new Ct(0,1,0),new Ct(0,-1,0)],this._cubeUps=[new Ct(0,1,0),new Ct(0,1,0),new Ct(0,1,0),new Ct(0,1,0),new Ct(0,0,1),new Ct(0,0,-1)]}updateMatrices(t,i=0){const n=this.camera,x=this.matrix,S=t.distance||n.far;S!==n.far&&(n.far=S,n.updateProjectionMatrix()),Nc.setFromMatrixPosition(t.matrixWorld),n.position.copy(Nc),S0.copy(n.position),S0.add(this._cubeDirections[i]),n.up.copy(this._cubeUps[i]),n.lookAt(S0),n.updateMatrixWorld(),x.makeTranslation(-Nc.x,-Nc.y,-Nc.z),US.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(US)}}class P5 extends V1{constructor(t,i,n=0,x=2){super(t,i),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=x,this.shadow=new R5}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class IM extends MM{constructor(t=-1,i=1,n=1,x=-1,S=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=n,this.bottom=x,this.near=S,this.far=s,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,i,n,x,S,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=n,this.view.offsetY=x,this.view.width=S,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,x=(this.top+this.bottom)/2;let S=n-t,s=n+t,T=x+i,e=x-i;if(this.view!==null&&this.view.enabled){const a=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;S+=a*this.view.offsetX,s=S+a*this.view.width,T-=g*this.view.offsetY,e=T-g*this.view.height}this.projectionMatrix.makeOrthographic(S,s,T,e,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}class b5 extends bM{constructor(){super(new IM(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class I5 extends V1{constructor(t,i){super(t,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.target=new Jn,this.shadow=new b5}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class L5 extends V1{constructor(t,i){super(t,i),this.isAmbientLight=!0,this.type="AmbientLight"}}class F5 extends Ls{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}function VS(d,t,i,n){const x=D5(n);switch(i){case lM:return d*t;case uM:return d*t;case fM:return d*t*2;case cM:return d*t/x.components*x.byteLength;case D1:return d*t/x.components*x.byteLength;case dM:return d*t*2/x.components*x.byteLength;case O1:return d*t*2/x.components*x.byteLength;case hM:return d*t*3/x.components*x.byteLength;case br:return d*t*4/x.components*x.byteLength;case N1:return d*t*4/x.components*x.byteLength;case Ov:case Nv:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*8;case Bv:case Uv:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*16;case kx:case Kx:return Math.max(d,16)*Math.max(t,8)/4;case Yx:case $x:return Math.max(d,8)*Math.max(t,8)/2;case jx:case Zx:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*8;case Jx:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*16;case Qx:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*16;case qx:return Math.floor((d+4)/5)*Math.floor((t+3)/4)*16;case ty:return Math.floor((d+4)/5)*Math.floor((t+4)/5)*16;case ey:return Math.floor((d+5)/6)*Math.floor((t+4)/5)*16;case iy:return Math.floor((d+5)/6)*Math.floor((t+5)/6)*16;case ny:return Math.floor((d+7)/8)*Math.floor((t+4)/5)*16;case sy:return Math.floor((d+7)/8)*Math.floor((t+5)/6)*16;case ry:return Math.floor((d+7)/8)*Math.floor((t+7)/8)*16;case ay:return Math.floor((d+9)/10)*Math.floor((t+4)/5)*16;case oy:return Math.floor((d+9)/10)*Math.floor((t+5)/6)*16;case ly:return Math.floor((d+9)/10)*Math.floor((t+7)/8)*16;case hy:return Math.floor((d+9)/10)*Math.floor((t+9)/10)*16;case uy:return Math.floor((d+11)/12)*Math.floor((t+9)/10)*16;case fy:return Math.floor((d+11)/12)*Math.floor((t+11)/12)*16;case Vv:case cy:case dy:return Math.ceil(d/4)*Math.ceil(t/4)*16;case pM:case py:return Math.ceil(d/4)*Math.ceil(t/4)*8;case vy:case my:return Math.ceil(d/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${i} format.`)}function D5(d){switch(d){case to:case rM:return{byteLength:1,components:1};case Pd:case aM:case op:return{byteLength:2,components:1};case L1:case F1:return{byteLength:2,components:4};case Ch:case I1:case Ha:return{byteLength:4,components:1};case oM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${d}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:b1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=b1);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function LM(){let d=null,t=!1,i=null,n=null;function x(S,s){i(S,s),n=d.requestAnimationFrame(x)}return{start:function(){t!==!0&&i!==null&&(n=d.requestAnimationFrame(x),t=!0)},stop:function(){d.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(S){i=S},setContext:function(S){d=S}}}function O5(d){const t=new WeakMap;function i(T,e){const a=T.array,g=T.usage,f=a.byteLength,o=d.createBuffer();d.bindBuffer(e,o),d.bufferData(e,a,g),T.onUploadCallback();let u;if(a instanceof Float32Array)u=d.FLOAT;else if(a instanceof Uint16Array)T.isFloat16BufferAttribute?u=d.HALF_FLOAT:u=d.UNSIGNED_SHORT;else if(a instanceof Int16Array)u=d.SHORT;else if(a instanceof Uint32Array)u=d.UNSIGNED_INT;else if(a instanceof Int32Array)u=d.INT;else if(a instanceof Int8Array)u=d.BYTE;else if(a instanceof Uint8Array)u=d.UNSIGNED_BYTE;else if(a instanceof Uint8ClampedArray)u=d.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);return{buffer:o,type:u,bytesPerElement:a.BYTES_PER_ELEMENT,version:T.version,size:f}}function n(T,e,a){const g=e.array,f=e.updateRanges;if(d.bindBuffer(a,T),f.length===0)d.bufferSubData(a,0,g);else{f.sort((u,r)=>u.start-r.start);let o=0;for(let u=1;u<f.length;u++){const r=f[o],h=f[u];h.start<=r.start+r.count+1?r.count=Math.max(r.count,h.start+h.count-r.start):(++o,f[o]=h)}f.length=o+1;for(let u=0,r=f.length;u<r;u++){const h=f[u];d.bufferSubData(a,h.start*g.BYTES_PER_ELEMENT,g,h.start,h.count)}e.clearUpdateRanges()}e.onUploadCallback()}function x(T){return T.isInterleavedBufferAttribute&&(T=T.data),t.get(T)}function S(T){T.isInterleavedBufferAttribute&&(T=T.data);const e=t.get(T);e&&(d.deleteBuffer(e.buffer),t.delete(T))}function s(T,e){if(T.isInterleavedBufferAttribute&&(T=T.data),T.isGLBufferAttribute){const g=t.get(T);(!g||g.version<T.version)&&t.set(T,{buffer:T.buffer,type:T.type,bytesPerElement:T.elementSize,version:T.version});return}const a=t.get(T);if(a===void 0)t.set(T,i(T,e));else if(a.version<T.version){if(a.size!==T.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(a.buffer,T,e),a.version=T.version}}return{get:x,remove:S,update:s}}var N5=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,B5=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,U5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,V5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,z5=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,G5=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_5=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,W5=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,H5=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,X5=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Y5=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,k5=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,$5=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,K5=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,j5=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Z5=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,J5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Q5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,q5=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,tO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,eO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,iO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,nO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,sO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,rO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,aO=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,oO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,lO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,hO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,uO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,fO="gl_FragColor = linearToOutputTexel( gl_FragColor );",cO=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,dO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,pO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,vO=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,mO=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,gO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,xO=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yO=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,TO=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,EO=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,SO=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,CO=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,AO=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wO=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,MO=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,RO=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,PO=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bO=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,IO=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,LO=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,FO=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,DO=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,OO=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,NO=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,BO=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,UO=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,VO=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zO=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,GO=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,_O=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,WO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,HO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,XO=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,YO=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,kO=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,$O=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,KO=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,jO=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,ZO=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,JO=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,QO=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,qO=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,tN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,iN=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,nN=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,sN=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,rN=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,aN=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,oN=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,lN=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,hN=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,uN=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,fN=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,cN=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dN=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,pN=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,vN=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,mN=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,gN=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,xN=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yN=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,TN=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,EN=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,SN=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,CN=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,AN=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,wN=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,MN=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,RN=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,PN=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,bN=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,IN=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,LN=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,FN=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,DN=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ON=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,NN=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UN=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,VN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zN=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GN=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,_N=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,WN=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,HN=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,XN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,YN=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kN=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$N=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KN=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,jN=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZN=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JN=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QN=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qN=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,e9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,i9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,n9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,r9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,h9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,u9=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,f9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,c9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,d9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ze={alphahash_fragment:N5,alphahash_pars_fragment:B5,alphamap_fragment:U5,alphamap_pars_fragment:V5,alphatest_fragment:z5,alphatest_pars_fragment:G5,aomap_fragment:_5,aomap_pars_fragment:W5,batching_pars_vertex:H5,batching_vertex:X5,begin_vertex:Y5,beginnormal_vertex:k5,bsdfs:$5,iridescence_fragment:K5,bumpmap_pars_fragment:j5,clipping_planes_fragment:Z5,clipping_planes_pars_fragment:J5,clipping_planes_pars_vertex:Q5,clipping_planes_vertex:q5,color_fragment:tO,color_pars_fragment:eO,color_pars_vertex:iO,color_vertex:nO,common:sO,cube_uv_reflection_fragment:rO,defaultnormal_vertex:aO,displacementmap_pars_vertex:oO,displacementmap_vertex:lO,emissivemap_fragment:hO,emissivemap_pars_fragment:uO,colorspace_fragment:fO,colorspace_pars_fragment:cO,envmap_fragment:dO,envmap_common_pars_fragment:pO,envmap_pars_fragment:vO,envmap_pars_vertex:mO,envmap_physical_pars_fragment:RO,envmap_vertex:gO,fog_vertex:xO,fog_pars_vertex:yO,fog_fragment:TO,fog_pars_fragment:EO,gradientmap_pars_fragment:SO,lightmap_pars_fragment:CO,lights_lambert_fragment:AO,lights_lambert_pars_fragment:wO,lights_pars_begin:MO,lights_toon_fragment:PO,lights_toon_pars_fragment:bO,lights_phong_fragment:IO,lights_phong_pars_fragment:LO,lights_physical_fragment:FO,lights_physical_pars_fragment:DO,lights_fragment_begin:OO,lights_fragment_maps:NO,lights_fragment_end:BO,logdepthbuf_fragment:UO,logdepthbuf_pars_fragment:VO,logdepthbuf_pars_vertex:zO,logdepthbuf_vertex:GO,map_fragment:_O,map_pars_fragment:WO,map_particle_fragment:HO,map_particle_pars_fragment:XO,metalnessmap_fragment:YO,metalnessmap_pars_fragment:kO,morphinstance_vertex:$O,morphcolor_vertex:KO,morphnormal_vertex:jO,morphtarget_pars_vertex:ZO,morphtarget_vertex:JO,normal_fragment_begin:QO,normal_fragment_maps:qO,normal_pars_fragment:tN,normal_pars_vertex:eN,normal_vertex:iN,normalmap_pars_fragment:nN,clearcoat_normal_fragment_begin:sN,clearcoat_normal_fragment_maps:rN,clearcoat_pars_fragment:aN,iridescence_pars_fragment:oN,opaque_fragment:lN,packing:hN,premultiplied_alpha_fragment:uN,project_vertex:fN,dithering_fragment:cN,dithering_pars_fragment:dN,roughnessmap_fragment:pN,roughnessmap_pars_fragment:vN,shadowmap_pars_fragment:mN,shadowmap_pars_vertex:gN,shadowmap_vertex:xN,shadowmask_pars_fragment:yN,skinbase_vertex:TN,skinning_pars_vertex:EN,skinning_vertex:SN,skinnormal_vertex:CN,specularmap_fragment:AN,specularmap_pars_fragment:wN,tonemapping_fragment:MN,tonemapping_pars_fragment:RN,transmission_fragment:PN,transmission_pars_fragment:bN,uv_pars_fragment:IN,uv_pars_vertex:LN,uv_vertex:FN,worldpos_vertex:DN,background_vert:ON,background_frag:NN,backgroundCube_vert:BN,backgroundCube_frag:UN,cube_vert:VN,cube_frag:zN,depth_vert:GN,depth_frag:_N,distanceRGBA_vert:WN,distanceRGBA_frag:HN,equirect_vert:XN,equirect_frag:YN,linedashed_vert:kN,linedashed_frag:$N,meshbasic_vert:KN,meshbasic_frag:jN,meshlambert_vert:ZN,meshlambert_frag:JN,meshmatcap_vert:QN,meshmatcap_frag:qN,meshnormal_vert:t9,meshnormal_frag:e9,meshphong_vert:i9,meshphong_frag:n9,meshphysical_vert:s9,meshphysical_frag:r9,meshtoon_vert:a9,meshtoon_frag:o9,points_vert:l9,points_frag:h9,shadow_vert:u9,shadow_frag:f9,sprite_vert:c9,sprite_frag:d9},oe={common:{diffuse:{value:new ci(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ve},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ve}},envmap:{envMap:{value:null},envMapRotation:{value:new Ve},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ve}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ve}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ve},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ve},normalScale:{value:new ni(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ve},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ve}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ve}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ve}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ci(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ci(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0},uvTransform:{value:new Ve}},sprite:{diffuse:{value:new ci(16777215)},opacity:{value:1},center:{value:new ni(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ve},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0}}},ta={basic:{uniforms:ns([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.fog]),vertexShader:ze.meshbasic_vert,fragmentShader:ze.meshbasic_frag},lambert:{uniforms:ns([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,oe.lights,{emissive:{value:new ci(0)}}]),vertexShader:ze.meshlambert_vert,fragmentShader:ze.meshlambert_frag},phong:{uniforms:ns([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,oe.lights,{emissive:{value:new ci(0)},specular:{value:new ci(1118481)},shininess:{value:30}}]),vertexShader:ze.meshphong_vert,fragmentShader:ze.meshphong_frag},standard:{uniforms:ns([oe.common,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.roughnessmap,oe.metalnessmap,oe.fog,oe.lights,{emissive:{value:new ci(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ze.meshphysical_vert,fragmentShader:ze.meshphysical_frag},toon:{uniforms:ns([oe.common,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.gradientmap,oe.fog,oe.lights,{emissive:{value:new ci(0)}}]),vertexShader:ze.meshtoon_vert,fragmentShader:ze.meshtoon_frag},matcap:{uniforms:ns([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,{matcap:{value:null}}]),vertexShader:ze.meshmatcap_vert,fragmentShader:ze.meshmatcap_frag},points:{uniforms:ns([oe.points,oe.fog]),vertexShader:ze.points_vert,fragmentShader:ze.points_frag},dashed:{uniforms:ns([oe.common,oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ze.linedashed_vert,fragmentShader:ze.linedashed_frag},depth:{uniforms:ns([oe.common,oe.displacementmap]),vertexShader:ze.depth_vert,fragmentShader:ze.depth_frag},normal:{uniforms:ns([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,{opacity:{value:1}}]),vertexShader:ze.meshnormal_vert,fragmentShader:ze.meshnormal_frag},sprite:{uniforms:ns([oe.sprite,oe.fog]),vertexShader:ze.sprite_vert,fragmentShader:ze.sprite_frag},background:{uniforms:{uvTransform:{value:new Ve},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ze.background_vert,fragmentShader:ze.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ve}},vertexShader:ze.backgroundCube_vert,fragmentShader:ze.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ze.cube_vert,fragmentShader:ze.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ze.equirect_vert,fragmentShader:ze.equirect_frag},distanceRGBA:{uniforms:ns([oe.common,oe.displacementmap,{referencePosition:{value:new Ct},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ze.distanceRGBA_vert,fragmentShader:ze.distanceRGBA_frag},shadow:{uniforms:ns([oe.lights,oe.fog,{color:{value:new ci(0)},opacity:{value:1}}]),vertexShader:ze.shadow_vert,fragmentShader:ze.shadow_frag}};ta.physical={uniforms:ns([ta.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ve},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ve},clearcoatNormalScale:{value:new ni(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ve},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ve},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ve},sheen:{value:0},sheenColor:{value:new ci(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ve},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ve},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ve},transmissionSamplerSize:{value:new ni},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ve},attenuationDistance:{value:0},attenuationColor:{value:new ci(0)},specularColor:{value:new ci(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ve},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ve},anisotropyVector:{value:new ni},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ve}}]),vertexShader:ze.meshphysical_vert,fragmentShader:ze.meshphysical_frag};const dv={r:0,b:0,g:0},Ll=new da,p9=new Yi;function v9(d,t,i,n,x,S,s){const T=new ci(0);let e=S===!0?0:1,a,g,f=null,o=0,u=null;function r(m){let v=m.isScene===!0?m.background:null;return v&&v.isTexture&&(v=(m.backgroundBlurriness>0?i:t).get(v)),v}function h(m){let v=!1;const y=r(m);y===null?l(T,e):y&&y.isColor&&(l(y,1),v=!0);const E=d.xr.getEnvironmentBlendMode();E==="additive"?n.buffers.color.setClear(0,0,0,1,s):E==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,s),(d.autoClear||v)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),d.clear(d.autoClearColor,d.autoClearDepth,d.autoClearStencil))}function c(m,v){const y=r(v);y&&(y.isCubeTexture||y.mapping===rg)?(g===void 0&&(g=new ps(new Zf(1,1,1),new sl({name:"BackgroundCubeMaterial",uniforms:yf(ta.backgroundCube.uniforms),vertexShader:ta.backgroundCube.vertexShader,fragmentShader:ta.backgroundCube.fragmentShader,side:gs,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(E,C,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),x.update(g)),Ll.copy(v.backgroundRotation),Ll.x*=-1,Ll.y*=-1,Ll.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(Ll.y*=-1,Ll.z*=-1),g.material.uniforms.envMap.value=y,g.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(p9.makeRotationFromEuler(Ll)),g.material.toneMapped=hi.getTransfer(y.colorSpace)!==Ei,(f!==y||o!==y.version||u!==d.toneMapping)&&(g.material.needsUpdate=!0,f=y,o=y.version,u=d.toneMapping),g.layers.enableAll(),m.unshift(g,g.geometry,g.material,0,0,null)):y&&y.isTexture&&(a===void 0&&(a=new ps(new ag(2,2),new sl({name:"BackgroundMaterial",uniforms:yf(ta.background.uniforms),vertexShader:ta.background.vertexShader,fragmentShader:ta.background.fragmentShader,side:qa,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),x.update(a)),a.material.uniforms.t2D.value=y,a.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,a.material.toneMapped=hi.getTransfer(y.colorSpace)!==Ei,y.matrixAutoUpdate===!0&&y.updateMatrix(),a.material.uniforms.uvTransform.value.copy(y.matrix),(f!==y||o!==y.version||u!==d.toneMapping)&&(a.material.needsUpdate=!0,f=y,o=y.version,u=d.toneMapping),a.layers.enableAll(),m.unshift(a,a.geometry,a.material,0,0,null))}function l(m,v){m.getRGB(dv,wM(d)),n.buffers.color.setClear(dv.r,dv.g,dv.b,v,s)}function p(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),a!==void 0&&(a.geometry.dispose(),a.material.dispose(),a=void 0)}return{getClearColor:function(){return T},setClearColor:function(m,v=1){T.set(m),e=v,l(T,e)},getClearAlpha:function(){return e},setClearAlpha:function(m){e=m,l(T,e)},render:h,addToRenderList:c,dispose:p}}function m9(d,t){const i=d.getParameter(d.MAX_VERTEX_ATTRIBS),n={},x=o(null);let S=x,s=!1;function T(M,R,P,b,F){let I=!1;const L=f(b,P,R);S!==L&&(S=L,a(S.object)),I=u(M,b,P,F),I&&r(M,b,P,F),F!==null&&t.update(F,d.ELEMENT_ARRAY_BUFFER),(I||s)&&(s=!1,v(M,R,P,b),F!==null&&d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,t.get(F).buffer))}function e(){return d.createVertexArray()}function a(M){return d.bindVertexArray(M)}function g(M){return d.deleteVertexArray(M)}function f(M,R,P){const b=P.wireframe===!0;let F=n[M.id];F===void 0&&(F={},n[M.id]=F);let I=F[R.id];I===void 0&&(I={},F[R.id]=I);let L=I[b];return L===void 0&&(L=o(e()),I[b]=L),L}function o(M){const R=[],P=[],b=[];for(let F=0;F<i;F++)R[F]=0,P[F]=0,b[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:P,attributeDivisors:b,object:M,attributes:{},index:null}}function u(M,R,P,b){const F=S.attributes,I=R.attributes;let L=0;const D=P.getAttributes();for(const O in D)if(D[O].location>=0){const _=F[O];let X=I[O];if(X===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(X=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(X=M.instanceColor)),_===void 0||_.attribute!==X||X&&_.data!==X.data)return!0;L++}return S.attributesNum!==L||S.index!==b}function r(M,R,P,b){const F={},I=R.attributes;let L=0;const D=P.getAttributes();for(const O in D)if(D[O].location>=0){let _=I[O];_===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(_=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(_=M.instanceColor));const X={};X.attribute=_,_&&_.data&&(X.data=_.data),F[O]=X,L++}S.attributes=F,S.attributesNum=L,S.index=b}function h(){const M=S.newAttributes;for(let R=0,P=M.length;R<P;R++)M[R]=0}function c(M){l(M,0)}function l(M,R){const P=S.newAttributes,b=S.enabledAttributes,F=S.attributeDivisors;P[M]=1,b[M]===0&&(d.enableVertexAttribArray(M),b[M]=1),F[M]!==R&&(d.vertexAttribDivisor(M,R),F[M]=R)}function p(){const M=S.newAttributes,R=S.enabledAttributes;for(let P=0,b=R.length;P<b;P++)R[P]!==M[P]&&(d.disableVertexAttribArray(P),R[P]=0)}function m(M,R,P,b,F,I,L){L===!0?d.vertexAttribIPointer(M,R,P,F,I):d.vertexAttribPointer(M,R,P,b,F,I)}function v(M,R,P,b){h();const F=b.attributes,I=P.getAttributes(),L=R.defaultAttributeValues;for(const D in I){const O=I[D];if(O.location>=0){let z=F[D];if(z===void 0&&(D==="instanceMatrix"&&M.instanceMatrix&&(z=M.instanceMatrix),D==="instanceColor"&&M.instanceColor&&(z=M.instanceColor)),z!==void 0){const _=z.normalized,X=z.itemSize,H=t.get(z);if(H===void 0)continue;const U=H.buffer,G=H.type,N=H.bytesPerElement,W=G===d.INT||G===d.UNSIGNED_INT||z.gpuType===I1;if(z.isInterleavedBufferAttribute){const V=z.data,$=V.stride,j=z.offset;if(V.isInstancedInterleavedBuffer){for(let k=0;k<O.locationSize;k++)l(O.location+k,V.meshPerAttribute);M.isInstancedMesh!==!0&&b._maxInstanceCount===void 0&&(b._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let k=0;k<O.locationSize;k++)c(O.location+k);d.bindBuffer(d.ARRAY_BUFFER,U);for(let k=0;k<O.locationSize;k++)m(O.location+k,X/O.locationSize,G,_,$*N,(j+X/O.locationSize*k)*N,W)}else{if(z.isInstancedBufferAttribute){for(let V=0;V<O.locationSize;V++)l(O.location+V,z.meshPerAttribute);M.isInstancedMesh!==!0&&b._maxInstanceCount===void 0&&(b._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let V=0;V<O.locationSize;V++)c(O.location+V);d.bindBuffer(d.ARRAY_BUFFER,U);for(let V=0;V<O.locationSize;V++)m(O.location+V,X/O.locationSize,G,_,X*N,X/O.locationSize*V*N,W)}}else if(L!==void 0){const _=L[D];if(_!==void 0)switch(_.length){case 2:d.vertexAttrib2fv(O.location,_);break;case 3:d.vertexAttrib3fv(O.location,_);break;case 4:d.vertexAttrib4fv(O.location,_);break;default:d.vertexAttrib1fv(O.location,_)}}}}p()}function y(){w();for(const M in n){const R=n[M];for(const P in R){const b=R[P];for(const F in b)g(b[F].object),delete b[F];delete R[P]}delete n[M]}}function E(M){if(n[M.id]===void 0)return;const R=n[M.id];for(const P in R){const b=R[P];for(const F in b)g(b[F].object),delete b[F];delete R[P]}delete n[M.id]}function C(M){for(const R in n){const P=n[R];if(P[M.id]===void 0)continue;const b=P[M.id];for(const F in b)g(b[F].object),delete b[F];delete P[M.id]}}function w(){A(),s=!0,S!==x&&(S=x,a(S.object))}function A(){x.geometry=null,x.program=null,x.wireframe=!1}return{setup:T,reset:w,resetDefaultState:A,dispose:y,releaseStatesOfGeometry:E,releaseStatesOfProgram:C,initAttributes:h,enableAttribute:c,disableUnusedAttributes:p}}function g9(d,t,i){let n;function x(a){n=a}function S(a,g){d.drawArrays(n,a,g),i.update(g,n,1)}function s(a,g,f){f!==0&&(d.drawArraysInstanced(n,a,g,f),i.update(g,n,f))}function T(a,g,f){if(f===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,a,0,g,0,f);let u=0;for(let r=0;r<f;r++)u+=g[r];i.update(u,n,1)}function e(a,g,f,o){if(f===0)return;const u=t.get("WEBGL_multi_draw");if(u===null)for(let r=0;r<a.length;r++)s(a[r],g[r],o[r]);else{u.multiDrawArraysInstancedWEBGL(n,a,0,g,0,o,0,f);let r=0;for(let h=0;h<f;h++)r+=g[h]*o[h];i.update(r,n,1)}}this.setMode=x,this.render=S,this.renderInstances=s,this.renderMultiDraw=T,this.renderMultiDrawInstances=e}function x9(d,t,i,n){let x;function S(){if(x!==void 0)return x;if(t.has("EXT_texture_filter_anisotropic")===!0){const C=t.get("EXT_texture_filter_anisotropic");x=d.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else x=0;return x}function s(C){return!(C!==br&&n.convert(C)!==d.getParameter(d.IMPLEMENTATION_COLOR_READ_FORMAT))}function T(C){const w=C===op&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(C!==to&&n.convert(C)!==d.getParameter(d.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==Ha&&!w)}function e(C){if(C==="highp"){if(d.getShaderPrecisionFormat(d.VERTEX_SHADER,d.HIGH_FLOAT).precision>0&&d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&d.getShaderPrecisionFormat(d.VERTEX_SHADER,d.MEDIUM_FLOAT).precision>0&&d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=i.precision!==void 0?i.precision:"highp";const g=e(a);g!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",g,"instead."),a=g);const f=i.logarithmicDepthBuffer===!0,o=i.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),u=d.getParameter(d.MAX_TEXTURE_IMAGE_UNITS),r=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=d.getParameter(d.MAX_TEXTURE_SIZE),c=d.getParameter(d.MAX_CUBE_MAP_TEXTURE_SIZE),l=d.getParameter(d.MAX_VERTEX_ATTRIBS),p=d.getParameter(d.MAX_VERTEX_UNIFORM_VECTORS),m=d.getParameter(d.MAX_VARYING_VECTORS),v=d.getParameter(d.MAX_FRAGMENT_UNIFORM_VECTORS),y=r>0,E=d.getParameter(d.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:S,getMaxPrecision:e,textureFormatReadable:s,textureTypeReadable:T,precision:a,logarithmicDepthBuffer:f,reverseDepthBuffer:o,maxTextures:u,maxVertexTextures:r,maxTextureSize:h,maxCubemapSize:c,maxAttributes:l,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:y,maxSamples:E}}function y9(d){const t=this;let i=null,n=0,x=!1,S=!1;const s=new Ul,T=new Ve,e={value:null,needsUpdate:!1};this.uniform=e,this.numPlanes=0,this.numIntersection=0,this.init=function(f,o){const u=f.length!==0||o||n!==0||x;return x=o,n=f.length,u},this.beginShadows=function(){S=!0,g(null)},this.endShadows=function(){S=!1},this.setGlobalState=function(f,o){i=g(f,o,0)},this.setState=function(f,o,u){const r=f.clippingPlanes,h=f.clipIntersection,c=f.clipShadows,l=d.get(f);if(!x||r===null||r.length===0||S&&!c)S?g(null):a();else{const p=S?0:n,m=p*4;let v=l.clippingState||null;e.value=v,v=g(r,o,m,u);for(let y=0;y!==m;++y)v[y]=i[y];l.clippingState=v,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=p}};function a(){e.value!==i&&(e.value=i,e.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function g(f,o,u,r){const h=f!==null?f.length:0;let c=null;if(h!==0){if(c=e.value,r!==!0||c===null){const l=u+h*4,p=o.matrixWorldInverse;T.getNormalMatrix(p),(c===null||c.length<l)&&(c=new Float32Array(l));for(let m=0,v=u;m!==h;++m,v+=4)s.copy(f[m]).applyMatrix4(p,T),s.normal.toArray(c,v),c[v+3]=s.constant}e.value=c,e.needsUpdate=!0}return t.numPlanes=h,t.numIntersection=0,c}}function T9(d){let t=new WeakMap;function i(s,T){return T===_x?s.mapping=pf:T===Wx&&(s.mapping=vf),s}function n(s){if(s&&s.isTexture){const T=s.mapping;if(T===_x||T===Wx)if(t.has(s)){const e=t.get(s).texture;return i(e,s.mapping)}else{const e=s.image;if(e&&e.height>0){const a=new T5(e.height);return a.fromEquirectangularTexture(d,s),t.set(s,a),s.addEventListener("dispose",x),i(a.texture,s.mapping)}else return null}}return s}function x(s){const T=s.target;T.removeEventListener("dispose",x);const e=t.get(T);e!==void 0&&(t.delete(T),e.dispose())}function S(){t=new WeakMap}return{get:n,dispose:S}}const Bu=4,zS=[.125,.215,.35,.446,.526,.582],Xl=20,C0=new IM,GS=new ci;let A0=null,w0=0,M0=0,R0=!1;const Vl=(1+Math.sqrt(5))/2,xu=1/Vl,_S=[new Ct(-Vl,xu,0),new Ct(Vl,xu,0),new Ct(-xu,0,Vl),new Ct(xu,0,Vl),new Ct(0,Vl,-xu),new Ct(0,Vl,xu),new Ct(-1,1,-1),new Ct(1,1,-1),new Ct(-1,1,1),new Ct(1,1,1)];class WS{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,n=.1,x=100){A0=this._renderer.getRenderTarget(),w0=this._renderer.getActiveCubeFace(),M0=this._renderer.getActiveMipmapLevel(),R0=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const S=this._allocateTargets();return S.depthBuffer=!0,this._sceneToCubeUV(t,n,x,S),i>0&&this._blur(S,0,0,i),this._applyPMREM(S),this._cleanup(S),S}fromEquirectangular(t,i=null){return this._fromTexture(t,i)}fromCubemap(t,i=null){return this._fromTexture(t,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=YS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=XS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(A0,w0,M0),this._renderer.xr.enabled=R0,t.scissorTest=!1,pv(t,0,0,t.width,t.height)}_fromTexture(t,i){t.mapping===pf||t.mapping===vf?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),A0=this._renderer.getRenderTarget(),w0=this._renderer.getActiveCubeFace(),M0=this._renderer.getActiveMipmapLevel(),R0=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=i||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,n={magFilter:na,minFilter:na,generateMipmaps:!1,type:op,format:br,colorSpace:xf,depthBuffer:!1},x=HS(t,i,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=HS(t,i,n);const{_lodMax:S}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=E9(S)),this._blurMaterial=S9(S,t,i)}return x}_compileMaterial(t){const i=new ps(this._lodPlanes[0],t);this._renderer.compile(i,C0)}_sceneToCubeUV(t,i,n,x){const T=new Ls(90,1,i,n),e=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],g=this._renderer,f=g.autoClear,o=g.toneMapping;g.getClearColor(GS),g.toneMapping=$o,g.autoClear=!1;const u=new SM({name:"PMREM.Background",side:gs,depthWrite:!1,depthTest:!1}),r=new ps(new Zf,u);let h=!1;const c=t.background;c?c.isColor&&(u.color.copy(c),t.background=null,h=!0):(u.color.copy(GS),h=!0);for(let l=0;l<6;l++){const p=l%3;p===0?(T.up.set(0,e[l],0),T.lookAt(a[l],0,0)):p===1?(T.up.set(0,0,e[l]),T.lookAt(0,a[l],0)):(T.up.set(0,e[l],0),T.lookAt(0,0,a[l]));const m=this._cubeSize;pv(x,p*m,l>2?m:0,m,m),g.setRenderTarget(x),h&&g.render(r,T),g.render(t,T)}r.geometry.dispose(),r.material.dispose(),g.toneMapping=o,g.autoClear=f,t.background=c}_textureToCubeUV(t,i){const n=this._renderer,x=t.mapping===pf||t.mapping===vf;x?(this._cubemapMaterial===null&&(this._cubemapMaterial=YS()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=XS());const S=x?this._cubemapMaterial:this._equirectMaterial,s=new ps(this._lodPlanes[0],S),T=S.uniforms;T.envMap.value=t;const e=this._cubeSize;pv(i,0,0,3*e,2*e),n.setRenderTarget(i),n.render(s,C0)}_applyPMREM(t){const i=this._renderer,n=i.autoClear;i.autoClear=!1;const x=this._lodPlanes.length;for(let S=1;S<x;S++){const s=Math.sqrt(this._sigmas[S]*this._sigmas[S]-this._sigmas[S-1]*this._sigmas[S-1]),T=_S[(x-S-1)%_S.length];this._blur(t,S-1,S,s,T)}i.autoClear=n}_blur(t,i,n,x,S){const s=this._pingPongRenderTarget;this._halfBlur(t,s,i,n,x,"latitudinal",S),this._halfBlur(s,t,n,n,x,"longitudinal",S)}_halfBlur(t,i,n,x,S,s,T){const e=this._renderer,a=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,f=new ps(this._lodPlanes[x],a),o=a.uniforms,u=this._sizeLods[n]-1,r=isFinite(S)?Math.PI/(2*u):2*Math.PI/(2*Xl-1),h=S/r,c=isFinite(S)?1+Math.floor(g*h):Xl;c>Xl&&console.warn(`sigmaRadians, ${S}, is too large and will clip, as it requested ${c} samples when the maximum is set to ${Xl}`);const l=[];let p=0;for(let C=0;C<Xl;++C){const w=C/h,A=Math.exp(-w*w/2);l.push(A),C===0?p+=A:C<c&&(p+=2*A)}for(let C=0;C<l.length;C++)l[C]=l[C]/p;o.envMap.value=t.texture,o.samples.value=c,o.weights.value=l,o.latitudinal.value=s==="latitudinal",T&&(o.poleAxis.value=T);const{_lodMax:m}=this;o.dTheta.value=r,o.mipInt.value=m-n;const v=this._sizeLods[x],y=3*v*(x>m-Bu?x-m+Bu:0),E=4*(this._cubeSize-v);pv(i,y,E,3*v,2*v),e.setRenderTarget(i),e.render(f,C0)}}function E9(d){const t=[],i=[],n=[];let x=d;const S=d-Bu+1+zS.length;for(let s=0;s<S;s++){const T=Math.pow(2,x);i.push(T);let e=1/T;s>d-Bu?e=zS[s-d+Bu-1]:s===0&&(e=0),n.push(e);const a=1/(T-2),g=-a,f=1+a,o=[g,g,f,g,f,f,g,g,f,f,g,f],u=6,r=6,h=3,c=2,l=1,p=new Float32Array(h*r*u),m=new Float32Array(c*r*u),v=new Float32Array(l*r*u);for(let E=0;E<u;E++){const C=E%3*2/3-1,w=E>2?0:-1,A=[C,w,0,C+2/3,w,0,C+2/3,w+1,0,C,w,0,C+2/3,w+1,0,C,w+1,0];p.set(A,h*r*E),m.set(o,c*r*E);const M=[E,E,E,E,E,E];v.set(M,l*r*E)}const y=new lo;y.setAttribute("position",new ha(p,h)),y.setAttribute("uv",new ha(m,c)),y.setAttribute("faceIndex",new ha(v,l)),t.push(y),x>Bu&&x--}return{lodPlanes:t,sizeLods:i,sigmas:n}}function HS(d,t,i){const n=new Ah(d,t,i);return n.texture.mapping=rg,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function pv(d,t,i,n,x){d.viewport.set(t,i,n,x),d.scissor.set(t,i,n,x)}function S9(d,t,i){const n=new Float32Array(Xl),x=new Ct(0,1,0);return new sl({name:"SphericalGaussianBlur",defines:{n:Xl,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${d}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:x}},vertexShader:z1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ko,depthTest:!1,depthWrite:!1})}function XS(){return new sl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:z1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ko,depthTest:!1,depthWrite:!1})}function YS(){return new sl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:z1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ko,depthTest:!1,depthWrite:!1})}function z1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function C9(d){let t=new WeakMap,i=null;function n(T){if(T&&T.isTexture){const e=T.mapping,a=e===_x||e===Wx,g=e===pf||e===vf;if(a||g){let f=t.get(T);const o=f!==void 0?f.texture.pmremVersion:0;if(T.isRenderTargetTexture&&T.pmremVersion!==o)return i===null&&(i=new WS(d)),f=a?i.fromEquirectangular(T,f):i.fromCubemap(T,f),f.texture.pmremVersion=T.pmremVersion,t.set(T,f),f.texture;if(f!==void 0)return f.texture;{const u=T.image;return a&&u&&u.height>0||g&&u&&x(u)?(i===null&&(i=new WS(d)),f=a?i.fromEquirectangular(T):i.fromCubemap(T),f.texture.pmremVersion=T.pmremVersion,t.set(T,f),T.addEventListener("dispose",S),f.texture):null}}}return T}function x(T){let e=0;const a=6;for(let g=0;g<a;g++)T[g]!==void 0&&e++;return e===a}function S(T){const e=T.target;e.removeEventListener("dispose",S);const a=t.get(e);a!==void 0&&(t.delete(e),a.dispose())}function s(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:n,dispose:s}}function A9(d){const t={};function i(n){if(t[n]!==void 0)return t[n];let x;switch(n){case"WEBGL_depth_texture":x=d.getExtension("WEBGL_depth_texture")||d.getExtension("MOZ_WEBGL_depth_texture")||d.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":x=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":x=d.getExtension("WEBGL_compressed_texture_s3tc")||d.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":x=d.getExtension("WEBGL_compressed_texture_pvrtc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:x=d.getExtension(n)}return t[n]=x,x}return{has:function(n){return i(n)!==null},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(n){const x=i(n);return x===null&&Pu("THREE.WebGLRenderer: "+n+" extension not supported."),x}}}function w9(d,t,i,n){const x={},S=new WeakMap;function s(f){const o=f.target;o.index!==null&&t.remove(o.index);for(const r in o.attributes)t.remove(o.attributes[r]);o.removeEventListener("dispose",s),delete x[o.id];const u=S.get(o);u&&(t.remove(u),S.delete(o)),n.releaseStatesOfGeometry(o),o.isInstancedBufferGeometry===!0&&delete o._maxInstanceCount,i.memory.geometries--}function T(f,o){return x[o.id]===!0||(o.addEventListener("dispose",s),x[o.id]=!0,i.memory.geometries++),o}function e(f){const o=f.attributes;for(const u in o)t.update(o[u],d.ARRAY_BUFFER)}function a(f){const o=[],u=f.index,r=f.attributes.position;let h=0;if(u!==null){const p=u.array;h=u.version;for(let m=0,v=p.length;m<v;m+=3){const y=p[m+0],E=p[m+1],C=p[m+2];o.push(y,E,E,C,C,y)}}else if(r!==void 0){const p=r.array;h=r.version;for(let m=0,v=p.length/3-1;m<v;m+=3){const y=m+0,E=m+1,C=m+2;o.push(y,E,E,C,C,y)}}else return;const c=new(gM(o)?AM:CM)(o,1);c.version=h;const l=S.get(f);l&&t.remove(l),S.set(f,c)}function g(f){const o=S.get(f);if(o){const u=f.index;u!==null&&o.version<u.version&&a(f)}else a(f);return S.get(f)}return{get:T,update:e,getWireframeAttribute:g}}function M9(d,t,i){let n;function x(o){n=o}let S,s;function T(o){S=o.type,s=o.bytesPerElement}function e(o,u){d.drawElements(n,u,S,o*s),i.update(u,n,1)}function a(o,u,r){r!==0&&(d.drawElementsInstanced(n,u,S,o*s,r),i.update(u,n,r))}function g(o,u,r){if(r===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,u,0,S,o,0,r);let c=0;for(let l=0;l<r;l++)c+=u[l];i.update(c,n,1)}function f(o,u,r,h){if(r===0)return;const c=t.get("WEBGL_multi_draw");if(c===null)for(let l=0;l<o.length;l++)a(o[l]/s,u[l],h[l]);else{c.multiDrawElementsInstancedWEBGL(n,u,0,S,o,0,h,0,r);let l=0;for(let p=0;p<r;p++)l+=u[p]*h[p];i.update(l,n,1)}}this.setMode=x,this.setIndex=T,this.render=e,this.renderInstances=a,this.renderMultiDraw=g,this.renderMultiDrawInstances=f}function R9(d){const t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function n(S,s,T){switch(i.calls++,s){case d.TRIANGLES:i.triangles+=T*(S/3);break;case d.LINES:i.lines+=T*(S/2);break;case d.LINE_STRIP:i.lines+=T*(S-1);break;case d.LINE_LOOP:i.lines+=T*S;break;case d.POINTS:i.points+=T*S;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function x(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:x,update:n}}function P9(d,t,i){const n=new WeakMap,x=new Si;function S(s,T,e){const a=s.morphTargetInfluences,g=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,f=g!==void 0?g.length:0;let o=n.get(T);if(o===void 0||o.count!==f){let M=function(){w.dispose(),n.delete(T),T.removeEventListener("dispose",M)};var u=M;o!==void 0&&o.texture.dispose();const r=T.morphAttributes.position!==void 0,h=T.morphAttributes.normal!==void 0,c=T.morphAttributes.color!==void 0,l=T.morphAttributes.position||[],p=T.morphAttributes.normal||[],m=T.morphAttributes.color||[];let v=0;r===!0&&(v=1),h===!0&&(v=2),c===!0&&(v=3);let y=T.attributes.position.count*v,E=1;y>t.maxTextureSize&&(E=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);const C=new Float32Array(y*E*4*f),w=new yM(C,y,E,f);w.type=Ha,w.needsUpdate=!0;const A=v*4;for(let R=0;R<f;R++){const P=l[R],b=p[R],F=m[R],I=y*E*4*R;for(let L=0;L<P.count;L++){const D=L*A;r===!0&&(x.fromBufferAttribute(P,L),C[I+D+0]=x.x,C[I+D+1]=x.y,C[I+D+2]=x.z,C[I+D+3]=0),h===!0&&(x.fromBufferAttribute(b,L),C[I+D+4]=x.x,C[I+D+5]=x.y,C[I+D+6]=x.z,C[I+D+7]=0),c===!0&&(x.fromBufferAttribute(F,L),C[I+D+8]=x.x,C[I+D+9]=x.y,C[I+D+10]=x.z,C[I+D+11]=F.itemSize===4?x.w:1)}}o={count:f,texture:w,size:new ni(y,E)},n.set(T,o),T.addEventListener("dispose",M)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)e.getUniforms().setValue(d,"morphTexture",s.morphTexture,i);else{let r=0;for(let c=0;c<a.length;c++)r+=a[c];const h=T.morphTargetsRelative?1:1-r;e.getUniforms().setValue(d,"morphTargetBaseInfluence",h),e.getUniforms().setValue(d,"morphTargetInfluences",a)}e.getUniforms().setValue(d,"morphTargetsTexture",o.texture,i),e.getUniforms().setValue(d,"morphTargetsTextureSize",o.size)}return{update:S}}function b9(d,t,i,n){let x=new WeakMap;function S(e){const a=n.render.frame,g=e.geometry,f=t.get(e,g);if(x.get(f)!==a&&(t.update(f),x.set(f,a)),e.isInstancedMesh&&(e.hasEventListener("dispose",T)===!1&&e.addEventListener("dispose",T),x.get(e)!==a&&(i.update(e.instanceMatrix,d.ARRAY_BUFFER),e.instanceColor!==null&&i.update(e.instanceColor,d.ARRAY_BUFFER),x.set(e,a))),e.isSkinnedMesh){const o=e.skeleton;x.get(o)!==a&&(o.update(),x.set(o,a))}return f}function s(){x=new WeakMap}function T(e){const a=e.target;a.removeEventListener("dispose",T),i.remove(a.instanceMatrix),a.instanceColor!==null&&i.remove(a.instanceColor)}return{update:S,dispose:s}}const FM=new xs,kS=new PM(1,1),DM=new yM,OM=new i5,NM=new RM,$S=[],KS=[],jS=new Float32Array(16),ZS=new Float32Array(9),JS=new Float32Array(4);function Jf(d,t,i){const n=d[0];if(n<=0||n>0)return d;const x=t*i;let S=$S[x];if(S===void 0&&(S=new Float32Array(x),$S[x]=S),t!==0){n.toArray(S,0);for(let s=1,T=0;s!==t;++s)T+=i,d[s].toArray(S,T)}return S}function Tn(d,t){if(d.length!==t.length)return!1;for(let i=0,n=d.length;i<n;i++)if(d[i]!==t[i])return!1;return!0}function En(d,t){for(let i=0,n=t.length;i<n;i++)d[i]=t[i]}function og(d,t){let i=KS[t];i===void 0&&(i=new Int32Array(t),KS[t]=i);for(let n=0;n!==t;++n)i[n]=d.allocateTextureUnit();return i}function I9(d,t){const i=this.cache;i[0]!==t&&(d.uniform1f(this.addr,t),i[0]=t)}function L9(d,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(d.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Tn(i,t))return;d.uniform2fv(this.addr,t),En(i,t)}}function F9(d,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(d.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(d.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Tn(i,t))return;d.uniform3fv(this.addr,t),En(i,t)}}function D9(d,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(d.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Tn(i,t))return;d.uniform4fv(this.addr,t),En(i,t)}}function O9(d,t){const i=this.cache,n=t.elements;if(n===void 0){if(Tn(i,t))return;d.uniformMatrix2fv(this.addr,!1,t),En(i,t)}else{if(Tn(i,n))return;JS.set(n),d.uniformMatrix2fv(this.addr,!1,JS),En(i,n)}}function N9(d,t){const i=this.cache,n=t.elements;if(n===void 0){if(Tn(i,t))return;d.uniformMatrix3fv(this.addr,!1,t),En(i,t)}else{if(Tn(i,n))return;ZS.set(n),d.uniformMatrix3fv(this.addr,!1,ZS),En(i,n)}}function B9(d,t){const i=this.cache,n=t.elements;if(n===void 0){if(Tn(i,t))return;d.uniformMatrix4fv(this.addr,!1,t),En(i,t)}else{if(Tn(i,n))return;jS.set(n),d.uniformMatrix4fv(this.addr,!1,jS),En(i,n)}}function U9(d,t){const i=this.cache;i[0]!==t&&(d.uniform1i(this.addr,t),i[0]=t)}function V9(d,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(d.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Tn(i,t))return;d.uniform2iv(this.addr,t),En(i,t)}}function z9(d,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(d.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Tn(i,t))return;d.uniform3iv(this.addr,t),En(i,t)}}function G9(d,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(d.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Tn(i,t))return;d.uniform4iv(this.addr,t),En(i,t)}}function _9(d,t){const i=this.cache;i[0]!==t&&(d.uniform1ui(this.addr,t),i[0]=t)}function W9(d,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(d.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Tn(i,t))return;d.uniform2uiv(this.addr,t),En(i,t)}}function H9(d,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(d.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Tn(i,t))return;d.uniform3uiv(this.addr,t),En(i,t)}}function X9(d,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(d.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Tn(i,t))return;d.uniform4uiv(this.addr,t),En(i,t)}}function Y9(d,t,i){const n=this.cache,x=i.allocateTextureUnit();n[0]!==x&&(d.uniform1i(this.addr,x),n[0]=x);let S;this.type===d.SAMPLER_2D_SHADOW?(kS.compareFunction=mM,S=kS):S=FM,i.setTexture2D(t||S,x)}function k9(d,t,i){const n=this.cache,x=i.allocateTextureUnit();n[0]!==x&&(d.uniform1i(this.addr,x),n[0]=x),i.setTexture3D(t||OM,x)}function $9(d,t,i){const n=this.cache,x=i.allocateTextureUnit();n[0]!==x&&(d.uniform1i(this.addr,x),n[0]=x),i.setTextureCube(t||NM,x)}function K9(d,t,i){const n=this.cache,x=i.allocateTextureUnit();n[0]!==x&&(d.uniform1i(this.addr,x),n[0]=x),i.setTexture2DArray(t||DM,x)}function j9(d){switch(d){case 5126:return I9;case 35664:return L9;case 35665:return F9;case 35666:return D9;case 35674:return O9;case 35675:return N9;case 35676:return B9;case 5124:case 35670:return U9;case 35667:case 35671:return V9;case 35668:case 35672:return z9;case 35669:case 35673:return G9;case 5125:return _9;case 36294:return W9;case 36295:return H9;case 36296:return X9;case 35678:case 36198:case 36298:case 36306:case 35682:return Y9;case 35679:case 36299:case 36307:return k9;case 35680:case 36300:case 36308:case 36293:return $9;case 36289:case 36303:case 36311:case 36292:return K9}}function Z9(d,t){d.uniform1fv(this.addr,t)}function J9(d,t){const i=Jf(t,this.size,2);d.uniform2fv(this.addr,i)}function Q9(d,t){const i=Jf(t,this.size,3);d.uniform3fv(this.addr,i)}function q9(d,t){const i=Jf(t,this.size,4);d.uniform4fv(this.addr,i)}function t6(d,t){const i=Jf(t,this.size,4);d.uniformMatrix2fv(this.addr,!1,i)}function e6(d,t){const i=Jf(t,this.size,9);d.uniformMatrix3fv(this.addr,!1,i)}function i6(d,t){const i=Jf(t,this.size,16);d.uniformMatrix4fv(this.addr,!1,i)}function n6(d,t){d.uniform1iv(this.addr,t)}function s6(d,t){d.uniform2iv(this.addr,t)}function r6(d,t){d.uniform3iv(this.addr,t)}function a6(d,t){d.uniform4iv(this.addr,t)}function o6(d,t){d.uniform1uiv(this.addr,t)}function l6(d,t){d.uniform2uiv(this.addr,t)}function h6(d,t){d.uniform3uiv(this.addr,t)}function u6(d,t){d.uniform4uiv(this.addr,t)}function f6(d,t,i){const n=this.cache,x=t.length,S=og(i,x);Tn(n,S)||(d.uniform1iv(this.addr,S),En(n,S));for(let s=0;s!==x;++s)i.setTexture2D(t[s]||FM,S[s])}function c6(d,t,i){const n=this.cache,x=t.length,S=og(i,x);Tn(n,S)||(d.uniform1iv(this.addr,S),En(n,S));for(let s=0;s!==x;++s)i.setTexture3D(t[s]||OM,S[s])}function d6(d,t,i){const n=this.cache,x=t.length,S=og(i,x);Tn(n,S)||(d.uniform1iv(this.addr,S),En(n,S));for(let s=0;s!==x;++s)i.setTextureCube(t[s]||NM,S[s])}function p6(d,t,i){const n=this.cache,x=t.length,S=og(i,x);Tn(n,S)||(d.uniform1iv(this.addr,S),En(n,S));for(let s=0;s!==x;++s)i.setTexture2DArray(t[s]||DM,S[s])}function v6(d){switch(d){case 5126:return Z9;case 35664:return J9;case 35665:return Q9;case 35666:return q9;case 35674:return t6;case 35675:return e6;case 35676:return i6;case 5124:case 35670:return n6;case 35667:case 35671:return s6;case 35668:case 35672:return r6;case 35669:case 35673:return a6;case 5125:return o6;case 36294:return l6;case 36295:return h6;case 36296:return u6;case 35678:case 36198:case 36298:case 36306:case 35682:return f6;case 35679:case 36299:case 36307:return c6;case 35680:case 36300:case 36308:case 36293:return d6;case 36289:case 36303:case 36311:case 36292:return p6}}class m6{constructor(t,i,n){this.id=t,this.addr=n,this.cache=[],this.type=i.type,this.setValue=j9(i.type)}}class g6{constructor(t,i,n){this.id=t,this.addr=n,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=v6(i.type)}}class x6{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,i,n){const x=this.seq;for(let S=0,s=x.length;S!==s;++S){const T=x[S];T.setValue(t,i[T.id],n)}}}const P0=/(\w+)(\])?(\[|\.)?/g;function QS(d,t){d.seq.push(t),d.map[t.id]=t}function y6(d,t,i){const n=d.name,x=n.length;for(P0.lastIndex=0;;){const S=P0.exec(n),s=P0.lastIndex;let T=S[1];const e=S[2]==="]",a=S[3];if(e&&(T=T|0),a===void 0||a==="["&&s+2===x){QS(i,a===void 0?new m6(T,d,t):new g6(T,d,t));break}else{let f=i.map[T];f===void 0&&(f=new x6(T),QS(i,f)),i=f}}}class zv{constructor(t,i){this.seq=[],this.map={};const n=t.getProgramParameter(i,t.ACTIVE_UNIFORMS);for(let x=0;x<n;++x){const S=t.getActiveUniform(i,x),s=t.getUniformLocation(i,S.name);y6(S,s,this)}}setValue(t,i,n,x){const S=this.map[i];S!==void 0&&S.setValue(t,n,x)}setOptional(t,i,n){const x=i[n];x!==void 0&&this.setValue(t,n,x)}static upload(t,i,n,x){for(let S=0,s=i.length;S!==s;++S){const T=i[S],e=n[T.id];e.needsUpdate!==!1&&T.setValue(t,e.value,x)}}static seqWithValue(t,i){const n=[];for(let x=0,S=t.length;x!==S;++x){const s=t[x];s.id in i&&n.push(s)}return n}}function qS(d,t,i){const n=d.createShader(t);return d.shaderSource(n,i),d.compileShader(n),n}const T6=37297;let E6=0;function S6(d,t){const i=d.split(`
`),n=[],x=Math.max(t-6,0),S=Math.min(t+6,i.length);for(let s=x;s<S;s++){const T=s+1;n.push(`${T===t?">":" "} ${T}: ${i[s]}`)}return n.join(`
`)}const t2=new Ve;function C6(d){hi._getMatrix(t2,hi.workingColorSpace,d);const t=`mat3( ${t2.elements.map(i=>i.toFixed(4))} )`;switch(hi.getTransfer(d)){case hm:return[t,"LinearTransferOETF"];case Ei:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",d),[t,"LinearTransferOETF"]}}function e2(d,t,i){const n=d.getShaderParameter(t,d.COMPILE_STATUS),x=d.getShaderInfoLog(t).trim();if(n&&x==="")return"";const S=/ERROR: 0:(\d+)/.exec(x);if(S){const s=parseInt(S[1]);return i.toUpperCase()+`

`+x+`

`+S6(d.getShaderSource(t),s)}else return x}function A6(d,t){const i=C6(t);return[`vec4 ${d}( vec4 value ) {`,`	return ${i[1]}( vec4( value.rgb * ${i[0]}, value.a ) );`,"}"].join(`
`)}function w6(d,t){let i;switch(t){case PD:i="Linear";break;case bD:i="Reinhard";break;case ID:i="Cineon";break;case LD:i="ACESFilmic";break;case DD:i="AgX";break;case OD:i="Neutral";break;case FD:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+d+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}const vv=new Ct;function M6(){hi.getLuminanceCoefficients(vv);const d=vv.x.toFixed(4),t=vv.y.toFixed(4),i=vv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${d}, ${t}, ${i} );`,"	return dot( weights, rgb );","}"].join(`
`)}function R6(d){return[d.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",d.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Qc).join(`
`)}function P6(d){const t=[];for(const i in d){const n=d[i];n!==!1&&t.push("#define "+i+" "+n)}return t.join(`
`)}function b6(d,t){const i={},n=d.getProgramParameter(t,d.ACTIVE_ATTRIBUTES);for(let x=0;x<n;x++){const S=d.getActiveAttrib(t,x),s=S.name;let T=1;S.type===d.FLOAT_MAT2&&(T=2),S.type===d.FLOAT_MAT3&&(T=3),S.type===d.FLOAT_MAT4&&(T=4),i[s]={type:S.type,location:d.getAttribLocation(t,s),locationSize:T}}return i}function Qc(d){return d!==""}function i2(d,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return d.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function n2(d,t){return d.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const I6=/^[ \t]*#include +<([\w\d./]+)>/gm;function xy(d){return d.replace(I6,F6)}const L6=new Map;function F6(d,t){let i=ze[t];if(i===void 0){const n=L6.get(t);if(n!==void 0)i=ze[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return xy(i)}const D6=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s2(d){return d.replace(D6,O6)}function O6(d,t,i,n){let x="";for(let S=parseInt(t);S<parseInt(i);S++)x+=n.replace(/\[\s*i\s*\]/g,"[ "+S+" ]").replace(/UNROLLED_LOOP_INDEX/g,S);return x}function r2(d){let t=`precision ${d.precision} float;
	precision ${d.precision} int;
	precision ${d.precision} sampler2D;
	precision ${d.precision} samplerCube;
	precision ${d.precision} sampler3D;
	precision ${d.precision} sampler2DArray;
	precision ${d.precision} sampler2DShadow;
	precision ${d.precision} samplerCubeShadow;
	precision ${d.precision} sampler2DArrayShadow;
	precision ${d.precision} isampler2D;
	precision ${d.precision} isampler3D;
	precision ${d.precision} isamplerCube;
	precision ${d.precision} isampler2DArray;
	precision ${d.precision} usampler2D;
	precision ${d.precision} usampler3D;
	precision ${d.precision} usamplerCube;
	precision ${d.precision} usampler2DArray;
	`;return d.precision==="highp"?t+=`
#define HIGH_PRECISION`:d.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:d.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function N6(d){let t="SHADOWMAP_TYPE_BASIC";return d.shadowMapType===iM?t="SHADOWMAP_TYPE_PCF":d.shadowMapType===oD?t="SHADOWMAP_TYPE_PCF_SOFT":d.shadowMapType===Na&&(t="SHADOWMAP_TYPE_VSM"),t}function B6(d){let t="ENVMAP_TYPE_CUBE";if(d.envMap)switch(d.envMapMode){case pf:case vf:t="ENVMAP_TYPE_CUBE";break;case rg:t="ENVMAP_TYPE_CUBE_UV";break}return t}function U6(d){let t="ENVMAP_MODE_REFLECTION";if(d.envMap)switch(d.envMapMode){case vf:t="ENVMAP_MODE_REFRACTION";break}return t}function V6(d){let t="ENVMAP_BLENDING_NONE";if(d.envMap)switch(d.combine){case nM:t="ENVMAP_BLENDING_MULTIPLY";break;case MD:t="ENVMAP_BLENDING_MIX";break;case RD:t="ENVMAP_BLENDING_ADD";break}return t}function z6(d){const t=d.envMapCubeUVHeight;if(t===null)return null;const i=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}function G6(d,t,i,n){const x=d.getContext(),S=i.defines;let s=i.vertexShader,T=i.fragmentShader;const e=N6(i),a=B6(i),g=U6(i),f=V6(i),o=z6(i),u=R6(i),r=P6(S),h=x.createProgram();let c,l,p=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(c=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,r].filter(Qc).join(`
`),c.length>0&&(c+=`
`),l=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,r].filter(Qc).join(`
`),l.length>0&&(l+=`
`)):(c=[r2(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,r,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+g:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+e:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Qc).join(`
`),l=[r2(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,r,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+a:"",i.envMap?"#define "+g:"",i.envMap?"#define "+f:"",o?"#define CUBEUV_TEXEL_WIDTH "+o.texelWidth:"",o?"#define CUBEUV_TEXEL_HEIGHT "+o.texelHeight:"",o?"#define CUBEUV_MAX_MIP "+o.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+e:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==$o?"#define TONE_MAPPING":"",i.toneMapping!==$o?ze.tonemapping_pars_fragment:"",i.toneMapping!==$o?w6("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",ze.colorspace_pars_fragment,A6("linearToOutputTexel",i.outputColorSpace),M6(),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(Qc).join(`
`)),s=xy(s),s=i2(s,i),s=n2(s,i),T=xy(T),T=i2(T,i),T=n2(T,i),s=s2(s),T=s2(T),i.isRawShaderMaterial!==!0&&(p=`#version 300 es
`,c=[u,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+c,l=["#define varying in",i.glslVersion===gS?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===gS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+l);const m=p+c+s,v=p+l+T,y=qS(x,x.VERTEX_SHADER,m),E=qS(x,x.FRAGMENT_SHADER,v);x.attachShader(h,y),x.attachShader(h,E),i.index0AttributeName!==void 0?x.bindAttribLocation(h,0,i.index0AttributeName):i.morphTargets===!0&&x.bindAttribLocation(h,0,"position"),x.linkProgram(h);function C(R){if(d.debug.checkShaderErrors){const P=x.getProgramInfoLog(h).trim(),b=x.getShaderInfoLog(y).trim(),F=x.getShaderInfoLog(E).trim();let I=!0,L=!0;if(x.getProgramParameter(h,x.LINK_STATUS)===!1)if(I=!1,typeof d.debug.onShaderError=="function")d.debug.onShaderError(x,h,y,E);else{const D=e2(x,y,"vertex"),O=e2(x,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+x.getError()+" - VALIDATE_STATUS "+x.getProgramParameter(h,x.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+P+`
`+D+`
`+O)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(b===""||F==="")&&(L=!1);L&&(R.diagnostics={runnable:I,programLog:P,vertexShader:{log:b,prefix:c},fragmentShader:{log:F,prefix:l}})}x.deleteShader(y),x.deleteShader(E),w=new zv(x,h),A=b6(x,h)}let w;this.getUniforms=function(){return w===void 0&&C(this),w};let A;this.getAttributes=function(){return A===void 0&&C(this),A};let M=i.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=x.getProgramParameter(h,T6)),M},this.destroy=function(){n.releaseStatesOfProgram(this),x.deleteProgram(h),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=E6++,this.cacheKey=t,this.usedTimes=1,this.program=h,this.vertexShader=y,this.fragmentShader=E,this}let _6=0;class W6{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.vertexShader,n=t.fragmentShader,x=this._getShaderStage(i),S=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return s.has(x)===!1&&(s.add(x),x.usedTimes++),s.has(S)===!1&&(s.add(S),S.usedTimes++),this}remove(t){const i=this.materialCache.get(t);for(const n of i)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const i=this.materialCache;let n=i.get(t);return n===void 0&&(n=new Set,i.set(t,n)),n}_getShaderStage(t){const i=this.shaderCache;let n=i.get(t);return n===void 0&&(n=new H6(t),i.set(t,n)),n}}class H6{constructor(t){this.id=_6++,this.code=t,this.usedTimes=0}}function X6(d,t,i,n,x,S,s){const T=new TM,e=new W6,a=new Set,g=[],f=x.logarithmicDepthBuffer,o=x.vertexTextures;let u=x.precision;const r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function h(A){return a.add(A),A===0?"uv":`uv${A}`}function c(A,M,R,P,b){const F=P.fog,I=b.geometry,L=A.isMeshStandardMaterial?P.environment:null,D=(A.isMeshStandardMaterial?i:t).get(A.envMap||L),O=D&&D.mapping===rg?D.image.height:null,z=r[A.type];A.precision!==null&&(u=x.getMaxPrecision(A.precision),u!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",u,"instead."));const _=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,X=_!==void 0?_.length:0;let H=0;I.morphAttributes.position!==void 0&&(H=1),I.morphAttributes.normal!==void 0&&(H=2),I.morphAttributes.color!==void 0&&(H=3);let U,G,N,W;if(z){const Xe=ta[z];U=Xe.vertexShader,G=Xe.fragmentShader}else U=A.vertexShader,G=A.fragmentShader,e.update(A),N=e.getVertexShaderID(A),W=e.getFragmentShaderID(A);const V=d.getRenderTarget(),$=d.state.buffers.depth.getReversed(),j=b.isInstancedMesh===!0,k=b.isBatchedMesh===!0,Q=!!A.map,et=!!A.matcap,at=!!D,q=!!A.aoMap,ft=!!A.lightMap,vt=!!A.bumpMap,Tt=!!A.normalMap,ct=!!A.displacementMap,Ut=!!A.emissiveMap,yt=!!A.metalnessMap,it=!!A.roughnessMap,Z=A.anisotropy>0,lt=A.clearcoat>0,pt=A.dispersion>0,Pt=A.iridescence>0,wt=A.sheen>0,jt=A.transmission>0,Vt=Z&&!!A.anisotropyMap,Wt=lt&&!!A.clearcoatMap,ue=lt&&!!A.clearcoatNormalMap,Gt=lt&&!!A.clearcoatRoughnessMap,zt=Pt&&!!A.iridescenceMap,Yt=Pt&&!!A.iridescenceThicknessMap,bt=wt&&!!A.sheenColorMap,Kt=wt&&!!A.sheenRoughnessMap,ge=!!A.specularMap,ce=!!A.specularColorMap,Oe=!!A.specularIntensityMap,dt=jt&&!!A.transmissionMap,Jt=jt&&!!A.thicknessMap,Dt=!!A.gradientMap,Ot=!!A.alphaMap,ae=A.alphaTest>0,ne=!!A.alphaHash,Me=!!A.extensions;let Mi=$o;A.toneMapped&&(V===null||V.isXRRenderTarget===!0)&&(Mi=d.toneMapping);const Ui={shaderID:z,shaderType:A.type,shaderName:A.name,vertexShader:U,fragmentShader:G,defines:A.defines,customVertexShaderID:N,customFragmentShaderID:W,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:u,batching:k,batchingColor:k&&b._colorsTexture!==null,instancing:j,instancingColor:j&&b.instanceColor!==null,instancingMorph:j&&b.morphTexture!==null,supportsVertexTextures:o,outputColorSpace:V===null?d.outputColorSpace:V.isXRRenderTarget===!0?V.texture.colorSpace:xf,alphaToCoverage:!!A.alphaToCoverage,map:Q,matcap:et,envMap:at,envMapMode:at&&D.mapping,envMapCubeUVHeight:O,aoMap:q,lightMap:ft,bumpMap:vt,normalMap:Tt,displacementMap:o&&ct,emissiveMap:Ut,normalMapObjectSpace:Tt&&A.normalMapType===VD,normalMapTangentSpace:Tt&&A.normalMapType===vM,metalnessMap:yt,roughnessMap:it,anisotropy:Z,anisotropyMap:Vt,clearcoat:lt,clearcoatMap:Wt,clearcoatNormalMap:ue,clearcoatRoughnessMap:Gt,dispersion:pt,iridescence:Pt,iridescenceMap:zt,iridescenceThicknessMap:Yt,sheen:wt,sheenColorMap:bt,sheenRoughnessMap:Kt,specularMap:ge,specularColorMap:ce,specularIntensityMap:Oe,transmission:jt,transmissionMap:dt,thicknessMap:Jt,gradientMap:Dt,opaque:A.transparent===!1&&A.blending===_u&&A.alphaToCoverage===!1,alphaMap:Ot,alphaTest:ae,alphaHash:ne,combine:A.combine,mapUv:Q&&h(A.map.channel),aoMapUv:q&&h(A.aoMap.channel),lightMapUv:ft&&h(A.lightMap.channel),bumpMapUv:vt&&h(A.bumpMap.channel),normalMapUv:Tt&&h(A.normalMap.channel),displacementMapUv:ct&&h(A.displacementMap.channel),emissiveMapUv:Ut&&h(A.emissiveMap.channel),metalnessMapUv:yt&&h(A.metalnessMap.channel),roughnessMapUv:it&&h(A.roughnessMap.channel),anisotropyMapUv:Vt&&h(A.anisotropyMap.channel),clearcoatMapUv:Wt&&h(A.clearcoatMap.channel),clearcoatNormalMapUv:ue&&h(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Gt&&h(A.clearcoatRoughnessMap.channel),iridescenceMapUv:zt&&h(A.iridescenceMap.channel),iridescenceThicknessMapUv:Yt&&h(A.iridescenceThicknessMap.channel),sheenColorMapUv:bt&&h(A.sheenColorMap.channel),sheenRoughnessMapUv:Kt&&h(A.sheenRoughnessMap.channel),specularMapUv:ge&&h(A.specularMap.channel),specularColorMapUv:ce&&h(A.specularColorMap.channel),specularIntensityMapUv:Oe&&h(A.specularIntensityMap.channel),transmissionMapUv:dt&&h(A.transmissionMap.channel),thicknessMapUv:Jt&&h(A.thicknessMap.channel),alphaMapUv:Ot&&h(A.alphaMap.channel),vertexTangents:!!I.attributes.tangent&&(Tt||Z),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!I.attributes.color&&I.attributes.color.itemSize===4,pointsUvs:b.isPoints===!0&&!!I.attributes.uv&&(Q||Ot),fog:!!F,useFog:A.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:$,skinning:b.isSkinnedMesh===!0,morphTargets:I.morphAttributes.position!==void 0,morphNormals:I.morphAttributes.normal!==void 0,morphColors:I.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:H,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:A.dithering,shadowMapEnabled:d.shadowMap.enabled&&R.length>0,shadowMapType:d.shadowMap.type,toneMapping:Mi,decodeVideoTexture:Q&&A.map.isVideoTexture===!0&&hi.getTransfer(A.map.colorSpace)===Ei,decodeVideoTextureEmissive:Ut&&A.emissiveMap.isVideoTexture===!0&&hi.getTransfer(A.emissiveMap.colorSpace)===Ei,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===_a,flipSided:A.side===gs,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Me&&A.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Me&&A.extensions.multiDraw===!0||k)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return Ui.vertexUv1s=a.has(1),Ui.vertexUv2s=a.has(2),Ui.vertexUv3s=a.has(3),a.clear(),Ui}function l(A){const M=[];if(A.shaderID?M.push(A.shaderID):(M.push(A.customVertexShaderID),M.push(A.customFragmentShaderID)),A.defines!==void 0)for(const R in A.defines)M.push(R),M.push(A.defines[R]);return A.isRawShaderMaterial===!1&&(p(M,A),m(M,A),M.push(d.outputColorSpace)),M.push(A.customProgramCacheKey),M.join()}function p(A,M){A.push(M.precision),A.push(M.outputColorSpace),A.push(M.envMapMode),A.push(M.envMapCubeUVHeight),A.push(M.mapUv),A.push(M.alphaMapUv),A.push(M.lightMapUv),A.push(M.aoMapUv),A.push(M.bumpMapUv),A.push(M.normalMapUv),A.push(M.displacementMapUv),A.push(M.emissiveMapUv),A.push(M.metalnessMapUv),A.push(M.roughnessMapUv),A.push(M.anisotropyMapUv),A.push(M.clearcoatMapUv),A.push(M.clearcoatNormalMapUv),A.push(M.clearcoatRoughnessMapUv),A.push(M.iridescenceMapUv),A.push(M.iridescenceThicknessMapUv),A.push(M.sheenColorMapUv),A.push(M.sheenRoughnessMapUv),A.push(M.specularMapUv),A.push(M.specularColorMapUv),A.push(M.specularIntensityMapUv),A.push(M.transmissionMapUv),A.push(M.thicknessMapUv),A.push(M.combine),A.push(M.fogExp2),A.push(M.sizeAttenuation),A.push(M.morphTargetsCount),A.push(M.morphAttributeCount),A.push(M.numDirLights),A.push(M.numPointLights),A.push(M.numSpotLights),A.push(M.numSpotLightMaps),A.push(M.numHemiLights),A.push(M.numRectAreaLights),A.push(M.numDirLightShadows),A.push(M.numPointLightShadows),A.push(M.numSpotLightShadows),A.push(M.numSpotLightShadowsWithMaps),A.push(M.numLightProbes),A.push(M.shadowMapType),A.push(M.toneMapping),A.push(M.numClippingPlanes),A.push(M.numClipIntersection),A.push(M.depthPacking)}function m(A,M){T.disableAll(),M.supportsVertexTextures&&T.enable(0),M.instancing&&T.enable(1),M.instancingColor&&T.enable(2),M.instancingMorph&&T.enable(3),M.matcap&&T.enable(4),M.envMap&&T.enable(5),M.normalMapObjectSpace&&T.enable(6),M.normalMapTangentSpace&&T.enable(7),M.clearcoat&&T.enable(8),M.iridescence&&T.enable(9),M.alphaTest&&T.enable(10),M.vertexColors&&T.enable(11),M.vertexAlphas&&T.enable(12),M.vertexUv1s&&T.enable(13),M.vertexUv2s&&T.enable(14),M.vertexUv3s&&T.enable(15),M.vertexTangents&&T.enable(16),M.anisotropy&&T.enable(17),M.alphaHash&&T.enable(18),M.batching&&T.enable(19),M.dispersion&&T.enable(20),M.batchingColor&&T.enable(21),A.push(T.mask),T.disableAll(),M.fog&&T.enable(0),M.useFog&&T.enable(1),M.flatShading&&T.enable(2),M.logarithmicDepthBuffer&&T.enable(3),M.reverseDepthBuffer&&T.enable(4),M.skinning&&T.enable(5),M.morphTargets&&T.enable(6),M.morphNormals&&T.enable(7),M.morphColors&&T.enable(8),M.premultipliedAlpha&&T.enable(9),M.shadowMapEnabled&&T.enable(10),M.doubleSided&&T.enable(11),M.flipSided&&T.enable(12),M.useDepthPacking&&T.enable(13),M.dithering&&T.enable(14),M.transmission&&T.enable(15),M.sheen&&T.enable(16),M.opaque&&T.enable(17),M.pointsUvs&&T.enable(18),M.decodeVideoTexture&&T.enable(19),M.decodeVideoTextureEmissive&&T.enable(20),M.alphaToCoverage&&T.enable(21),A.push(T.mask)}function v(A){const M=r[A.type];let R;if(M){const P=ta[M];R=m5.clone(P.uniforms)}else R=A.uniforms;return R}function y(A,M){let R;for(let P=0,b=g.length;P<b;P++){const F=g[P];if(F.cacheKey===M){R=F,++R.usedTimes;break}}return R===void 0&&(R=new G6(d,M,A,S),g.push(R)),R}function E(A){if(--A.usedTimes===0){const M=g.indexOf(A);g[M]=g[g.length-1],g.pop(),A.destroy()}}function C(A){e.remove(A)}function w(){e.dispose()}return{getParameters:c,getProgramCacheKey:l,getUniforms:v,acquireProgram:y,releaseProgram:E,releaseShaderCache:C,programs:g,dispose:w}}function Y6(){let d=new WeakMap;function t(s){return d.has(s)}function i(s){let T=d.get(s);return T===void 0&&(T={},d.set(s,T)),T}function n(s){d.delete(s)}function x(s,T,e){d.get(s)[T]=e}function S(){d=new WeakMap}return{has:t,get:i,remove:n,update:x,dispose:S}}function k6(d,t){return d.groupOrder!==t.groupOrder?d.groupOrder-t.groupOrder:d.renderOrder!==t.renderOrder?d.renderOrder-t.renderOrder:d.material.id!==t.material.id?d.material.id-t.material.id:d.z!==t.z?d.z-t.z:d.id-t.id}function a2(d,t){return d.groupOrder!==t.groupOrder?d.groupOrder-t.groupOrder:d.renderOrder!==t.renderOrder?d.renderOrder-t.renderOrder:d.z!==t.z?t.z-d.z:d.id-t.id}function o2(){const d=[];let t=0;const i=[],n=[],x=[];function S(){t=0,i.length=0,n.length=0,x.length=0}function s(f,o,u,r,h,c){let l=d[t];return l===void 0?(l={id:f.id,object:f,geometry:o,material:u,groupOrder:r,renderOrder:f.renderOrder,z:h,group:c},d[t]=l):(l.id=f.id,l.object=f,l.geometry=o,l.material=u,l.groupOrder=r,l.renderOrder=f.renderOrder,l.z=h,l.group=c),t++,l}function T(f,o,u,r,h,c){const l=s(f,o,u,r,h,c);u.transmission>0?n.push(l):u.transparent===!0?x.push(l):i.push(l)}function e(f,o,u,r,h,c){const l=s(f,o,u,r,h,c);u.transmission>0?n.unshift(l):u.transparent===!0?x.unshift(l):i.unshift(l)}function a(f,o){i.length>1&&i.sort(f||k6),n.length>1&&n.sort(o||a2),x.length>1&&x.sort(o||a2)}function g(){for(let f=t,o=d.length;f<o;f++){const u=d[f];if(u.id===null)break;u.id=null,u.object=null,u.geometry=null,u.material=null,u.group=null}}return{opaque:i,transmissive:n,transparent:x,init:S,push:T,unshift:e,finish:g,sort:a}}function $6(){let d=new WeakMap;function t(n,x){const S=d.get(n);let s;return S===void 0?(s=new o2,d.set(n,[s])):x>=S.length?(s=new o2,S.push(s)):s=S[x],s}function i(){d=new WeakMap}return{get:t,dispose:i}}function K6(){const d={};return{get:function(t){if(d[t.id]!==void 0)return d[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new Ct,color:new ci};break;case"SpotLight":i={position:new Ct,direction:new Ct,color:new ci,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Ct,color:new ci,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Ct,skyColor:new ci,groundColor:new ci};break;case"RectAreaLight":i={color:new ci,position:new Ct,halfWidth:new Ct,halfHeight:new Ct};break}return d[t.id]=i,i}}}function j6(){const d={};return{get:function(t){if(d[t.id]!==void 0)return d[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ni};break;case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ni};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ni,shadowCameraNear:1,shadowCameraFar:1e3};break}return d[t.id]=i,i}}}let Z6=0;function J6(d,t){return(t.castShadow?2:0)-(d.castShadow?2:0)+(t.map?1:0)-(d.map?1:0)}function Q6(d){const t=new K6,i=j6(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)n.probe.push(new Ct);const x=new Ct,S=new Yi,s=new Yi;function T(a){let g=0,f=0,o=0;for(let A=0;A<9;A++)n.probe[A].set(0,0,0);let u=0,r=0,h=0,c=0,l=0,p=0,m=0,v=0,y=0,E=0,C=0;a.sort(J6);for(let A=0,M=a.length;A<M;A++){const R=a[A],P=R.color,b=R.intensity,F=R.distance,I=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)g+=P.r*b,f+=P.g*b,o+=P.b*b;else if(R.isLightProbe){for(let L=0;L<9;L++)n.probe[L].addScaledVector(R.sh.coefficients[L],b);C++}else if(R.isDirectionalLight){const L=t.get(R);if(L.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const D=R.shadow,O=i.get(R);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,n.directionalShadow[u]=O,n.directionalShadowMap[u]=I,n.directionalShadowMatrix[u]=R.shadow.matrix,p++}n.directional[u]=L,u++}else if(R.isSpotLight){const L=t.get(R);L.position.setFromMatrixPosition(R.matrixWorld),L.color.copy(P).multiplyScalar(b),L.distance=F,L.coneCos=Math.cos(R.angle),L.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),L.decay=R.decay,n.spot[h]=L;const D=R.shadow;if(R.map&&(n.spotLightMap[y]=R.map,y++,D.updateMatrices(R),R.castShadow&&E++),n.spotLightMatrix[h]=D.matrix,R.castShadow){const O=i.get(R);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,n.spotShadow[h]=O,n.spotShadowMap[h]=I,v++}h++}else if(R.isRectAreaLight){const L=t.get(R);L.color.copy(P).multiplyScalar(b),L.halfWidth.set(R.width*.5,0,0),L.halfHeight.set(0,R.height*.5,0),n.rectArea[c]=L,c++}else if(R.isPointLight){const L=t.get(R);if(L.color.copy(R.color).multiplyScalar(R.intensity),L.distance=R.distance,L.decay=R.decay,R.castShadow){const D=R.shadow,O=i.get(R);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,O.shadowCameraNear=D.camera.near,O.shadowCameraFar=D.camera.far,n.pointShadow[r]=O,n.pointShadowMap[r]=I,n.pointShadowMatrix[r]=R.shadow.matrix,m++}n.point[r]=L,r++}else if(R.isHemisphereLight){const L=t.get(R);L.skyColor.copy(R.color).multiplyScalar(b),L.groundColor.copy(R.groundColor).multiplyScalar(b),n.hemi[l]=L,l++}}c>0&&(d.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=oe.LTC_FLOAT_1,n.rectAreaLTC2=oe.LTC_FLOAT_2):(n.rectAreaLTC1=oe.LTC_HALF_1,n.rectAreaLTC2=oe.LTC_HALF_2)),n.ambient[0]=g,n.ambient[1]=f,n.ambient[2]=o;const w=n.hash;(w.directionalLength!==u||w.pointLength!==r||w.spotLength!==h||w.rectAreaLength!==c||w.hemiLength!==l||w.numDirectionalShadows!==p||w.numPointShadows!==m||w.numSpotShadows!==v||w.numSpotMaps!==y||w.numLightProbes!==C)&&(n.directional.length=u,n.spot.length=h,n.rectArea.length=c,n.point.length=r,n.hemi.length=l,n.directionalShadow.length=p,n.directionalShadowMap.length=p,n.pointShadow.length=m,n.pointShadowMap.length=m,n.spotShadow.length=v,n.spotShadowMap.length=v,n.directionalShadowMatrix.length=p,n.pointShadowMatrix.length=m,n.spotLightMatrix.length=v+y-E,n.spotLightMap.length=y,n.numSpotLightShadowsWithMaps=E,n.numLightProbes=C,w.directionalLength=u,w.pointLength=r,w.spotLength=h,w.rectAreaLength=c,w.hemiLength=l,w.numDirectionalShadows=p,w.numPointShadows=m,w.numSpotShadows=v,w.numSpotMaps=y,w.numLightProbes=C,n.version=Z6++)}function e(a,g){let f=0,o=0,u=0,r=0,h=0;const c=g.matrixWorldInverse;for(let l=0,p=a.length;l<p;l++){const m=a[l];if(m.isDirectionalLight){const v=n.directional[f];v.direction.setFromMatrixPosition(m.matrixWorld),x.setFromMatrixPosition(m.target.matrixWorld),v.direction.sub(x),v.direction.transformDirection(c),f++}else if(m.isSpotLight){const v=n.spot[u];v.position.setFromMatrixPosition(m.matrixWorld),v.position.applyMatrix4(c),v.direction.setFromMatrixPosition(m.matrixWorld),x.setFromMatrixPosition(m.target.matrixWorld),v.direction.sub(x),v.direction.transformDirection(c),u++}else if(m.isRectAreaLight){const v=n.rectArea[r];v.position.setFromMatrixPosition(m.matrixWorld),v.position.applyMatrix4(c),s.identity(),S.copy(m.matrixWorld),S.premultiply(c),s.extractRotation(S),v.halfWidth.set(m.width*.5,0,0),v.halfHeight.set(0,m.height*.5,0),v.halfWidth.applyMatrix4(s),v.halfHeight.applyMatrix4(s),r++}else if(m.isPointLight){const v=n.point[o];v.position.setFromMatrixPosition(m.matrixWorld),v.position.applyMatrix4(c),o++}else if(m.isHemisphereLight){const v=n.hemi[h];v.direction.setFromMatrixPosition(m.matrixWorld),v.direction.transformDirection(c),h++}}}return{setup:T,setupView:e,state:n}}function l2(d){const t=new Q6(d),i=[],n=[];function x(g){a.camera=g,i.length=0,n.length=0}function S(g){i.push(g)}function s(g){n.push(g)}function T(){t.setup(i)}function e(g){t.setupView(i,g)}const a={lightsArray:i,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:x,state:a,setupLights:T,setupLightsView:e,pushLight:S,pushShadow:s}}function q6(d){let t=new WeakMap;function i(x,S=0){const s=t.get(x);let T;return s===void 0?(T=new l2(d),t.set(x,[T])):S>=s.length?(T=new l2(d),s.push(T)):T=s[S],T}function n(){t=new WeakMap}return{get:i,dispose:n}}const t8=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,e8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function i8(d,t,i){let n=new U1;const x=new ni,S=new ni,s=new Si,T=new w5({depthPacking:UD}),e=new M5,a={},g=i.maxTextureSize,f={[qa]:gs,[gs]:qa,[_a]:_a},o=new sl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ni},radius:{value:4}},vertexShader:t8,fragmentShader:e8}),u=o.clone();u.defines.HORIZONTAL_PASS=1;const r=new lo;r.setAttribute("position",new ha(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const h=new ps(r,o),c=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=iM;let l=this.type;this.render=function(E,C,w){if(c.enabled===!1||c.autoUpdate===!1&&c.needsUpdate===!1||E.length===0)return;const A=d.getRenderTarget(),M=d.getActiveCubeFace(),R=d.getActiveMipmapLevel(),P=d.state;P.setBlending(ko),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const b=l!==Na&&this.type===Na,F=l===Na&&this.type!==Na;for(let I=0,L=E.length;I<L;I++){const D=E[I],O=D.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;x.copy(O.mapSize);const z=O.getFrameExtents();if(x.multiply(z),S.copy(O.mapSize),(x.x>g||x.y>g)&&(x.x>g&&(S.x=Math.floor(g/z.x),x.x=S.x*z.x,O.mapSize.x=S.x),x.y>g&&(S.y=Math.floor(g/z.y),x.y=S.y*z.y,O.mapSize.y=S.y)),O.map===null||b===!0||F===!0){const X=this.type!==Na?{minFilter:Fr,magFilter:Fr}:{};O.map!==null&&O.map.dispose(),O.map=new Ah(x.x,x.y,X),O.map.texture.name=D.name+".shadowMap",O.camera.updateProjectionMatrix()}d.setRenderTarget(O.map),d.clear();const _=O.getViewportCount();for(let X=0;X<_;X++){const H=O.getViewport(X);s.set(S.x*H.x,S.y*H.y,S.x*H.z,S.y*H.w),P.viewport(s),O.updateMatrices(D,X),n=O.getFrustum(),v(C,w,O.camera,D,this.type)}O.isPointLightShadow!==!0&&this.type===Na&&p(O,w),O.needsUpdate=!1}l=this.type,c.needsUpdate=!1,d.setRenderTarget(A,M,R)};function p(E,C){const w=t.update(h);o.defines.VSM_SAMPLES!==E.blurSamples&&(o.defines.VSM_SAMPLES=E.blurSamples,u.defines.VSM_SAMPLES=E.blurSamples,o.needsUpdate=!0,u.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new Ah(x.x,x.y)),o.uniforms.shadow_pass.value=E.map.texture,o.uniforms.resolution.value=E.mapSize,o.uniforms.radius.value=E.radius,d.setRenderTarget(E.mapPass),d.clear(),d.renderBufferDirect(C,null,w,o,h,null),u.uniforms.shadow_pass.value=E.mapPass.texture,u.uniforms.resolution.value=E.mapSize,u.uniforms.radius.value=E.radius,d.setRenderTarget(E.map),d.clear(),d.renderBufferDirect(C,null,w,u,h,null)}function m(E,C,w,A){let M=null;const R=w.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(R!==void 0)M=R;else if(M=w.isPointLight===!0?e:T,d.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const P=M.uuid,b=C.uuid;let F=a[P];F===void 0&&(F={},a[P]=F);let I=F[b];I===void 0&&(I=M.clone(),F[b]=I,C.addEventListener("dispose",y)),M=I}if(M.visible=C.visible,M.wireframe=C.wireframe,A===Na?M.side=C.shadowSide!==null?C.shadowSide:C.side:M.side=C.shadowSide!==null?C.shadowSide:f[C.side],M.alphaMap=C.alphaMap,M.alphaTest=C.alphaTest,M.map=C.map,M.clipShadows=C.clipShadows,M.clippingPlanes=C.clippingPlanes,M.clipIntersection=C.clipIntersection,M.displacementMap=C.displacementMap,M.displacementScale=C.displacementScale,M.displacementBias=C.displacementBias,M.wireframeLinewidth=C.wireframeLinewidth,M.linewidth=C.linewidth,w.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const P=d.properties.get(M);P.light=w}return M}function v(E,C,w,A,M){if(E.visible===!1)return;if(E.layers.test(C.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&M===Na)&&(!E.frustumCulled||n.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,E.matrixWorld);const b=t.update(E),F=E.material;if(Array.isArray(F)){const I=b.groups;for(let L=0,D=I.length;L<D;L++){const O=I[L],z=F[O.materialIndex];if(z&&z.visible){const _=m(E,z,A,M);E.onBeforeShadow(d,E,C,w,b,_,O),d.renderBufferDirect(w,null,b,_,E,O),E.onAfterShadow(d,E,C,w,b,_,O)}}}else if(F.visible){const I=m(E,F,A,M);E.onBeforeShadow(d,E,C,w,b,I,null),d.renderBufferDirect(w,null,b,I,E,null),E.onAfterShadow(d,E,C,w,b,I,null)}}const P=E.children;for(let b=0,F=P.length;b<F;b++)v(P[b],C,w,A,M)}function y(E){E.target.removeEventListener("dispose",y);for(const w in a){const A=a[w],M=E.target.uuid;M in A&&(A[M].dispose(),delete A[M])}}}const n8={[Ox]:Nx,[Bx]:zx,[Ux]:Gx,[df]:Vx,[Nx]:Ox,[zx]:Bx,[Gx]:Ux,[Vx]:df};function s8(d,t){function i(){let dt=!1;const Jt=new Si;let Dt=null;const Ot=new Si(0,0,0,0);return{setMask:function(ae){Dt!==ae&&!dt&&(d.colorMask(ae,ae,ae,ae),Dt=ae)},setLocked:function(ae){dt=ae},setClear:function(ae,ne,Me,Mi,Ui){Ui===!0&&(ae*=Mi,ne*=Mi,Me*=Mi),Jt.set(ae,ne,Me,Mi),Ot.equals(Jt)===!1&&(d.clearColor(ae,ne,Me,Mi),Ot.copy(Jt))},reset:function(){dt=!1,Dt=null,Ot.set(-1,0,0,0)}}}function n(){let dt=!1,Jt=!1,Dt=null,Ot=null,ae=null;return{setReversed:function(ne){if(Jt!==ne){const Me=t.get("EXT_clip_control");Jt?Me.clipControlEXT(Me.LOWER_LEFT_EXT,Me.ZERO_TO_ONE_EXT):Me.clipControlEXT(Me.LOWER_LEFT_EXT,Me.NEGATIVE_ONE_TO_ONE_EXT);const Mi=ae;ae=null,this.setClear(Mi)}Jt=ne},getReversed:function(){return Jt},setTest:function(ne){ne?V(d.DEPTH_TEST):$(d.DEPTH_TEST)},setMask:function(ne){Dt!==ne&&!dt&&(d.depthMask(ne),Dt=ne)},setFunc:function(ne){if(Jt&&(ne=n8[ne]),Ot!==ne){switch(ne){case Ox:d.depthFunc(d.NEVER);break;case Nx:d.depthFunc(d.ALWAYS);break;case Bx:d.depthFunc(d.LESS);break;case df:d.depthFunc(d.LEQUAL);break;case Ux:d.depthFunc(d.EQUAL);break;case Vx:d.depthFunc(d.GEQUAL);break;case zx:d.depthFunc(d.GREATER);break;case Gx:d.depthFunc(d.NOTEQUAL);break;default:d.depthFunc(d.LEQUAL)}Ot=ne}},setLocked:function(ne){dt=ne},setClear:function(ne){ae!==ne&&(Jt&&(ne=1-ne),d.clearDepth(ne),ae=ne)},reset:function(){dt=!1,Dt=null,Ot=null,ae=null,Jt=!1}}}function x(){let dt=!1,Jt=null,Dt=null,Ot=null,ae=null,ne=null,Me=null,Mi=null,Ui=null;return{setTest:function(Xe){dt||(Xe?V(d.STENCIL_TEST):$(d.STENCIL_TEST))},setMask:function(Xe){Jt!==Xe&&!dt&&(d.stencilMask(Xe),Jt=Xe)},setFunc:function(Xe,Ri,ki){(Dt!==Xe||Ot!==Ri||ae!==ki)&&(d.stencilFunc(Xe,Ri,ki),Dt=Xe,Ot=Ri,ae=ki)},setOp:function(Xe,Ri,ki){(ne!==Xe||Me!==Ri||Mi!==ki)&&(d.stencilOp(Xe,Ri,ki),ne=Xe,Me=Ri,Mi=ki)},setLocked:function(Xe){dt=Xe},setClear:function(Xe){Ui!==Xe&&(d.clearStencil(Xe),Ui=Xe)},reset:function(){dt=!1,Jt=null,Dt=null,Ot=null,ae=null,ne=null,Me=null,Mi=null,Ui=null}}}const S=new i,s=new n,T=new x,e=new WeakMap,a=new WeakMap;let g={},f={},o=new WeakMap,u=[],r=null,h=!1,c=null,l=null,p=null,m=null,v=null,y=null,E=null,C=new ci(0,0,0),w=0,A=!1,M=null,R=null,P=null,b=null,F=null;const I=d.getParameter(d.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,D=0;const O=d.getParameter(d.VERSION);O.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL (\d)/.exec(O)[1]),L=D>=1):O.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),L=D>=2);let z=null,_={};const X=d.getParameter(d.SCISSOR_BOX),H=d.getParameter(d.VIEWPORT),U=new Si().fromArray(X),G=new Si().fromArray(H);function N(dt,Jt,Dt,Ot){const ae=new Uint8Array(4),ne=d.createTexture();d.bindTexture(dt,ne),d.texParameteri(dt,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(dt,d.TEXTURE_MAG_FILTER,d.NEAREST);for(let Me=0;Me<Dt;Me++)dt===d.TEXTURE_3D||dt===d.TEXTURE_2D_ARRAY?d.texImage3D(Jt,0,d.RGBA,1,1,Ot,0,d.RGBA,d.UNSIGNED_BYTE,ae):d.texImage2D(Jt+Me,0,d.RGBA,1,1,0,d.RGBA,d.UNSIGNED_BYTE,ae);return ne}const W={};W[d.TEXTURE_2D]=N(d.TEXTURE_2D,d.TEXTURE_2D,1),W[d.TEXTURE_CUBE_MAP]=N(d.TEXTURE_CUBE_MAP,d.TEXTURE_CUBE_MAP_POSITIVE_X,6),W[d.TEXTURE_2D_ARRAY]=N(d.TEXTURE_2D_ARRAY,d.TEXTURE_2D_ARRAY,1,1),W[d.TEXTURE_3D]=N(d.TEXTURE_3D,d.TEXTURE_3D,1,1),S.setClear(0,0,0,1),s.setClear(1),T.setClear(0),V(d.DEPTH_TEST),s.setFunc(df),vt(!1),Tt(fS),V(d.CULL_FACE),q(ko);function V(dt){g[dt]!==!0&&(d.enable(dt),g[dt]=!0)}function $(dt){g[dt]!==!1&&(d.disable(dt),g[dt]=!1)}function j(dt,Jt){return f[dt]!==Jt?(d.bindFramebuffer(dt,Jt),f[dt]=Jt,dt===d.DRAW_FRAMEBUFFER&&(f[d.FRAMEBUFFER]=Jt),dt===d.FRAMEBUFFER&&(f[d.DRAW_FRAMEBUFFER]=Jt),!0):!1}function k(dt,Jt){let Dt=u,Ot=!1;if(dt){Dt=o.get(Jt),Dt===void 0&&(Dt=[],o.set(Jt,Dt));const ae=dt.textures;if(Dt.length!==ae.length||Dt[0]!==d.COLOR_ATTACHMENT0){for(let ne=0,Me=ae.length;ne<Me;ne++)Dt[ne]=d.COLOR_ATTACHMENT0+ne;Dt.length=ae.length,Ot=!0}}else Dt[0]!==d.BACK&&(Dt[0]=d.BACK,Ot=!0);Ot&&d.drawBuffers(Dt)}function Q(dt){return r!==dt?(d.useProgram(dt),r=dt,!0):!1}const et={[Hl]:d.FUNC_ADD,[hD]:d.FUNC_SUBTRACT,[uD]:d.FUNC_REVERSE_SUBTRACT};et[fD]=d.MIN,et[cD]=d.MAX;const at={[dD]:d.ZERO,[pD]:d.ONE,[vD]:d.SRC_COLOR,[Fx]:d.SRC_ALPHA,[ED]:d.SRC_ALPHA_SATURATE,[yD]:d.DST_COLOR,[gD]:d.DST_ALPHA,[mD]:d.ONE_MINUS_SRC_COLOR,[Dx]:d.ONE_MINUS_SRC_ALPHA,[TD]:d.ONE_MINUS_DST_COLOR,[xD]:d.ONE_MINUS_DST_ALPHA,[SD]:d.CONSTANT_COLOR,[CD]:d.ONE_MINUS_CONSTANT_COLOR,[AD]:d.CONSTANT_ALPHA,[wD]:d.ONE_MINUS_CONSTANT_ALPHA};function q(dt,Jt,Dt,Ot,ae,ne,Me,Mi,Ui,Xe){if(dt===ko){h===!0&&($(d.BLEND),h=!1);return}if(h===!1&&(V(d.BLEND),h=!0),dt!==lD){if(dt!==c||Xe!==A){if((l!==Hl||v!==Hl)&&(d.blendEquation(d.FUNC_ADD),l=Hl,v=Hl),Xe)switch(dt){case _u:d.blendFuncSeparate(d.ONE,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case cS:d.blendFunc(d.ONE,d.ONE);break;case dS:d.blendFuncSeparate(d.ZERO,d.ONE_MINUS_SRC_COLOR,d.ZERO,d.ONE);break;case pS:d.blendFuncSeparate(d.ZERO,d.SRC_COLOR,d.ZERO,d.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",dt);break}else switch(dt){case _u:d.blendFuncSeparate(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case cS:d.blendFunc(d.SRC_ALPHA,d.ONE);break;case dS:d.blendFuncSeparate(d.ZERO,d.ONE_MINUS_SRC_COLOR,d.ZERO,d.ONE);break;case pS:d.blendFunc(d.ZERO,d.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",dt);break}p=null,m=null,y=null,E=null,C.set(0,0,0),w=0,c=dt,A=Xe}return}ae=ae||Jt,ne=ne||Dt,Me=Me||Ot,(Jt!==l||ae!==v)&&(d.blendEquationSeparate(et[Jt],et[ae]),l=Jt,v=ae),(Dt!==p||Ot!==m||ne!==y||Me!==E)&&(d.blendFuncSeparate(at[Dt],at[Ot],at[ne],at[Me]),p=Dt,m=Ot,y=ne,E=Me),(Mi.equals(C)===!1||Ui!==w)&&(d.blendColor(Mi.r,Mi.g,Mi.b,Ui),C.copy(Mi),w=Ui),c=dt,A=!1}function ft(dt,Jt){dt.side===_a?$(d.CULL_FACE):V(d.CULL_FACE);let Dt=dt.side===gs;Jt&&(Dt=!Dt),vt(Dt),dt.blending===_u&&dt.transparent===!1?q(ko):q(dt.blending,dt.blendEquation,dt.blendSrc,dt.blendDst,dt.blendEquationAlpha,dt.blendSrcAlpha,dt.blendDstAlpha,dt.blendColor,dt.blendAlpha,dt.premultipliedAlpha),s.setFunc(dt.depthFunc),s.setTest(dt.depthTest),s.setMask(dt.depthWrite),S.setMask(dt.colorWrite);const Ot=dt.stencilWrite;T.setTest(Ot),Ot&&(T.setMask(dt.stencilWriteMask),T.setFunc(dt.stencilFunc,dt.stencilRef,dt.stencilFuncMask),T.setOp(dt.stencilFail,dt.stencilZFail,dt.stencilZPass)),Ut(dt.polygonOffset,dt.polygonOffsetFactor,dt.polygonOffsetUnits),dt.alphaToCoverage===!0?V(d.SAMPLE_ALPHA_TO_COVERAGE):$(d.SAMPLE_ALPHA_TO_COVERAGE)}function vt(dt){M!==dt&&(dt?d.frontFace(d.CW):d.frontFace(d.CCW),M=dt)}function Tt(dt){dt!==rD?(V(d.CULL_FACE),dt!==R&&(dt===fS?d.cullFace(d.BACK):dt===aD?d.cullFace(d.FRONT):d.cullFace(d.FRONT_AND_BACK))):$(d.CULL_FACE),R=dt}function ct(dt){dt!==P&&(L&&d.lineWidth(dt),P=dt)}function Ut(dt,Jt,Dt){dt?(V(d.POLYGON_OFFSET_FILL),(b!==Jt||F!==Dt)&&(d.polygonOffset(Jt,Dt),b=Jt,F=Dt)):$(d.POLYGON_OFFSET_FILL)}function yt(dt){dt?V(d.SCISSOR_TEST):$(d.SCISSOR_TEST)}function it(dt){dt===void 0&&(dt=d.TEXTURE0+I-1),z!==dt&&(d.activeTexture(dt),z=dt)}function Z(dt,Jt,Dt){Dt===void 0&&(z===null?Dt=d.TEXTURE0+I-1:Dt=z);let Ot=_[Dt];Ot===void 0&&(Ot={type:void 0,texture:void 0},_[Dt]=Ot),(Ot.type!==dt||Ot.texture!==Jt)&&(z!==Dt&&(d.activeTexture(Dt),z=Dt),d.bindTexture(dt,Jt||W[dt]),Ot.type=dt,Ot.texture=Jt)}function lt(){const dt=_[z];dt!==void 0&&dt.type!==void 0&&(d.bindTexture(dt.type,null),dt.type=void 0,dt.texture=void 0)}function pt(){try{d.compressedTexImage2D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Pt(){try{d.compressedTexImage3D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function wt(){try{d.texSubImage2D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function jt(){try{d.texSubImage3D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Vt(){try{d.compressedTexSubImage2D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Wt(){try{d.compressedTexSubImage3D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function ue(){try{d.texStorage2D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Gt(){try{d.texStorage3D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function zt(){try{d.texImage2D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Yt(){try{d.texImage3D.apply(d,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function bt(dt){U.equals(dt)===!1&&(d.scissor(dt.x,dt.y,dt.z,dt.w),U.copy(dt))}function Kt(dt){G.equals(dt)===!1&&(d.viewport(dt.x,dt.y,dt.z,dt.w),G.copy(dt))}function ge(dt,Jt){let Dt=a.get(Jt);Dt===void 0&&(Dt=new WeakMap,a.set(Jt,Dt));let Ot=Dt.get(dt);Ot===void 0&&(Ot=d.getUniformBlockIndex(Jt,dt.name),Dt.set(dt,Ot))}function ce(dt,Jt){const Ot=a.get(Jt).get(dt);e.get(Jt)!==Ot&&(d.uniformBlockBinding(Jt,Ot,dt.__bindingPointIndex),e.set(Jt,Ot))}function Oe(){d.disable(d.BLEND),d.disable(d.CULL_FACE),d.disable(d.DEPTH_TEST),d.disable(d.POLYGON_OFFSET_FILL),d.disable(d.SCISSOR_TEST),d.disable(d.STENCIL_TEST),d.disable(d.SAMPLE_ALPHA_TO_COVERAGE),d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ZERO),d.blendFuncSeparate(d.ONE,d.ZERO,d.ONE,d.ZERO),d.blendColor(0,0,0,0),d.colorMask(!0,!0,!0,!0),d.clearColor(0,0,0,0),d.depthMask(!0),d.depthFunc(d.LESS),s.setReversed(!1),d.clearDepth(1),d.stencilMask(4294967295),d.stencilFunc(d.ALWAYS,0,4294967295),d.stencilOp(d.KEEP,d.KEEP,d.KEEP),d.clearStencil(0),d.cullFace(d.BACK),d.frontFace(d.CCW),d.polygonOffset(0,0),d.activeTexture(d.TEXTURE0),d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindFramebuffer(d.DRAW_FRAMEBUFFER,null),d.bindFramebuffer(d.READ_FRAMEBUFFER,null),d.useProgram(null),d.lineWidth(1),d.scissor(0,0,d.canvas.width,d.canvas.height),d.viewport(0,0,d.canvas.width,d.canvas.height),g={},z=null,_={},f={},o=new WeakMap,u=[],r=null,h=!1,c=null,l=null,p=null,m=null,v=null,y=null,E=null,C=new ci(0,0,0),w=0,A=!1,M=null,R=null,P=null,b=null,F=null,U.set(0,0,d.canvas.width,d.canvas.height),G.set(0,0,d.canvas.width,d.canvas.height),S.reset(),s.reset(),T.reset()}return{buffers:{color:S,depth:s,stencil:T},enable:V,disable:$,bindFramebuffer:j,drawBuffers:k,useProgram:Q,setBlending:q,setMaterial:ft,setFlipSided:vt,setCullFace:Tt,setLineWidth:ct,setPolygonOffset:Ut,setScissorTest:yt,activeTexture:it,bindTexture:Z,unbindTexture:lt,compressedTexImage2D:pt,compressedTexImage3D:Pt,texImage2D:zt,texImage3D:Yt,updateUBOMapping:ge,uniformBlockBinding:ce,texStorage2D:ue,texStorage3D:Gt,texSubImage2D:wt,texSubImage3D:jt,compressedTexSubImage2D:Vt,compressedTexSubImage3D:Wt,scissor:bt,viewport:Kt,reset:Oe}}function r8(d,t,i,n,x,S,s){const T=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,e=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),a=new ni,g=new WeakMap;let f;const o=new WeakMap;let u=!1;try{u=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function r(it,Z){return u?new OffscreenCanvas(it,Z):fm("canvas")}function h(it,Z,lt){let pt=1;const Pt=yt(it);if((Pt.width>lt||Pt.height>lt)&&(pt=lt/Math.max(Pt.width,Pt.height)),pt<1)if(typeof HTMLImageElement<"u"&&it instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&it instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&it instanceof ImageBitmap||typeof VideoFrame<"u"&&it instanceof VideoFrame){const wt=Math.floor(pt*Pt.width),jt=Math.floor(pt*Pt.height);f===void 0&&(f=r(wt,jt));const Vt=Z?r(wt,jt):f;return Vt.width=wt,Vt.height=jt,Vt.getContext("2d").drawImage(it,0,0,wt,jt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Pt.width+"x"+Pt.height+") to ("+wt+"x"+jt+")."),Vt}else return"data"in it&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Pt.width+"x"+Pt.height+")."),it;return it}function c(it){return it.generateMipmaps}function l(it){d.generateMipmap(it)}function p(it){return it.isWebGLCubeRenderTarget?d.TEXTURE_CUBE_MAP:it.isWebGL3DRenderTarget?d.TEXTURE_3D:it.isWebGLArrayRenderTarget||it.isCompressedArrayTexture?d.TEXTURE_2D_ARRAY:d.TEXTURE_2D}function m(it,Z,lt,pt,Pt=!1){if(it!==null){if(d[it]!==void 0)return d[it];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+it+"'")}let wt=Z;if(Z===d.RED&&(lt===d.FLOAT&&(wt=d.R32F),lt===d.HALF_FLOAT&&(wt=d.R16F),lt===d.UNSIGNED_BYTE&&(wt=d.R8)),Z===d.RED_INTEGER&&(lt===d.UNSIGNED_BYTE&&(wt=d.R8UI),lt===d.UNSIGNED_SHORT&&(wt=d.R16UI),lt===d.UNSIGNED_INT&&(wt=d.R32UI),lt===d.BYTE&&(wt=d.R8I),lt===d.SHORT&&(wt=d.R16I),lt===d.INT&&(wt=d.R32I)),Z===d.RG&&(lt===d.FLOAT&&(wt=d.RG32F),lt===d.HALF_FLOAT&&(wt=d.RG16F),lt===d.UNSIGNED_BYTE&&(wt=d.RG8)),Z===d.RG_INTEGER&&(lt===d.UNSIGNED_BYTE&&(wt=d.RG8UI),lt===d.UNSIGNED_SHORT&&(wt=d.RG16UI),lt===d.UNSIGNED_INT&&(wt=d.RG32UI),lt===d.BYTE&&(wt=d.RG8I),lt===d.SHORT&&(wt=d.RG16I),lt===d.INT&&(wt=d.RG32I)),Z===d.RGB_INTEGER&&(lt===d.UNSIGNED_BYTE&&(wt=d.RGB8UI),lt===d.UNSIGNED_SHORT&&(wt=d.RGB16UI),lt===d.UNSIGNED_INT&&(wt=d.RGB32UI),lt===d.BYTE&&(wt=d.RGB8I),lt===d.SHORT&&(wt=d.RGB16I),lt===d.INT&&(wt=d.RGB32I)),Z===d.RGBA_INTEGER&&(lt===d.UNSIGNED_BYTE&&(wt=d.RGBA8UI),lt===d.UNSIGNED_SHORT&&(wt=d.RGBA16UI),lt===d.UNSIGNED_INT&&(wt=d.RGBA32UI),lt===d.BYTE&&(wt=d.RGBA8I),lt===d.SHORT&&(wt=d.RGBA16I),lt===d.INT&&(wt=d.RGBA32I)),Z===d.RGB&&lt===d.UNSIGNED_INT_5_9_9_9_REV&&(wt=d.RGB9_E5),Z===d.RGBA){const jt=Pt?hm:hi.getTransfer(pt);lt===d.FLOAT&&(wt=d.RGBA32F),lt===d.HALF_FLOAT&&(wt=d.RGBA16F),lt===d.UNSIGNED_BYTE&&(wt=jt===Ei?d.SRGB8_ALPHA8:d.RGBA8),lt===d.UNSIGNED_SHORT_4_4_4_4&&(wt=d.RGBA4),lt===d.UNSIGNED_SHORT_5_5_5_1&&(wt=d.RGB5_A1)}return(wt===d.R16F||wt===d.R32F||wt===d.RG16F||wt===d.RG32F||wt===d.RGBA16F||wt===d.RGBA32F)&&t.get("EXT_color_buffer_float"),wt}function v(it,Z){let lt;return it?Z===null||Z===Ch||Z===mf?lt=d.DEPTH24_STENCIL8:Z===Ha?lt=d.DEPTH32F_STENCIL8:Z===Pd&&(lt=d.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Z===null||Z===Ch||Z===mf?lt=d.DEPTH_COMPONENT24:Z===Ha?lt=d.DEPTH_COMPONENT32F:Z===Pd&&(lt=d.DEPTH_COMPONENT16),lt}function y(it,Z){return c(it)===!0||it.isFramebufferTexture&&it.minFilter!==Fr&&it.minFilter!==na?Math.log2(Math.max(Z.width,Z.height))+1:it.mipmaps!==void 0&&it.mipmaps.length>0?it.mipmaps.length:it.isCompressedTexture&&Array.isArray(it.image)?Z.mipmaps.length:1}function E(it){const Z=it.target;Z.removeEventListener("dispose",E),w(Z),Z.isVideoTexture&&g.delete(Z)}function C(it){const Z=it.target;Z.removeEventListener("dispose",C),M(Z)}function w(it){const Z=n.get(it);if(Z.__webglInit===void 0)return;const lt=it.source,pt=o.get(lt);if(pt){const Pt=pt[Z.__cacheKey];Pt.usedTimes--,Pt.usedTimes===0&&A(it),Object.keys(pt).length===0&&o.delete(lt)}n.remove(it)}function A(it){const Z=n.get(it);d.deleteTexture(Z.__webglTexture);const lt=it.source,pt=o.get(lt);delete pt[Z.__cacheKey],s.memory.textures--}function M(it){const Z=n.get(it);if(it.depthTexture&&(it.depthTexture.dispose(),n.remove(it.depthTexture)),it.isWebGLCubeRenderTarget)for(let pt=0;pt<6;pt++){if(Array.isArray(Z.__webglFramebuffer[pt]))for(let Pt=0;Pt<Z.__webglFramebuffer[pt].length;Pt++)d.deleteFramebuffer(Z.__webglFramebuffer[pt][Pt]);else d.deleteFramebuffer(Z.__webglFramebuffer[pt]);Z.__webglDepthbuffer&&d.deleteRenderbuffer(Z.__webglDepthbuffer[pt])}else{if(Array.isArray(Z.__webglFramebuffer))for(let pt=0;pt<Z.__webglFramebuffer.length;pt++)d.deleteFramebuffer(Z.__webglFramebuffer[pt]);else d.deleteFramebuffer(Z.__webglFramebuffer);if(Z.__webglDepthbuffer&&d.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&d.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer)for(let pt=0;pt<Z.__webglColorRenderbuffer.length;pt++)Z.__webglColorRenderbuffer[pt]&&d.deleteRenderbuffer(Z.__webglColorRenderbuffer[pt]);Z.__webglDepthRenderbuffer&&d.deleteRenderbuffer(Z.__webglDepthRenderbuffer)}const lt=it.textures;for(let pt=0,Pt=lt.length;pt<Pt;pt++){const wt=n.get(lt[pt]);wt.__webglTexture&&(d.deleteTexture(wt.__webglTexture),s.memory.textures--),n.remove(lt[pt])}n.remove(it)}let R=0;function P(){R=0}function b(){const it=R;return it>=x.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+it+" texture units while this GPU supports only "+x.maxTextures),R+=1,it}function F(it){const Z=[];return Z.push(it.wrapS),Z.push(it.wrapT),Z.push(it.wrapR||0),Z.push(it.magFilter),Z.push(it.minFilter),Z.push(it.anisotropy),Z.push(it.internalFormat),Z.push(it.format),Z.push(it.type),Z.push(it.generateMipmaps),Z.push(it.premultiplyAlpha),Z.push(it.flipY),Z.push(it.unpackAlignment),Z.push(it.colorSpace),Z.join()}function I(it,Z){const lt=n.get(it);if(it.isVideoTexture&&ct(it),it.isRenderTargetTexture===!1&&it.version>0&&lt.__version!==it.version){const pt=it.image;if(pt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{G(lt,it,Z);return}}i.bindTexture(d.TEXTURE_2D,lt.__webglTexture,d.TEXTURE0+Z)}function L(it,Z){const lt=n.get(it);if(it.version>0&&lt.__version!==it.version){G(lt,it,Z);return}i.bindTexture(d.TEXTURE_2D_ARRAY,lt.__webglTexture,d.TEXTURE0+Z)}function D(it,Z){const lt=n.get(it);if(it.version>0&&lt.__version!==it.version){G(lt,it,Z);return}i.bindTexture(d.TEXTURE_3D,lt.__webglTexture,d.TEXTURE0+Z)}function O(it,Z){const lt=n.get(it);if(it.version>0&&lt.__version!==it.version){N(lt,it,Z);return}i.bindTexture(d.TEXTURE_CUBE_MAP,lt.__webglTexture,d.TEXTURE0+Z)}const z={[Hx]:d.REPEAT,[Ql]:d.CLAMP_TO_EDGE,[Xx]:d.MIRRORED_REPEAT},_={[Fr]:d.NEAREST,[ND]:d.NEAREST_MIPMAP_NEAREST,[Kp]:d.NEAREST_MIPMAP_LINEAR,[na]:d.LINEAR,[Jg]:d.LINEAR_MIPMAP_NEAREST,[ql]:d.LINEAR_MIPMAP_LINEAR},X={[zD]:d.NEVER,[YD]:d.ALWAYS,[GD]:d.LESS,[mM]:d.LEQUAL,[_D]:d.EQUAL,[XD]:d.GEQUAL,[WD]:d.GREATER,[HD]:d.NOTEQUAL};function H(it,Z){if(Z.type===Ha&&t.has("OES_texture_float_linear")===!1&&(Z.magFilter===na||Z.magFilter===Jg||Z.magFilter===Kp||Z.magFilter===ql||Z.minFilter===na||Z.minFilter===Jg||Z.minFilter===Kp||Z.minFilter===ql)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),d.texParameteri(it,d.TEXTURE_WRAP_S,z[Z.wrapS]),d.texParameteri(it,d.TEXTURE_WRAP_T,z[Z.wrapT]),(it===d.TEXTURE_3D||it===d.TEXTURE_2D_ARRAY)&&d.texParameteri(it,d.TEXTURE_WRAP_R,z[Z.wrapR]),d.texParameteri(it,d.TEXTURE_MAG_FILTER,_[Z.magFilter]),d.texParameteri(it,d.TEXTURE_MIN_FILTER,_[Z.minFilter]),Z.compareFunction&&(d.texParameteri(it,d.TEXTURE_COMPARE_MODE,d.COMPARE_REF_TO_TEXTURE),d.texParameteri(it,d.TEXTURE_COMPARE_FUNC,X[Z.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(Z.magFilter===Fr||Z.minFilter!==Kp&&Z.minFilter!==ql||Z.type===Ha&&t.has("OES_texture_float_linear")===!1)return;if(Z.anisotropy>1||n.get(Z).__currentAnisotropy){const lt=t.get("EXT_texture_filter_anisotropic");d.texParameterf(it,lt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,x.getMaxAnisotropy())),n.get(Z).__currentAnisotropy=Z.anisotropy}}}function U(it,Z){let lt=!1;it.__webglInit===void 0&&(it.__webglInit=!0,Z.addEventListener("dispose",E));const pt=Z.source;let Pt=o.get(pt);Pt===void 0&&(Pt={},o.set(pt,Pt));const wt=F(Z);if(wt!==it.__cacheKey){Pt[wt]===void 0&&(Pt[wt]={texture:d.createTexture(),usedTimes:0},s.memory.textures++,lt=!0),Pt[wt].usedTimes++;const jt=Pt[it.__cacheKey];jt!==void 0&&(Pt[it.__cacheKey].usedTimes--,jt.usedTimes===0&&A(Z)),it.__cacheKey=wt,it.__webglTexture=Pt[wt].texture}return lt}function G(it,Z,lt){let pt=d.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(pt=d.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(pt=d.TEXTURE_3D);const Pt=U(it,Z),wt=Z.source;i.bindTexture(pt,it.__webglTexture,d.TEXTURE0+lt);const jt=n.get(wt);if(wt.version!==jt.__version||Pt===!0){i.activeTexture(d.TEXTURE0+lt);const Vt=hi.getPrimaries(hi.workingColorSpace),Wt=Z.colorSpace===Lo?null:hi.getPrimaries(Z.colorSpace),ue=Z.colorSpace===Lo||Vt===Wt?d.NONE:d.BROWSER_DEFAULT_WEBGL;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,Z.flipY),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),d.pixelStorei(d.UNPACK_ALIGNMENT,Z.unpackAlignment),d.pixelStorei(d.UNPACK_COLORSPACE_CONVERSION_WEBGL,ue);let Gt=h(Z.image,!1,x.maxTextureSize);Gt=Ut(Z,Gt);const zt=S.convert(Z.format,Z.colorSpace),Yt=S.convert(Z.type);let bt=m(Z.internalFormat,zt,Yt,Z.colorSpace,Z.isVideoTexture);H(pt,Z);let Kt;const ge=Z.mipmaps,ce=Z.isVideoTexture!==!0,Oe=jt.__version===void 0||Pt===!0,dt=wt.dataReady,Jt=y(Z,Gt);if(Z.isDepthTexture)bt=v(Z.format===gf,Z.type),Oe&&(ce?i.texStorage2D(d.TEXTURE_2D,1,bt,Gt.width,Gt.height):i.texImage2D(d.TEXTURE_2D,0,bt,Gt.width,Gt.height,0,zt,Yt,null));else if(Z.isDataTexture)if(ge.length>0){ce&&Oe&&i.texStorage2D(d.TEXTURE_2D,Jt,bt,ge[0].width,ge[0].height);for(let Dt=0,Ot=ge.length;Dt<Ot;Dt++)Kt=ge[Dt],ce?dt&&i.texSubImage2D(d.TEXTURE_2D,Dt,0,0,Kt.width,Kt.height,zt,Yt,Kt.data):i.texImage2D(d.TEXTURE_2D,Dt,bt,Kt.width,Kt.height,0,zt,Yt,Kt.data);Z.generateMipmaps=!1}else ce?(Oe&&i.texStorage2D(d.TEXTURE_2D,Jt,bt,Gt.width,Gt.height),dt&&i.texSubImage2D(d.TEXTURE_2D,0,0,0,Gt.width,Gt.height,zt,Yt,Gt.data)):i.texImage2D(d.TEXTURE_2D,0,bt,Gt.width,Gt.height,0,zt,Yt,Gt.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){ce&&Oe&&i.texStorage3D(d.TEXTURE_2D_ARRAY,Jt,bt,ge[0].width,ge[0].height,Gt.depth);for(let Dt=0,Ot=ge.length;Dt<Ot;Dt++)if(Kt=ge[Dt],Z.format!==br)if(zt!==null)if(ce){if(dt)if(Z.layerUpdates.size>0){const ae=VS(Kt.width,Kt.height,Z.format,Z.type);for(const ne of Z.layerUpdates){const Me=Kt.data.subarray(ne*ae/Kt.data.BYTES_PER_ELEMENT,(ne+1)*ae/Kt.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(d.TEXTURE_2D_ARRAY,Dt,0,0,ne,Kt.width,Kt.height,1,zt,Me)}Z.clearLayerUpdates()}else i.compressedTexSubImage3D(d.TEXTURE_2D_ARRAY,Dt,0,0,0,Kt.width,Kt.height,Gt.depth,zt,Kt.data)}else i.compressedTexImage3D(d.TEXTURE_2D_ARRAY,Dt,bt,Kt.width,Kt.height,Gt.depth,0,Kt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ce?dt&&i.texSubImage3D(d.TEXTURE_2D_ARRAY,Dt,0,0,0,Kt.width,Kt.height,Gt.depth,zt,Yt,Kt.data):i.texImage3D(d.TEXTURE_2D_ARRAY,Dt,bt,Kt.width,Kt.height,Gt.depth,0,zt,Yt,Kt.data)}else{ce&&Oe&&i.texStorage2D(d.TEXTURE_2D,Jt,bt,ge[0].width,ge[0].height);for(let Dt=0,Ot=ge.length;Dt<Ot;Dt++)Kt=ge[Dt],Z.format!==br?zt!==null?ce?dt&&i.compressedTexSubImage2D(d.TEXTURE_2D,Dt,0,0,Kt.width,Kt.height,zt,Kt.data):i.compressedTexImage2D(d.TEXTURE_2D,Dt,bt,Kt.width,Kt.height,0,Kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ce?dt&&i.texSubImage2D(d.TEXTURE_2D,Dt,0,0,Kt.width,Kt.height,zt,Yt,Kt.data):i.texImage2D(d.TEXTURE_2D,Dt,bt,Kt.width,Kt.height,0,zt,Yt,Kt.data)}else if(Z.isDataArrayTexture)if(ce){if(Oe&&i.texStorage3D(d.TEXTURE_2D_ARRAY,Jt,bt,Gt.width,Gt.height,Gt.depth),dt)if(Z.layerUpdates.size>0){const Dt=VS(Gt.width,Gt.height,Z.format,Z.type);for(const Ot of Z.layerUpdates){const ae=Gt.data.subarray(Ot*Dt/Gt.data.BYTES_PER_ELEMENT,(Ot+1)*Dt/Gt.data.BYTES_PER_ELEMENT);i.texSubImage3D(d.TEXTURE_2D_ARRAY,0,0,0,Ot,Gt.width,Gt.height,1,zt,Yt,ae)}Z.clearLayerUpdates()}else i.texSubImage3D(d.TEXTURE_2D_ARRAY,0,0,0,0,Gt.width,Gt.height,Gt.depth,zt,Yt,Gt.data)}else i.texImage3D(d.TEXTURE_2D_ARRAY,0,bt,Gt.width,Gt.height,Gt.depth,0,zt,Yt,Gt.data);else if(Z.isData3DTexture)ce?(Oe&&i.texStorage3D(d.TEXTURE_3D,Jt,bt,Gt.width,Gt.height,Gt.depth),dt&&i.texSubImage3D(d.TEXTURE_3D,0,0,0,0,Gt.width,Gt.height,Gt.depth,zt,Yt,Gt.data)):i.texImage3D(d.TEXTURE_3D,0,bt,Gt.width,Gt.height,Gt.depth,0,zt,Yt,Gt.data);else if(Z.isFramebufferTexture){if(Oe)if(ce)i.texStorage2D(d.TEXTURE_2D,Jt,bt,Gt.width,Gt.height);else{let Dt=Gt.width,Ot=Gt.height;for(let ae=0;ae<Jt;ae++)i.texImage2D(d.TEXTURE_2D,ae,bt,Dt,Ot,0,zt,Yt,null),Dt>>=1,Ot>>=1}}else if(ge.length>0){if(ce&&Oe){const Dt=yt(ge[0]);i.texStorage2D(d.TEXTURE_2D,Jt,bt,Dt.width,Dt.height)}for(let Dt=0,Ot=ge.length;Dt<Ot;Dt++)Kt=ge[Dt],ce?dt&&i.texSubImage2D(d.TEXTURE_2D,Dt,0,0,zt,Yt,Kt):i.texImage2D(d.TEXTURE_2D,Dt,bt,zt,Yt,Kt);Z.generateMipmaps=!1}else if(ce){if(Oe){const Dt=yt(Gt);i.texStorage2D(d.TEXTURE_2D,Jt,bt,Dt.width,Dt.height)}dt&&i.texSubImage2D(d.TEXTURE_2D,0,0,0,zt,Yt,Gt)}else i.texImage2D(d.TEXTURE_2D,0,bt,zt,Yt,Gt);c(Z)&&l(pt),jt.__version=wt.version,Z.onUpdate&&Z.onUpdate(Z)}it.__version=Z.version}function N(it,Z,lt){if(Z.image.length!==6)return;const pt=U(it,Z),Pt=Z.source;i.bindTexture(d.TEXTURE_CUBE_MAP,it.__webglTexture,d.TEXTURE0+lt);const wt=n.get(Pt);if(Pt.version!==wt.__version||pt===!0){i.activeTexture(d.TEXTURE0+lt);const jt=hi.getPrimaries(hi.workingColorSpace),Vt=Z.colorSpace===Lo?null:hi.getPrimaries(Z.colorSpace),Wt=Z.colorSpace===Lo||jt===Vt?d.NONE:d.BROWSER_DEFAULT_WEBGL;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,Z.flipY),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),d.pixelStorei(d.UNPACK_ALIGNMENT,Z.unpackAlignment),d.pixelStorei(d.UNPACK_COLORSPACE_CONVERSION_WEBGL,Wt);const ue=Z.isCompressedTexture||Z.image[0].isCompressedTexture,Gt=Z.image[0]&&Z.image[0].isDataTexture,zt=[];for(let Ot=0;Ot<6;Ot++)!ue&&!Gt?zt[Ot]=h(Z.image[Ot],!0,x.maxCubemapSize):zt[Ot]=Gt?Z.image[Ot].image:Z.image[Ot],zt[Ot]=Ut(Z,zt[Ot]);const Yt=zt[0],bt=S.convert(Z.format,Z.colorSpace),Kt=S.convert(Z.type),ge=m(Z.internalFormat,bt,Kt,Z.colorSpace),ce=Z.isVideoTexture!==!0,Oe=wt.__version===void 0||pt===!0,dt=Pt.dataReady;let Jt=y(Z,Yt);H(d.TEXTURE_CUBE_MAP,Z);let Dt;if(ue){ce&&Oe&&i.texStorage2D(d.TEXTURE_CUBE_MAP,Jt,ge,Yt.width,Yt.height);for(let Ot=0;Ot<6;Ot++){Dt=zt[Ot].mipmaps;for(let ae=0;ae<Dt.length;ae++){const ne=Dt[ae];Z.format!==br?bt!==null?ce?dt&&i.compressedTexSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,ae,0,0,ne.width,ne.height,bt,ne.data):i.compressedTexImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,ae,ge,ne.width,ne.height,0,ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ce?dt&&i.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,ae,0,0,ne.width,ne.height,bt,Kt,ne.data):i.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,ae,ge,ne.width,ne.height,0,bt,Kt,ne.data)}}}else{if(Dt=Z.mipmaps,ce&&Oe){Dt.length>0&&Jt++;const Ot=yt(zt[0]);i.texStorage2D(d.TEXTURE_CUBE_MAP,Jt,ge,Ot.width,Ot.height)}for(let Ot=0;Ot<6;Ot++)if(Gt){ce?dt&&i.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,0,0,zt[Ot].width,zt[Ot].height,bt,Kt,zt[Ot].data):i.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,ge,zt[Ot].width,zt[Ot].height,0,bt,Kt,zt[Ot].data);for(let ae=0;ae<Dt.length;ae++){const Me=Dt[ae].image[Ot].image;ce?dt&&i.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,ae+1,0,0,Me.width,Me.height,bt,Kt,Me.data):i.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,ae+1,ge,Me.width,Me.height,0,bt,Kt,Me.data)}}else{ce?dt&&i.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,0,0,bt,Kt,zt[Ot]):i.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,ge,bt,Kt,zt[Ot]);for(let ae=0;ae<Dt.length;ae++){const ne=Dt[ae];ce?dt&&i.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,ae+1,0,0,bt,Kt,ne.image[Ot]):i.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,ae+1,ge,bt,Kt,ne.image[Ot])}}}c(Z)&&l(d.TEXTURE_CUBE_MAP),wt.__version=Pt.version,Z.onUpdate&&Z.onUpdate(Z)}it.__version=Z.version}function W(it,Z,lt,pt,Pt,wt){const jt=S.convert(lt.format,lt.colorSpace),Vt=S.convert(lt.type),Wt=m(lt.internalFormat,jt,Vt,lt.colorSpace),ue=n.get(Z),Gt=n.get(lt);if(Gt.__renderTarget=Z,!ue.__hasExternalTextures){const zt=Math.max(1,Z.width>>wt),Yt=Math.max(1,Z.height>>wt);Pt===d.TEXTURE_3D||Pt===d.TEXTURE_2D_ARRAY?i.texImage3D(Pt,wt,Wt,zt,Yt,Z.depth,0,jt,Vt,null):i.texImage2D(Pt,wt,Wt,zt,Yt,0,jt,Vt,null)}i.bindFramebuffer(d.FRAMEBUFFER,it),Tt(Z)?T.framebufferTexture2DMultisampleEXT(d.FRAMEBUFFER,pt,Pt,Gt.__webglTexture,0,vt(Z)):(Pt===d.TEXTURE_2D||Pt>=d.TEXTURE_CUBE_MAP_POSITIVE_X&&Pt<=d.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&d.framebufferTexture2D(d.FRAMEBUFFER,pt,Pt,Gt.__webglTexture,wt),i.bindFramebuffer(d.FRAMEBUFFER,null)}function V(it,Z,lt){if(d.bindRenderbuffer(d.RENDERBUFFER,it),Z.depthBuffer){const pt=Z.depthTexture,Pt=pt&&pt.isDepthTexture?pt.type:null,wt=v(Z.stencilBuffer,Pt),jt=Z.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT,Vt=vt(Z);Tt(Z)?T.renderbufferStorageMultisampleEXT(d.RENDERBUFFER,Vt,wt,Z.width,Z.height):lt?d.renderbufferStorageMultisample(d.RENDERBUFFER,Vt,wt,Z.width,Z.height):d.renderbufferStorage(d.RENDERBUFFER,wt,Z.width,Z.height),d.framebufferRenderbuffer(d.FRAMEBUFFER,jt,d.RENDERBUFFER,it)}else{const pt=Z.textures;for(let Pt=0;Pt<pt.length;Pt++){const wt=pt[Pt],jt=S.convert(wt.format,wt.colorSpace),Vt=S.convert(wt.type),Wt=m(wt.internalFormat,jt,Vt,wt.colorSpace),ue=vt(Z);lt&&Tt(Z)===!1?d.renderbufferStorageMultisample(d.RENDERBUFFER,ue,Wt,Z.width,Z.height):Tt(Z)?T.renderbufferStorageMultisampleEXT(d.RENDERBUFFER,ue,Wt,Z.width,Z.height):d.renderbufferStorage(d.RENDERBUFFER,Wt,Z.width,Z.height)}}d.bindRenderbuffer(d.RENDERBUFFER,null)}function $(it,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(d.FRAMEBUFFER,it),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const pt=n.get(Z.depthTexture);pt.__renderTarget=Z,(!pt.__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),I(Z.depthTexture,0);const Pt=pt.__webglTexture,wt=vt(Z);if(Z.depthTexture.format===Wu)Tt(Z)?T.framebufferTexture2DMultisampleEXT(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,Pt,0,wt):d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,Pt,0);else if(Z.depthTexture.format===gf)Tt(Z)?T.framebufferTexture2DMultisampleEXT(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,Pt,0,wt):d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,Pt,0);else throw new Error("Unknown depthTexture format")}function j(it){const Z=n.get(it),lt=it.isWebGLCubeRenderTarget===!0;if(Z.__boundDepthTexture!==it.depthTexture){const pt=it.depthTexture;if(Z.__depthDisposeCallback&&Z.__depthDisposeCallback(),pt){const Pt=()=>{delete Z.__boundDepthTexture,delete Z.__depthDisposeCallback,pt.removeEventListener("dispose",Pt)};pt.addEventListener("dispose",Pt),Z.__depthDisposeCallback=Pt}Z.__boundDepthTexture=pt}if(it.depthTexture&&!Z.__autoAllocateDepthBuffer){if(lt)throw new Error("target.depthTexture not supported in Cube render targets");$(Z.__webglFramebuffer,it)}else if(lt){Z.__webglDepthbuffer=[];for(let pt=0;pt<6;pt++)if(i.bindFramebuffer(d.FRAMEBUFFER,Z.__webglFramebuffer[pt]),Z.__webglDepthbuffer[pt]===void 0)Z.__webglDepthbuffer[pt]=d.createRenderbuffer(),V(Z.__webglDepthbuffer[pt],it,!1);else{const Pt=it.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT,wt=Z.__webglDepthbuffer[pt];d.bindRenderbuffer(d.RENDERBUFFER,wt),d.framebufferRenderbuffer(d.FRAMEBUFFER,Pt,d.RENDERBUFFER,wt)}}else if(i.bindFramebuffer(d.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer===void 0)Z.__webglDepthbuffer=d.createRenderbuffer(),V(Z.__webglDepthbuffer,it,!1);else{const pt=it.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT,Pt=Z.__webglDepthbuffer;d.bindRenderbuffer(d.RENDERBUFFER,Pt),d.framebufferRenderbuffer(d.FRAMEBUFFER,pt,d.RENDERBUFFER,Pt)}i.bindFramebuffer(d.FRAMEBUFFER,null)}function k(it,Z,lt){const pt=n.get(it);Z!==void 0&&W(pt.__webglFramebuffer,it,it.texture,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,0),lt!==void 0&&j(it)}function Q(it){const Z=it.texture,lt=n.get(it),pt=n.get(Z);it.addEventListener("dispose",C);const Pt=it.textures,wt=it.isWebGLCubeRenderTarget===!0,jt=Pt.length>1;if(jt||(pt.__webglTexture===void 0&&(pt.__webglTexture=d.createTexture()),pt.__version=Z.version,s.memory.textures++),wt){lt.__webglFramebuffer=[];for(let Vt=0;Vt<6;Vt++)if(Z.mipmaps&&Z.mipmaps.length>0){lt.__webglFramebuffer[Vt]=[];for(let Wt=0;Wt<Z.mipmaps.length;Wt++)lt.__webglFramebuffer[Vt][Wt]=d.createFramebuffer()}else lt.__webglFramebuffer[Vt]=d.createFramebuffer()}else{if(Z.mipmaps&&Z.mipmaps.length>0){lt.__webglFramebuffer=[];for(let Vt=0;Vt<Z.mipmaps.length;Vt++)lt.__webglFramebuffer[Vt]=d.createFramebuffer()}else lt.__webglFramebuffer=d.createFramebuffer();if(jt)for(let Vt=0,Wt=Pt.length;Vt<Wt;Vt++){const ue=n.get(Pt[Vt]);ue.__webglTexture===void 0&&(ue.__webglTexture=d.createTexture(),s.memory.textures++)}if(it.samples>0&&Tt(it)===!1){lt.__webglMultisampledFramebuffer=d.createFramebuffer(),lt.__webglColorRenderbuffer=[],i.bindFramebuffer(d.FRAMEBUFFER,lt.__webglMultisampledFramebuffer);for(let Vt=0;Vt<Pt.length;Vt++){const Wt=Pt[Vt];lt.__webglColorRenderbuffer[Vt]=d.createRenderbuffer(),d.bindRenderbuffer(d.RENDERBUFFER,lt.__webglColorRenderbuffer[Vt]);const ue=S.convert(Wt.format,Wt.colorSpace),Gt=S.convert(Wt.type),zt=m(Wt.internalFormat,ue,Gt,Wt.colorSpace,it.isXRRenderTarget===!0),Yt=vt(it);d.renderbufferStorageMultisample(d.RENDERBUFFER,Yt,zt,it.width,it.height),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0+Vt,d.RENDERBUFFER,lt.__webglColorRenderbuffer[Vt])}d.bindRenderbuffer(d.RENDERBUFFER,null),it.depthBuffer&&(lt.__webglDepthRenderbuffer=d.createRenderbuffer(),V(lt.__webglDepthRenderbuffer,it,!0)),i.bindFramebuffer(d.FRAMEBUFFER,null)}}if(wt){i.bindTexture(d.TEXTURE_CUBE_MAP,pt.__webglTexture),H(d.TEXTURE_CUBE_MAP,Z);for(let Vt=0;Vt<6;Vt++)if(Z.mipmaps&&Z.mipmaps.length>0)for(let Wt=0;Wt<Z.mipmaps.length;Wt++)W(lt.__webglFramebuffer[Vt][Wt],it,Z,d.COLOR_ATTACHMENT0,d.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,Wt);else W(lt.__webglFramebuffer[Vt],it,Z,d.COLOR_ATTACHMENT0,d.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0);c(Z)&&l(d.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(jt){for(let Vt=0,Wt=Pt.length;Vt<Wt;Vt++){const ue=Pt[Vt],Gt=n.get(ue);i.bindTexture(d.TEXTURE_2D,Gt.__webglTexture),H(d.TEXTURE_2D,ue),W(lt.__webglFramebuffer,it,ue,d.COLOR_ATTACHMENT0+Vt,d.TEXTURE_2D,0),c(ue)&&l(d.TEXTURE_2D)}i.unbindTexture()}else{let Vt=d.TEXTURE_2D;if((it.isWebGL3DRenderTarget||it.isWebGLArrayRenderTarget)&&(Vt=it.isWebGL3DRenderTarget?d.TEXTURE_3D:d.TEXTURE_2D_ARRAY),i.bindTexture(Vt,pt.__webglTexture),H(Vt,Z),Z.mipmaps&&Z.mipmaps.length>0)for(let Wt=0;Wt<Z.mipmaps.length;Wt++)W(lt.__webglFramebuffer[Wt],it,Z,d.COLOR_ATTACHMENT0,Vt,Wt);else W(lt.__webglFramebuffer,it,Z,d.COLOR_ATTACHMENT0,Vt,0);c(Z)&&l(Vt),i.unbindTexture()}it.depthBuffer&&j(it)}function et(it){const Z=it.textures;for(let lt=0,pt=Z.length;lt<pt;lt++){const Pt=Z[lt];if(c(Pt)){const wt=p(it),jt=n.get(Pt).__webglTexture;i.bindTexture(wt,jt),l(wt),i.unbindTexture()}}}const at=[],q=[];function ft(it){if(it.samples>0){if(Tt(it)===!1){const Z=it.textures,lt=it.width,pt=it.height;let Pt=d.COLOR_BUFFER_BIT;const wt=it.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT,jt=n.get(it),Vt=Z.length>1;if(Vt)for(let Wt=0;Wt<Z.length;Wt++)i.bindFramebuffer(d.FRAMEBUFFER,jt.__webglMultisampledFramebuffer),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0+Wt,d.RENDERBUFFER,null),i.bindFramebuffer(d.FRAMEBUFFER,jt.__webglFramebuffer),d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.COLOR_ATTACHMENT0+Wt,d.TEXTURE_2D,null,0);i.bindFramebuffer(d.READ_FRAMEBUFFER,jt.__webglMultisampledFramebuffer),i.bindFramebuffer(d.DRAW_FRAMEBUFFER,jt.__webglFramebuffer);for(let Wt=0;Wt<Z.length;Wt++){if(it.resolveDepthBuffer&&(it.depthBuffer&&(Pt|=d.DEPTH_BUFFER_BIT),it.stencilBuffer&&it.resolveStencilBuffer&&(Pt|=d.STENCIL_BUFFER_BIT)),Vt){d.framebufferRenderbuffer(d.READ_FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,jt.__webglColorRenderbuffer[Wt]);const ue=n.get(Z[Wt]).__webglTexture;d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,ue,0)}d.blitFramebuffer(0,0,lt,pt,0,0,lt,pt,Pt,d.NEAREST),e===!0&&(at.length=0,q.length=0,at.push(d.COLOR_ATTACHMENT0+Wt),it.depthBuffer&&it.resolveDepthBuffer===!1&&(at.push(wt),q.push(wt),d.invalidateFramebuffer(d.DRAW_FRAMEBUFFER,q)),d.invalidateFramebuffer(d.READ_FRAMEBUFFER,at))}if(i.bindFramebuffer(d.READ_FRAMEBUFFER,null),i.bindFramebuffer(d.DRAW_FRAMEBUFFER,null),Vt)for(let Wt=0;Wt<Z.length;Wt++){i.bindFramebuffer(d.FRAMEBUFFER,jt.__webglMultisampledFramebuffer),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0+Wt,d.RENDERBUFFER,jt.__webglColorRenderbuffer[Wt]);const ue=n.get(Z[Wt]).__webglTexture;i.bindFramebuffer(d.FRAMEBUFFER,jt.__webglFramebuffer),d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.COLOR_ATTACHMENT0+Wt,d.TEXTURE_2D,ue,0)}i.bindFramebuffer(d.DRAW_FRAMEBUFFER,jt.__webglMultisampledFramebuffer)}else if(it.depthBuffer&&it.resolveDepthBuffer===!1&&e){const Z=it.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT;d.invalidateFramebuffer(d.DRAW_FRAMEBUFFER,[Z])}}}function vt(it){return Math.min(x.maxSamples,it.samples)}function Tt(it){const Z=n.get(it);return it.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function ct(it){const Z=s.render.frame;g.get(it)!==Z&&(g.set(it,Z),it.update())}function Ut(it,Z){const lt=it.colorSpace,pt=it.format,Pt=it.type;return it.isCompressedTexture===!0||it.isVideoTexture===!0||lt!==xf&&lt!==Lo&&(hi.getTransfer(lt)===Ei?(pt!==br||Pt!==to)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",lt)),Z}function yt(it){return typeof HTMLImageElement<"u"&&it instanceof HTMLImageElement?(a.width=it.naturalWidth||it.width,a.height=it.naturalHeight||it.height):typeof VideoFrame<"u"&&it instanceof VideoFrame?(a.width=it.displayWidth,a.height=it.displayHeight):(a.width=it.width,a.height=it.height),a}this.allocateTextureUnit=b,this.resetTextureUnits=P,this.setTexture2D=I,this.setTexture2DArray=L,this.setTexture3D=D,this.setTextureCube=O,this.rebindTextures=k,this.setupRenderTarget=Q,this.updateRenderTargetMipmap=et,this.updateMultisampleRenderTarget=ft,this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=W,this.useMultisampledRTT=Tt}function a8(d,t){function i(n,x=Lo){let S;const s=hi.getTransfer(x);if(n===to)return d.UNSIGNED_BYTE;if(n===L1)return d.UNSIGNED_SHORT_4_4_4_4;if(n===F1)return d.UNSIGNED_SHORT_5_5_5_1;if(n===oM)return d.UNSIGNED_INT_5_9_9_9_REV;if(n===rM)return d.BYTE;if(n===aM)return d.SHORT;if(n===Pd)return d.UNSIGNED_SHORT;if(n===I1)return d.INT;if(n===Ch)return d.UNSIGNED_INT;if(n===Ha)return d.FLOAT;if(n===op)return d.HALF_FLOAT;if(n===lM)return d.ALPHA;if(n===hM)return d.RGB;if(n===br)return d.RGBA;if(n===uM)return d.LUMINANCE;if(n===fM)return d.LUMINANCE_ALPHA;if(n===Wu)return d.DEPTH_COMPONENT;if(n===gf)return d.DEPTH_STENCIL;if(n===cM)return d.RED;if(n===D1)return d.RED_INTEGER;if(n===dM)return d.RG;if(n===O1)return d.RG_INTEGER;if(n===N1)return d.RGBA_INTEGER;if(n===Ov||n===Nv||n===Bv||n===Uv)if(s===Ei)if(S=t.get("WEBGL_compressed_texture_s3tc_srgb"),S!==null){if(n===Ov)return S.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Nv)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Bv)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Uv)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(S=t.get("WEBGL_compressed_texture_s3tc"),S!==null){if(n===Ov)return S.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Nv)return S.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Bv)return S.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Uv)return S.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Yx||n===kx||n===$x||n===Kx)if(S=t.get("WEBGL_compressed_texture_pvrtc"),S!==null){if(n===Yx)return S.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===kx)return S.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===$x)return S.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Kx)return S.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===jx||n===Zx||n===Jx)if(S=t.get("WEBGL_compressed_texture_etc"),S!==null){if(n===jx||n===Zx)return s===Ei?S.COMPRESSED_SRGB8_ETC2:S.COMPRESSED_RGB8_ETC2;if(n===Jx)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:S.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Qx||n===qx||n===ty||n===ey||n===iy||n===ny||n===sy||n===ry||n===ay||n===oy||n===ly||n===hy||n===uy||n===fy)if(S=t.get("WEBGL_compressed_texture_astc"),S!==null){if(n===Qx)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:S.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===qx)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:S.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===ty)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:S.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ey)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:S.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===iy)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:S.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ny)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:S.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===sy)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:S.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ry)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:S.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ay)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:S.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===oy)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:S.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ly)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:S.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===hy)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:S.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===uy)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:S.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===fy)return s===Ei?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:S.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Vv||n===cy||n===dy)if(S=t.get("EXT_texture_compression_bptc"),S!==null){if(n===Vv)return s===Ei?S.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:S.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===cy)return S.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===dy)return S.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===pM||n===py||n===vy||n===my)if(S=t.get("EXT_texture_compression_rgtc"),S!==null){if(n===Vv)return S.COMPRESSED_RED_RGTC1_EXT;if(n===py)return S.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===vy)return S.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===my)return S.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===mf?d.UNSIGNED_INT_24_8:d[n]!==void 0?d[n]:null}return{convert:i}}const o8=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,l8=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class h8{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,i,n){if(this.texture===null){const x=new xs,S=t.properties.get(x);S.__webglTexture=i.texture,(i.depthNear!==n.depthNear||i.depthFar!==n.depthFar)&&(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=x}}getMesh(t){if(this.texture!==null&&this.mesh===null){const i=t.cameras[0].viewport,n=new sl({vertexShader:o8,fragmentShader:l8,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new ps(new ag(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class u8 extends jf{constructor(t,i){super();const n=this;let x=null,S=1,s=null,T="local-floor",e=1,a=null,g=null,f=null,o=null,u=null,r=null;const h=new h8,c=i.getContextAttributes();let l=null,p=null;const m=[],v=[],y=new ni;let E=null;const C=new Ls;C.viewport=new Si;const w=new Ls;w.viewport=new Si;const A=[C,w],M=new F5;let R=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let N=m[G];return N===void 0&&(N=new y0,m[G]=N),N.getTargetRaySpace()},this.getControllerGrip=function(G){let N=m[G];return N===void 0&&(N=new y0,m[G]=N),N.getGripSpace()},this.getHand=function(G){let N=m[G];return N===void 0&&(N=new y0,m[G]=N),N.getHandSpace()};function b(G){const N=v.indexOf(G.inputSource);if(N===-1)return;const W=m[N];W!==void 0&&(W.update(G.inputSource,G.frame,a||s),W.dispatchEvent({type:G.type,data:G.inputSource}))}function F(){x.removeEventListener("select",b),x.removeEventListener("selectstart",b),x.removeEventListener("selectend",b),x.removeEventListener("squeeze",b),x.removeEventListener("squeezestart",b),x.removeEventListener("squeezeend",b),x.removeEventListener("end",F),x.removeEventListener("inputsourceschange",I);for(let G=0;G<m.length;G++){const N=v[G];N!==null&&(v[G]=null,m[G].disconnect(N))}R=null,P=null,h.reset(),t.setRenderTarget(l),u=null,o=null,f=null,x=null,p=null,U.stop(),n.isPresenting=!1,t.setPixelRatio(E),t.setSize(y.width,y.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){S=G,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){T=G,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||s},this.setReferenceSpace=function(G){a=G},this.getBaseLayer=function(){return o!==null?o:u},this.getBinding=function(){return f},this.getFrame=function(){return r},this.getSession=function(){return x},this.setSession=async function(G){if(x=G,x!==null){if(l=t.getRenderTarget(),x.addEventListener("select",b),x.addEventListener("selectstart",b),x.addEventListener("selectend",b),x.addEventListener("squeeze",b),x.addEventListener("squeezestart",b),x.addEventListener("squeezeend",b),x.addEventListener("end",F),x.addEventListener("inputsourceschange",I),c.xrCompatible!==!0&&await i.makeXRCompatible(),E=t.getPixelRatio(),t.getSize(y),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let W=null,V=null,$=null;c.depth&&($=c.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,W=c.stencil?gf:Wu,V=c.stencil?mf:Ch);const j={colorFormat:i.RGBA8,depthFormat:$,scaleFactor:S};f=new XRWebGLBinding(x,i),o=f.createProjectionLayer(j),x.updateRenderState({layers:[o]}),t.setPixelRatio(1),t.setSize(o.textureWidth,o.textureHeight,!1),p=new Ah(o.textureWidth,o.textureHeight,{format:br,type:to,depthTexture:new PM(o.textureWidth,o.textureHeight,V,void 0,void 0,void 0,void 0,void 0,void 0,W),stencilBuffer:c.stencil,colorSpace:t.outputColorSpace,samples:c.antialias?4:0,resolveDepthBuffer:o.ignoreDepthValues===!1})}else{const W={antialias:c.antialias,alpha:!0,depth:c.depth,stencil:c.stencil,framebufferScaleFactor:S};u=new XRWebGLLayer(x,i,W),x.updateRenderState({baseLayer:u}),t.setPixelRatio(1),t.setSize(u.framebufferWidth,u.framebufferHeight,!1),p=new Ah(u.framebufferWidth,u.framebufferHeight,{format:br,type:to,colorSpace:t.outputColorSpace,stencilBuffer:c.stencil})}p.isXRRenderTarget=!0,this.setFoveation(e),a=null,s=await x.requestReferenceSpace(T),U.setContext(x),U.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(x!==null)return x.environmentBlendMode},this.getDepthTexture=function(){return h.getDepthTexture()};function I(G){for(let N=0;N<G.removed.length;N++){const W=G.removed[N],V=v.indexOf(W);V>=0&&(v[V]=null,m[V].disconnect(W))}for(let N=0;N<G.added.length;N++){const W=G.added[N];let V=v.indexOf(W);if(V===-1){for(let j=0;j<m.length;j++)if(j>=v.length){v.push(W),V=j;break}else if(v[j]===null){v[j]=W,V=j;break}if(V===-1)break}const $=m[V];$&&$.connect(W)}}const L=new Ct,D=new Ct;function O(G,N,W){L.setFromMatrixPosition(N.matrixWorld),D.setFromMatrixPosition(W.matrixWorld);const V=L.distanceTo(D),$=N.projectionMatrix.elements,j=W.projectionMatrix.elements,k=$[14]/($[10]-1),Q=$[14]/($[10]+1),et=($[9]+1)/$[5],at=($[9]-1)/$[5],q=($[8]-1)/$[0],ft=(j[8]+1)/j[0],vt=k*q,Tt=k*ft,ct=V/(-q+ft),Ut=ct*-q;if(N.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(Ut),G.translateZ(ct),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert(),$[10]===-1)G.projectionMatrix.copy(N.projectionMatrix),G.projectionMatrixInverse.copy(N.projectionMatrixInverse);else{const yt=k+ct,it=Q+ct,Z=vt-Ut,lt=Tt+(V-Ut),pt=et*Q/it*yt,Pt=at*Q/it*yt;G.projectionMatrix.makePerspective(Z,lt,pt,Pt,yt,it),G.projectionMatrixInverse.copy(G.projectionMatrix).invert()}}function z(G,N){N===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(N.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(x===null)return;let N=G.near,W=G.far;h.texture!==null&&(h.depthNear>0&&(N=h.depthNear),h.depthFar>0&&(W=h.depthFar)),M.near=w.near=C.near=N,M.far=w.far=C.far=W,(R!==M.near||P!==M.far)&&(x.updateRenderState({depthNear:M.near,depthFar:M.far}),R=M.near,P=M.far),C.layers.mask=G.layers.mask|2,w.layers.mask=G.layers.mask|4,M.layers.mask=C.layers.mask|w.layers.mask;const V=G.parent,$=M.cameras;z(M,V);for(let j=0;j<$.length;j++)z($[j],V);$.length===2?O(M,C,w):M.projectionMatrix.copy(C.projectionMatrix),_(G,M,V)};function _(G,N,W){W===null?G.matrix.copy(N.matrixWorld):(G.matrix.copy(W.matrixWorld),G.matrix.invert(),G.matrix.multiply(N.matrixWorld)),G.matrix.decompose(G.position,G.quaternion,G.scale),G.updateMatrixWorld(!0),G.projectionMatrix.copy(N.projectionMatrix),G.projectionMatrixInverse.copy(N.projectionMatrixInverse),G.isPerspectiveCamera&&(G.fov=gy*2*Math.atan(1/G.projectionMatrix.elements[5]),G.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(o===null&&u===null))return e},this.setFoveation=function(G){e=G,o!==null&&(o.fixedFoveation=G),u!==null&&u.fixedFoveation!==void 0&&(u.fixedFoveation=G)},this.hasDepthSensing=function(){return h.texture!==null},this.getDepthSensingMesh=function(){return h.getMesh(M)};let X=null;function H(G,N){if(g=N.getViewerPose(a||s),r=N,g!==null){const W=g.views;u!==null&&(t.setRenderTargetFramebuffer(p,u.framebuffer),t.setRenderTarget(p));let V=!1;W.length!==M.cameras.length&&(M.cameras.length=0,V=!0);for(let k=0;k<W.length;k++){const Q=W[k];let et=null;if(u!==null)et=u.getViewport(Q);else{const q=f.getViewSubImage(o,Q);et=q.viewport,k===0&&(t.setRenderTargetTextures(p,q.colorTexture,o.ignoreDepthValues?void 0:q.depthStencilTexture),t.setRenderTarget(p))}let at=A[k];at===void 0&&(at=new Ls,at.layers.enable(k),at.viewport=new Si,A[k]=at),at.matrix.fromArray(Q.transform.matrix),at.matrix.decompose(at.position,at.quaternion,at.scale),at.projectionMatrix.fromArray(Q.projectionMatrix),at.projectionMatrixInverse.copy(at.projectionMatrix).invert(),at.viewport.set(et.x,et.y,et.width,et.height),k===0&&(M.matrix.copy(at.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),V===!0&&M.cameras.push(at)}const $=x.enabledFeatures;if($&&$.includes("depth-sensing")&&x.depthUsage=="gpu-optimized"&&f){const k=f.getDepthInformation(W[0]);k&&k.isValid&&k.texture&&h.init(t,k,x.renderState)}}for(let W=0;W<m.length;W++){const V=v[W],$=m[W];V!==null&&$!==void 0&&$.update(V,N,a||s)}X&&X(G,N),N.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:N}),r=null}const U=new LM;U.setAnimationLoop(H),this.setAnimationLoop=function(G){X=G},this.dispose=function(){}}}const Fl=new da,f8=new Yi;function c8(d,t){function i(c,l){c.matrixAutoUpdate===!0&&c.updateMatrix(),l.value.copy(c.matrix)}function n(c,l){l.color.getRGB(c.fogColor.value,wM(d)),l.isFog?(c.fogNear.value=l.near,c.fogFar.value=l.far):l.isFogExp2&&(c.fogDensity.value=l.density)}function x(c,l,p,m,v){l.isMeshBasicMaterial||l.isMeshLambertMaterial?S(c,l):l.isMeshToonMaterial?(S(c,l),f(c,l)):l.isMeshPhongMaterial?(S(c,l),g(c,l)):l.isMeshStandardMaterial?(S(c,l),o(c,l),l.isMeshPhysicalMaterial&&u(c,l,v)):l.isMeshMatcapMaterial?(S(c,l),r(c,l)):l.isMeshDepthMaterial?S(c,l):l.isMeshDistanceMaterial?(S(c,l),h(c,l)):l.isMeshNormalMaterial?S(c,l):l.isLineBasicMaterial?(s(c,l),l.isLineDashedMaterial&&T(c,l)):l.isPointsMaterial?e(c,l,p,m):l.isSpriteMaterial?a(c,l):l.isShadowMaterial?(c.color.value.copy(l.color),c.opacity.value=l.opacity):l.isShaderMaterial&&(l.uniformsNeedUpdate=!1)}function S(c,l){c.opacity.value=l.opacity,l.color&&c.diffuse.value.copy(l.color),l.emissive&&c.emissive.value.copy(l.emissive).multiplyScalar(l.emissiveIntensity),l.map&&(c.map.value=l.map,i(l.map,c.mapTransform)),l.alphaMap&&(c.alphaMap.value=l.alphaMap,i(l.alphaMap,c.alphaMapTransform)),l.bumpMap&&(c.bumpMap.value=l.bumpMap,i(l.bumpMap,c.bumpMapTransform),c.bumpScale.value=l.bumpScale,l.side===gs&&(c.bumpScale.value*=-1)),l.normalMap&&(c.normalMap.value=l.normalMap,i(l.normalMap,c.normalMapTransform),c.normalScale.value.copy(l.normalScale),l.side===gs&&c.normalScale.value.negate()),l.displacementMap&&(c.displacementMap.value=l.displacementMap,i(l.displacementMap,c.displacementMapTransform),c.displacementScale.value=l.displacementScale,c.displacementBias.value=l.displacementBias),l.emissiveMap&&(c.emissiveMap.value=l.emissiveMap,i(l.emissiveMap,c.emissiveMapTransform)),l.specularMap&&(c.specularMap.value=l.specularMap,i(l.specularMap,c.specularMapTransform)),l.alphaTest>0&&(c.alphaTest.value=l.alphaTest);const p=t.get(l),m=p.envMap,v=p.envMapRotation;m&&(c.envMap.value=m,Fl.copy(v),Fl.x*=-1,Fl.y*=-1,Fl.z*=-1,m.isCubeTexture&&m.isRenderTargetTexture===!1&&(Fl.y*=-1,Fl.z*=-1),c.envMapRotation.value.setFromMatrix4(f8.makeRotationFromEuler(Fl)),c.flipEnvMap.value=m.isCubeTexture&&m.isRenderTargetTexture===!1?-1:1,c.reflectivity.value=l.reflectivity,c.ior.value=l.ior,c.refractionRatio.value=l.refractionRatio),l.lightMap&&(c.lightMap.value=l.lightMap,c.lightMapIntensity.value=l.lightMapIntensity,i(l.lightMap,c.lightMapTransform)),l.aoMap&&(c.aoMap.value=l.aoMap,c.aoMapIntensity.value=l.aoMapIntensity,i(l.aoMap,c.aoMapTransform))}function s(c,l){c.diffuse.value.copy(l.color),c.opacity.value=l.opacity,l.map&&(c.map.value=l.map,i(l.map,c.mapTransform))}function T(c,l){c.dashSize.value=l.dashSize,c.totalSize.value=l.dashSize+l.gapSize,c.scale.value=l.scale}function e(c,l,p,m){c.diffuse.value.copy(l.color),c.opacity.value=l.opacity,c.size.value=l.size*p,c.scale.value=m*.5,l.map&&(c.map.value=l.map,i(l.map,c.uvTransform)),l.alphaMap&&(c.alphaMap.value=l.alphaMap,i(l.alphaMap,c.alphaMapTransform)),l.alphaTest>0&&(c.alphaTest.value=l.alphaTest)}function a(c,l){c.diffuse.value.copy(l.color),c.opacity.value=l.opacity,c.rotation.value=l.rotation,l.map&&(c.map.value=l.map,i(l.map,c.mapTransform)),l.alphaMap&&(c.alphaMap.value=l.alphaMap,i(l.alphaMap,c.alphaMapTransform)),l.alphaTest>0&&(c.alphaTest.value=l.alphaTest)}function g(c,l){c.specular.value.copy(l.specular),c.shininess.value=Math.max(l.shininess,1e-4)}function f(c,l){l.gradientMap&&(c.gradientMap.value=l.gradientMap)}function o(c,l){c.metalness.value=l.metalness,l.metalnessMap&&(c.metalnessMap.value=l.metalnessMap,i(l.metalnessMap,c.metalnessMapTransform)),c.roughness.value=l.roughness,l.roughnessMap&&(c.roughnessMap.value=l.roughnessMap,i(l.roughnessMap,c.roughnessMapTransform)),l.envMap&&(c.envMapIntensity.value=l.envMapIntensity)}function u(c,l,p){c.ior.value=l.ior,l.sheen>0&&(c.sheenColor.value.copy(l.sheenColor).multiplyScalar(l.sheen),c.sheenRoughness.value=l.sheenRoughness,l.sheenColorMap&&(c.sheenColorMap.value=l.sheenColorMap,i(l.sheenColorMap,c.sheenColorMapTransform)),l.sheenRoughnessMap&&(c.sheenRoughnessMap.value=l.sheenRoughnessMap,i(l.sheenRoughnessMap,c.sheenRoughnessMapTransform))),l.clearcoat>0&&(c.clearcoat.value=l.clearcoat,c.clearcoatRoughness.value=l.clearcoatRoughness,l.clearcoatMap&&(c.clearcoatMap.value=l.clearcoatMap,i(l.clearcoatMap,c.clearcoatMapTransform)),l.clearcoatRoughnessMap&&(c.clearcoatRoughnessMap.value=l.clearcoatRoughnessMap,i(l.clearcoatRoughnessMap,c.clearcoatRoughnessMapTransform)),l.clearcoatNormalMap&&(c.clearcoatNormalMap.value=l.clearcoatNormalMap,i(l.clearcoatNormalMap,c.clearcoatNormalMapTransform),c.clearcoatNormalScale.value.copy(l.clearcoatNormalScale),l.side===gs&&c.clearcoatNormalScale.value.negate())),l.dispersion>0&&(c.dispersion.value=l.dispersion),l.iridescence>0&&(c.iridescence.value=l.iridescence,c.iridescenceIOR.value=l.iridescenceIOR,c.iridescenceThicknessMinimum.value=l.iridescenceThicknessRange[0],c.iridescenceThicknessMaximum.value=l.iridescenceThicknessRange[1],l.iridescenceMap&&(c.iridescenceMap.value=l.iridescenceMap,i(l.iridescenceMap,c.iridescenceMapTransform)),l.iridescenceThicknessMap&&(c.iridescenceThicknessMap.value=l.iridescenceThicknessMap,i(l.iridescenceThicknessMap,c.iridescenceThicknessMapTransform))),l.transmission>0&&(c.transmission.value=l.transmission,c.transmissionSamplerMap.value=p.texture,c.transmissionSamplerSize.value.set(p.width,p.height),l.transmissionMap&&(c.transmissionMap.value=l.transmissionMap,i(l.transmissionMap,c.transmissionMapTransform)),c.thickness.value=l.thickness,l.thicknessMap&&(c.thicknessMap.value=l.thicknessMap,i(l.thicknessMap,c.thicknessMapTransform)),c.attenuationDistance.value=l.attenuationDistance,c.attenuationColor.value.copy(l.attenuationColor)),l.anisotropy>0&&(c.anisotropyVector.value.set(l.anisotropy*Math.cos(l.anisotropyRotation),l.anisotropy*Math.sin(l.anisotropyRotation)),l.anisotropyMap&&(c.anisotropyMap.value=l.anisotropyMap,i(l.anisotropyMap,c.anisotropyMapTransform))),c.specularIntensity.value=l.specularIntensity,c.specularColor.value.copy(l.specularColor),l.specularColorMap&&(c.specularColorMap.value=l.specularColorMap,i(l.specularColorMap,c.specularColorMapTransform)),l.specularIntensityMap&&(c.specularIntensityMap.value=l.specularIntensityMap,i(l.specularIntensityMap,c.specularIntensityMapTransform))}function r(c,l){l.matcap&&(c.matcap.value=l.matcap)}function h(c,l){const p=t.get(l).light;c.referencePosition.value.setFromMatrixPosition(p.matrixWorld),c.nearDistance.value=p.shadow.camera.near,c.farDistance.value=p.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:x}}function d8(d,t,i,n){let x={},S={},s=[];const T=d.getParameter(d.MAX_UNIFORM_BUFFER_BINDINGS);function e(p,m){const v=m.program;n.uniformBlockBinding(p,v)}function a(p,m){let v=x[p.id];v===void 0&&(r(p),v=g(p),x[p.id]=v,p.addEventListener("dispose",c));const y=m.program;n.updateUBOMapping(p,y);const E=t.render.frame;S[p.id]!==E&&(o(p),S[p.id]=E)}function g(p){const m=f();p.__bindingPointIndex=m;const v=d.createBuffer(),y=p.__size,E=p.usage;return d.bindBuffer(d.UNIFORM_BUFFER,v),d.bufferData(d.UNIFORM_BUFFER,y,E),d.bindBuffer(d.UNIFORM_BUFFER,null),d.bindBufferBase(d.UNIFORM_BUFFER,m,v),v}function f(){for(let p=0;p<T;p++)if(s.indexOf(p)===-1)return s.push(p),p;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function o(p){const m=x[p.id],v=p.uniforms,y=p.__cache;d.bindBuffer(d.UNIFORM_BUFFER,m);for(let E=0,C=v.length;E<C;E++){const w=Array.isArray(v[E])?v[E]:[v[E]];for(let A=0,M=w.length;A<M;A++){const R=w[A];if(u(R,E,A,y)===!0){const P=R.__offset,b=Array.isArray(R.value)?R.value:[R.value];let F=0;for(let I=0;I<b.length;I++){const L=b[I],D=h(L);typeof L=="number"||typeof L=="boolean"?(R.__data[0]=L,d.bufferSubData(d.UNIFORM_BUFFER,P+F,R.__data)):L.isMatrix3?(R.__data[0]=L.elements[0],R.__data[1]=L.elements[1],R.__data[2]=L.elements[2],R.__data[3]=0,R.__data[4]=L.elements[3],R.__data[5]=L.elements[4],R.__data[6]=L.elements[5],R.__data[7]=0,R.__data[8]=L.elements[6],R.__data[9]=L.elements[7],R.__data[10]=L.elements[8],R.__data[11]=0):(L.toArray(R.__data,F),F+=D.storage/Float32Array.BYTES_PER_ELEMENT)}d.bufferSubData(d.UNIFORM_BUFFER,P,R.__data)}}}d.bindBuffer(d.UNIFORM_BUFFER,null)}function u(p,m,v,y){const E=p.value,C=m+"_"+v;if(y[C]===void 0)return typeof E=="number"||typeof E=="boolean"?y[C]=E:y[C]=E.clone(),!0;{const w=y[C];if(typeof E=="number"||typeof E=="boolean"){if(w!==E)return y[C]=E,!0}else if(w.equals(E)===!1)return w.copy(E),!0}return!1}function r(p){const m=p.uniforms;let v=0;const y=16;for(let C=0,w=m.length;C<w;C++){const A=Array.isArray(m[C])?m[C]:[m[C]];for(let M=0,R=A.length;M<R;M++){const P=A[M],b=Array.isArray(P.value)?P.value:[P.value];for(let F=0,I=b.length;F<I;F++){const L=b[F],D=h(L),O=v%y,z=O%D.boundary,_=O+z;v+=z,_!==0&&y-_<D.storage&&(v+=y-_),P.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=v,v+=D.storage}}}const E=v%y;return E>0&&(v+=y-E),p.__size=v,p.__cache={},this}function h(p){const m={boundary:0,storage:0};return typeof p=="number"||typeof p=="boolean"?(m.boundary=4,m.storage=4):p.isVector2?(m.boundary=8,m.storage=8):p.isVector3||p.isColor?(m.boundary=16,m.storage=12):p.isVector4?(m.boundary=16,m.storage=16):p.isMatrix3?(m.boundary=48,m.storage=48):p.isMatrix4?(m.boundary=64,m.storage=64):p.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",p),m}function c(p){const m=p.target;m.removeEventListener("dispose",c);const v=s.indexOf(m.__bindingPointIndex);s.splice(v,1),d.deleteBuffer(x[m.id]),delete x[m.id],delete S[m.id]}function l(){for(const p in x)d.deleteBuffer(x[p]);s=[],x={},S={}}return{bind:e,update:a,dispose:l}}class p8{constructor(t={}){const{canvas:i=$D(),context:n=null,depth:x=!0,stencil:S=!1,alpha:s=!1,antialias:T=!1,premultipliedAlpha:e=!0,preserveDrawingBuffer:a=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:o=!1}=t;this.isWebGLRenderer=!0;let u;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");u=n.getContextAttributes().alpha}else u=s;const r=new Uint32Array(4),h=new Int32Array(4);let c=null,l=null;const p=[],m=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=nr,this.toneMapping=$o,this.toneMappingExposure=1;const v=this;let y=!1,E=0,C=0,w=null,A=-1,M=null;const R=new Si,P=new Si;let b=null;const F=new ci(0);let I=0,L=i.width,D=i.height,O=1,z=null,_=null;const X=new Si(0,0,L,D),H=new Si(0,0,L,D);let U=!1;const G=new U1;let N=!1,W=!1;this.transmissionResolutionScale=1;const V=new Yi,$=new Yi,j=new Ct,k=new Si,Q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let et=!1;function at(){return w===null?O:1}let q=n;function ft(nt,gt){return i.getContext(nt,gt)}try{const nt={alpha:!0,depth:x,stencil:S,antialias:T,premultipliedAlpha:e,preserveDrawingBuffer:a,powerPreference:g,failIfMajorPerformanceCaveat:f};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${b1}`),i.addEventListener("webglcontextlost",Ot,!1),i.addEventListener("webglcontextrestored",ae,!1),i.addEventListener("webglcontextcreationerror",ne,!1),q===null){const gt="webgl2";if(q=ft(gt,nt),q===null)throw ft(gt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(nt){throw console.error("THREE.WebGLRenderer: "+nt.message),nt}let vt,Tt,ct,Ut,yt,it,Z,lt,pt,Pt,wt,jt,Vt,Wt,ue,Gt,zt,Yt,bt,Kt,ge,ce,Oe,dt;function Jt(){vt=new A9(q),vt.init(),ce=new a8(q,vt),Tt=new x9(q,vt,t,ce),ct=new s8(q,vt),Tt.reverseDepthBuffer&&o&&ct.buffers.depth.setReversed(!0),Ut=new R9(q),yt=new Y6,it=new r8(q,vt,ct,yt,Tt,ce,Ut),Z=new T9(v),lt=new C9(v),pt=new O5(q),Oe=new m9(q,pt),Pt=new w9(q,pt,Ut,Oe),wt=new b9(q,Pt,pt,Ut),bt=new P9(q,Tt,it),Gt=new y9(yt),jt=new X6(v,Z,lt,vt,Tt,Oe,Gt),Vt=new c8(v,yt),Wt=new $6,ue=new q6(vt),Yt=new v9(v,Z,lt,ct,wt,u,e),zt=new i8(v,wt,Tt),dt=new d8(q,Ut,Tt,ct),Kt=new g9(q,vt,Ut),ge=new M9(q,vt,Ut),Ut.programs=jt.programs,v.capabilities=Tt,v.extensions=vt,v.properties=yt,v.renderLists=Wt,v.shadowMap=zt,v.state=ct,v.info=Ut}Jt();const Dt=new u8(v,q);this.xr=Dt,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const nt=vt.get("WEBGL_lose_context");nt&&nt.loseContext()},this.forceContextRestore=function(){const nt=vt.get("WEBGL_lose_context");nt&&nt.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(nt){nt!==void 0&&(O=nt,this.setSize(L,D,!1))},this.getSize=function(nt){return nt.set(L,D)},this.setSize=function(nt,gt,Rt=!0){if(Dt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=nt,D=gt,i.width=Math.floor(nt*O),i.height=Math.floor(gt*O),Rt===!0&&(i.style.width=nt+"px",i.style.height=gt+"px"),this.setViewport(0,0,nt,gt)},this.getDrawingBufferSize=function(nt){return nt.set(L*O,D*O).floor()},this.setDrawingBufferSize=function(nt,gt,Rt){L=nt,D=gt,O=Rt,i.width=Math.floor(nt*Rt),i.height=Math.floor(gt*Rt),this.setViewport(0,0,nt,gt)},this.getCurrentViewport=function(nt){return nt.copy(R)},this.getViewport=function(nt){return nt.copy(X)},this.setViewport=function(nt,gt,Rt,It){nt.isVector4?X.set(nt.x,nt.y,nt.z,nt.w):X.set(nt,gt,Rt,It),ct.viewport(R.copy(X).multiplyScalar(O).round())},this.getScissor=function(nt){return nt.copy(H)},this.setScissor=function(nt,gt,Rt,It){nt.isVector4?H.set(nt.x,nt.y,nt.z,nt.w):H.set(nt,gt,Rt,It),ct.scissor(P.copy(H).multiplyScalar(O).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(nt){ct.setScissorTest(U=nt)},this.setOpaqueSort=function(nt){z=nt},this.setTransparentSort=function(nt){_=nt},this.getClearColor=function(nt){return nt.copy(Yt.getClearColor())},this.setClearColor=function(){Yt.setClearColor.apply(Yt,arguments)},this.getClearAlpha=function(){return Yt.getClearAlpha()},this.setClearAlpha=function(){Yt.setClearAlpha.apply(Yt,arguments)},this.clear=function(nt=!0,gt=!0,Rt=!0){let It=0;if(nt){let Et=!1;if(w!==null){const $t=w.texture.format;Et=$t===N1||$t===O1||$t===D1}if(Et){const $t=w.texture.type,se=$t===to||$t===Ch||$t===Pd||$t===mf||$t===L1||$t===F1,le=Yt.getClearColor(),he=Yt.getClearAlpha(),we=le.r,Re=le.g,Ee=le.b;se?(r[0]=we,r[1]=Re,r[2]=Ee,r[3]=he,q.clearBufferuiv(q.COLOR,0,r)):(h[0]=we,h[1]=Re,h[2]=Ee,h[3]=he,q.clearBufferiv(q.COLOR,0,h))}else It|=q.COLOR_BUFFER_BIT}gt&&(It|=q.DEPTH_BUFFER_BIT),Rt&&(It|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(It)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",Ot,!1),i.removeEventListener("webglcontextrestored",ae,!1),i.removeEventListener("webglcontextcreationerror",ne,!1),Yt.dispose(),Wt.dispose(),ue.dispose(),yt.dispose(),Z.dispose(),lt.dispose(),wt.dispose(),Oe.dispose(),dt.dispose(),jt.dispose(),Dt.dispose(),Dt.removeEventListener("sessionstart",Fn),Dt.removeEventListener("sessionend",ts),Ne.stop()};function Ot(nt){nt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function ae(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const nt=Ut.autoReset,gt=zt.enabled,Rt=zt.autoUpdate,It=zt.needsUpdate,Et=zt.type;Jt(),Ut.autoReset=nt,zt.enabled=gt,zt.autoUpdate=Rt,zt.needsUpdate=It,zt.type=Et}function ne(nt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",nt.statusMessage)}function Me(nt){const gt=nt.target;gt.removeEventListener("dispose",Me),Mi(gt)}function Mi(nt){Ui(nt),yt.remove(nt)}function Ui(nt){const gt=yt.get(nt).programs;gt!==void 0&&(gt.forEach(function(Rt){jt.releaseProgram(Rt)}),nt.isShaderMaterial&&jt.releaseShaderCache(nt))}this.renderBufferDirect=function(nt,gt,Rt,It,Et,$t){gt===null&&(gt=Q);const se=Et.isMesh&&Et.matrixWorld.determinant()<0,le=po(nt,gt,Rt,It,Et);ct.setMaterial(It,se);let he=Rt.index,we=1;if(It.wireframe===!0){if(he=Pt.getWireframeAttribute(Rt),he===void 0)return;we=2}const Re=Rt.drawRange,Ee=Rt.attributes.position;let Ge=Re.start*we,si=(Re.start+Re.count)*we;$t!==null&&(Ge=Math.max(Ge,$t.start*we),si=Math.min(si,($t.start+$t.count)*we)),he!==null?(Ge=Math.max(Ge,0),si=Math.min(si,he.count)):Ee!=null&&(Ge=Math.max(Ge,0),si=Math.min(si,Ee.count));const li=si-Ge;if(li<0||li===1/0)return;Oe.setup(Et,It,le,Rt,he);let ti,Ue=Kt;if(he!==null&&(ti=pt.get(he),Ue=ge,Ue.setIndex(ti)),Et.isMesh)It.wireframe===!0?(ct.setLineWidth(It.wireframeLinewidth*at()),Ue.setMode(q.LINES)):Ue.setMode(q.TRIANGLES);else if(Et.isLine){let xe=It.linewidth;xe===void 0&&(xe=1),ct.setLineWidth(xe*at()),Et.isLineSegments?Ue.setMode(q.LINES):Et.isLineLoop?Ue.setMode(q.LINE_LOOP):Ue.setMode(q.LINE_STRIP)}else Et.isPoints?Ue.setMode(q.POINTS):Et.isSprite&&Ue.setMode(q.TRIANGLES);if(Et.isBatchedMesh)if(Et._multiDrawInstances!==null)Ue.renderMultiDrawInstances(Et._multiDrawStarts,Et._multiDrawCounts,Et._multiDrawCount,Et._multiDrawInstances);else if(vt.get("WEBGL_multi_draw"))Ue.renderMultiDraw(Et._multiDrawStarts,Et._multiDrawCounts,Et._multiDrawCount);else{const xe=Et._multiDrawStarts,Di=Et._multiDrawCounts,Te=Et._multiDrawCount,vn=he?pt.get(he).bytesPerElement:1,os=yt.get(It).currentProgram.getUniforms();for(let $i=0;$i<Te;$i++)os.setValue(q,"_gl_DrawID",$i),Ue.render(xe[$i]/vn,Di[$i])}else if(Et.isInstancedMesh)Ue.renderInstances(Ge,li,Et.count);else if(Rt.isInstancedBufferGeometry){const xe=Rt._maxInstanceCount!==void 0?Rt._maxInstanceCount:1/0,Di=Math.min(Rt.instanceCount,xe);Ue.renderInstances(Ge,li,Di)}else Ue.render(Ge,li)};function Xe(nt,gt,Rt){nt.transparent===!0&&nt.side===_a&&nt.forceSinglePass===!1?(nt.side=gs,nt.needsUpdate=!0,ya(nt,gt,Rt),nt.side=qa,nt.needsUpdate=!0,ya(nt,gt,Rt),nt.side=_a):ya(nt,gt,Rt)}this.compile=function(nt,gt,Rt=null){Rt===null&&(Rt=nt),l=ue.get(Rt),l.init(gt),m.push(l),Rt.traverseVisible(function(Et){Et.isLight&&Et.layers.test(gt.layers)&&(l.pushLight(Et),Et.castShadow&&l.pushShadow(Et))}),nt!==Rt&&nt.traverseVisible(function(Et){Et.isLight&&Et.layers.test(gt.layers)&&(l.pushLight(Et),Et.castShadow&&l.pushShadow(Et))}),l.setupLights();const It=new Set;return nt.traverse(function(Et){if(!(Et.isMesh||Et.isPoints||Et.isLine||Et.isSprite))return;const $t=Et.material;if($t)if(Array.isArray($t))for(let se=0;se<$t.length;se++){const le=$t[se];Xe(le,Rt,Et),It.add(le)}else Xe($t,Rt,Et),It.add($t)}),m.pop(),l=null,It},this.compileAsync=function(nt,gt,Rt=null){const It=this.compile(nt,gt,Rt);return new Promise(Et=>{function $t(){if(It.forEach(function(se){yt.get(se).currentProgram.isReady()&&It.delete(se)}),It.size===0){Et(nt);return}setTimeout($t,10)}vt.get("KHR_parallel_shader_compile")!==null?$t():setTimeout($t,10)})};let Ri=null;function ki(nt){Ri&&Ri(nt)}function Fn(){Ne.stop()}function ts(){Ne.start()}const Ne=new LM;Ne.setAnimationLoop(ki),typeof self<"u"&&Ne.setContext(self),this.setAnimationLoop=function(nt){Ri=nt,Dt.setAnimationLoop(nt),nt===null?Ne.stop():Ne.start()},Dt.addEventListener("sessionstart",Fn),Dt.addEventListener("sessionend",ts),this.render=function(nt,gt){if(gt!==void 0&&gt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;if(nt.matrixWorldAutoUpdate===!0&&nt.updateMatrixWorld(),gt.parent===null&&gt.matrixWorldAutoUpdate===!0&&gt.updateMatrixWorld(),Dt.enabled===!0&&Dt.isPresenting===!0&&(Dt.cameraAutoUpdate===!0&&Dt.updateCamera(gt),gt=Dt.getCamera()),nt.isScene===!0&&nt.onBeforeRender(v,nt,gt,w),l=ue.get(nt,m.length),l.init(gt),m.push(l),$.multiplyMatrices(gt.projectionMatrix,gt.matrixWorldInverse),G.setFromProjectionMatrix($),W=this.localClippingEnabled,N=Gt.init(this.clippingPlanes,W),c=Wt.get(nt,p.length),c.init(),p.push(c),Dt.enabled===!0&&Dt.isPresenting===!0){const $t=v.xr.getDepthSensingMesh();$t!==null&&xa($t,gt,-1/0,v.sortObjects)}xa(nt,gt,0,v.sortObjects),c.finish(),v.sortObjects===!0&&c.sort(z,_),et=Dt.enabled===!1||Dt.isPresenting===!1||Dt.hasDepthSensing()===!1,et&&Yt.addToRenderList(c,nt),this.info.render.frame++,N===!0&&Gt.beginShadows();const Rt=l.state.shadowsArray;zt.render(Rt,nt,gt),N===!0&&Gt.endShadows(),this.info.autoReset===!0&&this.info.reset();const It=c.opaque,Et=c.transmissive;if(l.setupLights(),gt.isArrayCamera){const $t=gt.cameras;if(Et.length>0)for(let se=0,le=$t.length;se<le;se++){const he=$t[se];$h(It,Et,nt,he)}et&&Yt.render(nt);for(let se=0,le=$t.length;se<le;se++){const he=$t[se];Gr(c,nt,he,he.viewport)}}else Et.length>0&&$h(It,Et,nt,gt),et&&Yt.render(nt),Gr(c,nt,gt);w!==null&&C===0&&(it.updateMultisampleRenderTarget(w),it.updateRenderTargetMipmap(w)),nt.isScene===!0&&nt.onAfterRender(v,nt,gt),Oe.resetDefaultState(),A=-1,M=null,m.pop(),m.length>0?(l=m[m.length-1],N===!0&&Gt.setGlobalState(v.clippingPlanes,l.state.camera)):l=null,p.pop(),p.length>0?c=p[p.length-1]:c=null};function xa(nt,gt,Rt,It){if(nt.visible===!1)return;if(nt.layers.test(gt.layers)){if(nt.isGroup)Rt=nt.renderOrder;else if(nt.isLOD)nt.autoUpdate===!0&&nt.update(gt);else if(nt.isLight)l.pushLight(nt),nt.castShadow&&l.pushShadow(nt);else if(nt.isSprite){if(!nt.frustumCulled||G.intersectsSprite(nt)){It&&k.setFromMatrixPosition(nt.matrixWorld).applyMatrix4($);const se=wt.update(nt),le=nt.material;le.visible&&c.push(nt,se,le,Rt,k.z,null)}}else if((nt.isMesh||nt.isLine||nt.isPoints)&&(!nt.frustumCulled||G.intersectsObject(nt))){const se=wt.update(nt),le=nt.material;if(It&&(nt.boundingSphere!==void 0?(nt.boundingSphere===null&&nt.computeBoundingSphere(),k.copy(nt.boundingSphere.center)):(se.boundingSphere===null&&se.computeBoundingSphere(),k.copy(se.boundingSphere.center)),k.applyMatrix4(nt.matrixWorld).applyMatrix4($)),Array.isArray(le)){const he=se.groups;for(let we=0,Re=he.length;we<Re;we++){const Ee=he[we],Ge=le[Ee.materialIndex];Ge&&Ge.visible&&c.push(nt,se,Ge,Rt,k.z,Ee)}}else le.visible&&c.push(nt,se,le,Rt,k.z,null)}}const $t=nt.children;for(let se=0,le=$t.length;se<le;se++)xa($t[se],gt,Rt,It)}function Gr(nt,gt,Rt,It){const Et=nt.opaque,$t=nt.transmissive,se=nt.transparent;l.setupLightsView(Rt),N===!0&&Gt.setGlobalState(v.clippingPlanes,Rt),It&&ct.viewport(R.copy(It)),Et.length>0&&es(Et,gt,Rt),$t.length>0&&es($t,gt,Rt),se.length>0&&es(se,gt,Rt),ct.buffers.depth.setTest(!0),ct.buffers.depth.setMask(!0),ct.buffers.color.setMask(!0),ct.setPolygonOffset(!1)}function $h(nt,gt,Rt,It){if((Rt.isScene===!0?Rt.overrideMaterial:null)!==null)return;l.state.transmissionRenderTarget[It.id]===void 0&&(l.state.transmissionRenderTarget[It.id]=new Ah(1,1,{generateMipmaps:!0,type:vt.has("EXT_color_buffer_half_float")||vt.has("EXT_color_buffer_float")?op:to,minFilter:ql,samples:4,stencilBuffer:S,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:hi.workingColorSpace}));const $t=l.state.transmissionRenderTarget[It.id],se=It.viewport||R;$t.setSize(se.z*v.transmissionResolutionScale,se.w*v.transmissionResolutionScale);const le=v.getRenderTarget();v.setRenderTarget($t),v.getClearColor(F),I=v.getClearAlpha(),I<1&&v.setClearColor(16777215,.5),v.clear(),et&&Yt.render(Rt);const he=v.toneMapping;v.toneMapping=$o;const we=It.viewport;if(It.viewport!==void 0&&(It.viewport=void 0),l.setupLightsView(It),N===!0&&Gt.setGlobalState(v.clippingPlanes,It),es(nt,Rt,It),it.updateMultisampleRenderTarget($t),it.updateRenderTargetMipmap($t),vt.has("WEBGL_multisampled_render_to_texture")===!1){let Re=!1;for(let Ee=0,Ge=gt.length;Ee<Ge;Ee++){const si=gt[Ee],li=si.object,ti=si.geometry,Ue=si.material,xe=si.group;if(Ue.side===_a&&li.layers.test(It.layers)){const Di=Ue.side;Ue.side=gs,Ue.needsUpdate=!0,El(li,Rt,It,ti,Ue,xe),Ue.side=Di,Ue.needsUpdate=!0,Re=!0}}Re===!0&&(it.updateMultisampleRenderTarget($t),it.updateRenderTargetMipmap($t))}v.setRenderTarget(le),v.setClearColor(F,I),we!==void 0&&(It.viewport=we),v.toneMapping=he}function es(nt,gt,Rt){const It=gt.isScene===!0?gt.overrideMaterial:null;for(let Et=0,$t=nt.length;Et<$t;Et++){const se=nt[Et],le=se.object,he=se.geometry,we=It===null?se.material:It,Re=se.group;le.layers.test(Rt.layers)&&El(le,gt,Rt,he,we,Re)}}function El(nt,gt,Rt,It,Et,$t){nt.onBeforeRender(v,gt,Rt,It,Et,$t),nt.modelViewMatrix.multiplyMatrices(Rt.matrixWorldInverse,nt.matrixWorld),nt.normalMatrix.getNormalMatrix(nt.modelViewMatrix),Et.onBeforeRender(v,gt,Rt,It,nt,$t),Et.transparent===!0&&Et.side===_a&&Et.forceSinglePass===!1?(Et.side=gs,Et.needsUpdate=!0,v.renderBufferDirect(Rt,gt,It,Et,nt,$t),Et.side=qa,Et.needsUpdate=!0,v.renderBufferDirect(Rt,gt,It,Et,nt,$t),Et.side=_a):v.renderBufferDirect(Rt,gt,It,Et,nt,$t),nt.onAfterRender(v,gt,Rt,It,Et,$t)}function ya(nt,gt,Rt){gt.isScene!==!0&&(gt=Q);const It=yt.get(nt),Et=l.state.lights,$t=l.state.shadowsArray,se=Et.state.version,le=jt.getParameters(nt,Et.state,$t,gt,Rt),he=jt.getProgramCacheKey(le);let we=It.programs;It.environment=nt.isMeshStandardMaterial?gt.environment:null,It.fog=gt.fog,It.envMap=(nt.isMeshStandardMaterial?lt:Z).get(nt.envMap||It.environment),It.envMapRotation=It.environment!==null&&nt.envMap===null?gt.environmentRotation:nt.envMapRotation,we===void 0&&(nt.addEventListener("dispose",Me),we=new Map,It.programs=we);let Re=we.get(he);if(Re!==void 0){if(It.currentProgram===Re&&It.lightsStateVersion===se)return co(nt,le),Re}else le.uniforms=jt.getUniforms(nt),nt.onBeforeCompile(le,v),Re=jt.acquireProgram(le,he),we.set(he,Re),It.uniforms=le.uniforms;const Ee=It.uniforms;return(!nt.isShaderMaterial&&!nt.isRawShaderMaterial||nt.clipping===!0)&&(Ee.clippingPlanes=Gt.uniform),co(nt,le),It.needsLights=Sl(nt),It.lightsStateVersion=se,It.needsLights&&(Ee.ambientLightColor.value=Et.state.ambient,Ee.lightProbe.value=Et.state.probe,Ee.directionalLights.value=Et.state.directional,Ee.directionalLightShadows.value=Et.state.directionalShadow,Ee.spotLights.value=Et.state.spot,Ee.spotLightShadows.value=Et.state.spotShadow,Ee.rectAreaLights.value=Et.state.rectArea,Ee.ltc_1.value=Et.state.rectAreaLTC1,Ee.ltc_2.value=Et.state.rectAreaLTC2,Ee.pointLights.value=Et.state.point,Ee.pointLightShadows.value=Et.state.pointShadow,Ee.hemisphereLights.value=Et.state.hemi,Ee.directionalShadowMap.value=Et.state.directionalShadowMap,Ee.directionalShadowMatrix.value=Et.state.directionalShadowMatrix,Ee.spotShadowMap.value=Et.state.spotShadowMap,Ee.spotLightMatrix.value=Et.state.spotLightMatrix,Ee.spotLightMap.value=Et.state.spotLightMap,Ee.pointShadowMap.value=Et.state.pointShadowMap,Ee.pointShadowMatrix.value=Et.state.pointShadowMatrix),It.currentProgram=Re,It.uniformsList=null,Re}function Ta(nt){if(nt.uniformsList===null){const gt=nt.currentProgram.getUniforms();nt.uniformsList=zv.seqWithValue(gt.seq,nt.uniforms)}return nt.uniformsList}function co(nt,gt){const Rt=yt.get(nt);Rt.outputColorSpace=gt.outputColorSpace,Rt.batching=gt.batching,Rt.batchingColor=gt.batchingColor,Rt.instancing=gt.instancing,Rt.instancingColor=gt.instancingColor,Rt.instancingMorph=gt.instancingMorph,Rt.skinning=gt.skinning,Rt.morphTargets=gt.morphTargets,Rt.morphNormals=gt.morphNormals,Rt.morphColors=gt.morphColors,Rt.morphTargetsCount=gt.morphTargetsCount,Rt.numClippingPlanes=gt.numClippingPlanes,Rt.numIntersection=gt.numClipIntersection,Rt.vertexAlphas=gt.vertexAlphas,Rt.vertexTangents=gt.vertexTangents,Rt.toneMapping=gt.toneMapping}function po(nt,gt,Rt,It,Et){gt.isScene!==!0&&(gt=Q),it.resetTextureUnits();const $t=gt.fog,se=It.isMeshStandardMaterial?gt.environment:null,le=w===null?v.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:xf,he=(It.isMeshStandardMaterial?lt:Z).get(It.envMap||se),we=It.vertexColors===!0&&!!Rt.attributes.color&&Rt.attributes.color.itemSize===4,Re=!!Rt.attributes.tangent&&(!!It.normalMap||It.anisotropy>0),Ee=!!Rt.morphAttributes.position,Ge=!!Rt.morphAttributes.normal,si=!!Rt.morphAttributes.color;let li=$o;It.toneMapped&&(w===null||w.isXRRenderTarget===!0)&&(li=v.toneMapping);const ti=Rt.morphAttributes.position||Rt.morphAttributes.normal||Rt.morphAttributes.color,Ue=ti!==void 0?ti.length:0,xe=yt.get(It),Di=l.state.lights;if(N===!0&&(W===!0||nt!==M)){const mn=nt===M&&It.id===A;Gt.setState(It,nt,mn)}let Te=!1;It.version===xe.__version?(xe.needsLights&&xe.lightsStateVersion!==Di.state.version||xe.outputColorSpace!==le||Et.isBatchedMesh&&xe.batching===!1||!Et.isBatchedMesh&&xe.batching===!0||Et.isBatchedMesh&&xe.batchingColor===!0&&Et.colorTexture===null||Et.isBatchedMesh&&xe.batchingColor===!1&&Et.colorTexture!==null||Et.isInstancedMesh&&xe.instancing===!1||!Et.isInstancedMesh&&xe.instancing===!0||Et.isSkinnedMesh&&xe.skinning===!1||!Et.isSkinnedMesh&&xe.skinning===!0||Et.isInstancedMesh&&xe.instancingColor===!0&&Et.instanceColor===null||Et.isInstancedMesh&&xe.instancingColor===!1&&Et.instanceColor!==null||Et.isInstancedMesh&&xe.instancingMorph===!0&&Et.morphTexture===null||Et.isInstancedMesh&&xe.instancingMorph===!1&&Et.morphTexture!==null||xe.envMap!==he||It.fog===!0&&xe.fog!==$t||xe.numClippingPlanes!==void 0&&(xe.numClippingPlanes!==Gt.numPlanes||xe.numIntersection!==Gt.numIntersection)||xe.vertexAlphas!==we||xe.vertexTangents!==Re||xe.morphTargets!==Ee||xe.morphNormals!==Ge||xe.morphColors!==si||xe.toneMapping!==li||xe.morphTargetsCount!==Ue)&&(Te=!0):(Te=!0,xe.__version=It.version);let vn=xe.currentProgram;Te===!0&&(vn=ya(It,gt,Et));let os=!1,$i=!1,_r=!1;const mi=vn.getUniforms(),Wn=xe.uniforms;if(ct.useProgram(vn.program)&&(os=!0,$i=!0,_r=!0),It.id!==A&&(A=It.id,$i=!0),os||M!==nt){ct.buffers.depth.getReversed()?(V.copy(nt.projectionMatrix),jD(V),ZD(V),mi.setValue(q,"projectionMatrix",V)):mi.setValue(q,"projectionMatrix",nt.projectionMatrix),mi.setValue(q,"viewMatrix",nt.matrixWorldInverse);const Mn=mi.map.cameraPosition;Mn!==void 0&&Mn.setValue(q,j.setFromMatrixPosition(nt.matrixWorld)),Tt.logarithmicDepthBuffer&&mi.setValue(q,"logDepthBufFC",2/(Math.log(nt.far+1)/Math.LN2)),(It.isMeshPhongMaterial||It.isMeshToonMaterial||It.isMeshLambertMaterial||It.isMeshBasicMaterial||It.isMeshStandardMaterial||It.isShaderMaterial)&&mi.setValue(q,"isOrthographic",nt.isOrthographicCamera===!0),M!==nt&&(M=nt,$i=!0,_r=!0)}if(Et.isSkinnedMesh){mi.setOptional(q,Et,"bindMatrix"),mi.setOptional(q,Et,"bindMatrixInverse");const mn=Et.skeleton;mn&&(mn.boneTexture===null&&mn.computeBoneTexture(),mi.setValue(q,"boneTexture",mn.boneTexture,it))}Et.isBatchedMesh&&(mi.setOptional(q,Et,"batchingTexture"),mi.setValue(q,"batchingTexture",Et._matricesTexture,it),mi.setOptional(q,Et,"batchingIdTexture"),mi.setValue(q,"batchingIdTexture",Et._indirectTexture,it),mi.setOptional(q,Et,"batchingColorTexture"),Et._colorsTexture!==null&&mi.setValue(q,"batchingColorTexture",Et._colorsTexture,it));const Dn=Rt.morphAttributes;if((Dn.position!==void 0||Dn.normal!==void 0||Dn.color!==void 0)&&bt.update(Et,Rt,vn),($i||xe.receiveShadow!==Et.receiveShadow)&&(xe.receiveShadow=Et.receiveShadow,mi.setValue(q,"receiveShadow",Et.receiveShadow)),It.isMeshGouraudMaterial&&It.envMap!==null&&(Wn.envMap.value=he,Wn.flipEnvMap.value=he.isCubeTexture&&he.isRenderTargetTexture===!1?-1:1),It.isMeshStandardMaterial&&It.envMap===null&&gt.environment!==null&&(Wn.envMapIntensity.value=gt.environmentIntensity),$i&&(mi.setValue(q,"toneMappingExposure",v.toneMappingExposure),xe.needsLights&&lc(Wn,_r),$t&&It.fog===!0&&Vt.refreshFogUniforms(Wn,$t),Vt.refreshMaterialUniforms(Wn,It,O,D,l.state.transmissionRenderTarget[nt.id]),zv.upload(q,Ta(xe),Wn,it)),It.isShaderMaterial&&It.uniformsNeedUpdate===!0&&(zv.upload(q,Ta(xe),Wn,it),It.uniformsNeedUpdate=!1),It.isSpriteMaterial&&mi.setValue(q,"center",Et.center),mi.setValue(q,"modelViewMatrix",Et.modelViewMatrix),mi.setValue(q,"normalMatrix",Et.normalMatrix),mi.setValue(q,"modelMatrix",Et.matrixWorld),It.isShaderMaterial||It.isRawShaderMaterial){const mn=It.uniformsGroups;for(let Mn=0,js=mn.length;Mn<js;Mn++){const On=mn[Mn];dt.update(On,vn),dt.bind(On,vn)}}return vn}function lc(nt,gt){nt.ambientLightColor.needsUpdate=gt,nt.lightProbe.needsUpdate=gt,nt.directionalLights.needsUpdate=gt,nt.directionalLightShadows.needsUpdate=gt,nt.pointLights.needsUpdate=gt,nt.pointLightShadows.needsUpdate=gt,nt.spotLights.needsUpdate=gt,nt.spotLightShadows.needsUpdate=gt,nt.rectAreaLights.needsUpdate=gt,nt.hemisphereLights.needsUpdate=gt}function Sl(nt){return nt.isMeshLambertMaterial||nt.isMeshToonMaterial||nt.isMeshPhongMaterial||nt.isMeshStandardMaterial||nt.isShadowMaterial||nt.isShaderMaterial&&nt.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(nt,gt,Rt){yt.get(nt.texture).__webglTexture=gt,yt.get(nt.depthTexture).__webglTexture=Rt;const It=yt.get(nt);It.__hasExternalTextures=!0,It.__autoAllocateDepthBuffer=Rt===void 0,It.__autoAllocateDepthBuffer||vt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),It.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(nt,gt){const Rt=yt.get(nt);Rt.__webglFramebuffer=gt,Rt.__useDefaultFramebuffer=gt===void 0};const hc=q.createFramebuffer();this.setRenderTarget=function(nt,gt=0,Rt=0){w=nt,E=gt,C=Rt;let It=!0,Et=null,$t=!1,se=!1;if(nt){const he=yt.get(nt);if(he.__useDefaultFramebuffer!==void 0)ct.bindFramebuffer(q.FRAMEBUFFER,null),It=!1;else if(he.__webglFramebuffer===void 0)it.setupRenderTarget(nt);else if(he.__hasExternalTextures)it.rebindTextures(nt,yt.get(nt.texture).__webglTexture,yt.get(nt.depthTexture).__webglTexture);else if(nt.depthBuffer){const Ee=nt.depthTexture;if(he.__boundDepthTexture!==Ee){if(Ee!==null&&yt.has(Ee)&&(nt.width!==Ee.image.width||nt.height!==Ee.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");it.setupDepthRenderbuffer(nt)}}const we=nt.texture;(we.isData3DTexture||we.isDataArrayTexture||we.isCompressedArrayTexture)&&(se=!0);const Re=yt.get(nt).__webglFramebuffer;nt.isWebGLCubeRenderTarget?(Array.isArray(Re[gt])?Et=Re[gt][Rt]:Et=Re[gt],$t=!0):nt.samples>0&&it.useMultisampledRTT(nt)===!1?Et=yt.get(nt).__webglMultisampledFramebuffer:Array.isArray(Re)?Et=Re[Rt]:Et=Re,R.copy(nt.viewport),P.copy(nt.scissor),b=nt.scissorTest}else R.copy(X).multiplyScalar(O).floor(),P.copy(H).multiplyScalar(O).floor(),b=U;if(Rt!==0&&(Et=hc),ct.bindFramebuffer(q.FRAMEBUFFER,Et)&&It&&ct.drawBuffers(nt,Et),ct.viewport(R),ct.scissor(P),ct.setScissorTest(b),$t){const he=yt.get(nt.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+gt,he.__webglTexture,Rt)}else if(se){const he=yt.get(nt.texture),we=gt;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,he.__webglTexture,Rt,we)}else if(nt!==null&&Rt!==0){const he=yt.get(nt.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,he.__webglTexture,Rt)}A=-1},this.readRenderTargetPixels=function(nt,gt,Rt,It,Et,$t,se){if(!(nt&&nt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let le=yt.get(nt).__webglFramebuffer;if(nt.isWebGLCubeRenderTarget&&se!==void 0&&(le=le[se]),le){ct.bindFramebuffer(q.FRAMEBUFFER,le);try{const he=nt.texture,we=he.format,Re=he.type;if(!Tt.textureFormatReadable(we)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Tt.textureTypeReadable(Re)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}gt>=0&&gt<=nt.width-It&&Rt>=0&&Rt<=nt.height-Et&&q.readPixels(gt,Rt,It,Et,ce.convert(we),ce.convert(Re),$t)}finally{const he=w!==null?yt.get(w).__webglFramebuffer:null;ct.bindFramebuffer(q.FRAMEBUFFER,he)}}},this.readRenderTargetPixelsAsync=async function(nt,gt,Rt,It,Et,$t,se){if(!(nt&&nt.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let le=yt.get(nt).__webglFramebuffer;if(nt.isWebGLCubeRenderTarget&&se!==void 0&&(le=le[se]),le){const he=nt.texture,we=he.format,Re=he.type;if(!Tt.textureFormatReadable(we))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Tt.textureTypeReadable(Re))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(gt>=0&&gt<=nt.width-It&&Rt>=0&&Rt<=nt.height-Et){ct.bindFramebuffer(q.FRAMEBUFFER,le);const Ee=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,Ee),q.bufferData(q.PIXEL_PACK_BUFFER,$t.byteLength,q.STREAM_READ),q.readPixels(gt,Rt,It,Et,ce.convert(we),ce.convert(Re),0);const Ge=w!==null?yt.get(w).__webglFramebuffer:null;ct.bindFramebuffer(q.FRAMEBUFFER,Ge);const si=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await KD(q,si,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,Ee),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,$t),q.deleteBuffer(Ee),q.deleteSync(si),$t}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(nt,gt=null,Rt=0){nt.isTexture!==!0&&(Pu("WebGLRenderer: copyFramebufferToTexture function signature has changed."),gt=arguments[0]||null,nt=arguments[1]);const It=Math.pow(2,-Rt),Et=Math.floor(nt.image.width*It),$t=Math.floor(nt.image.height*It),se=gt!==null?gt.x:0,le=gt!==null?gt.y:0;it.setTexture2D(nt,0),q.copyTexSubImage2D(q.TEXTURE_2D,Rt,0,0,se,le,Et,$t),ct.unbindTexture()};const vo=q.createFramebuffer(),je=q.createFramebuffer();this.copyTextureToTexture=function(nt,gt,Rt=null,It=null,Et=0,$t=null){nt.isTexture!==!0&&(Pu("WebGLRenderer: copyTextureToTexture function signature has changed."),It=arguments[0]||null,nt=arguments[1],gt=arguments[2],$t=arguments[3]||0,Rt=null),$t===null&&(Et!==0?(Pu("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),$t=Et,Et=0):$t=0);let se,le,he,we,Re,Ee,Ge,si,li;const ti=nt.isCompressedTexture?nt.mipmaps[$t]:nt.image;if(Rt!==null)se=Rt.max.x-Rt.min.x,le=Rt.max.y-Rt.min.y,he=Rt.isBox3?Rt.max.z-Rt.min.z:1,we=Rt.min.x,Re=Rt.min.y,Ee=Rt.isBox3?Rt.min.z:0;else{const Dn=Math.pow(2,-Et);se=Math.floor(ti.width*Dn),le=Math.floor(ti.height*Dn),nt.isDataArrayTexture?he=ti.depth:nt.isData3DTexture?he=Math.floor(ti.depth*Dn):he=1,we=0,Re=0,Ee=0}It!==null?(Ge=It.x,si=It.y,li=It.z):(Ge=0,si=0,li=0);const Ue=ce.convert(gt.format),xe=ce.convert(gt.type);let Di;gt.isData3DTexture?(it.setTexture3D(gt,0),Di=q.TEXTURE_3D):gt.isDataArrayTexture||gt.isCompressedArrayTexture?(it.setTexture2DArray(gt,0),Di=q.TEXTURE_2D_ARRAY):(it.setTexture2D(gt,0),Di=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,gt.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,gt.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,gt.unpackAlignment);const Te=q.getParameter(q.UNPACK_ROW_LENGTH),vn=q.getParameter(q.UNPACK_IMAGE_HEIGHT),os=q.getParameter(q.UNPACK_SKIP_PIXELS),$i=q.getParameter(q.UNPACK_SKIP_ROWS),_r=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,ti.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,ti.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,we),q.pixelStorei(q.UNPACK_SKIP_ROWS,Re),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Ee);const mi=nt.isDataArrayTexture||nt.isData3DTexture,Wn=gt.isDataArrayTexture||gt.isData3DTexture;if(nt.isDepthTexture){const Dn=yt.get(nt),mn=yt.get(gt),Mn=yt.get(Dn.__renderTarget),js=yt.get(mn.__renderTarget);ct.bindFramebuffer(q.READ_FRAMEBUFFER,Mn.__webglFramebuffer),ct.bindFramebuffer(q.DRAW_FRAMEBUFFER,js.__webglFramebuffer);for(let On=0;On<he;On++)mi&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,yt.get(nt).__webglTexture,Et,Ee+On),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,yt.get(gt).__webglTexture,$t,li+On)),q.blitFramebuffer(we,Re,se,le,Ge,si,se,le,q.DEPTH_BUFFER_BIT,q.NEAREST);ct.bindFramebuffer(q.READ_FRAMEBUFFER,null),ct.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(Et!==0||nt.isRenderTargetTexture||yt.has(nt)){const Dn=yt.get(nt),mn=yt.get(gt);ct.bindFramebuffer(q.READ_FRAMEBUFFER,vo),ct.bindFramebuffer(q.DRAW_FRAMEBUFFER,je);for(let Mn=0;Mn<he;Mn++)mi?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Dn.__webglTexture,Et,Ee+Mn):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Dn.__webglTexture,Et),Wn?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,mn.__webglTexture,$t,li+Mn):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,mn.__webglTexture,$t),Et!==0?q.blitFramebuffer(we,Re,se,le,Ge,si,se,le,q.COLOR_BUFFER_BIT,q.NEAREST):Wn?q.copyTexSubImage3D(Di,$t,Ge,si,li+Mn,we,Re,se,le):q.copyTexSubImage2D(Di,$t,Ge,si,we,Re,se,le);ct.bindFramebuffer(q.READ_FRAMEBUFFER,null),ct.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else Wn?nt.isDataTexture||nt.isData3DTexture?q.texSubImage3D(Di,$t,Ge,si,li,se,le,he,Ue,xe,ti.data):gt.isCompressedArrayTexture?q.compressedTexSubImage3D(Di,$t,Ge,si,li,se,le,he,Ue,ti.data):q.texSubImage3D(Di,$t,Ge,si,li,se,le,he,Ue,xe,ti):nt.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,$t,Ge,si,se,le,Ue,xe,ti.data):nt.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,$t,Ge,si,ti.width,ti.height,Ue,ti.data):q.texSubImage2D(q.TEXTURE_2D,$t,Ge,si,se,le,Ue,xe,ti);q.pixelStorei(q.UNPACK_ROW_LENGTH,Te),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,vn),q.pixelStorei(q.UNPACK_SKIP_PIXELS,os),q.pixelStorei(q.UNPACK_SKIP_ROWS,$i),q.pixelStorei(q.UNPACK_SKIP_IMAGES,_r),$t===0&&gt.generateMipmaps&&q.generateMipmap(Di),ct.unbindTexture()},this.copyTextureToTexture3D=function(nt,gt,Rt=null,It=null,Et=0){return nt.isTexture!==!0&&(Pu("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Rt=arguments[0]||null,It=arguments[1]||null,nt=arguments[2],gt=arguments[3],Et=arguments[4]||0),Pu('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(nt,gt,Rt,It,Et)},this.initRenderTarget=function(nt){yt.get(nt).__webglFramebuffer===void 0&&it.setupRenderTarget(nt)},this.initTexture=function(nt){nt.isCubeTexture?it.setTextureCube(nt,0):nt.isData3DTexture?it.setTexture3D(nt,0):nt.isDataArrayTexture||nt.isCompressedArrayTexture?it.setTexture2DArray(nt,0):it.setTexture2D(nt,0),ct.unbindTexture()},this.resetState=function(){E=0,C=0,w=null,ct.reset(),Oe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Xa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const i=this.getContext();i.drawingBufferColorspace=hi._getDrawingBufferColorSpace(t),i.unpackColorSpace=hi._getUnpackColorSpace()}}class Ir{constructor(t){t===void 0&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const i=this.elements;i[0]=t.x,i[4]=t.y,i[8]=t.z}getTrace(t){t===void 0&&(t=new tt);const i=this.elements;return t.x=i[0],t.y=i[4],t.z=i[8],t}vmult(t,i){i===void 0&&(i=new tt);const n=this.elements,x=t.x,S=t.y,s=t.z;return i.x=n[0]*x+n[1]*S+n[2]*s,i.y=n[3]*x+n[4]*S+n[5]*s,i.z=n[6]*x+n[7]*S+n[8]*s,i}smult(t){for(let i=0;i<this.elements.length;i++)this.elements[i]*=t}mmult(t,i){i===void 0&&(i=new Ir);const n=this.elements,x=t.elements,S=i.elements,s=n[0],T=n[1],e=n[2],a=n[3],g=n[4],f=n[5],o=n[6],u=n[7],r=n[8],h=x[0],c=x[1],l=x[2],p=x[3],m=x[4],v=x[5],y=x[6],E=x[7],C=x[8];return S[0]=s*h+T*p+e*y,S[1]=s*c+T*m+e*E,S[2]=s*l+T*v+e*C,S[3]=a*h+g*p+f*y,S[4]=a*c+g*m+f*E,S[5]=a*l+g*v+f*C,S[6]=o*h+u*p+r*y,S[7]=o*c+u*m+r*E,S[8]=o*l+u*v+r*C,i}scale(t,i){i===void 0&&(i=new Ir);const n=this.elements,x=i.elements;for(let S=0;S!==3;S++)x[3*S+0]=t.x*n[3*S+0],x[3*S+1]=t.y*n[3*S+1],x[3*S+2]=t.z*n[3*S+2];return i}solve(t,i){i===void 0&&(i=new tt);const n=3,x=4,S=[];let s,T;for(s=0;s<n*x;s++)S.push(0);for(s=0;s<3;s++)for(T=0;T<3;T++)S[s+x*T]=this.elements[s+3*T];S[3]=t.x,S[7]=t.y,S[11]=t.z;let e=3;const a=e;let g;const f=4;let o;do{if(s=a-e,S[s+x*s]===0){for(T=s+1;T<a;T++)if(S[s+x*T]!==0){g=f;do o=f-g,S[o+x*s]+=S[o+x*T];while(--g);break}}if(S[s+x*s]!==0)for(T=s+1;T<a;T++){const u=S[s+x*T]/S[s+x*s];g=f;do o=f-g,S[o+x*T]=o<=s?0:S[o+x*T]-S[o+x*s]*u;while(--g)}}while(--e);if(i.z=S[2*x+3]/S[2*x+2],i.y=(S[1*x+3]-S[1*x+2]*i.z)/S[1*x+1],i.x=(S[0*x+3]-S[0*x+2]*i.z-S[0*x+1]*i.y)/S[0*x+0],isNaN(i.x)||isNaN(i.y)||isNaN(i.z)||i.x===1/0||i.y===1/0||i.z===1/0)throw`Could not solve equation! Got x=[${i.toString()}], b=[${t.toString()}], A=[${this.toString()}]`;return i}e(t,i,n){if(n===void 0)return this.elements[i+3*t];this.elements[i+3*t]=n}copy(t){for(let i=0;i<t.elements.length;i++)this.elements[i]=t.elements[i];return this}toString(){let t="";for(let n=0;n<9;n++)t+=this.elements[n]+",";return t}reverse(t){t===void 0&&(t=new Ir);const i=3,n=6,x=v8;let S,s;for(S=0;S<3;S++)for(s=0;s<3;s++)x[S+n*s]=this.elements[S+3*s];x[3]=1,x[9]=0,x[15]=0,x[4]=0,x[10]=1,x[16]=0,x[5]=0,x[11]=0,x[17]=1;let T=3;const e=T;let a;const g=n;let f;do{if(S=e-T,x[S+n*S]===0){for(s=S+1;s<e;s++)if(x[S+n*s]!==0){a=g;do f=g-a,x[f+n*S]+=x[f+n*s];while(--a);break}}if(x[S+n*S]!==0)for(s=S+1;s<e;s++){const o=x[S+n*s]/x[S+n*S];a=g;do f=g-a,x[f+n*s]=f<=S?0:x[f+n*s]-x[f+n*S]*o;while(--a)}}while(--T);S=2;do{s=S-1;do{const o=x[S+n*s]/x[S+n*S];a=n;do f=n-a,x[f+n*s]=x[f+n*s]-x[f+n*S]*o;while(--a)}while(s--)}while(--S);S=2;do{const o=1/x[S+n*S];a=n;do f=n-a,x[f+n*S]=x[f+n*S]*o;while(--a)}while(S--);S=2;do{s=2;do{if(f=x[i+s+n*S],isNaN(f)||f===1/0)throw`Could not reverse! A=[${this.toString()}]`;t.e(S,s,f)}while(s--)}while(S--);return t}setRotationFromQuaternion(t){const i=t.x,n=t.y,x=t.z,S=t.w,s=i+i,T=n+n,e=x+x,a=i*s,g=i*T,f=i*e,o=n*T,u=n*e,r=x*e,h=S*s,c=S*T,l=S*e,p=this.elements;return p[0]=1-(o+r),p[1]=g-l,p[2]=f+c,p[3]=g+l,p[4]=1-(a+r),p[5]=u-h,p[6]=f-c,p[7]=u+h,p[8]=1-(a+o),this}transpose(t){t===void 0&&(t=new Ir);const i=this.elements,n=t.elements;let x;return n[0]=i[0],n[4]=i[4],n[8]=i[8],x=i[1],n[1]=i[3],n[3]=x,x=i[2],n[2]=i[6],n[6]=x,x=i[5],n[5]=i[7],n[7]=x,t}}const v8=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class tt{constructor(t,i,n){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=i,this.z=n}cross(t,i){i===void 0&&(i=new tt);const n=t.x,x=t.y,S=t.z,s=this.x,T=this.y,e=this.z;return i.x=T*S-e*x,i.y=e*n-s*S,i.z=s*x-T*n,i}set(t,i,n){return this.x=t,this.y=i,this.z=n,this}setZero(){this.x=this.y=this.z=0}vadd(t,i){if(i)i.x=t.x+this.x,i.y=t.y+this.y,i.z=t.z+this.z;else return new tt(this.x+t.x,this.y+t.y,this.z+t.z)}vsub(t,i){if(i)i.x=this.x-t.x,i.y=this.y-t.y,i.z=this.z-t.z;else return new tt(this.x-t.x,this.y-t.y,this.z-t.z)}crossmat(){return new Ir([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,i=this.y,n=this.z,x=Math.sqrt(t*t+i*i+n*n);if(x>0){const S=1/x;this.x*=S,this.y*=S,this.z*=S}else this.x=0,this.y=0,this.z=0;return x}unit(t){t===void 0&&(t=new tt);const i=this.x,n=this.y,x=this.z;let S=Math.sqrt(i*i+n*n+x*x);return S>0?(S=1/S,t.x=i*S,t.y=n*S,t.z=x*S):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,i=this.y,n=this.z;return Math.sqrt(t*t+i*i+n*n)}lengthSquared(){return this.dot(this)}distanceTo(t){const i=this.x,n=this.y,x=this.z,S=t.x,s=t.y,T=t.z;return Math.sqrt((S-i)*(S-i)+(s-n)*(s-n)+(T-x)*(T-x))}distanceSquared(t){const i=this.x,n=this.y,x=this.z,S=t.x,s=t.y,T=t.z;return(S-i)*(S-i)+(s-n)*(s-n)+(T-x)*(T-x)}scale(t,i){i===void 0&&(i=new tt);const n=this.x,x=this.y,S=this.z;return i.x=t*n,i.y=t*x,i.z=t*S,i}vmul(t,i){return i===void 0&&(i=new tt),i.x=t.x*this.x,i.y=t.y*this.y,i.z=t.z*this.z,i}addScaledVector(t,i,n){return n===void 0&&(n=new tt),n.x=this.x+t*i.x,n.y=this.y+t*i.y,n.z=this.z+t*i.z,n}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(t){return t===void 0&&(t=new tt),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,i){const n=this.length();if(n>0){const x=m8,S=1/n;x.set(this.x*S,this.y*S,this.z*S);const s=g8;Math.abs(x.x)<.9?(s.set(1,0,0),x.cross(s,t)):(s.set(0,1,0),x.cross(s,t)),x.cross(t,i)}else t.set(1,0,0),i.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,i,n){const x=this.x,S=this.y,s=this.z;n.x=x+(t.x-x)*i,n.y=S+(t.y-S)*i,n.z=s+(t.z-s)*i}almostEquals(t,i){return i===void 0&&(i=1e-6),!(Math.abs(this.x-t.x)>i||Math.abs(this.y-t.y)>i||Math.abs(this.z-t.z)>i)}almostZero(t){return t===void 0&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,i){return this.negate(h2),h2.almostEquals(t,i)}clone(){return new tt(this.x,this.y,this.z)}}tt.ZERO=new tt(0,0,0);tt.UNIT_X=new tt(1,0,0);tt.UNIT_Y=new tt(0,1,0);tt.UNIT_Z=new tt(0,0,1);const m8=new tt,g8=new tt,h2=new tt;class Ks{constructor(t){t===void 0&&(t={}),this.lowerBound=new tt,this.upperBound=new tt,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,i,n,x){const S=this.lowerBound,s=this.upperBound,T=n;S.copy(t[0]),T&&T.vmult(S,S),s.copy(S);for(let e=1;e<t.length;e++){let a=t[e];T&&(T.vmult(a,u2),a=u2),a.x>s.x&&(s.x=a.x),a.x<S.x&&(S.x=a.x),a.y>s.y&&(s.y=a.y),a.y<S.y&&(S.y=a.y),a.z>s.z&&(s.z=a.z),a.z<S.z&&(S.z=a.z)}return i&&(i.vadd(S,S),i.vadd(s,s)),x&&(S.x-=x,S.y-=x,S.z-=x,s.x+=x,s.y+=x,s.z+=x),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return new Ks().copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const i=this.lowerBound,n=this.upperBound,x=t.lowerBound,S=t.upperBound,s=x.x<=n.x&&n.x<=S.x||i.x<=S.x&&S.x<=n.x,T=x.y<=n.y&&n.y<=S.y||i.y<=S.y&&S.y<=n.y,e=x.z<=n.z&&n.z<=S.z||i.z<=S.z&&S.z<=n.z;return s&&T&&e}volume(){const t=this.lowerBound,i=this.upperBound;return(i.x-t.x)*(i.y-t.y)*(i.z-t.z)}contains(t){const i=this.lowerBound,n=this.upperBound,x=t.lowerBound,S=t.upperBound;return i.x<=x.x&&n.x>=S.x&&i.y<=x.y&&n.y>=S.y&&i.z<=x.z&&n.z>=S.z}getCorners(t,i,n,x,S,s,T,e){const a=this.lowerBound,g=this.upperBound;t.copy(a),i.set(g.x,a.y,a.z),n.set(g.x,g.y,a.z),x.set(a.x,g.y,g.z),S.set(g.x,a.y,g.z),s.set(a.x,g.y,a.z),T.set(a.x,a.y,g.z),e.copy(g)}toLocalFrame(t,i){const n=f2,x=n[0],S=n[1],s=n[2],T=n[3],e=n[4],a=n[5],g=n[6],f=n[7];this.getCorners(x,S,s,T,e,a,g,f);for(let o=0;o!==8;o++){const u=n[o];t.pointToLocal(u,u)}return i.setFromPoints(n)}toWorldFrame(t,i){const n=f2,x=n[0],S=n[1],s=n[2],T=n[3],e=n[4],a=n[5],g=n[6],f=n[7];this.getCorners(x,S,s,T,e,a,g,f);for(let o=0;o!==8;o++){const u=n[o];t.pointToWorld(u,u)}return i.setFromPoints(n)}overlapsRay(t){const{direction:i,from:n}=t,x=1/i.x,S=1/i.y,s=1/i.z,T=(this.lowerBound.x-n.x)*x,e=(this.upperBound.x-n.x)*x,a=(this.lowerBound.y-n.y)*S,g=(this.upperBound.y-n.y)*S,f=(this.lowerBound.z-n.z)*s,o=(this.upperBound.z-n.z)*s,u=Math.max(Math.max(Math.min(T,e),Math.min(a,g)),Math.min(f,o)),r=Math.min(Math.min(Math.max(T,e),Math.max(a,g)),Math.max(f,o));return!(r<0||u>r)}}const u2=new tt,f2=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt];class c2{constructor(){this.matrix=[]}get(t,i){let{index:n}=t,{index:x}=i;if(x>n){const S=x;x=n,n=S}return this.matrix[(n*(n+1)>>1)+x-1]}set(t,i,n){let{index:x}=t,{index:S}=i;if(S>x){const s=S;S=x,x=s}this.matrix[(x*(x+1)>>1)+S-1]=n?1:0}reset(){for(let t=0,i=this.matrix.length;t!==i;t++)this.matrix[t]=0}setNumObjects(t){this.matrix.length=t*(t-1)>>1}}let BM=class{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const n=this._listeners;return n[t]===void 0&&(n[t]=[]),n[t].includes(i)||n[t].push(i),this}hasEventListener(t,i){if(this._listeners===void 0)return!1;const n=this._listeners;return!!(n[t]!==void 0&&n[t].includes(i))}hasAnyEventListener(t){return this._listeners===void 0?!1:this._listeners[t]!==void 0}removeEventListener(t,i){if(this._listeners===void 0)return this;const n=this._listeners;if(n[t]===void 0)return this;const x=n[t].indexOf(i);return x!==-1&&n[t].splice(x,1),this}dispatchEvent(t){if(this._listeners===void 0)return this;const n=this._listeners[t.type];if(n!==void 0){t.target=this;for(let x=0,S=n.length;x<S;x++)n[x].call(this,t)}return this}};class dn{constructor(t,i,n,x){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),x===void 0&&(x=1),this.x=t,this.y=i,this.z=n,this.w=x}set(t,i,n,x){return this.x=t,this.y=i,this.z=n,this.w=x,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,i){const n=Math.sin(i*.5);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(i*.5),this}toAxisAngle(t){t===void 0&&(t=new tt),this.normalize();const i=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/n,t.y=this.y/n,t.z=this.z/n),[t,i]}setFromVectors(t,i){if(t.isAntiparallelTo(i)){const n=x8,x=y8;t.tangents(n,x),this.setFromAxisAngle(n,Math.PI)}else{const n=t.cross(i);this.x=n.x,this.y=n.y,this.z=n.z,this.w=Math.sqrt(t.length()**2*i.length()**2)+t.dot(i),this.normalize()}return this}mult(t,i){i===void 0&&(i=new dn);const n=this.x,x=this.y,S=this.z,s=this.w,T=t.x,e=t.y,a=t.z,g=t.w;return i.x=n*g+s*T+x*a-S*e,i.y=x*g+s*e+S*T-n*a,i.z=S*g+s*a+n*e-x*T,i.w=s*g-n*T-x*e-S*a,i}inverse(t){t===void 0&&(t=new dn);const i=this.x,n=this.y,x=this.z,S=this.w;this.conjugate(t);const s=1/(i*i+n*n+x*x+S*S);return t.x*=s,t.y*=s,t.z*=s,t.w*=s,t}conjugate(t){return t===void 0&&(t=new dn),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,i){i===void 0&&(i=new tt);const n=t.x,x=t.y,S=t.z,s=this.x,T=this.y,e=this.z,a=this.w,g=a*n+T*S-e*x,f=a*x+e*n-s*S,o=a*S+s*x-T*n,u=-s*n-T*x-e*S;return i.x=g*a+u*-s+f*-e-o*-T,i.y=f*a+u*-T+o*-s-g*-e,i.z=o*a+u*-e+g*-T-f*-s,i}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,i){i===void 0&&(i="YZX");let n,x,S;const s=this.x,T=this.y,e=this.z,a=this.w;switch(i){case"YZX":const g=s*T+e*a;if(g>.499&&(n=2*Math.atan2(s,a),x=Math.PI/2,S=0),g<-.499&&(n=-2*Math.atan2(s,a),x=-Math.PI/2,S=0),n===void 0){const f=s*s,o=T*T,u=e*e;n=Math.atan2(2*T*a-2*s*e,1-2*o-2*u),x=Math.asin(2*g),S=Math.atan2(2*s*a-2*T*e,1-2*f-2*u)}break;default:throw new Error(`Euler order ${i} not supported yet.`)}t.y=n,t.z=x,t.x=S}setFromEuler(t,i,n,x){x===void 0&&(x="XYZ");const S=Math.cos(t/2),s=Math.cos(i/2),T=Math.cos(n/2),e=Math.sin(t/2),a=Math.sin(i/2),g=Math.sin(n/2);return x==="XYZ"?(this.x=e*s*T+S*a*g,this.y=S*a*T-e*s*g,this.z=S*s*g+e*a*T,this.w=S*s*T-e*a*g):x==="YXZ"?(this.x=e*s*T+S*a*g,this.y=S*a*T-e*s*g,this.z=S*s*g-e*a*T,this.w=S*s*T+e*a*g):x==="ZXY"?(this.x=e*s*T-S*a*g,this.y=S*a*T+e*s*g,this.z=S*s*g+e*a*T,this.w=S*s*T-e*a*g):x==="ZYX"?(this.x=e*s*T-S*a*g,this.y=S*a*T+e*s*g,this.z=S*s*g-e*a*T,this.w=S*s*T+e*a*g):x==="YZX"?(this.x=e*s*T+S*a*g,this.y=S*a*T+e*s*g,this.z=S*s*g-e*a*T,this.w=S*s*T-e*a*g):x==="XZY"&&(this.x=e*s*T-S*a*g,this.y=S*a*T-e*s*g,this.z=S*s*g+e*a*T,this.w=S*s*T+e*a*g),this}clone(){return new dn(this.x,this.y,this.z,this.w)}slerp(t,i,n){n===void 0&&(n=new dn);const x=this.x,S=this.y,s=this.z,T=this.w;let e=t.x,a=t.y,g=t.z,f=t.w,o,u,r,h,c;return u=x*e+S*a+s*g+T*f,u<0&&(u=-u,e=-e,a=-a,g=-g,f=-f),1-u>1e-6?(o=Math.acos(u),r=Math.sin(o),h=Math.sin((1-i)*o)/r,c=Math.sin(i*o)/r):(h=1-i,c=i),n.x=h*x+c*e,n.y=h*S+c*a,n.z=h*s+c*g,n.w=h*T+c*f,n}integrate(t,i,n,x){x===void 0&&(x=new dn);const S=t.x*n.x,s=t.y*n.y,T=t.z*n.z,e=this.x,a=this.y,g=this.z,f=this.w,o=i*.5;return x.x+=o*(S*f+s*g-T*a),x.y+=o*(s*f+T*e-S*g),x.z+=o*(T*f+S*a-s*e),x.w+=o*(-S*e-s*a-T*g),x}}const x8=new tt,y8=new tt,T8={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class ve{constructor(t){t===void 0&&(t={}),this.id=ve.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=t.collisionResponse?t.collisionResponse:!0,this.collisionFilterGroup=t.collisionFilterGroup!==void 0?t.collisionFilterGroup:1,this.collisionFilterMask=t.collisionFilterMask!==void 0?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,n,x){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}ve.idCounter=0;ve.types=T8;class fi{constructor(t){t===void 0&&(t={}),this.position=new tt,this.quaternion=new dn,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,i){return fi.pointToLocalFrame(this.position,this.quaternion,t,i)}pointToWorld(t,i){return fi.pointToWorldFrame(this.position,this.quaternion,t,i)}vectorToWorldFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.vmult(t,i),i}static pointToLocalFrame(t,i,n,x){return x===void 0&&(x=new tt),n.vsub(t,x),i.conjugate(d2),d2.vmult(x,x),x}static pointToWorldFrame(t,i,n,x){return x===void 0&&(x=new tt),i.vmult(n,x),x.vadd(t,x),x}static vectorToWorldFrame(t,i,n){return n===void 0&&(n=new tt),t.vmult(i,n),n}static vectorToLocalFrame(t,i,n,x){return x===void 0&&(x=new tt),i.w*=-1,i.vmult(n,x),i.w*=-1,x}}const d2=new dn;class ud extends ve{constructor(t){t===void 0&&(t={});const{vertices:i=[],faces:n=[],normals:x=[],axes:S,boundingSphereRadius:s}=t;super({type:ve.types.CONVEXPOLYHEDRON}),this.vertices=i,this.faces=n,this.faceNormals=x,this.faceNormals.length===0&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=S?S.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,i=this.vertices,n=this.uniqueEdges;n.length=0;const x=new tt;for(let S=0;S!==t.length;S++){const s=t[S],T=s.length;for(let e=0;e!==T;e++){const a=(e+1)%T;i[s[e]].vsub(i[s[a]],x),x.normalize();let g=!1;for(let f=0;f!==n.length;f++)if(n[f].almostEquals(x)||n[f].almostEquals(x)){g=!0;break}g||n.push(x.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let x=0;x<this.faces[t].length;x++)if(!this.vertices[this.faces[t][x]])throw new Error(`Vertex ${this.faces[t][x]} not found!`);const i=this.faceNormals[t]||new tt;this.getFaceNormal(t,i),i.negate(i),this.faceNormals[t]=i;const n=this.vertices[this.faces[t][0]];if(i.dot(n)<0){console.error(`.faceNormals[${t}] = Vec3(${i.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let x=0;x<this.faces[t].length;x++)console.warn(`.vertices[${this.faces[t][x]}] = Vec3(${this.vertices[this.faces[t][x]].toString()})`)}}}getFaceNormal(t,i){const n=this.faces[t],x=this.vertices[n[0]],S=this.vertices[n[1]],s=this.vertices[n[2]];ud.computeNormal(x,S,s,i)}static computeNormal(t,i,n,x){const S=new tt,s=new tt;i.vsub(t,s),n.vsub(i,S),S.cross(s,x),x.isZero()||x.normalize()}clipAgainstHull(t,i,n,x,S,s,T,e,a){const g=new tt;let f=-1,o=-Number.MAX_VALUE;for(let r=0;r<n.faces.length;r++){g.copy(n.faceNormals[r]),S.vmult(g,g);const h=g.dot(s);h>o&&(o=h,f=r)}const u=[];for(let r=0;r<n.faces[f].length;r++){const h=n.vertices[n.faces[f][r]],c=new tt;c.copy(h),S.vmult(c,c),x.vadd(c,c),u.push(c)}f>=0&&this.clipFaceAgainstHull(s,t,i,u,T,e,a)}findSeparatingAxis(t,i,n,x,S,s,T,e){const a=new tt,g=new tt,f=new tt,o=new tt,u=new tt,r=new tt;let h=Number.MAX_VALUE;const c=this;if(c.uniqueAxes)for(let l=0;l!==c.uniqueAxes.length;l++){n.vmult(c.uniqueAxes[l],a);const p=c.testSepAxis(a,t,i,n,x,S);if(p===!1)return!1;p<h&&(h=p,s.copy(a))}else{const l=T?T.length:c.faces.length;for(let p=0;p<l;p++){const m=T?T[p]:p;a.copy(c.faceNormals[m]),n.vmult(a,a);const v=c.testSepAxis(a,t,i,n,x,S);if(v===!1)return!1;v<h&&(h=v,s.copy(a))}}if(t.uniqueAxes)for(let l=0;l!==t.uniqueAxes.length;l++){S.vmult(t.uniqueAxes[l],g);const p=c.testSepAxis(g,t,i,n,x,S);if(p===!1)return!1;p<h&&(h=p,s.copy(g))}else{const l=e?e.length:t.faces.length;for(let p=0;p<l;p++){const m=e?e[p]:p;g.copy(t.faceNormals[m]),S.vmult(g,g);const v=c.testSepAxis(g,t,i,n,x,S);if(v===!1)return!1;v<h&&(h=v,s.copy(g))}}for(let l=0;l!==c.uniqueEdges.length;l++){n.vmult(c.uniqueEdges[l],o);for(let p=0;p!==t.uniqueEdges.length;p++)if(S.vmult(t.uniqueEdges[p],u),o.cross(u,r),!r.almostZero()){r.normalize();const m=c.testSepAxis(r,t,i,n,x,S);if(m===!1)return!1;m<h&&(h=m,s.copy(r))}}return x.vsub(i,f),f.dot(s)>0&&s.negate(s),!0}testSepAxis(t,i,n,x,S,s){const T=this;ud.project(T,t,n,x,b0),ud.project(i,t,S,s,I0);const e=b0[0],a=b0[1],g=I0[0],f=I0[1];if(e<f||g<a)return!1;const o=e-f,u=g-a;return o<u?o:u}calculateLocalInertia(t,i){const n=new tt,x=new tt;this.computeLocalAABB(x,n);const S=n.x-x.x,s=n.y-x.y,T=n.z-x.z;i.x=1/12*t*(2*s*2*s+2*T*2*T),i.y=1/12*t*(2*S*2*S+2*T*2*T),i.z=1/12*t*(2*s*2*s+2*S*2*S)}getPlaneConstantOfFace(t){const i=this.faces[t],n=this.faceNormals[t],x=this.vertices[i[0]];return-n.dot(x)}clipFaceAgainstHull(t,i,n,x,S,s,T){const e=new tt,a=new tt,g=new tt,f=new tt,o=new tt,u=new tt,r=new tt,h=new tt,c=this,l=[],p=x,m=l;let v=-1,y=Number.MAX_VALUE;for(let M=0;M<c.faces.length;M++){e.copy(c.faceNormals[M]),n.vmult(e,e);const R=e.dot(t);R<y&&(y=R,v=M)}if(v<0)return;const E=c.faces[v];E.connectedFaces=[];for(let M=0;M<c.faces.length;M++)for(let R=0;R<c.faces[M].length;R++)E.indexOf(c.faces[M][R])!==-1&&M!==v&&E.connectedFaces.indexOf(M)===-1&&E.connectedFaces.push(M);const C=E.length;for(let M=0;M<C;M++){const R=c.vertices[E[M]],P=c.vertices[E[(M+1)%C]];R.vsub(P,a),g.copy(a),n.vmult(g,g),i.vadd(g,g),f.copy(this.faceNormals[v]),n.vmult(f,f),i.vadd(f,f),g.cross(f,o),o.negate(o),u.copy(R),n.vmult(u,u),i.vadd(u,u);const b=E.connectedFaces[M];r.copy(this.faceNormals[b]);const F=this.getPlaneConstantOfFace(b);h.copy(r),n.vmult(h,h);const I=F-h.dot(i);for(this.clipFaceAgainstPlane(p,m,h,I);p.length;)p.shift();for(;m.length;)p.push(m.shift())}r.copy(this.faceNormals[v]);const w=this.getPlaneConstantOfFace(v);h.copy(r),n.vmult(h,h);const A=w-h.dot(i);for(let M=0;M<p.length;M++){let R=h.dot(p[M])+A;if(R<=S&&(console.log(`clamped: depth=${R} to minDist=${S}`),R=S),R<=s){const P=p[M];if(R<=1e-6){const b={point:P,normal:h,depth:R};T.push(b)}}}}clipFaceAgainstPlane(t,i,n,x){let S,s;const T=t.length;if(T<2)return i;let e=t[t.length-1],a=t[0];S=n.dot(e)+x;for(let g=0;g<T;g++){if(a=t[g],s=n.dot(a)+x,S<0)if(s<0){const f=new tt;f.copy(a),i.push(f)}else{const f=new tt;e.lerp(a,S/(S-s),f),i.push(f)}else if(s<0){const f=new tt;e.lerp(a,S/(S-s),f),i.push(f),i.push(a)}e=a,S=s}return i}computeWorldVertices(t,i){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new tt);const n=this.vertices,x=this.worldVertices;for(let S=0;S!==this.vertices.length;S++)i.vmult(n[S],x[S]),t.vadd(x[S],x[S]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,i){const n=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let x=0;x<this.vertices.length;x++){const S=n[x];S.x<t.x?t.x=S.x:S.x>i.x&&(i.x=S.x),S.y<t.y?t.y=S.y:S.y>i.y&&(i.y=S.y),S.z<t.z?t.z=S.z:S.z>i.z&&(i.z=S.z)}}computeWorldFaceNormals(t){const i=this.faceNormals.length;for(;this.worldFaceNormals.length<i;)this.worldFaceNormals.push(new tt);const n=this.faceNormals,x=this.worldFaceNormals;for(let S=0;S!==i;S++)t.vmult(n[S],x[S]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const i=this.vertices;for(let n=0;n!==i.length;n++){const x=i[n].lengthSquared();x>t&&(t=x)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,i,n,x){const S=this.vertices;let s,T,e,a,g,f,o=new tt;for(let u=0;u<S.length;u++){o.copy(S[u]),i.vmult(o,o),t.vadd(o,o);const r=o;(s===void 0||r.x<s)&&(s=r.x),(a===void 0||r.x>a)&&(a=r.x),(T===void 0||r.y<T)&&(T=r.y),(g===void 0||r.y>g)&&(g=r.y),(e===void 0||r.z<e)&&(e=r.z),(f===void 0||r.z>f)&&(f=r.z)}n.set(s,T,e),x.set(a,g,f)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t){t===void 0&&(t=new tt);const i=this.vertices;for(let n=0;n<i.length;n++)t.vadd(i[n],t);return t.scale(1/i.length,t),t}transformAllPoints(t,i){const n=this.vertices.length,x=this.vertices;if(i){for(let S=0;S<n;S++){const s=x[S];i.vmult(s,s)}for(let S=0;S<this.faceNormals.length;S++){const s=this.faceNormals[S];i.vmult(s,s)}}if(t)for(let S=0;S<n;S++){const s=x[S];s.vadd(t,s)}}pointIsInside(t){const i=this.vertices,n=this.faces,x=this.faceNormals,S=new tt;this.getAveragePointLocal(S);for(let s=0;s<this.faces.length;s++){let T=x[s];const e=i[n[s][0]],a=new tt;t.vsub(e,a);const g=T.dot(a),f=new tt;S.vsub(e,f);const o=T.dot(f);if(g<0&&o>0||g>0&&o<0)return!1}return-1}static project(t,i,n,x,S){const s=t.vertices.length,T=E8;let e=0,a=0;const g=S8,f=t.vertices;g.setZero(),fi.vectorToLocalFrame(n,x,i,T),fi.pointToLocalFrame(n,x,g,g);const o=g.dot(T);a=e=f[0].dot(T);for(let u=1;u<s;u++){const r=f[u].dot(T);r>e&&(e=r),r<a&&(a=r)}if(a-=o,e-=o,a>e){const u=a;a=e,e=u}S[0]=e,S[1]=a}}const b0=[],I0=[];new tt;const E8=new tt,S8=new tt;class lg extends ve{constructor(t){super({type:ve.types.BOX}),this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,i=this.halfExtents.y,n=this.halfExtents.z,x=tt,S=[new x(-t,-i,-n),new x(t,-i,-n),new x(t,i,-n),new x(-t,i,-n),new x(-t,-i,n),new x(t,-i,n),new x(t,i,n),new x(-t,i,n)],s=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],T=[new x(0,0,1),new x(0,1,0),new x(1,0,0)],e=new ud({vertices:S,faces:s,axes:T});this.convexPolyhedronRepresentation=e,e.material=this.material}calculateLocalInertia(t,i){return i===void 0&&(i=new tt),lg.calculateInertia(this.halfExtents,t,i),i}static calculateInertia(t,i,n){const x=t;n.x=1/12*i*(2*x.y*2*x.y+2*x.z*2*x.z),n.y=1/12*i*(2*x.x*2*x.x+2*x.z*2*x.z),n.z=1/12*i*(2*x.y*2*x.y+2*x.x*2*x.x)}getSideNormals(t,i){const n=t,x=this.halfExtents;if(n[0].set(x.x,0,0),n[1].set(0,x.y,0),n[2].set(0,0,x.z),n[3].set(-x.x,0,0),n[4].set(0,-x.y,0),n[5].set(0,0,-x.z),i!==void 0)for(let S=0;S!==n.length;S++)i.vmult(n[S],n[S]);return n}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,i,n){const x=this.halfExtents,S=[[x.x,x.y,x.z],[-x.x,x.y,x.z],[-x.x,-x.y,x.z],[-x.x,-x.y,-x.z],[x.x,-x.y,-x.z],[x.x,x.y,-x.z],[-x.x,x.y,-x.z],[x.x,-x.y,x.z]];for(let s=0;s<S.length;s++)Mo.set(S[s][0],S[s][1],S[s][2]),i.vmult(Mo,Mo),t.vadd(Mo,Mo),n(Mo.x,Mo.y,Mo.z)}calculateWorldAABB(t,i,n,x){const S=this.halfExtents;Yr[0].set(S.x,S.y,S.z),Yr[1].set(-S.x,S.y,S.z),Yr[2].set(-S.x,-S.y,S.z),Yr[3].set(-S.x,-S.y,-S.z),Yr[4].set(S.x,-S.y,-S.z),Yr[5].set(S.x,S.y,-S.z),Yr[6].set(-S.x,S.y,-S.z),Yr[7].set(S.x,-S.y,S.z);const s=Yr[0];i.vmult(s,s),t.vadd(s,s),x.copy(s),n.copy(s);for(let T=1;T<8;T++){const e=Yr[T];i.vmult(e,e),t.vadd(e,e);const a=e.x,g=e.y,f=e.z;a>x.x&&(x.x=a),g>x.y&&(x.y=g),f>x.z&&(x.z=f),a<n.x&&(n.x=a),g<n.y&&(n.y=g),f<n.z&&(n.z=f)}}}const Mo=new tt,Yr=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt],G1={DYNAMIC:1,STATIC:2,KINEMATIC:4},_1={AWAKE:0,SLEEPY:1,SLEEPING:2};class de extends BM{constructor(t){t===void 0&&(t={}),super(),this.id=de.idCounter++,this.index=-1,this.world=null,this.vlambda=new tt,this.collisionFilterGroup=typeof t.collisionFilterGroup=="number"?t.collisionFilterGroup:1,this.collisionFilterMask=typeof t.collisionFilterMask=="number"?t.collisionFilterMask:-1,this.collisionResponse=typeof t.collisionResponse=="boolean"?t.collisionResponse:!0,this.position=new tt,this.previousPosition=new tt,this.interpolatedPosition=new tt,this.initPosition=new tt,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new tt,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new tt,this.force=new tt;const i=typeof t.mass=="number"?t.mass:0;this.mass=i,this.invMass=i>0?1/i:0,this.material=t.material||null,this.linearDamping=typeof t.linearDamping=="number"?t.linearDamping:.01,this.type=i<=0?de.STATIC:de.DYNAMIC,typeof t.type==typeof de.STATIC&&(this.type=t.type),this.allowSleep=typeof t.allowSleep<"u"?t.allowSleep:!0,this.sleepState=de.AWAKE,this.sleepSpeedLimit=typeof t.sleepSpeedLimit<"u"?t.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof t.sleepTimeLimit<"u"?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new tt,this.quaternion=new dn,this.initQuaternion=new dn,this.previousQuaternion=new dn,this.interpolatedQuaternion=new dn,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new tt,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new tt,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new tt,this.invInertia=new tt,this.invInertiaWorld=new Ir,this.invMassSolve=0,this.invInertiaSolve=new tt,this.invInertiaWorldSolve=new Ir,this.fixedRotation=typeof t.fixedRotation<"u"?t.fixedRotation:!1,this.angularDamping=typeof t.angularDamping<"u"?t.angularDamping:.01,this.linearFactor=new tt(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new tt(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new Ks,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new tt,this.isTrigger=!!t.isTrigger,t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=de.AWAKE,this.wakeUpAfterNarrowphase=!1,t===de.SLEEPING&&this.dispatchEvent(de.wakeupEvent)}sleep(){this.sleepState=de.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const i=this.sleepState,n=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),x=this.sleepSpeedLimit**2;i===de.AWAKE&&n<x?(this.sleepState=de.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(de.sleepyEvent)):i===de.SLEEPY&&n>x?this.wakeUp():i===de.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(de.sleepEvent))}}updateSolveMassProperties(){this.sleepState===de.SLEEPING||this.type===de.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,i){return i===void 0&&(i=new tt),t.vsub(this.position,i),this.quaternion.conjugate().vmult(i,i),i}vectorToLocalFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.conjugate().vmult(t,i),i}pointToWorldFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.vmult(t,i),i.vadd(this.position,i),i}vectorToWorldFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.vmult(t,i),i}addShape(t,i,n){const x=new tt,S=new dn;return i&&x.copy(i),n&&S.copy(n),this.shapes.push(t),this.shapeOffsets.push(x),this.shapeOrientations.push(S),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const i=this.shapes.indexOf(t);return i===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(i,1),this.shapeOffsets.splice(i,1),this.shapeOrientations.splice(i,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null,this)}updateBoundingRadius(){const t=this.shapes,i=this.shapeOffsets,n=t.length;let x=0;for(let S=0;S!==n;S++){const s=t[S];s.updateBoundingSphereRadius();const T=i[S].length(),e=s.boundingSphereRadius;T+e>x&&(x=T+e)}this.boundingRadius=x}updateAABB(){const t=this.shapes,i=this.shapeOffsets,n=this.shapeOrientations,x=t.length,S=C8,s=A8,T=this.quaternion,e=this.aabb,a=w8;for(let g=0;g!==x;g++){const f=t[g];T.vmult(i[g],S),S.vadd(this.position,S),T.mult(n[g],s),f.calculateWorldAABB(S,s,a.lowerBound,a.upperBound),g===0?e.copy(a):e.extend(a)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const i=this.invInertia;if(!(i.x===i.y&&i.y===i.z&&!t)){const n=M8,x=R8;n.setRotationFromQuaternion(this.quaternion),n.transpose(x),n.scale(i,n),n.mmult(x,this.invInertiaWorld)}}applyForce(t,i){if(i===void 0&&(i=new tt),this.type!==de.DYNAMIC)return;this.sleepState===de.SLEEPING&&this.wakeUp();const n=P8;i.cross(t,n),this.force.vadd(t,this.force),this.torque.vadd(n,this.torque)}applyLocalForce(t,i){if(i===void 0&&(i=new tt),this.type!==de.DYNAMIC)return;const n=b8,x=I8;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(i,x),this.applyForce(n,x)}applyTorque(t){this.type===de.DYNAMIC&&(this.sleepState===de.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,i){if(i===void 0&&(i=new tt),this.type!==de.DYNAMIC)return;this.sleepState===de.SLEEPING&&this.wakeUp();const n=i,x=L8;x.copy(t),x.scale(this.invMass,x),this.velocity.vadd(x,this.velocity);const S=F8;n.cross(t,S),this.invInertiaWorld.vmult(S,S),this.angularVelocity.vadd(S,this.angularVelocity)}applyLocalImpulse(t,i){if(i===void 0&&(i=new tt),this.type!==de.DYNAMIC)return;const n=D8,x=O8;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(i,x),this.applyImpulse(n,x)}updateMassProperties(){const t=N8;this.invMass=this.mass>0?1/this.mass:0;const i=this.inertia,n=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),lg.calculateInertia(t,this.mass,i),this.invInertia.set(i.x>0&&!n?1/i.x:0,i.y>0&&!n?1/i.y:0,i.z>0&&!n?1/i.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,i){const n=new tt;return t.vsub(this.position,n),this.angularVelocity.cross(n,i),this.velocity.vadd(i,i),i}integrate(t,i,n){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===de.DYNAMIC||this.type===de.KINEMATIC)||this.sleepState===de.SLEEPING)return;const x=this.velocity,S=this.angularVelocity,s=this.position,T=this.force,e=this.torque,a=this.quaternion,g=this.invMass,f=this.invInertiaWorld,o=this.linearFactor,u=g*t;x.x+=T.x*u*o.x,x.y+=T.y*u*o.y,x.z+=T.z*u*o.z;const r=f.elements,h=this.angularFactor,c=e.x*h.x,l=e.y*h.y,p=e.z*h.z;S.x+=t*(r[0]*c+r[1]*l+r[2]*p),S.y+=t*(r[3]*c+r[4]*l+r[5]*p),S.z+=t*(r[6]*c+r[7]*l+r[8]*p),s.x+=x.x*t,s.y+=x.y*t,s.z+=x.z*t,a.integrate(this.angularVelocity,t,this.angularFactor,a),i&&(n?a.normalizeFast():a.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}de.idCounter=0;de.COLLIDE_EVENT_NAME="collide";de.DYNAMIC=G1.DYNAMIC;de.STATIC=G1.STATIC;de.KINEMATIC=G1.KINEMATIC;de.AWAKE=_1.AWAKE;de.SLEEPY=_1.SLEEPY;de.SLEEPING=_1.SLEEPING;de.wakeupEvent={type:"wakeup"};de.sleepyEvent={type:"sleepy"};de.sleepEvent={type:"sleep"};const C8=new tt,A8=new dn,w8=new Ks,M8=new Ir,R8=new Ir;new Ir;const P8=new tt,b8=new tt,I8=new tt,L8=new tt,F8=new tt,D8=new tt,O8=new tt,N8=new tt;class B8{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(t,i,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(t,i){return!((t.collisionFilterGroup&i.collisionFilterMask)===0||(i.collisionFilterGroup&t.collisionFilterMask)===0||((t.type&de.STATIC)!==0||t.sleepState===de.SLEEPING)&&((i.type&de.STATIC)!==0||i.sleepState===de.SLEEPING))}intersectionTest(t,i,n,x){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,i,n,x):this.doBoundingSphereBroadphase(t,i,n,x)}doBoundingSphereBroadphase(t,i,n,x){const S=U8;i.position.vsub(t.position,S);const s=(t.boundingRadius+i.boundingRadius)**2;S.lengthSquared()<s&&(n.push(t),x.push(i))}doBoundingBoxBroadphase(t,i,n,x){t.aabbNeedsUpdate&&t.updateAABB(),i.aabbNeedsUpdate&&i.updateAABB(),t.aabb.overlaps(i.aabb)&&(n.push(t),x.push(i))}makePairsUnique(t,i){const n=V8,x=z8,S=G8,s=t.length;for(let T=0;T!==s;T++)x[T]=t[T],S[T]=i[T];t.length=0,i.length=0;for(let T=0;T!==s;T++){const e=x[T].id,a=S[T].id,g=e<a?`${e},${a}`:`${a},${e}`;n[g]=T,n.keys.push(g)}for(let T=0;T!==n.keys.length;T++){const e=n.keys.pop(),a=n[e];t.push(x[a]),i.push(S[a]),delete n[e]}}setWorld(t){}static boundingSphereCheck(t,i){const n=new tt;t.position.vsub(i.position,n);const x=t.shapes[0],S=i.shapes[0];return Math.pow(x.boundingSphereRadius+S.boundingSphereRadius,2)>n.lengthSquared()}aabbQuery(t,i,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const U8=new tt;new tt;new dn;new tt;const V8={keys:[]},z8=[],G8=[];new tt;new tt;new tt;class _8 extends B8{constructor(){super()}collisionPairs(t,i,n){const x=t.bodies,S=x.length;let s,T;for(let e=0;e!==S;e++)for(let a=0;a!==e;a++)s=x[e],T=x[a],this.needBroadphaseCollision(s,T)&&this.intersectionTest(s,T,i,n)}aabbQuery(t,i,n){n===void 0&&(n=[]);for(let x=0;x<t.bodies.length;x++){const S=t.bodies[x];S.aabbNeedsUpdate&&S.updateAABB(),S.aabb.overlaps(i)&&n.push(S)}return n}}class pm{constructor(){this.rayFromWorld=new tt,this.rayToWorld=new tt,this.hitNormalWorld=new tt,this.hitPointWorld=new tt,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,i,n,x,S,s,T){this.rayFromWorld.copy(t),this.rayToWorld.copy(i),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(x),this.shape=S,this.body=s,this.distance=T}}let UM,VM,zM,GM,_M,WM,HM;const W1={CLOSEST:1,ANY:2,ALL:4};UM=ve.types.SPHERE;VM=ve.types.PLANE;zM=ve.types.BOX;GM=ve.types.CYLINDER;_M=ve.types.CONVEXPOLYHEDRON;WM=ve.types.HEIGHTFIELD;HM=ve.types.TRIMESH;class fn{get[UM](){return this._intersectSphere}get[VM](){return this._intersectPlane}get[zM](){return this._intersectBox}get[GM](){return this._intersectConvex}get[_M](){return this._intersectConvex}get[WM](){return this._intersectHeightfield}get[HM](){return this._intersectTrimesh}constructor(t,i){t===void 0&&(t=new tt),i===void 0&&(i=new tt),this.from=t.clone(),this.to=i.clone(),this.direction=new tt,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=fn.ANY,this.result=new pm,this.hasHit=!1,this.callback=n=>{}}intersectWorld(t,i){return this.mode=i.mode||fn.ANY,this.result=i.result||new pm,this.skipBackfaces=!!i.skipBackfaces,this.collisionFilterMask=typeof i.collisionFilterMask<"u"?i.collisionFilterMask:-1,this.collisionFilterGroup=typeof i.collisionFilterGroup<"u"?i.collisionFilterGroup:-1,this.checkCollisionResponse=typeof i.checkCollisionResponse<"u"?i.checkCollisionResponse:!0,i.from&&this.from.copy(i.from),i.to&&this.to.copy(i.to),this.callback=i.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(p2),L0.length=0,t.broadphase.aabbQuery(t,p2,L0),this.intersectBodies(L0),this.hasHit}intersectBody(t,i){i&&(this.result=i,this.updateDirection());const n=this.checkCollisionResponse;if(n&&!t.collisionResponse||(this.collisionFilterGroup&t.collisionFilterMask)===0||(t.collisionFilterGroup&this.collisionFilterMask)===0)return;const x=W8,S=H8;for(let s=0,T=t.shapes.length;s<T;s++){const e=t.shapes[s];if(!(n&&!e.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[s],S),t.quaternion.vmult(t.shapeOffsets[s],x),x.vadd(t.position,x),this.intersectShape(e,S,x,t),this.result.shouldStop))break}}intersectBodies(t,i){i&&(this.result=i,this.updateDirection());for(let n=0,x=t.length;!this.result.shouldStop&&n<x;n++)this.intersectBody(t[n])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,i,n,x){const S=this.from;if(nB(S,this.direction,n)>t.boundingSphereRadius)return;const T=this[t.type];T&&T.call(this,t,i,n,x,t)}_intersectBox(t,i,n,x,S){return this._intersectConvex(t.convexPolyhedronRepresentation,i,n,x,S)}_intersectPlane(t,i,n,x,S){const s=this.from,T=this.to,e=this.direction,a=new tt(0,0,1);i.vmult(a,a);const g=new tt;s.vsub(n,g);const f=g.dot(a);T.vsub(n,g);const o=g.dot(a);if(f*o>0||s.distanceTo(T)<f)return;const u=a.dot(e);if(Math.abs(u)<this.precision)return;const r=new tt,h=new tt,c=new tt;s.vsub(n,r);const l=-a.dot(r)/u;e.scale(l,h),s.vadd(h,c),this.reportIntersection(a,c,S,x,-1)}getAABB(t){const{lowerBound:i,upperBound:n}=t,x=this.to,S=this.from;i.x=Math.min(x.x,S.x),i.y=Math.min(x.y,S.y),i.z=Math.min(x.z,S.z),n.x=Math.max(x.x,S.x),n.y=Math.max(x.y,S.y),n.z=Math.max(x.z,S.z)}_intersectHeightfield(t,i,n,x,S){t.data,t.elementSize;const s=X8;s.from.copy(this.from),s.to.copy(this.to),fi.pointToLocalFrame(n,i,s.from,s.from),fi.pointToLocalFrame(n,i,s.to,s.to),s.updateDirection();const T=Y8;let e,a,g,f;e=a=0,g=f=t.data.length-1;const o=new Ks;s.getAABB(o),t.getIndexOfPosition(o.lowerBound.x,o.lowerBound.y,T,!0),e=Math.max(e,T[0]),a=Math.max(a,T[1]),t.getIndexOfPosition(o.upperBound.x,o.upperBound.y,T,!0),g=Math.min(g,T[0]+1),f=Math.min(f,T[1]+1);for(let u=e;u<g;u++)for(let r=a;r<f;r++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(u,r,o),!!o.overlapsRay(s)){if(t.getConvexTrianglePillar(u,r,!1),fi.pointToWorldFrame(n,i,t.pillarOffset,mv),this._intersectConvex(t.pillarConvex,i,mv,x,S,v2),this.result.shouldStop)return;t.getConvexTrianglePillar(u,r,!0),fi.pointToWorldFrame(n,i,t.pillarOffset,mv),this._intersectConvex(t.pillarConvex,i,mv,x,S,v2)}}}_intersectSphere(t,i,n,x,S){const s=this.from,T=this.to,e=t.radius,a=(T.x-s.x)**2+(T.y-s.y)**2+(T.z-s.z)**2,g=2*((T.x-s.x)*(s.x-n.x)+(T.y-s.y)*(s.y-n.y)+(T.z-s.z)*(s.z-n.z)),f=(s.x-n.x)**2+(s.y-n.y)**2+(s.z-n.z)**2-e**2,o=g**2-4*a*f,u=k8,r=$8;if(!(o<0))if(o===0)s.lerp(T,o,u),u.vsub(n,r),r.normalize(),this.reportIntersection(r,u,S,x,-1);else{const h=(-g-Math.sqrt(o))/(2*a),c=(-g+Math.sqrt(o))/(2*a);if(h>=0&&h<=1&&(s.lerp(T,h,u),u.vsub(n,r),r.normalize(),this.reportIntersection(r,u,S,x,-1)),this.result.shouldStop)return;c>=0&&c<=1&&(s.lerp(T,c,u),u.vsub(n,r),r.normalize(),this.reportIntersection(r,u,S,x,-1))}}_intersectConvex(t,i,n,x,S,s){const T=K8,e=m2,a=s&&s.faceList||null,g=t.faces,f=t.vertices,o=t.faceNormals,u=this.direction,r=this.from,h=this.to,c=r.distanceTo(h),l=a?a.length:g.length,p=this.result;for(let m=0;!p.shouldStop&&m<l;m++){const v=a?a[m]:m,y=g[v],E=o[v],C=i,w=n;e.copy(f[y[0]]),C.vmult(e,e),e.vadd(w,e),e.vsub(r,e),C.vmult(E,T);const A=u.dot(T);if(Math.abs(A)<this.precision)continue;const M=T.dot(e)/A;if(!(M<0)){u.scale(M,hs),hs.vadd(r,hs),Sr.copy(f[y[0]]),C.vmult(Sr,Sr),w.vadd(Sr,Sr);for(let R=1;!p.shouldStop&&R<y.length-1;R++){kr.copy(f[y[R]]),$r.copy(f[y[R+1]]),C.vmult(kr,kr),C.vmult($r,$r),w.vadd(kr,kr),w.vadd($r,$r);const P=hs.distanceTo(r);!(fn.pointInTriangle(hs,Sr,kr,$r)||fn.pointInTriangle(hs,kr,Sr,$r))||P>c||this.reportIntersection(T,hs,S,x,v)}}}}_intersectTrimesh(t,i,n,x,S,s){const T=j8,e=eB,a=iB,g=m2,f=Z8,o=J8,u=Q8,r=tB,h=q8,c=t.indices;t.vertices;const l=this.from,p=this.to,m=this.direction;a.position.copy(n),a.quaternion.copy(i),fi.vectorToLocalFrame(n,i,m,f),fi.pointToLocalFrame(n,i,l,o),fi.pointToLocalFrame(n,i,p,u),u.x*=t.scale.x,u.y*=t.scale.y,u.z*=t.scale.z,o.x*=t.scale.x,o.y*=t.scale.y,o.z*=t.scale.z,u.vsub(o,f),f.normalize();const v=o.distanceSquared(u);t.tree.rayQuery(this,a,e);for(let y=0,E=e.length;!this.result.shouldStop&&y!==E;y++){const C=e[y];t.getNormal(C,T),t.getVertex(c[C*3],Sr),Sr.vsub(o,g);const w=f.dot(T),A=T.dot(g)/w;if(A<0)continue;f.scale(A,hs),hs.vadd(o,hs),t.getVertex(c[C*3+1],kr),t.getVertex(c[C*3+2],$r);const M=hs.distanceSquared(o);!(fn.pointInTriangle(hs,kr,Sr,$r)||fn.pointInTriangle(hs,Sr,kr,$r))||M>v||(fi.vectorToWorldFrame(i,T,h),fi.pointToWorldFrame(n,i,hs,r),this.reportIntersection(h,r,S,x,C))}e.length=0}reportIntersection(t,i,n,x,S){const s=this.from,T=this.to,e=s.distanceTo(i),a=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(a.hitFaceIndex=typeof S<"u"?S:-1,this.mode){case fn.ALL:this.hasHit=!0,a.set(s,T,t,i,n,x,e),a.hasHit=!0,this.callback(a);break;case fn.CLOSEST:(e<a.distance||!a.hasHit)&&(this.hasHit=!0,a.hasHit=!0,a.set(s,T,t,i,n,x,e));break;case fn.ANY:this.hasHit=!0,a.hasHit=!0,a.set(s,T,t,i,n,x,e),a.shouldStop=!0;break}}static pointInTriangle(t,i,n,x){x.vsub(i,Yl),n.vsub(i,Bc),t.vsub(i,F0);const S=Yl.dot(Yl),s=Yl.dot(Bc),T=Yl.dot(F0),e=Bc.dot(Bc),a=Bc.dot(F0);let g,f;return(g=e*T-s*a)>=0&&(f=S*a-s*T)>=0&&g+f<S*e-s*s}}fn.CLOSEST=W1.CLOSEST;fn.ANY=W1.ANY;fn.ALL=W1.ALL;const p2=new Ks,L0=[],Bc=new tt,F0=new tt,W8=new tt,H8=new dn,hs=new tt,Sr=new tt,kr=new tt,$r=new tt;new tt;new pm;const v2={faceList:[0]},mv=new tt,X8=new fn,Y8=[],k8=new tt,$8=new tt,K8=new tt;new tt;new tt;const m2=new tt,j8=new tt,Z8=new tt,J8=new tt,Q8=new tt,q8=new tt,tB=new tt;new Ks;const eB=[],iB=new fi,Yl=new tt,gv=new tt;function nB(d,t,i){i.vsub(d,Yl);const n=Yl.dot(t);return t.scale(n,gv),gv.vadd(d,gv),i.distanceTo(gv)}class sB{static defaults(t,i){t===void 0&&(t={});for(let n in i)n in t||(t[n]=i[n]);return t}}class g2{constructor(){this.spatial=new tt,this.rotational=new tt}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,i){return t.dot(this.spatial)+i.dot(this.rotational)}}class cp{constructor(t,i,n,x){n===void 0&&(n=-1e6),x===void 0&&(x=1e6),this.id=cp.idCounter++,this.minForce=n,this.maxForce=x,this.bi=t,this.bj=i,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new g2,this.jacobianElementB=new g2,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(t,i,n){const x=i,S=t,s=n;this.a=4/(s*(1+4*x)),this.b=4*x/(1+4*x),this.eps=4/(s*s*S*(1+4*x))}computeB(t,i,n){const x=this.computeGW(),S=this.computeGq(),s=this.computeGiMf();return-S*t-x*i-s*n}computeGq(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,x=this.bj,S=n.position,s=x.position;return t.spatial.dot(S)+i.spatial.dot(s)}computeGW(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,x=this.bj,S=n.velocity,s=x.velocity,T=n.angularVelocity,e=x.angularVelocity;return t.multiplyVectors(S,T)+i.multiplyVectors(s,e)}computeGWlambda(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,x=this.bj,S=n.vlambda,s=x.vlambda,T=n.wlambda,e=x.wlambda;return t.multiplyVectors(S,T)+i.multiplyVectors(s,e)}computeGiMf(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,x=this.bj,S=n.force,s=n.torque,T=x.force,e=x.torque,a=n.invMassSolve,g=x.invMassSolve;return S.scale(a,x2),T.scale(g,y2),n.invInertiaWorldSolve.vmult(s,T2),x.invInertiaWorldSolve.vmult(e,E2),t.multiplyVectors(x2,T2)+i.multiplyVectors(y2,E2)}computeGiMGt(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,x=this.bj,S=n.invMassSolve,s=x.invMassSolve,T=n.invInertiaWorldSolve,e=x.invInertiaWorldSolve;let a=S+s;return T.vmult(t.rotational,xv),a+=xv.dot(t.rotational),e.vmult(i.rotational,xv),a+=xv.dot(i.rotational),a}addToWlambda(t){const i=this.jacobianElementA,n=this.jacobianElementB,x=this.bi,S=this.bj,s=rB;x.vlambda.addScaledVector(x.invMassSolve*t,i.spatial,x.vlambda),S.vlambda.addScaledVector(S.invMassSolve*t,n.spatial,S.vlambda),x.invInertiaWorldSolve.vmult(i.rotational,s),x.wlambda.addScaledVector(t,s,x.wlambda),S.invInertiaWorldSolve.vmult(n.rotational,s),S.wlambda.addScaledVector(t,s,S.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}cp.idCounter=0;const x2=new tt,y2=new tt,T2=new tt,E2=new tt,xv=new tt,rB=new tt;class aB extends cp{constructor(t,i,n){n===void 0&&(n=1e6),super(t,i,0,n),this.restitution=0,this.ri=new tt,this.rj=new tt,this.ni=new tt}computeB(t){const i=this.a,n=this.b,x=this.bi,S=this.bj,s=this.ri,T=this.rj,e=oB,a=lB,g=x.velocity,f=x.angularVelocity;x.force,x.torque;const o=S.velocity,u=S.angularVelocity;S.force,S.torque;const r=hB,h=this.jacobianElementA,c=this.jacobianElementB,l=this.ni;s.cross(l,e),T.cross(l,a),l.negate(h.spatial),e.negate(h.rotational),c.spatial.copy(l),c.rotational.copy(a),r.copy(S.position),r.vadd(T,r),r.vsub(x.position,r),r.vsub(s,r);const p=l.dot(r),m=this.restitution+1,v=m*o.dot(l)-m*g.dot(l)+u.dot(a)-f.dot(e),y=this.computeGiMf();return-p*i-v*n-t*y}getImpactVelocityAlongNormal(){const t=uB,i=fB,n=cB,x=dB,S=pB;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,x),this.bi.getVelocityAtWorldPoint(n,t),this.bj.getVelocityAtWorldPoint(x,i),t.vsub(i,S),this.ni.dot(S)}}const oB=new tt,lB=new tt,hB=new tt,uB=new tt,fB=new tt,cB=new tt,dB=new tt,pB=new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;class S2 extends cp{constructor(t,i,n){super(t,i,-n,n),this.ri=new tt,this.rj=new tt,this.t=new tt}computeB(t){this.a;const i=this.b;this.bi,this.bj;const n=this.ri,x=this.rj,S=vB,s=mB,T=this.t;n.cross(T,S),x.cross(T,s);const e=this.jacobianElementA,a=this.jacobianElementB;T.negate(e.spatial),S.negate(e.rotational),a.spatial.copy(T),a.rotational.copy(s);const g=this.computeGW(),f=this.computeGiMf();return-g*i-t*f}}const vB=new tt,mB=new tt;class fh{constructor(t,i,n){n=sB.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=fh.idCounter++,this.materials=[t,i],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}}fh.idCounter=0;class ch{constructor(t){t===void 0&&(t={});let i="";typeof t=="string"&&(i=t,t={}),this.name=i,this.id=ch.idCounter++,this.friction=typeof t.friction<"u"?t.friction:-1,this.restitution=typeof t.restitution<"u"?t.restitution:-1}}ch.idCounter=0;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new fn;new tt;new tt;new tt;new tt(1,0,0),new tt(0,1,0),new tt(0,0,1);new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;class D0 extends ve{constructor(){super({type:ve.types.PLANE}),this.worldNormal=new tt,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}computeWorldNormal(t){const i=this.worldNormal;i.set(0,0,1),t.vmult(i,i),this.worldNormalNeedsUpdate=!1}calculateLocalInertia(t,i){return i===void 0&&(i=new tt),i}volume(){return Number.MAX_VALUE}calculateWorldAABB(t,i,n,x){Ia.set(0,0,1),i.vmult(Ia,Ia);const S=Number.MAX_VALUE;n.set(-S,-S,-S),x.set(S,S,S),Ia.x===1?x.x=t.x:Ia.x===-1&&(n.x=t.x),Ia.y===1?x.y=t.y:Ia.y===-1&&(n.y=t.y),Ia.z===1?x.z=t.z:Ia.z===-1&&(n.z=t.z)}updateBoundingSphereRadius(){this.boundingSphereRadius=Number.MAX_VALUE}}const Ia=new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new Ks;new tt;new Ks;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new Ks;new tt;new fi;new Ks;class gB{constructor(){this.equations=[]}solve(t,i){return 0}addEquation(t){t.enabled&&!t.bi.isTrigger&&!t.bj.isTrigger&&this.equations.push(t)}removeEquation(t){const i=this.equations,n=i.indexOf(t);n!==-1&&i.splice(n,1)}removeAllEquations(){this.equations.length=0}}class xB extends gB{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(t,i){let n=0;const x=this.iterations,S=this.tolerance*this.tolerance,s=this.equations,T=s.length,e=i.bodies,a=e.length,g=t;let f,o,u,r,h,c;if(T!==0)for(let v=0;v!==a;v++)e[v].updateSolveMassProperties();const l=TB,p=EB,m=yB;l.length=T,p.length=T,m.length=T;for(let v=0;v!==T;v++){const y=s[v];m[v]=0,p[v]=y.computeB(g),l[v]=1/y.computeC()}if(T!==0){for(let E=0;E!==a;E++){const C=e[E],w=C.vlambda,A=C.wlambda;w.set(0,0,0),A.set(0,0,0)}for(n=0;n!==x;n++){r=0;for(let E=0;E!==T;E++){const C=s[E];f=p[E],o=l[E],c=m[E],h=C.computeGWlambda(),u=o*(f-h-C.eps*c),c+u<C.minForce?u=C.minForce-c:c+u>C.maxForce&&(u=C.maxForce-c),m[E]+=u,r+=u>0?u:-u,C.addToWlambda(u)}if(r*r<S)break}for(let E=0;E!==a;E++){const C=e[E],w=C.velocity,A=C.angularVelocity;C.vlambda.vmul(C.linearFactor,C.vlambda),w.vadd(C.vlambda,w),C.wlambda.vmul(C.angularFactor,C.wlambda),A.vadd(C.wlambda,A)}let v=s.length;const y=1/g;for(;v--;)s[v].multiplier=m[v]*y}return n}}const yB=[],TB=[],EB=[];class SB{constructor(){this.objects=[],this.type=Object}release(){const t=arguments.length;for(let i=0;i!==t;i++)this.objects.push(i<0||arguments.length<=i?void 0:arguments[i]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){const i=this.objects;for(;i.length>t;)i.pop();for(;i.length<t;)i.push(this.constructObject());return this}}class CB extends SB{constructor(){super(...arguments),this.type=tt}constructObject(){return new tt}}const Li={sphereSphere:ve.types.SPHERE,spherePlane:ve.types.SPHERE|ve.types.PLANE,boxBox:ve.types.BOX|ve.types.BOX,sphereBox:ve.types.SPHERE|ve.types.BOX,planeBox:ve.types.PLANE|ve.types.BOX,convexConvex:ve.types.CONVEXPOLYHEDRON,sphereConvex:ve.types.SPHERE|ve.types.CONVEXPOLYHEDRON,planeConvex:ve.types.PLANE|ve.types.CONVEXPOLYHEDRON,boxConvex:ve.types.BOX|ve.types.CONVEXPOLYHEDRON,sphereHeightfield:ve.types.SPHERE|ve.types.HEIGHTFIELD,boxHeightfield:ve.types.BOX|ve.types.HEIGHTFIELD,convexHeightfield:ve.types.CONVEXPOLYHEDRON|ve.types.HEIGHTFIELD,sphereParticle:ve.types.PARTICLE|ve.types.SPHERE,planeParticle:ve.types.PLANE|ve.types.PARTICLE,boxParticle:ve.types.BOX|ve.types.PARTICLE,convexParticle:ve.types.PARTICLE|ve.types.CONVEXPOLYHEDRON,cylinderCylinder:ve.types.CYLINDER,sphereCylinder:ve.types.SPHERE|ve.types.CYLINDER,planeCylinder:ve.types.PLANE|ve.types.CYLINDER,boxCylinder:ve.types.BOX|ve.types.CYLINDER,convexCylinder:ve.types.CONVEXPOLYHEDRON|ve.types.CYLINDER,heightfieldCylinder:ve.types.HEIGHTFIELD|ve.types.CYLINDER,particleCylinder:ve.types.PARTICLE|ve.types.CYLINDER,sphereTrimesh:ve.types.SPHERE|ve.types.TRIMESH,planeTrimesh:ve.types.PLANE|ve.types.TRIMESH};class AB{get[Li.sphereSphere](){return this.sphereSphere}get[Li.spherePlane](){return this.spherePlane}get[Li.boxBox](){return this.boxBox}get[Li.sphereBox](){return this.sphereBox}get[Li.planeBox](){return this.planeBox}get[Li.convexConvex](){return this.convexConvex}get[Li.sphereConvex](){return this.sphereConvex}get[Li.planeConvex](){return this.planeConvex}get[Li.boxConvex](){return this.boxConvex}get[Li.sphereHeightfield](){return this.sphereHeightfield}get[Li.boxHeightfield](){return this.boxHeightfield}get[Li.convexHeightfield](){return this.convexHeightfield}get[Li.sphereParticle](){return this.sphereParticle}get[Li.planeParticle](){return this.planeParticle}get[Li.boxParticle](){return this.boxParticle}get[Li.convexParticle](){return this.convexParticle}get[Li.cylinderCylinder](){return this.convexConvex}get[Li.sphereCylinder](){return this.sphereConvex}get[Li.planeCylinder](){return this.planeConvex}get[Li.boxCylinder](){return this.boxConvex}get[Li.convexCylinder](){return this.convexConvex}get[Li.heightfieldCylinder](){return this.heightfieldCylinder}get[Li.particleCylinder](){return this.particleCylinder}get[Li.sphereTrimesh](){return this.sphereTrimesh}get[Li.planeTrimesh](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new CB,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,i,n,x,S,s){let T;this.contactPointPool.length?(T=this.contactPointPool.pop(),T.bi=t,T.bj=i):T=new aB(t,i),T.enabled=t.collisionResponse&&i.collisionResponse&&n.collisionResponse&&x.collisionResponse;const e=this.currentContactMaterial;T.restitution=e.restitution,T.setSpookParams(e.contactEquationStiffness,e.contactEquationRelaxation,this.world.dt);const a=n.material||t.material,g=x.material||i.material;return a&&g&&a.restitution>=0&&g.restitution>=0&&(T.restitution=a.restitution*g.restitution),T.si=S||n,T.sj=s||x,T}createFrictionEquationsFromContact(t,i){const n=t.bi,x=t.bj,S=t.si,s=t.sj,T=this.world,e=this.currentContactMaterial;let a=e.friction;const g=S.material||n.material,f=s.material||x.material;if(g&&f&&g.friction>=0&&f.friction>=0&&(a=g.friction*f.friction),a>0){const o=a*(T.frictionGravity||T.gravity).length();let u=n.invMass+x.invMass;u>0&&(u=1/u);const r=this.frictionEquationPool,h=r.length?r.pop():new S2(n,x,o*u),c=r.length?r.pop():new S2(n,x,o*u);return h.bi=c.bi=n,h.bj=c.bj=x,h.minForce=c.minForce=-o*u,h.maxForce=c.maxForce=o*u,h.ri.copy(t.ri),h.rj.copy(t.rj),c.ri.copy(t.ri),c.rj.copy(t.rj),t.ni.tangents(h.t,c.t),h.setSpookParams(e.frictionEquationStiffness,e.frictionEquationRelaxation,T.dt),c.setSpookParams(e.frictionEquationStiffness,e.frictionEquationRelaxation,T.dt),h.enabled=c.enabled=t.enabled,i.push(h,c),!0}return!1}createFrictionFromAverage(t){let i=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(i,this.frictionResult)||t===1)return;const n=this.frictionResult[this.frictionResult.length-2],x=this.frictionResult[this.frictionResult.length-1];Dl.setZero(),yu.setZero(),Tu.setZero();const S=i.bi;i.bj;for(let T=0;T!==t;T++)i=this.result[this.result.length-1-T],i.bi!==S?(Dl.vadd(i.ni,Dl),yu.vadd(i.ri,yu),Tu.vadd(i.rj,Tu)):(Dl.vsub(i.ni,Dl),yu.vadd(i.rj,yu),Tu.vadd(i.ri,Tu));const s=1/t;yu.scale(s,n.ri),Tu.scale(s,n.rj),x.ri.copy(n.ri),x.rj.copy(n.rj),Dl.normalize(),Dl.tangents(n.t,x.t)}getContacts(t,i,n,x,S,s,T){this.contactPointPool=S,this.frictionEquationPool=T,this.result=x,this.frictionResult=s;const e=RB,a=PB,g=wB,f=MB;for(let o=0,u=t.length;o!==u;o++){const r=t[o],h=i[o];let c=null;r.material&&h.material&&(c=n.getContactMaterial(r.material,h.material)||null);const l=r.type&de.KINEMATIC&&h.type&de.STATIC||r.type&de.STATIC&&h.type&de.KINEMATIC||r.type&de.KINEMATIC&&h.type&de.KINEMATIC;for(let p=0;p<r.shapes.length;p++){r.quaternion.mult(r.shapeOrientations[p],e),r.quaternion.vmult(r.shapeOffsets[p],g),g.vadd(r.position,g);const m=r.shapes[p];for(let v=0;v<h.shapes.length;v++){h.quaternion.mult(h.shapeOrientations[v],a),h.quaternion.vmult(h.shapeOffsets[v],f),f.vadd(h.position,f);const y=h.shapes[v];if(!(m.collisionFilterMask&y.collisionFilterGroup&&y.collisionFilterMask&m.collisionFilterGroup)||g.distanceTo(f)>m.boundingSphereRadius+y.boundingSphereRadius)continue;let E=null;m.material&&y.material&&(E=n.getContactMaterial(m.material,y.material)||null),this.currentContactMaterial=E||c||n.defaultContactMaterial;const C=m.type|y.type,w=this[C];if(w){let A=!1;m.type<y.type?A=w.call(this,m,y,g,f,e,a,r,h,m,y,l):A=w.call(this,y,m,f,g,a,e,h,r,m,y,l),A&&l&&(n.shapeOverlapKeeper.set(m.id,y.id),n.bodyOverlapKeeper.set(r.id,h.id))}}}}}sphereSphere(t,i,n,x,S,s,T,e,a,g,f){if(f)return n.distanceSquared(x)<(t.radius+i.radius)**2;const o=this.createContactEquation(T,e,t,i,a,g);x.vsub(n,o.ni),o.ni.normalize(),o.ri.copy(o.ni),o.rj.copy(o.ni),o.ri.scale(t.radius,o.ri),o.rj.scale(-i.radius,o.rj),o.ri.vadd(n,o.ri),o.ri.vsub(T.position,o.ri),o.rj.vadd(x,o.rj),o.rj.vsub(e.position,o.rj),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}spherePlane(t,i,n,x,S,s,T,e,a,g,f){const o=this.createContactEquation(T,e,t,i,a,g);if(o.ni.set(0,0,1),s.vmult(o.ni,o.ni),o.ni.negate(o.ni),o.ni.normalize(),o.ni.scale(t.radius,o.ri),n.vsub(x,yv),o.ni.scale(o.ni.dot(yv),C2),yv.vsub(C2,o.rj),-yv.dot(o.ni)<=t.radius){if(f)return!0;const u=o.ri,r=o.rj;u.vadd(n,u),u.vsub(T.position,u),r.vadd(x,r),r.vsub(e.position,r),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}}boxBox(t,i,n,x,S,s,T,e,a,g,f){return t.convexPolyhedronRepresentation.material=t.material,i.convexPolyhedronRepresentation.material=i.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,i.convexPolyhedronRepresentation.collisionResponse=i.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,i.convexPolyhedronRepresentation,n,x,S,s,T,e,t,i,f)}sphereBox(t,i,n,x,S,s,T,e,a,g,f){const o=this.v3pool,u=tU;n.vsub(x,Tv),i.getSideNormals(u,s);const r=t.radius;let h=!1;const c=iU,l=nU,p=sU;let m=null,v=0,y=0,E=0,C=null;for(let L=0,D=u.length;L!==D&&h===!1;L++){const O=JB;O.copy(u[L]);const z=O.length();O.normalize();const _=Tv.dot(O);if(_<z+r&&_>0){const X=QB,H=qB;X.copy(u[(L+1)%3]),H.copy(u[(L+2)%3]);const U=X.length(),G=H.length();X.normalize(),H.normalize();const N=Tv.dot(X),W=Tv.dot(H);if(N<U&&N>-U&&W<G&&W>-G){const V=Math.abs(_-z-r);if((C===null||V<C)&&(C=V,y=N,E=W,m=z,c.copy(O),l.copy(X),p.copy(H),v++,f))return!0}}}if(v){h=!0;const L=this.createContactEquation(T,e,t,i,a,g);c.scale(-r,L.ri),L.ni.copy(c),L.ni.negate(L.ni),c.scale(m,c),l.scale(y,l),c.vadd(l,c),p.scale(E,p),c.vadd(p,L.rj),L.ri.vadd(n,L.ri),L.ri.vsub(T.position,L.ri),L.rj.vadd(x,L.rj),L.rj.vsub(e.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}let w=o.get();const A=eU;for(let L=0;L!==2&&!h;L++)for(let D=0;D!==2&&!h;D++)for(let O=0;O!==2&&!h;O++)if(w.set(0,0,0),L?w.vadd(u[0],w):w.vsub(u[0],w),D?w.vadd(u[1],w):w.vsub(u[1],w),O?w.vadd(u[2],w):w.vsub(u[2],w),x.vadd(w,A),A.vsub(n,A),A.lengthSquared()<r*r){if(f)return!0;h=!0;const z=this.createContactEquation(T,e,t,i,a,g);z.ri.copy(A),z.ri.normalize(),z.ni.copy(z.ri),z.ri.scale(r,z.ri),z.rj.copy(w),z.ri.vadd(n,z.ri),z.ri.vsub(T.position,z.ri),z.rj.vadd(x,z.rj),z.rj.vsub(e.position,z.rj),this.result.push(z),this.createFrictionEquationsFromContact(z,this.frictionResult)}o.release(w),w=null;const M=o.get(),R=o.get(),P=o.get(),b=o.get(),F=o.get(),I=u.length;for(let L=0;L!==I&&!h;L++)for(let D=0;D!==I&&!h;D++)if(L%3!==D%3){u[D].cross(u[L],M),M.normalize(),u[L].vadd(u[D],R),P.copy(n),P.vsub(R,P),P.vsub(x,P);const O=P.dot(M);M.scale(O,b);let z=0;for(;z===L%3||z===D%3;)z++;F.copy(n),F.vsub(b,F),F.vsub(R,F),F.vsub(x,F);const _=Math.abs(O),X=F.length();if(_<u[z].length()&&X<r){if(f)return!0;h=!0;const H=this.createContactEquation(T,e,t,i,a,g);R.vadd(b,H.rj),H.rj.copy(H.rj),F.negate(H.ni),H.ni.normalize(),H.ri.copy(H.rj),H.ri.vadd(x,H.ri),H.ri.vsub(n,H.ri),H.ri.normalize(),H.ri.scale(r,H.ri),H.ri.vadd(n,H.ri),H.ri.vsub(T.position,H.ri),H.rj.vadd(x,H.rj),H.rj.vsub(e.position,H.rj),this.result.push(H),this.createFrictionEquationsFromContact(H,this.frictionResult)}}o.release(M,R,P,b,F)}planeBox(t,i,n,x,S,s,T,e,a,g,f){return i.convexPolyhedronRepresentation.material=i.material,i.convexPolyhedronRepresentation.collisionResponse=i.collisionResponse,i.convexPolyhedronRepresentation.id=i.id,this.planeConvex(t,i.convexPolyhedronRepresentation,n,x,S,s,T,e,t,i,f)}convexConvex(t,i,n,x,S,s,T,e,a,g,f,o,u){const r=yU;if(!(n.distanceTo(x)>t.boundingSphereRadius+i.boundingSphereRadius)&&t.findSeparatingAxis(i,n,S,x,s,r,o,u)){const h=[],c=TU;t.clipAgainstHull(n,S,i,x,s,r,-100,100,h);let l=0;for(let p=0;p!==h.length;p++){if(f)return!0;const m=this.createContactEquation(T,e,t,i,a,g),v=m.ri,y=m.rj;r.negate(m.ni),h[p].normal.negate(c),c.scale(h[p].depth,c),h[p].point.vadd(c,v),y.copy(h[p].point),v.vsub(n,v),y.vsub(x,y),v.vadd(n,v),v.vsub(T.position,v),y.vadd(x,y),y.vsub(e.position,y),this.result.push(m),l++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(m,this.frictionResult)}this.enableFrictionReduction&&l&&this.createFrictionFromAverage(l)}}sphereConvex(t,i,n,x,S,s,T,e,a,g,f){const o=this.v3pool;n.vsub(x,rU);const u=i.faceNormals,r=i.faces,h=i.vertices,c=t.radius;let l=!1;for(let p=0;p!==h.length;p++){const m=h[p],v=hU;s.vmult(m,v),x.vadd(v,v);const y=lU;if(v.vsub(n,y),y.lengthSquared()<c*c){if(f)return!0;l=!0;const E=this.createContactEquation(T,e,t,i,a,g);E.ri.copy(y),E.ri.normalize(),E.ni.copy(E.ri),E.ri.scale(c,E.ri),v.vsub(x,E.rj),E.ri.vadd(n,E.ri),E.ri.vsub(T.position,E.ri),E.rj.vadd(x,E.rj),E.rj.vsub(e.position,E.rj),this.result.push(E),this.createFrictionEquationsFromContact(E,this.frictionResult);return}}for(let p=0,m=r.length;p!==m&&l===!1;p++){const v=u[p],y=r[p],E=uU;s.vmult(v,E);const C=fU;s.vmult(h[y[0]],C),C.vadd(x,C);const w=cU;E.scale(-c,w),n.vadd(w,w);const A=dU;w.vsub(C,A);const M=A.dot(E),R=pU;if(n.vsub(C,R),M<0&&R.dot(E)>0){const P=[];for(let b=0,F=y.length;b!==F;b++){const I=o.get();s.vmult(h[y[b]],I),x.vadd(I,I),P.push(I)}if(ZB(P,E,n)){if(f)return!0;l=!0;const b=this.createContactEquation(T,e,t,i,a,g);E.scale(-c,b.ri),E.negate(b.ni);const F=o.get();E.scale(-M,F);const I=o.get();E.scale(-c,I),n.vsub(x,b.rj),b.rj.vadd(I,b.rj),b.rj.vadd(F,b.rj),b.rj.vadd(x,b.rj),b.rj.vsub(e.position,b.rj),b.ri.vadd(n,b.ri),b.ri.vsub(T.position,b.ri),o.release(F),o.release(I),this.result.push(b),this.createFrictionEquationsFromContact(b,this.frictionResult);for(let L=0,D=P.length;L!==D;L++)o.release(P[L]);return}else for(let b=0;b!==y.length;b++){const F=o.get(),I=o.get();s.vmult(h[y[(b+1)%y.length]],F),s.vmult(h[y[(b+2)%y.length]],I),x.vadd(F,F),x.vadd(I,I);const L=aU;I.vsub(F,L);const D=oU;L.unit(D);const O=o.get(),z=o.get();n.vsub(F,z);const _=z.dot(D);D.scale(_,O),O.vadd(F,O);const X=o.get();if(O.vsub(n,X),_>0&&_*_<L.lengthSquared()&&X.lengthSquared()<c*c){if(f)return!0;const H=this.createContactEquation(T,e,t,i,a,g);O.vsub(x,H.rj),O.vsub(n,H.ni),H.ni.normalize(),H.ni.scale(c,H.ri),H.rj.vadd(x,H.rj),H.rj.vsub(e.position,H.rj),H.ri.vadd(n,H.ri),H.ri.vsub(T.position,H.ri),this.result.push(H),this.createFrictionEquationsFromContact(H,this.frictionResult);for(let U=0,G=P.length;U!==G;U++)o.release(P[U]);o.release(F),o.release(I),o.release(O),o.release(X),o.release(z);return}o.release(F),o.release(I),o.release(O),o.release(X),o.release(z)}for(let b=0,F=P.length;b!==F;b++)o.release(P[b])}}}planeConvex(t,i,n,x,S,s,T,e,a,g,f){const o=vU,u=mU;u.set(0,0,1),S.vmult(u,u);let r=0;const h=gU;for(let c=0;c!==i.vertices.length;c++)if(o.copy(i.vertices[c]),s.vmult(o,o),x.vadd(o,o),o.vsub(n,h),u.dot(h)<=0){if(f)return!0;const p=this.createContactEquation(T,e,t,i,a,g),m=xU;u.scale(u.dot(h),m),o.vsub(m,m),m.vsub(n,p.ri),p.ni.copy(u),o.vsub(x,p.rj),p.ri.vadd(n,p.ri),p.ri.vsub(T.position,p.ri),p.rj.vadd(x,p.rj),p.rj.vsub(e.position,p.rj),this.result.push(p),r++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(p,this.frictionResult)}this.enableFrictionReduction&&r&&this.createFrictionFromAverage(r)}boxConvex(t,i,n,x,S,s,T,e,a,g,f){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,i,n,x,S,s,T,e,t,i,f)}sphereHeightfield(t,i,n,x,S,s,T,e,a,g,f){const o=i.data,u=t.radius,r=i.elementSize,h=FU,c=LU;fi.pointToLocalFrame(x,s,n,c);let l=Math.floor((c.x-u)/r)-1,p=Math.ceil((c.x+u)/r)+1,m=Math.floor((c.y-u)/r)-1,v=Math.ceil((c.y+u)/r)+1;if(p<0||v<0||l>o.length||m>o[0].length)return;l<0&&(l=0),p<0&&(p=0),m<0&&(m=0),v<0&&(v=0),l>=o.length&&(l=o.length-1),p>=o.length&&(p=o.length-1),v>=o[0].length&&(v=o[0].length-1),m>=o[0].length&&(m=o[0].length-1);const y=[];i.getRectMinMax(l,m,p,v,y);const E=y[0],C=y[1];if(c.z-u>C||c.z+u<E)return;const w=this.result;for(let A=l;A<p;A++)for(let M=m;M<v;M++){const R=w.length;let P=!1;if(i.getConvexTrianglePillar(A,M,!1),fi.pointToWorldFrame(x,s,i.pillarOffset,h),n.distanceTo(h)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(P=this.sphereConvex(t,i.pillarConvex,n,h,S,s,T,e,t,i,f)),f&&P||(i.getConvexTrianglePillar(A,M,!0),fi.pointToWorldFrame(x,s,i.pillarOffset,h),n.distanceTo(h)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(P=this.sphereConvex(t,i.pillarConvex,n,h,S,s,T,e,t,i,f)),f&&P))return!0;if(w.length-R>2)return}}boxHeightfield(t,i,n,x,S,s,T,e,a,g,f){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,i,n,x,S,s,T,e,t,i,f)}convexHeightfield(t,i,n,x,S,s,T,e,a,g,f){const o=i.data,u=i.elementSize,r=t.boundingSphereRadius,h=bU,c=IU,l=PU;fi.pointToLocalFrame(x,s,n,l);let p=Math.floor((l.x-r)/u)-1,m=Math.ceil((l.x+r)/u)+1,v=Math.floor((l.y-r)/u)-1,y=Math.ceil((l.y+r)/u)+1;if(m<0||y<0||p>o.length||v>o[0].length)return;p<0&&(p=0),m<0&&(m=0),v<0&&(v=0),y<0&&(y=0),p>=o.length&&(p=o.length-1),m>=o.length&&(m=o.length-1),y>=o[0].length&&(y=o[0].length-1),v>=o[0].length&&(v=o[0].length-1);const E=[];i.getRectMinMax(p,v,m,y,E);const C=E[0],w=E[1];if(!(l.z-r>w||l.z+r<C))for(let A=p;A<m;A++)for(let M=v;M<y;M++){let R=!1;if(i.getConvexTrianglePillar(A,M,!1),fi.pointToWorldFrame(x,s,i.pillarOffset,h),n.distanceTo(h)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(R=this.convexConvex(t,i.pillarConvex,n,h,S,s,T,e,null,null,f,c,null)),f&&R||(i.getConvexTrianglePillar(A,M,!0),fi.pointToWorldFrame(x,s,i.pillarOffset,h),n.distanceTo(h)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(R=this.convexConvex(t,i.pillarConvex,n,h,S,s,T,e,null,null,f,c,null)),f&&R))return!0}}sphereParticle(t,i,n,x,S,s,T,e,a,g,f){const o=AU;if(o.set(0,0,1),x.vsub(n,o),o.lengthSquared()<=t.radius*t.radius){if(f)return!0;const r=this.createContactEquation(e,T,i,t,a,g);o.normalize(),r.rj.copy(o),r.rj.scale(t.radius,r.rj),r.ni.copy(o),r.ni.negate(r.ni),r.ri.set(0,0,0),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}planeParticle(t,i,n,x,S,s,T,e,a,g,f){const o=EU;o.set(0,0,1),T.quaternion.vmult(o,o);const u=SU;if(x.vsub(T.position,u),o.dot(u)<=0){if(f)return!0;const h=this.createContactEquation(e,T,i,t,a,g);h.ni.copy(o),h.ni.negate(h.ni),h.ri.set(0,0,0);const c=CU;o.scale(o.dot(x),c),x.vsub(c,c),h.rj.copy(c),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)}}boxParticle(t,i,n,x,S,s,T,e,a,g,f){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,i,n,x,S,s,T,e,t,i,f)}convexParticle(t,i,n,x,S,s,T,e,a,g,f){let o=-1;const u=MU,r=RU;let h=null;const c=wU;if(c.copy(x),c.vsub(n,c),S.conjugate(A2),A2.vmult(c,c),t.pointIsInside(c)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(n,S),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(S);for(let l=0,p=t.faces.length;l!==p;l++){const m=[t.worldVertices[t.faces[l][0]]],v=t.worldFaceNormals[l];x.vsub(m[0],w2);const y=-v.dot(w2);if(h===null||Math.abs(y)<Math.abs(h)){if(f)return!0;h=y,o=l,u.copy(v)}}if(o!==-1){const l=this.createContactEquation(e,T,i,t,a,g);u.scale(h,r),r.vadd(x,r),r.vsub(n,r),l.rj.copy(r),u.negate(l.ni),l.ri.set(0,0,0);const p=l.ri,m=l.rj;p.vadd(x,p),p.vsub(e.position,p),m.vadd(n,m),m.vsub(T.position,m),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(t,i,n,x,S,s,T,e,a,g,f){return this.convexHeightfield(i,t,x,n,s,S,e,T,a,g,f)}particleCylinder(t,i,n,x,S,s,T,e,a,g,f){return this.convexParticle(i,t,x,n,s,S,e,T,a,g,f)}sphereTrimesh(t,i,n,x,S,s,T,e,a,g,f){const o=BB,u=UB,r=VB,h=zB,c=GB,l=_B,p=YB,m=NB,v=DB,y=kB;fi.pointToLocalFrame(x,s,n,c);const E=t.radius;p.lowerBound.set(c.x-E,c.y-E,c.z-E),p.upperBound.set(c.x+E,c.y+E,c.z+E),i.getTrianglesInAABB(p,y);const C=OB,w=t.radius*t.radius;for(let b=0;b<y.length;b++)for(let F=0;F<3;F++)if(i.getVertex(i.indices[y[b]*3+F],C),C.vsub(c,v),v.lengthSquared()<=w){if(m.copy(C),fi.pointToWorldFrame(x,s,m,C),C.vsub(n,v),f)return!0;let I=this.createContactEquation(T,e,t,i,a,g);I.ni.copy(v),I.ni.normalize(),I.ri.copy(I.ni),I.ri.scale(t.radius,I.ri),I.ri.vadd(n,I.ri),I.ri.vsub(T.position,I.ri),I.rj.copy(C),I.rj.vsub(e.position,I.rj),this.result.push(I),this.createFrictionEquationsFromContact(I,this.frictionResult)}for(let b=0;b<y.length;b++)for(let F=0;F<3;F++){i.getVertex(i.indices[y[b]*3+F],o),i.getVertex(i.indices[y[b]*3+(F+1)%3],u),u.vsub(o,r),c.vsub(u,l);const I=l.dot(r);c.vsub(o,l);let L=l.dot(r);if(L>0&&I<0&&(c.vsub(o,l),h.copy(r),h.normalize(),L=l.dot(h),h.scale(L,l),l.vadd(o,l),l.distanceTo(c)<t.radius)){if(f)return!0;const O=this.createContactEquation(T,e,t,i,a,g);l.vsub(c,O.ni),O.ni.normalize(),O.ni.scale(t.radius,O.ri),O.ri.vadd(n,O.ri),O.ri.vsub(T.position,O.ri),fi.pointToWorldFrame(x,s,l,l),l.vsub(e.position,O.rj),fi.vectorToWorldFrame(s,O.ni,O.ni),fi.vectorToWorldFrame(s,O.ri,O.ri),this.result.push(O),this.createFrictionEquationsFromContact(O,this.frictionResult)}}const A=WB,M=HB,R=XB,P=FB;for(let b=0,F=y.length;b!==F;b++){i.getTriangleVertices(y[b],A,M,R),i.getNormal(y[b],P),c.vsub(A,l);let I=l.dot(P);if(P.scale(I,l),c.vsub(l,l),I=l.distanceTo(c),fn.pointInTriangle(l,A,M,R)&&I<t.radius){if(f)return!0;let L=this.createContactEquation(T,e,t,i,a,g);l.vsub(c,L.ni),L.ni.normalize(),L.ni.scale(t.radius,L.ri),L.ri.vadd(n,L.ri),L.ri.vsub(T.position,L.ri),fi.pointToWorldFrame(x,s,l,l),l.vsub(e.position,L.rj),fi.vectorToWorldFrame(s,L.ni,L.ni),fi.vectorToWorldFrame(s,L.ri,L.ri),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}}y.length=0}planeTrimesh(t,i,n,x,S,s,T,e,a,g,f){const o=new tt,u=bB;u.set(0,0,1),S.vmult(u,u);for(let r=0;r<i.vertices.length/3;r++){i.getVertex(r,o);const h=new tt;h.copy(o),fi.pointToWorldFrame(x,s,h,o);const c=IB;if(o.vsub(n,c),u.dot(c)<=0){if(f)return!0;const p=this.createContactEquation(T,e,t,i,a,g);p.ni.copy(u);const m=LB;u.scale(c.dot(u),m),o.vsub(m,m),p.ri.copy(m),p.ri.vsub(T.position,p.ri),p.rj.copy(o),p.rj.vsub(e.position,p.rj),this.result.push(p),this.createFrictionEquationsFromContact(p,this.frictionResult)}}}}const Dl=new tt,yu=new tt,Tu=new tt,wB=new tt,MB=new tt,RB=new dn,PB=new dn,bB=new tt,IB=new tt,LB=new tt,FB=new tt,DB=new tt;new tt;const OB=new tt,NB=new tt,BB=new tt,UB=new tt,VB=new tt,zB=new tt,GB=new tt,_B=new tt,WB=new tt,HB=new tt,XB=new tt,YB=new Ks,kB=[],yv=new tt,C2=new tt,$B=new tt,KB=new tt,jB=new tt;function ZB(d,t,i){let n=null;const x=d.length;for(let S=0;S!==x;S++){const s=d[S],T=$B;d[(S+1)%x].vsub(s,T);const e=KB;T.cross(t,e);const a=jB;i.vsub(s,a);const g=e.dot(a);if(n===null||g>0&&n===!0||g<=0&&n===!1){n===null&&(n=g>0);continue}else return!1}return!0}const Tv=new tt,JB=new tt,QB=new tt,qB=new tt,tU=[new tt,new tt,new tt,new tt,new tt,new tt],eU=new tt,iU=new tt,nU=new tt,sU=new tt,rU=new tt,aU=new tt,oU=new tt,lU=new tt,hU=new tt,uU=new tt,fU=new tt,cU=new tt,dU=new tt,pU=new tt;new tt;new tt;const vU=new tt,mU=new tt,gU=new tt,xU=new tt,yU=new tt,TU=new tt,EU=new tt,SU=new tt,CU=new tt,AU=new tt,A2=new dn,wU=new tt;new tt;const MU=new tt,w2=new tt,RU=new tt,PU=new tt,bU=new tt,IU=[0],LU=new tt,FU=new tt;class M2{constructor(){this.current=[],this.previous=[]}getKey(t,i){if(i<t){const n=i;i=t,t=n}return t<<16|i}set(t,i){const n=this.getKey(t,i),x=this.current;let S=0;for(;n>x[S];)S++;if(n!==x[S]){for(let s=x.length-1;s>=S;s--)x[s+1]=x[s];x[S]=n}}tick(){const t=this.current;this.current=this.previous,this.previous=t,this.current.length=0}getDiff(t,i){const n=this.current,x=this.previous,S=n.length,s=x.length;let T=0;for(let e=0;e<S;e++){let a=!1;const g=n[e];for(;g>x[T];)T++;a=g===x[T],a||R2(t,g)}T=0;for(let e=0;e<s;e++){let a=!1;const g=x[e];for(;g>n[T];)T++;a=n[T]===g,a||R2(i,g)}}}function R2(d,t){d.push((t&4294901760)>>16,t&65535)}const O0=(d,t)=>d<t?`${d}-${t}`:`${t}-${d}`;class DU{constructor(){this.data={keys:[]}}get(t,i){const n=O0(t,i);return this.data[n]}set(t,i,n){const x=O0(t,i);this.get(t,i)||this.data.keys.push(x),this.data[x]=n}delete(t,i){const n=O0(t,i),x=this.data.keys.indexOf(n);x!==-1&&this.data.keys.splice(x,1),delete this.data[n]}reset(){const t=this.data,i=t.keys;for(;i.length>0;){const n=i.pop();delete t[n]}}}class OU extends BM{constructor(t){t===void 0&&(t={}),super(),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=t.quatNormalizeSkip!==void 0?t.quatNormalizeSkip:0,this.quatNormalizeFast=t.quatNormalizeFast!==void 0?t.quatNormalizeFast:!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new tt,t.gravity&&this.gravity.copy(t.gravity),t.frictionGravity&&(this.frictionGravity=new tt,this.frictionGravity.copy(t.frictionGravity)),this.broadphase=t.broadphase!==void 0?t.broadphase:new _8,this.bodies=[],this.hasActiveBodies=!1,this.solver=t.solver!==void 0?t.solver:new xB,this.constraints=[],this.narrowphase=new AB(this),this.collisionMatrix=new c2,this.collisionMatrixPrevious=new c2,this.bodyOverlapKeeper=new M2,this.shapeOverlapKeeper=new M2,this.contactmaterials=[],this.contactMaterialTable=new DU,this.defaultMaterial=new ch("default"),this.defaultContactMaterial=new fh(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(t,i){return this.contactMaterialTable.get(t.id,i.id)}collisionMatrixTick(){const t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(t){this.constraints.push(t)}removeConstraint(t){const i=this.constraints.indexOf(t);i!==-1&&this.constraints.splice(i,1)}rayTest(t,i,n){n instanceof pm?this.raycastClosest(t,i,{skipBackfaces:!0},n):this.raycastAll(t,i,{skipBackfaces:!0},n)}raycastAll(t,i,n,x){return n===void 0&&(n={}),n.mode=fn.ALL,n.from=t,n.to=i,n.callback=x,N0.intersectWorld(this,n)}raycastAny(t,i,n,x){return n===void 0&&(n={}),n.mode=fn.ANY,n.from=t,n.to=i,n.result=x,N0.intersectWorld(this,n)}raycastClosest(t,i,n,x){return n===void 0&&(n={}),n.mode=fn.CLOSEST,n.from=t,n.to=i,n.result=x,N0.intersectWorld(this,n)}addBody(t){this.bodies.includes(t)||(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof de&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))}removeBody(t){t.world=null;const i=this.bodies.length-1,n=this.bodies,x=n.indexOf(t);if(x!==-1){n.splice(x,1);for(let S=0;S!==n.length;S++)n[S].index=S;this.collisionMatrix.setNumObjects(i),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(t){return this.idToBodyMap[t]}getShapeById(t){const i=this.bodies;for(let n=0;n<i.length;n++){const x=i[n].shapes;for(let S=0;S<x.length;S++){const s=x[S];if(s.id===t)return s}}return null}addContactMaterial(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)}removeContactMaterial(t){const i=this.contactmaterials.indexOf(t);i!==-1&&(this.contactmaterials.splice(i,1),this.contactMaterialTable.delete(t.materials[0].id,t.materials[1].id))}fixedStep(t,i){t===void 0&&(t=1/60),i===void 0&&(i=10);const n=gn.now()/1e3;if(!this.lastCallTime)this.step(t,void 0,i);else{const x=n-this.lastCallTime;this.step(t,x,i)}this.lastCallTime=n}step(t,i,n){if(n===void 0&&(n=10),i===void 0)this.internalStep(t),this.time+=t;else{this.accumulator+=i;const x=gn.now();let S=0;for(;this.accumulator>=t&&S<n&&(this.internalStep(t),this.accumulator-=t,S++,!(gn.now()-x>t*1e3)););this.accumulator=this.accumulator%t;const s=this.accumulator/t;for(let T=0;T!==this.bodies.length;T++){const e=this.bodies[T];e.previousPosition.lerp(e.position,s,e.interpolatedPosition),e.previousQuaternion.slerp(e.quaternion,s,e.interpolatedQuaternion),e.previousQuaternion.normalize()}this.time+=i}}internalStep(t){this.dt=t;const i=this.contacts,n=zU,x=GU,S=this.bodies.length,s=this.bodies,T=this.solver,e=this.gravity,a=this.doProfiling,g=this.profile,f=de.DYNAMIC;let o=-1/0;const u=this.constraints,r=VU;e.length();const h=e.x,c=e.y,l=e.z;let p=0;for(a&&(o=gn.now()),p=0;p!==S;p++){const b=s[p];if(b.type===f){const F=b.force,I=b.mass;F.x+=I*h,F.y+=I*c,F.z+=I*l}}for(let b=0,F=this.subsystems.length;b!==F;b++)this.subsystems[b].update();a&&(o=gn.now()),n.length=0,x.length=0,this.broadphase.collisionPairs(this,n,x),a&&(g.broadphase=gn.now()-o);let m=u.length;for(p=0;p!==m;p++){const b=u[p];if(!b.collideConnected)for(let F=n.length-1;F>=0;F-=1)(b.bodyA===n[F]&&b.bodyB===x[F]||b.bodyB===n[F]&&b.bodyA===x[F])&&(n.splice(F,1),x.splice(F,1))}this.collisionMatrixTick(),a&&(o=gn.now());const v=UU,y=i.length;for(p=0;p!==y;p++)v.push(i[p]);i.length=0;const E=this.frictionEquations.length;for(p=0;p!==E;p++)r.push(this.frictionEquations[p]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(n,x,this,i,v,this.frictionEquations,r),a&&(g.narrowphase=gn.now()-o),a&&(o=gn.now()),p=0;p<this.frictionEquations.length;p++)T.addEquation(this.frictionEquations[p]);const C=i.length;for(let b=0;b!==C;b++){const F=i[b],I=F.bi,L=F.bj,D=F.si,O=F.sj;let z;if(I.material&&L.material?z=this.getContactMaterial(I.material,L.material)||this.defaultContactMaterial:z=this.defaultContactMaterial,z.friction,I.material&&L.material&&(I.material.friction>=0&&L.material.friction>=0&&I.material.friction*L.material.friction,I.material.restitution>=0&&L.material.restitution>=0&&(F.restitution=I.material.restitution*L.material.restitution)),T.addEquation(F),I.allowSleep&&I.type===de.DYNAMIC&&I.sleepState===de.SLEEPING&&L.sleepState===de.AWAKE&&L.type!==de.STATIC){const _=L.velocity.lengthSquared()+L.angularVelocity.lengthSquared(),X=L.sleepSpeedLimit**2;_>=X*2&&(I.wakeUpAfterNarrowphase=!0)}if(L.allowSleep&&L.type===de.DYNAMIC&&L.sleepState===de.SLEEPING&&I.sleepState===de.AWAKE&&I.type!==de.STATIC){const _=I.velocity.lengthSquared()+I.angularVelocity.lengthSquared(),X=I.sleepSpeedLimit**2;_>=X*2&&(L.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(I,L,!0),this.collisionMatrixPrevious.get(I,L)||(Uc.body=L,Uc.contact=F,I.dispatchEvent(Uc),Uc.body=I,L.dispatchEvent(Uc)),this.bodyOverlapKeeper.set(I.id,L.id),this.shapeOverlapKeeper.set(D.id,O.id)}for(this.emitContactEvents(),a&&(g.makeContactConstraints=gn.now()-o,o=gn.now()),p=0;p!==S;p++){const b=s[p];b.wakeUpAfterNarrowphase&&(b.wakeUp(),b.wakeUpAfterNarrowphase=!1)}for(m=u.length,p=0;p!==m;p++){const b=u[p];b.update();for(let F=0,I=b.equations.length;F!==I;F++){const L=b.equations[F];T.addEquation(L)}}T.solve(t,this),a&&(g.solve=gn.now()-o),T.removeAllEquations();const w=Math.pow;for(p=0;p!==S;p++){const b=s[p];if(b.type&f){const F=w(1-b.linearDamping,t),I=b.velocity;I.scale(F,I);const L=b.angularVelocity;if(L){const D=w(1-b.angularDamping,t);L.scale(D,L)}}}this.dispatchEvent(BU),a&&(o=gn.now());const M=this.stepnumber%(this.quatNormalizeSkip+1)===0,R=this.quatNormalizeFast;for(p=0;p!==S;p++)s[p].integrate(t,M,R);this.clearForces(),this.broadphase.dirty=!0,a&&(g.integrate=gn.now()-o),this.stepnumber+=1,this.dispatchEvent(NU);let P=!0;if(this.allowSleep)for(P=!1,p=0;p!==S;p++){const b=s[p];b.sleepTick(this.time),b.sleepState!==de.SLEEPING&&(P=!0)}this.hasActiveBodies=P}emitContactEvents(){const t=this.hasAnyEventListener("beginContact"),i=this.hasAnyEventListener("endContact");if((t||i)&&this.bodyOverlapKeeper.getDiff(La,Fa),t){for(let S=0,s=La.length;S<s;S+=2)Vc.bodyA=this.getBodyById(La[S]),Vc.bodyB=this.getBodyById(La[S+1]),this.dispatchEvent(Vc);Vc.bodyA=Vc.bodyB=null}if(i){for(let S=0,s=Fa.length;S<s;S+=2)zc.bodyA=this.getBodyById(Fa[S]),zc.bodyB=this.getBodyById(Fa[S+1]),this.dispatchEvent(zc);zc.bodyA=zc.bodyB=null}La.length=Fa.length=0;const n=this.hasAnyEventListener("beginShapeContact"),x=this.hasAnyEventListener("endShapeContact");if((n||x)&&this.shapeOverlapKeeper.getDiff(La,Fa),n){for(let S=0,s=La.length;S<s;S+=2){const T=this.getShapeById(La[S]),e=this.getShapeById(La[S+1]);Da.shapeA=T,Da.shapeB=e,T&&(Da.bodyA=T.body),e&&(Da.bodyB=e.body),this.dispatchEvent(Da)}Da.bodyA=Da.bodyB=Da.shapeA=Da.shapeB=null}if(x){for(let S=0,s=Fa.length;S<s;S+=2){const T=this.getShapeById(Fa[S]),e=this.getShapeById(Fa[S+1]);Oa.shapeA=T,Oa.shapeB=e,T&&(Oa.bodyA=T.body),e&&(Oa.bodyB=e.body),this.dispatchEvent(Oa)}Oa.bodyA=Oa.bodyB=Oa.shapeA=Oa.shapeB=null}}clearForces(){const t=this.bodies,i=t.length;for(let n=0;n!==i;n++){const x=t[n];x.force,x.torque,x.force.set(0,0,0),x.torque.set(0,0,0)}}}new Ks;const N0=new fn,gn=globalThis.performance||{};if(!gn.now){let d=Date.now();gn.timing&&gn.timing.navigationStart&&(d=gn.timing.navigationStart),gn.now=()=>Date.now()-d}new tt;const NU={type:"postStep"},BU={type:"preStep"},Uc={type:de.COLLIDE_EVENT_NAME,body:null,contact:null},UU=[],VU=[],zU=[],GU=[],La=[],Fa=[],Vc={type:"beginContact",bodyA:null,bodyB:null},zc={type:"endContact",bodyA:null,bodyB:null},Da={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},Oa={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};function Ba(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function XM(d,t){d.prototype=Object.create(t.prototype),d.prototype.constructor=d,d.__proto__=t}/*!
 * GSAP 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var zs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Tf={duration:.5,overwrite:!1,delay:0},H1,zn,Bi,ar=1e8,wi=1/ar,yy=Math.PI*2,_U=yy/4,WU=0,YM=Math.sqrt,HU=Math.cos,XU=Math.sin,Ln=function(t){return typeof t=="string"},Zi=function(t){return typeof t=="function"},eo=function(t){return typeof t=="number"},X1=function(t){return typeof t>"u"},pa=function(t){return typeof t=="object"},ys=function(t){return t!==!1},Y1=function(){return typeof window<"u"},Ev=function(t){return Zi(t)||Ln(t)},kM=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Qn=Array.isArray,YU=/random\([^)]+\)/g,kU=/,\s*/g,P2=/(?:-?\.?\d|\.)+/gi,$M=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Uu=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,B0=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,KM=/[+-]=-?[.\d]+/,$U=/[^,'"\[\]\s]+/gi,KU=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Gi,Kr,Ty,k1,Hs={},vm={},jM,ZM=function(t){return(vm=Ef(t,Hs))&&Cs},$1=function(t,i){return console.warn("Invalid property",t,"set to",i,"Missing plugin? gsap.registerPlugin()")},bd=function(t,i){return!i&&console.warn(t)},JM=function(t,i){return t&&(Hs[t]=i)&&vm&&(vm[t]=i)||Hs},Id=function(){return 0},jU={suppressEvents:!0,isStart:!0,kill:!1},Gv={suppressEvents:!0,kill:!1},ZU={suppressEvents:!0},K1={},Ko=[],Ey={},QM,bs={},U0={},b2=30,_v=[],j1="",Z1=function(t){var i=t[0],n,x;if(pa(i)||Zi(i)||(t=[t]),!(n=(i._gsap||{}).harness)){for(x=_v.length;x--&&!_v[x].targetTest(i););n=_v[x]}for(x=t.length;x--;)t[x]&&(t[x]._gsap||(t[x]._gsap=new SR(t[x],n)))||t.splice(x,1);return t},dh=function(t){return t._gsap||Z1(or(t))[0]._gsap},qM=function(t,i,n){return(n=t[i])&&Zi(n)?t[i]():X1(n)&&t.getAttribute&&t.getAttribute(i)||n},Ts=function(t,i){return(t=t.split(",")).forEach(i)||t},qi=function(t){return Math.round(t*1e5)/1e5||0},zi=function(t){return Math.round(t*1e7)/1e7||0},Xu=function(t,i){var n=i.charAt(0),x=parseFloat(i.substr(2));return t=parseFloat(t),n==="+"?t+x:n==="-"?t-x:n==="*"?t*x:t/x},JU=function(t,i){for(var n=i.length,x=0;t.indexOf(i[x])<0&&++x<n;);return x<n},mm=function(){var t=Ko.length,i=Ko.slice(0),n,x;for(Ey={},Ko.length=0,n=0;n<t;n++)x=i[n],x&&x._lazy&&(x.render(x._lazy[0],x._lazy[1],!0)._lazy=0)},J1=function(t){return!!(t._initted||t._startAt||t.add)},tR=function(t,i,n,x){Ko.length&&!zn&&mm(),t.render(i,n,!!(zn&&i<0&&J1(t))),Ko.length&&!zn&&mm()},eR=function(t){var i=parseFloat(t);return(i||i===0)&&(t+"").match($U).length<2?i:Ln(t)?t.trim():t},iR=function(t){return t},Xs=function(t,i){for(var n in i)n in t||(t[n]=i[n]);return t},QU=function(t){return function(i,n){for(var x in n)x in i||x==="duration"&&t||x==="ease"||(i[x]=n[x])}},Ef=function(t,i){for(var n in i)t[n]=i[n];return t},I2=function d(t,i){for(var n in i)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=pa(i[n])?d(t[n]||(t[n]={}),i[n]):i[n]);return t},gm=function(t,i){var n={},x;for(x in t)x in i||(n[x]=t[x]);return n},fd=function(t){var i=t.parent||Gi,n=t.keyframes?QU(Qn(t.keyframes)):Xs;if(ys(t.inherit))for(;i;)n(t,i.vars.defaults),i=i.parent||i._dp;return t},qU=function(t,i){for(var n=t.length,x=n===i.length;x&&n--&&t[n]===i[n];);return n<0},nR=function(t,i,n,x,S){var s=t[x],T;if(S)for(T=i[S];s&&s[S]>T;)s=s._prev;return s?(i._next=s._next,s._next=i):(i._next=t[n],t[n]=i),i._next?i._next._prev=i:t[x]=i,i._prev=s,i.parent=i._dp=t,i},hg=function(t,i,n,x){n===void 0&&(n="_first"),x===void 0&&(x="_last");var S=i._prev,s=i._next;S?S._next=s:t[n]===i&&(t[n]=s),s?s._prev=S:t[x]===i&&(t[x]=S),i._next=i._prev=i.parent=null},rl=function(t,i){t.parent&&(!i||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},ph=function(t,i){if(t&&(!i||i._end>t._dur||i._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},t7=function(t){for(var i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},Sy=function(t,i,n,x){return t._startAt&&(zn?t._startAt.revert(Gv):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(i,!0,x))},e7=function d(t){return!t||t._ts&&d(t.parent)},L2=function(t){return t._repeat?Sf(t._tTime,t=t.duration()+t._rDelay)*t:0},Sf=function(t,i){var n=Math.floor(t=zi(t/i));return t&&n===t?n-1:n},xm=function(t,i){return(t-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},ug=function(t){return t._end=zi(t._start+(t._tDur/Math.abs(t._ts||t._rts||wi)||0))},fg=function(t,i){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=zi(n._time-(t._ts>0?i/t._ts:((t._dirty?t.totalDuration():t._tDur)-i)/-t._ts)),ug(t),n._dirty||ph(n,t)),t},sR=function(t,i){var n;if((i._time||!i._dur&&i._initted||i._start<t._time&&(i._dur||!i.add))&&(n=xm(t.rawTime(),i),(!i._dur||dp(0,i.totalDuration(),n)-i._tTime>wi)&&i.render(n,!0)),ph(t,i)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-wi}},ia=function(t,i,n,x){return i.parent&&rl(i),i._start=zi((eo(n)?n:n||t!==Gi?qs(t,n,i):t._time)+i._delay),i._end=zi(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),nR(t,i,"_first","_last",t._sort?"_start":0),Cy(i)||(t._recent=i),x||sR(t,i),t._ts<0&&fg(t,t._tTime),t},rR=function(t,i){return(Hs.ScrollTrigger||$1("scrollTrigger",i))&&Hs.ScrollTrigger.create(i,t)},aR=function(t,i,n,x,S){if(q1(t,i,S),!t._initted)return 1;if(!n&&t._pt&&!zn&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&QM!==Fs.frame)return Ko.push(t),t._lazy=[S,x],1},i7=function d(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||d(i))},Cy=function(t){var i=t.data;return i==="isFromStart"||i==="isStart"},n7=function(t,i,n,x){var S=t.ratio,s=i<0||!i&&(!t._start&&i7(t)&&!(!t._initted&&Cy(t))||(t._ts<0||t._dp._ts<0)&&!Cy(t))?0:1,T=t._rDelay,e=0,a,g,f;if(T&&t._repeat&&(e=dp(0,t._tDur,i),g=Sf(e,T),t._yoyo&&g&1&&(s=1-s),g!==Sf(t._tTime,T)&&(S=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==S||zn||x||t._zTime===wi||!i&&t._zTime){if(!t._initted&&aR(t,i,x,n,e))return;for(f=t._zTime,t._zTime=i||(n?wi:0),n||(n=i&&!f),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=e,a=t._pt;a;)a.r(s,a.d),a=a._next;i<0&&Sy(t,i,n,!0),t._onUpdate&&!n&&Ds(t,"onUpdate"),e&&t._repeat&&!n&&t.parent&&Ds(t,"onRepeat"),(i>=t._tDur||i<0)&&t.ratio===s&&(s&&rl(t,1),!n&&!zn&&(Ds(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=i)},s7=function(t,i,n){var x;if(n>i)for(x=t._first;x&&x._start<=n;){if(x.data==="isPause"&&x._start>i)return x;x=x._next}else for(x=t._last;x&&x._start>=n;){if(x.data==="isPause"&&x._start<i)return x;x=x._prev}},Cf=function(t,i,n,x){var S=t._repeat,s=zi(i)||0,T=t._tTime/t._tDur;return T&&!x&&(t._time*=s/t._dur),t._dur=s,t._tDur=S?S<0?1e10:zi(s*(S+1)+t._rDelay*S):s,T>0&&!x&&fg(t,t._tTime=t._tDur*T),t.parent&&ug(t),n||ph(t.parent,t),t},F2=function(t){return t instanceof ss?ph(t):Cf(t,t._dur)},r7={_start:0,endTime:Id,totalDuration:Id},qs=function d(t,i,n){var x=t.labels,S=t._recent||r7,s=t.duration()>=ar?S.endTime(!1):t._dur,T,e,a;return Ln(i)&&(isNaN(i)||i in x)?(e=i.charAt(0),a=i.substr(-1)==="%",T=i.indexOf("="),e==="<"||e===">"?(T>=0&&(i=i.replace(/=/,"")),(e==="<"?S._start:S.endTime(S._repeat>=0))+(parseFloat(i.substr(1))||0)*(a?(T<0?S:n).totalDuration()/100:1)):T<0?(i in x||(x[i]=s),x[i]):(e=parseFloat(i.charAt(T-1)+i.substr(T+1)),a&&n&&(e=e/100*(Qn(n)?n[0]:n).totalDuration()),T>1?d(t,i.substr(0,T-1),n)+e:s+e)):i==null?s:+i},cd=function(t,i,n){var x=eo(i[1]),S=(x?2:1)+(t<2?0:1),s=i[S],T,e;if(x&&(s.duration=i[1]),s.parent=n,t){for(T=s,e=n;e&&!("immediateRender"in T);)T=e.vars.defaults||{},e=ys(e.vars.inherit)&&e.parent;s.immediateRender=ys(T.immediateRender),t<2?s.runBackwards=1:s.startAt=i[S-1]}return new cn(i[0],s,i[S+1])},vl=function(t,i){return t||t===0?i(t):i},dp=function(t,i,n){return n<t?t:n>i?i:n},Zn=function(t,i){return!Ln(t)||!(i=KU.exec(t))?"":i[1]},a7=function(t,i,n){return vl(n,function(x){return dp(t,i,x)})},Ay=[].slice,oR=function(t,i){return t&&pa(t)&&"length"in t&&(!i&&!t.length||t.length-1 in t&&pa(t[0]))&&!t.nodeType&&t!==Kr},o7=function(t,i,n){return n===void 0&&(n=[]),t.forEach(function(x){var S;return Ln(x)&&!i||oR(x,1)?(S=n).push.apply(S,or(x)):n.push(x)})||n},or=function(t,i,n){return Bi&&!i&&Bi.selector?Bi.selector(t):Ln(t)&&!n&&(Ty||!Af())?Ay.call((i||k1).querySelectorAll(t),0):Qn(t)?o7(t,n):oR(t)?Ay.call(t,0):t?[t]:[]},wy=function(t){return t=or(t)[0]||bd("Invalid scope")||{},function(i){var n=t.current||t.nativeElement||t;return or(i,n.querySelectorAll?n:n===t?bd("Invalid scope")||k1.createElement("div"):t)}},lR=function(t){return t.sort(function(){return .5-Math.random()})},hR=function(t){if(Zi(t))return t;var i=pa(t)?t:{each:t},n=vh(i.ease),x=i.from||0,S=parseFloat(i.base)||0,s={},T=x>0&&x<1,e=isNaN(x)||T,a=i.axis,g=x,f=x;return Ln(x)?g=f={center:.5,edges:.5,end:1}[x]||0:!T&&e&&(g=x[0],f=x[1]),function(o,u,r){var h=(r||i).length,c=s[h],l,p,m,v,y,E,C,w,A;if(!c){if(A=i.grid==="auto"?0:(i.grid||[1,ar])[1],!A){for(C=-ar;C<(C=r[A++].getBoundingClientRect().left)&&A<h;);A<h&&A--}for(c=s[h]=[],l=e?Math.min(A,h)*g-.5:x%A,p=A===ar?0:e?h*f/A-.5:x/A|0,C=0,w=ar,E=0;E<h;E++)m=E%A-l,v=p-(E/A|0),c[E]=y=a?Math.abs(a==="y"?v:m):YM(m*m+v*v),y>C&&(C=y),y<w&&(w=y);x==="random"&&lR(c),c.max=C-w,c.min=w,c.v=h=(parseFloat(i.amount)||parseFloat(i.each)*(A>h?h-1:a?a==="y"?h/A:A:Math.max(A,h/A))||0)*(x==="edges"?-1:1),c.b=h<0?S-h:S,c.u=Zn(i.amount||i.each)||0,n=n&&h<0?yR(n):n}return h=(c[o]-c.min)/c.max||0,zi(c.b+(n?n(h):h)*c.v)+c.u}},My=function(t){var i=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var x=zi(Math.round(parseFloat(n)/t)*t*i);return(x-x%1)/i+(eo(n)?0:Zn(n))}},uR=function(t,i){var n=Qn(t),x,S;return!n&&pa(t)&&(x=n=t.radius||ar,t.values?(t=or(t.values),(S=!eo(t[0]))&&(x*=x)):t=My(t.increment)),vl(i,n?Zi(t)?function(s){return S=t(s),Math.abs(S-s)<=x?S:s}:function(s){for(var T=parseFloat(S?s.x:s),e=parseFloat(S?s.y:0),a=ar,g=0,f=t.length,o,u;f--;)S?(o=t[f].x-T,u=t[f].y-e,o=o*o+u*u):o=Math.abs(t[f]-T),o<a&&(a=o,g=f);return g=!x||a<=x?t[g]:s,S||g===s||eo(s)?g:g+Zn(s)}:My(t))},fR=function(t,i,n,x){return vl(Qn(t)?!i:n===!0?!!(n=0):!x,function(){return Qn(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(x=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(i-t+n*.99))/n)*n*x)/x})},l7=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return function(x){return i.reduce(function(S,s){return s(S)},x)}},h7=function(t,i){return function(n){return t(parseFloat(n))+(i||Zn(n))}},u7=function(t,i,n){return dR(t,i,0,1,n)},cR=function(t,i,n){return vl(n,function(x){return t[~~i(x)]})},f7=function d(t,i,n){var x=i-t;return Qn(t)?cR(t,d(0,t.length),i):vl(n,function(S){return(x+(S-t)%x)%x+t})},c7=function d(t,i,n){var x=i-t,S=x*2;return Qn(t)?cR(t,d(0,t.length-1),i):vl(n,function(s){return s=(S+(s-t)%S)%S||0,t+(s>x?S-s:s)})},Ld=function(t){return t.replace(YU,function(i){var n=i.indexOf("[")+1,x=i.substring(n||7,n?i.indexOf("]"):i.length-1).split(kU);return fR(n?x:+x[0],n?0:+x[1],+x[2]||1e-5)})},dR=function(t,i,n,x,S){var s=i-t,T=x-n;return vl(S,function(e){return n+((e-t)/s*T||0)})},d7=function d(t,i,n,x){var S=isNaN(t+i)?0:function(u){return(1-u)*t+u*i};if(!S){var s=Ln(t),T={},e,a,g,f,o;if(n===!0&&(x=1)&&(n=null),s)t={p:t},i={p:i};else if(Qn(t)&&!Qn(i)){for(g=[],f=t.length,o=f-2,a=1;a<f;a++)g.push(d(t[a-1],t[a]));f--,S=function(r){r*=f;var h=Math.min(o,~~r);return g[h](r-h)},n=i}else x||(t=Ef(Qn(t)?[]:{},t));if(!g){for(e in i)Q1.call(T,t,e,"get",i[e]);S=function(r){return iT(r,T)||(s?t.p:t)}}}return vl(n,S)},D2=function(t,i,n){var x=t.labels,S=ar,s,T,e;for(s in x)T=x[s]-i,T<0==!!n&&T&&S>(T=Math.abs(T))&&(e=s,S=T);return e},Ds=function(t,i,n){var x=t.vars,S=x[i],s=Bi,T=t._ctx,e,a,g;if(S)return e=x[i+"Params"],a=x.callbackScope||t,n&&Ko.length&&mm(),T&&(Bi=T),g=e?S.apply(a,e):S.call(a),Bi=s,g},qc=function(t){return rl(t),t.scrollTrigger&&t.scrollTrigger.kill(!!zn),t.progress()<1&&Ds(t,"onInterrupt"),t},Vu,pR=[],vR=function(t){if(t)if(t=!t.name&&t.default||t,Y1()||t.headless){var i=t.name,n=Zi(t),x=i&&!n&&t.init?function(){this._props=[]}:t,S={init:Id,render:iT,add:Q1,kill:b7,modifier:P7,rawVars:0},s={targetTest:0,get:0,getSetter:eT,aliases:{},register:0};if(Af(),t!==x){if(bs[i])return;Xs(x,Xs(gm(t,S),s)),Ef(x.prototype,Ef(S,gm(t,s))),bs[x.prop=i]=x,t.targetTest&&(_v.push(x),K1[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}JM(i,x),t.register&&t.register(Cs,x,Es)}else pR.push(t)},Ai=255,td={aqua:[0,Ai,Ai],lime:[0,Ai,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ai],navy:[0,0,128],white:[Ai,Ai,Ai],olive:[128,128,0],yellow:[Ai,Ai,0],orange:[Ai,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ai,0,0],pink:[Ai,192,203],cyan:[0,Ai,Ai],transparent:[Ai,Ai,Ai,0]},V0=function(t,i,n){return t+=t<0?1:t>1?-1:0,(t*6<1?i+(n-i)*t*6:t<.5?n:t*3<2?i+(n-i)*(2/3-t)*6:i)*Ai+.5|0},mR=function(t,i,n){var x=t?eo(t)?[t>>16,t>>8&Ai,t&Ai]:0:td.black,S,s,T,e,a,g,f,o,u,r;if(!x){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),td[t])x=td[t];else if(t.charAt(0)==="#"){if(t.length<6&&(S=t.charAt(1),s=t.charAt(2),T=t.charAt(3),t="#"+S+S+s+s+T+T+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return x=parseInt(t.substr(1,6),16),[x>>16,x>>8&Ai,x&Ai,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),x=[t>>16,t>>8&Ai,t&Ai]}else if(t.substr(0,3)==="hsl"){if(x=r=t.match(P2),!i)e=+x[0]%360/360,a=+x[1]/100,g=+x[2]/100,s=g<=.5?g*(a+1):g+a-g*a,S=g*2-s,x.length>3&&(x[3]*=1),x[0]=V0(e+1/3,S,s),x[1]=V0(e,S,s),x[2]=V0(e-1/3,S,s);else if(~t.indexOf("="))return x=t.match($M),n&&x.length<4&&(x[3]=1),x}else x=t.match(P2)||td.transparent;x=x.map(Number)}return i&&!r&&(S=x[0]/Ai,s=x[1]/Ai,T=x[2]/Ai,f=Math.max(S,s,T),o=Math.min(S,s,T),g=(f+o)/2,f===o?e=a=0:(u=f-o,a=g>.5?u/(2-f-o):u/(f+o),e=f===S?(s-T)/u+(s<T?6:0):f===s?(T-S)/u+2:(S-s)/u+4,e*=60),x[0]=~~(e+.5),x[1]=~~(a*100+.5),x[2]=~~(g*100+.5)),n&&x.length<4&&(x[3]=1),x},gR=function(t){var i=[],n=[],x=-1;return t.split(jo).forEach(function(S){var s=S.match(Uu)||[];i.push.apply(i,s),n.push(x+=s.length+1)}),i.c=n,i},O2=function(t,i,n){var x="",S=(t+x).match(jo),s=i?"hsla(":"rgba(",T=0,e,a,g,f;if(!S)return t;if(S=S.map(function(o){return(o=mR(o,i,1))&&s+(i?o[0]+","+o[1]+"%,"+o[2]+"%,"+o[3]:o.join(","))+")"}),n&&(g=gR(t),e=n.c,e.join(x)!==g.c.join(x)))for(a=t.replace(jo,"1").split(Uu),f=a.length-1;T<f;T++)x+=a[T]+(~e.indexOf(T)?S.shift()||s+"0,0,0,0)":(g.length?g:S.length?S:n).shift());if(!a)for(a=t.split(jo),f=a.length-1;T<f;T++)x+=a[T]+S[T];return x+a[f]},jo=(function(){var d="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in td)d+="|"+t+"\\b";return new RegExp(d+")","gi")})(),p7=/hsl[a]?\(/,xR=function(t){var i=t.join(" "),n;if(jo.lastIndex=0,jo.test(i))return n=p7.test(i),t[1]=O2(t[1],n),t[0]=O2(t[0],n,gR(t[1])),!0},Fd,Fs=(function(){var d=Date.now,t=500,i=33,n=d(),x=n,S=1e3/240,s=S,T=[],e,a,g,f,o,u,r=function h(c){var l=d()-x,p=c===!0,m,v,y,E;if((l>t||l<0)&&(n+=l-i),x+=l,y=x-n,m=y-s,(m>0||p)&&(E=++f.frame,o=y-f.time*1e3,f.time=y=y/1e3,s+=m+(m>=S?4:S-m),v=1),p||(e=a(h)),v)for(u=0;u<T.length;u++)T[u](y,o,E,c)};return f={time:0,frame:0,tick:function(){r(!0)},deltaRatio:function(c){return o/(1e3/(c||60))},wake:function(){jM&&(!Ty&&Y1()&&(Kr=Ty=window,k1=Kr.document||{},Hs.gsap=Cs,(Kr.gsapVersions||(Kr.gsapVersions=[])).push(Cs.version),ZM(vm||Kr.GreenSockGlobals||!Kr.gsap&&Kr||{}),pR.forEach(vR)),g=typeof requestAnimationFrame<"u"&&requestAnimationFrame,e&&f.sleep(),a=g||function(c){return setTimeout(c,s-f.time*1e3+1|0)},Fd=1,r(2))},sleep:function(){(g?cancelAnimationFrame:clearTimeout)(e),Fd=0,a=Id},lagSmoothing:function(c,l){t=c||1/0,i=Math.min(l||33,t)},fps:function(c){S=1e3/(c||240),s=f.time*1e3+S},add:function(c,l,p){var m=l?function(v,y,E,C){c(v,y,E,C),f.remove(m)}:c;return f.remove(c),T[p?"unshift":"push"](m),Af(),m},remove:function(c,l){~(l=T.indexOf(c))&&T.splice(l,1)&&u>=l&&u--},_listeners:T},f})(),Af=function(){return!Fd&&Fs.wake()},ii={},v7=/^[\d.\-M][\d.\-,\s]/,m7=/["']/g,g7=function(t){for(var i={},n=t.substr(1,t.length-3).split(":"),x=n[0],S=1,s=n.length,T,e,a;S<s;S++)e=n[S],T=S!==s-1?e.lastIndexOf(","):e.length,a=e.substr(0,T),i[x]=isNaN(a)?a.replace(m7,"").trim():+a,x=e.substr(T+1).trim();return i},x7=function(t){var i=t.indexOf("(")+1,n=t.indexOf(")"),x=t.indexOf("(",i);return t.substring(i,~x&&x<n?t.indexOf(")",n+1):n)},y7=function(t){var i=(t+"").split("("),n=ii[i[0]];return n&&i.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[g7(i[1])]:x7(t).split(",").map(eR)):ii._CE&&v7.test(t)?ii._CE("",t):n},yR=function(t){return function(i){return 1-t(1-i)}},TR=function d(t,i){for(var n=t._first,x;n;)n instanceof ss?d(n,i):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==i&&(n.timeline?d(n.timeline,i):(x=n._ease,n._ease=n._yEase,n._yEase=x,n._yoyo=i)),n=n._next},vh=function(t,i){return t&&(Zi(t)?t:ii[t]||y7(t))||i},zh=function(t,i,n,x){n===void 0&&(n=function(e){return 1-i(1-e)}),x===void 0&&(x=function(e){return e<.5?i(e*2)/2:1-i((1-e)*2)/2});var S={easeIn:i,easeOut:n,easeInOut:x},s;return Ts(t,function(T){ii[T]=Hs[T]=S,ii[s=T.toLowerCase()]=n;for(var e in S)ii[s+(e==="easeIn"?".in":e==="easeOut"?".out":".inOut")]=ii[T+"."+e]=S[e]}),S},ER=function(t){return function(i){return i<.5?(1-t(1-i*2))/2:.5+t((i-.5)*2)/2}},z0=function d(t,i,n){var x=i>=1?i:1,S=(n||(t?.3:.45))/(i<1?i:1),s=S/yy*(Math.asin(1/x)||0),T=function(g){return g===1?1:x*Math.pow(2,-10*g)*XU((g-s)*S)+1},e=t==="out"?T:t==="in"?function(a){return 1-T(1-a)}:ER(T);return S=yy/S,e.config=function(a,g){return d(t,a,g)},e},G0=function d(t,i){i===void 0&&(i=1.70158);var n=function(s){return s?--s*s*((i+1)*s+i)+1:0},x=t==="out"?n:t==="in"?function(S){return 1-n(1-S)}:ER(n);return x.config=function(S){return d(t,S)},x};Ts("Linear,Quad,Cubic,Quart,Quint,Strong",function(d,t){var i=t<5?t+1:t;zh(d+",Power"+(i-1),t?function(n){return Math.pow(n,i)}:function(n){return n},function(n){return 1-Math.pow(1-n,i)},function(n){return n<.5?Math.pow(n*2,i)/2:1-Math.pow((1-n)*2,i)/2})});ii.Linear.easeNone=ii.none=ii.Linear.easeIn;zh("Elastic",z0("in"),z0("out"),z0());(function(d,t){var i=1/t,n=2*i,x=2.5*i,S=function(T){return T<i?d*T*T:T<n?d*Math.pow(T-1.5/t,2)+.75:T<x?d*(T-=2.25/t)*T+.9375:d*Math.pow(T-2.625/t,2)+.984375};zh("Bounce",function(s){return 1-S(1-s)},S)})(7.5625,2.75);zh("Expo",function(d){return Math.pow(2,10*(d-1))*d+d*d*d*d*d*d*(1-d)});zh("Circ",function(d){return-(YM(1-d*d)-1)});zh("Sine",function(d){return d===1?1:-HU(d*_U)+1});zh("Back",G0("in"),G0("out"),G0());ii.SteppedEase=ii.steps=Hs.SteppedEase={config:function(t,i){t===void 0&&(t=1);var n=1/t,x=t+(i?0:1),S=i?1:0,s=1-wi;return function(T){return((x*dp(0,s,T)|0)+S)*n}}};Tf.ease=ii["quad.out"];Ts("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(d){return j1+=d+","+d+"Params,"});var SR=function(t,i){this.id=WU++,t._gsap=this,this.target=t,this.harness=i,this.get=i?i.get:qM,this.set=i?i.getSetter:eT},Dd=(function(){function d(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,Cf(this,+i.duration,1,1),this.data=i.data,Bi&&(this._ctx=Bi,Bi.data.push(this)),Fd||Fs.wake()}var t=d.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,Cf(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,x){if(Af(),!arguments.length)return this._tTime;var S=this._dp;if(S&&S.smoothChildTiming&&this._ts){for(fg(this,n),!S._dp||S.parent||sR(S,this);S&&S.parent;)S.parent._time!==S._start+(S._ts>=0?S._tTime/S._ts:(S.totalDuration()-S._tTime)/-S._ts)&&S.totalTime(S._tTime,!0),S=S.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&ia(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!x||this._initted&&Math.abs(this._zTime)===wi||!this._initted&&this._dur&&n||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),tR(this,n,x)),this},t.time=function(n,x){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+L2(this))%(this._dur+this._rDelay)||(n?this._dur:0),x):this._time},t.totalProgress=function(n,x){return arguments.length?this.totalTime(this.totalDuration()*n,x):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(n,x){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+L2(this),x):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,x){var S=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*S,x):this._repeat?Sf(this._tTime,S)+1:1},t.timeScale=function(n,x){if(!arguments.length)return this._rts===-wi?0:this._rts;if(this._rts===n)return this;var S=this.parent&&this._ts?xm(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-wi?0:this._rts,this.totalTime(dp(-Math.abs(this._delay),this.totalDuration(),S),x!==!1),ug(this),t7(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Af(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==wi&&(this._tTime-=wi)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=zi(n);var x=this.parent||this._dp;return x&&(x._sort||!this.parent)&&ia(x,this,this._start-this._delay),this}return this._start},t.endTime=function(n){return this._start+(ys(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var x=this.parent||this._dp;return x?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?xm(x.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=ZU);var x=zn;return zn=n,J1(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),zn=x,this},t.globalTime=function(n){for(var x=this,S=arguments.length?n:x.rawTime();x;)S=x._start+S/(Math.abs(x._ts)||1),x=x._dp;return!this.parent&&this._sat?this._sat.globalTime(n):S},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,F2(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var x=this._time;return this._rDelay=n,F2(this),x?this.time(x):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,x){return this.totalTime(qs(this,n),ys(x))},t.restart=function(n,x){return this.play().totalTime(n?-this._delay:0,ys(x)),this._dur||(this._zTime=-wi),this},t.play=function(n,x){return n!=null&&this.seek(n,x),this.reversed(!1).paused(!1)},t.reverse=function(n,x){return n!=null&&this.seek(n||this.totalDuration(),x),this.reversed(!0).paused(!1)},t.pause=function(n,x){return n!=null&&this.seek(n,x),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-wi:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-wi,this},t.isActive=function(){var n=this.parent||this._dp,x=this._start,S;return!!(!n||this._ts&&this._initted&&n.isActive()&&(S=n.rawTime(!0))>=x&&S<this.endTime(!0)-wi)},t.eventCallback=function(n,x,S){var s=this.vars;return arguments.length>1?(x?(s[n]=x,S&&(s[n+"Params"]=S),n==="onUpdate"&&(this._onUpdate=x)):delete s[n],this):s[n]},t.then=function(n){var x=this,S=x._prom;return new Promise(function(s){var T=Zi(n)?n:iR,e=function(){var g=x.then;x.then=null,S&&S(),Zi(T)&&(T=T(x))&&(T.then||T===x)&&(x.then=g),s(T),x.then=g};x._initted&&x.totalProgress()===1&&x._ts>=0||!x._tTime&&x._ts<0?e():x._prom=e})},t.kill=function(){qc(this)},d})();Xs(Dd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-wi,_prom:0,_ps:!1,_rts:1});var ss=(function(d){XM(t,d);function t(n,x){var S;return n===void 0&&(n={}),S=d.call(this,n)||this,S.labels={},S.smoothChildTiming=!!n.smoothChildTiming,S.autoRemoveChildren=!!n.autoRemoveChildren,S._sort=ys(n.sortChildren),Gi&&ia(n.parent||Gi,Ba(S),x),n.reversed&&S.reverse(),n.paused&&S.paused(!0),n.scrollTrigger&&rR(Ba(S),n.scrollTrigger),S}var i=t.prototype;return i.to=function(x,S,s){return cd(0,arguments,this),this},i.from=function(x,S,s){return cd(1,arguments,this),this},i.fromTo=function(x,S,s,T){return cd(2,arguments,this),this},i.set=function(x,S,s){return S.duration=0,S.parent=this,fd(S).repeatDelay||(S.repeat=0),S.immediateRender=!!S.immediateRender,new cn(x,S,qs(this,s),1),this},i.call=function(x,S,s){return ia(this,cn.delayedCall(0,x,S),s)},i.staggerTo=function(x,S,s,T,e,a,g){return s.duration=S,s.stagger=s.stagger||T,s.onComplete=a,s.onCompleteParams=g,s.parent=this,new cn(x,s,qs(this,e)),this},i.staggerFrom=function(x,S,s,T,e,a,g){return s.runBackwards=1,fd(s).immediateRender=ys(s.immediateRender),this.staggerTo(x,S,s,T,e,a,g)},i.staggerFromTo=function(x,S,s,T,e,a,g,f){return T.startAt=s,fd(T).immediateRender=ys(T.immediateRender),this.staggerTo(x,S,T,e,a,g,f)},i.render=function(x,S,s){var T=this._time,e=this._dirty?this.totalDuration():this._tDur,a=this._dur,g=x<=0?0:zi(x),f=this._zTime<0!=x<0&&(this._initted||!a),o,u,r,h,c,l,p,m,v,y,E,C;if(this!==Gi&&g>e&&x>=0&&(g=e),g!==this._tTime||s||f){if(T!==this._time&&a&&(g+=this._time-T,x+=this._time-T),o=g,v=this._start,m=this._ts,l=!m,f&&(a||(T=this._zTime),(x||!S)&&(this._zTime=x)),this._repeat){if(E=this._yoyo,c=a+this._rDelay,this._repeat<-1&&x<0)return this.totalTime(c*100+x,S,s);if(o=zi(g%c),g===e?(h=this._repeat,o=a):(y=zi(g/c),h=~~y,h&&h===y&&(o=a,h--),o>a&&(o=a)),y=Sf(this._tTime,c),!T&&this._tTime&&y!==h&&this._tTime-y*c-this._dur<=0&&(y=h),E&&h&1&&(o=a-o,C=1),h!==y&&!this._lock){var w=E&&y&1,A=w===(E&&h&1);if(h<y&&(w=!w),T=w?0:g%a?a:g,this._lock=1,this.render(T||(C?0:zi(h*c)),S,!a)._lock=0,this._tTime=g,!S&&this.parent&&Ds(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1,y=h),T&&T!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(a=this._dur,e=this._tDur,A&&(this._lock=2,T=w?a:-1e-4,this.render(T,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;TR(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(p=s7(this,zi(T),zi(o)),p&&(g-=o-(o=p._start))),this._tTime=g,this._time=o,this._act=!m,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=x,T=0),!T&&g&&a&&!S&&!y&&(Ds(this,"onStart"),this._tTime!==g))return this;if(o>=T&&x>=0)for(u=this._first;u;){if(r=u._next,(u._act||o>=u._start)&&u._ts&&p!==u){if(u.parent!==this)return this.render(x,S,s);if(u.render(u._ts>0?(o-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(o-u._start)*u._ts,S,s),o!==this._time||!this._ts&&!l){p=0,r&&(g+=this._zTime=-wi);break}}u=r}else{u=this._last;for(var M=x<0?x:o;u;){if(r=u._prev,(u._act||M<=u._end)&&u._ts&&p!==u){if(u.parent!==this)return this.render(x,S,s);if(u.render(u._ts>0?(M-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(M-u._start)*u._ts,S,s||zn&&J1(u)),o!==this._time||!this._ts&&!l){p=0,r&&(g+=this._zTime=M?-wi:wi);break}}u=r}}if(p&&!S&&(this.pause(),p.render(o>=T?0:-wi)._zTime=o>=T?1:-1,this._ts))return this._start=v,ug(this),this.render(x,S,s);this._onUpdate&&!S&&Ds(this,"onUpdate",!0),(g===e&&this._tTime>=this.totalDuration()||!g&&T)&&(v===this._start||Math.abs(m)!==Math.abs(this._ts))&&(this._lock||((x||!a)&&(g===e&&this._ts>0||!g&&this._ts<0)&&rl(this,1),!S&&!(x<0&&!T)&&(g||T||!e)&&(Ds(this,g===e&&x>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(g<e&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(x,S){var s=this;if(eo(S)||(S=qs(this,S,x)),!(x instanceof Dd)){if(Qn(x))return x.forEach(function(T){return s.add(T,S)}),this;if(Ln(x))return this.addLabel(x,S);if(Zi(x))x=cn.delayedCall(0,x);else return this}return this!==x?ia(this,x,S):this},i.getChildren=function(x,S,s,T){x===void 0&&(x=!0),S===void 0&&(S=!0),s===void 0&&(s=!0),T===void 0&&(T=-ar);for(var e=[],a=this._first;a;)a._start>=T&&(a instanceof cn?S&&e.push(a):(s&&e.push(a),x&&e.push.apply(e,a.getChildren(!0,S,s)))),a=a._next;return e},i.getById=function(x){for(var S=this.getChildren(1,1,1),s=S.length;s--;)if(S[s].vars.id===x)return S[s]},i.remove=function(x){return Ln(x)?this.removeLabel(x):Zi(x)?this.killTweensOf(x):(x.parent===this&&hg(this,x),x===this._recent&&(this._recent=this._last),ph(this))},i.totalTime=function(x,S){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=zi(Fs.time-(this._ts>0?x/this._ts:(this.totalDuration()-x)/-this._ts))),d.prototype.totalTime.call(this,x,S),this._forcing=0,this):this._tTime},i.addLabel=function(x,S){return this.labels[x]=qs(this,S),this},i.removeLabel=function(x){return delete this.labels[x],this},i.addPause=function(x,S,s){var T=cn.delayedCall(0,S||Id,s);return T.data="isPause",this._hasPause=1,ia(this,T,qs(this,x))},i.removePause=function(x){var S=this._first;for(x=qs(this,x);S;)S._start===x&&S.data==="isPause"&&rl(S),S=S._next},i.killTweensOf=function(x,S,s){for(var T=this.getTweensOf(x,s),e=T.length;e--;)zo!==T[e]&&T[e].kill(x,S);return this},i.getTweensOf=function(x,S){for(var s=[],T=or(x),e=this._first,a=eo(S),g;e;)e instanceof cn?JU(e._targets,T)&&(a?(!zo||e._initted&&e._ts)&&e.globalTime(0)<=S&&e.globalTime(e.totalDuration())>S:!S||e.isActive())&&s.push(e):(g=e.getTweensOf(T,S)).length&&s.push.apply(s,g),e=e._next;return s},i.tweenTo=function(x,S){S=S||{};var s=this,T=qs(s,x),e=S,a=e.startAt,g=e.onStart,f=e.onStartParams,o=e.immediateRender,u,r=cn.to(s,Xs({ease:S.ease||"none",lazy:!1,immediateRender:!1,time:T,overwrite:"auto",duration:S.duration||Math.abs((T-(a&&"time"in a?a.time:s._time))/s.timeScale())||wi,onStart:function(){if(s.pause(),!u){var c=S.duration||Math.abs((T-(a&&"time"in a?a.time:s._time))/s.timeScale());r._dur!==c&&Cf(r,c,0,1).render(r._time,!0,!0),u=1}g&&g.apply(r,f||[])}},S));return o?r.render(0):r},i.tweenFromTo=function(x,S,s){return this.tweenTo(S,Xs({startAt:{time:qs(this,x)}},s))},i.recent=function(){return this._recent},i.nextLabel=function(x){return x===void 0&&(x=this._time),D2(this,qs(this,x))},i.previousLabel=function(x){return x===void 0&&(x=this._time),D2(this,qs(this,x),1)},i.currentLabel=function(x){return arguments.length?this.seek(x,!0):this.previousLabel(this._time+wi)},i.shiftChildren=function(x,S,s){s===void 0&&(s=0);var T=this._first,e=this.labels,a;for(x=zi(x);T;)T._start>=s&&(T._start+=x,T._end+=x),T=T._next;if(S)for(a in e)e[a]>=s&&(e[a]+=x);return ph(this)},i.invalidate=function(x){var S=this._first;for(this._lock=0;S;)S.invalidate(x),S=S._next;return d.prototype.invalidate.call(this,x)},i.clear=function(x){x===void 0&&(x=!0);for(var S=this._first,s;S;)s=S._next,this.remove(S),S=s;return this._dp&&(this._time=this._tTime=this._pTime=0),x&&(this.labels={}),ph(this)},i.totalDuration=function(x){var S=0,s=this,T=s._last,e=ar,a,g,f;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-x:x));if(s._dirty){for(f=s.parent;T;)a=T._prev,T._dirty&&T.totalDuration(),g=T._start,g>e&&s._sort&&T._ts&&!s._lock?(s._lock=1,ia(s,T,g-T._delay,1)._lock=0):e=g,g<0&&T._ts&&(S-=g,(!f&&!s._dp||f&&f.smoothChildTiming)&&(s._start+=zi(g/s._ts),s._time-=g,s._tTime-=g),s.shiftChildren(-g,!1,-1/0),e=0),T._end>S&&T._ts&&(S=T._end),T=a;Cf(s,s===Gi&&s._time>S?s._time:S,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(x){if(Gi._ts&&(tR(Gi,xm(x,Gi)),QM=Fs.frame),Fs.frame>=b2){b2+=zs.autoSleep||120;var S=Gi._first;if((!S||!S._ts)&&zs.autoSleep&&Fs._listeners.length<2){for(;S&&!S._ts;)S=S._next;S||Fs.sleep()}}},t})(Dd);Xs(ss.prototype,{_lock:0,_hasPause:0,_forcing:0});var T7=function(t,i,n,x,S,s,T){var e=new Es(this._pt,t,i,0,1,PR,null,S),a=0,g=0,f,o,u,r,h,c,l,p;for(e.b=n,e.e=x,n+="",x+="",(l=~x.indexOf("random("))&&(x=Ld(x)),s&&(p=[n,x],s(p,t,i),n=p[0],x=p[1]),o=n.match(B0)||[];f=B0.exec(x);)r=f[0],h=x.substring(a,f.index),u?u=(u+1)%5:h.substr(-5)==="rgba("&&(u=1),r!==o[g++]&&(c=parseFloat(o[g-1])||0,e._pt={_next:e._pt,p:h||g===1?h:",",s:c,c:r.charAt(1)==="="?Xu(c,r)-c:parseFloat(r)-c,m:u&&u<4?Math.round:0},a=B0.lastIndex);return e.c=a<x.length?x.substring(a,x.length):"",e.fp=T,(KM.test(x)||l)&&(e.e=0),this._pt=e,e},Q1=function(t,i,n,x,S,s,T,e,a,g){Zi(x)&&(x=x(S||0,t,s));var f=t[i],o=n!=="get"?n:Zi(f)?a?t[i.indexOf("set")||!Zi(t["get"+i.substr(3)])?i:"get"+i.substr(3)](a):t[i]():f,u=Zi(f)?a?w7:MR:tT,r;if(Ln(x)&&(~x.indexOf("random(")&&(x=Ld(x)),x.charAt(1)==="="&&(r=Xu(o,x)+(Zn(o)||0),(r||r===0)&&(x=r))),!g||o!==x||Ry)return!isNaN(o*x)&&x!==""?(r=new Es(this._pt,t,i,+o||0,x-(o||0),typeof f=="boolean"?R7:RR,0,u),a&&(r.fp=a),T&&r.modifier(T,this,t),this._pt=r):(!f&&!(i in t)&&$1(i,x),T7.call(this,t,i,o,x,u,e||zs.stringFilter,a))},E7=function(t,i,n,x,S){if(Zi(t)&&(t=dd(t,S,i,n,x)),!pa(t)||t.style&&t.nodeType||Qn(t)||kM(t))return Ln(t)?dd(t,S,i,n,x):t;var s={},T;for(T in t)s[T]=dd(t[T],S,i,n,x);return s},CR=function(t,i,n,x,S,s){var T,e,a,g;if(bs[t]&&(T=new bs[t]).init(S,T.rawVars?i[t]:E7(i[t],x,S,s,n),n,x,s)!==!1&&(n._pt=e=new Es(n._pt,S,t,0,1,T.render,T,0,T.priority),n!==Vu))for(a=n._ptLookup[n._targets.indexOf(S)],g=T._props.length;g--;)a[T._props[g]]=e;return T},zo,Ry,q1=function d(t,i,n){var x=t.vars,S=x.ease,s=x.startAt,T=x.immediateRender,e=x.lazy,a=x.onUpdate,g=x.runBackwards,f=x.yoyoEase,o=x.keyframes,u=x.autoRevert,r=t._dur,h=t._startAt,c=t._targets,l=t.parent,p=l&&l.data==="nested"?l.vars.targets:c,m=t._overwrite==="auto"&&!H1,v=t.timeline,y,E,C,w,A,M,R,P,b,F,I,L,D;if(v&&(!o||!S)&&(S="none"),t._ease=vh(S,Tf.ease),t._yEase=f?yR(vh(f===!0?S:f,Tf.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!v&&!!x.runBackwards,!v||o&&!x.stagger){if(P=c[0]?dh(c[0]).harness:0,L=P&&x[P.prop],y=gm(x,K1),h&&(h._zTime<0&&h.progress(1),i<0&&g&&T&&!u?h.render(-1,!0):h.revert(g&&r?Gv:jU),h._lazy=0),s){if(rl(t._startAt=cn.set(c,Xs({data:"isStart",overwrite:!1,parent:l,immediateRender:!0,lazy:!h&&ys(e),startAt:null,delay:0,onUpdate:a&&function(){return Ds(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,i<0&&(zn||!T&&!u)&&t._startAt.revert(Gv),T&&r&&i<=0&&n<=0){i&&(t._zTime=i);return}}else if(g&&r&&!h){if(i&&(T=!1),C=Xs({overwrite:!1,data:"isFromStart",lazy:T&&!h&&ys(e),immediateRender:T,stagger:0,parent:l},y),L&&(C[P.prop]=L),rl(t._startAt=cn.set(c,C)),t._startAt._dp=0,t._startAt._sat=t,i<0&&(zn?t._startAt.revert(Gv):t._startAt.render(-1,!0)),t._zTime=i,!T)d(t._startAt,wi,wi);else if(!i)return}for(t._pt=t._ptCache=0,e=r&&ys(e)||e&&!r,E=0;E<c.length;E++){if(A=c[E],R=A._gsap||Z1(c)[E]._gsap,t._ptLookup[E]=F={},Ey[R.id]&&Ko.length&&mm(),I=p===c?E:p.indexOf(A),P&&(b=new P).init(A,L||y,t,I,p)!==!1&&(t._pt=w=new Es(t._pt,A,b.name,0,1,b.render,b,0,b.priority),b._props.forEach(function(O){F[O]=w}),b.priority&&(M=1)),!P||L)for(C in y)bs[C]&&(b=CR(C,y,t,I,A,p))?b.priority&&(M=1):F[C]=w=Q1.call(t,A,C,"get",y[C],I,p,0,x.stringFilter);t._op&&t._op[E]&&t.kill(A,t._op[E]),m&&t._pt&&(zo=t,Gi.killTweensOf(A,F,t.globalTime(i)),D=!t.parent,zo=0),t._pt&&e&&(Ey[R.id]=1)}M&&bR(t),t._onInit&&t._onInit(t)}t._onUpdate=a,t._initted=(!t._op||t._pt)&&!D,o&&i<=0&&v.render(ar,!0,!0)},S7=function(t,i,n,x,S,s,T,e){var a=(t._pt&&t._ptCache||(t._ptCache={}))[i],g,f,o,u;if(!a)for(a=t._ptCache[i]=[],o=t._ptLookup,u=t._targets.length;u--;){if(g=o[u][i],g&&g.d&&g.d._pt)for(g=g.d._pt;g&&g.p!==i&&g.fp!==i;)g=g._next;if(!g)return Ry=1,t.vars[i]="+=0",q1(t,T),Ry=0,e?bd(i+" not eligible for reset"):1;a.push(g)}for(u=a.length;u--;)f=a[u],g=f._pt||f,g.s=(x||x===0)&&!S?x:g.s+(x||0)+s*g.c,g.c=n-g.s,f.e&&(f.e=qi(n)+Zn(f.e)),f.b&&(f.b=g.s+Zn(f.b))},C7=function(t,i){var n=t[0]?dh(t[0]).harness:0,x=n&&n.aliases,S,s,T,e;if(!x)return i;S=Ef({},i);for(s in x)if(s in S)for(e=x[s].split(","),T=e.length;T--;)S[e[T]]=S[s];return S},A7=function(t,i,n,x){var S=i.ease||x||"power1.inOut",s,T;if(Qn(i))T=n[t]||(n[t]=[]),i.forEach(function(e,a){return T.push({t:a/(i.length-1)*100,v:e,e:S})});else for(s in i)T=n[s]||(n[s]=[]),s==="ease"||T.push({t:parseFloat(t),v:i[s],e:S})},dd=function(t,i,n,x,S){return Zi(t)?t.call(i,n,x,S):Ln(t)&&~t.indexOf("random(")?Ld(t):t},AR=j1+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",wR={};Ts(AR+",id,stagger,delay,duration,paused,scrollTrigger",function(d){return wR[d]=1});var cn=(function(d){XM(t,d);function t(n,x,S,s){var T;typeof x=="number"&&(S.duration=x,x=S,S=null),T=d.call(this,s?x:fd(x))||this;var e=T.vars,a=e.duration,g=e.delay,f=e.immediateRender,o=e.stagger,u=e.overwrite,r=e.keyframes,h=e.defaults,c=e.scrollTrigger,l=e.yoyoEase,p=x.parent||Gi,m=(Qn(n)||kM(n)?eo(n[0]):"length"in x)?[n]:or(n),v,y,E,C,w,A,M,R;if(T._targets=m.length?Z1(m):bd("GSAP target "+n+" not found. https://gsap.com",!zs.nullTargetWarn)||[],T._ptLookup=[],T._overwrite=u,r||o||Ev(a)||Ev(g)){if(x=T.vars,v=T.timeline=new ss({data:"nested",defaults:h||{},targets:p&&p.data==="nested"?p.vars.targets:m}),v.kill(),v.parent=v._dp=Ba(T),v._start=0,o||Ev(a)||Ev(g)){if(C=m.length,M=o&&hR(o),pa(o))for(w in o)~AR.indexOf(w)&&(R||(R={}),R[w]=o[w]);for(y=0;y<C;y++)E=gm(x,wR),E.stagger=0,l&&(E.yoyoEase=l),R&&Ef(E,R),A=m[y],E.duration=+dd(a,Ba(T),y,A,m),E.delay=(+dd(g,Ba(T),y,A,m)||0)-T._delay,!o&&C===1&&E.delay&&(T._delay=g=E.delay,T._start+=g,E.delay=0),v.to(A,E,M?M(y,A,m):0),v._ease=ii.none;v.duration()?a=g=0:T.timeline=0}else if(r){fd(Xs(v.vars.defaults,{ease:"none"})),v._ease=vh(r.ease||x.ease||"none");var P=0,b,F,I;if(Qn(r))r.forEach(function(L){return v.to(m,L,">")}),v.duration();else{E={};for(w in r)w==="ease"||w==="easeEach"||A7(w,r[w],E,r.easeEach);for(w in E)for(b=E[w].sort(function(L,D){return L.t-D.t}),P=0,y=0;y<b.length;y++)F=b[y],I={ease:F.e,duration:(F.t-(y?b[y-1].t:0))/100*a},I[w]=F.v,v.to(m,I,P),P+=I.duration;v.duration()<a&&v.to({},{duration:a-v.duration()})}}a||T.duration(a=v.duration())}else T.timeline=0;return u===!0&&!H1&&(zo=Ba(T),Gi.killTweensOf(m),zo=0),ia(p,Ba(T),S),x.reversed&&T.reverse(),x.paused&&T.paused(!0),(f||!a&&!r&&T._start===zi(p._time)&&ys(f)&&e7(Ba(T))&&p.data!=="nested")&&(T._tTime=-wi,T.render(Math.max(0,-g)||0)),c&&rR(Ba(T),c),T}var i=t.prototype;return i.render=function(x,S,s){var T=this._time,e=this._tDur,a=this._dur,g=x<0,f=x>e-wi&&!g?e:x<wi?0:x,o,u,r,h,c,l,p,m,v;if(!a)n7(this,x,S,s);else if(f!==this._tTime||!x||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(o=f,m=this.timeline,this._repeat){if(h=a+this._rDelay,this._repeat<-1&&g)return this.totalTime(h*100+x,S,s);if(o=zi(f%h),f===e?(r=this._repeat,o=a):(c=zi(f/h),r=~~c,r&&r===c?(o=a,r--):o>a&&(o=a)),l=this._yoyo&&r&1,l&&(v=this._yEase,o=a-o),c=Sf(this._tTime,h),o===T&&!s&&this._initted&&r===c)return this._tTime=f,this;r!==c&&(m&&this._yEase&&TR(m,l),this.vars.repeatRefresh&&!l&&!this._lock&&o!==h&&this._initted&&(this._lock=s=1,this.render(zi(h*r),!0).invalidate()._lock=0))}if(!this._initted){if(aR(this,g?x:o,s,S,f))return this._tTime=0,this;if(T!==this._time&&!(s&&this.vars.repeatRefresh&&r!==c))return this;if(a!==this._dur)return this.render(x,S,s)}if(this._tTime=f,this._time=o,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=p=(v||this._ease)(o/a),this._from&&(this.ratio=p=1-p),!T&&f&&!S&&!c&&(Ds(this,"onStart"),this._tTime!==f))return this;for(u=this._pt;u;)u.r(p,u.d),u=u._next;m&&m.render(x<0?x:m._dur*m._ease(o/this._dur),S,s)||this._startAt&&(this._zTime=x),this._onUpdate&&!S&&(g&&Sy(this,x,S,s),Ds(this,"onUpdate")),this._repeat&&r!==c&&this.vars.onRepeat&&!S&&this.parent&&Ds(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(g&&!this._onUpdate&&Sy(this,x,!0,!0),(x||!a)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&rl(this,1),!S&&!(g&&!T)&&(f||T||l)&&(Ds(this,f===e?"onComplete":"onReverseComplete",!0),this._prom&&!(f<e&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(x){return(!x||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(x),d.prototype.invalidate.call(this,x)},i.resetTo=function(x,S,s,T,e){Fd||Fs.wake(),this._ts||this.play();var a=Math.min(this._dur,(this._dp._time-this._start)*this._ts),g;return this._initted||q1(this,a),g=this._ease(a/this._dur),S7(this,x,S,s,T,g,a,e)?this.resetTo(x,S,s,T,1):(fg(this,0),this.parent||nR(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(x,S){if(S===void 0&&(S="all"),!x&&(!S||S==="all"))return this._lazy=this._pt=0,this.parent?qc(this):this.scrollTrigger&&this.scrollTrigger.kill(!!zn),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(x,S,zo&&zo.vars.overwrite!==!0)._first||qc(this),this.parent&&s!==this.timeline.totalDuration()&&Cf(this,this._dur*this.timeline._tDur/s,0,1),this}var T=this._targets,e=x?or(x):T,a=this._ptLookup,g=this._pt,f,o,u,r,h,c,l;if((!S||S==="all")&&qU(T,e))return S==="all"&&(this._pt=0),qc(this);for(f=this._op=this._op||[],S!=="all"&&(Ln(S)&&(h={},Ts(S,function(p){return h[p]=1}),S=h),S=C7(T,S)),l=T.length;l--;)if(~e.indexOf(T[l])){o=a[l],S==="all"?(f[l]=S,r=o,u={}):(u=f[l]=f[l]||{},r=S);for(h in r)c=o&&o[h],c&&((!("kill"in c.d)||c.d.kill(h)===!0)&&hg(this,c,"_pt"),delete o[h]),u!=="all"&&(u[h]=1)}return this._initted&&!this._pt&&g&&qc(this),this},t.to=function(x,S){return new t(x,S,arguments[2])},t.from=function(x,S){return cd(1,arguments)},t.delayedCall=function(x,S,s,T){return new t(S,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:x,onComplete:S,onReverseComplete:S,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:T})},t.fromTo=function(x,S,s){return cd(2,arguments)},t.set=function(x,S){return S.duration=0,S.repeatDelay||(S.repeat=0),new t(x,S)},t.killTweensOf=function(x,S,s){return Gi.killTweensOf(x,S,s)},t})(Dd);Xs(cn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ts("staggerTo,staggerFrom,staggerFromTo",function(d){cn[d]=function(){var t=new ss,i=Ay.call(arguments,0);return i.splice(d==="staggerFromTo"?5:4,0,0),t[d].apply(t,i)}});var tT=function(t,i,n){return t[i]=n},MR=function(t,i,n){return t[i](n)},w7=function(t,i,n,x){return t[i](x.fp,n)},M7=function(t,i,n){return t.setAttribute(i,n)},eT=function(t,i){return Zi(t[i])?MR:X1(t[i])&&t.setAttribute?M7:tT},RR=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e6)/1e6,i)},R7=function(t,i){return i.set(i.t,i.p,!!(i.s+i.c*t),i)},PR=function(t,i){var n=i._pt,x="";if(!t&&i.b)x=i.b;else if(t===1&&i.e)x=i.e;else{for(;n;)x=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+x,n=n._next;x+=i.c}i.set(i.t,i.p,x,i)},iT=function(t,i){for(var n=i._pt;n;)n.r(t,n.d),n=n._next},P7=function(t,i,n,x){for(var S=this._pt,s;S;)s=S._next,S.p===x&&S.modifier(t,i,n),S=s},b7=function(t){for(var i=this._pt,n,x;i;)x=i._next,i.p===t&&!i.op||i.op===t?hg(this,i,"_pt"):i.dep||(n=1),i=x;return!n},I7=function(t,i,n,x){x.mSet(t,i,x.m.call(x.tween,n,x.mt),x)},bR=function(t){for(var i=t._pt,n,x,S,s;i;){for(n=i._next,x=S;x&&x.pr>i.pr;)x=x._next;(i._prev=x?x._prev:s)?i._prev._next=i:S=i,(i._next=x)?x._prev=i:s=i,i=n}t._pt=S},Es=(function(){function d(i,n,x,S,s,T,e,a,g){this.t=n,this.s=S,this.c=s,this.p=x,this.r=T||RR,this.d=e||this,this.set=a||tT,this.pr=g||0,this._next=i,i&&(i._prev=this)}var t=d.prototype;return t.modifier=function(n,x,S){this.mSet=this.mSet||this.set,this.set=I7,this.m=n,this.mt=S,this.tween=x},d})();Ts(j1+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(d){return K1[d]=1});Hs.TweenMax=Hs.TweenLite=cn;Hs.TimelineLite=Hs.TimelineMax=ss;Gi=new ss({sortChildren:!1,defaults:Tf,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});zs.stringFilter=xR;var mh=[],Wv={},L7=[],N2=0,F7=0,_0=function(t){return(Wv[t]||L7).map(function(i){return i()})},Py=function(){var t=Date.now(),i=[];t-N2>2&&(_0("matchMediaInit"),mh.forEach(function(n){var x=n.queries,S=n.conditions,s,T,e,a;for(T in x)s=Kr.matchMedia(x[T]).matches,s&&(e=1),s!==S[T]&&(S[T]=s,a=1);a&&(n.revert(),e&&i.push(n))}),_0("matchMediaRevert"),i.forEach(function(n){return n.onMatch(n,function(x){return n.add(null,x)})}),N2=t,_0("matchMedia"))},IR=(function(){function d(i,n){this.selector=n&&wy(n),this.data=[],this._r=[],this.isReverted=!1,this.id=F7++,i&&this.add(i)}var t=d.prototype;return t.add=function(n,x,S){Zi(n)&&(S=x,x=n,n=Zi);var s=this,T=function(){var a=Bi,g=s.selector,f;return a&&a!==s&&a.data.push(s),S&&(s.selector=wy(S)),Bi=s,f=x.apply(s,arguments),Zi(f)&&s._r.push(f),Bi=a,s.selector=g,s.isReverted=!1,f};return s.last=T,n===Zi?T(s,function(e){return s.add(null,e)}):n?s[n]=T:T},t.ignore=function(n){var x=Bi;Bi=null,n(this),Bi=x},t.getTweens=function(){var n=[];return this.data.forEach(function(x){return x instanceof d?n.push.apply(n,x.getTweens()):x instanceof cn&&!(x.parent&&x.parent.data==="nested")&&n.push(x)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,x){var S=this;if(n?(function(){for(var T=S.getTweens(),e=S.data.length,a;e--;)a=S.data[e],a.data==="isFlip"&&(a.revert(),a.getChildren(!0,!0,!1).forEach(function(g){return T.splice(T.indexOf(g),1)}));for(T.map(function(g){return{g:g._dur||g._delay||g._sat&&!g._sat.vars.immediateRender?g.globalTime(0):-1/0,t:g}}).sort(function(g,f){return f.g-g.g||-1/0}).forEach(function(g){return g.t.revert(n)}),e=S.data.length;e--;)a=S.data[e],a instanceof ss?a.data!=="nested"&&(a.scrollTrigger&&a.scrollTrigger.revert(),a.kill()):!(a instanceof cn)&&a.revert&&a.revert(n);S._r.forEach(function(g){return g(n,S)}),S.isReverted=!0})():this.data.forEach(function(T){return T.kill&&T.kill()}),this.clear(),x)for(var s=mh.length;s--;)mh[s].id===this.id&&mh.splice(s,1)},t.revert=function(n){this.kill(n||{})},d})(),D7=(function(){function d(i){this.contexts=[],this.scope=i,Bi&&Bi.data.push(this)}var t=d.prototype;return t.add=function(n,x,S){pa(n)||(n={matches:n});var s=new IR(0,S||this.scope),T=s.conditions={},e,a,g;Bi&&!s.selector&&(s.selector=Bi.selector),this.contexts.push(s),x=s.add("onMatch",x),s.queries=n;for(a in n)a==="all"?g=1:(e=Kr.matchMedia(n[a]),e&&(mh.indexOf(s)<0&&mh.push(s),(T[a]=e.matches)&&(g=1),e.addListener?e.addListener(Py):e.addEventListener("change",Py)));return g&&x(s,function(f){return s.add(null,f)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(x){return x.kill(n,!0)})},d})(),ym={registerPlugin:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];i.forEach(function(x){return vR(x)})},timeline:function(t){return new ss(t)},getTweensOf:function(t,i){return Gi.getTweensOf(t,i)},getProperty:function(t,i,n,x){Ln(t)&&(t=or(t)[0]);var S=dh(t||{}).get,s=n?iR:eR;return n==="native"&&(n=""),t&&(i?s((bs[i]&&bs[i].get||S)(t,i,n,x)):function(T,e,a){return s((bs[T]&&bs[T].get||S)(t,T,e,a))})},quickSetter:function(t,i,n){if(t=or(t),t.length>1){var x=t.map(function(g){return Cs.quickSetter(g,i,n)}),S=x.length;return function(g){for(var f=S;f--;)x[f](g)}}t=t[0]||{};var s=bs[i],T=dh(t),e=T.harness&&(T.harness.aliases||{})[i]||i,a=s?function(g){var f=new s;Vu._pt=0,f.init(t,n?g+n:g,Vu,0,[t]),f.render(1,f),Vu._pt&&iT(1,Vu)}:T.set(t,e);return s?a:function(g){return a(t,e,n?g+n:g,T,1)}},quickTo:function(t,i,n){var x,S=Cs.to(t,Xs((x={},x[i]="+=0.1",x.paused=!0,x.stagger=0,x),n||{})),s=function(e,a,g){return S.resetTo(i,e,a,g)};return s.tween=S,s},isTweening:function(t){return Gi.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=vh(t.ease,Tf.ease)),I2(Tf,t||{})},config:function(t){return I2(zs,t||{})},registerEffect:function(t){var i=t.name,n=t.effect,x=t.plugins,S=t.defaults,s=t.extendTimeline;(x||"").split(",").forEach(function(T){return T&&!bs[T]&&!Hs[T]&&bd(i+" effect requires "+T+" plugin.")}),U0[i]=function(T,e,a){return n(or(T),Xs(e||{},S),a)},s&&(ss.prototype[i]=function(T,e,a){return this.add(U0[i](T,pa(e)?e:(a=e)&&{},this),a)})},registerEase:function(t,i){ii[t]=vh(i)},parseEase:function(t,i){return arguments.length?vh(t,i):ii},getById:function(t){return Gi.getById(t)},exportRoot:function(t,i){t===void 0&&(t={});var n=new ss(t),x,S;for(n.smoothChildTiming=ys(t.smoothChildTiming),Gi.remove(n),n._dp=0,n._time=n._tTime=Gi._time,x=Gi._first;x;)S=x._next,(i||!(!x._dur&&x instanceof cn&&x.vars.onComplete===x._targets[0]))&&ia(n,x,x._start-x._delay),x=S;return ia(Gi,n,0),n},context:function(t,i){return t?new IR(t,i):Bi},matchMedia:function(t){return new D7(t)},matchMediaRefresh:function(){return mh.forEach(function(t){var i=t.conditions,n,x;for(x in i)i[x]&&(i[x]=!1,n=1);n&&t.revert()})||Py()},addEventListener:function(t,i){var n=Wv[t]||(Wv[t]=[]);~n.indexOf(i)||n.push(i)},removeEventListener:function(t,i){var n=Wv[t],x=n&&n.indexOf(i);x>=0&&n.splice(x,1)},utils:{wrap:f7,wrapYoyo:c7,distribute:hR,random:fR,snap:uR,normalize:u7,getUnit:Zn,clamp:a7,splitColor:mR,toArray:or,selector:wy,mapRange:dR,pipe:l7,unitize:h7,interpolate:d7,shuffle:lR},install:ZM,effects:U0,ticker:Fs,updateRoot:ss.updateRoot,plugins:bs,globalTimeline:Gi,core:{PropTween:Es,globals:JM,Tween:cn,Timeline:ss,Animation:Dd,getCache:dh,_removeLinkedListItem:hg,reverting:function(){return zn},context:function(t){return t&&Bi&&(Bi.data.push(t),t._ctx=Bi),Bi},suppressOverwrites:function(t){return H1=t}}};Ts("to,from,fromTo,delayedCall,set,killTweensOf",function(d){return ym[d]=cn[d]});Fs.add(ss.updateRoot);Vu=ym.to({},{duration:0});var O7=function(t,i){for(var n=t._pt;n&&n.p!==i&&n.op!==i&&n.fp!==i;)n=n._next;return n},N7=function(t,i){var n=t._targets,x,S,s;for(x in i)for(S=n.length;S--;)s=t._ptLookup[S][x],s&&(s=s.d)&&(s._pt&&(s=O7(s,x)),s&&s.modifier&&s.modifier(i[x],t,n[S],x))},W0=function(t,i){return{name:t,headless:1,rawVars:1,init:function(x,S,s){s._onInit=function(T){var e,a;if(Ln(S)&&(e={},Ts(S,function(g){return e[g]=1}),S=e),i){e={};for(a in S)e[a]=i(S[a]);S=e}N7(T,S)}}}},Cs=ym.registerPlugin({name:"attr",init:function(t,i,n,x,S){var s,T,e;this.tween=n;for(s in i)e=t.getAttribute(s)||"",T=this.add(t,"setAttribute",(e||0)+"",i[s],x,S,0,0,s),T.op=s,T.b=e,this._props.push(s)},render:function(t,i){for(var n=i._pt;n;)zn?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",headless:1,init:function(t,i){for(var n=i.length;n--;)this.add(t,n,t[n]||0,i[n],0,0,0,0,0,1)}},W0("roundProps",My),W0("modifiers"),W0("snap",uR))||ym;cn.version=ss.version=Cs.version="3.14.2";jM=1;Y1()&&Af();ii.Power0;ii.Power1;ii.Power2;ii.Power3;ii.Power4;ii.Linear;ii.Quad;ii.Cubic;ii.Quart;ii.Quint;ii.Strong;ii.Elastic;ii.Back;ii.SteppedEase;ii.Bounce;ii.Sine;ii.Expo;ii.Circ;/*!
 * CSSPlugin 3.14.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var B2,Go,Yu,nT,th,U2,sT,B7=function(){return typeof window<"u"},io={},zl=180/Math.PI,ku=Math.PI/180,Eu=Math.atan2,V2=1e8,rT=/([A-Z])/g,U7=/(left|right|width|margin|padding|x)/i,V7=/[\s,\(]\S/,sa={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},by=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},z7=function(t,i){return i.set(i.t,i.p,t===1?i.e:Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},G7=function(t,i){return i.set(i.t,i.p,t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},_7=function(t,i){return i.set(i.t,i.p,t===1?i.e:t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},W7=function(t,i){var n=i.s+i.c*t;i.set(i.t,i.p,~~(n+(n<0?-.5:.5))+i.u,i)},LR=function(t,i){return i.set(i.t,i.p,t?i.e:i.b,i)},FR=function(t,i){return i.set(i.t,i.p,t!==1?i.b:i.e,i)},H7=function(t,i,n){return t.style[i]=n},X7=function(t,i,n){return t.style.setProperty(i,n)},Y7=function(t,i,n){return t._gsap[i]=n},k7=function(t,i,n){return t._gsap.scaleX=t._gsap.scaleY=n},$7=function(t,i,n,x,S){var s=t._gsap;s.scaleX=s.scaleY=n,s.renderTransform(S,s)},K7=function(t,i,n,x,S){var s=t._gsap;s[i]=n,s.renderTransform(S,s)},_i="transform",Ss=_i+"Origin",j7=function d(t,i){var n=this,x=this.target,S=x.style,s=x._gsap;if(t in io&&S){if(this.tfm=this.tfm||{},t!=="transform")t=sa[t]||t,~t.indexOf(",")?t.split(",").forEach(function(T){return n.tfm[T]=Ua(x,T)}):this.tfm[t]=s.x?s[t]:Ua(x,t),t===Ss&&(this.tfm.zOrigin=s.zOrigin);else return sa.transform.split(",").forEach(function(T){return d.call(n,T,i)});if(this.props.indexOf(_i)>=0)return;s.svg&&(this.svgo=x.getAttribute("data-svg-origin"),this.props.push(Ss,i,"")),t=_i}(S||i)&&this.props.push(t,i,S[t])},DR=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Z7=function(){var t=this.props,i=this.target,n=i.style,x=i._gsap,S,s;for(S=0;S<t.length;S+=3)t[S+1]?t[S+1]===2?i[t[S]](t[S+2]):i[t[S]]=t[S+2]:t[S+2]?n[t[S]]=t[S+2]:n.removeProperty(t[S].substr(0,2)==="--"?t[S]:t[S].replace(rT,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)x[s]=this.tfm[s];x.svg&&(x.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),S=sT(),(!S||!S.isStart)&&!n[_i]&&(DR(n),x.zOrigin&&n[Ss]&&(n[Ss]+=" "+x.zOrigin+"px",x.zOrigin=0,x.renderTransform()),x.uncache=1)}},OR=function(t,i){var n={target:t,props:[],revert:Z7,save:j7};return t._gsap||Cs.core.getCache(t),i&&t.style&&t.nodeType&&i.split(",").forEach(function(x){return n.save(x)}),n},NR,Iy=function(t,i){var n=Go.createElementNS?Go.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Go.createElement(t);return n&&n.style?n:Go.createElement(t)},Os=function d(t,i,n){var x=getComputedStyle(t);return x[i]||x.getPropertyValue(i.replace(rT,"-$1").toLowerCase())||x.getPropertyValue(i)||!n&&d(t,wf(i)||i,1)||""},z2="O,Moz,ms,Ms,Webkit".split(","),wf=function(t,i,n){var x=i||th,S=x.style,s=5;if(t in S&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(z2[s]+t in S););return s<0?null:(s===3?"ms":s>=0?z2[s]:"")+t},Ly=function(){B7()&&window.document&&(B2=window,Go=B2.document,Yu=Go.documentElement,th=Iy("div")||{style:{}},Iy("div"),_i=wf(_i),Ss=_i+"Origin",th.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",NR=!!wf("perspective"),sT=Cs.core.reverting,nT=1)},G2=function(t){var i=t.ownerSVGElement,n=Iy("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),x=t.cloneNode(!0),S;x.style.display="block",n.appendChild(x),Yu.appendChild(n);try{S=x.getBBox()}catch{}return n.removeChild(x),Yu.removeChild(n),S},_2=function(t,i){for(var n=i.length;n--;)if(t.hasAttribute(i[n]))return t.getAttribute(i[n])},BR=function(t){var i,n;try{i=t.getBBox()}catch{i=G2(t),n=1}return i&&(i.width||i.height)||n||(i=G2(t)),i&&!i.width&&!i.x&&!i.y?{x:+_2(t,["x","cx","x1"])||0,y:+_2(t,["y","cy","y1"])||0,width:0,height:0}:i},UR=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&BR(t))},al=function(t,i){if(i){var n=t.style,x;i in io&&i!==Ss&&(i=_i),n.removeProperty?(x=i.substr(0,2),(x==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),n.removeProperty(x==="--"?i:i.replace(rT,"-$1").toLowerCase())):n.removeAttribute(i)}},_o=function(t,i,n,x,S,s){var T=new Es(t._pt,i,n,0,1,s?FR:LR);return t._pt=T,T.b=x,T.e=S,t._props.push(n),T},W2={deg:1,rad:1,turn:1},J7={grid:1,flex:1},ol=function d(t,i,n,x){var S=parseFloat(n)||0,s=(n+"").trim().substr((S+"").length)||"px",T=th.style,e=U7.test(i),a=t.tagName.toLowerCase()==="svg",g=(a?"client":"offset")+(e?"Width":"Height"),f=100,o=x==="px",u=x==="%",r,h,c,l;if(x===s||!S||W2[x]||W2[s])return S;if(s!=="px"&&!o&&(S=d(t,i,n,"px")),l=t.getCTM&&UR(t),(u||s==="%")&&(io[i]||~i.indexOf("adius")))return r=l?t.getBBox()[e?"width":"height"]:t[g],qi(u?S/r*f:S/100*r);if(T[e?"width":"height"]=f+(o?s:x),h=x!=="rem"&&~i.indexOf("adius")||x==="em"&&t.appendChild&&!a?t:t.parentNode,l&&(h=(t.ownerSVGElement||{}).parentNode),(!h||h===Go||!h.appendChild)&&(h=Go.body),c=h._gsap,c&&u&&c.width&&e&&c.time===Fs.time&&!c.uncache)return qi(S/c.width*f);if(u&&(i==="height"||i==="width")){var p=t.style[i];t.style[i]=f+x,r=t[g],p?t.style[i]=p:al(t,i)}else(u||s==="%")&&!J7[Os(h,"display")]&&(T.position=Os(t,"position")),h===t&&(T.position="static"),h.appendChild(th),r=th[g],h.removeChild(th),T.position="absolute";return e&&u&&(c=dh(h),c.time=Fs.time,c.width=h[g]),qi(o?r*S/f:r&&S?f/r*S:0)},Ua=function(t,i,n,x){var S;return nT||Ly(),i in sa&&i!=="transform"&&(i=sa[i],~i.indexOf(",")&&(i=i.split(",")[0])),io[i]&&i!=="transform"?(S=Nd(t,x),S=i!=="transformOrigin"?S[i]:S.svg?S.origin:Em(Os(t,Ss))+" "+S.zOrigin+"px"):(S=t.style[i],(!S||S==="auto"||x||~(S+"").indexOf("calc("))&&(S=Tm[i]&&Tm[i](t,i,n)||Os(t,i)||qM(t,i)||(i==="opacity"?1:0))),n&&!~(S+"").trim().indexOf(" ")?ol(t,i,S,n)+n:S},Q7=function(t,i,n,x){if(!n||n==="none"){var S=wf(i,t,1),s=S&&Os(t,S,1);s&&s!==n?(i=S,n=s):i==="borderColor"&&(n=Os(t,"borderTopColor"))}var T=new Es(this._pt,t.style,i,0,1,PR),e=0,a=0,g,f,o,u,r,h,c,l,p,m,v,y;if(T.b=n,T.e=x,n+="",x+="",x.substring(0,6)==="var(--"&&(x=Os(t,x.substring(4,x.indexOf(")")))),x==="auto"&&(h=t.style[i],t.style[i]=x,x=Os(t,i)||x,h?t.style[i]=h:al(t,i)),g=[n,x],xR(g),n=g[0],x=g[1],o=n.match(Uu)||[],y=x.match(Uu)||[],y.length){for(;f=Uu.exec(x);)c=f[0],p=x.substring(e,f.index),r?r=(r+1)%5:(p.substr(-5)==="rgba("||p.substr(-5)==="hsla(")&&(r=1),c!==(h=o[a++]||"")&&(u=parseFloat(h)||0,v=h.substr((u+"").length),c.charAt(1)==="="&&(c=Xu(u,c)+v),l=parseFloat(c),m=c.substr((l+"").length),e=Uu.lastIndex-m.length,m||(m=m||zs.units[i]||v,e===x.length&&(x+=m,T.e+=m)),v!==m&&(u=ol(t,i,h,m)||0),T._pt={_next:T._pt,p:p||a===1?p:",",s:u,c:l-u,m:r&&r<4||i==="zIndex"?Math.round:0});T.c=e<x.length?x.substring(e,x.length):""}else T.r=i==="display"&&x==="none"?FR:LR;return KM.test(x)&&(T.e=0),this._pt=T,T},H2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},q7=function(t){var i=t.split(" "),n=i[0],x=i[1]||"50%";return(n==="top"||n==="bottom"||x==="left"||x==="right")&&(t=n,n=x,x=t),i[0]=H2[n]||n,i[1]=H2[x]||x,i.join(" ")},tV=function(t,i){if(i.tween&&i.tween._time===i.tween._dur){var n=i.t,x=n.style,S=i.u,s=n._gsap,T,e,a;if(S==="all"||S===!0)x.cssText="",e=1;else for(S=S.split(","),a=S.length;--a>-1;)T=S[a],io[T]&&(e=1,T=T==="transformOrigin"?Ss:_i),al(n,T);e&&(al(n,_i),s&&(s.svg&&n.removeAttribute("transform"),x.scale=x.rotate=x.translate="none",Nd(n,1),s.uncache=1,DR(x)))}},Tm={clearProps:function(t,i,n,x,S){if(S.data!=="isFromStart"){var s=t._pt=new Es(t._pt,i,n,0,0,tV);return s.u=x,s.pr=-10,s.tween=S,t._props.push(n),1}}},Od=[1,0,0,1,0,0],VR={},zR=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},X2=function(t){var i=Os(t,_i);return zR(i)?Od:i.substr(7).match($M).map(qi)},aT=function(t,i){var n=t._gsap||dh(t),x=t.style,S=X2(t),s,T,e,a;return n.svg&&t.getAttribute("transform")?(e=t.transform.baseVal.consolidate().matrix,S=[e.a,e.b,e.c,e.d,e.e,e.f],S.join(",")==="1,0,0,1,0,0"?Od:S):(S===Od&&!t.offsetParent&&t!==Yu&&!n.svg&&(e=x.display,x.display="block",s=t.parentNode,(!s||!t.offsetParent&&!t.getBoundingClientRect().width)&&(a=1,T=t.nextElementSibling,Yu.appendChild(t)),S=X2(t),e?x.display=e:al(t,"display"),a&&(T?s.insertBefore(t,T):s?s.appendChild(t):Yu.removeChild(t))),i&&S.length>6?[S[0],S[1],S[4],S[5],S[12],S[13]]:S)},Fy=function(t,i,n,x,S,s){var T=t._gsap,e=S||aT(t,!0),a=T.xOrigin||0,g=T.yOrigin||0,f=T.xOffset||0,o=T.yOffset||0,u=e[0],r=e[1],h=e[2],c=e[3],l=e[4],p=e[5],m=i.split(" "),v=parseFloat(m[0])||0,y=parseFloat(m[1])||0,E,C,w,A;n?e!==Od&&(C=u*c-r*h)&&(w=v*(c/C)+y*(-h/C)+(h*p-c*l)/C,A=v*(-r/C)+y*(u/C)-(u*p-r*l)/C,v=w,y=A):(E=BR(t),v=E.x+(~m[0].indexOf("%")?v/100*E.width:v),y=E.y+(~(m[1]||m[0]).indexOf("%")?y/100*E.height:y)),x||x!==!1&&T.smooth?(l=v-a,p=y-g,T.xOffset=f+(l*u+p*h)-l,T.yOffset=o+(l*r+p*c)-p):T.xOffset=T.yOffset=0,T.xOrigin=v,T.yOrigin=y,T.smooth=!!x,T.origin=i,T.originIsAbsolute=!!n,t.style[Ss]="0px 0px",s&&(_o(s,T,"xOrigin",a,v),_o(s,T,"yOrigin",g,y),_o(s,T,"xOffset",f,T.xOffset),_o(s,T,"yOffset",o,T.yOffset)),t.setAttribute("data-svg-origin",v+" "+y)},Nd=function(t,i){var n=t._gsap||new SR(t);if("x"in n&&!i&&!n.uncache)return n;var x=t.style,S=n.scaleX<0,s="px",T="deg",e=getComputedStyle(t),a=Os(t,Ss)||"0",g,f,o,u,r,h,c,l,p,m,v,y,E,C,w,A,M,R,P,b,F,I,L,D,O,z,_,X,H,U,G,N;return g=f=o=h=c=l=p=m=v=0,u=r=1,n.svg=!!(t.getCTM&&UR(t)),e.translate&&((e.translate!=="none"||e.scale!=="none"||e.rotate!=="none")&&(x[_i]=(e.translate!=="none"?"translate3d("+(e.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(e.rotate!=="none"?"rotate("+e.rotate+") ":"")+(e.scale!=="none"?"scale("+e.scale.split(" ").join(",")+") ":"")+(e[_i]!=="none"?e[_i]:"")),x.scale=x.rotate=x.translate="none"),C=aT(t,n.svg),n.svg&&(n.uncache?(O=t.getBBox(),a=n.xOrigin-O.x+"px "+(n.yOrigin-O.y)+"px",D=""):D=!i&&t.getAttribute("data-svg-origin"),Fy(t,D||a,!!D||n.originIsAbsolute,n.smooth!==!1,C)),y=n.xOrigin||0,E=n.yOrigin||0,C!==Od&&(R=C[0],P=C[1],b=C[2],F=C[3],g=I=C[4],f=L=C[5],C.length===6?(u=Math.sqrt(R*R+P*P),r=Math.sqrt(F*F+b*b),h=R||P?Eu(P,R)*zl:0,p=b||F?Eu(b,F)*zl+h:0,p&&(r*=Math.abs(Math.cos(p*ku))),n.svg&&(g-=y-(y*R+E*b),f-=E-(y*P+E*F))):(N=C[6],U=C[7],_=C[8],X=C[9],H=C[10],G=C[11],g=C[12],f=C[13],o=C[14],w=Eu(N,H),c=w*zl,w&&(A=Math.cos(-w),M=Math.sin(-w),D=I*A+_*M,O=L*A+X*M,z=N*A+H*M,_=I*-M+_*A,X=L*-M+X*A,H=N*-M+H*A,G=U*-M+G*A,I=D,L=O,N=z),w=Eu(-b,H),l=w*zl,w&&(A=Math.cos(-w),M=Math.sin(-w),D=R*A-_*M,O=P*A-X*M,z=b*A-H*M,G=F*M+G*A,R=D,P=O,b=z),w=Eu(P,R),h=w*zl,w&&(A=Math.cos(w),M=Math.sin(w),D=R*A+P*M,O=I*A+L*M,P=P*A-R*M,L=L*A-I*M,R=D,I=O),c&&Math.abs(c)+Math.abs(h)>359.9&&(c=h=0,l=180-l),u=qi(Math.sqrt(R*R+P*P+b*b)),r=qi(Math.sqrt(L*L+N*N)),w=Eu(I,L),p=Math.abs(w)>2e-4?w*zl:0,v=G?1/(G<0?-G:G):0),n.svg&&(D=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!zR(Os(t,_i)),D&&t.setAttribute("transform",D))),Math.abs(p)>90&&Math.abs(p)<270&&(S?(u*=-1,p+=h<=0?180:-180,h+=h<=0?180:-180):(r*=-1,p+=p<=0?180:-180)),i=i||n.uncache,n.x=g-((n.xPercent=g&&(!i&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-g)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+s,n.y=f-((n.yPercent=f&&(!i&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+s,n.z=o+s,n.scaleX=qi(u),n.scaleY=qi(r),n.rotation=qi(h)+T,n.rotationX=qi(c)+T,n.rotationY=qi(l)+T,n.skewX=p+T,n.skewY=m+T,n.transformPerspective=v+s,(n.zOrigin=parseFloat(a.split(" ")[2])||!i&&n.zOrigin||0)&&(x[Ss]=Em(a)),n.xOffset=n.yOffset=0,n.force3D=zs.force3D,n.renderTransform=n.svg?iV:NR?GR:eV,n.uncache=0,n},Em=function(t){return(t=t.split(" "))[0]+" "+t[1]},H0=function(t,i,n){var x=Zn(i);return qi(parseFloat(i)+parseFloat(ol(t,"x",n+"px",x)))+x},eV=function(t,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,GR(t,i)},Ol="0deg",Gc="0px",Nl=") ",GR=function(t,i){var n=i||this,x=n.xPercent,S=n.yPercent,s=n.x,T=n.y,e=n.z,a=n.rotation,g=n.rotationY,f=n.rotationX,o=n.skewX,u=n.skewY,r=n.scaleX,h=n.scaleY,c=n.transformPerspective,l=n.force3D,p=n.target,m=n.zOrigin,v="",y=l==="auto"&&t&&t!==1||l===!0;if(m&&(f!==Ol||g!==Ol)){var E=parseFloat(g)*ku,C=Math.sin(E),w=Math.cos(E),A;E=parseFloat(f)*ku,A=Math.cos(E),s=H0(p,s,C*A*-m),T=H0(p,T,-Math.sin(E)*-m),e=H0(p,e,w*A*-m+m)}c!==Gc&&(v+="perspective("+c+Nl),(x||S)&&(v+="translate("+x+"%, "+S+"%) "),(y||s!==Gc||T!==Gc||e!==Gc)&&(v+=e!==Gc||y?"translate3d("+s+", "+T+", "+e+") ":"translate("+s+", "+T+Nl),a!==Ol&&(v+="rotate("+a+Nl),g!==Ol&&(v+="rotateY("+g+Nl),f!==Ol&&(v+="rotateX("+f+Nl),(o!==Ol||u!==Ol)&&(v+="skew("+o+", "+u+Nl),(r!==1||h!==1)&&(v+="scale("+r+", "+h+Nl),p.style[_i]=v||"translate(0, 0)"},iV=function(t,i){var n=i||this,x=n.xPercent,S=n.yPercent,s=n.x,T=n.y,e=n.rotation,a=n.skewX,g=n.skewY,f=n.scaleX,o=n.scaleY,u=n.target,r=n.xOrigin,h=n.yOrigin,c=n.xOffset,l=n.yOffset,p=n.forceCSS,m=parseFloat(s),v=parseFloat(T),y,E,C,w,A;e=parseFloat(e),a=parseFloat(a),g=parseFloat(g),g&&(g=parseFloat(g),a+=g,e+=g),e||a?(e*=ku,a*=ku,y=Math.cos(e)*f,E=Math.sin(e)*f,C=Math.sin(e-a)*-o,w=Math.cos(e-a)*o,a&&(g*=ku,A=Math.tan(a-g),A=Math.sqrt(1+A*A),C*=A,w*=A,g&&(A=Math.tan(g),A=Math.sqrt(1+A*A),y*=A,E*=A)),y=qi(y),E=qi(E),C=qi(C),w=qi(w)):(y=f,w=o,E=C=0),(m&&!~(s+"").indexOf("px")||v&&!~(T+"").indexOf("px"))&&(m=ol(u,"x",s,"px"),v=ol(u,"y",T,"px")),(r||h||c||l)&&(m=qi(m+r-(r*y+h*C)+c),v=qi(v+h-(r*E+h*w)+l)),(x||S)&&(A=u.getBBox(),m=qi(m+x/100*A.width),v=qi(v+S/100*A.height)),A="matrix("+y+","+E+","+C+","+w+","+m+","+v+")",u.setAttribute("transform",A),p&&(u.style[_i]=A)},nV=function(t,i,n,x,S){var s=360,T=Ln(S),e=parseFloat(S)*(T&&~S.indexOf("rad")?zl:1),a=e-x,g=x+a+"deg",f,o;return T&&(f=S.split("_")[1],f==="short"&&(a%=s,a!==a%(s/2)&&(a+=a<0?s:-s)),f==="cw"&&a<0?a=(a+s*V2)%s-~~(a/s)*s:f==="ccw"&&a>0&&(a=(a-s*V2)%s-~~(a/s)*s)),t._pt=o=new Es(t._pt,i,n,x,a,z7),o.e=g,o.u="deg",t._props.push(n),o},Y2=function(t,i){for(var n in i)t[n]=i[n];return t},sV=function(t,i,n){var x=Y2({},n._gsap),S="perspective,force3D,transformOrigin,svgOrigin",s=n.style,T,e,a,g,f,o,u,r;x.svg?(a=n.getAttribute("transform"),n.setAttribute("transform",""),s[_i]=i,T=Nd(n,1),al(n,_i),n.setAttribute("transform",a)):(a=getComputedStyle(n)[_i],s[_i]=i,T=Nd(n,1),s[_i]=a);for(e in io)a=x[e],g=T[e],a!==g&&S.indexOf(e)<0&&(u=Zn(a),r=Zn(g),f=u!==r?ol(n,e,a,r):parseFloat(a),o=parseFloat(g),t._pt=new Es(t._pt,T,e,f,o-f,by),t._pt.u=r||0,t._props.push(e));Y2(T,x)};Ts("padding,margin,Width,Radius",function(d,t){var i="Top",n="Right",x="Bottom",S="Left",s=(t<3?[i,n,x,S]:[i+S,i+n,x+n,x+S]).map(function(T){return t<2?d+T:"border"+T+d});Tm[t>1?"border"+d:d]=function(T,e,a,g,f){var o,u;if(arguments.length<4)return o=s.map(function(r){return Ua(T,r,a)}),u=o.join(" "),u.split(o[0]).length===5?o[0]:u;o=(g+"").split(" "),u={},s.forEach(function(r,h){return u[r]=o[h]=o[h]||o[(h-1)/2|0]}),T.init(e,u,f)}});var _R={name:"css",register:Ly,targetTest:function(t){return t.style&&t.nodeType},init:function(t,i,n,x,S){var s=this._props,T=t.style,e=n.vars.startAt,a,g,f,o,u,r,h,c,l,p,m,v,y,E,C,w,A;nT||Ly(),this.styles=this.styles||OR(t),w=this.styles.props,this.tween=n;for(h in i)if(h!=="autoRound"&&(g=i[h],!(bs[h]&&CR(h,i,n,x,t,S)))){if(u=typeof g,r=Tm[h],u==="function"&&(g=g.call(n,x,t,S),u=typeof g),u==="string"&&~g.indexOf("random(")&&(g=Ld(g)),r)r(this,t,h,g,n)&&(C=1);else if(h.substr(0,2)==="--")a=(getComputedStyle(t).getPropertyValue(h)+"").trim(),g+="",jo.lastIndex=0,jo.test(a)||(c=Zn(a),l=Zn(g),l?c!==l&&(a=ol(t,h,a,l)+l):c&&(g+=c)),this.add(T,"setProperty",a,g,x,S,0,0,h),s.push(h),w.push(h,0,T[h]);else if(u!=="undefined"){if(e&&h in e?(a=typeof e[h]=="function"?e[h].call(n,x,t,S):e[h],Ln(a)&&~a.indexOf("random(")&&(a=Ld(a)),Zn(a+"")||a==="auto"||(a+=zs.units[h]||Zn(Ua(t,h))||""),(a+"").charAt(1)==="="&&(a=Ua(t,h))):a=Ua(t,h),o=parseFloat(a),p=u==="string"&&g.charAt(1)==="="&&g.substr(0,2),p&&(g=g.substr(2)),f=parseFloat(g),h in sa&&(h==="autoAlpha"&&(o===1&&Ua(t,"visibility")==="hidden"&&f&&(o=0),w.push("visibility",0,T.visibility),_o(this,T,"visibility",o?"inherit":"hidden",f?"inherit":"hidden",!f)),h!=="scale"&&h!=="transform"&&(h=sa[h],~h.indexOf(",")&&(h=h.split(",")[0]))),m=h in io,m){if(this.styles.save(h),A=g,u==="string"&&g.substring(0,6)==="var(--"){if(g=Os(t,g.substring(4,g.indexOf(")"))),g.substring(0,5)==="calc("){var M=t.style.perspective;t.style.perspective=g,g=Os(t,"perspective"),M?t.style.perspective=M:al(t,"perspective")}f=parseFloat(g)}if(v||(y=t._gsap,y.renderTransform&&!i.parseTransform||Nd(t,i.parseTransform),E=i.smoothOrigin!==!1&&y.smooth,v=this._pt=new Es(this._pt,T,_i,0,1,y.renderTransform,y,0,-1),v.dep=1),h==="scale")this._pt=new Es(this._pt,y,"scaleY",y.scaleY,(p?Xu(y.scaleY,p+f):f)-y.scaleY||0,by),this._pt.u=0,s.push("scaleY",h),h+="X";else if(h==="transformOrigin"){w.push(Ss,0,T[Ss]),g=q7(g),y.svg?Fy(t,g,0,E,0,this):(l=parseFloat(g.split(" ")[2])||0,l!==y.zOrigin&&_o(this,y,"zOrigin",y.zOrigin,l),_o(this,T,h,Em(a),Em(g)));continue}else if(h==="svgOrigin"){Fy(t,g,1,E,0,this);continue}else if(h in VR){nV(this,y,h,o,p?Xu(o,p+g):g);continue}else if(h==="smoothOrigin"){_o(this,y,"smooth",y.smooth,g);continue}else if(h==="force3D"){y[h]=g;continue}else if(h==="transform"){sV(this,g,t);continue}}else h in T||(h=wf(h)||h);if(m||(f||f===0)&&(o||o===0)&&!V7.test(g)&&h in T)c=(a+"").substr((o+"").length),f||(f=0),l=Zn(g)||(h in zs.units?zs.units[h]:c),c!==l&&(o=ol(t,h,a,l)),this._pt=new Es(this._pt,m?y:T,h,o,(p?Xu(o,p+f):f)-o,!m&&(l==="px"||h==="zIndex")&&i.autoRound!==!1?W7:by),this._pt.u=l||0,m&&A!==g?(this._pt.b=a,this._pt.e=A,this._pt.r=_7):c!==l&&l!=="%"&&(this._pt.b=a,this._pt.r=G7);else if(h in T)Q7.call(this,t,h,a,p?p+g:g);else if(h in t)this.add(t,h,a||t[h],p?p+g:g,x,S);else if(h!=="parseTransform"){$1(h,g);continue}m||(h in T?w.push(h,0,T[h]):typeof t[h]=="function"?w.push(h,2,t[h]()):w.push(h,1,a||t[h])),s.push(h)}}C&&bR(this)},render:function(t,i){if(i.tween._time||!sT())for(var n=i._pt;n;)n.r(t,n.d),n=n._next;else i.styles.revert()},get:Ua,aliases:sa,getSetter:function(t,i,n){var x=sa[i];return x&&x.indexOf(",")<0&&(i=x),i in io&&i!==Ss&&(t._gsap.x||Ua(t,"x"))?n&&U2===n?i==="scale"?k7:Y7:(U2=n||{})&&(i==="scale"?$7:K7):t.style&&!X1(t.style[i])?H7:~i.indexOf("-")?X7:eT(t,i)},core:{_removeProperty:al,_getMatrix:aT}};Cs.utils.checkPrefix=wf;Cs.core.getStyleSaver=OR;(function(d,t,i,n){var x=Ts(d+","+t+","+i,function(S){io[S]=1});Ts(t,function(S){zs.units[S]="deg",VR[S]=1}),sa[x[13]]=d+","+t,Ts(n,function(S){var s=S.split(":");sa[s[1]]=x[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ts("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(d){zs.units[d]="px"});Cs.registerPlugin(_R);var Dy=Cs.registerPlugin(_R)||Cs;Dy.core.Tween;var rV=Qt('<div class="w-[14%] bg-black/20 rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] flex flex-col overflow-hidden relative group"><div class="flex-1 relative cursor-pointer"></div></div>');function aV(d,t){ks(t,!1);let i=Fe(t,"show",8,!1),n=Fe(t,"rollDuration",8,3.5);const x=pl();let S=fe(),s=fe(),T,e,a,g=[],f,o,u,r=!1;const h={size:7.2,edgeRadius:1.6,segments:12},c=16,l=4;function p(){const b=new Zf(h.size,h.size,h.size,h.segments,h.segments,h.segments),F=b.attributes.position,I=h.size/2-h.edgeRadius;for(let L=0;L<F.count;L++){let D=F.getX(L),O=F.getY(L),z=F.getZ(L);if(Math.abs(D)>I&&Math.abs(O)>I&&Math.abs(z)>I){const _=new Ct(D>0?D-I:D+I,O>0?O-I:O+I,z>0?z-I:z+I);_.normalize().multiplyScalar(h.edgeRadius),F.setXYZ(L,(D>0?I:-I)+_.x,(O>0?I:-I)+_.y,(z>0?I:-I)+_.z)}else if(Math.abs(D)>I&&Math.abs(O)>I){const _=new ni(D>0?D-I:D+I,O>0?O-I:O+I);_.normalize().multiplyScalar(h.edgeRadius),F.setXY(L,(D>0?I:-I)+_.x,(O>0?I:-I)+_.y)}else if(Math.abs(D)>I&&Math.abs(z)>I){const _=new ni(D>0?D-I:D+I,z>0?z-I:z+I);_.normalize().multiplyScalar(h.edgeRadius),F.setX(L,(D>0?I:-I)+_.x),F.setZ(L,(z>0?I:-I)+_.y)}else if(Math.abs(O)>I&&Math.abs(z)>I){const _=new ni(O>0?O-I:O+I,z>0?z-I:z+I);_.normalize().multiplyScalar(h.edgeRadius),F.setY(L,(O>0?I:-I)+_.x),F.setZ(L,(z>0?I:-I)+_.y)}}return b.computeVertexNormals(),b}function m(){const b=p(),F=new cv({color:15790320,roughness:.6,metalness:.05}),I=new Jc,L=new ps(b,F);L.castShadow=!0,I.add(L);const D=.1*h.size,O=new dm(D,12,12),z=new cv({color:2236962,roughness:.4,metalness:0}),X=h.size/2-D*.4,H=.22*h.size;return[{face:"front",axis:"z",val:X,dots:[[0,0]]},{face:"back",axis:"z",val:-X,dots:[[-H,-H],[-H,0],[-H,H],[H,-H],[H,0],[H,H]]},{face:"top",axis:"y",val:X,dots:[[-H,-H],[H,H]]},{face:"bottom",axis:"y",val:-X,dots:[[-H,-H],[0,0],[H,H],[H,-H],[-H,H]]},{face:"right",axis:"x",val:X,dots:[[-H,-H],[0,0],[H,H]]},{face:"left",axis:"x",val:-X,dots:[[-H,-H],[H,-H],[-H,H],[H,H]]}].forEach(G=>{G.dots.forEach(N=>{const W=new ps(O,z);G.axis==="z"?W.position.set(N[0],N[1],G.val):G.axis==="y"?W.position.set(N[0],G.val,N[1]):W.position.set(G.val,N[0],N[1]),I.add(W)})}),I}let v=0;function y(){ut(s,new S5),T=new Ls(60,Y(S).clientWidth/Y(S).clientHeight,.1,100),T.position.set(0,18,28),T.lookAt(0,4,0),e=new p8({antialias:!0,alpha:!0}),e.setSize(Y(S).clientWidth,Y(S).clientHeight),e.shadowMap.enabled=!0,Y(S).appendChild(e.domElement);const b=new L5(16777215,.7);Y(s).add(b);const F=new I5(16777215,1.2);F.position.set(10,25,15),F.castShadow=!0,F.shadow.mapSize.width=1024,F.shadow.mapSize.height=1024,Y(s).add(F);const I=new P5(16777215,.5);I.position.set(-15,10,-10),Y(s).add(I),a=new OU,a.gravity.set(0,-200,0),a.allowSleep=!0,a.solver.iterations=20;const L=new ch({friction:.2,restitution:.5}),D=new ch({friction:.4,restitution:.3}),O=new ch({friction:.05,restitution:.8}),z=new fh(L,L,{friction:.2,restitution:.5,contactEquationStiffness:1e6,contactEquationRelaxation:3});a.addContactMaterial(z);const _=new fh(L,D,{friction:.4,restitution:.4});a.addContactMaterial(_);const X=new fh(L,O,{friction:.05,restitution:.7});a.addContactMaterial(X),o=new de({mass:0,shape:new D0,material:D}),o.quaternion.setFromEuler(-Math.PI/2,0,0),a.addBody(o),f=new ps(new cm(c,c,l,32),new cv({color:1118481,roughness:.4,metalness:.2})),f.position.y=-l/2,f.receiveShadow=!0,Y(s).add(f);const H=6,U=new cm(c,c,H,32,1,!0),G=new cv({color:16777215,transparent:!0,opacity:.1,side:qa,metalness:.1,roughness:.05}),N=new ps(U,G);N.position.y=H/2,Y(s).add(N);const W=new dm(c,32,16,0,Math.PI*2,0,Math.PI/2),V=new ps(W,G);V.position.y=H,Y(s).add(V);const $=12;for(let k=0;k<$;k++){const Q=k/$*Math.PI*2,et=Math.cos(Q)*c,at=Math.sin(Q)*c,q=new de({mass:0,shape:new D0,material:O});q.position.set(et,H/2,at),q.quaternion.setFromEuler(0,-Q-Math.PI/2,0),a.addBody(q)}const j=new de({mass:0,shape:new D0,material:O});j.position.set(0,H+c,0),j.quaternion.setFromEuler(Math.PI/2,0,0),a.addBody(j);for(let k=0;k<2;k++){const Q=m();Y(s).add(Q);const et=new de({mass:20,shape:new lg(new tt(h.size/2,h.size/2,h.size/2)),material:L,linearDamping:.4,angularDamping:.3});et.position.set(k===0?-7.2*1.2:h.size*1.2,h.size/2,0),a.addBody(et),g.push({mesh:Q,body:et})}E()}function E(){if(u=requestAnimationFrame(E),a.fixedStep(),g.forEach(b=>{const I=b.body.velocity;I.length()>30&&I.scale(30/I.length(),I);const L=20,D=b.body.angularVelocity;D.length()>L&&D.scale(L/D.length(),D),b.mesh.position.copy(b.body.position),b.mesh.quaternion.copy(b.body.quaternion)}),r){const b=g.every(I=>I.body.velocity.length()<.3&&I.body.angularVelocity.length()<.3),F=Date.now()-v>n()*1e3;b&&F&&setTimeout(()=>{r&&(r=!1,C())},300)}e.render(Y(s),T)}function C(){const b=g.map(F=>{const I=F.mesh.quaternion,L=new Ct(0,1,0).applyQuaternion(I.clone().invert()),D=[{val:1,vec:new Ct(0,0,1)},{val:6,vec:new Ct(0,0,-1)},{val:2,vec:new Ct(0,1,0)},{val:5,vec:new Ct(0,-1,0)},{val:3,vec:new Ct(1,0,0)},{val:4,vec:new Ct(-1,0,0)}];let O=-1/0,z=1;return D.forEach(_=>{const X=_.vec.dot(L);X>O&&(O=X,z=_.val)}),z});x("rolled",{dice:b,total:b[0]+b[1]})}function w(){r||(r=!0,x("rollStart"),v=Date.now(),g.forEach(b=>{b.body.wakeUp(),b.body.velocity.set((Math.random()>.5?1:-1)*(15+Math.random()*10),4+Math.random()*4,(Math.random()>.5?1:-1)*(15+Math.random()*10)),b.body.angularVelocity.set((Math.random()-.5)*15,(Math.random()-.5)*15,(Math.random()-.5)*15)}),f&&Dy.to({},{duration:n(),onUpdate(){const b=this.progress(),F=Date.now()*.016,I=(1-b*.8)*1,L=I*6,D=I*.3,O=Math.abs(Math.sin(F))*L;f.position.y=-l/2+O,o.position.y=O*.5,f.position.x=0,f.position.z=0,o.position.x=0,o.position.z=0;const z=Math.sin(F*.5)*D,_=Math.cos(F*.5)*D;if(o.quaternion.setFromEuler(-Math.PI/2+z,0,_),g.forEach(X=>{X.body.wakeUp();const H=Math.sin(F)>0?.4:.1,U=new tt((Math.random()-.5)*1200*I,(200+Math.random()*300)*I*H,(Math.random()-.5)*1200*I);X.body.applyForce(U,X.body.position),X.body.velocity.length()<18&&X.body.velocity.set(X.body.velocity.x+(Math.random()-.5)*60*I,X.body.velocity.y+10*I,X.body.velocity.z+(Math.random()-.5)*60*I),X.body.angularVelocity.length()<3&&X.body.angularVelocity.set((Math.random()-.5)*40*I,(Math.random()-.5)*40*I,(Math.random()-.5)*40*I),Math.random()>.94&&X.body.position.y<4.5&&X.body.applyImpulse(new tt(0,150*I,0),X.body.position)}),g.length>=2&&g[0].body&&g[1].body){const X=g[0].body,H=g[1].body,U=h.size*1.1;if(X.position.distanceTo(H.position)<U){const N=X.position.vsub(H.position);N.normalize();const W=100*I;X.applyImpulse(N.scale(W),X.position),H.applyImpulse(N.scale(-W),H.position)}}},onComplete:()=>{Dy.to(f.position,{x:0,y:-l/2,z:0,duration:.4,ease:"power2.out"}),o.position.set(0,0,0),o.quaternion.setFromEuler(-Math.PI/2,0,0)}}))}function A(){!Y(S)||!T||!e||(T.aspect=Y(S).clientWidth/Y(S).clientHeight,T.updateProjectionMatrix(),e.setSize(Y(S).clientWidth,Y(S).clientHeight))}Rd(()=>{y(),window.addEventListener("resize",A)}),P1(()=>{window.removeEventListener("resize",A),cancelAnimationFrame(u),e&&(e.dispose(),e.forceContextLoss())}),un(()=>(xn(i()),Y(S),Y(s)),()=>{i()&&Y(S)&&!Y(s)&&y()}),Vh();var M={roll:w};vr();var R=rV(),P=ht(R);return lm(P,b=>ut(S,b),()=>Y(S)),Ze("click",P,w),Ze("click",R,$L(()=>x("close"))),_t(d,R),Px(t,"roll",w),$s(M)}var oV=Qt('<span class="text-[10px] bg-emerald-500 text-black px-1.5 py-0.5 rounded-md not-italic font-black">YOU</span>'),lV=Qt('<span class="flex items-center gap-1 text-[9px] font-bold text-emerald-400 uppercase tracking-tighter"><span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span> Online</span>'),hV=Qt('<span class="flex items-center gap-1 text-[9px] font-bold text-zinc-600 uppercase tracking-tighter"><span class="w-1.5 h-1.5 rounded-full bg-zinc-700"></span> Offline</span>'),uV=Qt('<span class="flex items-center gap-1 text-[9px] font-bold text-zinc-500 uppercase tracking-tighter ml-1"><!> Local</span>'),fV=Qt('<tr><td class="px-6 py-4"><div></div></td><td class="px-6 py-4"><div class="flex items-center gap-3"><div><!></div> <div class="flex flex-col"><span class="font-black text-white uppercase tracking-tight italic flex items-center gap-2"> <!></span> <div class="flex items-center gap-2 mt-0.5"><!> <!></div></div></div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-white tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-emerald-400 tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-yellow-400 tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-red-400 tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-zinc-500 tabular-nums"><!> </div></td></tr>'),cV=Qt('<div class="py-20 flex flex-col items-center justify-center text-zinc-500"><!> <p class="font-black uppercase tracking-widest text-sm italic">No ranking players yet</p></div>'),dV=Qt('<div class="fixed inset-0 z-[110] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-300"><div class="w-full max-w-4xl p-8 bg-[#1a4d2e] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8),inset_0_0_30px_rgba(0,0,0,0.4)] relative overflow-hidden group"><div class="flex items-center justify-between mb-8 relative z-10"><div class="flex items-center gap-4"><div class="p-3 rounded-2xl bg-yellow-500/20 border border-yellow-500/30 text-yellow-500 shadow-lg"><!></div> <div><h2 class="text-3xl font-black text-white tracking-tighter uppercase italic leading-none">Global <span class="text-emerald-400">Leaderboard</span></h2> <div class="flex items-center gap-2 mt-1"><span class="flex h-2 w-2 relative"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span></span> <p class="text-zinc-400 text-xs font-medium uppercase tracking-widest"> </p></div></div></div> <div class="flex items-center gap-3"><button class="flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/20 transition-all disabled:opacity-50" title="Refresh Stats"><!> <span class="text-xs font-black uppercase tracking-widest">Refresh</span></button> <button class="p-2 rounded-xl bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-all hover:scale-110"><!></button></div></div> <div class="relative z-10 overflow-hidden rounded-2xl border border-white/5 bg-black/40 shadow-inner max-h-[60vh] overflow-y-auto custom-scrollbar"><table class="w-full text-left border-collapse"><thead><tr class="bg-black/60 border-b border-white/10"><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest">Rank</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest">Player</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Balance</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Highest</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Win</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Loss</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Resets</th></tr></thead><tbody class="divide-y divide-white/5"></tbody></table> <!></div> <div class="absolute -bottom-24 -left-24 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none"></div> <div class="absolute -top-24 -right-24 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none"></div></div></div>');function pV(d,t){ks(t,!1);const i=fe(),n=pl();let x=Fe(t,"users",24,()=>[]),S=Fe(t,"loading",8,!1);function s(R){if(!R)return!1;const P=new Date(R).getTime();return Date.now()-P<6e4}un(()=>xn(x()),()=>{ut(i,[...x()].filter(R=>R.username!=="Guest").sort((R,P)=>{const b=(P.balance||0)-(R.balance||0);if(b!==0)return b;const F=s(R.lastUpdate),I=s(P.lastUpdate);return F&&!I?-1:!F&&I?1:(P.highestBalance||0)-(R.highestBalance||0)}))}),Vh(),vr();var T=dV(),e=ht(T),a=ht(e),g=ht(a),f=ht(g),o=ht(f);Ix(o,{size:32});var u=xt(f,2),r=xt(ht(u),2),h=xt(ht(r),2),c=ht(h),l=xt(g,2),p=ht(l),m=ht(p);{let R=hn(()=>S()?"animate-spin":"");hd(m,{size:18,get class(){return Y(R)}})}var v=xt(p,2),y=ht(v);sg(y,{size:24});var E=xt(a,2),C=ht(E),w=xt(ht(C));Qi(w,5,()=>Y(i),Ji,(R,P,b)=>{var F=fV(),I=ht(F),L=ht(I);$e(L,1,`flex items-center justify-center w-8 h-8 rounded-lg font-black italic 
                  ${b===0?"bg-yellow-500 text-black shadow-[0_0_15px_rgba(234,179,8,0.4)]":b===1?"bg-zinc-300 text-black shadow-[0_0_15px_rgba(212,212,216,0.3)]":b===2?"bg-orange-400 text-black shadow-[0_0_15px_rgba(251,146,60,0.3)]":"bg-white/5 text-zinc-400"}`),L.textContent=b+1;var D=xt(I),O=ht(D),z=ht(O),_=ht(z);eM(_,{size:16});var X=xt(z,2),H=ht(X),U=ht(H),G=xt(U);{var N=zt=>{var Yt=oV();_t(zt,Yt)};Pe(G,zt=>{Y(P),Ht(()=>Y(P).isYou)&&zt(N)})}var W=xt(H,2),V=ht(W);{var $=zt=>{var Yt=lV();_t(zt,Yt)},j=zt=>{var Yt=hV();_t(zt,Yt)};Pe(V,zt=>{Y(P),Ht(()=>s(Y(P).lastUpdate))?zt($):zt(j,!1)})}var k=xt(V,2);{var Q=zt=>{var Yt=uV(),bt=ht(Yt);iF(bt,{size:10}),_t(zt,Yt)};Pe(k,zt=>{Y(P),Ht(()=>Y(P).isLocal)&&zt(Q)})}var et=xt(D),at=ht(et),q=ht(at);bx(q,{size:14,class:"text-emerald-400"});var ft=xt(q),vt=xt(et),Tt=ht(vt),ct=ht(Tt);bx(ct,{size:14});var Ut=xt(ct),yt=xt(vt),it=ht(yt),Z=ht(it);hF(Z,{size:14});var lt=xt(Z),pt=xt(yt),Pt=ht(pt),wt=ht(Pt);lF(wt,{size:14});var jt=xt(wt),Vt=xt(pt),Wt=ht(Vt),ue=ht(Wt);hd(ue,{size:12});var Gt=xt(ue);ai((zt,Yt,bt,Kt)=>{$e(F,1,`hover:bg-white/[0.02] transition-colors ${Y(P),Ht(()=>Y(P).isYou?"bg-emerald-500/10":b===0?"bg-yellow-500/5":"")??""}`),$e(z,1,`p-1.5 rounded-lg ${Y(P),Ht(()=>Y(P).isYou?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-emerald-500/10 border-emerald-500/20 text-emerald-400")??""} border`),be(U,`${Y(P),Ht(()=>Y(P).nickname||Y(P).username)??""} `),be(ft,` ${zt??""}`),be(Ut,` ${Yt??""}`),be(lt,` ${bt??""}`),be(jt,` ${Kt??""}`),be(Gt,` ${Y(P),Ht(()=>Y(P).resetCount||0)??""}`)},[()=>(Y(P),Ht(()=>(Y(P).balance||0).toLocaleString(void 0,{minimumFractionDigits:2}))),()=>(Y(P),Ht(()=>(Y(P).highestBalance||0).toLocaleString(void 0,{minimumFractionDigits:2}))),()=>(Y(P),Ht(()=>(Y(P).largestWin||0).toLocaleString(void 0,{minimumFractionDigits:2}))),()=>(Y(P),Ht(()=>(Y(P).largestLoss||0).toLocaleString(void 0,{minimumFractionDigits:2})))]),_t(R,F)});var A=xt(C,2);{var M=R=>{var P=cV(),b=ht(P);Ix(b,{size:48,class:"opacity-10 mb-4"}),_t(R,P)};Pe(A,R=>{Y(i),Ht(()=>Y(i).length===0)&&R(M)})}ai(()=>{be(c,`Live Updates â¢ Showing ${Y(i),Ht(()=>Y(i).length)??""} Players`),p.disabled=S()}),Ze("click",p,()=>n("refresh")),Ze("click",v,()=>n("close")),_t(d,T),$s()}var vV=Qt('<div class="p-4 rounded-2xl bg-black/40 border border-white/5 shadow-inner"><h4 class="text-xs font-black text-emerald-400 uppercase mb-2 tracking-tight"> </h4> <p class="text-[11px] text-zinc-400 leading-relaxed font-medium uppercase"> </p></div>'),mV=Qt('<tr class="hover:bg-white/[0.02] transition-colors"><td class="px-4 py-3 text-xs font-black text-white uppercase"> </td><td class="px-4 py-3 text-xs font-black text-emerald-400 tabular-nums"> </td><td class="px-4 py-3 text-[10px] font-medium text-zinc-500 uppercase leading-tight"> </td></tr>'),gV=Qt('<div class="fixed inset-0 z-[150] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-300 px-4"><div class="w-full max-w-2xl bg-[#0a2e0a] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] overflow-hidden"><div class="p-6 border-b border-white/10 flex items-center justify-between bg-black/20 shrink-0"><div class="flex items-center gap-3"><div class="p-2 rounded-xl bg-emerald-500/20 text-emerald-400"><!></div> <div><h2 class="text-2xl font-black text-white tracking-tighter uppercase italic leading-none">How to <span class="text-emerald-400">Play</span></h2> <p class="text-[10px] font-medium text-zinc-500 uppercase tracking-widest mt-1">Rules & Payouts Guide</p></div></div> <button class="p-2 rounded-xl bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-all hover:scale-110"><!></button></div> <div class="flex-1 overflow-y-auto p-6 space-y-8 custom-scrollbar svelte-1eyj1wx"><section><div class="flex items-center gap-2 mb-4"><!> <h3 class="text-xs font-black text-zinc-400 uppercase tracking-[0.2em]">Game Rules</h3></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"></div></section> <section><div class="flex items-center gap-2 mb-4"><!> <h3 class="text-xs font-black text-zinc-400 uppercase tracking-[0.2em]">Payout Guide</h3></div> <div class="rounded-2xl border border-white/5 overflow-hidden bg-black/40 shadow-inner"><table class="w-full text-left"><thead><tr class="bg-black/60 border-b border-white/10"><th class="px-4 py-3 text-[10px] font-black text-zinc-500 uppercase">Bet Type</th><th class="px-4 py-3 text-[10px] font-black text-zinc-500 uppercase">Payout</th><th class="px-4 py-3 text-[10px] font-black text-zinc-500 uppercase">Description</th></tr></thead><tbody class="divide-y divide-white/5"></tbody></table></div></section> <section class="p-4 rounded-2xl bg-emerald-500/10 border border-emerald-500/20"><div class="flex items-start gap-3"><div class="p-2 rounded-lg bg-emerald-500/20 text-emerald-400 shrink-0"><!></div> <div><h4 class="text-xs font-black text-emerald-400 uppercase tracking-tight mb-1">Pro Tip</h4> <p class="text-[10px] font-medium text-zinc-400 uppercase leading-relaxed">Use "Odds" bets behind your Pass Line. They pay true mathematical odds with zero house edge, making them the best bets in the casino!</p></div></div></section></div> <div class="p-6 border-t border-white/10 bg-black/20 flex justify-center shrink-0"><button class="px-8 py-3 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-black font-black uppercase tracking-widest text-xs transition-all active:scale-95 shadow-lg shadow-emerald-500/20">Got it!</button></div></div></div>');function xV(d,t){ks(t,!1);const i=pl(),n=[{title:"The Game",content:"Crapless Bubble Craps is a variation where 2, 3, 11, and 12 are point numbers instead of immediate losers (craps) or winners (naturals) on the come-out roll."},{title:"Come Out Roll",content:"The first roll of a round. 7 is an immediate win for the Pass Line. Any other number becomes the 'Point'."},{title:"Point Phase",content:"Once a point is established, you want to roll that number again before rolling a 7. If you roll the point, you win. If you roll a 7, you lose (Seven Out)."}],x=[{bet:"Pass Line",payout:"1 to 1",description:"Win on 7 (come out) or hitting the point."},{bet:"Place Bets (6, 8)",payout:"7 to 6",description:"Bet on specific numbers to roll before a 7."},{bet:"Place Bets (5, 9)",payout:"7 to 5",description:"Bet on specific numbers to roll before a 7."},{bet:"Place Bets (4, 10)",payout:"9 to 5",description:"Bet on specific numbers to roll before a 7."},{bet:"Place Bets (2, 3, 11, 12)",payout:"11 to 2 / 3 to 1",description:"Extreme outside numbers in Crapless Craps."},{bet:"Hardways",payout:"7 to 1 / 9 to 1",description:"Rolling a number as a pair (e.g., 2-2 for Hard 4)."},{bet:"Any 7",payout:"4 to 1",description:"The next roll will be a 7."}];vr();var S=gV(),s=ht(S),T=ht(s),e=ht(T),a=ht(e),g=ht(a);tM(g,{size:24});var f=xt(e,2),o=ht(f);sg(o,{size:20});var u=xt(T,2),r=ht(u),h=ht(r),c=ht(h);nF(c,{size:16,class:"text-emerald-400"});var l=xt(h,2);Qi(l,5,()=>n,Ji,(F,I)=>{var L=vV(),D=ht(L),O=ht(D),z=xt(D,2),_=ht(z);ai(()=>{be(O,Y(I).title),be(_,Y(I).content)}),_t(F,L)});var p=xt(r,2),m=ht(p),v=ht(m);bx(v,{size:16,class:"text-emerald-400"});var y=xt(m,2),E=ht(y),C=xt(ht(E));Qi(C,5,()=>x,Ji,(F,I)=>{var L=mV(),D=ht(L),O=ht(D),z=xt(D),_=ht(z),X=xt(z),H=ht(X);ai(()=>{be(O,Y(I).bet),be(_,Y(I).payout),be(H,Y(I).description)}),_t(F,L)});var w=xt(p,2),A=ht(w),M=ht(A),R=ht(M);dF(R,{size:16});var P=xt(u,2),b=ht(P);Ze("click",f,()=>i("close")),Ze("click",b,()=>i("close")),_t(d,S),$s()}const yV=()=>{};var k2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=function(d){const t=[];let i=0;for(let n=0;n<d.length;n++){let x=d.charCodeAt(n);x<128?t[i++]=x:x<2048?(t[i++]=x>>6|192,t[i++]=x&63|128):(x&64512)===55296&&n+1<d.length&&(d.charCodeAt(n+1)&64512)===56320?(x=65536+((x&1023)<<10)+(d.charCodeAt(++n)&1023),t[i++]=x>>18|240,t[i++]=x>>12&63|128,t[i++]=x>>6&63|128,t[i++]=x&63|128):(t[i++]=x>>12|224,t[i++]=x>>6&63|128,t[i++]=x&63|128)}return t},TV=function(d){const t=[];let i=0,n=0;for(;i<d.length;){const x=d[i++];if(x<128)t[n++]=String.fromCharCode(x);else if(x>191&&x<224){const S=d[i++];t[n++]=String.fromCharCode((x&31)<<6|S&63)}else if(x>239&&x<365){const S=d[i++],s=d[i++],T=d[i++],e=((x&7)<<18|(S&63)<<12|(s&63)<<6|T&63)-65536;t[n++]=String.fromCharCode(55296+(e>>10)),t[n++]=String.fromCharCode(56320+(e&1023))}else{const S=d[i++],s=d[i++];t[n++]=String.fromCharCode((x&15)<<12|(S&63)<<6|s&63)}}return t.join("")},HR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(d,t){if(!Array.isArray(d))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let x=0;x<d.length;x+=3){const S=d[x],s=x+1<d.length,T=s?d[x+1]:0,e=x+2<d.length,a=e?d[x+2]:0,g=S>>2,f=(S&3)<<4|T>>4;let o=(T&15)<<2|a>>6,u=a&63;e||(u=64,s||(o=64)),n.push(i[g],i[f],i[o],i[u])}return n.join("")},encodeString(d,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(d):this.encodeByteArray(WR(d),t)},decodeString(d,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(d):TV(this.decodeStringToByteArray(d,t))},decodeStringToByteArray(d,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let x=0;x<d.length;){const S=i[d.charAt(x++)],T=x<d.length?i[d.charAt(x)]:0;++x;const a=x<d.length?i[d.charAt(x)]:64;++x;const f=x<d.length?i[d.charAt(x)]:64;if(++x,S==null||T==null||a==null||f==null)throw new EV;const o=S<<2|T>>4;if(n.push(o),a!==64){const u=T<<4&240|a>>2;if(n.push(u),f!==64){const r=a<<6&192|f;n.push(r)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let d=0;d<this.ENCODED_VALS.length;d++)this.byteToCharMap_[d]=this.ENCODED_VALS.charAt(d),this.charToByteMap_[this.byteToCharMap_[d]]=d,this.byteToCharMapWebSafe_[d]=this.ENCODED_VALS_WEBSAFE.charAt(d),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[d]]=d,d>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(d)]=d,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(d)]=d)}}};class EV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SV=function(d){const t=WR(d);return HR.encodeByteArray(t,!0)},XR=function(d){return SV(d).replace(/\./g,"")},YR=function(d){try{return HR.decodeString(d,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=()=>kR().__FIREBASE_DEFAULTS__,AV=()=>{if(typeof process>"u"||typeof k2>"u")return;const d=k2.__FIREBASE_DEFAULTS__;if(d)return JSON.parse(d)},wV=()=>{if(typeof document>"u")return;let d;try{d=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=d&&YR(d[1]);return t&&JSON.parse(t)},cg=()=>{try{return yV()||CV()||AV()||wV()}catch(d){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${d}`);return}},MV=d=>{var t,i;return(i=(t=cg())==null?void 0:t.emulatorHosts)==null?void 0:i[d]},$R=()=>{var d;return(d=cg())==null?void 0:d.config},KR=d=>{var t;return(t=cg())==null?void 0:t[`_${d}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,n)=>{i?this.reject(i):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(d){try{return(d.startsWith("http://")||d.startsWith("https://")?new URL(d).hostname:d).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jR(d){return(await fetch(d,{credentials:"include"})).ok}const pd={};function PV(){const d={prod:[],emulator:[]};for(const t of Object.keys(pd))pd[t]?d.emulator.push(t):d.prod.push(t);return d}function bV(d){let t=document.getElementById(d),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",d),i=!0),{created:i,element:t}}let $2=!1;function IV(d,t){if(typeof window>"u"||typeof document>"u"||!Qf(window.location.host)||pd[d]===t||pd[d]||$2)return;pd[d]=t;function i(o){return`__firebase__banner__${o}`}const n="__firebase__banner",S=PV().prod.length>0;function s(){const o=document.getElementById(n);o&&o.remove()}function T(o){o.style.display="flex",o.style.background="#7faaf0",o.style.position="fixed",o.style.bottom="5px",o.style.left="5px",o.style.padding=".5em",o.style.borderRadius="5px",o.style.alignItems="center"}function e(o,u){o.setAttribute("width","24"),o.setAttribute("id",u),o.setAttribute("height","24"),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("fill","none"),o.style.marginLeft="-6px"}function a(){const o=document.createElement("span");return o.style.cursor="pointer",o.style.marginLeft="16px",o.style.fontSize="24px",o.innerHTML=" &times;",o.onclick=()=>{$2=!0,s()},o}function g(o,u){o.setAttribute("id",u),o.innerText="Learn more",o.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",o.setAttribute("target","__blank"),o.style.paddingLeft="5px",o.style.textDecoration="underline"}function f(){const o=bV(n),u=i("text"),r=document.getElementById(u)||document.createElement("span"),h=i("learnmore"),c=document.getElementById(h)||document.createElement("a"),l=i("preprendIcon"),p=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(o.created){const m=o.element;T(m),g(c,h);const v=a();e(p,l),m.append(p,r,c,v),document.body.appendChild(m)}S?(r.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,r.innerText="Preview backend running in this workspace."),r.setAttribute("id",u)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function ZR(){var t;const d=(t=cg())==null?void 0:t.forceEnvironment;if(d==="node")return!0;if(d==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JR(){const d=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof d=="object"&&d.id!==void 0}function DV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OV(){const d=Sn();return d.indexOf("MSIE ")>=0||d.indexOf("Trident/")>=0}function QR(){return!ZR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qR(){return!ZR()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function oT(){try{return typeof indexedDB=="object"}catch{return!1}}function tP(){return new Promise((d,t)=>{try{let i=!0;const n="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(n);x.onsuccess=()=>{x.result.close(),i||self.indexedDB.deleteDatabase(n),d(!0)},x.onupgradeneeded=()=>{i=!1},x.onerror=()=>{var S;t(((S=x.error)==null?void 0:S.message)||"")}}catch(i){t(i)}})}function NV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="FirebaseError";class zr extends Error{constructor(t,i,n){super(i),this.code=t,this.customData=n,this.name=BV,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gh.prototype.create)}}class Gh{constructor(t,i,n){this.service=t,this.serviceName=i,this.errors=n}create(t,...i){const n=i[0]||{},x=`${this.service}/${t}`,S=this.errors[t],s=S?UV(S,n):"Error",T=`${this.serviceName}: ${s} (${x}).`;return new zr(x,T,n)}}function UV(d,t){return d.replace(VV,(i,n)=>{const x=t[n];return x!=null?String(x):`<${n}?>`})}const VV=/\{\$([^}]+)}/g;function zV(d){for(const t in d)if(Object.prototype.hasOwnProperty.call(d,t))return!1;return!0}function ll(d,t){if(d===t)return!0;const i=Object.keys(d),n=Object.keys(t);for(const x of i){if(!n.includes(x))return!1;const S=d[x],s=t[x];if(K2(S)&&K2(s)){if(!ll(S,s))return!1}else if(S!==s)return!1}for(const x of n)if(!i.includes(x))return!1;return!0}function K2(d){return d!==null&&typeof d=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(d){const t=[];for(const[i,n]of Object.entries(d))Array.isArray(n)?n.forEach(x=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(x))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function ed(d){const t={};return d.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[x,S]=n.split("=");t[decodeURIComponent(x)]=decodeURIComponent(S)}}),t}function id(d){const t=d.indexOf("?");if(!t)return"";const i=d.indexOf("#",t);return d.substring(t,i>0?i:void 0)}function GV(d,t){const i=new _V(d,t);return i.subscribe.bind(i)}class _V{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,n){let x;if(t===void 0&&i===void 0&&n===void 0)throw new Error("Missing Observer.");WV(t,["next","error","complete"])?x=t:x={next:t,error:i,complete:n},x.next===void 0&&(x.next=X0),x.error===void 0&&(x.error=X0),x.complete===void 0&&(x.complete=X0);const S=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),S}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WV(d,t){if(typeof d!="object"||d===null)return!1;for(const i of t)if(i in d&&typeof d[i]=="function")return!0;return!1}function X0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=1e3,XV=2,YV=14400*1e3,kV=.5;function j2(d,t=HV,i=XV){const n=t*Math.pow(i,d),x=Math.round(kV*n*(Math.random()-.5)*2);return Math.min(YV,n+x)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(d){return d&&d._delegate?d._delegate:d}class Nr{constructor(t,i,n){this.name=t,this.instanceFactory=i,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const n=new RV;if(this.instancesDeferred.set(i,n),this.isInitialized(i)||this.shouldAutoInitialize())try{const x=this.getOrInitializeService({instanceIdentifier:i});x&&n.resolve(x)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(x){if(n)return null;throw x}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jV(t))try{this.getOrInitializeService({instanceIdentifier:Gl})}catch{}for(const[i,n]of this.instancesDeferred.entries()){const x=this.normalizeInstanceIdentifier(i);try{const S=this.getOrInitializeService({instanceIdentifier:x});n.resolve(S)}catch{}}}}clearInstance(t=Gl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Gl){return this.instances.has(t)}getOptions(t=Gl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const x=this.getOrInitializeService({instanceIdentifier:n,options:i});for(const[S,s]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(S);n===T&&s.resolve(x)}return x}onInit(t,i){const n=this.normalizeInstanceIdentifier(i),x=this.onInitCallbacks.get(n)??new Set;x.add(t),this.onInitCallbacks.set(n,x);const S=this.instances.get(n);return S&&t(S,n),()=>{x.delete(t)}}invokeOnInitCallbacks(t,i){const n=this.onInitCallbacks.get(i);if(n)for(const x of n)try{x(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:KV(t),options:i}),this.instances.set(t,n),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Gl){return this.component?this.component.multipleInstances?t:Gl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KV(d){return d===Gl?void 0:d}function jV(d){return d.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new $V(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(d){d[d.DEBUG=0]="DEBUG",d[d.VERBOSE=1]="VERBOSE",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.SILENT=5]="SILENT"})(Qe||(Qe={}));const JV={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},QV=Qe.INFO,qV={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},tz=(d,t,...i)=>{if(t<d.logLevel)return;const n=new Date().toISOString(),x=qV[t];if(x)console[x](`[${n}]  ${d.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dg{constructor(t){this.name=t,this._logLevel=QV,this._logHandler=tz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Qe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?JV[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...t),this._logHandler(this,Qe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...t),this._logHandler(this,Qe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...t),this._logHandler(this,Qe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...t),this._logHandler(this,Qe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...t),this._logHandler(this,Qe.ERROR,...t)}}const ez=(d,t)=>t.some(i=>d instanceof i);let Z2,J2;function iz(){return Z2||(Z2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nz(){return J2||(J2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eP=new WeakMap,Oy=new WeakMap,iP=new WeakMap,Y0=new WeakMap,lT=new WeakMap;function sz(d){const t=new Promise((i,n)=>{const x=()=>{d.removeEventListener("success",S),d.removeEventListener("error",s)},S=()=>{i(Zo(d.result)),x()},s=()=>{n(d.error),x()};d.addEventListener("success",S),d.addEventListener("error",s)});return t.then(i=>{i instanceof IDBCursor&&eP.set(i,d)}).catch(()=>{}),lT.set(t,d),t}function rz(d){if(Oy.has(d))return;const t=new Promise((i,n)=>{const x=()=>{d.removeEventListener("complete",S),d.removeEventListener("error",s),d.removeEventListener("abort",s)},S=()=>{i(),x()},s=()=>{n(d.error||new DOMException("AbortError","AbortError")),x()};d.addEventListener("complete",S),d.addEventListener("error",s),d.addEventListener("abort",s)});Oy.set(d,t)}let Ny={get(d,t,i){if(d instanceof IDBTransaction){if(t==="done")return Oy.get(d);if(t==="objectStoreNames")return d.objectStoreNames||iP.get(d);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Zo(d[t])},set(d,t,i){return d[t]=i,!0},has(d,t){return d instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in d}};function az(d){Ny=d(Ny)}function oz(d){return d===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const n=d.call(k0(this),t,...i);return iP.set(n,t.sort?t.sort():[t]),Zo(n)}:nz().includes(d)?function(...t){return d.apply(k0(this),t),Zo(eP.get(this))}:function(...t){return Zo(d.apply(k0(this),t))}}function lz(d){return typeof d=="function"?oz(d):(d instanceof IDBTransaction&&rz(d),ez(d,iz())?new Proxy(d,Ny):d)}function Zo(d){if(d instanceof IDBRequest)return sz(d);if(Y0.has(d))return Y0.get(d);const t=lz(d);return t!==d&&(Y0.set(d,t),lT.set(t,d)),t}const k0=d=>lT.get(d);function nP(d,t,{blocked:i,upgrade:n,blocking:x,terminated:S}={}){const s=indexedDB.open(d,t),T=Zo(s);return n&&s.addEventListener("upgradeneeded",e=>{n(Zo(s.result),e.oldVersion,e.newVersion,Zo(s.transaction),e)}),i&&s.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),T.then(e=>{S&&e.addEventListener("close",()=>S()),x&&e.addEventListener("versionchange",a=>x(a.oldVersion,a.newVersion,a))}).catch(()=>{}),T}const hz=["get","getKey","getAll","getAllKeys","count"],uz=["put","add","delete","clear"],$0=new Map;function Q2(d,t){if(!(d instanceof IDBDatabase&&!(t in d)&&typeof t=="string"))return;if($0.get(t))return $0.get(t);const i=t.replace(/FromIndex$/,""),n=t!==i,x=uz.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!(x||hz.includes(i)))return;const S=async function(s,...T){const e=this.transaction(s,x?"readwrite":"readonly");let a=e.store;return n&&(a=a.index(T.shift())),(await Promise.all([a[i](...T),x&&e.done]))[0]};return $0.set(t,S),S}az(d=>({...d,get:(t,i,n)=>Q2(t,i)||d.get(t,i,n),has:(t,i)=>!!Q2(t,i)||d.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(cz(i)){const n=i.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(i=>i).join(" ")}}function cz(d){const t=d.getComponent();return(t==null?void 0:t.type)==="VERSION"}const By="@firebase/app",q2="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new dg("@firebase/app"),dz="@firebase/app-compat",pz="@firebase/analytics-compat",vz="@firebase/analytics",mz="@firebase/app-check-compat",gz="@firebase/app-check",xz="@firebase/auth",yz="@firebase/auth-compat",Tz="@firebase/database",Ez="@firebase/data-connect",Sz="@firebase/database-compat",Cz="@firebase/functions",Az="@firebase/functions-compat",wz="@firebase/installations",Mz="@firebase/installations-compat",Rz="@firebase/messaging",Pz="@firebase/messaging-compat",bz="@firebase/performance",Iz="@firebase/performance-compat",Lz="@firebase/remote-config",Fz="@firebase/remote-config-compat",Dz="@firebase/storage",Oz="@firebase/storage-compat",Nz="@firebase/firestore",Bz="@firebase/ai",Uz="@firebase/firestore-compat",Vz="firebase",zz="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="[DEFAULT]",Gz={[By]:"fire-core",[dz]:"fire-core-compat",[vz]:"fire-analytics",[pz]:"fire-analytics-compat",[gz]:"fire-app-check",[mz]:"fire-app-check-compat",[xz]:"fire-auth",[yz]:"fire-auth-compat",[Tz]:"fire-rtdb",[Ez]:"fire-data-connect",[Sz]:"fire-rtdb-compat",[Cz]:"fire-fn",[Az]:"fire-fn-compat",[wz]:"fire-iid",[Mz]:"fire-iid-compat",[Rz]:"fire-fcm",[Pz]:"fire-fcm-compat",[bz]:"fire-perf",[Iz]:"fire-perf-compat",[Lz]:"fire-rc",[Fz]:"fire-rc-compat",[Dz]:"fire-gcs",[Oz]:"fire-gcs-compat",[Nz]:"fire-fst",[Uz]:"fire-fst-compat",[Bz]:"fire-vertex","fire-js":"fire-js",[Vz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=new Map,_z=new Map,Vy=new Map;function tC(d,t){try{d.container.addComponent(t)}catch(i){no.debug(`Component ${t.name} failed to register with FirebaseApp ${d.name}`,i)}}function va(d){const t=d.name;if(Vy.has(t))return no.debug(`There were multiple attempts to register component ${t}.`),!1;Vy.set(t,d);for(const i of Sm.values())tC(i,d);for(const i of _z.values())tC(i,d);return!0}function _h(d,t){const i=d.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),d.container.getProvider(t)}function sr(d){return d==null?!1:d.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jo=new Gh("app","Firebase",Wz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(t,i,n){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Jo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=zz;function sP(d,t={}){let i=d;typeof t!="object"&&(t={name:t});const n={name:Uy,automaticDataCollectionEnabled:!0,...t},x=n.name;if(typeof x!="string"||!x)throw Jo.create("bad-app-name",{appName:String(x)});if(i||(i=$R()),!i)throw Jo.create("no-options");const S=Sm.get(x);if(S){if(ll(i,S.options)&&ll(n,S.config))return S;throw Jo.create("duplicate-app",{appName:x})}const s=new ZV(x);for(const e of Vy.values())s.addComponent(e);const T=new Hz(i,n,s);return Sm.set(x,T),T}function rP(d=Uy){const t=Sm.get(d);if(!t&&d===Uy&&$R())return sP();if(!t)throw Jo.create("no-app",{appName:d});return t}function fr(d,t,i){let n=Gz[d]??d;i&&(n+=`-${i}`);const x=n.match(/\s|\//),S=t.match(/\s|\//);if(x||S){const s=[`Unable to register library "${n}" with version "${t}":`];x&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),x&&S&&s.push("and"),S&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),no.warn(s.join(" "));return}va(new Nr(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz="firebase-heartbeat-database",Yz=1,Bd="firebase-heartbeat-store";let K0=null;function aP(){return K0||(K0=nP(Xz,Yz,{upgrade:(d,t)=>{switch(t){case 0:try{d.createObjectStore(Bd)}catch(i){console.warn(i)}}}}).catch(d=>{throw Jo.create("idb-open",{originalErrorMessage:d.message})})),K0}async function kz(d){try{const i=(await aP()).transaction(Bd),n=await i.objectStore(Bd).get(oP(d));return await i.done,n}catch(t){if(t instanceof zr)no.warn(t.message);else{const i=Jo.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});no.warn(i.message)}}}async function eC(d,t){try{const n=(await aP()).transaction(Bd,"readwrite");await n.objectStore(Bd).put(t,oP(d)),await n.done}catch(i){if(i instanceof zr)no.warn(i.message);else{const n=Jo.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});no.warn(n.message)}}}function oP(d){return`${d.name}!${d.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=1024,Kz=30;class jz{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Jz(i),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,i;try{const x=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),S=iC();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===S||this._heartbeatsCache.heartbeats.some(s=>s.date===S))return;if(this._heartbeatsCache.heartbeats.push({date:S,agent:x}),this._heartbeatsCache.heartbeats.length>Kz){const s=Qz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){no.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=iC(),{heartbeatsToSend:n,unsentEntries:x}=Zz(this._heartbeatsCache.heartbeats),S=XR(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=i,x.length>0?(this._heartbeatsCache.heartbeats=x,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),S}catch(i){return no.warn(i),""}}}function iC(){return new Date().toISOString().substring(0,10)}function Zz(d,t=$z){const i=[];let n=d.slice();for(const x of d){const S=i.find(s=>s.agent===x.agent);if(S){if(S.dates.push(x.date),nC(i)>t){S.dates.pop();break}}else if(i.push({agent:x.agent,dates:[x.date]}),nC(i)>t){i.pop();break}n=n.slice(1)}return{heartbeatsToSend:i,unsentEntries:n}}class Jz{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oT()?tP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await kz(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return eC(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return eC(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function nC(d){return XR(JSON.stringify({version:2,heartbeats:d})).length}function Qz(d){if(d.length===0)return-1;let t=0,i=d[0].date;for(let n=1;n<d.length;n++)d[n].date<i&&(i=d[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(d){va(new Nr("platform-logger",t=>new fz(t),"PRIVATE")),va(new Nr("heartbeat",t=>new jz(t),"PRIVATE")),fr(By,q2,d),fr(By,q2,"esm2020"),fr("fire-js","")}qz("");var tG="firebase",eG="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(tG,eG,"app");var sC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qo,lP;(function(){var d;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,w){function A(){}A.prototype=w.prototype,C.F=w.prototype,C.prototype=new A,C.prototype.constructor=C,C.D=function(M,R,P){for(var b=Array(arguments.length-2),F=2;F<arguments.length;F++)b[F-2]=arguments[F];return w.prototype[R].apply(M,b)}}function i(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,i),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function x(C,w,A){A||(A=0);const M=Array(16);if(typeof w=="string")for(var R=0;R<16;++R)M[R]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(R=0;R<16;++R)M[R]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=C.g[0],A=C.g[1],R=C.g[2];let P=C.g[3],b;b=w+(P^A&(R^P))+M[0]+3614090360&4294967295,w=A+(b<<7&4294967295|b>>>25),b=P+(R^w&(A^R))+M[1]+3905402710&4294967295,P=w+(b<<12&4294967295|b>>>20),b=R+(A^P&(w^A))+M[2]+606105819&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(w^R&(P^w))+M[3]+3250441966&4294967295,A=R+(b<<22&4294967295|b>>>10),b=w+(P^A&(R^P))+M[4]+4118548399&4294967295,w=A+(b<<7&4294967295|b>>>25),b=P+(R^w&(A^R))+M[5]+1200080426&4294967295,P=w+(b<<12&4294967295|b>>>20),b=R+(A^P&(w^A))+M[6]+2821735955&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(w^R&(P^w))+M[7]+4249261313&4294967295,A=R+(b<<22&4294967295|b>>>10),b=w+(P^A&(R^P))+M[8]+1770035416&4294967295,w=A+(b<<7&4294967295|b>>>25),b=P+(R^w&(A^R))+M[9]+2336552879&4294967295,P=w+(b<<12&4294967295|b>>>20),b=R+(A^P&(w^A))+M[10]+4294925233&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(w^R&(P^w))+M[11]+2304563134&4294967295,A=R+(b<<22&4294967295|b>>>10),b=w+(P^A&(R^P))+M[12]+1804603682&4294967295,w=A+(b<<7&4294967295|b>>>25),b=P+(R^w&(A^R))+M[13]+4254626195&4294967295,P=w+(b<<12&4294967295|b>>>20),b=R+(A^P&(w^A))+M[14]+2792965006&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(w^R&(P^w))+M[15]+1236535329&4294967295,A=R+(b<<22&4294967295|b>>>10),b=w+(R^P&(A^R))+M[1]+4129170786&4294967295,w=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(w^A))+M[6]+3225465664&4294967295,P=w+(b<<9&4294967295|b>>>23),b=R+(w^A&(P^w))+M[11]+643717713&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^w&(R^P))+M[0]+3921069994&4294967295,A=R+(b<<20&4294967295|b>>>12),b=w+(R^P&(A^R))+M[5]+3593408605&4294967295,w=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(w^A))+M[10]+38016083&4294967295,P=w+(b<<9&4294967295|b>>>23),b=R+(w^A&(P^w))+M[15]+3634488961&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^w&(R^P))+M[4]+3889429448&4294967295,A=R+(b<<20&4294967295|b>>>12),b=w+(R^P&(A^R))+M[9]+568446438&4294967295,w=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(w^A))+M[14]+3275163606&4294967295,P=w+(b<<9&4294967295|b>>>23),b=R+(w^A&(P^w))+M[3]+4107603335&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^w&(R^P))+M[8]+1163531501&4294967295,A=R+(b<<20&4294967295|b>>>12),b=w+(R^P&(A^R))+M[13]+2850285829&4294967295,w=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(w^A))+M[2]+4243563512&4294967295,P=w+(b<<9&4294967295|b>>>23),b=R+(w^A&(P^w))+M[7]+1735328473&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^w&(R^P))+M[12]+2368359562&4294967295,A=R+(b<<20&4294967295|b>>>12),b=w+(A^R^P)+M[5]+4294588738&4294967295,w=A+(b<<4&4294967295|b>>>28),b=P+(w^A^R)+M[8]+2272392833&4294967295,P=w+(b<<11&4294967295|b>>>21),b=R+(P^w^A)+M[11]+1839030562&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^w)+M[14]+4259657740&4294967295,A=R+(b<<23&4294967295|b>>>9),b=w+(A^R^P)+M[1]+2763975236&4294967295,w=A+(b<<4&4294967295|b>>>28),b=P+(w^A^R)+M[4]+1272893353&4294967295,P=w+(b<<11&4294967295|b>>>21),b=R+(P^w^A)+M[7]+4139469664&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^w)+M[10]+3200236656&4294967295,A=R+(b<<23&4294967295|b>>>9),b=w+(A^R^P)+M[13]+681279174&4294967295,w=A+(b<<4&4294967295|b>>>28),b=P+(w^A^R)+M[0]+3936430074&4294967295,P=w+(b<<11&4294967295|b>>>21),b=R+(P^w^A)+M[3]+3572445317&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^w)+M[6]+76029189&4294967295,A=R+(b<<23&4294967295|b>>>9),b=w+(A^R^P)+M[9]+3654602809&4294967295,w=A+(b<<4&4294967295|b>>>28),b=P+(w^A^R)+M[12]+3873151461&4294967295,P=w+(b<<11&4294967295|b>>>21),b=R+(P^w^A)+M[15]+530742520&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^w)+M[2]+3299628645&4294967295,A=R+(b<<23&4294967295|b>>>9),b=w+(R^(A|~P))+M[0]+4096336452&4294967295,w=A+(b<<6&4294967295|b>>>26),b=P+(A^(w|~R))+M[7]+1126891415&4294967295,P=w+(b<<10&4294967295|b>>>22),b=R+(w^(P|~A))+M[14]+2878612391&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~w))+M[5]+4237533241&4294967295,A=R+(b<<21&4294967295|b>>>11),b=w+(R^(A|~P))+M[12]+1700485571&4294967295,w=A+(b<<6&4294967295|b>>>26),b=P+(A^(w|~R))+M[3]+2399980690&4294967295,P=w+(b<<10&4294967295|b>>>22),b=R+(w^(P|~A))+M[10]+4293915773&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~w))+M[1]+2240044497&4294967295,A=R+(b<<21&4294967295|b>>>11),b=w+(R^(A|~P))+M[8]+1873313359&4294967295,w=A+(b<<6&4294967295|b>>>26),b=P+(A^(w|~R))+M[15]+4264355552&4294967295,P=w+(b<<10&4294967295|b>>>22),b=R+(w^(P|~A))+M[6]+2734768916&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~w))+M[13]+1309151649&4294967295,A=R+(b<<21&4294967295|b>>>11),b=w+(R^(A|~P))+M[4]+4149444226&4294967295,w=A+(b<<6&4294967295|b>>>26),b=P+(A^(w|~R))+M[11]+3174756917&4294967295,P=w+(b<<10&4294967295|b>>>22),b=R+(w^(P|~A))+M[2]+718787259&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~w))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+P&4294967295}n.prototype.v=function(C,w){w===void 0&&(w=C.length);const A=w-this.blockSize,M=this.C;let R=this.h,P=0;for(;P<w;){if(R==0)for(;P<=A;)x(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<w;)if(M[R++]=C.charCodeAt(P++),R==this.blockSize){x(this,M),R=0;break}}else for(;P<w;)if(M[R++]=C[P++],R==this.blockSize){x(this,M),R=0;break}}this.h=R,this.o+=w},n.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;w=this.o*8;for(var A=C.length-8;A<C.length;++A)C[A]=w&255,w/=256;for(this.v(C),C=Array(16),w=0,A=0;A<4;++A)for(let M=0;M<32;M+=8)C[w++]=this.g[A]>>>M&255;return C};function S(C,w){var A=T;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=w(C)}function s(C,w){this.h=w;const A=[];let M=!0;for(let R=C.length-1;R>=0;R--){const P=C[R]|0;M&&P==w||(A[R]=P,M=!1)}this.g=A}var T={};function e(C){return-128<=C&&C<128?S(C,function(w){return new s([w|0],w<0?-1:0)}):new s([C|0],C<0?-1:0)}function a(C){if(isNaN(C)||!isFinite(C))return f;if(C<0)return c(a(-C));const w=[];let A=1;for(let M=0;C>=A;M++)w[M]=C/A|0,A*=4294967296;return new s(w,0)}function g(C,w){if(C.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(C.charAt(0)=="-")return c(g(C.substring(1),w));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=a(Math.pow(w,8));let M=f;for(let P=0;P<C.length;P+=8){var R=Math.min(8,C.length-P);const b=parseInt(C.substring(P,P+R),w);R<8?(R=a(Math.pow(w,R)),M=M.j(R).add(a(b))):(M=M.j(A),M=M.add(a(b)))}return M}var f=e(0),o=e(1),u=e(16777216);d=s.prototype,d.m=function(){if(h(this))return-c(this).m();let C=0,w=1;for(let A=0;A<this.g.length;A++){const M=this.i(A);C+=(M>=0?M:4294967296+M)*w,w*=4294967296}return C},d.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(r(this))return"0";if(h(this))return"-"+c(this).toString(C);const w=a(Math.pow(C,6));var A=this;let M="";for(;;){const R=v(A,w).g;A=l(A,R.j(w));let P=((A.g.length>0?A.g[0]:A.h)>>>0).toString(C);if(A=R,r(A))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},d.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function r(C){if(C.h!=0)return!1;for(let w=0;w<C.g.length;w++)if(C.g[w]!=0)return!1;return!0}function h(C){return C.h==-1}d.l=function(C){return C=l(this,C),h(C)?-1:r(C)?0:1};function c(C){const w=C.g.length,A=[];for(let M=0;M<w;M++)A[M]=~C.g[M];return new s(A,~C.h).add(o)}d.abs=function(){return h(this)?c(this):this},d.add=function(C){const w=Math.max(this.g.length,C.g.length),A=[];let M=0;for(let R=0;R<=w;R++){let P=M+(this.i(R)&65535)+(C.i(R)&65535),b=(P>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);M=b>>>16,P&=65535,b&=65535,A[R]=b<<16|P}return new s(A,A[A.length-1]&-2147483648?-1:0)};function l(C,w){return C.add(c(w))}d.j=function(C){if(r(this)||r(C))return f;if(h(this))return h(C)?c(this).j(c(C)):c(c(this).j(C));if(h(C))return c(this.j(c(C)));if(this.l(u)<0&&C.l(u)<0)return a(this.m()*C.m());const w=this.g.length+C.g.length,A=[];for(var M=0;M<2*w;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(let R=0;R<C.g.length;R++){const P=this.i(M)>>>16,b=this.i(M)&65535,F=C.i(R)>>>16,I=C.i(R)&65535;A[2*M+2*R]+=b*I,p(A,2*M+2*R),A[2*M+2*R+1]+=P*I,p(A,2*M+2*R+1),A[2*M+2*R+1]+=b*F,p(A,2*M+2*R+1),A[2*M+2*R+2]+=P*F,p(A,2*M+2*R+2)}for(C=0;C<w;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=w;C<2*w;C++)A[C]=0;return new s(A,0)};function p(C,w){for(;(C[w]&65535)!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function m(C,w){this.g=C,this.h=w}function v(C,w){if(r(w))throw Error("division by zero");if(r(C))return new m(f,f);if(h(C))return w=v(c(C),w),new m(c(w.g),c(w.h));if(h(w))return w=v(C,c(w)),new m(c(w.g),w.h);if(C.g.length>30){if(h(C)||h(w))throw Error("slowDivide_ only works with positive integers.");for(var A=o,M=w;M.l(C)<=0;)A=y(A),M=y(M);var R=E(A,1),P=E(M,1);for(M=E(M,2),A=E(A,2);!r(M);){var b=P.add(M);b.l(C)<=0&&(R=R.add(A),P=b),M=E(M,1),A=E(A,1)}return w=l(C,R.j(w)),new m(R,w)}for(R=f;C.l(w)>=0;){for(A=Math.max(1,Math.floor(C.m()/w.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=a(A),b=P.j(w);h(b)||b.l(C)>0;)A-=M,P=a(A),b=P.j(w);r(P)&&(P=o),R=R.add(P),C=l(C,b)}return new m(R,C)}d.B=function(C){return v(this,C).h},d.and=function(C){const w=Math.max(this.g.length,C.g.length),A=[];for(let M=0;M<w;M++)A[M]=this.i(M)&C.i(M);return new s(A,this.h&C.h)},d.or=function(C){const w=Math.max(this.g.length,C.g.length),A=[];for(let M=0;M<w;M++)A[M]=this.i(M)|C.i(M);return new s(A,this.h|C.h)},d.xor=function(C){const w=Math.max(this.g.length,C.g.length),A=[];for(let M=0;M<w;M++)A[M]=this.i(M)^C.i(M);return new s(A,this.h^C.h)};function y(C){const w=C.g.length+1,A=[];for(let M=0;M<w;M++)A[M]=C.i(M)<<1|C.i(M-1)>>>31;return new s(A,C.h)}function E(C,w){const A=w>>5;w%=32;const M=C.g.length-A,R=[];for(let P=0;P<M;P++)R[P]=w>0?C.i(P+A)>>>w|C.i(P+A+1)<<32-w:C.i(P+A);return new s(R,C.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,lP=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=a,s.fromString=g,Qo=s}).apply(typeof sC<"u"?sC:typeof self<"u"?self:typeof window<"u"?window:{});var Sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hP,nd,uP,Hv,zy,fP,cP,dP;(function(){var d,t=Object.defineProperty;function i(B){B=[typeof globalThis=="object"&&globalThis,B,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sv=="object"&&Sv];for(var K=0;K<B.length;++K){var J=B[K];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var n=i(this);function x(B,K){if(K)t:{var J=n;B=B.split(".");for(var st=0;st<B.length-1;st++){var At=B[st];if(!(At in J))break t;J=J[At]}B=B[B.length-1],st=J[B],K=K(st),K!=st&&K!=null&&t(J,B,{configurable:!0,writable:!0,value:K})}}x("Symbol.dispose",function(B){return B||Symbol("Symbol.dispose")}),x("Array.prototype.values",function(B){return B||function(){return this[Symbol.iterator]()}}),x("Object.entries",function(B){return B||function(K){var J=[],st;for(st in K)Object.prototype.hasOwnProperty.call(K,st)&&J.push([st,K[st]]);return J}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var S=S||{},s=this||self;function T(B){var K=typeof B;return K=="object"&&B!=null||K=="function"}function e(B,K,J){return B.call.apply(B.bind,arguments)}function a(B,K,J){return a=e,a.apply(null,arguments)}function g(B,K){var J=Array.prototype.slice.call(arguments,1);return function(){var st=J.slice();return st.push.apply(st,arguments),B.apply(this,st)}}function f(B,K){function J(){}J.prototype=K.prototype,B.Z=K.prototype,B.prototype=new J,B.prototype.constructor=B,B.Ob=function(st,At,Ft){for(var te=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)te[Be-2]=arguments[Be];return K.prototype[At].apply(st,te)}}var o=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?B=>B&&AsyncContext.Snapshot.wrap(B):B=>B;function u(B){const K=B.length;if(K>0){const J=Array(K);for(let st=0;st<K;st++)J[st]=B[st];return J}return[]}function r(B,K){for(let st=1;st<arguments.length;st++){const At=arguments[st];var J=typeof At;if(J=J!="object"?J:At?Array.isArray(At)?"array":J:"null",J=="array"||J=="object"&&typeof At.length=="number"){J=B.length||0;const Ft=At.length||0;B.length=J+Ft;for(let te=0;te<Ft;te++)B[J+te]=At[te]}else B.push(At)}}class h{constructor(K,J){this.i=K,this.j=J,this.h=0,this.g=null}get(){let K;return this.h>0?(this.h--,K=this.g,this.g=K.next,K.next=null):K=this.i(),K}}function c(B){s.setTimeout(()=>{throw B},0)}function l(){var B=C;let K=null;return B.g&&(K=B.g,B.g=B.g.next,B.g||(B.h=null),K.next=null),K}class p{constructor(){this.h=this.g=null}add(K,J){const st=m.get();st.set(K,J),this.h?this.h.next=st:this.g=st,this.h=st}}var m=new h(()=>new v,B=>B.reset());class v{constructor(){this.next=this.g=this.h=null}set(K,J){this.h=K,this.g=J,this.next=null}reset(){this.next=this.g=this.h=null}}let y,E=!1,C=new p,w=()=>{const B=Promise.resolve(void 0);y=()=>{B.then(A)}};function A(){for(var B;B=l();){try{B.h.call(B.g)}catch(J){c(J)}var K=m;K.j(B),K.h<100&&(K.h++,B.next=K.g,K.g=B)}E=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(B,K){this.type=B,this.g=this.target=K,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var B=!1,K=Object.defineProperty({},"passive",{get:function(){B=!0}});try{const J=()=>{};s.addEventListener("test",J,K),s.removeEventListener("test",J,K)}catch{}return B})();function b(B){return/^[\s\xa0]*$/.test(B)}function F(B,K){R.call(this,B?B.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,B&&this.init(B,K)}f(F,R),F.prototype.init=function(B,K){const J=this.type=B.type,st=B.changedTouches&&B.changedTouches.length?B.changedTouches[0]:null;this.target=B.target||B.srcElement,this.g=K,K=B.relatedTarget,K||(J=="mouseover"?K=B.fromElement:J=="mouseout"&&(K=B.toElement)),this.relatedTarget=K,st?(this.clientX=st.clientX!==void 0?st.clientX:st.pageX,this.clientY=st.clientY!==void 0?st.clientY:st.pageY,this.screenX=st.screenX||0,this.screenY=st.screenY||0):(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0),this.button=B.button,this.key=B.key||"",this.ctrlKey=B.ctrlKey,this.altKey=B.altKey,this.shiftKey=B.shiftKey,this.metaKey=B.metaKey,this.pointerId=B.pointerId||0,this.pointerType=B.pointerType,this.state=B.state,this.i=B,B.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const B=this.i;B.preventDefault?B.preventDefault():B.returnValue=!1};var I="closure_listenable_"+(Math.random()*1e6|0),L=0;function D(B,K,J,st,At){this.listener=B,this.proxy=null,this.src=K,this.type=J,this.capture=!!st,this.ha=At,this.key=++L,this.da=this.fa=!1}function O(B){B.da=!0,B.listener=null,B.proxy=null,B.src=null,B.ha=null}function z(B,K,J){for(const st in B)K.call(J,B[st],st,B)}function _(B,K){for(const J in B)K.call(void 0,B[J],J,B)}function X(B){const K={};for(const J in B)K[J]=B[J];return K}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(B,K){let J,st;for(let At=1;At<arguments.length;At++){st=arguments[At];for(J in st)B[J]=st[J];for(let Ft=0;Ft<H.length;Ft++)J=H[Ft],Object.prototype.hasOwnProperty.call(st,J)&&(B[J]=st[J])}}function G(B){this.src=B,this.g={},this.h=0}G.prototype.add=function(B,K,J,st,At){const Ft=B.toString();B=this.g[Ft],B||(B=this.g[Ft]=[],this.h++);const te=W(B,K,st,At);return te>-1?(K=B[te],J||(K.fa=!1)):(K=new D(K,this.src,Ft,!!st,At),K.fa=J,B.push(K)),K};function N(B,K){const J=K.type;if(J in B.g){var st=B.g[J],At=Array.prototype.indexOf.call(st,K,void 0),Ft;(Ft=At>=0)&&Array.prototype.splice.call(st,At,1),Ft&&(O(K),B.g[J].length==0&&(delete B.g[J],B.h--))}}function W(B,K,J,st){for(let At=0;At<B.length;++At){const Ft=B[At];if(!Ft.da&&Ft.listener==K&&Ft.capture==!!J&&Ft.ha==st)return At}return-1}var V="closure_lm_"+(Math.random()*1e6|0),$={};function j(B,K,J,st,At){if(Array.isArray(K)){for(let Ft=0;Ft<K.length;Ft++)j(B,K[Ft],J,st,At);return null}return J=ct(J),B&&B[I]?B.J(K,J,T(st)?!!st.capture:!1,At):k(B,K,J,!1,st,At)}function k(B,K,J,st,At,Ft){if(!K)throw Error("Invalid event type");const te=T(At)?!!At.capture:!!At;let Be=vt(B);if(Be||(B[V]=Be=new G(B)),J=Be.add(K,J,st,te,Ft),J.proxy)return J;if(st=Q(),J.proxy=st,st.src=B,st.listener=J,B.addEventListener)P||(At=te),At===void 0&&(At=!1),B.addEventListener(K.toString(),st,At);else if(B.attachEvent)B.attachEvent(q(K.toString()),st);else if(B.addListener&&B.removeListener)B.addListener(st);else throw Error("addEventListener and attachEvent are unavailable.");return J}function Q(){function B(J){return K.call(B.src,B.listener,J)}const K=ft;return B}function et(B,K,J,st,At){if(Array.isArray(K))for(var Ft=0;Ft<K.length;Ft++)et(B,K[Ft],J,st,At);else st=T(st)?!!st.capture:!!st,J=ct(J),B&&B[I]?(B=B.i,Ft=String(K).toString(),Ft in B.g&&(K=B.g[Ft],J=W(K,J,st,At),J>-1&&(O(K[J]),Array.prototype.splice.call(K,J,1),K.length==0&&(delete B.g[Ft],B.h--)))):B&&(B=vt(B))&&(K=B.g[K.toString()],B=-1,K&&(B=W(K,J,st,At)),(J=B>-1?K[B]:null)&&at(J))}function at(B){if(typeof B!="number"&&B&&!B.da){var K=B.src;if(K&&K[I])N(K.i,B);else{var J=B.type,st=B.proxy;K.removeEventListener?K.removeEventListener(J,st,B.capture):K.detachEvent?K.detachEvent(q(J),st):K.addListener&&K.removeListener&&K.removeListener(st),(J=vt(K))?(N(J,B),J.h==0&&(J.src=null,K[V]=null)):O(B)}}}function q(B){return B in $?$[B]:$[B]="on"+B}function ft(B,K){if(B.da)B=!0;else{K=new F(K,this);const J=B.listener,st=B.ha||B.src;B.fa&&at(B),B=J.call(st,K)}return B}function vt(B){return B=B[V],B instanceof G?B:null}var Tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ct(B){return typeof B=="function"?B:(B[Tt]||(B[Tt]=function(K){return B.handleEvent(K)}),B[Tt])}function Ut(){M.call(this),this.i=new G(this),this.M=this,this.G=null}f(Ut,M),Ut.prototype[I]=!0,Ut.prototype.removeEventListener=function(B,K,J,st){et(this,B,K,J,st)};function yt(B,K){var J,st=B.G;if(st)for(J=[];st;st=st.G)J.push(st);if(B=B.M,st=K.type||K,typeof K=="string")K=new R(K,B);else if(K instanceof R)K.target=K.target||B;else{var At=K;K=new R(st,B),U(K,At)}At=!0;let Ft,te;if(J)for(te=J.length-1;te>=0;te--)Ft=K.g=J[te],At=it(Ft,st,!0,K)&&At;if(Ft=K.g=B,At=it(Ft,st,!0,K)&&At,At=it(Ft,st,!1,K)&&At,J)for(te=0;te<J.length;te++)Ft=K.g=J[te],At=it(Ft,st,!1,K)&&At}Ut.prototype.N=function(){if(Ut.Z.N.call(this),this.i){var B=this.i;for(const K in B.g){const J=B.g[K];for(let st=0;st<J.length;st++)O(J[st]);delete B.g[K],B.h--}}this.G=null},Ut.prototype.J=function(B,K,J,st){return this.i.add(String(B),K,!1,J,st)},Ut.prototype.K=function(B,K,J,st){return this.i.add(String(B),K,!0,J,st)};function it(B,K,J,st){if(K=B.i.g[String(K)],!K)return!0;K=K.concat();let At=!0;for(let Ft=0;Ft<K.length;++Ft){const te=K[Ft];if(te&&!te.da&&te.capture==J){const Be=te.listener,Vi=te.ha||te.src;te.fa&&N(B.i,te),At=Be.call(Vi,st)!==!1&&At}}return At&&!st.defaultPrevented}function Z(B,K){if(typeof B!="function")if(B&&typeof B.handleEvent=="function")B=a(B.handleEvent,B);else throw Error("Invalid listener argument");return Number(K)>2147483647?-1:s.setTimeout(B,K||0)}function lt(B){B.g=Z(()=>{B.g=null,B.i&&(B.i=!1,lt(B))},B.l);const K=B.h;B.h=null,B.m.apply(null,K)}class pt extends M{constructor(K,J){super(),this.m=K,this.l=J,this.h=null,this.i=!1,this.g=null}j(K){this.h=arguments,this.g?this.i=!0:lt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pt(B){M.call(this),this.h=B,this.g={}}f(Pt,M);var wt=[];function jt(B){z(B.g,function(K,J){this.g.hasOwnProperty(J)&&at(K)},B),B.g={}}Pt.prototype.N=function(){Pt.Z.N.call(this),jt(this)},Pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vt=s.JSON.stringify,Wt=s.JSON.parse,ue=class{stringify(B){return s.JSON.stringify(B,void 0)}parse(B){return s.JSON.parse(B,void 0)}};function Gt(){}function zt(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bt(){R.call(this,"d")}f(bt,R);function Kt(){R.call(this,"c")}f(Kt,R);var ge={},ce=null;function Oe(){return ce=ce||new Ut}ge.Ia="serverreachability";function dt(B){R.call(this,ge.Ia,B)}f(dt,R);function Jt(B){const K=Oe();yt(K,new dt(K))}ge.STAT_EVENT="statevent";function Dt(B,K){R.call(this,ge.STAT_EVENT,B),this.stat=K}f(Dt,R);function Ot(B){const K=Oe();yt(K,new Dt(K,B))}ge.Ja="timingevent";function ae(B,K){R.call(this,ge.Ja,B),this.size=K}f(ae,R);function ne(B,K){if(typeof B!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){B()},K)}function Me(){this.g=!0}Me.prototype.ua=function(){this.g=!1};function Mi(B,K,J,st,At,Ft){B.info(function(){if(B.g)if(Ft){var te="",Be=Ft.split("&");for(let gi=0;gi<Be.length;gi++){var Vi=Be[gi].split("=");if(Vi.length>1){const rn=Vi[0];Vi=Vi[1];const Zs=rn.split("_");te=Zs.length>=2&&Zs[1]=="type"?te+(rn+"="+Vi+"&"):te+(rn+"=redacted&")}}}else te=null;else te=Ft;return"XMLHTTP REQ ("+st+") [attempt "+At+"]: "+K+`
`+J+`
`+te})}function Ui(B,K,J,st,At,Ft,te){B.info(function(){return"XMLHTTP RESP ("+st+") [ attempt "+At+"]: "+K+`
`+J+`
`+Ft+" "+te})}function Xe(B,K,J,st){B.info(function(){return"XMLHTTP TEXT ("+K+"): "+ki(B,J)+(st?" "+st:"")})}function Ri(B,K){B.info(function(){return"TIMEOUT: "+K})}Me.prototype.info=function(){};function ki(B,K){if(!B.g)return K;if(!K)return null;try{const Ft=JSON.parse(K);if(Ft){for(B=0;B<Ft.length;B++)if(Array.isArray(Ft[B])){var J=Ft[B];if(!(J.length<2)){var st=J[1];if(Array.isArray(st)&&!(st.length<1)){var At=st[0];if(At!="noop"&&At!="stop"&&At!="close")for(let te=1;te<st.length;te++)st[te]=""}}}}return Vt(Ft)}catch{return K}}var Fn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ts={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ne;function xa(){}f(xa,Gt),xa.prototype.g=function(){return new XMLHttpRequest},Ne=new xa;function Gr(B){return encodeURIComponent(String(B))}function $h(B){var K=1;B=B.split(":");const J=[];for(;K>0&&B.length;)J.push(B.shift()),K--;return B.length&&J.push(B.join(":")),J}function es(B,K,J,st){this.j=B,this.i=K,this.l=J,this.S=st||1,this.V=new Pt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new El}function El(){this.i=null,this.g="",this.h=!1}var ya={},Ta={};function co(B,K,J){B.M=1,B.A=vn(ti(K)),B.u=J,B.R=!0,po(B,null)}function po(B,K){B.F=Date.now(),vo(B),B.B=ti(B.A);var J=B.B,st=B.S;Array.isArray(st)||(st=[String(st)]),Kh(J.i,"t",st),B.C=0,J=B.j.L,B.h=new El,B.g=Xp(B.j,J?K:null,!B.u),B.P>0&&(B.O=new pt(a(B.Y,B,B.g),B.P)),K=B.V,J=B.g,st=B.ba;var At="readystatechange";Array.isArray(At)||(At&&(wt[0]=At.toString()),At=wt);for(let Ft=0;Ft<At.length;Ft++){const te=j(J,At[Ft],st||K.handleEvent,!1,K.h||K);if(!te)break;K.g[te.key]=te}K=B.J?X(B.J):{},B.u?(B.v||(B.v="POST"),K["Content-Type"]="application/x-www-form-urlencoded",B.g.ea(B.B,B.v,B.u,K)):(B.v="GET",B.g.ea(B.B,B.v,null,K)),Jt(),Mi(B.i,B.v,B.B,B.l,B.S,B.u)}es.prototype.ba=function(B){B=B.target;const K=this.O;K&&gr(B)==3?K.j():this.Y(B)},es.prototype.Y=function(B){try{if(B==this.g)t:{const Be=gr(this.g),Vi=this.g.ya(),gi=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||vc(this.g)))){this.K||Be!=4||Vi==7||(Vi==8||gi<=0?Jt(3):Jt(2)),nt(this);var K=this.g.ca();this.X=K;var J=lc(this);if(this.o=K==200,Ui(this.i,this.v,this.B,this.l,this.S,Be,K),this.o){if(this.U&&!this.L){e:{if(this.g){var st,At=this.g;if((st=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(st)){var Ft=st;break e}}Ft=null}if(B=Ft)Xe(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,It(this,B);else{this.o=!1,this.m=3,Ot(12),Rt(this),gt(this);break t}}if(this.R){B=!0;let rn;for(;!this.K&&this.C<J.length;)if(rn=hc(this,J),rn==Ta){Be==4&&(this.m=4,Ot(14),B=!1),Xe(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==ya){this.m=4,Ot(15),Xe(this.i,this.l,J,"[Invalid Chunk]"),B=!1;break}else Xe(this.i,this.l,rn,null),It(this,rn);if(Sl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||J.length!=0||this.h.h||(this.m=1,Ot(16),B=!1),this.o=this.o&&B,!B)Xe(this.i,this.l,J,"[Invalid Chunked Response]"),Rt(this),gt(this);else if(J.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),yc(te),te.P=!0,Ot(11))}}else Xe(this.i,this.l,J,null),It(this,J);Be==4&&Rt(this),this.o&&!this.K&&(Be==4?Wp(this.j,this):(this.o=!1,vo(this)))}else Bp(this.g),K==400&&J.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Rt(this),gt(this)}}}catch{}finally{}};function lc(B){if(!Sl(B))return B.g.la();const K=vc(B.g);if(K==="")return"";let J="";const st=K.length,At=gr(B.g)==4;if(!B.h.i){if(typeof TextDecoder>"u")return Rt(B),gt(B),"";B.h.i=new s.TextDecoder}for(let Ft=0;Ft<st;Ft++)B.h.h=!0,J+=B.h.i.decode(K[Ft],{stream:!(At&&Ft==st-1)});return K.length=0,B.h.g+=J,B.C=0,B.h.g}function Sl(B){return B.g?B.v=="GET"&&B.M!=2&&B.j.Aa:!1}function hc(B,K){var J=B.C,st=K.indexOf(`
`,J);return st==-1?Ta:(J=Number(K.substring(J,st)),isNaN(J)?ya:(st+=1,st+J>K.length?Ta:(K=K.slice(st,st+J),B.C=st+J,K)))}es.prototype.cancel=function(){this.K=!0,Rt(this)};function vo(B){B.T=Date.now()+B.H,je(B,B.H)}function je(B,K){if(B.D!=null)throw Error("WatchDog timer not null");B.D=ne(a(B.aa,B),K)}function nt(B){B.D&&(s.clearTimeout(B.D),B.D=null)}es.prototype.aa=function(){this.D=null;const B=Date.now();B-this.T>=0?(Ri(this.i,this.B),this.M!=2&&(Jt(),Ot(17)),Rt(this),this.m=2,gt(this)):je(this,this.T-B)};function gt(B){B.j.I==0||B.K||Wp(B.j,B)}function Rt(B){nt(B);var K=B.O;K&&typeof K.dispose=="function"&&K.dispose(),B.O=null,jt(B.V),B.g&&(K=B.g,B.g=null,K.abort(),K.dispose())}function It(B,K){try{var J=B.j;if(J.I!=0&&(J.g==B||he(J.h,B))){if(!B.L&&he(J.h,B)&&J.I==3){try{var st=J.Ba.g.parse(K)}catch{st=null}if(Array.isArray(st)&&st.length==3){var At=st;if(At[0]==0){t:if(!J.v){if(J.g)if(J.g.F+3e3<B.F)qh(J),Al(J);else break t;xc(J),Ot(18)}}else J.xa=At[1],0<J.xa-J.K&&At[2]<37500&&J.F&&J.A==0&&!J.C&&(J.C=ne(a(J.Va,J),6e3));le(J.h)<=1&&J.ta&&(J.ta=void 0)}else Sa(J,11)}else if((B.L||J.g==B)&&qh(J),!b(K))for(At=J.Ba.g.parse(K),K=0;K<At.length;K++){let gi=At[K];const rn=gi[0];if(!(rn<=J.K))if(J.K=rn,gi=gi[1],J.I==2)if(gi[0]=="c"){J.M=gi[1],J.ba=gi[2];const Zs=gi[3];Zs!=null&&(J.ka=Zs,J.j.info("VER="+J.ka));const Aa=gi[4];Aa!=null&&(J.za=Aa,J.j.info("SVER="+J.za));const Wr=gi[5];Wr!=null&&typeof Wr=="number"&&Wr>0&&(st=1.5*Wr,J.O=st,J.j.info("backChannelRequestTimeoutMs_="+st)),st=J;const Hr=B.g;if(Hr){const eu=Hr.g?Hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eu){var Ft=st.h;Ft.g||eu.indexOf("spdy")==-1&&eu.indexOf("quic")==-1&&eu.indexOf("h2")==-1||(Ft.j=Ft.l,Ft.g=new Set,Ft.h&&(we(Ft,Ft.h),Ft.h=null))}if(st.G){const iu=Hr.g?Hr.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(st.wa=iu,Te(st.J,st.G,iu))}}J.I=3,J.l&&J.l.ra(),J.aa&&(J.T=Date.now()-B.F,J.j.info("Handshake RTT: "+J.T+"ms")),st=J;var te=B;if(st.na=Hp(st,st.L?st.ba:null,st.W),te.L){Re(st.h,te);var Be=te,Vi=st.O;Vi&&(Be.H=Vi),Be.D&&(nt(Be),vo(Be)),st.g=te}else Gp(st);J.i.length>0&&Qh(J)}else gi[0]!="stop"&&gi[0]!="close"||Sa(J,7);else J.I==3&&(gi[0]=="stop"||gi[0]=="close"?gi[0]=="stop"?Sa(J,7):mc(J):gi[0]!="noop"&&J.l&&J.l.qa(gi),J.A=0)}}Jt(4)}catch{}}var Et=class{constructor(B,K){this.g=B,this.map=K}};function $t(B){this.l=B||10,s.PerformanceNavigationTiming?(B=s.performance.getEntriesByType("navigation"),B=B.length>0&&(B[0].nextHopProtocol=="hq"||B[0].nextHopProtocol=="h2")):B=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=B?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function se(B){return B.h?!0:B.g?B.g.size>=B.j:!1}function le(B){return B.h?1:B.g?B.g.size:0}function he(B,K){return B.h?B.h==K:B.g?B.g.has(K):!1}function we(B,K){B.g?B.g.add(K):B.h=K}function Re(B,K){B.h&&B.h==K?B.h=null:B.g&&B.g.has(K)&&B.g.delete(K)}$t.prototype.cancel=function(){if(this.i=Ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const B of this.g.values())B.cancel();this.g.clear()}};function Ee(B){if(B.h!=null)return B.i.concat(B.h.G);if(B.g!=null&&B.g.size!==0){let K=B.i;for(const J of B.g.values())K=K.concat(J.G);return K}return u(B.i)}var Ge=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function si(B,K){if(B){B=B.split("&");for(let J=0;J<B.length;J++){const st=B[J].indexOf("=");let At,Ft=null;st>=0?(At=B[J].substring(0,st),Ft=B[J].substring(st+1)):At=B[J],K(At,Ft?decodeURIComponent(Ft.replace(/\+/g," ")):"")}}}function li(B){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let K;B instanceof li?(this.l=B.l,Ue(this,B.j),this.o=B.o,this.g=B.g,xe(this,B.u),this.h=B.h,Di(this,Ip(B.i)),this.m=B.m):B&&(K=String(B).match(Ge))?(this.l=!1,Ue(this,K[1]||"",!0),this.o=os(K[2]||""),this.g=os(K[3]||"",!0),xe(this,K[4]),this.h=os(K[5]||"",!0),Di(this,K[6]||"",!0),this.m=os(K[7]||"")):(this.l=!1,this.i=new js(null,this.l))}li.prototype.toString=function(){const B=[];var K=this.j;K&&B.push($i(K,mi,!0),":");var J=this.g;return(J||K=="file")&&(B.push("//"),(K=this.o)&&B.push($i(K,mi,!0),"@"),B.push(Gr(J).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),J=this.u,J!=null&&B.push(":",String(J))),(J=this.h)&&(this.g&&J.charAt(0)!="/"&&B.push("/"),B.push($i(J,J.charAt(0)=="/"?Dn:Wn,!0))),(J=this.i.toString())&&B.push("?",J),(J=this.m)&&B.push("#",$i(J,Mn)),B.join("")},li.prototype.resolve=function(B){const K=ti(this);let J=!!B.j;J?Ue(K,B.j):J=!!B.o,J?K.o=B.o:J=!!B.g,J?K.g=B.g:J=B.u!=null;var st=B.h;if(J)xe(K,B.u);else if(J=!!B.h){if(st.charAt(0)!="/")if(this.g&&!this.h)st="/"+st;else{var At=K.h.lastIndexOf("/");At!=-1&&(st=K.h.slice(0,At+1)+st)}if(At=st,At==".."||At==".")st="";else if(At.indexOf("./")!=-1||At.indexOf("/.")!=-1){st=At.lastIndexOf("/",0)==0,At=At.split("/");const Ft=[];for(let te=0;te<At.length;){const Be=At[te++];Be=="."?st&&te==At.length&&Ft.push(""):Be==".."?((Ft.length>1||Ft.length==1&&Ft[0]!="")&&Ft.pop(),st&&te==At.length&&Ft.push("")):(Ft.push(Be),st=!0)}st=Ft.join("/")}else st=At}return J?K.h=st:J=B.i.toString()!=="",J?Di(K,Ip(B.i)):J=!!B.m,J&&(K.m=B.m),K};function ti(B){return new li(B)}function Ue(B,K,J){B.j=J?os(K,!0):K,B.j&&(B.j=B.j.replace(/:$/,""))}function xe(B,K){if(K){if(K=Number(K),isNaN(K)||K<0)throw Error("Bad port number "+K);B.u=K}else B.u=null}function Di(B,K,J){K instanceof js?(B.i=K,Gg(B.i,B.l)):(J||(K=$i(K,mn)),B.i=new js(K,B.l))}function Te(B,K,J){B.i.set(K,J)}function vn(B){return Te(B,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),B}function os(B,K){return B?K?decodeURI(B.replace(/%25/g,"%2525")):decodeURIComponent(B):""}function $i(B,K,J){return typeof B=="string"?(B=encodeURI(B).replace(K,_r),J&&(B=B.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B):null}function _r(B){return B=B.charCodeAt(0),"%"+(B>>4&15).toString(16)+(B&15).toString(16)}var mi=/[#\/\?@]/g,Wn=/[#\?:]/g,Dn=/[#\?]/g,mn=/[#\?@]/g,Mn=/#/g;function js(B,K){this.h=this.g=null,this.i=B||null,this.j=!!K}function On(B){B.g||(B.g=new Map,B.h=0,B.i&&si(B.i,function(K,J){B.add(decodeURIComponent(K.replace(/\+/g," ")),J)}))}d=js.prototype,d.add=function(B,K){On(this),this.i=null,B=Ea(this,B);let J=this.g.get(B);return J||this.g.set(B,J=[]),J.push(K),this.h+=1,this};function Pp(B,K){On(B),K=Ea(B,K),B.g.has(K)&&(B.i=null,B.h-=B.g.get(K).length,B.g.delete(K))}function uc(B,K){return On(B),K=Ea(B,K),B.g.has(K)}d.forEach=function(B,K){On(this),this.g.forEach(function(J,st){J.forEach(function(At){B.call(K,At,st,this)},this)},this)};function bp(B,K){On(B);let J=[];if(typeof K=="string")uc(B,K)&&(J=J.concat(B.g.get(Ea(B,K))));else for(B=Array.from(B.g.values()),K=0;K<B.length;K++)J=J.concat(B[K]);return J}d.set=function(B,K){return On(this),this.i=null,B=Ea(this,B),uc(this,B)&&(this.h-=this.g.get(B).length),this.g.set(B,[K]),this.h+=1,this},d.get=function(B,K){return B?(B=bp(this,B),B.length>0?String(B[0]):K):K};function Kh(B,K,J){Pp(B,K),J.length>0&&(B.i=null,B.g.set(Ea(B,K),u(J)),B.h+=J.length)}d.toString=function(){if(this.i)return this.i;if(!this.g)return"";const B=[],K=Array.from(this.g.keys());for(let st=0;st<K.length;st++){var J=K[st];const At=Gr(J);J=bp(this,J);for(let Ft=0;Ft<J.length;Ft++){let te=At;J[Ft]!==""&&(te+="="+Gr(J[Ft])),B.push(te)}}return this.i=B.join("&")};function Ip(B){const K=new js;return K.i=B.i,B.g&&(K.g=new Map(B.g),K.h=B.h),K}function Ea(B,K){return K=String(K),B.j&&(K=K.toLowerCase()),K}function Gg(B,K){K&&!B.j&&(On(B),B.i=null,B.g.forEach(function(J,st){const At=st.toLowerCase();st!=At&&(Pp(this,st),Kh(this,At,J))},B)),B.j=K}function _g(B,K){const J=new Me;if(s.Image){const st=new Image;st.onload=g(mr,J,"TestLoadImage: loaded",!0,K,st),st.onerror=g(mr,J,"TestLoadImage: error",!1,K,st),st.onabort=g(mr,J,"TestLoadImage: abort",!1,K,st),st.ontimeout=g(mr,J,"TestLoadImage: timeout",!1,K,st),s.setTimeout(function(){st.ontimeout&&st.ontimeout()},1e4),st.src=B}else K(!1)}function Lp(B,K){const J=new Me,st=new AbortController,At=setTimeout(()=>{st.abort(),mr(J,"TestPingServer: timeout",!1,K)},1e4);fetch(B,{signal:st.signal}).then(Ft=>{clearTimeout(At),Ft.ok?mr(J,"TestPingServer: ok",!0,K):mr(J,"TestPingServer: server error",!1,K)}).catch(()=>{clearTimeout(At),mr(J,"TestPingServer: error",!1,K)})}function mr(B,K,J,st,At){try{At&&(At.onload=null,At.onerror=null,At.onabort=null,At.ontimeout=null),st(J)}catch{}}function Fp(){this.g=new ue}function jh(B){this.i=B.Sb||null,this.h=B.ab||!1}f(jh,Gt),jh.prototype.g=function(){return new Zh(this.i,this.h)};function Zh(B,K){Ut.call(this),this.H=B,this.o=K,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Zh,Ut),d=Zh.prototype,d.open=function(B,K){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=B,this.D=K,this.readyState=1,mo(this)},d.send=function(B){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const K={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};B&&(K.body=B),(this.H||s).fetch(new Request(this.D,K)).then(this.Pa.bind(this),this.ga.bind(this))},d.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cl(this)),this.readyState=0},d.Pa=function(B){if(this.g&&(this.l=B,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=B.headers,this.readyState=2,mo(this)),this.g&&(this.readyState=3,mo(this),this.g)))if(this.responseType==="arraybuffer")B.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in B){if(this.j=B.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fc(this)}else B.text().then(this.Oa.bind(this),this.ga.bind(this))};function fc(B){B.j.read().then(B.Ma.bind(B)).catch(B.ga.bind(B))}d.Ma=function(B){if(this.g){if(this.o&&B.value)this.response.push(B.value);else if(!this.o){var K=B.value?B.value:new Uint8Array(0);(K=this.B.decode(K,{stream:!B.done}))&&(this.response=this.responseText+=K)}B.done?Cl(this):mo(this),this.readyState==3&&fc(this)}},d.Oa=function(B){this.g&&(this.response=this.responseText=B,Cl(this))},d.Na=function(B){this.g&&(this.response=B,Cl(this))},d.ga=function(){this.g&&Cl(this)};function Cl(B){B.readyState=4,B.l=null,B.j=null,B.B=null,mo(B)}d.setRequestHeader=function(B,K){this.A.append(B,K)},d.getResponseHeader=function(B){return this.h&&this.h.get(B.toLowerCase())||""},d.getAllResponseHeaders=function(){if(!this.h)return"";const B=[],K=this.h.entries();for(var J=K.next();!J.done;)J=J.value,B.push(J[0]+": "+J[1]),J=K.next();return B.join(`\r
`)};function mo(B){B.onreadystatechange&&B.onreadystatechange.call(B)}Object.defineProperty(Zh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(B){this.m=B?"include":"same-origin"}});function Dp(B){let K="";return z(B,function(J,st){K+=st,K+=":",K+=J,K+=`\r
`}),K}function cc(B,K,J){t:{for(st in J){var st=!1;break t}st=!0}st||(J=Dp(J),typeof B=="string"?J!=null&&Gr(J):Te(B,K,J))}function Oi(B){Ut.call(this),this.headers=new Map,this.L=B||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Oi,Ut);var Wg=/^https?$/i,Op=["POST","PUT"];d=Oi.prototype,d.Fa=function(B){this.H=B},d.ea=function(B,K,J,st){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+B);K=K?K.toUpperCase():"GET",this.D=B,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ne.g(),this.g.onreadystatechange=o(a(this.Ca,this));try{this.B=!0,this.g.open(K,String(B),!0),this.B=!1}catch(Ft){dc(this,Ft);return}if(B=J||"",J=new Map(this.headers),st)if(Object.getPrototypeOf(st)===Object.prototype)for(var At in st)J.set(At,st[At]);else if(typeof st.keys=="function"&&typeof st.get=="function")for(const Ft of st.keys())J.set(Ft,st.get(Ft));else throw Error("Unknown input type for opt_headers: "+String(st));st=Array.from(J.keys()).find(Ft=>Ft.toLowerCase()=="content-type"),At=s.FormData&&B instanceof s.FormData,!(Array.prototype.indexOf.call(Op,K,void 0)>=0)||st||At||J.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ft,te]of J)this.g.setRequestHeader(Ft,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(B),this.v=!1}catch(Ft){dc(this,Ft)}};function dc(B,K){B.h=!1,B.g&&(B.j=!0,B.g.abort(),B.j=!1),B.l=K,B.o=5,Np(B),Jh(B)}function Np(B){B.A||(B.A=!0,yt(B,"complete"),yt(B,"error"))}d.abort=function(B){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=B||7,yt(this,"complete"),yt(this,"abort"),Jh(this))},d.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jh(this,!0)),Oi.Z.N.call(this)},d.Ca=function(){this.u||(this.B||this.v||this.j?pc(this):this.Xa())},d.Xa=function(){pc(this)};function pc(B){if(B.h&&typeof S<"u"){if(B.v&&gr(B)==4)setTimeout(B.Ca.bind(B),0);else if(yt(B,"readystatechange"),gr(B)==4){B.h=!1;try{const Ft=B.ca();t:switch(Ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var K=!0;break t;default:K=!1}var J;if(!(J=K)){var st;if(st=Ft===0){let te=String(B.D).match(Ge)[1]||null;!te&&s.self&&s.self.location&&(te=s.self.location.protocol.slice(0,-1)),st=!Wg.test(te?te.toLowerCase():"")}J=st}if(J)yt(B,"complete"),yt(B,"success");else{B.o=6;try{var At=gr(B)>2?B.g.statusText:""}catch{At=""}B.l=At+" ["+B.ca()+"]",Np(B)}}finally{Jh(B)}}}}function Jh(B,K){if(B.g){B.m&&(clearTimeout(B.m),B.m=null);const J=B.g;B.g=null,K||yt(B,"ready");try{J.onreadystatechange=null}catch{}}}d.isActive=function(){return!!this.g};function gr(B){return B.g?B.g.readyState:0}d.ca=function(){try{return gr(this)>2?this.g.status:-1}catch{return-1}},d.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},d.La=function(B){if(this.g){var K=this.g.responseText;return B&&K.indexOf(B)==0&&(K=K.substring(B.length)),Wt(K)}};function vc(B){try{if(!B.g)return null;if("response"in B.g)return B.g.response;switch(B.F){case"":case"text":return B.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in B.g)return B.g.mozResponseArrayBuffer}return null}catch{return null}}function Bp(B){const K={};B=(B.g&&gr(B)>=2&&B.g.getAllResponseHeaders()||"").split(`\r
`);for(let st=0;st<B.length;st++){if(b(B[st]))continue;var J=$h(B[st]);const At=J[0];if(J=J[1],typeof J!="string")continue;J=J.trim();const Ft=K[At]||[];K[At]=Ft,Ft.push(J)}_(K,function(st){return st.join(", ")})}d.ya=function(){return this.o},d.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function go(B,K,J){return J&&J.internalChannelParams&&J.internalChannelParams[B]||K}function Up(B){this.za=0,this.i=[],this.j=new Me,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=go("failFast",!1,B),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=go("baseRetryDelayMs",5e3,B),this.Za=go("retryDelaySeedMs",1e4,B),this.Ta=go("forwardChannelMaxRetries",2,B),this.va=go("forwardChannelRequestTimeoutMs",2e4,B),this.ma=B&&B.xmlHttpFactory||void 0,this.Ua=B&&B.Rb||void 0,this.Aa=B&&B.useFetchStreams||!1,this.O=void 0,this.L=B&&B.supportsCrossDomainXhr||!1,this.M="",this.h=new $t(B&&B.concurrentRequestLimit),this.Ba=new Fp,this.S=B&&B.fastHandshake||!1,this.R=B&&B.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=B&&B.Pb||!1,B&&B.ua&&this.j.ua(),B&&B.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&B&&B.detectBufferingProxy||!1,this.ia=void 0,B&&B.longPollingTimeout&&B.longPollingTimeout>0&&(this.ia=B.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}d=Up.prototype,d.ka=8,d.I=1,d.connect=function(B,K,J,st){Ot(0),this.W=B,this.H=K||{},J&&st!==void 0&&(this.H.OSID=J,this.H.OAID=st),this.F=this.X,this.J=Hp(this,null,this.W),Qh(this)};function mc(B){if(Vp(B),B.I==3){var K=B.V++,J=ti(B.J);if(Te(J,"SID",B.M),Te(J,"RID",K),Te(J,"TYPE","terminate"),wl(B,J),K=new es(B,B.j,K),K.M=2,K.A=vn(ti(J)),J=!1,s.navigator&&s.navigator.sendBeacon)try{J=s.navigator.sendBeacon(K.A.toString(),"")}catch{}!J&&s.Image&&(new Image().src=K.A,J=!0),J||(K.g=Xp(K.j,null),K.g.ea(K.A)),K.F=Date.now(),vo(K)}Ec(B)}function Al(B){B.g&&(yc(B),B.g.cancel(),B.g=null)}function Vp(B){Al(B),B.v&&(s.clearTimeout(B.v),B.v=null),qh(B),B.h.cancel(),B.m&&(typeof B.m=="number"&&s.clearTimeout(B.m),B.m=null)}function Qh(B){if(!se(B.h)&&!B.m){B.m=!0;var K=B.Ea;y||w(),E||(y(),E=!0),C.add(K,B),B.D=0}}function Hg(B,K){return le(B.h)>=B.h.j-(B.m?1:0)?!1:B.m?(B.i=K.G.concat(B.i),!0):B.I==1||B.I==2||B.D>=(B.Sa?0:B.Ta)?!1:(B.m=ne(a(B.Ea,B,K),Tc(B,B.D)),B.D++,!0)}d.Ea=function(B){if(this.m)if(this.m=null,this.I==1){if(!B){this.V=Math.floor(Math.random()*1e5),B=this.V++;const At=new es(this,this.j,B);let Ft=this.o;if(this.U&&(Ft?(Ft=X(Ft),U(Ft,this.U)):Ft=this.U),this.u!==null||this.R||(At.J=Ft,Ft=null),this.S)t:{for(var K=0,J=0;J<this.i.length;J++){e:{var st=this.i[J];if("__data__"in st.map&&(st=st.map.__data__,typeof st=="string")){st=st.length;break e}st=void 0}if(st===void 0)break;if(K+=st,K>4096){K=J;break t}if(K===4096||J===this.i.length-1){K=J+1;break t}}K=1e3}else K=1e3;K=zp(this,At,K),J=ti(this.J),Te(J,"RID",B),Te(J,"CVER",22),this.G&&Te(J,"X-HTTP-Session-Id",this.G),wl(this,J),Ft&&(this.R?K="headers="+Gr(Dp(Ft))+"&"+K:this.u&&cc(J,this.u,Ft)),we(this.h,At),this.Ra&&Te(J,"TYPE","init"),this.S?(Te(J,"$req",K),Te(J,"SID","null"),At.U=!0,co(At,J,null)):co(At,J,K),this.I=2}}else this.I==3&&(B?gc(this,B):this.i.length==0||se(this.h)||gc(this))};function gc(B,K){var J;K?J=K.l:J=B.V++;const st=ti(B.J);Te(st,"SID",B.M),Te(st,"RID",J),Te(st,"AID",B.K),wl(B,st),B.u&&B.o&&cc(st,B.u,B.o),J=new es(B,B.j,J,B.D+1),B.u===null&&(J.J=B.o),K&&(B.i=K.G.concat(B.i)),K=zp(B,J,1e3),J.H=Math.round(B.va*.5)+Math.round(B.va*.5*Math.random()),we(B.h,J),co(J,st,K)}function wl(B,K){B.H&&z(B.H,function(J,st){Te(K,st,J)}),B.l&&z({},function(J,st){Te(K,st,J)})}function zp(B,K,J){J=Math.min(B.i.length,J);const st=B.l?a(B.l.Ka,B.l,B):null;t:{var At=B.i;let Be=-1;for(;;){const Vi=["count="+J];Be==-1?J>0?(Be=At[0].g,Vi.push("ofs="+Be)):Be=0:Vi.push("ofs="+Be);let gi=!0;for(let rn=0;rn<J;rn++){var Ft=At[rn].g;const Zs=At[rn].map;if(Ft-=Be,Ft<0)Be=Math.max(0,At[rn].g-100),gi=!1;else try{Ft="req"+Ft+"_"||"";try{var te=Zs instanceof Map?Zs:Object.entries(Zs);for(const[Aa,Wr]of te){let Hr=Wr;T(Wr)&&(Hr=Vt(Wr)),Vi.push(Ft+Aa+"="+encodeURIComponent(Hr))}}catch(Aa){throw Vi.push(Ft+"type="+encodeURIComponent("_badmap")),Aa}}catch{st&&st(Zs)}}if(gi){te=Vi.join("&");break t}}te=void 0}return B=B.i.splice(0,J),K.G=B,te}function Gp(B){if(!B.g&&!B.v){B.Y=1;var K=B.Da;y||w(),E||(y(),E=!0),C.add(K,B),B.A=0}}function xc(B){return B.g||B.v||B.A>=3?!1:(B.Y++,B.v=ne(a(B.Da,B),Tc(B,B.A)),B.A++,!0)}d.Da=function(){if(this.v=null,_p(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var B=4*this.T;this.j.info("BP detection timer enabled: "+B),this.B=ne(a(this.Wa,this),B)}},d.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),Al(this),_p(this))};function yc(B){B.B!=null&&(s.clearTimeout(B.B),B.B=null)}function _p(B){B.g=new es(B,B.j,"rpc",B.Y),B.u===null&&(B.g.J=B.o),B.g.P=0;var K=ti(B.na);Te(K,"RID","rpc"),Te(K,"SID",B.M),Te(K,"AID",B.K),Te(K,"CI",B.F?"0":"1"),!B.F&&B.ia&&Te(K,"TO",B.ia),Te(K,"TYPE","xmlhttp"),wl(B,K),B.u&&B.o&&cc(K,B.u,B.o),B.O&&(B.g.H=B.O);var J=B.g;B=B.ba,J.M=1,J.A=vn(ti(K)),J.u=null,J.R=!0,po(J,B)}d.Va=function(){this.C!=null&&(this.C=null,Al(this),xc(this),Ot(19))};function qh(B){B.C!=null&&(s.clearTimeout(B.C),B.C=null)}function Wp(B,K){var J=null;if(B.g==K){qh(B),yc(B),B.g=null;var st=2}else if(he(B.h,K))J=K.G,Re(B.h,K),st=1;else return;if(B.I!=0){if(K.o)if(st==1){J=K.u?K.u.length:0,K=Date.now()-K.F;var At=B.D;st=Oe(),yt(st,new ae(st,J)),Qh(B)}else Gp(B);else if(At=K.m,At==3||At==0&&K.X>0||!(st==1&&Hg(B,K)||st==2&&xc(B)))switch(J&&J.length>0&&(K=B.h,K.i=K.i.concat(J)),At){case 1:Sa(B,5);break;case 4:Sa(B,10);break;case 3:Sa(B,6);break;default:Sa(B,2)}}}function Tc(B,K){let J=B.Qa+Math.floor(Math.random()*B.Za);return B.isActive()||(J*=2),J*K}function Sa(B,K){if(B.j.info("Error code "+K),K==2){var J=a(B.bb,B),st=B.Ua;const At=!st;st=new li(st||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ue(st,"https"),vn(st),At?_g(st.toString(),J):Lp(st.toString(),J)}else Ot(2);B.I=0,B.l&&B.l.pa(K),Ec(B),Vp(B)}d.bb=function(B){B?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Ec(B){if(B.I=0,B.ja=[],B.l){const K=Ee(B.h);(K.length!=0||B.i.length!=0)&&(r(B.ja,K),r(B.ja,B.i),B.h.i.length=0,u(B.i),B.i.length=0),B.l.oa()}}function Hp(B,K,J){var st=J instanceof li?ti(J):new li(J);if(st.g!="")K&&(st.g=K+"."+st.g),xe(st,st.u);else{var At=s.location;st=At.protocol,K=K?K+"."+At.hostname:At.hostname,At=+At.port;const Ft=new li(null);st&&Ue(Ft,st),K&&(Ft.g=K),At&&xe(Ft,At),J&&(Ft.h=J),st=Ft}return J=B.G,K=B.wa,J&&K&&Te(st,J,K),Te(st,"VER",B.ka),wl(B,st),st}function Xp(B,K,J){if(K&&!B.L)throw Error("Can't create secondary domain capable XhrIo object.");return K=B.Aa&&!B.ma?new Oi(new jh({ab:J})):new Oi(B.ma),K.Fa(B.L),K}d.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sc(){}d=Sc.prototype,d.ra=function(){},d.qa=function(){},d.pa=function(){},d.oa=function(){},d.isActive=function(){return!0},d.Ka=function(){};function tu(){}tu.prototype.g=function(B,K){return new Nn(B,K)};function Nn(B,K){Ut.call(this),this.g=new Up(K),this.l=B,this.h=K&&K.messageUrlParams||null,B=K&&K.messageHeaders||null,K&&K.clientProtocolHeaderRequired&&(B?B["X-Client-Protocol"]="webchannel":B={"X-Client-Protocol":"webchannel"}),this.g.o=B,B=K&&K.initMessageHeaders||null,K&&K.messageContentType&&(B?B["X-WebChannel-Content-Type"]=K.messageContentType:B={"X-WebChannel-Content-Type":K.messageContentType}),K&&K.sa&&(B?B["X-WebChannel-Client-Profile"]=K.sa:B={"X-WebChannel-Client-Profile":K.sa}),this.g.U=B,(B=K&&K.Qb)&&!b(B)&&(this.g.u=B),this.A=K&&K.supportsCrossDomainXhr||!1,this.v=K&&K.sendRawJson||!1,(K=K&&K.httpSessionIdParam)&&!b(K)&&(this.g.G=K,B=this.h,B!==null&&K in B&&(B=this.h,K in B&&delete B[K])),this.j=new Ca(this)}f(Nn,Ut),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){mc(this.g)},Nn.prototype.o=function(B){var K=this.g;if(typeof B=="string"){var J={};J.__data__=B,B=J}else this.v&&(J={},J.__data__=Vt(B),B=J);K.i.push(new Et(K.Ya++,B)),K.I==3&&Qh(K)},Nn.prototype.N=function(){this.g.l=null,delete this.j,mc(this.g),delete this.g,Nn.Z.N.call(this)};function Cc(B){bt.call(this),B.__headers__&&(this.headers=B.__headers__,this.statusCode=B.__status__,delete B.__headers__,delete B.__status__);var K=B.__sm__;if(K){t:{for(const J in K){B=J;break t}B=void 0}(this.i=B)&&(B=this.i,K=K!==null&&B in K?K[B]:void 0),this.data=K}else this.data=B}f(Cc,bt);function Ac(){Kt.call(this),this.status=1}f(Ac,Kt);function Ca(B){this.g=B}f(Ca,Sc),Ca.prototype.ra=function(){yt(this.g,"a")},Ca.prototype.qa=function(B){yt(this.g,new Cc(B))},Ca.prototype.pa=function(B){yt(this.g,new Ac)},Ca.prototype.oa=function(){yt(this.g,"b")},tu.prototype.createWebChannel=tu.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,dP=function(){return new tu},cP=function(){return Oe()},fP=ge,zy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fn.NO_ERROR=0,Fn.TIMEOUT=8,Fn.HTTP_ERROR=6,Hv=Fn,ts.COMPLETE="complete",uP=ts,zt.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",Ut.prototype.listen=Ut.prototype.J,nd=zt,Oi.prototype.listenOnce=Oi.prototype.K,Oi.prototype.getLastError=Oi.prototype.Ha,Oi.prototype.getLastErrorCode=Oi.prototype.ya,Oi.prototype.getStatus=Oi.prototype.ca,Oi.prototype.getResponseJson=Oi.prototype.La,Oi.prototype.getResponseText=Oi.prototype.la,Oi.prototype.send=Oi.prototype.ea,Oi.prototype.setWithCredentials=Oi.prototype.Fa,hP=Oi}).apply(typeof Sv<"u"?Sv:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Kn.UNAUTHENTICATED=new Kn(null),Kn.GOOGLE_CREDENTIALS=new Kn("google-credentials-uid"),Kn.FIRST_PARTY=new Kn("first-party-uid"),Kn.MOCK_USER=new Kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc="12.9.0";function iG(d){tc=d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new dg("@firebase/firestore");function bu(){return wh.logLevel}function Xt(d,...t){if(wh.logLevel<=Qe.DEBUG){const i=t.map(hT);wh.debug(`Firestore (${tc}): ${d}`,...i)}}function tn(d,...t){if(wh.logLevel<=Qe.ERROR){const i=t.map(hT);wh.error(`Firestore (${tc}): ${d}`,...i)}}function Mf(d,...t){if(wh.logLevel<=Qe.WARN){const i=t.map(hT);wh.warn(`Firestore (${tc}): ${d}`,...i)}}function hT(d){if(typeof d=="string")return d;try{return(function(i){return JSON.stringify(i)})(d)}catch{return d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(d,t,i){let n="Unexpected state";typeof t=="string"?n=t:i=t,pP(d,n,i)}function pP(d,t,i){let n=`FIRESTORE (${tc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${d.toString(16)})`;if(i!==void 0)try{n+=" CONTEXT: "+JSON.stringify(i)}catch{n+=" CONTEXT: "+i}throw tn(n),new Error(n)}function ye(d,t,i,n){let x="Unexpected state";typeof i=="string"?x=i:n=i,d||pP(t,x,n)}function me(d,t){return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qt extends zr{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class sG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(Kn.UNAUTHENTICATED)))}shutdown(){}}class rG{constructor(t){this.t=t,this.currentUser=Kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){ye(this.o===void 0,42304);let n=this.i;const x=e=>this.i!==n?(n=this.i,i(e)):Promise.resolve();let S=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),S.resolve(),S=new Dr,t.enqueueRetryable((()=>x(this.currentUser)))};const s=()=>{const e=S;t.enqueueRetryable((async()=>{await e.promise,await x(this.currentUser)}))},T=e=>{Xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>T(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?T(e):(Xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),S.resolve(),S=new Dr)}}),0),s()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((n=>this.i!==t?(Xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ye(typeof n.accessToken=="string",31837,{l:n}),new nG(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ye(t===null||typeof t=="string",2055,{h:t}),new Kn(t)}}class aG{constructor(t,i,n){this.P=t,this.T=i,this.I=n,this.type="FirstParty",this.user=Kn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class oG{constructor(t,i,n){this.P=t,this.T=i,this.I=n}getToken(){return Promise.resolve(new aG(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(Kn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rC{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lG{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sr(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){ye(this.o===void 0,3512);const n=S=>{S.error!=null&&Xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${S.error.message}`);const s=S.token!==this.m;return this.m=S.token,Xt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?i(S.token):Promise.resolve()};this.o=S=>{t.enqueueRetryable((()=>n(S)))};const x=S=>{Xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=S,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((S=>x(S))),setTimeout((()=>{if(!this.appCheck){const S=this.V.getImmediate({optional:!0});S?x(S):Xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rC(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(ye(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new rC(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(d){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(d);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let n=0;n<d;n++)i[n]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const x=hG(40);for(let S=0;S<x.length;++S)n.length<20&&x[S]<i&&(n+=t.charAt(x[S]%62))}return n}}function Le(d,t){return d<t?-1:d>t?1:0}function Gy(d,t){const i=Math.min(d.length,t.length);for(let n=0;n<i;n++){const x=d.charAt(n),S=t.charAt(n);if(x!==S)return j0(x)===j0(S)?Le(x,S):j0(x)?1:-1}return Le(d.length,t.length)}const uG=55296,fG=57343;function j0(d){const t=d.charCodeAt(0);return t>=uG&&t<=fG}function Rf(d,t,i){return d.length===t.length&&d.every(((n,x)=>i(n,t[x])))}function vP(d){return d+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="__name__";class jr{constructor(t,i,n){i===void 0?i=0:i>t.length&&pe(637,{offset:i,range:t.length}),n===void 0?n=t.length-i:n>t.length-i&&pe(1746,{length:n,range:t.length-i}),this.segments=t,this.offset=i,this.len=n}get length(){return this.len}isEqual(t){return jr.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof jr?t.forEach((n=>{i.push(n)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,n=this.limit();i<n;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const n=Math.min(t.length,i.length);for(let x=0;x<n;x++){const S=jr.compareSegments(t.get(x),i.get(x));if(S!==0)return S}return Le(t.length,i.length)}static compareSegments(t,i){const n=jr.isNumericId(t),x=jr.isNumericId(i);return n&&!x?-1:!n&&x?1:n&&x?jr.extractNumericId(t).compare(jr.extractNumericId(i)):Gy(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qo.fromString(t.substring(4,t.length-2))}}class di extends jr{construct(t,i,n){return new di(t,i,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const n of t){if(n.indexOf("//")>=0)throw new qt(Bt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);i.push(...n.split("/").filter((x=>x.length>0)))}return new di(i)}static emptyPath(){return new di([])}}const cG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wi extends jr{construct(t,i,n){return new Wi(t,i,n)}static isValidIdentifier(t){return cG.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aC}static keyField(){return new Wi([aC])}static fromServerFormat(t){const i=[];let n="",x=0;const S=()=>{if(n.length===0)throw new qt(Bt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(n),n=""};let s=!1;for(;x<t.length;){const T=t[x];if(T==="\\"){if(x+1===t.length)throw new qt(Bt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[x+1];if(e!=="\\"&&e!=="."&&e!=="`")throw new qt(Bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,x+=2}else T==="`"?(s=!s,x++):T!=="."||s?(n+=T,x++):(S(),x++)}if(S(),s)throw new qt(Bt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Wi(i)}static emptyPath(){return new Wi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.path=t}static fromPath(t){return new re(di.fromString(t))}static fromName(t){return new re(di.fromString(t).popFirst(5))}static empty(){return new re(di.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&di.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return di.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new re(new di(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(d,t,i){if(!i)throw new qt(Bt.INVALID_ARGUMENT,`Function ${d}() cannot be called with an empty ${t}.`)}function dG(d,t,i,n){if(t===!0&&n===!0)throw new qt(Bt.INVALID_ARGUMENT,`${d} and ${i} cannot be used together.`)}function oC(d){if(!re.isDocumentKey(d))throw new qt(Bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${d} has ${d.length}.`)}function lC(d){if(re.isDocumentKey(d))throw new qt(Bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${d} has ${d.length}.`)}function gP(d){return typeof d=="object"&&d!==null&&(Object.getPrototypeOf(d)===Object.prototype||Object.getPrototypeOf(d)===null)}function pg(d){if(d===void 0)return"undefined";if(d===null)return"null";if(typeof d=="string")return d.length>20&&(d=`${d.substring(0,20)}...`),JSON.stringify(d);if(typeof d=="number"||typeof d=="boolean")return""+d;if(typeof d=="object"){if(d instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(d);return t?`a custom ${t} object`:"an object"}}return typeof d=="function"?"a function":pe(12329,{type:typeof d})}function Gs(d,t){if("_delegate"in d&&(d=d._delegate),!(d instanceof t)){if(t.name===d.constructor.name)throw new qt(Bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=pg(d);throw new qt(Bt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return d}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(d,t){const i={typeString:d};return t&&(i.value=t),i}function vp(d,t){if(!gP(d))throw new qt(Bt.INVALID_ARGUMENT,"JSON must be an object");let i;for(const n in t)if(t[n]){const x=t[n].typeString,S="value"in t[n]?{value:t[n].value}:void 0;if(!(n in d)){i=`JSON missing required field: '${n}'`;break}const s=d[n];if(x&&typeof s!==x){i=`JSON field '${n}' must be a ${x}.`;break}if(S!==void 0&&s!==S.value){i=`Expected '${n}' field to equal '${S.value}'`;break}}if(i)throw new qt(Bt.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=-62135596800,uC=1e6;class xi{static now(){return xi.fromMillis(Date.now())}static fromDate(t){return xi.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),n=Math.floor((t-1e3*i)*uC);return new xi(i,n)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new qt(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new qt(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<hC)throw new qt(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qt(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uC}_compareTo(t){return this.seconds===t.seconds?Le(this.nanoseconds,t.nanoseconds):Le(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(vp(t,xi._jsonSchema))return new xi(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-hC;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xi._jsonSchemaVersion="firestore/timestamp/1.0",xi._jsonSchema={type:pn("string",xi._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(t){return new Ae(t)}static min(){return new Ae(new xi(0,0))}static max(){return new Ae(new xi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=-1;class Cm{constructor(t,i,n,x){this.indexId=t,this.collectionGroup=i,this.fields=n,this.indexState=x}}function _y(d){return d.fields.find((t=>t.kind===2))}function _l(d){return d.fields.filter((t=>t.kind!==2))}Cm.UNKNOWN_ID=-1;class Xv{constructor(t,i){this.fieldPath=t,this.kind=i}}class Ud{constructor(t,i){this.sequenceNumber=t,this.offset=i}static empty(){return new Ud(0,Ys.min())}}function xP(d,t){const i=d.toTimestamp().seconds,n=d.toTimestamp().nanoseconds+1,x=Ae.fromTimestamp(n===1e9?new xi(i+1,0):new xi(i,n));return new Ys(x,re.empty(),t)}function yP(d){return new Ys(d.readTime,d.key,Pf)}class Ys{constructor(t,i,n){this.readTime=t,this.documentKey=i,this.largestBatchId=n}static min(){return new Ys(Ae.min(),re.empty(),Pf)}static max(){return new Ys(Ae.max(),re.empty(),Pf)}}function fT(d,t){let i=d.readTime.compareTo(t.readTime);return i!==0?i:(i=re.comparator(d.documentKey,t.documentKey),i!==0?i:Le(d.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(d){if(d.code!==Bt.FAILED_PRECONDITION||d.message!==TP)throw d;Xt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new St(((n,x)=>{this.nextCallback=S=>{this.wrapSuccess(t,S).next(n,x)},this.catchCallback=S=>{this.wrapFailure(i,S).next(n,x)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof St?i:St.resolve(i)}catch(i){return St.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):St.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):St.reject(i)}static resolve(t){return new St(((i,n)=>{i(t)}))}static reject(t){return new St(((i,n)=>{n(t)}))}static waitFor(t){return new St(((i,n)=>{let x=0,S=0,s=!1;t.forEach((T=>{++x,T.next((()=>{++S,s&&S===x&&i()}),(e=>n(e)))})),s=!0,S===x&&i()}))}static or(t){let i=St.resolve(!1);for(const n of t)i=i.next((x=>x?St.resolve(x):n()));return i}static forEach(t,i){const n=[];return t.forEach(((x,S)=>{n.push(i.call(this,x,S))})),this.waitFor(n)}static mapArray(t,i){return new St(((n,x)=>{const S=t.length,s=new Array(S);let T=0;for(let e=0;e<S;e++){const a=e;i(t[a]).next((g=>{s[a]=g,++T,T===S&&n(s)}),(g=>x(g)))}}))}static doWhile(t,i){return new St(((n,x)=>{const S=()=>{t()===!0?i().next((()=>{S()}),x):n()};S()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="SimpleDb";class vg{static open(t,i,n,x){try{return new vg(i,t.transaction(x,n))}catch(S){throw new vd(i,S)}}constructor(t,i){this.action=t,this.transaction=i,this.aborted=!1,this.S=new Dr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{i.error?this.S.reject(new vd(t,i.error)):this.S.resolve()},this.transaction.onerror=n=>{const x=cT(n.target.error);this.S.reject(new vd(t,x))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(Xt(Is,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const i=this.transaction.objectStore(t);return new vG(i)}}class qo{static delete(t){return Xt(Is,"Removing database:",t),kl(kR().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!oT())return!1;if(qo.F())return!0;const t=Sn(),i=qo.M(t),n=0<i&&i<10,x=SP(t),S=0<x&&x<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||S)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,i){return t.store(i)}static M(t){const i=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(t,i,n){this.name=t,this.version=i,this.N=n,this.B=null,qo.M(Sn())===12.2&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(Xt(Is,"Opening database:",this.name),this.db=await new Promise(((i,n)=>{const x=indexedDB.open(this.name,this.version);x.onsuccess=S=>{const s=S.target.result;i(s)},x.onblocked=()=>{n(new vd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},x.onerror=S=>{const s=S.target.error;s.name==="VersionError"?n(new qt(Bt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new qt(Bt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new vd(t,s))},x.onupgradeneeded=S=>{Xt(Is,'Database "'+this.name+'" requires upgrade from version:',S.oldVersion);const s=S.target.result;this.N.k(s,x.transaction,S.oldVersion,this.version).next((()=>{Xt(Is,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=i=>this.K(i)),this.db}q(t){this.K=t,this.db&&(this.db.onversionchange=i=>t(i))}async runTransaction(t,i,n,x){const S=i==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(t);const T=vg.open(this.db,t,S?"readonly":"readwrite",n),e=x(T).next((a=>(T.C(),a))).catch((a=>(T.abort(a),St.reject(a)))).toPromise();return e.catch((()=>{})),await T.D,e}catch(T){const e=T,a=e.name!=="FirebaseError"&&s<3;if(Xt(Is,"Transaction failed with error:",e.message,"Retrying:",a),this.close(),!a)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}function SP(d){const t=d.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}class pG{constructor(t){this.U=t,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(t){this.U=t}done(){this.$=!0}j(t){this.W=t}delete(){return kl(this.U.delete())}}class vd extends qt{constructor(t,i){super(Bt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function gl(d){return d.name==="IndexedDbTransactionError"}class vG{constructor(t){this.store=t}put(t,i){let n;return i!==void 0?(Xt(Is,"PUT",this.store.name,t,i),n=this.store.put(i,t)):(Xt(Is,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),kl(n)}add(t){return Xt(Is,"ADD",this.store.name,t,t),kl(this.store.add(t))}get(t){return kl(this.store.get(t)).next((i=>(i===void 0&&(i=null),Xt(Is,"GET",this.store.name,t,i),i)))}delete(t){return Xt(Is,"DELETE",this.store.name,t),kl(this.store.delete(t))}count(){return Xt(Is,"COUNT",this.store.name),kl(this.store.count())}H(t,i){const n=this.options(t,i),x=n.index?this.store.index(n.index):this.store;if(typeof x.getAll=="function"){const S=x.getAll(n.range);return new St(((s,T)=>{S.onerror=e=>{T(e.target.error)},S.onsuccess=e=>{s(e.target.result)}}))}{const S=this.cursor(n),s=[];return this.J(S,((T,e)=>{s.push(e)})).next((()=>s))}}Z(t,i){const n=this.store.getAll(t,i===null?void 0:i);return new St(((x,S)=>{n.onerror=s=>{S(s.target.error)},n.onsuccess=s=>{x(s.target.result)}}))}X(t,i){Xt(Is,"DELETE ALL",this.store.name);const n=this.options(t,i);n.Y=!1;const x=this.cursor(n);return this.J(x,((S,s,T)=>T.delete()))}ee(t,i){let n;i?n=t:(n={},i=t);const x=this.cursor(n);return this.J(x,i)}te(t){const i=this.cursor({});return new St(((n,x)=>{i.onerror=S=>{const s=cT(S.target.error);x(s)},i.onsuccess=S=>{const s=S.target.result;s?t(s.primaryKey,s.value).next((T=>{T?s.continue():n()})):n()}}))}J(t,i){const n=[];return new St(((x,S)=>{t.onerror=s=>{S(s.target.error)},t.onsuccess=s=>{const T=s.target.result;if(!T)return void x();const e=new pG(T),a=i(T.primaryKey,T.value,e);if(a instanceof St){const g=a.catch((f=>(e.done(),St.reject(f))));n.push(g)}e.isDone?x():e.G===null?T.continue():T.continue(e.G)}})).next((()=>St.waitFor(n)))}options(t,i){let n;return t!==void 0&&(typeof t=="string"?n=t:i=t),{index:n,range:i}}cursor(t){let i="next";if(t.reverse&&(i="prev"),t.index){const n=this.store.index(t.index);return t.Y?n.openKeyCursor(t.range,i):n.openCursor(t.range,i)}return this.store.openCursor(t.range,i)}}function kl(d){return new St(((t,i)=>{d.onsuccess=n=>{const x=n.target.result;t(x)},d.onerror=n=>{const x=cT(n.target.error);i(x)}}))}let fC=!1;function cT(d){const t=qo.M(Sn());if(t>=12.2&&t<13){const i="An internal error was encountered in the Indexed Database server";if(d.message.indexOf(i)>=0){const n=new qt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fC||(fC=!0,setTimeout((()=>{throw n}),0)),n}}return d}const md="IndexBackfiller";class mG{constructor(t,i){this.asyncQueue=t,this.ne=i,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){Xt(md,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const i=await this.ne.ie();Xt(md,`Documents written: ${i}`)}catch(i){gl(i)?Xt(md,"Ignoring IndexedDB error during index backfill: ",i):await ml(i)}await this.re(6e4)}))}}class gG{constructor(t,i){this.localStore=t,this.persistence=i}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(i=>this.se(i,t)))}se(t,i){const n=new Set;let x=i,S=!0;return St.doWhile((()=>S===!0&&x>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((s=>{if(s!==null&&!n.has(s))return Xt(md,`Processing collection: ${s}`),this.oe(t,s,x).next((T=>{x-=T,n.add(s)}));S=!1})))).next((()=>i-x))}oe(t,i,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,i).next((x=>this.localStore.localDocuments.getNextDocuments(t,i,x,n).next((S=>{const s=S.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next((()=>this._e(x,S))).next((T=>(Xt(md,`Updating offset: ${T}`),this.localStore.indexManager.updateCollectionGroup(t,i,T)))).next((()=>s.size))}))))}_e(t,i){let n=t;return i.changes.forEach(((x,S)=>{const s=yP(S);fT(s,n)>0&&(n=s)})),new Ys(n.readTime,n.documentKey,Math.max(i.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>i.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ms.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=-1;function mg(d){return d==null}function Vd(d){return d===0&&1/d==-1/0}function CP(d){return typeof d=="number"&&Number.isInteger(d)&&!Vd(d)&&d<=Number.MAX_SAFE_INTEGER&&d>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="";function qn(d){let t="";for(let i=0;i<d.length;i++)t.length>0&&(t=cC(t)),t=xG(d.get(i),t);return cC(t)}function xG(d,t){let i=t;const n=d.length;for(let x=0;x<n;x++){const S=d.charAt(x);switch(S){case"\0":i+="";break;case Am:i+="";break;default:i+=S}}return i}function cC(d){return d+Am+""}function ra(d){const t=d.length;if(ye(t>=2,64408,{path:d}),t===2)return ye(d.charAt(0)===Am&&d.charAt(1)==="",56145,{path:d}),di.emptyPath();const i=t-2,n=[];let x="";for(let S=0;S<t;){const s=d.indexOf(Am,S);switch((s<0||s>i)&&pe(50515,{path:d}),d.charAt(s+1)){case"":const T=d.substring(S,s);let e;x.length===0?e=T:(x+=T,e=x,x=""),n.push(e);break;case"":x+=d.substring(S,s),x+="\0";break;case"":x+=d.substring(S,s+1);break;default:pe(61167,{path:d})}S=s+2}return new di(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl="remoteDocuments",mp="owner",Su="owner",zd="mutationQueues",yG="userId",wr="mutations",dC="batchId",eh="userMutationsIndex",pC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(d,t){return[d,qn(t)]}function AP(d,t,i){return[d,qn(t),i]}const TG={},bf="documentMutations",wm="remoteDocumentsV14",EG=["prefixPath","collectionGroup","readTime","documentId"],kv="documentKeyIndex",SG=["prefixPath","collectionGroup","documentId"],wP="collectionGroupIndex",CG=["collectionGroup","readTime","prefixPath","documentId"],Gd="remoteDocumentGlobal",Wy="remoteDocumentGlobalKey",If="targets",MP="queryTargetsIndex",AG=["canonicalId","targetId"],Lf="targetDocuments",wG=["targetId","path"],dT="documentTargetsIndex",MG=["path","targetId"],Mm="targetGlobalKey",xh="targetGlobal",_d="collectionParents",RG=["collectionId","parent"],Ff="clientMetadata",PG="clientId",gg="bundles",bG="bundleId",xg="namedQueries",IG="name",pT="indexConfiguration",LG="indexId",Hy="collectionGroupIndex",FG="collectionGroup",gd="indexState",DG=["indexId","uid"],RP="sequenceNumberIndex",OG=["uid","sequenceNumber"],xd="indexEntries",NG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PP="documentKeyIndex",BG=["indexId","uid","orderedDocumentKey"],yg="documentOverlays",UG=["userId","collectionPath","documentId"],Xy="collectionPathOverlayIndex",VG=["userId","collectionPath","largestBatchId"],bP="collectionGroupOverlayIndex",zG=["userId","collectionGroup","largestBatchId"],vT="globals",GG="name",IP=[zd,wr,bf,Wl,If,mp,xh,Lf,Ff,Gd,_d,gg,xg],_G=[...IP,yg],LP=[zd,wr,bf,wm,If,mp,xh,Lf,Ff,Gd,_d,gg,xg,yg],FP=LP,mT=[...FP,pT,gd,xd],WG=mT,DP=[...mT,vT],HG=DP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy extends EP{constructor(t,i){super(),this.le=t,this.currentSequenceNumber=i}}function wn(d,t){const i=me(d);return qo.O(i.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(d){let t=0;for(const i in d)Object.prototype.hasOwnProperty.call(d,i)&&t++;return t}function Wh(d,t){for(const i in d)Object.prototype.hasOwnProperty.call(d,i)&&t(i,d[i])}function OP(d){for(const t in d)if(Object.prototype.hasOwnProperty.call(d,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(t,i){this.comparator=t,this.root=i||Bn.EMPTY}insert(t,i){return new bi(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(t){return new bi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const n=this.comparator(t,i.key);if(n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}indexOf(t){let i=0,n=this.root;for(;!n.isEmpty();){const x=this.comparator(t,n.key);if(x===0)return i+n.left.size;x<0?n=n.left:(i+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,n)=>(t(i,n),!1)))}toString(){const t=[];return this.inorderTraversal(((i,n)=>(t.push(`${i}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Cv(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Cv(this.root,t,this.comparator,!1)}getReverseIterator(){return new Cv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Cv(this.root,t,this.comparator,!0)}}class Cv{constructor(t,i,n,x){this.isReverse=x,this.nodeStack=[];let S=1;for(;!t.isEmpty();)if(S=i?n(t.key,i):1,i&&x&&(S*=-1),S<0)t=this.isReverse?t.left:t.right;else{if(S===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Bn{constructor(t,i,n,x,S){this.key=t,this.value=i,this.color=n??Bn.RED,this.left=x??Bn.EMPTY,this.right=S??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,n,x,S){return new Bn(t??this.key,i??this.value,n??this.color,x??this.left,S??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,n){let x=this;const S=n(t,x.key);return x=S<0?x.copy(null,null,null,x.left.insert(t,i,n),null):S===0?x.copy(null,i,null,null,null):x.copy(null,null,null,null,x.right.insert(t,i,n)),x.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let n,x=this;if(i(t,x.key)<0)x.left.isEmpty()||x.left.isRed()||x.left.left.isRed()||(x=x.moveRedLeft()),x=x.copy(null,null,null,x.left.remove(t,i),null);else{if(x.left.isRed()&&(x=x.rotateRight()),x.right.isEmpty()||x.right.isRed()||x.right.left.isRed()||(x=x.moveRedRight()),i(t,x.key)===0){if(x.right.isEmpty())return Bn.EMPTY;n=x.right.min(),x=x.copy(n.key,n.value,null,null,x.right.removeMin())}x=x.copy(null,null,null,null,x.right.remove(t,i))}return x.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw pe(27949);return t+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(t,i,n,x,S){return this}insert(t,i,n){return new Bn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t){this.comparator=t,this.data=new bi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,n)=>(t(i),!1)))}forEachInRange(t,i){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const x=n.getNext();if(this.comparator(x.key,t[1])>=0)return;i(x.key)}}forEachWhile(t,i){let n;for(n=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new mC(this.data.getIterator())}getIteratorFrom(t){return new mC(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((n=>{i=i.add(n)})),i}isEqual(t){if(!(t instanceof Ti)||this.size!==t.size)return!1;const i=this.data.getIterator(),n=t.data.getIterator();for(;i.hasNext();){const x=i.getNext().key,S=n.getNext().key;if(this.comparator(x,S)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new Ti(this.comparator);return i.data=t,i}}class mC{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cu(d){return d.hasNext()?d.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(t){this.fields=t,t.sort(Wi.comparator)}static empty(){return new lr([])}unionWith(t){let i=new Ti(Wi.comparator);for(const n of this.fields)i=i.add(n);for(const n of t)i=i.add(n);return new lr(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Rf(this.fields,t.fields,((i,n)=>i.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(x){try{return atob(x)}catch(S){throw typeof DOMException<"u"&&S instanceof DOMException?new NP("Invalid base64 string: "+S):S}})(t);return new sn(i)}static fromUint8Array(t){const i=(function(x){let S="";for(let s=0;s<x.length;++s)S+=String.fromCharCode(x[s]);return S})(t);return new sn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const n=new Uint8Array(i.length);for(let x=0;x<i.length;x++)n[x]=i.charCodeAt(x);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Le(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const XG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(d){if(ye(!!d,39018),typeof d=="string"){let t=0;const i=XG.exec(d);if(ye(!!i,46558,{timestamp:d}),i[1]){let x=i[1];x=(x+"000000000").substr(0,9),t=Number(x)}const n=new Date(d);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ni(d.seconds),nanos:Ni(d.nanos)}}function Ni(d){return typeof d=="number"?d:typeof d=="string"?Number(d):0}function ro(d){return typeof d=="string"?sn.fromBase64String(d):sn.fromUint8Array(d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="server_timestamp",UP="__type__",VP="__previous_value__",zP="__local_write_time__";function gT(d){var i,n;return((n=(((i=d==null?void 0:d.mapValue)==null?void 0:i.fields)||{})[UP])==null?void 0:n.stringValue)===BP}function Tg(d){const t=d.mapValue.fields[VP];return gT(t)?Tg(t):t}function Wd(d){const t=so(d.mapValue.fields[zP].timestampValue);return new xi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(t,i,n,x,S,s,T,e,a,g,f){this.databaseId=t,this.appId=i,this.persistenceKey=n,this.host=x,this.ssl=S,this.forceLongPolling=s,this.autoDetectLongPolling=T,this.longPollingOptions=e,this.useFetchStreams=a,this.isUsingEmulator=g,this.apiKey=f}}const Rm="(default)";class Mh{constructor(t,i){this.projectId=t,this.database=i||Rm}static empty(){return new Mh("","")}get isDefaultDatabase(){return this.database===Rm}isEqual(t){return t instanceof Mh&&t.projectId===this.projectId&&t.database===this.database}}function kG(d,t){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new qt(Bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(d.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="__type__",GP="__max__",Wo={mapValue:{fields:{__type__:{stringValue:GP}}}},yT="__vector__",Df="value",$v={nullValue:"NULL_VALUE"};function hl(d){return"nullValue"in d?0:"booleanValue"in d?1:"integerValue"in d||"doubleValue"in d?2:"timestampValue"in d?3:"stringValue"in d?5:"bytesValue"in d?6:"referenceValue"in d?7:"geoPointValue"in d?8:"arrayValue"in d?9:"mapValue"in d?gT(d)?4:_P(d)?9007199254740991:Eg(d)?10:11:pe(28295,{value:d})}function ma(d,t){if(d===t)return!0;const i=hl(d);if(i!==hl(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return d.booleanValue===t.booleanValue;case 4:return Wd(d).isEqual(Wd(t));case 3:return(function(x,S){if(typeof x.timestampValue=="string"&&typeof S.timestampValue=="string"&&x.timestampValue.length===S.timestampValue.length)return x.timestampValue===S.timestampValue;const s=so(x.timestampValue),T=so(S.timestampValue);return s.seconds===T.seconds&&s.nanos===T.nanos})(d,t);case 5:return d.stringValue===t.stringValue;case 6:return(function(x,S){return ro(x.bytesValue).isEqual(ro(S.bytesValue))})(d,t);case 7:return d.referenceValue===t.referenceValue;case 8:return(function(x,S){return Ni(x.geoPointValue.latitude)===Ni(S.geoPointValue.latitude)&&Ni(x.geoPointValue.longitude)===Ni(S.geoPointValue.longitude)})(d,t);case 2:return(function(x,S){if("integerValue"in x&&"integerValue"in S)return Ni(x.integerValue)===Ni(S.integerValue);if("doubleValue"in x&&"doubleValue"in S){const s=Ni(x.doubleValue),T=Ni(S.doubleValue);return s===T?Vd(s)===Vd(T):isNaN(s)&&isNaN(T)}return!1})(d,t);case 9:return Rf(d.arrayValue.values||[],t.arrayValue.values||[],ma);case 10:case 11:return(function(x,S){const s=x.mapValue.fields||{},T=S.mapValue.fields||{};if(vC(s)!==vC(T))return!1;for(const e in s)if(s.hasOwnProperty(e)&&(T[e]===void 0||!ma(s[e],T[e])))return!1;return!0})(d,t);default:return pe(52216,{left:d})}}function Hd(d,t){return(d.values||[]).find((i=>ma(i,t)))!==void 0}function ul(d,t){if(d===t)return 0;const i=hl(d),n=hl(t);if(i!==n)return Le(i,n);switch(i){case 0:case 9007199254740991:return 0;case 1:return Le(d.booleanValue,t.booleanValue);case 2:return(function(S,s){const T=Ni(S.integerValue||S.doubleValue),e=Ni(s.integerValue||s.doubleValue);return T<e?-1:T>e?1:T===e?0:isNaN(T)?isNaN(e)?0:-1:1})(d,t);case 3:return gC(d.timestampValue,t.timestampValue);case 4:return gC(Wd(d),Wd(t));case 5:return Gy(d.stringValue,t.stringValue);case 6:return(function(S,s){const T=ro(S),e=ro(s);return T.compareTo(e)})(d.bytesValue,t.bytesValue);case 7:return(function(S,s){const T=S.split("/"),e=s.split("/");for(let a=0;a<T.length&&a<e.length;a++){const g=Le(T[a],e[a]);if(g!==0)return g}return Le(T.length,e.length)})(d.referenceValue,t.referenceValue);case 8:return(function(S,s){const T=Le(Ni(S.latitude),Ni(s.latitude));return T!==0?T:Le(Ni(S.longitude),Ni(s.longitude))})(d.geoPointValue,t.geoPointValue);case 9:return xC(d.arrayValue,t.arrayValue);case 10:return(function(S,s){var o,u,r,h;const T=S.fields||{},e=s.fields||{},a=(o=T[Df])==null?void 0:o.arrayValue,g=(u=e[Df])==null?void 0:u.arrayValue,f=Le(((r=a==null?void 0:a.values)==null?void 0:r.length)||0,((h=g==null?void 0:g.values)==null?void 0:h.length)||0);return f!==0?f:xC(a,g)})(d.mapValue,t.mapValue);case 11:return(function(S,s){if(S===Wo.mapValue&&s===Wo.mapValue)return 0;if(S===Wo.mapValue)return 1;if(s===Wo.mapValue)return-1;const T=S.fields||{},e=Object.keys(T),a=s.fields||{},g=Object.keys(a);e.sort(),g.sort();for(let f=0;f<e.length&&f<g.length;++f){const o=Gy(e[f],g[f]);if(o!==0)return o;const u=ul(T[e[f]],a[g[f]]);if(u!==0)return u}return Le(e.length,g.length)})(d.mapValue,t.mapValue);default:throw pe(23264,{he:i})}}function gC(d,t){if(typeof d=="string"&&typeof t=="string"&&d.length===t.length)return Le(d,t);const i=so(d),n=so(t),x=Le(i.seconds,n.seconds);return x!==0?x:Le(i.nanos,n.nanos)}function xC(d,t){const i=d.values||[],n=t.values||[];for(let x=0;x<i.length&&x<n.length;++x){const S=ul(i[x],n[x]);if(S)return S}return Le(i.length,n.length)}function Of(d){return ky(d)}function ky(d){return"nullValue"in d?"null":"booleanValue"in d?""+d.booleanValue:"integerValue"in d?""+d.integerValue:"doubleValue"in d?""+d.doubleValue:"timestampValue"in d?(function(i){const n=so(i);return`time(${n.seconds},${n.nanos})`})(d.timestampValue):"stringValue"in d?d.stringValue:"bytesValue"in d?(function(i){return ro(i).toBase64()})(d.bytesValue):"referenceValue"in d?(function(i){return re.fromName(i).toString()})(d.referenceValue):"geoPointValue"in d?(function(i){return`geo(${i.latitude},${i.longitude})`})(d.geoPointValue):"arrayValue"in d?(function(i){let n="[",x=!0;for(const S of i.values||[])x?x=!1:n+=",",n+=ky(S);return n+"]"})(d.arrayValue):"mapValue"in d?(function(i){const n=Object.keys(i.fields||{}).sort();let x="{",S=!0;for(const s of n)S?S=!1:x+=",",x+=`${s}:${ky(i.fields[s])}`;return x+"}"})(d.mapValue):pe(61005,{value:d})}function Kv(d){switch(hl(d)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Tg(d);return t?16+Kv(t):16;case 5:return 2*d.stringValue.length;case 6:return ro(d.bytesValue).approximateByteSize();case 7:return d.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((x,S)=>x+Kv(S)),0)})(d.arrayValue);case 10:case 11:return(function(n){let x=0;return Wh(n.fields,((S,s)=>{x+=S.length+Kv(s)})),x})(d.mapValue);default:throw pe(13486,{value:d})}}function Xd(d,t){return{referenceValue:`projects/${d.projectId}/databases/${d.database}/documents/${t.path.canonicalString()}`}}function $y(d){return!!d&&"integerValue"in d}function Yd(d){return!!d&&"arrayValue"in d}function yC(d){return!!d&&"nullValue"in d}function TC(d){return!!d&&"doubleValue"in d&&isNaN(Number(d.doubleValue))}function jv(d){return!!d&&"mapValue"in d}function Eg(d){var i,n;return((n=(((i=d==null?void 0:d.mapValue)==null?void 0:i.fields)||{})[xT])==null?void 0:n.stringValue)===yT}function yd(d){if(d.geoPointValue)return{geoPointValue:{...d.geoPointValue}};if(d.timestampValue&&typeof d.timestampValue=="object")return{timestampValue:{...d.timestampValue}};if(d.mapValue){const t={mapValue:{fields:{}}};return Wh(d.mapValue.fields,((i,n)=>t.mapValue.fields[i]=yd(n))),t}if(d.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(d.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=yd(d.arrayValue.values[i]);return t}return{...d}}function _P(d){return(((d.mapValue||{}).fields||{}).__type__||{}).stringValue===GP}const WP={mapValue:{fields:{[xT]:{stringValue:yT},[Df]:{arrayValue:{}}}}};function $G(d){return"nullValue"in d?$v:"booleanValue"in d?{booleanValue:!1}:"integerValue"in d||"doubleValue"in d?{doubleValue:NaN}:"timestampValue"in d?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in d?{stringValue:""}:"bytesValue"in d?{bytesValue:""}:"referenceValue"in d?Xd(Mh.empty(),re.empty()):"geoPointValue"in d?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in d?{arrayValue:{}}:"mapValue"in d?Eg(d)?WP:{mapValue:{}}:pe(35942,{value:d})}function KG(d){return"nullValue"in d?{booleanValue:!1}:"booleanValue"in d?{doubleValue:NaN}:"integerValue"in d||"doubleValue"in d?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in d?{stringValue:""}:"stringValue"in d?{bytesValue:""}:"bytesValue"in d?Xd(Mh.empty(),re.empty()):"referenceValue"in d?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in d?{arrayValue:{}}:"arrayValue"in d?WP:"mapValue"in d?Eg(d)?{mapValue:{}}:Wo:pe(61959,{value:d})}function EC(d,t){const i=ul(d.value,t.value);return i!==0?i:d.inclusive&&!t.inclusive?-1:!d.inclusive&&t.inclusive?1:0}function SC(d,t){const i=ul(d.value,t.value);return i!==0?i:d.inclusive&&!t.inclusive?1:!d.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t){this.value=t}static empty(){return new vs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let n=0;n<t.length-1;++n)if(i=(i.mapValue.fields||{})[t.get(n)],!jv(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=yd(i)}setAll(t){let i=Wi.emptyPath(),n={},x=[];t.forEach(((s,T)=>{if(!i.isImmediateParentOf(T)){const e=this.getFieldsMap(i);this.applyChanges(e,n,x),n={},x=[],i=T.popLast()}s?n[T.lastSegment()]=yd(s):x.push(T.lastSegment())}));const S=this.getFieldsMap(i);this.applyChanges(S,n,x)}delete(t){const i=this.field(t.popLast());jv(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return ma(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let n=0;n<t.length;++n){let x=i.mapValue.fields[t.get(n)];jv(x)&&x.mapValue.fields||(x={mapValue:{fields:{}}},i.mapValue.fields[t.get(n)]=x),i=x}return i.mapValue.fields}applyChanges(t,i,n){Wh(i,((x,S)=>t[x]=S));for(const x of n)delete t[x]}clone(){return new vs(yd(this.value))}}function HP(d){const t=[];return Wh(d.fields,((i,n)=>{const x=new Wi([i]);if(jv(n)){const S=HP(n.mapValue).fields;if(S.length===0)t.push(x);else for(const s of S)t.push(x.child(s))}else t.push(x)})),new lr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,i,n,x,S,s,T){this.key=t,this.documentType=i,this.version=n,this.readTime=x,this.createTime=S,this.data=s,this.documentState=T}static newInvalidDocument(t){return new Ki(t,0,Ae.min(),Ae.min(),Ae.min(),vs.empty(),0)}static newFoundDocument(t,i,n,x){return new Ki(t,1,i,Ae.min(),n,x,0)}static newNoDocument(t,i){return new Ki(t,2,i,Ae.min(),Ae.min(),vs.empty(),0)}static newUnknownDocument(t,i){return new Ki(t,3,i,Ae.min(),Ae.min(),vs.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ki&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ki(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t,i){this.position=t,this.inclusive=i}}function CC(d,t,i){let n=0;for(let x=0;x<d.position.length;x++){const S=t[x],s=d.position[x];if(S.field.isKeyField()?n=re.comparator(re.fromName(s.referenceValue),i.key):n=ul(s,i.data.field(S.field)),S.dir==="desc"&&(n*=-1),n!==0)break}return n}function AC(d,t){if(d===null)return t===null;if(t===null||d.inclusive!==t.inclusive||d.position.length!==t.position.length)return!1;for(let i=0;i<d.position.length;i++)if(!ma(d.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(t,i="asc"){this.field=t,this.dir=i}}function jG(d,t){return d.dir===t.dir&&d.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{}class qe extends XP{constructor(t,i,n){super(),this.field=t,this.op=i,this.value=n}static create(t,i,n){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,n):new ZG(t,i,n):i==="array-contains"?new qG(t,n):i==="in"?new ZP(t,n):i==="not-in"?new t_(t,n):i==="array-contains-any"?new e_(t,n):new qe(t,i,n)}static createKeyFieldInFilter(t,i,n){return i==="in"?new JG(t,n):new QG(t,n)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(ul(i,this.value)):i!==null&&hl(this.value)===hl(i)&&this.matchesComparison(ul(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends XP{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new yi(t,i)}matches(t){return Bf(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Bf(d){return d.op==="and"}function Ky(d){return d.op==="or"}function TT(d){return YP(d)&&Bf(d)}function YP(d){for(const t of d.filters)if(t instanceof yi)return!1;return!0}function jy(d){if(d instanceof qe)return d.field.canonicalString()+d.op.toString()+Of(d.value);if(TT(d))return d.filters.map((t=>jy(t))).join(",");{const t=d.filters.map((i=>jy(i))).join(",");return`${d.op}(${t})`}}function kP(d,t){return d instanceof qe?(function(n,x){return x instanceof qe&&n.op===x.op&&n.field.isEqual(x.field)&&ma(n.value,x.value)})(d,t):d instanceof yi?(function(n,x){return x instanceof yi&&n.op===x.op&&n.filters.length===x.filters.length?n.filters.reduce(((S,s,T)=>S&&kP(s,x.filters[T])),!0):!1})(d,t):void pe(19439)}function $P(d,t){const i=d.filters.concat(t);return yi.create(i,d.op)}function KP(d){return d instanceof qe?(function(i){return`${i.field.canonicalString()} ${i.op} ${Of(i.value)}`})(d):d instanceof yi?(function(i){return i.op.toString()+" {"+i.getFilters().map(KP).join(" ,")+"}"})(d):"Filter"}class ZG extends qe{constructor(t,i,n){super(t,i,n),this.key=re.fromName(n.referenceValue)}matches(t){const i=re.comparator(t.key,this.key);return this.matchesComparison(i)}}class JG extends qe{constructor(t,i){super(t,"in",i),this.keys=jP("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class QG extends qe{constructor(t,i){super(t,"not-in",i),this.keys=jP("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function jP(d,t){var i;return(((i=t.arrayValue)==null?void 0:i.values)||[]).map((n=>re.fromName(n.referenceValue)))}class qG extends qe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Yd(i)&&Hd(i.arrayValue,this.value)}}class ZP extends qe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Hd(this.value.arrayValue,i)}}class t_ extends qe{constructor(t,i){super(t,"not-in",i)}matches(t){if(Hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Hd(this.value.arrayValue,i)}}class e_ extends qe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Yd(i)||!i.arrayValue.values)&&i.arrayValue.values.some((n=>Hd(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(t,i=null,n=[],x=[],S=null,s=null,T=null){this.path=t,this.collectionGroup=i,this.orderBy=n,this.filters=x,this.limit=S,this.startAt=s,this.endAt=T,this.Te=null}}function Zy(d,t=null,i=[],n=[],x=null,S=null,s=null){return new i_(d,t,i,n,x,S,s)}function Rh(d){const t=me(d);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((n=>jy(n))).join(","),i+="|ob:",i+=t.orderBy.map((n=>(function(S){return S.field.canonicalString()+S.dir})(n))).join(","),mg(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((n=>Of(n))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((n=>Of(n))).join(",")),t.Te=i}return t.Te}function gp(d,t){if(d.limit!==t.limit||d.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<d.orderBy.length;i++)if(!jG(d.orderBy[i],t.orderBy[i]))return!1;if(d.filters.length!==t.filters.length)return!1;for(let i=0;i<d.filters.length;i++)if(!kP(d.filters[i],t.filters[i]))return!1;return d.collectionGroup===t.collectionGroup&&!!d.path.isEqual(t.path)&&!!AC(d.startAt,t.startAt)&&AC(d.endAt,t.endAt)}function Pm(d){return re.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}function bm(d,t){return d.filters.filter((i=>i instanceof qe&&i.field.isEqual(t)))}function wC(d,t,i){let n=$v,x=!0;for(const S of bm(d,t)){let s=$v,T=!0;switch(S.op){case"<":case"<=":s=$G(S.value);break;case"==":case"in":case">=":s=S.value;break;case">":s=S.value,T=!1;break;case"!=":case"not-in":s=$v}EC({value:n,inclusive:x},{value:s,inclusive:T})<0&&(n=s,x=T)}if(i!==null){for(let S=0;S<d.orderBy.length;++S)if(d.orderBy[S].field.isEqual(t)){const s=i.position[S];EC({value:n,inclusive:x},{value:s,inclusive:i.inclusive})<0&&(n=s,x=i.inclusive);break}}return{value:n,inclusive:x}}function MC(d,t,i){let n=Wo,x=!0;for(const S of bm(d,t)){let s=Wo,T=!0;switch(S.op){case">=":case">":s=KG(S.value),T=!1;break;case"==":case"in":case"<=":s=S.value;break;case"<":s=S.value,T=!1;break;case"!=":case"not-in":s=Wo}SC({value:n,inclusive:x},{value:s,inclusive:T})>0&&(n=s,x=T)}if(i!==null){for(let S=0;S<d.orderBy.length;++S)if(d.orderBy[S].field.isEqual(t)){const s=i.position[S];SC({value:n,inclusive:x},{value:s,inclusive:i.inclusive})>0&&(n=s,x=i.inclusive);break}}return{value:n,inclusive:x}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,i=null,n=[],x=[],S=null,s="F",T=null,e=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=n,this.filters=x,this.limit=S,this.limitType=s,this.startAt=T,this.endAt=e,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function JP(d,t,i,n,x,S,s,T){return new ec(d,t,i,n,x,S,s,T)}function xp(d){return new ec(d)}function RC(d){return d.filters.length===0&&d.limit===null&&d.startAt==null&&d.endAt==null&&(d.explicitOrderBy.length===0||d.explicitOrderBy.length===1&&d.explicitOrderBy[0].field.isKeyField())}function n_(d){return re.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}function QP(d){return d.collectionGroup!==null}function Td(d){const t=me(d);if(t.Ie===null){t.Ie=[];const i=new Set;for(const S of t.explicitOrderBy)t.Ie.push(S),i.add(S.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let T=new Ti(Wi.comparator);return s.filters.forEach((e=>{e.getFlattenedFilters().forEach((a=>{a.isInequality()&&(T=T.add(a.field))}))})),T})(t).forEach((S=>{i.has(S.canonicalString())||S.isKeyField()||t.Ie.push(new kd(S,n))})),i.has(Wi.keyField().canonicalString())||t.Ie.push(new kd(Wi.keyField(),n))}return t.Ie}function _s(d){const t=me(d);return t.Ee||(t.Ee=s_(t,Td(d))),t.Ee}function s_(d,t){if(d.limitType==="F")return Zy(d.path,d.collectionGroup,t,d.filters,d.limit,d.startAt,d.endAt);{t=t.map((x=>{const S=x.dir==="desc"?"asc":"desc";return new kd(x.field,S)}));const i=d.endAt?new Nf(d.endAt.position,d.endAt.inclusive):null,n=d.startAt?new Nf(d.startAt.position,d.startAt.inclusive):null;return Zy(d.path,d.collectionGroup,t,d.filters,d.limit,i,n)}}function Jy(d,t){const i=d.filters.concat([t]);return new ec(d.path,d.collectionGroup,d.explicitOrderBy.slice(),i,d.limit,d.limitType,d.startAt,d.endAt)}function r_(d,t){const i=d.explicitOrderBy.concat([t]);return new ec(d.path,d.collectionGroup,i,d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}function Im(d,t,i){return new ec(d.path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),t,i,d.startAt,d.endAt)}function Sg(d,t){return gp(_s(d),_s(t))&&d.limitType===t.limitType}function qP(d){return`${Rh(_s(d))}|lt:${d.limitType}`}function Iu(d){return`Query(target=${(function(i){let n=i.path.canonicalString();return i.collectionGroup!==null&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map((x=>KP(x))).join(", ")}]`),mg(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map((x=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(x))).join(", ")}]`),i.startAt&&(n+=", startAt: ",n+=i.startAt.inclusive?"b:":"a:",n+=i.startAt.position.map((x=>Of(x))).join(",")),i.endAt&&(n+=", endAt: ",n+=i.endAt.inclusive?"a:":"b:",n+=i.endAt.position.map((x=>Of(x))).join(",")),`Target(${n})`})(_s(d))}; limitType=${d.limitType})`}function yp(d,t){return t.isFoundDocument()&&(function(n,x){const S=x.key.path;return n.collectionGroup!==null?x.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(S):re.isDocumentKey(n.path)?n.path.isEqual(S):n.path.isImmediateParentOf(S)})(d,t)&&(function(n,x){for(const S of Td(n))if(!S.field.isKeyField()&&x.data.field(S.field)===null)return!1;return!0})(d,t)&&(function(n,x){for(const S of n.filters)if(!S.matches(x))return!1;return!0})(d,t)&&(function(n,x){return!(n.startAt&&!(function(s,T,e){const a=CC(s,T,e);return s.inclusive?a<=0:a<0})(n.startAt,Td(n),x)||n.endAt&&!(function(s,T,e){const a=CC(s,T,e);return s.inclusive?a>=0:a>0})(n.endAt,Td(n),x))})(d,t)}function tb(d){return d.collectionGroup||(d.path.length%2==1?d.path.lastSegment():d.path.get(d.path.length-2))}function eb(d){return(t,i)=>{let n=!1;for(const x of Td(d)){const S=a_(x,t,i);if(S!==0)return S;n=n||x.field.isKeyField()}return 0}}function a_(d,t,i){const n=d.field.isKeyField()?re.comparator(t.key,i.key):(function(S,s,T){const e=s.data.field(S),a=T.data.field(S);return e!==null&&a!==null?ul(e,a):pe(42886)})(d.field,t,i);switch(d.dir){case"asc":return n;case"desc":return-1*n;default:return pe(19790,{direction:d.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),n=this.inner[i];if(n!==void 0){for(const[x,S]of n)if(this.equalsFn(x,t))return S}}has(t){return this.get(t)!==void 0}set(t,i){const n=this.mapKeyFn(t),x=this.inner[n];if(x===void 0)return this.inner[n]=[[t,i]],void this.innerSize++;for(let S=0;S<x.length;S++)if(this.equalsFn(x[S][0],t))return void(x[S]=[t,i]);x.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),n=this.inner[i];if(n===void 0)return!1;for(let x=0;x<n.length;x++)if(this.equalsFn(n[x][0],t))return n.length===1?delete this.inner[i]:n.splice(x,1),this.innerSize--,!0;return!1}forEach(t){Wh(this.inner,((i,n)=>{for(const[x,S]of n)t(x,S)}))}isEmpty(){return OP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new bi(re.comparator);function Ns(){return o_}const ib=new bi(re.comparator);function sd(...d){let t=ib;for(const i of d)t=t.insert(i.key,i);return t}function nb(d){let t=ib;return d.forEach(((i,n)=>t=t.insert(i,n.overlayedDocument))),t}function aa(){return Ed()}function sb(){return Ed()}function Ed(){return new ho((d=>d.toString()),((d,t)=>d.isEqual(t)))}const l_=new bi(re.comparator),h_=new Ti(re.comparator);function He(...d){let t=h_;for(const i of d)t=t.add(i);return t}const u_=new Ti(Le);function ET(){return u_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(d,t){if(d.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vd(t)?"-0":t}}function rb(d){return{integerValue:""+d}}function f_(d,t){return CP(t)?rb(t):ST(d,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this._=void 0}}function c_(d,t,i){return d instanceof Uf?(function(x,S){const s={fields:{[UP]:{stringValue:BP},[zP]:{timestampValue:{seconds:x.seconds,nanos:x.nanoseconds}}}};return S&&gT(S)&&(S=Tg(S)),S&&(s.fields[VP]=S),{mapValue:s}})(i,t):d instanceof Vf?ob(d,t):d instanceof zf?lb(d,t):(function(x,S){const s=ab(x,S),T=PC(s)+PC(x.Ae);return $y(s)&&$y(x.Ae)?rb(T):ST(x.serializer,T)})(d,t)}function d_(d,t,i){return d instanceof Vf?ob(d,t):d instanceof zf?lb(d,t):i}function ab(d,t){return d instanceof $d?(function(n){return $y(n)||(function(S){return!!S&&"doubleValue"in S})(n)})(t)?t:{integerValue:0}:null}class Uf extends Cg{}class Vf extends Cg{constructor(t){super(),this.elements=t}}function ob(d,t){const i=hb(t);for(const n of d.elements)i.some((x=>ma(x,n)))||i.push(n);return{arrayValue:{values:i}}}class zf extends Cg{constructor(t){super(),this.elements=t}}function lb(d,t){let i=hb(t);for(const n of d.elements)i=i.filter((x=>!ma(x,n)));return{arrayValue:{values:i}}}class $d extends Cg{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function PC(d){return Ni(d.integerValue||d.doubleValue)}function hb(d){return Yd(d)&&d.arrayValue.values?d.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(t,i){this.field=t,this.transform=i}}function p_(d,t){return d.field.isEqual(t.field)&&(function(n,x){return n instanceof Vf&&x instanceof Vf||n instanceof zf&&x instanceof zf?Rf(n.elements,x.elements,ma):n instanceof $d&&x instanceof $d?ma(n.Ae,x.Ae):n instanceof Uf&&x instanceof Uf})(d.transform,t.transform)}class v_{constructor(t,i){this.version=t,this.transformResults=i}}class Bs{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Bs}static exists(t){return new Bs(void 0,t)}static updateTime(t){return new Bs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Zv(d,t){return d.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(d.updateTime):d.exists===void 0||d.exists===t.isFoundDocument()}class Ag{}function fb(d,t){if(!d.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return d.isNoDocument()?new CT(d.key,Bs.none()):new ic(d.key,d.data,Bs.none());{const i=d.data,n=vs.empty();let x=new Ti(Wi.comparator);for(let S of t.fields)if(!x.has(S)){let s=i.field(S);s===null&&S.length>1&&(S=S.popLast(),s=i.field(S)),s===null?n.delete(S):n.set(S,s),x=x.add(S)}return new xl(d.key,n,new lr(x.toArray()),Bs.none())}}function m_(d,t,i){d instanceof ic?(function(x,S,s){const T=x.value.clone(),e=IC(x.fieldTransforms,S,s.transformResults);T.setAll(e),S.convertToFoundDocument(s.version,T).setHasCommittedMutations()})(d,t,i):d instanceof xl?(function(x,S,s){if(!Zv(x.precondition,S))return void S.convertToUnknownDocument(s.version);const T=IC(x.fieldTransforms,S,s.transformResults),e=S.data;e.setAll(cb(x)),e.setAll(T),S.convertToFoundDocument(s.version,e).setHasCommittedMutations()})(d,t,i):(function(x,S,s){S.convertToNoDocument(s.version).setHasCommittedMutations()})(0,t,i)}function Sd(d,t,i,n){return d instanceof ic?(function(S,s,T,e){if(!Zv(S.precondition,s))return T;const a=S.value.clone(),g=LC(S.fieldTransforms,e,s);return a.setAll(g),s.convertToFoundDocument(s.version,a).setHasLocalMutations(),null})(d,t,i,n):d instanceof xl?(function(S,s,T,e){if(!Zv(S.precondition,s))return T;const a=LC(S.fieldTransforms,e,s),g=s.data;return g.setAll(cb(S)),g.setAll(a),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),T===null?null:T.unionWith(S.fieldMask.fields).unionWith(S.fieldTransforms.map((f=>f.field)))})(d,t,i,n):(function(S,s,T){return Zv(S.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):T})(d,t,i)}function g_(d,t){let i=null;for(const n of d.fieldTransforms){const x=t.data.field(n.field),S=ab(n.transform,x||null);S!=null&&(i===null&&(i=vs.empty()),i.set(n.field,S))}return i||null}function bC(d,t){return d.type===t.type&&!!d.key.isEqual(t.key)&&!!d.precondition.isEqual(t.precondition)&&!!(function(n,x){return n===void 0&&x===void 0||!(!n||!x)&&Rf(n,x,((S,s)=>p_(S,s)))})(d.fieldTransforms,t.fieldTransforms)&&(d.type===0?d.value.isEqual(t.value):d.type!==1||d.data.isEqual(t.data)&&d.fieldMask.isEqual(t.fieldMask))}class ic extends Ag{constructor(t,i,n,x=[]){super(),this.key=t,this.value=i,this.precondition=n,this.fieldTransforms=x,this.type=0}getFieldMask(){return null}}class xl extends Ag{constructor(t,i,n,x,S=[]){super(),this.key=t,this.data=i,this.fieldMask=n,this.precondition=x,this.fieldTransforms=S,this.type=1}getFieldMask(){return this.fieldMask}}function cb(d){const t=new Map;return d.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const n=d.data.field(i);t.set(i,n)}})),t}function IC(d,t,i){const n=new Map;ye(d.length===i.length,32656,{Ve:i.length,de:d.length});for(let x=0;x<i.length;x++){const S=d[x],s=S.transform,T=t.data.field(S.field);n.set(S.field,d_(s,T,i[x]))}return n}function LC(d,t,i){const n=new Map;for(const x of d){const S=x.transform,s=i.data.field(x.field);n.set(x.field,c_(S,s,t))}return n}class CT extends Ag{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class db extends Ag{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(t,i,n,x){this.batchId=t,this.localWriteTime=i,this.baseMutations=n,this.mutations=x}applyToRemoteDocument(t,i){const n=i.mutationResults;for(let x=0;x<this.mutations.length;x++){const S=this.mutations[x];S.key.isEqual(t.key)&&m_(S,t,n[x])}}applyToLocalView(t,i){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(i=Sd(n,t,i,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(i=Sd(n,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const n=sb();return this.mutations.forEach((x=>{const S=t.get(x.key),s=S.overlayedDocument;let T=this.applyToLocalView(s,S.mutatedFields);T=i.has(x.key)?null:T;const e=fb(s,T);e!==null&&n.set(x.key,e),s.isValidDocument()||s.convertToNoDocument(Ae.min())})),n}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),He())}isEqual(t){return this.batchId===t.batchId&&Rf(this.mutations,t.mutations,((i,n)=>bC(i,n)))&&Rf(this.baseMutations,t.baseMutations,((i,n)=>bC(i,n)))}}class wT{constructor(t,i,n,x){this.batch=t,this.commitVersion=i,this.mutationResults=n,this.docVersions=x}static from(t,i,n){ye(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let x=(function(){return l_})();const S=t.mutations;for(let s=0;s<S.length;s++)x=x.insert(S[s].key,n[s].version);return new wT(t,i,n,x)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,ri;function y_(d){switch(d){case Bt.OK:return pe(64938);case Bt.CANCELLED:case Bt.UNKNOWN:case Bt.DEADLINE_EXCEEDED:case Bt.RESOURCE_EXHAUSTED:case Bt.INTERNAL:case Bt.UNAVAILABLE:case Bt.UNAUTHENTICATED:return!1;case Bt.INVALID_ARGUMENT:case Bt.NOT_FOUND:case Bt.ALREADY_EXISTS:case Bt.PERMISSION_DENIED:case Bt.FAILED_PRECONDITION:case Bt.ABORTED:case Bt.OUT_OF_RANGE:case Bt.UNIMPLEMENTED:case Bt.DATA_LOSS:return!0;default:return pe(15467,{code:d})}}function pb(d){if(d===void 0)return tn("GRPC error has no .code"),Bt.UNKNOWN;switch(d){case ln.OK:return Bt.OK;case ln.CANCELLED:return Bt.CANCELLED;case ln.UNKNOWN:return Bt.UNKNOWN;case ln.DEADLINE_EXCEEDED:return Bt.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return Bt.RESOURCE_EXHAUSTED;case ln.INTERNAL:return Bt.INTERNAL;case ln.UNAVAILABLE:return Bt.UNAVAILABLE;case ln.UNAUTHENTICATED:return Bt.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return Bt.INVALID_ARGUMENT;case ln.NOT_FOUND:return Bt.NOT_FOUND;case ln.ALREADY_EXISTS:return Bt.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return Bt.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return Bt.FAILED_PRECONDITION;case ln.ABORTED:return Bt.ABORTED;case ln.OUT_OF_RANGE:return Bt.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return Bt.UNIMPLEMENTED;case ln.DATA_LOSS:return Bt.DATA_LOSS;default:return pe(39323,{code:d})}}(ri=ln||(ln={}))[ri.OK=0]="OK",ri[ri.CANCELLED=1]="CANCELLED",ri[ri.UNKNOWN=2]="UNKNOWN",ri[ri.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ri[ri.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ri[ri.NOT_FOUND=5]="NOT_FOUND",ri[ri.ALREADY_EXISTS=6]="ALREADY_EXISTS",ri[ri.PERMISSION_DENIED=7]="PERMISSION_DENIED",ri[ri.UNAUTHENTICATED=16]="UNAUTHENTICATED",ri[ri.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ri[ri.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ri[ri.ABORTED=10]="ABORTED",ri[ri.OUT_OF_RANGE=11]="OUT_OF_RANGE",ri[ri.UNIMPLEMENTED=12]="UNIMPLEMENTED",ri[ri.INTERNAL=13]="INTERNAL",ri[ri.UNAVAILABLE=14]="UNAVAILABLE",ri[ri.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Qo([4294967295,4294967295],0);function FC(d){const t=T_().encode(d),i=new lP;return i.update(t),new Uint8Array(i.digest())}function DC(d){const t=new DataView(d.buffer),i=t.getUint32(0,!0),n=t.getUint32(4,!0),x=t.getUint32(8,!0),S=t.getUint32(12,!0);return[new Qo([i,n],0),new Qo([x,S],0)]}class RT{constructor(t,i,n){if(this.bitmap=t,this.padding=i,this.hashCount=n,i<0||i>=8)throw new rd(`Invalid padding: ${i}`);if(n<0)throw new rd(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new rd(`Invalid hash count: ${n}`);if(t.length===0&&i!==0)throw new rd(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=Qo.fromNumber(this.ge)}ye(t,i,n){let x=t.add(i.multiply(Qo.fromNumber(n)));return x.compare(E_)===1&&(x=new Qo([x.getBits(0),x.getBits(1)],0)),x.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=FC(t),[n,x]=DC(i);for(let S=0;S<this.hashCount;S++){const s=this.ye(n,x,S);if(!this.we(s))return!1}return!0}static create(t,i,n){const x=t%8==0?0:8-t%8,S=new Uint8Array(Math.ceil(t/8)),s=new RT(S,x,i);return n.forEach((T=>s.insert(T))),s}insert(t){if(this.ge===0)return;const i=FC(t),[n,x]=DC(i);for(let S=0;S<this.hashCount;S++){const s=this.ye(n,x,S);this.be(s)}}be(t){const i=Math.floor(t/8),n=t%8;this.bitmap[i]|=1<<n}}class rd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t,i,n,x,S){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=n,this.documentUpdates=x,this.resolvedLimboDocuments=S}static createSynthesizedRemoteEventForCurrentChange(t,i,n){const x=new Map;return x.set(t,Ep.createSynthesizedTargetChangeForCurrentChange(t,i,n)),new Tp(Ae.min(),x,new bi(Le),Ns(),He())}}class Ep{constructor(t,i,n,x,S){this.resumeToken=t,this.current=i,this.addedDocuments=n,this.modifiedDocuments=x,this.removedDocuments=S}static createSynthesizedTargetChangeForCurrentChange(t,i,n){return new Ep(n,i,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(t,i,n,x){this.Se=t,this.removedTargetIds=i,this.key=n,this.De=x}}class vb{constructor(t,i){this.targetId=t,this.Ce=i}}class mb{constructor(t,i,n=sn.EMPTY_BYTE_STRING,x=null){this.state=t,this.targetIds=i,this.resumeToken=n,this.cause=x}}class OC{constructor(){this.ve=0,this.Fe=NC(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=He(),i=He(),n=He();return this.Fe.forEach(((x,S)=>{switch(S){case 0:t=t.add(x);break;case 2:i=i.add(x);break;case 1:n=n.add(x);break;default:pe(38017,{changeType:S})}})),new Ep(this.Me,this.xe,t,i,n)}Ke(){this.Oe=!1,this.Fe=NC()}qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class S_{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ns(),this.He=Av(),this.Je=Av(),this.Ze=new bi(Le)}Xe(t){for(const i of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const n=this.nt(i);switch(t.state){case 0:this.rt(i)&&n.Le(t.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(t.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(n.Qe(),n.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),n.Le(t.resumeToken));break;default:pe(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((n,x)=>{this.rt(x)&&i(x)}))}st(t){const i=t.targetId,n=t.Ce.count,x=this.ot(i);if(x){const S=x.target;if(Pm(S))if(n===0){const s=new re(S.path);this.et(i,s,Ki.newNoDocument(s,Ae.min()))}else ye(n===1,20013,{expectedCount:n});else{const s=this._t(i);if(s!==n){const T=this.ut(t),e=T?this.ct(T,t,s):1;if(e!==0){this.it(i);const a=e===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,a)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:n="",padding:x=0},hashCount:S=0}=i;let s,T;try{s=ro(n).toUint8Array()}catch(e){if(e instanceof NP)return Mf("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{T=new RT(s,x,S)}catch(e){return Mf(e instanceof rd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return T.ge===0?null:T}ct(t,i,n){return i.Ce.count===n-this.Pt(t,i.targetId)?0:2}Pt(t,i){const n=this.Ge.getRemoteKeysForTarget(i);let x=0;return n.forEach((S=>{const s=this.Ge.ht(),T=`projects/${s.projectId}/databases/${s.database}/documents/${S.path.canonicalString()}`;t.mightContain(T)||(this.et(i,S,null),x++)})),x}Tt(t){const i=new Map;this.ze.forEach(((S,s)=>{const T=this.ot(s);if(T){if(S.current&&Pm(T.target)){const e=new re(T.target.path);this.It(e).has(s)||this.Et(s,e)||this.et(s,e,Ki.newNoDocument(e,t))}S.Be&&(i.set(s,S.ke()),S.Ke())}}));let n=He();this.Je.forEach(((S,s)=>{let T=!0;s.forEachWhile((e=>{const a=this.ot(e);return!a||a.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(n=n.add(S))})),this.je.forEach(((S,s)=>s.setReadTime(t)));const x=new Tp(t,i,this.Ze,this.je,n);return this.je=Ns(),this.He=Av(),this.Je=Av(),this.Ze=new bi(Le),x}Ye(t,i){if(!this.rt(t))return;const n=this.Et(t,i.key)?2:0;this.nt(t).qe(i.key,n),this.je=this.je.insert(i.key,i),this.He=this.He.insert(i.key,this.It(i.key).add(t)),this.Je=this.Je.insert(i.key,this.Rt(i.key).add(t))}et(t,i,n){if(!this.rt(t))return;const x=this.nt(t);this.Et(t,i)?x.qe(i,1):x.Ue(i),this.Je=this.Je.insert(i,this.Rt(i).delete(t)),this.Je=this.Je.insert(i,this.Rt(i).add(t)),n&&(this.je=this.je.insert(i,n))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let i=this.ze.get(t);return i||(i=new OC,this.ze.set(t,i)),i}Rt(t){let i=this.Je.get(t);return i||(i=new Ti(Le),this.Je=this.Je.insert(t,i)),i}It(t){let i=this.He.get(t);return i||(i=new Ti(Le),this.He=this.He.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||Xt("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new OC),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Av(){return new bi(re.comparator)}function NC(){return new bi(re.comparator)}const C_={asc:"ASCENDING",desc:"DESCENDING"},A_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w_={and:"AND",or:"OR"};class M_{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Qy(d,t){return d.useProto3Json||mg(t)?t:{value:t}}function Gf(d,t){return d.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function gb(d,t){return d.useProto3Json?t.toBase64():t.toUint8Array()}function R_(d,t){return Gf(d,t.toTimestamp())}function rs(d){return ye(!!d,49232),Ae.fromTimestamp((function(i){const n=so(i);return new xi(n.seconds,n.nanos)})(d))}function PT(d,t){return qy(d,t).canonicalString()}function qy(d,t){const i=(function(x){return new di(["projects",x.projectId,"databases",x.database])})(d).child("documents");return t===void 0?i:i.child(t)}function xb(d){const t=di.fromString(d);return ye(Rb(t),10190,{key:t.toString()}),t}function Lm(d,t){return PT(d.databaseId,t.path)}function yh(d,t){const i=xb(t);if(i.get(1)!==d.databaseId.projectId)throw new qt(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+d.databaseId.projectId);if(i.get(3)!==d.databaseId.database)throw new qt(Bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+d.databaseId.database);return new re(Eb(i))}function yb(d,t){return PT(d.databaseId,t)}function Tb(d){const t=xb(d);return t.length===4?di.emptyPath():Eb(t)}function t1(d){return new di(["projects",d.databaseId.projectId,"databases",d.databaseId.database]).canonicalString()}function Eb(d){return ye(d.length>4&&d.get(4)==="documents",29091,{key:d.toString()}),d.popFirst(5)}function BC(d,t,i){return{name:Lm(d,t),fields:i.value.mapValue.fields}}function P_(d,t,i){const n=yh(d,t.name),x=rs(t.updateTime),S=t.createTime?rs(t.createTime):Ae.min(),s=new vs({mapValue:{fields:t.fields}}),T=Ki.newFoundDocument(n,x,S,s);return i&&T.setHasCommittedMutations(),i?T.setHasCommittedMutations():T}function b_(d,t){let i;if("targetChange"in t){t.targetChange;const n=(function(a){return a==="NO_CHANGE"?0:a==="ADD"?1:a==="REMOVE"?2:a==="CURRENT"?3:a==="RESET"?4:pe(39313,{state:a})})(t.targetChange.targetChangeType||"NO_CHANGE"),x=t.targetChange.targetIds||[],S=(function(a,g){return a.useProto3Json?(ye(g===void 0||typeof g=="string",58123),sn.fromBase64String(g||"")):(ye(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),sn.fromUint8Array(g||new Uint8Array))})(d,t.targetChange.resumeToken),s=t.targetChange.cause,T=s&&(function(a){const g=a.code===void 0?Bt.UNKNOWN:pb(a.code);return new qt(g,a.message||"")})(s);i=new mb(n,x,S,T||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const x=yh(d,n.document.name),S=rs(n.document.updateTime),s=n.document.createTime?rs(n.document.createTime):Ae.min(),T=new vs({mapValue:{fields:n.document.fields}}),e=Ki.newFoundDocument(x,S,s,T),a=n.targetIds||[],g=n.removedTargetIds||[];i=new Jv(a,g,e.key,e)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const x=yh(d,n.document),S=n.readTime?rs(n.readTime):Ae.min(),s=Ki.newNoDocument(x,S),T=n.removedTargetIds||[];i=new Jv([],T,s.key,s)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const x=yh(d,n.document),S=n.removedTargetIds||[];i=new Jv([],S,x,null)}else{if(!("filter"in t))return pe(11601,{Vt:t});{t.filter;const n=t.filter;n.targetId;const{count:x=0,unchangedNames:S}=n,s=new x_(x,S),T=n.targetId;i=new vb(T,s)}}return i}function Fm(d,t){let i;if(t instanceof ic)i={update:BC(d,t.key,t.value)};else if(t instanceof CT)i={delete:Lm(d,t.key)};else if(t instanceof xl)i={update:BC(d,t.key,t.data),updateMask:N_(t.fieldMask)};else{if(!(t instanceof db))return pe(16599,{dt:t.type});i={verify:Lm(d,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((n=>(function(S,s){const T=s.transform;if(T instanceof Uf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof Vf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof zf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof $d)return{fieldPath:s.field.canonicalString(),increment:T.Ae};throw pe(20930,{transform:s.transform})})(0,n)))),t.precondition.isNone||(i.currentDocument=(function(x,S){return S.updateTime!==void 0?{updateTime:R_(x,S.updateTime)}:S.exists!==void 0?{exists:S.exists}:pe(27497)})(d,t.precondition)),i}function e1(d,t){const i=t.currentDocument?(function(S){return S.updateTime!==void 0?Bs.updateTime(rs(S.updateTime)):S.exists!==void 0?Bs.exists(S.exists):Bs.none()})(t.currentDocument):Bs.none(),n=t.updateTransforms?t.updateTransforms.map((x=>(function(s,T){let e=null;if("setToServerValue"in T)ye(T.setToServerValue==="REQUEST_TIME",16630,{proto:T}),e=new Uf;else if("appendMissingElements"in T){const g=T.appendMissingElements.values||[];e=new Vf(g)}else if("removeAllFromArray"in T){const g=T.removeAllFromArray.values||[];e=new zf(g)}else"increment"in T?e=new $d(s,T.increment):pe(16584,{proto:T});const a=Wi.fromServerFormat(T.fieldPath);return new ub(a,e)})(d,x))):[];if(t.update){t.update.name;const x=yh(d,t.update.name),S=new vs({mapValue:{fields:t.update.fields}});if(t.updateMask){const s=(function(e){const a=e.fieldPaths||[];return new lr(a.map((g=>Wi.fromServerFormat(g))))})(t.updateMask);return new xl(x,S,s,i,n)}return new ic(x,S,i,n)}if(t.delete){const x=yh(d,t.delete);return new CT(x,i)}if(t.verify){const x=yh(d,t.verify);return new db(x,i)}return pe(1463,{proto:t})}function I_(d,t){return d&&d.length>0?(ye(t!==void 0,14353),d.map((i=>(function(x,S){let s=x.updateTime?rs(x.updateTime):rs(S);return s.isEqual(Ae.min())&&(s=rs(S)),new v_(s,x.transformResults||[])})(i,t)))):[]}function Sb(d,t){return{documents:[yb(d,t.path)]}}function Cb(d,t){const i={structuredQuery:{}},n=t.path;let x;t.collectionGroup!==null?(x=n,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(x=n.popLast(),i.structuredQuery.from=[{collectionId:n.lastSegment()}]),i.parent=yb(d,x);const S=(function(a){if(a.length!==0)return Mb(yi.create(a,"and"))})(t.filters);S&&(i.structuredQuery.where=S);const s=(function(a){if(a.length!==0)return a.map((g=>(function(o){return{field:Lu(o.field),direction:F_(o.dir)}})(g)))})(t.orderBy);s&&(i.structuredQuery.orderBy=s);const T=Qy(d,t.limit);return T!==null&&(i.structuredQuery.limit=T),t.startAt&&(i.structuredQuery.startAt=(function(a){return{before:a.inclusive,values:a.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(a){return{before:!a.inclusive,values:a.position}})(t.endAt)),{ft:i,parent:x}}function Ab(d){let t=Tb(d.parent);const i=d.structuredQuery,n=i.from?i.from.length:0;let x=null;if(n>0){ye(n===1,65062);const g=i.from[0];g.allDescendants?x=g.collectionId:t=t.child(g.collectionId)}let S=[];i.where&&(S=(function(f){const o=wb(f);return o instanceof yi&&TT(o)?o.getFilters():[o]})(i.where));let s=[];i.orderBy&&(s=(function(f){return f.map((o=>(function(r){return new kd(Fu(r.field),(function(c){switch(c){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(r.direction))})(o)))})(i.orderBy));let T=null;i.limit&&(T=(function(f){let o;return o=typeof f=="object"?f.value:f,mg(o)?null:o})(i.limit));let e=null;i.startAt&&(e=(function(f){const o=!!f.before,u=f.values||[];return new Nf(u,o)})(i.startAt));let a=null;return i.endAt&&(a=(function(f){const o=!f.before,u=f.values||[];return new Nf(u,o)})(i.endAt)),JP(t,x,s,S,T,"F",e,a)}function L_(d,t){const i=(function(x){switch(x){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:x})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function wb(d){return d.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const n=Fu(i.unaryFilter.field);return qe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const x=Fu(i.unaryFilter.field);return qe.create(x,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const S=Fu(i.unaryFilter.field);return qe.create(S,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Fu(i.unaryFilter.field);return qe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(d):d.fieldFilter!==void 0?(function(i){return qe.create(Fu(i.fieldFilter.field),(function(x){switch(x){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(d):d.compositeFilter!==void 0?(function(i){return yi.create(i.compositeFilter.filters.map((n=>wb(n))),(function(x){switch(x){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(i.compositeFilter.op))})(d):pe(30097,{filter:d})}function F_(d){return C_[d]}function D_(d){return A_[d]}function O_(d){return w_[d]}function Lu(d){return{fieldPath:d.canonicalString()}}function Fu(d){return Wi.fromServerFormat(d.fieldPath)}function Mb(d){return d instanceof qe?(function(i){if(i.op==="=="){if(TC(i.value))return{unaryFilter:{field:Lu(i.field),op:"IS_NAN"}};if(yC(i.value))return{unaryFilter:{field:Lu(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(TC(i.value))return{unaryFilter:{field:Lu(i.field),op:"IS_NOT_NAN"}};if(yC(i.value))return{unaryFilter:{field:Lu(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(i.field),op:D_(i.op),value:i.value}}})(d):d instanceof yi?(function(i){const n=i.getFilters().map((x=>Mb(x)));return n.length===1?n[0]:{compositeFilter:{op:O_(i.op),filters:n}}})(d):pe(54877,{filter:d})}function N_(d){const t=[];return d.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function Rb(d){return d.length>=4&&d.get(0)==="projects"&&d.get(2)==="databases"}function Pb(d){return!!d&&typeof d._toProto=="function"&&d._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,i,n,x,S=Ae.min(),s=Ae.min(),T=sn.EMPTY_BYTE_STRING,e=null){this.target=t,this.targetId=i,this.purpose=n,this.sequenceNumber=x,this.snapshotVersion=S,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=T,this.expectedCount=e}withSequenceNumber(t){return new Ya(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Ya(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(t){this.yt=t}}function B_(d,t){let i;if(t.document)i=P_(d.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const n=re.fromSegments(t.noDocument.path),x=bh(t.noDocument.readTime);i=Ki.newNoDocument(n,x),t.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!t.unknownDocument)return pe(56709);{const n=re.fromSegments(t.unknownDocument.path),x=bh(t.unknownDocument.version);i=Ki.newUnknownDocument(n,x)}}return t.readTime&&i.setReadTime((function(x){const S=new xi(x[0],x[1]);return Ae.fromTimestamp(S)})(t.readTime)),i}function UC(d,t){const i=t.key,n={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:Dm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=(function(S,s){return{name:Lm(S,s.key),fields:s.data.value.mapValue.fields,updateTime:Gf(S,s.version.toTimestamp()),createTime:Gf(S,s.createTime.toTimestamp())}})(d.yt,t);else if(t.isNoDocument())n.noDocument={path:i.path.toArray(),readTime:Ph(t.version)};else{if(!t.isUnknownDocument())return pe(57904,{document:t});n.unknownDocument={path:i.path.toArray(),version:Ph(t.version)}}return n}function Dm(d){const t=d.toTimestamp();return[t.seconds,t.nanoseconds]}function Ph(d){const t=d.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function bh(d){const t=new xi(d.seconds,d.nanoseconds);return Ae.fromTimestamp(t)}function $l(d,t){const i=(t.baseMutations||[]).map((S=>e1(d.yt,S)));for(let S=0;S<t.mutations.length-1;++S){const s=t.mutations[S];if(S+1<t.mutations.length&&t.mutations[S+1].transform!==void 0){const T=t.mutations[S+1];s.updateTransforms=T.transform.fieldTransforms,t.mutations.splice(S+1,1),++S}}const n=t.mutations.map((S=>e1(d.yt,S))),x=xi.fromMillis(t.localWriteTimeMs);return new AT(t.batchId,x,i,n)}function ad(d){const t=bh(d.readTime),i=d.lastLimboFreeSnapshotVersion!==void 0?bh(d.lastLimboFreeSnapshotVersion):Ae.min();let n;return n=(function(S){return S.documents!==void 0})(d.query)?(function(S){const s=S.documents.length;return ye(s===1,1966,{count:s}),_s(xp(Tb(S.documents[0])))})(d.query):(function(S){return _s(Ab(S))})(d.query),new Ya(n,d.targetId,"TargetPurposeListen",d.lastListenSequenceNumber,t,i,sn.fromBase64String(d.resumeToken))}function Ib(d,t){const i=Ph(t.snapshotVersion),n=Ph(t.lastLimboFreeSnapshotVersion);let x;x=Pm(t.target)?Sb(d.yt,t.target):Cb(d.yt,t.target).ft;const S=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Rh(t.target),readTime:i,resumeToken:S,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:x}}function Lb(d){const t=Ab({parent:d.parent,structuredQuery:d.structuredQuery});return d.limitType==="LAST"?Im(t,t.limit,"L"):t}function Z0(d,t){return new MT(t.largestBatchId,e1(d.yt,t.overlayMutation))}function VC(d,t){const i=t.path.lastSegment();return[d,qn(t.path.popLast()),i]}function zC(d,t,i,n){return{indexId:d,uid:t,sequenceNumber:i,readTime:Ph(n.readTime),documentKey:qn(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{getBundleMetadata(t,i){return GC(t).get(i).next((n=>{if(n)return(function(S){return{id:S.bundleId,createTime:bh(S.createTime),version:S.version}})(n)}))}saveBundleMetadata(t,i){return GC(t).put((function(x){return{bundleId:x.id,createTime:Ph(rs(x.createTime)),version:x.version}})(i))}getNamedQuery(t,i){return _C(t).get(i).next((n=>{if(n)return(function(S){return{name:S.name,query:Lb(S.bundledQuery),readTime:bh(S.readTime)}})(n)}))}saveNamedQuery(t,i){return _C(t).put((function(x){return{name:x.name,readTime:Ph(rs(x.readTime)),bundledQuery:x.bundledQuery}})(i))}}function GC(d){return wn(d,gg)}function _C(d){return wn(d,xg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t,i){this.serializer=t,this.userId=i}static wt(t,i){const n=i.uid||"";return new wg(t,n)}getOverlay(t,i){return _c(t).get(VC(this.userId,i)).next((n=>n?Z0(this.serializer,n):null))}getOverlays(t,i){const n=aa();return St.forEach(i,(x=>this.getOverlay(t,x).next((S=>{S!==null&&n.set(x,S)})))).next((()=>n))}saveOverlays(t,i,n){const x=[];return n.forEach(((S,s)=>{const T=new MT(i,s);x.push(this.bt(t,T))})),St.waitFor(x)}removeOverlaysForBatchId(t,i,n){const x=new Set;i.forEach((s=>x.add(qn(s.getCollectionPath()))));const S=[];return x.forEach((s=>{const T=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);S.push(_c(t).X(Xy,T))})),St.waitFor(S)}getOverlaysForCollection(t,i,n){const x=aa(),S=qn(i),s=IDBKeyRange.bound([this.userId,S,n],[this.userId,S,Number.POSITIVE_INFINITY],!0);return _c(t).H(Xy,s).next((T=>{for(const e of T){const a=Z0(this.serializer,e);x.set(a.getKey(),a)}return x}))}getOverlaysForCollectionGroup(t,i,n,x){const S=aa();let s;const T=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return _c(t).ee({index:bP,range:T},((e,a,g)=>{const f=Z0(this.serializer,a);S.size()<x||f.largestBatchId===s?(S.set(f.getKey(),f),s=f.largestBatchId):g.done()})).next((()=>S))}bt(t,i){return _c(t).put((function(x,S,s){const[T,e,a]=VC(S,s.mutation.key);return{userId:S,collectionPath:e,documentId:a,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Fm(x.yt,s.mutation)}})(this.serializer,this.userId,i))}}function _c(d){return wn(d,yg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{St(t){return wn(t,vT)}getSessionToken(t){return this.St(t).get("sessionToken").next((i=>{const n=i==null?void 0:i.value;return n?sn.fromUint8Array(n):sn.EMPTY_BYTE_STRING}))}setSessionToken(t,i){return this.St(t).put({name:"sessionToken",value:i.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){}Dt(t,i){this.Ct(t,i),i.vt()}Ct(t,i){if("nullValue"in t)this.Ft(i,5);else if("booleanValue"in t)this.Ft(i,10),i.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(i,15),i.Mt(Ni(t.integerValue));else if("doubleValue"in t){const n=Ni(t.doubleValue);isNaN(n)?this.Ft(i,13):(this.Ft(i,15),Vd(n)?i.Mt(0):i.Mt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Ft(i,20),typeof n=="string"&&(n=so(n)),i.xt(`${n.seconds||""}`),i.Mt(n.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,i),this.Nt(i);else if("bytesValue"in t)this.Ft(i,30),i.Bt(ro(t.bytesValue)),this.Nt(i);else if("referenceValue"in t)this.Lt(t.referenceValue,i);else if("geoPointValue"in t){const n=t.geoPointValue;this.Ft(i,45),i.Mt(n.latitude||0),i.Mt(n.longitude||0)}else"mapValue"in t?_P(t)?this.Ft(i,Number.MAX_SAFE_INTEGER):Eg(t)?this.kt(t.mapValue,i):(this.Kt(t.mapValue,i),this.Nt(i)):"arrayValue"in t?(this.qt(t.arrayValue,i),this.Nt(i)):pe(19022,{Ut:t})}Ot(t,i){this.Ft(i,25),this.$t(t,i)}$t(t,i){i.xt(t)}Kt(t,i){const n=t.fields||{};this.Ft(i,55);for(const x of Object.keys(n))this.Ot(x,i),this.Ct(n[x],i)}kt(t,i){var s,T;const n=t.fields||{};this.Ft(i,53);const x=Df,S=((T=(s=n[x].arrayValue)==null?void 0:s.values)==null?void 0:T.length)||0;this.Ft(i,15),i.Mt(Ni(S)),this.Ot(x,i),this.Ct(n[x],i)}qt(t,i){const n=t.values||[];this.Ft(i,50);for(const x of n)this.Ct(x,i)}Lt(t,i){this.Ft(i,37),re.fromName(t).path.forEach((n=>{this.Ft(i,60),this.$t(n,i)}))}Ft(t,i){t.Mt(i)}Nt(t){t.Mt(2)}}Kl.Wt=new Kl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=255;function z_(d){if(d===0)return 8;let t=0;return d>>4||(t+=4,d<<=4),d>>6||(t+=2,d<<=2),d>>7||(t+=1),t}function WC(d){const t=64-(function(n){let x=0;for(let S=0;S<8;++S){const s=z_(255&n[S]);if(x+=s,s!==8)break}return x})(d);return Math.ceil(t/8)}class G_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(t){const i=t[Symbol.iterator]();let n=i.next();for(;!n.done;)this.Gt(n.value),n=i.next();this.zt()}jt(t){const i=t[Symbol.iterator]();let n=i.next();for(;!n.done;)this.Ht(n.value),n=i.next();this.Jt()}Zt(t){for(const i of t){const n=i.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const x=i.codePointAt(0);this.Gt(240|x>>>18),this.Gt(128|63&x>>>12),this.Gt(128|63&x>>>6),this.Gt(128|63&x)}}this.zt()}Xt(t){for(const i of t){const n=i.charCodeAt(0);if(n<128)this.Ht(n);else if(n<2048)this.Ht(960|n>>>6),this.Ht(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Ht(480|n>>>12),this.Ht(128|63&n>>>6),this.Ht(128|63&n);else{const x=i.codePointAt(0);this.Ht(240|x>>>18),this.Ht(128|63&x>>>12),this.Ht(128|63&x>>>6),this.Ht(128|63&x)}}this.Jt()}Yt(t){const i=this.en(t),n=WC(i);this.tn(1+n),this.buffer[this.position++]=255&n;for(let x=i.length-n;x<i.length;++x)this.buffer[this.position++]=255&i[x]}nn(t){const i=this.en(t),n=WC(i);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let x=i.length-n;x<i.length;++x)this.buffer[this.position++]=~(255&i[x])}rn(){this.sn(Au),this.sn(255)}_n(){this.an(Au),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const i=(function(S){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,S,!1),new Uint8Array(s.buffer)})(t),n=!!(128&i[0]);i[0]^=n?255:128;for(let x=1;x<i.length;++x)i[x]^=n?255:0;return i}Gt(t){const i=255&t;i===0?(this.sn(0),this.sn(255)):i===Au?(this.sn(Au),this.sn(0)):this.sn(i)}Ht(t){const i=255&t;i===0?(this.an(0),this.an(255)):i===Au?(this.an(Au),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const i=t+this.position;if(i<=this.buffer.length)return;let n=2*this.buffer.length;n<i&&(n=i);const x=new Uint8Array(n);x.set(this.buffer),this.buffer=x}}class __{constructor(t){this.cn=t}Bt(t){this.cn.Qt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.Yt(t)}vt(){this.cn.rn()}}class W_{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Xt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class Wc{constructor(){this.cn=new G_,this.ascending=new __(this.cn),this.descending=new W_(this.cn)}seed(t){this.cn.seed(t)}ln(t){return t===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,i,n,x){this.hn=t,this.Pn=i,this.Tn=n,this.In=x}En(){const t=this.In.length,i=t===0||this.In[t-1]===255?t+1:t,n=new Uint8Array(i);return n.set(this.In,0),i!==t?n.set([0],this.In.length):++n[n.length-1],new jl(this.hn,this.Pn,this.Tn,n)}Rn(t,i,n){return{indexId:this.hn,uid:t,arrayValue:Qv(this.Tn),directionalValue:Qv(this.In),orderedDocumentKey:Qv(i),documentKey:n.path.toArray()}}An(t,i,n){const x=this.Rn(t,i,n);return[x.indexId,x.uid,x.arrayValue,x.directionalValue,x.orderedDocumentKey,x.documentKey]}}function Ro(d,t){let i=d.hn-t.hn;return i!==0?i:(i=HC(d.Tn,t.Tn),i!==0?i:(i=HC(d.In,t.In),i!==0?i:re.comparator(d.Pn,t.Pn)))}function HC(d,t){for(let i=0;i<d.length&&i<t.length;++i){const n=d[i]-t[i];if(n!==0)return n}return d.length-t.length}function Qv(d){return qR()?(function(i){let n="";for(let x=0;x<i.length;x++)n+=String.fromCharCode(i[x]);return n})(d):d}function XC(d){return typeof d!="string"?d:(function(i){const n=new Uint8Array(i.length);for(let x=0;x<i.length;x++)n[x]=i.charCodeAt(x);return n})(d)}class YC{constructor(t){this.Vn=new Ti(((i,n)=>Wi.comparator(i.field,n.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.dn=t.orderBy,this.mn=[];for(const i of t.filters){const n=i;n.isInequality()?this.Vn=this.Vn.add(n):this.mn.push(n)}}get fn(){return this.Vn.size>1}gn(t){if(ye(t.collectionGroup===this.collectionId,49279),this.fn)return!1;const i=_y(t);if(i!==void 0&&!this.pn(i))return!1;const n=_l(t);let x=new Set,S=0,s=0;for(;S<n.length&&this.pn(n[S]);++S)x=x.add(n[S].fieldPath.canonicalString());if(S===n.length)return!0;if(this.Vn.size>0){const T=this.Vn.getIterator().getNext();if(!x.has(T.field.canonicalString())){const e=n[S];if(!this.yn(T,e)||!this.wn(this.dn[s++],e))return!1}++S}for(;S<n.length;++S){const T=n[S];if(s>=this.dn.length||!this.wn(this.dn[s++],T))return!1}return!0}bn(){if(this.fn)return null;let t=new Ti(Wi.comparator);const i=[];for(const n of this.mn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")i.push(new Xv(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),i.push(new Xv(n.field,0))}for(const n of this.dn)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),i.push(new Xv(n.field,n.dir==="asc"?0:1)));return new Cm(Cm.UNKNOWN_ID,this.collectionId,i,Ud.empty())}pn(t){for(const i of this.mn)if(this.yn(i,t))return!0;return!1}yn(t,i){if(t===void 0||!t.field.isEqual(i.fieldPath))return!1;const n=t.op==="array-contains"||t.op==="array-contains-any";return i.kind===2===n}wn(t,i){return!!t.field.isEqual(i.fieldPath)&&(i.kind===0&&t.dir==="asc"||i.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(d){var i,n;if(ye(d instanceof qe||d instanceof yi,20012),d instanceof qe){if(d instanceof ZP){const x=((n=(i=d.value.arrayValue)==null?void 0:i.values)==null?void 0:n.map((S=>qe.create(d.field,"==",S))))||[];return yi.create(x,"or")}return d}const t=d.filters.map((x=>Fb(x)));return yi.create(t,d.op)}function H_(d){if(d.getFilters().length===0)return[];const t=s1(Fb(d));return ye(Db(t),7391),i1(t)||n1(t)?[t]:t.getFilters()}function i1(d){return d instanceof qe}function n1(d){return d instanceof yi&&TT(d)}function Db(d){return i1(d)||n1(d)||(function(i){if(i instanceof yi&&Ky(i)){for(const n of i.getFilters())if(!i1(n)&&!n1(n))return!1;return!0}return!1})(d)}function s1(d){if(ye(d instanceof qe||d instanceof yi,34018),d instanceof qe)return d;if(d.filters.length===1)return s1(d.filters[0]);const t=d.filters.map((n=>s1(n)));let i=yi.create(t,d.op);return i=Om(i),Db(i)?i:(ye(i instanceof yi,64498),ye(Bf(i),40251),ye(i.filters.length>1,57927),i.filters.reduce(((n,x)=>bT(n,x))))}function bT(d,t){let i;return ye(d instanceof qe||d instanceof yi,38388),ye(t instanceof qe||t instanceof yi,25473),i=d instanceof qe?t instanceof qe?(function(x,S){return yi.create([x,S],"and")})(d,t):kC(d,t):t instanceof qe?kC(t,d):(function(x,S){if(ye(x.filters.length>0&&S.filters.length>0,48005),Bf(x)&&Bf(S))return $P(x,S.getFilters());const s=Ky(x)?x:S,T=Ky(x)?S:x,e=s.filters.map((a=>bT(a,T)));return yi.create(e,"or")})(d,t),Om(i)}function kC(d,t){if(Bf(t))return $P(t,d.getFilters());{const i=t.filters.map((n=>bT(d,n)));return yi.create(i,"or")}}function Om(d){if(ye(d instanceof qe||d instanceof yi,11850),d instanceof qe)return d;const t=d.getFilters();if(t.length===1)return Om(t[0]);if(YP(d))return d;const i=t.map((x=>Om(x))),n=[];return i.forEach((x=>{x instanceof qe?n.push(x):x instanceof yi&&(x.op===d.op?n.push(...x.filters):n.push(x))})),n.length===1?n[0]:yi.create(n,d.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(){this.Sn=new IT}addToCollectionParentIndex(t,i){return this.Sn.add(i),St.resolve()}getCollectionParents(t,i){return St.resolve(this.Sn.getEntries(i))}addFieldIndex(t,i){return St.resolve()}deleteFieldIndex(t,i){return St.resolve()}deleteAllFieldIndexes(t){return St.resolve()}createTargetIndexes(t,i){return St.resolve()}getDocumentsMatchingTarget(t,i){return St.resolve(null)}getIndexType(t,i){return St.resolve(0)}getFieldIndexes(t,i){return St.resolve([])}getNextCollectionGroupToUpdate(t){return St.resolve(null)}getMinOffset(t,i){return St.resolve(Ys.min())}getMinOffsetFromCollectionGroup(t,i){return St.resolve(Ys.min())}updateCollectionGroup(t,i,n){return St.resolve()}updateIndexEntries(t,i){return St.resolve()}}class IT{constructor(){this.index={}}add(t){const i=t.lastSegment(),n=t.popLast(),x=this.index[i]||new Ti(di.comparator),S=!x.has(n);return this.index[i]=x.add(n),S}has(t){const i=t.lastSegment(),n=t.popLast(),x=this.index[i];return x&&x.has(n)}getEntries(t){return(this.index[t]||new Ti(di.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="IndexedDbIndexManager",wv=new Uint8Array(0);class Y_{constructor(t,i){this.databaseId=i,this.Dn=new IT,this.Cn=new ho((n=>Rh(n)),((n,x)=>gp(n,x))),this.uid=t.uid||""}addToCollectionParentIndex(t,i){if(!this.Dn.has(i)){const n=i.lastSegment(),x=i.popLast();t.addOnCommittedListener((()=>{this.Dn.add(i)}));const S={collectionId:n,parent:qn(x)};return KC(t).put(S)}return St.resolve()}getCollectionParents(t,i){const n=[],x=IDBKeyRange.bound([i,""],[vP(i),""],!1,!0);return KC(t).H(x).next((S=>{for(const s of S){if(s.collectionId!==i)break;n.push(ra(s.parent))}return n}))}addFieldIndex(t,i){const n=Hc(t),x=(function(T){return{indexId:T.indexId,collectionGroup:T.collectionGroup,fields:T.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}})(i);delete x.indexId;const S=n.add(x);if(i.indexState){const s=Mu(t);return S.next((T=>{s.put(zC(T,this.uid,i.indexState.sequenceNumber,i.indexState.offset))}))}return S.next()}deleteFieldIndex(t,i){const n=Hc(t),x=Mu(t),S=wu(t);return n.delete(i.indexId).next((()=>x.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))).next((()=>S.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const i=Hc(t),n=wu(t),x=Mu(t);return i.X().next((()=>n.X())).next((()=>x.X()))}createTargetIndexes(t,i){return St.forEach(this.vn(i),(n=>this.getIndexType(t,n).next((x=>{if(x===0||x===1){const S=new YC(n).bn();if(S!=null)return this.addFieldIndex(t,S)}}))))}getDocumentsMatchingTarget(t,i){const n=wu(t);let x=!0;const S=new Map;return St.forEach(this.vn(i),(s=>this.Fn(t,s).next((T=>{x&&(x=!!T),S.set(s,T)})))).next((()=>{if(x){let s=He();const T=[];return St.forEach(S,((e,a)=>{Xt($C,`Using index ${(function(m){return`id=${m.indexId}|cg=${m.collectionGroup}|f=${m.fields.map((v=>`${v.fieldPath}:${v.kind}`)).join(",")}`})(e)} to execute ${Rh(i)}`);const g=(function(m,v){const y=_y(v);if(y===void 0)return null;for(const E of bm(m,y.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null})(a,e),f=(function(m,v){const y=new Map;for(const E of _l(v))for(const C of bm(m,E.fieldPath))switch(C.op){case"==":case"in":y.set(E.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return y.set(E.fieldPath.canonicalString(),C.value),Array.from(y.values())}return null})(a,e),o=(function(m,v){const y=[];let E=!0;for(const C of _l(v)){const w=C.kind===0?wC(m,C.fieldPath,m.startAt):MC(m,C.fieldPath,m.startAt);y.push(w.value),E&&(E=w.inclusive)}return new Nf(y,E)})(a,e),u=(function(m,v){const y=[];let E=!0;for(const C of _l(v)){const w=C.kind===0?MC(m,C.fieldPath,m.endAt):wC(m,C.fieldPath,m.endAt);y.push(w.value),E&&(E=w.inclusive)}return new Nf(y,E)})(a,e),r=this.Mn(e,a,o),h=this.Mn(e,a,u),c=this.xn(e,a,f),l=this.On(e.indexId,g,r,o.inclusive,h,u.inclusive,c);return St.forEach(l,(p=>n.Z(p,i.limit).next((m=>{m.forEach((v=>{const y=re.fromSegments(v.documentKey);s.has(y)||(s=s.add(y),T.push(y))}))}))))})).next((()=>T))}return St.resolve(null)}))}vn(t){let i=this.Cn.get(t);return i||(t.filters.length===0?i=[t]:i=H_(yi.create(t.filters,"and")).map((n=>Zy(t.path,t.collectionGroup,t.orderBy,n.getFilters(),t.limit,t.startAt,t.endAt))),this.Cn.set(t,i),i)}On(t,i,n,x,S,s,T){const e=(i!=null?i.length:1)*Math.max(n.length,S.length),a=e/(i!=null?i.length:1),g=[];for(let f=0;f<e;++f){const o=i?this.Nn(i[f/a]):wv,u=this.Bn(t,o,n[f%a],x),r=this.Ln(t,o,S[f%a],s),h=T.map((c=>this.Bn(t,o,c,!0)));g.push(...this.createRange(u,r,h))}return g}Bn(t,i,n,x){const S=new jl(t,re.empty(),i,n);return x?S:S.En()}Ln(t,i,n,x){const S=new jl(t,re.empty(),i,n);return x?S.En():S}Fn(t,i){const n=new YC(i),x=i.collectionGroup!=null?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(t,x).next((S=>{let s=null;for(const T of S)n.gn(T)&&(!s||T.fields.length>s.fields.length)&&(s=T);return s}))}getIndexType(t,i){let n=2;const x=this.vn(i);return St.forEach(x,(S=>this.Fn(t,S).next((s=>{s?n!==0&&s.fields.length<(function(e){let a=new Ti(Wi.comparator),g=!1;for(const f of e.filters)for(const o of f.getFlattenedFilters())o.field.isKeyField()||(o.op==="array-contains"||o.op==="array-contains-any"?g=!0:a=a.add(o.field));for(const f of e.orderBy)f.field.isKeyField()||(a=a.add(f.field));return a.size+(g?1:0)})(S)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(i)&&x.length>1&&n===2?1:n))}kn(t,i){const n=new Wc;for(const x of _l(t)){const S=i.data.field(x.fieldPath);if(S==null)return null;const s=n.ln(x.kind);Kl.Wt.Dt(S,s)}return n.un()}Nn(t){const i=new Wc;return Kl.Wt.Dt(t,i.ln(0)),i.un()}Kn(t,i){const n=new Wc;return Kl.Wt.Dt(Xd(this.databaseId,i),n.ln((function(S){const s=_l(S);return s.length===0?0:s[s.length-1].kind})(t))),n.un()}xn(t,i,n){if(n===null)return[];let x=[];x.push(new Wc);let S=0;for(const s of _l(t)){const T=n[S++];for(const e of x)if(this.qn(i,s.fieldPath)&&Yd(T))x=this.Un(x,s,T);else{const a=e.ln(s.kind);Kl.Wt.Dt(T,a)}}return this.$n(x)}Mn(t,i,n){return this.xn(t,i,n.position)}$n(t){const i=[];for(let n=0;n<t.length;++n)i[n]=t[n].un();return i}Un(t,i,n){const x=[...t],S=[];for(const s of n.arrayValue.values||[])for(const T of x){const e=new Wc;e.seed(T.un()),Kl.Wt.Dt(s,e.ln(i.kind)),S.push(e)}return S}qn(t,i){return!!t.filters.find((n=>n instanceof qe&&n.field.isEqual(i)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(t,i){const n=Hc(t),x=Mu(t);return(i?n.H(Hy,IDBKeyRange.bound(i,i)):n.H()).next((S=>{const s=[];return St.forEach(S,(T=>x.get([T.indexId,this.uid]).next((e=>{s.push((function(g,f){const o=f?new Ud(f.sequenceNumber,new Ys(bh(f.readTime),new re(ra(f.documentKey)),f.largestBatchId)):Ud.empty(),u=g.fields.map((([r,h])=>new Xv(Wi.fromServerFormat(r),h)));return new Cm(g.indexId,g.collectionGroup,u,o)})(T,e))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((i=>i.length===0?null:(i.sort(((n,x)=>{const S=n.indexState.sequenceNumber-x.indexState.sequenceNumber;return S!==0?S:Le(n.collectionGroup,x.collectionGroup)})),i[0].collectionGroup)))}updateCollectionGroup(t,i,n){const x=Hc(t),S=Mu(t);return this.Wn(t).next((s=>x.H(Hy,IDBKeyRange.bound(i,i)).next((T=>St.forEach(T,(e=>S.put(zC(e.indexId,this.uid,s,n))))))))}updateIndexEntries(t,i){const n=new Map;return St.forEach(i,((x,S)=>{const s=n.get(x.collectionGroup);return(s?St.resolve(s):this.getFieldIndexes(t,x.collectionGroup)).next((T=>(n.set(x.collectionGroup,T),St.forEach(T,(e=>this.Qn(t,x,e).next((a=>{const g=this.Gn(S,e);return a.isEqual(g)?St.resolve():this.zn(t,S,e,a,g)})))))))}))}jn(t,i,n,x){return wu(t).put(x.Rn(this.uid,this.Kn(n,i.key),i.key))}Hn(t,i,n,x){return wu(t).delete(x.An(this.uid,this.Kn(n,i.key),i.key))}Qn(t,i,n){const x=wu(t);let S=new Ti(Ro);return x.ee({index:PP,range:IDBKeyRange.only([n.indexId,this.uid,Qv(this.Kn(n,i))])},((s,T)=>{S=S.add(new jl(n.indexId,i,XC(T.arrayValue),XC(T.directionalValue)))})).next((()=>S))}Gn(t,i){let n=new Ti(Ro);const x=this.kn(i,t);if(x==null)return n;const S=_y(i);if(S!=null){const s=t.data.field(S.fieldPath);if(Yd(s))for(const T of s.arrayValue.values||[])n=n.add(new jl(i.indexId,t.key,this.Nn(T),x))}else n=n.add(new jl(i.indexId,t.key,wv,x));return n}zn(t,i,n,x,S){Xt($C,"Updating index entries for document '%s'",i.key);const s=[];return(function(e,a,g,f,o){const u=e.getIterator(),r=a.getIterator();let h=Cu(u),c=Cu(r);for(;h||c;){let l=!1,p=!1;if(h&&c){const m=g(h,c);m<0?p=!0:m>0&&(l=!0)}else h!=null?p=!0:l=!0;l?(f(c),c=Cu(r)):p?(o(h),h=Cu(u)):(h=Cu(u),c=Cu(r))}})(x,S,Ro,(T=>{s.push(this.jn(t,i,n,T))}),(T=>{s.push(this.Hn(t,i,n,T))})),St.waitFor(s)}Wn(t){let i=1;return Mu(t).ee({index:RP,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,x,S)=>{S.done(),i=x.sequenceNumber+1})).next((()=>i))}createRange(t,i,n){n=n.sort(((s,T)=>Ro(s,T))).filter(((s,T,e)=>!T||Ro(s,e[T-1])!==0));const x=[];x.push(t);for(const s of n){const T=Ro(s,t),e=Ro(s,i);if(T===0)x[0]=t.En();else if(T>0&&e<0)x.push(s),x.push(s.En());else if(e>0)break}x.push(i);const S=[];for(let s=0;s<x.length;s+=2){if(this.Jn(x[s],x[s+1]))return[];const T=x[s].An(this.uid,wv,re.empty()),e=x[s+1].An(this.uid,wv,re.empty());S.push(IDBKeyRange.bound(T,e))}return S}Jn(t,i){return Ro(t,i)>0}getMinOffsetFromCollectionGroup(t,i){return this.getFieldIndexes(t,i).next(jC)}getMinOffset(t,i){return St.mapArray(this.vn(i),(n=>this.Fn(t,n).next((x=>x||pe(44426))))).next(jC)}}function KC(d){return wn(d,_d)}function wu(d){return wn(d,xd)}function Hc(d){return wn(d,pT)}function Mu(d){return wn(d,gd)}function jC(d){ye(d.length!==0,28825);let t=d[0].indexState.offset,i=t.largestBatchId;for(let n=1;n<d.length;n++){const x=d[n].indexState.offset;fT(x,t)<0&&(t=x),i<x.largestBatchId&&(i=x.largestBatchId)}return new Ys(t.readTime,t.documentKey,i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ob=41943040;class jn{static withCacheSize(t){return new jn(t,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(d,t,i){const n=d.store(wr),x=d.store(bf),S=[],s=IDBKeyRange.only(i.batchId);let T=0;const e=n.ee({range:s},((g,f,o)=>(T++,o.delete())));S.push(e.next((()=>{ye(T===1,47070,{batchId:i.batchId})})));const a=[];for(const g of i.mutations){const f=AP(t,g.key.path,i.batchId);S.push(x.delete(f)),a.push(g.key)}return St.waitFor(S).next((()=>a))}function Nm(d){if(!d)return 0;let t;if(d.document)t=d.document;else if(d.unknownDocument)t=d.unknownDocument;else{if(!d.noDocument)throw pe(14731);t=d.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(Ob,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);class Mg{constructor(t,i,n,x){this.userId=t,this.serializer=i,this.indexManager=n,this.referenceDelegate=x,this.Zn={}}static wt(t,i,n,x){ye(t.uid!=="",64387);const S=t.isAuthenticated()?t.uid:"";return new Mg(S,i,n,x)}checkEmpty(t){let i=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Po(t).ee({index:eh,range:n},((x,S,s)=>{i=!1,s.done()})).next((()=>i))}addMutationBatch(t,i,n,x){const S=Du(t),s=Po(t);return s.add({}).next((T=>{ye(typeof T=="number",49019);const e=new AT(T,i,n,x),a=(function(u,r,h){const c=h.baseMutations.map((p=>Fm(u.yt,p))),l=h.mutations.map((p=>Fm(u.yt,p)));return{userId:r,batchId:h.batchId,localWriteTimeMs:h.localWriteTime.toMillis(),baseMutations:c,mutations:l}})(this.serializer,this.userId,e),g=[];let f=new Ti(((o,u)=>Le(o.canonicalString(),u.canonicalString())));for(const o of x){const u=AP(this.userId,o.key.path,T);f=f.add(o.key.path.popLast()),g.push(s.put(a)),g.push(S.put(u,TG))}return f.forEach((o=>{g.push(this.indexManager.addToCollectionParentIndex(t,o))})),t.addOnCommittedListener((()=>{this.Zn[T]=e.keys()})),St.waitFor(g).next((()=>e))}))}lookupMutationBatch(t,i){return Po(t).get(i).next((n=>n?(ye(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:i}),$l(this.serializer,n)):null))}Xn(t,i){return this.Zn[i]?St.resolve(this.Zn[i]):this.lookupMutationBatch(t,i).next((n=>{if(n){const x=n.keys();return this.Zn[i]=x,x}return null}))}getNextMutationBatchAfterBatchId(t,i){const n=i+1,x=IDBKeyRange.lowerBound([this.userId,n]);let S=null;return Po(t).ee({index:eh,range:x},((s,T,e)=>{T.userId===this.userId&&(ye(T.batchId>=n,47524,{Yn:n}),S=$l(this.serializer,T)),e.done()})).next((()=>S))}getHighestUnacknowledgedBatchId(t){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=gh;return Po(t).ee({index:eh,range:i,reverse:!0},((x,S,s)=>{n=S.batchId,s.done()})).next((()=>n))}getAllMutationBatches(t){const i=IDBKeyRange.bound([this.userId,gh],[this.userId,Number.POSITIVE_INFINITY]);return Po(t).H(eh,i).next((n=>n.map((x=>$l(this.serializer,x)))))}getAllMutationBatchesAffectingDocumentKey(t,i){const n=Yv(this.userId,i.path),x=IDBKeyRange.lowerBound(n),S=[];return Du(t).ee({range:x},((s,T,e)=>{const[a,g,f]=s,o=ra(g);if(a===this.userId&&i.path.isEqual(o))return Po(t).get(f).next((u=>{if(!u)throw pe(61480,{er:s,batchId:f});ye(u.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:u.userId,batchId:f}),S.push($l(this.serializer,u))}));e.done()})).next((()=>S))}getAllMutationBatchesAffectingDocumentKeys(t,i){let n=new Ti(Le);const x=[];return i.forEach((S=>{const s=Yv(this.userId,S.path),T=IDBKeyRange.lowerBound(s),e=Du(t).ee({range:T},((a,g,f)=>{const[o,u,r]=a,h=ra(u);o===this.userId&&S.path.isEqual(h)?n=n.add(r):f.done()}));x.push(e)})),St.waitFor(x).next((()=>this.tr(t,n)))}getAllMutationBatchesAffectingQuery(t,i){const n=i.path,x=n.length+1,S=Yv(this.userId,n),s=IDBKeyRange.lowerBound(S);let T=new Ti(Le);return Du(t).ee({range:s},((e,a,g)=>{const[f,o,u]=e,r=ra(o);f===this.userId&&n.isPrefixOf(r)?r.length===x&&(T=T.add(u)):g.done()})).next((()=>this.tr(t,T)))}tr(t,i){const n=[],x=[];return i.forEach((S=>{x.push(Po(t).get(S).next((s=>{if(s===null)throw pe(35274,{batchId:S});ye(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:S}),n.push($l(this.serializer,s))})))})),St.waitFor(x).next((()=>n))}removeMutationBatch(t,i){return Nb(t.le,this.userId,i).next((n=>(t.addOnCommittedListener((()=>{this.nr(i.batchId)})),St.forEach(n,(x=>this.referenceDelegate.markPotentiallyOrphaned(t,x))))))}nr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((i=>{if(!i)return St.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),x=[];return Du(t).ee({range:n},((S,s,T)=>{if(S[0]===this.userId){const e=ra(S[1]);x.push(e)}else T.done()})).next((()=>{ye(x.length===0,56720,{rr:x.map((S=>S.canonicalString()))})}))}))}containsKey(t,i){return Bb(t,this.userId,i)}ir(t){return Ub(t).get(this.userId).next((i=>i||{userId:this.userId,lastAcknowledgedBatchId:gh,lastStreamToken:""}))}}function Bb(d,t,i){const n=Yv(t,i.path),x=n[1],S=IDBKeyRange.lowerBound(n);let s=!1;return Du(d).ee({range:S,Y:!0},((T,e,a)=>{const[g,f,o]=T;g===t&&f===x&&(s=!0),a.done()})).next((()=>s))}function Po(d){return wn(d,wr)}function Du(d){return wn(d,bf)}function Ub(d){return wn(d,zd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new Ih(0)}static ar(){return new Ih(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(t,i){this.referenceDelegate=t,this.serializer=i}allocateTargetId(t){return this.ur(t).next((i=>{const n=new Ih(i.highestTargetId);return i.highestTargetId=n.next(),this.cr(t,i).next((()=>i.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.ur(t).next((i=>Ae.fromTimestamp(new xi(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.ur(t).next((i=>i.highestListenSequenceNumber))}setTargetsMetadata(t,i,n){return this.ur(t).next((x=>(x.highestListenSequenceNumber=i,n&&(x.lastRemoteSnapshotVersion=n.toTimestamp()),i>x.highestListenSequenceNumber&&(x.highestListenSequenceNumber=i),this.cr(t,x))))}addTargetData(t,i){return this.lr(t,i).next((()=>this.ur(t).next((n=>(n.targetCount+=1,this.hr(i,n),this.cr(t,n))))))}updateTargetData(t,i){return this.lr(t,i)}removeTargetData(t,i){return this.removeMatchingKeysForTargetId(t,i.targetId).next((()=>Ru(t).delete(i.targetId))).next((()=>this.ur(t))).next((n=>(ye(n.targetCount>0,8065),n.targetCount-=1,this.cr(t,n))))}removeTargets(t,i,n){let x=0;const S=[];return Ru(t).ee(((s,T)=>{const e=ad(T);e.sequenceNumber<=i&&n.get(e.targetId)===null&&(x++,S.push(this.removeTargetData(t,e)))})).next((()=>St.waitFor(S))).next((()=>x))}forEachTarget(t,i){return Ru(t).ee(((n,x)=>{const S=ad(x);i(S)}))}ur(t){return JC(t).get(Mm).next((i=>(ye(i!==null,2888),i)))}cr(t,i){return JC(t).put(Mm,i)}lr(t,i){return Ru(t).put(Ib(this.serializer,i))}hr(t,i){let n=!1;return t.targetId>i.highestTargetId&&(i.highestTargetId=t.targetId,n=!0),t.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.ur(t).next((i=>i.targetCount))}getTargetData(t,i){const n=Rh(i),x=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let S=null;return Ru(t).ee({range:x,index:MP},((s,T,e)=>{const a=ad(T);gp(i,a.target)&&(S=a,e.done())})).next((()=>S))}addMatchingKeys(t,i,n){const x=[],S=Fo(t);return i.forEach((s=>{const T=qn(s.path);x.push(S.put({targetId:n,path:T})),x.push(this.referenceDelegate.addReference(t,n,s))})),St.waitFor(x)}removeMatchingKeys(t,i,n){const x=Fo(t);return St.forEach(i,(S=>{const s=qn(S.path);return St.waitFor([x.delete([n,s]),this.referenceDelegate.removeReference(t,n,S)])}))}removeMatchingKeysForTargetId(t,i){const n=Fo(t),x=IDBKeyRange.bound([i],[i+1],!1,!0);return n.delete(x)}getMatchingKeysForTargetId(t,i){const n=IDBKeyRange.bound([i],[i+1],!1,!0),x=Fo(t);let S=He();return x.ee({range:n,Y:!0},((s,T,e)=>{const a=ra(s[1]),g=new re(a);S=S.add(g)})).next((()=>S))}containsKey(t,i){const n=qn(i.path),x=IDBKeyRange.bound([n],[vP(n)],!1,!0);let S=0;return Fo(t).ee({index:dT,Y:!0,range:x},(([s,T],e,a)=>{s!==0&&(S++,a.done())})).next((()=>S>0))}At(t,i){return Ru(t).get(i).next((n=>n?ad(n):null))}}function Ru(d){return wn(d,If)}function JC(d){return wn(d,xh)}function Fo(d){return wn(d,Lf)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="LruGarbageCollector",Vb=1048576;function qC([d,t],[i,n]){const x=Le(d,i);return x===0?Le(t,n):x}class $_{constructor(t){this.Pr=t,this.buffer=new Ti(qC),this.Tr=0}Ir(){return++this.Tr}Er(t){const i=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(i);else{const n=this.buffer.last();qC(i,n)<0&&(this.buffer=this.buffer.delete(n).add(i))}}get maxValue(){return this.buffer.last()[0]}}class zb{constructor(t,i,n){this.garbageCollector=t,this.asyncQueue=i,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){Xt(QC,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){gl(i)?Xt(QC,"Ignoring IndexedDB error during garbage collection: ",i):await ml(i)}await this.Ar(3e5)}))}}class K_{constructor(t,i){this.Vr=t,this.params=i}calculateTargetCount(t,i){return this.Vr.dr(t).next((n=>Math.floor(i/100*n)))}nthSequenceNumber(t,i){if(i===0)return St.resolve(ms.ce);const n=new $_(i);return this.Vr.forEachTarget(t,(x=>n.Er(x.sequenceNumber))).next((()=>this.Vr.mr(t,(x=>n.Er(x))))).next((()=>n.maxValue))}removeTargets(t,i,n){return this.Vr.removeTargets(t,i,n)}removeOrphanedDocuments(t,i){return this.Vr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(Xt("LruGarbageCollector","Garbage collection skipped; disabled"),St.resolve(ZC)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(Xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZC):this.gr(t,i)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,i){let n,x,S,s,T,e,a;const g=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(Xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),x=this.params.maximumSequenceNumbersToCollect):x=f,s=Date.now(),this.nthSequenceNumber(t,x)))).next((f=>(n=f,T=Date.now(),this.removeTargets(t,n,i)))).next((f=>(S=f,e=Date.now(),this.removeOrphanedDocuments(t,n)))).next((f=>(a=Date.now(),bu()<=Qe.DEBUG&&Xt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-g}ms
	Determined least recently used ${x} in `+(T-s)+`ms
	Removed ${S} targets in `+(e-T)+`ms
	Removed ${f} documents in `+(a-e)+`ms
Total Duration: ${a-g}ms`),St.resolve({didRun:!0,sequenceNumbersCollected:x,targetsRemoved:S,documentsRemoved:f}))))}}function Gb(d,t){return new K_(d,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(t,i){this.db=t,this.garbageCollector=Gb(this,i)}dr(t){const i=this.pr(t);return this.db.getTargetCache().getTargetCount(t).next((n=>i.next((x=>n+x))))}pr(t){let i=0;return this.mr(t,(n=>{i++})).next((()=>i))}forEachTarget(t,i){return this.db.getTargetCache().forEachTarget(t,i)}mr(t,i){return this.yr(t,((n,x)=>i(x)))}addReference(t,i,n){return Mv(t,n)}removeReference(t,i,n){return Mv(t,n)}removeTargets(t,i,n){return this.db.getTargetCache().removeTargets(t,i,n)}markPotentiallyOrphaned(t,i){return Mv(t,i)}wr(t,i){return(function(x,S){let s=!1;return Ub(x).te((T=>Bb(x,T,S).next((e=>(e&&(s=!0),St.resolve(!e)))))).next((()=>s))})(t,i)}removeOrphanedDocuments(t,i){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),x=[];let S=0;return this.yr(t,((s,T)=>{if(T<=i){const e=this.wr(t,s).next((a=>{if(!a)return S++,n.getEntry(t,s).next((()=>(n.removeEntry(s,Ae.min()),Fo(t).delete((function(f){return[0,qn(f.path)]})(s)))))}));x.push(e)}})).next((()=>St.waitFor(x))).next((()=>n.apply(t))).next((()=>S))}removeTarget(t,i){const n=i.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,i){return Mv(t,i)}yr(t,i){const n=Fo(t);let x,S=ms.ce;return n.ee({index:dT},(([s,T],{path:e,sequenceNumber:a})=>{s===0?(S!==ms.ce&&i(new re(ra(x)),S),S=a,x=e):S=ms.ce})).next((()=>{S!==ms.ce&&i(new re(ra(x)),S)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Mv(d,t){return Fo(d).put((function(n,x){return{targetId:0,path:qn(n.path),sequenceNumber:x}})(t,d.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.changes=new ho((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,Ki.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const n=this.changes.get(i);return n!==void 0?St.resolve(n):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,i,n){return Bl(t).put(n)}removeEntry(t,i,n){return Bl(t).delete((function(S,s){const T=S.path.toArray();return[T.slice(0,T.length-2),T[T.length-2],Dm(s),T[T.length-1]]})(i,n))}updateMetadata(t,i){return this.getMetadata(t).next((n=>(n.byteSize+=i,this.br(t,n))))}getEntry(t,i){let n=Ki.newInvalidDocument(i);return Bl(t).ee({index:kv,range:IDBKeyRange.only(Xc(i))},((x,S)=>{n=this.Sr(i,S)})).next((()=>n))}Dr(t,i){let n={size:0,document:Ki.newInvalidDocument(i)};return Bl(t).ee({index:kv,range:IDBKeyRange.only(Xc(i))},((x,S)=>{n={document:this.Sr(i,S),size:Nm(S)}})).next((()=>n))}getEntries(t,i){let n=Ns();return this.Cr(t,i,((x,S)=>{const s=this.Sr(x,S);n=n.insert(x,s)})).next((()=>n))}vr(t,i){let n=Ns(),x=new bi(re.comparator);return this.Cr(t,i,((S,s)=>{const T=this.Sr(S,s);n=n.insert(S,T),x=x.insert(S,Nm(s))})).next((()=>({documents:n,Fr:x})))}Cr(t,i,n){if(i.isEmpty())return St.resolve();let x=new Ti(iA);i.forEach((e=>x=x.add(e)));const S=IDBKeyRange.bound(Xc(x.first()),Xc(x.last())),s=x.getIterator();let T=s.getNext();return Bl(t).ee({index:kv,range:S},((e,a,g)=>{const f=re.fromSegments([...a.prefixPath,a.collectionGroup,a.documentId]);for(;T&&iA(T,f)<0;)n(T,null),T=s.getNext();T&&T.isEqual(f)&&(n(T,a),T=s.hasNext()?s.getNext():null),T?g.j(Xc(T)):g.done()})).next((()=>{for(;T;)n(T,null),T=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(t,i,n,x,S){const s=i.path,T=[s.popLast().toArray(),s.lastSegment(),Dm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],e=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bl(t).H(IDBKeyRange.bound(T,e,!0)).next((a=>{S==null||S.incrementDocumentReadCount(a.length);let g=Ns();for(const f of a){const o=this.Sr(re.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o.isFoundDocument()&&(yp(i,o)||x.has(o.key))&&(g=g.insert(o.key,o))}return g}))}getAllFromCollectionGroup(t,i,n,x){let S=Ns();const s=eA(i,n),T=eA(i,Ys.max());return Bl(t).ee({index:wP,range:IDBKeyRange.bound(s,T,!0)},((e,a,g)=>{const f=this.Sr(re.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);S=S.insert(f.key,f),S.size===x&&g.done()})).next((()=>S))}newChangeBuffer(t){return new J_(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((i=>i.byteSize))}getMetadata(t){return tA(t).get(Wy).next((i=>(ye(!!i,20021),i)))}br(t,i){return tA(t).put(Wy,i)}Sr(t,i){if(i){const n=B_(this.serializer,i);if(!(n.isNoDocument()&&n.version.isEqual(Ae.min())))return n}return Ki.newInvalidDocument(t)}}function Wb(d){return new Z_(d)}class J_ extends _b{constructor(t,i){super(),this.Mr=t,this.trackRemovals=i,this.Or=new ho((n=>n.toString()),((n,x)=>n.isEqual(x)))}applyChanges(t){const i=[];let n=0,x=new Ti(((S,s)=>Le(S.canonicalString(),s.canonicalString())));return this.changes.forEach(((S,s)=>{const T=this.Or.get(S);if(i.push(this.Mr.removeEntry(t,S,T.readTime)),s.isValidDocument()){const e=UC(this.Mr.serializer,s);x=x.add(S.path.popLast());const a=Nm(e);n+=a-T.size,i.push(this.Mr.addEntry(t,S,e))}else if(n-=T.size,this.trackRemovals){const e=UC(this.Mr.serializer,s.convertToNoDocument(Ae.min()));i.push(this.Mr.addEntry(t,S,e))}})),x.forEach((S=>{i.push(this.Mr.indexManager.addToCollectionParentIndex(t,S))})),i.push(this.Mr.updateMetadata(t,n)),St.waitFor(i)}getFromCache(t,i){return this.Mr.Dr(t,i).next((n=>(this.Or.set(i,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(t,i){return this.Mr.vr(t,i).next((({documents:n,Fr:x})=>(x.forEach(((S,s)=>{this.Or.set(S,{size:s,readTime:n.get(S).readTime})})),n)))}}function tA(d){return wn(d,Gd)}function Bl(d){return wn(d,wm)}function Xc(d){const t=d.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function eA(d,t){const i=t.documentKey.path.toArray();return[d,Dm(t.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function iA(d,t){const i=d.path.toArray(),n=t.path.toArray();let x=0;for(let S=0;S<i.length-2&&S<n.length-2;++S)if(x=Le(i[S],n[S]),x)return x;return x=Le(i.length,n.length),x||(x=Le(i[i.length-2],n[n.length-2]),x||Le(i[i.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t,i,n,x){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=n,this.indexManager=x}getDocument(t,i){let n=null;return this.documentOverlayCache.getOverlay(t,i).next((x=>(n=x,this.remoteDocumentCache.getEntry(t,i)))).next((x=>(n!==null&&Sd(n.mutation,x,lr.empty(),xi.now()),x)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((n=>this.getLocalViewOfDocuments(t,n,He()).next((()=>n))))}getLocalViewOfDocuments(t,i,n=He()){const x=aa();return this.populateOverlays(t,x,i).next((()=>this.computeViews(t,i,x,n).next((S=>{let s=sd();return S.forEach(((T,e)=>{s=s.insert(T,e.overlayedDocument)})),s}))))}getOverlayedDocuments(t,i){const n=aa();return this.populateOverlays(t,n,i).next((()=>this.computeViews(t,i,n,He())))}populateOverlays(t,i,n){const x=[];return n.forEach((S=>{i.has(S)||x.push(S)})),this.documentOverlayCache.getOverlays(t,x).next((S=>{S.forEach(((s,T)=>{i.set(s,T)}))}))}computeViews(t,i,n,x){let S=Ns();const s=Ed(),T=(function(){return Ed()})();return i.forEach(((e,a)=>{const g=n.get(a.key);x.has(a.key)&&(g===void 0||g.mutation instanceof xl)?S=S.insert(a.key,a):g!==void 0?(s.set(a.key,g.mutation.getFieldMask()),Sd(g.mutation,a,g.mutation.getFieldMask(),xi.now())):s.set(a.key,lr.empty())})),this.recalculateAndSaveOverlays(t,S).next((e=>(e.forEach(((a,g)=>s.set(a,g))),i.forEach(((a,g)=>T.set(a,new Q_(g,s.get(a)??null)))),T)))}recalculateAndSaveOverlays(t,i){const n=Ed();let x=new bi(((s,T)=>s-T)),S=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((s=>{for(const T of s)T.keys().forEach((e=>{const a=i.get(e);if(a===null)return;let g=n.get(e)||lr.empty();g=T.applyToLocalView(a,g),n.set(e,g);const f=(x.get(T.batchId)||He()).add(e);x=x.insert(T.batchId,f)}))})).next((()=>{const s=[],T=x.getReverseIterator();for(;T.hasNext();){const e=T.getNext(),a=e.key,g=e.value,f=sb();g.forEach((o=>{if(!S.has(o)){const u=fb(i.get(o),n.get(o));u!==null&&f.set(o,u),S=S.add(o)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,f))}return St.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,i,n,x){return n_(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):QP(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,n,x):this.getDocumentsMatchingCollectionQuery(t,i,n,x)}getNextDocuments(t,i,n,x){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,n,x).next((S=>{const s=x-S.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,n.largestBatchId,x-S.size):St.resolve(aa());let T=Pf,e=S;return s.next((a=>St.forEach(a,((g,f)=>(T<f.largestBatchId&&(T=f.largestBatchId),S.get(g)?St.resolve():this.remoteDocumentCache.getEntry(t,g).next((o=>{e=e.insert(g,o)}))))).next((()=>this.populateOverlays(t,a,S))).next((()=>this.computeViews(t,e,a,He()))).next((g=>({batchId:T,changes:nb(g)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new re(i)).next((n=>{let x=sd();return n.isFoundDocument()&&(x=x.insert(n.key,n)),x}))}getDocumentsMatchingCollectionGroupQuery(t,i,n,x){const S=i.collectionGroup;let s=sd();return this.indexManager.getCollectionParents(t,S).next((T=>St.forEach(T,(e=>{const a=(function(f,o){return new ec(o,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(i,e.child(S));return this.getDocumentsMatchingCollectionQuery(t,a,n,x).next((g=>{g.forEach(((f,o)=>{s=s.insert(f,o)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,i,n,x){let S;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,n.largestBatchId).next((s=>(S=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,n,S,x)))).next((s=>{S.forEach(((e,a)=>{const g=a.getKey();s.get(g)===null&&(s=s.insert(g,Ki.newInvalidDocument(g)))}));let T=sd();return s.forEach(((e,a)=>{const g=S.get(e);g!==void 0&&Sd(g.mutation,a,lr.empty(),xi.now()),yp(i,a)&&(T=T.insert(e,a))})),T}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,i){return St.resolve(this.Nr.get(i))}saveBundleMetadata(t,i){return this.Nr.set(i.id,(function(x){return{id:x.id,version:x.version,createTime:rs(x.createTime)}})(i)),St.resolve()}getNamedQuery(t,i){return St.resolve(this.Br.get(i))}saveNamedQuery(t,i){return this.Br.set(i.name,(function(x){return{name:x.name,query:Lb(x.bundledQuery),readTime:rs(x.readTime)}})(i)),St.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(){this.overlays=new bi(re.comparator),this.Lr=new Map}getOverlay(t,i){return St.resolve(this.overlays.get(i))}getOverlays(t,i){const n=aa();return St.forEach(i,(x=>this.getOverlay(t,x).next((S=>{S!==null&&n.set(x,S)})))).next((()=>n))}saveOverlays(t,i,n){return n.forEach(((x,S)=>{this.bt(t,i,S)})),St.resolve()}removeOverlaysForBatchId(t,i,n){const x=this.Lr.get(n);return x!==void 0&&(x.forEach((S=>this.overlays=this.overlays.remove(S))),this.Lr.delete(n)),St.resolve()}getOverlaysForCollection(t,i,n){const x=aa(),S=i.length+1,s=new re(i.child("")),T=this.overlays.getIteratorFrom(s);for(;T.hasNext();){const e=T.getNext().value,a=e.getKey();if(!i.isPrefixOf(a.path))break;a.path.length===S&&e.largestBatchId>n&&x.set(e.getKey(),e)}return St.resolve(x)}getOverlaysForCollectionGroup(t,i,n,x){let S=new bi(((a,g)=>a-g));const s=this.overlays.getIterator();for(;s.hasNext();){const a=s.getNext().value;if(a.getKey().getCollectionGroup()===i&&a.largestBatchId>n){let g=S.get(a.largestBatchId);g===null&&(g=aa(),S=S.insert(a.largestBatchId,g)),g.set(a.getKey(),a)}}const T=aa(),e=S.getIterator();for(;e.hasNext()&&(e.getNext().value.forEach(((a,g)=>T.set(a,g))),!(T.size()>=x)););return St.resolve(T)}bt(t,i,n){const x=this.overlays.get(n.key);if(x!==null){const s=this.Lr.get(x.largestBatchId).delete(n.key);this.Lr.set(x.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new MT(i,n));let S=this.Lr.get(i);S===void 0&&(S=He(),this.Lr.set(i,S)),this.Lr.set(i,S.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(t){return St.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,St.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.kr=new Ti(bn.Kr),this.qr=new Ti(bn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,i){const n=new bn(t,i);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(t,i){t.forEach((n=>this.addReference(n,i)))}removeReference(t,i){this.Wr(new bn(t,i))}Qr(t,i){t.forEach((n=>this.removeReference(n,i)))}Gr(t){const i=new re(new di([])),n=new bn(i,t),x=new bn(i,t+1),S=[];return this.qr.forEachInRange([n,x],(s=>{this.Wr(s),S.push(s.key)})),S}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const i=new re(new di([])),n=new bn(i,t),x=new bn(i,t+1);let S=He();return this.qr.forEachInRange([n,x],(s=>{S=S.add(s.key)})),S}containsKey(t){const i=new bn(t,0),n=this.kr.firstAfterOrEqual(i);return n!==null&&t.isEqual(n.key)}}class bn{constructor(t,i){this.key=t,this.Hr=i}static Kr(t,i){return re.comparator(t.key,i.key)||Le(t.Hr,i.Hr)}static Ur(t,i){return Le(t.Hr,i.Hr)||re.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.Yn=1,this.Jr=new Ti(bn.Kr)}checkEmpty(t){return St.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,n,x){const S=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new AT(S,i,n,x);this.mutationQueue.push(s);for(const T of x)this.Jr=this.Jr.add(new bn(T.key,S)),this.indexManager.addToCollectionParentIndex(t,T.key.path.popLast());return St.resolve(s)}lookupMutationBatch(t,i){return St.resolve(this.Zr(i))}getNextMutationBatchAfterBatchId(t,i){const n=i+1,x=this.Xr(n),S=x<0?0:x;return St.resolve(this.mutationQueue.length>S?this.mutationQueue[S]:null)}getHighestUnacknowledgedBatchId(){return St.resolve(this.mutationQueue.length===0?gh:this.Yn-1)}getAllMutationBatches(t){return St.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const n=new bn(i,0),x=new bn(i,Number.POSITIVE_INFINITY),S=[];return this.Jr.forEachInRange([n,x],(s=>{const T=this.Zr(s.Hr);S.push(T)})),St.resolve(S)}getAllMutationBatchesAffectingDocumentKeys(t,i){let n=new Ti(Le);return i.forEach((x=>{const S=new bn(x,0),s=new bn(x,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([S,s],(T=>{n=n.add(T.Hr)}))})),St.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(t,i){const n=i.path,x=n.length+1;let S=n;re.isDocumentKey(S)||(S=S.child(""));const s=new bn(new re(S),0);let T=new Ti(Le);return this.Jr.forEachWhile((e=>{const a=e.key.path;return!!n.isPrefixOf(a)&&(a.length===x&&(T=T.add(e.Hr)),!0)}),s),St.resolve(this.Yr(T))}Yr(t){const i=[];return t.forEach((n=>{const x=this.Zr(n);x!==null&&i.push(x)})),i}removeMutationBatch(t,i){ye(this.ei(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return St.forEach(i.mutations,(x=>{const S=new bn(x.key,i.batchId);return n=n.delete(S),this.referenceDelegate.markPotentiallyOrphaned(t,x.key)})).next((()=>{this.Jr=n}))}nr(t){}containsKey(t,i){const n=new bn(i,0),x=this.Jr.firstAfterOrEqual(n);return St.resolve(i.isEqual(x&&x.key))}performConsistencyCheck(t){return this.mutationQueue.length,St.resolve()}ei(t,i){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const i=this.Xr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(t){this.ti=t,this.docs=(function(){return new bi(re.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const n=i.key,x=this.docs.get(n),S=x?x.size:0,s=this.ti(i);return this.docs=this.docs.insert(n,{document:i.mutableCopy(),size:s}),this.size+=s-S,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const n=this.docs.get(i);return St.resolve(n?n.document.mutableCopy():Ki.newInvalidDocument(i))}getEntries(t,i){let n=Ns();return i.forEach((x=>{const S=this.docs.get(x);n=n.insert(x,S?S.document.mutableCopy():Ki.newInvalidDocument(x))})),St.resolve(n)}getDocumentsMatchingQuery(t,i,n,x){let S=Ns();const s=i.path,T=new re(s.child("__id-9223372036854775808__")),e=this.docs.getIteratorFrom(T);for(;e.hasNext();){const{key:a,value:{document:g}}=e.getNext();if(!s.isPrefixOf(a.path))break;a.path.length>s.length+1||fT(yP(g),n)<=0||(x.has(g.key)||yp(i,g))&&(S=S.insert(g.key,g.mutableCopy()))}return St.resolve(S)}getAllFromCollectionGroup(t,i,n,x){pe(9500)}ni(t,i){return St.forEach(this.docs,(n=>i(n)))}newChangeBuffer(t){return new sW(this)}getSize(t){return St.resolve(this.size)}}class sW extends _b{constructor(t){super(),this.Mr=t}applyChanges(t){const i=[];return this.changes.forEach(((n,x)=>{x.isValidDocument()?i.push(this.Mr.addEntry(t,x)):this.Mr.removeEntry(n)})),St.waitFor(i)}getFromCache(t,i){return this.Mr.getEntry(t,i)}getAllFromCache(t,i){return this.Mr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(t){this.persistence=t,this.ri=new ho((i=>Rh(i)),gp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ii=0,this.si=new LT,this.targetCount=0,this.oi=Ih._r()}forEachTarget(t,i){return this.ri.forEach(((n,x)=>i(x))),St.resolve()}getLastRemoteSnapshotVersion(t){return St.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return St.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),St.resolve(this.highestTargetId)}setTargetsMetadata(t,i,n){return n&&(this.lastRemoteSnapshotVersion=n),i>this.ii&&(this.ii=i),St.resolve()}lr(t){this.ri.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.oi=new Ih(i),this.highestTargetId=i),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,i){return this.lr(i),this.targetCount+=1,St.resolve()}updateTargetData(t,i){return this.lr(i),St.resolve()}removeTargetData(t,i){return this.ri.delete(i.target),this.si.Gr(i.targetId),this.targetCount-=1,St.resolve()}removeTargets(t,i,n){let x=0;const S=[];return this.ri.forEach(((s,T)=>{T.sequenceNumber<=i&&n.get(T.targetId)===null&&(this.ri.delete(s),S.push(this.removeMatchingKeysForTargetId(t,T.targetId)),x++)})),St.waitFor(S).next((()=>x))}getTargetCount(t){return St.resolve(this.targetCount)}getTargetData(t,i){const n=this.ri.get(i)||null;return St.resolve(n)}addMatchingKeys(t,i,n){return this.si.$r(i,n),St.resolve()}removeMatchingKeys(t,i,n){this.si.Qr(i,n);const x=this.persistence.referenceDelegate,S=[];return x&&i.forEach((s=>{S.push(x.markPotentiallyOrphaned(t,s))})),St.waitFor(S)}removeMatchingKeysForTargetId(t,i){return this.si.Gr(i),St.resolve()}getMatchingKeysForTargetId(t,i){const n=this.si.jr(i);return St.resolve(n)}containsKey(t,i){return St.resolve(this.si.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t,i){this._i={},this.overlays={},this.ai=new ms(0),this.ui=!1,this.ui=!0,this.ci=new eW,this.referenceDelegate=t(this),this.li=new rW(this),this.indexManager=new X_,this.remoteDocumentCache=(function(x){return new nW(x)})((n=>this.referenceDelegate.hi(n))),this.serializer=new bb(i),this.Pi=new q_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new tW,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let n=this._i[t.toKey()];return n||(n=new iW(i,this.referenceDelegate),this._i[t.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,i,n){Xt("MemoryPersistence","Starting transaction:",t);const x=new aW(this.ai.next());return this.referenceDelegate.Ti(),n(x).next((S=>this.referenceDelegate.Ii(x).next((()=>S)))).toPromise().then((S=>(x.raiseOnCommittedEvent(),S)))}Ei(t,i){return St.or(Object.values(this._i).map((n=>()=>n.containsKey(t,i))))}}class aW extends EP{constructor(t){super(),this.currentSequenceNumber=t}}class Rg{constructor(t){this.persistence=t,this.Ri=new LT,this.Ai=null}static Vi(t){return new Rg(t)}get di(){if(this.Ai)return this.Ai;throw pe(60996)}addReference(t,i,n){return this.Ri.addReference(n,i),this.di.delete(n.toString()),St.resolve()}removeReference(t,i,n){return this.Ri.removeReference(n,i),this.di.add(n.toString()),St.resolve()}markPotentiallyOrphaned(t,i){return this.di.add(i.toString()),St.resolve()}removeTarget(t,i){this.Ri.Gr(i.targetId).forEach((x=>this.di.add(x.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,i.targetId).next((x=>{x.forEach((S=>this.di.add(S.toString())))})).next((()=>n.removeTargetData(t,i)))}Ti(){this.Ai=new Set}Ii(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return St.forEach(this.di,(n=>{const x=re.fromPath(n);return this.mi(t,x).next((S=>{S||i.removeEntry(x,Ae.min())}))})).next((()=>(this.Ai=null,i.apply(t))))}updateLimboDocument(t,i){return this.mi(t,i).next((n=>{n?this.di.delete(i.toString()):this.di.add(i.toString())}))}hi(t){return 0}mi(t,i){return St.or([()=>St.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ei(t,i)])}}class Bm{constructor(t,i){this.persistence=t,this.fi=new ho((n=>qn(n.path)),((n,x)=>n.isEqual(x))),this.garbageCollector=Gb(this,i)}static Vi(t,i){return new Bm(t,i)}Ti(){}Ii(t){return St.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}dr(t){const i=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>i.next((x=>n+x))))}pr(t){let i=0;return this.mr(t,(n=>{i++})).next((()=>i))}mr(t,i){return St.forEach(this.fi,((n,x)=>this.wr(t,n,x).next((S=>S?St.resolve():i(x)))))}removeTargets(t,i,n){return this.persistence.getTargetCache().removeTargets(t,i,n)}removeOrphanedDocuments(t,i){let n=0;const x=this.persistence.getRemoteDocumentCache(),S=x.newChangeBuffer();return x.ni(t,(s=>this.wr(t,s,i).next((T=>{T||(n++,S.removeEntry(s,Ae.min()))})))).next((()=>S.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,i){return this.fi.set(i,t.currentSequenceNumber),St.resolve()}removeTarget(t,i){const n=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,i,n){return this.fi.set(n,t.currentSequenceNumber),St.resolve()}removeReference(t,i,n){return this.fi.set(n,t.currentSequenceNumber),St.resolve()}updateLimboDocument(t,i){return this.fi.set(i,t.currentSequenceNumber),St.resolve()}hi(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Kv(t.data.value)),i}wr(t,i,n){return St.or([()=>this.persistence.Ei(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const x=this.fi.get(i);return St.resolve(x!==void 0&&x>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(t){this.serializer=t}k(t,i,n,x){const S=new vg("createOrUpgrade",i);n<1&&x>=1&&((function(e){e.createObjectStore(mp)})(t),(function(e){e.createObjectStore(zd,{keyPath:yG}),e.createObjectStore(wr,{keyPath:dC,autoIncrement:!0}).createIndex(eh,pC,{unique:!0}),e.createObjectStore(bf)})(t),nA(t),(function(e){e.createObjectStore(Wl)})(t));let s=St.resolve();return n<3&&x>=3&&(n!==0&&((function(e){e.deleteObjectStore(Lf),e.deleteObjectStore(If),e.deleteObjectStore(xh)})(t),nA(t)),s=s.next((()=>(function(e){const a=e.store(xh),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ae.min().toTimestamp(),targetCount:0};return a.put(Mm,g)})(S)))),n<4&&x>=4&&(n!==0&&(s=s.next((()=>(function(e,a){return a.store(wr).H().next((f=>{e.deleteObjectStore(wr),e.createObjectStore(wr,{keyPath:dC,autoIncrement:!0}).createIndex(eh,pC,{unique:!0});const o=a.store(wr),u=f.map((r=>o.put(r)));return St.waitFor(u)}))})(t,S)))),s=s.next((()=>{(function(e){e.createObjectStore(Ff,{keyPath:PG})})(t)}))),n<5&&x>=5&&(s=s.next((()=>this.gi(S)))),n<6&&x>=6&&(s=s.next((()=>((function(e){e.createObjectStore(Gd)})(t),this.pi(S))))),n<7&&x>=7&&(s=s.next((()=>this.yi(S)))),n<8&&x>=8&&(s=s.next((()=>this.wi(t,S)))),n<9&&x>=9&&(s=s.next((()=>{(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(t)}))),n<10&&x>=10&&(s=s.next((()=>this.bi(S)))),n<11&&x>=11&&(s=s.next((()=>{(function(e){e.createObjectStore(gg,{keyPath:bG})})(t),(function(e){e.createObjectStore(xg,{keyPath:IG})})(t)}))),n<12&&x>=12&&(s=s.next((()=>{(function(e){const a=e.createObjectStore(yg,{keyPath:UG});a.createIndex(Xy,VG,{unique:!1}),a.createIndex(bP,zG,{unique:!1})})(t)}))),n<13&&x>=13&&(s=s.next((()=>(function(e){const a=e.createObjectStore(wm,{keyPath:EG});a.createIndex(kv,SG),a.createIndex(wP,CG)})(t))).next((()=>this.Si(t,S))).next((()=>t.deleteObjectStore(Wl)))),n<14&&x>=14&&(s=s.next((()=>this.Di(t,S)))),n<15&&x>=15&&(s=s.next((()=>(function(e){e.createObjectStore(pT,{keyPath:LG,autoIncrement:!0}).createIndex(Hy,FG,{unique:!1}),e.createObjectStore(gd,{keyPath:DG}).createIndex(RP,OG,{unique:!1}),e.createObjectStore(xd,{keyPath:NG}).createIndex(PP,BG,{unique:!1})})(t)))),n<16&&x>=16&&(s=s.next((()=>{i.objectStore(gd).clear()})).next((()=>{i.objectStore(xd).clear()}))),n<17&&x>=17&&(s=s.next((()=>{(function(e){e.createObjectStore(vT,{keyPath:GG})})(t)}))),n<18&&x>=18&&qR()&&(s=s.next((()=>{i.objectStore(gd).clear()})).next((()=>{i.objectStore(xd).clear()}))),s}pi(t){let i=0;return t.store(Wl).ee(((n,x)=>{i+=Nm(x)})).next((()=>{const n={byteSize:i};return t.store(Gd).put(Wy,n)}))}gi(t){const i=t.store(zd),n=t.store(wr);return i.H().next((x=>St.forEach(x,(S=>{const s=IDBKeyRange.bound([S.userId,gh],[S.userId,S.lastAcknowledgedBatchId]);return n.H(eh,s).next((T=>St.forEach(T,(e=>{ye(e.userId===S.userId,18650,"Cannot process batch from unexpected user",{batchId:e.batchId});const a=$l(this.serializer,e);return Nb(t,S.userId,a).next((()=>{}))}))))}))))}yi(t){const i=t.store(Lf),n=t.store(Wl);return t.store(xh).get(Mm).next((x=>{const S=[];return n.ee(((s,T)=>{const e=new di(s),a=(function(f){return[0,qn(f)]})(e);S.push(i.get(a).next((g=>g?St.resolve():(f=>i.put({targetId:0,path:qn(f),sequenceNumber:x.highestListenSequenceNumber}))(e))))})).next((()=>St.waitFor(S)))}))}wi(t,i){t.createObjectStore(_d,{keyPath:RG});const n=i.store(_d),x=new IT,S=s=>{if(x.add(s)){const T=s.lastSegment(),e=s.popLast();return n.put({collectionId:T,parent:qn(e)})}};return i.store(Wl).ee({Y:!0},((s,T)=>{const e=new di(s);return S(e.popLast())})).next((()=>i.store(bf).ee({Y:!0},(([s,T,e],a)=>{const g=ra(T);return S(g.popLast())}))))}bi(t){const i=t.store(If);return i.ee(((n,x)=>{const S=ad(x),s=Ib(this.serializer,S);return i.put(s)}))}Si(t,i){const n=i.store(Wl),x=[];return n.ee(((S,s)=>{const T=i.store(wm),e=(function(f){return f.document?new re(di.fromString(f.document.name).popFirst(5)):f.noDocument?re.fromSegments(f.noDocument.path):f.unknownDocument?re.fromSegments(f.unknownDocument.path):pe(36783)})(s).path.toArray(),a={prefixPath:e.slice(0,e.length-2),collectionGroup:e[e.length-2],documentId:e[e.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};x.push(T.put(a))})).next((()=>St.waitFor(x)))}Di(t,i){const n=i.store(wr),x=Wb(this.serializer),S=new FT(Rg.Vi,this.serializer.yt);return n.H().next((s=>{const T=new Map;return s.forEach((e=>{let a=T.get(e.userId)??He();$l(this.serializer,e).keys().forEach((g=>a=a.add(g))),T.set(e.userId,a)})),St.forEach(T,((e,a)=>{const g=new Kn(a),f=wg.wt(this.serializer,g),o=S.getIndexManager(g),u=Mg.wt(g,this.serializer,o,S.referenceDelegate);return new Hb(x,u,f,o).recalculateAndSaveOverlaysForDocumentKeys(new Yy(i,ms.ce),e).next()}))}))}}function nA(d){d.createObjectStore(Lf,{keyPath:wG}).createIndex(dT,MG,{unique:!0}),d.createObjectStore(If,{keyPath:"targetId"}).createIndex(MP,AG,{unique:!0}),d.createObjectStore(xh)}const bo="IndexedDbPersistence",J0=18e5,Q0=5e3,q0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lW="main";class DT{constructor(t,i,n,x,S,s,T,e,a,g,f=18){if(this.allowTabSynchronization=t,this.persistenceKey=i,this.clientId=n,this.Ci=S,this.window=s,this.document=T,this.Fi=a,this.Mi=g,this.xi=f,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=o=>Promise.resolve(),!DT.v())throw new qt(Bt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new j_(this,x),this.Ki=i+lW,this.serializer=new bb(e),this.qi=new qo(this.Ki,this.xi,new oW(this.serializer)),this.ci=new V_,this.li=new k_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wb(this.serializer),this.Pi=new U_,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,g===!1&&tn(bo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qt(Bt.FAILED_PRECONDITION,q0);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.li.getHighestSequenceNumber(t)))})).then((t=>{this.ai=new ms(t,this.Fi)})).then((()=>{this.ui=!0})).catch((t=>(this.qi&&this.qi.close(),Promise.reject(t))))}zi(t){return this.ki=async i=>{if(this.started)return t(i)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.qi.q((async i=>{i.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Rv(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(t).next((i=>{i||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(t))).next((i=>this.isPrimary&&!i?this.Ji(t).next((()=>!1)):!!i&&this.Zi(t).next((()=>!0)))))).catch((t=>{if(gl(t))return Xt(bo,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Xt(bo,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Ci.enqueueRetryable((()=>this.ki(t))),this.isPrimary=t}))}ji(t){return Yc(t).get(Su).next((i=>St.resolve(this.Xi(i))))}Yi(t){return Rv(t).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,J0)){this.Li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(i=>{const n=wn(i,Ff);return n.H().next((x=>{const S=this.ns(x,J0),s=x.filter((T=>S.indexOf(T)===-1));return St.forEach(s,(T=>n.delete(T.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ui)for(const i of t)this.Ui.removeItem(this.rs(i.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.Mi?St.resolve(!0):Yc(t).get(Su).next((i=>{if(i!==null&&this.ts(i.leaseTimestampMs,Q0)&&!this.ss(i.ownerId)){if(this.Xi(i)&&this.networkEnabled)return!0;if(!this.Xi(i)){if(!i.allowTabSynchronization)throw new qt(Bt.FAILED_PRECONDITION,q0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rv(t).H().next((n=>this.ns(n,Q0).find((x=>{if(this.clientId!==x.clientId){const S=!this.networkEnabled&&x.networkEnabled,s=!this.inForeground&&x.inForeground,T=this.networkEnabled===x.networkEnabled;if(S||s&&T)return!0}return!1}))===void 0))})).next((i=>(this.isPrimary!==i&&Xt(bo,`Client ${i?"is":"is not"} eligible for a primary lease.`),i)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[mp,Ff],(t=>{const i=new Yy(t,ms.ce);return this.Ji(i).next((()=>this.Yi(i)))})),this.qi.close(),this.ls()}ns(t,i){return t.filter((n=>this.ts(n.updateTimeMs,i)&&!this.ss(n.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(t=>Rv(t).H().next((i=>this.ns(i,J0).map((n=>n.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(t,i){return Mg.wt(t,this.serializer,i,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Y_(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return wg.wt(this.serializer,t)}getBundleCache(){return this.Pi}runTransaction(t,i,n){Xt(bo,"Starting transaction:",t);const x=i==="readonly"?"readonly":"readwrite",S=(function(e){return e===18?HG:e===17?DP:e===16?WG:e===15?mT:e===14?FP:e===13?LP:e===12?_G:e===11?IP:void pe(60245)})(this.xi);let s;return this.qi.runTransaction(t,x,S,(T=>(s=new Yy(T,this.ai?this.ai.next():ms.ce),i==="readwrite-primary"?this.ji(s).next((e=>!!e||this.Hi(s))).next((e=>{if(!e)throw tn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new qt(Bt.FAILED_PRECONDITION,TP);return n(s)})).next((e=>this.Zi(s).next((()=>e)))):this.Ps(s).next((()=>n(s)))))).then((T=>(s.raiseOnCommittedEvent(),T)))}Ps(t){return Yc(t).get(Su).next((i=>{if(i!==null&&this.ts(i.leaseTimestampMs,Q0)&&!this.ss(i.ownerId)&&!this.Xi(i)&&!(this.Mi||this.allowTabSynchronization&&i.allowTabSynchronization))throw new qt(Bt.FAILED_PRECONDITION,q0)}))}Zi(t){const i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yc(t).put(Su,i)}static v(){return qo.v()}Ji(t){const i=Yc(t);return i.get(Su).next((n=>this.Xi(n)?(Xt(bo,"Releasing primary lease."),i.delete(Su)):St.resolve()))}ts(t,i){const n=Date.now();return!(t<n-i)&&(!(t>n)||(tn(`Detected an update time that is in the future: ${t} > ${n}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Oi=()=>{this._s();const i=/(?:Version|Mobile)\/1[456]/;QR()&&(navigator.appVersion.match(i)||navigator.userAgent.match(i))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(t){var i;try{const n=((i=this.Ui)==null?void 0:i.getItem(this.rs(t)))!==null;return Xt(bo,`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return tn(bo,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(t){tn("Failed to set zombie client id.",t)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Yc(d){return wn(d,mp)}function Rv(d){return wn(d,Ff)}function Xb(d,t){let i=d.projectId;return d.isDefaultDatabase||(i+="."+d.database),"firestore/"+t+"/"+i+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(t,i,n,x){this.targetId=t,this.fromCache=i,this.Ts=n,this.Is=x}static Es(t,i){let n=He(),x=He();for(const S of i.docChanges)switch(S.type){case 0:n=n.add(S.doc.key);break;case 1:x=x.add(S.doc.key)}return new OT(t,i.fromCache,n,x)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return QR()?8:SP(Sn())>0?6:4})()}initialize(t,i){this.fs=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,n,x){const S={result:null};return this.gs(t,i).next((s=>{S.result=s})).next((()=>{if(!S.result)return this.ps(t,i,x,n).next((s=>{S.result=s}))})).next((()=>{if(S.result)return;const s=new hW;return this.ys(t,i,s).next((T=>{if(S.result=T,this.As)return this.ws(t,i,s,T.size)}))})).next((()=>S.result))}ws(t,i,n,x){return n.documentReadCount<this.Vs?(bu()<=Qe.DEBUG&&Xt("QueryEngine","SDK will not create cache indexes for query:",Iu(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),St.resolve()):(bu()<=Qe.DEBUG&&Xt("QueryEngine","Query:",Iu(i),"scans",n.documentReadCount,"local documents and returns",x,"documents as results."),n.documentReadCount>this.ds*x?(bu()<=Qe.DEBUG&&Xt("QueryEngine","The SDK decides to create cache indexes for query:",Iu(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,_s(i))):St.resolve())}gs(t,i){if(RC(i))return St.resolve(null);let n=_s(i);return this.indexManager.getIndexType(t,n).next((x=>x===0?null:(i.limit!==null&&x===1&&(i=Im(i,null,"F"),n=_s(i)),this.indexManager.getDocumentsMatchingTarget(t,n).next((S=>{const s=He(...S);return this.fs.getDocuments(t,s).next((T=>this.indexManager.getMinOffset(t,n).next((e=>{const a=this.bs(i,T);return this.Ss(i,a,s,e.readTime)?this.gs(t,Im(i,null,"F")):this.Ds(t,a,i,e)}))))})))))}ps(t,i,n,x){return RC(i)||x.isEqual(Ae.min())?St.resolve(null):this.fs.getDocuments(t,n).next((S=>{const s=this.bs(i,S);return this.Ss(i,s,n,x)?St.resolve(null):(bu()<=Qe.DEBUG&&Xt("QueryEngine","Re-using previous result from %s to execute query: %s",x.toString(),Iu(i)),this.Ds(t,s,i,xP(x,Pf)).next((T=>T)))}))}bs(t,i){let n=new Ti(eb(t));return i.forEach(((x,S)=>{yp(t,S)&&(n=n.add(S))})),n}Ss(t,i,n,x){if(t.limit===null)return!1;if(n.size!==i.size)return!0;const S=t.limitType==="F"?i.last():i.first();return!!S&&(S.hasPendingWrites||S.version.compareTo(x)>0)}ys(t,i,n){return bu()<=Qe.DEBUG&&Xt("QueryEngine","Using full collection scan to execute query:",Iu(i)),this.fs.getDocumentsMatchingQuery(t,i,Ys.min(),n)}Ds(t,i,n,x){return this.fs.getDocumentsMatchingQuery(t,n,x).next((S=>(i.forEach((s=>{S=S.insert(s.key,s)})),S)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="LocalStore",uW=3e8;class fW{constructor(t,i,n,x){this.persistence=t,this.Cs=i,this.serializer=x,this.vs=new bi(Le),this.Fs=new ho((S=>Rh(S)),gp),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(n)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Hb(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.vs)))}}function kb(d,t,i,n){return new fW(d,t,i,n)}async function $b(d,t){const i=me(d);return await i.persistence.runTransaction("Handle user change","readonly",(n=>{let x;return i.mutationQueue.getAllMutationBatches(n).next((S=>(x=S,i.Os(t),i.mutationQueue.getAllMutationBatches(n)))).next((S=>{const s=[],T=[];let e=He();for(const a of x){s.push(a.batchId);for(const g of a.mutations)e=e.add(g.key)}for(const a of S){T.push(a.batchId);for(const g of a.mutations)e=e.add(g.key)}return i.localDocuments.getDocuments(n,e).next((a=>({Ns:a,removedBatchIds:s,addedBatchIds:T})))}))}))}function cW(d,t){const i=me(d);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const x=t.batch.keys(),S=i.xs.newChangeBuffer({trackRemovals:!0});return(function(T,e,a,g){const f=a.batch,o=f.keys();let u=St.resolve();return o.forEach((r=>{u=u.next((()=>g.getEntry(e,r))).next((h=>{const c=a.docVersions.get(r);ye(c!==null,48541),h.version.compareTo(c)<0&&(f.applyToRemoteDocument(h,a),h.isValidDocument()&&(h.setReadTime(a.commitVersion),g.addEntry(h)))}))})),u.next((()=>T.mutationQueue.removeMutationBatch(e,f)))})(i,n,t,S).next((()=>S.apply(n))).next((()=>i.mutationQueue.performConsistencyCheck(n))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(n,x,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(T){let e=He();for(let a=0;a<T.mutationResults.length;++a)T.mutationResults[a].transformResults.length>0&&(e=e.add(T.batch.mutations[a].key));return e})(t)))).next((()=>i.localDocuments.getDocuments(n,x)))}))}function Kb(d){const t=me(d);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.li.getLastRemoteSnapshotVersion(i)))}function dW(d,t){const i=me(d),n=t.snapshotVersion;let x=i.vs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(S=>{const s=i.xs.newChangeBuffer({trackRemovals:!0});x=i.vs;const T=[];t.targetChanges.forEach(((g,f)=>{const o=x.get(f);if(!o)return;T.push(i.li.removeMatchingKeys(S,g.removedDocuments,f).next((()=>i.li.addMatchingKeys(S,g.addedDocuments,f))));let u=o.withSequenceNumber(S.currentSequenceNumber);t.targetMismatches.get(f)!==null?u=u.withResumeToken(sn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):g.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(g.resumeToken,n)),x=x.insert(f,u),(function(h,c,l){return h.resumeToken.approximateByteSize()===0||c.snapshotVersion.toMicroseconds()-h.snapshotVersion.toMicroseconds()>=uW?!0:l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size>0})(o,u,g)&&T.push(i.li.updateTargetData(S,u))}));let e=Ns(),a=He();if(t.documentUpdates.forEach((g=>{t.resolvedLimboDocuments.has(g)&&T.push(i.persistence.referenceDelegate.updateLimboDocument(S,g))})),T.push(pW(S,s,t.documentUpdates).next((g=>{e=g.Bs,a=g.Ls}))),!n.isEqual(Ae.min())){const g=i.li.getLastRemoteSnapshotVersion(S).next((f=>i.li.setTargetsMetadata(S,S.currentSequenceNumber,n)));T.push(g)}return St.waitFor(T).next((()=>s.apply(S))).next((()=>i.localDocuments.getLocalViewOfDocuments(S,e,a))).next((()=>e))})).then((S=>(i.vs=x,S)))}function pW(d,t,i){let n=He(),x=He();return i.forEach((S=>n=n.add(S))),t.getEntries(d,n).next((S=>{let s=Ns();return i.forEach(((T,e)=>{const a=S.get(T);e.isFoundDocument()!==a.isFoundDocument()&&(x=x.add(T)),e.isNoDocument()&&e.version.isEqual(Ae.min())?(t.removeEntry(T,e.readTime),s=s.insert(T,e)):!a.isValidDocument()||e.version.compareTo(a.version)>0||e.version.compareTo(a.version)===0&&a.hasPendingWrites?(t.addEntry(e),s=s.insert(T,e)):Xt(NT,"Ignoring outdated watch update for ",T,". Current version:",a.version," Watch version:",e.version)})),{Bs:s,Ls:x}}))}function vW(d,t){const i=me(d);return i.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=gh),i.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function Um(d,t){const i=me(d);return i.persistence.runTransaction("Allocate target","readwrite",(n=>{let x;return i.li.getTargetData(n,t).next((S=>S?(x=S,St.resolve(x)):i.li.allocateTargetId(n).next((s=>(x=new Ya(t,s,"TargetPurposeListen",n.currentSequenceNumber),i.li.addTargetData(n,x).next((()=>x)))))))})).then((n=>{const x=i.vs.get(n.targetId);return(x===null||n.snapshotVersion.compareTo(x.snapshotVersion)>0)&&(i.vs=i.vs.insert(n.targetId,n),i.Fs.set(t,n.targetId)),n}))}async function _f(d,t,i){const n=me(d),x=n.vs.get(t),S=i?"readwrite":"readwrite-primary";try{i||await n.persistence.runTransaction("Release target",S,(s=>n.persistence.referenceDelegate.removeTarget(s,x)))}catch(s){if(!gl(s))throw s;Xt(NT,`Failed to update sequence numbers for target ${t}: ${s}`)}n.vs=n.vs.remove(t),n.Fs.delete(x.target)}function r1(d,t,i){const n=me(d);let x=Ae.min(),S=He();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(e,a,g){const f=me(e),o=f.Fs.get(g);return o!==void 0?St.resolve(f.vs.get(o)):f.li.getTargetData(a,g)})(n,s,_s(t)).next((T=>{if(T)return x=T.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(s,T.targetId).next((e=>{S=e}))})).next((()=>n.Cs.getDocumentsMatchingQuery(s,t,i?x:Ae.min(),i?S:He()))).next((T=>(Jb(n,tb(t),T),{documents:T,ks:S})))))}function jb(d,t){const i=me(d),n=me(i.li),x=i.vs.get(t);return x?Promise.resolve(x.target):i.persistence.runTransaction("Get target data","readonly",(S=>n.At(S,t).next((s=>s?s.target:null))))}function Zb(d,t){const i=me(d),n=i.Ms.get(t)||Ae.min();return i.persistence.runTransaction("Get new document changes","readonly",(x=>i.xs.getAllFromCollectionGroup(x,t,xP(n,Pf),Number.MAX_SAFE_INTEGER))).then((x=>(Jb(i,t,x),x)))}function Jb(d,t,i){let n=d.Ms.get(t)||Ae.min();i.forEach(((x,S)=>{S.readTime.compareTo(n)>0&&(n=S.readTime)})),d.Ms.set(t,n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="firestore_clients";function sA(d,t){return`${Qb}_${d}_${t}`}const qb="firestore_mutations";function rA(d,t,i){let n=`${qb}_${d}_${i}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}const tI="firestore_targets";function tx(d,t){return`${tI}_${d}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="SharedClientState";class Vm{constructor(t,i,n,x){this.user=t,this.batchId=i,this.state=n,this.error=x}static $s(t,i,n){const x=JSON.parse(n);let S,s=typeof x=="object"&&["pending","acknowledged","rejected"].indexOf(x.state)!==-1&&(x.error===void 0||typeof x.error=="object");return s&&x.error&&(s=typeof x.error.message=="string"&&typeof x.error.code=="string",s&&(S=new qt(x.error.code,x.error.message))),s?new Vm(t,i,x.state,S):(tn(ea,`Failed to parse mutation state for ID '${i}': ${n}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Cd{constructor(t,i,n){this.targetId=t,this.state=i,this.error=n}static $s(t,i){const n=JSON.parse(i);let x,S=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return S&&n.error&&(S=typeof n.error.message=="string"&&typeof n.error.code=="string",S&&(x=new qt(n.error.code,n.error.message))),S?new Cd(t,n.state,x):(tn(ea,`Failed to parse target state for ID '${t}': ${i}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class zm{constructor(t,i){this.clientId=t,this.activeTargetIds=i}static $s(t,i){const n=JSON.parse(i);let x=typeof n=="object"&&n.activeTargetIds instanceof Array,S=ET();for(let s=0;x&&s<n.activeTargetIds.length;++s)x=CP(n.activeTargetIds[s]),S=S.add(n.activeTargetIds[s]);return x?new zm(t,S):(tn(ea,`Failed to parse client data for instance '${t}': ${i}`),null)}}class BT{constructor(t,i){this.clientId=t,this.onlineState=i}static $s(t){const i=JSON.parse(t);return typeof i=="object"&&["Unknown","Online","Offline"].indexOf(i.onlineState)!==-1&&typeof i.clientId=="string"?new BT(i.clientId,i.onlineState):(tn(ea,`Failed to parse online state: ${t}`),null)}}class a1{constructor(){this.activeTargetIds=ET()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ex{constructor(t,i,n,x,S){this.window=t,this.Ci=i,this.persistenceKey=n,this.zs=x,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new bi(Le),this.started=!1,this.Zs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=S,this.Xs=sA(this.persistenceKey,this.zs),this.Ys=(function(e){return`firestore_sequence_number_${e}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new a1),this.eo=new RegExp(`^${Qb}_${s}_([^_]*)$`),this.no=new RegExp(`^${qb}_${s}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${tI}_${s}_(\\d+)$`),this.io=(function(e){return`firestore_online_state_${e}`})(this.persistenceKey),this.so=(function(e){return`firestore_bundle_loaded_v2_${e}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.hs();for(const n of t){if(n===this.zs)continue;const x=this.getItem(sA(this.persistenceKey,n));if(x){const S=zm.$s(n,x);S&&(this.Js=this.Js.insert(S.clientId,S))}}this.oo();const i=this.storage.getItem(this.io);if(i){const n=this._o(i);n&&this.ao(n)}for(const n of this.Zs)this.Hs(n);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ys,JSON.stringify(t))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(t){let i=!1;return this.Js.forEach(((n,x)=>{x.activeTargetIds.has(t)&&(i=!0)})),i}addPendingMutation(t){this.co(t,"pending")}updateMutationState(t,i,n){this.co(t,i,n),this.lo(t)}addLocalQueryTarget(t,i=!0){let n="not-current";if(this.isActiveQueryTarget(t)){const x=this.storage.getItem(tx(this.persistenceKey,t));if(x){const S=Cd.$s(t,x);S&&(n=S.state)}}return i&&this.ho.Qs(t),this.oo(),n}removeLocalQueryTarget(t){this.ho.Gs(t),this.oo()}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(tx(this.persistenceKey,t))}updateQueryState(t,i,n){this.Po(t,i,n)}handleUserChange(t,i,n){i.forEach((x=>{this.lo(x)})),this.currentUser=t,n.forEach((x=>{this.addPendingMutation(x)}))}setOnlineState(t){this.To(t)}notifyBundleLoaded(t){this.Io(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const i=this.storage.getItem(t);return Xt(ea,"READ",t,i),i}setItem(t,i){Xt(ea,"SET",t,i),this.storage.setItem(t,i)}removeItem(t){Xt(ea,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const i=t;if(i.storageArea===this.storage){if(Xt(ea,"EVENT",i.key,i.newValue),i.key===this.Xs)return void tn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(i.key!==null){if(this.eo.test(i.key)){if(i.newValue==null){const n=this.Eo(i.key);return this.Ro(n,null)}{const n=this.Ao(i.key,i.newValue);if(n)return this.Ro(n.clientId,n)}}else if(this.no.test(i.key)){if(i.newValue!==null){const n=this.Vo(i.key,i.newValue);if(n)return this.mo(n)}}else if(this.ro.test(i.key)){if(i.newValue!==null){const n=this.fo(i.key,i.newValue);if(n)return this.po(n)}}else if(i.key===this.io){if(i.newValue!==null){const n=this._o(i.newValue);if(n)return this.ao(n)}}else if(i.key===this.Ys){const n=(function(S){let s=ms.ce;if(S!=null)try{const T=JSON.parse(S);ye(typeof T=="number",30636,{yo:S}),s=T}catch(T){tn(ea,"Failed to read sequence number from WebStorage",T)}return s})(i.newValue);n!==ms.ce&&this.sequenceNumberHandler(n)}else if(i.key===this.so){const n=this.wo(i.newValue);await Promise.all(n.map((x=>this.syncEngine.bo(x))))}}}else this.Zs.push(i)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(t,i,n){const x=new Vm(this.currentUser,t,i,n),S=rA(this.persistenceKey,this.currentUser,t);this.setItem(S,x.Ws())}lo(t){const i=rA(this.persistenceKey,this.currentUser,t);this.removeItem(i)}To(t){const i={clientId:this.zs,onlineState:t};this.storage.setItem(this.io,JSON.stringify(i))}Po(t,i,n){const x=tx(this.persistenceKey,t),S=new Cd(t,i,n);this.setItem(x,S.Ws())}Io(t){const i=JSON.stringify(Array.from(t));this.setItem(this.so,i)}Eo(t){const i=this.eo.exec(t);return i?i[1]:null}Ao(t,i){const n=this.Eo(t);return zm.$s(n,i)}Vo(t,i){const n=this.no.exec(t),x=Number(n[1]),S=n[2]!==void 0?n[2]:null;return Vm.$s(new Kn(S),x,i)}fo(t,i){const n=this.ro.exec(t),x=Number(n[1]);return Cd.$s(x,i)}_o(t){return BT.$s(t)}wo(t){return JSON.parse(t)}async mo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.So(t.batchId,t.state,t.error);Xt(ea,`Ignoring mutation for non-active user ${t.user.uid}`)}po(t){return this.syncEngine.Do(t.targetId,t.state,t.error)}Ro(t,i){const n=i?this.Js.insert(t,i):this.Js.remove(t),x=this.uo(this.Js),S=this.uo(n),s=[],T=[];return S.forEach((e=>{x.has(e)||s.push(e)})),x.forEach((e=>{S.has(e)||T.push(e)})),this.syncEngine.Co(s,T).then((()=>{this.Js=n}))}ao(t){this.Js.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}uo(t){let i=ET();return t.forEach(((n,x)=>{i=i.unionWith(x.activeTargetIds)})),i}}class eI{constructor(){this.vo=new a1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,n){}addLocalQueryTarget(t,i=!0){return i&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,i,n){this.Fo[t]=i}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new a1,Promise.resolve()}handleUserChange(t,i,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="ConnectivityMonitor";class oA{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Xt(aA,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){Xt(aA,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pv=null;function o1(){return Pv===null?Pv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pv++,"0x"+Pv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="RestConnection",gW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class xW{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),x=encodeURIComponent(this.databaseId.database);this.qo=i+"://"+t.host,this.Uo=`projects/${n}/databases/${x}`,this.$o=this.databaseId.database===Rm?`project_id=${n}`:`project_id=${n}&database_id=${x}`}Wo(t,i,n,x,S){const s=o1(),T=this.Qo(t,i.toUriEncodedString());Xt(ix,`Sending RPC '${t}' ${s}:`,T,n);const e={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(e,x,S);const{host:a}=new URL(T),g=Qf(a);return this.zo(t,T,e,n,g).then((f=>(Xt(ix,`Received RPC '${t}' ${s}: `,f),f)),(f=>{throw Mf(ix,`RPC '${t}' ${s} failed with error: `,f,"url: ",T,"request:",n),f}))}jo(t,i,n,x,S,s){return this.Wo(t,i,n,x,S)}Go(t,i,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((x,S)=>t[S]=x)),n&&n.headers.forEach(((x,S)=>t[S]=x))}Qo(t,i){const n=gW[t];let x=`${this.qo}/v1/${i}:${n}`;return this.databaseInfo.apiKey&&(x=`${x}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),x}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection",kc=(d,t,i)=>{d.listen(t,(n=>{try{i(n)}catch(x){setTimeout((()=>{throw x}),0)}}))};class $u extends xW{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!$u.c_){const t=cP();kc(t,fP.STAT_EVENT,(i=>{i.stat===zy.PROXY?Xt($n,"STAT_EVENT: detected buffering proxy"):i.stat===zy.NOPROXY&&Xt($n,"STAT_EVENT: detected no buffering proxy")})),$u.c_=!0}}zo(t,i,n,x,S){const s=o1();return new Promise(((T,e)=>{const a=new hP;a.setWithCredentials(!0),a.listenOnce(uP.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Hv.NO_ERROR:const f=a.getResponseJson();Xt($n,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(f)),T(f);break;case Hv.TIMEOUT:Xt($n,`RPC '${t}' ${s} timed out`),e(new qt(Bt.DEADLINE_EXCEEDED,"Request time out"));break;case Hv.HTTP_ERROR:const o=a.getStatus();if(Xt($n,`RPC '${t}' ${s} failed with status:`,o,"response text:",a.getResponseText()),o>0){let u=a.getResponseJson();Array.isArray(u)&&(u=u[0]);const r=u==null?void 0:u.error;if(r&&r.status&&r.message){const h=(function(l){const p=l.toLowerCase().replace(/_/g,"-");return Object.values(Bt).indexOf(p)>=0?p:Bt.UNKNOWN})(r.status);e(new qt(h,r.message))}else e(new qt(Bt.UNKNOWN,"Server responded with status "+a.getStatus()))}else e(new qt(Bt.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:t,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Xt($n,`RPC '${t}' ${s} completed.`)}}));const g=JSON.stringify(x);Xt($n,`RPC '${t}' ${s} sending request:`,x),a.send(i,"POST",g,n,15)}))}T_(t,i,n){const x=o1(),S=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=this.createWebChannelTransport(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},e=this.longPollingOptions.timeoutSeconds;e!==void 0&&(T.longPollingTimeout=Math.round(1e3*e)),this.useFetchStreams&&(T.useFetchStreams=!0),this.Go(T.initMessageHeaders,i,n),T.encodeInitMessageHeaders=!0;const a=S.join("");Xt($n,`Creating RPC '${t}' stream ${x}: ${a}`,T);const g=s.createWebChannel(a,T);this.I_(g);let f=!1,o=!1;const u=new yW({Ho:r=>{o?Xt($n,`Not sending because RPC '${t}' stream ${x} is closed:`,r):(f||(Xt($n,`Opening RPC '${t}' stream ${x} transport.`),g.open(),f=!0),Xt($n,`RPC '${t}' stream ${x} sending:`,r),g.send(r))},Jo:()=>g.close()});return kc(g,nd.EventType.OPEN,(()=>{o||(Xt($n,`RPC '${t}' stream ${x} transport opened.`),u.i_())})),kc(g,nd.EventType.CLOSE,(()=>{o||(o=!0,Xt($n,`RPC '${t}' stream ${x} transport closed`),u.o_(),this.E_(g))})),kc(g,nd.EventType.ERROR,(r=>{o||(o=!0,Mf($n,`RPC '${t}' stream ${x} transport errored. Name:`,r.name,"Message:",r.message),u.o_(new qt(Bt.UNAVAILABLE,"The operation could not be completed")))})),kc(g,nd.EventType.MESSAGE,(r=>{var h;if(!o){const c=r.data[0];ye(!!c,16349);const l=c,p=(l==null?void 0:l.error)||((h=l[0])==null?void 0:h.error);if(p){Xt($n,`RPC '${t}' stream ${x} received error:`,p);const m=p.status;let v=(function(C){const w=ln[C];if(w!==void 0)return pb(w)})(m),y=p.message;m==="NOT_FOUND"&&y.includes("database")&&y.includes("does not exist")&&y.includes(this.databaseId.database)&&Mf(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),v===void 0&&(v=Bt.INTERNAL,y="Unknown error status: "+m+" with message "+p.message),o=!0,u.o_(new qt(v,y)),g.close()}else Xt($n,`RPC '${t}' stream ${x} received:`,c),u.__(c)}})),$u.u_(),setTimeout((()=>{u.s_()}),0),u}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((i=>i===t))}Go(t,i,n){super.Go(t,i,n),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return dP()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(d){return new $u(d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){return typeof window<"u"?window:null}function qv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(d){return new M_(d,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$u.c_=!1;class nI{constructor(t,i,n=1e3,x=1.5,S=6e4){this.Ci=t,this.timerId=i,this.R_=n,this.A_=x,this.V_=S,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const i=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),x=Math.max(0,i-n);x>0&&Xt("ExponentialBackoff",`Backing off for ${x} ms (base delay: ${this.d_} ms, delay with jitter: ${i} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,x,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="PersistentStream";class sI{constructor(t,i,n,x,S,s,T,e){this.Ci=t,this.b_=n,this.S_=x,this.connection=S,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=T,this.listener=e,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nI(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Bt.RESOURCE_EXHAUSTED?(tn(i.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Bt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(i)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,x])=>{this.D_===i&&this.G_(n,x)}),(n=>{t((()=>{const x=new qt(Bt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(x)}))}))}G_(t,i){const n=this.Q_(this.D_);this.stream=this.j_(t,i),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((x=>{n((()=>this.z_(x)))})),this.stream.onMessage((x=>{n((()=>++this.F_==1?this.H_(x):this.onNext(x)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Xt(lA,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return i=>{this.Ci.enqueueAndForget((()=>this.D_===t?i():(Xt(lA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EW extends sI{constructor(t,i,n,x,S,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,n,x,s),this.serializer=S}j_(t,i){return this.connection.T_("Listen",t,i)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=b_(this.serializer,t),n=(function(S){if(!("targetChange"in S))return Ae.min();const s=S.targetChange;return s.targetIds&&s.targetIds.length?Ae.min():s.readTime?rs(s.readTime):Ae.min()})(t);return this.listener.J_(i,n)}Z_(t){const i={};i.database=t1(this.serializer),i.addTarget=(function(S,s){let T;const e=s.target;if(T=Pm(e)?{documents:Sb(S,e)}:{query:Cb(S,e).ft},T.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){T.resumeToken=gb(S,s.resumeToken);const a=Qy(S,s.expectedCount);a!==null&&(T.expectedCount=a)}else if(s.snapshotVersion.compareTo(Ae.min())>0){T.readTime=Gf(S,s.snapshotVersion.toTimestamp());const a=Qy(S,s.expectedCount);a!==null&&(T.expectedCount=a)}return T})(this.serializer,t);const n=L_(this.serializer,t);n&&(i.labels=n),this.K_(i)}X_(t){const i={};i.database=t1(this.serializer),i.removeTarget=t,this.K_(i)}}class SW extends sI{constructor(t,i,n,x,S,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,n,x,s),this.serializer=S}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}H_(t){return ye(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ye(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ye(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=I_(t.writeResults,t.commitTime),n=rs(t.commitTime);return this.listener.na(n,i)}ra(){const t={};t.database=t1(this.serializer),this.K_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((n=>Fm(this.serializer,n)))};this.K_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{}class AW extends CW{constructor(t,i,n,x){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=n,this.serializer=x,this.ia=!1}sa(){if(this.ia)throw new qt(Bt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,i,n,x){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([S,s])=>this.connection.Wo(t,qy(i,n),x,S,s))).catch((S=>{throw S.name==="FirebaseError"?(S.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),S):new qt(Bt.UNKNOWN,S.toString())}))}jo(t,i,n,x,S){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,T])=>this.connection.jo(t,qy(i,n),x,s,T,S))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qt(Bt.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function wW(d,t,i,n){return new AW(d,t,i,n)}class MW{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tn(i),this.aa=!1):Xt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="RemoteStore";class RW{constructor(t,i,n,x,S){this.localStore=t,this.datastore=i,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=S,this.Aa.Mo((s=>{n.enqueueAndForget((async()=>{Hh(this)&&(Xt(Lh,"Restarting streams for network reachability change."),await(async function(e){const a=me(e);a.Ea.add(4),await Sp(a),a.Va.set("Unknown"),a.Ea.delete(4),await bg(a)})(this))}))})),this.Va=new MW(n,x)}}async function bg(d){if(Hh(d))for(const t of d.Ra)await t(!0)}async function Sp(d){for(const t of d.Ra)await t(!1)}function Ig(d,t){const i=me(d);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),zT(i)?VT(i):sc(i).O_()&&UT(i,t))}function Wf(d,t){const i=me(d),n=sc(i);i.Ia.delete(t),n.O_()&&rI(i,t),i.Ia.size===0&&(n.O_()?n.L_():Hh(i)&&i.Va.set("Unknown"))}function UT(d,t){if(d.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ae.min())>0){const i=d.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}sc(d).Z_(t)}function rI(d,t){d.da.$e(t),sc(d).X_(t)}function VT(d){d.da=new S_({getRemoteKeysForTarget:t=>d.remoteSyncer.getRemoteKeysForTarget(t),At:t=>d.Ia.get(t)||null,ht:()=>d.datastore.serializer.databaseId}),sc(d).start(),d.Va.ua()}function zT(d){return Hh(d)&&!sc(d).x_()&&d.Ia.size>0}function Hh(d){return me(d).Ea.size===0}function aI(d){d.da=void 0}async function PW(d){d.Va.set("Online")}async function bW(d){d.Ia.forEach(((t,i)=>{UT(d,t)}))}async function IW(d,t){aI(d),zT(d)?(d.Va.ha(t),VT(d)):d.Va.set("Unknown")}async function LW(d,t,i){if(d.Va.set("Online"),t instanceof mb&&t.state===2&&t.cause)try{await(async function(x,S){const s=S.cause;for(const T of S.targetIds)x.Ia.has(T)&&(await x.remoteSyncer.rejectListen(T,s),x.Ia.delete(T),x.da.removeTarget(T))})(d,t)}catch(n){Xt(Lh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Gm(d,n)}else if(t instanceof Jv?d.da.Xe(t):t instanceof vb?d.da.st(t):d.da.tt(t),!i.isEqual(Ae.min()))try{const n=await Kb(d.localStore);i.compareTo(n)>=0&&await(function(S,s){const T=S.da.Tt(s);return T.targetChanges.forEach(((e,a)=>{if(e.resumeToken.approximateByteSize()>0){const g=S.Ia.get(a);g&&S.Ia.set(a,g.withResumeToken(e.resumeToken,s))}})),T.targetMismatches.forEach(((e,a)=>{const g=S.Ia.get(e);if(!g)return;S.Ia.set(e,g.withResumeToken(sn.EMPTY_BYTE_STRING,g.snapshotVersion)),rI(S,e);const f=new Ya(g.target,e,a,g.sequenceNumber);UT(S,f)})),S.remoteSyncer.applyRemoteEvent(T)})(d,i)}catch(n){Xt(Lh,"Failed to raise snapshot:",n),await Gm(d,n)}}async function Gm(d,t,i){if(!gl(t))throw t;d.Ea.add(1),await Sp(d),d.Va.set("Offline"),i||(i=()=>Kb(d.localStore)),d.asyncQueue.enqueueRetryable((async()=>{Xt(Lh,"Retrying IndexedDB access"),await i(),d.Ea.delete(1),await bg(d)}))}function oI(d,t){return t().catch((i=>Gm(d,i,t)))}async function nc(d){const t=me(d),i=fl(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:gh;for(;FW(t);)try{const x=await vW(t.localStore,n);if(x===null){t.Ta.length===0&&i.L_();break}n=x.batchId,DW(t,x)}catch(x){await Gm(t,x)}lI(t)&&hI(t)}function FW(d){return Hh(d)&&d.Ta.length<10}function DW(d,t){d.Ta.push(t);const i=fl(d);i.O_()&&i.Y_&&i.ea(t.mutations)}function lI(d){return Hh(d)&&!fl(d).x_()&&d.Ta.length>0}function hI(d){fl(d).start()}async function OW(d){fl(d).ra()}async function NW(d){const t=fl(d);for(const i of d.Ta)t.ea(i.mutations)}async function BW(d,t,i){const n=d.Ta.shift(),x=wT.from(n,t,i);await oI(d,(()=>d.remoteSyncer.applySuccessfulWrite(x))),await nc(d)}async function UW(d,t){t&&fl(d).Y_&&await(async function(n,x){if((function(s){return y_(s)&&s!==Bt.ABORTED})(x.code)){const S=n.Ta.shift();fl(n).B_(),await oI(n,(()=>n.remoteSyncer.rejectFailedWrite(S.batchId,x))),await nc(n)}})(d,t),lI(d)&&hI(d)}async function hA(d,t){const i=me(d);i.asyncQueue.verifyOperationInProgress(),Xt(Lh,"RemoteStore received new credentials");const n=Hh(i);i.Ea.add(3),await Sp(i),n&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await bg(i)}async function l1(d,t){const i=me(d);t?(i.Ea.delete(2),await bg(i)):t||(i.Ea.add(2),await Sp(i),i.Va.set("Unknown"))}function sc(d){return d.ma||(d.ma=(function(i,n,x){const S=me(i);return S.sa(),new EW(n,S.connection,S.authCredentials,S.appCheckCredentials,S.serializer,x)})(d.datastore,d.asyncQueue,{Zo:PW.bind(null,d),Yo:bW.bind(null,d),t_:IW.bind(null,d),J_:LW.bind(null,d)}),d.Ra.push((async t=>{t?(d.ma.B_(),zT(d)?VT(d):d.Va.set("Unknown")):(await d.ma.stop(),aI(d))}))),d.ma}function fl(d){return d.fa||(d.fa=(function(i,n,x){const S=me(i);return S.sa(),new SW(n,S.connection,S.authCredentials,S.appCheckCredentials,S.serializer,x)})(d.datastore,d.asyncQueue,{Zo:()=>Promise.resolve(),Yo:OW.bind(null,d),t_:UW.bind(null,d),ta:NW.bind(null,d),na:BW.bind(null,d)}),d.Ra.push((async t=>{t?(d.fa.B_(),await nc(d)):(await d.fa.stop(),d.Ta.length>0&&(Xt(Lh,`Stopping write stream with ${d.Ta.length} pending writes`),d.Ta=[]))}))),d.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t,i,n,x,S){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=n,this.op=x,this.removalCallback=S,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,n,x,S){const s=Date.now()+n,T=new GT(t,i,s,x,S);return T.start(n),T}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qt(Bt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lg(d,t){if(tn("AsyncQueue",`${t}: ${d}`),gl(d))return new qt(Bt.UNAVAILABLE,`${t}: ${d}`);throw d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{static emptySet(t){return new Ku(t.comparator)}constructor(t){this.comparator=t?(i,n)=>t(i,n)||re.comparator(i.key,n.key):(i,n)=>re.comparator(i.key,n.key),this.keyedMap=sd(),this.sortedSet=new bi(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,n)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Ku)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;i.hasNext();){const x=i.getNext().key,S=n.getNext().key;if(!x.isEqual(S))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const n=new Ku;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=i,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.ga=new bi(re.comparator)}track(t){const i=t.doc.key,n=this.ga.get(i);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(i,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(i,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(i):t.type===1&&n.type===2?this.ga=this.ga.insert(i,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):pe(63341,{Vt:t,pa:n}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,n)=>{t.push(n)})),t}}class Hf{constructor(t,i,n,x,S,s,T,e,a){this.query=t,this.docs=i,this.oldDocs=n,this.docChanges=x,this.mutatedKeys=S,this.fromCache=s,this.syncStateChanged=T,this.excludesMetadataChanges=e,this.hasCachedResults=a}static fromInitialDocuments(t,i,n,x,S){const s=[];return i.forEach((T=>{s.push({type:0,doc:T})})),new Hf(t,i,Ku.emptySet(i),s,n,x,!0,!1,S)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Sg(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,n=t.docChanges;if(i.length!==n.length)return!1;for(let x=0;x<i.length;x++)if(i[x].type!==n[x].type||!i[x].doc.isEqual(n[x].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class zW{constructor(){this.queries=fA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,n){const x=me(i),S=x.queries;x.queries=fA(),S.forEach(((s,T)=>{for(const e of T.ba)e.onError(n)}))})(this,new qt(Bt.ABORTED,"Firestore shutting down"))}}function fA(){return new ho((d=>qP(d)),Sg)}async function _T(d,t){const i=me(d);let n=3;const x=t.query;let S=i.queries.get(x);S?!S.Sa()&&t.Da()&&(n=2):(S=new VW,n=t.Da()?0:1);try{switch(n){case 0:S.wa=await i.onListen(x,!0);break;case 1:S.wa=await i.onListen(x,!1);break;case 2:await i.onFirstRemoteStoreListen(x)}}catch(s){const T=Lg(s,`Initialization of query '${Iu(t.query)}' failed`);return void t.onError(T)}i.queries.set(x,S),S.ba.push(t),t.va(i.onlineState),S.wa&&t.Fa(S.wa)&&HT(i)}async function WT(d,t){const i=me(d),n=t.query;let x=3;const S=i.queries.get(n);if(S){const s=S.ba.indexOf(t);s>=0&&(S.ba.splice(s,1),S.ba.length===0?x=t.Da()?0:1:!S.Sa()&&t.Da()&&(x=2))}switch(x){case 0:return i.queries.delete(n),i.onUnlisten(n,!0);case 1:return i.queries.delete(n),i.onUnlisten(n,!1);case 2:return i.onLastRemoteStoreUnlisten(n);default:return}}function GW(d,t){const i=me(d);let n=!1;for(const x of t){const S=x.query,s=i.queries.get(S);if(s){for(const T of s.ba)T.Fa(x)&&(n=!0);s.wa=x}}n&&HT(i)}function _W(d,t,i){const n=me(d),x=n.queries.get(t);if(x)for(const S of x.ba)S.onError(i);n.queries.delete(t)}function HT(d){d.Ca.forEach((t=>{t.next()}))}var h1,cA;(cA=h1||(h1={})).Ma="default",cA.Cache="cache";class XT{constructor(t,i,n){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const x of t.docChanges)x.type!==3&&n.push(x);t=new Hf(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const n=i!=="Offline";return(!this.options.Ka||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=Hf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==h1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t){this.key=t}}class fI{constructor(t){this.key=t}}class WW{constructor(t,i){this.query=t,this.Za=i,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=He(),this.mutatedKeys=He(),this.eu=eb(t),this.tu=new Ku(this.eu)}get nu(){return this.Za}ru(t,i){const n=i?i.iu:new uA,x=i?i.tu:this.tu;let S=i?i.mutatedKeys:this.mutatedKeys,s=x,T=!1;const e=this.query.limitType==="F"&&x.size===this.query.limit?x.last():null,a=this.query.limitType==="L"&&x.size===this.query.limit?x.first():null;if(t.inorderTraversal(((g,f)=>{const o=x.get(g),u=yp(this.query,f)?f:null,r=!!o&&this.mutatedKeys.has(o.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let c=!1;o&&u?o.data.isEqual(u.data)?r!==h&&(n.track({type:3,doc:u}),c=!0):this.su(o,u)||(n.track({type:2,doc:u}),c=!0,(e&&this.eu(u,e)>0||a&&this.eu(u,a)<0)&&(T=!0)):!o&&u?(n.track({type:0,doc:u}),c=!0):o&&!u&&(n.track({type:1,doc:o}),c=!0,(e||a)&&(T=!0)),c&&(u?(s=s.add(u),S=h?S.add(g):S.delete(g)):(s=s.delete(g),S=S.delete(g)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const g=this.query.limitType==="F"?s.last():s.first();s=s.delete(g.key),S=S.delete(g.key),n.track({type:1,doc:g})}return{tu:s,iu:n,Ss:T,mutatedKeys:S}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,n,x){const S=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const s=t.iu.ya();s.sort(((g,f)=>(function(u,r){const h=c=>{switch(c){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Vt:c})}};return h(u)-h(r)})(g.type,f.type)||this.eu(g.doc,f.doc))),this.ou(n),x=x??!1;const T=i&&!x?this._u():[],e=this.Ya.size===0&&this.current&&!x?1:0,a=e!==this.Xa;return this.Xa=e,s.length!==0||a?{snapshot:new Hf(this.query,t.tu,S,s,t.mutatedKeys,e===0,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uA,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Za=this.Za.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Za=this.Za.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=He(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))}));const i=[];return t.forEach((n=>{this.Ya.has(n)||i.push(new fI(n))})),this.Ya.forEach((n=>{t.has(n)||i.push(new uI(n))})),i}cu(t){this.Za=t.ks,this.Ya=He();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return Hf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const rc="SyncEngine";class HW{constructor(t,i,n){this.query=t,this.targetId=i,this.view=n}}class XW{constructor(t){this.key=t,this.hu=!1}}class YW{constructor(t,i,n,x,S,s){this.localStore=t,this.remoteStore=i,this.eventManager=n,this.sharedClientState=x,this.currentUser=S,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ho((T=>qP(T)),Sg),this.Iu=new Map,this.Eu=new Set,this.Ru=new bi(re.comparator),this.Au=new Map,this.Vu=new LT,this.du={},this.mu=new Map,this.fu=Ih.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kW(d,t,i=!0){const n=Fg(d);let x;const S=n.Tu.get(t);return S?(n.sharedClientState.addLocalQueryTarget(S.targetId),x=S.view.lu()):x=await cI(n,t,i,!0),x}async function $W(d,t){const i=Fg(d);await cI(i,t,!0,!1)}async function cI(d,t,i,n){const x=await Um(d.localStore,_s(t)),S=x.targetId,s=d.sharedClientState.addLocalQueryTarget(S,i);let T;return n&&(T=await YT(d,t,S,s==="current",x.resumeToken)),d.isPrimaryClient&&i&&Ig(d.remoteStore,x),T}async function YT(d,t,i,n,x){d.pu=(f,o,u)=>(async function(h,c,l,p){let m=c.view.ru(l);m.Ss&&(m=await r1(h.localStore,c.query,!1).then((({documents:C})=>c.view.ru(C,m))));const v=p&&p.targetChanges.get(c.targetId),y=p&&p.targetMismatches.get(c.targetId)!=null,E=c.view.applyChanges(m,h.isPrimaryClient,v,y);return u1(h,c.targetId,E.au),E.snapshot})(d,f,o,u);const S=await r1(d.localStore,t,!0),s=new WW(t,S.ks),T=s.ru(S.documents),e=Ep.createSynthesizedTargetChangeForCurrentChange(i,n&&d.onlineState!=="Offline",x),a=s.applyChanges(T,d.isPrimaryClient,e);u1(d,i,a.au);const g=new HW(t,i,s);return d.Tu.set(t,g),d.Iu.has(i)?d.Iu.get(i).push(t):d.Iu.set(i,[t]),a.snapshot}async function KW(d,t,i){const n=me(d),x=n.Tu.get(t),S=n.Iu.get(x.targetId);if(S.length>1)return n.Iu.set(x.targetId,S.filter((s=>!Sg(s,t)))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(x.targetId),n.sharedClientState.isActiveQueryTarget(x.targetId)||await _f(n.localStore,x.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(x.targetId),i&&Wf(n.remoteStore,x.targetId),Xf(n,x.targetId)})).catch(ml)):(Xf(n,x.targetId),await _f(n.localStore,x.targetId,!0))}async function jW(d,t){const i=me(d),n=i.Tu.get(t),x=i.Iu.get(n.targetId);i.isPrimaryClient&&x.length===1&&(i.sharedClientState.removeLocalQueryTarget(n.targetId),Wf(i.remoteStore,n.targetId))}async function ZW(d,t,i){const n=jT(d);try{const x=await(function(s,T){const e=me(s),a=xi.now(),g=T.reduce(((u,r)=>u.add(r.key)),He());let f,o;return e.persistence.runTransaction("Locally write mutations","readwrite",(u=>{let r=Ns(),h=He();return e.xs.getEntries(u,g).next((c=>{r=c,r.forEach(((l,p)=>{p.isValidDocument()||(h=h.add(l))}))})).next((()=>e.localDocuments.getOverlayedDocuments(u,r))).next((c=>{f=c;const l=[];for(const p of T){const m=g_(p,f.get(p.key).overlayedDocument);m!=null&&l.push(new xl(p.key,m,HP(m.value.mapValue),Bs.exists(!0)))}return e.mutationQueue.addMutationBatch(u,a,l,T)})).next((c=>{o=c;const l=c.applyToLocalDocumentSet(f,h);return e.documentOverlayCache.saveOverlays(u,c.batchId,l)}))})).then((()=>({batchId:o.batchId,changes:nb(f)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(x.batchId),(function(s,T,e){let a=s.du[s.currentUser.toKey()];a||(a=new bi(Le)),a=a.insert(T,e),s.du[s.currentUser.toKey()]=a})(n,x.batchId,i),await yl(n,x.changes),await nc(n.remoteStore)}catch(x){const S=Lg(x,"Failed to persist write");i.reject(S)}}async function dI(d,t){const i=me(d);try{const n=await dW(i.localStore,t);t.targetChanges.forEach(((x,S)=>{const s=i.Au.get(S);s&&(ye(x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size<=1,22616),x.addedDocuments.size>0?s.hu=!0:x.modifiedDocuments.size>0?ye(s.hu,14607):x.removedDocuments.size>0&&(ye(s.hu,42227),s.hu=!1))})),await yl(i,n,t)}catch(n){await ml(n)}}function dA(d,t,i){const n=me(d);if(n.isPrimaryClient&&i===0||!n.isPrimaryClient&&i===1){const x=[];n.Tu.forEach(((S,s)=>{const T=s.view.va(t);T.snapshot&&x.push(T.snapshot)})),(function(s,T){const e=me(s);e.onlineState=T;let a=!1;e.queries.forEach(((g,f)=>{for(const o of f.ba)o.va(T)&&(a=!0)})),a&&HT(e)})(n.eventManager,t),x.length&&n.Pu.J_(x),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function JW(d,t,i){const n=me(d);n.sharedClientState.updateQueryState(t,"rejected",i);const x=n.Au.get(t),S=x&&x.key;if(S){let s=new bi(re.comparator);s=s.insert(S,Ki.newNoDocument(S,Ae.min()));const T=He().add(S),e=new Tp(Ae.min(),new Map,new bi(Le),s,T);await dI(n,e),n.Ru=n.Ru.remove(S),n.Au.delete(t),KT(n)}else await _f(n.localStore,t,!1).then((()=>Xf(n,t,i))).catch(ml)}async function QW(d,t){const i=me(d),n=t.batch.batchId;try{const x=await cW(i.localStore,t);$T(i,n,null),kT(i,n),i.sharedClientState.updateMutationState(n,"acknowledged"),await yl(i,x)}catch(x){await ml(x)}}async function qW(d,t,i){const n=me(d);try{const x=await(function(s,T){const e=me(s);return e.persistence.runTransaction("Reject batch","readwrite-primary",(a=>{let g;return e.mutationQueue.lookupMutationBatch(a,T).next((f=>(ye(f!==null,37113),g=f.keys(),e.mutationQueue.removeMutationBatch(a,f)))).next((()=>e.mutationQueue.performConsistencyCheck(a))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(a,g,T))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,g))).next((()=>e.localDocuments.getDocuments(a,g)))}))})(n.localStore,t);$T(n,t,i),kT(n,t),n.sharedClientState.updateMutationState(t,"rejected",i),await yl(n,x)}catch(x){await ml(x)}}function kT(d,t){(d.mu.get(t)||[]).forEach((i=>{i.resolve()})),d.mu.delete(t)}function $T(d,t,i){const n=me(d);let x=n.du[n.currentUser.toKey()];if(x){const S=x.get(t);S&&(i?S.reject(i):S.resolve(),x=x.remove(t)),n.du[n.currentUser.toKey()]=x}}function Xf(d,t,i=null){d.sharedClientState.removeLocalQueryTarget(t);for(const n of d.Iu.get(t))d.Tu.delete(n),i&&d.Pu.yu(n,i);d.Iu.delete(t),d.isPrimaryClient&&d.Vu.Gr(t).forEach((n=>{d.Vu.containsKey(n)||pI(d,n)}))}function pI(d,t){d.Eu.delete(t.path.canonicalString());const i=d.Ru.get(t);i!==null&&(Wf(d.remoteStore,i),d.Ru=d.Ru.remove(t),d.Au.delete(i),KT(d))}function u1(d,t,i){for(const n of i)n instanceof uI?(d.Vu.addReference(n.key,t),tH(d,n)):n instanceof fI?(Xt(rc,"Document no longer in limbo: "+n.key),d.Vu.removeReference(n.key,t),d.Vu.containsKey(n.key)||pI(d,n.key)):pe(19791,{wu:n})}function tH(d,t){const i=t.key,n=i.path.canonicalString();d.Ru.get(i)||d.Eu.has(n)||(Xt(rc,"New document in limbo: "+i),d.Eu.add(n),KT(d))}function KT(d){for(;d.Eu.size>0&&d.Ru.size<d.maxConcurrentLimboResolutions;){const t=d.Eu.values().next().value;d.Eu.delete(t);const i=new re(di.fromString(t)),n=d.fu.next();d.Au.set(n,new XW(i)),d.Ru=d.Ru.insert(i,n),Ig(d.remoteStore,new Ya(_s(xp(i.path)),n,"TargetPurposeLimboResolution",ms.ce))}}async function yl(d,t,i){const n=me(d),x=[],S=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach(((T,e)=>{s.push(n.pu(e,t,i).then((a=>{var g;if((a||i)&&n.isPrimaryClient){const f=a?!a.fromCache:(g=i==null?void 0:i.targetChanges.get(e.targetId))==null?void 0:g.current;n.sharedClientState.updateQueryState(e.targetId,f?"current":"not-current")}if(a){x.push(a);const f=OT.Es(e.targetId,a);S.push(f)}})))})),await Promise.all(s),n.Pu.J_(x),await(async function(e,a){const g=me(e);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>St.forEach(a,(o=>St.forEach(o.Ts,(u=>g.persistence.referenceDelegate.addReference(f,o.targetId,u))).next((()=>St.forEach(o.Is,(u=>g.persistence.referenceDelegate.removeReference(f,o.targetId,u)))))))))}catch(f){if(!gl(f))throw f;Xt(NT,"Failed to update sequence numbers: "+f)}for(const f of a){const o=f.targetId;if(!f.fromCache){const u=g.vs.get(o),r=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(r);g.vs=g.vs.insert(o,h)}}})(n.localStore,S))}async function eH(d,t){const i=me(d);if(!i.currentUser.isEqual(t)){Xt(rc,"User change. New user:",t.toKey());const n=await $b(i.localStore,t);i.currentUser=t,(function(S,s){S.mu.forEach((T=>{T.forEach((e=>{e.reject(new qt(Bt.CANCELLED,s))}))})),S.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await yl(i,n.Ns)}}function iH(d,t){const i=me(d),n=i.Au.get(t);if(n&&n.hu)return He().add(n.key);{let x=He();const S=i.Iu.get(t);if(!S)return x;for(const s of S){const T=i.Tu.get(s);x=x.unionWith(T.view.nu)}return x}}async function nH(d,t){const i=me(d),n=await r1(i.localStore,t.query,!0),x=t.view.cu(n);return i.isPrimaryClient&&u1(i,t.targetId,x.au),x}async function sH(d,t){const i=me(d);return Zb(i.localStore,t).then((n=>yl(i,n)))}async function rH(d,t,i,n){const x=me(d),S=await(function(T,e){const a=me(T),g=me(a.mutationQueue);return a.persistence.runTransaction("Lookup mutation documents","readonly",(f=>g.Xn(f,e).next((o=>o?a.localDocuments.getDocuments(f,o):St.resolve(null)))))})(x.localStore,t);S!==null?(i==="pending"?await nc(x.remoteStore):i==="acknowledged"||i==="rejected"?($T(x,t,n||null),kT(x,t),(function(T,e){me(me(T).mutationQueue).nr(e)})(x.localStore,t)):pe(6720,"Unknown batchState",{bu:i}),await yl(x,S)):Xt(rc,"Cannot apply mutation batch with id: "+t)}async function aH(d,t){const i=me(d);if(Fg(i),jT(i),t===!0&&i.gu!==!0){const n=i.sharedClientState.getAllActiveQueryTargets(),x=await pA(i,n.toArray());i.gu=!0,await l1(i.remoteStore,!0);for(const S of x)Ig(i.remoteStore,S)}else if(t===!1&&i.gu!==!1){const n=[];let x=Promise.resolve();i.Iu.forEach(((S,s)=>{i.sharedClientState.isLocalQueryTarget(s)?n.push(s):x=x.then((()=>(Xf(i,s),_f(i.localStore,s,!0)))),Wf(i.remoteStore,s)})),await x,await pA(i,n),(function(s){const T=me(s);T.Au.forEach(((e,a)=>{Wf(T.remoteStore,a)})),T.Vu.zr(),T.Au=new Map,T.Ru=new bi(re.comparator)})(i),i.gu=!1,await l1(i.remoteStore,!1)}}async function pA(d,t,i){const n=me(d),x=[],S=[];for(const s of t){let T;const e=n.Iu.get(s);if(e&&e.length!==0){T=await Um(n.localStore,_s(e[0]));for(const a of e){const g=n.Tu.get(a),f=await nH(n,g);f.snapshot&&S.push(f.snapshot)}}else{const a=await jb(n.localStore,s);T=await Um(n.localStore,a),await YT(n,vI(a),s,!1,T.resumeToken)}x.push(T)}return n.Pu.J_(S),x}function vI(d){return JP(d.path,d.collectionGroup,d.orderBy,d.filters,d.limit,"F",d.startAt,d.endAt)}function oH(d){return(function(i){return me(me(i).persistence).hs()})(me(d).localStore)}async function lH(d,t,i,n){const x=me(d);if(x.gu)return void Xt(rc,"Ignoring unexpected query state notification.");const S=x.Iu.get(t);if(S&&S.length>0)switch(i){case"current":case"not-current":{const s=await Zb(x.localStore,tb(S[0])),T=Tp.createSynthesizedRemoteEventForCurrentChange(t,i==="current",sn.EMPTY_BYTE_STRING);await yl(x,s,T);break}case"rejected":await _f(x.localStore,t,!0),Xf(x,t,n);break;default:pe(64155,i)}}async function hH(d,t,i){const n=Fg(d);if(n.gu){for(const x of t){if(n.Iu.has(x)&&n.sharedClientState.isActiveQueryTarget(x)){Xt(rc,"Adding an already active target "+x);continue}const S=await jb(n.localStore,x),s=await Um(n.localStore,S);await YT(n,vI(S),s.targetId,!1,s.resumeToken),Ig(n.remoteStore,s)}for(const x of i)n.Iu.has(x)&&await _f(n.localStore,x,!1).then((()=>{Wf(n.remoteStore,x),Xf(n,x)})).catch(ml)}}function Fg(d){const t=me(d);return t.remoteStore.remoteSyncer.applyRemoteEvent=dI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iH.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=JW.bind(null,t),t.Pu.J_=GW.bind(null,t.eventManager),t.Pu.yu=_W.bind(null,t.eventManager),t}function jT(d){const t=me(d);return t.remoteStore.remoteSyncer.applySuccessfulWrite=QW.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qW.bind(null,t),t}class Kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Pg(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return kb(this.persistence,new Yb,t.initialUser,this.serializer)}Cu(t){return new FT(Rg.Vi,this.serializer)}Du(t){return new eI}async terminate(){var t,i;(t=this.gcScheduler)==null||t.stop(),(i=this.indexBackfillerScheduler)==null||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kd.provider={build:()=>new Kd};class uH extends Kd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){ye(this.persistence.referenceDelegate instanceof Bm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new zb(n,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new FT((n=>Bm.Vi(n,i)),this.serializer)}}class mI extends Kd{constructor(t,i,n){super(),this.xu=t,this.cacheSizeBytes=i,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await jT(this.xu.syncEngine),await nc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return kb(this.persistence,new Yb,t.initialUser,this.serializer)}Fu(t,i){const n=this.persistence.referenceDelegate.garbageCollector;return new zb(n,t.asyncQueue,i)}Mu(t,i){const n=new gG(i,this.persistence);return new mG(t.asyncQueue,n)}Cu(t){const i=Xb(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new DT(this.synchronizeTabs,i,t.clientId,n,t.asyncQueue,iI(),qv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new eI}}class fH extends mI{constructor(t,i){super(t,i,!1),this.xu=t,this.cacheSizeBytes=i,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const i=this.xu.syncEngine;this.sharedClientState instanceof ex&&(this.sharedClientState.syncEngine={So:rH.bind(null,i),Do:lH.bind(null,i),Co:hH.bind(null,i),hs:oH.bind(null,i),bo:sH.bind(null,i)},await this.sharedClientState.start()),await this.persistence.zi((async n=>{await aH(this.xu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Du(t){const i=iI();if(!ex.v(i))throw new qt(Bt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Xb(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ex(i,t.asyncQueue,n,t.clientId,t.initialUser)}}class jd{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>dA(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=eH.bind(null,this.syncEngine),await l1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new zW})()}createDatastore(t){const i=Pg(t.databaseInfo.databaseId),n=TW(t.databaseInfo);return wW(t.authCredentials,t.appCheckCredentials,n,i)}createRemoteStore(t){return(function(n,x,S,s,T){return new RW(n,x,S,s,T)})(this.localStore,this.datastore,t.asyncQueue,(i=>dA(this.syncEngine,i,0)),(function(){return oA.v()?new oA:new mW})())}createSyncEngine(t,i){return(function(x,S,s,T,e,a,g){const f=new YW(x,S,s,T,e,a);return g&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await(async function(x){const S=me(x);Xt(Lh,"RemoteStore shutting down."),S.Ea.add(5),await Sp(S),S.Aa.shutdown(),S.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(i=this.eventManager)==null||i.terminate()}}jd.provider={build:()=>new jd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):tn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="FirestoreClient";class cH{constructor(t,i,n,x,S){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=n,this._databaseInfo=x,this.user=Kn.UNAUTHENTICATED,this.clientId=uT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=S,this.authCredentials.start(n,(async s=>{Xt(cl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(Xt(cl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const n=Lg(i,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function nx(d,t){d.asyncQueue.verifyOperationInProgress(),Xt(cl,"Initializing OfflineComponentProvider");const i=d.configuration;await t.initialize(i);let n=i.initialUser;d.setCredentialChangeListener((async x=>{n.isEqual(x)||(await $b(t.localStore,x),n=x)})),t.persistence.setDatabaseDeletedListener((()=>d.terminate())),d._offlineComponents=t}async function vA(d,t){d.asyncQueue.verifyOperationInProgress();const i=await gI(d);Xt(cl,"Initializing OnlineComponentProvider"),await t.initialize(i,d.configuration),d.setCredentialChangeListener((n=>hA(t.remoteStore,n))),d.setAppCheckTokenChangeListener(((n,x)=>hA(t.remoteStore,x))),d._onlineComponents=t}async function gI(d){if(!d._offlineComponents)if(d._uninitializedComponentsProvider){Xt(cl,"Using user provided OfflineComponentProvider");try{await nx(d,d._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(x){return x.name==="FirebaseError"?x.code===Bt.FAILED_PRECONDITION||x.code===Bt.UNIMPLEMENTED:!(typeof DOMException<"u"&&x instanceof DOMException)||x.code===22||x.code===20||x.code===11})(i))throw i;Mf("Error using user provided cache. Falling back to memory cache: "+i),await nx(d,new Kd)}}else Xt(cl,"Using default OfflineComponentProvider"),await nx(d,new uH(void 0));return d._offlineComponents}async function xI(d){return d._onlineComponents||(d._uninitializedComponentsProvider?(Xt(cl,"Using user provided OnlineComponentProvider"),await vA(d,d._uninitializedComponentsProvider._online)):(Xt(cl,"Using default OnlineComponentProvider"),await vA(d,new jd))),d._onlineComponents}function dH(d){return gI(d).then((t=>t.localStore))}function pH(d){return xI(d).then((t=>t.syncEngine))}async function _m(d){const t=await xI(d),i=t.eventManager;return i.onListen=kW.bind(null,t.syncEngine),i.onUnlisten=KW.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=$W.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=jW.bind(null,t.syncEngine),i}function vH(d,t,i,n){const x=new ZT(n),S=new XT(t,x,i);return d.asyncQueue.enqueueAndForget((async()=>_T(await _m(d),S))),()=>{x.Nu(),d.asyncQueue.enqueueAndForget((async()=>WT(await _m(d),S)))}}function mH(d,t){const i=new Dr;return d.asyncQueue.enqueueAndForget((async()=>(async function(x,S,s){try{const T=await(function(a,g){const f=me(a);return f.persistence.runTransaction("read document","readonly",(o=>f.localDocuments.getDocument(o,g)))})(x,S);T.isFoundDocument()?s.resolve(T):T.isNoDocument()?s.resolve(null):s.reject(new qt(Bt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(T){const e=Lg(T,`Failed to get document '${S} from cache`);s.reject(e)}})(await dH(d),t,i))),i.promise}function yI(d,t,i={}){const n=new Dr;return d.asyncQueue.enqueueAndForget((async()=>(function(S,s,T,e,a){const g=new ZT({next:o=>{g.Nu(),s.enqueueAndForget((()=>WT(S,f)));const u=o.docs.has(T);!u&&o.fromCache?a.reject(new qt(Bt.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&e&&e.source==="server"?a.reject(new qt(Bt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(o)},error:o=>a.reject(o)}),f=new XT(xp(T.path),g,{includeMetadataChanges:!0,Ka:!0});return _T(S,f)})(await _m(d),d.asyncQueue,t,i,n))),n.promise}function gH(d,t,i={}){const n=new Dr;return d.asyncQueue.enqueueAndForget((async()=>(function(S,s,T,e,a){const g=new ZT({next:o=>{g.Nu(),s.enqueueAndForget((()=>WT(S,f))),o.fromCache&&e.source==="server"?a.reject(new qt(Bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(o)},error:o=>a.reject(o)}),f=new XT(T,g,{includeMetadataChanges:!0,Ka:!0});return _T(S,f)})(await _m(d),d.asyncQueue,t,i,n))),n.promise}function xH(d,t){const i=new Dr;return d.asyncQueue.enqueueAndForget((async()=>ZW(await pH(d),t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(d){const t={};return d.timeoutSeconds!==void 0&&(t.timeoutSeconds=d.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH="ComponentProvider",mA=new Map;function TH(d,t,i,n,x){return new YG(d,t,i,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,TI(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH="firestore.googleapis.com",gA=!0;class xA{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new qt(Bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EH,this.ssl=gA}else this.host=t.host,this.ssl=t.ssl??gA;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ob;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Vb)throw new qt(Bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}dG("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TI(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qt(Bt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qt(Bt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qt(Bt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,x){return n.timeoutSeconds===x.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class JT{constructor(t,i,n,x){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=n,this._app=x,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qt(Bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new qt(Bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xA(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new sG;switch(n.type){case"firstParty":return new oG(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qt(Bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const n=mA.get(i);n&&(Xt(yH,"Removing Datastore"),mA.delete(i),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(t,i,n){this.converter=i,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new uo(this.firestore,t,this._query)}}class Hi{constructor(t,i,n){this.converter=i,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Hi(this.firestore,t,this._key)}toJSON(){return{type:Hi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,n){if(vp(i,Hi._jsonSchema))return new Hi(t,n||null,new re(di.fromString(i.referencePath)))}}Hi._jsonSchemaVersion="firestore/documentReference/1.0",Hi._jsonSchema={type:pn("string",Hi._jsonSchemaVersion),referencePath:pn("string")};class tl extends uo{constructor(t,i,n){super(t,i,xp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Hi(this.firestore,null,new re(t))}withConverter(t){return new tl(this.firestore,t,this._path)}}function EI(d,t,...i){if(d=nn(d),mP("collection","path",t),d instanceof JT){const n=di.fromString(t,...i);return lC(n),new tl(d,null,n)}{if(!(d instanceof Hi||d instanceof tl))throw new qt(Bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=d._path.child(di.fromString(t,...i));return lC(n),new tl(d.firestore,null,n)}}function Cp(d,t,...i){if(d=nn(d),arguments.length===1&&(t=uT.newId()),mP("doc","path",t),d instanceof JT){const n=di.fromString(t,...i);return oC(n),new Hi(d,null,new re(n))}{if(!(d instanceof Hi||d instanceof tl))throw new qt(Bt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=d._path.child(di.fromString(t,...i));return oC(n),new Hi(d.firestore,d instanceof tl?d.converter:null,new re(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="AsyncQueue";class TA{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nI(this,"async_queue_retry"),this._c=()=>{const n=qv();n&&Xt(yA,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const i=qv();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=qv();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Dr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!gl(t))throw t;Xt(yA,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,tn("INTERNAL UNHANDLED ERROR: ",EA(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=i,i}enqueueAfterDelay(t,i,n){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const x=GT.createAndSchedule(this,t,i,n,(S=>this.hc(S)));return this.tc.push(x),x}uc(){this.nc&&pe(47125,{Pc:EA(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,n)=>i.targetTimeMs-n.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function EA(d){let t=d.message||"";return d.stack&&(t=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),t}class dl extends JT{constructor(t,i,n,x){super(t,i,n,x),this.type="firestore",this._queue=new TA,this._persistenceKey=(x==null?void 0:x.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new TA(t),this._firestoreClient=void 0,await t}}}function SH(d,t,i){i||(i=Rm);const n=_h(d,"firestore");if(n.isInitialized(i)){const x=n.getImmediate({identifier:i}),S=n.getOptions(i);if(ll(S,t))return x;throw new qt(Bt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new qt(Bt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Vb)throw new qt(Bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&Qf(t.host)&&jR(t.host),n.initialize({options:t,instanceIdentifier:i})}function ac(d){if(d._terminated)throw new qt(Bt.FAILED_PRECONDITION,"The client has already been terminated.");return d._firestoreClient||CH(d),d._firestoreClient}function CH(d){var n,x,S,s;const t=d._freezeSettings(),i=TH(d._databaseId,((n=d._app)==null?void 0:n.options.appId)||"",d._persistenceKey,(x=d._app)==null?void 0:x.options.apiKey,t);d._componentsProvider||(S=t.localCache)!=null&&S._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(d._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),d._firestoreClient=new cH(d._authCredentials,d._appCheckCredentials,d._queue,i,d._componentsProvider&&(function(e){const a=e==null?void 0:e._online.build();return{_offline:e==null?void 0:e._offline.build(a),_online:a}})(d._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new rr(sn.fromBase64String(t))}catch(i){throw new qt(Bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new rr(sn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(vp(t,rr._jsonSchema))return rr.fromBase64String(t.bytes)}}rr._jsonSchemaVersion="firestore/bytes/1.0",rr._jsonSchema={type:pn("string",rr._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new qt(Bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new qt(Bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new qt(Bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Le(this._lat,t._lat)||Le(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ua._jsonSchemaVersion}}static fromJSON(t){if(vp(t,ua._jsonSchema))return new ua(t.latitude,t.longitude)}}ua._jsonSchemaVersion="firestore/geoPoint/1.0",ua._jsonSchema={type:pn("string",ua._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,x){if(n.length!==x.length)return!1;for(let S=0;S<n.length;++S)if(n[S]!==x[S])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(vp(t,Or._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Or(t.vectorValues);throw new qt(Bt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Or._jsonSchemaVersion="firestore/vectorValue/1.0",Or._jsonSchema={type:pn("string",Or._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=/^__.*__$/;class wH{constructor(t,i,n){this.data=t,this.fieldMask=i,this.fieldTransforms=n}toMutation(t,i){return this.fieldMask!==null?new xl(t,this.data,this.fieldMask,i,this.fieldTransforms):new ic(t,this.data,i,this.fieldTransforms)}}function CI(d){switch(d){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{dataSource:d})}}class qT{constructor(t,i,n,x,S,s){this.settings=t,this.databaseId=i,this.serializer=n,this.ignoreUndefinedProperties=x,S===void 0&&this.validatePath(),this.fieldTransforms=S||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new qT({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var x;const i=(x=this.path)==null?void 0:x.child(t),n=this.contextWith({path:i,arrayElement:!1});return n.validatePathSegment(t),n}childContextForFieldPath(t){var x;const i=(x=this.path)==null?void 0:x.child(t),n=this.contextWith({path:i,arrayElement:!1});return n.validatePath(),n}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Wm(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(CI(this.dataSource)&&AH.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class MH{constructor(t,i,n){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=n||Pg(t)}createContext(t,i,n,x=!1){return new qT({dataSource:t,methodName:i,targetDoc:n,path:Wi.emptyPath(),arrayElement:!1,hasConverter:x},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function AI(d){const t=d._freezeSettings(),i=Pg(d._databaseId);return new MH(d._databaseId,!!t.ignoreUndefinedProperties,i)}function RH(d,t,i,n,x,S={}){const s=d.createContext(S.merge||S.mergeFields?2:0,t,i,x);RI("Data must be an object, but it was:",s,n);const T=wI(n,s);let e,a;if(S.merge)e=new lr(s.fieldMask),a=s.fieldTransforms;else if(S.mergeFields){const g=[];for(const f of S.mergeFields){const o=Dg(t,f,i);if(!s.contains(o))throw new qt(Bt.INVALID_ARGUMENT,`Field '${o}' is specified in your field mask but missing from your input data.`);LH(g,o)||g.push(o)}e=new lr(g),a=s.fieldTransforms.filter((f=>e.covers(f.field)))}else e=null,a=s.fieldTransforms;return new wH(new vs(T),e,a)}class tE extends QT{_toFieldTransform(t){return new ub(t.path,new Uf)}isEqual(t){return t instanceof tE}}function PH(d,t,i,n=!1){return eE(i,d.createContext(n?4:3,t))}function eE(d,t){if(MI(d=nn(d)))return RI("Unsupported field value:",t,d),wI(d,t);if(d instanceof QT)return(function(n,x){if(!CI(x.dataSource))throw x.createError(`${n._methodName}() can only be used with update() and set()`);if(!x.path)throw x.createError(`${n._methodName}() is not currently supported inside arrays`);const S=n._toFieldTransform(x);S&&x.fieldTransforms.push(S)})(d,t),null;if(d===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),d instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(n,x){const S=[];let s=0;for(const T of n){let e=eE(T,x.childContextForArray(s));e==null&&(e={nullValue:"NULL_VALUE"}),S.push(e),s++}return{arrayValue:{values:S}}})(d,t)}return(function(n,x){if((n=nn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return f_(x.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const S=xi.fromDate(n);return{timestampValue:Gf(x.serializer,S)}}if(n instanceof xi){const S=new xi(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gf(x.serializer,S)}}if(n instanceof ua)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof rr)return{bytesValue:gb(x.serializer,n._byteString)};if(n instanceof Hi){const S=x.databaseId,s=n.firestore._databaseId;if(!s.isEqual(S))throw x.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${S.projectId}/${S.database}`);return{referenceValue:PT(n.firestore._databaseId||x.databaseId,n._key.path)}}if(n instanceof Or)return(function(s,T){const e=s instanceof Or?s.toArray():s;return{mapValue:{fields:{[xT]:{stringValue:yT},[Df]:{arrayValue:{values:e.map((g=>{if(typeof g!="number")throw T.createError("VectorValues must only contain numeric values.");return ST(T.serializer,g)}))}}}}}})(n,x);if(Pb(n))return n._toProto(x.serializer);throw x.createError(`Unsupported field value: ${pg(n)}`)})(d,t)}function wI(d,t){const i={};return OP(d)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wh(d,((n,x)=>{const S=eE(x,t.childContextForField(n));S!=null&&(i[n]=S)})),{mapValue:{fields:i}}}function MI(d){return!(typeof d!="object"||d===null||d instanceof Array||d instanceof Date||d instanceof xi||d instanceof ua||d instanceof rr||d instanceof Hi||d instanceof QT||d instanceof Or||Pb(d))}function RI(d,t,i){if(!MI(i)||!gP(i)){const n=pg(i);throw n==="an object"?t.createError(d+" a custom object"):t.createError(d+" "+n)}}function Dg(d,t,i){if((t=nn(t))instanceof SI)return t._internalPath;if(typeof t=="string")return IH(d,t);throw Wm("Field path arguments must be of type string or ",d,!1,void 0,i)}const bH=new RegExp("[~\\*/\\[\\]]");function IH(d,t,i){if(t.search(bH)>=0)throw Wm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,d,!1,void 0,i);try{return new SI(...t.split("."))._internalPath}catch{throw Wm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,d,!1,void 0,i)}}function Wm(d,t,i,n,x){const S=n&&!n.isEmpty(),s=x!==void 0;let T=`Function ${t}() called with invalid data`;i&&(T+=" (via `toFirestore()`)"),T+=". ";let e="";return(S||s)&&(e+=" (found",S&&(e+=` in field ${n}`),s&&(e+=` in document ${x}`),e+=")"),new qt(Bt.INVALID_ARGUMENT,T+d+e)}function LH(d,t){return d.some((i=>i.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{convertValue(t,i="none"){switch(hl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ni(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(ro(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw pe(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const n={};return Wh(t,((x,S)=>{n[x]=this.convertValue(S,i)})),n}convertVectorValue(t){var n,x,S;const i=(S=(x=(n=t.fields)==null?void 0:n[Df].arrayValue)==null?void 0:x.values)==null?void 0:S.map((s=>Ni(s.doubleValue)));return new Or(i)}convertGeoPoint(t){return new ua(Ni(t.latitude),Ni(t.longitude))}convertArray(t,i){return(t.values||[]).map((n=>this.convertValue(n,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const n=Tg(t);return n==null?null:this.convertValue(n,i);case"estimate":return this.convertTimestamp(Wd(t));default:return null}}convertTimestamp(t){const i=so(t);return new xi(i.seconds,i.nanos)}convertDocumentKey(t,i){const n=di.fromString(t);ye(Rb(n),9688,{name:t});const x=new Mh(n.get(1),n.get(3)),S=new re(n.popFirst(5));return x.isEqual(i)||tn(`Document ${S} contains a document reference within a different database (${x.projectId}/${x.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),S}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends FH{constructor(t){super(),this.firestore=t}convertBytes(t){return new rr(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Hi(this.firestore,null,i)}}function PI(){return new tE("serverTimestamp")}const SA="@firebase/firestore",CA="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(d){return(function(i,n){if(typeof i!="object"||i===null)return!1;const x=i;for(const S of n)if(S in x&&typeof x[S]=="function")return!0;return!1})(d,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t,i,n,x,S){this._firestore=t,this._userDataWriter=i,this._key=n,this._document=x,this._converter=S}get id(){return this._key.path.lastSegment()}get ref(){return new Hi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new DH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const i=this._document.data.field(Dg("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class DH extends bI{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(d){if(d.limitType==="L"&&d.explicitOrderBy.length===0)throw new qt(Bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iE{}class nE extends iE{}function LI(d,t,...i){let n=[];t instanceof iE&&n.push(t),n=n.concat(i),(function(S){const s=S.filter((e=>e instanceof rE)).length,T=S.filter((e=>e instanceof sE)).length;if(s>1||s>0&&T>0)throw new qt(Bt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const x of n)d=x._apply(d);return d}class sE extends nE{constructor(t,i,n){super(),this._field=t,this._op=i,this._value=n,this.type="where"}static _create(t,i,n){return new sE(t,i,n)}_apply(t){const i=this._parse(t);return DI(t._query,i),new uo(t.firestore,t.converter,Jy(t._query,i))}_parse(t){const i=AI(t.firestore);return(function(S,s,T,e,a,g,f){let o;if(a.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new qt(Bt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){MA(f,g);const r=[];for(const h of f)r.push(wA(e,S,h));o={arrayValue:{values:r}}}else o=wA(e,S,f)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||MA(f,g),o=PH(T,s,f,g==="in"||g==="not-in");return qe.create(a,g,o)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}class rE extends iE{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new rE(t,i)}_parse(t){const i=this._queryConstraints.map((n=>n._parse(t))).filter((n=>n.getFilters().length>0));return i.length===1?i[0]:yi.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(x,S){let s=x;const T=S.getFlattenedFilters();for(const e of T)DI(s,e),s=Jy(s,e)})(t._query,i),new uo(t.firestore,t.converter,Jy(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class aE extends nE{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new aE(t,i)}_apply(t){const i=(function(x,S,s){if(x.startAt!==null)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(x.endAt!==null)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kd(S,s)})(t._query,this._field,this._direction);return new uo(t.firestore,t.converter,r_(t._query,i))}}function FI(d,t="asc"){const i=t,n=Dg("orderBy",d);return aE._create(n,i)}class oE extends nE{constructor(t,i,n){super(),this.type=t,this._limit=i,this._limitType=n}static _create(t,i,n){return new oE(t,i,n)}_apply(t){return new uo(t.firestore,t.converter,Im(t._query,this._limit,this._limitType))}}function OH(d){return oE._create("limit",d,"F")}function wA(d,t,i){if(typeof(i=nn(i))=="string"){if(i==="")throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QP(t)&&i.indexOf("/")!==-1)throw new qt(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const n=t.path.child(di.fromString(i));if(!re.isDocumentKey(n))throw new qt(Bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Xd(d,new re(n))}if(i instanceof Hi)return Xd(d,i._key);throw new qt(Bt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pg(i)}.`)}function MA(d,t){if(!Array.isArray(d)||d.length===0)throw new qt(Bt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function DI(d,t){const i=(function(x,S){for(const s of x)for(const T of s.getFlattenedFilters())if(S.indexOf(T.op)>=0)return T.op;return null})(d.filters,(function(x){switch(x){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new qt(Bt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new qt(Bt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}function NH(d,t,i){let n;return n=d?i&&(i.merge||i.mergeFields)?d.toFirestore(t,i):d.toFirestore(t):t,n}class BH{constructor(t){let i;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),i=t.tabManager):(i=GH(void 0),i._initialize(t)),this._onlineComponentProvider=i._onlineComponentProvider,this._offlineComponentProvider=i._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function UH(d){return new BH(d)}class VH{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=jd.provider,this._offlineComponentProvider={build:i=>new mI(i,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class zH{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=jd.provider,this._offlineComponentProvider={build:i=>new fH(i,t==null?void 0:t.cacheSizeBytes)}}}function GH(d){return new VH(d==null?void 0:d.forceOwnership)}function _H(){return new zH}class zu{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class el extends bI{constructor(t,i,n,x,S,s){super(t,i,n,x,s),this._firestore=t,this._firestoreImpl=t,this.metadata=S}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new tm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const n=this._document.data.field(Dg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(Bt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=el._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}el._jsonSchemaVersion="firestore/documentSnapshot/1.0",el._jsonSchema={type:pn("string",el._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class tm extends el{data(t={}){return super.data(t)}}class Th{constructor(t,i,n,x){this._firestore=t,this._userDataWriter=i,this._snapshot=x,this.metadata=new zu(x.hasPendingWrites,x.fromCache),this.query=n}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((n=>{t.call(i,new tm(this._firestore,this._userDataWriter,n.key,n,new zu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new qt(Bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(x,S){if(x._snapshot.oldDocs.isEmpty()){let s=0;return x._snapshot.docChanges.map((T=>{const e=new tm(x._firestore,x._userDataWriter,T.doc.key,T.doc,new zu(x._snapshot.mutatedKeys.has(T.doc.key),x._snapshot.fromCache),x.query.converter);return T.doc,{type:"added",doc:e,oldIndex:-1,newIndex:s++}}))}{let s=x._snapshot.oldDocs;return x._snapshot.docChanges.filter((T=>S||T.type!==3)).map((T=>{const e=new tm(x._firestore,x._userDataWriter,T.doc.key,T.doc,new zu(x._snapshot.mutatedKeys.has(T.doc.key),x._snapshot.fromCache),x.query.converter);let a=-1,g=-1;return T.type!==0&&(a=s.indexOf(T.doc.key),s=s.delete(T.doc.key)),T.type!==1&&(s=s.add(T.doc),g=s.indexOf(T.doc.key)),{type:WH(T.type),doc:e,oldIndex:a,newIndex:g}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qt(Bt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Th._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=uT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],n=[],x=[];return this.docs.forEach((S=>{S._document!==null&&(i.push(S._document),n.push(this._userDataWriter.convertObjectMap(S._document.data.value.mapValue.fields,"previous")),x.push(S.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WH(d){switch(d){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:d})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Th._jsonSchemaVersion="firestore/querySnapshot/1.0",Th._jsonSchema={type:pn("string",Th._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(d){d=Gs(d,Hi);const t=Gs(d.firestore,dl),i=ac(t);return yI(i,d._key).then((n=>lE(t,d,n)))}function HH(d){d=Gs(d,Hi);const t=Gs(d.firestore,dl),i=ac(t),n=new Og(t);return mH(i,d._key).then((x=>new el(t,n,d._key,x,new zu(x!==null&&x.hasLocalMutations,!0),d.converter)))}function XH(d){d=Gs(d,Hi);const t=Gs(d.firestore,dl),i=ac(t);return yI(i,d._key,{source:"server"}).then((n=>lE(t,d,n)))}function YH(d){d=Gs(d,uo);const t=Gs(d.firestore,dl),i=ac(t),n=new Og(t);return II(d._query),gH(i,d._query).then((x=>new Th(t,n,d,x)))}function NI(d,t,i){d=Gs(d,Hi);const n=Gs(d.firestore,dl),x=NH(d.converter,t,i),S=AI(n);return $H(n,[RH(S,"setDoc",d._key,x,d.converter!==null,i).toMutation(d._key,Bs.none())])}function kH(d,...t){var a,g,f;d=nn(d);let i={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||AA(t[n])||(i=t[n++]);const x={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(AA(t[n])){const o=t[n];t[n]=(a=o.next)==null?void 0:a.bind(o),t[n+1]=(g=o.error)==null?void 0:g.bind(o),t[n+2]=(f=o.complete)==null?void 0:f.bind(o)}let S,s,T;if(d instanceof Hi)s=Gs(d.firestore,dl),T=xp(d._key.path),S={next:o=>{t[n]&&t[n](lE(s,d,o))},error:t[n+1],complete:t[n+2]};else{const o=Gs(d,uo);s=Gs(o.firestore,dl),T=o._query;const u=new Og(s);S={next:r=>{t[n]&&t[n](new Th(s,u,o,r))},error:t[n+1],complete:t[n+2]},II(d._query)}const e=ac(s);return vH(e,T,x,S)}function $H(d,t){const i=ac(d);return xH(i,t)}function lE(d,t,i){const n=i.docs.get(t._key),x=new Og(d);return new el(d,x,t._key,n,new zu(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){iG(qf),va(new Nr("firestore",((n,{instanceIdentifier:x,options:S})=>{const s=n.getProvider("app").getImmediate(),T=new dl(new rG(n.getProvider("auth-internal")),new lG(s,n.getProvider("app-check-internal")),kG(s,x),s);return S={useFetchStreams:i,...S},T._setSettings(S),T}),"PUBLIC").setMultipleInstances(!0)),fr(SA,CA,t),fr(SA,CA,"esm2020")})();function BI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KH=BI,UI=new Gh("auth","Firebase",BI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=new dg("@firebase/auth");function jH(d,...t){Hm.logLevel<=Qe.WARN&&Hm.warn(`Auth (${qf}): ${d}`,...t)}function em(d,...t){Hm.logLevel<=Qe.ERROR&&Hm.error(`Auth (${qf}): ${d}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(d,...t){throw hE(d,...t)}function fa(d,...t){return hE(d,...t)}function VI(d,t,i){const n={...KH(),[t]:i};return new Gh("auth","Firebase",n).create(t,{appName:d.name})}function Qa(d){return VI(d,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hE(d,...t){if(typeof d!="string"){const i=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=d.name),d._errorFactory.create(i,...n)}return UI.create(d,...t)}function Ie(d,t,...i){if(!d)throw hE(t,...i)}function ka(d){const t="INTERNAL ASSERTION FAILED: "+d;throw em(t),new Error(t)}function ao(d,t){d||ka(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){var d;return typeof self<"u"&&((d=self.location)==null?void 0:d.href)||""}function ZH(){return RA()==="http:"||RA()==="https:"}function RA(){var d;return typeof self<"u"&&((d=self.location)==null?void 0:d.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZH()||JR()||"connection"in navigator)?navigator.onLine:!0}function QH(){if(typeof navigator>"u")return null;const d=navigator;return d.languages&&d.languages[0]||d.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,i){this.shortDelay=t,this.longDelay=i,ao(i>t,"Short delay should be less than long delay!"),this.isMobile=LV()||DV()}get(){return JH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(d,t){ao(d.emulator,"Emulator should always be set here");const{url:i}=d.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{static initialize(t,i,n){this.fetchImpl=t,i&&(this.headersImpl=i),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ka("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ka("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ka("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eX=new Ap(3e4,6e4);function Tl(d,t){return d.tenantId&&!t.tenantId?{...t,tenantId:d.tenantId}:t}async function fo(d,t,i,n,x={}){return GI(d,x,async()=>{let S={},s={};n&&(t==="GET"?s=n:S={body:JSON.stringify(n)});const T=pp({key:d.config.apiKey,...s}).slice(1),e=await d._getAdditionalHeaders();e["Content-Type"]="application/json",d.languageCode&&(e["X-Firebase-Locale"]=d.languageCode);const a={method:t,headers:e,...S};return FV()||(a.referrerPolicy="no-referrer"),d.emulatorConfig&&Qf(d.emulatorConfig.host)&&(a.credentials="include"),zI.fetch()(await _I(d,d.config.apiHost,i,T),a)})}async function GI(d,t,i){d._canInitEmulator=!1;const n={...qH,...t};try{const x=new nX(d),S=await Promise.race([i(),x.promise]);x.clearNetworkTimeout();const s=await S.json();if("needConfirmation"in s)throw bv(d,"account-exists-with-different-credential",s);if(S.ok&&!("errorMessage"in s))return s;{const T=S.ok?s.errorMessage:s.error.message,[e,a]=T.split(" : ");if(e==="FEDERATED_USER_ID_ALREADY_LINKED")throw bv(d,"credential-already-in-use",s);if(e==="EMAIL_EXISTS")throw bv(d,"email-already-in-use",s);if(e==="USER_DISABLED")throw bv(d,"user-disabled",s);const g=n[e]||e.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw VI(d,g,a);Br(d,g)}}catch(x){if(x instanceof zr)throw x;Br(d,"network-request-failed",{message:String(x)})}}async function wp(d,t,i,n,x={}){const S=await fo(d,t,i,n,x);return"mfaPendingCredential"in S&&Br(d,"multi-factor-auth-required",{_serverResponse:S}),S}async function _I(d,t,i,n){const x=`${t}${i}?${n}`,S=d,s=S.config.emulator?uE(d.config,x):`${d.config.apiScheme}://${x}`;return tX.includes(i)&&(await S._persistenceManagerAvailable,S._getPersistenceType()==="COOKIE")?S._getPersistence()._getFinalTarget(s).toString():s}function iX(d){switch(d){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,n)=>{this.timer=setTimeout(()=>n(fa(this.auth,"network-request-failed")),eX.get())})}}function bv(d,t,i){const n={appName:d.name};i.email&&(n.email=i.email),i.phoneNumber&&(n.phoneNumber=i.phoneNumber);const x=fa(d,t,n);return x.customData._tokenResponse=i,x}function PA(d){return d!==void 0&&d.enterprise!==void 0}class sX{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return iX(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rX(d,t){return fo(d,"GET","/v2/recaptchaConfig",Tl(d,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aX(d,t){return fo(d,"POST","/v1/accounts:delete",t)}async function Xm(d,t){return fo(d,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(d){if(d)try{const t=new Date(Number(d));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function oX(d,t=!1){const i=nn(d),n=await i.getIdToken(t),x=fE(n);Ie(x&&x.exp&&x.auth_time&&x.iat,i.auth,"internal-error");const S=typeof x.firebase=="object"?x.firebase:void 0,s=S==null?void 0:S.sign_in_provider;return{claims:x,token:n,authTime:Ad(sx(x.auth_time)),issuedAtTime:Ad(sx(x.iat)),expirationTime:Ad(sx(x.exp)),signInProvider:s||null,signInSecondFactor:(S==null?void 0:S.sign_in_second_factor)||null}}function sx(d){return Number(d)*1e3}function fE(d){const[t,i,n]=d.split(".");if(t===void 0||i===void 0||n===void 0)return em("JWT malformed, contained fewer than 3 sections"),null;try{const x=YR(i);return x?JSON.parse(x):(em("Failed to decode base64 JWT payload"),null)}catch(x){return em("Caught error parsing JWT payload as JSON",x==null?void 0:x.toString()),null}}function bA(d){const t=fE(d);return Ie(t,"internal-error"),Ie(typeof t.exp<"u","internal-error"),Ie(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yf(d,t,i=!1){if(i)return t;try{return await t}catch(n){throw n instanceof zr&&lX(n)&&d.auth.currentUser===d&&await d.auth.signOut(),n}}function lX({code:d}){return d==="auth/user-disabled"||d==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ad(this.lastLoginAt),this.creationTime=Ad(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ym(d){var f;const t=d.auth,i=await d.getIdToken(),n=await Yf(d,Xm(t,{idToken:i}));Ie(n==null?void 0:n.users.length,t,"internal-error");const x=n.users[0];d._notifyReloadListener(x);const S=(f=x.providerUserInfo)!=null&&f.length?WI(x.providerUserInfo):[],s=fX(d.providerData,S),T=d.isAnonymous,e=!(d.email&&x.passwordHash)&&!(s!=null&&s.length),a=T?e:!1,g={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:s,metadata:new c1(x.createdAt,x.lastLoginAt),isAnonymous:a};Object.assign(d,g)}async function uX(d){const t=nn(d);await Ym(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function fX(d,t){return[...d.filter(n=>!t.some(x=>x.providerId===n.providerId)),...t]}function WI(d){return d.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cX(d,t){const i=await GI(d,{},async()=>{const n=pp({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:x,apiKey:S}=d.config,s=await _I(d,x,"/v1/token",`key=${S}`),T=await d._getAdditionalHeaders();T["Content-Type"]="application/x-www-form-urlencoded";const e={method:"POST",headers:T,body:n};return d.emulatorConfig&&Qf(d.emulatorConfig.host)&&(e.credentials="include"),zI.fetch()(s,e)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function dX(d,t){return fo(d,"POST","/v2/accounts:revokeToken",Tl(d,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ie(t.idToken,"internal-error"),Ie(typeof t.idToken<"u","internal-error"),Ie(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):bA(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Ie(t.length!==0,"internal-error");const i=bA(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:n,refreshToken:x,expiresIn:S}=await cX(t,i);this.updateTokensAndExpiration(n,x,Number(S))}updateTokensAndExpiration(t,i,n){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,i){const{refreshToken:n,accessToken:x,expirationTime:S}=i,s=new ju;return n&&(Ie(typeof n=="string","internal-error",{appName:t}),s.refreshToken=n),x&&(Ie(typeof x=="string","internal-error",{appName:t}),s.accessToken=x),S&&(Ie(typeof S=="number","internal-error",{appName:t}),s.expirationTime=S),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ju,this.toJSON())}_performRefresh(){return ka("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(d,t){Ie(typeof d=="string"||typeof d>"u","internal-error",{appName:t})}class Lr{constructor({uid:t,auth:i,stsTokenManager:n,...x}){this.providerId="firebase",this.proactiveRefresh=new hX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new c1(x.createdAt||void 0,x.lastLoginAt||void 0)}async getIdToken(t){const i=await Yf(this,this.stsTokenManager.getToken(this.auth,t));return Ie(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return oX(this,t)}reload(){return uX(this)}_assign(t){this!==t&&(Ie(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Lr({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),i&&await Ym(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(Qa(this.auth));const t=await this.getIdToken();return await Yf(this,aX(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const n=i.displayName??void 0,x=i.email??void 0,S=i.phoneNumber??void 0,s=i.photoURL??void 0,T=i.tenantId??void 0,e=i._redirectEventId??void 0,a=i.createdAt??void 0,g=i.lastLoginAt??void 0,{uid:f,emailVerified:o,isAnonymous:u,providerData:r,stsTokenManager:h}=i;Ie(f&&h,t,"internal-error");const c=ju.fromJSON(this.name,h);Ie(typeof f=="string",t,"internal-error"),Io(n,t.name),Io(x,t.name),Ie(typeof o=="boolean",t,"internal-error"),Ie(typeof u=="boolean",t,"internal-error"),Io(S,t.name),Io(s,t.name),Io(T,t.name),Io(e,t.name),Io(a,t.name),Io(g,t.name);const l=new Lr({uid:f,auth:t,email:x,emailVerified:o,displayName:n,isAnonymous:u,photoURL:s,phoneNumber:S,tenantId:T,stsTokenManager:c,createdAt:a,lastLoginAt:g});return r&&Array.isArray(r)&&(l.providerData=r.map(p=>({...p}))),e&&(l._redirectEventId=e),l}static async _fromIdTokenResponse(t,i,n=!1){const x=new ju;x.updateFromServerResponse(i);const S=new Lr({uid:i.localId,auth:t,stsTokenManager:x,isAnonymous:n});return await Ym(S),S}static async _fromGetAccountInfoResponse(t,i,n){const x=i.users[0];Ie(x.localId!==void 0,"internal-error");const S=x.providerUserInfo!==void 0?WI(x.providerUserInfo):[],s=!(x.email&&x.passwordHash)&&!(S!=null&&S.length),T=new ju;T.updateFromIdToken(n);const e=new Lr({uid:x.localId,auth:t,stsTokenManager:T,isAnonymous:s}),a={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:S,metadata:new c1(x.createdAt,x.lastLoginAt),isAnonymous:!(x.email&&x.passwordHash)&&!(S!=null&&S.length)};return Object.assign(e,a),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new Map;function $a(d){ao(d instanceof Function,"Expected a class definition");let t=IA.get(d);return t?(ao(t instanceof d,"Instance stored in cache mismatched with class"),t):(t=new d,IA.set(d,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}HI.type="NONE";const LA=HI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(d,t,i){return`firebase:${d}:${t}:${i}`}class Zu{constructor(t,i,n){this.persistence=t,this.auth=i,this.userKey=n;const{config:x,name:S}=this.auth;this.fullUserKey=im(this.userKey,x.apiKey,S),this.fullPersistenceKey=im("persistence",x.apiKey,S),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Xm(this.auth,{idToken:t}).catch(()=>{});return i?Lr._fromGetAccountInfoResponse(this.auth,i,t):null}return Lr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,n="authUser"){if(!i.length)return new Zu($a(LA),t,n);const x=(await Promise.all(i.map(async a=>{if(await a._isAvailable())return a}))).filter(a=>a);let S=x[0]||$a(LA);const s=im(n,t.config.apiKey,t.name);let T=null;for(const a of i)try{const g=await a._get(s);if(g){let f;if(typeof g=="string"){const o=await Xm(t,{idToken:g}).catch(()=>{});if(!o)break;f=await Lr._fromGetAccountInfoResponse(t,o,g)}else f=Lr._fromJSON(t,g);a!==S&&(T=f),S=a;break}}catch{}const e=x.filter(a=>a._shouldAllowMigration);return!S._shouldAllowMigration||!e.length?new Zu(S,t,n):(S=e[0],T&&await S._set(s,T.toJSON()),await Promise.all(i.map(async a=>{if(a!==S)try{await a._remove(s)}catch{}})),new Zu(S,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(d){const t=d.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($I(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(XI(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jI(t))return"Blackberry";if(ZI(t))return"Webos";if(YI(t))return"Safari";if((t.includes("chrome/")||kI(t))&&!t.includes("edge/"))return"Chrome";if(KI(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=d.match(i);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function XI(d=Sn()){return/firefox\//i.test(d)}function YI(d=Sn()){const t=d.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function kI(d=Sn()){return/crios\//i.test(d)}function $I(d=Sn()){return/iemobile/i.test(d)}function KI(d=Sn()){return/android/i.test(d)}function jI(d=Sn()){return/blackberry/i.test(d)}function ZI(d=Sn()){return/webos/i.test(d)}function cE(d=Sn()){return/iphone|ipad|ipod/i.test(d)||/macintosh/i.test(d)&&/mobile/i.test(d)}function pX(d=Sn()){var t;return cE(d)&&!!((t=window.navigator)!=null&&t.standalone)}function vX(){return OV()&&document.documentMode===10}function JI(d=Sn()){return cE(d)||KI(d)||ZI(d)||jI(d)||/windows phone/i.test(d)||$I(d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(d,t=[]){let i;switch(d){case"Browser":i=FA(Sn());break;case"Worker":i=`${FA(Sn())}-${d}`;break;default:i=d}const n=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${qf}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mX{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const n=S=>new Promise((s,T)=>{try{const e=t(S);s(e)}catch(e){T(e)}});n.onAbort=i,this.queue.push(n);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const n of this.queue)await n(t),n.onAbort&&i.push(n.onAbort)}catch(n){i.reverse();for(const x of i)try{x()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gX(d,t={}){return fo(d,"GET","/v2/passwordPolicy",Tl(d,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xX=6;class yX{constructor(t){var n;const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??xX,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const n=this.customStrengthOptions.minPasswordLength,x=this.customStrengthOptions.maxPasswordLength;n&&(i.meetsMinPasswordLength=t.length>=n),x&&(i.meetsMaxPasswordLength=t.length<=x)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let n;for(let x=0;x<t.length;x++)n=t.charAt(x),this.updatePasswordCharacterOptionsStatuses(i,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,i,n,x,S){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=x)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TX{constructor(t,i,n,x){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=n,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DA(this),this.idTokenSubscription=new DA(this),this.beforeStateQueue=new mX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=x.sdkClientVersion,this._persistenceManagerAvailable=new Promise(S=>this._resolvePersistenceManagerAvailable=S)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=$a(i)),this._initializationPromise=this.queue(async()=>{var n,x,S;if(!this._deleted&&(this.persistenceManager=await Zu.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((x=this._popupRedirectResolver)!=null&&x._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((S=this.currentUser)==null?void 0:S.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Xm(this,{idToken:t}),n=await Lr._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(n)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var S;if(sr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(T=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(T,T))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let n=i,x=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(S=this.redirectUser)==null?void 0:S._redirectEventId,T=n==null?void 0:n._redirectEventId,e=await this.tryRedirectSignIn(t);(!s||s===T)&&(e!=null&&e.user)&&(n=e.user,x=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(x)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Ym(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=QH()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(sr(this.app))return Promise.reject(Qa(this));const i=t?nn(t):null;return i&&Ie(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Ie(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(Qa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return sr(this.app)?Promise.reject(Qa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($a(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gX(this),i=new yX(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Gh("auth","Firebase",t())}onAuthStateChanged(t,i,n){return this.registerStateListener(this.authStateSubscription,t,i,n)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,n){return this.registerStateListener(this.idTokenSubscription,t,i,n)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(n.tenantId=this.tenantId),await dX(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,i){const n=await this.getOrInitRedirectPersistenceManager(i);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&$a(t)||this._popupRedirectResolver;Ie(i,this,"argument-error"),this.redirectPersistenceManager=await Zu.create(this,[$a(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,n;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)==null?void 0:i._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((i=this.currentUser)==null?void 0:i.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,n,x){if(this._deleted)return()=>{};const S=typeof i=="function"?i:i.next.bind(i);let s=!1;const T=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(T,this,"internal-error"),T.then(()=>{s||S(this.currentUser)}),typeof i=="function"){const e=t.addObserver(i,n,x);return()=>{s=!0,e()}}else{const e=t.addObserver(i);return()=>{s=!0,e()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=QI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var x;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((x=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:x.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var i;if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((i=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getToken());return t!=null&&t.error&&jH(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Xh(d){return nn(d)}class DA{constructor(t){this.auth=t,this.observer=null,this.addObserver=GV(i=>this.observer=i)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ng={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EX(d){Ng=d}function qI(d){return Ng.loadJS(d)}function SX(){return Ng.recaptchaEnterpriseScript}function CX(){return Ng.gapiScript}function AX(d){return`__${d}${Math.floor(Math.random()*1e6)}`}class wX{constructor(){this.enterprise=new MX}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class MX{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const RX="recaptcha-enterprise",t3="NO_RECAPTCHA";class PX{constructor(t){this.type=RX,this.auth=Xh(t)}async verify(t="verify",i=!1){async function n(S){if(!i){if(S.tenantId==null&&S._agentRecaptchaConfig!=null)return S._agentRecaptchaConfig.siteKey;if(S.tenantId!=null&&S._tenantRecaptchaConfigs[S.tenantId]!==void 0)return S._tenantRecaptchaConfigs[S.tenantId].siteKey}return new Promise(async(s,T)=>{rX(S,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(e=>{if(e.recaptchaKey===void 0)T(new Error("recaptcha Enterprise site key undefined"));else{const a=new sX(e);return S.tenantId==null?S._agentRecaptchaConfig=a:S._tenantRecaptchaConfigs[S.tenantId]=a,s(a.siteKey)}}).catch(e=>{T(e)})})}function x(S,s,T){const e=window.grecaptcha;PA(e)?e.enterprise.ready(()=>{e.enterprise.execute(S,{action:t}).then(a=>{s(a)}).catch(()=>{s(t3)})}):T(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wX().execute("siteKey",{action:"verify"}):new Promise((S,s)=>{n(this.auth).then(T=>{if(!i&&PA(window.grecaptcha))x(T,S,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let e=SX();e.length!==0&&(e+=T),qI(e).then(()=>{x(T,S,s)}).catch(a=>{s(a)})}}).catch(T=>{s(T)})})}}async function OA(d,t,i,n=!1,x=!1){const S=new PX(d);let s;if(x)s=t3;else try{s=await S.verify(i)}catch{s=await S.verify(i,!0)}const T={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in T){const e=T.phoneEnrollmentInfo.phoneNumber,a=T.phoneEnrollmentInfo.recaptchaToken;Object.assign(T,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:a,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in T){const e=T.phoneSignInInfo.recaptchaToken;Object.assign(T,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return T}return n?Object.assign(T,{captchaResp:s}):Object.assign(T,{captchaResponse:s}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T}async function d1(d,t,i,n,x){var S;if((S=d._getRecaptchaConfig())!=null&&S.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await OA(d,t,i,i==="getOobCode");return n(d,s)}else return n(d,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const T=await OA(d,t,i,i==="getOobCode");return n(d,T)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bX(d,t){const i=_h(d,"auth");if(i.isInitialized()){const x=i.getImmediate(),S=i.getOptions();if(ll(S,t??{}))return x;Br(x,"already-initialized")}return i.initialize({options:t})}function IX(d,t){const i=(t==null?void 0:t.persistence)||[],n=(Array.isArray(i)?i:[i]).map($a);t!=null&&t.errorMap&&d._updateErrorMap(t.errorMap),d._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function LX(d,t,i){const n=Xh(d);Ie(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const x=!1,S=e3(t),{host:s,port:T}=FX(t),e=T===null?"":`:${T}`,a={url:`${S}//${s}${e}/`},g=Object.freeze({host:s,port:T,protocol:S.replace(":",""),options:Object.freeze({disableWarnings:x})});if(!n._canInitEmulator){Ie(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ie(ll(a,n.config.emulator)&&ll(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=a,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,Qf(s)?(jR(`${S}//${s}${e}`),IV("Auth",!0)):DX()}function e3(d){const t=d.indexOf(":");return t<0?"":d.substr(0,t+1)}function FX(d){const t=e3(d),i=/(\/\/)?([^?#/]+)/.exec(d.substr(t.length));if(!i)return{host:"",port:null};const n=i[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(n);if(x){const S=x[1];return{host:S,port:NA(n.substr(S.length+1))}}else{const[S,s]=n.split(":");return{host:S,port:NA(s)}}}function NA(d){if(!d)return null;const t=Number(d);return isNaN(t)?null:t}function DX(){function d(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return ka("not implemented")}_getIdTokenResponse(t){return ka("not implemented")}_linkToIdToken(t,i){return ka("not implemented")}_getReauthenticationResolver(t){return ka("not implemented")}}async function OX(d,t){return fo(d,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NX(d,t){return wp(d,"POST","/v1/accounts:signInWithPassword",Tl(d,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BX(d,t){return wp(d,"POST","/v1/accounts:signInWithEmailLink",Tl(d,t))}async function UX(d,t){return wp(d,"POST","/v1/accounts:signInWithEmailLink",Tl(d,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends dE{constructor(t,i,n,x=null){super("password",n),this._email=t,this._password=i,this._tenantId=x}static _fromEmailAndPassword(t,i){return new Zd(t,i,"password")}static _fromEmailAndCode(t,i,n=null){return new Zd(t,i,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d1(t,i,"signInWithPassword",NX);case"emailLink":return BX(t,{email:this._email,oobCode:this._password});default:Br(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const n={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d1(t,n,"signUpPassword",OX);case"emailLink":return UX(t,{idToken:i,email:this._email,oobCode:this._password});default:Br(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(d,t){return wp(d,"POST","/v1/accounts:signInWithIdp",Tl(d,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VX="http://localhost";class Fh extends dE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Fh(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Br("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:x,...S}=i;if(!n||!x)return null;const s=new Fh(n,x);return s.idToken=S.idToken||void 0,s.accessToken=S.accessToken||void 0,s.secret=S.secret,s.nonce=S.nonce,s.pendingToken=S.pendingToken||null,s}_getIdTokenResponse(t){const i=this.buildRequest();return Ju(t,i)}_linkToIdToken(t,i){const n=this.buildRequest();return n.idToken=i,Ju(t,n)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Ju(t,i)}buildRequest(){const t={requestUri:VX,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=pp(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zX(d){switch(d){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GX(d){const t=ed(id(d)).link,i=t?ed(id(t)).deep_link_id:null,n=ed(id(d)).deep_link_id;return(n?ed(id(n)).link:null)||n||i||t||d}class pE{constructor(t){const i=ed(id(t)),n=i.apiKey??null,x=i.oobCode??null,S=zX(i.mode??null);Ie(n&&x&&S,"argument-error"),this.apiKey=n,this.operation=S,this.code=x,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=GX(t);try{return new pE(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this.providerId=oc.PROVIDER_ID}static credential(t,i){return Zd._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const n=pE.parseLink(i);return Ie(n,"argument-error"),Zd._fromEmailAndCode(t,n.code,n.tenantId)}}oc.PROVIDER_ID="password";oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends i3{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Mp{constructor(){super("facebook.com")}static credential(t){return Fh._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Do.credentialFromTaggedObject(t)}static credentialFromError(t){return Do.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Do.credential(t.oauthAccessToken)}catch{return null}}}Do.FACEBOOK_SIGN_IN_METHOD="facebook.com";Do.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Mp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Fh._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Oo.credentialFromTaggedObject(t)}static credentialFromError(t){return Oo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:n}=t;if(!i&&!n)return null;try{return Oo.credential(i,n)}catch{return null}}}Oo.GOOGLE_SIGN_IN_METHOD="google.com";Oo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Mp{constructor(){super("github.com")}static credential(t){return Fh._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return No.credentialFromTaggedObject(t)}static credentialFromError(t){return No.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return No.credential(t.oauthAccessToken)}catch{return null}}}No.GITHUB_SIGN_IN_METHOD="github.com";No.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends Mp{constructor(){super("twitter.com")}static credential(t,i){return Fh._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Bo.credentialFromTaggedObject(t)}static credentialFromError(t){return Bo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:n}=t;if(!i||!n)return null;try{return Bo.credential(i,n)}catch{return null}}}Bo.TWITTER_SIGN_IN_METHOD="twitter.com";Bo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _X(d,t){return wp(d,"POST","/v1/accounts:signUp",Tl(d,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,n,x=!1){const S=await Lr._fromIdTokenResponse(t,n,x),s=BA(n);return new Dh({user:S,providerId:s,_tokenResponse:n,operationType:i})}static async _forOperation(t,i,n){await t._updateTokensIfNecessary(n,!0);const x=BA(n);return new Dh({user:t,providerId:x,_tokenResponse:n,operationType:i})}}function BA(d){return d.providerId?d.providerId:"phoneNumber"in d?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends zr{constructor(t,i,n,x){super(i.code,i.message),this.operationType=n,this.user=x,Object.setPrototypeOf(this,km.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,i,n,x){return new km(t,i,n,x)}}function n3(d,t,i,n){return(t==="reauthenticate"?i._getReauthenticationResolver(d):i._getIdTokenResponse(d)).catch(S=>{throw S.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(d,S,t,n):S})}async function WX(d,t,i=!1){const n=await Yf(d,t._linkToIdToken(d.auth,await d.getIdToken()),i);return Dh._forOperation(d,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HX(d,t,i=!1){const{auth:n}=d;if(sr(n.app))return Promise.reject(Qa(n));const x="reauthenticate";try{const S=await Yf(d,n3(n,x,t,d),i);Ie(S.idToken,n,"internal-error");const s=fE(S.idToken);Ie(s,n,"internal-error");const{sub:T}=s;return Ie(d.uid===T,n,"user-mismatch"),Dh._forOperation(d,x,S)}catch(S){throw(S==null?void 0:S.code)==="auth/user-not-found"&&Br(n,"user-mismatch"),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s3(d,t,i=!1){if(sr(d.app))return Promise.reject(Qa(d));const n="signIn",x=await n3(d,n,t),S=await Dh._fromIdTokenResponse(d,n,x);return i||await d._updateCurrentUser(S.user),S}async function XX(d,t){return s3(Xh(d),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(d){const t=Xh(d);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function a3(d,t,i){if(sr(d.app))return Promise.reject(Qa(d));const n=Xh(d),s=await d1(n,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_X).catch(e=>{throw e.code==="auth/password-does-not-meet-requirements"&&r3(d),e}),T=await Dh._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(T.user),T}function YX(d,t,i){return sr(d.app)?Promise.reject(Qa(d)):XX(nn(d),oc.credential(t,i)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&r3(d),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kX(d,t){return fo(d,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(d,{displayName:t,photoURL:i}){if(t===void 0&&i===void 0)return;const n=nn(d),S={idToken:await n.getIdToken(),displayName:t,photoUrl:i,returnSecureToken:!0},s=await Yf(n,kX(n.auth,S));n.displayName=s.displayName||null,n.photoURL=s.photoUrl||null;const T=n.providerData.find(({providerId:e})=>e==="password");T&&(T.displayName=n.displayName,T.photoURL=n.photoURL),await n._updateTokensIfNecessary(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $X(d,t){return nn(d).setPersistence(t)}function KX(d,t,i,n){return nn(d).onIdTokenChanged(t,i,n)}function jX(d,t,i){return nn(d).beforeAuthStateChanged(t,i)}function ZX(d,t,i,n){return nn(d).onAuthStateChanged(t,i,n)}function JX(d){return nn(d).signOut()}const $m="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem($m,"1"),this.storage.removeItem($m),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QX=1e3,qX=10;class h3 extends l3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const n=this.storage.getItem(i),x=this.localCache[i];n!==x&&t(i,x,n)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((s,T,e)=>{this.notifyListeners(s,e)});return}const n=t.key;i?this.detachListener():this.stopPolling();const x=()=>{const s=this.storage.getItem(n);!i&&this.localCache[n]===s||this.notifyListeners(n,s)},S=this.storage.getItem(n);vX()&&S!==t.newValue&&t.newValue!==t.oldValue?setTimeout(x,qX):x()}notifyListeners(t,i){this.localCache[t]=i;const n=this.listeners[t];if(n)for(const x of Array.from(n))x(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:n}),!0)})},QX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}h3.type="LOCAL";const u3=h3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3 extends l3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}f3.type="SESSION";const c3=f3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tY(d){return Promise.all(d.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(x=>x.isListeningto(t));if(i)return i;const n=new Bg(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:n,eventType:x,data:S}=i.data,s=this.handlersMap[x];if(!(s!=null&&s.size))return;i.ports[0].postMessage({status:"ack",eventId:n,eventType:x});const T=Array.from(s).map(async a=>a(i.origin,S)),e=await tY(T);i.ports[0].postMessage({status:"done",eventId:n,eventType:x,response:e})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(d="",t=10){let i="";for(let n=0;n<t;n++)i+=Math.floor(Math.random()*10);return d+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,n=50){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let S,s;return new Promise((T,e)=>{const a=vE("",20);x.port1.start();const g=setTimeout(()=>{e(new Error("unsupported_event"))},n);s={messageChannel:x,onMessage(f){const o=f;if(o.data.eventId===a)switch(o.data.status){case"ack":clearTimeout(g),S=setTimeout(()=>{e(new Error("timeout"))},3e3);break;case"done":clearTimeout(S),T(o.data.response);break;default:clearTimeout(g),clearTimeout(S),e(new Error("invalid_response"));break}}},this.handlers.add(s),x.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:a,data:i},[x.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(){return window}function iY(d){ca().location.href=d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(){return typeof ca().WorkerGlobalScope<"u"&&typeof ca().importScripts=="function"}async function nY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sY(){var d;return((d=navigator==null?void 0:navigator.serviceWorker)==null?void 0:d.controller)||null}function rY(){return d3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="firebaseLocalStorageDb",aY=1,Km="firebaseLocalStorage",v3="fbase_key";class Rp{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Ug(d,t){return d.transaction([Km],t?"readwrite":"readonly").objectStore(Km)}function oY(){const d=indexedDB.deleteDatabase(p3);return new Rp(d).toPromise()}function p1(){const d=indexedDB.open(p3,aY);return new Promise((t,i)=>{d.addEventListener("error",()=>{i(d.error)}),d.addEventListener("upgradeneeded",()=>{const n=d.result;try{n.createObjectStore(Km,{keyPath:v3})}catch(x){i(x)}}),d.addEventListener("success",async()=>{const n=d.result;n.objectStoreNames.contains(Km)?t(n):(n.close(),await oY(),t(await p1()))})})}async function UA(d,t,i){const n=Ug(d,!0).put({[v3]:t,value:i});return new Rp(n).toPromise()}async function lY(d,t){const i=Ug(d,!1).get(t),n=await new Rp(i).toPromise();return n===void 0?null:n.value}function VA(d,t){const i=Ug(d,!0).delete(t);return new Rp(i).toPromise()}const hY=800,uY=3;class m3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await p1(),this.db)}async _withRetries(t){let i=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(i++>uY)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return d3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bg._getInstance(rY()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var i,n;if(this.activeServiceWorker=await nY(),!this.activeServiceWorker)return;this.sender=new eY(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(i=t[0])!=null&&i.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||sY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await p1();return await UA(t,$m,"1"),await VA(t,$m),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(n=>UA(n,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(n=>lY(n,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>VA(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(x=>{const S=Ug(x,!1).getAll();return new Rp(S).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],n=new Set;if(t.length!==0)for(const{fbase_key:x,value:S}of t)n.add(x),JSON.stringify(this.localCache[x])!==JSON.stringify(S)&&(this.notifyListeners(x,S),i.push(x));for(const x of Object.keys(this.localCache))this.localCache[x]&&!n.has(x)&&(this.notifyListeners(x,null),i.push(x));return i}notifyListeners(t,i){this.localCache[t]=i;const n=this.listeners[t];if(n)for(const x of Array.from(n))x(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}m3.type="LOCAL";const fY=m3;new Ap(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cY(d,t){return t?$a(t):(Ie(d._popupRedirectResolver,d,"argument-error"),d._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends dE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ju(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Ju(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Ju(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function dY(d){return s3(d.auth,new mE(d),d.bypassAuthState)}function pY(d){const{auth:t,user:i}=d;return Ie(i,t,"internal-error"),HX(i,new mE(d),d.bypassAuthState)}async function vY(d){const{auth:t,user:i}=d;return Ie(i,t,"internal-error"),WX(i,new mE(d),d.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(t,i,n,x,S=!1){this.auth=t,this.resolver=n,this.user=x,this.bypassAuthState=S,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:n,postBody:x,tenantId:S,error:s,type:T}=t;if(s){this.reject(s);return}const e={auth:this.auth,requestUri:i,sessionId:n,tenantId:S||void 0,postBody:x||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(T)(e))}catch(a){this.reject(a)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return dY;case"linkViaPopup":case"linkViaRedirect":return vY;case"reauthViaPopup":case"reauthViaRedirect":return pY;default:Br(this.auth,"internal-error")}}resolve(t){ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mY=new Ap(2e3,1e4);class Gu extends g3{constructor(t,i,n,x,S){super(t,i,x,S),this.provider=n,this.authWindow=null,this.pollId=null,Gu.currentPopupAction&&Gu.currentPopupAction.cancel(),Gu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ie(t,this.auth,"internal-error"),t}async onExecution(){ao(this.filter.length===1,"Popup operations only handle one event");const t=vE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(fa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(fa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gu.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,n;if((n=(i=this.authWindow)==null?void 0:i.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,mY.get())};t()}}Gu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY="pendingRedirect",nm=new Map;class xY extends g3{constructor(t,i,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,n),this.eventId=null}async execute(){let t=nm.get(this.auth._key());if(!t){try{const n=await yY(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(i){t=()=>Promise.reject(i)}nm.set(this.auth._key(),t)}return this.bypassAuthState||nm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yY(d,t){const i=SY(t),n=EY(d);if(!await n._isAvailable())return!1;const x=await n._get(i)==="true";return await n._remove(i),x}function TY(d,t){nm.set(d._key(),t)}function EY(d){return $a(d._redirectPersistence)}function SY(d){return im(gY,d.config.apiKey,d.name)}async function CY(d,t,i=!1){if(sr(d.app))return Promise.reject(Qa(d));const n=Xh(d),x=cY(n,t),s=await new xY(n,x,i).execute();return s&&!i&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,t)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY=600*1e3;class wY{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(i=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!MY(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var n;if(t.error&&!x3(t)){const x=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";i.onError(fa(this.auth,x))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const n=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=AY&&this.cachedEventUids.clear(),this.cachedEventUids.has(zA(t))}saveEventToCache(t){this.cachedEventUids.add(zA(t)),this.lastProcessedEventTime=Date.now()}}function zA(d){return[d.type,d.eventId,d.sessionId,d.tenantId].filter(t=>t).join("-")}function x3({type:d,error:t}){return d==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function MY(d){switch(d.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x3(d);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RY(d,t={}){return fo(d,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bY=/^https?/;async function IY(d){if(d.config.emulator)return;const{authorizedDomains:t}=await RY(d);for(const i of t)try{if(LY(i))return}catch{}Br(d,"unauthorized-domain")}function LY(d){const t=f1(),{protocol:i,hostname:n}=new URL(t);if(d.startsWith("chrome-extension://")){const s=new URL(d);return s.hostname===""&&n===""?i==="chrome-extension:"&&d.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&s.hostname===n}if(!bY.test(i))return!1;if(PY.test(d))return n===d;const x=d.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY=new Ap(3e4,6e4);function GA(){const d=ca().___jsl;if(d!=null&&d.H){for(const t of Object.keys(d.H))if(d.H[t].r=d.H[t].r||[],d.H[t].L=d.H[t].L||[],d.H[t].r=[...d.H[t].L],d.CP)for(let i=0;i<d.CP.length;i++)d.CP[i]=null}}function DY(d){return new Promise((t,i)=>{var x,S,s;function n(){GA(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{GA(),i(fa(d,"network-request-failed"))},timeout:FY.get()})}if((S=(x=ca().gapi)==null?void 0:x.iframes)!=null&&S.Iframe)t(gapi.iframes.getContext());else if((s=ca().gapi)!=null&&s.load)n();else{const T=AX("iframefcb");return ca()[T]=()=>{gapi.load?n():i(fa(d,"network-request-failed"))},qI(`${CX()}?onload=${T}`).catch(e=>i(e))}}).catch(t=>{throw sm=null,t})}let sm=null;function OY(d){return sm=sm||DY(d),sm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NY=new Ap(5e3,15e3),BY="__/auth/iframe",UY="emulator/auth/iframe",VY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GY(d){const t=d.config;Ie(t.authDomain,d,"auth-domain-config-required");const i=t.emulator?uE(t,UY):`https://${d.config.authDomain}/${BY}`,n={apiKey:t.apiKey,appName:d.name,v:qf},x=zY.get(d.config.apiHost);x&&(n.eid=x);const S=d._getFrameworks();return S.length&&(n.fw=S.join(",")),`${i}?${pp(n).slice(1)}`}async function _Y(d){const t=await OY(d),i=ca().gapi;return Ie(i,d,"internal-error"),t.open({where:document.body,url:GY(d),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VY,dontclear:!0},n=>new Promise(async(x,S)=>{await n.restyle({setHideOnLeave:!1});const s=fa(d,"network-request-failed"),T=ca().setTimeout(()=>{S(s)},NY.get());function e(){ca().clearTimeout(T),x(n)}n.ping(e).then(e,()=>{S(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HY=500,XY=600,YY="_blank",kY="http://localhost";class _A{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $Y(d,t,i,n=HY,x=XY){const S=Math.max((window.screen.availHeight-x)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let T="";const e={...WY,width:n.toString(),height:x.toString(),top:S,left:s},a=Sn().toLowerCase();i&&(T=kI(a)?YY:i),XI(a)&&(t=t||kY,e.scrollbars="yes");const g=Object.entries(e).reduce((o,[u,r])=>`${o}${u}=${r},`,"");if(pX(a)&&T!=="_self")return KY(t||"",T),new _A(null);const f=window.open(t||"",T,g);Ie(f,d,"popup-blocked");try{f.focus()}catch{}return new _A(f)}function KY(d,t){const i=document.createElement("a");i.href=d,i.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jY="__/auth/handler",ZY="emulator/auth/handler",JY=encodeURIComponent("fac");async function WA(d,t,i,n,x,S){Ie(d.config.authDomain,d,"auth-domain-config-required"),Ie(d.config.apiKey,d,"invalid-api-key");const s={apiKey:d.config.apiKey,appName:d.name,authType:i,redirectUrl:n,v:qf,eventId:x};if(t instanceof i3){t.setDefaultLanguage(d.languageCode),s.providerId=t.providerId||"",zV(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[g,f]of Object.entries({}))s[g]=f}if(t instanceof Mp){const g=t.getScopes().filter(f=>f!=="");g.length>0&&(s.scopes=g.join(","))}d.tenantId&&(s.tid=d.tenantId);const T=s;for(const g of Object.keys(T))T[g]===void 0&&delete T[g];const e=await d._getAppCheckToken(),a=e?`#${JY}=${encodeURIComponent(e)}`:"";return`${QY(d)}?${pp(T).slice(1)}${a}`}function QY({config:d}){return d.emulator?uE(d,ZY):`https://${d.authDomain}/${jY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="webStorageSupport";class qY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=c3,this._completeRedirectFn=CY,this._overrideRedirectResult=TY}async _openPopup(t,i,n,x){var s;ao((s=this.eventManagers[t._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const S=await WA(t,i,n,f1(),x);return $Y(t,S,vE())}async _openRedirect(t,i,n,x){await this._originValidation(t);const S=await WA(t,i,n,f1(),x);return iY(S),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:x,promise:S}=this.eventManagers[i];return x?Promise.resolve(x):(ao(S,"If manager is not set, promise should be"),S)}const n=this.initAndGetManager(t);return this.eventManagers[i]={promise:n},n.catch(()=>{delete this.eventManagers[i]}),n}async initAndGetManager(t){const i=await _Y(t),n=new wY(t);return i.register("authEvent",x=>(Ie(x==null?void 0:x.authEvent,t,"invalid-auth-event"),{status:n.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=i,n}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(rx,{type:rx},x=>{var s;const S=(s=x==null?void 0:x[0])==null?void 0:s[rx];S!==void 0&&i(!!S),Br(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=IY(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return JI()||YI()||cE()}}const tk=qY;var HA="@firebase/auth",XA="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(d){switch(d){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nk(d){va(new Nr("auth",(t,{options:i})=>{const n=t.getProvider("app").getImmediate(),x=t.getProvider("heartbeat"),S=t.getProvider("app-check-internal"),{apiKey:s,authDomain:T}=n.options;Ie(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const e={apiKey:s,authDomain:T,clientPlatform:d,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QI(d)},a=new TX(n,x,S,e);return IX(a,i),a},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,n)=>{t.getProvider("auth-internal").initialize()})),va(new Nr("auth-internal",t=>{const i=Xh(t.getProvider("auth").getImmediate());return(n=>new ek(n))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(HA,XA,ik(d)),fr(HA,XA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=300,rk=KR("authIdTokenMaxAge")||sk;let YA=null;const ak=d=>async t=>{const i=t&&await t.getIdTokenResult(),n=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(n&&n>rk)return;const x=i==null?void 0:i.token;YA!==x&&(YA=x,await fetch(d,{method:x?"POST":"DELETE",headers:x?{Authorization:`Bearer ${x}`}:{}}))};function ok(d=rP()){const t=_h(d,"auth");if(t.isInitialized())return t.getImmediate();const i=bX(d,{popupRedirectResolver:tk,persistence:[fY,u3,c3]}),n=KR("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const S=new URL(n,location.origin);if(location.origin===S.origin){const s=ak(S.toString());jX(i,s,()=>s(i.currentUser)),KX(i,T=>s(T))}}const x=MV("auth");return x&&LX(i,`http://${x}`),i}function lk(){var d;return((d=document.getElementsByTagName("head"))==null?void 0:d[0])??document}EX({loadJS(d){return new Promise((t,i)=>{const n=document.createElement("script");n.setAttribute("src",d),n.onload=t,n.onerror=x=>{const S=fa("internal-error");S.customData=x,i(S)},n.type="text/javascript",n.charset="UTF-8",lk().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nk("Browser");const y3="@firebase/installations",gE="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=1e4,E3=`w:${gE}`,S3="FIS_v2",hk="https://firebaseinstallations.googleapis.com/v1",uk=3600*1e3,fk="installations",ck="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Oh=new Gh(fk,ck,dk);function C3(d){return d instanceof zr&&d.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3({projectId:d}){return`${hk}/projects/${d}/installations`}function w3(d){return{token:d.token,requestStatus:2,expiresIn:vk(d.expiresIn),creationTime:Date.now()}}async function M3(d,t){const n=(await t.json()).error;return Oh.create("request-failed",{requestName:d,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function R3({apiKey:d}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":d})}function pk(d,{refreshToken:t}){const i=R3(d);return i.append("Authorization",mk(t)),i}async function P3(d){const t=await d();return t.status>=500&&t.status<600?d():t}function vk(d){return Number(d.replace("s","000"))}function mk(d){return`${S3} ${d}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk({appConfig:d,heartbeatServiceProvider:t},{fid:i}){const n=A3(d),x=R3(d),S=t.getImmediate({optional:!0});if(S){const a=await S.getHeartbeatsHeader();a&&x.append("x-firebase-client",a)}const s={fid:i,authVersion:S3,appId:d.appId,sdkVersion:E3},T={method:"POST",headers:x,body:JSON.stringify(s)},e=await P3(()=>fetch(n,T));if(e.ok){const a=await e.json();return{fid:a.fid||i,registrationStatus:2,refreshToken:a.refreshToken,authToken:w3(a.authToken)}}else throw await M3("Create Installation",e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(d){return new Promise(t=>{setTimeout(t,d)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(d){return btoa(String.fromCharCode(...d)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=/^[cdef][\w-]{21}$/,v1="";function Tk(){try{const d=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(d),d[0]=112+d[0]%16;const i=Ek(d);return yk.test(i)?i:v1}catch{return v1}}function Ek(d){return xk(d).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(d){return`${d.appName}!${d.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=new Map;function L3(d,t){const i=Vg(d);F3(i,t),Sk(i,t)}function F3(d,t){const i=I3.get(d);if(i)for(const n of i)n(t)}function Sk(d,t){const i=Ck();i&&i.postMessage({key:d,fid:t}),Ak()}let ih=null;function Ck(){return!ih&&"BroadcastChannel"in self&&(ih=new BroadcastChannel("[Firebase] FID Change"),ih.onmessage=d=>{F3(d.data.key,d.data.fid)}),ih}function Ak(){I3.size===0&&ih&&(ih.close(),ih=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="firebase-installations-database",Mk=1,Nh="firebase-installations-store";let ax=null;function xE(){return ax||(ax=nP(wk,Mk,{upgrade:(d,t)=>{switch(t){case 0:d.createObjectStore(Nh)}}})),ax}async function jm(d,t){const i=Vg(d),x=(await xE()).transaction(Nh,"readwrite"),S=x.objectStore(Nh),s=await S.get(i);return await S.put(t,i),await x.done,(!s||s.fid!==t.fid)&&L3(d,t.fid),t}async function D3(d){const t=Vg(d),n=(await xE()).transaction(Nh,"readwrite");await n.objectStore(Nh).delete(t),await n.done}async function zg(d,t){const i=Vg(d),x=(await xE()).transaction(Nh,"readwrite"),S=x.objectStore(Nh),s=await S.get(i),T=t(s);return T===void 0?await S.delete(i):await S.put(T,i),await x.done,T&&(!s||s.fid!==T.fid)&&L3(d,T.fid),T}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yE(d){let t;const i=await zg(d.appConfig,n=>{const x=Rk(n),S=Pk(d,x);return t=S.registrationPromise,S.installationEntry});return i.fid===v1?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}function Rk(d){const t=d||{fid:Tk(),registrationStatus:0};return O3(t)}function Pk(d,t){if(t.registrationStatus===0){if(!navigator.onLine){const x=Promise.reject(Oh.create("app-offline"));return{installationEntry:t,registrationPromise:x}}const i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=bk(d,i);return{installationEntry:i,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Ik(d)}:{installationEntry:t}}async function bk(d,t){try{const i=await gk(d,t);return jm(d.appConfig,i)}catch(i){throw C3(i)&&i.customData.serverCode===409?await D3(d.appConfig):await jm(d.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function Ik(d){let t=await kA(d.appConfig);for(;t.registrationStatus===1;)await b3(100),t=await kA(d.appConfig);if(t.registrationStatus===0){const{installationEntry:i,registrationPromise:n}=await yE(d);return n||i}return t}function kA(d){return zg(d,t=>{if(!t)throw Oh.create("installation-not-found");return O3(t)})}function O3(d){return Lk(d)?{fid:d.fid,registrationStatus:0}:d}function Lk(d){return d.registrationStatus===1&&d.registrationTime+T3<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk({appConfig:d,heartbeatServiceProvider:t},i){const n=Dk(d,i),x=pk(d,i),S=t.getImmediate({optional:!0});if(S){const a=await S.getHeartbeatsHeader();a&&x.append("x-firebase-client",a)}const s={installation:{sdkVersion:E3,appId:d.appId}},T={method:"POST",headers:x,body:JSON.stringify(s)},e=await P3(()=>fetch(n,T));if(e.ok){const a=await e.json();return w3(a)}else throw await M3("Generate Auth Token",e)}function Dk(d,{fid:t}){return`${A3(d)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(d,t=!1){let i;const n=await zg(d.appConfig,S=>{if(!N3(S))throw Oh.create("not-registered");const s=S.authToken;if(!t&&Bk(s))return S;if(s.requestStatus===1)return i=Ok(d,t),S;{if(!navigator.onLine)throw Oh.create("app-offline");const T=Vk(S);return i=Nk(d,T),T}});return i?await i:n.authToken}async function Ok(d,t){let i=await $A(d.appConfig);for(;i.authToken.requestStatus===1;)await b3(100),i=await $A(d.appConfig);const n=i.authToken;return n.requestStatus===0?TE(d,t):n}function $A(d){return zg(d,t=>{if(!N3(t))throw Oh.create("not-registered");const i=t.authToken;return zk(i)?{...t,authToken:{requestStatus:0}}:t})}async function Nk(d,t){try{const i=await Fk(d,t),n={...t,authToken:i};return await jm(d.appConfig,n),i}catch(i){if(C3(i)&&(i.customData.serverCode===401||i.customData.serverCode===404))await D3(d.appConfig);else{const n={...t,authToken:{requestStatus:0}};await jm(d.appConfig,n)}throw i}}function N3(d){return d!==void 0&&d.registrationStatus===2}function Bk(d){return d.requestStatus===2&&!Uk(d)}function Uk(d){const t=Date.now();return t<d.creationTime||d.creationTime+d.expiresIn<t+uk}function Vk(d){const t={requestStatus:1,requestTime:Date.now()};return{...d,authToken:t}}function zk(d){return d.requestStatus===1&&d.requestTime+T3<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(d){const t=d,{installationEntry:i,registrationPromise:n}=await yE(t);return n?n.catch(console.error):TE(t).catch(console.error),i.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(d,t=!1){const i=d;return await Wk(i),(await TE(i,t)).token}async function Wk(d){const{registrationPromise:t}=await yE(d);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(d){if(!d||!d.options)throw ox("App Configuration");if(!d.name)throw ox("App Name");const t=["projectId","apiKey","appId"];for(const i of t)if(!d.options[i])throw ox(i);return{appName:d.name,projectId:d.options.projectId,apiKey:d.options.apiKey,appId:d.options.appId}}function ox(d){return Oh.create("missing-app-config-values",{valueName:d})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3="installations",Xk="installations-internal",Yk=d=>{const t=d.getProvider("app").getImmediate(),i=Hk(t),n=_h(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},kk=d=>{const t=d.getProvider("app").getImmediate(),i=_h(t,B3).getImmediate();return{getId:()=>Gk(i),getToken:x=>_k(i,x)}};function $k(){va(new Nr(B3,Yk,"PUBLIC")),va(new Nr(Xk,kk,"PRIVATE"))}$k();fr(y3,gE);fr(y3,gE,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="analytics",Kk="firebase_id",jk="origin",Zk=60*1e3,Jk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",EE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new dg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ws=new Gh("analytics","Analytics",Qk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(d){if(!d.startsWith(EE)){const t=Ws.create("invalid-gtag-resource",{gtagURL:d});return as.warn(t.message),""}return d}function U3(d){return Promise.all(d.map(t=>t.catch(i=>i)))}function t$(d,t){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(d,t)),i}function e$(d,t){const i=t$("firebase-js-sdk-policy",{createScriptURL:qk}),n=document.createElement("script"),x=`${EE}?l=${d}&id=${t}`;n.src=i?i==null?void 0:i.createScriptURL(x):x,n.async=!0,document.head.appendChild(n)}function i$(d){let t=[];return Array.isArray(window[d])?t=window[d]:window[d]=t,t}async function n$(d,t,i,n,x,S){const s=n[x];try{if(s)await t[s];else{const e=(await U3(i)).find(a=>a.measurementId===x);e&&await t[e.appId]}}catch(T){as.error(T)}d("config",x,S)}async function s$(d,t,i,n,x){try{let S=[];if(x&&x.send_to){let s=x.send_to;Array.isArray(s)||(s=[s]);const T=await U3(i);for(const e of s){const a=T.find(f=>f.measurementId===e),g=a&&t[a.appId];if(g)S.push(g);else{S=[];break}}}S.length===0&&(S=Object.values(t)),await Promise.all(S),d("event",n,x||{})}catch(S){as.error(S)}}function r$(d,t,i,n){async function x(S,...s){try{if(S==="event"){const[T,e]=s;await s$(d,t,i,T,e)}else if(S==="config"){const[T,e]=s;await n$(d,t,i,n,T,e)}else if(S==="consent"){const[T,e]=s;d("consent",T,e)}else if(S==="get"){const[T,e,a]=s;d("get",T,e,a)}else if(S==="set"){const[T]=s;d("set",T)}else d(S,...s)}catch(T){as.error(T)}}return x}function a$(d,t,i,n,x){let S=function(...s){window[n].push(arguments)};return window[x]&&typeof window[x]=="function"&&(S=window[x]),window[x]=r$(S,d,t,i),{gtagCore:S,wrappedGtag:window[x]}}function o$(d){const t=window.document.getElementsByTagName("script");for(const i of Object.values(t))if(i.src&&i.src.includes(EE)&&i.src.includes(d))return i;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$=30,h$=1e3;class u${constructor(t={},i=h$){this.throttleMetadata=t,this.intervalMillis=i}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,i){this.throttleMetadata[t]=i}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const V3=new u$;function f$(d){return new Headers({Accept:"application/json","x-goog-api-key":d})}async function c$(d){var s;const{appId:t,apiKey:i}=d,n={method:"GET",headers:f$(i)},x=Jk.replace("{app-id}",t),S=await fetch(x,n);if(S.status!==200&&S.status!==304){let T="";try{const e=await S.json();(s=e.error)!=null&&s.message&&(T=e.error.message)}catch{}throw Ws.create("config-fetch-failed",{httpStatus:S.status,responseMessage:T})}return S.json()}async function d$(d,t=V3,i){const{appId:n,apiKey:x,measurementId:S}=d.options;if(!n)throw Ws.create("no-app-id");if(!x){if(S)return{measurementId:S,appId:n};throw Ws.create("no-api-key")}const s=t.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},T=new m$;return setTimeout(async()=>{T.abort()},Zk),z3({appId:n,apiKey:x,measurementId:S},s,T,t)}async function z3(d,{throttleEndTimeMillis:t,backoffCount:i},n,x=V3){var T;const{appId:S,measurementId:s}=d;try{await p$(n,t)}catch(e){if(s)return as.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${e==null?void 0:e.message}]`),{appId:S,measurementId:s};throw e}try{const e=await c$(d);return x.deleteThrottleMetadata(S),e}catch(e){const a=e;if(!v$(a)){if(x.deleteThrottleMetadata(S),s)return as.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:S,measurementId:s};throw e}const g=Number((T=a==null?void 0:a.customData)==null?void 0:T.httpStatus)===503?j2(i,x.intervalMillis,l$):j2(i,x.intervalMillis),f={throttleEndTimeMillis:Date.now()+g,backoffCount:i+1};return x.setThrottleMetadata(S,f),as.debug(`Calling attemptFetch again in ${g} millis`),z3(d,f,n,x)}}function p$(d,t){return new Promise((i,n)=>{const x=Math.max(t-Date.now(),0),S=setTimeout(i,x);d.addEventListener(()=>{clearTimeout(S),n(Ws.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function v$(d){if(!(d instanceof zr)||!d.customData)return!1;const t=Number(d.customData.httpStatus);return t===429||t===500||t===503||t===504}class m${constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function g$(d,t,i,n,x){if(x&&x.global){d("event",i,n);return}else{const S=await t,s={...n,send_to:S};d("event",i,s)}}async function x$(d,t,i,n){if(n&&n.global){const x={};for(const S of Object.keys(i))x[`user_properties.${S}`]=i[S];return d("set",x),Promise.resolve()}else{const x=await t;d("config",x,{update:!0,user_properties:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y$(){if(oT())try{await tP()}catch(d){return as.warn(Ws.create("indexeddb-unavailable",{errorInfo:d==null?void 0:d.toString()}).message),!1}else return as.warn(Ws.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function T$(d,t,i,n,x,S,s){const T=d$(d);T.then(o=>{i[o.measurementId]=o.appId,d.options.measurementId&&o.measurementId!==d.options.measurementId&&as.warn(`The measurement ID in the local Firebase config (${d.options.measurementId}) does not match the measurement ID fetched from the server (${o.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(o=>as.error(o)),t.push(T);const e=y$().then(o=>{if(o)return n.getId()}),[a,g]=await Promise.all([T,e]);o$(S)||e$(S,a.measurementId),x("js",new Date);const f=(s==null?void 0:s.config)??{};return f[jk]="firebase",f.update=!0,g!=null&&(f[Kk]=g),x("config",a.measurementId,f),a.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(t){this.app=t}_delete(){return delete Qu[this.app.options.appId],Promise.resolve()}}let Qu={},KA=[];const jA={};let lx="dataLayer",S$="gtag",ZA,SE,JA=!1;function C$(){const d=[];if(JR()&&d.push("This is a browser extension environment."),NV()||d.push("Cookies are not available."),d.length>0){const t=d.map((n,x)=>`(${x+1}) ${n}`).join(" "),i=Ws.create("invalid-analytics-context",{errorInfo:t});as.warn(i.message)}}function A$(d,t,i){C$();const n=d.options.appId;if(!n)throw Ws.create("no-app-id");if(!d.options.apiKey)if(d.options.measurementId)as.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${d.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ws.create("no-api-key");if(Qu[n]!=null)throw Ws.create("already-exists",{id:n});if(!JA){i$(lx);const{wrappedGtag:S,gtagCore:s}=a$(Qu,KA,jA,lx,S$);SE=S,ZA=s,JA=!0}return Qu[n]=T$(d,KA,jA,t,ZA,lx,i),new E$(d)}function w$(d=rP()){d=nn(d);const t=_h(d,Zm);return t.isInitialized()?t.getImmediate():M$(d)}function M$(d,t={}){const i=_h(d,Zm);if(i.isInitialized()){const x=i.getImmediate();if(ll(t,i.getOptions()))return x;throw Ws.create("already-initialized")}return i.initialize({options:t})}function R$(d,t,i){d=nn(d),x$(SE,Qu[d.app.options.appId],t,i).catch(n=>as.error(n))}function P$(d,t,i,n){d=nn(d),g$(SE,Qu[d.app.options.appId],t,i,n).catch(x=>as.error(x))}const QA="@firebase/analytics",qA="0.10.19";function b$(){va(new Nr(Zm,(t,{options:i})=>{const n=t.getProvider("app").getImmediate(),x=t.getProvider("installations-internal").getImmediate();return A$(n,x,i)},"PUBLIC")),va(new Nr("analytics-internal",d,"PRIVATE")),fr(QA,qA),fr(QA,qA,"esm2020");function d(t){try{const i=t.getProvider(Zm).getImmediate();return{logEvent:(n,x,S)=>P$(i,n,x,S),setUserProperties:(n,x)=>R$(i,n,x)}}catch(i){throw Ws.create("interop-component-reg-failed",{reason:i})}}}b$();const I$={apiKey:"AIzaSyA6LqmoYS8tHiBqr3n9TjleBWegKhmD5T0",authDomain:"bobbys-craps.firebaseapp.com",projectId:"bobbys-craps",storageBucket:"bobbys-craps.firebasestorage.app",messagingSenderId:"606884201685",appId:"1:606884201685:web:174d6b394f015cf680ce5c",measurementId:"G-R9TPBJ5T4X"},CE=sP(I$);typeof window<"u"&&w$(CE);const Yh=SH(CE,{experimentalForceLongPolling:!0,localCache:UH({tabManager:_H()})}),Bh=ok(CE);typeof window<"u"&&$X(Bh,u3).catch(d=>{console.error("Auth persistence error:",d)});const L$=typeof window<"u"&&(window.location.hostname==="bobbys-craps.web.app"||window.location.hostname==="bobbys-craps.firebaseapp.com"||window.location.hostname==="rsnelling4.github.io"),kh="users";async function G3(d){try{if(L$)try{return await XH(d)}catch(t){console.warn("leaderboard: getDocFromServer failed, falling back to default",t)}return await OI(d)}catch(t){console.warn("leaderboard: getDoc failed, trying cache explicitly",t);try{return await HH(d)}catch(i){throw console.error("leaderboard: fatal doc fetch error",i),i}}}async function F$(d,t,i){console.log("leaderboard: signupUser called",{username:d,nickname:i});const n=d.toLowerCase(),x=`${n}@craps.local`;try{const s=(await a3(Bh,x,t)).user;console.log("leaderboard: auth user created",s.uid),await o3(s,{displayName:i});const T={username:d,nickname:i,balance:300,highestBalance:300,largestWin:0,largestLoss:0,resetCount:0,lastUpdate:PI()};return console.log("leaderboard: setting firestore doc",n),await NI(Cp(Yh,kh,n),T),{...T,uid:s.uid}}catch(S){throw console.error("leaderboard: signup error:",S),S}}async function D$(d,t){console.log("leaderboard: loginUser called",d);const i=d.toLowerCase(),n=`${i}@craps.local`;try{const S=(await YX(Bh,n,t)).user;console.log("leaderboard: auth login successful",S.uid),console.log("leaderboard: fetching firestore doc",i);const s=await G3(Cp(Yh,kh,i));return s.exists()?(console.log("leaderboard: firestore doc found"),{...s.data(),uid:S.uid}):(console.log("leaderboard: firestore doc NOT found, using fallback"),{username:d,nickname:S.displayName||d,balance:300,uid:S.uid})}catch(x){throw console.error("leaderboard: login error:",x),x}}async function O$(){return await JX(Bh)}function N$(d){return ZX(Bh,async t=>{if(t){const i=t.email.split("@")[0];console.log("leaderboard: auth state change - logged in",i);const n=await G3(Cp(Yh,kh,i));n.exists()?d({...n.data(),uid:t.uid}):d({username:i,nickname:t.displayName||i,balance:300,uid:t.uid})}else console.log("leaderboard: auth state change - logged out"),d(null)})}async function B$(){console.log("leaderboard: fetchGlobalUsers called");const d=LI(EI(Yh,kh),FI("balance","desc"),OH(100));try{const i=(await YH(d)).docs.map(n=>{var x,S,s;return{id:n.id,...n.data(),lastUpdate:((s=(S=(x=n.data().lastUpdate)==null?void 0:x.toDate)==null?void 0:S.call(x))==null?void 0:s.toISOString())||new Date().toISOString()}});return console.log(`leaderboard: fetched ${i.length} users`),i}catch(t){throw console.error("leaderboard: error fetching users:",t),t}}function U$(d){const t=LI(EI(Yh,kh),FI("balance","desc"));let i=0;const n=3,x=()=>kH(t,S=>{i=0;const s=S.docs.map(T=>{var e,a,g;return{id:T.id,...T.data(),lastUpdate:((g=(a=(e=T.data().lastUpdate)==null?void 0:e.toDate)==null?void 0:a.call(e))==null?void 0:g.toISOString())||new Date().toISOString()}});console.log(`Leaderboard synced: ${s.length} users found.`),d(s)},S=>{if(console.error("Leaderboard subscription error:",S),i<n){i++;const s=Math.pow(2,i)*1e3;console.warn(`Attempting to reconnect leaderboard (attempt ${i}/${n}) in ${s}ms...`),setTimeout(x,s)}});return x()}async function rm(d){if(!d||d.username==="Guest")return;const t=d.username.toLowerCase(),i=Cp(Yh,kh,t),n={username:d.username,nickname:d.nickname||d.username,balance:d.balance||300,highestBalance:d.highestBalance||0,largestWin:d.largestWin||0,largestLoss:d.largestLoss||0,resetCount:d.resetCount||0,lastUpdate:PI()};try{await NI(i,n,{merge:!0})}catch(x){console.error("Error updating global user:",x)}}async function hx(d){if(!(!d||d.length===0)){console.log(`Checking ${d.length} local users for Firebase sync...`);for(const t of d)if(t.username!=="Guest")try{const i=t.username.toLowerCase(),n=Cp(Yh,kh,i);if(!(await OI(n)).exists()){if(console.log(`Migrating user ${t.username} to Firebase...`),t.password)try{const S=`${i}@craps.local`;await a3(Bh,S,t.password),await o3(Bh.currentUser,{displayName:t.nickname||t.username}),console.log(`Auth account created for ${t.username}`)}catch(S){S.code!=="auth/email-already-in-use"&&console.warn(`Auth creation failed for ${t.username}:`,S.message)}await rm(t)}}catch(i){console.error(`Error syncing user ${t.username}:`,i)}console.log("Local users sync check complete.")}}var V$=Qt('<div class="fixed inset-0 z-[120] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-300 svelte-1n46o8q"><div class="w-full max-w-sm p-8 bg-[#1a4d2e] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8),inset_0_0_30px_rgba(0,0,0,0.4)] relative overflow-hidden group svelte-1n46o8q"><div class="flex items-center justify-between mb-8 relative z-10 svelte-1n46o8q"><div class="flex items-center gap-3 svelte-1n46o8q"><div class="p-2 rounded-xl bg-black/40 border border-white/10 text-emerald-400 svelte-1n46o8q"><!></div> <h2 class="text-2xl font-black text-white tracking-tighter uppercase italic svelte-1n46o8q">Settings</h2></div> <button class="p-2 rounded-xl bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-all hover:scale-110 svelte-1n46o8q"><!></button></div> <div class="space-y-6 relative z-10 svelte-1n46o8q"><div class="flex items-center justify-between p-4 bg-black/40 rounded-2xl border border-white/5 shadow-inner svelte-1n46o8q"><div class="flex items-center gap-3 svelte-1n46o8q"><div><!></div> <div class="svelte-1n46o8q"><span class="block text-sm font-black text-white uppercase tracking-tight svelte-1n46o8q">Sound Effects</span> <span class="text-[10px] font-medium text-zinc-500 uppercase svelte-1n46o8q"> </span></div></div> <button><div></div></button></div> <div class="p-4 bg-black/40 rounded-2xl border border-white/5 shadow-inner svelte-1n46o8q"><div class="flex items-center gap-3 mb-4 svelte-1n46o8q"><div class="p-2 rounded-lg bg-yellow-500/20 text-yellow-500 svelte-1n46o8q"><!></div> <div class="svelte-1n46o8q"><span class="block text-sm font-black text-white uppercase tracking-tight svelte-1n46o8q">Reset Bankroll</span> <span class="text-[10px] font-medium text-zinc-500 uppercase svelte-1n46o8q">Return to $300.00</span></div></div> <button class="w-full py-3 bg-white hover:bg-zinc-200 text-black font-black uppercase tracking-widest text-xs rounded-xl transition-all active:scale-[0.98] shadow-lg svelte-1n46o8q">Confirm Reset</button></div> <button class="w-full p-4 bg-emerald-500/10 hover:bg-emerald-500/20 rounded-2xl border border-emerald-500/20 transition-all flex items-center gap-4 group svelte-1n46o8q"><div class="p-2 rounded-lg bg-emerald-500/20 text-emerald-400 group-hover:scale-110 transition-transform svelte-1n46o8q"><!></div> <div class="text-left svelte-1n46o8q"><span class="block text-sm font-black text-white uppercase tracking-tight svelte-1n46o8q">How to Play</span> <span class="text-[10px] font-medium text-zinc-500 uppercase svelte-1n46o8q">Rules & Payouts</span></div></button></div> <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none svelte-1n46o8q"></div></div></div>'),z$=Qt(`<div class="fixed inset-0 flex items-center justify-center z-[100] pointer-events-none svelte-1n46o8q"><div><div class="relative flex items-center svelte-1n46o8q"><span class="text-7xl font-black italic tracking-tighter drop-shadow-[0_4px_12px_rgba(0,0,0,0.9)] 
                       bg-gradient-to-b from-emerald-200 via-emerald-400 to-emerald-600 bg-clip-text text-transparent
                       border-text-stroke flex items-baseline svelte-1n46o8q"><span class="svelte-1n46o8q"> </span> <span class="relative svelte-1n46o8q">. <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] flex items-center justify-center opacity-80 pointer-events-none -z-10 svelte-1n46o8q"><div class="absolute inset-0 bg-[radial-gradient(circle,rgba(158,255,0,0.6)_0%,transparent_70%)] animate-pulse svelte-1n46o8q"></div> <div class="absolute inset-[-40px] rounded-full z-0 pointer-events-none overflow-hidden svelte-1n46o8q"><div class="absolute inset-0 animate-eclipse-rays svelte-1n46o8q" style="background: repeating-conic-gradient(from 0deg, #9eff00 0deg 1deg, transparent 1deg 6deg);
                              mask-image: radial-gradient(circle, black 30%, transparent 75%);
                              -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div></div></span> <span class="svelte-1n46o8q"> </span></span></div></div></div>`),G$=Qt(`<div class="fixed inset-0 flex items-center justify-center z-[100] pointer-events-none svelte-1n46o8q"><div><div class="relative flex items-center svelte-1n46o8q"><span class="text-7xl font-black italic tracking-tighter drop-shadow-[0_4px_12px_rgba(0,0,0,0.9)] 
                       bg-gradient-to-b from-red-200 via-red-500 to-red-800 bg-clip-text text-transparent
                       border-text-stroke flex items-baseline svelte-1n46o8q"><span class="svelte-1n46o8q"> </span> <span class="relative svelte-1n46o8q">. <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] flex items-center justify-center opacity-80 pointer-events-none -z-10 svelte-1n46o8q"><div class="absolute inset-0 bg-[radial-gradient(circle,rgba(255,59,48,0.6)_0%,transparent_70%)] animate-pulse svelte-1n46o8q"></div> <div class="absolute inset-[-40px] rounded-full z-0 pointer-events-none overflow-hidden svelte-1n46o8q"><div class="absolute inset-0 animate-eclipse-rays svelte-1n46o8q" style="background: repeating-conic-gradient(from 0deg, #ff3b30 0deg 1deg, transparent 1deg 6deg);
                              mask-image: radial-gradient(circle, black 30%, transparent 75%);
                              -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div></div></span> <span class="svelte-1n46o8q"> </span></span></div></div></div>`),_$=Qt('<button class="ml-2 text-[8px] font-black text-zinc-500 hover:text-red-400 uppercase transition-colors svelte-1n46o8q">[ Logout ]</button>'),W$=Qt('<div class="absolute left-1/2 -translate-x-1/2 flex items-center gap-2 animate-in fade-in duration-500 svelte-1n46o8q"><span class="text-[10px] font-black text-zinc-500 uppercase tracking-widest svelte-1n46o8q">Welcome</span> <span class="text-sm font-black text-emerald-400 uppercase tracking-tight italic drop-shadow-lg svelte-1n46o8q"> </span> <!></div>'),H$=Qt('<div class="w-1.5 h-1.5 rounded-full bg-yellow-400 animate-pulse svelte-1n46o8q"></div>'),X$=Qt('<div class="w-1.5 h-1.5 rounded-full bg-emerald-400 svelte-1n46o8q"></div>'),Y$=Qt('<div class="w-1.5 h-1.5 rounded-full bg-white/30 svelte-1n46o8q"></div>'),k$=Qt("<div> </div>"),$$=Qt("<div> </div>"),K$=Qt('<span class="text-[9px] font-black text-white tracking-widest uppercase svelte-1n46o8q">LOW ROLLS</span> <span class="text-[7px] font-bold text-emerald-400/60 uppercase svelte-1n46o8q">BET HERE</span> <span class="text-base font-black text-white drop-shadow-md leading-none svelte-1n46o8q">30 <span class="text-[9px] opacity-60 svelte-1n46o8q">TO</span> 1</span>',1),j$=Qt(`<span class="text-[9px] font-black text-white tracking-widest uppercase svelte-1n46o8q">ROLL 'EM ALL</span> <span class="text-[7px] font-bold text-emerald-400/60 uppercase svelte-1n46o8q">BET HERE</span> <span class="text-lg font-black text-white drop-shadow-md leading-none svelte-1n46o8q">155 <span class="text-xs opacity-60 svelte-1n46o8q">TO</span> 1</span>`,1),Z$=Qt('<span class="text-[9px] font-black text-white tracking-widest uppercase svelte-1n46o8q">HIGH ROLLS</span> <span class="text-[7px] font-bold text-emerald-400/60 uppercase svelte-1n46o8q">BET HERE</span> <span class="text-base font-black text-white drop-shadow-md leading-none svelte-1n46o8q">30 <span class="text-[9px] opacity-60 svelte-1n46o8q">TO</span> 1</span>',1),J$=Qt('<div class="w-2 h-2 rounded-full bg-yellow-400 animate-ping svelte-1n46o8q"></div>'),Q$=Qt('<div class="w-2 h-2 rounded-full bg-red-500 svelte-1n46o8q"></div>'),q$=Qt('<div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse svelte-1n46o8q"></div>'),tK=Qt('<div class="absolute inset-[-2px] rounded-t-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div>'),eK=Qt('<div class="absolute inset-[-2px] rounded-t-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div>'),iK=Qt('<span class="absolute left-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">4 TO 1</span> <span class="text-xl font-black text-[#d63a30] uppercase tracking-wide drop-shadow-[0_0_8px_rgba(214,58,48,0.4)] svelte-1n46o8q">SEVEN</span> <span class="absolute right-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">4 TO 1</span>',1),nK=Qt('<span class="text-[10px] font-black text-white uppercase tracking-wider svelte-1n46o8q">Horn Bet</span>'),sK=Qt('<span class="absolute left-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">7 TO 1</span> <span class="text-xl font-black text-[#d63a30] uppercase tracking-wide drop-shadow-[0_0_8px_rgba(214,58,48,0.4)] svelte-1n46o8q">ANY CRAPS</span> <span class="absolute right-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">7 TO 1</span>',1),rK=Qt('<div class="flex flex-col flex-1 min-h-0 svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 text-center border-t border-b border-white/20 mb-2 svelte-1n46o8q"><span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">HARD WAYS <span class="opacity-70 font-bold svelte-1n46o8q">(# of rolls since last)</span></span></div> <div class="grid grid-cols-2 gap-x-2 gap-y-2 flex-[0_0_30%] min-h-[120px] svelte-1n46o8q"><div class="flex flex-col gap-2 border-r-2 border-white/20 pr-1 svelte-1n46o8q"><!> <!></div> <div class="flex flex-col gap-2 pl-1 svelte-1n46o8q"><!> <!></div></div> <div class="flex-1 flex flex-col mt-3 min-h-0 svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 text-center border-t border-b border-white/20 svelte-1n46o8q"><span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">One Roll Bets</span></div> <div class="flex-1 flex flex-col gap-2 mt-2 svelte-1n46o8q"><!> <div class="flex-[0_0_48%] min-h-[120px] grid grid-cols-2 grid-rows-2 gap-px relative border border-white/20 shadow-[inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl overflow-hidden svelte-1n46o8q"><!> <!> <!> <!> <div class="absolute inset-0 flex items-center justify-center pointer-events-none svelte-1n46o8q"><!></div></div> <div class="flex-[0_0_15%] min-h-[40px] flex svelte-1n46o8q"><!></div></div></div></div>'),aK=Qt('<div class="flex flex-col flex-1 min-h-0 gap-2 svelte-1n46o8q"><div class="flex flex-col h-[35%] svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 flex items-center justify-between px-4 border-t border-b border-white/20 rounded-t-lg svelte-1n46o8q"><span class="text-[9px] font-black text-white/60 svelte-1n46o8q">31 FOR 1</span> <span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">â¢ HOPPING HARD WAYS â¢</span> <span class="text-[9px] font-black text-white/60 svelte-1n46o8q">31 FOR 1</span></div> <div class="flex-1 grid grid-cols-2 grid-rows-2 gap-1 mt-1 svelte-1n46o8q"><!> <!> <!> <!></div></div> <div class="flex-1 flex flex-col min-h-0 svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 flex items-center justify-between px-4 border-t border-b border-white/20 svelte-1n46o8q"><span class="text-[9px] font-black text-white/60 svelte-1n46o8q">16 FOR 1</span> <span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">â¢ HOP BETS â¢</span> <span class="text-[9px] font-black text-white/60 svelte-1n46o8q">16 FOR 1</span></div> <div class="flex-1 flex gap-1 mt-1 min-h-0 svelte-1n46o8q"><div class="flex-1 flex flex-col gap-1 svelte-1n46o8q"></div> <div class="flex-1 flex flex-col gap-1 py-4 svelte-1n46o8q"></div> <div class="flex-1 flex flex-col gap-1 svelte-1n46o8q"></div></div></div></div>'),oK=Qt('<span class="text-[10px] font-black text-red-400/60 border border-red-400/40 px-3 py-1 rounded -rotate-12 bg-black/20 uppercase tracking-widest svelte-1n46o8q">Global Off</span>'),lK=Qt('<div class="absolute inset-0 bg-red-900/10 backdrop-blur-[0.5px] z-10 flex items-center justify-center pointer-events-none overflow-hidden svelte-1n46o8q"><div class="flex gap-8 svelte-1n46o8q"></div></div>'),hK=Qt('<div class="absolute -inset-[3px] border-2 border-white rounded-lg pointer-events-none z-20 svelte-1n46o8q"></div>'),uK=Qt(`<div class="relative w-10 h-10 flex items-center justify-center svelte-1n46o8q"><div class="absolute inset-[-4px] rounded-full bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div> <div class="absolute inset-[-20px] rounded-full z-0 pointer-events-none svelte-1n46o8q"><div class="absolute inset-0 animate-eclipse-rays svelte-1n46o8q" style="background: repeating-conic-gradient(from 0deg, #9eff00 0deg 1deg, transparent 1deg 6deg);
                                    mask-image: radial-gradient(circle, black 30%, transparent 75%);
                                    -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div> <div class="absolute inset-[-12px] rounded-full bg-[#9eff00]/30 blur-2xl z-0 svelte-1n46o8q"></div> <div class="relative w-full h-full rounded-full bg-white border-2 border-zinc-400 flex items-center justify-center shadow-[0_4px_8px_rgba(0,0,0,0.5),inset_0_2px_2px_rgba(255,255,255,1)] z-10 transform scale-90 svelte-1n46o8q"><div class="w-7 h-7 rounded-full bg-white border border-black/10 flex items-center justify-center shadow-[inset_0_2px_4px_rgba(0,0,0,0.4)] svelte-1n46o8q"><span class="text-[10px] font-black text-zinc-800 uppercase drop-shadow-sm svelte-1n46o8q">ON</span></div></div></div>`),fK=Qt('<div class="w-10 h-10 rounded-full bg-zinc-800 border-2 border-zinc-900 flex items-center justify-center shadow-[0_4px_8px_rgba(0,0,0,0.6),inset_0_1px_1px_rgba(255,255,255,0.2)] transform scale-90 svelte-1n46o8q"><div class="w-7 h-7 rounded-full bg-zinc-900 border border-black flex items-center justify-center shadow-[inset_0_2px_4px_rgba(0,0,0,0.8)] svelte-1n46o8q"><span class="text-[10px] font-black text-white/90 uppercase svelte-1n46o8q">OFF</span></div></div>'),cK=Qt('<div class="absolute -top-16 left-1/2 -translate-x-1/2 z-30 pointer-events-none svelte-1n46o8q"><!></div>'),dK=Qt('<div class="flex-1 flex flex-col gap-1 relative svelte-1n46o8q"><!> <div class="h-[15%] bg-emerald-900/40 border border-white/5 rounded flex items-center justify-center relative overflow-hidden svelte-1n46o8q"><!></div> <!> <!> <div class="h-[18%] flex gap-1 relative svelte-1n46o8q"><!> <!></div></div>'),pK=Qt('<div class="absolute inset-[-4px] rounded-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div> <div class="absolute inset-[-8px] rounded-xl bg-[#9eff00]/20 blur-xl animate-pulse z-0 svelte-1n46o8q"></div>',1),vK=Qt('<div class="absolute inset-[-4px] rounded-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div> <div class="absolute inset-[-8px] rounded-xl bg-[#9eff00]/20 blur-xl animate-pulse z-0 svelte-1n46o8q"></div>',1),mK=Qt('<span class="text-5xl font-black italic text-[#ff3b30] drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)] uppercase tracking-tighter svelte-1n46o8q">COME</span>'),gK=Qt('<div class="flex flex-col items-center justify-center w-full h-full py-2 svelte-1n46o8q"><div class="flex items-end justify-center w-full px-4 text-white font-black gap-3 relative -mt-3 svelte-1n46o8q"><div class="flex flex-col items-center translate-y-0.5 mx-3 svelte-1n46o8q"><div class="w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-xl shadow-lg bg-black/30 svelte-1n46o8q">2</div> <span class="text-[11px] font-black uppercase mt-1 leading-none svelte-1n46o8q">PAYS DOUBLE</span></div> <span class="text-xl opacity-80 translate-y-[-4px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md translate-y-[-8px] svelte-1n46o8q">3</span> <span class="text-xl opacity-80 translate-y-[-11px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md -translate-y-[14px] svelte-1n46o8q">4</span> <span class="text-xl opacity-80 translate-y-[-17px] mx-1.5 svelte-1n46o8q">â¢</span> <div class="flex flex-col items-center -translate-y-[20px] relative svelte-1n46o8q"><span class="text-4xl drop-shadow-xl text-white svelte-1n46o8q">9</span> <div class="absolute top-[42px] left-1/2 -translate-x-1/2 flex flex-col items-center svelte-1n46o8q"><span class="text-2xl font-black text-white tracking-normal leading-none svelte-1n46o8q">FIELD</span></div></div> <span class="text-xl opacity-80 translate-y-[-17px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md -translate-y-[14px] svelte-1n46o8q">10</span> <span class="text-xl opacity-80 translate-y-[-11px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md translate-y-[-8px] svelte-1n46o8q">11</span> <span class="text-xl opacity-80 translate-y-[-4px] mx-1.5 svelte-1n46o8q">â¢</span> <div class="flex flex-col items-center translate-y-0.5 mx-3 svelte-1n46o8q"><div class="w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-xl shadow-lg bg-black/30 svelte-1n46o8q">12</div> <span class="text-[11px] font-black uppercase mt-1 leading-none svelte-1n46o8q">PAYS DOUBLE</span></div></div></div>'),xK=Qt('<span class="text-[11px] font-black text-white leading-tight text-center uppercase tracking-tighter svelte-1n46o8q">TAKE<br class="svelte-1n46o8q"/>ODDS</span>'),yK=Qt('<span class="text-4xl font-serif italic text-white font-medium tracking-widest drop-shadow-lg svelte-1n46o8q">Pass Line</span>'),TK=Qt('<div class="absolute w-[18%] h-[18%] bg-zinc-900 rounded-full svelte-1n46o8q"></div>'),EK=Qt('<div class="w-4 h-4 bg-white rounded-[2px] relative shadow-inner svelte-1n46o8q"></div>'),SK=Qt('<div><div> </div> <div class="flex gap-2 scale-90 svelte-1n46o8q"></div></div>'),CK=Qt('<button class="relative svelte-1n46o8q"><!></button>'),AK=Qt(`<main class="h-screen w-full bg-[#0a2e0a] text-white flex flex-col font-sans overflow-hidden select-none relative svelte-1n46o8q" style="background-image: radial-gradient(circle at 50% 50%, #1a4d2e 0%, #0a2e0a 100%)"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="h-12 flex items-center justify-between px-6 bg-black/60 border-b border-white/10 shrink-0 backdrop-blur-md svelte-1n46o8q"><div class="flex items-center gap-3 svelte-1n46o8q"><div class="flex items-center gap-2 p-2 rounded-xl bg-black/40 border border-white/10 shadow-inner svelte-1n46o8q"><img src="https://img.icons8.com/color/48/dice.png" alt="logo" class="w-6 h-6 drop-shadow-md svelte-1n46o8q"/> <img src="https://img.icons8.com/color/48/dice.png" alt="logo" class="w-6 h-6 drop-shadow-md svelte-1n46o8q"/></div> <h1 class="text-xl font-black text-white tracking-tighter uppercase italic svelte-1n46o8q">Bobby's Bubble <span class="text-emerald-400 svelte-1n46o8q">Craps</span></h1></div> <!> <div class="flex items-center gap-4 svelte-1n46o8q"><div class="flex items-center gap-3 bg-black/40 px-4 py-1.5 rounded-full border border-white/5 shadow-inner svelte-1n46o8q"><div class="flex flex-col items-end svelte-1n46o8q"><span class="text-[9px] font-black text-zinc-500 uppercase tracking-widest leading-none svelte-1n46o8q">Game Status</span> <div class="flex items-center gap-2 svelte-1n46o8q"><!> <span> </span></div></div></div> <button class="flex items-center gap-2 bg-black/40 px-4 py-2 rounded-full border border-white/5 shadow-inner text-zinc-400 hover:text-white transition-all active:scale-95 group svelte-1n46o8q"><!> <span class="text-[10px] font-black uppercase tracking-widest svelte-1n46o8q">Leaderboard</span></button> <button class="p-1.5 rounded-full bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-colors shadow-inner svelte-1n46o8q"><!></button></div></div> <div class="flex-1 flex flex-col p-2 gap-1.5 overflow-hidden max-w-[1400px] mx-auto w-full svelte-1n46o8q"><div class="h-[18%] flex justify-between items-stretch gap-3 shrink-0 mb-1 svelte-1n46o8q"><div class="w-[42%] bg-[#1a4d2e] rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] flex flex-col overflow-hidden relative group svelte-1n46o8q"><div class="h-[55%] flex items-center justify-between px-6 relative z-10 svelte-1n46o8q"><div class="flex flex-col items-center svelte-1n46o8q"><span class="text-4xl font-black italic text-yellow-500/20 drop-shadow-2xl tracking-tighter mb-1 svelte-1n46o8q" style="font-family: 'Brush Script MT', cursive;">Lucky</span> <div class="flex gap-1 svelte-1n46o8q"></div></div> <div class="flex-1 flex justify-center items-center px-2 relative h-full svelte-1n46o8q"><div class="flex gap-2 items-center scale-110 svelte-1n46o8q"><img src="https://img.icons8.com/color/96/dice.png" alt="dice"/> <img src="https://img.icons8.com/color/96/dice.png" alt="dice"/></div></div> <div class="flex flex-col items-center svelte-1n46o8q"><span class="text-4xl font-black italic text-yellow-500/20 drop-shadow-2xl tracking-tighter mb-1 svelte-1n46o8q" style="font-family: 'Brush Script MT', cursive;">Roller</span> <div class="flex gap-1 svelte-1n46o8q"></div></div></div> <div class="h-[45%] flex divide-x-2 divide-white/10 bg-[#0a2e0a]/80 border-t border-white/10 svelte-1n46o8q"><!> <!> <!></div></div> <!> <div class="flex-1 min-w-[500px] bg-[#1a4d2e] rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] flex flex-col justify-center gap-1.5 px-4 overflow-hidden relative group svelte-1n46o8q"><div class="absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-transparent svelte-1n46o8q"></div> <div class="flex items-center justify-between w-full relative z-10 svelte-1n46o8q"><div class="flex items-center gap-4 flex-1 min-w-0 svelte-1n46o8q"><div class="flex items-center bg-black/40 rounded-xl border border-white/10 shadow-[inset_0_2px_8px_rgba(0,0,0,0.5)] divide-x divide-white/10 shrink-0 overflow-hidden svelte-1n46o8q"><div class="flex flex-col items-center px-3 py-1 bg-white/[0.02] svelte-1n46o8q"><span class="text-[8px] font-black text-zinc-500 uppercase tracking-tighter mb-0.5 svelte-1n46o8q">Last Bet</span> <span class="text-sm font-black text-white leading-tight tabular-nums svelte-1n46o8q"> </span></div> <div class="flex flex-col items-center px-3 py-1 bg-white/[0.04] svelte-1n46o8q"><span class="text-[8px] font-black text-zinc-500 uppercase tracking-tighter mb-0.5 svelte-1n46o8q">Last Win</span> <span class="text-sm font-black text-emerald-400 leading-tight tabular-nums svelte-1n46o8q"> </span></div> <div class="flex flex-col items-center px-3 py-1 min-w-[100px] bg-white/[0.06] svelte-1n46o8q"><span class="text-[8px] font-black text-zinc-400 uppercase tracking-tighter mb-0.5 svelte-1n46o8q">Shooter P/L</span> <span> </span></div></div> <div class="flex flex-col playable-balance shrink-0 ml-2 svelte-1n46o8q"><span class="text-[9px] font-black text-zinc-400 uppercase leading-none tracking-tighter svelte-1n46o8q">Balance</span> <span class="text-xl font-black text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)] svelte-1n46o8q"> </span></div></div> <div class="flex items-center gap-3 shrink-0 svelte-1n46o8q"><div class="flex flex-col items-end svelte-1n46o8q"><span class="text-[9px] font-black text-zinc-400 uppercase leading-none tracking-tighter svelte-1n46o8q">Current Bet</span> <span class="text-xl font-black text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)] svelte-1n46o8q"> </span></div></div></div> <div><div class="flex items-center gap-2 svelte-1n46o8q"><!> <span> </span></div></div></div></div> <div><div class="w-[35%] flex flex-col gap-1 shrink-0 svelte-1n46o8q"><div class="flex gap-1 h-12 mb-2 svelte-1n46o8q"><div class="flex-1 relative svelte-1n46o8q"><!> <button><span class="text-[11px] font-black text-zinc-800 uppercase tracking-tight svelte-1n46o8q">HARDWAYS</span> <div class="bg-black/30 px-3 py-1 rounded shadow-inner text-[11px] font-black text-white border border-black/10 min-w-[60px] text-right svelte-1n46o8q"> </div></button></div> <div class="flex-1 relative svelte-1n46o8q"><!> <button><span class="text-[11px] font-black text-zinc-800 uppercase tracking-tight svelte-1n46o8q">HOP BETS</span> <div class="bg-black/30 px-3 py-1 rounded shadow-inner text-[11px] font-black text-white border border-black/10 min-w-[60px] text-right svelte-1n46o8q"> </div></button></div></div> <div class="bg-[#1a4d2e] rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] p-1.5 flex-1 flex flex-col gap-1.5 relative overflow-hidden group svelte-1n46o8q"><!></div></div> <div class="flex-1 flex flex-col gap-1 min-w-0 svelte-1n46o8q"><div class="flex gap-1 h-[45%] relative svelte-1n46o8q"><!> <!></div> <div class="flex-1 flex gap-2 svelte-1n46o8q"><div class="w-24 flex flex-col gap-1 py-1 shrink-0 svelte-1n46o8q"><button> </button> <div class="h-[16%] relative group svelte-1n46o8q"><!> <button>Press</button></div> <div class="h-[16%] relative group svelte-1n46o8q"><!> <button>Across</button></div> <div class="flex-1 flex flex-col items-center justify-between py-1 shrink-0 mt-2 svelte-1n46o8q"><!> <!> <!></div></div> <div class="flex-1 flex flex-col gap-2 min-w-0 svelte-1n46o8q"><!> <!> <div class="h-[28%] flex gap-2 svelte-1n46o8q"><!> <!></div></div></div></div></div> <div class="h-24 shrink-0 flex flex-col gap-2 svelte-1n46o8q"><div class="h-10 bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.4),inset_0_0_15px_rgba(0,0,0,0.3)] flex items-center px-3 gap-4 overflow-x-auto whitespace-nowrap scrollbar-hide relative group svelte-1n46o8q"></div> <div class="flex-1 bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-between px-6 backdrop-blur-xl svelte-1n46o8q"><div class="flex gap-2 svelte-1n46o8q"><button class="px-4 py-2 bg-gradient-to-b from-zinc-100 to-zinc-300 rounded-xl border-b-2 border-white/20 flex items-center gap-2 text-zinc-800 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] hover:scale-105 transition-transform active:scale-95 group svelte-1n46o8q"><div class="w-5 h-5 rounded-full bg-red-500/80 flex items-center justify-center group-hover:rotate-180 transition-transform duration-500 shadow-sm svelte-1n46o8q"><!></div> <div class="flex flex-col items-start leading-none svelte-1n46o8q"><span class="text-[9px] font-black uppercase tracking-tighter svelte-1n46o8q">Take Down</span> <span class="text-[8px] font-bold opacity-80 text-red-600 svelte-1n46o8q">ALL BETS</span></div></button></div> <div class="flex items-center gap-2 svelte-1n46o8q"></div> <div class="flex gap-2 svelte-1n46o8q"><button class="px-3 py-2 bg-gradient-to-b from-zinc-100 to-zinc-300 rounded-xl border-b-2 border-white/20 flex items-center gap-1.5 text-zinc-800 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] hover:scale-105 transition-transform active:scale-95 svelte-1n46o8q"><div class="w-4 h-4 rounded-full bg-zinc-800/20 flex items-center justify-center text-[8px] font-black text-zinc-800 border border-zinc-800/30 svelte-1n46o8q">x2</div> <div class="flex flex-col items-start leading-none svelte-1n46o8q"><span class="text-[8px] font-black uppercase svelte-1n46o8q">Double</span> <span class="text-[7px] font-bold opacity-70 svelte-1n46o8q">Bet</span></div></button> <button class="px-3 py-2 bg-gradient-to-b from-zinc-100 to-zinc-300 rounded-xl border-b-2 border-white/20 flex items-center gap-1.5 text-zinc-800 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] hover:scale-105 transition-transform active:scale-95 svelte-1n46o8q"><div class="w-4 h-4 rounded-full bg-zinc-800/20 flex items-center justify-center border border-zinc-800/30 svelte-1n46o8q"><!></div> <div class="flex flex-col items-start leading-none svelte-1n46o8q"><span class="text-[8px] font-black uppercase svelte-1n46o8q">Repeat</span> <span class="text-[7px] font-bold opacity-70 svelte-1n46o8q">Last Bet</span></div></button> <button class="px-8 py-2 bg-[#1a4d2e] text-white rounded-xl border-2 border-emerald-400/50 text-xs font-black uppercase shadow-[0_0_20px_rgba(52,211,153,0.3),inset_0_0_15px_rgba(0,0,0,0.4)] hover:shadow-[0_0_30px_rgba(52,211,153,0.5)] hover:bg-emerald-800 transition-all active:scale-95 disabled:opacity-50 disabled:scale-100 svelte-1n46o8q"> </button></div></div></div></div></main>`);function wK(d,t){ks(t,!1);const i=fe(),n=fe(),x=fe(),S=fe(),s=fe(),T=fe(),e=fe(),a=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let g=null,f=fe(null),o=null,u=null;async function r(){if(!a)return;const rt="./";try{const ot=`${rt}poker_chip.mp3`.replace(/\/+/g,"/"),Mt=await fetch(ot);if(Mt.ok){const mt=await Mt.arrayBuffer();g=await a.decodeAudioData(mt)}}catch(ot){console.error("Failed to load chip sound:",ot)}try{const ot=`${rt}roll.mp3`.replace(/\/+/g,"/"),Mt=await fetch(ot);if(Mt.ok){const mt=await Mt.arrayBuffer();ut(f,await a.decodeAudioData(mt))}}catch(ot){console.error("Failed to load roll sound:",ot)}try{const ot=`${rt}win.mp3`.replace(/\/+/g,"/"),Mt=await fetch(ot);if(Mt.ok){const mt=await Mt.arrayBuffer();o=await a.decodeAudioData(mt)}}catch(ot){console.error("Failed to load win sound:",ot)}try{const ot=`${rt}lose.mp3`.replace(/\/+/g,"/"),Mt=await fetch(ot);if(Mt.ok){const mt=await Mt.arrayBuffer();u=await a.decodeAudioData(mt)}}catch(ot){console.error("Failed to load lose sound:",ot)}}function h(){return JSON.parse(localStorage.getItem("bubble_craps_db")||'{"users":[]}')}function c(rt){localStorage.setItem("bubble_craps_db",JSON.stringify(rt))}async function l(rt){const{username:ot,password:Mt,nickname:mt}=rt.detail;console.log("App: handleSignup triggered for",ot),ut(D,"");try{const ie=await F$(ot,Mt,mt);console.log("App: signupUser successful",ie),v(ie),ut(yt,"ACCOUNT CREATED SUCCESSFULLY")}catch(ie){console.error("App: Signup failed error:",ie),ut(D,ie.message||"Signup failed"),ut(L,!0)}}async function p(rt){const{username:ot,password:Mt}=rt.detail;console.log("App: handleLogin triggered for",ot),ut(D,"");try{const mt=await D$(ot,Mt);console.log("App: loginUser successful",mt),v(mt),ut(yt,"WELCOME BACK, "+(mt.nickname||mt.username).toUpperCase())}catch(mt){console.error("App: Login failed error:",mt),ut(D,mt.message||"Invalid username or password"),ut(L,!0)}}function m(){v({username:"Guest",nickname:"Guest",mode:"guest",balance:300,highestBalance:300,largestWin:0,largestLoss:0,resetCount:0})}function v(rt){ut(F,rt),ut(U,rt.balance),ut(L,!1),ut(ki,rt.highestBalance||rt.balance),Fn=rt.largestWin||0,ts=rt.largestLoss||0,ut(Z,{4:0,6:0,8:0,10:0}),localStorage.setItem("bubble_craps_session",JSON.stringify({username:rt.username,mode:rt.mode||"user"})),rt.mode!=="guest"&&rm(rt)}function y(){Y(F)&&Y(F).mode!=="guest"&&C(),O$(),ut(F,null),ut(L,!0),localStorage.removeItem("bubble_craps_session")}let E;function C(){if(!Y(F)||Y(F).mode==="guest")return;const rt=h(),ot=rt.users.findIndex(Mt=>Mt.username.toLowerCase()===Y(F).username.toLowerCase());ot!==-1&&(rt.users[ot].balance=Y(U),rt.users[ot].highestBalance=Math.max(rt.users[ot].highestBalance||0,Y(ki)),rt.users[ot].largestWin=Math.max(rt.users[ot].largestWin||0,Fn),rt.users[ot].largestLoss=Math.max(rt.users[ot].largestLoss||0,ts),c(rt),ut(F,{...rt.users[ot],mode:"user"}),E&&clearTimeout(E),E=setTimeout(()=>{rm(Y(F))},5e3))}function w(){if(Y(F)){if(ut(U,300),ut(ki,300),Fn=0,ts=0,Y(F).mode!=="guest"){const rt=h(),ot=rt.users.findIndex(Mt=>Mt.username.toLowerCase()===Y(F).username.toLowerCase());ot!==-1&&(rt.users[ot].resetCount=(rt.users[ot].resetCount||0)+1,rt.users[ot].balance=300,c(rt),ut(F,{...rt.users[ot],mode:"user"}))}else Js(F,Y(F).resetCount=(Y(F).resetCount||0)+1),Js(F,Y(F).balance=300);ut(yt,"BALANCE RESET TO $300"),ut(O,!1)}}let A,M;async function R(){const rt=h();rt.users.length>0&&await hx(rt.users),A=U$(ot=>{if(ut(I,ot),Y(F)&&Y(F).mode!=="guest"){const Mt=ot.find(mt=>mt.username.toLowerCase()===Y(F).username.toLowerCase());if(Mt){let mt=!1;Mt.highestBalance>Y(ki)&&(ut(ki,Mt.highestBalance),mt=!0),Mt.largestWin>Fn&&(Fn=Mt.largestWin,mt=!0),Mt.largestLoss>ts&&(ts=Mt.largestLoss,mt=!0),Mt.balance!==Y(U)&&(ut(U,Mt.balance),mt=!0),mt&&C()}}}),M=setInterval(()=>{Y(F)&&Y(F).mode!=="guest"&&rm(Y(F))},3e4)}Rd(async()=>{r(),setTimeout(async()=>{await R(),N$(ot=>{ot&&!Y(F)&&v({...ot,mode:"user"})});const rt=JSON.parse(localStorage.getItem("bubble_craps_session"));rt&&rt.mode==="guest"&&(localStorage.removeItem("bubble_craps_session"),ut(L,!0))},1e3)}),P1(()=>{A&&A(),M&&clearInterval(M)});function P(rt="place"){if(!a||Y(X))return;if(rt==="roll"){if(!Y(f))return;const ie=a.createBufferSource();ie.buffer=Y(f);const kt=a.createGain();ie.connect(kt),kt.connect(a.destination),kt.gain.setValueAtTime(.6,a.currentTime),ie.start(0);return}if(rt==="win"){if(!o)return;const ie=a.createBufferSource();ie.buffer=o;const kt=a.createGain();ie.connect(kt),kt.connect(a.destination),kt.gain.setValueAtTime(.7,a.currentTime),ie.start(0);return}if(rt==="7out"){if(!u)return;const ie=a.createBufferSource();ie.buffer=u;const kt=a.createGain();ie.connect(kt),kt.connect(a.destination),kt.gain.setValueAtTime(.7,a.currentTime),ie.start(0);return}if(g){const ie=a.createBufferSource();ie.buffer=g;const kt=a.createGain();if(ie.connect(kt),kt.connect(a.destination),ie.playbackRate.value=.9+Math.random()*.2,rt==="select")kt.gain.setValueAtTime(.3,a.currentTime);else if(rt==="win"){kt.gain.setValueAtTime(.7,a.currentTime);const De=a.createBufferSource();De.buffer=g,De.playbackRate.value=1.1+Math.random()*.2,De.connect(kt),De.start(a.currentTime+.1)}else rt==="loss"?(kt.gain.setValueAtTime(.4,a.currentTime),ie.playbackRate.value=.7+Math.random()*.1):kt.gain.setValueAtTime(.5,a.currentTime);ie.start(0);return}const ot=a.createOscillator(),Mt=a.createGain();ot.connect(Mt),Mt.connect(a.destination);const mt=a.currentTime;rt==="win"?(ot.type="sine",ot.frequency.setValueAtTime(800,mt),ot.frequency.exponentialRampToValueAtTime(1200,mt+.1),Mt.gain.setValueAtTime(0,mt),Mt.gain.linearRampToValueAtTime(.2,mt+.02),Mt.gain.exponentialRampToValueAtTime(.01,mt+.3),ot.start(mt),ot.stop(mt+.3)):rt==="loss"?(ot.type="sawtooth",ot.frequency.setValueAtTime(200,mt),ot.frequency.exponentialRampToValueAtTime(50,mt+.2),Mt.gain.setValueAtTime(.1,mt),Mt.gain.exponentialRampToValueAtTime(.01,mt+.2),ot.start(mt),ot.stop(mt+.2)):(ot.type="square",ot.frequency.setValueAtTime(1500,mt),ot.frequency.exponentialRampToValueAtTime(400,mt+.05),Mt.gain.setValueAtTime(.1,mt),Mt.gain.exponentialRampToValueAtTime(.01,mt+.05),ot.start(mt),ot.stop(mt+.05))}let b=fe(),F=fe(null),I=fe([]),L=fe(!0),D=fe(""),O=fe(!1),z=fe(!1),_=fe(!1),X=fe(!1),H=fe(!1),U=fe(300),G=fe(5),N=fe("hardways"),W=fe(0),V=fe(!1),$=fe();function j(rt){return Object.keys(Y(k)).filter(ot=>ot.startsWith(rt)).reduce((ot,Mt)=>ot+Y(k)[Mt],0)}let k=fe({}),Q=fe({}),et=fe(!1),at=fe(null),q=fe(!1),ft=fe(!1),vt=fe(!1),Tt=fe(!1),ct=fe({id:"",amount:0,betType:"",commission:0}),Ut={id:"",amount:0},yt=fe("MINIMUM TOTAL BET: $3"),it=fe([{dice:[6,6],total:12,establishesPoint:!1},{dice:[4,4],total:8,establishesPoint:!1},{dice:[3,5],total:8,establishesPoint:!1},{dice:[2,6],total:8,establishesPoint:!1},{dice:[1,5],total:6,establishesPoint:!1},{dice:[4,2],total:6,establishesPoint:!1},{dice:[5,6],total:11,establishesPoint:!1},{dice:[3,5],total:8,establishesPoint:!1},{dice:[4,4],total:8,establishesPoint:!1},{dice:[2,3],total:5,establishesPoint:!1},{dice:[5,6],total:11,establishesPoint:!1}]),Z=fe({4:0,6:0,8:0,10:0}),lt=fe(new Set),pt=!0;async function Pt(){ut(H,!0);try{const rt=await B$();if(ut(I,rt),Y(F)&&Y(F).mode!=="guest"){const ot=rt.find(Mt=>Mt.username.toLowerCase()===Y(F).username.toLowerCase());ot&&(ut(ki,Math.max(Y(ki),ot.highestBalance||0)),Fn=Math.max(Fn,ot.largestWin||0),ts=Math.max(ts,ot.largestLoss||0),ot.balance!==Y(U)&&ut(U,ot.balance),C())}}catch(rt){console.error("App: Manual refresh failed",rt)}finally{ut(H,!1)}}let wt=fe(!1),jt=fe(!1),Vt=fe(0),Wt=fe(0),ue=null,Gt=null,zt=fe(!1),Yt=null,bt=fe(""),Kt=fe(0),ge=fe(0),ce=fe(0),Oe=!1,dt=fe(!1),Jt=fe(""),Dt=fe([]),Ot=fe(0);function ae(rt){if(rt<=0)return;rt>Fn&&(Fn=rt),ut(Vt,0),ut(wt,!0),ut(jt,!1),ut(zt,!1),Yt&&clearInterval(Yt),ue&&clearTimeout(ue);const ot=o?o.duration*1e3:4500,Mt=ot*.95,mt=60,ie=rt/mt;let kt=0,De=0;Yt=setInterval(()=>{kt+=ie,kt>=rt&&(kt=rt,clearInterval(Yt));const Ci=Math.floor(kt/10);Ci>De&&(De=Ci,Me()),ut(Vt,kt)},Mt/mt),ue=setTimeout(()=>{ut(wt,!1)},ot)}function ne(rt){if(rt<=0)return;rt>ts&&(ts=rt),ut(Wt,0),ut(jt,!0),ut(wt,!1),ut(zt,!1),Yt&&clearInterval(Yt),Gt&&clearTimeout(Gt);const ot=1200,Mt=60,mt=rt/Mt;let ie=0,kt=0;Yt=setInterval(()=>{ie+=mt,ie>=rt&&(ie=rt,clearInterval(Yt));const De=Math.floor(ie/10);De>kt&&(kt=De,Me()),ut(Wt,ie)},ot/Mt),Gt=setTimeout(()=>{ut(jt,!1)},4e3)}function Me(){ut(zt,!0),P("select"),setTimeout(()=>{ut(zt,!1)},100)}function Mi(){if(!Y(S)){Y(ge)===0?ut(yt,"NO WINNINGS TO PRESS"):ut(yt,"WINNINGS ALREADY PRESSED");return}let rt=0,ot=0;Y(Dt).forEach(Mt=>{const mt=Ui[Mt]||0;mt>0&&(Js(k,Y(k)[Mt]=(Y(k)[Mt]||0)+mt),ot+=mt,rt++)}),rt>0&&(ut(U,Y(U)-ot),ut(Ot,0),ut(Dt,[]),ut(k,Y(k)),ut(yt,`PRESSED ${rt} BETS WITH $${ot.toFixed(2)}`),P("place"))}let Ui={};function Xe(){if(Y(at)===null){ut(yt,"ACROSS ONLY AFTER COME-OUT");return}const ot=[2,3,4,5,6,8,9,10,11,12].filter(mt=>mt!==Y(at)),Mt=ot.length*Y(G);if(Y(U)<Mt){ut(yt,"INSUFFICIENT CREDIT FOR ACROSS");return}ot.forEach(mt=>{const ie=`place_${mt}`;ut(U,Y(U)-Y(G)),Js(k,Y(k)[ie]=(Y(k)[ie]||0)+Y(G))}),ut(k,Y(k)),ut(yt,`PLACED $${Y(G)} ACROSS`)}let Ri=fe([1,1]),ki=fe(300),Fn=0,ts=0;Rd(()=>{});function Ne(rt){if(!(Y(et)||Y(Tt))){if(Y(k)[rt]>0,rt==="passline"&&Y(at)!==null){ut(yt,"PASS LINE IS LOCKED");return}if(rt==="come"&&Y(at)===null){ut(yt,"PLACE COME BET AFTER POINT");return}if(["low_rolls","high_rolls","roll_em_all"].includes(rt)&&!pt){ut(yt,"PLACEMENT ONLY AFTER SEVEN");return}if(rt==="take_odds"){if(Y(at)===null){ut(yt,"POINT NOT SET");return}const ot=Y(k).passline||0;if(ot===0){ut(yt,"PLACE PASS LINE FIRST");return}const Mt=Y(k).take_odds||0,ie={2:2,12:2,3:2,11:2,4:3,10:3,5:4,9:4,6:5,8:5}[Y(at)]||3,kt=ot*ie;if(Mt+Y(G)>kt){ut(yt,`${ie}X ODDS LIMIT ($${kt})`);return}}if(Y(U)<Y(G)){ut(yt,"INSUFFICIENT CREDIT");return}if(rt.startsWith("buy_")||rt.startsWith("lay_")){const ot=Y(G)*.05;if(Y(U)<Y(G)+ot){ut(yt,"INSUFFICIENT CREDIT FOR COMMISSION");return}ut(ct,{id:rt,amount:Y(G),betType:rt.startsWith("buy_")?"Buy":"Lay",commission:ot}),ut(Tt,!0);return}ut(U,Y(U)-Y(G)),Js(k,Y(k)[rt]=(Y(k)[rt]||0)+Y(G)),P("place"),ut(k,Y(k))}}function xa(){const{id:rt,amount:ot,commission:Mt}=Y(ct);ut(U,Y(U)-(ot+Mt)),Js(k,Y(k)[rt]=(Y(k)[rt]||0)+ot),ut(k,Y(k)),ut(Tt,!1),ut(yt,"COMMISSION PAID")}function Gr(){ut(Tt,!1),ut(yt,"BET CANCELLED")}function $h(rt){const ot=rt.detail;if(ut(ft,!1),ot>0&&Y(at)!==null&&Y(k).passline>0){const Mt=Y(k).passline*ot;Y(U)>=Mt?(ut(U,Y(U)-Mt),Js(k,Y(k).take_odds=(Y(k).take_odds||0)+Mt),ut(k,Y(k)),ut(yt,`${ot}X ODDS APPLIED`)):ut(yt,"INSUFFICIENT CREDIT FOR ODDS")}}function es(rt){const{targetNumber:ot,type:Mt,amount:mt,sourceId:ie}=rt.detail;ut(vt,!1),delete Y(k)[ie];const kt=`${Mt}_${ot}`;Js(k,Y(k)[kt]=(Y(k)[kt]||0)+mt),Mt==="place"&&Y(k)[kt]>=20?(Js(k,Y(k)[`buy_${ot}`]=(Y(k)[`buy_${ot}`]||0)+Y(k)[kt]),delete Y(k)[kt],ut(yt,`MOVED TO BUY ${ot}`)):ut(yt,`MOVED TO ${Mt.toUpperCase()} ${ot}`),ut(k,Y(k))}function El(){if(!(Y(et)||Y(Tt))){if(!Y(T)){Y(at)===null?ut(yt,"PLACE PASS LINE BET"):ut(yt,"NO ACTIVE BETS");return}ut(V,!0),ut(yt,"ROLLING..."),Y($)?Y($).roll():setTimeout(()=>{Y($)&&Y($).roll()},50)}}function ya(rt){const{dice:ot,total:Mt}=rt.detail;ut(dt,!1);const mt=Y(at)===null&&Mt!==7;ut(Ri,ot),ut(it,[{dice:ot,total:Mt,establishesPoint:mt},...Y(it).slice(0,14)]),ut(yt,`YOU ROLLED ${Mt}`),vo(Mt),ut(et,!1)}function Ta(){Y(et)||Y(Tt)||(Y($)?Y($).roll():El())}function co(rt){rt.code==="Space"&&(rt.preventDefault(),Ta())}const po=[2,3,4,5,6,8,9,10,11,12],lc={2:11/2,3:11/4,4:9/5,5:7/5,6:7/6,8:7/6,9:7/5,10:9/5,11:11/4,12:11/2},Sl={2:6/1,3:3/1,4:2/1,5:3/2,6:6/5,8:6/5,9:3/2,10:2/1,11:3/1,12:6/1},hc={4:7,6:9,8:9,10:7};function vo(rt){let ot=0,Mt=0;const mt={...Y(k)},ie=[],kt=[],De=Y(at)!==null,Ci=Oe;ut(Dt,[]),Ui={},ut(Ot,0);const _e=(Lt,ee)=>{ie.push(Lt),Y(Dt).push(Lt),Ui[Lt]=(Ui[Lt]||0)+ee,ut(Ot,Y(Ot)+ee)};ut(Kt,Object.keys(Y(k)).reduce((Lt,ee)=>Lt+(Y(k)[ee]||0),0));const Ii=Lt=>!(Y(q)&&(Lt.startsWith("place_")||Lt.startsWith("buy_")||Lt.startsWith("num_")||Lt.startsWith("hard_")||Lt==="take_odds")||Y(Q)[Lt]==="off"||Lt.startsWith("num_")&&Y(Q)[Lt]==="off"||Y(at)===null&&Lt.startsWith("hard_")&&Y(Q)[Lt]!=="on");if([4,6,8,10].forEach(Lt=>Js(Z,Y(Z)[Lt]++)),Y(Ri)[0]===Y(Ri)[1]&&[4,6,8,10].includes(rt)&&Js(Z,Y(Z)[rt]=0),ut(Z,Y(Z)),ut(bt,""),rt!==7&&(Y(lt).add(rt),ut(lt,Y(lt)),pt=!1),mt.field)if([2,3,4,9,10,11,12].includes(rt)){let Lt=rt===2||rt===12?2:1;const ee=mt.field*Lt;ot+=mt.field+ee,Mt+=ee,_e("field",ee),ut(bt,Y(bt)+`Field $${ee.toFixed(2)} WIN. `),delete Y(k).field}else kt.push("field"),ut(bt,Y(bt)+`Field $${mt.field.toFixed(2)} LOSS. `),delete Y(k).field;if(mt.any_7){if(rt===7){const Lt=mt.any_7*4;ot+=mt.any_7+Lt,Mt+=Lt,_e("any_7",Lt),ut(bt,Y(bt)+`Any 7 $${Lt.toFixed(2)} WIN. `)}else kt.push("any_7"),ut(bt,Y(bt)+`Any 7 $${mt.any_7.toFixed(2)} LOSS. `);delete Y(k).any_7}if(mt.any_craps||mt.bet_c){const Lt=(mt.any_craps||0)+(mt.bet_c||0);if([2,3,12].includes(rt)){const ee=Lt*7;ot+=Lt+ee,Mt+=ee,mt.any_craps&&_e("any_craps",mt.any_craps*7),mt.bet_c&&_e("bet_c",mt.bet_c*7),ut(bt,Y(bt)+`Craps $${ee.toFixed(2)} WIN. `)}else mt.any_craps&&kt.push("any_craps"),mt.bet_c&&kt.push("bet_c"),ut(bt,Y(bt)+`Craps $${Lt.toFixed(2)} LOSS. `);delete Y(k).any_craps,delete Y(k).bet_c}if(mt.bet_e||mt.horn_11){const Lt=(mt.bet_e||0)+(mt.horn_11||0);if(rt===11){const ee=Lt*15;ot+=Lt+ee,Mt+=ee,mt.bet_e&&_e("bet_e",mt.bet_e*15),mt.horn_11&&_e("horn_11",mt.horn_11*15),ut(bt,Y(bt)+`Yo-11 $${ee.toFixed(2)} WIN. `)}else mt.bet_e&&kt.push("bet_e"),mt.horn_11&&kt.push("horn_11"),ut(bt,Y(bt)+`Yo-11 $${Lt.toFixed(2)} LOSS. `);delete Y(k).bet_e,delete Y(k).horn_11}if(mt.horn_bet){const Lt=mt.horn_bet/4;if(rt===2||rt===12||rt===3||rt===11){let ee=0;rt===2||rt===12?ee=Lt*30-3*Lt:(rt===3||rt===11)&&(ee=Lt*15-3*Lt),ot+=Lt+ee,Mt+=ee,_e("horn_bet",ee),ut(bt,Y(bt)+`Horn $${ee.toFixed(2)} WIN. `)}else kt.push("horn_bet"),ut(bt,Y(bt)+`Horn $${mt.horn_bet.toFixed(2)} LOSS. `);delete Y(k).horn_bet}if(mt.bet_ce){if([2,3,12,11].includes(rt)){let Lt=0;[2,3,12].includes(rt)?Lt=mt.bet_ce*3:rt===11&&(Lt=mt.bet_ce*7),ot+=mt.bet_ce+Lt,Mt+=Lt,_e("bet_ce",Lt),ut(bt,Y(bt)+`C&E $${Lt.toFixed(2)} WIN. `)}else kt.push("bet_ce"),ut(bt,Y(bt)+`C&E $${mt.bet_ce.toFixed(2)} LOSS. `);delete Y(k).bet_ce}if(["horn_2","horn_3","horn_12"].forEach(Lt=>{if(mt[Lt]){const ee=parseInt(Lt.split("_")[1]);if(rt===ee){const Ce=mt[Lt]*(ee===2||ee===12?30:15);ot+=mt[Lt]+Ce,Mt+=Ce,_e(Lt,Ce),ut(bt,Y(bt)+`Horn ${ee} $${Ce.toFixed(2)} WIN. `)}else kt.push(Lt),ut(bt,Y(bt)+`Horn ${ee} $${mt[Lt].toFixed(2)} LOSS. `);delete Y(k)[Lt]}}),Object.keys(mt).forEach(Lt=>{if(Lt.startsWith("hop_")){const ee=Lt.split("_"),Ce=parseInt(ee[1]),Zt=parseInt(ee[2]),Se=mt[Lt];if(Y(Ri)[0]===Ce&&Y(Ri)[1]===Zt||Y(Ri)[0]===Zt&&Y(Ri)[1]===Ce){const Ye=Se*(Ce===Zt?30:15);ot+=Se+Ye,Mt+=Ye,_e(Lt,Ye),ut(bt,Y(bt)+`Hop ${Ce}/${Zt} $${Ye.toFixed(2)} WIN. `)}else kt.push(Lt),ut(bt,Y(bt)+`Hop ${Ce}/${Zt} $${Se.toFixed(2)} LOSS. `);delete Y(k)[Lt]}}),[4,6,8,10].forEach(Lt=>{const ee=`hard_${Lt}`;if(mt[ee]&&Ii(ee))if(rt===Lt&&Y(Ri)[0]===Y(Ri)[1]){const Ce=mt[ee]*hc[Lt];ot+=mt[ee]+Ce,Mt+=Ce,_e(ee,Ce),ut(bt,Y(bt)+`Hard ${Lt} $${Ce.toFixed(2)} WIN. `),delete Y(k)[ee]}else(rt===7||rt===Lt&&Y(Ri)[0]!==Y(Ri)[1])&&(kt.push(ee),ut(bt,Y(bt)+`Hard ${Lt} $${mt[ee].toFixed(2)} LOSS. `),delete Y(k)[ee])}),Y(at)===null)if(rt===7){if(mt.passline){const Lt=mt.passline;ot+=mt.passline+Lt,Mt+=Lt,_e("passline",Lt),ut(bt,Y(bt)+`Pass Line $${Lt.toFixed(2)} WIN. `)}Object.keys(Y(k)).forEach(Lt=>{Lt!=="passline"&&(kt.push(Lt),mt[Lt]&&ut(bt,Y(bt)+`${Lt.replace("_"," ")} $${mt[Lt].toFixed(2)} LOSS. `)),delete Y(k)[Lt]}),ut(q,!0)}else ut(at,rt),ut(yt,`POINT IS ${Y(at)}`),ut(bt,Y(bt)+`Point set to ${Y(at)}. `),ut(q,!1),Y(k).take_odds&&(ut(U,Y(U)+Y(k).take_odds),delete Y(k).take_odds),Y(k).passline>0&&ut(ft,!0);else{if(mt.come)if(rt===7){const Lt=mt.come;ot+=mt.come+Lt,Mt+=Lt,ie.push("come"),ut(bt,Y(bt)+`Come $${Lt.toFixed(2)} WIN. `),delete Y(k).come}else{const Lt=`come_${rt}`;Js(k,Y(k)[Lt]=(Y(k)[Lt]||0)+mt.come),delete Y(k).come,ut(bt,Y(bt)+`Come moved to ${rt}. `)}if(po.forEach(Lt=>{const ee=`come_${Lt}`;if(mt[ee])if(rt===Lt){const Ce=mt[ee];ot+=mt[ee]+Ce,Mt+=Ce,ie.push(ee),ut(bt,Y(bt)+`Come ${Lt} $${Ce.toFixed(2)} WIN. `),delete Y(k)[ee]}else rt===7&&(kt.push(ee),ut(bt,Y(bt)+`Come ${Lt} $${mt[ee].toFixed(2)} LOSS. `),delete Y(k)[ee])}),rt===Y(at)){if(mt.passline){const Lt=mt.passline;ot+=mt.passline+Lt,Mt+=Lt,_e("passline",Lt),ut(bt,Y(bt)+`Pass Line $${Lt.toFixed(2)} WIN. `)}if(mt.take_odds&&Ii("take_odds")){const Lt=mt.take_odds*Sl[Y(at)];ot+=mt.take_odds+Lt,Mt+=Lt,_e("take_odds",Lt),ut(bt,Y(bt)+`Odds $${Lt.toFixed(2)} WIN. `)}delete Y(k).passline,delete Y(k).take_odds,ut(at,null),ut(yt,"WINNER! PASS LINE PAYS")}else rt===7&&(mt.passline&&(kt.push("passline"),ut(bt,Y(bt)+`Pass Line $${mt.passline.toFixed(2)} LOSS. `)),mt.take_odds&&(kt.push("take_odds"),ut(bt,Y(bt)+`Odds $${mt.take_odds.toFixed(2)} LOSS. `)),Object.keys(Y(k)).forEach(Lt=>{Lt!=="passline"&&Lt!=="take_odds"&&(kt.push(Lt),mt[Lt]&&ut(bt,Y(bt)+`${Lt.replace("_"," ")} $${mt[Lt].toFixed(2)} LOSS. `)),delete Y(k)[Lt]}),ut(at,null),ut(yt,"SEVEN OUT"),ut(q,!0),Oe=!0)}if(po.forEach(Lt=>{const ee=`place_${Lt}`;if(mt[ee]&&Ii(ee)&&rt===Lt){const Zt=Math.floor(mt[ee]*lc[Lt]);ot+=Zt,Mt+=Zt,_e(ee,Zt),ut(bt,Y(bt)+`Place ${Lt} $${Zt.toFixed(2)} WIN. `)}const Ce=`buy_${Lt}`;if(mt[Ce]&&Ii(Ce)&&rt===Lt){const Zt=Math.floor(mt[Ce]*Sl[Lt]);ot+=Zt,Mt+=Zt,_e(Ce,Zt),ut(bt,Y(bt)+`Buy ${Lt} $${Zt.toFixed(2)} WIN. `)}}),rt===7)ut(lt,new Set),pt=!0;else{const Lt=[2,3,4,5,6],ee=[8,9,10,11,12],Ce=[...Lt,...ee];if(Y(k).low_rolls&&Lt.every(Zt=>Y(lt).has(Zt))){const Zt=Y(k).low_rolls*30;ot+=Y(k).low_rolls+Zt,Mt+=Zt,_e("low_rolls",Zt),delete Y(k).low_rolls,ut(yt,"LUCKY ROLLER LOW WIN!"),ut(bt,Y(bt)+`Lucky Low $${Zt.toFixed(2)} WIN. `)}if(Y(k).high_rolls&&ee.every(Zt=>Y(lt).has(Zt))){const Zt=Y(k).high_rolls*30;ot+=Y(k).high_rolls+Zt,Mt+=Zt,_e("high_rolls",Zt),delete Y(k).high_rolls,ut(yt,"LUCKY ROLLER HIGH WIN!"),ut(bt,Y(bt)+`Lucky High $${Zt.toFixed(2)} WIN. `)}if(Y(k).roll_em_all&&Ce.every(Zt=>Y(lt).has(Zt))){const Zt=Y(k).roll_em_all*155;ot+=Y(k).roll_em_all+Zt,Mt+=Zt,_e("roll_em_all",Zt),delete Y(k).roll_em_all,ut(yt,"ROLL 'EM ALL WIN!"),ut(bt,Y(bt)+`Roll 'Em All $${Zt.toFixed(2)} WIN. `)}}ut(ge,ot);const an=kt.reduce((Lt,ee)=>Lt+(mt[ee]||0),0),Hn=Mt-an;Ci&&!De?(ut(ce,Hn),Oe=!1):ut(ce,Y(ce)+Hn),rt===7&&De&&(ut(dt,!0),ut(Jt,`SHOOTER SEVEN-OUT! ROUND P/L: ${Y(ce)>=0?"+":""}$${Math.abs(Y(ce)).toFixed(2)}`)),ut(Kt,Number(Y(Kt))),ut(ge,Number(Y(ge))),ut(ce,Number(Y(ce))),console.log("Finalized Stats:",{lastRollTotalBet:Y(Kt),lastRollWinnings:Y(ge),rollerTally:Y(ce),netRoll:Hn});try{if(Y(b)){const Lt=Ce=>{const Zt=document.querySelector(`[data-bet-id="${Ce}"]`);if(Zt){const Se=Zt.getBoundingClientRect();return{x:Se.left+Se.width/2,y:Se.top+Se.height/2}}return null},ee=kt.reduce((Ce,Zt)=>Ce+(mt[Zt]||0),0);if(rt===7){const Ce=kt.map(Lt).filter(Zt=>Zt!==null);if(Ce.length>0&&(Y(b).triggerLossAnimation(Ce),ee>0&&(P("7out"),ne(ee))),ie.length>0){const Zt=ie.map(Lt).filter(Se=>Se!==null);Zt.length>0&&(Y(b).triggerWinAnimation(Zt),P("win"),ae(ot))}}else{if(ie.length>0){const Ce=ie.map(Lt).filter(Zt=>Zt!==null);Ce.length>0&&(Y(b).triggerWinAnimation(Ce),P("win"),ae(ot))}if(kt.length>0){const Ce=kt.map(Lt).filter(Zt=>Zt!==null);Ce.length>0&&(Y(b).triggerLossAnimation(Ce),ee>0&&(P("loss"),ne(ee)))}}}}catch(Lt){console.error("Error in animation/sound processing:",Lt)}ut(U,Y(U)+ot),ut(k,Y(k)),ot>0&&ut(yt,`WINNER! $${ot.toFixed(2)}`),C()}function je(rt,ot){if(!(Y(et)||Y(Tt))){if(ot&&ot.preventDefault(),rt==="passline"&&Y(at)!==null){ut(yt,"PASS LINE IS A CONTRACT BET");return}Y(k)[rt]&&(ut(U,Y(U)+Y(k)[rt]),delete Y(k)[rt],ut(k,Y(k)),ut(yt,"BET REMOVED"),P("remove"))}}function nt(){if(Y(et)||Y(Tt))return;const rt={};let ot=0;Object.keys(Y(k)).forEach(Mt=>{Mt==="passline"&&Y(at)!==null?rt[Mt]=Y(k)[Mt]:ot+=Y(k)[Mt]}),ut(U,Y(U)+ot),ut(k,rt),Y(k).passline&&Y(at)!==null&&ut(yt,"CONTRACT BETS REMAINED")}const gt={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]};un(()=>Y(I),()=>{ut(i,[...Y(I)].filter(rt=>rt.username!=="Guest").sort((rt,ot)=>(ot.highestBalance||0)-(rt.highestBalance||0)))}),un(()=>{},()=>{ut(n,h().users.filter(rt=>rt.username!=="Guest"))}),un(()=>(Y(I),Y(n),Y(F),Y(U)),()=>{ut(x,(()=>{const rt=[...Y(I)];return Y(n).forEach(ot=>{const Mt=rt.findIndex(mt=>mt.username.toLowerCase()===ot.username.toLowerCase());if(Mt!==-1){const mt=Y(F)&&ot.username.toLowerCase()===Y(F).username.toLowerCase(),ie=mt?Y(U):ot.balance;rt[Mt]={...rt[Mt],...ot,balance:ie,highestBalance:Math.max(rt[Mt].highestBalance||0,ot.highestBalance||0,ie),isLocal:!0,isYou:mt}}else rt.push({...ot,isLocal:!0,isYou:Y(F)&&ot.username.toLowerCase()===Y(F).username.toLowerCase()})}),rt})())}),un(()=>Y(F),()=>{Y(F)&&Y(F).mode!=="guest"&&C()}),un(()=>(Y(n),hx),()=>{Y(n).length>0&&hx(Y(n)).catch(rt=>console.error("Auto-sync failed",rt))}),un(()=>(Y(Kt),Y(ge),Y(ce)),()=>{console.log("Stats Update:",{lastRollTotalBet:Y(Kt),lastRollWinnings:Y(ge),rollerTally:Y(ce)})}),un(()=>Y(W),()=>{Y(W)===2&&(ut(q,!0),ut(W,0))}),un(()=>(Y(Ot),Y(Dt)),()=>{ut(S,Y(Ot)>0&&Y(Dt).length>0)}),un(()=>(Y(k),Y(q),Y(Q),Y(at)),()=>{ut(s,Object.entries(Y(k)).reduce((rt,[ot,Mt])=>{let mt=!0;return Y(q)?(ot.startsWith("place_")||ot.startsWith("buy_")||ot.startsWith("hard_")||ot==="take_odds")&&(mt=!1):(Y(Q)[ot]==="off"&&(mt=!1),Y(at)===null&&ot.startsWith("hard_")&&Y(Q)[ot]!=="on"&&(mt=!1)),mt?rt+Mt:rt},0))}),un(()=>(Y(at),Y(s),Y(k)),()=>{ut(T,Y(at)!==null?Y(s)>0||Object.values(Y(k)).some(rt=>rt>0):Y(k).passline>0)}),un(()=>(Y(U),Y(ki)),()=>{Y(U)>Y(ki)&&ut(ki,Y(U))}),un(()=>Y(k),()=>{ut(e,Object.values(Y(k)).reduce((rt,ot)=>rt+ot,0))}),Vh(),vr();var Rt=AK();Ze("keydown",Ex,co);var It=ht(Rt);lm(jF(It,{get roll(){return Y(Ri)},$$legacy:!0}),rt=>ut(b,rt),()=>Y(b));var Et=xt(It,2);{var $t=rt=>{SF(rt,{get errorMessage(){return Y(D)},$$events:{login:p,signup:l,guest:m}})};Pe(Et,rt=>{Y(L)&&rt($t)})}var se=xt(Et,2);{var le=rt=>{var ot=V$(),Mt=ht(ot),mt=ht(Mt),ie=ht(mt),kt=ht(ie),De=ht(kt);lS(De,{size:24});var Ci=xt(ie,2),_e=ht(Ci);sg(_e,{size:20});var Ii=xt(mt,2),an=ht(Ii),Hn=ht(an),Lt=ht(Hn),ee=ht(Lt);{var Ce=nu=>{cF(nu,{size:20})},Zt=nu=>{fF(nu,{size:20})};Pe(ee,nu=>{Y(X)?nu(Ce):nu(Zt,!1)})}var Se=xt(Lt,2),Ye=xt(ht(Se),2),As=ht(Ye),is=xt(Hn,2),xr=ht(is),vi=xt(an,2),wc=ht(vi),Ml=ht(wc),a4=ht(Ml);hd(a4,{size:20});var o4=xt(wc,2),HE=xt(vi,2),l4=ht(HE),h4=ht(l4);tM(h4,{size:20}),ai(()=>{$e(Lt,1,`p-2 rounded-lg ${Y(X)?"bg-red-500/20 text-red-400":"bg-emerald-500/20 text-emerald-400"}`,"svelte-1n46o8q"),be(As,Y(X)?"Muted":"Active"),$e(is,1,`w-12 h-6 rounded-full transition-colors relative ${Y(X)?"bg-red-500/40":"bg-emerald-500/40"} border border-white/10`,"svelte-1n46o8q"),$e(xr,1,`absolute top-1 w-4 h-4 rounded-full bg-white shadow-lg transition-all ${Y(X)?"left-1":"left-7"}`,"svelte-1n46o8q")}),Ze("click",Ci,()=>ut(O,!1)),Ze("click",is,()=>ut(X,!Y(X))),Ze("click",o4,w),Ze("click",HE,()=>{ut(O,!1),ut(_,!0)}),_t(rt,ot)};Pe(se,rt=>{Y(O)&&rt(le)})}var he=xt(se,2);{var we=rt=>{pV(rt,{get users(){return Y(x)},get loading(){return Y(H)},$$events:{refresh:Pt,close:()=>ut(z,!1)}})};Pe(he,rt=>{Y(z)&&rt(we)})}var Re=xt(he,2);{var Ee=rt=>{xV(rt,{$$events:{close:()=>ut(_,!1)}})};Pe(Re,rt=>{Y(_)&&rt(Ee)})}var Ge=xt(Re,2);{var si=rt=>{var ot=z$(),Mt=ht(ot),mt=ht(Mt),ie=ht(mt),kt=ht(ie),De=ht(kt),Ci=xt(kt,4),_e=ht(Ci);ai((Ii,an)=>{$e(Mt,1,`relative flex items-center justify-center scale-[1.5] animate-bounce ${Y(zt)?"scale-[1.7] brightness-150":""} transition-all duration-75`,"svelte-1n46o8q"),be(De,`$${Ii??""}`),be(_e,an)},[()=>(Y(Vt),Ht(()=>Math.floor(Y(Vt)))),()=>(Y(Vt),Ht(()=>(Y(Vt)%1).toFixed(2).split(".")[1]))]),_t(rt,ot)};Pe(Ge,rt=>{Y(wt)&&rt(si)})}var li=xt(Ge,2);{var ti=rt=>{var ot=G$(),Mt=ht(ot),mt=ht(Mt),ie=ht(mt),kt=ht(ie),De=ht(kt),Ci=xt(kt,4),_e=ht(Ci);ai((Ii,an)=>{$e(Mt,1,`relative flex items-center justify-center scale-[1.5] animate-bounce ${Y(zt)?"scale-[1.7] brightness-150":""} transition-all duration-75`,"svelte-1n46o8q"),be(De,`-$${Ii??""}`),be(_e,an)},[()=>(Y(Wt),Ht(()=>Math.floor(Y(Wt)))),()=>(Y(Wt),Ht(()=>(Y(Wt)%1).toFixed(2).split(".")[1]))]),_t(rt,ot)};Pe(li,rt=>{Y(jt)&&rt(ti)})}var Ue=xt(li,2);{var xe=rt=>{{let ot=hn(()=>(Y(k),Ht(()=>Y(k).passline||0)));qF(rt,{get point(){return Y(at)},get passlineAmount(){return Y(ot)},$$events:{select:$h}})}};Pe(Ue,rt=>{Y(ft)&&rt(xe)})}var Di=xt(Ue,2);{var Te=rt=>{iD(rt,{get currentPoint(){return Y(at)},get betToMove(){return Ut},$$events:{move:es,close:()=>ut(vt,!1)}})};Pe(Di,rt=>{Y(vt)&&rt(Te)})}var vn=xt(Di,2);{var os=rt=>{sD(rt,{get amount(){return Y(ct),Ht(()=>Y(ct).amount)},get betType(){return Y(ct),Ht(()=>Y(ct).betType)},get commission(){return Y(ct),Ht(()=>Y(ct).commission)},$$events:{confirm:xa,decline:Gr}})};Pe(vn,rt=>{Y(Tt)&&rt(os)})}var $i=xt(vn,2),_r=xt(ht($i),2);{var mi=rt=>{var ot=W$(),Mt=xt(ht(ot),2),mt=ht(Mt),ie=xt(Mt,2);{var kt=De=>{var Ci=_$();Ze("click",Ci,y),_t(De,Ci)};Pe(ie,De=>{Y(F),Ht(()=>Y(F).mode!=="guest")&&De(kt)})}ai(()=>be(mt,(Y(F),Ht(()=>Y(F).nickname||Y(F).username)))),_t(rt,ot)};Pe(_r,rt=>{Y(F)&&rt(mi)})}var Wn=xt(_r,2),Dn=ht(Wn),mn=ht(Dn),Mn=xt(ht(mn),2),js=ht(Mn);{var On=rt=>{var ot=H$();_t(rt,ot)},Pp=rt=>{var ot=Pi(),Mt=pi(ot);{var mt=kt=>{var De=X$();_t(kt,De)},ie=kt=>{var De=Y$();_t(kt,De)};Pe(Mt,kt=>{Y(at)?kt(mt):kt(ie,!1)},!0)}_t(rt,ot)};Pe(js,rt=>{Y(et)?rt(On):rt(Pp,!1)})}var uc=xt(js,2),bp=ht(uc),Kh=xt(Dn,2),Ip=ht(Kh);Ix(Ip,{size:16,class:"text-yellow-500 group-hover:scale-110 transition-transform"});var Ea=xt(Kh,2),Gg=ht(Ea);lS(Gg,{size:18});var _g=xt($i,2),Lp=ht(_g),mr=ht(Lp),Fp=ht(mr),jh=ht(Fp),Zh=xt(ht(jh),2);Qi(Zh,4,()=>[2,3,4,5,6],Ji,(rt,ot)=>{var Mt=k$(),mt=ht(Mt);ai(ie=>{$e(Mt,1,`w-7 h-7 rounded-full ${ie??""} text-xs flex items-center justify-center font-black transition-all duration-300 border border-emerald-400/20`,"svelte-1n46o8q"),be(mt,ot)},[()=>(Y(lt),Ht(()=>Y(lt).has(ot)?"bg-yellow-400 text-black shadow-[0_0_12px_rgba(250,204,21,0.6)]":"bg-emerald-800/60 text-emerald-400/40"))]),_t(rt,Mt)});var fc=xt(jh,2),Cl=ht(fc),mo=ht(Cl),Dp=xt(mo,2),cc=xt(fc,2),Oi=xt(ht(cc),2);Qi(Oi,4,()=>[8,9,10,11,12],Ji,(rt,ot)=>{var Mt=$$(),mt=ht(Mt);ai(ie=>{$e(Mt,1,`w-7 h-7 rounded-full ${ie??""} text-xs flex items-center justify-center font-black transition-all duration-300 border border-emerald-400/20`,"svelte-1n46o8q"),be(mt,ot)},[()=>(Y(lt),Ht(()=>Y(lt).has(ot)?"bg-yellow-400 text-black shadow-[0_0_12px_rgba(250,204,21,0.6)]":"bg-emerald-800/60 text-emerald-400/40"))]),_t(rt,Mt)});var Wg=xt(Fp,2),Op=ht(Wg);ui(Op,{id:"low_rolls",className:"flex-1 flex flex-col items-center justify-center p-0.5 hover:bg-white/5 transition-all relative overflow-hidden",get amount(){return Y(k),Ht(()=>Y(k).low_rolls)},$$events:{click:()=>Ne("low_rolls"),contextmenu:rt=>je("low_rolls",rt)},children:(rt,ot)=>{var Mt=K$();_t(rt,Mt)},$$slots:{default:!0}});var dc=xt(Op,2);ui(dc,{id:"roll_em_all",className:"flex-[1.2] flex flex-col items-center justify-center p-0.5 hover:bg-white/5 transition-all relative overflow-hidden",get amount(){return Y(k),Ht(()=>Y(k).roll_em_all)},$$events:{click:()=>Ne("roll_em_all"),contextmenu:rt=>je("roll_em_all",rt)},children:(rt,ot)=>{var Mt=j$();_t(rt,Mt)},$$slots:{default:!0}});var Np=xt(dc,2);ui(Np,{id:"high_rolls",className:"flex-1 flex flex-col items-center justify-center p-0.5 hover:bg-white/5 transition-all relative overflow-hidden",get amount(){return Y(k),Ht(()=>Y(k).high_rolls)},$$events:{click:()=>Ne("high_rolls"),contextmenu:rt=>je("high_rolls",rt)},children:(rt,ot)=>{var Mt=Z$();_t(rt,Mt)},$$slots:{default:!0}});var pc=xt(mr,2);{let rt=hn(()=>(Y(f),Ht(()=>Y(f)?Y(f).duration:3.5)));lm(aV(pc,{show:!0,get rollDuration(){return Y(rt)},$$events:{rollStart:()=>{ut(et,!0),P("roll")},rolled:ya,close:()=>{ut(V,!1),ut(et,!1)}},$$legacy:!0}),ot=>ut($,ot),()=>Y($))}var Jh=xt(pc,2),gr=xt(ht(Jh),2),vc=ht(gr),Bp=ht(vc),go=ht(Bp),Up=xt(ht(go),2),mc=ht(Up),Al=xt(go,2),Vp=xt(ht(Al),2),Qh=ht(Vp),Hg=xt(Al,2),gc=xt(ht(Hg),2),wl=ht(gc),zp=xt(Bp,2),Gp=xt(ht(zp),2),xc=ht(Gp),yc=xt(vc,2),_p=ht(yc),qh=xt(ht(_p),2),Wp=ht(qh),Tc=xt(gr,2),Sa=ht(Tc),Ec=ht(Sa);{var Hp=rt=>{var ot=J$();_t(rt,ot)},Xp=rt=>{var ot=Pi(),Mt=pi(ot);{var mt=kt=>{var De=Q$();_t(kt,De)},ie=kt=>{var De=Pi(),Ci=pi(De);{var _e=Ii=>{var an=q$();_t(Ii,an)};Pe(Ci,Ii=>{Y(bt),Ht(()=>Y(bt).includes("WIN"))&&Ii(_e)},!0)}_t(kt,De)};Pe(Mt,kt=>{Y(dt)?kt(mt):kt(ie,!1)},!0)}_t(rt,ot)};Pe(Ec,rt=>{Y(et)?rt(Hp):rt(Xp,!1)})}var Sc=xt(Ec,2),tu=ht(Sc),Nn=xt(Lp,2),Cc=ht(Nn),Ac=ht(Cc),Ca=ht(Ac),B=ht(Ca);{var K=rt=>{var ot=tK();_t(rt,ot)};Pe(B,rt=>{Y(N)==="hardways"&&rt(K)})}var J=xt(B,2),st=xt(ht(J),2),At=ht(st),Ft=xt(Ca,2),te=ht(Ft);{var Be=rt=>{var ot=eK();_t(rt,ot)};Pe(te,rt=>{Y(N)==="hops"&&rt(Be)})}var Vi=xt(te,2),gi=xt(ht(Vi),2),rn=ht(gi),Zs=xt(Ac,2),Aa=ht(Zs);{var Wr=rt=>{var ot=rK(),Mt=xt(ht(ot),2),mt=ht(Mt),ie=ht(mt);ui(ie,{id:"hard_6",type:"dice",dice:[3,3],label:"Hard 6",payout:"9:1",get hardwayCounter(){return Y(Z),Ht(()=>Y(Z)[6])},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).hard_6)},get status(){return Y(Q),Ht(()=>Y(Q).hard_6)},$$events:{click:()=>Ne("hard_6"),contextmenu:vi=>je("hard_6",vi)}});var kt=xt(ie,2);ui(kt,{id:"hard_8",type:"dice",dice:[4,4],label:"Hard 8",payout:"9:1",get hardwayCounter(){return Y(Z),Ht(()=>Y(Z)[8])},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).hard_8)},get status(){return Y(Q),Ht(()=>Y(Q).hard_8)},$$events:{click:()=>Ne("hard_8"),contextmenu:vi=>je("hard_8",vi)}});var De=xt(mt,2),Ci=ht(De);ui(Ci,{id:"hard_10",type:"dice",dice:[5,5],label:"Hard 10",payout:"7:1",get hardwayCounter(){return Y(Z),Ht(()=>Y(Z)[10])},reverse:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).hard_10)},get status(){return Y(Q),Ht(()=>Y(Q).hard_10)},$$events:{click:()=>Ne("hard_10"),contextmenu:vi=>je("hard_10",vi)}});var _e=xt(Ci,2);ui(_e,{id:"hard_4",type:"dice",dice:[2,2],label:"Hard 4",payout:"7:1",get hardwayCounter(){return Y(Z),Ht(()=>Y(Z)[4])},reverse:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).hard_4)},get status(){return Y(Q),Ht(()=>Y(Q).hard_4)},$$events:{click:()=>Ne("hard_4"),contextmenu:vi=>je("hard_4",vi)}});var Ii=xt(Mt,2),an=xt(ht(Ii),2),Hn=ht(an);ui(Hn,{id:"any_7",className:"flex-[0_0_15%] min-h-[40px] bg-[#0d2b18] border border-white/20 shadow-[inset_0_0_20px_rgba(0,0,0,0.5)] rounded-xl flex flex-row items-center justify-center px-4 relative overflow-hidden",get amount(){return Y(k),Ht(()=>Y(k).any_7)},$$events:{click:()=>Ne("any_7"),contextmenu:vi=>je("any_7",vi)},children:(vi,wc)=>{var Ml=iK();_t(vi,Ml)},$$slots:{default:!0}});var Lt=xt(Hn,2),ee=ht(Lt);ui(ee,{id:"horn_2",type:"dice",dice:[1,1],payout:"30 TO 1",className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).horn_2)},$$events:{click:()=>Ne("horn_2"),contextmenu:vi=>je("horn_2",vi)}});var Ce=xt(ee,2);ui(Ce,{id:"horn_3",type:"dice",dice:[1,2],payout:"15 TO 1",reverse:!0,className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).horn_3)},$$events:{click:()=>Ne("horn_3"),contextmenu:vi=>je("horn_3",vi)}});var Zt=xt(Ce,2);ui(Zt,{id:"horn_12",type:"dice",dice:[6,6],payout:"30 TO 1",className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).horn_12)},$$events:{click:()=>Ne("horn_12"),contextmenu:vi=>je("horn_12",vi)}});var Se=xt(Zt,2);ui(Se,{id:"horn_11",type:"dice",dice:[5,6],payout:"15 TO 1",reverse:!0,className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).horn_11)},$$events:{click:()=>Ne("horn_11"),contextmenu:vi=>je("horn_11",vi)}});var Ye=xt(Se,2),As=ht(Ye);ui(As,{id:"horn_bet",className:"bg-[#1a4d2e] border border-white/30 px-3 py-0.5 rounded-lg shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] pointer-events-auto",get amount(){return Y(k),Ht(()=>Y(k).horn_bet)},$$events:{click:()=>Ne("horn_bet"),contextmenu:vi=>je("horn_bet",vi)},children:(vi,wc)=>{var Ml=nK();_t(vi,Ml)},$$slots:{default:!0}});var is=xt(Lt,2),xr=ht(is);ui(xr,{id:"any_craps",className:"flex-1 bg-[#0d2b18] border border-white/20 shadow-[inset_0_0_20px_rgba(0,0,0,0.5)] rounded-xl flex flex-row items-center justify-center px-4 relative overflow-hidden",get amount(){return Y(k),Ht(()=>Y(k).any_craps)},$$events:{click:()=>Ne("any_craps"),contextmenu:vi=>je("any_craps",vi)},children:(vi,wc)=>{var Ml=sK();_t(vi,Ml)},$$slots:{default:!0}}),_t(rt,ot)},Hr=rt=>{var ot=aK(),Mt=ht(ot),mt=xt(ht(Mt),2),ie=ht(mt);ui(ie,{id:"hop_2_2",type:"dice",dice:[2,2],label:"2-2",className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).hop_2_2)},$$events:{click:()=>Ne("hop_2_2"),contextmenu:()=>je("hop_2_2")}});var kt=xt(ie,2);ui(kt,{id:"hop_4_4",type:"dice",dice:[4,4],label:"4-4",reverse:!0,className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).hop_4_4)},$$events:{click:()=>Ne("hop_4_4"),contextmenu:()=>je("hop_4_4")}});var De=xt(kt,2);ui(De,{id:"hop_3_3",type:"dice",dice:[3,3],label:"3-3",className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).hop_3_3)},$$events:{click:()=>Ne("hop_3_3"),contextmenu:()=>je("hop_3_3")}});var Ci=xt(De,2);ui(Ci,{id:"hop_5_5",type:"dice",dice:[5,5],label:"5-5",reverse:!0,className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Ht(()=>Y(k).hop_5_5)},$$events:{click:()=>Ne("hop_5_5"),contextmenu:()=>je("hop_5_5")}});var _e=xt(Mt,2),Ii=xt(ht(_e),2),an=ht(Ii);Qi(an,4,()=>[[1,3,"1-3"],[1,4,"1-4"],[2,3,"2-3"],[2,4,"2-4"],[1,5,"1-5"]],Ji,(ee,Ce)=>{var Zt=Kc(()=>$c(Ce,3));let Se=()=>Y(Zt)[0],Ye=()=>Y(Zt)[1],As=()=>Y(Zt)[2];{let is=hn(()=>`hop_${Se()}_${Ye()}`),xr=hn(()=>[Se(),Ye()]);ui(ee,{get id(){return Y(is)},type:"dice",get dice(){return Y(xr)},get label(){return As()},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Se(),Ye(),Ht(()=>Y(k)[`hop_${Se()}_${Ye()}`])},$$events:{click:()=>Ne(`hop_${Se()}_${Ye()}`),contextmenu:()=>je(`hop_${Se()}_${Ye()}`)}})}});var Hn=xt(an,2);Qi(Hn,4,()=>[[1,6,"1-6"],[2,5,"2-5"],[3,4,"3-4"]],Ji,(ee,Ce)=>{var Zt=Kc(()=>$c(Ce,3));let Se=()=>Y(Zt)[0],Ye=()=>Y(Zt)[1],As=()=>Y(Zt)[2];{let is=hn(()=>`hop_${Se()}_${Ye()}`),xr=hn(()=>[Se(),Ye()]);ui(ee,{get id(){return Y(is)},type:"dice",get dice(){return Y(xr)},get label(){return As()},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors flex-col gap-0 px-0",get amount(){return Y(k),Se(),Ye(),Ht(()=>Y(k)[`hop_${Se()}_${Ye()}`])},$$events:{click:()=>Ne(`hop_${Se()}_${Ye()}`),contextmenu:()=>je(`hop_${Se()}_${Ye()}`)}})}});var Lt=xt(Hn,2);Qi(Lt,4,()=>[[2,6,"2-6"],[3,5,"3-5"],[3,6,"3-6"],[4,5,"4-5"],[4,6,"4-6"]],Ji,(ee,Ce)=>{var Zt=Kc(()=>$c(Ce,3));let Se=()=>Y(Zt)[0],Ye=()=>Y(Zt)[1],As=()=>Y(Zt)[2];{let is=hn(()=>`hop_${Se()}_${Ye()}`),xr=hn(()=>[Se(),Ye()]);ui(ee,{get id(){return Y(is)},type:"dice",get dice(){return Y(xr)},get label(){return As()},reverse:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),Se(),Ye(),Ht(()=>Y(k)[`hop_${Se()}_${Ye()}`])},$$events:{click:()=>Ne(`hop_${Se()}_${Ye()}`),contextmenu:()=>je(`hop_${Se()}_${Ye()}`)}})}}),_t(rt,ot)};Pe(Aa,rt=>{Y(N)==="hardways"?rt(Wr):rt(Hr,!1)})}var eu=xt(Cc,2),iu=ht(eu),wE=ht(iu);{var _3=rt=>{var ot=lK(),Mt=ht(ot);Qi(Mt,4,()=>[1,2,3],Ji,(mt,ie)=>{var kt=oK();_t(mt,kt)}),_t(rt,ot)};Pe(wE,rt=>{Y(q)&&rt(_3)})}var W3=xt(wE,2);Qi(W3,1,()=>po,Ji,(rt,ot)=>{var Mt=dK(),mt=ht(Mt);{var ie=Zt=>{var Se=hK();_t(Zt,Se)};Pe(mt,Zt=>{Y(at)===Y(ot)&&Zt(ie)})}var kt=xt(mt,2),De=ht(kt);{var Ci=Zt=>{var Se=uK();_t(Zt,Se)},_e=Zt=>{var Se=Pi(),Ye=pi(Se);{var As=is=>{var xr=fK();_t(is,xr)};Pe(Ye,is=>{Y(at)===null&&Y(ot)===4&&is(As)},!0)}_t(Zt,Se)};Pe(De,Zt=>{Y(at)===Y(ot)?Zt(Ci):Zt(_e,!1)})}var Ii=xt(kt,2);{let Zt=hn(()=>`buy_${Y(ot)}`);ui(Ii,{get id(){return Y(Zt)},label:"BUY",betType:"BUY",className:"h-[16%] bg-emerald-700/50 border-2 border-emerald-400/50 rounded-xl shadow-[0_0_15px_rgba(0,0,0,0.4),inset_0_0_10px_rgba(0,0,0,0.3)]",labelClassName:"leading-none text-xs",get amount(){return Y(k),Y(ot),Ht(()=>Y(k)[`buy_${Y(ot)}`])},get status(){return Y(Q),Y(ot),Ht(()=>Y(Q)[`buy_${Y(ot)}`])},$$events:{click:()=>Ne(`buy_${Y(ot)}`),contextmenu:Se=>je(`buy_${Y(ot)}`,Se)}})}var an=xt(Ii,2);{let Zt=hn(()=>`place_${Y(ot)}`),Se=hn(()=>Y(ot)===6?"SIX":Y(ot)===9?"NINE":Y(ot));ui(an,{get id(){return Y(Zt)},get label(){return Y(Se)},type:"number",hideChips:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 rounded-xl shadow-[0_0_20px_rgba(0,0,0,0.5),inset_0_0_15px_rgba(0,0,0,0.4)]",get amount(){return Y(k),Y(ot),Ht(()=>Y(k)[`place_${Y(ot)}`])},get status(){return Y(Q),Y(ot),Ht(()=>Y(Q)[`place_${Y(ot)}`])},$$events:{click:()=>Ne(`place_${Y(ot)}`),contextmenu:Ye=>je(`place_${Y(ot)}`,Ye)}})}var Hn=xt(an,2),Lt=ht(Hn);{let Zt=hn(()=>`place_label_${Y(ot)}`);ui(Lt,{get id(){return Y(Zt)},label:"PLACE",betType:"PLACE",className:"flex-1 bg-emerald-700/50 border-2 border-emerald-400/50 rounded-xl shadow-[0_0_15px_rgba(0,0,0,0.4),inset_0_0_10px_rgba(0,0,0,0.3)]",labelClassName:"leading-none text-xs",get amount(){return Y(k),Y(ot),Ht(()=>Y(k)[`place_${Y(ot)}`])},get status(){return Y(Q),Y(ot),Ht(()=>Y(Q)[`place_${Y(ot)}`])},$$events:{click:()=>Ne(`place_${Y(ot)}`),contextmenu:Se=>je(`place_${Y(ot)}`,Se)}})}var ee=xt(Lt,2);{var Ce=Zt=>{var Se=cK(),Ye=ht(Se);Lx(Ye,{get value(){return Y(k),Y(ot),Ht(()=>Y(k)[`come_${Y(ot)}`])},size:"w-10 h-10",fontSize:"text-[8px]",betType:"COME"}),_t(Zt,Se)};Pe(ee,Zt=>{Y(k),Y(ot),Ht(()=>Y(k)[`come_${Y(ot)}`])&&Zt(Ce)})}_t(rt,Mt)});var H3=xt(iu,2),ME=ht(H3),Yp=ht(ME),X3=ht(Yp),RE=xt(Yp,2),PE=ht(RE);{var Y3=rt=>{var ot=pK();_t(rt,ot)};Pe(PE,rt=>{Y(S)&&rt(Y3)})}var bE=xt(PE,2),IE=xt(RE,2),LE=ht(IE);{var k3=rt=>{var ot=vK();_t(rt,ot)};Pe(LE,rt=>{Y(S)&&rt(k3)})}var FE=xt(LE,2),$3=xt(IE,2),DE=ht($3);ui(DE,{id:"bet_c",label:"C",className:"w-12 h-12 rounded-full border-2 border-emerald-400/50 bg-[#1a4d2e] shadow-[0_4px_10px_rgba(0,0,0,0.5),inset_0_0_10px_rgba(0,0,0,0.3)] active:translate-y-0.5 active:shadow-inner transition-all",get amount(){return Y(k),Ht(()=>Y(k).bet_c)},$$events:{click:()=>Ne("bet_c"),contextmenu:()=>je("bet_c")}});var OE=xt(DE,2);ui(OE,{id:"bet_ce",label:"C&E",className:"w-14 h-14 rounded-full border-2 border-emerald-400/50 bg-[#1a4d2e] shadow-[0_4px_10px_rgba(0,0,0,0.5),inset_0_0_10px_rgba(0,0,0,0.3)] active:translate-y-0.5 active:shadow-inner transition-all",get amount(){return Y(k),Ht(()=>Y(k).bet_ce)},$$events:{click:()=>Ne("bet_ce"),contextmenu:()=>je("bet_ce")}});var K3=xt(OE,2);ui(K3,{id:"bet_e",label:"E",className:"w-12 h-12 rounded-full border-2 border-emerald-400/50 bg-[#1a4d2e] shadow-[0_4px_10px_rgba(0,0,0,0.5),inset_0_0_10px_rgba(0,0,0,0.3)] active:translate-y-0.5 active:shadow-inner transition-all",get amount(){return Y(k),Ht(()=>Y(k).bet_e)},$$events:{click:()=>Ne("bet_e"),contextmenu:()=>je("bet_e")}});var j3=xt(ME,2),NE=ht(j3);ui(NE,{id:"come",className:"h-[30%] bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-center",get amount(){return Y(k),Ht(()=>Y(k).come)},$$events:{click:()=>Ne("come"),contextmenu:rt=>je("come",rt)},children:(rt,ot)=>{var Mt=mK();_t(rt,Mt)},$$slots:{default:!0}});var BE=xt(NE,2);ui(BE,{id:"field",className:"h-[42%] bg-[#1a4d2e]/60 rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)]",get amount(){return Y(k),Ht(()=>Y(k).field)},$$events:{click:()=>Ne("field"),contextmenu:rt=>je("field",rt)},children:(rt,ot)=>{var Mt=gK();_t(rt,Mt)},$$slots:{default:!0}});var Z3=xt(BE,2),UE=ht(Z3);ui(UE,{id:"take_odds",betType:"ODDS",className:"w-[25%] bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-center px-2",get amount(){return Y(k),Ht(()=>Y(k).take_odds)},$$events:{click:()=>Ne("take_odds"),contextmenu:rt=>je("take_odds",rt)},children:(rt,ot)=>{var Mt=xK();_t(rt,Mt)},$$slots:{default:!0}});var J3=xt(UE,2);{let rt=hn(()=>Y(at)!==null);ui(J3,{id:"passline",betType:"PASS",get isLocked(){return Y(rt)},className:"flex-1 bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-center",get amount(){return Y(k),Ht(()=>Y(k).passline)},$$events:{click:()=>Ne("passline"),contextmenu:ot=>je("passline",ot)},children:(ot,Mt)=>{var mt=yK();_t(ot,mt)},$$slots:{default:!0}})}var Q3=xt(Nn,2),VE=ht(Q3);Qi(VE,5,()=>Y(it),Ji,(rt,ot,Mt)=>{var mt=Kc(()=>$c(Y(ot).dice,2));let ie=()=>Y(mt)[0],kt=()=>Y(mt)[1],De=()=>Y(ot).total,Ci=()=>Y(ot).establishesPoint;var _e=SK();$e(_e,1,`flex items-center gap-1.5 ${Mt===0?"opacity-100":"opacity-40"}`,"svelte-1n46o8q");var Ii=ht(_e),an=ht(Ii),Hn=xt(Ii,2);Qi(Hn,5,()=>[ie(),kt()],Ji,(Lt,ee)=>{var Ce=EK();Qi(Ce,5,()=>(Y(ee),Ht(()=>gt[Y(ee)])),Ji,(Zt,Se)=>{var Ye=TK();ai(As=>Md(Ye,`left: ${Y(Se)%3*25+16}%; top: ${As??""}%`),[()=>(Y(Se),Ht(()=>Math.floor(Y(Se)/3)*25+16))]),_t(Zt,Ye)}),_t(Lt,Ce)}),ai(()=>{$e(Ii,1,`w-6 h-6 rounded flex items-center justify-center text-[10px] font-black border
                      ${De()===7?"bg-red-600 border-red-500 text-white":Ci()?"bg-blue-600 border-blue-500 text-white":"bg-emerald-500/20 border-emerald-500/30 text-emerald-400"}`,"svelte-1n46o8q"),be(an,De())}),_t(rt,_e)});var q3=xt(VE,2),zE=ht(q3),GE=ht(zE),t4=ht(GE),e4=ht(t4);hd(e4,{size:12,color:"white"});var _E=xt(zE,2);Qi(_E,4,()=>[1,2,3,5,10,25,50,100],Ji,(rt,ot)=>{var Mt=CK(),mt=ht(Mt);{let ie=hn(()=>Y(G)===ot);Lx(mt,{get value(){return ot},get selected(){return Y(ie)}})}Ze("click",Mt,()=>{ut(G,ot),P("select")}),_t(rt,Mt)});var i4=xt(_E,2),WE=xt(ht(i4),2),n4=ht(WE),s4=ht(n4);hd(s4,{size:10,color:"#27272a"});var Xg=xt(WE,2),r4=ht(Xg);ai((rt,ot,Mt,mt,ie,kt,De,Ci,_e)=>{$e(uc,1,`text-xs font-black ${Y(et)?"text-yellow-400":Y(at)?"text-emerald-400":"text-white/60"} tracking-tight uppercase`,"svelte-1n46o8q"),be(bp,Y(et)?"DICE ROLLING":Y(at)?`POINT IS ${Y(at)}`:"COME OUT ROLL"),$e(mo,1,`w-16 h-16 drop-shadow-[0_10px_15px_rgba(0,0,0,0.5)] rotate-[15deg] ${Y(et)?"animate-bounce":"opacity-90"} brightness-110 contrast-110`,"svelte-1n46o8q"),$e(Dp,1,`w-16 h-16 drop-shadow-[0_10px_15px_rgba(0,0,0,0.5)] -rotate-[15deg] ${Y(et)?"animate-bounce [animation-delay:0.1s]":"opacity-90"} brightness-110 contrast-110`,"svelte-1n46o8q"),be(mc,`$${rt??""}`),be(Qh,`$${ot??""}`),$e(gc,1,`text-sm font-black ${Y(ce)>=0?"text-emerald-400":"text-red-400"} leading-tight tabular-nums`,"svelte-1n46o8q"),be(wl,`${Y(ce)>=0?"+":""}$${Mt??""}`),be(xc,`$${mt??""}`),be(Wp,`$${ie??""}`),$e(Tc,1,`w-full bg-black/40 rounded-xl border border-white/10 shadow-[inset_0_2px_8px_rgba(0,0,0,0.5)] px-4 py-1.5 relative z-10 flex items-center justify-center min-h-[36px] transition-all duration-300
          ${kt??""}`,"svelte-1n46o8q"),$e(Sc,1,`text-[11px] font-black uppercase tracking-widest text-center
              ${De??""}`,"svelte-1n46o8q"),be(tu,Y(et)?"DICE ARE IN THE AIR...":Y(dt)?Y(Jt):Y(bt)||Y(yt)),$e(Nn,1,`flex-1 flex gap-2 min-h-0 ${Y(et)?"pointer-events-none opacity-80":""} transition-all duration-300`,"svelte-1n46o8q"),$e(J,1,`relative w-full h-full flex items-center justify-between px-3 py-1.5 rounded-t-xl transition-all border-b-2 z-10
              bg-gradient-to-b from-zinc-100 to-zinc-300 border-white/20 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)]
              ${Y(N)==="hardways"?"ring-1 ring-[#9eff00]/50":"opacity-80"}`,"svelte-1n46o8q"),be(At,`$${Ci??""}`),$e(Vi,1,`relative w-full h-full flex items-center justify-between px-3 py-1.5 rounded-t-xl transition-all border-b-2 z-10
              bg-gradient-to-b from-zinc-100 to-zinc-300 border-white/20 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)]
              ${Y(N)==="hops"?"ring-1 ring-[#9eff00]/50":"opacity-80"}`,"svelte-1n46o8q"),be(rn,`$${_e??""}`),$e(Yp,1,`h-[16%] ${Y(q)?"bg-red-600 text-white":"bg-gradient-to-b from-zinc-100 to-zinc-300 text-zinc-800"} rounded-xl border-b-2 border-white/20 transition-all active:translate-y-1 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] text-[9px] font-black uppercase`,"svelte-1n46o8q"),be(X3,Y(q)?"Off":"Bets Off"),$e(bE,1,`relative w-full h-full bg-gradient-to-b from-zinc-100 to-zinc-300 text-zinc-800 rounded-xl border-b-2 border-white/20 transition-all active:translate-y-1 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] z-10 text-[9px] font-black uppercase
                       ${Y(S)?"ring-1 ring-[#9eff00]/50":"opacity-60 cursor-not-allowed"}`,"svelte-1n46o8q"),$e(FE,1,`relative w-full h-full bg-gradient-to-b from-zinc-100 to-zinc-300 text-zinc-800 rounded-xl border-b-2 border-white/20 transition-all active:translate-y-1 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] z-10 text-[9px] font-black uppercase
                       ${Y(S)?"ring-1 ring-[#9eff00]/50":"opacity-60 cursor-not-allowed"}`,"svelte-1n46o8q"),Xg.disabled=Y(et)||!Y(T),be(r4,Y(et)?"Rolling":"Roll")},[()=>(Y(Kt),Ht(()=>Y(Kt).toFixed(2))),()=>(Y(ge),Ht(()=>Y(ge).toFixed(2))),()=>(Y(ce),Ht(()=>Math.abs(Y(ce)).toFixed(2))),()=>(Y(U),Ht(()=>Y(U).toFixed(2))),()=>(Y(e),Ht(()=>Y(e).toFixed(2))),()=>(Y(et),Y(dt),Y(bt),Ht(()=>Y(et)?"bg-yellow-500/10 border-yellow-500/30":Y(dt)?"bg-red-500/20 border-red-500/40":Y(bt).includes("WIN")?"bg-emerald-500/10 border-emerald-500/30":"")),()=>(Y(et),Y(dt),Y(bt),Ht(()=>Y(et)||Y(dt)?"text-yellow-400":Y(bt).includes("WIN")?"text-emerald-400":"text-white/70")),()=>Ht(()=>(j("hard_")+j("any_")+j("horn_")+j("bet_")).toFixed(2)),()=>Ht(()=>j("hop_").toFixed(2))]),Ze("click",Kh,()=>ut(z,!0)),Ze("click",Ea,()=>ut(O,!0)),Ze("click",J,()=>ut(N,"hardways")),Ze("click",Vi,()=>ut(N,"hops")),Ze("click",Yp,()=>ut(q,!Y(q))),Ze("click",bE,Mi),Ze("click",FE,Xe),Ze("click",GE,nt),Ze("click",Xg,Ta),_t(d,Rt),$s()}FL(wK,{target:document.getElementById("app")});
