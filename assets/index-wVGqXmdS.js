var PP=Object.defineProperty;var R1=v=>{throw TypeError(v)};var bP=(v,t,i)=>t in v?PP(v,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):v[t]=i;var Lr=(v,t,i)=>bP(v,typeof t!="symbol"?t+"":t,i),nm=(v,t,i)=>t.has(v)||R1("Cannot "+i);var Ot=(v,t,i)=>(nm(v,t,"read from private field"),i?i.call(v):t.get(v)),_e=(v,t,i)=>t.has(v)?R1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(v):t.set(v,i),Ge=(v,t,i,f)=>(nm(v,t,"write to private field"),f?f.call(v,i):t.set(v,i),i),zn=(v,t,i)=>(nm(v,t,"access private method"),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))f(y);new MutationObserver(y=>{for(const C of y)if(C.type==="childList")for(const o of C.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function i(y){const C={};return y.integrity&&(C.integrity=y.integrity),y.referrerPolicy&&(C.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?C.credentials="include":y.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function f(y){if(y.ep)return;y.ep=!0;const C=i(y);fetch(y.href,C)}})();const x0=!1;var gv=Array.isArray,IP=Array.prototype.indexOf,xu=Array.prototype.includes,xv=Array.from,LP=Object.defineProperty,Da=Object.getOwnPropertyDescriptor,v2=Object.getOwnPropertyDescriptors,FP=Object.prototype,DP=Array.prototype,vx=Object.getPrototypeOf,P1=Object.isExtensible;function Af(v){return typeof v=="function"}function OP(v){return v()}function y0(v){for(var t=0;t<v.length;t++)v[t]()}function m2(){var v,t,i=new Promise((f,y)=>{v=f,t=y});return{promise:i,resolve:v,reject:t}}function Gf(v,t){if(Array.isArray(v))return v;if(t===void 0||!(Symbol.iterator in v))return Array.from(v);const i=[];for(const f of v)if(i.push(f),i.length===t)break;return i}const On=2,Fp=4,Vc=8,mx=1<<24,ja=16,Ar=32,eh=64,gx=128,Zs=512,dn=1024,Nn=2048,qs=4096,Rs=8192,Oa=16384,xx=32768,Xl=65536,b1=1<<17,g2=1<<18,Yu=1<<19,x2=1<<20,Pa=1<<25,Yl=32768,T0=1<<21,yx=1<<22,Mo=1<<23,Yr=Symbol("$state"),y2=Symbol("legacy props"),NP=Symbol(""),$h=new class extends Error{constructor(){super(...arguments);Lr(this,"name","StaleReactionError");Lr(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Tx(v){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function BP(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function UP(v,t,i){throw new Error("https://svelte.dev/e/each_key_duplicate")}function VP(v){throw new Error("https://svelte.dev/e/effect_in_teardown")}function zP(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function GP(v){throw new Error("https://svelte.dev/e/effect_orphan")}function WP(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function HP(v){throw new Error("https://svelte.dev/e/props_invalid_value")}function _P(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function XP(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function YP(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function kP(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const $P=1,KP=2,T2=4,jP=8,ZP=16,JP=1,QP=2,E2=4,qP=8,tb=16,eb=1,ib=2,En=Symbol(),nb="http://www.w3.org/1999/xhtml",sb="http://www.w3.org/2000/svg",rb="@attach";function ab(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function ob(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function S2(v){return v===this.v}function lb(v,t){return v!=v?t==t:v!==t||v!==null&&typeof v=="object"||typeof v=="function"}function C2(v){return!lb(v,this.v)}let ku=!1,hb=!1;function ub(){ku=!0}let Pi=null;function yu(v){Pi=v}function Ds(v,t=!1,i){Pi={p:Pi,i:!1,c:null,e:null,s:v,x:null,l:ku&&!t?{s:null,u:null,$:[]}:null}}function Os(v){var t=Pi,i=t.e;if(i!==null){t.e=null;for(var f of i)_2(f)}return v!==void 0&&(t.x=v),t.i=!0,Pi=t.p,v??{}}function zc(){return!ku||Pi!==null&&Pi.l===null}let El=[];function A2(){var v=El;El=[],y0(v)}function kr(v){if(El.length===0&&!tc){var t=El;queueMicrotask(()=>{t===El&&A2()})}El.push(v)}function fb(){for(;El.length>0;)A2()}function w2(v){var t=ri;if(t===null)return Ke.f|=Mo,v;if((t.f&xx)===0){if((t.f&gx)===0)throw v;t.b.error(v)}else Tu(v,t)}function Tu(v,t){for(;t!==null;){if((t.f&gx)!==0)try{t.b.error(v);return}catch(i){v=i}t=t.parent}throw v}const cb=-7169;function Hi(v,t){v.f=v.f&cb|t}function Ex(v){(v.f&Zs)!==0||v.deps===null?Hi(v,dn):Hi(v,qs)}function M2(v){if(v!==null)for(const t of v)(t.f&On)===0||(t.f&Yl)===0||(t.f^=Yl,M2(t.deps))}function R2(v,t,i){(v.f&Nn)!==0?t.add(v):(v.f&qs)!==0&&i.add(v),M2(v.deps),Hi(v,dn)}const Md=new Set;let Ye=null,E0=null,In=null,ss=[],yv=null,S0=!1,tc=!1;var fu,cu,Pl,du,Oc,Nc,bl,Aa,pu,na,C0,A0,P2;const o1=class o1{constructor(){_e(this,na);Lr(this,"committed",!1);Lr(this,"current",new Map);Lr(this,"previous",new Map);_e(this,fu,new Set);_e(this,cu,new Set);_e(this,Pl,0);_e(this,du,0);_e(this,Oc,null);_e(this,Nc,new Set);_e(this,bl,new Set);_e(this,Aa,new Map);Lr(this,"is_fork",!1);_e(this,pu,!1)}is_deferred(){return this.is_fork||Ot(this,du)>0}skip_effect(t){Ot(this,Aa).has(t)||Ot(this,Aa).set(t,{d:[],m:[]})}unskip_effect(t){var i=Ot(this,Aa).get(t);if(i){Ot(this,Aa).delete(t);for(var f of i.d)Hi(f,Nn),dr(f);for(f of i.m)Hi(f,qs),dr(f)}}process(t){var y;ss=[],this.apply();var i=[],f=[];for(const C of t)zn(this,na,C0).call(this,C,i,f);if(this.is_deferred()){zn(this,na,A0).call(this,f),zn(this,na,A0).call(this,i);for(const[C,o]of Ot(this,Aa))F2(C,o)}else{for(const C of Ot(this,fu))C();Ot(this,fu).clear(),Ot(this,Pl)===0&&zn(this,na,P2).call(this),E0=this,Ye=null,I1(f),I1(i),E0=null,(y=Ot(this,Oc))==null||y.resolve()}In=null}capture(t,i){i!==En&&!this.previous.has(t)&&this.previous.set(t,i),(t.f&Mo)===0&&(this.current.set(t,t.v),In==null||In.set(t,t.v))}activate(){Ye=this,this.apply()}deactivate(){Ye===this&&(Ye=null,In=null)}flush(){if(this.activate(),ss.length>0){if(b2(),Ye!==null&&Ye!==this)return}else Ot(this,Pl)===0&&this.process([]);this.deactivate()}discard(){for(const t of Ot(this,cu))t(this);Ot(this,cu).clear()}increment(t){Ge(this,Pl,Ot(this,Pl)+1),t&&Ge(this,du,Ot(this,du)+1)}decrement(t){Ge(this,Pl,Ot(this,Pl)-1),t&&Ge(this,du,Ot(this,du)-1),!Ot(this,pu)&&(Ge(this,pu,!0),kr(()=>{Ge(this,pu,!1),this.is_deferred()?ss.length>0&&this.flush():this.revive()}))}revive(){for(const t of Ot(this,Nc))Ot(this,bl).delete(t),Hi(t,Nn),dr(t);for(const t of Ot(this,bl))Hi(t,qs),dr(t);this.flush()}oncommit(t){Ot(this,fu).add(t)}ondiscard(t){Ot(this,cu).add(t)}settled(){return(Ot(this,Oc)??Ge(this,Oc,m2())).promise}static ensure(){if(Ye===null){const t=Ye=new o1;Md.add(Ye),tc||kr(()=>{Ye===t&&t.flush()})}return Ye}apply(){}};fu=new WeakMap,cu=new WeakMap,Pl=new WeakMap,du=new WeakMap,Oc=new WeakMap,Nc=new WeakMap,bl=new WeakMap,Aa=new WeakMap,pu=new WeakMap,na=new WeakSet,C0=function(t,i,f){t.f^=dn;for(var y=t.first,C=null;y!==null;){var o=y.f,E=(o&(Ar|eh))!==0,e=E&&(o&dn)!==0,a=e||(o&Rs)!==0||Ot(this,Aa).has(y);if(!a&&y.fn!==null){E?y.f^=dn:C!==null&&(o&(Fp|Vc|mx))!==0?C.b.defer_effect(y):(o&Fp)!==0?i.push(y):$u(y)&&((o&ja)!==0&&Ot(this,bl).add(y),Cu(y));var x=y.first;if(x!==null){y=x;continue}}var u=y.parent;for(y=y.next;y===null&&u!==null;)u===C&&(C=null),y=u.next,u=u.parent}},A0=function(t){for(var i=0;i<t.length;i+=1)R2(t[i],Ot(this,Nc),Ot(this,bl))},P2=function(){var y;if(Md.size>1){this.previous.clear();var t=In,i=!0;for(const C of Md){if(C===this){i=!1;continue}const o=[];for(const[e,a]of this.current){if(C.current.has(e))if(i&&a!==C.current.get(e))C.current.set(e,a);else continue;o.push(e)}if(o.length===0)continue;const E=[...C.current.keys()].filter(e=>!this.current.has(e));if(E.length>0){var f=ss;ss=[];const e=new Set,a=new Map;for(const x of o)I2(x,E,e,a);if(ss.length>0){Ye=C,C.apply();for(const x of ss)zn(y=C,na,C0).call(y,x,[],[]);C.deactivate()}ss=f}}Ye=null,In=t}this.committed=!0,Md.delete(this)};let Ro=o1;function db(v){var t=tc;tc=!0;try{for(var i;;){if(fb(),ss.length===0&&(Ye==null||Ye.flush(),ss.length===0))return yv=null,i;b2()}}finally{tc=t}}function b2(){S0=!0;var v=null;try{for(var t=0;ss.length>0;){var i=Ro.ensure();if(t++>1e3){var f,y;pb()}i.process(ss),Po.clear()}}finally{ss=[],S0=!1,yv=null}}function pb(){try{WP()}catch(v){Tu(v,yv)}}let ur=null;function I1(v){var t=v.length;if(t!==0){for(var i=0;i<t;){var f=v[i++];if((f.f&(Oa|Rs))===0&&$u(f)&&(ur=new Set,Cu(f),f.deps===null&&f.first===null&&f.nodes===null&&(f.teardown===null&&f.ac===null?$2(f):f.fn=null),(ur==null?void 0:ur.size)>0)){Po.clear();for(const y of ur){if((y.f&(Oa|Rs))!==0)continue;const C=[y];let o=y.parent;for(;o!==null;)ur.has(o)&&(ur.delete(o),C.push(o)),o=o.parent;for(let E=C.length-1;E>=0;E--){const e=C[E];(e.f&(Oa|Rs))===0&&Cu(e)}}ur.clear()}}ur=null}}function I2(v,t,i,f){if(!i.has(v)&&(i.add(v),v.reactions!==null))for(const y of v.reactions){const C=y.f;(C&On)!==0?I2(y,t,i,f):(C&(yx|ja))!==0&&(C&Nn)===0&&L2(y,t,f)&&(Hi(y,Nn),dr(y))}}function L2(v,t,i){const f=i.get(v);if(f!==void 0)return f;if(v.deps!==null)for(const y of v.deps){if(xu.call(t,y))return!0;if((y.f&On)!==0&&L2(y,t,i))return i.set(y,!0),!0}return i.set(v,!1),!1}function dr(v){for(var t=yv=v;t.parent!==null;){t=t.parent;var i=t.f;if(S0&&t===ri&&(i&ja)!==0&&(i&g2)===0)return;if((i&(eh|Ar))!==0){if((i&dn)===0)return;t.f^=dn}}ss.push(t)}function F2(v,t){if(!((v.f&Ar)!==0&&(v.f&dn)!==0)){(v.f&Nn)!==0?t.d.push(v):(v.f&qs)!==0&&t.m.push(v),Hi(v,dn);for(var i=v.first;i!==null;)F2(i,t),i=i.next}}function vb(v){let t=0,i=Uo(0),f;return()=>{Cx()&&(Y(i),_c(()=>(t===0&&(f=_t(()=>v(()=>ec(i)))),t+=1,()=>{kr(()=>{t-=1,t===0&&(f==null||f(),f=void 0,ec(i))})})))}}var mb=Xl|Yu|gx;function gb(v,t,i){new xb(v,t,i)}var Hs,px,Ur,Il,Vr,_s,ns,zr,wa,To,Ll,Eo,vu,Fl,mu,gu,Ma,vv,Cn,yb,Tb,w0,lp,hp,M0;class xb{constructor(t,i,f){_e(this,Cn);Lr(this,"parent");Lr(this,"is_pending",!1);_e(this,Hs);_e(this,px,null);_e(this,Ur);_e(this,Il);_e(this,Vr);_e(this,_s,null);_e(this,ns,null);_e(this,zr,null);_e(this,wa,null);_e(this,To,null);_e(this,Ll,0);_e(this,Eo,0);_e(this,vu,!1);_e(this,Fl,!1);_e(this,mu,new Set);_e(this,gu,new Set);_e(this,Ma,null);_e(this,vv,vb(()=>(Ge(this,Ma,Uo(Ot(this,Ll))),()=>{Ge(this,Ma,null)})));Ge(this,Hs,t),Ge(this,Ur,i),Ge(this,Il,f),this.parent=ri.b,this.is_pending=!!Ot(this,Ur).pending,Ge(this,Vr,Ev(()=>{ri.b=this;{var y=zn(this,Cn,w0).call(this);try{Ge(this,_s,ls(()=>f(y)))}catch(C){this.error(C)}Ot(this,Eo)>0?zn(this,Cn,hp).call(this):this.is_pending=!1}return()=>{var C;(C=Ot(this,To))==null||C.remove()}},mb))}defer_effect(t){R2(t,Ot(this,mu),Ot(this,gu))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!Ot(this,Ur).pending}update_pending_count(t){zn(this,Cn,M0).call(this,t),Ge(this,Ll,Ot(this,Ll)+t),!(!Ot(this,Ma)||Ot(this,vu))&&(Ge(this,vu,!0),kr(()=>{Ge(this,vu,!1),Ot(this,Ma)&&Eu(Ot(this,Ma),Ot(this,Ll))}))}get_effect_pending(){return Ot(this,vv).call(this),Y(Ot(this,Ma))}error(t){var i=Ot(this,Ur).onerror;let f=Ot(this,Ur).failed;if(Ot(this,Fl)||!i&&!f)throw t;Ot(this,_s)&&(Fn(Ot(this,_s)),Ge(this,_s,null)),Ot(this,ns)&&(Fn(Ot(this,ns)),Ge(this,ns,null)),Ot(this,zr)&&(Fn(Ot(this,zr)),Ge(this,zr,null));var y=!1,C=!1;const o=()=>{if(y){ob();return}y=!0,C&&kP(),Ro.ensure(),Ge(this,Ll,0),Ot(this,zr)!==null&&Ol(Ot(this,zr),()=>{Ge(this,zr,null)}),this.is_pending=this.has_pending_snippet(),Ge(this,_s,zn(this,Cn,lp).call(this,()=>(Ge(this,Fl,!1),ls(()=>Ot(this,Il).call(this,Ot(this,Hs)))))),Ot(this,Eo)>0?zn(this,Cn,hp).call(this):this.is_pending=!1};kr(()=>{try{C=!0,i==null||i(t,o),C=!1}catch(E){Tu(E,Ot(this,Vr)&&Ot(this,Vr).parent)}f&&Ge(this,zr,zn(this,Cn,lp).call(this,()=>{Ro.ensure(),Ge(this,Fl,!0);try{return ls(()=>{f(Ot(this,Hs),()=>t,()=>o)})}catch(E){return Tu(E,Ot(this,Vr).parent),null}finally{Ge(this,Fl,!1)}}))})}}Hs=new WeakMap,px=new WeakMap,Ur=new WeakMap,Il=new WeakMap,Vr=new WeakMap,_s=new WeakMap,ns=new WeakMap,zr=new WeakMap,wa=new WeakMap,To=new WeakMap,Ll=new WeakMap,Eo=new WeakMap,vu=new WeakMap,Fl=new WeakMap,mu=new WeakMap,gu=new WeakMap,Ma=new WeakMap,vv=new WeakMap,Cn=new WeakSet,yb=function(){try{Ge(this,_s,ls(()=>Ot(this,Il).call(this,Ot(this,Hs))))}catch(t){this.error(t)}},Tb=function(){const t=Ot(this,Ur).pending;t&&(Ge(this,ns,ls(()=>t(Ot(this,Hs)))),kr(()=>{var i=zn(this,Cn,w0).call(this);Ge(this,_s,zn(this,Cn,lp).call(this,()=>(Ro.ensure(),ls(()=>Ot(this,Il).call(this,i))))),Ot(this,Eo)>0?zn(this,Cn,hp).call(this):(Ol(Ot(this,ns),()=>{Ge(this,ns,null)}),this.is_pending=!1)}))},w0=function(){var t=Ot(this,Hs);return this.is_pending&&(Ge(this,To,Na()),Ot(this,Hs).before(Ot(this,To)),t=Ot(this,To)),t},lp=function(t){var i=ri,f=Ke,y=Pi;er(Ot(this,Vr)),tr(Ot(this,Vr)),yu(Ot(this,Vr).ctx);try{return t()}catch(C){return w2(C),null}finally{er(i),tr(f),yu(y)}},hp=function(){const t=Ot(this,Ur).pending;Ot(this,_s)!==null&&(Ge(this,wa,document.createDocumentFragment()),Ot(this,wa).append(Ot(this,To)),Z2(Ot(this,_s),Ot(this,wa))),Ot(this,ns)===null&&Ge(this,ns,ls(()=>t(Ot(this,Hs))))},M0=function(t){var i;if(!this.has_pending_snippet()){this.parent&&zn(i=this.parent,Cn,M0).call(i,t);return}if(Ge(this,Eo,Ot(this,Eo)+t),Ot(this,Eo)===0){this.is_pending=!1;for(const f of Ot(this,mu))Hi(f,Nn),dr(f);for(const f of Ot(this,gu))Hi(f,qs),dr(f);Ot(this,mu).clear(),Ot(this,gu).clear(),Ot(this,ns)&&Ol(Ot(this,ns),()=>{Ge(this,ns,null)}),Ot(this,wa)&&(Ot(this,Hs).before(Ot(this,wa)),Ge(this,wa,null))}};function D2(v,t,i,f){const y=zc()?Gc:en;var C=v.filter(r=>!r.settled);if(i.length===0&&C.length===0){f(t.map(y));return}var o=Ye,E=ri,e=Eb(),a=C.length===1?C[0].promise:C.length>1?Promise.all(C.map(r=>r.promise)):null;function x(r){e();try{f(r)}catch(h){(E.f&Oa)===0&&Tu(h,E)}o==null||o.deactivate(),R0()}if(i.length===0){a.then(()=>x(t.map(y)));return}function u(){e(),Promise.all(i.map(r=>Sb(r))).then(r=>x([...t.map(y),...r])).catch(r=>Tu(r,E))}a?a.then(u):u()}function Eb(){var v=ri,t=Ke,i=Pi,f=Ye;return function(C=!0){er(v),tr(t),yu(i),C&&(f==null||f.activate())}}function R0(){er(null),tr(null),yu(null)}function Gc(v){var t=On|Nn,i=Ke!==null&&(Ke.f&On)!==0?Ke:null;return ri!==null&&(ri.f|=Yu),{ctx:Pi,deps:null,effects:null,equals:S2,f:t,fn:v,reactions:null,rv:0,v:En,wv:0,parent:i??ri,ac:null}}function Sb(v,t,i){let f=ri;f===null&&BP();var y=f.b,C=void 0,o=Uo(En),E=!Ke,e=new Map;return Ob(()=>{var h;var a=m2();C=a.promise;try{Promise.resolve(v()).then(a.resolve,a.reject).then(()=>{x===Ye&&x.committed&&x.deactivate(),R0()})}catch(n){a.reject(n),R0()}var x=Ye;if(E){var u=y.is_rendered();y.update_pending_count(1),x.increment(u),(h=e.get(x))==null||h.reject($h),e.delete(x),e.set(x,a)}const r=(n,l=void 0)=>{if(x.activate(),l)l!==$h&&(o.f|=Mo,Eu(o,l));else{(o.f&Mo)!==0&&(o.f^=Mo),Eu(o,n);for(const[c,s]of e){if(e.delete(c),c===x)break;s.reject($h)}}E&&(y.update_pending_count(-1),x.decrement(u))};a.promise.then(r,n=>r(null,n||"unknown"))}),Hc(()=>{for(const a of e.values())a.reject($h)}),new Promise(a=>{function x(u){function r(){u===C?a(o):x(C)}u.then(r,r)}x(C)})}function Wf(v){const t=Gc(v);return J2(t),t}function en(v){const t=Gc(v);return t.equals=C2,t}function O2(v){var t=v.effects;if(t!==null){v.effects=null;for(var i=0;i<t.length;i+=1)Fn(t[i])}}function Cb(v){for(var t=v.parent;t!==null;){if((t.f&On)===0)return(t.f&Oa)===0?t:null;t=t.parent}return null}function Sx(v){var t,i=ri;er(Cb(v));try{v.f&=~Yl,O2(v),t=eC(v)}finally{er(i)}return t}function N2(v){var t=Sx(v);if(!v.equals(t)&&(v.wv=q2(),(!(Ye!=null&&Ye.is_fork)||v.deps===null)&&(v.v=t,v.deps===null))){Hi(v,dn);return}Vo||(In!==null?(Cx()||Ye!=null&&Ye.is_fork)&&In.set(v,t):Ex(v))}let P0=new Set;const Po=new Map;let B2=!1;function Uo(v,t){var i={f:0,v,reactions:null,equals:S2,rv:0,wv:0};return i}function so(v,t){const i=Uo(v);return J2(i),i}function ue(v,t=!1,i=!0){var y;const f=Uo(v);return t||(f.equals=C2),ku&&i&&Pi!==null&&Pi.l!==null&&((y=Pi.l).s??(y.s=[])).push(f),f}function Vs(v,t){return ut(v,_t(()=>Y(v))),t}function ut(v,t,i=!1){Ke!==null&&(!pr||(Ke.f&b1)!==0)&&zc()&&(Ke.f&(On|ja|yx|b1))!==0&&(Js===null||!xu.call(Js,v))&&YP();let f=i?Kh(t):t;return Eu(v,f)}function Eu(v,t){if(!v.equals(t)){var i=v.v;Vo?Po.set(v,t):Po.set(v,i),v.v=t;var f=Ro.ensure();if(f.capture(v,i),(v.f&On)!==0){const y=v;(v.f&Nn)!==0&&Sx(y),Ex(y)}v.wv=q2(),U2(v,Nn),zc()&&ri!==null&&(ri.f&dn)!==0&&(ri.f&(Ar|eh))===0&&(Ws===null?Ub([v]):Ws.push(v)),!f.is_fork&&P0.size>0&&!B2&&Ab()}return t}function Ab(){B2=!1;for(const v of P0)(v.f&dn)!==0&&Hi(v,qs),$u(v)&&Cu(v);P0.clear()}function L1(v,t=1){var i=Y(v),f=t===1?i++:i--;return ut(v,i),f}function ec(v){ut(v,v.v+1)}function U2(v,t){var i=v.reactions;if(i!==null)for(var f=zc(),y=i.length,C=0;C<y;C++){var o=i[C],E=o.f;if(!(!f&&o===ri)){var e=(E&Nn)===0;if(e&&Hi(o,t),(E&On)!==0){var a=o;In==null||In.delete(a),(E&Yl)===0&&(E&Zs&&(o.f|=Yl),U2(a,qs))}else e&&((E&ja)!==0&&ur!==null&&ur.add(o),dr(o))}}}function Kh(v){if(typeof v!="object"||v===null||Yr in v)return v;const t=vx(v);if(t!==FP&&t!==DP)return v;var i=new Map,f=gv(v),y=so(0),C=Nl,o=E=>{if(Nl===C)return E();var e=Ke,a=Nl;tr(null),N1(C);var x=E();return tr(e),N1(a),x};return f&&i.set("length",so(v.length)),new Proxy(v,{defineProperty(E,e,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&_P();var x=i.get(e);return x===void 0?x=o(()=>{var u=so(a.value);return i.set(e,u),u}):ut(x,a.value,!0),!0},deleteProperty(E,e){var a=i.get(e);if(a===void 0){if(e in E){const x=o(()=>so(En));i.set(e,x),ec(y)}}else ut(a,En),ec(y);return!0},get(E,e,a){var h;if(e===Yr)return v;var x=i.get(e),u=e in E;if(x===void 0&&(!u||(h=Da(E,e))!=null&&h.writable)&&(x=o(()=>{var n=Kh(u?E[e]:En),l=so(n);return l}),i.set(e,x)),x!==void 0){var r=Y(x);return r===En?void 0:r}return Reflect.get(E,e,a)},getOwnPropertyDescriptor(E,e){var a=Reflect.getOwnPropertyDescriptor(E,e);if(a&&"value"in a){var x=i.get(e);x&&(a.value=Y(x))}else if(a===void 0){var u=i.get(e),r=u==null?void 0:u.v;if(u!==void 0&&r!==En)return{enumerable:!0,configurable:!0,value:r,writable:!0}}return a},has(E,e){var r;if(e===Yr)return!0;var a=i.get(e),x=a!==void 0&&a.v!==En||Reflect.has(E,e);if(a!==void 0||ri!==null&&(!x||(r=Da(E,e))!=null&&r.writable)){a===void 0&&(a=o(()=>{var h=x?Kh(E[e]):En,n=so(h);return n}),i.set(e,a));var u=Y(a);if(u===En)return!1}return x},set(E,e,a,x){var m;var u=i.get(e),r=e in E;if(f&&e==="length")for(var h=a;h<u.v;h+=1){var n=i.get(h+"");n!==void 0?ut(n,En):h in E&&(n=o(()=>so(En)),i.set(h+"",n))}if(u===void 0)(!r||(m=Da(E,e))!=null&&m.writable)&&(u=o(()=>so(void 0)),ut(u,Kh(a)),i.set(e,u));else{r=u.v!==En;var l=o(()=>Kh(a));ut(u,l)}var c=Reflect.getOwnPropertyDescriptor(E,e);if(c!=null&&c.set&&c.set.call(x,a),!r){if(f&&typeof e=="string"){var s=i.get("length"),d=Number(e);Number.isInteger(d)&&d>=s.v&&ut(s,d+1)}ec(y)}return!0},ownKeys(E){Y(y);var e=Reflect.ownKeys(E).filter(u=>{var r=i.get(u);return r===void 0||r.v!==En});for(var[a,x]of i)x.v!==En&&!(a in E)&&e.push(a);return e},setPrototypeOf(){XP()}})}function F1(v){try{if(v!==null&&typeof v=="object"&&Yr in v)return v[Yr]}catch{}return v}function wb(v,t){return Object.is(F1(v),F1(t))}var b0,V2,z2,G2;function Mb(){if(b0===void 0){b0=window,V2=/Firefox/.test(navigator.userAgent);var v=Element.prototype,t=Node.prototype,i=Text.prototype;z2=Da(t,"firstChild").get,G2=Da(t,"nextSibling").get,P1(v)&&(v.__click=void 0,v.__className=void 0,v.__attributes=null,v.__style=void 0,v.__e=void 0),P1(i)&&(i.__t=void 0)}}function Na(v=""){return document.createTextNode(v)}function Su(v){return z2.call(v)}function Wc(v){return G2.call(v)}function ht(v,t){return Su(v)}function fi(v,t=!1){{var i=Su(v);return i instanceof Comment&&i.data===""?Wc(i):i}}function xt(v,t=1,i=!1){let f=v;for(;t--;)f=Wc(f);return f}function Rb(v){v.textContent=""}function W2(){return!1}function Pb(v,t){if(t){const i=document.body;v.autofocus=!0,kr(()=>{document.activeElement===i&&v.focus()})}}let D1=!1;function bb(){D1||(D1=!0,document.addEventListener("reset",v=>{Promise.resolve().then(()=>{var t;if(!v.defaultPrevented)for(const i of v.target.elements)(t=i.__on_r)==null||t.call(i)})},{capture:!0}))}function Tv(v){var t=Ke,i=ri;tr(null),er(null);try{return v()}finally{tr(t),er(i)}}function Ib(v,t,i,f=i){v.addEventListener(t,()=>Tv(i));const y=v.__on_r;y?v.__on_r=()=>{y(),f(!0)}:v.__on_r=()=>f(!0),bb()}function H2(v){ri===null&&(Ke===null&&GP(),zP()),Vo&&VP()}function Lb(v,t){var i=t.last;i===null?t.last=t.first=v:(i.next=v,v.prev=i,t.last=v)}function wr(v,t,i){var f=ri;f!==null&&(f.f&Rs)!==0&&(v|=Rs);var y={ctx:Pi,deps:null,nodes:null,f:v|Nn|Zs,first:null,fn:t,last:null,next:null,parent:f,b:f&&f.b,prev:null,teardown:null,wv:0,ac:null};if(i)try{Cu(y),y.f|=xx}catch(E){throw Fn(y),E}else t!==null&&dr(y);var C=y;if(i&&C.deps===null&&C.teardown===null&&C.nodes===null&&C.first===C.last&&(C.f&Yu)===0&&(C=C.first,(v&ja)!==0&&(v&Xl)!==0&&C!==null&&(C.f|=Xl)),C!==null&&(C.parent=f,f!==null&&Lb(C,f),Ke!==null&&(Ke.f&On)!==0&&(v&eh)===0)){var o=Ke;(o.effects??(o.effects=[])).push(C)}return y}function Cx(){return Ke!==null&&!pr}function Hc(v){const t=wr(Vc,null,!1);return Hi(t,dn),t.teardown=v,t}function I0(v){H2();var t=ri.f,i=!Ke&&(t&Ar)!==0&&(t&xx)===0;if(i){var f=Pi;(f.e??(f.e=[])).push(v)}else return _2(v)}function _2(v){return wr(Fp|x2,v,!1)}function Fb(v){return H2(),wr(Vc|x2,v,!0)}function Db(v){Ro.ensure();const t=wr(eh|Yu,v,!0);return(i={})=>new Promise(f=>{i.outro?Ol(t,()=>{Fn(t),f(void 0)}):(Fn(t),f(void 0))})}function Ax(v){return wr(Fp,v,!1)}function nn(v,t){var i=Pi,f={effect:null,ran:!1,deps:v};i.l.$.push(f),f.effect=_c(()=>{v(),!f.ran&&(f.ran=!0,_t(t))})}function ih(){var v=Pi;_c(()=>{for(var t of v.l.$){t.deps();var i=t.effect;(i.f&dn)!==0&&i.deps!==null&&Hi(i,qs),$u(i)&&Cu(i),t.ran=!1}})}function Ob(v){return wr(yx|Yu,v,!0)}function _c(v,t=0){return wr(Vc|t,v,!0)}function si(v,t=[],i=[],f=[]){D2(f,t,i,y=>{wr(Vc,()=>v(...y.map(Y)),!0)})}function Ev(v,t=0){var i=wr(ja|t,v,!0);return i}function X2(v,t=0){var i=wr(mx|t,v,!0);return i}function ls(v){return wr(Ar|Yu,v,!0)}function Y2(v){var t=v.teardown;if(t!==null){const i=Vo,f=Ke;O1(!0),tr(null);try{t.call(null)}finally{O1(i),tr(f)}}}function k2(v,t=!1){var i=v.first;for(v.first=v.last=null;i!==null;){const y=i.ac;y!==null&&Tv(()=>{y.abort($h)});var f=i.next;(i.f&eh)!==0?i.parent=null:Fn(i,t),i=f}}function Nb(v){for(var t=v.first;t!==null;){var i=t.next;(t.f&Ar)===0&&Fn(t),t=i}}function Fn(v,t=!0){var i=!1;(t||(v.f&g2)!==0)&&v.nodes!==null&&v.nodes.end!==null&&(Bb(v.nodes.start,v.nodes.end),i=!0),k2(v,t&&!i),Dp(v,0),Hi(v,Oa);var f=v.nodes&&v.nodes.t;if(f!==null)for(const C of f)C.stop();Y2(v);var y=v.parent;y!==null&&y.first!==null&&$2(v),v.next=v.prev=v.teardown=v.ctx=v.deps=v.fn=v.nodes=v.ac=null}function Bb(v,t){for(;v!==null;){var i=v===t?null:Wc(v);v.remove(),v=i}}function $2(v){var t=v.parent,i=v.prev,f=v.next;i!==null&&(i.next=f),f!==null&&(f.prev=i),t!==null&&(t.first===v&&(t.first=f),t.last===v&&(t.last=i))}function Ol(v,t,i=!0){var f=[];K2(v,f,!0);var y=()=>{i&&Fn(v),t&&t()},C=f.length;if(C>0){var o=()=>--C||y();for(var E of f)E.out(o)}else y()}function K2(v,t,i){if((v.f&Rs)===0){v.f^=Rs;var f=v.nodes&&v.nodes.t;if(f!==null)for(const E of f)(E.is_global||i)&&t.push(E);for(var y=v.first;y!==null;){var C=y.next,o=(y.f&Xl)!==0||(y.f&Ar)!==0&&(v.f&ja)!==0;K2(y,t,o?i:!1),y=C}}}function wx(v){j2(v,!0)}function j2(v,t){if((v.f&Rs)!==0){v.f^=Rs,(v.f&dn)===0&&(Hi(v,Nn),dr(v));for(var i=v.first;i!==null;){var f=i.next,y=(i.f&Xl)!==0||(i.f&Ar)!==0;j2(i,y?t:!1),i=f}var C=v.nodes&&v.nodes.t;if(C!==null)for(const o of C)(o.is_global||t)&&o.in()}}function Z2(v,t){if(v.nodes)for(var i=v.nodes.start,f=v.nodes.end;i!==null;){var y=i===f?null:Wc(i);t.append(i),i=y}}let up=!1,Vo=!1;function O1(v){Vo=v}let Ke=null,pr=!1;function tr(v){Ke=v}let ri=null;function er(v){ri=v}let Js=null;function J2(v){Ke!==null&&(Js===null?Js=[v]:Js.push(v))}let rs=null,Ts=0,Ws=null;function Ub(v){Ws=v}let Q2=1,Sl=0,Nl=Sl;function N1(v){Nl=v}function q2(){return++Q2}function $u(v){var t=v.f;if((t&Nn)!==0)return!0;if(t&On&&(v.f&=~Yl),(t&qs)!==0){for(var i=v.deps,f=i.length,y=0;y<f;y++){var C=i[y];if($u(C)&&N2(C),C.wv>v.wv)return!0}(t&Zs)!==0&&In===null&&Hi(v,dn)}return!1}function tC(v,t,i=!0){var f=v.reactions;if(f!==null&&!(Js!==null&&xu.call(Js,v)))for(var y=0;y<f.length;y++){var C=f[y];(C.f&On)!==0?tC(C,t,!1):t===C&&(i?Hi(C,Nn):(C.f&dn)!==0&&Hi(C,qs),dr(C))}}function eC(v){var l;var t=rs,i=Ts,f=Ws,y=Ke,C=Js,o=Pi,E=pr,e=Nl,a=v.f;rs=null,Ts=0,Ws=null,Ke=(a&(Ar|eh))===0?v:null,Js=null,yu(v.ctx),pr=!1,Nl=++Sl,v.ac!==null&&(Tv(()=>{v.ac.abort($h)}),v.ac=null);try{v.f|=T0;var x=v.fn,u=x(),r=v.deps,h=Ye==null?void 0:Ye.is_fork;if(rs!==null){var n;if(h||Dp(v,Ts),r!==null&&Ts>0)for(r.length=Ts+rs.length,n=0;n<rs.length;n++)r[Ts+n]=rs[n];else v.deps=r=rs;if(Cx()&&(v.f&Zs)!==0)for(n=Ts;n<r.length;n++)((l=r[n]).reactions??(l.reactions=[])).push(v)}else!h&&r!==null&&Ts<r.length&&(Dp(v,Ts),r.length=Ts);if(zc()&&Ws!==null&&!pr&&r!==null&&(v.f&(On|qs|Nn))===0)for(n=0;n<Ws.length;n++)tC(Ws[n],v);if(y!==null&&y!==v){if(Sl++,y.deps!==null)for(let c=0;c<i;c+=1)y.deps[c].rv=Sl;if(t!==null)for(const c of t)c.rv=Sl;Ws!==null&&(f===null?f=Ws:f.push(...Ws))}return(v.f&Mo)!==0&&(v.f^=Mo),u}catch(c){return w2(c)}finally{v.f^=T0,rs=t,Ts=i,Ws=f,Ke=y,Js=C,yu(o),pr=E,Nl=e}}function Vb(v,t){let i=t.reactions;if(i!==null){var f=IP.call(i,v);if(f!==-1){var y=i.length-1;y===0?i=t.reactions=null:(i[f]=i[y],i.pop())}}if(i===null&&(t.f&On)!==0&&(rs===null||!xu.call(rs,t))){var C=t;(C.f&Zs)!==0&&(C.f^=Zs,C.f&=~Yl),Ex(C),O2(C),Dp(C,0)}}function Dp(v,t){var i=v.deps;if(i!==null)for(var f=t;f<i.length;f++)Vb(v,i[f])}function Cu(v){var t=v.f;if((t&Oa)===0){Hi(v,dn);var i=ri,f=up;ri=v,up=!0;try{(t&(ja|mx))!==0?Nb(v):k2(v),Y2(v);var y=eC(v);v.teardown=typeof y=="function"?y:null,v.wv=Q2;var C;x0&&hb&&(v.f&Nn)!==0&&v.deps}finally{up=f,ri=i}}}async function zb(){await Promise.resolve(),db()}function Y(v){var t=v.f,i=(t&On)!==0;if(Ke!==null&&!pr){var f=ri!==null&&(ri.f&Oa)!==0;if(!f&&(Js===null||!xu.call(Js,v))){var y=Ke.deps;if((Ke.f&T0)!==0)v.rv<Sl&&(v.rv=Sl,rs===null&&y!==null&&y[Ts]===v?Ts++:rs===null?rs=[v]:rs.push(v));else{(Ke.deps??(Ke.deps=[])).push(v);var C=v.reactions;C===null?v.reactions=[Ke]:xu.call(C,Ke)||C.push(Ke)}}}if(Vo&&Po.has(v))return Po.get(v);if(i){var o=v;if(Vo){var E=o.v;return((o.f&dn)===0&&o.reactions!==null||nC(o))&&(E=Sx(o)),Po.set(o,E),E}var e=(o.f&Zs)===0&&!pr&&Ke!==null&&(up||(Ke.f&Zs)!==0),a=o.deps===null;$u(o)&&(e&&(o.f|=Zs),N2(o)),e&&!a&&iC(o)}if(In!=null&&In.has(v))return In.get(v);if((v.f&Mo)!==0)throw v.v;return v.v}function iC(v){if(v.deps!==null){v.f|=Zs;for(const t of v.deps)(t.reactions??(t.reactions=[])).push(v),(t.f&On)!==0&&(t.f&Zs)===0&&iC(t)}}function nC(v){if(v.v===En)return!0;if(v.deps===null)return!1;for(const t of v.deps)if(Po.has(t)||(t.f&On)!==0&&nC(t))return!0;return!1}function _t(v){var t=pr;try{return pr=!0,v()}finally{pr=t}}function cn(v){if(!(typeof v!="object"||!v||v instanceof EventTarget)){if(Yr in v)L0(v);else if(!Array.isArray(v))for(let t in v){const i=v[t];typeof i=="object"&&i&&Yr in i&&L0(i)}}}function L0(v,t=new Set){if(typeof v=="object"&&v!==null&&!(v instanceof EventTarget)&&!t.has(v)){t.add(v),v instanceof Date&&v.getTime();for(let f in v)try{L0(v[f],t)}catch{}const i=vx(v);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const f=v2(i);for(let y in f){const C=f[y].get;if(C)try{C.call(v)}catch{}}}}}function Gb(v){return v.endsWith("capture")&&v!=="gotpointercapture"&&v!=="lostpointercapture"}const Wb=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Hb(v){return Wb.includes(v)}const _b={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Xb(v){return v=v.toLowerCase(),_b[v]??v}const Yb=["touchstart","touchmove"];function kb(v){return Yb.includes(v)}const sC=new Set,F0=new Set;function rC(v,t,i,f={}){function y(C){if(f.capture||Hf.call(t,C),!C.cancelBubble)return Tv(()=>i==null?void 0:i.call(this,C))}return v.startsWith("pointer")||v.startsWith("touch")||v==="wheel"?kr(()=>{t.addEventListener(v,y,f)}):t.addEventListener(v,y,f),y}function $e(v,t,i,f,y){var C={capture:f,passive:y},o=rC(v,t,i,C);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Hc(()=>{t.removeEventListener(v,o,C)})}function $b(v){for(var t=0;t<v.length;t++)sC.add(v[t]);for(var i of F0)i(v)}let B1=null;function Hf(v){var c;var t=this,i=t.ownerDocument,f=v.type,y=((c=v.composedPath)==null?void 0:c.call(v))||[],C=y[0]||v.target;B1=v;var o=0,E=B1===v&&v.__root;if(E){var e=y.indexOf(E);if(e!==-1&&(t===document||t===window)){v.__root=t;return}var a=y.indexOf(t);if(a===-1)return;e<=a&&(o=e)}if(C=y[o]||v.target,C!==t){LP(v,"currentTarget",{configurable:!0,get(){return C||i}});var x=Ke,u=ri;tr(null),er(null);try{for(var r,h=[];C!==null;){var n=C.assignedSlot||C.parentNode||C.host||null;try{var l=C["__"+f];l!=null&&(!C.disabled||v.target===C)&&l.call(C,v)}catch(s){r?h.push(s):r=s}if(v.cancelBubble||n===t||n===null)break;C=n}if(r){for(let s of h)queueMicrotask(()=>{throw s});throw r}}finally{v.__root=t,delete v.currentTarget,tr(x),er(u)}}}function aC(v){var t=document.createElement("template");return t.innerHTML=v.replaceAll("<!>","<!---->"),t.content}function dc(v,t){var i=ri;i.nodes===null&&(i.nodes={start:v,end:t,a:null,t:null})}function Jt(v,t){var i=(t&eb)!==0,f=(t&ib)!==0,y,C=!v.startsWith("<!>");return()=>{y===void 0&&(y=aC(C?v:"<!>"+v),i||(y=Su(y)));var o=f||V2?document.importNode(y,!0):y.cloneNode(!0);if(i){var E=Su(o),e=o.lastChild;dc(E,e)}else dc(o,o);return o}}function Kb(v,t,i="svg"){var f=!v.startsWith("<!>"),y=`<${i}>${f?v:"<!>"+v}</${i}>`,C;return()=>{if(!C){var o=aC(y),E=Su(o);C=Su(E)}var e=C.cloneNode(!0);return dc(e,e),e}}function jb(v,t){return Kb(v,t,"svg")}function Ai(){var v=document.createDocumentFragment(),t=document.createComment(""),i=Na();return v.append(t,i),dc(t,i),v}function Gt(v,t){v!==null&&v.before(t)}function we(v,t){var i=t==null?"":typeof t=="object"?t+"":t;i!==(v.__t??(v.__t=v.nodeValue))&&(v.__t=i,v.nodeValue=i+"")}function Zb(v,t){return Jb(v,t)}const Ah=new Map;function Jb(v,{target:t,anchor:i,props:f={},events:y,context:C,intro:o=!0}){Mb();var E=new Set,e=u=>{for(var r=0;r<u.length;r++){var h=u[r];if(!E.has(h)){E.add(h);var n=kb(h);t.addEventListener(h,Hf,{passive:n});var l=Ah.get(h);l===void 0?(document.addEventListener(h,Hf,{passive:n}),Ah.set(h,1)):Ah.set(h,l+1)}}};e(xv(sC)),F0.add(e);var a=void 0,x=Db(()=>{var u=i??t.appendChild(Na());return gb(u,{pending:()=>{}},r=>{Ds({});var h=Pi;C&&(h.c=C),y&&(f.$$events=y),a=v(r,f)||{},Os()}),()=>{var n;for(var r of E){t.removeEventListener(r,Hf);var h=Ah.get(r);--h===0?(document.removeEventListener(r,Hf),Ah.delete(r)):Ah.set(r,h)}F0.delete(e),u!==i&&((n=u.parentNode)==null||n.removeChild(u))}});return Qb.set(a,x),a}let Qb=new WeakMap;var fr,Gr,Es,Dl,Bc,Uc,mv;class oC{constructor(t,i=!0){Lr(this,"anchor");_e(this,fr,new Map);_e(this,Gr,new Map);_e(this,Es,new Map);_e(this,Dl,new Set);_e(this,Bc,!0);_e(this,Uc,()=>{var t=Ye;if(Ot(this,fr).has(t)){var i=Ot(this,fr).get(t),f=Ot(this,Gr).get(i);if(f)wx(f),Ot(this,Dl).delete(i);else{var y=Ot(this,Es).get(i);y&&(Ot(this,Gr).set(i,y.effect),Ot(this,Es).delete(i),y.fragment.lastChild.remove(),this.anchor.before(y.fragment),f=y.effect)}for(const[C,o]of Ot(this,fr)){if(Ot(this,fr).delete(C),C===t)break;const E=Ot(this,Es).get(o);E&&(Fn(E.effect),Ot(this,Es).delete(o))}for(const[C,o]of Ot(this,Gr)){if(C===i||Ot(this,Dl).has(C))continue;const E=()=>{if(Array.from(Ot(this,fr).values()).includes(C)){var a=document.createDocumentFragment();Z2(o,a),a.append(Na()),Ot(this,Es).set(C,{effect:o,fragment:a})}else Fn(o);Ot(this,Dl).delete(C),Ot(this,Gr).delete(C)};Ot(this,Bc)||!f?(Ot(this,Dl).add(C),Ol(o,E,!1)):E()}}});_e(this,mv,t=>{Ot(this,fr).delete(t);const i=Array.from(Ot(this,fr).values());for(const[f,y]of Ot(this,Es))i.includes(f)||(Fn(y.effect),Ot(this,Es).delete(f))});this.anchor=t,Ge(this,Bc,i)}ensure(t,i){var f=Ye,y=W2();if(i&&!Ot(this,Gr).has(t)&&!Ot(this,Es).has(t))if(y){var C=document.createDocumentFragment(),o=Na();C.append(o),Ot(this,Es).set(t,{effect:ls(()=>i(o)),fragment:C})}else Ot(this,Gr).set(t,ls(()=>i(this.anchor)));if(Ot(this,fr).set(f,t),y){for(const[E,e]of Ot(this,Gr))E===t?f.unskip_effect(e):f.skip_effect(e);for(const[E,e]of Ot(this,Es))E===t?f.unskip_effect(e.effect):f.skip_effect(e.effect);f.oncommit(Ot(this,Uc)),f.ondiscard(Ot(this,mv))}else Ot(this,Uc).call(this)}}fr=new WeakMap,Gr=new WeakMap,Es=new WeakMap,Dl=new WeakMap,Bc=new WeakMap,Uc=new WeakMap,mv=new WeakMap;function Ae(v,t,i=!1){var f=new oC(v),y=i?Xl:0;function C(o,E){f.ensure(o,E)}Ev(()=>{var o=!1;t((E,e=!0)=>{o=!0,C(e,E)}),o||C(!1,null)},y)}function Xi(v,t){return t}function qb(v,t,i){for(var f=[],y=t.length,C,o=t.length,E=0;E<y;E++){let u=t[E];Ol(u,()=>{if(C){if(C.pending.delete(u),C.done.add(u),C.pending.size===0){var r=v.outrogroups;D0(xv(C.done)),r.delete(C),r.size===0&&(v.outrogroups=null)}}else o-=1},!1)}if(o===0){var e=f.length===0&&i!==null;if(e){var a=i,x=a.parentNode;Rb(x),x.append(a),v.items.clear()}D0(t,!e)}else C={pending:new Set(t),done:new Set},(v.outrogroups??(v.outrogroups=new Set)).add(C)}function D0(v,t=!0){for(var i=0;i<v.length;i++)Fn(v[i],t)}var U1;function Yi(v,t,i,f,y,C=null){var o=v,E=new Map,e=(t&T2)!==0;if(e){var a=v;o=a.appendChild(Na())}var x=null,u=en(()=>{var s=i();return gv(s)?s:s==null?[]:xv(s)}),r,h=!0;function n(){c.fallback=x,t3(c,r,o,t,f),x!==null&&(r.length===0?(x.f&Pa)===0?wx(x):(x.f^=Pa,_f(x,null,o)):Ol(x,()=>{x=null}))}var l=Ev(()=>{r=Y(u);for(var s=r.length,d=new Set,m=Ye,p=W2(),g=0;g<s;g+=1){var T=r[g],S=f(T,g),w=h?null:E.get(S);w?(w.v&&Eu(w.v,T),w.i&&Eu(w.i,g),p&&m.unskip_effect(w.e)):(w=e3(E,h?o:U1??(U1=Na()),T,S,g,y,t,i),h||(w.e.f|=Pa),E.set(S,w)),d.add(S)}if(s===0&&C&&!x&&(h?x=ls(()=>C(o)):(x=ls(()=>C(U1??(U1=Na()))),x.f|=Pa)),s>d.size&&UP(),!h)if(p){for(const[A,M]of E)d.has(A)||m.skip_effect(M.e);m.oncommit(n),m.ondiscard(()=>{})}else n();Y(u)}),c={effect:l,items:E,outrogroups:null,fallback:x};h=!1}function wf(v){for(;v!==null&&(v.f&Ar)===0;)v=v.next;return v}function t3(v,t,i,f,y){var M,R,P,b,F,I,L,D,O;var C=(f&jP)!==0,o=t.length,E=v.items,e=wf(v.effect.first),a,x=null,u,r=[],h=[],n,l,c,s;if(C)for(s=0;s<o;s+=1)n=t[s],l=y(n,s),c=E.get(l).e,(c.f&Pa)===0&&((R=(M=c.nodes)==null?void 0:M.a)==null||R.measure(),(u??(u=new Set)).add(c));for(s=0;s<o;s+=1){if(n=t[s],l=y(n,s),c=E.get(l).e,v.outrogroups!==null)for(const z of v.outrogroups)z.pending.delete(c),z.done.delete(c);if((c.f&Pa)!==0)if(c.f^=Pa,c===e)_f(c,null,i);else{var d=x?x.next:e;c===v.effect.last&&(v.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),ro(v,x,c),ro(v,c,d),_f(c,d,i),x=c,r=[],h=[],e=wf(x.next);continue}if((c.f&Rs)!==0&&(wx(c),C&&((b=(P=c.nodes)==null?void 0:P.a)==null||b.unfix(),(u??(u=new Set)).delete(c))),c!==e){if(a!==void 0&&a.has(c)){if(r.length<h.length){var m=h[0],p;x=m.prev;var g=r[0],T=r[r.length-1];for(p=0;p<r.length;p+=1)_f(r[p],m,i);for(p=0;p<h.length;p+=1)a.delete(h[p]);ro(v,g.prev,T.next),ro(v,x,g),ro(v,T,m),e=m,x=T,s-=1,r=[],h=[]}else a.delete(c),_f(c,e,i),ro(v,c.prev,c.next),ro(v,c,x===null?v.effect.first:x.next),ro(v,x,c),x=c;continue}for(r=[],h=[];e!==null&&e!==c;)(a??(a=new Set)).add(e),h.push(e),e=wf(e.next);if(e===null)continue}(c.f&Pa)===0&&r.push(c),x=c,e=wf(c.next)}if(v.outrogroups!==null){for(const z of v.outrogroups)z.pending.size===0&&(D0(xv(z.done)),(F=v.outrogroups)==null||F.delete(z));v.outrogroups.size===0&&(v.outrogroups=null)}if(e!==null||a!==void 0){var S=[];if(a!==void 0)for(c of a)(c.f&Rs)===0&&S.push(c);for(;e!==null;)(e.f&Rs)===0&&e!==v.fallback&&S.push(e),e=wf(e.next);var w=S.length;if(w>0){var A=(f&T2)!==0&&o===0?i:null;if(C){for(s=0;s<w;s+=1)(L=(I=S[s].nodes)==null?void 0:I.a)==null||L.measure();for(s=0;s<w;s+=1)(O=(D=S[s].nodes)==null?void 0:D.a)==null||O.fix()}qb(v,S,A)}}C&&kr(()=>{var z,W;if(u!==void 0)for(c of u)(W=(z=c.nodes)==null?void 0:z.a)==null||W.apply()})}function e3(v,t,i,f,y,C,o,E){var e=(o&$P)!==0?(o&ZP)===0?ue(i,!1,!1):Uo(i):null,a=(o&KP)!==0?Uo(y):null;return{v:e,i:a,e:ls(()=>(C(t,e??i,a??y,E),()=>{v.delete(f)}))}}function _f(v,t,i){if(v.nodes)for(var f=v.nodes.start,y=v.nodes.end,C=t&&(t.f&Pa)===0?t.nodes.start:i;f!==null;){var o=Wc(f);if(C.before(f),f===y)return;f=o}}function ro(v,t,i){t===null?v.effect.first=i:t.next=i,i===null?v.effect.last=t:i.prev=t}function Ui(v,t,i,f,y){var E;var C=(E=t.$$slots)==null?void 0:E[i],o=!1;C===!0&&(C=t[i==="default"?"children":i],o=!0),C===void 0||C(v,o?()=>f:f)}function i3(v,t,i,f,y,C){var o=null,E=v,e=new oC(E,!1);Ev(()=>{const a=t()||null;var x=sb;if(a===null){e.ensure(null,null);return}return e.ensure(a,u=>{if(a){if(o=document.createElementNS(x,a),dc(o,o),f){var r=o.appendChild(Na());f(o,r)}ri.nodes.end=o,u.before(o)}}),()=>{}},Xl),Hc(()=>{})}function n3(v,t){var i=void 0,f;X2(()=>{i!==(i=t())&&(f&&(Fn(f),f=null),i&&(f=ls(()=>{Ax(()=>i(v))})))})}function lC(v){var t,i,f="";if(typeof v=="string"||typeof v=="number")f+=v;else if(typeof v=="object")if(Array.isArray(v)){var y=v.length;for(t=0;t<y;t++)v[t]&&(i=lC(v[t]))&&(f&&(f+=" "),f+=i)}else for(i in v)v[i]&&(f&&(f+=" "),f+=i);return f}function s3(){for(var v,t,i=0,f="",y=arguments.length;i<y;i++)(v=arguments[i])&&(t=lC(v))&&(f&&(f+=" "),f+=t);return f}function r3(v){return typeof v=="object"?s3(v):v??""}const V1=[...` 	
\r\fÂ \v\uFEFF`];function a3(v,t,i){var f=v==null?"":""+v;if(t&&(f=f?f+" "+t:t),i){for(var y in i)if(i[y])f=f?f+" "+y:y;else if(f.length)for(var C=y.length,o=0;(o=f.indexOf(y,o))>=0;){var E=o+C;(o===0||V1.includes(f[o-1]))&&(E===f.length||V1.includes(f[E]))?f=(o===0?"":f.substring(0,o))+f.substring(E+1):o=E}}return f===""?null:f}function z1(v,t=!1){var i=t?" !important;":";",f="";for(var y in v){var C=v[y];C!=null&&C!==""&&(f+=" "+y+": "+C+i)}return f}function sm(v){return v[0]!=="-"||v[1]!=="-"?v.toLowerCase():v}function o3(v,t){if(t){var i="",f,y;if(Array.isArray(t)?(f=t[0],y=t[1]):f=t,v){v=String(v).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var C=!1,o=0,E=!1,e=[];f&&e.push(...Object.keys(f).map(sm)),y&&e.push(...Object.keys(y).map(sm));var a=0,x=-1;const l=v.length;for(var u=0;u<l;u++){var r=v[u];if(E?r==="/"&&v[u-1]==="*"&&(E=!1):C?C===r&&(C=!1):r==="/"&&v[u+1]==="*"?E=!0:r==='"'||r==="'"?C=r:r==="("?o++:r===")"&&o--,!E&&C===!1&&o===0){if(r===":"&&x===-1)x=u;else if(r===";"||u===l-1){if(x!==-1){var h=sm(v.substring(a,x).trim());if(!e.includes(h)){r!==";"&&u++;var n=v.substring(a,u).trim();i+=" "+n+";"}}a=u+1,x=-1}}}}return f&&(i+=z1(f)),y&&(i+=z1(y,!0)),i=i.trim(),i===""?null:i}return v==null?null:String(v)}function Xe(v,t,i,f,y,C){var o=v.__className;if(o!==i||o===void 0){var E=a3(i,f,C);E==null?v.removeAttribute("class"):t?v.className=E:v.setAttribute("class",E),v.__className=i}else if(C&&y!==C)for(var e in C){var a=!!C[e];(y==null||a!==!!y[e])&&v.classList.toggle(e,a)}return C}function rm(v,t={},i,f){for(var y in i){var C=i[y];t[y]!==C&&(i[y]==null?v.style.removeProperty(y):v.style.setProperty(y,C,f))}}function pc(v,t,i,f){var y=v.__style;if(y!==t){var C=o3(t,f);C==null?v.removeAttribute("style"):v.style.cssText=C,v.__style=t}else f&&(Array.isArray(f)?(rm(v,i==null?void 0:i[0],f[0]),rm(v,i==null?void 0:i[1],f[1],"important")):rm(v,i,f));return f}function O0(v,t,i=!1){if(v.multiple){if(t==null)return;if(!gv(t))return ab();for(var f of v.options)f.selected=t.includes(G1(f));return}for(f of v.options){var y=G1(f);if(wb(y,t)){f.selected=!0;return}}(!i||t!==void 0)&&(v.selectedIndex=-1)}function l3(v){var t=new MutationObserver(()=>{O0(v,v.__value)});t.observe(v,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Hc(()=>{t.disconnect()})}function G1(v){return"__value"in v?v.__value:v.value}const Mf=Symbol("class"),Rf=Symbol("style"),hC=Symbol("is custom element"),uC=Symbol("is html");function h3(v,t){t?v.hasAttribute("selected")||v.setAttribute("selected",""):v.removeAttribute("selected")}function N0(v,t,i,f){var y=fC(v);y[t]!==(y[t]=i)&&(t==="loading"&&(v[NP]=i),i==null?v.removeAttribute(t):typeof i!="string"&&cC(v).includes(t)?v[t]=i:v.setAttribute(t,i))}function u3(v,t,i,f,y=!1,C=!1){var o=fC(v),E=o[hC],e=!o[uC],a=t||{},x=v.tagName==="OPTION";for(var u in t)u in i||(i[u]=null);i.class?i.class=r3(i.class):i[Mf]&&(i.class=null),i[Rf]&&(i.style??(i.style=null));var r=cC(v);for(const p in i){let g=i[p];if(x&&p==="value"&&g==null){v.value=v.__value="",a[p]=g;continue}if(p==="class"){var h=v.namespaceURI==="http://www.w3.org/1999/xhtml";Xe(v,h,g,f,t==null?void 0:t[Mf],i[Mf]),a[p]=g,a[Mf]=i[Mf];continue}if(p==="style"){pc(v,g,t==null?void 0:t[Rf],i[Rf]),a[p]=g,a[Rf]=i[Rf];continue}var n=a[p];if(!(g===n&&!(g===void 0&&v.hasAttribute(p)))){a[p]=g;var l=p[0]+p[1];if(l!=="$$")if(l==="on"){const T={},S="$$"+p;let w=p.slice(2);var c=Hb(w);if(Gb(w)&&(w=w.slice(0,-7),T.capture=!0),!c&&n){if(g!=null)continue;v.removeEventListener(w,a[S],T),a[S]=null}if(g!=null)if(c)v[`__${w}`]=g,$b([w]);else{let A=function(M){a[p].call(this,M)};var m=A;a[S]=rC(w,v,A,T)}else c&&(v[`__${w}`]=void 0)}else if(p==="style")N0(v,p,g);else if(p==="autofocus")Pb(v,!!g);else if(!E&&(p==="__value"||p==="value"&&g!=null))v.value=v.__value=g;else if(p==="selected"&&x)h3(v,g);else{var s=p;e||(s=Xb(s));var d=s==="defaultValue"||s==="defaultChecked";if(g==null&&!E&&!d)if(o[p]=null,s==="value"||s==="checked"){let T=v;const S=t===void 0;if(s==="value"){let w=T.defaultValue;T.removeAttribute(s),T.defaultValue=w,T.value=T.__value=S?w:null}else{let w=T.defaultChecked;T.removeAttribute(s),T.defaultChecked=w,T.checked=S?w:!1}}else v.removeAttribute(p);else d||r.includes(s)&&(E||typeof g!="string")?(v[s]=g,s in o&&(o[s]=En)):typeof g!="function"&&N0(v,s,g)}}}return a}function W1(v,t,i=[],f=[],y=[],C,o=!1,E=!1){D2(y,i,f,e=>{var a=void 0,x={},u=v.nodeName==="SELECT",r=!1;if(X2(()=>{var n=t(...e.map(Y)),l=u3(v,a,n,C,o,E);r&&u&&"value"in n&&O0(v,n.value);for(let s of Object.getOwnPropertySymbols(x))n[s]||Fn(x[s]);for(let s of Object.getOwnPropertySymbols(n)){var c=n[s];s.description===rb&&(!a||c!==a[s])&&(x[s]&&Fn(x[s]),x[s]=ls(()=>n3(v,()=>c))),l[s]=c}a=l}),u){var h=v;Ax(()=>{O0(h,a.value,!0),l3(h)})}r=!0})}function fC(v){return v.__attributes??(v.__attributes={[hC]:v.nodeName.includes("-"),[uC]:v.namespaceURI===nb})}var H1=new Map;function cC(v){var t=v.getAttribute("is")||v.nodeName,i=H1.get(t);if(i)return i;H1.set(t,i=[]);for(var f,y=v,C=Element.prototype;C!==y;){f=v2(y);for(var o in f)f[o].set&&i.push(o);y=vx(y)}return i}function am(v,t,i=t){var f=new WeakSet;Ib(v,"input",async y=>{var C=y?v.defaultValue:v.value;if(C=om(v)?lm(C):C,i(C),Ye!==null&&f.add(Ye),await zb(),C!==(C=t())){var o=v.selectionStart,E=v.selectionEnd,e=v.value.length;if(v.value=C??"",E!==null){var a=v.value.length;o===E&&E===e&&a>e?(v.selectionStart=a,v.selectionEnd=a):(v.selectionStart=o,v.selectionEnd=Math.min(E,a))}}}),_t(t)==null&&v.value&&(i(om(v)?lm(v.value):v.value),Ye!==null&&f.add(Ye)),_c(()=>{var y=t();if(v===document.activeElement){var C=E0??Ye;if(f.has(C))return}om(v)&&y===lm(v.value)||v.type==="date"&&!y&&!v.value||y!==v.value&&(v.value=y??"")})}function om(v){var t=v.type;return t==="number"||t==="range"}function lm(v){return v===""?null:+v}function B0(v,t,i){var f=Da(v,t);f&&f.set&&(v[t]=i,Hc(()=>{v[t]=null}))}function _1(v,t){return v===t||(v==null?void 0:v[Yr])===t}function Op(v={},t,i,f){return Ax(()=>{var y,C;return _c(()=>{y=C,C=[],_t(()=>{v!==i(...C)&&(t(v,...C),y&&_1(i(...y),v)&&t(null,...y))})}),()=>{kr(()=>{C&&_1(i(...C),v)&&t(null,...C)})}}),v}function f3(v){return function(...t){var i=t[0];i.target===this&&(v==null||v.apply(this,t))}}function dC(v){return function(...t){var i=t[0];return i.preventDefault(),v==null?void 0:v.apply(this,t)}}function ir(v=!1){const t=Pi,i=t.l.u;if(!i)return;let f=()=>cn(t.s);if(v){let y=0,C={};const o=Gc(()=>{let E=!1;const e=t.s;for(const a in e)e[a]!==C[a]&&(C[a]=e[a],E=!0);return E&&y++,y});f=()=>Y(o)}i.b.length&&Fb(()=>{X1(t,f),y0(i.b)}),I0(()=>{const y=_t(()=>i.m.map(OP));return()=>{for(const C of y)typeof C=="function"&&C()}}),i.a.length&&I0(()=>{X1(t,f),y0(i.a)})}function X1(v,t){if(v.l.s)for(const i of v.l.s)Y(i);t()}let Rd=!1;function c3(v){var t=Rd;try{return Rd=!1,[v(),Rd]}finally{Rd=t}}const d3={get(v,t){if(!v.exclude.includes(t))return Y(v.version),t in v.special?v.special[t]():v.props[t]},set(v,t,i){if(!(t in v.special)){var f=ri;try{er(v.parent_effect),v.special[t]=Pe({get[t](){return v.props[t]}},t,E2)}finally{er(f)}}return v.special[t](i),L1(v.version),!0},getOwnPropertyDescriptor(v,t){if(!v.exclude.includes(t)&&t in v.props)return{enumerable:!0,configurable:!0,value:v.props[t]}},deleteProperty(v,t){return v.exclude.includes(t)||(v.exclude.push(t),L1(v.version)),!0},has(v,t){return v.exclude.includes(t)?!1:t in v.props},ownKeys(v){return Reflect.ownKeys(v.props).filter(t=>!v.exclude.includes(t))}};function ji(v,t){return new Proxy({props:v,exclude:t,special:{},version:Uo(0),parent_effect:ri},d3)}const p3={get(v,t){let i=v.props.length;for(;i--;){let f=v.props[i];if(Af(f)&&(f=f()),typeof f=="object"&&f!==null&&t in f)return f[t]}},set(v,t,i){let f=v.props.length;for(;f--;){let y=v.props[f];Af(y)&&(y=y());const C=Da(y,t);if(C&&C.set)return C.set(i),!0}return!1},getOwnPropertyDescriptor(v,t){let i=v.props.length;for(;i--;){let f=v.props[i];if(Af(f)&&(f=f()),typeof f=="object"&&f!==null&&t in f){const y=Da(f,t);return y&&!y.configurable&&(y.configurable=!0),y}}},has(v,t){if(t===Yr||t===y2)return!1;for(let i of v.props)if(Af(i)&&(i=i()),i!=null&&t in i)return!0;return!1},ownKeys(v){const t=[];for(let i of v.props)if(Af(i)&&(i=i()),!!i){for(const f in i)t.includes(f)||t.push(f);for(const f of Object.getOwnPropertySymbols(i))t.includes(f)||t.push(f)}return t}};function gn(...v){return new Proxy({props:v},p3)}function Pe(v,t,i,f){var m;var y=!ku||(i&QP)!==0,C=(i&qP)!==0,o=(i&tb)!==0,E=f,e=!0,a=()=>(e&&(e=!1,E=o?_t(f):f),E),x;if(C){var u=Yr in v||y2 in v;x=((m=Da(v,t))==null?void 0:m.set)??(u&&t in v?p=>v[t]=p:void 0)}var r,h=!1;C?[r,h]=c3(()=>v[t]):r=v[t],r===void 0&&f!==void 0&&(r=a(),x&&(y&&HP(),x(r)));var n;if(y?n=()=>{var p=v[t];return p===void 0?a():(e=!0,p)}:n=()=>{var p=v[t];return p!==void 0&&(E=void 0),p===void 0?E:p},y&&(i&E2)===0)return n;if(x){var l=v.$$legacy;return(function(p,g){return arguments.length>0?((!y||!g||l||h)&&x(g?n():p),p):n()})}var c=!1,s=((i&JP)!==0?Gc:en)(()=>(c=!1,n()));C&&Y(s);var d=ri;return(function(p,g){if(arguments.length>0){const T=g?Y(s):y&&C?Kh(p):p;return ut(s,T),c=!0,E!==void 0&&(E=T),p}return Vo&&c||(d.f&Oa)!==0?s.v:Y(s)})}function vc(v){Pi===null&&Tx(),ku&&Pi.l!==null?m3(Pi).m.push(v):I0(()=>{const t=_t(v);if(typeof t=="function")return t})}function Mx(v){Pi===null&&Tx(),vc(()=>()=>_t(v))}function v3(v,t,{bubbles:i=!1,cancelable:f=!1}={}){return new CustomEvent(v,{detail:t,bubbles:i,cancelable:f})}function Zo(){const v=Pi;return v===null&&Tx(),(t,i,f)=>{var C;const y=(C=v.s.$$events)==null?void 0:C[t];if(y){const o=gv(y)?y.slice():[y],E=v3(t,i,f);for(const e of o)e.call(v.x,E);return!E.defaultPrevented}return!0}}function m3(v){var t=v.l;return t.u??(t.u={a:[],b:[],m:[]})}const g3="5";var p2;typeof window<"u"&&((p2=window.__svelte??(window.__svelte={})).v??(p2.v=new Set)).add(g3);ub();/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const x3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var y3=jb("<svg><!><!></svg>");function xn(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]),f=ji(i,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Ds(t,!1);let y=Pe(t,"name",8,void 0),C=Pe(t,"color",8,"currentColor"),o=Pe(t,"size",8,24),E=Pe(t,"strokeWidth",8,2),e=Pe(t,"absoluteStrokeWidth",8,!1),a=Pe(t,"iconNode",24,()=>[]);const x=(...n)=>n.filter((l,c,s)=>!!l&&s.indexOf(l)===c).join(" ");ir();var u=y3();W1(u,(n,l)=>({...x3,...f,width:o(),height:o(),stroke:C(),"stroke-width":n,class:l}),[()=>(cn(e()),cn(E()),cn(o()),_t(()=>e()?Number(E())*24/Number(o()):E())),()=>(cn(y()),cn(i),_t(()=>x("lucide-icon","lucide",y()?`lucide-${y()}`:"",i.class)))]);var r=ht(u);Yi(r,1,a,Xi,(n,l)=>{var c=Wf(()=>Gf(Y(l),2));let s=()=>Y(c)[0],d=()=>Y(c)[1];var m=Ai(),p=fi(m);i3(p,s,!0,(g,T)=>{W1(g,()=>({...d()}))}),Gt(n,m)});var h=xt(r);Ui(h,t,"default",{}),Gt(v,u),Os()}function pC(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];xn(v,gn({name:"circle-help"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function U0(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["line",{x1:"12",x2:"12",y1:"2",y2:"22"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}]];xn(v,gn({name:"dollar-sign"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function T3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];xn(v,gn({name:"house"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function E3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];xn(v,gn({name:"info"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function S3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]];xn(v,gn({name:"lock"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function C3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}],["polyline",{points:"10 17 15 12 10 7"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}]];xn(v,gn({name:"log-in"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function A3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["polygon",{points:"6 3 20 12 6 21 6 3"}]];xn(v,gn({name:"play"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function ic(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];xn(v,gn({name:"rotate-ccw"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function Y1(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];xn(v,gn({name:"settings"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function w3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]];xn(v,gn({name:"smile"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function M3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}],["polyline",{points:"16 17 22 17 22 11"}]];xn(v,gn({name:"trending-down"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function R3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}],["polyline",{points:"16 7 22 7 22 13"}]];xn(v,gn({name:"trending-up"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function V0(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}],["path",{d:"M4 22h16"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"}]];xn(v,gn({name:"trophy"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function P3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];xn(v,gn({name:"user-plus"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function vC(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];xn(v,gn({name:"user"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function b3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]];xn(v,gn({name:"volume-2"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function I3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15"}]];xn(v,gn({name:"volume-x"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function Sv(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];xn(v,gn({name:"x"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}function L3(v,t){const i=ji(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const f=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];xn(v,gn({name:"zap"},()=>i,{get iconNode(){return f},children:(y,C)=>{var o=Ai(),E=fi(o);Ui(E,t,"default",{}),Gt(y,o)},$$slots:{default:!0}}))}var F3=Jt('<div class="relative animate-in fade-in slide-in-from-top-2 duration-300"><!> <input type="text" placeholder="Display Nickname" class="w-full bg-black/40 border border-white/10 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-zinc-500 focus:outline-none focus:border-emerald-500/50 transition-colors shadow-inner disabled:opacity-50"/></div>'),D3=Jt('<p class="text-red-400 text-xs font-bold text-center animate-pulse"> </p>'),O3=Jt('<div class="w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"></div> Processing...',1),N3=Jt("<!> Sign In",1),B3=Jt("<!> Create Account",1),U3=Jt('<div class="space-y-4"><div class="relative"><!> <input type="text" placeholder="Username" class="w-full bg-black/40 border border-white/10 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-zinc-500 focus:outline-none focus:border-emerald-500/50 transition-colors shadow-inner disabled:opacity-50"/> <p class="text-[9px] text-zinc-500 mt-1 ml-2 uppercase font-bold tracking-tighter">Note: Usernames are case insensitive</p></div> <div class="relative"><!> <input type="password" placeholder="Password" class="w-full bg-black/40 border border-white/10 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-zinc-500 focus:outline-none focus:border-emerald-500/50 transition-colors shadow-inner disabled:opacity-50"/></div> <!></div> <!> <button type="submit" class="w-full py-4 bg-emerald-500 hover:bg-emerald-400 text-black font-black uppercase tracking-widest rounded-xl transition-all shadow-lg shadow-emerald-500/20 active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <div class="flex items-center justify-between px-2"><button type="button" class="text-xs font-black text-zinc-400 hover:text-white uppercase tracking-tighter transition-colors disabled:opacity-50"> </button> <button type="button" class="text-xs font-black text-emerald-400 hover:text-emerald-300 uppercase tracking-tighter transition-colors disabled:opacity-50">Play as Guest</button></div>',1),V3=Jt('<div class="text-center py-4 space-y-6 animate-in zoom-in-95 duration-300"><p class="text-zinc-300 text-sm font-medium px-4">Guest progress is <span class="text-red-400">not saved</span>. Create an account to track your bankroll and shooter stats across sessions!</p> <button type="button" class="w-full py-4 bg-white hover:bg-zinc-200 text-black font-black uppercase tracking-widest rounded-xl transition-all shadow-lg active:scale-[0.98] flex items-center justify-center gap-2"><!> Start Guest Session</button> <button type="button" class="text-xs font-black text-zinc-400 hover:text-white uppercase tracking-tighter transition-colors">Go Back to Login</button></div>'),z3=Jt(`<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-xl"><div class="w-full max-w-md p-8 bg-[#1a4d2e] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8),inset_0_0_30px_rgba(0,0,0,0.4)] relative overflow-hidden group"><div class="absolute -top-24 -left-24 w-48 h-48 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors duration-700"></div> <div class="absolute -bottom-24 -right-24 w-48 h-48 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors duration-700"></div> <div class="text-center mb-8 relative z-10"><div class="inline-flex gap-2 p-4 rounded-2xl bg-black/40 border border-white/10 mb-4 shadow-inner"><img src="https://img.icons8.com/color/96/dice.png" alt="logo" class="w-16 h-16 drop-shadow-lg"/> <img src="https://img.icons8.com/color/96/dice.png" alt="logo" class="w-16 h-16 drop-shadow-lg"/></div> <h1 class="text-3xl font-black text-white tracking-tighter uppercase italic">Bobby's Bubble <span class="text-emerald-400">Craps</span></h1> <p class="text-zinc-400 text-sm font-medium mt-1">Authentic Casino Craps Experience</p></div> <form class="space-y-4 relative z-10"><!></form></div></div>`);function G3(v,t){Ds(t,!1);const i=Zo();let f=Pe(t,"errorMessage",8,""),y=ue("login"),C=ue(""),o=ue(""),E=ue(""),e=ue(""),a=ue(!1);function x(){if(ut(e,""),console.log("handleAuth triggered",{mode:Y(y),username:Y(C),password:Y(o),nickname:Y(E)}),Y(y)==="signup"){if(!Y(C)||!Y(o)||!Y(E)){ut(e,"All fields are required for signup");return}ut(a,!0),i("signup",{username:Y(C),password:Y(o),nickname:Y(E)})}else if(Y(y)==="login"){if(!Y(C)||!Y(o)){ut(e,"Username and password are required");return}console.log("Dispatching login event",{username:Y(C),password:Y(o)}),ut(a,!0),i("login",{username:Y(C),password:Y(o)})}}function u(){console.log("handleGuest triggered"),i("guest")}nn(()=>cn(f()),()=>{f()&&(ut(e,f()),ut(a,!1))}),nn(()=>Y(e),()=>{Y(e)&&ut(a,!1)}),ih(),ir();var r=z3(),h=ht(r),n=xt(ht(h),6),l=ht(n);{var c=d=>{var m=U3(),p=fi(m),g=ht(p),T=ht(g);vC(T,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500",size:18});var S=xt(T,2),w=xt(g,2),A=ht(w);S3(A,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500",size:18});var M=xt(A,2),R=xt(w,2);{var P=U=>{var G=F3(),N=ht(G);w3(N,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500",size:18});var H=xt(N,2);si(()=>H.disabled=Y(a)),am(H,()=>Y(E),V=>ut(E,V)),Gt(U,G)};Ae(R,U=>{Y(y)==="signup"&&U(P)})}var b=xt(p,2);{var F=U=>{var G=D3(),N=ht(G);si(()=>we(N,Y(e))),Gt(U,G)};Ae(b,U=>{Y(e)&&U(F)})}var I=xt(b,2),L=ht(I);{var D=U=>{var G=O3();Gt(U,G)},O=U=>{var G=Ai(),N=fi(G);{var H=$=>{var j=N3(),k=fi(j);C3(k,{size:20}),Gt($,j)},V=$=>{var j=B3(),k=fi(j);P3(k,{size:20}),Gt($,j)};Ae(N,$=>{Y(y)==="login"?$(H):$(V,!1)})}Gt(U,G)};Ae(L,U=>{Y(a)?U(D):U(O,!1)})}var z=xt(I,2),W=ht(z),X=ht(W),_=xt(W,2);si(()=>{S.disabled=Y(a),M.disabled=Y(a),I.disabled=Y(a),W.disabled=Y(a),we(X,Y(y)==="login"?"Don't have an account? Sign Up":"Already have an account? Sign In"),_.disabled=Y(a)}),am(S,()=>Y(C),U=>ut(C,U)),am(M,()=>Y(o),U=>ut(o,U)),$e("click",W,()=>{ut(y,Y(y)==="login"?"signup":"login"),ut(e,"")}),$e("click",_,()=>ut(y,"guest")),Gt(d,m)},s=d=>{var m=V3(),p=xt(ht(m),2),g=ht(p);A3(g,{size:20,fill:"currentColor"});var T=xt(p,2);$e("click",p,u),$e("click",T,()=>ut(y,"login")),Gt(d,m)};Ae(l,d=>{Y(y)!=="guest"?d(c):d(s,!1)})}$e("submit",n,dC(x)),Gt(v,r),Os()}var W3=Jt(`<div class="absolute inset-[-8px] rounded-full bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-ogjsci"></div> <div class="absolute inset-[-25px] rounded-full z-0 pointer-events-none svelte-ogjsci"><div class="absolute inset-0 animate-eclipse-rays svelte-ogjsci" style="background: repeating-conic-gradient(from 0deg, #9eff00 0deg 1deg, transparent 1deg 6deg);
                  mask-image: radial-gradient(circle, black 30%, transparent 75%);
                  -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div> <div class="absolute inset-[-15px] rounded-full bg-[#9eff00]/30 blur-2xl z-0 svelte-ogjsci"></div>`,1),H3=Jt("<div></div>"),_3=Jt("<span> </span>"),X3=Jt('<div class="absolute -top-1 -left-1 z-[100] svelte-ogjsci"><div class="absolute inset-0 rounded-full bg-[#9eff00]/80 blur-[4px] animate-pulse svelte-ogjsci"></div> <div class="relative w-4 h-4 bg-white rounded-sm border border-zinc-400 flex items-center justify-center shadow-[0_2px_4px_rgba(0,0,0,0.5),inset_0_1px_1px_white] svelte-ogjsci"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-2.5 h-2.5 text-zinc-800 svelte-ogjsci"><path fill-rule="evenodd" d="M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z" clip-rule="evenodd" class="svelte-ogjsci"></path></svg></div></div>'),Y3=Jt('<div><!> <div><div class="absolute inset-0 opacity-10 pointer-events-none svelte-ogjsci" style="background: repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.5) 2px, rgba(0,0,0,0.5) 4px);"></div> <div class="absolute inset-0 rounded-full overflow-hidden svelte-ogjsci"></div> <div class="absolute inset-[6px] rounded-full bg-white shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] border border-black/5 flex flex-col items-center justify-center svelte-ogjsci"><!> <span> </span></div> <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-transparent via-white/30 to-white/10 pointer-events-none svelte-ogjsci"></div></div> <!></div>');function z0(v,t){Ds(t,!1);const i=ue();let f=Pe(t,"value",8,1),y=Pe(t,"displayValue",8,null),C=Pe(t,"selected",8,!1),o=Pe(t,"size",8,"w-12 h-12"),E=Pe(t,"fontSize",8,"text-[10px]"),e=Pe(t,"locked",8,!1),a=Pe(t,"betType",8,"");const x={1:{border:"border-zinc-300",accent:"bg-zinc-400"},2:{border:"border-blue-500",accent:"bg-blue-600"},3:{border:"border-amber-300",accent:"bg-amber-400"},5:{border:"border-red-500",accent:"bg-red-600"},10:{border:"border-orange-400",accent:"bg-orange-500"},25:{border:"border-emerald-400",accent:"bg-emerald-500"},50:{border:"border-blue-400",accent:"bg-blue-500"},100:{border:"border-zinc-800",accent:"bg-zinc-900"}};nn(()=>cn(f()),()=>{ut(i,x[f()]||x[1])}),ih(),ir();var u=Y3(),r=ht(u);{var h=S=>{var w=W3();Gt(S,w)};Ae(r,S=>{C()&&S(h)})}var n=xt(r,2),l=xt(ht(n),2);Yi(l,4,()=>Array(3),Xi,(S,w,A)=>{var M=H3();pc(M,`transform: translate(-50%, -50%) rotate(${A*60}deg); clip-path: polygon(0 0, 15% 0, 15% 100%, 0 100%, 85% 0, 100% 0, 100% 100%, 85% 100%);`),si(()=>Xe(M,1,`absolute top-1/2 left-1/2 w-[120%] h-[20%] ${Y(i),_t(()=>Y(i).accent)??""} -translate-x-1/2 -translate-y-1/2 opacity-90`,"svelte-ogjsci")),Gt(S,M)});var c=xt(l,2),s=ht(c);{var d=S=>{var w=_3(),A=ht(w);si(()=>{Xe(w,1,`${cn(a()),_t(()=>a().length>3?"text-[7px]":"text-[9px]")??""} font-black text-zinc-500 uppercase leading-none -mb-0.5`,"svelte-ogjsci"),we(A,a())}),Gt(S,w)};Ae(s,S=>{a()&&S(d)})}var m=xt(s,2),p=ht(m),g=xt(n,2);{var T=S=>{var w=X3();Gt(S,w)};Ae(g,S=>{e()&&S(T)})}si(()=>{Xe(u,1,`relative ${o()??""} rounded-full flex items-center justify-center transition-all duration-300
         ${C()?"scale-110 -translate-y-2":""}`,"svelte-ogjsci"),Xe(n,1,`absolute inset-0 rounded-full bg-white shadow-xl overflow-hidden border-2 ${Y(i),_t(()=>Y(i).border)??""} z-10`,"svelte-ogjsci"),Xe(m,1,`${E()??""} font-black text-zinc-800 drop-shadow-sm tracking-tighter leading-none`,"svelte-ogjsci"),we(p,`$${(y()!==null?y():f())??""}`)}),Gt(v,u),Os()}var k3=Jt('<div class="absolute w-[18%] h-[18%] bg-zinc-900 rounded-full"></div>'),$3=Jt('<div class="w-6 h-6 bg-white rounded-[4px] relative shadow-[0_1px_2px_rgba(0,0,0,0.3)] flex-shrink-0"></div>'),K3=Jt('<span class="text-[10px] font-black text-white drop-shadow-md mb-0.5 italic"> </span>'),j3=Jt('<span class="text-sm font-black text-white italic leading-none uppercase drop-shadow-sm"> </span>'),Z3=Jt('<span class="text-[10px] font-bold text-white/60 uppercase tracking-tighter drop-shadow-sm"> </span> <span class="text-xl font-black text-white italic leading-none drop-shadow-md"> </span>',1),J3=Jt('<div class="flex flex-col items-center justify-center bg-black/50 rounded-lg px-2 py-1 border border-white/10 min-w-[32px] shadow-lg"><span class="text-[8px] font-bold text-white/50 uppercase leading-none mb-0.5 tracking-tighter">Rolls</span> <span> </span></div>'),Q3=Jt('<div><div class="flex gap-1"></div> <div><!> <div class="flex items-baseline gap-1"><!></div></div> <!></div>'),q3=Jt('<span class="text-[10px] font-bold uppercase tracking-widest opacity-60 leading-none mb-1 pointer-events-none"> </span>'),tI=Jt("<span> </span>"),eI=Jt('<span class="text-[9px] font-black mt-1 opacity-30 pointer-events-none"> </span>'),iI=Jt("<!> <!> <!> <!>",1),nI=Jt('<div class="absolute"><!></div>'),sI=Jt('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-10"><div class="relative w-12 h-12 flex items-center justify-center"></div></div>'),rI=Jt('<div class="absolute inset-0 bg-emerald-500/20 animate-pulse pointer-events-none border-2 border-emerald-400"></div>'),aI=Jt('<div class="absolute inset-0 bg-red-500/20 animate-pulse pointer-events-none border-2 border-red-400"></div>'),oI=Jt('<button><div class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"></div> <!> <!> <!> <!> <!></button>');function li(v,t){Ds(t,!1);const i=ue(),f=Zo();let y=Pe(t,"label",8,""),C=Pe(t,"subLabel",8,""),o=Pe(t,"odds",8,""),E=Pe(t,"amount",8,0),e=Pe(t,"className",8,""),a=Pe(t,"isActive",8,!1),x=Pe(t,"color",8,"green"),u=Pe(t,"glow",8,!1),r=Pe(t,"isLocked",8,!1),h=Pe(t,"labelClassName",8,""),n=Pe(t,"id",8,""),l=Pe(t,"type",8,""),c=Pe(t,"dice",24,()=>[]),s=Pe(t,"payout",8,""),d=Pe(t,"hardwayCounter",8,null),m=Pe(t,"reverse",8,!1),p=Pe(t,"status",8,null),g=Pe(t,"hideChips",8,!1),T=Pe(t,"betType",8,"");const S={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]},w={green:a()?"bg-emerald-500/20 border-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.4)]":"bg-emerald-950/40 hover:bg-emerald-900/60 border-emerald-500/20",zinc:"bg-zinc-900/60 hover:bg-zinc-800/80 border-white/10 backdrop-blur-md",blue:"bg-blue-950/40 hover:bg-blue-900/60 border-blue-500/20",red:"bg-red-950/40 hover:bg-red-900/60 border-red-500/20",gold:"bg-amber-950/40 hover:bg-amber-900/60 border-amber-500/20"};function A(_){const U=[];let G=_;const N=[100,50,25,10,5,3,2,1];for(const H of N){const V=Math.floor(G/H);for(let $=0;$<V&&(U.push(H),G-=H,!(U.length>=6));$++);if(U.length>=6)break}return U}function M(_,U){const G=U.split("").reduce(($,j)=>$+j.charCodeAt(0),0)+_*137,N=G*123.456%16-8,H=G*789.012%8-4,V=G*456.789%60-30;return`
            z-index: ${_};
            transform: translate(${N}px, ${-_*5+H}px) rotate(${V}deg);
        `}nn(()=>cn(E()),()=>{ut(i,E()>0?A(E()):[])}),ih(),ir();var R=oI(),P=xt(ht(R),2);Ui(P,t,"top",{});var b=xt(P,2);{var F=_=>{var U=Q3(),G=ht(U);Yi(G,5,c,Xi,(q,ft)=>{var vt=$3();Yi(vt,5,()=>(Y(ft),_t(()=>S[Y(ft)]||[])),Xi,(Tt,ct)=>{var Nt=k3();si(yt=>pc(Nt,`left: ${Y(ct)%3*25+16}%; top: ${yt??""}%`),[()=>(Y(ct),_t(()=>Math.floor(Y(ct)/3)*25+16))]),Gt(Tt,Nt)}),Gt(q,vt)});var N=xt(G,2),H=ht(N);{var V=q=>{var ft=K3(),vt=ht(ft);si(()=>we(vt,s())),Gt(q,ft)};Ae(H,q=>{s()&&q(V)})}var $=xt(H,2),j=ht($);{var k=q=>{var ft=j3(),vt=ht(ft);si(()=>we(vt,y())),Gt(q,ft)},Q=q=>{var ft=Z3(),vt=fi(ft),Tt=ht(vt),ct=xt(vt,2),Nt=ht(ct);si(()=>{we(Tt,(cn(c()),_t(()=>c()[0]===c()[1]?"Hard":""))),we(Nt,(cn(c()),_t(()=>c()[0]+c()[1])))}),Gt(q,ft)};Ae(j,q=>{y()?q(k):q(Q,!1)})}var et=xt(N,2);{var at=q=>{var ft=J3(),vt=xt(ht(ft),2),Tt=ht(vt);si(()=>{Xe(vt,1,`text-sm font-black ${d()>15?"text-red-400":"text-emerald-400"} leading-none drop-shadow-sm`),we(Tt,d())}),Gt(q,ft)};Ae(et,q=>{d()!==null&&q(at)})}si(()=>{Xe(U,1,`flex ${m()?"flex-row-reverse":"flex-row"} items-center gap-2 w-full px-2`),Xe(N,1,`flex-1 flex flex-col ${m()?"items-end":"items-start"} leading-none`)}),Gt(_,U)},I=_=>{var U=iI(),G=fi(U);{var N=Q=>{var et=q3(),at=ht(et);si(()=>we(at,C())),Gt(Q,et)};Ae(G,Q=>{C()&&Q(N)})}var H=xt(G,2);{var V=Q=>{var et=tI(),at=ht(et);si(()=>{Xe(et,1,`font-black leading-none pointer-events-none tracking-tight ${(h()||"text-xl")??""}`),we(at,y())}),Gt(Q,et)};Ae(H,Q=>{y()&&Q(V)})}var $=xt(H,2);Ui($,t,"default",{});var j=xt($,2);{var k=Q=>{var et=eI(),at=ht(et);si(()=>we(at,o())),Gt(Q,et)};Ae(j,Q=>{o()&&Q(k)})}Gt(_,U)};Ae(b,_=>{l()==="dice"?_(F):_(I,!1)})}var L=xt(b,2);Ui(L,t,"bottom",{});var D=xt(L,2);{var O=_=>{var U=sI(),G=ht(U);Yi(G,5,()=>Y(i),Xi,(N,H,V)=>{var $=nI(),j=ht($);{let k=en(()=>(cn(r()),Y(i),_t(()=>r()&&V===Y(i).length-1)));z0(j,{get value(){return Y(H)},size:"w-12 h-12",fontSize:"text-[10px]",get locked(){return Y(k)},get betType(){return T()}})}si(k=>pc($,k),[()=>(cn(n()),_t(()=>M(V,n())))]),Gt(N,$)}),Gt(_,U)};Ae(D,_=>{E()>0&&!g()&&_(O)})}var z=xt(D,2);{var W=_=>{var U=rI();Gt(_,U)},X=_=>{var U=Ai(),G=fi(U);{var N=H=>{var V=aI();Gt(H,V)};Ae(G,H=>{p()==="lose"&&H(N)},!0)}Gt(_,U)};Ae(z,_=>{p()==="win"?_(W):_(X,!1)})}si(()=>{N0(R,"data-bet-id",n()),Xe(R,1,`relative flex flex-col items-center justify-center border transition-all active:scale-95 overflow-hidden ${cn(x()),_t(()=>w[x()])??""} ${u()?"animate-pulse":""} ${e()??""}`)}),$e("click",R,_=>f("click",_)),$e("contextmenu",R,dC(_=>f("contextmenu",_))),Gt(v,R),Os()}function lI(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}var fp={exports:{}},hI=fp.exports,k1;function uI(){return k1||(k1=1,(function(v,t){(function(f,y){v.exports=y()})(hI,()=>(()=>{var i={50792:(o=>{var E=Object.prototype.hasOwnProperty,e="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(e=!1));function x(n,l,c){this.fn=n,this.context=l,this.once=c||!1}function u(n,l,c,s,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new x(c,s||n,d),p=e?e+l:l;return n._events[p]?n._events[p].fn?n._events[p]=[n._events[p],m]:n._events[p].push(m):(n._events[p]=m,n._eventsCount++),n}function r(n,l){--n._eventsCount===0?n._events=new a:delete n._events[l]}function h(){this._events=new a,this._eventsCount=0}h.prototype.eventNames=function(){var l=[],c,s;if(this._eventsCount===0)return l;for(s in c=this._events)E.call(c,s)&&l.push(e?s.slice(1):s);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},h.prototype.listeners=function(l){var c=e?e+l:l,s=this._events[c];if(!s)return[];if(s.fn)return[s.fn];for(var d=0,m=s.length,p=new Array(m);d<m;d++)p[d]=s[d].fn;return p},h.prototype.listenerCount=function(l){var c=e?e+l:l,s=this._events[c];return s?s.fn?1:s.length:0},h.prototype.emit=function(l,c,s,d,m,p){var g=e?e+l:l;if(!this._events[g])return!1;var T=this._events[g],S=arguments.length,w,A;if(T.fn){switch(T.once&&this.removeListener(l,T.fn,void 0,!0),S){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,c),!0;case 3:return T.fn.call(T.context,c,s),!0;case 4:return T.fn.call(T.context,c,s,d),!0;case 5:return T.fn.call(T.context,c,s,d,m),!0;case 6:return T.fn.call(T.context,c,s,d,m,p),!0}for(A=1,w=new Array(S-1);A<S;A++)w[A-1]=arguments[A];T.fn.apply(T.context,w)}else{var M=T.length,R;for(A=0;A<M;A++)switch(T[A].once&&this.removeListener(l,T[A].fn,void 0,!0),S){case 1:T[A].fn.call(T[A].context);break;case 2:T[A].fn.call(T[A].context,c);break;case 3:T[A].fn.call(T[A].context,c,s);break;case 4:T[A].fn.call(T[A].context,c,s,d);break;default:if(!w)for(R=1,w=new Array(S-1);R<S;R++)w[R-1]=arguments[R];T[A].fn.apply(T[A].context,w)}}return!0},h.prototype.on=function(l,c,s){return u(this,l,c,s,!1)},h.prototype.once=function(l,c,s){return u(this,l,c,s,!0)},h.prototype.removeListener=function(l,c,s,d){var m=e?e+l:l;if(!this._events[m])return this;if(!c)return r(this,m),this;var p=this._events[m];if(p.fn)p.fn===c&&(!d||p.once)&&(!s||p.context===s)&&r(this,m);else{for(var g=0,T=[],S=p.length;g<S;g++)(p[g].fn!==c||d&&!p[g].once||s&&p[g].context!==s)&&T.push(p[g]);T.length?this._events[m]=T.length===1?T[0]:T:r(this,m)}return this},h.prototype.removeAllListeners=function(l){var c;return l?(c=e?e+l:l,this._events[c]&&r(this,c)):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,o.exports=h}),11517:((o,E,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38829),x=function(u,r,h,n){for(var l=u[0],c=1;c<u.length;c++){var s=u[c];a(s,l,r,h,n),l=s}return u};o.exports=x}),80318:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(u,r,h,n,l){return a(u,"angle",r,h,n,l)};o.exports=x}),60757:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var u=0;u<e.length;u++){var r=e[u];a.call(x,r)}return e};o.exports=E}),69927:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){x===void 0&&(x=0);for(var u=x;u<e.length;u++){var r=e[u],h=!0;for(var n in a)r[n]!==a[n]&&(h=!1);if(h)return r}return null};o.exports=E}),32265:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){x===void 0&&(x=0);for(var u=e.length-1;u>=x;u--){var r=e[u],h=!0;for(var n in a)r[n]!==a[n]&&(h=!1);if(h)return r}return null};o.exports=E}),94420:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(11879),x=e(60461),u=e(95540),r=e(29747),h=e(41481),n=new h({sys:{queueDepthSort:r,events:{once:r}}},0,0,1,1).setOrigin(0,0),l=function(c,s){s===void 0&&(s={});var d=s.hasOwnProperty("width"),m=s.hasOwnProperty("height"),p=u(s,"width",-1),g=u(s,"height",-1),T=u(s,"cellWidth",1),S=u(s,"cellHeight",T),w=u(s,"position",x.TOP_LEFT),A=u(s,"x",0),M=u(s,"y",0),R=0,P=0,b=p*T,F=g*S;n.setPosition(A,M),n.setSize(T,S);for(var I=0;I<c.length;I++)if(a(c[I],n,w),d&&p===-1)n.x+=T;else if(m&&g===-1)n.y+=S;else if(m&&!d){if(P+=S,n.y+=S,P===F&&(P=0,R+=T,n.y=M,n.x+=T,R===b))break}else if(R+=T,n.x+=T,R===b&&(R=0,P+=S,n.x=A,n.y+=S,P===F))break;return c};o.exports=l}),41721:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(u,r,h,n,l){return a(u,"alpha",r,h,n,l)};o.exports=x}),67285:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(u,r,h,n,l){return a(u,"x",r,h,n,l)};o.exports=x}),9074:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(u,r,h,n,l,c,s){return h==null&&(h=r),a(u,"x",r,n,c,s),a(u,"y",h,l,c,s)};o.exports=x}),75222:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(u,r,h,n,l){return a(u,"y",r,h,n,l)};o.exports=x}),22983:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x===void 0&&(x=0),u===void 0&&(u=6.28);for(var r=x,h=(u-x)/e.length,n=a.x,l=a.y,c=a.radius,s=0;s<e.length;s++)e[s].x=n+c*Math.cos(r),e[s].y=l+c*Math.sin(r),r+=h;return e};o.exports=E}),95253:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x===void 0&&(x=0),u===void 0&&(u=6.28);for(var r=x,h=(u-x)/e.length,n=a.width/2,l=a.height/2,c=0;c<e.length;c++)e[c].x=a.x+n*Math.cos(r),e[c].y=a.y+l*Math.sin(r),r+=h;return e};o.exports=E}),88505:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15258),x=e(26708),u=function(r,h,n){var l;n?l=x(h,n,r.length):l=a(h,r.length);for(var c=0;c<r.length;c++){var s=r[c],d=l[c];s.x=d.x,s.y=d.y}return r};o.exports=u}),41346:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14649),x=e(86003),u=e(49498),r=function(h,n,l){l===void 0&&(l=0);var c=a(n,!1,h.length);l>0?x(c,l):l<0&&u(c,Math.abs(l));for(var s=0;s<h.length;s++)h[s].x=c[s].x,h[s].y=c[s].y;return h};o.exports=r}),11575:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84993),x=function(u,r,h){var n=a({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},h),l=a({x1:r.x2,y1:r.y2,x2:r.x3,y2:r.y3},h),c=a({x1:r.x3,y1:r.y3,x2:r.x1,y2:r.y1},h);n.pop(),l.pop(),c.pop(),n=n.concat(l,c);for(var s=n.length/u.length,d=0,m=0;m<u.length;m++){var p=u[m],g=n[Math.floor(d)];p.x=g.x,p.y=g.y,d+=s}return u};o.exports=x}),29953:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var u=0;u<e.length;u++){var r=e[u];r.anims&&r.anims.play(a,x)}return e};o.exports=E}),66979:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r,h){u===void 0&&(u=0),r===void 0&&(r=0),h===void 0&&(h=1);var n,l=0,c=e.length;if(h===1)for(n=r;n<c;n++)e[n][a]+=x+l*u,l++;else for(n=r;n>=0;n--)e[n][a]+=x+l*u,l++;return e};o.exports=E}),43967:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r,h){u===void 0&&(u=0),r===void 0&&(r=0),h===void 0&&(h=1);var n,l=0,c=e.length;if(h===1)for(n=r;n<c;n++)e[n][a]=x+l*u,l++;else for(n=r;n>=0;n--)e[n][a]=x+l*u,l++;return e};o.exports=E}),88926:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28176),x=function(u,r){for(var h=0;h<u.length;h++)a(r,u[h]);return u};o.exports=x}),33286:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(24820),x=function(u,r){for(var h=0;h<u.length;h++)a(r,u[h]);return u};o.exports=x}),96e3:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65822),x=function(u,r){for(var h=0;h<u.length;h++)a(r,u[h]);return u};o.exports=x}),28789:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26597),x=function(u,r){for(var h=0;h<u.length;h++)a(r,u[h]);return u};o.exports=x}),97154:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90260),x=function(u,r){for(var h=0;h<u.length;h++)a(r,u[h]);return u};o.exports=x}),20510:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(u,r,h,n,l){return a(u,"rotation",r,h,n,l)};o.exports=x}),91051:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1163),x=e(20339),u=function(r,h,n){for(var l=h.x,c=h.y,s=0;s<r.length;s++){var d=r[s];a(d,l,c,n,Math.max(1,x(d.x,d.y,l,c)))}return r};o.exports=u}),76332:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1163),x=function(u,r,h,n){var l=r.x,c=r.y;if(n===0)return u;for(var s=0;s<u.length;s++)a(u[s],l,c,h,n);return u};o.exports=x}),61619:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(u,r,h,n,l){return a(u,"scaleX",r,h,n,l)};o.exports=x}),94868:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(u,r,h,n,l,c,s){return h==null&&(h=r),a(u,"scaleX",r,n,c,s),a(u,"scaleY",h,l,c,s)};o.exports=x}),95532:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),x=function(u,r,h,n,l){return a(u,"scaleY",r,h,n,l)};o.exports=x}),8689:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l){return a(u,"alpha",r,h,n,l)};o.exports=x}),2645:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n){return a(u,"blendMode",r,0,h,n)};o.exports=x}),32372:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l){return a(u,"depth",r,h,n,l)};o.exports=x}),85373:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var u=0;u<e.length;u++)e[u].setInteractive(a,x);return e};o.exports=E}),81583:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l,c,s){return h==null&&(h=r),a(u,"originX",r,n,c,s),a(u,"originY",h,l,c,s),u.forEach(function(d){d.updateDisplayOrigin()}),u};o.exports=x}),79939:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l){return a(u,"rotation",r,h,n,l)};o.exports=x}),2699:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l,c,s){return h==null&&(h=r),a(u,"scaleX",r,n,c,s),a(u,"scaleY",h,l,c,s)};o.exports=x}),98739:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l){return a(u,"scaleX",r,h,n,l)};o.exports=x}),98476:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l){return a(u,"scaleY",r,h,n,l)};o.exports=x}),6207:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l,c,s){return h==null&&(h=r),a(u,"scrollFactorX",r,n,c,s),a(u,"scrollFactorY",h,l,c,s)};o.exports=x}),6607:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l){return a(u,"scrollFactorX",r,h,n,l)};o.exports=x}),72248:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l){return a(u,"scrollFactorY",r,h,n,l)};o.exports=x}),14036:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r){for(var h=0;h<e.length;h++)e[h].setTint(a,x,u,r);return e};o.exports=E}),50159:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n){return a(u,"visible",r,0,h,n)};o.exports=x}),77597:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l){return a(u,"x",r,h,n,l)};o.exports=x}),83194:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l,c,s){return h==null&&(h=r),a(u,"x",r,n,c,s),a(u,"y",h,l,c,s)};o.exports=x}),67678:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),x=function(u,r,h,n,l){return a(u,"y",r,h,n,l)};o.exports=x}),35850:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n,l){n===void 0&&(n=0),l===void 0&&(l=new a);var c,s,d=u.length;if(d===1)c=u[0].x,s=u[0].y,u[0].x=r,u[0].y=h;else{var m=1,p=0;n===0&&(p=d-1,m=d-2),c=u[p].x,s=u[p].y,u[p].x=r,u[p].y=h;for(var g=0;g<d;g++)if(!(m>=d||m===-1)){var T=u[m],S=T.x,w=T.y;T.x=c,T.y=s,c=S,s=w,n===0?m--:m++}}return l.x=c,l.y=s,l};o.exports=x}),8628:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33680),x=function(u){return a(u)};o.exports=x}),21837:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7602),x=function(u,r,h,n,l){l===void 0&&(l=!1);var c=Math.abs(n-h)/u.length,s;if(l)for(s=0;s<u.length;s++)u[s][r]+=a(s*c,h,n);else for(s=0;s<u.length;s++)u[s][r]=a(s*c,h,n);return u};o.exports=x}),21910:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54261),x=function(u,r,h,n,l){l===void 0&&(l=!1);var c=Math.abs(n-h)/u.length,s;if(l)for(s=0;s<u.length;s++)u[s][r]+=a(s*c,h,n);else for(s=0;s<u.length;s++)u[s][r]=a(s*c,h,n);return u};o.exports=x}),62054:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r){if(r===void 0&&(r=!1),e.length===0)return e;if(e.length===1)return r?e[0][a]+=(u+x)/2:e[0][a]=(u+x)/2,e;var h=Math.abs(u-x)/(e.length-1),n;if(r)for(n=0;n<e.length;n++)e[n][a]+=n*h+x;else for(n=0;n<e.length;n++)e[n][a]=n*h+x;return e};o.exports=E}),79815:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=0;a<e.length;a++)e[a].visible=!e[a].visible;return e};o.exports=E}),39665:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),x=function(u,r,h){h===void 0&&(h=0);for(var n=0;n<u.length;n++){var l=u[n];l.x=a(l.x,r.left-h,r.right+h),l.y=a(l.y,r.top-h,r.bottom+h)}return u};o.exports=x}),61061:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AlignTo:e(11517),Angle:e(80318),Call:e(60757),GetFirst:e(69927),GetLast:e(32265),GridAlign:e(94420),IncAlpha:e(41721),IncX:e(67285),IncXY:e(9074),IncY:e(75222),PlaceOnCircle:e(22983),PlaceOnEllipse:e(95253),PlaceOnLine:e(88505),PlaceOnRectangle:e(41346),PlaceOnTriangle:e(11575),PlayAnimation:e(29953),PropertyValueInc:e(66979),PropertyValueSet:e(43967),RandomCircle:e(88926),RandomEllipse:e(33286),RandomLine:e(96e3),RandomRectangle:e(28789),RandomTriangle:e(97154),Rotate:e(20510),RotateAround:e(91051),RotateAroundDistance:e(76332),ScaleX:e(61619),ScaleXY:e(94868),ScaleY:e(95532),SetAlpha:e(8689),SetBlendMode:e(2645),SetDepth:e(32372),SetHitArea:e(85373),SetOrigin:e(81583),SetRotation:e(79939),SetScale:e(2699),SetScaleX:e(98739),SetScaleY:e(98476),SetScrollFactor:e(6207),SetScrollFactorX:e(6607),SetScrollFactorY:e(72248),SetTint:e(14036),SetVisible:e(50159),SetX:e(77597),SetXY:e(83194),SetY:e(67678),ShiftPosition:e(35850),Shuffle:e(8628),SmootherStep:e(21910),SmoothStep:e(21837),Spread:e(62054),ToggleVisible:e(79815),WrapInRectangle:e(39665)}}),42099:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(74943),r=e(81957),h=e(41138),n=e(35154),l=e(90126),c=new x({initialize:function(d,m,p){this.manager=d,this.key=m,this.type="frame",this.frames=this.getFrames(d.textureManager,n(p,"frames",[]),n(p,"defaultTextureKey",null),n(p,"sortFrames",!0)),this.frameRate=n(p,"frameRate",null),this.duration=n(p,"duration",null),this.msPerFrame,this.skipMissedFrames=n(p,"skipMissedFrames",!0),this.delay=n(p,"delay",0),this.repeat=n(p,"repeat",0),this.repeatDelay=n(p,"repeatDelay",0),this.yoyo=n(p,"yoyo",!1),this.showBeforeDelay=n(p,"showBeforeDelay",!1),this.showOnStart=n(p,"showOnStart",!1),this.hideOnComplete=n(p,"hideOnComplete",!1),this.randomFrame=n(p,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(u.PAUSE_ALL,this.pause,this),this.manager.on(u.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(s,d,m,p){m===null&&p===null?(s.frameRate=24,s.duration=24/d*1e3):m&&p===null?(s.duration=m,s.frameRate=d/(m/1e3)):(s.frameRate=p,s.duration=d/p*1e3),s.msPerFrame=1e3/s.frameRate},addFrame:function(s){return this.addFrameAt(this.frames.length,s)},addFrameAt:function(s,d){var m=this.getFrames(this.manager.textureManager,d);if(m.length>0){if(s===0)this.frames=m.concat(this.frames);else if(s===this.frames.length)this.frames=this.frames.concat(m);else{var p=this.frames.slice(0,s),g=this.frames.slice(s);this.frames=p.concat(m,g)}this.updateFrameSequence()}return this},checkFrame:function(s){return s>=0&&s<this.frames.length},getFirstTick:function(s){s.accumulator=0,s.nextTick=s.frameRate===s.currentAnim.frameRate&&s.currentFrame.duration||s.msPerFrame},getFrameAt:function(s){return this.frames[s]},getFrames:function(s,d,m,p){p===void 0&&(p=!0);var g=[],T,S,w=1,A,M;if(typeof d=="string"){if(M=d,!s.exists(M))return console.warn('Texture "%s" not found',M),g;var R=s.get(M),P=R.getFrameNames();p&&l(P),d=[],P.forEach(function(O){d.push({key:M,frame:O})})}if(!Array.isArray(d)||d.length===0)return g;for(A=0;A<d.length;A++){var b=d[A],F=n(b,"key",m);if(F){var I=n(b,"frame",0),L=s.getFrame(F,I);if(!L){console.warn('Texture "%s" not found',F);continue}S=new h(F,I,w,L),S.duration=n(b,"duration",0),S.isFirst=!T,T&&(T.nextFrame=S,S.prevFrame=T),g.push(S),T=S,w++}}if(g.length>0){S.isLast=!0,S.nextFrame=g[0],g[0].prevFrame=S;var D=1/(g.length-1);for(A=0;A<g.length;A++)g[A].progress=A*D}return g},getNextTick:function(s){s.accumulator-=s.nextTick,s.nextTick=s.frameRate===s.currentAnim.frameRate&&s.currentFrame.duration||s.msPerFrame},getFrameByProgress:function(s){return s=a(s,0,1),r(s,this.frames,"progress")},nextFrame:function(s){var d=s.currentFrame;d.isLast?s.yoyo?this.handleYoyoFrame(s,!1):s.repeatCounter>0?s.inReverse&&s.forward?s.forward=!1:this.repeatAnimation(s):s.complete():this.updateAndGetNextTick(s,d.nextFrame)},handleYoyoFrame:function(s,d){if(d||(d=!1),s.inReverse===!d&&s.repeatCounter>0){(s.repeatDelay===0||s.pendingRepeat)&&(s.forward=d),this.repeatAnimation(s);return}if(s.inReverse!==d&&s.repeatCounter===0){s.complete();return}s.forward=d;var m=d?s.currentFrame.nextFrame:s.currentFrame.prevFrame;this.updateAndGetNextTick(s,m)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(s){var d=s.currentFrame;d.isFirst?s.yoyo?this.handleYoyoFrame(s,!0):s.repeatCounter>0?s.inReverse&&!s.forward?this.repeatAnimation(s):(s.forward=!0,this.repeatAnimation(s)):s.complete():this.updateAndGetNextTick(s,d.prevFrame)},updateAndGetNextTick:function(s,d){s.setCurrentFrame(d),this.getNextTick(s)},removeFrame:function(s){var d=this.frames.indexOf(s);return d!==-1&&this.removeFrameAt(d),this},removeFrameAt:function(s){return this.frames.splice(s,1),this.updateFrameSequence(),this},repeatAnimation:function(s){if(s._pendingStop===2){if(s._pendingStopValue===0)return s.stop();s._pendingStopValue--}s.repeatDelay>0&&!s.pendingRepeat?(s.pendingRepeat=!0,s.accumulator-=s.nextTick,s.nextTick+=s.repeatDelay):(s.repeatCounter--,s.forward?s.setCurrentFrame(s.currentFrame.nextFrame):s.setCurrentFrame(s.currentFrame.prevFrame),s.isPlaying&&(this.getNextTick(s),s.handleRepeat()))},toJSON:function(){var s={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(d){s.frames.push(d.toJSON())}),s},updateFrameSequence:function(){for(var s=this.frames.length,d=1/(s-1),m,p=0;p<s;p++)m=this.frames[p],m.index=p+1,m.isFirst=!1,m.isLast=!1,m.progress=p*d,p===0?(m.isFirst=!0,s===1?(m.isLast=!0,m.nextFrame=m,m.prevFrame=m):(m.isLast=!1,m.prevFrame=this.frames[s-1],m.nextFrame=this.frames[p+1])):p===s-1&&s>1?(m.isLast=!0,m.prevFrame=this.frames[s-2],m.nextFrame=this.frames[0]):s>1&&(m.prevFrame=this.frames[p-1],m.nextFrame=this.frames[p+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(u.PAUSE_ALL,this.pause,this),this.manager.off(u.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var s=0;s<this.frames.length;s++)this.frames[s].destroy();this.frames=[],this.manager=null}});o.exports=c}),41138:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n,l,c){c===void 0&&(c=!1),this.textureKey=r,this.textureFrame=h,this.index=n,this.frame=l,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});o.exports=x}),60848:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42099),x=e(83419),u=e(90330),r=e(50792),h=e(74943),n=e(8443),l=e(95540),c=e(35154),s=e(36383),d=e(20283),m=e(41836),p=new x({Extends:r,initialize:function(T){r.call(this),this.game=T,this.textureManager=null,this.globalTimeScale=1,this.anims=new u,this.mixes=new u,this.paused=!1,this.name="AnimationManager",T.events.once(n.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(n.DESTROY,this.destroy,this)},addMix:function(g,T,S){var w=this.anims,A=this.mixes,M=typeof g=="string"?g:g.key,R=typeof T=="string"?T:T.key;if(w.has(M)&&w.has(R)){var P=A.get(M);P||(P={}),P[R]=S,A.set(M,P)}return this},removeMix:function(g,T){var S=this.mixes,w=typeof g=="string"?g:g.key,A=S.get(w);if(A)if(T){var M=typeof T=="string"?T:T.key;A.hasOwnProperty(M)&&delete A[M]}else T||S.delete(w);return this},getMix:function(g,T){var S=this.mixes,w=typeof g=="string"?g:g.key,A=typeof T=="string"?T:T.key,M=S.get(w);return M&&M.hasOwnProperty(A)?M[A]:0},add:function(g,T){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(T.key=g,this.anims.set(g,T),this.emit(h.ADD_ANIMATION,g,T),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,T,S){var w=[],A=this.game.cache.json.get(g);if(!A)return console.warn("No Aseprite data found for: "+g),w;var M=this,R=c(A,"meta",null),P=c(A,"frames",null);if(R&&P){var b=c(R,"frameTags",[]);b.forEach(function(F){var I=[],L=l(F,"name",null),D=l(F,"from",0),O=l(F,"to",0),z=l(F,"direction","forward");if(L&&(!T||T&&T.indexOf(L)>-1)){for(var W=0,X=D;X<=O;X++){var _=X.toString(),U=P[_];if(U){var G=l(U,"duration",s.MAX_SAFE_INTEGER);I.push({key:g,frame:_,duration:G}),W+=G}}z==="reverse"&&(I=I.reverse());var N={key:L,frames:I,duration:W,yoyo:z==="pingpong"},H;S?S.anims&&(H=S.anims.create(N)):H=M.create(N),H&&w.push(H)}})}return w},create:function(g){var T=g.key,S=!1;return T&&(S=this.get(T),S?console.warn("AnimationManager key already exists: "+T):(S=new a(this,T,g),this.anims.set(T,S),this.emit(h.ADD_ANIMATION,T,S))),S},fromJSON:function(g,T){T===void 0&&(T=!1),T&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var S=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var w=0;w<g.anims.length;w++)S.push(this.create(g.anims[w]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&S.push(this.create(g));return S},generateFrameNames:function(g,T){var S=c(T,"prefix",""),w=c(T,"start",0),A=c(T,"end",0),M=c(T,"suffix",""),R=c(T,"zeroPad",0),P=c(T,"outputArray",[]),b=c(T,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),P;var F=this.textureManager.get(g);if(!F)return P;var I;if(T)for(b||(b=d(w,A)),I=0;I<b.length;I++){var L=S+m(b[I],R,"0",1)+M;F.has(L)?P.push({key:g,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,g)}else for(b=F.getFrameNames(),I=0;I<b.length;I++)P.push({key:g,frame:b[I]});return P},generateFrameNumbers:function(g,T){var S=c(T,"start",0),w=c(T,"end",-1),A=c(T,"first",!1),M=c(T,"outputArray",[]),R=c(T,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),M;var P=this.textureManager.get(g);if(!P)return M;A&&P.has(A)&&M.push({key:g,frame:A}),R||(w===-1&&(w=P.frameTotal-2),R=d(S,w));for(var b=0;b<R.length;b++){var F=R[b];P.has(F)?M.push({key:g,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,g)}return M},get:function(g){return this.anims.get(g)},getAnimsFromTexture:function(g){for(var T=this.textureManager.get(g),S=T.key,w=this.anims.getArray(),A=[],M=0;M<w.length;M++)for(var R=w[M],P=R.frames,b=0;b<P.length;b++)if(P[b].textureKey===S){A.push(R.key);break}return A},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(g,T){Array.isArray(T)||(T=[T]);for(var S=0;S<T.length;S++)T[S].anims.play(g);return this},staggerPlay:function(g,T,S,w){S===void 0&&(S=0),w===void 0&&(w=!0),Array.isArray(T)||(T=[T]);var A=T.length;w||A--;for(var M=0;M<T.length;M++){var R=S<0?Math.abs(S)*(A-M):S*M;T[M].anims.playAfterDelay(g,R)}return this},remove:function(g){var T=this.get(g);return T&&(this.emit(h.REMOVE_ANIMATION,g,T),this.anims.delete(g),this.removeMix(g)),T},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(g){var T={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?T.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(S,w){T.anims.push(w.toJSON())}),T},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});o.exports=p}),9674:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42099),x=e(30976),u=e(83419),r=e(90330),h=e(74943),n=e(95540),l=new u({initialize:function(s){this.parent=s,this.animationManager=s.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(c){var s=this.parent;if(c===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,s;Array.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var m=c[d];this.nextAnim?this.nextAnimsQueue.push(m):this.nextAnim=m}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(c){this.isPlaying&&this.stop();var s=this.animationManager,d=typeof c=="string"?c:n(c,"key",null),m=this.exists(d)?this.get(d):s.get(d);if(!m)console.warn("Missing animation: "+d);else{this.currentAnim=m;var p=m.getTotalFrames(),g=n(c,"frameRate",m.frameRate),T=n(c,"duration",m.duration);m.calculateDuration(this,p,T,g),this.delay=n(c,"delay",m.delay),this.repeat=n(c,"repeat",m.repeat),this.repeatDelay=n(c,"repeatDelay",m.repeatDelay),this.yoyo=n(c,"yoyo",m.yoyo),this.showBeforeDelay=n(c,"showBeforeDelay",m.showBeforeDelay),this.showOnStart=n(c,"showOnStart",m.showOnStart),this.hideOnComplete=n(c,"hideOnComplete",m.hideOnComplete),this.skipMissedFrames=n(c,"skipMissedFrames",m.skipMissedFrames),this.randomFrame=n(c,"randomFrame",m.randomFrame),this.timeScale=n(c,"timeScale",this.timeScale);var S=n(c,"startFrame",0);S>p&&(S=0),this.randomFrame&&(S=x(0,p-1));var w=m.frames[S];S===0&&!this.forward&&(w=m.getLastFrame()),this.currentFrame=w}return this.parent},pause:function(c){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),c!==void 0&&this.setCurrentFrame(c),this.parent},resume:function(c){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),c!==void 0&&this.setCurrentFrame(c),this.parent},playAfterDelay:function(c,s){if(!this.isPlaying)this.delayCounter=s,this.play(c,!0);else{var d=this.nextAnim,m=this.nextAnimsQueue;d&&m.unshift(d),this.nextAnim=c,this._pendingStop=1,this._pendingStopValue=s}return this.parent},playAfterRepeat:function(c,s){if(s===void 0&&(s=1),!this.isPlaying)this.play(c);else{var d=this.nextAnim,m=this.nextAnimsQueue;d&&m.unshift(d),this.repeatCounter!==-1&&s>this.repeatCounter&&(s=this.repeatCounter),this.nextAnim=c,this._pendingStop=2,this._pendingStopValue=s}return this.parent},play:function(c,s){s===void 0&&(s=!1);var d=this.currentAnim,m=this.parent,p=typeof c=="string"?c:c.key;if(s&&this.isPlaying&&d.key===p)return m;if(d&&this.isPlaying){var g=this.animationManager.getMix(d.key,c);if(g>0)return this.playAfterDelay(c,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(c)},playReverse:function(c,s){s===void 0&&(s=!1);var d=typeof c=="string"?c:c.key;return s&&this.isPlaying&&this.currentAnim.key===d?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(c))},startAnimation:function(c){this.load(c);var s=this.currentAnim,d=this.parent;return s&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,s.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),d},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(c,s){var d=this.currentAnim;if(d){var m=this.currentFrame,p=this.parent,g=m.textureFrame;p.emit(c,d,m,p,g),s&&p.emit(s+d.key,d,m,p,g)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var c=this.currentFrame;if(!c)return 0;var s=c.progress;return this.inReverse&&(s*=-1),s},setProgress:function(c){return this.forward||(c=1-c),this.setCurrentFrame(this.currentAnim.getFrameByProgress(c)),this.parent},setRepeat:function(c){return this.repeatCounter=c===-1?Number.MAX_VALUE:c,this.parent},globalRemove:function(c,s){s===void 0&&(s=this.currentAnim),this.isPlaying&&s.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(c,s){c===void 0&&(c=!1),s===void 0&&(s=!1);var d=this.currentAnim,m=this.parent;return d?(s&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),d.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!c,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(d.frames[0]),this.parent):m},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var c=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(c)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var c=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(c)}return this.parent},stopAfterDelay:function(c){return this._pendingStop=1,this._pendingStopValue=c,this.parent},stopAfterRepeat:function(c){return c===void 0&&(c=1),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=c,this.parent},stopOnFrame:function(c){return this._pendingStop=3,this._pendingStopValue=c,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(c,s){var d=this.currentAnim;if(!(!this.isPlaying||!d||d.paused)){if(this.accumulator+=s*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=s,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?d.nextFrame(this):d.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var m=0;do this.forward?d.nextFrame(this):d.previousFrame(this),m++;while(this.isPlaying&&this.accumulator>this.nextTick&&m<60)}}},setCurrentFrame:function(c){var s=this.parent;return this.currentFrame=c,s.texture=c.frame.texture,s.frame=c.frame,s.isCropped&&s.frame.updateCropUVs(s._crop,s.flipX,s.flipY),c.setAlpha&&(s.alpha=c.alpha),s.setSizeToFrame(),s._originComponent&&(c.frame.customPivot?s.setOrigin(c.frame.pivotX,c.frame.pivotY):s.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===c&&this.stop()),s},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(c){return this.anims?this.anims.get(c):null},exists:function(c){return this.anims?this.anims.has(c):!1},create:function(c){var s=c.key,d=!1;return s&&(d=this.get(s),d?console.warn("Animation key already exists: "+s):(d=new a(this,s,c),this.anims||(this.anims=new r),this.anims.set(s,d))),d},createFromAseprite:function(c,s){return this.animationManager.createFromAseprite(c,s,this.parent)},generateFrameNames:function(c,s){return this.animationManager.generateFrameNames(c,s)},generateFrameNumbers:function(c,s){return this.animationManager.generateFrameNumbers(c,s)},remove:function(c){var s=this.get(c);return s&&(this.currentAnim===s&&this.stop(),this.anims.delete(c)),s},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});o.exports=l}),57090:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"}),25312:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete"}),89580:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete-"}),52860:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrepeat"}),63850:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrestart"}),99085:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstart"}),28087:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstop"}),1794:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationupdate"}),52562:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"}),57953:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"}),68339:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"}),74943:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD_ANIMATION:e(57090),ANIMATION_COMPLETE:e(25312),ANIMATION_COMPLETE_KEY:e(89580),ANIMATION_REPEAT:e(52860),ANIMATION_RESTART:e(63850),ANIMATION_START:e(99085),ANIMATION_STOP:e(28087),ANIMATION_UPDATE:e(1794),PAUSE_ALL:e(52562),REMOVE_ANIMATION:e(57953),RESUME_ALL:e(68339)}}),60421:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Animation:e(42099),AnimationFrame:e(41138),AnimationManager:e(60848),AnimationState:e(9674),Events:e(74943)}}),2161:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(90330),u=e(50792),r=e(24736),h=new a({initialize:function(){this.entries=new x,this.events=new u},add:function(n,l){return this.entries.set(n,l),this.events.emit(r.ADD,this,n,l),this},has:function(n){return this.entries.has(n)},exists:function(n){return this.entries.has(n)},get:function(n){return this.entries.get(n)},remove:function(n){var l=this.get(n);return l&&(this.entries.delete(n),this.events.emit(r.REMOVE,this,n,l.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});o.exports=h}),24047:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2161),x=e(83419),u=e(8443),r=new x({initialize:function(n){this.game=n,this.binary=new a,this.bitmapFont=new a,this.json=new a,this.physics=new a,this.shader=new a,this.audio=new a,this.video=new a,this.text=new a,this.html=new a,this.obj=new a,this.tilemap=new a,this.xml=new a,this.custom={},this.game.events.once(u.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new a),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],n=0;n<h.length;n++)this[h[n]].destroy(),this[h[n]]=null;for(var l in this.custom)this.custom[l].destroy();this.custom=null,this.game=null}});o.exports=r}),51464:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"}),59261:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"}),24736:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:e(51464),REMOVE:e(59261)}}),83388:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BaseCache:e(2161),CacheManager:e(24047),Events:e(24736)}}),71911:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(39506),r=e(50792),h=e(19715),n=e(87841),l=e(61340),c=e(80333),s=e(26099),d=new a({Extends:r,Mixins:[x.AlphaSingle,x.Visible],initialize:function(p,g,T,S){p===void 0&&(p=0),g===void 0&&(g=0),T===void 0&&(T=0),S===void 0&&(S=0),r.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new n,this.dirty=!0,this._x=p,this._y=g,this._width=T,this._height=S,this._bounds=new n,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new l,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new s(T/2,S/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(m){this.renderList.push(m)},setOrigin:function(m,p){return m===void 0&&(m=.5),p===void 0&&(p=m),this.originX=m,this.originY=p,this},getScroll:function(m,p,g){g===void 0&&(g=new s);var T=this.width*.5,S=this.height*.5;return g.x=m-T,g.y=p-S,this.useBounds&&(g.x=this.clampX(g.x),g.y=this.clampY(g.y)),g},centerOnX:function(m){var p=this.width*.5;return this.midPoint.x=m,this.scrollX=m-p,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(m){var p=this.height*.5;return this.midPoint.y=m,this.scrollY=m-p,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(m,p){return this.centerOnX(m),this.centerOnY(p),this},centerToBounds:function(){if(this.useBounds){var m=this._bounds,p=this.width*.5,g=this.height*.5;this.midPoint.set(m.centerX,m.centerY),this.scrollX=m.centerX-p,this.scrollY=m.centerY-g}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(m){if(this.disableCull)return m;var p=this.matrix.matrix,g=p[0],T=p[1],S=p[2],w=p[3],A=g*w-T*S;if(!A)return m;var M=p[4],R=p[5],P=this.scrollX,b=this.scrollY,F=this.width,I=this.height,L=this.y,D=L+I,O=this.x,z=O+F,W=this.culledObjects,X=m.length;A=1/A,W.length=0;for(var _=0;_<X;++_){var U=m[_];if(!U.hasOwnProperty("width")||U.parentContainer){W.push(U);continue}var G=U.width,N=U.height,H=U.x-P*U.scrollFactorX-G*U.originX,V=U.y-b*U.scrollFactorY-N*U.originY,$=H*g+V*S+M,j=H*T+V*w+R,k=(H+G)*g+(V+N)*S+M,Q=(H+G)*T+(V+N)*w+R;k>O&&$<z&&Q>L&&j<D&&W.push(U)}return W},getWorldPoint:function(m,p,g){g===void 0&&(g=new s);var T=this.matrix.matrix,S=T[0],w=T[1],A=T[2],M=T[3],R=T[4],P=T[5],b=S*M-w*A;if(!b)return g.x=m,g.y=p,g;b=1/b;var F=M*b,I=-w*b,L=-A*b,D=S*b,O=(A*P-M*R)*b,z=(w*R-S*P)*b,W=Math.cos(this.rotation),X=Math.sin(this.rotation),_=this.zoomX,U=this.zoomY,G=this.scrollX,N=this.scrollY,H=m+(G*W-N*X)*_,V=p+(G*X+N*W)*U;return g.x=H*F+V*L+O,g.y=H*I+V*D+z,g},ignore:function(m){var p=this.id;Array.isArray(m)||(m=[m]);for(var g=0;g<m.length;g++){var T=m[g];Array.isArray(T)?this.ignore(T):T.isParent?this.ignore(T.getChildren()):T.cameraFilter|=p}return this},clampX:function(m){var p=this._bounds,g=this.displayWidth,T=p.x+(g-this.width)/2,S=Math.max(T,T+p.width-g);return m<T?m=T:m>S&&(m=S),m},clampY:function(m){var p=this._bounds,g=this.displayHeight,T=p.y+(g-this.height)/2,S=Math.max(T,T+p.height-g);return m<T?m=T:m>S&&(m=S),m},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(m){return m===void 0&&(m=0),this.rotation=u(m),this},setBackgroundColor:function(m){return m===void 0&&(m="rgba(0,0,0,0)"),this.backgroundColor=c(m),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(m,p,g,T,S){return S===void 0&&(S=!1),this._bounds.setTo(m,p,g,T),this.dirty=!0,this.useBounds=!0,S?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(m){m===void 0&&(m=new n);var p=this._bounds;return m.setTo(p.x,p.y,p.width,p.height),m},setName:function(m){return m===void 0&&(m=""),this.name=m,this},setPosition:function(m,p){return p===void 0&&(p=m),this.x=m,this.y=p,this},setRotation:function(m){return m===void 0&&(m=0),this.rotation=m,this},setRoundPixels:function(m){return this.roundPixels=m,this},setScene:function(m,p){p===void 0&&(p=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=m,this.isSceneCamera=p;var g=m.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(m,p){return p===void 0&&(p=m),this.scrollX=m,this.scrollY=p,this},setSize:function(m,p){return p===void 0&&(p=m),this.width=m,this.height=p,this},setViewport:function(m,p,g,T){return this.x=m,this.y=p,this.width=g,this.height=T,this},setZoom:function(m,p){return m===void 0&&(m=1),p===void 0&&(p=m),m===0&&(m=.001),p===0&&(p=.001),this.zoomX=m,this.zoomY=p,this},setMask:function(m,p){return p===void 0&&(p=!0),this.mask=m,this._maskCamera=p?this.cameraManager.default:this,this},clearMask:function(m){return m===void 0&&(m=!1),m&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var m={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(m.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),m},update:function(){},setIsSceneCamera:function(m){return this.isSceneCamera=m,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var m=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,p=this.sceneManager;m&&!this._customViewport?p.customViewports++:!m&&this._customViewport&&p.customViewports--,this.dirty=!0,this._customViewport=m}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(m){this._x=m,this.updateSystem()}},y:{get:function(){return this._y},set:function(m){this._y=m,this.updateSystem()}},width:{get:function(){return this._width},set:function(m){this._width=m,this.updateSystem()}},height:{get:function(){return this._height},set:function(m){this._height=m,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(m){m!==this._scrollX&&(this._scrollX=m,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(m){m!==this._scrollY&&(this._scrollY=m,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(m){this._zoomX=m,this._zoomY=m,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(m){this._zoomX=m,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(m){this._zoomY=m,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(m){this._rotation=m,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});o.exports=d}),38058:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71911),x=e(67502),u=e(45319),r=e(83419),h=e(31401),n=e(20052),l=e(19715),c=e(28915),s=e(87841),d=e(26099),m=new r({Extends:a,Mixins:[h.PostPipeline],initialize:function(g,T,S,w){a.call(this,g,T,S,w),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new d(1,1),this.followOffset=new d,this.deadzone=null,this._follow=null},setDeadzone:function(p,g){if(p===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=p,this.deadzone.height=g):this.deadzone=new s(0,0,p,g),this._follow){var T=this.width/2,S=this.height/2,w=this._follow.x-this.followOffset.x,A=this._follow.y-this.followOffset.y;this.midPoint.set(w,A),this.scrollX=w-T,this.scrollY=A-S}x(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(p,g,T,S,w,A){return this.fadeEffect.start(!1,p,g,T,S,!0,w,A)},fadeOut:function(p,g,T,S,w,A){return this.fadeEffect.start(!0,p,g,T,S,!0,w,A)},fadeFrom:function(p,g,T,S,w,A,M){return this.fadeEffect.start(!1,p,g,T,S,w,A,M)},fade:function(p,g,T,S,w,A,M){return this.fadeEffect.start(!0,p,g,T,S,w,A,M)},flash:function(p,g,T,S,w,A,M){return this.flashEffect.start(p,g,T,S,w,A,M)},shake:function(p,g,T,S,w){return this.shakeEffect.start(p,g,T,S,w)},pan:function(p,g,T,S,w,A,M){return this.panEffect.start(p,g,T,S,w,A,M)},rotateTo:function(p,g,T,S,w,A,M){return this.rotateToEffect.start(p,g,T,S,w,A,M)},zoomTo:function(p,g,T,S,w,A){return this.zoomEffect.start(p,g,T,S,w,A)},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,T=p*.5,S=g*.5,w=this.zoomX,A=this.zoomY,M=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(w)&&Number.isInteger(A);var R=p*this.originX,P=g*this.originY,b=this._follow,F=this.deadzone,I=this.scrollX,L=this.scrollY;F&&x(F,this.midPoint.x,this.midPoint.y);var D=!1;if(b&&!this.panEffect.isRunning){var O=this.lerp,z=b.x-this.followOffset.x,W=b.y-this.followOffset.y;F?(z<F.x?I=c(I,I-(F.x-z),O.x):z>F.right&&(I=c(I,I+(z-F.right),O.x)),W<F.y?L=c(L,L-(F.y-W),O.y):W>F.bottom&&(L=c(L,L+(W-F.bottom),O.y))):(I=c(I,z-R,O.x),L=c(L,W-P,O.y)),D=!0}this.roundPixels&&(I=Math.floor(I),L=Math.floor(L)),this.useBounds&&(I=this.clampX(I),L=this.clampY(L)),this.scrollX=I,this.scrollY=L;var X=I+T,_=L+S;this.midPoint.set(X,_);var U=Math.floor(p/w+.5),G=Math.floor(g/A+.5),N=Math.floor(X-U/2+.5),H=Math.floor(_-G/2+.5);this.worldView.setTo(N,H,U,G),M.applyITRS(Math.floor(this.x+R+.5),Math.floor(this.y+P+.5),this.rotation,w,A),M.translate(-R,-P),this.shakeEffect.preRender(),D&&this.emit(l.FOLLOW_UPDATE,this,b)},setLerp:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),this.lerp.set(p,g),this},setFollowOffset:function(p,g){return p===void 0&&(p=0),g===void 0&&(g=0),this.followOffset.set(p,g),this},startFollow:function(p,g,T,S,w,A){g===void 0&&(g=!1),T===void 0&&(T=1),S===void 0&&(S=T),w===void 0&&(w=0),A===void 0&&(A=w),this._follow=p,this.roundPixels=g,T=u(T,0,1),S=u(S,0,1),this.lerp.set(T,S),this.followOffset.set(w,A);var M=this.width/2,R=this.height/2,P=p.x-w,b=p.y-A;return this.midPoint.set(P,b),this.scrollX=P-M,this.scrollY=b-R,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(p,g){this.visible&&(this.rotateToEffect.update(p,g),this.panEffect.update(p,g),this.zoomEffect.update(p,g),this.shakeEffect.update(p,g),this.flashEffect.update(p,g),this.fadeEffect.update(p,g))},destroy:function(){this.resetFX(),a.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});o.exports=m}),32743:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38058),x=e(83419),u=e(95540),r=e(37277),h=e(37303),n=e(97480),l=e(44594),c=new x({initialize:function(d){this.scene=d,this.systems=d.sys,this.roundPixels=d.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,d.sys.events.once(l.BOOT,this.boot,this),d.sys.events.on(l.START,this.start,this)},boot:function(){var s=this.systems;s.settings.cameras?this.fromJSON(s.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new a(0,0,s.scale.width,s.scale.height).setScene(this.scene),s.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){if(!this.main){var s=this.systems;s.settings.cameras?this.fromJSON(s.settings.cameras):this.add(),this.main=this.cameras[0]}var d=this.systems.events;d.on(l.UPDATE,this.update,this),d.once(l.SHUTDOWN,this.shutdown,this)},add:function(s,d,m,p,g,T){s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=this.scene.sys.scale.width),p===void 0&&(p=this.scene.sys.scale.height),g===void 0&&(g=!1),T===void 0&&(T="");var S=new a(s,d,m,p);return S.setName(T),S.setScene(this.scene),S.setRoundPixels(this.roundPixels),S.id=this.getNextID(),this.cameras.push(S),g&&(this.main=S),S},addExisting:function(s,d){d===void 0&&(d=!1);var m=this.cameras.indexOf(s);return m===-1?(s.id=this.getNextID(),s.setRoundPixels(this.roundPixels),this.cameras.push(s),d&&(this.main=s),s):null},getNextID:function(){for(var s=this.cameras,d=1,m=0;m<32;m++){for(var p=!1,g=0;g<s.length;g++){var T=s[g];if(T&&T.id===d){p=!0;continue}}if(p)d=d<<1;else return d}return 0},getTotal:function(s){s===void 0&&(s=!1);for(var d=0,m=this.cameras,p=0;p<m.length;p++){var g=m[p];(!s||s&&g.visible)&&d++}return d},fromJSON:function(s){Array.isArray(s)||(s=[s]);for(var d=this.scene.sys.scale.width,m=this.scene.sys.scale.height,p=0;p<s.length;p++){var g=s[p],T=u(g,"x",0),S=u(g,"y",0),w=u(g,"width",d),A=u(g,"height",m),M=this.add(T,S,w,A);M.name=u(g,"name",""),M.zoom=u(g,"zoom",1),M.rotation=u(g,"rotation",0),M.scrollX=u(g,"scrollX",0),M.scrollY=u(g,"scrollY",0),M.roundPixels=u(g,"roundPixels",!1),M.visible=u(g,"visible",!0);var R=u(g,"backgroundColor",!1);R&&M.setBackgroundColor(R);var P=u(g,"bounds",null);if(P){var b=u(P,"x",0),F=u(P,"y",0),I=u(P,"width",d),L=u(P,"height",m);M.setBounds(b,F,I,L)}}return this},getCamera:function(s){for(var d=this.cameras,m=0;m<d.length;m++)if(d[m].name===s)return d[m];return null},getCamerasBelowPointer:function(s){for(var d=this.cameras,m=s.x,p=s.y,g=[],T=0;T<d.length;T++){var S=d[T];S.visible&&S.inputEnabled&&h(S,m,p)&&g.unshift(S)}return g},remove:function(s,d){d===void 0&&(d=!0),Array.isArray(s)||(s=[s]);for(var m=0,p=this.cameras,g=0;g<s.length;g++){var T=p.indexOf(s[g]);T!==-1&&(d?p[T].destroy():p[T].renderList=[],p.splice(T,1),m++)}return!this.main&&p[0]&&(this.main=p[0]),m},render:function(s,d){for(var m=this.scene,p=this.cameras,g=0;g<p.length;g++){var T=p[g];if(T.visible&&T.alpha>0){T.preRender();var S=this.getVisibleChildren(d.getChildren(),T);s.render(m,S,T)}}},getVisibleChildren:function(s,d){return s.filter(function(m){return m.willRender(d)})},resetAll:function(){for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(s,d){for(var m=0;m<this.cameras.length;m++)this.cameras[m].update(s,d)},onResize:function(s,d,m,p,g){for(var T=0;T<this.cameras.length;T++){var S=this.cameras[T];S._x===0&&S._y===0&&S._width===p&&S._height===g&&S.setSize(d.width,d.height)}},resize:function(s,d){for(var m=0;m<this.cameras.length;m++)this.cameras[m].setSize(s,d)},shutdown:function(){this.main=void 0;for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();this.cameras=[];var d=this.systems.events;d.off(l.UPDATE,this.update,this),d.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(l.START,this.start,this),this.systems.events.off(l.DESTROY,this.destroy,this),this.systems.game.scale.off(n.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});r.register("CameraManager",c,"cameras"),o.exports=c}),5020:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(19715),r=new x({initialize:function(n){this.camera=n,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,n,l,c,s,d,m,p){if(h===void 0&&(h=!0),n===void 0&&(n=1e3),l===void 0&&(l=0),c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=!1),m===void 0&&(m=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=n,this.direction=h,this.progress=0,this.red=l,this.green=c,this.blue=s,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=m,this._onUpdateScope=p;var g=h?u.FADE_OUT_START:u.FADE_IN_START;return this.camera.emit(g,this.camera,this,n,l,c,s),this.camera},update:function(h,n){this.isRunning&&(this._elapsed+=n,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(h,n){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera,c=this.red/255,s=this.green/255,d=this.blue/255;return h.drawFillRect(l.x,l.y,l.width,l.height,n(d,s,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?u.FADE_OUT_COMPLETE:u.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=r}),10662:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(19715),r=new x({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(h,n,l,c,s,d,m){return h===void 0&&(h=250),n===void 0&&(n=255),l===void 0&&(l=255),c===void 0&&(c=255),s===void 0&&(s=!1),d===void 0&&(d=null),m===void 0&&(m=this.camera.scene),!s&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=n,this.green=l,this.blue=c,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=d,this._onUpdateScope=m,this.camera.emit(u.FLASH_START,this.camera,this,h,n,l,c),this.camera)},update:function(h,n){this.isRunning&&(this._elapsed+=n,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var n=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(h,n){if(!this.isRunning)return!1;var l=this.camera,c=this.red/255,s=this.green/255,d=this.blue/255;return h.drawFillRect(l.x,l.y,l.width,l.height,n(d,s,c,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=r}),20359:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(62640),r=e(19715),h=e(26099),n=new x({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,c,s,d,m,p,g){s===void 0&&(s=1e3),d===void 0&&(d=u.Linear),m===void 0&&(m=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene);var T=this.camera;return!m&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,this.source.set(T.scrollX,T.scrollY),this.destination.set(l,c),T.getScroll(l,c,this.current),typeof d=="string"&&u.hasOwnProperty(d)?this.ease=u[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.camera.emit(r.PAN_START,this.camera,this,s,l,c)),T},update:function(l,c){if(this.isRunning){this._elapsed+=c;var s=a(this._elapsed/this.duration,0,1);this.progress=s;var d=this.camera;if(this._elapsed<this.duration){var m=this.ease(s);d.getScroll(this.destination.x,this.destination.y,this.current);var p=this.source.x+(this.current.x-this.source.x)*m,g=this.source.y+(this.current.y-this.source.y)*m;d.setScroll(p,g),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,s,p,g)}else d.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,s,d.scrollX,d.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=n}),34208:((o,E,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var a=e(45319),x=e(83419),u=e(19715),r=e(62640),h=new x({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(n,l,c,s,d,m,p){c===void 0&&(c=1e3),s===void 0&&(s=r.Linear),d===void 0&&(d=!1),m===void 0&&(m=null),p===void 0&&(p=this.camera.scene),l===void 0&&(l=!1),this.shortestPath=l;var g=n;n<0?(g=-1*n,this.clockwise=!1):this.clockwise=!0;var T=360*Math.PI/180;g=g-Math.floor(g/T)*T;var S=this.camera;if(!d&&this.isRunning)return S;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=S.rotation,this.destination=g,typeof s=="string"&&r.hasOwnProperty(s)?this.ease=r[s]:typeof s=="function"&&(this.ease=s),this._elapsed=0,this._onUpdate=m,this._onUpdateScope=p,this.shortestPath){var w=0,A=0;this.destination>this.source?w=Math.abs(this.destination-this.source):w=Math.abs(this.destination+T)-this.source,this.source>this.destination?A=Math.abs(this.source-this.destination):A=Math.abs(this.source+T)-this.destination,w<A?this.clockwise=!0:w>A&&(this.clockwise=!1)}return this.camera.emit(u.ROTATE_START,this.camera,this,c,g),S},update:function(n,l){if(this.isRunning){this._elapsed+=l;var c=a(this._elapsed/this.duration,0,1);this.progress=c;var s=this.camera;if(this._elapsed<this.duration){var d=this.ease(c);this.current=s.rotation;var m=0,p=360*Math.PI/180,g=this.destination,T=this.current;this.clockwise===!1&&(g=this.current,T=this.destination),g>=T?m=Math.abs(g-T):m=Math.abs(g+p)-T;var S=0;this.clockwise?S=s.rotation+m*d:S=s.rotation-m*d,s.rotation=S,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,c,S)}else s.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=h}),30330:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(19715),r=e(26099),h=new x({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.intensity=new r,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(n,l,c,s,d){return n===void 0&&(n=100),l===void 0&&(l=.05),c===void 0&&(c=!1),s===void 0&&(s=null),d===void 0&&(d=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,typeof l=="number"?this.intensity.set(l):this.intensity.set(l.x,l.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=s,this._onUpdateScope=d,this.camera.emit(u.SHAKE_START,this.camera,this,n,l),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(n,l){if(this.isRunning)if(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,s=this.camera.width,d=this.camera.height,m=this.camera.zoom;this._offsetX=(Math.random()*c.x*s*2-c.x*s)*m,this._offsetY=(Math.random()*c.y*d*2-c.y*d)*m,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});o.exports=h}),45641:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(62640),r=e(19715),h=new x({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,l,c,s,d,m){l===void 0&&(l=1e3),c===void 0&&(c=u.Linear),s===void 0&&(s=!1),d===void 0&&(d=null),m===void 0&&(m=this.camera.scene);var p=this.camera;return!s&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source=p.zoom,this.destination=n,typeof c=="string"&&u.hasOwnProperty(c)?this.ease=u[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=m,this.camera.emit(r.ZOOM_START,this.camera,this,l,n)),p},update:function(n,l){this.isRunning&&(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=h}),20052:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Fade:e(5020),Flash:e(10662),Pan:e(20359),Shake:e(30330),RotateTo:e(34208),Zoom:e(45641)}}),16438:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameradestroy"}),32726:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeincomplete"}),87807:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeinstart"}),45917:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutcomplete"}),95666:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutstart"}),47056:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashcomplete"}),91261:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashstart"}),45047:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="followupdate"}),81927:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapancomplete"}),74264:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapanstart"}),54419:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"}),79330:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"}),93183:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatecomplete"}),80112:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatestart"}),62252:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakecomplete"}),86017:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakestart"}),539:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomcomplete"}),51892:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomstart"}),19715:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DESTROY:e(16438),FADE_IN_COMPLETE:e(32726),FADE_IN_START:e(87807),FADE_OUT_COMPLETE:e(45917),FADE_OUT_START:e(95666),FLASH_COMPLETE:e(47056),FLASH_START:e(91261),FOLLOW_UPDATE:e(45047),PAN_COMPLETE:e(81927),PAN_START:e(74264),POST_RENDER:e(54419),PRE_RENDER:e(79330),ROTATE_COMPLETE:e(93183),ROTATE_START:e(80112),SHAKE_COMPLETE:e(62252),SHAKE_START:e(86017),ZOOM_COMPLETE:e(539),ZOOM_START:e(51892)}}),87969:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Camera:e(38058),BaseCamera:e(71911),CameraManager:e(32743),Effects:e(20052),Events:e(19715)}}),63091:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(35154),u=new a({initialize:function(h){this.camera=x(h,"camera",null),this.left=x(h,"left",null),this.right=x(h,"right",null),this.up=x(h,"up",null),this.down=x(h,"down",null),this.zoomIn=x(h,"zoomIn",null),this.zoomOut=x(h,"zoomOut",null),this.zoomSpeed=x(h,"zoomSpeed",.01),this.minZoom=x(h,"minZoom",.001),this.maxZoom=x(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var n=x(h,"speed",null);typeof n=="number"?(this.speedX=n,this.speedY=n):(this.speedX=x(h,"speed.x",0),this.speedY=x(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*r|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*r|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*r|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*r|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=u}),58818:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(35154),u=new a({initialize:function(h){this.camera=x(h,"camera",null),this.left=x(h,"left",null),this.right=x(h,"right",null),this.up=x(h,"up",null),this.down=x(h,"down",null),this.zoomIn=x(h,"zoomIn",null),this.zoomOut=x(h,"zoomOut",null),this.zoomSpeed=x(h,"zoomSpeed",.01),this.minZoom=x(h,"minZoom",.001),this.maxZoom=x(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var n=x(h,"acceleration",null);typeof n=="number"?(this.accelX=n,this.accelY=n):(this.accelX=x(h,"acceleration.x",0),this.accelY=x(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var l=x(h,"drag",null);typeof l=="number"?(this.dragX=l,this.dragY=l):(this.dragX=x(h,"drag.x",0),this.dragY=x(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=x(h,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=x(h,"maxSpeed.x",0),this.maxSpeedY=x(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*r,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*r,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*r,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*r,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*r|0),this._speedY!==0&&(h.scrollY-=this._speedY*r|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=u}),38865:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FixedKeyControl:e(63091),SmoothedKeyControl:e(58818)}}),26638:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Controls:e(38865),Scene2D:e(87969)}}),8054:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:e(10312),ScaleModes:e(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};o.exports=a}),69547:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(8054),u=e(42363),r=e(82264),h=e(95540),n=e(35154),l=e(41212),c=e(29747),s=e(75508),d=e(36060),m=e(80333),p=new a({initialize:function(T){T===void 0&&(T={});var S=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],w="#ffffff",A=n(T,"scale",null);this.width=n(A,"width",1024,T),this.height=n(A,"height",768,T),this.zoom=n(A,"zoom",1,T),this.parent=n(A,"parent",void 0,T),this.scaleMode=n(A,A?"mode":"scaleMode",0,T),this.expandParent=n(A,"expandParent",!0,T),this.autoRound=n(A,"autoRound",!1,T),this.autoCenter=n(A,"autoCenter",0,T),this.resizeInterval=n(A,"resizeInterval",500,T),this.fullscreenTarget=n(A,"fullscreenTarget",null,T),this.minWidth=n(A,"min.width",0,T),this.maxWidth=n(A,"max.width",0,T),this.minHeight=n(A,"min.height",0,T),this.maxHeight=n(A,"max.height",0,T),this.snapWidth=n(A,"snap.width",0,T),this.snapHeight=n(A,"snap.height",0,T),this.renderType=n(T,"type",x.AUTO),this.canvas=n(T,"canvas",null),this.context=n(T,"context",null),this.canvasStyle=n(T,"canvasStyle",null),this.customEnvironment=n(T,"customEnvironment",!1),this.sceneConfig=n(T,"scene",null),this.seed=n(T,"seed",[(Date.now()*Math.random()).toString()]),s.RND=new s.RandomDataGenerator(this.seed),this.gameTitle=n(T,"title",""),this.gameURL=n(T,"url","https://phaser.io/"+x.LOG_VERSION),this.gameVersion=n(T,"version",""),this.autoFocus=n(T,"autoFocus",!0),this.stableSort=n(T,"stableSort",-1),this.stableSort===-1&&(this.stableSort=r.browser.es2019?1:0),r.features.stableSort=this.stableSort,this.domCreateContainer=n(T,"dom.createContainer",!1),this.domPointerEvents=n(T,"dom.pointerEvents","none"),this.inputKeyboard=n(T,"input.keyboard",!0),this.inputKeyboardEventTarget=n(T,"input.keyboard.target",window),this.inputKeyboardCapture=n(T,"input.keyboard.capture",[]),this.inputMouse=n(T,"input.mouse",!0),this.inputMouseEventTarget=n(T,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(T,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(T,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(T,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(T,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(T,"input.touch",r.input.touch),this.inputTouchEventTarget=n(T,"input.touch.target",null),this.inputTouchCapture=n(T,"input.touch.capture",!0),this.inputActivePointers=n(T,"input.activePointers",1),this.inputSmoothFactor=n(T,"input.smoothFactor",0),this.inputWindowEvents=n(T,"input.windowEvents",!0),this.inputGamepad=n(T,"input.gamepad",!1),this.inputGamepadEventTarget=n(T,"input.gamepad.target",window),this.disableContextMenu=n(T,"disableContextMenu",!1),this.audio=n(T,"audio",{}),this.hideBanner=n(T,"banner",null)===!1,this.hidePhaser=n(T,"banner.hidePhaser",!1),this.bannerTextColor=n(T,"banner.text",w),this.bannerBackgroundColor=n(T,"banner.background",S),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(T,"fps",null),this.disablePreFX=n(T,"disablePreFX",!1),this.disablePostFX=n(T,"disablePostFX",!1);var M=n(T,"render",null);this.pipeline=n(M,"pipeline",null,T),this.autoMobilePipeline=n(M,"autoMobilePipeline",!0,T),this.defaultPipeline=n(M,"defaultPipeline",d.MULTI_PIPELINE,T),this.antialias=n(M,"antialias",!0,T),this.antialiasGL=n(M,"antialiasGL",!0,T),this.mipmapFilter=n(M,"mipmapFilter","",T),this.desynchronized=n(M,"desynchronized",!1,T),this.roundPixels=n(M,"roundPixels",!1,T),this.pixelArt=n(M,"pixelArt",this.zoom!==1,T),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(M,"transparent",!1,T),this.clearBeforeRender=n(M,"clearBeforeRender",!0,T),this.preserveDrawingBuffer=n(M,"preserveDrawingBuffer",!1,T),this.premultipliedAlpha=n(M,"premultipliedAlpha",!0,T),this.failIfMajorPerformanceCaveat=n(M,"failIfMajorPerformanceCaveat",!1,T),this.powerPreference=n(M,"powerPreference","default",T),this.batchSize=n(M,"batchSize",4096,T),this.maxTextures=n(M,"maxTextures",-1,T),this.maxLights=n(M,"maxLights",10,T);var R=n(T,"backgroundColor",0);this.backgroundColor=m(R),this.transparent&&(this.backgroundColor=m(0),this.backgroundColor.alpha=0),this.preBoot=n(T,"callbacks.preBoot",c),this.postBoot=n(T,"callbacks.postBoot",c),this.physics=n(T,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(T,"loader.baseURL",""),this.loaderPath=n(T,"loader.path",""),this.loaderMaxParallelDownloads=n(T,"loader.maxParallelDownloads",r.os.android?6:32),this.loaderCrossOrigin=n(T,"loader.crossOrigin",void 0),this.loaderResponseType=n(T,"loader.responseType",""),this.loaderAsync=n(T,"loader.async",!0),this.loaderUser=n(T,"loader.user",""),this.loaderPassword=n(T,"loader.password",""),this.loaderTimeout=n(T,"loader.timeout",0),this.loaderMaxRetries=n(T,"loader.maxRetries",2),this.loaderWithCredentials=n(T,"loader.withCredentials",!1),this.loaderImageLoadType=n(T,"loader.imageLoadType","XHR"),this.loaderLocalScheme=n(T,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=n(T,"fx.glow.quality",.1),this.glowFXDistance=n(T,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=n(T,"plugins",null),b=u.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:l(P)&&(this.installGlobalPlugins=h(P,"global",[]),this.installScenePlugins=h(P,"scene",[]),Array.isArray(P.default)?b=P.default:Array.isArray(P.defaultMerge)&&(b=b.concat(P.defaultMerge)))),this.defaultPlugins=b;var F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(T,"images.default",F+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(T,"images.missing",F+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(T,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=x.WEBGL:window.FORCE_CANVAS&&(this.renderType=x.CANVAS))}});o.exports=p}),86054:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20623),x=e(27919),u=e(8054),r=e(89357),h=function(n){var l=n.config;if((l.customEnvironment||l.canvas)&&l.renderType===u.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!l.customEnvironment&&!l.canvas&&l.renderType!==u.HEADLESS)if(l.renderType===u.AUTO&&(l.renderType=r.webGL?u.WEBGL:u.CANVAS),l.renderType===u.WEBGL){if(!r.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(l.renderType===u.CANVAS){if(!r.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+l.renderType);l.antialias||x.disableSmoothing();var c=n.scale.baseSize,s=c.width,d=c.height;if(l.canvas?(n.canvas=l.canvas,n.canvas.width=s,n.canvas.height=d):n.canvas=x.create(n,s,d,l.renderType),l.canvasStyle&&(n.canvas.style=l.canvasStyle),l.antialias||a.setCrisp(n.canvas),l.renderType!==u.HEADLESS){var m,p;m=e(68627),p=e(74797),l.renderType===u.WEBGL?n.renderer=new p(n):(n.renderer=new m(n),n.context=n.renderer.gameContext)}};o.exports=h}),96391:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8054),x=function(u){var r=u.config;if(!r.hideBanner){var h="WebGL";r.renderType===a.CANVAS?h="Canvas":r.renderType===a.HEADLESS&&(h="Headless");var n=r.audio,l=u.device.audio,c;if(l.webAudio&&!n.disableWebAudio?c="Web Audio":n.noAudio||!l.webAudio&&!l.audioData?c="No Audio":c="HTML5 Audio",u.device.browser.ie)window.console&&console.log("Phaser v"+a.VERSION+" / https://phaser.io");else{var s="",d=[s];if(Array.isArray(r.bannerBackgroundColor)){var m;r.bannerBackgroundColor.forEach(function(g){s=s.concat("%c "),d.push("background: "+g),m=g}),d[d.length-1]="color: "+r.bannerTextColor+"; background: "+m}else s=s.concat("%c "),d.push("color: "+r.bannerTextColor+"; background: "+r.bannerBackgroundColor);d.push("background: transparent"),r.gameTitle&&(s=s.concat(r.gameTitle),r.gameVersion&&(s=s.concat(" v"+r.gameVersion)),r.hidePhaser||(s=s.concat(" / ")));var p="";r.hidePhaser||(s=s.concat("Phaser v"+a.VERSION+p+" ("+h+" | "+c+")")),s=s.concat(" %c "+r.gameURL),d[0]=s,console.log.apply(console,d)}}};o.exports=x}),50127:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),x=e(60848),u=e(24047),r=e(27919),h=e(83419),n=e(69547),l=e(83719),c=e(86054),s=e(45893),d=e(96391),m=e(82264),p=e(57264),g=e(50792),T=e(8443),S=e(7003),w=e(37277),A=e(77332),M=e(76531),R=e(60903),P=e(69442),b=e(17130),F=e(65898),I=e(51085),L=e(14747),D=new h({initialize:function(z){this.config=new n(z),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new x(this),this.textures=new b(this),this.cache=new u(this),this.registry=new s(this,new g),this.input=new S(this,this.config),this.scene=new R(this,this.config.sceneConfig),this.device=m,this.scale=new M(this,this.config),this.sound=null,this.sound=L.create(this),this.loop=new F(this,this.config.fps),this.plugins=new A(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,p(this.boot.bind(this))},boot:function(){if(!w.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),l(this),d(this),a(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(T.BOOT)},texturesReady:function(){this.events.emit(T.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),I(this);var O=this.events;O.on(T.HIDDEN,this.onHidden,this),O.on(T.VISIBLE,this.onVisible,this),O.on(T.BLUR,this.onBlur,this),O.on(T.FOCUS,this.onFocus,this)},step:function(O,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(T.PRE_STEP,O,z),W.emit(T.STEP,O,z),this.scene.update(O,z),W.emit(T.POST_STEP,O,z);var X=this.renderer;X.preRender(),W.emit(T.PRE_RENDER,X,O,z),this.scene.render(X),X.postRender(),W.emit(T.POST_RENDER,X,O,z)}},headlessStep:function(O,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(T.PRE_STEP,O,z),W.emit(T.STEP,O,z),this.scene.update(O,z),W.emit(T.POST_STEP,O,z),this.scene.isProcessing=!1,W.emit(T.PRE_RENDER,null,O,z),W.emit(T.POST_RENDER,null,O,z)}},onHidden:function(){this.loop.pause(),this.events.emit(T.PAUSE)},pause:function(){var O=this.isPaused;this.isPaused=!0,O||this.events.emit(T.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(T.RESUME,this.loop.pauseDuration)},resume:function(){var O=this.isPaused;this.isPaused=!1,O&&this.events.emit(T.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(O,z){z===void 0&&(z=!1),this.pendingDestroy=!0,this.removeCanvas=O,this.noReturn=z},runDestroy:function(){this.scene.destroy(),this.events.emit(T.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(r.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});o.exports=D}),65898:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(35154),u=e(29747),r=e(43092),h=new a({initialize:function(l,c){this.game=l,this.raf=new r,this.started=!1,this.running=!1,this.minFps=x(c,"min",5),this.targetFps=x(c,"target",60),this.fpsLimit=x(c,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=u,this.forceSetTimeOut=x(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=x(c,"deltaHistory",10),this.panicMax=x(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=x(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var n=window.performance.now();this.time=n,this.lastTime=n,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0;for(var l=0;l<this.deltaSmoothingMax;l++)this.deltaHistory[l]=Math.min(this._target,this.deltaHistory[l]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(n){if(this.started)return this;this.started=!0,this.running=!0;for(var l=0;l<this.deltaSmoothingMax;l++)this.deltaHistory[l]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=n;var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target)},smoothDelta:function(n){var l=this.deltaIndex,c=this.deltaHistory,s=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=c[l],n=Math.min(n,this._min)),c[l]=n,this.deltaIndex++,this.deltaIndex>=s&&(this.deltaIndex=0);for(var d=0,m=0;m<s;m++)d+=c[m];return d/=s,d},updateFPS:function(n){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0},stepLimitFPS:function(n){this.now=n;var l=Math.max(0,n-this.lastTime);this.rawDelta=l,this.time+=this.rawDelta,this.smoothStep&&(l=this.smoothDelta(l)),this.delta+=l,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(n,this.delta),this.delta=0),this.lastTime=n,this.frame++},step:function(n){this.now=n;var l=Math.max(0,n-this.lastTime);this.rawDelta=l,this.time+=this.rawDelta,this.smoothStep&&(l=this.smoothDelta(l)),this.delta=l,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.callback(n,l),this.lastTime=n,this.frame++},tick:function(){var n=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(n):this.step(n)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(n){n===void 0&&(n=!1);var l=window.performance.now();if(!this.running){n&&(this.startTime+=-this.lastTime+(this.lastTime+l));var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});o.exports=h}),51085:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8443),x=function(u){var r,h=u.events;if(document.hidden!==void 0)r="visibilitychange";else{var n=["webkit","moz","ms"];n.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},r=c+"visibilitychange")})}var l=function(c){document.hidden||c.type==="pause"?h.emit(a.HIDDEN):h.emit(a.VISIBLE)};r&&document.addEventListener(r,l,!1),window.onblur=function(){h.emit(a.BLUR)},window.onfocus=function(){h.emit(a.FOCUS)},window.focus&&u.config.autoFocus&&window.focus()};o.exports=x}),97217:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="blur"}),47548:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"}),19814:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="contextlost"}),68446:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"}),41700:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="focus"}),25432:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="hidden"}),65942:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"}),59211:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"}),47789:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="poststep"}),39066:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"}),460:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prestep"}),16175:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"}),42331:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"}),11966:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="step"}),32969:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="systemready"}),94830:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="visible"}),8443:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BLUR:e(97217),BOOT:e(47548),CONTEXT_LOST:e(19814),DESTROY:e(68446),FOCUS:e(41700),HIDDEN:e(25432),PAUSE:e(65942),POST_RENDER:e(59211),POST_STEP:e(47789),PRE_RENDER:e(39066),PRE_STEP:e(460),READY:e(16175),RESUME:e(42331),STEP:e(11966),SYSTEM_READY:e(32969),VISIBLE:e(94830)}}),42857:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Config:e(69547),CreateRenderer:e(86054),DebugHeader:e(96391),Events:e(8443),TimeStep:e(65898),VisibilityHandler:e(51085)}}),99584:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(5290),x=e(27919),u=e(35154),r=function(h){var n=u(h,"data",[]),l=u(h,"canvas",null),c=u(h,"palette",a),s=u(h,"pixelWidth",1),d=u(h,"pixelHeight",s),m=u(h,"resizeCanvas",!0),p=u(h,"clearCanvas",!0),g=u(h,"preRender",null),T=u(h,"postRender",null),S=Math.floor(Math.abs(n[0].length*s)),w=Math.floor(Math.abs(n.length*d));l||(l=x.create2D(this,S,w),m=!1,p=!1),m&&(l.width=S,l.height=w);var A=l.getContext("2d",{willReadFrequently:!0});p&&A.clearRect(0,0,S,w),g&&g(l,A);for(var M=0;M<n.length;M++)for(var R=n[M],P=0;P<R.length;P++){var b=R[P];b!=="."&&b!==" "&&(A.fillStyle=c[b],A.fillRect(P*s,M*d,s,d))}return T&&T(l,A),l};o.exports=r}),15822:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GenerateTexture:e(99584),Palettes:e(57763)}}),5290:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}}),23816:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}}),9866:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}}),77552:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}}),92259:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}}),57763:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARNE16:e(5290),C64:e(23816),CGA:e(9866),JMP:e(77552),MSX:e(92259)}}),46728:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(36316),u=e(80021),r=e(26099),h=new a({Extends:u,initialize:function(l,c,s,d){u.call(this,"CubicBezierCurve"),Array.isArray(l)&&(d=new r(l[6],l[7]),s=new r(l[4],l[5]),c=new r(l[2],l[3]),l=new r(l[0],l[1])),this.p0=l,this.p1=c,this.p2=s,this.p3=d},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,l){l===void 0&&(l=new r);var c=this.p0,s=this.p1,d=this.p2,m=this.p3;return l.set(x(n,c.x,s.x,d.x,m.x),x(n,c.y,s.y,d.y,m.y))},draw:function(n,l){l===void 0&&(l=32);var c=this.getPoints(l);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var s=1;s<c.length;s++)n.lineTo(c[s].x,c[s].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(n){var l=n.points,c=new r(l[0],l[1]),s=new r(l[2],l[3]),d=new r(l[4],l[5]),m=new r(l[6],l[7]);return new h(c,s,d,m)},o.exports=h}),80021:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(19217),u=e(87841),r=e(26099),h=new a({initialize:function(l){this.type=l,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new r,this._tmpVec2B=new r},draw:function(n,l){return l===void 0&&(l=32),n.strokePoints(this.getPoints(l))},getBounds:function(n,l){n||(n=new u),l===void 0&&(l=16);var c=this.getLength();l>c&&(l=c/2);var s=Math.max(1,Math.round(c/l));return x(this.getSpacedPoints(s),n)},getDistancePoints:function(n){var l=this.getLength(),c=Math.max(1,l/n);return this.getSpacedPoints(c)},getEndPoint:function(n){return n===void 0&&(n=new r),this.getPointAt(1,n)},getLength:function(){var n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var l=[],c,s=this.getPoint(0,this._tmpVec2A),d=0;l.push(0);for(var m=1;m<=n;m++)c=this.getPoint(m/n,this._tmpVec2B),d+=c.distance(s),l.push(d),s.copy(c);return this.cacheArcLengths=l,l},getPointAt:function(n,l){var c=this.getUtoTmapping(n);return this.getPoint(c,l)},getPoints:function(n,l,c){c===void 0&&(c=[]),n||(l?n=this.getLength()/l:n=this.defaultDivisions);for(var s=0;s<=n;s++)c.push(this.getPoint(s/n));return c},getRandomPoint:function(n){return n===void 0&&(n=new r),this.getPoint(Math.random(),n)},getSpacedPoints:function(n,l,c){c===void 0&&(c=[]),n||(l?n=this.getLength()/l:n=this.defaultDivisions);for(var s=0;s<=n;s++){var d=this.getUtoTmapping(s/n,null,n);c.push(this.getPoint(d))}return c},getStartPoint:function(n){return n===void 0&&(n=new r),this.getPointAt(0,n)},getTangent:function(n,l){l===void 0&&(l=new r);var c=1e-4,s=n-c,d=n+c;return s<0&&(s=0),d>1&&(d=1),this.getPoint(s,this._tmpVec2A),this.getPoint(d,l),l.subtract(this._tmpVec2A).normalize()},getTangentAt:function(n,l){var c=this.getUtoTmapping(n);return this.getTangent(c,l)},getTFromDistance:function(n,l){return n<=0?0:this.getUtoTmapping(0,n,l)},getUtoTmapping:function(n,l,c){var s=this.getLengths(c),d=0,m=s.length,p;l?p=Math.min(l,s[m-1]):p=n*s[m-1];for(var g=0,T=m-1,S;g<=T;)if(d=Math.floor(g+(T-g)/2),S=s[d]-p,S<0)g=d+1;else if(S>0)T=d-1;else{T=d;break}if(d=T,s[d]===p)return d/(m-1);var w=s[d],A=s[d+1],M=A-w,R=(p-w)/M;return(d+R)/(m-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});o.exports=h}),73825:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(80021),u=e(39506),r=e(35154),h=e(43396),n=e(26099),l=new a({Extends:x,initialize:function(s,d,m,p,g,T,S,w){if(typeof s=="object"){var A=s;s=r(A,"x",0),d=r(A,"y",0),m=r(A,"xRadius",0),p=r(A,"yRadius",m),g=r(A,"startAngle",0),T=r(A,"endAngle",360),S=r(A,"clockwise",!1),w=r(A,"rotation",0)}else p===void 0&&(p=m),g===void 0&&(g=0),T===void 0&&(T=360),S===void 0&&(S=!1),w===void 0&&(w=0);x.call(this,"EllipseCurve"),this.p0=new n(s,d),this._xRadius=m,this._yRadius=p,this._startAngle=u(g),this._endAngle=u(T),this._clockwise=S,this._rotation=u(w)},getStartPoint:function(c){return c===void 0&&(c=new n),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,s){s===void 0&&(s=new n);for(var d=Math.PI*2,m=this._endAngle-this._startAngle,p=Math.abs(m)<Number.EPSILON;m<0;)m+=d;for(;m>d;)m-=d;m<Number.EPSILON&&(p?m=0:m=d),this._clockwise&&!p&&(m===d?m=-d:m=m-d);var g=this._startAngle+c*m,T=this.p0.x+this._xRadius*Math.cos(g),S=this.p0.y+this._yRadius*Math.sin(g);if(this._rotation!==0){var w=Math.cos(this._rotation),A=Math.sin(this._rotation),M=T-this.p0.x,R=S-this.p0.y;T=M*w-R*A+this.p0.x,S=M*A+R*w+this.p0.y}return s.set(T,S)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return h(this._startAngle)},set:function(c){this._startAngle=u(c)}},endAngle:{get:function(){return h(this._endAngle)},set:function(c){this._endAngle=u(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return h(this._rotation)},set:function(c){this._rotation=u(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});l.fromJSON=function(c){return new l(c)},o.exports=l}),33951:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(80021),u=e(19217),r=e(87841),h=e(26099),n=new a({Extends:x,initialize:function(c,s){x.call(this,"LineCurve"),Array.isArray(c)&&(s=new h(c[2],c[3]),c=new h(c[0],c[1])),this.p0=c,this.p1=s,this.arcLengthDivisions=1},getBounds:function(l){return l===void 0&&(l=new r),u([this.p0,this.p1],l)},getStartPoint:function(l){return l===void 0&&(l=new h),l.copy(this.p0)},getResolution:function(l){return l===void 0&&(l=1),l},getPoint:function(l,c){return c===void 0&&(c=new h),l===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(l).add(this.p0),c)},getPointAt:function(l,c){return this.getPoint(l,c)},getTangent:function(l,c){return c===void 0&&(c=new h),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(l,c,s){var d;if(c){var m=this.getLengths(s),p=m[m.length-1],g=Math.min(c,p);d=g/p}else d=l;return d},draw:function(l){return l.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});n.fromJSON=function(l){var c=l.points,s=new h(c[0],c[1]),d=new h(c[2],c[3]);return new n(s,d)},o.exports=n}),14744:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(80021),u=e(32112),r=e(26099),h=new a({Extends:x,initialize:function(l,c,s){x.call(this,"QuadraticBezierCurve"),Array.isArray(l)&&(s=new r(l[4],l[5]),c=new r(l[2],l[3]),l=new r(l[0],l[1])),this.p0=l,this.p1=c,this.p2=s},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,l){l===void 0&&(l=new r);var c=this.p0,s=this.p1,d=this.p2;return l.set(u(n,c.x,s.x,d.x),u(n,c.y,s.y,d.y))},draw:function(n,l){l===void 0&&(l=32);var c=this.getPoints(l);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var s=1;s<c.length;s++)n.lineTo(c[s].x,c[s].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(n){var l=n.points,c=new r(l[0],l[1]),s=new r(l[2],l[3]),d=new r(l[4],l[5]);return new h(c,s,d)},o.exports=h}),42534:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87842),x=e(83419),u=e(80021),r=e(26099),h=new x({Extends:u,initialize:function(l){l===void 0&&(l=[]),u.call(this,"SplineCurve"),this.points=[],this.addPoints(l)},addPoints:function(n){for(var l=0;l<n.length;l++){var c=new r;typeof n[l]=="number"?(c.x=n[l],c.y=n[l+1],l++):Array.isArray(n[l])?(c.x=n[l][0],c.y=n[l][1]):(c.x=n[l].x,c.y=n[l].y),this.points.push(c)}return this},addPoint:function(n,l){var c=new r(n,l);return this.points.push(c),c},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.points[0])},getResolution:function(n){return n*this.points.length},getPoint:function(n,l){l===void 0&&(l=new r);var c=this.points,s=(c.length-1)*n,d=Math.floor(s),m=s-d,p=c[d===0?d:d-1],g=c[d],T=c[d>c.length-2?c.length-1:d+1],S=c[d>c.length-3?c.length-1:d+2];return l.set(a(m,p.x,g.x,T.x,S.x),a(m,p.y,g.y,T.y,S.y))},toJSON:function(){for(var n=[],l=0;l<this.points.length;l++)n.push(this.points[l].x),n.push(this.points[l].y);return{type:this.type,points:n}}});h.fromJSON=function(n){return new h(n.points)},o.exports=h}),25410:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Path:e(46669),MoveTo:e(68618),CubicBezier:e(46728),Curve:e(80021),Ellipse:e(73825),Line:e(33951),QuadraticBezier:e(14744),Spline:e(42534)}}),68618:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(26099),u=new a({initialize:function(h,n){this.active=!1,this.p0=new x(h,n)},getPoint:function(r,h){return h===void 0&&(h=new x),h.copy(this.p0)},getPointAt:function(r,h){return this.getPoint(r,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});o.exports=u}),46669:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(46728),u=e(73825),r=e(39429),h=e(33951),n=e(68618),l=e(14744),c=e(87841),s=e(42534),d=e(26099),m=e(36383),p=new a({initialize:function(T,S){T===void 0&&(T=0),S===void 0&&(S=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new d,this._tmpVec2A=new d,this._tmpVec2B=new d,typeof T=="object"?this.fromJSON(T):this.startPoint.set(T,S)},add:function(g){return this.curves.push(g),this},circleTo:function(g,T,S){return T===void 0&&(T=!1),this.ellipseTo(g,g,0,360,T,S)},closePath:function(){var g=this.curves[0].getPoint(0),T=this.curves[this.curves.length-1].getPoint(1);return g.equals(T)||this.curves.push(new h(T,g)),this},cubicBezierTo:function(g,T,S,w,A,M){var R=this.getEndPoint(),P,b,F;return g instanceof d?(P=g,b=T,F=S):(P=new d(S,w),b=new d(A,M),F=new d(g,T)),this.add(new x(R,P,b,F))},quadraticBezierTo:function(g,T,S,w){var A=this.getEndPoint(),M,R;return g instanceof d?(M=g,R=T):(M=new d(S,w),R=new d(g,T)),this.add(new l(A,M,R))},draw:function(g,T){for(var S=0;S<this.curves.length;S++){var w=this.curves[S];w.active&&w.draw(g,T)}return g},ellipseTo:function(g,T,S,w,A,M){var R=new u(0,0,g,T,S,w,A,M),P=this.getEndPoint(this._tmpVec2A),b=R.getStartPoint(this._tmpVec2B);return P.subtract(b),R.x=P.x,R.y=P.y,this.add(R)},fromJSON:function(g){this.curves=[],this.cacheLengths=[],this.startPoint.set(g.x,g.y),this.autoClose=g.autoClose;for(var T=0;T<g.curves.length;T++){var S=g.curves[T];switch(S.type){case"LineCurve":this.add(h.fromJSON(S));break;case"EllipseCurve":this.add(u.fromJSON(S));break;case"SplineCurve":this.add(s.fromJSON(S));break;case"CubicBezierCurve":this.add(x.fromJSON(S));break;case"QuadraticBezierCurve":this.add(l.fromJSON(S));break}}return this},getBounds:function(g,T){g===void 0&&(g=new c),T===void 0&&(T=16),g.x=Number.MAX_VALUE,g.y=Number.MAX_VALUE;for(var S=new c,w=m.MIN_SAFE_INTEGER,A=m.MIN_SAFE_INTEGER,M=0;M<this.curves.length;M++){var R=this.curves[M];R.active&&(R.getBounds(S,T),g.x=Math.min(g.x,S.x),g.y=Math.min(g.y,S.y),w=Math.max(w,S.right),A=Math.max(A,S.bottom))}return g.right=w,g.bottom=A,g},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var g=[],T=0,S=0;S<this.curves.length;S++)T+=this.curves[S].getLength(),g.push(T);return this.cacheLengths=g,g},getCurveAt:function(g){for(var T=g*this.getLength(),S=this.getCurveLengths(),w=0;w<S.length;){if(S[w]>=T)return this.curves[w];w++}return null},getEndPoint:function(g){return g===void 0&&(g=new d),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,g):g.copy(this.startPoint),g},getLength:function(){var g=this.getCurveLengths();return g[g.length-1]},getPoint:function(g,T){T===void 0&&(T=new d);for(var S=g*this.getLength(),w=this.getCurveLengths(),A=0;A<w.length;){if(w[A]>=S){var M=w[A]-S,R=this.curves[A],P=R.getLength(),b=P===0?0:1-M/P;return R.getPointAt(b,T)}A++}return null},getPoints:function(g,T){!g&&!T&&(g=this.defaultDivisions);for(var S=[],w,A=0;A<this.curves.length;A++){var M=this.curves[A];if(M.active)for(var R=M.getResolution(g),P=M.getPoints(R,T),b=0;b<P.length;b++){var F=P[b];w&&w.equals(F)||(S.push(F),w=F)}}return this.autoClose&&S.length>1&&!S[S.length-1].equals(S[0])&&S.push(S[0]),S},getRandomPoint:function(g){return g===void 0&&(g=new d),this.getPoint(Math.random(),g)},getSpacedPoints:function(g){g===void 0&&(g=40);for(var T=[],S=0;S<=g;S++)T.push(this.getPoint(S/g));return this.autoClose&&T.push(T[0]),T},getStartPoint:function(g){return g===void 0&&(g=new d),g.copy(this.startPoint)},getTangent:function(g,T){T===void 0&&(T=new d);for(var S=g*this.getLength(),w=this.getCurveLengths(),A=0;A<w.length;){if(w[A]>=S){var M=w[A]-S,R=this.curves[A],P=R.getLength(),b=P===0?0:1-M/P;return R.getTangentAt(b,T)}A++}return null},lineTo:function(g,T){g instanceof d?this._tmpVec2B.copy(g):typeof g=="object"?this._tmpVec2B.setFromObject(g):this._tmpVec2B.set(g,T);var S=this.getEndPoint(this._tmpVec2A);return this.add(new h([S.x,S.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(g){return g.unshift(this.getEndPoint()),this.add(new s(g))},moveTo:function(g,T){return g instanceof d?this.add(new n(g.x,g.y)):this.add(new n(g,T))},toJSON:function(){for(var g=[],T=0;T<this.curves.length;T++)g.push(this.curves[T].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:g}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});r.register("path",function(g,T){return new p(g,T)}),o.exports=p}),45893:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(24882),u=new a({initialize:function(h,n){this.parent=h,this.events=n,n||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(x.DESTROY,this.destroy,this)},get:function(r){var h=this.list;if(Array.isArray(r)){for(var n=[],l=0;l<r.length;l++)n.push(h[r[l]]);return n}else return h[r]},getAll:function(){var r={};for(var h in this.list)this.list.hasOwnProperty(h)&&(r[h]=this.list[h]);return r},query:function(r){var h={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(r)&&(h[n]=this.list[n]);return h},set:function(r,h){if(this._frozen)return this;if(typeof r=="string")return this.setValue(r,h);for(var n in r)this.setValue(n,r[n]);return this},inc:function(r,h){if(this._frozen)return this;h===void 0&&(h=1);var n=this.get(r);return n===void 0&&(n=0),this.set(r,n+h),this},toggle:function(r){return this._frozen?this:(this.set(r,!this.get(r)),this)},setValue:function(r,h){if(this._frozen)return this;if(this.has(r))this.values[r]=h;else{var n=this,l=this.list,c=this.events,s=this.parent;Object.defineProperty(this.values,r,{enumerable:!0,configurable:!0,get:function(){return l[r]},set:function(d){if(!n._frozen){var m=l[r];l[r]=d,c.emit(x.CHANGE_DATA,s,r,d,m),c.emit(x.CHANGE_DATA_KEY+r,s,d,m)}}}),l[r]=h,c.emit(x.SET_DATA,s,r,h)}return this},each:function(r,h){for(var n=[this.parent,null,void 0],l=1;l<arguments.length;l++)n.push(arguments[l]);for(var c in this.list)n[1]=c,n[2]=this.list[c],r.apply(h,n);return this},merge:function(r,h){h===void 0&&(h=!0);for(var n in r)r.hasOwnProperty(n)&&(h||!h&&!this.has(n))&&this.setValue(n,r[n]);return this},remove:function(r){if(this._frozen)return this;if(Array.isArray(r))for(var h=0;h<r.length;h++)this.removeValue(r[h]);else return this.removeValue(r);return this},removeValue:function(r){if(this.has(r)){var h=this.list[r];delete this.list[r],delete this.values[r],this.events.emit(x.REMOVE_DATA,this.parent,r,h)}return this},pop:function(r){var h=void 0;return!this._frozen&&this.has(r)&&(h=this.list[r],delete this.list[r],delete this.values[r],this.events.emit(x.REMOVE_DATA,this.parent,r,h)),h},has:function(r){return this.list.hasOwnProperty(r)},setFreeze:function(r){return this._frozen=r,this},reset:function(){for(var r in this.list)delete this.list[r],delete this.values[r];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(x.CHANGE_DATA),this.events.off(x.SET_DATA),this.events.off(x.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(r){this._frozen=!!r}},count:{get:function(){var r=0;for(var h in this.list)this.list[h]!==void 0&&r++;return r}}});o.exports=u}),63646:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(45893),u=e(37277),r=e(44594),h=new a({Extends:x,initialize:function(l){x.call(this,l,l.sys.events),this.scene=l,this.systems=l.sys,l.sys.events.once(r.BOOT,this.boot,this),l.sys.events.on(r.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){x.prototype.destroy.call(this),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});u.register("DataManagerPlugin",h,"data"),o.exports=h}),10700:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata"}),93608:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata-"}),60883:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"}),69780:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedata"}),22166:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="setdata"}),24882:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CHANGE_DATA:e(10700),CHANGE_DATA_KEY:e(93608),DESTROY:e(60883),REMOVE_DATA:e(69780),SET_DATA:e(22166)}}),44965:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DataManager:e(45893),DataManagerPlugin:e(63646),Events:e(24882)}}),7098:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84148),x={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function u(){if(typeof importScripts=="function")return x;x.audioData=!!window.Audio,x.webAudio=!!(window.AudioContext||window.webkitAudioContext);var r=document.createElement("audio"),h=!!r.canPlayType;try{if(h){var n=function(s,d){var m=r.canPlayType("audio/"+s).replace(/^no$/,"");return d?!!(m||r.canPlayType("audio/"+d).replace(/^no$/,"")):!!m};if(x.ogg=n('ogg; codecs="vorbis"'),x.opus=n('ogg; codecs="opus"',"opus"),x.mp3=n("mpeg"),x.wav=n("wav"),x.m4a=n("x-m4a"),x.aac=n("aac"),x.flac=n("flac","x-flac"),x.webm=n('webm; codecs="vorbis"'),r.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(a.edge)x.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var l=parseInt(RegExp.$1,10),c=parseInt(RegExp.$2,10);(l===10&&c>=11||l>10)&&(x.dolby=!0)}}}}catch{}return x}o.exports=u()}),84148:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),x={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function u(){var r=navigator.userAgent;return/Edg\/\d+/.test(r)?(x.edge=!0,x.es2019=!0):/OPR/.test(r)?(x.opera=!0,x.es2019=!0):/Chrome\/(\d+)/.test(r)&&!a.windowsPhone?(x.chrome=!0,x.chromeVersion=parseInt(RegExp.$1,10),x.es2019=x.chromeVersion>69):/Firefox\D+(\d+)/.test(r)?(x.firefox=!0,x.firefoxVersion=parseInt(RegExp.$1,10),x.es2019=x.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(r)&&a.iOS?(x.mobileSafari=!0,x.es2019=!0):/MSIE (\d+\.\d+);/.test(r)?(x.ie=!0,x.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(r)&&!a.windowsPhone?(x.safari=!0,x.safariVersion=parseInt(RegExp.$1,10),x.es2019=x.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(x.ie=!0,x.trident=!0,x.tridentVersion=parseInt(RegExp.$1,10),x.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(x.silk=!0),x}o.exports=u()}),89289:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x={supportInverseAlpha:!1,supportNewBlendModes:!1};function u(){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",l="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var s=new Image;s.onload=function(){var d=a.create2D(s,6),m=d.getContext("2d",{willReadFrequently:!0});if(m.globalCompositeOperation="multiply",m.drawImage(c,0,0),m.drawImage(s,2,0),!m.getImageData(2,0,1,1))return!1;var p=m.getImageData(2,0,1,1).data;a.remove(s),x.supportNewBlendModes=p[0]===255&&p[1]===0&&p[2]===0},s.src=n+"/wCKxvRF"+l},c.src=n+"AP804Oa6"+l,!1}function r(){var n=a.create2D(this,2),l=n.getContext("2d",{willReadFrequently:!0});l.fillStyle="rgba(10, 20, 30, 0.5)",l.fillRect(0,0,1,1);var c=l.getImageData(0,0,1,1);if(c===null)return!1;l.putImageData(c,1,0);var s=l.getImageData(1,0,1,1),d=s.data[0]===c.data[0]&&s.data[1]===c.data[1]&&s.data[2]===c.data[2]&&s.data[3]===c.data[3];return a.remove(this),d}function h(){return typeof importScripts!="function"&&document!==void 0&&(x.supportNewBlendModes=u(),x.supportInverseAlpha=r()),x}o.exports=h()}),89357:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),x=e(84148),u=e(27919),r={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var l=new ArrayBuffer(4),c=new Uint8Array(l),s=new Uint32Array(l);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,s[0]===3569595041?!0:s[0]===2712847316?!1:null}function n(){if(typeof importScripts=="function")return r;r.canvas=!!window.CanvasRenderingContext2D;try{r.localStorage=!!localStorage.getItem}catch{r.localStorage=!1}r.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,r.fileSystem=!!window.requestFileSystem;var l=!1,c=function(){if(window.WebGLRenderingContext)try{var s=u.createWebGL(this),d=s.getContext("webgl")||s.getContext("experimental-webgl"),m=u.create2D(this),p=m.getContext("2d",{willReadFrequently:!0}),g=p.createImageData(1,1);return l=g.data instanceof Uint8ClampedArray,u.remove(s),u.remove(m),!!d}catch{return!1}return!1};return r.webGL=c(),r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,x.firefox&&x.firefoxVersion<21&&(r.getUserMedia=!1),!a.iOS&&(x.ie||x.firefox||x.chrome)&&(r.canvasBitBltShift=!0),(x.safari||x.mobileSafari)&&(r.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(r.littleEndian=h()),r.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&r.littleEndian!==null&&l,r}o.exports=n()}),91639:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return E;var a,x="Fullscreen",u="FullScreen",r=["request"+x,"request"+u,"webkitRequest"+x,"webkitRequest"+u,"msRequest"+x,"msRequest"+u,"mozRequest"+u,"mozRequest"+x];for(a=0;a<r.length;a++)if(document.documentElement[r[a]]){E.available=!0,E.request=r[a];break}var h=["cancel"+u,"exit"+x,"webkitCancel"+u,"webkitExit"+x,"msCancel"+u,"msExit"+x,"mozCancel"+u,"mozExit"+x];if(E.available){for(a=0;a<h.length;a++)if(document[h[a]]){E.cancel=h[a];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(E.keyboard=!0),Object.defineProperty(E,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),E}o.exports=e()}),31784:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84148),x={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function u(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(x.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(x.mspointer=!0),navigator.getGamepads&&(x.gamepads=!0),"onwheel"in window||a.ie&&"WheelEvent"in window?x.wheelEvent="wheel":"onmousewheel"in window?x.wheelEvent="mousewheel":a.firefox&&"MouseScrollEvent"in window&&(x.wheelEvent="DOMMouseScroll")),x}o.exports=u()}),25892:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return E;var a=navigator.userAgent;/Windows/.test(a)?E.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(E.iOS=!0,E.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),E.iOSVersion=parseInt(RegExp.$1,10)):E.macOS=!0:/Android/.test(a)?E.android=!0:/Linux/.test(a)?E.linux=!0:/iP[ao]d|iPhone/i.test(a)?(E.iOS=!0,navigator.appVersion.match(/OS (\d+)/),E.iOSVersion=parseInt(RegExp.$1,10),E.iPhone=a.toLowerCase().indexOf("iphone")!==-1,E.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?E.kindle=!0:/CrOS/.test(a)&&(E.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(E.android=!1,E.iOS=!1,E.macOS=!1,E.windows=!0,E.windowsPhone=!0);var x=/Silk/.test(a);return(E.windows||E.macOS||E.linux&&!x||E.chromeOS)&&(E.desktop=!0),(E.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(E.desktop=!1),navigator.standalone&&(E.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(E.cordova=!0),window.ejecta!==void 0&&(E.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(E.node=!0),E.node&&typeof process.versions=="object"&&(E.nodeWebkit=!!process.versions["node-webkit"],E.electron=!!process.versions.electron),/Crosswalk/.test(a)&&(E.crosswalk=!0),E.pixelRatio=window.devicePixelRatio||1,E}o.exports=e()}),43267:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function u(){if(typeof importScripts=="function")return x;var r=document.createElement("video"),h=!!r.canPlayType,n=/^no$/;try{h&&(r.canPlayType('video/ogg; codecs="theora"').replace(n,"")&&(x.ogg=!0),r.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(n,"")&&(x.h264=!0,x.mp4=!0),r.canPlayType("video/x-m4v").replace(n,"")&&(x.m4v=!0),r.canPlayType('video/webm; codecs="vp8, vorbis"').replace(n,"")&&(x.webm=!0),r.canPlayType('video/webm; codecs="vp9"').replace(n,"")&&(x.vp9=!0),r.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(n,"")&&(x.hls=!0))}catch{}return r.parentNode&&r.parentNode.removeChild(r),x.getVideoURL=function(l){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var s=a(l[c],"url",l[c]);if(s.indexOf("blob:")===0)return{url:s,type:""};var d;if(s.indexOf("data:")===0?d=s.split(",")[0].match(/\/(.*?);/):d=s.match(/\.([a-zA-Z0-9]+)($|\?)/),d=a(l[c],"type",d?d[1]:"").toLowerCase(),x[d])return{url:s,type:d}}return null},x}o.exports=u()}),82264:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={os:e(25892),browser:e(84148),features:e(89357),input:e(31784),audio:e(7098),video:e(43267),fullscreen:e(91639),canvasFeatures:e(89289)}}),89422:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new Float32Array(20),u=new a({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(r){return this._matrix.set(r),this._dirty=!0,this},reset:function(){var r=this._matrix;return r.fill(0),r[0]=1,r[6]=1,r[12]=1,r[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var r=this._data;return this._dirty&&(r.set(this._matrix),r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._dirty=!1),r},brightness:function(r,h){r===void 0&&(r=0),h===void 0&&(h=!1);var n=r;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],h)},saturate:function(r,h){r===void 0&&(r=0),h===void 0&&(h=!1);var n=r*2/3+1,l=(n-1)*-.5;return this.multiply([n,l,l,0,0,l,n,l,0,0,l,l,n,0,0,0,0,0,1,0],h)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,h){r===void 0&&(r=0),h===void 0&&(h=!1),r=r/180*Math.PI;var n=Math.cos(r),l=Math.sin(r),c=.213,s=.715,d=.072;return this.multiply([c+n*(1-c)+l*-c,s+n*-s+l*-s,d+n*-d+l*(1-d),0,0,c+n*-c+l*.143,s+n*(1-s)+l*.14,d+n*-d+l*-.283,0,0,c+n*-c+l*-.787,s+n*-s+l*s,d+n*(1-d)+l*d,0,0,0,0,0,1,0],h)},grayscale:function(r,h){return r===void 0&&(r=1),h===void 0&&(h=!1),this.saturate(-r,h)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply(u.BLACK_WHITE,r)},contrast:function(r,h){r===void 0&&(r=0),h===void 0&&(h=!1);var n=r+1,l=-.5*(n-1);return this.multiply([n,0,0,0,l,0,n,0,0,l,0,0,n,0,l,0,0,0,1,0],h)},negative:function(r){return r===void 0&&(r=!1),this.multiply(u.NEGATIVE,r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply(u.DESATURATE_LUMINANCE,r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply(u.SEPIA,r)},night:function(r,h){return r===void 0&&(r=.1),h===void 0&&(h=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],h)},lsd:function(r){return r===void 0&&(r=!1),this.multiply(u.LSD,r)},brown:function(r){return r===void 0&&(r=!1),this.multiply(u.BROWN,r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply(u.VINTAGE,r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply(u.KODACHROME,r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply(u.TECHNICOLOR,r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply(u.POLAROID,r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply(u.SHIFT_BGR,r)},multiply:function(r,h){h===void 0&&(h=!1),h||this.reset();var n=this._matrix,l=x;return l.set(n),n.set([l[0]*r[0]+l[1]*r[5]+l[2]*r[10]+l[3]*r[15],l[0]*r[1]+l[1]*r[6]+l[2]*r[11]+l[3]*r[16],l[0]*r[2]+l[1]*r[7]+l[2]*r[12]+l[3]*r[17],l[0]*r[3]+l[1]*r[8]+l[2]*r[13]+l[3]*r[18],l[0]*r[4]+l[1]*r[9]+l[2]*r[14]+l[3]*r[19]+l[4],l[5]*r[0]+l[6]*r[5]+l[7]*r[10]+l[8]*r[15],l[5]*r[1]+l[6]*r[6]+l[7]*r[11]+l[8]*r[16],l[5]*r[2]+l[6]*r[7]+l[7]*r[12]+l[8]*r[17],l[5]*r[3]+l[6]*r[8]+l[7]*r[13]+l[8]*r[18],l[5]*r[4]+l[6]*r[9]+l[7]*r[14]+l[8]*r[19]+l[9],l[10]*r[0]+l[11]*r[5]+l[12]*r[10]+l[13]*r[15],l[10]*r[1]+l[11]*r[6]+l[12]*r[11]+l[13]*r[16],l[10]*r[2]+l[11]*r[7]+l[12]*r[12]+l[13]*r[17],l[10]*r[3]+l[11]*r[8]+l[12]*r[13]+l[13]*r[18],l[10]*r[4]+l[11]*r[9]+l[12]*r[14]+l[13]*r[19]+l[14],l[15]*r[0]+l[16]*r[5]+l[17]*r[10]+l[18]*r[15],l[15]*r[1]+l[16]*r[6]+l[17]*r[11]+l[18]*r[16],l[15]*r[2]+l[16]*r[7]+l[17]*r[12]+l[18]*r[17],l[15]*r[3]+l[16]*r[8]+l[17]*r[13]+l[18]*r[18],l[15]*r[4]+l[16]*r[9]+l[17]*r[14]+l[18]*r[19]+l[19]]),this._dirty=!0,this}});u.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],u.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],u.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],u.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],u.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],u.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],u.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],u.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],u.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],u.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],u.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],o.exports=u}),51767:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(29747),u=new a({initialize:function(h,n,l){this._rgb=[0,0,0],this.onChangeCallback=x,this.dirty=!1,this.set(h,n,l)},set:function(r,h,n){return r===void 0&&(r=0),h===void 0&&(h=0),n===void 0&&(n=0),this._rgb=[r,h,n],this.onChange(),this},equals:function(r,h,n){var l=this._rgb;return l[0]===r&&l[1]===h&&l[2]===n},onChange:function(){this.dirty=!0;var r=this._rgb;this.onChangeCallback.call(this,r[0],r[1],r[2])},r:{get:function(){return this._rgb[0]},set:function(r){this._rgb[0]=r,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(r){this._rgb[1]=r,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(r){this._rgb[2]=r,this.onChange()}},destroy:function(){this.onChangeCallback=null}});o.exports=u}),60461:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};o.exports=E}),54312:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(35893),u=e(86327),r=e(88417),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,x(l)+c),u(n,a(l)+s),n};o.exports=h}),46768:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(26541),u=e(86327),r=e(385),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,x(l)-c),u(n,a(l)+s),n};o.exports=h}),35827:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(54380),u=e(86327),r=e(40136),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,x(l)+c),u(n,a(l)+s),n};o.exports=h}),46871:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66786),x=e(35893),u=e(7702),r=function(h,n,l,c){return l===void 0&&(l=0),c===void 0&&(c=0),a(h,x(n)+l,u(n)+c),h};o.exports=r}),5198:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),x=e(26541),u=e(20786),r=e(385),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,x(l)-c),u(n,a(l)+s),n};o.exports=h}),11879:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),x=[];x[a.BOTTOM_CENTER]=e(54312),x[a.BOTTOM_LEFT]=e(46768),x[a.BOTTOM_RIGHT]=e(35827),x[a.CENTER]=e(46871),x[a.LEFT_CENTER]=e(5198),x[a.RIGHT_CENTER]=e(80503),x[a.TOP_CENTER]=e(89698),x[a.TOP_LEFT]=e(922),x[a.TOP_RIGHT]=e(21373),x[a.LEFT_BOTTOM]=x[a.BOTTOM_LEFT],x[a.LEFT_TOP]=x[a.TOP_LEFT],x[a.RIGHT_BOTTOM]=x[a.BOTTOM_RIGHT],x[a.RIGHT_TOP]=x[a.TOP_RIGHT];var u=function(r,h,n,l,c){return x[n](r,h,l,c)};o.exports=u}),80503:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),x=e(54380),u=e(20786),r=e(40136),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,x(l)+c),u(n,a(l)+s),n};o.exports=h}),89698:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35893),x=e(17717),u=e(88417),r=e(66737),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),u(n,a(l)+c),r(n,x(l)-s),n};o.exports=h}),922:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),x=e(17717),u=e(385),r=e(66737),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),u(n,a(l)-c),r(n,x(l)-s),n};o.exports=h}),21373:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),x=e(17717),u=e(40136),r=e(66737),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),u(n,a(l)+c),r(n,x(l)-s),n};o.exports=h}),91660:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:e(54312),BottomLeft:e(46768),BottomRight:e(35827),Center:e(46871),LeftCenter:e(5198),QuickSet:e(11879),RightCenter:e(80503),TopCenter:e(89698),TopLeft:e(922),TopRight:e(21373)}}),71926:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),x=e(79291),u={In:e(91660),To:e(16694)};u=x(!1,u,a),o.exports=u}),21578:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(35893),u=e(88417),r=e(66737),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),u(n,x(l)+c),r(n,a(l)+s),n};o.exports=h}),10210:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(26541),u=e(385),r=e(66737),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),u(n,x(l)-c),r(n,a(l)+s),n};o.exports=h}),82341:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(54380),u=e(40136),r=e(66737),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),u(n,x(l)+c),r(n,a(l)+s),n};o.exports=h}),87958:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(26541),u=e(86327),r=e(40136),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,x(l)-c),u(n,a(l)+s),n};o.exports=h}),40080:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),x=e(26541),u=e(20786),r=e(40136),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,x(l)-c),u(n,a(l)+s),n};o.exports=h}),88466:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),x=e(17717),u=e(40136),r=e(66737),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),u(n,a(l)-c),r(n,x(l)-s),n};o.exports=h}),38829:((o,E,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),x=[];x[a.BOTTOM_CENTER]=e(21578),x[a.BOTTOM_LEFT]=e(10210),x[a.BOTTOM_RIGHT]=e(82341),x[a.LEFT_BOTTOM]=e(87958),x[a.LEFT_CENTER]=e(40080),x[a.LEFT_TOP]=e(88466),x[a.RIGHT_BOTTOM]=e(19211),x[a.RIGHT_CENTER]=e(34609),x[a.RIGHT_TOP]=e(48741),x[a.TOP_CENTER]=e(49440),x[a.TOP_LEFT]=e(81288),x[a.TOP_RIGHT]=e(61323);var u=function(r,h,n,l,c){return x[n](r,h,l,c)};o.exports=u}),19211:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(54380),u=e(86327),r=e(385),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,x(l)+c),u(n,a(l)+s),n};o.exports=h}),34609:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),x=e(54380),u=e(20786),r=e(385),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,x(l)+c),u(n,a(l)+s),n};o.exports=h}),48741:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),x=e(17717),u=e(385),r=e(66737),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),u(n,a(l)+c),r(n,x(l)-s),n};o.exports=h}),49440:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35893),x=e(17717),u=e(86327),r=e(88417),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,a(l)+c),u(n,x(l)-s),n};o.exports=h}),81288:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),x=e(17717),u=e(86327),r=e(385),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,a(l)-c),u(n,x(l)-s),n};o.exports=h}),61323:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),x=e(17717),u=e(86327),r=e(40136),h=function(n,l,c,s){return c===void 0&&(c=0),s===void 0&&(s=0),r(n,a(l)+c),u(n,x(l)-s),n};o.exports=h}),16694:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:e(21578),BottomLeft:e(10210),BottomRight:e(82341),LeftBottom:e(87958),LeftCenter:e(40080),LeftTop:e(88466),QuickSet:e(38829),RightBottom:e(19211),RightCenter:e(34609),RightTop:e(48741),TopCenter:e(49440),TopLeft:e(81288),TopRight:e(61323)}}),66786:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88417),x=e(20786),u=function(r,h,n){return a(r,h),x(r,n)};o.exports=u}),62235:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.y+e.height-e.height*e.originY};o.exports=E}),72873:((o,E,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),x=e(26541),u=e(54380),r=e(17717),h=e(87841),n=function(l,c){c===void 0&&(c=new h);var s=x(l),d=r(l);return c.x=s,c.y=d,c.width=u(l)-s,c.height=a(l)-d,c};o.exports=n}),35893:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x-e.width*e.originX+e.width*.5};o.exports=E}),7702:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.y-e.height*e.originY+e.height*.5};o.exports=E}),26541:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x-e.width*e.originX};o.exports=E}),87431:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.width*e.originX};o.exports=E}),46928:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.height*e.originY};o.exports=E}),54380:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x+e.width-e.width*e.originX};o.exports=E}),17717:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.y-e.height*e.originY};o.exports=E}),86327:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.y=a-e.height+e.height*e.originY,e};o.exports=E}),88417:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.width*e.originX;return e.x=a+x-e.width*.5,e};o.exports=E}),20786:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.height*e.originY;return e.y=a+x-e.height*.5,e};o.exports=E}),385:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x=a+e.width*e.originX,e};o.exports=E}),40136:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x=a-e.width+e.width*e.originX,e};o.exports=E}),66737:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.y=a+e.height*e.originY,e};o.exports=E}),58724:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CenterOn:e(66786),GetBottom:e(62235),GetBounds:e(72873),GetCenterX:e(35893),GetCenterY:e(7702),GetLeft:e(26541),GetOffsetX:e(87431),GetOffsetY:e(46928),GetRight:e(54380),GetTop:e(17717),SetBottom:e(86327),SetCenterX:e(88417),SetCenterY:e(20786),SetLeft:e(385),SetRight:e(40136),SetTop:e(66737)}}),20623:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setCrisp:function(e){var a=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return a.forEach(function(x){e.style["image-rendering"]=x}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};o.exports=E}),27919:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8054),x=e(68703),u=[],r=!1,h=function(){var n=function(S,w,A,M,R){w===void 0&&(w=1),A===void 0&&(A=1),M===void 0&&(M=a.CANVAS),R===void 0&&(R=!1);var P,b=s(M);return b===null?(b={parent:S,canvas:document.createElement("canvas"),type:M},M===a.CANVAS&&u.push(b),P=b.canvas):(b.parent=S,P=b.canvas),R&&(b.parent=P),P.width=w,P.height=A,r&&M===a.CANVAS&&x.disable(P.getContext("2d",{willReadFrequently:!1})),P},l=function(S,w,A){return n(S,w,A,a.CANVAS)},c=function(S,w,A){return n(S,w,A,a.WEBGL)},s=function(S){if(S===void 0&&(S=a.CANVAS),S===a.WEBGL)return null;for(var w=0;w<u.length;w++){var A=u[w];if(!A.parent&&A.type===S)return A}return null},d=function(S){var w=S instanceof HTMLCanvasElement;u.forEach(function(A){(w&&A.canvas===S||!w&&A.parent===S)&&(A.parent=null,A.canvas.width=1,A.canvas.height=1)})},m=function(){var S=0;return u.forEach(function(w){w.parent&&S++}),S},p=function(){return u.length-m()},g=function(){r=!0},T=function(){r=!1};return{create2D:l,create:n,createWebGL:c,disableSmoothing:g,enableSmoothing:T,first:s,free:p,pool:u,remove:d,total:m}};o.exports=h()}),68703:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E="",e=function(){var a=function(h){for(var n=["i","webkitI","msI","mozI","oI"],l=0;l<n.length;l++){var c=n[l]+"mageSmoothingEnabled";if(c in h)return c}return null},x=function(h){return E===""&&(E=a(h)),E&&(h[E]=!0),h},u=function(h){return E===""&&(E=a(h)),E&&(h[E]=!1),h},r=function(h){return E!==null?h[E]:null};return{disable:u,enable:x,getPrefix:a,isEnabled:r}};o.exports=e()}),65208:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a="none"),e.style.msTouchAction=a,e.style["ms-touch-action"]=a,e.style["touch-action"]=a,e};o.exports=E}),91610:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a="none");var x=["-webkit-","-khtml-","-moz-","-ms-",""];return x.forEach(function(u){e.style[u+"user-select"]=a}),e.style["-webkit-touch-callout"]=a,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};o.exports=E}),26253:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasInterpolation:e(20623),CanvasPool:e(27919),Smoothing:e(68703),TouchAction:e(65208),UserSelect:e(91610)}}),40987:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37589),u=e(1e3),r=e(7537),h=e(87837),n=new a({initialize:function(c,s,d,m){c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,s,d,m)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(l,c,s,d,m){return d===void 0&&(d=255),m===void 0&&(m=!0),this._locked=!0,this.red=l,this.green=c,this.blue=s,this.alpha=d,this._locked=!1,this.update(m)},setGLTo:function(l,c,s,d){return d===void 0&&(d=1),this._locked=!0,this.redGL=l,this.greenGL=c,this.blueGL=s,this.alphaGL=d,this._locked=!1,this.update(!0)},setFromRGB:function(l){return this._locked=!0,this.red=l.r,this.green=l.g,this.blue=l.b,l.hasOwnProperty("a")&&(this.alpha=l.a),this._locked=!1,this.update(!0)},setFromHSV:function(l,c,s){return r(l,c,s,this)},update:function(l){if(l===void 0&&(l=!1),this._locked)return this;var c=this.r,s=this.g,d=this.b,m=this.a;return this._color=x(c,s,d),this._color32=u(c,s,d,m),this._rgba="rgba("+c+","+s+","+d+","+m/255+")",l&&h(c,s,d,this),this},updateHSV:function(){var l=this.r,c=this.g,s=this.b;return h(l,c,s,this),this},clone:function(){return new n(this.r,this.g,this.b,this.a)},gray:function(l){return this.setTo(l,l,l)},random:function(l,c){l===void 0&&(l=0),c===void 0&&(c=255);var s=Math.floor(l+Math.random()*(c-l)),d=Math.floor(l+Math.random()*(c-l)),m=Math.floor(l+Math.random()*(c-l));return this.setTo(s,d,m)},randomGray:function(l,c){l===void 0&&(l=0),c===void 0&&(c=255);var s=Math.floor(l+Math.random()*(c-l));return this.setTo(s,s,s)},saturate:function(l){return this.s+=l/100,this},desaturate:function(l){return this.s-=l/100,this},lighten:function(l){return this.v+=l/100,this},darken:function(l){return this.v-=l/100,this},brighten:function(l){var c=this.r,s=this.g,d=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(l/100)))),s=Math.max(0,Math.min(255,s-Math.round(255*-(l/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(l/100)))),this.setTo(c,s,d)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(l){this.gl[0]=Math.min(Math.abs(l),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(l){this.gl[1]=Math.min(Math.abs(l),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(l){this.gl[2]=Math.min(Math.abs(l),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(l){this.gl[3]=Math.min(Math.abs(l),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(l){l=Math.floor(Math.abs(l)),this.r=Math.min(l,255),this.gl[0]=l/255,this.update(!0)}},green:{get:function(){return this.g},set:function(l){l=Math.floor(Math.abs(l)),this.g=Math.min(l,255),this.gl[1]=l/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(l){l=Math.floor(Math.abs(l)),this.b=Math.min(l,255),this.gl[2]=l/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(l){l=Math.floor(Math.abs(l)),this.a=Math.min(l,255),this.gl[3]=l/255,this.update()}},h:{get:function(){return this._h},set:function(l){this._h=l,r(l,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(l){this._s=l,r(this._h,l,this._v,this)}},v:{get:function(){return this._v},set:function(l){this._v=l,r(this._h,this._s,l,this)}}});o.exports=n}),92728:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589),x=function(u){u===void 0&&(u=1024);var r=[],h=255,n,l=255,c=0,s=0;for(n=0;n<=h;n++)r.push({r:l,g:n,b:s,color:a(l,n,s)});for(c=255,n=h;n>=0;n--)r.push({r:n,g:c,b:s,color:a(n,c,s)});for(l=0,n=0;n<=h;n++,c--)r.push({r:l,g:c,b:n,color:a(l,c,n)});for(c=0,s=255,n=0;n<=h;n++,s--,l++)r.push({r:l,g:c,b:s,color:a(l,c,s)});if(u===1024)return r;var d=[],m=0,p=1024/u;for(n=0;n<u;n++)d.push(r[Math.floor(m)]),m+=p;return d};o.exports=x}),91588:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(a.a=e>>>24),a};o.exports=E}),62957:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=e.toString(16);return a.length===1?"0"+a:a};o.exports=E}),37589:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e<<16|a<<8|x};o.exports=E}),1e3:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){return u<<24|e<<16|a<<8|x};o.exports=E}),62183:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=e(89528),u=function(r,h,n){var l=n,c=n,s=n;if(h!==0){var d=n<.5?n*(1+h):n+h-n*h,m=2*n-d;l=x(m,d,r+1/3),c=x(m,d,r),s=x(m,d,r-1/3)}var p=new a;return p.setGLTo(l,c,s,1)};o.exports=u}),27939:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7537),x=function(u,r){u===void 0&&(u=1),r===void 0&&(r=1);for(var h=[],n=0;n<=359;n++)h.push(a(n/359,u,r));return h};o.exports=x}),7537:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589);function x(r,h,n,l){var c=(r+h*6)%6,s=Math.min(c,4-c,1);return Math.round(255*(l-l*n*Math.max(0,s)))}var u=function(r,h,n,l){h===void 0&&(h=1),n===void 0&&(n=1);var c=x(5,r,h,n),s=x(3,r,h,n),d=x(1,r,h,n);return l?l.setTo?l.setTo(c,s,d,l.alpha,!0):(l.r=c,l.g=s,l.b=d,l.color=a(c,s,d),l):{r:c,g:s,b:d,color:a(c,s,d)}};o.exports=u}),70238:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=function(u){var r=new a;u=u.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(s,d,m,p){return d+d+m+m+p+p});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);if(h){var n=parseInt(h[1],16),l=parseInt(h[2],16),c=parseInt(h[3],16);r.setTo(n,l,c)}return r};o.exports=x}),89528:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?e+(a-e)*6*x:x<.5?a:x<.6666666666666666?e+(a-e)*(.6666666666666666-x)*6:e};o.exports=E}),30100:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=e(90664),u=function(r){var h=x(r);return new a(h.r,h.g,h.b,h.a)};o.exports=u}),90664:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};o.exports=E}),13699:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28915),x=e(37589),u=function(n,l,c,s,d,m,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var T=g/p,S=a(n,s,T),w=a(l,d,T),A=a(c,m,T);return{r:S,g:w,b:A,a:255,color:x(S,w,A)}},r=function(n,l,c,s){return c===void 0&&(c=100),s===void 0&&(s=0),u(n.r,n.g,n.b,l.r,l.g,l.b,c,s)},h=function(n,l,c,s,d,m){return d===void 0&&(d=100),m===void 0&&(m=0),u(n.r,n.g,n.b,l,c,s,d,m)};o.exports={RGBWithRGB:u,ColorWithRGB:h,ColorWithColor:r}}),68957:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=function(u){return new a(u.r,u.g,u.b,u.a)};o.exports=x}),87388:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),x=function(u){var r=new a,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(u.toLowerCase());if(h){var n=parseInt(h[1],10),l=parseInt(h[2],10),c=parseInt(h[3],10),s=h[4]!==void 0?parseFloat(h[4]):1;r.setTo(n,l,c,s*255)}return r};o.exports=x}),87837:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){u===void 0&&(u={h:0,s:0,v:0}),e/=255,a/=255,x/=255;var r=Math.min(e,a,x),h=Math.max(e,a,x),n=h-r,l=0,c=h===0?0:n/h,s=h;return h!==r&&(h===e?l=(a-x)/n+(a<x?6:0):h===a?l=(x-e)/n+2:h===x&&(l=(e-a)/n+4),l/=6),u.hasOwnProperty("_h")?(u._h=l,u._s=c,u._v=s):(u.h=l,u.s=c,u.v=s),u};o.exports=E}),75723:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62957),x=function(u,r,h,n,l){return n===void 0&&(n=255),l===void 0&&(l="#"),l==="#"?"#"+((1<<24)+(u<<16)+(r<<8)+h).toString(16).slice(1,7):"0x"+a(n)+a(u)+a(r)+a(h)};o.exports=x}),85386:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),x=e(40987),u=function(r,h){return r===void 0&&(r=0),h===void 0&&(h=255),new x(a(r,h),a(r,h),a(r,h))};o.exports=u}),80333:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70238),x=e(30100),u=e(68957),r=e(87388),h=function(n){var l=typeof n;switch(l){case"string":return n.substr(0,3).toLowerCase()==="rgb"?r(n):a(n);case"number":return x(n);case"object":return u(n)}};o.exports=h}),3956:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987);a.ColorSpectrum=e(92728),a.ColorToRGBA=e(91588),a.ComponentToHex=e(62957),a.GetColor=e(37589),a.GetColor32=e(1e3),a.HexStringToColor=e(70238),a.HSLToColor=e(62183),a.HSVColorWheel=e(27939),a.HSVToRGB=e(7537),a.HueToComponent=e(89528),a.IntegerToColor=e(30100),a.IntegerToRGB=e(90664),a.Interpolate=e(13699),a.ObjectToColor=e(68957),a.RandomRGB=e(85386),a.RGBStringToColor=e(87388),a.RGBToHSV=e(87837),a.RGBToString=e(75723),a.ValueToColor=e(80333),o.exports=a}),27460:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Align:e(71926),BaseShader:e(73894),Bounds:e(58724),Canvas:e(26253),Color:e(3956),ColorMatrix:e(89422),Masks:e(69781),RGB:e(51767)}}),6858:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(39429),u=new a({initialize:function(h,n,l,c,s,d){n||(n=h.sys.make.image({x:l,y:c,key:s,frame:d,add:!1})),this.bitmapMask=n,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(r){this.bitmapMask=r},preRenderWebGL:function(r,h,n){r.pipelines.BITMAPMASK_PIPELINE.beginMask(this,h,n)},postRenderWebGL:function(r,h,n){r.pipelines.BITMAPMASK_PIPELINE.endMask(this,h,n)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});x.register("bitmapMask",function(r,h,n,l,c){return new u(this.scene,r,h,n,l,c)}),o.exports=u}),80661:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(u){return this.geometryMask=u,this},setInvertAlpha:function(u){return u===void 0&&(u=!0),this.invertAlpha=u,this},preRenderWebGL:function(u,r,h){var n=u.gl;u.flush(),u.maskStack.length===0&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),u.maskCount=0),u.currentCameraMask.mask!==this&&(u.currentMask.mask=this),u.maskStack.push({mask:this,camera:h}),this.applyStencil(u,h,!0),u.maskCount++},applyStencil:function(u,r,h){var n=u.gl,l=this.geometryMask,c=u.maskCount,s=255;n.colorMask(!1,!1,!1,!1),h?(n.stencilFunc(n.EQUAL,c,s),n.stencilOp(n.KEEP,n.KEEP,n.INCR),c++):(n.stencilFunc(n.EQUAL,c+1,s),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),this.level=c,l.renderWebGL(u,l,r),u.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.invertAlpha?n.stencilFunc(n.NOTEQUAL,c,s):n.stencilFunc(n.EQUAL,c,s)},postRenderWebGL:function(u){var r=u.gl;u.maskStack.pop(),u.maskCount--,u.flush();var h=u.currentMask;if(u.maskStack.length===0)h.mask=null,r.disable(r.STENCIL_TEST);else{var n=u.maskStack[u.maskStack.length-1];n.mask.applyStencil(u,n.camera,!1),u.currentCameraMask.mask!==n.mask?(h.mask=n.mask,h.camera=n.camera):h.mask=null}},preRenderCanvas:function(u,r,h){var n=this.geometryMask;u.currentContext.save(),n.renderCanvas(u,n,h,null,null,!0),u.currentContext.clip()},postRenderCanvas:function(u){u.currentContext.restore()},destroy:function(){this.geometryMask=null}});o.exports=x}),69781:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BitmapMask:e(6858),GeometryMask:e(80661)}}),73894:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n,l){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!n||n==="")&&(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),l===void 0&&(l=null),this.key=r,this.fragmentSrc=h,this.vertexSrc=n,this.uniforms=l}});o.exports=x}),40366:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x;if(a)typeof a=="string"?x=document.getElementById(a):typeof a=="object"&&a.nodeType===1&&(x=a);else if(e.parentElement||a===null)return e;return x||(x=document.body),x.appendChild(e),e};o.exports=E}),83719:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),x=function(u){var r=u.config;if(!(!r.parent||!r.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+u.scale.width+"px;","height: "+u.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+r.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),u.domContainer=h,a(h,r.parent)}};o.exports=x}),57264:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),x=function(u){if(document.readyState==="complete"||document.readyState==="interactive"){u();return}var r=function(){document.removeEventListener("deviceready",r,!0),document.removeEventListener("DOMContentLoaded",r,!0),window.removeEventListener("load",r,!0),u()};document.body?a.cordova?document.addEventListener("deviceready",r,!1):(document.addEventListener("DOMContentLoaded",r,!0),window.addEventListener("load",r,!0)):window.setTimeout(r,20)};o.exports=x}),57811:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){if(!e)return window.innerHeight;var a=Math.abs(window.orientation),x={w:0,h:0},u=document.createElement("div");return u.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(u),x.w=a===90?u.offsetHeight:window.innerWidth,x.h=a===90?window.innerWidth:u.offsetHeight,document.documentElement.removeChild(u),u=null,Math.abs(window.orientation)!==90?x.h:x.w};o.exports=E}),45818:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13560),x=function(u,r){var h=window.screen,n=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(n&&typeof n.type=="string")return n.type;if(typeof n=="string")return n;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return a.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return a.ORIENTATION.LANDSCAPE}else return r>u?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE};o.exports=x}),74403:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a;return e!==""&&(typeof e=="string"?a=document.getElementById(e):e&&e.nodeType===1&&(a=e)),a||(a=document.body),a};o.exports=E}),56836:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a="";try{if(window.DOMParser){var x=new DOMParser;a=x.parseFromString(e,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.loadXML(e)}catch{a=null}return!a||!a.documentElement||a.getElementsByTagName("parsererror").length?null:a};o.exports=E}),35846:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){e.parentNode&&e.parentNode.removeChild(e)};o.exports=E}),43092:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(29747),u=new a({initialize:function(){this.isRunning=!1,this.callback=x,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var h=this;this.step=function n(l){h.callback(l),h.isRunning&&(h.timeOutID=window.requestAnimationFrame(n))},this.stepTimeout=function n(){h.isRunning&&(h.timeOutID=window.setTimeout(n,h.delay)),h.callback(window.performance.now())}},start:function(r,h,n){this.isRunning||(this.callback=r,this.isSetTimeOut=h,this.delay=n,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=x}});o.exports=u}),84902:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={AddToDOM:e(40366),DOMContentLoaded:e(57264),GetInnerHeight:e(57811),GetScreenOrientation:e(45818),GetTarget:e(74403),ParseXML:e(56836),RemoveFromDOM:e(35846),RequestAnimationFrame:e(43092)};o.exports=a}),47565:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),u=e(37277),r=new a({Extends:x,initialize:function(){x.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});u.register("EventEmitter",r,"events"),o.exports=r}),93055:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EventEmitter:e(47565)}}),20122:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l){l===void 0&&(l=1),x.call(this,u.BARREL,n),this.amount=l}});o.exports=r}),32251:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d,m,p){c===void 0&&(c=1),s===void 0&&(s=1),d===void 0&&(d=1),m===void 0&&(m=1),p===void 0&&(p=4),x.call(this,u.BLOOM,n),this.steps=p,this.offsetX=c,this.offsetY=s,this.blurStrength=d,this.strength=m,this.glcolor=[1,1,1],l!=null&&(this.color=l)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});o.exports=r}),9047:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d,m,p){l===void 0&&(l=0),c===void 0&&(c=2),s===void 0&&(s=2),d===void 0&&(d=1),p===void 0&&(p=4),x.call(this,u.BLUR,n),this.quality=l,this.x=c,this.y=s,this.steps=p,this.strength=d,this.glcolor=[1,1,1],m!=null&&(this.color=m)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});o.exports=r}),27885:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d,m,p,g){l===void 0&&(l=.5),c===void 0&&(c=1),s===void 0&&(s=.2),d===void 0&&(d=!1),m===void 0&&(m=1),p===void 0&&(p=1),g===void 0&&(g=1),x.call(this,u.BOKEH,n),this.radius=l,this.amount=c,this.contrast=s,this.isTiltShift=d,this.strength=g,this.blurX=m,this.blurY=p}});o.exports=r}),12578:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d,m){l===void 0&&(l=8),d===void 0&&(d=1),m===void 0&&(m=.005),x.call(this,u.CIRCLE,n),this.scale=d,this.feather=m,this.thickness=l,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],c!=null&&(this.color=c),s!=null&&(this.backgroundColor=s)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}},backgroundColor:{get:function(){var h=this.glcolor2;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor2;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(h){this.glcolor2[3]=h}}});o.exports=r}),15802:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89422),u=e(14811),r=new a({Extends:x,initialize:function(n){x.call(this),this.type=u.COLOR_MATRIX,this.gameObject=n,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});o.exports=r}),72898:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h){this.type=r,this.gameObject=h,this.active=!0},setActive:function(u){return this.active=u,this},destroy:function(){this.gameObject=null,this.active=!1}});o.exports=x}),44553:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s){l===void 0&&(l="__WHITE"),c===void 0&&(c=.005),s===void 0&&(s=.005),x.call(this,u.DISPLACEMENT,n),this.x=c,this.y=s,this.glTexture,this.setTexture(l)},setTexture:function(h){var n=this.gameObject.scene.sys.textures.getFrame(h);return n&&(this.glTexture=n.glTexture),this}});o.exports=r}),68531:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d){c===void 0&&(c=4),s===void 0&&(s=0),d===void 0&&(d=!1),x.call(this,u.GLOW,n),this.outerStrength=c,this.innerStrength=s,this.knockout=d,this.glcolor=[1,1,1,1],l!==void 0&&(this.color=l)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});o.exports=r}),37102:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d,m,p,g,T){s===void 0&&(s=.2),d===void 0&&(d=0),m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=1),T===void 0&&(T=0),x.call(this,u.GRADIENT,n),this.alpha=s,this.size=T,this.fromX=d,this.fromY=m,this.toX=p,this.toY=g,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],l!=null&&(this.color1=l),c!=null&&(this.color2=c)},color1:{get:function(){var h=this.glcolor1;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var n=this.glcolor1;n[0]=h>>16&255,n[1]=h>>8&255,n[2]=h&255}},color2:{get:function(){var h=this.glcolor2;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var n=this.glcolor2;n[0]=h>>16&255,n[1]=h>>8&255,n[2]=h&255}}});o.exports=r}),86886:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l){l===void 0&&(l=1),x.call(this,u.PIXELATE,n),this.amount=l}});o.exports=r}),92322:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d,m,p,g){l===void 0&&(l=0),c===void 0&&(c=0),s===void 0&&(s=.1),d===void 0&&(d=1),p===void 0&&(p=6),g===void 0&&(g=1),x.call(this,u.SHADOW,n),this.x=l,this.y=c,this.decay=s,this.power=d,this.glcolor=[0,0,0,1],this.samples=p,this.intensity=g,m!==void 0&&(this.color=m)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});o.exports=r}),39563:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d){l===void 0&&(l=.5),c===void 0&&(c=.5),s===void 0&&(s=3),d===void 0&&(d=!1),x.call(this,u.SHINE,n),this.speed=l,this.lineWidth=c,this.gradient=s,this.reveal=d}});o.exports=r}),56448:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d){l===void 0&&(l=.5),c===void 0&&(c=.5),s===void 0&&(s=.5),d===void 0&&(d=.5),x.call(this,u.VIGNETTE,n),this.x=l,this.y=c,this.radius=s,this.strength=d}});o.exports=r}),38433:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72898),u=e(14811),r=new a({Extends:x,initialize:function(n,l,c,s,d){l===void 0&&(l=.1),c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=!1),x.call(this,u.WIPE,n),this.progress=0,this.wipeWidth=l,this.direction=c,this.axis=s,this.reveal=d}});o.exports=r}),14811:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};o.exports=E}),66064:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(14811),u={Barrel:e(20122),Controller:e(72898),Bloom:e(32251),Blur:e(9047),Bokeh:e(27885),Circle:e(12578),ColorMatrix:e(15802),Displacement:e(44553),Glow:e(68531),Gradient:e(37102),Pixelate:e(86886),Shadow:e(92322),Shine:e(39563),Vignette:e(56448),Wipe:e(38433)};u=a(!1,u,x),o.exports=u}),25305:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(23568),u=function(r,h,n){h.x=x(n,"x",0),h.y=x(n,"y",0),h.depth=x(n,"depth",0),h.flipX=x(n,"flipX",!1),h.flipY=x(n,"flipY",!1);var l=x(n,"scale",null);typeof l=="number"?h.setScale(l):l!==null&&(h.scaleX=x(l,"x",1),h.scaleY=x(l,"y",1));var c=x(n,"scrollFactor",null);typeof c=="number"?h.setScrollFactor(c):c!==null&&(h.scrollFactorX=x(c,"x",1),h.scrollFactorY=x(c,"y",1)),h.rotation=x(n,"rotation",0);var s=x(n,"angle",null);s!==null&&(h.angle=s),h.alpha=x(n,"alpha",1);var d=x(n,"origin",null);if(typeof d=="number")h.setOrigin(d);else if(d!==null){var m=x(d,"x",.5),p=x(d,"y",.5);h.setOrigin(m,p)}h.blendMode=x(n,"blendMode",a.NORMAL),h.visible=x(n,"visible",!0);var g=x(n,"add",!0);return g&&r.sys.displayList.add(h),h.preUpdate&&r.sys.updateList.add(h),h};o.exports=u}),13059:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23568),x=function(u,r){var h=a(r,"anims",null);if(h===null)return u;if(typeof h=="string")u.anims.play(h);else if(typeof h=="object"){var n=u.anims,l=a(h,"key",void 0);if(l){var c=a(h,"startFrame",void 0),s=a(h,"delay",0),d=a(h,"repeat",0),m=a(h,"repeatDelay",0),p=a(h,"yoyo",!1),g=a(h,"play",!1),T=a(h,"delayedPlay",0),S={key:l,delay:s,repeat:d,repeatDelay:m,yoyo:p,startFrame:c};g?n.play(S):T>0?n.playAfterDelay(S,T):n.load(S)}}return u};o.exports=x}),8050:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(73162),u=e(37277),r=e(51708),h=e(44594),n=e(19186),l=new a({Extends:x,initialize:function(s){x.call(this,s),this.sortChildrenFlag=!1,this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.parentContainer&&c.parentContainer.remove(c),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(r.ADDED_TO_SCENE,c,this.scene),this.events.emit(h.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(r.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,s){return c._depth-s._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list,s=c.length;s--;)c[s]&&c[s].destroy(!0);c.length=0,this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});u.register("DisplayList",l,"displayList"),o.exports=l}),95643:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(53774),u=e(45893),r=e(50792),h=e(51708),n=e(44594),l=new a({Extends:r,initialize:function(s,d){r.call(this),this.scene=s,this.displayList=null,this.type=d,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),s.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(c,s){return this.data||(this.data=new u(this)),this.data.set(c,s),this},incData:function(c,s){return this.data||(this.data=new u(this)),this.data.inc(c,s),this},toggleData:function(c){return this.data||(this.data=new u(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new u(this)),this.data.get(c)},setInteractive:function(c,s,d){return this.scene.sys.input.enable(this,c,s,d),this},disableInteractive:function(c){return c===void 0&&(c=!1),this.scene.sys.input.disable(this,c),this},removeInteractive:function(c){return c===void 0&&(c=!1),this.scene.sys.input.clear(this),c&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return x(this)},willRender:function(c){var s=this.displayList&&this.displayList.active?this.displayList.willRender(c):!0;return!(!s||l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,s=this.parentContainer,d=[];s&&(d.unshift(s.getIndex(c)),c=s,s.parentContainer);)s=s.parentContainer;return this.displayList?d.unshift(this.displayList.getIndex(c)):d.unshift(this.scene.sys.displayList.getIndex(c)),d},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),c.events.emit(n.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c&&c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(n.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var c=null;return this.parentContainer?c=this.parentContainer.list:this.displayList&&(c=this.displayList.list),c},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,o.exports=l}),44603:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37277),u=e(44594),r=new a({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(h,n){r.prototype.hasOwnProperty(h)||(r.prototype[h]=n)},r.remove=function(h){r.prototype.hasOwnProperty(h)&&delete r.prototype[h]},x.register("GameObjectCreator",r,"make"),o.exports=r}),39429:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37277),u=e(44594),r=new a({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(h,n){r.prototype.hasOwnProperty(h)||(r.prototype[h]=n)},r.remove=function(h){r.prototype.hasOwnProperty(h)&&delete r.prototype[h]},x.register("GameObjectFactory",r,"add"),o.exports=r}),91296:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),x=new a,u=new a,r=new a,h={camera:x,sprite:u,calc:r},n=function(l,c,s){var d=x,m=u,p=r;return m.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),d.copyFrom(c.matrix),s?(d.multiplyWithOffset(s,-c.scrollX*l.scrollFactorX,-c.scrollY*l.scrollFactorY),m.e=l.x,m.f=l.y):(m.e-=c.scrollX*l.scrollFactorX,m.f-=c.scrollY*l.scrollFactorY),d.multiply(m,p),h};o.exports=n}),45027:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(25774),u=e(37277),r=e(44594),h=new a({Extends:x,initialize:function(l){x.call(this),this.checkQueue=!0,this.scene=l,this.systems=l.sys,l.sys.events.once(r.BOOT,this.boot,this),l.sys.events.on(r.START,this.start,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(r.PRE_UPDATE,this.update,this),n.on(r.UPDATE,this.sceneUpdate,this),n.once(r.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(n,l){for(var c=this._active,s=c.length,d=0;d<s;d++){var m=c[d];m.active&&m.preUpdate.call(m,n,l)}},shutdown:function(){for(var n=this._active.length;n--;)this._active[n].destroy(!0);for(n=this._pending.length;n--;)this._pending[n].destroy(!0);for(n=this._destroy.length;n--;)this._destroy[n].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var l=this.systems.events;l.off(r.PRE_UPDATE,this.update,this),l.off(r.UPDATE,this.sceneUpdate,this),l.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});u.register("UpdateList",h,"updateList"),o.exports=h}),3217:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r,h,n,l,c,s,d,m,p,g,T){var S=x.x-a.displayOriginX+r,w=x.y-a.displayOriginY+h,A=S+x.w,M=w+x.h,R=n.a,P=n.b,b=n.c,F=n.d,I=n.e,L=n.f,D=S*R+w*b+I,O=S*P+w*F+L,z=S*R+M*b+I,W=S*P+M*F+L,X=A*R+M*b+I,_=A*P+M*F+L,U=A*R+w*b+I,G=A*P+w*F+L;l&&(D=Math.round(D),O=Math.round(O),z=Math.round(z),W=Math.round(W),X=Math.round(X),_=Math.round(_),U=Math.round(U),G=Math.round(G)),e.batchQuad(a,D,O,z,W,X,_,U,G,u.u0,u.v0,u.u1,u.v1,c,s,d,m,p,g,T)};o.exports=E}),53048:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){if(x===void 0&&(x=!1),u===void 0)return u={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},u;var r=e.text,h=r.length,n=e.maxWidth,l=e.wordWrapCharCode,c=Number.MAX_VALUE,s=Number.MAX_VALUE,d=0,m=0,p=e.fontData.chars,g=e.fontData.lineHeight,T=e.letterSpacing,S=e.lineSpacing,w=0,A=0,M=0,R=null,P=e._align,b=0,F=0,I=e.fontSize/e.fontData.size,L=I*e.scaleX,D=I*e.scaleY,O=null,z=0,W=[],X=Number.MAX_VALUE,_=0,U=0,G=0,N,H,V,$=[],j=[],k=null,Q=function(he,zt){for(var Ut=0,Xt=0;Xt<he.length;Xt++){var Pt=he.charCodeAt(Xt),$t=zt.chars[Pt];$t&&(Ut+=$t.xAdvance)}return Ut*L};if(n>0){V=r.split(`
`);var et=[];for(N=0;N<V.length;N++){var at=V[N],q="",ft="",vt="",Tt="";for(H=0;H<at.length;H++)if(M=at.charCodeAt(H),q+=at[H],M===l||H===at.length-1){Tt=vt+q;var ct=Q(Tt,e.fontData);ct<=n?vt=Tt:(ft=ft.slice(0,-1),ft+=(ft?`
`:"")+vt,vt=q),q=""}ft=ft.slice(0,-1),ft+=(ft?`
`:"")+vt,et.push(ft)}r=et.join(`
`),u.wrappedText=r,h=r.length}var Nt=0;for(N=0;N<h;N++){if(M=r.charCodeAt(N),M===10){k!==null&&($.push({word:k.word,i:k.i,x:k.x*L,y:k.y*D,w:k.w*L,h:k.h*D}),k=null),O=null,W[U]=G,G>_&&(_=G),G<X&&(X=G),U++,G=0,w=0,A=(g+S)*U;continue}if(R=p[M],!!R){if(b=w,F=A,O!==null){var yt=R.kerning[z];b+=yt!==void 0?yt:0}c>b&&(c=b),s>F&&(s=F);var it=b+R.xAdvance,Z=F+g;d<it&&(d=it),m<Z&&(m=Z);var lt=R.xOffset+R.xAdvance+(yt!==void 0?yt:0);M===l?k!==null&&($.push({word:k.word,i:k.i,x:k.x*L,y:k.y*D,w:k.w*L,h:k.h*D}),k=null):(k===null&&(k={word:"",i:Nt,x:w,y:A,w:0,h:g}),k.word=k.word.concat(r[N]),k.w+=lt),j.push({i:Nt,idx:N,char:r[N],code:M,x:(R.xOffset+b)*I,y:(R.yOffset+A)*I,w:R.width*I,h:R.height*I,t:A*I,r:it*I,b:g*I,line:U,glyph:R}),w+=R.xAdvance+T+(yt!==void 0?yt:0),O=R,z=M,G=it*I,Nt++}}if(k!==null&&$.push({word:k.word,i:k.i,x:k.x*L,y:k.y*D,w:k.w*L,h:k.h*D}),W[U]=G,G>_&&(_=G),G<X&&(X=G),P>0)for(var pt=0;pt<j.length;pt++){var Rt=j[pt];if(P===1){var At=(_-W[Rt.line])/2;Rt.x+=At,Rt.r+=At}else if(P===2){var Kt=_-W[Rt.line];Rt.x+=Kt,Rt.r+=Kt}}var Bt=u.local,Wt=u.global;return V=u.lines,Bt.x=c*I,Bt.y=s*I,Bt.width=d*I,Bt.height=m*I,Wt.x=e.x-e._displayOriginX+c*L,Wt.y=e.y-e._displayOriginY+s*D,Wt.width=d*L,Wt.height=m*D,V.shortest=X,V.longest=_,V.lengths=W,a&&(Bt.x=Math.ceil(Bt.x),Bt.y=Math.ceil(Bt.y),Bt.width=Math.ceil(Bt.width),Bt.height=Math.ceil(Bt.height),Wt.x=Math.ceil(Wt.x),Wt.y=Math.ceil(Wt.y),Wt.width=Math.ceil(Wt.width),Wt.height=Math.ceil(Wt.height),V.shortest=Math.ceil(X),V.longest=Math.ceil(_)),x&&(e._displayOriginX=e.originX*Bt.width,e._displayOriginY=e.originY*Bt.height,Wt.x=e.x-e._displayOriginX*e.scaleX,Wt.y=e.y-e._displayOriginY*e.scaleY,a&&(Wt.x=Math.ceil(Wt.x),Wt.y=Math.ceil(Wt.y))),u.words=$,u.characters=j,u.lines.height=g,u.scale=I,u.scaleX=e.scaleX,u.scaleY=e.scaleY,u};o.exports=E}),61327:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21859),x=function(u,r,h,n,l,c,s){var d=u.sys.textures.get(h),m=d.get(n),p=u.sys.cache.xml.get(l);if(m&&p){var g=a(p,m,c,s,d);return u.sys.cache.bitmapFont.add(r,{data:g,texture:h,frame:n,fromAtlas:!0}),!0}else return!1};o.exports=x}),6925:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x=function(u,r){var h=r.width,n=r.height,l=Math.floor(h/2),c=Math.floor(n/2),s=a(r,"chars","");if(s!==""){var d=a(r,"image",""),m=u.sys.textures.getFrame(d),p=m.cutX,g=m.cutY,T=m.source.width,S=m.source.height,w=a(r,"offset.x",0),A=a(r,"offset.y",0),M=a(r,"spacing.x",0),R=a(r,"spacing.y",0),P=a(r,"lineSpacing",0),b=a(r,"charsPerRow",null);b===null&&(b=T/h,b>s.length&&(b=s.length));for(var F=w,I=A,L={retroFont:!0,font:d,size:h,lineHeight:n+P,chars:{}},D=0,O=0;O<s.length;O++){var z=s.charCodeAt(O),W=(p+F)/T,X=(g+I)/S,_=(p+F+h)/T,U=(g+I+n)/S;L.chars[z]={x:F,y:I,width:h,height:n,centerX:l,centerY:c,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:W,v0:X,u1:_,v1:U},D++,D===b?(D=0,F=w,I+=n+R):F+=h+M}var G={data:L,frame:null,texture:d};return G}};o.exports=x}),21859:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(a,x){return parseInt(a.getAttribute(x),10)}var e=function(a,x,u,r,h){u===void 0&&(u=0),r===void 0&&(r=0);var n=x.cutX,l=x.cutY,c=x.source.width,s=x.source.height,d=x.sourceIndex,m={},p=a.getElementsByTagName("info")[0],g=a.getElementsByTagName("common")[0];m.font=p.getAttribute("face"),m.size=E(p,"size"),m.lineHeight=E(g,"lineHeight")+r,m.chars={};var T=a.getElementsByTagName("char"),S=x!==void 0&&x.trimmed;if(S)var w=x.height,A=x.width;for(var M=0;M<T.length;M++){var R=T[M],P=E(R,"id"),b=String.fromCharCode(P),F=E(R,"x"),I=E(R,"y"),L=E(R,"width"),D=E(R,"height");S&&(F<A&&(A=F),I<w&&(w=I)),S&&w!==0&&A!==0&&(F-=x.x,I-=x.y);var O=(n+F)/c,z=(l+I)/s,W=(n+F+L)/c,X=(l+I+D)/s;if(m.chars[P]={x:F,y:I,width:L,height:D,centerX:Math.floor(L/2),centerY:Math.floor(D/2),xOffset:E(R,"xoffset"),yOffset:E(R,"yoffset"),xAdvance:E(R,"xadvance")+u,data:{},kerning:{},u0:O,v0:z,u1:W,v1:X},h&&L!==0&&D!==0){var _=h.add(b,d,F,I,L,D);_&&_.setUVs(L,D,O,z,W,X)}}var U=a.getElementsByTagName("kerning");for(M=0;M<U.length;M++){var G=U[M],N=E(G,"first"),H=E(G,"second"),V=E(G,"amount");m.chars[H].kerning[N]=V}return m};o.exports=e}),196:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87662),x=e(79291),u={Parse:e(6925)};u=x(!1,u,a),o.exports=u}),87662:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};o.exports=E}),2638:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),x=e(83419),u=e(12310),r=new x({Extends:a,Mixins:[u],initialize:function(n,l,c,s,d,m,p){a.call(this,n,l,c,s,d,m,p),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,n){return this.cropWidth=h,this.cropHeight=n,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});o.exports=r}),86741:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20926),x=function(u,r,h,n){var l=r._text,c=l.length,s=u.currentContext;if(!(c===0||!a(u,s,r,h,n))){h.addToRenderList(r);var d=r.fromAtlas?r.frame:r.texture.frames.__BASE,m=r.displayCallback,p=r.callbackData,g=r.fontData.chars,T=r.fontData.lineHeight,S=r._letterSpacing,w=0,A=0,M=0,R=null,P=0,b=0,F=0,I=0,L=0,D=0,O=null,z=0,W=r.frame.source.image,X=d.cutX,_=d.cutY,U=0,G=0,N=r._fontSize/r.fontData.size,H=r._align,V=0,$=0;r.getTextBounds(!1);var j=r._bounds.lines;H===1?$=(j.longest-j.lengths[0])/2:H===2&&($=j.longest-j.lengths[0]),s.translate(-r.displayOriginX,-r.displayOriginY);var k=h.roundPixels;r.cropWidth>0&&r.cropHeight>0&&(s.beginPath(),s.rect(0,0,r.cropWidth,r.cropHeight),s.clip());for(var Q=0;Q<c;Q++){if(G=N,U=0,M=l.charCodeAt(Q),M===10){V++,H===1?$=(j.longest-j.lengths[V])/2:H===2&&($=j.longest-j.lengths[V]),w=0,A+=T,O=null;continue}if(R=g[M],!!R){if(P=X+R.x,b=_+R.y,F=R.width,I=R.height,L=R.xOffset+w-r.scrollX,D=R.yOffset+A-r.scrollY,O!==null){var et=R.kerning[z];L+=et!==void 0?et:0}if(m){p.index=Q,p.charCode=M,p.x=L,p.y=D,p.scale=G,p.rotation=U,p.data=R.data;var at=m(p);L=at.x,D=at.y,G=at.scale,U=at.rotation}L*=G,D*=G,L+=$,w+=R.xAdvance+S+(et!==void 0?et:0),O=R,z=M,!(F===0||I===0||M===32)&&(k&&(L=Math.round(L),D=Math.round(D)),s.save(),s.translate(L,D),s.rotate(U),s.scale(G,G),s.drawImage(W,P,b,F,I,0,0,F,I),s.restore())}}s.restore()}};o.exports=x}),11164:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2638),x=e(25305),u=e(44603),r=e(23568);u.register("dynamicBitmapText",function(h,n){h===void 0&&(h={});var l=r(h,"font",""),c=r(h,"text",""),s=r(h,"size",!1),d=new a(this.scene,0,0,l,c,s);return n!==void 0&&(h.add=n),x(this.scene,d,h),d})}),72566:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2638),x=e(39429);x.register("dynamicBitmapText",function(u,r,h,n,l){return this.displayList.add(new a(this.scene,u,r,h,n,l))})}),12310:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(73482),u=e(86741),o.exports={renderWebGL:x,renderCanvas:u}}),73482:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(61340),u=e(70554),r=new x,h=function(n,l,c,s){var d=l.text,m=d.length;if(m!==0){c.addToRenderList(l);var p=n.pipelines.set(l.pipeline,l),g=a(l,c,s);n.pipelines.preBatch(l);var T=g.sprite,S=g.calc,w=r,A=l.cropWidth>0||l.cropHeight>0;A&&(p.flush(),n.pushScissor(S.tx,S.ty,l.cropWidth*S.scaleX,l.cropHeight*S.scaleY));var M=l.frame,R=M.glTexture,P=l.tintFill,b=u.getTintAppendFloatAlpha(l.tintTopLeft,c.alpha*l._alphaTL),F=u.getTintAppendFloatAlpha(l.tintTopRight,c.alpha*l._alphaTR),I=u.getTintAppendFloatAlpha(l.tintBottomLeft,c.alpha*l._alphaBL),L=u.getTintAppendFloatAlpha(l.tintBottomRight,c.alpha*l._alphaBR),D=p.setGameObject(l),O=0,z=0,W=0,X=0,_=l.letterSpacing,U,G=0,N=0,H,V=l.scrollX,$=l.scrollY,j=l.fontData,k=j.chars,Q=j.lineHeight,et=l.fontSize/j.size,at=0,q=l._align,ft=0,vt=0,Tt=l.getTextBounds(!1);l.maxWidth>0&&(d=Tt.wrappedText,m=d.length);var ct=l._bounds.lines;q===1?vt=(ct.longest-ct.lengths[0])/2:q===2&&(vt=ct.longest-ct.lengths[0]);for(var Nt=c.roundPixels,yt=l.displayCallback,it=l.callbackData,Z=0;Z<m;Z++){if(W=d.charCodeAt(Z),W===10){ft++,q===1?vt=(ct.longest-ct.lengths[ft])/2:q===2&&(vt=ct.longest-ct.lengths[ft]),O=0,z+=Q,H=null;continue}if(U=k[W],!!U){G=U.width,N=U.height;var lt=U.xOffset+O-V,pt=U.yOffset+z-$;if(H!==null){var Rt=U.kerning[X]||0;lt+=Rt,O+=Rt}if(O+=U.xAdvance+_,H=U,X=W,!(G===0||N===0||W===32)){if(et=l.fontSize/l.fontData.size,at=0,yt){it.color=0,it.tint.topLeft=b,it.tint.topRight=F,it.tint.bottomLeft=I,it.tint.bottomRight=L,it.index=Z,it.charCode=W,it.x=lt,it.y=pt,it.scale=et,it.rotation=at,it.data=U.data;var At=yt(it);lt=At.x,pt=At.y,et=At.scale,at=At.rotation,At.color?(b=At.color,F=At.color,I=At.color,L=At.color):(b=At.tint.topLeft,F=At.tint.topRight,I=At.tint.bottomLeft,L=At.tint.bottomRight),b=u.getTintAppendFloatAlpha(b,c.alpha*l._alphaTL),F=u.getTintAppendFloatAlpha(F,c.alpha*l._alphaTR),I=u.getTintAppendFloatAlpha(I,c.alpha*l._alphaBL),L=u.getTintAppendFloatAlpha(L,c.alpha*l._alphaBR)}lt*=et,pt*=et,lt-=l.displayOriginX,pt-=l.displayOriginY,lt+=vt,w.applyITRS(lt,pt,at,et,et),S.multiply(w,T);var Kt=U.u0,Bt=U.v0,Wt=U.u1,he=U.v1,zt=G,Ut=N,Xt=T.e,Pt=T.f,$t=Ut*T.c+T.e,pe=Ut*T.d+T.f,fe=zt*T.a+Ut*T.c+T.e,Fe=zt*T.b+Ut*T.d+T.f,dt=zt*T.a+T.e,Zt=zt*T.b+T.f;Nt&&(Xt=Math.round(Xt),Pt=Math.round(Pt),$t=Math.round($t),pe=Math.round(pe),fe=Math.round(fe),Fe=Math.round(Fe),dt=Math.round(dt),Zt=Math.round(Zt)),p.shouldFlush(6)&&(p.flush(),D=p.setGameObject(l)),p.batchQuad(l,Xt,Pt,$t,pe,fe,Fe,dt,Zt,Kt,Bt,Wt,he,b,F,I,L,P,R,D)}}}A&&(p.flush(),n.popScissor()),n.pipelines.postBatch(l)}};o.exports=h}),22186:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(45319),u=e(31401),r=e(95643),h=e(53048),n=e(61327),l=e(21859),c=e(87841),s=e(18658),d=new a({Extends:r,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Texture,u.Tint,u.Transform,u.Visible,s],initialize:function(p,g,T,S,w,A,M){w===void 0&&(w=""),M===void 0&&(M=0),r.call(this,p,"BitmapText"),this.font=S;var R=this.scene.sys.cache.bitmapFont.get(S);if(!R)throw new Error("Invalid BitmapText key: "+S);this.fontData=R.data,this._text="",this._fontSize=A||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=M,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=R.fromAtlas,this.setTexture(R.texture,R.frame),this.setPosition(g,T),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(w)},setLeftAlign:function(){return this._align=d.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=d.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=d.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(m){return this._fontSize=m,this._dirty=!0,this},setLetterSpacing:function(m){return m===void 0&&(m=0),this._letterSpacing=m,this._dirty=!0,this},setLineSpacing:function(m){return m===void 0&&(m=0),this.lineSpacing=m,this},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this.text&&(this._text=m.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(m,p,g,T){return m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=0),T===void 0&&(T=.5),this.dropShadowX=m,this.dropShadowY=p,this.dropShadowColor=g,this.dropShadowAlpha=T,this},setCharacterTint:function(m,p,g,T,S,w,A){m===void 0&&(m=0),p===void 0&&(p=1),g===void 0&&(g=!1),T===void 0&&(T=-1),S===void 0&&(S=T,w=T,A=T);var M=this.text.length;p===-1&&(p=M),m<0&&(m=M+m),m=x(m,0,M-1);for(var R=x(m+p,m,M),P=this.charColors,b=m;b<R;b++){var F=P[b];if(T===-1)P[b]=null;else{var I=g?1:0;F?(F.tintEffect=I,F.tintTL=T,F.tintTR=S,F.tintBL=w,F.tintBR=A):P[b]={tintEffect:I,tintTL:T,tintTR:S,tintBL:w,tintBR:A}}}return this},setWordTint:function(m,p,g,T,S,w,A){p===void 0&&(p=1);for(var M=this.getTextBounds(),R=M.words,P=typeof m=="number",b=0,F=0;F<R.length;F++){var I=R[F];if((P&&F===m||!P&&I.word===m)&&(this.setCharacterTint(I.i,I.word.length,g,T,S,w,A),b++,b===p))return this}return this},getTextBounds:function(m){var p=this._bounds;return(this._dirty||m||this.scaleX!==p.scaleX||this.scaleY!==p.scaleY)&&(h(this,m,!0,p),this._dirty=!1),p},getCharacterAt:function(m,p,g){for(var T=this.getLocalPoint(m,p,null,g),S=this.getTextBounds(),w=S.characters,A=new c,M=0;M<w.length;M++){var R=w[M];if(A.setTo(R.x,R.t,R.r-R.x,R.b),A.contains(T.x,T.y))return R}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(m,p,g){p===void 0&&(p=this._fontSize),g===void 0&&(g=this._align);var T=this.scene.sys.cache.bitmapFont.get(m);return T&&(this.font=m,this.fontData=T.data,this._fontSize=p,this._align=g,this.fromAtlas=T.fromAtlas===!0,this.setTexture(T.texture,T.frame),h(this,!1,!0,this._bounds)),this},setMaxWidth:function(m,p){return this._maxWidth=m,this._dirty=!0,p!==void 0&&(this.wordWrapCharCode=p),this},setDisplaySize:function(m,p){this.setScale(1,1),this.getTextBounds(!1);var g=m/this.width,T=p/this.height;return this.setScale(g,T),this},align:{set:function(m){this._align=m,this._dirty=!0},get:function(){return this._align}},text:{set:function(m){this.setText(m)},get:function(){return this._text}},fontSize:{set:function(m){this._fontSize=m,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(m){this._letterSpacing=m,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(m){this._lineSpacing=m,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(m){this._maxWidth=m,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(m){this.setScaleX(1),this.getTextBounds(!1);var p=m/this.width;this.setScaleX(p)},get:function(){return this.width}},displayHeight:{set:function(m){this.setScaleY(1),this.getTextBounds(!1);var p=m/this.height;this.setScaleY(p)},get:function(){return this.height}},toJSON:function(){var m=u.ToJSON(this),p={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return m.data=p,m},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});d.ALIGN_LEFT=0,d.ALIGN_CENTER=1,d.ALIGN_RIGHT=2,d.ParseFromAtlas=n,d.ParseXMLBitmapFont=l,o.exports=d}),37289:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20926),x=function(u,r,h,n){var l=r._text,c=l.length,s=u.currentContext;if(!(c===0||!a(u,s,r,h,n))){h.addToRenderList(r);var d=r.fromAtlas?r.frame:r.texture.frames.__BASE,m=r.fontData.chars,p=r.fontData.lineHeight,g=r._letterSpacing,T=r._lineSpacing,S=0,w=0,A=0,M=null,R=0,P=0,b=0,F=0,I=0,L=0,D=null,O=0,z=d.source.image,W=d.cutX,X=d.cutY,_=r._fontSize/r.fontData.size,U=r._align,G=0,N=0,H=r.getTextBounds(!1);r.maxWidth>0&&(l=H.wrappedText,c=l.length);var V=r._bounds.lines;U===1?N=(V.longest-V.lengths[0])/2:U===2&&(N=V.longest-V.lengths[0]),s.translate(-r.displayOriginX,-r.displayOriginY);for(var $=h.roundPixels,j=0;j<c;j++){if(A=l.charCodeAt(j),A===10){G++,U===1?N=(V.longest-V.lengths[G])/2:U===2&&(N=V.longest-V.lengths[G]),S=0,w+=p+T,D=null;continue}if(M=m[A],!!M){if(R=W+M.x,P=X+M.y,b=M.width,F=M.height,I=M.xOffset+S,L=M.yOffset+w,D!==null){var k=M.kerning[O];I+=k!==void 0?k:0}I*=_,L*=_,I+=N,S+=M.xAdvance+g+(k!==void 0?k:0),D=M,O=A,!(b===0||F===0||A===32)&&($&&(I=Math.round(I),L=Math.round(L)),s.save(),s.translate(I,L),s.scale(_,_),s.drawImage(z,R,P,b,F,0,0,b,F),s.restore())}}s.restore()}};o.exports=x}),57336:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),x=e(25305),u=e(44603),r=e(23568),h=e(35154);u.register("bitmapText",function(n,l){n===void 0&&(n={});var c=h(n,"font",""),s=r(n,"text",""),d=r(n,"size",!1),m=h(n,"align",0),p=new a(this.scene,0,0,c,s,d,m);return l!==void 0&&(n.add=l),x(this.scene,p,n),p})}),34914:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),x=e(39429);x.register("bitmapText",function(u,r,h,n,l,c){return this.displayList.add(new a(this.scene,u,r,h,n,l,c))})}),18658:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(33590),u=e(37289),o.exports={renderWebGL:x,renderCanvas:u}}),33590:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3217),x=e(91296),u=e(70554),r=function(h,n,l,c){var s=n._text,d=s.length;if(d!==0){l.addToRenderList(n);var m=h.pipelines.set(n.pipeline,n),p=x(n,l,c).calc;h.pipelines.preBatch(n);var g=l.roundPixels,T=l.alpha,S=n.charColors,w=n.tintFill,A=u.getTintAppendFloatAlpha,M=A(n.tintTopLeft,T*n._alphaTL),R=A(n.tintTopRight,T*n._alphaTR),P=A(n.tintBottomLeft,T*n._alphaBL),b=A(n.tintBottomRight,T*n._alphaBR),F=n.frame.glTexture,I=m.setGameObject(n),L=n.getTextBounds(!1),D,O,z,W=L.characters,X=n.dropShadowX,_=n.dropShadowY,U=X!==0||_!==0;if(U){var G=n.dropShadowColor,N=n.dropShadowAlpha,H=A(G,T*N*n._alphaTL),V=A(G,T*N*n._alphaTR),$=A(G,T*N*n._alphaBL),j=A(G,T*N*n._alphaBR);for(D=0;D<W.length;D++)O=W[D],z=O.glyph,!(O.code===32||z.width===0||z.height===0)&&a(m,n,O,z,X,_,p,g,H,V,$,j,1,F,I)}for(D=0;D<W.length;D++)if(O=W[D],z=O.glyph,!(O.code===32||z.width===0||z.height===0))if(m.shouldFlush(6)&&(m.flush(),I=m.setGameObject(n)),S[O.i]){var k=S[O.i],Q=k.tintEffect,et=A(k.tintTL,T*n._alphaTL),at=A(k.tintTR,T*n._alphaTR),q=A(k.tintBL,T*n._alphaBL),ft=A(k.tintBR,T*n._alphaBR);a(m,n,O,z,0,0,p,g,et,at,q,ft,Q,F,I)}else a(m,n,O,z,0,0,p,g,M,R,P,b,w,F,I);h.pipelines.postBatch(n)}};o.exports=r}),6107:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(48011),x=e(46590),u=e(83419),r=e(31401),h=e(4327),n=e(95643),l=e(73162),c=new u({Extends:n,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Size,r.Texture,r.Transform,r.Visible,a],initialize:function(d,m,p,g,T){n.call(this,d,"Blitter"),this.setTexture(g,T),this.setPosition(m,p),this.initPipeline(),this.initPostPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(s,d,m,p,g){p===void 0&&(p=!0),g===void 0&&(g=this.children.length),m===void 0?m=this.frame:m instanceof h||(m=this.texture.get(m));var T=new x(this,s,d,m,p);return this.children.addAt(T,g,!1),this.dirty=!0,T},createFromCallback:function(s,d,m,p){for(var g=this.createMultiple(d,m,p),T=0;T<g.length;T++){var S=g[T];s.call(this,S,T)}return g},createMultiple:function(s,d,m){d===void 0&&(d=this.frame.name),m===void 0&&(m=!0),Array.isArray(d)||(d=[d]);var p=[],g=this;return d.forEach(function(T){for(var S=0;S<s;S++)p.push(g.create(0,0,T,m))}),p},childCanRender:function(s){return s.visible&&s.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});o.exports=c}),72396:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=a.getRenderList();if(r.length!==0){var h=e.currentContext,n=x.alpha*a.alpha;if(n!==0){x.addToRenderList(a),h.globalCompositeOperation=e.blendModes[a.blendMode],h.imageSmoothingEnabled=!a.frame.source.scaleMode;var l=a.x-x.scrollX*a.scrollFactorX,c=a.y-x.scrollY*a.scrollFactorY;h.save(),u&&u.copyToContext(h);for(var s=x.roundPixels,d=0;d<r.length;d++){var m=r[d],p=m.flipX||m.flipY,g=m.frame,T=g.canvasData,S=g.x,w=g.y,A=1,M=1,R=m.alpha*n;R!==0&&(h.globalAlpha=R,p?(m.flipX&&(A=-1,S-=T.width),m.flipY&&(M=-1,w-=T.height),T.width>0&&T.height>0&&(h.save(),h.translate(m.x+l,m.y+c),h.scale(A,M),h.drawImage(g.source.image,T.x,T.y,T.width,T.height,S,w,T.width,T.height),h.restore())):(s&&(S=Math.round(S),w=Math.round(w)),T.width>0&&T.height>0&&h.drawImage(g.source.image,T.x,T.y,T.width,T.height,S+m.x+l,w+m.y+c,T.width,T.height)))}h.restore()}}};o.exports=E}),9403:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6107),x=e(25305),u=e(44603),r=e(23568);u.register("blitter",function(h,n){h===void 0&&(h={});var l=r(h,"key",null),c=r(h,"frame",null),s=new a(this.scene,0,0,l,c);return n!==void 0&&(h.add=n),x(this.scene,s,h),s})}),12709:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6107),x=e(39429);x.register("blitter",function(u,r,h,n){return this.displayList.add(new a(this.scene,u,r,h,n))})}),48011:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(99485),u=e(72396),o.exports={renderWebGL:x,renderCanvas:u}}),99485:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),x=e(70554),u=new a,r=function(h,n,l,c){var s=n.getRenderList(),d=l.alpha*n.alpha;if(!(s.length===0||d===0)){l.addToRenderList(n);var m=h.pipelines.set(this.pipeline,n),p=l.scrollX*n.scrollFactorX,g=l.scrollY*n.scrollFactorY,T=u.copyFrom(l.matrix);c&&(T.multiplyWithOffset(c,-p,-g),p=0,g=0);var S=n.x-p,w=n.y-g,A=-1,M=!1,R=l.roundPixels;h.pipelines.preBatch(n);for(var P=0;P<s.length;P++){var b=s[P],F=b.frame,I=b.alpha*d;if(I!==0){var L=F.width,D=F.height,O=S+b.x+F.x,z=w+b.y+F.y;b.flipX&&(L*=-1,O+=F.width),b.flipY&&(D*=-1,z+=F.height);var W=T.setQuad(O,z,O+L,z+D,R),X=x.getTintAppendFloatAlpha(b.tint,I);if(F.sourceIndex!==A){var _=m.setGameObject(n,F);A=F.sourceIndex}m.batchQuad(n,W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],F.u0,F.v0,F.u1,F.v1,X,X,X,X,M,F.glTexture,_)&&(A=-1)}}h.pipelines.postBatch(n)}};o.exports=r}),46590:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(4327),u=new a({initialize:function(h,n,l,c,s){this.parent=h,this.x=n,this.y=l,this.frame=c,this.data={},this.tint=16777215,this._visible=s,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(r){return r===void 0?this.frame=this.parent.frame:r instanceof x&&r.texture===this.parent.texture?this.frame=r:this.frame=this.parent.texture.get(r),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(r,h,n){return this.x=r,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(r,h){return this.x=r,this.y=h,this},setFlipX:function(r){return this.flipX=r,this},setFlipY:function(r){return this.flipY=r,this},setFlip:function(r,h){return this.flipX=r,this.flipY=h,this},setVisible:function(r){return this.visible=r,this},setAlpha:function(r){return this.alpha=r,this},setTint:function(r){return this.tint=r,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(r){this.parent.dirty|=this._visible!==r,this._visible=r}},alpha:{get:function(){return this._alpha},set:function(r){this.parent.dirty|=this._alpha>0!=r>0,this._alpha=r}}});o.exports=u}),16005:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=2,u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r,h,n,l){return r===void 0&&(r=1),h===void 0?this.alpha=r:(this._alphaTL=a(r,0,1),this._alphaTR=a(h,0,1),this._alphaBL=a(n,0,1),this._alphaBR=a(l,0,1)),this},alpha:{get:function(){return this._alpha},set:function(r){var h=a(r,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=~x:this.renderFlags|=x}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(r){var h=a(r,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=x)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(r){var h=a(r,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=x)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(r){var h=a(r,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=x)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(r){var h=a(r,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=x)}}};o.exports=u}),88509:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=2,u={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r){return r===void 0&&(r=1),this.alpha=r,this},alpha:{get:function(){return this._alpha},set:function(r){var h=a(r,0,1);this._alpha=h,h===0?this.renderFlags&=~x:this.renderFlags|=x}}};o.exports=u}),90065:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x={_blendMode:a.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(u){typeof u=="string"&&(u=a[u]),u|=0,u>=-1&&(this._blendMode=u)}},setBlendMode:function(u){return this.blendMode=u,this}};o.exports=x}),94215:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};o.exports=E}),61683:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={texture:null,frame:null,isCropped:!1,setCrop:function(e,a,x,u){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,a,x,u,this.flipX,this.flipY);else{var r=e;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=E}),89272:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),x={_depth:0,depth:{get:function(){return this._depth},set:function(u){this.displayList&&this.displayList.queueDepthSort(),this._depth=u}},setDepth:function(u){return u===void 0&&(u=0),this.depth=u,this},setToTop:function(){var u=this.getDisplayList();return u&&a.BringToTop(u,this),this},setToBack:function(){var u=this.getDisplayList();return u&&a.SendToBack(u,this),this},setAbove:function(u){var r=this.getDisplayList();return r&&u&&a.MoveAbove(r,this,u),this},setBelow:function(u){var r=this.getDisplayList();return r&&u&&a.MoveBelow(r,this,u),this}};o.exports=x}),47059:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(66064),u=e(19133),r=new a({initialize:function(n,l){this.gameObject=n,this.isPost=l,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(h){return h===void 0&&(h=0),this.padding=h,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(h){if(!this.isPost){var n=this.gameObject.scene.sys.renderer;n&&n.pipelines?(this.gameObject.pipeline=n.pipelines.FX_PIPELINE,h!==void 0&&(this.padding=h),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var h=this.list,n=0;n<h.length;n++)h[n].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(h){var n;if(this.isPost){var l=this.gameObject.getPostPipeline(String(h.type));for(Array.isArray(l)||(l=[l]),n=0;n<l.length;n++){var c=l[n];if(c.controller===h){this.gameObject.removePostPipeline(c),h.destroy();break}}}else{var s=this.list;for(n=0;n<s.length;n++)s[n]===h&&(u(s,n),h.destroy())}return this.gameObject},disable:function(h){return h===void 0&&(h=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,h&&this.clear(),this.gameObject},add:function(h,n){if(this.isPost){var l=String(h.type);this.gameObject.setPostPipeline(l,n);var c=this.gameObject.getPostPipeline(l);if(c)return Array.isArray(c)&&(c=c.pop()),c&&(c.controller=h),h}else return this.enabled||this.enable(),this.list.push(h),h},addGlow:function(h,n,l,c,s,d){return this.add(new x.Glow(this.gameObject,h,n,l,c),{quality:s,distance:d})},addShadow:function(h,n,l,c,s,d,m){return this.add(new x.Shadow(this.gameObject,h,n,l,c,s,d,m))},addPixelate:function(h){return this.add(new x.Pixelate(this.gameObject,h))},addVignette:function(h,n,l,c){return this.add(new x.Vignette(this.gameObject,h,n,l,c))},addShine:function(h,n,l,c){return this.add(new x.Shine(this.gameObject,h,n,l,c))},addBlur:function(h,n,l,c,s,d){return this.add(new x.Blur(this.gameObject,h,n,l,c,s,d))},addGradient:function(h,n,l,c,s,d,m,p){return this.add(new x.Gradient(this.gameObject,h,n,l,c,s,d,m,p))},addBloom:function(h,n,l,c,s,d){return this.add(new x.Bloom(this.gameObject,h,n,l,c,s,d))},addColorMatrix:function(){return this.add(new x.ColorMatrix(this.gameObject))},addCircle:function(h,n,l,c,s){return this.add(new x.Circle(this.gameObject,h,n,l,c,s))},addBarrel:function(h){return this.add(new x.Barrel(this.gameObject,h))},addDisplacement:function(h,n,l){return this.add(new x.Displacement(this.gameObject,h,n,l))},addWipe:function(h,n,l){return this.add(new x.Wipe(this.gameObject,h,n,l))},addReveal:function(h,n,l){return this.add(new x.Wipe(this.gameObject,h,n,l,!0))},addBokeh:function(h,n,l){return this.add(new x.Bokeh(this.gameObject,h,n,l))},addTiltShift:function(h,n,l,c,s,d){return this.add(new x.Bokeh(this.gameObject,h,n,l,!0,c,s,d))},destroy:function(){this.clear(),this.gameObject=null}});o.exports=r}),54434:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,a){return this.flipX=e,this.flipY=a,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};o.exports=E}),8004:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(11520),u=e(26099),r={prepareBoundsOutput:function(h,n){if(n===void 0&&(n=!1),this.rotation!==0&&x(h,this.x,this.y,this.rotation),n&&this.parentContainer){var l=this.parentContainer.getBoundsTransformMatrix();l.transformPoint(h.x,h.y,h)}return h},getCenter:function(h,n){return h===void 0&&(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,n)},getTopLeft:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,n)},getTopCenter:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,n)},getTopRight:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,n)},getLeftCenter:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,n)},getRightCenter:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,n)},getBottomLeft:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,n)},getBottomCenter:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,n)},getBottomRight:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,n)},getBounds:function(h){h===void 0&&(h=new a);var n,l,c,s,d,m,p,g;if(this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),T.transformPoint(h.x,h.y,h),n=h.x,l=h.y,this.getTopRight(h),T.transformPoint(h.x,h.y,h),c=h.x,s=h.y,this.getBottomLeft(h),T.transformPoint(h.x,h.y,h),d=h.x,m=h.y,this.getBottomRight(h),T.transformPoint(h.x,h.y,h),p=h.x,g=h.y}else this.getTopLeft(h),n=h.x,l=h.y,this.getTopRight(h),c=h.x,s=h.y,this.getBottomLeft(h),d=h.x,m=h.y,this.getBottomRight(h),p=h.x,g=h.y;return h.x=Math.min(n,c,d,p),h.y=Math.min(l,s,m,g),h.width=Math.max(n,c,d,p)-h.x,h.height=Math.max(l,s,m,g)-h.y,h}};o.exports=r}),8573:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6858),x=e(80661),u={mask:null,setMask:function(r){return this.mask=r,this},clearMask:function(r){return r===void 0&&(r=!1),r&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(r,h,n,l,c){return r===void 0&&(this.texture||this.shader||this.geom)&&(r=this),new a(this.scene,r,h,n,l,c)},createGeometryMask:function(r){return r===void 0&&(this.type==="Graphics"||this.geom)&&(r=this),new x(this.scene,r)}};o.exports=u}),27387:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,a){return e===void 0&&(e=.5),a===void 0&&(a=e),this.originX=e,this.originY=a,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,a){return e===void 0&&(e=0),a===void 0&&(a=e),this.displayOriginX=e,this.displayOriginY=a,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};o.exports=E}),37640:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39506),x=e(57355),u=e(35154),r=e(86353),h=e(26099),n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:r.PLAYING_FORWARD,setPath:function(l,c){c===void 0&&(c=this.pathConfig);var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this.path=l,c&&this.startFollow(c),this},setRotateToPath:function(l,c){return c===void 0&&(c=0),this.rotateToPath=l,this.pathRotationOffset=c,this},isFollowing:function(){var l=this.pathTween;return l&&l.isPlaying()},startFollow:function(l,c){l===void 0&&(l={}),c===void 0&&(c=0);var s=this.pathTween;s&&s.isPlaying()&&s.stop(),typeof l=="number"&&(l={duration:l}),l.from=u(l,"from",0),l.to=u(l,"to",1);var d=x(l,"positionOnPath",!1);this.rotateToPath=x(l,"rotateToPath",!1),this.pathRotationOffset=u(l,"rotationOffset",0);var m=u(l,"startAt",c);if(m&&(l.onStart=function(g){var T=g.data[0];T.progress=m,T.elapsed=T.duration*m;var S=T.ease(T.progress);T.current=T.start+(T.end-T.start)*S,T.setTargetValue()}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),l.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(l),this.path.getStartPoint(this.pathOffset),d&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=r.PLAYING_FORWARD,this.rotateToPath){var p=this.path.getPoint(.1);this.rotation=Math.atan2(p.y-this.y,p.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=l,this},pauseFollow:function(){var l=this.pathTween;return l&&l.isPlaying()&&l.pause(),this},resumeFollow:function(){var l=this.pathTween;return l&&l.isPaused()&&l.resume(),this},stopFollow:function(){var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this},pathUpdate:function(){var l=this.pathTween;if(l&&l.data){var c=l.data[0],s=this.pathDelta,d=this.pathVector;if(s.copy(d).negate(),c.state===r.COMPLETE){this.path.getPoint(c.end,d),s.add(d),d.add(this.pathOffset),this.setPosition(d.x,d.y);return}else if(c.state!==r.PLAYING_FORWARD&&c.state!==r.PLAYING_BACKWARD)return;this.path.getPoint(l.getValue(),d),s.add(d),d.add(this.pathOffset);var m=this.x,p=this.y;this.setPosition(d.x,d.y);var g=this.x-m,T=this.y-p;if(g===0&&T===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(T,g)+a(this.pathRotationOffset))}}};o.exports=n}),72699:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),x={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(u){this.pipelineData={};var r=this.scene.sys.renderer;if(!r)return!1;var h=r.pipelines;if(h){u===void 0&&(u=h.default);var n=h.get(u);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(u,r,h){var n=this.scene.sys.renderer;if(!n)return this;var l=n.pipelines;if(l){var c=l.get(u);c&&(this.pipeline=c),r&&(this.pipelineData=h?a(r):r)}return this},setPipelineData:function(u,r){var h=this.pipelineData;return r===void 0?delete h[u]:h[u]=r,this},resetPipeline:function(u){return u===void 0&&(u=!1),this.pipeline=this.defaultPipeline,u&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};o.exports=x}),17581:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),x=e(47059),u=e(19133),r={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(h){this.postPipelines=[],this.postPipelineData={},this.postFX=new x(this,!0),h&&(this.preFX=new x(this,!1))},setPostPipeline:function(h,n,l){var c=this.scene.sys.renderer;if(!c)return this;var s=c.pipelines;if(s){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var m=s.getPostPipeline(h[d],this,n);m&&this.postPipelines.push(m)}n&&(this.postPipelineData=l?a(n):n)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(h,n){var l=this.postPipelineData;return n===void 0?delete l[h]:l[h]=n,this},getPostPipeline:function(h){for(var n=typeof h=="string",l=this.postPipelines,c=[],s=0;s<l.length;s++){var d=l[s];(n&&d.name===h||!n&&d instanceof h)&&c.push(d)}return c.length===1?c[0]:c},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var n=this.postPipelines,l=0;l<n.length;l++)n[l].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.postPipelineData={})},removePostPipeline:function(h){for(var n=typeof h=="string",l=this.postPipelines,c=l.length-1;c>=0;c--){var s=l[c];(n&&s.name===h||!n&&s===h)&&(s.destroy(),u(l,c))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};o.exports=r}),80227:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,a){return a===void 0&&(a=e),this.scrollFactorX=e,this.scrollFactorY=a,this}};o.exports=E}),16736:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};o.exports=E}),37726:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4327),x=8,u={texture:null,frame:null,isCropped:!1,setTexture:function(r,h,n,l){return this.texture=this.scene.sys.textures.get(r),this.setFrame(h,n,l)},setFrame:function(r,h,n){return h===void 0&&(h=!0),n===void 0&&(n=!0),r instanceof a?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};o.exports=u}),79812:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4327),x=8,u={texture:null,frame:null,isCropped:!1,setCrop:function(r,h,n,l){if(r===void 0)this.isCropped=!1;else if(this.frame){if(typeof r=="number")this.frame.setCropUVs(this._crop,r,h,n,l,this.flipX,this.flipY);else{var c=r;this.frame.setCropUVs(this._crop,c.x,c.y,c.width,c.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(r,h){return this.texture=this.scene.sys.textures.get(r),this.setFrame(h)},setFrame:function(r,h,n){return h===void 0&&(h=!0),n===void 0&&(n=!0),r instanceof a?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=u}),27472:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,a,x,u){return e===void 0&&(e=16777215),a===void 0&&(a=e,x=e,u=e),this.tintTopLeft=e,this.tintTopRight=a,this.tintBottomLeft=x,this.tintBottomRight=u,this.tintFill=!1,this},setTintFill:function(e,a,x,u){return this.setTint(e,a,x,u),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};o.exports=E}),53774:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(a.textureKey=e.texture.key,a.frameKey=e.frame.name),a};o.exports=E}),16901:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(61340),u=e(85955),r=e(86554),h=e(30954),n=e(26099),l=4,c={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(s){this._scaleX=s,this._scaleY=s,s===0?this.renderFlags&=~l:this.renderFlags|=l}},scaleX:{get:function(){return this._scaleX},set:function(s){this._scaleX=s,s===0?this.renderFlags&=~l:this._scaleY!==0&&(this.renderFlags|=l)}},scaleY:{get:function(){return this._scaleY},set:function(s){this._scaleY=s,s===0?this.renderFlags&=~l:this._scaleX!==0&&(this.renderFlags|=l)}},angle:{get:function(){return h(this._rotation*a.RAD_TO_DEG)},set:function(s){this.rotation=h(s)*a.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(s){this._rotation=r(s)}},setPosition:function(s,d,m,p){return s===void 0&&(s=0),d===void 0&&(d=s),m===void 0&&(m=0),p===void 0&&(p=0),this.x=s,this.y=d,this.z=m,this.w=p,this},copyPosition:function(s){return s.x!==void 0&&(this.x=s.x),s.y!==void 0&&(this.y=s.y),s.z!==void 0&&(this.z=s.z),s.w!==void 0&&(this.w=s.w),this},setRandomPosition:function(s,d,m,p){return s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=this.scene.sys.scale.width),p===void 0&&(p=this.scene.sys.scale.height),this.x=s+Math.random()*m,this.y=d+Math.random()*p,this},setRotation:function(s){return s===void 0&&(s=0),this.rotation=s,this},setAngle:function(s){return s===void 0&&(s=0),this.angle=s,this},setScale:function(s,d){return s===void 0&&(s=1),d===void 0&&(d=s),this.scaleX=s,this.scaleY=d,this},setX:function(s){return s===void 0&&(s=0),this.x=s,this},setY:function(s){return s===void 0&&(s=0),this.y=s,this},setZ:function(s){return s===void 0&&(s=0),this.z=s,this},setW:function(s){return s===void 0&&(s=0),this.w=s,this},getLocalTransformMatrix:function(s){return s===void 0&&(s=new x),s.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(s,d){s===void 0&&(s=new x);var m=this.parentContainer;if(!m)return this.getLocalTransformMatrix(s);var p=!1;for(d||(d=new x,p=!0),s.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);m;)d.applyITRS(m.x,m.y,m._rotation,m._scaleX,m._scaleY),d.multiply(s,s),m=m.parentContainer;return p&&d.destroy(),s},getLocalPoint:function(s,d,m,p){m||(m=new n),p||(p=this.scene.sys.cameras.main);var g=p.scrollX,T=p.scrollY,S=s+g*this.scrollFactorX-g,w=d+T*this.scrollFactorY-T;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(S,w,m):u(S,w,this.x,this.y,this.rotation,this.scaleX,this.scaleY,m),this._originComponent&&(m.x+=this._displayOriginX,m.y+=this._displayOriginY),m},getWorldPoint:function(s,d,m){s===void 0&&(s=new n);var p=this.parentContainer;if(!p)return s.x=this.x,s.y=this.y,s;var g=this.getWorldTransformMatrix(d,m);return s.x=g.tx,s.y=g.ty,s},getParentRotation:function(){for(var s=0,d=this.parentContainer;d;)s+=d.rotation,d=d.parentContainer;return s}};o.exports=c}),61340:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(36383),u=e(26099),r=new a({initialize:function(n,l,c,s,d,m){n===void 0&&(n=1),l===void 0&&(l=0),c===void 0&&(c=0),s===void 0&&(s=1),d===void 0&&(d=0),m===void 0&&(m=0),this.matrix=new Float32Array([n,l,c,s,d,m,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,n=h[0],l=h[1],c=h[2],s=h[3];return n||l?l>0?Math.acos(n/this.scaleX):-Math.acos(n/this.scaleX):c||s?x.TAU-(s>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,n){var l=this.matrix;return l[4]=l[0]*h+l[2]*n+l[4],l[5]=l[1]*h+l[3]*n+l[5],this},scale:function(h,n){var l=this.matrix;return l[0]*=h,l[1]*=h,l[2]*=n,l[3]*=n,this},rotate:function(h){var n=Math.sin(h),l=Math.cos(h),c=this.matrix,s=c[0],d=c[1],m=c[2],p=c[3];return c[0]=s*l+m*n,c[1]=d*l+p*n,c[2]=s*-n+m*l,c[3]=d*-n+p*l,this},multiply:function(h,n){var l=this.matrix,c=h.matrix,s=l[0],d=l[1],m=l[2],p=l[3],g=l[4],T=l[5],S=c[0],w=c[1],A=c[2],M=c[3],R=c[4],P=c[5],b=n===void 0?l:n.matrix;return b[0]=S*s+w*m,b[1]=S*d+w*p,b[2]=A*s+M*m,b[3]=A*d+M*p,b[4]=R*s+P*m+g,b[5]=R*d+P*p+T,b},multiplyWithOffset:function(h,n,l){var c=this.matrix,s=h.matrix,d=c[0],m=c[1],p=c[2],g=c[3],T=c[4],S=c[5],w=n*d+l*p+T,A=n*m+l*g+S,M=s[0],R=s[1],P=s[2],b=s[3],F=s[4],I=s[5];return c[0]=M*d+R*p,c[1]=M*m+R*g,c[2]=P*d+b*p,c[3]=P*m+b*g,c[4]=F*d+I*p+w,c[5]=F*m+I*g+A,this},transform:function(h,n,l,c,s,d){var m=this.matrix,p=m[0],g=m[1],T=m[2],S=m[3],w=m[4],A=m[5];return m[0]=h*p+n*T,m[1]=h*g+n*S,m[2]=l*p+c*T,m[3]=l*g+c*S,m[4]=s*p+d*T+w,m[5]=s*g+d*S+A,this},transformPoint:function(h,n,l){l===void 0&&(l={x:0,y:0});var c=this.matrix,s=c[0],d=c[1],m=c[2],p=c[3],g=c[4],T=c[5];return l.x=h*s+n*m+g,l.y=h*d+n*p+T,l},invert:function(){var h=this.matrix,n=h[0],l=h[1],c=h[2],s=h[3],d=h[4],m=h[5],p=n*s-l*c;return h[0]=s/p,h[1]=-l/p,h[2]=-c/p,h[3]=n/p,h[4]=(c*m-s*d)/p,h[5]=-(n*m-l*d)/p,this},copyFrom:function(h){var n=this.matrix;return n[0]=h.a,n[1]=h.b,n[2]=h.c,n[3]=h.d,n[4]=h.e,n[5]=h.f,this},copyFromArray:function(h){var n=this.matrix;return n[0]=h[0],n[1]=h[1],n[2]=h[2],n[3]=h[3],n[4]=h[4],n[5]=h[5],this},copyToContext:function(h){var n=this.matrix;return h.transform(n[0],n[1],n[2],n[3],n[4],n[5]),h},setToContext:function(h){return h.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),h},copyToArray:function(h){var n=this.matrix;return h===void 0?h=[n[0],n[1],n[2],n[3],n[4],n[5]]:(h[0]=n[0],h[1]=n[1],h[2]=n[2],h[3]=n[3],h[4]=n[4],h[5]=n[5]),h},setTransform:function(h,n,l,c,s,d){var m=this.matrix;return m[0]=h,m[1]=n,m[2]=l,m[3]=c,m[4]=s,m[5]=d,this},decomposeMatrix:function(){var h=this.decomposedMatrix,n=this.matrix,l=n[0],c=n[1],s=n[2],d=n[3],m=l*d-c*s;if(h.translateX=n[4],h.translateY=n[5],l||c){var p=Math.sqrt(l*l+c*c);h.rotation=c>0?Math.acos(l/p):-Math.acos(l/p),h.scaleX=p,h.scaleY=m/p}else if(s||d){var g=Math.sqrt(s*s+d*d);h.rotation=Math.PI*.5-(d>0?Math.acos(-s/g):-Math.acos(s/g)),h.scaleX=m/g,h.scaleY=g}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,n,l,c,s){var d=this.matrix,m=Math.sin(l),p=Math.cos(l);return d[4]=h,d[5]=n,d[0]=p*c,d[1]=m*c,d[2]=-m*s,d[3]=p*s,this},applyInverse:function(h,n,l){l===void 0&&(l=new u);var c=this.matrix,s=c[0],d=c[1],m=c[2],p=c[3],g=c[4],T=c[5],S=1/(s*p+m*-d);return l.x=p*S*h+-m*S*n+(T*m-g*p)*S,l.y=s*S*n+-d*S*h+(-T*s+g*d)*S,l},setQuad:function(h,n,l,c,s,d){s===void 0&&(s=!1),d===void 0&&(d=this.quad);var m=this.matrix,p=m[0],g=m[1],T=m[2],S=m[3],w=m[4],A=m[5],M=h*p+n*T+w,R=h*g+n*S+A,P=h*p+c*T+w,b=h*g+c*S+A,F=l*p+c*T+w,I=l*g+c*S+A,L=l*p+n*T+w,D=l*g+n*S+A;if(s){var O=Math.floor(M+.5),z=Math.floor(R+.5),W=O-M,X=z-R;d[0]=O,d[1]=z,d[2]=P+W,d[3]=b+X,d[4]=F+W,d[5]=I+X,d[6]=L+W,d[7]=D+X}else d[0]=M,d[1]=R,d[2]=P,d[3]=b,d[4]=F,d[5]=I,d[6]=L,d[7]=D;return d},getX:function(h,n){return h*this.a+n*this.c+this.e},getY:function(h,n){return h*this.b+n*this.d+this.f},getXRound:function(h,n,l){var c=this.getX(h,n);return l&&(c=Math.floor(c+.5)),c},getYRound:function(h,n,l){var c=this.getY(h,n);return l&&(c=Math.floor(c+.5)),c},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});o.exports=r}),59715:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(a){a?(this._visible=!0,this.renderFlags|=E):(this._visible=!1,this.renderFlags&=~E)}},setVisible:function(a){return this.visible=a,this}};o.exports=e}),31401:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Alpha:e(16005),AlphaSingle:e(88509),BlendMode:e(90065),ComputedSize:e(94215),Crop:e(61683),Depth:e(89272),Flip:e(54434),FX:e(47059),GetBounds:e(8004),Mask:e(8573),Origin:e(27387),PathFollower:e(37640),Pipeline:e(72699),PostPipeline:e(17581),ScrollFactor:e(80227),Size:e(16736),Texture:e(37726),TextureCrop:e(79812),Tint:e(27472),ToJSON:e(53774),Transform:e(16901),TransformMatrix:e(61340),Visible:e(59715)}}),31559:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),x=e(10312),u=e(83419),r=e(31401),h=e(51708),n=e(95643),l=e(87841),c=e(29959),s=e(36899),d=e(26099),m=new r.TransformMatrix,p=new u({Extends:n,Mixins:[r.AlphaSingle,r.BlendMode,r.ComputedSize,r.Depth,r.Mask,r.PostPipeline,r.Transform,r.Visible,c],initialize:function(T,S,w,A){n.call(this,T,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new r.TransformMatrix,this._sortKey="",this._sysEvents=T.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(S,w),this.setBlendMode(x.SKIP_CHECK),A&&this.add(A)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new l),g.setTo(this.x,this.y,0,0),this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix(),S=T.transformPoint(this.x,this.y);g.setTo(S.x,S.y,0,0)}if(this.list.length>0){var w=this.list,A=new l,M=!1;g.setEmpty();for(var R=0;R<w.length;R++){var P=w[R];P.getBounds&&(P.getBounds(A),M?s(A,g,g):(g.setTo(A.x,A.y,A.width,A.height),M=!0))}}return g},addHandler:function(g){g.once(h.DESTROY,this.onChildDestroyed,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.parentContainer=this,g.removeFromDisplayList(),g.addedToScene())},removeHandler:function(g){g.off(h.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer=null,g.removedFromScene(),g.addToDisplayList())},pointToContainer:function(g,T){T===void 0&&(T=new d),this.parentContainer?this.parentContainer.pointToContainer(g,T):(T.x=g.x,T.y=g.y);var S=m;return S.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),S.invert(),S.transformPoint(g.x,g.y,T),T},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(m,this.localTransform)},add:function(g){return a.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,T){return a.AddAt(this.list,g,T,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,T){return g?(T===void 0&&(T=function(S,w){return S[g]-w[g]}),a.StableSort(this.list,T),this):this},getByName:function(g){return a.GetFirst(this.list,"name",g)},getRandom:function(g,T){return a.GetRandom(this.list,g,T)},getFirst:function(g,T,S,w){return a.GetFirst(this.list,g,T,S,w)},getAll:function(g,T,S,w){return a.GetAll(this.list,g,T,S,w)},count:function(g,T,S,w){return a.CountAllMatching(this.list,g,T,S,w)},swap:function(g,T){return a.Swap(this.list,g,T),this},moveTo:function(g,T){return a.MoveTo(this.list,g,T),this},moveAbove:function(g,T){return a.MoveAbove(this.list,g,T),this},moveBelow:function(g,T){return a.MoveBelow(this.list,g,T),this},remove:function(g,T){var S=a.Remove(this.list,g,this.removeHandler,this);if(T&&S){Array.isArray(S)||(S=[S]);for(var w=0;w<S.length;w++)S[w].destroy()}return this},removeAt:function(g,T){var S=a.RemoveAt(this.list,g,this.removeHandler,this);return T&&S&&S.destroy(),this},removeBetween:function(g,T,S){var w=a.RemoveBetween(this.list,g,T,this.removeHandler,this);if(S)for(var A=0;A<w.length;A++)w[A].destroy();return this},removeAll:function(g){var T=this.list;if(g){for(var S=0;S<T.length;S++)T[S]&&T[S].scene&&(T[S].off(h.DESTROY,this.onChildDestroyed,this),T[S].destroy());this.list=[]}else a.RemoveBetween(T,0,T.length,this.removeHandler,this);return this},bringToTop:function(g){return a.BringToTop(this.list,g),this},sendToBack:function(g){return a.SendToBack(this.list,g),this},moveUp:function(g){return a.MoveUp(this.list,g),this},moveDown:function(g){return a.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(g,T,S){var w=a.Replace(this.list,g,T);return w&&(this.addHandler(T),this.removeHandler(g),S&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,T,S,w){return a.SetAll(this.list,g,T,S,w),this},each:function(g,T){var S=[null],w,A=this.list.slice(),M=A.length;for(w=2;w<arguments.length;w++)S.push(arguments[w]);for(w=0;w<M;w++)S[0]=A[w],g.apply(T,S);return this},iterate:function(g,T){var S=[null],w;for(w=2;w<arguments.length;w++)S.push(arguments[w]);for(w=0;w<this.list.length;w++)S[0]=this.list[w],g.apply(T,S);return this},setScrollFactor:function(g,T,S){return T===void 0&&(T=g),S===void 0&&(S=!1),this.scrollFactorX=g,this.scrollFactorY=T,S&&(a.SetAll(this.list,"scrollFactorX",g),a.SetAll(this.list,"scrollFactorY",T)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(g){a.Remove(this.list,g),this.exclusive&&(g.parentContainer=null,g.removedFromScene())}});o.exports=p}),53584:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x.addToRenderList(a);var r=a.list;if(r.length!==0){var h=a.localTransform;u?(h.loadIdentity(),h.multiply(u),h.translate(a.x,a.y),h.rotate(a.rotation),h.scale(a.scaleX,a.scaleY)):h.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var n=a.blendMode!==-1;n||e.setBlendMode(0);var l=a._alpha,c=a.scrollFactorX,s=a.scrollFactorY;a.mask&&a.mask.preRenderCanvas(e,null,x);for(var d=0;d<r.length;d++){var m=r[d];if(m.willRender(x)){var p=m.alpha,g=m.scrollFactorX,T=m.scrollFactorY;!n&&m.blendMode!==e.currentBlendMode&&e.setBlendMode(m.blendMode),m.setScrollFactor(g*c,T*s),m.setAlpha(p*l),m.renderCanvas(e,m,x,h),m.setAlpha(p),m.setScrollFactor(g,T)}}a.mask&&a.mask.postRenderCanvas(e)}};o.exports=E}),77143:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(31559),u=e(44603),r=e(23568),h=e(95540);u.register("container",function(n,l){n===void 0&&(n={});var c=r(n,"x",0),s=r(n,"y",0),d=h(n,"children",null),m=new x(this.scene,c,s,d);return l!==void 0&&(n.add=l),a(this.scene,m,n),m})}),24961:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31559),x=e(39429);x.register("container",function(u,r,h){return this.displayList.add(new a(this.scene,u,r,h))})}),29959:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(72249),u=e(53584),o.exports={renderWebGL:x,renderCanvas:u}}),72249:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x.addToRenderList(a);var r=a.list,h=r.length;if(h!==0){var n=a.localTransform;u?(n.loadIdentity(),n.multiply(u),n.translate(a.x,a.y),n.rotate(a.rotation),n.scale(a.scaleX,a.scaleY)):n.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),e.pipelines.preBatch(a);var l=a.blendMode!==-1;l||e.setBlendMode(0);for(var c=a.alpha,s=a.scrollFactorX,d=a.scrollFactorY,m=0;m<h;m++){var p=r[m];if(p.willRender(x)){var g,T,S,w;if(p.alphaTopLeft!==void 0)g=p.alphaTopLeft,T=p.alphaTopRight,S=p.alphaBottomLeft,w=p.alphaBottomRight;else{var A=p.alpha;g=A,T=A,S=A,w=A}var M=p.scrollFactorX,R=p.scrollFactorY;!l&&p.blendMode!==e.currentBlendMode&&e.setBlendMode(p.blendMode);var P=p.mask;P&&P.preRenderWebGL(e,p,x);var b=p.type;b!==e.currentType&&(e.newType=!0,e.currentType=b),e.nextTypeMatch=m<h-1?r[m+1].type===e.currentType:!1,p.setScrollFactor(M*s,R*d),p.setAlpha(g*c,T*c,S*c,w*c),p.renderWebGL(e,p,x,n,a),p.setAlpha(g,T,S,w),p.setScrollFactor(M,R),P&&P.postRenderWebGL(e,x),e.newType=!1}}e.pipelines.postBatch(a)}};o.exports=E}),47407:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}),3069:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(441),r=e(95643),h=e(41212),n=e(35846),l=e(44594),c=e(61369),s=new a({Extends:r,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Origin,x.ScrollFactor,x.Transform,x.Visible,u],initialize:function(m,p,g,T,S,w){if(r.call(this,m,"DOMElement"),this.parent=m.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=m.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(p,g),typeof T=="string"?T[0]==="#"?this.setElement(T.substr(1),S,w):this.createElement(T,S,w):T&&this.setElement(T,S,w),m.sys.events.on(l.SLEEP,this.handleSceneEvent,this),m.sys.events.on(l.WAKE,this.handleSceneEvent,this),m.sys.events.on(l.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(d){var m=this.node,p=m.style;m&&(p.display=d.settings.visible?"block":"none")},setSkew:function(d,m){return d===void 0&&(d=0),m===void 0&&(m=d),this.skewX=d,this.skewY=m,this},setPerspective:function(d){return this.parent.style.perspective=d+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(d){this.parent.style.perspective=d+"px"}},addListener:function(d){if(this.node){d=d.split(" ");for(var m=0;m<d.length;m++)this.node.addEventListener(d[m],this.handler,!1)}return this},removeListener:function(d){if(this.node){d=d.split(" ");for(var m=0;m<d.length;m++)this.node.removeEventListener(d[m],this.handler)}return this},dispatchNativeEvent:function(d){this.emit(d.type,d)},createElement:function(d,m,p){return this.setElement(document.createElement(d),m,p)},setElement:function(d,m,p){this.removeElement();var g;if(typeof d=="string"?(d[0]==="#"&&(d=d.substr(1)),g=document.getElementById(d)):typeof d=="object"&&d.nodeType===1&&(g=d),!g)return this;if(this.node=g,m&&h(m))for(var T in m)g.style[T]=m[T];else typeof m=="string"&&(g.style=m);return g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent.appendChild(g),p&&(g.innerText=p),this.updateSize()},createFromCache:function(d,m){var p=this.cache.get(d);return p&&this.createFromHTML(p,m),this},createFromHTML:function(d,m){m===void 0&&(m="div"),this.removeElement();var p=document.createElement(m);return this.node=p,p.style.zIndex="0",p.style.display="inline",p.style.position="absolute",p.phaser=this,this.parent.appendChild(p),p.innerHTML=d,this.updateSize()},removeElement:function(){return this.node&&(n(this.node),this.node=null),this},updateSize:function(){var d=this.node;return this.width=d.clientWidth,this.height=d.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(d,m){if(this.node){for(var p=this.node.querySelectorAll("*"),g=0;g<p.length;g++)if(p[g][d]===m)return p[g]}return null},getChildByID:function(d){return this.getChildByProperty("id",d)},getChildByName:function(d){return this.getChildByProperty("name",d)},setClassName:function(d){return this.node&&(this.node.className=d,this.updateSize()),this},setText:function(d){return this.node&&(this.node.innerText=d,this.updateSize()),this},setHTML:function(d){return this.node&&(this.node.innerHTML=d,this.updateSize()),this},preRender:function(){var d=this.parentContainer,m=this.node;m&&d&&!d.willRender()&&(m.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(l.PRE_RENDER,this.preRender,this)}});o.exports=s}),49381:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47407),x=e(95643),u=e(61340),r=new u,h=new u,n=new u,l=function(c,s,d,m){if(s.node){var p=s.node.style,g=s.scene.sys.settings;if(!p||!g.visible||x.RENDER_MASK!==s.renderFlags||s.cameraFilter!==0&&s.cameraFilter&d.id||s.parentContainer&&!s.parentContainer.willRender()){p.display="none";return}var T=s.parentContainer,S=d.alpha*s.alpha;T&&(S*=T.alpha);var w=r,A=h,M=n,R=0,P=0,b="0%",F="0%";m?(R=s.width*s.scaleX*s.originX,P=s.height*s.scaleY*s.originY,A.applyITRS(s.x-R,s.y-P,s.rotation,s.scaleX,s.scaleY),w.copyFrom(d.matrix),w.multiplyWithOffset(m,-d.scrollX*s.scrollFactorX,-d.scrollY*s.scrollFactorY),A.e=s.x-R,A.f=s.y-P,w.multiply(A,M)):(R=s.width*s.originX,P=s.height*s.originY,A.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),w.copyFrom(d.matrix),b=100*s.originX+"%",F=100*s.originY+"%",A.e-=d.scrollX*s.scrollFactorX,A.f-=d.scrollY*s.scrollFactorY,w.multiply(A,M),M.e-=R,M.f-=P),s.transformOnly||(p.display="block",p.opacity=S,p.zIndex=s._depth,p.pointerEvents=s.pointerEvents,p.mixBlendMode=a[s._blendMode]),p.transform=M.getCSSMatrix()+" skew("+s.skewX+"rad, "+s.skewY+"rad) rotate3d("+s.rotate3d.x+","+s.rotate3d.y+","+s.rotate3d.z+","+s.rotate3d.w+s.rotate3dAngle+")",p.transformOrigin=b+" "+F}};o.exports=l}),2611:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3069),x=e(39429);x.register("dom",function(u,r,h,n,l){var c=new a(this.scene,u,r,h,n,l);return this.displayList.add(c),c})}),441:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(49381),u=e(49381),o.exports={renderWebGL:x,renderCanvas:u}}),62980:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"}),41337:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"}),44947:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"}),49358:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"}),35163:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="created"}),97249:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="error"}),19483:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="locked"}),56059:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"}),26772:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="metadata"}),64437:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="playing"}),83411:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"}),75780:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeked"}),67799:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeking"}),63500:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stalled"}),55541:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"}),53208:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="textureready"}),4992:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"}),12:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unsupported"}),51708:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:e(62980),DESTROY:e(41337),REMOVED_FROM_SCENE:e(44947),VIDEO_COMPLETE:e(49358),VIDEO_CREATED:e(35163),VIDEO_ERROR:e(97249),VIDEO_LOCKED:e(19483),VIDEO_LOOP:e(56059),VIDEO_METADATA:e(26772),VIDEO_PLAY:e(83411),VIDEO_PLAYING:e(64437),VIDEO_SEEKED:e(75780),VIDEO_SEEKING:e(67799),VIDEO_STALLED:e(63500),VIDEO_STOP:e(55541),VIDEO_TEXTURE:e(53208),VIDEO_UNLOCKED:e(4992),VIDEO_UNSUPPORTED:e(12)}}),42421:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(95643),r=e(64993),h=new a({Extends:u,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.Origin,x.ScrollFactor,x.Size,x.Texture,x.Tint,x.Transform,x.Visible,r],initialize:function(l){u.call(this,l,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});o.exports=h}),70217:(()=>{}),56315:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42421),x=e(39429);x.register("extern",function(){var u=new a(this.scene);return this.displayList.add(u),u})}),64993:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(80287),u=e(70217),o.exports={renderWebGL:x,renderCanvas:u}}),80287:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(u,r,h,n){u.pipelines.clear();var l=a(r,h,n).calc;r.render.call(r,u,h,l),u.pipelines.rebind()};o.exports=x}),85592:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}}),43831:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71911),x=e(83419),u=e(85592),r=e(31401),h=e(8497),n=e(95643),l=e(95540),c=e(35154),s=e(36383),d=e(84503),m=new x({Extends:n,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.Transform,r.Visible,r.ScrollFactor,d],initialize:function(g,T){var S=c(T,"x",0),w=c(T,"y",0);n.call(this,g,"Graphics"),this.setPosition(S,w),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(T)},setDefaultStyles:function(p){return c(p,"lineStyle",null)&&(this.defaultStrokeWidth=c(p,"lineStyle.width",1),this.defaultStrokeColor=c(p,"lineStyle.color",16777215),this.defaultStrokeAlpha=c(p,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),c(p,"fillStyle",null)&&(this.defaultFillColor=c(p,"fillStyle.color",16777215),this.defaultFillAlpha=c(p,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(p,g,T){return T===void 0&&(T=1),this.commandBuffer.push(u.LINE_STYLE,p,g,T),this._lineWidth=p,this},fillStyle:function(p,g){return g===void 0&&(g=1),this.commandBuffer.push(u.FILL_STYLE,p,g),this},fillGradientStyle:function(p,g,T,S,w,A,M,R){return w===void 0&&(w=1),A===void 0&&(A=w),M===void 0&&(M=w),R===void 0&&(R=w),this.commandBuffer.push(u.GRADIENT_FILL_STYLE,w,A,M,R,p,g,T,S),this},lineGradientStyle:function(p,g,T,S,w,A){return A===void 0&&(A=1),this.commandBuffer.push(u.GRADIENT_LINE_STYLE,p,A,g,T,S,w),this},beginPath:function(){return this.commandBuffer.push(u.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(u.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(u.FILL_PATH),this},fill:function(){return this.commandBuffer.push(u.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(u.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(u.STROKE_PATH),this},fillCircleShape:function(p){return this.fillCircle(p.x,p.y,p.radius)},strokeCircleShape:function(p){return this.strokeCircle(p.x,p.y,p.radius)},fillCircle:function(p,g,T){return this.beginPath(),this.arc(p,g,T,0,s.PI2),this.fillPath(),this},strokeCircle:function(p,g,T){return this.beginPath(),this.arc(p,g,T,0,s.PI2),this.strokePath(),this},fillRectShape:function(p){return this.fillRect(p.x,p.y,p.width,p.height)},strokeRectShape:function(p){return this.strokeRect(p.x,p.y,p.width,p.height)},fillRect:function(p,g,T,S){return this.commandBuffer.push(u.FILL_RECT,p,g,T,S),this},strokeRect:function(p,g,T,S){var w=this._lineWidth/2,A=p-w,M=p+w;return this.beginPath(),this.moveTo(p,g),this.lineTo(p,g+S),this.strokePath(),this.beginPath(),this.moveTo(p+T,g),this.lineTo(p+T,g+S),this.strokePath(),this.beginPath(),this.moveTo(A,g),this.lineTo(M+T,g),this.strokePath(),this.beginPath(),this.moveTo(A,g+S),this.lineTo(M+T,g+S),this.strokePath(),this},fillRoundedRect:function(p,g,T,S,w){w===void 0&&(w=20);var A=w,M=w,R=w,P=w;typeof w!="number"&&(A=l(w,"tl",20),M=l(w,"tr",20),R=l(w,"bl",20),P=l(w,"br",20));var b=A>=0,F=M>=0,I=R>=0,L=P>=0;return A=Math.abs(A),M=Math.abs(M),R=Math.abs(R),P=Math.abs(P),this.beginPath(),this.moveTo(p+A,g),this.lineTo(p+T-M,g),F?this.arc(p+T-M,g+M,M,-s.TAU,0):this.arc(p+T,g,M,Math.PI,s.TAU,!0),this.lineTo(p+T,g+S-P),L?this.arc(p+T-P,g+S-P,P,0,s.TAU):this.arc(p+T,g+S,P,-s.TAU,Math.PI,!0),this.lineTo(p+R,g+S),I?this.arc(p+R,g+S-R,R,s.TAU,Math.PI):this.arc(p,g+S,R,0,-s.TAU,!0),this.lineTo(p,g+A),b?this.arc(p+A,g+A,A,-Math.PI,-s.TAU):this.arc(p,g,A,s.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(p,g,T,S,w){w===void 0&&(w=20);var A=w,M=w,R=w,P=w,b=Math.min(T,S)/2;typeof w!="number"&&(A=l(w,"tl",20),M=l(w,"tr",20),R=l(w,"bl",20),P=l(w,"br",20));var F=A>=0,I=M>=0,L=R>=0,D=P>=0;return A=Math.min(Math.abs(A),b),M=Math.min(Math.abs(M),b),R=Math.min(Math.abs(R),b),P=Math.min(Math.abs(P),b),this.beginPath(),this.moveTo(p+A,g),this.lineTo(p+T-M,g),this.moveTo(p+T-M,g),I?this.arc(p+T-M,g+M,M,-s.TAU,0):this.arc(p+T,g,M,Math.PI,s.TAU,!0),this.lineTo(p+T,g+S-P),this.moveTo(p+T,g+S-P),D?this.arc(p+T-P,g+S-P,P,0,s.TAU):this.arc(p+T,g+S,P,-s.TAU,Math.PI,!0),this.lineTo(p+R,g+S),this.moveTo(p+R,g+S),L?this.arc(p+R,g+S-R,R,s.TAU,Math.PI):this.arc(p,g+S,R,0,-s.TAU,!0),this.lineTo(p,g+A),this.moveTo(p,g+A),F?this.arc(p+A,g+A,A,-Math.PI,-s.TAU):this.arc(p,g,A,s.TAU,0,!0),this.strokePath(),this},fillPointShape:function(p,g){return this.fillPoint(p.x,p.y,g)},fillPoint:function(p,g,T){return!T||T<1?T=1:(p-=T/2,g-=T/2),this.commandBuffer.push(u.FILL_RECT,p,g,T,T),this},fillTriangleShape:function(p){return this.fillTriangle(p.x1,p.y1,p.x2,p.y2,p.x3,p.y3)},strokeTriangleShape:function(p){return this.strokeTriangle(p.x1,p.y1,p.x2,p.y2,p.x3,p.y3)},fillTriangle:function(p,g,T,S,w,A){return this.commandBuffer.push(u.FILL_TRIANGLE,p,g,T,S,w,A),this},strokeTriangle:function(p,g,T,S,w,A){return this.commandBuffer.push(u.STROKE_TRIANGLE,p,g,T,S,w,A),this},strokeLineShape:function(p){return this.lineBetween(p.x1,p.y1,p.x2,p.y2)},lineBetween:function(p,g,T,S){return this.beginPath(),this.moveTo(p,g),this.lineTo(T,S),this.strokePath(),this},lineTo:function(p,g){return this.commandBuffer.push(u.LINE_TO,p,g),this},moveTo:function(p,g){return this.commandBuffer.push(u.MOVE_TO,p,g),this},strokePoints:function(p,g,T,S){g===void 0&&(g=!1),T===void 0&&(T=!1),S===void 0&&(S=p.length),this.beginPath(),this.moveTo(p[0].x,p[0].y);for(var w=1;w<S;w++)this.lineTo(p[w].x,p[w].y);return g&&this.lineTo(p[0].x,p[0].y),T&&this.closePath(),this.strokePath(),this},fillPoints:function(p,g,T,S){g===void 0&&(g=!1),T===void 0&&(T=!1),S===void 0&&(S=p.length),this.beginPath(),this.moveTo(p[0].x,p[0].y);for(var w=1;w<S;w++)this.lineTo(p[w].x,p[w].y);return g&&this.lineTo(p[0].x,p[0].y),T&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(p,g){g===void 0&&(g=32);var T=p.getPoints(g);return this.strokePoints(T,!0)},strokeEllipse:function(p,g,T,S,w){w===void 0&&(w=32);var A=new h(p,g,T,S),M=A.getPoints(w);return this.strokePoints(M,!0)},fillEllipseShape:function(p,g){g===void 0&&(g=32);var T=p.getPoints(g);return this.fillPoints(T,!0)},fillEllipse:function(p,g,T,S,w){w===void 0&&(w=32);var A=new h(p,g,T,S),M=A.getPoints(w);return this.fillPoints(M,!0)},arc:function(p,g,T,S,w,A,M){return A===void 0&&(A=!1),M===void 0&&(M=0),this.commandBuffer.push(u.ARC,p,g,T,S,w,A,M),this},slice:function(p,g,T,S,w,A,M){return A===void 0&&(A=!1),M===void 0&&(M=0),this.commandBuffer.push(u.BEGIN_PATH),this.commandBuffer.push(u.MOVE_TO,p,g),this.commandBuffer.push(u.ARC,p,g,T,S,w,A,M),this.commandBuffer.push(u.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(u.SAVE),this},restore:function(){return this.commandBuffer.push(u.RESTORE),this},translateCanvas:function(p,g){return this.commandBuffer.push(u.TRANSLATE,p,g),this},scaleCanvas:function(p,g){return this.commandBuffer.push(u.SCALE,p,g),this},rotateCanvas:function(p){return this.commandBuffer.push(u.ROTATE,p),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(p,g,T){var S=this.scene.sys,w=S.game.renderer;g===void 0&&(g=S.scale.width),T===void 0&&(T=S.scale.height),m.TargetCamera.setScene(this.scene),m.TargetCamera.setViewport(0,0,g,T),m.TargetCamera.scrollX=this.x,m.TargetCamera.scrollY=this.y;var A,M,R={willReadFrequently:!0};if(typeof p=="string")if(S.textures.exists(p)){A=S.textures.get(p);var P=A.getSourceImage();P instanceof HTMLCanvasElement&&(M=P.getContext("2d",R))}else A=S.textures.createCanvas(p,g,T),M=A.getSourceImage().getContext("2d",R);else p instanceof HTMLCanvasElement&&(M=p.getContext("2d",R));return M&&(this.renderCanvas(w,this,m.TargetCamera,null,M,!1),A&&A.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});m.TargetCamera=new a,o.exports=m}),32768:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85592),x=e(20926),u=function(r,h,n,l,c,s){var d=h.commandBuffer,m=d.length,p=c||r.currentContext;if(!(m===0||!x(r,p,h,n,l))){n.addToRenderList(h);var g=1,T=1,S=0,w=0,A=1,M=0,R=0,P=0;p.beginPath();for(var b=0;b<m;++b){var F=d[b];switch(F){case a.ARC:p.arc(d[b+1],d[b+2],d[b+3],d[b+4],d[b+5],d[b+6]),b+=7;break;case a.LINE_STYLE:A=d[b+1],S=d[b+2],g=d[b+3],M=(S&16711680)>>>16,R=(S&65280)>>>8,P=S&255,p.strokeStyle="rgba("+M+","+R+","+P+","+g+")",p.lineWidth=A,b+=3;break;case a.FILL_STYLE:w=d[b+1],T=d[b+2],M=(w&16711680)>>>16,R=(w&65280)>>>8,P=w&255,p.fillStyle="rgba("+M+","+R+","+P+","+T+")",b+=2;break;case a.BEGIN_PATH:p.beginPath();break;case a.CLOSE_PATH:p.closePath();break;case a.FILL_PATH:s||p.fill();break;case a.STROKE_PATH:s||p.stroke();break;case a.FILL_RECT:s?p.rect(d[b+1],d[b+2],d[b+3],d[b+4]):p.fillRect(d[b+1],d[b+2],d[b+3],d[b+4]),b+=4;break;case a.FILL_TRIANGLE:p.beginPath(),p.moveTo(d[b+1],d[b+2]),p.lineTo(d[b+3],d[b+4]),p.lineTo(d[b+5],d[b+6]),p.closePath(),s||p.fill(),b+=6;break;case a.STROKE_TRIANGLE:p.beginPath(),p.moveTo(d[b+1],d[b+2]),p.lineTo(d[b+3],d[b+4]),p.lineTo(d[b+5],d[b+6]),p.closePath(),s||p.stroke(),b+=6;break;case a.LINE_TO:p.lineTo(d[b+1],d[b+2]),b+=2;break;case a.MOVE_TO:p.moveTo(d[b+1],d[b+2]),b+=2;break;case a.LINE_FX_TO:p.lineTo(d[b+1],d[b+2]),b+=5;break;case a.MOVE_FX_TO:p.moveTo(d[b+1],d[b+2]),b+=5;break;case a.SAVE:p.save();break;case a.RESTORE:p.restore();break;case a.TRANSLATE:p.translate(d[b+1],d[b+2]),b+=2;break;case a.SCALE:p.scale(d[b+1],d[b+2]),b+=2;break;case a.ROTATE:p.rotate(d[b+1]),b+=1;break;case a.GRADIENT_FILL_STYLE:b+=5;break;case a.GRADIENT_LINE_STYLE:b+=6;break}}p.restore()}};o.exports=u}),87079:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),x=e(43831);a.register("graphics",function(u,r){u===void 0&&(u={}),r!==void 0&&(u.add=r);var h=new x(this.scene,u);return u.add&&this.scene.sys.displayList.add(h),h})}),1201:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43831),x=e(39429);x.register("graphics",function(u){return this.displayList.add(new a(this.scene,u))})}),84503:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(77545),u=e(32768),u=e(32768),o.exports={renderWebGL:x,renderCanvas:u}}),77545:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85592),x=e(91296),u=e(61340),r=e(70554),h=function(d,m,p){this.x=d,this.y=m,this.width=p},n=function(d,m,p){this.points=[],this.pointsLength=1,this.points[0]=new h(d,m,p)},l=[],c=new u,s=function(d,m,p,g){if(m.commandBuffer.length!==0){p.addToRenderList(m);var T=d.pipelines.set(m.pipeline,m);d.pipelines.preBatch(m);for(var S=x(m,p,g).calc,w=c.loadIdentity(),A=m.commandBuffer,M=p.alpha*m.alpha,R=1,P=T.fillTint,b=T.strokeTint,F=0,I=0,L=0,D=.01,O=Math.PI*2,z,W=[],X=0,_=!0,U=null,G=r.getTintAppendFloatAlpha,N=0;N<A.length;N++)switch(z=A[N],z){case a.BEGIN_PATH:{W.length=0,U=null,_=!0;break}case a.CLOSE_PATH:{_=!1,U&&U.points.length&&U.points.push(U.points[0]);break}case a.FILL_PATH:{for(X=0;X<W.length;X++)T.batchFillPath(W[X].points,w,S);break}case a.STROKE_PATH:{for(X=0;X<W.length;X++)T.batchStrokePath(W[X].points,R,_,w,S);break}case a.LINE_STYLE:{R=A[++N];var H=A[++N],V=A[++N]*M,$=G(H,V);b.TL=$,b.TR=$,b.BL=$,b.BR=$;break}case a.FILL_STYLE:{var j=A[++N],k=A[++N]*M,Q=G(j,k);P.TL=Q,P.TR=Q,P.BL=Q,P.BR=Q;break}case a.GRADIENT_FILL_STYLE:{var et=A[++N]*M,at=A[++N]*M,q=A[++N]*M,ft=A[++N]*M;P.TL=G(A[++N],et),P.TR=G(A[++N],at),P.BL=G(A[++N],q),P.BR=G(A[++N],ft);break}case a.GRADIENT_LINE_STYLE:{R=A[++N];var vt=A[++N]*M;b.TL=G(A[++N],vt),b.TR=G(A[++N],vt),b.BL=G(A[++N],vt),b.BR=G(A[++N],vt);break}case a.ARC:{var Tt=0,ct=A[++N],Nt=A[++N],yt=A[++N],it=A[++N],Z=A[++N],lt=A[++N],pt=A[++N];for(Z-=it,lt?Z<-O?Z=-O:Z>0&&(Z=-O+Z%O):Z>O?Z=O:Z<0&&(Z=O+Z%O),U===null&&(U=new n(ct+Math.cos(it)*yt,Nt+Math.sin(it)*yt,R),W.push(U),Tt+=D);Tt<1+pt;)L=Z*Tt+it,F=ct+Math.cos(L)*yt,I=Nt+Math.sin(L)*yt,U.points.push(new h(F,I,R)),Tt+=D;L=Z+it,F=ct+Math.cos(L)*yt,I=Nt+Math.sin(L)*yt,U.points.push(new h(F,I,R));break}case a.FILL_RECT:{T.batchFillRect(A[++N],A[++N],A[++N],A[++N],w,S);break}case a.FILL_TRIANGLE:{T.batchFillTriangle(A[++N],A[++N],A[++N],A[++N],A[++N],A[++N],w,S);break}case a.STROKE_TRIANGLE:{T.batchStrokeTriangle(A[++N],A[++N],A[++N],A[++N],A[++N],A[++N],R,w,S);break}case a.LINE_TO:{U!==null?U.points.push(new h(A[++N],A[++N],R)):(U=new n(A[++N],A[++N],R),W.push(U));break}case a.MOVE_TO:{U=new n(A[++N],A[++N],R),W.push(U);break}case a.SAVE:{l.push(w.copyToArray());break}case a.RESTORE:{w.copyFromArray(l.pop());break}case a.TRANSLATE:{ct=A[++N],Nt=A[++N],w.translate(ct,Nt);break}case a.SCALE:{ct=A[++N],Nt=A[++N],w.scale(ct,Nt);break}case a.ROTATE:{w.rotate(A[++N]);break}}d.pipelines.postBatch(m)}};o.exports=s}),26479:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61061),x=e(83419),u=e(51708),r=e(50792),h=e(46710),n=e(95540),l=e(35154),c=e(97022),s=e(41212),d=e(88492),m=e(35072),p=e(68287),g=new x({Extends:r,initialize:function(S,w,A){r.call(this),A?w&&!Array.isArray(w)&&(w=[w]):Array.isArray(w)?s(w[0])&&(A=w,w=null):s(w)&&(A=w,w=null),this.scene=S,this.children=new m,this.isParent=!0,this.type="Group",this.classType=n(A,"classType",p),this.name=n(A,"name",""),this.active=n(A,"active",!0),this.maxSize=n(A,"maxSize",-1),this.defaultKey=n(A,"defaultKey",null),this.defaultFrame=n(A,"defaultFrame",null),this.runChildUpdate=n(A,"runChildUpdate",!1),this.createCallback=n(A,"createCallback",null),this.removeCallback=n(A,"removeCallback",null),this.createMultipleCallback=n(A,"createMultipleCallback",null),this.internalCreateCallback=n(A,"internalCreateCallback",null),this.internalRemoveCallback=n(A,"internalRemoveCallback",null),w&&this.addMultiple(w),A&&this.createMultiple(A),this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(T,S,w,A,M,R){if(T===void 0&&(T=0),S===void 0&&(S=0),w===void 0&&(w=this.defaultKey),A===void 0&&(A=this.defaultFrame),M===void 0&&(M=!0),R===void 0&&(R=!0),this.isFull())return null;var P=new this.classType(this.scene,T,S,w,A);return P.addToDisplayList(this.scene.sys.displayList),P.addToUpdateList(),P.visible=M,P.setActive(R),this.add(P),P},createMultiple:function(T){if(this.isFull())return[];Array.isArray(T)||(T=[T]);var S=[];if(T[0].key)for(var w=0;w<T.length;w++){var A=this.createFromConfig(T[w]);S=S.concat(A)}return S},createFromConfig:function(T){if(this.isFull())return[];this.classType=n(T,"classType",this.classType);var S=n(T,"key",void 0),w=n(T,"frame",null),A=n(T,"visible",!0),M=n(T,"active",!0),R=[];if(S===void 0)return R;Array.isArray(S)||(S=[S]),Array.isArray(w)||(w=[w]);var P=n(T,"repeat",0),b=n(T,"randomKey",!1),F=n(T,"randomFrame",!1),I=n(T,"yoyo",!1),L=n(T,"quantity",!1),D=n(T,"frameQuantity",1),O=n(T,"max",0),z=d(S,w,{max:O,qty:L||D,random:b,randomB:F,repeat:P,yoyo:I});T.createCallback&&(this.createCallback=T.createCallback),T.removeCallback&&(this.removeCallback=T.removeCallback),T.internalCreateCallback&&(this.internalCreateCallback=T.internalCreateCallback),T.internalRemoveCallback&&(this.internalRemoveCallback=T.internalRemoveCallback);for(var W=0;W<z.length;W++){var X=this.create(0,0,z[W].a,z[W].b,A,M);if(!X)break;R.push(X)}if(c(T,"setXY")){var _=l(T,"setXY.x",0),U=l(T,"setXY.y",0),G=l(T,"setXY.stepX",0),N=l(T,"setXY.stepY",0);a.SetXY(R,_,U,G,N)}if(c(T,"setRotation")){var H=l(T,"setRotation.value",0),V=l(T,"setRotation.step",0);a.SetRotation(R,H,V)}if(c(T,"setScale")){var $=l(T,"setScale.x",1),j=l(T,"setScale.y",$),k=l(T,"setScale.stepX",0),Q=l(T,"setScale.stepY",0);a.SetScale(R,$,j,k,Q)}if(c(T,"setOrigin")){var et=l(T,"setOrigin.x",.5),at=l(T,"setOrigin.y",et),q=l(T,"setOrigin.stepX",0),ft=l(T,"setOrigin.stepY",0);a.SetOrigin(R,et,at,q,ft)}if(c(T,"setAlpha")){var vt=l(T,"setAlpha.value",1),Tt=l(T,"setAlpha.step",0);a.SetAlpha(R,vt,Tt)}if(c(T,"setDepth")){var ct=l(T,"setDepth.value",0),Nt=l(T,"setDepth.step",0);a.SetDepth(R,ct,Nt)}if(c(T,"setScrollFactor")){var yt=l(T,"setScrollFactor.x",1),it=l(T,"setScrollFactor.y",yt),Z=l(T,"setScrollFactor.stepX",0),lt=l(T,"setScrollFactor.stepY",0);a.SetScrollFactor(R,yt,it,Z,lt)}var pt=n(T,"hitArea",null),Rt=n(T,"hitAreaCallback",null);pt&&a.SetHitArea(R,pt,Rt);var At=n(T,"gridAlign",!1);return At&&a.GridAlign(R,At),this.createMultipleCallback&&this.createMultipleCallback.call(this,R),R},preUpdate:function(T,S){if(!(!this.runChildUpdate||this.children.size===0))for(var w=this.children.entries.slice(),A=0;A<w.length;A++){var M=w[A];M.active&&M.update(T,S)}},add:function(T,S){return S===void 0&&(S=!1),this.isFull()?this:(this.children.set(T),this.internalCreateCallback&&this.internalCreateCallback.call(this,T),this.createCallback&&this.createCallback.call(this,T),S&&(T.addToDisplayList(this.scene.sys.displayList),T.addToUpdateList()),T.on(u.DESTROY,this.remove,this),this)},addMultiple:function(T,S){if(S===void 0&&(S=!1),Array.isArray(T))for(var w=0;w<T.length;w++)this.add(T[w],S);return this},remove:function(T,S,w){return S===void 0&&(S=!1),w===void 0&&(w=!1),this.children.contains(T)?(this.children.delete(T),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,T),this.removeCallback&&this.removeCallback.call(this,T),T.off(u.DESTROY,this.remove,this),w?T.destroy():S&&(T.removeFromDisplayList(),T.removeFromUpdateList()),this):this},clear:function(T,S){T===void 0&&(T=!1),S===void 0&&(S=!1);for(var w=this.children,A=0;A<w.size;A++){var M=w.entries[A];M.off(u.DESTROY,this.remove,this),S?M.destroy():T&&(M.removeFromDisplayList(),M.removeFromUpdateList())}return this.children.clear(),this},contains:function(T){return this.children.contains(T)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(T,S,w,A){return h(this.children.entries,T,S,w,A)},getFirst:function(T,S,w,A,M,R,P){return this.getHandler(!0,1,T,S,w,A,M,R,P)},getFirstNth:function(T,S,w,A,M,R,P,b){return this.getHandler(!0,T,S,w,A,M,R,P,b)},getLast:function(T,S,w,A,M,R,P){return this.getHandler(!1,1,T,S,w,A,M,R,P)},getLastNth:function(T,S,w,A,M,R,P,b){return this.getHandler(!1,T,S,w,A,M,R,P,b)},getHandler:function(T,S,w,A,M,R,P,b,F){w===void 0&&(w=!1),A===void 0&&(A=!1);var I,L,D=0,O=this.children.entries;if(T)for(L=0;L<O.length;L++)if(I=O[L],I.active===w){if(D++,D===S)break}else I=null;else for(L=O.length-1;L>=0;L--)if(I=O[L],I.active===w){if(D++,D===S)break}else I=null;return I?(typeof M=="number"&&(I.x=M),typeof R=="number"&&(I.y=R),I):A?this.create(M,R,P,b,F):null},get:function(T,S,w,A,M){return this.getFirst(!1,!0,T,S,w,A,M)},getFirstAlive:function(T,S,w,A,M,R){return this.getFirst(!0,T,S,w,A,M,R)},getFirstDead:function(T,S,w,A,M,R){return this.getFirst(!1,T,S,w,A,M,R)},playAnimation:function(T,S){return a.PlayAnimation(this.children.entries,T,S),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(T){T===void 0&&(T=!0);for(var S=0,w=0;w<this.children.size;w++)this.children.entries[w].active===T&&S++;return S},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var T=this.getTotalUsed(),S=this.maxSize===-1?999999999999:this.maxSize;return S-T},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},propertyValueSet:function(T,S,w,A,M){return a.PropertyValueSet(this.children.entries,T,S,w,A,M),this},propertyValueInc:function(T,S,w,A,M){return a.PropertyValueInc(this.children.entries,T,S,w,A,M),this},setX:function(T,S){return a.SetX(this.children.entries,T,S),this},setY:function(T,S){return a.SetY(this.children.entries,T,S),this},setXY:function(T,S,w,A){return a.SetXY(this.children.entries,T,S,w,A),this},incX:function(T,S){return a.IncX(this.children.entries,T,S),this},incY:function(T,S){return a.IncY(this.children.entries,T,S),this},incXY:function(T,S,w,A){return a.IncXY(this.children.entries,T,S,w,A),this},shiftPosition:function(T,S,w){return a.ShiftPosition(this.children.entries,T,S,w),this},angle:function(T,S){return a.Angle(this.children.entries,T,S),this},rotate:function(T,S){return a.Rotate(this.children.entries,T,S),this},rotateAround:function(T,S){return a.RotateAround(this.children.entries,T,S),this},rotateAroundDistance:function(T,S,w){return a.RotateAroundDistance(this.children.entries,T,S,w),this},setAlpha:function(T,S){return a.SetAlpha(this.children.entries,T,S),this},setTint:function(T,S,w,A){return a.SetTint(this.children.entries,T,S,w,A),this},setOrigin:function(T,S,w,A){return a.SetOrigin(this.children.entries,T,S,w,A),this},scaleX:function(T,S){return a.ScaleX(this.children.entries,T,S),this},scaleY:function(T,S){return a.ScaleY(this.children.entries,T,S),this},scaleXY:function(T,S,w,A){return a.ScaleXY(this.children.entries,T,S,w,A),this},setDepth:function(T,S){return a.SetDepth(this.children.entries,T,S),this},setBlendMode:function(T){return a.SetBlendMode(this.children.entries,T),this},setHitArea:function(T,S){return a.SetHitArea(this.children.entries,T,S),this},shuffle:function(){return a.Shuffle(this.children.entries),this},kill:function(T){this.children.contains(T)&&T.setActive(!1)},killAndHide:function(T){this.children.contains(T)&&(T.setActive(!1),T.setVisible(!1))},setVisible:function(T,S,w){return a.SetVisible(this.children.entries,T,S,w),this},toggleVisible:function(){return a.ToggleVisible(this.children.entries),this},destroy:function(T,S){T===void 0&&(T=!1),S===void 0&&(S=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(u.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(S,T),this.scene=void 0,this.children=void 0)}});o.exports=g}),94975:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),x=e(26479);a.register("group",function(u){return new x(this.scene,null,u)})}),3385:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26479),x=e(39429);x.register("group",function(u,r){return this.updateList.add(new a(this.scene,u,r))})}),88571:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(95643),r=e(59819),h=new a({Extends:u,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.TextureCrop,x.Tint,x.Transform,x.Visible,r],initialize:function(l,c,s,d,m){u.call(this,l,"Image"),this._crop=this.resetCropObject(),this.setTexture(d,m),this.setPosition(c,s),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=h}),40652:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x.addToRenderList(a),e.batchSprite(a,a.frame,x,u)};o.exports=E}),82459:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(88571);x.register("image",function(h,n){h===void 0&&(h={});var l=u(h,"key",null),c=u(h,"frame",null),s=new r(this.scene,0,0,l,c);return n!==void 0&&(h.add=n),a(this.scene,s,h),s})}),2117:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88571),x=e(39429);x.register("image",function(u,r,h,n){return this.displayList.add(new a(this.scene,u,r,h,n))})}),59819:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(99517),u=e(40652),o.exports={renderWebGL:x,renderCanvas:u}}),99517:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x.addToRenderList(a),this.pipeline.batchSprite(a,x,u)};o.exports=E}),77856:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Events:e(51708),DisplayList:e(8050),GameObjectCreator:e(44603),GameObjectFactory:e(39429),UpdateList:e(45027),Components:e(31401),GetCalcMatrix:e(91296),BuildGameObject:e(25305),BuildGameObjectAnimation:e(13059),GameObject:e(95643),BitmapText:e(22186),Blitter:e(6107),Bob:e(46590),Container:e(31559),DOMElement:e(3069),DynamicBitmapText:e(2638),Extern:e(42421),Graphics:e(43831),Group:e(26479),Image:e(88571),Layer:e(93595),Particles:e(18404),PathFollower:e(1159),RenderTexture:e(591),RetroFont:e(196),Rope:e(77757),Sprite:e(68287),Text:e(50171),GetTextSize:e(14220),MeasureText:e(79557),TextStyle:e(35762),TileSprite:e(20839),Zone:e(41481),Video:e(18471),Shape:e(17803),Arc:e(23629),Curve:e(89),Ellipse:e(19921),Grid:e(30479),IsoBox:e(61475),IsoTriangle:e(16933),Line:e(57847),Polygon:e(24949),Rectangle:e(74561),Star:e(55911),Triangle:e(36931),Factories:{Blitter:e(12709),Container:e(24961),DOMElement:e(2611),DynamicBitmapText:e(72566),Extern:e(56315),Graphics:e(1201),Group:e(3385),Image:e(2117),Layer:e(20005),Particles:e(676),PathFollower:e(90145),RenderTexture:e(60505),Rope:e(96819),Sprite:e(46409),StaticBitmapText:e(34914),Text:e(68005),TileSprite:e(91681),Zone:e(84175),Video:e(89025),Arc:e(42563),Curve:e(40511),Ellipse:e(1543),Grid:e(34137),IsoBox:e(3933),IsoTriangle:e(49803),Line:e(2481),Polygon:e(64827),Rectangle:e(87959),Star:e(93697),Triangle:e(45245)},Creators:{Blitter:e(9403),Container:e(77143),DynamicBitmapText:e(11164),Graphics:e(87079),Group:e(94975),Image:e(82459),Layer:e(25179),Particles:e(92730),RenderTexture:e(34495),Rope:e(26209),Sprite:e(15567),StaticBitmapText:e(57336),Text:e(71259),TileSprite:e(14167),Zone:e(95261),Video:e(11511)}};a.Shader=e(20071),a.Mesh=e(4703),a.NineSlice=e(28103),a.PointLight=e(80321),a.Plane=e(33663),a.Factories.Shader=e(74177),a.Factories.Mesh=e(9225),a.Factories.NineSlice=e(47521),a.Factories.PointLight=e(71255),a.Factories.Plane=e(30985),a.Creators.Shader=e(54935),a.Creators.Mesh=e(20527),a.Creators.NineSlice=e(28279),a.Creators.PointLight=e(39829),a.Creators.Plane=e(56015),a.Light=e(41432),a.LightsManager=e(61356),a.LightsPlugin=e(88992),o.exports=a}),93595:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(83419),u=e(31401),r=e(53774),h=e(45893),n=e(50792),l=e(51708),c=e(73162),s=e(33963),d=e(44594),m=e(19186),p=new x({Extends:c,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.PostPipeline,u.Visible,n,s],initialize:function(T,S){c.call(this,T),n.call(this),this.scene=T,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=T.sys,this.events=T.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),S&&this.add(S),T.sys.queueDepthSort()},setActive:function(g){return this.active=g,this},setName:function(g){return this.name=g,this},setState:function(g){return this.state=g,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(g,T){return this.data||(this.data=new h(this)),this.data.set(g,T),this},incData:function(g,T){return this.data||(this.data=new h(this)),this.data.inc(g,T),this},toggleData:function(g){return this.data||(this.data=new h(this)),this.data.toggle(g),this},getData:function(g){return this.data||(this.data=new h(this)),this.data.get(g)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(g){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&g.id)},getIndexList:function(){for(var g=this,T=this.parentContainer,S=[];T&&(S.unshift(T.getIndex(g)),g=T,T.parentContainer);)T=T.parentContainer;return S.unshift(this.displayList.getIndex(g)),S},addChildCallback:function(g){var T=g.displayList;T&&T!==this&&g.removeFromDisplayList(),g.displayList||(this.queueDepthSort(),g.displayList=this,g.emit(l.ADDED_TO_SCENE,g,this.scene),this.events.emit(d.ADDED_TO_SCENE,g,this.scene))},removeChildCallback:function(g){this.queueDepthSort(),g.displayList=null,g.emit(l.REMOVED_FROM_SCENE,g,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,g,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(m(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(g,T){return g._depth-T._depth},getChildren:function(){return this.list},addToDisplayList:function(g){return g===void 0&&(g=this.scene.sys.displayList),this.displayList&&this.displayList!==g&&this.removeFromDisplayList(),g.exists(this)||(this.displayList=g,g.add(this,!0),g.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),g.events.emit(d.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var g=this.displayList||this.scene.sys.displayList;return g.exists(this)&&(g.remove(this,!0),g.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),g.events.emit(d.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var g=null;return this.parentContainer?g=this.parentContainer.list:this.displayList&&(g=this.displayList.list),g},destroy:function(g){if(!(!this.scene||this.ignoreDestroy)){this.emit(l.DESTROY,this);for(var T=this.list;T.length;)T[0].destroy(g);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});o.exports=p}),2956:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=a.list;if(u.length!==0){a.depthSort();var r=a.blendMode!==-1;r||e.setBlendMode(0);var h=a._alpha;a.mask&&a.mask.preRenderCanvas(e,null,x);for(var n=0;n<u.length;n++){var l=u[n];if(l.willRender(x)){var c=l.alpha;!r&&l.blendMode!==e.currentBlendMode&&e.setBlendMode(l.blendMode),l.setAlpha(c*h),l.renderCanvas(e,l,x),l.setAlpha(c)}}a.mask&&a.mask.postRenderCanvas(e)}};o.exports=E}),25179:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(93595),u=e(44603),r=e(23568);u.register("layer",function(h,n){h===void 0&&(h={});var l=r(h,"children",null),c=new x(this.scene,l);return n!==void 0&&(h.add=n),a(this.scene,c,h),c})}),20005:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93595),x=e(39429);x.register("layer",function(u){return this.displayList.add(new a(this.scene,u))})}),33963:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(15869),u=e(2956),o.exports={renderWebGL:x,renderCanvas:u}}),15869:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=a.list,r=u.length;if(r!==0){a.depthSort(),e.pipelines.preBatch(a);var h=a.blendMode!==-1;h||e.setBlendMode(0);for(var n=a.alpha,l=0;l<r;l++){var c=u[l];if(c.willRender(x)){var s,d,m,p;if(c.alphaTopLeft!==void 0)s=c.alphaTopLeft,d=c.alphaTopRight,m=c.alphaBottomLeft,p=c.alphaBottomRight;else{var g=c.alpha;s=g,d=g,m=g,p=g}!h&&c.blendMode!==e.currentBlendMode&&e.setBlendMode(c.blendMode);var T=c.mask;T&&T.preRenderWebGL(e,c,x);var S=c.type;S!==e.currentType&&(e.newType=!0,e.currentType=S),e.nextTypeMatch=l<r-1?u[l+1].type===e.currentType:!1,c.setAlpha(s*n,d*n,m*n,p*n),c.renderWebGL(e,c,x),c.setAlpha(s,d,m,p),T&&T.postRenderWebGL(e,x),e.newType=!1}}e.pipelines.postBatch(a)}};o.exports=E}),41432:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),x=e(83419),u=e(31401),r=e(51767),h=e(70554),n=new x({Extends:a,Mixins:[u.Origin,u.ScrollFactor,u.Visible],initialize:function(c,s,d,m,p,g,T){a.call(this,c,s,d),this.color=new r(m,p,g),this.intensity=T,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(d)},displayWidth:{get:function(){return this.diameter},set:function(l){this.diameter=l}},displayHeight:{get:function(){return this.diameter},set:function(l){this.diameter=l}},width:{get:function(){return this.diameter},set:function(l){this.diameter=l}},height:{get:function(){return this.diameter},set:function(l){this.diameter=l}},willRender:function(l){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},setColor:function(l){var c=h.getFloatsFromUintRGB(l);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(l){return this.intensity=l,this},setRadius:function(l){return this.radius=l,this}});n.RENDER_MASK=15,o.exports=n}),61356:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81491),x=e(83419),u=e(20339),r=e(41432),h=e(80321),n=e(51767),l=e(19133),c=e(19186),s=e(70554),d=new x({initialize:function(){this.lights=[],this.ambientColor=new n(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(m,p,g,T,S,w){return this.systems.displayList.add(new h(this.scene,m,p,g,T,S,w))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(m){for(var p=this.lights,g=m.worldView,T=[],S=0;S<p.length;S++){var w=p[S];w.willRender(m)&&a(w,g)&&T.push({light:w,distance:u(w.x,w.y,g.centerX,g.centerY)})}return T.length>this.maxLights&&(c(T,this.sortByDistance),T=T.slice(0,this.maxLights)),this.visibleLights=T.length,T},sortByDistance:function(m,p){return m.distance>=p.distance},setAmbientColor:function(m){var p=s.getFloatsFromUintRGB(m);return this.ambientColor.set(p[0],p[1],p[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(m,p,g,T,S){m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=128),T===void 0&&(T=16777215),S===void 0&&(S=1);var w=s.getFloatsFromUintRGB(T),A=new r(m,p,g,w[0],w[1],w[2],S);return this.lights.push(A),A},removeLight:function(m){var p=this.lights.indexOf(m);return p>=0&&l(this.lights,p),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});o.exports=d}),88992:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(61356),u=e(37277),r=e(44594),h=new a({Extends:x,initialize:function(l){this.scene=l,this.systems=l.sys,l.sys.settings.isBooted||l.sys.events.once(r.BOOT,this.boot,this),x.call(this)},boot:function(){var n=this.systems.events;n.on(r.SHUTDOWN,this.shutdown,this),n.on(r.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});u.register("LightsPlugin",h,"lights"),o.exports=h}),4703:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(39506),r=e(83997),h=e(95643),n=e(34684),l=e(92515),c=e(91296),s=e(37867),d=e(29807),m=e(43396),p=e(19186),g=e(25836),T=e(39318),S=new a({Extends:h,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.Texture,x.Transform,x.Visible,d],initialize:function(A,M,R,P,b,F,I,L,D,O,z,W){M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P="__WHITE"),h.call(this,A,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new s,this.viewPosition=new g,this.viewMatrix=new s,this.projectionMatrix=new s,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var X=A.sys.renderer;this.setPosition(M,R),this.setTexture(P,b),this.setSize(X.width,X.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(X.width,X.height),F&&this.addVertices(F,I,L,D,O,z,W)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(w){return this.viewPosition.addScale(g.LEFT,w),this.dirtyCache[10]=1,this},panY:function(w){return this.viewPosition.y+=g.DOWN.y*w,this.dirtyCache[10]=1,this},panZ:function(w){return this.viewPosition.z+=w,this.dirtyCache[10]=1,this},setPerspective:function(w,A,M,R,P){return M===void 0&&(M=45),R===void 0&&(R=.01),P===void 0&&(P=1e3),this.fov=M,this.projectionMatrix.perspective(u(M),w/A,R,P),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(w,A,M,R){return w===void 0&&(w=this.scene.sys.renderer.getAspectRatio()),A===void 0&&(A=1),M===void 0&&(M=-1e3),R===void 0&&(R=1e3),this.fov=0,this.projectionMatrix.ortho(-w,w,-A,A,M,R),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(w){w.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(w,A,M,R,P,b,F,I,L){var D=this.scene.sys.cache.obj.get(w),O;return D&&(O=n(D,this,A,M,R,P,b,F,I,L)),(!O||O.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",w),this},sortByDepth:function(w,A){return w.depth-A.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(w,A,M,R,P,b,F){var I=new T(w,A,M,R,P,b,F);return this.vertices.push(I),I},addFace:function(w,A,M){var R=new r(w,A,M);return this.faces.push(R),this.dirtyCache[9]=-1,R},addVertices:function(w,A,M,R,P,b,F){var I=l(w,A,M,R,P,b,F);return I?(this.faces=this.faces.concat(I.faces),this.vertices=this.vertices.concat(I.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(w){return this.faces[w]},hasFaceAt:function(w,A,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var R=c(this,M).calc,P=this.faces,b=0;b<P.length;b++){var F=P[b];if(F.contains(w,A,R))return!0}return!1},getFaceAt:function(w,A,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var R=c(this,M).calc,P=this.faces,b=[],F=0;F<P.length;F++){var I=P[F];I.contains(w,A,R)&&b.push(I)}return p(b,this.sortByDepth)},setDebug:function(w,A){return this.debugGraphic=w,!w&&!A?this.debugCallback=null:A?this.debugCallback=A:this.debugCallback=this.renderDebug,this},isDirty:function(){var w=this.modelPosition,A=this.modelRotation,M=this.modelScale,R=this.dirtyCache,P=w.x,b=w.y,F=w.z,I=A.x,L=A.y,D=A.z,O=M.x,z=M.y,W=M.z,X=this.getFaceCount(),_=R[0],U=R[1],G=R[2],N=R[3],H=R[4],V=R[5],$=R[6],j=R[7],k=R[8],Q=R[9];return R[0]=P,R[1]=b,R[2]=F,R[3]=I,R[4]=L,R[5]=D,R[6]=O,R[7]=z,R[8]=W,R[9]=X,_!==P||U!==b||G!==F||N!==I||H!==L||V!==D||$!==O||j!==z||k!==W||Q!==X},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var w=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!w[10]&&!this.isDirty())){var A=this.width,M=this.height,R=this.viewMatrix,P=this.viewPosition;w[10]&&(R.identity(),R.translate(P),R.invert(),w[10]=0);var b=this.transformMatrix;b.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var F=P.z,I=this.faces,L=0;L<I.length;L++)I[L].transformCoordinatesLocal(b,A,M,F);this.depthSort()}},renderDebug:function(w,A){for(var M=w.debugGraphic,R=0;R<A.length;R++){var P=A[R],b=P.vertex1.tx,F=P.vertex1.ty,I=P.vertex2.tx,L=P.vertex2.ty,D=P.vertex3.tx,O=P.vertex3.ty;M.strokeTriangle(b,F,I,L,D,O)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(w){w===void 0&&(w={});var A=(function(M,R,P){for(var b=this.faces,F=0;F<b.length;F++){var I=b[F];if(I.contains(R,P))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,w,A),this},setTint:function(w){w===void 0&&(w=16777215);for(var A=this.vertices,M=0;M<A.length;M++)A[M].color=w;return this},uvScroll:function(w,A){for(var M=this.faces,R=0;R<M.length;R++)M[R].scrollUV(w,A);return this},uvScale:function(w,A){for(var M=this.faces,R=0;R<M.length;R++)M[R].scaleUV(w,A);return this},tint:{set:function(w){this.setTint(w)}},rotateX:{get:function(){return m(this.modelRotation.x)},set:function(w){this.modelRotation.x=u(w)}},rotateY:{get:function(){return m(this.modelRotation.y)},set:function(w){this.modelRotation.y=u(w)}},rotateZ:{get:function(){return m(this.modelRotation.z)},set:function(w){this.modelRotation.z=u(w)}}});o.exports=S}),36488:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};o.exports=E}),20527:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(35154),h=e(4703);x.register("mesh",function(n,l){n===void 0&&(n={});var c=u(n,"key",null),s=u(n,"frame",null),d=r(n,"vertices",[]),m=r(n,"uvs",[]),p=r(n,"indicies",[]),g=r(n,"containsZ",!1),T=r(n,"normals",[]),S=r(n,"colors",16777215),w=r(n,"alphas",1),A=new h(this.scene,0,0,c,s,d,m,p,g,T,S,w);return l!==void 0&&(n.add=l),a(this.scene,A,n),A})}),9225:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4703),x=e(39429);x.register("mesh",function(u,r,h,n,l,c,s,d,m,p,g){return this.displayList.add(new a(this.scene,u,r,h,n,l,c,s,d,m,p,g))})}),29807:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(48833),u=e(36488),o.exports={renderWebGL:x,renderCanvas:u}}),48833:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(u,r,h,n){var l=r.faces,c=l.length;if(c!==0){h.addToRenderList(r);var s=u.pipelines.set(r.pipeline,r),d=a(r,h,n).calc;u.pipelines.preBatch(r);for(var m=s.setGameObject(r),p=s.vertexViewF32,g=s.vertexViewU32,T=s.vertexCount*s.currentShader.vertexComponentCount-1,S=r.tintFill,w=[],A=r.debugCallback,M=d.a,R=d.b,P=d.c,b=d.d,F=d.e,I=d.f,L=r.viewPosition.z,D=r.hideCCW,O=h.roundPixels,z=h.alpha*r.alpha,W=0,X=0;X<c;X++){var _=l[X];_.isInView(h,D,L,z,M,R,P,b,F,I,O)&&(s.shouldFlush(3)&&(s.flush(),m=s.setGameObject(r),T=s.vertexCount*s.currentShader.vertexComponentCount-1),T=_.load(p,g,T,m,S),W++,s.vertexCount+=3,s.currentBatch.count=s.vertexCount-s.currentBatch.start,A&&w.push(_))}r.totalFrame+=W,A&&A.call(r,r,w),u.pipelines.postBatch(r)}};o.exports=x}),28103:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(95643),r=e(78023),h=e(39318),n=new a({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,r],initialize:function(c,s,d,m,p,g,T,S,w,A,M){u.call(this,c,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var R=c.textures.getFrame(m,p);this.is3Slice=!A&&!M,R&&R.scale9&&(this.is3Slice=R.is3Slice);for(var P=this.is3Slice?18:54,b=0;b<P;b++)this.vertices.push(new h);this.setPosition(s,d),this.setTexture(m,p),this.setSlices(g,T,S,w,A,M,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(l,c,s,d,m,p,g){s===void 0&&(s=10),d===void 0&&(d=10),m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=!1);var T=this.frame,S=!1;if(this.is3Slice&&g&&m!==0&&p!==0&&(S=!0),S)console.warn("Cannot change 9 slice to 3 slice");else{if(T&&T.scale9&&!g){var w=T.data.scale9Borders,A=w.x,M=w.y;s=A,d=T.width-w.w-A,m=M,p=T.height-w.h-M,l===void 0&&(l=T.width),c===void 0&&(c=T.height)}else l===void 0&&(l=256),c===void 0&&(c=256);this._width=l,this._height=c,this.leftWidth=s,this.rightWidth=d,this.topHeight=m,this.bottomHeight=p,this.is3Slice&&(c=T.height,this._height=c,this.topHeight=c,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var l=this.leftWidth,c=this.rightWidth,s=this.topHeight,d=this.bottomHeight,m=this.frame.width,p=this.frame.height;this.updateQuadUVs(0,0,0,l/m,s/p),this.updateQuadUVs(6,l/m,0,1-c/m,s/p),this.updateQuadUVs(12,1-c/m,0,1,s/p),this.is3Slice||(this.updateQuadUVs(18,0,s/p,l/m,1-d/p),this.updateQuadUVs(24,l/m,s/p,1-c/m,1-d/p),this.updateQuadUVs(30,1-c/m,s/p,1,1-d/p),this.updateQuadUVs(36,0,1-d/p,l/m,1),this.updateQuadUVs(42,l/m,1-d/p,1-c/m,1),this.updateQuadUVs(48,1-c/m,1-d/p,1,1))},updateVertices:function(){var l=this.leftWidth,c=this.rightWidth,s=this.topHeight,d=this.bottomHeight,m=this.width,p=this.height;this.updateQuad(0,-.5,.5,-.5+l/m,.5-s/p),this.updateQuad(6,-.5+l/m,.5,.5-c/m,.5-s/p),this.updateQuad(12,.5-c/m,.5,.5,.5-s/p),this.is3Slice||(this.updateQuad(18,-.5,.5-s/p,-.5+l/m,-.5+d/p),this.updateQuad(24,-.5+l/m,.5-s/p,.5-c/m,-.5+d/p),this.updateQuad(30,.5-c/m,.5-s/p,.5,-.5+d/p),this.updateQuad(36,-.5,-.5+d/p,-.5+l/m,-.5),this.updateQuad(42,-.5+l/m,-.5+d/p,.5-c/m,-.5),this.updateQuad(48,.5-c/m,-.5+d/p,.5,-.5))},updateQuad:function(l,c,s,d,m){var p=this.width,g=this.height,T=this.originX,S=this.originY,w=this.vertices;w[l+0].resize(c,s,p,g,T,S),w[l+1].resize(c,m,p,g,T,S),w[l+2].resize(d,s,p,g,T,S),w[l+3].resize(c,m,p,g,T,S),w[l+4].resize(d,m,p,g,T,S),w[l+5].resize(d,s,p,g,T,S)},updateQuadUVs:function(l,c,s,d,m){var p=this.vertices,g=this.frame,T=g.u0,S=g.v0,w=g.u1,A=g.v1;if(T!==0||w!==1){var M=w-T;c=T+c*M,d=T+d*M}if(S!==0||A!==1){var R=A-S;s=S+s*R,m=S+m*R}p[l+0].setUVs(c,s),p[l+1].setUVs(c,m),p[l+2].setUVs(d,s),p[l+3].setUVs(c,m),p[l+4].setUVs(d,m),p[l+5].setUVs(d,s)},clearTint:function(){return this.setTint(16777215),this},setTint:function(l){return l===void 0&&(l=16777215),this.tint=l,this.tintFill=!1,this},setTintFill:function(l){return this.setTint(l),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(l){this._width=Math.max(l,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(l){this.is3Slice||(this._height=Math.max(l,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,c){this.width=l,this.height=c,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},setDisplaySize:function(l,c){return this.displayWidth=l,this.displayHeight=c,this},originX:{get:function(){return this._originX},set:function(l){this._originX=l,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(l){this._originY=l,this.updateVertices()}},setOrigin:function(l,c){return l===void 0&&(l=.5),c===void 0&&(c=l),this._originX=l,this._originY=c,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var l=this.frame.height;this._height=l,this.topHeight=l,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});o.exports=n}),28279:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(35154),h=e(28103);x.register("nineslice",function(n,l){n===void 0&&(n={});var c=u(n,"key",null),s=u(n,"frame",null),d=r(n,"width",256),m=r(n,"height",256),p=r(n,"leftWidth",10),g=r(n,"rightWidth",10),T=r(n,"topHeight",0),S=r(n,"bottomHeight",0),w=new h(this.scene,0,0,c,s,d,m,p,g,T,S);return l!==void 0&&(n.add=l),a(this.scene,w,n),w})}),47521:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28103),x=e(39429);x.register("nineslice",function(u,r,h,n,l,c,s,d,m,p){return this.displayList.add(new a(this.scene,u,r,h,n,l,c,s,d,m,p))})}),78023:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(52230),o.exports={renderWebGL:x,renderCanvas:u}}),52230:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),u=function(r,h,n,l){var c=h.vertices,s=c.length;if(s!==0){n.addToRenderList(h);var d=r.pipelines.set(h.pipeline,h),m=a(h,n,l,!1).calc;r.pipelines.preBatch(h);var p=d.setGameObject(h),g=d.vertexViewF32,T=d.vertexViewU32,S=d.vertexCount*d.currentShader.vertexComponentCount-1,w=n.roundPixels,A=h.tintFill,M=n.alpha*h.alpha,R=x.getTintAppendFloatAlpha(h.tint,M),P=d.vertexAvailable(),b=-1;P<s&&(b=P);for(var F=0;F<s;F++){var I=c[F];F===b&&(d.flush(),p=d.setGameObject(h),S=0),g[++S]=m.getXRound(I.vx,I.vy,w),g[++S]=m.getYRound(I.vx,I.vy,w),g[++S]=I.u,g[++S]=I.v,g[++S]=p,g[++S]=A,T[++S]=R,d.vertexCount++,d.currentBatch.count=d.vertexCount-d.currentBatch.start}r.pipelines.postBatch(h)}};o.exports=u}),76472:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(44777),u=e(37589),r=e(6113),h=e(91389),n=e(90664),l=new a({Extends:x,initialize:function(s){x.call(this,s,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var c=this.propertyValue,s=c,d=this.defaultEmit,m=this.defaultUpdate;if(this.method===9){this.start=c[0],this.ease=r("Linear"),this.interpolation=h("linear"),d=this.easedValueEmit,m=this.easeValueUpdate,s=c[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var p=0;p<c.length;p++){var g=n(c[p]);this.r.push(g.r),this.g.push(g.g),this.b.push(g.b)}}return this.onEmit=d,this.onUpdate=m,this.current=s,this},setEase:function(c){this.easeName=c,this.ease=r(c)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(c,s,d){var m=this.ease(d),p=this.interpolation(this.r,m),g=this.interpolation(this.g,m),T=this.interpolation(this.b,m),S=u(p,g,T);return this.current=S,S}});o.exports=l}),44777:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),x=e(45319),u=e(83419),r=e(99472),h=e(6113),n=e(95540),l=e(91389),c=e(77720),s=e(15994),d=new u({initialize:function(p,g,T){T===void 0&&(T=!1),this.propertyKey=p,this.propertyValue=g,this.defaultValue=g,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=T,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(m,p){m===void 0&&(m={}),p&&(this.propertyKey=p),this.propertyValue=n(m,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(m){var p;switch(this.method){case 1:case 3:case 8:p=m;break;case 2:this.propertyValue.indexOf(m)>=0&&(p=m);break;case 4:var g=(this.end-this.start)/this.steps;p=c(m,g),this.counter=p;break;case 5:case 6:case 7:p=x(m,this.start,this.end);break;case 9:p=this.start[0];break}return this.current=p,this},getMethod:function(){var m=this.propertyValue;if(m===null)return 0;var p=typeof m;if(p==="number")return 1;if(Array.isArray(m))return 2;if(p==="function")return 3;if(p==="object"){if(this.hasBoth(m,"start","end"))return this.has(m,"steps")?4:5;if(this.hasBoth(m,"min","max"))return 6;if(this.has(m,"random"))return 7;if(this.hasEither(m,"onEmit","onUpdate"))return 8;if(this.hasEither(m,"values","interpolation"))return 9}return 0},setMethods:function(){var m=this.propertyValue,p=m,g=this.defaultEmit,T=this.defaultUpdate;switch(this.method){case 1:g=this.staticValueEmit;break;case 2:g=this.randomStaticValueEmit,p=m[0];break;case 3:this._onEmit=m,g=this.proxyEmit,p=this.defaultValue;break;case 4:this.start=m.start,this.end=m.end,this.steps=m.steps,this.counter=this.start,this.yoyo=this.has(m,"yoyo")?m.yoyo:!1,this.direction=0,g=this.steppedEmit,p=this.start;break;case 5:this.start=m.start,this.end=m.end;var S=this.has(m,"ease")?m.ease:"Linear";this.ease=h(S,m.easeParams),g=this.has(m,"random")&&m.random?this.randomRangedValueEmit:this.easedValueEmit,T=this.easeValueUpdate,p=this.start;break;case 6:this.start=m.min,this.end=m.max,g=this.has(m,"int")&&m.int?this.randomRangedIntEmit:this.randomRangedValueEmit,p=this.start;break;case 7:var w=m.random;Array.isArray(w)&&(this.start=w[0],this.end=w[1]),g=this.randomRangedIntEmit,p=this.start;break;case 8:this._onEmit=this.has(m,"onEmit")?m.onEmit:this.defaultEmit,this._onUpdate=this.has(m,"onUpdate")?m.onUpdate:this.defaultUpdate,g=this.proxyEmit,T=this.proxyUpdate,p=this.defaultValue;break;case 9:this.start=m.values;var A=this.has(m,"ease")?m.ease:"Linear";this.ease=h(A,m.easeParams),this.interpolation=l(m.interpolation),g=this.easedValueEmit,T=this.easeValueUpdate,p=this.start[0];break}return this.onEmit=g,this.onUpdate=T,this.current=p,this},has:function(m,p){return m.hasOwnProperty(p)},hasBoth:function(m,p,g){return m.hasOwnProperty(p)&&m.hasOwnProperty(g)},hasEither:function(m,p,g){return m.hasOwnProperty(p)||m.hasOwnProperty(g)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(m,p,g,T){return T},proxyEmit:function(m,p,g){var T=this._onEmit(m,p,g);return this.current=T,T},proxyUpdate:function(m,p,g,T){var S=this._onUpdate(m,p,g,T);return this.current=S,S},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var m=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[m],this.current},randomRangedValueEmit:function(m,p){var g=r(this.start,this.end);return m&&m.data[p]&&(m.data[p].min=g,m.data[p].max=this.end),this.current=g,g},randomRangedIntEmit:function(m,p){var g=a(this.start,this.end);return m&&m.data[p]&&(m.data[p].min=g,m.data[p].max=this.end),this.current=g,g},steppedEmit:function(){var m=this.counter,p=m,g=(this.end-this.start)/this.steps;if(this.yoyo){var T;this.direction===0?(p+=g,p>=this.end&&(T=p-this.end,p=this.end-T,this.direction=1)):(p-=g,p<=this.start&&(T=this.start-p,p=this.start+T,this.direction=0)),this.counter=p}else this.counter=s(p+g,this.start,this.end);return this.current=m,m},easedValueEmit:function(m,p){if(m&&m.data[p]){var g=m.data[p];g.min=this.start,g.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(m,p,g){var T=m.data[p],S,w=this.ease(g);return this.interpolation?S=this.interpolation(this.start,w):S=(T.max-T.min)*w+T.min,this.current=S,S},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});o.exports=d}),24502:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=e(20286),r=new a({Extends:u,initialize:function(n,l,c,s,d){if(typeof n=="object"){var m=n;n=x(m,"x",0),l=x(m,"y",0),c=x(m,"power",0),s=x(m,"epsilon",100),d=x(m,"gravity",50)}else n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=0),s===void 0&&(s=100),d===void 0&&(d=50);u.call(this,n,l,!0),this._gravity=d,this._power=c*d,this._epsilon=s*s},update:function(h,n){var l=this.x-h.x,c=this.y-h.y,s=l*l+c*c;if(s!==0){var d=Math.sqrt(s);s<this._epsilon&&(s=this._epsilon);var m=this._power*n/(s*d)*100;h.velocityX+=l*m,h.velocityY+=c*m}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var n=this.power;this._gravity=h,this.power=n}}});o.exports=r}),56480:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(45319),u=e(83419),r=e(39506),h=e(87841),n=e(11520),l=e(26099),c=new u({initialize:function(d){this.emitter=d,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new l,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=d.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new a(this)),this.bounds=new h},emit:function(s,d,m,p,g,T){return this.emitter.emit(s,d,m,p,g,T)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(s,d){s===void 0&&(s=0),d===void 0&&(d=0),this.x=s,this.y=d},fire:function(s,d){var m=this.emitter,p=m.ops,g=m.getAnim();if(g?this.anims.play(g):(this.frame=m.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(m.getEmitZone(this),s===void 0?this.x+=p.x.onEmit(this,"x"):p.x.steps>0?this.x+=s+p.x.onEmit(this,"x"):this.x+=s,d===void 0?this.y+=p.y.onEmit(this,"y"):p.y.steps>0?this.y+=d+p.y.onEmit(this,"y"):this.y+=d,this.life=p.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=p.delay.onEmit(this,"delay"),this.holdCurrent=p.hold.onEmit(this,"hold"),this.scaleX=p.scaleX.onEmit(this,"scaleX"),this.scaleY=p.scaleY.active?p.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=p.rotate.onEmit(this,"rotate"),this.rotation=r(this.angle),m.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&m.getDeathZone(this))return this.lifeCurrent=0,!1;var T=p.speedX.onEmit(this,"speedX"),S=p.speedY.active?p.speedY.onEmit(this,"speedY"):T;if(m.radial){var w=r(p.angle.onEmit(this,"angle"));this.velocityX=Math.cos(w)*Math.abs(T),this.velocityY=Math.sin(w)*Math.abs(S)}else if(m.moveTo){var A=p.moveToX.onEmit(this,"moveToX"),M=p.moveToY.onEmit(this,"moveToY"),R=this.life/1e3;this.velocityX=(A-this.x)/R,this.velocityY=(M-this.y)/R}else this.velocityX=T,this.velocityY=S;return m.acceleration&&(this.accelerationX=p.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=p.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=p.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=p.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=p.bounce.onEmit(this,"bounce"),this.alpha=p.alpha.onEmit(this,"alpha"),p.color.active?this.tint=p.color.onEmit(this,"tint"):this.tint=p.tint.onEmit(this,"tint"),!0},update:function(s,d,m){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=s,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=s,!1;this.anims&&this.anims.update(0,s);var p=this.emitter,g=p.ops,T=1-this.lifeCurrent/this.life;if(this.lifeT=T,this.x=g.x.onUpdate(this,"x",T,this.x),this.y=g.y.onUpdate(this,"y",T,this.y),p.moveTo){var S=g.moveToX.onUpdate(this,"moveToX",T,p.moveToX),w=g.moveToY.onUpdate(this,"moveToY",T,p.moveToY),A=this.lifeCurrent/1e3;this.velocityX=(S-this.x)/A,this.velocityY=(w-this.y)/A}return this.computeVelocity(p,s,d,m,T),this.scaleX=g.scaleX.onUpdate(this,"scaleX",T,this.scaleX),g.scaleY.active?this.scaleY=g.scaleY.onUpdate(this,"scaleY",T,this.scaleY):this.scaleY=this.scaleX,this.angle=g.rotate.onUpdate(this,"rotate",T,this.angle),this.rotation=r(this.angle),p.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=x(g.alpha.onUpdate(this,"alpha",T,this.alpha),0,1),g.color.active?this.tint=g.color.onUpdate(this,"color",T,this.tint):this.tint=g.tint.onUpdate(this,"tint",T,this.tint),this.lifeCurrent-=s,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(s,d,m,p,g){var T=s.ops,S=this.velocityX,w=this.velocityY,A=T.accelerationX.onUpdate(this,"accelerationX",g,this.accelerationX),M=T.accelerationY.onUpdate(this,"accelerationY",g,this.accelerationY),R=T.maxVelocityX.onUpdate(this,"maxVelocityX",g,this.maxVelocityX),P=T.maxVelocityY.onUpdate(this,"maxVelocityY",g,this.maxVelocityY);this.bounce=T.bounce.onUpdate(this,"bounce",g,this.bounce),S+=s.gravityX*m+A*m,w+=s.gravityY*m+M*m,S=x(S,-R,R),w=x(w,-P,P),this.velocityX=S,this.velocityY=w,this.x+=S*m,this.y+=w*m,s.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var b=0;b<p.length;b++){var F=p[b];F.active&&F.update(this,d,m,g)}},setSizeToFrame:function(){},getBounds:function(s){s===void 0&&(s=this.emitter.getWorldTransformMatrix());var d=Math.abs(s.scaleX)*this.scaleX,m=Math.abs(s.scaleY)*this.scaleY,p=this.x,g=this.y,T=this.rotation,S=this.frame.width*d/2,w=this.frame.height*m/2,A=this.bounds,M=new l(p-S,g-w),R=new l(p+S,g-w),P=new l(p-S,g+w),b=new l(p+S,g+w);return T!==0&&(n(M,p,g,T),n(R,p,g,T),n(P,p,g,T),n(b,p,g,T)),s.transformPoint(M.x,M.y,M),s.transformPoint(R.x,R.y,R),s.transformPoint(P.x,P.y,P),s.transformPoint(b.x,b.y,b),A.x=Math.min(M.x,R.x,P.x,b.x),A.y=Math.min(M.y,R.y,P.y,b.y),A.width=Math.max(M.x,R.x,P.x,b.x)-A.x,A.height=Math.max(M.y,R.y,P.y,b.y)-A.y,A},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});o.exports=c}),69601:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(20286),u=e(87841),r=new a({Extends:x,initialize:function(n,l,c,s,d,m,p,g){d===void 0&&(d=!0),m===void 0&&(m=!0),p===void 0&&(p=!0),g===void 0&&(g=!0),x.call(this,n,l,!0),this.bounds=new u(n,l,c,s),this.collideLeft=d,this.collideRight=m,this.collideTop=p,this.collideBottom=g},update:function(h){var n=this.bounds,l=-h.bounce,c=h.worldPosition;c.x<n.x&&this.collideLeft?(h.x+=n.x-c.x,h.velocityX*=l):c.x>n.right&&this.collideRight&&(h.x-=c.x-n.right,h.velocityX*=l),c.y<n.y&&this.collideTop?(h.y+=n.y-c.y,h.velocityY*=l):c.y>n.bottom&&this.collideBottom&&(h.y-=c.y-n.bottom,h.velocityY*=l)}});o.exports=r}),31600:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(53774),r=e(43459),h=e(26388),n=e(19909),l=e(76472),c=e(44777),s=e(20696),d=e(95643),m=e(95540),p=e(26546),g=e(24502),T=e(69036),S=e(1985),w=e(97022),A=e(86091),M=e(73162),R=e(20074),P=e(269),b=e(56480),F=e(69601),I=e(68875),L=e(87841),D=e(59996),O=e(72905),z=e(90668),W=e(19186),X=e(61340),_=e(26099),U=e(15994),G=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],N=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],H=new a({Extends:d,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,z],initialize:function($,j,k,Q,et){d.call(this,$,"ParticleEmitter"),this.particleClass=b,this.config=null,this.ops={accelerationX:new c("accelerationX",0),accelerationY:new c("accelerationY",0),alpha:new c("alpha",1),angle:new c("angle",{min:0,max:360},!0),bounce:new c("bounce",0),color:new l("color"),delay:new c("delay",0,!0),hold:new c("hold",0,!0),lifespan:new c("lifespan",1e3,!0),maxVelocityX:new c("maxVelocityX",1e4),maxVelocityY:new c("maxVelocityY",1e4),moveToX:new c("moveToX",0),moveToY:new c("moveToY",0),quantity:new c("quantity",1,!0),rotate:new c("rotate",0),scaleX:new c("scaleX",1),scaleY:new c("scaleY",1),speedX:new c("speedX",0,!0),speedY:new c("speedY",0,!0),tint:new c("tint",16777215),x:new c("x",0),y:new c("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new _,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new X,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new M(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(j,k),this.setTexture(Q),et&&this.setConfig(et)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(V){if(!V)return this;this.config=V;var $=0,j="",k=this.ops;for($=0;$<N.length;$++)j=N[$],k[j].loadConfig(V);for($=0;$<G.length;$++)j=G[$],w(V,j)&&(this[j]=m(V,j));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=T(V,["moveToX","moveToY"]),w(V,"speed")&&(k.speedX.loadConfig(V,"speed"),k.speedY.active=!1),(S(V,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),w(V,"scale")&&(k.scaleX.loadConfig(V,"scale"),k.scaleY.active=!1),w(V,"callbackScope")){var Q=m(V,"callbackScope",null);this.emitCallbackScope=Q,this.deathCallbackScope=Q}if(w(V,"emitZone")&&this.addEmitZone(V.emitZone),w(V,"deathZone")&&this.addDeathZone(V.deathZone),w(V,"bounds")){var et=this.addParticleBounds(V.bounds);et.collideLeft=m(V,"collideLeft",!0),et.collideRight=m(V,"collideRight",!0),et.collideTop=m(V,"collideTop",!0),et.collideBottom=m(V,"collideBottom",!0)}return w(V,"followOffset")&&this.followOffset.setFromObject(m(V,"followOffset",0)),w(V,"texture")&&this.setTexture(V.texture),w(V,"frame")?this.setEmitterFrame(V.frame):w(V,"anim")&&this.setAnim(V.anim),w(V,"reserve")&&this.reserve(V.reserve),w(V,"advance")&&this.fastForward(V.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(s.START,this),this},updateConfig:function(V){return V&&(this.config?this.setConfig(P(this.config,V)):this.setConfig(V)),this},toJSON:function(){var V=u(this),$=0,j="";for($=0;$<G.length;$++)j=G[$],V[j]=this[j];var k=this.ops;for($=0;$<N.length;$++)j=N[$],k[j]&&(V[j]=k[j].toJSON());return k.speedY.active||(delete V.speedX,V.speed=k.speedX.toJSON()),this.scaleX===this.scaleY&&(delete V.scaleX,delete V.scaleY,V.scale=k.scaleX.toJSON()),V},resetCounters:function(V,$){var j=this.counters;j.fill(0),j[0]=V,$&&(j[5]=1)},startFollow:function(V,$,j,k){return $===void 0&&($=0),j===void 0&&(j=0),k===void 0&&(k=!1),this.follow=V,this.followOffset.set($,j),this.trackVisible=k,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var V=this.frames,$=V.length,j;return $===1?j=V[0]:this.randomFrame?j=p(V):(j=V[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===$&&(this.currentFrame=0))),this.texture.get(j)},setEmitterFrame:function(V,$,j){$===void 0&&($=!0),j===void 0&&(j=1),this.randomFrame=$,this.frameQuantity=j,this.currentFrame=0;var k=typeof V;if(this.frames.length=0,Array.isArray(V))this.frames=this.frames.concat(V);else if(k==="string"||k==="number")this.frames.push(V);else if(k==="object"){var Q=V;V=m(Q,"frames",null),V&&(this.frames=this.frames.concat(V));var et=m(Q,"cycle",!1);this.randomFrame=!et,this.frameQuantity=m(Q,"quantity",j)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var V=this.anims,$=V.length;if($===0)return null;if($===1)return V[0];if(this.randomAnim)return p(V);var j=V[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=U(this.currentAnim+1,0,$)),j},setAnim:function(V,$,j){$===void 0&&($=!0),j===void 0&&(j=1),this.randomAnim=$,this.animQuantity=j,this.currentAnim=0;var k=typeof V;if(this.anims.length=0,Array.isArray(V))this.anims=this.anims.concat(V);else if(k==="string")this.anims.push(V);else if(k==="object"){var Q=V;V=m(Q,"anims",null),V&&(this.anims=this.anims.concat(V));var et=m(Q,"cycle",!1);this.randomAnim=!et,this.animQuantity=m(Q,"quantity",j)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(V){return V===void 0&&(V=!0),this.radial=V,this},addParticleBounds:function(V,$,j,k,Q,et,at,q){if(typeof V=="object"){var ft=V;V=ft.x,$=ft.y,j=w(ft,"w")?ft.w:ft.width,k=w(ft,"h")?ft.h:ft.height}return this.addParticleProcessor(new F(V,$,j,k,Q,et,at,q))},setParticleSpeed:function(V,$){return $===void 0&&($=V),this.ops.speedX.onChange(V),V===$?this.ops.speedY.active=!1:this.ops.speedY.onChange($),this.radial=!0,this},setParticleScale:function(V,$){return V===void 0&&(V=1),$===void 0&&($=V),this.ops.scaleX.onChange(V),this.ops.scaleY.onChange($),this},setParticleGravity:function(V,$){return this.gravityX=V,this.gravityY=$,this},setParticleAlpha:function(V){return this.ops.alpha.onChange(V),this},setParticleTint:function(V){return this.ops.tint.onChange(V),this},setEmitterAngle:function(V){return this.ops.angle.onChange(V),this},setParticleLifespan:function(V){return this.ops.lifespan.onChange(V),this},setQuantity:function(V){return this.quantity=V,this},setFrequency:function(V,$){return this.frequency=V,this.flowCounter=V>0?V:0,$&&(this.quantity=$),this},addDeathZone:function(V){Array.isArray(V)||(V=[V]);for(var $,j=[],k=0;k<V.length;k++)if($=V[k],$ instanceof h)j.push($);else if(typeof $.contains=="function")$=new h($,!0),j.push($);else{var Q=m($,"type","onEnter"),et=m($,"source",null);if(et&&typeof et.contains=="function"){var at=Q==="onEnter";$=new h(et,at),j.push($)}}return this.deathZones=this.deathZones.concat(j),j},removeDeathZone:function(V){return O(this.deathZones,V),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(V){Array.isArray(V)||(V=[V]);for(var $,j=[],k=0;k<V.length;k++)if($=V[k],$ instanceof I||$ instanceof n)j.push($);else{var Q=m($,"source",null);if(Q){var et=m($,"type","random");if(et==="random"&&typeof Q.getRandomPoint=="function")$=new I(Q),j.push($);else if(et==="edge"&&typeof Q.getPoints=="function"){var at=m($,"quantity",1),q=m($,"stepRate",0),ft=m($,"yoyo",!1),vt=m($,"seamless",!0),Tt=m($,"total",-1);$=new n(Q,at,q,ft,vt,Tt),j.push($)}}}return this.emitZones=this.emitZones.concat(j),j},removeEmitZone:function(V){return O(this.emitZones,V),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(V){var $=this.emitZones,j=$.length;if(j!==0){var k=$[this.zoneIndex];k.getPoint(V),k.total>-1&&(this.zoneTotal++,this.zoneTotal===k.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===j&&(this.zoneIndex=0)))}},getDeathZone:function(V){for(var $=this.deathZones,j=0;j<$.length;j++){var k=$[j];if(k.willKill(V))return this.emit(s.DEATH_ZONE,this,V,k),!0}return!1},setEmitZone:function(V){var $;return isFinite(V)?$=V:$=this.emitZones.indexOf(V),$>=0&&(this.zoneIndex=$),this},addParticleProcessor:function(V){return this.processors.exists(V)||(V.emitter&&V.emitter.removeParticleProcessor(V),this.processors.add(V),V.emitter=this),V},removeParticleProcessor:function(V){return this.processors.exists(V)&&(this.processors.remove(V,!0),V.emitter=null),V},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(V){return this.addParticleProcessor(new g(V))},reserve:function(V){var $=this.dead;if(this.maxParticles>0){var j=this.getParticleCount();j+V>this.maxParticles&&(V=this.maxParticles-(j+V))}for(var k=0;k<V;k++)$.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(V,$){return V===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof V=="function"&&(this.emitCallback=V,$&&(this.emitCallbackScope=$)),this},onParticleDeath:function(V,$){return V===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof V=="function"&&(this.deathCallback=V,$&&(this.deathCallbackScope=$)),this},killAll:function(){for(var V=this.dead,$=this.alive;$.length>0;)V.push($.pop());return this},forEachAlive:function(V,$){for(var j=this.alive,k=j.length,Q=0;Q<k;Q++)V.call($,j[Q],this);return this},forEachDead:function(V,$){for(var j=this.dead,k=j.length,Q=0;Q<k;Q++)V.call($,j[Q],this);return this},start:function(V,$){return V===void 0&&(V=0),this.emitting||(V>0&&this.fastForward(V),this.emitting=!0,this.resetCounters(this.frequency,!0),$!==void 0&&(this.duration=Math.abs($)),this.emit(s.START,this)),this},stop:function(V){return V===void 0&&(V=!1),this.emitting&&(this.emitting=!1,V&&this.killAll(),this.emit(s.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(V,$){return V===void 0&&(V=""),$===void 0&&($=this.true),this.sortProperty=V,this.sortOrderAsc=$,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(V){return this.sortProperty!==""?V=this.depthSortCallback:V=null,this.sortCallback=V,this},depthSort:function(){return W(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(V,$){var j=this.sortProperty;return this.sortOrderAsc?V[j]-$[j]:$[j]-V[j]},flow:function(V,$,j){return $===void 0&&($=1),this.emitting=!1,this.frequency=V,this.quantity=$,j!==void 0&&(this.stopAfter=j),this.start()},explode:function(V,$,j){this.frequency=-1,this.resetCounters(-1,!0);var k=this.emitParticle(V,$,j);return this.emit(s.EXPLODE,this,k),k},emitParticleAt:function(V,$,j){return this.emitParticle(j,V,$)},emitParticle:function(V,$,j){if(!this.atLimit()){V===void 0&&(V=this.ops.quantity.onEmit());for(var k=this.dead,Q=this.stopAfter,et=this.follow?this.follow.x+this.followOffset.x:$,at=this.follow?this.follow.y+this.followOffset.y:j,q=0;q<V;q++){var ft=k.pop();if(ft||(ft=new this.particleClass(this)),ft.fire(et,at)?(this.particleBringToTop?this.alive.push(ft):this.alive.unshift(ft),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,ft,this)):this.dead.push(ft),Q>0&&(this.stopCounter++,this.stopCounter>=Q)||this.atLimit())break}return ft}},fastForward:function(V,$){$===void 0&&($=1e3/60);var j=0;for(this.skipping=!0;j<Math.abs(V);)this.preUpdate(0,$),j+=$;return this.skipping=!1,this},preUpdate:function(V,$){$*=this.timeScale;var j=$/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var k=this.getProcessors(),Q=this.alive,et=this.dead,at=0,q=[],ft=Q.length;for(at=0;at<ft;at++){var vt=Q[at];vt.update($,j,k)&&q.push({index:at,particle:vt})}if(ft=q.length,ft>0){var Tt=this.deathCallback,ct=this.deathCallbackScope;for(at=ft-1;at>=0;at--){var Nt=q[at];Q.splice(Nt.index,1),et.push(Nt.particle),Tt&&Tt.call(ct,Nt.particle),Nt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&Q.length===0&&(this.completeFlag=0,this.emit(s.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=$;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=$,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(V){for(var $=this.getWorldTransformMatrix(),j=this.alive,k=j.length,Q=[],et=0;et<k;et++){var at=j[et];D(V,at.getBounds($))&&Q.push(at)}return Q},getBounds:function(V,$,j,k){V===void 0&&(V=0),$===void 0&&($=0),j===void 0&&(j=1e3/60),k===void 0&&(k=new L);var Q=this.getWorldTransformMatrix(),et,at,q=this.alive,ft=!1;if(k.setTo(0,0,0,0),$>0){var vt=0;for(this.skipping=!0;vt<Math.abs($);){for(this.preUpdate(0,j),et=0;et<q.length;et++)at=q[et].getBounds(Q),ft?R(k,at):(ft=!0,r(at,k));vt+=j}this.skipping=!1}else for(et=0;et<q.length;et++)at=q[et].getBounds(Q),ft?R(k,at):(ft=!0,r(at,k));return V>0&&A(k,V,V),k},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(V){this.ops.x.onChange(V)}},particleY:{get:function(){return this.ops.y.current},set:function(V){this.ops.y.onChange(V)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(V){this.ops.accelerationX.onChange(V)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(V){this.ops.accelerationY.onChange(V)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(V){this.ops.maxVelocityX.onChange(V)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(V){this.ops.maxVelocityY.onChange(V)}},speed:{get:function(){return this.ops.speedX.current},set:function(V){this.ops.speedX.onChange(V),this.ops.speedY.onChange(V)}},speedX:{get:function(){return this.ops.speedX.current},set:function(V){this.ops.speedX.onChange(V)}},speedY:{get:function(){return this.ops.speedY.current},set:function(V){this.ops.speedY.onChange(V)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(V){this.ops.moveToX.onChange(V)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(V){this.ops.moveToY.onChange(V)}},bounce:{get:function(){return this.ops.bounce.current},set:function(V){this.ops.bounce.onChange(V)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(V){this.ops.scaleX.onChange(V)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(V){this.ops.scaleY.onChange(V)}},particleColor:{get:function(){return this.ops.color.current},set:function(V){this.ops.color.onChange(V)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(V){this.ops.color.setEase(V)}},particleTint:{get:function(){return this.ops.tint.current},set:function(V){this.ops.tint.onChange(V)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(V){this.ops.alpha.onChange(V)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(V){this.ops.lifespan.onChange(V)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(V){this.ops.angle.onChange(V)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(V){this.ops.rotate.onChange(V)}},quantity:{get:function(){return this.ops.quantity.current},set:function(V){this.ops.quantity.onChange(V)}},delay:{get:function(){return this.ops.delay.current},set:function(V){this.ops.delay.onChange(V)}},hold:{get:function(){return this.ops.hold.current},set:function(V){this.ops.hold.onChange(V)}},flowCounter:{get:function(){return this.counters[0]},set:function(V){this.counters[0]=V}},frameCounter:{get:function(){return this.counters[1]},set:function(V){this.counters[1]=V}},animCounter:{get:function(){return this.counters[2]},set:function(V){this.counters[2]=V}},elapsed:{get:function(){return this.counters[3]},set:function(V){this.counters[3]=V}},stopCounter:{get:function(){return this.counters[4]},set:function(V){this.counters[4]=V}},completeFlag:{get:function(){return this.counters[5]},set:function(V){this.counters[5]=V}},zoneIndex:{get:function(){return this.counters[6]},set:function(V){this.counters[6]=V}},zoneTotal:{get:function(){return this.counters[7]},set:function(V){this.counters[7]=V}},currentFrame:{get:function(){return this.counters[8]},set:function(V){this.counters[8]=V}},currentAnim:{get:function(){return this.counters[9]},set:function(V){this.counters[9]=V}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var V,$=this.ops;for(V=0;V<N.length;V++){var j=N[V];$[j].destroy()}for(V=0;V<this.alive.length;V++)this.alive[V].destroy();for(V=0;V<this.dead.length;V++)this.dead[V].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});o.exports=H}),9871:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59996),x=e(61340),u=new x,r=new x,h=new x,n=new x,l=function(c,s,d,m){var p=u,g=r,T=h,S=n;m?(S.loadIdentity(),S.multiply(m),S.translate(s.x,s.y),S.rotate(s.rotation),S.scale(s.scaleX,s.scaleY)):S.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY);var w=c.currentContext,A=d.roundPixels,M=d.alpha,R=s.alpha,P=s.alive,b=P.length,F=s.viewBounds;if(!(!s.visible||b===0||F&&!a(F,d.worldView))){s.sortCallback&&s.depthSort(),d.addToRenderList(s);var I=s.scrollFactorX,L=s.scrollFactorY;w.save(),w.globalCompositeOperation=c.blendModes[s.blendMode];for(var D=0;D<b;D++){var O=P[D],z=O.alpha*R*M;if(!(z<=0||O.scaleX===0||O.scaleY===0)){T.applyITRS(O.x,O.y,O.rotation,O.scaleX,O.scaleY),p.copyFrom(d.matrix),p.multiplyWithOffset(S,-d.scrollX*I,-d.scrollY*L),T.e=O.x,T.f=O.y,p.multiply(T,g);var W=O.frame,X=W.canvasData;if(X.width>0&&X.height>0){var _=-W.halfWidth,U=-W.halfHeight;w.globalAlpha=z,w.save(),g.setToContext(w),A&&(_=Math.round(_),U=Math.round(U)),w.imageSmoothingEnabled=!W.source.scaleMode,w.drawImage(W.source.image,X.x,X.y,X.width,X.height,_,U,X.width,X.height),w.restore()}}}w.restore()}};o.exports=l}),92730:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(95540),h=e(31600);x.register("particles",function(n,l){n===void 0&&(n={});var c=u(n,"key",null),s=r(n,"config",null),d=new h(this.scene,0,0,c);return l!==void 0&&(n.add=l),a(this.scene,d,n),s&&d.setConfig(s),d})}),676:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(31600);a.register("particles",function(u,r,h,n){return u!==void 0&&typeof u=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new x(this.scene,u,r,h,n))})}),90668:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(21188),u=e(9871),o.exports={renderWebGL:x,renderCanvas:u}}),21188:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59996),x=e(61340),u=e(70554),r=new x,h=new x,n=new x,l=new x,c=function(s,d,m,p){var g=s.pipelines.set(d.pipeline),T=r,S=h,w=n,A=l;p?(A.loadIdentity(),A.multiply(p),A.translate(d.x,d.y),A.rotate(d.rotation),A.scale(d.scaleX,d.scaleY)):A.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var M=u.getTintAppendFloatAlpha,R=m.alpha,P=d.alpha;s.pipelines.preBatch(d);var b=d.alive,F=b.length,I=d.viewBounds;if(!(F===0||I&&!a(I,m.worldView))){d.sortCallback&&d.depthSort(),m.addToRenderList(d),T.copyFrom(m.matrix),T.multiplyWithOffset(A,-m.scrollX*d.scrollFactorX,-m.scrollY*d.scrollFactorY),s.setBlendMode(d.blendMode),d.mask&&(d.mask.preRenderWebGL(s,d,m),s.pipelines.set(d.pipeline));for(var L=d.tintFill,D,O,z=0;z<F;z++){var W=b[z],X=W.alpha*P*R;if(!(X<=0||W.scaleX===0||W.scaleY===0)){w.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),w.e=W.x,w.f=W.y,T.multiply(w,S);var _=W.frame;_.glTexture!==O&&(O=_.glTexture,D=g.setGameObject(d,_));var U=-_.halfWidth,G=-_.halfHeight,N=S.setQuad(U,G,U+_.width,G+_.height),H=M(W.tint,X);g.shouldFlush(6)&&(g.flush(),D=g.setGameObject(d,_)),g.batchQuad(d,N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],_.u0,_.v0,_.u1,_.v1,H,H,H,H,L,O,D)}}d.mask&&d.mask.postRenderWebGL(s,m),s.pipelines.postBatch(d)}};o.exports=c}),20286:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n){r===void 0&&(r=0),h===void 0&&(h=0),n===void 0&&(n=!0),this.emitter,this.x=r,this.y=h,this.active=n},update:function(){},destroy:function(){this.emitter=null}});o.exports=x}),9774:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"}),812:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="deathzone"}),30522:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="explode"}),96695:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"}),18677:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"}),20696:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:e(9774),DEATH_ZONE:e(812),EXPLODE:e(30522),START:e(96695),STOP:e(18677)}}),18404:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EmitterColorOp:e(76472),EmitterOp:e(44777),Events:e(20696),GravityWell:e(24502),Particle:e(56480),ParticleBounds:e(69601),ParticleEmitter:e(31600),ParticleProcessor:e(20286),Zones:e(21024)}}),26388:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h){this.source=r,this.killOnEnter=h},willKill:function(u){var r=u.worldPosition,h=this.source.contains(r.x,r.y);return h&&this.killOnEnter||!h&&!this.killOnEnter}});o.exports=x}),19909:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n,l,c,s){l===void 0&&(l=!1),c===void 0&&(c=!0),s===void 0&&(s=-1),this.source=r,this.points=[],this.quantity=h,this.stepRate=n,this.yoyo=l,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.total=s,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var u=this.points[0],r=this.points[this.points.length-1];u.x===r.x&&u.y===r.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(u){return this.source=u,this.updateSource()},getPoint:function(u){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var r=this.points[this.counter];r&&(u.x=r.x,u.y=r.y)}});o.exports=x}),68875:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(26099),u=new a({initialize:function(h){this.source=h,this._tempVec=new x,this.total=-1},getPoint:function(r){var h=this._tempVec;this.source.getRandomPoint(h),r.x=h.x,r.y=h.y}});o.exports=u}),21024:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DeathZone:e(26388),EdgeZone:e(19909),RandomZone:e(68875)}}),1159:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(68287),r=new a({Extends:u,Mixins:[x.PathFollower],initialize:function(n,l,c,s,d,m){u.call(this,n,c,s,d,m),this.path=l},preUpdate:function(h,n){this.anims.update(h,n),this.pathUpdate(h)}});o.exports=r}),90145:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(1159);a.register("follower",function(u,r,h,n,l){var c=new x(this.scene,u,r,h,n,l);return this.displayList.add(c),this.updateList.add(c),c})}),33663:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(83419),u=e(48803),r=e(90664),h=e(4703),n=e(45650),l=new x({Extends:h,initialize:function(s,d,m,p,g,T,S,w){p||(p="__DEFAULT"),h.call(this,s,d,m,p,g),this.type="Plane",this.anims=new a(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(T,S,w),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(c,s,d){c===void 0&&(c=8),s===void 0&&(s=8),d===void 0&&(d=!1);var m=!1;return d&&(m=!0),this.gridWidth=c,this.gridHeight=s,this.isTiled=d,this.clear(),u({mesh:this,widthSegments:c,heightSegments:s,isOrtho:!1,tile:d,flipY:m}),this},setSizeToFrame:function(c){c===void 0&&(c=!0);var s=this.frame;if(this.setPerspective(this.width/s.width,this.height/s.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!c)return this;var d=this.gridWidth,m=this.gridHeight,p=this.vertices,g=s.u0,T=s.u1,S=s.v0,w=s.v1,A,M,R=0;if(this.isTiled)for(S=s.v1,w=s.v0,M=0;M<m;M++)for(A=0;A<d;A++)p[R++].setUVs(g,w),p[R++].setUVs(g,S),p[R++].setUVs(T,w),p[R++].setUVs(g,S),p[R++].setUVs(T,S),p[R++].setUVs(T,w);else{var P=d+1,b=m+1,F=T-g,I=w-S,L=[];for(M=0;M<b;M++)for(A=0;A<P;A++){var D=g+F*(A/d),O=S+I*(M/m);L.push(D,O)}for(M=0;M<m;M++)for(A=0;A<d;A++){var z=(A+P*M)*2,W=(A+P*(M+1))*2,X=(A+1+P*(M+1))*2,_=(A+1+P*M)*2;p[R++].setUVs(L[z],L[z+1]),p[R++].setUVs(L[W],L[W+1]),p[R++].setUVs(L[_],L[_+1]),p[R++].setUVs(L[W],L[W+1]),p[R++].setUVs(L[X],L[X+1]),p[R++].setUVs(L[_],L[_+1])}}return this},setViewHeight:function(c){c===void 0&&(c=this.frame.height);var s=this.fov*(Math.PI/180);this.viewPosition.z=this.height/c/Math.tan(s/2),this.dirtyCache[10]=1},createCheckerboard:function(c,s,d,m,p){c===void 0&&(c=16777215),s===void 0&&(s=255),d===void 0&&(d=255),m===void 0&&(m=255),p===void 0&&(p=128);for(var g=r(c),T=r(s),S=[],w=0;w<16;w++)for(var A=0;A<16;A++)w<8&&A<8||w>7&&A>7?S.push(g.r,g.g,g.b,d):S.push(T.r,T.g,T.b,m);var M=this.scene.sys.textures.addUint8Array(n(),new Uint8Array(S),16,16);return this.removeCheckerboard(),this.setTexture(M),this.setSizeToFrame(),this.setViewHeight(p),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(c,s){return this.anims.play(c,s)},playReverse:function(c,s){return this.anims.playReverse(c,s)},playAfterDelay:function(c,s){return this.anims.playAfterDelay(c,s)},playAfterRepeat:function(c,s){return this.anims.playAfterRepeat(c,s)},stop:function(){return this.anims.stop()},stopAfterDelay:function(c){return this.anims.stopAfterDelay(c)},stopAfterRepeat:function(c){return this.anims.stopAfterRepeat(c)},stopOnFrame:function(c){return this.anims.stopOnFrame(c)},preUpdate:function(c,s){h.prototype.preUpdate.call(this,c,s),this.anims.update(c,s)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});o.exports=l}),56015:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(13059),u=e(44603),r=e(23568),h=e(35154),n=e(33663);u.register("plane",function(l,c){l===void 0&&(l={});var s=r(l,"key",null),d=r(l,"frame",null),m=h(l,"width",8),p=h(l,"height",8),g=h(l,"tile",!1),T=new n(this.scene,0,0,s,d,m,p,g);c!==void 0&&(l.add=c);var S=h(l,"checkerboard",null);if(S){var w=h(S,"color1",16777215),A=h(S,"color2",255),M=h(S,"alpha1",255),R=h(S,"alpha2",255),P=h(S,"height",128);T.createCheckerboard(w,A,M,R,P)}return a(this.scene,T,l),x(T,l),T})}),30985:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33663),x=e(39429);x.register("plane",function(u,r,h,n,l,c,s){return this.displayList.add(new a(this.scene,u,r,h,n,l,c,s))})}),80321:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(95643),r=e(30100),h=e(36060),n=e(67277),l=new a({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible,n],initialize:function(s,d,m,p,g,T,S){p===void 0&&(p=16777215),g===void 0&&(g=128),T===void 0&&(T=1),S===void 0&&(S=.1),u.call(this,s,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(d,m),this.color=r(p),this.intensity=T,this.attenuation=S,this.width=g*2,this.height=g*2,this._radius=g},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});o.exports=l}),39829:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(80321);x.register("pointlight",function(h,n){h===void 0&&(h={});var l=u(h,"color",16777215),c=u(h,"radius",128),s=u(h,"intensity",1),d=u(h,"attenuation",.1),m=new r(this.scene,0,0,l,c,s,d);return n!==void 0&&(h.add=n),a(this.scene,m,h),m})}),71255:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(80321);a.register("pointlight",function(u,r,h,n,l,c){return this.displayList.add(new x(this.scene,u,r,h,n,l,c))})}),67277:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(57787),o.exports={renderWebGL:x,renderCanvas:u}}),57787:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(u,r,h,n){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),c=a(r,h,n).calc,s=r.width,d=r.height,m=-r._radius,p=-r._radius,g=m+s,T=p+d,S=c.getX(0,0),w=c.getY(0,0),A=c.getX(m,p),M=c.getY(m,p),R=c.getX(m,T),P=c.getY(m,T),b=c.getX(g,T),F=c.getY(g,T),I=c.getX(g,p),L=c.getY(g,p);u.pipelines.preBatch(r),l.batchPointLight(r,h,A,M,R,P,b,F,I,L,S,w),u.pipelines.postBatch(r)};o.exports=x}),591:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(81320),u=e(88571),r=new a({Extends:u,initialize:function(n,l,c,s,d,m){l===void 0&&(l=0),c===void 0&&(c=0),s===void 0&&(s=32),d===void 0&&(d=32),m===void 0&&(m=!0);var p=new x(n.sys.textures,"",s,d,m);u.call(this,n,l,c,p),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(h,n){this.width=h,this.height=n,this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=h,l.hitArea.height=n),this},resize:function(h,n,l){return this.texture.setSize(h,n,l),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(h){var n=this.texture;return n.key=h,n.manager.addDynamicTexture(n)&&(this._saved=!0),n},fill:function(h,n,l,c,s,d){return this.texture.fill(h,n,l,c,s,d),this},clear:function(){return this.texture.clear(),this},stamp:function(h,n,l,c,s){return this.texture.stamp(h,n,l,c,s),this},erase:function(h,n,l){return this.texture.erase(h,n,l),this},draw:function(h,n,l,c,s){return this.texture.draw(h,n,l,c,s),this},drawFrame:function(h,n,l,c,s,d){return this.texture.drawFrame(h,n,l,c,s,d),this},repeat:function(h,n,l,c,s,d,m,p,g){return this.texture.repeat(h,n,l,c,s,d,m,p,g),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(h,n,l,c,s){return this.texture.batchDraw(h,n,l,c,s),this},batchDrawFrame:function(h,n,l,c,s,d){return this.texture.batchDrawFrame(h,n,l,c,s,d),this},endDraw:function(h){return this.texture.endDraw(h),this},snapshotArea:function(h,n,l,c,s,d,m){return this.texture.snapshotArea(h,n,l,c,s,d,m),this},snapshot:function(h,n,l){return this.snapshotArea(0,0,this.width,this.height,h,n,l)},snapshotPixel:function(h,n,l){return this.snapshotArea(h,n,1,1,l,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});o.exports=r}),34495:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(591);x.register("renderTexture",function(h,n){h===void 0&&(h={});var l=u(h,"x",0),c=u(h,"y",0),s=u(h,"width",32),d=u(h,"height",32),m=new r(this.scene,l,c,s,d);return n!==void 0&&(h.add=n),a(this.scene,m,h),m})}),60505:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(591);a.register("renderTexture",function(u,r,h,n){return this.displayList.add(new x(this.scene,u,r,h,n))})}),77757:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(83419),u=e(31401),r=e(95643),h=e(36060),n=e(38745),l=e(26099),c=new x({Extends:r,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Flip,u.Mask,u.Pipeline,u.PostPipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,n],initialize:function(d,m,p,g,T,S,w,A,M){g===void 0&&(g="__DEFAULT"),S===void 0&&(S=2),w===void 0&&(w=!0),r.call(this,d,"Rope"),this.anims=new a(this),this.points=S,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=g==="__DEFAULT",this.dirty=!1,this.horizontal=w,this._flipX=!1,this._flipY=!1,this._perp=new l,this.debugCallback=null,this.debugGraphic=null,this.setTexture(g,T),this.setPosition(m,p),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(S)&&this.resizeArrays(S.length),this.setPoints(S,A,M),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(s,d){var m=this.anims.currentFrame;this.anims.update(s,d),this.anims.currentFrame!==m&&(this.updateUVs(),this.updateVertices())},play:function(s,d,m){return this.anims.play(s,d,m),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(s,d,m){return s===void 0&&(s=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(s,d,m))},setVertical:function(s,d,m){return s===void 0&&(s=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(s,d,m)):this},setTintFill:function(s){return s===void 0&&(s=!1),this.tintFill=s,this},setAlphas:function(s,d){var m=this.points.length;if(m<1)return this;var p=this.alphas;s===void 0?s=[1]:!Array.isArray(s)&&d===void 0&&(s=[s]);var g,T=0;if(d!==void 0)for(g=0;g<m;g++)T=g*2,p[T]=s,p[T+1]=d;else if(s.length===m)for(g=0;g<m;g++)T=g*2,p[T]=s[g],p[T+1]=s[g];else{var S=s[0];for(g=0;g<m;g++)T=g*2,s.length>T&&(S=s[T]),p[T]=S,s.length>T+1&&(S=s[T+1]),p[T+1]=S}return this},setColors:function(s){var d=this.points.length;if(d<1)return this;var m=this.colors;s===void 0?s=[16777215]:Array.isArray(s)||(s=[s]);var p,g=0;if(s.length===d)for(p=0;p<d;p++)g=p*2,m[g]=s[p],m[g+1]=s[p];else{var T=s[0];for(p=0;p<d;p++)g=p*2,s.length>g&&(T=s[g]),m[g]=T,s.length>g+1&&(T=s[g+1]),m[g+1]=T}return this},setPoints:function(s,d,m){if(s===void 0&&(s=2),typeof s=="number"){var p=s;p<2&&(p=2),s=[];var g,T,S;if(this.horizontal)for(S=-this.frame.halfWidth,T=this.frame.width/(p-1),g=0;g<p;g++)s.push({x:S+g*T,y:0});else for(S=-this.frame.halfHeight,T=this.frame.height/(p-1),g=0;g<p;g++)s.push({x:0,y:S+g*T})}var w=s.length,A=this.points.length;return w<1?(console.warn("Rope: Not enough points given"),this):(w===1&&(s.unshift({x:0,y:0}),w++),A!==w&&this.resizeArrays(w),this.dirty=!0,this.points=s,this.updateUVs(),d!=null&&this.setColors(d),m!=null&&this.setAlphas(m),this)},updateUVs:function(){for(var s=this.uv,d=this.points.length,m=this.frame.u0,p=this.frame.v0,g=this.frame.u1,T=this.frame.v1,S=(g-m)/(d-1),w=(T-p)/(d-1),A=0;A<d;A++){var M=A*4,R,P,b,F;this.horizontal?(this._flipX?(R=g-A*S,b=g-A*S):(R=m+A*S,b=m+A*S),this._flipY?(P=T,F=p):(P=p,F=T)):(this._flipX?(R=m,b=g):(R=g,b=m),this._flipY?(P=T-A*w,F=T-A*w):(P=p+A*w,F=p+A*w)),s[M+0]=R,s[M+1]=P,s[M+2]=b,s[M+3]=F}return this},resizeArrays:function(s){var d=this.colors,m=this.alphas;this.vertices=new Float32Array(s*4),this.uv=new Float32Array(s*4),d=new Uint32Array(s*2),m=new Float32Array(s*2);for(var p=0;p<s*2;p++)d[p]=16777215,m[p]=1;return this.colors=d,this.alphas=m,this.dirty=!0,this},updateVertices:function(){var s=this._perp,d=this.points,m=this.vertices,p=d.length;if(this.dirty=!1,!(p<1)){for(var g,T=d[0],S=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,w=0;w<p;w++){var A=d[w],M=w*4;w<p-1?g=d[w+1]:g=A,s.x=g.y-T.y,s.y=-(g.x-T.x);var R=s.length();s.x/=R,s.y/=R,s.x*=S,s.y*=S,m[M]=A.x+s.x,m[M+1]=A.y+s.y,m[M+2]=A.x-s.x,m[M+3]=A.y-s.y,T=A}return this}},setDebug:function(s,d){return this.debugGraphic=s,!s&&!d?this.debugCallback=null:d?this.debugCallback=d:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(s,d,m){var p=s.debugGraphic,g=m[0],T=m[1],S=m[2],w=m[3];p.lineBetween(g,T,S,w);for(var A=4;A<d;A+=4){var M=m[A+0],R=m[A+1],P=m[A+2],b=m[A+3];p.lineBetween(g,T,M,R),p.lineBetween(S,w,P,b),p.lineBetween(S,w,M,R),p.lineBetween(M,R,P,b),g=M,T=R,S=P,w=b}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(s){return this._flipX=s,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(s){return this._flipY=s,this.updateUVs()}}});o.exports=c}),95262:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};o.exports=E}),26209:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(35154),h=e(77757);x.register("rope",function(n,l){n===void 0&&(n={});var c=u(n,"key",null),s=u(n,"frame",null),d=u(n,"horizontal",!0),m=r(n,"points",void 0),p=r(n,"colors",void 0),g=r(n,"alphas",void 0),T=new h(this.scene,0,0,c,s,m,d,p,g);return l!==void 0&&(n.add=l),a(this.scene,T,n),T})}),96819:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(77757),x=e(39429);x.register("rope",function(u,r,h,n,l,c,s,d){return this.displayList.add(new a(this.scene,u,r,h,n,l,c,s,d))})}),38745:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(20439),u=e(95262),o.exports={renderWebGL:x,renderCanvas:u}}),20439:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),u=function(r,h,n,l){n.addToRenderList(h);var c=r.pipelines.set(h.pipeline,h),s=a(h,n,l).calc,d=h.vertices,m=h.uv,p=h.colors,g=h.alphas,T=h.alpha,S=x.getTintAppendFloatAlpha,w=n.roundPixels,A=d.length,M=Math.floor(A*.5);c.flush(),r.pipelines.preBatch(h);var R=c.setGameObject(h),P=c.vertexViewF32,b=c.vertexViewU32,F=c.vertexCount*c.currentShader.vertexComponentCount-1,I=0,L=h.tintFill;h.dirty&&h.updateVertices();for(var D=h.debugCallback,O=[],z=0;z<A;z+=2){var W=d[z+0],X=d[z+1],_=W*s.a+X*s.c+s.e,U=W*s.b+X*s.d+s.f;w&&(_=Math.round(_),U=Math.round(U)),P[++F]=_,P[++F]=U,P[++F]=m[z+0],P[++F]=m[z+1],P[++F]=R,P[++F]=L,b[++F]=S(p[I],n.alpha*(g[I]*T)),I++,D&&(O[z+0]=_,O[z+1]=U)}D&&D.call(h,h,A,O),c.vertexCount+=M,c.currentBatch.count=c.vertexCount-c.currentBatch.start,r.pipelines.postBatch(h)};o.exports=u}),20071:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(95643),r=e(95540),h=e(79291),n=e(61622),l=e(25479),c=e(61340),s=e(95428),d=e(92503),m=new a({Extends:u,Mixins:[x.ComputedSize,x.Depth,x.GetBounds,x.Mask,x.Origin,x.ScrollFactor,x.Transform,x.Visible,l],initialize:function(g,T,S,w,A,M,R,P){S===void 0&&(S=0),w===void 0&&(w=0),A===void 0&&(A=128),M===void 0&&(M=128),u.call(this,g,"Shader"),this.blendMode=-1,this.shader;var b=g.sys.renderer;this.renderer=b,this.gl=b.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=b.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=b.width,this._rendererHeight=b.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(S,w),this.setSize(A,M),this.setOrigin(.5,.5),this.setShader(T,R,P),this.renderer.on(d.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(p){return this.renderToTexture?!0:!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&p.id)},setRenderToTexture:function(p,g){if(!this.renderToTexture){var T=this.width,S=this.height,w=this.renderer;this.glTexture=w.createTextureFromSource(null,T,S,0),this.framebuffer=w.createFramebuffer(T,S,this.glTexture,!1),this._rendererWidth=T,this._rendererHeight=S,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),p&&(this.texture=this.scene.sys.textures.addGLTexture(p,this.glTexture))}return this.shader&&(w.pipelines.clear(),this.load(),this.flush(),w.pipelines.rebind()),this},setShader:function(p,g,T){if(this.renderer.contextLost)return this._deferSetShader={key:p,textures:g,textureData:T},this;if(g===void 0&&(g=[]),typeof p=="string"){var S=this.scene.sys.cache.shader;if(!S.has(p))return console.warn("Shader missing: "+p),this;this.shader=S.get(p)}else this.shader=p;var w=this.gl,A=this.renderer;this.program&&A.deleteProgram(this.program);var M=A.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);w.uniformMatrix4fv(w.getUniformLocation(M.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),w.uniformMatrix4fv(w.getUniformLocation(M.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),w.uniform2f(w.getUniformLocation(M.webGLProgram,"uResolution"),this.width,this.height),this.program=M;var R=new Date,P={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[R.getFullYear(),R.getMonth(),R.getDate(),R.getHours()*60*60+R.getMinutes()*60+R.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,P):this.uniforms=P;for(var b=0;b<4;b++)g[b]&&this.setSampler2D("iChannel"+b,g[b],b,T);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(p){return this.pointer=p,this},projOrtho:function(p,g,T,S){if(this.renderer.contextLost){this._deferProjOrtho={left:p,right:g,bottom:T,top:S};return}var w=-1e3,A=1e3,M=1/(p-g),R=1/(T-S),P=1/(w-A),b=this.projectionMatrix;b[0]=-2*M,b[5]=-2*R,b[10]=2*P,b[12]=(p+g)*M,b[13]=(S+T)*R,b[14]=(A+w)*P;var F=this.program,I=this.gl,L=this.renderer;L.setProgram(F),I.uniformMatrix4fv(I.getUniformLocation(F.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=g,this._rendererHeight=T},initUniforms:function(){var p=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var T in this.uniforms){var S=this.uniforms[T],w=S.type,A=p[w];S.uniformLocation=this.renderer.createUniformLocation(g,T),w!=="sampler2D"&&(S.glMatrix=A.matrix,S.glValueLength=A.length,S.glFunc=A.func)}},setSampler2DBuffer:function(p,g,T,S,w,A){w===void 0&&(w=0),A===void 0&&(A={});var M=this.uniforms[p];return M.value=g,A.width=T,A.height=S,M.textureData=A,this._textureCount=w,this.initSampler2D(M),this},setSampler2D:function(p,g,T,S){T===void 0&&(T=0);var w=this.scene.sys.textures;if(w.exists(g)){var A=w.getFrame(g);if(A.glTexture&&A.glTexture.isRenderTexture)return this.setSampler2DBuffer(p,A.glTexture,A.width,A.height,T,S);var M=this.uniforms[p],R=A.source;M.textureKey=g,M.source=R.image,M.value=A.glTexture,R.isGLTexture&&(S||(S={}),S.width=R.width,S.height=R.height),S&&(M.textureData=S),this._textureCount=T,this.initSampler2D(M)}return this},setUniform:function(p,g){return n(this.uniforms,p,g),this},getUniform:function(p){return r(this.uniforms,p,null)},setChannel0:function(p,g){return this.setSampler2D("iChannel0",p,0,g)},setChannel1:function(p,g){return this.setSampler2D("iChannel1",p,1,g)},setChannel2:function(p,g){return this.setSampler2D("iChannel2",p,2,g)},setChannel3:function(p,g){return this.setSampler2D("iChannel3",p,3,g)},initSampler2D:function(p){if(p.value){var g=p.textureData;if(g&&!p.value.isRenderTexture){var T=this.gl,S=p.value,w=T[r(g,"magFilter","linear").toUpperCase()],A=T[r(g,"minFilter","linear").toUpperCase()],M=T[r(g,"wrapS","repeat").toUpperCase()],R=T[r(g,"wrapT","repeat").toUpperCase()],P=T[r(g,"format","rgba").toUpperCase()],b=r(g,"flipY",!1),F=r(g,"width",S.width),I=r(g,"height",S.height),L=r(g,"source",S.pixels);g.repeat&&(M=T.REPEAT,R=T.REPEAT),g.width&&(L=null),S.update(L,F,I,b,M,R,A,w,P)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var p=this.gl,g=this.uniforms,T,S,w,A,M,R=0;for(var P in g)T=g[P],w=T.glFunc,S=T.glValueLength,A=T.uniformLocation,M=T.value,M!==null&&(S===1?T.glMatrix?w.call(p,A.webGLUniformLocation,T.transpose,M):w.call(p,A.webGLUniformLocation,M):S===2?w.call(p,A.webGLUniformLocation,M.x,M.y):S===3?w.call(p,A.webGLUniformLocation,M.x,M.y,M.z):S===4?w.call(p,A.webGLUniformLocation,M.x,M.y,M.z,M.w):T.type==="sampler2D"&&(p.activeTexture(p.TEXTURE0+R),p.bindTexture(p.TEXTURE_2D,M.webGLTexture),p.uniform1i(A.webGLUniformLocation,R),R++))},load:function(p){var g=this.gl,T=this.width,S=this.height,w=this.renderer,A=this.program,M=this.viewMatrix;if(!this.renderToTexture){var R=-this._displayOriginX,P=-this._displayOriginY;M[0]=p[0],M[1]=p[1],M[4]=p[2],M[5]=p[3],M[8]=p[4],M[9]=p[5],M[12]=M[0]*R+M[4]*P,M[13]=M[1]*R+M[5]*P}g.useProgram(A.webGLProgram),g.uniformMatrix4fv(g.getUniformLocation(A.webGLProgram,"uViewMatrix"),!1,M),g.uniformMatrix4fv(g.getUniformLocation(A.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),g.uniform2f(g.getUniformLocation(A.webGLProgram,"uResolution"),this.width,this.height);var b=this.uniforms,F=b.resolution;F.value.x=T,F.value.y=S,b.time.value=w.game.loop.getDuration();var I=this.pointer;if(I){var L=b.mouse,D=I.x/T,O=1-I.y/S;L.value.x=D.toFixed(2),L.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var p=this.width,g=this.height,T=this.program,S=this.gl,w=this.vertexBuffer,A=this.renderer,M=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(A.setFramebuffer(this.framebuffer),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT)),S.bindBuffer(S.ARRAY_BUFFER,w.webGLBuffer);var R=S.getAttribLocation(T.webGLProgram,"inPosition");R!==-1&&(S.enableVertexAttribArray(R),S.vertexAttribPointer(R,2,S.FLOAT,!1,M,0));var P=this.vertexViewF32;P[3]=g,P[4]=p,P[5]=g,P[8]=p,P[9]=g,P[10]=p;var b=6;S.bufferSubData(S.ARRAY_BUFFER,0,this.bytes.subarray(0,b*M)),S.drawArrays(S.TRIANGLES,0,b),this.renderToTexture&&A.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var p=this._deferSetShader.key,g=this._deferSetShader.textures,T=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(p,g,T)}if(this._deferProjOrtho!==null){var S=this._deferProjOrtho.left,w=this._deferProjOrtho.right,A=this._deferProjOrtho.bottom,M=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(S,w,A,M)}},preDestroy:function(){var p=this.renderer;p.off(d.RESTORE_WEBGL,this.onContextRestored,this),p.deleteProgram(this.program),p.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(p.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),s(this.uniforms,function(g){p.deleteUniformLocation(g.uniformLocation),g.uniformLocation=null})}});o.exports=m}),80464:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};o.exports=E}),54935:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(20071);x.register("shader",function(h,n){h===void 0&&(h={});var l=u(h,"key",null),c=u(h,"x",0),s=u(h,"y",0),d=u(h,"width",128),m=u(h,"height",128),p=new r(this.scene,l,c,s,d,m);return n!==void 0&&(h.add=n),a(this.scene,p,h),p})}),74177:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20071),x=e(39429);x.register("shader",function(u,r,h,n,l,c,s){return this.displayList.add(new a(this.scene,u,r,h,n,l,c,s))})}),25479:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(19257),u=e(80464),o.exports={renderWebGL:x,renderCanvas:u}}),19257:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(u,r,h,n){if(r.shader){if(h.addToRenderList(r),u.pipelines.clear(),r.renderToTexture)r.load(),r.flush();else{var l=a(r,h,n).calc;(u.width!==r._rendererWidth||u.height!==r._rendererHeight)&&r.projOrtho(0,u.width,u.height,0),r.load(l.matrix),r.flush()}u.pipelines.rebind()}};o.exports=x}),10441:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(u,r,h,n,l,c){for(var s=a.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*n),d=h.pathData,m=h.pathIndexes,p=0;p<m.length;p+=3){var g=m[p]*2,T=m[p+1]*2,S=m[p+2]*2,w=d[g+0]-l,A=d[g+1]-c,M=d[T+0]-l,R=d[T+1]-c,P=d[S+0]-l,b=d[S+1]-c,F=r.getX(w,A),I=r.getY(w,A),L=r.getX(M,R),D=r.getY(M,R),O=r.getX(P,b),z=r.getY(P,b);u.batchTri(h,F,I,L,D,O,z,0,0,1,1,s,s,s,2)}};o.exports=x}),65960:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=x||a.fillColor,h=u||a.fillAlpha,n=(r&16711680)>>>16,l=(r&65280)>>>8,c=r&255;e.fillStyle="rgba("+n+","+l+","+c+","+h+")"};o.exports=E}),75177:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=x||a.strokeColor,h=u||a.strokeAlpha,n=(r&16711680)>>>16,l=(r&65280)>>>8,c=r&255;e.strokeStyle="rgba("+n+","+l+","+c+","+h+")",e.lineWidth=a.lineWidth};o.exports=E}),17803:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(95643),r=e(23031),h=new a({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible],initialize:function(l,c,s){c===void 0&&(c="Shape"),u.call(this,l,c),this.geom=s,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new r,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(n,l){return l===void 0&&(l=1),n===void 0?this.isFilled=!1:(this.fillColor=n,this.fillAlpha=l,this.isFilled=!0),this},setStrokeStyle:function(n,l,c){return c===void 0&&(c=1),n===void 0?this.isStroked=!1:(this.lineWidth=n,this.strokeColor=l,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(n){return this.closePath=n,this},setSize:function(n,l){return this.width=n,this.height=l,this},setDisplaySize:function(n,l){return this.displayWidth=n,this.displayHeight=l,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}}});o.exports=h}),34682:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(u,r,h,n,l){var c=u.strokeTint,s=a.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*h);c.TL=s,c.TR=s,c.BL=s,c.BR=s;var d=r.pathData,m=d.length-1,p=r.lineWidth,g=p/2,T=d[0]-n,S=d[1]-l;r.closePath||(m-=2);for(var w=2;w<m;w+=2){var A=d[w]-n,M=d[w+1]-l;u.batchLine(T,S,A,M,g,g,p,w-2,r.closePath?w===m-1:!1),T=A,S=M}};o.exports=x}),23629:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13609),x=e(83419),u=e(39506),r=e(94811),h=e(96503),n=e(36383),l=e(17803),c=new x({Extends:l,Mixins:[a],initialize:function(d,m,p,g,T,S,w,A,M){m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=128),T===void 0&&(T=0),S===void 0&&(S=360),w===void 0&&(w=!1),l.call(this,d,"Arc",new h(0,0,g)),this._startAngle=T,this._endAngle=S,this._anticlockwise=w,this._iterations=.01,this.setPosition(m,p);var R=this.geom.radius*2;this.setSize(R,R),A!==void 0&&this.setFillStyle(A,M),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(s){this._iterations=s,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(s){this.geom.radius=s;var d=s*2;this.setSize(d,d),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(s){this._startAngle=s,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(s){this._endAngle=s,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(s){this._anticlockwise=s,this.updateData()}},setRadius:function(s){return this.radius=s,this},setIterations:function(s){return s===void 0&&(s=.01),this.iterations=s,this},setStartAngle:function(s,d){return this._startAngle=s,d!==void 0&&(this._anticlockwise=d),this.updateData()},setEndAngle:function(s,d){return this._endAngle=s,d!==void 0&&(this._anticlockwise=d),this.updateData()},updateData:function(){var s=this._iterations,d=s,m=this.geom.radius,p=u(this._startAngle),g=u(this._endAngle),T=this._anticlockwise,S=m,w=m;g-=p,T?g<-n.PI2?g=-n.PI2:g>0&&(g=-n.PI2+g%n.PI2):g>n.PI2?g=n.PI2:g<0&&(g=n.PI2+g%n.PI2);for(var A=[S+Math.cos(p)*m,w+Math.sin(p)*m],M;d<1;)M=g*d+p,A.push(S+Math.cos(M)*m,w+Math.sin(M)*m),d+=s;return M=g+p,A.push(S+Math.cos(M)*m,w+Math.sin(M)*m),A.push(S+Math.cos(p)*m,w+Math.sin(p)*m),this.pathIndexes=r(A),this.pathData=A,this}});o.exports=c}),42542:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39506),x=e(65960),u=e(75177),r=e(20926),h=function(n,l,c,s){c.addToRenderList(l);var d=n.currentContext;if(r(n,d,l,c,s)){var m=l.radius;d.beginPath(),d.arc(m-l.originX*(m*2),m-l.originY*(m*2),m,a(l._startAngle),a(l._endAngle),l.anticlockwise),l.closePath&&d.closePath(),l.isFilled&&(x(d,l),d.fill()),l.isStroked&&(u(d,l),d.stroke()),d.restore()}};o.exports=h}),42563:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23629),x=e(39429);x.register("arc",function(u,r,h,n,l,c,s,d){return this.displayList.add(new a(this.scene,u,r,h,n,l,c,s,d))}),x.register("circle",function(u,r,h,n,l){return this.displayList.add(new a(this.scene,u,r,h,0,360,!1,n,l))})}),13609:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(41447),u=e(42542),o.exports={renderWebGL:x,renderCanvas:u}}),41447:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(10441),u=e(34682),r=function(h,n,l,c){l.addToRenderList(n);var s=h.pipelines.set(n.pipeline),d=a(n,l,c),m=s.calcMatrix.copyFrom(d.calc),p=n._displayOriginX,g=n._displayOriginY,T=l.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&x(s,m,n,T,p,g),n.isStroked&&u(s,n,T,p,g),h.pipelines.postBatch(n)};o.exports=r}),89:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(33141),u=e(94811),r=e(87841),h=e(17803),n=new a({Extends:h,Mixins:[x],initialize:function(c,s,d,m,p,g){s===void 0&&(s=0),d===void 0&&(d=0),h.call(this,c,"Curve",m),this._smoothness=32,this._curveBounds=new r,this.closePath=!1,this.setPosition(s,d),p!==void 0&&this.setFillStyle(p,g),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(l){this._smoothness=l,this.updateData()}},setSmoothness:function(l){return this._smoothness=l,this.updateData()},updateData:function(){var l=this._curveBounds,c=this._smoothness;this.geom.getBounds(l,c),this.setSize(l.width,l.height),this.updateDisplayOrigin();for(var s=[],d=this.geom.getPoints(c),m=0;m<d.length;m++)s.push(d[m].x,d[m].y);return s.push(d[0].x,d[0].y),this.pathIndexes=u(s),this.pathData=s,this}});o.exports=n}),3170:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),u=e(20926),r=function(h,n,l,c){l.addToRenderList(n);var s=h.currentContext;if(u(h,s,n,l,c)){var d=n._displayOriginX+n._curveBounds.x,m=n._displayOriginY+n._curveBounds.y,p=n.pathData,g=p.length-1,T=p[0]-d,S=p[1]-m;s.beginPath(),s.moveTo(T,S),n.closePath||(g-=2);for(var w=2;w<g;w+=2){var A=p[w]-d,M=p[w+1]-m;s.lineTo(A,M)}n.closePath&&s.closePath(),n.isFilled&&(a(s,n),s.fill()),n.isStroked&&(x(s,n),s.stroke()),s.restore()}};o.exports=r}),40511:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(89);a.register("curve",function(u,r,h,n,l){return this.displayList.add(new x(this.scene,u,r,h,n,l))})}),33141:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(53987),u=e(3170),o.exports={renderWebGL:x,renderCanvas:u}}),53987:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),x=e(91296),u=e(34682),r=function(h,n,l,c){l.addToRenderList(n);var s=h.pipelines.set(n.pipeline),d=x(n,l,c),m=s.calcMatrix.copyFrom(d.calc),p=n._displayOriginX+n._curveBounds.x,g=n._displayOriginY+n._curveBounds.y,T=l.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&a(s,m,n,T,p,g),n.isStroked&&u(s,n,T,p,g),h.pipelines.postBatch(n)};o.exports=r}),19921:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(94811),u=e(54205),r=e(8497),h=e(17803),n=new a({Extends:h,Mixins:[u],initialize:function(c,s,d,m,p,g,T){s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=128),p===void 0&&(p=128),h.call(this,c,"Ellipse",new r(m/2,p/2,m,p)),this._smoothness=64,this.setPosition(s,d),this.width=m,this.height=p,g!==void 0&&this.setFillStyle(g,T),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(l){this._smoothness=l,this.updateData()}},setSize:function(l,c){return this.width=l,this.height=c,this.geom.setPosition(l/2,c/2),this.geom.setSize(l,c),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(l){return this._smoothness=l,this.updateData()},updateData:function(){for(var l=[],c=this.geom.getPoints(this._smoothness),s=0;s<c.length;s++)l.push(c[s].x,c[s].y);return l.push(c[0].x,c[0].y),this.pathIndexes=x(l),this.pathData=l,this}});o.exports=n}),7930:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),u=e(20926),r=function(h,n,l,c){l.addToRenderList(n);var s=h.currentContext;if(u(h,s,n,l,c)){var d=n._displayOriginX,m=n._displayOriginY,p=n.pathData,g=p.length-1,T=p[0]-d,S=p[1]-m;s.beginPath(),s.moveTo(T,S),n.closePath||(g-=2);for(var w=2;w<g;w+=2){var A=p[w]-d,M=p[w+1]-m;s.lineTo(A,M)}s.closePath(),n.isFilled&&(a(s,n),s.fill()),n.isStroked&&(x(s,n),s.stroke()),s.restore()}};o.exports=r}),1543:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19921),x=e(39429);x.register("ellipse",function(u,r,h,n,l,c){return this.displayList.add(new a(this.scene,u,r,h,n,l,c))})}),54205:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(19467),u=e(7930),o.exports={renderWebGL:x,renderCanvas:u}}),19467:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),x=e(91296),u=e(34682),r=function(h,n,l,c){l.addToRenderList(n);var s=h.pipelines.set(n.pipeline),d=x(n,l,c),m=s.calcMatrix.copyFrom(d.calc),p=n._displayOriginX,g=n._displayOriginY,T=l.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&a(s,m,n,T,p,g),n.isStroked&&u(s,n,T,p,g),h.pipelines.postBatch(n)};o.exports=r}),30479:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(17803),u=e(26015),r=new a({Extends:x,Mixins:[u],initialize:function(n,l,c,s,d,m,p,g,T,S,w){l===void 0&&(l=0),c===void 0&&(c=0),s===void 0&&(s=128),d===void 0&&(d=128),m===void 0&&(m=32),p===void 0&&(p=32),x.call(this,n,"Grid",null),this.cellWidth=m,this.cellHeight=p,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(l,c),this.setSize(s,d),this.setFillStyle(g,T),S!==void 0&&this.setOutlineStyle(S,w),this.updateDisplayOrigin()},setFillStyle:function(h,n){return n===void 0&&(n=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=n,this.showCells=!0),this},setAltFillStyle:function(h,n){return n===void 0&&(n=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=n,this.showAltCells=!0),this},setOutlineStyle:function(h,n){return n===void 0&&(n=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=n,this.showOutline=!0),this}});o.exports=r}),49912:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),u=e(20926),r=function(h,n,l,c){l.addToRenderList(n);var s=h.currentContext;if(u(h,s,n,l,c)){var d=-n._displayOriginX,m=-n._displayOriginY,p=l.alpha*n.alpha,g=n.width,T=n.height,S=n.cellWidth,w=n.cellHeight,A=Math.ceil(g/S),M=Math.ceil(T/w),R=S,P=w,b=S-(A*S-g),F=w-(M*w-T),I=n.showCells,L=n.showAltCells,D=n.showOutline,O=0,z=0,W=0,X=0,_=0;if(D&&(R--,P--,b===S&&b--,F===w&&F--),I&&n.fillAlpha>0)for(a(s,n),z=0;z<M;z++)for(L&&(W=z%2),O=0;O<A;O++){if(L&&W){W=0;continue}W++,X=O<A-1?R:b,_=z<M-1?P:F,s.fillRect(d+O*S,m+z*w,X,_)}if(L&&n.altFillAlpha>0)for(a(s,n,n.altFillColor,n.altFillAlpha*p),z=0;z<M;z++)for(L&&(W=z%2),O=0;O<A;O++){if(L&&!W){W=1;continue}W=0,X=O<A-1?R:b,_=z<M-1?P:F,s.fillRect(d+O*S,m+z*w,X,_)}if(D&&n.outlineFillAlpha>0){for(x(s,n,n.outlineFillColor,n.outlineFillAlpha*p),O=1;O<A;O++){var U=O*S;s.beginPath(),s.moveTo(U+d,m),s.lineTo(U+d,T+m),s.stroke()}for(z=1;z<M;z++){var G=z*w;s.beginPath(),s.moveTo(d,G+m),s.lineTo(d+g,G+m),s.stroke()}}s.restore()}};o.exports=r}),34137:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(30479);a.register("grid",function(u,r,h,n,l,c,s,d,m,p){return this.displayList.add(new x(this.scene,u,r,h,n,l,c,s,d,m,p))})}),26015:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(46161),u=e(49912),o.exports={renderWebGL:x,renderCanvas:u}}),46161:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),u=function(r,h,n,l){n.addToRenderList(h);var c=r.pipelines.set(h.pipeline),s=a(h,n,l),d=c.calcMatrix.copyFrom(s.calc);d.translate(-h._displayOriginX,-h._displayOriginY);var m=n.alpha*h.alpha,p=h.width,g=h.height,T=h.cellWidth,S=h.cellHeight,w=Math.ceil(p/T),A=Math.ceil(g/S),M=T,R=S,P=T-(w*T-p),b=S-(A*S-g),F,I,L=h.showCells,D=h.showAltCells,O=h.showOutline,z=0,W=0,X=0,_=0,U=0;if(O&&(M--,R--,P===T&&P--,b===S&&b--),r.pipelines.preBatch(h),L&&h.fillAlpha>0)for(F=c.fillTint,I=x.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*m),F.TL=I,F.TR=I,F.BL=I,F.BR=I,W=0;W<A;W++)for(D&&(X=W%2),z=0;z<w;z++){if(D&&X){X=0;continue}X++,_=z<w-1?M:P,U=W<A-1?R:b,c.batchFillRect(z*T,W*S,_,U)}if(D&&h.altFillAlpha>0)for(F=c.fillTint,I=x.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*m),F.TL=I,F.TR=I,F.BL=I,F.BR=I,W=0;W<A;W++)for(D&&(X=W%2),z=0;z<w;z++){if(D&&!X){X=1;continue}X=0,_=z<w-1?M:P,U=W<A-1?R:b,c.batchFillRect(z*T,W*S,_,U)}if(O&&h.outlineFillAlpha>0){var G=c.strokeTint,N=x.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*m);for(G.TL=N,G.TR=N,G.BL=N,G.BR=N,z=1;z<w;z++){var H=z*T;c.batchLine(H,0,H,g,h.lineWidth,h.lineWidth,1,0,!1)}for(W=1;W<A;W++){var V=W*S;c.batchLine(0,V,p,V,h.lineWidth,h.lineWidth,1,0,!1)}}r.pipelines.postBatch(h)};o.exports=u}),61475:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99651),x=e(83419),u=e(17803),r=new x({Extends:u,Mixins:[a],initialize:function(n,l,c,s,d,m,p,g){l===void 0&&(l=0),c===void 0&&(c=0),s===void 0&&(s=48),d===void 0&&(d=32),m===void 0&&(m=15658734),p===void 0&&(p=10066329),g===void 0&&(g=13421772),u.call(this,n,"IsoBox",null),this.projection=4,this.fillTop=m,this.fillLeft=p,this.fillRight=g,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(l,c),this.setSize(s,d),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,n,l){return h===void 0&&(h=!0),n===void 0&&(n=!0),l===void 0&&(l=!0),this.showTop=h,this.showLeft=n,this.showRight=l,this},setFillStyle:function(h,n,l){return this.fillTop=h,this.fillLeft=n,this.fillRight=l,this.isFilled=!0,this}});o.exports=r}),11508:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(20926),u=function(r,h,n,l){n.addToRenderList(h);var c=r.currentContext;if(x(r,c,h,n,l)&&h.isFilled){var s=h.width,d=h.height,m=s/2,p=s/h.projection;h.showTop&&(a(c,h,h.fillTop),c.beginPath(),c.moveTo(-m,-d),c.lineTo(0,-p-d),c.lineTo(m,-d),c.lineTo(m,-1),c.lineTo(0,p-1),c.lineTo(-m,-1),c.lineTo(-m,-d),c.fill()),h.showLeft&&(a(c,h,h.fillLeft),c.beginPath(),c.moveTo(-m,0),c.lineTo(0,p),c.lineTo(0,p-d),c.lineTo(-m,-d),c.lineTo(-m,0),c.fill()),h.showRight&&(a(c,h,h.fillRight),c.beginPath(),c.moveTo(m,0),c.lineTo(0,p),c.lineTo(0,p-d),c.lineTo(m,-d),c.lineTo(m,0),c.fill()),c.restore()}};o.exports=u}),3933:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(61475);a.register("isobox",function(u,r,h,n,l,c,s){return this.displayList.add(new x(this.scene,u,r,h,n,l,c,s))})}),99651:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(68149),u=e(11508),o.exports={renderWebGL:x,renderCanvas:u}}),68149:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),u=function(r,h,n,l){n.addToRenderList(h);var c=r.pipelines.set(h.pipeline),s=a(h,n,l),d=c.calcMatrix.copyFrom(s.calc),m=h.width,p=h.height,g=m/2,T=m/h.projection,S=n.alpha*h.alpha;if(h.isFilled){var w,A,M,R,P,b,F,I,L;r.pipelines.preBatch(h),h.showTop&&(w=x.getTintAppendFloatAlpha(h.fillTop,S),A=d.getX(-g,-p),M=d.getY(-g,-p),R=d.getX(0,-T-p),P=d.getY(0,-T-p),b=d.getX(g,-p),F=d.getY(g,-p),I=d.getX(0,T-p),L=d.getY(0,T-p),c.batchQuad(h,A,M,R,P,b,F,I,L,0,0,1,1,w,w,w,w,2)),h.showLeft&&(w=x.getTintAppendFloatAlpha(h.fillLeft,S),A=d.getX(-g,0),M=d.getY(-g,0),R=d.getX(0,T),P=d.getY(0,T),b=d.getX(0,T-p),F=d.getY(0,T-p),I=d.getX(-g,-p),L=d.getY(-g,-p),c.batchQuad(h,A,M,R,P,b,F,I,L,0,0,1,1,w,w,w,w,2)),h.showRight&&(w=x.getTintAppendFloatAlpha(h.fillRight,S),A=d.getX(g,0),M=d.getY(g,0),R=d.getX(0,T),P=d.getY(0,T),b=d.getX(0,T-p),F=d.getY(0,T-p),I=d.getX(g,-p),L=d.getY(g,-p),c.batchQuad(h,A,M,R,P,b,F,I,L,0,0,1,1,w,w,w,w,2)),r.pipelines.postBatch(h)}};o.exports=u}),16933:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(60561),u=e(17803),r=new a({Extends:u,Mixins:[x],initialize:function(n,l,c,s,d,m,p,g,T){l===void 0&&(l=0),c===void 0&&(c=0),s===void 0&&(s=48),d===void 0&&(d=32),m===void 0&&(m=!1),p===void 0&&(p=15658734),g===void 0&&(g=10066329),T===void 0&&(T=13421772),u.call(this,n,"IsoTriangle",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=T,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=m,this.isFilled=!0,this.setPosition(l,c),this.setSize(s,d),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,n,l){return h===void 0&&(h=!0),n===void 0&&(n=!0),l===void 0&&(l=!0),this.showTop=h,this.showLeft=n,this.showRight=l,this},setFillStyle:function(h,n,l){return this.fillTop=h,this.fillLeft=n,this.fillRight=l,this.isFilled=!0,this}});o.exports=r}),79590:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(20926),u=function(r,h,n,l){n.addToRenderList(h);var c=r.currentContext;if(x(r,c,h,n,l)&&h.isFilled){var s=h.width,d=h.height,m=s/2,p=s/h.projection,g=h.isReversed;h.showTop&&g&&(a(c,h,h.fillTop),c.beginPath(),c.moveTo(-m,-d),c.lineTo(0,-p-d),c.lineTo(m,-d),c.lineTo(0,p-d),c.fill()),h.showLeft&&(a(c,h,h.fillLeft),c.beginPath(),g?(c.moveTo(-m,-d),c.lineTo(0,p),c.lineTo(0,p-d)):(c.moveTo(-m,0),c.lineTo(0,p),c.lineTo(0,p-d)),c.fill()),h.showRight&&(a(c,h,h.fillRight),c.beginPath(),g?(c.moveTo(m,-d),c.lineTo(0,p),c.lineTo(0,p-d)):(c.moveTo(m,0),c.lineTo(0,p),c.lineTo(0,p-d)),c.fill()),c.restore()}};o.exports=u}),49803:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(16933);a.register("isotriangle",function(u,r,h,n,l,c,s,d){return this.displayList.add(new x(this.scene,u,r,h,n,l,c,s,d))})}),60561:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(51503),u=e(79590),o.exports={renderWebGL:x,renderCanvas:u}}),51503:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),u=function(r,h,n,l){n.addToRenderList(h);var c=r.pipelines.set(h.pipeline),s=a(h,n,l),d=c.calcMatrix.copyFrom(s.calc),m=h.width,p=h.height,g=m/2,T=m/h.projection,S=h.isReversed,w=n.alpha*h.alpha;if(h.isFilled){r.pipelines.preBatch(h);var A,M,R,P,b,F,I;if(h.showTop&&S){A=x.getTintAppendFloatAlpha(h.fillTop,w),M=d.getX(-g,-p),R=d.getY(-g,-p),P=d.getX(0,-T-p),b=d.getY(0,-T-p),F=d.getX(g,-p),I=d.getY(g,-p);var L=d.getX(0,T-p),D=d.getY(0,T-p);c.batchQuad(h,M,R,P,b,F,I,L,D,0,0,1,1,A,A,A,A,2)}h.showLeft&&(A=x.getTintAppendFloatAlpha(h.fillLeft,w),S?(M=d.getX(-g,-p),R=d.getY(-g,-p),P=d.getX(0,T),b=d.getY(0,T),F=d.getX(0,T-p),I=d.getY(0,T-p)):(M=d.getX(-g,0),R=d.getY(-g,0),P=d.getX(0,T),b=d.getY(0,T),F=d.getX(0,T-p),I=d.getY(0,T-p)),c.batchTri(h,M,R,P,b,F,I,0,0,1,1,A,A,A,2)),h.showRight&&(A=x.getTintAppendFloatAlpha(h.fillRight,w),S?(M=d.getX(g,-p),R=d.getY(g,-p),P=d.getX(0,T),b=d.getY(0,T),F=d.getX(0,T-p),I=d.getY(0,T-p)):(M=d.getX(g,0),R=d.getY(g,0),P=d.getX(0,T),b=d.getY(0,T),F=d.getX(0,T-p),I=d.getY(0,T-p)),c.batchTri(h,M,R,P,b,F,I,0,0,1,1,A,A,A,2)),r.pipelines.postBatch(h)}};o.exports=u}),57847:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(17803),u=e(23031),r=e(36823),h=new a({Extends:x,Mixins:[r],initialize:function(l,c,s,d,m,p,g,T,S){c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=0),p===void 0&&(p=128),g===void 0&&(g=0),x.call(this,l,"Line",new u(d,m,p,g));var w=Math.max(1,this.geom.right-this.geom.left),A=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,s),this.setSize(w,A),T!==void 0&&this.setStrokeStyle(1,T,S),this.updateDisplayOrigin()},setLineWidth:function(n,l){return l===void 0&&(l=n),this._startWidth=n,this._endWidth=l,this.lineWidth=n,this},setTo:function(n,l,c,s){return this.geom.setTo(n,l,c,s),this}});o.exports=h}),17440:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75177),x=e(20926),u=function(r,h,n,l){n.addToRenderList(h);var c=r.currentContext;if(x(r,c,h,n,l)){var s=h._displayOriginX,d=h._displayOriginY;h.isStroked&&(a(c,h),c.beginPath(),c.moveTo(h.geom.x1-s,h.geom.y1-d),c.lineTo(h.geom.x2-s,h.geom.y2-d),c.stroke()),c.restore()}};o.exports=u}),2481:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(57847);a.register("line",function(u,r,h,n,l,c,s,d){return this.displayList.add(new x(this.scene,u,r,h,n,l,c,s,d))})}),36823:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(77385),u=e(17440),o.exports={renderWebGL:x,renderCanvas:u}}),77385:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(70554),u=function(r,h,n,l){n.addToRenderList(h);var c=r.pipelines.set(h.pipeline),s=a(h,n,l);c.calcMatrix.copyFrom(s.calc);var d=h._displayOriginX,m=h._displayOriginY,p=n.alpha*h.alpha;if(r.pipelines.preBatch(h),h.isStroked){var g=c.strokeTint,T=x.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*p);g.TL=T,g.TR=T,g.BL=T,g.BR=T,c.batchLine(h.geom.x1-d,h.geom.y1-m,h.geom.x2-d,h.geom.y2-m,h._startWidth/2,h._endWidth/2,1,0,!1,s.sprite,s.camera)}r.pipelines.postBatch(h)};o.exports=u}),24949:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90273),x=e(83419),u=e(94811),r=e(13829),h=e(25717),n=e(17803),l=e(5469),c=new x({Extends:n,Mixins:[a],initialize:function(d,m,p,g,T,S){m===void 0&&(m=0),p===void 0&&(p=0),n.call(this,d,"Polygon",new h(g));var w=r(this.geom);this.setPosition(m,p),this.setSize(w.width,w.height),T!==void 0&&this.setFillStyle(T,S),this.updateDisplayOrigin(),this.updateData()},smooth:function(s){s===void 0&&(s=1);for(var d=0;d<s;d++)l(this.geom);return this.updateData()},setTo:function(s){this.geom.setTo(s);var d=r(this.geom);return this.setSize(d.width,d.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var s=[],d=this.geom.points,m=0;m<d.length;m++)s.push(d[m].x,d[m].y);return s.push(d[0].x,d[0].y),this.pathIndexes=u(s),this.pathData=s,this}});o.exports=c}),38710:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),u=e(20926),r=function(h,n,l,c){l.addToRenderList(n);var s=h.currentContext;if(u(h,s,n,l,c)){var d=n._displayOriginX,m=n._displayOriginY,p=n.pathData,g=p.length-1,T=p[0]-d,S=p[1]-m;s.beginPath(),s.moveTo(T,S),n.closePath||(g-=2);for(var w=2;w<g;w+=2){var A=p[w]-d,M=p[w+1]-m;s.lineTo(A,M)}n.closePath&&s.closePath(),n.isFilled&&(a(s,n),s.fill()),n.isStroked&&(x(s,n),s.stroke()),s.restore()}};o.exports=r}),64827:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(24949);a.register("polygon",function(u,r,h,n,l){return this.displayList.add(new x(this.scene,u,r,h,n,l))})}),90273:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(73695),u=e(38710),o.exports={renderWebGL:x,renderCanvas:u}}),73695:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),x=e(91296),u=e(34682),r=function(h,n,l,c){l.addToRenderList(n);var s=h.pipelines.set(n.pipeline),d=x(n,l,c),m=s.calcMatrix.copyFrom(d.calc),p=n._displayOriginX,g=n._displayOriginY,T=l.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&a(s,m,n,T,p,g),n.isStroked&&u(s,n,T,p,g),h.pipelines.postBatch(n)};o.exports=r}),74561:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(94811),u=e(87841),r=e(17803),h=e(95597),n=new a({Extends:r,Mixins:[h],initialize:function(c,s,d,m,p,g,T){s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=128),p===void 0&&(p=128),r.call(this,c,"Rectangle",new u(0,0,m,p)),this.radius=20,this.isRounded=!1,this.setPosition(s,d),this.setSize(m,p),g!==void 0&&this.setFillStyle(g,T),this.updateDisplayOrigin(),this.updateData()},setRounded:function(l){return l===void 0&&(l=16),this.radius=l,this.isRounded=l>0,this.updateRoundedData()},setSize:function(l,c){this.width=l,this.height=c,this.geom.setSize(l,c),this.updateData(),this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=l,s.hitArea.height=c),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var l=[],c=this.geom,s=this._tempLine;return c.getLineA(s),l.push(s.x1,s.y1,s.x2,s.y2),c.getLineB(s),l.push(s.x2,s.y2),c.getLineC(s),l.push(s.x2,s.y2),c.getLineD(s),l.push(s.x2,s.y2),this.pathData=l,this},updateRoundedData:function(){var l=[],c=this.width/2,s=this.height/2,d=Math.min(c,s),m=Math.min(this.radius,d),p=c,g=s,T=Math.max(1,Math.floor(m/5));return this.arcTo(l,p-c+m,g-s+m,m,Math.PI,Math.PI*1.5,T),l.push(p+c-m,g-s),this.arcTo(l,p+c-m,g-s+m,m,Math.PI*1.5,Math.PI*2,T),l.push(p+c,g+s-m),this.arcTo(l,p+c-m,g+s-m,m,0,Math.PI*.5,T),l.push(p-c+m,g+s),this.arcTo(l,p-c+m,g+s-m,m,Math.PI*.5,Math.PI,T),l.push(p-c,g-s+m),this.pathIndexes=x(l),this.pathData=l,this},arcTo:function(l,c,s,d,m,p,g){for(var T=(p-m)/g,S=0;S<=g;S++){var w=m+T*S;l.push(c+Math.cos(w)*d,s+Math.sin(w)*d)}}});o.exports=n}),48682:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),u=e(20926),r=function(n,l,c,s,d,m){var p=Math.min(s/2,d/2),g=Math.min(m,p);if(g===0){n.rect(l,c,s,d);return}n.moveTo(l+g,c),n.lineTo(l+s-g,c),n.arcTo(l+s,c,l+s,c+g,g),n.lineTo(l+s,c+d-g),n.arcTo(l+s,c+d,l+s-g,c+d,g),n.lineTo(l+g,c+d),n.arcTo(l,c+d,l,c+d-g,g),n.lineTo(l,c+g),n.arcTo(l,c,l+g,c,g),n.closePath()},h=function(n,l,c,s){c.addToRenderList(l);var d=n.currentContext;if(u(n,d,l,c,s)){var m=l._displayOriginX,p=l._displayOriginY;l.isFilled&&(a(d,l),l.isRounded?(d.beginPath(),r(d,-m,-p,l.width,l.height,l.radius),d.fill()):d.fillRect(-m,-p,l.width,l.height)),l.isStroked&&(x(d,l),d.beginPath(),l.isRounded?r(d,-m,-p,l.width,l.height,l.radius):d.rect(-m,-p,l.width,l.height),d.stroke()),d.restore()}};o.exports=h}),87959:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(74561);a.register("rectangle",function(u,r,h,n,l,c){return this.displayList.add(new x(this.scene,u,r,h,n,l,c))})}),95597:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(52059),u=e(48682),o.exports={renderWebGL:x,renderCanvas:u}}),52059:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),x=e(91296),u=e(34682),r=e(70554),h=function(n,l,c,s){c.addToRenderList(l);var d=n.pipelines.set(l.pipeline),m=x(l,c,s);d.calcMatrix.copyFrom(m.calc);var p=l._displayOriginX,g=l._displayOriginY,T=c.alpha*l.alpha;if(n.pipelines.preBatch(l),l.isRounded&&l.isFilled)a(d,m.calc,l,T,p,g);else if(l.isFilled){var S=d.fillTint,w=r.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*T);S.TL=w,S.TR=w,S.BL=w,S.BR=w,d.batchFillRect(-p,-g,l.width,l.height)}l.isStroked&&u(d,l,T,p,g),n.pipelines.postBatch(l)};o.exports=h}),55911:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81991),x=e(83419),u=e(94811),r=e(17803),h=new x({Extends:r,Mixins:[a],initialize:function(l,c,s,d,m,p,g,T){c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=5),m===void 0&&(m=32),p===void 0&&(p=64),r.call(this,l,"Star",null),this._points=d,this._innerRadius=m,this._outerRadius=p,this.setPosition(c,s),this.setSize(p*2,p*2),g!==void 0&&this.setFillStyle(g,T),this.updateDisplayOrigin(),this.updateData()},setPoints:function(n){return this._points=n,this.updateData()},setInnerRadius:function(n){return this._innerRadius=n,this.updateData()},setOuterRadius:function(n){return this._outerRadius=n,this.updateData()},points:{get:function(){return this._points},set:function(n){this._points=n,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(n){this._innerRadius=n,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(n){this._outerRadius=n,this.updateData()}},updateData:function(){var n=[],l=this._points,c=this._innerRadius,s=this._outerRadius,d=Math.PI/2*3,m=Math.PI/l,p=s,g=s;n.push(p,g+-s);for(var T=0;T<l;T++)n.push(p+Math.cos(d)*s,g+Math.sin(d)*s),d+=m,n.push(p+Math.cos(d)*c,g+Math.sin(d)*c),d+=m;return n.push(p,g+-s),this.pathIndexes=u(n),this.pathData=n,this}});o.exports=h}),64272:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),u=e(20926),r=function(h,n,l,c){l.addToRenderList(n);var s=h.currentContext;if(u(h,s,n,l,c)){var d=n._displayOriginX,m=n._displayOriginY,p=n.pathData,g=p.length-1,T=p[0]-d,S=p[1]-m;s.beginPath(),s.moveTo(T,S),n.closePath||(g-=2);for(var w=2;w<g;w+=2){var A=p[w]-d,M=p[w+1]-m;s.lineTo(A,M)}s.closePath(),n.isFilled&&(a(s,n),s.fill()),n.isStroked&&(x(s,n),s.stroke()),s.restore()}};o.exports=r}),93697:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55911),x=e(39429);x.register("star",function(u,r,h,n,l,c,s){return this.displayList.add(new a(this.scene,u,r,h,n,l,c,s))})}),81991:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(57017),u=e(64272),o.exports={renderWebGL:x,renderCanvas:u}}),57017:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),x=e(91296),u=e(34682),r=function(h,n,l,c){l.addToRenderList(n);var s=h.pipelines.set(n.pipeline),d=x(n,l,c),m=s.calcMatrix.copyFrom(d.calc),p=n._displayOriginX,g=n._displayOriginY,T=l.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&a(s,m,n,T,p,g),n.isStroked&&u(s,n,T,p,g),h.pipelines.postBatch(n)};o.exports=r}),36931:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(17803),u=e(16483),r=e(96195),h=new a({Extends:x,Mixins:[r],initialize:function(l,c,s,d,m,p,g,T,S,w,A){c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=128),p===void 0&&(p=64),g===void 0&&(g=0),T===void 0&&(T=128),S===void 0&&(S=128),x.call(this,l,"Triangle",new u(d,m,p,g,T,S));var M=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(c,s),this.setSize(M,R),w!==void 0&&this.setFillStyle(w,A),this.updateDisplayOrigin(),this.updateData()},setTo:function(n,l,c,s,d,m){return this.geom.setTo(n,l,c,s,d,m),this.updateData()},updateData:function(){var n=[],l=this.geom,c=this._tempLine;return l.getLineA(c),n.push(c.x1,c.y1,c.x2,c.y2),l.getLineB(c),n.push(c.x2,c.y2),l.getLineC(c),n.push(c.x2,c.y2),this.pathData=n,this}});o.exports=h}),85172:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),x=e(75177),u=e(20926),r=function(h,n,l,c){l.addToRenderList(n);var s=h.currentContext;if(u(h,s,n,l,c)){var d=n._displayOriginX,m=n._displayOriginY,p=n.geom.x1-d,g=n.geom.y1-m,T=n.geom.x2-d,S=n.geom.y2-m,w=n.geom.x3-d,A=n.geom.y3-m;s.beginPath(),s.moveTo(p,g),s.lineTo(T,S),s.lineTo(w,A),s.closePath(),n.isFilled&&(a(s,n),s.fill()),n.isStroked&&(x(s,n),s.stroke()),s.restore()}};o.exports=r}),45245:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(36931);a.register("triangle",function(u,r,h,n,l,c,s,d,m,p){return this.displayList.add(new x(this.scene,u,r,h,n,l,c,s,d,m,p))})}),96195:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(83253),u=e(85172),o.exports={renderWebGL:x,renderCanvas:u}}),83253:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=e(34682),u=e(70554),r=function(h,n,l,c){l.addToRenderList(n);var s=h.pipelines.set(n.pipeline),d=a(n,l,c);s.calcMatrix.copyFrom(d.calc);var m=n._displayOriginX,p=n._displayOriginY,g=l.alpha*n.alpha;if(h.pipelines.preBatch(n),n.isFilled){var T=s.fillTint,S=u.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*g);T.TL=S,T.TR=S,T.BL=S,T.BR=S;var w=n.geom.x1-m,A=n.geom.y1-p,M=n.geom.x2-m,R=n.geom.y2-p,P=n.geom.x3-m,b=n.geom.y3-p;s.batchFillTriangle(w,A,M,R,P,b,d.sprite,d.camera)}n.isStroked&&x(s,n,g,m,p),h.pipelines.postBatch(n)};o.exports=r}),68287:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(83419),u=e(31401),r=e(95643),h=e(92751),n=new x({Extends:r,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,h],initialize:function(c,s,d,m,p){r.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(m,p),this.setPosition(s,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,c){this.anims.update(l,c)},play:function(l,c){return this.anims.play(l,c)},playReverse:function(l,c){return this.anims.playReverse(l,c)},playAfterDelay:function(l,c){return this.anims.playAfterDelay(l,c)},playAfterRepeat:function(l,c){return this.anims.playAfterRepeat(l,c)},chain:function(l){return this.anims.chain(l)},stop:function(){return this.anims.stop()},stopAfterDelay:function(l){return this.anims.stopAfterDelay(l)},stopAfterRepeat:function(l){return this.anims.stopAfterRepeat(l)},stopOnFrame:function(l){return this.anims.stopOnFrame(l)},toJSON:function(){return u.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});o.exports=n}),76552:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x.addToRenderList(a),e.batchSprite(a,a.frame,x,u)};o.exports=E}),15567:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(13059),u=e(44603),r=e(23568),h=e(68287);u.register("sprite",function(n,l){n===void 0&&(n={});var c=r(n,"key",null),s=r(n,"frame",null),d=new h(this.scene,0,0,c,s);return l!==void 0&&(n.add=l),a(this.scene,d,n),x(d,n),d})}),46409:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(68287);a.register("sprite",function(u,r,h,n){return this.displayList.add(new x(this.scene,u,r,h,n))})}),92751:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(9409),u=e(76552),o.exports={renderWebGL:x,renderCanvas:u}}),9409:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x.addToRenderList(a),a.pipeline.batchSprite(a,x,u)};o.exports=E}),14220:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=e.canvas,r=e.context,h=e.style,n=[],l=0,c=x.length;h.maxLines>0&&h.maxLines<x.length&&(c=h.maxLines),h.syncFont(u,r);for(var s=e.letterSpacing,d=0;d<c;d++){var m=h.strokeThickness;if(s===0)m+=r.measureText(x[d]).width;else{for(var p=x[d],g=0;g<p.length;g++)m+=r.measureText(p[g]).width;p.length>1&&(m+=s*(p.length-1))}h.wordWrap&&(m-=r.measureText(" ").width),n[d]=Math.ceil(m),l=Math.max(l,n[d])}var T=a.fontSize+h.strokeThickness,S=T*c,w=e.lineSpacing;return c>1&&(S+=w*(c-1)),{width:l,height:S,lines:c,lineWidths:n,lineSpacing:w,lineHeight:T}};o.exports=E}),79557:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=function(u){var r=a.create(this),h=r.getContext("2d",{willReadFrequently:!0});u.syncFont(r,h);var n=h.measureText(u.testString);if("actualBoundingBoxAscent"in n){var l=n.actualBoundingBoxAscent,c=n.actualBoundingBoxDescent;return a.remove(r),{ascent:l,descent:c,fontSize:l+c}}var s=Math.ceil(n.width*u.baselineX),d=s,m=2*d;d=d*u.baselineY|0,r.width=s,r.height=m,h.fillStyle="#f00",h.fillRect(0,0,s,m),h.font=u._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(u.testString,0,d);var p={ascent:0,descent:0,fontSize:0},g=h.getImageData(0,0,s,m);if(!g)return p.ascent=d,p.descent=d+6,p.fontSize=p.ascent+p.descent,a.remove(r),p;var T=g.data,S=T.length,w=s*4,A,M,R=0,P=!1;for(A=0;A<d;A++){for(M=0;M<w;M+=4)if(T[R+M]!==255){P=!0;break}if(!P)R+=w;else break}for(p.ascent=d-A,R=S-w,P=!1,A=m;A>d;A--){for(M=0;M<w;M+=4)if(T[R+M]!==255){P=!0;break}if(!P)R-=w;else break}return p.descent=A-d,p.fontSize=p.ascent+p.descent,a.remove(r),p};o.exports=x}),50171:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),x=e(27919),u=e(83419),r=e(31401),h=e(95643),n=e(14220),l=e(35154),c=e(35846),s=e(61771),d=e(35762),m=e(45650),p=new u({Extends:h,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,s],initialize:function(T,S,w,A,M){S===void 0&&(S=0),w===void 0&&(w=0),h.call(this,T,"Text"),this.renderer=T.sys.renderer,this.setPosition(S,w),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=x.create(this),this.context,this.style=new d(this,M),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=m(),this.texture=T.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(A),M&&M.padding&&this.setPadding(M.padding),M&&M.lineSpacing&&this.setLineSpacing(M.lineSpacing),M&&M.letterSpacing&&this.setLetterSpacing(M.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(g){var T=this.style;if(T.wordWrapCallback){var S=T.wordWrapCallback.call(T.wordWrapCallbackScope,g,this);return Array.isArray(S)&&(S=S.join(`
`)),S}else return T.wordWrapWidth?T.wordWrapUseAdvanced?this.advancedWordWrap(g,this.context,this.style.wordWrapWidth):this.basicWordWrap(g,this.context,this.style.wordWrapWidth):g},advancedWordWrap:function(g,T,S){for(var w="",A=g.replace(/ +/gi," ").split(this.splitRegExp),M=A.length,R=0;R<M;R++){var P=A[R],b="";P=P.replace(/^ *|\s*$/gi,"");var F=P.length*this.letterSpacing,I=T.measureText(P).width+F;if(I<S){w+=P+`
`;continue}for(var L=S,D=P.split(" "),O=0;O<D.length;O++){var z=D[O],W=z+" ",X=W.length*this.letterSpacing,_=T.measureText(W).width+X;if(_>L){if(O===0){for(var U=W;U.length;){U=U.slice(0,-1);var G=U.length*this.letterSpacing;if(_=T.measureText(U).width+G,_<=L)break}if(!U.length)throw new Error("wordWrapWidth < a single character");var N=z.substr(U.length);D[O]=N,b+=U}var H=D[O].length?O:O+1,V=D.slice(H).join(" ").replace(/[ \n]*$/gi,"");A.splice(R+1,0,V),M=A.length;break}else b+=W,L-=_}w+=b.replace(/[ \n]*$/gi,"")+`
`}return w=w.replace(/[\s|\n]*$/gi,""),w},basicWordWrap:function(g,T,S){for(var w="",A=g.split(this.splitRegExp),M=A.length-1,R=T.measureText(" ").width,P=0;P<=M;P++){for(var b=S,F=A[P].split(" "),I=F.length-1,L=0;L<=I;L++){var D=F[L],O=D.length*this.letterSpacing,z=T.measureText(D).width+O,W=z;L<I&&(W+=R),W>b&&L>0&&(w+=`
`,b=S),w+=D,L<I?(w+=" ",b-=W):b-=z}P<M&&(w+=`
`)}return w},getWrappedText:function(g){g===void 0&&(g=this._text),this.style.syncFont(this.canvas,this.context);var T=this.runWordWrap(g);return T.split(this.splitRegExp)},setText:function(g){return!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g!==this._text&&(this._text=g.toString(),this.updateText()),this},appendText:function(g,T){T===void 0&&(T=!0),!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g=g.toString();var S=this._text.concat(T?`
`+g:g);return S!==this._text&&(this._text=S,this.updateText()),this},setStyle:function(g){return this.style.setStyle(g)},setFont:function(g){return this.style.setFont(g)},setFontFamily:function(g){return this.style.setFontFamily(g)},setFontSize:function(g){return this.style.setFontSize(g)},setFontStyle:function(g){return this.style.setFontStyle(g)},setFixedSize:function(g,T){return this.style.setFixedSize(g,T)},setBackgroundColor:function(g){return this.style.setBackgroundColor(g)},setFill:function(g){return this.style.setFill(g)},setColor:function(g){return this.style.setColor(g)},setStroke:function(g,T){return this.style.setStroke(g,T)},setShadow:function(g,T,S,w,A,M){return this.style.setShadow(g,T,S,w,A,M)},setShadowOffset:function(g,T){return this.style.setShadowOffset(g,T)},setShadowColor:function(g){return this.style.setShadowColor(g)},setShadowBlur:function(g){return this.style.setShadowBlur(g)},setShadowStroke:function(g){return this.style.setShadowStroke(g)},setShadowFill:function(g){return this.style.setShadowFill(g)},setWordWrapWidth:function(g,T){return this.style.setWordWrapWidth(g,T)},setWordWrapCallback:function(g,T){return this.style.setWordWrapCallback(g,T)},setAlign:function(g){return this.style.setAlign(g)},setResolution:function(g){return this.style.setResolution(g)},setLineSpacing:function(g){return this.lineSpacing=g,this.updateText()},setLetterSpacing:function(g){return this.letterSpacing=g,this.updateText()},setPadding:function(g,T,S,w){if(typeof g=="object"){var A=g,M=l(A,"x",null);M!==null?(g=M,S=M):(g=l(A,"left",0),S=l(A,"right",g));var R=l(A,"y",null);R!==null?(T=R,w=R):(T=l(A,"top",0),w=l(A,"bottom",T))}else g===void 0&&(g=0),T===void 0&&(T=g),S===void 0&&(S=g),w===void 0&&(w=T);return this.padding.left=g,this.padding.top=T,this.padding.right=S,this.padding.bottom=w,this.updateText()},setMaxLines:function(g){return this.style.setMaxLines(g)},setRTL:function(g){g===void 0&&(g=!0);var T=this.style;return T.rtl===g?this:(T.rtl=g,g?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),T.align==="left"?T.align="right":T.align==="right"&&(T.align="left"),this)},updateText:function(){var g=this.canvas,T=this.context,S=this.style,w=S.resolution,A=S.metrics;S.syncFont(g,T);var M=this._text;(S.wordWrapWidth||S.wordWrapCallback)&&(M=this.runWordWrap(this._text));var R=M.split(this.splitRegExp),P=n(this,A,R),b=this.padding,F;S.fixedWidth===0?(this.width=P.width+b.left+b.right,F=P.width):(this.width=S.fixedWidth,F=this.width-b.left-b.right,F<P.width&&(F=P.width)),S.fixedHeight===0?this.height=P.height+b.top+b.bottom:this.height=S.fixedHeight;var I=this.width,L=this.height;this.updateDisplayOrigin(),I*=w,L*=w,I=Math.max(I,1),L=Math.max(L,1),g.width!==I||g.height!==L?(g.width=I,g.height=L,this.frame.setSize(I,L),S.syncFont(g,T),S.rtl&&(T.direction="rtl")):T.clearRect(0,0,I,L),T.save(),T.scale(w,w),S.backgroundColor&&(T.fillStyle=S.backgroundColor,T.fillRect(0,0,I,L)),S.syncStyle(g,T),T.translate(b.left,b.top);for(var D,O,z=0;z<P.lines;z++){if(D=S.strokeThickness/2,O=S.strokeThickness/2+z*P.lineHeight+A.ascent,z>0&&(O+=P.lineSpacing*z),S.rtl)D=I-D-b.left-b.right;else if(S.align==="right")D+=F-P.lineWidths[z];else if(S.align==="center")D+=(F-P.lineWidths[z])/2;else if(S.align==="justify"){var W=.85;if(P.lineWidths[z]/P.width>=W){var X=P.width-P.lineWidths[z],_=T.measureText(" ").width,U=R[z].trim(),G=U.split(" ");X+=(R[z].length-U.length)*_;for(var N=Math.floor(X/_),H=0;N>0;)G[H]+=" ",H=(H+1)%(G.length-1||1),--N;R[z]=G.join(" ")}}this.autoRound&&(D=Math.round(D),O=Math.round(O));var V=this.letterSpacing;if(S.strokeThickness&&V===0&&(S.syncShadow(T,S.shadowStroke),T.strokeText(R[z],D,O)),S.color)if(S.syncShadow(T,S.shadowFill),V!==0)for(var $=0,j=R[z].split(""),k=0;k<j.length;k++)S.strokeThickness&&(S.syncShadow(T,S.shadowStroke),T.strokeText(j[k],D+$,O),S.syncShadow(T,S.shadowFill)),T.fillText(j[k],D+$,O),$+=T.measureText(j[k]).width+V;else T.fillText(R[z],D,O)}T.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(g,this.frame.source.glTexture,!0));var Q=this.input;return Q&&!Q.customHitArea&&(Q.hitArea.width=this.width,Q.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(g){this.setText(g)}},toJSON:function(){var g=r.ToJSON(this),T={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return g.data=T,g},preDestroy:function(){c(this.canvas),x.remove(this.canvas);var g=this.texture;g&&g.destroy()}});o.exports=p}),79724:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){a.width===0||a.height===0||(x.addToRenderList(a),e.batchSprite(a,a.frame,x,u))};o.exports=E}),71259:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(50171);x.register("text",function(h,n){h===void 0&&(h={});var l=u(h,"text",""),c=u(h,"style",null),s=u(h,"padding",null);s!==null&&(c.padding=s);var d=new r(this.scene,0,0,l,c);return n!==void 0&&(h.add=n),a(this.scene,d,h),d.autoRound=u(h,"autoRound",!0),d.resolution=u(h,"resolution",1),d})}),68005:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50171),x=e(39429);x.register("text",function(u,r,h,n){return this.displayList.add(new a(this.scene,u,r,h,n))})}),61771:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(34397),u=e(79724),o.exports={renderWebGL:x,renderCanvas:u}}),35762:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23568),u=e(35154),r=e(79557),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃâ°qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new a({initialize:function(c,s){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(s,!1,!0)},setStyle:function(l,c,s){c===void 0&&(c=!0),s===void 0&&(s=!1);for(var d in h){var m=s?h[d][1]:this[d];d==="wordWrapCallback"||d==="wordWrapCallbackScope"?this[d]=u(l,h[d][0],m):l&&d==="fontSize"&&typeof l.fontSize=="number"?this[d]=l.fontSize.toString()+"px":this[d]=x(l,h[d][0],m)}var p=u(l,"font",null);p!==null&&this.setFont(p,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var g=u(l,"fill",null);g!==null&&(this.color=g);var T=u(l,"metrics",!1);return T?this.metrics={ascent:u(T,"ascent",0),descent:u(T,"descent",0),fontSize:u(T,"fontSize",0)}:(c||!this.metrics)&&(this.metrics=r(this)),c?this.parent.updateText():this.parent},syncFont:function(l,c){c.font=this._font},syncStyle:function(l,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(l,c){c?(l.shadowOffsetX=this.shadowOffsetX,l.shadowOffsetY=this.shadowOffsetY,l.shadowColor=this.shadowColor,l.shadowBlur=this.shadowBlur):(l.shadowOffsetX=0,l.shadowOffsetY=0,l.shadowColor=0,l.shadowBlur=0)},update:function(l){return l&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=r(this)),this.parent.updateText()},setFont:function(l,c){c===void 0&&(c=!0);var s=l,d="",m="";if(typeof l!="string")s=u(l,"fontFamily","Courier"),d=u(l,"fontSize","16px"),m=u(l,"fontStyle","");else{var p=l.split(" "),g=0;m=p.length>2?p[g++]:"",d=p[g++]||"16px",s=p[g++]||"Courier"}return(s!==this.fontFamily||d!==this.fontSize||m!==this.fontStyle)&&(this.fontFamily=s,this.fontSize=d,this.fontStyle=m,c&&this.update(!0)),this.parent},setFontFamily:function(l){return this.fontFamily!==l&&(this.fontFamily=l,this.update(!0)),this.parent},setFontStyle:function(l){return this.fontStyle!==l&&(this.fontStyle=l,this.update(!0)),this.parent},setFontSize:function(l){return typeof l=="number"&&(l=l.toString()+"px"),this.fontSize!==l&&(this.fontSize=l,this.update(!0)),this.parent},setTestString:function(l){return this.testString=l,this.update(!0)},setFixedSize:function(l,c){return this.fixedWidth=l,this.fixedHeight=c,l&&(this.parent.width=l),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(l){return this.backgroundColor=l,this.update(!1)},setFill:function(l){return this.color=l,this.update(!1)},setColor:function(l){return this.color=l,this.update(!1)},setResolution:function(l){return this.resolution=l,this.update(!1)},setStroke:function(l,c){return c===void 0&&(c=this.strokeThickness),l===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==l||this.strokeThickness!==c)&&(this.stroke=l,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(l,c,s,d,m,p){return l===void 0&&(l=0),c===void 0&&(c=0),s===void 0&&(s="#000"),d===void 0&&(d=0),m===void 0&&(m=!1),p===void 0&&(p=!0),this.shadowOffsetX=l,this.shadowOffsetY=c,this.shadowColor=s,this.shadowBlur=d,this.shadowStroke=m,this.shadowFill=p,this.update(!1)},setShadowOffset:function(l,c){return l===void 0&&(l=0),c===void 0&&(c=l),this.shadowOffsetX=l,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(l){return l===void 0&&(l="#000"),this.shadowColor=l,this.update(!1)},setShadowBlur:function(l){return l===void 0&&(l=0),this.shadowBlur=l,this.update(!1)},setShadowStroke:function(l){return this.shadowStroke=l,this.update(!1)},setShadowFill:function(l){return this.shadowFill=l,this.update(!1)},setWordWrapWidth:function(l,c){return c===void 0&&(c=!1),this.wordWrapWidth=l,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(l,c){return c===void 0&&(c=null),this.wordWrapCallback=l,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(l){return l===void 0&&(l="left"),this.align=l,this.update(!1)},setMaxLines:function(l){return l===void 0&&(l=0),this.maxLines=l,this.update(!1)},getTextMetrics:function(){var l=this.metrics;return{ascent:l.ascent,descent:l.descent,fontSize:l.fontSize}},toJSON:function(){var l={};for(var c in h)l[c]=this[c];return l.metrics=this.getTextMetrics(),l},destroy:function(){this.parent=void 0}});o.exports=n}),34397:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(u,r,h,n){if(!(r.width===0||r.height===0)){h.addToRenderList(r);var l=r.frame,c=l.width,s=l.height,d=a.getTintAppendFloatAlpha,m=u.pipelines.set(r.pipeline,r),p=m.setTexture2D(l.glTexture,r);m.batchTexture(r,l.glTexture,c,s,r.x,r.y,c/r.style.resolution,s/r.style.resolution,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.displayOriginX,r.displayOriginY,0,0,c,s,d(r.tintTopLeft,h.alpha*r._alphaTL),d(r.tintTopRight,h.alpha*r._alphaTR),d(r.tintBottomLeft,h.alpha*r._alphaBL),d(r.tintBottomRight,h.alpha*r._alphaBR),r.tintFill,0,0,h,n,!1,p)}};o.exports=x}),20839:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(83419),u=e(31401),r=e(95643),h=e(98439),n=e(68703),l=e(56295),c=e(45650),s=e(26099),d=8,m=new x({Extends:r,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,l],initialize:function(g,T,S,w,A,M,R){var P=g.sys.renderer;r.call(this,g,"TileSprite");var b=g.sys.textures.get(M),F=b.get(R);F.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),b=g.sys.textures.get("__MISSING"),F=b.get()),b.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),b=g.sys.textures.get("__MISSING"),F=b.get()),!w||!A?(w=w||F.width,A=A||F.height):(w=Math.floor(w),A=Math.floor(A)),this._tilePosition=new s,this._tileScale=new s(1,1),this.dirty=!1,this.renderer=P,this.canvas=a.create(this,w,A),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=b,this.displayFrame=F,this._crop=this.resetCropObject(),this._textureKey=c(),this.texture=g.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=h(F.width),this.potHeight=h(F.height),this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(T,S),this.setSize(w,A),this.setFrame(R),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(p,g){return this.displayTexture=this.scene.sys.textures.get(p),this.setFrame(g)},setFrame:function(p){var g=this.displayTexture.get(p);return this.potWidth=h(g.width),this.potHeight=h(g.height),this.canvas.width=0,!g.cutWidth||!g.cutHeight?this.renderFlags&=~d:this.renderFlags|=d,this.displayFrame=g,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(p,g){return p!==void 0&&(this.tilePositionX=p),g!==void 0&&(this.tilePositionY=g),this},setTileScale:function(p,g){return p===void 0&&(p=this.tileScaleX),g===void 0&&(g=p),this.tileScaleX=p,this.tileScaleY=g,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var p=this.displayFrame;if(p.source.isRenderTexture||p.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var g=this.fillContext,T=this.fillCanvas,S=this.potWidth,w=this.potHeight;(!this.renderer||!this.renderer.gl)&&(S=p.cutWidth,w=p.cutHeight),g.clearRect(0,0,S,w),T.width=S,T.height=w,g.drawImage(p.source.image,p.cutX,p.cutY,p.cutWidth,p.cutHeight,0,0,S,w),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(T,this.fillPattern):this.fillPattern=g.createPattern(T,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var p=this.canvas;if((p.width!==this.width||p.height!==this.height)&&(p.width=this.width,p.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var g=this.context;this.scene.sys.game.config.antialias||n.disable(g);var T=this._tileScale.x,S=this._tileScale.y,w=this._tilePosition.x,A=this._tilePosition.y;g.clearRect(0,0,this.width,this.height),g.save(),g.scale(T,S),g.translate(-w,-A),g.fillStyle=this.fillPattern,g.fillRect(w,A,this.width/T,this.height/S),g.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),a.remove(this.canvas),a.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var p=this.texture;p&&p.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(p){this._tilePosition.x=p,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(p){this._tilePosition.y=p,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(p){this._tileScale.x=p,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(p){this._tileScale.y=p,this.dirty=!0}}});o.exports=m}),46992:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){a.updateCanvas(),x.addToRenderList(a),e.batchSprite(a,a.frame,x,u)};o.exports=E}),14167:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(20839);x.register("tileSprite",function(h,n){h===void 0&&(h={});var l=u(h,"x",0),c=u(h,"y",0),s=u(h,"width",512),d=u(h,"height",512),m=u(h,"key",""),p=u(h,"frame",""),g=new r(this.scene,l,c,s,d,m,p);return n!==void 0&&(h.add=n),a(this.scene,g,h),g})}),91681:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20839),x=e(39429);x.register("tileSprite",function(u,r,h,n,l,c){return this.displayList.add(new a(this.scene,u,r,h,n,l,c))})}),56295:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(18553),u=e(46992),o.exports={renderWebGL:x,renderCanvas:u}}),18553:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(u,r,h,n){r.updateCanvas();var l=r.width,c=r.height;if(!(l===0||c===0)){h.addToRenderList(r);var s=a.getTintAppendFloatAlpha,d=u.pipelines.set(r.pipeline,r),m=d.setTexture2D(r.fillPattern,r);d.batchTexture(r,r.fillPattern,r.displayFrame.width*r.tileScaleX,r.displayFrame.height*r.tileScaleY,r.x,r.y,l,c,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.originX*l,r.originY*c,0,0,l,c,s(r.tintTopLeft,h.alpha*r._alphaTL),s(r.tintTopRight,h.alpha*r._alphaTR),s(r.tintBottomLeft,h.alpha*r._alphaBL),s(r.tintBottomRight,h.alpha*r._alphaBR),r.tintFill,r.tilePositionX%r.displayFrame.width/r.displayFrame.width,r.tilePositionY%r.displayFrame.height/r.displayFrame.height,h,n,!1,m)}};o.exports=x}),18471:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(31401),r=e(51708),h=e(8443),n=e(95643),l=e(36383),c=e(14463),s=e(45650),d=e(10247),m=new x({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.TextureCrop,u.Tint,u.Transform,u.Visible,d],initialize:function(g,T,S,w){n.call(this,g,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=s(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var A=g.sys.game;this._device=A.device.video,this.setPosition(T,S),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),A.events.on(h.PAUSE,this.globalPause,this),A.events.on(h.RESUME,this.globalResume,this);var M=g.sys.sound;M&&M.on(c.GLOBAL_MUTE,this.globalMute,this),w&&this.load(w)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(p){var g=this.scene.sys.cache.video.get(p);return g?(this.cacheKey=p,this.loadHandler(g.url,g.noAudio,g.crossOrigin)):console.warn("No video in cache for key: "+p),this},changeSource:function(p,g,T,S,w){g===void 0&&(g=!0),T===void 0&&(T=!1),this.cacheKey!==p&&(this.load(p),g&&this.play(T,S,w))},getVideoKey:function(){return this.cacheKey},loadURL:function(p,g,T){g===void 0&&(g=!1);var S=this._device.getVideoURL(p);return S?(this.cacheKey="",this.loadHandler(S.url,g,T)):console.warn("No supported video format found for "+p),this},loadMediaStream:function(p,g,T){return this.loadHandler(null,g,T,p)},loadHandler:function(p,g,T,S){g||(g=!1);var w=this.video;if(w?(this.removeLoadEventHandlers(),this.stop()):(w=document.createElement("video"),w.controls=!1,w.setAttribute("playsinline","playsinline"),w.setAttribute("preload","auto"),w.setAttribute("disablePictureInPicture","true")),g?(w.muted=!0,w.defaultMuted=!0,w.setAttribute("autoplay","autoplay")):(w.muted=!1,w.defaultMuted=!1,w.removeAttribute("autoplay")),T?w.setAttribute("crossorigin",T):w.removeAttribute("crossorigin"),S)if("srcObject"in w)try{w.srcObject=S}catch(M){if(M.name!=="TypeError")throw M;w.src=URL.createObjectURL(S)}else w.src=URL.createObjectURL(S);else w.src=p;this.retry=0,this.video=w,this._playCalled=!1,w.load(),this.addLoadEventHandlers();var A=this.scene.sys.textures.get(this._key);return this.setTexture(A),this},requestVideoFrame:function(p,g){var T=this.video;if(T){var S=g.width,w=g.height,A=this.videoTexture,M=this.videoTextureSource,R=!A||M.source!==T;R?(this._codePaused=T.paused,this._codeMuted=T.muted,A?(M.source=T,M.width=S,M.height=w,A.get().setSize(S,w)):(A=this.scene.sys.textures.create(this._key,T,S,w),A.add("__BASE",0,0,0,S,w),this.setTexture(A),this.videoTexture=A,this.videoTextureSource=A.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(r.VIDEO_TEXTURE,this,A)),this.setSizeToFrame(),this.updateDisplayOrigin()):M.update(),this.isStalled=!1,this.metadata=g;var P=g.mediaTime;R&&(this._lastUpdate=P,this.emit(r.VIDEO_CREATED,this,S,w),this.frameReady||(this.frameReady=!0,this.emit(r.VIDEO_PLAY,this))),this._playingMarker?P>=this._markerOut&&(T.loop?(T.currentTime=this._markerIn,this.emit(r.VIDEO_LOOP,this)):(this.stop(!1),this.emit(r.VIDEO_COMPLETE,this))):P<this._lastUpdate&&this.emit(r.VIDEO_LOOP,this),this._lastUpdate=P,this._getFrame?(this.removeEventHandlers(),T.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(p,g,T){g===void 0&&(g=-1),T===void 0&&(T=l.MAX_SAFE_INTEGER);var S=this.video;return!S||this.isPlaying()?(S||console.warn("Video not loaded"),this):(p===void 0&&(p=S.loop),S.loop=p,this._markerIn=g,this._markerOut=T,this._playingMarker=g>-1&&T>g&&T<l.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=S.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var p=this.video;return!p||this.isPlaying()?(p||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=p.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var p=this.video;p&&(p.addEventListener("error",this._loadCallbackHandler),p.addEventListener("abort",this._loadCallbackHandler),p.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var p=this.video;p&&(p.removeEventListener("error",this._loadCallbackHandler),p.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var p=this.video;if(p){var g=this._callbacks;for(var T in g)p.addEventListener(T,g[T])}},removeEventHandlers:function(){var p=this.video;if(p){var g=this._callbacks;for(var T in g)p.removeEventListener(T,g[T])}},createPlayPromise:function(p){p===void 0&&(p=!0);var g=this.video,T=g.play();if(T!==void 0){var S=this.playSuccess.bind(this),w=this.playError.bind(this);if(!p){var A=this;w=function(){A.failedPlayAttempts++}}T.then(S).catch(w)}else g.addEventListener("playing",this._callbacks.legacy),p||this.failedPlayAttempts++},addMarker:function(p,g,T){return!isNaN(g)&&g>=0&&!isNaN(T)&&T>g&&(this.markers[p]=[g,T]),this},playMarker:function(p,g){var T=this.markers[p];return T&&this.play(g,T[0],T[1]),this},removeMarker:function(p){return delete this.markers[p],this},snapshot:function(p,g){return p===void 0&&(p=this.width),g===void 0&&(g=this.height),this.snapshotArea(0,0,this.width,this.height,p,g)},snapshotArea:function(p,g,T,S,w,A){p===void 0&&(p=0),g===void 0&&(g=0),T===void 0&&(T=this.width),S===void 0&&(S=this.height),w===void 0&&(w=T),A===void 0&&(A=S);var M=this.video,R=this.snapshotTexture;return R?(R.setSize(w,A),M&&R.context.drawImage(M,p,g,T,S,0,0,w,A)):(R=this.scene.sys.textures.createCanvas(s(),w,A),this.snapshotTexture=R,M&&R.context.drawImage(M,p,g,T,S,0,0,w,A)),R.update()},saveSnapshotTexture:function(p){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,p):this.snapshotTexture=this.scene.sys.textures.createCanvas(p,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(r.VIDEO_UNLOCKED,this));var p=this.scene.sys.sound;p&&p.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(p){var g=p.name;g==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(r.VIDEO_LOCKED,this)):g==="NotSupportedError"?(this.stop(!1),this.emit(r.VIDEO_UNSUPPORTED,this,p)):(this.stop(!1),this.emit(r.VIDEO_ERROR,this,p))},legacyPlayHandler:function(){var p=this.video;p&&(this.playSuccess(),p.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(r.VIDEO_PLAYING,this)},loadErrorHandler:function(p){this.stop(!1),this.emit(r.VIDEO_ERROR,this,p)},metadataHandler:function(p){this.emit(r.VIDEO_METADATA,this,p)},setSizeToFrame:function(p){p||(p=this.frame),this.width=p.realWidth,this.height=p.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var g=this.input;return g&&!g.customHitArea&&(g.hitArea.width=this.width,g.hitArea.height=this.height),this},stalledHandler:function(p){this.isStalled=!0,this.emit(r.VIDEO_STALLED,this,p)},completeHandler:function(){this._playCalled=!1,this.emit(r.VIDEO_COMPLETE,this)},preUpdate:function(p,g){var T=this.video;!T||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=g,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(p){var g=this.video;if(g){var T=g.duration;if(T!==1/0&&!isNaN(T)){var S=T*p;this.setCurrentTime(S)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(p){var g=this.video;if(g){if(typeof p=="string"){var T=p[0],S=parseFloat(p.substr(1));T==="+"?p=g.currentTime+S:T==="-"&&(p=g.currentTime-S)}g.currentTime=p}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(r.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(r.VIDEO_SEEKED,this)},getProgress:function(){var p=this.video;if(p){var g=p.duration;if(g!==1/0&&!isNaN(g))return p.currentTime/g}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(p){p===void 0&&(p=!0),this._codeMuted=p;var g=this.video;return g&&(g.muted=this._systemMuted?!0:p),this},isMuted:function(){return this._codeMuted},globalMute:function(p,g){this._systemMuted=g;var T=this.video;T&&(T.muted=this._codeMuted?!0:g)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(p){p===void 0&&(p=!0);var g=this.video;return this._codePaused=p,g&&!g.ended&&(p?g.paused||(this.removeEventHandlers(),g.pause()):p||(this._playCalled?g.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(p){return p===void 0&&(p=1),this.video&&(this.video.volume=a(p,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(p){return this.video&&(this.video.playbackRate=p),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(p){return p===void 0&&(p=!0),this.video&&(this.video.loop=p),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(p,g){return g===void 0&&(g=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,p),this.videoTextureSource.setFlipY(g)),this._key=p,this.flipY=g,!!this.videoTexture},stop:function(p){p===void 0&&(p=!0);var g=this.video;return g&&(this.removeEventHandlers(),g.cancelVideoFrameCallback(this._rfvCallbackId),g.pause()),this.retry=0,this._playCalled=!1,p&&this.emit(r.VIDEO_STOP,this),this},removeVideoElement:function(){var p=this.video;if(p){for(p.parentNode&&p.parentNode.removeChild(p);p.hasChildNodes();)p.removeChild(p.firstChild);p.removeAttribute("autoplay"),p.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var p=this.scene.sys.game.events;p.off(h.PAUSE,this.globalPause,this),p.off(h.RESUME,this.globalResume,this);var g=this.scene.sys.sound;g&&g.off(c.GLOBAL_MUTE,this.globalMute,this)}});o.exports=m}),58352:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){a.videoTexture&&(x.addToRenderList(a),e.batchSprite(a,a.frame,x,u))};o.exports=E}),11511:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),x=e(44603),u=e(23568),r=e(18471);x.register("video",function(h,n){h===void 0&&(h={});var l=u(h,"key",null),c=new r(this.scene,0,0,l);return n!==void 0&&(h.add=n),a(this.scene,c,h),c})}),89025:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18471),x=e(39429);x.register("video",function(u,r,h){return this.displayList.add(new a(this.scene,u,r,h))})}),10247:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(29849),u=e(58352),o.exports={renderWebGL:x,renderCanvas:u}}),29849:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){a.videoTexture&&(x.addToRenderList(a),a.pipeline.batchSprite(a,x,u))};o.exports=E}),41481:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(96503),u=e(87902),r=e(83419),h=e(31401),n=e(95643),l=e(87841),c=e(37303),s=new r({Extends:n,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(m,p,g,T,S){T===void 0&&(T=1),S===void 0&&(S=T),n.call(this,m,"Zone"),this.setPosition(p,g),this.width=T,this.height=S,this.blendMode=a.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(d){this.scaleX=d/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(d){this.scaleY=d/this.height}},setSize:function(d,m,p){p===void 0&&(p=!0),this.width=d,this.height=m,this.updateDisplayOrigin();var g=this.input;return p&&g&&!g.customHitArea&&(g.hitArea.width=d,g.hitArea.height=m),this},setDisplaySize:function(d,m){return this.displayWidth=d,this.displayHeight=m,this},setCircleDropZone:function(d){return this.setDropZone(new x(0,0,d),u)},setRectangleDropZone:function(d,m){return this.setDropZone(new l(0,0,d,m),c)},setDropZone:function(d,m){return this.input||this.setInteractive(d,m,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(d,m,p){p.addToRenderList(m)},renderWebGL:function(d,m,p){p.addToRenderList(m)}});o.exports=s}),95261:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),x=e(23568),u=e(41481);a.register("zone",function(r){var h=x(r,"x",0),n=x(r,"y",0),l=x(r,"width",1),c=x(r,"height",l);return new u(this.scene,h,n,l,c)})}),84175:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41481),x=e(39429);x.register("zone",function(u,r,h,n){return this.displayList.add(new a(this.scene,u,r,h,n))})}),95166:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};o.exports=E}),96503:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(87902),u=e(26241),r=e(79124),h=e(23777),n=e(28176),l=new a({initialize:function(s,d,m){s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=0),this.type=h.CIRCLE,this.x=s,this.y=d,this._radius=m,this._diameter=m*2},contains:function(c,s){return x(this,c,s)},getPoint:function(c,s){return u(this,c,s)},getPoints:function(c,s,d){return r(this,c,s,d)},getRandomPoint:function(c){return n(this,c)},setTo:function(c,s,d){return this.x=c,this.y=s,this._radius=d,this._diameter=d*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,s){return s===void 0&&(s=c),this.x=c,this.y=s,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});o.exports=l}),71562:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 2*(Math.PI*e.radius)};o.exports=E}),92110:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r,h){return h===void 0&&(h=new a),h.x=u.x+u.radius*Math.cos(r),h.y=u.y+u.radius*Math.sin(r),h};o.exports=x}),42250:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),x=function(u){return new a(u.x,u.y,u.radius)};o.exports=x}),87902:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(e.radius>0&&a>=e.left&&a<=e.right&&x>=e.top&&x<=e.bottom){var u=(e.x-a)*(e.x-a),r=(e.y-x)*(e.y-x);return u+r<=e.radius*e.radius}else return!1};o.exports=E}),5698:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),x=function(u,r){return a(u,r.x,r.y)};o.exports=x}),70588:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),x=function(u,r){return a(u,r.x,r.y)&&a(u,r.right,r.y)&&a(u,r.x,r.bottom)&&a(u,r.right,r.bottom)};o.exports=x}),26394:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x,e.y,e.radius)};o.exports=E}),76278:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x===a.x&&e.y===a.y&&e.radius===a.radius};o.exports=E}),2074:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(u,r){return r===void 0&&(r=new a),r.x=u.left,r.y=u.top,r.width=u.diameter,r.height=u.diameter,r};o.exports=x}),26241:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92110),x=e(62945),u=e(36383),r=e(2141),h=function(n,l,c){c===void 0&&(c=new r);var s=x(l,0,u.PI2);return a(n,s,c)};o.exports=h}),79124:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71562),x=e(92110),u=e(62945),r=e(36383),h=function(n,l,c,s){s===void 0&&(s=[]),!l&&c>0&&(l=a(n)/c);for(var d=0;d<l;d++){var m=u(d/l,0,r.PI2);s.push(x(n,m))}return s};o.exports=h}),50884:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x+=a,e.y+=x,e};o.exports=E}),39212:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x+=a.x,e.y+=a.y,e};o.exports=E}),28176:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){r===void 0&&(r=new a);var h=2*Math.PI*Math.random(),n=Math.random()+Math.random(),l=n>1?2-n:n,c=l*Math.cos(h),s=l*Math.sin(h);return r.x=u.x+c*u.radius,r.y=u.y+s*u.radius,r};o.exports=x}),88911:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503);a.Area=e(95166),a.Circumference=e(71562),a.CircumferencePoint=e(92110),a.Clone=e(42250),a.Contains=e(87902),a.ContainsPoint=e(5698),a.ContainsRect=e(70588),a.CopyFrom=e(26394),a.Equals=e(76278),a.GetBounds=e(2074),a.GetPoint=e(26241),a.GetPoints=e(79124),a.Offset=e(50884),a.OffsetPoint=e(39212),a.Random=e(28176),o.exports=a}),23777:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};o.exports=E}),78874:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};o.exports=E}),92990:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=e.width/2,x=e.height/2,u=Math.pow(a-x,2)/Math.pow(a+x,2);return Math.PI*(a+x)*(1+3*u/(10+Math.sqrt(4-3*u)))};o.exports=E}),79522:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r,h){h===void 0&&(h=new a);var n=u.width/2,l=u.height/2;return h.x=u.x+n*Math.cos(r),h.y=u.y+l*Math.sin(r),h};o.exports=x}),58102:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8497),x=function(u){return new a(u.x,u.y,u.width,u.height)};o.exports=x}),81154:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(e.width<=0||e.height<=0)return!1;var u=(a-e.x)/e.width,r=(x-e.y)/e.height;return u*=u,r*=r,u+r<.25};o.exports=E}),46662:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81154),x=function(u,r){return a(u,r.x,r.y)};o.exports=x}),1632:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81154),x=function(u,r){return a(u,r.x,r.y)&&a(u,r.right,r.y)&&a(u,r.x,r.bottom)&&a(u,r.right,r.bottom)};o.exports=x}),65534:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};o.exports=E}),8497:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(81154),u=e(90549),r=e(48320),h=e(23777),n=e(24820),l=new a({initialize:function(s,d,m,p){s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=0),p===void 0&&(p=0),this.type=h.ELLIPSE,this.x=s,this.y=d,this.width=m,this.height=p},contains:function(c,s){return x(this,c,s)},getPoint:function(c,s){return u(this,c,s)},getPoints:function(c,s,d){return r(this,c,s,d)},getRandomPoint:function(c){return n(this,c)},setTo:function(c,s,d,m){return this.x=c,this.y=s,this.width=d,this.height=m,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,s){return s===void 0&&(s=c),this.x=c,this.y=s,this},setSize:function(c,s){return s===void 0&&(s=c),this.width=c,this.height=s,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});o.exports=l}),36146:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};o.exports=E}),23694:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(u,r){return r===void 0&&(r=new a),r.x=u.left,r.y=u.top,r.width=u.width,r.height=u.height,r};o.exports=x}),90549:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79522),x=e(62945),u=e(36383),r=e(2141),h=function(n,l,c){c===void 0&&(c=new r);var s=x(l,0,u.PI2);return a(n,s,c)};o.exports=h}),48320:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92990),x=e(79522),u=e(62945),r=e(36383),h=function(n,l,c,s){s===void 0&&(s=[]),!l&&c>0&&(l=a(n)/c);for(var d=0;d<l;d++){var m=u(d/l,0,r.PI2);s.push(x(n,m))}return s};o.exports=h}),73424:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x+=a,e.y+=x,e};o.exports=E}),44808:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x+=a.x,e.y+=a.y,e};o.exports=E}),24820:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){r===void 0&&(r=new a);var h=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return r.x=u.x+n*Math.cos(h)*u.width/2,r.y=u.y+n*Math.sin(h)*u.height/2,r};o.exports=x}),49203:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8497);a.Area=e(78874),a.Circumference=e(92990),a.CircumferencePoint=e(79522),a.Clone=e(58102),a.Contains=e(81154),a.ContainsPoint=e(46662),a.ContainsRect=e(1632),a.CopyFrom=e(65534),a.Equals=e(36146),a.GetBounds=e(23694),a.GetPoint=e(90549),a.GetPoints=e(48320),a.Offset=e(73424),a.OffsetPoint=e(44808),a.Random=e(24820),o.exports=a}),55738:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23777),x=e(79291),u={Circle:e(88911),Ellipse:e(49203),Intersects:e(91865),Line:e(2529),Mesh:e(73090),Point:e(43711),Polygon:e(58423),Rectangle:e(93232),Triangle:e(84435)};u=x(!1,u,a),o.exports=u}),2044:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20339),x=function(u,r){return a(u.x,u.y,r.x,r.y)<=u.radius+r.radius};o.exports=x}),81491:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=a.width/2,u=a.height/2,r=Math.abs(e.x-a.x-x),h=Math.abs(e.y-a.y-u),n=x+e.radius,l=u+e.radius;if(r>n||h>l)return!1;if(r<=x||h<=u)return!0;var c=r-x,s=h-u,d=c*c,m=s*s,p=e.radius*e.radius;return d+m<=p};o.exports=E}),63376:((o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(2044),u=function(r,h,n){if(n===void 0&&(n=[]),x(r,h)){var l=r.x,c=r.y,s=r.radius,d=h.x,m=h.y,p=h.radius,g,T,S,w,A;if(c===m)A=(p*p-s*s-d*d+l*l)/(2*(l-d)),g=1,T=-2*m,S=d*d+A*A-2*d*A+m*m-p*p,w=T*T-4*g*S,w===0?n.push(new a(A,-T/(2*g))):w>0&&(n.push(new a(A,(-T+Math.sqrt(w))/(2*g))),n.push(new a(A,(-T-Math.sqrt(w))/(2*g))));else{var M=(l-d)/(c-m),R=(p*p-s*s-d*d+l*l-m*m+c*c)/(2*(c-m));g=M*M+1,T=2*c*M-2*R*M-2*l,S=l*l+c*c+R*R-s*s-2*c*R,w=T*T-4*g*S,w===0?(A=-T/(2*g),n.push(new a(A,R-A*M))):w>0&&(A=(-T+Math.sqrt(w))/(2*g),n.push(new a(A,R-A*M)),A=(-T-Math.sqrt(w))/(2*g),n.push(new a(A,R-A*M)))}}return n};o.exports=u}),97439:((o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4042),x=e(81491),u=function(r,h,n){if(n===void 0&&(n=[]),x(r,h)){var l=h.getLineA(),c=h.getLineB(),s=h.getLineC(),d=h.getLineD();a(l,r,n),a(c,r,n),a(s,r,n),a(d,r,n)}return n};o.exports=u}),4042:((o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(80462),u=function(r,h,n){if(n===void 0&&(n=[]),x(r,h)){var l=r.x1,c=r.y1,s=r.x2,d=r.y2,m=h.x,p=h.y,g=h.radius,T=s-l,S=d-c,w=l-m,A=c-p,M=T*T+S*S,R=2*(T*w+S*A),P=w*w+A*A-g*g,b=R*R-4*M*P,F,I;if(b===0){var L=-R/(2*M);F=l+L*T,I=c+L*S,L>=0&&L<=1&&n.push(new a(F,I))}else if(b>0){var D=(-R-Math.sqrt(b))/(2*M);F=l+D*T,I=c+D*S,D>=0&&D<=1&&n.push(new a(F,I));var O=(-R+Math.sqrt(b))/(2*M);F=l+O*T,I=c+O*S,O>=0&&O<=1&&n.push(new a(F,I))}}return n};o.exports=u}),36100:((o,E,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),x=function(u,r,h,n){h===void 0&&(h=!1);var l=u.x1,c=u.y1,s=u.x2,d=u.y2,m=r.x1,p=r.y1,g=r.x2,T=r.y2,S=s-l,w=d-c,A=g-m,M=T-p,R=S*M-w*A;if(R===0)return null;var P,b,F;if(h){if(P=(S*(p-c)+w*(l-m))/(A*w-M*S),S!==0)b=(m+A*P-l)/S;else if(w!==0)b=(p+M*P-c)/w;else return null;if(b<0||P<0||P>1)return null;F=b}else{if(P=((m-l)*M-(p-c)*A)/R,b=((c-p)*S-(l-m)*w)/R,P<0||P>1||b<0||b>1)return null;F=P}return n===void 0&&(n=new a),n.set(l+S*F,c+w*F,F)};o.exports=x}),3073:((o,E,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36100),x=e(23031),u=e(25836),r=new x,h=new u,n=function(l,c,s,d){s===void 0&&(s=!1),d===void 0&&(d=new u);var m=!1;d.set(),h.set();for(var p=c[c.length-1],g=0;g<c.length;g++){var T=c[g];r.setTo(p.x,p.y,T.x,T.y),p=T,a(l,r,s,h)&&(!m||h.z<d.z)&&(d.copy(h),m=!0)}return m?d:null};o.exports=n}),56362:((o,E,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),x=e(61369),u=e(3073),r=new a,h=function(n,l,c,s){s===void 0&&(s=new x),Array.isArray(l)||(l=[l]);var d=!1;s.set(),r.set();for(var m=0;m<l.length;m++)u(n,l[m].points,c,r)&&(!d||r.z<s.z)&&(s.set(r.x,r.y,r.z,m),d=!0);return d?s:null};o.exports=h}),60646:((o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(76112),u=e(92773),r=function(h,n,l){if(l===void 0&&(l=[]),u(h,n))for(var c=n.getLineA(),s=n.getLineB(),d=n.getLineC(),m=n.getLineD(),p=[new a,new a,new a,new a],g=[x(c,h,p[0]),x(s,h,p[1]),x(d,h,p[2]),x(m,h,p[3])],T=0;T<4;T++)g[T]&&l.push(p[T]);return l};o.exports=r}),71147:((o,E,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61369),x=e(56362),u=e(23031),r=new u;function h(c,s,d,m,p){var g=Math.cos(c),T=Math.sin(c);r.setTo(s,d,s+g,d+T);var S=x(r,m,!0);S&&p.push(new a(S.x,S.y,c,S.w))}function n(c,s){return c.z-s.z}var l=function(c,s,d){Array.isArray(d)||(d=[d]);for(var m=[],p=[],g=0;g<d.length;g++)for(var T=d[g].points,S=0;S<T.length;S++){var w=Math.atan2(T[S].y-s,T[S].x-c);p.indexOf(w)===-1&&(h(w,c,s,d,m),h(w-1e-5,c,s,d,m),h(w+1e-5,c,s,d,m),p.push(w))}return m.sort(n)};o.exports=l}),68389:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(59996),u=function(r,h,n){return n===void 0&&(n=new a),x(r,h)&&(n.x=Math.max(r.x,h.x),n.y=Math.max(r.y,h.y),n.width=Math.min(r.right,h.right)-n.x,n.height=Math.min(r.bottom,h.bottom)-n.y),n};o.exports=u}),52784:((o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60646),x=e(59996),u=function(r,h,n){if(n===void 0&&(n=[]),x(r,h)){var l=r.getLineA(),c=r.getLineB(),s=r.getLineC(),d=r.getLineD();a(l,h,n),a(c,h,n),a(s,h,n),a(d,h,n)}return n};o.exports=u}),26341:((o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89265),x=e(60646),u=function(r,h,n){if(n===void 0&&(n=[]),a(r,h)){var l=h.getLineA(),c=h.getLineB(),s=h.getLineC();x(l,r,n),x(c,r,n),x(s,r,n)}return n};o.exports=u}),38720:((o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4042),x=e(67636),u=function(r,h,n){if(n===void 0&&(n=[]),x(r,h)){var l=r.getLineA(),c=r.getLineB(),s=r.getLineC();a(l,h,n),a(c,h,n),a(s,h,n)}return n};o.exports=u}),13882:((o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(2822),u=e(76112),r=function(h,n,l){if(l===void 0&&(l=[]),x(h,n))for(var c=h.getLineA(),s=h.getLineB(),d=h.getLineC(),m=[new a,new a,new a],p=[u(c,n,m[0]),u(s,n,m[1]),u(d,n,m[2])],g=0;g<3;g++)p[g]&&l.push(m[g]);return l};o.exports=r}),75636:((o,E,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82944),x=e(13882),u=function(r,h,n){if(n===void 0&&(n=[]),a(r,h)){var l=h.getLineA(),c=h.getLineB(),s=h.getLineC();x(r,l,n),x(r,c,n),x(r,s,n)}return n};o.exports=u}),80462:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),x=e(2141),u=new x,r=function(h,n,l){if(l===void 0&&(l=u),a(n,h.x1,h.y1))return l.x=h.x1,l.y=h.y1,!0;if(a(n,h.x2,h.y2))return l.x=h.x2,l.y=h.y2,!0;var c=h.x2-h.x1,s=h.y2-h.y1,d=n.x-h.x1,m=n.y-h.y1,p=c*c+s*s,g=c,T=s;if(p>0){var S=(d*c+m*s)/p;g*=S,T*=S}l.x=h.x1+g,l.y=h.y1+T;var w=g*g+T*T;return w<=p&&g*c+T*s>=0&&a(n,l.x,l.y)};o.exports=r}),76112:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=e.x1,r=e.y1,h=e.x2,n=e.y2,l=a.x1,c=a.y1,s=a.x2,d=a.y2;if(u===h&&r===n||l===s&&c===d)return!1;var m=(d-c)*(h-u)-(s-l)*(n-r);if(m===0)return!1;var p=((s-l)*(r-c)-(d-c)*(u-l))/m,g=((h-u)*(r-c)-(n-r)*(u-l))/m;return p<0||p>1||g<0||g>1?!1:(x&&(x.x=u+p*(h-u),x.y=r+p*(n-r)),!0)};o.exports=E}),92773:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x1,u=e.y1,r=e.x2,h=e.y2,n=a.x,l=a.y,c=a.right,s=a.bottom,d=0;if(x>=n&&x<=c&&u>=l&&u<=s||r>=n&&r<=c&&h>=l&&h<=s)return!0;if(x<n&&r>=n){if(d=u+(h-u)*(n-x)/(r-x),d>l&&d<=s)return!0}else if(x>c&&r<=c&&(d=u+(h-u)*(c-x)/(r-x),d>=l&&d<=s))return!0;if(u<l&&h>=l){if(d=x+(r-x)*(l-u)/(h-u),d>=n&&d<=c)return!0}else if(u>s&&h<=s&&(d=x+(r-x)*(s-u)/(h-u),d>=n&&d<=c))return!0;return!1};o.exports=E}),16204:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){x===void 0&&(x=1);var u=a.x1,r=a.y1,h=a.x2,n=a.y2,l=e.x,c=e.y,s=(h-u)*(h-u)+(n-r)*(n-r);if(s===0)return!1;var d=((l-u)*(h-u)+(c-r)*(n-r))/s;if(d<0)return Math.sqrt((u-l)*(u-l)+(r-c)*(r-c))<=x;if(d>=0&&d<=1){var m=((r-c)*(h-u)-(u-l)*(n-r))/s;return Math.abs(m)*Math.sqrt(s)<=x}else return Math.sqrt((h-l)*(h-l)+(n-c)*(n-c))<=x};o.exports=E}),14199:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16204),x=function(u,r){if(!a(u,r))return!1;var h=Math.min(r.x1,r.x2),n=Math.max(r.x1,r.x2),l=Math.min(r.y1,r.y2),c=Math.max(r.y1,r.y2);return u.x>=h&&u.x<=n&&u.y>=l&&u.y<=c};o.exports=x}),59996:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.width<=0||e.height<=0||a.width<=0||a.height<=0?!1:!(e.right<a.x||e.bottom<a.y||e.x>a.right||e.y>a.bottom)};o.exports=E}),89265:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76112),x=e(37303),u=e(48653),r=e(77493),h=function(n,l){if(l.left>n.right||l.right<n.left||l.top>n.bottom||l.bottom<n.top)return!1;var c=l.getLineA(),s=l.getLineB(),d=l.getLineC();if(x(n,c.x1,c.y1)||x(n,c.x2,c.y2)||x(n,s.x1,s.y1)||x(n,s.x2,s.y2)||x(n,d.x1,d.y1)||x(n,d.x2,d.y2))return!0;var m=n.getLineA(),p=n.getLineB(),g=n.getLineC(),T=n.getLineD();if(a(c,m)||a(c,p)||a(c,g)||a(c,T)||a(s,m)||a(s,p)||a(s,g)||a(s,T)||a(d,m)||a(d,p)||a(d,g)||a(d,T))return!0;var S=r(n),w=u(l,S,!0);return w.length>0};o.exports=h}),84411:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r,h){return h===void 0&&(h=0),!(a>e.right+h||x<e.left-h||u>e.bottom+h||r<e.top-h)};o.exports=E}),67636:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80462),x=e(10690),u=function(r,h){return r.left>h.right||r.right<h.left||r.top>h.bottom||r.bottom<h.top?!1:!!(x(r,h.x,h.y)||a(r.getLineA(),h)||a(r.getLineB(),h)||a(r.getLineC(),h))};o.exports=u}),2822:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76112),x=function(u,r){return!!(u.contains(r.x1,r.y1)||u.contains(r.x2,r.y2)||a(u.getLineA(),r)||a(u.getLineB(),r)||a(u.getLineC(),r))};o.exports=x}),82944:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(48653),x=e(71694),u=e(76112),r=function(h,n){if(h.left>n.right||h.right<n.left||h.top>n.bottom||h.bottom<n.top)return!1;var l=h.getLineA(),c=h.getLineB(),s=h.getLineC(),d=n.getLineA(),m=n.getLineB(),p=n.getLineC();if(u(l,d)||u(l,m)||u(l,p)||u(c,d)||u(c,m)||u(c,p)||u(s,d)||u(s,m)||u(s,p))return!0;var g=x(h),T=a(n,g,!0);return T.length>0||(g=x(n),T=a(h,g,!0),T.length>0)};o.exports=r}),91865:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CircleToCircle:e(2044),CircleToRectangle:e(81491),GetCircleToCircle:e(63376),GetCircleToRectangle:e(97439),GetLineToCircle:e(4042),GetLineToLine:e(36100),GetLineToPoints:e(3073),GetLineToPolygon:e(56362),GetLineToRectangle:e(60646),GetRaysFromPointToPolygon:e(71147),GetRectangleIntersection:e(68389),GetRectangleToRectangle:e(52784),GetRectangleToTriangle:e(26341),GetTriangleToCircle:e(38720),GetTriangleToLine:e(13882),GetTriangleToTriangle:e(75636),LineToCircle:e(80462),LineToLine:e(76112),LineToRectangle:e(92773),PointToLine:e(16204),PointToLineSegment:e(14199),RectangleToRectangle:e(59996),RectangleToTriangle:e(89265),RectangleToValues:e(84411),TriangleToCircle:e(67636),TriangleToLine:e(2822),TriangleToTriangle:e(82944)}}),91938:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};o.exports=E}),84993:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=1),x===void 0&&(x=[]);var u=Math.round(e.x1),r=Math.round(e.y1),h=Math.round(e.x2),n=Math.round(e.y2),l=Math.abs(h-u),c=Math.abs(n-r),s=u<h?1:-1,d=r<n?1:-1,m=l-c;x.push({x:u,y:r});for(var p=1;!(u===h&&r===n);){var g=m<<1;g>-c&&(m-=c,u+=s),g<l&&(m+=l,r+=d),p%a===0&&x.push({x:u,y:r}),p++}return x};o.exports=E}),36469:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=a-(e.x1+e.x2)/2,r=x-(e.y1+e.y2)/2;return e.x1+=u,e.y1+=r,e.x2+=u,e.y2+=r,e};o.exports=E}),31116:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23031),x=function(u){return new a(u.x1,u.y1,u.x2,u.y2)};o.exports=x}),59944:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2)};o.exports=E}),59220:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2};o.exports=E}),78177:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=function(u,r,h){h===void 0&&(h=r);var n=a(u),l=u.x2-u.x1,c=u.y2-u.y1;return r&&(u.x1=u.x1-l/n*r,u.y1=u.y1-c/n*r),h&&(u.x2=u.x2+l/n*h,u.y2=u.y2+c/n*h),u};o.exports=x}),26708:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(52816),x=e(6113),u=e(2141),r=function(h,n,l,c,s){c===void 0&&(c=0),s===void 0&&(s=[]);var d=[],m=h.x1,p=h.y1,g=h.x2-m,T=h.y2-p,S=x(n,s),w,A,M=l-1;for(w=0;w<M;w++)A=S(w/M),d.push(new u(m+g*A,p+T*A));if(A=S(1),d.push(new u(m+g*A,p+T*A)),c>0){var R=d[0],P=[R];for(w=1;w<d.length-1;w++){var b=d[w];a(R,b)>=c&&(P.push(b),R=b)}var F=d[d.length-1];return a(R,F)<c&&P.pop(),P.push(F),P}else return d};o.exports=r}),32125:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){return r===void 0&&(r=new a),r.x=(u.x1+u.x2)/2,r.y=(u.y1+u.y2)/2,r};o.exports=x}),99569:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r,h){h===void 0&&(h=new a);var n=u.x1,l=u.y1,c=u.x2,s=u.y2,d=(c-n)*(c-n)+(s-l)*(s-l);if(d===0)return h;var m=((r.x-n)*(c-n)+(r.y-l)*(s-l))/d;return h.x=n+m*(c-n),h.y=l+m*(s-l),h};o.exports=x}),34638:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(91938),u=e(2141),r=function(h,n){n===void 0&&(n=new u);var l=x(h)-a.TAU;return n.x=Math.cos(l),n.y=Math.sin(l),n};o.exports=r}),13151:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r,h){return h===void 0&&(h=new a),h.x=u.x1+(u.x2-u.x1)*r,h.y=u.y1+(u.y2-u.y1)*r,h};o.exports=x}),15258:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=e(2141),u=function(r,h,n,l){l===void 0&&(l=[]),!h&&n>0&&(h=a(r)/n);for(var c=r.x1,s=r.y1,d=r.x2,m=r.y2,p=0;p<h;p++){var g=p/h,T=c+(d-c)*g,S=s+(m-s)*g;l.push(new x(T,S))}return l};o.exports=u}),26408:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x1,u=e.y1,r=e.x2,h=e.y2,n=(r-x)*(r-x)+(h-u)*(h-u);if(n===0)return!1;var l=((u-a.y)*(r-x)-(x-a.x)*(h-u))/n;return Math.abs(l)*Math.sqrt(n)};o.exports=E}),98770:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.abs(e.y1-e.y2)};o.exports=E}),35001:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};o.exports=E}),23031:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(13151),u=e(15258),r=e(23777),h=e(65822),n=e(26099),l=new a({initialize:function(s,d,m,p){s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=0),p===void 0&&(p=0),this.type=r.LINE,this.x1=s,this.y1=d,this.x2=m,this.y2=p},getPoint:function(c,s){return x(this,c,s)},getPoints:function(c,s,d){return u(this,c,s,d)},getRandomPoint:function(c){return h(this,c)},setTo:function(c,s,d,m){return c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=0),this.x1=c,this.y1=s,this.x2=d,this.y2=m,this},setFromObjects:function(c,s){return this.x1=c.x,this.y1=c.y,this.x2=s.x,this.y2=s.y,this},getPointA:function(c){return c===void 0&&(c=new n),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new n),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});o.exports=l}),64795:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(15994),u=e(91938),r=function(h){var n=u(h)-a.TAU;return x(n,-Math.PI,Math.PI)};o.exports=r}),52616:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(91938),u=function(r){return Math.cos(x(r)-a.TAU)};o.exports=u}),87231:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(91938),u=function(r){return Math.sin(x(r)-a.TAU)};o.exports=u}),89662:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x1+=a,e.y1+=x,e.x2+=a,e.y2+=x,e};o.exports=E}),71165:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};o.exports=E}),65822:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){r===void 0&&(r=new a);var h=Math.random();return r.x=u.x1+h*(u.x2-u.x1),r.y=u.y1+h*(u.y2-u.y1),r};o.exports=x}),69777:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91938),x=e(64795),u=function(r,h){return 2*x(h)-Math.PI-a(r)};o.exports=u}),39706:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64400),x=function(u,r){var h=(u.x1+u.x2)/2,n=(u.y1+u.y2)/2;return a(u,h,n,r)};o.exports=x}),82585:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64400),x=function(u,r,h){return a(u,r.x,r.y,h)};o.exports=x}),64400:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=Math.cos(u),h=Math.sin(u),n=e.x1-a,l=e.y1-x;return e.x1=n*r-l*h+a,e.y1=n*h+l*r+x,n=e.x2-a,l=e.y2-x,e.x2=n*r-l*h+a,e.y2=n*h+l*r+x,e};o.exports=E}),62377:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r){return e.x1=a,e.y1=x,e.x2=a+Math.cos(u)*r,e.y2=x+Math.sin(u)*r,e};o.exports=E}),71366:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};o.exports=E}),10809:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.abs(e.x1-e.x2)};o.exports=E}),2529:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23031);a.Angle=e(91938),a.BresenhamPoints=e(84993),a.CenterOn=e(36469),a.Clone=e(31116),a.CopyFrom=e(59944),a.Equals=e(59220),a.Extend=e(78177),a.GetEasedPoints=e(26708),a.GetMidPoint=e(32125),a.GetNearestPoint=e(99569),a.GetNormal=e(34638),a.GetPoint=e(13151),a.GetPoints=e(15258),a.GetShortestDistance=e(26408),a.Height=e(98770),a.Length=e(35001),a.NormalAngle=e(64795),a.NormalX=e(52616),a.NormalY=e(87231),a.Offset=e(89662),a.PerpSlope=e(71165),a.Random=e(65822),a.ReflectAngle=e(69777),a.Rotate=e(39706),a.RotateAroundPoint=e(82585),a.RotateAroundXY=e(64400),a.SetToAngle=e(62377),a.Slope=e(71366),a.Width=e(10809),o.exports=a}),83997:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(87841),u=e(26099);function r(n,l,c,s){var d=n-c,m=l-s,p=d*d+m*m;return Math.sqrt(p)}var h=new a({initialize:function(l,c,s){this.vertex1=l,this.vertex2=c,this.vertex3=s,this.bounds=new x,this._inCenter=new u},getInCenter:function(n){n===void 0&&(n=!0);var l=this.vertex1,c=this.vertex2,s=this.vertex3,d,m,p,g,T,S;n?(d=l.x,m=l.y,p=c.x,g=c.y,T=s.x,S=s.y):(d=l.vx,m=l.vy,p=c.vx,g=c.vy,T=s.vx,S=s.vy);var w=r(T,S,p,g),A=r(d,m,T,S),M=r(p,g,d,m),R=w+A+M;return this._inCenter.set((d*w+p*A+T*M)/R,(m*w+g*A+S*M)/R)},contains:function(n,l,c){var s=this.vertex1,d=this.vertex2,m=this.vertex3,p=s.vx,g=s.vy,T=d.vx,S=d.vy,w=m.vx,A=m.vy;if(c){var M=c.a,R=c.b,P=c.c,b=c.d,F=c.e,I=c.f;p=s.vx*M+s.vy*P+F,g=s.vx*R+s.vy*b+I,T=d.vx*M+d.vy*P+F,S=d.vx*R+d.vy*b+I,w=m.vx*M+m.vy*P+F,A=m.vx*R+m.vy*b+I}var L=w-p,D=A-g,O=T-p,z=S-g,W=n-p,X=l-g,_=L*L+D*D,U=L*O+D*z,G=L*W+D*X,N=O*O+z*z,H=O*W+z*X,V=_*N-U*U,$=V===0?0:1/V,j=(N*G-U*H)*$,k=(_*H-U*G)*$;return j>=0&&k>=0&&j+k<1},isCounterClockwise:function(n){var l=this.vertex1,c=this.vertex2,s=this.vertex3,d=(c.vx-l.vx)*(s.vy-l.vy)-(c.vy-l.vy)*(s.vx-l.vx);return n<=0?d>=0:d<0},load:function(n,l,c,s,d){return c=this.vertex1.load(n,l,c,s,d),c=this.vertex2.load(n,l,c,s,d),c=this.vertex3.load(n,l,c,s,d),c},transformCoordinatesLocal:function(n,l,c,s){return this.vertex1.transformCoordinatesLocal(n,l,c,s),this.vertex2.transformCoordinatesLocal(n,l,c,s),this.vertex3.transformCoordinatesLocal(n,l,c,s),this},updateBounds:function(){var n=this.vertex1,l=this.vertex2,c=this.vertex3,s=this.bounds;return s.x=Math.min(n.vx,l.vx,c.vx),s.y=Math.min(n.vy,l.vy,c.vy),s.width=Math.max(n.vx,l.vx,c.vx)-s.x,s.height=Math.max(n.vy,l.vy,c.vy)-s.y,this},isInView:function(n,l,c,s,d,m,p,g,T,S,w){this.update(s,d,m,p,g,T,S,w);var A=this.vertex1,M=this.vertex2,R=this.vertex3;if(A.ta<=0&&M.ta<=0&&R.ta<=0||l&&!this.isCounterClockwise(c))return!1;var P=this.bounds;P.x=Math.min(A.tx,M.tx,R.tx),P.y=Math.min(A.ty,M.ty,R.ty),P.width=Math.max(A.tx,M.tx,R.tx)-P.x,P.height=Math.max(A.ty,M.ty,R.ty)-P.y;var b=n.x+n.width,F=n.y+n.height;return P.width<=0||P.height<=0||n.width<=0||n.height<=0?!1:!(P.right<n.x||P.bottom<n.y||P.x>b||P.y>F)},scrollUV:function(n,l){return this.vertex1.scrollUV(n,l),this.vertex2.scrollUV(n,l),this.vertex3.scrollUV(n,l),this},scaleUV:function(n,l){return this.vertex1.scaleUV(n,l),this.vertex2.scaleUV(n,l),this.vertex3.scaleUV(n,l),this},setColor:function(n){return this.vertex1.color=n,this.vertex2.color=n,this.vertex3.color=n,this},update:function(n,l,c,s,d,m,p,g){return this.vertex1.update(l,c,s,d,m,p,g,n),this.vertex2.update(l,c,s,d,m,p,g,n),this.vertex3.update(l,c,s,d,m,p,g,n),this},translate:function(n,l){l===void 0&&(l=0);var c=this.vertex1,s=this.vertex2,d=this.vertex3;return c.x+=n,c.y+=l,s.x+=n,s.y+=l,d.x+=n,d.y+=l,this},x:{get:function(){return this.getInCenter().x},set:function(n){var l=this.getInCenter();this.translate(n-l.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(n){var l=this.getInCenter();this.translate(0,n-l.y)}},alpha:{get:function(){var n=this.vertex1,l=this.vertex2,c=this.vertex3;return(n.alpha+l.alpha+c.alpha)/3},set:function(n){this.vertex1.alpha=n,this.vertex2.alpha=n,this.vertex3.alpha=n}},depth:{get:function(){var n=this.vertex1,l=this.vertex2,c=this.vertex3;return(n.vz+l.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});o.exports=h}),48803:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),x=e(95540),u=e(37867),r=e(25836),h=e(39318),n=new r,l=new r,c=new u,s=function(d){var m=x(d,"mesh"),p=x(d,"texture",null),g=x(d,"frame"),T=x(d,"width",1),S=x(d,"height",T),w=x(d,"widthSegments",1),A=x(d,"heightSegments",w),M=x(d,"x",0),R=x(d,"y",0),P=x(d,"z",0),b=x(d,"rotateX",0),F=x(d,"rotateY",0),I=x(d,"rotateZ",0),L=x(d,"zIsUp",!0),D=x(d,"isOrtho",m?m.dirtyCache[11]:!1),O=x(d,"colors",[16777215]),z=x(d,"alphas",[1]),W=x(d,"tile",!1),X=x(d,"flipY",!1),_=x(d,"width",null),U={faces:[],verts:[]};n.set(M,R,P),l.set(b,F,I),c.fromRotationXYTranslation(l,n,L);var G;if(!p&&m)p=m.texture,g||(G=m.frame);else if(m&&typeof p=="string")p=m.scene.sys.textures.get(p);else if(!p)return U;G||(G=p.get(g)),!_&&D&&p&&m&&(T=G.width/m.height,S=G.height/m.height);var N=T/2,H=S/2,V=Math.floor(w),$=Math.floor(A),j=V+1,k=$+1,Q=T/V,et=S/$,at=[],q=[],ft,vt,Tt=0,ct=1,Nt=0,yt=1;G&&(Tt=G.u0,ct=G.u1,X?(Nt=G.v1,yt=G.v0):(Nt=G.v0,yt=G.v1));var it=ct-Tt,Z=yt-Nt;for(vt=0;vt<k;vt++){var lt=vt*et-H;for(ft=0;ft<j;ft++){var pt=ft*Q-N;q.push(pt,-lt);var Rt=Tt+it*(ft/V),At=Nt+Z*(vt/$);at.push(Rt,At)}}Array.isArray(O)||(O=[O]),Array.isArray(z)||(z=[z]);var Kt=0,Bt=0;for(vt=0;vt<$;vt++)for(ft=0;ft<V;ft++){var Wt=(ft+j*vt)*2,he=(ft+j*(vt+1))*2,zt=(ft+1+j*(vt+1))*2,Ut=(ft+1+j*vt)*2,Xt=O[Bt],Pt=z[Kt],$t=new h(q[Wt],q[Wt+1],0,at[Wt],at[Wt+1],Xt,Pt).transformMat4(c),pe=new h(q[he],q[he+1],0,at[he],at[he+1],Xt,Pt).transformMat4(c),fe=new h(q[Ut],q[Ut+1],0,at[Ut],at[Ut+1],Xt,Pt).transformMat4(c),Fe=new h(q[he],q[he+1],0,at[he],at[he+1],Xt,Pt).transformMat4(c),dt=new h(q[zt],q[zt+1],0,at[zt],at[zt+1],Xt,Pt).transformMat4(c),Zt=new h(q[Ut],q[Ut+1],0,at[Ut],at[Ut+1],Xt,Pt).transformMat4(c);W&&($t.setUVs(Tt,yt),pe.setUVs(Tt,Nt),fe.setUVs(ct,yt),Fe.setUVs(Tt,Nt),dt.setUVs(ct,Nt),Zt.setUVs(ct,yt)),Bt++,Bt===O.length&&(Bt=0),Kt++,Kt===z.length&&(Kt=0),U.verts.push($t,pe,fe,Fe,dt,Zt),U.faces.push(new a($t,pe,fe),new a(Fe,dt,Zt))}return m&&(m.faces=m.faces.concat(U.faces),m.vertices=m.vertices.concat(U.verts)),U};o.exports=s}),34684:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),x=e(37867),u=e(25836),r=e(39318),h=new u,n=new u,l=new x,c=function(s,d,m,p,g,T,S,w,A,M){m===void 0&&(m=1),p===void 0&&(p=0),g===void 0&&(g=0),T===void 0&&(T=0),S===void 0&&(S=0),w===void 0&&(w=0),A===void 0&&(A=0),M===void 0&&(M=!0);var R={faces:[],verts:[]},P=s.materials;h.set(p,g,T),n.set(S,w,A),l.fromRotationXYTranslation(n,h,M);for(var b=0;b<s.models.length;b++)for(var F=s.models[b],I=F.vertices,L=F.textureCoords,D=F.faces,O=0;O<D.length;O++){var z=D[O],W=z.vertices[0],X=z.vertices[1],_=z.vertices[2],U=I[W.vertexIndex],G=I[X.vertexIndex],N=I[_.vertexIndex],H=W.textureCoordsIndex,V=X.textureCoordsIndex,$=_.textureCoordsIndex,j=H===-1?{u:0,v:1}:L[H],k=V===-1?{u:0,v:0}:L[V],Q=$===-1?{u:1,v:1}:L[$],et=16777215;z.material!==""&&P[z.material]&&(et=P[z.material]);var at=new r(U.x*m,U.y*m,U.z*m,j.u,j.v,et).transformMat4(l),q=new r(G.x*m,G.y*m,G.z*m,k.u,k.v,et).transformMat4(l),ft=new r(N.x*m,N.y*m,N.z*m,Q.u,Q.v,et).transformMat4(l);R.verts.push(at,q,ft),R.faces.push(new a(at,q,ft))}return d&&(d.faces=d.faces.concat(R.faces),d.vertices=d.vertices.concat(R.verts)),R};o.exports=c}),92515:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),x=e(39318),u=function(r,h,n,l,c,s,d,m){if(l===void 0&&(l=!1),s===void 0&&(s=16777215),d===void 0&&(d=1),m===void 0&&(m=!1),r.length!==h.length&&!l){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,T,S,w,A,M,R,P,b,F,I,L=l?3:2,D=Array.isArray(s),O=Array.isArray(d);if(Array.isArray(n)&&n.length>0)for(g=0;g<n.length;g++){var z=n[g],W=n[g]*2,X=n[g]*L;T=r[X],S=r[X+1],w=l?r[X+2]:0,A=h[W],M=h[W+1],m&&(M=1-M),R=D?s[z]:s,P=O?d[z]:d,b=0,F=0,I=0,c&&(b=c[X],F=c[X+1],I=l?c[X+2]:0),p.vertices.push(new x(T,S,w,A,M,R,P,b,F,I))}else{var _=0,U=0;for(g=0;g<r.length;g+=L)T=r[g],S=r[g+1],w=l?r[g+2]:0,A=h[_],M=h[_+1],R=D?s[U]:s,P=O?d[U]:d,b=0,F=0,I=0,c&&(b=c[g],F=c[g+1],I=l?c[g+2]:0),p.vertices.push(new x(T,S,w,A,M,R,P,b,F,I)),_+=2,U++}for(g=0;g<p.vertices.length;g+=3){var G=p.vertices[g],N=p.vertices[g+1],H=p.vertices[g+2];p.faces.push(new a(G,N,H))}return p};o.exports=u}),85048:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=!0,e="untitled",a="",x="";function u(T){var S=T.indexOf("#");return S>-1?T.substring(0,S):T}function r(T){return T.models.length===0&&T.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),a="",T.models[T.models.length-1]}function h(T,S){var w=T.length>=2?T[1]:e;S.models.push({faces:[],name:w,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function n(T){T.length===2&&(a=T[1])}function l(T,S){var w=T.length,A=w>=2?parseFloat(T[1]):0,M=w>=3?parseFloat(T[2]):0,R=w>=4?parseFloat(T[3]):0;r(S).vertices.push({x:A,y:M,z:R})}function c(T,S){var w=T.length,A=w>=2?parseFloat(T[1]):0,M=w>=3?parseFloat(T[2]):0,R=w>=4?parseFloat(T[3]):0;isNaN(A)&&(A=0),isNaN(M)&&(M=0),isNaN(R)&&(R=0),E&&(M=1-M),r(S).textureCoords.push({u:A,v:M,w:R})}function s(T,S){var w=T.length,A=w>=2?parseFloat(T[1]):0,M=w>=3?parseFloat(T[2]):0,R=w>=4?parseFloat(T[3]):0;r(S).vertexNormals.push({x:A,y:M,z:R})}function d(T,S){var w=T.length-1;if(!(w<3)){for(var A={group:a,material:x,vertices:[]},M=0;M<w;M++){var R=T[M+1],P=R.split("/"),b=P.length;if(!(b<1||b>3)){var F=0,I=0,L=0;F=parseInt(P[0],10),b>1&&P[1]!==""&&(I=parseInt(P[1],10)),b>2&&(L=parseInt(P[2],10)),F!==0&&(F<0&&(F=r(S).vertices.length+1+F),I-=1,F-=1,L-=1,A.vertices.push({textureCoordsIndex:I,vertexIndex:F,vertexNormalIndex:L}))}}r(S).faces.push(A)}}function m(T,S){T.length>=2&&S.materialLibraries.push(T[1])}function p(T){T.length>=2&&(x=T[1])}var g=function(T,S){S===void 0&&(S=!0),E=S;var w={materials:{},materialLibraries:[],models:[]};a="",x="";for(var A=T.split(`
`),M=0;M<A.length;M++){var R=u(A[M]),P=R.replace(/\s\s+/g," ").trim().split(" ");switch(P[0].toLowerCase()){case"o":h(P,w);break;case"g":n(P);break;case"v":l(P,w);break;case"vt":c(P,w);break;case"vn":s(P,w);break;case"f":d(P,w);break;case"mtllib":m(P,w);break;case"usemtl":p(P);break}}return w};o.exports=g}),61485:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589),x=function(u){for(var r={},h=u.split(`
`),n="",l=0;l<h.length;l++){var c=h[l].trim();if(!(c.indexOf("#")===0||c==="")){var s=c.replace(/\s\s+/g," ").trim().split(" ");switch(s[0].toLowerCase()){case"newmtl":{n=s[1];break}case"kd":{var d=Math.floor(s[1]*255),m=s.length>=2?Math.floor(s[2]*255):d,p=s.length>=3?Math.floor(s[3]*255):d;r[n]=a(d,m,p);break}}}}return r};o.exports=x}),92570:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r,h;if(x===void 0&&u===void 0){var n=e.getInCenter();r=n.x,h=n.y}var l=Math.cos(a),c=Math.sin(a),s=e.vertex1,d=e.vertex2,m=e.vertex3,p=s.x-r,g=s.y-h;s.set(p*l-g*c+r,p*c+g*l+h),p=d.x-r,g=d.y-h,d.set(p*l-g*c+r,p*c+g*l+h),p=m.x-r,g=m.y-h,m.set(p*l-g*c+r,p*c+g*l+h)};o.exports=E}),39318:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(70554),u=e(25836),r=new a({Extends:u,initialize:function(n,l,c,s,d,m,p,g,T,S){m===void 0&&(m=16777215),p===void 0&&(p=1),g===void 0&&(g=0),T===void 0&&(T=0),S===void 0&&(S=0),u.call(this,n,l,c),this.vx=0,this.vy=0,this.vz=0,this.nx=g,this.ny=T,this.nz=S,this.u=s,this.v=d,this.color=m,this.alpha=p,this.tx=0,this.ty=0,this.ta=0,this.tu=s,this.tv=d},setUVs:function(h,n){return this.u=h,this.v=n,this.tu=h,this.tv=n,this},scrollUV:function(h,n){return this.tu+=h,this.tv+=n,this},scaleUV:function(h,n){return this.tu=this.u*h,this.tv=this.v*n,this},transformCoordinatesLocal:function(h,n,l,c){var s=this.x,d=this.y,m=this.z,p=h.val,g=s*p[0]+d*p[4]+m*p[8]+p[12],T=s*p[1]+d*p[5]+m*p[9]+p[13],S=s*p[2]+d*p[6]+m*p[10]+p[14],w=s*p[3]+d*p[7]+m*p[11]+p[15];this.vx=g/w*n,this.vy=-(T/w)*l,c<=0?this.vz=S/w:this.vz=-(S/w)},resize:function(h,n,l,c,s,d){return this.x=h,this.y=n,this.vx=this.x*l,this.vy=-this.y*c,this.vz=0,s<.5?this.vx+=l*(.5-s):s>.5&&(this.vx-=l*(s-.5)),d<.5?this.vy+=c*(.5-d):d>.5&&(this.vy-=c*(d-.5)),this},update:function(h,n,l,c,s,d,m,p){var g=this.vx*h+this.vy*l+s,T=this.vx*n+this.vy*c+d;return m&&(g=Math.round(g),T=Math.round(T)),this.tx=g,this.ty=T,this.ta=this.alpha*p,this},load:function(h,n,l,c,s){return h[++l]=this.tx,h[++l]=this.ty,h[++l]=this.tu,h[++l]=this.tv,h[++l]=c,h[++l]=s,n[++l]=x.getTintAppendFloatAlpha(this.color,this.ta),l}});o.exports=r}),73090:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Face:e(83997),GenerateGridVerts:e(48803),GenerateObjVerts:e(34684),GenerateVerts:e(92515),ParseObj:e(85048),ParseObjMaterial:e(61485),RotateFace:e(92570),Vertex:e(39318)};o.exports=a}),96550:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};o.exports=E}),99706:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u){return new a(u.x,u.y)};o.exports=x}),68010:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x,e.y)};o.exports=E}),27814:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x===a.x&&e.y===a.y};o.exports=E}),73565:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};o.exports=E}),87555:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){if(r===void 0&&(r=new a),!Array.isArray(u))throw new Error("GetCentroid points argument must be an array");var h=u.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)r.x=u[0].x,r.y=u[0].y;else{for(var n=0;n<h;n++)r.x+=u[n].x,r.y+=u[n].y;r.x/=h,r.y/=h}return r};o.exports=x}),28793:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};o.exports=E}),44405:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x*e.x+e.y*e.y};o.exports=E}),20873:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(u,r){r===void 0&&(r=new a);for(var h=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,s=0;s<u.length;s++){var d=u[s];d.x>h&&(h=d.x),d.x<n&&(n=d.x),d.y>l&&(l=d.y),d.y<c&&(c=d.y)}return r.x=n,r.y=c,r.width=h-n,r.height=l-c,r};o.exports=x}),26152:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r,h,n){return h===void 0&&(h=0),n===void 0&&(n=new a),n.x=u.x+(r.x-u.x)*h,n.y=u.y+(r.y-u.y)*h,n};o.exports=x}),55767:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.setTo(e.y,e.x)};o.exports=E}),79432:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){return r===void 0&&(r=new a),r.setTo(-u.x,-u.y)};o.exports=x}),2141:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23777),u=new a({initialize:function(h,n){h===void 0&&(h=0),n===void 0&&(n=h),this.type=x.POINT,this.x=h,this.y=n},setTo:function(r,h){return r===void 0&&(r=0),h===void 0&&(h=r),this.x=r,this.y=h,this}});o.exports=u}),72930:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(44405),u=function(r,h,n){n===void 0&&(n=new a);var l=r.x*h.x+r.y*h.y,c=l/x(h);return c!==0&&(n.x=c*h.x,n.y=c*h.y),n};o.exports=u}),62880:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r,h){h===void 0&&(h=new a);var n=u.x*r.x+u.y*r.y;return n!==0&&(h.x=n*r.x,h.y=n*r.y),h};o.exports=x}),15093:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28793),x=function(u,r){if(u.x!==0||u.y!==0){var h=a(u);u.x/=h,u.y/=h}return u.x*=r,u.y*=r,u};o.exports=x}),43711:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141);a.Ceil=e(96550),a.Clone=e(99706),a.CopyFrom=e(68010),a.Equals=e(27814),a.Floor=e(73565),a.GetCentroid=e(87555),a.GetMagnitude=e(28793),a.GetMagnitudeSq=e(44405),a.GetRectangleFromPoints=e(20873),a.Interpolate=e(26152),a.Invert=e(55767),a.Negative=e(79432),a.Project=e(72930),a.ProjectUnit=e(62880),a.SetMagnitude=e(15093),o.exports=a}),12306:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25717),x=function(u){return new a(u.points)};o.exports=x}),63814:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var u=!1,r=-1,h=e.points.length-1;++r<e.points.length;h=r){var n=e.points[r].x,l=e.points[r].y,c=e.points[h].x,s=e.points[h].y;(l<=x&&x<s||s<=x&&x<l)&&a<(c-n)*(x-l)/(s-l)+n&&(u=!u)}return u};o.exports=E}),99338:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63814),x=function(u,r){return a(u,r.x,r.y)};o.exports=x}),94811:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(U,G,N){N=N||2;var H=G&&G.length,V=H?G[0]*N:U.length,$=e(U,0,V,N,!0),j=[];if(!$||$.next===$.prev)return j;var k,Q,et,at,q,ft,vt;if(H&&($=l(U,G,$,N)),U.length>80*N){k=et=U[0],Q=at=U[1];for(var Tt=N;Tt<V;Tt+=N)q=U[Tt],ft=U[Tt+1],q<k&&(k=q),ft<Q&&(Q=ft),q>et&&(et=q),ft>at&&(at=ft);vt=Math.max(et-k,at-Q),vt=vt!==0?32767/vt:0}return x($,j,N,k,Q,vt,0),j}function e(U,G,N,H,V){var $,j;if(V===_(U,G,N,H)>0)for($=G;$<N;$+=H)j=z($,U[$],U[$+1],j);else for($=N-H;$>=G;$-=H)j=z($,U[$],U[$+1],j);return j&&R(j,j.next)&&(W(j),j=j.next),j}function a(U,G){if(!U)return U;G||(G=U);var N=U,H;do if(H=!1,!N.steiner&&(R(N,N.next)||M(N.prev,N,N.next)===0)){if(W(N),N=G=N.prev,N===N.next)break;H=!0}else N=N.next;while(H||N!==G);return G}function x(U,G,N,H,V,$,j){if(U){!j&&$&&p(U,H,V,$);for(var k=U,Q,et;U.prev!==U.next;){if(Q=U.prev,et=U.next,$?r(U,H,V,$):u(U)){G.push(Q.i/N|0),G.push(U.i/N|0),G.push(et.i/N|0),W(U),U=et.next,k=et.next;continue}if(U=et,U===k){j?j===1?(U=h(a(U),G,N),x(U,G,N,H,V,$,2)):j===2&&n(U,G,N,H,V,$):x(a(U),G,N,H,V,$,1);break}}}}function u(U){var G=U.prev,N=U,H=U.next;if(M(G,N,H)>=0)return!1;for(var V=G.x,$=N.x,j=H.x,k=G.y,Q=N.y,et=H.y,at=V<$?V<j?V:j:$<j?$:j,q=k<Q?k<et?k:et:Q<et?Q:et,ft=V>$?V>j?V:j:$>j?$:j,vt=k>Q?k>et?k:et:Q>et?Q:et,Tt=H.next;Tt!==G;){if(Tt.x>=at&&Tt.x<=ft&&Tt.y>=q&&Tt.y<=vt&&w(V,k,$,Q,j,et,Tt.x,Tt.y)&&M(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.next}return!0}function r(U,G,N,H){var V=U.prev,$=U,j=U.next;if(M(V,$,j)>=0)return!1;for(var k=V.x,Q=$.x,et=j.x,at=V.y,q=$.y,ft=j.y,vt=k<Q?k<et?k:et:Q<et?Q:et,Tt=at<q?at<ft?at:ft:q<ft?q:ft,ct=k>Q?k>et?k:et:Q>et?Q:et,Nt=at>q?at>ft?at:ft:q>ft?q:ft,yt=T(vt,Tt,G,N,H),it=T(ct,Nt,G,N,H),Z=U.prevZ,lt=U.nextZ;Z&&Z.z>=yt&&lt&&lt.z<=it;){if(Z.x>=vt&&Z.x<=ct&&Z.y>=Tt&&Z.y<=Nt&&Z!==V&&Z!==j&&w(k,at,Q,q,et,ft,Z.x,Z.y)&&M(Z.prev,Z,Z.next)>=0||(Z=Z.prevZ,lt.x>=vt&&lt.x<=ct&&lt.y>=Tt&&lt.y<=Nt&&lt!==V&&lt!==j&&w(k,at,Q,q,et,ft,lt.x,lt.y)&&M(lt.prev,lt,lt.next)>=0))return!1;lt=lt.nextZ}for(;Z&&Z.z>=yt;){if(Z.x>=vt&&Z.x<=ct&&Z.y>=Tt&&Z.y<=Nt&&Z!==V&&Z!==j&&w(k,at,Q,q,et,ft,Z.x,Z.y)&&M(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;lt&&lt.z<=it;){if(lt.x>=vt&&lt.x<=ct&&lt.y>=Tt&&lt.y<=Nt&&lt!==V&&lt!==j&&w(k,at,Q,q,et,ft,lt.x,lt.y)&&M(lt.prev,lt,lt.next)>=0)return!1;lt=lt.nextZ}return!0}function h(U,G,N){var H=U;do{var V=H.prev,$=H.next.next;!R(V,$)&&P(V,H,H.next,$)&&L(V,$)&&L($,V)&&(G.push(V.i/N|0),G.push(H.i/N|0),G.push($.i/N|0),W(H),W(H.next),H=U=$),H=H.next}while(H!==U);return a(H)}function n(U,G,N,H,V,$){var j=U;do{for(var k=j.next.next;k!==j.prev;){if(j.i!==k.i&&A(j,k)){var Q=O(j,k);j=a(j,j.next),Q=a(Q,Q.next),x(j,G,N,H,V,$,0),x(Q,G,N,H,V,$,0);return}k=k.next}j=j.next}while(j!==U)}function l(U,G,N,H){var V=[],$,j,k,Q,et;for($=0,j=G.length;$<j;$++)k=G[$]*H,Q=$<j-1?G[$+1]*H:U.length,et=e(U,k,Q,H,!1),et===et.next&&(et.steiner=!0),V.push(S(et));for(V.sort(c),$=0;$<V.length;$++)N=s(V[$],N);return N}function c(U,G){return U.x-G.x}function s(U,G){var N=d(U,G);if(!N)return G;var H=O(N,U);return a(H,H.next),a(N,N.next)}function d(U,G){var N=G,H=U.x,V=U.y,$=-1/0,j;do{if(V<=N.y&&V>=N.next.y&&N.next.y!==N.y){var k=N.x+(V-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(k<=H&&k>$&&($=k,j=N.x<N.next.x?N:N.next,k===H))return j}N=N.next}while(N!==G);if(!j)return null;var Q=j,et=j.x,at=j.y,q=1/0,ft;N=j;do H>=N.x&&N.x>=et&&H!==N.x&&w(V<at?H:$,V,et,at,V<at?$:H,V,N.x,N.y)&&(ft=Math.abs(V-N.y)/(H-N.x),L(N,U)&&(ft<q||ft===q&&(N.x>j.x||N.x===j.x&&m(j,N)))&&(j=N,q=ft)),N=N.next;while(N!==Q);return j}function m(U,G){return M(U.prev,U,G.prev)<0&&M(G.next,U,U.next)<0}function p(U,G,N,H){var V=U;do V.z===0&&(V.z=T(V.x,V.y,G,N,H)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==U);V.prevZ.nextZ=null,V.prevZ=null,g(V)}function g(U){var G,N,H,V,$,j,k,Q,et=1;do{for(N=U,U=null,$=null,j=0;N;){for(j++,H=N,k=0,G=0;G<et&&(k++,H=H.nextZ,!!H);G++);for(Q=et;k>0||Q>0&&H;)k!==0&&(Q===0||!H||N.z<=H.z)?(V=N,N=N.nextZ,k--):(V=H,H=H.nextZ,Q--),$?$.nextZ=V:U=V,V.prevZ=$,$=V;N=H}$.nextZ=null,et*=2}while(j>1);return U}function T(U,G,N,H,V){return U=(U-N)*V|0,G=(G-H)*V|0,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,U|G<<1}function S(U){var G=U,N=U;do(G.x<N.x||G.x===N.x&&G.y<N.y)&&(N=G),G=G.next;while(G!==U);return N}function w(U,G,N,H,V,$,j,k){return(V-j)*(G-k)>=(U-j)*($-k)&&(U-j)*(H-k)>=(N-j)*(G-k)&&(N-j)*($-k)>=(V-j)*(H-k)}function A(U,G){return U.next.i!==G.i&&U.prev.i!==G.i&&!I(U,G)&&(L(U,G)&&L(G,U)&&D(U,G)&&(M(U.prev,U,G.prev)||M(U,G.prev,G))||R(U,G)&&M(U.prev,U,U.next)>0&&M(G.prev,G,G.next)>0)}function M(U,G,N){return(G.y-U.y)*(N.x-G.x)-(G.x-U.x)*(N.y-G.y)}function R(U,G){return U.x===G.x&&U.y===G.y}function P(U,G,N,H){var V=F(M(U,G,N)),$=F(M(U,G,H)),j=F(M(N,H,U)),k=F(M(N,H,G));return!!(V!==$&&j!==k||V===0&&b(U,N,G)||$===0&&b(U,H,G)||j===0&&b(N,U,H)||k===0&&b(N,G,H))}function b(U,G,N){return G.x<=Math.max(U.x,N.x)&&G.x>=Math.min(U.x,N.x)&&G.y<=Math.max(U.y,N.y)&&G.y>=Math.min(U.y,N.y)}function F(U){return U>0?1:U<0?-1:0}function I(U,G){var N=U;do{if(N.i!==U.i&&N.next.i!==U.i&&N.i!==G.i&&N.next.i!==G.i&&P(N,N.next,U,G))return!0;N=N.next}while(N!==U);return!1}function L(U,G){return M(U.prev,U,U.next)<0?M(U,G,U.next)>=0&&M(U,U.prev,G)>=0:M(U,G,U.prev)<0||M(U,U.next,G)<0}function D(U,G){var N=U,H=!1,V=(U.x+G.x)/2,$=(U.y+G.y)/2;do N.y>$!=N.next.y>$&&N.next.y!==N.y&&V<(N.next.x-N.x)*($-N.y)/(N.next.y-N.y)+N.x&&(H=!H),N=N.next;while(N!==U);return H}function O(U,G){var N=new X(U.i,U.x,U.y),H=new X(G.i,G.x,G.y),V=U.next,$=G.prev;return U.next=G,G.prev=U,N.next=V,V.prev=N,H.next=N,N.prev=H,$.next=H,H.prev=$,H}function z(U,G,N,H){var V=new X(U,G,N);return H?(V.next=H.next,V.prev=H,H.next.prev=V,H.next=V):(V.prev=V,V.next=V),V}function W(U){U.next.prev=U.prev,U.prev.next=U.next,U.prevZ&&(U.prevZ.nextZ=U.nextZ),U.nextZ&&(U.nextZ.prevZ=U.prevZ)}function X(U,G,N){this.i=U,this.x=G,this.y=N,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}E.deviation=function(U,G,N,H){var V=G&&G.length,$=V?G[0]*N:U.length,j=Math.abs(_(U,0,$,N));if(V)for(var k=0,Q=G.length;k<Q;k++){var et=G[k]*N,at=k<Q-1?G[k+1]*N:U.length;j-=Math.abs(_(U,et,at,N))}var q=0;for(k=0;k<H.length;k+=3){var ft=H[k]*N,vt=H[k+1]*N,Tt=H[k+2]*N;q+=Math.abs((U[ft]-U[Tt])*(U[vt+1]-U[ft+1])-(U[ft]-U[vt])*(U[Tt+1]-U[ft+1]))}return j===0&&q===0?0:Math.abs((q-j)/j)};function _(U,G,N,H){for(var V=0,$=G,j=N-H;$<N;$+=H)V+=(U[j]-U[$])*(U[$+1]+U[j+1]),j=$;return V}E.flatten=function(U){for(var G=U[0][0].length,N={vertices:[],holes:[],dimensions:G},H=0,V=0;V<U.length;V++){for(var $=0;$<U[V].length;$++)for(var j=0;j<G;j++)N.vertices.push(U[V][$][j]);V>0&&(H+=U[V-1].length,N.holes.push(H))}return N},o.exports=E}),13829:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(u,r){r===void 0&&(r=new a);for(var h=1/0,n=1/0,l=-h,c=-n,s,d=0;d<u.points.length;d++)s=u.points[d],h=Math.min(h,s.x),n=Math.min(n,s.y),l=Math.max(l,s.x),c=Math.max(c,s.y);return r.x=h,r.y=n,r.width=l-h,r.height=c-n,r};o.exports=x}),26173:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=[]);for(var x=0;x<e.points.length;x++)a.push(e.points[x].x),a.push(e.points[x].y);return a};o.exports=E}),9564:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=e(23031),u=e(30052),r=function(h,n,l,c){c===void 0&&(c=[]);var s=h.points,d=u(h);!n&&l>0&&(n=d/l);for(var m=0;m<n;m++)for(var p=d*(m/n),g=0,T=0;T<s.length;T++){var S=s[T],w=s[(T+1)%s.length],A=new x(S.x,S.y,w.x,w.y),M=a(A);if(p<g||p>g+M){g+=M;continue}var R=A.getPoint((p-g)/M);c.push(R);break}return c};o.exports=r}),30052:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=e(23031),u=function(r){for(var h=r.points,n=0,l=0;l<h.length;l++){var c=h[l],s=h[(l+1)%h.length],d=new x(c.x,c.y,s.x,s.y);n+=a(d)}return n};o.exports=u}),25717:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(63814),u=e(9564),r=e(23777),h=new a({initialize:function(l){this.type=r.POLYGON,this.area=0,this.points=[],l&&this.setTo(l)},contains:function(n,l){return x(this,n,l)},setTo:function(n){if(this.area=0,this.points=[],typeof n=="string"&&(n=n.split(" ")),!Array.isArray(n))return this;for(var l,c=0;c<n.length;c++)l={x:0,y:0},typeof n[c]=="number"||typeof n[c]=="string"?(l.x=parseFloat(n[c]),l.y=parseFloat(n[c+1]),c++):Array.isArray(n[c])?(l.x=n[c][0],l.y=n[c][1]):(l.x=n[c].x,l.y=n[c].y),this.points.push(l);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var n=0,l,c,s=0;s<this.points.length-1;s++)l=this.points[s],c=this.points[s+1],n+=(c.x-l.x)*(l.y+c.y);return l=this.points[0],c=this.points[this.points.length-1],n+=(l.x-c.x)*(c.y+l.y),this.area=-n*.5,this.area},getPoints:function(n,l,c){return u(this,n,l,c)}});o.exports=h}),8133:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.points.reverse(),e};o.exports=E}),29524:(o=>{function E(h,n){var l=h.x-n.x,c=h.y-n.y;return l*l+c*c}function e(h,n,l){var c=n.x,s=n.y,d=l.x-c,m=l.y-s;if(d!==0||m!==0){var p=((h.x-c)*d+(h.y-s)*m)/(d*d+m*m);p>1?(c=l.x,s=l.y):p>0&&(c+=d*p,s+=m*p)}return d=h.x-c,m=h.y-s,d*d+m*m}function a(h,n){for(var l=h[0],c=[l],s,d=1,m=h.length;d<m;d++)s=h[d],E(s,l)>n&&(c.push(s),l=s);return l!==s&&c.push(s),c}function x(h,n,l,c,s){for(var d=c,m,p=n+1;p<l;p++){var g=e(h[p],h[n],h[l]);g>d&&(m=p,d=g)}d>c&&(m-n>1&&x(h,n,m,c,s),s.push(h[m]),l-m>1&&x(h,m,l,c,s))}function u(h,n){var l=h.length-1,c=[h[0]];return x(h,0,l,n,c),c.push(h[l]),c}var r=function(h,n,l){n===void 0&&(n=1),l===void 0&&(l=!1);var c=h.points;if(c.length>2){var s=n*n;l||(c=a(c,s)),h.setTo(u(c,s))}return h};o.exports=r}),5469:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(a,x){return a[0]=x[0],a[1]=x[1],a},e=function(a){var x,u=[],r=a.points;for(x=0;x<r.length;x++)u.push([r[x].x,r[x].y]);var h=[];for(u.length>0&&h.push(E([0,0],u[0])),x=0;x<u.length-1;x++){var n=u[x],l=u[x+1],c=n[0],s=n[1],d=l[0],m=l[1];h.push([.85*c+.15*d,.85*s+.15*m]),h.push([.15*c+.85*d,.15*s+.85*m])}return u.length>1&&h.push(E([0,0],u[u.length-1])),a.setTo(h)};o.exports=e}),24709:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){for(var u=e.points,r=0;r<u.length;r++)u[r].x+=a,u[r].y+=x;return e};o.exports=E}),58423:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25717);a.Clone=e(12306),a.Contains=e(63814),a.ContainsPoint=e(99338),a.Earcut=e(94811),a.GetAABB=e(13829),a.GetNumberArray=e(26173),a.GetPoints=e(9564),a.Perimeter=e(30052),a.Reverse=e(8133),a.Simplify=e(29524),a.Smooth=e(5469),a.Translate=e(24709),o.exports=a}),62224:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.width*e.height};o.exports=E}),98615:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};o.exports=E}),31688:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};o.exports=E}),67502:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x=a-e.width/2,e.y=x-e.height/2,e};o.exports=E}),65085:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(u){return new a(u.x,u.y,u.width,u.height)};o.exports=x}),37303:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.width<=0||e.height<=0?!1:e.x<=a&&e.x+e.width>=a&&e.y<=x&&e.y+e.height>=x};o.exports=E}),96553:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37303),x=function(u,r){return a(u,r.x,r.y)};o.exports=x}),70273:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.width*a.height>e.width*e.height?!1:a.x>e.x&&a.x<e.right&&a.right>e.x&&a.right<e.right&&a.y>e.y&&a.y<e.bottom&&a.bottom>e.y&&a.bottom<e.bottom};o.exports=E}),43459:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};o.exports=E}),77493:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x,y:e.y}),a.push({x:e.right,y:e.y}),a.push({x:e.right,y:e.bottom}),a.push({x:e.x,y:e.bottom}),a};o.exports=E}),9219:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};o.exports=E}),53751:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8249),x=function(u,r){var h=a(u);return h<a(r)?u.setSize(r.height*h,r.height):u.setSize(r.width,r.width/h),u.setPosition(r.centerX-u.width/2,r.centerY-u.height/2)};o.exports=x}),16088:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8249),x=function(u,r){var h=a(u);return h>a(r)?u.setSize(r.height*h,r.height):u.setSize(r.width,r.width/h),u.setPosition(r.centerX-u.width/2,r.centerY-u.height/2)};o.exports=x}),80774:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};o.exports=E}),83859:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};o.exports=E}),19217:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(36383),u=function(r,h){if(h===void 0&&(h=new a),r.length===0)return h;for(var n=Number.MAX_VALUE,l=Number.MAX_VALUE,c=x.MIN_SAFE_INTEGER,s=x.MIN_SAFE_INTEGER,d,m,p,g=0;g<r.length;g++)d=r[g],Array.isArray(d)?(m=d[0],p=d[1]):(m=d.x,p=d.y),n=Math.min(n,m),l=Math.min(l,p),c=Math.max(c,m),s=Math.max(s,p);return h.x=n,h.y=l,h.width=c-n,h.height=s-l,h};o.exports=u}),9477:((o,E,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(u,r,h,n,l){return l===void 0&&(l=new a),l.setTo(Math.min(u,h),Math.min(r,n),Math.abs(u-h),Math.abs(r-n))};o.exports=x}),8249:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.height===0?NaN:e.width/e.height};o.exports=E}),27165:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){return r===void 0&&(r=new a),r.x=u.centerX,r.y=u.centerY,r};o.exports=x}),20812:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13019),x=e(2141),u=function(r,h,n){if(n===void 0&&(n=new x),h<=0||h>=1)return n.x=r.x,n.y=r.y,n;var l=a(r)*h;return h>.5?(l-=r.width+r.height,l<=r.width?(n.x=r.right-l,n.y=r.bottom):(n.x=r.x,n.y=r.bottom-(l-r.width))):l<=r.width?(n.x=r.x+l,n.y=r.y):(n.x=r.right,n.y=r.y+(l-r.width)),n};o.exports=u}),34819:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20812),x=e(13019),u=function(r,h,n,l){l===void 0&&(l=[]),!h&&n>0&&(h=x(r)/n);for(var c=0;c<h;c++){var s=c/h;l.push(a(r,s))}return l};o.exports=u}),51313:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){return r===void 0&&(r=new a),r.x=u.width,r.y=u.height,r};o.exports=x}),86091:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67502),x=function(u,r,h){var n=u.centerX,l=u.centerY;return u.setSize(u.width+r*2,u.height+h*2),a(u,n,l)};o.exports=x}),53951:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(59996),u=function(r,h,n){return n===void 0&&(n=new a),x(r,h)?(n.x=Math.max(r.x,h.x),n.y=Math.max(r.y,h.y),n.width=Math.min(r.right,h.right)-n.x,n.height=Math.min(r.bottom,h.bottom)-n.y):n.setEmpty(),n};o.exports=u}),14649:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13019),x=e(2141),u=function(r,h,n,l){if(l===void 0&&(l=[]),!h&&!n)return l;h?n=Math.round(a(r)/h):h=a(r)/n;for(var c=r.x,s=r.y,d=0,m=0;m<n;m++)switch(l.push(new x(c,s)),d){case 0:c+=h,c>=r.right&&(d=1,s+=c-r.right,c=r.right);break;case 1:s+=h,s>=r.bottom&&(d=2,c-=s-r.bottom,s=r.bottom);break;case 2:c-=h,c<=r.left&&(d=3,s-=r.left-c,c=r.left);break;case 3:s-=h,s<=r.top&&(d=0,s=r.top);break}return l};o.exports=u}),33595:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){for(var x=e.x,u=e.right,r=e.y,h=e.bottom,n=0;n<a.length;n++)x=Math.min(x,a[n].x),u=Math.max(u,a[n].x),r=Math.min(r,a[n].y),h=Math.max(h,a[n].y);return e.x=x,e.y=r,e.width=u-x,e.height=h-r,e};o.exports=E}),20074:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=Math.min(e.x,a.x),u=Math.max(e.right,a.right);e.x=x,e.width=u-x;var r=Math.min(e.y,a.y),h=Math.max(e.bottom,a.bottom);return e.y=r,e.height=h-r,e};o.exports=E}),92171:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=Math.min(e.x,a),r=Math.max(e.right,a);e.x=u,e.width=r-u;var h=Math.min(e.y,x),n=Math.max(e.bottom,x);return e.y=h,e.height=n-h,e};o.exports=E}),42981:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x+=a,e.y+=x,e};o.exports=E}),46907:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x+=a.x,e.y+=a.y,e};o.exports=E}),60170:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x<a.right&&e.right>a.x&&e.y<a.bottom&&e.bottom>a.y};o.exports=E}),13019:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 2*(e.width+e.height)};o.exports=E}),85133:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(39506),u=function(r,h,n){n===void 0&&(n=new a),h=x(h);var l=Math.sin(h),c=Math.cos(h),s=c>0?r.width/2:r.width/-2,d=l>0?r.height/2:r.height/-2;return Math.abs(s*l)<Math.abs(d*c)?d=s*l/c:s=d*c/l,n.x=s+r.centerX,n.y=d+r.centerY,n};o.exports=u}),26597:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){return r===void 0&&(r=new a),r.x=u.x+Math.random()*u.width,r.y=u.y+Math.random()*u.height,r};o.exports=x}),86470:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),x=e(70273),u=e(2141),r=function(h,n,l){if(l===void 0&&(l=new u),x(h,n))switch(a(0,3)){case 0:l.x=h.x+Math.random()*(n.right-h.x),l.y=h.y+Math.random()*(n.top-h.y);break;case 1:l.x=n.x+Math.random()*(h.right-n.x),l.y=n.bottom+Math.random()*(h.bottom-n.bottom);break;case 2:l.x=h.x+Math.random()*(n.x-h.x),l.y=n.y+Math.random()*(h.bottom-n.y);break;case 3:l.x=n.right+Math.random()*(h.right-n.right),l.y=h.y+Math.random()*(n.bottom-h.y);break}return l};o.exports=r}),87841:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37303),u=e(20812),r=e(34819),h=e(23777),n=e(23031),l=e(26597),c=new a({initialize:function(d,m,p,g){d===void 0&&(d=0),m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=h.RECTANGLE,this.x=d,this.y=m,this.width=p,this.height=g},contains:function(s,d){return x(this,s,d)},getPoint:function(s,d){return u(this,s,d)},getPoints:function(s,d,m){return r(this,s,d,m)},getRandomPoint:function(s){return l(this,s)},setTo:function(s,d,m,p){return this.x=s,this.y=d,this.width=m,this.height=p,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(s,d){return d===void 0&&(d=s),this.x=s,this.y=d,this},setSize:function(s,d){return d===void 0&&(d=s),this.width=s,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(s){return s===void 0&&(s=new n),s.setTo(this.x,this.y,this.right,this.y),s},getLineB:function(s){return s===void 0&&(s=new n),s.setTo(this.right,this.y,this.right,this.bottom),s},getLineC:function(s){return s===void 0&&(s=new n),s.setTo(this.right,this.bottom,this.x,this.bottom),s},getLineD:function(s){return s===void 0&&(s=new n),s.setTo(this.x,this.bottom,this.x,this.y),s},left:{get:function(){return this.x},set:function(s){s>=this.right?this.width=0:this.width=this.right-s,this.x=s}},right:{get:function(){return this.x+this.width},set:function(s){s<=this.x?this.width=0:this.width=s-this.x}},top:{get:function(){return this.y},set:function(s){s>=this.bottom?this.height=0:this.height=this.bottom-s,this.y=s}},bottom:{get:function(){return this.y+this.height},set:function(s){s<=this.y?this.height=0:this.height=s-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(s){this.x=s-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(s){this.y=s-this.height/2}}});o.exports=c}),94845:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.width===a.width&&e.height===a.height};o.exports=E}),31730:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=a),e.width*=a,e.height*=x,e};o.exports=E}),36899:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=function(u,r,h){h===void 0&&(h=new a);var n=Math.min(u.x,r.x),l=Math.min(u.y,r.y),c=Math.max(u.right,r.right)-n,s=Math.max(u.bottom,r.bottom)-l;return h.setTo(n,l,c,s)};o.exports=x}),93232:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841);a.Area=e(62224),a.Ceil=e(98615),a.CeilAll=e(31688),a.CenterOn=e(67502),a.Clone=e(65085),a.Contains=e(37303),a.ContainsPoint=e(96553),a.ContainsRect=e(70273),a.CopyFrom=e(43459),a.Decompose=e(77493),a.Equals=e(9219),a.FitInside=e(53751),a.FitOutside=e(16088),a.Floor=e(80774),a.FloorAll=e(83859),a.FromPoints=e(19217),a.FromXY=e(9477),a.GetAspectRatio=e(8249),a.GetCenter=e(27165),a.GetPoint=e(20812),a.GetPoints=e(34819),a.GetSize=e(51313),a.Inflate=e(86091),a.Intersection=e(53951),a.MarchingAnts=e(14649),a.MergePoints=e(33595),a.MergeRect=e(20074),a.MergeXY=e(92171),a.Offset=e(42981),a.OffsetPoint=e(46907),a.Overlaps=e(60170),a.Perimeter=e(13019),a.PerimeterPoint=e(85133),a.Random=e(26597),a.RandomOutside=e(86470),a.SameDimensions=e(94845),a.Scale=e(31730),a.Union=e(36899),o.exports=a}),41658:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=e.x1,x=e.y1,u=e.x2,r=e.y2,h=e.x3,n=e.y3;return Math.abs(((h-a)*(r-x)-(u-a)*(n-x))/2)};o.exports=E}),39208:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),x=function(u,r,h){var n=h*(Math.sqrt(3)/2),l=u,c=r,s=u+h/2,d=r+n,m=u-h/2,p=r+n;return new a(l,c,s,d,m,p)};o.exports=x}),39545:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(94811),x=e(16483),u=function(r,h,n,l,c){h===void 0&&(h=null),n===void 0&&(n=1),l===void 0&&(l=1),c===void 0&&(c=[]);for(var s=a(r,h),d,m,p,g,T,S,w,A,M,R=0;R<s.length;R+=3)d=s[R],m=s[R+1],p=s[R+2],g=r[d*2]*n,T=r[d*2+1]*l,S=r[m*2]*n,w=r[m*2+1]*l,A=r[p*2]*n,M=r[p*2+1]*l,c.push(new x(g,T,S,w,A,M));return c};o.exports=u}),90301:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),x=function(u,r,h,n){n===void 0&&(n=h);var l=u,c=r,s=u,d=r-n,m=u+h,p=r;return new a(l,c,s,d,m,p)};o.exports=x}),23707:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97523),x=e(13584),u=function(r,h,n,l){l===void 0&&(l=a);var c=l(r),s=h-c.x,d=n-c.y;return x(r,s,d)};o.exports=u}),97523:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){return r===void 0&&(r=new a),r.x=(u.x1+u.x2+u.x3)/3,r.y=(u.y1+u.y2+u.y3)/3,r};o.exports=x}),24951:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099);function x(r,h,n,l){return r*l-h*n}var u=function(r,h){h===void 0&&(h=new a);var n=r.x3,l=r.y3,c=r.x1-n,s=r.y1-l,d=r.x2-n,m=r.y2-l,p=2*x(c,s,d,m),g=x(s,c*c+s*s,m,d*d+m*m),T=x(c,c*c+s*s,d,d*d+m*m);return h.x=n-g/p,h.y=l+T/p,h};o.exports=u}),85614:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),x=function(u,r){r===void 0&&(r=new a);var h=u.x1,n=u.y1,l=u.x2,c=u.y2,s=u.x3,d=u.y3,m=l-h,p=c-n,g=s-h,T=d-n,S=m*(h+l)+p*(n+c),w=g*(h+s)+T*(n+d),A=2*(m*(d-c)-p*(s-l)),M,R;if(Math.abs(A)<1e-6){var P=Math.min(h,l,s),b=Math.min(n,c,d);M=(Math.max(h,l,s)-P)*.5,R=(Math.max(n,c,d)-b)*.5,r.x=P+M,r.y=b+R,r.radius=Math.sqrt(M*M+R*R)}else r.x=(T*S-p*w)/A,r.y=(m*w-g*S)/A,M=r.x-h,R=r.y-n,r.radius=Math.sqrt(M*M+R*R);return r};o.exports=x}),74422:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),x=function(u){return new a(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)};o.exports=x}),10690:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=e.x3-e.x1,r=e.y3-e.y1,h=e.x2-e.x1,n=e.y2-e.y1,l=a-e.x1,c=x-e.y1,s=u*u+r*r,d=u*h+r*n,m=u*l+r*c,p=h*h+n*n,g=h*l+n*c,T=s*p-d*d,S=T===0?0:1/T,w=(p*m-d*g)*S,A=(s*g-d*m)*S;return w>=0&&A>=0&&w+A<1};o.exports=E}),48653:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x===void 0&&(x=!1),u===void 0&&(u=[]);for(var r=e.x3-e.x1,h=e.y3-e.y1,n=e.x2-e.x1,l=e.y2-e.y1,c=r*r+h*h,s=r*n+h*l,d=n*n+l*l,m=c*d-s*s,p=m===0?0:1/m,g,T,S,w,A,M,R=e.x1,P=e.y1,b=0;b<a.length&&(S=a[b].x-R,w=a[b].y-P,A=r*S+h*w,M=n*S+l*w,g=(d*A-s*M)*p,T=(c*M-s*A)*p,!(g>=0&&T>=0&&g+T<1&&(u.push({x:a[b].x,y:a[b].y}),x)));b++);return u};o.exports=E}),96006:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10690),x=function(u,r){return a(u,r.x,r.y)};o.exports=x}),71326:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};o.exports=E}),71694:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x1,y:e.y1}),a.push({x:e.x2,y:e.y2}),a.push({x:e.x3,y:e.y3}),a};o.exports=E}),33522:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2&&e.x3===a.x3&&e.y3===a.y3};o.exports=E}),20437:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=e(35001),u=function(r,h,n){n===void 0&&(n=new a);var l=r.getLineA(),c=r.getLineB(),s=r.getLineC();if(h<=0||h>=1)return n.x=l.x1,n.y=l.y1,n;var d=x(l),m=x(c),p=x(s),g=d+m+p,T=g*h,S=0;return T<d?(S=T/d,n.x=l.x1+(l.x2-l.x1)*S,n.y=l.y1+(l.y2-l.y1)*S):T>d+m?(T-=d+m,S=T/p,n.x=s.x1+(s.x2-s.x1)*S,n.y=s.y1+(s.y2-s.y1)*S):(T-=d,S=T/m,n.x=c.x1+(c.x2-c.x1)*S,n.y=c.y1+(c.y2-c.y1)*S),n};o.exports=u}),80672:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=e(2141),u=function(r,h,n,l){l===void 0&&(l=[]);var c=r.getLineA(),s=r.getLineB(),d=r.getLineC(),m=a(c),p=a(s),g=a(d),T=m+p+g;!h&&n>0&&(h=T/n);for(var S=0;S<h;S++){var w=T*(S/h),A=0,M=new x;w<m?(A=w/m,M.x=c.x1+(c.x2-c.x1)*A,M.y=c.y1+(c.y2-c.y1)*A):w>m+p?(w-=m+p,A=w/g,M.x=d.x1+(d.x2-d.x1)*A,M.y=d.y1+(d.y2-d.y1)*A):(w-=m,A=w/p,M.x=s.x1+(s.x2-s.x1)*A,M.y=s.y1+(s.y2-s.y1)*A),l.push(M)}return l};o.exports=u}),39757:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141);function x(r,h,n,l){var c=r-n,s=h-l,d=c*c+s*s;return Math.sqrt(d)}var u=function(r,h){h===void 0&&(h=new a);var n=r.x1,l=r.y1,c=r.x2,s=r.y2,d=r.x3,m=r.y3,p=x(d,m,c,s),g=x(n,l,d,m),T=x(c,s,n,l),S=p+g+T;return h.x=(n*p+c*g+d*T)/S,h.y=(l*p+s*g+m*T)/S,h};o.exports=u}),13584:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e.x1+=a,e.y1+=x,e.x2+=a,e.y2+=x,e.x3+=a,e.y3+=x,e};o.exports=E}),1376:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),x=function(u){var r=u.getLineA(),h=u.getLineB(),n=u.getLineC();return a(r)+a(h)+a(n)};o.exports=x}),90260:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),x=function(u,r){r===void 0&&(r=new a);var h=u.x2-u.x1,n=u.y2-u.y1,l=u.x3-u.x1,c=u.y3-u.y1,s=Math.random(),d=Math.random();return s+d>=1&&(s=1-s,d=1-d),r.x=u.x1+(h*s+l*d),r.y=u.y1+(n*s+c*d),r};o.exports=x}),52172:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99614),x=e(39757),u=function(r,h){var n=x(r);return a(r,n.x,n.y,h)};o.exports=u}),49907:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99614),x=function(u,r,h){return a(u,r.x,r.y,h)};o.exports=x}),99614:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=Math.cos(u),h=Math.sin(u),n=e.x1-a,l=e.y1-x;return e.x1=n*r-l*h+a,e.y1=n*h+l*r+x,n=e.x2-a,l=e.y2-x,e.x2=n*r-l*h+a,e.y2=n*h+l*r+x,n=e.x3-a,l=e.y3-x,e.x3=n*r-l*h+a,e.y3=n*h+l*r+x,e};o.exports=E}),16483:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(10690),u=e(20437),r=e(80672),h=e(23777),n=e(23031),l=e(90260),c=new a({initialize:function(d,m,p,g,T,S){d===void 0&&(d=0),m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=0),T===void 0&&(T=0),S===void 0&&(S=0),this.type=h.TRIANGLE,this.x1=d,this.y1=m,this.x2=p,this.y2=g,this.x3=T,this.y3=S},contains:function(s,d){return x(this,s,d)},getPoint:function(s,d){return u(this,s,d)},getPoints:function(s,d,m){return r(this,s,d,m)},getRandomPoint:function(s){return l(this,s)},setTo:function(s,d,m,p,g,T){return s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=0),T===void 0&&(T=0),this.x1=s,this.y1=d,this.x2=m,this.y2=p,this.x3=g,this.y3=T,this},getLineA:function(s){return s===void 0&&(s=new n),s.setTo(this.x1,this.y1,this.x2,this.y2),s},getLineB:function(s){return s===void 0&&(s=new n),s.setTo(this.x2,this.y2,this.x3,this.y3),s},getLineC:function(s){return s===void 0&&(s=new n),s.setTo(this.x3,this.y3,this.x1,this.y1),s},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(s){var d=0;this.x1<=this.x2&&this.x1<=this.x3?d=this.x1-s:this.x2<=this.x1&&this.x2<=this.x3?d=this.x2-s:d=this.x3-s,this.x1-=d,this.x2-=d,this.x3-=d}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(s){var d=0;this.x1>=this.x2&&this.x1>=this.x3?d=this.x1-s:this.x2>=this.x1&&this.x2>=this.x3?d=this.x2-s:d=this.x3-s,this.x1-=d,this.x2-=d,this.x3-=d}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(s){var d=0;this.y1<=this.y2&&this.y1<=this.y3?d=this.y1-s:this.y2<=this.y1&&this.y2<=this.y3?d=this.y2-s:d=this.y3-s,this.y1-=d,this.y2-=d,this.y3-=d}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(s){var d=0;this.y1>=this.y2&&this.y1>=this.y3?d=this.y1-s:this.y2>=this.y1&&this.y2>=this.y3?d=this.y2-s:d=this.y3-s,this.y1-=d,this.y2-=d,this.y3-=d}}});o.exports=c}),84435:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483);a.Area=e(41658),a.BuildEquilateral=e(39208),a.BuildFromPolygon=e(39545),a.BuildRight=e(90301),a.CenterOn=e(23707),a.Centroid=e(97523),a.CircumCenter=e(24951),a.CircumCircle=e(85614),a.Clone=e(74422),a.Contains=e(10690),a.ContainsArray=e(48653),a.ContainsPoint=e(96006),a.CopyFrom=e(71326),a.Decompose=e(71694),a.Equals=e(33522),a.GetPoint=e(20437),a.GetPoints=e(80672),a.InCenter=e(39757),a.Perimeter=e(1376),a.Offset=e(13584),a.Random=e(90260),a.Rotate=e(52172),a.RotateAroundPoint=e(49907),a.RotateAroundXY=e(99614),o.exports=a}),74457:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:a,hitAreaCallback:x,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};o.exports=E}),84409:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return function(x,u,r,h){var n=e.getPixelAlpha(u,r,h.texture.key,h.frame.name);return n&&n>=a}};o.exports=E}),7003:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(93301),u=e(50792),r=e(8214),h=e(8443),n=e(78970),l=e(85098),c=e(42515),s=e(36210),d=e(61340),m=e(85955),p=new a({initialize:function(T,S){this.game=T,this.scaleManager,this.canvas,this.config=S,this.enabled=!0,this.events=new u,this.isOver=!0,this.defaultCursor="",this.keyboard=S.inputKeyboard?new n(this):null,this.mouse=S.inputMouse?new l(this):null,this.touch=S.inputTouch?new s(this):null,this.pointers=[],this.pointersTotal=S.inputActivePointers;for(var w=0;w<=this.pointersTotal;w++){var A=new c(this,w);A.smoothFactor=S.inputSmoothFactor,this.pointers.push(A)}this.mousePointer=S.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],T.events.once(h.BOOT,this.boot,this)},boot:function(){var g=this.game,T=g.events;this.canvas=g.canvas,this.scaleManager=g.scale,this.events.emit(r.MANAGER_BOOT),T.on(h.PRE_RENDER,this.preRender,this),T.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(g){this.isOver=!0,this.events.emit(r.GAME_OVER,g)},setCanvasOut:function(g){this.isOver=!1,this.events.emit(r.GAME_OUT,g)},preRender:function(){var g=this.game.loop.now,T=this.game.loop.delta,S=this.game.scene.getScenes(!0,!0);this.time=g,this.events.emit(r.MANAGER_UPDATE);for(var w=0;w<S.length;w++){var A=S[w];if(A.sys.input&&A.sys.input.updatePoll(g,T)&&this.globalTopOnly)return}},setDefaultCursor:function(g){this.defaultCursor=g,this.canvas.style.cursor!==g&&(this.canvas.style.cursor=g)},setCursor:function(g){g.cursor&&(this.canvas.style.cursor=g.cursor)},resetCursor:function(g,T){(T||g&&g.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(g){g===void 0&&(g=1);var T=[];this.pointersTotal+g>10&&(g=10-this.pointersTotal);for(var S=0;S<g;S++){var w=this.pointers.length,A=new c(this,w);A.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(A),this.pointersTotal++,T.push(A)}return T},updateInputPlugins:function(g,T){var S=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var w=0;w<S.length;w++){var A=S[w];if(A.sys.input){var M=A.sys.input.update(g,T);if(M&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(g){for(var T=this.pointers,S=[],w=0;w<g.changedTouches.length;w++)for(var A=g.changedTouches[w],M=1;M<T.length;M++){var R=T[M];if(!R.active){R.touchstart(A,g),this.activePointer=R,S.push(R);break}}this.updateInputPlugins(x.TOUCH_START,S)},onTouchMove:function(g){for(var T=this.pointers,S=[],w=0;w<g.changedTouches.length;w++)for(var A=g.changedTouches[w],M=1;M<T.length;M++){var R=T[M];if(R.active&&R.identifier===A.identifier){var P=document.elementFromPoint(A.clientX,A.clientY),b=P===this.canvas;!this.isOver&&b?this.setCanvasOver(g):this.isOver&&!b&&this.setCanvasOut(g),this.isOver&&(R.touchmove(A,g),this.activePointer=R,S.push(R));break}}this.updateInputPlugins(x.TOUCH_MOVE,S)},onTouchEnd:function(g){for(var T=this.pointers,S=[],w=0;w<g.changedTouches.length;w++)for(var A=g.changedTouches[w],M=1;M<T.length;M++){var R=T[M];if(R.active&&R.identifier===A.identifier){R.touchend(A,g),S.push(R);break}}this.updateInputPlugins(x.TOUCH_END,S)},onTouchCancel:function(g){for(var T=this.pointers,S=[],w=0;w<g.changedTouches.length;w++)for(var A=g.changedTouches[w],M=1;M<T.length;M++){var R=T[M];if(R.active&&R.identifier===A.identifier){R.touchcancel(A,g),S.push(R);break}}this.updateInputPlugins(x.TOUCH_CANCEL,S)},onMouseDown:function(g){var T=this.mousePointer;T.down(g),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(x.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(g){var T=this.mousePointer;T.move(g),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(x.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(g){var T=this.mousePointer;T.up(g),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(x.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(g){var T=this.mousePointer;T.wheel(g),this.activePointer=T,this.updateInputPlugins(x.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(g){var T=this.mouse.locked;this.mousePointer.locked=T,this.events.emit(r.POINTERLOCK_CHANGE,g,T)},inputCandidate:function(g,T){var S=g.input;if(!S||!S.enabled||!g.willRender(T))return!1;var w=!0,A=g.parentContainer;if(A)do{if(!A.willRender(T)){w=!1;break}A=A.parentContainer}while(A);return w},hitTest:function(g,T,S,w){w===void 0&&(w=this._tempHitTest);var A=this._tempPoint,M=S.scrollX,R=S.scrollY;w.length=0;var P=g.x,b=g.y;S.getWorldPoint(P,b,A),g.worldX=A.x,g.worldY=A.y;for(var F={x:0,y:0},I=this._tempMatrix,L=this._tempMatrix2,D=0;D<T.length;D++){var O=T[D];if(this.inputCandidate(O,S)){var z=A.x+M*O.scrollFactorX-M,W=A.y+R*O.scrollFactorY-R;O.parentContainer?(O.getWorldTransformMatrix(I,L),I.applyInverse(z,W,F)):m(z,W,O.x,O.y,O.rotation,O.scaleX,O.scaleY,F),this.pointWithinHitArea(O,F.x,F.y)&&w.push(O)}}return w},pointWithinHitArea:function(g,T,S){T+=g.displayOriginX,S+=g.displayOriginY;var w=g.input;return w&&w.hitAreaCallback(w.hitArea,T,S,g)?(w.localX=T,w.localY=S,!0):!1},pointWithinInteractiveObject:function(g,T,S){return g.hitArea?(T+=g.gameObject.displayOriginX,S+=g.gameObject.displayOriginY,g.localX=T,g.localY=S,g.hitAreaCallback(g.hitArea,T,S,g)):!1},transformPointer:function(g,T,S,w){var A=g.position,M=g.prevPosition;M.x=A.x,M.y=A.y;var R=this.scaleManager.transformX(T),P=this.scaleManager.transformY(S),b=g.smoothFactor;!w||b===0?(A.x=R,A.y=P):(A.x=R*b+M.x*(1-b),A.y=P*b+M.y*(1-b))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var g=0;g<this.pointers.length;g++)this.pointers[g].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});o.exports=p}),48205:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),x=e(87902),u=e(83419),r=e(93301),h=e(74457),n=e(84409),l=e(20339),c=e(8497),s=e(81154),d=e(8214),m=e(50792),p=e(95540),g=e(23777),T=e(89639),S=e(41212),w=e(37277),A=e(87841),M=e(37303),R=e(44594),P=e(16483),b=e(10690),F=new u({Extends:m,initialize:function(L){m.call(this),this.scene=L,this.systems=L.sys,this.settings=L.sys.settings,this.manager=L.sys.game.input,this.pluginEvents=new m,this.enabled=!0,this.displayList,this.cameras,T.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,L.sys.events.once(R.BOOT,this.boot,this),L.sys.events.on(R.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(R.DESTROY,this.destroy,this),this.pluginEvents.emit(d.BOOT)},start:function(){var I=this.systems.events;I.on(R.TRANSITION_START,this.transitionIn,this),I.on(R.TRANSITION_OUT,this.transitionOut,this),I.on(R.TRANSITION_COMPLETE,this.transitionComplete,this),I.on(R.PRE_UPDATE,this.preUpdate,this),I.once(R.SHUTDOWN,this.shutdown,this),this.manager.events.on(d.GAME_OUT,this.onGameOut,this),this.manager.events.on(d.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(d.START)},onGameOver:function(I){this.isActive()&&this.emit(d.GAME_OVER,I.timeStamp,I)},onGameOut:function(I){this.isActive()&&this.emit(d.GAME_OUT,I.timeStamp,I)},preUpdate:function(){this.pluginEvents.emit(d.PRE_UPDATE);var I=this._pendingRemoval,L=this._pendingInsertion,D=I.length,O=L.length;if(!(D===0&&O===0)){for(var z=this._list,W=0;W<D;W++){var X=I[W],_=z.indexOf(X);_>-1&&(z.splice(_,1),this.clear(X,!0))}this._pendingRemoval.length=0,this._list=z.concat(L.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(I){this.manager&&this.manager.setCursor(I)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(I,L){if(!this.isActive())return!1;if(this.pluginEvents.emit(d.UPDATE,I,L),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,O=this.manager,z=O.pointers;for(D=0;D<z.length;D++)z[D].updateMotion();if(this._list.length===0)return!1;var W=this.pollRate;if(W===-1)return!1;if(W>0)if(this._pollTimer-=L,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var X=!1;for(D=0;D<z.length;D++){var _=0,U=z[D];this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),_+=this.processOverOutEvents(U),this.getDragState(U)===2&&this.processDragThresholdEvent(U,I),_>0&&(X=!0)}return X},update:function(I,L){if(!this.isActive())return!1;for(var D=!1,O=0;O<L.length;O++){var z=0,W=L[O];switch(this._tempZones=[],this._temp=this.hitTestPointer(W),this.sortGameObjects(this._temp,W),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),I){case r.MOUSE_DOWN:z+=this.processDragDownEvent(W),z+=this.processDownEvents(W),z+=this.processOverOutEvents(W);break;case r.MOUSE_UP:z+=this.processDragUpEvent(W),z+=this.processUpEvents(W),z+=this.processOverOutEvents(W);break;case r.TOUCH_START:z+=this.processDragDownEvent(W),z+=this.processDownEvents(W),z+=this.processOverEvents(W);break;case r.TOUCH_END:case r.TOUCH_CANCEL:z+=this.processDragUpEvent(W),z+=this.processUpEvents(W),z+=this.processOutEvents(W);break;case r.MOUSE_MOVE:case r.TOUCH_MOVE:z+=this.processDragMoveEvent(W),z+=this.processMoveEvents(W),z+=this.processOverOutEvents(W);break;case r.MOUSE_WHEEL:z+=this.processWheelEvent(W);break}z>0&&(D=!0)}return this._updatedThisFrame=!0,D},clear:function(I,L){L===void 0&&(L=!1),this.disable(I);var D=I.input;D&&(this.removeDebug(I),this.manager.resetCursor(D),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,I.input=null),L||this.queueForRemoval(I);var O=this._draggable.indexOf(I);return O>-1&&this._draggable.splice(O,1),I},disable:function(I,L){L===void 0&&(L=!1);var D=I.input;D&&(D.enabled=!1,D.dragState=0);for(var O=this._drag,z=this._over,W=this.manager,X=0,_;X<W.pointers.length;X++)_=O[X].indexOf(I),_>-1&&O[X].splice(_,1),_=z[X].indexOf(I),_>-1&&z[X].splice(_,1);return L&&this.resetCursor(),this},enable:function(I,L,D,O){return O===void 0&&(O=!1),I.input?I.input.enabled=!0:this.setHitArea(I,L,D),I.input&&O&&!I.input.dropZone&&(I.input.dropZone=O),this},hitTestPointer:function(I){for(var L=this.cameras.getCamerasBelowPointer(I),D=0;D<L.length;D++){for(var O=L[D],z=this.manager.hitTest(I,this._list,O),W=0;W<z.length;W++){var X=z[W];X.input.dropZone&&this._tempZones.push(X)}if(z.length>0)return I.camera=O,z}return I.camera=L[0],[]},processDownEvents:function(I){var L=0,D=this._temp,O=this._eventData,z=this._eventContainer;O.cancelled=!1;for(var W=0;W<D.length;W++){var X=D[W];if(!(!X.input||!X.input.enabled)&&(L++,X.emit(d.GAMEOBJECT_POINTER_DOWN,I,X.input.localX,X.input.localY,z),O.cancelled||!this.isActive()||X.input&&X.input.enabled&&(this.emit(d.GAMEOBJECT_DOWN,I,X,z),O.cancelled||!this.isActive())))break}return!O.cancelled&&this.isActive()&&(I.downElement===this.manager.game.canvas?this.emit(d.POINTER_DOWN,I,D):this.emit(d.POINTER_DOWN_OUTSIDE,I)),L},getDragState:function(I){return this._dragState[I.id]},setDragState:function(I,L){this._dragState[I.id]=L},processDragThresholdEvent:function(I,L){var D=!1,O=this.dragTimeThreshold,z=this.dragDistanceThreshold;if((z>0&&l(I.x,I.y,I.downX,I.downY)>=z||O>0&&L>=I.downTime+O)&&(D=!0),D)return this.setDragState(I,3),this.processDragStartList(I)},processDragStartList:function(I){if(this.getDragState(I)!==3)return 0;var L=this._drag[I.id];L.length>1&&(L=L.slice(0));for(var D=0;D<L.length;D++){var O=L[D],z=O.input;z.dragState=2,z.dragStartX=O.x,z.dragStartY=O.y,z.dragStartXGlobal=I.worldX,z.dragStartYGlobal=I.worldY,z.dragStartCamera=I.camera,z.dragX=z.dragStartXGlobal-z.dragStartX,z.dragY=z.dragStartYGlobal-z.dragStartY,O.emit(d.GAMEOBJECT_DRAG_START,I,z.dragX,z.dragY),this.emit(d.DRAG_START,I,O)}return this.setDragState(I,4),L.length},processDragDownEvent:function(I){var L=this._temp;if(this._draggable.length===0||L.length===0||!I.primaryDown||this.getDragState(I)!==0)return 0;this.setDragState(I,1);for(var D=[],O=0;O<L.length;O++){var z=L[O];z.input.draggable&&z.input.dragState===0&&D.push(z)}return D.length===0?(this.setDragState(I,0),0):(D.length>1&&(this.sortGameObjects(D,I),this.topOnly&&D.splice(1)),this._drag[I.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(I,3),this.processDragStartList(I)):(this.setDragState(I,2),0))},processDragMoveEvent:function(I){if(this.getDragState(I)===2&&this.processDragThresholdEvent(I,this.manager.game.loop.now),this.getDragState(I)!==4)return 0;var L=this._tempZones,D=this._drag[I.id];D.length>1&&(D=D.slice(0));for(var O=0;O<D.length;O++){var z=D[O],W=z.input,X=W.target;if(X){var _=L.indexOf(X);_===0?(z.emit(d.GAMEOBJECT_DRAG_OVER,I,X),this.emit(d.DRAG_OVER,I,z,X)):_>0?(z.emit(d.GAMEOBJECT_DRAG_LEAVE,I,X),this.emit(d.DRAG_LEAVE,I,z,X),W.target=L[0],X=W.target,z.emit(d.GAMEOBJECT_DRAG_ENTER,I,X),this.emit(d.DRAG_ENTER,I,z,X)):(z.emit(d.GAMEOBJECT_DRAG_LEAVE,I,X),this.emit(d.DRAG_LEAVE,I,z,X),L[0]?(W.target=L[0],X=W.target,z.emit(d.GAMEOBJECT_DRAG_ENTER,I,X),this.emit(d.DRAG_ENTER,I,z,X)):W.target=null)}else!X&&L[0]&&(W.target=L[0],X=W.target,z.emit(d.GAMEOBJECT_DRAG_ENTER,I,X),this.emit(d.DRAG_ENTER,I,z,X));var U,G,N=I.positionToCamera(W.dragStartCamera);if(!z.parentContainer)U=N.x-W.dragX,G=N.y-W.dragY;else{var H=N.x-W.dragStartXGlobal,V=N.y-W.dragStartYGlobal,$=z.getParentRotation(),j=H*Math.cos($)+V*Math.sin($),k=V*Math.cos($)-H*Math.sin($);j*=1/z.parentContainer.scaleX,k*=1/z.parentContainer.scaleY,U=j+W.dragStartX,G=k+W.dragStartY}z.emit(d.GAMEOBJECT_DRAG,I,U,G),this.emit(d.DRAG,I,z,U,G)}return D.length},processDragUpEvent:function(I){var L=this._drag[I.id];L.length>1&&(L=L.slice(0));for(var D=0;D<L.length;D++){var O=L[D],z=O.input;if(z&&z.dragState===2){z.dragState=0,z.dragX=z.localX-O.displayOriginX,z.dragY=z.localY-O.displayOriginY,z.dragStartCamera=null;var W=!1,X=z.target;X&&(O.emit(d.GAMEOBJECT_DROP,I,X),this.emit(d.DROP,I,O,X),z.target=null,W=!0),O.input&&O.input.enabled&&(O.emit(d.GAMEOBJECT_DRAG_END,I,z.dragX,z.dragY,W),this.emit(d.DRAG_END,I,O,W))}}return this.setDragState(I,0),L.splice(0),0},processMoveEvents:function(I){var L=0,D=this._temp,O=this._eventData,z=this._eventContainer;O.cancelled=!1;for(var W=0;W<D.length;W++){var X=D[W];if(!(!X.input||!X.input.enabled)&&(L++,X.emit(d.GAMEOBJECT_POINTER_MOVE,I,X.input.localX,X.input.localY,z),O.cancelled||!this.isActive()||X.input&&X.input.enabled&&(this.emit(d.GAMEOBJECT_MOVE,I,X,z),O.cancelled||!this.isActive()||this.topOnly)))break}return!O.cancelled&&this.isActive()&&this.emit(d.POINTER_MOVE,I,D),L},processWheelEvent:function(I){var L=0,D=this._temp,O=this._eventData,z=this._eventContainer;O.cancelled=!1;for(var W=I.deltaX,X=I.deltaY,_=I.deltaZ,U=0;U<D.length;U++){var G=D[U];if(!(!G.input||!G.input.enabled)&&(L++,G.emit(d.GAMEOBJECT_POINTER_WHEEL,I,W,X,_,z),O.cancelled||!this.isActive()||G.input&&G.input.enabled&&(this.emit(d.GAMEOBJECT_WHEEL,I,G,W,X,_,z),O.cancelled||!this.isActive())))break}return!O.cancelled&&this.isActive()&&this.emit(d.POINTER_WHEEL,I,D,W,X,_),L},processOverEvents:function(I){var L=this._temp,D=0,O=L.length,z=[];if(O>0){var W=this.manager,X=this._eventData,_=this._eventContainer;X.cancelled=!1;for(var U=0;U<O;U++){var G=L[U];if(!(!G.input||!G.input.enabled)&&(z.push(G),W.setCursor(G.input),G.emit(d.GAMEOBJECT_POINTER_OVER,I,G.input.localX,G.input.localY,_),D++,X.cancelled||!this.isActive()||G.input&&G.input.enabled&&(this.emit(d.GAMEOBJECT_OVER,I,G,_),X.cancelled||!this.isActive())))break}!X.cancelled&&this.isActive()&&this.emit(d.POINTER_OVER,I,z)}return this._over[I.id]=z,D},processOutEvents:function(I){var L=this._over[I.id],D=0,O=L.length;if(O>0){var z=this.manager,W=this._eventData,X=this._eventContainer;W.cancelled=!1,this.sortGameObjects(L,I);for(var _=0;_<O;_++){var U=L[_];if(U=L[_],!(!U.input||!U.input.enabled)&&(z.resetCursor(U.input),U.emit(d.GAMEOBJECT_POINTER_OUT,I,X),D++,W.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(d.GAMEOBJECT_OUT,I,U,X),W.cancelled||!this.isActive())))break}!W.cancelled&&this.isActive()&&this.emit(d.POINTER_OUT,I,L),this._over[I.id]=[]}return D},processOverOutEvents:function(I){var L=this._temp,D,O,z=[],W=[],X=[],_=this._over[I.id],U=this._drag[I.id],G=this.manager;for(D=0;D<_.length;D++)O=_[D],L.indexOf(O)===-1&&U.indexOf(O)===-1?z.push(O):X.push(O);for(D=0;D<L.length;D++)O=L[D],_.indexOf(O)===-1&&W.push(O);var N=z.length,H=0,V=this._eventData,$=this._eventContainer;if(V.cancelled=!1,N>0){for(this.sortGameObjects(z,I),D=0;D<N&&(O=z[D],!(!(!O.input||!O.input.enabled)&&(G.resetCursor(O.input),O.emit(d.GAMEOBJECT_POINTER_OUT,I,$),H++,V.cancelled||!this.isActive()||O.input&&O.input.enabled&&(this.emit(d.GAMEOBJECT_OUT,I,O,$),V.cancelled||!this.isActive()))));D++);(!V.cancelled||this.isActive())&&this.emit(d.POINTER_OUT,I,z)}if(N=W.length,V.cancelled=!1,N>0){for(this.sortGameObjects(W,I),D=0;D<N&&(O=W[D],!(!(!O.input||!O.input.enabled)&&(G.setCursor(O.input),O.emit(d.GAMEOBJECT_POINTER_OVER,I,O.input.localX,O.input.localY,$),H++,V.cancelled||!this.isActive()||O.input&&O.input.enabled&&(this.emit(d.GAMEOBJECT_OVER,I,O,$),V.cancelled||!this.isActive()))));D++);!V.cancelled&&this.isActive()&&this.emit(d.POINTER_OVER,I,W)}return _=X.concat(W),this._over[I.id]=this.sortGameObjects(_,I),H},processUpEvents:function(I){var L=this._temp,D=this._eventData,O=this._eventContainer;D.cancelled=!1;for(var z=0;z<L.length;z++){var W=L[z];if(!(!W.input||!W.input.enabled)&&(W.emit(d.GAMEOBJECT_POINTER_UP,I,W.input.localX,W.input.localY,O),D.cancelled||!this.isActive()||W.input&&W.input.enabled&&(this.emit(d.GAMEOBJECT_UP,I,W,O),D.cancelled||!this.isActive())))break}return!D.cancelled&&this.isActive()&&(I.upElement===this.manager.game.canvas?this.emit(d.POINTER_UP,I,L):this.emit(d.POINTER_UP_OUTSIDE,I)),L.length},forceDownState:function(I,L){this.forceState(I,L,d.GAMEOBJECT_POINTER_DOWN,d.GAMEOBJECT_DOWN,!1)},forceUpState:function(I,L){this.forceState(I,L,d.GAMEOBJECT_POINTER_UP,d.GAMEOBJECT_UP,!1)},forceOverState:function(I,L){this.forceState(I,L,d.GAMEOBJECT_POINTER_OVER,d.GAMEOBJECT_OVER,!0)},forceOutState:function(I,L){this.forceState(I,L,d.GAMEOBJECT_POINTER_OUT,d.GAMEOBJECT_OUT,!1)},forceState:function(I,L,D,O,z){var W=this._eventData,X=this._eventContainer;W.cancelled=!1,L.input&&L.input.enabled&&(L.emit(D,I,L.input.localX,L.input.localY,X),z&&this.setCursor(L.input),!W.cancelled&&this.isActive()&&L.input&&L.input.enabled&&this.emit(O,I,L,X))},queueForInsertion:function(I){return this._pendingInsertion.indexOf(I)===-1&&this._list.indexOf(I)===-1&&this._pendingInsertion.push(I),this},queueForRemoval:function(I){return this._pendingRemoval.push(I),this},setDraggable:function(I,L){L===void 0&&(L=!0),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var O=I[D];O.input.draggable=L;var z=this._draggable.indexOf(O);L&&z===-1?this._draggable.push(O):!L&&z>-1&&this._draggable.splice(z,1)}return this},makePixelPerfect:function(I){I===void 0&&(I=1);var L=this.systems.textures;return n(L,I)},setHitArea:function(I,L,D){if(L===void 0)return this.setHitAreaFromTexture(I);Array.isArray(I)||(I=[I]);var O=!1,z=!1,W=!1,X=!1,_=!1,U=!0;if(S(L)&&Object.keys(L).length){var G=L,N=I.some(function(k){return k.hasOwnProperty("faces")});if(!N){L=p(G,"hitArea",null),D=p(G,"hitAreaCallback",null),_=p(G,"pixelPerfect",!1);var H=p(G,"alphaTolerance",1);_&&(L={},D=this.makePixelPerfect(H))}O=p(G,"draggable",!1),z=p(G,"dropZone",!1),W=p(G,"cursor",!1),X=p(G,"useHandCursor",!1),(!L||!D)&&(this.setHitAreaFromTexture(I),U=!1)}else typeof L=="function"&&!D&&(D=L,L={});for(var V=0;V<I.length;V++){var $=I[V];if(_&&$.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var j=$.input?$.input:h($,L,D);j.customHitArea=U,j.dropZone=z,j.cursor=X?"pointer":W,$.input=j,O&&this.setDraggable($),this.queueForInsertion($)}return this},setHitAreaCircle:function(I,L,D,O,z){z===void 0&&(z=x);var W=new a(L,D,O);return this.setHitArea(I,W,z)},setHitAreaEllipse:function(I,L,D,O,z,W){W===void 0&&(W=s);var X=new c(L,D,O,z);return this.setHitArea(I,X,W)},setHitAreaFromTexture:function(I,L){L===void 0&&(L=M),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var O=I[D],z=O.frame,W=0,X=0;if(O.width?(W=O.width,X=O.height):z&&(W=z.realWidth,X=z.realHeight),O.type==="Container"&&(W===0||X===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}W!==0&&X!==0&&(O.input=h(O,new A(0,0,W,X),L),this.queueForInsertion(O))}return this},setHitAreaRectangle:function(I,L,D,O,z,W){W===void 0&&(W=M);var X=new A(L,D,O,z);return this.setHitArea(I,X,W)},setHitAreaTriangle:function(I,L,D,O,z,W,X,_){_===void 0&&(_=b);var U=new P(L,D,O,z,W,X);return this.setHitArea(I,U,_)},enableDebug:function(I,L){L===void 0&&(L=65280);var D=I.input;if(!D||!D.hitArea)return this;var O=D.hitArea,z=O.type,W=D.hitAreaDebug,X=this.systems.add,_=this.systems.updateList;W&&(_.remove(W),W.destroy(),W=null);var U=0,G=0;switch(z){case g.CIRCLE:W=X.arc(0,0,O.radius),U=O.x-O.radius,G=O.y-O.radius;break;case g.ELLIPSE:W=X.ellipse(0,0,O.width,O.height),U=O.x-O.width/2,G=O.y-O.height/2;break;case g.LINE:W=X.line(0,0,O.x1,O.y1,O.x2,O.y2);break;case g.POLYGON:W=X.polygon(0,0,O.points);break;case g.RECTANGLE:W=X.rectangle(0,0,O.width,O.height),U=O.x,G=O.y;break;case g.TRIANGLE:W=X.triangle(0,0,O.x1,O.y1,O.x2,O.y2,O.x3,O.y3);break}return W&&(W.isFilled=!1,W.strokeColor=L,W.preUpdate=function(){W.setVisible(I.visible),W.setStrokeStyle(1/I.scale,W.strokeColor),W.setDisplayOrigin(I.displayOriginX,I.displayOriginY);var N=I.x,H=I.y,V=I.rotation,$=I.scaleX,j=I.scaleY;if(I.parentContainer){var k=I.getWorldTransformMatrix();N=k.tx,H=k.ty,V=k.rotation,$=k.scaleX,j=k.scaleY}W.setRotation(V),W.setScale($,j),W.setPosition(N+U*$,H+G*j),W.setScrollFactor(I.scrollFactorX,I.scrollFactorY),W.setDepth(I.depth)},_.add(W),D.hitAreaDebug=W),this},removeDebug:function(I){var L=I.input;if(L&&L.hitAreaDebug){var D=L.hitAreaDebug;D.destroy(),L.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(I){return this.pollRate=I,this._pollTimer=0,this},setGlobalTopOnly:function(I){return this.manager.globalTopOnly=I,this},setTopOnly:function(I){return this.topOnly=I,this},sortGameObjects:function(I,L){if(I.length<2||!L.camera)return I;var D=L.camera.renderList;return I.sort(function(O,z){var W=Math.max(D.indexOf(O),0),X=Math.max(D.indexOf(z),0);return X-W})},sortDropZones:function(I){return I.length<2?I:(this.scene.sys.depthSort(),I.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(I,L){if(!I.parentContainer&&!L.parentContainer)return this.displayList.getIndex(L)-this.displayList.getIndex(I);if(I.parentContainer===L.parentContainer)return L.parentContainer.getIndex(L)-I.parentContainer.getIndex(I);if(I.parentContainer===L)return-1;if(L.parentContainer===I)return 1;for(var D=I.getIndexList(),O=L.getIndexList(),z=Math.min(D.length,O.length),W=0;W<z;W++){var X=D[W],_=O[W];if(X!==_)return _-X}return O.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(I){return this.manager.addPointer(I)},setDefaultCursor:function(I){return this.manager.setDefaultCursor(I),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(d.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var I=0;I<10;I++)this._drag[I]=[],this._over[I]=[];this.removeAllListeners();var L=this.manager;L.canvas.style.cursor=L.defaultCursor;var D=this.systems.events;D.off(R.TRANSITION_START,this.transitionIn,this),D.off(R.TRANSITION_OUT,this.transitionOut,this),D.off(R.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(R.PRE_UPDATE,this.preUpdate,this),L.events.off(d.GAME_OUT,this.onGameOut,this),L.events.off(d.GAME_OVER,this.onGameOver,this),D.off(R.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var I=this.manager.pointers,L=0;L<I.length;L++)I[L].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(d.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(R.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});w.register("InputPlugin",F,"input"),o.exports=F}),89639:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x={},u={};u.register=function(r,h,n,l,c){x[r]={plugin:h,mapping:n,settingsKey:l,configKey:c}},u.getPlugin=function(r){return x[r]},u.install=function(r){var h=r.scene.sys,n=h.settings.input,l=h.game.config;for(var c in x){var s=x[c].plugin,d=x[c].mapping,m=x[c].settingsKey,p=x[c].configKey;a(n,m,l[p])&&(r[d]=new s(r))}},u.remove=function(r){x.hasOwnProperty(r)&&delete x[r]},o.exports=u}),42515:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31040),x=e(83419),u=e(20339),r=e(43855),h=e(47235),n=e(26099),l=e(25892),c=new x({initialize:function(d,m){this.manager=d,this.id=m,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=m===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(s){var d=s.getWorldPoint(this.x,this.y);return this.worldX=d.x,this.worldY=d.y,this},positionToCamera:function(s,d){return s.getWorldPoint(this.x,this.y,d)},updateMotion:function(){var s=this.position.x,d=this.position.y,m=this.midPoint.x,p=this.midPoint.y;if(!(s===m&&d===p)){var g=h(this.motionFactor,m,s),T=h(this.motionFactor,p,d);r(g,s,.1)&&(g=s),r(T,d,.1)&&(T=d),this.midPoint.set(g,T);var S=s-g,w=d-T;this.velocity.set(S,w),this.angle=a(g,T,s,d),this.distance=Math.sqrt(S*S+w*w)}},up:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.button=s.button,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),s.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=s.timeStamp,this.wasTouch=!1)},down:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.button=s.button,this.downElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),s.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),l.macOS&&s.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=s.timeStamp),this.wasTouch=!1},move:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.manager.transformPointer(this,s.pageX,s.pageY,!0),this.locked&&(this.movementX=s.movementX||s.mozMovementX||s.webkitMovementX||0,this.movementY=s.movementY||s.mozMovementY||s.webkitMovementY||0),this.moveTime=s.timeStamp,this.wasTouch=!1},wheel:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.deltaX=s.deltaX,this.deltaY=s.deltaY,this.deltaZ=s.deltaZ,this.wasTouch=!1},touchstart:function(s,d){s.pointerId&&(this.pointerId=s.pointerId),this.identifier=s.identifier,this.target=s.target,this.active=!0,this.buttons=1,this.event=d,this.downElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=d.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(s,d){this.event=d,this.manager.transformPointer(this,s.pageX,s.pageY,!0),this.moveTime=d.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(s,d){this.buttons=0,this.event=d,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=d.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(s,d){this.buttons=0,this.event=d,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=d.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(s,d){s===void 0&&(s=10),d===void 0&&(d=[]);for(var m=this.prevPosition.x,p=this.prevPosition.y,g=this.position.x,T=this.position.y,S=0;S<s;S++){var w=1/s*S;d[S]={x:h(w,m,g),y:h(w,p,T)}}return d},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(s){this.position.x=s}},y:{get:function(){return this.position.y},set:function(s){this.position.y=s}},time:{get:function(){return this.event?this.event.timeStamp:0}}});o.exports=c}),93301:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};o.exports=E}),7179:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"}),85375:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"}),39843:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"}),23388:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"}),16133:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"}),27829:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"}),53904:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"}),56058:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"}),2642:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"}),88171:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectdown"}),36147:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"}),71692:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"}),96149:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"}),81285:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"}),74048:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"}),21322:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"}),49378:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"}),86754:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectmove"}),86433:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectout"}),60709:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectover"}),24081:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"}),11172:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"}),18907:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"}),95579:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"}),35368:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"}),26972:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"}),47078:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectup"}),73802:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectwheel"}),56718:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameout"}),25936:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameover"}),27503:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"}),50852:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="process"}),96438:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"}),59152:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerlockchange"}),47777:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"}),27957:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdownoutside"}),19444:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"}),54251:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"}),18667:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"}),27192:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"}),24652:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerupoutside"}),45132:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"}),44512:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"}),15757:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"}),41637:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"}),93802:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"}),8214:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BOOT:e(7179),DESTROY:e(85375),DRAG_END:e(39843),DRAG_ENTER:e(23388),DRAG:e(16133),DRAG_LEAVE:e(27829),DRAG_OVER:e(53904),DRAG_START:e(56058),DROP:e(2642),GAME_OUT:e(56718),GAME_OVER:e(25936),GAMEOBJECT_DOWN:e(88171),GAMEOBJECT_DRAG_END:e(36147),GAMEOBJECT_DRAG_ENTER:e(71692),GAMEOBJECT_DRAG:e(96149),GAMEOBJECT_DRAG_LEAVE:e(81285),GAMEOBJECT_DRAG_OVER:e(74048),GAMEOBJECT_DRAG_START:e(21322),GAMEOBJECT_DROP:e(49378),GAMEOBJECT_MOVE:e(86754),GAMEOBJECT_OUT:e(86433),GAMEOBJECT_OVER:e(60709),GAMEOBJECT_POINTER_DOWN:e(24081),GAMEOBJECT_POINTER_MOVE:e(11172),GAMEOBJECT_POINTER_OUT:e(18907),GAMEOBJECT_POINTER_OVER:e(95579),GAMEOBJECT_POINTER_UP:e(35368),GAMEOBJECT_POINTER_WHEEL:e(26972),GAMEOBJECT_UP:e(47078),GAMEOBJECT_WHEEL:e(73802),MANAGER_BOOT:e(27503),MANAGER_PROCESS:e(50852),MANAGER_UPDATE:e(96438),POINTER_DOWN:e(47777),POINTER_DOWN_OUTSIDE:e(27957),POINTER_MOVE:e(19444),POINTER_OUT:e(54251),POINTER_OVER:e(18667),POINTER_UP:e(27192),POINTER_UP_OUTSIDE:e(24652),POINTER_WHEEL:e(45132),POINTERLOCK_CHANGE:e(59152),PRE_UPDATE:e(44512),SHUTDOWN:e(15757),START:e(41637),UPDATE:e(93802)}}),97421:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h){this.pad=r,this.events=r.events,this.index=h,this.value=0,this.threshold=.1},update:function(u){this.value=u},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});o.exports=x}),28884:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92734),u=new a({initialize:function(h,n){this.pad=h,this.events=h.manager,this.index=n,this.value=0,this.threshold=1,this.pressed=!1},update:function(r){this.value=r;var h=this.pad,n=this.index;r>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(x.BUTTON_DOWN,h,this,r),this.pad.emit(x.GAMEPAD_BUTTON_DOWN,n,r,this)):this.pressed&&(this.pressed=!1,this.events.emit(x.BUTTON_UP,h,this,r),this.pad.emit(x.GAMEPAD_BUTTON_UP,n,r,this))},destroy:function(){this.pad=null,this.events=null}});o.exports=u}),99125:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97421),x=e(28884),u=e(83419),r=e(50792),h=e(26099),n=new u({Extends:r,initialize:function(c,s){r.call(this),this.manager=c,this.pad=s,this.id=s.id,this.index=s.index;for(var d=[],m=0;m<s.buttons.length;m++)d.push(new x(this,m));this.buttons=d;var p=[];for(m=0;m<s.axes.length;m++)p.push(new a(this,m));this.axes=p,this.vibration=s.vibrationActuator;var g={value:0,pressed:!1};this._LCLeft=d[14]?d[14]:g,this._LCRight=d[15]?d[15]:g,this._LCTop=d[12]?d[12]:g,this._LCBottom=d[13]?d[13]:g,this._RCLeft=d[2]?d[2]:g,this._RCRight=d[1]?d[1]:g,this._RCTop=d[3]?d[3]:g,this._RCBottom=d[0]?d[0]:g,this._FBLeftTop=d[4]?d[4]:g,this._FBLeftBottom=d[6]?d[6]:g,this._FBRightTop=d[5]?d[5]:g,this._FBRightBottom=d[7]?d[7]:g;var T={value:0};this._HAxisLeft=p[0]?p[0]:T,this._VAxisLeft=p[1]?p[1]:T,this._HAxisRight=p[2]?p[2]:T,this._VAxisRight=p[3]?p[3]:T,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(l){return this.axes[l].getValue()},setAxisThreshold:function(l){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=l},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(l){return this.buttons[l].value},isButtonDown:function(l){return this.buttons[l].pressed},update:function(l){if(!(l.timestamp<this._created)){var c,s=this.buttons,d=l.buttons,m=s.length;for(c=0;c<m;c++)s[c].update(d[c].value);var p=this.axes,g=l.axes;for(m=p.length,c=0;c<m;c++)p[c].update(g[c]);m>=2&&(this.leftStick.set(p[0].getValue(),p[1].getValue()),m>=4&&this.rightStick.set(p[2].getValue(),p[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var l;for(l=0;l<this.buttons.length;l++)this.buttons[l].destroy();for(l=0;l<this.axes.length;l++)this.axes[l].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});o.exports=n}),56654:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),u=e(92734),r=e(99125),h=e(35154),n=e(89639),l=e(8214),c=new a({Extends:x,initialize:function(d){x.call(this),this.scene=d.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=d,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,d.pluginEvents.once(l.BOOT,this.boot,this),d.pluginEvents.on(l.START,this.start,this)},boot:function(){var s=this.scene.sys.game,d=this.settings.input,m=s.config;this.enabled=h(d,"gamepad",m.inputGamepad)&&s.device.input.gamepads,this.target=h(d,"gamepad.target",m.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var s=this,d=this.target,m=function(p){p.defaultPrevented||!s.isActive()||(s.refreshPads(),s.queue.push(p))};this.onGamepadHandler=m,d.addEventListener("gamepadconnected",m,!1),d.addEventListener("gamepaddisconnected",m,!1),this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update);for(var s=0;s<this.gamepads.length;s++)this.gamepads[s].removeAllListeners()},disconnectAll:function(){for(var s=0;s<this.gamepads.length;s++)this.gamepads[s].pad.connected=!1},refreshPads:function(){var s=navigator.getGamepads();if(!s)this.disconnectAll();else for(var d=this.gamepads,m=0;m<s.length;m++){var p=s[m];if(p){var g=p.id,T=p.index,S=d[T];if(S)S.id!==g?(S.destroy(),d[T]=new r(this,p)):S.update(p);else{var w=new r(this,p);d[T]=w,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=w):this._pad3=w:this._pad2=w:this._pad1=w}}}},getAll:function(){for(var s=[],d=this.gamepads,m=0;m<d.length;m++)d[m]&&s.push(d[m]);return s},getPad:function(s){for(var d=this.gamepads,m=0;m<d.length;m++)if(d[m]&&d[m].index===s)return d[m]},update:function(){if(this.enabled){this.refreshPads();var s=this.queue.length;if(s!==0)for(var d=this.queue.splice(0,s),m=0;m<s;m++){var p=d[m],g=this.getPad(p.gamepad.index);p.type==="gamepadconnected"?this.emit(u.CONNECTED,g,p):p.type==="gamepaddisconnected"&&this.emit(u.DISCONNECTED,g,p)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var s=0;s<this.gamepads.length;s++)this.gamepads[s]&&this.gamepads[s].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});n.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),o.exports=c}),89651:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}}),65294:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),90089:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),64894:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DUALSHOCK_4:e(65294),SNES_USB:e(89651),XBOX_360:e(90089)}}),46008:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"}),7629:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"}),42206:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="connected"}),86544:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="disconnected"}),94784:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"}),14325:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"}),92734:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BUTTON_DOWN:e(46008),BUTTON_UP:e(7629),CONNECTED:e(42206),DISCONNECTED:e(86544),GAMEPAD_BUTTON_DOWN:e(94784),GAMEPAD_BUTTON_UP:e(14325)}}),48646:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Axis:e(97421),Button:e(28884),Events:e(92734),Gamepad:e(99125),GamepadPlugin:e(56654),Configs:e(64894)}}),14350:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93301),x=e(79291),u={CreatePixelPerfectHandler:e(84409),CreateInteractiveObject:e(74457),Events:e(8214),Gamepad:e(48646),InputManager:e(7003),InputPlugin:e(48205),InputPluginCache:e(89639),Keyboard:e(51442),Mouse:e(87078),Pointer:e(42515),Touch:e(95618)};u=x(!1,u,a),o.exports=u}),78970:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),x=e(83419),u=e(8443),r=e(8214),h=e(46032),n=e(29747),l=new x({initialize:function(s){this.manager=s,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=n,this.onKeyUp=n,s.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(u.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(d){if(!(d.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(d),c.manager.events.emit(r.MANAGER_PROCESS);var m=d.altKey||d.ctrlKey||d.shiftKey||d.metaKey;c.preventDefault&&!m&&c.captures.indexOf(d.keyCode)>-1&&d.preventDefault()}},this.onKeyUp=function(d){if(!(d.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(d),c.manager.events.emit(r.MANAGER_PROCESS);var m=d.altKey||d.ctrlKey||d.shiftKey||d.metaKey;c.preventDefault&&!m&&c.captures.indexOf(d.keyCode)>-1&&d.preventDefault()}};var s=this.target;s&&(s.addEventListener("keydown",this.onKeyDown,!1),s.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var s=this.captures,d=0;d<c.length;d++){var m=c[d];typeof m=="string"&&(m=h[m.trim().toUpperCase()]),s.indexOf(m)===-1&&s.push(m)}this.preventDefault=s.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var s=this.captures,d=0;d<c.length;d++){var m=c[d];typeof m=="string"&&(m=h[m.toUpperCase()]),a(s,m)}this.preventDefault=s.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(u.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});o.exports=l}),28846:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),u=e(95922),r=e(8443),h=e(35154),n=e(8214),l=e(89639),c=e(30472),s=e(46032),d=e(87960),m=e(74600),p=e(44594),g=e(56583),T=new a({Extends:x,initialize:function(w){x.call(this),this.game=w.systems.game,this.scene=w.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=w,this.manager=w.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,w.pluginEvents.once(n.BOOT,this.boot,this),w.pluginEvents.on(n.START,this.start,this)},boot:function(){var S=this.settings.input;this.enabled=h(S,"keyboard",!0);var w=h(S,"keyboard.capture",null);w&&this.addCaptures(w),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(n.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this),this.game.events.on(r.BLUR,this.resetKeys,this),this.scene.sys.events.on(p.PAUSE,this.resetKeys,this),this.scene.sys.events.on(p.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(S){return this.manager.addCapture(S),this},removeCapture:function(S){return this.manager.removeCapture(S),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:s.UP,down:s.DOWN,left:s.LEFT,right:s.RIGHT,space:s.SPACE,shift:s.SHIFT})},addKeys:function(S,w,A){w===void 0&&(w=!0),A===void 0&&(A=!1);var M={};if(typeof S=="string"){S=S.split(",");for(var R=0;R<S.length;R++){var P=S[R].trim();P&&(M[P]=this.addKey(P,w,A))}}else for(var b in S)M[b]=this.addKey(S[b],w,A);return M},addKey:function(S,w,A){w===void 0&&(w=!0),A===void 0&&(A=!1);var M=this.keys;if(S instanceof c){var R=M.indexOf(S);return R>-1?M[R]=S:M[S.keyCode]=S,w&&this.addCapture(S.keyCode),S.setEmitOnRepeat(A),S}return typeof S=="string"&&(S=s[S.toUpperCase()]),M[S]||(M[S]=new c(this,S),w&&this.addCapture(S),M[S].setEmitOnRepeat(A)),M[S]},removeKey:function(S,w,A){w===void 0&&(w=!1),A===void 0&&(A=!1);var M=this.keys,R;if(S instanceof c){var P=M.indexOf(S);P>-1&&(R=this.keys[P],this.keys[P]=void 0)}else typeof S=="string"&&(S=s[S.toUpperCase()]);return M[S]&&(R=M[S],M[S]=void 0),R&&(R.plugin=null,A&&this.removeCapture(R.keyCode),w&&R.destroy()),this},removeAllKeys:function(S,w){S===void 0&&(S=!1),w===void 0&&(w=!1);for(var A=this.keys,M=0;M<A.length;M++){var R=A[M];R&&(A[M]=void 0,w&&this.removeCapture(R.keyCode),S&&R.destroy())}return this},createCombo:function(S,w){return new d(this,S,w)},checkDown:function(S,w){if(w===void 0&&(w=0),this.enabled&&S.isDown){var A=g(this.time-S.timeDown,w);if(A>S._tick)return S._tick=A,!0}return!1},update:function(){var S=this.manager.queue,w=S.length;if(!(!this.isActive()||w===0))for(var A=this.keys,M=0;M<w;M++){var R=S[M],P=R.keyCode,b=A[P],F=!1;R.cancelled===void 0&&(R.cancelled=0,R.stopImmediatePropagation=function(){R.cancelled=1},R.stopPropagation=function(){R.cancelled=-1}),R.cancelled!==-1&&(P===this.prevCode&&R.timeStamp===this.prevTime&&R.type===this.prevType||(this.prevCode=P,this.prevTime=R.timeStamp,this.prevType=R.type,R.type==="keydown"?(b&&(F=b.isDown,b.onDown(R)),!R.cancelled&&(!b||!F)&&(m[P]&&this.emit(u.KEY_DOWN+m[P],R),R.cancelled||this.emit(u.ANY_KEY_DOWN,R))):(b&&b.onUp(R),R.cancelled||(m[P]&&this.emit(u.KEY_UP+m[P],R),R.cancelled||this.emit(u.ANY_KEY_UP,R))),R.cancelled===1&&(R.cancelled=0)))}},resetKeys:function(){for(var S=this.keys,w=0;w<S.length;w++)S[w]&&S[w].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(n.MANAGER_PROCESS,this.update,this),this.game.events.off(r.BLUR,this.resetKeys),this.scene.sys.events.off(p.PAUSE,this.resetKeys,this),this.scene.sys.events.off(p.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var S=this.keys,w=0;w<S.length;w++)S[w]&&S[w].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});l.register("KeyboardPlugin",T,"keyboard","keyboard","inputKeyboard"),o.exports=T}),66970:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a.timeLastMatched=e.timeStamp,a.index++,a.index===a.size?!0:(a.current=a.keyCodes[a.index],!1)};o.exports=E}),87960:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95922),u=e(95540),r=e(68769),h=e(92803),n=new a({initialize:function(c,s,d){if(d===void 0&&(d={}),s.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var m=0;m<s.length;m++){var p=s[m];typeof p=="string"?this.keyCodes.push(p.toUpperCase().charCodeAt(0)):typeof p=="number"?this.keyCodes.push(p):p.hasOwnProperty("keyCode")&&this.keyCodes.push(p.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=u(d,"resetOnWrongKey",!0),this.maxKeyDelay=u(d,"maxKeyDelay",0),this.resetOnMatch=u(d,"resetOnMatch",!1),this.deleteOnMatch=u(d,"deleteOnMatch",!1);var g=this,T=function(S){if(!(g.matched||!g.enabled)){var w=r(S,g);w&&(g.manager.emit(x.COMBO_MATCH,g,S),g.resetOnMatch?h(g):g.deleteOnMatch&&g.destroy())}};this.onKeyDown=T,this.manager.on(x.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(x.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});o.exports=n}),68769:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66970),x=function(u,r){if(r.matched)return!0;var h=!1,n=!1;if(u.keyCode===r.current)if(r.index>0&&r.maxKeyDelay>0){var l=r.timeLastMatched+r.maxKeyDelay;u.timeStamp<=l&&(n=!0,h=a(u,r))}else n=!0,h=a(u,r);return!n&&r.resetOnWrongKey&&(r.index=0,r.current=r.keyCodes[0]),h&&(r.timeLastMatched=u.timeStamp,r.matched=!0,r.timeMatched=u.timeStamp),h};o.exports=x}),92803:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};o.exports=E}),92612:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown"}),23345:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup"}),21957:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keycombomatch"}),44743:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"}),3771:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown-"}),46358:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup-"}),75674:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"}),95922:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ANY_KEY_DOWN:e(92612),ANY_KEY_UP:e(23345),COMBO_MATCH:e(21957),DOWN:e(44743),KEY_DOWN:e(3771),KEY_UP:e(46358),UP:e(75674)}}),51442:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:e(95922),KeyboardManager:e(78970),KeyboardPlugin:e(28846),Key:e(30472),KeyCodes:e(46032),KeyCombo:e(87960),AdvanceKeyCombo:e(66970),ProcessKeyCombo:e(68769),ResetKeyCombo:e(92803),JustDown:e(90229),JustUp:e(38796),DownDuration:e(37015),UpDuration:e(41170)}}),37015:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=50);var x=e.plugin.game.loop.time-e.timeDown;return e.isDown&&x<a};o.exports=E}),90229:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e._justDown?(e._justDown=!1,!0):!1};o.exports=E}),38796:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e._justUp?(e._justUp=!1,!0):!1};o.exports=E}),30472:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),u=e(95922),r=new a({Extends:x,initialize:function(n,l){x.call(this),this.plugin=n,this.keyCode=l,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(u.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(u.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(u.UP,this,h))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});o.exports=r}),46032:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};o.exports=E}),74600:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(46032),x={};for(var u in a)x[a[u]]=u;o.exports=x}),41170:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=50);var x=e.plugin.game.loop.time-e.timeUp;return e.isUp&&x<a};o.exports=E}),85098:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89357),u=e(8214),r=e(29747),h=new a({initialize:function(l){this.manager=l,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=r,this.onMouseDown=r,this.onMouseUp=r,this.onMouseDownWindow=r,this.onMouseUpWindow=r,this.onMouseOver=r,this.onMouseOut=r,this.onMouseWheel=r,this.pointerLockChange=r,this.isTop=!0,l.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputMouse,this.target=n.inputMouseEventTarget,this.passive=n.inputMousePassive,this.preventDefaultDown=n.inputMousePreventDefaultDown,this.preventDefaultUp=n.inputMousePreventDefaultUp,this.preventDefaultMove=n.inputMousePreventDefaultMove,this.preventDefaultWheel=n.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},requestPointerLock:function(){if(x.pointerLock){var n=this.target;n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock()}},releasePointerLock:function(){x.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var n=this.target;if(n){var l=this,c=this.manager,s=c.canvas,d=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(p){!p.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onMouseMove(p),l.preventDefaultMove&&p.preventDefault())},this.onMouseDown=function(p){d&&window.focus(),!p.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onMouseDown(p),l.preventDefaultDown&&p.target===s&&p.preventDefault())},this.onMouseDownWindow=function(p){p.sourceCapabilities&&p.sourceCapabilities.firesTouchEvents||!p.defaultPrevented&&l.enabled&&c&&c.enabled&&p.target!==s&&c.onMouseDown(p)},this.onMouseUp=function(p){!p.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onMouseUp(p),l.preventDefaultUp&&p.target===s&&p.preventDefault())},this.onMouseUpWindow=function(p){p.sourceCapabilities&&p.sourceCapabilities.firesTouchEvents||!p.defaultPrevented&&l.enabled&&c&&c.enabled&&p.target!==s&&c.onMouseUp(p)},this.onMouseOver=function(p){!p.defaultPrevented&&l.enabled&&c&&c.enabled&&c.setCanvasOver(p)},this.onMouseOut=function(p){!p.defaultPrevented&&l.enabled&&c&&c.enabled&&c.setCanvasOut(p)},this.onMouseWheel=function(p){!p.defaultPrevented&&l.enabled&&c&&c.enabled&&c.onMouseWheel(p),l.preventDefaultWheel&&p.target===s&&p.preventDefault()};var m={passive:!0};if(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mouseover",this.onMouseOver,m),n.addEventListener("mouseout",this.onMouseOut,m),this.preventDefaultWheel?n.addEventListener("wheel",this.onMouseWheel,{passive:!1}):n.addEventListener("wheel",this.onMouseWheel,m),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,m),window.top.addEventListener("mouseup",this.onMouseUpWindow,m)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,m),window.addEventListener("mouseup",this.onMouseUpWindow,m),this.isTop=!1}x.pointerLock&&(this.pointerLockChange=function(p){var g=l.target;l.locked=document.pointerLockElement===g||document.mozPointerLockElement===g||document.webkitPointerLockElement===g,c.onPointerLockChange(p)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),n.removeEventListener("mouseover",this.onMouseOver),n.removeEventListener("mouseout",this.onMouseOut),window&&(n=this.isTop?window.top:window,n.removeEventListener("mousedown",this.onMouseDownWindow),n.removeEventListener("mouseup",this.onMouseUpWindow)),x.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=h}),87078:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={MouseManager:e(85098)}}),36210:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(8214),u=e(29747),r=new a({initialize:function(n){this.manager=n,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=u,this.onTouchStartWindow=u,this.onTouchMove=u,this.onTouchEnd=u,this.onTouchEndWindow=u,this.onTouchCancel=u,this.onTouchCancelWindow=u,this.isTop=!0,n.events.once(x.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this.target;if(h){var n=this,l=this.manager,c=l.canvas,s=window&&window.focus&&l.game.config.autoFocus;this.onTouchMove=function(g){!g.defaultPrevented&&n.enabled&&l&&l.enabled&&(l.onTouchMove(g),n.capture&&g.cancelable&&g.preventDefault())},this.onTouchStart=function(g){s&&window.focus(),!g.defaultPrevented&&n.enabled&&l&&l.enabled&&(l.onTouchStart(g),n.capture&&g.cancelable&&g.target===c&&g.preventDefault())},this.onTouchStartWindow=function(g){!g.defaultPrevented&&n.enabled&&l&&l.enabled&&g.target!==c&&l.onTouchStart(g)},this.onTouchEnd=function(g){!g.defaultPrevented&&n.enabled&&l&&l.enabled&&(l.onTouchEnd(g),n.capture&&g.cancelable&&g.target===c&&g.preventDefault())},this.onTouchEndWindow=function(g){!g.defaultPrevented&&n.enabled&&l&&l.enabled&&g.target!==c&&l.onTouchEnd(g)},this.onTouchCancel=function(g){!g.defaultPrevented&&n.enabled&&l&&l.enabled&&(l.onTouchCancel(g),n.capture&&g.preventDefault())},this.onTouchCancelWindow=function(g){!g.defaultPrevented&&n.enabled&&l&&l.enabled&&l.onTouchCancel(g)};var d=this.capture,m={passive:!0},p={passive:!1};if(h.addEventListener("touchstart",this.onTouchStart,d?p:m),h.addEventListener("touchmove",this.onTouchMove,d?p:m),h.addEventListener("touchend",this.onTouchEnd,d?p:m),h.addEventListener("touchcancel",this.onTouchCancel,d?p:m),window&&l.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,p),window.top.addEventListener("touchend",this.onTouchEndWindow,p),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,p)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,p),window.addEventListener("touchend",this.onTouchEndWindow,p),window.addEventListener("touchcancel",this.onTouchCancelWindow,p),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),window&&(h=this.isTop?window.top:window,h.removeEventListener("touchstart",this.onTouchStartWindow),h.removeEventListener("touchend",this.onTouchEndWindow),h.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=r}),95618:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TouchManager:e(36210)}}),41299:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(54899),r=e(95540),h=e(98356),n=e(3374),l=e(84376),c=e(92638),s=new a({initialize:function(m,p){if(this.loader=m,this.cache=r(p,"cache",!1),this.type=r(p,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=r(p,"key",!1);var g=this.key;if(m.prefix&&m.prefix!==""&&(this.key=m.prefix+g),!this.key)throw new Error("Invalid File key: "+this.key);var T=r(p,"url");T===void 0?T=m.path+g+"."+r(p,"extension",""):typeof T=="string"&&!T.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(T=m.path+T),this.url=T,this.src="",this.xhrSettings=c(r(p,"responseType",void 0)),r(p,"xhrSettings",!1)&&(this.xhrSettings=n(this.xhrSettings,r(p,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?x.FILE_POPULATED:x.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=r(p,"config",{}),this.multiFile,this.linkFile,this.base64=typeof T=="string"&&T.indexOf("data:")===0,this.retryAttempts=r(p,"maxRetries",m.maxRetries)},setLink:function(d){this.linkFile=d,d.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===x.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=x.FILE_LOADING,this.src=h(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=l(this,this.loader.xhr)}},onLoad:function(d,m){var p=d.responseURL&&this.loader.localSchemes.some(function(S){return d.responseURL.indexOf(S)===0}),g=p&&m.target.status===0,T=!(m.target&&m.target.status!==200)||g;d.readyState===4&&d.status>=400&&d.status<=599&&(T=!1),this.state=x.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,T)},onBase64Load:function(d){this.xhrLoader=d,this.state=x.FILE_LOADED,this.percentComplete=1,this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(d){d.lengthComputable&&(this.bytesLoaded=d.loaded,this.bytesTotal=d.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=x.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=x.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=x.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(d){if(this.state!==x.FILE_PENDING_DESTROY){d===void 0&&(d=this.data);var m=this.key,p=this.type;this.loader.emit(u.FILE_COMPLETE,m,p,d),this.loader.emit(u.FILE_KEY_COMPLETE+p+"-"+m,m,p,d),this.loader.flagForRemoval(this),this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});s.createObjectURL=function(d,m,p){if(typeof URL=="function")d.src=URL.createObjectURL(m);else{var g=new FileReader;g.onload=function(){d.removeAttribute("crossOrigin"),d.src="data:"+(m.type||p)+";base64,"+g.result.split(",")[1]},g.onerror=d.onerror,g.readAsDataURL(m)}},s.revokeObjectURL=function(d){typeof URL=="function"&&URL.revokeObjectURL(d.src)},o.exports=s}),74099:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={},e={install:function(a){for(var x in E)a[x]=E[x]},register:function(a,x){E[a]=x},destroy:function(){E={}}};o.exports=e}),98356:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:a+e.url:!1};o.exports=E}),74261:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(35072),r=e(50792),h=e(54899),n=e(74099),l=e(95540),c=e(35154),s=e(41212),d=e(37277),m=e(44594),p=e(92638),g=new a({Extends:r,initialize:function(S){r.call(this);var w=S.sys.game.config,A=S.sys.settings.loader;this.scene=S,this.systems=S.sys,this.cacheManager=S.sys.cache,this.textureManager=S.sys.textures,this.sceneManager=S.sys.game.scene,n.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(A,"baseURL",w.loaderBaseURL)),this.setPath(l(A,"path",w.loaderPath)),this.setPrefix(l(A,"prefix",w.loaderPrefix)),this.maxParallelDownloads=l(A,"maxParallelDownloads",w.loaderMaxParallelDownloads),this.xhr=p(l(A,"responseType",w.loaderResponseType),l(A,"async",w.loaderAsync),l(A,"user",w.loaderUser),l(A,"password",w.loaderPassword),l(A,"timeout",w.loaderTimeout),l(A,"withCredentials",w.loaderWithCredentials)),this.crossOrigin=l(A,"crossOrigin",w.loaderCrossOrigin),this.imageLoadType=l(A,"imageLoadType",w.loaderImageLoadType),this.localSchemes=l(A,"localScheme",w.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new u,this.inflight=new u,this.queue=new u,this._deleteQueue=new u,this.totalFailed=0,this.totalComplete=0,this.state=x.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=l(A,"maxRetries",w.loaderMaxRetries),S.sys.events.once(m.BOOT,this.boot,this),S.sys.events.on(m.START,this.pluginStart,this)},boot:function(){this.systems.events.once(m.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(m.SHUTDOWN,this.shutdown,this)},setBaseURL:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.baseURL=T,this},setPath:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.path=T,this},setPrefix:function(T){return T===void 0&&(T=""),this.prefix=T,this},setCORS:function(T){return this.crossOrigin=T,this},addFile:function(T){Array.isArray(T)||(T=[T]);for(var S=0;S<T.length;S++){var w=T[S];this.keyExists(w)||(this.list.set(w),this.emit(h.ADD,w.key,w.type,this,w),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(T){var S=T.hasCacheConflict();return S||this.list.iterate(function(w){if(w.type===T.type&&w.key===T.key)return S=!0,!1}),!S&&this.isLoading()&&(this.inflight.iterate(function(w){if(w.type===T.type&&w.key===T.key)return S=!0,!1}),this.queue.iterate(function(w){if(w.type===T.type&&w.key===T.key)return S=!0,!1})),S},addPack:function(T,S){if(typeof S=="string"){var w=c(T,S);w&&(T={packKey:w})}var A=0,M=this.baseURL,R=this.path,P=this.prefix;for(var b in T)if(Object.prototype.hasOwnProperty.call(T,b)){var F=T[b],I=l(F,"baseURL",M),L=l(F,"path",R),D=l(F,"prefix",P),O=l(F,"files",null),z=l(F,"defaultType","void");if(Array.isArray(O)){this.setBaseURL(I),this.setPath(L),this.setPrefix(D);for(var W=0;W<O.length;W++){var X=O[W],_=X.hasOwnProperty("type")?X.type:z;this[_]&&(this[_](X),A++)}}}return this.setBaseURL(M),this.setPath(R),this.setPrefix(P),A>0},removePack:function(T,S){var w=this.systems.anims,A=this.cacheManager,M=this.textureManager,R={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},P;if(s(T))P=T;else if(P=A.json.get(T),!P){console.warn("Asset Pack not found in JSON cache:",T);return}S&&(P={_:P[S]});for(var b in P){var F=P[b],I=l(F,"prefix",""),L=l(F,"files"),D=l(F,"defaultType");if(Array.isArray(L))for(var O=0;O<L.length;O++){var z=L[O],W=z.hasOwnProperty("type")?z.type:D;if(!W){console.warn("No type:",z);continue}var X=I+z.key;if(W==="animation"&&w.remove(X),!((W==="aseprite"||W==="atlas"||W==="atlasXML"||W==="htmlTexture"||W==="image"||W==="multiatlas"||W==="spritesheet"||W==="svg"||W==="texture"||W==="unityAtlas")&&(M.remove(X),!R[W]))){if(W==="pack"){this.removePack(X,z.dataKey);continue}if(W==="spine"){var _=A.custom.spine.get(X);if(!_)continue;var U=_.prefix===void 0?"":_.prefix;A.custom.spine.remove(X);var G=A.custom.spineTextures.get(X);if(!G)continue;A.custom.spineTextures.remove(X);for(var N=0;N<G.pages.length;N++){var H=G.pages[N],V=U+H.name,$=X+":"+V;M.exists($)?M.remove($):M.remove(V)}}var j=R[W];if(j!==null){if(!j){console.warn("Unknown type:",W);continue}var k=A[j];k.remove(X)}}}}},isLoading:function(){return this.state===x.LOADER_LOADING||this.state===x.LOADER_PROCESSING},isReady:function(){return this.state===x.LOADER_IDLE||this.state===x.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=x.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(m.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===x.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(T){if((T.state===x.FILE_POPULATED||T.state===x.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(T),this.list.delete(T),T.crossOrigin||(T.crossOrigin=this.crossOrigin),T.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(T,S){this.inflight&&(this.inflight.delete(T),this.updateProgress(),S?(this.totalComplete++,this.queue.set(T),this.emit(h.FILE_LOAD,T),T.onProcess()):(this.totalFailed++,this._deleteQueue.set(T),this.emit(h.FILE_LOAD_ERROR,T),this.fileProcessComplete(T)))},fileProcessComplete:function(T){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(T.state===x.FILE_ERRORED?T.multiFile&&T.multiFile.onFileFailed(T):T.state===x.FILE_COMPLETE&&(T.multiFile?T.multiFile.isReadyToProcess()&&(T.multiFile.addToCache(),T.multiFile.pendingDestroy()):(T.addToCache(),T.pendingDestroy())),this.queue.delete(T),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=x.LOADER_COMPLETE,this.systems.events.off(m.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(T){this._deleteQueue.set(T)},saveJSON:function(T,S){return this.save(JSON.stringify(T),S)},save:function(T,S,w){S===void 0&&(S="file.json"),w===void 0&&(w="application/json");var A=new Blob([T],{type:w}),M=URL.createObjectURL(A),R=document.createElement("a");return R.download=S,R.textContent="Download "+S,R.href=M,R.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var T=this.systems.game.config,S=this.systems.settings.loader;this.setBaseURL(l(S,"baseURL",T.loaderBaseURL)),this.setPath(l(S,"path",T.loaderPath)),this.setPrefix(l(S,"prefix",T.loaderPrefix)),this.state=x.LOADER_IDLE},shutdown:function(){this.reset(),this.state=x.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(m.UPDATE,this.update,this),this.systems.events.off(m.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=x.LOADER_DESTROYED,this.systems.events.off(m.UPDATE,this.update,this),this.systems.events.off(m.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});d.register("Loader",g,"load"),o.exports=g}),3374:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(92638),u=function(r,h){var n=r===void 0?x():a({},r);if(h)for(var l in h)h[l]!==void 0&&(n[l]=h[l]);return n};o.exports=u}),26430:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(54899),r=new a({initialize:function(n,l,c,s){var d=[];s.forEach(function(g){g&&d.push(g)}),this.loader=n,this.type=l,this.key=c;var m=this.key;n.prefix&&n.prefix!==""&&(this.key=n.prefix+m),this.multiKeyIndex=n.multiKeyIndex++,this.files=d,this.state=x.FILE_PENDING,this.complete=!1,this.pending=d.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var p=0;p<d.length;p++)d[p].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(h){return this.files.push(h),h.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(h){var n=this.files.indexOf(h);n!==-1&&this.pending--},onFileFailed:function(h){var n=this.files.indexOf(h);n!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,h.type,h.key))},pendingDestroy:function(){if(this.state!==x.FILE_PENDING_DESTROY){var h=this.key,n=this.type;this.loader.emit(u.FILE_COMPLETE,h,n),this.loader.emit(u.FILE_KEY_COMPLETE+n+"-"+h,h,n),this.loader.flagForRemoval(this);for(var l=0;l<this.files.length;l++)this.files[l].pendingDestroy();this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});o.exports=r}),84376:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3374),x=function(u,r){var h=a(r,u.xhrSettings);if(u.base64){var n=u.url.split(";base64,").pop()||u.url.split(",").pop(),l;u.xhrSettings.responseType==="arraybuffer"?l={response:Uint8Array.from(atob(n),function(d){return d.charCodeAt(0)}).buffer}:l={responseText:atob(n)},u.onBase64Load(l);return}var c=new XMLHttpRequest;if(c.open("GET",u.src,h.async,h.user,h.password),c.responseType=u.xhrSettings.responseType,c.timeout=h.timeout,h.headers)for(var s in h.headers)c.setRequestHeader(s,h.headers[s]);return h.header&&h.headerValue&&c.setRequestHeader(h.header,h.headerValue),h.requestedWith&&c.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&c.overrideMimeType(h.overrideMimeType),h.withCredentials&&(c.withCredentials=!0),c.onload=u.onLoad.bind(u,c),c.onerror=u.onError.bind(u,c),c.onprogress=u.onProgress.bind(u),c.ontimeout=u.onError.bind(u,c),c.send(),c};o.exports=x}),92638:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r,h){return e===void 0&&(e=""),a===void 0&&(a=!0),x===void 0&&(x=""),u===void 0&&(u=""),r===void 0&&(r=0),h===void 0&&(h=!1),{responseType:e,async:a,user:x,password:u,timeout:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}};o.exports=E}),23906:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};o.exports=E}),42155:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addfile"}),38991:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"}),27540:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete"}),87464:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete-"}),94486:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loaderror"}),13035:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="load"}),38144:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fileprogress"}),97520:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postprocess"}),85595:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="progress"}),55680:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"}),54899:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:e(42155),COMPLETE:e(38991),FILE_COMPLETE:e(27540),FILE_KEY_COMPLETE:e(87464),FILE_LOAD_ERROR:e(94486),FILE_LOAD:e(13035),FILE_PROGRESS:e(38144),POST_PROCESS:e(97520),PROGRESS:e(85595),START:e(55680)}}),14135:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(518),r=e(54899),h=new a({Extends:u,initialize:function(l,c,s,d,m){u.call(this,l,c,s,d,m),this.type="animationJSON"},onProcess:function(){this.loader.once(r.POST_PROCESS,this.onLoadComplete,this),u.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});x.register("animation",function(n,l,c,s){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new h(this,n[d]));else this.addFile(new h(this,n,l,s,c));return this}),o.exports=h}),76272:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(95540),r=e(19550),h=e(41212),n=e(518),l=e(26430),c=new a({Extends:l,initialize:function(d,m,p,g,T,S){var w,A;if(h(m)){var M=m;m=u(M,"key"),w=new r(d,{key:m,url:u(M,"textureURL"),extension:u(M,"textureExtension","png"),normalMap:u(M,"normalMap"),xhrSettings:u(M,"textureXhrSettings")}),A=new n(d,{key:m,url:u(M,"atlasURL"),extension:u(M,"atlasExtension","json"),xhrSettings:u(M,"atlasXhrSettings")})}else w=new r(d,m,p,T),A=new n(d,m,g,S);w.linkFile?l.call(this,d,"atlasjson",m,[w,A,w.linkFile]):l.call(this,d,"atlasjson",m,[w,A])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],d=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(s.key,s.data,d.data,m),d.addToCache(),this.complete=!0}}});x.register("aseprite",function(s,d,m,p,g){var T;if(Array.isArray(s))for(var S=0;S<s.length;S++)T=new c(this,s[S]),this.addFile(T.files);else T=new c(this,s,d,m,p,g),this.addFile(T.files);return this}),o.exports=c}),38734:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(95540),r=e(19550),h=e(41212),n=e(518),l=e(26430),c=new a({Extends:l,initialize:function(d,m,p,g,T,S){var w,A;if(h(m)){var M=m;m=u(M,"key"),w=new r(d,{key:m,url:u(M,"textureURL"),extension:u(M,"textureExtension","png"),normalMap:u(M,"normalMap"),xhrSettings:u(M,"textureXhrSettings")}),A=new n(d,{key:m,url:u(M,"atlasURL"),extension:u(M,"atlasExtension","json"),xhrSettings:u(M,"atlasXhrSettings")})}else w=new r(d,m,p,T),A=new n(d,m,g,S);w.linkFile?l.call(this,d,"atlasjson",m,[w,A,w.linkFile]):l.call(this,d,"atlasjson",m,[w,A])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],d=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(s.key,s.data,d.data,m),this.complete=!0}}});x.register("atlas",function(s,d,m,p,g){var T;if(Array.isArray(s))for(var S=0;S<s.length;S++)T=new c(this,s[S]),this.addFile(T.files);else T=new c(this,s,d,m,p,g),this.addFile(T.files);return this}),o.exports=c}),74599:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(95540),r=e(19550),h=e(41212),n=e(26430),l=e(57318),c=new a({Extends:n,initialize:function(d,m,p,g,T,S){var w,A;if(h(m)){var M=m;m=u(M,"key"),w=new r(d,{key:m,url:u(M,"textureURL"),extension:u(M,"textureExtension","png"),normalMap:u(M,"normalMap"),xhrSettings:u(M,"textureXhrSettings")}),A=new l(d,{key:m,url:u(M,"atlasURL"),extension:u(M,"atlasExtension","xml"),xhrSettings:u(M,"atlasXhrSettings")})}else w=new r(d,m,p,T),A=new l(d,m,g,S);w.linkFile?n.call(this,d,"atlasxml",m,[w,A,w.linkFile]):n.call(this,d,"atlasxml",m,[w,A])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],d=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(s.key,s.data,d.data,m),this.complete=!0}}});x.register("atlasXML",function(s,d,m,p,g){var T;if(Array.isArray(s))for(var S=0;S<s.length;S++)T=new c(this,s[S]),this.addFile(T.files);else T=new c(this,s,d,m,p,g),this.addFile(T.files);return this}),o.exports=c}),21097:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(89749),l=e(41212),c=new a({Extends:u,initialize:function(d,m,p,g,T){if(l(m)){var S=m;m=h(S,"key"),g=h(S,"xhrSettings"),T=h(S,"context",T)}var w={type:"audio",cache:d.cacheManager.audio,extension:p.type,responseType:"arraybuffer",key:m,url:p.url,xhrSettings:g,config:{context:T}};u.call(this,d,w)},onProcess:function(){this.state=x.FILE_PROCESSING;var s=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(d){s.data=d,s.onProcessComplete()},function(d){console.error("Error decoding audio: "+s.key+" - ",d?d.message:null),s.onProcessError()}),this.config.context=null}});c.create=function(s,d,m,p,g){var T=s.systems.game,S=T.config.audio,w=T.device.audio;l(d)&&(m=h(d,"url",[]),p=h(d,"config",{}));var A=c.getAudioURL(T,m);return A?w.webAudio&&!S.disableWebAudio?new c(s,d,A,g,T.sound.context):new n(s,d,A,p):(console.warn('No audio URLs for "%s" can play on this device',d),null)},c.getAudioURL=function(s,d){Array.isArray(d)||(d=[d]);for(var m=0;m<d.length;m++){var p=h(d[m],"url",d[m]);if(p.indexOf("blob:")===0||p.indexOf("data:")===0)return{url:p,type:""};var g=p.match(/\.([a-zA-Z0-9]+)($|\?)/);if(g=h(d[m],"type",g?g[1]:"").toLowerCase(),s.device.audio[g])return{url:p,type:g}}return null},r.register("audio",function(s,d,m,p){var g=this.systems.game,T=g.config.audio,S=g.device.audio;if(T.noAudio||!S.webAudio&&!S.audioData)return this;var w;if(Array.isArray(s))for(var A=0;A<s.length;A++)w=c.create(this,s[A]),w&&this.addFile(w);else w=c.create(this,s,d,m,p),w&&this.addFile(w);return this}),o.exports=c}),89524:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21097),x=e(83419),u=e(74099),r=e(95540),h=e(41212),n=e(518),l=e(26430),c=new x({Extends:l,initialize:function(d,m,p,g,T,S,w){if(h(m)){var A=m;m=r(A,"key"),p=r(A,"jsonURL"),g=r(A,"audioURL"),T=r(A,"audioConfig"),S=r(A,"audioXhrSettings"),w=r(A,"jsonXhrSettings")}var M;if(!g)M=new n(d,m,p,w),l.call(this,d,"audiosprite",m,[M]),this.config.resourceLoad=!0,this.config.audioConfig=T,this.config.audioXhrSettings=S;else{var R=a.create(d,m,g,T,S);R&&(M=new n(d,m,p,w),l.call(this,d,"audiosprite",m,[R,M]),this.config.resourceLoad=!1)}},onFileComplete:function(s){var d=this.files.indexOf(s);if(d!==-1&&(this.pending--,this.config.resourceLoad&&s.type==="json"&&s.data.hasOwnProperty("resources"))){var m=s.data.resources,p=r(this.config,"audioConfig"),g=r(this.config,"audioXhrSettings"),T=a.create(this.loader,s.key,m,p,g);T&&(this.addToMultiFile(T),this.loader.addFile(T))}},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],d=this.files[1];s.addToCache(),d.addToCache(),this.complete=!0}}});u.register("audioSprite",function(s,d,m,p,g,T){var S=this.systems.game,w=S.config.audio,A=S.device.audio;if(w&&w.noAudio||!A.webAudio&&!A.audioData)return this;var M;if(Array.isArray(s))for(var R=0;R<s.length;R++)M=new c(this,s[R]),M.files&&this.addFile(M.files);else M=new c(this,s,d,m,p,g,T),M.files&&this.addFile(M.files);return this})}),85722:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p,g){var T="bin";if(n(d)){var S=d;d=h(S,"key"),m=h(S,"url"),p=h(S,"xhrSettings"),T=h(S,"extension",T),g=h(S,"dataType",g)}var w={type:"binary",cache:s.cacheManager.binary,extension:T,responseType:"arraybuffer",key:d,url:m,xhrSettings:p,config:{dataType:g}};u.call(this,s,w)},onProcess:function(){this.state=x.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});r.register("binary",function(c,s,d,m){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new l(this,c[p]));else this.addFile(new l(this,c,s,m,d));return this}),o.exports=l}),97025:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(95540),r=e(19550),h=e(41212),n=e(26430),l=e(21859),c=e(57318),s=new a({Extends:n,initialize:function(m,p,g,T,S,w){var A,M;if(h(p)){var R=p;p=u(R,"key"),A=new r(m,{key:p,url:u(R,"textureURL"),extension:u(R,"textureExtension","png"),normalMap:u(R,"normalMap"),xhrSettings:u(R,"textureXhrSettings")}),M=new c(m,{key:p,url:u(R,"fontDataURL"),extension:u(R,"fontDataExtension","xml"),xhrSettings:u(R,"fontDataXhrSettings")})}else A=new r(m,p,g,S),M=new c(m,p,T,w);A.linkFile?n.call(this,m,"bitmapfont",p,[A,M,A.linkFile]):n.call(this,m,"bitmapfont",p,[A,M])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],m=this.files[1];d.addToCache();var p=d.cache.get(d.key),g=l(m.data,d.cache.getFrame(d.key),0,0,p);this.loader.cacheManager.bitmapFont.add(d.key,{data:g,texture:d.key,frame:null}),this.complete=!0}}});x.register("bitmapFont",function(d,m,p,g,T){var S;if(Array.isArray(d))for(var w=0;w<d.length;w++)S=new s(this,d[w]),this.addFile(S.files);else S=new s(this,d,m,p,g,T),this.addFile(S.files);return this}),o.exports=s}),16024:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p){var g="css";if(n(d)){var T=d;d=h(T,"key"),m=h(T,"url"),p=h(T,"xhrSettings"),g=h(T,"extension",g)}var S={type:"script",cache:!1,extension:g,responseType:"text",key:d,url:m,xhrSettings:p};u.call(this,s,S)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("css",function(c,s,d){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new l(this,c[m]));else this.addFile(new l(this,c,s,d));return this}),o.exports=l}),69559:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38734),x=e(85722),u=e(83419),r=e(74099),h=e(95540),n=e(19550),l=e(41212),c=e(518),s=e(31403),d=e(46975),m=e(59327),p=e(26430),g=e(82038),T=e(55222),S=new u({Extends:p,initialize:function(A,M,R,P){if(R.multiAtlasURL){var b=new c(A,{key:M,url:R.multiAtlasURL,xhrSettings:P,config:R});p.call(this,A,"texture",M,[b])}else{var F=R.textureURL.substr(R.textureURL.length-3);R.type||(R.type=F.toLowerCase()==="ktx"?"KTX":"PVR");var I=new x(A,{key:M,url:R.textureURL,extension:F,xhrSettings:P,config:R});if(R.atlasURL){var L=new c(A,{key:M,url:R.atlasURL,xhrSettings:P,config:R});p.call(this,A,"texture",M,[I,L])}else p.call(this,A,"texture",M,[I])}this.config=R},onFileComplete:function(w){var A=this.files.indexOf(w);if(A!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(w.type==="json"&&w.data.hasOwnProperty("textures")){var M=w.data.textures,R=this.config,P=this.loader,b=P.baseURL,F=P.path,I=P.prefix,L=h(R,"multiBaseURL",this.baseURL),D=h(R,"multiPath",this.path),O=h(R,"prefix",this.prefix),z=h(R,"textureXhrSettings");L&&P.setBaseURL(L),D&&P.setPath(D),O&&P.setPrefix(O);for(var W=0;W<M.length;W++){var X=M[W].image,_="CMA"+this.multiKeyIndex+"_"+X,U=new x(P,_,X,z);if(this.addToMultiFile(U),P.addFile(U),M[W].normalMap){var G=new x(P,_,M[W].normalMap,z);G.type="normalMap",U.setLink(G),this.addToMultiFile(G),P.addFile(G)}}P.setBaseURL(b),P.setPath(F),P.setPrefix(I)}}},addToCache:function(){function w(L){console.warn('Compressed Texture Invalid: "'+b.key+'". '+L)}if(this.isReadyToProcess()){var A=this.config;if(A.multiAtlasURL)this.addMultiToCache();else{var M=this.loader.systems.renderer,R=this.loader.textureManager,P,b=this.files[0],F=this.files[1];if(A.type==="PVR"?P=g(b.data):A.type==="KTX"&&(P=s(b.data),P||w("KTX file contains unsupported format.")),P&&!T(P)&&(w("Texture dimensions failed verification. Check the texture format specifications for "+A.format+" 0x"+P.internalFormat.toString(16)+"."),P=null),P&&!M.supportsCompressedTexture(A.format,P.internalFormat)&&(w("Texture format "+A.format+" with internal format "+P.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),P=null),P){P.format=M.getCompressedTextureName(A.format,P.internalFormat);var I=F&&F.data?F.data:null;R.addCompressedTexture(b.key,P,I)}}this.complete=!0}},addMultiToCache:function(){for(var w=this.config,A=this.files[0],M=[],R=[],P=[],b=this.loader.systems.renderer,F=this.loader.textureManager,I,L=1;L<this.files.length;L++){var D=this.files[L];if(D.type!=="normalMap")for(var O=D.key.indexOf("_"),z=D.key.substr(O+1),W=D.data,X=0;X<A.data.textures.length;X++){var _=A.data.textures[X];if(_.image===z){w.type==="PVR"?I=g(W):w.type==="KTX"&&(I=s(W)),I&&b.supportsCompressedTexture(w.format,I.internalFormat)&&(I.format=b.getCompressedTextureName(w.format,I.internalFormat),R.push(I),M.push(_),D.linkFile&&P.push(D.linkFile.data));break}}}P.length===0&&(P=void 0),F.addAtlasJSONArray(this.key,R,M,P),this.complete=!0}});r.register("texture",function(w,A,M){var R=this.systems.renderer,P=function(F,I,L,D){var O={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(l(I)){var z=I;I=h(z,"key"),L=h(z,"url"),D=h(z,"xhrSettings")}var W=!1;for(var X in L)if(R.supportsCompressedTexture(X)){var _=L[X];typeof _=="string"?O.textureURL=_:O=d(_,O),O.format=X.toUpperCase(),W=!0;break}if(!W)console.warn("No supported compressed texture format or IMG fallback",I);else if(O.format==="IMG"){var U,G;O.multiAtlasURL?(G=new m(F,I,O.multiAtlasURL,O.multiPath,O.multiBaseURL,D),U=G.files):O.atlasURL?(G=new a(F,I,O.textureURL,O.atlasURL,D),U=G.files):U=new n(F,I,O.textureURL,D),F.addFile(U)}else{var N=new S(F,I,O,D);F.addFile(N.files)}};if(Array.isArray(w))for(var b=0;b<w.length;b++)P(this,w[b]);else P(this,w,A,M);return this}),o.exports=S}),87674:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(98356),l=e(41212),c=new a({Extends:u,initialize:function(d,m,p,g,T,S){var w="ttf";if(l(m)){var A=m;m=h(A,"key"),p=h(A,"url"),g=h(A,"format","truetype"),T=h(A,"descriptors",null),S=h(A,"xhrSettings"),w=h(A,"extension",w)}else g===void 0&&(g="truetype");var M={type:"font",cache:!1,extension:w,responseType:"text",key:m,url:p,xhrSettings:S};u.call(this,d,M),this.data={format:g,descriptors:T},this.state=x.FILE_POPULATED},onProcess:function(){this.state=x.FILE_PROCESSING,this.src=n(this,this.loader.baseURL);var s,d=this.key,m="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?s=new FontFace(d,m,this.data.descriptors):s=new FontFace(d,m);var p=this;s.load().then(function(){document.fonts.add(s),document.body.classList.add("fonts-loaded"),p.onProcessComplete()}).catch(function(){console.warn("Font failed to load",m),p.onProcessComplete()})}});r.register("font",function(s,d,m,p,g){if(Array.isArray(s))for(var T=0;T<s.length;T++)this.addFile(new c(this,s[T]));else this.addFile(new c(this,s,d,m,p,g));return this}),o.exports=c}),47931:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=e(73894),c=new a({Extends:u,initialize:function(d,m,p,g,T){var S="glsl";if(n(m)){var w=m;m=h(w,"key"),p=h(w,"url"),g=h(w,"shaderType","fragment"),T=h(w,"xhrSettings"),S=h(w,"extension",S)}else g===void 0&&(g="fragment");var A={type:"glsl",cache:d.cacheManager.shader,extension:S,responseType:"text",key:m,url:p,config:{shaderType:g},xhrSettings:T};u.call(this,d,A)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var s=this.data.split(`
`),d=this.extractBlock(s,0);if(d)for(;d;){var m=this.getShaderName(d.header),p=this.getShaderType(d.header),g=this.getShaderUniforms(d.header),T=d.shader;if(this.cache.has(m)){var S=this.cache.get(m);p==="fragment"?S.fragmentSrc=T:S.vertexSrc=T,S.uniforms||(S.uniforms=g)}else p==="fragment"?this.cache.add(m,new l(m,T,"",g)):this.cache.add(m,new l(m,"",T,g));d=this.extractBlock(s,d.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data))},getShaderName:function(s){for(var d=0;d<s.length;d++){var m=s[d].trim();if(m.substring(0,5)==="name:")return m.substring(5).trim()}return this.key},getShaderType:function(s){for(var d=0;d<s.length;d++){var m=s[d].trim();if(m.substring(0,5)==="type:")return m.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(s){for(var d={},m=0;m<s.length;m++){var p=s[m].trim();if(p.substring(0,8)==="uniform."){var g=p.indexOf(":");if(g){var T=p.substring(8,g);try{d[T]=JSON.parse(p.substring(g+1))}catch{console.warn("Invalid uniform JSON: "+T)}}}}return d},extractBlock:function(s,d){for(var m=-1,p=-1,g=-1,T=!1,S=!1,w=[],A=[],M=d;M<s.length;M++){var R=s[M].trim();if(R==="---")if(m===-1)m=M,T=!0;else if(T)p=M,T=!1,S=!0;else{S=!1;break}else T?w.push(R):S&&(A.push(R),g=M)}return!T&&p!==-1?{header:w,shader:A.join(`
`),offset:g}:null}});r.register("glsl",function(s,d,m,p){if(Array.isArray(s))for(var g=0;g<s.length;g++)this.addFile(new c(this,s[g]));else this.addFile(new c(this,s,d,m,p));return this}),o.exports=c}),89749:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(54899),u=e(41299),r=e(95540),h=e(98356),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p){if(n(d)){var g=d;d=r(g,"key"),p=r(g,"config",p)}var T={type:"audio",cache:s.cacheManager.audio,extension:m.type,key:d,url:m.url,config:p};u.call(this,s,T),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var s=this.data[c];s.oncanplaythrough=null,s.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var s=c.target;s.oncanplaythrough=null,s.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(x.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var s=0;s<c;s++){var d=new Audio;d.dataset||(d.dataset={}),d.dataset.name=this.key+("0"+s).slice(-2),d.dataset.used="false",this.locked?d.dataset.locked="true":(d.dataset.locked="false",d.preload="auto",d.oncanplaythrough=this.onProgress.bind(this),d.onerror=this.onError.bind(this)),this.data.push(d)}for(s=0;s<this.data.length;s++)d=this.data[s],d.src=h(this,this.loader.baseURL),this.locked||d.load();this.locked&&setTimeout(this.onLoad.bind(this))}});o.exports=l}),88470:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p){var g="html";if(n(d)){var T=d;d=h(T,"key"),m=h(T,"url"),p=h(T,"xhrSettings"),g=h(T,"extension",g)}var S={type:"text",cache:s.cacheManager.html,extension:g,responseType:"text",key:d,url:m,xhrSettings:p};u.call(this,s,S)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("html",function(c,s,d){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new l(this,c[m]));else this.addFile(new l(this,c,s,d));return this}),o.exports=l}),14643:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p,g,T){p===void 0&&(p=512),g===void 0&&(g=512);var S="html";if(n(d)){var w=d;d=h(w,"key"),m=h(w,"url"),T=h(w,"xhrSettings"),S=h(w,"extension",S),p=h(w,"width",p),g=h(w,"height",g)}var A={type:"html",cache:s.textureManager,extension:S,responseType:"text",key:d,url:m,xhrSettings:T,config:{width:p,height:g}};u.call(this,s,A)},onProcess:function(){this.state=x.FILE_PROCESSING;var c=this.config.width,s=this.config.height,d=[];d.push('<svg width="'+c+'px" height="'+s+'px" viewBox="0 0 '+c+" "+s+'" xmlns="http://www.w3.org/2000/svg">'),d.push('<foreignObject width="100%" height="100%">'),d.push('<body xmlns="http://www.w3.org/1999/xhtml">'),d.push(this.xhrLoader.responseText),d.push("</body>"),d.push("</foreignObject>"),d.push("</svg>");var m=[d.join(`
`)],p=this;try{var g=new window.Blob(m,{type:"image/svg+xml;charset=utf-8"})}catch{p.state=x.FILE_ERRORED,p.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){u.revokeObjectURL(p.data),p.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(p.data),p.onProcessError()},u.createObjectURL(this.data,g,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("htmlTexture",function(c,s,d,m,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new l(this,c[g]));else this.addFile(new l(this,c,s,d,m,p));return this}),o.exports=l}),19550:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=e(98356),c=new a({Extends:u,initialize:function s(d,m,p,g,T){var S="png",w;if(n(m)){var A=m;m=h(A,"key"),p=h(A,"url"),w=h(A,"normalMap"),g=h(A,"xhrSettings"),S=h(A,"extension",S),T=h(A,"frameConfig")}Array.isArray(p)&&(w=p[1],p=p[0]);var M={type:"image",cache:d.textureManager,extension:S,responseType:"blob",key:m,url:p,xhrSettings:g,config:T};if(u.call(this,d,M),w){var R=new s(d,this.key,w,g,T);R.type="normalMap",this.setLink(R),d.addFile(R)}this.useImageElementLoad=d.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var s=this;this.data.onload=function(){u.revokeObjectURL(s.data),s.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(s.data),s.onProcessError()},u.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var s=this.state;this.state=x.FILE_PROCESSING,s===x.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=x.FILE_LOADING,this.src=l(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var s=this;this.data.onload=function(){s.state=x.FILE_LOADED,s.loader.nextFile(s,!0)},this.data.onerror=function(){s.loader.nextFile(s,!1)},this.data.src=this.src},addToCache:function(){var s=this.linkFile;s?s.state>=x.FILE_COMPLETE&&(s.type==="spritesheet"?s.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,s.data,this.data):this.cache.addImage(this.key,this.data,s.data)):this.cache.addImage(this.key,this.data)}});r.register("image",function(s,d,m){if(Array.isArray(s))for(var p=0;p<s.length;p++)this.addFile(new c(this,s[p]));else this.addFile(new c(this,s,d,m));return this}),o.exports=c}),518:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(35154),l=e(41212),c=new a({Extends:u,initialize:function(d,m,p,g,T){var S="json";if(l(m)){var w=m;m=h(w,"key"),p=h(w,"url"),g=h(w,"xhrSettings"),S=h(w,"extension",S),T=h(w,"dataKey",T)}var A={type:"json",cache:d.cacheManager.json,extension:S,responseType:"text",key:m,url:p,xhrSettings:g,config:T};u.call(this,d,A),l(p)&&(T?this.data=n(p,T):this.data=p,this.state=x.FILE_POPULATED)},onProcess:function(){if(this.state!==x.FILE_POPULATED){this.state=x.FILE_PROCESSING;try{var s=JSON.parse(this.xhrLoader.responseText)}catch(m){throw this.onProcessError(),m}var d=this.config;typeof d=="string"?this.data=n(s,d,s):this.data=s}this.onProcessComplete()}});r.register("json",function(s,d,m,p){if(Array.isArray(s))for(var g=0;g<s.length;g++)this.addFile(new c(this,s[g]));else this.addFile(new c(this,s,d,p,m));return this}),o.exports=c}),59327:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(95540),r=e(19550),h=e(41212),n=e(518),l=e(26430),c=new a({Extends:l,initialize:function(d,m,p,g,T,S,w){if(h(m)){var A=m;m=u(A,"key"),u(A,"url",!1)?p=u(A,"url"):p=u(A,"atlasURL"),S=u(A,"xhrSettings"),g=u(A,"path"),T=u(A,"baseURL"),w=u(A,"textureXhrSettings")}var M=new n(d,m,p,S);l.call(this,d,"multiatlas",m,[M]),this.config.path=g,this.config.baseURL=T,this.config.textureXhrSettings=w},onFileComplete:function(s){var d=this.files.indexOf(s);if(d!==-1&&(this.pending--,s.type==="json"&&s.data.hasOwnProperty("textures"))){var m=s.data.textures,p=this.config,g=this.loader,T=g.baseURL,S=g.path,w=g.prefix,A=u(p,"baseURL",this.baseURL),M=u(p,"path",this.path),R=u(p,"prefix",this.prefix),P=u(p,"textureXhrSettings");g.setBaseURL(A),g.setPath(M),g.setPrefix(R);for(var b=0;b<m.length;b++){var F=m[b].image,I="MA"+this.multiKeyIndex+"_"+F,L=new r(g,I,F,P);if(this.addToMultiFile(L),g.addFile(L),m[b].normalMap){var D=new r(g,I,m[b].normalMap,P);D.type="normalMap",L.setLink(D),this.addToMultiFile(D),g.addFile(D)}}g.setBaseURL(T),g.setPath(S),g.setPrefix(w)}},addToCache:function(){if(this.isReadyToProcess()){for(var s=this.files[0],d=[],m=[],p=[],g=1;g<this.files.length;g++){var T=this.files[g];if(T.type!=="normalMap")for(var S=T.key.indexOf("_"),w=T.key.substr(S+1),A=T.data,M=0;M<s.data.textures.length;M++){var R=s.data.textures[M];if(R.image===w){m.push(A),d.push(R),T.linkFile&&p.push(T.linkFile.data);break}}}p.length===0&&(p=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,m,d,p),this.complete=!0}}});x.register("multiatlas",function(s,d,m,p,g){var T;if(Array.isArray(s))for(var S=0;S<s.length;S++)T=new c(this,s[S]),this.addFile(T.files);else T=new c(this,s,d,m,p,g),this.addFile(T.files);return this}),o.exports=c}),99297:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(95540),r=e(41212),h=e(26430),n=e(34328),l=new a({Extends:h,initialize:function(s,d,m,p){var g="js",T=[];if(r(d)){var S=d;d=u(S,"key"),m=u(S,"url"),p=u(S,"xhrSettings"),g=u(S,"extension",g)}Array.isArray(m)||(m=[m]);for(var w=0;w<m.length;w++){var A=new n(s,{key:d+"_"+w.toString(),url:m[w],extension:g,xhrSettings:p});A.onProcess=function(){this.onProcessComplete()},T.push(A)}h.call(this,s,"scripts",d,T)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var s=this.files[c];s.data=document.createElement("script"),s.data.language="javascript",s.data.type="text/javascript",s.data.defer=!1,s.data.text=s.xhrLoader.responseText,document.head.appendChild(s.data)}this.complete=!0}}});x.register("scripts",function(c,s,d){var m;if(Array.isArray(c))for(var p=0;p<c.length;p++)m=new l(this,c[p]),this.addFile(m.files);else m=new l(this,c,s,d),this.addFile(m.files);return this}),o.exports=l}),41846:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(95540),r=e(41212),h=e(26430),n=e(85048),l=e(61485),c=e(78776),s=new a({Extends:h,initialize:function(m,p,g,T,S,w){var A,M,R=m.cacheManager.obj;if(r(p)){var P=p;p=u(P,"key"),A=new c(m,{key:p,type:"obj",cache:R,url:u(P,"url"),extension:u(P,"extension","obj"),xhrSettings:u(P,"xhrSettings"),config:{flipUV:u(P,"flipUV",S)}}),T=u(P,"matURL"),T&&(M=new c(m,{key:p,type:"mat",cache:R,url:T,extension:u(P,"matExtension","mat"),xhrSettings:u(P,"xhrSettings")}))}else A=new c(m,{key:p,url:g,type:"obj",cache:R,extension:"obj",xhrSettings:w,config:{flipUV:S}}),T&&(M=new c(m,{key:p,url:T,type:"mat",cache:R,extension:"mat",xhrSettings:w}));h.call(this,m,"obj",p,[A,M])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],m=this.files[1],p=n(d.data,d.config.flipUV);m&&(p.materials=l(m.data)),d.cache.add(d.key,p),this.complete=!0}}});x.register("obj",function(d,m,p,g,T){var S;if(Array.isArray(d))for(var w=0;w<d.length;w++)S=new s(this,d[w]),this.addFile(S.files);else S=new s(this,d,m,p,g,T),this.addFile(S.files);return this}),o.exports=s}),58610:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(74099),r=e(518),h=new a({Extends:r,initialize:function(l,c,s,d,m){r.call(this,l,c,s,d,m),this.type="packfile"},onProcess:function(){if(this.state!==x.FILE_POPULATED&&(this.state=x.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var n={};n[this.config]=this.data,this.data=n}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});u.register("pack",function(n,l,c,s){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new h(this,n[d]));else this.addFile(new h(this,n,l,s,c));return this}),o.exports=h}),48988:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p,g,T){var S="js";if(n(d)){var w=d;d=h(w,"key"),m=h(w,"url"),T=h(w,"xhrSettings"),S=h(w,"extension",S),p=h(w,"start"),g=h(w,"mapping")}var A={type:"plugin",cache:!1,extension:S,responseType:"text",key:d,url:m,xhrSettings:T,config:{start:p,mapping:g}};u.call(this,s,A),typeof m=="function"&&(this.data=m,this.state=x.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,s=this.config,d=h(s,"start",!1),m=h(s,"mapping",null);if(this.state===x.FILE_POPULATED)c.install(this.key,this.data,d,m);else{this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var p=c.install(this.key,window[this.key],d,m);(d||m)&&(this.loader.systems[m]=p,this.loader.scene[m]=p)}this.onProcessComplete()}});r.register("plugin",function(c,s,d,m,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new l(this,c[g]));else this.addFile(new l(this,c,s,d,m,p));return this}),o.exports=l}),67397:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p,g){var T="svg";if(n(d)){var S=d;d=h(S,"key"),m=h(S,"url"),p=h(S,"svgConfig",{}),g=h(S,"xhrSettings"),T=h(S,"extension",T)}var w={type:"svg",cache:s.textureManager,extension:T,responseType:"text",key:d,url:m,xhrSettings:g,config:{width:h(p,"width"),height:h(p,"height"),scale:h(p,"scale")}};u.call(this,s,w)},onProcess:function(){this.state=x.FILE_PROCESSING;var c=this.xhrLoader.responseText,s=[c],d=this.config.width,m=this.config.height,p=this.config.scale;t:if(d&&m||p){var g=null,T=new DOMParser;g=T.parseFromString(c,"text/xml");var S=g.getElementsByTagName("svg")[0],w=S.hasAttribute("viewBox"),A=parseFloat(S.getAttribute("width")),M=parseFloat(S.getAttribute("height"));if(!w&&A&&M)S.setAttribute("viewBox","0  0 "+A+" "+M);else if(w&&!A&&!M){var R=S.getAttribute("viewBox").split(/\s+|,/);A=R[2],M=R[3]}if(p)if(A&&M)d=A*p,m=M*p;else break t;S.setAttribute("width",d.toString()+"px"),S.setAttribute("height",m.toString()+"px"),s=[new XMLSerializer().serializeToString(S)]}try{var P=new window.Blob(s,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var b=this,F=!1;this.data.onload=function(){F||u.revokeObjectURL(b.data),b.onProcessComplete()},this.data.onerror=function(){F?b.onProcessError():(F=!0,u.revokeObjectURL(b.data),b.data.src="data:image/svg+xml,"+encodeURIComponent(s.join("")))},u.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("svg",function(c,s,d,m){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new l(this,c[p]));else this.addFile(new l(this,c,s,d,m));return this}),o.exports=l}),88423:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p){var g="js";if(n(d)){var T=d;d=h(T,"key"),m=h(T,"url"),p=h(T,"xhrSettings"),g=h(T,"extension",g)}var S={type:"text",extension:g,responseType:"text",key:d,url:m,xhrSettings:p};u.call(this,s,S)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),s=eval;this.loader.sceneManager.add(this.key,s(c)),this.complete=!0}});r.register("sceneFile",function(c,s,d){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new l(this,c[m]));else this.addFile(new l(this,c,s,d));return this}),o.exports=l}),56812:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p,g,T){var S="js";if(n(d)){var w=d;d=h(w,"key"),m=h(w,"url"),T=h(w,"xhrSettings"),S=h(w,"extension",S),p=h(w,"systemKey"),g=h(w,"sceneKey")}var A={type:"scenePlugin",cache:!1,extension:S,responseType:"text",key:d,url:m,xhrSettings:T,config:{systemKey:p,sceneKey:g}};u.call(this,s,A),typeof m=="function"&&(this.data=m,this.state=x.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,s=this.config,d=this.key,m=h(s,"systemKey",d),p=h(s,"sceneKey",d);this.state===x.FILE_POPULATED?c.installScenePlugin(m,this.data,p,this.loader.scene,!0):(this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(m,window[this.key],p,this.loader.scene,!0)),this.onProcessComplete()}});r.register("scenePlugin",function(c,s,d,m,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new l(this,c[g]));else this.addFile(new l(this,c,s,d,m,p));return this}),o.exports=l}),34328:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p,g){var T="js";if(n(d)){var S=d;d=h(S,"key"),m=h(S,"url"),p=h(S,"type","script"),g=h(S,"xhrSettings"),T=h(S,"extension",T)}else p===void 0&&(p="script");var w={type:p,cache:!1,extension:T,responseType:"text",key:d,url:m,xhrSettings:g};u.call(this,s,w)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("script",function(c,s,d,m){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new l(this,c[p]));else this.addFile(new l(this,c,s,d,m));return this}),o.exports=l}),85035:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(74099),r=e(19550),h=new a({Extends:r,initialize:function(l,c,s,d,m){r.call(this,l,c,s,m,d),this.type="spritesheet"},addToCache:function(){var n=this.linkFile;n?n.state>=x.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,n.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,n.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});u.register("spritesheet",function(n,l,c,s){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new h(this,n[d]));else this.addFile(new h(this,n,l,c,s));return this}),o.exports=h}),78776:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=new a({Extends:u,initialize:function(s,d,m,p){var g="text",T="txt",S=s.cacheManager.text;if(n(d)){var w=d;d=h(w,"key"),m=h(w,"url"),p=h(w,"xhrSettings"),T=h(w,"extension",T),g=h(w,"type",g),S=h(w,"cache",S)}var A={type:g,cache:S,extension:T,responseType:"text",key:d,url:m,xhrSettings:p};u.call(this,s,A)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("text",function(c,s,d){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new l(this,c[m]));else this.addFile(new l(this,c,s,d));return this}),o.exports=l}),49477:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=e(80341),c=new a({Extends:u,initialize:function(d,m,p,g){var T="csv";if(n(m)){var S=m;m=h(S,"key"),p=h(S,"url"),g=h(S,"xhrSettings"),T=h(S,"extension",T)}var w={type:"tilemapCSV",cache:d.cacheManager.tilemap,extension:T,responseType:"text",key:m,url:p,xhrSettings:g};u.call(this,d,w),this.tilemapFormat=l.CSV},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var s={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,s)}});r.register("tilemapCSV",function(s,d,m){if(Array.isArray(s))for(var p=0;p<s.length;p++)this.addFile(new c(this,s[p]));else this.addFile(new c(this,s,d,m));return this}),o.exports=c}),40807:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(518),r=e(80341),h=new a({Extends:u,initialize:function(l,c,s,d){u.call(this,l,c,s,d),this.type="tilemapJSON",this.cache=l.cacheManager.tilemap},addToCache:function(){var n={format:r.WELTMEISTER,data:this.data};this.cache.add(this.key,n)}});x.register("tilemapImpact",function(n,l,c){if(Array.isArray(n))for(var s=0;s<n.length;s++)this.addFile(new h(this,n[s]));else this.addFile(new h(this,n,l,c));return this}),o.exports=h}),56775:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(518),r=e(80341),h=new a({Extends:u,initialize:function(l,c,s,d){u.call(this,l,c,s,d),this.type="tilemapJSON",this.cache=l.cacheManager.tilemap},addToCache:function(){var n={format:r.TILED_JSON,data:this.data};this.cache.add(this.key,n)}});x.register("tilemapTiledJSON",function(n,l,c){if(Array.isArray(n))for(var s=0;s<n.length;s++)this.addFile(new h(this,n[s]));else this.addFile(new h(this,n,l,c));return this}),o.exports=h}),25771:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(74099),u=e(95540),r=e(19550),h=e(41212),n=e(26430),l=e(78776),c=new a({Extends:n,initialize:function(d,m,p,g,T,S){var w,A;if(h(m)){var M=m;m=u(M,"key"),w=new r(d,{key:m,url:u(M,"textureURL"),extension:u(M,"textureExtension","png"),normalMap:u(M,"normalMap"),xhrSettings:u(M,"textureXhrSettings")}),A=new l(d,{key:m,url:u(M,"atlasURL"),extension:u(M,"atlasExtension","txt"),xhrSettings:u(M,"atlasXhrSettings")})}else w=new r(d,m,p,T),A=new l(d,m,g,S);w.linkFile?n.call(this,d,"unityatlas",m,[w,A,w.linkFile]):n.call(this,d,"unityatlas",m,[w,A])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],d=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(s.key,s.data,d.data,m),this.complete=!0}}});x.register("unityAtlas",function(s,d,m,p,g){var T;if(Array.isArray(s))for(var S=0;S<s.length;S++)T=new c(this,s[S]),this.addFile(T.files);else T=new c(this,s,d,m,p,g),this.addFile(T.files);return this}),o.exports=c}),33720:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(98356),n=e(95540),l=e(41212),c=new a({Extends:u,initialize:function(d,m,p,g){if(g===void 0&&(g=!1),l(m)){var T=m;m=n(T,"key"),p=n(T,"url",[]),g=n(T,"noAudio",!1)}var S=d.systems.game.device.video.getVideoURL(p);S||console.warn("VideoFile: No supported format for "+m);var w={type:"video",cache:d.cacheManager.video,extension:S.type,key:m,url:S.url,config:{noAudio:g}};u.call(this,d,w)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=h(this,this.loader.baseURL),this.state=x.FILE_LOADED,this.loader.nextFile(this,!0)}});r.register("video",function(s,d,m){if(Array.isArray(s))for(var p=0;p<s.length;p++)this.addFile(new c(this,s[p]));else this.addFile(new c(this,s,d,m));return this}),o.exports=c}),57318:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(23906),u=e(41299),r=e(74099),h=e(95540),n=e(41212),l=e(56836),c=new a({Extends:u,initialize:function(d,m,p,g){var T="xml";if(n(m)){var S=m;m=h(S,"key"),p=h(S,"url"),g=h(S,"xhrSettings"),T=h(S,"extension",T)}var w={type:"xml",cache:d.cacheManager.xml,extension:T,responseType:"text",key:m,url:p,xhrSettings:g};u.call(this,d,w)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});r.register("xml",function(s,d,m){if(Array.isArray(s))for(var p=0;p<s.length;p++)this.addFile(new c(this,s[p]));else this.addFile(new c(this,s,d,m));return this}),o.exports=c}),64589:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AnimationJSONFile:e(14135),AsepriteFile:e(76272),AtlasJSONFile:e(38734),AtlasXMLFile:e(74599),AudioFile:e(21097),AudioSpriteFile:e(89524),BinaryFile:e(85722),BitmapFontFile:e(97025),CompressedTextureFile:e(69559),CSSFile:e(16024),FontFile:e(87674),GLSLFile:e(47931),HTML5AudioFile:e(89749),HTMLFile:e(88470),HTMLTextureFile:e(14643),ImageFile:e(19550),JSONFile:e(518),MultiAtlasFile:e(59327),MultiScriptFile:e(99297),OBJFile:e(41846),PackFile:e(58610),PluginFile:e(48988),SceneFile:e(88423),ScenePluginFile:e(56812),ScriptFile:e(34328),SpriteSheetFile:e(85035),SVGFile:e(67397),TextFile:e(78776),TilemapCSVFile:e(49477),TilemapImpactFile:e(40807),TilemapJSONFile:e(56775),UnityAtlasFile:e(25771),VideoFile:e(33720),XMLFile:e(57318)}}),57777:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23906),x=e(79291),u={Events:e(54899),FileTypes:e(64589),File:e(41299),FileTypesManager:e(74099),GetURL:e(98356),LoaderPlugin:e(74261),MergeXHRSettings:e(3374),MultiFile:e(26430),XHRLoader:e(84376),XHRSettings:e(92638)};u=x(!1,u,a),o.exports=u}),53307:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=0,x=0;x<e.length;x++)a+=+e[x];return a/e.length};o.exports=E}),85710:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6411),x=function(u,r){return a(u)/a(r)/a(u-r)};o.exports=x}),30976:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.floor(Math.random()*(a-e+1)+e)};o.exports=E}),87842:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r){var h=(u-a)*.5,n=(r-x)*.5,l=e*e,c=e*l;return(2*x-2*u+h+n)*c+(-3*x+3*u-2*h-n)*l+h*e+x};o.exports=E}),26302:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=0),x===void 0&&(x=10);var u=Math.pow(x,-a);return Math.ceil(e*u)/u};o.exports=E}),45319:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return Math.max(a,Math.min(x,e))};o.exports=E}),39506:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=function(u){return u*a.DEG_TO_RAD};o.exports=x}),61241:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.abs(e-a)};o.exports=E}),38857:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(37867),r=e(29747),h=new u,n=new x({initialize:function l(c,s,d,m){c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m=l.DefaultOrder),this._x=c,this._y=s,this._z=d,this._order=m,this.onChangeCallback=r},x:{get:function(){return this._x},set:function(l){this._x=l,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(l){this._y=l,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(l){this._z=l,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(l){this._order=l,this.onChangeCallback(this)}},set:function(l,c,s,d){return d===void 0&&(d=this._order),this._x=l,this._y=c,this._z=s,this._order=d,this.onChangeCallback(this),this},copy:function(l){return this.set(l.x,l.y,l.z,l.order)},setFromQuaternion:function(l,c,s){return c===void 0&&(c=this._order),s===void 0&&(s=!1),h.fromQuat(l),this.setFromRotationMatrix(h,c,s)},setFromRotationMatrix:function(l,c,s){c===void 0&&(c=this._order),s===void 0&&(s=!1);var d=l.val,m=d[0],p=d[4],g=d[8],T=d[1],S=d[5],w=d[9],A=d[2],M=d[6],R=d[10],P=0,b=0,F=0,I=.99999;switch(c){case"XYZ":{b=Math.asin(a(g,-1,1)),Math.abs(g)<I?(P=Math.atan2(-w,R),F=Math.atan2(-p,m)):P=Math.atan2(M,S);break}case"YXZ":{P=Math.asin(-a(w,-1,1)),Math.abs(w)<I?(b=Math.atan2(g,R),F=Math.atan2(T,S)):b=Math.atan2(-A,m);break}case"ZXY":{P=Math.asin(a(M,-1,1)),Math.abs(M)<I?(b=Math.atan2(-A,R),F=Math.atan2(-p,S)):F=Math.atan2(T,m);break}case"ZYX":{b=Math.asin(-a(A,-1,1)),Math.abs(A)<I?(P=Math.atan2(M,R),F=Math.atan2(T,m)):F=Math.atan2(-p,S);break}case"YZX":{F=Math.asin(a(T,-1,1)),Math.abs(T)<I?(P=Math.atan2(-w,S),b=Math.atan2(-A,m)):b=Math.atan2(g,R);break}case"XZY":{F=Math.asin(-a(p,-1,1)),Math.abs(p)<I?(P=Math.atan2(M,S),b=Math.atan2(g,m)):P=Math.atan2(-w,R);break}}return this._x=P,this._y=b,this._z=F,this._order=c,s&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",o.exports=n}),6411:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){if(e===0)return 1;for(var a=e;--e;)a*=e;return a};o.exports=E}),99472:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.random()*(a-e)+e};o.exports=E}),77623:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=0),x===void 0&&(x=10);var u=Math.pow(x,-a);return Math.floor(e*u)/u};o.exports=E}),62945:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=function(u,r,h){return u=a(u,0,1),(h-r)*u+r};o.exports=x}),38265:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e/a/1e3};o.exports=E}),78702:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e==parseFloat(e)?!(e%2):void 0};o.exports=E}),94883:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e===parseFloat(e)?!(e%2):void 0};o.exports=E}),28915:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return(a-e)*x+e};o.exports=E}),94908:(o=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=0),e.clone().lerp(a,x)};o.exports=E}),94434:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r){this.val=new Float32Array(9),r?this.copy(r):this.identity()},clone:function(){return new x(this)},set:function(u){return this.copy(u)},copy:function(u){var r=this.val,h=u.val;return r[0]=h[0],r[1]=h[1],r[2]=h[2],r[3]=h[3],r[4]=h[4],r[5]=h[5],r[6]=h[6],r[7]=h[7],r[8]=h[8],this},fromMat4:function(u){var r=u.val,h=this.val;return h[0]=r[0],h[1]=r[1],h[2]=r[2],h[3]=r[4],h[4]=r[5],h[5]=r[6],h[6]=r[8],h[7]=r[9],h[8]=r[10],this},fromArray:function(u){var r=this.val;return r[0]=u[0],r[1]=u[1],r[2]=u[2],r[3]=u[3],r[4]=u[4],r[5]=u[5],r[6]=u[6],r[7]=u[7],r[8]=u[8],this},identity:function(){var u=this.val;return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=0,u[7]=0,u[8]=1,this},transpose:function(){var u=this.val,r=u[1],h=u[2],n=u[5];return u[1]=u[3],u[2]=u[6],u[3]=r,u[5]=u[7],u[6]=h,u[7]=n,this},invert:function(){var u=this.val,r=u[0],h=u[1],n=u[2],l=u[3],c=u[4],s=u[5],d=u[6],m=u[7],p=u[8],g=p*c-s*m,T=-p*l+s*d,S=m*l-c*d,w=r*g+h*T+n*S;return w?(w=1/w,u[0]=g*w,u[1]=(-p*h+n*m)*w,u[2]=(s*h-n*c)*w,u[3]=T*w,u[4]=(p*r-n*d)*w,u[5]=(-s*r+n*l)*w,u[6]=S*w,u[7]=(-m*r+h*d)*w,u[8]=(c*r-h*l)*w,this):null},adjoint:function(){var u=this.val,r=u[0],h=u[1],n=u[2],l=u[3],c=u[4],s=u[5],d=u[6],m=u[7],p=u[8];return u[0]=c*p-s*m,u[1]=n*m-h*p,u[2]=h*s-n*c,u[3]=s*d-l*p,u[4]=r*p-n*d,u[5]=n*l-r*s,u[6]=l*m-c*d,u[7]=h*d-r*m,u[8]=r*c-h*l,this},determinant:function(){var u=this.val,r=u[0],h=u[1],n=u[2],l=u[3],c=u[4],s=u[5],d=u[6],m=u[7],p=u[8];return r*(p*c-s*m)+h*(-p*l+s*d)+n*(m*l-c*d)},multiply:function(u){var r=this.val,h=r[0],n=r[1],l=r[2],c=r[3],s=r[4],d=r[5],m=r[6],p=r[7],g=r[8],T=u.val,S=T[0],w=T[1],A=T[2],M=T[3],R=T[4],P=T[5],b=T[6],F=T[7],I=T[8];return r[0]=S*h+w*c+A*m,r[1]=S*n+w*s+A*p,r[2]=S*l+w*d+A*g,r[3]=M*h+R*c+P*m,r[4]=M*n+R*s+P*p,r[5]=M*l+R*d+P*g,r[6]=b*h+F*c+I*m,r[7]=b*n+F*s+I*p,r[8]=b*l+F*d+I*g,this},translate:function(u){var r=this.val,h=u.x,n=u.y;return r[6]=h*r[0]+n*r[3]+r[6],r[7]=h*r[1]+n*r[4]+r[7],r[8]=h*r[2]+n*r[5]+r[8],this},rotate:function(u){var r=this.val,h=r[0],n=r[1],l=r[2],c=r[3],s=r[4],d=r[5],m=Math.sin(u),p=Math.cos(u);return r[0]=p*h+m*c,r[1]=p*n+m*s,r[2]=p*l+m*d,r[3]=p*c-m*h,r[4]=p*s-m*n,r[5]=p*d-m*l,this},scale:function(u){var r=this.val,h=u.x,n=u.y;return r[0]=h*r[0],r[1]=h*r[1],r[2]=h*r[2],r[3]=n*r[3],r[4]=n*r[4],r[5]=n*r[5],this},fromQuat:function(u){var r=u.x,h=u.y,n=u.z,l=u.w,c=r+r,s=h+h,d=n+n,m=r*c,p=r*s,g=r*d,T=h*s,S=h*d,w=n*d,A=l*c,M=l*s,R=l*d,P=this.val;return P[0]=1-(T+w),P[3]=p+R,P[6]=g-M,P[1]=p-R,P[4]=1-(m+w),P[7]=S+A,P[2]=g+M,P[5]=S-A,P[8]=1-(m+T),this},normalFromMat4:function(u){var r=u.val,h=this.val,n=r[0],l=r[1],c=r[2],s=r[3],d=r[4],m=r[5],p=r[6],g=r[7],T=r[8],S=r[9],w=r[10],A=r[11],M=r[12],R=r[13],P=r[14],b=r[15],F=n*m-l*d,I=n*p-c*d,L=n*g-s*d,D=l*p-c*m,O=l*g-s*m,z=c*g-s*p,W=T*R-S*M,X=T*P-w*M,_=T*b-A*M,U=S*P-w*R,G=S*b-A*R,N=w*b-A*P,H=F*N-I*G+L*U+D*_-O*X+z*W;return H?(H=1/H,h[0]=(m*N-p*G+g*U)*H,h[1]=(p*_-d*N-g*X)*H,h[2]=(d*G-m*_+g*W)*H,h[3]=(c*G-l*N-s*U)*H,h[4]=(n*N-c*_+s*X)*H,h[5]=(l*_-n*G-s*W)*H,h[6]=(R*z-P*O+b*D)*H,h[7]=(P*L-M*z-b*I)*H,h[8]=(M*O-R*L+b*F)*H,this):null}});o.exports=x}),37867:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(25836),u=1e-6,r=new a({initialize:function(m){this.val=new Float32Array(16),m?this.copy(m):this.identity()},clone:function(){return new r(this)},set:function(d){return this.copy(d)},setValues:function(d,m,p,g,T,S,w,A,M,R,P,b,F,I,L,D){var O=this.val;return O[0]=d,O[1]=m,O[2]=p,O[3]=g,O[4]=T,O[5]=S,O[6]=w,O[7]=A,O[8]=M,O[9]=R,O[10]=P,O[11]=b,O[12]=F,O[13]=I,O[14]=L,O[15]=D,this},copy:function(d){var m=d.val;return this.setValues(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15])},fromArray:function(d){return this.setValues(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(d,m,p){var g=h.fromQuat(p),T=g.val,S=m.x,w=m.y,A=m.z;return this.setValues(T[0]*S,T[1]*S,T[2]*S,0,T[4]*w,T[5]*w,T[6]*w,0,T[8]*A,T[9]*A,T[10]*A,0,d.x,d.y,d.z,1)},xyz:function(d,m,p){this.identity();var g=this.val;return g[12]=d,g[13]=m,g[14]=p,this},scaling:function(d,m,p){this.zero();var g=this.val;return g[0]=d,g[5]=m,g[10]=p,g[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var d=this.val,m=d[1],p=d[2],g=d[3],T=d[6],S=d[7],w=d[11];return d[1]=d[4],d[2]=d[8],d[3]=d[12],d[4]=m,d[6]=d[9],d[7]=d[13],d[8]=p,d[9]=T,d[11]=d[14],d[12]=g,d[13]=S,d[14]=w,this},getInverse:function(d){return this.copy(d),this.invert()},invert:function(){var d=this.val,m=d[0],p=d[1],g=d[2],T=d[3],S=d[4],w=d[5],A=d[6],M=d[7],R=d[8],P=d[9],b=d[10],F=d[11],I=d[12],L=d[13],D=d[14],O=d[15],z=m*w-p*S,W=m*A-g*S,X=m*M-T*S,_=p*A-g*w,U=p*M-T*w,G=g*M-T*A,N=R*L-P*I,H=R*D-b*I,V=R*O-F*I,$=P*D-b*L,j=P*O-F*L,k=b*O-F*D,Q=z*k-W*j+X*$+_*V-U*H+G*N;return Q?(Q=1/Q,this.setValues((w*k-A*j+M*$)*Q,(g*j-p*k-T*$)*Q,(L*G-D*U+O*_)*Q,(b*U-P*G-F*_)*Q,(A*V-S*k-M*H)*Q,(m*k-g*V+T*H)*Q,(D*X-I*G-O*W)*Q,(R*G-b*X+F*W)*Q,(S*j-w*V+M*N)*Q,(p*V-m*j-T*N)*Q,(I*U-L*X+O*z)*Q,(P*X-R*U-F*z)*Q,(w*H-S*$-A*N)*Q,(m*$-p*H+g*N)*Q,(L*W-I*_-D*z)*Q,(R*_-P*W+b*z)*Q)):this},adjoint:function(){var d=this.val,m=d[0],p=d[1],g=d[2],T=d[3],S=d[4],w=d[5],A=d[6],M=d[7],R=d[8],P=d[9],b=d[10],F=d[11],I=d[12],L=d[13],D=d[14],O=d[15];return this.setValues(w*(b*O-F*D)-P*(A*O-M*D)+L*(A*F-M*b),-(p*(b*O-F*D)-P*(g*O-T*D)+L*(g*F-T*b)),p*(A*O-M*D)-w*(g*O-T*D)+L*(g*M-T*A),-(p*(A*F-M*b)-w*(g*F-T*b)+P*(g*M-T*A)),-(S*(b*O-F*D)-R*(A*O-M*D)+I*(A*F-M*b)),m*(b*O-F*D)-R*(g*O-T*D)+I*(g*F-T*b),-(m*(A*O-M*D)-S*(g*O-T*D)+I*(g*M-T*A)),m*(A*F-M*b)-S*(g*F-T*b)+R*(g*M-T*A),S*(P*O-F*L)-R*(w*O-M*L)+I*(w*F-M*P),-(m*(P*O-F*L)-R*(p*O-T*L)+I*(p*F-T*P)),m*(w*O-M*L)-S*(p*O-T*L)+I*(p*M-T*w),-(m*(w*F-M*P)-S*(p*F-T*P)+R*(p*M-T*w)),-(S*(P*D-b*L)-R*(w*D-A*L)+I*(w*b-A*P)),m*(P*D-b*L)-R*(p*D-g*L)+I*(p*b-g*P),-(m*(w*D-A*L)-S*(p*D-g*L)+I*(p*A-g*w)),m*(w*b-A*P)-S*(p*b-g*P)+R*(p*A-g*w))},determinant:function(){var d=this.val,m=d[0],p=d[1],g=d[2],T=d[3],S=d[4],w=d[5],A=d[6],M=d[7],R=d[8],P=d[9],b=d[10],F=d[11],I=d[12],L=d[13],D=d[14],O=d[15],z=m*w-p*S,W=m*A-g*S,X=m*M-T*S,_=p*A-g*w,U=p*M-T*w,G=g*M-T*A,N=R*L-P*I,H=R*D-b*I,V=R*O-F*I,$=P*D-b*L,j=P*O-F*L,k=b*O-F*D;return z*k-W*j+X*$+_*V-U*H+G*N},multiply:function(d){var m=this.val,p=m[0],g=m[1],T=m[2],S=m[3],w=m[4],A=m[5],M=m[6],R=m[7],P=m[8],b=m[9],F=m[10],I=m[11],L=m[12],D=m[13],O=m[14],z=m[15],W=d.val,X=W[0],_=W[1],U=W[2],G=W[3];return m[0]=X*p+_*w+U*P+G*L,m[1]=X*g+_*A+U*b+G*D,m[2]=X*T+_*M+U*F+G*O,m[3]=X*S+_*R+U*I+G*z,X=W[4],_=W[5],U=W[6],G=W[7],m[4]=X*p+_*w+U*P+G*L,m[5]=X*g+_*A+U*b+G*D,m[6]=X*T+_*M+U*F+G*O,m[7]=X*S+_*R+U*I+G*z,X=W[8],_=W[9],U=W[10],G=W[11],m[8]=X*p+_*w+U*P+G*L,m[9]=X*g+_*A+U*b+G*D,m[10]=X*T+_*M+U*F+G*O,m[11]=X*S+_*R+U*I+G*z,X=W[12],_=W[13],U=W[14],G=W[15],m[12]=X*p+_*w+U*P+G*L,m[13]=X*g+_*A+U*b+G*D,m[14]=X*T+_*M+U*F+G*O,m[15]=X*S+_*R+U*I+G*z,this},multiplyLocal:function(d){var m=this.val,p=d.val;return this.setValues(m[0]*p[0]+m[1]*p[4]+m[2]*p[8]+m[3]*p[12],m[0]*p[1]+m[1]*p[5]+m[2]*p[9]+m[3]*p[13],m[0]*p[2]+m[1]*p[6]+m[2]*p[10]+m[3]*p[14],m[0]*p[3]+m[1]*p[7]+m[2]*p[11]+m[3]*p[15],m[4]*p[0]+m[5]*p[4]+m[6]*p[8]+m[7]*p[12],m[4]*p[1]+m[5]*p[5]+m[6]*p[9]+m[7]*p[13],m[4]*p[2]+m[5]*p[6]+m[6]*p[10]+m[7]*p[14],m[4]*p[3]+m[5]*p[7]+m[6]*p[11]+m[7]*p[15],m[8]*p[0]+m[9]*p[4]+m[10]*p[8]+m[11]*p[12],m[8]*p[1]+m[9]*p[5]+m[10]*p[9]+m[11]*p[13],m[8]*p[2]+m[9]*p[6]+m[10]*p[10]+m[11]*p[14],m[8]*p[3]+m[9]*p[7]+m[10]*p[11]+m[11]*p[15],m[12]*p[0]+m[13]*p[4]+m[14]*p[8]+m[15]*p[12],m[12]*p[1]+m[13]*p[5]+m[14]*p[9]+m[15]*p[13],m[12]*p[2]+m[13]*p[6]+m[14]*p[10]+m[15]*p[14],m[12]*p[3]+m[13]*p[7]+m[14]*p[11]+m[15]*p[15])},premultiply:function(d){return this.multiplyMatrices(d,this)},multiplyMatrices:function(d,m){var p=d.val,g=m.val,T=p[0],S=p[4],w=p[8],A=p[12],M=p[1],R=p[5],P=p[9],b=p[13],F=p[2],I=p[6],L=p[10],D=p[14],O=p[3],z=p[7],W=p[11],X=p[15],_=g[0],U=g[4],G=g[8],N=g[12],H=g[1],V=g[5],$=g[9],j=g[13],k=g[2],Q=g[6],et=g[10],at=g[14],q=g[3],ft=g[7],vt=g[11],Tt=g[15];return this.setValues(T*_+S*H+w*k+A*q,M*_+R*H+P*k+b*q,F*_+I*H+L*k+D*q,O*_+z*H+W*k+X*q,T*U+S*V+w*Q+A*ft,M*U+R*V+P*Q+b*ft,F*U+I*V+L*Q+D*ft,O*U+z*V+W*Q+X*ft,T*G+S*$+w*et+A*vt,M*G+R*$+P*et+b*vt,F*G+I*$+L*et+D*vt,O*G+z*$+W*et+X*vt,T*N+S*j+w*at+A*Tt,M*N+R*j+P*at+b*Tt,F*N+I*j+L*at+D*Tt,O*N+z*j+W*at+X*Tt)},translate:function(d){return this.translateXYZ(d.x,d.y,d.z)},translateXYZ:function(d,m,p){var g=this.val;return g[12]=g[0]*d+g[4]*m+g[8]*p+g[12],g[13]=g[1]*d+g[5]*m+g[9]*p+g[13],g[14]=g[2]*d+g[6]*m+g[10]*p+g[14],g[15]=g[3]*d+g[7]*m+g[11]*p+g[15],this},scale:function(d){return this.scaleXYZ(d.x,d.y,d.z)},scaleXYZ:function(d,m,p){var g=this.val;return g[0]=g[0]*d,g[1]=g[1]*d,g[2]=g[2]*d,g[3]=g[3]*d,g[4]=g[4]*m,g[5]=g[5]*m,g[6]=g[6]*m,g[7]=g[7]*m,g[8]=g[8]*p,g[9]=g[9]*p,g[10]=g[10]*p,g[11]=g[11]*p,this},makeRotationAxis:function(d,m){var p=Math.cos(m),g=Math.sin(m),T=1-p,S=d.x,w=d.y,A=d.z,M=T*S,R=T*w;return this.setValues(M*S+p,M*w-g*A,M*A+g*w,0,M*w+g*A,R*w+p,R*A-g*S,0,M*A-g*w,R*A+g*S,T*A*A+p,0,0,0,0,1)},rotate:function(d,m){var p=this.val,g=m.x,T=m.y,S=m.z,w=Math.sqrt(g*g+T*T+S*S);if(Math.abs(w)<u)return this;w=1/w,g*=w,T*=w,S*=w;var A=Math.sin(d),M=Math.cos(d),R=1-M,P=p[0],b=p[1],F=p[2],I=p[3],L=p[4],D=p[5],O=p[6],z=p[7],W=p[8],X=p[9],_=p[10],U=p[11],G=p[12],N=p[13],H=p[14],V=p[15],$=g*g*R+M,j=T*g*R+S*A,k=S*g*R-T*A,Q=g*T*R-S*A,et=T*T*R+M,at=S*T*R+g*A,q=g*S*R+T*A,ft=T*S*R-g*A,vt=S*S*R+M;return this.setValues(P*$+L*j+W*k,b*$+D*j+X*k,F*$+O*j+_*k,I*$+z*j+U*k,P*Q+L*et+W*at,b*Q+D*et+X*at,F*Q+O*et+_*at,I*Q+z*et+U*at,P*q+L*ft+W*vt,b*q+D*ft+X*vt,F*q+O*ft+_*vt,I*q+z*ft+U*vt,G,N,H,V)},rotateX:function(d){var m=this.val,p=Math.sin(d),g=Math.cos(d),T=m[4],S=m[5],w=m[6],A=m[7],M=m[8],R=m[9],P=m[10],b=m[11];return m[4]=T*g+M*p,m[5]=S*g+R*p,m[6]=w*g+P*p,m[7]=A*g+b*p,m[8]=M*g-T*p,m[9]=R*g-S*p,m[10]=P*g-w*p,m[11]=b*g-A*p,this},rotateY:function(d){var m=this.val,p=Math.sin(d),g=Math.cos(d),T=m[0],S=m[1],w=m[2],A=m[3],M=m[8],R=m[9],P=m[10],b=m[11];return m[0]=T*g-M*p,m[1]=S*g-R*p,m[2]=w*g-P*p,m[3]=A*g-b*p,m[8]=T*p+M*g,m[9]=S*p+R*g,m[10]=w*p+P*g,m[11]=A*p+b*g,this},rotateZ:function(d){var m=this.val,p=Math.sin(d),g=Math.cos(d),T=m[0],S=m[1],w=m[2],A=m[3],M=m[4],R=m[5],P=m[6],b=m[7];return m[0]=T*g+M*p,m[1]=S*g+R*p,m[2]=w*g+P*p,m[3]=A*g+b*p,m[4]=M*g-T*p,m[5]=R*g-S*p,m[6]=P*g-w*p,m[7]=b*g-A*p,this},fromRotationTranslation:function(d,m){var p=d.x,g=d.y,T=d.z,S=d.w,w=p+p,A=g+g,M=T+T,R=p*w,P=p*A,b=p*M,F=g*A,I=g*M,L=T*M,D=S*w,O=S*A,z=S*M;return this.setValues(1-(F+L),P+z,b-O,0,P-z,1-(R+L),I+D,0,b+O,I-D,1-(R+F),0,m.x,m.y,m.z,1)},fromQuat:function(d){var m=d.x,p=d.y,g=d.z,T=d.w,S=m+m,w=p+p,A=g+g,M=m*S,R=m*w,P=m*A,b=p*w,F=p*A,I=g*A,L=T*S,D=T*w,O=T*A;return this.setValues(1-(b+I),R+O,P-D,0,R-O,1-(M+I),F+L,0,P+D,F-L,1-(M+b),0,0,0,0,1)},frustum:function(d,m,p,g,T,S){var w=1/(m-d),A=1/(g-p),M=1/(T-S);return this.setValues(T*2*w,0,0,0,0,T*2*A,0,0,(m+d)*w,(g+p)*A,(S+T)*M,-1,0,0,S*T*2*M,0)},perspective:function(d,m,p,g){var T=1/Math.tan(d/2),S=1/(p-g);return this.setValues(T/m,0,0,0,0,T,0,0,0,0,(g+p)*S,-1,0,0,2*g*p*S,0)},perspectiveLH:function(d,m,p,g){return this.setValues(2*p/d,0,0,0,0,2*p/m,0,0,0,0,-g/(p-g),1,0,0,p*g/(p-g),0)},ortho:function(d,m,p,g,T,S){var w=d-m,A=p-g,M=T-S;return w=w===0?w:1/w,A=A===0?A:1/A,M=M===0?M:1/M,this.setValues(-2*w,0,0,0,0,-2*A,0,0,0,0,2*M,0,(d+m)*w,(g+p)*A,(S+T)*M,1)},lookAtRH:function(d,m,p){var g=this.val;return s.subVectors(d,m),s.lengthSq()===0&&(s.z=1),s.normalize(),l.crossVectors(p,s),l.lengthSq()===0&&(Math.abs(p.z)===1?s.x+=1e-4:s.z+=1e-4,s.normalize(),l.crossVectors(p,s)),l.normalize(),c.crossVectors(s,l),g[0]=l.x,g[1]=l.y,g[2]=l.z,g[4]=c.x,g[5]=c.y,g[6]=c.z,g[8]=s.x,g[9]=s.y,g[10]=s.z,this},lookAt:function(d,m,p){var g=d.x,T=d.y,S=d.z,w=p.x,A=p.y,M=p.z,R=m.x,P=m.y,b=m.z;if(Math.abs(g-R)<u&&Math.abs(T-P)<u&&Math.abs(S-b)<u)return this.identity();var F=g-R,I=T-P,L=S-b,D=1/Math.sqrt(F*F+I*I+L*L);F*=D,I*=D,L*=D;var O=A*L-M*I,z=M*F-w*L,W=w*I-A*F;D=Math.sqrt(O*O+z*z+W*W),D?(D=1/D,O*=D,z*=D,W*=D):(O=0,z=0,W=0);var X=I*W-L*z,_=L*O-F*W,U=F*z-I*O;return D=Math.sqrt(X*X+_*_+U*U),D?(D=1/D,X*=D,_*=D,U*=D):(X=0,_=0,U=0),this.setValues(O,X,F,0,z,_,I,0,W,U,L,0,-(O*g+z*T+W*S),-(X*g+_*T+U*S),-(F*g+I*T+L*S),1)},yawPitchRoll:function(d,m,p){this.zero(),h.zero(),n.zero();var g=this.val,T=h.val,S=n.val,w=Math.sin(p),A=Math.cos(p);return g[10]=1,g[15]=1,g[0]=A,g[1]=w,g[4]=-w,g[5]=A,w=Math.sin(m),A=Math.cos(m),T[0]=1,T[15]=1,T[5]=A,T[10]=A,T[9]=-w,T[6]=w,w=Math.sin(d),A=Math.cos(d),S[5]=1,S[15]=1,S[0]=A,S[2]=-w,S[8]=w,S[10]=A,this.multiplyLocal(h),this.multiplyLocal(n),this},setWorldMatrix:function(d,m,p,g,T){return this.yawPitchRoll(d.y,d.x,d.z),h.scaling(p.x,p.y,p.z),n.xyz(m.x,m.y,m.z),this.multiplyLocal(h),this.multiplyLocal(n),g&&this.multiplyLocal(g),T&&this.multiplyLocal(T),this},multiplyToMat4:function(d,m){var p=this.val,g=d.val,T=p[0],S=p[1],w=p[2],A=p[3],M=p[4],R=p[5],P=p[6],b=p[7],F=p[8],I=p[9],L=p[10],D=p[11],O=p[12],z=p[13],W=p[14],X=p[15],_=g[0],U=g[1],G=g[2],N=g[3],H=g[4],V=g[5],$=g[6],j=g[7],k=g[8],Q=g[9],et=g[10],at=g[11],q=g[12],ft=g[13],vt=g[14],Tt=g[15];return m.setValues(_*T+U*M+G*F+N*O,U*S+U*R+G*I+N*z,G*w+U*P+G*L+N*W,N*A+U*b+G*D+N*X,H*T+V*M+$*F+j*O,H*S+V*R+$*I+j*z,H*w+V*P+$*L+j*W,H*A+V*b+$*D+j*X,k*T+Q*M+et*F+at*O,k*S+Q*R+et*I+at*z,k*w+Q*P+et*L+at*W,k*A+Q*b+et*D+at*X,q*T+ft*M+vt*F+Tt*O,q*S+ft*R+vt*I+Tt*z,q*w+ft*P+vt*L+Tt*W,q*A+ft*b+vt*D+Tt*X)},fromRotationXYTranslation:function(d,m,p){var g=m.x,T=m.y,S=m.z,w=Math.sin(d.x),A=Math.cos(d.x),M=Math.sin(d.y),R=Math.cos(d.y),P=g,b=T,F=S,I=-w,L=0-I*M,D=0-A*M,O=I*R,z=A*R;return p||(P=R*g+M*S,b=L*g+A*T+O*S,F=D*g+w*T+z*S),this.setValues(R,L,D,0,0,A,w,0,M,O,z,0,P,b,F,1)},getMaxScaleOnAxis:function(){var d=this.val,m=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],p=d[4]*d[4]+d[5]*d[5]+d[6]*d[6],g=d[8]*d[8]+d[9]*d[9]+d[10]*d[10];return Math.sqrt(Math.max(m,p,g))}}),h=new r,n=new r,l=new x,c=new x,s=new x;o.exports=r}),86883:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return Math.min(e+a,x)};o.exports=E}),50040:(o=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=e.length;if(a===0)return 0;e.sort(function(u,r){return u-r});var x=Math.floor(a/2);return a%2===0?(e[x]+e[x-1])/2:e[x]};o.exports=E}),37204:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return Math.max(e-a,x)};o.exports=E}),65201:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){x===void 0&&(x=a+1);var r=(e-a)/(x-a);return r>1?u!==void 0?(r=(u-e)/(u-x),r<0&&(r=0)):r=1:r<0&&(r=0),r};o.exports=E}),15746:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(94434),u=e(29747),r=e(25836),h=1e-6,n=new Int8Array([1,2,0]),l=new Float32Array([0,0,0]),c=new r(1,0,0),s=new r(0,1,0),d=new r,m=new x,p=new a({initialize:function(T,S,w,A){this.onChangeCallback=u,this.set(T,S,w,A)},x:{get:function(){return this._x},set:function(g){this._x=g,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(g){this._y=g,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(g){this._z=g,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(g){this._w=g,this.onChangeCallback(this)}},copy:function(g){return this.set(g)},set:function(g,T,S,w,A){return A===void 0&&(A=!0),typeof g=="object"?(this._x=g.x||0,this._y=g.y||0,this._z=g.z||0,this._w=g.w||0):(this._x=g||0,this._y=T||0,this._z=S||0,this._w=w||0),A&&this.onChangeCallback(this),this},add:function(g){return this._x+=g.x,this._y+=g.y,this._z+=g.z,this._w+=g.w,this.onChangeCallback(this),this},subtract:function(g){return this._x-=g.x,this._y-=g.y,this._z-=g.z,this._w-=g.w,this.onChangeCallback(this),this},scale:function(g){return this._x*=g,this._y*=g,this._z*=g,this._w*=g,this.onChangeCallback(this),this},length:function(){var g=this.x,T=this.y,S=this.z,w=this.w;return Math.sqrt(g*g+T*T+S*S+w*w)},lengthSq:function(){var g=this.x,T=this.y,S=this.z,w=this.w;return g*g+T*T+S*S+w*w},normalize:function(){var g=this.x,T=this.y,S=this.z,w=this.w,A=g*g+T*T+S*S+w*w;return A>0&&(A=1/Math.sqrt(A),this._x=g*A,this._y=T*A,this._z=S*A,this._w=w*A),this.onChangeCallback(this),this},dot:function(g){return this.x*g.x+this.y*g.y+this.z*g.z+this.w*g.w},lerp:function(g,T){T===void 0&&(T=0);var S=this.x,w=this.y,A=this.z,M=this.w;return this.set(S+T*(g.x-S),w+T*(g.y-w),A+T*(g.z-A),M+T*(g.w-M))},rotationTo:function(g,T){var S=g.x*T.x+g.y*T.y+g.z*T.z;return S<-.999999?(d.copy(c).cross(g).length()<h&&d.copy(s).cross(g),d.normalize(),this.setAxisAngle(d,Math.PI)):S>.999999?this.set(0,0,0,1):(d.copy(g).cross(T),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+S,this.normalize())},setAxes:function(g,T,S){var w=m.val;return w[0]=T.x,w[3]=T.y,w[6]=T.z,w[1]=S.x,w[4]=S.y,w[7]=S.z,w[2]=-g.x,w[5]=-g.y,w[8]=-g.z,this.fromMat3(m).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(g,T){T=T*.5;var S=Math.sin(T);return this.set(S*g.x,S*g.y,S*g.z,Math.cos(T))},multiply:function(g){var T=this.x,S=this.y,w=this.z,A=this.w,M=g.x,R=g.y,P=g.z,b=g.w;return this.set(T*b+A*M+S*P-w*R,S*b+A*R+w*M-T*P,w*b+A*P+T*R-S*M,A*b-T*M-S*R-w*P)},slerp:function(g,T){var S=this.x,w=this.y,A=this.z,M=this.w,R=g.x,P=g.y,b=g.z,F=g.w,I=S*R+w*P+A*b+M*F;I<0&&(I=-I,R=-R,P=-P,b=-b,F=-F);var L=1-T,D=T;if(1-I>h){var O=Math.acos(I),z=Math.sin(O);L=Math.sin((1-T)*O)/z,D=Math.sin(T*O)/z}return this.set(L*S+D*R,L*w+D*P,L*A+D*b,L*M+D*F)},invert:function(){var g=this.x,T=this.y,S=this.z,w=this.w,A=g*g+T*T+S*S+w*w,M=A?1/A:0;return this.set(-g*M,-T*M,-S*M,w*M)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(g){g*=.5;var T=this.x,S=this.y,w=this.z,A=this.w,M=Math.sin(g),R=Math.cos(g);return this.set(T*R+A*M,S*R+w*M,w*R-S*M,A*R-T*M)},rotateY:function(g){g*=.5;var T=this.x,S=this.y,w=this.z,A=this.w,M=Math.sin(g),R=Math.cos(g);return this.set(T*R-w*M,S*R+A*M,w*R+T*M,A*R-S*M)},rotateZ:function(g){g*=.5;var T=this.x,S=this.y,w=this.z,A=this.w,M=Math.sin(g),R=Math.cos(g);return this.set(T*R+S*M,S*R-T*M,w*R+A*M,A*R-w*M)},calculateW:function(){var g=this.x,T=this.y,S=this.z;return this.w=-Math.sqrt(1-g*g-T*T-S*S),this},setFromEuler:function(g,T){var S=g.x/2,w=g.y/2,A=g.z/2,M=Math.cos(S),R=Math.cos(w),P=Math.cos(A),b=Math.sin(S),F=Math.sin(w),I=Math.sin(A);switch(g.order){case"XYZ":{this.set(b*R*P+M*F*I,M*F*P-b*R*I,M*R*I+b*F*P,M*R*P-b*F*I,T);break}case"YXZ":{this.set(b*R*P+M*F*I,M*F*P-b*R*I,M*R*I-b*F*P,M*R*P+b*F*I,T);break}case"ZXY":{this.set(b*R*P-M*F*I,M*F*P+b*R*I,M*R*I+b*F*P,M*R*P-b*F*I,T);break}case"ZYX":{this.set(b*R*P-M*F*I,M*F*P+b*R*I,M*R*I-b*F*P,M*R*P+b*F*I,T);break}case"YZX":{this.set(b*R*P+M*F*I,M*F*P+b*R*I,M*R*I-b*F*P,M*R*P-b*F*I,T);break}case"XZY":{this.set(b*R*P-M*F*I,M*F*P-b*R*I,M*R*I+b*F*P,M*R*P+b*F*I,T);break}}return this},setFromRotationMatrix:function(g){var T=g.val,S=T[0],w=T[4],A=T[8],M=T[1],R=T[5],P=T[9],b=T[2],F=T[6],I=T[10],L=S+R+I,D;return L>0?(D=.5/Math.sqrt(L+1),this.set((F-P)*D,(A-b)*D,(M-w)*D,.25/D)):S>R&&S>I?(D=2*Math.sqrt(1+S-R-I),this.set(.25*D,(w+M)/D,(A+b)/D,(F-P)/D)):R>I?(D=2*Math.sqrt(1+R-S-I),this.set((w+M)/D,.25*D,(P+F)/D,(A-b)/D)):(D=2*Math.sqrt(1+I-S-R),this.set((A+b)/D,(P+F)/D,.25*D,(M-w)/D)),this},fromMat3:function(g){var T=g.val,S=T[0]+T[4]+T[8],w;if(S>0)w=Math.sqrt(S+1),this.w=.5*w,w=.5/w,this._x=(T[7]-T[5])*w,this._y=(T[2]-T[6])*w,this._z=(T[3]-T[1])*w;else{var A=0;T[4]>T[0]&&(A=1),T[8]>T[A*3+A]&&(A=2);var M=n[A],R=n[M];w=Math.sqrt(T[A*3+A]-T[M*3+M]-T[R*3+R]+1),l[A]=.5*w,w=.5/w,l[M]=(T[M*3+A]+T[A*3+M])*w,l[R]=(T[R*3+A]+T[A*3+R])*w,this._x=l[0],this._y=l[1],this._z=l[2],this._w=(T[R*3+M]-T[M*3+R])*w}return this.onChangeCallback(this),this}});o.exports=p}),43396:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=function(u){return u*a.RAD_TO_DEG};o.exports=x}),74362:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1);var x=Math.random()*2*Math.PI;return e.x=Math.cos(x)*a,e.y=Math.sin(x)*a,e};o.exports=E}),60706:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1);var x=Math.random()*2*Math.PI,u=Math.random()*2-1,r=Math.sqrt(1-u*u)*a;return e.x=Math.cos(x)*r,e.y=Math.sin(x)*r,e.z=u*a,e};o.exports=E}),67421:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1),e.x=(Math.random()*2-1)*a,e.y=(Math.random()*2-1)*a,e.z=(Math.random()*2-1)*a,e.w=(Math.random()*2-1)*a,e};o.exports=E}),36305:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x,u=e.y;return e.x=x*Math.cos(a)-u*Math.sin(a),e.y=x*Math.sin(a)+u*Math.cos(a),e};o.exports=E}),11520:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=Math.cos(u),h=Math.sin(u),n=e.x-a,l=e.y-x;return e.x=n*r-l*h+a,e.y=n*h+l*r+x,e};o.exports=E}),1163:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r){var h=u+Math.atan2(e.y-x,e.x-a);return e.x=a+r*Math.cos(h),e.y=x+r*Math.sin(h),e};o.exports=E}),70336:(o=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r){return e.x=a+r*Math.cos(u),e.y=x+r*Math.sin(u),e};o.exports=E}),72678:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),x=e(37867),u=e(15746),r=new x,h=new u,n=new a,l=function(c,s,d){return h.setAxisAngle(s,d),r.fromRotationTranslation(h,n.set(0,0,0)),c.transformMat4(r)};o.exports=l}),2284:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e>0?Math.ceil(e):Math.floor(e)};o.exports=E}),41013:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=0),x===void 0&&(x=10);var u=Math.pow(x,-a);return Math.round(e*u)/u};o.exports=E}),16922:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){a===void 0&&(a=1),x===void 0&&(x=1),u===void 0&&(u=1),u*=Math.PI/e;for(var r=[],h=[],n=0;n<e;n++)x-=a*u,a+=x*u,r[n]=x,h[n]=a;return{sin:h,cos:r,length:e}};o.exports=E}),7602:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e<=a?0:e>=x?1:(e=(e-a)/(x-a),e*e*(3-2*e))};o.exports=E}),54261:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e=Math.max(0,Math.min(1,(e-a)/(x-a))),e*e*e*(e*(e*6-15)+10)};o.exports=E}),44408:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n){n===void 0&&(n=new a);var l=0,c=0,s=r*h;return u>0&&u<=s&&(u>r-1?(c=Math.floor(u/r),l=u-c*r):l=u),n.set(l,c)};o.exports=x}),85955:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n,l,c,s,d){d===void 0&&(d=new a);var m=Math.sin(l),p=Math.cos(l),g=p*c,T=m*c,S=-m*s,w=p*s,A=1/(g*w+S*-T);return d.x=w*A*u+-S*A*r+(n*S-h*w)*A,d.y=g*A*r+-T*A*u+(-n*g+h*T)*A,d};o.exports=x}),26099:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(43855),u=new a({initialize:function(h,n){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(n===void 0&&(n=h),this.x=h||0,this.y=n||0)},clone:function(){return new u(this.x,this.y)},copy:function(r){return this.x=r.x||0,this.y=r.y||0,this},setFromObject:function(r){return this.x=r.x||0,this.y=r.y||0,this},set:function(r,h){return h===void 0&&(h=r),this.x=r,this.y=h,this},setTo:function(r,h){return this.set(r,h)},setToPolar:function(r,h){return h==null&&(h=1),this.x=Math.cos(r)*h,this.y=Math.sin(r)*h,this},equals:function(r){return this.x===r.x&&this.y===r.y},fuzzyEquals:function(r,h){return x(this.x,r.x,h)&&x(this.y,r.y,h)},angle:function(){var r=Math.atan2(this.y,this.x);return r<0&&(r+=2*Math.PI),r},setAngle:function(r){return this.setToPolar(r,this.length())},add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r):(this.x=0,this.y=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(r){var h=r.x-this.x,n=r.y-this.y;return Math.sqrt(h*h+n*n)},distanceSq:function(r){var h=r.x-this.x,n=r.y-this.y;return h*h+n*n},length:function(){var r=this.x,h=this.y;return Math.sqrt(r*r+h*h)},setLength:function(r){return this.normalize().scale(r)},lengthSq:function(){var r=this.x,h=this.y;return r*r+h*h},normalize:function(){var r=this.x,h=this.y,n=r*r+h*h;return n>0&&(n=1/Math.sqrt(n),this.x=r*n,this.y=h*n),this},normalizeRightHand:function(){var r=this.x;return this.x=this.y*-1,this.y=r,this},normalizeLeftHand:function(){var r=this.x;return this.x=this.y,this.y=r*-1,this},dot:function(r){return this.x*r.x+this.y*r.y},cross:function(r){return this.x*r.y-this.y*r.x},lerp:function(r,h){h===void 0&&(h=0);var n=this.x,l=this.y;return this.x=n+h*(r.x-n),this.y=l+h*(r.y-l),this},transformMat3:function(r){var h=this.x,n=this.y,l=r.val;return this.x=l[0]*h+l[3]*n+l[6],this.y=l[1]*h+l[4]*n+l[7],this},transformMat4:function(r){var h=this.x,n=this.y,l=r.val;return this.x=l[0]*h+l[4]*n+l[12],this.y=l[1]*h+l[5]*n+l[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(r){var h=this.length();return h&&h>r&&this.scale(r/h),this},reflect:function(r){return r=r.clone().normalize(),this.subtract(r.scale(2*this.dot(r)))},mirror:function(r){return this.reflect(r).negate()},rotate:function(r){var h=Math.cos(r),n=Math.sin(r);return this.set(h*this.x-n*this.y,n*this.x+h*this.y)},project:function(r){var h=this.dot(r)/r.dot(r);return this.copy(r).scale(h)}});u.ZERO=new u,u.RIGHT=new u(1,0),u.LEFT=new u(-1,0),u.UP=new u(0,-1),u.DOWN=new u(0,1),u.ONE=new u(1,1),o.exports=u}),25836:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n){this.x=0,this.y=0,this.z=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=h||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(u){return this.x=Math.min(this.x,u.x),this.y=Math.min(this.y,u.y),this.z=Math.min(this.z,u.z),this},max:function(u){return this.x=Math.max(this.x,u.x),this.y=Math.max(this.y,u.y),this.z=Math.max(this.z,u.z),this},clone:function(){return new x(this.x,this.y,this.z)},addVectors:function(u,r){return this.x=u.x+r.x,this.y=u.y+r.y,this.z=u.z+r.z,this},subVectors:function(u,r){return this.x=u.x-r.x,this.y=u.y-r.y,this.z=u.z-r.z,this},crossVectors:function(u,r){var h=u.x,n=u.y,l=u.z,c=r.x,s=r.y,d=r.z;return this.x=n*d-l*s,this.y=l*c-h*d,this.z=h*s-n*c,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this},set:function(u,r,h){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=r||0,this.z=h||0),this},setFromMatrixPosition:function(u){return this.fromArray(u.val,12)},setFromMatrixColumn:function(u,r){return this.fromArray(u.val,r*4)},fromArray:function(u,r){return r===void 0&&(r=0),this.x=u[r],this.y=u[r+1],this.z=u[r+2],this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this},addScalar:function(u){return this.x+=u,this.y+=u,this.z+=u,this},addScale:function(u,r){return this.x+=u.x*r,this.y+=u.y*r,this.z+=u.z*r||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u,this.z*=u):(this.x=0,this.y=0,this.z=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(u){var r=u.x-this.x,h=u.y-this.y,n=u.z-this.z||0;return Math.sqrt(r*r+h*h+n*n)},distanceSq:function(u){var r=u.x-this.x,h=u.y-this.y,n=u.z-this.z||0;return r*r+h*h+n*n},length:function(){var u=this.x,r=this.y,h=this.z;return Math.sqrt(u*u+r*r+h*h)},lengthSq:function(){var u=this.x,r=this.y,h=this.z;return u*u+r*r+h*h},normalize:function(){var u=this.x,r=this.y,h=this.z,n=u*u+r*r+h*h;return n>0&&(n=1/Math.sqrt(n),this.x=u*n,this.y=r*n,this.z=h*n),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z},cross:function(u){var r=this.x,h=this.y,n=this.z,l=u.x,c=u.y,s=u.z;return this.x=h*s-n*c,this.y=n*l-r*s,this.z=r*c-h*l,this},lerp:function(u,r){r===void 0&&(r=0);var h=this.x,n=this.y,l=this.z;return this.x=h+r*(u.x-h),this.y=n+r*(u.y-n),this.z=l+r*(u.z-l),this},applyMatrix3:function(u){var r=this.x,h=this.y,n=this.z,l=u.val;return this.x=l[0]*r+l[3]*h+l[6]*n,this.y=l[1]*r+l[4]*h+l[7]*n,this.z=l[2]*r+l[5]*h+l[8]*n,this},applyMatrix4:function(u){var r=this.x,h=this.y,n=this.z,l=u.val,c=1/(l[3]*r+l[7]*h+l[11]*n+l[15]);return this.x=(l[0]*r+l[4]*h+l[8]*n+l[12])*c,this.y=(l[1]*r+l[5]*h+l[9]*n+l[13])*c,this.z=(l[2]*r+l[6]*h+l[10]*n+l[14])*c,this},transformMat3:function(u){var r=this.x,h=this.y,n=this.z,l=u.val;return this.x=r*l[0]+h*l[3]+n*l[6],this.y=r*l[1]+h*l[4]+n*l[7],this.z=r*l[2]+h*l[5]+n*l[8],this},transformMat4:function(u){var r=this.x,h=this.y,n=this.z,l=u.val;return this.x=l[0]*r+l[4]*h+l[8]*n+l[12],this.y=l[1]*r+l[5]*h+l[9]*n+l[13],this.z=l[2]*r+l[6]*h+l[10]*n+l[14],this},transformCoordinates:function(u){var r=this.x,h=this.y,n=this.z,l=u.val,c=r*l[0]+h*l[4]+n*l[8]+l[12],s=r*l[1]+h*l[5]+n*l[9]+l[13],d=r*l[2]+h*l[6]+n*l[10]+l[14],m=r*l[3]+h*l[7]+n*l[11]+l[15];return this.x=c/m,this.y=s/m,this.z=d/m,this},transformQuat:function(u){var r=this.x,h=this.y,n=this.z,l=u.x,c=u.y,s=u.z,d=u.w,m=d*r+c*n-s*h,p=d*h+s*r-l*n,g=d*n+l*h-c*r,T=-l*r-c*h-s*n;return this.x=m*d+T*-l+p*-s-g*-c,this.y=p*d+T*-c+g*-l-m*-s,this.z=g*d+T*-s+m*-c-p*-l,this},project:function(u){var r=this.x,h=this.y,n=this.z,l=u.val,c=l[0],s=l[1],d=l[2],m=l[3],p=l[4],g=l[5],T=l[6],S=l[7],w=l[8],A=l[9],M=l[10],R=l[11],P=l[12],b=l[13],F=l[14],I=l[15],L=1/(r*m+h*S+n*R+I);return this.x=(r*c+h*p+n*w+P)*L,this.y=(r*s+h*g+n*A+b)*L,this.z=(r*d+h*T+n*M+F)*L,this},projectViewMatrix:function(u,r){return this.applyMatrix4(u).applyMatrix4(r)},unprojectViewMatrix:function(u,r){return this.applyMatrix4(u).applyMatrix4(r)},unproject:function(u,r){var h=u.x,n=u.y,l=u.z,c=u.w,s=this.x-h,d=c-this.y-1-n,m=this.z;return this.x=2*s/l-1,this.y=2*d/c-1,this.z=2*m-1,this.project(r)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});x.ZERO=new x,x.RIGHT=new x(1,0,0),x.LEFT=new x(-1,0,0),x.UP=new x(0,-1,0),x.DOWN=new x(0,1,0),x.FORWARD=new x(0,0,1),x.BACK=new x(0,0,-1),x.ONE=new x(1,1,1),o.exports=x}),61369:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n,l){this.x=0,this.y=0,this.z=0,this.w=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=h||0,this.z=n||0,this.w=l||0)},clone:function(){return new x(this.x,this.y,this.z,this.w)},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this.w=u.w||0,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},set:function(u,r,h,n){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=r||0,this.z=h||0,this.w=n||0),this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this.w+=u.w||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this.w-=u.w||0,this},scale:function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},length:function(){var u=this.x,r=this.y,h=this.z,n=this.w;return Math.sqrt(u*u+r*r+h*h+n*n)},lengthSq:function(){var u=this.x,r=this.y,h=this.z,n=this.w;return u*u+r*r+h*h+n*n},normalize:function(){var u=this.x,r=this.y,h=this.z,n=this.w,l=u*u+r*r+h*h+n*n;return l>0&&(l=1/Math.sqrt(l),this.x=u*l,this.y=r*l,this.z=h*l,this.w=n*l),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z+this.w*u.w},lerp:function(u,r){r===void 0&&(r=0);var h=this.x,n=this.y,l=this.z,c=this.w;return this.x=h+r*(u.x-h),this.y=n+r*(u.y-n),this.z=l+r*(u.z-l),this.w=c+r*(u.w-c),this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this.w*=u.w||1,this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this.w/=u.w||1,this},distance:function(u){var r=u.x-this.x,h=u.y-this.y,n=u.z-this.z||0,l=u.w-this.w||0;return Math.sqrt(r*r+h*h+n*n+l*l)},distanceSq:function(u){var r=u.x-this.x,h=u.y-this.y,n=u.z-this.z||0,l=u.w-this.w||0;return r*r+h*h+n*n+l*l},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(u){var r=this.x,h=this.y,n=this.z,l=this.w,c=u.val;return this.x=c[0]*r+c[4]*h+c[8]*n+c[12]*l,this.y=c[1]*r+c[5]*h+c[9]*n+c[13]*l,this.z=c[2]*r+c[6]*h+c[10]*n+c[14]*l,this.w=c[3]*r+c[7]*h+c[11]*n+c[15]*l,this},transformQuat:function(u){var r=this.x,h=this.y,n=this.z,l=u.x,c=u.y,s=u.z,d=u.w,m=d*r+c*n-s*h,p=d*h+s*r-l*n,g=d*n+l*h-c*r,T=-l*r-c*h-s*n;return this.x=m*d+T*-l+p*-s-g*-c,this.y=p*d+T*-c+g*-l-m*-s,this.z=g*d+T*-s+m*-c-p*-l,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});x.prototype.sub=x.prototype.subtract,x.prototype.mul=x.prototype.multiply,x.prototype.div=x.prototype.divide,x.prototype.dist=x.prototype.distance,x.prototype.distSq=x.prototype.distanceSq,x.prototype.len=x.prototype.length,x.prototype.lenSq=x.prototype.lengthSq,o.exports=x}),60417:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return Math.abs(e-a)<=x};o.exports=E}),15994:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=x-a;return a+((e-a)%u+u)%u};o.exports=E}),31040:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){return Math.atan2(u-a,x-e)};o.exports=E}),55495:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)};o.exports=E}),128:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return Math.atan2(a.x-e.x,a.y-e.y)};o.exports=E}),41273:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){return Math.atan2(x-e,u-a)};o.exports=E}),1432:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=function(u){return u>Math.PI&&(u-=a.PI2),Math.abs(((u+a.TAU)%a.PI2-a.PI2)%a.PI2)};o.exports=x}),49127:((o,E,e)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),x=function(u,r){return a(r-u)};o.exports=x}),52285:((o,E,e)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),x=2*Math.PI,u=function(r,h){var n=a(h-r);return n>0&&(n-=x),n};o.exports=u}),67317:((o,E,e)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86554),x=function(u,r){return a(r-u)};o.exports=x}),12407:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};o.exports=E}),53993:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99472),x=function(){return a(-Math.PI,Math.PI)};o.exports=x}),86564:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99472),x=function(){return a(-180,180)};o.exports=x}),90154:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),x=function(u){return a(u+Math.PI)};o.exports=x}),48736:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=function(u,r,h){return h===void 0&&(h=.05),u===r||(Math.abs(r-u)<=h||Math.abs(r-u)>=a.PI2-h?u=r:(Math.abs(r-u)>Math.PI&&(r<u?r+=a.PI2:r-=a.PI2),r>u?u+=h:r<u&&(u-=h))),u};o.exports=x}),61430:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=a-e;if(x===0)return 0;var u=Math.floor((x- -180)/360);return x-u*360};o.exports=E}),86554:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),x=function(u){return a(u,-Math.PI,Math.PI)};o.exports=x}),30954:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),x=function(u){return a(u,-180,180)};o.exports=x}),25588:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:e(31040),BetweenPoints:e(55495),BetweenPointsY:e(128),BetweenY:e(41273),CounterClockwise:e(1432),GetClockwiseDistance:e(49127),GetCounterClockwiseDistance:e(52285),GetShortestDistance:e(67317),Normalize:e(12407),Random:e(53993),RandomDegrees:e(86564),Reverse:e(90154),RotateTo:e(48736),ShortestBetween:e(61430),Wrap:e(86554),WrapDegrees:e(30954)}}),36383:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};o.exports=E}),20339:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=e-x,h=a-u;return Math.sqrt(r*r+h*h)};o.exports=E}),52816:(o=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x-a.x,u=e.y-a.y;return Math.sqrt(x*x+u*u)};o.exports=E}),64559:(o=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.x-a.x,u=e.y-a.y;return x*x+u*u};o.exports=E}),82340:(o=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){return Math.max(Math.abs(e-x),Math.abs(a-u))};o.exports=E}),14390:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r){return r===void 0&&(r=2),Math.sqrt(Math.pow(x-e,r)+Math.pow(u-a,r))};o.exports=E}),2243:(o=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){return Math.abs(e-x)+Math.abs(a-u)};o.exports=E}),89774:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=e-x,h=a-u;return r*r+h*h};o.exports=E}),50994:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:e(20339),BetweenPoints:e(52816),BetweenPointsSquared:e(64559),Chebyshev:e(82340),Power:e(14390),Snake:e(2243),Squared:e(89774)}}),62640:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54178),x=e(41521),u=e(79980),r=e(85433),h=e(99140),n=e(48857),l=e(81596),c=e(59133),s=e(98516),d=e(35248),m=e(82500),p=e(49752);o.exports={Power0:l,Power1:c.Out,Power2:r.Out,Power3:s.Out,Power4:d.Out,Linear:l,Quad:c.Out,Cubic:r.Out,Quart:s.Out,Quint:d.Out,Sine:m.Out,Expo:n.Out,Circ:u.Out,Elastic:h.Out,Back:a.Out,Bounce:x.Out,Stepped:p,"Quad.easeIn":c.In,"Cubic.easeIn":r.In,"Quart.easeIn":s.In,"Quint.easeIn":d.In,"Sine.easeIn":m.In,"Expo.easeIn":n.In,"Circ.easeIn":u.In,"Elastic.easeIn":h.In,"Back.easeIn":a.In,"Bounce.easeIn":x.In,"Quad.easeOut":c.Out,"Cubic.easeOut":r.Out,"Quart.easeOut":s.Out,"Quint.easeOut":d.Out,"Sine.easeOut":m.Out,"Expo.easeOut":n.Out,"Circ.easeOut":u.Out,"Elastic.easeOut":h.Out,"Back.easeOut":a.Out,"Bounce.easeOut":x.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":r.InOut,"Quart.easeInOut":s.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":m.InOut,"Expo.easeInOut":n.InOut,"Circ.easeInOut":u.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":x.InOut}}),1639:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1.70158),e*e*((a+1)*e-a)};o.exports=E}),50099:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1.70158);var x=a*1.525;return(e*=2)<1?.5*(e*e*((x+1)*e-x)):.5*((e-=2)*e*((x+1)*e+x)+2)};o.exports=E}),41286:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1.70158),--e*e*((a+1)*e+a)+1};o.exports=E}),54178:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(1639),Out:e(41286),InOut:e(50099)}}),59590:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};o.exports=E}),41788:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=!1;return e<.5?(e=1-e*2,a=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,a?(1-e)*.5:e*.5+.5};o.exports=E}),69905:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};o.exports=E}),41521:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(59590),Out:e(69905),InOut:e(41788)}}),91861:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 1-Math.sqrt(1-e*e)};o.exports=E}),4177:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};o.exports=E}),57512:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.sqrt(1- --e*e)};o.exports=E}),79980:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(91861),Out:e(57512),InOut:e(4177)}}),51150:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*e*e};o.exports=E}),82820:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};o.exports=E}),35033:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return--e*e*e+1};o.exports=E}),85433:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(51150),Out:e(35033),InOut:e(82820)}}),69965:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===void 0&&(a=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var u=x/4;return a<1?a=1:u=x*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/x))};o.exports=E}),50665:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===void 0&&(a=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var u=x/4;return a<1?a=1:u=x*Math.asin(1/a)/(2*Math.PI),(e*=2)<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/x)):a*Math.pow(2,-10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/x)*.5+1};o.exports=E}),7744:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===void 0&&(a=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var u=x/4;return a<1?a=1:u=x*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*e)*Math.sin((e-u)*(2*Math.PI)/x)+1};o.exports=E}),99140:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(69965),Out:e(7744),InOut:e(50665)}}),24590:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return Math.pow(2,10*(e-1))-.001};o.exports=E}),87844:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};o.exports=E}),89433:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 1-Math.pow(2,-10*e)};o.exports=E}),48857:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(24590),Out:e(89433),InOut:e(87844)}}),48820:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Back:e(54178),Bounce:e(41521),Circular:e(79980),Cubic:e(85433),Elastic:e(99140),Expo:e(48857),Linear:e(81596),Quadratic:e(59133),Quartic:e(98516),Quintic:e(35248),Sine:e(82500),Stepped:e(49752)}}),7147:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e};o.exports=E}),81596:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=e(7147)}),34826:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*e};o.exports=E}),20544:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};o.exports=E}),92029:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*(2-e)};o.exports=E}),59133:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(34826),Out:e(92029),InOut:e(20544)}}),64413:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*e*e*e};o.exports=E}),78137:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};o.exports=E}),45840:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return 1- --e*e*e*e};o.exports=E}),98516:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(64413),Out:e(45840),InOut:e(78137)}}),87745:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e*e*e*e*e};o.exports=E}),16509:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};o.exports=E}),17868:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return--e*e*e*e*e+1};o.exports=E}),35248:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(87745),Out:e(17868),InOut:e(16509)}}),80461:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};o.exports=E}),34025:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};o.exports=E}),52768:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};o.exports=E}),82500:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(80461),Out:e(52768),InOut:e(34025)}}),72251:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1),e<=0?0:e>=1?1:((a*e|0)+1)*(1/a)};o.exports=E}),49752:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=e(72251)}),75698:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1e-4),Math.ceil(e-a)};o.exports=E}),43855:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=1e-4),Math.abs(e-a)<x};o.exports=E}),25777:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a=1e-4),Math.floor(e+a)};o.exports=E}),5470:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=1e-4),e>a-x};o.exports=E}),94977:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return x===void 0&&(x=1e-4),e<a+x};o.exports=E}),48379:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:e(75698),Equal:e(43855),Floor:e(25777),GreaterThan:e(5470),LessThan:e(94977)}}),75508:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),x=e(79291),u={Angle:e(25588),Distance:e(50994),Easing:e(48820),Fuzzy:e(48379),Interpolation:e(38289),Pow2:e(49001),Snap:e(73697),RandomDataGenerator:e(28453),Average:e(53307),Bernstein:e(85710),Between:e(30976),CatmullRom:e(87842),CeilTo:e(26302),Clamp:e(45319),DegToRad:e(39506),Difference:e(61241),Euler:e(38857),Factorial:e(6411),FloatBetween:e(99472),FloorTo:e(77623),FromPercent:e(62945),GetSpeed:e(38265),IsEven:e(78702),IsEvenStrict:e(94883),Linear:e(28915),LinearXY:e(94908),MaxAdd:e(86883),Median:e(50040),MinSub:e(37204),Percent:e(65201),RadToDeg:e(43396),RandomXY:e(74362),RandomXYZ:e(60706),RandomXYZW:e(67421),Rotate:e(36305),RotateAround:e(11520),RotateAroundDistance:e(1163),RotateTo:e(70336),RoundAwayFromZero:e(2284),RoundTo:e(41013),SinCosTableGenerator:e(16922),SmootherStep:e(54261),SmoothStep:e(7602),ToXY:e(44408),TransformXY:e(85955),Within:e(60417),Wrap:e(15994),Vector2:e(26099),Vector3:e(25836),Vector4:e(61369),Matrix3:e(94434),Matrix4:e(37867),Quaternion:e(15746),RotateVec3:e(72678)};u=x(!1,u,a),o.exports=u}),89318:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85710),x=function(u,r){for(var h=0,n=u.length-1,l=0;l<=n;l++)h+=Math.pow(1-r,n-l)*Math.pow(r,l)*u[l]*a(n,l);return h};o.exports=x}),77259:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87842),x=function(u,r){var h=u.length-1,n=h*r,l=Math.floor(n);return u[0]===u[h]?(r<0&&(l=Math.floor(n=h*(1+r))),a(n-l,u[(l-1+h)%h],u[l],u[(l+1)%h],u[(l+2)%h])):r<0?u[0]-(a(-n,u[0],u[0],u[1],u[1])-u[0]):r>1?u[h]-(a(n-h,u[h],u[h],u[h-1],u[h-1])-u[h]):a(n-l,u[l?l-1:0],u[l],u[h<l+1?h:l+1],u[h<l+2?h:l+2])};o.exports=x}),36316:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(r,h){var n=1-r;return n*n*n*h}function e(r,h){var n=1-r;return 3*n*n*r*h}function a(r,h){return 3*(1-r)*r*r*h}function x(r,h){return r*r*r*h}var u=function(r,h,n,l,c){return E(r,h)+e(r,n)+a(r,l)+x(r,c)};o.exports=u}),28392:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28915),x=function(u,r){var h=u.length-1,n=h*r,l=Math.floor(n);return r<0?a(u[0],u[1],n):r>1?a(u[h],u[h-1],h-n):a(u[l],u[l+1>h?h:l+1],n-l)};o.exports=x}),32112:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(u,r){var h=1-u;return h*h*r}function e(u,r){return 2*(1-u)*u*r}function a(u,r){return u*u*r}var x=function(u,r,h,n){return E(u,r)+e(u,h)+a(u,n)};o.exports=x}),47235:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7602),x=function(u,r,h){return r+(h-r)*a(u,0,1)};o.exports=x}),50178:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54261),x=function(u,r,h){return r+(h-r)*a(u,0,1)};o.exports=x}),38289:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bezier:e(89318),CatmullRom:e(77259),CubicBezier:e(36316),Linear:e(28392),QuadraticBezier:e(32112),SmoothStep:e(47235),SmootherStep:e(50178)}}),98439:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=Math.log(e)/.6931471805599453;return 1<<Math.ceil(a)};o.exports=E}),50030:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e>0&&(e&e-1)===0&&a>0&&(a&a-1)===0};o.exports=E}),81230:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e>0&&(e&e-1)===0};o.exports=E}),49001:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetNext:e(98439),IsSize:e(50030),IsValue:e(81230)}}),28453:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r){r===void 0&&(r=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],r&&this.init(r)},rnd:function(){var u=2091639*this.s0+this.c*23283064365386963e-26;return this.c=u|0,this.s0=this.s1,this.s1=this.s2,this.s2=u-this.c,this.s2},hash:function(u){var r,h=this.n;u=u.toString();for(var n=0;n<u.length;n++)h+=u.charCodeAt(n),r=.02519603282416938*h,h=r>>>0,r-=h,r*=h,h=r>>>0,r-=h,h+=r*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(u){typeof u=="string"?this.state(u):this.sow(u)},sow:function(u){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!u)for(var r=0;r<u.length&&u[r]!=null;r++){var h=u[r];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(u,r){return Math.floor(this.realInRange(0,r-u+1)+u)},between:function(u,r){return Math.floor(this.realInRange(0,r-u+1)+u)},realInRange:function(u,r){return this.frac()*(r-u)+u},normal:function(){return 1-2*this.frac()},uuid:function(){var u="",r="";for(r=u="";u++<36;r+=~u%5|u*3&4?(u^15?8^this.frac()*(u^20?16:4):4).toString(16):"-");return r},pick:function(u){return u[this.integerInRange(0,u.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(u){return u[~~(Math.pow(this.frac(),2)*(u.length-.5)+.5)]},timestamp:function(u,r){return this.realInRange(u||9466848e5,r||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(u){return typeof u=="string"&&u.match(/^!rnd/)&&(u=u.split(","),this.c=parseFloat(u[1]),this.s0=parseFloat(u[2]),this.s1=parseFloat(u[3]),this.s2=parseFloat(u[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(u){for(var r=u.length-1,h=r;h>0;h--){var n=Math.floor(this.frac()*(h+1)),l=u[n];u[n]=u[h],u[h]=l}return u}});o.exports=x}),63448:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){return x===void 0&&(x=0),a===0?e:(e-=x,e=a*Math.ceil(e/a),u?(x+e)/a:x+e)};o.exports=E}),56583:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){return x===void 0&&(x=0),a===0?e:(e-=x,e=a*Math.floor(e/a),u?(x+e)/a:x+e)};o.exports=E}),77720:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){return x===void 0&&(x=0),a===0?e:(e-=x,e=a*Math.round(e/a),u?(x+e)/a:x+e)};o.exports=E}),73697:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:e(63448),Floor:e(56583),To:e(77720)}}),85454:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(63595);var a=e(8054),x=e(79291),u={Actions:e(61061),Animations:e(60421),BlendModes:e(10312),Cache:e(83388),Cameras:e(26638),Core:e(42857),Class:e(83419),Create:e(15822),Curves:e(25410),Data:e(44965),Display:e(27460),DOM:e(84902),Events:e(93055),FX:e(66064),Game:e(50127),GameObjects:e(77856),Geom:e(55738),Input:e(14350),Loader:e(57777),Math:e(75508),Physics:e(44563),Plugins:e(18922),Renderer:e(36909),Scale:e(93364),ScaleModes:e(29795),Scene:e(97482),Scenes:e(62194),Structs:e(41392),Textures:e(27458),Tilemaps:e(62501),Time:e(90291),Tweens:e(43066),Utils:e(91799)};u.Sound=e(23717),u=x(!1,u,a),o.exports=u,e.g.Phaser=u}),71289:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92209),u=e(88571),r=new a({Extends:u,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Collision,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(n,l,c,s,d){u.call(this,n,l,c,s,d),this.body=null}});o.exports=r}),86689:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(39506),u=e(20339),r=e(89774),h=e(66022),n=e(95540),l=e(46975),c=e(72441),s=e(47956),d=e(37277),m=e(44594),p=e(26099),g=e(82248),T=new a({initialize:function(w){this.scene=w,this.systems=w.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,w.sys.events.once(m.BOOT,this.boot,this),w.sys.events.on(m.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(m.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new h(this.world));var S=this.systems.events;n(this.config,"customUpdate",!1)||S.on(m.UPDATE,this.world.update,this.world),S.on(m.POST_UPDATE,this.world.postUpdate,this.world),S.once(m.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(m.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(m.UPDATE,this.world.update,this.world)},getConfig:function(){var S=this.systems.game.config.physics,w=this.systems.settings.physics,A=l(n(w,"arcade",{}),n(S,"arcade",{}));return A},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(S,w,A,M,R){return A===void 0&&(A=null),M===void 0&&(M=null),R===void 0&&(R=A),this.world.collideObjects(S,w,A,M,R,!0)},collide:function(S,w,A,M,R){return A===void 0&&(A=null),M===void 0&&(M=null),R===void 0&&(R=A),this.world.collideObjects(S,w,A,M,R,!1)},collideTiles:function(S,w,A,M,R){return this.world.collideTiles(S,w,A,M,R)},overlapTiles:function(S,w,A,M,R){return this.world.overlapTiles(S,w,A,M,R)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(S,w,A,M,R,P){M===void 0&&(M=60);var b=Math.atan2(A-S.y,w-S.x);return S.body.acceleration.setToPolar(b,M),R!==void 0&&P!==void 0&&S.body.maxVelocity.set(R,P),b},accelerateToObject:function(S,w,A,M,R){return this.accelerateTo(S,w.x,w.y,A,M,R)},closest:function(S,w){w||(w=this.world.bodies.entries);for(var A=Number.MAX_VALUE,M=null,R=S.x,P=S.y,b=w.length,F=0;F<b;F++){var I=w[F],L=I.body||I;if(!(S===I||S===L||S===L.gameObject||S===L.center)){var D=r(R,P,L.center.x,L.center.y);D<A&&(M=I,A=D)}}return M},furthest:function(S,w){w||(w=this.world.bodies.entries);for(var A=-1,M=null,R=S.x,P=S.y,b=w.length,F=0;F<b;F++){var I=w[F],L=I.body||I;if(!(S===I||S===L||S===L.gameObject||S===L.center)){var D=r(R,P,L.center.x,L.center.y);D>A&&(M=I,A=D)}}return M},moveTo:function(S,w,A,M,R){M===void 0&&(M=60),R===void 0&&(R=0);var P=Math.atan2(A-S.y,w-S.x);return R>0&&(M=u(S.x,S.y,w,A)/(R/1e3)),S.body.velocity.setToPolar(P,M),P},moveToObject:function(S,w,A,M){return this.moveTo(S,w.x,w.y,A,M)},velocityFromAngle:function(S,w,A){return w===void 0&&(w=60),A===void 0&&(A=new p),A.setToPolar(x(S),w)},velocityFromRotation:function(S,w,A){return w===void 0&&(w=60),A===void 0&&(A=new p),A.setToPolar(S,w)},overlapRect:function(S,w,A,M,R,P){return s(this.world,S,w,A,M,R,P)},overlapCirc:function(S,w,A,M,R){return c(this.world,S,w,A,M,R)},shutdown:function(){if(this.world){var S=this.systems.events;S.off(m.UPDATE,this.world.update,this.world),S.off(m.POST_UPDATE,this.world.postUpdate,this.world),S.off(m.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(m.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",T,"arcadePhysics"),o.exports=T}),13759:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92209),u=e(68287),r=new a({Extends:u,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Collision,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(n,l,c,s,d){u.call(this,n,l,c,s,d),this.body=null}});o.exports=r}),37742:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(78389),u=e(37747),r=e(63012),h=e(43396),n=e(87841),l=e(37303),c=e(95829),s=e(26099),d=new a({Mixins:[x],initialize:function(p,g){var T=64,S=64,w={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},A=g!==void 0;A&&g.displayWidth&&(T=g.displayWidth,S=g.displayHeight),A||(g=w),this.world=p,this.gameObject=A?g:void 0,this.isBody=!0,this.transform={x:g.x,y:g.y,rotation:g.angle,scaleX:g.scaleX,scaleY:g.scaleY,displayOriginX:g.displayOriginX,displayOriginY:g.displayOriginY},this.debugShowBody=p.defaults.debugShowBody,this.debugShowVelocity=p.defaults.debugShowVelocity,this.debugBodyColor=p.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new s,this.position=new s(g.x-g.scaleX*g.displayOriginX,g.y-g.scaleY*g.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=g.angle,this.preRotation=g.angle,this.width=T,this.height=S,this.sourceWidth=T,this.sourceHeight=S,g.frame&&(this.sourceWidth=g.frame.realWidth,this.sourceHeight=g.frame.realHeight),this.halfWidth=Math.abs(T/2),this.halfHeight=Math.abs(S/2),this.center=new s(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new s,this.newVelocity=new s,this.deltaMax=new s,this.acceleration=new s,this.allowDrag=!0,this.drag=new s,this.allowGravity=!0,this.gravity=new s,this.bounce=new s,this.worldBounce=null,this.customBoundsRectangle=p.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new s(1e4,1e4),this.maxSpeed=-1,this.friction=new s(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=u.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new s(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=c(!1),this.touching=c(!0),this.wasTouching=c(!0),this.blocked=c(!0),this.syncBounds=!1,this.physicsType=u.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=g.scaleX,this._sy=g.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new n,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var m=this.gameObject,p=this.transform;if(m.parentContainer){var g=m.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);p.x=g.tx,p.y=g.ty,p.rotation=h(g.rotation),p.scaleX=g.scaleX,p.scaleY=g.scaleY,p.displayOriginX=m.displayOriginX,p.displayOriginY=m.displayOriginY}else p.x=m.x,p.y=m.y,p.rotation=m.angle,p.scaleX=m.scaleX,p.scaleY=m.scaleY,p.displayOriginX=m.displayOriginX,p.displayOriginY=m.displayOriginY;var T=!1;if(this.syncBounds){var S=m.getBounds(this._bounds);this.width=S.width,this.height=S.height,T=!0}else{var w=Math.abs(p.scaleX),A=Math.abs(p.scaleY);(this._sx!==w||this._sy!==A)&&(this.width=this.sourceWidth*w,this.height=this.sourceHeight*A,this._sx=w,this._sy=A,T=!0)}T&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var m=this.transform;this.position.x=m.x+m.scaleX*(this.offset.x-m.displayOriginX),this.position.y=m.y+m.scaleY*(this.offset.y-m.displayOriginY),this.updateCenter()},resetFlags:function(m){m===void 0&&(m=!1);var p=this.wasTouching,g=this.touching,T=this.blocked;m?c(!0,p):(p.none=g.none,p.up=g.up,p.down=g.down,p.left=g.left,p.right=g.right),c(!0,g),c(!0,T),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(m,p){if(m&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var g=this.position;this.prev.x=g.x,this.prev.y=g.y,this.prevFrame.x=g.x,this.prevFrame.y=g.y}m&&this.update(p)},update:function(m){var p=this.prev,g=this.position,T=this.velocity;if(p.set(g.x,g.y),!this.moves){this._dx=g.x-p.x,this._dy=g.y-p.y;return}if(this.directControl){var S=this.autoFrame;T.set((g.x-S.x)/m,(g.y-S.y)/m),this.world.updateMotion(this,m),this._dx=g.x-S.x,this._dy=g.y-S.y}else this.world.updateMotion(this,m),this.newVelocity.set(T.x*m,T.y*m),g.add(this.newVelocity),this._dx=g.x-p.x,this._dy=g.y-p.y;var w=T.x,A=T.y;if(this.updateCenter(),this.angle=Math.atan2(A,w),this.speed=Math.sqrt(w*w+A*A),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var M=this.blocked;this.world.emit(r.WORLD_BOUNDS,this,M.up,M.down,M.left,M.right)}},postUpdate:function(){var m=this.position,p=m.x-this.prevFrame.x,g=m.y-this.prevFrame.y,T=this.gameObject;if(this.moves){var S=this.deltaMax.x,w=this.deltaMax.y;S!==0&&p!==0&&(p<0&&p<-S?p=-S:p>0&&p>S&&(p=S)),w!==0&&g!==0&&(g<0&&g<-w?g=-w:g>0&&g>w&&(g=w)),T&&(T.x+=p,T.y+=g)}p<0?this.facing=u.FACING_LEFT:p>0&&(this.facing=u.FACING_RIGHT),g<0?this.facing=u.FACING_UP:g>0&&(this.facing=u.FACING_DOWN),this.allowRotation&&T&&(T.angle+=this.deltaZ()),this._tx=p,this._ty=g,this.autoFrame.set(m.x,m.y)},setBoundsRectangle:function(m){return this.customBoundsRectangle=m||this.world.bounds,this},checkWorldBounds:function(){var m=this.position,p=this.velocity,g=this.blocked,T=this.customBoundsRectangle,S=this.world.checkCollision,w=this.worldBounce?-this.worldBounce.x:-this.bounce.x,A=this.worldBounce?-this.worldBounce.y:-this.bounce.y,M=!1;return m.x<T.x&&S.left?(m.x=T.x,p.x*=w,g.left=!0,M=!0):this.right>T.right&&S.right&&(m.x=T.right-this.width,p.x*=w,g.right=!0,M=!0),m.y<T.y&&S.up?(m.y=T.y,p.y*=A,g.up=!0,M=!0):this.bottom>T.bottom&&S.down&&(m.y=T.bottom-this.height,p.y*=A,g.down=!0,M=!0),M&&(this.blocked.none=!1,this.updateCenter()),M},setOffset:function(m,p){return p===void 0&&(p=m),this.offset.set(m,p),this},setGameObject:function(m,p){if(p===void 0&&(p=!0),!m||!m.hasTransformComponent)return this;var g=this.world;return this.gameObject&&this.gameObject.body&&(g.disable(this.gameObject),this.gameObject.body=null),m.body&&g.disable(m),this.gameObject=m,m.body=this,this.setSize(),this.enable=p,this},setSize:function(m,p,g){g===void 0&&(g=!0);var T=this.gameObject;if(T&&(!m&&T.frame&&(m=T.frame.realWidth),!p&&T.frame&&(p=T.frame.realHeight)),this.sourceWidth=m,this.sourceHeight=p,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),g&&T&&T.getCenter){var S=(T.width-m)/2,w=(T.height-p)/2;this.offset.set(S,w)}return this.isCircle=!1,this.radius=0,this},setCircle:function(m,p,g){return p===void 0&&(p=this.offset.x),g===void 0&&(g=this.offset.y),m>0?(this.isCircle=!0,this.radius=m,this.sourceWidth=m*2,this.sourceHeight=m*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(p,g),this.updateCenter()):this.isCircle=!1,this},reset:function(m,p){this.stop();var g=this.gameObject;g&&(g.setPosition(m,p),this.rotation=g.angle,this.preRotation=g.angle);var T=this.position;g&&g.getTopLeft?g.getTopLeft(T):T.set(m,p),this.prev.copy(T),this.prevFrame.copy(T),this.autoFrame.copy(T),g&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(m){return m.x=this.x,m.y=this.y,m.right=this.right,m.bottom=this.bottom,m},hitTest:function(m,p){if(!this.isCircle)return l(this,m,p);if(this.radius>0&&m>=this.left&&m<=this.right&&p>=this.top&&p<=this.bottom){var g=(this.center.x-m)*(this.center.x-m),T=(this.center.y-p)*(this.center.y-p);return g+T<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(m){var p=this.position,g=p.x+this.halfWidth,T=p.y+this.halfHeight;this.debugShowBody&&(m.lineStyle(m.defaultStrokeWidth,this.debugBodyColor),this.isCircle?m.strokeCircle(g,T,this.width/2):(this.checkCollision.up&&m.lineBetween(p.x,p.y,p.x+this.width,p.y),this.checkCollision.right&&m.lineBetween(p.x+this.width,p.y,p.x+this.width,p.y+this.height),this.checkCollision.down&&m.lineBetween(p.x,p.y+this.height,p.x+this.width,p.y+this.height),this.checkCollision.left&&m.lineBetween(p.x,p.y,p.x,p.y+this.height))),this.debugShowVelocity&&(m.lineStyle(m.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),m.lineBetween(g,T,g+this.velocity.x/2,T+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(m){return m===void 0&&(m=!0),this.directControl=m,this},setCollideWorldBounds:function(m,p,g,T){m===void 0&&(m=!0),this.collideWorldBounds=m;var S=p!==void 0,w=g!==void 0;return(S||w)&&(this.worldBounce||(this.worldBounce=new s),S&&(this.worldBounce.x=p),w&&(this.worldBounce.y=g)),T!==void 0&&(this.onWorldBounds=T),this},setVelocity:function(m,p){return this.velocity.set(m,p),m=this.velocity.x,p=this.velocity.y,this.speed=Math.sqrt(m*m+p*p),this},setVelocityX:function(m){return this.setVelocity(m,this.velocity.y)},setVelocityY:function(m){return this.setVelocity(this.velocity.x,m)},setMaxVelocity:function(m,p){return this.maxVelocity.set(m,p),this},setMaxVelocityX:function(m){return this.maxVelocity.x=m,this},setMaxVelocityY:function(m){return this.maxVelocity.y=m,this},setMaxSpeed:function(m){return this.maxSpeed=m,this},setSlideFactor:function(m,p){return this.slideFactor.set(m,p),this},setBounce:function(m,p){return this.bounce.set(m,p),this},setBounceX:function(m){return this.bounce.x=m,this},setBounceY:function(m){return this.bounce.y=m,this},setAcceleration:function(m,p){return this.acceleration.set(m,p),this},setAccelerationX:function(m){return this.acceleration.x=m,this},setAccelerationY:function(m){return this.acceleration.y=m,this},setAllowDrag:function(m){return m===void 0&&(m=!0),this.allowDrag=m,this},setAllowGravity:function(m){return m===void 0&&(m=!0),this.allowGravity=m,this},setAllowRotation:function(m){return m===void 0&&(m=!0),this.allowRotation=m,this},setDrag:function(m,p){return this.drag.set(m,p),this},setDamping:function(m){return this.useDamping=m,this},setDragX:function(m){return this.drag.x=m,this},setDragY:function(m){return this.drag.y=m,this},setGravity:function(m,p){return this.gravity.set(m,p),this},setGravityX:function(m){return this.gravity.x=m,this},setGravityY:function(m){return this.gravity.y=m,this},setFriction:function(m,p){return this.friction.set(m,p),this},setFrictionX:function(m){return this.friction.x=m,this},setFrictionY:function(m){return this.friction.y=m,this},setAngularVelocity:function(m){return this.angularVelocity=m,this},setAngularAcceleration:function(m){return this.angularAcceleration=m,this},setAngularDrag:function(m){return this.angularDrag=m,this},setMass:function(m){return this.mass=m,this},setImmovable:function(m){return m===void 0&&(m=!0),this.immovable=m,this},setEnable:function(m){return m===void 0&&(m=!0),this.enable=m,this},processX:function(m,p,g,T){this.x+=m,this.updateCenter(),p!==null&&(this.velocity.x=p*this.slideFactor.x);var S=this.blocked;g&&(S.left=!0,S.none=!1),T&&(S.right=!0,S.none=!1)},processY:function(m,p,g,T){this.y+=m,this.updateCenter(),p!==null&&(this.velocity.y=p*this.slideFactor.y);var S=this.blocked;g&&(S.up=!0,S.none=!1),T&&(S.down=!0,S.none=!1)},x:{get:function(){return this.position.x},set:function(m){this.position.x=m}},y:{get:function(){return this.position.y},set:function(m){this.position.y=m}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=d}),79342:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n,l,c,s,d){this.world=r,this.name="",this.active=!0,this.overlapOnly=h,this.object1=n,this.object2=l,this.collideCallback=c,this.processCallback=s,this.callbackContext=d},setName:function(u){return this.name=u,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});o.exports=x}),66022:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71289),x=e(13759),u=e(37742),r=e(83419),h=e(37747),n=e(60758),l=e(72624),c=e(71464),s=new r({initialize:function(m){this.world=m,this.scene=m.scene,this.sys=m.scene.sys},collider:function(d,m,p,g,T){return this.world.addCollider(d,m,p,g,T)},overlap:function(d,m,p,g,T){return this.world.addOverlap(d,m,p,g,T)},existing:function(d,m){var p=m?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(d,p),d},staticImage:function(d,m,p,g){var T=new a(this.scene,d,m,p,g);return this.sys.displayList.add(T),this.world.enableBody(T,h.STATIC_BODY),T},image:function(d,m,p,g){var T=new a(this.scene,d,m,p,g);return this.sys.displayList.add(T),this.world.enableBody(T,h.DYNAMIC_BODY),T},staticSprite:function(d,m,p,g){var T=new x(this.scene,d,m,p,g);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,h.STATIC_BODY),T},sprite:function(d,m,p,g){var T=new x(this.scene,d,m,p,g);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,h.DYNAMIC_BODY),T},staticGroup:function(d,m){return this.sys.updateList.add(new c(this.world,this.world.scene,d,m))},group:function(d,m){return this.sys.updateList.add(new n(this.world,this.world.scene,d,m))},body:function(d,m,p,g){var T=new u(this.world);return T.position.set(d,m),p&&g&&T.setSize(p,g),this.world.add(T,h.DYNAMIC_BODY),T},staticBody:function(d,m,p,g){var T=new l(this.world);return T.position.set(d,m),p&&g&&T.setSize(p,g),this.world.add(T,h.STATIC_BODY),T},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=s}),79599:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=0;if(!Array.isArray(e))a=e;else for(var x=0;x<e.length;x++)a|=e[x];return a};o.exports=E}),64897:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),x=function(u,r,h,n){var l=0,c=u.deltaAbsX()+r.deltaAbsX()+n;return u._dx===0&&r._dx===0?(u.embedded=!0,r.embedded=!0):u._dx>r._dx?(l=u.right-r.x,l>c&&!h||u.checkCollision.right===!1||r.checkCollision.left===!1?l=0:(u.touching.none=!1,u.touching.right=!0,r.touching.none=!1,r.touching.left=!0,r.physicsType===a.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.right=!0),u.physicsType===a.STATIC_BODY&&!h&&(r.blocked.none=!1,r.blocked.left=!0))):u._dx<r._dx&&(l=u.x-r.width-r.x,-l>c&&!h||u.checkCollision.left===!1||r.checkCollision.right===!1?l=0:(u.touching.none=!1,u.touching.left=!0,r.touching.none=!1,r.touching.right=!0,r.physicsType===a.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.left=!0),u.physicsType===a.STATIC_BODY&&!h&&(r.blocked.none=!1,r.blocked.right=!0))),u.overlapX=l,r.overlapX=l,l};o.exports=x}),45170:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),x=function(u,r,h,n){var l=0,c=u.deltaAbsY()+r.deltaAbsY()+n;return u._dy===0&&r._dy===0?(u.embedded=!0,r.embedded=!0):u._dy>r._dy?(l=u.bottom-r.y,l>c&&!h||u.checkCollision.down===!1||r.checkCollision.up===!1?l=0:(u.touching.none=!1,u.touching.down=!0,r.touching.none=!1,r.touching.up=!0,r.physicsType===a.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.down=!0),u.physicsType===a.STATIC_BODY&&!h&&(r.blocked.none=!1,r.blocked.up=!0))):u._dy<r._dy&&(l=u.y-r.bottom,-l>c&&!h||u.checkCollision.up===!1||r.checkCollision.down===!1?l=0:(u.touching.none=!1,u.touching.up=!0,r.touching.none=!1,r.touching.down=!0,r.physicsType===a.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.up=!0),u.physicsType===a.STATIC_BODY&&!h&&(r.blocked.none=!1,r.blocked.down=!0))),u.overlapY=l,r.overlapY=l,l};o.exports=x}),60758:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13759),x=e(83419),u=e(78389),r=e(37747),h=e(95540),n=e(26479),l=e(41212),c=new x({Extends:n,Mixins:[u],initialize:function(d,m,p,g){if(!p&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(l(p))g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&l(p[0])){var T=this;p.forEach(function(S){S.internalCreateCallback=T.createCallbackHandler,S.internalRemoveCallback=T.removeCallbackHandler,S.classType=h(S,"classType",a)}),g=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=d,g&&(g.classType=h(g,"classType",a)),this.physicsType=r.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:h(g,"collideWorldBounds",!1),setBoundsRectangle:h(g,"customBoundsRectangle",null),setAccelerationX:h(g,"accelerationX",0),setAccelerationY:h(g,"accelerationY",0),setAllowDrag:h(g,"allowDrag",!0),setAllowGravity:h(g,"allowGravity",!0),setAllowRotation:h(g,"allowRotation",!0),setDamping:h(g,"useDamping",!1),setBounceX:h(g,"bounceX",0),setBounceY:h(g,"bounceY",0),setDragX:h(g,"dragX",0),setDragY:h(g,"dragY",0),setEnable:h(g,"enable",!0),setGravityX:h(g,"gravityX",0),setGravityY:h(g,"gravityY",0),setFrictionX:h(g,"frictionX",0),setFrictionY:h(g,"frictionY",0),setMaxSpeed:h(g,"maxSpeed",-1),setMaxVelocityX:h(g,"maxVelocityX",1e4),setMaxVelocityY:h(g,"maxVelocityY",1e4),setVelocityX:h(g,"velocityX",0),setVelocityY:h(g,"velocityY",0),setAngularVelocity:h(g,"angularVelocity",0),setAngularAcceleration:h(g,"angularAcceleration",0),setAngularDrag:h(g,"angularDrag",0),setMass:h(g,"mass",1),setImmovable:h(g,"immovable",!1)},n.call(this,m,p,g),this.type="PhysicsGroup"},createCallbackHandler:function(s){s.body||this.world.enableBody(s,r.DYNAMIC_BODY);var d=s.body;for(var m in this.defaults)d[m](this.defaults[m])},removeCallbackHandler:function(s){s.body&&this.world.disableBody(s)},setVelocity:function(s,d,m){m===void 0&&(m=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.set(s+g*m,d+g*m);return this},setVelocityX:function(s,d){d===void 0&&(d=0);for(var m=this.getChildren(),p=0;p<m.length;p++)m[p].body.velocity.x=s+p*d;return this},setVelocityY:function(s,d){d===void 0&&(d=0);for(var m=this.getChildren(),p=0;p<m.length;p++)m[p].body.velocity.y=s+p*d;return this}});o.exports=c}),3017:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E,e,a,x,u,r,h,n,l,c,s,d,m,p,g,T,S,w=function(F,I,L){E=F,e=I;var D=E.velocity.x,O=e.velocity.x;return a=E.pushable,l=E._dx<0,c=E._dx>0,s=E._dx===0,g=Math.abs(E.right-e.x)<=Math.abs(e.right-E.x),h=O-D*E.bounce.x,x=e.pushable,d=e._dx<0,m=e._dx>0,p=e._dx===0,T=!g,n=D-O*e.bounce.x,S=Math.abs(L),A()},A=function(){return c&&g&&e.blocked.right?(E.processX(-S,h,!1,!0),1):l&&T&&e.blocked.left?(E.processX(S,h,!0),1):m&&T&&E.blocked.right?(e.processX(-S,n,!1,!0),2):d&&g&&E.blocked.left?(e.processX(S,n,!0),2):0},M=function(){var F=E.velocity.x,I=e.velocity.x,L=Math.sqrt(I*I*e.mass/E.mass)*(I>0?1:-1),D=Math.sqrt(F*F*E.mass/e.mass)*(F>0?1:-1),O=(L+D)*.5;return L-=O,D-=O,u=O+L*E.bounce.x,r=O+D*e.bounce.x,l&&T?R(0):d&&g?R(1):c&&g?R(2):m&&T?R(3):!1},R=function(F){if(a&&x)S*=.5,F===0||F===3?(E.processX(S,u),e.processX(-S,r)):(E.processX(-S,u),e.processX(S,r));else if(a&&!x)F===0||F===3?E.processX(S,h,!0):E.processX(-S,h,!1,!0);else if(!a&&x)F===0||F===3?e.processX(-S,n,!1,!0):e.processX(S,n,!0);else{var I=S*.5;F===0?p?(E.processX(S,0,!0),e.processX(0,null,!1,!0)):m?(E.processX(I,0,!0),e.processX(-I,0,!1,!0)):(E.processX(I,e.velocity.x,!0),e.processX(-I,null,!1,!0)):F===1?s?(E.processX(0,null,!1,!0),e.processX(S,0,!0)):c?(E.processX(-I,0,!1,!0),e.processX(I,0,!0)):(E.processX(-I,null,!1,!0),e.processX(I,E.velocity.x,!0)):F===2?p?(E.processX(-S,0,!1,!0),e.processX(0,null,!0)):d?(E.processX(-I,0,!1,!0),e.processX(I,0,!0)):(E.processX(-I,e.velocity.x,!1,!0),e.processX(I,null,!0)):F===3&&(s?(E.processX(0,null,!0),e.processX(-S,0,!1,!0)):l?(E.processX(I,0,!0),e.processX(-I,0,!1,!0)):(E.processX(I,e.velocity.y,!0),e.processX(-I,null,!1,!0)))}return!0},P=function(F){if(F===1?e.velocity.x=0:g?e.processX(S,n,!0):e.processX(-S,n,!1,!0),E.moves){var I=E.directControl?E.y-E.autoFrame.y:E.y-E.prev.y;e.y+=I*E.friction.y,e._dy=e.y-e.prev.y}},b=function(F){if(F===2?E.velocity.x=0:T?E.processX(S,h,!0):E.processX(-S,h,!1,!0),e.moves){var I=e.directControl?e.y-e.autoFrame.y:e.y-e.prev.y;E.y+=I*e.friction.y,E._dy=E.y-E.prev.y}};o.exports={BlockCheck:A,Check:M,Set:w,Run:R,RunImmovableBody1:P,RunImmovableBody2:b}}),47962:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E,e,a,x,u,r,h,n,l,c,s,d,m,p,g,T,S,w=function(F,I,L){E=F,e=I;var D=E.velocity.y,O=e.velocity.y;return a=E.pushable,l=E._dy<0,c=E._dy>0,s=E._dy===0,g=Math.abs(E.bottom-e.y)<=Math.abs(e.bottom-E.y),h=O-D*E.bounce.y,x=e.pushable,d=e._dy<0,m=e._dy>0,p=e._dy===0,T=!g,n=D-O*e.bounce.y,S=Math.abs(L),A()},A=function(){return c&&g&&e.blocked.down?(E.processY(-S,h,!1,!0),1):l&&T&&e.blocked.up?(E.processY(S,h,!0),1):m&&T&&E.blocked.down?(e.processY(-S,n,!1,!0),2):d&&g&&E.blocked.up?(e.processY(S,n,!0),2):0},M=function(){var F=E.velocity.y,I=e.velocity.y,L=Math.sqrt(I*I*e.mass/E.mass)*(I>0?1:-1),D=Math.sqrt(F*F*E.mass/e.mass)*(F>0?1:-1),O=(L+D)*.5;return L-=O,D-=O,u=O+L*E.bounce.y,r=O+D*e.bounce.y,l&&T?R(0):d&&g?R(1):c&&g?R(2):m&&T?R(3):!1},R=function(F){if(a&&x)S*=.5,F===0||F===3?(E.processY(S,u),e.processY(-S,r)):(E.processY(-S,u),e.processY(S,r));else if(a&&!x)F===0||F===3?E.processY(S,h,!0):E.processY(-S,h,!1,!0);else if(!a&&x)F===0||F===3?e.processY(-S,n,!1,!0):e.processY(S,n,!0);else{var I=S*.5;F===0?p?(E.processY(S,0,!0),e.processY(0,null,!1,!0)):m?(E.processY(I,0,!0),e.processY(-I,0,!1,!0)):(E.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)):F===1?s?(E.processY(0,null,!1,!0),e.processY(S,0,!0)):c?(E.processY(-I,0,!1,!0),e.processY(I,0,!0)):(E.processY(-I,null,!1,!0),e.processY(I,E.velocity.y,!0)):F===2?p?(E.processY(-S,0,!1,!0),e.processY(0,null,!0)):d?(E.processY(-I,0,!1,!0),e.processY(I,0,!0)):(E.processY(-I,e.velocity.y,!1,!0),e.processY(I,null,!0)):F===3&&(s?(E.processY(0,null,!0),e.processY(-S,0,!1,!0)):l?(E.processY(I,0,!0),e.processY(-I,0,!1,!0)):(E.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)))}return!0},P=function(F){if(F===1?e.velocity.y=0:g?e.processY(S,n,!0):e.processY(-S,n,!1,!0),E.moves){var I=E.directControl?E.x-E.autoFrame.x:E.x-E.prev.x;e.x+=I*E.friction.x,e._dx=e.x-e.prev.x}},b=function(F){if(F===2?E.velocity.y=0:T?E.processY(S,h,!0):E.processY(-S,h,!1,!0),e.moves){var I=e.directControl?e.x-e.autoFrame.x:e.x-e.prev.x;E.x+=I*e.friction.x,E._dx=E.x-E.prev.x}};o.exports={BlockCheck:A,Check:M,Set:w,Run:R,RunImmovableBody1:P,RunImmovableBody2:b}}),14087:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64897),x=e(3017),u=function(r,h,n,l,c){c===void 0&&(c=a(r,h,n,l));var s=r.immovable,d=h.immovable;if(n||c===0||s&&d||r.customSeparateX||h.customSeparateX)return c!==0||r.embedded&&h.embedded;var m=x.Set(r,h,c);return!s&&!d?m>0?!0:x.Check():(s?x.RunImmovableBody1(m):d&&x.RunImmovableBody2(m),!0)};o.exports=u}),89936:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45170),x=e(47962),u=function(r,h,n,l,c){c===void 0&&(c=a(r,h,n,l));var s=r.immovable,d=h.immovable;if(n||c===0||s&&d||r.customSeparateY||h.customSeparateY)return c!==0||r.embedded&&h.embedded;var m=x.Set(r,h,c);return!s&&!d?m>0?!0:x.Check():(s?x.RunImmovableBody1(m):d&&x.RunImmovableBody2(m),!0)};o.exports=u}),95829:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===void 0&&(a={}),a.none=e,a.up=!1,a.down=!1,a.left=!1,a.right=!1,e||(a.up=!0,a.down=!0,a.left=!0,a.right=!0),a};o.exports=E}),72624:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),x=e(83419),u=e(78389),r=e(37747),h=e(37303),n=e(95829),l=e(26099),c=new x({Mixins:[u],initialize:function(d,m){var p=64,g=64,T={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},S=m!==void 0;S&&m.displayWidth&&(p=m.displayWidth,g=m.displayHeight),S||(m=T),this.world=d,this.gameObject=S?m:void 0,this.isBody=!0,this.debugShowBody=d.defaults.debugShowStaticBody,this.debugBodyColor=d.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(m.x-p*m.originX,m.y-g*m.originY),this.width=p,this.height=g,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=l.ZERO,this.allowGravity=!1,this.gravity=l.ZERO,this.bounce=l.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=n(!1),this.touching=n(!0),this.wasTouching=n(!0),this.blocked=n(!0),this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(s,d,m){if(d===void 0&&(d=!0),m===void 0&&(m=!0),!s||!s.hasTransformComponent)return this;var p=this.world;return this.gameObject&&this.gameObject.body&&(p.disable(this.gameObject),this.gameObject.body=null),s.body&&p.disable(s),this.gameObject=s,s.body=this,this.setSize(),d&&this.updateFromGameObject(),this.enable=m,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var s=this.gameObject;return s.getTopLeft(this.position),this.width=s.displayWidth,this.height=s.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(s,d){return d===void 0&&(d=s),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(s,d),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(s,d,m){m===void 0&&(m=!0);var p=this.gameObject;if(p&&p.frame&&(s||(s=p.frame.realWidth),d||(d=p.frame.realHeight)),this.world.staticTree.remove(this),this.width=s,this.height=d,this.halfWidth=Math.floor(s/2),this.halfHeight=Math.floor(d/2),m&&p&&p.getCenter){var g=p.displayWidth/2,T=p.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(g-this.halfWidth,T-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(s,d,m){return d===void 0&&(d=this.offset.x),m===void 0&&(m=this.offset.y),s>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=s,this.width=s*2,this.height=s*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(d,m),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(s,d){var m=this.gameObject;s===void 0&&(s=m.x),d===void 0&&(d=m.y),this.world.staticTree.remove(this),m.setPosition(s,d),m.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(s){return s.x=this.x,s.y=this.y,s.right=this.right,s.bottom=this.bottom,s},hitTest:function(s,d){return this.isCircle?a(this,s,d):h(this,s,d)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(s){var d=this.position,m=d.x+this.halfWidth,p=d.y+this.halfHeight;this.debugShowBody&&(s.lineStyle(s.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?s.strokeCircle(m,p,this.width/2):s.strokeRect(d.x,d.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(s){return s<=0&&(s=.1),this.mass=s,this},x:{get:function(){return this.position.x},set:function(s){this.world.staticTree.remove(this),this.position.x=s,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(s){this.world.staticTree.remove(this),this.position.y=s,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=c}),71464:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13759),x=e(83419),u=e(78389),r=e(37747),h=e(95540),n=e(26479),l=e(41212),c=new x({Extends:n,Mixins:[u],initialize:function(d,m,p,g){!p&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a}:l(p)?(g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=h(g,"classType",a)):Array.isArray(p)&&l(p[0])?(g=p,p=null,g.forEach(function(T){T.internalCreateCallback=this.createCallbackHandler,T.internalRemoveCallback=this.removeCallbackHandler,T.createMultipleCallback=this.createMultipleCallbackHandler,T.classType=h(T,"classType",a)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=d,this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,n.call(this,m,p,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(s){s.body||this.world.enableBody(s,r.STATIC_BODY)},removeCallbackHandler:function(s){s.body&&this.world.disableBody(s)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var s=this.children.entries,d=0;d<s.length;d++)s[d].body.reset();return this}});o.exports=c}),82248:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55495),x=e(37742),u=e(45319),r=e(83419),h=e(79342),n=e(37747),l=e(20339),c=e(52816),s=e(50792),d=e(63012),m=e(43855),p=e(5470),g=e(94977),T=e(64897),S=e(45170),w=e(96523),A=e(35154),M=e(36383),R=e(25774),P=e(96602),b=e(87841),F=e(59542),I=e(40012),L=e(14087),D=e(89936),O=e(35072),z=e(72624),W=e(2483),X=e(61340),_=e(26099),U=e(15994),G=new r({Extends:s,initialize:function(H,V){s.call(this),this.scene=H,this.bodies=new O,this.staticBodies=new O,this.pendingDestroy=new O,this.colliders=new R,this.gravity=new _(A(V,"gravity.x",0),A(V,"gravity.y",0)),this.bounds=new b(A(V,"x",0),A(V,"y",0),A(V,"width",H.sys.scale.width),A(V,"height",H.sys.scale.height)),this.checkCollision={up:A(V,"checkCollision.up",!0),down:A(V,"checkCollision.down",!0),left:A(V,"checkCollision.left",!0),right:A(V,"checkCollision.right",!0)},this.fps=A(V,"fps",60),this.fixedStep=A(V,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=A(V,"timeScale",1),this.OVERLAP_BIAS=A(V,"overlapBias",4),this.TILE_BIAS=A(V,"tileBias",16),this.forceX=A(V,"forceX",!1),this.isPaused=A(V,"isPaused",!1),this._total=0,this.drawDebug=A(V,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:A(V,"debugShowBody",!0),debugShowStaticBody:A(V,"debugShowStaticBody",!0),debugShowVelocity:A(V,"debugShowVelocity",!0),bodyDebugColor:A(V,"debugBodyColor",16711935),staticBodyDebugColor:A(V,"debugStaticBodyColor",255),velocityDebugColor:A(V,"debugVelocityColor",65280)},this.maxEntries=A(V,"maxEntries",16),this.useTree=A(V,"useTree",!0),this.tree=new F(this.maxEntries),this.staticTree=new F(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new X,this._tempMatrix2=new X,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(N,H){H===void 0&&(H=n.DYNAMIC_BODY),Array.isArray(N)||(N=[N]);for(var V=0;V<N.length;V++){var $=N[V];if($.isParent)for(var j=$.getChildren(),k=0;k<j.length;k++){var Q=j[k];Q.isParent?this.enable(Q,H):this.enableBody(Q,H)}else this.enableBody($,H)}},enableBody:function(N,H){return H===void 0&&(H=n.DYNAMIC_BODY),N.hasTransformComponent&&(N.body||(H===n.DYNAMIC_BODY?N.body=new x(this,N):H===n.STATIC_BODY&&(N.body=new z(this,N))),this.add(N.body)),N},add:function(N){return N.physicsType===n.DYNAMIC_BODY?this.bodies.set(N):N.physicsType===n.STATIC_BODY&&(this.staticBodies.set(N),this.staticTree.insert(N)),N.enable=!0,N},disable:function(N){Array.isArray(N)||(N=[N]);for(var H=0;H<N.length;H++){var V=N[H];if(V.isParent)for(var $=V.getChildren(),j=0;j<$.length;j++){var k=$[j];k.isParent?this.disable(k):this.disableBody(k.body)}else this.disableBody(V.body)}},disableBody:function(N){this.remove(N),N.enable=!1},remove:function(N){N.physicsType===n.DYNAMIC_BODY?(this.tree.remove(N),this.bodies.delete(N)):N.physicsType===n.STATIC_BODY&&(this.staticBodies.delete(N),this.staticTree.remove(N))},createDebugGraphic:function(){var N=this.scene.sys.add.graphics({x:0,y:0});return N.setDepth(Number.MAX_VALUE),this.debugGraphic=N,this.drawDebug=!0,N},setBounds:function(N,H,V,$,j,k,Q,et){return this.bounds.setTo(N,H,V,$),j!==void 0&&this.setBoundsCollision(j,k,Q,et),this},setBoundsCollision:function(N,H,V,$){return N===void 0&&(N=!0),H===void 0&&(H=!0),V===void 0&&(V=!0),$===void 0&&($=!0),this.checkCollision.left=N,this.checkCollision.right=H,this.checkCollision.up=V,this.checkCollision.down=$,this},pause:function(){return this.isPaused=!0,this.emit(d.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(d.RESUME),this},addCollider:function(N,H,V,$,j){V===void 0&&(V=null),$===void 0&&($=null),j===void 0&&(j=V);var k=new h(this,!1,N,H,V,$,j);return this.colliders.add(k),k},addOverlap:function(N,H,V,$,j){V===void 0&&(V=null),$===void 0&&($=null),j===void 0&&(j=V);var k=new h(this,!0,N,H,V,$,j);return this.colliders.add(k),k},removeCollider:function(N){return this.colliders.remove(N),this},setFPS:function(N){return this.fps=N,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(N,H){if(!(this.isPaused||this.bodies.size===0)){var V,$=this._frameTime,j=this._frameTimeMS*this.timeScale;this._elapsed+=H;var k,Q=this.bodies.entries,et=this._elapsed>=j;for(this.fixedStep||($=H*.001,et=!0,this._elapsed=0),V=0;V<Q.length;V++)k=Q[V],k.enable&&k.preUpdate(et,$);if(et){this._elapsed-=j,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Q));var at=this.colliders.update();for(V=0;V<at.length;V++){var q=at[V];q.active&&q.update()}this.emit(d.WORLD_STEP,$)}for(;this._elapsed>=j;)this._elapsed-=j,this.step($)}},step:function(N){var H,V,$=this.bodies.entries,j=$.length;for(H=0;H<j;H++)V=$[H],V.enable&&V.update(N);this.useTree&&(this.tree.clear(),this.tree.load($));var k=this.colliders.update();for(H=0;H<k.length;H++){var Q=k[H];Q.active&&Q.update()}this.emit(d.WORLD_STEP,N),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var N,H,V=this.bodies.entries,$=V.length,j=this.bodies,k=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,N=0;N<$;N++)H=V[N],H.enable&&H.postUpdate();if(this.drawDebug){var Q=this.debugGraphic;for(Q.clear(),N=0;N<$;N++)H=V[N],H.willDrawDebug()&&H.drawDebug(Q);for(V=k.entries,$=V.length,N=0;N<$;N++)H=V[N],H.willDrawDebug()&&H.drawDebug(Q)}var et=this.pendingDestroy;if(et.size>0){var at=this.tree,q=this.staticTree;for(V=et.entries,$=V.length,N=0;N<$;N++)H=V[N],H.physicsType===n.DYNAMIC_BODY?(at.remove(H),j.delete(H)):H.physicsType===n.STATIC_BODY&&(q.remove(H),k.delete(H)),H.world=void 0,H.gameObject=void 0;et.clear()}},updateMotion:function(N,H){N.allowRotation&&this.computeAngularVelocity(N,H),this.computeVelocity(N,H)},computeAngularVelocity:function(N,H){var V=N.angularVelocity,$=N.angularAcceleration,j=N.angularDrag,k=N.maxAngular;$?V+=$*H:N.allowDrag&&j&&(j*=H,p(V-j,0,.1)?V-=j:g(V+j,0,.1)?V+=j:V=0),V=u(V,-k,k);var Q=V-N.angularVelocity;N.angularVelocity+=Q,N.rotation+=N.angularVelocity*H},computeVelocity:function(N,H){var V=N.velocity.x,$=N.acceleration.x,j=N.drag.x,k=N.maxVelocity.x,Q=N.velocity.y,et=N.acceleration.y,at=N.drag.y,q=N.maxVelocity.y,ft=N.speed,vt=N.maxSpeed,Tt=N.allowDrag,ct=N.useDamping;N.allowGravity&&(V+=(this.gravity.x+N.gravity.x)*H,Q+=(this.gravity.y+N.gravity.y)*H),$?V+=$*H:Tt&&j&&(ct?(j=Math.pow(j,H),V*=j,ft=Math.sqrt(V*V+Q*Q),m(ft,0,.001)&&(V=0)):(j*=H,p(V-j,0,.01)?V-=j:g(V+j,0,.01)?V+=j:V=0)),et?Q+=et*H:Tt&&at&&(ct?(at=Math.pow(at,H),Q*=at,ft=Math.sqrt(V*V+Q*Q),m(ft,0,.001)&&(Q=0)):(at*=H,p(Q-at,0,.01)?Q-=at:g(Q+at,0,.01)?Q+=at:Q=0)),V=u(V,-k,k),Q=u(Q,-q,q),N.velocity.set(V,Q),vt>-1&&N.velocity.length()>vt&&(N.velocity.normalize().scale(vt),ft=vt),N.speed=ft},separate:function(N,H,V,$,j){var k,Q,et=!1,at=!0;if(!N.enable||!H.enable||N.checkCollision.none||H.checkCollision.none||!this.intersects(N,H)||(N.collisionMask&H.collisionCategory)===0||(H.collisionMask&N.collisionCategory)===0||V&&V.call($,N.gameObject||N,H.gameObject||H)===!1)return et;if(N.isCircle||H.isCircle){var q=this.separateCircle(N,H,j);q.result?(et=!0,at=!1):(k=q.x,Q=q.y,at=!0)}if(at){var ft=!1,vt=!1,Tt=this.OVERLAP_BIAS;j?(ft=L(N,H,j,Tt,k),vt=D(N,H,j,Tt,Q)):this.forceX||Math.abs(this.gravity.y+N.gravity.y)<Math.abs(this.gravity.x+N.gravity.x)?(ft=L(N,H,j,Tt,k),this.intersects(N,H)&&(vt=D(N,H,j,Tt,Q))):(vt=D(N,H,j,Tt,Q),this.intersects(N,H)&&(ft=L(N,H,j,Tt,k))),et=ft||vt}return et&&(j?(N.onOverlap||H.onOverlap)&&this.emit(d.OVERLAP,N.gameObject,H.gameObject,N,H):(N.onCollide||H.onCollide)&&this.emit(d.COLLIDE,N.gameObject,H.gameObject,N,H)),et},separateCircle:function(N,H,V){T(N,H,!1,0),S(N,H,!1,0);var $=N.isCircle,j=H.isCircle,k=N.center,Q=H.center,et=N.immovable,at=H.immovable,q=N.velocity,ft=H.velocity,vt=0,Tt=!0;if($!==j){Tt=!1;var ct=k.x,Nt=k.y,yt=N.halfWidth,it=H.position.x,Z=H.position.y,lt=H.right,pt=H.bottom;j&&(ct=Q.x,Nt=Q.y,yt=H.halfWidth,it=N.position.x,Z=N.position.y,lt=N.right,pt=N.bottom),Nt<Z?ct<it?vt=l(ct,Nt,it,Z)-yt:ct>lt&&(vt=l(ct,Nt,lt,Z)-yt):Nt>pt&&(ct<it?vt=l(ct,Nt,it,pt)-yt:ct>lt&&(vt=l(ct,Nt,lt,pt)-yt)),vt*=-1}else vt=N.halfWidth+H.halfWidth-c(k,Q);N.overlapR=vt,H.overlapR=vt;var Rt=a(k,Q),At=(vt+M.EPSILON)*Math.cos(Rt),Kt=(vt+M.EPSILON)*Math.sin(Rt),Bt={overlap:vt,result:!1,x:At,y:Kt};if(V&&(!Tt||Tt&&vt!==0))return Bt.result=!0,Bt;if(!Tt&&vt===0||et&&at||N.customSeparateX||H.customSeparateX)return Bt.x=void 0,Bt.y=void 0,Bt;var Wt=!N.pushable&&!H.pushable;if(Tt){var he=k.x-Q.x,zt=k.y-Q.y,Ut=Math.sqrt(Math.pow(he,2)+Math.pow(zt,2)),Xt=(Q.x-k.x)/Ut||0,Pt=(Q.y-k.y)/Ut||0,$t=2*(q.x*Xt+q.y*Pt-ft.x*Xt-ft.y*Pt)/(N.mass+H.mass);(et||at||!N.pushable||!H.pushable)&&($t*=2),!et&&N.pushable&&(q.x=q.x-$t/N.mass*Xt,q.y=q.y-$t/N.mass*Pt,q.multiply(N.bounce)),!at&&H.pushable&&(ft.x=ft.x+$t/H.mass*Xt,ft.y=ft.y+$t/H.mass*Pt,ft.multiply(H.bounce)),!et&&!at&&(At*=.5,Kt*=.5),(!et||N.pushable||Wt)&&(N.x-=At,N.y-=Kt,N.updateCenter()),(!at||H.pushable||Wt)&&(H.x+=At,H.y+=Kt,H.updateCenter()),Bt.result=!0}else!et&&(N.pushable||Wt)&&(N.x-=At,N.y-=Kt,N.updateCenter()),!at&&(H.pushable||Wt)&&(H.x+=At,H.y+=Kt,H.updateCenter()),Bt.x=void 0,Bt.y=void 0;return Bt},intersects:function(N,H){return N===H?!1:!N.isCircle&&!H.isCircle?!(N.right<=H.left||N.bottom<=H.top||N.left>=H.right||N.top>=H.bottom):N.isCircle?H.isCircle?c(N.center,H.center)<=N.halfWidth+H.halfWidth:this.circleBodyIntersects(N,H):this.circleBodyIntersects(H,N)},circleBodyIntersects:function(N,H){var V=u(N.center.x,H.left,H.right),$=u(N.center.y,H.top,H.bottom),j=(N.center.x-V)*(N.center.x-V),k=(N.center.y-$)*(N.center.y-$);return j+k<=N.halfWidth*N.halfWidth},overlap:function(N,H,V,$,j){return V===void 0&&(V=null),$===void 0&&($=null),j===void 0&&(j=V),this.collideObjects(N,H,V,$,j,!0)},collide:function(N,H,V,$,j){return V===void 0&&(V=null),$===void 0&&($=null),j===void 0&&(j=V),this.collideObjects(N,H,V,$,j,!1)},collideObjects:function(N,H,V,$,j,k){var Q,et;N.isParent&&(N.physicsType===void 0||H===void 0||N===H)&&(N=N.children.entries),H&&H.isParent&&H.physicsType===void 0&&(H=H.children.entries);var at=Array.isArray(N),q=Array.isArray(H);if(this._total=0,!at&&!q)this.collideHandler(N,H,V,$,j,k);else if(!at&&q)for(Q=0;Q<H.length;Q++)this.collideHandler(N,H[Q],V,$,j,k);else if(at&&!q)if(H)for(Q=0;Q<N.length;Q++)this.collideHandler(N[Q],H,V,$,j,k);else for(Q=0;Q<N.length;Q++){var ft=N[Q];for(et=Q+1;et<N.length;et++)Q!==et&&this.collideHandler(ft,N[et],V,$,j,k)}else for(Q=0;Q<N.length;Q++)for(et=0;et<H.length;et++)this.collideHandler(N[Q],H[et],V,$,j,k);return this._total>0},collideHandler:function(N,H,V,$,j,k){if(H===void 0&&N.isParent)return this.collideGroupVsGroup(N,N,V,$,j,k);if(!N||!H)return!1;if(N.body||N.isBody){if(H.body||H.isBody)return this.collideSpriteVsSprite(N,H,V,$,j,k);if(H.isParent)return this.collideSpriteVsGroup(N,H,V,$,j,k);if(H.isTilemap)return this.collideSpriteVsTilemapLayer(N,H,V,$,j,k)}else if(N.isParent){if(H.body||H.isBody)return this.collideSpriteVsGroup(H,N,V,$,j,k);if(H.isParent)return this.collideGroupVsGroup(N,H,V,$,j,k);if(H.isTilemap)return this.collideGroupVsTilemapLayer(N,H,V,$,j,k)}else if(N.isTilemap){if(H.body||H.isBody)return this.collideSpriteVsTilemapLayer(H,N,V,$,j,k);if(H.isParent)return this.collideGroupVsTilemapLayer(H,N,V,$,j,k)}},canCollide:function(N,H){return N&&H&&(N.collisionMask&H.collisionCategory)!==0&&(H.collisionMask&N.collisionCategory)!==0},collideSpriteVsSprite:function(N,H,V,$,j,k){var Q=N.isBody?N:N.body,et=H.isBody?H:H.body;return this.canCollide(Q,et)?(this.separate(Q,et,$,j,k)&&(V&&V.call(j,N,H),this._total++),!0):!1},collideSpriteVsGroup:function(N,H,V,$,j,k){var Q=N.isBody?N:N.body;if(!(H.getLength()===0||!Q||!Q.enable||Q.checkCollision.none||!this.canCollide(Q,H))){var et,at,q;if(this.useTree||H.physicsType===n.STATIC_BODY){var ft=this.treeMinMax;ft.minX=Q.left,ft.minY=Q.top,ft.maxX=Q.right,ft.maxY=Q.bottom;var vt=H.physicsType===n.DYNAMIC_BODY?this.tree.search(ft):this.staticTree.search(ft);for(at=vt.length,et=0;et<at;et++)q=vt[et],!(Q===q||!q.enable||q.checkCollision.none||!H.contains(q.gameObject))&&this.separate(Q,q,$,j,k)&&(V&&V.call(j,Q.gameObject,q.gameObject),this._total++)}else{var Tt=H.getChildren(),ct=H.children.entries.indexOf(N);for(at=Tt.length,et=0;et<at;et++)q=Tt[et].body,!(!q||et===ct||!q.enable)&&this.separate(Q,q,$,j,k)&&(V&&V.call(j,Q.gameObject,q.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(N,H,V,$,j,k){if(!this.canCollide(N,H))return!1;var Q=N.getChildren();if(Q.length===0)return!1;for(var et=!1,at=0;at<Q.length;at++)(Q[at].body||Q[at].isBody)&&this.collideSpriteVsTilemapLayer(Q[at],H,V,$,j,k)&&(et=!0);return et},collideTiles:function(N,H,V,$,j){return H.length===0||N.body&&!N.body.enable||N.isBody&&!N.enable?!1:this.collideSpriteVsTilesHandler(N,H,V,$,j,!1,!1)},overlapTiles:function(N,H,V,$,j){return H.length===0||N.body&&!N.body.enable||N.isBody&&!N.enable?!1:this.collideSpriteVsTilesHandler(N,H,V,$,j,!0,!1)},collideSpriteVsTilemapLayer:function(N,H,V,$,j,k){var Q=N.isBody?N:N.body;if(!Q.enable||Q.checkCollision.none||!this.canCollide(Q,H))return!1;var et=H.layer,at=Q.x-et.tileWidth*H.scaleX,q=Q.y-et.tileHeight*H.scaleY,ft=Q.width+et.tileWidth*H.scaleX,vt=Q.height+et.tileHeight*H.scaleY,Tt=k?null:this.tileFilterOptions,ct=w(at,q,ft,vt,Tt,H.scene.cameras.main,H.layer);return ct.length===0?!1:this.collideSpriteVsTilesHandler(N,ct,V,$,j,k,!0)},collideSpriteVsTilesHandler:function(N,H,V,$,j,k,Q){for(var et=N.isBody?N:N.body,at,q={left:0,right:0,top:0,bottom:0},ft,vt=!1,Tt=0;Tt<H.length;Tt++){at=H[Tt],ft=at.tilemapLayer;var ct=ft.tileToWorldXY(at.x,at.y);q.left=ct.x,q.top=ct.y,q.right=q.left+at.width*ft.scaleX,q.bottom=q.top+at.height*ft.scaleY,W(q,et)&&(!$||$.call(j,N,at))&&P(at,N)&&(k||I(Tt,et,at,q,ft,this.TILE_BIAS,Q))&&(this._total++,vt=!0,V&&V.call(j,N,at),k&&et.onOverlap?this.emit(d.TILE_OVERLAP,N,at,et):et.onCollide&&this.emit(d.TILE_COLLIDE,N,at,et))}return vt},collideGroupVsGroup:function(N,H,V,$,j,k){if(!(N.getLength()===0||H.getLength()===0||!this.canCollide(N,H)))for(var Q=N.getChildren(),et=0;et<Q.length;et++)this.collideSpriteVsGroup(Q[et],H,V,$,j,k)},wrap:function(N,H){N.body?this.wrapObject(N,H):N.getChildren?this.wrapArray(N.getChildren(),H):Array.isArray(N)?this.wrapArray(N,H):this.wrapObject(N,H)},wrapArray:function(N,H){for(var V=0;V<N.length;V++)this.wrapObject(N[V],H)},wrapObject:function(N,H){H===void 0&&(H=0),N.x=U(N.x,this.bounds.left-H,this.bounds.right+H),N.y=U(N.y,this.bounds.top-H,this.bounds.bottom+H)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});o.exports=G}),1093:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setAcceleration:function(e,a){return this.body.acceleration.set(e,a),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};o.exports=E}),59023:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};o.exports=E}),62069:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setBounce:function(e,a){return this.body.bounce.set(e,a),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,a,x,u){return this.body.setCollideWorldBounds(e,a,x,u),this}};o.exports=E}),78389:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79599),x={setCollisionCategory:function(u){var r=this.body?this.body:this;return r.collisionCategory=u,this},willCollideWith:function(u){var r=this.body?this.body:this;return(r.collisionMask&u)!==0},addCollidesWith:function(u){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask|u,this},removeCollidesWith:function(u){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask&~u,this},setCollidesWith:function(u){var r=this.body?this.body:this;return r.collisionMask=a(u),this},resetCollisionCategory:function(){var u=this.body?this.body:this;return u.collisionCategory=1,u.collisionMask=2147483647,this}};o.exports=x}),87118:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDebug:function(e,a,x){return this.debugShowBody=e,this.debugShowVelocity=a,this.debugBodyColor=x,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};o.exports=E}),52819:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDrag:function(e,a){return this.body.drag.set(e,a),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};o.exports=E}),4074:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDirectControl:function(e){return this.body.setDirectControl(e),this},enableBody:function(e,a,x,u,r){return e&&this.body.reset(a,x),u&&(this.body.gameObject.active=!0),r&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,a){return e===void 0&&(e=!1),a===void 0&&(a=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),a&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};o.exports=E}),40831:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setFriction:function(e,a){return this.body.friction.set(e,a),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};o.exports=E}),26775:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setGravity:function(e,a){return this.body.gravity.set(e,a),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};o.exports=E}),9437:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};o.exports=E}),30621:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setMass:function(e){return this.body.mass=e,this}};o.exports=E}),72441:((o,E,e)=>{var a=e(47956),x=e(96503),u=e(2044),r=e(81491),h=function(n,l,c,s,d,m){var p=a(n,l-s,c-s,2*s,2*s,d,m);if(p.length===0)return p;for(var g=new x(l,c,s),T=new x,S=[],w=0;w<p.length;w++){var A=p[w];A.isCircle?(T.setTo(A.center.x,A.center.y,A.halfWidth),u(g,T)&&S.push(A)):r(g,A)&&S.push(A)}return S};o.exports=h}),47956:(o=>{var E=function(e,a,x,u,r,h,n){h===void 0&&(h=!0),n===void 0&&(n=!1);var l=[],c=[],s=e.treeMinMax;if(s.minX=a,s.minY=x,s.maxX=a+u,s.maxY=x+r,n&&(c=e.staticTree.search(s)),h&&e.useTree)l=e.tree.search(s);else if(h){var d=e.bodies,m={position:{x:a,y:x},left:a,top:x,right:a+u,bottom:x+r,isCircle:!1},p=e.intersects;d.iterate(function(g){p(g,m)&&l.push(g)})}return c.concat(l)};o.exports=E}),62121:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};o.exports=E}),29384:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setOffset:function(e,a){return this.body.setOffset(e,a),this},setSize:function(e,a,x){return this.body.setSize(e,a,x),this},setBodySize:function(e,a,x){return this.body.setSize(e,a,x),this},setCircle:function(e,a,x){return this.body.setCircle(e,a,x),this}};o.exports=E}),15098:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setVelocity:function(e,a){return this.body.setVelocity(e,a),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,a){return this.body.maxVelocity.set(e,a),this}};o.exports=E}),92209:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Acceleration:e(1093),Angular:e(59023),Bounce:e(62069),Collision:e(78389),Debug:e(87118),Drag:e(52819),Enable:e(4074),Friction:e(40831),Gravity:e(26775),Immovable:e(9437),Mass:e(30621),OverlapCirc:e(72441),OverlapRect:e(47956),Pushable:e(62121),Size:e(29384),Velocity:e(15098)}}),37747:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};o.exports=E}),20009:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collide"}),36768:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="overlap"}),60473:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"}),89954:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"}),61804:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tilecollide"}),7161:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tileoverlap"}),34689:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldbounds"}),16006:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldstep"}),63012:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COLLIDE:e(20009),OVERLAP:e(36768),PAUSE:e(60473),RESUME:e(89954),TILE_COLLIDE:e(61804),TILE_OVERLAP:e(7161),WORLD_BOUNDS:e(34689),WORLD_STEP:e(16006)}}),27064:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),x=e(79291),u={ArcadePhysics:e(86689),Body:e(37742),Collider:e(79342),Components:e(92209),Events:e(63012),Factory:e(66022),GetCollidesWith:e(79599),GetOverlapX:e(64897),GetOverlapY:e(45170),SeparateX:e(14087),SeparateY:e(89936),Group:e(60758),Image:e(71289),Sprite:e(13759),StaticBody:e(72624),StaticGroup:e(71464),Tilemap:e(55173),World:e(82248)};u=x(!1,u,a),o.exports=u}),96602:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,a,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,a,e):!0};o.exports=E}),36294:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a<0?(e.blocked.none=!1,e.blocked.left=!0):a>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=a,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};o.exports=E}),67013:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a<0?(e.blocked.none=!1,e.blocked.up=!0):a>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=a,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};o.exports=E}),40012:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21329),x=e(53442),u=e(2483),r=function(h,n,l,c,s,d,m){var p=c.left,g=c.top,T=c.right,S=c.bottom,w=l.faceLeft||l.faceRight,A=l.faceTop||l.faceBottom;if(m||(w=!0,A=!0),!w&&!A)return!1;var M=0,R=0,P=0,b=1;if(n.deltaAbsX()>n.deltaAbsY()?P=-1:n.deltaAbsX()<n.deltaAbsY()&&(b=-1),n.deltaX()!==0&&n.deltaY()!==0&&w&&A&&(P=Math.min(Math.abs(n.position.x-T),Math.abs(n.right-p)),b=Math.min(Math.abs(n.position.y-S),Math.abs(n.bottom-g))),P<b){if(w&&(M=a(n,l,p,T,d,m),M!==0&&!u(c,n)))return!0;A&&(R=x(n,l,g,S,d,m))}else{if(A&&(R=x(n,l,g,S,d,m),R!==0&&!u(c,n)))return!0;w&&(M=a(n,l,p,T,d,m))}return M!==0||R!==0};o.exports=r}),21329:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36294),x=function(u,r,h,n,l,c){var s=0,d=r.faceLeft,m=r.faceRight,p=r.collideLeft,g=r.collideRight;return c||(d=!0,m=!0,p=!0,g=!0),u.deltaX()<0&&g&&u.checkCollision.left?m&&u.x<n&&(s=u.x-n,s<-l&&(s=0)):u.deltaX()>0&&p&&u.checkCollision.right&&d&&u.right>h&&(s=u.right-h,s>l&&(s=0)),s!==0&&(u.customSeparateX?u.overlapX=s:a(u,s)),s};o.exports=x}),53442:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67013),x=function(u,r,h,n,l,c){var s=0,d=r.faceTop,m=r.faceBottom,p=r.collideUp,g=r.collideDown;return c||(d=!0,m=!0,p=!0,g=!0),u.deltaY()<0&&g&&u.checkCollision.up?m&&u.y<n&&(s=u.y-n,s<-l&&(s=0)):u.deltaY()>0&&p&&u.checkCollision.down&&d&&u.bottom>h&&(s=u.bottom-h,s>l&&(s=0)),s!==0&&(u.customSeparateY?u.overlapY=s:a(u,s)),s};o.exports=x}),2483:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return!(a.right<=e.left||a.bottom<=e.top||a.position.x>=e.right||a.position.y>=e.bottom)};o.exports=E}),55173:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ProcessTileCallbacks:e(96602),ProcessTileSeparationX:e(36294),ProcessTileSeparationY:e(67013),SeparateTile:e(40012),TileCheckX:e(21329),TileCheckY:e(53442),TileIntersectsBody:e(2483)};o.exports=a}),44563:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Arcade:e(27064),Matter:e(3875)}}),68174:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(26099),u=new a({initialize:function(){this.boundsCenter=new x,this.centerDiff=new x},parseBody:function(r){if(r=r.hasOwnProperty("body")?r.body:r,!r.hasOwnProperty("bounds")||!r.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,n=this.centerDiff,l=r.bounds.max.x-r.bounds.min.x,c=r.bounds.max.y-r.bounds.min.y,s=l*r.centerOfMass.x,d=c*r.centerOfMass.y;return h.set(l/2,c/2),n.set(s-h.x,d-h.y),!0},getTopLeft:function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(r)){var l=this.boundsCenter,c=this.centerDiff;return new x(h+l.x+c.x,n+l.y+c.y)}return!1},getTopCenter:function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(r)){var l=this.boundsCenter,c=this.centerDiff;return new x(h+c.x,n+l.y+c.y)}return!1},getTopRight:function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(r)){var l=this.boundsCenter,c=this.centerDiff;return new x(h-(l.x-c.x),n+l.y+c.y)}return!1},getLeftCenter:function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(r)){var l=this.boundsCenter,c=this.centerDiff;return new x(h+l.x+c.x,n+c.y)}return!1},getCenter:function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(r)){var l=this.centerDiff;return new x(h+l.x,n+l.y)}return!1},getRightCenter:function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(r)){var l=this.boundsCenter,c=this.centerDiff;return new x(h-(l.x-c.x),n+c.y)}return!1},getBottomLeft:function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(r)){var l=this.boundsCenter,c=this.centerDiff;return new x(h+l.x+c.x,n-(l.y-c.y))}return!1},getBottomCenter:function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(r)){var l=this.boundsCenter,c=this.centerDiff;return new x(h+c.x,n-(l.y-c.y))}return!1},getBottomRight:function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(r)){var l=this.boundsCenter,c=this.centerDiff;return new x(h-(l.x-c.x),n-(l.y-c.y))}return!1}});o.exports=u}),19933:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6790);a.Body=e(22562),a.Composite=e(69351),a.World=e(4372),a.Collision=e(52284),a.Detector=e(81388),a.Pairs=e(99561),a.Pair=e(4506),a.Query=e(73296),a.Resolver=e(66272),a.Constraint=e(48140),a.Common=e(53402),a.Engine=e(48413),a.Events=e(35810),a.Sleeping=e(53614),a.Plugin=e(73832),a.Bodies=e(66280),a.Composites=e(74116),a.Axes=e(66615),a.Bounds=e(15647),a.Svg=e(74058),a.Vector=e(31725),a.Vertices=e(41598),a.World.add=a.Composite.add,a.World.remove=a.Composite.remove,a.World.addComposite=a.Composite.addComposite,a.World.addBody=a.Composite.addBody,a.World.addConstraint=a.Composite.addConstraint,a.World.clear=a.Composite.clear,o.exports=a}),28137:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(83419),u=e(74116),r=e(48140),h=e(74058),n=e(75803),l=e(23181),c=e(34803),s=e(73834),d=e(19496),m=e(85791),p=e(98713),g=e(41598),T=new x({initialize:function(w){this.world=w,this.scene=w.scene,this.sys=w.scene.sys},rectangle:function(S,w,A,M,R){var P=a.rectangle(S,w,A,M,R);return this.world.add(P),P},trapezoid:function(S,w,A,M,R,P){var b=a.trapezoid(S,w,A,M,R,P);return this.world.add(b),b},circle:function(S,w,A,M,R){var P=a.circle(S,w,A,M,R);return this.world.add(P),P},polygon:function(S,w,A,M,R){var P=a.polygon(S,w,A,M,R);return this.world.add(P),P},fromVertices:function(S,w,A,M,R,P,b){typeof A=="string"&&(A=g.fromPath(A));var F=a.fromVertices(S,w,A,M,R,P,b);return this.world.add(F),F},fromPhysicsEditor:function(S,w,A,M,R){R===void 0&&(R=!0);var P=d.parseBody(S,w,A,M);return R&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(S,w,A,M,R,P){M===void 0&&(M=1),R===void 0&&(R={}),P===void 0&&(P=!0);for(var b=A.getElementsByTagName("path"),F=[],I=0;I<b.length;I++){var L=h.pathToVertices(b[I],30);M!==1&&g.scale(L,M,M),F.push(L)}var D=a.fromVertices(S,w,F,R);return P&&this.world.add(D),D},fromJSON:function(S,w,A,M,R){M===void 0&&(M={}),R===void 0&&(R=!0);var P=m.parseBody(S,w,A,M);return P&&R&&this.world.add(P),P},imageStack:function(S,w,A,M,R,P,b,F,I){b===void 0&&(b=0),F===void 0&&(F=0),I===void 0&&(I={});var L=this.world,D=this.sys.displayList;I.addToWorld=!1;var O=u.stack(A,M,R,P,b,F,function(z,W){var X=new l(L,z,W,S,w,I);return D.add(X),X.body});return L.add(O),O},stack:function(S,w,A,M,R,P,b){var F=u.stack(S,w,A,M,R,P,b);return this.world.add(F),F},pyramid:function(S,w,A,M,R,P,b){var F=u.pyramid(S,w,A,M,R,P,b);return this.world.add(F),F},chain:function(S,w,A,M,R,P){return u.chain(S,w,A,M,R,P)},mesh:function(S,w,A,M,R){return u.mesh(S,w,A,M,R)},newtonsCradle:function(S,w,A,M,R){var P=u.newtonsCradle(S,w,A,M,R);return this.world.add(P),P},car:function(S,w,A,M,R){var P=u.car(S,w,A,M,R);return this.world.add(P),P},softBody:function(S,w,A,M,R,P,b,F,I,L){var D=u.softBody(S,w,A,M,R,P,b,F,I,L);return this.world.add(D),D},joint:function(S,w,A,M,R){return this.constraint(S,w,A,M,R)},spring:function(S,w,A,M,R){return this.constraint(S,w,A,M,R)},constraint:function(S,w,A,M,R){M===void 0&&(M=1),R===void 0&&(R={}),R.bodyA=S.type==="body"?S:S.body,R.bodyB=w.type==="body"?w:w.body,isNaN(A)||(R.length=A),R.stiffness=M;var P=r.create(R);return this.world.add(P),P},worldConstraint:function(S,w,A,M){A===void 0&&(A=1),M===void 0&&(M={}),M.bodyB=S.type==="body"?S:S.body,isNaN(w)||(M.length=w),M.stiffness=A;var R=r.create(M);return this.world.add(R),R},mouseSpring:function(S){return this.pointerConstraint(S)},pointerConstraint:function(S){S===void 0&&(S={}),S.hasOwnProperty("render")||(S.render={visible:!1});var w=new p(this.scene,this.world,S);return this.world.add(w.constraint),w},image:function(S,w,A,M,R){var P=new l(this.world,S,w,A,M,R);return this.sys.displayList.add(P),P},tileBody:function(S,w){return new s(this.world,S,w)},sprite:function(S,w,A,M,R){var P=new c(this.world,S,w,A,M,R);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(S,w,A){return n(this.world,S,w,A)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=T}),75803:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31884),x=e(95540),u=e(26099);function r(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}var h=function(n,l,c,s){c===void 0&&(c={}),s===void 0&&(s=!0);var d=l.x,m=l.y;l.body={temp:!0,position:{x:d,y:m}};var p=[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity];if(p.forEach(function(T){for(var S in T)r(T[S])?Object.defineProperty(l,S,{get:T[S].get,set:T[S].set}):Object.defineProperty(l,S,{value:T[S]})}),l.world=n,l._tempVec2=new u(d,m),c.hasOwnProperty("type")&&c.type==="body")l.setExistingBody(c,s);else{var g=x(c,"shape",null);g||(g="rectangle"),c.addToWorld=s,l.setBody(g,c)}return l};o.exports=h}),23181:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31884),u=e(95643),r=e(95540),h=e(88571),n=e(72699),l=e(26099),c=new a({Extends:h,Mixins:[x.Bounce,x.Collision,x.Force,x.Friction,x.Gravity,x.Mass,x.Sensor,x.SetBody,x.Sleep,x.Static,x.Transform,x.Velocity,n],initialize:function(d,m,p,g,T,S){u.call(this,d.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(g,T),this.setSizeToFrame(),this.setOrigin(),this.world=d,this._tempVec2=new l(m,p);var w=r(S,"shape",null);w?this.setBody(w,S):this.setRectangle(this.width,this.height,S),this.setPosition(m,p),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=c}),42045:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),x=e(66615),u=e(66280),r=e(22562),h=e(68174),n=e(15647),l=e(83419),c=e(52284),s=e(53402),d=e(69351),m=e(74116),p=e(48140),g=e(81388),T=e(20339),S=e(28137),w=e(95540),A=e(35154),M=e(46975),R=e(4506),P=e(99561),b=e(37277),F=e(73296),I=e(66272),L=e(44594),D=e(74058),O=e(31725),z=e(41598),W=e(68243);s.setDecomp(e(55973));var X=new l({initialize:function(U){this.scene=U,this.systems=U.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=r,this.composite=d,this.collision=c,this.detector=g,this.pair=R,this.pairs=P,this.query=F,this.resolver=I,this.constraint=p,this.bodies=u,this.composites=m,this.axes=x,this.bounds=n,this.svg=D,this.vector=O,this.vertices=z,this.verts=z,this._tempVec2=O.create(),I._restingThresh=A(this.config,"restingThresh",4),I._restingThreshTangent=A(this.config,"restingThreshTangent",6),I._positionDampen=A(this.config,"positionDampen",.9),I._positionWarming=A(this.config,"positionWarming",.8),I._frictionNormalMultiplier=A(this.config,"frictionNormalMultiplier",5),U.sys.events.once(L.BOOT,this.boot,this),U.sys.events.on(L.START,this.start,this)},boot:function(){this.world=new W(this.scene,this.config),this.add=new S(this.world),this.bodyBounds=new h,this.systems.events.once(L.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new W(this.scene,this.config),this.add=new S(this.world));var _=this.systems.events;_.on(L.UPDATE,this.world.update,this.world),_.on(L.POST_UPDATE,this.world.postUpdate,this.world),_.once(L.SHUTDOWN,this.shutdown,this)},getConfig:function(){var _=this.systems.game.config.physics,U=this.systems.settings.physics,G=M(w(U,"matter",{}),w(_,"matter",{}));return G},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(_,U){this.world.step(_,U)},containsPoint:function(_,U,G){_=this.getMatterBodies(_);var N=O.create(U,G),H=F.point(_,N);return H.length>0},intersectPoint:function(_,U,G){G=this.getMatterBodies(G);var N=O.create(_,U),H=[],V=F.point(G,N);return V.forEach(function($){H.indexOf($)===-1&&H.push($)}),H},intersectRect:function(_,U,G,N,H,V){H===void 0&&(H=!1),V=this.getMatterBodies(V);var $={min:{x:_,y:U},max:{x:_+G,y:U+N}},j=[],k=F.region(V,$,H);return k.forEach(function(Q){j.indexOf(Q)===-1&&j.push(Q)}),j},intersectRay:function(_,U,G,N,H,V){H===void 0&&(H=1),V=this.getMatterBodies(V);for(var $=[],j=F.ray(V,O.create(_,U),O.create(G,N),H),k=0;k<j.length;k++)$.push(j[k].body);return $},intersectBody:function(_,U){U=this.getMatterBodies(U);for(var G=[],N=F.collides(_,U),H=0;H<N.length;H++){var V=N[H];V.bodyA===_?G.push(V.bodyB):G.push(V.bodyA)}return G},overlap:function(_,U,G,N,H){G===void 0&&(G=null),N===void 0&&(N=null),H===void 0&&(H=G),Array.isArray(_)||(_=[_]),_=this.getMatterBodies(_),U=this.getMatterBodies(U);for(var V=!1,$=0;$<_.length;$++)for(var j=_[$],k=F.collides(j,U),Q=0;Q<k.length;Q++){var et=k[Q],at=et.bodyA.id===j.id?et.bodyB:et.bodyA;if(!N||N.call(H,j,at,et)){if(V=!0,G)G.call(H,j,at,et);else if(!N)return!0}}return V},setCollisionCategory:function(_,U){return _=this.getMatterBodies(_),_.forEach(function(G){G.collisionFilter.category=U}),this},setCollisionGroup:function(_,U){return _=this.getMatterBodies(_),_.forEach(function(G){G.collisionFilter.group=U}),this},setCollidesWith:function(_,U){_=this.getMatterBodies(_);var G=0;if(!Array.isArray(U))G=U;else for(var N=0;N<U.length;N++)G|=U[N];return _.forEach(function(H){H.collisionFilter.mask=G}),this},getMatterBodies:function(_){if(!_)return this.world.getAllBodies();Array.isArray(_)||(_=[_]);for(var U=[],G=0;G<_.length;G++){var N=_[G].hasOwnProperty("body")?_[G].body:_[G];U.push(N)}return U},setVelocity:function(_,U,G){_=this.getMatterBodies(_);var N=this._tempVec2;return N.x=U,N.y=G,_.forEach(function(H){r.setVelocity(H,N)}),this},setVelocityX:function(_,U){_=this.getMatterBodies(_);var G=this._tempVec2;return G.x=U,_.forEach(function(N){G.y=N.velocity.y,r.setVelocity(N,G)}),this},setVelocityY:function(_,U){_=this.getMatterBodies(_);var G=this._tempVec2;return G.y=U,_.forEach(function(N){G.x=N.velocity.x,r.setVelocity(N,G)}),this},setAngularVelocity:function(_,U){return _=this.getMatterBodies(_),_.forEach(function(G){r.setAngularVelocity(G,U)}),this},applyForce:function(_,U){_=this.getMatterBodies(_);var G=this._tempVec2;return _.forEach(function(N){G.x=N.position.x,G.y=N.position.y,r.applyForce(N,G,U)}),this},applyForceFromPosition:function(_,U,G,N){_=this.getMatterBodies(_);var H=this._tempVec2;return _.forEach(function(V){N===void 0&&(N=V.angle),H.x=G*Math.cos(N),H.y=G*Math.sin(N),r.applyForce(V,U,H)}),this},applyForceFromAngle:function(_,U,G){_=this.getMatterBodies(_);var N=this._tempVec2;return _.forEach(function(H){G===void 0&&(G=H.angle),N.x=U*Math.cos(G),N.y=U*Math.sin(G),r.applyForce(H,{x:H.position.x,y:H.position.y},N)}),this},getConstraintLength:function(_){var U=_.pointA.x,G=_.pointA.y,N=_.pointB.x,H=_.pointB.y;return _.bodyA&&(U+=_.bodyA.position.x,G+=_.bodyA.position.y),_.bodyB&&(N+=_.bodyB.position.x,H+=_.bodyB.position.y),T(U,G,N,H)},alignBody:function(_,U,G,N){_=_.hasOwnProperty("body")?_.body:_;var H;switch(N){case a.TOP_LEFT:case a.LEFT_TOP:H=this.bodyBounds.getTopLeft(_,U,G);break;case a.TOP_CENTER:H=this.bodyBounds.getTopCenter(_,U,G);break;case a.TOP_RIGHT:case a.RIGHT_TOP:H=this.bodyBounds.getTopRight(_,U,G);break;case a.LEFT_CENTER:H=this.bodyBounds.getLeftCenter(_,U,G);break;case a.CENTER:H=this.bodyBounds.getCenter(_,U,G);break;case a.RIGHT_CENTER:H=this.bodyBounds.getRightCenter(_,U,G);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:H=this.bodyBounds.getBottomLeft(_,U,G);break;case a.BOTTOM_CENTER:H=this.bodyBounds.getBottomCenter(_,U,G);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:H=this.bodyBounds.getBottomRight(_,U,G);break}return H&&r.setPosition(_,H),this},shutdown:function(){var _=this.systems.events;this.world&&(_.off(L.UPDATE,this.world.update,this.world),_.off(L.POST_UPDATE,this.world.postUpdate,this.world)),_.off(L.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(L.START,this.start,this),this.scene=null,this.systems=null}});b.register("MatterPhysics",X,"matterPhysics"),o.exports=X}),34803:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),x=e(83419),u=e(31884),r=e(95643),h=e(95540),n=e(72699),l=e(68287),c=e(26099),s=new x({Extends:l,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,n],initialize:function(m,p,g,T,S,w){r.call(this,m.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(T,S),this.setSizeToFrame(),this.setOrigin(),this.world=m,this._tempVec2=new c(p,g);var A=h(w,"shape",null);A?this.setBody(A,w):this.setRectangle(this.width,this.height,w),this.setPosition(p,g),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=s}),73834:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),u=e(83419),r=e(31884),h=e(62644),n=e(50792),l=e(95540),c=e(97022),s=e(41598),d=new u({Extends:n,Mixins:[r.Bounce,r.Collision,r.Friction,r.Gravity,r.Mass,r.Sensor,r.Sleep,r.Static],initialize:function(p,g,T){n.call(this),this.tile=g,this.world=p,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var S=l(T,"body",null),w=l(T,"addToWorld",!0);if(S)this.setBody(S,w);else{var A=g.getCollisionGroup(),M=l(A,"objects",[]);M.length>0?this.setFromTileCollision(T):this.setFromTileRectangle(T)}if(g.flipX||g.flipY){var R={x:g.getCenterX(),y:g.getCenterY()},P=g.flipX?-1:1,b=g.flipY?-1:1;x.scale(S,P,b,R)}},setFromTileRectangle:function(m){m===void 0&&(m={}),c(m,"isStatic")||(m.isStatic=!0),c(m,"addToWorld")||(m.addToWorld=!0);var p=this.tile.getBounds(),g=p.x+p.width/2,T=p.y+p.height/2,S=a.rectangle(g,T,p.width,p.height,m);return this.setBody(S,m.addToWorld),this},setFromTileCollision:function(m){m===void 0&&(m={}),c(m,"isStatic")||(m.isStatic=!0),c(m,"addToWorld")||(m.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,T=this.tile.getLeft(),S=this.tile.getTop(),w=this.tile.getCollisionGroup(),A=l(w,"objects",[]),M=[],R=0;R<A.length;R++){var P=A[R],b=T+P.x*p,F=S+P.y*g,I=P.width*p,L=P.height*g,D=null;if(P.rectangle)D=a.rectangle(b+I/2,F+L/2,I,L,m);else if(P.ellipse)D=a.circle(b+I/2,F+L/2,I/2,m);else if(P.polygon||P.polyline){var O=P.polygon?P.polygon:P.polyline,z=O.map(function(U){return{x:U.x*p,y:U.y*g}}),W=s.create(z),X=s.centre(W);b+=X.x,F+=X.y,D=a.fromVertices(b,F,W,m)}D&&M.push(D)}if(M.length===1)this.setBody(M[0],m.addToWorld);else if(M.length>1){var _=h(m);_.parts=M,this.setBody(x.create(_),_.addToWorld)}return this},setBody:function(m,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=m,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});o.exports=d}),19496:((o,E,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),u=e(53402),r=e(95540),h=e(41598),n={parseBody:function(l,c,s,d){d===void 0&&(d={});for(var m=r(s,"fixtures",[]),p=[],g=0;g<m.length;g++)for(var T=this.parseFixture(m[g]),S=0;S<T.length;S++)p.push(T[S]);var w=u.clone(s,!0);u.extend(w,d,!0),delete w.fixtures,delete w.type;var A=x.create(w);return x.setParts(A,p),x.setPosition(A,{x:l,y:c}),A},parseFixture:function(l){var c=u.extend({},!1,l);delete c.circle,delete c.vertices;var s;if(l.circle){var d=r(l.circle,"x"),m=r(l.circle,"y"),p=r(l.circle,"radius");s=[a.circle(d,m,p,c)]}else l.vertices&&(s=this.parseVertices(l.vertices,c));return s},parseVertices:function(l,c){c===void 0&&(c={});for(var s=[],d=0;d<l.length;d++)h.clockwiseSort(l[d]),s.push(x.create(u.extend({position:h.centre(l[d]),vertices:l[d]},c)));return a.flagCoincidentParts(s)}};o.exports=n}),85791:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),u={parseBody:function(r,h,n,l){l===void 0&&(l={});var c,s=n.vertices;if(s.length===1)l.vertices=s[0],c=x.create(l),a.flagCoincidentParts(c.parts);else{for(var d=[],m=0;m<s.length;m++){var p=x.create({vertices:s[m]});d.push(p)}a.flagCoincidentParts(d),l.parts=d,c=x.create(l)}return c.label=n.label,x.setPosition(c,{x:r,y:h}),c}};o.exports=u}),98713:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15647),x=e(83419),u=e(69351),r=e(48140),h=e(81388),n=e(1121),l=e(8214),c=e(46975),s=e(53614),d=e(26099),m=e(41598),p=new x({initialize:function(T,S,w){w===void 0&&(w={});var A={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=T,this.world=S,this.camera=null,this.pointer=null,this.active=!0,this.position=new d,this.body=null,this.part=null,this.constraint=r.create(c(w,A)),this.world.on(n.BEFORE_UPDATE,this.update,this),T.sys.input.on(l.POINTER_DOWN,this.onDown,this),T.sys.input.on(l.POINTER_UP,this.onUp,this)},onDown:function(g){this.pointer||(this.pointer=g,this.camera=g.camera)},onUp:function(g){g===this.pointer&&(this.pointer=null)},getBody:function(g){var T=this.position,S=this.constraint;this.camera.getWorldPoint(g.x,g.y,T);for(var w=u.allBodies(this.world.localWorld),A=0;A<w.length;A++){var M=w[A];if(!M.ignorePointer&&a.contains(M.bounds,T)&&h.canCollide(M.collisionFilter,S.collisionFilter)&&this.hitTestBody(M,T))return this.world.emit(n.DRAG_START,M,this.part,this),!0}return!1},hitTestBody:function(g,T){for(var S=this.constraint,w=g.parts.length,A=w>1?1:0,M=A;M<w;M++){var R=g.parts[M];if(m.contains(R.vertices,T))return S.pointA=T,S.pointB={x:T.x-g.position.x,y:T.y-g.position.y},S.bodyB=g,S.angleB=g.angle,s.set(g,!1),this.part=R,this.body=g,!0}return!1},update:function(){var g=this.pointer,T=this.body;if(!this.active||!g){T&&this.stopDrag();return}if(!g.isDown&&T){this.stopDrag();return}else if(g.isDown){if(!this.camera||!T&&!this.getBody(g))return;T=this.body;var S=this.position,w=this.constraint;this.camera.getWorldPoint(g.x,g.y,S),w.pointA.x=S.x,w.pointA.y=S.y,s.set(T,!1),this.world.emit(n.DRAG,T,this)}},stopDrag:function(){var g=this.body,T=this.constraint;T.bodyB=null,T.pointB=null,this.pointer=null,this.body=null,this.part=null,g&&this.world.emit(n.DRAG_END,g,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(n.BEFORE_UPDATE,this.update),this.scene.sys.input.off(l.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(l.POINTER_UP,this.onUp,this)}});o.exports=p}),68243:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),u=e(83419),r=e(53402),h=e(69351),n=e(48413),l=e(50792),c=e(1121),s=e(95540),d=e(35154),m=e(22562),p=e(35810),g=e(73834),T=e(4372),S=e(13037),w=e(31725),A=new u({Extends:l,initialize:function(R,P){l.call(this),this.scene=R,this.engine=n.create(P),this.localWorld=this.engine.world;var b=d(P,"gravity",null);b?this.setGravity(b.x,b.y,b.scale):b===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=d(P,"enabled",!0),this.getDelta=d(P,"getDelta",this.update60Hz);var F=s(P,"runner",{}),I=s(F,"fps",!1);I&&(F.delta=1e3/s(F,"fps",60)),this.runner=S.create(F),this.autoUpdate=d(P,"autoUpdate",!0);var L=d(P,"debug",!1);if(this.drawDebug=typeof L=="object"?!0:L,this.debugGraphic,this.debugConfig={showAxes:s(L,"showAxes",!1),showAngleIndicator:s(L,"showAngleIndicator",!1),angleColor:s(L,"angleColor",15208787),showBroadphase:s(L,"showBroadphase",!1),broadphaseColor:s(L,"broadphaseColor",16757760),showBounds:s(L,"showBounds",!1),boundsColor:s(L,"boundsColor",16777215),showVelocity:s(L,"showVelocity",!1),velocityColor:s(L,"velocityColor",44783),showCollisions:s(L,"showCollisions",!1),collisionColor:s(L,"collisionColor",16094476),showSeparations:s(L,"showSeparations",!1),separationColor:s(L,"separationColor",16753920),showBody:s(L,"showBody",!0),showStaticBody:s(L,"showStaticBody",!0),showInternalEdges:s(L,"showInternalEdges",!1),renderFill:s(L,"renderFill",!1),renderLine:s(L,"renderLine",!0),fillColor:s(L,"fillColor",1075465),fillOpacity:s(L,"fillOpacity",1),lineColor:s(L,"lineColor",2678297),lineOpacity:s(L,"lineOpacity",1),lineThickness:s(L,"lineThickness",1),staticFillColor:s(L,"staticFillColor",857979),staticLineColor:s(L,"staticLineColor",1255396),showSleeping:s(L,"showSleeping",!1),staticBodySleepOpacity:s(L,"staticBodySleepOpacity",.7),sleepFillColor:s(L,"sleepFillColor",4605510),sleepLineColor:s(L,"sleepLineColor",10066585),showSensors:s(L,"showSensors",!0),sensorFillColor:s(L,"sensorFillColor",857979),sensorLineColor:s(L,"sensorLineColor",1255396),showPositions:s(L,"showPositions",!0),positionSize:s(L,"positionSize",4),positionColor:s(L,"positionColor",14697178),showJoint:s(L,"showJoint",!0),jointColor:s(L,"jointColor",14737474),jointLineOpacity:s(L,"jointLineOpacity",1),jointLineThickness:s(L,"jointLineThickness",2),pinSize:s(L,"pinSize",4),pinColor:s(L,"pinColor",4382944),springColor:s(L,"springColor",14697184),anchorColor:s(L,"anchorColor",15724527),anchorSize:s(L,"anchorSize",4),showConvexHulls:s(L,"showConvexHulls",!1),hullColor:s(L,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),s(P,"setBounds",!1)){var D=P.setBounds;if(typeof D=="boolean")this.setBounds();else{var O=s(D,"x",0),z=s(D,"y",0),W=s(D,"width",R.sys.scale.width),X=s(D,"height",R.sys.scale.height),_=s(D,"thickness",64),U=s(D,"left",!0),G=s(D,"right",!0),N=s(D,"top",!0),H=s(D,"bottom",!0);this.setBounds(O,z,W,X,_,U,G,N,H)}}},setCompositeRenderStyle:function(M){var R=M.bodies,P=M.constraints,b=M.composites,F,I,L;for(F=0;F<R.length;F++)I=R[F],L=I.render,this.setBodyRenderStyle(I,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity);for(F=0;F<P.length;F++)I=P[F],L=I.render,this.setConstraintRenderStyle(I,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize);for(F=0;F<b.length;F++)I=b[F],this.setCompositeRenderStyle(I);return this},setBodyRenderStyle:function(M,R,P,b,F,I){var L=M.render,D=this.debugConfig;return L?(R==null&&(R=M.isStatic?D.staticLineColor:D.lineColor),P==null&&(P=D.lineOpacity),b==null&&(b=D.lineThickness),F==null&&(F=M.isStatic?D.staticFillColor:D.fillColor),I==null&&(I=D.fillOpacity),R!==!1&&(L.lineColor=R),P!==!1&&(L.lineOpacity=P),b!==!1&&(L.lineThickness=b),F!==!1&&(L.fillColor=F),I!==!1&&(L.fillOpacity=I),this):this},setConstraintRenderStyle:function(M,R,P,b,F,I,L){var D=M.render,O=this.debugConfig;if(!D)return this;if(R==null){var z=D.type;z==="line"?R=O.jointColor:z==="pin"?R=O.pinColor:z==="spring"&&(R=O.springColor)}return P==null&&(P=O.jointLineOpacity),b==null&&(b=O.jointLineThickness),F==null&&(F=O.pinSize),I==null&&(I=O.anchorColor),L==null&&(L=O.anchorSize),R!==!1&&(D.lineColor=R),P!==!1&&(D.lineOpacity=P),b!==!1&&(D.lineThickness=b),F!==!1&&(D.pinSize=F),I!==!1&&(D.anchorColor=I),L!==!1&&(D.anchorSize=L),this},setEventsProxy:function(){var M=this,R=this.engine,P=this.localWorld;this.drawDebug&&(p.on(P,"compositeModified",function(b){M.setCompositeRenderStyle(b)}),p.on(P,"beforeAdd",function(b){for(var F=[].concat(b.object),I=0;I<F.length;I++){var L=F[I],D=L.render;L.type==="body"?M.setBodyRenderStyle(L,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):L.type==="composite"?M.setCompositeRenderStyle(L):L.type==="constraint"&&M.setConstraintRenderStyle(L,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),p.on(P,"beforeAdd",function(b){M.emit(c.BEFORE_ADD,b)}),p.on(P,"afterAdd",function(b){M.emit(c.AFTER_ADD,b)}),p.on(P,"beforeRemove",function(b){M.emit(c.BEFORE_REMOVE,b)}),p.on(P,"afterRemove",function(b){M.emit(c.AFTER_REMOVE,b)}),p.on(R,"beforeUpdate",function(b){M.emit(c.BEFORE_UPDATE,b)}),p.on(R,"afterUpdate",function(b){M.emit(c.AFTER_UPDATE,b)}),p.on(R,"collisionStart",function(b){var F=b.pairs,I,L;F.length>0&&F.map(function(D){I=D.bodyA,L=D.bodyB,I.gameObject&&I.gameObject.emit("collide",I,L,D),L.gameObject&&L.gameObject.emit("collide",L,I,D),p.trigger(I,"onCollide",{pair:D}),p.trigger(L,"onCollide",{pair:D}),I.onCollideCallback&&I.onCollideCallback(D),L.onCollideCallback&&L.onCollideCallback(D),I.onCollideWith[L.id]&&I.onCollideWith[L.id](L,D),L.onCollideWith[I.id]&&L.onCollideWith[I.id](I,D)}),M.emit(c.COLLISION_START,b,I,L)}),p.on(R,"collisionActive",function(b){var F=b.pairs,I,L;F.length>0&&F.map(function(D){I=D.bodyA,L=D.bodyB,I.gameObject&&I.gameObject.emit("collideActive",I,L,D),L.gameObject&&L.gameObject.emit("collideActive",L,I,D),p.trigger(I,"onCollideActive",{pair:D}),p.trigger(L,"onCollideActive",{pair:D}),I.onCollideActiveCallback&&I.onCollideActiveCallback(D),L.onCollideActiveCallback&&L.onCollideActiveCallback(D)}),M.emit(c.COLLISION_ACTIVE,b,I,L)}),p.on(R,"collisionEnd",function(b){var F=b.pairs,I,L;F.length>0&&F.map(function(D){I=D.bodyA,L=D.bodyB,I.gameObject&&I.gameObject.emit("collideEnd",I,L,D),L.gameObject&&L.gameObject.emit("collideEnd",L,I,D),p.trigger(I,"onCollideEnd",{pair:D}),p.trigger(L,"onCollideEnd",{pair:D}),I.onCollideEndCallback&&I.onCollideEndCallback(D),L.onCollideEndCallback&&L.onCollideEndCallback(D)}),M.emit(c.COLLISION_END,b,I,L)})},setBounds:function(M,R,P,b,F,I,L,D,O){return M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P=this.scene.sys.scale.width),b===void 0&&(b=this.scene.sys.scale.height),F===void 0&&(F=64),I===void 0&&(I=!0),L===void 0&&(L=!0),D===void 0&&(D=!0),O===void 0&&(O=!0),this.updateWall(I,"left",M-F,R-F,F,b+F*2),this.updateWall(L,"right",M+P,R-F,F,b+F*2),this.updateWall(D,"top",M,R-F,P,F),this.updateWall(O,"bottom",M,R+b,P,F),this},updateWall:function(M,R,P,b,F,I){var L=this.walls[R];M?(L&&T.remove(this.localWorld,L),P+=F/2,b+=I/2,this.walls[R]=this.create(P,b,F,I,{isStatic:!0,friction:0,frictionStatic:0})):(L&&T.remove(this.localWorld,L),this.walls[R]=null)},createDebugGraphic:function(){var M=this.scene.sys.add.graphics({x:0,y:0});return M.setDepth(Number.MAX_VALUE),this.debugGraphic=M,this.drawDebug=!0,M},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(M,R,P){return M===void 0&&(M=0),R===void 0&&(R=1),P===void 0&&(P=.001),this.localWorld.gravity.x=M,this.localWorld.gravity.y=R,this.localWorld.gravity.scale=P,this},create:function(M,R,P,b,F){var I=a.rectangle(M,R,P,b,F);return T.add(this.localWorld,I),I},add:function(M){return T.add(this.localWorld,M),this},remove:function(M,R){Array.isArray(M)||(M=[M]);for(var P=0;P<M.length;P++){var b=M[P],F=b.body?b.body:b;h.remove(this.localWorld,F,R)}return this},removeConstraint:function(M,R){return h.remove(this.localWorld,M,R),this},convertTilemapLayer:function(M,R){var P=M.layer,b=M.getTilesWithin(0,0,P.width,P.height,{isColliding:!0});return this.convertTiles(b,R),this},convertTiles:function(M,R){if(M.length===0)return this;for(var P=0;P<M.length;P++)new g(this,M[P],R);return this},nextGroup:function(M){return m.nextGroup(M)},nextCategory:function(){return m.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=r.now(),this.emit(c.RESUME),this},update:function(M){if(!(!this.enabled||!this.autoUpdate)){var R=this.engine,P=this.runner,b=r.now(),F=P.delta,I=0,L=M-P.timeLastTick;if((!L||!P.timeLastTick||L>Math.max(S._maxFrameDelta,P.maxFrameTime))&&(L=P.frameDelta||S._frameDeltaFallback),P.frameDeltaSmoothing){P.frameDeltaHistory.push(L),P.frameDeltaHistory=P.frameDeltaHistory.slice(-P.frameDeltaHistorySize);var D=P.frameDeltaHistory.slice(0).sort(),O=P.frameDeltaHistory.slice(D.length*S._smoothingLowerBound,D.length*S._smoothingUpperBound),z=S._mean(O);L=z||L}P.frameDeltaSnapping&&(L=1e3/Math.round(1e3/L)),P.frameDelta=L,P.timeLastTick=M,P.timeBuffer+=P.frameDelta,P.timeBuffer=r.clamp(P.timeBuffer,0,P.frameDelta+F*S._timeBufferMargin),P.lastUpdatesDeferred=0;for(var W=P.maxUpdates||Math.ceil(P.maxFrameTime/F),X=r.now();F>0&&P.timeBuffer>=F*S._timeBufferMargin;){n.update(R,F),P.timeBuffer-=F,I+=1;var _=r.now()-b,U=r.now()-X,G=_+S._elapsedNextEstimate*U/I;if(I>=W||G>P.maxFrameTime){P.lastUpdatesDeferred=Math.round(Math.max(0,P.timeBuffer/F-S._timeBufferMargin));break}}}},step:function(M){n.update(this.engine,M)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(M){var R=M.hasOwnProperty("body")?M.body:M;return h.get(this.localWorld,R.id,R.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var M=this.debugConfig,R=this.engine,P=this.debugGraphic,b=h.allBodies(this.localWorld);this.debugGraphic.clear(),M.showBroadphase&&R.broadphase.controller&&this.renderGrid(R.broadphase,P,M.broadphaseColor,.5),M.showBounds&&this.renderBodyBounds(b,P,M.boundsColor,.5),(M.showBody||M.showStaticBody)&&this.renderBodies(b),M.showJoint&&this.renderJoints(),(M.showAxes||M.showAngleIndicator)&&this.renderBodyAxes(b,P,M.showAxes,M.angleColor,.5),M.showVelocity&&this.renderBodyVelocity(b,P,M.velocityColor,1,2),M.showSeparations&&this.renderSeparations(R.pairs.list,P,M.separationColor),M.showCollisions&&this.renderCollisions(R.pairs.list,P,M.collisionColor)}},renderGrid:function(M,R,P,b){R.lineStyle(1,P,b);for(var F=r.keys(M.buckets),I=0;I<F.length;I++){var L=F[I];if(!(M.buckets[L].length<2)){var D=L.split(/C|R/);R.strokeRect(parseInt(D[1],10)*M.bucketWidth,parseInt(D[2],10)*M.bucketHeight,M.bucketWidth,M.bucketHeight)}}return this},renderSeparations:function(M,R,P){R.lineStyle(1,P,1);for(var b=0;b<M.length;b++){var F=M[b];if(F.isActive){var I=F.collision,L=I.bodyA,D=I.bodyB,O=L.position,z=D.position,W=I.penetration,X=!L.isStatic&&!D.isStatic?4:1;D.isStatic&&(X=0),R.lineBetween(z.x,z.y,z.x-W.x*X,z.y-W.y*X),X=!L.isStatic&&!D.isStatic?4:1,L.isStatic&&(X=0),R.lineBetween(O.x,O.y,O.x-W.x*X,O.y-W.y*X)}}return this},renderCollisions:function(M,R,P){R.lineStyle(1,P,.5),R.fillStyle(P,1);var b,F;for(b=0;b<M.length;b++)if(F=M[b],!!F.isActive)for(var I=0;I<F.contactCount;I++){var L=F.contacts[I],D=L.vertex;D&&R.fillRect(D.x-2,D.y-2,5,5)}for(b=0;b<M.length;b++)if(F=M[b],!!F.isActive){var O=F.collision,z=F.contacts;if(F.contactCount>0){var W=z[0].vertex.x,X=z[0].vertex.y;F.contactCount===2&&(W=(z[0].vertex.x+z[1].vertex.x)/2,X=(z[0].vertex.y+z[1].vertex.y)/2),O.bodyB===O.supports[0].body||O.bodyA.isStatic?R.lineBetween(W-O.normal.x*8,X-O.normal.y*8,W,X):R.lineBetween(W+O.normal.x*8,X+O.normal.y*8,W,X)}}return this},renderBodyBounds:function(M,R,P,b){R.lineStyle(1,P,b);for(var F=0;F<M.length;F++){var I=M[F];if(I.render.visible){var L=I.bounds;if(L)R.strokeRect(L.min.x,L.min.y,L.max.x-L.min.x,L.max.y-L.min.y);else for(var D=I.parts,O=D.length>1?1:0;O<D.length;O++){var z=D[O];R.strokeRect(z.bounds.min.x,z.bounds.min.y,z.bounds.max.x-z.bounds.min.x,z.bounds.max.y-z.bounds.min.y)}}}return this},renderBodyAxes:function(M,R,P,b,F){R.lineStyle(1,b,F);for(var I=0;I<M.length;I++){var L=M[I],D=L.parts;if(L.render.visible){var O,z,W;if(P)for(z=D.length>1?1:0;z<D.length;z++)for(O=D[z],W=0;W<O.axes.length;W++){var X=O.axes[W];R.lineBetween(O.position.x,O.position.y,O.position.x+X.x*20,O.position.y+X.y*20)}else for(z=D.length>1?1:0;z<D.length;z++)for(O=D[z],W=0;W<O.axes.length;W++)R.lineBetween(O.position.x,O.position.y,(O.vertices[0].x+O.vertices[O.vertices.length-1].x)/2,(O.vertices[0].y+O.vertices[O.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(M,R,P,b,F){R.lineStyle(F,P,b);for(var I=0;I<M.length;I++){var L=M[I];L.render.visible&&R.lineBetween(L.position.x,L.position.y,L.position.x+(L.position.x-L.positionPrev.x)*2,L.position.y+(L.position.y-L.positionPrev.y)*2)}return this},renderBodies:function(M){for(var R=this.debugGraphic,P=this.debugConfig,b=P.showBody,F=P.showStaticBody,I=P.showSleeping,L=P.showInternalEdges,D=P.showConvexHulls,O=P.renderFill,z=P.renderLine,W=P.staticBodySleepOpacity,X=P.sleepFillColor,_=P.sleepLineColor,U=P.hullColor,G=0;G<M.length;G++){var N=M[G];if(N.render.visible&&!(!F&&N.isStatic||!b&&!N.isStatic)){var H=N.render.lineColor,V=N.render.lineOpacity,$=N.render.lineThickness,j=N.render.fillColor,k=N.render.fillOpacity;I&&N.isSleeping&&(N.isStatic?(V*=W,k*=W):(H=_,j=X)),O||(j=null),z||(H=null),this.renderBody(N,R,L,H,V,$,j,k);var Q=N.parts.length;D&&Q>1&&this.renderConvexHull(N,R,U,$)}}},renderBody:function(M,R,P,b,F,I,L,D){b===void 0&&(b=null),F===void 0&&(F=null),I===void 0&&(I=1),L===void 0&&(L=null),D===void 0&&(D=null);for(var O=this.debugConfig,z=O.sensorFillColor,W=O.sensorLineColor,X=M.parts,_=X.length,U=_>1?1:0;U<_;U++){var G=X[U],N=G.render,H=N.opacity;if(!(!N.visible||H===0||G.isSensor&&!O.showSensors)){var V=G.circleRadius;if(R.beginPath(),G.isSensor?(L!==null&&R.fillStyle(z,D*H),b!==null&&R.lineStyle(I,W,F*H)):(L!==null&&R.fillStyle(L,D*H),b!==null&&R.lineStyle(I,b,F*H)),V)R.arc(G.position.x,G.position.y,V,0,2*Math.PI);else{var $=G.vertices,j=$.length;R.moveTo($[0].x,$[0].y);for(var k=1;k<j;k++){var Q=$[k];if(!$[k-1].isInternal||P?R.lineTo(Q.x,Q.y):R.moveTo(Q.x,Q.y),k<j&&Q.isInternal&&!P){var et=(k+1)%j;R.moveTo($[et].x,$[et].y)}}R.closePath()}L!==null&&R.fillPath(),b!==null&&R.strokePath()}}if(O.showPositions&&!M.isStatic){var at=M.position.x,q=M.position.y,ft=Math.ceil(O.positionSize/2);R.fillStyle(O.positionColor,1),R.fillRect(at-ft,q-ft,O.positionSize,O.positionSize)}return this},renderConvexHull:function(M,R,P,b){b===void 0&&(b=1);var F=M.parts,I=F.length;if(I>1){var L=M.vertices;R.lineStyle(b,P),R.beginPath(),R.moveTo(L[0].x,L[0].y);for(var D=1;D<L.length;D++)R.lineTo(L[D].x,L[D].y);R.lineTo(L[0].x,L[0].y),R.strokePath()}return this},renderJoints:function(){for(var M=this.debugGraphic,R=h.allConstraints(this.localWorld),P=0;P<R.length;P++){var b=R[P].render,F=b.lineColor,I=b.lineOpacity,L=b.lineThickness,D=b.pinSize,O=b.anchorColor,z=b.anchorSize;this.renderConstraint(R[P],M,F,I,L,D,O,z)}},renderConstraint:function(M,R,P,b,F,I,L,D){var O=M.render;if(!O.visible||!M.pointA||!M.pointB)return this;R.lineStyle(F,P,b);var z=M.bodyA,W=M.bodyB,X,_;if(z?X=w.add(z.position,M.pointA):X=M.pointA,O.type==="pin")R.strokeCircle(X.x,X.y,I);else{if(W?_=w.add(W.position,M.pointB):_=M.pointB,R.beginPath(),R.moveTo(X.x,X.y),O.type==="spring")for(var U=w.sub(_,X),G=w.perp(w.normalise(U)),N=Math.ceil(r.clamp(M.length/5,12,20)),H,V=1;V<N;V+=1)H=V%2===0?1:-1,R.lineTo(X.x+U.x*(V/N)+G.x*H*4,X.y+U.y*(V/N)+G.y*H*4);R.lineTo(_.x,_.y)}return R.strokePath(),O.anchors&&D>0&&(R.fillStyle(L),R.fillCircle(X.x,X.y,D),R.fillCircle(_.x,_.y,D)),this},resetCollisionIDs:function(){return x._nextCollidingGroupId=1,x._nextNonCollidingGroupId=-1,x._nextCategory=1,this},shutdown:function(){p.off(this.engine),this.removeAllListeners(),T.clear(this.localWorld,!1),n.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});o.exports=A}),70410:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setBounce:function(e){return this.body.restitution=e,this}};o.exports=E}),66968:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var a=0;if(!Array.isArray(e))a=e;else for(var x=0;x<e.length;x++)a|=e[x];return this.body.collisionFilter.mask=a,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,a){Array.isArray(e)||(e=[e]);for(var x=0;x<e.length;x++){var u=e[x].hasOwnProperty("body")?e[x].body:e[x];this.body.setOnCollideWith(u,a)}return this}};o.exports=E}),51607:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x={applyForce:function(u){return this._tempVec2.set(this.body.position.x,this.body.position.y),a.applyForce(this.body,this._tempVec2,u),this},applyForceFrom:function(u,r){return a.applyForce(this.body,u,r),this},thrust:function(u){var r=this.body.angle;return this._tempVec2.set(u*Math.cos(r),u*Math.sin(r)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(u){var r=this.body.angle-Math.PI/2;return this._tempVec2.set(u*Math.cos(r),u*Math.sin(r)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(u){var r=this.body.angle+Math.PI/2;return this._tempVec2.set(u*Math.cos(r),u*Math.sin(r)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(u){var r=this.body.angle-Math.PI;return this._tempVec2.set(u*Math.cos(r),u*Math.sin(r)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};o.exports=x}),5436:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setFriction:function(e,a,x){return this.body.friction=e,a!==void 0&&(this.body.frictionAir=a),x!==void 0&&(this.body.frictionStatic=x),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};o.exports=E}),39858:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};o.exports=E}),37302:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x=e(26099),u={setMass:function(r){return a.setMass(this.body,r),this},setDensity:function(r){return a.setDensity(this.body,r),this},centerOfMass:{get:function(){return new x(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};o.exports=u}),39132:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};o.exports=E}),57772:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),x=e(22562),u=e(43855),r=e(95540),h=e(19496),n=e(85791),l=e(41598),c={setRectangle:function(s,d,m){return this.setBody({type:"rectangle",width:s,height:d},m)},setCircle:function(s,d){return this.setBody({type:"circle",radius:s},d)},setPolygon:function(s,d,m){return this.setBody({type:"polygon",sides:d,radius:s},m)},setTrapezoid:function(s,d,m,p){return this.setBody({type:"trapezoid",width:s,height:d,slope:m},p)},setExistingBody:function(s,d){d===void 0&&(d=!0),this.body&&this.world.remove(this.body,!0),this.body=s;for(var m=0;m<s.parts.length;m++)s.parts[m].gameObject=this;var p=this;if(s.destroy=function(){p.world.remove(p.body,!0),p.body.gameObject=null},d&&(this.world.has(s)&&this.world.remove(s,!0),this.world.add(s)),this._originComponent){var g=s.render.sprite.xOffset,T=s.render.sprite.yOffset,S=s.centerOfMass.x,w=s.centerOfMass.y;if(u(S,.5)&&u(w,.5))this.setOrigin(g+.5,T+.5);else{var A=s.centerOffset.x,M=s.centerOffset.y;this.setOrigin(g+A/this.displayWidth,T+M/this.displayHeight)}}return this},setBody:function(s,d){if(!s)return this;var m;typeof s=="string"&&(s={type:s});var p=r(s,"type","rectangle"),g=r(s,"x",this._tempVec2.x),T=r(s,"y",this._tempVec2.y),S=r(s,"width",this.width),w=r(s,"height",this.height);switch(p){case"rectangle":m=a.rectangle(g,T,S,w,d);break;case"circle":var A=r(s,"radius",Math.max(S,w)/2),M=r(s,"maxSides",25);m=a.circle(g,T,A,d,M);break;case"trapezoid":var R=r(s,"slope",.5);m=a.trapezoid(g,T,S,w,R,d);break;case"polygon":var P=r(s,"sides",5),b=r(s,"radius",Math.max(S,w)/2);m=a.polygon(g,T,P,b,d);break;case"fromVertices":case"fromVerts":var F=r(s,"verts",null);if(F)if(typeof F=="string"&&(F=l.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))x.setVertices(this.body,F),m=this.body;else{var I=r(s,"flagInternal",!1),L=r(s,"removeCollinear",.01),D=r(s,"minimumArea",10);m=a.fromVertices(g,T,F,d,I,L,D)}break;case"fromPhysicsEditor":m=h.parseBody(g,T,s,d);break;case"fromPhysicsTracer":m=n.parseBody(g,T,s,d);break}return m&&this.setExistingBody(m,s.addToWorld),this}};o.exports=c}),38083:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1121),x=e(53614),u=e(35810),r={setToSleep:function(){return x.set(this.body,!0),this},setAwake:function(){return x.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,n){return this.setSleepStartEvent(h),this.setSleepEndEvent(n),this},setSleepStartEvent:function(h){if(h){var n=this.world;u.on(this.body,"sleepStart",function(l){n.emit(a.SLEEP_START,l,this)})}else u.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var n=this.world;u.on(this.body,"sleepEnd",function(l){n.emit(a.SLEEP_END,l,this)})}else u.off(this.body,"sleepEnd");return this}};o.exports=r}),90556:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x={setStatic:function(u){return a.setStatic(this.body,u),this},isStatic:function(){return this.body.isStatic}};o.exports=x}),85436:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x=e(36383),u=e(86554),r=e(30954),h=4,n={x:{get:function(){return this.body.position.x},set:function(l){this._tempVec2.set(l,this.y),a.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(l){this._tempVec2.set(this.x,l),a.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this.setScale(l,l)}},scaleX:{get:function(){return this._scaleX},set:function(l){var c=1/this._scaleX,s=1/this._scaleY;this._scaleX=l,this._scaleX===0?this.renderFlags&=~h:this.renderFlags|=h,a.scale(this.body,c,s),a.scale(this.body,l,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(l){var c=1/this._scaleX,s=1/this._scaleY;this._scaleY=l,this._scaleY===0?this.renderFlags&=~h:this.renderFlags|=h,a.scale(this.body,c,s),a.scale(this.body,this._scaleX,l)}},angle:{get:function(){return r(this.body.angle*x.RAD_TO_DEG)},set:function(l){this.rotation=r(l)*x.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(l){this._rotation=u(l),a.setAngle(this.body,this._rotation)}},setPosition:function(l,c){return l===void 0&&(l=0),c===void 0&&(c=l),this._tempVec2.set(l,c),a.setPosition(this.body,this._tempVec2),this},setRotation:function(l){return l===void 0&&(l=0),this._rotation=u(l),a.setAngle(this.body,l),this},setFixedRotation:function(){return a.setInertia(this.body,1/0),this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,a.setAngle(this.body,this.rotation),this},setScale:function(l,c,s){l===void 0&&(l=1),c===void 0&&(c=l);var d=1/this._scaleX,m=1/this._scaleY;return this._scaleX=l,this._scaleY=c,a.scale(this.body,d,m,s),a.scale(this.body,l,c,s),this}};o.exports=n}),42081:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),x={setVelocityX:function(u){return this._tempVec2.set(u,this.body.velocity.y),a.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(u){return this._tempVec2.set(this.body.velocity.x,u),a.setVelocity(this.body,this._tempVec2),this},setVelocity:function(u,r){return this._tempVec2.set(u,r),a.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return a.getVelocity(this.body)},setAngularVelocity:function(u){return a.setAngularVelocity(this.body,u),this},getAngularVelocity:function(){return a.getAngularVelocity(this.body)},setAngularSpeed:function(u){return a.setAngularSpeed(this.body,u),this},getAngularSpeed:function(){return a.getAngularSpeed(this.body)}};o.exports=x}),31884:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bounce:e(70410),Collision:e(66968),Force:e(51607),Friction:e(5436),Gravity:e(39858),Mass:e(37302),Sensor:e(39132),SetBody:e(57772),Sleep:e(38083),Static:e(90556),Transform:e(85436),Velocity:e(42081)}}),85608:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afteradd"}),1213:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterremove"}),25968:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterupdate"}),67205:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeadd"}),39438:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeremove"}),44823:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeupdate"}),92593:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionactive"}),60128:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionend"}),76861:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionstart"}),92362:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"}),76408:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"}),93971:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"}),5656:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"}),47861:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"}),79099:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepend"}),35906:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepstart"}),1121:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_ADD:e(85608),AFTER_REMOVE:e(1213),AFTER_UPDATE:e(25968),BEFORE_ADD:e(67205),BEFORE_REMOVE:e(39438),BEFORE_UPDATE:e(44823),COLLISION_ACTIVE:e(92593),COLLISION_END:e(60128),COLLISION_START:e(76861),DRAG_END:e(92362),DRAG:e(76408),DRAG_START:e(93971),PAUSE:e(5656),RESUME:e(47861),SLEEP_END:e(79099),SLEEP_START:e(35906)}}),3875:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BodyBounds:e(68174),Components:e(31884),Events:e(1121),Factory:e(28137),MatterGameObject:e(75803),Image:e(23181),Matter:e(19933),MatterPhysics:e(42045),PolyDecomp:e(55973),Sprite:e(34803),TileBody:e(73834),PhysicsEditorParser:e(19496),PhysicsJSONParser:e(85791),PointerConstraint:e(98713),World:e(68243)}}),22562:((o,E,e)=>{var a={};o.exports=a;var x=e(41598),u=e(31725),r=e(53614),h=e(53402),n=e(15647),l=e(66615);(function(){a._timeCorrection=!0,a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a._baseDelta=16.666666666666668,a.create=function(s){var d={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:s.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!s.hasOwnProperty("position")&&s.hasOwnProperty("vertices")?s.position=x.centre(s.vertices):s.hasOwnProperty("vertices")||(d.vertices=x.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var m=h.extend(d,s);return c(m,s),m.setOnCollideWith=function(p,g){return g?this.onCollideWith[p.id]=g:delete this.onCollideWith[p.id],this},m},a.nextGroup=function(s){return s?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var c=function(s,d){if(d=d||{},a.set(s,{bounds:s.bounds||n.create(s.vertices),positionPrev:s.positionPrev||u.clone(s.position),anglePrev:s.anglePrev||s.angle,vertices:s.vertices,parts:s.parts||[s],isStatic:s.isStatic,isSleeping:s.isSleeping,parent:s.parent||s}),x.rotate(s.vertices,s.angle,s.position),l.rotate(s.axes,s.angle),n.update(s.bounds,s.vertices,s.velocity),a.set(s,{axes:d.axes||s.axes,area:d.area||s.area,mass:d.mass||s.mass,inertia:d.inertia||s.inertia}),s.parts.length===1){var m=s.bounds,p=s.centerOfMass,g=s.centerOffset,T=m.max.x-m.min.x,S=m.max.y-m.min.y;p.x=-(m.min.x-s.position.x)/T,p.y=-(m.min.y-s.position.y)/S,g.x=T*p.x,g.y=S*p.y}};a.set=function(s,d,m){var p;typeof d=="string"&&(p=d,d={},d[p]=m);for(p in d)if(Object.prototype.hasOwnProperty.call(d,p))switch(m=d[p],p){case"isStatic":a.setStatic(s,m);break;case"isSleeping":r.set(s,m);break;case"mass":a.setMass(s,m);break;case"density":a.setDensity(s,m);break;case"inertia":a.setInertia(s,m);break;case"vertices":a.setVertices(s,m);break;case"position":a.setPosition(s,m);break;case"angle":a.setAngle(s,m);break;case"velocity":a.setVelocity(s,m);break;case"angularVelocity":a.setAngularVelocity(s,m);break;case"speed":a.setSpeed(s,m);break;case"angularSpeed":a.setAngularSpeed(s,m);break;case"parts":a.setParts(s,m);break;case"centre":a.setCentre(s,m);break;default:s[p]=m}},a.setStatic=function(s,d){for(var m=0;m<s.parts.length;m++){var p=s.parts[m];d?(p.isStatic||(p._original={restitution:p.restitution,friction:p.friction,mass:p.mass,inertia:p.inertia,density:p.density,inverseMass:p.inverseMass,inverseInertia:p.inverseInertia}),p.restitution=0,p.friction=1,p.mass=p.inertia=p.density=1/0,p.inverseMass=p.inverseInertia=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.angularVelocity=0,p.speed=0,p.angularSpeed=0,p.motion=0):p._original&&(p.restitution=p._original.restitution,p.friction=p._original.friction,p.mass=p._original.mass,p.inertia=p._original.inertia,p.density=p._original.density,p.inverseMass=p._original.inverseMass,p.inverseInertia=p._original.inverseInertia,p._original=null),p.isStatic=d}},a.setMass=function(s,d){var m=s.inertia/(s.mass/6);s.inertia=m*(d/6),s.inverseInertia=1/s.inertia,s.mass=d,s.inverseMass=1/s.mass,s.density=s.mass/s.area},a.setDensity=function(s,d){a.setMass(s,d*s.area),s.density=d},a.setInertia=function(s,d){s.inertia=d,s.inverseInertia=1/s.inertia},a.setVertices=function(s,d){d[0].body===s?s.vertices=d:s.vertices=x.create(d,s),s.axes=l.fromVertices(s.vertices),s.area=x.area(s.vertices),a.setMass(s,s.density*s.area);var m=x.centre(s.vertices);x.translate(s.vertices,m,-1),a.setInertia(s,a._inertiaScale*x.inertia(s.vertices,s.mass)),x.translate(s.vertices,s.position),n.update(s.bounds,s.vertices,s.velocity)},a.setParts=function(s,d,m){var p;for(d=d.slice(0),s.parts.length=0,s.parts.push(s),s.parent=s,p=0;p<d.length;p++){var g=d[p];g!==s&&(g.parent=s,s.parts.push(g))}if(s.parts.length!==1){if(m=typeof m<"u"?m:!0,m){var T=[];for(p=0;p<d.length;p++)T=T.concat(d[p].vertices);x.clockwiseSort(T);var S=x.hull(T),w=x.centre(S);a.setVertices(s,S),x.translate(s.vertices,w)}var A=a._totalProperties(s),M=A.centre.x,R=A.centre.y,P=s.bounds,b=s.centerOfMass,F=s.centerOffset;n.update(P,s.vertices,s.velocity),b.x=-(P.min.x-M)/(P.max.x-P.min.x),b.y=-(P.min.y-R)/(P.max.y-P.min.y),F.x=M,F.y=R,s.area=A.area,s.parent=s,s.position.x=M,s.position.y=R,s.positionPrev.x=M,s.positionPrev.y=R,a.setMass(s,A.mass),a.setInertia(s,A.inertia),a.setPosition(s,A.centre)}},a.setCentre=function(s,d,m){m?(s.positionPrev.x+=d.x,s.positionPrev.y+=d.y,s.position.x+=d.x,s.position.y+=d.y):(s.positionPrev.x=d.x-(s.position.x-s.positionPrev.x),s.positionPrev.y=d.y-(s.position.y-s.positionPrev.y),s.position.x=d.x,s.position.y=d.y)},a.setPosition=function(s,d,m){var p=u.sub(d,s.position);m?(s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.velocity.x=p.x,s.velocity.y=p.y,s.speed=u.magnitude(p)):(s.positionPrev.x+=p.x,s.positionPrev.y+=p.y);for(var g=0;g<s.parts.length;g++){var T=s.parts[g];T.position.x+=p.x,T.position.y+=p.y,x.translate(T.vertices,p),n.update(T.bounds,T.vertices,s.velocity)}},a.setAngle=function(s,d,m){var p=d-s.angle;m?(s.anglePrev=s.angle,s.angularVelocity=p,s.angularSpeed=Math.abs(p)):s.anglePrev+=p;for(var g=0;g<s.parts.length;g++){var T=s.parts[g];T.angle+=p,x.rotate(T.vertices,p,s.position),l.rotate(T.axes,p),n.update(T.bounds,T.vertices,s.velocity),g>0&&u.rotateAbout(T.position,p,s.position,T.position)}},a.setVelocity=function(s,d){var m=s.deltaTime/a._baseDelta;s.positionPrev.x=s.position.x-d.x*m,s.positionPrev.y=s.position.y-d.y*m,s.velocity.x=(s.position.x-s.positionPrev.x)/m,s.velocity.y=(s.position.y-s.positionPrev.y)/m,s.speed=u.magnitude(s.velocity)},a.getVelocity=function(s){var d=a._baseDelta/s.deltaTime;return{x:(s.position.x-s.positionPrev.x)*d,y:(s.position.y-s.positionPrev.y)*d}},a.getSpeed=function(s){return u.magnitude(a.getVelocity(s))},a.setSpeed=function(s,d){a.setVelocity(s,u.mult(u.normalise(a.getVelocity(s)),d))},a.setAngularVelocity=function(s,d){var m=s.deltaTime/a._baseDelta;s.anglePrev=s.angle-d*m,s.angularVelocity=(s.angle-s.anglePrev)/m,s.angularSpeed=Math.abs(s.angularVelocity)},a.getAngularVelocity=function(s){return(s.angle-s.anglePrev)*a._baseDelta/s.deltaTime},a.getAngularSpeed=function(s){return Math.abs(a.getAngularVelocity(s))},a.setAngularSpeed=function(s,d){a.setAngularVelocity(s,h.sign(a.getAngularVelocity(s))*d)},a.translate=function(s,d,m){a.setPosition(s,u.add(s.position,d),m)},a.rotate=function(s,d,m,p){if(!m)a.setAngle(s,s.angle+d,p);else{var g=Math.cos(d),T=Math.sin(d),S=s.position.x-m.x,w=s.position.y-m.y;a.setPosition(s,{x:m.x+(S*g-w*T),y:m.y+(S*T+w*g)},p),a.setAngle(s,s.angle+d,p)}},a.scale=function(s,d,m,p){var g=0,T=0;p=p||s.position;for(var S=s.inertia===1/0,w=0;w<s.parts.length;w++){var A=s.parts[w];A.scale.x=d,A.scale.y=m,x.scale(A.vertices,d,m,p),A.axes=l.fromVertices(A.vertices),A.area=x.area(A.vertices),a.setMass(A,s.density*A.area),x.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),a.setInertia(A,a._inertiaScale*x.inertia(A.vertices,A.mass)),x.translate(A.vertices,{x:A.position.x,y:A.position.y}),w>0&&(g+=A.area,T+=A.inertia),A.position.x=p.x+(A.position.x-p.x)*d,A.position.y=p.y+(A.position.y-p.y)*m,n.update(A.bounds,A.vertices,s.velocity)}s.parts.length>1&&(s.area=g,s.isStatic||(a.setMass(s,s.density*g),a.setInertia(s,T))),s.circleRadius&&(d===m?s.circleRadius*=d:s.circleRadius=null),S&&a.setInertia(s,1/0)},a.update=function(s,d){d=(typeof d<"u"?d:16.666666666666668)*s.timeScale;var m=d*d,p=a._timeCorrection?d/(s.deltaTime||d):1,g=1-s.frictionAir*(d/h._baseDelta),T=(s.position.x-s.positionPrev.x)*p,S=(s.position.y-s.positionPrev.y)*p;s.velocity.x=T*g+s.force.x/s.mass*m,s.velocity.y=S*g+s.force.y/s.mass*m,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.position.x+=s.velocity.x,s.position.y+=s.velocity.y,s.deltaTime=d,s.angularVelocity=(s.angle-s.anglePrev)*g*p+s.torque/s.inertia*m,s.anglePrev=s.angle,s.angle+=s.angularVelocity,s.speed=u.magnitude(s.velocity),s.angularSpeed=Math.abs(s.angularVelocity);for(var w=0;w<s.parts.length;w++){var A=s.parts[w];x.translate(A.vertices,s.velocity),w>0&&(A.position.x+=s.velocity.x,A.position.y+=s.velocity.y),s.angularVelocity!==0&&(x.rotate(A.vertices,s.angularVelocity,s.position),l.rotate(A.axes,s.angularVelocity),w>0&&u.rotateAbout(A.position,s.angularVelocity,s.position,A.position)),n.update(A.bounds,A.vertices,s.velocity)}},a.updateVelocities=function(s){var d=a._baseDelta/s.deltaTime,m=s.velocity;m.x=(s.position.x-s.positionPrev.x)*d,m.y=(s.position.y-s.positionPrev.y)*d,s.speed=Math.sqrt(m.x*m.x+m.y*m.y),s.angularVelocity=(s.angle-s.anglePrev)*d,s.angularSpeed=Math.abs(s.angularVelocity)},a.applyForce=function(s,d,m){var p={x:d.x-s.position.x,y:d.y-s.position.y};s.force.x+=m.x,s.force.y+=m.y,s.torque+=p.x*m.y-p.y*m.x},a._totalProperties=function(s){for(var d={mass:0,area:0,inertia:0,centre:{x:0,y:0}},m=s.parts.length===1?0:1;m<s.parts.length;m++){var p=s.parts[m],g=p.mass!==1/0?p.mass:1;d.mass+=g,d.area+=p.area,d.inertia+=p.inertia,d.centre=u.add(d.centre,u.mult(p.position,g))}return d.centre=u.div(d.centre,d.mass),d},a.wrap=function(s,d){var m=n.wrap(s.bounds,d);return m&&a.translate(s,m),m}})()}),69351:((o,E,e)=>{var a={};o.exports=a;var x=e(35810),u=e(53402),r=e(15647),h=e(22562);(function(){a.create=function(n){return u.extend({id:u.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},a.setModified=function(n,l,c,s){if(x.trigger(n,"compositeModified",n),n.isModified=l,l&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),c&&n.parent&&a.setModified(n.parent,l,c,s),s)for(var d=0;d<n.composites.length;d++){var m=n.composites[d];a.setModified(m,l,c,s)}},a.add=function(n,l){var c=[].concat(l);x.trigger(n,"beforeAdd",{object:l});for(var s=0;s<c.length;s++){var d=c[s];switch(d.type){case"body":if(d.parent!==d){u.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(n,d);break;case"constraint":a.addConstraint(n,d);break;case"composite":a.addComposite(n,d);break;case"mouseConstraint":a.addConstraint(n,d.constraint);break}}return x.trigger(n,"afterAdd",{object:l}),n},a.remove=function(n,l,c){var s=[].concat(l);x.trigger(n,"beforeRemove",{object:l});for(var d=0;d<s.length;d++){var m=s[d];switch(m.type){case"body":a.removeBody(n,m,c);break;case"constraint":a.removeConstraint(n,m,c);break;case"composite":a.removeComposite(n,m,c);break;case"mouseConstraint":a.removeConstraint(n,m.constraint);break}}return x.trigger(n,"afterRemove",{object:l}),n},a.addComposite=function(n,l){return n.composites.push(l),l.parent=n,a.setModified(n,!0,!0,!1),n},a.removeComposite=function(n,l,c){var s=u.indexOf(n.composites,l);if(s!==-1){var d=a.allBodies(l);a.removeCompositeAt(n,s);for(var m=0;m<d.length;m++)d[m].sleepCounter=0}if(c)for(var m=0;m<n.composites.length;m++)a.removeComposite(n.composites[m],l,!0);return n},a.removeCompositeAt=function(n,l){return n.composites.splice(l,1),a.setModified(n,!0,!0,!1),n},a.addBody=function(n,l){return n.bodies.push(l),a.setModified(n,!0,!0,!1),n},a.removeBody=function(n,l,c){var s=u.indexOf(n.bodies,l);if(s!==-1&&(a.removeBodyAt(n,s),l.sleepCounter=0),c)for(var d=0;d<n.composites.length;d++)a.removeBody(n.composites[d],l,!0);return n},a.removeBodyAt=function(n,l){return n.bodies.splice(l,1),a.setModified(n,!0,!0,!1),n},a.addConstraint=function(n,l){return n.constraints.push(l),a.setModified(n,!0,!0,!1),n},a.removeConstraint=function(n,l,c){var s=u.indexOf(n.constraints,l);if(s!==-1&&a.removeConstraintAt(n,s),c)for(var d=0;d<n.composites.length;d++)a.removeConstraint(n.composites[d],l,!0);return n},a.removeConstraintAt=function(n,l){return n.constraints.splice(l,1),a.setModified(n,!0,!0,!1),n},a.clear=function(n,l,c){if(c)for(var s=0;s<n.composites.length;s++)a.clear(n.composites[s],l,!0);return l?n.bodies=n.bodies.filter(function(d){return d.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,a.setModified(n,!0,!0,!1),n},a.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var l=[].concat(n.bodies),c=0;c<n.composites.length;c++)l=l.concat(a.allBodies(n.composites[c]));return n.cache&&(n.cache.allBodies=l),l},a.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var l=[].concat(n.constraints),c=0;c<n.composites.length;c++)l=l.concat(a.allConstraints(n.composites[c]));return n.cache&&(n.cache.allConstraints=l),l},a.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var l=[].concat(n.composites),c=0;c<n.composites.length;c++)l=l.concat(a.allComposites(n.composites[c]));return n.cache&&(n.cache.allComposites=l),l},a.get=function(n,l,c){var s,d;switch(c){case"body":s=a.allBodies(n);break;case"constraint":s=a.allConstraints(n);break;case"composite":s=a.allComposites(n).concat(n);break}return s?(d=s.filter(function(m){return m.id.toString()===l.toString()}),d.length===0?null:d[0]):null},a.move=function(n,l,c){return a.remove(n,l),a.add(c,l),n},a.rebase=function(n){for(var l=a.allBodies(n).concat(a.allConstraints(n)).concat(a.allComposites(n)),c=0;c<l.length;c++)l[c].id=u.nextId();return n},a.translate=function(n,l,c){for(var s=c?a.allBodies(n):n.bodies,d=0;d<s.length;d++)h.translate(s[d],l);return n},a.rotate=function(n,l,c,s){for(var d=Math.cos(l),m=Math.sin(l),p=s?a.allBodies(n):n.bodies,g=0;g<p.length;g++){var T=p[g],S=T.position.x-c.x,w=T.position.y-c.y;h.setPosition(T,{x:c.x+(S*d-w*m),y:c.y+(S*m+w*d)}),h.rotate(T,l)}return n},a.scale=function(n,l,c,s,d){for(var m=d?a.allBodies(n):n.bodies,p=0;p<m.length;p++){var g=m[p],T=g.position.x-s.x,S=g.position.y-s.y;h.setPosition(g,{x:s.x+T*l,y:s.y+S*c}),h.scale(g,l,c)}return n},a.bounds=function(n){for(var l=a.allBodies(n),c=[],s=0;s<l.length;s+=1){var d=l[s];c.push(d.bounds.min,d.bounds.max)}return r.create(c)},a.wrap=function(n,l){var c=r.wrap(a.bounds(n),l);return c&&a.translate(n,c),c}})()}),4372:((o,E,e)=>{var a={};o.exports=a;var x=e(69351);(function(){a.create=x.create,a.add=x.add,a.remove=x.remove,a.clear=x.clear,a.addComposite=x.addComposite,a.addBody=x.addBody,a.addConstraint=x.addConstraint})()}),52284:((o,E,e)=>{var a={};o.exports=a;var x=e(41598),u=e(4506);(function(){var r=[],h={overlap:0,axis:null},n={overlap:0,axis:null};a.create=function(l,c){return{pair:null,collided:!1,bodyA:l,bodyB:c,parentA:l.parent,parentB:c.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},a.collides=function(l,c,s){if(a._overlapAxes(h,l.vertices,c.vertices,l.axes),h.overlap<=0||(a._overlapAxes(n,c.vertices,l.vertices,c.axes),n.overlap<=0))return null;var d=s&&s.table[u.id(l,c)],m;d?m=d.collision:(m=a.create(l,c),m.collided=!0,m.bodyA=l.id<c.id?l:c,m.bodyB=l.id<c.id?c:l,m.parentA=m.bodyA.parent,m.parentB=m.bodyB.parent),l=m.bodyA,c=m.bodyB;var p;h.overlap<n.overlap?p=h:p=n;var g=m.normal,T=m.tangent,S=m.penetration,w=m.supports,A=p.overlap,M=p.axis,R=M.x,P=M.y,b=c.position.x-l.position.x,F=c.position.y-l.position.y;R*b+P*F>=0&&(R=-R,P=-P),g.x=R,g.y=P,T.x=-P,T.y=R,S.x=R*A,S.y=P*A,m.depth=A;var I=a._findSupports(l,c,g,1),L=0;if(x.contains(l.vertices,I[0])&&(w[L++]=I[0]),x.contains(l.vertices,I[1])&&(w[L++]=I[1]),L<2){var D=a._findSupports(c,l,g,-1);x.contains(c.vertices,D[0])&&(w[L++]=D[0]),L<2&&x.contains(c.vertices,D[1])&&(w[L++]=D[1])}return L===0&&(w[L++]=I[0]),m.supportCount=L,m},a._overlapAxes=function(l,c,s,d){var m=c.length,p=s.length,g=c[0].x,T=c[0].y,S=s[0].x,w=s[0].y,A=d.length,M=Number.MAX_VALUE,R=0,P,b,F,I,L,D;for(L=0;L<A;L++){var O=d[L],z=O.x,W=O.y,X=g*z+T*W,_=S*z+w*W,U=X,G=_;for(D=1;D<m;D+=1)I=c[D].x*z+c[D].y*W,I>U?U=I:I<X&&(X=I);for(D=1;D<p;D+=1)I=s[D].x*z+s[D].y*W,I>G?G=I:I<_&&(_=I);if(b=U-_,F=G-X,P=b<F?b:F,P<M&&(M=P,R=L,P<=0))break}l.axis=d[R],l.overlap=M},a._findSupports=function(l,c,s,d){var m=c.vertices,p=m.length,g=l.position.x,T=l.position.y,S=s.x*d,w=s.y*d,A=m[0],M=A,R=S*(g-M.x)+w*(T-M.y),P,b,F;for(F=1;F<p;F+=1)M=m[F],b=S*(g-M.x)+w*(T-M.y),b<R&&(R=b,A=M);return P=m[(p+A.index-1)%p],R=S*(g-P.x)+w*(T-P.y),M=m[(A.index+1)%p],S*(g-M.x)+w*(T-M.y)<R?(r[0]=A,r[1]=M,r):(r[0]=A,r[1]=P,r)}})()}),43424:(o=>{var E={};o.exports=E,(function(){E.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}})()}),81388:((o,E,e)=>{var a={};o.exports=a;var x=e(53402),u=e(52284);(function(){a.create=function(r){var h={bodies:[],collisions:[],pairs:null};return x.extend(h,r)},a.setBodies=function(r,h){r.bodies=h.slice(0)},a.clear=function(r){r.bodies=[],r.collisions=[]},a.collisions=function(r){var h=r.pairs,n=r.bodies,l=n.length,c=a.canCollide,s=u.collides,d=r.collisions,m=0,p,g;for(n.sort(a._compareBoundsX),p=0;p<l;p++){var T=n[p],S=T.bounds,w=T.bounds.max.x,A=T.bounds.max.y,M=T.bounds.min.y,R=T.isStatic||T.isSleeping,P=T.parts.length,b=P===1;for(g=p+1;g<l;g++){var F=n[g],I=F.bounds;if(I.min.x>w)break;if(!(A<I.min.y||M>I.max.y)&&!(R&&(F.isStatic||F.isSleeping))&&c(T.collisionFilter,F.collisionFilter)){var L=F.parts.length;if(b&&L===1){var D=s(T,F,h);D&&(d[m++]=D)}else for(var O=P>1?1:0,z=L>1?1:0,W=O;W<P;W++)for(var X=T.parts[W],S=X.bounds,_=z;_<L;_++){var U=F.parts[_],I=U.bounds;if(!(S.min.x>I.max.x||S.max.x<I.min.x||S.max.y<I.min.y||S.min.y>I.max.y)){var D=s(X,U,h);D&&(d[m++]=D)}}}}}return d.length!==m&&(d.length=m),d},a.canCollide=function(r,h){return r.group===h.group&&r.group!==0?r.group>0:(r.mask&h.category)!==0&&(h.mask&r.category)!==0},a._compareBoundsX=function(r,h){return r.bounds.min.x-h.bounds.min.x}})()}),4506:((o,E,e)=>{var a={};o.exports=a;var x=e(43424);(function(){a.create=function(u,r){var h=u.bodyA,n=u.bodyB,l={id:a.id(h,n),bodyA:h,bodyB:n,collision:u,contacts:[x.create(),x.create()],contactCount:0,separation:0,isActive:!0,isSensor:h.isSensor||n.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(l,u,r),l},a.update=function(u,r,h){var n=r.supports,l=r.supportCount,c=u.contacts,s=r.parentA,d=r.parentB;u.isActive=!0,u.timeUpdated=h,u.collision=r,u.separation=r.depth,u.inverseMass=s.inverseMass+d.inverseMass,u.friction=s.friction<d.friction?s.friction:d.friction,u.frictionStatic=s.frictionStatic>d.frictionStatic?s.frictionStatic:d.frictionStatic,u.restitution=s.restitution>d.restitution?s.restitution:d.restitution,u.slop=s.slop>d.slop?s.slop:d.slop,u.contactCount=l,r.pair=u;var m=n[0],p=c[0],g=n[1],T=c[1];(T.vertex===m||p.vertex===g)&&(c[1]=p,c[0]=p=T,T=c[1]),p.vertex=m,T.vertex=g},a.setActive=function(u,r,h){r?(u.isActive=!0,u.timeUpdated=h):(u.isActive=!1,u.contactCount=0)},a.id=function(u,r){return u.id<r.id?u.id.toString(36)+":"+r.id.toString(36):r.id.toString(36)+":"+u.id.toString(36)}})()}),99561:((o,E,e)=>{var a={};o.exports=a;var x=e(4506),u=e(53402);(function(){a.create=function(r){return u.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},a.update=function(r,h,n){var l=x.update,c=x.create,s=x.setActive,d=r.table,m=r.list,p=m.length,g=p,T=r.collisionStart,S=r.collisionEnd,w=r.collisionActive,A=h.length,M=0,R=0,P=0,b,F,I;for(I=0;I<A;I++)b=h[I],F=b.pair,F?(F.isActive&&(w[P++]=F),l(F,b,n)):(F=c(b,n),d[F.id]=F,T[M++]=F,m[g++]=F);for(g=0,p=m.length,I=0;I<p;I++)F=m[I],F.timeUpdated>=n?m[g++]=F:(s(F,!1,n),F.collision.bodyA.sleepCounter>0&&F.collision.bodyB.sleepCounter>0?m[g++]=F:(S[R++]=F,delete d[F.id]));m.length!==g&&(m.length=g),T.length!==M&&(T.length=M),S.length!==R&&(S.length=R),w.length!==P&&(w.length=P)},a.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()}),73296:((o,E,e)=>{var a={};o.exports=a;var x=e(31725),u=e(52284),r=e(15647),h=e(66280),n=e(41598);(function(){a.collides=function(l,c){for(var s=[],d=c.length,m=l.bounds,p=u.collides,g=r.overlaps,T=0;T<d;T++){var S=c[T],w=S.parts.length,A=w===1?0:1;if(l!==S&&g(S.bounds,m))for(var M=A;M<w;M++){var R=S.parts[M];if(g(R.bounds,m)){var P=p(R,l);if(P){s.push(P);break}}}}return s},a.ray=function(l,c,s,d){d=d||1e-100;for(var m=x.angle(c,s),p=x.magnitude(x.sub(c,s)),g=(s.x+c.x)*.5,T=(s.y+c.y)*.5,S=h.rectangle(g,T,p,d,{angle:m}),w=a.collides(S,l),A=0;A<w.length;A+=1){var M=w[A];M.body=M.bodyB=M.bodyA}return w},a.region=function(l,c,s){for(var d=[],m=0;m<l.length;m++){var p=l[m],g=r.overlaps(p.bounds,c);(g&&!s||!g&&s)&&d.push(p)}return d},a.point=function(l,c){for(var s=[],d=0;d<l.length;d++){var m=l[d];if(r.contains(m.bounds,c))for(var p=m.parts.length===1?0:1;p<m.parts.length;p++){var g=m.parts[p];if(r.contains(g.bounds,c)&&n.contains(g.vertices,c)){s.push(m);break}}}return s}})()}),66272:((o,E,e)=>{var a={};o.exports=a;var x=e(41598),u=e(53402),r=e(15647);(function(){a._restingThresh=2,a._restingThreshTangent=Math.sqrt(6),a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a._frictionMaxStatic=Number.MAX_VALUE,a.preSolvePosition=function(h){var n,l,c,s=h.length;for(n=0;n<s;n++)l=h[n],l.isActive&&(c=l.contactCount,l.collision.parentA.totalContacts+=c,l.collision.parentB.totalContacts+=c)},a.solvePosition=function(h,n,l){var c,s,d,m,p,g,T,S,w=a._positionDampen*(l||1),A=u.clamp(n/u._baseDelta,0,1),M=h.length;for(c=0;c<M;c++)s=h[c],!(!s.isActive||s.isSensor)&&(d=s.collision,m=d.parentA,p=d.parentB,g=d.normal,s.separation=d.depth+g.x*(p.positionImpulse.x-m.positionImpulse.x)+g.y*(p.positionImpulse.y-m.positionImpulse.y));for(c=0;c<M;c++)s=h[c],!(!s.isActive||s.isSensor)&&(d=s.collision,m=d.parentA,p=d.parentB,g=d.normal,S=s.separation-s.slop*A,(m.isStatic||p.isStatic)&&(S*=2),m.isStatic||m.isSleeping||(T=w/m.totalContacts,m.positionImpulse.x+=g.x*S*T,m.positionImpulse.y+=g.y*S*T),p.isStatic||p.isSleeping||(T=w/p.totalContacts,p.positionImpulse.x-=g.x*S*T,p.positionImpulse.y-=g.y*S*T))},a.postSolvePosition=function(h){for(var n=a._positionWarming,l=h.length,c=x.translate,s=r.update,d=0;d<l;d++){var m=h[d],p=m.positionImpulse,g=p.x,T=p.y,S=m.velocity;if(m.totalContacts=0,g!==0||T!==0){for(var w=0;w<m.parts.length;w++){var A=m.parts[w];c(A.vertices,p),s(A.bounds,A.vertices,S),A.position.x+=g,A.position.y+=T}m.positionPrev.x+=g,m.positionPrev.y+=T,g*S.x+T*S.y<0?(p.x=0,p.y=0):(p.x*=n,p.y*=n)}}},a.preSolveVelocity=function(h){var n=h.length,l,c;for(l=0;l<n;l++){var s=h[l];if(!(!s.isActive||s.isSensor)){var d=s.contacts,m=s.contactCount,p=s.collision,g=p.parentA,T=p.parentB,S=p.normal,w=p.tangent;for(c=0;c<m;c++){var A=d[c],M=A.vertex,R=A.normalImpulse,P=A.tangentImpulse;if(R!==0||P!==0){var b=S.x*R+w.x*P,F=S.y*R+w.y*P;g.isStatic||g.isSleeping||(g.positionPrev.x+=b*g.inverseMass,g.positionPrev.y+=F*g.inverseMass,g.anglePrev+=g.inverseInertia*((M.x-g.position.x)*F-(M.y-g.position.y)*b)),T.isStatic||T.isSleeping||(T.positionPrev.x-=b*T.inverseMass,T.positionPrev.y-=F*T.inverseMass,T.anglePrev-=T.inverseInertia*((M.x-T.position.x)*F-(M.y-T.position.y)*b))}}}}},a.solveVelocity=function(h,n){var l=n/u._baseDelta,c=l*l,s=c*l,d=-a._restingThresh*l,m=a._restingThreshTangent,p=a._frictionNormalMultiplier*l,g=a._frictionMaxStatic,T=h.length,S,w,A,M;for(A=0;A<T;A++){var R=h[A];if(!(!R.isActive||R.isSensor)){var P=R.collision,b=P.parentA,F=P.parentB,I=P.normal.x,L=P.normal.y,D=P.tangent.x,O=P.tangent.y,z=R.inverseMass,W=R.friction*R.frictionStatic*p,X=R.contacts,_=R.contactCount,U=1/_,G=b.position.x-b.positionPrev.x,N=b.position.y-b.positionPrev.y,H=b.angle-b.anglePrev,V=F.position.x-F.positionPrev.x,$=F.position.y-F.positionPrev.y,j=F.angle-F.anglePrev;for(M=0;M<_;M++){var k=X[M],Q=k.vertex,et=Q.x-b.position.x,at=Q.y-b.position.y,q=Q.x-F.position.x,ft=Q.y-F.position.y,vt=G-at*H,Tt=N+et*H,ct=V-ft*j,Nt=$+q*j,yt=vt-ct,it=Tt-Nt,Z=I*yt+L*it,lt=D*yt+O*it,pt=R.separation+Z,Rt=Math.min(pt,1);Rt=pt<0?0:Rt;var At=Rt*W;lt<-At||lt>At?(w=lt>0?lt:-lt,S=R.friction*(lt>0?1:-1)*s,S<-w?S=-w:S>w&&(S=w)):(S=lt,w=g);var Kt=et*L-at*I,Bt=q*L-ft*I,Wt=U/(z+b.inverseInertia*Kt*Kt+F.inverseInertia*Bt*Bt),he=(1+R.restitution)*Z*Wt;if(S*=Wt,Z<d)k.normalImpulse=0;else{var zt=k.normalImpulse;k.normalImpulse+=he,k.normalImpulse>0&&(k.normalImpulse=0),he=k.normalImpulse-zt}if(lt<-m||lt>m)k.tangentImpulse=0;else{var Ut=k.tangentImpulse;k.tangentImpulse+=S,k.tangentImpulse<-w&&(k.tangentImpulse=-w),k.tangentImpulse>w&&(k.tangentImpulse=w),S=k.tangentImpulse-Ut}var Xt=I*he+D*S,Pt=L*he+O*S;b.isStatic||b.isSleeping||(b.positionPrev.x+=Xt*b.inverseMass,b.positionPrev.y+=Pt*b.inverseMass,b.anglePrev+=(et*Pt-at*Xt)*b.inverseInertia),F.isStatic||F.isSleeping||(F.positionPrev.x-=Xt*F.inverseMass,F.positionPrev.y-=Pt*F.inverseMass,F.anglePrev-=(q*Pt-ft*Xt)*F.inverseInertia)}}}}})()}),48140:((o,E,e)=>{var a={};o.exports=a;var x=e(41598),u=e(31725),r=e(53614),h=e(15647),n=e(66615),l=e(53402);(function(){a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(c){var s=c;s.bodyA&&!s.pointA&&(s.pointA={x:0,y:0}),s.bodyB&&!s.pointB&&(s.pointB={x:0,y:0});var d=s.bodyA?u.add(s.bodyA.position,s.pointA):s.pointA,m=s.bodyB?u.add(s.bodyB.position,s.pointB):s.pointB,p=u.magnitude(u.sub(d,m));s.length=typeof s.length<"u"?s.length:p,s.id=s.id||l.nextId(),s.label=s.label||"Constraint",s.type="constraint",s.stiffness=s.stiffness||(s.length>0?1:.7),s.damping=s.damping||0,s.angularStiffness=s.angularStiffness||0,s.angleA=s.bodyA?s.bodyA.angle:s.angleA,s.angleB=s.bodyB?s.bodyB.angle:s.angleB,s.plugin={};var g={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return s.length===0&&s.stiffness>.1?(g.type="pin",g.anchors=!1):s.stiffness<.9&&(g.type="spring"),s.render=l.extend(g,s.render),s},a.preSolveAll=function(c){for(var s=0;s<c.length;s+=1){var d=c[s],m=d.constraintImpulse;d.isStatic||m.x===0&&m.y===0&&m.angle===0||(d.position.x+=m.x,d.position.y+=m.y,d.angle+=m.angle)}},a.solveAll=function(c,s){for(var d=l.clamp(s/l._baseDelta,0,1),m=0;m<c.length;m+=1){var p=c[m],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,T=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||T)&&a.solve(c[m],d)}for(m=0;m<c.length;m+=1)p=c[m],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,T=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!T&&a.solve(c[m],d)},a.solve=function(c,s){var d=c.bodyA,m=c.bodyB,p=c.pointA,g=c.pointB;if(!(!d&&!m)){d&&!d.isStatic&&(u.rotate(p,d.angle-c.angleA,p),c.angleA=d.angle),m&&!m.isStatic&&(u.rotate(g,m.angle-c.angleB,g),c.angleB=m.angle);var T=p,S=g;if(d&&(T=u.add(d.position,p)),m&&(S=u.add(m.position,g)),!(!T||!S)){var w=u.sub(T,S),A=u.magnitude(w);A<a._minLength&&(A=a._minLength);var M=(A-c.length)/A,R=c.stiffness>=1||c.length===0,P=R?c.stiffness*s:c.stiffness*s*s,b=c.damping*s,F=u.mult(w,M*P),I=(d?d.inverseMass:0)+(m?m.inverseMass:0),L=(d?d.inverseInertia:0)+(m?m.inverseInertia:0),D=I+L,O,z,W,X,_;if(b>0){var U=u.create();W=u.div(w,A),_=u.sub(m&&u.sub(m.position,m.positionPrev)||U,d&&u.sub(d.position,d.positionPrev)||U),X=u.dot(W,_)}d&&!d.isStatic&&(z=d.inverseMass/I,d.constraintImpulse.x-=F.x*z,d.constraintImpulse.y-=F.y*z,d.position.x-=F.x*z,d.position.y-=F.y*z,b>0&&(d.positionPrev.x-=b*W.x*X*z,d.positionPrev.y-=b*W.y*X*z),O=u.cross(p,F)/D*a._torqueDampen*d.inverseInertia*(1-c.angularStiffness),d.constraintImpulse.angle-=O,d.angle-=O),m&&!m.isStatic&&(z=m.inverseMass/I,m.constraintImpulse.x+=F.x*z,m.constraintImpulse.y+=F.y*z,m.position.x+=F.x*z,m.position.y+=F.y*z,b>0&&(m.positionPrev.x+=b*W.x*X*z,m.positionPrev.y+=b*W.y*X*z),O=u.cross(g,F)/D*a._torqueDampen*m.inverseInertia*(1-c.angularStiffness),m.constraintImpulse.angle+=O,m.angle+=O)}}},a.postSolveAll=function(c){for(var s=0;s<c.length;s++){var d=c[s],m=d.constraintImpulse;if(!(d.isStatic||m.x===0&&m.y===0&&m.angle===0)){r.set(d,!1);for(var p=0;p<d.parts.length;p++){var g=d.parts[p];x.translate(g.vertices,m),p>0&&(g.position.x+=m.x,g.position.y+=m.y),m.angle!==0&&(x.rotate(g.vertices,m.angle,d.position),n.rotate(g.axes,m.angle),p>0&&u.rotateAbout(g.position,m.angle,d.position,g.position)),h.update(g.bounds,g.vertices,d.velocity)}m.angle*=a._warming,m.x*=a._warming,m.y*=a._warming}}},a.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),y:(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0)}},a.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),y:(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0)}},a.currentLength=function(c){var s=(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),d=(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0),m=(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),p=(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0),g=s-m,T=d-p;return Math.sqrt(g*g+T*T)}})()}),53402:((o,E,e)=>{var a={};o.exports=a,(function(){a._baseDelta=16.666666666666668,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(u,r){var h,n;typeof r=="boolean"?(h=2,n=r):(h=1,n=!0);for(var l=h;l<arguments.length;l++){var c=arguments[l];if(c)for(var s in c)n&&c[s]&&c[s].constructor===Object&&(!u[s]||u[s].constructor===Object)?(u[s]=u[s]||{},a.extend(u[s],n,c[s])):u[s]=c[s]}return u},a.clone=function(u,r){return a.extend({},r,u)},a.keys=function(u){if(Object.keys)return Object.keys(u);var r=[];for(var h in u)r.push(h);return r},a.values=function(u){var r=[];if(Object.keys){for(var h=Object.keys(u),n=0;n<h.length;n++)r.push(u[h[n]]);return r}for(var l in u)r.push(u[l]);return r},a.get=function(u,r,h,n){r=r.split(".").slice(h,n);for(var l=0;l<r.length;l+=1)u=u[r[l]];return u},a.set=function(u,r,h,n,l){var c=r.split(".").slice(n,l);return a.get(u,r,0,-1)[c[c.length-1]]=h,h},a.shuffle=function(u){for(var r=u.length-1;r>0;r--){var h=Math.floor(a.random()*(r+1)),n=u[r];u[r]=u[h],u[h]=n}return u},a.choose=function(u){return u[Math.floor(a.random()*u.length)]},a.isElement=function(u){return typeof HTMLElement<"u"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},a.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},a.isFunction=function(u){return typeof u=="function"},a.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},a.isString=function(u){return toString.call(u)==="[object String]"},a.clamp=function(u,r,h){return u<r?r:u>h?h:u},a.sign=function(u){return u<0?-1:1},a.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(u,r){return u=typeof u<"u"?u:0,r=typeof r<"u"?r:1,u+x()*(r-u)};var x=function(){return a._seed=(a._seed*9301+49297)%233280,a._seed/233280};a.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var u=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[u]||(a.warn(u),a._warnedOnce[u]=!0)},a.deprecated=function(u,r,h){u[r]=a.chain(function(){a.warnOnce("ð deprecated ð",h)},u[r])},a.nextId=function(){return a._nextId++},a.indexOf=function(u,r){if(u.indexOf)return u.indexOf(r);for(var h=0;h<u.length;h++)if(u[h]===r)return h;return-1},a.map=function(u,r){if(u.map)return u.map(r);for(var h=[],n=0;n<u.length;n+=1)h.push(r(u[n]));return h},a.topologicalSort=function(u){var r=[],h=[],n=[];for(var l in u)!h[l]&&!n[l]&&a._topologicalSort(l,h,n,u,r);return r},a._topologicalSort=function(u,r,h,n,l){var c=n[u]||[];h[u]=!0;for(var s=0;s<c.length;s+=1){var d=c[s];h[d]||r[d]||a._topologicalSort(d,r,h,n,l)}h[u]=!1,r[u]=!0,l.push(u)},a.chain=function(){for(var u=[],r=0;r<arguments.length;r+=1){var h=arguments[r];h._chained?u.push.apply(u,h._chained):u.push(h)}var n=function(){for(var l,c=new Array(arguments.length),s=0,d=arguments.length;s<d;s++)c[s]=arguments[s];for(s=0;s<u.length;s+=1){var m=u[s].apply(l,c);typeof m<"u"&&(l=m)}return l};return n._chained=u,n},a.chainPathBefore=function(u,r,h){return a.set(u,r,a.chain(h,a.get(u,r)))},a.chainPathAfter=function(u,r,h){return a.set(u,r,a.chain(a.get(u,r),h))},a.setDecomp=function(u){a._decomp=u},a.getDecomp=function(){var u=a._decomp;try{!u&&typeof window<"u"&&(u=window.decomp),!u&&typeof e.g<"u"&&(u=e.g.decomp)}catch{u=null}return u}})()}),48413:((o,E,e)=>{var a={};o.exports=a;var x=e(53614),u=e(66272),r=e(81388),h=e(99561),n=e(35810),l=e(69351),c=e(48140),s=e(53402),d=e(22562);(function(){a._deltaMax=16.666666666666668,a.create=function(m){m=m||{};var p={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},g=s.extend(p,m);return g.world=m.world||l.create({label:"World"}),g.pairs=m.pairs||h.create(),g.detector=m.detector||r.create(),g.detector.pairs=g.pairs,g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},a.update=function(m,p){var g=s.now(),T=m.world,S=m.detector,w=m.pairs,A=m.timing,M=A.timestamp,R;p>a._deltaMax&&s.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",a._deltaMax.toFixed(3),"ms."),p=typeof p<"u"?p:s._baseDelta,p*=A.timeScale,A.timestamp+=p,A.lastDelta=p;var P={timestamp:A.timestamp,delta:p};n.trigger(m,"beforeUpdate",P);var b=l.allBodies(T),F=l.allConstraints(T),I=l.allComposites(T);for(T.isModified&&(r.setBodies(S,b),l.setModified(T,!1,!1,!0)),m.enableSleeping&&x.update(b,p),a._bodiesApplyGravity(b,m.gravity),a.wrap(b,I),a.attractors(b),p>0&&a._bodiesUpdate(b,p),n.trigger(m,"beforeSolve",P),c.preSolveAll(b),R=0;R<m.constraintIterations;R++)c.solveAll(F,p);c.postSolveAll(b);var L=r.collisions(S);h.update(w,L,M),m.enableSleeping&&x.afterCollisions(w.list),w.collisionStart.length>0&&n.trigger(m,"collisionStart",{pairs:w.collisionStart,timestamp:A.timestamp,delta:p});var D=s.clamp(20/m.positionIterations,0,1);for(u.preSolvePosition(w.list),R=0;R<m.positionIterations;R++)u.solvePosition(w.list,p,D);for(u.postSolvePosition(b),c.preSolveAll(b),R=0;R<m.constraintIterations;R++)c.solveAll(F,p);for(c.postSolveAll(b),u.preSolveVelocity(w.list),R=0;R<m.velocityIterations;R++)u.solveVelocity(w.list,p);return a._bodiesUpdateVelocities(b),w.collisionActive.length>0&&n.trigger(m,"collisionActive",{pairs:w.collisionActive,timestamp:A.timestamp,delta:p}),w.collisionEnd.length>0&&n.trigger(m,"collisionEnd",{pairs:w.collisionEnd,timestamp:A.timestamp,delta:p}),a._bodiesClearForces(b),n.trigger(m,"afterUpdate",P),m.timing.lastElapsed=s.now()-g,m},a.merge=function(m,p){if(s.extend(m,p),p.world){m.world=p.world,a.clear(m);for(var g=l.allBodies(m.world),T=0;T<g.length;T++){var S=g[T];x.set(S,!1),S.id=s.nextId()}}},a.clear=function(m){h.clear(m.pairs),r.clear(m.detector)},a._bodiesClearForces=function(m){for(var p=m.length,g=0;g<p;g++){var T=m[g];T.force.x=0,T.force.y=0,T.torque=0}},a._bodiesApplyGravity=function(m,p){var g=typeof p.scale<"u"?p.scale:.001,T=m.length;if(!(p.x===0&&p.y===0||g===0))for(var S=0;S<T;S++){var w=m[S];w.ignoreGravity||w.isStatic||w.isSleeping||(w.force.y+=w.mass*p.y*g,w.force.x+=w.mass*p.x*g)}},a._bodiesUpdate=function(m,p){for(var g=m.length,T=0;T<g;T++){var S=m[T];S.isStatic||S.isSleeping||d.update(S,p)}},a._bodiesUpdateVelocities=function(m){for(var p=m.length,g=0;g<p;g++)d.updateVelocities(m[g])},a.wrap=function(m,p){for(var g=0;g<m.length;g+=1){var T=m[g];T.wrapBounds!==null&&d.wrap(T,T.wrapBounds)}for(g=0;g<p.length;g+=1){var S=p[g];S.wrapBounds!==null&&l.wrap(S,S.wrapBounds)}},a.attractors=function(m){for(var p=0;p<m.length;p++){var g=m[p],T=g.attractors;if(T&&T.length>0)for(var S=0;S<m.length;S++){var w=m[S];if(p!==S)for(var A=0;A<T.length;A++){var M=T[A],R=M;s.isFunction(M)&&(R=M(g,w)),R&&d.applyForce(w,w.position,R)}}}}})()}),35810:((o,E,e)=>{var a={};o.exports=a;var x=e(53402);(function(){a.on=function(u,r,h){for(var n=r.split(" "),l,c=0;c<n.length;c++)l=n[c],u.events=u.events||{},u.events[l]=u.events[l]||[],u.events[l].push(h);return h},a.off=function(u,r,h){if(!r){u.events={};return}typeof r=="function"&&(h=r,r=x.keys(u.events).join(" "));for(var n=r.split(" "),l=0;l<n.length;l++){var c=u.events[n[l]],s=[];if(h&&c)for(var d=0;d<c.length;d++)c[d]!==h&&s.push(c[d]);u.events[n[l]]=s}},a.trigger=function(u,r,h){var n,l,c,s,d=u.events;if(d&&x.keys(d).length>0){h||(h={}),n=r.split(" ");for(var m=0;m<n.length;m++)if(l=n[m],c=d[l],c){s=x.clone(h,!1),s.name=l,s.source=u;for(var p=0;p<c.length;p++)c[p].apply(u,[s])}}}})()}),6790:((o,E,e)=>{var a={};o.exports=a;var x=e(73832),u=e(53402);(function(){a.name="matter-js",a.version="0.20.0",a.uses=[],a.used=[],a.use=function(){x.use(a,Array.prototype.slice.call(arguments))},a.before=function(r,h){return r=r.replace(/^Matter./,""),u.chainPathBefore(a,r,h)},a.after=function(r,h){return r=r.replace(/^Matter./,""),u.chainPathAfter(a,r,h)}})()}),73832:((o,E,e)=>{var a={};o.exports=a;var x=e(53402);(function(){a._registry={},a.register=function(u){if(a.isPlugin(u)||x.warn("Plugin.register:",a.toString(u),"does not implement all required fields."),u.name in a._registry){var r=a._registry[u.name],h=a.versionParse(u.version).number,n=a.versionParse(r.version).number;h>n?(x.warn("Plugin.register:",a.toString(r),"was upgraded to",a.toString(u)),a._registry[u.name]=u):h<n?x.warn("Plugin.register:",a.toString(r),"can not be downgraded to",a.toString(u)):u!==r&&x.warn("Plugin.register:",a.toString(u),"is already registered to different plugin object")}else a._registry[u.name]=u;return u},a.resolve=function(u){return a._registry[a.dependencyParse(u).name]},a.toString=function(u){return typeof u=="string"?u:(u.name||"anonymous")+"@"+(u.version||u.range||"0.0.0")},a.isPlugin=function(u){return u&&u.name&&u.version&&u.install},a.isUsed=function(u,r){return u.used.indexOf(r)>-1},a.isFor=function(u,r){var h=u.for&&a.dependencyParse(u.for);return!u.for||r.name===h.name&&a.versionSatisfies(r.version,h.range)},a.use=function(u,r){if(u.uses=(u.uses||[]).concat(r||[]),u.uses.length===0){x.warn("Plugin.use:",a.toString(u),"does not specify any dependencies to install.");return}for(var h=a.dependencies(u),n=x.topologicalSort(h),l=[],c=0;c<n.length;c+=1)if(n[c]!==u.name){var s=a.resolve(n[c]);if(!s){l.push("â "+n[c]);continue}a.isUsed(u,s.name)||(a.isFor(s,u)||(x.warn("Plugin.use:",a.toString(s),"is for",s.for,"but installed on",a.toString(u)+"."),s._warned=!0),s.install?s.install(u):(x.warn("Plugin.use:",a.toString(s),"does not specify an install function."),s._warned=!0),s._warned?(l.push("ð¶ "+a.toString(s)),delete s._warned):l.push("â "+a.toString(s)),u.used.push(s.name))}l.length>0&&!s.silent&&x.info(l.join("  "))},a.dependencies=function(u,r){var h=a.dependencyParse(u),n=h.name;if(r=r||{},!(n in r)){u=a.resolve(u)||u,r[n]=x.map(u.uses||[],function(c){a.isPlugin(c)&&a.register(c);var s=a.dependencyParse(c),d=a.resolve(c);return d&&!a.versionSatisfies(d.version,s.range)?(x.warn("Plugin.dependencies:",a.toString(d),"does not satisfy",a.toString(s),"used by",a.toString(h)+"."),d._warned=!0,u._warned=!0):d||(x.warn("Plugin.dependencies:",a.toString(c),"used by",a.toString(h),"could not be resolved."),u._warned=!0),s.name});for(var l=0;l<r[n].length;l+=1)a.dependencies(r[n][l],r);return r}},a.dependencyParse=function(u){if(x.isString(u)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(u)||x.warn("Plugin.dependencyParse:",u,"is not a valid dependency string."),{name:u.split("@")[0],range:u.split("@")[1]||"*"}}return{name:u.name,range:u.range||u.version}},a.versionParse=function(u){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(u)||x.warn("Plugin.versionParse:",u,"is not a valid version or range.");var h=r.exec(u),n=Number(h[4]),l=Number(h[5]),c=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:u,operator:h[1]||h[2]||"",major:n,minor:l,patch:c,parts:[n,l,c],prerelease:h[7],number:n*1e8+l*1e4+c}},a.versionSatisfies=function(u,r){r=r||"*";var h=a.versionParse(r),n=a.versionParse(u);if(h.isRange){if(h.operator==="*"||u==="*")return!0;if(h.operator===">")return n.number>h.number;if(h.operator===">=")return n.number>=h.number;if(h.operator==="~")return n.major===h.major&&n.minor===h.minor&&n.patch>=h.patch;if(h.operator==="^")return h.major>0?n.major===h.major&&n.number>=h.number:h.minor>0?n.minor===h.minor&&n.patch>=h.patch:n.patch===h.patch}return u===r||u==="*"}})()}),13037:((o,E,e)=>{var a={};o.exports=a;var x=e(35810),u=e(48413),r=e(53402);(function(){a._maxFrameDelta=66.66666666666667,a._frameDeltaFallback=16.666666666666668,a._timeBufferMargin=1.5,a._elapsedNextEstimate=1,a._smoothingLowerBound=.1,a._smoothingUpperBound=.9,a.create=function(n){var l={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},c=r.extend(l,n);return c.fps=0,c},a.run=function(n,l){return n.timeBuffer=a._frameDeltaFallback,(function c(s){n.frameRequestId=a._onNextFrame(n,c),s&&n.enabled&&a.tick(n,l,s)})(),n},a.tick=function(n,l,c){var s=r.now(),d=n.delta,m=0,p=c-n.timeLastTick;if((!p||!n.timeLastTick||p>Math.max(a._maxFrameDelta,n.maxFrameTime))&&(p=n.frameDelta||a._frameDeltaFallback),n.frameDeltaSmoothing){n.frameDeltaHistory.push(p),n.frameDeltaHistory=n.frameDeltaHistory.slice(-n.frameDeltaHistorySize);var g=n.frameDeltaHistory.slice(0).sort(),T=n.frameDeltaHistory.slice(g.length*a._smoothingLowerBound,g.length*a._smoothingUpperBound),S=h(T);p=S||p}n.frameDeltaSnapping&&(p=1e3/Math.round(1e3/p)),n.frameDelta=p,n.timeLastTick=c,n.timeBuffer+=n.frameDelta,n.timeBuffer=r.clamp(n.timeBuffer,0,n.frameDelta+d*a._timeBufferMargin),n.lastUpdatesDeferred=0;var w=n.maxUpdates||Math.ceil(n.maxFrameTime/d),A={timestamp:l.timing.timestamp};x.trigger(n,"beforeTick",A),x.trigger(n,"tick",A);for(var M=r.now();d>0&&n.timeBuffer>=d*a._timeBufferMargin;){x.trigger(n,"beforeUpdate",A),u.update(l,d),x.trigger(n,"afterUpdate",A),n.timeBuffer-=d,m+=1;var R=r.now()-s,P=r.now()-M,b=R+a._elapsedNextEstimate*P/m;if(m>=w||b>n.maxFrameTime){n.lastUpdatesDeferred=Math.round(Math.max(0,n.timeBuffer/d-a._timeBufferMargin));break}}l.timing.lastUpdatesPerFrame=m,x.trigger(n,"afterTick",A),n.frameDeltaHistory.length>=100&&(n.lastUpdatesDeferred&&Math.round(n.frameDelta/d)>w?r.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):n.lastUpdatesDeferred&&r.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof n.isFixed<"u"&&r.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(n.deltaMin||n.deltaMax)&&r.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),n.fps!==0&&r.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},a.stop=function(n){a._cancelNextFrame(n)},a._onNextFrame=function(n,l){if(typeof window<"u"&&window.requestAnimationFrame)n.frameRequestId=window.requestAnimationFrame(l);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return n.frameRequestId},a._cancelNextFrame=function(n){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(n.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var h=function(n){for(var l=0,c=n.length,s=0;s<c;s+=1)l+=n[s];return l/c||0};a._mean=h})()}),53614:((o,E,e)=>{var a={};o.exports=a;var x=e(22562),u=e(35810),r=e(53402);(function(){a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(h,n){for(var l=n/r._baseDelta,c=a._motionSleepThreshold,s=0;s<h.length;s++){var d=h[s],m=x.getSpeed(d),p=x.getAngularSpeed(d),g=m*m+p*p;if(d.force.x!==0||d.force.y!==0){a.set(d,!1);continue}var T=Math.min(d.motion,g),S=Math.max(d.motion,g);d.motion=a._minBias*T+(1-a._minBias)*S,d.sleepThreshold>0&&d.motion<c?(d.sleepCounter+=1,d.sleepCounter>=d.sleepThreshold/l&&a.set(d,!0)):d.sleepCounter>0&&(d.sleepCounter-=1)}},a.afterCollisions=function(h){for(var n=a._motionSleepThreshold,l=0;l<h.length;l++){var c=h[l];if(c.isActive){var s=c.collision,d=s.bodyA.parent,m=s.bodyB.parent;if(!(d.isSleeping&&m.isSleeping||d.isStatic||m.isStatic)&&(d.isSleeping||m.isSleeping)){var p=d.isSleeping&&!d.isStatic?d:m,g=p===d?m:d;!p.isStatic&&g.motion>n&&a.set(p,!1)}}}},a.set=function(h,n){var l=h.isSleeping;n?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,l||u.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,l&&u.trigger(h,"sleepEnd"))}})()}),66280:((o,E,e)=>{var a={};o.exports=a;var x=e(41598),u=e(53402),r=e(22562),h=e(15647),n=e(31725);(function(){a.rectangle=function(l,c,s,d,m){m=m||{};var p={label:"Rectangle Body",position:{x:l,y:c},vertices:x.fromPath("L 0 0 L "+s+" 0 L "+s+" "+d+" L 0 "+d)};if(m.chamfer){var g=m.chamfer;p.vertices=x.chamfer(p.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete m.chamfer}return r.create(u.extend({},p,m))},a.trapezoid=function(l,c,s,d,m,p){p=p||{},m>=1&&u.warn("Bodies.trapezoid: slope parameter must be < 1."),m*=.5;var g=(1-m*2)*s,T=s*m,S=T+g,w=S+T,A;m<.5?A="L 0 0 L "+T+" "+-d+" L "+S+" "+-d+" L "+w+" 0":A="L 0 0 L "+S+" "+-d+" L "+w+" 0";var M={label:"Trapezoid Body",position:{x:l,y:c},vertices:x.fromPath(A)};if(p.chamfer){var R=p.chamfer;M.vertices=x.chamfer(M.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete p.chamfer}return r.create(u.extend({},M,p))},a.circle=function(l,c,s,d,m){d=d||{};var p={label:"Circle Body",circleRadius:s};m=m||25;var g=Math.ceil(Math.max(10,Math.min(m,s)));return g%2===1&&(g+=1),a.polygon(l,c,g,s,u.extend({},p,d))},a.polygon=function(l,c,s,d,m){if(m=m||{},s<3)return a.circle(l,c,d,m);for(var p=2*Math.PI/s,g="",T=p*.5,S=0;S<s;S+=1){var w=T+S*p,A=Math.cos(w)*d,M=Math.sin(w)*d;g+="L "+A.toFixed(3)+" "+M.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:l,y:c},vertices:x.fromPath(g)};if(m.chamfer){var P=m.chamfer;R.vertices=x.chamfer(R.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete m.chamfer}return r.create(u.extend({},R,m))},a.fromVertices=function(l,c,s,d,m,p,g,T){var S=u.getDecomp(),w,A,M,R,P,b,F,I,L,D,O;for(w=!!(S&&S.quickDecomp),d=d||{},M=[],m=typeof m<"u"?m:!1,p=typeof p<"u"?p:.01,g=typeof g<"u"?g:10,T=typeof T<"u"?T:.01,u.isArray(s[0])||(s=[s]),D=0;D<s.length;D+=1)if(b=s[D],R=x.isConvex(b),P=!R,P&&!w&&u.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!w)R?b=x.clockwiseSort(b):b=x.hull(b),M.push({position:{x:l,y:c},vertices:b});else{var z=b.map(function(k){return[k.x,k.y]});S.makeCCW(z),p!==!1&&S.removeCollinearPoints(z,p),T!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(z,T);var W=S.quickDecomp(z);for(F=0;F<W.length;F++){var X=W[F],_=X.map(function(k){return{x:k[0],y:k[1]}});g>0&&x.area(_)<g||M.push({position:x.centre(_),vertices:_})}}for(F=0;F<M.length;F++)M[F]=r.create(u.extend(M[F],d));if(m){var U=5;for(F=0;F<M.length;F++){var G=M[F];for(I=F+1;I<M.length;I++){var N=M[I];if(h.overlaps(G.bounds,N.bounds)){var H=G.vertices,V=N.vertices;for(L=0;L<G.vertices.length;L++)for(O=0;O<N.vertices.length;O++){var $=n.magnitudeSquared(n.sub(H[(L+1)%H.length],V[O])),j=n.magnitudeSquared(n.sub(H[L],V[(O+1)%V.length]));$<U&&j<U&&(H[L].isInternal=!0,V[O].isInternal=!0)}}}}}return M.length>1?(A=r.create(u.extend({parts:M.slice(0)},d)),r.setPosition(A,{x:l,y:c}),A):M[0]},a.flagCoincidentParts=function(l,c){c===void 0&&(c=5);for(var s=0;s<l.length;s++)for(var d=l[s],m=s+1;m<l.length;m++){var p=l[m];if(h.overlaps(d.bounds,p.bounds))for(var g=d.vertices,T=p.vertices,S=0;S<d.vertices.length;S++)for(var w=0;w<p.vertices.length;w++){var A=n.magnitudeSquared(n.sub(g[(S+1)%g.length],T[w])),M=n.magnitudeSquared(n.sub(g[S],T[(w+1)%T.length]));A<c&&M<c&&(g[S].isInternal=!0,T[w].isInternal=!0)}}return l}})()}),74116:((o,E,e)=>{var a={};o.exports=a;var x=e(69351),u=e(48140),r=e(53402),h=e(22562),n=e(66280);(function(){a.stack=function(l,c,s,d,m,p,g){for(var T=x.create({label:"Stack"}),S=l,w=c,A,M=0,R=0;R<d;R++){for(var P=0,b=0;b<s;b++){var F=g(S,w,b,R,A,M);if(F){var I=F.bounds.max.y-F.bounds.min.y,L=F.bounds.max.x-F.bounds.min.x;I>P&&(P=I),h.translate(F,{x:L*.5,y:I*.5}),S=F.bounds.max.x+m,x.addBody(T,F),A=F,M+=1}else S+=m}w+=P+p,S=l}return T},a.chain=function(l,c,s,d,m,p){for(var g=l.bodies,T=1;T<g.length;T++){var S=g[T-1],w=g[T],A=S.bounds.max.y-S.bounds.min.y,M=S.bounds.max.x-S.bounds.min.x,R=w.bounds.max.y-w.bounds.min.y,P=w.bounds.max.x-w.bounds.min.x,b={bodyA:S,pointA:{x:M*c,y:A*s},bodyB:w,pointB:{x:P*d,y:R*m}},F=r.extend(b,p);x.addConstraint(l,u.create(F))}return l.label+=" Chain",l},a.mesh=function(l,c,s,d,m){var p=l.bodies,g,T,S,w,A;for(g=0;g<s;g++){for(T=1;T<c;T++)S=p[T-1+g*c],w=p[T+g*c],x.addConstraint(l,u.create(r.extend({bodyA:S,bodyB:w},m)));if(g>0)for(T=0;T<c;T++)S=p[T+(g-1)*c],w=p[T+g*c],x.addConstraint(l,u.create(r.extend({bodyA:S,bodyB:w},m))),d&&T>0&&(A=p[T-1+(g-1)*c],x.addConstraint(l,u.create(r.extend({bodyA:A,bodyB:w},m)))),d&&T<c-1&&(A=p[T+1+(g-1)*c],x.addConstraint(l,u.create(r.extend({bodyA:A,bodyB:w},m))))}return l.label+=" Mesh",l},a.pyramid=function(l,c,s,d,m,p,g){return a.stack(l,c,s,d,m,p,function(T,S,w,A,M,R){var P=Math.min(d,Math.ceil(s/2)),b=M?M.bounds.max.x-M.bounds.min.x:0;if(!(A>P)){A=P-A;var F=A,I=s-1-A;if(!(w<F||w>I)){R===1&&h.translate(M,{x:(w+(s%2===1?1:-1))*b,y:0});var L=M?w*b:0;return g(l+L+w*m,S,w,A,M,R)}}})},a.newtonsCradle=function(l,c,s,d,m){for(var p=x.create({label:"Newtons Cradle"}),g=0;g<s;g++){var T=1.9,S=n.circle(l+g*(d*T),c+m,d,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),w=u.create({pointA:{x:l+g*(d*T),y:c},bodyB:S});x.addBody(p,S),x.addConstraint(p,w)}return p},a.car=function(l,c,s,d,m){var p=h.nextGroup(!0),g=20,T=-s*.5+g,S=s*.5-g,w=0,A=x.create({label:"Car"}),M=n.rectangle(l,c,s,d,{collisionFilter:{group:p},chamfer:{radius:d*.5},density:2e-4}),R=n.circle(l+T,c+w,m,{collisionFilter:{group:p},friction:.8}),P=n.circle(l+S,c+w,m,{collisionFilter:{group:p},friction:.8}),b=u.create({bodyB:M,pointB:{x:T,y:w},bodyA:R,stiffness:1,length:0}),F=u.create({bodyB:M,pointB:{x:S,y:w},bodyA:P,stiffness:1,length:0});return x.addBody(A,M),x.addBody(A,R),x.addBody(A,P),x.addConstraint(A,b),x.addConstraint(A,F),A},a.softBody=function(l,c,s,d,m,p,g,T,S,w){S=r.extend({inertia:1/0},S),w=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},w);var A=a.stack(l,c,s,d,m,p,function(M,R){return n.circle(M,R,T,S)});return a.mesh(A,s,d,g,w),A.label="Soft Body",A}})()}),66615:((o,E,e)=>{var a={};o.exports=a;var x=e(31725),u=e(53402);(function(){a.fromVertices=function(r){for(var h={},n=0;n<r.length;n++){var l=(n+1)%r.length,c=x.normalise({x:r[l].y-r[n].y,y:r[n].x-r[l].x}),s=c.y===0?1/0:c.x/c.y;s=s.toFixed(3).toString(),h[s]=c}return u.values(h)},a.rotate=function(r,h){if(h!==0)for(var n=Math.cos(h),l=Math.sin(h),c=0;c<r.length;c++){var s=r[c],d;d=s.x*n-s.y*l,s.y=s.x*l+s.y*n,s.x=d}}})()}),15647:(o=>{var E={};o.exports=E,(function(){E.create=function(e){var a={min:{x:0,y:0},max:{x:0,y:0}};return e&&E.update(a,e),a},E.update=function(e,a,x){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var u=0;u<a.length;u++){var r=a[u];r.x>e.max.x&&(e.max.x=r.x),r.x<e.min.x&&(e.min.x=r.x),r.y>e.max.y&&(e.max.y=r.y),r.y<e.min.y&&(e.min.y=r.y)}x&&(x.x>0?e.max.x+=x.x:e.min.x+=x.x,x.y>0?e.max.y+=x.y:e.min.y+=x.y)},E.contains=function(e,a){return a.x>=e.min.x&&a.x<=e.max.x&&a.y>=e.min.y&&a.y<=e.max.y},E.overlaps=function(e,a){return e.min.x<=a.max.x&&e.max.x>=a.min.x&&e.max.y>=a.min.y&&e.min.y<=a.max.y},E.translate=function(e,a){e.min.x+=a.x,e.max.x+=a.x,e.min.y+=a.y,e.max.y+=a.y},E.shift=function(e,a){var x=e.max.x-e.min.x,u=e.max.y-e.min.y;e.min.x=a.x,e.max.x=a.x+x,e.min.y=a.y,e.max.y=a.y+u},E.wrap=function(e,a,x){var u=null,r=null;if(typeof a.min.x<"u"&&typeof a.max.x<"u"&&(e.min.x>a.max.x?u=a.min.x-e.max.x:e.max.x<a.min.x&&(u=a.max.x-e.min.x)),typeof a.min.y<"u"&&typeof a.max.y<"u"&&(e.min.y>a.max.y?r=a.min.y-e.max.y:e.max.y<a.min.y&&(r=a.max.y-e.min.y)),u!==null||r!==null)return{x:u||0,y:r||0}}})()}),74058:((o,E,e)=>{var a={};o.exports=a,e(15647);var x=e(53402);(function(){a.pathToVertices=function(u,r){typeof window<"u"&&!("SVGPathSeg"in window)&&x.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,n,l,c,s,d,m,p,g,T,S=[],w,A,M=0,R=0,P=0;r=r||15;var b=function(I,L,D){var O=D%2===1&&D>1;if(!g||I!=g.x||L!=g.y){g&&O?(w=g.x,A=g.y):(w=0,A=0);var z={x:w+I,y:A+L};(O||!g)&&(g=z),S.push(z),R=w+I,P=A+L}},F=function(I){var L=I.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":R=I.x,P=I.y;break;case"H":R=I.x;break;case"V":P=I.y;break}b(R,P,I.pathSegType)}};for(a._svgPathToAbsolute(u),l=u.getTotalLength(),d=[],h=0;h<u.pathSegList.numberOfItems;h+=1)d.push(u.pathSegList.getItem(h));for(m=d.concat();M<l;){if(T=u.getPathSegAtLength(M),s=d[T],s!=p){for(;m.length&&m[0]!=s;)F(m.shift());p=s}switch(s.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=u.getPointAtLength(M),b(c.x,c.y,0);break}M+=r}for(h=0,n=m.length;h<n;++h)F(m[h]);return S},a._svgPathToAbsolute=function(u){for(var r,h,n,l,c,s,d=u.pathSegList,m=0,p=0,g=d.numberOfItems,T=0;T<g;++T){var S=d.getItem(T),w=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(w))"x"in S&&(m=S.x),"y"in S&&(p=S.y);else switch("x1"in S&&(n=m+S.x1),"x2"in S&&(c=m+S.x2),"y1"in S&&(l=p+S.y1),"y2"in S&&(s=p+S.y2),"x"in S&&(m+=S.x),"y"in S&&(p+=S.y),w){case"m":d.replaceItem(u.createSVGPathSegMovetoAbs(m,p),T);break;case"l":d.replaceItem(u.createSVGPathSegLinetoAbs(m,p),T);break;case"h":d.replaceItem(u.createSVGPathSegLinetoHorizontalAbs(m),T);break;case"v":d.replaceItem(u.createSVGPathSegLinetoVerticalAbs(p),T);break;case"c":d.replaceItem(u.createSVGPathSegCurvetoCubicAbs(m,p,n,l,c,s),T);break;case"s":d.replaceItem(u.createSVGPathSegCurvetoCubicSmoothAbs(m,p,c,s),T);break;case"q":d.replaceItem(u.createSVGPathSegCurvetoQuadraticAbs(m,p,n,l),T);break;case"t":d.replaceItem(u.createSVGPathSegCurvetoQuadraticSmoothAbs(m,p),T);break;case"a":d.replaceItem(u.createSVGPathSegArcAbs(m,p,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),T);break;case"z":case"Z":m=r,p=h;break}(w=="M"||w=="m")&&(r=m,h=p)}}})()}),31725:(o=>{var E={};o.exports=E,(function(){E.create=function(e,a){return{x:e||0,y:a||0}},E.clone=function(e){return{x:e.x,y:e.y}},E.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},E.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},E.rotate=function(e,a,x){var u=Math.cos(a),r=Math.sin(a);x||(x={});var h=e.x*u-e.y*r;return x.y=e.x*r+e.y*u,x.x=h,x},E.rotateAbout=function(e,a,x,u){var r=Math.cos(a),h=Math.sin(a);u||(u={});var n=x.x+((e.x-x.x)*r-(e.y-x.y)*h);return u.y=x.y+((e.x-x.x)*h+(e.y-x.y)*r),u.x=n,u},E.normalise=function(e){var a=E.magnitude(e);return a===0?{x:0,y:0}:{x:e.x/a,y:e.y/a}},E.dot=function(e,a){return e.x*a.x+e.y*a.y},E.cross=function(e,a){return e.x*a.y-e.y*a.x},E.cross3=function(e,a,x){return(a.x-e.x)*(x.y-e.y)-(a.y-e.y)*(x.x-e.x)},E.add=function(e,a,x){return x||(x={}),x.x=e.x+a.x,x.y=e.y+a.y,x},E.sub=function(e,a,x){return x||(x={}),x.x=e.x-a.x,x.y=e.y-a.y,x},E.mult=function(e,a){return{x:e.x*a,y:e.y*a}},E.div=function(e,a){return{x:e.x/a,y:e.y/a}},E.perp=function(e,a){return a=a===!0?-1:1,{x:a*-e.y,y:a*e.x}},E.neg=function(e){return{x:-e.x,y:-e.y}},E.angle=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)},E._temp=[E.create(),E.create(),E.create(),E.create(),E.create(),E.create()]})()}),41598:((o,E,e)=>{var a={};o.exports=a;var x=e(31725),u=e(53402);(function(){a.create=function(r,h){for(var n=[],l=0;l<r.length;l++){var c=r[l],s={x:c.x,y:c.y,index:l,body:h,isInternal:!1};n.push(s)}return n},a.fromPath=function(r,h){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,l=[];return r.replace(n,function(c,s,d){l.push({x:parseFloat(s),y:parseFloat(d)})}),a.create(l,h)},a.centre=function(r){for(var h=a.area(r,!0),n={x:0,y:0},l,c,s,d=0;d<r.length;d++)s=(d+1)%r.length,l=x.cross(r[d],r[s]),c=x.mult(x.add(r[d],r[s]),l),n=x.add(n,c);return x.div(n,6*h)},a.mean=function(r){for(var h={x:0,y:0},n=0;n<r.length;n++)h.x+=r[n].x,h.y+=r[n].y;return x.div(h,r.length)},a.area=function(r,h){for(var n=0,l=r.length-1,c=0;c<r.length;c++)n+=(r[l].x-r[c].x)*(r[l].y+r[c].y),l=c;return h?n/2:Math.abs(n)/2},a.inertia=function(r,h){for(var n=0,l=0,c=r,s,d,m=0;m<c.length;m++)d=(m+1)%c.length,s=Math.abs(x.cross(c[d],c[m])),n+=s*(x.dot(c[d],c[d])+x.dot(c[d],c[m])+x.dot(c[m],c[m])),l+=s;return h/6*(n/l)},a.translate=function(r,h,n){n=typeof n<"u"?n:1;var l=r.length,c=h.x*n,s=h.y*n,d;for(d=0;d<l;d++)r[d].x+=c,r[d].y+=s;return r},a.rotate=function(r,h,n){if(h!==0){var l=Math.cos(h),c=Math.sin(h),s=n.x,d=n.y,m=r.length,p,g,T,S;for(S=0;S<m;S++)p=r[S],g=p.x-s,T=p.y-d,p.x=s+(g*l-T*c),p.y=d+(g*c+T*l);return r}},a.contains=function(r,h){for(var n=h.x,l=h.y,c=r.length,s=r[c-1],d,m=0;m<c;m++){if(d=r[m],(n-s.x)*(d.y-s.y)+(l-s.y)*(s.x-d.x)>0)return!1;s=d}return!0},a.scale=function(r,h,n,l){if(h===1&&n===1)return r;l=l||a.centre(r);for(var c,s,d=0;d<r.length;d++)c=r[d],s=x.sub(c,l),r[d].x=l.x+s.x*h,r[d].y=l.y+s.y*n;return r},a.chamfer=function(r,h,n,l,c){typeof h=="number"?h=[h]:h=h||[8],n=typeof n<"u"?n:-1,l=l||2,c=c||14;for(var s=[],d=0;d<r.length;d++){var m=r[d-1>=0?d-1:r.length-1],p=r[d],g=r[(d+1)%r.length],T=h[d<h.length?d:h.length-1];if(T===0){s.push(p);continue}var S=x.normalise({x:p.y-m.y,y:m.x-p.x}),w=x.normalise({x:g.y-p.y,y:p.x-g.x}),A=Math.sqrt(2*Math.pow(T,2)),M=x.mult(u.clone(S),T),R=x.normalise(x.mult(x.add(S,w),.5)),P=x.sub(p,x.mult(R,A)),b=n;n===-1&&(b=Math.pow(T,.32)*1.75),b=u.clamp(b,l,c),b%2===1&&(b+=1);for(var F=Math.acos(x.dot(S,w)),I=F/b,L=0;L<b;L++)s.push(x.add(x.rotate(M,I*L),P))}return s},a.clockwiseSort=function(r){var h=a.mean(r);return r.sort(function(n,l){return x.angle(h,n)-x.angle(h,l)}),r},a.isConvex=function(r){var h=0,n=r.length,l,c,s,d;if(n<3)return null;for(l=0;l<n;l++)if(c=(l+1)%n,s=(l+2)%n,d=(r[c].x-r[l].x)*(r[s].y-r[c].y),d-=(r[c].y-r[l].y)*(r[s].x-r[c].x),d<0?h|=1:d>0&&(h|=2),h===3)return!1;return h!==0?!0:null},a.hull=function(r){var h=[],n=[],l,c;for(r=r.slice(0),r.sort(function(s,d){var m=s.x-d.x;return m!==0?m:s.y-d.y}),c=0;c<r.length;c+=1){for(l=r[c];n.length>=2&&x.cross3(n[n.length-2],n[n.length-1],l)<=0;)n.pop();n.push(l)}for(c=r.length-1;c>=0;c-=1){for(l=r[c];h.length>=2&&x.cross3(h[h.length-2],h[h.length-1],l)<=0;)h.pop();h.push(l)}return h.pop(),n.pop(),h.concat(n)}})()}),55973:(o=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={decomp:F,quickDecomp:O,isSimple:L,removeCollinearPoints:z,removeDuplicatePoints:W,makeCCW:g};function E(U,G,N){N=N||0;var H=[0,0],V,$,j,k,Q,et,at;return V=U[1][1]-U[0][1],$=U[0][0]-U[1][0],j=V*U[0][0]+$*U[0][1],k=G[1][1]-G[0][1],Q=G[0][0]-G[1][0],et=k*G[0][0]+Q*G[0][1],at=V*Q-k*$,X(at,0,N)||(H[0]=(Q*j-$*et)/at,H[1]=(V*et-k*j)/at),H}function e(U,G,N,H){var V=G[0]-U[0],$=G[1]-U[1],j=H[0]-N[0],k=H[1]-N[1];if(j*$-k*V===0)return!1;var Q=(V*(N[1]-U[1])+$*(U[0]-N[0]))/(j*$-k*V),et=(j*(U[1]-N[1])+k*(N[0]-U[0]))/(k*V-j*$);return Q>=0&&Q<=1&&et>=0&&et<=1}function a(U,G,N){return(G[0]-U[0])*(N[1]-U[1])-(N[0]-U[0])*(G[1]-U[1])}function x(U,G,N){return a(U,G,N)>0}function u(U,G,N){return a(U,G,N)>=0}function r(U,G,N){return a(U,G,N)<0}function h(U,G,N){return a(U,G,N)<=0}var n=[],l=[];function c(U,G,N,H){if(H){var V=n,$=l;V[0]=G[0]-U[0],V[1]=G[1]-U[1],$[0]=N[0]-G[0],$[1]=N[1]-G[1];var j=V[0]*$[0]+V[1]*$[1],k=Math.sqrt(V[0]*V[0]+V[1]*V[1]),Q=Math.sqrt($[0]*$[0]+$[1]*$[1]),et=Math.acos(j/(k*Q));return et<H}else return a(U,G,N)===0}function s(U,G){var N=G[0]-U[0],H=G[1]-U[1];return N*N+H*H}function d(U,G){var N=U.length;return U[G<0?G%N+N:G%N]}function m(U){U.length=0}function p(U,G,N,H){for(var V=N;V<H;V++)U.push(G[V])}function g(U){for(var G=0,N=U,H=1;H<U.length;++H)(N[H][1]<N[G][1]||N[H][1]===N[G][1]&&N[H][0]>N[G][0])&&(G=H);return x(d(U,G-1),d(U,G),d(U,G+1))?!1:(T(U),!0)}function T(U){for(var G=[],N=U.length,H=0;H!==N;H++)G.push(U.pop());for(var H=0;H!==N;H++)U[H]=G[H]}function S(U,G){return r(d(U,G-1),d(U,G),d(U,G+1))}var w=[],A=[];function M(U,G,N){var H,V,$=w,j=A;if(u(d(U,G+1),d(U,G),d(U,N))&&h(d(U,G-1),d(U,G),d(U,N)))return!1;V=s(d(U,G),d(U,N));for(var k=0;k!==U.length;++k)if(!((k+1)%U.length===G||k===G)&&u(d(U,G),d(U,N),d(U,k+1))&&h(d(U,G),d(U,N),d(U,k))&&($[0]=d(U,G),$[1]=d(U,N),j[0]=d(U,k),j[1]=d(U,k+1),H=E($,j),s(d(U,G),H)<V))return!1;return!0}function R(U,G,N){for(var H=0;H!==U.length;++H)if(!(H===G||H===N||(H+1)%U.length===G||(H+1)%U.length===N)&&e(d(U,G),d(U,N),d(U,H),d(U,H+1)))return!1;return!0}function P(U,G,N,H){var V=H||[];if(m(V),G<N)for(var $=G;$<=N;$++)V.push(U[$]);else{for(var $=0;$<=N;$++)V.push(U[$]);for(var $=G;$<U.length;$++)V.push(U[$])}return V}function b(U){for(var G=[],N=[],H=[],V=[],$=Number.MAX_VALUE,j=0;j<U.length;++j)if(S(U,j)){for(var k=0;k<U.length;++k)if(M(U,j,k)){N=b(P(U,j,k,V)),H=b(P(U,k,j,V));for(var Q=0;Q<H.length;Q++)N.push(H[Q]);N.length<$&&(G=N,$=N.length,G.push([d(U,j),d(U,k)]))}}return G}function F(U){var G=b(U);return G.length>0?I(U,G):[U]}function I(U,G){if(G.length===0)return[U];if(G instanceof Array&&G.length&&G[0]instanceof Array&&G[0].length===2&&G[0][0]instanceof Array){for(var N=[U],H=0;H<G.length;H++)for(var V=G[H],$=0;$<N.length;$++){var j=N[$],k=I(j,V);if(k){N.splice($,1),N.push(k[0],k[1]);break}}return N}else{var V=G,H=U.indexOf(V[0]),$=U.indexOf(V[1]);return H!==-1&&$!==-1?[P(U,H,$),P(U,$,H)]:!1}}function L(U){var G=U,N;for(N=0;N<G.length-1;N++)for(var H=0;H<N-1;H++)if(e(G[N],G[N+1],G[H],G[H+1]))return!1;for(N=1;N<G.length-2;N++)if(e(G[0],G[G.length-1],G[N],G[N+1]))return!1;return!0}function D(U,G,N,H,V){V=V||0;var $=G[1]-U[1],j=U[0]-G[0],k=$*U[0]+j*U[1],Q=H[1]-N[1],et=N[0]-H[0],at=Q*N[0]+et*N[1],q=$*et-Q*j;return X(q,0,V)?[0,0]:[(et*k-j*at)/q,($*at-Q*k)/q]}function O(U,G,N,H,V,$,j){$=$||100,j=j||0,V=V||25,G=typeof G<"u"?G:[],N=N||[],H=H||[];var k=[0,0],Q=[0,0],et=[0,0],at=0,q=0,ft=0,vt=0,Tt=0,ct=0,Nt=0,yt=[],it=[],Z=U,lt=U;if(lt.length<3)return G;if(j++,j>$)return console.warn("quickDecomp: max level ("+$+") reached."),G;for(var pt=0;pt<U.length;++pt)if(S(Z,pt)){N.push(Z[pt]),at=q=Number.MAX_VALUE;for(var Rt=0;Rt<U.length;++Rt)x(d(Z,pt-1),d(Z,pt),d(Z,Rt))&&h(d(Z,pt-1),d(Z,pt),d(Z,Rt-1))&&(et=D(d(Z,pt-1),d(Z,pt),d(Z,Rt),d(Z,Rt-1)),r(d(Z,pt+1),d(Z,pt),et)&&(ft=s(Z[pt],et),ft<q&&(q=ft,Q=et,ct=Rt))),x(d(Z,pt+1),d(Z,pt),d(Z,Rt+1))&&h(d(Z,pt+1),d(Z,pt),d(Z,Rt))&&(et=D(d(Z,pt+1),d(Z,pt),d(Z,Rt),d(Z,Rt+1)),x(d(Z,pt-1),d(Z,pt),et)&&(ft=s(Z[pt],et),ft<at&&(at=ft,k=et,Tt=Rt)));if(ct===(Tt+1)%U.length)et[0]=(Q[0]+k[0])/2,et[1]=(Q[1]+k[1])/2,H.push(et),pt<Tt?(p(yt,Z,pt,Tt+1),yt.push(et),it.push(et),ct!==0&&p(it,Z,ct,Z.length),p(it,Z,0,pt+1)):(pt!==0&&p(yt,Z,pt,Z.length),p(yt,Z,0,Tt+1),yt.push(et),it.push(et),p(it,Z,ct,pt+1));else{if(ct>Tt&&(Tt+=U.length),vt=Number.MAX_VALUE,Tt<ct)return G;for(var Rt=ct;Rt<=Tt;++Rt)u(d(Z,pt-1),d(Z,pt),d(Z,Rt))&&h(d(Z,pt+1),d(Z,pt),d(Z,Rt))&&(ft=s(d(Z,pt),d(Z,Rt)),ft<vt&&R(Z,pt,Rt)&&(vt=ft,Nt=Rt%U.length));pt<Nt?(p(yt,Z,pt,Nt+1),Nt!==0&&p(it,Z,Nt,lt.length),p(it,Z,0,pt+1)):(pt!==0&&p(yt,Z,pt,lt.length),p(yt,Z,0,Nt+1),p(it,Z,Nt,pt+1))}return yt.length<it.length?(O(yt,G,N,H,V,$,j),O(it,G,N,H,V,$,j)):(O(it,G,N,H,V,$,j),O(yt,G,N,H,V,$,j)),G}return G.push(U),G}function z(U,G){for(var N=0,H=U.length-1;U.length>3&&H>=0;--H)c(d(U,H-1),d(U,H),d(U,H+1),G)&&(U.splice(H%U.length,1),N++);return N}function W(U,G){for(var N=U.length-1;N>=1;--N)for(var H=U[N],V=N-1;V>=0;--V)if(_(H,U[V],G)){U.splice(N,1);continue}}function X(U,G,N){return N=N||0,Math.abs(U-G)<=N}function _(U,G,N){return X(U[0],G[0],N)&&X(U[1],G[1],N)}}),52018:((o,E,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(83419),x=new a({initialize:function(r){this.pluginManager=r,this.game=r.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=x}),42363:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};o.exports=E}),37277:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={},e={},a={};a.register=function(x,u,r,h){h===void 0&&(h=!1),E[x]={plugin:u,mapping:r,custom:h}},a.registerCustom=function(x,u,r,h){e[x]={plugin:u,mapping:r,data:h}},a.hasCore=function(x){return E.hasOwnProperty(x)},a.hasCustom=function(x){return e.hasOwnProperty(x)},a.getCore=function(x){return E[x]},a.getCustom=function(x){return e[x]},a.getCustomClass=function(x){return e.hasOwnProperty(x)?e[x].plugin:null},a.remove=function(x){E.hasOwnProperty(x)&&delete E[x]},a.removeCustom=function(x){e.hasOwnProperty(x)&&delete e[x]},a.destroyCorePlugins=function(){for(var x in E)E.hasOwnProperty(x)&&delete E[x]},a.destroyCustomPlugins=function(){for(var x in e)e.hasOwnProperty(x)&&delete e[x]},o.exports=a}),77332:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(8443),u=e(50792),r=e(74099),h=e(44603),n=e(39429),l=e(95540),c=e(37277),s=e(72905),d=e(8054),m=new a({Extends:u,initialize:function(g){u.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted||g.config.renderType===d.HEADLESS?this.boot():g.events.once(x.BOOT,this.boot,this)},boot:function(){var p,g,T,S,w,A,M,R=this.game.config,P=R.installGlobalPlugins;for(P=P.concat(this._pendingGlobal),p=0;p<P.length;p++)g=P[p],T=l(g,"key",null),S=l(g,"plugin",null),w=l(g,"start",!1),A=l(g,"mapping",null),M=l(g,"data",null),T&&(S?this.install(T,S,w,A,M):console.warn("Missing `plugin` for key: "+T));for(P=R.installScenePlugins,P=P.concat(this._pendingScene),p=0;p<P.length;p++)g=P[p],T=l(g,"key",null),S=l(g,"plugin",null),A=l(g,"mapping",null),T&&(S?this.installScenePlugin(T,S,A):console.warn("Missing `plugin` for key: "+T));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(x.DESTROY,this.destroy,this)},addToScene:function(p,g,T){var S,w,A,M=this.game,R=p.scene,P=p.settings.map,b=p.settings.isBooted;for(S=0;S<g.length;S++)w=g[S],M[w]?(p[w]=M[w],P.hasOwnProperty(w)&&(R[P[w]]=p[w])):w==="game"&&P.hasOwnProperty(w)&&(R[P[w]]=M);for(var F=0;F<T.length;F++)for(A=T[F],S=0;S<A.length;S++)if(w=A[S],!!c.hasCore(w)){var I=c.getCore(w),L=I.mapping,D=new I.plugin(R,this,L);p[L]=D,I.custom?R[L]=D:P.hasOwnProperty(L)&&(R[P[L]]=D),b&&D.boot()}for(A=this.plugins,S=0;S<A.length;S++){var O=A[S];O.mapping&&(R[O.mapping]=O.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,T,S,w){if(w===void 0&&(w=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(c.hasCore(p)||c.register(p,g,T,!0),this.scenePlugins.indexOf(p)===-1)this.scenePlugins.push(p);else if(!w&&c.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(S){var A=new g(S,this,p);S.sys[p]=A,T&&T!==""&&(S[T]=A),A.boot()}},install:function(p,g,T,S,w){if(T===void 0&&(T=!1),S===void 0&&(S=null),w===void 0&&(w=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(c.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(S!==null&&(T=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:T,mapping:S,data:w});else if(c.registerCustom(p,g,S,w),T)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,T=0;T<g.length;T++){var S=g[T];if(S.key===p)return T}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var T=this.getEntry(g);return T&&!T.active?(T.active=!0,T.plugin.start()):T||(T=this.createEntry(p,g)),T?T.plugin:null},createEntry:function(p,g){var T=c.getCustom(p);if(T){var S=new T.plugin(this);T={key:g,plugin:S,active:!0,mapping:T.mapping,data:T.data},this.plugins.push(T),S.init(T.data),S.start()}return T},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var T=this.getEntry(p);if(T)return T.plugin;var S=this.getClass(p);return S&&g?(T=this.createEntry(p,p),T?T.plugin:null):S||null},getClass:function(p){return c.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&s(this.plugins,g),c.removeCustom(p)},removeScenePlugin:function(p){s(this.scenePlugins,p),c.remove(p)},registerGameObject:function(p,g,T){return g&&n.register(p,g),T&&h.register(p,T),this},removeGameObject:function(p,g,T){return g===void 0&&(g=!0),T===void 0&&(T=!0),g&&n.remove(p),T&&h.remove(p),this},registerFileType:function(p,g,T){r.register(p,g),T&&T.sys.load&&(T.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});o.exports=m}),45145:((o,E,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(52018),x=e(83419),u=e(44594),r=new x({Extends:a,initialize:function(n,l,c){a.call(this,l),this.scene=n,this.systems=n.sys,this.pluginKey=c,n.sys.events.once(u.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=r}),18922:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BasePlugin:e(52018),DefaultPlugins:e(42363),PluginCache:e(37277),PluginManager:e(77332),ScenePlugin:e(45145)}}),63595:(()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(o){const E=performance.now(),e=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,x=(u,r)=>{const h=this.getVideoPlaybackQuality(),n=this.mozPresentedFrames||this.mozPaintedFrames||h.totalVideoFrames-h.droppedVideoFrames;if(n>a){const l=this.mozFrameDelay||h.totalFrameDelay-e.totalFrameDelay||0,c=r-u;o(r,{presentationTime:r+l*1e3,expectedDisplayTime:r+c,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+c/1e3,presentedFrames:n,processingDuration:l}),delete this._rvfcpolyfillmap[E]}else this._rvfcpolyfillmap[E]=requestAnimationFrame(l=>x(r,l))};return this._rvfcpolyfillmap[E]=requestAnimationFrame(u=>x(E,u)),E},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(o){cancelAnimationFrame(this._rvfcpolyfillmap[o]),delete this._rvfcpolyfillmap[o]})}),10312:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}}),29795:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={DEFAULT:0,LINEAR:0,NEAREST:1};o.exports=E}),68627:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19715),x=e(32880),u=e(83419),r=e(8054),h=e(50792),n=e(92503),l=e(56373),c=e(97480),s=e(69442),d=e(8443),m=e(61340),p=new u({Extends:h,initialize:function(T){h.call(this);var S=T.config;this.config={clearBeforeRender:S.clearBeforeRender,backgroundColor:S.backgroundColor,antialias:S.antialias,roundPixels:S.roundPixels,transparent:S.transparent},this.game=T,this.type=r.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=T.canvas;var w={alpha:S.transparent,desynchronized:S.desynchronized,willReadFrequently:!1};this.gameContext=S.context?S.context:this.gameCanvas.getContext("2d",w),this.currentContext=this.gameContext,this.antialias=S.antialias,this.blendModes=l(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new m,this._tempMatrix2=new m,this._tempMatrix3=new m,this.isBooted=!1,this.init()},init:function(){var g=this.game;g.events.once(d.BOOT,function(){var T=this.config;if(!T.transparent){var S=this.gameContext,w=this.gameCanvas;S.fillStyle=T.backgroundColor.rgba,S.fillRect(0,0,w.width,w.height)}},this),g.textures.once(s.READY,this.boot,this)},boot:function(){var g=this.game,T=g.scale.baseSize;this.width=T.width,this.height=T.height,this.isBooted=!0,g.scale.on(c.RESIZE,this.onResize,this),this.resize(T.width,T.height)},onResize:function(g,T){(T.width!==this.width||T.height!==this.height)&&this.resize(T.width,T.height)},resize:function(g,T){this.width=g,this.height=T,this.emit(n.RESIZE,g,T)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,T=this.config,S=this.width,w=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),this.emit(n.PRE_RENDER_CLEAR),T.clearBeforeRender&&(g.clearRect(0,0,S,w),T.transparent||(g.fillStyle=T.backgroundColor.rgba,g.fillRect(0,0,S,w))),g.save(),this.drawCount=0,this.emit(n.PRE_RENDER)},render:function(g,T,S){var w=T.length;this.emit(n.RENDER,g,S);var A=S.x,M=S.y,R=S.width,P=S.height,b=S.renderToTexture?S.context:g.sys.context;b.save(),this.game.scene.customViewports&&(b.beginPath(),b.rect(A,M,R,P),b.clip()),S.emit(a.PRE_RENDER,S),this.currentContext=b;var F=S.mask;F&&F.preRenderCanvas(this,null,S._maskCamera),S.transparent||(b.fillStyle=S.backgroundColor.rgba,b.fillRect(A,M,R,P)),b.globalAlpha=S.alpha,b.globalCompositeOperation="source-over",this.drawCount+=w,S.renderToTexture&&S.emit(a.PRE_RENDER,S),S.matrix.copyToContext(b);for(var I=0;I<w;I++){var L=T[I];L.mask&&L.mask.preRenderCanvas(this,L,S),L.renderCanvas(this,L,S),L.mask&&L.mask.postRenderCanvas(this,L,S)}b.setTransform(1,0,0,1,0,0),b.globalCompositeOperation="source-over",b.globalAlpha=1,S.flashEffect.postRenderCanvas(b),S.fadeEffect.postRenderCanvas(b),S.dirty=!1,F&&F.postRenderCanvas(this),b.restore(),S.renderToTexture&&(S.emit(a.POST_RENDER,S),S.renderToGame&&g.sys.context.drawImage(S.canvas,A,M)),S.emit(a.POST_RENDER,S)},postRender:function(){var g=this.gameContext;g.restore(),this.emit(n.POST_RENDER);var T=this.snapshotState;T.callback&&(x(this.gameCanvas,T),T.callback=null)},snapshotCanvas:function(g,T,S,w,A,M,R,P,b){S===void 0&&(S=!1),this.snapshotArea(w,A,M,R,T,P,b);var F=this.snapshotState;return F.getPixel=S,x(g,F),F.callback=null,this},snapshot:function(g,T,S){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,T,S)},snapshotArea:function(g,T,S,w,A,M,R){var P=this.snapshotState;return P.callback=A,P.type=M,P.encoder=R,P.getPixel=!1,P.x=g,P.y=T,P.width=Math.min(S,this.gameCanvas.width),P.height=Math.min(w,this.gameCanvas.height),this},snapshotPixel:function(g,T,S){return this.snapshotArea(g,T,1,1,S),this.snapshotState.getPixel=!0,this},batchSprite:function(g,T,S,w){var A=S.alpha*g.alpha;if(A!==0){var M=this.currentContext,R=this._tempMatrix1,P=this._tempMatrix2,b=T.canvasData,F=b.x,I=b.y,L=T.cutWidth,D=T.cutHeight,O=T.customPivot,z=T.source.resolution,W=g.displayOriginX,X=g.displayOriginY,_=-W+T.x,U=-X+T.y;if(g.isCropped){var G=g._crop;(G.flipX!==g.flipX||G.flipY!==g.flipY)&&T.updateCropUVs(G,g.flipX,g.flipY),L=G.cw,D=G.ch,F=G.cx,I=G.cy,_=-W+G.x,U=-X+G.y,g.flipX&&(_>=0?_=-(_+L):_<0&&(_=Math.abs(_)-L)),g.flipY&&(U>=0?U=-(U+D):U<0&&(U=Math.abs(U)-D))}var N=1,H=1;g.flipX&&(O||(_+=-T.realWidth+W*2),N=-1),g.flipY&&(O||(U+=-T.realHeight+X*2),H=-1);var V=g.x,$=g.y;if(S.roundPixels&&(V=Math.floor(V),$=Math.floor($)),P.applyITRS(V,$,g.rotation,g.scaleX*N,g.scaleY*H),R.copyFrom(S.matrix),w?(R.multiplyWithOffset(w,-S.scrollX*g.scrollFactorX,-S.scrollY*g.scrollFactorY),P.e=V,P.f=$):(P.e-=S.scrollX*g.scrollFactorX,P.f-=S.scrollY*g.scrollFactorY),R.multiply(P),S.renderRoundPixels&&(R.e=Math.floor(R.e+.5),R.f=Math.floor(R.f+.5)),M.save(),R.setToContext(M),M.globalCompositeOperation=this.blendModes[g.blendMode],M.globalAlpha=A,M.imageSmoothingEnabled=!T.source.scaleMode,g.mask&&g.mask.preRenderCanvas(this,g,S),L>0&&D>0){var j=L/z,k=D/z;S.roundPixels&&(_=Math.floor(_+.5),U=Math.floor(U+.5),j+=.5,k+=.5),M.drawImage(T.source.image,F,I,L,D,_,U,j,k)}g.mask&&g.mask.postRenderCanvas(this,g,S),M.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});o.exports=p}),55830:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasRenderer:e(68627),GetBlendModes:e(56373),SetTransform:e(20926)}}),56373:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(89289),u=function(){var r=[],h=x.supportNewBlendModes,n="source-over";return r[a.NORMAL]=n,r[a.ADD]="lighter",r[a.MULTIPLY]=h?"multiply":n,r[a.SCREEN]=h?"screen":n,r[a.OVERLAY]=h?"overlay":n,r[a.DARKEN]=h?"darken":n,r[a.LIGHTEN]=h?"lighten":n,r[a.COLOR_DODGE]=h?"color-dodge":n,r[a.COLOR_BURN]=h?"color-burn":n,r[a.HARD_LIGHT]=h?"hard-light":n,r[a.SOFT_LIGHT]=h?"soft-light":n,r[a.DIFFERENCE]=h?"difference":n,r[a.EXCLUSION]=h?"exclusion":n,r[a.HUE]=h?"hue":n,r[a.SATURATION]=h?"saturation":n,r[a.COLOR]=h?"color":n,r[a.LUMINOSITY]=h?"luminosity":n,r[a.ERASE]="destination-out",r[a.SOURCE_IN]="source-in",r[a.SOURCE_OUT]="source-out",r[a.SOURCE_ATOP]="source-atop",r[a.DESTINATION_OVER]="destination-over",r[a.DESTINATION_IN]="destination-in",r[a.DESTINATION_OUT]="destination-out",r[a.DESTINATION_ATOP]="destination-atop",r[a.LIGHTER]="lighter",r[a.COPY]="copy",r[a.XOR]="xor",r};o.exports=u}),20926:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),x=function(u,r,h,n,l){var c=n.alpha*h.alpha;if(c<=0)return!1;var s=a(h,n,l).calc;return r.globalCompositeOperation=u.blendModes[h.blendMode],r.globalAlpha=c,r.save(),s.setToContext(r),r.imageSmoothingEnabled=h.frame?!h.frame.source.scaleMode:u.antialias,!0};o.exports=x}),63899:(o=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="losewebgl"}),6119:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"}),48070:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"}),15640:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"}),8912:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"}),87124:(o=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="restorewebgl"}),92503:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={LOSE_WEBGL:e(63899),POST_RENDER:e(6119),PRE_RENDER:e(48070),RENDER:e(15640),RESIZE:e(8912),RESTORE_WEBGL:e(87124)}}),36909:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:e(92503),Snapshot:e(89966)},o.exports.Canvas=e(55830),o.exports.WebGL=e(4159)}),32880:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(40987),u=e(95540),r=function(h,n){var l=u(n,"callback"),c=u(n,"type","image/png"),s=u(n,"encoder",.92),d=Math.abs(Math.round(u(n,"x",0))),m=Math.abs(Math.round(u(n,"y",0))),p=Math.floor(u(n,"width",h.width)),g=Math.floor(u(n,"height",h.height)),T=u(n,"getPixel",!1);if(T){var S=h.getContext("2d",{willReadFrequently:!1}),w=S.getImageData(d,m,1,1),A=w.data;l.call(null,new x(A[0],A[1],A[2],A[3]))}else if(d!==0||m!==0||p!==h.width||g!==h.height){var M=a.createWebGL(this,p,g),R=M.getContext("2d",{willReadFrequently:!0});p>0&&g>0&&R.drawImage(h,d,m,p,g,0,0,p,g);var P=new Image;P.onerror=function(){l.call(null),a.remove(M)},P.onload=function(){l.call(null,P),a.remove(M)},P.src=M.toDataURL(c,s)}else{var b=new Image;b.onerror=function(){l.call(null)},b.onload=function(){l.call(null,b)},b.src=h.toDataURL(c,s)}};o.exports=r}),88815:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(40987),u=e(95540),r=function(h,n){var l=h,c=u(n,"callback"),s=u(n,"type","image/png"),d=u(n,"encoder",.92),m=Math.abs(Math.round(u(n,"x",0))),p=Math.abs(Math.round(u(n,"y",0))),g=u(n,"getPixel",!1),T=u(n,"isFramebuffer",!1),S=T?u(n,"bufferWidth",1):l.drawingBufferWidth,w=T?u(n,"bufferHeight",1):l.drawingBufferHeight;if(g){var A=new Uint8Array(4),M=T?p:w-p;l.readPixels(m,M,1,1,l.RGBA,l.UNSIGNED_BYTE,A),c.call(null,new x(A[0],A[1],A[2],A[3]))}else{var R=Math.floor(u(n,"width",S)),P=Math.floor(u(n,"height",w)),b=R*P*4,F=new Uint8Array(b);l.readPixels(m,w-p-P,R,P,l.RGBA,l.UNSIGNED_BYTE,F);for(var I=a.createWebGL(this,R,P),L=I.getContext("2d",{willReadFrequently:!0}),D=L.getImageData(0,0,R,P),O=D.data,z=0;z<P;z++)for(var W=0;W<R;W++){var X=((P-z-1)*R+W)*4,_=T?b-(z*R+(R-W))*4:(z*R+W)*4;O[_+0]=F[X+0],O[_+1]=F[X+1],O[_+2]=F[X+2],O[_+3]=F[X+3]}L.putImageData(D,0,0);var U=new Image;U.onerror=function(){c.call(null),a.remove(I)},U.onload=function(){c.call(null,U),a.remove(I)},U.src=I.toDataURL(s,d)}};o.exports=r}),89966:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Canvas:e(32880),WebGL:e(88815)}}),7530:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(36060),u=e(90330),r=e(82264),h=e(95540),n=e(32302),l=e(63448),c=e(31302),s=e(58918),d=e(14811),m=e(92651),p=e(96569),g=e(56527),T=e(57516),S=e(43439),w=e(81041),A=e(12385),M=e(7589),R=e(95428),P=e(72905),b=new a({initialize:function(I){this.game=I.game,this.renderer=I,this.classes=new u([[x.UTILITY_PIPELINE,M],[x.MULTI_PIPELINE,T],[x.BITMAPMASK_PIPELINE,c],[x.SINGLE_PIPELINE,A],[x.ROPE_PIPELINE,w],[x.LIGHT_PIPELINE,p],[x.POINTLIGHT_PIPELINE,S],[x.MOBILE_PIPELINE,g]]),this.postPipelineClasses=new u,this.pipelines=new u,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(F,I,L){var D=this.renderer,O=this.renderTargets;this.frameInc=Math.floor(h(F,"frameInc",32));var z=D.width,W=D.height,X=this.game.config.disablePreFX,_=this.game.config.disablePostFX;if(_||this.postPipelineClasses.setAll([[String(d.BARREL),s.Barrel],[String(d.BLOOM),s.Bloom],[String(d.BLUR),s.Blur],[String(d.BOKEH),s.Bokeh],[String(d.CIRCLE),s.Circle],[String(d.COLOR_MATRIX),s.ColorMatrix],[String(d.DISPLACEMENT),s.Displacement],[String(d.GLOW),s.Glow],[String(d.GRADIENT),s.Gradient],[String(d.PIXELATE),s.Pixelate],[String(d.SHADOW),s.Shadow],[String(d.SHINE),s.Shine],[String(d.VIGNETTE),s.Vignette],[String(d.WIPE),s.Wipe]]),!X){this.classes.set(x.FX_PIPELINE,m);for(var U=Math.min(z,W),G=Math.ceil(U/this.frameInc),N=1;N<G;N++){var H=N*this.frameInc;O.push(new n(D,H,H)),O.push(new n(D,H,H)),O.push(new n(D,H,H)),this.maxDimension=H}O.push(new n(D,z,W,1,0,!0,!0)),O.push(new n(D,z,W,1,0,!0,!0)),O.push(new n(D,z,W,1,0,!0,!0))}var V,$,j=this,k=this.game;if(this.classes.each(function(et,at){V=j.add(et,new at({game:k})),et===x.UTILITY_PIPELINE&&(j.UTILITY_PIPELINE=V,j.fullFrame1=V.fullFrame1,j.fullFrame2=V.fullFrame2,j.halfFrame1=V.halfFrame1,j.halfFrame2=V.halfFrame2)}),this.MULTI_PIPELINE=this.get(x.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(x.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(x.MOBILE_PIPELINE),X||(this.FX_PIPELINE=this.get(x.FX_PIPELINE)),F)for($ in F){var Q=F[$];V=new Q(k),V.name=$,V.isPostFX?this.postPipelineClasses.set($,Q):this.has($)||(this.classes.set($,Q),this.add($,V))}this.default=this.get(I),L&&!r.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(F){var I=this.get(F);return I&&(this.default=I),I},add:function(F,I){if(I.isPostFX){console.warn(F+" is a Post Pipeline. Use `addPostPipeline` instead");return}var L=this.pipelines,D=this.renderer;return L.has(F)?console.warn("Pipeline exists: "+F):(I.name=F,I.manager=this,L.set(F,I)),I.hasBooted||I.boot(),D.width!==0&&D.height!==0&&!I.isPreFX&&I.resize(D.width,D.height),I},addPostPipeline:function(F,I){this.postPipelineClasses.has(F)||this.postPipelineClasses.set(F,I)},flush:function(){this.current&&this.current.flush()},has:function(F){var I=this.pipelines;return typeof F=="string"?I.has(F):!!I.contains(F)},get:function(F){var I=this.pipelines;if(typeof F=="string")return I.get(F);if(I.contains(F))return F},getPostPipeline:function(F,I,L){var D=this.postPipelineClasses,O,z="",W=typeof F;if(W==="string"||W==="number"?(O=D.get(F),z=F):W==="function"?(D.contains(F)&&(O=F),z=F.name):W==="object"&&(O=D.get(F.name),z=F.name),O){var X=new O(this.game,L);return X.name=z,I&&(X.gameObject=I),this.postPipelineInstances.push(X),X}},removePostPipeline:function(F){P(this.postPipelineInstances,F)},remove:function(F,I,L){I===void 0&&(I=!0),L===void 0&&(L=!0),this.pipelines.delete(F),I&&this.classes.delete(F),L&&this.postPipelineClasses.delete(F)},set:function(F,I,L){if(!F.isPostFX)return this.isCurrent(F,L)||(this.flush(),this.current&&this.current.unbind(),this.current=F,F.bind(L)),F.updateProjectionMatrix(),F.onBind(I),F},preBatch:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=I.length-1;L>=0;L--){var D=I[L];D.active&&D.preBatch(F)}}},postBatch:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=0;L<I.length;L++){var D=I[L];D.active&&D.postBatch(F)}}},preBatchCamera:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=I.length-1;L>=0;L--){var D=I[L];D.active&&D.preBatch(F)}}},postBatchCamera:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=0;L<I.length;L++){var D=I[L];D.active&&D.postBatch(F)}}},isCurrent:function(F,I){var L=this.renderer,D=this.current;return D&&!I&&(I=D.currentShader),!(D!==F||I.program!==L.currentProgram)},copyFrame:function(F,I,L,D,O){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(F,I,L,D,O),this},copyToGame:function(F){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(F),this},drawFrame:function(F,I,L,D){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(F,I,L,D),this},blendFrames:function(F,I,L,D,O){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(F,I,L,D,O),this},blendFramesAdditive:function(F,I,L,D,O){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(F,I,L,D,O),this},clearFrame:function(F,I){return this.UTILITY_PIPELINE.clearFrame(F,I),this},blitFrame:function(F,I,L,D,O,z){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(F,I,L,D,O,z),this},copyFrameRect:function(F,I,L,D,O,z,W,X){return this.UTILITY_PIPELINE.copyFrameRect(F,I,L,D,O,z,W,X),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(F){return this.UTILITY_PIPELINE.bind(F)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(F,I){I.restoreContext()}),R(this.postPipelineInstances,function(F){F.restoreContext()})},rebind:function(F){F===void 0&&this.previous&&(F=this.previous);var I=this.renderer,L=I.gl;L.disable(L.DEPTH_TEST),L.disable(L.CULL_FACE),I.hasActiveStencilMask()?L.clear(L.DEPTH_BUFFER_BIT):(L.disable(L.STENCIL_TEST),L.clear(L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)),L.viewport(0,0,I.width,I.height),I.currentProgram=null,I.setBlendMode(0,!0);var D=I.vaoExtension;D&&D.bindVertexArrayOES(null);var O=this.pipelines.entries;for(var z in O)O[z].glReset=!0;F&&(this.current=F,F.rebind())},clear:function(){var F=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,F.currentProgram=null,F.setBlendMode(0,!0);var I=F.vaoExtension;I&&I.bindVertexArrayOES(null)},getRenderTarget:function(F){var I=this.renderTargets,L=3;if(F>this.maxDimension)return this.targetIndex=I.length-L,I[this.targetIndex];var D=(l(F,this.frameInc,0,!0)-1)*L;return this.targetIndex=D,I[D]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});o.exports=b}),32302:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92503),u=new a({initialize:function(h,n,l,c,s,d,m,p,g){c===void 0&&(c=1),s===void 0&&(s=0),d===void 0&&(d=!0),m===void 0&&(m=!1),p===void 0&&(p=!0),g===void 0&&(g=!0),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=s,this.autoClear=d,this.autoResize=!0,this.hasDepthBuffer=p,this.forceClamp=g,this.init(n,l),m?this.renderer.on(x.RESIZE,this.resize,this):this.autoResize=!1},init:function(r,h){var n=this.renderer;this.texture=n.createTextureFromSource(null,r,h,this.minFilter,this.forceClamp),this.framebuffer=n.createFramebuffer(r,h,this.texture,this.hasDepthBuffer),this.width=r,this.height=h},setAutoResize:function(r){return r&&!this.autoResize?(this.renderer.on(x.RESIZE,this.resize,this),this.autoResize=!0):!r&&this.autoResize&&(this.renderer.off(x.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(r,h){if(this.autoResize&&this.willResize(r,h)){var n=this.renderer;n.deleteFramebuffer(this.framebuffer),n.deleteTexture(this.texture),this.texture=n.createTextureFromSource(null,r,h,this.minFilter,this.forceClamp),this.framebuffer=n.createFramebuffer(r,h,this.texture,this.hasDepthBuffer),this.width=r,this.height=h}return this},willResize:function(r,h){return typeof r!="number"||typeof h!="number"?!1:(r=Math.round(r*this.scale),h=Math.round(h*this.scale),r=Math.max(r,1),h=Math.max(h,1),r!==this.width||h!==this.height)},bind:function(r,h,n){r===void 0&&(r=!1);var l=this.renderer;if(r&&l.flush(),h&&n&&this.resize(h,n),l.pushFramebuffer(this.framebuffer,!1,!1),r&&this.adjustViewport(),this.autoClear){var c=this.renderer.gl;c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT)}l.clearStencilMask()},adjustViewport:function(){var r=this.renderer.gl;r.viewport(0,0,this.width,this.height),r.disable(r.SCISSOR_TEST)},clear:function(r,h,n,l){var c=this.renderer,s=c.gl;c.pushFramebuffer(this.framebuffer),r!==void 0&&h!==void 0&&n!==void 0&&l!==void 0?(s.enable(s.SCISSOR_TEST),s.scissor(r,h,n,l)):s.disable(s.SCISSOR_TEST),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),c.popFramebuffer(),c.resetScissor()},unbind:function(r){r===void 0&&(r=!1);var h=this.renderer;return r&&h.flush(),h.popFramebuffer()},destroy:function(){var r=this.renderer;r.off(x.RESIZE,this.resize,this),r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});o.exports=u}),70554:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={getTintFromFloats:function(E,e,a,x){var u=(E*255|0)&255,r=(e*255|0)&255,h=(a*255|0)&255,n=(x*255|0)&255;return(n<<24|u<<16|r<<8|h)>>>0},getTintAppendFloatAlpha:function(E,e){var a=(e*255|0)&255;return(a<<24|E)>>>0},getTintAppendFloatAlphaAndSwap:function(E,e){var a=(E>>16|0)&255,x=(E>>8|0)&255,u=(E|0)&255,r=(e*255|0)&255;return(r<<24|u<<16|x<<8|a)>>>0},getFloatsFromUintRGB:function(E){var e=(E>>16|0)&255,a=(E>>8|0)&255,x=(E|0)&255;return[e/255,a/255,x/255]},checkShaderMax:function(E,e){var a=Math.min(16,E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?a:Math.min(a,e)},parseFragmentShaderMaxTextures:function(E,e){if(!E)return"";for(var a="",x=0;x<e;x++)x>0&&(a+=`
	else `),x<e-1&&(a+="if (outTexId < "+x+".5)"),a+=`
	{`,a+=`
		texture = texture2D(uMainSampler[`+x+"], outTexCoord);",a+=`
	}`;return E=E.replace(/%count%/gi,e.toString()),E.replace(/%forloop%/gi,a)},setGlowQuality:function(E,e,a,x){return a===void 0&&(a=e.config.glowFXQuality),x===void 0&&(x=e.config.glowFXDistance),E=E.replace(/__SIZE__/gi,(1/a/x).toFixed(7)),E=E.replace(/__DIST__/gi,x.toFixed(0)+".0"),E}}}),29100:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(62644),u=e(50792),r=e(77085),h=e(95540),n=e(37867),l=e(92503),c=e(32302),s=e(70554),d=e(38683),m=new a({Extends:u,initialize:function(g){u.call(this);var T=g.game,S=T.renderer,w=S.gl;this.name=h(g,"name","WebGLPipeline"),this.game=T,this.renderer=S,this.manager,this.gl=w,this.view=T.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=h(g,"topology",w.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=h(g,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=g,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=h(g,"resizeUniform","")},boot:function(){var p,g=this.gl,T=this.config,S=this.renderer;this.isPostFX||(this.projectionMatrix=new n().identity());var w=this.renderTargets,A=h(T,"renderTarget",!1);typeof A=="boolean"&&A&&(A=1);var M=S.width,R=S.height;if(typeof A=="number")for(p=0;p<A;p++)w.push(new c(S,M,R,1,0,!0));else if(Array.isArray(A))for(p=0;p<A.length;p++){var P=h(A[p],"scale",1),b=h(A[p],"minFilter",0),F=h(A[p],"autoClear",1),I=h(A[p],"autoResize",!1),L=h(A[p],"width",null),D=h(A[p],"height",L);L?w.push(new c(S,L,D,1,b,F,I)):w.push(new c(S,M,R,P,b,F,I))}w.length&&(this.currentRenderTarget=w[0]),this.setShadersFromConfig(T);var O=this.shaders,z=0;for(p=0;p<O.length;p++)O[p].vertexSize>z&&(z=O[p].vertexSize);var W=h(T,"batchSize",S.config.batchSize);this.vertexCapacity=W*6;var X=new ArrayBuffer(this.vertexCapacity*z);this.vertexData=X,this.bytes=new Uint8Array(X),this.vertexViewF32=new Float32Array(X),this.vertexViewU32=new Uint32Array(X);var _=h(T,"vertices",null);for(_?(this.vertexViewF32.set(_),this.vertexBuffer=S.createVertexBuffer(X,g.STATIC_DRAW)):this.vertexBuffer=S.createVertexBuffer(X.byteLength,g.DYNAMIC_DRAW),this.setVertexBuffer(),p=O.length-1;p>=0;p--)O[p].rebind();this.hasBooted=!0,S.on(l.RESIZE,this.resize,this),S.on(l.PRE_RENDER,this.onPreRender,this),S.on(l.RENDER,this.onRender,this),S.on(l.POST_RENDER,this.onPostRender,this),this.emit(r.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(p,g,T){var S=this.renderer;if(p!==this.currentShader||S.currentProgram!==this.currentShader.program){this.flush();var w=this.setVertexBuffer(T);w&&!g&&(g=!0),p.bind(g,!1),this.currentShader=p}return this},getShaderByName:function(p){for(var g=this.shaders,T=0;T<g.length;T++)if(g[T].name===p)return g[T]},setShadersFromConfig:function(p){var g,T=this.shaders,S=this.renderer;for(g=0;g<T.length;g++)T[g].destroy();var w="vertShader",A="fragShader",M="attributes",R=h(p,w,null),P=s.parseFragmentShaderMaxTextures(h(p,A,null),S.maxTextures),b=h(p,M,null),F=h(p,"shaders",[]),I=F.length;if(I===0)R&&P&&(this.shaders=[new d(this,"default",R,P,x(b))]);else{var L=[];for(g=0;g<I;g++){var D=F[g],O,z,W,X;if(typeof D=="string"?(O="default",z=R,W=s.parseFragmentShaderMaxTextures(D,S.maxTextures),X=b):(O=h(D,"name","default"),z=h(D,w,R),W=s.parseFragmentShaderMaxTextures(h(D,A,P),S.maxTextures),X=h(D,M,b)),O==="default"){var _=W.split(`
`),U=_[0].trim();U.indexOf("#define SHADER_NAME")>-1&&(O=U.substring(20))}z&&W&&L.push(new d(this,O,z,W,x(X)))}this.shaders=L}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(p){return this.currentBatch={start:this.vertexCount,count:0,texture:[p],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=p,this.batch.push(this.currentBatch),0},addTextureToBatch:function(p){var g=this.currentBatch;g&&(g.texture.push(p),g.unit++,g.maxUnit++)},pushBatch:function(p){if(!this.currentBatch||this.forceZero&&p!==this.currentTexture)return this.createBatch(p);if(p===this.currentTexture)return this.currentUnit;var g=this.currentBatch,T=g.texture.indexOf(p);return T===-1?g.texture.length===this.renderer.maxTextures?this.createBatch(p):(g.unit++,g.maxUnit++,g.texture.push(p),this.currentUnit=g.unit,this.currentTexture=p,g.unit):(this.currentUnit=T,this.currentTexture=p,T)},setGameObject:function(p,g){return g===void 0&&(g=p.frame),this.pushBatch(g.source.glTexture)},shouldFlush:function(p){return p===void 0&&(p=0),this.vertexCount+p>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(p,g){(p!==this.width||g!==this.height)&&this.flush(),this.width=p,this.height=g;for(var T=this.renderTargets,S=0;S<T.length;S++)T[S].resize(p,g);return this.setProjectionMatrix(p,g),this.resizeUniform&&this.set2f(this.resizeUniform,p,g),this.emit(r.RESIZE,p,g,this),this.onResize(p,g),this},setProjectionMatrix:function(p,g){var T=this.projectionMatrix;if(!T)return this;this.projectionWidth=p,this.projectionHeight=g,T.ortho(0,p,g,0,-1e3,1e3);for(var S=this.shaders,w="uProjectionMatrix",A=0;A<S.length;A++){var M=S[A];M.hasUniform(w)&&(M.resetUniform(w),M.setMatrix4fv(w,!1,T.val,M))}return this},flipProjectionMatrix:function(p){p===void 0&&(p=!0);var g=this.projectionMatrix;if(!g)return this;var T=this.projectionWidth,S=this.projectionHeight;p?g.ortho(0,T,0,S,-1e3,1e3):g.ortho(0,T,S,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,g.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var p=this.renderer.projectionWidth,g=this.renderer.projectionHeight;(this.projectionWidth!==p||this.projectionHeight!==g)&&this.setProjectionMatrix(p,g)}},bind:function(p){if(p===void 0&&(p=this.currentShader),this.glReset)return this.rebind(p);var g=!1,T=this.gl;return T.getParameter(T.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(T.bindBuffer(T.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,g=!0),p.bind(g),this.currentShader=p,this.activeTextures.length=0,this.emit(r.BIND,this,p),this.onActive(p),this},rebind:function(p){this.activeBuffer=null,this.setVertexBuffer();for(var g=this.shaders,T=g.length-1;T>=0;T--){var S=g[T].rebind();(!p||S===p)&&(this.currentShader=S)}return this.activeTextures.length=0,this.emit(r.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var p=this.shaders,g=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,g&&this.setVertexBuffer();for(var T=0;T<p.length;T++){var S=p[T];S.syncUniforms(),g&&S.rebind()}},setVertexBuffer:function(p){if(p===void 0&&(p=this.vertexBuffer),p!==this.activeBuffer){var g=this.gl;return this.gl.bindBuffer(g.ARRAY_BUFFER,p.webGLBuffer),this.activeBuffer=p,!0}return!1},preBatch:function(p){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(p),this},postBatch:function(p){return this.onDraw(this.currentRenderTarget),this.onPostBatch(p),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(p){if(p===void 0&&(p=!1),this.vertexCount>0){this.emit(r.BEFORE_FLUSH,this,p),this.onBeforeFlush(p);var g=this.gl,T=this.vertexCount,S=this.currentShader.vertexSize,w=this.topology;if(this.active){this.setVertexBuffer(),T===this.vertexCapacity?g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.DYNAMIC_DRAW):g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,T*S));var A,M,R,P=this.batch,b=this.activeTextures;if(this.forceZero)for(b[0]||g.activeTexture(g.TEXTURE0),A=0;A<P.length;A++)M=P[A],R=M.texture[0],b[0]!==R&&(g.bindTexture(g.TEXTURE_2D,R.webGLTexture),b[0]=R),g.drawArrays(w,M.start,M.count);else for(A=0;A<P.length;A++){M=P[A];for(var F=0;F<=M.maxUnit;F++)R=M.texture[F],b[F]!==R&&(g.activeTexture(g.TEXTURE0+F),g.bindTexture(g.TEXTURE_2D,R.webGLTexture),b[F]=R);g.drawArrays(w,M.start,M.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(r.AFTER_FLUSH,this,p),this.onAfterFlush(p)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(p,g,T,S,w,A,M){var R=this.vertexViewF32,P=this.vertexViewU32,b=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++b]=p,R[++b]=g,R[++b]=T,R[++b]=S,R[++b]=w,R[++b]=A,P[++b]=M,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(p,g,T,S,w,A,M,R,P,b,F,I,L,D,O,z,W,X,_,U){U===void 0&&(U=this.currentUnit);var G=!1;this.shouldFlush(6)&&(this.flush(),G=!0),this.currentBatch||(U=this.setTexture2D(_));var N=this.vertexViewF32,H=this.vertexViewU32,V=this.vertexCount*this.currentShader.vertexComponentCount-1;return N[++V]=g,N[++V]=T,N[++V]=b,N[++V]=F,N[++V]=U,N[++V]=X,H[++V]=D,N[++V]=S,N[++V]=w,N[++V]=b,N[++V]=L,N[++V]=U,N[++V]=X,H[++V]=z,N[++V]=A,N[++V]=M,N[++V]=I,N[++V]=L,N[++V]=U,N[++V]=X,H[++V]=W,N[++V]=g,N[++V]=T,N[++V]=b,N[++V]=F,N[++V]=U,N[++V]=X,H[++V]=D,N[++V]=A,N[++V]=M,N[++V]=I,N[++V]=L,N[++V]=U,N[++V]=X,H[++V]=W,N[++V]=R,N[++V]=P,N[++V]=I,N[++V]=F,N[++V]=U,N[++V]=X,H[++V]=O,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(p),G},batchTri:function(p,g,T,S,w,A,M,R,P,b,F,I,L,D,O,z,W){W===void 0&&(W=this.currentUnit);var X=!1;this.shouldFlush(3)&&(this.flush(),X=!0),this.currentBatch||(W=this.setTexture2D(z));var _=this.vertexViewF32,U=this.vertexViewU32,G=this.vertexCount*this.currentShader.vertexComponentCount-1;return _[++G]=g,_[++G]=T,_[++G]=R,_[++G]=P,_[++G]=W,_[++G]=O,U[++G]=I,_[++G]=S,_[++G]=w,_[++G]=R,_[++G]=F,_[++G]=W,_[++G]=O,U[++G]=L,_[++G]=A,_[++G]=M,_[++G]=b,_[++G]=F,_[++G]=W,_[++G]=O,U[++G]=D,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(p),X},drawFillRect:function(p,g,T,S,w,A,M,R){M===void 0&&(M=this.renderer.whiteTexture),R===void 0&&(R=!0),p=Math.floor(p),g=Math.floor(g);var P=Math.floor(p+T),b=Math.floor(g+S),F=this.setTexture2D(M),I=s.getTintAppendFloatAlphaAndSwap(w,A),L=0,D=0,O=1,z=1;R&&(D=1,z=0),this.batchQuad(null,p,g,p,b,P,b,P,g,L,D,O,z,I,I,I,I,0,M,F)},setTexture2D:function(p){return p===void 0&&(p=this.renderer.whiteTexture),this.pushBatch(p)},bindTexture:function(p,g){g===void 0&&(g=0);var T=this.gl;return T.activeTexture(T.TEXTURE0+g),T.bindTexture(T.TEXTURE_2D,p.webGLTexture),this},bindRenderTarget:function(p,g){return this.bindTexture(p.texture,g)},setTime:function(p,g){return this.set1f(p,this.game.loop.getDuration(),g),this},setBoolean:function(p,g,T){return T===void 0&&(T=this.currentShader),T.setBoolean(p,g),this},set1f:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set1f(p,g),this},set2f:function(p,g,T,S){return S===void 0&&(S=this.currentShader),S.set2f(p,g,T),this},set3f:function(p,g,T,S,w){return w===void 0&&(w=this.currentShader),w.set3f(p,g,T,S),this},set4f:function(p,g,T,S,w,A){return A===void 0&&(A=this.currentShader),A.set4f(p,g,T,S,w),this},set1fv:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set1fv(p,g),this},set2fv:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set2fv(p,g),this},set3fv:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set3fv(p,g),this},set4fv:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set4fv(p,g),this},set1iv:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set1iv(p,g),this},set2iv:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set2iv(p,g),this},set3iv:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set3iv(p,g),this},set4iv:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set4iv(p,g),this},set1i:function(p,g,T){return T===void 0&&(T=this.currentShader),T.set1i(p,g),this},set2i:function(p,g,T,S){return S===void 0&&(S=this.currentShader),S.set2i(p,g,T),this},set3i:function(p,g,T,S,w){return w===void 0&&(w=this.currentShader),w.set3i(p,g,T,S),this},set4i:function(p,g,T,S,w,A){return A===void 0&&(A=this.currentShader),A.set4i(p,g,T,S,w),this},setMatrix2fv:function(p,g,T,S){return S===void 0&&(S=this.currentShader),S.setMatrix2fv(p,g,T),this},setMatrix3fv:function(p,g,T,S){return S===void 0&&(S=this.currentShader),S.setMatrix3fv(p,g,T),this},setMatrix4fv:function(p,g,T,S){return S===void 0&&(S=this.currentShader),S.setMatrix4fv(p,g,T),this},destroy:function(){this.emit(r.DESTROY,this);var p,g=this.shaders;for(p=0;p<g.length;p++)g[p].destroy();var T=this.renderTargets;for(p=0;p<T.length;p++)T[p].destroy();var S=this.renderer;return S.deleteBuffer(this.vertexBuffer),S.off(l.RESIZE,this.resize,this),S.off(l.PRE_RENDER,this.onPreRender,this),S.off(l.RENDER,this.onRender,this),S.off(l.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});o.exports=m}),74797:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95428),x=e(72905),u=e(19715),r=e(83419),h=e(8054),n=e(50792),l=e(92503),c=e(50030),s=e(37867),d=e(29747),m=e(7530),p=e(32302),g=e(97480),T=e(69442),S=e(70554),w=e(88815),A=e(26128),M=e(1482),R=e(82751),P=e(84387),b=e(93567),F=e(57183),I=new r({Extends:n,initialize:function(D){n.call(this);var O=D.config,z={alpha:O.transparent,desynchronized:O.desynchronized,depth:!0,antialias:O.antialiasGL,premultipliedAlpha:O.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:O.failIfMajorPerformanceCaveat,powerPreference:O.powerPreference,preserveDrawingBuffer:O.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:O.clearBeforeRender,antialias:O.antialias,backgroundColor:O.backgroundColor,contextCreation:z,roundPixels:O.roundPixels,maxTextures:O.maxTextures,maxTextureSize:O.maxTextureSize,batchSize:O.batchSize,maxLights:O.maxLights,mipmapFilter:O.mipmapFilter},this.game=D,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=D.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=d,this.contextRestoredHandler=d,this.previousContextLostHandler=d,this.previousContextRestoredHandler=d,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(L){var D,O=this.game,z=this.canvas,W=L.backgroundColor;if(O.config.context?D=O.config.context:D=z.getContext("webgl",L.contextCreation)||z.getContext("experimental-webgl",L.contextCreation),!D||D.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=D,this.setExtensions(),this.setContextHandlers(),O.context=D;for(var X=0;X<=27;X++)this.blendModes.push({func:[D.ONE,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_ADD});this.blendModes[1].func=[D.ONE,D.DST_ALPHA],this.blendModes[2].func=[D.DST_COLOR,D.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[D.ONE,D.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[D.ZERO,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_REVERSE_SUBTRACT},this.glFormats=[D.BYTE,D.SHORT,D.UNSIGNED_BYTE,D.UNSIGNED_SHORT,D.FLOAT],this.glFuncMap={mat2:{func:D.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:D.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:D.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:D.uniform1f,length:1},"1fv":{func:D.uniform1fv,length:1},"1i":{func:D.uniform1i,length:1},"1iv":{func:D.uniform1iv,length:1},"2f":{func:D.uniform2f,length:2},"2fv":{func:D.uniform2fv,length:1},"2i":{func:D.uniform2i,length:2},"2iv":{func:D.uniform2iv,length:1},"3f":{func:D.uniform3f,length:3},"3fv":{func:D.uniform3fv,length:1},"3i":{func:D.uniform3i,length:3},"3iv":{func:D.uniform3iv,length:1},"4f":{func:D.uniform4f,length:4},"4fv":{func:D.uniform4fv,length:1},"4i":{func:D.uniform4i,length:4},"4iv":{func:D.uniform4iv,length:1}},(!L.maxTextures||L.maxTextures===-1)&&(L.maxTextures=D.getParameter(D.MAX_TEXTURE_IMAGE_UNITS)),L.maxTextureSize||(L.maxTextureSize=D.getParameter(D.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),D.disable(D.DEPTH_TEST),D.disable(D.CULL_FACE),D.enable(D.BLEND),D.clearColor(W.redGL,W.greenGL,W.blueGL,W.alphaGL),D.clear(D.COLOR_BUFFER_BIT);var _=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return _.indexOf(L.mipmapFilter)!==-1&&(this.mipmapFilter=D[L.mipmapFilter]),this.maxTextures=S.checkShaderMax(D,L.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new m(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=new s().identity(),O.textures.once(T.READY,this.boot,this),this},boot:function(){var L=this.game,D=this.pipelines,O=L.scale.baseSize,z=O.width,W=O.height;this.width=z,this.height=W,this.isBooted=!0,this.renderTarget=new p(this,z,W,1,0,!0,!0),this.maskTarget=new p(this,z,W,1,0,!0,!0),this.maskSource=new p(this,z,W,1,0,!0,!0);var X=L.config;D.boot(X.pipeline,X.defaultPipeline,X.autoMobilePipeline),this.blankTexture=L.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=L.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=L.textures.getFrame("__WHITE").glTexture;var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,null),_.enable(_.SCISSOR_TEST),L.scale.on(g.RESIZE,this.onResize,this),this.resize(z,W)},setExtensions:function(){var L=this.gl,D=L.getSupportedExtensions();this.supportedExtensions=D;var O="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(O)>-1?L.getExtension(O):null;var z="OES_vertex_array_object";this.vaoExtension=D.indexOf(z)>-1?L.getExtension(z):null},setContextHandlers:function(L,D){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof L=="function"?this.contextLostHandler=L.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof D=="function"?this.contextRestoredHandler=D.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(L){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(l.LOSE_WEBGL,this),L.preventDefault()},dispatchContextRestored:function(L){var D=this.gl;if(D.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(h.BlendModes.NORMAL),D.disable(D.BLEND),D.disable(D.DEPTH_TEST),D.enable(D.CULL_FACE),this.compression=this.getCompressedTextures();var O=function(z){z.createResource()};a(this.glTextureWrappers,O),a(this.glBufferWrappers,O),a(this.glFramebufferWrappers,O),a(this.glProgramWrappers,O),a(this.glAttribLocationWrappers,O),a(this.glUniformLocationWrappers,O),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(l.RESTORE_WEBGL,this),L.preventDefault()},createTemporaryTextures:function(){for(var L=this.gl,D=0;D<this.maxTextures;D++){var O=L.createTexture();L.activeTexture(L.TEXTURE0+D),L.bindTexture(L.TEXTURE_2D,O),L.texImage2D(L.TEXTURE_2D,0,L.RGBA,1,1,0,L.RGBA,L.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(D)}},captureFrame:function(L,D){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(L,D,O){},stopCapture:function(){},onCapture:function(L){},onResize:function(L,D){(D.width!==this.width||D.height!==this.height)&&this.resize(D.width,D.height)},beginCapture:function(L,D){L===void 0&&(L=this.width),D===void 0&&(D=this.height),this.renderTarget.bind(!0,L,D),this.setProjectionMatrix(L,D)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(L,D){var O=this.gl;return this.width=L,this.height=D,this.setProjectionMatrix(L,D),O.viewport(0,0,L,D),this.drawingBufferHeight=O.drawingBufferHeight,O.scissor(0,O.drawingBufferHeight-D,L,D),this.defaultScissor[2]=L,this.defaultScissor[3]=D,this.emit(l.RESIZE,L,D),this},getCompressedTextures:function(){var L="WEBGL_compressed_texture_",D="WEBKIT_"+L,O="EXT_texture_compression_",z=function(X,_){var U=X.getExtension(L+_)||X.getExtension(D+_)||X.getExtension(O+_);if(U){var G={};for(var N in U)G[U[N]]=N;return G}},W=this.gl;return{ETC:z(W,"etc"),ETC1:z(W,"etc1"),ATC:z(W,"atc"),ASTC:z(W,"astc"),BPTC:z(W,"bptc"),RGTC:z(W,"rgtc"),PVRTC:z(W,"pvrtc"),S3TC:z(W,"s3tc"),S3TCSRGB:z(W,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(L,D){var O=this.compression[L.toUpperCase()];if(D in O)return O[D]},supportsCompressedTexture:function(L,D){var O=this.compression[L.toUpperCase()];return O?D?D in O:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(L,D){return(L!==this.projectionWidth||D!==this.projectionHeight)&&(this.projectionWidth=L,this.projectionHeight=D,this.projectionMatrix.ortho(0,L,D,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(L){return this.supportedExtensions?this.supportedExtensions.indexOf(L):!1},getExtension:function(L){return this.hasExtension(L)?(L in this.extensions||(this.extensions[L]=this.gl.getExtension(L)),this.extensions[L]):null},flush:function(){this.pipelines.flush()},pushScissor:function(L,D,O,z,W){W===void 0&&(W=this.drawingBufferHeight);var X=this.scissorStack,_=[L,D,O,z];return X.push(_),this.setScissor(L,D,O,z,W),this.currentScissor=_,_},setScissor:function(L,D,O,z,W){W===void 0&&(W=this.drawingBufferHeight);var X=this.gl,_=this.currentScissor,U=O>0&&z>0;if(_&&U){var G=_[0],N=_[1],H=_[2],V=_[3];U=G!==L||N!==D||H!==O||V!==z}U&&(this.flush(),X.scissor(L,W-D-z,O,z))},resetScissor:function(){var L=this.gl;L.enable(L.SCISSOR_TEST);var D=this.currentScissor;if(D){var O=D[0],z=D[1],W=D[2],X=D[3];W>0&&X>0&&L.scissor(O,this.drawingBufferHeight-z-X,W,X)}},popScissor:function(){var L=this.scissorStack;L.pop();var D=L[L.length-1];D&&this.setScissor(D[0],D[1],D[2],D[3]),this.currentScissor=D},hasActiveStencilMask:function(){var L=this.currentMask.mask,D=this.currentCameraMask.mask;return L&&L.isStencil||D&&D.isStencil},resetViewport:function(){var L=this.gl;L.viewport(0,0,this.width,this.height),this.drawingBufferHeight=L.drawingBufferHeight},setBlendMode:function(L,D){D===void 0&&(D=!1);var O=this.gl,z=this.blendModes[L];return D||L!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==L?(this.flush(),O.enable(O.BLEND),O.blendEquation(z.equation),z.func.length>2?O.blendFuncSeparate(z.func[0],z.func[1],z.func[2],z.func[3]):O.blendFunc(z.func[0],z.func[1]),this.currentBlendMode=L,!0):!1},addBlendMode:function(L,D){var O=this.blendModes.push({func:L,equation:D});return O-1},updateBlendMode:function(L,D,O){return this.blendModes[L]&&(this.blendModes[L].func=D,O&&(this.blendModes[L].equation=O)),this},removeBlendMode:function(L){return L>17&&this.blendModes[L]&&this.blendModes.splice(L,1),this},pushFramebuffer:function(L,D,O,z,W){return L===this.currentFramebuffer?this:(this.fboStack.push(L),this.setFramebuffer(L,D,O,z,W))},setFramebuffer:function(L,D,O,z,W){if(D===void 0&&(D=!1),O===void 0&&(O=!0),z===void 0&&(z=null),W===void 0&&(W=!1),L===this.currentFramebuffer)return this;var X=this.gl,_=this.width,U=this.height;return L&&L.renderTexture&&O?(_=L.renderTexture.width,U=L.renderTexture.height):this.flush(),L?X.bindFramebuffer(X.FRAMEBUFFER,L.webGLFramebuffer):X.bindFramebuffer(X.FRAMEBUFFER,null),O&&X.viewport(0,0,_,U),z&&X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,z.webGLTexture,0),W&&(X.clearColor(0,0,0,0),X.clear(X.COLOR_BUFFER_BIT)),D&&(L?(this.drawingBufferHeight=U,this.pushScissor(0,0,_,U)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=L,this},popFramebuffer:function(L,D){L===void 0&&(L=!1),D===void 0&&(D=!0);var O=this.fboStack;O.pop();var z=O[O.length-1];return z||(z=null),this.setFramebuffer(z,L,D),z},restoreFramebuffer:function(L,D){L===void 0&&(L=!1),D===void 0&&(D=!0);var O=this.fboStack,z=O[O.length-1];z||(z=null),this.currentFramebuffer=null,this.setFramebuffer(z,L,D)},setProgram:function(L){return L!==this.currentProgram?(this.flush(),this.gl.useProgram(L.webGLProgram),this.currentProgram=L,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(L,D,O,z,W){W===void 0&&(W=!1);var X=this.gl,_=X.NEAREST,U=X.NEAREST,G=X.CLAMP_TO_EDGE,N=null;D=L?L.width:D,O=L?L.height:O;var H=c(D,O);if(H&&!W&&(G=X.REPEAT),z===h.ScaleModes.LINEAR&&this.config.antialias){var V=L&&L.compressed,$=!V&&H||V&&L.mipmaps.length>1;_=this.mipmapFilter&&$?this.mipmapFilter:X.LINEAR,U=X.LINEAR}return!L&&typeof D=="number"&&typeof O=="number"?N=this.createTexture2D(0,_,U,G,G,X.RGBA,null,D,O):N=this.createTexture2D(0,_,U,G,G,X.RGBA,L),N},createTexture2D:function(L,D,O,z,W,X,_,U,G,N,H,V){typeof U!="number"&&(U=_?_.width:1),typeof G!="number"&&(G=_?_.height:1);var $=new R(this.gl,L,D,O,z,W,X,_,U,G,N,H,V);return this.glTextureWrappers.push($),$},createFramebuffer:function(L,D,O,z){this.currentFramebuffer=null;var W=new P(this.gl,L,D,O,z);return this.glFramebufferWrappers.push(W),W},beginBitmapMask:function(L,D){var O=this.gl;O&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==L&&(this.currentMask.mask=L,this.currentMask.camera=D))},drawBitmapMask:function(L,D,O){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),L.renderWebGL(this,L,D),this.maskSource.unbind(!0),this.maskTarget.unbind();var z=this.gl,W=this.getCurrentStencilMask();W?(z.enable(z.STENCIL_TEST),W.mask.applyStencil(this,W.camera,!0)):this.currentMask.mask=null,this.pipelines.set(O),z.activeTexture(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,this.maskTarget.texture.webGLTexture),z.activeTexture(z.TEXTURE1),z.bindTexture(z.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(L,D){var O=new M(this.gl,L,D);return this.glProgramWrappers.push(O),O},createVertexBuffer:function(L,D){var O=this.gl,z=new A(O,L,O.ARRAY_BUFFER,D);return this.glBufferWrappers.push(z),z},createAttribLocation:function(L,D){var O=new b(this.gl,L,D);return this.glAttribLocationWrappers.push(O),O},createUniformLocation:function(L,D){var O=new F(this.gl,L,D);return this.glUniformLocationWrappers.push(O),O},createIndexBuffer:function(L,D){var O=this.gl,z=new A(O,L,O.ELEMENT_ARRAY_BUFFER,D);return this.glBufferWrappers.push(z),z},deleteTexture:function(L){if(L)return x(this.glTextureWrappers,L),L.destroy(),this},deleteFramebuffer:function(L){return L?(x(this.fboStack,L),x(this.glFramebufferWrappers,L),L.destroy(),this):this},deleteProgram:function(L){return L&&(x(this.glProgramWrappers,L),L.destroy()),this},deleteAttribLocation:function(L){return L&&(x(this.glAttribLocationWrappers,L),L.destroy()),this},deleteUniformLocation:function(L){return L&&(x(this.glUniformLocationWrappers,L),L.destroy()),this},deleteBuffer:function(L){return L?(x(this.glBufferWrappers,L),L.destroy(),this):this},preRenderCamera:function(L){var D=L.x,O=L.y,z=L.width,W=L.height,X=L.backgroundColor;if(L.emit(u.PRE_RENDER,L),this.pipelines.preBatchCamera(L),this.pushScissor(D,O,z,W),L.mask&&(this.currentCameraMask.mask=L.mask,this.currentCameraMask.camera=L._maskCamera,L.mask.preRenderWebGL(this,L,L._maskCamera)),X.alphaGL>0){var _=this.pipelines.setMulti();_.drawFillRect(D,O,z,W,S.getTintFromFloats(X.blueGL,X.greenGL,X.redGL,1),X.alphaGL)}},getCurrentStencilMask:function(){var L=null,D=this.maskStack,O=this.currentCameraMask;return D.length>0?L=D[D.length-1]:O.mask&&O.mask.isStencil&&(L=O),L},postRenderCamera:function(L){var D=L.flashEffect,O=L.fadeEffect;if(D.isRunning||O.isRunning||O.isComplete){var z=this.pipelines.setMulti();D.postRenderWebGL(z,S.getTintFromFloats),O.postRenderWebGL(z,S.getTintFromFloats)}L.dirty=!1,this.popScissor(),L.mask&&(this.currentCameraMask.mask=null,L.mask.postRenderWebGL(this,L._maskCamera)),this.pipelines.postBatchCamera(L),L.emit(u.POST_RENDER,L)},preRender:function(){if(!this.contextLost){var L=this.gl;if(L.bindFramebuffer(L.FRAMEBUFFER,null),this.emit(l.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var D=this.config.backgroundColor;L.clearColor(D.redGL,D.greenGL,D.blueGL,D.alphaGL),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)}L.enable(L.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&L.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(l.PRE_RENDER)}},render:function(L,D,O){if(!this.contextLost){var z=D.length;if(this.emit(l.RENDER,L,O),this.preRenderCamera(O),z===0){this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(O);return}this.currentType="";for(var W=this.currentMask,X=0;X<z;X++){this.finalType=X===z-1;var _=D[X],U=_.mask;W=this.currentMask,W.mask&&W.mask!==U&&W.mask.postRenderWebGL(this,W.camera),U&&W.mask!==U&&U.preRenderWebGL(this,_,O),_.blendMode!==this.currentBlendMode&&this.setBlendMode(_.blendMode);var G=_.type;G!==this.currentType&&(this.newType=!0,this.currentType=G),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=D[X+1].type===this.currentType,_.renderWebGL(this,_,O),this.newType=!1}W=this.currentMask,W.mask&&W.mask.postRenderWebGL(this,W.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(O)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(l.POST_RENDER);var L=this.snapshotState;L.callback&&(w(this.gl,L),L.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var L=this.gl,D=this.getCurrentStencilMask();if(D){var O=D.mask;L.enable(L.STENCIL_TEST),O.invertAlpha?L.stencilFunc(L.NOTEQUAL,O.level,255):L.stencilFunc(L.EQUAL,O.level,255)}},snapshot:function(L,D,O){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,L,D,O)},snapshotArea:function(L,D,O,z,W,X,_){var U=this.snapshotState;return U.callback=W,U.type=X,U.encoder=_,U.getPixel=!1,U.x=L,U.y=D,U.width=O,U.height=z,this},snapshotPixel:function(L,D,O){return this.snapshotArea(L,D,1,1,O),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(L,D,O,z,W,X,_,U,G,N,H){W===void 0&&(W=!1),X===void 0&&(X=0),_===void 0&&(_=0),U===void 0&&(U=D),G===void 0&&(G=O),N==="pixel"&&(W=!0,N="image/png");var V=this.currentFramebuffer;this.snapshotArea(X,_,U,G,z,N,H);var $=this.snapshotState;return $.getPixel=W,$.isFramebuffer=!0,$.bufferWidth=D,$.bufferHeight=O,$.width=Math.min($.width,D),$.height=Math.min($.height,O),this.setFramebuffer(L),w(this.gl,$),this.setFramebuffer(V),$.callback=null,$.isFramebuffer=!1,this},canvasToTexture:function(L,D,O,z){O===void 0&&(O=!1),z===void 0&&(z=!1);var W=this.gl,X=W.NEAREST,_=W.NEAREST,U=L.width,G=L.height,N=W.CLAMP_TO_EDGE,H=c(U,G);return!O&&H&&(N=W.REPEAT),this.config.antialias&&(X=H&&this.mipmapFilter?this.mipmapFilter:W.LINEAR,_=W.LINEAR),D?(D.update(L,U,G,z,N,N,X,_,D.format),D):this.createTexture2D(0,X,_,N,N,W.RGBA,L,U,G,!0,!1,z)},createCanvasTexture:function(L,D,O){return D===void 0&&(D=!1),O===void 0&&(O=!1),this.canvasToTexture(L,null,D,O)},updateCanvasTexture:function(L,D,O,z){return O===void 0&&(O=!1),z===void 0&&(z=!1),this.canvasToTexture(L,D,z,O)},videoToTexture:function(L,D,O,z){O===void 0&&(O=!1),z===void 0&&(z=!1);var W=this.gl,X=W.NEAREST,_=W.NEAREST,U=L.videoWidth,G=L.videoHeight,N=W.CLAMP_TO_EDGE,H=c(U,G);return!O&&H&&(N=W.REPEAT),this.config.antialias&&(X=H&&this.mipmapFilter?this.mipmapFilter:W.LINEAR,_=W.LINEAR),D?(D.update(L,U,G,z,N,N,X,_,D.format),D):this.createTexture2D(0,X,_,N,N,W.RGBA,L,U,G,!0,!0,z)},createVideoTexture:function(L,D,O){return D===void 0&&(D=!1),O===void 0&&(O=!1),this.videoToTexture(L,null,D,O)},updateVideoTexture:function(L,D,O,z){return O===void 0&&(O=!1),z===void 0&&(z=!1),this.videoToTexture(L,D,z,O)},createUint8ArrayTexture:function(L,D,O){var z=this.gl,W=z.NEAREST,X=z.NEAREST,_=z.CLAMP_TO_EDGE,U=c(D,O);return U&&(_=z.REPEAT),this.createTexture2D(0,W,X,_,_,z.RGBA,L,D,O)},setTextureFilter:function(L,D){var O=this.gl,z=D===0?O.LINEAR:O.NEAREST;O.activeTexture(O.TEXTURE0);var W=O.getParameter(O.TEXTURE_BINDING_2D);return O.bindTexture(O.TEXTURE_2D,L.webGLTexture),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,z),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,z),L.minFilter=z,L.magFilter=z,W&&O.bindTexture(O.TEXTURE_2D,W),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var L=function(D){D.destroy()};a(this.glAttribLocationWrappers,L),a(this.glBufferWrappers,L),a(this.glFramebufferWrappers,L),a(this.glProgramWrappers,L),a(this.glTextureWrappers,L),a(this.glUniformLocationWrappers,L),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});o.exports=I}),38683:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95428),u=e(95540),r=e(14500),h=new a({initialize:function(l,c,s,d,m){this.pipeline=l,this.name=c,this.renderer=l.renderer,this.gl=this.renderer.gl,this.fragSrc=d,this.vertSrc=s,this.program=this.renderer.createProgram(s,d),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(m),this.createUniforms()},createAttributes:function(n){var l=0,c=0,s=[];this.vertexComponentCount=0;for(var d=0;d<n.length;d++){var m=n[d],p=m.name,g=u(m,"size",1),T=u(m,"type",r.FLOAT),S=T.enum,w=T.size,A=!!m.normalized;s.push({name:p,size:g,type:S,normalized:A,offset:c,enabled:!1,location:-1}),w===4?l+=g:l++,c+=g*w}this.vertexSize=c,this.vertexComponentCount=l,this.attributes=s},bind:function(n,l){return n===void 0&&(n=!1),l===void 0&&(l=!1),l&&this.pipeline.flush(),this.renderer.setProgram(this.program),n&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(n){n===void 0&&(n=!1);for(var l=this.gl,c=this.renderer,s=this.vertexSize,d=this.attributes,m=this.program,p=0;p<d.length;p++){var g=d[p],T=g.size,S=g.type,w=g.offset,A=g.enabled,M=g.location,R=!!g.normalized;if(n){M!==-1&&c.deleteAttribLocation(M);var P=this.renderer.createAttribLocation(m,g.name);P.webGLAttribLocation>=0?(l.enableVertexAttribArray(P.webGLAttribLocation),l.vertexAttribPointer(P.webGLAttribLocation,T,S,R,s,w),g.enabled=!0,g.location=P):P.webGLAttribLocation!==-1&&l.disableVertexAttribArray(P.webGLAttribLocation)}else A?l.vertexAttribPointer(M.webGLAttribLocation,T,S,R,s,w):!A&&M!==-1&&M.webGLAttribLocation>-1&&(l.disableVertexAttribArray(M.webGLAttribLocation),g.location=-1)}return this},createUniforms:function(){var n=this.gl,l=this.program,c=this.uniforms,s,d,m,p=n.getProgramParameter(l.webGLProgram,n.ACTIVE_UNIFORMS);for(s=0;s<p;s++){var g=n.getActiveUniform(l.webGLProgram,s);if(g){d=g.name,m=this.renderer.createUniformLocation(l,d),m!==null&&(c[d]={name:d,location:m,setter:null,value1:null,value2:null,value3:null,value4:null});var T=d.indexOf("[");T>0&&(d=d.substr(0,T),c.hasOwnProperty(d)||(m=this.renderer.createUniformLocation(l,d),m!==null&&(c[d]={name:d,location:m,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var n=this.gl;this.renderer.setProgram(this.program);for(var l in this.uniforms){var c=this.uniforms[l];c.setter&&c.setter.call(n,c.location.webGLUniformLocation,c.value1,c.value2,c.value3,c.value4)}},hasUniform:function(n){return this.uniforms.hasOwnProperty(n)},resetUniform:function(n){var l=this.uniforms[n];return l&&(l.value1=null,l.value2=null,l.value3=null,l.value4=null),this},setUniform1:function(n,l,c,s){var d=this.uniforms[l];return d?((s||d.value1!==c)&&(d.setter||(d.setter=n),d.value1=c,this.renderer.setProgram(this.program),n.call(this.gl,d.location.webGLUniformLocation,c),this.pipeline.currentShader=this),this):this},setUniform2:function(n,l,c,s,d){var m=this.uniforms[l];return m?((d||m.value1!==c||m.value2!==s)&&(m.setter||(m.setter=n),m.value1=c,m.value2=s,this.renderer.setProgram(this.program),n.call(this.gl,m.location.webGLUniformLocation,c,s),this.pipeline.currentShader=this),this):this},setUniform3:function(n,l,c,s,d,m){var p=this.uniforms[l];return p?((m||p.value1!==c||p.value2!==s||p.value3!==d)&&(p.setter||(p.setter=n),p.value1=c,p.value2=s,p.value3=d,this.renderer.setProgram(this.program),n.call(this.gl,p.location.webGLUniformLocation,c,s,d),this.pipeline.currentShader=this),this):this},setUniform4:function(n,l,c,s,d,m,p){var g=this.uniforms[l];return g?((p||g.value1!==c||g.value2!==s||g.value3!==d||g.value4!==m)&&(g.setter||(g.setter=n),g.value1=c,g.value2=s,g.value3=d,g.value4=m,this.renderer.setProgram(this.program),n.call(this.gl,g.location.webGLUniformLocation,c,s,d,m),this.pipeline.currentShader=this),this):this},setBoolean:function(n,l){return this.setUniform1(this.gl.uniform1i,n,Number(l))},set1f:function(n,l){return this.setUniform1(this.gl.uniform1f,n,l)},set2f:function(n,l,c){return this.setUniform2(this.gl.uniform2f,n,l,c)},set3f:function(n,l,c,s){return this.setUniform3(this.gl.uniform3f,n,l,c,s)},set4f:function(n,l,c,s,d){return this.setUniform4(this.gl.uniform4f,n,l,c,s,d)},set1fv:function(n,l){return this.setUniform1(this.gl.uniform1fv,n,l,!0)},set2fv:function(n,l){return this.setUniform1(this.gl.uniform2fv,n,l,!0)},set3fv:function(n,l){return this.setUniform1(this.gl.uniform3fv,n,l,!0)},set4fv:function(n,l){return this.setUniform1(this.gl.uniform4fv,n,l,!0)},set1iv:function(n,l){return this.setUniform1(this.gl.uniform1iv,n,l,!0)},set2iv:function(n,l){return this.setUniform1(this.gl.uniform2iv,n,l,!0)},set3iv:function(n,l){return this.setUniform1(this.gl.uniform3iv,n,l,!0)},set4iv:function(n,l){return this.setUniform1(this.gl.uniform4iv,n,l,!0)},set1i:function(n,l){return this.setUniform1(this.gl.uniform1i,n,l)},set2i:function(n,l,c){return this.setUniform2(this.gl.uniform2i,n,l,c)},set3i:function(n,l,c,s){return this.setUniform3(this.gl.uniform3i,n,l,c,s)},set4i:function(n,l,c,s,d){return this.setUniform4(this.gl.uniform4i,n,l,c,s,d)},setMatrix2fv:function(n,l,c){return this.setUniform2(this.gl.uniformMatrix2fv,n,l,c,!0)},setMatrix3fv:function(n,l,c){return this.setUniform2(this.gl.uniformMatrix3fv,n,l,c,!0)},setMatrix4fv:function(n,l,c){return this.setUniform2(this.gl.uniformMatrix4fv,n,l,c,!0)},createProgram:function(n,l){return n===void 0&&(n=this.vertSrc),l===void 0&&(l=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=n,this.fragSrc=l,this.program=this.renderer.createProgram(n,l),this.createUniforms(),this.rebind()},destroy:function(){var n=this.renderer;x(this.uniforms,function(l){n.deleteUniformLocation(l.location)}),this.uniforms=null,x(this.attributes,function(l){n.deleteAttribLocation(l.location)}),this.attributes=null,n.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});o.exports=h}),14500:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};o.exports=E}),4159:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14500),x=e(79291),u={PipelineManager:e(7530),Pipelines:e(96615),RenderTarget:e(32302),Utils:e(70554),WebGLPipeline:e(29100),WebGLRenderer:e(74797),WebGLShader:e(38683),Wrappers:e(9503)};u=x(!1,u,a),o.exports=u}),31302:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=e(78908),r=e(85191),h=e(14500),n=e(29100),l=new a({Extends:n,initialize:function(s){s.fragShader=x(s,"fragShader",u),s.vertShader=x(s,"vertShader",r),s.batchSize=x(s,"batchSize",1),s.vertices=x(s,"vertices",[-1,1,-1,-7,7,1]),s.attributes=x(s,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),n.call(this,s)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,s){n.prototype.resize.call(this,c,s),this.set2f("uResolution",c,s)},beginMask:function(c,s,d){this.renderer.beginBitmapMask(c,d)},endMask:function(c,s,d){var m=this.gl,p=this.renderer,g=c.bitmapMask;g&&m&&(p.drawBitmapMask(g,s,this),d&&this.set2f("uResolution",d.width,d.height),this.set1i("uInvertMaskAlpha",c.invertAlpha),m.drawArrays(this.topology,0,3),d&&this.set2f("uResolution",this.width,this.height),m.bindTexture(m.TEXTURE_2D,null))}});o.exports=l}),92651:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(58918),u=e(14811),r=e(95540),h=e(43558),n=e(89350),l=e(70554),c=new a({Extends:h,initialize:function(d){d.shaders=[l.setGlowQuality(n.FXGlowFrag,d.game),n.FXShadowFrag,n.FXPixelateFrag,n.FXVignetteFrag,n.FXShineFrag,n.FXBlurLowFrag,n.FXBlurMedFrag,n.FXBlurHighFrag,n.FXGradientFrag,n.FXBloomFrag,n.ColorMatrixFrag,n.FXCircleFrag,n.FXBarrelFrag,n.FXDisplacementFrag,n.FXWipeFrag,n.FXBokehFrag],h.call(this,d);var m=this.game;this.glow=new x.Glow(m),this.shadow=new x.Shadow(m),this.pixelate=new x.Pixelate(m),this.vignette=new x.Vignette(m),this.shine=new x.Shine(m),this.gradient=new x.Gradient(m),this.circle=new x.Circle(m),this.barrel=new x.Barrel(m),this.wipe=new x.Wipe(m),this.bokeh=new x.Bokeh(m);var p=[];p[u.GLOW]=this.onGlow,p[u.SHADOW]=this.onShadow,p[u.PIXELATE]=this.onPixelate,p[u.VIGNETTE]=this.onVignette,p[u.SHINE]=this.onShine,p[u.BLUR]=this.onBlur,p[u.GRADIENT]=this.onGradient,p[u.BLOOM]=this.onBloom,p[u.COLOR_MATRIX]=this.onColorMatrix,p[u.CIRCLE]=this.onCircle,p[u.BARREL]=this.onBarrel,p[u.DISPLACEMENT]=this.onDisplacement,p[u.WIPE]=this.onWipe,p[u.BOKEH]=this.onBokeh,this.fxHandlers=p,this.source,this.target,this.swap},onDraw:function(s,d,m){this.source=s,this.target=d,this.swap=m;var p=s.width,g=s.height,T=this.tempSprite,S=this.fxHandlers;if(T&&T.preFX)for(var w=T.preFX.list,A=0;A<w.length;A++){var M=w[A];M.active&&S[M.type].call(this,M,p,g)}this.drawToGame(this.source)},runDraw:function(){var s=this.source,d=this.target;this.copy(s,d),this.source=d,this.target=s},onGlow:function(s,d,m){var p=this.shaders[u.GLOW];this.setShader(p),this.glow.onPreRender(s,p,d,m),this.runDraw()},onShadow:function(s){var d=this.shaders[u.SHADOW];this.setShader(d),this.shadow.onPreRender(s,d),this.runDraw()},onPixelate:function(s,d,m){var p=this.shaders[u.PIXELATE];this.setShader(p),this.pixelate.onPreRender(s,p,d,m),this.runDraw()},onVignette:function(s){var d=this.shaders[u.VIGNETTE];this.setShader(d),this.vignette.onPreRender(s,d),this.runDraw()},onShine:function(s,d,m){var p=this.shaders[u.SHINE];this.setShader(p),this.shine.onPreRender(s,p,d,m),this.runDraw()},onBlur:function(s,d,m){var p=r(s,"quality"),g=this.shaders[u.BLUR+p];this.setShader(g),this.set1i("uMainSampler",0),this.set2f("resolution",d,m),this.set1f("strength",r(s,"strength")),this.set3fv("color",r(s,"glcolor"));for(var T=r(s,"x"),S=r(s,"y"),w=r(s,"steps"),A=0;A<w;A++)this.set2f("offset",T,0),this.runDraw(),this.set2f("offset",0,S),this.runDraw()},onGradient:function(s){var d=this.shaders[u.GRADIENT];this.setShader(d),this.gradient.onPreRender(s,d),this.runDraw()},onBloom:function(s,d,m){var p=this.shaders[u.BLOOM];this.copySprite(this.source,this.swap),this.setShader(p),this.set1i("uMainSampler",0),this.set1f("strength",r(s,"blurStrength")),this.set3fv("color",r(s,"glcolor"));for(var g=2/d*r(s,"offsetX"),T=2/m*r(s,"offsetY"),S=r(s,"steps"),w=0;w<S;w++)this.set2f("offset",g,0),this.runDraw(),this.set2f("offset",0,T),this.runDraw();this.blendFrames(this.swap,this.source,this.target,r(s,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(s){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",s.getData()),this.set1f("uAlpha",s.alpha),this.runDraw()},onCircle:function(s,d,m){var p=this.shaders[u.CIRCLE];this.setShader(p),this.circle.onPreRender(s,p,d,m),this.runDraw()},onBarrel:function(s){var d=this.shaders[u.BARREL];this.setShader(d),this.barrel.onPreRender(s,d),this.runDraw()},onDisplacement:function(s){this.setShader(this.shaders[u.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",s.x,s.y),this.bindTexture(s.glTexture,1),this.runDraw()},onWipe:function(s){var d=this.shaders[u.WIPE];this.setShader(d),this.wipe.onPreRender(s,d),this.runDraw()},onBokeh:function(s,d,m){var p=this.shaders[u.BOKEH];this.setShader(p),this.bokeh.onPreRender(s,p,d,m),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,h.prototype.destroy.call(this),this}});o.exports=c}),96569:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=e(31063),r=e(57516),h=e(61340),n=e(26099),l=e(29100),c=new a({Extends:r,initialize:function(d){var m=x(d,"fragShader",u);d.fragShader=m.replace("%LIGHT_COUNT%",d.game.renderer.config.maxLights),r.call(this,d),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new n,this._tempMatrix=new h,this._tempMatrix2=new h},boot:function(){l.prototype.boot.call(this)},onRender:function(s,d){var m=s.sys.lights;if(this.lightsActive=!1,!(!m||!m.active)){var p=m.getLights(d),g=p.length;this.lightsActive=!0;var T,S=this.renderer,w=S.height,A=d.matrix,M=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",d.x,d.y,d.rotation,d.zoom),this.set3f("uAmbientLightColor",m.ambientColor.r,m.ambientColor.g,m.ambientColor.b),this.set1i("uLightCount",g),T=0;T<g;T++){var R=p[T].light,P=R.color,b="uLights["+T+"].";A.transformPoint(R.x,R.y,M),this.set2f(b+"position",M.x-d.scrollX*R.scrollFactorX*d.zoom,w-(M.y-d.scrollY*R.scrollFactorY*d.zoom)),this.set3f(b+"color",P.r,P.g,P.b),this.set1f(b+"intensity",R.intensity),this.set1f(b+"radius",R.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(s){if(s!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var d=this.inverseRotationMatrix;if(s){var m=-s,p=Math.cos(m),g=Math.sin(m);d[1]=g,d[3]=-g,d[0]=d[4]=p}else d[0]=d[4]=1,d[1]=d[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,d),this.currentNormalMapRotation=s}},setTexture2D:function(s,d){var m=this.renderer;s===void 0&&(s=m.whiteTexture);var p=this.getNormalMap(d);this.isNewNormalMap(s,p)&&(this.flush(),this.createBatch(s),this.addTextureToBatch(p),this.currentNormalMap=p);var g=0;if(d&&d.parentContainer){var T=d.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);g=T.rotationNormalized}else d&&(g=d.rotation);return this.currentBatch===null&&(this.createBatch(s),this.addTextureToBatch(p)),this.setNormalMapRotation(g),0},setGameObject:function(s,d){d===void 0&&(d=s.frame);var m=d.glTexture,p=this.getNormalMap(s);if(this.isNewNormalMap(m,p)&&(this.flush(),this.createBatch(m),this.addTextureToBatch(p),this.currentNormalMap=p),s.parentContainer){var g=s.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(g.rotationNormalized)}else this.setNormalMapRotation(s.rotation);return this.currentBatch===null&&(this.createBatch(m),this.addTextureToBatch(p)),0},isNewNormalMap:function(s,d){return this.currentTexture!==s||this.currentNormalMap!==d},getNormalMap:function(s){var d;if(s)s.displayTexture?d=s.displayTexture.dataSource[s.displayFrame.sourceIndex]:s.texture?d=s.texture.dataSource[s.frame.sourceIndex]:s.tileset&&(Array.isArray(s.tileset)?d=s.tileset[0].image.dataSource[0]:d=s.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return d?d.glTexture:this.renderer.normalTexture},batchSprite:function(s,d,m){this.lightsActive&&r.prototype.batchSprite.call(this,s,d,m)},batchTexture:function(s,d,m,p,g,T,S,w,A,M,R,P,b,F,I,L,D,O,z,W,X,_,U,G,N,H,V,$,j,k,Q,et){this.lightsActive&&r.prototype.batchTexture.call(this,s,d,m,p,g,T,S,w,A,M,R,P,b,F,I,L,D,O,z,W,X,_,U,G,N,H,V,$,j,k,Q,et)},batchTextureFrame:function(s,d,m,p,g,T,S){this.lightsActive&&r.prototype.batchTextureFrame.call(this,s,d,m,p,g,T,S)}});o.exports=c}),56527:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=e(57516),r=e(45561),h=e(60722),n=e(14500),l=e(29100),c=new a({Extends:u,initialize:function(d){d.fragShader=x(d,"fragShader",r),d.vertShader=x(d,"vertShader",h),d.attributes=x(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),d.forceZero=!0,d.resizeUniform="uResolution",u.call(this,d)},boot:function(){l.prototype.boot.call(this);var s=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",s.width,s.height)}});o.exports=c}),57516:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(94811),u=e(95540),r=e(98840),h=e(44667),n=e(61340),l=e(70554),c=e(14500),s=e(29100),d=new a({Extends:s,initialize:function(p){var g=p.game.renderer,T=u(p,"fragShader",r);p.fragShader=l.parseFragmentShaderMaxTextures(T,g.maxTextures),p.vertShader=u(p,"vertShader",h),p.attributes=u(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),p.resizeUniform="uResolution",s.call(this,p),this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){s.prototype.boot.call(this);var m=this.renderer;this.set1iv("uMainSampler",m.textureIndexes),this.set2f("uResolution",m.width,m.height)},batchSprite:function(m,p,g){this.manager.set(this,m);var T=this._tempMatrix1,S=this._tempMatrix2,w=this._tempMatrix3,A=m.frame,M=A.glTexture,R=A.u0,P=A.v0,b=A.u1,F=A.v1,I=A.x,L=A.y,D=A.cutWidth,O=A.cutHeight,z=A.customPivot,W=m.displayOriginX,X=m.displayOriginY,_=-W+I,U=-X+L;if(m.isCropped){var G=m._crop;(G.flipX!==m.flipX||G.flipY!==m.flipY)&&A.updateCropUVs(G,m.flipX,m.flipY),R=G.u0,P=G.v0,b=G.u1,F=G.v1,D=G.width,O=G.height,I=G.x,L=G.y,_=-W+I,U=-X+L}var N=1,H=1;m.flipX&&(z||(_+=-A.realWidth+W*2),N=-1),m.flipY&&(z||(U+=-A.realHeight+X*2),H=-1);var V=m.x,$=m.y;p.roundPixels&&(V=Math.floor(V),$=Math.floor($)),S.applyITRS(V,$,m.rotation,m.scaleX*N,m.scaleY*H),T.copyFrom(p.matrix),g?(T.multiplyWithOffset(g,-p.scrollX*m.scrollFactorX,-p.scrollY*m.scrollFactorY),S.e=V,S.f=$):(S.e-=p.scrollX*m.scrollFactorX,S.f-=p.scrollY*m.scrollFactorY),T.multiply(S,w);var j=w.setQuad(_,U,_+D,U+O,p.renderRoundPixels),k=l.getTintAppendFloatAlpha,Q=p.alpha,et=k(m.tintTopLeft,Q*m._alphaTL),at=k(m.tintTopRight,Q*m._alphaTR),q=k(m.tintBottomLeft,Q*m._alphaBL),ft=k(m.tintBottomRight,Q*m._alphaBR);this.shouldFlush(6)&&this.flush();var vt=this.setGameObject(m,A);this.manager.preBatch(m),this.batchQuad(m,j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],R,P,b,F,et,at,q,ft,m.tintFill,M,vt),this.manager.postBatch(m)},batchTexture:function(m,p,g,T,S,w,A,M,R,P,b,F,I,L,D,O,z,W,X,_,U,G,N,H,V,$,j,k,Q,et,at,q,ft){ft===void 0&&(ft=!1),this.manager.set(this,m);var vt=this._tempMatrix1,Tt=this._tempMatrix2,ct=this._tempMatrix3,Nt=W/g+j,yt=X/T+k,it=(W+_)/g+j,Z=(X+U)/T+k,lt=A,pt=M,Rt=-O,At=-z;if(m.isCropped){var Kt=m._crop,Bt=Kt.width,Wt=Kt.height;lt=Bt,pt=Wt,A=Bt,M=Wt,W=Kt.x,X=Kt.y;var he=W,zt=X;F&&(he=_-Kt.x-Bt),I&&(zt=U-Kt.y-Wt),Nt=he/g+j,yt=zt/T+k,it=(he+Bt)/g+j,Z=(zt+Wt)/T+k,Rt=-O+W,At=-z+X}I=I^(!at&&p.isRenderTexture?1:0),F&&(lt*=-1,Rt+=A),I&&(pt*=-1,At+=M),Q.roundPixels&&(S=Math.floor(S),w=Math.floor(w)),Tt.applyITRS(S,w,b,R,P),vt.copyFrom(Q.matrix),et?(vt.multiplyWithOffset(et,-Q.scrollX*L,-Q.scrollY*D),Tt.e=S,Tt.f=w):(Tt.e-=Q.scrollX*L,Tt.f-=Q.scrollY*D),vt.multiply(Tt,ct);var Ut=ct.setQuad(Rt,At,Rt+lt,At+pt,Q.renderRoundPixels);q==null&&(q=this.setTexture2D(p)),m&&!ft&&this.manager.preBatch(m),this.batchQuad(m,Ut[0],Ut[1],Ut[2],Ut[3],Ut[4],Ut[5],Ut[6],Ut[7],Nt,yt,it,Z,G,N,H,V,$,p,q),m&&!ft&&this.manager.postBatch(m)},batchTextureFrame:function(m,p,g,T,S,w,A){this.manager.set(this);var M=this._tempMatrix1.copyFrom(w),R=this._tempMatrix2;A?M.multiply(A,R):R=M;var P=R.setQuad(p,g,p+m.width,g+m.height),b=this.setTexture2D(m.source.glTexture);T=l.getTintAppendFloatAlpha(T,S),this.batchQuad(null,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],m.u0,m.v0,m.u1,m.v1,T,T,T,T,0,m.glTexture,b)},batchFillRect:function(m,p,g,T,S,w){this.renderer.pipelines.set(this);var A=this.calcMatrix;w&&w.multiply(S,A);var M=A.setQuad(m,p,m+g,p+T),R=this.fillTint;this.batchQuad(null,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],0,0,1,1,R.TL,R.TR,R.BL,R.BR,2)},batchFillTriangle:function(m,p,g,T,S,w,A,M){this.renderer.pipelines.set(this);var R=this.calcMatrix;M&&M.multiply(A,R);var P=R.getX(m,p),b=R.getY(m,p),F=R.getX(g,T),I=R.getY(g,T),L=R.getX(S,w),D=R.getY(S,w),O=this.fillTint;this.batchTri(null,P,b,F,I,L,D,0,0,1,1,O.TL,O.TR,O.BL,2)},batchStrokeTriangle:function(m,p,g,T,S,w,A,M,R){var P=this.tempTriangle;P[0].x=m,P[0].y=p,P[0].width=A,P[1].x=g,P[1].y=T,P[1].width=A,P[2].x=S,P[2].y=w,P[2].width=A,P[3].x=m,P[3].y=p,P[3].width=A,this.batchStrokePath(P,A,!1,M,R)},batchFillPath:function(m,p,g){this.renderer.pipelines.set(this);var T=this.calcMatrix;g&&g.multiply(p,T);for(var S=m.length,w=this.polygonCache,A,M,R=this.fillTint.TL,P=this.fillTint.TR,b=this.fillTint.BL,F=0;F<S;++F)M=m[F],w.push(M.x,M.y);A=x(w),S=A.length;for(var I=0;I<S;I+=3){var L=A[I+0]*2,D=A[I+1]*2,O=A[I+2]*2,z=w[L+0],W=w[L+1],X=w[D+0],_=w[D+1],U=w[O+0],G=w[O+1],N=T.getX(z,W),H=T.getY(z,W),V=T.getX(X,_),$=T.getY(X,_),j=T.getX(U,G),k=T.getY(U,G);this.batchTri(null,N,H,V,$,j,k,0,0,1,1,R,P,b,2)}w.length=0},batchStrokePath:function(m,p,g,T,S){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var w=m.length-1,A=0;A<w;A++){var M=m[A],R=m[A+1];this.batchLine(M.x,M.y,R.x,R.y,M.width/2,R.width/2,p,A,!g&&A===w-1,T,S)}},batchLine:function(m,p,g,T,S,w,A,M,R,P,b){this.renderer.pipelines.set(this);var F=this.calcMatrix;b&&b.multiply(P,F);var I=g-m,L=T-p,D=Math.sqrt(I*I+L*L);if(D!==0){var O=S*(T-p)/D,z=S*(m-g)/D,W=w*(T-p)/D,X=w*(m-g)/D,_=g-W,U=T-X,G=m-O,N=p-z,H=g+W,V=T+X,$=m+O,j=p+z,k=F.getX(_,U),Q=F.getY(_,U),et=F.getX(G,N),at=F.getY(G,N),q=F.getX(H,V),ft=F.getY(H,V),vt=F.getX($,j),Tt=F.getY($,j),ct=this.strokeTint,Nt=ct.TL,yt=ct.TR,it=ct.BL,Z=ct.BR;if(this.batchQuad(null,vt,Tt,et,at,k,Q,q,ft,0,0,1,1,Nt,yt,it,Z,2),!(A<=2)){var lt=this.prevQuad,pt=this.firstQuad;M>0&&lt[4]?this.batchQuad(null,vt,Tt,et,at,lt[0],lt[1],lt[2],lt[3],0,0,1,1,Nt,yt,it,Z,2):(pt[0]=vt,pt[1]=Tt,pt[2]=et,pt[3]=at,pt[4]=1),R&&pt[4]?this.batchQuad(null,k,Q,q,ft,pt[0],pt[1],pt[2],pt[3],0,0,1,1,Nt,yt,it,Z,2):(lt[0]=k,lt[1]=Q,lt[2]=q,lt[3]=ft,lt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,s.prototype.destroy.call(this),this}});o.exports=d}),43439:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=e(4127),r=e(89924),h=e(29100),n=new a({Extends:h,initialize:function(c){c.vertShader=x(c,"vertShader",r),c.fragShader=x(c,"fragShader",u),c.attributes=x(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,c)},onRender:function(l,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(l,c,s,d,m,p,g,T,S,w,A,M){var R=l.color,P=l.intensity,b=l.radius,F=l.attenuation,I=R.r*P,L=R.g*P,D=R.b*P,O=c.alpha*l.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(s,d,A,M,b,F,I,L,D,O),this.batchLightVert(m,p,A,M,b,F,I,L,D,O),this.batchLightVert(g,T,A,M,b,F,I,L,D,O),this.batchLightVert(s,d,A,M,b,F,I,L,D,O),this.batchLightVert(g,T,A,M,b,F,I,L,D,O),this.batchLightVert(S,w,A,M,b,F,I,L,D,O),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(l,c,s,d,m,p,g,T,S,w){var A=this.vertexViewF32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;A[++M]=l,A[++M]=c,A[++M]=s,A[++M]=d,A[++M]=m,A[++M]=p,A[++M]=g,A[++M]=T,A[++M]=S,A[++M]=w,this.vertexCount++}});o.exports=n}),84057:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89422),u=e(95540),r=e(27681),h=e(49627),n=e(29100),l=new a({Extends:n,initialize:function(s){s.renderTarget=u(s,"renderTarget",1),s.fragShader=u(s,"fragShader",r),s.vertShader=u(s,"vertShader",h),s.attributes=u(s,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),s.batchSize=1,s.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],n.call(this,s),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new x,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){n.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2;var s=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",s.width,s.height);for(var d=this.renderTargets,m=0;m<d.length;m++)d[m].autoResize=!0},postBatch:function(c){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(c),this},onDraw:function(c){this.bindAndDraw(c)},getController:function(c){return c!==void 0?c:this.controller?this.controller:this},copySprite:function(c,s,d){d===void 0&&(d=!1);var m=this.gl;m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,c.texture.webGLTexture);var p=m.getParameter(m.FRAMEBUFFER_BINDING);m.bindFramebuffer(m.FRAMEBUFFER,s.framebuffer.webGLFramebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,s.texture.webGLTexture,0),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),d&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,p))},copyFrame:function(c,s,d,m,p){this.manager.copyFrame(c,s,d,m,p)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,s,d){this.manager.drawFrame(c,s,d,this.colorMatrix)},blendFrames:function(c,s,d,m,p){this.manager.blendFrames(c,s,d,m,p)},blendFramesAdditive:function(c,s,d,m,p){this.manager.blendFramesAdditive(c,s,d,m,p)},clearFrame:function(c,s){this.manager.clearFrame(c,s)},blitFrame:function(c,s,d,m,p,g){this.manager.blitFrame(c,s,d,m,p,g)},copyFrameRect:function(c,s,d,m,p,g,T,S){this.manager.copyFrameRect(c,s,d,m,p,g,T,S)},bindAndDraw:function(c,s,d,m,p){d===void 0&&(d=!0),m===void 0&&(m=!0);var g=this.gl,T=this.renderer;this.bind(p),this.set1i("uMainSampler",0),s?(g.viewport(0,0,s.width,s.height),g.bindFramebuffer(g.FRAMEBUFFER,s.framebuffer.webGLFramebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,s.texture.webGLTexture,0),d&&(m?g.clearColor(0,0,0,0):g.clearColor(0,0,0,1),g.clear(g.COLOR_BUFFER_BIT))):(T.popFramebuffer(!1,!1),T.currentFramebuffer||g.viewport(0,0,T.width,T.height)),T.restoreStencilMask(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,c.texture.webGLTexture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),s&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,T.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),n.prototype.destroy.call(this),this}});o.exports=l}),43558:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(67502),u=e(83419),r=e(96293),h=e(95540),n=e(57516),l=e(27681),c=e(87841),s=e(32302),d=e(45561),m=e(60722),p=e(29100),g=new u({Extends:n,initialize:function(S){var w=h(S,"fragShader",l),A=h(S,"vertShader",m),M=h(S,"drawShader",l),R=[{name:"DrawSprite",fragShader:d,vertShader:m},{name:"CopySprite",fragShader:w,vertShader:A},{name:"DrawGame",fragShader:M,vertShader:m},{name:"ColorMatrix",fragShader:r}],P=h(S,"shaders",[]);S.shaders=R.concat(P),S.vertShader||(S.vertShader=A),S.batchSize=1,n.call(this,S),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new c,this.targetBounds=new c,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){p.prototype.boot.call(this);var T=this.shaders,S=this.renderer;this.drawSpriteShader=T[0],this.copyShader=T[1],this.gameShader=T[2],this.colorMatrixShader=T[3],this.fsTarget=new s(S,S.width,S.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var w=new ArrayBuffer(168);this.quadVertexData=w,this.quadVertexViewF32=new Float32Array(w),this.quadVertexBuffer=S.createVertexBuffer(w,this.gl.STATIC_DRAW),this.onResize(S.width,S.height),this.currentShader=this.copyShader,this.set2f("uResolution",S.width,S.height)},onResize:function(T,S){var w=this.quadVertexViewF32;w[1]=S,w[22]=S,w[14]=T,w[28]=T,w[35]=T,w[36]=S},batchQuad:function(T,S,w,A,M,R,P,b,F,I,L,D,O,z,W,X,_,U,G){var N=Math.min(S,A,R,b),H=Math.min(w,M,P,F),V=Math.max(S,A,R,b),$=Math.max(w,M,P,F),j=V-N,k=$-H,Q=this.spriteBounds.setTo(N,H,j,k),et=T?T.preFX.padding:0,at=j+et*2,q=k+et*2,ft=Math.abs(Math.max(at,q)),vt=this.manager.getRenderTarget(ft),Tt=this.targetBounds.setTo(0,0,vt.width,vt.height);x(Tt,Math.round(Q.centerX),Math.round(Q.centerY)),this.tempSprite=T;var ct=this.gl,Nt=this.renderer;Nt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Nt.width,Nt.height),this.flipProjectionMatrix(!0),T&&(this.onDrawSprite(T,vt),T.preFX.onFX(this));var yt=this.fsTarget;return this.flush(),ct.viewport(0,0,Nt.width,Nt.height),ct.bindFramebuffer(ct.FRAMEBUFFER,yt.framebuffer.webGLFramebuffer),ct.framebufferTexture2D(ct.FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ct.TEXTURE_2D,yt.texture.webGLTexture,0),ct.clearColor(0,0,0,0),ct.clear(ct.COLOR_BUFFER_BIT),this.setTexture2D(G),this.batchVert(S,w,I,L,0,U,z),this.batchVert(A,M,I,O,0,U,X),this.batchVert(R,P,D,O,0,U,_),this.batchVert(S,w,I,L,0,U,z),this.batchVert(R,P,D,O,0,U,_),this.batchVert(b,F,D,L,0,U,W),this.flush(),this.flipProjectionMatrix(!1),ct.activeTexture(ct.TEXTURE0),ct.bindTexture(ct.TEXTURE_2D,vt.texture.webGLTexture),ct.copyTexSubImage2D(ct.TEXTURE_2D,0,0,0,Tt.x,Tt.y,Tt.width,Tt.height),ct.bindFramebuffer(ct.FRAMEBUFFER,null),ct.bindTexture(ct.TEXTURE_2D,null),this.onBatch(T),this.currentShader=this.copyShader,this.onDraw(vt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(T,S,w,A,M,R,P){w===void 0&&(w=!0),A===void 0&&(A=!0),M===void 0&&(M=!1),P===void 0&&(P=this.copyShader);var b=this.gl,F=this.tempSprite;R&&(P=this.colorMatrixShader),this.currentShader=P;var I=this.setVertexBuffer(this.quadVertexBuffer);P.bind(I,!1);var L=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",L.width,L.height),F.preFX.onFXCopy(this),this.onCopySprite(T,S,F),R&&(this.set1fv("uColorMatrix",R.getData()),this.set1f("uAlpha",R.alpha)),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,T.texture.webGLTexture),T.height>S.height)b.viewport(0,0,T.width,T.height),this.setTargetUVs(T,S);else{var D=S.height-T.height;b.viewport(0,D,T.width,T.height),this.resetUVs()}if(b.bindFramebuffer(b.FRAMEBUFFER,S.framebuffer.webGLFramebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,S.texture.webGLTexture,0),w&&(b.clearColor(0,0,0,+!A),b.clear(b.COLOR_BUFFER_BIT)),M){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}b.bufferData(b.ARRAY_BUFFER,this.quadVertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),M&&this.renderer.setBlendMode(O),b.bindFramebuffer(b.FRAMEBUFFER,null)},copy:function(T,S){var w=this.gl;this.set1i("uMainSampler",0),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,T.texture.webGLTexture),w.viewport(0,0,T.width,T.height),this.setUVs(0,0,0,1,1,1,1,0),w.bindFramebuffer(w.FRAMEBUFFER,S.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,S.texture.webGLTexture,0),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.quadVertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null)},blendFrames:function(T,S,w,A,M){this.manager.blendFrames(T,S,w,A,M)},blendFramesAdditive:function(T,S,w,A,M){this.manager.blendFramesAdditive(T,S,w,A,M)},drawToGame:function(T){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(T)},copyToGame:function(T){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(T)},bindAndDraw:function(T){var S=this.gl,w=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(T.texture);var A=this._tempMatrix1.loadIdentity(),M=this.targetBounds.x,R=this.targetBounds.y,P=M+T.width,b=R+T.height,F=A.getX(M,R),I=A.getX(M,b),L=A.getX(P,b),D=A.getX(P,R),O=A.getY(M,R),z=A.getY(M,b),W=A.getY(P,b),X=A.getY(P,R),_=16777215;this.batchVert(F,O,0,0,0,0,_),this.batchVert(I,z,0,1,0,0,_),this.batchVert(L,W,1,1,0,0,_),this.batchVert(F,O,0,0,0,0,_),this.batchVert(L,W,1,1,0,0,_),this.batchVert(D,X,1,0,0,0,_),w.restoreFramebuffer(!1,!0),w.currentFramebuffer||S.viewport(0,0,w.width,w.height),w.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(T){this.drawToGame(T)},setUVs:function(T,S,w,A,M,R,P,b){var F=this.quadVertexViewF32;F[2]=T,F[3]=S,F[9]=w,F[10]=A,F[16]=M,F[17]=R,F[23]=T,F[24]=S,F[30]=M,F[31]=R,F[37]=P,F[38]=b},setTargetUVs:function(T,S){var w=S.height/T.height;w>.5?w=.5-(w-.5):w=.5+(.5-w),this.setUVs(0,w,0,1+w,1,1+w,1,w)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,n.prototype.destroy.call(this),this}});o.exports=g}),81041:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=e(57516),r=new a({Extends:u,initialize:function(n){n.topology=5,n.batchSize=x(n,"batchSize",256),u.call(this,n)}});o.exports=r}),12385:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=e(57516),r=e(45561),h=e(60722),n=e(29100),l=new a({Extends:u,initialize:function(s){s.fragShader=x(s,"fragShader",r),s.vertShader=x(s,"vertShader",h),s.forceZero=!0,u.call(this,s)},boot:function(){n.prototype.boot.call(this);var c=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",c.width,c.height)}});o.exports=l}),7589:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35407),x=e(10312),u=e(83419),r=e(89422),h=e(96293),n=e(36682),l=e(95540),c=e(48247),s=e(49627),d=e(29100),m=new u({Extends:d,initialize:function(g){g.renderTarget=l(g,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),g.vertShader=l(g,"vertShader",s),g.shaders=l(g,"shaders",[{name:"Copy",fragShader:n},{name:"AddBlend",fragShader:a},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:h}]),g.attributes=l(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),g.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],g.batchSize=1,d.call(this,g),this.colorMatrix=new r,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){d.prototype.boot.call(this);var p=this.shaders,g=this.renderTargets;this.copyShader=p[0],this.addShader=p[1],this.linearShader=p[2],this.colorMatrixShader=p[3],this.fullFrame1=g[0],this.fullFrame2=g[1],this.halfFrame1=g[2],this.halfFrame2=g[3]},copyFrame:function(p,g,T,S,w){T===void 0&&(T=1),S===void 0&&(S=!0),w===void 0&&(w=!0);var A=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,p.texture.webGLTexture),g?(A.viewport(0,0,g.width,g.height),A.bindFramebuffer(A.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,g.texture.webGLTexture,0)):A.viewport(0,0,p.width,p.height),S&&(w?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blitFrame:function(p,g,T,S,w,A,M){T===void 0&&(T=1),S===void 0&&(S=!0),w===void 0&&(w=!0),A===void 0&&(A=!1),M===void 0&&(M=!1);var R=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,p.texture.webGLTexture),p.height>g.height)R.viewport(0,0,p.width,p.height),this.setTargetUVs(p,g);else{var P=g.height-p.height;R.viewport(0,P,p.width,p.height)}if(R.bindFramebuffer(R.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,g.texture.webGLTexture,0),S&&(w?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),A){var b=this.renderer.currentBlendMode;this.renderer.setBlendMode(x.ERASE)}M&&this.flipY(),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),A&&this.renderer.setBlendMode(b),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(p,g,T,S,w,A,M,R){M===void 0&&(M=!0),R===void 0&&(R=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,p.texture.webGLTexture,0),M&&(R?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,g.texture.webGLTexture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,T,S,w,A),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(p){var g=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,p.texture.webGLTexture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6)},drawFrame:function(p,g,T,S){T===void 0&&(T=!0),S===void 0&&(S=this.colorMatrix);var w=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",S.getData()),this.set1f("uAlpha",S.alpha),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,p.texture.webGLTexture),g?(w.viewport(0,0,g.width,g.height),w.bindFramebuffer(w.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,g.texture.webGLTexture,0)):w.viewport(0,0,p.width,p.height),T?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blendFrames:function(p,g,T,S,w,A){S===void 0&&(S=1),w===void 0&&(w=!0),A===void 0&&(A=this.linearShader);var M=this.gl;this.setShader(A),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",S),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,p.texture.webGLTexture),M.activeTexture(M.TEXTURE1),M.bindTexture(M.TEXTURE_2D,g.texture.webGLTexture),T?(M.bindFramebuffer(M.FRAMEBUFFER,T.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,T.texture.webGLTexture,0),M.viewport(0,0,T.width,T.height)):M.viewport(0,0,p.width,p.height),w?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blendFramesAdditive:function(p,g,T,S,w){this.blendFrames(p,g,T,S,w,this.addShader)},clearFrame:function(p,g){g===void 0&&(g=!0);var T=this.gl;T.viewport(0,0,p.width,p.height),T.bindFramebuffer(T.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),g?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT);var S=this.renderer.currentFramebuffer;T.bindFramebuffer(T.FRAMEBUFFER,S.webGLFramebuffer)},setUVs:function(p,g,T,S,w,A,M,R){var P=this.vertexViewF32;P[2]=p,P[3]=g,P[6]=T,P[7]=S,P[10]=w,P[11]=A,P[14]=p,P[15]=g,P[18]=w,P[19]=A,P[22]=M,P[23]=R},setTargetUVs:function(p,g){var T=g.height/p.height;T>.5?T=.5-(T-.5):T=.5+(.5-T),this.setUVs(0,T,0,1+T,1,1+T,1,T)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});o.exports=m}),36060:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};o.exports=E}),84817:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineafterflush"}),36712:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebeforeflush"}),40285:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebind"}),65918:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineboot"}),92852:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinedestroy"}),56072:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinerebind"}),57566:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineresize"}),77085:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_FLUSH:e(84817),BEFORE_FLUSH:e(36712),BIND:e(40285),BOOT:e(65918),DESTROY:e(92852),REBIND:e(56072),RESIZE:e(57566)}}),54812:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(99155),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.amount=1},onPreRender:function(h,n){h=this.getController(h),this.set1f("amount",h.amount,n)}});o.exports=r}),67329:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(24400),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(h){h=this.getController(h),this.set1f("strength",h.blurStrength),this.set3fv("color",h.glcolor)},onDraw:function(h){var n=this.getController(),l=this.fullFrame1,c=this.fullFrame2;this.copyFrame(h,c);for(var s=2/h.width*n.offsetX,d=2/h.height*n.offsetY,m=0;m<n.steps;m++)this.set2f("offset",s,0),this.copySprite(h,l),this.set2f("offset",0,d),this.copySprite(l,h);this.blendFrames(c,h,l,n.strength),this.copyToGame(l)}});o.exports=r}),8861:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(41514),u=e(51078),r=e(94328),h=e(84057),n=new a({Extends:h,initialize:function(c){h.call(this,{game:c,shaders:[{name:"Gaussian5",fragShader:x},{name:"Gaussian9",fragShader:u},{name:"Gaussian13",fragShader:r}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(l){var c=this.getController(),s=this.gl,d=this.fullFrame1,m=s.getParameter(s.FRAMEBUFFER_BINDING);this.bind(this.shaders[c.quality]),s.activeTexture(s.TEXTURE0),s.viewport(0,0,l.width,l.height),this.set1i("uMainSampler",0),this.set2f("resolution",l.width,l.height),this.set1f("strength",c.strength),this.set3fv("color",c.glcolor);for(var p=0;p<c.steps;p++)this.set2f("offset",c.x,0),this.copySprite(l,d),this.set2f("offset",0,c.y),this.copySprite(d,l);s.bindFramebuffer(s.FRAMEBUFFER,m),s.bindTexture(s.TEXTURE_2D,null),this.copyToGame(l)}});o.exports=n}),51051:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(90610),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(h,n,l,c){h=this.getController(h),this.set1f("radius",h.radius,n),this.set1f("amount",h.amount,n),this.set1f("contrast",h.contrast,n),this.set1f("strength",h.strength,n),this.set2f("blur",h.blurX,h.blurY,n),this.setBoolean("isTiltShift",h.isTiltShift,n),l&&c&&this.set2f("resolution",l,c,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=r}),89428:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(91899),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(h,n,l,c){h=this.getController(h),this.set1f("scale",h.scale,n),this.set1f("feather",h.feather,n),this.set1f("thickness",h.thickness,n),this.set3fv("color",h.glcolor,n),this.set4fv("backgroundColor",h.glcolor2,n),l&&c&&this.set2f("resolution",l,c,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=r}),88904:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(84057),u=new a({Extends:x,initialize:function(h){x.call(this,{game:h})},onDraw:function(r){var h=this.fullFrame1;this.controller?this.manager.drawFrame(r,h,!0,this.controller):this.drawFrame(r,h),this.copyToGame(h)}});o.exports=u}),63563:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(47838),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(h){var n=this.game.textures.getFrame(h);n&&(this.glTexture=n.glTexture)},onDraw:function(h){var n=this.getController(),l=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.copySprite(h,l),this.copyToGame(l)}});o.exports=r}),94045:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=e(98656),r=e(84057),h=e(70554),n=new a({Extends:r,initialize:function(c,s){var d=x(s,"quality",.1),m=x(s,"distance",10);r.call(this,{game:c,fragShader:h.setGlowQuality(u,c,d,m)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(l,c,s,d){l=this.getController(l),this.set1f("outerStrength",l.outerStrength,c),this.set1f("innerStrength",l.innerStrength,c),this.set4fv("glowColor",l.glcolor,c),this.setBoolean("knockout",l.knockout,c),s&&d&&this.set2f("resolution",s,d,c)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});o.exports=n}),74088:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(70463),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(h,n){h=this.getController(h),this.set1f("alpha",h.alpha,n),this.set1i("size",h.size,n),this.set3fv("color1",h.glcolor1,n),this.set3fv("color2",h.glcolor2,n),this.set2f("positionFrom",h.fromX,h.fromY,n),this.set2f("positionTo",h.toX,h.toY,n)}});o.exports=r}),99636:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50831),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.amount=1},onPreRender:function(h,n,l,c){h=this.getController(h),this.set1f("amount",h.amount,n),l&&c&&this.set2f("resolution",l,c,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=r}),34700:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(92595),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(h,n){h=this.getController(h);var l=h.samples;this.set1i("samples",l,n),this.set1f("intensity",h.intensity,n),this.set1f("decay",h.decay,n),this.set1f("power",h.power/l,n),this.set2f("lightPosition",h.x,h.y,n),this.set4fv("color",h.glcolor,n)}});o.exports=r}),91157:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(72464),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(h,n,l,c){h=this.getController(h),this.setTime("time",n),this.set1f("speed",h.speed,n),this.set1f("lineWidth",h.lineWidth,n),this.set1f("gradient",h.gradient,n),this.setBoolean("reveal",h.reveal,n),l&&c&&this.set2f("resolution",l,c,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=r}),27797:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(39249),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(h,n){h=this.getController(h),this.set1f("radius",h.radius,n),this.set1f("strength",h.strength,n),this.set2f("position",h.x,h.y,n)}});o.exports=r}),67603:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(2878),u=e(84057),r=new a({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(h,n){h=this.getController(h);var l=h.progress,c=h.wipeWidth,s=h.direction,d=h.axis;this.set4f("config",l,c,s,d,n),this.setBoolean("reveal",h.reveal,n)}});o.exports=r}),58918:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Barrel:e(54812),Bloom:e(67329),Blur:e(8861),Bokeh:e(51051),Circle:e(89428),ColorMatrix:e(88904),Displacement:e(63563),Glow:e(94045),Gradient:e(74088),Pixelate:e(99636),Shadow:e(34700),Shine:e(91157),Vignette:e(27797),Wipe:e(67603)};o.exports=a}),96615:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36060),x=e(79291),u={FX:e(58918),BitmapMaskPipeline:e(31302),Events:e(77085),FXPipeline:e(92651),LightPipeline:e(96569),MobilePipeline:e(56527),MultiPipeline:e(57516),PointLightPipeline:e(43439),PostFXPipeline:e(84057),PreFXPipeline:e(43558),RopePipeline:e(81041),SinglePipeline:e(12385),UtilityPipeline:e(7589)};u=x(!1,u,a),o.exports=u}),35407:(o=>{o.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)}),78908:(o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)}),85191:(o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)}),96293:(o=>{o.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)}),36682:(o=>{o.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)}),99155:(o=>{o.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)}),24400:(o=>{o.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)}),94328:(o=>{o.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),41514:(o=>{o.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),51078:(o=>{o.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),90610:(o=>{o.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)}),91899:(o=>{o.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)}),47838:(o=>{o.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)}),98656:(o=>{o.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)}),70463:(o=>{o.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)}),50831:(o=>{o.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)}),92595:(o=>{o.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)}),72464:(o=>{o.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)}),39249:(o=>{o.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)}),2878:(o=>{o.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)}),31063:(o=>{o.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)}),48247:(o=>{o.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)}),41214:(o=>{o.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)}),39653:(o=>{o.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)}),62143:(o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),47940:(o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),98840:(o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),44667:(o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),4127:(o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)}),89924:(o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)}),27681:(o=>{o.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)}),49627:(o=>{o.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)}),45561:(o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),60722:(o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),89350:((o,E,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AddBlendFrag:e(35407),BitmapMaskFrag:e(78908),BitmapMaskVert:e(85191),ColorMatrixFrag:e(96293),CopyFrag:e(36682),FXBarrelFrag:e(99155),FXBloomFrag:e(24400),FXBlurHighFrag:e(94328),FXBlurLowFrag:e(41514),FXBlurMedFrag:e(51078),FXBokehFrag:e(90610),FXCircleFrag:e(91899),FXDisplacementFrag:e(47838),FXGlowFrag:e(98656),FXGradientFrag:e(70463),FXPixelateFrag:e(50831),FXShadowFrag:e(92595),FXShineFrag:e(72464),FXVignetteFrag:e(39249),FXWipeFrag:e(2878),LightFrag:e(31063),LinearBlendFrag:e(48247),MeshFrag:e(41214),MeshVert:e(39653),MobileFrag:e(62143),MobileVert:e(47940),MultiFrag:e(98840),MultiVert:e(44667),PointLightFrag:e(4127),PointLightVert:e(89924),PostFXFrag:e(27681),QuadVert:e(49627),SingleFrag:e(45561),SingleVert:e(60722)}}),93567:((o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n){this.webGLAttribLocation=-1,this.gl=r,this.program=h,this.name=n,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var u=this.gl;u.isContextLost()||(this.webGLAttribLocation=u.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});o.exports=x}),26128:((o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n,l){this.webGLBuffer=null,this.gl=r,this.initialDataOrSize=h,this.bufferType=n,this.bufferUsage=l,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var u=this.gl;if(!u.isContextLost()){var r=this.bufferType,h=u.createBuffer();this.webGLBuffer=h,u.bindBuffer(r,this.webGLBuffer),u.bufferData(r,this.initialDataOrSize,this.bufferUsage),u.bindBuffer(r,null)}}},destroy:function(){var u=this.gl;u.isContextLost()||u.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});o.exports=x}),84387:((o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},u=new a({initialize:function(h,n,l,c,s){this.webGLFramebuffer=null,this.gl=h,this.width=n,this.height=l,this.renderTexture=c,this.addDepthStencilBuffer=!!s,this.createResource()},createResource:function(){var r=this.gl;if(!r.isContextLost()){var h=this.renderTexture,n=0,l=r.createFramebuffer();if(this.webGLFramebuffer=l,r.bindFramebuffer(r.FRAMEBUFFER,l),h.isRenderTexture=!0,h.isAlphaPremultiplied=!1,r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h.webGLTexture,0),n=r.checkFramebufferStatus(r.FRAMEBUFFER),n!==r.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(x[n]||n));if(this.addDepthStencilBuffer){var c=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,c),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,this.width,this.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,c)}r.bindFramebuffer(r.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var r=this.gl;if(!r.isContextLost()){r.bindFramebuffer(r.FRAMEBUFFER,this.webGLFramebuffer);var h=r.getFramebufferAttachmentParameter(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);h!==null&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.deleteTexture(h));var n=r.getFramebufferAttachmentParameter(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);n!==null&&r.deleteRenderbuffer(n),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});o.exports=u}),1482:((o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n){this.webGLProgram=null,this.gl=r,this.vertexSource=h,this.fragmentSource=n,this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost()){var r=u.createProgram(),h=u.createShader(u.VERTEX_SHADER),n=u.createShader(u.FRAGMENT_SHADER);u.shaderSource(h,this.vertexSource),u.shaderSource(n,this.fragmentSource),u.compileShader(h),u.compileShader(n);var l=`Shader failed:
`;if(!u.getShaderParameter(h,u.COMPILE_STATUS))throw new Error("Vertex "+l+u.getShaderInfoLog(h));if(!u.getShaderParameter(n,u.COMPILE_STATUS))throw new Error("Fragment "+l+u.getShaderInfoLog(n));if(u.attachShader(r,h),u.attachShader(r,n),u.linkProgram(r),!u.getProgramParameter(r,u.LINK_STATUS))throw new Error("Link "+l+u.getProgramInfoLog(r));u.useProgram(r),this.webGLProgram=r}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});o.exports=x}),82751:((o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50030),u=new a({initialize:function(h,n,l,c,s,d,m,p,g,T,S,w,A){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=h,this.mipLevel=n,this.minFilter=l,this.magFilter=c,this.wrapT=s,this.wrapS=d,this.format=m,this.pixels=p,this.width=g,this.height=T,this.pma=S??!0,this.forceSize=!!w,this.flipY=!!A,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var r=this.gl;if(!r.isContextLost()){if(this.pixels instanceof u){this.webGLTexture=this.pixels.webGLTexture;return}var h=r.createTexture();h.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=h,this._processTexture()}},update:function(r,h,n,l,c,s,d,m,p){if(!(h===0||n===0)){this.pixels=r,this.width=h,this.height=n,this.flipY=l,this.wrapS=c,this.wrapT=s,this.minFilter=d,this.magFilter=m,this.format=p;var g=this.gl;g.isContextLost()||this._processTexture()}},_processTexture:function(){var r=this.gl;r.activeTexture(r.TEXTURE0);var h=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,this.webGLTexture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.minFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,this.magFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.wrapT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flipY);var n=this.pixels,l=this.mipLevel,c=this.width,s=this.height,d=this.format,m=!1;if(n==null)r.texImage2D(r.TEXTURE_2D,l,d,c,s,0,d,r.UNSIGNED_BYTE,null),m=x(c,s);else if(n.compressed){c=n.width,s=n.height,m=n.generateMipmap;for(var p=0;p<n.mipmaps.length;p++)r.compressedTexImage2D(r.TEXTURE_2D,p,n.internalFormat,n.mipmaps[p].width,n.mipmaps[p].height,0,n.mipmaps[p].data)}else n instanceof Uint8Array?(r.texImage2D(r.TEXTURE_2D,l,d,c,s,0,d,r.UNSIGNED_BYTE,n),m=x(c,s)):(this.forceSize||(c=n.width,s=n.height),r.texImage2D(r.TEXTURE_2D,l,d,d,r.UNSIGNED_BYTE,n),m=x(c,s));m&&r.generateMipmap(r.TEXTURE_2D),h?r.bindTexture(r.TEXTURE_2D,h):r.bindTexture(r.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(r){this.__SPECTOR_Metadata=r,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=r)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof u||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});o.exports=u}),57183:((o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n){this.webGLUniformLocation=null,this.gl=r,this.program=h,this.name=n,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var u=this.gl;u.isContextLost()||(this.webGLUniformLocation=u.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});o.exports=x}),9503:((o,E,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={WebGLAttribLocationWrapper:e(93567),WebGLBufferWrapper:e(26128),WebGLProgramWrapper:e(1482),WebGLTextureWrapper:e(82751),WebGLFramebufferWrapper:e(84387),WebGLUniformLocationWrapper:e(57183)};o.exports=a}),76531:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13560),x=e(83419),u=e(45319),r=e(50792),h=e(97480),n=e(8443),l=e(57811),c=e(74403),s=e(45818),d=e(29747),m=e(87841),p=e(86555),g=e(56583),T=e(26099),S=e(38058),w=new x({Extends:r,initialize:function(M){r.call(this),this.game=M,this.canvas,this.canvasBounds=new m,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=a.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new T(1,1),this.autoRound=!1,this.autoCenter=a.CENTER.NO_CENTER,this.orientation=a.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:d,windowResize:d,fullScreenChange:d,fullScreenError:d}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(n.BOOT,this.boot,this)},boot:function(){var A=this.game;this.canvas=A.canvas,this.fullscreen=A.device.fullscreen;var M=this.scaleMode;M!==a.SCALE_MODE.RESIZE&&M!==a.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(M),M===a.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),A.events.on(n.PRE_STEP,this.step,this),A.events.once(n.READY,this.refresh,this),A.events.once(n.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(A){this.getParent(A),this.getParentBounds();var M=A.width,R=A.height,P=A.scaleMode,b=A.zoom,F=A.autoRound;if(typeof M=="string")if(M.substr(-1)!=="%")M=parseInt(M,10);else{var I=this.parentSize.width;I===0&&(I=window.innerWidth);var L=parseInt(M,10)/100;M=Math.floor(I*L)}if(typeof R=="string")if(R.substr(-1)!=="%")R=parseInt(R,10);else{var D=this.parentSize.height;D===0&&(D=window.innerHeight);var O=parseInt(R,10)/100;R=Math.floor(D*O)}this.scaleMode=P,this.autoRound=F,this.autoCenter=A.autoCenter,this.resizeInterval=A.resizeInterval,F&&(M=Math.floor(M),R=Math.floor(R)),this.gameSize.setSize(M,R),b===a.ZOOM.MAX_ZOOM&&(b=this.getMaxZoom()),this.zoom=b,b!==1&&(this._resetZoom=!0),this.baseSize.setSize(M,R),F&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),A.minWidth>0&&this.displaySize.setMin(A.minWidth*b,A.minHeight*b),A.maxWidth>0&&this.displaySize.setMax(A.maxWidth*b,A.maxHeight*b),this.displaySize.setSize(M,R),(A.snapWidth>0||A.snapHeight>0)&&this.displaySize.setSnap(A.snapWidth,A.snapHeight),this.orientation=s(M,R)},getParent:function(A){var M=A.parent;if(M!==null){if(this.parent=c(M),this.parentIsWindow=this.parent===document.body,A.expandParent&&A.scaleMode!==a.SCALE_MODE.NONE){var R=this.parent.getBoundingClientRect();(this.parentIsWindow||R.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",R=this.parent.getBoundingClientRect(),!this.parentIsWindow&&R.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}A.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=c(A.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var A=this.parentSize,M=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(M.height=l(!0));var R=M.width,P=M.height;if(A.width!==R||A.height!==P)return A.setSize(R,P),!0;if(this.canvas){var b=this.canvasBounds,F=this.canvas.getBoundingClientRect();if(F.x!==b.x||F.y!==b.y)return!0}return!1},lockOrientation:function(A){var M=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return M?M.call(screen,A):!1},setParentSize:function(A,M){return this.parentSize.setSize(A,M),this.refresh()},setGameSize:function(A,M){var R=this.autoRound;R&&(A=Math.floor(A),M=Math.floor(M));var P=this.width,b=this.height;return this.gameSize.resize(A,M),this.baseSize.resize(A,M),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(A/M),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(P,b)},resize:function(A,M){var R=this.zoom,P=this.autoRound;P&&(A=Math.floor(A),M=Math.floor(M));var b=this.width,F=this.height;this.gameSize.resize(A,M),this.baseSize.resize(A,M),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(A*R,M*R),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var I=this.canvas.style,L=A*R,D=M*R;return P&&(L=Math.floor(L),D=Math.floor(D)),(L!==A||D!==M)&&(I.width=L+"px",I.height=D+"px"),this.refresh(b,F)},setZoom:function(A){return this.zoom=A,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(A,M){return A===void 0&&(A=0),M===void 0&&(M=A),this.displaySize.setSnap(A,M),this.refresh()},refresh:function(A,M){A===void 0&&(A=this.width),M===void 0&&(M=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var R=this.game.domContainer;if(R){this.baseSize.setCSS(R);var P=this.canvas.style,b=R.style;b.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",b.marginLeft=P.marginLeft,b.marginTop=P.marginTop}return this.emit(h.RESIZE,this.gameSize,this.baseSize,this.displaySize,A,M),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var A=s(this.width,this.height);A!==this.orientation&&(this.orientation=A,this.emit(h.ORIENTATION_CHANGE,A))}},updateScale:function(){var A=this.canvas.style,M=this.gameSize.width,R=this.gameSize.height,P,b,F=this.zoom,I=this.autoRound;if(this.scaleMode===a.SCALE_MODE.NONE)this.displaySize.setSize(M*F,R*F),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),this._resetZoom&&(A.width=P+"px",A.height=b+"px",this._resetZoom=!1);else if(this.scaleMode===a.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),this.canvas.width=P,this.canvas.height=b;else if(this.scaleMode===a.SCALE_MODE.EXPAND){var L=this.game.config.width,D=this.game.config.height,O=this.parentSize.width,z=this.parentSize.height,W=O/L,X=z/D,_,U;W<X?(_=L,U=W!==0?z/W:D):(_=X!==0?O/X:L,U=D);var G=u(_,this.displaySize.minWidth,this.displaySize.maxWidth),N=u(U,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(G,N),this.gameSize.setSize(G,N),I&&(G=Math.floor(G),N=Math.floor(N)),this.canvas.width=G,this.canvas.height=N;var H=O*(G/_),V=z*(N/U);this.displaySize.setSize(H,V),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),A.width=P+"px",A.height=b+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),A.width=P+"px",A.height=b+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var A=g(this.parentSize.width,this.gameSize.width,0,!0),M=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(A,M),1)},updateCenter:function(){var A=this.autoCenter;if(A!==a.CENTER.NO_CENTER){var M=this.canvas,R=M.style,P=M.getBoundingClientRect(),b=P.width,F=P.height,I=Math.floor((this.parentSize.width-b)/2),L=Math.floor((this.parentSize.height-F)/2);A===a.CENTER.CENTER_HORIZONTALLY?L=0:A===a.CENTER.CENTER_VERTICALLY&&(I=0),R.marginLeft=I+"px",R.marginTop=L+"px"}},updateBounds:function(){var A=this.canvasBounds,M=this.canvas.getBoundingClientRect();A.x=M.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),A.y=M.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),A.width=M.width,A.height=M.height},transformX:function(A){return(A-this.canvasBounds.left)*this.displayScale.x},transformY:function(A){return(A-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(A){A===void 0&&(A={navigationUI:"hide"});var M=this.fullscreen;if(!M.available){this.emit(h.FULLSCREEN_UNSUPPORTED);return}if(!M.active){var R=this.getFullscreenTarget();M.keyboard?R[M.request](Element.ALLOW_KEYBOARD_INPUT):R[M.request](A)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(h.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(A){this.removeFullscreenTarget(),this.emit(h.FULLSCREEN_FAILED,A)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var A=document.createElement("div");A.style.margin="0",A.style.padding="0",A.style.width="100%",A.style.height="100%",this.fullscreenTarget=A,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var M=this.canvas.parentNode;M.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var A=this.fullscreenTarget;if(A&&A.parentNode){var M=A.parentNode;M.insertBefore(this.canvas,A),M.removeChild(A)}}},stopFullscreen:function(){var A=this.fullscreen;if(!A.available)return this.emit(h.FULLSCREEN_UNSUPPORTED),!1;A.active&&document[A.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(h.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(A){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(A)},startListeners:function(){var A=this,M=this.domlisteners;if(M.orientationChange=function(){A.updateBounds(),A._checkOrientation=!0,A.dirty=!0,A.refresh()},M.windowResize=function(){A.updateBounds(),A.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",M.orientationChange,!1):window.addEventListener("orientationchange",M.orientationChange,!1),window.addEventListener("resize",M.windowResize,!1),this.fullscreen.available){M.fullScreenChange=function(P){return A.onFullScreenChange(P)},M.fullScreenError=function(P){return A.onFullScreenError(P)};var R=["webkit","moz",""];R.forEach(function(P){document.addEventListener(P+"fullscreenchange",M.fullScreenChange,!1),document.addEventListener(P+"fullscreenerror",M.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",M.fullScreenChange,!1),document.addEventListener("MSFullscreenError",M.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(A,M){A instanceof S||(M=A,A=void 0),M===void 0&&(M=new m);var R=this.baseSize,P=this.parentSize,b=this.canvasBounds,F=this.displayScale,I=b.x>=0?0:-(b.x*F.x),L=b.y>=0?0:-(b.y*F.y),D;P.width>=b.width?D=R.width:D=R.width-(b.width-P.width)*F.x;var O;return P.height>=b.height?O=R.height:O=R.height-(b.height-P.height)*F.y,M.setTo(I,L,D,O),A&&(M.width/=A.zoomX,M.height/=A.zoomY,M.centerX=A.centerX+A.scrollX,M.centerY=A.centerY+A.scrollY),M},step:function(A,M){this.parent&&(this._lastCheck+=M,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var A=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",A.orientationChange,!1):window.removeEventListener("orientationchange",A.orientationChange,!1),window.removeEventListener("resize",A.windowResize,!1);var M=["webkit","moz",""];M.forEach(function(R){document.removeEventListener(R+"fullscreenchange",A.fullScreenChange,!1),document.removeEventListener(R+"fullscreenerror",A.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",A.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",A.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});o.exports=w}),64743:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}}),39218:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}}),81050:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}}),80805:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}}),13560:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={CENTER:e(64743),ORIENTATION:e(39218),SCALE_MODE:e(81050),ZOOM:e(80805)};o.exports=a}),56139:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="enterfullscreen"}),2336:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenfailed"}),47412:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenunsupported"}),51452:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="leavefullscreen"}),20666:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="orientationchange"}),47945:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"}),97480:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ENTER_FULLSCREEN:e(56139),FULLSCREEN_FAILED:e(2336),FULLSCREEN_UNSUPPORTED:e(47412),LEAVE_FULLSCREEN:e(51452),ORIENTATION_CHANGE:e(20666),RESIZE:e(47945)}}),93364:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(13560),u={Center:e(64743),Events:e(97480),Orientation:e(39218),ScaleManager:e(76531),ScaleModes:e(81050),Zoom:e(80805)};u=a(!1,u,x.CENTER),u=a(!1,u,x.ORIENTATION),u=a(!1,u,x.SCALE_MODE),u=a(!1,u,x.ZOOM),o.exports=u}),27397:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=e(35355),u=function(r){var h=r.game.config.defaultPhysicsSystem,n=a(r.settings,"physics",!1);if(!(!h&&!n)){var l=[];if(h&&l.push(x(h+"Physics")),n)for(var c in n)c=x(c.concat("Physics")),l.indexOf(c)===-1&&l.push(c);return l}};o.exports=u}),52106:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(u){var r=u.plugins.getDefaultScenePlugins(),h=a(u.settings,"plugins",!1);return Array.isArray(h)?h:r||[]};o.exports=x}),87033:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};o.exports=E}),97482:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(2368),u=new a({initialize:function(h){this.sys=new x(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});o.exports=u}),60903:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89993),u=e(44594),r=e(8443),h=e(35154),n=e(54899),l=e(29747),c=e(97482),s=e(2368),d=new a({initialize:function(p,g){if(this.game=p,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,g){Array.isArray(g)||(g=[g]);for(var T=0;T<g.length;T++)this._pending.push({key:"default",scene:g[T],autoStart:T===0,data:{}})}p.events.once(r.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new c),this.game.events.emit(r.SYSTEM_READY,this.systemScene,this);var m,p,g,T;for(m=0;m<this._pending.length;m++){p=this._pending[m],g=p.key,T=p.scene;var S;T instanceof c?S=this.createSceneFromInstance(g,T):typeof T=="object"?S=this.createSceneFromObject(g,T):typeof T=="function"&&(S=this.createSceneFromFunction(g,T)),g=S.sys.settings.key,this.keys[g]=S,this.scenes.push(S),this._data[g]&&(S.sys.settings.data=this._data[g].data,this._data[g].autoStart&&(p.autoStart=!0)),(p.autoStart||S.sys.settings.active)&&this._start.push(g)}for(this._pending.length=0,this._data={},this.isBooted=!0,m=0;m<this._start.length;m++)p=this._start[m],this.start(p);this._start.length=0}},processQueue:function(){var m=this._pending.length,p=this._queue.length;if(!(m===0&&p===0)){var g,T;if(m){for(g=0;g<m;g++)T=this._pending[g],this.add(T.key,T.scene,T.autoStart,T.data);for(g=0;g<this._start.length;g++)T=this._start[g],this.start(T);this._start.length=0,this._pending.length=0}for(g=0;g<this._queue.length;g++)T=this._queue[g],this[T.op](T.keyA,T.keyB,T.data);this._queue.length=0}},add:function(m,p,g,T){if(g===void 0&&(g=!1),T===void 0&&(T={}),this.isProcessing||!this.isBooted)return this._pending.push({key:m,scene:p,autoStart:g,data:T}),this.isBooted||(this._data[m]={data:T}),null;m=this.getKey(m,p);var S;return p instanceof c?S=this.createSceneFromInstance(m,p):typeof p=="object"?(p.key=m,S=this.createSceneFromObject(m,p)):typeof p=="function"&&(S=this.createSceneFromFunction(m,p)),S.sys.settings.data=T,m=S.sys.settings.key,this.keys[m]=S,this.scenes.push(S),(g||S.sys.settings.active)&&(this._pending.length?this._start.push(m):this.start(m)),S},remove:function(m){if(this.isProcessing)return this.queueOp("remove",m);var p=this.getScene(m);if(!p||p.sys.isTransitioning())return this;var g=this.scenes.indexOf(p),T=p.sys.settings.key;return g>-1&&(delete this.keys[T],this.scenes.splice(g,1),this._start.indexOf(T)>-1&&(g=this._start.indexOf(T),this._start.splice(g,1)),p.sys.destroy()),this},bootScene:function(m){var p=m.sys,g=p.settings;p.sceneUpdate=l,m.init&&(m.init.call(m,g.data),g.status=x.INIT,g.isTransition&&p.events.emit(u.TRANSITION_INIT,g.transitionFrom,g.transitionDuration));var T;p.load&&(T=p.load,T.reset()),T&&m.preload?(m.preload.call(m),g.status=x.LOADING,T.once(n.COMPLETE,this.loadComplete,this),T.start()):this.create(m)},loadComplete:function(m){this.create(m.scene)},payloadComplete:function(m){this.bootScene(m.scene)},update:function(m,p){this.processQueue(),this.isProcessing=!0;for(var g=this.scenes.length-1;g>=0;g--){var T=this.scenes[g].sys;T.settings.status>x.START&&T.settings.status<=x.RUNNING&&T.step(m,p),T.scenePlugin&&T.scenePlugin._target&&T.scenePlugin.step(m,p)}},render:function(m){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.settings.visible&&g.settings.status>=x.LOADING&&g.settings.status<x.SLEEPING&&g.render(m)}this.isProcessing=!1},create:function(m){var p=m.sys,g=p.settings;m.create&&(g.status=x.CREATING,m.create.call(m,g.data),g.status===x.DESTROYED)||(g.isTransition&&p.events.emit(u.TRANSITION_START,g.transitionFrom,g.transitionDuration),m.update&&(p.sceneUpdate=m.update),g.status=x.RUNNING,p.events.emit(u.CREATE,m))},createSceneFromFunction:function(m,p){var g=new p;if(g instanceof c){var T=g.sys.settings.key;if(T!==""&&(m=T),this.keys.hasOwnProperty(m))throw new Error("Cannot add Scene with duplicate key: "+m);return this.createSceneFromInstance(m,g)}else return g.sys=new s(g),g.sys.settings.key=m,g.sys.init(this.game),g},createSceneFromInstance:function(m,p){var g=p.sys.settings.key;return g===""&&(p.sys.settings.key=m),p.sys.init(this.game),p},createSceneFromObject:function(m,p){var g=new c(p),T=g.sys.settings.key;T!==""?m=T:g.sys.settings.key=m,g.sys.init(this.game);for(var S=["init","preload","create","update","render"],w=0;w<S.length;w++){var A=h(p,S[w],null);A&&(g[S[w]]=A)}if(p.hasOwnProperty("extend")){for(var M in p.extend)if(p.extend.hasOwnProperty(M)){var R=p.extend[M];M==="data"&&g.hasOwnProperty("data")&&typeof R=="object"?g.data.merge(R):M!=="sys"&&(g[M]=R)}}return g},getKey:function(m,p){if(m||(m="default"),typeof p=="function")return m;if(p instanceof c?m=p.sys.settings.key:typeof p=="object"&&p.hasOwnProperty("key")&&(m=p.key),this.keys.hasOwnProperty(m))throw new Error("Cannot add Scene with duplicate key: "+m);return m},getScenes:function(m,p){m===void 0&&(m=!0),p===void 0&&(p=!1);for(var g=[],T=this.scenes,S=0;S<T.length;S++){var w=T[S];w&&(!m||m&&w.sys.isActive())&&g.push(w)}return p?g.reverse():g},getScene:function(m){if(typeof m=="string"){if(this.keys[m])return this.keys[m]}else for(var p=0;p<this.scenes.length;p++)if(m===this.scenes[p])return m;return null},isActive:function(m){var p=this.getScene(m);return p?p.sys.isActive():null},isPaused:function(m){var p=this.getScene(m);return p?p.sys.isPaused():null},isVisible:function(m){var p=this.getScene(m);return p?p.sys.isVisible():null},isSleeping:function(m){var p=this.getScene(m);return p?p.sys.isSleeping():null},pause:function(m,p){var g=this.getScene(m);return g&&g.sys.pause(p),this},resume:function(m,p){var g=this.getScene(m);return g&&g.sys.resume(p),this},sleep:function(m,p){var g=this.getScene(m);return g&&!g.sys.isTransitioning()&&g.sys.sleep(p),this},wake:function(m,p){var g=this.getScene(m);return g&&g.sys.wake(p),this},run:function(m,p){var g=this.getScene(m);if(!g){for(var T=0;T<this._pending.length;T++)if(this._pending[T].key===m){this.queueOp("start",m,p);break}return this}g.sys.isSleeping()?g.sys.wake(p):g.sys.isPaused()?g.sys.resume(p):this.start(m,p)},start:function(m,p){if(!this.isBooted)return this._data[m]={autoStart:!0,data:p},this;var g=this.getScene(m);if(!g)return console.warn("Scene key not found: "+m),this;var T=g.sys,S=T.settings.status;if(S>=x.START&&S<=x.CREATING)return this;if(S>=x.RUNNING&&S<=x.SLEEPING)T.shutdown(),T.sceneUpdate=l,T.start(p);else{T.sceneUpdate=l,T.start(p);var w;if(T.load&&(w=T.load),w&&T.settings.hasOwnProperty("pack")&&(w.reset(),w.addPack({payload:T.settings.pack})))return T.settings.status=x.LOADING,w.once(n.COMPLETE,this.payloadComplete,this),w.start(),this}return this.bootScene(g),this},stop:function(m,p){var g=this.getScene(m);if(g&&!g.sys.isTransitioning()&&g.sys.settings.status!==x.SHUTDOWN){var T=g.sys.load;T&&(T.off(n.COMPLETE,this.loadComplete,this),T.off(n.COMPLETE,this.payloadComplete,this)),g.sys.shutdown(p)}return this},switch:function(m,p,g){var T=this.getScene(m),S=this.getScene(p);return T&&S&&T!==S&&(this.sleep(m),this.isSleeping(p)?this.wake(p,g):this.start(p,g)),this},getAt:function(m){return this.scenes[m]},getIndex:function(m){var p=this.getScene(m);return this.scenes.indexOf(p)},bringToTop:function(m){if(this.isProcessing)return this.queueOp("bringToTop",m);var p=this.getIndex(m),g=this.scenes;if(p!==-1&&p<g.length){var T=this.getScene(m);g.splice(p,1),g.push(T)}return this},sendToBack:function(m){if(this.isProcessing)return this.queueOp("sendToBack",m);var p=this.getIndex(m);if(p!==-1&&p>0){var g=this.getScene(m);this.scenes.splice(p,1),this.scenes.unshift(g)}return this},moveDown:function(m){if(this.isProcessing)return this.queueOp("moveDown",m);var p=this.getIndex(m);if(p>0){var g=p-1,T=this.getScene(m),S=this.getAt(g);this.scenes[p]=S,this.scenes[g]=T}return this},moveUp:function(m){if(this.isProcessing)return this.queueOp("moveUp",m);var p=this.getIndex(m);if(p<this.scenes.length-1){var g=p+1,T=this.getScene(m),S=this.getAt(g);this.scenes[p]=S,this.scenes[g]=T}return this},moveAbove:function(m,p){if(m===p)return this;if(this.isProcessing)return this.queueOp("moveAbove",m,p);var g=this.getIndex(m),T=this.getIndex(p);if(g!==-1&&T!==-1&&T<g){var S=this.getAt(T);this.scenes.splice(T,1),this.scenes.splice(g+(T>g),0,S)}return this},moveBelow:function(m,p){if(m===p)return this;if(this.isProcessing)return this.queueOp("moveBelow",m,p);var g=this.getIndex(m),T=this.getIndex(p);if(g!==-1&&T!==-1&&T>g){var S=this.getAt(T);this.scenes.splice(T,1),g===0?this.scenes.unshift(S):this.scenes.splice(g-(T<g),0,S)}return this},queueOp:function(m,p,g,T){return this._queue.push({op:m,keyA:p,keyB:g,data:T}),this},swapPosition:function(m,p){if(m===p)return this;if(this.isProcessing)return this.queueOp("swapPosition",m,p);var g=this.getIndex(m),T=this.getIndex(p);if(g!==T&&g!==-1&&T!==-1){var S=this.getAt(g);this.scenes[g]=this.scenes[T],this.scenes[T]=S}return this},dump:function(){for(var m=[],p=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],g=0;g<this.scenes.length;g++){var T=this.scenes[g].sys,S=T.settings.visible&&(T.settings.status===x.RUNNING||T.settings.status===x.PAUSED)?"[*] ":"[-] ";S+=T.settings.key+" ("+p[T.settings.status]+")",m.push(S)}console.log(m.join(`
`))},destroy:function(){for(var m=0;m<this.scenes.length;m++){var p=this.scenes[m].sys;p.destroy()}this.systemScene.sys.destroy(),this.update=l,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});o.exports=d}),52209:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(44594),r=e(95540),h=e(37277),n=new x({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(u.BOOT,this.boot,this),c.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},start:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",l,c),this},restart:function(l){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,l),this},transition:function(l){l===void 0&&(l={});var c=r(l,"target",!1),s=this.manager.getScene(c);if(!c||!this.checkValidTransition(s))return!1;var d=r(l,"duration",1e3);this._elapsed=0,this._target=s,this._duration=d,this._willSleep=r(l,"sleep",!1),this._willRemove=r(l,"remove",!1);var m=r(l,"onUpdate",null);m&&(this._onUpdate=m,this._onUpdateScope=r(l,"onUpdateScope",this.scene));var p=r(l,"allowInput",!1);this.settings.transitionAllowInput=p;var g=s.sys.settings;g.isTransition=!0,g.transitionFrom=this.scene,g.transitionDuration=d,g.transitionAllowInput=p,r(l,"moveAbove",!1)?this.manager.moveAbove(this.key,c):r(l,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),s.sys.isSleeping()?s.sys.wake(r(l,"data")):this.manager.start(c,r(l,"data"));var T=r(l,"onStart",null),S=r(l,"onStartScope",this.scene);return T&&T.call(S,this.scene,s,d),this.systems.events.emit(u.TRANSITION_OUT,s,d),!0},checkValidTransition:function(l){return!(!l||l.sys.isActive()||l.sys.isTransitioning()||l===this.scene||this.systems.isTransitioning())},step:function(l,c){this._elapsed+=c,this.transitionProgress=a(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var l=this._target.sys,c=this._target.sys.settings;l.events.emit(u.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(l,c,s,d){return this.manager.add(l,c,s,d)},launch:function(l,c){return l&&l!==this.key&&this.manager.queueOp("start",l,c),this},run:function(l,c){return l&&l!==this.key&&this.manager.queueOp("run",l,c),this},pause:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("pause",l,c),this},resume:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("resume",l,c),this},sleep:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("sleep",l,c),this},wake:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("wake",l,c),this},switch:function(l,c){return l!==this.key&&this.manager.queueOp("switch",this.key,l,c),this},stop:function(l,c){return l===void 0&&(l=this.key),this.manager.queueOp("stop",l,c),this},setActive:function(l,c,s){c===void 0&&(c=this.key);var d=this.manager.getScene(c);return d&&d.sys.setActive(l,s),this},setVisible:function(l,c){c===void 0&&(c=this.key);var s=this.manager.getScene(c);return s&&s.sys.setVisible(l),this},isSleeping:function(l){return l===void 0&&(l=this.key),this.manager.isSleeping(l)},isActive:function(l){return l===void 0&&(l=this.key),this.manager.isActive(l)},isPaused:function(l){return l===void 0&&(l=this.key),this.manager.isPaused(l)},isVisible:function(l){return l===void 0&&(l=this.key),this.manager.isVisible(l)},swapPosition:function(l,c){return c===void 0&&(c=this.key),l!==c&&this.manager.swapPosition(l,c),this},moveAbove:function(l,c){return c===void 0&&(c=this.key),l!==c&&this.manager.moveAbove(l,c),this},moveBelow:function(l,c){return c===void 0&&(c=this.key),l!==c&&this.manager.moveBelow(l,c),this},remove:function(l){return l===void 0&&(l=this.key),this.manager.remove(l),this},moveUp:function(l){return l===void 0&&(l=this.key),this.manager.moveUp(l),this},moveDown:function(l){return l===void 0&&(l=this.key),this.manager.moveDown(l),this},bringToTop:function(l){return l===void 0&&(l=this.key),this.manager.bringToTop(l),this},sendToBack:function(l){return l===void 0&&(l=this.key),this.manager.sendToBack(l),this},get:function(l){return this.manager.getScene(l)},getStatus:function(l){var c=this.manager.getScene(l);if(c)return c.sys.getStatus()},getIndex:function(l){return l===void 0&&(l=this.key),this.manager.getIndex(l)},shutdown:function(){var l=this.systems.events;l.off(u.SHUTDOWN,this.shutdown,this),l.off(u.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",n,"scenePlugin"),o.exports=n}),55681:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89993),x=e(35154),u=e(46975),r=e(87033),h={create:function(n){return typeof n=="string"?n={key:n}:n===void 0&&(n={}),{status:a.PENDING,key:x(n,"key",""),active:x(n,"active",!1),visible:x(n,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:x(n,"pack",!1),cameras:x(n,"cameras",null),map:x(n,"map",u(r,x(n,"mapAdd",{}))),physics:x(n,"physics",{}),loader:x(n,"loader",{}),plugins:x(n,"plugins",!1),input:x(n,"input",{})}}};o.exports=h}),2368:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(89993),u=e(42363),r=e(44594),h=e(27397),n=e(52106),l=e(29747),c=e(55681),s=new a({initialize:function(m,p){this.scene=m,this.game,this.renderer,this.config=p,this.settings=c.create(p),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=l},init:function(d){this.settings.status=x.INIT,this.sceneUpdate=l,this.game=d,this.renderer=d.renderer,this.canvas=d.canvas,this.context=d.context;var m=d.plugins;this.plugins=m,m.addToScene(this,u.Global,[u.CoreScene,n(this),h(this)]),this.events.emit(r.BOOT,this),this.settings.isBooted=!0},step:function(d,m){var p=this.events;p.emit(r.PRE_UPDATE,d,m),p.emit(r.UPDATE,d,m),this.sceneUpdate.call(this.scene,d,m),p.emit(r.POST_UPDATE,d,m)},render:function(d){var m=this.displayList;m.depthSort(),this.events.emit(r.PRE_RENDER,d),this.cameras.render(d,m),this.events.emit(r.RENDER,d)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(d){var m=this.settings,p=this.getStatus();return p!==x.CREATING&&p!==x.RUNNING?console.warn("Cannot pause non-running Scene",m.key):this.settings.active&&(m.status=x.PAUSED,m.active=!1,this.events.emit(r.PAUSE,this,d)),this},resume:function(d){var m=this.events,p=this.settings;return this.settings.active||(p.status=x.RUNNING,p.active=!0,m.emit(r.RESUME,this,d)),this},sleep:function(d){var m=this.settings,p=this.getStatus();return p!==x.CREATING&&p!==x.RUNNING?console.warn("Cannot sleep non-running Scene",m.key):(m.status=x.SLEEPING,m.active=!1,m.visible=!1,this.events.emit(r.SLEEP,this,d)),this},wake:function(d){var m=this.events,p=this.settings;return p.status=x.RUNNING,p.active=!0,p.visible=!0,m.emit(r.WAKE,this,d),p.isTransition&&m.emit(r.TRANSITION_WAKE,p.transitionFrom,p.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var d=this.settings.status;return d>x.PENDING&&d<=x.RUNNING},isSleeping:function(){return this.settings.status===x.SLEEPING},isActive:function(){return this.settings.status===x.RUNNING},isPaused:function(){return this.settings.status===x.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(d){return this.settings.visible=d,this},setActive:function(d,m){return d?this.resume(m):this.pause(m)},start:function(d){var m=this.events,p=this.settings;d&&(p.data=d),p.status=x.START,p.active=!0,p.visible=!0,m.emit(r.START,this),m.emit(r.READY,this,d)},shutdown:function(d){var m=this.events,p=this.settings;m.off(r.TRANSITION_INIT),m.off(r.TRANSITION_START),m.off(r.TRANSITION_COMPLETE),m.off(r.TRANSITION_OUT),p.status=x.SHUTDOWN,p.active=!1,p.visible=!1,m.emit(r.SHUTDOWN,this,d)},destroy:function(){var d=this.events,m=this.settings;m.status=x.DESTROYED,m.active=!1,m.visible=!1,d.emit(r.DESTROY,this),d.removeAllListeners();for(var p=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],g=0;g<p.length;g++)this[p[g]]=null}});o.exports=s}),89993:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};o.exports=E}),69830:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"}),7919:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"}),46763:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="create"}),11763:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"}),71555:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"}),36735:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postupdate"}),3809:(o=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"}),90716:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"}),58262:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"}),91633:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"}),10319:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"}),87132:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"}),81961:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"}),90194:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleep"}),6265:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"}),33178:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioncomplete"}),43063:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioninit"}),11259:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionout"}),61611:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionstart"}),45209:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionwake"}),22966:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"}),21747:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wake"}),44594:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:e(69830),BOOT:e(7919),CREATE:e(46763),DESTROY:e(11763),PAUSE:e(71555),POST_UPDATE:e(36735),PRE_RENDER:e(3809),PRE_UPDATE:e(90716),READY:e(58262),REMOVED_FROM_SCENE:e(91633),RENDER:e(10319),RESUME:e(87132),SHUTDOWN:e(81961),SLEEP:e(90194),START:e(6265),TRANSITION_COMPLETE:e(33178),TRANSITION_INIT:e(43063),TRANSITION_OUT:e(11259),TRANSITION_START:e(61611),TRANSITION_WAKE:e(45209),UPDATE:e(22966),WAKE:e(21747)}}),62194:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89993),x=e(79291),u={Events:e(44594),GetPhysicsPlugins:e(27397),GetScenePlugins:e(52106),SceneManager:e(60903),ScenePlugin:e(52209),Settings:e(55681),Systems:e(2368)};u=x(!1,u,a),o.exports=u}),30341:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),u=e(14463),r=e(79291),h=e(29747),n=new a({Extends:x,initialize:function(c,s,d){x.call(this),this.manager=c,this.key=s,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=r(this.config,d),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(l){return!l||!l.name||typeof l.name!="string"?!1:this.markers[l.name]?(console.error("addMarker "+l.name+" already exists in Sound"),!1):(l=r(!0,{name:"",start:0,duration:this.totalDuration-(l.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},l),this.markers[l.name]=l,!0)},updateMarker:function(l){return!l||!l.name||typeof l.name!="string"?!1:this.markers[l.name]?(this.markers[l.name]=r(!0,this.markers[l.name],l),!0):(console.warn("Audio Marker: "+l.name+" missing in Sound: "+this.key),!1)},removeMarker:function(l){var c=this.markers[l];return c?(this.markers[l]=null,c):null},play:function(l,c){if(l===void 0&&(l=""),typeof l=="object"&&(c=l,l=""),typeof l!="string")return!1;if(!l)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[l])return console.warn("Marker: "+l+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[l],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=r(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var l=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,s=Math.pow(l,c);this.totalRate=this.currentConfig.rate*this.manager.rate*s},destroy:function(){this.pendingRemove||(this.stop(),this.emit(u.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});o.exports=n}),85034:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(41786),u=e(50792),r=e(14463),h=e(8443),n=e(46710),l=e(58731),c=e(29747),s=e(26099),d=new a({Extends:u,initialize:function(p){u.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new s;var g=p.events;g.on(h.BLUR,this.onGameBlur,this),g.on(h.FOCUS,this.onGameFocus,this),g.on(h.PRE_STEP,this.update,this),g.once(h.DESTROY,this.destroy,this)},add:c,addAudioSprite:function(m,p){p===void 0&&(p={});var g=this.add(m,p);g.spritemap=this.jsonCache.get(m).spritemap;for(var T in g.spritemap)if(g.spritemap.hasOwnProperty(T)){var S=x(p),w=g.spritemap[T];S.loop=w.hasOwnProperty("loop")?w.loop:!1,g.addMarker({name:T,start:w.start,duration:w.end-w.start,config:S})}return g},get:function(m){return l(this.sounds,"key",m)},getAll:function(m){return m?n(this.sounds,"key",m):n(this.sounds)},getAllPlaying:function(){return n(this.sounds,"isPlaying",!0)},play:function(m,p){var g=this.add(m);return g.once(r.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(m,p,g){var T=this.addAudioSprite(m);return T.once(r.COMPLETE,T.destroy,T),T.play(p,g)},remove:function(m){var p=this.sounds.indexOf(m);return p!==-1?(m.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(m){m.destroy()}),this.sounds.length=0},removeByKey:function(m){for(var p=0,g=this.sounds.length-1;g>=0;g--){var T=this.sounds[g];T.key===m&&(T.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(m){m.pause()}),this.emit(r.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(m){m.resume()}),this.emit(r.RESUME_ALL,this)},setListenerPosition:c,stopAll:function(){this.forEachActiveSound(function(m){m.stop()}),this.emit(r.STOP_ALL,this)},stopByKey:function(m){var p=0;return this.getAll(m).forEach(function(g){g.stop()&&p++}),p},isPlaying:function(m){var p=this.sounds,g=p.length-1,T;if(m===void 0){for(;g>=0;g--)if(T=this.sounds[g],T.isPlaying)return!0}else for(;g>=0;g--)if(T=this.sounds[g],T.key===m&&T.isPlaying)return!0;return!1},unlock:c,onBlur:c,onFocus:c,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(m,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(r.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(T){T.update(m,p)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(m,p){var g=this;this.sounds.forEach(function(T,S){T&&!T.pendingRemove&&m.call(p||g,T,S,g.sounds)})},setRate:function(m){return this.rate=m,this},rate:{get:function(){return this._rate},set:function(m){this._rate=m,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(r.GLOBAL_RATE,this,m)}},setDetune:function(m){return this.detune=m,this},detune:{get:function(){return this._detune},set:function(m){this._detune=m,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(r.GLOBAL_DETUNE,this,m)}}});o.exports=d}),14747:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33684),x=e(25960),u=e(57490),r={create:function(h){var n=h.config.audio,l=h.device.audio;return n.noAudio||!l.webAudio&&!l.audioData?new x(h):l.webAudio&&!n.disableWebAudio?new u(h):new a(h)}};o.exports=r}),19723:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"}),98882:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decodedall"}),57506:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decoded"}),73146:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"}),11305:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"}),40577:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"}),30333:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"}),20394:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"}),21802:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"}),1299:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="looped"}),99190:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"}),97125:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"}),89259:(o=>{/**
 * @author       pi-kei
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pan"}),79986:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"}),17586:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"}),19618:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"}),42306:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"}),10387:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"}),48959:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"}),9960:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seek"}),19180:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stopall"}),98328:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"}),50401:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"}),52498:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"}),14463:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:e(19723),DECODED:e(57506),DECODED_ALL:e(98882),DESTROY:e(73146),DETUNE:e(11305),GLOBAL_DETUNE:e(40577),GLOBAL_MUTE:e(30333),GLOBAL_RATE:e(20394),GLOBAL_VOLUME:e(21802),LOOP:e(99190),LOOPED:e(1299),MUTE:e(97125),PAN:e(89259),PAUSE_ALL:e(79986),PAUSE:e(17586),PLAY:e(19618),RATE:e(42306),RESUME_ALL:e(10387),RESUME:e(48959),SEEK:e(9960),STOP_ALL:e(19180),STOP:e(98328),UNLOCKED:e(50401),VOLUME:e(52498)}}),64895:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),x=e(83419),u=e(14463),r=e(45319),h=new x({Extends:a,initialize:function(l,c,s){if(s===void 0&&(s={}),this.tags=l.game.cache.audio.get(c),!this.tags)throw new Error('No cached audio asset with key "'+c);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,a.call(this,l,c,s)},play:function(n,l){return this.manager.isLocked(this,"play",[n,l])||!a.prototype.play.call(this,n,l)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!a.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!a.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(u.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var n=this.currentConfig.seek,l=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+n;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),l===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+l*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var n=0;n<this.tags.length;n++){var l=this.tags[n];if(l.dataset.used==="false")return l.dataset.used="true",this.audio=l,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(d){d.key===this.key&&d.audio&&c.push(d)},this),c.sort(function(d,m){return d.loop===m.loop?m.seek/m.duration-d.seek/d.duration:d.loop?1:-1});var s=c[0];return this.audio=s.audio,s.reset(),s.audio=null,s.startTime=0,s.previousTime=0,!0},playCatchPromise:function(){var n=this.audio.play();n&&n.catch(function(l){console.warn(l)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){a.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(n){if(this.isPlaying){if(this.startTime>0){this.startTime<n-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,n-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var l=this.currentMarker?this.currentMarker.start:0,c=l+this.duration,s=this.audio.currentTime;if(this.currentConfig.loop)s>=c-this.manager.loopEndOffset?(this.audio.currentTime=l+Math.max(0,s-c),s=this.audio.currentTime):s<l&&(this.audio.currentTime+=l,s=this.audio.currentTime),s<this.previousTime&&this.emit(u.LOOPED,this);else if(s>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(u.COMPLETE,this);return}this.previousTime=s}},destroy:function(){a.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=r(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){a.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(n){this.currentConfig.mute=n,!this.manager.isLocked(this,"mute",n)&&(this.updateMute(),this.emit(u.MUTE,this,n))}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.currentConfig.volume},set:function(n){this.currentConfig.volume=n,!this.manager.isLocked(this,"volume",n)&&(this.updateVolume(),this.emit(u.VOLUME,this,n))}},setVolume:function(n){return this.volume=n,this},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,!this.manager.isLocked(this,u.RATE,n)&&(this.calculateRate(),this.emit(u.RATE,this,n))}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,!this.manager.isLocked(this,u.DETUNE,n)&&(this.calculateRate(),this.emit(u.DETUNE,this,n))}},setDetune:function(n){return this.detune=n,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.isLocked(this,"seek",n)||this.startTime>0||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.isPlaying?(this.previousTime=n,this.audio.currentTime=n):this.isPaused&&(this.currentConfig.seek=n),this.emit(u.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,!this.manager.isLocked(this,"loop",n)&&(this.audio&&(this.audio.loop=n),this.emit(u.LOOP,this,n))}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.currentConfig.pan},set:function(n){this.currentConfig.pan=n,this.emit(u.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});o.exports=h}),33684:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85034),x=e(83419),u=e(14463),r=e(64895),h=new x({Extends:a,initialize:function(l){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,a.call(this,l)},add:function(n,l){var c=new r(this,n,l);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var n=this;if(this.game.cache.audio.entries.each(function(d,m){for(var p=0;p<m.length;p++)if(m[p].dataset.locked==="true")return n.locked=!0,!1;return!0}),!!this.locked){var l=!1,c=function(){l=!0},s=function(){if(l){l=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",s);var d=[];if(n.game.cache.audio.entries.each(function(p,g){for(var T=0;T<g.length;T++){var S=g[T];S.dataset.locked==="true"&&d.push(S)}return!0}),d.length!==0){var m=d[d.length-1];m.oncanplaythrough=function(){m.oncanplaythrough=null,d.forEach(function(p){p.dataset.locked="false"}),n.unlocked=!0},d.forEach(function(p){p.load()})}};this.once(u.UNLOCKED,function(){for(this.forEachActiveSound(function(m){m.currentMarker===null&&m.duration===0&&(m.duration=m.tags[0].duration),m.totalDuration=m.tags[0].duration});this.lockedActionsQueue.length;){var d=this.lockedActionsQueue.shift();d.sound[d.prop].apply?d.sound[d.prop].apply(d.sound,d.value||[]):d.sound[d.prop]=d.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",s,!1)}},onBlur:function(){this.forEachActiveSound(function(n){n.isPlaying&&(this.onBlurPausedSounds.push(n),n.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(n){n.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){a.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(n,l,c){return n.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:n,prop:l,value:c}),!0):!1},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this._mute},set:function(n){this._mute=n,this.forEachActiveSound(function(l){l.updateMute()}),this.emit(u.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this._volume},set:function(n){this._volume=n,this.forEachActiveSound(function(l){l.updateVolume()}),this.emit(u.GLOBAL_VOLUME,this,n)}}});o.exports=h}),23717:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SoundManagerCreator:e(14747),Events:e(14463),BaseSound:e(30341),BaseSoundManager:e(85034),WebAudioSound:e(71741),WebAudioSoundManager:e(57490),HTML5AudioSound:e(64895),HTML5AudioSoundManager:e(33684),NoAudioSound:e(4603),NoAudioSoundManager:e(25960)}}),4603:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),x=e(83419),u=e(50792),r=e(79291),h=e(29747),n=function(){return!1},l=function(){return null},c=function(){return this},s=new x({Extends:u,initialize:function(m,p,g){g===void 0&&(g={}),u.call(this),this.manager=m,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=r({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:l,play:n,pause:n,resume:n,stop:n,setMute:c,setVolume:c,setRate:c,setDetune:c,setSeek:c,setLoop:c,setPan:c,applyConfig:l,resetConfig:l,update:h,calculateRate:l,destroy:function(){a.prototype.destroy.call(this)}});o.exports=s}),25960:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85034),x=e(83419),u=e(50792),r=e(4603),h=e(29747),n=new x({Extends:u,initialize:function(c){u.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(l,c){var s=new r(this,l,c);return this.sounds.push(s),s},addAudioSprite:function(l,c){var s=this.add(l,c);return s.spritemap={},s},get:function(l){return a.prototype.get.call(this,l)},getAll:function(l){return a.prototype.getAll.call(this,l)},play:function(l,c){return!1},playAudioSprite:function(l,c,s){return!1},remove:function(l){return a.prototype.remove.call(this,l)},removeAll:function(){return a.prototype.removeAll.call(this)},removeByKey:function(l){return a.prototype.removeByKey.call(this,l)},stopByKey:function(l){return a.prototype.stopByKey.call(this,l)},onBlur:h,onFocus:h,onGameBlur:h,onGameFocus:h,pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,unlock:h,forEachActiveSound:function(l,c){a.prototype.forEachActiveSound.call(this,l,c)},destroy:function(){a.prototype.destroy.call(this)}});o.exports=n}),71741:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),x=e(83419),u=e(14463),r=e(95540),h=new x({Extends:a,initialize:function(l,c,s){if(s===void 0&&(s={}),this.audioBuffer=l.game.cache.audio.get(c),!this.audioBuffer)throw new Error('Audio key "'+c+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=l.context.createGain(),this.volumeNode=l.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),l.context.createPanner&&(this.spatialNode=l.context.createPanner(),this.volumeNode.connect(this.spatialNode)),l.context.createStereoPanner?(this.pannerNode=l.context.createStereoPanner(),l.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(l.destination)):l.context.createPanner?this.spatialNode.connect(l.destination):this.volumeNode.connect(l.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,a.call(this,l,c,s)},play:function(n,l){return a.prototype.play.call(this,n,l)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(u.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(u.RESUME,this),!0)},stop:function(){return a.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(u.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,l=this.currentConfig.delay,c=this.manager.context.currentTime+l,s=(this.currentMarker?this.currentMarker.start:0)+n,d=this.duration-n;this.playTime=c-n,this.startTime=c,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,c),Math.max(0,s),Math.max(0,d)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),l=this.currentMarker?this.currentMarker.start:0,c=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,l),Math.max(0,c))},createBufferSource:function(){var n=this,l=this.manager.context.createBufferSource();return l.buffer=this.audioBuffer,l.connect(this.muteNode),l.onended=function(c){var s=c.target;(s===n.source||s===n.loopSource)&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},l},stopAndRemoveBufferSource:function(){if(this.source){var n=this.source;this.source=null,n.stop(),n.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var n=this.currentConfig.source;if(n&&this.manager.context.createPanner){var l=this.spatialNode;l.panningModel=r(n,"panningModel","equalpower"),l.distanceModel=r(n,"distanceModel","inverse"),l.orientationX.value=r(n,"orientationX",0),l.orientationY.value=r(n,"orientationY",0),l.orientationZ.value=r(n,"orientationZ",-1),l.refDistance=r(n,"refDistance",1),l.maxDistance=r(n,"maxDistance",1e4),l.rolloffFactor=r(n,"rolloffFactor",1),l.coneInnerAngle=r(n,"coneInnerAngle",360),l.coneOuterAngle=r(n,"coneOuterAngle",0),l.coneOuterGain=r(n,"coneOuterGain",0),this.spatialSource=r(n,"follow",null),this.spatialSource||(l.positionX.value=r(n,"x",0),l.positionY.value=r(n,"y",0),l.positionZ.value=r(n,"z",0))}a.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(n){this.spatialNode&&(this.spatialNode.positionX.value=n)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(n){this.spatialNode&&(this.spatialNode.positionY.value=n)}},update:function(){if(this.isPlaying&&this.spatialSource){var n=r(this.spatialSource,"x",null),l=r(this.spatialSource,"y",null);n&&n!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=n),l&&l!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=l)}this.hasEnded?(a.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(u.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(u.LOOPED,this))},destroy:function(){this.pendingRemove||(a.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){a.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,l=0;l<this.rateUpdates.length;l++){var c=0;l<this.rateUpdates.length-1?c=this.rateUpdates[l+1].time:c=this.manager.context.currentTime-this.playTime,n+=(c-this.rateUpdates[l].time)*this.rateUpdates[l].rate}return n},getLoopTime:function(){for(var n=0,l=0;l<this.rateUpdates.length-1;l++)n+=(this.rateUpdates[l+1].time-this.rateUpdates[l].time)*this.rateUpdates[l].rate;var c=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+c.time+(this.duration-n)/c.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(u.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(u.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(u.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(u.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(u.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(u.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(u.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});o.exports=h}),57490:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(53134),x=e(85034),u=e(83419),r=e(14463),h=e(8443),n=e(71741),l=e(95540),c=new u({Extends:x,initialize:function(d){this.context=this.createAudioContext(d),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",x.call(this,d),this.locked&&(d.isBooted?this.unlock():d.events.once(h.BOOT,this.unlock,this)),d.events.on(h.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var s=this.context;window.setTimeout(function(){s&&(s.suspend(),s.resume())},100)},createAudioContext:function(s){var d=s.config.audio;if(d.context)return d.context.resume(),d.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(s){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=s,this.masterMuteNode=s.createGain(),this.masterVolumeNode=s.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(s.destination),this.destination=this.masterMuteNode,this},add:function(s,d){var m=new n(this,s,d);return this.sounds.push(m),m},decodeAudio:function(s,d){var m;Array.isArray(s)?m=s:m=[{key:s,data:d}];for(var p=this.game.cache.audio,g=m.length,T=0;T<m.length;T++){var S=m[T],w=S.key,A=S.data;typeof A=="string"&&(A=a(A));var M=(function(P,b){p.add(P,b),this.emit(r.DECODED,P),g--,g===0&&this.emit(r.DECODED_ALL)}).bind(this,w),R=(function(P,b){console.error("Error decoding audio: "+P+" - ",b?b.message:""),g--,g===0&&this.emit(r.DECODED_ALL)}).bind(this,w);this.context.decodeAudioData(A,M,R)}},setListenerPosition:function(s,d){return s===void 0&&(s=this.game.scale.width/2),d===void 0&&(d=this.game.scale.height/2),this.listenerPosition.set(s,d),this},unlock:function(){var s=this,d=document.body,m=function p(){if(s.context&&d){var g=d.removeEventListener.bind(d);s.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("mousedown",p),g("mouseup",p),g("keydown",p),s.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("mousedown",p),g("mouseup",p),g("keydown",p)})}};d&&(d.addEventListener("touchstart",m,!1),d.addEventListener("touchend",m,!1),d.addEventListener("mousedown",m,!1),d.addEventListener("mouseup",m,!1),d.addEventListener("keydown",m,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var s=this.context;s&&!this.locked&&(s.state==="suspended"||s.state==="interrupted")&&s.resume()},update:function(s,d){var m=this.context.listener,p=l(this.listenerPosition,"x",null),g=l(this.listenerPosition,"y",null);if(m&&m.positionX!==void 0)p&&p!==this._spatialx&&(this._spatialx=m.positionX.value=p),g&&g!==this._spatialy&&(this._spatialy=m.positionY.value=g);else if(m){p&&p!==this._spatialx&&(this._spatialx=p),g&&g!==this._spatialy&&(this._spatialy=g);var T=l(m,"z",0);m.setPosition(this._spatialx||0,this._spatialy||0,T)}x.prototype.update.call(this,s,d),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var s=this;this.context.close().then(function(){s.context=null})}this.game.events.off(h.VISIBLE,this.onGameVisible,this),x.prototype.destroy.call(this)},setMute:function(s){return this.mute=s,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(s){this.masterMuteNode.gain.setValueAtTime(s?0:1,0),this.emit(r.GLOBAL_MUTE,this,s)}},setVolume:function(s){return this.volume=s,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(s){this.masterVolumeNode.gain.setValueAtTime(s,0),this.emit(r.GLOBAL_VOLUME,this,s)}}});o.exports=c}),73162:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),x=e(83419),u=e(29747),r=e(19186),h=new x({initialize:function(l){this.parent=l,this.list=[],this.position=0,this.addCallback=u,this.removeCallback=u,this._sortKey=""},add:function(n,l){return l?a.Add(this.list,n):a.Add(this.list,n,0,this.addCallback,this)},addAt:function(n,l,c){return c?a.AddAt(this.list,n,l):a.AddAt(this.list,n,l,0,this.addCallback,this)},getAt:function(n){return this.list[n]},getIndex:function(n){return this.list.indexOf(n)},sort:function(n,l){return n?(l===void 0&&(l=function(c,s){return c[n]-s[n]}),r(this.list,l),this):this},getByName:function(n){return a.GetFirst(this.list,"name",n)},getRandom:function(n,l){return a.GetRandom(this.list,n,l)},getFirst:function(n,l,c,s){return a.GetFirst(this.list,n,l,c,s)},getAll:function(n,l,c,s){return a.GetAll(this.list,n,l,c,s)},count:function(n,l){return a.CountAllMatching(this.list,n,l)},swap:function(n,l){a.Swap(this.list,n,l)},moveTo:function(n,l){return a.MoveTo(this.list,n,l)},moveAbove:function(n,l){return a.MoveAbove(this.list,n,l)},moveBelow:function(n,l){return a.MoveBelow(this.list,n,l)},remove:function(n,l){return l?a.Remove(this.list,n):a.Remove(this.list,n,this.removeCallback,this)},removeAt:function(n,l){return l?a.RemoveAt(this.list,n):a.RemoveAt(this.list,n,this.removeCallback,this)},removeBetween:function(n,l,c){return c?a.RemoveBetween(this.list,n,l):a.RemoveBetween(this.list,n,l,this.removeCallback,this)},removeAll:function(n){for(var l=this.list.length;l--;)this.remove(this.list[l],n);return this},bringToTop:function(n){return a.BringToTop(this.list,n)},sendToBack:function(n){return a.SendToBack(this.list,n)},moveUp:function(n){return a.MoveUp(this.list,n),n},moveDown:function(n){return a.MoveDown(this.list,n),n},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(n,l){return a.Replace(this.list,n,l)},exists:function(n){return this.list.indexOf(n)>-1},setAll:function(n,l,c,s){return a.SetAll(this.list,n,l,c,s),this},each:function(n,l){for(var c=[null],s=2;s<arguments.length;s++)c.push(arguments[s]);for(s=0;s<this.list.length;s++)c[0]=this.list[s],n.apply(l,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});o.exports=h}),90330:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r){this.entries={},this.size=0,this.setAll(r)},setAll:function(u){if(Array.isArray(u))for(var r=0;r<u.length;r++)this.set(u[r][0],u[r][1]);return this},set:function(u,r){return this.has(u)||this.size++,this.entries[u]=r,this},get:function(u){if(this.has(u))return this.entries[u]},getArray:function(){var u=[],r=this.entries;for(var h in r)u.push(r[h]);return u},has:function(u){return this.entries.hasOwnProperty(u)},delete:function(u){return this.has(u)&&(delete this.entries[u],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(u){delete this.entries[u]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var u=[],r=this.entries;for(var h in r)u.push(r[h]);return u},dump:function(){var u=this.entries;console.group("Map");for(var r in u)console.log(r,u[r]);console.groupEnd()},each:function(u){var r=this.entries;for(var h in r)if(u(h,r[h])===!1)break;return this},contains:function(u){var r=this.entries;for(var h in r)if(r[h]===u)return!0;return!1},merge:function(u,r){r===void 0&&(r=!1);var h=this.entries,n=u.entries;for(var l in n)h.hasOwnProperty(l)&&r?h[l]=n[l]:this.set(l,n[l]);return this}});o.exports=x}),25774:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),u=e(82348),r=new a({Extends:x,initialize:function(){x.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(h){return this._active.indexOf(h)>-1},isPending:function(h){return this._toProcess>0&&this._pending.indexOf(h)>-1},isDestroying:function(h){return this._destroy.indexOf(h)>-1},add:function(h){return this.checkQueue&&this.isActive(h)&&!this.isDestroying(h)||this.isPending(h)||(this._pending.push(h),this._toProcess++),h},remove:function(h){if(this.isPending(h)){var n=this._pending,l=n.indexOf(h);l!==-1&&n.splice(l,1)}else this.isActive(h)&&(this._destroy.push(h),this._toProcess++);return h},removeAll:function(){for(var h=this._active,n=this._destroy,l=h.length;l--;)n.push(h[l]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,n=this._active,l,c;for(l=0;l<h.length;l++){c=h[l];var s=n.indexOf(c);s!==-1&&(n.splice(s,1),this.emit(u.PROCESS_QUEUE_REMOVE,c))}for(h.length=0,h=this._pending,l=0;l<h.length;l++)c=h[l],(!this.checkQueue||this.checkQueue&&n.indexOf(c)===-1)&&(n.push(c),this.emit(u.PROCESS_QUEUE_ADD,c));return h.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});o.exports=r}),59542:((o,E,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43886);function x(A){if(!(this instanceof x))return new x(A);this._maxEntries=Math.max(4,A||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}x.prototype={all:function(){return this._all(this.data,[])},search:function(A){var M=this.data,R=[],P=this.toBBox;if(!T(A,M))return R;for(var b=[],F,I,L,D;M;){for(F=0,I=M.children.length;F<I;F++)L=M.children[F],D=M.leaf?P(L):L,T(A,D)&&(M.leaf?R.push(L):g(A,D)?this._all(L,R):b.push(L));M=b.pop()}return R},collides:function(A){var M=this.data,R=this.toBBox;if(!T(A,M))return!1;for(var P=[],b,F,I,L;M;){for(b=0,F=M.children.length;b<F;b++)if(I=M.children[b],L=M.leaf?R(I):I,T(A,L)){if(M.leaf||g(A,L))return!0;P.push(I)}M=P.pop()}return!1},load:function(A){if(!(A&&A.length))return this;if(A.length<this._minEntries){for(var M=0,R=A.length;M<R;M++)this.insert(A[M]);return this}var P=this._build(A.slice(),0,A.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var b=this.data;this.data=P,P=b}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(A){return A&&this._insert(A,this.data.height-1),this},clear:function(){return this.data=S([]),this},remove:function(A,M){if(!A)return this;for(var R=this.data,P=this.toBBox(A),b=[],F=[],I,L,D,O;R||b.length;){if(R||(R=b.pop(),L=b[b.length-1],I=F.pop(),O=!0),R.leaf&&(D=u(A,R.children,M),D!==-1))return R.children.splice(D,1),b.push(R),this._condense(b),this;!O&&!R.leaf&&g(R,P)?(b.push(R),F.push(I),I=0,L=R,R=R.children[0]):L?(I++,R=L.children[I],O=!1):R=null}return this},toBBox:function(A){return A},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(A){return this.data=A,this},_all:function(A,M){for(var R=[];A;)A.leaf?M.push.apply(M,A.children):R.push.apply(R,A.children),A=R.pop();return M},_build:function(A,M,R,P){var b=R-M+1,F=this._maxEntries,I;if(b<=F)return I=S(A.slice(M,R+1)),r(I,this.toBBox),I;P||(P=Math.ceil(Math.log(b)/Math.log(F)),F=Math.ceil(b/Math.pow(F,P-1))),I=S([]),I.leaf=!1,I.height=P;var L=Math.ceil(b/F),D=L*Math.ceil(Math.sqrt(F)),O,z,W,X;for(w(A,M,R,D,this.compareMinX),O=M;O<=R;O+=D)for(W=Math.min(O+D-1,R),w(A,O,W,L,this.compareMinY),z=O;z<=W;z+=L)X=Math.min(z+L-1,W),I.children.push(this._build(A,z,X,P-1));return r(I,this.toBBox),I},_chooseSubtree:function(A,M,R,P){for(var b,F,I,L,D,O,z,W;P.push(M),!(M.leaf||P.length-1===R);){for(z=W=1/0,b=0,F=M.children.length;b<F;b++)I=M.children[b],D=s(I),O=m(A,I)-D,O<W?(W=O,z=D<z?D:z,L=I):O===W&&D<z&&(z=D,L=I);M=L||M.children[0]}return M},_insert:function(A,M,R){var P=this.toBBox,b=R?A:P(A),F=[],I=this._chooseSubtree(b,this.data,M,F);for(I.children.push(A),n(I,b);M>=0&&F[M].children.length>this._maxEntries;)this._split(F,M),M--;this._adjustParentBBoxes(b,F,M)},_split:function(A,M){var R=A[M],P=R.children.length,b=this._minEntries;this._chooseSplitAxis(R,b,P);var F=this._chooseSplitIndex(R,b,P),I=S(R.children.splice(F,R.children.length-F));I.height=R.height,I.leaf=R.leaf,r(R,this.toBBox),r(I,this.toBBox),M?A[M-1].children.push(I):this._splitRoot(R,I)},_splitRoot:function(A,M){this.data=S([A,M]),this.data.height=A.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(A,M,R){var P,b,F,I,L,D,O,z;for(D=O=1/0,P=M;P<=R-M;P++)b=h(A,0,P,this.toBBox),F=h(A,P,R,this.toBBox),I=p(b,F),L=s(b)+s(F),I<D?(D=I,z=P,O=L<O?L:O):I===D&&L<O&&(O=L,z=P);return z},_chooseSplitAxis:function(A,M,R){var P=A.leaf?this.compareMinX:l,b=A.leaf?this.compareMinY:c,F=this._allDistMargin(A,M,R,P),I=this._allDistMargin(A,M,R,b);F<I&&A.children.sort(P)},_allDistMargin:function(A,M,R,P){A.children.sort(P);var b=this.toBBox,F=h(A,0,M,b),I=h(A,R-M,R,b),L=d(F)+d(I),D,O;for(D=M;D<R-M;D++)O=A.children[D],n(F,A.leaf?b(O):O),L+=d(F);for(D=R-M-1;D>=M;D--)O=A.children[D],n(I,A.leaf?b(O):O),L+=d(I);return L},_adjustParentBBoxes:function(A,M,R){for(var P=R;P>=0;P--)n(M[P],A)},_condense:function(A){for(var M=A.length-1,R;M>=0;M--)A[M].children.length===0?M>0?(R=A[M-1].children,R.splice(R.indexOf(A[M]),1)):this.clear():r(A[M],this.toBBox)},compareMinX:function(A,M){return A.left-M.left},compareMinY:function(A,M){return A.top-M.top},toBBox:function(A){return{minX:A.left,minY:A.top,maxX:A.right,maxY:A.bottom}}};function u(A,M,R){if(!R)return M.indexOf(A);for(var P=0;P<M.length;P++)if(R(A,M[P]))return P;return-1}function r(A,M){h(A,0,A.children.length,M,A)}function h(A,M,R,P,b){b||(b=S(null)),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0;for(var F=M,I;F<R;F++)I=A.children[F],n(b,A.leaf?P(I):I);return b}function n(A,M){return A.minX=Math.min(A.minX,M.minX),A.minY=Math.min(A.minY,M.minY),A.maxX=Math.max(A.maxX,M.maxX),A.maxY=Math.max(A.maxY,M.maxY),A}function l(A,M){return A.minX-M.minX}function c(A,M){return A.minY-M.minY}function s(A){return(A.maxX-A.minX)*(A.maxY-A.minY)}function d(A){return A.maxX-A.minX+(A.maxY-A.minY)}function m(A,M){return(Math.max(M.maxX,A.maxX)-Math.min(M.minX,A.minX))*(Math.max(M.maxY,A.maxY)-Math.min(M.minY,A.minY))}function p(A,M){var R=Math.max(A.minX,M.minX),P=Math.max(A.minY,M.minY),b=Math.min(A.maxX,M.maxX),F=Math.min(A.maxY,M.maxY);return Math.max(0,b-R)*Math.max(0,F-P)}function g(A,M){return A.minX<=M.minX&&A.minY<=M.minY&&M.maxX<=A.maxX&&M.maxY<=A.maxY}function T(A,M){return M.minX<=A.maxX&&M.minY<=A.maxY&&M.maxX>=A.minX&&M.maxY>=A.minY}function S(A){return{children:A,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(A,M,R,P,b){for(var F=[M,R],I;F.length;)R=F.pop(),M=F.pop(),!(R-M<=P)&&(I=M+Math.ceil((R-M)/P/2)*P,a(A,I,M,R,b),F.push(M,I,I,R))}o.exports=x}),35072:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r){if(this.entries=[],Array.isArray(r))for(var h=0;h<r.length;h++)this.set(r[h])},set:function(u){return this.entries.indexOf(u)===-1&&this.entries.push(u),this},get:function(u,r){for(var h=0;h<this.entries.length;h++){var n=this.entries[h];if(n[u]===r)return n}},getArray:function(){return this.entries.slice(0)},delete:function(u){var r=this.entries.indexOf(u);return r>-1&&this.entries.splice(r,1),this},dump:function(){console.group("Set");for(var u=0;u<this.entries.length;u++){var r=this.entries[u];console.log(r)}console.groupEnd()},each:function(u,r){var h,n=this.entries.slice(),l=n.length;if(r)for(h=0;h<l&&u.call(r,n[h],h)!==!1;h++);else for(h=0;h<l&&u(n[h],h)!==!1;h++);return this},iterate:function(u,r){var h,n=this.entries.length;if(r)for(h=0;h<n&&u.call(r,this.entries[h],h)!==!1;h++);else for(h=0;h<n&&u(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(u){var r,h=[];for(r=1;r<arguments.length;r++)h.push(arguments[r]);var n=this.entries.length;for(r=0;r<n;r++){var l=this.entries[r];l[u].apply(l,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(u){return this.entries.indexOf(u)>-1},union:function(u){var r=new x;return u.entries.forEach(function(h){r.set(h)}),this.entries.forEach(function(h){r.set(h)}),r},intersect:function(u){var r=new x;return this.entries.forEach(function(h){u.contains(h)&&r.set(h)}),r},difference:function(u){var r=new x;return this.entries.forEach(function(h){u.contains(h)||r.set(h)}),r},size:{get:function(){return this.entries.length},set:function(u){return u<this.entries.length?this.entries.length=u:this.entries.length}}});o.exports=x}),86555:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),x=e(83419),u=e(56583),r=e(26099),h=new x({initialize:function(l,c,s,d){l===void 0&&(l=0),c===void 0&&(c=l),s===void 0&&(s=0),d===void 0&&(d=null),this._width=l,this._height=c,this._parent=d,this.aspectMode=s,this.aspectRatio=c===0?1:l/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new r},setAspectMode:function(n){return n===void 0&&(n=0),this.aspectMode=n,this.setSize(this._width,this._height)},setSnap:function(n,l){return n===void 0&&(n=0),l===void 0&&(l=n),this.snapTo.set(n,l),this.setSize(this._width,this._height)},setParent:function(n){return this._parent=n,this.setSize(this._width,this._height)},setMin:function(n,l){return n===void 0&&(n=0),l===void 0&&(l=n),this.minWidth=a(n,0,this.maxWidth),this.minHeight=a(l,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(n,l){return n===void 0&&(n=Number.MAX_VALUE),l===void 0&&(l=n),this.maxWidth=a(n,this.minWidth,Number.MAX_VALUE),this.maxHeight=a(l,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(n,l){switch(n===void 0&&(n=0),l===void 0&&(l=n),this.aspectMode){case h.NONE:this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(u(l,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(u(l,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(n,l,!0);break;case h.ENVELOP:this.constrain(n,l,!1);break}return this},setAspectRatio:function(n){return this.aspectRatio=n,this.setSize(this._width,this._height)},resize:function(n,l){return this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(u(l,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(n,l){return l===void 0&&(l=!0),n=a(n,this.minWidth,this.maxWidth),l&&this._parent&&n>this._parent.width&&(n=Math.max(this.minWidth,this._parent.width)),n},getNewHeight:function(n,l){return l===void 0&&(l=!0),n=a(n,this.minHeight,this.maxHeight),l&&this._parent&&n>this._parent.height&&(n=Math.max(this.minHeight,this._parent.height)),n},constrain:function(n,l,c){n===void 0&&(n=0),l===void 0&&(l=n),c===void 0&&(c=!0),n=this.getNewWidth(n),l=this.getNewHeight(l);var s=this.snapTo,d=l===0?1:n/l;return c&&this.aspectRatio>d||!c&&this.aspectRatio<d?(n=u(n,s.x),l=n/this.aspectRatio,s.y>0&&(l=u(l,s.y),n=l*this.aspectRatio)):(c&&this.aspectRatio<d||!c&&this.aspectRatio>d)&&(l=u(l,s.y),n=l*this.aspectRatio,s.x>0&&(n=u(n,s.x),l=n*(1/this.aspectRatio))),this._width=n,this._height=l,this},fitTo:function(n,l){return this.constrain(n,l,!0)},envelop:function(n,l){return this.constrain(n,l,!1)},setWidth:function(n){return this.setSize(n,this._height)},setHeight:function(n){return this.setSize(this._width,n)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(n){n&&n.style&&(n.style.width=this._width+"px",n.style.height=this._height+"px")},copy:function(n){return n.setAspectMode(this.aspectMode),n.aspectRatio=this.aspectRatio,n.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(n){this.setSize(n,this._height)}},height:{get:function(){return this._height},set:function(n){this.setSize(this._width,n)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,o.exports=h}),15238:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"}),56187:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"}),82348:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={PROCESS_QUEUE_ADD:e(15238),PROCESS_QUEUE_REMOVE:e(56187)}}),41392:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:e(82348),List:e(73162),Map:e(90330),ProcessQueue:e(25774),RTree:e(59542),Set:e(35072),Size:e(86555)}}),57382:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(45319),u=e(40987),r=e(8054),h=e(50030),n=e(79237),l=new a({Extends:n,initialize:function(s,d,m,p,g){n.call(this,s,d,m,p,g),this.add("__BASE",0,0,0,p,g),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=p,this.height=g,this.imageData=this.context.getImageData(0,0,p,g),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===r.WEBGL&&this.refresh(),this},draw:function(c,s,d,m){return m===void 0&&(m=!0),this.context.drawImage(d,c,s),m&&this.update(),this},drawFrame:function(c,s,d,m,p){d===void 0&&(d=0),m===void 0&&(m=0),p===void 0&&(p=!0);var g=this.manager.getFrame(c,s);if(g){var T=g.canvasData,S=g.cutWidth,w=g.cutHeight,A=g.source.resolution;this.context.drawImage(g.source.image,T.x,T.y,S,w,d,m,S/A,w/A),p&&this.update()}return this},setPixel:function(c,s,d,m,p,g){g===void 0&&(g=255),c=Math.abs(Math.floor(c)),s=Math.abs(Math.floor(s));var T=this.getIndex(c,s);if(T>-1){var S=this.context.getImageData(c,s,1,1);S.data[0]=d,S.data[1]=m,S.data[2]=p,S.data[3]=g,this.context.putImageData(S,c,s)}return this},putData:function(c,s,d,m,p,g,T){return m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=c.width),T===void 0&&(T=c.height),this.context.putImageData(c,s,d,m,p,g,T),this},getData:function(c,s,d,m){c=x(Math.floor(c),0,this.width-1),s=x(Math.floor(s),0,this.height-1),d=x(d,1,this.width-c),m=x(m,1,this.height-s);var p=this.context.getImageData(c,s,d,m);return p},getPixel:function(c,s,d){d||(d=new u);var m=this.getIndex(c,s);if(m>-1){var p=this.data,g=p[m+0],T=p[m+1],S=p[m+2],w=p[m+3];d.setTo(g,T,S,w)}return d},getPixels:function(c,s,d,m){c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=this.width),m===void 0&&(m=d),c=Math.abs(Math.round(c)),s=Math.abs(Math.round(s));for(var p=x(c,0,this.width),g=x(c+d,0,this.width),T=x(s,0,this.height),S=x(s+m,0,this.height),w=new u,A=[],M=T;M<S;M++){for(var R=[],P=p;P<g;P++)w=this.getPixel(P,M,w),R.push({x:P,y:M,color:w.color,alpha:w.alphaGL});A.push(R)}return A},getIndex:function(c,s){return c=Math.abs(Math.round(c)),s=Math.abs(Math.round(s)),c<this.width&&s<this.height?(c+s*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,s,d,m,p){return c===void 0&&(c=0),s===void 0&&(s=0),d===void 0&&(d=this.width),m===void 0&&(m=this.height),p===void 0&&(p=!0),this.context.clearRect(c,s,d,m),p&&this.update(),this},setSize:function(c,s){return s===void 0&&(s=c),(c!==this.width||s!==this.height)&&(this.canvas.width=c,this.canvas.height=s,this._source.width=c,this._source.height=s,this._source.isPowerOf2=h(c,s),this.frames.__BASE.setSize(c,s,0,0),this.width=c,this.height=s,this.refresh()),this},destroy:function(){n.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});o.exports=l}),81320:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),x=e(38058),u=e(27919),r=e(83419),h=e(8054),n=e(4327),l=e(95540),c=e(36060),s=e(32302),d=e(79237),m=e(70554),p=new r({Extends:d,initialize:function(T,S,w,A,M){w===void 0&&(w=256),A===void 0&&(A=256),M===void 0&&(M=!0),this.type="DynamicTexture";var R=T.game.renderer,P=R&&R.type===h.CANVAS,b=P?u.create2D(this,w,A):[this];d.call(this,T,S,b,w,A),this.add("__BASE",0,0,0,w,A),this.renderer=R,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=P?b:null,this.context=P?b.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new x(0,0,w,A).setScene(T.game.scene.systemScene,!1),this.renderTarget=P?null:new s(R,w,A,1,0,!1,!1,!0,!1),this.pipeline=P?null:R.pipelines.get(c.SINGLE_PIPELINE),this.setSize(w,A,M)},setSize:function(g,T,S){T===void 0&&(T=g),S===void 0&&(S=!0),S&&(g=Math.floor(g),T=Math.floor(T),g%2!==0&&g++,T%2!==0&&T++);var w=this.get(),A=w.source;if(g!==this.width||T!==this.height){this.canvas&&(this.canvas.width=g,this.canvas.height=T);var M=this.renderTarget;M&&(M.willResize(g,T)&&M.resize(g,T),M.texture!==A.glTexture&&this.renderer.deleteTexture(A.glTexture),this.setFromRenderTarget()),this.camera.setSize(g,T),A.width=g,A.height=T,w.setSize(g,T),this.width=g,this.height=T}else{var R=this.getSourceImage();w.cutX+g>R.width&&(g=R.width-w.cutX),w.cutY+T>R.height&&(T=R.height-w.cutY),w.setSize(g,T,w.cutX,w.cutY)}return this},setFromRenderTarget:function(){var g=this.get(),T=g.source,S=this.renderTarget;return T.isRenderTexture=!0,T.isGLTexture=!0,T.glTexture=S.texture,this},setIsSpriteTexture:function(g){return this.isSpriteTexture=g,this},fill:function(g,T,S,w,A,M){var R=this.camera,P=this.renderer;T===void 0&&(T=1),S===void 0&&(S=0),w===void 0&&(w=0),A===void 0&&(A=this.width),M===void 0&&(M=this.height);var b=g>>16&255,F=g>>8&255,I=g&255,L=this.renderTarget;if(R.preRender(),L){L.bind(!0);var D=this.pipeline.manager.set(this.pipeline),O=P.width/L.width,z=P.height/L.height,W=L.height-(w+M);D.drawFillRect(S*O,W*z,A*O,M*z,m.getTintFromFloats(I/255,F/255,b/255,1),T),L.unbind(!0)}else{var X=this.context;P.setContext(X),X.globalCompositeOperation="source-over",X.fillStyle="rgba("+b+","+F+","+I+","+T+")",X.fillRect(S,w,A,M),P.setContext()}return this.dirty=!0,this},clear:function(g,T,S,w){if(this.dirty){var A=this.context,M=this.renderTarget;M?M.clear(g,T,S,w):A&&(g!==void 0&&T!==void 0&&S!==void 0&&w!==void 0?A.clearRect(g,T,S,w):(A.save(),A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,this.width,this.height),A.restore())),this.dirty=!1}return this},stamp:function(g,T,S,w,A){S===void 0&&(S=0),w===void 0&&(w=0);var M=l(A,"alpha",1),R=l(A,"tint",16777215),P=l(A,"angle",0),b=l(A,"rotation",0),F=l(A,"scale",1),I=l(A,"scaleX",F),L=l(A,"scaleY",F),D=l(A,"originX",.5),O=l(A,"originY",.5),z=l(A,"blendMode",0),W=l(A,"erase",!1),X=l(A,"skipBatch",!1),_=this.manager.resetStamp(M,R);return _.setAngle(0),P!==0?_.setAngle(P):b!==0&&_.setRotation(b),_.setScale(I,L),_.setTexture(g,T),_.setOrigin(D,O),_.setBlendMode(z),W&&(this._eraseMode=!0),X?this.batchGameObject(_,S,w):this.draw(_,S,w),W&&(this._eraseMode=!1),this},erase:function(g,T,S){return this._eraseMode=!0,this.draw(g,T,S),this._eraseMode=!1,this},draw:function(g,T,S,w,A){return this.beginDraw(),this.batchDraw(g,T,S,w,A),this.endDraw(),this},drawFrame:function(g,T,S,w,A,M){return this.beginDraw(),this.batchDrawFrame(g,T,S,w,A,M),this.endDraw(),this},repeat:function(g,T,S,w,A,M,R,P,b){if(S===void 0&&(S=0),w===void 0&&(w=0),A===void 0&&(A=this.width),M===void 0&&(M=this.height),R===void 0&&(R=1),P===void 0&&(P=16777215),b===void 0&&(b=!1),g instanceof n?T=g:T=this.manager.getFrame(g,T),!T)return this;var F=this.manager.resetStamp(R,P);F.setFrame(T),F.setOrigin(0);var I=T.width,L=T.height;A=Math.floor(A),M=Math.floor(M);var D=Math.ceil(A/I),O=Math.ceil(M/L),z=D*I-A,W=O*L-M;z>0&&(z=I-z),W>0&&(W=L-W),S<0&&(D+=Math.ceil(Math.abs(S)/I)),w<0&&(O+=Math.ceil(Math.abs(w)/L));var X=S,_=w,U=!1,G=this.manager.stampCrop.setTo(0,0,I,L);b||this.beginDraw();for(var N=0;N<O;N++){if(_+L<0){_+=L;continue}for(var H=0;H<D;H++){if(U=!1,X+I<0){X+=I;continue}else X<0&&(U=!0,G.width=I+X,G.x=I-G.width);_<0&&(U=!0,G.height=L+_,G.y=L-G.height),z>0&&H===D-1&&(U=!0,G.width=z),W>0&&N===O-1&&(U=!0,G.height=W),U&&F.setCrop(G),this.batchGameObject(F,X,_),F.isCropped=!1,G.setTo(0,0,I,L),X+=I}X=S,_+=L}return b||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var g=this.camera,T=this.renderer,S=this.renderTarget;g.preRender(),S?T.beginCapture(S.width,S.height):T.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(g,T,S,w,A){return Array.isArray(g)||(g=[g]),this.batchList(g,T,S,w,A),this},batchDrawFrame:function(g,T,S,w,A,M){S===void 0&&(S=0),w===void 0&&(w=0),A===void 0&&(A=1),M===void 0&&(M=16777215);var R=this.manager.getFrame(g,T);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,S,w,M,A,this.camera.matrix,null):this.batchTextureFrame(R,S,w,A,M)),this},endDraw:function(g){if(g===void 0&&(g=this._eraseMode),this.isDrawing){var T=this.renderer,S=this.renderTarget;if(S){var w=T.endCapture(),A=T.pipelines.setUtility();A.blitFrame(w,S,1,!1,!1,g,this.isSpriteTexture),T.resetScissor(),T.resetViewport()}else T.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(g,T,S,w,A){var M=g.length;if(M!==0)for(var R=0;R<M;R++){var P=g[R];!P||P===this||(P.renderWebGL||P.renderCanvas?this.batchGameObject(P,T,S):P.isParent||P.list?this.batchGroup(P.getChildren(),T,S):typeof P=="string"?this.batchTextureFrameKey(P,null,T,S,w,A):P instanceof n?this.batchTextureFrame(P,T,S,w,A):Array.isArray(P)&&this.batchList(P,T,S,w,A))}},batchGroup:function(g,T,S){T===void 0&&(T=0),S===void 0&&(S=0);for(var w=0;w<g.length;w++){var A=g[w];A.willRender(this.camera)&&this.batchGameObject(A,A.x+T,A.y+S)}},batchGameObject:function(g,T,S){T===void 0&&(T=g.x),S===void 0&&(S=g.y);var w=g.x,A=g.y,M=this.camera,R=this.renderer,P=this._eraseMode,b=g.mask;if(g.setPosition(T,S),this.canvas){if(P){var F=g.blendMode;g.blendMode=a.ERASE}b&&b.preRenderCanvas(R,g,M),g.renderCanvas(R,g,M,null),b&&b.postRenderCanvas(R,g,M),P&&(g.blendMode=F)}else R&&(b&&b.preRenderWebGL(R,g,M),P||R.setBlendMode(g.blendMode),g.renderWebGL(R,g,M),b&&b.postRenderWebGL(R,M,this.renderTarget));g.setPosition(w,A)},batchTextureFrameKey:function(g,T,S,w,A,M){var R=this.manager.getFrame(g,T);R&&this.batchTextureFrame(R,S,w,A,M)},batchTextureFrame:function(g,T,S,w,A){T===void 0&&(T=0),S===void 0&&(S=0),w===void 0&&(w=1),A===void 0&&(A=16777215);var M=this.camera.matrix,R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(g,T,S,A,w,M,null);else{var P=this.context,b=g.canvasData,F=g.source.image;P.save(),P.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",P.globalAlpha=w,M.setToContext(P),b.width>0&&b.height>0&&P.drawImage(F,b.x,b.y,b.width,b.height,T,S,b.width,b.height),P.restore()}},snapshotArea:function(g,T,S,w,A,M,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,A,!1,g,T,S,w,M,R):this.renderer.snapshotCanvas(this.canvas,A,!1,g,T,S,w,M,R),this},snapshot:function(g,T,S){return this.snapshotArea(0,0,this.width,this.height,g,T,S)},snapshotPixel:function(g,T,S){return this.snapshotArea(g,T,1,1,S,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(g,T,S,w){var A=this.manager.resetStamp();A.setTexture(this),A.setOrigin(0),A.renderWebGL(g,A,S,w)},renderCanvas:function(){},destroy:function(){var g=this.manager.stamp;g&&g.texture===this&&this.manager.resetStamp(),d.prototype.destroy.call(this),u.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});o.exports=p}),4327:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(45319),u=e(79291),r=new a({initialize:function(n,l,c,s,d,m,p){this.texture=n,this.name=l,this.source=n.source[c],this.sourceIndex=c,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(m,p,s,d)},setCutPosition:function(h,n){return h===void 0&&(h=0),n===void 0&&(n=0),this.cutX=h,this.cutY=n,this.updateUVs()},setCutSize:function(h,n){return this.cutWidth=h,this.cutHeight=n,this.updateUVs()},setSize:function(h,n,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.setCutPosition(l,c),this.setCutSize(h,n),this.width=h,this.height=n,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(n*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(n/2);var s=this.data,d=s.cut;d.x=l,d.y=c,d.w=h,d.h=n,d.r=l+h,d.b=c+n,s.sourceSize.w=h,s.sourceSize.h=n,s.spriteSourceSize.w=h,s.spriteSourceSize.h=n,s.radius=.5*Math.sqrt(h*h+n*n);var m=s.drawImage;return m.x=l,m.y=c,m.width=h,m.height=n,this.updateUVs()},setTrim:function(h,n,l,c,s,d){var m=this.data,p=m.spriteSourceSize;return m.trim=!0,m.sourceSize.w=h,m.sourceSize.h=n,p.x=l,p.y=c,p.w=s,p.h=d,p.r=l+s,p.b=c+d,this.x=l,this.y=c,this.width=s,this.height=d,this.halfWidth=s*.5,this.halfHeight=d*.5,this.centerX=Math.floor(s/2),this.centerY=Math.floor(d/2),this.updateUVs()},setScale9:function(h,n,l,c){var s=this.data;return s.scale9=!0,s.is3Slice=n===0&&c===this.height,s.scale9Borders.x=h,s.scale9Borders.y=n,s.scale9Borders.w=l,s.scale9Borders.h=c,this},setCropUVs:function(h,n,l,c,s,d,m){var p=this.cutX,g=this.cutY,T=this.cutWidth,S=this.cutHeight,w=this.realWidth,A=this.realHeight;n=x(n,0,w),l=x(l,0,A),c=x(c,0,w-n),s=x(s,0,A-l);var M=p+n,R=g+l,P=c,b=s,F=this.data;if(F.trim){var I=F.spriteSourceSize;c=x(c,0,I.x+T-n),s=x(s,0,I.y+S-l);var L=n+c,D=l+s,O=!(I.r<n||I.b<l||I.x>L||I.y>D);if(O){var z=Math.max(I.x,n),W=Math.max(I.y,l),X=Math.min(I.r,L)-z,_=Math.min(I.b,D)-W;P=X,b=_,d?M=p+(T-(z-I.x)-X):M=p+(z-I.x),m?R=g+(S-(W-I.y)-_):R=g+(W-I.y),n=z,l=W,c=X,s=_}else M=0,R=0,P=0,b=0}else d&&(M=p+(T-n-c)),m&&(R=g+(S-l-s));var U=this.source.width,G=this.source.height;return h.u0=Math.max(0,M/U),h.v0=Math.max(0,R/G),h.u1=Math.min(1,(M+P)/U),h.v1=Math.min(1,(R+b)/G),h.x=n,h.y=l,h.cx=M,h.cy=R,h.cw=P,h.ch=b,h.width=c,h.height=s,h.flipX=d,h.flipY=m,h},updateCropUVs:function(h,n,l){return this.setCropUVs(h,h.x,h.y,h.width,h.height,n,l)},setUVs:function(h,n,l,c,s,d){var m=this.data.drawImage;return m.width=h,m.height=n,this.u0=l,this.v0=c,this.u1=s,this.v1=d,this},updateUVs:function(){var h=this.cutX,n=this.cutY,l=this.cutWidth,c=this.cutHeight,s=this.data.drawImage;s.width=l,s.height=c;var d=this.source.width,m=this.source.height;return this.u0=h/d,this.v0=n/m,this.u1=(h+l)/d,this.v1=(n+c)/m,this},updateUVsInverted:function(){var h=this.source.width,n=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/n,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/n,this},clone:function(){var h=new r(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=u(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});o.exports=r}),79237:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(4327),u=e(11876),r='Texture "%s" has no frame "%s"',h=new a({initialize:function(l,c,s,d,m){Array.isArray(s)||(s=[s]),this.manager=l,this.key=c,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var p=0;p<s.length;p++)this.source.push(new u(this,s[p],d,m))},add:function(n,l,c,s,d,m){if(this.has(n))return null;var p=new x(this,n,l,c,s,d,m);return this.frames[n]=p,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,p},remove:function(n){if(this.has(n)){var l=this.get(n);return l.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames.hasOwnProperty(n)},get:function(n){n||(n=this.firstFrame);var l=this.frames[n];return l||(console.warn(r,this.key,n),l=this.frames[this.firstFrame]),l},getTextureSourceIndex:function(n){for(var l=0;l<this.source.length;l++)if(this.source[l]===n)return l;return-1},getFramesFromTextureSource:function(n,l){l===void 0&&(l=!1);var c=[];for(var s in this.frames)if(!(s==="__BASE"&&!l)){var d=this.frames[s];d.sourceIndex===n&&c.push(d)}return c},getFrameBounds:function(n){n===void 0&&(n=0);for(var l=this.getFramesFromTextureSource(n,!0),c=l[0],s=c.cutX,d=c.cutY,m=c.cutX+c.cutWidth,p=c.cutY+c.cutHeight,g=1;g<l.length;g++){var T=l[g];T.cutX<s&&(s=T.cutX),T.cutY<d&&(d=T.cutY),T.cutX+T.cutWidth>m&&(m=T.cutX+T.cutWidth),T.cutY+T.cutHeight>p&&(p=T.cutY+T.cutHeight)}return{x:s,y:d,width:m-s,height:p-d}},getFrameNames:function(n){n===void 0&&(n=!1);var l=Object.keys(this.frames);if(!n){var c=l.indexOf("__BASE");c!==-1&&l.splice(c,1)}return l},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var l=this.frames[n];return l?l.source.image:(console.warn(r,this.key,n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var l=this.frames[n],c;return l?c=l.sourceIndex:(console.warn(r,this.key,n),c=this.frames.__BASE.sourceIndex),this.dataSource[c].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++){var c=this.source[l];this.dataSource.push(new u(this,n[l],c.width,c.height))}},setFilter:function(n){var l;for(l=0;l<this.source.length;l++)this.source[l].setFilter(n);for(l=0;l<this.dataSource.length;l++)this.dataSource[l].setFilter(n)},destroy:function(){var n,l=this.source,c=this.dataSource;for(n=0;n<l.length;n++)l[n]&&l[n].destroy();for(n=0;n<c.length;n++)c[n]&&c[n].destroy();for(var s in this.frames){var d=this.frames[s];d&&d.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});o.exports=h}),17130:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(57382),u=e(83419),r=e(40987),h=e(8054),n=e(81320),l=e(50792),c=e(69442),s=e(4327),d=e(8443),m=e(99584),p=e(35154),g=e(88571),T=e(41212),S=e(61309),w=e(87841),A=e(79237),M=new u({Extends:l,initialize:function(P){l.call(this),this.game=P,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new w,this.silentWarnings=!1,P.events.once(d.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this);var R=this.game.config;R.defaultImage!==null&&this.addBase64("__DEFAULT",R.defaultImage),R.missingImage!==null&&this.addBase64("__MISSING",R.missingImage),R.whiteImage!==null&&this.addBase64("__WHITE",R.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(d.DESTROY,this.destroy,this),this.game.events.once(d.SYSTEM_READY,function(P){this.stamp=new g(P).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY))},checkKey:function(R){return!R||typeof R!="string"||this.exists(R)?(this.silentWarnings||console.error("Texture key already in use: "+R),!1):!0},remove:function(R){if(typeof R=="string")if(this.exists(R))R=this.get(R);else return this.silentWarnings||console.warn("No texture found matching key: "+R),this;var P=R.key;return this.list.hasOwnProperty(P)&&(R.destroy(),this.emit(c.REMOVE,P),this.emit(c.REMOVE_KEY+P)),this},removeKey:function(R){return this.list.hasOwnProperty(R)&&delete this.list[R],this},addBase64:function(R,P){if(this.checkKey(R)){var b=this,F=new Image;F.onerror=function(){b.emit(c.ERROR,R)},F.onload=function(){var I=b.create(R,F);I&&(S.Image(I,0),b.emit(c.ADD,R,I),b.emit(c.ADD_KEY+R,I),b.emit(c.LOAD,R,I))},F.src=P}return this},getBase64:function(R,P,b,F){b===void 0&&(b="image/png"),F===void 0&&(F=.92);var I="",L=this.getFrame(R,P);if(L&&(L.source.isRenderTexture||L.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(L){var D=L.canvasData,O=a.create2D(this,D.width,D.height),z=O.getContext("2d",{willReadFrequently:!0});D.width>0&&D.height>0&&z.drawImage(L.source.image,D.x,D.y,D.width,D.height,0,0,D.width,D.height),I=O.toDataURL(b,F),a.remove(O)}return I},addImage:function(R,P,b){var F=null;return this.checkKey(R)&&(F=this.create(R,P),S.Image(F,0),b&&F.setDataSource(b),this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)),F},addGLTexture:function(R,P){var b=null;if(this.checkKey(R)){var F=P.width,I=P.height;b=this.create(R,P,F,I),b.add("__BASE",0,0,0,F,I),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)}return b},addCompressedTexture:function(R,P,b){var F=null;if(this.checkKey(R)){if(F=this.create(R,P),F.add("__BASE",0,0,0,P.width,P.height),b){var I=function(D,O,z){Array.isArray(z.textures)||Array.isArray(z.frames)?S.JSONArray(D,O,z):S.JSONHash(D,O,z)};if(Array.isArray(b))for(var L=0;L<b.length;L++)I(F,L,b[L]);else I(F,0,b)}this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)}return F},addRenderTexture:function(R,P){var b=null;return this.checkKey(R)&&(b=this.create(R,P),b.add("__BASE",0,0,0,P.width,P.height),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)),b},generate:function(R,P){if(this.checkKey(R)){var b=a.create(this,1,1);return P.canvas=b,m(P),this.addCanvas(R,b)}else return null},createCanvas:function(R,P,b){if(P===void 0&&(P=256),b===void 0&&(b=256),this.checkKey(R)){var F=a.create(this,P,b,h.CANVAS,!0);return this.addCanvas(R,F)}return null},addCanvas:function(R,P,b){b===void 0&&(b=!1);var F=null;return b?F=new x(this,R,P,P.width,P.height):this.checkKey(R)&&(F=new x(this,R,P,P.width,P.height),this.list[R]=F,this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)),F},addDynamicTexture:function(R,P,b){var F=null;return typeof R=="string"&&!this.exists(R)?F=new n(this,R,P,b):(F=R,R=F.key),this.checkKey(R)?(this.list[R]=F,this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)):F=null,F},addAtlas:function(R,P,b,F){return Array.isArray(b.textures)||Array.isArray(b.frames)?this.addAtlasJSONArray(R,P,b,F):this.addAtlasJSONHash(R,P,b,F)},addAtlasJSONArray:function(R,P,b,F){var I=null;if(P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I){if(Array.isArray(b))for(var L=b.length===1,D=0;D<I.source.length;D++){var O=L?b[0]:b[D];S.JSONArray(I,D,O)}else S.JSONArray(I,0,b);F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)}return I},addAtlasJSONHash:function(R,P,b,F){var I=null;if(P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I){if(Array.isArray(b))for(var L=0;L<b.length;L++)S.JSONHash(I,L,b[L]);else S.JSONHash(I,0,b);F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)}return I},addAtlasXML:function(R,P,b,F){var I=null;return P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I&&(S.AtlasXML(I,0,b),F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)),I},addUnityAtlas:function(R,P,b,F){var I=null;return P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I&&(S.UnityYAML(I,0,b),F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)),I},addSpriteSheet:function(R,P,b,F){var I=null;if(P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I){var L=I.source[0].width,D=I.source[0].height;S.SpriteSheet(I,0,0,0,L,D,b),F&&I.setDataSource(F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I)}return I},addSpriteSheetFromAtlas:function(R,P){if(!this.checkKey(R))return null;var b=p(P,"atlas",null),F=p(P,"frame",null);if(!(!b||!F)){var I=this.get(b),L=I.get(F);if(L){var D=L.source.image;D||(D=L.source.glTexture);var O=this.create(R,D);return L.trimmed?S.SpriteSheetFromAtlas(O,L,P):S.SpriteSheet(O,0,L.cutX,L.cutY,L.cutWidth,L.cutHeight,P),this.emit(c.ADD,R,O),this.emit(c.ADD_KEY+R,O),O}}},addUint8Array:function(R,P,b,F){if(!this.checkKey(R)||P.length/4!==b*F)return null;var I=this.create(R,P,b,F);return I.add("__BASE",0,0,0,b,F),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I),I},create:function(R,P,b,F){var I=null;return this.checkKey(R)&&(I=new A(this,R,P,b,F),this.list[R]=I),I},exists:function(R){return this.list.hasOwnProperty(R)},get:function(R){return R===void 0&&(R="__DEFAULT"),this.list[R]?this.list[R]:R instanceof A?R:R instanceof s?R.texture:this.list.__MISSING},cloneFrame:function(R,P){if(this.list[R])return this.list[R].get(P).clone()},getFrame:function(R,P){if(this.list[R])return this.list[R].get(P)},parseFrame:function(R){if(R){if(typeof R=="string")return this.getFrame(R);if(Array.isArray(R)&&R.length===2)return this.getFrame(R[0],R[1]);if(T(R))return this.getFrame(R.key,R.frame);if(R instanceof A)return R.get();if(R instanceof s)return R}else return},getTextureKeys:function(){var R=[];for(var P in this.list)P!=="__DEFAULT"&&P!=="__MISSING"&&P!=="__WHITE"&&P!=="__NORMAL"&&R.push(P);return R},getPixel:function(R,P,b,F){var I=this.getFrame(b,F);if(I){R-=I.x,P-=I.y;var L=I.data.cut;if(R+=L.x,P+=L.y,R>=L.x&&R<L.r&&P>=L.y&&P<L.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,R,P,1,1,0,0,1,1);var O=D.getImageData(0,0,1,1);return new r(O.data[0],O.data[1],O.data[2],O.data[3])}}return null},getPixelAlpha:function(R,P,b,F){var I=this.getFrame(b,F);if(I){R-=I.x,P-=I.y;var L=I.data.cut;if(R+=L.x,P+=L.y,R>=L.x&&R<L.r&&P>=L.y&&P<L.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,R,P,1,1,0,0,1,1);var O=D.getImageData(0,0,1,1);return O.data[3]}}return null},setTexture:function(R,P,b){return this.list[P]&&(R.texture=this.list[P],R.frame=R.texture.get(b)),R},renameTexture:function(R,P){var b=this.get(R);return b&&R!==P?(b.key=P,this.list[P]=b,delete this.list[R],!0):!1},each:function(R,P){for(var b=[null],F=1;F<arguments.length;F++)b.push(arguments[F]);for(var I in this.list)b[0]=this.list[I],R.apply(P,b)},resetStamp:function(R,P){R===void 0&&(R=1),P===void 0&&(P=16777215);var b=this.stamp;return b.setCrop(),b.setPosition(0),b.setAngle(0),b.setScale(1),b.setAlpha(R),b.setTint(P),b.setTexture("__WHITE"),b},destroy:function(){for(var R in this.list)this.list[R].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,a.remove(this._tempCanvas)}});o.exports=M}),11876:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),x=e(83419),u=e(50030),r=e(29795),h=e(82751),n=new x({initialize:function(c,s,d,m,p){p===void 0&&(p=!1);var g=c.manager.game;this.renderer=g.renderer,this.texture=c,this.source=s,this.image=s.compressed?null:s,this.compressionAlgorithm=s.compressed?s.format:null,this.resolution=1,this.width=d||s.naturalWidth||s.videoWidth||s.width||0,this.height=m||s.naturalHeight||s.videoHeight||s.height||0,this.scaleMode=r.DEFAULT,this.isCanvas=s instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&s instanceof HTMLVideoElement,this.isRenderTexture=s.type==="RenderTexture"||s.type==="DynamicTexture",this.isGLTexture=s instanceof h,this.isPowerOf2=u(this.width,this.height),this.glTexture=null,this.flipY=p,this.init(g)},init:function(l){var c=this.renderer;if(c){var s=this.source;if(c.gl){var d=this.image,m=this.flipY,p=this.width,g=this.height,T=this.scaleMode;this.isCanvas?this.glTexture=c.createCanvasTexture(d,!1,m):this.isVideo?this.glTexture=c.createVideoTexture(d,!1,m):this.isRenderTexture?this.glTexture=c.createTextureFromSource(null,p,g,T):this.isGLTexture?this.glTexture=s:this.compressionAlgorithm?this.glTexture=c.createTextureFromSource(s,void 0,void 0,T):s instanceof Uint8Array?this.glTexture=c.createUint8ArrayTexture(s,p,g,T):this.glTexture=c.createTextureFromSource(d,p,g,T)}else this.isRenderTexture&&(this.image=s.canvas)}l.config.antialias||this.setFilter(1)},setFilter:function(l){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,l),this.scaleMode=l},setFlipY:function(l){return l===void 0&&(l=!0),l===this.flipY?this:(this.flipY=l,this.update(),this)},update:function(){var l=this.renderer,c=this.image,s=this.flipY,d=l.gl;d&&this.isCanvas?l.updateCanvasTexture(c,this.glTexture,s):d&&this.isVideo&&l.updateVideoTexture(c,this.glTexture,s)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&a.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});o.exports=n}),19673:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={LINEAR:0,NEAREST:1};o.exports=E}),44538:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture"}),63486:(o=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture-"}),94851:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onerror"}),29099:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onload"}),8678:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"}),86415:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture"}),30879:(o=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture-"}),69442:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:e(44538),ADD_KEY:e(63486),ERROR:e(94851),LOAD:e(29099),READY:e(8678),REMOVE:e(86415),REMOVE_KEY:e(30879)}}),27458:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(19673),u={CanvasTexture:e(57382),DynamicTexture:e(81320),Events:e(69442),FilterMode:x,Frame:e(4327),Parsers:e(61309),Texture:e(79237),TextureManager:e(17130),TextureSource:e(11876)};u=a(!1,u,x),o.exports=u}),89905:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(!x.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var u=e.source[a];e.add("__BASE",a,0,0,u.width,u.height);for(var r=x.getElementsByTagName("SubTexture"),h,n=0;n<r.length;n++){var l=r[n].attributes,c=l.name.value,s=parseInt(l.x.value,10),d=parseInt(l.y.value,10),m=parseInt(l.width.value,10),p=parseInt(l.height.value,10);if(h=e.add(c,a,s,d,m,p),l.frameX){var g=Math.abs(parseInt(l.frameX.value,10)),T=Math.abs(parseInt(l.frameY.value,10)),S=parseInt(l.frameWidth.value,10),w=parseInt(l.frameHeight.value,10);h.setTrim(m,p,g,T,S,w)}}return e};o.exports=E}),72893:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.source[a];return e.add("__BASE",a,0,0,x.width,x.height),e};o.exports=E}),4832:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.source[a];return e.add("__BASE",a,0,0,x.width,x.height),e};o.exports=E}),78566:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),x=function(u,r,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var n=u.source[r];u.add("__BASE",r,0,0,n.width,n.height);for(var l=Array.isArray(h.textures)?h.textures[r].frames:h.frames,c,s=0;s<l.length;s++){var d=l[s];if(c=u.add(d.filename,r,d.frame.x,d.frame.y,d.frame.w,d.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+d.filename);continue}d.trimmed&&c.setTrim(d.sourceSize.w,d.sourceSize.h,d.spriteSourceSize.x,d.spriteSourceSize.y,d.spriteSourceSize.w,d.spriteSourceSize.h),d.rotated&&(c.rotated=!0,c.updateUVsInverted());var m=d.anchor||d.pivot;m&&(c.customPivot=!0,c.pivotX=m.x,c.pivotY=m.y),d.scale9Borders&&c.setScale9(d.scale9Borders.x,d.scale9Borders.y,d.scale9Borders.w,d.scale9Borders.h),c.customData=a(d)}for(var p in h)p!=="frames"&&(Array.isArray(h[p])?u.customData[p]=h[p].slice(0):u.customData[p]=h[p]);return u};o.exports=x}),39711:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),x=function(u,r,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=u.source[r];u.add("__BASE",r,0,0,n.width,n.height);var l=h.frames,c;for(var s in l)if(l.hasOwnProperty(s)){var d=l[s];if(c=u.add(s,r,d.frame.x,d.frame.y,d.frame.w,d.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+s);continue}d.trimmed&&c.setTrim(d.sourceSize.w,d.sourceSize.h,d.spriteSourceSize.x,d.spriteSourceSize.y,d.spriteSourceSize.w,d.spriteSourceSize.h),d.rotated&&(c.rotated=!0,c.updateUVsInverted());var m=d.anchor||d.pivot;m&&(c.customPivot=!0,c.pivotX=m.x,c.pivotY=m.y),d.scale9Borders&&c.setScale9(d.scale9Borders.x,d.scale9Borders.y,d.scale9Borders.w,d.scale9Borders.h),c.customData=a(d)}for(var p in h)p!=="frames"&&(Array.isArray(h[p])?u.customData[p]=h[p].slice(0):u.customData[p]=h[p]);return u};o.exports=x}),31403:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=[171,75,84,88,32,49,49,187,13,10,26,10],x,u=new Uint8Array(e,0,12);for(x=0;x<u.length;x++)if(u[x]!==a[x]){console.warn("KTXParser - Invalid file format");return}var r=Uint32Array.BYTES_PER_ELEMENT,h=new DataView(e,12,13*r),n=h.getUint32(0,!0)===67305985,l=h.getUint32(1*r,n);if(l!==0){console.warn("KTXParser - Only compressed formats supported");return}var c=h.getUint32(4*r,n),s=h.getUint32(6*r,n),d=h.getUint32(7*r,n),m=Math.max(1,h.getUint32(11*r,n)),p=h.getUint32(12*r,n),g=new Array(m),T=64+p,S=s,w=d;for(x=0;x<m;x++){var A=new Int32Array(e,T,1)[0];T+=4,g[x]={data:new Uint8Array(e,T,A),width:S,height:w},S=Math.max(1,S>>1),w=Math.max(1,w>>1),T+=A}return{mipmaps:g,width:s,height:d,internalFormat:c,compressed:!0,generateMipmap:!1}};o.exports=E}),82038:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(P,b,F,I,L,D,O){return O===void 0&&(O=16),Math.floor((P+F)/L)*Math.floor((b+I)/D)*O}function e(P,b){return P=Math.max(P,16),b=Math.max(b,8),P*b/4}function a(P,b){return P=Math.max(P,8),b=Math.max(b,8),P*b/2}function x(P,b){return Math.ceil(P/4)*Math.ceil(b/4)*16}function u(P,b){return E(P,b,3,3,4,4,8)}function r(P,b){return E(P,b,3,3,4,4)}function h(P,b){return E(P,b,4,3,5,4)}function n(P,b){return E(P,b,4,4,5,5)}function l(P,b){return E(P,b,5,4,6,5)}function c(P,b){return E(P,b,5,5,6,6)}function s(P,b){return E(P,b,7,4,8,5)}function d(P,b){return E(P,b,7,5,8,6)}function m(P,b){return E(P,b,7,7,8,8)}function p(P,b){return E(P,b,9,4,10,5)}function g(P,b){return E(P,b,9,5,10,6)}function T(P,b){return E(P,b,9,7,10,8)}function S(P,b){return E(P,b,9,9,10,10)}function w(P,b){return E(P,b,11,9,12,10)}function A(P,b){return E(P,b,11,11,12,12)}var M={0:{sizeFunc:e,glFormat:[35841]},1:{sizeFunc:e,glFormat:[35843]},2:{sizeFunc:a,glFormat:[35840]},3:{sizeFunc:a,glFormat:[35842]},6:{sizeFunc:u,glFormat:[36196]},7:{sizeFunc:u,glFormat:[33776,35916]},8:{sizeFunc:r,glFormat:[33777,35917]},9:{sizeFunc:r,glFormat:[33778,35918]},11:{sizeFunc:r,glFormat:[33779,35919]},14:{sizeFunc:x,glFormat:[36494,36495]},15:{sizeFunc:x,glFormat:[36492,36493]},22:{sizeFunc:u,glFormat:[37492,37493]},23:{sizeFunc:r,glFormat:[37496,37497]},24:{sizeFunc:u,glFormat:[37494,37495]},25:{sizeFunc:u,glFormat:[37488]},26:{sizeFunc:r,glFormat:[37490]},27:{sizeFunc:r,glFormat:[37808,37840]},28:{sizeFunc:h,glFormat:[37809,37841]},29:{sizeFunc:n,glFormat:[37810,37842]},30:{sizeFunc:l,glFormat:[37811,37843]},31:{sizeFunc:c,glFormat:[37812,37844]},32:{sizeFunc:s,glFormat:[37813,37845]},33:{sizeFunc:d,glFormat:[37814,37846]},34:{sizeFunc:m,glFormat:[37815,37847]},35:{sizeFunc:p,glFormat:[37816,37848]},36:{sizeFunc:g,glFormat:[37817,37849]},37:{sizeFunc:T,glFormat:[37818,37850]},38:{sizeFunc:S,glFormat:[37819,37851]},39:{sizeFunc:w,glFormat:[37820,37852]},40:{sizeFunc:A,glFormat:[37821,37853]}},R=function(P){for(var b=new Uint32Array(P,0,13),F=b[0],I=F===55727696,L=I?b[2]:b[3],D=b[4],O=M[L].glFormat[D],z=M[L].sizeFunc,W=b[11],X=b[7],_=b[6],U=52+b[12],G=new Uint8Array(P,U),N=new Array(W),H=0,V=X,$=_,j=0;j<W;j++){var k=z(V,$);N[j]={data:new Uint8Array(G.buffer,G.byteOffset+H,k),width:V,height:$},V=Math.max(1,V>>1),$=Math.max(1,$>>1),H+=k}return{mipmaps:N,width:X,height:_,internalFormat:O,compressed:!0,generateMipmap:!1}};o.exports=R}),75549:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(u,r,h,n,l,c,s){var d=a(s,"frameWidth",null),m=a(s,"frameHeight",d);if(d===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var p=u.source[r];u.add("__BASE",r,0,0,p.width,p.height);var g=a(s,"startFrame",0),T=a(s,"endFrame",-1),S=a(s,"margin",0),w=a(s,"spacing",0),A=Math.floor((l-S+w)/(d+w)),M=Math.floor((c-S+w)/(m+w)),R=A*M;R===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",u.key),(g>R||g<-R)&&(g=0),g<0&&(g=R+g),(T===-1||T>R||T<g)&&(T=R);for(var P=S,b=S,F=0,I=0,L=0,D=0;D<R;D++){F=0,I=0;var O=P+d,z=b+m;O>l&&(F=O-l),z>c&&(I=z-c),D>=g&&D<=T&&(u.add(L,r,h+P,n+b,d-F,m-I),L++),P+=d+w,P+d>l&&(P=S,b+=m+w)}return u};o.exports=x}),47534:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(u,r,h){var n=a(h,"frameWidth",null),l=a(h,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=u.source[0];u.add("__BASE",0,0,0,c.width,c.height),a(h,"startFrame",0),a(h,"endFrame",-1);for(var s=a(h,"margin",0),d=a(h,"spacing",0),m=r.cutX,p=r.cutY,g=r.cutWidth,T=r.cutHeight,S=r.realWidth,w=r.realHeight,A=Math.floor((S-s+d)/(n+d)),M=Math.floor((w-s+d)/(l+d)),R=r.x,P=n-R,b=n-(S-g-R),F=r.y,I=l-F,L=l-(w-T-F),D,O=s,z=s,W=0,X=0,_=0;_<M;_++){for(var U=_===0,G=_===M-1,N=0;N<A;N++){var H=N===0,V=N===A-1;if(D=u.add(W,X,m+O,p+z,n,l),H||U||V||G){var $=H?R:0,j=U?F:0,k=0,Q=0;H&&(k+=n-P),V&&(k+=n-b),U&&(Q+=l-I),G&&(Q+=l-L);var et=n-k,at=l-Q;D.cutWidth=et,D.cutHeight=at,D.setTrim(n,l,$,j,et,at)}O+=d,H?O+=P:V?O+=b:O+=n,W++}O=s,z+=d,U?z+=I:G?z+=L:z+=l}return u};o.exports=x}),86147:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=0,e=function(x,u,r,h){var n=E-h.y-h.height;x.add(r,u,h.x,n,h.width,h.height)},a=function(x,u,r){var h=x.source[u];x.add("__BASE",u,0,0,h.width,h.height),E=h.height;for(var n=r.split(`
`),l=/^[ ]*(- )*(\w+)+[: ]+(.*)/,c="",s="",d={x:0,y:0,width:0,height:0},m=0;m<n.length;m++){var p=n[m].match(l);if(p){var g=p[1]==="- ",T=p[2],S=p[3];if(g&&(s!==c&&(e(x,u,s,d),c=s),d={x:0,y:0,width:0,height:0}),T==="name"){s=S;continue}switch(T){case"x":case"y":case"width":case"height":d[T]=parseInt(S,10);break}}}return s!==c&&e(x,u,s,d),x};o.exports=a}),55222:((o,E,e)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50030),x=function(c){for(var s=c.mipmaps,d=1;d<s.length;d++){var m=s[d].width,p=s[d].height;if(!a(m,p))return console.warn("Mip level "+d+" is not a power-of-two size: "+m+"x"+p),!1}var g=l[c.internalFormat];return g?g(c):(console.warn("No format checker found for internal format "+c.internalFormat+". Assuming valid."),!0)};function u(c){for(var s=c.mipmaps,d=0;d<s.length;d++){var m=s[d].width,p=s[d].height;if((m<<d)%4!==0||(p<<d)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+d+" is "+m+"x"+p),!1}return!0}function r(){return!0}function h(c){var s=c.mipmaps,d=s[0];return a(d.width,d.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+d.width+"x"+d.height),!1)}function n(c){var s=c.mipmaps,d=s[0];return d.width%4!==0||d.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+d.width+"x"+d.height+" pixels"),!1):!0}var l={37488:r,37489:r,37490:r,37491:r,37492:r,37493:r,37494:r,37495:r,37496:r,37497:r,36196:r,37808:r,37809:r,37810:r,37811:r,37812:r,37813:r,37814:r,37815:r,37816:r,37817:r,37818:r,37819:r,37820:r,37821:r,37840:r,37841:r,37842:r,37843:r,37844:r,37845:r,37846:r,37847:r,37848:r,37849:r,37850:r,37851:r,37852:r,37853:r,36492:u,36493:u,36494:u,36495:u,36283:u,36284:u,36285:u,36286:u,35840:h,35841:h,35842:h,35843:h,33776:u,33777:u,33778:u,33779:u,35916:n,35917:n,35918:n,35919:n};o.exports=x}),61309:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AtlasXML:e(89905),Canvas:e(72893),Image:e(4832),JSONArray:e(78566),JSONHash:e(39711),KTXParser:e(31403),PVRParser:e(82038),SpriteSheet:e(75549),SpriteSheetFromAtlas:e(47534),UnityYAML:e(86147)}}),80341:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}}),16536:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r,h,n,l,c,s,d){(n===void 0||n<=0)&&(n=32),(l===void 0||l<=0)&&(l=32),c===void 0&&(c=0),s===void 0&&(s=0),this.name=r,this.firstgid=h|0,this.imageWidth=n|0,this.imageHeight=l|0,this.imageMargin=c|0,this.imageSpacing=s|0,this.properties=d||{},this.images=[],this.total=0},containsImageIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},addImage:function(u,r,h,n){return this.images.push({gid:u,image:r,width:h,height:n}),this.total++,this}});o.exports=x}),27462:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=new a({initialize:function(r){if(this.gids=[],r!==void 0)for(var h=0;h<r.length;++h)for(var n=r[h],l=0;l<n.total;++l)this.gids[n.firstgid+l]=n;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(u){this.gids=u?this._gids:void 0}},getTypeIncludingTile:function(u){if(u.type!==void 0&&u.type!=="")return u.type;if(!(!this.gids||u.gid===void 0)){var r=this.gids[u.gid];if(r){var h=r.getTileData(u.gid);if(h)return h.type}}},setTextureAndFrame:function(u,r,h,n){if(r===null&&this.gids&&n.gid!==void 0){var l=this.gids[n.gid];l&&(r===null&&l.image!==void 0&&(r=l.image.key),h===null&&(h=n.gid-l.firstgid),u.scene.textures.getFrame(r,h)||(r=null,h=null))}u.setTexture(r,h)},setPropertiesFromTiledObject:function(u,r){if(this.gids!==void 0&&r.gid!==void 0){var h=this.gids[r.gid];h!==void 0&&this.setFromJSON(u,h.getTileProperties(r.gid))}this.setFromJSON(u,r.properties)},setFromJSON:function(u,r){if(r){if(Array.isArray(r)){for(var h=0;h<r.length;h++){var n=r[h];u[n.name]!==void 0?u[n.name]=n.value:u.setData(n.name,n.value)}return}for(var l in r)u[l]!==void 0?u[l]=r[l]:u.setData(l,r[l])}}});o.exports=x}),31989:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(87010),u=e(46177),r=e(49075),h=function(n,l,c,s,d,m,p,g){c===void 0&&(c=32),s===void 0&&(s=32),d===void 0&&(d=10),m===void 0&&(m=10),g===void 0&&(g=!1);var T=null;if(Array.isArray(p)){var S=l!==void 0?l:"map";T=u(S,a.ARRAY_2D,p,c,s,g)}else if(l!==void 0){var w=n.cache.tilemap.get(l);w?T=u(l,w.format,w.data,c,s,g):console.warn("No map data found for key "+l)}return T===null&&(T=new x({tileWidth:c,tileHeight:s,width:d,height:m})),new r(n,T)};o.exports=h}),23029:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(31401),u=e(91907),r=e(62644),h=e(93232),n=new a({Mixins:[x.AlphaSingle,x.Flip,x.Visible],initialize:function(c,s,d,m,p,g,T,S){this.layer=c,this.index=s,this.x=d,this.y=m,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=T!==void 0?T:p,this.baseHeight=S!==void 0?S:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(l,c){return!(l<this.pixelX||c<this.pixelY||l>this.right||c>this.bottom)},copy:function(l){return this.index=l.index,this.alpha=l.alpha,this.properties=r(l.properties),this.visible=l.visible,this.setFlip(l.flipX,l.flipY),this.tint=l.tint,this.rotation=l.rotation,this.collideUp=l.collideUp,this.collideDown=l.collideDown,this.collideLeft=l.collideLeft,this.collideRight=l.collideRight,this.collisionCallback=l.collisionCallback,this.collisionCallbackContext=l.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(l){var c=this.tilemapLayer;if(c){var s=c.tileToWorldXY(this.x,this.y,void 0,l);return s.x}return this.x*this.baseWidth},getRight:function(l){var c=this.tilemapLayer;return c?this.getLeft(l)+this.width*c.scaleX:this.getLeft(l)+this.width},getTop:function(l){var c=this.tilemapLayer;if(c){var s=c.tileToWorldXY(this.x,this.y,void 0,l);return s.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(l){var c=this.tilemapLayer;return c?this.getTop(l)+this.height*c.scaleY:this.getTop(l)+this.height},getBounds:function(l,c){return c===void 0&&(c=new h),c.x=this.getLeft(l),c.y=this.getTop(l),c.width=this.getRight(l)-c.x,c.height=this.getBottom(l)-c.y,c},getCenterX:function(l){return(this.getLeft(l)+this.getRight(l))/2},getCenterY:function(l){return(this.getTop(l)+this.getBottom(l))/2},intersects:function(l,c,s,d){return!(s<=this.pixelX||d<=this.pixelY||l>=this.right||c>=this.bottom)},isInteresting:function(l,c){return l&&c?this.canCollide||this.hasInterestingFace:l?this.collides:c?this.hasInterestingFace:!1},resetCollision:function(l){if(l===void 0&&(l=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,l){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(l,c,s,d,m){if(c===void 0&&(c=l),s===void 0&&(s=l),d===void 0&&(d=l),m===void 0&&(m=!0),this.collideLeft=l,this.collideRight=c,this.collideUp=s,this.collideDown=d,this.faceLeft=l,this.faceRight=c,this.faceTop=s,this.faceBottom=d,m){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(l,c){return l===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=l,this.collisionCallbackContext=c),this},setSize:function(l,c,s,d){return l!==void 0&&(this.width=l),c!==void 0&&(this.height=c),s!==void 0&&(this.baseWidth=s),d!==void 0&&(this.baseHeight=d),this.updatePixelXY(),this},updatePixelXY:function(){var l=this.layer.orientation;if(l===u.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(l===u.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(l===u.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(l===u.HEXAGONAL){var c=this.layer.staggerAxis,s=this.layer.staggerIndex,d=this.layer.hexSideLength,m,p;c==="y"?(p=(this.baseHeight-d)/2+d,s==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*p):c==="x"&&(m=(this.baseWidth-d)/2+d,this.pixelX=this.x*m,s==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var l=this.layer.tilemapLayer;if(l){var c=l.gidMap[this.index];if(c)return c}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var l=this.tilemapLayer;return l?l.tilemap:null}}});o.exports=n}),49075:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84101),x=e(83419),u=e(39506),r=e(80341),h=e(95540),n=e(14977),l=e(27462),c=e(91907),s=e(36305),d=e(19133),m=e(68287),p=e(23029),g=e(81086),T=e(20442),S=e(33629),w=new x({initialize:function(M,R){this.scene=M,this.tileWidth=R.tileWidth,this.tileHeight=R.tileHeight,this.width=R.width,this.height=R.height,this.orientation=R.orientation,this.renderOrder=R.renderOrder,this.format=R.format,this.version=R.version,this.properties=R.properties,this.widthInPixels=R.widthInPixels,this.heightInPixels=R.heightInPixels,this.imageCollections=R.imageCollections,this.images=R.images,this.layers=R.layers,this.tiles=R.tiles,this.tilesets=R.tilesets,this.objects=R.objects,this.currentLayerIndex=0,this.hexSideLength=R.hexSideLength;var P=this.orientation;this._convert={WorldToTileXY:g.GetWorldToTileXYFunction(P),WorldToTileX:g.GetWorldToTileXFunction(P),WorldToTileY:g.GetWorldToTileYFunction(P),TileToWorldXY:g.GetTileToWorldXYFunction(P),TileToWorldX:g.GetTileToWorldXFunction(P),TileToWorldY:g.GetTileToWorldYFunction(P),GetTileCorners:g.GetTileCornersFunction(P)}},setRenderOrder:function(A){var M=["right-down","left-down","right-up","left-up"];return typeof A=="number"&&(A=M[A]),M.indexOf(A)>-1&&(this.renderOrder=A),this},addTilesetImage:function(A,M,R,P,b,F,I,L){if(A===void 0)return null;M==null&&(M=A);var D=this.scene.sys.textures;if(!D.exists(M))return console.warn('Texture key "%s" not found',M),null;var O=D.get(M),z=this.getTilesetIndex(A);if(z===null&&this.format===r.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',A,this.tilesets),null;var W=this.tilesets[z];return W?((R||P)&&W.setTileSize(R,P),(b||F)&&W.setSpacing(b,F),W.setImage(O),W):(R===void 0&&(R=this.tileWidth),P===void 0&&(P=this.tileHeight),b===void 0&&(b=0),F===void 0&&(F=0),I===void 0&&(I=0),L===void 0&&(L={x:0,y:0}),W=new S(A,I,R,P,b,F,void 0,void 0,L),W.setImage(O),this.tilesets.push(W),this.tiles=a(this),W)},copy:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L!==null?(g.Copy(A,M,R,P,b,F,I,L),this):null},createBlankLayer:function(A,M,R,P,b,F,I,L){R===void 0&&(R=0),P===void 0&&(P=0),b===void 0&&(b=this.width),F===void 0&&(F=this.height),I===void 0&&(I=this.tileWidth),L===void 0&&(L=this.tileHeight);var D=this.getLayerIndex(A);if(D!==null)return console.warn("Invalid Tilemap Layer ID: "+A),null;for(var O=new n({name:A,tileWidth:I,tileHeight:L,width:b,height:F,orientation:this.orientation,hexSideLength:this.hexSideLength}),z,W=0;W<F;W++){z=[];for(var X=0;X<b;X++)z.push(new p(O,-1,X,W,I,L,this.tileWidth,this.tileHeight));O.data.push(z)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var _=new T(this.scene,this,this.currentLayerIndex,M,R,P);return _.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(_),_},createLayer:function(A,M,R,P){var b=this.getLayerIndex(A);if(b===null)return console.warn("Invalid Tilemap Layer ID: "+A),typeof A=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var F=this.layers[b];if(F.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+A),null;this.currentLayerIndex=b,R===void 0&&(R=F.x),P===void 0&&(P=F.y);var I=new T(this.scene,this,b,M,R,P);return I.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(I),I},createFromObjects:function(A,M,R){R===void 0&&(R=!0);var P=[],b=this.getObjectLayer(A);if(!b)return console.warn("createFromObjects: Invalid objectLayerName given: "+A),P;var F=new l(R?this.tilesets:void 0);Array.isArray(M)||(M=[M]);for(var I=b.objects,L=0;L<M.length;L++){var D=M[L],O=h(D,"id",null),z=h(D,"gid",null),W=h(D,"name",null),X=h(D,"type",null);F.enabled=!h(D,"ignoreTileset",null);for(var _,U=[],G=0;G<I.length;G++)_=I[G],(O===null&&z===null&&W===null&&X===null||O!==null&&_.id===O||z!==null&&_.gid===z||W!==null&&_.name===W||X!==null&&F.getTypeIncludingTile(_)===X)&&U.push(_);for(var N=h(D,"classType",m),H=h(D,"scene",this.scene),V=h(D,"container",null),$=h(D,"key",null),j=h(D,"frame",null),k=0;k<U.length;k++){_=U[k];var Q=new N(H);if(Q.setName(_.name),Q.setPosition(_.x,_.y),F.setTextureAndFrame(Q,$,j,_),_.width&&(Q.displayWidth=_.width),_.height&&(Q.displayHeight=_.height),this.orientation===c.ISOMETRIC){var et=this.tileWidth/this.tileHeight,at={x:Q.x-Q.y,y:(Q.x+Q.y)/et};Q.x=at.x,Q.y=at.y}var q={x:Q.originX*_.width,y:(Q.originY-(_.gid?1:0))*_.height};if(_.rotation){var ft=u(_.rotation);s(q,ft),Q.rotation=ft}Q.x+=q.x,Q.y+=q.y,(_.flippedHorizontal!==void 0||_.flippedVertical!==void 0)&&Q.setFlip(_.flippedHorizontal,_.flippedVertical),_.visible||(Q.visible=!1),F.setPropertiesFromTiledObject(Q,_),V?V.add(Q):H.add.existing(Q),P.push(Q)}}return P},createFromTiles:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:g.CreateFromTiles(A,M,R,P,b,F)},fill:function(A,M,R,P,b,F,I){return F===void 0&&(F=!0),I=this.getLayer(I),I===null?null:(g.Fill(A,M,R,P,b,F,I),this)},filterObjects:function(A,M,R){if(typeof A=="string"){var P=A;if(A=this.getObjectLayer(A),!A)return console.warn("No object layer found with the name: "+P),null}return A.objects.filter(M,R)},filterTiles:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L===null?null:g.FilterTiles(A,M,R,P,b,F,I,L)},findByIndex:function(A,M,R,P){return P=this.getLayer(P),P===null?null:g.FindByIndex(A,M,R,P)},findObject:function(A,M,R){if(typeof A=="string"){var P=A;if(A=this.getObjectLayer(A),!A)return console.warn("No object layer found with the name: "+P),null}return A.objects.find(M,R)||null},findTile:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L===null?null:g.FindTile(A,M,R,P,b,F,I,L)},forEachTile:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L===null?null:(g.ForEachTile(A,M,R,P,b,F,I,L),this)},getImageIndex:function(A){return this.getIndex(this.images,A)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(A){return A.name})},getIndex:function(A,M){for(var R=0;R<A.length;R++)if(A[R].name===M)return R;return null},getLayer:function(A){var M=this.getLayerIndex(A);return M!==null?this.layers[M]:null},getObjectLayer:function(A){var M=this.getIndex(this.objects,A);return M!==null?this.objects[M]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(A){return A.name})},getLayerIndex:function(A){return A===void 0?this.currentLayerIndex:typeof A=="string"?this.getLayerIndexByName(A):typeof A=="number"&&A<this.layers.length?A:A instanceof T&&A.tilemap===this?A.layerIndex:null},getLayerIndexByName:function(A){return this.getIndex(this.layers,A)},getTileAt:function(A,M,R,P){return P=this.getLayer(P),P===null?null:g.GetTileAt(A,M,R,P)},getTileAtWorldXY:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:g.GetTileAtWorldXY(A,M,R,P,b)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(A){return A.name})},getTilesWithin:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:g.GetTilesWithin(A,M,R,P,b,F)},getTilesWithinShape:function(A,M,R,P){return P=this.getLayer(P),P===null?null:g.GetTilesWithinShape(A,M,R,P)},getTilesWithinWorldXY:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:g.GetTilesWithinWorldXY(A,M,R,P,b,F,I)},getTileset:function(A){var M=this.getIndex(this.tilesets,A);return M!==null?this.tilesets[M]:null},getTilesetIndex:function(A){return this.getIndex(this.tilesets,A)},hasTileAt:function(A,M,R){return R=this.getLayer(R),R===null?null:g.HasTileAt(A,M,R)},hasTileAtWorldXY:function(A,M,R,P){return P=this.getLayer(P),P===null?null:g.HasTileAtWorldXY(A,M,R,P)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(A){this.setLayer(A)}},putTileAt:function(A,M,R,P,b){return P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:g.PutTileAt(A,M,R,P,b)},putTileAtWorldXY:function(A,M,R,P,b,F){return P===void 0&&(P=!0),F=this.getLayer(F),F===null?null:g.PutTileAtWorldXY(A,M,R,P,b,F)},putTilesAt:function(A,M,R,P,b){return P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:(g.PutTilesAt(A,M,R,P,b),this)},randomize:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:(g.Randomize(A,M,R,P,b,F),this)},calculateFacesAt:function(A,M,R){return R=this.getLayer(R),R===null?null:(g.CalculateFacesAt(A,M,R),this)},calculateFacesWithin:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:(g.CalculateFacesWithin(A,M,R,P,b),this)},removeLayer:function(A){var M=this.getLayerIndex(A);if(M!==null){d(this.layers,M);for(var R=M;R<this.layers.length;R++)this.layers[R].tilemapLayer&&this.layers[R].tilemapLayer.layerIndex--;return this.currentLayerIndex===M&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(A){var M=this.getLayerIndex(A);return M!==null?(A=this.layers[M],A.tilemapLayer.destroy(),d(this.layers,M),this.currentLayerIndex===M&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var A=this.layers,M=0;M<A.length;M++)A[M].tilemapLayer&&A[M].tilemapLayer.destroy(!1);return A.length=0,this.currentLayerIndex=0,this},removeTile:function(A,M,R){M===void 0&&(M=-1),R===void 0&&(R=!0);var P=[];Array.isArray(A)||(A=[A]);for(var b=0;b<A.length;b++){var F=A[b];P.push(this.removeTileAt(F.x,F.y,!0,R,F.tilemapLayer)),M>-1&&this.putTileAt(M,F.x,F.y,R,F.tilemapLayer)}return P},removeTileAt:function(A,M,R,P,b){return R===void 0&&(R=!0),P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:g.RemoveTileAt(A,M,R,P,b)},removeTileAtWorldXY:function(A,M,R,P,b,F){return R===void 0&&(R=!0),P===void 0&&(P=!0),F=this.getLayer(F),F===null?null:g.RemoveTileAtWorldXY(A,M,R,P,b,F)},renderDebug:function(A,M,R){return R=this.getLayer(R),R===null?null:(this.orientation===c.ORTHOGONAL&&g.RenderDebug(A,M,R),this)},renderDebugFull:function(A,M){for(var R=this.layers,P=0;P<R.length;P++)g.RenderDebug(A,M,R[P]);return this},replaceByIndex:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:(g.ReplaceByIndex(A,M,R,P,b,F,I),this)},setCollision:function(A,M,R,P,b){return M===void 0&&(M=!0),R===void 0&&(R=!0),b===void 0&&(b=!0),P=this.getLayer(P),P===null?null:(g.SetCollision(A,M,R,P,b),this)},setCollisionBetween:function(A,M,R,P,b){return R===void 0&&(R=!0),P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:(g.SetCollisionBetween(A,M,R,P,b),this)},setCollisionByProperty:function(A,M,R,P){return M===void 0&&(M=!0),R===void 0&&(R=!0),P=this.getLayer(P),P===null?null:(g.SetCollisionByProperty(A,M,R,P),this)},setCollisionByExclusion:function(A,M,R,P){return M===void 0&&(M=!0),R===void 0&&(R=!0),P=this.getLayer(P),P===null?null:(g.SetCollisionByExclusion(A,M,R,P),this)},setCollisionFromCollisionGroup:function(A,M,R){return A===void 0&&(A=!0),M===void 0&&(M=!0),R=this.getLayer(R),R===null?null:(g.SetCollisionFromCollisionGroup(A,M,R),this)},setTileIndexCallback:function(A,M,R,P){return P=this.getLayer(P),P===null?null:(g.SetTileIndexCallback(A,M,R,P),this)},setTileLocationCallback:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:(g.SetTileLocationCallback(A,M,R,P,b,F,I),this)},setLayer:function(A){var M=this.getLayerIndex(A);return M!==null&&(this.currentLayerIndex=M),this},setBaseTileSize:function(A,M){this.tileWidth=A,this.tileHeight=M,this.widthInPixels=this.width*A,this.heightInPixels=this.height*M;for(var R=0;R<this.layers.length;R++){this.layers[R].baseTileWidth=A,this.layers[R].baseTileHeight=M;for(var P=this.layers[R].data,b=this.layers[R].width,F=this.layers[R].height,I=0;I<F;I++)for(var L=0;L<b;L++){var D=P[I][L];D!==null&&D.setSize(void 0,void 0,A,M)}}return this},setLayerTileSize:function(A,M,R){if(R=this.getLayer(R),R===null)return this;R.tileWidth=A,R.tileHeight=M;for(var P=R.data,b=R.width,F=R.height,I=0;I<F;I++)for(var L=0;L<b;L++){var D=P[I][L];D!==null&&D.setSize(A,M)}return this},shuffle:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:(g.Shuffle(A,M,R,P,b),this)},swapByIndex:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:(g.SwapByIndex(A,M,R,P,b,F,I),this)},tileToWorldX:function(A,M,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldX(A,M,R)},tileToWorldY:function(A,M,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldY(A,M,R)},tileToWorldXY:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:this._convert.TileToWorldXY(A,M,R,P,b)},getTileCorners:function(A,M,R,P){return P=this.getLayer(P),P===null?null:this._convert.GetTileCorners(A,M,R,P)},weightedRandomize:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:(g.WeightedRandomize(M,R,P,b,A,F),this)},worldToTileX:function(A,M,R,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileX(A,M,R,P)},worldToTileY:function(A,M,R,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileY(A,M,R,P)},worldToTileXY:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:this._convert.WorldToTileXY(A,M,R,P,b,F)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});o.exports=w}),45939:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),x=e(31989);a.register("tilemap",function(u){var r=u!==void 0?u:{};return x(this.scene,r.key,r.tileWidth,r.tileHeight,r.width,r.height,r.data,r.insertNull)})}),46029:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),x=e(31989);a.register("tilemap",function(u,r,h,n,l,c,s){return u===null&&(u=void 0),r===null&&(r=void 0),h===null&&(h=void 0),n===null&&(n=void 0),l===null&&(l=void 0),x(this.scene,u,r,h,n,l,c,s)})}),20442:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(78389),u=e(31401),r=e(95643),h=e(81086),n=e(19218),l=e(26099),c=new a({Extends:r,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,x,n],initialize:function(d,m,p,g,T,S){r.call(this,d,"TilemapLayer"),this.isTilemap=!0,this.tilemap=m,this.layerIndex=p,this.layer=m.layers[p],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new l,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(g),this.setAlpha(this.layer.alpha),this.setPosition(T,S),this.setOrigin(0,0),this.setSize(m.tileWidth*this.layer.width,m.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(s){var d=[],m=[],p=this.tilemap;Array.isArray(s)||(s=[s]);for(var g=0;g<s.length;g++){var T=s[g];if(typeof T=="string"&&(T=p.getTileset(T)),T){m.push(T);for(var S=T.firstgid,w=0;w<T.total;w++)d[S+w]=T}}this.gidMap=d,this.tileset=m},setRenderOrder:function(s){var d=["right-down","left-down","right-up","left-up"];return typeof s=="string"&&(s=d.indexOf(s)),s>=0&&s<4&&(this._renderOrder=s),this},calculateFacesAt:function(s,d){return h.CalculateFacesAt(s,d,this.layer),this},calculateFacesWithin:function(s,d,m,p){return h.CalculateFacesWithin(s,d,m,p,this.layer),this},createFromTiles:function(s,d,m,p,g){return h.CreateFromTiles(s,d,m,p,g,this.layer)},cull:function(s){return this.cullCallback(this.layer,s,this.culledTiles,this._renderOrder)},copy:function(s,d,m,p,g,T,S){return h.Copy(s,d,m,p,g,T,S,this.layer),this},fill:function(s,d,m,p,g,T){return h.Fill(s,d,m,p,g,T,this.layer),this},filterTiles:function(s,d,m,p,g,T,S){return h.FilterTiles(s,d,m,p,g,T,S,this.layer)},findByIndex:function(s,d,m){return h.FindByIndex(s,d,m,this.layer)},findTile:function(s,d,m,p,g,T,S){return h.FindTile(s,d,m,p,g,T,S,this.layer)},forEachTile:function(s,d,m,p,g,T,S){return h.ForEachTile(s,d,m,p,g,T,S,this.layer),this},setTint:function(s,d,m,p,g,T){s===void 0&&(s=16777215);var S=function(w){w.tint=s,w.tintFill=!1};return this.forEachTile(S,this,d,m,p,g,T)},setTintFill:function(s,d,m,p,g,T){s===void 0&&(s=16777215);var S=function(w){w.tint=s,w.tintFill=!0};return this.forEachTile(S,this,d,m,p,g,T)},getTileAt:function(s,d,m){return h.GetTileAt(s,d,m,this.layer)},getTileAtWorldXY:function(s,d,m,p){return h.GetTileAtWorldXY(s,d,m,p,this.layer)},getIsoTileAtWorldXY:function(s,d,m,p,g){m===void 0&&(m=!0);var T=this.tempVec;return h.IsometricWorldToTileXY(s,d,!0,T,g,this.layer,m),this.getTileAt(T.x,T.y,p)},getTilesWithin:function(s,d,m,p,g){return h.GetTilesWithin(s,d,m,p,g,this.layer)},getTilesWithinShape:function(s,d,m){return h.GetTilesWithinShape(s,d,m,this.layer)},getTilesWithinWorldXY:function(s,d,m,p,g,T){return h.GetTilesWithinWorldXY(s,d,m,p,g,T,this.layer)},hasTileAt:function(s,d){return h.HasTileAt(s,d,this.layer)},hasTileAtWorldXY:function(s,d,m){return h.HasTileAtWorldXY(s,d,m,this.layer)},putTileAt:function(s,d,m,p){return h.PutTileAt(s,d,m,p,this.layer)},putTileAtWorldXY:function(s,d,m,p,g){return h.PutTileAtWorldXY(s,d,m,p,g,this.layer)},putTilesAt:function(s,d,m,p){return h.PutTilesAt(s,d,m,p,this.layer),this},randomize:function(s,d,m,p,g){return h.Randomize(s,d,m,p,g,this.layer),this},removeTileAt:function(s,d,m,p){return h.RemoveTileAt(s,d,m,p,this.layer)},removeTileAtWorldXY:function(s,d,m,p,g){return h.RemoveTileAtWorldXY(s,d,m,p,g,this.layer)},renderDebug:function(s,d){return h.RenderDebug(s,d,this.layer),this},replaceByIndex:function(s,d,m,p,g,T){return h.ReplaceByIndex(s,d,m,p,g,T,this.layer),this},setSkipCull:function(s){return s===void 0&&(s=!0),this.skipCull=s,this},setCullPadding:function(s,d){return s===void 0&&(s=1),d===void 0&&(d=1),this.cullPaddingX=s,this.cullPaddingY=d,this},setCollision:function(s,d,m,p){return h.SetCollision(s,d,m,this.layer,p),this},setCollisionBetween:function(s,d,m,p){return h.SetCollisionBetween(s,d,m,p,this.layer),this},setCollisionByProperty:function(s,d,m){return h.SetCollisionByProperty(s,d,m,this.layer),this},setCollisionByExclusion:function(s,d,m){return h.SetCollisionByExclusion(s,d,m,this.layer),this},setCollisionFromCollisionGroup:function(s,d){return h.SetCollisionFromCollisionGroup(s,d,this.layer),this},setTileIndexCallback:function(s,d,m){return h.SetTileIndexCallback(s,d,m,this.layer),this},setTileLocationCallback:function(s,d,m,p,g,T){return h.SetTileLocationCallback(s,d,m,p,g,T,this.layer),this},shuffle:function(s,d,m,p){return h.Shuffle(s,d,m,p,this.layer),this},swapByIndex:function(s,d,m,p,g,T){return h.SwapByIndex(s,d,m,p,g,T,this.layer),this},tileToWorldX:function(s,d){return this.tilemap.tileToWorldX(s,d,this)},tileToWorldY:function(s,d){return this.tilemap.tileToWorldY(s,d,this)},tileToWorldXY:function(s,d,m,p){return this.tilemap.tileToWorldXY(s,d,m,p,this)},getTileCorners:function(s,d,m){return this.tilemap.getTileCorners(s,d,m,this)},weightedRandomize:function(s,d,m,p,g){return h.WeightedRandomize(d,m,p,g,s,this.layer),this},worldToTileX:function(s,d,m){return this.tilemap.worldToTileX(s,d,m,this)},worldToTileY:function(s,d,m){return this.tilemap.worldToTileY(s,d,m,this)},worldToTileXY:function(s,d,m,p,g){return this.tilemap.worldToTileXY(s,d,m,p,g,this)},destroy:function(s){s===void 0&&(s=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),s&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});o.exports=c}),16153:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),x=new a,u=new a,r=new a,h=function(n,l,c,s){var d=l.cull(c),m=d.length,p=c.alpha*l.alpha;if(!(m===0||p<=0)){var g=x,T=u,S=r;T.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),g.copyFrom(c.matrix);var w=n.currentContext,A=l.gidMap;w.save(),s?(g.multiplyWithOffset(s,-c.scrollX*l.scrollFactorX,-c.scrollY*l.scrollFactorY),T.e=l.x,T.f=l.y,g.multiply(T,S),S.copyToContext(w)):(T.e-=c.scrollX*l.scrollFactorX,T.f-=c.scrollY*l.scrollFactorY,T.copyToContext(w)),(!n.antialias||l.scaleX>1||l.scaleY>1)&&(w.imageSmoothingEnabled=!1);for(var M=0;M<m;M++){var R=d[M],P=A[R.index];if(P){var b=P.image.getSourceImage(),F=P.getTileTextureCoordinates(R.index),I=P.tileWidth,L=P.tileHeight;if(!(F===null||I===0||L===0)){var D=I*.5,O=L*.5;F.x+=P.tileOffset.x,F.y+=P.tileOffset.y,w.save(),w.translate(R.pixelX+D,R.pixelY+O),R.rotation!==0&&w.rotate(R.rotation),(R.flipX||R.flipY)&&w.scale(R.flipX?-1:1,R.flipY?-1:1),w.globalAlpha=p*R.alpha,w.drawImage(b,F.x,F.y,I,L,-D,-O,I,L),w.restore()}}}w.restore()}};o.exports=h}),19218:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),x=a,u=a;x=e(99558),u=e(16153),o.exports={renderWebGL:x,renderCanvas:u}}),99558:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),x=function(u,r,h){var n=r.cull(h),l=n.length,c=h.alpha*r.alpha;if(!(l===0||c<=0)){var s=r.gidMap,d=u.pipelines.set(r.pipeline,r),m=a.getTintAppendFloatAlpha,p=r.scrollFactorX,g=r.scrollFactorY,T=r.x,S=r.y,w=r.scaleX,A=r.scaleY;u.pipelines.preBatch(r);for(var M=0;M<l;M++){var R=n[M],P=s[R.index];if(P){var b=P.getTileTextureCoordinates(R.index),F=P.tileWidth,I=P.tileHeight;if(!(!b||F===0||I===0)){var L=F*.5,D=I*.5,O=P.glTexture,z=d.setTexture2D(O,r),W=F,X=I,_=b.x,U=b.y,G=P.tileOffset.x,N=P.tileOffset.y,H=m(R.tint,c*R.alpha);d.batchTexture(r,O,O.width,O.height,T+R.pixelX*w+(L*w-G),S+R.pixelY*A+(D*A-N),F,I,w,A,R.rotation,R.flipX,R.flipY,p,g,L,D,_,U,W,X,H,H,H,H,R.tintFill,0,0,h,null,!0,z,!0)}}}u.pipelines.postBatch(r)}};o.exports=x}),33629:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(26099),u=new a({initialize:function(h,n,l,c,s,d,m,p,g){(l===void 0||l<=0)&&(l=32),(c===void 0||c<=0)&&(c=32),s===void 0&&(s=0),d===void 0&&(d=0),m===void 0&&(m={}),p===void 0&&(p={}),this.name=h,this.firstgid=n,this.tileWidth=l,this.tileHeight=c,this.tileMargin=s,this.tileSpacing=d,this.tileProperties=m,this.tileData=p,this.tileOffset=new x,g!==void 0&&this.tileOffset.set(g.x,g.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var h=this.getTileData(r);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){this.image=r;var h=r.get(),n=r.getFrameBounds();return this.glTexture=h.source.glTexture,h.width>n.width||h.height>n.height?this.updateTileData(h.width,h.height):this.updateTileData(n.width,n.height,n.x,n.y),this},setTileSize:function(r,h){return r!==void 0&&(this.tileWidth=r),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,h){return r!==void 0&&(this.tileMargin=r),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,h,n,l){n===void 0&&(n=0),l===void 0&&(l=0);var c=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),s=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(c%1!==0||s%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),c=Math.floor(c),s=Math.floor(s),this.rows=c,this.columns=s,this.total=c*s,this.texCoordinates.length=0;for(var d=this.tileMargin+n,m=this.tileMargin+l,p=0;p<this.rows;p++){for(var g=0;g<this.columns;g++)this.texCoordinates.push({x:d,y:m}),d+=this.tileWidth+this.tileSpacing;d=this.tileMargin+n,m+=this.tileHeight+this.tileSpacing}return this}});o.exports=u}),72023:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),x=function(u,r,h){var n=a(u,r,!0,h),l=a(u,r-1,!0,h),c=a(u,r+1,!0,h),s=a(u-1,r,!0,h),d=a(u+1,r,!0,h),m=n&&n.collides;return m&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),l&&l.collides&&(m&&(n.faceTop=!1),l.faceBottom=!m),c&&c.collides&&(m&&(n.faceBottom=!1),c.faceTop=!m),s&&s.collides&&(m&&(n.faceLeft=!1),s.faceRight=!m),d&&d.collides&&(m&&(n.faceRight=!1),d.faceLeft=!m),n&&!n.collides&&n.resetFaces(),n};o.exports=x}),42573:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),x=e(7386),u=function(r,h,n,l,c){for(var s=null,d=null,m=null,p=null,g=x(r,h,n,l,null,c),T=0;T<g.length;T++){var S=g[T];S&&(S.collides?(s=a(S.x,S.y-1,!0,c),d=a(S.x,S.y+1,!0,c),m=a(S.x-1,S.y,!0,c),p=a(S.x+1,S.y,!0,c),S.faceTop=!(s&&s.collides),S.faceBottom=!(d&&d.collides),S.faceLeft=!(m&&m.collides),S.faceRight=!(p&&p.collides)):S.resetFaces())}};o.exports=u}),33528:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=new a,u=function(r,h,n,l){var c=n.tilemapLayer,s=c.cullPaddingX,d=c.cullPaddingY,m=c.tilemap.tileToWorldXY(r,h,x,l,c);return m.x>l.worldView.x+c.scaleX*n.tileWidth*(-s-.5)&&m.x<l.worldView.right+c.scaleX*n.tileWidth*(s-.5)&&m.y>l.worldView.y+c.scaleY*n.tileHeight*(-d-1)&&m.y<l.worldView.bottom+c.scaleY*n.tileHeight*(d-.5)};o.exports=u}),1785:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42573),x=e(7386),u=e(62991),r=e(23029),h=function(n,l,c,s,d,m,p,g){p===void 0&&(p=!0);var T=x(n,l,c,s,null,g),S=[];T.forEach(function(F){var I=new r(F.layer,F.index,F.x,F.y,F.width,F.height,F.baseWidth,F.baseHeight);I.copy(F),S.push(I)});for(var w=d-n,A=m-l,M=0;M<S.length;M++){var R=S[M],P=R.x+w,b=R.y+A;u(P,b,g)&&g.data[b][P]&&(R.x=P,R.y=b,R.updatePixelXY(),g.data[b][P]=R)}p&&a(d-1,m-1,c+2,s+2,g),T.length=0,S.length=0};o.exports=h}),78419:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),x=e(7386),u=e(27987),r=function(h,n,l,c,s,d){l||(l={}),Array.isArray(h)||(h=[h]);var m=d.tilemapLayer;c||(c=m.scene),s||(s=c.cameras.main);var p=d.width,g=d.height,T=x(0,0,p,g,null,d),S=[],w,A=function(b,F,I){for(var L=0;L<I.length;L++){var D=I[L];b.hasOwnProperty(D)||(b[D]=F[D])}};for(w=0;w<T.length;w++){var M=T[w],R=a(l);if(h.indexOf(M.index)!==-1){var P=m.tileToWorldXY(M.x,M.y,void 0,s,d);R.x=P.x,R.y=P.y,A(R,M,["rotation","flipX","flipY","alpha","visible","tint"]),R.hasOwnProperty("origin")||(R.x+=M.width*.5,R.y+=M.height*.5),R.hasOwnProperty("useSpriteSheet")&&(R.key=M.tileset.image,R.frame=M.index-M.tileset.firstgid),S.push(c.make.sprite(R))}}if(Array.isArray(n))for(w=0;w<h.length;w++)u(h[w],n[w],0,0,p,g,d);else if(n!==null)for(w=0;w<h.length;w++)u(h[w],n,0,0,p,g,d);return S};o.exports=r}),19545:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),x=e(63448),u=e(56583),r=new a,h=function(n,l){var c=n.tilemapLayer.tilemap,s=n.tilemapLayer,d=Math.floor(c.tileWidth*s.scaleX),m=Math.floor(c.tileHeight*s.scaleY),p=u(l.worldView.x-s.x,d,0,!0)-s.cullPaddingX,g=x(l.worldView.right-s.x,d,0,!0)+s.cullPaddingX,T=u(l.worldView.y-s.y,m,0,!0)-s.cullPaddingY,S=x(l.worldView.bottom-s.y,m,0,!0)+s.cullPaddingY;return r.setTo(p,T,g-p,S-T)};o.exports=h}),30003:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19545),x=e(32483),u=function(r,h,n,l){n===void 0&&(n=[]),l===void 0&&(l=0),n.length=0;var c=r.tilemapLayer,s=a(r,h);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(s.left=0,s.right=r.width,s.top=0,s.bottom=r.height),x(r,s,l,n),n};o.exports=u}),35137:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(42573),u=e(20576),r=function(h,n,l,c,s,d,m){for(var p=m.collideIndexes.indexOf(h)!==-1,g=a(n,l,c,s,null,m),T=0;T<g.length;T++)g[T].index=h,u(g[T],p);d&&x(n-1,l-1,c+2,s+2,m)};o.exports=r}),40253:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(u,r,h,n,l,c,s,d){var m=a(h,n,l,c,s,d);return m.filter(u,r)};o.exports=x}),52692:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){a===void 0&&(a=0),x===void 0&&(x=!1);var r=0,h,n,l;if(x){for(n=u.height-1;n>=0;n--)for(h=u.width-1;h>=0;h--)if(l=u.data[n][h],l&&l.index===e){if(r===a)return l;r+=1}}else for(n=0;n<u.height;n++)for(h=0;h<u.width;h++)if(l=u.data[n][h],l&&l.index===e){if(r===a)return l;r+=1}return null};o.exports=E}),66151:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(u,r,h,n,l,c,s,d){var m=a(h,n,l,c,s,d);return m.find(u,r)||null};o.exports=x}),97560:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(u,r,h,n,l,c,s,d){var m=a(h,n,l,c,s,d);m.forEach(u,r)};o.exports=x}),43305:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(30003),u=e(9474),r=e(14018),h=e(29747),n=e(54503),l=function(c){return c===a.ORTHOGONAL?x:c===a.HEXAGONAL?u:c===a.STAGGERED?n:c===a.ISOMETRIC?r:h};o.exports=l}),7423:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62991),x=function(u,r,h,n){if(a(u,r,n)){var l=n.data[r][u]||null;return l?l.index===-1?h?l:null:l:null}else return null};o.exports=x}),60540:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),x=e(26099),u=new x,r=function(h,n,l,c,s){return s.tilemapLayer.worldToTileXY(h,n,!0,u,c),a(u.x,u.y,l,s)};o.exports=r}),55826:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n){var l=n.baseTileWidth,c=n.baseTileHeight,s=n.tilemapLayer,d=0,m=0;s&&(h||(h=s.scene.cameras.main),d=s.x+h.scrollX*(1-s.scrollFactorX),m=s.y+h.scrollY*(1-s.scrollFactorY),l*=s.scaleX,c*=s.scaleY);var p=d+u*l,g=m+r*c;return[new a(p,g),new a(p+l,g),new a(p+l,g+c),new a(p,g+c)]};o.exports=x}),11758:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(27229),u=e(29747),r=e(55826),h=function(n){return n===a.ORTHOGONAL?r:n===a.ISOMETRIC?u:n===a.HEXAGONAL?x:(n===a.STAGGERED,u)};o.exports=h}),39167:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(29747),u=e(97281),r=function(h){return h===a.ORTHOGONAL?u:x};o.exports=r}),62e3:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(19951),u=e(14127),r=e(29747),h=e(97202),n=e(70326),l=function(c){return c===a.ORTHOGONAL?n:c===a.ISOMETRIC?u:c===a.HEXAGONAL?x:c===a.STAGGERED?h:r};o.exports=l}),5984:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(29747),u=e(28054),r=e(29650),h=function(n){return n===a.ORTHOGONAL?r:n===a.STAGGERED?u:x};o.exports=h}),7386:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(u,r,h,n,l,c){u===void 0&&(u=0),r===void 0&&(r=0),h===void 0&&(h=c.width),n===void 0&&(n=c.height),l||(l={});var s=a(l,"isNotEmpty",!1),d=a(l,"isColliding",!1),m=a(l,"hasInterestingFace",!1);u<0&&(h+=u,u=0),r<0&&(n+=r,r=0),u+h>c.width&&(h=Math.max(c.width-u,0)),r+n>c.height&&(n=Math.max(c.height-r,0));for(var p=[],g=r;g<r+n;g++)for(var T=u;T<u+h;T++){var S=c.data[g][T];if(S!==null){if(s&&S.index===-1||d&&!S.collides||m&&!S.hasInterestingFace)continue;p.push(S)}}return p};o.exports=x}),91141:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55738),x=e(7386),u=e(91865),r=e(29747),h=e(26099),n=e(91907),l=function(p,g){return u.RectangleToTriangle(g,p)},c=new h,s=new h,d=new h,m=function(p,g,T,S){if(S.orientation!==n.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(p===void 0)return[];var w=r;p instanceof a.Circle?w=u.CircleToRectangle:p instanceof a.Rectangle?w=u.RectangleToRectangle:p instanceof a.Triangle?w=l:p instanceof a.Line&&(w=u.LineToRectangle),S.tilemapLayer.worldToTileXY(p.left,p.top,!0,s,T);var A=s.x,M=s.y;S.tilemapLayer.worldToTileXY(p.right,p.bottom,!1,d,T);var R=Math.ceil(d.x),P=Math.ceil(d.y),b=Math.max(R-A,1),F=Math.max(P-M,1),I=x(A,M,b,F,g,S),L=S.tileWidth,D=S.tileHeight;S.tilemapLayer&&(L*=S.tilemapLayer.scaleX,D*=S.tilemapLayer.scaleY);for(var O=[],z=new a.Rectangle(0,0,L,D),W=0;W<I.length;W++){var X=I[W];S.tilemapLayer.tileToWorldXY(X.x,X.y,c,T),z.x=c.x,z.y=c.y,w(p,z)&&O.push(X)}return O};o.exports=m}),96523:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(26099),u=new x,r=new x,h=function(n,l,c,s,d,m,p){var g=p.tilemapLayer.tilemap._convert.WorldToTileXY;g(n,l,!0,u,m,p);var T=u.x,S=u.y;g(n+c,l+s,!1,r,m,p);var w=Math.ceil(r.x),A=Math.ceil(r.y);return a(T,S,w-T,A-S,d,p)};o.exports=h}),96113:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(20242),u=e(10095),r=function(h){return h===a.ORTHOGONAL?u:x};o.exports=r}),16926:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(86625),u=e(96897),r=e(29747),h=e(15108),n=e(85896),l=function(c){return c===a.ORTHOGONAL?n:c===a.ISOMETRIC?u:c===a.HEXAGONAL?x:c===a.STAGGERED?h:r};o.exports=l}),55762:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=e(20242),u=e(51900),r=e(63288),h=function(n){return n===a.ORTHOGONAL?r:n===a.STAGGERED?u:x};o.exports=h}),45091:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62991),x=function(u,r,h){if(a(u,r,h)){var n=h.data[r][u];return n!==null&&n.index>-1}else return!1};o.exports=x}),24152:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45091),x=e(26099),u=new x,r=function(h,n,l,c){c.tilemapLayer.worldToTileXY(h,n,!0,u,l);var s=u.x,d=u.y;return a(s,d,c)};o.exports=r}),90454:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63448),x=e(56583),u=function(r,h){var n=r.tilemapLayer.tilemap,l=r.tilemapLayer,c=Math.floor(n.tileWidth*l.scaleX),s=Math.floor(n.tileHeight*l.scaleY),d=r.hexSideLength,m,p,g,T;if(r.staggerAxis==="y"){var S=(s-d)/2+d;m=x(h.worldView.x-l.x,c,0,!0)-l.cullPaddingX,p=a(h.worldView.right-l.x,c,0,!0)+l.cullPaddingX,g=x(h.worldView.y-l.y,S,0,!0)-l.cullPaddingY,T=a(h.worldView.bottom-l.y,S,0,!0)+l.cullPaddingY}else{var w=(c-d)/2+d;m=x(h.worldView.x-l.x,w,0,!0)-l.cullPaddingX,p=a(h.worldView.right-l.x,w,0,!0)+l.cullPaddingX,g=x(h.worldView.y-l.y,s,0,!0)-l.cullPaddingY,T=a(h.worldView.bottom-l.y,s,0,!0)+l.cullPaddingY}return{left:m,right:p,top:g,bottom:T}};o.exports=u}),9474:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90454),x=e(32483),u=function(r,h,n,l){n===void 0&&(n=[]),l===void 0&&(l=0),n.length=0;var c=r.tilemapLayer,s=a(r,h);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(s.left=0,s.right=r.width,s.top=0,s.bottom=r.height),x(r,s,l,n),n};o.exports=u}),27229:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19951),x=e(26099),u=new x,r=function(h,n,l,c){var s=c.baseTileWidth,d=c.baseTileHeight,m=c.tilemapLayer;m&&(s*=m.scaleX,d*=m.scaleY);var p=a(h,n,u,l,c),g=[],T=.5773502691896257,S,w;c.staggerAxis==="y"?(S=T*s,w=d/2):(S=s/2,w=T*d);for(var A=0;A<6;A++){var M=2*Math.PI*(.5-A)/6;g.push(new x(p.x+S*Math.cos(M),p.y+w*Math.sin(M)))}return g};o.exports=r}),19951:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n,l){h||(h=new a);var c=l.baseTileWidth,s=l.baseTileHeight,d=l.tilemapLayer,m=0,p=0;d&&(n||(n=d.scene.cameras.main),m=d.x+n.scrollX*(1-d.scrollFactorX),p=d.y+n.scrollY*(1-d.scrollFactorY),c*=d.scaleX,s*=d.scaleY);var g=c/2,T=s/2,S,w,A=l.staggerAxis,M=l.staggerIndex;return A==="y"?(S=m+c*u+c,w=p+1.5*r*T+T,r%2===0&&(M==="odd"?S-=g:S+=g)):A==="x"&&M==="odd"&&(S=m+1.5*u*g+g,w=p+s*u+s,u%2===0&&(M==="odd"?w-=T:w+=T)),h.set(S,w)};o.exports=x}),86625:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n,l,c){n||(n=new a);var s=c.baseTileWidth,d=c.baseTileHeight,m=c.tilemapLayer;m&&(l||(l=m.scene.cameras.main),u=u-(m.x+l.scrollX*(1-m.scrollFactorX)),r=r-(m.y+l.scrollY*(1-m.scrollFactorY)),s*=m.scaleX,d*=m.scaleY);var p=.5773502691896257,g=-.3333333333333333,T=0,S=.6666666666666666,w=s/2,A=d/2,M,R,P,b,F;c.staggerAxis==="y"?(M=(u-w)/(p*s),R=(r-A)/A,P=p*M+g*R,b=T*M+S*R):(M=(u-w)/w,R=(r-A)/(p*d),P=g*M+p*R,b=S*M+T*R),F=-P-b;var I=Math.round(P),L=Math.round(b),D=Math.round(F),O=Math.abs(I-P),z=Math.abs(L-b),W=Math.abs(D-F);O>z&&O>W?I=-L-D:z>W&&(L=-I-D);var X,_=L;return c.staggerIndex==="odd"?X=_%2===0?L/2+I:L/2+I-.5:X=_%2===0?L/2+I:L/2+I+.5,n.set(X,_)};o.exports=x}),62991:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e>=0&&e<x.width&&a>=0&&a<x.height};o.exports=E}),14018:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33528),x=function(u,r,h,n){h===void 0&&(h=[]),n===void 0&&(n=0),h.length=0;var l=u.tilemapLayer,c=u.data,s=u.width,d=u.height,m=l.skipCull,p=0,g=s,T=0,S=d,w,A,M;if(n===0)for(A=T;A<S;A++)for(w=p;w<g;w++)M=c[A][w],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!a(w,A,u,r)||h.push(M));else if(n===1)for(A=T;A<S;A++)for(w=g;w>=p;w--)M=c[A][w],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!a(w,A,u,r)||h.push(M));else if(n===2)for(A=S;A>=T;A--)for(w=p;w<g;w++)M=c[A][w],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!a(w,A,u,r)||h.push(M));else if(n===3)for(A=S;A>=T;A--)for(w=g;w>=p;w--)M=c[A][w],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!m&&!a(w,A,u,r)||h.push(M));return l.tilesDrawn=h.length,l.tilesTotal=s*d,h};o.exports=x}),14127:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n,l){h||(h=new a);var c=l.baseTileWidth,s=l.baseTileHeight,d=l.tilemapLayer,m=0,p=0;d&&(n||(n=d.scene.cameras.main),m=d.x+n.scrollX*(1-d.scrollFactorX),c*=d.scaleX,p=d.y+n.scrollY*(1-d.scrollFactorY),s*=d.scaleY);var g=m+(u-r)*(c/2),T=p+(u+r)*(s/2);return h.set(g,T)};o.exports=x}),96897:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n,l,c,s){n||(n=new a);var d=c.baseTileWidth,m=c.baseTileHeight,p=c.tilemapLayer;p&&(l||(l=p.scene.cameras.main),r=r-(p.y+l.scrollY*(1-p.scrollFactorY)),m*=p.scaleY,u=u-(p.x+l.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=d/2,T=m/2;u=u-g,s||(r=r-m);var S=.5*(u/g+r/T),w=.5*(-u/g+r/T);return h&&(S=Math.floor(S),w=Math.floor(w)),n.set(S,w)};o.exports=x}),71558:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23029),x=e(62991),u=e(72023),r=e(20576),h=function(n,l,c,s,d){if(s===void 0&&(s=!0),!x(l,c,d))return null;var m,p=d.data[c][l],g=p&&p.collides;n instanceof a?(d.data[c][l]===null&&(d.data[c][l]=new a(d,n.index,l,c,d.tileWidth,d.tileHeight)),d.data[c][l].copy(n)):(m=n,d.data[c][l]===null?d.data[c][l]=new a(d,m,l,c,d.tileWidth,d.tileHeight):d.data[c][l].index=m);var T=d.data[c][l],S=d.collideIndexes.indexOf(T.index)!==-1;if(m=n instanceof a?n.index:n,m===-1)T.width=d.tileWidth,T.height=d.tileHeight;else{var w=d.tilemapLayer.tilemap,A=w.tiles,M=A[m][2],R=w.tilesets[M];T.width=R.tileWidth,T.height=R.tileHeight}return r(T,S),s&&g!==T.collides&&u(l,c,d),T};o.exports=h}),26303:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71558),x=e(26099),u=new x,r=function(h,n,l,c,s,d){return d.tilemapLayer.worldToTileXY(n,l,!0,u,s,d),a(h,u.x,u.y,c,d)};o.exports=r}),14051:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42573),x=e(71558),u=function(r,h,n,l,c){if(l===void 0&&(l=!0),!Array.isArray(r))return null;Array.isArray(r[0])||(r=[r]);for(var s=r.length,d=r[0].length,m=0;m<s;m++)for(var p=0;p<d;p++){var g=r[m][p];x(g,h+p,n+m,!1,c)}l&&a(h-1,n-1,d+2,s+2,c)};o.exports=u}),77389:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(26546),u=function(r,h,n,l,c,s){var d,m=a(r,h,n,l,{},s);if(!c)for(c=[],d=0;d<m.length;d++)c.indexOf(m[d].index)===-1&&c.push(m[d].index);for(d=0;d<m.length;d++)m[d].index=x(c)};o.exports=u}),63557:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23029),x=e(62991),u=e(72023),r=function(h,n,l,c,s){if(l===void 0&&(l=!0),c===void 0&&(c=!0),!x(h,n,s))return null;var d=s.data[n][h];if(d)s.data[n][h]=l?null:new a(s,-1,h,n,s.tileWidth,s.tileHeight);else return null;return c&&d&&d.collides&&u(h,n,s),d};o.exports=r}),94178:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63557),x=e(26099),u=new x,r=function(h,n,l,c,s,d){return d.tilemapLayer.worldToTileXY(h,n,!0,u,s,d),a(u.x,u.y,l,c,d)};o.exports=r}),15533:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(3956),u=new x(105,210,231,150),r=new x(243,134,48,200),h=new x(40,39,37,150),n=function(l,c,s){c===void 0&&(c={});var d=c.tileColor!==void 0?c.tileColor:u,m=c.collidingTileColor!==void 0?c.collidingTileColor:r,p=c.faceColor!==void 0?c.faceColor:h,g=a(0,0,s.width,s.height,null,s);l.translateCanvas(s.tilemapLayer.x,s.tilemapLayer.y),l.scaleCanvas(s.tilemapLayer.scaleX,s.tilemapLayer.scaleY);for(var T=0;T<g.length;T++){var S=g[T],w=S.tileset?S.tileset.tileOffset:{x:0,y:0},A=S.width,M=S.height,R=S.pixelX-w.x,P=S.pixelY-w.y,b=S.collides?m:d;b!==null&&(l.fillStyle(b.color,b.alpha/255),l.fillRect(R,P,A,M)),R+=1,P+=1,A-=2,M-=2,p!==null&&(l.lineStyle(1,p.color,p.alpha/255),S.faceTop&&l.lineBetween(R,P,R+A,P),S.faceRight&&l.lineBetween(R+A,P,R+A,P+M),S.faceBottom&&l.lineBetween(R,P+M,R+A,P+M),S.faceLeft&&l.lineBetween(R,P,R,P+M))}};o.exports=n}),27987:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(u,r,h,n,l,c,s){for(var d=a(h,n,l,c,null,s),m=0;m<d.length;m++)d[m]&&d[m].index===u&&(d[m].index=r)};o.exports=x}),32483:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=e.data,h=e.width,n=e.height,l=e.tilemapLayer,c=Math.max(0,a.left),s=Math.min(h,a.right),d=Math.max(0,a.top),m=Math.min(n,a.bottom),p,g,T;if(x===0)for(g=d;g<m;g++)for(p=c;r[g]&&p<s;p++)T=r[g][p],!(!T||T.index===-1||!T.visible||T.alpha===0)&&u.push(T);else if(x===1)for(g=d;g<m;g++)for(p=s;r[g]&&p>=c;p--)T=r[g][p],!(!T||T.index===-1||!T.visible||T.alpha===0)&&u.push(T);else if(x===2)for(g=m;g>=d;g--)for(p=c;r[g]&&p<s;p++)T=r[g][p],!(!T||T.index===-1||!T.visible||T.alpha===0)&&u.push(T);else if(x===3)for(g=m;g>=d;g--)for(p=s;r[g]&&p>=c;p--)T=r[g][p],!(!T||T.index===-1||!T.visible||T.alpha===0)&&u.push(T);return l.tilesDrawn=u.length,l.tilesTotal=h*n,u};o.exports=E}),57068:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),u=e(9589),r=function(h,n,l,c,s){n===void 0&&(n=!0),l===void 0&&(l=!0),s===void 0&&(s=!0),Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++)u(h[d],n,c);if(s)for(var m=0;m<c.height;m++)for(var p=0;p<c.width;p++){var g=c.data[m][p];g&&h.indexOf(g.index)!==-1&&a(g,n)}l&&x(0,0,c.width,c.height,c)};o.exports=r}),37266:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),u=e(9589),r=function(h,n,l,c,s,d){if(l===void 0&&(l=!0),c===void 0&&(c=!0),d===void 0&&(d=!0),!(h>n)){for(var m=h;m<=n;m++)u(m,l,s);if(d)for(var p=0;p<s.height;p++)for(var g=0;g<s.width;g++){var T=s.data[p][g];T&&T.index>=h&&T.index<=n&&a(T,l)}c&&x(0,0,s.width,s.height,s)}};o.exports=r}),75661:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),u=e(9589),r=function(h,n,l,c){n===void 0&&(n=!0),l===void 0&&(l=!0),Array.isArray(h)||(h=[h]);for(var s=0;s<c.height;s++)for(var d=0;d<c.width;d++){var m=c.data[s][d];m&&h.indexOf(m.index)===-1&&(a(m,n),u(m.index,n,c))}l&&x(0,0,c.width,c.height,c)};o.exports=r}),64740:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),u=e(97022),r=function(h,n,l,c){n===void 0&&(n=!0),l===void 0&&(l=!0);for(var s=0;s<c.height;s++)for(var d=0;d<c.width;d++){var m=c.data[s][d];if(m){for(var p in h)if(u(m.properties,p)){var g=h[p];Array.isArray(g)||(g=[g]);for(var T=0;T<g.length;T++)m.properties[p]===g[T]&&a(m,n)}}}l&&x(0,0,c.width,c.height,c)};o.exports=r}),63307:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),x=e(42573),u=function(r,h,n){r===void 0&&(r=!0),h===void 0&&(h=!0);for(var l=0;l<n.height;l++)for(var c=0;c<n.width;c++){var s=n.data[l][c];if(s){var d=s.getCollisionGroup();d&&d.objects&&d.objects.length>0&&a(s,r)}}h&&x(0,0,n.width,n.height,n)};o.exports=u}),9589:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=x.collideIndexes.indexOf(e);a&&u===-1?x.collideIndexes.push(e):!a&&u!==-1&&x.collideIndexes.splice(u,1)};o.exports=E}),20576:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};o.exports=E}),79583:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){if(typeof e=="number")u.callbacks[e]=a!==null?{callback:a,callbackContext:x}:void 0;else for(var r=0,h=e.length;r<h;r++)u.callbacks[e[r]]=a!==null?{callback:a,callbackContext:x}:void 0};o.exports=E}),93254:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(u,r,h,n,l,c,s){for(var d=a(u,r,h,n,null,s),m=0;m<d.length;m++)d[m].setCollisionCallback(l,c)};o.exports=x}),32903:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(33680),u=function(r,h,n,l,c){var s=a(r,h,n,l,null,c),d=s.map(function(p){return p.index});x(d);for(var m=0;m<s.length;m++)s[m].index=d[m]};o.exports=u}),61325:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63448),x=e(56583),u=function(r,h){var n=r.tilemapLayer.tilemap,l=r.tilemapLayer,c=Math.floor(n.tileWidth*l.scaleX),s=Math.floor(n.tileHeight*l.scaleY),d=x(h.worldView.x-l.x,c,0,!0)-l.cullPaddingX,m=a(h.worldView.right-l.x,c,0,!0)+l.cullPaddingX,p=x(h.worldView.y-l.y,s/2,0,!0)-l.cullPaddingY,g=a(h.worldView.bottom-l.y,s/2,0,!0)+l.cullPaddingY;return{left:d,right:m,top:p,bottom:g}};o.exports=u}),54503:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61325),x=e(32483),u=function(r,h,n,l){n===void 0&&(n=[]),l===void 0&&(l=0),n.length=0;var c=r.tilemapLayer,s=a(r,h);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(s.left=0,s.right=r.width,s.top=0,s.bottom=r.height),x(r,s,l,n),n};o.exports=u}),97202:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n,l){h||(h=new a);var c=l.baseTileWidth,s=l.baseTileHeight,d=l.tilemapLayer,m=0,p=0;d&&(n||(n=d.scene.cameras.main),m=d.x+n.scrollX*(1-d.scrollFactorX),c*=d.scaleX,p=d.y+n.scrollY*(1-d.scrollFactorY),s*=d.scaleY);var g=m+u*c+r%2*(c/2),T=p+r*(s/2);return h.set(g,T)};o.exports=x}),28054:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=x.baseTileHeight,r=x.tilemapLayer,h=0;return r&&(a===void 0&&(a=r.scene.cameras.main),h=r.y+a.scrollY*(1-r.scrollFactorY),u*=r.scaleY),h+e*(u/2)+u};o.exports=E}),15108:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n,l,c){n||(n=new a);var s=c.baseTileWidth,d=c.baseTileHeight,m=c.tilemapLayer;m&&(l||(l=m.scene.cameras.main),r=r-(m.y+l.scrollY*(1-m.scrollFactorY)),d*=m.scaleY,u=u-(m.x+l.scrollX*(1-m.scrollFactorX)),s*=m.scaleX);var p=h?Math.floor(r/(d/2)):r/(d/2),g=h?Math.floor((u+p%2*.5*s)/s):(u+p%2*.5*s)/s;return n.set(g,p)};o.exports=x}),51900:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=u.baseTileHeight,h=u.tilemapLayer;return h&&(x||(x=h.scene.cameras.main),e=e-(h.y+x.scrollY*(1-h.scrollFactorY)),r*=h.scaleY),a?Math.floor(e/(r/2)):e/(r/2)};o.exports=E}),86560:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=function(u,r,h,n,l,c,s){for(var d=a(h,n,l,c,null,s),m=0;m<d.length;m++)d[m]&&(d[m].index===u?d[m].index=r:d[m].index===r&&(d[m].index=u))};o.exports=x}),97281:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=x.baseTileWidth,r=x.tilemapLayer,h=0;return r&&(a||(a=r.scene.cameras.main),h=r.x+a.scrollX*(1-r.scrollFactorX),u*=r.scaleX),h+e*u};o.exports=E}),70326:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97281),x=e(29650),u=e(26099),r=function(h,n,l,c,s){return l||(l=new u(0,0)),l.x=a(h,c,s),l.y=x(n,c,s),l};o.exports=r}),29650:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=x.baseTileHeight,r=x.tilemapLayer,h=0;return r&&(a||(a=r.scene.cameras.main),h=r.y+a.scrollY*(1-r.scrollFactorY),u*=r.scaleY),h+e*u};o.exports=E}),77366:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),x=e(75508),u=function(r,h,n,l,c,s){if(c){var d,m=a(r,h,n,l,null,s),p=0;for(d=0;d<c.length;d++)p+=c[d].weight;if(!(p<=0))for(d=0;d<m.length;d++){for(var g=x.RND.frac()*p,T=0,S=-1,w=0;w<c.length;w++)if(T+=c[w].weight,g<=T){var A=c[w].index;S=Array.isArray(A)?A[Math.floor(x.RND.frac()*A.length)]:A;break}m[d].index=S}}};o.exports=u}),10095:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85896),x=e(26099),u=new x,r=function(h,n,l,c){return a(h,0,n,u,l,c),u.x};o.exports=r}),85896:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),x=function(u,r,h,n,l,c){h===void 0&&(h=!0),n||(n=new a);var s=c.baseTileWidth,d=c.baseTileHeight,m=c.tilemapLayer;m&&(l||(l=m.scene.cameras.main),u=u-(m.x+l.scrollX*(1-m.scrollFactorX)),r=r-(m.y+l.scrollY*(1-m.scrollFactorY)),s*=m.scaleX,d*=m.scaleY);var p=u/s,g=r/d;return h&&(p=Math.floor(p),g=Math.floor(g)),n.set(p,g)};o.exports=x}),63288:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85896),x=e(26099),u=new x,r=function(h,n,l,c){return a(0,h,n,u,l,c),u.y};o.exports=r}),81086:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CalculateFacesAt:e(72023),CalculateFacesWithin:e(42573),CheckIsoBounds:e(33528),Copy:e(1785),CreateFromTiles:e(78419),CullBounds:e(19545),CullTiles:e(30003),Fill:e(35137),FilterTiles:e(40253),FindByIndex:e(52692),FindTile:e(66151),ForEachTile:e(97560),GetCullTilesFunction:e(43305),GetTileAt:e(7423),GetTileAtWorldXY:e(60540),GetTileCorners:e(55826),GetTileCornersFunction:e(11758),GetTilesWithin:e(7386),GetTilesWithinShape:e(91141),GetTilesWithinWorldXY:e(96523),GetTileToWorldXFunction:e(39167),GetTileToWorldXYFunction:e(62e3),GetTileToWorldYFunction:e(5984),GetWorldToTileXFunction:e(96113),GetWorldToTileXYFunction:e(16926),GetWorldToTileYFunction:e(55762),HasTileAt:e(45091),HasTileAtWorldXY:e(24152),HexagonalCullBounds:e(90454),HexagonalCullTiles:e(9474),HexagonalGetTileCorners:e(27229),HexagonalTileToWorldXY:e(19951),HexagonalWorldToTileXY:e(86625),IsInLayerBounds:e(62991),IsometricCullTiles:e(14018),IsometricTileToWorldXY:e(14127),IsometricWorldToTileXY:e(96897),PutTileAt:e(71558),PutTileAtWorldXY:e(26303),PutTilesAt:e(14051),Randomize:e(77389),RemoveTileAt:e(63557),RemoveTileAtWorldXY:e(94178),RenderDebug:e(15533),ReplaceByIndex:e(27987),RunCull:e(32483),SetCollision:e(57068),SetCollisionBetween:e(37266),SetCollisionByExclusion:e(75661),SetCollisionByProperty:e(64740),SetCollisionFromCollisionGroup:e(63307),SetLayerCollisionIndex:e(9589),SetTileCollision:e(20576),SetTileIndexCallback:e(79583),SetTileLocationCallback:e(93254),Shuffle:e(32903),StaggeredCullBounds:e(61325),StaggeredCullTiles:e(54503),StaggeredTileToWorldXY:e(97202),StaggeredTileToWorldY:e(28054),StaggeredWorldToTileXY:e(15108),StaggeredWorldToTileY:e(51900),SwapByIndex:e(86560),TileToWorldX:e(97281),TileToWorldXY:e(70326),TileToWorldY:e(29650),WeightedRandomize:e(77366),WorldToTileX:e(10095),WorldToTileXY:e(85896),WorldToTileY:e(63288)}}),91907:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}}),21829:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ORIENTATION:e(91907)};o.exports=a}),62501:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=e(21829),u={Components:e(81086),Parsers:e(57442),Formats:e(80341),ImageCollection:e(16536),ParseToTilemap:e(31989),Tile:e(23029),Tilemap:e(49075),TilemapCreator:e(45939),TilemapFactory:e(46029),Tileset:e(33629),TilemapLayer:e(20442),Orientation:e(91907),LayerData:e(14977),MapData:e(87010),ObjectLayer:e(48700)};u=a(!1,u,x.ORIENTATION),o.exports=u}),14977:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(91907),u=e(95540),r=new a({initialize:function(n){n===void 0&&(n={}),this.name=u(n,"name","layer"),this.id=u(n,"id",0),this.x=u(n,"x",0),this.y=u(n,"y",0),this.width=u(n,"width",0),this.height=u(n,"height",0),this.tileWidth=u(n,"tileWidth",0),this.tileHeight=u(n,"tileHeight",0),this.baseTileWidth=u(n,"baseTileWidth",this.tileWidth),this.baseTileHeight=u(n,"baseTileHeight",this.tileHeight),this.orientation=u(n,"orientation",x.ORTHOGONAL),this.widthInPixels=u(n,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=u(n,"heightInPixels",this.height*this.baseTileHeight),this.alpha=u(n,"alpha",1),this.visible=u(n,"visible",!0),this.properties=u(n,"properties",[]),this.indexes=u(n,"indexes",[]),this.collideIndexes=u(n,"collideIndexes",[]),this.callbacks=u(n,"callbacks",[]),this.bodies=u(n,"bodies",[]),this.data=u(n,"data",[]),this.tilemapLayer=u(n,"tilemapLayer",null),this.hexSideLength=u(n,"hexSideLength",0),this.staggerAxis=u(n,"staggerAxis","y"),this.staggerIndex=u(n,"staggerIndex","odd")}});o.exports=r}),87010:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(91907),u=e(95540),r=new a({initialize:function(n){n===void 0&&(n={}),this.name=u(n,"name","map"),this.width=u(n,"width",0),this.height=u(n,"height",0),this.infinite=u(n,"infinite",!1),this.tileWidth=u(n,"tileWidth",0),this.tileHeight=u(n,"tileHeight",0),this.widthInPixels=u(n,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=u(n,"heightInPixels",this.height*this.tileHeight),this.format=u(n,"format",null),this.orientation=u(n,"orientation",x.ORTHOGONAL),this.renderOrder=u(n,"renderOrder","right-down"),this.version=u(n,"version","1"),this.properties=u(n,"properties",{}),this.layers=u(n,"layers",[]),this.images=u(n,"images",[]),this.objects=u(n,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=u(n,"collision",{}),this.tilesets=u(n,"tilesets",[]),this.imageCollections=u(n,"imageCollections",[]),this.tiles=u(n,"tiles",[]),this.hexSideLength=u(n,"hexSideLength",0),this.staggerAxis=u(n,"staggerAxis","y"),this.staggerIndex=u(n,"staggerIndex","odd")}});o.exports=r}),48700:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=new a({initialize:function(h){h===void 0&&(h={}),this.name=x(h,"name","object layer"),this.id=x(h,"id",0),this.opacity=x(h,"opacity",1),this.properties=x(h,"properties",{}),this.propertyTypes=x(h,"propertytypes",{}),this.type=x(h,"type","objectgroup"),this.visible=x(h,"visible",!0),this.objects=x(h,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});o.exports=u}),6641:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),x=function(u){return u=u.toLowerCase(),u==="isometric"?a.ISOMETRIC:u==="staggered"?a.STAGGERED:u==="hexagonal"?a.HEXAGONAL:a.ORTHOGONAL};o.exports=x}),46177:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(2342),u=e(82593),r=e(46594),h=e(87021),n=function(l,c,s,d,m,p){var g;switch(c){case a.ARRAY_2D:g=x(l,s,d,m,p);break;case a.CSV:g=u(l,s,d,m,p);break;case a.TILED_JSON:g=r(l,s,p);break;case a.WELTMEISTER:g=h(l,s,p);break;default:console.warn("Unrecognized tilemap data format: "+c),g=null}return g};o.exports=n}),2342:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(14977),u=e(87010),r=e(23029),h=function(n,l,c,s,d){for(var m=new x({tileWidth:c,tileHeight:s}),p=new u({name:n,tileWidth:c,tileHeight:s,format:a.ARRAY_2D,layers:[m]}),g=[],T=l.length,S=0,w=0;w<l.length;w++){g[w]=[];for(var A=l[w],M=0;M<A.length;M++){var R=parseInt(A[M],10);isNaN(R)||R===-1?g[w][M]=d?null:new r(m,-1,M,w,c,s):g[w][M]=new r(m,R,M,w,c,s)}S===0&&(S=A.length)}return p.width=m.width=S,p.height=m.height=T,p.widthInPixels=m.widthInPixels=S*c,p.heightInPixels=m.heightInPixels=T*s,m.data=g,p};o.exports=h}),82593:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(2342),u=function(r,h,n,l,c){var s=h.trim().split(`
`).map(function(m){return m.split(",")}),d=x(r,s,n,l,c);return d.format=a.CSV,d};o.exports=u}),6656:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14977),x=e(23029),u=function(r,h){for(var n=[],l=0;l<r.layer.length;l++){for(var c=r.layer[l],s=new a({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),d=[],m=[],p=0;p<c.data.length;p++){for(var g=0;g<c.data[p].length;g++){var T=c.data[p][g]-1,S;T>-1?S=new x(s,T,g,p,c.tilesize,c.tilesize):S=h?null:new x(s,-1,g,p,c.tilesize,c.tilesize),d.push(S)}m.push(d),d=[]}s.data=m,n.push(s)}return n};o.exports=u}),96483:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),x=function(u){for(var r=[],h=[],n=0;n<u.layer.length;n++){var l=u.layer[n],c=l.tilesetName;c!==""&&h.indexOf(c)===-1&&(h.push(c),r.push(new a(c,0,l.tilesize,l.tilesize,0,0)))}return r};o.exports=x}),87021:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),x=e(87010),u=e(6656),r=e(96483),h=function(n,l,c){if(l.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+n),null;for(var s=0,d=0,m=0;m<l.layer.length;m++)l.layer[m].width>s&&(s=l.layer[m].width),l.layer[m].height>d&&(d=l.layer[m].height);var p=new x({width:s,height:d,name:n,tileWidth:l.layer[0].tilesize,tileHeight:l.layer[0].tilesize,format:a.WELTMEISTER});return p.layers=u(l,c),p.tilesets=r(l),p};o.exports=h}),52833:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ParseTileLayers:e(6656),ParseTilesets:e(96483),ParseWeltmeister:e(87021)}}),57442:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FromOrientationString:e(6641),Parse:e(46177),Parse2DArray:e(2342),ParseCSV:e(82593),Impact:e(52833),Tiled:e(96761)}}),51233:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),x=function(u){for(var r,h,n,l,c,s=0;s<u.layers.length;s++){r=u.layers[s],l=null;for(var d=0;d<r.data.length;d++){c=r.data[d];for(var m=0;m<c.length;m++)h=c[m],!(h===null||h.index<0)&&(n=u.tiles[h.index][2],l=u.tilesets[n],h.width=l.tileWidth,h.height=l.tileHeight,l.tileProperties&&l.tileProperties[h.index-l.firstgid]&&(h.properties=a(h.properties,l.tileProperties[h.index-l.firstgid])))}}};o.exports=x}),41868:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=window.atob(e),x=a.length,u=new Array(x/4),r=0;r<x;r+=4)u[r/4]=(a.charCodeAt(r)|a.charCodeAt(r+1)<<8|a.charCodeAt(r+2)<<16|a.charCodeAt(r+3)<<24)>>>0;return u};o.exports=E}),84101:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),x=function(u){var r,h,n=[];for(r=0;r<u.imageCollections.length;r++)for(var l=u.imageCollections[r],c=l.images,s=0;s<c.length;s++){var d=c[s],m={x:0,y:d.height-u.tileHeight};h=new a(d.image,d.gid,d.width,d.height,0,0,void 0,void 0,m),h.updateTileData(d.width,d.height),u.tilesets.push(h)}for(r=0;r<u.tilesets.length;r++){h=u.tilesets[r];for(var p=h.tileMargin,g=h.tileMargin,T=0,S=0,w=0,A=h.firstgid;A<h.firstgid+h.total&&(n[A]=[p,g,r],p+=h.tileWidth+h.tileSpacing,T++,!(T===h.total||(S++,S===h.columns&&(p=h.tileMargin,g+=h.tileHeight+h.tileSpacing,S=0,w++,w===h.rows))));A++);}return n};o.exports=x}),79677:((o,E,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=function(u,r,h){if(!r)return{i:0,layers:u.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=r.x+a(r,"startx",0)*u.tilewidth+a(r,"offsetx",0),l=r.y+a(r,"starty",0)*u.tileheight+a(r,"offsety",0);return{i:0,layers:r.layers,name:h.name+r.name+"/",opacity:h.opacity*r.opacity,visible:h.visible&&r.visible,x:h.x+n,y:h.y+l}};o.exports=x}),29920:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=2147483648,e=1073741824,a=536870912,x=function(u){var r=!!(u&E),h=!!(u&e),n=!!(u&a);u=u&536870911;var l=0,c=!1;return r&&h&&n?(l=Math.PI/2,c=!0):r&&h&&!n?(l=Math.PI,c=!1):r&&!h&&n?(l=Math.PI/2,c=!1):r&&!h&&!n?(l=0,c=!0):!r&&h&&n?(l=3*Math.PI/2,c=!1):!r&&h&&!n?(l=Math.PI,c=!0):!r&&!h&&n?(l=3*Math.PI/2,c=!0):!r&&!h&&!n&&(l=0,c=!1),{gid:u,flippedHorizontal:r,flippedVertical:h,flippedAntiDiagonal:n,rotation:l,flipped:c}};o.exports=x}),12635:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=e(79677),u=function(r){for(var h=[],n=[],l=x(r);l.i<l.layers.length||n.length>0;){if(l.i>=l.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=n.pop();continue}var c=l.layers[l.i];if(l.i++,c.type!=="imagelayer"){if(c.type==="group"){var s=x(r,c,l);n.push(l),l=s}continue}var d=a(c,"offsetx",0)+a(c,"startx",0),m=a(c,"offsety",0)+a(c,"starty",0);h.push({name:l.name+c.name,image:c.image,x:l.x+d+c.x,y:l.y+m+c.y,alpha:l.opacity*c.opacity,visible:l.visible&&c.visible,properties:a(c,"properties",{})})}return h};o.exports=u}),46594:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(51233),x=e(84101),u=e(91907),r=e(62644),h=e(80341),n=e(6641),l=e(87010),c=e(12635),s=e(22611),d=e(28200),m=e(24619),p=function(g,T,S){var w=r(T),A=new l({width:w.width,height:w.height,name:g,tileWidth:w.tilewidth,tileHeight:w.tileheight,orientation:n(w.orientation),format:h.TILED_JSON,version:w.version,properties:w.properties,renderOrder:w.renderorder,infinite:w.infinite});if(A.orientation===u.HEXAGONAL)if(A.hexSideLength=w.hexsidelength,A.staggerAxis=w.staggeraxis,A.staggerIndex=w.staggerindex,A.staggerAxis==="y"){var M=(A.tileHeight-A.hexSideLength)/2;A.widthInPixels=A.tileWidth*(A.width+.5),A.heightInPixels=A.height*(A.hexSideLength+M)+M}else{var R=(A.tileWidth-A.hexSideLength)/2;A.widthInPixels=A.width*(A.hexSideLength+R)+R,A.heightInPixels=A.tileHeight*(A.height+.5)}A.layers=d(w,S),A.images=c(w);var P=m(w);return A.tilesets=P.tilesets,A.imageCollections=P.imageCollections,A.objects=s(w),A.tiles=x(A),a(A),A};o.exports=p}),52205:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18254),x=e(29920),u=function(n){return{x:n.x,y:n.y}},r=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(n,l,c){l===void 0&&(l=0),c===void 0&&(c=0);var s=a(n,r);if(s.x+=l,s.y+=c,n.gid){var d=x(n.gid);s.gid=d.gid,s.flippedHorizontal=d.flippedHorizontal,s.flippedVertical=d.flippedVertical,s.flippedAntiDiagonal=d.flippedAntiDiagonal}else n.polyline?s.polyline=n.polyline.map(u):n.polygon?s.polygon=n.polygon.map(u):n.ellipse?s.ellipse=n.ellipse:n.text?s.text=n.text:n.point?s.point=!0:s.rectangle=!0;return s};o.exports=h}),22611:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),x=e(52205),u=e(48700),r=e(79677),h=function(n){for(var l=[],c=[],s=r(n);s.i<s.layers.length||c.length>0;){if(s.i>=s.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=c.pop();continue}var d=s.layers[s.i];if(s.i++,d.opacity*=s.opacity,d.visible=s.visible&&d.visible,d.type!=="objectgroup"){if(d.type==="group"){var m=r(n,d,s);c.push(s),s=m}continue}d.name=s.name+d.name;for(var p=s.x+a(d,"startx",0)+a(d,"offsetx",0),g=s.y+a(d,"starty",0)+a(d,"offsety",0),T=[],S=0;S<d.objects.length;S++){var w=x(d.objects[S],p,g);T.push(w)}var A=new u(d);A.objects=T,l.push(A)}return l};o.exports=h}),28200:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41868),x=e(91907),u=e(79677),r=e(6641),h=e(95540),n=e(14977),l=e(29920),c=e(23029),s=function(d,m){for(var p=h(d,"infinite",!1),g=[],T=[],S=u(d);S.i<S.layers.length||T.length>0;){if(S.i>=S.layers.length){if(T.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}S=T.pop();continue}var w=S.layers[S.i];if(S.i++,w.type!=="tilelayer"){if(w.type==="group"){var A=u(d,w,S);T.push(S),S=A}continue}if(w.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+w.name+"'");continue}else if(w.encoding&&w.encoding==="base64"){if(w.chunks)for(var M=0;M<w.chunks.length;M++)w.chunks[M].data=a(w.chunks[M].data);w.data&&(w.data=a(w.data)),delete w.encoding}var R,P,b,F,I,L,D=[],O=0;if(p){var z=h(w,"startx",0)+w.x,W=h(w,"starty",0)+w.y;R=new n({name:S.name+w.name,id:w.id,x:S.x+h(w,"offsetx",0)+z*d.tilewidth,y:S.y+h(w,"offsety",0)+W*d.tileheight,width:w.width,height:w.height,tileWidth:d.tilewidth,tileHeight:d.tileheight,alpha:S.opacity*w.opacity,visible:S.visible&&w.visible,properties:h(w,"properties",[]),orientation:r(d.orientation)}),R.orientation===x.HEXAGONAL&&(R.hexSideLength=d.hexsidelength,R.staggerAxis=d.staggeraxis,R.staggerIndex=d.staggerindex,R.staggerAxis==="y"?(I=(R.tileHeight-R.hexSideLength)/2,R.widthInPixels=R.tileWidth*(R.width+.5),R.heightInPixels=R.height*(R.hexSideLength+I)+I):(L=(R.tileWidth-R.hexSideLength)/2,R.widthInPixels=R.width*(R.hexSideLength+L)+L,R.heightInPixels=R.tileHeight*(R.height+.5)));for(var X=0;X<w.height;X++){D[X]=[null];for(var _=0;_<w.width;_++)D[X][_]=null}for(X=0,at=w.chunks.length;X<at;X++)for(var U=w.chunks[X],G=U.x-z,N=U.y-W,H=0,V=0,$=U.data.length;V<$;V++){var j=O+G,k=H+N;P=l(U.data[V]),P.gid>0?(b=new c(R,P.gid,j,k,d.tilewidth,d.tileheight),b.rotation=P.rotation,b.flipX=P.flipped,D[k][j]=b):(F=m?null:new c(R,-1,j,k,d.tilewidth,d.tileheight),D[k][j]=F),O++,O===U.width&&(H++,O=0)}}else{R=new n({name:S.name+w.name,id:w.id,x:S.x+h(w,"offsetx",0)+w.x,y:S.y+h(w,"offsety",0)+w.y,width:w.width,height:w.height,tileWidth:d.tilewidth,tileHeight:d.tileheight,alpha:S.opacity*w.opacity,visible:S.visible&&w.visible,properties:h(w,"properties",[]),orientation:r(d.orientation)}),R.orientation===x.HEXAGONAL&&(R.hexSideLength=d.hexsidelength,R.staggerAxis=d.staggeraxis,R.staggerIndex=d.staggerindex,R.staggerAxis==="y"?(I=(R.tileHeight-R.hexSideLength)/2,R.widthInPixels=R.tileWidth*(R.width+.5),R.heightInPixels=R.height*(R.hexSideLength+I)+I):(L=(R.tileWidth-R.hexSideLength)/2,R.widthInPixels=R.width*(R.hexSideLength+L)+L,R.heightInPixels=R.tileHeight*(R.height+.5)));for(var Q=[],et=0,at=w.data.length;et<at;et++)P=l(w.data[et]),P.gid>0?(b=new c(R,P.gid,O,D.length,d.tilewidth,d.tileheight),b.rotation=P.rotation,b.flipX=P.flipped,Q.push(b)):(F=m?null:new c(R,-1,O,D.length,d.tilewidth,d.tileheight),Q.push(F)),O++,O===w.width&&(D.push(Q),O=0,Q=[])}R.data=D,g.push(R)}return g};o.exports=s}),24619:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),x=e(16536),u=e(52205),r=e(57880),h=function(n){for(var l=[],c=[],s=null,d,m=0;m<n.tilesets.length;m++){var p=n.tilesets[m];if(p.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(p.image){var g=new a(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing,void 0,void 0,p.tileoffset);if(n.version>1){var T=void 0,S=void 0;if(Array.isArray(p.tiles)){T=T||{},S=S||{};for(var w=0;w<p.tiles.length;w++){var A=p.tiles[w];if(A.properties){var M={};A.properties.forEach(function(X){M[X.name]=X.value}),S[A.id]=M}if(A.objectgroup&&((T[A.id]||(T[A.id]={})).objectgroup=A.objectgroup,A.objectgroup.objects)){var R=A.objectgroup.objects.map(function(X){return u(X)});T[A.id].objectgroup.objects=R}A.animation&&((T[A.id]||(T[A.id]={})).animation=A.animation),A.type&&((T[A.id]||(T[A.id]={})).type=A.type)}}Array.isArray(p.wangsets)&&(T=T||{},S=S||{},r(p.wangsets,T)),T&&(g.tileData=T,g.tileProperties=S)}else if(p.tileproperties&&(g.tileProperties=p.tileproperties),p.tiles){g.tileData=p.tiles;for(d in g.tileData){var P=g.tileData[d].objectgroup;if(P&&P.objects){var b=P.objects.map(function(X){return u(X)});g.tileData[d].objectgroup.objects=b}}}g.updateTileData(p.imagewidth,p.imageheight),l.push(g)}else{var F=new x(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing,p.properties),I=0;for(w=0;w<p.tiles.length;w++){A=p.tiles[w];var L=A.image,D=parseInt(A.id,10),O=p.firstgid+D,z=A.imagewidth,W=A.imageheight;F.addImage(O,L,z,W),I=Math.max(D,I)}F.maxId=I,c.push(F)}s&&(s.lastgid=p.firstgid-1),s=p}return{tilesets:l,imageCollections:c}};o.exports=h}),57880:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){for(var x=0;x<e.length;x++){var u=e[x],r=x;if(u.name&&u.name!==""&&(r=u.name),Array.isArray(u.wangtiles)&&u.wangtiles.length>0){var h={},n={},l,c,s;if(Array.isArray(u.edgecolors))for(l=0;l<u.edgecolors.length;l++)s=1+l,c=u.edgecolors[l],c.name!==""&&(h[s]=c.name);if(Array.isArray(u.cornercolors))for(l=0;l<u.cornercolors.length;l++)s=1+l,c=u.cornercolors[l],c.name!==""&&(n[s]=c.name);if(Array.isArray(u.colors))for(l=0;l<u.colors.length;l++)c=u.colors[l],s=1+l,c.name!==""&&(h[s]=n[s]=c.name);for(var d=[h,n,h,n,h,n,h,n],m=0;m<u.wangtiles.length;m++){var p=u.wangtiles[m],g=a[p.tileid]||(a[p.tileid]={});g=g.wangid||(g.wangid={});for(var T=[],S=0;S<Math.min(d.length,p.wangid.length);S++){if(c=p.wangid[S],c===0){T.push(void 0);continue}var w=d[S][c];if(w!==void 0){T.push(w);continue}T.push(c)}g[r]=T}}}};o.exports=E}),96761:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AssignTileProperties:e(51233),Base64Decode:e(41868),BuildTilesetIndex:e(84101),CreateGroupLayer:e(79677),ParseGID:e(29920),ParseImageLayers:e(12635),ParseJSONTiled:e(46594),ParseObject:e(52205),ParseObjectLayers:e(22611),ParseTileLayers:e(28200),ParseTilesets:e(24619)}}),33385:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(37277),u=e(44594),r=e(94880),h=e(72905),n=new a({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(u.BOOT,this.boot,this),c.sys.events.on(u.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var l=this.systems.events;l.on(u.PRE_UPDATE,this.preUpdate,this),l.on(u.UPDATE,this.update,this),l.once(u.SHUTDOWN,this.shutdown,this)},addEvent:function(l){var c;if(l instanceof r){if(c=l,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat,c.delay<=0&&c.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else c=new r(l);return this._pendingInsertion.push(c),c},delayedCall:function(l,c,s,d){return this.addEvent({delay:l,callback:c,args:s,callbackScope:d})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(l){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var s=l[c];h(this._pendingRemoval,s),h(this._pendingInsertion,s),h(this._active,s)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var l=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(l===0&&c===0)){var s,d;for(s=0;s<l;s++){d=this._pendingRemoval[s];var m=this._active.indexOf(d);m>-1&&this._active.splice(m,1),d.destroy()}for(s=0;s<c;s++)d=this._pendingInsertion[s],this._active.push(d);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(l,c){if(this.now=l,!this.paused){c*=this.timeScale;for(var s=0;s<this._active.length;s++){var d=this._active[s];if(!d.paused&&(d.elapsed+=c*d.timeScale,d.elapsed>=d.delay)){var m=d.elapsed-d.delay;if(d.elapsed=d.delay,!d.hasDispatched&&d.callback&&(d.hasDispatched=!0,d.callback.apply(d.callbackScope,d.args)),d.repeatCount>0){if(d.repeatCount--,m>=d.delay)for(;m>=d.delay&&d.repeatCount>0;)d.callback&&d.callback.apply(d.callbackScope,d.args),m-=d.delay,d.repeatCount--;d.elapsed=m,d.hasDispatched=!1}else d.hasDispatched&&this._pendingRemoval.push(d)}}}},shutdown:function(){var l;for(l=0;l<this._pendingInsertion.length;l++)this._pendingInsertion[l].destroy();for(l=0;l<this._active.length;l++)this._active[l].destroy();for(l=0;l<this._pendingRemoval.length;l++)this._pendingRemoval[l].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(u.PRE_UPDATE,this.preUpdate,this),c.off(u.UPDATE,this.update,this),c.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});x.register("Clock",n,"time"),o.exports=n}),96120:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),u=e(39429),r=e(95540),h=e(44594),n=e(89809),l=new a({Extends:x,initialize:function(s,d){x.call(this),this.scene=s,this.systems=s.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var m=this.systems.events;m.on(h.PRE_UPDATE,this.preUpdate,this),m.on(h.UPDATE,this.update,this),m.once(h.SHUTDOWN,this.destroy,this),d&&this.add(d)},preUpdate:function(c,s){this.paused||(this.elapsed+=s*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var c,s=this.events,d=!1,m=this.systems,p;for(c=0;c<s.length;c++){var g=s[c];if(!g.complete&&g.time<=this.elapsed){if(g.complete=!0,this.totalComplete++,p=g.target?g.target:this,g.if&&!g.if.call(p,g))continue;if(g.once&&(d=!0),g.set&&g.target)for(var T in g.set)g.target[T]=g.set[T];this.iteration&&g.repeat++,g.loop&&g.repeat&&g.loop.call(p),g.tween&&(g.tweenInstance=m.tweens.add(g.tween)),g.sound&&(typeof g.sound=="string"?m.sound.play(g.sound):m.sound.play(g.sound.key,g.sound.config)),g.event&&this.emit(g.event,p),g.run&&g.run.call(p),g.stop&&this.stop()}}if(d)for(c=0;c<s.length;c++)s[c].complete&&s[c].once&&(s.splice(c,1),c--);this.totalComplete>=s.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(n.COMPLETE,this)}},play:function(c){return c===void 0&&(c=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,c&&this.reset(),this},pause:function(){this.paused=!0;for(var c=this.events,s=0;s<c.length;s++){var d=c[s];d.tweenInstance&&(d.tweenInstance.paused=!0)}return this},repeat:function(c){return(c===void 0||c===!0)&&(c=-1),c===!1&&(c=0),this.loop=c,this},resume:function(){this.paused=!1;for(var c=this.events,s=0;s<c.length;s++){var d=c[s];d.tweenInstance&&(d.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(c){c===void 0&&(c=!1),this.elapsed=0,c||(this.iteration=0);for(var s=this.events,d=0;d<s.length;d++){var m=s[d];m.complete=!1,c||(m.repeat=0),m.tweenInstance&&m.tweenInstance.stop()}return this.play(!1)},add:function(c){Array.isArray(c)||(c=[c]);var s=this.events,d=0;s.length>0&&(d=s[s.length-1].time);for(var m=0;m<c.length;m++){var p=c[m],g=r(p,"at",0),T=r(p,"in",null);T!==null&&(g=this.elapsed+T);var S=r(p,"from",null);S!==null&&(g=d+S),s.push({complete:!1,time:g,repeat:0,if:r(p,"if",null),run:r(p,"run",null),loop:r(p,"loop",null),event:r(p,"event",null),target:r(p,"target",null),set:r(p,"set",null),tween:r(p,"tween",null),sound:r(p,"sound",null),once:r(p,"once",!1),stop:r(p,"stop",!1)}),d=g}return this.complete=!1,this},clear:function(){for(var c=this.events,s=0;s<c.length;s++){var d=c[s];d.tweenInstance&&d.tweenInstance.stop()}return c=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var c=Math.min(this.totalComplete,this.events.length);return c/this.events.length},destroy:function(){var c=this.systems.events;c.off(h.PRE_UPDATE,this.preUpdate,this),c.off(h.UPDATE,this.update,this),c.off(h.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});u.register("timeline",function(c){return new l(this.scene,c)}),o.exports=l}),94880:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(95540),u=new a({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(r){if(this.delay=x(r,"delay",0),this.repeat=x(r,"repeat",0),this.loop=x(r,"loop",!1),this.callback=x(r,"callback",void 0),this.callbackScope=x(r,"callbackScope",this),this.args=x(r,"args",[]),this.timeScale=x(r,"timeScale",1),this.startAt=x(r,"startAt",0),this.paused=x(r,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var r=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/r}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(r){r===void 0&&(r=!1),this.elapsed=this.delay,this.hasDispatched=!r,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});o.exports=u}),35945:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"}),89809:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:e(35945)}}),90291:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clock:e(33385),Events:e(89809),Timeline:e(96120),TimerEvent:e(94880)}}),40382:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),x=e(83419),u=e(43491),r=e(88032),h=e(37277),n=e(44594),l=e(93109),c=e(86081),s=e(8357),d=e(43960),m=e(26012),p=new x({initialize:function(T){this.scene=T,this.events=T.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(n.UPDATE,this.update,this),this.events.once(n.SHUTDOWN,this.shutdown,this)},create:function(g){Array.isArray(g)||(g=[g]);for(var T=[],S=0;S<g.length;S++){var w=g[S];w instanceof c||w instanceof d?T.push(w):Array.isArray(w.tweens)?T.push(m(this,w)):T.push(s(this,w))}return T.length===1?T[0]:T},add:function(g){var T=g,S=this.tweens;return T instanceof c||T instanceof d||(Array.isArray(T.tweens)?T=m(this,T):T=s(this,T)),S.push(T.reset()),T},addMultiple:function(g){for(var T,S=[],w=this.tweens,A=0;A<g.length;A++)T=g[A],T instanceof c||T instanceof d||(Array.isArray(T.tweens)?T=m(this,T):T=s(this,T)),w.push(T.reset()),S.push(T);return S},chain:function(g){var T=m(this,g);return this.tweens.push(T.init()),T},getChainedTweens:function(g){return g.getChainedTweens()},has:function(g){return this.tweens.indexOf(g)>-1},existing:function(g){return this.has(g)||this.tweens.push(g.reset()),this},addCounter:function(g){var T=r(this,g);return this.tweens.push(T.reset()),T},stagger:function(g,T){return l(g,T)},setLagSmooth:function(g,T){return g===void 0&&(g=1/1e-8),T===void 0&&(T=0),this.maxLag=g,this.lagSkip=Math.min(T,this.maxLag),this},setFps:function(g){return g===void 0&&(g=240),this.gap=1e3/g,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(g){var T=Date.now()-this.prevTime;T>this.maxLag&&(this.startTime+=T-this.lagSkip),this.prevTime+=T;var S=this.prevTime-this.startTime,w=S-this.nextTime,A=S-this.time*1e3;return w>0||g?(S/=1e3,this.time=S,this.nextTime+=w+(w>=this.gap?4:this.gap-w)):A=0,A},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(g){g===void 0&&(g=!1);var T=this.getDelta(g);if(!(T<=0)){this.processing=!0;var S,w,A=[],M=this.tweens;for(S=0;S<M.length;S++)w=M[S],w.update(T)&&A.push(w);var R=A.length;if(R&&M.length>0){for(S=0;S<R;S++){w=A[S];var P=M.indexOf(w);P>-1&&(w.isPendingRemove()||w.isDestroyed())&&(M.splice(P,1),w.destroy())}A.length=0}this.processing=!1}},remove:function(g){return this.processing?g.setPendingRemoveState():(a(this.tweens,g),g.setRemovedState()),this},reset:function(g){return this.existing(g),g.seek(),g.setActiveState(),this},makeActive:function(g){return this.existing(g),g.setActiveState(),this},each:function(g,T){var S,w=[null];for(S=1;S<arguments.length;S++)w.push(arguments[S]);return this.tweens.forEach(function(A){w[0]=A,g.apply(T,w)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(g){var T=[],S=this.tweens;Array.isArray(g)?g=u(g):g=[g];for(var w=g.length,A=0;A<S.length;A++)for(var M=S[A],R=0;R<w;R++)!M.isDestroyed()&&M.hasTarget(g[R])&&T.push(M);return T},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(g){return this.timeScale=g,this},isTweening:function(g){for(var T=this.tweens,S,w=0;w<T.length;w++)if(S=T[w],S.isPlaying()&&S.hasTarget(g))return!0;return!1},killAll:function(){for(var g=this.processing?this.getTweens():this.tweens,T=0;T<g.length;T++)g[T].destroy();return this.processing||(g.length=0),this},killTweensOf:function(g){for(var T=this.getTweensOf(g),S=0;S<T.length;S++)T[S].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(n.UPDATE,this.update,this),this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.events=null}});h.register("TweenManager",p,"tweens"),o.exports=p}),57355:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){return e&&e.hasOwnProperty(a)?e[a]:x};o.exports=E}),6113:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62640),x=e(35355),u=function(r,h){var n=a.Power0;if(typeof r=="string")if(a.hasOwnProperty(r))n=a[r];else{var l="";if(r.indexOf(".")){l=r.substring(r.indexOf(".")+1);var c=l.toLowerCase();c==="in"?l="easeIn":c==="out"?l="easeOut":c==="inout"&&(l="easeInOut")}r=x(r.substring(0,r.indexOf(".")+1)+l),a.hasOwnProperty(r)&&(n=a[r])}else typeof r=="function"&&(n=r);if(!h)return n;var s=h.slice(0);return s.unshift(0),function(d){return s[0]=d,n.apply(this,s)}};o.exports=u}),91389:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89318),x=e(77259),u=e(28392),r={bezier:a,catmull:x,catmullrom:x,linear:u},h=function(n){if(n===null)return null;var l=r.linear;return typeof n=="string"?r.hasOwnProperty(n)&&(l=r[n]):typeof n=="function"&&(l=n),l};o.exports=h}),55292:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u;if(e.hasOwnProperty(a)){var r=typeof e[a];r==="function"?u=function(h,n,l,c,s,d){return e[a](h,n,l,c,s,d)}:u=function(){return e[a]}}else typeof x=="function"?u=x:u=function(){return x};return u};o.exports=E}),82985:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81076),x=function(u){var r,h=[];if(u.hasOwnProperty("props"))for(r in u.props)r.substring(0,1)!=="_"&&h.push({key:r,value:u.props[r]});else for(r in u)a.indexOf(r)===-1&&r.substring(0,1)!=="_"&&h.push({key:r,value:u[r]});return h};o.exports=x}),62329:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x=function(u){var r=a(u,"targets",null);return r===null||(typeof r=="function"&&(r=r.call()),Array.isArray(r)||(r=[r])),r};o.exports=x}),17777:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),x=e(99472);function u(c){return!!c.getActive&&typeof c.getActive=="function"}function r(c){return!!c.getStart&&typeof c.getStart=="function"}function h(c){return!!c.getEnd&&typeof c.getEnd=="function"}function n(c){return r(c)||h(c)||u(c)}var l=function(c,s){var d,m=function(X,_,U){return U},p=function(X,_,U){return U},g=null,T=typeof s;if(T==="number")m=function(){return s};else if(Array.isArray(s))p=function(){return s[0]},m=function(){return s[s.length-1]};else if(T==="string"){var S=s.toLowerCase(),w=S.substring(0,6)==="random",A=S.substring(0,3)==="int";if(w||A){var M=S.indexOf("("),R=S.indexOf(")"),P=S.indexOf(",");if(M&&R&&P){var b=parseFloat(S.substring(M+1,P)),F=parseFloat(S.substring(P+1,R));w?m=function(){return x(b,F)}:m=function(){return a(b,F)}}else throw new Error("invalid random() format")}else{S=S[0];var I=parseFloat(s.substr(2));switch(S){case"+":m=function(X,_,U){return U+I};break;case"-":m=function(X,_,U){return U-I};break;case"*":m=function(X,_,U){return U*I};break;case"/":m=function(X,_,U){return U/I};break;default:m=function(){return parseFloat(s)}}}}else if(T==="function")m=s;else if(T==="object")if(n(s))u(s)&&(g=s.getActive),h(s)&&(m=s.getEnd),r(s)&&(p=s.getStart);else if(s.hasOwnProperty("value"))d=l(c,s.value);else{var L=s.hasOwnProperty("to"),D=s.hasOwnProperty("from"),O=s.hasOwnProperty("start");if(L&&(D||O)){if(d=l(c,s.to),O){var z=l(c,s.start);d.getActive=z.getEnd}if(D){var W=l(c,s.from);d.getStart=W.getEnd}}}return d||(d={getActive:g,getEnd:m,getStart:p}),d};o.exports=l}),88032:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),x=e(69902),u=e(23568),r=e(57355),h=e(6113),n=e(95540),l=e(55292),c=e(35154),s=e(17777),d=e(269),m=e(86081),p=function(g,T,S){if(T instanceof m)return T.parent=g,T;S===void 0?S=x:S=d(x,S);var w=n(T,"from",0),A=n(T,"to",1),M=[{value:w}],R=n(T,"delay",S.delay),P=n(T,"easeParams",S.easeParams),b=n(T,"ease",S.ease),F=s("value",A),I=new m(g,M),L=I.add(0,"value",F.getEnd,F.getStart,F.getActive,h(n(T,"ease",b),n(T,"easeParams",P)),l(T,"delay",R),n(T,"duration",S.duration),r(T,"yoyo",S.yoyo),n(T,"hold",S.hold),n(T,"repeat",S.repeat),n(T,"repeatDelay",S.repeatDelay),!1,!1);L.start=w,L.current=w,I.completeDelay=u(T,"completeDelay",0),I.loop=Math.round(u(T,"loop",0)),I.loopDelay=Math.round(u(T,"loopDelay",0)),I.paused=r(T,"paused",!1),I.persist=r(T,"persist",!1),I.isNumberTween=!0,I.callbackScope=c(T,"callbackScope",I);for(var D=a.TYPES,O=0;O<D.length;O++){var z=D[O],W=c(T,z,!1);if(W){var X=c(T,z+"Params",[]);I.setCallback(z,W,X)}}return I};o.exports=p}),93109:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6113),x=e(35154),u=e(36383),r=function(h,n){n===void 0&&(n={});var l,c=x(n,"start",0),s=x(n,"ease",null),d=x(n,"grid",null),m=x(n,"from",0),p=m==="first",g=m==="center",T=m==="last",S=typeof m=="number",w=Array.isArray(h),A=parseFloat(w?h[0]:h),M=w?parseFloat(h[1]):0,R=Math.max(A,M);if(w&&(c+=A),d){var P=d[0],b=d[1],F=0,I=0,L=0,D=0,O=[];T?(F=P-1,I=b-1):S?(F=m%P,I=Math.floor(m/P)):g&&(F=(P-1)/2,I=(b-1)/2);for(var z=u.MIN_SAFE_INTEGER,W=0;W<b;W++){O[W]=[];for(var X=0;X<P;X++){L=F-X,D=I-W;var _=Math.sqrt(L*L+D*D);_>z&&(z=_),O[W][X]=_}}}var U=s?a(s):null;return d?l=function(G,N,H,V){var $=0,j=V%P,k=Math.floor(V/P);j>=0&&j<P&&k>=0&&k<b&&($=O[k][j]);var Q;if(w){var et=M-A;U?Q=$/z*et*U($/z):Q=$/z*et}else U?Q=$*A*U($/z):Q=$*A;return Q+c}:l=function(G,N,H,V,$){$--;var j;p?j=V:g?j=Math.abs($/2-V):T?j=$-V:S&&(j=Math.abs(m-V));var k;if(w){var Q;g?Q=(M-A)/$*(j*2):Q=(M-A)/$*j,U?k=Q*U(j/$):k=Q}else U?k=$*R*U(j/$):k=j*A;return k+c},l};o.exports=r}),8357:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),x=e(69902),u=e(23568),r=e(57355),h=e(6113),n=e(95540),l=e(91389),c=e(55292),s=e(82985),d=e(62329),m=e(35154),p=e(17777),g=e(269),T=e(86081),S=function(w,A,M){if(A instanceof T)return A.parent=w,A;M===void 0?M=x:M=g(x,M);var R=d(A);!R&&M.targets&&(R=M.targets);for(var P=s(A),b=n(A,"delay",M.delay),F=n(A,"duration",M.duration),I=n(A,"easeParams",M.easeParams),L=n(A,"ease",M.ease),D=n(A,"hold",M.hold),O=n(A,"repeat",M.repeat),z=n(A,"repeatDelay",M.repeatDelay),W=r(A,"yoyo",M.yoyo),X=r(A,"flipX",M.flipX),_=r(A,"flipY",M.flipY),U=n(A,"interpolation",M.interpolation),G=function(ft,vt,Tt,ct){if(Tt==="texture"){var Nt=ct,yt=void 0;Array.isArray(ct)?(Nt=ct[0],yt=ct[1]):ct.hasOwnProperty("value")?(Nt=ct.value,Array.isArray(ct.value)?(Nt=ct.value[0],yt=ct.value[1]):typeof ct.value=="string"&&(Nt=ct.value)):typeof ct=="string"&&(Nt=ct),ft.addFrame(vt,Nt,yt,c(ct,"delay",b),n(ct,"duration",F),n(ct,"hold",D),n(ct,"repeat",O),n(ct,"repeatDelay",z),r(ct,"flipX",X),r(ct,"flipY",_))}else{var it=p(Tt,ct),Z=l(n(ct,"interpolation",U));ft.add(vt,Tt,it.getEnd,it.getStart,it.getActive,h(n(ct,"ease",L),n(ct,"easeParams",I)),c(ct,"delay",b),n(ct,"duration",F),r(ct,"yoyo",W),n(ct,"hold",D),n(ct,"repeat",O),n(ct,"repeatDelay",z),r(ct,"flipX",X),r(ct,"flipY",_),Z,Z?ct:null)}},N=new T(w,R),H=0;H<P.length;H++)for(var V=P[H].key,$=P[H].value,j=0;j<R.length;j++)V==="scale"&&!R[j].hasOwnProperty("scale")?(G(N,j,"scaleX",$),G(N,j,"scaleY",$)):G(N,j,V,$);N.completeDelay=u(A,"completeDelay",0),N.loop=Math.round(u(A,"loop",0)),N.loopDelay=Math.round(u(A,"loopDelay",0)),N.paused=r(A,"paused",!1),N.persist=r(A,"persist",!1),N.callbackScope=n(A,"callbackScope",N);for(var k=a.TYPES,Q=0;Q<k.length;Q++){var et=k[Q],at=m(A,et,!1);if(at){var q=m(A,et+"Params",[]);N.setCallback(et,at,q)}}return N};o.exports=S}),26012:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),x=e(23568),u=e(57355),r=e(62329),h=e(35154),n=e(8357),l=e(43960),c=function(s,d){if(d instanceof l)return d.parent=s,d;var m=new l(s);m.startDelay=h(d,"delay",0),m.completeDelay=x(d,"completeDelay",0),m.loop=Math.round(x(d,"loop",h(d,"repeat",0))),m.loopDelay=Math.round(x(d,"loopDelay",h(d,"repeatDelay",0))),m.paused=u(d,"paused",!1),m.persist=u(d,"persist",!1),m.callbackScope=h(d,"callbackScope",m);var p,g=a.TYPES;for(p=0;p<g.length;p++){var T=g[p],S=h(d,T,!1);if(S){var w=h(d,T+"Params",[]);m.setCallback(T,S,w)}}var A=h(d,"tweens",null);if(Array.isArray(A)){var M=[],R=r(d),P=void 0;for(R&&(P={targets:R}),p=0;p<A.length;p++)M.push(n(m,A[p],P));m.add(M)}return m};o.exports=c}),30231:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetBoolean:e(57355),GetEaseFunction:e(6113),GetInterpolationFunction:e(91389),GetNewValue:e(55292),GetProps:e(82985),GetTargets:e(62329),GetValueOp:e(17777),NumberTweenBuilder:e(88032),StaggerBuilder:e(93109),TweenBuilder:e(8357)}}),73685:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="active"}),98540:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"}),67233:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"}),2859:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"}),98336:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="repeat"}),25764:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"}),32193:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"}),84371:(o=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"}),70766:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"}),55659:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="yoyo"}),842:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TWEEN_ACTIVE:e(73685),TWEEN_COMPLETE:e(98540),TWEEN_LOOP:e(67233),TWEEN_PAUSE:e(2859),TWEEN_RESUME:e(25764),TWEEN_REPEAT:e(98336),TWEEN_START:e(32193),TWEEN_STOP:e(84371),TWEEN_UPDATE:e(70766),TWEEN_YOYO:e(55659)}}),43066:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={States:e(86353),Builders:e(30231),Events:e(842),TweenManager:e(40382),Tween:e(86081),TweenData:e(48177),TweenFrameData:e(42220),BaseTween:e(70402),TweenChain:e(43960)};o.exports=a}),70402:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(50792),u=e(842),r=e(86353),h=new a({Extends:x,initialize:function(l){x.call(this),this.parent=l,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=r.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(u.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(u.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(u.TWEEN_COMPLETE,"onComplete")},complete:function(n){return n===void 0&&(n=0),n?(this.setCompleteDelayState(),this.countdown=n):this.onCompleteHandler(),this},completeAfterLoop:function(n){return n===void 0&&(n=0),this.loopCounter>n&&(this.loopCounter=n),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(u.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(n){this.countdown-=n,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(n){return this.countdown-=n,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(u.TWEEN_START,"onStart"),n=0),n},updateCompleteDelay:function(n){this.countdown-=n,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(n,l,c){return c===void 0&&(c=[]),this.callbacks.hasOwnProperty(n)&&(this.callbacks[n]={func:l,params:c}),this},setPendingState:function(){this.state=r.PENDING},setActiveState:function(){this.state=r.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=r.LOOP_DELAY},setCompleteDelayState:function(){this.state=r.COMPLETE_DELAY},setStartDelayState:function(){this.state=r.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=r.PENDING_REMOVE},setRemovedState:function(){this.state=r.REMOVED},setFinishedState:function(){this.state=r.FINISHED},setDestroyedState:function(){this.state=r.DESTROYED},isPending:function(){return this.state===r.PENDING},isActive:function(){return this.state===r.ACTIVE},isLoopDelayed:function(){return this.state===r.LOOP_DELAY},isCompleteDelayed:function(){return this.state===r.COMPLETE_DELAY},isStartDelayed:function(){return this.state===r.START_DELAY},isPendingRemove:function(){return this.state===r.PENDING_REMOVE},isRemoved:function(){return this.state===r.REMOVED},isFinished:function(){return this.state===r.FINISHED},isDestroyed:function(){return this.state===r.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(n){n.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});h.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],o.exports=h}),95042:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),x=e(842),u=e(86353),r=new a({initialize:function(n,l,c,s,d,m,p,g,T,S){this.tween=n,this.targetIndex=l,this.duration=s<=0?.01:s,this.totalDuration=0,this.delay=0,this.getDelay=c,this.yoyo=d,this.hold=m,this.repeat=p,this.repeatDelay=g,this.repeatCounter=0,this.flipX=T,this.flipY=S,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(h){h===void 0&&(h=this.current),this.tween.targets[this.targetIndex][this.key]=h},setCreatedState:function(){this.state=u.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=u.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=u.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=u.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=u.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=u.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=u.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=u.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===u.CREATED},isDelayed:function(){return this.state===u.DELAY},isPendingRender:function(){return this.state===u.PENDING_RENDER},isPlayingForward:function(){return this.state===u.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===u.PLAYING_BACKWARD},isHolding:function(){return this.state===u.HOLD_DELAY},isRepeating:function(){return this.state===u.REPEAT_DELAY},isComplete:function(){return this.state===u.COMPLETE},setStateFromEnd:function(h){this.yoyo?this.onRepeat(h,!0,!0):this.repeatCounter>0?this.onRepeat(h,!0,!1):this.setCompleteState()},setStateFromStart:function(h){this.repeatCounter>0?this.onRepeat(h,!1):this.setCompleteState()},reset:function(){var h=this.tween,n=h.totalTargets,l=this.targetIndex,c=h.targets[l],s=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(c,s,0,l,n,h),this.repeatCounter=this.repeat===-1?u.MAX:this.repeat,this.setPendingRenderState();var d=this.duration+this.hold;this.yoyo&&(d+=this.duration);var m=d+this.repeatDelay;this.totalDuration=this.delay+d,this.repeat===-1?(this.totalDuration+=m*u.MAX,h.isInfinite=!0):this.repeat>0&&(this.totalDuration+=m*this.repeat),this.totalDuration>h.duration&&(h.duration=this.totalDuration),this.delay<h.startDelay&&(h.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(h,n,l){var c=this.tween,s=c.totalTargets,d=this.targetIndex,m=c.targets[d],p=this.key,g=p!=="texture";if(this.elapsed=h,this.progress=h/this.duration,this.flipX&&m.toggleFlipX(),this.flipY&&m.toggleFlipY(),g&&(n||l)&&(this.start=this.getStartValue(m,p,this.start,d,s,c)),l){this.setPlayingBackwardState(),this.dispatchEvent(x.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,g&&(this.end=this.getEndValue(m,p,this.start,d,s,c)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-h,g&&(this.current=this.start,m[p]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(x.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});o.exports=r}),69902:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};o.exports=E}),81076:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]}),86081:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),x=e(83419),u=e(842),r=e(44603),h=e(39429),n=e(36383),l=e(86353),c=e(48177),s=e(42220),d=new x({Extends:a,initialize:function(p,g){a.call(this,p),this.targets=g,this.totalTargets=g.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(m,p,g,T,S,w,A,M,R,P,b,F,I,L,D,O){var z=new c(this,m,p,g,T,S,w,A,M,R,P,b,F,I,L,D,O);return this.totalData=this.data.push(z),z},addFrame:function(m,p,g,T,S,w,A,M,R,P){var b=new s(this,m,p,g,T,S,w,A,M,R,P);return this.totalData=this.data.push(b),b},getValue:function(m){m===void 0&&(m=0);var p=null;return this.data&&(p=this.data[m].current),p},hasTarget:function(m){return this.targets&&this.targets.indexOf(m)!==-1},updateTo:function(m,p,g){if(g===void 0&&(g=!1),m!=="texture")for(var T=0;T<this.totalData;T++){var S=this.data[T];S.key===m&&(S.isPlayingForward()||S.isPlayingBackward())&&(S.end=p,g&&(S.start=S.current))}return this},restart:function(){switch(this.state){case l.REMOVED:case l.FINISHED:this.seek(),this.parent.makeActive(this);break;case l.PENDING:case l.PENDING_REMOVE:this.parent.reset(this);break;case l.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,a.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(m,p,g){if(m===void 0&&(m=0),p===void 0&&(p=16.6),g===void 0&&(g=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;g||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive");var T=this.paused;if(this.paused=!1,m>0){for(var S=Math.floor(m/p),w=m-S*p,A=0;A<S;A++)this.update(p);w>0&&this.update(w)}return this.paused=T,this.isSeeking=!1,this},initTweenData:function(m){m===void 0&&(m=!1),this.duration=0,this.startDelay=n.MAX_SAFE_INTEGER;for(var p=this.data,g=0;g<this.totalData;g++)p[g].reset(m);this.duration=Math.max(this.duration,.01);var T=this.duration,S=this.completeDelay,w=this.loopCounter,A=this.loopDelay;w>0?this.totalDuration=T+S+(T+A)*w:this.totalDuration=T+S},reset:function(m){return m===void 0&&(m=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=l.MAX),m||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")),this},update:function(m){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(m*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(m),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(m),!1;this.hasStarted||(this.startDelay-=m,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(u.TWEEN_START,"onStart"),m=0));var p=!1;if(this.isActive())for(var g=this.data,T=0;T<this.totalData;T++)g[T].update(m)&&(p=!0);this.elapsed+=m,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=m,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),p||this.nextState();var S=this.isPendingRemove();return S&&this.persist&&(this.setFinishedState(),S=!1),S},forward:function(m){return this.update(m),this},rewind:function(m){return this.update(-m),this},dispatchEvent:function(m,p){if(!this.isSeeking){if(this.emit(m,this,this.targets),!this.callbacks)return;var g=this.callbacks[p];g&&g.func.apply(this.callbackScope,[this,this.targets].concat(g.params))}},destroy:function(){a.prototype.destroy.call(this),this.targets=null}});h.register("tween",function(m){return this.scene.sys.tweens.add(m)}),r.register("tween",function(m){return this.scene.sys.tweens.create(m)}),o.exports=d}),43960:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),x=e(70402),u=e(83419),r=e(842),h=e(44603),n=e(39429),l=e(86353),c=new u({Extends:x,initialize:function(d){x.call(this,d),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?l.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(s){var d=this.parent.create(s);Array.isArray(d)||(d=[d]);for(var m=this.data,p=0;p<d.length;p++){var g=d[p];g.parent=this,m.push(g.reset())}return this.totalData=m.length,this},remove:function(s){return a(this.data,s),s.setRemovedState(),s===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(s){for(var d=this.data,m=0;m<this.totalData;m++)if(d[m].hasTarget(s))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(s){return s.seek(),s.setActiveState(),this},makeActive:function(s){return s.reset(),s.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(r.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var s=this.data,d=this.totalData,m=0;m<d;m++)s[m].reset(!1);this.setCurrentTween(0)},update:function(s){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(s*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(s),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(s),!1;this.hasStarted||(this.startDelay-=s,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(r.TWEEN_START,"onStart"),s=0));var d=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(s)&&this.nextTween()&&this.nextState(),d=this.isPendingRemove(),d&&this.persist&&(this.setFinishedState(),d=!1)),d},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(s){this.currentIndex=s,this.currentTween=this.data[s],this.currentTween.setActiveState()},dispatchEvent:function(s,d){this.emit(s,this);var m=this.callbacks[d];m&&m.func.apply(this.callbackScope,[this].concat(m.params))},destroy:function(){x.prototype.destroy.call(this),this.currentTween=null}});n.register("tweenchain",function(s){return this.scene.sys.tweens.chain(s)}),h.register("tweenchain",function(s){return this.scene.sys.tweens.create(s)}),o.exports=c}),48177:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95042),x=e(45319),u=e(83419),r=e(842),h=new u({Extends:a,initialize:function(l,c,s,d,m,p,g,T,S,w,A,M,R,P,b,F,I){a.call(this,l,c,T,S,w,A,M,R,P,b),this.key=s,this.getActiveValue=p,this.getEndValue=d,this.getStartValue=m,this.ease=g,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=F,this.interpolationData=I},reset:function(n){a.prototype.reset.call(this);var l=this.tween.targets[this.targetIndex],c=this.key;n&&(l[c]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(l[c]=this.getActiveValue(l,c,0))},update:function(n){var l=this.tween,c=l.totalTargets,s=this.targetIndex,d=l.targets[s],m=this.key;if(!d)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(d,m,d[m],s,c,l),this.end=this.getEndValue(d,m,this.start,s,c,l),this.current=this.start,d[m]=this.start,this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),g=this.isPlayingBackward();if(p||g){var T=this.elapsed,S=this.duration,w=0,A=!1;T+=n,T>=S?(w=T-S,T=S,A=!0):T<0&&(T=0);var M=x(T/S,0,1);this.elapsed=T,this.progress=M,this.previous=this.current,p||(M=1-M);var R=this.ease(M);this.interpolation?this.current=this.interpolation(this.interpolationData,R):this.current=this.start+(this.end-this.start)*R,d[m]=this.current,A&&(p?(l.isNumberTween&&(this.current=this.end,d[m]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(w)):(l.isNumberTween&&(this.current=this.start,d[m]=this.current),this.setStateFromStart(w))),this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,l){var c=this.tween;if(!c.isSeeking){var s=c.targets[this.targetIndex],d=this.key,m=this.current,p=this.previous;c.emit(n,c,d,s,m,p);var g=c.callbacks[l];g&&g.func.apply(c.callbackScope,[c,s,d,m,p].concat(g.params))}},destroy:function(){a.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});o.exports=h}),42220:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95042),x=e(45319),u=e(83419),r=e(842),h=new u({Extends:a,initialize:function(l,c,s,d,m,p,g,T,S,w,A){a.call(this,l,c,m,p,!1,g,T,S,w,A),this.key="texture",this.startTexture=null,this.endTexture=s,this.startFrame=null,this.endFrame=d,this.yoyo=T!==0},reset:function(n){a.prototype.reset.call(this);var l=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=l.texture.key,this.startFrame=l.frame.name),n&&l.setTexture(this.startTexture,this.startFrame)},update:function(n){var l=this.tween,c=this.targetIndex,s=l.targets[c];if(!s)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&s.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var d=this.isPlayingForward(),m=this.isPlayingBackward();if(d||m){var p=this.elapsed,g=this.duration,T=0,S=!1;p+=n,p>=g?(T=p-g,p=g,S=!0):p<0&&(p=0);var w=x(p/g,0,1);this.elapsed=p,this.progress=w,S&&(d?(s.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(T)):(s.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(T))),this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,l){var c=this.tween;if(!c.isSeeking){var s=c.targets[this.targetIndex],d=this.key;c.emit(n,c,d,s);var m=c.callbacks[l];m&&m.func.apply(c.callbackScope,[c,s,d].concat(m.params))}},destroy:function(){a.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});o.exports=h}),86353:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};o.exports=E}),83419:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(h){return!!h.get&&typeof h.get=="function"||!!h.set&&typeof h.set=="function"}function e(h,n,l){var c=l?h[n]:Object.getOwnPropertyDescriptor(h,n);return!l&&c.value&&typeof c.value=="object"&&(c=c.value),c&&E(c)?(typeof c.enumerable>"u"&&(c.enumerable=!0),typeof c.configurable>"u"&&(c.configurable=!0),c):!1}function a(h,n){var l=Object.getOwnPropertyDescriptor(h,n);return l?(l.value&&typeof l.value=="object"&&(l=l.value),l.configurable===!1):!1}function x(h,n,l,c){for(var s in n)if(n.hasOwnProperty(s)){var d=e(n,s,l);if(d!==!1){var m=c||h;if(a(m.prototype,s)){if(r.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(h.prototype,s,d)}else h.prototype[s]=n[s]}}function u(h,n){if(n){Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++)x(h,n[l].prototype||n[l])}}function r(h){h||(h={});var n,l;if(h.initialize){if(typeof h.initialize!="function")throw new Error("initialize must be a function");n=h.initialize,delete h.initialize}else if(h.Extends){var c=h.Extends;n=function(){c.apply(this,arguments)}}else n=function(){};h.Extends?(n.prototype=Object.create(h.Extends.prototype),n.prototype.constructor=n,l=h.Extends,delete h.Extends):n.prototype.constructor=n;var s=null;return h.Mixins&&(s=h.Mixins,delete h.Mixins),u(n,s),x(n,h,!0,l),n}r.extend=x,r.mixin=u,r.ignoreFinals=!1,o.exports=r}),29747:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};o.exports=E}),20242:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){return null};o.exports=E}),71146:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r){if(r===void 0&&(r=e),x>0){var h=x-e.length;if(h<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.push(a),u&&u.call(r,a),a):null;for(var n=a.length-1;n>=0;)e.indexOf(a[n])!==-1&&a.splice(n,1),n--;if(n=a.length,n===0)return null;x>0&&n>h&&(a.splice(h),n=h);for(var l=0;l<n;l++){var c=a[l];e.push(c),u&&u.call(r,c)}return a};o.exports=E}),51067:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u,r,h){if(x===void 0&&(x=0),h===void 0&&(h=e),u>0){var n=u-e.length;if(n<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.splice(x,0,a),r&&r.call(h,a),a):null;for(var l=a.length-1;l>=0;)e.indexOf(a[l])!==-1&&a.pop(),l--;if(l=a.length,l===0)return null;u>0&&l>n&&(a.splice(n),l=n);for(var c=l-1;c>=0;c--){var s=a[c];e.splice(x,0,s),r&&r.call(h,s)}return a};o.exports=E}),66905:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.indexOf(a);return x!==-1&&x<e.length&&(e.splice(x,1),e.push(a)),a};o.exports=E}),21612:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(u,r,h,n,l){n===void 0&&(n=0),l===void 0&&(l=u.length);var c=0;if(a(u,n,l))for(var s=n;s<l;s++){var d=u[s];d[r]===h&&c++}return c};o.exports=x}),95428:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u,r=[null];for(u=3;u<arguments.length;u++)r.push(arguments[u]);for(u=0;u<e.length;u++)r[0]=e[u],a.apply(x,r);return e};o.exports=E}),36914:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(u,r,h,n,l){if(n===void 0&&(n=0),l===void 0&&(l=u.length),a(u,n,l)){var c,s=[null];for(c=5;c<arguments.length;c++)s.push(arguments[c]);for(c=n;c<l;c++)s[0]=u[c],r.apply(h,s)}return u};o.exports=x}),81957:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a.length){if(a.length===1)return a[0]}else return NaN;var u=1,r,h;if(x){if(e<a[0][x])return a[0];for(;a[u][x]<e;)u++}else for(;a[u]<e;)u++;return u>a.length&&(u=a.length),x?(r=a[u-1][x],h=a[u][x],h-e<=e-r?a[u]:a[u-1]):(r=a[u-1],h=a[u],h-e<=e-r?h:r)};o.exports=E}),43491:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=[]);for(var x=0;x<e.length;x++)Array.isArray(e[x])?E(e[x],a):a.push(e[x]);return a};o.exports=E}),46710:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(u,r,h,n,l){n===void 0&&(n=0),l===void 0&&(l=u.length);var c=[];if(a(u,n,l))for(var s=n;s<l;s++){var d=u[s];(!r||r&&h===void 0&&d.hasOwnProperty(r)||r&&h!==void 0&&d[r]===h)&&c.push(d)}return c};o.exports=x}),58731:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(u,r,h,n,l){if(n===void 0&&(n=0),l===void 0&&(l=u.length),n!==-1){if(a(u,n,l))for(var c=n;c<l;c++){var s=u[c];if(!r||r&&h===void 0&&s.hasOwnProperty(r)||r&&h!==void 0&&s[r]===h)return s}}else if(a(u,0,l))for(var c=l;c>=0;c--){var s=u[c];if(!r||r&&h===void 0&&s.hasOwnProperty(r)||r&&h!==void 0&&s[r]===h)return s}return null};o.exports=x}),26546:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){a===void 0&&(a=0),x===void 0&&(x=e.length);var u=a+Math.floor(Math.random()*x);return e[u]===void 0?null:e[u]};o.exports=E}),85835:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===x)return e;var u=e.indexOf(a),r=e.indexOf(x);if(u<0||r<0)throw new Error("Supplied items must be elements of the same array");return u>r||(e.splice(u,1),r=e.indexOf(x),e.splice(r+1,0,a)),e};o.exports=E}),83371:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===x)return e;var u=e.indexOf(a),r=e.indexOf(x);if(u<0||r<0)throw new Error("Supplied items must be elements of the same array");return u<r||(e.splice(u,1),r===0?e.unshift(a):e.splice(r,0,a)),e};o.exports=E}),70864:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.indexOf(a);if(x>0){var u=e[x-1],r=e.indexOf(u);e[x]=u,e[r]=a}return e};o.exports=E}),69693:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=e.indexOf(a);if(u===-1||x<0||x>=e.length)throw new Error("Supplied index out of bounds");return u!==x&&(e.splice(u,1),e.splice(x,0,a)),a};o.exports=E}),40853:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.indexOf(a);if(x!==-1&&x<e.length-1){var u=e[x+1],r=e.indexOf(u);e[x]=u,e[r]=a}return e};o.exports=E}),20283:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=[],h,n=!1;if((x||u)&&(n=!0,x||(x=""),u||(u="")),a<e)for(h=e;h>=a;h--)n?r.push(x+h.toString()+u):r.push(h);else for(h=e;h<=a;h++)n?r.push(x+h.toString()+u):r.push(h);return r};o.exports=E}),593:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2284),x=function(u,r,h){u===void 0&&(u=0),r===void 0&&(r=null),h===void 0&&(h=1),r===null&&(r=u,u=0);for(var n=[],l=Math.max(a((r-u)/(h||1)),0),c=0;c<l;c++)n.push(u),u+=h;return n};o.exports=x}),43886:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(x,u,r){var h=x[u];x[u]=x[r],x[r]=h}function e(x,u){return x<u?-1:x>u?1:0}var a=function(x,u,r,h,n){for(r===void 0&&(r=0),h===void 0&&(h=x.length-1),n===void 0&&(n=e);h>r;){if(h-r>600){var l=h-r+1,c=u-r+1,s=Math.log(l),d=.5*Math.exp(2*s/3),m=.5*Math.sqrt(s*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(u-c*d/l+m)),g=Math.min(h,Math.floor(u+(l-c)*d/l+m));a(x,u,p,g,n)}var T=x[u],S=r,w=h;for(E(x,r,u),n(x[h],T)>0&&E(x,r,h);S<w;){for(E(x,S,w),S++,w--;n(x[S],T)<0;)S++;for(;n(x[w],T)>0;)w--}n(x[r],T)===0?E(x,r,w):(w++,E(x,w,h)),w<=u&&(r=w+1),u<=w&&(h=w-1)}};o.exports=a}),88492:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x=e(33680),u=function(h,n,l){for(var c=[],s=0;s<h.length;s++)for(var d=0;d<n.length;d++)for(var m=0;m<l;m++)c.push({a:h[s],b:n[d]});return c},r=function(h,n,l){var c=a(l,"max",0),s=a(l,"qty",1),d=a(l,"random",!1),m=a(l,"randomB",!1),p=a(l,"repeat",0),g=a(l,"yoyo",!1),T=[];if(m&&x(n),p===-1)if(c===0)p=0;else{var S=h.length*n.length*s;g&&(S*=2),p=Math.ceil(c/S)}for(var w=0;w<=p;w++){var A=u(h,n,s);d&&x(A),T=T.concat(A),g&&(A.reverse(),T=T.concat(A))}return c&&T.splice(c),T};o.exports=r}),72905:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),x=function(u,r,h,n){n===void 0&&(n=u);var l;if(!Array.isArray(r))return l=u.indexOf(r),l!==-1?(a(u,l),h&&h.call(n,r),r):null;for(var c=r.length-1,s=[];c>=0;){var d=r[c];l=u.indexOf(d),l!==-1&&(a(u,l),s.push(d),h&&h.call(n,d)),c--}return s};o.exports=x}),60248:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),x=function(u,r,h,n){if(n===void 0&&(n=u),r<0||r>u.length-1)throw new Error("Index out of bounds");var l=a(u,r);return h&&h.call(n,l),l};o.exports=x}),81409:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(u,r,h,n,l){if(r===void 0&&(r=0),h===void 0&&(h=u.length),l===void 0&&(l=u),a(u,r,h)){var c=h-r,s=u.splice(r,c);if(n)for(var d=0;d<s.length;d++){var m=s[d];n.call(l,m)}return s}else return[]};o.exports=x}),31856:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),x=function(u,r,h){r===void 0&&(r=0),h===void 0&&(h=u.length);var n=r+Math.floor(Math.random()*h);return a(u,n)};o.exports=x}),42169:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=e.indexOf(a),r=e.indexOf(x);return u!==-1&&r===-1?(e[u]=x,!0):!1};o.exports=E}),86003:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1);for(var x=null,u=0;u<a;u++)x=e.shift(),e.push(x);return x};o.exports=E}),49498:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){a===void 0&&(a=1);for(var x=null,u=0;u<a;u++)x=e.pop(),e.unshift(x);return x};o.exports=E}),82011:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){var r=e.length;if(a<0||a>=r||a>=x||x>r){if(u)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};o.exports=E}),89545:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){var x=e.indexOf(a);return x!==-1&&x>0&&(e.splice(x,1),e.unshift(a)),a};o.exports=E}),17810:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),x=function(u,r,h,n,l){if(n===void 0&&(n=0),l===void 0&&(l=u.length),a(u,n,l))for(var c=n;c<l;c++){var s=u[c];s.hasOwnProperty(r)&&(s[r]=h)}return u};o.exports=x}),33680:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=e.length-1;a>0;a--){var x=Math.floor(Math.random()*(a+1)),u=e[a];e[a]=e[x],e[x]=u}return e};o.exports=E}),90126:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a=/\D/g;return e.sort(function(x,u){return parseInt(x.replace(a,""),10)-parseInt(u.replace(a,""),10)}),e};o.exports=E}),19133:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){if(!(a>=e.length)){for(var x=e.length-1,u=e[a],r=a;r<x;r++)e[r]=e[r+1];return e.length=x,u}};o.exports=E}),19186:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82264);function x(n,l){return String(n).localeCompare(l)}function u(n,l){var c=n.length;if(c<=1)return n;for(var s=new Array(c),d=1;d<c;d*=2){r(n,l,d,s);var m=n;n=s,s=m}return n}function r(n,l,c,s){var d=n.length,m=0,p=c*2,g,T,S,w,A;for(g=0;g<d;g+=p)for(T=g+c,S=T+c,T>d&&(T=d),S>d&&(S=d),w=g,A=T;;)if(w<T&&A<S)l(n[w],n[A])<=0?s[m++]=n[w++]:s[m++]=n[A++];else if(w<T)s[m++]=n[w++];else if(A<S)s[m++]=n[A++];else break}var h=function(n,l){if(l===void 0&&(l=x),!n||n.length<2)return n;if(a.features.stableSort)return n.sort(l);var c=u(n,l);return c!==n&&r(c,null,n.length,n),n};o.exports=h}),25630:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(a===x)return e;var u=e.indexOf(a),r=e.indexOf(x);if(u<0||r<0)throw new Error("Supplied items must be elements of the same array");return e[u]=x,e[r]=a,e};o.exports=E}),37105:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Matrix:e(54915),Add:e(71146),AddAt:e(51067),BringToTop:e(66905),CountAllMatching:e(21612),Each:e(95428),EachInRange:e(36914),FindClosestInSorted:e(81957),Flatten:e(43491),GetAll:e(46710),GetFirst:e(58731),GetRandom:e(26546),MoveDown:e(70864),MoveTo:e(69693),MoveUp:e(40853),MoveAbove:e(85835),MoveBelow:e(83371),NumberArray:e(20283),NumberArrayStep:e(593),QuickSelect:e(43886),Range:e(88492),Remove:e(72905),RemoveAt:e(60248),RemoveBetween:e(81409),RemoveRandomElement:e(31856),Replace:e(42169),RotateLeft:e(86003),RotateRight:e(49498),SafeRange:e(82011),SendToBack:e(89545),SetAll:e(17810),Shuffle:e(33680),SortByDigits:e(90126),SpliceOne:e(19133),StableSort:e(19186),Swap:e(25630)}}),86922:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var a=e[0].length,x=1;x<e.length;x++)if(e[x].length!==a)return!1;return!0};o.exports=E}),63362:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41836),x=e(86922),u=function(r){var h="";if(!x(r))return h;for(var n=0;n<r.length;n++){for(var l=0;l<r[n].length;l++){var c=r[n][l].toString();c!=="undefined"?h+=a(c,2):h+="?",l<r[n].length-1&&(h+=" |")}if(n<r.length-1){h+=`
`;for(var s=0;s<r[n].length;s++)h+="---",s<r[n].length-1&&(h+="+");h+=`
`}}return h};o.exports=u}),92598:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.reverse()};o.exports=E}),21224:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=0;a<e.length;a++)e[a].reverse();return e};o.exports=E}),98717:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),x=function(u){return a(u,180)};o.exports=x}),44657:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),x=function(u,r){r===void 0&&(r=1);for(var h=0;h<r;h++)u=a(u,90);return u};o.exports=x}),37829:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86922),x=e(2429),u=function(r,h){if(h===void 0&&(h=90),!a(r))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")r=x(r),r.reverse();else if(h===-90||h===270||h==="rotateRight")r.reverse(),r=x(r);else if(Math.abs(h)===180||h==="rotate180"){for(var n=0;n<r.length;n++)r[n].reverse();r.reverse()}return r};o.exports=u}),92632:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),x=function(u,r){r===void 0&&(r=1);for(var h=0;h<r;h++)u=a(u,-90);return u};o.exports=x}),69512:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86003),x=e(49498),u=function(r,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),n!==0&&(n<0?a(r,Math.abs(n)):x(r,n)),h!==0)for(var l=0;l<r.length;l++){var c=r[l];h<0?a(c,Math.abs(h)):x(c,h)}return r};o.exports=u}),2429:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){for(var a=e.length,x=e[0].length,u=new Array(x),r=0;r<x;r++){u[r]=new Array(a);for(var h=a-1;h>-1;h--)u[r][h]=e[h][r]}return u};o.exports=E}),54915:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CheckMatrix:e(86922),MatrixToString:e(63362),ReverseColumns:e(92598),ReverseRows:e(21224),Rotate180:e(98717),RotateLeft:e(44657),RotateMatrix:e(37829),RotateRight:e(92632),Translate:e(69512),TransposeMatrix:e(2429)}}),71334:(o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(a,x){for(var u=new Uint8Array(a),r=u.length,h=x?"data:"+x+";base64,":"",n=0;n<r;n+=3)h+=E[u[n]>>2],h+=E[(u[n]&3)<<4|u[n+1]>>4],h+=E[(u[n+1]&15)<<2|u[n+2]>>6],h+=E[u[n+2]&63];return r%3===2?h=h.substring(0,h.length-1)+"=":r%3===1&&(h=h.substring(0,h.length-2)+"=="),h};o.exports=e}),53134:(o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),a=0;a<E.length;a++)e[E.charCodeAt(a)]=a;var x=function(u){u=u.substr(u.indexOf(",")+1);var r=u.length,h=r*.75,n=0,l,c,s,d;u[r-1]==="="&&(h--,u[r-2]==="="&&h--);for(var m=new ArrayBuffer(h),p=new Uint8Array(m),g=0;g<r;g+=4)l=e[u.charCodeAt(g)],c=e[u.charCodeAt(g+1)],s=e[u.charCodeAt(g+2)],d=e[u.charCodeAt(g+3)],p[n++]=l<<2|c>>4,p[n++]=(c&15)<<4|s>>2,p[n++]=(s&3)<<6|d&63;return m};o.exports=x}),65839:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ArrayBufferToBase64:e(71334),Base64ToArrayBuffer:e(53134)}}),91799:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Array:e(37105),Base64:e(65839),Objects:e(1183),String:e(31749),NOOP:e(29747),NULL:e(20242)}}),41786:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a={};for(var x in e)Array.isArray(e[x])?a[x]=e[x].slice(0):a[x]=e[x];return a};o.exports=E}),62644:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){var a,x,u;if(typeof e!="object"||e===null)return e;a=Array.isArray(e)?[]:{};for(u in e)x=e[u],a[u]=E(x);return a};o.exports=E}),79291:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41212),x=function(){var u,r,h,n,l,c,s=arguments[0]||{},d=1,m=arguments.length,p=!1;for(typeof s=="boolean"&&(p=s,s=arguments[1]||{},d=2),m===d&&(s=this,--d);d<m;d++)if((u=arguments[d])!=null)for(r in u)h=s[r],n=u[r],s!==n&&(p&&n&&(a(n)||(l=Array.isArray(n)))?(l?(l=!1,c=h&&Array.isArray(h)?h:[]):c=h&&a(h)?h:{},s[r]=x(p,c,n)):n!==void 0&&(s[r]=n));return s};o.exports=x}),23568:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75508),x=e(35154),u=function(r,h,n){var l=x(r,h,null);if(l===null)return n;if(Array.isArray(l))return a.RND.pick(l);if(typeof l=="object"){if(l.hasOwnProperty("randInt"))return a.RND.integerInRange(l.randInt[0],l.randInt[1]);if(l.hasOwnProperty("randFloat"))return a.RND.realInRange(l.randFloat[0],l.randFloat[1])}else if(typeof l=="function")return l(h);return l};o.exports=u}),95540:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){var u=typeof e;return!e||u==="number"||u==="string"?x:e.hasOwnProperty(a)&&e[a]!==void 0?e[a]:x};o.exports=E}),82840:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),x=e(45319),u=function(r,h,n,l,c){c===void 0&&(c=n);var s=a(r,h,c);return x(s,n,l)};o.exports=u}),35154:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){if(!e&&!u||typeof e=="number")return x;if(e&&e.hasOwnProperty(a))return e[a];if(u&&u.hasOwnProperty(a))return u[a];if(a.indexOf(".")!==-1){for(var r=a.split("."),h=e,n=u,l=x,c=x,s=!0,d=!0,m=0;m<r.length;m++)h&&h.hasOwnProperty(r[m])?(l=h[r[m]],h=h[r[m]]):s=!1,n&&n.hasOwnProperty(r[m])?(c=n[r[m]],n=n[r[m]]):d=!1;return s?l:d?c:x}else return x};o.exports=E}),69036:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){for(var x=0;x<a.length;x++)if(!e.hasOwnProperty(a[x]))return!1;return!0};o.exports=E}),1985:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){for(var x=0;x<a.length;x++)if(e.hasOwnProperty(a[x]))return!0;return!1};o.exports=E}),97022:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.hasOwnProperty(a)};o.exports=E}),41212:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};o.exports=E}),46975:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),x=function(u,r){var h=a(u);for(var n in r)h.hasOwnProperty(n)||(h[n]=r[n]);return h};o.exports=x}),269:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),x=function(u,r){var h=a(u);for(var n in r)h.hasOwnProperty(n)&&(h[n]=r[n]);return h};o.exports=x}),18254:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97022),x=function(u,r){for(var h={},n=0;n<r.length;n++){var l=r[n];a(u,l)&&(h[l]=u[l])}return h};o.exports=x}),61622:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(a))return e[a]=x,!0;if(a.indexOf(".")!==-1){for(var u=a.split("."),r=e,h=e,n=0;n<u.length;n++)if(r.hasOwnProperty(u[n]))h=r,r=r[u[n]];else return!1;return h[u[u.length-1]]=x,!0}return!1};o.exports=E}),1183:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clone:e(41786),DeepCopy:e(62644),Extend:e(79291),GetAdvancedValue:e(23568),GetFastValue:e(95540),GetMinMaxValue:e(82840),GetValue:e(35154),HasAll:e(69036),HasAny:e(1985),HasValue:e(97022),IsPlainObject:e(41212),Merge:e(46975),MergeRight:e(269),Pick:e(18254),SetValue:e(61622)}}),27902:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return e.replace(/%([0-9]+)/g,function(x,u){return a[Number(u)-1]})};o.exports=E}),41836:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a,x,u){a===void 0&&(a=0),x===void 0&&(x=" "),u===void 0&&(u=3),e=e.toString();var r=0;if(a+1>=e.length)switch(u){case 1:e=new Array(a+1-e.length).join(x)+e;break;case 3:var h=Math.ceil((r=a-e.length)/2),n=r-h;e=new Array(n+1).join(x)+e+new Array(h+1).join(x);break;default:e=e+new Array(a+1-e.length).join(x);break}return e};o.exports=E}),33628:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e,a){return a===0?e.slice(1):e.slice(0,a)+e.slice(a+1)};o.exports=E}),27671:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e.split("").reverse().join("")};o.exports=E}),45650:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=Math.random()*16|0,x=e==="x"?a:a&3|8;return x.toString(16)})};o.exports=E}),35355:(o=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(e){return e&&e[0].toUpperCase()+e.slice(1)};o.exports=E}),31749:((o,E,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Format:e(27902),Pad:e(41836),RemoveAt:e(33628),Reverse:e(27671),UppercaseFirst:e(35355),UUID:e(45650)}})},f={};function y(o){var E=f[o];if(E!==void 0)return E.exports;var e=f[o]={exports:{}};return i[o](e,e.exports,y),e.exports}y.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var C=y(85454);return C})())})(fp)),fp.exports}var fI=uI();const $1=lI(fI);var cI=Jt('<div class="absolute inset-0 pointer-events-none z-0 svelte-qbv4n9"></div>');function dI(v,t){Ds(t,!1);let i=ue(),f,y={x:0,y:0};function C(a){if(!f||!f.scene.scenes[0])return;const x=f.scene.scenes[0];a.forEach(u=>{if(u)for(let r=0;r<3;r++){const h=x.add.circle(u.x,u.y,10,10419968,.8);x.physics.add.existing(h),x.tweens.add({targets:h,x:y.x,y:y.y,duration:1500+Math.random()*1e3,ease:"Cubic.easeOut",onComplete:()=>h.destroy()})}})}function o(a){if(!f||!f.scene.scenes[0])return;const x=f.scene.scenes[0];a.forEach(u=>{if(u)for(let r=0;r<3;r++){const h=x.add.circle(u.x,u.y,10,16726832,.8);x.physics.add.existing(h),x.tweens.add({targets:h,x:u.x+(Math.random()-.5)*100,y:window.innerHeight+100,duration:800+Math.random()*400,ease:"Power2.easeIn",onComplete:()=>h.destroy()})}})}vc(()=>{const a=document.querySelector(".playable-balance");if(a){const h=a.getBoundingClientRect();y={x:h.left+h.width/2,y:h.top+h.height/2}}else y={x:window.innerWidth*.8,y:150};const x={type:$1.AUTO,parent:Y(i),width:"100%",height:"100%",transparent:!0,backgroundColor:"rgba(0,0,0,0)",scene:{create:u,update:r},physics:{default:"arcade",arcade:{gravity:{y:0}}}};f=new $1.Game(x);function u(){const h=this;h.input.on("pointerdown",n=>{const l=h.add.circle(n.x,n.y,2,16777215,.3);h.tweens.add({targets:l,radius:100,alpha:0,duration:1e3,ease:"Power2",onComplete:()=>l.destroy()})}),this.particles=h.add.particles(0,0,"flare",{speed:{min:-5,max:5},scale:{start:.05,end:0},alpha:{start:.15,end:0},blendMode:"ADD",frequency:-1,gravityY:0}),h.input.on("pointermove",n=>{Math.random()>.5&&this.particles.emitParticleAt(n.x,n.y)})}function r(h,n){}window.addEventListener("resize",()=>{f&&f.scale.resize(window.innerWidth,window.innerHeight)})}),Mx(()=>{f&&f.destroy(!0)});var E={triggerWinAnimation:C,triggerLossAnimation:o};ir();var e=cI();return Op(e,a=>ut(i,a),()=>Y(i)),Gt(v,e),B0(t,"triggerWinAnimation",C),B0(t,"triggerLossAnimation",o),Os(E)}var pI=Jt('<button class="w-16 h-16 rounded-full bg-[#e5e7eb] border-2 border-zinc-400 shadow-[0_4px_8px_rgba(0,0,0,0.4),inset_0_2px_4px_white] flex items-center justify-center transition-transform active:scale-95"><span class="text-zinc-800 font-black text-xl"> </span></button>'),vI=Jt('<div class="text-white/40 text-[10px] uppercase tracking-widest font-bold"> </div>'),mI=Jt('<div class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[200] flex items-center justify-center p-4"><div class="bg-[#2a2a2a] rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.5),inset_0_1px_1px_rgba(255,255,255,0.1)] border border-white/10 p-8 max-w-lg w-full flex flex-col items-center gap-8"><h2 class="text-white text-xl font-medium text-center leading-tight">What odds do you want to take on a bet "Pass line odds"?</h2> <div class="flex flex-wrap items-center justify-center gap-4"><!> <button class="w-16 h-16 rounded-full bg-[#e5e7eb] border-2 border-zinc-400 shadow-[0_4px_8px_rgba(0,0,0,0.4),inset_0_2px_4px_white] flex items-center justify-center transition-transform active:scale-95"><span class="text-zinc-800 font-black text-[10px] leading-tight text-center uppercase">NO ODDS</span></button></div> <!></div></div>');function gI(v,t){Ds(t,!1);const i=ue(),f=ue(),y=Zo();let C=Pe(t,"passlineAmount",8,0),o=Pe(t,"point",8,null);const E={2:2,12:2,3:2,11:2,4:3,10:3,5:4,9:4,6:5,8:5};function e(c){y("select",c)}nn(()=>cn(o()),()=>{ut(i,E[o()]||3)}),nn(()=>Y(i),()=>{ut(f,Array.from({length:Y(i)},(c,s)=>s+1))}),ih(),ir();var a=mI(),x=ht(a),u=xt(ht(x),2),r=ht(u);Yi(r,1,()=>Y(f),Xi,(c,s)=>{var d=pI(),m=ht(d),p=ht(m);si(()=>we(p,`${Y(s)??""}x`)),$e("click",d,()=>e(Y(s))),Gt(c,d)});var h=xt(r,2),n=xt(u,2);{var l=c=>{var s=vI(),d=ht(s);si(()=>we(d,`Point: ${o()??""} | Line Bet: $${C()??""}`)),Gt(c,s)};Ae(n,c=>{C()>0&&c(l)})}$e("click",h,()=>e(0)),Gt(v,a),Os()}var xI=Jt('<div><button class="flex-1 bg-[#0d3b1e] border border-white/20 rounded-t-md p-4 flex flex-col items-center justify-center hover:bg-[#1a4d2e] transition-colors group"><span> </span></button> <div class="flex border border-white/20 rounded-b-md overflow-hidden h-10"><div class="flex-1 bg-transparent border-r border-white/10"></div> <button class="flex-1 bg-[#0d3b1e] hover:bg-[#1a4d2e] transition-colors flex items-center justify-center px-2"><span class="text-[10px] font-black text-white tracking-widest uppercase">BUY</span></button></div></div>'),yI=Jt('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[200] flex items-center justify-center p-4"><div class="bg-[#2a2a2a] rounded-lg shadow-2xl border border-white/10 max-w-4xl w-full flex flex-col overflow-hidden"><div class="flex items-center justify-between px-4 py-2 border-b border-white/5"><span class="text-zinc-300 text-sm font-medium">You have chips on the new point... Where do you want to move them?</span> <button class="text-zinc-500 hover:text-white transition-colors"><!></button></div> <div class="p-2 flex gap-1 overflow-x-auto svelte-a32c0m"></div></div></div>');function TI(v,t){Ds(t,!1);const i=Zo();let f=Pe(t,"currentPoint",8,null),y=Pe(t,"betToMove",24,()=>({id:"",amount:0}));const C=[2,3,4,5,6,8,9,10,11,12];function o(l,c){i("move",{targetNumber:l,type:c,amount:y().amount,sourceId:y().id})}function E(){i("close")}function e(l){return l===6?"SIX":l===9?"NINE":l.toString()}ir();var a=yI(),x=ht(a),u=ht(x),r=xt(ht(u),2),h=ht(r);Sv(h,{size:20});var n=xt(u,2);Yi(n,5,()=>C,Xi,(l,c)=>{const s=en(()=>Y(c)===f());var d=xI(),m=ht(d),p=ht(m),g=ht(p),T=xt(m,2),S=xt(ht(T),2);si(w=>{Xe(d,1,`flex-1 min-w-[100px] flex flex-col gap-1 ${Y(s)?"opacity-40 grayscale pointer-events-none":""}`),Xe(p,1,`text-4xl font-black text-white drop-shadow-md ${Y(c)===6||Y(c)===9?"rotate-[-15deg]":""}`),we(g,w)},[()=>(Y(c),_t(()=>e(Y(c))))]),$e("click",m,()=>o(Y(c),"place")),$e("click",S,()=>o(Y(c),"buy")),Gt(l,d)}),$e("click",r,E),Gt(v,a),Os()}var EI=Jt('<div class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[200] flex items-center justify-center p-4"><div class="bg-[#2a2a2a] rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.5),inset_0_1px_1px_rgba(255,255,255,0.1)] border border-white/10 p-8 max-w-md w-full flex flex-col items-center gap-8"><div class="flex flex-col items-center gap-2"><h2 class="text-white text-xl font-medium text-center leading-tight"> </h2> <p class="text-zinc-400 text-sm text-center">A 5% commission of <span class="text-emerald-400 font-bold"> </span> </p></div> <div class="flex items-center justify-center gap-6 w-full"><button class="flex-1 h-16 rounded-lg bg-emerald-500 hover:bg-emerald-400 border-2 border-emerald-600 shadow-lg flex items-center justify-center transition-all active:scale-95 group"><span class="text-white font-black text-xl uppercase tracking-widest">YES</span></button> <button class="flex-1 h-16 rounded-lg bg-red-500 hover:bg-red-400 border-2 border-red-600 shadow-lg flex items-center justify-center transition-all active:scale-95 group"><span class="text-white font-black text-xl uppercase tracking-widest">NO</span></button></div> <div class="text-white/40 text-[10px] uppercase tracking-widest font-bold text-center">COMMISSION IS DEDUCTED UPON CONFIRMATION</div></div></div>');function SI(v,t){Ds(t,!1);const i=Zo();let f=Pe(t,"amount",8,0),y=Pe(t,"betType",8,"Buy"),C=Pe(t,"commission",8,0);function o(){i("confirm")}function E(){i("decline")}ir();var e=EI(),a=ht(e),x=ht(a),u=ht(x),r=ht(u),h=xt(u,2),n=xt(ht(h)),l=ht(n),c=xt(n),s=xt(x,2),d=ht(s),m=xt(d,2);si(p=>{we(r,`Confirm ${y()??""} Bet Commission`),we(l,`$${p??""}`),we(c,` is required for this $${f()??""} ${y()??""} bet.`)},[()=>(cn(C()),_t(()=>C().toFixed(2)))]),$e("click",d,o),$e("click",m,E),Gt(v,e),Os()}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Rx="173",CI=0,K1=1,AI=2,mC=1,wI=2,Ea=3,Wa=0,us=1,Ra=2,bo=0,qh=1,j1=2,Z1=3,J1=4,MI=5,xl=100,RI=101,PI=102,bI=103,II=104,LI=200,FI=201,DI=202,OI=203,G0=204,W0=205,NI=206,BI=207,UI=208,VI=209,zI=210,GI=211,WI=212,HI=213,_I=214,H0=0,_0=1,X0=2,Au=3,Y0=4,k0=5,$0=6,K0=7,gC=0,XI=1,YI=2,Io=0,kI=1,$I=2,KI=3,jI=4,ZI=5,JI=6,QI=7,xC=300,wu=301,Mu=302,j0=303,Z0=304,Cv=306,J0=1e3,Cl=1001,Q0=1002,yr=1003,qI=1004,Pd=1005,_r=1006,hm=1007,Al=1008,Ha=1009,yC=1010,TC=1011,mc=1012,Px=1013,kl=1014,ba=1015,Xc=1016,bx=1017,Ix=1018,Ru=1020,EC=35902,SC=1021,CC=1022,vr=1023,AC=1024,wC=1025,tu=1026,Pu=1027,MC=1028,Lx=1029,RC=1030,Fx=1031,Dx=1033,cp=33776,dp=33777,pp=33778,vp=33779,q0=35840,tg=35841,eg=35842,ig=35843,ng=36196,sg=37492,rg=37496,ag=37808,og=37809,lg=37810,hg=37811,ug=37812,fg=37813,cg=37814,dg=37815,pg=37816,vg=37817,mg=37818,gg=37819,xg=37820,yg=37821,mp=36492,Tg=36494,Eg=36495,PC=36283,Sg=36284,Cg=36285,Ag=36286,t4=3200,e4=3201,bC=0,i4=1,vo="",Xs="srgb",bu="srgb-linear",Np="linear",mi="srgb",wh=7680,Q1=519,n4=512,s4=513,r4=514,IC=515,a4=516,o4=517,l4=518,h4=519,q1=35044,tT="300 es",Ia=2e3,Bp=2001;class Ku{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const f=this._listeners;f[t]===void 0&&(f[t]=[]),f[t].indexOf(i)===-1&&f[t].push(i)}hasEventListener(t,i){const f=this._listeners;return f===void 0?!1:f[t]!==void 0&&f[t].indexOf(i)!==-1}removeEventListener(t,i){const f=this._listeners;if(f===void 0)return;const y=f[t];if(y!==void 0){const C=y.indexOf(i);C!==-1&&y.splice(C,1)}}dispatchEvent(t){const i=this._listeners;if(i===void 0)return;const f=i[t.type];if(f!==void 0){t.target=this;const y=f.slice(0);for(let C=0,o=y.length;C<o;C++)y[C].call(this,t);t.target=null}}}const Gn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],um=Math.PI/180,wg=180/Math.PI;function Yc(){const v=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return(Gn[v&255]+Gn[v>>8&255]+Gn[v>>16&255]+Gn[v>>24&255]+"-"+Gn[t&255]+Gn[t>>8&255]+"-"+Gn[t>>16&15|64]+Gn[t>>24&255]+"-"+Gn[i&63|128]+Gn[i>>8&255]+"-"+Gn[i>>16&255]+Gn[i>>24&255]+Gn[f&255]+Gn[f>>8&255]+Gn[f>>16&255]+Gn[f>>24&255]).toLowerCase()}function qe(v,t,i){return Math.max(t,Math.min(i,v))}function u4(v,t){return(v%t+t)%t}function fm(v,t,i){return(1-i)*v+i*t}function Pf(v,t){switch(t.constructor){case Float32Array:return v;case Uint32Array:return v/4294967295;case Uint16Array:return v/65535;case Uint8Array:return v/255;case Int32Array:return Math.max(v/2147483647,-1);case Int16Array:return Math.max(v/32767,-1);case Int8Array:return Math.max(v/127,-1);default:throw new Error("Invalid component type.")}}function es(v,t){switch(t.constructor){case Float32Array:return v;case Uint32Array:return Math.round(v*4294967295);case Uint16Array:return Math.round(v*65535);case Uint8Array:return Math.round(v*255);case Int32Array:return Math.round(v*2147483647);case Int16Array:return Math.round(v*32767);case Int8Array:return Math.round(v*127);default:throw new Error("Invalid component type.")}}class ei{constructor(t=0,i=0){ei.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,f=this.y,y=t.elements;return this.x=y[0]*i+y[3]*f+y[6],this.y=y[1]*i+y[4]*f+y[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=qe(this.x,t.x,i.x),this.y=qe(this.y,t.y,i.y),this}clampScalar(t,i){return this.x=qe(this.x,t,i),this.y=qe(this.y,t,i),this}clampLength(t,i){const f=this.length();return this.divideScalar(f||1).multiplyScalar(qe(f,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const f=this.dot(t)/i;return Math.acos(qe(f,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,f=this.y-t.y;return i*i+f*f}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,f){return this.x=t.x+(i.x-t.x)*f,this.y=t.y+(i.y-t.y)*f,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const f=Math.cos(i),y=Math.sin(i),C=this.x-t.x,o=this.y-t.y;return this.x=C*f-o*y+t.x,this.y=C*y+o*f+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Be{constructor(t,i,f,y,C,o,E,e,a){Be.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,i,f,y,C,o,E,e,a)}set(t,i,f,y,C,o,E,e,a){const x=this.elements;return x[0]=t,x[1]=y,x[2]=E,x[3]=i,x[4]=C,x[5]=e,x[6]=f,x[7]=o,x[8]=a,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,f=t.elements;return i[0]=f[0],i[1]=f[1],i[2]=f[2],i[3]=f[3],i[4]=f[4],i[5]=f[5],i[6]=f[6],i[7]=f[7],i[8]=f[8],this}extractBasis(t,i,f){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),f.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const f=t.elements,y=i.elements,C=this.elements,o=f[0],E=f[3],e=f[6],a=f[1],x=f[4],u=f[7],r=f[2],h=f[5],n=f[8],l=y[0],c=y[3],s=y[6],d=y[1],m=y[4],p=y[7],g=y[2],T=y[5],S=y[8];return C[0]=o*l+E*d+e*g,C[3]=o*c+E*m+e*T,C[6]=o*s+E*p+e*S,C[1]=a*l+x*d+u*g,C[4]=a*c+x*m+u*T,C[7]=a*s+x*p+u*S,C[2]=r*l+h*d+n*g,C[5]=r*c+h*m+n*T,C[8]=r*s+h*p+n*S,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],f=t[1],y=t[2],C=t[3],o=t[4],E=t[5],e=t[6],a=t[7],x=t[8];return i*o*x-i*E*a-f*C*x+f*E*e+y*C*a-y*o*e}invert(){const t=this.elements,i=t[0],f=t[1],y=t[2],C=t[3],o=t[4],E=t[5],e=t[6],a=t[7],x=t[8],u=x*o-E*a,r=E*e-x*C,h=a*C-o*e,n=i*u+f*r+y*h;if(n===0)return this.set(0,0,0,0,0,0,0,0,0);const l=1/n;return t[0]=u*l,t[1]=(y*a-x*f)*l,t[2]=(E*f-y*o)*l,t[3]=r*l,t[4]=(x*i-y*e)*l,t[5]=(y*C-E*i)*l,t[6]=h*l,t[7]=(f*e-a*i)*l,t[8]=(o*i-f*C)*l,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,f,y,C,o,E){const e=Math.cos(C),a=Math.sin(C);return this.set(f*e,f*a,-f*(e*o+a*E)+o+t,-y*a,y*e,-y*(-a*o+e*E)+E+i,0,0,1),this}scale(t,i){return this.premultiply(cm.makeScale(t,i)),this}rotate(t){return this.premultiply(cm.makeRotation(-t)),this}translate(t,i){return this.premultiply(cm.makeTranslation(t,i)),this}makeTranslation(t,i){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,i,0,0,1),this}makeRotation(t){const i=Math.cos(t),f=Math.sin(t);return this.set(i,-f,0,f,i,0,0,0,1),this}makeScale(t,i){return this.set(t,0,0,0,i,0,0,0,1),this}equals(t){const i=this.elements,f=t.elements;for(let y=0;y<9;y++)if(i[y]!==f[y])return!1;return!0}fromArray(t,i=0){for(let f=0;f<9;f++)this.elements[f]=t[f+i];return this}toArray(t=[],i=0){const f=this.elements;return t[i]=f[0],t[i+1]=f[1],t[i+2]=f[2],t[i+3]=f[3],t[i+4]=f[4],t[i+5]=f[5],t[i+6]=f[6],t[i+7]=f[7],t[i+8]=f[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const cm=new Be;function LC(v){for(let t=v.length-1;t>=0;--t)if(v[t]>=65535)return!0;return!1}function Up(v){return document.createElementNS("http://www.w3.org/1999/xhtml",v)}function f4(){const v=Up("canvas");return v.style.display="block",v}const eT={};function Hh(v){v in eT||(eT[v]=!0,console.warn(v))}function c4(v,t,i){return new Promise(function(f,y){function C(){switch(v.clientWaitSync(t,v.SYNC_FLUSH_COMMANDS_BIT,0)){case v.WAIT_FAILED:y();break;case v.TIMEOUT_EXPIRED:setTimeout(C,i);break;default:f()}}setTimeout(C,i)})}function d4(v){const t=v.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function p4(v){const t=v.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const iT=new Be().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),nT=new Be().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function v4(){const v={enabled:!0,workingColorSpace:bu,spaces:{},convert:function(y,C,o){return this.enabled===!1||C===o||!C||!o||(this.spaces[C].transfer===mi&&(y.r=Ba(y.r),y.g=Ba(y.g),y.b=Ba(y.b)),this.spaces[C].primaries!==this.spaces[o].primaries&&(y.applyMatrix3(this.spaces[C].toXYZ),y.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===mi&&(y.r=eu(y.r),y.g=eu(y.g),y.b=eu(y.b))),y},fromWorkingColorSpace:function(y,C){return this.convert(y,this.workingColorSpace,C)},toWorkingColorSpace:function(y,C){return this.convert(y,C,this.workingColorSpace)},getPrimaries:function(y){return this.spaces[y].primaries},getTransfer:function(y){return y===vo?Np:this.spaces[y].transfer},getLuminanceCoefficients:function(y,C=this.workingColorSpace){return y.fromArray(this.spaces[C].luminanceCoefficients)},define:function(y){Object.assign(this.spaces,y)},_getMatrix:function(y,C,o){return y.copy(this.spaces[C].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(y){return this.spaces[y].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(y=this.workingColorSpace){return this.spaces[y].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],f=[.3127,.329];return v.define({[bu]:{primaries:t,whitePoint:f,transfer:Np,toXYZ:iT,fromXYZ:nT,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:Xs},outputColorSpaceConfig:{drawingBufferColorSpace:Xs}},[Xs]:{primaries:t,whitePoint:f,transfer:mi,toXYZ:iT,fromXYZ:nT,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:Xs}}}),v}const oi=v4();function Ba(v){return v<.04045?v*.0773993808:Math.pow(v*.9478672986+.0521327014,2.4)}function eu(v){return v<.0031308?v*12.92:1.055*Math.pow(v,.41666)-.055}let Mh;class m4{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{Mh===void 0&&(Mh=Up("canvas")),Mh.width=t.width,Mh.height=t.height;const f=Mh.getContext("2d");t instanceof ImageData?f.putImageData(t,0,0):f.drawImage(t,0,0,t.width,t.height),i=Mh}return i.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const i=Up("canvas");i.width=t.width,i.height=t.height;const f=i.getContext("2d");f.drawImage(t,0,0,t.width,t.height);const y=f.getImageData(0,0,t.width,t.height),C=y.data;for(let o=0;o<C.length;o++)C[o]=Ba(C[o]/255)*255;return f.putImageData(y,0,0),i}else if(t.data){const i=t.data.slice(0);for(let f=0;f<i.length;f++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[f]=Math.floor(Ba(i[f]/255)*255):i[f]=Ba(i[f]);return{data:i,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let g4=0;class FC{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:g4++}),this.uuid=Yc(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const f={uuid:this.uuid,url:""},y=this.data;if(y!==null){let C;if(Array.isArray(y)){C=[];for(let o=0,E=y.length;o<E;o++)y[o].isDataTexture?C.push(dm(y[o].image)):C.push(dm(y[o]))}else C=dm(y);f.url=C}return i||(t.images[this.uuid]=f),f}}function dm(v){return typeof HTMLImageElement<"u"&&v instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&v instanceof ImageBitmap?m4.getDataURL(v):v.data?{data:Array.from(v.data),width:v.width,height:v.height,type:v.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let x4=0;class fs extends Ku{constructor(t=fs.DEFAULT_IMAGE,i=fs.DEFAULT_MAPPING,f=Cl,y=Cl,C=_r,o=Al,E=vr,e=Ha,a=fs.DEFAULT_ANISOTROPY,x=vo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:x4++}),this.uuid=Yc(),this.name="",this.source=new FC(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=f,this.wrapT=y,this.magFilter=C,this.minFilter=o,this.anisotropy=a,this.format=E,this.internalFormat=null,this.type=e,this.offset=new ei(0,0),this.repeat=new ei(1,1),this.center=new ei(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Be,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=x,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const f={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(f.userData=this.userData),i||(t.textures[this.uuid]=f),f}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==xC)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case J0:t.x=t.x-Math.floor(t.x);break;case Cl:t.x=t.x<0?0:1;break;case Q0:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case J0:t.y=t.y-Math.floor(t.y);break;case Cl:t.y=t.y<0?0:1;break;case Q0:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}fs.DEFAULT_IMAGE=null;fs.DEFAULT_MAPPING=xC;fs.DEFAULT_ANISOTROPY=1;class gi{constructor(t=0,i=0,f=0,y=1){gi.prototype.isVector4=!0,this.x=t,this.y=i,this.z=f,this.w=y}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,f,y){return this.x=t,this.y=i,this.z=f,this.w=y,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,f=this.y,y=this.z,C=this.w,o=t.elements;return this.x=o[0]*i+o[4]*f+o[8]*y+o[12]*C,this.y=o[1]*i+o[5]*f+o[9]*y+o[13]*C,this.z=o[2]*i+o[6]*f+o[10]*y+o[14]*C,this.w=o[3]*i+o[7]*f+o[11]*y+o[15]*C,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,f,y,C;const e=t.elements,a=e[0],x=e[4],u=e[8],r=e[1],h=e[5],n=e[9],l=e[2],c=e[6],s=e[10];if(Math.abs(x-r)<.01&&Math.abs(u-l)<.01&&Math.abs(n-c)<.01){if(Math.abs(x+r)<.1&&Math.abs(u+l)<.1&&Math.abs(n+c)<.1&&Math.abs(a+h+s-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const m=(a+1)/2,p=(h+1)/2,g=(s+1)/2,T=(x+r)/4,S=(u+l)/4,w=(n+c)/4;return m>p&&m>g?m<.01?(f=0,y=.707106781,C=.707106781):(f=Math.sqrt(m),y=T/f,C=S/f):p>g?p<.01?(f=.707106781,y=0,C=.707106781):(y=Math.sqrt(p),f=T/y,C=w/y):g<.01?(f=.707106781,y=.707106781,C=0):(C=Math.sqrt(g),f=S/C,y=w/C),this.set(f,y,C,i),this}let d=Math.sqrt((c-n)*(c-n)+(u-l)*(u-l)+(r-x)*(r-x));return Math.abs(d)<.001&&(d=1),this.x=(c-n)/d,this.y=(u-l)/d,this.z=(r-x)/d,this.w=Math.acos((a+h+s-1)/2),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this.w=i[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=qe(this.x,t.x,i.x),this.y=qe(this.y,t.y,i.y),this.z=qe(this.z,t.z,i.z),this.w=qe(this.w,t.w,i.w),this}clampScalar(t,i){return this.x=qe(this.x,t,i),this.y=qe(this.y,t,i),this.z=qe(this.z,t,i),this.w=qe(this.w,t,i),this}clampLength(t,i){const f=this.length();return this.divideScalar(f||1).multiplyScalar(qe(f,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,f){return this.x=t.x+(i.x-t.x)*f,this.y=t.y+(i.y-t.y)*f,this.z=t.z+(i.z-t.z)*f,this.w=t.w+(i.w-t.w)*f,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class y4 extends Ku{constructor(t=1,i=1,f={}){super(),this.isRenderTarget=!0,this.width=t,this.height=i,this.depth=1,this.scissor=new gi(0,0,t,i),this.scissorTest=!1,this.viewport=new gi(0,0,t,i);const y={width:t,height:i,depth:1};f=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:_r,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},f);const C=new fs(y,f.mapping,f.wrapS,f.wrapT,f.magFilter,f.minFilter,f.format,f.type,f.anisotropy,f.colorSpace);C.flipY=!1,C.generateMipmaps=f.generateMipmaps,C.internalFormat=f.internalFormat,this.textures=[];const o=f.count;for(let E=0;E<o;E++)this.textures[E]=C.clone(),this.textures[E].isRenderTargetTexture=!0,this.textures[E].renderTarget=this;this.depthBuffer=f.depthBuffer,this.stencilBuffer=f.stencilBuffer,this.resolveDepthBuffer=f.resolveDepthBuffer,this.resolveStencilBuffer=f.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=f.depthTexture,this.samples=f.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,i,f=1){if(this.width!==t||this.height!==i||this.depth!==f){this.width=t,this.height=i,this.depth=f;for(let y=0,C=this.textures.length;y<C;y++)this.textures[y].image.width=t,this.textures[y].image.height=i,this.textures[y].image.depth=f;this.dispose()}this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let f=0,y=t.textures.length;f<y;f++)this.textures[f]=t.textures[f].clone(),this.textures[f].isRenderTargetTexture=!0,this.textures[f].renderTarget=this;const i=Object.assign({},t.texture.image);return this.texture.source=new FC(i),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class $l extends y4{constructor(t=1,i=1,f={}){super(t,i,f),this.isWebGLRenderTarget=!0}}class DC extends fs{constructor(t=null,i=1,f=1,y=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:i,height:f,depth:y},this.magFilter=yr,this.minFilter=yr,this.wrapR=Cl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class T4 extends fs{constructor(t=null,i=1,f=1,y=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:i,height:f,depth:y},this.magFilter=yr,this.minFilter=yr,this.wrapR=Cl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let kc=class{constructor(t=0,i=0,f=0,y=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=f,this._w=y}static slerpFlat(t,i,f,y,C,o,E){let e=f[y+0],a=f[y+1],x=f[y+2],u=f[y+3];const r=C[o+0],h=C[o+1],n=C[o+2],l=C[o+3];if(E===0){t[i+0]=e,t[i+1]=a,t[i+2]=x,t[i+3]=u;return}if(E===1){t[i+0]=r,t[i+1]=h,t[i+2]=n,t[i+3]=l;return}if(u!==l||e!==r||a!==h||x!==n){let c=1-E;const s=e*r+a*h+x*n+u*l,d=s>=0?1:-1,m=1-s*s;if(m>Number.EPSILON){const g=Math.sqrt(m),T=Math.atan2(g,s*d);c=Math.sin(c*T)/g,E=Math.sin(E*T)/g}const p=E*d;if(e=e*c+r*p,a=a*c+h*p,x=x*c+n*p,u=u*c+l*p,c===1-E){const g=1/Math.sqrt(e*e+a*a+x*x+u*u);e*=g,a*=g,x*=g,u*=g}}t[i]=e,t[i+1]=a,t[i+2]=x,t[i+3]=u}static multiplyQuaternionsFlat(t,i,f,y,C,o){const E=f[y],e=f[y+1],a=f[y+2],x=f[y+3],u=C[o],r=C[o+1],h=C[o+2],n=C[o+3];return t[i]=E*n+x*u+e*h-a*r,t[i+1]=e*n+x*r+a*u-E*h,t[i+2]=a*n+x*h+E*r-e*u,t[i+3]=x*n-E*u-e*r-a*h,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,f,y){return this._x=t,this._y=i,this._z=f,this._w=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i=!0){const f=t._x,y=t._y,C=t._z,o=t._order,E=Math.cos,e=Math.sin,a=E(f/2),x=E(y/2),u=E(C/2),r=e(f/2),h=e(y/2),n=e(C/2);switch(o){case"XYZ":this._x=r*x*u+a*h*n,this._y=a*h*u-r*x*n,this._z=a*x*n+r*h*u,this._w=a*x*u-r*h*n;break;case"YXZ":this._x=r*x*u+a*h*n,this._y=a*h*u-r*x*n,this._z=a*x*n-r*h*u,this._w=a*x*u+r*h*n;break;case"ZXY":this._x=r*x*u-a*h*n,this._y=a*h*u+r*x*n,this._z=a*x*n+r*h*u,this._w=a*x*u-r*h*n;break;case"ZYX":this._x=r*x*u-a*h*n,this._y=a*h*u+r*x*n,this._z=a*x*n-r*h*u,this._w=a*x*u+r*h*n;break;case"YZX":this._x=r*x*u+a*h*n,this._y=a*h*u+r*x*n,this._z=a*x*n-r*h*u,this._w=a*x*u-r*h*n;break;case"XZY":this._x=r*x*u-a*h*n,this._y=a*h*u-r*x*n,this._z=a*x*n+r*h*u,this._w=a*x*u+r*h*n;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const f=i/2,y=Math.sin(f);return this._x=t.x*y,this._y=t.y*y,this._z=t.z*y,this._w=Math.cos(f),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,f=i[0],y=i[4],C=i[8],o=i[1],E=i[5],e=i[9],a=i[2],x=i[6],u=i[10],r=f+E+u;if(r>0){const h=.5/Math.sqrt(r+1);this._w=.25/h,this._x=(x-e)*h,this._y=(C-a)*h,this._z=(o-y)*h}else if(f>E&&f>u){const h=2*Math.sqrt(1+f-E-u);this._w=(x-e)/h,this._x=.25*h,this._y=(y+o)/h,this._z=(C+a)/h}else if(E>u){const h=2*Math.sqrt(1+E-f-u);this._w=(C-a)/h,this._x=(y+o)/h,this._y=.25*h,this._z=(e+x)/h}else{const h=2*Math.sqrt(1+u-f-E);this._w=(o-y)/h,this._x=(C+a)/h,this._y=(e+x)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let f=t.dot(i)+1;return f<Number.EPSILON?(f=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=f):(this._x=0,this._y=-t.z,this._z=t.y,this._w=f)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=f),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(qe(this.dot(t),-1,1)))}rotateTowards(t,i){const f=this.angleTo(t);if(f===0)return this;const y=Math.min(1,i/f);return this.slerp(t,y),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const f=t._x,y=t._y,C=t._z,o=t._w,E=i._x,e=i._y,a=i._z,x=i._w;return this._x=f*x+o*E+y*a-C*e,this._y=y*x+o*e+C*E-f*a,this._z=C*x+o*a+f*e-y*E,this._w=o*x-f*E-y*e-C*a,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);const f=this._x,y=this._y,C=this._z,o=this._w;let E=o*t._w+f*t._x+y*t._y+C*t._z;if(E<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,E=-E):this.copy(t),E>=1)return this._w=o,this._x=f,this._y=y,this._z=C,this;const e=1-E*E;if(e<=Number.EPSILON){const h=1-i;return this._w=h*o+i*this._w,this._x=h*f+i*this._x,this._y=h*y+i*this._y,this._z=h*C+i*this._z,this.normalize(),this}const a=Math.sqrt(e),x=Math.atan2(a,E),u=Math.sin((1-i)*x)/a,r=Math.sin(i*x)/a;return this._w=o*u+this._w*r,this._x=f*u+this._x*r,this._y=y*u+this._y*r,this._z=C*u+this._z*r,this._onChangeCallback(),this}slerpQuaternions(t,i,f){return this.copy(t).slerp(i,f)}random(){const t=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),f=Math.random(),y=Math.sqrt(1-f),C=Math.sqrt(f);return this.set(y*Math.sin(t),y*Math.cos(t),C*Math.sin(i),C*Math.cos(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};class St{constructor(t=0,i=0,f=0){St.prototype.isVector3=!0,this.x=t,this.y=i,this.z=f}set(t,i,f){return f===void 0&&(f=this.z),this.x=t,this.y=i,this.z=f,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(sT.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(sT.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,f=this.y,y=this.z,C=t.elements;return this.x=C[0]*i+C[3]*f+C[6]*y,this.y=C[1]*i+C[4]*f+C[7]*y,this.z=C[2]*i+C[5]*f+C[8]*y,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,f=this.y,y=this.z,C=t.elements,o=1/(C[3]*i+C[7]*f+C[11]*y+C[15]);return this.x=(C[0]*i+C[4]*f+C[8]*y+C[12])*o,this.y=(C[1]*i+C[5]*f+C[9]*y+C[13])*o,this.z=(C[2]*i+C[6]*f+C[10]*y+C[14])*o,this}applyQuaternion(t){const i=this.x,f=this.y,y=this.z,C=t.x,o=t.y,E=t.z,e=t.w,a=2*(o*y-E*f),x=2*(E*i-C*y),u=2*(C*f-o*i);return this.x=i+e*a+o*u-E*x,this.y=f+e*x+E*a-C*u,this.z=y+e*u+C*x-o*a,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,f=this.y,y=this.z,C=t.elements;return this.x=C[0]*i+C[4]*f+C[8]*y,this.y=C[1]*i+C[5]*f+C[9]*y,this.z=C[2]*i+C[6]*f+C[10]*y,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=qe(this.x,t.x,i.x),this.y=qe(this.y,t.y,i.y),this.z=qe(this.z,t.z,i.z),this}clampScalar(t,i){return this.x=qe(this.x,t,i),this.y=qe(this.y,t,i),this.z=qe(this.z,t,i),this}clampLength(t,i){const f=this.length();return this.divideScalar(f||1).multiplyScalar(qe(f,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,f){return this.x=t.x+(i.x-t.x)*f,this.y=t.y+(i.y-t.y)*f,this.z=t.z+(i.z-t.z)*f,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const f=t.x,y=t.y,C=t.z,o=i.x,E=i.y,e=i.z;return this.x=y*e-C*E,this.y=C*o-f*e,this.z=f*E-y*o,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const f=t.dot(this)/i;return this.copy(t).multiplyScalar(f)}projectOnPlane(t){return pm.copy(this).projectOnVector(t),this.sub(pm)}reflect(t){return this.sub(pm.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const f=this.dot(t)/i;return Math.acos(qe(f,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,f=this.y-t.y,y=this.z-t.z;return i*i+f*f+y*y}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,f){const y=Math.sin(i)*t;return this.x=y*Math.sin(f),this.y=Math.cos(i)*t,this.z=y*Math.cos(f),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,f){return this.x=t*Math.sin(i),this.y=f,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),f=this.setFromMatrixColumn(t,1).length(),y=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=f,this.z=y,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,i=Math.random()*2-1,f=Math.sqrt(1-i*i);return this.x=f*Math.cos(t),this.y=i,this.z=f*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const pm=new St,sT=new kc;class $c{constructor(t=new St(1/0,1/0,1/0),i=new St(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){this.makeEmpty();for(let i=0,f=t.length;i<f;i+=3)this.expandByPoint(ar.fromArray(t,i));return this}setFromBufferAttribute(t){this.makeEmpty();for(let i=0,f=t.count;i<f;i++)this.expandByPoint(ar.fromBufferAttribute(t,i));return this}setFromPoints(t){this.makeEmpty();for(let i=0,f=t.length;i<f;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const f=ar.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(f),this.max.copy(t).add(f),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);const f=t.geometry;if(f!==void 0){const C=f.getAttribute("position");if(i===!0&&C!==void 0&&t.isInstancedMesh!==!0)for(let o=0,E=C.count;o<E;o++)t.isMesh===!0?t.getVertexPosition(o,ar):ar.fromBufferAttribute(C,o),ar.applyMatrix4(t.matrixWorld),this.expandByPoint(ar);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),bd.copy(t.boundingBox)):(f.boundingBox===null&&f.computeBoundingBox(),bd.copy(f.boundingBox)),bd.applyMatrix4(t.matrixWorld),this.union(bd)}const y=t.children;for(let C=0,o=y.length;C<o;C++)this.expandByObject(y[C],i);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ar),ar.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,f;return t.normal.x>0?(i=t.normal.x*this.min.x,f=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,f=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,f+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,f+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,f+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,f+=t.normal.z*this.min.z),i<=-t.constant&&f>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(bf),Id.subVectors(this.max,bf),Rh.subVectors(t.a,bf),Ph.subVectors(t.b,bf),bh.subVectors(t.c,bf),ao.subVectors(Ph,Rh),oo.subVectors(bh,Ph),rl.subVectors(Rh,bh);let i=[0,-ao.z,ao.y,0,-oo.z,oo.y,0,-rl.z,rl.y,ao.z,0,-ao.x,oo.z,0,-oo.x,rl.z,0,-rl.x,-ao.y,ao.x,0,-oo.y,oo.x,0,-rl.y,rl.x,0];return!vm(i,Rh,Ph,bh,Id)||(i=[1,0,0,0,1,0,0,0,1],!vm(i,Rh,Ph,bh,Id))?!1:(Ld.crossVectors(ao,oo),i=[Ld.x,Ld.y,Ld.z],vm(i,Rh,Ph,bh,Id))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ar).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(ar).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(fa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),fa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),fa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),fa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),fa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),fa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),fa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),fa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(fa),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const fa=[new St,new St,new St,new St,new St,new St,new St,new St],ar=new St,bd=new $c,Rh=new St,Ph=new St,bh=new St,ao=new St,oo=new St,rl=new St,bf=new St,Id=new St,Ld=new St,al=new St;function vm(v,t,i,f,y){for(let C=0,o=v.length-3;C<=o;C+=3){al.fromArray(v,C);const E=y.x*Math.abs(al.x)+y.y*Math.abs(al.y)+y.z*Math.abs(al.z),e=t.dot(al),a=i.dot(al),x=f.dot(al);if(Math.max(-Math.max(e,a,x),Math.min(e,a,x))>E)return!1}return!0}const E4=new $c,If=new St,mm=new St;class Ox{constructor(t=new St,i=-1){this.isSphere=!0,this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const f=this.center;i!==void 0?f.copy(i):E4.setFromPoints(t).getCenter(f);let y=0;for(let C=0,o=t.length;C<o;C++)y=Math.max(y,f.distanceToSquared(t[C]));return this.radius=Math.sqrt(y),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const f=this.center.distanceToSquared(t);return i.copy(t),f>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;If.subVectors(t,this.center);const i=If.lengthSq();if(i>this.radius*this.radius){const f=Math.sqrt(i),y=(f-this.radius)*.5;this.center.addScaledVector(If,y/f),this.radius+=y}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(mm.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(If.copy(t.center).add(mm)),this.expandByPoint(If.copy(t.center).sub(mm))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ca=new St,gm=new St,Fd=new St,lo=new St,xm=new St,Dd=new St,ym=new St;let S4=class{constructor(t=new St,i=new St(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ca)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);const f=i.dot(this.direction);return f<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,f)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=ca.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(ca.copy(this.origin).addScaledVector(this.direction,i),ca.distanceToSquared(t))}distanceSqToSegment(t,i,f,y){gm.copy(t).add(i).multiplyScalar(.5),Fd.copy(i).sub(t).normalize(),lo.copy(this.origin).sub(gm);const C=t.distanceTo(i)*.5,o=-this.direction.dot(Fd),E=lo.dot(this.direction),e=-lo.dot(Fd),a=lo.lengthSq(),x=Math.abs(1-o*o);let u,r,h,n;if(x>0)if(u=o*e-E,r=o*E-e,n=C*x,u>=0)if(r>=-n)if(r<=n){const l=1/x;u*=l,r*=l,h=u*(u+o*r+2*E)+r*(o*u+r+2*e)+a}else r=C,u=Math.max(0,-(o*r+E)),h=-u*u+r*(r+2*e)+a;else r=-C,u=Math.max(0,-(o*r+E)),h=-u*u+r*(r+2*e)+a;else r<=-n?(u=Math.max(0,-(-o*C+E)),r=u>0?-C:Math.min(Math.max(-C,-e),C),h=-u*u+r*(r+2*e)+a):r<=n?(u=0,r=Math.min(Math.max(-C,-e),C),h=r*(r+2*e)+a):(u=Math.max(0,-(o*C+E)),r=u>0?C:Math.min(Math.max(-C,-e),C),h=-u*u+r*(r+2*e)+a);else r=o>0?-C:C,u=Math.max(0,-(o*r+E)),h=-u*u+r*(r+2*e)+a;return f&&f.copy(this.origin).addScaledVector(this.direction,u),y&&y.copy(gm).addScaledVector(Fd,r),h}intersectSphere(t,i){ca.subVectors(t.center,this.origin);const f=ca.dot(this.direction),y=ca.dot(ca)-f*f,C=t.radius*t.radius;if(y>C)return null;const o=Math.sqrt(C-y),E=f-o,e=f+o;return e<0?null:E<0?this.at(e,i):this.at(E,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;const f=-(this.origin.dot(t.normal)+t.constant)/i;return f>=0?f:null}intersectPlane(t,i){const f=this.distanceToPlane(t);return f===null?null:this.at(f,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return i===0||t.normal.dot(this.direction)*i<0}intersectBox(t,i){let f,y,C,o,E,e;const a=1/this.direction.x,x=1/this.direction.y,u=1/this.direction.z,r=this.origin;return a>=0?(f=(t.min.x-r.x)*a,y=(t.max.x-r.x)*a):(f=(t.max.x-r.x)*a,y=(t.min.x-r.x)*a),x>=0?(C=(t.min.y-r.y)*x,o=(t.max.y-r.y)*x):(C=(t.max.y-r.y)*x,o=(t.min.y-r.y)*x),f>o||C>y||((C>f||isNaN(f))&&(f=C),(o<y||isNaN(y))&&(y=o),u>=0?(E=(t.min.z-r.z)*u,e=(t.max.z-r.z)*u):(E=(t.max.z-r.z)*u,e=(t.min.z-r.z)*u),f>e||E>y)||((E>f||f!==f)&&(f=E),(e<y||y!==y)&&(y=e),y<0)?null:this.at(f>=0?f:y,i)}intersectsBox(t){return this.intersectBox(t,ca)!==null}intersectTriangle(t,i,f,y,C){xm.subVectors(i,t),Dd.subVectors(f,t),ym.crossVectors(xm,Dd);let o=this.direction.dot(ym),E;if(o>0){if(y)return null;E=1}else if(o<0)E=-1,o=-o;else return null;lo.subVectors(this.origin,t);const e=E*this.direction.dot(Dd.crossVectors(lo,Dd));if(e<0)return null;const a=E*this.direction.dot(xm.cross(lo));if(a<0||e+a>o)return null;const x=-E*lo.dot(ym);return x<0?null:this.at(x/o,C)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class Vi{constructor(t,i,f,y,C,o,E,e,a,x,u,r,h,n,l,c){Vi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,i,f,y,C,o,E,e,a,x,u,r,h,n,l,c)}set(t,i,f,y,C,o,E,e,a,x,u,r,h,n,l,c){const s=this.elements;return s[0]=t,s[4]=i,s[8]=f,s[12]=y,s[1]=C,s[5]=o,s[9]=E,s[13]=e,s[2]=a,s[6]=x,s[10]=u,s[14]=r,s[3]=h,s[7]=n,s[11]=l,s[15]=c,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Vi().fromArray(this.elements)}copy(t){const i=this.elements,f=t.elements;return i[0]=f[0],i[1]=f[1],i[2]=f[2],i[3]=f[3],i[4]=f[4],i[5]=f[5],i[6]=f[6],i[7]=f[7],i[8]=f[8],i[9]=f[9],i[10]=f[10],i[11]=f[11],i[12]=f[12],i[13]=f[13],i[14]=f[14],i[15]=f[15],this}copyPosition(t){const i=this.elements,f=t.elements;return i[12]=f[12],i[13]=f[13],i[14]=f[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,f){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),f.setFromMatrixColumn(this,2),this}makeBasis(t,i,f){return this.set(t.x,i.x,f.x,0,t.y,i.y,f.y,0,t.z,i.z,f.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,f=t.elements,y=1/Ih.setFromMatrixColumn(t,0).length(),C=1/Ih.setFromMatrixColumn(t,1).length(),o=1/Ih.setFromMatrixColumn(t,2).length();return i[0]=f[0]*y,i[1]=f[1]*y,i[2]=f[2]*y,i[3]=0,i[4]=f[4]*C,i[5]=f[5]*C,i[6]=f[6]*C,i[7]=0,i[8]=f[8]*o,i[9]=f[9]*o,i[10]=f[10]*o,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){const i=this.elements,f=t.x,y=t.y,C=t.z,o=Math.cos(f),E=Math.sin(f),e=Math.cos(y),a=Math.sin(y),x=Math.cos(C),u=Math.sin(C);if(t.order==="XYZ"){const r=o*x,h=o*u,n=E*x,l=E*u;i[0]=e*x,i[4]=-e*u,i[8]=a,i[1]=h+n*a,i[5]=r-l*a,i[9]=-E*e,i[2]=l-r*a,i[6]=n+h*a,i[10]=o*e}else if(t.order==="YXZ"){const r=e*x,h=e*u,n=a*x,l=a*u;i[0]=r+l*E,i[4]=n*E-h,i[8]=o*a,i[1]=o*u,i[5]=o*x,i[9]=-E,i[2]=h*E-n,i[6]=l+r*E,i[10]=o*e}else if(t.order==="ZXY"){const r=e*x,h=e*u,n=a*x,l=a*u;i[0]=r-l*E,i[4]=-o*u,i[8]=n+h*E,i[1]=h+n*E,i[5]=o*x,i[9]=l-r*E,i[2]=-o*a,i[6]=E,i[10]=o*e}else if(t.order==="ZYX"){const r=o*x,h=o*u,n=E*x,l=E*u;i[0]=e*x,i[4]=n*a-h,i[8]=r*a+l,i[1]=e*u,i[5]=l*a+r,i[9]=h*a-n,i[2]=-a,i[6]=E*e,i[10]=o*e}else if(t.order==="YZX"){const r=o*e,h=o*a,n=E*e,l=E*a;i[0]=e*x,i[4]=l-r*u,i[8]=n*u+h,i[1]=u,i[5]=o*x,i[9]=-E*x,i[2]=-a*x,i[6]=h*u+n,i[10]=r-l*u}else if(t.order==="XZY"){const r=o*e,h=o*a,n=E*e,l=E*a;i[0]=e*x,i[4]=-u,i[8]=a*x,i[1]=r*u+l,i[5]=o*x,i[9]=h*u-n,i[2]=n*u-h,i[6]=E*x,i[10]=l*u+r}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(C4,t,A4)}lookAt(t,i,f){const y=this.elements;return xs.subVectors(t,i),xs.lengthSq()===0&&(xs.z=1),xs.normalize(),ho.crossVectors(f,xs),ho.lengthSq()===0&&(Math.abs(f.z)===1?xs.x+=1e-4:xs.z+=1e-4,xs.normalize(),ho.crossVectors(f,xs)),ho.normalize(),Od.crossVectors(xs,ho),y[0]=ho.x,y[4]=Od.x,y[8]=xs.x,y[1]=ho.y,y[5]=Od.y,y[9]=xs.y,y[2]=ho.z,y[6]=Od.z,y[10]=xs.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const f=t.elements,y=i.elements,C=this.elements,o=f[0],E=f[4],e=f[8],a=f[12],x=f[1],u=f[5],r=f[9],h=f[13],n=f[2],l=f[6],c=f[10],s=f[14],d=f[3],m=f[7],p=f[11],g=f[15],T=y[0],S=y[4],w=y[8],A=y[12],M=y[1],R=y[5],P=y[9],b=y[13],F=y[2],I=y[6],L=y[10],D=y[14],O=y[3],z=y[7],W=y[11],X=y[15];return C[0]=o*T+E*M+e*F+a*O,C[4]=o*S+E*R+e*I+a*z,C[8]=o*w+E*P+e*L+a*W,C[12]=o*A+E*b+e*D+a*X,C[1]=x*T+u*M+r*F+h*O,C[5]=x*S+u*R+r*I+h*z,C[9]=x*w+u*P+r*L+h*W,C[13]=x*A+u*b+r*D+h*X,C[2]=n*T+l*M+c*F+s*O,C[6]=n*S+l*R+c*I+s*z,C[10]=n*w+l*P+c*L+s*W,C[14]=n*A+l*b+c*D+s*X,C[3]=d*T+m*M+p*F+g*O,C[7]=d*S+m*R+p*I+g*z,C[11]=d*w+m*P+p*L+g*W,C[15]=d*A+m*b+p*D+g*X,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],f=t[4],y=t[8],C=t[12],o=t[1],E=t[5],e=t[9],a=t[13],x=t[2],u=t[6],r=t[10],h=t[14],n=t[3],l=t[7],c=t[11],s=t[15];return n*(+C*e*u-y*a*u-C*E*r+f*a*r+y*E*h-f*e*h)+l*(+i*e*h-i*a*r+C*o*r-y*o*h+y*a*x-C*e*x)+c*(+i*a*u-i*E*h-C*o*u+f*o*h+C*E*x-f*a*x)+s*(-y*E*x-i*e*u+i*E*r+y*o*u-f*o*r+f*e*x)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,f){const y=this.elements;return t.isVector3?(y[12]=t.x,y[13]=t.y,y[14]=t.z):(y[12]=t,y[13]=i,y[14]=f),this}invert(){const t=this.elements,i=t[0],f=t[1],y=t[2],C=t[3],o=t[4],E=t[5],e=t[6],a=t[7],x=t[8],u=t[9],r=t[10],h=t[11],n=t[12],l=t[13],c=t[14],s=t[15],d=u*c*a-l*r*a+l*e*h-E*c*h-u*e*s+E*r*s,m=n*r*a-x*c*a-n*e*h+o*c*h+x*e*s-o*r*s,p=x*l*a-n*u*a+n*E*h-o*l*h-x*E*s+o*u*s,g=n*u*e-x*l*e-n*E*r+o*l*r+x*E*c-o*u*c,T=i*d+f*m+y*p+C*g;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/T;return t[0]=d*S,t[1]=(l*r*C-u*c*C-l*y*h+f*c*h+u*y*s-f*r*s)*S,t[2]=(E*c*C-l*e*C+l*y*a-f*c*a-E*y*s+f*e*s)*S,t[3]=(u*e*C-E*r*C-u*y*a+f*r*a+E*y*h-f*e*h)*S,t[4]=m*S,t[5]=(x*c*C-n*r*C+n*y*h-i*c*h-x*y*s+i*r*s)*S,t[6]=(n*e*C-o*c*C-n*y*a+i*c*a+o*y*s-i*e*s)*S,t[7]=(o*r*C-x*e*C+x*y*a-i*r*a-o*y*h+i*e*h)*S,t[8]=p*S,t[9]=(n*u*C-x*l*C-n*f*h+i*l*h+x*f*s-i*u*s)*S,t[10]=(o*l*C-n*E*C+n*f*a-i*l*a-o*f*s+i*E*s)*S,t[11]=(x*E*C-o*u*C-x*f*a+i*u*a+o*f*h-i*E*h)*S,t[12]=g*S,t[13]=(x*l*y-n*u*y+n*f*r-i*l*r-x*f*c+i*u*c)*S,t[14]=(n*E*y-o*l*y-n*f*e+i*l*e+o*f*c-i*E*c)*S,t[15]=(o*u*y-x*E*y+x*f*e-i*u*e-o*f*r+i*E*r)*S,this}scale(t){const i=this.elements,f=t.x,y=t.y,C=t.z;return i[0]*=f,i[4]*=y,i[8]*=C,i[1]*=f,i[5]*=y,i[9]*=C,i[2]*=f,i[6]*=y,i[10]*=C,i[3]*=f,i[7]*=y,i[11]*=C,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],f=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],y=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,f,y))}makeTranslation(t,i,f){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,i,0,0,1,f,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),f=Math.sin(t);return this.set(1,0,0,0,0,i,-f,0,0,f,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),f=Math.sin(t);return this.set(i,0,f,0,0,1,0,0,-f,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),f=Math.sin(t);return this.set(i,-f,0,0,f,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const f=Math.cos(i),y=Math.sin(i),C=1-f,o=t.x,E=t.y,e=t.z,a=C*o,x=C*E;return this.set(a*o+f,a*E-y*e,a*e+y*E,0,a*E+y*e,x*E+f,x*e-y*o,0,a*e-y*E,x*e+y*o,C*e*e+f,0,0,0,0,1),this}makeScale(t,i,f){return this.set(t,0,0,0,0,i,0,0,0,0,f,0,0,0,0,1),this}makeShear(t,i,f,y,C,o){return this.set(1,f,C,0,t,1,o,0,i,y,1,0,0,0,0,1),this}compose(t,i,f){const y=this.elements,C=i._x,o=i._y,E=i._z,e=i._w,a=C+C,x=o+o,u=E+E,r=C*a,h=C*x,n=C*u,l=o*x,c=o*u,s=E*u,d=e*a,m=e*x,p=e*u,g=f.x,T=f.y,S=f.z;return y[0]=(1-(l+s))*g,y[1]=(h+p)*g,y[2]=(n-m)*g,y[3]=0,y[4]=(h-p)*T,y[5]=(1-(r+s))*T,y[6]=(c+d)*T,y[7]=0,y[8]=(n+m)*S,y[9]=(c-d)*S,y[10]=(1-(r+l))*S,y[11]=0,y[12]=t.x,y[13]=t.y,y[14]=t.z,y[15]=1,this}decompose(t,i,f){const y=this.elements;let C=Ih.set(y[0],y[1],y[2]).length();const o=Ih.set(y[4],y[5],y[6]).length(),E=Ih.set(y[8],y[9],y[10]).length();this.determinant()<0&&(C=-C),t.x=y[12],t.y=y[13],t.z=y[14],or.copy(this);const a=1/C,x=1/o,u=1/E;return or.elements[0]*=a,or.elements[1]*=a,or.elements[2]*=a,or.elements[4]*=x,or.elements[5]*=x,or.elements[6]*=x,or.elements[8]*=u,or.elements[9]*=u,or.elements[10]*=u,i.setFromRotationMatrix(or),f.x=C,f.y=o,f.z=E,this}makePerspective(t,i,f,y,C,o,E=Ia){const e=this.elements,a=2*C/(i-t),x=2*C/(f-y),u=(i+t)/(i-t),r=(f+y)/(f-y);let h,n;if(E===Ia)h=-(o+C)/(o-C),n=-2*o*C/(o-C);else if(E===Bp)h=-o/(o-C),n=-o*C/(o-C);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+E);return e[0]=a,e[4]=0,e[8]=u,e[12]=0,e[1]=0,e[5]=x,e[9]=r,e[13]=0,e[2]=0,e[6]=0,e[10]=h,e[14]=n,e[3]=0,e[7]=0,e[11]=-1,e[15]=0,this}makeOrthographic(t,i,f,y,C,o,E=Ia){const e=this.elements,a=1/(i-t),x=1/(f-y),u=1/(o-C),r=(i+t)*a,h=(f+y)*x;let n,l;if(E===Ia)n=(o+C)*u,l=-2*u;else if(E===Bp)n=C*u,l=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+E);return e[0]=2*a,e[4]=0,e[8]=0,e[12]=-r,e[1]=0,e[5]=2*x,e[9]=0,e[13]=-h,e[2]=0,e[6]=0,e[10]=l,e[14]=-n,e[3]=0,e[7]=0,e[11]=0,e[15]=1,this}equals(t){const i=this.elements,f=t.elements;for(let y=0;y<16;y++)if(i[y]!==f[y])return!1;return!0}fromArray(t,i=0){for(let f=0;f<16;f++)this.elements[f]=t[f+i];return this}toArray(t=[],i=0){const f=this.elements;return t[i]=f[0],t[i+1]=f[1],t[i+2]=f[2],t[i+3]=f[3],t[i+4]=f[4],t[i+5]=f[5],t[i+6]=f[6],t[i+7]=f[7],t[i+8]=f[8],t[i+9]=f[9],t[i+10]=f[10],t[i+11]=f[11],t[i+12]=f[12],t[i+13]=f[13],t[i+14]=f[14],t[i+15]=f[15],t}}const Ih=new St,or=new Vi,C4=new St(0,0,0),A4=new St(1,1,1),ho=new St,Od=new St,xs=new St,rT=new Vi,aT=new kc;class qr{constructor(t=0,i=0,f=0,y=qr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=f,this._order=y}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,f,y=this._order){return this._x=t,this._y=i,this._z=f,this._order=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,f=!0){const y=t.elements,C=y[0],o=y[4],E=y[8],e=y[1],a=y[5],x=y[9],u=y[2],r=y[6],h=y[10];switch(i){case"XYZ":this._y=Math.asin(qe(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(-x,h),this._z=Math.atan2(-o,C)):(this._x=Math.atan2(r,a),this._z=0);break;case"YXZ":this._x=Math.asin(-qe(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(E,h),this._z=Math.atan2(e,a)):(this._y=Math.atan2(-u,C),this._z=0);break;case"ZXY":this._x=Math.asin(qe(r,-1,1)),Math.abs(r)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,a)):(this._y=0,this._z=Math.atan2(e,C));break;case"ZYX":this._y=Math.asin(-qe(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(r,h),this._z=Math.atan2(e,C)):(this._x=0,this._z=Math.atan2(-o,a));break;case"YZX":this._z=Math.asin(qe(e,-1,1)),Math.abs(e)<.9999999?(this._x=Math.atan2(-x,a),this._y=Math.atan2(-u,C)):(this._x=0,this._y=Math.atan2(E,h));break;case"XZY":this._z=Math.asin(-qe(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(r,a),this._y=Math.atan2(E,C)):(this._x=Math.atan2(-x,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,f===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,f){return rT.makeRotationFromQuaternion(t),this.setFromRotationMatrix(rT,i,f)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return aT.setFromEuler(this),this.setFromQuaternion(aT,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}qr.DEFAULT_ORDER="XYZ";class OC{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let w4=0;const oT=new St,Lh=new kc,da=new Vi,Nd=new St,Lf=new St,M4=new St,R4=new kc,lT=new St(1,0,0),hT=new St(0,1,0),uT=new St(0,0,1),fT={type:"added"},P4={type:"removed"},Fh={type:"childadded",child:null},Tm={type:"childremoved",child:null};class Yn extends Ku{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:w4++}),this.uuid=Yc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yn.DEFAULT_UP.clone();const t=new St,i=new qr,f=new kc,y=new St(1,1,1);function C(){f.setFromEuler(i,!1)}function o(){i.setFromQuaternion(f,void 0,!1)}i._onChange(C),f._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:f},scale:{configurable:!0,enumerable:!0,value:y},modelViewMatrix:{value:new Vi},normalMatrix:{value:new Be}}),this.matrix=new Vi,this.matrixWorld=new Vi,this.matrixAutoUpdate=Yn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new OC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Lh.setFromAxisAngle(t,i),this.quaternion.multiply(Lh),this}rotateOnWorldAxis(t,i){return Lh.setFromAxisAngle(t,i),this.quaternion.premultiply(Lh),this}rotateX(t){return this.rotateOnAxis(lT,t)}rotateY(t){return this.rotateOnAxis(hT,t)}rotateZ(t){return this.rotateOnAxis(uT,t)}translateOnAxis(t,i){return oT.copy(t).applyQuaternion(this.quaternion),this.position.add(oT.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(lT,t)}translateY(t){return this.translateOnAxis(hT,t)}translateZ(t){return this.translateOnAxis(uT,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(da.copy(this.matrixWorld).invert())}lookAt(t,i,f){t.isVector3?Nd.copy(t):Nd.set(t,i,f);const y=this.parent;this.updateWorldMatrix(!0,!1),Lf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?da.lookAt(Lf,Nd,this.up):da.lookAt(Nd,Lf,this.up),this.quaternion.setFromRotationMatrix(da),y&&(da.extractRotation(y.matrixWorld),Lh.setFromRotationMatrix(da),this.quaternion.premultiply(Lh.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(fT),Fh.child=t,this.dispatchEvent(Fh),Fh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}const i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(P4),Tm.child=t,this.dispatchEvent(Tm),Tm.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),da.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),da.multiply(t.parent.matrixWorld)),t.applyMatrix4(da),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(fT),Fh.child=t,this.dispatchEvent(Fh),Fh.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let f=0,y=this.children.length;f<y;f++){const o=this.children[f].getObjectByProperty(t,i);if(o!==void 0)return o}}getObjectsByProperty(t,i,f=[]){this[t]===i&&f.push(this);const y=this.children;for(let C=0,o=y.length;C<o;C++)y[C].getObjectsByProperty(t,i,f);return f}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lf,t,M4),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lf,R4,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let f=0,y=i.length;f<y;f++)i[f].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const i=this.children;for(let f=0,y=i.length;f<y;f++)i[f].traverseVisible(t)}traverseAncestors(t){const i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let f=0,y=i.length;f<y;f++)i[f].updateMatrixWorld(t)}updateWorldMatrix(t,i){const f=this.parent;if(t===!0&&f!==null&&f.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){const y=this.children;for(let C=0,o=y.length;C<o;C++)y[C].updateWorldMatrix(!1,!0)}}toJSON(t){const i=t===void 0||typeof t=="string",f={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},f.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const y={};y.uuid=this.uuid,y.type=this.type,this.name!==""&&(y.name=this.name),this.castShadow===!0&&(y.castShadow=!0),this.receiveShadow===!0&&(y.receiveShadow=!0),this.visible===!1&&(y.visible=!1),this.frustumCulled===!1&&(y.frustumCulled=!1),this.renderOrder!==0&&(y.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(y.userData=this.userData),y.layers=this.layers.mask,y.matrix=this.matrix.toArray(),y.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(y.matrixAutoUpdate=!1),this.isInstancedMesh&&(y.type="InstancedMesh",y.count=this.count,y.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(y.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(y.type="BatchedMesh",y.perObjectFrustumCulled=this.perObjectFrustumCulled,y.sortObjects=this.sortObjects,y.drawRanges=this._drawRanges,y.reservedRanges=this._reservedRanges,y.visibility=this._visibility,y.active=this._active,y.bounds=this._bounds.map(E=>({boxInitialized:E.boxInitialized,boxMin:E.box.min.toArray(),boxMax:E.box.max.toArray(),sphereInitialized:E.sphereInitialized,sphereRadius:E.sphere.radius,sphereCenter:E.sphere.center.toArray()})),y.maxInstanceCount=this._maxInstanceCount,y.maxVertexCount=this._maxVertexCount,y.maxIndexCount=this._maxIndexCount,y.geometryInitialized=this._geometryInitialized,y.geometryCount=this._geometryCount,y.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(y.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(y.boundingSphere={center:y.boundingSphere.center.toArray(),radius:y.boundingSphere.radius}),this.boundingBox!==null&&(y.boundingBox={min:y.boundingBox.min.toArray(),max:y.boundingBox.max.toArray()}));function C(E,e){return E[e.uuid]===void 0&&(E[e.uuid]=e.toJSON(t)),e.uuid}if(this.isScene)this.background&&(this.background.isColor?y.background=this.background.toJSON():this.background.isTexture&&(y.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(y.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){y.geometry=C(t.geometries,this.geometry);const E=this.geometry.parameters;if(E!==void 0&&E.shapes!==void 0){const e=E.shapes;if(Array.isArray(e))for(let a=0,x=e.length;a<x;a++){const u=e[a];C(t.shapes,u)}else C(t.shapes,e)}}if(this.isSkinnedMesh&&(y.bindMode=this.bindMode,y.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(C(t.skeletons,this.skeleton),y.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const E=[];for(let e=0,a=this.material.length;e<a;e++)E.push(C(t.materials,this.material[e]));y.material=E}else y.material=C(t.materials,this.material);if(this.children.length>0){y.children=[];for(let E=0;E<this.children.length;E++)y.children.push(this.children[E].toJSON(t).object)}if(this.animations.length>0){y.animations=[];for(let E=0;E<this.animations.length;E++){const e=this.animations[E];y.animations.push(C(t.animations,e))}}if(i){const E=o(t.geometries),e=o(t.materials),a=o(t.textures),x=o(t.images),u=o(t.shapes),r=o(t.skeletons),h=o(t.animations),n=o(t.nodes);E.length>0&&(f.geometries=E),e.length>0&&(f.materials=e),a.length>0&&(f.textures=a),x.length>0&&(f.images=x),u.length>0&&(f.shapes=u),r.length>0&&(f.skeletons=r),h.length>0&&(f.animations=h),n.length>0&&(f.nodes=n)}return f.object=y,f;function o(E){const e=[];for(const a in E){const x=E[a];delete x.metadata,e.push(x)}return e}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let f=0;f<t.children.length;f++){const y=t.children[f];this.add(y.clone())}return this}}Yn.DEFAULT_UP=new St(0,1,0);Yn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const lr=new St,pa=new St,Em=new St,va=new St,Dh=new St,Oh=new St,cT=new St,Sm=new St,Cm=new St,Am=new St,wm=new gi,Mm=new gi,Rm=new gi;class cr{constructor(t=new St,i=new St,f=new St){this.a=t,this.b=i,this.c=f}static getNormal(t,i,f,y){y.subVectors(f,i),lr.subVectors(t,i),y.cross(lr);const C=y.lengthSq();return C>0?y.multiplyScalar(1/Math.sqrt(C)):y.set(0,0,0)}static getBarycoord(t,i,f,y,C){lr.subVectors(y,i),pa.subVectors(f,i),Em.subVectors(t,i);const o=lr.dot(lr),E=lr.dot(pa),e=lr.dot(Em),a=pa.dot(pa),x=pa.dot(Em),u=o*a-E*E;if(u===0)return C.set(0,0,0),null;const r=1/u,h=(a*e-E*x)*r,n=(o*x-E*e)*r;return C.set(1-h-n,n,h)}static containsPoint(t,i,f,y){return this.getBarycoord(t,i,f,y,va)===null?!1:va.x>=0&&va.y>=0&&va.x+va.y<=1}static getInterpolation(t,i,f,y,C,o,E,e){return this.getBarycoord(t,i,f,y,va)===null?(e.x=0,e.y=0,"z"in e&&(e.z=0),"w"in e&&(e.w=0),null):(e.setScalar(0),e.addScaledVector(C,va.x),e.addScaledVector(o,va.y),e.addScaledVector(E,va.z),e)}static getInterpolatedAttribute(t,i,f,y,C,o){return wm.setScalar(0),Mm.setScalar(0),Rm.setScalar(0),wm.fromBufferAttribute(t,i),Mm.fromBufferAttribute(t,f),Rm.fromBufferAttribute(t,y),o.setScalar(0),o.addScaledVector(wm,C.x),o.addScaledVector(Mm,C.y),o.addScaledVector(Rm,C.z),o}static isFrontFacing(t,i,f,y){return lr.subVectors(f,i),pa.subVectors(t,i),lr.cross(pa).dot(y)<0}set(t,i,f){return this.a.copy(t),this.b.copy(i),this.c.copy(f),this}setFromPointsAndIndices(t,i,f,y){return this.a.copy(t[i]),this.b.copy(t[f]),this.c.copy(t[y]),this}setFromAttributeAndIndices(t,i,f,y){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,f),this.c.fromBufferAttribute(t,y),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return lr.subVectors(this.c,this.b),pa.subVectors(this.a,this.b),lr.cross(pa).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return cr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return cr.getBarycoord(t,this.a,this.b,this.c,i)}getInterpolation(t,i,f,y,C){return cr.getInterpolation(t,this.a,this.b,this.c,i,f,y,C)}containsPoint(t){return cr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return cr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){const f=this.a,y=this.b,C=this.c;let o,E;Dh.subVectors(y,f),Oh.subVectors(C,f),Sm.subVectors(t,f);const e=Dh.dot(Sm),a=Oh.dot(Sm);if(e<=0&&a<=0)return i.copy(f);Cm.subVectors(t,y);const x=Dh.dot(Cm),u=Oh.dot(Cm);if(x>=0&&u<=x)return i.copy(y);const r=e*u-x*a;if(r<=0&&e>=0&&x<=0)return o=e/(e-x),i.copy(f).addScaledVector(Dh,o);Am.subVectors(t,C);const h=Dh.dot(Am),n=Oh.dot(Am);if(n>=0&&h<=n)return i.copy(C);const l=h*a-e*n;if(l<=0&&a>=0&&n<=0)return E=a/(a-n),i.copy(f).addScaledVector(Oh,E);const c=x*n-h*u;if(c<=0&&u-x>=0&&h-n>=0)return cT.subVectors(C,y),E=(u-x)/(u-x+(h-n)),i.copy(y).addScaledVector(cT,E);const s=1/(c+l+r);return o=l*s,E=r*s,i.copy(f).addScaledVector(Dh,o).addScaledVector(Oh,E)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const NC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},uo={h:0,s:0,l:0},Bd={h:0,s:0,l:0};function Pm(v,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?v+(t-v)*6*i:i<1/2?t:i<2/3?v+(t-v)*6*(2/3-i):v}class ui{constructor(t,i,f){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,i,f)}set(t,i,f){if(i===void 0&&f===void 0){const y=t;y&&y.isColor?this.copy(y):typeof y=="number"?this.setHex(y):typeof y=="string"&&this.setStyle(y)}else this.setRGB(t,i,f);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Xs){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,oi.toWorkingColorSpace(this,i),this}setRGB(t,i,f,y=oi.workingColorSpace){return this.r=t,this.g=i,this.b=f,oi.toWorkingColorSpace(this,y),this}setHSL(t,i,f,y=oi.workingColorSpace){if(t=u4(t,1),i=qe(i,0,1),f=qe(f,0,1),i===0)this.r=this.g=this.b=f;else{const C=f<=.5?f*(1+i):f+i-f*i,o=2*f-C;this.r=Pm(o,C,t+1/3),this.g=Pm(o,C,t),this.b=Pm(o,C,t-1/3)}return oi.toWorkingColorSpace(this,y),this}setStyle(t,i=Xs){function f(C){C!==void 0&&parseFloat(C)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let y;if(y=/^(\w+)\(([^\)]*)\)/.exec(t)){let C;const o=y[1],E=y[2];switch(o){case"rgb":case"rgba":if(C=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return f(C[4]),this.setRGB(Math.min(255,parseInt(C[1],10))/255,Math.min(255,parseInt(C[2],10))/255,Math.min(255,parseInt(C[3],10))/255,i);if(C=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return f(C[4]),this.setRGB(Math.min(100,parseInt(C[1],10))/100,Math.min(100,parseInt(C[2],10))/100,Math.min(100,parseInt(C[3],10))/100,i);break;case"hsl":case"hsla":if(C=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return f(C[4]),this.setHSL(parseFloat(C[1])/360,parseFloat(C[2])/100,parseFloat(C[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(y=/^\#([A-Fa-f\d]+)$/.exec(t)){const C=y[1],o=C.length;if(o===3)return this.setRGB(parseInt(C.charAt(0),16)/15,parseInt(C.charAt(1),16)/15,parseInt(C.charAt(2),16)/15,i);if(o===6)return this.setHex(parseInt(C,16),i);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,i);return this}setColorName(t,i=Xs){const f=NC[t.toLowerCase()];return f!==void 0?this.setHex(f,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ba(t.r),this.g=Ba(t.g),this.b=Ba(t.b),this}copyLinearToSRGB(t){return this.r=eu(t.r),this.g=eu(t.g),this.b=eu(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Xs){return oi.fromWorkingColorSpace(Wn.copy(this),t),Math.round(qe(Wn.r*255,0,255))*65536+Math.round(qe(Wn.g*255,0,255))*256+Math.round(qe(Wn.b*255,0,255))}getHexString(t=Xs){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=oi.workingColorSpace){oi.fromWorkingColorSpace(Wn.copy(this),i);const f=Wn.r,y=Wn.g,C=Wn.b,o=Math.max(f,y,C),E=Math.min(f,y,C);let e,a;const x=(E+o)/2;if(E===o)e=0,a=0;else{const u=o-E;switch(a=x<=.5?u/(o+E):u/(2-o-E),o){case f:e=(y-C)/u+(y<C?6:0);break;case y:e=(C-f)/u+2;break;case C:e=(f-y)/u+4;break}e/=6}return t.h=e,t.s=a,t.l=x,t}getRGB(t,i=oi.workingColorSpace){return oi.fromWorkingColorSpace(Wn.copy(this),i),t.r=Wn.r,t.g=Wn.g,t.b=Wn.b,t}getStyle(t=Xs){oi.fromWorkingColorSpace(Wn.copy(this),t);const i=Wn.r,f=Wn.g,y=Wn.b;return t!==Xs?`color(${t} ${i.toFixed(3)} ${f.toFixed(3)} ${y.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(f*255)},${Math.round(y*255)})`}offsetHSL(t,i,f){return this.getHSL(uo),this.setHSL(uo.h+t,uo.s+i,uo.l+f)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,f){return this.r=t.r+(i.r-t.r)*f,this.g=t.g+(i.g-t.g)*f,this.b=t.b+(i.b-t.b)*f,this}lerpHSL(t,i){this.getHSL(uo),t.getHSL(Bd);const f=fm(uo.h,Bd.h,i),y=fm(uo.s,Bd.s,i),C=fm(uo.l,Bd.l,i);return this.setHSL(f,y,C),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const i=this.r,f=this.g,y=this.b,C=t.elements;return this.r=C[0]*i+C[3]*f+C[6]*y,this.g=C[1]*i+C[4]*f+C[7]*y,this.b=C[2]*i+C[5]*f+C[8]*y,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Wn=new ui;ui.NAMES=NC;let b4=0,Kc=class extends Ku{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:b4++}),this.uuid=Yc(),this.name="",this.type="Material",this.blending=qh,this.side=Wa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=G0,this.blendDst=W0,this.blendEquation=xl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ui(0,0,0),this.blendAlpha=0,this.depthFunc=Au,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Q1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wh,this.stencilZFail=wh,this.stencilZPass=wh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const i in t){const f=t[i];if(f===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}const y=this[i];if(y===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}y&&y.isColor?y.set(f):y&&y.isVector3&&f&&f.isVector3?y.copy(f):this[i]=f}}toJSON(t){const i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{}});const f={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.color&&this.color.isColor&&(f.color=this.color.getHex()),this.roughness!==void 0&&(f.roughness=this.roughness),this.metalness!==void 0&&(f.metalness=this.metalness),this.sheen!==void 0&&(f.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(f.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(f.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(f.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(f.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(f.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(f.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(f.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(f.shininess=this.shininess),this.clearcoat!==void 0&&(f.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(f.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(f.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(f.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(f.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,f.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(f.dispersion=this.dispersion),this.iridescence!==void 0&&(f.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(f.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(f.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(f.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(f.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(f.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(f.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(f.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(f.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(f.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(f.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(f.lightMap=this.lightMap.toJSON(t).uuid,f.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(f.aoMap=this.aoMap.toJSON(t).uuid,f.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(f.bumpMap=this.bumpMap.toJSON(t).uuid,f.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(f.normalMap=this.normalMap.toJSON(t).uuid,f.normalMapType=this.normalMapType,f.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(f.displacementMap=this.displacementMap.toJSON(t).uuid,f.displacementScale=this.displacementScale,f.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(f.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(f.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(f.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(f.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(f.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(f.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(f.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(f.combine=this.combine)),this.envMapRotation!==void 0&&(f.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(f.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(f.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(f.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(f.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(f.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(f.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(f.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(f.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(f.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(f.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(f.size=this.size),this.shadowSide!==null&&(f.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(f.sizeAttenuation=this.sizeAttenuation),this.blending!==qh&&(f.blending=this.blending),this.side!==Wa&&(f.side=this.side),this.vertexColors===!0&&(f.vertexColors=!0),this.opacity<1&&(f.opacity=this.opacity),this.transparent===!0&&(f.transparent=!0),this.blendSrc!==G0&&(f.blendSrc=this.blendSrc),this.blendDst!==W0&&(f.blendDst=this.blendDst),this.blendEquation!==xl&&(f.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(f.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(f.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(f.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(f.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(f.blendAlpha=this.blendAlpha),this.depthFunc!==Au&&(f.depthFunc=this.depthFunc),this.depthTest===!1&&(f.depthTest=this.depthTest),this.depthWrite===!1&&(f.depthWrite=this.depthWrite),this.colorWrite===!1&&(f.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(f.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Q1&&(f.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(f.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(f.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==wh&&(f.stencilFail=this.stencilFail),this.stencilZFail!==wh&&(f.stencilZFail=this.stencilZFail),this.stencilZPass!==wh&&(f.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(f.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(f.rotation=this.rotation),this.polygonOffset===!0&&(f.polygonOffset=!0),this.polygonOffsetFactor!==0&&(f.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(f.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(f.linewidth=this.linewidth),this.dashSize!==void 0&&(f.dashSize=this.dashSize),this.gapSize!==void 0&&(f.gapSize=this.gapSize),this.scale!==void 0&&(f.scale=this.scale),this.dithering===!0&&(f.dithering=!0),this.alphaTest>0&&(f.alphaTest=this.alphaTest),this.alphaHash===!0&&(f.alphaHash=!0),this.alphaToCoverage===!0&&(f.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(f.premultipliedAlpha=!0),this.forceSinglePass===!0&&(f.forceSinglePass=!0),this.wireframe===!0&&(f.wireframe=!0),this.wireframeLinewidth>1&&(f.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(f.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(f.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(f.flatShading=!0),this.visible===!1&&(f.visible=!1),this.toneMapped===!1&&(f.toneMapped=!1),this.fog===!1&&(f.fog=!1),Object.keys(this.userData).length>0&&(f.userData=this.userData);function y(C){const o=[];for(const E in C){const e=C[E];delete e.metadata,o.push(e)}return o}if(i){const C=y(t.textures),o=y(t.images);C.length>0&&(f.textures=C),o.length>0&&(f.images=o)}return f}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let f=null;if(i!==null){const y=i.length;f=new Array(y);for(let C=0;C!==y;++C)f[C]=i[C].clone()}return this.clippingPlanes=f,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class BC extends Kc{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ui(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qr,this.combine=gC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const qi=new St,Ud=new ei;let I4=0;class $r{constructor(t,i,f=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:I4++}),this.name="",this.array=t,this.itemSize=i,this.count=t!==void 0?t.length/i:0,this.normalized=f,this.usage=q1,this.updateRanges=[],this.gpuType=ba,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,i,f){t*=this.itemSize,f*=i.itemSize;for(let y=0,C=this.itemSize;y<C;y++)this.array[t+y]=i.array[f+y];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let i=0,f=this.count;i<f;i++)Ud.fromBufferAttribute(this,i),Ud.applyMatrix3(t),this.setXY(i,Ud.x,Ud.y);else if(this.itemSize===3)for(let i=0,f=this.count;i<f;i++)qi.fromBufferAttribute(this,i),qi.applyMatrix3(t),this.setXYZ(i,qi.x,qi.y,qi.z);return this}applyMatrix4(t){for(let i=0,f=this.count;i<f;i++)qi.fromBufferAttribute(this,i),qi.applyMatrix4(t),this.setXYZ(i,qi.x,qi.y,qi.z);return this}applyNormalMatrix(t){for(let i=0,f=this.count;i<f;i++)qi.fromBufferAttribute(this,i),qi.applyNormalMatrix(t),this.setXYZ(i,qi.x,qi.y,qi.z);return this}transformDirection(t){for(let i=0,f=this.count;i<f;i++)qi.fromBufferAttribute(this,i),qi.transformDirection(t),this.setXYZ(i,qi.x,qi.y,qi.z);return this}set(t,i=0){return this.array.set(t,i),this}getComponent(t,i){let f=this.array[t*this.itemSize+i];return this.normalized&&(f=Pf(f,this.array)),f}setComponent(t,i,f){return this.normalized&&(f=es(f,this.array)),this.array[t*this.itemSize+i]=f,this}getX(t){let i=this.array[t*this.itemSize];return this.normalized&&(i=Pf(i,this.array)),i}setX(t,i){return this.normalized&&(i=es(i,this.array)),this.array[t*this.itemSize]=i,this}getY(t){let i=this.array[t*this.itemSize+1];return this.normalized&&(i=Pf(i,this.array)),i}setY(t,i){return this.normalized&&(i=es(i,this.array)),this.array[t*this.itemSize+1]=i,this}getZ(t){let i=this.array[t*this.itemSize+2];return this.normalized&&(i=Pf(i,this.array)),i}setZ(t,i){return this.normalized&&(i=es(i,this.array)),this.array[t*this.itemSize+2]=i,this}getW(t){let i=this.array[t*this.itemSize+3];return this.normalized&&(i=Pf(i,this.array)),i}setW(t,i){return this.normalized&&(i=es(i,this.array)),this.array[t*this.itemSize+3]=i,this}setXY(t,i,f){return t*=this.itemSize,this.normalized&&(i=es(i,this.array),f=es(f,this.array)),this.array[t+0]=i,this.array[t+1]=f,this}setXYZ(t,i,f,y){return t*=this.itemSize,this.normalized&&(i=es(i,this.array),f=es(f,this.array),y=es(y,this.array)),this.array[t+0]=i,this.array[t+1]=f,this.array[t+2]=y,this}setXYZW(t,i,f,y,C){return t*=this.itemSize,this.normalized&&(i=es(i,this.array),f=es(f,this.array),y=es(y,this.array),C=es(C,this.array)),this.array[t+0]=i,this.array[t+1]=f,this.array[t+2]=y,this.array[t+3]=C,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==q1&&(t.usage=this.usage),t}}class UC extends $r{constructor(t,i,f){super(new Uint16Array(t),i,f)}}class VC extends $r{constructor(t,i,f){super(new Uint32Array(t),i,f)}}class Ps extends $r{constructor(t,i,f){super(new Float32Array(t),i,f)}}let L4=0;const zs=new Vi,bm=new Yn,Nh=new St,ys=new $c,Ff=new $c,Tn=new St;class Za extends Ku{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:L4++}),this.uuid=Yc(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(LC(t)?VC:UC)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,i,f=0){this.groups.push({start:t,count:i,materialIndex:f})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0);const f=this.attributes.normal;if(f!==void 0){const C=new Be().getNormalMatrix(t);f.applyNormalMatrix(C),f.needsUpdate=!0}const y=this.attributes.tangent;return y!==void 0&&(y.transformDirection(t),y.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return zs.makeRotationFromQuaternion(t),this.applyMatrix4(zs),this}rotateX(t){return zs.makeRotationX(t),this.applyMatrix4(zs),this}rotateY(t){return zs.makeRotationY(t),this.applyMatrix4(zs),this}rotateZ(t){return zs.makeRotationZ(t),this.applyMatrix4(zs),this}translate(t,i,f){return zs.makeTranslation(t,i,f),this.applyMatrix4(zs),this}scale(t,i,f){return zs.makeScale(t,i,f),this.applyMatrix4(zs),this}lookAt(t){return bm.lookAt(t),bm.updateMatrix(),this.applyMatrix4(bm.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nh).negate(),this.translate(Nh.x,Nh.y,Nh.z),this}setFromPoints(t){const i=this.getAttribute("position");if(i===void 0){const f=[];for(let y=0,C=t.length;y<C;y++){const o=t[y];f.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ps(f,3))}else{const f=Math.min(t.length,i.count);for(let y=0;y<f;y++){const C=t[y];i.setXYZ(y,C.x,C.y,C.z||0)}t.length>i.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),i.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $c);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new St(-1/0,-1/0,-1/0),new St(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i)for(let f=0,y=i.length;f<y;f++){const C=i[f];ys.setFromBufferAttribute(C),this.morphTargetsRelative?(Tn.addVectors(this.boundingBox.min,ys.min),this.boundingBox.expandByPoint(Tn),Tn.addVectors(this.boundingBox.max,ys.max),this.boundingBox.expandByPoint(Tn)):(this.boundingBox.expandByPoint(ys.min),this.boundingBox.expandByPoint(ys.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ox);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new St,1/0);return}if(t){const f=this.boundingSphere.center;if(ys.setFromBufferAttribute(t),i)for(let C=0,o=i.length;C<o;C++){const E=i[C];Ff.setFromBufferAttribute(E),this.morphTargetsRelative?(Tn.addVectors(ys.min,Ff.min),ys.expandByPoint(Tn),Tn.addVectors(ys.max,Ff.max),ys.expandByPoint(Tn)):(ys.expandByPoint(Ff.min),ys.expandByPoint(Ff.max))}ys.getCenter(f);let y=0;for(let C=0,o=t.count;C<o;C++)Tn.fromBufferAttribute(t,C),y=Math.max(y,f.distanceToSquared(Tn));if(i)for(let C=0,o=i.length;C<o;C++){const E=i[C],e=this.morphTargetsRelative;for(let a=0,x=E.count;a<x;a++)Tn.fromBufferAttribute(E,a),e&&(Nh.fromBufferAttribute(t,a),Tn.add(Nh)),y=Math.max(y,f.distanceToSquared(Tn))}this.boundingSphere.radius=Math.sqrt(y),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,i=this.attributes;if(t===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const f=i.position,y=i.normal,C=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $r(new Float32Array(4*f.count),4));const o=this.getAttribute("tangent"),E=[],e=[];for(let w=0;w<f.count;w++)E[w]=new St,e[w]=new St;const a=new St,x=new St,u=new St,r=new ei,h=new ei,n=new ei,l=new St,c=new St;function s(w,A,M){a.fromBufferAttribute(f,w),x.fromBufferAttribute(f,A),u.fromBufferAttribute(f,M),r.fromBufferAttribute(C,w),h.fromBufferAttribute(C,A),n.fromBufferAttribute(C,M),x.sub(a),u.sub(a),h.sub(r),n.sub(r);const R=1/(h.x*n.y-n.x*h.y);isFinite(R)&&(l.copy(x).multiplyScalar(n.y).addScaledVector(u,-h.y).multiplyScalar(R),c.copy(u).multiplyScalar(h.x).addScaledVector(x,-n.x).multiplyScalar(R),E[w].add(l),E[A].add(l),E[M].add(l),e[w].add(c),e[A].add(c),e[M].add(c))}let d=this.groups;d.length===0&&(d=[{start:0,count:t.count}]);for(let w=0,A=d.length;w<A;++w){const M=d[w],R=M.start,P=M.count;for(let b=R,F=R+P;b<F;b+=3)s(t.getX(b+0),t.getX(b+1),t.getX(b+2))}const m=new St,p=new St,g=new St,T=new St;function S(w){g.fromBufferAttribute(y,w),T.copy(g);const A=E[w];m.copy(A),m.sub(g.multiplyScalar(g.dot(A))).normalize(),p.crossVectors(T,A);const R=p.dot(e[w])<0?-1:1;o.setXYZW(w,m.x,m.y,m.z,R)}for(let w=0,A=d.length;w<A;++w){const M=d[w],R=M.start,P=M.count;for(let b=R,F=R+P;b<F;b+=3)S(t.getX(b+0)),S(t.getX(b+1)),S(t.getX(b+2))}}computeVertexNormals(){const t=this.index,i=this.getAttribute("position");if(i!==void 0){let f=this.getAttribute("normal");if(f===void 0)f=new $r(new Float32Array(i.count*3),3),this.setAttribute("normal",f);else for(let r=0,h=f.count;r<h;r++)f.setXYZ(r,0,0,0);const y=new St,C=new St,o=new St,E=new St,e=new St,a=new St,x=new St,u=new St;if(t)for(let r=0,h=t.count;r<h;r+=3){const n=t.getX(r+0),l=t.getX(r+1),c=t.getX(r+2);y.fromBufferAttribute(i,n),C.fromBufferAttribute(i,l),o.fromBufferAttribute(i,c),x.subVectors(o,C),u.subVectors(y,C),x.cross(u),E.fromBufferAttribute(f,n),e.fromBufferAttribute(f,l),a.fromBufferAttribute(f,c),E.add(x),e.add(x),a.add(x),f.setXYZ(n,E.x,E.y,E.z),f.setXYZ(l,e.x,e.y,e.z),f.setXYZ(c,a.x,a.y,a.z)}else for(let r=0,h=i.count;r<h;r+=3)y.fromBufferAttribute(i,r+0),C.fromBufferAttribute(i,r+1),o.fromBufferAttribute(i,r+2),x.subVectors(o,C),u.subVectors(y,C),x.cross(u),f.setXYZ(r+0,x.x,x.y,x.z),f.setXYZ(r+1,x.x,x.y,x.z),f.setXYZ(r+2,x.x,x.y,x.z);this.normalizeNormals(),f.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let i=0,f=t.count;i<f;i++)Tn.fromBufferAttribute(t,i),Tn.normalize(),t.setXYZ(i,Tn.x,Tn.y,Tn.z)}toNonIndexed(){function t(E,e){const a=E.array,x=E.itemSize,u=E.normalized,r=new a.constructor(e.length*x);let h=0,n=0;for(let l=0,c=e.length;l<c;l++){E.isInterleavedBufferAttribute?h=e[l]*E.data.stride+E.offset:h=e[l]*x;for(let s=0;s<x;s++)r[n++]=a[h++]}return new $r(r,x,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new Za,f=this.index.array,y=this.attributes;for(const E in y){const e=y[E],a=t(e,f);i.setAttribute(E,a)}const C=this.morphAttributes;for(const E in C){const e=[],a=C[E];for(let x=0,u=a.length;x<u;x++){const r=a[x],h=t(r,f);e.push(h)}i.morphAttributes[E]=e}i.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let E=0,e=o.length;E<e;E++){const a=o[E];i.addGroup(a.start,a.count,a.materialIndex)}return i}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const e=this.parameters;for(const a in e)e[a]!==void 0&&(t[a]=e[a]);return t}t.data={attributes:{}};const i=this.index;i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const f=this.attributes;for(const e in f){const a=f[e];t.data.attributes[e]=a.toJSON(t.data)}const y={};let C=!1;for(const e in this.morphAttributes){const a=this.morphAttributes[e],x=[];for(let u=0,r=a.length;u<r;u++){const h=a[u];x.push(h.toJSON(t.data))}x.length>0&&(y[e]=x,C=!0)}C&&(t.data.morphAttributes=y,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const E=this.boundingSphere;return E!==null&&(t.data.boundingSphere={center:E.center.toArray(),radius:E.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=t.name;const f=t.index;f!==null&&this.setIndex(f.clone(i));const y=t.attributes;for(const a in y){const x=y[a];this.setAttribute(a,x.clone(i))}const C=t.morphAttributes;for(const a in C){const x=[],u=C[a];for(let r=0,h=u.length;r<h;r++)x.push(u[r].clone(i));this.morphAttributes[a]=x}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let a=0,x=o.length;a<x;a++){const u=o[a];this.addGroup(u.start,u.count,u.materialIndex)}const E=t.boundingBox;E!==null&&(this.boundingBox=E.clone());const e=t.boundingSphere;return e!==null&&(this.boundingSphere=e.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const dT=new Vi,ol=new S4,Vd=new Ox,pT=new St,zd=new St,Gd=new St,Wd=new St,Im=new St,Hd=new St,vT=new St,_d=new St;class hs extends Yn{constructor(t=new Za,i=new BC){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,f=Object.keys(i);if(f.length>0){const y=i[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let C=0,o=y.length;C<o;C++){const E=y[C].name||String(C);this.morphTargetInfluences.push(0),this.morphTargetDictionary[E]=C}}}}getVertexPosition(t,i){const f=this.geometry,y=f.attributes.position,C=f.morphAttributes.position,o=f.morphTargetsRelative;i.fromBufferAttribute(y,t);const E=this.morphTargetInfluences;if(C&&E){Hd.set(0,0,0);for(let e=0,a=C.length;e<a;e++){const x=E[e],u=C[e];x!==0&&(Im.fromBufferAttribute(u,t),o?Hd.addScaledVector(Im,x):Hd.addScaledVector(Im.sub(i),x))}i.add(Hd)}return i}raycast(t,i){const f=this.geometry,y=this.material,C=this.matrixWorld;y!==void 0&&(f.boundingSphere===null&&f.computeBoundingSphere(),Vd.copy(f.boundingSphere),Vd.applyMatrix4(C),ol.copy(t.ray).recast(t.near),!(Vd.containsPoint(ol.origin)===!1&&(ol.intersectSphere(Vd,pT)===null||ol.origin.distanceToSquared(pT)>(t.far-t.near)**2))&&(dT.copy(C).invert(),ol.copy(t.ray).applyMatrix4(dT),!(f.boundingBox!==null&&ol.intersectsBox(f.boundingBox)===!1)&&this._computeIntersections(t,i,ol)))}_computeIntersections(t,i,f){let y;const C=this.geometry,o=this.material,E=C.index,e=C.attributes.position,a=C.attributes.uv,x=C.attributes.uv1,u=C.attributes.normal,r=C.groups,h=C.drawRange;if(E!==null)if(Array.isArray(o))for(let n=0,l=r.length;n<l;n++){const c=r[n],s=o[c.materialIndex],d=Math.max(c.start,h.start),m=Math.min(E.count,Math.min(c.start+c.count,h.start+h.count));for(let p=d,g=m;p<g;p+=3){const T=E.getX(p),S=E.getX(p+1),w=E.getX(p+2);y=Xd(this,s,t,f,a,x,u,T,S,w),y&&(y.faceIndex=Math.floor(p/3),y.face.materialIndex=c.materialIndex,i.push(y))}}else{const n=Math.max(0,h.start),l=Math.min(E.count,h.start+h.count);for(let c=n,s=l;c<s;c+=3){const d=E.getX(c),m=E.getX(c+1),p=E.getX(c+2);y=Xd(this,o,t,f,a,x,u,d,m,p),y&&(y.faceIndex=Math.floor(c/3),i.push(y))}}else if(e!==void 0)if(Array.isArray(o))for(let n=0,l=r.length;n<l;n++){const c=r[n],s=o[c.materialIndex],d=Math.max(c.start,h.start),m=Math.min(e.count,Math.min(c.start+c.count,h.start+h.count));for(let p=d,g=m;p<g;p+=3){const T=p,S=p+1,w=p+2;y=Xd(this,s,t,f,a,x,u,T,S,w),y&&(y.faceIndex=Math.floor(p/3),y.face.materialIndex=c.materialIndex,i.push(y))}}else{const n=Math.max(0,h.start),l=Math.min(e.count,h.start+h.count);for(let c=n,s=l;c<s;c+=3){const d=c,m=c+1,p=c+2;y=Xd(this,o,t,f,a,x,u,d,m,p),y&&(y.faceIndex=Math.floor(c/3),i.push(y))}}}}function F4(v,t,i,f,y,C,o,E){let e;if(t.side===us?e=f.intersectTriangle(o,C,y,!0,E):e=f.intersectTriangle(y,C,o,t.side===Wa,E),e===null)return null;_d.copy(E),_d.applyMatrix4(v.matrixWorld);const a=i.ray.origin.distanceTo(_d);return a<i.near||a>i.far?null:{distance:a,point:_d.clone(),object:v}}function Xd(v,t,i,f,y,C,o,E,e,a){v.getVertexPosition(E,zd),v.getVertexPosition(e,Gd),v.getVertexPosition(a,Wd);const x=F4(v,t,i,f,zd,Gd,Wd,vT);if(x){const u=new St;cr.getBarycoord(vT,zd,Gd,Wd,u),y&&(x.uv=cr.getInterpolatedAttribute(y,E,e,a,u,new ei)),C&&(x.uv1=cr.getInterpolatedAttribute(C,E,e,a,u,new ei)),o&&(x.normal=cr.getInterpolatedAttribute(o,E,e,a,u,new St),x.normal.dot(f.direction)>0&&x.normal.multiplyScalar(-1));const r={a:E,b:e,c:a,normal:new St,materialIndex:0};cr.getNormal(zd,Gd,Wd,r.normal),x.face=r,x.barycoord=u}return x}class ju extends Za{constructor(t=1,i=1,f=1,y=1,C=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:f,widthSegments:y,heightSegments:C,depthSegments:o};const E=this;y=Math.floor(y),C=Math.floor(C),o=Math.floor(o);const e=[],a=[],x=[],u=[];let r=0,h=0;n("z","y","x",-1,-1,f,i,t,o,C,0),n("z","y","x",1,-1,f,i,-t,o,C,1),n("x","z","y",1,1,t,f,i,y,o,2),n("x","z","y",1,-1,t,f,-i,y,o,3),n("x","y","z",1,-1,t,i,f,y,C,4),n("x","y","z",-1,-1,t,i,-f,y,C,5),this.setIndex(e),this.setAttribute("position",new Ps(a,3)),this.setAttribute("normal",new Ps(x,3)),this.setAttribute("uv",new Ps(u,2));function n(l,c,s,d,m,p,g,T,S,w,A){const M=p/S,R=g/w,P=p/2,b=g/2,F=T/2,I=S+1,L=w+1;let D=0,O=0;const z=new St;for(let W=0;W<L;W++){const X=W*R-b;for(let _=0;_<I;_++){const U=_*M-P;z[l]=U*d,z[c]=X*m,z[s]=F,a.push(z.x,z.y,z.z),z[l]=0,z[c]=0,z[s]=T>0?1:-1,x.push(z.x,z.y,z.z),u.push(_/S),u.push(1-W/w),D+=1}}for(let W=0;W<w;W++)for(let X=0;X<S;X++){const _=r+X+I*W,U=r+X+I*(W+1),G=r+(X+1)+I*(W+1),N=r+(X+1)+I*W;e.push(_,U,N),e.push(U,G,N),O+=6}E.addGroup(h,O,A),h+=O,r+=D}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ju(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Iu(v){const t={};for(const i in v){t[i]={};for(const f in v[i]){const y=v[i][f];y&&(y.isColor||y.isMatrix3||y.isMatrix4||y.isVector2||y.isVector3||y.isVector4||y.isTexture||y.isQuaternion)?y.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[i][f]=null):t[i][f]=y.clone():Array.isArray(y)?t[i][f]=y.slice():t[i][f]=y}}return t}function Jn(v){const t={};for(let i=0;i<v.length;i++){const f=Iu(v[i]);for(const y in f)t[y]=f[y]}return t}function D4(v){const t=[];for(let i=0;i<v.length;i++)t.push(v[i].clone());return t}function zC(v){const t=v.getRenderTarget();return t===null?v.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:oi.workingColorSpace}const O4={clone:Iu,merge:Jn};var N4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,B4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class zo extends Kc{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=N4,this.fragmentShader=B4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Iu(t.uniforms),this.uniformsGroups=D4(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(const y in this.uniforms){const o=this.uniforms[y].value;o&&o.isTexture?i.uniforms[y]={type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?i.uniforms[y]={type:"c",value:o.getHex()}:o&&o.isVector2?i.uniforms[y]={type:"v2",value:o.toArray()}:o&&o.isVector3?i.uniforms[y]={type:"v3",value:o.toArray()}:o&&o.isVector4?i.uniforms[y]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?i.uniforms[y]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?i.uniforms[y]={type:"m4",value:o.toArray()}:i.uniforms[y]={value:o}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;const f={};for(const y in this.extensions)this.extensions[y]===!0&&(f[y]=!0);return Object.keys(f).length>0&&(i.extensions=f),i}}class GC extends Yn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vi,this.projectionMatrix=new Vi,this.projectionMatrixInverse=new Vi,this.coordinateSystem=Ia}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const fo=new St,mT=new ei,gT=new ei;class Cs extends GC{constructor(t=50,i=1,f=.1,y=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=f,this.far=y,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const i=.5*this.getFilmHeight()/t;this.fov=wg*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(um*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return wg*2*Math.atan(Math.tan(um*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,i,f){fo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(fo.x,fo.y).multiplyScalar(-t/fo.z),fo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),f.set(fo.x,fo.y).multiplyScalar(-t/fo.z)}getViewSize(t,i){return this.getViewBounds(t,mT,gT),i.subVectors(gT,mT)}setViewOffset(t,i,f,y,C,o){this.aspect=t/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=f,this.view.offsetY=y,this.view.width=C,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let i=t*Math.tan(um*.5*this.fov)/this.zoom,f=2*i,y=this.aspect*f,C=-.5*y;const o=this.view;if(this.view!==null&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;C+=o.offsetX*y/e,i-=o.offsetY*f/a,y*=o.width/e,f*=o.height/a}const E=this.filmOffset;E!==0&&(C+=t*E/this.getFilmWidth()),this.projectionMatrix.makePerspective(C,C+y,i,i-f,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const Bh=-90,Uh=1;class U4 extends Yn{constructor(t,i,f){super(),this.type="CubeCamera",this.renderTarget=f,this.coordinateSystem=null,this.activeMipmapLevel=0;const y=new Cs(Bh,Uh,t,i);y.layers=this.layers,this.add(y);const C=new Cs(Bh,Uh,t,i);C.layers=this.layers,this.add(C);const o=new Cs(Bh,Uh,t,i);o.layers=this.layers,this.add(o);const E=new Cs(Bh,Uh,t,i);E.layers=this.layers,this.add(E);const e=new Cs(Bh,Uh,t,i);e.layers=this.layers,this.add(e);const a=new Cs(Bh,Uh,t,i);a.layers=this.layers,this.add(a)}updateCoordinateSystem(){const t=this.coordinateSystem,i=this.children.concat(),[f,y,C,o,E,e]=i;for(const a of i)this.remove(a);if(t===Ia)f.up.set(0,1,0),f.lookAt(1,0,0),y.up.set(0,1,0),y.lookAt(-1,0,0),C.up.set(0,0,-1),C.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),E.up.set(0,1,0),E.lookAt(0,0,1),e.up.set(0,1,0),e.lookAt(0,0,-1);else if(t===Bp)f.up.set(0,-1,0),f.lookAt(-1,0,0),y.up.set(0,-1,0),y.lookAt(1,0,0),C.up.set(0,0,1),C.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),E.up.set(0,-1,0),E.lookAt(0,0,1),e.up.set(0,-1,0),e.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const a of i)this.add(a),a.updateMatrixWorld()}update(t,i){this.parent===null&&this.updateMatrixWorld();const{renderTarget:f,activeMipmapLevel:y}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[C,o,E,e,a,x]=this.children,u=t.getRenderTarget(),r=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),n=t.xr.enabled;t.xr.enabled=!1;const l=f.texture.generateMipmaps;f.texture.generateMipmaps=!1,t.setRenderTarget(f,0,y),t.render(i,C),t.setRenderTarget(f,1,y),t.render(i,o),t.setRenderTarget(f,2,y),t.render(i,E),t.setRenderTarget(f,3,y),t.render(i,e),t.setRenderTarget(f,4,y),t.render(i,a),f.texture.generateMipmaps=l,t.setRenderTarget(f,5,y),t.render(i,x),t.setRenderTarget(u,r,h),t.xr.enabled=n,f.texture.needsPMREMUpdate=!0}}class WC extends fs{constructor(t,i,f,y,C,o,E,e,a,x){t=t!==void 0?t:[],i=i!==void 0?i:wu,super(t,i,f,y,C,o,E,e,a,x),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class V4 extends $l{constructor(t=1,i={}){super(t,t,i),this.isWebGLCubeRenderTarget=!0;const f={width:t,height:t,depth:1},y=[f,f,f,f,f,f];this.texture=new WC(y,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:_r}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const f={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},y=new ju(5,5,5),C=new zo({name:"CubemapFromEquirect",uniforms:Iu(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,side:us,blending:bo});C.uniforms.tEquirect.value=i;const o=new hs(y,C),E=i.minFilter;return i.minFilter===Al&&(i.minFilter=_r),new U4(1,10,this).update(t,o),i.minFilter=E,o.geometry.dispose(),o.material.dispose(),this}clear(t,i,f,y){const C=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(i,f,y);t.setRenderTarget(C)}}class Xf extends Yn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const z4={type:"move"};class Lm{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new St,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new St),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new St,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new St),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const i=this._hand;if(i)for(const f of t.hand.values())this._getHandJoint(i,f)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,i,f){let y=null,C=null,o=null;const E=this._targetRay,e=this._grip,a=this._hand;if(t&&i.session.visibilityState!=="visible-blurred"){if(a&&t.hand){o=!0;for(const l of t.hand.values()){const c=i.getJointPose(l,f),s=this._getHandJoint(a,l);c!==null&&(s.matrix.fromArray(c.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,s.jointRadius=c.radius),s.visible=c!==null}const x=a.joints["index-finger-tip"],u=a.joints["thumb-tip"],r=x.position.distanceTo(u.position),h=.02,n=.005;a.inputState.pinching&&r>h+n?(a.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!a.inputState.pinching&&r<=h-n&&(a.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else e!==null&&t.gripSpace&&(C=i.getPose(t.gripSpace,f),C!==null&&(e.matrix.fromArray(C.transform.matrix),e.matrix.decompose(e.position,e.rotation,e.scale),e.matrixWorldNeedsUpdate=!0,C.linearVelocity?(e.hasLinearVelocity=!0,e.linearVelocity.copy(C.linearVelocity)):e.hasLinearVelocity=!1,C.angularVelocity?(e.hasAngularVelocity=!0,e.angularVelocity.copy(C.angularVelocity)):e.hasAngularVelocity=!1));E!==null&&(y=i.getPose(t.targetRaySpace,f),y===null&&C!==null&&(y=C),y!==null&&(E.matrix.fromArray(y.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,y.linearVelocity?(E.hasLinearVelocity=!0,E.linearVelocity.copy(y.linearVelocity)):E.hasLinearVelocity=!1,y.angularVelocity?(E.hasAngularVelocity=!0,E.angularVelocity.copy(y.angularVelocity)):E.hasAngularVelocity=!1,this.dispatchEvent(z4)))}return E!==null&&(E.visible=y!==null),e!==null&&(e.visible=C!==null),a!==null&&(a.visible=o!==null),this}_getHandJoint(t,i){if(t.joints[i.jointName]===void 0){const f=new Xf;f.matrixAutoUpdate=!1,f.visible=!1,t.joints[i.jointName]=f,t.add(f)}return t.joints[i.jointName]}}class G4 extends Yn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new qr,this.environmentIntensity=1,this.environmentRotation=new qr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}const Fm=new St,W4=new St,H4=new Be;let pl=class{constructor(t=new St(1,0,0),i=0){this.isPlane=!0,this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,f,y){return this.normal.set(t,i,f),this.constant=y,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,f){const y=Fm.subVectors(f,i).cross(W4.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(y,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,i){const f=t.delta(Fm),y=this.normal.dot(f);if(y===0)return this.distanceToPoint(t.start)===0?i.copy(t.start):null;const C=-(t.start.dot(this.normal)+this.constant)/y;return C<0||C>1?null:i.copy(t.start).addScaledVector(f,C)}intersectsLine(t){const i=this.distanceToPoint(t.start),f=this.distanceToPoint(t.end);return i<0&&f>0||f<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const f=i||H4.getNormalMatrix(t),y=this.coplanarPoint(Fm).applyMatrix4(t),C=this.normal.applyMatrix3(f).normalize();return this.constant=-y.dot(C),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}};const ll=new Ox,Yd=new St;class Nx{constructor(t=new pl,i=new pl,f=new pl,y=new pl,C=new pl,o=new pl){this.planes=[t,i,f,y,C,o]}set(t,i,f,y,C,o){const E=this.planes;return E[0].copy(t),E[1].copy(i),E[2].copy(f),E[3].copy(y),E[4].copy(C),E[5].copy(o),this}copy(t){const i=this.planes;for(let f=0;f<6;f++)i[f].copy(t.planes[f]);return this}setFromProjectionMatrix(t,i=Ia){const f=this.planes,y=t.elements,C=y[0],o=y[1],E=y[2],e=y[3],a=y[4],x=y[5],u=y[6],r=y[7],h=y[8],n=y[9],l=y[10],c=y[11],s=y[12],d=y[13],m=y[14],p=y[15];if(f[0].setComponents(e-C,r-a,c-h,p-s).normalize(),f[1].setComponents(e+C,r+a,c+h,p+s).normalize(),f[2].setComponents(e+o,r+x,c+n,p+d).normalize(),f[3].setComponents(e-o,r-x,c-n,p-d).normalize(),f[4].setComponents(e-E,r-u,c-l,p-m).normalize(),i===Ia)f[5].setComponents(e+E,r+u,c+l,p+m).normalize();else if(i===Bp)f[5].setComponents(E,u,l,m).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),ll.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const i=t.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),ll.copy(i.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(ll)}intersectsSprite(t){return ll.center.set(0,0,0),ll.radius=.7071067811865476,ll.applyMatrix4(t.matrixWorld),this.intersectsSphere(ll)}intersectsSphere(t){const i=this.planes,f=t.center,y=-t.radius;for(let C=0;C<6;C++)if(i[C].distanceToPoint(f)<y)return!1;return!0}intersectsBox(t){const i=this.planes;for(let f=0;f<6;f++){const y=i[f];if(Yd.x=y.normal.x>0?t.max.x:t.min.x,Yd.y=y.normal.y>0?t.max.y:t.min.y,Yd.z=y.normal.z>0?t.max.z:t.min.z,y.distanceToPoint(Yd)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let f=0;f<6;f++)if(i[f].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class HC extends fs{constructor(t,i,f,y,C,o,E,e,a,x=tu){if(x!==tu&&x!==Pu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");f===void 0&&x===tu&&(f=kl),f===void 0&&x===Pu&&(f=Ru),super(null,y,C,o,E,e,x,f,a),this.isDepthTexture=!0,this.image={width:t,height:i},this.magFilter=E!==void 0?E:yr,this.minFilter=e!==void 0?e:yr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const i=super.toJSON(t);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}}class Vp extends Za{constructor(t=1,i=1,f=1,y=32,C=1,o=!1,E=0,e=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:i,height:f,radialSegments:y,heightSegments:C,openEnded:o,thetaStart:E,thetaLength:e};const a=this;y=Math.floor(y),C=Math.floor(C);const x=[],u=[],r=[],h=[];let n=0;const l=[],c=f/2;let s=0;d(),o===!1&&(t>0&&m(!0),i>0&&m(!1)),this.setIndex(x),this.setAttribute("position",new Ps(u,3)),this.setAttribute("normal",new Ps(r,3)),this.setAttribute("uv",new Ps(h,2));function d(){const p=new St,g=new St;let T=0;const S=(i-t)/f;for(let w=0;w<=C;w++){const A=[],M=w/C,R=M*(i-t)+t;for(let P=0;P<=y;P++){const b=P/y,F=b*e+E,I=Math.sin(F),L=Math.cos(F);g.x=R*I,g.y=-M*f+c,g.z=R*L,u.push(g.x,g.y,g.z),p.set(I,S,L).normalize(),r.push(p.x,p.y,p.z),h.push(b,1-M),A.push(n++)}l.push(A)}for(let w=0;w<y;w++)for(let A=0;A<C;A++){const M=l[A][w],R=l[A+1][w],P=l[A+1][w+1],b=l[A][w+1];(t>0||A!==0)&&(x.push(M,R,b),T+=3),(i>0||A!==C-1)&&(x.push(R,P,b),T+=3)}a.addGroup(s,T,0),s+=T}function m(p){const g=n,T=new ei,S=new St;let w=0;const A=p===!0?t:i,M=p===!0?1:-1;for(let P=1;P<=y;P++)u.push(0,c*M,0),r.push(0,M,0),h.push(.5,.5),n++;const R=n;for(let P=0;P<=y;P++){const F=P/y*e+E,I=Math.cos(F),L=Math.sin(F);S.x=A*L,S.y=c*M,S.z=A*I,u.push(S.x,S.y,S.z),r.push(0,M,0),T.x=I*.5+.5,T.y=L*.5*M+.5,h.push(T.x,T.y),n++}for(let P=0;P<y;P++){const b=g+P,F=R+P;p===!0?x.push(F,F+1,b):x.push(F+1,F,b),w+=3}a.addGroup(s,w,p===!0?1:2),s+=w}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Vp(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Av extends Za{constructor(t=1,i=1,f=1,y=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:f,heightSegments:y};const C=t/2,o=i/2,E=Math.floor(f),e=Math.floor(y),a=E+1,x=e+1,u=t/E,r=i/e,h=[],n=[],l=[],c=[];for(let s=0;s<x;s++){const d=s*r-o;for(let m=0;m<a;m++){const p=m*u-C;n.push(p,-d,0),l.push(0,0,1),c.push(m/E),c.push(1-s/e)}}for(let s=0;s<e;s++)for(let d=0;d<E;d++){const m=d+a*s,p=d+a*(s+1),g=d+1+a*(s+1),T=d+1+a*s;h.push(m,p,T),h.push(p,g,T)}this.setIndex(h),this.setAttribute("position",new Ps(n,3)),this.setAttribute("normal",new Ps(l,3)),this.setAttribute("uv",new Ps(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Av(t.width,t.height,t.widthSegments,t.heightSegments)}}class zp extends Za{constructor(t=1,i=32,f=16,y=0,C=Math.PI*2,o=0,E=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:i,heightSegments:f,phiStart:y,phiLength:C,thetaStart:o,thetaLength:E},i=Math.max(3,Math.floor(i)),f=Math.max(2,Math.floor(f));const e=Math.min(o+E,Math.PI);let a=0;const x=[],u=new St,r=new St,h=[],n=[],l=[],c=[];for(let s=0;s<=f;s++){const d=[],m=s/f;let p=0;s===0&&o===0?p=.5/i:s===f&&e===Math.PI&&(p=-.5/i);for(let g=0;g<=i;g++){const T=g/i;u.x=-t*Math.cos(y+T*C)*Math.sin(o+m*E),u.y=t*Math.cos(o+m*E),u.z=t*Math.sin(y+T*C)*Math.sin(o+m*E),n.push(u.x,u.y,u.z),r.copy(u).normalize(),l.push(r.x,r.y,r.z),c.push(T+p,1-m),d.push(a++)}x.push(d)}for(let s=0;s<f;s++)for(let d=0;d<i;d++){const m=x[s][d+1],p=x[s][d],g=x[s+1][d],T=x[s+1][d+1];(s!==0||o>0)&&h.push(m,p,T),(s!==f-1||e<Math.PI)&&h.push(p,g,T)}this.setIndex(h),this.setAttribute("position",new Ps(n,3)),this.setAttribute("normal",new Ps(l,3)),this.setAttribute("uv",new Ps(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new zp(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class kd extends Kc{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ui(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ui(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bC,this.normalScale=new ei(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class _4 extends Kc{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=t4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class X4 extends Kc{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class Bx extends Yn{constructor(t,i=1){super(),this.isLight=!0,this.type="Light",this.color=new ui(t),this.intensity=i}dispose(){}copy(t,i){return super.copy(t,i),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(i.object.target=this.target.uuid),i}}const Dm=new Vi,xT=new St,yT=new St;class _C{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ei(512,512),this.map=null,this.mapPass=null,this.matrix=new Vi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Nx,this._frameExtents=new ei(1,1),this._viewportCount=1,this._viewports=[new gi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const i=this.camera,f=this.matrix;xT.setFromMatrixPosition(t.matrixWorld),i.position.copy(xT),yT.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(yT),i.updateMatrixWorld(),Dm.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dm),f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(Dm)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}const TT=new Vi,Df=new St,Om=new St;class Y4 extends _C{constructor(){super(new Cs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ei(4,2),this._viewportCount=6,this._viewports=[new gi(2,1,1,1),new gi(0,1,1,1),new gi(3,1,1,1),new gi(1,1,1,1),new gi(3,0,1,1),new gi(1,0,1,1)],this._cubeDirections=[new St(1,0,0),new St(-1,0,0),new St(0,0,1),new St(0,0,-1),new St(0,1,0),new St(0,-1,0)],this._cubeUps=[new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,0,1),new St(0,0,-1)]}updateMatrices(t,i=0){const f=this.camera,y=this.matrix,C=t.distance||f.far;C!==f.far&&(f.far=C,f.updateProjectionMatrix()),Df.setFromMatrixPosition(t.matrixWorld),f.position.copy(Df),Om.copy(f.position),Om.add(this._cubeDirections[i]),f.up.copy(this._cubeUps[i]),f.lookAt(Om),f.updateMatrixWorld(),y.makeTranslation(-Df.x,-Df.y,-Df.z),TT.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TT)}}class k4 extends Bx{constructor(t,i,f=0,y=2){super(t,i),this.isPointLight=!0,this.type="PointLight",this.distance=f,this.decay=y,this.shadow=new Y4}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class XC extends GC{constructor(t=-1,i=1,f=1,y=-1,C=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=f,this.bottom=y,this.near=C,this.far=o,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,i,f,y,C,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=f,this.view.offsetY=y,this.view.width=C,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,y=(this.top+this.bottom)/2;let C=f-t,o=f+t,E=y+i,e=y-i;if(this.view!==null&&this.view.enabled){const a=(this.right-this.left)/this.view.fullWidth/this.zoom,x=(this.top-this.bottom)/this.view.fullHeight/this.zoom;C+=a*this.view.offsetX,o=C+a*this.view.width,E-=x*this.view.offsetY,e=E-x*this.view.height}this.projectionMatrix.makeOrthographic(C,o,E,e,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}class $4 extends _C{constructor(){super(new XC(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class K4 extends Bx{constructor(t,i){super(t,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yn.DEFAULT_UP),this.updateMatrix(),this.target=new Yn,this.shadow=new $4}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class j4 extends Bx{constructor(t,i){super(t,i),this.isAmbientLight=!0,this.type="AmbientLight"}}class Z4 extends Cs{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}function ET(v,t,i,f){const y=J4(f);switch(i){case SC:return v*t;case AC:return v*t;case wC:return v*t*2;case MC:return v*t/y.components*y.byteLength;case Lx:return v*t/y.components*y.byteLength;case RC:return v*t*2/y.components*y.byteLength;case Fx:return v*t*2/y.components*y.byteLength;case CC:return v*t*3/y.components*y.byteLength;case vr:return v*t*4/y.components*y.byteLength;case Dx:return v*t*4/y.components*y.byteLength;case cp:case dp:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*8;case pp:case vp:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*16;case tg:case ig:return Math.max(v,16)*Math.max(t,8)/4;case q0:case eg:return Math.max(v,8)*Math.max(t,8)/2;case ng:case sg:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*8;case rg:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*16;case ag:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*16;case og:return Math.floor((v+4)/5)*Math.floor((t+3)/4)*16;case lg:return Math.floor((v+4)/5)*Math.floor((t+4)/5)*16;case hg:return Math.floor((v+5)/6)*Math.floor((t+4)/5)*16;case ug:return Math.floor((v+5)/6)*Math.floor((t+5)/6)*16;case fg:return Math.floor((v+7)/8)*Math.floor((t+4)/5)*16;case cg:return Math.floor((v+7)/8)*Math.floor((t+5)/6)*16;case dg:return Math.floor((v+7)/8)*Math.floor((t+7)/8)*16;case pg:return Math.floor((v+9)/10)*Math.floor((t+4)/5)*16;case vg:return Math.floor((v+9)/10)*Math.floor((t+5)/6)*16;case mg:return Math.floor((v+9)/10)*Math.floor((t+7)/8)*16;case gg:return Math.floor((v+9)/10)*Math.floor((t+9)/10)*16;case xg:return Math.floor((v+11)/12)*Math.floor((t+9)/10)*16;case yg:return Math.floor((v+11)/12)*Math.floor((t+11)/12)*16;case mp:case Tg:case Eg:return Math.ceil(v/4)*Math.ceil(t/4)*16;case PC:case Sg:return Math.ceil(v/4)*Math.ceil(t/4)*8;case Cg:case Ag:return Math.ceil(v/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${i} format.`)}function J4(v){switch(v){case Ha:case yC:return{byteLength:1,components:1};case mc:case TC:case Xc:return{byteLength:2,components:1};case bx:case Ix:return{byteLength:2,components:4};case kl:case Px:case ba:return{byteLength:4,components:1};case EC:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${v}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Rx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Rx);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function YC(){let v=null,t=!1,i=null,f=null;function y(C,o){i(C,o),f=v.requestAnimationFrame(y)}return{start:function(){t!==!0&&i!==null&&(f=v.requestAnimationFrame(y),t=!0)},stop:function(){v.cancelAnimationFrame(f),t=!1},setAnimationLoop:function(C){i=C},setContext:function(C){v=C}}}function Q4(v){const t=new WeakMap;function i(E,e){const a=E.array,x=E.usage,u=a.byteLength,r=v.createBuffer();v.bindBuffer(e,r),v.bufferData(e,a,x),E.onUploadCallback();let h;if(a instanceof Float32Array)h=v.FLOAT;else if(a instanceof Uint16Array)E.isFloat16BufferAttribute?h=v.HALF_FLOAT:h=v.UNSIGNED_SHORT;else if(a instanceof Int16Array)h=v.SHORT;else if(a instanceof Uint32Array)h=v.UNSIGNED_INT;else if(a instanceof Int32Array)h=v.INT;else if(a instanceof Int8Array)h=v.BYTE;else if(a instanceof Uint8Array)h=v.UNSIGNED_BYTE;else if(a instanceof Uint8ClampedArray)h=v.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);return{buffer:r,type:h,bytesPerElement:a.BYTES_PER_ELEMENT,version:E.version,size:u}}function f(E,e,a){const x=e.array,u=e.updateRanges;if(v.bindBuffer(a,E),u.length===0)v.bufferSubData(a,0,x);else{u.sort((h,n)=>h.start-n.start);let r=0;for(let h=1;h<u.length;h++){const n=u[r],l=u[h];l.start<=n.start+n.count+1?n.count=Math.max(n.count,l.start+l.count-n.start):(++r,u[r]=l)}u.length=r+1;for(let h=0,n=u.length;h<n;h++){const l=u[h];v.bufferSubData(a,l.start*x.BYTES_PER_ELEMENT,x,l.start,l.count)}e.clearUpdateRanges()}e.onUploadCallback()}function y(E){return E.isInterleavedBufferAttribute&&(E=E.data),t.get(E)}function C(E){E.isInterleavedBufferAttribute&&(E=E.data);const e=t.get(E);e&&(v.deleteBuffer(e.buffer),t.delete(E))}function o(E,e){if(E.isInterleavedBufferAttribute&&(E=E.data),E.isGLBufferAttribute){const x=t.get(E);(!x||x.version<E.version)&&t.set(E,{buffer:E.buffer,type:E.type,bytesPerElement:E.elementSize,version:E.version});return}const a=t.get(E);if(a===void 0)t.set(E,i(E,e));else if(a.version<E.version){if(a.size!==E.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");f(a.buffer,E,e),a.version=E.version}}return{get:y,remove:C,update:o}}var q4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,tL=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,eL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,iL=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nL=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,sL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,rL=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aL=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,oL=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,lL=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,hL=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,uL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,fL=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,cL=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,dL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,pL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,vL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,mL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,gL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,xL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,yL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,TL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,EL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,SL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,CL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,AL=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,wL=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ML=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,RL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,PL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,bL="gl_FragColor = linearToOutputTexel( gl_FragColor );",IL=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,LL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,FL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,DL=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,OL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,NL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,BL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,UL=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,VL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,zL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,GL=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,WL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,HL=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,_L=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,XL=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,YL=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,kL=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,$L=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,KL=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,jL=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ZL=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,JL=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,QL=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,qL=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,tF=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,eF=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,iF=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nF=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sF=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,rF=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,aF=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,oF=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,lF=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hF=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,uF=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,fF=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,cF=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,dF=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,pF=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,vF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,mF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,gF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,xF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,TF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,EF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,SF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,CF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,AF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,wF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,MF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,RF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,PF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,bF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,IF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,LF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,FF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,DF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,OF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,NF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,BF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,UF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,VF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,zF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,GF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,WF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,HF=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,_F=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,XF=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,YF=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,kF=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,$F=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,KF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,jF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ZF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,JF=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const QF=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qF=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,eD=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,nD=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sD=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,rD=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,aD=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,oD=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,hD=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uD=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fD=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cD=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,dD=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pD=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vD=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mD=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,gD=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xD=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yD=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,TD=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ED=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SD=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,CD=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AD=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wD=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MD=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,RD=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PD=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bD=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ID=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LD=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ue={alphahash_fragment:q4,alphahash_pars_fragment:tL,alphamap_fragment:eL,alphamap_pars_fragment:iL,alphatest_fragment:nL,alphatest_pars_fragment:sL,aomap_fragment:rL,aomap_pars_fragment:aL,batching_pars_vertex:oL,batching_vertex:lL,begin_vertex:hL,beginnormal_vertex:uL,bsdfs:fL,iridescence_fragment:cL,bumpmap_pars_fragment:dL,clipping_planes_fragment:pL,clipping_planes_pars_fragment:vL,clipping_planes_pars_vertex:mL,clipping_planes_vertex:gL,color_fragment:xL,color_pars_fragment:yL,color_pars_vertex:TL,color_vertex:EL,common:SL,cube_uv_reflection_fragment:CL,defaultnormal_vertex:AL,displacementmap_pars_vertex:wL,displacementmap_vertex:ML,emissivemap_fragment:RL,emissivemap_pars_fragment:PL,colorspace_fragment:bL,colorspace_pars_fragment:IL,envmap_fragment:LL,envmap_common_pars_fragment:FL,envmap_pars_fragment:DL,envmap_pars_vertex:OL,envmap_physical_pars_fragment:YL,envmap_vertex:NL,fog_vertex:BL,fog_pars_vertex:UL,fog_fragment:VL,fog_pars_fragment:zL,gradientmap_pars_fragment:GL,lightmap_pars_fragment:WL,lights_lambert_fragment:HL,lights_lambert_pars_fragment:_L,lights_pars_begin:XL,lights_toon_fragment:kL,lights_toon_pars_fragment:$L,lights_phong_fragment:KL,lights_phong_pars_fragment:jL,lights_physical_fragment:ZL,lights_physical_pars_fragment:JL,lights_fragment_begin:QL,lights_fragment_maps:qL,lights_fragment_end:tF,logdepthbuf_fragment:eF,logdepthbuf_pars_fragment:iF,logdepthbuf_pars_vertex:nF,logdepthbuf_vertex:sF,map_fragment:rF,map_pars_fragment:aF,map_particle_fragment:oF,map_particle_pars_fragment:lF,metalnessmap_fragment:hF,metalnessmap_pars_fragment:uF,morphinstance_vertex:fF,morphcolor_vertex:cF,morphnormal_vertex:dF,morphtarget_pars_vertex:pF,morphtarget_vertex:vF,normal_fragment_begin:mF,normal_fragment_maps:gF,normal_pars_fragment:xF,normal_pars_vertex:yF,normal_vertex:TF,normalmap_pars_fragment:EF,clearcoat_normal_fragment_begin:SF,clearcoat_normal_fragment_maps:CF,clearcoat_pars_fragment:AF,iridescence_pars_fragment:wF,opaque_fragment:MF,packing:RF,premultiplied_alpha_fragment:PF,project_vertex:bF,dithering_fragment:IF,dithering_pars_fragment:LF,roughnessmap_fragment:FF,roughnessmap_pars_fragment:DF,shadowmap_pars_fragment:OF,shadowmap_pars_vertex:NF,shadowmap_vertex:BF,shadowmask_pars_fragment:UF,skinbase_vertex:VF,skinning_pars_vertex:zF,skinning_vertex:GF,skinnormal_vertex:WF,specularmap_fragment:HF,specularmap_pars_fragment:_F,tonemapping_fragment:XF,tonemapping_pars_fragment:YF,transmission_fragment:kF,transmission_pars_fragment:$F,uv_pars_fragment:KF,uv_pars_vertex:jF,uv_vertex:ZF,worldpos_vertex:JF,background_vert:QF,background_frag:qF,backgroundCube_vert:tD,backgroundCube_frag:eD,cube_vert:iD,cube_frag:nD,depth_vert:sD,depth_frag:rD,distanceRGBA_vert:aD,distanceRGBA_frag:oD,equirect_vert:lD,equirect_frag:hD,linedashed_vert:uD,linedashed_frag:fD,meshbasic_vert:cD,meshbasic_frag:dD,meshlambert_vert:pD,meshlambert_frag:vD,meshmatcap_vert:mD,meshmatcap_frag:gD,meshnormal_vert:xD,meshnormal_frag:yD,meshphong_vert:TD,meshphong_frag:ED,meshphysical_vert:SD,meshphysical_frag:CD,meshtoon_vert:AD,meshtoon_frag:wD,points_vert:MD,points_frag:RD,shadow_vert:PD,shadow_frag:bD,sprite_vert:ID,sprite_frag:LD},se={common:{diffuse:{value:new ui(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Be},alphaMap:{value:null},alphaMapTransform:{value:new Be},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Be}},envmap:{envMap:{value:null},envMapRotation:{value:new Be},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Be}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Be}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Be},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Be},normalScale:{value:new ei(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Be},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Be}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Be}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Be}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ui(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ui(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Be},alphaTest:{value:0},uvTransform:{value:new Be}},sprite:{diffuse:{value:new ui(16777215)},opacity:{value:1},center:{value:new ei(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Be},alphaMap:{value:null},alphaMapTransform:{value:new Be},alphaTest:{value:0}}},Wr={basic:{uniforms:Jn([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.fog]),vertexShader:Ue.meshbasic_vert,fragmentShader:Ue.meshbasic_frag},lambert:{uniforms:Jn([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.fog,se.lights,{emissive:{value:new ui(0)}}]),vertexShader:Ue.meshlambert_vert,fragmentShader:Ue.meshlambert_frag},phong:{uniforms:Jn([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.fog,se.lights,{emissive:{value:new ui(0)},specular:{value:new ui(1118481)},shininess:{value:30}}]),vertexShader:Ue.meshphong_vert,fragmentShader:Ue.meshphong_frag},standard:{uniforms:Jn([se.common,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.roughnessmap,se.metalnessmap,se.fog,se.lights,{emissive:{value:new ui(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ue.meshphysical_vert,fragmentShader:Ue.meshphysical_frag},toon:{uniforms:Jn([se.common,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.gradientmap,se.fog,se.lights,{emissive:{value:new ui(0)}}]),vertexShader:Ue.meshtoon_vert,fragmentShader:Ue.meshtoon_frag},matcap:{uniforms:Jn([se.common,se.bumpmap,se.normalmap,se.displacementmap,se.fog,{matcap:{value:null}}]),vertexShader:Ue.meshmatcap_vert,fragmentShader:Ue.meshmatcap_frag},points:{uniforms:Jn([se.points,se.fog]),vertexShader:Ue.points_vert,fragmentShader:Ue.points_frag},dashed:{uniforms:Jn([se.common,se.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ue.linedashed_vert,fragmentShader:Ue.linedashed_frag},depth:{uniforms:Jn([se.common,se.displacementmap]),vertexShader:Ue.depth_vert,fragmentShader:Ue.depth_frag},normal:{uniforms:Jn([se.common,se.bumpmap,se.normalmap,se.displacementmap,{opacity:{value:1}}]),vertexShader:Ue.meshnormal_vert,fragmentShader:Ue.meshnormal_frag},sprite:{uniforms:Jn([se.sprite,se.fog]),vertexShader:Ue.sprite_vert,fragmentShader:Ue.sprite_frag},background:{uniforms:{uvTransform:{value:new Be},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ue.background_vert,fragmentShader:Ue.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Be}},vertexShader:Ue.backgroundCube_vert,fragmentShader:Ue.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ue.cube_vert,fragmentShader:Ue.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ue.equirect_vert,fragmentShader:Ue.equirect_frag},distanceRGBA:{uniforms:Jn([se.common,se.displacementmap,{referencePosition:{value:new St},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ue.distanceRGBA_vert,fragmentShader:Ue.distanceRGBA_frag},shadow:{uniforms:Jn([se.lights,se.fog,{color:{value:new ui(0)},opacity:{value:1}}]),vertexShader:Ue.shadow_vert,fragmentShader:Ue.shadow_frag}};Wr.physical={uniforms:Jn([Wr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Be},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Be},clearcoatNormalScale:{value:new ei(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Be},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Be},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Be},sheen:{value:0},sheenColor:{value:new ui(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Be},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Be},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Be},transmissionSamplerSize:{value:new ei},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Be},attenuationDistance:{value:0},attenuationColor:{value:new ui(0)},specularColor:{value:new ui(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Be},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Be},anisotropyVector:{value:new ei},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Be}}]),vertexShader:Ue.meshphysical_vert,fragmentShader:Ue.meshphysical_frag};const $d={r:0,b:0,g:0},hl=new qr,FD=new Vi;function DD(v,t,i,f,y,C,o){const E=new ui(0);let e=C===!0?0:1,a,x,u=null,r=0,h=null;function n(m){let p=m.isScene===!0?m.background:null;return p&&p.isTexture&&(p=(m.backgroundBlurriness>0?i:t).get(p)),p}function l(m){let p=!1;const g=n(m);g===null?s(E,e):g&&g.isColor&&(s(g,1),p=!0);const T=v.xr.getEnvironmentBlendMode();T==="additive"?f.buffers.color.setClear(0,0,0,1,o):T==="alpha-blend"&&f.buffers.color.setClear(0,0,0,0,o),(v.autoClear||p)&&(f.buffers.depth.setTest(!0),f.buffers.depth.setMask(!0),f.buffers.color.setMask(!0),v.clear(v.autoClearColor,v.autoClearDepth,v.autoClearStencil))}function c(m,p){const g=n(p);g&&(g.isCubeTexture||g.mapping===Cv)?(x===void 0&&(x=new hs(new ju(1,1,1),new zo({name:"BackgroundCubeMaterial",uniforms:Iu(Wr.backgroundCube.uniforms),vertexShader:Wr.backgroundCube.vertexShader,fragmentShader:Wr.backgroundCube.fragmentShader,side:us,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),x.geometry.deleteAttribute("uv"),x.onBeforeRender=function(T,S,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(x.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),y.update(x)),hl.copy(p.backgroundRotation),hl.x*=-1,hl.y*=-1,hl.z*=-1,g.isCubeTexture&&g.isRenderTargetTexture===!1&&(hl.y*=-1,hl.z*=-1),x.material.uniforms.envMap.value=g,x.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,x.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,x.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,x.material.uniforms.backgroundRotation.value.setFromMatrix4(FD.makeRotationFromEuler(hl)),x.material.toneMapped=oi.getTransfer(g.colorSpace)!==mi,(u!==g||r!==g.version||h!==v.toneMapping)&&(x.material.needsUpdate=!0,u=g,r=g.version,h=v.toneMapping),x.layers.enableAll(),m.unshift(x,x.geometry,x.material,0,0,null)):g&&g.isTexture&&(a===void 0&&(a=new hs(new Av(2,2),new zo({name:"BackgroundMaterial",uniforms:Iu(Wr.background.uniforms),vertexShader:Wr.background.vertexShader,fragmentShader:Wr.background.fragmentShader,side:Wa,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),y.update(a)),a.material.uniforms.t2D.value=g,a.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,a.material.toneMapped=oi.getTransfer(g.colorSpace)!==mi,g.matrixAutoUpdate===!0&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),(u!==g||r!==g.version||h!==v.toneMapping)&&(a.material.needsUpdate=!0,u=g,r=g.version,h=v.toneMapping),a.layers.enableAll(),m.unshift(a,a.geometry,a.material,0,0,null))}function s(m,p){m.getRGB($d,zC(v)),f.buffers.color.setClear($d.r,$d.g,$d.b,p,o)}function d(){x!==void 0&&(x.geometry.dispose(),x.material.dispose(),x=void 0),a!==void 0&&(a.geometry.dispose(),a.material.dispose(),a=void 0)}return{getClearColor:function(){return E},setClearColor:function(m,p=1){E.set(m),e=p,s(E,e)},getClearAlpha:function(){return e},setClearAlpha:function(m){e=m,s(E,e)},render:l,addToRenderList:c,dispose:d}}function OD(v,t){const i=v.getParameter(v.MAX_VERTEX_ATTRIBS),f={},y=r(null);let C=y,o=!1;function E(M,R,P,b,F){let I=!1;const L=u(b,P,R);C!==L&&(C=L,a(C.object)),I=h(M,b,P,F),I&&n(M,b,P,F),F!==null&&t.update(F,v.ELEMENT_ARRAY_BUFFER),(I||o)&&(o=!1,p(M,R,P,b),F!==null&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,t.get(F).buffer))}function e(){return v.createVertexArray()}function a(M){return v.bindVertexArray(M)}function x(M){return v.deleteVertexArray(M)}function u(M,R,P){const b=P.wireframe===!0;let F=f[M.id];F===void 0&&(F={},f[M.id]=F);let I=F[R.id];I===void 0&&(I={},F[R.id]=I);let L=I[b];return L===void 0&&(L=r(e()),I[b]=L),L}function r(M){const R=[],P=[],b=[];for(let F=0;F<i;F++)R[F]=0,P[F]=0,b[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:P,attributeDivisors:b,object:M,attributes:{},index:null}}function h(M,R,P,b){const F=C.attributes,I=R.attributes;let L=0;const D=P.getAttributes();for(const O in D)if(D[O].location>=0){const W=F[O];let X=I[O];if(X===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(X=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(X=M.instanceColor)),W===void 0||W.attribute!==X||X&&W.data!==X.data)return!0;L++}return C.attributesNum!==L||C.index!==b}function n(M,R,P,b){const F={},I=R.attributes;let L=0;const D=P.getAttributes();for(const O in D)if(D[O].location>=0){let W=I[O];W===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(W=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(W=M.instanceColor));const X={};X.attribute=W,W&&W.data&&(X.data=W.data),F[O]=X,L++}C.attributes=F,C.attributesNum=L,C.index=b}function l(){const M=C.newAttributes;for(let R=0,P=M.length;R<P;R++)M[R]=0}function c(M){s(M,0)}function s(M,R){const P=C.newAttributes,b=C.enabledAttributes,F=C.attributeDivisors;P[M]=1,b[M]===0&&(v.enableVertexAttribArray(M),b[M]=1),F[M]!==R&&(v.vertexAttribDivisor(M,R),F[M]=R)}function d(){const M=C.newAttributes,R=C.enabledAttributes;for(let P=0,b=R.length;P<b;P++)R[P]!==M[P]&&(v.disableVertexAttribArray(P),R[P]=0)}function m(M,R,P,b,F,I,L){L===!0?v.vertexAttribIPointer(M,R,P,F,I):v.vertexAttribPointer(M,R,P,b,F,I)}function p(M,R,P,b){l();const F=b.attributes,I=P.getAttributes(),L=R.defaultAttributeValues;for(const D in I){const O=I[D];if(O.location>=0){let z=F[D];if(z===void 0&&(D==="instanceMatrix"&&M.instanceMatrix&&(z=M.instanceMatrix),D==="instanceColor"&&M.instanceColor&&(z=M.instanceColor)),z!==void 0){const W=z.normalized,X=z.itemSize,_=t.get(z);if(_===void 0)continue;const U=_.buffer,G=_.type,N=_.bytesPerElement,H=G===v.INT||G===v.UNSIGNED_INT||z.gpuType===Px;if(z.isInterleavedBufferAttribute){const V=z.data,$=V.stride,j=z.offset;if(V.isInstancedInterleavedBuffer){for(let k=0;k<O.locationSize;k++)s(O.location+k,V.meshPerAttribute);M.isInstancedMesh!==!0&&b._maxInstanceCount===void 0&&(b._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let k=0;k<O.locationSize;k++)c(O.location+k);v.bindBuffer(v.ARRAY_BUFFER,U);for(let k=0;k<O.locationSize;k++)m(O.location+k,X/O.locationSize,G,W,$*N,(j+X/O.locationSize*k)*N,H)}else{if(z.isInstancedBufferAttribute){for(let V=0;V<O.locationSize;V++)s(O.location+V,z.meshPerAttribute);M.isInstancedMesh!==!0&&b._maxInstanceCount===void 0&&(b._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let V=0;V<O.locationSize;V++)c(O.location+V);v.bindBuffer(v.ARRAY_BUFFER,U);for(let V=0;V<O.locationSize;V++)m(O.location+V,X/O.locationSize,G,W,X*N,X/O.locationSize*V*N,H)}}else if(L!==void 0){const W=L[D];if(W!==void 0)switch(W.length){case 2:v.vertexAttrib2fv(O.location,W);break;case 3:v.vertexAttrib3fv(O.location,W);break;case 4:v.vertexAttrib4fv(O.location,W);break;default:v.vertexAttrib1fv(O.location,W)}}}}d()}function g(){w();for(const M in f){const R=f[M];for(const P in R){const b=R[P];for(const F in b)x(b[F].object),delete b[F];delete R[P]}delete f[M]}}function T(M){if(f[M.id]===void 0)return;const R=f[M.id];for(const P in R){const b=R[P];for(const F in b)x(b[F].object),delete b[F];delete R[P]}delete f[M.id]}function S(M){for(const R in f){const P=f[R];if(P[M.id]===void 0)continue;const b=P[M.id];for(const F in b)x(b[F].object),delete b[F];delete P[M.id]}}function w(){A(),o=!0,C!==y&&(C=y,a(C.object))}function A(){y.geometry=null,y.program=null,y.wireframe=!1}return{setup:E,reset:w,resetDefaultState:A,dispose:g,releaseStatesOfGeometry:T,releaseStatesOfProgram:S,initAttributes:l,enableAttribute:c,disableUnusedAttributes:d}}function ND(v,t,i){let f;function y(a){f=a}function C(a,x){v.drawArrays(f,a,x),i.update(x,f,1)}function o(a,x,u){u!==0&&(v.drawArraysInstanced(f,a,x,u),i.update(x,f,u))}function E(a,x,u){if(u===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(f,a,0,x,0,u);let h=0;for(let n=0;n<u;n++)h+=x[n];i.update(h,f,1)}function e(a,x,u,r){if(u===0)return;const h=t.get("WEBGL_multi_draw");if(h===null)for(let n=0;n<a.length;n++)o(a[n],x[n],r[n]);else{h.multiDrawArraysInstancedWEBGL(f,a,0,x,0,r,0,u);let n=0;for(let l=0;l<u;l++)n+=x[l]*r[l];i.update(n,f,1)}}this.setMode=y,this.render=C,this.renderInstances=o,this.renderMultiDraw=E,this.renderMultiDrawInstances=e}function BD(v,t,i,f){let y;function C(){if(y!==void 0)return y;if(t.has("EXT_texture_filter_anisotropic")===!0){const S=t.get("EXT_texture_filter_anisotropic");y=v.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else y=0;return y}function o(S){return!(S!==vr&&f.convert(S)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT))}function E(S){const w=S===Xc&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(S!==Ha&&f.convert(S)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==ba&&!w)}function e(S){if(S==="highp"){if(v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.HIGH_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return S==="mediump"&&v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.MEDIUM_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=i.precision!==void 0?i.precision:"highp";const x=e(a);x!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",x,"instead."),a=x);const u=i.logarithmicDepthBuffer===!0,r=i.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),h=v.getParameter(v.MAX_TEXTURE_IMAGE_UNITS),n=v.getParameter(v.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=v.getParameter(v.MAX_TEXTURE_SIZE),c=v.getParameter(v.MAX_CUBE_MAP_TEXTURE_SIZE),s=v.getParameter(v.MAX_VERTEX_ATTRIBS),d=v.getParameter(v.MAX_VERTEX_UNIFORM_VECTORS),m=v.getParameter(v.MAX_VARYING_VECTORS),p=v.getParameter(v.MAX_FRAGMENT_UNIFORM_VECTORS),g=n>0,T=v.getParameter(v.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:C,getMaxPrecision:e,textureFormatReadable:o,textureTypeReadable:E,precision:a,logarithmicDepthBuffer:u,reverseDepthBuffer:r,maxTextures:h,maxVertexTextures:n,maxTextureSize:l,maxCubemapSize:c,maxAttributes:s,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:p,vertexTextures:g,maxSamples:T}}function UD(v){const t=this;let i=null,f=0,y=!1,C=!1;const o=new pl,E=new Be,e={value:null,needsUpdate:!1};this.uniform=e,this.numPlanes=0,this.numIntersection=0,this.init=function(u,r){const h=u.length!==0||r||f!==0||y;return y=r,f=u.length,h},this.beginShadows=function(){C=!0,x(null)},this.endShadows=function(){C=!1},this.setGlobalState=function(u,r){i=x(u,r,0)},this.setState=function(u,r,h){const n=u.clippingPlanes,l=u.clipIntersection,c=u.clipShadows,s=v.get(u);if(!y||n===null||n.length===0||C&&!c)C?x(null):a();else{const d=C?0:f,m=d*4;let p=s.clippingState||null;e.value=p,p=x(n,r,m,h);for(let g=0;g!==m;++g)p[g]=i[g];s.clippingState=p,this.numIntersection=l?this.numPlanes:0,this.numPlanes+=d}};function a(){e.value!==i&&(e.value=i,e.needsUpdate=f>0),t.numPlanes=f,t.numIntersection=0}function x(u,r,h,n){const l=u!==null?u.length:0;let c=null;if(l!==0){if(c=e.value,n!==!0||c===null){const s=h+l*4,d=r.matrixWorldInverse;E.getNormalMatrix(d),(c===null||c.length<s)&&(c=new Float32Array(s));for(let m=0,p=h;m!==l;++m,p+=4)o.copy(u[m]).applyMatrix4(d,E),o.normal.toArray(c,p),c[p+3]=o.constant}e.value=c,e.needsUpdate=!0}return t.numPlanes=l,t.numIntersection=0,c}}function VD(v){let t=new WeakMap;function i(o,E){return E===j0?o.mapping=wu:E===Z0&&(o.mapping=Mu),o}function f(o){if(o&&o.isTexture){const E=o.mapping;if(E===j0||E===Z0)if(t.has(o)){const e=t.get(o).texture;return i(e,o.mapping)}else{const e=o.image;if(e&&e.height>0){const a=new V4(e.height);return a.fromEquirectangularTexture(v,o),t.set(o,a),o.addEventListener("dispose",y),i(a.texture,o.mapping)}else return null}}return o}function y(o){const E=o.target;E.removeEventListener("dispose",y);const e=t.get(E);e!==void 0&&(t.delete(E),e.dispose())}function C(){t=new WeakMap}return{get:f,dispose:C}}const jh=4,ST=[.125,.215,.35,.446,.526,.582],yl=20,Nm=new XC,CT=new ui;let Bm=null,Um=0,Vm=0,zm=!1;const vl=(1+Math.sqrt(5))/2,Vh=1/vl,AT=[new St(-vl,Vh,0),new St(vl,Vh,0),new St(-Vh,0,vl),new St(Vh,0,vl),new St(0,vl,-Vh),new St(0,vl,Vh),new St(-1,1,-1),new St(1,1,-1),new St(-1,1,1),new St(1,1,1)];class wT{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,f=.1,y=100){Bm=this._renderer.getRenderTarget(),Um=this._renderer.getActiveCubeFace(),Vm=this._renderer.getActiveMipmapLevel(),zm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const C=this._allocateTargets();return C.depthBuffer=!0,this._sceneToCubeUV(t,f,y,C),i>0&&this._blur(C,0,0,i),this._applyPMREM(C),this._cleanup(C),C}fromEquirectangular(t,i=null){return this._fromTexture(t,i)}fromCubemap(t,i=null){return this._fromTexture(t,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=PT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=RT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Bm,Um,Vm),this._renderer.xr.enabled=zm,t.scissorTest=!1,Kd(t,0,0,t.width,t.height)}_fromTexture(t,i){t.mapping===wu||t.mapping===Mu?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Bm=this._renderer.getRenderTarget(),Um=this._renderer.getActiveCubeFace(),Vm=this._renderer.getActiveMipmapLevel(),zm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const f=i||this._allocateTargets();return this._textureToCubeUV(t,f),this._applyPMREM(f),this._cleanup(f),f}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,f={magFilter:_r,minFilter:_r,generateMipmaps:!1,type:Xc,format:vr,colorSpace:bu,depthBuffer:!1},y=MT(t,i,f);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=MT(t,i,f);const{_lodMax:C}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=zD(C)),this._blurMaterial=GD(C,t,i)}return y}_compileMaterial(t){const i=new hs(this._lodPlanes[0],t);this._renderer.compile(i,Nm)}_sceneToCubeUV(t,i,f,y){const E=new Cs(90,1,i,f),e=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],x=this._renderer,u=x.autoClear,r=x.toneMapping;x.getClearColor(CT),x.toneMapping=Io,x.autoClear=!1;const h=new BC({name:"PMREM.Background",side:us,depthWrite:!1,depthTest:!1}),n=new hs(new ju,h);let l=!1;const c=t.background;c?c.isColor&&(h.color.copy(c),t.background=null,l=!0):(h.color.copy(CT),l=!0);for(let s=0;s<6;s++){const d=s%3;d===0?(E.up.set(0,e[s],0),E.lookAt(a[s],0,0)):d===1?(E.up.set(0,0,e[s]),E.lookAt(0,a[s],0)):(E.up.set(0,e[s],0),E.lookAt(0,0,a[s]));const m=this._cubeSize;Kd(y,d*m,s>2?m:0,m,m),x.setRenderTarget(y),l&&x.render(n,E),x.render(t,E)}n.geometry.dispose(),n.material.dispose(),x.toneMapping=r,x.autoClear=u,t.background=c}_textureToCubeUV(t,i){const f=this._renderer,y=t.mapping===wu||t.mapping===Mu;y?(this._cubemapMaterial===null&&(this._cubemapMaterial=PT()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=RT());const C=y?this._cubemapMaterial:this._equirectMaterial,o=new hs(this._lodPlanes[0],C),E=C.uniforms;E.envMap.value=t;const e=this._cubeSize;Kd(i,0,0,3*e,2*e),f.setRenderTarget(i),f.render(o,Nm)}_applyPMREM(t){const i=this._renderer,f=i.autoClear;i.autoClear=!1;const y=this._lodPlanes.length;for(let C=1;C<y;C++){const o=Math.sqrt(this._sigmas[C]*this._sigmas[C]-this._sigmas[C-1]*this._sigmas[C-1]),E=AT[(y-C-1)%AT.length];this._blur(t,C-1,C,o,E)}i.autoClear=f}_blur(t,i,f,y,C){const o=this._pingPongRenderTarget;this._halfBlur(t,o,i,f,y,"latitudinal",C),this._halfBlur(o,t,f,f,y,"longitudinal",C)}_halfBlur(t,i,f,y,C,o,E){const e=this._renderer,a=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const x=3,u=new hs(this._lodPlanes[y],a),r=a.uniforms,h=this._sizeLods[f]-1,n=isFinite(C)?Math.PI/(2*h):2*Math.PI/(2*yl-1),l=C/n,c=isFinite(C)?1+Math.floor(x*l):yl;c>yl&&console.warn(`sigmaRadians, ${C}, is too large and will clip, as it requested ${c} samples when the maximum is set to ${yl}`);const s=[];let d=0;for(let S=0;S<yl;++S){const w=S/l,A=Math.exp(-w*w/2);s.push(A),S===0?d+=A:S<c&&(d+=2*A)}for(let S=0;S<s.length;S++)s[S]=s[S]/d;r.envMap.value=t.texture,r.samples.value=c,r.weights.value=s,r.latitudinal.value=o==="latitudinal",E&&(r.poleAxis.value=E);const{_lodMax:m}=this;r.dTheta.value=n,r.mipInt.value=m-f;const p=this._sizeLods[y],g=3*p*(y>m-jh?y-m+jh:0),T=4*(this._cubeSize-p);Kd(i,g,T,3*p,2*p),e.setRenderTarget(i),e.render(u,Nm)}}function zD(v){const t=[],i=[],f=[];let y=v;const C=v-jh+1+ST.length;for(let o=0;o<C;o++){const E=Math.pow(2,y);i.push(E);let e=1/E;o>v-jh?e=ST[o-v+jh-1]:o===0&&(e=0),f.push(e);const a=1/(E-2),x=-a,u=1+a,r=[x,x,u,x,u,u,x,x,u,u,x,u],h=6,n=6,l=3,c=2,s=1,d=new Float32Array(l*n*h),m=new Float32Array(c*n*h),p=new Float32Array(s*n*h);for(let T=0;T<h;T++){const S=T%3*2/3-1,w=T>2?0:-1,A=[S,w,0,S+2/3,w,0,S+2/3,w+1,0,S,w,0,S+2/3,w+1,0,S,w+1,0];d.set(A,l*n*T),m.set(r,c*n*T);const M=[T,T,T,T,T,T];p.set(M,s*n*T)}const g=new Za;g.setAttribute("position",new $r(d,l)),g.setAttribute("uv",new $r(m,c)),g.setAttribute("faceIndex",new $r(p,s)),t.push(g),y>jh&&y--}return{lodPlanes:t,sizeLods:i,sigmas:f}}function MT(v,t,i){const f=new $l(v,t,i);return f.texture.mapping=Cv,f.texture.name="PMREM.cubeUv",f.scissorTest=!0,f}function Kd(v,t,i,f,y){v.viewport.set(t,i,f,y),v.scissor.set(t,i,f,y)}function GD(v,t,i){const f=new Float32Array(yl),y=new St(0,1,0);return new zo({name:"SphericalGaussianBlur",defines:{n:yl,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${v}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:f},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:y}},vertexShader:Ux(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bo,depthTest:!1,depthWrite:!1})}function RT(){return new zo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ux(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bo,depthTest:!1,depthWrite:!1})}function PT(){return new zo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ux(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bo,depthTest:!1,depthWrite:!1})}function Ux(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WD(v){let t=new WeakMap,i=null;function f(E){if(E&&E.isTexture){const e=E.mapping,a=e===j0||e===Z0,x=e===wu||e===Mu;if(a||x){let u=t.get(E);const r=u!==void 0?u.texture.pmremVersion:0;if(E.isRenderTargetTexture&&E.pmremVersion!==r)return i===null&&(i=new wT(v)),u=a?i.fromEquirectangular(E,u):i.fromCubemap(E,u),u.texture.pmremVersion=E.pmremVersion,t.set(E,u),u.texture;if(u!==void 0)return u.texture;{const h=E.image;return a&&h&&h.height>0||x&&h&&y(h)?(i===null&&(i=new wT(v)),u=a?i.fromEquirectangular(E):i.fromCubemap(E),u.texture.pmremVersion=E.pmremVersion,t.set(E,u),E.addEventListener("dispose",C),u.texture):null}}}return E}function y(E){let e=0;const a=6;for(let x=0;x<a;x++)E[x]!==void 0&&e++;return e===a}function C(E){const e=E.target;e.removeEventListener("dispose",C);const a=t.get(e);a!==void 0&&(t.delete(e),a.dispose())}function o(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:f,dispose:o}}function HD(v){const t={};function i(f){if(t[f]!==void 0)return t[f];let y;switch(f){case"WEBGL_depth_texture":y=v.getExtension("WEBGL_depth_texture")||v.getExtension("MOZ_WEBGL_depth_texture")||v.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":y=v.getExtension("EXT_texture_filter_anisotropic")||v.getExtension("MOZ_EXT_texture_filter_anisotropic")||v.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":y=v.getExtension("WEBGL_compressed_texture_s3tc")||v.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":y=v.getExtension("WEBGL_compressed_texture_pvrtc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:y=v.getExtension(f)}return t[f]=y,y}return{has:function(f){return i(f)!==null},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(f){const y=i(f);return y===null&&Hh("THREE.WebGLRenderer: "+f+" extension not supported."),y}}}function _D(v,t,i,f){const y={},C=new WeakMap;function o(u){const r=u.target;r.index!==null&&t.remove(r.index);for(const n in r.attributes)t.remove(r.attributes[n]);r.removeEventListener("dispose",o),delete y[r.id];const h=C.get(r);h&&(t.remove(h),C.delete(r)),f.releaseStatesOfGeometry(r),r.isInstancedBufferGeometry===!0&&delete r._maxInstanceCount,i.memory.geometries--}function E(u,r){return y[r.id]===!0||(r.addEventListener("dispose",o),y[r.id]=!0,i.memory.geometries++),r}function e(u){const r=u.attributes;for(const h in r)t.update(r[h],v.ARRAY_BUFFER)}function a(u){const r=[],h=u.index,n=u.attributes.position;let l=0;if(h!==null){const d=h.array;l=h.version;for(let m=0,p=d.length;m<p;m+=3){const g=d[m+0],T=d[m+1],S=d[m+2];r.push(g,T,T,S,S,g)}}else if(n!==void 0){const d=n.array;l=n.version;for(let m=0,p=d.length/3-1;m<p;m+=3){const g=m+0,T=m+1,S=m+2;r.push(g,T,T,S,S,g)}}else return;const c=new(LC(r)?VC:UC)(r,1);c.version=l;const s=C.get(u);s&&t.remove(s),C.set(u,c)}function x(u){const r=C.get(u);if(r){const h=u.index;h!==null&&r.version<h.version&&a(u)}else a(u);return C.get(u)}return{get:E,update:e,getWireframeAttribute:x}}function XD(v,t,i){let f;function y(r){f=r}let C,o;function E(r){C=r.type,o=r.bytesPerElement}function e(r,h){v.drawElements(f,h,C,r*o),i.update(h,f,1)}function a(r,h,n){n!==0&&(v.drawElementsInstanced(f,h,C,r*o,n),i.update(h,f,n))}function x(r,h,n){if(n===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(f,h,0,C,r,0,n);let c=0;for(let s=0;s<n;s++)c+=h[s];i.update(c,f,1)}function u(r,h,n,l){if(n===0)return;const c=t.get("WEBGL_multi_draw");if(c===null)for(let s=0;s<r.length;s++)a(r[s]/o,h[s],l[s]);else{c.multiDrawElementsInstancedWEBGL(f,h,0,C,r,0,l,0,n);let s=0;for(let d=0;d<n;d++)s+=h[d]*l[d];i.update(s,f,1)}}this.setMode=y,this.setIndex=E,this.render=e,this.renderInstances=a,this.renderMultiDraw=x,this.renderMultiDrawInstances=u}function YD(v){const t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function f(C,o,E){switch(i.calls++,o){case v.TRIANGLES:i.triangles+=E*(C/3);break;case v.LINES:i.lines+=E*(C/2);break;case v.LINE_STRIP:i.lines+=E*(C-1);break;case v.LINE_LOOP:i.lines+=E*C;break;case v.POINTS:i.points+=E*C;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function y(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:y,update:f}}function kD(v,t,i){const f=new WeakMap,y=new gi;function C(o,E,e){const a=o.morphTargetInfluences,x=E.morphAttributes.position||E.morphAttributes.normal||E.morphAttributes.color,u=x!==void 0?x.length:0;let r=f.get(E);if(r===void 0||r.count!==u){let M=function(){w.dispose(),f.delete(E),E.removeEventListener("dispose",M)};var h=M;r!==void 0&&r.texture.dispose();const n=E.morphAttributes.position!==void 0,l=E.morphAttributes.normal!==void 0,c=E.morphAttributes.color!==void 0,s=E.morphAttributes.position||[],d=E.morphAttributes.normal||[],m=E.morphAttributes.color||[];let p=0;n===!0&&(p=1),l===!0&&(p=2),c===!0&&(p=3);let g=E.attributes.position.count*p,T=1;g>t.maxTextureSize&&(T=Math.ceil(g/t.maxTextureSize),g=t.maxTextureSize);const S=new Float32Array(g*T*4*u),w=new DC(S,g,T,u);w.type=ba,w.needsUpdate=!0;const A=p*4;for(let R=0;R<u;R++){const P=s[R],b=d[R],F=m[R],I=g*T*4*R;for(let L=0;L<P.count;L++){const D=L*A;n===!0&&(y.fromBufferAttribute(P,L),S[I+D+0]=y.x,S[I+D+1]=y.y,S[I+D+2]=y.z,S[I+D+3]=0),l===!0&&(y.fromBufferAttribute(b,L),S[I+D+4]=y.x,S[I+D+5]=y.y,S[I+D+6]=y.z,S[I+D+7]=0),c===!0&&(y.fromBufferAttribute(F,L),S[I+D+8]=y.x,S[I+D+9]=y.y,S[I+D+10]=y.z,S[I+D+11]=F.itemSize===4?y.w:1)}}r={count:u,texture:w,size:new ei(g,T)},f.set(E,r),E.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)e.getUniforms().setValue(v,"morphTexture",o.morphTexture,i);else{let n=0;for(let c=0;c<a.length;c++)n+=a[c];const l=E.morphTargetsRelative?1:1-n;e.getUniforms().setValue(v,"morphTargetBaseInfluence",l),e.getUniforms().setValue(v,"morphTargetInfluences",a)}e.getUniforms().setValue(v,"morphTargetsTexture",r.texture,i),e.getUniforms().setValue(v,"morphTargetsTextureSize",r.size)}return{update:C}}function $D(v,t,i,f){let y=new WeakMap;function C(e){const a=f.render.frame,x=e.geometry,u=t.get(e,x);if(y.get(u)!==a&&(t.update(u),y.set(u,a)),e.isInstancedMesh&&(e.hasEventListener("dispose",E)===!1&&e.addEventListener("dispose",E),y.get(e)!==a&&(i.update(e.instanceMatrix,v.ARRAY_BUFFER),e.instanceColor!==null&&i.update(e.instanceColor,v.ARRAY_BUFFER),y.set(e,a))),e.isSkinnedMesh){const r=e.skeleton;y.get(r)!==a&&(r.update(),y.set(r,a))}return u}function o(){y=new WeakMap}function E(e){const a=e.target;a.removeEventListener("dispose",E),i.remove(a.instanceMatrix),a.instanceColor!==null&&i.remove(a.instanceColor)}return{update:C,dispose:o}}const kC=new fs,bT=new HC(1,1),$C=new DC,KC=new T4,jC=new WC,IT=[],LT=[],FT=new Float32Array(16),DT=new Float32Array(9),OT=new Float32Array(4);function Zu(v,t,i){const f=v[0];if(f<=0||f>0)return v;const y=t*i;let C=IT[y];if(C===void 0&&(C=new Float32Array(y),IT[y]=C),t!==0){f.toArray(C,0);for(let o=1,E=0;o!==t;++o)E+=i,v[o].toArray(C,E)}return C}function vn(v,t){if(v.length!==t.length)return!1;for(let i=0,f=v.length;i<f;i++)if(v[i]!==t[i])return!1;return!0}function mn(v,t){for(let i=0,f=t.length;i<f;i++)v[i]=t[i]}function wv(v,t){let i=LT[t];i===void 0&&(i=new Int32Array(t),LT[t]=i);for(let f=0;f!==t;++f)i[f]=v.allocateTextureUnit();return i}function KD(v,t){const i=this.cache;i[0]!==t&&(v.uniform1f(this.addr,t),i[0]=t)}function jD(v,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(v.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(vn(i,t))return;v.uniform2fv(this.addr,t),mn(i,t)}}function ZD(v,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(v.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(v.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(vn(i,t))return;v.uniform3fv(this.addr,t),mn(i,t)}}function JD(v,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(v.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(vn(i,t))return;v.uniform4fv(this.addr,t),mn(i,t)}}function QD(v,t){const i=this.cache,f=t.elements;if(f===void 0){if(vn(i,t))return;v.uniformMatrix2fv(this.addr,!1,t),mn(i,t)}else{if(vn(i,f))return;OT.set(f),v.uniformMatrix2fv(this.addr,!1,OT),mn(i,f)}}function qD(v,t){const i=this.cache,f=t.elements;if(f===void 0){if(vn(i,t))return;v.uniformMatrix3fv(this.addr,!1,t),mn(i,t)}else{if(vn(i,f))return;DT.set(f),v.uniformMatrix3fv(this.addr,!1,DT),mn(i,f)}}function t5(v,t){const i=this.cache,f=t.elements;if(f===void 0){if(vn(i,t))return;v.uniformMatrix4fv(this.addr,!1,t),mn(i,t)}else{if(vn(i,f))return;FT.set(f),v.uniformMatrix4fv(this.addr,!1,FT),mn(i,f)}}function e5(v,t){const i=this.cache;i[0]!==t&&(v.uniform1i(this.addr,t),i[0]=t)}function i5(v,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(v.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(vn(i,t))return;v.uniform2iv(this.addr,t),mn(i,t)}}function n5(v,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(v.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(vn(i,t))return;v.uniform3iv(this.addr,t),mn(i,t)}}function s5(v,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(v.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(vn(i,t))return;v.uniform4iv(this.addr,t),mn(i,t)}}function r5(v,t){const i=this.cache;i[0]!==t&&(v.uniform1ui(this.addr,t),i[0]=t)}function a5(v,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(v.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(vn(i,t))return;v.uniform2uiv(this.addr,t),mn(i,t)}}function o5(v,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(v.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(vn(i,t))return;v.uniform3uiv(this.addr,t),mn(i,t)}}function l5(v,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(v.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(vn(i,t))return;v.uniform4uiv(this.addr,t),mn(i,t)}}function h5(v,t,i){const f=this.cache,y=i.allocateTextureUnit();f[0]!==y&&(v.uniform1i(this.addr,y),f[0]=y);let C;this.type===v.SAMPLER_2D_SHADOW?(bT.compareFunction=IC,C=bT):C=kC,i.setTexture2D(t||C,y)}function u5(v,t,i){const f=this.cache,y=i.allocateTextureUnit();f[0]!==y&&(v.uniform1i(this.addr,y),f[0]=y),i.setTexture3D(t||KC,y)}function f5(v,t,i){const f=this.cache,y=i.allocateTextureUnit();f[0]!==y&&(v.uniform1i(this.addr,y),f[0]=y),i.setTextureCube(t||jC,y)}function c5(v,t,i){const f=this.cache,y=i.allocateTextureUnit();f[0]!==y&&(v.uniform1i(this.addr,y),f[0]=y),i.setTexture2DArray(t||$C,y)}function d5(v){switch(v){case 5126:return KD;case 35664:return jD;case 35665:return ZD;case 35666:return JD;case 35674:return QD;case 35675:return qD;case 35676:return t5;case 5124:case 35670:return e5;case 35667:case 35671:return i5;case 35668:case 35672:return n5;case 35669:case 35673:return s5;case 5125:return r5;case 36294:return a5;case 36295:return o5;case 36296:return l5;case 35678:case 36198:case 36298:case 36306:case 35682:return h5;case 35679:case 36299:case 36307:return u5;case 35680:case 36300:case 36308:case 36293:return f5;case 36289:case 36303:case 36311:case 36292:return c5}}function p5(v,t){v.uniform1fv(this.addr,t)}function v5(v,t){const i=Zu(t,this.size,2);v.uniform2fv(this.addr,i)}function m5(v,t){const i=Zu(t,this.size,3);v.uniform3fv(this.addr,i)}function g5(v,t){const i=Zu(t,this.size,4);v.uniform4fv(this.addr,i)}function x5(v,t){const i=Zu(t,this.size,4);v.uniformMatrix2fv(this.addr,!1,i)}function y5(v,t){const i=Zu(t,this.size,9);v.uniformMatrix3fv(this.addr,!1,i)}function T5(v,t){const i=Zu(t,this.size,16);v.uniformMatrix4fv(this.addr,!1,i)}function E5(v,t){v.uniform1iv(this.addr,t)}function S5(v,t){v.uniform2iv(this.addr,t)}function C5(v,t){v.uniform3iv(this.addr,t)}function A5(v,t){v.uniform4iv(this.addr,t)}function w5(v,t){v.uniform1uiv(this.addr,t)}function M5(v,t){v.uniform2uiv(this.addr,t)}function R5(v,t){v.uniform3uiv(this.addr,t)}function P5(v,t){v.uniform4uiv(this.addr,t)}function b5(v,t,i){const f=this.cache,y=t.length,C=wv(i,y);vn(f,C)||(v.uniform1iv(this.addr,C),mn(f,C));for(let o=0;o!==y;++o)i.setTexture2D(t[o]||kC,C[o])}function I5(v,t,i){const f=this.cache,y=t.length,C=wv(i,y);vn(f,C)||(v.uniform1iv(this.addr,C),mn(f,C));for(let o=0;o!==y;++o)i.setTexture3D(t[o]||KC,C[o])}function L5(v,t,i){const f=this.cache,y=t.length,C=wv(i,y);vn(f,C)||(v.uniform1iv(this.addr,C),mn(f,C));for(let o=0;o!==y;++o)i.setTextureCube(t[o]||jC,C[o])}function F5(v,t,i){const f=this.cache,y=t.length,C=wv(i,y);vn(f,C)||(v.uniform1iv(this.addr,C),mn(f,C));for(let o=0;o!==y;++o)i.setTexture2DArray(t[o]||$C,C[o])}function D5(v){switch(v){case 5126:return p5;case 35664:return v5;case 35665:return m5;case 35666:return g5;case 35674:return x5;case 35675:return y5;case 35676:return T5;case 5124:case 35670:return E5;case 35667:case 35671:return S5;case 35668:case 35672:return C5;case 35669:case 35673:return A5;case 5125:return w5;case 36294:return M5;case 36295:return R5;case 36296:return P5;case 35678:case 36198:case 36298:case 36306:case 35682:return b5;case 35679:case 36299:case 36307:return I5;case 35680:case 36300:case 36308:case 36293:return L5;case 36289:case 36303:case 36311:case 36292:return F5}}class O5{constructor(t,i,f){this.id=t,this.addr=f,this.cache=[],this.type=i.type,this.setValue=d5(i.type)}}class N5{constructor(t,i,f){this.id=t,this.addr=f,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=D5(i.type)}}class B5{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,i,f){const y=this.seq;for(let C=0,o=y.length;C!==o;++C){const E=y[C];E.setValue(t,i[E.id],f)}}}const Gm=/(\w+)(\])?(\[|\.)?/g;function NT(v,t){v.seq.push(t),v.map[t.id]=t}function U5(v,t,i){const f=v.name,y=f.length;for(Gm.lastIndex=0;;){const C=Gm.exec(f),o=Gm.lastIndex;let E=C[1];const e=C[2]==="]",a=C[3];if(e&&(E=E|0),a===void 0||a==="["&&o+2===y){NT(i,a===void 0?new O5(E,v,t):new N5(E,v,t));break}else{let u=i.map[E];u===void 0&&(u=new B5(E),NT(i,u)),i=u}}}class gp{constructor(t,i){this.seq=[],this.map={};const f=t.getProgramParameter(i,t.ACTIVE_UNIFORMS);for(let y=0;y<f;++y){const C=t.getActiveUniform(i,y),o=t.getUniformLocation(i,C.name);U5(C,o,this)}}setValue(t,i,f,y){const C=this.map[i];C!==void 0&&C.setValue(t,f,y)}setOptional(t,i,f){const y=i[f];y!==void 0&&this.setValue(t,f,y)}static upload(t,i,f,y){for(let C=0,o=i.length;C!==o;++C){const E=i[C],e=f[E.id];e.needsUpdate!==!1&&E.setValue(t,e.value,y)}}static seqWithValue(t,i){const f=[];for(let y=0,C=t.length;y!==C;++y){const o=t[y];o.id in i&&f.push(o)}return f}}function BT(v,t,i){const f=v.createShader(t);return v.shaderSource(f,i),v.compileShader(f),f}const V5=37297;let z5=0;function G5(v,t){const i=v.split(`
`),f=[],y=Math.max(t-6,0),C=Math.min(t+6,i.length);for(let o=y;o<C;o++){const E=o+1;f.push(`${E===t?">":" "} ${E}: ${i[o]}`)}return f.join(`
`)}const UT=new Be;function W5(v){oi._getMatrix(UT,oi.workingColorSpace,v);const t=`mat3( ${UT.elements.map(i=>i.toFixed(4))} )`;switch(oi.getTransfer(v)){case Np:return[t,"LinearTransferOETF"];case mi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",v),[t,"LinearTransferOETF"]}}function VT(v,t,i){const f=v.getShaderParameter(t,v.COMPILE_STATUS),y=v.getShaderInfoLog(t).trim();if(f&&y==="")return"";const C=/ERROR: 0:(\d+)/.exec(y);if(C){const o=parseInt(C[1]);return i.toUpperCase()+`

`+y+`

`+G5(v.getShaderSource(t),o)}else return y}function H5(v,t){const i=W5(t);return[`vec4 ${v}( vec4 value ) {`,`	return ${i[1]}( vec4( value.rgb * ${i[0]}, value.a ) );`,"}"].join(`
`)}function _5(v,t){let i;switch(t){case kI:i="Linear";break;case $I:i="Reinhard";break;case KI:i="Cineon";break;case jI:i="ACESFilmic";break;case JI:i="AgX";break;case QI:i="Neutral";break;case ZI:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+v+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}const jd=new St;function X5(){oi.getLuminanceCoefficients(jd);const v=jd.x.toFixed(4),t=jd.y.toFixed(4),i=jd.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${v}, ${t}, ${i} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Y5(v){return[v.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",v.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Yf).join(`
`)}function k5(v){const t=[];for(const i in v){const f=v[i];f!==!1&&t.push("#define "+i+" "+f)}return t.join(`
`)}function $5(v,t){const i={},f=v.getProgramParameter(t,v.ACTIVE_ATTRIBUTES);for(let y=0;y<f;y++){const C=v.getActiveAttrib(t,y),o=C.name;let E=1;C.type===v.FLOAT_MAT2&&(E=2),C.type===v.FLOAT_MAT3&&(E=3),C.type===v.FLOAT_MAT4&&(E=4),i[o]={type:C.type,location:v.getAttribLocation(t,o),locationSize:E}}return i}function Yf(v){return v!==""}function zT(v,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return v.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function GT(v,t){return v.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const K5=/^[ \t]*#include +<([\w\d./]+)>/gm;function Mg(v){return v.replace(K5,Z5)}const j5=new Map;function Z5(v,t){let i=Ue[t];if(i===void 0){const f=j5.get(t);if(f!==void 0)i=Ue[f],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,f);else throw new Error("Can not resolve #include <"+t+">")}return Mg(i)}const J5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function WT(v){return v.replace(J5,Q5)}function Q5(v,t,i,f){let y="";for(let C=parseInt(t);C<parseInt(i);C++)y+=f.replace(/\[\s*i\s*\]/g,"[ "+C+" ]").replace(/UNROLLED_LOOP_INDEX/g,C);return y}function HT(v){let t=`precision ${v.precision} float;
	precision ${v.precision} int;
	precision ${v.precision} sampler2D;
	precision ${v.precision} samplerCube;
	precision ${v.precision} sampler3D;
	precision ${v.precision} sampler2DArray;
	precision ${v.precision} sampler2DShadow;
	precision ${v.precision} samplerCubeShadow;
	precision ${v.precision} sampler2DArrayShadow;
	precision ${v.precision} isampler2D;
	precision ${v.precision} isampler3D;
	precision ${v.precision} isamplerCube;
	precision ${v.precision} isampler2DArray;
	precision ${v.precision} usampler2D;
	precision ${v.precision} usampler3D;
	precision ${v.precision} usamplerCube;
	precision ${v.precision} usampler2DArray;
	`;return v.precision==="highp"?t+=`
#define HIGH_PRECISION`:v.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:v.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function q5(v){let t="SHADOWMAP_TYPE_BASIC";return v.shadowMapType===mC?t="SHADOWMAP_TYPE_PCF":v.shadowMapType===wI?t="SHADOWMAP_TYPE_PCF_SOFT":v.shadowMapType===Ea&&(t="SHADOWMAP_TYPE_VSM"),t}function tO(v){let t="ENVMAP_TYPE_CUBE";if(v.envMap)switch(v.envMapMode){case wu:case Mu:t="ENVMAP_TYPE_CUBE";break;case Cv:t="ENVMAP_TYPE_CUBE_UV";break}return t}function eO(v){let t="ENVMAP_MODE_REFLECTION";if(v.envMap)switch(v.envMapMode){case Mu:t="ENVMAP_MODE_REFRACTION";break}return t}function iO(v){let t="ENVMAP_BLENDING_NONE";if(v.envMap)switch(v.combine){case gC:t="ENVMAP_BLENDING_MULTIPLY";break;case XI:t="ENVMAP_BLENDING_MIX";break;case YI:t="ENVMAP_BLENDING_ADD";break}return t}function nO(v){const t=v.envMapCubeUVHeight;if(t===null)return null;const i=Math.log2(t)-2,f=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:f,maxMip:i}}function sO(v,t,i,f){const y=v.getContext(),C=i.defines;let o=i.vertexShader,E=i.fragmentShader;const e=q5(i),a=tO(i),x=eO(i),u=iO(i),r=nO(i),h=Y5(i),n=k5(C),l=y.createProgram();let c,s,d=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(c=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,n].filter(Yf).join(`
`),c.length>0&&(c+=`
`),s=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,n].filter(Yf).join(`
`),s.length>0&&(s+=`
`)):(c=[HT(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,n,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+x:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+e:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Yf).join(`
`),s=[HT(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,n,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+a:"",i.envMap?"#define "+x:"",i.envMap?"#define "+u:"",r?"#define CUBEUV_TEXEL_WIDTH "+r.texelWidth:"",r?"#define CUBEUV_TEXEL_HEIGHT "+r.texelHeight:"",r?"#define CUBEUV_MAX_MIP "+r.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+e:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Io?"#define TONE_MAPPING":"",i.toneMapping!==Io?Ue.tonemapping_pars_fragment:"",i.toneMapping!==Io?_5("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Ue.colorspace_pars_fragment,H5("linearToOutputTexel",i.outputColorSpace),X5(),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(Yf).join(`
`)),o=Mg(o),o=zT(o,i),o=GT(o,i),E=Mg(E),E=zT(E,i),E=GT(E,i),o=WT(o),E=WT(E),i.isRawShaderMaterial!==!0&&(d=`#version 300 es
`,c=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+c,s=["#define varying in",i.glslVersion===tT?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===tT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+s);const m=d+c+o,p=d+s+E,g=BT(y,y.VERTEX_SHADER,m),T=BT(y,y.FRAGMENT_SHADER,p);y.attachShader(l,g),y.attachShader(l,T),i.index0AttributeName!==void 0?y.bindAttribLocation(l,0,i.index0AttributeName):i.morphTargets===!0&&y.bindAttribLocation(l,0,"position"),y.linkProgram(l);function S(R){if(v.debug.checkShaderErrors){const P=y.getProgramInfoLog(l).trim(),b=y.getShaderInfoLog(g).trim(),F=y.getShaderInfoLog(T).trim();let I=!0,L=!0;if(y.getProgramParameter(l,y.LINK_STATUS)===!1)if(I=!1,typeof v.debug.onShaderError=="function")v.debug.onShaderError(y,l,g,T);else{const D=VT(y,g,"vertex"),O=VT(y,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+y.getError()+" - VALIDATE_STATUS "+y.getProgramParameter(l,y.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+P+`
`+D+`
`+O)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(b===""||F==="")&&(L=!1);L&&(R.diagnostics={runnable:I,programLog:P,vertexShader:{log:b,prefix:c},fragmentShader:{log:F,prefix:s}})}y.deleteShader(g),y.deleteShader(T),w=new gp(y,l),A=$5(y,l)}let w;this.getUniforms=function(){return w===void 0&&S(this),w};let A;this.getAttributes=function(){return A===void 0&&S(this),A};let M=i.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=y.getProgramParameter(l,V5)),M},this.destroy=function(){f.releaseStatesOfProgram(this),y.deleteProgram(l),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=z5++,this.cacheKey=t,this.usedTimes=1,this.program=l,this.vertexShader=g,this.fragmentShader=T,this}let rO=0;class aO{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.vertexShader,f=t.fragmentShader,y=this._getShaderStage(i),C=this._getShaderStage(f),o=this._getShaderCacheForMaterial(t);return o.has(y)===!1&&(o.add(y),y.usedTimes++),o.has(C)===!1&&(o.add(C),C.usedTimes++),this}remove(t){const i=this.materialCache.get(t);for(const f of i)f.usedTimes--,f.usedTimes===0&&this.shaderCache.delete(f.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const i=this.materialCache;let f=i.get(t);return f===void 0&&(f=new Set,i.set(t,f)),f}_getShaderStage(t){const i=this.shaderCache;let f=i.get(t);return f===void 0&&(f=new oO(t),i.set(t,f)),f}}class oO{constructor(t){this.id=rO++,this.code=t,this.usedTimes=0}}function lO(v,t,i,f,y,C,o){const E=new OC,e=new aO,a=new Set,x=[],u=y.logarithmicDepthBuffer,r=y.vertexTextures;let h=y.precision;const n={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function l(A){return a.add(A),A===0?"uv":`uv${A}`}function c(A,M,R,P,b){const F=P.fog,I=b.geometry,L=A.isMeshStandardMaterial?P.environment:null,D=(A.isMeshStandardMaterial?i:t).get(A.envMap||L),O=D&&D.mapping===Cv?D.image.height:null,z=n[A.type];A.precision!==null&&(h=y.getMaxPrecision(A.precision),h!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",h,"instead."));const W=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,X=W!==void 0?W.length:0;let _=0;I.morphAttributes.position!==void 0&&(_=1),I.morphAttributes.normal!==void 0&&(_=2),I.morphAttributes.color!==void 0&&(_=3);let U,G,N,H;if(z){const We=Wr[z];U=We.vertexShader,G=We.fragmentShader}else U=A.vertexShader,G=A.fragmentShader,e.update(A),N=e.getVertexShaderID(A),H=e.getFragmentShaderID(A);const V=v.getRenderTarget(),$=v.state.buffers.depth.getReversed(),j=b.isInstancedMesh===!0,k=b.isBatchedMesh===!0,Q=!!A.map,et=!!A.matcap,at=!!D,q=!!A.aoMap,ft=!!A.lightMap,vt=!!A.bumpMap,Tt=!!A.normalMap,ct=!!A.displacementMap,Nt=!!A.emissiveMap,yt=!!A.metalnessMap,it=!!A.roughnessMap,Z=A.anisotropy>0,lt=A.clearcoat>0,pt=A.dispersion>0,Rt=A.iridescence>0,At=A.sheen>0,Kt=A.transmission>0,Bt=Z&&!!A.anisotropyMap,Wt=lt&&!!A.clearcoatMap,he=lt&&!!A.clearcoatNormalMap,zt=lt&&!!A.clearcoatRoughnessMap,Ut=Rt&&!!A.iridescenceMap,Xt=Rt&&!!A.iridescenceThicknessMap,Pt=At&&!!A.sheenColorMap,$t=At&&!!A.sheenRoughnessMap,pe=!!A.specularMap,fe=!!A.specularColorMap,Fe=!!A.specularIntensityMap,dt=Kt&&!!A.transmissionMap,Zt=Kt&&!!A.thicknessMap,Ft=!!A.gradientMap,Dt=!!A.alphaMap,ne=A.alphaTest>0,ee=!!A.alphaHash,Se=!!A.extensions;let Ei=Io;A.toneMapped&&(V===null||V.isXRRenderTarget===!0)&&(Ei=v.toneMapping);const Fi={shaderID:z,shaderType:A.type,shaderName:A.name,vertexShader:U,fragmentShader:G,defines:A.defines,customVertexShaderID:N,customFragmentShaderID:H,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:h,batching:k,batchingColor:k&&b._colorsTexture!==null,instancing:j,instancingColor:j&&b.instanceColor!==null,instancingMorph:j&&b.morphTexture!==null,supportsVertexTextures:r,outputColorSpace:V===null?v.outputColorSpace:V.isXRRenderTarget===!0?V.texture.colorSpace:bu,alphaToCoverage:!!A.alphaToCoverage,map:Q,matcap:et,envMap:at,envMapMode:at&&D.mapping,envMapCubeUVHeight:O,aoMap:q,lightMap:ft,bumpMap:vt,normalMap:Tt,displacementMap:r&&ct,emissiveMap:Nt,normalMapObjectSpace:Tt&&A.normalMapType===i4,normalMapTangentSpace:Tt&&A.normalMapType===bC,metalnessMap:yt,roughnessMap:it,anisotropy:Z,anisotropyMap:Bt,clearcoat:lt,clearcoatMap:Wt,clearcoatNormalMap:he,clearcoatRoughnessMap:zt,dispersion:pt,iridescence:Rt,iridescenceMap:Ut,iridescenceThicknessMap:Xt,sheen:At,sheenColorMap:Pt,sheenRoughnessMap:$t,specularMap:pe,specularColorMap:fe,specularIntensityMap:Fe,transmission:Kt,transmissionMap:dt,thicknessMap:Zt,gradientMap:Ft,opaque:A.transparent===!1&&A.blending===qh&&A.alphaToCoverage===!1,alphaMap:Dt,alphaTest:ne,alphaHash:ee,combine:A.combine,mapUv:Q&&l(A.map.channel),aoMapUv:q&&l(A.aoMap.channel),lightMapUv:ft&&l(A.lightMap.channel),bumpMapUv:vt&&l(A.bumpMap.channel),normalMapUv:Tt&&l(A.normalMap.channel),displacementMapUv:ct&&l(A.displacementMap.channel),emissiveMapUv:Nt&&l(A.emissiveMap.channel),metalnessMapUv:yt&&l(A.metalnessMap.channel),roughnessMapUv:it&&l(A.roughnessMap.channel),anisotropyMapUv:Bt&&l(A.anisotropyMap.channel),clearcoatMapUv:Wt&&l(A.clearcoatMap.channel),clearcoatNormalMapUv:he&&l(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:zt&&l(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ut&&l(A.iridescenceMap.channel),iridescenceThicknessMapUv:Xt&&l(A.iridescenceThicknessMap.channel),sheenColorMapUv:Pt&&l(A.sheenColorMap.channel),sheenRoughnessMapUv:$t&&l(A.sheenRoughnessMap.channel),specularMapUv:pe&&l(A.specularMap.channel),specularColorMapUv:fe&&l(A.specularColorMap.channel),specularIntensityMapUv:Fe&&l(A.specularIntensityMap.channel),transmissionMapUv:dt&&l(A.transmissionMap.channel),thicknessMapUv:Zt&&l(A.thicknessMap.channel),alphaMapUv:Dt&&l(A.alphaMap.channel),vertexTangents:!!I.attributes.tangent&&(Tt||Z),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!I.attributes.color&&I.attributes.color.itemSize===4,pointsUvs:b.isPoints===!0&&!!I.attributes.uv&&(Q||Dt),fog:!!F,useFog:A.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:u,reverseDepthBuffer:$,skinning:b.isSkinnedMesh===!0,morphTargets:I.morphAttributes.position!==void 0,morphNormals:I.morphAttributes.normal!==void 0,morphColors:I.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:_,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:v.shadowMap.enabled&&R.length>0,shadowMapType:v.shadowMap.type,toneMapping:Ei,decodeVideoTexture:Q&&A.map.isVideoTexture===!0&&oi.getTransfer(A.map.colorSpace)===mi,decodeVideoTextureEmissive:Nt&&A.emissiveMap.isVideoTexture===!0&&oi.getTransfer(A.emissiveMap.colorSpace)===mi,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===Ra,flipSided:A.side===us,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Se&&A.extensions.clipCullDistance===!0&&f.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Se&&A.extensions.multiDraw===!0||k)&&f.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:f.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return Fi.vertexUv1s=a.has(1),Fi.vertexUv2s=a.has(2),Fi.vertexUv3s=a.has(3),a.clear(),Fi}function s(A){const M=[];if(A.shaderID?M.push(A.shaderID):(M.push(A.customVertexShaderID),M.push(A.customFragmentShaderID)),A.defines!==void 0)for(const R in A.defines)M.push(R),M.push(A.defines[R]);return A.isRawShaderMaterial===!1&&(d(M,A),m(M,A),M.push(v.outputColorSpace)),M.push(A.customProgramCacheKey),M.join()}function d(A,M){A.push(M.precision),A.push(M.outputColorSpace),A.push(M.envMapMode),A.push(M.envMapCubeUVHeight),A.push(M.mapUv),A.push(M.alphaMapUv),A.push(M.lightMapUv),A.push(M.aoMapUv),A.push(M.bumpMapUv),A.push(M.normalMapUv),A.push(M.displacementMapUv),A.push(M.emissiveMapUv),A.push(M.metalnessMapUv),A.push(M.roughnessMapUv),A.push(M.anisotropyMapUv),A.push(M.clearcoatMapUv),A.push(M.clearcoatNormalMapUv),A.push(M.clearcoatRoughnessMapUv),A.push(M.iridescenceMapUv),A.push(M.iridescenceThicknessMapUv),A.push(M.sheenColorMapUv),A.push(M.sheenRoughnessMapUv),A.push(M.specularMapUv),A.push(M.specularColorMapUv),A.push(M.specularIntensityMapUv),A.push(M.transmissionMapUv),A.push(M.thicknessMapUv),A.push(M.combine),A.push(M.fogExp2),A.push(M.sizeAttenuation),A.push(M.morphTargetsCount),A.push(M.morphAttributeCount),A.push(M.numDirLights),A.push(M.numPointLights),A.push(M.numSpotLights),A.push(M.numSpotLightMaps),A.push(M.numHemiLights),A.push(M.numRectAreaLights),A.push(M.numDirLightShadows),A.push(M.numPointLightShadows),A.push(M.numSpotLightShadows),A.push(M.numSpotLightShadowsWithMaps),A.push(M.numLightProbes),A.push(M.shadowMapType),A.push(M.toneMapping),A.push(M.numClippingPlanes),A.push(M.numClipIntersection),A.push(M.depthPacking)}function m(A,M){E.disableAll(),M.supportsVertexTextures&&E.enable(0),M.instancing&&E.enable(1),M.instancingColor&&E.enable(2),M.instancingMorph&&E.enable(3),M.matcap&&E.enable(4),M.envMap&&E.enable(5),M.normalMapObjectSpace&&E.enable(6),M.normalMapTangentSpace&&E.enable(7),M.clearcoat&&E.enable(8),M.iridescence&&E.enable(9),M.alphaTest&&E.enable(10),M.vertexColors&&E.enable(11),M.vertexAlphas&&E.enable(12),M.vertexUv1s&&E.enable(13),M.vertexUv2s&&E.enable(14),M.vertexUv3s&&E.enable(15),M.vertexTangents&&E.enable(16),M.anisotropy&&E.enable(17),M.alphaHash&&E.enable(18),M.batching&&E.enable(19),M.dispersion&&E.enable(20),M.batchingColor&&E.enable(21),A.push(E.mask),E.disableAll(),M.fog&&E.enable(0),M.useFog&&E.enable(1),M.flatShading&&E.enable(2),M.logarithmicDepthBuffer&&E.enable(3),M.reverseDepthBuffer&&E.enable(4),M.skinning&&E.enable(5),M.morphTargets&&E.enable(6),M.morphNormals&&E.enable(7),M.morphColors&&E.enable(8),M.premultipliedAlpha&&E.enable(9),M.shadowMapEnabled&&E.enable(10),M.doubleSided&&E.enable(11),M.flipSided&&E.enable(12),M.useDepthPacking&&E.enable(13),M.dithering&&E.enable(14),M.transmission&&E.enable(15),M.sheen&&E.enable(16),M.opaque&&E.enable(17),M.pointsUvs&&E.enable(18),M.decodeVideoTexture&&E.enable(19),M.decodeVideoTextureEmissive&&E.enable(20),M.alphaToCoverage&&E.enable(21),A.push(E.mask)}function p(A){const M=n[A.type];let R;if(M){const P=Wr[M];R=O4.clone(P.uniforms)}else R=A.uniforms;return R}function g(A,M){let R;for(let P=0,b=x.length;P<b;P++){const F=x[P];if(F.cacheKey===M){R=F,++R.usedTimes;break}}return R===void 0&&(R=new sO(v,M,A,C),x.push(R)),R}function T(A){if(--A.usedTimes===0){const M=x.indexOf(A);x[M]=x[x.length-1],x.pop(),A.destroy()}}function S(A){e.remove(A)}function w(){e.dispose()}return{getParameters:c,getProgramCacheKey:s,getUniforms:p,acquireProgram:g,releaseProgram:T,releaseShaderCache:S,programs:x,dispose:w}}function hO(){let v=new WeakMap;function t(o){return v.has(o)}function i(o){let E=v.get(o);return E===void 0&&(E={},v.set(o,E)),E}function f(o){v.delete(o)}function y(o,E,e){v.get(o)[E]=e}function C(){v=new WeakMap}return{has:t,get:i,remove:f,update:y,dispose:C}}function uO(v,t){return v.groupOrder!==t.groupOrder?v.groupOrder-t.groupOrder:v.renderOrder!==t.renderOrder?v.renderOrder-t.renderOrder:v.material.id!==t.material.id?v.material.id-t.material.id:v.z!==t.z?v.z-t.z:v.id-t.id}function _T(v,t){return v.groupOrder!==t.groupOrder?v.groupOrder-t.groupOrder:v.renderOrder!==t.renderOrder?v.renderOrder-t.renderOrder:v.z!==t.z?t.z-v.z:v.id-t.id}function XT(){const v=[];let t=0;const i=[],f=[],y=[];function C(){t=0,i.length=0,f.length=0,y.length=0}function o(u,r,h,n,l,c){let s=v[t];return s===void 0?(s={id:u.id,object:u,geometry:r,material:h,groupOrder:n,renderOrder:u.renderOrder,z:l,group:c},v[t]=s):(s.id=u.id,s.object=u,s.geometry=r,s.material=h,s.groupOrder=n,s.renderOrder=u.renderOrder,s.z=l,s.group=c),t++,s}function E(u,r,h,n,l,c){const s=o(u,r,h,n,l,c);h.transmission>0?f.push(s):h.transparent===!0?y.push(s):i.push(s)}function e(u,r,h,n,l,c){const s=o(u,r,h,n,l,c);h.transmission>0?f.unshift(s):h.transparent===!0?y.unshift(s):i.unshift(s)}function a(u,r){i.length>1&&i.sort(u||uO),f.length>1&&f.sort(r||_T),y.length>1&&y.sort(r||_T)}function x(){for(let u=t,r=v.length;u<r;u++){const h=v[u];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:i,transmissive:f,transparent:y,init:C,push:E,unshift:e,finish:x,sort:a}}function fO(){let v=new WeakMap;function t(f,y){const C=v.get(f);let o;return C===void 0?(o=new XT,v.set(f,[o])):y>=C.length?(o=new XT,C.push(o)):o=C[y],o}function i(){v=new WeakMap}return{get:t,dispose:i}}function cO(){const v={};return{get:function(t){if(v[t.id]!==void 0)return v[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new St,color:new ui};break;case"SpotLight":i={position:new St,direction:new St,color:new ui,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new St,color:new ui,distance:0,decay:0};break;case"HemisphereLight":i={direction:new St,skyColor:new ui,groundColor:new ui};break;case"RectAreaLight":i={color:new ui,position:new St,halfWidth:new St,halfHeight:new St};break}return v[t.id]=i,i}}}function dO(){const v={};return{get:function(t){if(v[t.id]!==void 0)return v[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ei};break;case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ei};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ei,shadowCameraNear:1,shadowCameraFar:1e3};break}return v[t.id]=i,i}}}let pO=0;function vO(v,t){return(t.castShadow?2:0)-(v.castShadow?2:0)+(t.map?1:0)-(v.map?1:0)}function mO(v){const t=new cO,i=dO(),f={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)f.probe.push(new St);const y=new St,C=new Vi,o=new Vi;function E(a){let x=0,u=0,r=0;for(let A=0;A<9;A++)f.probe[A].set(0,0,0);let h=0,n=0,l=0,c=0,s=0,d=0,m=0,p=0,g=0,T=0,S=0;a.sort(vO);for(let A=0,M=a.length;A<M;A++){const R=a[A],P=R.color,b=R.intensity,F=R.distance,I=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)x+=P.r*b,u+=P.g*b,r+=P.b*b;else if(R.isLightProbe){for(let L=0;L<9;L++)f.probe[L].addScaledVector(R.sh.coefficients[L],b);S++}else if(R.isDirectionalLight){const L=t.get(R);if(L.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const D=R.shadow,O=i.get(R);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,f.directionalShadow[h]=O,f.directionalShadowMap[h]=I,f.directionalShadowMatrix[h]=R.shadow.matrix,d++}f.directional[h]=L,h++}else if(R.isSpotLight){const L=t.get(R);L.position.setFromMatrixPosition(R.matrixWorld),L.color.copy(P).multiplyScalar(b),L.distance=F,L.coneCos=Math.cos(R.angle),L.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),L.decay=R.decay,f.spot[l]=L;const D=R.shadow;if(R.map&&(f.spotLightMap[g]=R.map,g++,D.updateMatrices(R),R.castShadow&&T++),f.spotLightMatrix[l]=D.matrix,R.castShadow){const O=i.get(R);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,f.spotShadow[l]=O,f.spotShadowMap[l]=I,p++}l++}else if(R.isRectAreaLight){const L=t.get(R);L.color.copy(P).multiplyScalar(b),L.halfWidth.set(R.width*.5,0,0),L.halfHeight.set(0,R.height*.5,0),f.rectArea[c]=L,c++}else if(R.isPointLight){const L=t.get(R);if(L.color.copy(R.color).multiplyScalar(R.intensity),L.distance=R.distance,L.decay=R.decay,R.castShadow){const D=R.shadow,O=i.get(R);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,O.shadowCameraNear=D.camera.near,O.shadowCameraFar=D.camera.far,f.pointShadow[n]=O,f.pointShadowMap[n]=I,f.pointShadowMatrix[n]=R.shadow.matrix,m++}f.point[n]=L,n++}else if(R.isHemisphereLight){const L=t.get(R);L.skyColor.copy(R.color).multiplyScalar(b),L.groundColor.copy(R.groundColor).multiplyScalar(b),f.hemi[s]=L,s++}}c>0&&(v.has("OES_texture_float_linear")===!0?(f.rectAreaLTC1=se.LTC_FLOAT_1,f.rectAreaLTC2=se.LTC_FLOAT_2):(f.rectAreaLTC1=se.LTC_HALF_1,f.rectAreaLTC2=se.LTC_HALF_2)),f.ambient[0]=x,f.ambient[1]=u,f.ambient[2]=r;const w=f.hash;(w.directionalLength!==h||w.pointLength!==n||w.spotLength!==l||w.rectAreaLength!==c||w.hemiLength!==s||w.numDirectionalShadows!==d||w.numPointShadows!==m||w.numSpotShadows!==p||w.numSpotMaps!==g||w.numLightProbes!==S)&&(f.directional.length=h,f.spot.length=l,f.rectArea.length=c,f.point.length=n,f.hemi.length=s,f.directionalShadow.length=d,f.directionalShadowMap.length=d,f.pointShadow.length=m,f.pointShadowMap.length=m,f.spotShadow.length=p,f.spotShadowMap.length=p,f.directionalShadowMatrix.length=d,f.pointShadowMatrix.length=m,f.spotLightMatrix.length=p+g-T,f.spotLightMap.length=g,f.numSpotLightShadowsWithMaps=T,f.numLightProbes=S,w.directionalLength=h,w.pointLength=n,w.spotLength=l,w.rectAreaLength=c,w.hemiLength=s,w.numDirectionalShadows=d,w.numPointShadows=m,w.numSpotShadows=p,w.numSpotMaps=g,w.numLightProbes=S,f.version=pO++)}function e(a,x){let u=0,r=0,h=0,n=0,l=0;const c=x.matrixWorldInverse;for(let s=0,d=a.length;s<d;s++){const m=a[s];if(m.isDirectionalLight){const p=f.directional[u];p.direction.setFromMatrixPosition(m.matrixWorld),y.setFromMatrixPosition(m.target.matrixWorld),p.direction.sub(y),p.direction.transformDirection(c),u++}else if(m.isSpotLight){const p=f.spot[h];p.position.setFromMatrixPosition(m.matrixWorld),p.position.applyMatrix4(c),p.direction.setFromMatrixPosition(m.matrixWorld),y.setFromMatrixPosition(m.target.matrixWorld),p.direction.sub(y),p.direction.transformDirection(c),h++}else if(m.isRectAreaLight){const p=f.rectArea[n];p.position.setFromMatrixPosition(m.matrixWorld),p.position.applyMatrix4(c),o.identity(),C.copy(m.matrixWorld),C.premultiply(c),o.extractRotation(C),p.halfWidth.set(m.width*.5,0,0),p.halfHeight.set(0,m.height*.5,0),p.halfWidth.applyMatrix4(o),p.halfHeight.applyMatrix4(o),n++}else if(m.isPointLight){const p=f.point[r];p.position.setFromMatrixPosition(m.matrixWorld),p.position.applyMatrix4(c),r++}else if(m.isHemisphereLight){const p=f.hemi[l];p.direction.setFromMatrixPosition(m.matrixWorld),p.direction.transformDirection(c),l++}}}return{setup:E,setupView:e,state:f}}function YT(v){const t=new mO(v),i=[],f=[];function y(x){a.camera=x,i.length=0,f.length=0}function C(x){i.push(x)}function o(x){f.push(x)}function E(){t.setup(i)}function e(x){t.setupView(i,x)}const a={lightsArray:i,shadowsArray:f,camera:null,lights:t,transmissionRenderTarget:{}};return{init:y,state:a,setupLights:E,setupLightsView:e,pushLight:C,pushShadow:o}}function gO(v){let t=new WeakMap;function i(y,C=0){const o=t.get(y);let E;return o===void 0?(E=new YT(v),t.set(y,[E])):C>=o.length?(E=new YT(v),o.push(E)):E=o[C],E}function f(){t=new WeakMap}return{get:i,dispose:f}}const xO=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yO=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function TO(v,t,i){let f=new Nx;const y=new ei,C=new ei,o=new gi,E=new _4({depthPacking:e4}),e=new X4,a={},x=i.maxTextureSize,u={[Wa]:us,[us]:Wa,[Ra]:Ra},r=new zo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ei},radius:{value:4}},vertexShader:xO,fragmentShader:yO}),h=r.clone();h.defines.HORIZONTAL_PASS=1;const n=new Za;n.setAttribute("position",new $r(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const l=new hs(n,r),c=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mC;let s=this.type;this.render=function(T,S,w){if(c.enabled===!1||c.autoUpdate===!1&&c.needsUpdate===!1||T.length===0)return;const A=v.getRenderTarget(),M=v.getActiveCubeFace(),R=v.getActiveMipmapLevel(),P=v.state;P.setBlending(bo),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const b=s!==Ea&&this.type===Ea,F=s===Ea&&this.type!==Ea;for(let I=0,L=T.length;I<L;I++){const D=T[I],O=D.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;y.copy(O.mapSize);const z=O.getFrameExtents();if(y.multiply(z),C.copy(O.mapSize),(y.x>x||y.y>x)&&(y.x>x&&(C.x=Math.floor(x/z.x),y.x=C.x*z.x,O.mapSize.x=C.x),y.y>x&&(C.y=Math.floor(x/z.y),y.y=C.y*z.y,O.mapSize.y=C.y)),O.map===null||b===!0||F===!0){const X=this.type!==Ea?{minFilter:yr,magFilter:yr}:{};O.map!==null&&O.map.dispose(),O.map=new $l(y.x,y.y,X),O.map.texture.name=D.name+".shadowMap",O.camera.updateProjectionMatrix()}v.setRenderTarget(O.map),v.clear();const W=O.getViewportCount();for(let X=0;X<W;X++){const _=O.getViewport(X);o.set(C.x*_.x,C.y*_.y,C.x*_.z,C.y*_.w),P.viewport(o),O.updateMatrices(D,X),f=O.getFrustum(),p(S,w,O.camera,D,this.type)}O.isPointLightShadow!==!0&&this.type===Ea&&d(O,w),O.needsUpdate=!1}s=this.type,c.needsUpdate=!1,v.setRenderTarget(A,M,R)};function d(T,S){const w=t.update(l);r.defines.VSM_SAMPLES!==T.blurSamples&&(r.defines.VSM_SAMPLES=T.blurSamples,h.defines.VSM_SAMPLES=T.blurSamples,r.needsUpdate=!0,h.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new $l(y.x,y.y)),r.uniforms.shadow_pass.value=T.map.texture,r.uniforms.resolution.value=T.mapSize,r.uniforms.radius.value=T.radius,v.setRenderTarget(T.mapPass),v.clear(),v.renderBufferDirect(S,null,w,r,l,null),h.uniforms.shadow_pass.value=T.mapPass.texture,h.uniforms.resolution.value=T.mapSize,h.uniforms.radius.value=T.radius,v.setRenderTarget(T.map),v.clear(),v.renderBufferDirect(S,null,w,h,l,null)}function m(T,S,w,A){let M=null;const R=w.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(R!==void 0)M=R;else if(M=w.isPointLight===!0?e:E,v.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const P=M.uuid,b=S.uuid;let F=a[P];F===void 0&&(F={},a[P]=F);let I=F[b];I===void 0&&(I=M.clone(),F[b]=I,S.addEventListener("dispose",g)),M=I}if(M.visible=S.visible,M.wireframe=S.wireframe,A===Ea?M.side=S.shadowSide!==null?S.shadowSide:S.side:M.side=S.shadowSide!==null?S.shadowSide:u[S.side],M.alphaMap=S.alphaMap,M.alphaTest=S.alphaTest,M.map=S.map,M.clipShadows=S.clipShadows,M.clippingPlanes=S.clippingPlanes,M.clipIntersection=S.clipIntersection,M.displacementMap=S.displacementMap,M.displacementScale=S.displacementScale,M.displacementBias=S.displacementBias,M.wireframeLinewidth=S.wireframeLinewidth,M.linewidth=S.linewidth,w.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const P=v.properties.get(M);P.light=w}return M}function p(T,S,w,A,M){if(T.visible===!1)return;if(T.layers.test(S.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&M===Ea)&&(!T.frustumCulled||f.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,T.matrixWorld);const b=t.update(T),F=T.material;if(Array.isArray(F)){const I=b.groups;for(let L=0,D=I.length;L<D;L++){const O=I[L],z=F[O.materialIndex];if(z&&z.visible){const W=m(T,z,A,M);T.onBeforeShadow(v,T,S,w,b,W,O),v.renderBufferDirect(w,null,b,W,T,O),T.onAfterShadow(v,T,S,w,b,W,O)}}}else if(F.visible){const I=m(T,F,A,M);T.onBeforeShadow(v,T,S,w,b,I,null),v.renderBufferDirect(w,null,b,I,T,null),T.onAfterShadow(v,T,S,w,b,I,null)}}const P=T.children;for(let b=0,F=P.length;b<F;b++)p(P[b],S,w,A,M)}function g(T){T.target.removeEventListener("dispose",g);for(const w in a){const A=a[w],M=T.target.uuid;M in A&&(A[M].dispose(),delete A[M])}}}const EO={[H0]:_0,[X0]:$0,[Y0]:K0,[Au]:k0,[_0]:H0,[$0]:X0,[K0]:Y0,[k0]:Au};function SO(v,t){function i(){let dt=!1;const Zt=new gi;let Ft=null;const Dt=new gi(0,0,0,0);return{setMask:function(ne){Ft!==ne&&!dt&&(v.colorMask(ne,ne,ne,ne),Ft=ne)},setLocked:function(ne){dt=ne},setClear:function(ne,ee,Se,Ei,Fi){Fi===!0&&(ne*=Ei,ee*=Ei,Se*=Ei),Zt.set(ne,ee,Se,Ei),Dt.equals(Zt)===!1&&(v.clearColor(ne,ee,Se,Ei),Dt.copy(Zt))},reset:function(){dt=!1,Ft=null,Dt.set(-1,0,0,0)}}}function f(){let dt=!1,Zt=!1,Ft=null,Dt=null,ne=null;return{setReversed:function(ee){if(Zt!==ee){const Se=t.get("EXT_clip_control");Zt?Se.clipControlEXT(Se.LOWER_LEFT_EXT,Se.ZERO_TO_ONE_EXT):Se.clipControlEXT(Se.LOWER_LEFT_EXT,Se.NEGATIVE_ONE_TO_ONE_EXT);const Ei=ne;ne=null,this.setClear(Ei)}Zt=ee},getReversed:function(){return Zt},setTest:function(ee){ee?V(v.DEPTH_TEST):$(v.DEPTH_TEST)},setMask:function(ee){Ft!==ee&&!dt&&(v.depthMask(ee),Ft=ee)},setFunc:function(ee){if(Zt&&(ee=EO[ee]),Dt!==ee){switch(ee){case H0:v.depthFunc(v.NEVER);break;case _0:v.depthFunc(v.ALWAYS);break;case X0:v.depthFunc(v.LESS);break;case Au:v.depthFunc(v.LEQUAL);break;case Y0:v.depthFunc(v.EQUAL);break;case k0:v.depthFunc(v.GEQUAL);break;case $0:v.depthFunc(v.GREATER);break;case K0:v.depthFunc(v.NOTEQUAL);break;default:v.depthFunc(v.LEQUAL)}Dt=ee}},setLocked:function(ee){dt=ee},setClear:function(ee){ne!==ee&&(Zt&&(ee=1-ee),v.clearDepth(ee),ne=ee)},reset:function(){dt=!1,Ft=null,Dt=null,ne=null,Zt=!1}}}function y(){let dt=!1,Zt=null,Ft=null,Dt=null,ne=null,ee=null,Se=null,Ei=null,Fi=null;return{setTest:function(We){dt||(We?V(v.STENCIL_TEST):$(v.STENCIL_TEST))},setMask:function(We){Zt!==We&&!dt&&(v.stencilMask(We),Zt=We)},setFunc:function(We,Si,Gi){(Ft!==We||Dt!==Si||ne!==Gi)&&(v.stencilFunc(We,Si,Gi),Ft=We,Dt=Si,ne=Gi)},setOp:function(We,Si,Gi){(ee!==We||Se!==Si||Ei!==Gi)&&(v.stencilOp(We,Si,Gi),ee=We,Se=Si,Ei=Gi)},setLocked:function(We){dt=We},setClear:function(We){Fi!==We&&(v.clearStencil(We),Fi=We)},reset:function(){dt=!1,Zt=null,Ft=null,Dt=null,ne=null,ee=null,Se=null,Ei=null,Fi=null}}}const C=new i,o=new f,E=new y,e=new WeakMap,a=new WeakMap;let x={},u={},r=new WeakMap,h=[],n=null,l=!1,c=null,s=null,d=null,m=null,p=null,g=null,T=null,S=new ui(0,0,0),w=0,A=!1,M=null,R=null,P=null,b=null,F=null;const I=v.getParameter(v.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,D=0;const O=v.getParameter(v.VERSION);O.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL (\d)/.exec(O)[1]),L=D>=1):O.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),L=D>=2);let z=null,W={};const X=v.getParameter(v.SCISSOR_BOX),_=v.getParameter(v.VIEWPORT),U=new gi().fromArray(X),G=new gi().fromArray(_);function N(dt,Zt,Ft,Dt){const ne=new Uint8Array(4),ee=v.createTexture();v.bindTexture(dt,ee),v.texParameteri(dt,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(dt,v.TEXTURE_MAG_FILTER,v.NEAREST);for(let Se=0;Se<Ft;Se++)dt===v.TEXTURE_3D||dt===v.TEXTURE_2D_ARRAY?v.texImage3D(Zt,0,v.RGBA,1,1,Dt,0,v.RGBA,v.UNSIGNED_BYTE,ne):v.texImage2D(Zt+Se,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,ne);return ee}const H={};H[v.TEXTURE_2D]=N(v.TEXTURE_2D,v.TEXTURE_2D,1),H[v.TEXTURE_CUBE_MAP]=N(v.TEXTURE_CUBE_MAP,v.TEXTURE_CUBE_MAP_POSITIVE_X,6),H[v.TEXTURE_2D_ARRAY]=N(v.TEXTURE_2D_ARRAY,v.TEXTURE_2D_ARRAY,1,1),H[v.TEXTURE_3D]=N(v.TEXTURE_3D,v.TEXTURE_3D,1,1),C.setClear(0,0,0,1),o.setClear(1),E.setClear(0),V(v.DEPTH_TEST),o.setFunc(Au),vt(!1),Tt(K1),V(v.CULL_FACE),q(bo);function V(dt){x[dt]!==!0&&(v.enable(dt),x[dt]=!0)}function $(dt){x[dt]!==!1&&(v.disable(dt),x[dt]=!1)}function j(dt,Zt){return u[dt]!==Zt?(v.bindFramebuffer(dt,Zt),u[dt]=Zt,dt===v.DRAW_FRAMEBUFFER&&(u[v.FRAMEBUFFER]=Zt),dt===v.FRAMEBUFFER&&(u[v.DRAW_FRAMEBUFFER]=Zt),!0):!1}function k(dt,Zt){let Ft=h,Dt=!1;if(dt){Ft=r.get(Zt),Ft===void 0&&(Ft=[],r.set(Zt,Ft));const ne=dt.textures;if(Ft.length!==ne.length||Ft[0]!==v.COLOR_ATTACHMENT0){for(let ee=0,Se=ne.length;ee<Se;ee++)Ft[ee]=v.COLOR_ATTACHMENT0+ee;Ft.length=ne.length,Dt=!0}}else Ft[0]!==v.BACK&&(Ft[0]=v.BACK,Dt=!0);Dt&&v.drawBuffers(Ft)}function Q(dt){return n!==dt?(v.useProgram(dt),n=dt,!0):!1}const et={[xl]:v.FUNC_ADD,[RI]:v.FUNC_SUBTRACT,[PI]:v.FUNC_REVERSE_SUBTRACT};et[bI]=v.MIN,et[II]=v.MAX;const at={[LI]:v.ZERO,[FI]:v.ONE,[DI]:v.SRC_COLOR,[G0]:v.SRC_ALPHA,[zI]:v.SRC_ALPHA_SATURATE,[UI]:v.DST_COLOR,[NI]:v.DST_ALPHA,[OI]:v.ONE_MINUS_SRC_COLOR,[W0]:v.ONE_MINUS_SRC_ALPHA,[VI]:v.ONE_MINUS_DST_COLOR,[BI]:v.ONE_MINUS_DST_ALPHA,[GI]:v.CONSTANT_COLOR,[WI]:v.ONE_MINUS_CONSTANT_COLOR,[HI]:v.CONSTANT_ALPHA,[_I]:v.ONE_MINUS_CONSTANT_ALPHA};function q(dt,Zt,Ft,Dt,ne,ee,Se,Ei,Fi,We){if(dt===bo){l===!0&&($(v.BLEND),l=!1);return}if(l===!1&&(V(v.BLEND),l=!0),dt!==MI){if(dt!==c||We!==A){if((s!==xl||p!==xl)&&(v.blendEquation(v.FUNC_ADD),s=xl,p=xl),We)switch(dt){case qh:v.blendFuncSeparate(v.ONE,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case j1:v.blendFunc(v.ONE,v.ONE);break;case Z1:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case J1:v.blendFuncSeparate(v.ZERO,v.SRC_COLOR,v.ZERO,v.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",dt);break}else switch(dt){case qh:v.blendFuncSeparate(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case j1:v.blendFunc(v.SRC_ALPHA,v.ONE);break;case Z1:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case J1:v.blendFunc(v.ZERO,v.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",dt);break}d=null,m=null,g=null,T=null,S.set(0,0,0),w=0,c=dt,A=We}return}ne=ne||Zt,ee=ee||Ft,Se=Se||Dt,(Zt!==s||ne!==p)&&(v.blendEquationSeparate(et[Zt],et[ne]),s=Zt,p=ne),(Ft!==d||Dt!==m||ee!==g||Se!==T)&&(v.blendFuncSeparate(at[Ft],at[Dt],at[ee],at[Se]),d=Ft,m=Dt,g=ee,T=Se),(Ei.equals(S)===!1||Fi!==w)&&(v.blendColor(Ei.r,Ei.g,Ei.b,Fi),S.copy(Ei),w=Fi),c=dt,A=!1}function ft(dt,Zt){dt.side===Ra?$(v.CULL_FACE):V(v.CULL_FACE);let Ft=dt.side===us;Zt&&(Ft=!Ft),vt(Ft),dt.blending===qh&&dt.transparent===!1?q(bo):q(dt.blending,dt.blendEquation,dt.blendSrc,dt.blendDst,dt.blendEquationAlpha,dt.blendSrcAlpha,dt.blendDstAlpha,dt.blendColor,dt.blendAlpha,dt.premultipliedAlpha),o.setFunc(dt.depthFunc),o.setTest(dt.depthTest),o.setMask(dt.depthWrite),C.setMask(dt.colorWrite);const Dt=dt.stencilWrite;E.setTest(Dt),Dt&&(E.setMask(dt.stencilWriteMask),E.setFunc(dt.stencilFunc,dt.stencilRef,dt.stencilFuncMask),E.setOp(dt.stencilFail,dt.stencilZFail,dt.stencilZPass)),Nt(dt.polygonOffset,dt.polygonOffsetFactor,dt.polygonOffsetUnits),dt.alphaToCoverage===!0?V(v.SAMPLE_ALPHA_TO_COVERAGE):$(v.SAMPLE_ALPHA_TO_COVERAGE)}function vt(dt){M!==dt&&(dt?v.frontFace(v.CW):v.frontFace(v.CCW),M=dt)}function Tt(dt){dt!==CI?(V(v.CULL_FACE),dt!==R&&(dt===K1?v.cullFace(v.BACK):dt===AI?v.cullFace(v.FRONT):v.cullFace(v.FRONT_AND_BACK))):$(v.CULL_FACE),R=dt}function ct(dt){dt!==P&&(L&&v.lineWidth(dt),P=dt)}function Nt(dt,Zt,Ft){dt?(V(v.POLYGON_OFFSET_FILL),(b!==Zt||F!==Ft)&&(v.polygonOffset(Zt,Ft),b=Zt,F=Ft)):$(v.POLYGON_OFFSET_FILL)}function yt(dt){dt?V(v.SCISSOR_TEST):$(v.SCISSOR_TEST)}function it(dt){dt===void 0&&(dt=v.TEXTURE0+I-1),z!==dt&&(v.activeTexture(dt),z=dt)}function Z(dt,Zt,Ft){Ft===void 0&&(z===null?Ft=v.TEXTURE0+I-1:Ft=z);let Dt=W[Ft];Dt===void 0&&(Dt={type:void 0,texture:void 0},W[Ft]=Dt),(Dt.type!==dt||Dt.texture!==Zt)&&(z!==Ft&&(v.activeTexture(Ft),z=Ft),v.bindTexture(dt,Zt||H[dt]),Dt.type=dt,Dt.texture=Zt)}function lt(){const dt=W[z];dt!==void 0&&dt.type!==void 0&&(v.bindTexture(dt.type,null),dt.type=void 0,dt.texture=void 0)}function pt(){try{v.compressedTexImage2D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Rt(){try{v.compressedTexImage3D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function At(){try{v.texSubImage2D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Kt(){try{v.texSubImage3D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Bt(){try{v.compressedTexSubImage2D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Wt(){try{v.compressedTexSubImage3D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function he(){try{v.texStorage2D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function zt(){try{v.texStorage3D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Ut(){try{v.texImage2D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Xt(){try{v.texImage3D.apply(v,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Pt(dt){U.equals(dt)===!1&&(v.scissor(dt.x,dt.y,dt.z,dt.w),U.copy(dt))}function $t(dt){G.equals(dt)===!1&&(v.viewport(dt.x,dt.y,dt.z,dt.w),G.copy(dt))}function pe(dt,Zt){let Ft=a.get(Zt);Ft===void 0&&(Ft=new WeakMap,a.set(Zt,Ft));let Dt=Ft.get(dt);Dt===void 0&&(Dt=v.getUniformBlockIndex(Zt,dt.name),Ft.set(dt,Dt))}function fe(dt,Zt){const Dt=a.get(Zt).get(dt);e.get(Zt)!==Dt&&(v.uniformBlockBinding(Zt,Dt,dt.__bindingPointIndex),e.set(Zt,Dt))}function Fe(){v.disable(v.BLEND),v.disable(v.CULL_FACE),v.disable(v.DEPTH_TEST),v.disable(v.POLYGON_OFFSET_FILL),v.disable(v.SCISSOR_TEST),v.disable(v.STENCIL_TEST),v.disable(v.SAMPLE_ALPHA_TO_COVERAGE),v.blendEquation(v.FUNC_ADD),v.blendFunc(v.ONE,v.ZERO),v.blendFuncSeparate(v.ONE,v.ZERO,v.ONE,v.ZERO),v.blendColor(0,0,0,0),v.colorMask(!0,!0,!0,!0),v.clearColor(0,0,0,0),v.depthMask(!0),v.depthFunc(v.LESS),o.setReversed(!1),v.clearDepth(1),v.stencilMask(4294967295),v.stencilFunc(v.ALWAYS,0,4294967295),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),v.clearStencil(0),v.cullFace(v.BACK),v.frontFace(v.CCW),v.polygonOffset(0,0),v.activeTexture(v.TEXTURE0),v.bindFramebuffer(v.FRAMEBUFFER,null),v.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),v.bindFramebuffer(v.READ_FRAMEBUFFER,null),v.useProgram(null),v.lineWidth(1),v.scissor(0,0,v.canvas.width,v.canvas.height),v.viewport(0,0,v.canvas.width,v.canvas.height),x={},z=null,W={},u={},r=new WeakMap,h=[],n=null,l=!1,c=null,s=null,d=null,m=null,p=null,g=null,T=null,S=new ui(0,0,0),w=0,A=!1,M=null,R=null,P=null,b=null,F=null,U.set(0,0,v.canvas.width,v.canvas.height),G.set(0,0,v.canvas.width,v.canvas.height),C.reset(),o.reset(),E.reset()}return{buffers:{color:C,depth:o,stencil:E},enable:V,disable:$,bindFramebuffer:j,drawBuffers:k,useProgram:Q,setBlending:q,setMaterial:ft,setFlipSided:vt,setCullFace:Tt,setLineWidth:ct,setPolygonOffset:Nt,setScissorTest:yt,activeTexture:it,bindTexture:Z,unbindTexture:lt,compressedTexImage2D:pt,compressedTexImage3D:Rt,texImage2D:Ut,texImage3D:Xt,updateUBOMapping:pe,uniformBlockBinding:fe,texStorage2D:he,texStorage3D:zt,texSubImage2D:At,texSubImage3D:Kt,compressedTexSubImage2D:Bt,compressedTexSubImage3D:Wt,scissor:Pt,viewport:$t,reset:Fe}}function CO(v,t,i,f,y,C,o){const E=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,e=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),a=new ei,x=new WeakMap;let u;const r=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function n(it,Z){return h?new OffscreenCanvas(it,Z):Up("canvas")}function l(it,Z,lt){let pt=1;const Rt=yt(it);if((Rt.width>lt||Rt.height>lt)&&(pt=lt/Math.max(Rt.width,Rt.height)),pt<1)if(typeof HTMLImageElement<"u"&&it instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&it instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&it instanceof ImageBitmap||typeof VideoFrame<"u"&&it instanceof VideoFrame){const At=Math.floor(pt*Rt.width),Kt=Math.floor(pt*Rt.height);u===void 0&&(u=n(At,Kt));const Bt=Z?n(At,Kt):u;return Bt.width=At,Bt.height=Kt,Bt.getContext("2d").drawImage(it,0,0,At,Kt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Rt.width+"x"+Rt.height+") to ("+At+"x"+Kt+")."),Bt}else return"data"in it&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Rt.width+"x"+Rt.height+")."),it;return it}function c(it){return it.generateMipmaps}function s(it){v.generateMipmap(it)}function d(it){return it.isWebGLCubeRenderTarget?v.TEXTURE_CUBE_MAP:it.isWebGL3DRenderTarget?v.TEXTURE_3D:it.isWebGLArrayRenderTarget||it.isCompressedArrayTexture?v.TEXTURE_2D_ARRAY:v.TEXTURE_2D}function m(it,Z,lt,pt,Rt=!1){if(it!==null){if(v[it]!==void 0)return v[it];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+it+"'")}let At=Z;if(Z===v.RED&&(lt===v.FLOAT&&(At=v.R32F),lt===v.HALF_FLOAT&&(At=v.R16F),lt===v.UNSIGNED_BYTE&&(At=v.R8)),Z===v.RED_INTEGER&&(lt===v.UNSIGNED_BYTE&&(At=v.R8UI),lt===v.UNSIGNED_SHORT&&(At=v.R16UI),lt===v.UNSIGNED_INT&&(At=v.R32UI),lt===v.BYTE&&(At=v.R8I),lt===v.SHORT&&(At=v.R16I),lt===v.INT&&(At=v.R32I)),Z===v.RG&&(lt===v.FLOAT&&(At=v.RG32F),lt===v.HALF_FLOAT&&(At=v.RG16F),lt===v.UNSIGNED_BYTE&&(At=v.RG8)),Z===v.RG_INTEGER&&(lt===v.UNSIGNED_BYTE&&(At=v.RG8UI),lt===v.UNSIGNED_SHORT&&(At=v.RG16UI),lt===v.UNSIGNED_INT&&(At=v.RG32UI),lt===v.BYTE&&(At=v.RG8I),lt===v.SHORT&&(At=v.RG16I),lt===v.INT&&(At=v.RG32I)),Z===v.RGB_INTEGER&&(lt===v.UNSIGNED_BYTE&&(At=v.RGB8UI),lt===v.UNSIGNED_SHORT&&(At=v.RGB16UI),lt===v.UNSIGNED_INT&&(At=v.RGB32UI),lt===v.BYTE&&(At=v.RGB8I),lt===v.SHORT&&(At=v.RGB16I),lt===v.INT&&(At=v.RGB32I)),Z===v.RGBA_INTEGER&&(lt===v.UNSIGNED_BYTE&&(At=v.RGBA8UI),lt===v.UNSIGNED_SHORT&&(At=v.RGBA16UI),lt===v.UNSIGNED_INT&&(At=v.RGBA32UI),lt===v.BYTE&&(At=v.RGBA8I),lt===v.SHORT&&(At=v.RGBA16I),lt===v.INT&&(At=v.RGBA32I)),Z===v.RGB&&lt===v.UNSIGNED_INT_5_9_9_9_REV&&(At=v.RGB9_E5),Z===v.RGBA){const Kt=Rt?Np:oi.getTransfer(pt);lt===v.FLOAT&&(At=v.RGBA32F),lt===v.HALF_FLOAT&&(At=v.RGBA16F),lt===v.UNSIGNED_BYTE&&(At=Kt===mi?v.SRGB8_ALPHA8:v.RGBA8),lt===v.UNSIGNED_SHORT_4_4_4_4&&(At=v.RGBA4),lt===v.UNSIGNED_SHORT_5_5_5_1&&(At=v.RGB5_A1)}return(At===v.R16F||At===v.R32F||At===v.RG16F||At===v.RG32F||At===v.RGBA16F||At===v.RGBA32F)&&t.get("EXT_color_buffer_float"),At}function p(it,Z){let lt;return it?Z===null||Z===kl||Z===Ru?lt=v.DEPTH24_STENCIL8:Z===ba?lt=v.DEPTH32F_STENCIL8:Z===mc&&(lt=v.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Z===null||Z===kl||Z===Ru?lt=v.DEPTH_COMPONENT24:Z===ba?lt=v.DEPTH_COMPONENT32F:Z===mc&&(lt=v.DEPTH_COMPONENT16),lt}function g(it,Z){return c(it)===!0||it.isFramebufferTexture&&it.minFilter!==yr&&it.minFilter!==_r?Math.log2(Math.max(Z.width,Z.height))+1:it.mipmaps!==void 0&&it.mipmaps.length>0?it.mipmaps.length:it.isCompressedTexture&&Array.isArray(it.image)?Z.mipmaps.length:1}function T(it){const Z=it.target;Z.removeEventListener("dispose",T),w(Z),Z.isVideoTexture&&x.delete(Z)}function S(it){const Z=it.target;Z.removeEventListener("dispose",S),M(Z)}function w(it){const Z=f.get(it);if(Z.__webglInit===void 0)return;const lt=it.source,pt=r.get(lt);if(pt){const Rt=pt[Z.__cacheKey];Rt.usedTimes--,Rt.usedTimes===0&&A(it),Object.keys(pt).length===0&&r.delete(lt)}f.remove(it)}function A(it){const Z=f.get(it);v.deleteTexture(Z.__webglTexture);const lt=it.source,pt=r.get(lt);delete pt[Z.__cacheKey],o.memory.textures--}function M(it){const Z=f.get(it);if(it.depthTexture&&(it.depthTexture.dispose(),f.remove(it.depthTexture)),it.isWebGLCubeRenderTarget)for(let pt=0;pt<6;pt++){if(Array.isArray(Z.__webglFramebuffer[pt]))for(let Rt=0;Rt<Z.__webglFramebuffer[pt].length;Rt++)v.deleteFramebuffer(Z.__webglFramebuffer[pt][Rt]);else v.deleteFramebuffer(Z.__webglFramebuffer[pt]);Z.__webglDepthbuffer&&v.deleteRenderbuffer(Z.__webglDepthbuffer[pt])}else{if(Array.isArray(Z.__webglFramebuffer))for(let pt=0;pt<Z.__webglFramebuffer.length;pt++)v.deleteFramebuffer(Z.__webglFramebuffer[pt]);else v.deleteFramebuffer(Z.__webglFramebuffer);if(Z.__webglDepthbuffer&&v.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&v.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer)for(let pt=0;pt<Z.__webglColorRenderbuffer.length;pt++)Z.__webglColorRenderbuffer[pt]&&v.deleteRenderbuffer(Z.__webglColorRenderbuffer[pt]);Z.__webglDepthRenderbuffer&&v.deleteRenderbuffer(Z.__webglDepthRenderbuffer)}const lt=it.textures;for(let pt=0,Rt=lt.length;pt<Rt;pt++){const At=f.get(lt[pt]);At.__webglTexture&&(v.deleteTexture(At.__webglTexture),o.memory.textures--),f.remove(lt[pt])}f.remove(it)}let R=0;function P(){R=0}function b(){const it=R;return it>=y.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+it+" texture units while this GPU supports only "+y.maxTextures),R+=1,it}function F(it){const Z=[];return Z.push(it.wrapS),Z.push(it.wrapT),Z.push(it.wrapR||0),Z.push(it.magFilter),Z.push(it.minFilter),Z.push(it.anisotropy),Z.push(it.internalFormat),Z.push(it.format),Z.push(it.type),Z.push(it.generateMipmaps),Z.push(it.premultiplyAlpha),Z.push(it.flipY),Z.push(it.unpackAlignment),Z.push(it.colorSpace),Z.join()}function I(it,Z){const lt=f.get(it);if(it.isVideoTexture&&ct(it),it.isRenderTargetTexture===!1&&it.version>0&&lt.__version!==it.version){const pt=it.image;if(pt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{G(lt,it,Z);return}}i.bindTexture(v.TEXTURE_2D,lt.__webglTexture,v.TEXTURE0+Z)}function L(it,Z){const lt=f.get(it);if(it.version>0&&lt.__version!==it.version){G(lt,it,Z);return}i.bindTexture(v.TEXTURE_2D_ARRAY,lt.__webglTexture,v.TEXTURE0+Z)}function D(it,Z){const lt=f.get(it);if(it.version>0&&lt.__version!==it.version){G(lt,it,Z);return}i.bindTexture(v.TEXTURE_3D,lt.__webglTexture,v.TEXTURE0+Z)}function O(it,Z){const lt=f.get(it);if(it.version>0&&lt.__version!==it.version){N(lt,it,Z);return}i.bindTexture(v.TEXTURE_CUBE_MAP,lt.__webglTexture,v.TEXTURE0+Z)}const z={[J0]:v.REPEAT,[Cl]:v.CLAMP_TO_EDGE,[Q0]:v.MIRRORED_REPEAT},W={[yr]:v.NEAREST,[qI]:v.NEAREST_MIPMAP_NEAREST,[Pd]:v.NEAREST_MIPMAP_LINEAR,[_r]:v.LINEAR,[hm]:v.LINEAR_MIPMAP_NEAREST,[Al]:v.LINEAR_MIPMAP_LINEAR},X={[n4]:v.NEVER,[h4]:v.ALWAYS,[s4]:v.LESS,[IC]:v.LEQUAL,[r4]:v.EQUAL,[l4]:v.GEQUAL,[a4]:v.GREATER,[o4]:v.NOTEQUAL};function _(it,Z){if(Z.type===ba&&t.has("OES_texture_float_linear")===!1&&(Z.magFilter===_r||Z.magFilter===hm||Z.magFilter===Pd||Z.magFilter===Al||Z.minFilter===_r||Z.minFilter===hm||Z.minFilter===Pd||Z.minFilter===Al)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),v.texParameteri(it,v.TEXTURE_WRAP_S,z[Z.wrapS]),v.texParameteri(it,v.TEXTURE_WRAP_T,z[Z.wrapT]),(it===v.TEXTURE_3D||it===v.TEXTURE_2D_ARRAY)&&v.texParameteri(it,v.TEXTURE_WRAP_R,z[Z.wrapR]),v.texParameteri(it,v.TEXTURE_MAG_FILTER,W[Z.magFilter]),v.texParameteri(it,v.TEXTURE_MIN_FILTER,W[Z.minFilter]),Z.compareFunction&&(v.texParameteri(it,v.TEXTURE_COMPARE_MODE,v.COMPARE_REF_TO_TEXTURE),v.texParameteri(it,v.TEXTURE_COMPARE_FUNC,X[Z.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(Z.magFilter===yr||Z.minFilter!==Pd&&Z.minFilter!==Al||Z.type===ba&&t.has("OES_texture_float_linear")===!1)return;if(Z.anisotropy>1||f.get(Z).__currentAnisotropy){const lt=t.get("EXT_texture_filter_anisotropic");v.texParameterf(it,lt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,y.getMaxAnisotropy())),f.get(Z).__currentAnisotropy=Z.anisotropy}}}function U(it,Z){let lt=!1;it.__webglInit===void 0&&(it.__webglInit=!0,Z.addEventListener("dispose",T));const pt=Z.source;let Rt=r.get(pt);Rt===void 0&&(Rt={},r.set(pt,Rt));const At=F(Z);if(At!==it.__cacheKey){Rt[At]===void 0&&(Rt[At]={texture:v.createTexture(),usedTimes:0},o.memory.textures++,lt=!0),Rt[At].usedTimes++;const Kt=Rt[it.__cacheKey];Kt!==void 0&&(Rt[it.__cacheKey].usedTimes--,Kt.usedTimes===0&&A(Z)),it.__cacheKey=At,it.__webglTexture=Rt[At].texture}return lt}function G(it,Z,lt){let pt=v.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(pt=v.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(pt=v.TEXTURE_3D);const Rt=U(it,Z),At=Z.source;i.bindTexture(pt,it.__webglTexture,v.TEXTURE0+lt);const Kt=f.get(At);if(At.version!==Kt.__version||Rt===!0){i.activeTexture(v.TEXTURE0+lt);const Bt=oi.getPrimaries(oi.workingColorSpace),Wt=Z.colorSpace===vo?null:oi.getPrimaries(Z.colorSpace),he=Z.colorSpace===vo||Bt===Wt?v.NONE:v.BROWSER_DEFAULT_WEBGL;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,Z.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,Z.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,he);let zt=l(Z.image,!1,y.maxTextureSize);zt=Nt(Z,zt);const Ut=C.convert(Z.format,Z.colorSpace),Xt=C.convert(Z.type);let Pt=m(Z.internalFormat,Ut,Xt,Z.colorSpace,Z.isVideoTexture);_(pt,Z);let $t;const pe=Z.mipmaps,fe=Z.isVideoTexture!==!0,Fe=Kt.__version===void 0||Rt===!0,dt=At.dataReady,Zt=g(Z,zt);if(Z.isDepthTexture)Pt=p(Z.format===Pu,Z.type),Fe&&(fe?i.texStorage2D(v.TEXTURE_2D,1,Pt,zt.width,zt.height):i.texImage2D(v.TEXTURE_2D,0,Pt,zt.width,zt.height,0,Ut,Xt,null));else if(Z.isDataTexture)if(pe.length>0){fe&&Fe&&i.texStorage2D(v.TEXTURE_2D,Zt,Pt,pe[0].width,pe[0].height);for(let Ft=0,Dt=pe.length;Ft<Dt;Ft++)$t=pe[Ft],fe?dt&&i.texSubImage2D(v.TEXTURE_2D,Ft,0,0,$t.width,$t.height,Ut,Xt,$t.data):i.texImage2D(v.TEXTURE_2D,Ft,Pt,$t.width,$t.height,0,Ut,Xt,$t.data);Z.generateMipmaps=!1}else fe?(Fe&&i.texStorage2D(v.TEXTURE_2D,Zt,Pt,zt.width,zt.height),dt&&i.texSubImage2D(v.TEXTURE_2D,0,0,0,zt.width,zt.height,Ut,Xt,zt.data)):i.texImage2D(v.TEXTURE_2D,0,Pt,zt.width,zt.height,0,Ut,Xt,zt.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){fe&&Fe&&i.texStorage3D(v.TEXTURE_2D_ARRAY,Zt,Pt,pe[0].width,pe[0].height,zt.depth);for(let Ft=0,Dt=pe.length;Ft<Dt;Ft++)if($t=pe[Ft],Z.format!==vr)if(Ut!==null)if(fe){if(dt)if(Z.layerUpdates.size>0){const ne=ET($t.width,$t.height,Z.format,Z.type);for(const ee of Z.layerUpdates){const Se=$t.data.subarray(ee*ne/$t.data.BYTES_PER_ELEMENT,(ee+1)*ne/$t.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(v.TEXTURE_2D_ARRAY,Ft,0,0,ee,$t.width,$t.height,1,Ut,Se)}Z.clearLayerUpdates()}else i.compressedTexSubImage3D(v.TEXTURE_2D_ARRAY,Ft,0,0,0,$t.width,$t.height,zt.depth,Ut,$t.data)}else i.compressedTexImage3D(v.TEXTURE_2D_ARRAY,Ft,Pt,$t.width,$t.height,zt.depth,0,$t.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else fe?dt&&i.texSubImage3D(v.TEXTURE_2D_ARRAY,Ft,0,0,0,$t.width,$t.height,zt.depth,Ut,Xt,$t.data):i.texImage3D(v.TEXTURE_2D_ARRAY,Ft,Pt,$t.width,$t.height,zt.depth,0,Ut,Xt,$t.data)}else{fe&&Fe&&i.texStorage2D(v.TEXTURE_2D,Zt,Pt,pe[0].width,pe[0].height);for(let Ft=0,Dt=pe.length;Ft<Dt;Ft++)$t=pe[Ft],Z.format!==vr?Ut!==null?fe?dt&&i.compressedTexSubImage2D(v.TEXTURE_2D,Ft,0,0,$t.width,$t.height,Ut,$t.data):i.compressedTexImage2D(v.TEXTURE_2D,Ft,Pt,$t.width,$t.height,0,$t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):fe?dt&&i.texSubImage2D(v.TEXTURE_2D,Ft,0,0,$t.width,$t.height,Ut,Xt,$t.data):i.texImage2D(v.TEXTURE_2D,Ft,Pt,$t.width,$t.height,0,Ut,Xt,$t.data)}else if(Z.isDataArrayTexture)if(fe){if(Fe&&i.texStorage3D(v.TEXTURE_2D_ARRAY,Zt,Pt,zt.width,zt.height,zt.depth),dt)if(Z.layerUpdates.size>0){const Ft=ET(zt.width,zt.height,Z.format,Z.type);for(const Dt of Z.layerUpdates){const ne=zt.data.subarray(Dt*Ft/zt.data.BYTES_PER_ELEMENT,(Dt+1)*Ft/zt.data.BYTES_PER_ELEMENT);i.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,Dt,zt.width,zt.height,1,Ut,Xt,ne)}Z.clearLayerUpdates()}else i.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,0,zt.width,zt.height,zt.depth,Ut,Xt,zt.data)}else i.texImage3D(v.TEXTURE_2D_ARRAY,0,Pt,zt.width,zt.height,zt.depth,0,Ut,Xt,zt.data);else if(Z.isData3DTexture)fe?(Fe&&i.texStorage3D(v.TEXTURE_3D,Zt,Pt,zt.width,zt.height,zt.depth),dt&&i.texSubImage3D(v.TEXTURE_3D,0,0,0,0,zt.width,zt.height,zt.depth,Ut,Xt,zt.data)):i.texImage3D(v.TEXTURE_3D,0,Pt,zt.width,zt.height,zt.depth,0,Ut,Xt,zt.data);else if(Z.isFramebufferTexture){if(Fe)if(fe)i.texStorage2D(v.TEXTURE_2D,Zt,Pt,zt.width,zt.height);else{let Ft=zt.width,Dt=zt.height;for(let ne=0;ne<Zt;ne++)i.texImage2D(v.TEXTURE_2D,ne,Pt,Ft,Dt,0,Ut,Xt,null),Ft>>=1,Dt>>=1}}else if(pe.length>0){if(fe&&Fe){const Ft=yt(pe[0]);i.texStorage2D(v.TEXTURE_2D,Zt,Pt,Ft.width,Ft.height)}for(let Ft=0,Dt=pe.length;Ft<Dt;Ft++)$t=pe[Ft],fe?dt&&i.texSubImage2D(v.TEXTURE_2D,Ft,0,0,Ut,Xt,$t):i.texImage2D(v.TEXTURE_2D,Ft,Pt,Ut,Xt,$t);Z.generateMipmaps=!1}else if(fe){if(Fe){const Ft=yt(zt);i.texStorage2D(v.TEXTURE_2D,Zt,Pt,Ft.width,Ft.height)}dt&&i.texSubImage2D(v.TEXTURE_2D,0,0,0,Ut,Xt,zt)}else i.texImage2D(v.TEXTURE_2D,0,Pt,Ut,Xt,zt);c(Z)&&s(pt),Kt.__version=At.version,Z.onUpdate&&Z.onUpdate(Z)}it.__version=Z.version}function N(it,Z,lt){if(Z.image.length!==6)return;const pt=U(it,Z),Rt=Z.source;i.bindTexture(v.TEXTURE_CUBE_MAP,it.__webglTexture,v.TEXTURE0+lt);const At=f.get(Rt);if(Rt.version!==At.__version||pt===!0){i.activeTexture(v.TEXTURE0+lt);const Kt=oi.getPrimaries(oi.workingColorSpace),Bt=Z.colorSpace===vo?null:oi.getPrimaries(Z.colorSpace),Wt=Z.colorSpace===vo||Kt===Bt?v.NONE:v.BROWSER_DEFAULT_WEBGL;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,Z.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,Z.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,Wt);const he=Z.isCompressedTexture||Z.image[0].isCompressedTexture,zt=Z.image[0]&&Z.image[0].isDataTexture,Ut=[];for(let Dt=0;Dt<6;Dt++)!he&&!zt?Ut[Dt]=l(Z.image[Dt],!0,y.maxCubemapSize):Ut[Dt]=zt?Z.image[Dt].image:Z.image[Dt],Ut[Dt]=Nt(Z,Ut[Dt]);const Xt=Ut[0],Pt=C.convert(Z.format,Z.colorSpace),$t=C.convert(Z.type),pe=m(Z.internalFormat,Pt,$t,Z.colorSpace),fe=Z.isVideoTexture!==!0,Fe=At.__version===void 0||pt===!0,dt=Rt.dataReady;let Zt=g(Z,Xt);_(v.TEXTURE_CUBE_MAP,Z);let Ft;if(he){fe&&Fe&&i.texStorage2D(v.TEXTURE_CUBE_MAP,Zt,pe,Xt.width,Xt.height);for(let Dt=0;Dt<6;Dt++){Ft=Ut[Dt].mipmaps;for(let ne=0;ne<Ft.length;ne++){const ee=Ft[ne];Z.format!==vr?Pt!==null?fe?dt&&i.compressedTexSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,ne,0,0,ee.width,ee.height,Pt,ee.data):i.compressedTexImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,ne,pe,ee.width,ee.height,0,ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):fe?dt&&i.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,ne,0,0,ee.width,ee.height,Pt,$t,ee.data):i.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,ne,pe,ee.width,ee.height,0,Pt,$t,ee.data)}}}else{if(Ft=Z.mipmaps,fe&&Fe){Ft.length>0&&Zt++;const Dt=yt(Ut[0]);i.texStorage2D(v.TEXTURE_CUBE_MAP,Zt,pe,Dt.width,Dt.height)}for(let Dt=0;Dt<6;Dt++)if(zt){fe?dt&&i.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,0,0,0,Ut[Dt].width,Ut[Dt].height,Pt,$t,Ut[Dt].data):i.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,0,pe,Ut[Dt].width,Ut[Dt].height,0,Pt,$t,Ut[Dt].data);for(let ne=0;ne<Ft.length;ne++){const Se=Ft[ne].image[Dt].image;fe?dt&&i.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,ne+1,0,0,Se.width,Se.height,Pt,$t,Se.data):i.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,ne+1,pe,Se.width,Se.height,0,Pt,$t,Se.data)}}else{fe?dt&&i.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,0,0,0,Pt,$t,Ut[Dt]):i.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,0,pe,Pt,$t,Ut[Dt]);for(let ne=0;ne<Ft.length;ne++){const ee=Ft[ne];fe?dt&&i.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,ne+1,0,0,Pt,$t,ee.image[Dt]):i.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,ne+1,pe,Pt,$t,ee.image[Dt])}}}c(Z)&&s(v.TEXTURE_CUBE_MAP),At.__version=Rt.version,Z.onUpdate&&Z.onUpdate(Z)}it.__version=Z.version}function H(it,Z,lt,pt,Rt,At){const Kt=C.convert(lt.format,lt.colorSpace),Bt=C.convert(lt.type),Wt=m(lt.internalFormat,Kt,Bt,lt.colorSpace),he=f.get(Z),zt=f.get(lt);if(zt.__renderTarget=Z,!he.__hasExternalTextures){const Ut=Math.max(1,Z.width>>At),Xt=Math.max(1,Z.height>>At);Rt===v.TEXTURE_3D||Rt===v.TEXTURE_2D_ARRAY?i.texImage3D(Rt,At,Wt,Ut,Xt,Z.depth,0,Kt,Bt,null):i.texImage2D(Rt,At,Wt,Ut,Xt,0,Kt,Bt,null)}i.bindFramebuffer(v.FRAMEBUFFER,it),Tt(Z)?E.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,pt,Rt,zt.__webglTexture,0,vt(Z)):(Rt===v.TEXTURE_2D||Rt>=v.TEXTURE_CUBE_MAP_POSITIVE_X&&Rt<=v.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&v.framebufferTexture2D(v.FRAMEBUFFER,pt,Rt,zt.__webglTexture,At),i.bindFramebuffer(v.FRAMEBUFFER,null)}function V(it,Z,lt){if(v.bindRenderbuffer(v.RENDERBUFFER,it),Z.depthBuffer){const pt=Z.depthTexture,Rt=pt&&pt.isDepthTexture?pt.type:null,At=p(Z.stencilBuffer,Rt),Kt=Z.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Bt=vt(Z);Tt(Z)?E.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,Bt,At,Z.width,Z.height):lt?v.renderbufferStorageMultisample(v.RENDERBUFFER,Bt,At,Z.width,Z.height):v.renderbufferStorage(v.RENDERBUFFER,At,Z.width,Z.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,Kt,v.RENDERBUFFER,it)}else{const pt=Z.textures;for(let Rt=0;Rt<pt.length;Rt++){const At=pt[Rt],Kt=C.convert(At.format,At.colorSpace),Bt=C.convert(At.type),Wt=m(At.internalFormat,Kt,Bt,At.colorSpace),he=vt(Z);lt&&Tt(Z)===!1?v.renderbufferStorageMultisample(v.RENDERBUFFER,he,Wt,Z.width,Z.height):Tt(Z)?E.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,he,Wt,Z.width,Z.height):v.renderbufferStorage(v.RENDERBUFFER,Wt,Z.width,Z.height)}}v.bindRenderbuffer(v.RENDERBUFFER,null)}function $(it,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(v.FRAMEBUFFER,it),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const pt=f.get(Z.depthTexture);pt.__renderTarget=Z,(!pt.__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),I(Z.depthTexture,0);const Rt=pt.__webglTexture,At=vt(Z);if(Z.depthTexture.format===tu)Tt(Z)?E.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Rt,0,At):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Rt,0);else if(Z.depthTexture.format===Pu)Tt(Z)?E.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Rt,0,At):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Rt,0);else throw new Error("Unknown depthTexture format")}function j(it){const Z=f.get(it),lt=it.isWebGLCubeRenderTarget===!0;if(Z.__boundDepthTexture!==it.depthTexture){const pt=it.depthTexture;if(Z.__depthDisposeCallback&&Z.__depthDisposeCallback(),pt){const Rt=()=>{delete Z.__boundDepthTexture,delete Z.__depthDisposeCallback,pt.removeEventListener("dispose",Rt)};pt.addEventListener("dispose",Rt),Z.__depthDisposeCallback=Rt}Z.__boundDepthTexture=pt}if(it.depthTexture&&!Z.__autoAllocateDepthBuffer){if(lt)throw new Error("target.depthTexture not supported in Cube render targets");$(Z.__webglFramebuffer,it)}else if(lt){Z.__webglDepthbuffer=[];for(let pt=0;pt<6;pt++)if(i.bindFramebuffer(v.FRAMEBUFFER,Z.__webglFramebuffer[pt]),Z.__webglDepthbuffer[pt]===void 0)Z.__webglDepthbuffer[pt]=v.createRenderbuffer(),V(Z.__webglDepthbuffer[pt],it,!1);else{const Rt=it.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,At=Z.__webglDepthbuffer[pt];v.bindRenderbuffer(v.RENDERBUFFER,At),v.framebufferRenderbuffer(v.FRAMEBUFFER,Rt,v.RENDERBUFFER,At)}}else if(i.bindFramebuffer(v.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer===void 0)Z.__webglDepthbuffer=v.createRenderbuffer(),V(Z.__webglDepthbuffer,it,!1);else{const pt=it.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Rt=Z.__webglDepthbuffer;v.bindRenderbuffer(v.RENDERBUFFER,Rt),v.framebufferRenderbuffer(v.FRAMEBUFFER,pt,v.RENDERBUFFER,Rt)}i.bindFramebuffer(v.FRAMEBUFFER,null)}function k(it,Z,lt){const pt=f.get(it);Z!==void 0&&H(pt.__webglFramebuffer,it,it.texture,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,0),lt!==void 0&&j(it)}function Q(it){const Z=it.texture,lt=f.get(it),pt=f.get(Z);it.addEventListener("dispose",S);const Rt=it.textures,At=it.isWebGLCubeRenderTarget===!0,Kt=Rt.length>1;if(Kt||(pt.__webglTexture===void 0&&(pt.__webglTexture=v.createTexture()),pt.__version=Z.version,o.memory.textures++),At){lt.__webglFramebuffer=[];for(let Bt=0;Bt<6;Bt++)if(Z.mipmaps&&Z.mipmaps.length>0){lt.__webglFramebuffer[Bt]=[];for(let Wt=0;Wt<Z.mipmaps.length;Wt++)lt.__webglFramebuffer[Bt][Wt]=v.createFramebuffer()}else lt.__webglFramebuffer[Bt]=v.createFramebuffer()}else{if(Z.mipmaps&&Z.mipmaps.length>0){lt.__webglFramebuffer=[];for(let Bt=0;Bt<Z.mipmaps.length;Bt++)lt.__webglFramebuffer[Bt]=v.createFramebuffer()}else lt.__webglFramebuffer=v.createFramebuffer();if(Kt)for(let Bt=0,Wt=Rt.length;Bt<Wt;Bt++){const he=f.get(Rt[Bt]);he.__webglTexture===void 0&&(he.__webglTexture=v.createTexture(),o.memory.textures++)}if(it.samples>0&&Tt(it)===!1){lt.__webglMultisampledFramebuffer=v.createFramebuffer(),lt.__webglColorRenderbuffer=[],i.bindFramebuffer(v.FRAMEBUFFER,lt.__webglMultisampledFramebuffer);for(let Bt=0;Bt<Rt.length;Bt++){const Wt=Rt[Bt];lt.__webglColorRenderbuffer[Bt]=v.createRenderbuffer(),v.bindRenderbuffer(v.RENDERBUFFER,lt.__webglColorRenderbuffer[Bt]);const he=C.convert(Wt.format,Wt.colorSpace),zt=C.convert(Wt.type),Ut=m(Wt.internalFormat,he,zt,Wt.colorSpace,it.isXRRenderTarget===!0),Xt=vt(it);v.renderbufferStorageMultisample(v.RENDERBUFFER,Xt,Ut,it.width,it.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Bt,v.RENDERBUFFER,lt.__webglColorRenderbuffer[Bt])}v.bindRenderbuffer(v.RENDERBUFFER,null),it.depthBuffer&&(lt.__webglDepthRenderbuffer=v.createRenderbuffer(),V(lt.__webglDepthRenderbuffer,it,!0)),i.bindFramebuffer(v.FRAMEBUFFER,null)}}if(At){i.bindTexture(v.TEXTURE_CUBE_MAP,pt.__webglTexture),_(v.TEXTURE_CUBE_MAP,Z);for(let Bt=0;Bt<6;Bt++)if(Z.mipmaps&&Z.mipmaps.length>0)for(let Wt=0;Wt<Z.mipmaps.length;Wt++)H(lt.__webglFramebuffer[Bt][Wt],it,Z,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,Wt);else H(lt.__webglFramebuffer[Bt],it,Z,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,0);c(Z)&&s(v.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(Kt){for(let Bt=0,Wt=Rt.length;Bt<Wt;Bt++){const he=Rt[Bt],zt=f.get(he);i.bindTexture(v.TEXTURE_2D,zt.__webglTexture),_(v.TEXTURE_2D,he),H(lt.__webglFramebuffer,it,he,v.COLOR_ATTACHMENT0+Bt,v.TEXTURE_2D,0),c(he)&&s(v.TEXTURE_2D)}i.unbindTexture()}else{let Bt=v.TEXTURE_2D;if((it.isWebGL3DRenderTarget||it.isWebGLArrayRenderTarget)&&(Bt=it.isWebGL3DRenderTarget?v.TEXTURE_3D:v.TEXTURE_2D_ARRAY),i.bindTexture(Bt,pt.__webglTexture),_(Bt,Z),Z.mipmaps&&Z.mipmaps.length>0)for(let Wt=0;Wt<Z.mipmaps.length;Wt++)H(lt.__webglFramebuffer[Wt],it,Z,v.COLOR_ATTACHMENT0,Bt,Wt);else H(lt.__webglFramebuffer,it,Z,v.COLOR_ATTACHMENT0,Bt,0);c(Z)&&s(Bt),i.unbindTexture()}it.depthBuffer&&j(it)}function et(it){const Z=it.textures;for(let lt=0,pt=Z.length;lt<pt;lt++){const Rt=Z[lt];if(c(Rt)){const At=d(it),Kt=f.get(Rt).__webglTexture;i.bindTexture(At,Kt),s(At),i.unbindTexture()}}}const at=[],q=[];function ft(it){if(it.samples>0){if(Tt(it)===!1){const Z=it.textures,lt=it.width,pt=it.height;let Rt=v.COLOR_BUFFER_BIT;const At=it.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Kt=f.get(it),Bt=Z.length>1;if(Bt)for(let Wt=0;Wt<Z.length;Wt++)i.bindFramebuffer(v.FRAMEBUFFER,Kt.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Wt,v.RENDERBUFFER,null),i.bindFramebuffer(v.FRAMEBUFFER,Kt.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+Wt,v.TEXTURE_2D,null,0);i.bindFramebuffer(v.READ_FRAMEBUFFER,Kt.__webglMultisampledFramebuffer),i.bindFramebuffer(v.DRAW_FRAMEBUFFER,Kt.__webglFramebuffer);for(let Wt=0;Wt<Z.length;Wt++){if(it.resolveDepthBuffer&&(it.depthBuffer&&(Rt|=v.DEPTH_BUFFER_BIT),it.stencilBuffer&&it.resolveStencilBuffer&&(Rt|=v.STENCIL_BUFFER_BIT)),Bt){v.framebufferRenderbuffer(v.READ_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.RENDERBUFFER,Kt.__webglColorRenderbuffer[Wt]);const he=f.get(Z[Wt]).__webglTexture;v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,he,0)}v.blitFramebuffer(0,0,lt,pt,0,0,lt,pt,Rt,v.NEAREST),e===!0&&(at.length=0,q.length=0,at.push(v.COLOR_ATTACHMENT0+Wt),it.depthBuffer&&it.resolveDepthBuffer===!1&&(at.push(At),q.push(At),v.invalidateFramebuffer(v.DRAW_FRAMEBUFFER,q)),v.invalidateFramebuffer(v.READ_FRAMEBUFFER,at))}if(i.bindFramebuffer(v.READ_FRAMEBUFFER,null),i.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),Bt)for(let Wt=0;Wt<Z.length;Wt++){i.bindFramebuffer(v.FRAMEBUFFER,Kt.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Wt,v.RENDERBUFFER,Kt.__webglColorRenderbuffer[Wt]);const he=f.get(Z[Wt]).__webglTexture;i.bindFramebuffer(v.FRAMEBUFFER,Kt.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+Wt,v.TEXTURE_2D,he,0)}i.bindFramebuffer(v.DRAW_FRAMEBUFFER,Kt.__webglMultisampledFramebuffer)}else if(it.depthBuffer&&it.resolveDepthBuffer===!1&&e){const Z=it.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT;v.invalidateFramebuffer(v.DRAW_FRAMEBUFFER,[Z])}}}function vt(it){return Math.min(y.maxSamples,it.samples)}function Tt(it){const Z=f.get(it);return it.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function ct(it){const Z=o.render.frame;x.get(it)!==Z&&(x.set(it,Z),it.update())}function Nt(it,Z){const lt=it.colorSpace,pt=it.format,Rt=it.type;return it.isCompressedTexture===!0||it.isVideoTexture===!0||lt!==bu&&lt!==vo&&(oi.getTransfer(lt)===mi?(pt!==vr||Rt!==Ha)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",lt)),Z}function yt(it){return typeof HTMLImageElement<"u"&&it instanceof HTMLImageElement?(a.width=it.naturalWidth||it.width,a.height=it.naturalHeight||it.height):typeof VideoFrame<"u"&&it instanceof VideoFrame?(a.width=it.displayWidth,a.height=it.displayHeight):(a.width=it.width,a.height=it.height),a}this.allocateTextureUnit=b,this.resetTextureUnits=P,this.setTexture2D=I,this.setTexture2DArray=L,this.setTexture3D=D,this.setTextureCube=O,this.rebindTextures=k,this.setupRenderTarget=Q,this.updateRenderTargetMipmap=et,this.updateMultisampleRenderTarget=ft,this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=H,this.useMultisampledRTT=Tt}function AO(v,t){function i(f,y=vo){let C;const o=oi.getTransfer(y);if(f===Ha)return v.UNSIGNED_BYTE;if(f===bx)return v.UNSIGNED_SHORT_4_4_4_4;if(f===Ix)return v.UNSIGNED_SHORT_5_5_5_1;if(f===EC)return v.UNSIGNED_INT_5_9_9_9_REV;if(f===yC)return v.BYTE;if(f===TC)return v.SHORT;if(f===mc)return v.UNSIGNED_SHORT;if(f===Px)return v.INT;if(f===kl)return v.UNSIGNED_INT;if(f===ba)return v.FLOAT;if(f===Xc)return v.HALF_FLOAT;if(f===SC)return v.ALPHA;if(f===CC)return v.RGB;if(f===vr)return v.RGBA;if(f===AC)return v.LUMINANCE;if(f===wC)return v.LUMINANCE_ALPHA;if(f===tu)return v.DEPTH_COMPONENT;if(f===Pu)return v.DEPTH_STENCIL;if(f===MC)return v.RED;if(f===Lx)return v.RED_INTEGER;if(f===RC)return v.RG;if(f===Fx)return v.RG_INTEGER;if(f===Dx)return v.RGBA_INTEGER;if(f===cp||f===dp||f===pp||f===vp)if(o===mi)if(C=t.get("WEBGL_compressed_texture_s3tc_srgb"),C!==null){if(f===cp)return C.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(f===dp)return C.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(f===pp)return C.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(f===vp)return C.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(C=t.get("WEBGL_compressed_texture_s3tc"),C!==null){if(f===cp)return C.COMPRESSED_RGB_S3TC_DXT1_EXT;if(f===dp)return C.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(f===pp)return C.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(f===vp)return C.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(f===q0||f===tg||f===eg||f===ig)if(C=t.get("WEBGL_compressed_texture_pvrtc"),C!==null){if(f===q0)return C.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(f===tg)return C.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(f===eg)return C.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(f===ig)return C.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(f===ng||f===sg||f===rg)if(C=t.get("WEBGL_compressed_texture_etc"),C!==null){if(f===ng||f===sg)return o===mi?C.COMPRESSED_SRGB8_ETC2:C.COMPRESSED_RGB8_ETC2;if(f===rg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:C.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(f===ag||f===og||f===lg||f===hg||f===ug||f===fg||f===cg||f===dg||f===pg||f===vg||f===mg||f===gg||f===xg||f===yg)if(C=t.get("WEBGL_compressed_texture_astc"),C!==null){if(f===ag)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:C.COMPRESSED_RGBA_ASTC_4x4_KHR;if(f===og)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:C.COMPRESSED_RGBA_ASTC_5x4_KHR;if(f===lg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:C.COMPRESSED_RGBA_ASTC_5x5_KHR;if(f===hg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:C.COMPRESSED_RGBA_ASTC_6x5_KHR;if(f===ug)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:C.COMPRESSED_RGBA_ASTC_6x6_KHR;if(f===fg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:C.COMPRESSED_RGBA_ASTC_8x5_KHR;if(f===cg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:C.COMPRESSED_RGBA_ASTC_8x6_KHR;if(f===dg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:C.COMPRESSED_RGBA_ASTC_8x8_KHR;if(f===pg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:C.COMPRESSED_RGBA_ASTC_10x5_KHR;if(f===vg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:C.COMPRESSED_RGBA_ASTC_10x6_KHR;if(f===mg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:C.COMPRESSED_RGBA_ASTC_10x8_KHR;if(f===gg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:C.COMPRESSED_RGBA_ASTC_10x10_KHR;if(f===xg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:C.COMPRESSED_RGBA_ASTC_12x10_KHR;if(f===yg)return o===mi?C.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:C.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(f===mp||f===Tg||f===Eg)if(C=t.get("EXT_texture_compression_bptc"),C!==null){if(f===mp)return o===mi?C.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:C.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(f===Tg)return C.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(f===Eg)return C.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(f===PC||f===Sg||f===Cg||f===Ag)if(C=t.get("EXT_texture_compression_rgtc"),C!==null){if(f===mp)return C.COMPRESSED_RED_RGTC1_EXT;if(f===Sg)return C.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(f===Cg)return C.COMPRESSED_RED_GREEN_RGTC2_EXT;if(f===Ag)return C.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return f===Ru?v.UNSIGNED_INT_24_8:v[f]!==void 0?v[f]:null}return{convert:i}}const wO=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,MO=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class RO{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,i,f){if(this.texture===null){const y=new fs,C=t.properties.get(y);C.__webglTexture=i.texture,(i.depthNear!==f.depthNear||i.depthFar!==f.depthFar)&&(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=y}}getMesh(t){if(this.texture!==null&&this.mesh===null){const i=t.cameras[0].viewport,f=new zo({vertexShader:wO,fragmentShader:MO,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new hs(new Av(20,20),f)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class PO extends Ku{constructor(t,i){super();const f=this;let y=null,C=1,o=null,E="local-floor",e=1,a=null,x=null,u=null,r=null,h=null,n=null;const l=new RO,c=i.getContextAttributes();let s=null,d=null;const m=[],p=[],g=new ei;let T=null;const S=new Cs;S.viewport=new gi;const w=new Cs;w.viewport=new gi;const A=[S,w],M=new Z4;let R=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let N=m[G];return N===void 0&&(N=new Lm,m[G]=N),N.getTargetRaySpace()},this.getControllerGrip=function(G){let N=m[G];return N===void 0&&(N=new Lm,m[G]=N),N.getGripSpace()},this.getHand=function(G){let N=m[G];return N===void 0&&(N=new Lm,m[G]=N),N.getHandSpace()};function b(G){const N=p.indexOf(G.inputSource);if(N===-1)return;const H=m[N];H!==void 0&&(H.update(G.inputSource,G.frame,a||o),H.dispatchEvent({type:G.type,data:G.inputSource}))}function F(){y.removeEventListener("select",b),y.removeEventListener("selectstart",b),y.removeEventListener("selectend",b),y.removeEventListener("squeeze",b),y.removeEventListener("squeezestart",b),y.removeEventListener("squeezeend",b),y.removeEventListener("end",F),y.removeEventListener("inputsourceschange",I);for(let G=0;G<m.length;G++){const N=p[G];N!==null&&(p[G]=null,m[G].disconnect(N))}R=null,P=null,l.reset(),t.setRenderTarget(s),h=null,r=null,u=null,y=null,d=null,U.stop(),f.isPresenting=!1,t.setPixelRatio(T),t.setSize(g.width,g.height,!1),f.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){C=G,f.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){E=G,f.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||o},this.setReferenceSpace=function(G){a=G},this.getBaseLayer=function(){return r!==null?r:h},this.getBinding=function(){return u},this.getFrame=function(){return n},this.getSession=function(){return y},this.setSession=async function(G){if(y=G,y!==null){if(s=t.getRenderTarget(),y.addEventListener("select",b),y.addEventListener("selectstart",b),y.addEventListener("selectend",b),y.addEventListener("squeeze",b),y.addEventListener("squeezestart",b),y.addEventListener("squeezeend",b),y.addEventListener("end",F),y.addEventListener("inputsourceschange",I),c.xrCompatible!==!0&&await i.makeXRCompatible(),T=t.getPixelRatio(),t.getSize(g),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let H=null,V=null,$=null;c.depth&&($=c.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,H=c.stencil?Pu:tu,V=c.stencil?Ru:kl);const j={colorFormat:i.RGBA8,depthFormat:$,scaleFactor:C};u=new XRWebGLBinding(y,i),r=u.createProjectionLayer(j),y.updateRenderState({layers:[r]}),t.setPixelRatio(1),t.setSize(r.textureWidth,r.textureHeight,!1),d=new $l(r.textureWidth,r.textureHeight,{format:vr,type:Ha,depthTexture:new HC(r.textureWidth,r.textureHeight,V,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:c.stencil,colorSpace:t.outputColorSpace,samples:c.antialias?4:0,resolveDepthBuffer:r.ignoreDepthValues===!1})}else{const H={antialias:c.antialias,alpha:!0,depth:c.depth,stencil:c.stencil,framebufferScaleFactor:C};h=new XRWebGLLayer(y,i,H),y.updateRenderState({baseLayer:h}),t.setPixelRatio(1),t.setSize(h.framebufferWidth,h.framebufferHeight,!1),d=new $l(h.framebufferWidth,h.framebufferHeight,{format:vr,type:Ha,colorSpace:t.outputColorSpace,stencilBuffer:c.stencil})}d.isXRRenderTarget=!0,this.setFoveation(e),a=null,o=await y.requestReferenceSpace(E),U.setContext(y),U.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(y!==null)return y.environmentBlendMode},this.getDepthTexture=function(){return l.getDepthTexture()};function I(G){for(let N=0;N<G.removed.length;N++){const H=G.removed[N],V=p.indexOf(H);V>=0&&(p[V]=null,m[V].disconnect(H))}for(let N=0;N<G.added.length;N++){const H=G.added[N];let V=p.indexOf(H);if(V===-1){for(let j=0;j<m.length;j++)if(j>=p.length){p.push(H),V=j;break}else if(p[j]===null){p[j]=H,V=j;break}if(V===-1)break}const $=m[V];$&&$.connect(H)}}const L=new St,D=new St;function O(G,N,H){L.setFromMatrixPosition(N.matrixWorld),D.setFromMatrixPosition(H.matrixWorld);const V=L.distanceTo(D),$=N.projectionMatrix.elements,j=H.projectionMatrix.elements,k=$[14]/($[10]-1),Q=$[14]/($[10]+1),et=($[9]+1)/$[5],at=($[9]-1)/$[5],q=($[8]-1)/$[0],ft=(j[8]+1)/j[0],vt=k*q,Tt=k*ft,ct=V/(-q+ft),Nt=ct*-q;if(N.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(Nt),G.translateZ(ct),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert(),$[10]===-1)G.projectionMatrix.copy(N.projectionMatrix),G.projectionMatrixInverse.copy(N.projectionMatrixInverse);else{const yt=k+ct,it=Q+ct,Z=vt-Nt,lt=Tt+(V-Nt),pt=et*Q/it*yt,Rt=at*Q/it*yt;G.projectionMatrix.makePerspective(Z,lt,pt,Rt,yt,it),G.projectionMatrixInverse.copy(G.projectionMatrix).invert()}}function z(G,N){N===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(N.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(y===null)return;let N=G.near,H=G.far;l.texture!==null&&(l.depthNear>0&&(N=l.depthNear),l.depthFar>0&&(H=l.depthFar)),M.near=w.near=S.near=N,M.far=w.far=S.far=H,(R!==M.near||P!==M.far)&&(y.updateRenderState({depthNear:M.near,depthFar:M.far}),R=M.near,P=M.far),S.layers.mask=G.layers.mask|2,w.layers.mask=G.layers.mask|4,M.layers.mask=S.layers.mask|w.layers.mask;const V=G.parent,$=M.cameras;z(M,V);for(let j=0;j<$.length;j++)z($[j],V);$.length===2?O(M,S,w):M.projectionMatrix.copy(S.projectionMatrix),W(G,M,V)};function W(G,N,H){H===null?G.matrix.copy(N.matrixWorld):(G.matrix.copy(H.matrixWorld),G.matrix.invert(),G.matrix.multiply(N.matrixWorld)),G.matrix.decompose(G.position,G.quaternion,G.scale),G.updateMatrixWorld(!0),G.projectionMatrix.copy(N.projectionMatrix),G.projectionMatrixInverse.copy(N.projectionMatrixInverse),G.isPerspectiveCamera&&(G.fov=wg*2*Math.atan(1/G.projectionMatrix.elements[5]),G.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(r===null&&h===null))return e},this.setFoveation=function(G){e=G,r!==null&&(r.fixedFoveation=G),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=G)},this.hasDepthSensing=function(){return l.texture!==null},this.getDepthSensingMesh=function(){return l.getMesh(M)};let X=null;function _(G,N){if(x=N.getViewerPose(a||o),n=N,x!==null){const H=x.views;h!==null&&(t.setRenderTargetFramebuffer(d,h.framebuffer),t.setRenderTarget(d));let V=!1;H.length!==M.cameras.length&&(M.cameras.length=0,V=!0);for(let k=0;k<H.length;k++){const Q=H[k];let et=null;if(h!==null)et=h.getViewport(Q);else{const q=u.getViewSubImage(r,Q);et=q.viewport,k===0&&(t.setRenderTargetTextures(d,q.colorTexture,r.ignoreDepthValues?void 0:q.depthStencilTexture),t.setRenderTarget(d))}let at=A[k];at===void 0&&(at=new Cs,at.layers.enable(k),at.viewport=new gi,A[k]=at),at.matrix.fromArray(Q.transform.matrix),at.matrix.decompose(at.position,at.quaternion,at.scale),at.projectionMatrix.fromArray(Q.projectionMatrix),at.projectionMatrixInverse.copy(at.projectionMatrix).invert(),at.viewport.set(et.x,et.y,et.width,et.height),k===0&&(M.matrix.copy(at.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),V===!0&&M.cameras.push(at)}const $=y.enabledFeatures;if($&&$.includes("depth-sensing")&&y.depthUsage=="gpu-optimized"&&u){const k=u.getDepthInformation(H[0]);k&&k.isValid&&k.texture&&l.init(t,k,y.renderState)}}for(let H=0;H<m.length;H++){const V=p[H],$=m[H];V!==null&&$!==void 0&&$.update(V,N,a||o)}X&&X(G,N),N.detectedPlanes&&f.dispatchEvent({type:"planesdetected",data:N}),n=null}const U=new YC;U.setAnimationLoop(_),this.setAnimationLoop=function(G){X=G},this.dispose=function(){}}}const ul=new qr,bO=new Vi;function IO(v,t){function i(c,s){c.matrixAutoUpdate===!0&&c.updateMatrix(),s.value.copy(c.matrix)}function f(c,s){s.color.getRGB(c.fogColor.value,zC(v)),s.isFog?(c.fogNear.value=s.near,c.fogFar.value=s.far):s.isFogExp2&&(c.fogDensity.value=s.density)}function y(c,s,d,m,p){s.isMeshBasicMaterial||s.isMeshLambertMaterial?C(c,s):s.isMeshToonMaterial?(C(c,s),u(c,s)):s.isMeshPhongMaterial?(C(c,s),x(c,s)):s.isMeshStandardMaterial?(C(c,s),r(c,s),s.isMeshPhysicalMaterial&&h(c,s,p)):s.isMeshMatcapMaterial?(C(c,s),n(c,s)):s.isMeshDepthMaterial?C(c,s):s.isMeshDistanceMaterial?(C(c,s),l(c,s)):s.isMeshNormalMaterial?C(c,s):s.isLineBasicMaterial?(o(c,s),s.isLineDashedMaterial&&E(c,s)):s.isPointsMaterial?e(c,s,d,m):s.isSpriteMaterial?a(c,s):s.isShadowMaterial?(c.color.value.copy(s.color),c.opacity.value=s.opacity):s.isShaderMaterial&&(s.uniformsNeedUpdate=!1)}function C(c,s){c.opacity.value=s.opacity,s.color&&c.diffuse.value.copy(s.color),s.emissive&&c.emissive.value.copy(s.emissive).multiplyScalar(s.emissiveIntensity),s.map&&(c.map.value=s.map,i(s.map,c.mapTransform)),s.alphaMap&&(c.alphaMap.value=s.alphaMap,i(s.alphaMap,c.alphaMapTransform)),s.bumpMap&&(c.bumpMap.value=s.bumpMap,i(s.bumpMap,c.bumpMapTransform),c.bumpScale.value=s.bumpScale,s.side===us&&(c.bumpScale.value*=-1)),s.normalMap&&(c.normalMap.value=s.normalMap,i(s.normalMap,c.normalMapTransform),c.normalScale.value.copy(s.normalScale),s.side===us&&c.normalScale.value.negate()),s.displacementMap&&(c.displacementMap.value=s.displacementMap,i(s.displacementMap,c.displacementMapTransform),c.displacementScale.value=s.displacementScale,c.displacementBias.value=s.displacementBias),s.emissiveMap&&(c.emissiveMap.value=s.emissiveMap,i(s.emissiveMap,c.emissiveMapTransform)),s.specularMap&&(c.specularMap.value=s.specularMap,i(s.specularMap,c.specularMapTransform)),s.alphaTest>0&&(c.alphaTest.value=s.alphaTest);const d=t.get(s),m=d.envMap,p=d.envMapRotation;m&&(c.envMap.value=m,ul.copy(p),ul.x*=-1,ul.y*=-1,ul.z*=-1,m.isCubeTexture&&m.isRenderTargetTexture===!1&&(ul.y*=-1,ul.z*=-1),c.envMapRotation.value.setFromMatrix4(bO.makeRotationFromEuler(ul)),c.flipEnvMap.value=m.isCubeTexture&&m.isRenderTargetTexture===!1?-1:1,c.reflectivity.value=s.reflectivity,c.ior.value=s.ior,c.refractionRatio.value=s.refractionRatio),s.lightMap&&(c.lightMap.value=s.lightMap,c.lightMapIntensity.value=s.lightMapIntensity,i(s.lightMap,c.lightMapTransform)),s.aoMap&&(c.aoMap.value=s.aoMap,c.aoMapIntensity.value=s.aoMapIntensity,i(s.aoMap,c.aoMapTransform))}function o(c,s){c.diffuse.value.copy(s.color),c.opacity.value=s.opacity,s.map&&(c.map.value=s.map,i(s.map,c.mapTransform))}function E(c,s){c.dashSize.value=s.dashSize,c.totalSize.value=s.dashSize+s.gapSize,c.scale.value=s.scale}function e(c,s,d,m){c.diffuse.value.copy(s.color),c.opacity.value=s.opacity,c.size.value=s.size*d,c.scale.value=m*.5,s.map&&(c.map.value=s.map,i(s.map,c.uvTransform)),s.alphaMap&&(c.alphaMap.value=s.alphaMap,i(s.alphaMap,c.alphaMapTransform)),s.alphaTest>0&&(c.alphaTest.value=s.alphaTest)}function a(c,s){c.diffuse.value.copy(s.color),c.opacity.value=s.opacity,c.rotation.value=s.rotation,s.map&&(c.map.value=s.map,i(s.map,c.mapTransform)),s.alphaMap&&(c.alphaMap.value=s.alphaMap,i(s.alphaMap,c.alphaMapTransform)),s.alphaTest>0&&(c.alphaTest.value=s.alphaTest)}function x(c,s){c.specular.value.copy(s.specular),c.shininess.value=Math.max(s.shininess,1e-4)}function u(c,s){s.gradientMap&&(c.gradientMap.value=s.gradientMap)}function r(c,s){c.metalness.value=s.metalness,s.metalnessMap&&(c.metalnessMap.value=s.metalnessMap,i(s.metalnessMap,c.metalnessMapTransform)),c.roughness.value=s.roughness,s.roughnessMap&&(c.roughnessMap.value=s.roughnessMap,i(s.roughnessMap,c.roughnessMapTransform)),s.envMap&&(c.envMapIntensity.value=s.envMapIntensity)}function h(c,s,d){c.ior.value=s.ior,s.sheen>0&&(c.sheenColor.value.copy(s.sheenColor).multiplyScalar(s.sheen),c.sheenRoughness.value=s.sheenRoughness,s.sheenColorMap&&(c.sheenColorMap.value=s.sheenColorMap,i(s.sheenColorMap,c.sheenColorMapTransform)),s.sheenRoughnessMap&&(c.sheenRoughnessMap.value=s.sheenRoughnessMap,i(s.sheenRoughnessMap,c.sheenRoughnessMapTransform))),s.clearcoat>0&&(c.clearcoat.value=s.clearcoat,c.clearcoatRoughness.value=s.clearcoatRoughness,s.clearcoatMap&&(c.clearcoatMap.value=s.clearcoatMap,i(s.clearcoatMap,c.clearcoatMapTransform)),s.clearcoatRoughnessMap&&(c.clearcoatRoughnessMap.value=s.clearcoatRoughnessMap,i(s.clearcoatRoughnessMap,c.clearcoatRoughnessMapTransform)),s.clearcoatNormalMap&&(c.clearcoatNormalMap.value=s.clearcoatNormalMap,i(s.clearcoatNormalMap,c.clearcoatNormalMapTransform),c.clearcoatNormalScale.value.copy(s.clearcoatNormalScale),s.side===us&&c.clearcoatNormalScale.value.negate())),s.dispersion>0&&(c.dispersion.value=s.dispersion),s.iridescence>0&&(c.iridescence.value=s.iridescence,c.iridescenceIOR.value=s.iridescenceIOR,c.iridescenceThicknessMinimum.value=s.iridescenceThicknessRange[0],c.iridescenceThicknessMaximum.value=s.iridescenceThicknessRange[1],s.iridescenceMap&&(c.iridescenceMap.value=s.iridescenceMap,i(s.iridescenceMap,c.iridescenceMapTransform)),s.iridescenceThicknessMap&&(c.iridescenceThicknessMap.value=s.iridescenceThicknessMap,i(s.iridescenceThicknessMap,c.iridescenceThicknessMapTransform))),s.transmission>0&&(c.transmission.value=s.transmission,c.transmissionSamplerMap.value=d.texture,c.transmissionSamplerSize.value.set(d.width,d.height),s.transmissionMap&&(c.transmissionMap.value=s.transmissionMap,i(s.transmissionMap,c.transmissionMapTransform)),c.thickness.value=s.thickness,s.thicknessMap&&(c.thicknessMap.value=s.thicknessMap,i(s.thicknessMap,c.thicknessMapTransform)),c.attenuationDistance.value=s.attenuationDistance,c.attenuationColor.value.copy(s.attenuationColor)),s.anisotropy>0&&(c.anisotropyVector.value.set(s.anisotropy*Math.cos(s.anisotropyRotation),s.anisotropy*Math.sin(s.anisotropyRotation)),s.anisotropyMap&&(c.anisotropyMap.value=s.anisotropyMap,i(s.anisotropyMap,c.anisotropyMapTransform))),c.specularIntensity.value=s.specularIntensity,c.specularColor.value.copy(s.specularColor),s.specularColorMap&&(c.specularColorMap.value=s.specularColorMap,i(s.specularColorMap,c.specularColorMapTransform)),s.specularIntensityMap&&(c.specularIntensityMap.value=s.specularIntensityMap,i(s.specularIntensityMap,c.specularIntensityMapTransform))}function n(c,s){s.matcap&&(c.matcap.value=s.matcap)}function l(c,s){const d=t.get(s).light;c.referencePosition.value.setFromMatrixPosition(d.matrixWorld),c.nearDistance.value=d.shadow.camera.near,c.farDistance.value=d.shadow.camera.far}return{refreshFogUniforms:f,refreshMaterialUniforms:y}}function LO(v,t,i,f){let y={},C={},o=[];const E=v.getParameter(v.MAX_UNIFORM_BUFFER_BINDINGS);function e(d,m){const p=m.program;f.uniformBlockBinding(d,p)}function a(d,m){let p=y[d.id];p===void 0&&(n(d),p=x(d),y[d.id]=p,d.addEventListener("dispose",c));const g=m.program;f.updateUBOMapping(d,g);const T=t.render.frame;C[d.id]!==T&&(r(d),C[d.id]=T)}function x(d){const m=u();d.__bindingPointIndex=m;const p=v.createBuffer(),g=d.__size,T=d.usage;return v.bindBuffer(v.UNIFORM_BUFFER,p),v.bufferData(v.UNIFORM_BUFFER,g,T),v.bindBuffer(v.UNIFORM_BUFFER,null),v.bindBufferBase(v.UNIFORM_BUFFER,m,p),p}function u(){for(let d=0;d<E;d++)if(o.indexOf(d)===-1)return o.push(d),d;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function r(d){const m=y[d.id],p=d.uniforms,g=d.__cache;v.bindBuffer(v.UNIFORM_BUFFER,m);for(let T=0,S=p.length;T<S;T++){const w=Array.isArray(p[T])?p[T]:[p[T]];for(let A=0,M=w.length;A<M;A++){const R=w[A];if(h(R,T,A,g)===!0){const P=R.__offset,b=Array.isArray(R.value)?R.value:[R.value];let F=0;for(let I=0;I<b.length;I++){const L=b[I],D=l(L);typeof L=="number"||typeof L=="boolean"?(R.__data[0]=L,v.bufferSubData(v.UNIFORM_BUFFER,P+F,R.__data)):L.isMatrix3?(R.__data[0]=L.elements[0],R.__data[1]=L.elements[1],R.__data[2]=L.elements[2],R.__data[3]=0,R.__data[4]=L.elements[3],R.__data[5]=L.elements[4],R.__data[6]=L.elements[5],R.__data[7]=0,R.__data[8]=L.elements[6],R.__data[9]=L.elements[7],R.__data[10]=L.elements[8],R.__data[11]=0):(L.toArray(R.__data,F),F+=D.storage/Float32Array.BYTES_PER_ELEMENT)}v.bufferSubData(v.UNIFORM_BUFFER,P,R.__data)}}}v.bindBuffer(v.UNIFORM_BUFFER,null)}function h(d,m,p,g){const T=d.value,S=m+"_"+p;if(g[S]===void 0)return typeof T=="number"||typeof T=="boolean"?g[S]=T:g[S]=T.clone(),!0;{const w=g[S];if(typeof T=="number"||typeof T=="boolean"){if(w!==T)return g[S]=T,!0}else if(w.equals(T)===!1)return w.copy(T),!0}return!1}function n(d){const m=d.uniforms;let p=0;const g=16;for(let S=0,w=m.length;S<w;S++){const A=Array.isArray(m[S])?m[S]:[m[S]];for(let M=0,R=A.length;M<R;M++){const P=A[M],b=Array.isArray(P.value)?P.value:[P.value];for(let F=0,I=b.length;F<I;F++){const L=b[F],D=l(L),O=p%g,z=O%D.boundary,W=O+z;p+=z,W!==0&&g-W<D.storage&&(p+=g-W),P.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=p,p+=D.storage}}}const T=p%g;return T>0&&(p+=g-T),d.__size=p,d.__cache={},this}function l(d){const m={boundary:0,storage:0};return typeof d=="number"||typeof d=="boolean"?(m.boundary=4,m.storage=4):d.isVector2?(m.boundary=8,m.storage=8):d.isVector3||d.isColor?(m.boundary=16,m.storage=12):d.isVector4?(m.boundary=16,m.storage=16):d.isMatrix3?(m.boundary=48,m.storage=48):d.isMatrix4?(m.boundary=64,m.storage=64):d.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",d),m}function c(d){const m=d.target;m.removeEventListener("dispose",c);const p=o.indexOf(m.__bindingPointIndex);o.splice(p,1),v.deleteBuffer(y[m.id]),delete y[m.id],delete C[m.id]}function s(){for(const d in y)v.deleteBuffer(y[d]);o=[],y={},C={}}return{bind:e,update:a,dispose:s}}class FO{constructor(t={}){const{canvas:i=f4(),context:f=null,depth:y=!0,stencil:C=!1,alpha:o=!1,antialias:E=!1,premultipliedAlpha:e=!0,preserveDrawingBuffer:a=!1,powerPreference:x="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:r=!1}=t;this.isWebGLRenderer=!0;let h;if(f!==null){if(typeof WebGLRenderingContext<"u"&&f instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=f.getContextAttributes().alpha}else h=o;const n=new Uint32Array(4),l=new Int32Array(4);let c=null,s=null;const d=[],m=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Xs,this.toneMapping=Io,this.toneMappingExposure=1;const p=this;let g=!1,T=0,S=0,w=null,A=-1,M=null;const R=new gi,P=new gi;let b=null;const F=new ui(0);let I=0,L=i.width,D=i.height,O=1,z=null,W=null;const X=new gi(0,0,L,D),_=new gi(0,0,L,D);let U=!1;const G=new Nx;let N=!1,H=!1;this.transmissionResolutionScale=1;const V=new Vi,$=new Vi,j=new St,k=new gi,Q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let et=!1;function at(){return w===null?O:1}let q=f;function ft(nt,gt){return i.getContext(nt,gt)}try{const nt={alpha:!0,depth:y,stencil:C,antialias:E,premultipliedAlpha:e,preserveDrawingBuffer:a,powerPreference:x,failIfMajorPerformanceCaveat:u};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${Rx}`),i.addEventListener("webglcontextlost",Dt,!1),i.addEventListener("webglcontextrestored",ne,!1),i.addEventListener("webglcontextcreationerror",ee,!1),q===null){const gt="webgl2";if(q=ft(gt,nt),q===null)throw ft(gt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(nt){throw console.error("THREE.WebGLRenderer: "+nt.message),nt}let vt,Tt,ct,Nt,yt,it,Z,lt,pt,Rt,At,Kt,Bt,Wt,he,zt,Ut,Xt,Pt,$t,pe,fe,Fe,dt;function Zt(){vt=new HD(q),vt.init(),fe=new AO(q,vt),Tt=new BD(q,vt,t,fe),ct=new SO(q,vt),Tt.reverseDepthBuffer&&r&&ct.buffers.depth.setReversed(!0),Nt=new YD(q),yt=new hO,it=new CO(q,vt,ct,yt,Tt,fe,Nt),Z=new VD(p),lt=new WD(p),pt=new Q4(q),Fe=new OD(q,pt),Rt=new _D(q,pt,Nt,Fe),At=new $D(q,Rt,pt,Nt),Pt=new kD(q,Tt,it),zt=new UD(yt),Kt=new lO(p,Z,lt,vt,Tt,Fe,zt),Bt=new IO(p,yt),Wt=new fO,he=new gO(vt),Xt=new DD(p,Z,lt,ct,At,h,e),Ut=new TO(p,At,Tt),dt=new LO(q,Nt,Tt,ct),$t=new ND(q,vt,Nt),pe=new XD(q,vt,Nt),Nt.programs=Kt.programs,p.capabilities=Tt,p.extensions=vt,p.properties=yt,p.renderLists=Wt,p.shadowMap=Ut,p.state=ct,p.info=Nt}Zt();const Ft=new PO(p,q);this.xr=Ft,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const nt=vt.get("WEBGL_lose_context");nt&&nt.loseContext()},this.forceContextRestore=function(){const nt=vt.get("WEBGL_lose_context");nt&&nt.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(nt){nt!==void 0&&(O=nt,this.setSize(L,D,!1))},this.getSize=function(nt){return nt.set(L,D)},this.setSize=function(nt,gt,Mt=!0){if(Ft.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=nt,D=gt,i.width=Math.floor(nt*O),i.height=Math.floor(gt*O),Mt===!0&&(i.style.width=nt+"px",i.style.height=gt+"px"),this.setViewport(0,0,nt,gt)},this.getDrawingBufferSize=function(nt){return nt.set(L*O,D*O).floor()},this.setDrawingBufferSize=function(nt,gt,Mt){L=nt,D=gt,O=Mt,i.width=Math.floor(nt*Mt),i.height=Math.floor(gt*Mt),this.setViewport(0,0,nt,gt)},this.getCurrentViewport=function(nt){return nt.copy(R)},this.getViewport=function(nt){return nt.copy(X)},this.setViewport=function(nt,gt,Mt,bt){nt.isVector4?X.set(nt.x,nt.y,nt.z,nt.w):X.set(nt,gt,Mt,bt),ct.viewport(R.copy(X).multiplyScalar(O).round())},this.getScissor=function(nt){return nt.copy(_)},this.setScissor=function(nt,gt,Mt,bt){nt.isVector4?_.set(nt.x,nt.y,nt.z,nt.w):_.set(nt,gt,Mt,bt),ct.scissor(P.copy(_).multiplyScalar(O).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(nt){ct.setScissorTest(U=nt)},this.setOpaqueSort=function(nt){z=nt},this.setTransparentSort=function(nt){W=nt},this.getClearColor=function(nt){return nt.copy(Xt.getClearColor())},this.setClearColor=function(){Xt.setClearColor.apply(Xt,arguments)},this.getClearAlpha=function(){return Xt.getClearAlpha()},this.setClearAlpha=function(){Xt.setClearAlpha.apply(Xt,arguments)},this.clear=function(nt=!0,gt=!0,Mt=!0){let bt=0;if(nt){let Et=!1;if(w!==null){const kt=w.texture.format;Et=kt===Dx||kt===Fx||kt===Lx}if(Et){const kt=w.texture.type,ie=kt===Ha||kt===kl||kt===mc||kt===Ru||kt===bx||kt===Ix,ae=Xt.getClearColor(),oe=Xt.getClearAlpha(),Ee=ae.r,Ce=ae.g,ge=ae.b;ie?(n[0]=Ee,n[1]=Ce,n[2]=ge,n[3]=oe,q.clearBufferuiv(q.COLOR,0,n)):(l[0]=Ee,l[1]=Ce,l[2]=ge,l[3]=oe,q.clearBufferiv(q.COLOR,0,l))}else bt|=q.COLOR_BUFFER_BIT}gt&&(bt|=q.DEPTH_BUFFER_BIT),Mt&&(bt|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(bt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",Dt,!1),i.removeEventListener("webglcontextrestored",ne,!1),i.removeEventListener("webglcontextcreationerror",ee,!1),Xt.dispose(),Wt.dispose(),he.dispose(),yt.dispose(),Z.dispose(),lt.dispose(),At.dispose(),Fe.dispose(),dt.dispose(),Kt.dispose(),Ft.dispose(),Ft.removeEventListener("sessionstart",wn),Ft.removeEventListener("sessionend",Kn),De.stop()};function Dt(nt){nt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ne(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const nt=Nt.autoReset,gt=Ut.enabled,Mt=Ut.autoUpdate,bt=Ut.needsUpdate,Et=Ut.type;Zt(),Nt.autoReset=nt,Ut.enabled=gt,Ut.autoUpdate=Mt,Ut.needsUpdate=bt,Ut.type=Et}function ee(nt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",nt.statusMessage)}function Se(nt){const gt=nt.target;gt.removeEventListener("dispose",Se),Ei(gt)}function Ei(nt){Fi(nt),yt.remove(nt)}function Fi(nt){const gt=yt.get(nt).programs;gt!==void 0&&(gt.forEach(function(Mt){Kt.releaseProgram(Mt)}),nt.isShaderMaterial&&Kt.releaseShaderCache(nt))}this.renderBufferDirect=function(nt,gt,Mt,bt,Et,kt){gt===null&&(gt=Q);const ie=Et.isMesh&&Et.matrixWorld.determinant()<0,ae=to(nt,gt,Mt,bt,Et);ct.setMaterial(bt,ie);let oe=Mt.index,Ee=1;if(bt.wireframe===!0){if(oe=Rt.getWireframeAttribute(Mt),oe===void 0)return;Ee=2}const Ce=Mt.drawRange,ge=Mt.attributes.position;let Ve=Ce.start*Ee,ii=(Ce.start+Ce.count)*Ee;kt!==null&&(Ve=Math.max(Ve,kt.start*Ee),ii=Math.min(ii,(kt.start+kt.count)*Ee)),oe!==null?(Ve=Math.max(Ve,0),ii=Math.min(ii,oe.count)):ge!=null&&(Ve=Math.max(Ve,0),ii=Math.min(ii,ge.count));const ai=ii-Ve;if(ai<0||ai===1/0)return;Fe.setup(Et,bt,ae,Mt,oe);let Qe,Ne=$t;if(oe!==null&&(Qe=pt.get(oe),Ne=pe,Ne.setIndex(Qe)),Et.isMesh)bt.wireframe===!0?(ct.setLineWidth(bt.wireframeLinewidth*at()),Ne.setMode(q.LINES)):Ne.setMode(q.TRIANGLES);else if(Et.isLine){let ve=bt.linewidth;ve===void 0&&(ve=1),ct.setLineWidth(ve*at()),Et.isLineSegments?Ne.setMode(q.LINES):Et.isLineLoop?Ne.setMode(q.LINE_LOOP):Ne.setMode(q.LINE_STRIP)}else Et.isPoints?Ne.setMode(q.POINTS):Et.isSprite&&Ne.setMode(q.TRIANGLES);if(Et.isBatchedMesh)if(Et._multiDrawInstances!==null)Ne.renderMultiDrawInstances(Et._multiDrawStarts,Et._multiDrawCounts,Et._multiDrawCount,Et._multiDrawInstances);else if(vt.get("WEBGL_multi_draw"))Ne.renderMultiDraw(Et._multiDrawStarts,Et._multiDrawCounts,Et._multiDrawCount);else{const ve=Et._multiDrawStarts,bi=Et._multiDrawCounts,me=Et._multiDrawCount,hn=oe?pt.get(oe).bytesPerElement:1,ts=yt.get(bt).currentProgram.getUniforms();for(let Wi=0;Wi<me;Wi++)ts.setValue(q,"_gl_DrawID",Wi),Ne.render(ve[Wi]/hn,bi[Wi])}else if(Et.isInstancedMesh)Ne.renderInstances(Ve,ai,Et.count);else if(Mt.isInstancedBufferGeometry){const ve=Mt._maxInstanceCount!==void 0?Mt._maxInstanceCount:1/0,bi=Math.min(Mt.instanceCount,ve);Ne.renderInstances(Ve,ai,bi)}else Ne.render(Ve,ai)};function We(nt,gt,Mt){nt.transparent===!0&&nt.side===Ra&&nt.forceSinglePass===!1?(nt.side=us,nt.needsUpdate=!0,ra(nt,gt,Mt),nt.side=Wa,nt.needsUpdate=!0,ra(nt,gt,Mt),nt.side=Ra):ra(nt,gt,Mt)}this.compile=function(nt,gt,Mt=null){Mt===null&&(Mt=nt),s=he.get(Mt),s.init(gt),m.push(s),Mt.traverseVisible(function(Et){Et.isLight&&Et.layers.test(gt.layers)&&(s.pushLight(Et),Et.castShadow&&s.pushShadow(Et))}),nt!==Mt&&nt.traverseVisible(function(Et){Et.isLight&&Et.layers.test(gt.layers)&&(s.pushLight(Et),Et.castShadow&&s.pushShadow(Et))}),s.setupLights();const bt=new Set;return nt.traverse(function(Et){if(!(Et.isMesh||Et.isPoints||Et.isLine||Et.isSprite))return;const kt=Et.material;if(kt)if(Array.isArray(kt))for(let ie=0;ie<kt.length;ie++){const ae=kt[ie];We(ae,Mt,Et),bt.add(ae)}else We(kt,Mt,Et),bt.add(kt)}),m.pop(),s=null,bt},this.compileAsync=function(nt,gt,Mt=null){const bt=this.compile(nt,gt,Mt);return new Promise(Et=>{function kt(){if(bt.forEach(function(ie){yt.get(ie).currentProgram.isReady()&&bt.delete(ie)}),bt.size===0){Et(nt);return}setTimeout(kt,10)}vt.get("KHR_parallel_shader_compile")!==null?kt():setTimeout(kt,10)})};let Si=null;function Gi(nt){Si&&Si(nt)}function wn(){De.stop()}function Kn(){De.start()}const De=new YC;De.setAnimationLoop(Gi),typeof self<"u"&&De.setContext(self),this.setAnimationLoop=function(nt){Si=nt,Ft.setAnimationLoop(nt),nt===null?De.stop():De.start()},Ft.addEventListener("sessionstart",wn),Ft.addEventListener("sessionend",Kn),this.render=function(nt,gt){if(gt!==void 0&&gt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;if(nt.matrixWorldAutoUpdate===!0&&nt.updateMatrixWorld(),gt.parent===null&&gt.matrixWorldAutoUpdate===!0&&gt.updateMatrixWorld(),Ft.enabled===!0&&Ft.isPresenting===!0&&(Ft.cameraAutoUpdate===!0&&Ft.updateCamera(gt),gt=Ft.getCamera()),nt.isScene===!0&&nt.onBeforeRender(p,nt,gt,w),s=he.get(nt,m.length),s.init(gt),m.push(s),$.multiplyMatrices(gt.projectionMatrix,gt.matrixWorldInverse),G.setFromProjectionMatrix($),H=this.localClippingEnabled,N=zt.init(this.clippingPlanes,H),c=Wt.get(nt,d.length),c.init(),d.push(c),Ft.enabled===!0&&Ft.isPresenting===!0){const kt=p.xr.getDepthSensingMesh();kt!==null&&sa(kt,gt,-1/0,p.sortObjects)}sa(nt,gt,0,p.sortObjects),c.finish(),p.sortObjects===!0&&c.sort(z,W),et=Ft.enabled===!1||Ft.isPresenting===!1||Ft.hasDepthSensing()===!1,et&&Xt.addToRenderList(c,nt),this.info.render.frame++,N===!0&&zt.beginShadows();const Mt=s.state.shadowsArray;Ut.render(Mt,nt,gt),N===!0&&zt.endShadows(),this.info.autoReset===!0&&this.info.reset();const bt=c.opaque,Et=c.transmissive;if(s.setupLights(),gt.isArrayCamera){const kt=gt.cameras;if(Et.length>0)for(let ie=0,ae=kt.length;ie<ae;ie++){const oe=kt[ie];dh(bt,Et,nt,oe)}et&&Xt.render(nt);for(let ie=0,ae=kt.length;ie<ae;ie++){const oe=kt[ie];Rr(c,nt,oe,oe.viewport)}}else Et.length>0&&dh(bt,Et,nt,gt),et&&Xt.render(nt),Rr(c,nt,gt);w!==null&&S===0&&(it.updateMultisampleRenderTarget(w),it.updateRenderTargetMipmap(w)),nt.isScene===!0&&nt.onAfterRender(p,nt,gt),Fe.resetDefaultState(),A=-1,M=null,m.pop(),m.length>0?(s=m[m.length-1],N===!0&&zt.setGlobalState(p.clippingPlanes,s.state.camera)):s=null,d.pop(),d.length>0?c=d[d.length-1]:c=null};function sa(nt,gt,Mt,bt){if(nt.visible===!1)return;if(nt.layers.test(gt.layers)){if(nt.isGroup)Mt=nt.renderOrder;else if(nt.isLOD)nt.autoUpdate===!0&&nt.update(gt);else if(nt.isLight)s.pushLight(nt),nt.castShadow&&s.pushShadow(nt);else if(nt.isSprite){if(!nt.frustumCulled||G.intersectsSprite(nt)){bt&&k.setFromMatrixPosition(nt.matrixWorld).applyMatrix4($);const ie=At.update(nt),ae=nt.material;ae.visible&&c.push(nt,ie,ae,Mt,k.z,null)}}else if((nt.isMesh||nt.isLine||nt.isPoints)&&(!nt.frustumCulled||G.intersectsObject(nt))){const ie=At.update(nt),ae=nt.material;if(bt&&(nt.boundingSphere!==void 0?(nt.boundingSphere===null&&nt.computeBoundingSphere(),k.copy(nt.boundingSphere.center)):(ie.boundingSphere===null&&ie.computeBoundingSphere(),k.copy(ie.boundingSphere.center)),k.applyMatrix4(nt.matrixWorld).applyMatrix4($)),Array.isArray(ae)){const oe=ie.groups;for(let Ee=0,Ce=oe.length;Ee<Ce;Ee++){const ge=oe[Ee],Ve=ae[ge.materialIndex];Ve&&Ve.visible&&c.push(nt,ie,Ve,Mt,k.z,ge)}}else ae.visible&&c.push(nt,ie,ae,Mt,k.z,null)}}const kt=nt.children;for(let ie=0,ae=kt.length;ie<ae;ie++)sa(kt[ie],gt,Mt,bt)}function Rr(nt,gt,Mt,bt){const Et=nt.opaque,kt=nt.transmissive,ie=nt.transparent;s.setupLightsView(Mt),N===!0&&zt.setGlobalState(p.clippingPlanes,Mt),bt&&ct.viewport(R.copy(bt)),Et.length>0&&jn(Et,gt,Mt),kt.length>0&&jn(kt,gt,Mt),ie.length>0&&jn(ie,gt,Mt),ct.buffers.depth.setTest(!0),ct.buffers.depth.setMask(!0),ct.buffers.color.setMask(!0),ct.setPolygonOffset(!1)}function dh(nt,gt,Mt,bt){if((Mt.isScene===!0?Mt.overrideMaterial:null)!==null)return;s.state.transmissionRenderTarget[bt.id]===void 0&&(s.state.transmissionRenderTarget[bt.id]=new $l(1,1,{generateMipmaps:!0,type:vt.has("EXT_color_buffer_half_float")||vt.has("EXT_color_buffer_float")?Xc:Ha,minFilter:Al,samples:4,stencilBuffer:C,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:oi.workingColorSpace}));const kt=s.state.transmissionRenderTarget[bt.id],ie=bt.viewport||R;kt.setSize(ie.z*p.transmissionResolutionScale,ie.w*p.transmissionResolutionScale);const ae=p.getRenderTarget();p.setRenderTarget(kt),p.getClearColor(F),I=p.getClearAlpha(),I<1&&p.setClearColor(16777215,.5),p.clear(),et&&Xt.render(Mt);const oe=p.toneMapping;p.toneMapping=Io;const Ee=bt.viewport;if(bt.viewport!==void 0&&(bt.viewport=void 0),s.setupLightsView(bt),N===!0&&zt.setGlobalState(p.clippingPlanes,bt),jn(nt,Mt,bt),it.updateMultisampleRenderTarget(kt),it.updateRenderTargetMipmap(kt),vt.has("WEBGL_multisampled_render_to_texture")===!1){let Ce=!1;for(let ge=0,Ve=gt.length;ge<Ve;ge++){const ii=gt[ge],ai=ii.object,Qe=ii.geometry,Ne=ii.material,ve=ii.group;if(Ne.side===Ra&&ai.layers.test(bt.layers)){const bi=Ne.side;Ne.side=us,Ne.needsUpdate=!0,qo(ai,Mt,bt,Qe,Ne,ve),Ne.side=bi,Ne.needsUpdate=!0,Ce=!0}}Ce===!0&&(it.updateMultisampleRenderTarget(kt),it.updateRenderTargetMipmap(kt))}p.setRenderTarget(ae),p.setClearColor(F,I),Ee!==void 0&&(bt.viewport=Ee),p.toneMapping=oe}function jn(nt,gt,Mt){const bt=gt.isScene===!0?gt.overrideMaterial:null;for(let Et=0,kt=nt.length;Et<kt;Et++){const ie=nt[Et],ae=ie.object,oe=ie.geometry,Ee=bt===null?ie.material:bt,Ce=ie.group;ae.layers.test(Mt.layers)&&qo(ae,gt,Mt,oe,Ee,Ce)}}function qo(nt,gt,Mt,bt,Et,kt){nt.onBeforeRender(p,gt,Mt,bt,Et,kt),nt.modelViewMatrix.multiplyMatrices(Mt.matrixWorldInverse,nt.matrixWorld),nt.normalMatrix.getNormalMatrix(nt.modelViewMatrix),Et.onBeforeRender(p,gt,Mt,bt,nt,kt),Et.transparent===!0&&Et.side===Ra&&Et.forceSinglePass===!1?(Et.side=us,Et.needsUpdate=!0,p.renderBufferDirect(Mt,gt,bt,Et,nt,kt),Et.side=Wa,Et.needsUpdate=!0,p.renderBufferDirect(Mt,gt,bt,Et,nt,kt),Et.side=Ra):p.renderBufferDirect(Mt,gt,bt,Et,nt,kt),nt.onAfterRender(p,gt,Mt,bt,Et,kt)}function ra(nt,gt,Mt){gt.isScene!==!0&&(gt=Q);const bt=yt.get(nt),Et=s.state.lights,kt=s.state.shadowsArray,ie=Et.state.version,ae=Kt.getParameters(nt,Et.state,kt,gt,Mt),oe=Kt.getProgramCacheKey(ae);let Ee=bt.programs;bt.environment=nt.isMeshStandardMaterial?gt.environment:null,bt.fog=gt.fog,bt.envMap=(nt.isMeshStandardMaterial?lt:Z).get(nt.envMap||bt.environment),bt.envMapRotation=bt.environment!==null&&nt.envMap===null?gt.environmentRotation:nt.envMapRotation,Ee===void 0&&(nt.addEventListener("dispose",Se),Ee=new Map,bt.programs=Ee);let Ce=Ee.get(oe);if(Ce!==void 0){if(bt.currentProgram===Ce&&bt.lightsStateVersion===ie)return qa(nt,ae),Ce}else ae.uniforms=Kt.getUniforms(nt),nt.onBeforeCompile(ae,p),Ce=Kt.acquireProgram(ae,oe),Ee.set(oe,Ce),bt.uniforms=ae.uniforms;const ge=bt.uniforms;return(!nt.isShaderMaterial&&!nt.isRawShaderMaterial||nt.clipping===!0)&&(ge.clippingPlanes=zt.uniform),qa(nt,ae),bt.needsLights=tl(nt),bt.lightsStateVersion=ie,bt.needsLights&&(ge.ambientLightColor.value=Et.state.ambient,ge.lightProbe.value=Et.state.probe,ge.directionalLights.value=Et.state.directional,ge.directionalLightShadows.value=Et.state.directionalShadow,ge.spotLights.value=Et.state.spot,ge.spotLightShadows.value=Et.state.spotShadow,ge.rectAreaLights.value=Et.state.rectArea,ge.ltc_1.value=Et.state.rectAreaLTC1,ge.ltc_2.value=Et.state.rectAreaLTC2,ge.pointLights.value=Et.state.point,ge.pointLightShadows.value=Et.state.pointShadow,ge.hemisphereLights.value=Et.state.hemi,ge.directionalShadowMap.value=Et.state.directionalShadowMap,ge.directionalShadowMatrix.value=Et.state.directionalShadowMatrix,ge.spotShadowMap.value=Et.state.spotShadowMap,ge.spotLightMatrix.value=Et.state.spotLightMatrix,ge.spotLightMap.value=Et.state.spotLightMap,ge.pointShadowMap.value=Et.state.pointShadowMap,ge.pointShadowMatrix.value=Et.state.pointShadowMatrix),bt.currentProgram=Ce,bt.uniformsList=null,Ce}function aa(nt){if(nt.uniformsList===null){const gt=nt.currentProgram.getUniforms();nt.uniformsList=gp.seqWithValue(gt.seq,nt.uniforms)}return nt.uniformsList}function qa(nt,gt){const Mt=yt.get(nt);Mt.outputColorSpace=gt.outputColorSpace,Mt.batching=gt.batching,Mt.batchingColor=gt.batchingColor,Mt.instancing=gt.instancing,Mt.instancingColor=gt.instancingColor,Mt.instancingMorph=gt.instancingMorph,Mt.skinning=gt.skinning,Mt.morphTargets=gt.morphTargets,Mt.morphNormals=gt.morphNormals,Mt.morphColors=gt.morphColors,Mt.morphTargetsCount=gt.morphTargetsCount,Mt.numClippingPlanes=gt.numClippingPlanes,Mt.numIntersection=gt.numClipIntersection,Mt.vertexAlphas=gt.vertexAlphas,Mt.vertexTangents=gt.vertexTangents,Mt.toneMapping=gt.toneMapping}function to(nt,gt,Mt,bt,Et){gt.isScene!==!0&&(gt=Q),it.resetTextureUnits();const kt=gt.fog,ie=bt.isMeshStandardMaterial?gt.environment:null,ae=w===null?p.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:bu,oe=(bt.isMeshStandardMaterial?lt:Z).get(bt.envMap||ie),Ee=bt.vertexColors===!0&&!!Mt.attributes.color&&Mt.attributes.color.itemSize===4,Ce=!!Mt.attributes.tangent&&(!!bt.normalMap||bt.anisotropy>0),ge=!!Mt.morphAttributes.position,Ve=!!Mt.morphAttributes.normal,ii=!!Mt.morphAttributes.color;let ai=Io;bt.toneMapped&&(w===null||w.isXRRenderTarget===!0)&&(ai=p.toneMapping);const Qe=Mt.morphAttributes.position||Mt.morphAttributes.normal||Mt.morphAttributes.color,Ne=Qe!==void 0?Qe.length:0,ve=yt.get(bt),bi=s.state.lights;if(N===!0&&(H===!0||nt!==M)){const un=nt===M&&bt.id===A;zt.setState(bt,nt,un)}let me=!1;bt.version===ve.__version?(ve.needsLights&&ve.lightsStateVersion!==bi.state.version||ve.outputColorSpace!==ae||Et.isBatchedMesh&&ve.batching===!1||!Et.isBatchedMesh&&ve.batching===!0||Et.isBatchedMesh&&ve.batchingColor===!0&&Et.colorTexture===null||Et.isBatchedMesh&&ve.batchingColor===!1&&Et.colorTexture!==null||Et.isInstancedMesh&&ve.instancing===!1||!Et.isInstancedMesh&&ve.instancing===!0||Et.isSkinnedMesh&&ve.skinning===!1||!Et.isSkinnedMesh&&ve.skinning===!0||Et.isInstancedMesh&&ve.instancingColor===!0&&Et.instanceColor===null||Et.isInstancedMesh&&ve.instancingColor===!1&&Et.instanceColor!==null||Et.isInstancedMesh&&ve.instancingMorph===!0&&Et.morphTexture===null||Et.isInstancedMesh&&ve.instancingMorph===!1&&Et.morphTexture!==null||ve.envMap!==oe||bt.fog===!0&&ve.fog!==kt||ve.numClippingPlanes!==void 0&&(ve.numClippingPlanes!==zt.numPlanes||ve.numIntersection!==zt.numIntersection)||ve.vertexAlphas!==Ee||ve.vertexTangents!==Ce||ve.morphTargets!==ge||ve.morphNormals!==Ve||ve.morphColors!==ii||ve.toneMapping!==ai||ve.morphTargetsCount!==Ne)&&(me=!0):(me=!0,ve.__version=bt.version);let hn=ve.currentProgram;me===!0&&(hn=ra(bt,gt,Et));let ts=!1,Wi=!1,Pr=!1;const pi=hn.getUniforms(),Un=ve.uniforms;if(ct.useProgram(hn.program)&&(ts=!0,Wi=!0,Pr=!0),bt.id!==A&&(A=bt.id,Wi=!0),ts||M!==nt){ct.buffers.depth.getReversed()?(V.copy(nt.projectionMatrix),d4(V),p4(V),pi.setValue(q,"projectionMatrix",V)):pi.setValue(q,"projectionMatrix",nt.projectionMatrix),pi.setValue(q,"viewMatrix",nt.matrixWorldInverse);const yn=pi.map.cameraPosition;yn!==void 0&&yn.setValue(q,j.setFromMatrixPosition(nt.matrixWorld)),Tt.logarithmicDepthBuffer&&pi.setValue(q,"logDepthBufFC",2/(Math.log(nt.far+1)/Math.LN2)),(bt.isMeshPhongMaterial||bt.isMeshToonMaterial||bt.isMeshLambertMaterial||bt.isMeshBasicMaterial||bt.isMeshStandardMaterial||bt.isShaderMaterial)&&pi.setValue(q,"isOrthographic",nt.isOrthographicCamera===!0),M!==nt&&(M=nt,Wi=!0,Pr=!0)}if(Et.isSkinnedMesh){pi.setOptional(q,Et,"bindMatrix"),pi.setOptional(q,Et,"bindMatrixInverse");const un=Et.skeleton;un&&(un.boneTexture===null&&un.computeBoneTexture(),pi.setValue(q,"boneTexture",un.boneTexture,it))}Et.isBatchedMesh&&(pi.setOptional(q,Et,"batchingTexture"),pi.setValue(q,"batchingTexture",Et._matricesTexture,it),pi.setOptional(q,Et,"batchingIdTexture"),pi.setValue(q,"batchingIdTexture",Et._indirectTexture,it),pi.setOptional(q,Et,"batchingColorTexture"),Et._colorsTexture!==null&&pi.setValue(q,"batchingColorTexture",Et._colorsTexture,it));const Mn=Mt.morphAttributes;if((Mn.position!==void 0||Mn.normal!==void 0||Mn.color!==void 0)&&Pt.update(Et,Mt,hn),(Wi||ve.receiveShadow!==Et.receiveShadow)&&(ve.receiveShadow=Et.receiveShadow,pi.setValue(q,"receiveShadow",Et.receiveShadow)),bt.isMeshGouraudMaterial&&bt.envMap!==null&&(Un.envMap.value=oe,Un.flipEnvMap.value=oe.isCubeTexture&&oe.isRenderTargetTexture===!1?-1:1),bt.isMeshStandardMaterial&&bt.envMap===null&&gt.environment!==null&&(Un.envMapIntensity.value=gt.environmentIntensity),Wi&&(pi.setValue(q,"toneMappingExposure",p.toneMappingExposure),ve.needsLights&&af(Un,Pr),kt&&bt.fog===!0&&Bt.refreshFogUniforms(Un,kt),Bt.refreshMaterialUniforms(Un,bt,O,D,s.state.transmissionRenderTarget[nt.id]),gp.upload(q,aa(ve),Un,it)),bt.isShaderMaterial&&bt.uniformsNeedUpdate===!0&&(gp.upload(q,aa(ve),Un,it),bt.uniformsNeedUpdate=!1),bt.isSpriteMaterial&&pi.setValue(q,"center",Et.center),pi.setValue(q,"modelViewMatrix",Et.modelViewMatrix),pi.setValue(q,"normalMatrix",Et.normalMatrix),pi.setValue(q,"modelMatrix",Et.matrixWorld),bt.isShaderMaterial||bt.isRawShaderMaterial){const un=bt.uniformsGroups;for(let yn=0,Bs=un.length;yn<Bs;yn++){const Rn=un[yn];dt.update(Rn,hn),dt.bind(Rn,hn)}}return hn}function af(nt,gt){nt.ambientLightColor.needsUpdate=gt,nt.lightProbe.needsUpdate=gt,nt.directionalLights.needsUpdate=gt,nt.directionalLightShadows.needsUpdate=gt,nt.pointLights.needsUpdate=gt,nt.pointLightShadows.needsUpdate=gt,nt.spotLights.needsUpdate=gt,nt.spotLightShadows.needsUpdate=gt,nt.rectAreaLights.needsUpdate=gt,nt.hemisphereLights.needsUpdate=gt}function tl(nt){return nt.isMeshLambertMaterial||nt.isMeshToonMaterial||nt.isMeshPhongMaterial||nt.isMeshStandardMaterial||nt.isShadowMaterial||nt.isShaderMaterial&&nt.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(nt,gt,Mt){yt.get(nt.texture).__webglTexture=gt,yt.get(nt.depthTexture).__webglTexture=Mt;const bt=yt.get(nt);bt.__hasExternalTextures=!0,bt.__autoAllocateDepthBuffer=Mt===void 0,bt.__autoAllocateDepthBuffer||vt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),bt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(nt,gt){const Mt=yt.get(nt);Mt.__webglFramebuffer=gt,Mt.__useDefaultFramebuffer=gt===void 0};const of=q.createFramebuffer();this.setRenderTarget=function(nt,gt=0,Mt=0){w=nt,T=gt,S=Mt;let bt=!0,Et=null,kt=!1,ie=!1;if(nt){const oe=yt.get(nt);if(oe.__useDefaultFramebuffer!==void 0)ct.bindFramebuffer(q.FRAMEBUFFER,null),bt=!1;else if(oe.__webglFramebuffer===void 0)it.setupRenderTarget(nt);else if(oe.__hasExternalTextures)it.rebindTextures(nt,yt.get(nt.texture).__webglTexture,yt.get(nt.depthTexture).__webglTexture);else if(nt.depthBuffer){const ge=nt.depthTexture;if(oe.__boundDepthTexture!==ge){if(ge!==null&&yt.has(ge)&&(nt.width!==ge.image.width||nt.height!==ge.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");it.setupDepthRenderbuffer(nt)}}const Ee=nt.texture;(Ee.isData3DTexture||Ee.isDataArrayTexture||Ee.isCompressedArrayTexture)&&(ie=!0);const Ce=yt.get(nt).__webglFramebuffer;nt.isWebGLCubeRenderTarget?(Array.isArray(Ce[gt])?Et=Ce[gt][Mt]:Et=Ce[gt],kt=!0):nt.samples>0&&it.useMultisampledRTT(nt)===!1?Et=yt.get(nt).__webglMultisampledFramebuffer:Array.isArray(Ce)?Et=Ce[Mt]:Et=Ce,R.copy(nt.viewport),P.copy(nt.scissor),b=nt.scissorTest}else R.copy(X).multiplyScalar(O).floor(),P.copy(_).multiplyScalar(O).floor(),b=U;if(Mt!==0&&(Et=of),ct.bindFramebuffer(q.FRAMEBUFFER,Et)&&bt&&ct.drawBuffers(nt,Et),ct.viewport(R),ct.scissor(P),ct.setScissorTest(b),kt){const oe=yt.get(nt.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+gt,oe.__webglTexture,Mt)}else if(ie){const oe=yt.get(nt.texture),Ee=gt;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,oe.__webglTexture,Mt,Ee)}else if(nt!==null&&Mt!==0){const oe=yt.get(nt.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,oe.__webglTexture,Mt)}A=-1},this.readRenderTargetPixels=function(nt,gt,Mt,bt,Et,kt,ie){if(!(nt&&nt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ae=yt.get(nt).__webglFramebuffer;if(nt.isWebGLCubeRenderTarget&&ie!==void 0&&(ae=ae[ie]),ae){ct.bindFramebuffer(q.FRAMEBUFFER,ae);try{const oe=nt.texture,Ee=oe.format,Ce=oe.type;if(!Tt.textureFormatReadable(Ee)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Tt.textureTypeReadable(Ce)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}gt>=0&&gt<=nt.width-bt&&Mt>=0&&Mt<=nt.height-Et&&q.readPixels(gt,Mt,bt,Et,fe.convert(Ee),fe.convert(Ce),kt)}finally{const oe=w!==null?yt.get(w).__webglFramebuffer:null;ct.bindFramebuffer(q.FRAMEBUFFER,oe)}}},this.readRenderTargetPixelsAsync=async function(nt,gt,Mt,bt,Et,kt,ie){if(!(nt&&nt.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ae=yt.get(nt).__webglFramebuffer;if(nt.isWebGLCubeRenderTarget&&ie!==void 0&&(ae=ae[ie]),ae){const oe=nt.texture,Ee=oe.format,Ce=oe.type;if(!Tt.textureFormatReadable(Ee))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Tt.textureTypeReadable(Ce))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(gt>=0&&gt<=nt.width-bt&&Mt>=0&&Mt<=nt.height-Et){ct.bindFramebuffer(q.FRAMEBUFFER,ae);const ge=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,ge),q.bufferData(q.PIXEL_PACK_BUFFER,kt.byteLength,q.STREAM_READ),q.readPixels(gt,Mt,bt,Et,fe.convert(Ee),fe.convert(Ce),0);const Ve=w!==null?yt.get(w).__webglFramebuffer:null;ct.bindFramebuffer(q.FRAMEBUFFER,Ve);const ii=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await c4(q,ii,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,ge),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,kt),q.deleteBuffer(ge),q.deleteSync(ii),kt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(nt,gt=null,Mt=0){nt.isTexture!==!0&&(Hh("WebGLRenderer: copyFramebufferToTexture function signature has changed."),gt=arguments[0]||null,nt=arguments[1]);const bt=Math.pow(2,-Mt),Et=Math.floor(nt.image.width*bt),kt=Math.floor(nt.image.height*bt),ie=gt!==null?gt.x:0,ae=gt!==null?gt.y:0;it.setTexture2D(nt,0),q.copyTexSubImage2D(q.TEXTURE_2D,Mt,0,0,ie,ae,Et,kt),ct.unbindTexture()};const eo=q.createFramebuffer(),ke=q.createFramebuffer();this.copyTextureToTexture=function(nt,gt,Mt=null,bt=null,Et=0,kt=null){nt.isTexture!==!0&&(Hh("WebGLRenderer: copyTextureToTexture function signature has changed."),bt=arguments[0]||null,nt=arguments[1],gt=arguments[2],kt=arguments[3]||0,Mt=null),kt===null&&(Et!==0?(Hh("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),kt=Et,Et=0):kt=0);let ie,ae,oe,Ee,Ce,ge,Ve,ii,ai;const Qe=nt.isCompressedTexture?nt.mipmaps[kt]:nt.image;if(Mt!==null)ie=Mt.max.x-Mt.min.x,ae=Mt.max.y-Mt.min.y,oe=Mt.isBox3?Mt.max.z-Mt.min.z:1,Ee=Mt.min.x,Ce=Mt.min.y,ge=Mt.isBox3?Mt.min.z:0;else{const Mn=Math.pow(2,-Et);ie=Math.floor(Qe.width*Mn),ae=Math.floor(Qe.height*Mn),nt.isDataArrayTexture?oe=Qe.depth:nt.isData3DTexture?oe=Math.floor(Qe.depth*Mn):oe=1,Ee=0,Ce=0,ge=0}bt!==null?(Ve=bt.x,ii=bt.y,ai=bt.z):(Ve=0,ii=0,ai=0);const Ne=fe.convert(gt.format),ve=fe.convert(gt.type);let bi;gt.isData3DTexture?(it.setTexture3D(gt,0),bi=q.TEXTURE_3D):gt.isDataArrayTexture||gt.isCompressedArrayTexture?(it.setTexture2DArray(gt,0),bi=q.TEXTURE_2D_ARRAY):(it.setTexture2D(gt,0),bi=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,gt.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,gt.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,gt.unpackAlignment);const me=q.getParameter(q.UNPACK_ROW_LENGTH),hn=q.getParameter(q.UNPACK_IMAGE_HEIGHT),ts=q.getParameter(q.UNPACK_SKIP_PIXELS),Wi=q.getParameter(q.UNPACK_SKIP_ROWS),Pr=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,Qe.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Qe.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Ee),q.pixelStorei(q.UNPACK_SKIP_ROWS,Ce),q.pixelStorei(q.UNPACK_SKIP_IMAGES,ge);const pi=nt.isDataArrayTexture||nt.isData3DTexture,Un=gt.isDataArrayTexture||gt.isData3DTexture;if(nt.isDepthTexture){const Mn=yt.get(nt),un=yt.get(gt),yn=yt.get(Mn.__renderTarget),Bs=yt.get(un.__renderTarget);ct.bindFramebuffer(q.READ_FRAMEBUFFER,yn.__webglFramebuffer),ct.bindFramebuffer(q.DRAW_FRAMEBUFFER,Bs.__webglFramebuffer);for(let Rn=0;Rn<oe;Rn++)pi&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,yt.get(nt).__webglTexture,Et,ge+Rn),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,yt.get(gt).__webglTexture,kt,ai+Rn)),q.blitFramebuffer(Ee,Ce,ie,ae,Ve,ii,ie,ae,q.DEPTH_BUFFER_BIT,q.NEAREST);ct.bindFramebuffer(q.READ_FRAMEBUFFER,null),ct.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(Et!==0||nt.isRenderTargetTexture||yt.has(nt)){const Mn=yt.get(nt),un=yt.get(gt);ct.bindFramebuffer(q.READ_FRAMEBUFFER,eo),ct.bindFramebuffer(q.DRAW_FRAMEBUFFER,ke);for(let yn=0;yn<oe;yn++)pi?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Mn.__webglTexture,Et,ge+yn):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Mn.__webglTexture,Et),Un?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,un.__webglTexture,kt,ai+yn):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,un.__webglTexture,kt),Et!==0?q.blitFramebuffer(Ee,Ce,ie,ae,Ve,ii,ie,ae,q.COLOR_BUFFER_BIT,q.NEAREST):Un?q.copyTexSubImage3D(bi,kt,Ve,ii,ai+yn,Ee,Ce,ie,ae):q.copyTexSubImage2D(bi,kt,Ve,ii,Ee,Ce,ie,ae);ct.bindFramebuffer(q.READ_FRAMEBUFFER,null),ct.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else Un?nt.isDataTexture||nt.isData3DTexture?q.texSubImage3D(bi,kt,Ve,ii,ai,ie,ae,oe,Ne,ve,Qe.data):gt.isCompressedArrayTexture?q.compressedTexSubImage3D(bi,kt,Ve,ii,ai,ie,ae,oe,Ne,Qe.data):q.texSubImage3D(bi,kt,Ve,ii,ai,ie,ae,oe,Ne,ve,Qe):nt.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,kt,Ve,ii,ie,ae,Ne,ve,Qe.data):nt.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,kt,Ve,ii,Qe.width,Qe.height,Ne,Qe.data):q.texSubImage2D(q.TEXTURE_2D,kt,Ve,ii,ie,ae,Ne,ve,Qe);q.pixelStorei(q.UNPACK_ROW_LENGTH,me),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,hn),q.pixelStorei(q.UNPACK_SKIP_PIXELS,ts),q.pixelStorei(q.UNPACK_SKIP_ROWS,Wi),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Pr),kt===0&&gt.generateMipmaps&&q.generateMipmap(bi),ct.unbindTexture()},this.copyTextureToTexture3D=function(nt,gt,Mt=null,bt=null,Et=0){return nt.isTexture!==!0&&(Hh("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Mt=arguments[0]||null,bt=arguments[1]||null,nt=arguments[2],gt=arguments[3],Et=arguments[4]||0),Hh('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(nt,gt,Mt,bt,Et)},this.initRenderTarget=function(nt){yt.get(nt).__webglFramebuffer===void 0&&it.setupRenderTarget(nt)},this.initTexture=function(nt){nt.isCubeTexture?it.setTextureCube(nt,0):nt.isData3DTexture?it.setTexture3D(nt,0):nt.isDataArrayTexture||nt.isCompressedArrayTexture?it.setTexture2DArray(nt,0):it.setTexture2D(nt,0),ct.unbindTexture()},this.resetState=function(){T=0,S=0,w=null,ct.reset(),Fe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ia}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const i=this.getContext();i.drawingBufferColorspace=oi._getDrawingBufferColorSpace(t),i.unpackColorSpace=oi._getUnpackColorSpace()}}class mr{constructor(t){t===void 0&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const i=this.elements;i[0]=t.x,i[4]=t.y,i[8]=t.z}getTrace(t){t===void 0&&(t=new tt);const i=this.elements;return t.x=i[0],t.y=i[4],t.z=i[8],t}vmult(t,i){i===void 0&&(i=new tt);const f=this.elements,y=t.x,C=t.y,o=t.z;return i.x=f[0]*y+f[1]*C+f[2]*o,i.y=f[3]*y+f[4]*C+f[5]*o,i.z=f[6]*y+f[7]*C+f[8]*o,i}smult(t){for(let i=0;i<this.elements.length;i++)this.elements[i]*=t}mmult(t,i){i===void 0&&(i=new mr);const f=this.elements,y=t.elements,C=i.elements,o=f[0],E=f[1],e=f[2],a=f[3],x=f[4],u=f[5],r=f[6],h=f[7],n=f[8],l=y[0],c=y[1],s=y[2],d=y[3],m=y[4],p=y[5],g=y[6],T=y[7],S=y[8];return C[0]=o*l+E*d+e*g,C[1]=o*c+E*m+e*T,C[2]=o*s+E*p+e*S,C[3]=a*l+x*d+u*g,C[4]=a*c+x*m+u*T,C[5]=a*s+x*p+u*S,C[6]=r*l+h*d+n*g,C[7]=r*c+h*m+n*T,C[8]=r*s+h*p+n*S,i}scale(t,i){i===void 0&&(i=new mr);const f=this.elements,y=i.elements;for(let C=0;C!==3;C++)y[3*C+0]=t.x*f[3*C+0],y[3*C+1]=t.y*f[3*C+1],y[3*C+2]=t.z*f[3*C+2];return i}solve(t,i){i===void 0&&(i=new tt);const f=3,y=4,C=[];let o,E;for(o=0;o<f*y;o++)C.push(0);for(o=0;o<3;o++)for(E=0;E<3;E++)C[o+y*E]=this.elements[o+3*E];C[3]=t.x,C[7]=t.y,C[11]=t.z;let e=3;const a=e;let x;const u=4;let r;do{if(o=a-e,C[o+y*o]===0){for(E=o+1;E<a;E++)if(C[o+y*E]!==0){x=u;do r=u-x,C[r+y*o]+=C[r+y*E];while(--x);break}}if(C[o+y*o]!==0)for(E=o+1;E<a;E++){const h=C[o+y*E]/C[o+y*o];x=u;do r=u-x,C[r+y*E]=r<=o?0:C[r+y*E]-C[r+y*o]*h;while(--x)}}while(--e);if(i.z=C[2*y+3]/C[2*y+2],i.y=(C[1*y+3]-C[1*y+2]*i.z)/C[1*y+1],i.x=(C[0*y+3]-C[0*y+2]*i.z-C[0*y+1]*i.y)/C[0*y+0],isNaN(i.x)||isNaN(i.y)||isNaN(i.z)||i.x===1/0||i.y===1/0||i.z===1/0)throw`Could not solve equation! Got x=[${i.toString()}], b=[${t.toString()}], A=[${this.toString()}]`;return i}e(t,i,f){if(f===void 0)return this.elements[i+3*t];this.elements[i+3*t]=f}copy(t){for(let i=0;i<t.elements.length;i++)this.elements[i]=t.elements[i];return this}toString(){let t="";for(let f=0;f<9;f++)t+=this.elements[f]+",";return t}reverse(t){t===void 0&&(t=new mr);const i=3,f=6,y=DO;let C,o;for(C=0;C<3;C++)for(o=0;o<3;o++)y[C+f*o]=this.elements[C+3*o];y[3]=1,y[9]=0,y[15]=0,y[4]=0,y[10]=1,y[16]=0,y[5]=0,y[11]=0,y[17]=1;let E=3;const e=E;let a;const x=f;let u;do{if(C=e-E,y[C+f*C]===0){for(o=C+1;o<e;o++)if(y[C+f*o]!==0){a=x;do u=x-a,y[u+f*C]+=y[u+f*o];while(--a);break}}if(y[C+f*C]!==0)for(o=C+1;o<e;o++){const r=y[C+f*o]/y[C+f*C];a=x;do u=x-a,y[u+f*o]=u<=C?0:y[u+f*o]-y[u+f*C]*r;while(--a)}}while(--E);C=2;do{o=C-1;do{const r=y[C+f*o]/y[C+f*C];a=f;do u=f-a,y[u+f*o]=y[u+f*o]-y[u+f*C]*r;while(--a)}while(o--)}while(--C);C=2;do{const r=1/y[C+f*C];a=f;do u=f-a,y[u+f*C]=y[u+f*C]*r;while(--a)}while(C--);C=2;do{o=2;do{if(u=y[i+o+f*C],isNaN(u)||u===1/0)throw`Could not reverse! A=[${this.toString()}]`;t.e(C,o,u)}while(o--)}while(C--);return t}setRotationFromQuaternion(t){const i=t.x,f=t.y,y=t.z,C=t.w,o=i+i,E=f+f,e=y+y,a=i*o,x=i*E,u=i*e,r=f*E,h=f*e,n=y*e,l=C*o,c=C*E,s=C*e,d=this.elements;return d[0]=1-(r+n),d[1]=x-s,d[2]=u+c,d[3]=x+s,d[4]=1-(a+n),d[5]=h-l,d[6]=u-c,d[7]=h+l,d[8]=1-(a+r),this}transpose(t){t===void 0&&(t=new mr);const i=this.elements,f=t.elements;let y;return f[0]=i[0],f[4]=i[4],f[8]=i[8],y=i[1],f[1]=i[3],f[3]=y,y=i[2],f[2]=i[6],f[6]=y,y=i[5],f[5]=i[7],f[7]=y,t}}const DO=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class tt{constructor(t,i,f){t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f=0),this.x=t,this.y=i,this.z=f}cross(t,i){i===void 0&&(i=new tt);const f=t.x,y=t.y,C=t.z,o=this.x,E=this.y,e=this.z;return i.x=E*C-e*y,i.y=e*f-o*C,i.z=o*y-E*f,i}set(t,i,f){return this.x=t,this.y=i,this.z=f,this}setZero(){this.x=this.y=this.z=0}vadd(t,i){if(i)i.x=t.x+this.x,i.y=t.y+this.y,i.z=t.z+this.z;else return new tt(this.x+t.x,this.y+t.y,this.z+t.z)}vsub(t,i){if(i)i.x=this.x-t.x,i.y=this.y-t.y,i.z=this.z-t.z;else return new tt(this.x-t.x,this.y-t.y,this.z-t.z)}crossmat(){return new mr([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,i=this.y,f=this.z,y=Math.sqrt(t*t+i*i+f*f);if(y>0){const C=1/y;this.x*=C,this.y*=C,this.z*=C}else this.x=0,this.y=0,this.z=0;return y}unit(t){t===void 0&&(t=new tt);const i=this.x,f=this.y,y=this.z;let C=Math.sqrt(i*i+f*f+y*y);return C>0?(C=1/C,t.x=i*C,t.y=f*C,t.z=y*C):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,i=this.y,f=this.z;return Math.sqrt(t*t+i*i+f*f)}lengthSquared(){return this.dot(this)}distanceTo(t){const i=this.x,f=this.y,y=this.z,C=t.x,o=t.y,E=t.z;return Math.sqrt((C-i)*(C-i)+(o-f)*(o-f)+(E-y)*(E-y))}distanceSquared(t){const i=this.x,f=this.y,y=this.z,C=t.x,o=t.y,E=t.z;return(C-i)*(C-i)+(o-f)*(o-f)+(E-y)*(E-y)}scale(t,i){i===void 0&&(i=new tt);const f=this.x,y=this.y,C=this.z;return i.x=t*f,i.y=t*y,i.z=t*C,i}vmul(t,i){return i===void 0&&(i=new tt),i.x=t.x*this.x,i.y=t.y*this.y,i.z=t.z*this.z,i}addScaledVector(t,i,f){return f===void 0&&(f=new tt),f.x=this.x+t*i.x,f.y=this.y+t*i.y,f.z=this.z+t*i.z,f}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(t){return t===void 0&&(t=new tt),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,i){const f=this.length();if(f>0){const y=OO,C=1/f;y.set(this.x*C,this.y*C,this.z*C);const o=NO;Math.abs(y.x)<.9?(o.set(1,0,0),y.cross(o,t)):(o.set(0,1,0),y.cross(o,t)),y.cross(t,i)}else t.set(1,0,0),i.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,i,f){const y=this.x,C=this.y,o=this.z;f.x=y+(t.x-y)*i,f.y=C+(t.y-C)*i,f.z=o+(t.z-o)*i}almostEquals(t,i){return i===void 0&&(i=1e-6),!(Math.abs(this.x-t.x)>i||Math.abs(this.y-t.y)>i||Math.abs(this.z-t.z)>i)}almostZero(t){return t===void 0&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,i){return this.negate(kT),kT.almostEquals(t,i)}clone(){return new tt(this.x,this.y,this.z)}}tt.ZERO=new tt(0,0,0);tt.UNIT_X=new tt(1,0,0);tt.UNIT_Y=new tt(0,1,0);tt.UNIT_Z=new tt(0,0,1);const OO=new tt,NO=new tt,kT=new tt;class Ns{constructor(t){t===void 0&&(t={}),this.lowerBound=new tt,this.upperBound=new tt,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,i,f,y){const C=this.lowerBound,o=this.upperBound,E=f;C.copy(t[0]),E&&E.vmult(C,C),o.copy(C);for(let e=1;e<t.length;e++){let a=t[e];E&&(E.vmult(a,$T),a=$T),a.x>o.x&&(o.x=a.x),a.x<C.x&&(C.x=a.x),a.y>o.y&&(o.y=a.y),a.y<C.y&&(C.y=a.y),a.z>o.z&&(o.z=a.z),a.z<C.z&&(C.z=a.z)}return i&&(i.vadd(C,C),i.vadd(o,o)),y&&(C.x-=y,C.y-=y,C.z-=y,o.x+=y,o.y+=y,o.z+=y),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return new Ns().copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const i=this.lowerBound,f=this.upperBound,y=t.lowerBound,C=t.upperBound,o=y.x<=f.x&&f.x<=C.x||i.x<=C.x&&C.x<=f.x,E=y.y<=f.y&&f.y<=C.y||i.y<=C.y&&C.y<=f.y,e=y.z<=f.z&&f.z<=C.z||i.z<=C.z&&C.z<=f.z;return o&&E&&e}volume(){const t=this.lowerBound,i=this.upperBound;return(i.x-t.x)*(i.y-t.y)*(i.z-t.z)}contains(t){const i=this.lowerBound,f=this.upperBound,y=t.lowerBound,C=t.upperBound;return i.x<=y.x&&f.x>=C.x&&i.y<=y.y&&f.y>=C.y&&i.z<=y.z&&f.z>=C.z}getCorners(t,i,f,y,C,o,E,e){const a=this.lowerBound,x=this.upperBound;t.copy(a),i.set(x.x,a.y,a.z),f.set(x.x,x.y,a.z),y.set(a.x,x.y,x.z),C.set(x.x,a.y,x.z),o.set(a.x,x.y,a.z),E.set(a.x,a.y,x.z),e.copy(x)}toLocalFrame(t,i){const f=KT,y=f[0],C=f[1],o=f[2],E=f[3],e=f[4],a=f[5],x=f[6],u=f[7];this.getCorners(y,C,o,E,e,a,x,u);for(let r=0;r!==8;r++){const h=f[r];t.pointToLocal(h,h)}return i.setFromPoints(f)}toWorldFrame(t,i){const f=KT,y=f[0],C=f[1],o=f[2],E=f[3],e=f[4],a=f[5],x=f[6],u=f[7];this.getCorners(y,C,o,E,e,a,x,u);for(let r=0;r!==8;r++){const h=f[r];t.pointToWorld(h,h)}return i.setFromPoints(f)}overlapsRay(t){const{direction:i,from:f}=t,y=1/i.x,C=1/i.y,o=1/i.z,E=(this.lowerBound.x-f.x)*y,e=(this.upperBound.x-f.x)*y,a=(this.lowerBound.y-f.y)*C,x=(this.upperBound.y-f.y)*C,u=(this.lowerBound.z-f.z)*o,r=(this.upperBound.z-f.z)*o,h=Math.max(Math.max(Math.min(E,e),Math.min(a,x)),Math.min(u,r)),n=Math.min(Math.min(Math.max(E,e),Math.max(a,x)),Math.max(u,r));return!(n<0||h>n)}}const $T=new tt,KT=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt];class jT{constructor(){this.matrix=[]}get(t,i){let{index:f}=t,{index:y}=i;if(y>f){const C=y;y=f,f=C}return this.matrix[(f*(f+1)>>1)+y-1]}set(t,i,f){let{index:y}=t,{index:C}=i;if(C>y){const o=C;C=y,y=o}this.matrix[(y*(y+1)>>1)+C-1]=f?1:0}reset(){for(let t=0,i=this.matrix.length;t!==i;t++)this.matrix[t]=0}setNumObjects(t){this.matrix.length=t*(t-1)>>1}}let ZC=class{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const f=this._listeners;return f[t]===void 0&&(f[t]=[]),f[t].includes(i)||f[t].push(i),this}hasEventListener(t,i){if(this._listeners===void 0)return!1;const f=this._listeners;return!!(f[t]!==void 0&&f[t].includes(i))}hasAnyEventListener(t){return this._listeners===void 0?!1:this._listeners[t]!==void 0}removeEventListener(t,i){if(this._listeners===void 0)return this;const f=this._listeners;if(f[t]===void 0)return this;const y=f[t].indexOf(i);return y!==-1&&f[t].splice(y,1),this}dispatchEvent(t){if(this._listeners===void 0)return this;const f=this._listeners[t.type];if(f!==void 0){t.target=this;for(let y=0,C=f.length;y<C;y++)f[y].call(this,t)}return this}};class an{constructor(t,i,f,y){t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f=0),y===void 0&&(y=1),this.x=t,this.y=i,this.z=f,this.w=y}set(t,i,f,y){return this.x=t,this.y=i,this.z=f,this.w=y,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,i){const f=Math.sin(i*.5);return this.x=t.x*f,this.y=t.y*f,this.z=t.z*f,this.w=Math.cos(i*.5),this}toAxisAngle(t){t===void 0&&(t=new tt),this.normalize();const i=2*Math.acos(this.w),f=Math.sqrt(1-this.w*this.w);return f<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/f,t.y=this.y/f,t.z=this.z/f),[t,i]}setFromVectors(t,i){if(t.isAntiparallelTo(i)){const f=BO,y=UO;t.tangents(f,y),this.setFromAxisAngle(f,Math.PI)}else{const f=t.cross(i);this.x=f.x,this.y=f.y,this.z=f.z,this.w=Math.sqrt(t.length()**2*i.length()**2)+t.dot(i),this.normalize()}return this}mult(t,i){i===void 0&&(i=new an);const f=this.x,y=this.y,C=this.z,o=this.w,E=t.x,e=t.y,a=t.z,x=t.w;return i.x=f*x+o*E+y*a-C*e,i.y=y*x+o*e+C*E-f*a,i.z=C*x+o*a+f*e-y*E,i.w=o*x-f*E-y*e-C*a,i}inverse(t){t===void 0&&(t=new an);const i=this.x,f=this.y,y=this.z,C=this.w;this.conjugate(t);const o=1/(i*i+f*f+y*y+C*C);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}conjugate(t){return t===void 0&&(t=new an),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,i){i===void 0&&(i=new tt);const f=t.x,y=t.y,C=t.z,o=this.x,E=this.y,e=this.z,a=this.w,x=a*f+E*C-e*y,u=a*y+e*f-o*C,r=a*C+o*y-E*f,h=-o*f-E*y-e*C;return i.x=x*a+h*-o+u*-e-r*-E,i.y=u*a+h*-E+r*-o-x*-e,i.z=r*a+h*-e+x*-E-u*-o,i}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,i){i===void 0&&(i="YZX");let f,y,C;const o=this.x,E=this.y,e=this.z,a=this.w;switch(i){case"YZX":const x=o*E+e*a;if(x>.499&&(f=2*Math.atan2(o,a),y=Math.PI/2,C=0),x<-.499&&(f=-2*Math.atan2(o,a),y=-Math.PI/2,C=0),f===void 0){const u=o*o,r=E*E,h=e*e;f=Math.atan2(2*E*a-2*o*e,1-2*r-2*h),y=Math.asin(2*x),C=Math.atan2(2*o*a-2*E*e,1-2*u-2*h)}break;default:throw new Error(`Euler order ${i} not supported yet.`)}t.y=f,t.z=y,t.x=C}setFromEuler(t,i,f,y){y===void 0&&(y="XYZ");const C=Math.cos(t/2),o=Math.cos(i/2),E=Math.cos(f/2),e=Math.sin(t/2),a=Math.sin(i/2),x=Math.sin(f/2);return y==="XYZ"?(this.x=e*o*E+C*a*x,this.y=C*a*E-e*o*x,this.z=C*o*x+e*a*E,this.w=C*o*E-e*a*x):y==="YXZ"?(this.x=e*o*E+C*a*x,this.y=C*a*E-e*o*x,this.z=C*o*x-e*a*E,this.w=C*o*E+e*a*x):y==="ZXY"?(this.x=e*o*E-C*a*x,this.y=C*a*E+e*o*x,this.z=C*o*x+e*a*E,this.w=C*o*E-e*a*x):y==="ZYX"?(this.x=e*o*E-C*a*x,this.y=C*a*E+e*o*x,this.z=C*o*x-e*a*E,this.w=C*o*E+e*a*x):y==="YZX"?(this.x=e*o*E+C*a*x,this.y=C*a*E+e*o*x,this.z=C*o*x-e*a*E,this.w=C*o*E-e*a*x):y==="XZY"&&(this.x=e*o*E-C*a*x,this.y=C*a*E-e*o*x,this.z=C*o*x+e*a*E,this.w=C*o*E+e*a*x),this}clone(){return new an(this.x,this.y,this.z,this.w)}slerp(t,i,f){f===void 0&&(f=new an);const y=this.x,C=this.y,o=this.z,E=this.w;let e=t.x,a=t.y,x=t.z,u=t.w,r,h,n,l,c;return h=y*e+C*a+o*x+E*u,h<0&&(h=-h,e=-e,a=-a,x=-x,u=-u),1-h>1e-6?(r=Math.acos(h),n=Math.sin(r),l=Math.sin((1-i)*r)/n,c=Math.sin(i*r)/n):(l=1-i,c=i),f.x=l*y+c*e,f.y=l*C+c*a,f.z=l*o+c*x,f.w=l*E+c*u,f}integrate(t,i,f,y){y===void 0&&(y=new an);const C=t.x*f.x,o=t.y*f.y,E=t.z*f.z,e=this.x,a=this.y,x=this.z,u=this.w,r=i*.5;return y.x+=r*(C*u+o*x-E*a),y.y+=r*(o*u+E*e-C*x),y.z+=r*(E*u+C*a-o*e),y.w+=r*(-C*e-o*a-E*x),y}}const BO=new tt,UO=new tt,VO={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class de{constructor(t){t===void 0&&(t={}),this.id=de.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=t.collisionResponse?t.collisionResponse:!0,this.collisionFilterGroup=t.collisionFilterGroup!==void 0?t.collisionFilterGroup:1,this.collisionFilterMask=t.collisionFilterMask!==void 0?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,f,y){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}de.idCounter=0;de.types=VO;class hi{constructor(t){t===void 0&&(t={}),this.position=new tt,this.quaternion=new an,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,i){return hi.pointToLocalFrame(this.position,this.quaternion,t,i)}pointToWorld(t,i){return hi.pointToWorldFrame(this.position,this.quaternion,t,i)}vectorToWorldFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.vmult(t,i),i}static pointToLocalFrame(t,i,f,y){return y===void 0&&(y=new tt),f.vsub(t,y),i.conjugate(ZT),ZT.vmult(y,y),y}static pointToWorldFrame(t,i,f,y){return y===void 0&&(y=new tt),i.vmult(f,y),y.vadd(t,y),y}static vectorToWorldFrame(t,i,f){return f===void 0&&(f=new tt),t.vmult(i,f),f}static vectorToLocalFrame(t,i,f,y){return y===void 0&&(y=new tt),i.w*=-1,i.vmult(f,y),i.w*=-1,y}}const ZT=new an;class nc extends de{constructor(t){t===void 0&&(t={});const{vertices:i=[],faces:f=[],normals:y=[],axes:C,boundingSphereRadius:o}=t;super({type:de.types.CONVEXPOLYHEDRON}),this.vertices=i,this.faces=f,this.faceNormals=y,this.faceNormals.length===0&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=C?C.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,i=this.vertices,f=this.uniqueEdges;f.length=0;const y=new tt;for(let C=0;C!==t.length;C++){const o=t[C],E=o.length;for(let e=0;e!==E;e++){const a=(e+1)%E;i[o[e]].vsub(i[o[a]],y),y.normalize();let x=!1;for(let u=0;u!==f.length;u++)if(f[u].almostEquals(y)||f[u].almostEquals(y)){x=!0;break}x||f.push(y.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let y=0;y<this.faces[t].length;y++)if(!this.vertices[this.faces[t][y]])throw new Error(`Vertex ${this.faces[t][y]} not found!`);const i=this.faceNormals[t]||new tt;this.getFaceNormal(t,i),i.negate(i),this.faceNormals[t]=i;const f=this.vertices[this.faces[t][0]];if(i.dot(f)<0){console.error(`.faceNormals[${t}] = Vec3(${i.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let y=0;y<this.faces[t].length;y++)console.warn(`.vertices[${this.faces[t][y]}] = Vec3(${this.vertices[this.faces[t][y]].toString()})`)}}}getFaceNormal(t,i){const f=this.faces[t],y=this.vertices[f[0]],C=this.vertices[f[1]],o=this.vertices[f[2]];nc.computeNormal(y,C,o,i)}static computeNormal(t,i,f,y){const C=new tt,o=new tt;i.vsub(t,o),f.vsub(i,C),C.cross(o,y),y.isZero()||y.normalize()}clipAgainstHull(t,i,f,y,C,o,E,e,a){const x=new tt;let u=-1,r=-Number.MAX_VALUE;for(let n=0;n<f.faces.length;n++){x.copy(f.faceNormals[n]),C.vmult(x,x);const l=x.dot(o);l>r&&(r=l,u=n)}const h=[];for(let n=0;n<f.faces[u].length;n++){const l=f.vertices[f.faces[u][n]],c=new tt;c.copy(l),C.vmult(c,c),y.vadd(c,c),h.push(c)}u>=0&&this.clipFaceAgainstHull(o,t,i,h,E,e,a)}findSeparatingAxis(t,i,f,y,C,o,E,e){const a=new tt,x=new tt,u=new tt,r=new tt,h=new tt,n=new tt;let l=Number.MAX_VALUE;const c=this;if(c.uniqueAxes)for(let s=0;s!==c.uniqueAxes.length;s++){f.vmult(c.uniqueAxes[s],a);const d=c.testSepAxis(a,t,i,f,y,C);if(d===!1)return!1;d<l&&(l=d,o.copy(a))}else{const s=E?E.length:c.faces.length;for(let d=0;d<s;d++){const m=E?E[d]:d;a.copy(c.faceNormals[m]),f.vmult(a,a);const p=c.testSepAxis(a,t,i,f,y,C);if(p===!1)return!1;p<l&&(l=p,o.copy(a))}}if(t.uniqueAxes)for(let s=0;s!==t.uniqueAxes.length;s++){C.vmult(t.uniqueAxes[s],x);const d=c.testSepAxis(x,t,i,f,y,C);if(d===!1)return!1;d<l&&(l=d,o.copy(x))}else{const s=e?e.length:t.faces.length;for(let d=0;d<s;d++){const m=e?e[d]:d;x.copy(t.faceNormals[m]),C.vmult(x,x);const p=c.testSepAxis(x,t,i,f,y,C);if(p===!1)return!1;p<l&&(l=p,o.copy(x))}}for(let s=0;s!==c.uniqueEdges.length;s++){f.vmult(c.uniqueEdges[s],r);for(let d=0;d!==t.uniqueEdges.length;d++)if(C.vmult(t.uniqueEdges[d],h),r.cross(h,n),!n.almostZero()){n.normalize();const m=c.testSepAxis(n,t,i,f,y,C);if(m===!1)return!1;m<l&&(l=m,o.copy(n))}}return y.vsub(i,u),u.dot(o)>0&&o.negate(o),!0}testSepAxis(t,i,f,y,C,o){const E=this;nc.project(E,t,f,y,Wm),nc.project(i,t,C,o,Hm);const e=Wm[0],a=Wm[1],x=Hm[0],u=Hm[1];if(e<u||x<a)return!1;const r=e-u,h=x-a;return r<h?r:h}calculateLocalInertia(t,i){const f=new tt,y=new tt;this.computeLocalAABB(y,f);const C=f.x-y.x,o=f.y-y.y,E=f.z-y.z;i.x=1/12*t*(2*o*2*o+2*E*2*E),i.y=1/12*t*(2*C*2*C+2*E*2*E),i.z=1/12*t*(2*o*2*o+2*C*2*C)}getPlaneConstantOfFace(t){const i=this.faces[t],f=this.faceNormals[t],y=this.vertices[i[0]];return-f.dot(y)}clipFaceAgainstHull(t,i,f,y,C,o,E){const e=new tt,a=new tt,x=new tt,u=new tt,r=new tt,h=new tt,n=new tt,l=new tt,c=this,s=[],d=y,m=s;let p=-1,g=Number.MAX_VALUE;for(let M=0;M<c.faces.length;M++){e.copy(c.faceNormals[M]),f.vmult(e,e);const R=e.dot(t);R<g&&(g=R,p=M)}if(p<0)return;const T=c.faces[p];T.connectedFaces=[];for(let M=0;M<c.faces.length;M++)for(let R=0;R<c.faces[M].length;R++)T.indexOf(c.faces[M][R])!==-1&&M!==p&&T.connectedFaces.indexOf(M)===-1&&T.connectedFaces.push(M);const S=T.length;for(let M=0;M<S;M++){const R=c.vertices[T[M]],P=c.vertices[T[(M+1)%S]];R.vsub(P,a),x.copy(a),f.vmult(x,x),i.vadd(x,x),u.copy(this.faceNormals[p]),f.vmult(u,u),i.vadd(u,u),x.cross(u,r),r.negate(r),h.copy(R),f.vmult(h,h),i.vadd(h,h);const b=T.connectedFaces[M];n.copy(this.faceNormals[b]);const F=this.getPlaneConstantOfFace(b);l.copy(n),f.vmult(l,l);const I=F-l.dot(i);for(this.clipFaceAgainstPlane(d,m,l,I);d.length;)d.shift();for(;m.length;)d.push(m.shift())}n.copy(this.faceNormals[p]);const w=this.getPlaneConstantOfFace(p);l.copy(n),f.vmult(l,l);const A=w-l.dot(i);for(let M=0;M<d.length;M++){let R=l.dot(d[M])+A;if(R<=C&&(console.log(`clamped: depth=${R} to minDist=${C}`),R=C),R<=o){const P=d[M];if(R<=1e-6){const b={point:P,normal:l,depth:R};E.push(b)}}}}clipFaceAgainstPlane(t,i,f,y){let C,o;const E=t.length;if(E<2)return i;let e=t[t.length-1],a=t[0];C=f.dot(e)+y;for(let x=0;x<E;x++){if(a=t[x],o=f.dot(a)+y,C<0)if(o<0){const u=new tt;u.copy(a),i.push(u)}else{const u=new tt;e.lerp(a,C/(C-o),u),i.push(u)}else if(o<0){const u=new tt;e.lerp(a,C/(C-o),u),i.push(u),i.push(a)}e=a,C=o}return i}computeWorldVertices(t,i){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new tt);const f=this.vertices,y=this.worldVertices;for(let C=0;C!==this.vertices.length;C++)i.vmult(f[C],y[C]),t.vadd(y[C],y[C]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,i){const f=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let y=0;y<this.vertices.length;y++){const C=f[y];C.x<t.x?t.x=C.x:C.x>i.x&&(i.x=C.x),C.y<t.y?t.y=C.y:C.y>i.y&&(i.y=C.y),C.z<t.z?t.z=C.z:C.z>i.z&&(i.z=C.z)}}computeWorldFaceNormals(t){const i=this.faceNormals.length;for(;this.worldFaceNormals.length<i;)this.worldFaceNormals.push(new tt);const f=this.faceNormals,y=this.worldFaceNormals;for(let C=0;C!==i;C++)t.vmult(f[C],y[C]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const i=this.vertices;for(let f=0;f!==i.length;f++){const y=i[f].lengthSquared();y>t&&(t=y)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,i,f,y){const C=this.vertices;let o,E,e,a,x,u,r=new tt;for(let h=0;h<C.length;h++){r.copy(C[h]),i.vmult(r,r),t.vadd(r,r);const n=r;(o===void 0||n.x<o)&&(o=n.x),(a===void 0||n.x>a)&&(a=n.x),(E===void 0||n.y<E)&&(E=n.y),(x===void 0||n.y>x)&&(x=n.y),(e===void 0||n.z<e)&&(e=n.z),(u===void 0||n.z>u)&&(u=n.z)}f.set(o,E,e),y.set(a,x,u)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t){t===void 0&&(t=new tt);const i=this.vertices;for(let f=0;f<i.length;f++)t.vadd(i[f],t);return t.scale(1/i.length,t),t}transformAllPoints(t,i){const f=this.vertices.length,y=this.vertices;if(i){for(let C=0;C<f;C++){const o=y[C];i.vmult(o,o)}for(let C=0;C<this.faceNormals.length;C++){const o=this.faceNormals[C];i.vmult(o,o)}}if(t)for(let C=0;C<f;C++){const o=y[C];o.vadd(t,o)}}pointIsInside(t){const i=this.vertices,f=this.faces,y=this.faceNormals,C=new tt;this.getAveragePointLocal(C);for(let o=0;o<this.faces.length;o++){let E=y[o];const e=i[f[o][0]],a=new tt;t.vsub(e,a);const x=E.dot(a),u=new tt;C.vsub(e,u);const r=E.dot(u);if(x<0&&r>0||x>0&&r<0)return!1}return-1}static project(t,i,f,y,C){const o=t.vertices.length,E=zO;let e=0,a=0;const x=GO,u=t.vertices;x.setZero(),hi.vectorToLocalFrame(f,y,i,E),hi.pointToLocalFrame(f,y,x,x);const r=x.dot(E);a=e=u[0].dot(E);for(let h=1;h<o;h++){const n=u[h].dot(E);n>e&&(e=n),n<a&&(a=n)}if(a-=r,e-=r,a>e){const h=a;a=e,e=h}C[0]=e,C[1]=a}}const Wm=[],Hm=[];new tt;const zO=new tt,GO=new tt;class Mv extends de{constructor(t){super({type:de.types.BOX}),this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,i=this.halfExtents.y,f=this.halfExtents.z,y=tt,C=[new y(-t,-i,-f),new y(t,-i,-f),new y(t,i,-f),new y(-t,i,-f),new y(-t,-i,f),new y(t,-i,f),new y(t,i,f),new y(-t,i,f)],o=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],E=[new y(0,0,1),new y(0,1,0),new y(1,0,0)],e=new nc({vertices:C,faces:o,axes:E});this.convexPolyhedronRepresentation=e,e.material=this.material}calculateLocalInertia(t,i){return i===void 0&&(i=new tt),Mv.calculateInertia(this.halfExtents,t,i),i}static calculateInertia(t,i,f){const y=t;f.x=1/12*i*(2*y.y*2*y.y+2*y.z*2*y.z),f.y=1/12*i*(2*y.x*2*y.x+2*y.z*2*y.z),f.z=1/12*i*(2*y.y*2*y.y+2*y.x*2*y.x)}getSideNormals(t,i){const f=t,y=this.halfExtents;if(f[0].set(y.x,0,0),f[1].set(0,y.y,0),f[2].set(0,0,y.z),f[3].set(-y.x,0,0),f[4].set(0,-y.y,0),f[5].set(0,0,-y.z),i!==void 0)for(let C=0;C!==f.length;C++)i.vmult(f[C],f[C]);return f}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,i,f){const y=this.halfExtents,C=[[y.x,y.y,y.z],[-y.x,y.y,y.z],[-y.x,-y.y,y.z],[-y.x,-y.y,-y.z],[y.x,-y.y,-y.z],[y.x,y.y,-y.z],[-y.x,y.y,-y.z],[y.x,-y.y,y.z]];for(let o=0;o<C.length;o++)co.set(C[o][0],C[o][1],C[o][2]),i.vmult(co,co),t.vadd(co,co),f(co.x,co.y,co.z)}calculateWorldAABB(t,i,f,y){const C=this.halfExtents;Fr[0].set(C.x,C.y,C.z),Fr[1].set(-C.x,C.y,C.z),Fr[2].set(-C.x,-C.y,C.z),Fr[3].set(-C.x,-C.y,-C.z),Fr[4].set(C.x,-C.y,-C.z),Fr[5].set(C.x,C.y,-C.z),Fr[6].set(-C.x,C.y,-C.z),Fr[7].set(C.x,-C.y,C.z);const o=Fr[0];i.vmult(o,o),t.vadd(o,o),y.copy(o),f.copy(o);for(let E=1;E<8;E++){const e=Fr[E];i.vmult(e,e),t.vadd(e,e);const a=e.x,x=e.y,u=e.z;a>y.x&&(y.x=a),x>y.y&&(y.y=x),u>y.z&&(y.z=u),a<f.x&&(f.x=a),x<f.y&&(f.y=x),u<f.z&&(f.z=u)}}}const co=new tt,Fr=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt],Vx={DYNAMIC:1,STATIC:2,KINEMATIC:4},zx={AWAKE:0,SLEEPY:1,SLEEPING:2};class ce extends ZC{constructor(t){t===void 0&&(t={}),super(),this.id=ce.idCounter++,this.index=-1,this.world=null,this.vlambda=new tt,this.collisionFilterGroup=typeof t.collisionFilterGroup=="number"?t.collisionFilterGroup:1,this.collisionFilterMask=typeof t.collisionFilterMask=="number"?t.collisionFilterMask:-1,this.collisionResponse=typeof t.collisionResponse=="boolean"?t.collisionResponse:!0,this.position=new tt,this.previousPosition=new tt,this.interpolatedPosition=new tt,this.initPosition=new tt,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new tt,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new tt,this.force=new tt;const i=typeof t.mass=="number"?t.mass:0;this.mass=i,this.invMass=i>0?1/i:0,this.material=t.material||null,this.linearDamping=typeof t.linearDamping=="number"?t.linearDamping:.01,this.type=i<=0?ce.STATIC:ce.DYNAMIC,typeof t.type==typeof ce.STATIC&&(this.type=t.type),this.allowSleep=typeof t.allowSleep<"u"?t.allowSleep:!0,this.sleepState=ce.AWAKE,this.sleepSpeedLimit=typeof t.sleepSpeedLimit<"u"?t.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof t.sleepTimeLimit<"u"?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new tt,this.quaternion=new an,this.initQuaternion=new an,this.previousQuaternion=new an,this.interpolatedQuaternion=new an,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new tt,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new tt,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new tt,this.invInertia=new tt,this.invInertiaWorld=new mr,this.invMassSolve=0,this.invInertiaSolve=new tt,this.invInertiaWorldSolve=new mr,this.fixedRotation=typeof t.fixedRotation<"u"?t.fixedRotation:!1,this.angularDamping=typeof t.angularDamping<"u"?t.angularDamping:.01,this.linearFactor=new tt(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new tt(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new Ns,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new tt,this.isTrigger=!!t.isTrigger,t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=ce.AWAKE,this.wakeUpAfterNarrowphase=!1,t===ce.SLEEPING&&this.dispatchEvent(ce.wakeupEvent)}sleep(){this.sleepState=ce.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const i=this.sleepState,f=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),y=this.sleepSpeedLimit**2;i===ce.AWAKE&&f<y?(this.sleepState=ce.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(ce.sleepyEvent)):i===ce.SLEEPY&&f>y?this.wakeUp():i===ce.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(ce.sleepEvent))}}updateSolveMassProperties(){this.sleepState===ce.SLEEPING||this.type===ce.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,i){return i===void 0&&(i=new tt),t.vsub(this.position,i),this.quaternion.conjugate().vmult(i,i),i}vectorToLocalFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.conjugate().vmult(t,i),i}pointToWorldFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.vmult(t,i),i.vadd(this.position,i),i}vectorToWorldFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.vmult(t,i),i}addShape(t,i,f){const y=new tt,C=new an;return i&&y.copy(i),f&&C.copy(f),this.shapes.push(t),this.shapeOffsets.push(y),this.shapeOrientations.push(C),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const i=this.shapes.indexOf(t);return i===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(i,1),this.shapeOffsets.splice(i,1),this.shapeOrientations.splice(i,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null,this)}updateBoundingRadius(){const t=this.shapes,i=this.shapeOffsets,f=t.length;let y=0;for(let C=0;C!==f;C++){const o=t[C];o.updateBoundingSphereRadius();const E=i[C].length(),e=o.boundingSphereRadius;E+e>y&&(y=E+e)}this.boundingRadius=y}updateAABB(){const t=this.shapes,i=this.shapeOffsets,f=this.shapeOrientations,y=t.length,C=WO,o=HO,E=this.quaternion,e=this.aabb,a=_O;for(let x=0;x!==y;x++){const u=t[x];E.vmult(i[x],C),C.vadd(this.position,C),E.mult(f[x],o),u.calculateWorldAABB(C,o,a.lowerBound,a.upperBound),x===0?e.copy(a):e.extend(a)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const i=this.invInertia;if(!(i.x===i.y&&i.y===i.z&&!t)){const f=XO,y=YO;f.setRotationFromQuaternion(this.quaternion),f.transpose(y),f.scale(i,f),f.mmult(y,this.invInertiaWorld)}}applyForce(t,i){if(i===void 0&&(i=new tt),this.type!==ce.DYNAMIC)return;this.sleepState===ce.SLEEPING&&this.wakeUp();const f=kO;i.cross(t,f),this.force.vadd(t,this.force),this.torque.vadd(f,this.torque)}applyLocalForce(t,i){if(i===void 0&&(i=new tt),this.type!==ce.DYNAMIC)return;const f=$O,y=KO;this.vectorToWorldFrame(t,f),this.vectorToWorldFrame(i,y),this.applyForce(f,y)}applyTorque(t){this.type===ce.DYNAMIC&&(this.sleepState===ce.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,i){if(i===void 0&&(i=new tt),this.type!==ce.DYNAMIC)return;this.sleepState===ce.SLEEPING&&this.wakeUp();const f=i,y=jO;y.copy(t),y.scale(this.invMass,y),this.velocity.vadd(y,this.velocity);const C=ZO;f.cross(t,C),this.invInertiaWorld.vmult(C,C),this.angularVelocity.vadd(C,this.angularVelocity)}applyLocalImpulse(t,i){if(i===void 0&&(i=new tt),this.type!==ce.DYNAMIC)return;const f=JO,y=QO;this.vectorToWorldFrame(t,f),this.vectorToWorldFrame(i,y),this.applyImpulse(f,y)}updateMassProperties(){const t=qO;this.invMass=this.mass>0?1/this.mass:0;const i=this.inertia,f=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Mv.calculateInertia(t,this.mass,i),this.invInertia.set(i.x>0&&!f?1/i.x:0,i.y>0&&!f?1/i.y:0,i.z>0&&!f?1/i.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,i){const f=new tt;return t.vsub(this.position,f),this.angularVelocity.cross(f,i),this.velocity.vadd(i,i),i}integrate(t,i,f){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===ce.DYNAMIC||this.type===ce.KINEMATIC)||this.sleepState===ce.SLEEPING)return;const y=this.velocity,C=this.angularVelocity,o=this.position,E=this.force,e=this.torque,a=this.quaternion,x=this.invMass,u=this.invInertiaWorld,r=this.linearFactor,h=x*t;y.x+=E.x*h*r.x,y.y+=E.y*h*r.y,y.z+=E.z*h*r.z;const n=u.elements,l=this.angularFactor,c=e.x*l.x,s=e.y*l.y,d=e.z*l.z;C.x+=t*(n[0]*c+n[1]*s+n[2]*d),C.y+=t*(n[3]*c+n[4]*s+n[5]*d),C.z+=t*(n[6]*c+n[7]*s+n[8]*d),o.x+=y.x*t,o.y+=y.y*t,o.z+=y.z*t,a.integrate(this.angularVelocity,t,this.angularFactor,a),i&&(f?a.normalizeFast():a.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}ce.idCounter=0;ce.COLLIDE_EVENT_NAME="collide";ce.DYNAMIC=Vx.DYNAMIC;ce.STATIC=Vx.STATIC;ce.KINEMATIC=Vx.KINEMATIC;ce.AWAKE=zx.AWAKE;ce.SLEEPY=zx.SLEEPY;ce.SLEEPING=zx.SLEEPING;ce.wakeupEvent={type:"wakeup"};ce.sleepyEvent={type:"sleepy"};ce.sleepEvent={type:"sleep"};const WO=new tt,HO=new an,_O=new Ns,XO=new mr,YO=new mr;new mr;const kO=new tt,$O=new tt,KO=new tt,jO=new tt,ZO=new tt,JO=new tt,QO=new tt,qO=new tt;class t9{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(t,i,f){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(t,i){return!((t.collisionFilterGroup&i.collisionFilterMask)===0||(i.collisionFilterGroup&t.collisionFilterMask)===0||((t.type&ce.STATIC)!==0||t.sleepState===ce.SLEEPING)&&((i.type&ce.STATIC)!==0||i.sleepState===ce.SLEEPING))}intersectionTest(t,i,f,y){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,i,f,y):this.doBoundingSphereBroadphase(t,i,f,y)}doBoundingSphereBroadphase(t,i,f,y){const C=e9;i.position.vsub(t.position,C);const o=(t.boundingRadius+i.boundingRadius)**2;C.lengthSquared()<o&&(f.push(t),y.push(i))}doBoundingBoxBroadphase(t,i,f,y){t.aabbNeedsUpdate&&t.updateAABB(),i.aabbNeedsUpdate&&i.updateAABB(),t.aabb.overlaps(i.aabb)&&(f.push(t),y.push(i))}makePairsUnique(t,i){const f=i9,y=n9,C=s9,o=t.length;for(let E=0;E!==o;E++)y[E]=t[E],C[E]=i[E];t.length=0,i.length=0;for(let E=0;E!==o;E++){const e=y[E].id,a=C[E].id,x=e<a?`${e},${a}`:`${a},${e}`;f[x]=E,f.keys.push(x)}for(let E=0;E!==f.keys.length;E++){const e=f.keys.pop(),a=f[e];t.push(y[a]),i.push(C[a]),delete f[e]}}setWorld(t){}static boundingSphereCheck(t,i){const f=new tt;t.position.vsub(i.position,f);const y=t.shapes[0],C=i.shapes[0];return Math.pow(y.boundingSphereRadius+C.boundingSphereRadius,2)>f.lengthSquared()}aabbQuery(t,i,f){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const e9=new tt;new tt;new an;new tt;const i9={keys:[]},n9=[],s9=[];new tt;new tt;new tt;class r9 extends t9{constructor(){super()}collisionPairs(t,i,f){const y=t.bodies,C=y.length;let o,E;for(let e=0;e!==C;e++)for(let a=0;a!==e;a++)o=y[e],E=y[a],this.needBroadphaseCollision(o,E)&&this.intersectionTest(o,E,i,f)}aabbQuery(t,i,f){f===void 0&&(f=[]);for(let y=0;y<t.bodies.length;y++){const C=t.bodies[y];C.aabbNeedsUpdate&&C.updateAABB(),C.aabb.overlaps(i)&&f.push(C)}return f}}class Gp{constructor(){this.rayFromWorld=new tt,this.rayToWorld=new tt,this.hitNormalWorld=new tt,this.hitPointWorld=new tt,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,i,f,y,C,o,E){this.rayFromWorld.copy(t),this.rayToWorld.copy(i),this.hitNormalWorld.copy(f),this.hitPointWorld.copy(y),this.shape=C,this.body=o,this.distance=E}}let JC,QC,qC,tA,eA,iA,nA;const Gx={CLOSEST:1,ANY:2,ALL:4};JC=de.types.SPHERE;QC=de.types.PLANE;qC=de.types.BOX;tA=de.types.CYLINDER;eA=de.types.CONVEXPOLYHEDRON;iA=de.types.HEIGHTFIELD;nA=de.types.TRIMESH;class sn{get[JC](){return this._intersectSphere}get[QC](){return this._intersectPlane}get[qC](){return this._intersectBox}get[tA](){return this._intersectConvex}get[eA](){return this._intersectConvex}get[iA](){return this._intersectHeightfield}get[nA](){return this._intersectTrimesh}constructor(t,i){t===void 0&&(t=new tt),i===void 0&&(i=new tt),this.from=t.clone(),this.to=i.clone(),this.direction=new tt,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=sn.ANY,this.result=new Gp,this.hasHit=!1,this.callback=f=>{}}intersectWorld(t,i){return this.mode=i.mode||sn.ANY,this.result=i.result||new Gp,this.skipBackfaces=!!i.skipBackfaces,this.collisionFilterMask=typeof i.collisionFilterMask<"u"?i.collisionFilterMask:-1,this.collisionFilterGroup=typeof i.collisionFilterGroup<"u"?i.collisionFilterGroup:-1,this.checkCollisionResponse=typeof i.checkCollisionResponse<"u"?i.checkCollisionResponse:!0,i.from&&this.from.copy(i.from),i.to&&this.to.copy(i.to),this.callback=i.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(JT),_m.length=0,t.broadphase.aabbQuery(t,JT,_m),this.intersectBodies(_m),this.hasHit}intersectBody(t,i){i&&(this.result=i,this.updateDirection());const f=this.checkCollisionResponse;if(f&&!t.collisionResponse||(this.collisionFilterGroup&t.collisionFilterMask)===0||(t.collisionFilterGroup&this.collisionFilterMask)===0)return;const y=a9,C=o9;for(let o=0,E=t.shapes.length;o<E;o++){const e=t.shapes[o];if(!(f&&!e.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[o],C),t.quaternion.vmult(t.shapeOffsets[o],y),y.vadd(t.position,y),this.intersectShape(e,C,y,t),this.result.shouldStop))break}}intersectBodies(t,i){i&&(this.result=i,this.updateDirection());for(let f=0,y=t.length;!this.result.shouldStop&&f<y;f++)this.intersectBody(t[f])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,i,f,y){const C=this.from;if(E9(C,this.direction,f)>t.boundingSphereRadius)return;const E=this[t.type];E&&E.call(this,t,i,f,y,t)}_intersectBox(t,i,f,y,C){return this._intersectConvex(t.convexPolyhedronRepresentation,i,f,y,C)}_intersectPlane(t,i,f,y,C){const o=this.from,E=this.to,e=this.direction,a=new tt(0,0,1);i.vmult(a,a);const x=new tt;o.vsub(f,x);const u=x.dot(a);E.vsub(f,x);const r=x.dot(a);if(u*r>0||o.distanceTo(E)<u)return;const h=a.dot(e);if(Math.abs(h)<this.precision)return;const n=new tt,l=new tt,c=new tt;o.vsub(f,n);const s=-a.dot(n)/h;e.scale(s,l),o.vadd(l,c),this.reportIntersection(a,c,C,y,-1)}getAABB(t){const{lowerBound:i,upperBound:f}=t,y=this.to,C=this.from;i.x=Math.min(y.x,C.x),i.y=Math.min(y.y,C.y),i.z=Math.min(y.z,C.z),f.x=Math.max(y.x,C.x),f.y=Math.max(y.y,C.y),f.z=Math.max(y.z,C.z)}_intersectHeightfield(t,i,f,y,C){t.data,t.elementSize;const o=l9;o.from.copy(this.from),o.to.copy(this.to),hi.pointToLocalFrame(f,i,o.from,o.from),hi.pointToLocalFrame(f,i,o.to,o.to),o.updateDirection();const E=h9;let e,a,x,u;e=a=0,x=u=t.data.length-1;const r=new Ns;o.getAABB(r),t.getIndexOfPosition(r.lowerBound.x,r.lowerBound.y,E,!0),e=Math.max(e,E[0]),a=Math.max(a,E[1]),t.getIndexOfPosition(r.upperBound.x,r.upperBound.y,E,!0),x=Math.min(x,E[0]+1),u=Math.min(u,E[1]+1);for(let h=e;h<x;h++)for(let n=a;n<u;n++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(h,n,r),!!r.overlapsRay(o)){if(t.getConvexTrianglePillar(h,n,!1),hi.pointToWorldFrame(f,i,t.pillarOffset,Zd),this._intersectConvex(t.pillarConvex,i,Zd,y,C,QT),this.result.shouldStop)return;t.getConvexTrianglePillar(h,n,!0),hi.pointToWorldFrame(f,i,t.pillarOffset,Zd),this._intersectConvex(t.pillarConvex,i,Zd,y,C,QT)}}}_intersectSphere(t,i,f,y,C){const o=this.from,E=this.to,e=t.radius,a=(E.x-o.x)**2+(E.y-o.y)**2+(E.z-o.z)**2,x=2*((E.x-o.x)*(o.x-f.x)+(E.y-o.y)*(o.y-f.y)+(E.z-o.z)*(o.z-f.z)),u=(o.x-f.x)**2+(o.y-f.y)**2+(o.z-f.z)**2-e**2,r=x**2-4*a*u,h=u9,n=f9;if(!(r<0))if(r===0)o.lerp(E,r,h),h.vsub(f,n),n.normalize(),this.reportIntersection(n,h,C,y,-1);else{const l=(-x-Math.sqrt(r))/(2*a),c=(-x+Math.sqrt(r))/(2*a);if(l>=0&&l<=1&&(o.lerp(E,l,h),h.vsub(f,n),n.normalize(),this.reportIntersection(n,h,C,y,-1)),this.result.shouldStop)return;c>=0&&c<=1&&(o.lerp(E,c,h),h.vsub(f,n),n.normalize(),this.reportIntersection(n,h,C,y,-1))}}_intersectConvex(t,i,f,y,C,o){const E=c9,e=qT,a=o&&o.faceList||null,x=t.faces,u=t.vertices,r=t.faceNormals,h=this.direction,n=this.from,l=this.to,c=n.distanceTo(l),s=a?a.length:x.length,d=this.result;for(let m=0;!d.shouldStop&&m<s;m++){const p=a?a[m]:m,g=x[p],T=r[p],S=i,w=f;e.copy(u[g[0]]),S.vmult(e,e),e.vadd(w,e),e.vsub(n,e),S.vmult(T,E);const A=h.dot(E);if(Math.abs(A)<this.precision)continue;const M=E.dot(e)/A;if(!(M<0)){h.scale(M,is),is.vadd(n,is),hr.copy(u[g[0]]),S.vmult(hr,hr),w.vadd(hr,hr);for(let R=1;!d.shouldStop&&R<g.length-1;R++){Dr.copy(u[g[R]]),Or.copy(u[g[R+1]]),S.vmult(Dr,Dr),S.vmult(Or,Or),w.vadd(Dr,Dr),w.vadd(Or,Or);const P=is.distanceTo(n);!(sn.pointInTriangle(is,hr,Dr,Or)||sn.pointInTriangle(is,Dr,hr,Or))||P>c||this.reportIntersection(E,is,C,y,p)}}}}_intersectTrimesh(t,i,f,y,C,o){const E=d9,e=y9,a=T9,x=qT,u=p9,r=v9,h=m9,n=x9,l=g9,c=t.indices;t.vertices;const s=this.from,d=this.to,m=this.direction;a.position.copy(f),a.quaternion.copy(i),hi.vectorToLocalFrame(f,i,m,u),hi.pointToLocalFrame(f,i,s,r),hi.pointToLocalFrame(f,i,d,h),h.x*=t.scale.x,h.y*=t.scale.y,h.z*=t.scale.z,r.x*=t.scale.x,r.y*=t.scale.y,r.z*=t.scale.z,h.vsub(r,u),u.normalize();const p=r.distanceSquared(h);t.tree.rayQuery(this,a,e);for(let g=0,T=e.length;!this.result.shouldStop&&g!==T;g++){const S=e[g];t.getNormal(S,E),t.getVertex(c[S*3],hr),hr.vsub(r,x);const w=u.dot(E),A=E.dot(x)/w;if(A<0)continue;u.scale(A,is),is.vadd(r,is),t.getVertex(c[S*3+1],Dr),t.getVertex(c[S*3+2],Or);const M=is.distanceSquared(r);!(sn.pointInTriangle(is,Dr,hr,Or)||sn.pointInTriangle(is,hr,Dr,Or))||M>p||(hi.vectorToWorldFrame(i,E,l),hi.pointToWorldFrame(f,i,is,n),this.reportIntersection(l,n,C,y,S))}e.length=0}reportIntersection(t,i,f,y,C){const o=this.from,E=this.to,e=o.distanceTo(i),a=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(a.hitFaceIndex=typeof C<"u"?C:-1,this.mode){case sn.ALL:this.hasHit=!0,a.set(o,E,t,i,f,y,e),a.hasHit=!0,this.callback(a);break;case sn.CLOSEST:(e<a.distance||!a.hasHit)&&(this.hasHit=!0,a.hasHit=!0,a.set(o,E,t,i,f,y,e));break;case sn.ANY:this.hasHit=!0,a.hasHit=!0,a.set(o,E,t,i,f,y,e),a.shouldStop=!0;break}}static pointInTriangle(t,i,f,y){y.vsub(i,Tl),f.vsub(i,Of),t.vsub(i,Xm);const C=Tl.dot(Tl),o=Tl.dot(Of),E=Tl.dot(Xm),e=Of.dot(Of),a=Of.dot(Xm);let x,u;return(x=e*E-o*a)>=0&&(u=C*a-o*E)>=0&&x+u<C*e-o*o}}sn.CLOSEST=Gx.CLOSEST;sn.ANY=Gx.ANY;sn.ALL=Gx.ALL;const JT=new Ns,_m=[],Of=new tt,Xm=new tt,a9=new tt,o9=new an,is=new tt,hr=new tt,Dr=new tt,Or=new tt;new tt;new Gp;const QT={faceList:[0]},Zd=new tt,l9=new sn,h9=[],u9=new tt,f9=new tt,c9=new tt;new tt;new tt;const qT=new tt,d9=new tt,p9=new tt,v9=new tt,m9=new tt,g9=new tt,x9=new tt;new Ns;const y9=[],T9=new hi,Tl=new tt,Jd=new tt;function E9(v,t,i){i.vsub(v,Tl);const f=Tl.dot(t);return t.scale(f,Jd),Jd.vadd(v,Jd),i.distanceTo(Jd)}class S9{static defaults(t,i){t===void 0&&(t={});for(let f in i)f in t||(t[f]=i[f]);return t}}class tE{constructor(){this.spatial=new tt,this.rotational=new tt}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,i){return t.dot(this.spatial)+i.dot(this.rotational)}}class jc{constructor(t,i,f,y){f===void 0&&(f=-1e6),y===void 0&&(y=1e6),this.id=jc.idCounter++,this.minForce=f,this.maxForce=y,this.bi=t,this.bj=i,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new tE,this.jacobianElementB=new tE,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(t,i,f){const y=i,C=t,o=f;this.a=4/(o*(1+4*y)),this.b=4*y/(1+4*y),this.eps=4/(o*o*C*(1+4*y))}computeB(t,i,f){const y=this.computeGW(),C=this.computeGq(),o=this.computeGiMf();return-C*t-y*i-o*f}computeGq(){const t=this.jacobianElementA,i=this.jacobianElementB,f=this.bi,y=this.bj,C=f.position,o=y.position;return t.spatial.dot(C)+i.spatial.dot(o)}computeGW(){const t=this.jacobianElementA,i=this.jacobianElementB,f=this.bi,y=this.bj,C=f.velocity,o=y.velocity,E=f.angularVelocity,e=y.angularVelocity;return t.multiplyVectors(C,E)+i.multiplyVectors(o,e)}computeGWlambda(){const t=this.jacobianElementA,i=this.jacobianElementB,f=this.bi,y=this.bj,C=f.vlambda,o=y.vlambda,E=f.wlambda,e=y.wlambda;return t.multiplyVectors(C,E)+i.multiplyVectors(o,e)}computeGiMf(){const t=this.jacobianElementA,i=this.jacobianElementB,f=this.bi,y=this.bj,C=f.force,o=f.torque,E=y.force,e=y.torque,a=f.invMassSolve,x=y.invMassSolve;return C.scale(a,eE),E.scale(x,iE),f.invInertiaWorldSolve.vmult(o,nE),y.invInertiaWorldSolve.vmult(e,sE),t.multiplyVectors(eE,nE)+i.multiplyVectors(iE,sE)}computeGiMGt(){const t=this.jacobianElementA,i=this.jacobianElementB,f=this.bi,y=this.bj,C=f.invMassSolve,o=y.invMassSolve,E=f.invInertiaWorldSolve,e=y.invInertiaWorldSolve;let a=C+o;return E.vmult(t.rotational,Qd),a+=Qd.dot(t.rotational),e.vmult(i.rotational,Qd),a+=Qd.dot(i.rotational),a}addToWlambda(t){const i=this.jacobianElementA,f=this.jacobianElementB,y=this.bi,C=this.bj,o=C9;y.vlambda.addScaledVector(y.invMassSolve*t,i.spatial,y.vlambda),C.vlambda.addScaledVector(C.invMassSolve*t,f.spatial,C.vlambda),y.invInertiaWorldSolve.vmult(i.rotational,o),y.wlambda.addScaledVector(t,o,y.wlambda),C.invInertiaWorldSolve.vmult(f.rotational,o),C.wlambda.addScaledVector(t,o,C.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}jc.idCounter=0;const eE=new tt,iE=new tt,nE=new tt,sE=new tt,Qd=new tt,C9=new tt;class A9 extends jc{constructor(t,i,f){f===void 0&&(f=1e6),super(t,i,0,f),this.restitution=0,this.ri=new tt,this.rj=new tt,this.ni=new tt}computeB(t){const i=this.a,f=this.b,y=this.bi,C=this.bj,o=this.ri,E=this.rj,e=w9,a=M9,x=y.velocity,u=y.angularVelocity;y.force,y.torque;const r=C.velocity,h=C.angularVelocity;C.force,C.torque;const n=R9,l=this.jacobianElementA,c=this.jacobianElementB,s=this.ni;o.cross(s,e),E.cross(s,a),s.negate(l.spatial),e.negate(l.rotational),c.spatial.copy(s),c.rotational.copy(a),n.copy(C.position),n.vadd(E,n),n.vsub(y.position,n),n.vsub(o,n);const d=s.dot(n),m=this.restitution+1,p=m*r.dot(s)-m*x.dot(s)+h.dot(a)-u.dot(e),g=this.computeGiMf();return-d*i-p*f-t*g}getImpactVelocityAlongNormal(){const t=P9,i=b9,f=I9,y=L9,C=F9;return this.bi.position.vadd(this.ri,f),this.bj.position.vadd(this.rj,y),this.bi.getVelocityAtWorldPoint(f,t),this.bj.getVelocityAtWorldPoint(y,i),t.vsub(i,C),this.ni.dot(C)}}const w9=new tt,M9=new tt,R9=new tt,P9=new tt,b9=new tt,I9=new tt,L9=new tt,F9=new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;class rE extends jc{constructor(t,i,f){super(t,i,-f,f),this.ri=new tt,this.rj=new tt,this.t=new tt}computeB(t){this.a;const i=this.b;this.bi,this.bj;const f=this.ri,y=this.rj,C=D9,o=O9,E=this.t;f.cross(E,C),y.cross(E,o);const e=this.jacobianElementA,a=this.jacobianElementB;E.negate(e.spatial),C.negate(e.rotational),a.spatial.copy(E),a.rotational.copy(o);const x=this.computeGW(),u=this.computeGiMf();return-x*i-t*u}}const D9=new tt,O9=new tt;class Bl{constructor(t,i,f){f=S9.defaults(f,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=Bl.idCounter++,this.materials=[t,i],this.friction=f.friction,this.restitution=f.restitution,this.contactEquationStiffness=f.contactEquationStiffness,this.contactEquationRelaxation=f.contactEquationRelaxation,this.frictionEquationStiffness=f.frictionEquationStiffness,this.frictionEquationRelaxation=f.frictionEquationRelaxation}}Bl.idCounter=0;class Ul{constructor(t){t===void 0&&(t={});let i="";typeof t=="string"&&(i=t,t={}),this.name=i,this.id=Ul.idCounter++,this.friction=typeof t.friction<"u"?t.friction:-1,this.restitution=typeof t.restitution<"u"?t.restitution:-1}}Ul.idCounter=0;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new sn;new tt;new tt;new tt;new tt(1,0,0),new tt(0,1,0),new tt(0,0,1);new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;class Ym extends de{constructor(){super({type:de.types.PLANE}),this.worldNormal=new tt,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}computeWorldNormal(t){const i=this.worldNormal;i.set(0,0,1),t.vmult(i,i),this.worldNormalNeedsUpdate=!1}calculateLocalInertia(t,i){return i===void 0&&(i=new tt),i}volume(){return Number.MAX_VALUE}calculateWorldAABB(t,i,f,y){ma.set(0,0,1),i.vmult(ma,ma);const C=Number.MAX_VALUE;f.set(-C,-C,-C),y.set(C,C,C),ma.x===1?y.x=t.x:ma.x===-1&&(f.x=t.x),ma.y===1?y.y=t.y:ma.y===-1&&(f.y=t.y),ma.z===1?y.z=t.z:ma.z===-1&&(f.z=t.z)}updateBoundingSphereRadius(){this.boundingSphereRadius=Number.MAX_VALUE}}const ma=new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new Ns;new tt;new Ns;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new Ns;new tt;new hi;new Ns;class N9{constructor(){this.equations=[]}solve(t,i){return 0}addEquation(t){t.enabled&&!t.bi.isTrigger&&!t.bj.isTrigger&&this.equations.push(t)}removeEquation(t){const i=this.equations,f=i.indexOf(t);f!==-1&&i.splice(f,1)}removeAllEquations(){this.equations.length=0}}class B9 extends N9{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(t,i){let f=0;const y=this.iterations,C=this.tolerance*this.tolerance,o=this.equations,E=o.length,e=i.bodies,a=e.length,x=t;let u,r,h,n,l,c;if(E!==0)for(let p=0;p!==a;p++)e[p].updateSolveMassProperties();const s=V9,d=z9,m=U9;s.length=E,d.length=E,m.length=E;for(let p=0;p!==E;p++){const g=o[p];m[p]=0,d[p]=g.computeB(x),s[p]=1/g.computeC()}if(E!==0){for(let T=0;T!==a;T++){const S=e[T],w=S.vlambda,A=S.wlambda;w.set(0,0,0),A.set(0,0,0)}for(f=0;f!==y;f++){n=0;for(let T=0;T!==E;T++){const S=o[T];u=d[T],r=s[T],c=m[T],l=S.computeGWlambda(),h=r*(u-l-S.eps*c),c+h<S.minForce?h=S.minForce-c:c+h>S.maxForce&&(h=S.maxForce-c),m[T]+=h,n+=h>0?h:-h,S.addToWlambda(h)}if(n*n<C)break}for(let T=0;T!==a;T++){const S=e[T],w=S.velocity,A=S.angularVelocity;S.vlambda.vmul(S.linearFactor,S.vlambda),w.vadd(S.vlambda,w),S.wlambda.vmul(S.angularFactor,S.wlambda),A.vadd(S.wlambda,A)}let p=o.length;const g=1/x;for(;p--;)o[p].multiplier=m[p]*g}return f}}const U9=[],V9=[],z9=[];class G9{constructor(){this.objects=[],this.type=Object}release(){const t=arguments.length;for(let i=0;i!==t;i++)this.objects.push(i<0||arguments.length<=i?void 0:arguments[i]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){const i=this.objects;for(;i.length>t;)i.pop();for(;i.length<t;)i.push(this.constructObject());return this}}class W9 extends G9{constructor(){super(...arguments),this.type=tt}constructObject(){return new tt}}const Mi={sphereSphere:de.types.SPHERE,spherePlane:de.types.SPHERE|de.types.PLANE,boxBox:de.types.BOX|de.types.BOX,sphereBox:de.types.SPHERE|de.types.BOX,planeBox:de.types.PLANE|de.types.BOX,convexConvex:de.types.CONVEXPOLYHEDRON,sphereConvex:de.types.SPHERE|de.types.CONVEXPOLYHEDRON,planeConvex:de.types.PLANE|de.types.CONVEXPOLYHEDRON,boxConvex:de.types.BOX|de.types.CONVEXPOLYHEDRON,sphereHeightfield:de.types.SPHERE|de.types.HEIGHTFIELD,boxHeightfield:de.types.BOX|de.types.HEIGHTFIELD,convexHeightfield:de.types.CONVEXPOLYHEDRON|de.types.HEIGHTFIELD,sphereParticle:de.types.PARTICLE|de.types.SPHERE,planeParticle:de.types.PLANE|de.types.PARTICLE,boxParticle:de.types.BOX|de.types.PARTICLE,convexParticle:de.types.PARTICLE|de.types.CONVEXPOLYHEDRON,cylinderCylinder:de.types.CYLINDER,sphereCylinder:de.types.SPHERE|de.types.CYLINDER,planeCylinder:de.types.PLANE|de.types.CYLINDER,boxCylinder:de.types.BOX|de.types.CYLINDER,convexCylinder:de.types.CONVEXPOLYHEDRON|de.types.CYLINDER,heightfieldCylinder:de.types.HEIGHTFIELD|de.types.CYLINDER,particleCylinder:de.types.PARTICLE|de.types.CYLINDER,sphereTrimesh:de.types.SPHERE|de.types.TRIMESH,planeTrimesh:de.types.PLANE|de.types.TRIMESH};class H9{get[Mi.sphereSphere](){return this.sphereSphere}get[Mi.spherePlane](){return this.spherePlane}get[Mi.boxBox](){return this.boxBox}get[Mi.sphereBox](){return this.sphereBox}get[Mi.planeBox](){return this.planeBox}get[Mi.convexConvex](){return this.convexConvex}get[Mi.sphereConvex](){return this.sphereConvex}get[Mi.planeConvex](){return this.planeConvex}get[Mi.boxConvex](){return this.boxConvex}get[Mi.sphereHeightfield](){return this.sphereHeightfield}get[Mi.boxHeightfield](){return this.boxHeightfield}get[Mi.convexHeightfield](){return this.convexHeightfield}get[Mi.sphereParticle](){return this.sphereParticle}get[Mi.planeParticle](){return this.planeParticle}get[Mi.boxParticle](){return this.boxParticle}get[Mi.convexParticle](){return this.convexParticle}get[Mi.cylinderCylinder](){return this.convexConvex}get[Mi.sphereCylinder](){return this.sphereConvex}get[Mi.planeCylinder](){return this.planeConvex}get[Mi.boxCylinder](){return this.boxConvex}get[Mi.convexCylinder](){return this.convexConvex}get[Mi.heightfieldCylinder](){return this.heightfieldCylinder}get[Mi.particleCylinder](){return this.particleCylinder}get[Mi.sphereTrimesh](){return this.sphereTrimesh}get[Mi.planeTrimesh](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new W9,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,i,f,y,C,o){let E;this.contactPointPool.length?(E=this.contactPointPool.pop(),E.bi=t,E.bj=i):E=new A9(t,i),E.enabled=t.collisionResponse&&i.collisionResponse&&f.collisionResponse&&y.collisionResponse;const e=this.currentContactMaterial;E.restitution=e.restitution,E.setSpookParams(e.contactEquationStiffness,e.contactEquationRelaxation,this.world.dt);const a=f.material||t.material,x=y.material||i.material;return a&&x&&a.restitution>=0&&x.restitution>=0&&(E.restitution=a.restitution*x.restitution),E.si=C||f,E.sj=o||y,E}createFrictionEquationsFromContact(t,i){const f=t.bi,y=t.bj,C=t.si,o=t.sj,E=this.world,e=this.currentContactMaterial;let a=e.friction;const x=C.material||f.material,u=o.material||y.material;if(x&&u&&x.friction>=0&&u.friction>=0&&(a=x.friction*u.friction),a>0){const r=a*(E.frictionGravity||E.gravity).length();let h=f.invMass+y.invMass;h>0&&(h=1/h);const n=this.frictionEquationPool,l=n.length?n.pop():new rE(f,y,r*h),c=n.length?n.pop():new rE(f,y,r*h);return l.bi=c.bi=f,l.bj=c.bj=y,l.minForce=c.minForce=-r*h,l.maxForce=c.maxForce=r*h,l.ri.copy(t.ri),l.rj.copy(t.rj),c.ri.copy(t.ri),c.rj.copy(t.rj),t.ni.tangents(l.t,c.t),l.setSpookParams(e.frictionEquationStiffness,e.frictionEquationRelaxation,E.dt),c.setSpookParams(e.frictionEquationStiffness,e.frictionEquationRelaxation,E.dt),l.enabled=c.enabled=t.enabled,i.push(l,c),!0}return!1}createFrictionFromAverage(t){let i=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(i,this.frictionResult)||t===1)return;const f=this.frictionResult[this.frictionResult.length-2],y=this.frictionResult[this.frictionResult.length-1];fl.setZero(),zh.setZero(),Gh.setZero();const C=i.bi;i.bj;for(let E=0;E!==t;E++)i=this.result[this.result.length-1-E],i.bi!==C?(fl.vadd(i.ni,fl),zh.vadd(i.ri,zh),Gh.vadd(i.rj,Gh)):(fl.vsub(i.ni,fl),zh.vadd(i.rj,zh),Gh.vadd(i.ri,Gh));const o=1/t;zh.scale(o,f.ri),Gh.scale(o,f.rj),y.ri.copy(f.ri),y.rj.copy(f.rj),fl.normalize(),fl.tangents(f.t,y.t)}getContacts(t,i,f,y,C,o,E){this.contactPointPool=C,this.frictionEquationPool=E,this.result=y,this.frictionResult=o;const e=Y9,a=k9,x=_9,u=X9;for(let r=0,h=t.length;r!==h;r++){const n=t[r],l=i[r];let c=null;n.material&&l.material&&(c=f.getContactMaterial(n.material,l.material)||null);const s=n.type&ce.KINEMATIC&&l.type&ce.STATIC||n.type&ce.STATIC&&l.type&ce.KINEMATIC||n.type&ce.KINEMATIC&&l.type&ce.KINEMATIC;for(let d=0;d<n.shapes.length;d++){n.quaternion.mult(n.shapeOrientations[d],e),n.quaternion.vmult(n.shapeOffsets[d],x),x.vadd(n.position,x);const m=n.shapes[d];for(let p=0;p<l.shapes.length;p++){l.quaternion.mult(l.shapeOrientations[p],a),l.quaternion.vmult(l.shapeOffsets[p],u),u.vadd(l.position,u);const g=l.shapes[p];if(!(m.collisionFilterMask&g.collisionFilterGroup&&g.collisionFilterMask&m.collisionFilterGroup)||x.distanceTo(u)>m.boundingSphereRadius+g.boundingSphereRadius)continue;let T=null;m.material&&g.material&&(T=f.getContactMaterial(m.material,g.material)||null),this.currentContactMaterial=T||c||f.defaultContactMaterial;const S=m.type|g.type,w=this[S];if(w){let A=!1;m.type<g.type?A=w.call(this,m,g,x,u,e,a,n,l,m,g,s):A=w.call(this,g,m,u,x,a,e,l,n,m,g,s),A&&s&&(f.shapeOverlapKeeper.set(m.id,g.id),f.bodyOverlapKeeper.set(n.id,l.id))}}}}}sphereSphere(t,i,f,y,C,o,E,e,a,x,u){if(u)return f.distanceSquared(y)<(t.radius+i.radius)**2;const r=this.createContactEquation(E,e,t,i,a,x);y.vsub(f,r.ni),r.ni.normalize(),r.ri.copy(r.ni),r.rj.copy(r.ni),r.ri.scale(t.radius,r.ri),r.rj.scale(-i.radius,r.rj),r.ri.vadd(f,r.ri),r.ri.vsub(E.position,r.ri),r.rj.vadd(y,r.rj),r.rj.vsub(e.position,r.rj),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}spherePlane(t,i,f,y,C,o,E,e,a,x,u){const r=this.createContactEquation(E,e,t,i,a,x);if(r.ni.set(0,0,1),o.vmult(r.ni,r.ni),r.ni.negate(r.ni),r.ni.normalize(),r.ni.scale(t.radius,r.ri),f.vsub(y,qd),r.ni.scale(r.ni.dot(qd),aE),qd.vsub(aE,r.rj),-qd.dot(r.ni)<=t.radius){if(u)return!0;const h=r.ri,n=r.rj;h.vadd(f,h),h.vsub(E.position,h),n.vadd(y,n),n.vsub(e.position,n),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}boxBox(t,i,f,y,C,o,E,e,a,x,u){return t.convexPolyhedronRepresentation.material=t.material,i.convexPolyhedronRepresentation.material=i.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,i.convexPolyhedronRepresentation.collisionResponse=i.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,i.convexPolyhedronRepresentation,f,y,C,o,E,e,t,i,u)}sphereBox(t,i,f,y,C,o,E,e,a,x,u){const r=this.v3pool,h=xN;f.vsub(y,tp),i.getSideNormals(h,o);const n=t.radius;let l=!1;const c=TN,s=EN,d=SN;let m=null,p=0,g=0,T=0,S=null;for(let L=0,D=h.length;L!==D&&l===!1;L++){const O=vN;O.copy(h[L]);const z=O.length();O.normalize();const W=tp.dot(O);if(W<z+n&&W>0){const X=mN,_=gN;X.copy(h[(L+1)%3]),_.copy(h[(L+2)%3]);const U=X.length(),G=_.length();X.normalize(),_.normalize();const N=tp.dot(X),H=tp.dot(_);if(N<U&&N>-U&&H<G&&H>-G){const V=Math.abs(W-z-n);if((S===null||V<S)&&(S=V,g=N,T=H,m=z,c.copy(O),s.copy(X),d.copy(_),p++,u))return!0}}}if(p){l=!0;const L=this.createContactEquation(E,e,t,i,a,x);c.scale(-n,L.ri),L.ni.copy(c),L.ni.negate(L.ni),c.scale(m,c),s.scale(g,s),c.vadd(s,c),d.scale(T,d),c.vadd(d,L.rj),L.ri.vadd(f,L.ri),L.ri.vsub(E.position,L.ri),L.rj.vadd(y,L.rj),L.rj.vsub(e.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}let w=r.get();const A=yN;for(let L=0;L!==2&&!l;L++)for(let D=0;D!==2&&!l;D++)for(let O=0;O!==2&&!l;O++)if(w.set(0,0,0),L?w.vadd(h[0],w):w.vsub(h[0],w),D?w.vadd(h[1],w):w.vsub(h[1],w),O?w.vadd(h[2],w):w.vsub(h[2],w),y.vadd(w,A),A.vsub(f,A),A.lengthSquared()<n*n){if(u)return!0;l=!0;const z=this.createContactEquation(E,e,t,i,a,x);z.ri.copy(A),z.ri.normalize(),z.ni.copy(z.ri),z.ri.scale(n,z.ri),z.rj.copy(w),z.ri.vadd(f,z.ri),z.ri.vsub(E.position,z.ri),z.rj.vadd(y,z.rj),z.rj.vsub(e.position,z.rj),this.result.push(z),this.createFrictionEquationsFromContact(z,this.frictionResult)}r.release(w),w=null;const M=r.get(),R=r.get(),P=r.get(),b=r.get(),F=r.get(),I=h.length;for(let L=0;L!==I&&!l;L++)for(let D=0;D!==I&&!l;D++)if(L%3!==D%3){h[D].cross(h[L],M),M.normalize(),h[L].vadd(h[D],R),P.copy(f),P.vsub(R,P),P.vsub(y,P);const O=P.dot(M);M.scale(O,b);let z=0;for(;z===L%3||z===D%3;)z++;F.copy(f),F.vsub(b,F),F.vsub(R,F),F.vsub(y,F);const W=Math.abs(O),X=F.length();if(W<h[z].length()&&X<n){if(u)return!0;l=!0;const _=this.createContactEquation(E,e,t,i,a,x);R.vadd(b,_.rj),_.rj.copy(_.rj),F.negate(_.ni),_.ni.normalize(),_.ri.copy(_.rj),_.ri.vadd(y,_.ri),_.ri.vsub(f,_.ri),_.ri.normalize(),_.ri.scale(n,_.ri),_.ri.vadd(f,_.ri),_.ri.vsub(E.position,_.ri),_.rj.vadd(y,_.rj),_.rj.vsub(e.position,_.rj),this.result.push(_),this.createFrictionEquationsFromContact(_,this.frictionResult)}}r.release(M,R,P,b,F)}planeBox(t,i,f,y,C,o,E,e,a,x,u){return i.convexPolyhedronRepresentation.material=i.material,i.convexPolyhedronRepresentation.collisionResponse=i.collisionResponse,i.convexPolyhedronRepresentation.id=i.id,this.planeConvex(t,i.convexPolyhedronRepresentation,f,y,C,o,E,e,t,i,u)}convexConvex(t,i,f,y,C,o,E,e,a,x,u,r,h){const n=UN;if(!(f.distanceTo(y)>t.boundingSphereRadius+i.boundingSphereRadius)&&t.findSeparatingAxis(i,f,C,y,o,n,r,h)){const l=[],c=VN;t.clipAgainstHull(f,C,i,y,o,n,-100,100,l);let s=0;for(let d=0;d!==l.length;d++){if(u)return!0;const m=this.createContactEquation(E,e,t,i,a,x),p=m.ri,g=m.rj;n.negate(m.ni),l[d].normal.negate(c),c.scale(l[d].depth,c),l[d].point.vadd(c,p),g.copy(l[d].point),p.vsub(f,p),g.vsub(y,g),p.vadd(f,p),p.vsub(E.position,p),g.vadd(y,g),g.vsub(e.position,g),this.result.push(m),s++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(m,this.frictionResult)}this.enableFrictionReduction&&s&&this.createFrictionFromAverage(s)}}sphereConvex(t,i,f,y,C,o,E,e,a,x,u){const r=this.v3pool;f.vsub(y,CN);const h=i.faceNormals,n=i.faces,l=i.vertices,c=t.radius;let s=!1;for(let d=0;d!==l.length;d++){const m=l[d],p=RN;o.vmult(m,p),y.vadd(p,p);const g=MN;if(p.vsub(f,g),g.lengthSquared()<c*c){if(u)return!0;s=!0;const T=this.createContactEquation(E,e,t,i,a,x);T.ri.copy(g),T.ri.normalize(),T.ni.copy(T.ri),T.ri.scale(c,T.ri),p.vsub(y,T.rj),T.ri.vadd(f,T.ri),T.ri.vsub(E.position,T.ri),T.rj.vadd(y,T.rj),T.rj.vsub(e.position,T.rj),this.result.push(T),this.createFrictionEquationsFromContact(T,this.frictionResult);return}}for(let d=0,m=n.length;d!==m&&s===!1;d++){const p=h[d],g=n[d],T=PN;o.vmult(p,T);const S=bN;o.vmult(l[g[0]],S),S.vadd(y,S);const w=IN;T.scale(-c,w),f.vadd(w,w);const A=LN;w.vsub(S,A);const M=A.dot(T),R=FN;if(f.vsub(S,R),M<0&&R.dot(T)>0){const P=[];for(let b=0,F=g.length;b!==F;b++){const I=r.get();o.vmult(l[g[b]],I),y.vadd(I,I),P.push(I)}if(pN(P,T,f)){if(u)return!0;s=!0;const b=this.createContactEquation(E,e,t,i,a,x);T.scale(-c,b.ri),T.negate(b.ni);const F=r.get();T.scale(-M,F);const I=r.get();T.scale(-c,I),f.vsub(y,b.rj),b.rj.vadd(I,b.rj),b.rj.vadd(F,b.rj),b.rj.vadd(y,b.rj),b.rj.vsub(e.position,b.rj),b.ri.vadd(f,b.ri),b.ri.vsub(E.position,b.ri),r.release(F),r.release(I),this.result.push(b),this.createFrictionEquationsFromContact(b,this.frictionResult);for(let L=0,D=P.length;L!==D;L++)r.release(P[L]);return}else for(let b=0;b!==g.length;b++){const F=r.get(),I=r.get();o.vmult(l[g[(b+1)%g.length]],F),o.vmult(l[g[(b+2)%g.length]],I),y.vadd(F,F),y.vadd(I,I);const L=AN;I.vsub(F,L);const D=wN;L.unit(D);const O=r.get(),z=r.get();f.vsub(F,z);const W=z.dot(D);D.scale(W,O),O.vadd(F,O);const X=r.get();if(O.vsub(f,X),W>0&&W*W<L.lengthSquared()&&X.lengthSquared()<c*c){if(u)return!0;const _=this.createContactEquation(E,e,t,i,a,x);O.vsub(y,_.rj),O.vsub(f,_.ni),_.ni.normalize(),_.ni.scale(c,_.ri),_.rj.vadd(y,_.rj),_.rj.vsub(e.position,_.rj),_.ri.vadd(f,_.ri),_.ri.vsub(E.position,_.ri),this.result.push(_),this.createFrictionEquationsFromContact(_,this.frictionResult);for(let U=0,G=P.length;U!==G;U++)r.release(P[U]);r.release(F),r.release(I),r.release(O),r.release(X),r.release(z);return}r.release(F),r.release(I),r.release(O),r.release(X),r.release(z)}for(let b=0,F=P.length;b!==F;b++)r.release(P[b])}}}planeConvex(t,i,f,y,C,o,E,e,a,x,u){const r=DN,h=ON;h.set(0,0,1),C.vmult(h,h);let n=0;const l=NN;for(let c=0;c!==i.vertices.length;c++)if(r.copy(i.vertices[c]),o.vmult(r,r),y.vadd(r,r),r.vsub(f,l),h.dot(l)<=0){if(u)return!0;const d=this.createContactEquation(E,e,t,i,a,x),m=BN;h.scale(h.dot(l),m),r.vsub(m,m),m.vsub(f,d.ri),d.ni.copy(h),r.vsub(y,d.rj),d.ri.vadd(f,d.ri),d.ri.vsub(E.position,d.ri),d.rj.vadd(y,d.rj),d.rj.vsub(e.position,d.rj),this.result.push(d),n++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(d,this.frictionResult)}this.enableFrictionReduction&&n&&this.createFrictionFromAverage(n)}boxConvex(t,i,f,y,C,o,E,e,a,x,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,i,f,y,C,o,E,e,t,i,u)}sphereHeightfield(t,i,f,y,C,o,E,e,a,x,u){const r=i.data,h=t.radius,n=i.elementSize,l=ZN,c=jN;hi.pointToLocalFrame(y,o,f,c);let s=Math.floor((c.x-h)/n)-1,d=Math.ceil((c.x+h)/n)+1,m=Math.floor((c.y-h)/n)-1,p=Math.ceil((c.y+h)/n)+1;if(d<0||p<0||s>r.length||m>r[0].length)return;s<0&&(s=0),d<0&&(d=0),m<0&&(m=0),p<0&&(p=0),s>=r.length&&(s=r.length-1),d>=r.length&&(d=r.length-1),p>=r[0].length&&(p=r[0].length-1),m>=r[0].length&&(m=r[0].length-1);const g=[];i.getRectMinMax(s,m,d,p,g);const T=g[0],S=g[1];if(c.z-h>S||c.z+h<T)return;const w=this.result;for(let A=s;A<d;A++)for(let M=m;M<p;M++){const R=w.length;let P=!1;if(i.getConvexTrianglePillar(A,M,!1),hi.pointToWorldFrame(y,o,i.pillarOffset,l),f.distanceTo(l)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(P=this.sphereConvex(t,i.pillarConvex,f,l,C,o,E,e,t,i,u)),u&&P||(i.getConvexTrianglePillar(A,M,!0),hi.pointToWorldFrame(y,o,i.pillarOffset,l),f.distanceTo(l)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(P=this.sphereConvex(t,i.pillarConvex,f,l,C,o,E,e,t,i,u)),u&&P))return!0;if(w.length-R>2)return}}boxHeightfield(t,i,f,y,C,o,E,e,a,x,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,i,f,y,C,o,E,e,t,i,u)}convexHeightfield(t,i,f,y,C,o,E,e,a,x,u){const r=i.data,h=i.elementSize,n=t.boundingSphereRadius,l=$N,c=KN,s=kN;hi.pointToLocalFrame(y,o,f,s);let d=Math.floor((s.x-n)/h)-1,m=Math.ceil((s.x+n)/h)+1,p=Math.floor((s.y-n)/h)-1,g=Math.ceil((s.y+n)/h)+1;if(m<0||g<0||d>r.length||p>r[0].length)return;d<0&&(d=0),m<0&&(m=0),p<0&&(p=0),g<0&&(g=0),d>=r.length&&(d=r.length-1),m>=r.length&&(m=r.length-1),g>=r[0].length&&(g=r[0].length-1),p>=r[0].length&&(p=r[0].length-1);const T=[];i.getRectMinMax(d,p,m,g,T);const S=T[0],w=T[1];if(!(s.z-n>w||s.z+n<S))for(let A=d;A<m;A++)for(let M=p;M<g;M++){let R=!1;if(i.getConvexTrianglePillar(A,M,!1),hi.pointToWorldFrame(y,o,i.pillarOffset,l),f.distanceTo(l)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(R=this.convexConvex(t,i.pillarConvex,f,l,C,o,E,e,null,null,u,c,null)),u&&R||(i.getConvexTrianglePillar(A,M,!0),hi.pointToWorldFrame(y,o,i.pillarOffset,l),f.distanceTo(l)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(R=this.convexConvex(t,i.pillarConvex,f,l,C,o,E,e,null,null,u,c,null)),u&&R))return!0}}sphereParticle(t,i,f,y,C,o,E,e,a,x,u){const r=HN;if(r.set(0,0,1),y.vsub(f,r),r.lengthSquared()<=t.radius*t.radius){if(u)return!0;const n=this.createContactEquation(e,E,i,t,a,x);r.normalize(),n.rj.copy(r),n.rj.scale(t.radius,n.rj),n.ni.copy(r),n.ni.negate(n.ni),n.ri.set(0,0,0),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}planeParticle(t,i,f,y,C,o,E,e,a,x,u){const r=zN;r.set(0,0,1),E.quaternion.vmult(r,r);const h=GN;if(y.vsub(E.position,h),r.dot(h)<=0){if(u)return!0;const l=this.createContactEquation(e,E,i,t,a,x);l.ni.copy(r),l.ni.negate(l.ni),l.ri.set(0,0,0);const c=WN;r.scale(r.dot(y),c),y.vsub(c,c),l.rj.copy(c),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult)}}boxParticle(t,i,f,y,C,o,E,e,a,x,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,i,f,y,C,o,E,e,t,i,u)}convexParticle(t,i,f,y,C,o,E,e,a,x,u){let r=-1;const h=XN,n=YN;let l=null;const c=_N;if(c.copy(y),c.vsub(f,c),C.conjugate(oE),oE.vmult(c,c),t.pointIsInside(c)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(f,C),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(C);for(let s=0,d=t.faces.length;s!==d;s++){const m=[t.worldVertices[t.faces[s][0]]],p=t.worldFaceNormals[s];y.vsub(m[0],lE);const g=-p.dot(lE);if(l===null||Math.abs(g)<Math.abs(l)){if(u)return!0;l=g,r=s,h.copy(p)}}if(r!==-1){const s=this.createContactEquation(e,E,i,t,a,x);h.scale(l,n),n.vadd(y,n),n.vsub(f,n),s.rj.copy(n),h.negate(s.ni),s.ri.set(0,0,0);const d=s.ri,m=s.rj;d.vadd(y,d),d.vsub(e.position,d),m.vadd(f,m),m.vsub(E.position,m),this.result.push(s),this.createFrictionEquationsFromContact(s,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(t,i,f,y,C,o,E,e,a,x,u){return this.convexHeightfield(i,t,y,f,o,C,e,E,a,x,u)}particleCylinder(t,i,f,y,C,o,E,e,a,x,u){return this.convexParticle(i,t,y,f,o,C,e,E,a,x,u)}sphereTrimesh(t,i,f,y,C,o,E,e,a,x,u){const r=tN,h=eN,n=iN,l=nN,c=sN,s=rN,d=hN,m=q9,p=J9,g=uN;hi.pointToLocalFrame(y,o,f,c);const T=t.radius;d.lowerBound.set(c.x-T,c.y-T,c.z-T),d.upperBound.set(c.x+T,c.y+T,c.z+T),i.getTrianglesInAABB(d,g);const S=Q9,w=t.radius*t.radius;for(let b=0;b<g.length;b++)for(let F=0;F<3;F++)if(i.getVertex(i.indices[g[b]*3+F],S),S.vsub(c,p),p.lengthSquared()<=w){if(m.copy(S),hi.pointToWorldFrame(y,o,m,S),S.vsub(f,p),u)return!0;let I=this.createContactEquation(E,e,t,i,a,x);I.ni.copy(p),I.ni.normalize(),I.ri.copy(I.ni),I.ri.scale(t.radius,I.ri),I.ri.vadd(f,I.ri),I.ri.vsub(E.position,I.ri),I.rj.copy(S),I.rj.vsub(e.position,I.rj),this.result.push(I),this.createFrictionEquationsFromContact(I,this.frictionResult)}for(let b=0;b<g.length;b++)for(let F=0;F<3;F++){i.getVertex(i.indices[g[b]*3+F],r),i.getVertex(i.indices[g[b]*3+(F+1)%3],h),h.vsub(r,n),c.vsub(h,s);const I=s.dot(n);c.vsub(r,s);let L=s.dot(n);if(L>0&&I<0&&(c.vsub(r,s),l.copy(n),l.normalize(),L=s.dot(l),l.scale(L,s),s.vadd(r,s),s.distanceTo(c)<t.radius)){if(u)return!0;const O=this.createContactEquation(E,e,t,i,a,x);s.vsub(c,O.ni),O.ni.normalize(),O.ni.scale(t.radius,O.ri),O.ri.vadd(f,O.ri),O.ri.vsub(E.position,O.ri),hi.pointToWorldFrame(y,o,s,s),s.vsub(e.position,O.rj),hi.vectorToWorldFrame(o,O.ni,O.ni),hi.vectorToWorldFrame(o,O.ri,O.ri),this.result.push(O),this.createFrictionEquationsFromContact(O,this.frictionResult)}}const A=aN,M=oN,R=lN,P=Z9;for(let b=0,F=g.length;b!==F;b++){i.getTriangleVertices(g[b],A,M,R),i.getNormal(g[b],P),c.vsub(A,s);let I=s.dot(P);if(P.scale(I,s),c.vsub(s,s),I=s.distanceTo(c),sn.pointInTriangle(s,A,M,R)&&I<t.radius){if(u)return!0;let L=this.createContactEquation(E,e,t,i,a,x);s.vsub(c,L.ni),L.ni.normalize(),L.ni.scale(t.radius,L.ri),L.ri.vadd(f,L.ri),L.ri.vsub(E.position,L.ri),hi.pointToWorldFrame(y,o,s,s),s.vsub(e.position,L.rj),hi.vectorToWorldFrame(o,L.ni,L.ni),hi.vectorToWorldFrame(o,L.ri,L.ri),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}}g.length=0}planeTrimesh(t,i,f,y,C,o,E,e,a,x,u){const r=new tt,h=$9;h.set(0,0,1),C.vmult(h,h);for(let n=0;n<i.vertices.length/3;n++){i.getVertex(n,r);const l=new tt;l.copy(r),hi.pointToWorldFrame(y,o,l,r);const c=K9;if(r.vsub(f,c),h.dot(c)<=0){if(u)return!0;const d=this.createContactEquation(E,e,t,i,a,x);d.ni.copy(h);const m=j9;h.scale(c.dot(h),m),r.vsub(m,m),d.ri.copy(m),d.ri.vsub(E.position,d.ri),d.rj.copy(r),d.rj.vsub(e.position,d.rj),this.result.push(d),this.createFrictionEquationsFromContact(d,this.frictionResult)}}}}const fl=new tt,zh=new tt,Gh=new tt,_9=new tt,X9=new tt,Y9=new an,k9=new an,$9=new tt,K9=new tt,j9=new tt,Z9=new tt,J9=new tt;new tt;const Q9=new tt,q9=new tt,tN=new tt,eN=new tt,iN=new tt,nN=new tt,sN=new tt,rN=new tt,aN=new tt,oN=new tt,lN=new tt,hN=new Ns,uN=[],qd=new tt,aE=new tt,fN=new tt,cN=new tt,dN=new tt;function pN(v,t,i){let f=null;const y=v.length;for(let C=0;C!==y;C++){const o=v[C],E=fN;v[(C+1)%y].vsub(o,E);const e=cN;E.cross(t,e);const a=dN;i.vsub(o,a);const x=e.dot(a);if(f===null||x>0&&f===!0||x<=0&&f===!1){f===null&&(f=x>0);continue}else return!1}return!0}const tp=new tt,vN=new tt,mN=new tt,gN=new tt,xN=[new tt,new tt,new tt,new tt,new tt,new tt],yN=new tt,TN=new tt,EN=new tt,SN=new tt,CN=new tt,AN=new tt,wN=new tt,MN=new tt,RN=new tt,PN=new tt,bN=new tt,IN=new tt,LN=new tt,FN=new tt;new tt;new tt;const DN=new tt,ON=new tt,NN=new tt,BN=new tt,UN=new tt,VN=new tt,zN=new tt,GN=new tt,WN=new tt,HN=new tt,oE=new an,_N=new tt;new tt;const XN=new tt,lE=new tt,YN=new tt,kN=new tt,$N=new tt,KN=[0],jN=new tt,ZN=new tt;class hE{constructor(){this.current=[],this.previous=[]}getKey(t,i){if(i<t){const f=i;i=t,t=f}return t<<16|i}set(t,i){const f=this.getKey(t,i),y=this.current;let C=0;for(;f>y[C];)C++;if(f!==y[C]){for(let o=y.length-1;o>=C;o--)y[o+1]=y[o];y[C]=f}}tick(){const t=this.current;this.current=this.previous,this.previous=t,this.current.length=0}getDiff(t,i){const f=this.current,y=this.previous,C=f.length,o=y.length;let E=0;for(let e=0;e<C;e++){let a=!1;const x=f[e];for(;x>y[E];)E++;a=x===y[E],a||uE(t,x)}E=0;for(let e=0;e<o;e++){let a=!1;const x=y[e];for(;x>f[E];)E++;a=f[E]===x,a||uE(i,x)}}}function uE(v,t){v.push((t&4294901760)>>16,t&65535)}const km=(v,t)=>v<t?`${v}-${t}`:`${t}-${v}`;class JN{constructor(){this.data={keys:[]}}get(t,i){const f=km(t,i);return this.data[f]}set(t,i,f){const y=km(t,i);this.get(t,i)||this.data.keys.push(y),this.data[y]=f}delete(t,i){const f=km(t,i),y=this.data.keys.indexOf(f);y!==-1&&this.data.keys.splice(y,1),delete this.data[f]}reset(){const t=this.data,i=t.keys;for(;i.length>0;){const f=i.pop();delete t[f]}}}class QN extends ZC{constructor(t){t===void 0&&(t={}),super(),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=t.quatNormalizeSkip!==void 0?t.quatNormalizeSkip:0,this.quatNormalizeFast=t.quatNormalizeFast!==void 0?t.quatNormalizeFast:!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new tt,t.gravity&&this.gravity.copy(t.gravity),t.frictionGravity&&(this.frictionGravity=new tt,this.frictionGravity.copy(t.frictionGravity)),this.broadphase=t.broadphase!==void 0?t.broadphase:new r9,this.bodies=[],this.hasActiveBodies=!1,this.solver=t.solver!==void 0?t.solver:new B9,this.constraints=[],this.narrowphase=new H9(this),this.collisionMatrix=new jT,this.collisionMatrixPrevious=new jT,this.bodyOverlapKeeper=new hE,this.shapeOverlapKeeper=new hE,this.contactmaterials=[],this.contactMaterialTable=new JN,this.defaultMaterial=new Ul("default"),this.defaultContactMaterial=new Bl(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(t,i){return this.contactMaterialTable.get(t.id,i.id)}collisionMatrixTick(){const t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(t){this.constraints.push(t)}removeConstraint(t){const i=this.constraints.indexOf(t);i!==-1&&this.constraints.splice(i,1)}rayTest(t,i,f){f instanceof Gp?this.raycastClosest(t,i,{skipBackfaces:!0},f):this.raycastAll(t,i,{skipBackfaces:!0},f)}raycastAll(t,i,f,y){return f===void 0&&(f={}),f.mode=sn.ALL,f.from=t,f.to=i,f.callback=y,$m.intersectWorld(this,f)}raycastAny(t,i,f,y){return f===void 0&&(f={}),f.mode=sn.ANY,f.from=t,f.to=i,f.result=y,$m.intersectWorld(this,f)}raycastClosest(t,i,f,y){return f===void 0&&(f={}),f.mode=sn.CLOSEST,f.from=t,f.to=i,f.result=y,$m.intersectWorld(this,f)}addBody(t){this.bodies.includes(t)||(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof ce&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))}removeBody(t){t.world=null;const i=this.bodies.length-1,f=this.bodies,y=f.indexOf(t);if(y!==-1){f.splice(y,1);for(let C=0;C!==f.length;C++)f[C].index=C;this.collisionMatrix.setNumObjects(i),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(t){return this.idToBodyMap[t]}getShapeById(t){const i=this.bodies;for(let f=0;f<i.length;f++){const y=i[f].shapes;for(let C=0;C<y.length;C++){const o=y[C];if(o.id===t)return o}}return null}addContactMaterial(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)}removeContactMaterial(t){const i=this.contactmaterials.indexOf(t);i!==-1&&(this.contactmaterials.splice(i,1),this.contactMaterialTable.delete(t.materials[0].id,t.materials[1].id))}fixedStep(t,i){t===void 0&&(t=1/60),i===void 0&&(i=10);const f=fn.now()/1e3;if(!this.lastCallTime)this.step(t,void 0,i);else{const y=f-this.lastCallTime;this.step(t,y,i)}this.lastCallTime=f}step(t,i,f){if(f===void 0&&(f=10),i===void 0)this.internalStep(t),this.time+=t;else{this.accumulator+=i;const y=fn.now();let C=0;for(;this.accumulator>=t&&C<f&&(this.internalStep(t),this.accumulator-=t,C++,!(fn.now()-y>t*1e3)););this.accumulator=this.accumulator%t;const o=this.accumulator/t;for(let E=0;E!==this.bodies.length;E++){const e=this.bodies[E];e.previousPosition.lerp(e.position,o,e.interpolatedPosition),e.previousQuaternion.slerp(e.quaternion,o,e.interpolatedQuaternion),e.previousQuaternion.normalize()}this.time+=i}}internalStep(t){this.dt=t;const i=this.contacts,f=n6,y=s6,C=this.bodies.length,o=this.bodies,E=this.solver,e=this.gravity,a=this.doProfiling,x=this.profile,u=ce.DYNAMIC;let r=-1/0;const h=this.constraints,n=i6;e.length();const l=e.x,c=e.y,s=e.z;let d=0;for(a&&(r=fn.now()),d=0;d!==C;d++){const b=o[d];if(b.type===u){const F=b.force,I=b.mass;F.x+=I*l,F.y+=I*c,F.z+=I*s}}for(let b=0,F=this.subsystems.length;b!==F;b++)this.subsystems[b].update();a&&(r=fn.now()),f.length=0,y.length=0,this.broadphase.collisionPairs(this,f,y),a&&(x.broadphase=fn.now()-r);let m=h.length;for(d=0;d!==m;d++){const b=h[d];if(!b.collideConnected)for(let F=f.length-1;F>=0;F-=1)(b.bodyA===f[F]&&b.bodyB===y[F]||b.bodyB===f[F]&&b.bodyA===y[F])&&(f.splice(F,1),y.splice(F,1))}this.collisionMatrixTick(),a&&(r=fn.now());const p=e6,g=i.length;for(d=0;d!==g;d++)p.push(i[d]);i.length=0;const T=this.frictionEquations.length;for(d=0;d!==T;d++)n.push(this.frictionEquations[d]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(f,y,this,i,p,this.frictionEquations,n),a&&(x.narrowphase=fn.now()-r),a&&(r=fn.now()),d=0;d<this.frictionEquations.length;d++)E.addEquation(this.frictionEquations[d]);const S=i.length;for(let b=0;b!==S;b++){const F=i[b],I=F.bi,L=F.bj,D=F.si,O=F.sj;let z;if(I.material&&L.material?z=this.getContactMaterial(I.material,L.material)||this.defaultContactMaterial:z=this.defaultContactMaterial,z.friction,I.material&&L.material&&(I.material.friction>=0&&L.material.friction>=0&&I.material.friction*L.material.friction,I.material.restitution>=0&&L.material.restitution>=0&&(F.restitution=I.material.restitution*L.material.restitution)),E.addEquation(F),I.allowSleep&&I.type===ce.DYNAMIC&&I.sleepState===ce.SLEEPING&&L.sleepState===ce.AWAKE&&L.type!==ce.STATIC){const W=L.velocity.lengthSquared()+L.angularVelocity.lengthSquared(),X=L.sleepSpeedLimit**2;W>=X*2&&(I.wakeUpAfterNarrowphase=!0)}if(L.allowSleep&&L.type===ce.DYNAMIC&&L.sleepState===ce.SLEEPING&&I.sleepState===ce.AWAKE&&I.type!==ce.STATIC){const W=I.velocity.lengthSquared()+I.angularVelocity.lengthSquared(),X=I.sleepSpeedLimit**2;W>=X*2&&(L.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(I,L,!0),this.collisionMatrixPrevious.get(I,L)||(Nf.body=L,Nf.contact=F,I.dispatchEvent(Nf),Nf.body=I,L.dispatchEvent(Nf)),this.bodyOverlapKeeper.set(I.id,L.id),this.shapeOverlapKeeper.set(D.id,O.id)}for(this.emitContactEvents(),a&&(x.makeContactConstraints=fn.now()-r,r=fn.now()),d=0;d!==C;d++){const b=o[d];b.wakeUpAfterNarrowphase&&(b.wakeUp(),b.wakeUpAfterNarrowphase=!1)}for(m=h.length,d=0;d!==m;d++){const b=h[d];b.update();for(let F=0,I=b.equations.length;F!==I;F++){const L=b.equations[F];E.addEquation(L)}}E.solve(t,this),a&&(x.solve=fn.now()-r),E.removeAllEquations();const w=Math.pow;for(d=0;d!==C;d++){const b=o[d];if(b.type&u){const F=w(1-b.linearDamping,t),I=b.velocity;I.scale(F,I);const L=b.angularVelocity;if(L){const D=w(1-b.angularDamping,t);L.scale(D,L)}}}this.dispatchEvent(t6),a&&(r=fn.now());const M=this.stepnumber%(this.quatNormalizeSkip+1)===0,R=this.quatNormalizeFast;for(d=0;d!==C;d++)o[d].integrate(t,M,R);this.clearForces(),this.broadphase.dirty=!0,a&&(x.integrate=fn.now()-r),this.stepnumber+=1,this.dispatchEvent(qN);let P=!0;if(this.allowSleep)for(P=!1,d=0;d!==C;d++){const b=o[d];b.sleepTick(this.time),b.sleepState!==ce.SLEEPING&&(P=!0)}this.hasActiveBodies=P}emitContactEvents(){const t=this.hasAnyEventListener("beginContact"),i=this.hasAnyEventListener("endContact");if((t||i)&&this.bodyOverlapKeeper.getDiff(ga,xa),t){for(let C=0,o=ga.length;C<o;C+=2)Bf.bodyA=this.getBodyById(ga[C]),Bf.bodyB=this.getBodyById(ga[C+1]),this.dispatchEvent(Bf);Bf.bodyA=Bf.bodyB=null}if(i){for(let C=0,o=xa.length;C<o;C+=2)Uf.bodyA=this.getBodyById(xa[C]),Uf.bodyB=this.getBodyById(xa[C+1]),this.dispatchEvent(Uf);Uf.bodyA=Uf.bodyB=null}ga.length=xa.length=0;const f=this.hasAnyEventListener("beginShapeContact"),y=this.hasAnyEventListener("endShapeContact");if((f||y)&&this.shapeOverlapKeeper.getDiff(ga,xa),f){for(let C=0,o=ga.length;C<o;C+=2){const E=this.getShapeById(ga[C]),e=this.getShapeById(ga[C+1]);ya.shapeA=E,ya.shapeB=e,E&&(ya.bodyA=E.body),e&&(ya.bodyB=e.body),this.dispatchEvent(ya)}ya.bodyA=ya.bodyB=ya.shapeA=ya.shapeB=null}if(y){for(let C=0,o=xa.length;C<o;C+=2){const E=this.getShapeById(xa[C]),e=this.getShapeById(xa[C+1]);Ta.shapeA=E,Ta.shapeB=e,E&&(Ta.bodyA=E.body),e&&(Ta.bodyB=e.body),this.dispatchEvent(Ta)}Ta.bodyA=Ta.bodyB=Ta.shapeA=Ta.shapeB=null}}clearForces(){const t=this.bodies,i=t.length;for(let f=0;f!==i;f++){const y=t[f];y.force,y.torque,y.force.set(0,0,0),y.torque.set(0,0,0)}}}new Ns;const $m=new sn,fn=globalThis.performance||{};if(!fn.now){let v=Date.now();fn.timing&&fn.timing.navigationStart&&(v=fn.timing.navigationStart),fn.now=()=>Date.now()-v}new tt;const qN={type:"postStep"},t6={type:"preStep"},Nf={type:ce.COLLIDE_EVENT_NAME,body:null,contact:null},e6=[],i6=[],n6=[],s6=[],ga=[],xa=[],Bf={type:"beginContact",bodyA:null,bodyB:null},Uf={type:"endContact",bodyA:null,bodyB:null},ya={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},Ta={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};function Sa(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function sA(v,t){v.prototype=Object.create(t.prototype),v.prototype.constructor=v,v.__proto__=t}/*!
 * GSAP 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var bs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Lu={duration:.5,overwrite:!1,delay:0},Wx,Dn,Li,Ks=1e8,Ti=1/Ks,Rg=Math.PI*2,r6=Rg/4,a6=0,rA=Math.sqrt,o6=Math.cos,l6=Math.sin,An=function(t){return typeof t=="string"},_i=function(t){return typeof t=="function"},_a=function(t){return typeof t=="number"},Hx=function(t){return typeof t>"u"},ta=function(t){return typeof t=="object"},cs=function(t){return t!==!1},_x=function(){return typeof window<"u"},ep=function(t){return _i(t)||An(t)},aA=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},kn=Array.isArray,h6=/random\([^)]+\)/g,u6=/,\s*/g,fE=/(?:-?\.?\d|\.)+/gi,oA=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Zh=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Km=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,lA=/[+-]=-?[.\d]+/,f6=/[^,'"\[\]\s]+/gi,c6=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ni,Nr,Pg,Xx,Ls={},Wp={},hA,uA=function(t){return(Wp=Fu(t,Ls))&&ms},Yx=function(t,i){return console.warn("Invalid property",t,"set to",i,"Missing plugin? gsap.registerPlugin()")},gc=function(t,i){return!i&&console.warn(t)},fA=function(t,i){return t&&(Ls[t]=i)&&Wp&&(Wp[t]=i)||Ls},xc=function(){return 0},d6={suppressEvents:!0,isStart:!0,kill:!1},xp={suppressEvents:!0,kill:!1},p6={suppressEvents:!0},kx={},Lo=[],bg={},cA,Ss={},jm={},cE=30,yp=[],$x="",Kx=function(t){var i=t[0],f,y;if(ta(i)||_i(i)||(t=[t]),!(f=(i._gsap||{}).harness)){for(y=yp.length;y--&&!yp[y].targetTest(i););f=yp[y]}for(y=t.length;y--;)t[y]&&(t[y]._gsap||(t[y]._gsap=new BA(t[y],f)))||t.splice(y,1);return t},Vl=function(t){return t._gsap||Kx(js(t))[0]._gsap},dA=function(t,i,f){return(f=t[i])&&_i(f)?t[i]():Hx(f)&&t.getAttribute&&t.getAttribute(i)||f},ds=function(t,i){return(t=t.split(",")).forEach(i)||t},ki=function(t){return Math.round(t*1e5)/1e5||0},Oi=function(t){return Math.round(t*1e7)/1e7||0},iu=function(t,i){var f=i.charAt(0),y=parseFloat(i.substr(2));return t=parseFloat(t),f==="+"?t+y:f==="-"?t-y:f==="*"?t*y:t/y},v6=function(t,i){for(var f=i.length,y=0;t.indexOf(i[y])<0&&++y<f;);return y<f},Hp=function(){var t=Lo.length,i=Lo.slice(0),f,y;for(bg={},Lo.length=0,f=0;f<t;f++)y=i[f],y&&y._lazy&&(y.render(y._lazy[0],y._lazy[1],!0)._lazy=0)},jx=function(t){return!!(t._initted||t._startAt||t.add)},pA=function(t,i,f,y){Lo.length&&!Dn&&Hp(),t.render(i,f,!!(Dn&&i<0&&jx(t))),Lo.length&&!Dn&&Hp()},vA=function(t){var i=parseFloat(t);return(i||i===0)&&(t+"").match(f6).length<2?i:An(t)?t.trim():t},mA=function(t){return t},Fs=function(t,i){for(var f in i)f in t||(t[f]=i[f]);return t},m6=function(t){return function(i,f){for(var y in f)y in i||y==="duration"&&t||y==="ease"||(i[y]=f[y])}},Fu=function(t,i){for(var f in i)t[f]=i[f];return t},dE=function v(t,i){for(var f in i)f!=="__proto__"&&f!=="constructor"&&f!=="prototype"&&(t[f]=ta(i[f])?v(t[f]||(t[f]={}),i[f]):i[f]);return t},_p=function(t,i){var f={},y;for(y in t)y in i||(f[y]=t[y]);return f},sc=function(t){var i=t.parent||Ni,f=t.keyframes?m6(kn(t.keyframes)):Fs;if(cs(t.inherit))for(;i;)f(t,i.vars.defaults),i=i.parent||i._dp;return t},g6=function(t,i){for(var f=t.length,y=f===i.length;y&&f--&&t[f]===i[f];);return f<0},gA=function(t,i,f,y,C){var o=t[y],E;if(C)for(E=i[C];o&&o[C]>E;)o=o._prev;return o?(i._next=o._next,o._next=i):(i._next=t[f],t[f]=i),i._next?i._next._prev=i:t[y]=i,i._prev=o,i.parent=i._dp=t,i},Rv=function(t,i,f,y){f===void 0&&(f="_first"),y===void 0&&(y="_last");var C=i._prev,o=i._next;C?C._next=o:t[f]===i&&(t[f]=o),o?o._prev=C:t[y]===i&&(t[y]=C),i._next=i._prev=i.parent=null},Go=function(t,i){t.parent&&(!i||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},zl=function(t,i){if(t&&(!i||i._end>t._dur||i._start<0))for(var f=t;f;)f._dirty=1,f=f.parent;return t},x6=function(t){for(var i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},Ig=function(t,i,f,y){return t._startAt&&(Dn?t._startAt.revert(xp):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(i,!0,y))},y6=function v(t){return!t||t._ts&&v(t.parent)},pE=function(t){return t._repeat?Du(t._tTime,t=t.duration()+t._rDelay)*t:0},Du=function(t,i){var f=Math.floor(t=Oi(t/i));return t&&f===t?f-1:f},Xp=function(t,i){return(t-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},Pv=function(t){return t._end=Oi(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ti)||0))},bv=function(t,i){var f=t._dp;return f&&f.smoothChildTiming&&t._ts&&(t._start=Oi(f._time-(t._ts>0?i/t._ts:((t._dirty?t.totalDuration():t._tDur)-i)/-t._ts)),Pv(t),f._dirty||zl(f,t)),t},xA=function(t,i){var f;if((i._time||!i._dur&&i._initted||i._start<t._time&&(i._dur||!i.add))&&(f=Xp(t.rawTime(),i),(!i._dur||Zc(0,i.totalDuration(),f)-i._tTime>Ti)&&i.render(f,!0)),zl(t,i)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(f=t;f._dp;)f.rawTime()>=0&&f.totalTime(f._tTime),f=f._dp;t._zTime=-Ti}},Hr=function(t,i,f,y){return i.parent&&Go(i),i._start=Oi((_a(f)?f:f||t!==Ni?Gs(t,f,i):t._time)+i._delay),i._end=Oi(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),gA(t,i,"_first","_last",t._sort?"_start":0),Lg(i)||(t._recent=i),y||xA(t,i),t._ts<0&&bv(t,t._tTime),t},yA=function(t,i){return(Ls.ScrollTrigger||Yx("scrollTrigger",i))&&Ls.ScrollTrigger.create(i,t)},TA=function(t,i,f,y,C){if(Jx(t,i,C),!t._initted)return 1;if(!f&&t._pt&&!Dn&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&cA!==As.frame)return Lo.push(t),t._lazy=[C,y],1},T6=function v(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||v(i))},Lg=function(t){var i=t.data;return i==="isFromStart"||i==="isStart"},E6=function(t,i,f,y){var C=t.ratio,o=i<0||!i&&(!t._start&&T6(t)&&!(!t._initted&&Lg(t))||(t._ts<0||t._dp._ts<0)&&!Lg(t))?0:1,E=t._rDelay,e=0,a,x,u;if(E&&t._repeat&&(e=Zc(0,t._tDur,i),x=Du(e,E),t._yoyo&&x&1&&(o=1-o),x!==Du(t._tTime,E)&&(C=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==C||Dn||y||t._zTime===Ti||!i&&t._zTime){if(!t._initted&&TA(t,i,y,f,e))return;for(u=t._zTime,t._zTime=i||(f?Ti:0),f||(f=i&&!u),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=e,a=t._pt;a;)a.r(o,a.d),a=a._next;i<0&&Ig(t,i,f,!0),t._onUpdate&&!f&&ws(t,"onUpdate"),e&&t._repeat&&!f&&t.parent&&ws(t,"onRepeat"),(i>=t._tDur||i<0)&&t.ratio===o&&(o&&Go(t,1),!f&&!Dn&&(ws(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=i)},S6=function(t,i,f){var y;if(f>i)for(y=t._first;y&&y._start<=f;){if(y.data==="isPause"&&y._start>i)return y;y=y._next}else for(y=t._last;y&&y._start>=f;){if(y.data==="isPause"&&y._start<i)return y;y=y._prev}},Ou=function(t,i,f,y){var C=t._repeat,o=Oi(i)||0,E=t._tTime/t._tDur;return E&&!y&&(t._time*=o/t._dur),t._dur=o,t._tDur=C?C<0?1e10:Oi(o*(C+1)+t._rDelay*C):o,E>0&&!y&&bv(t,t._tTime=t._tDur*E),t.parent&&Pv(t),f||zl(t.parent,t),t},vE=function(t){return t instanceof Qn?zl(t):Ou(t,t._dur)},C6={_start:0,endTime:xc,totalDuration:xc},Gs=function v(t,i,f){var y=t.labels,C=t._recent||C6,o=t.duration()>=Ks?C.endTime(!1):t._dur,E,e,a;return An(i)&&(isNaN(i)||i in y)?(e=i.charAt(0),a=i.substr(-1)==="%",E=i.indexOf("="),e==="<"||e===">"?(E>=0&&(i=i.replace(/=/,"")),(e==="<"?C._start:C.endTime(C._repeat>=0))+(parseFloat(i.substr(1))||0)*(a?(E<0?C:f).totalDuration()/100:1)):E<0?(i in y||(y[i]=o),y[i]):(e=parseFloat(i.charAt(E-1)+i.substr(E+1)),a&&f&&(e=e/100*(kn(f)?f[0]:f).totalDuration()),E>1?v(t,i.substr(0,E-1),f)+e:o+e)):i==null?o:+i},rc=function(t,i,f){var y=_a(i[1]),C=(y?2:1)+(t<2?0:1),o=i[C],E,e;if(y&&(o.duration=i[1]),o.parent=f,t){for(E=o,e=f;e&&!("immediateRender"in E);)E=e.vars.defaults||{},e=cs(e.vars.inherit)&&e.parent;o.immediateRender=cs(E.immediateRender),t<2?o.runBackwards=1:o.startAt=i[C-1]}return new rn(i[0],o,i[C+1])},Jo=function(t,i){return t||t===0?i(t):i},Zc=function(t,i,f){return f<t?t:f>i?i:f},Xn=function(t,i){return!An(t)||!(i=c6.exec(t))?"":i[1]},A6=function(t,i,f){return Jo(f,function(y){return Zc(t,i,y)})},Fg=[].slice,EA=function(t,i){return t&&ta(t)&&"length"in t&&(!i&&!t.length||t.length-1 in t&&ta(t[0]))&&!t.nodeType&&t!==Nr},w6=function(t,i,f){return f===void 0&&(f=[]),t.forEach(function(y){var C;return An(y)&&!i||EA(y,1)?(C=f).push.apply(C,js(y)):f.push(y)})||f},js=function(t,i,f){return Li&&!i&&Li.selector?Li.selector(t):An(t)&&!f&&(Pg||!Nu())?Fg.call((i||Xx).querySelectorAll(t),0):kn(t)?w6(t,f):EA(t)?Fg.call(t,0):t?[t]:[]},Dg=function(t){return t=js(t)[0]||gc("Invalid scope")||{},function(i){var f=t.current||t.nativeElement||t;return js(i,f.querySelectorAll?f:f===t?gc("Invalid scope")||Xx.createElement("div"):t)}},SA=function(t){return t.sort(function(){return .5-Math.random()})},CA=function(t){if(_i(t))return t;var i=ta(t)?t:{each:t},f=Gl(i.ease),y=i.from||0,C=parseFloat(i.base)||0,o={},E=y>0&&y<1,e=isNaN(y)||E,a=i.axis,x=y,u=y;return An(y)?x=u={center:.5,edges:.5,end:1}[y]||0:!E&&e&&(x=y[0],u=y[1]),function(r,h,n){var l=(n||i).length,c=o[l],s,d,m,p,g,T,S,w,A;if(!c){if(A=i.grid==="auto"?0:(i.grid||[1,Ks])[1],!A){for(S=-Ks;S<(S=n[A++].getBoundingClientRect().left)&&A<l;);A<l&&A--}for(c=o[l]=[],s=e?Math.min(A,l)*x-.5:y%A,d=A===Ks?0:e?l*u/A-.5:y/A|0,S=0,w=Ks,T=0;T<l;T++)m=T%A-s,p=d-(T/A|0),c[T]=g=a?Math.abs(a==="y"?p:m):rA(m*m+p*p),g>S&&(S=g),g<w&&(w=g);y==="random"&&SA(c),c.max=S-w,c.min=w,c.v=l=(parseFloat(i.amount)||parseFloat(i.each)*(A>l?l-1:a?a==="y"?l/A:A:Math.max(A,l/A))||0)*(y==="edges"?-1:1),c.b=l<0?C-l:C,c.u=Xn(i.amount||i.each)||0,f=f&&l<0?DA(f):f}return l=(c[r]-c.min)/c.max||0,Oi(c.b+(f?f(l):l)*c.v)+c.u}},Og=function(t){var i=Math.pow(10,((t+"").split(".")[1]||"").length);return function(f){var y=Oi(Math.round(parseFloat(f)/t)*t*i);return(y-y%1)/i+(_a(f)?0:Xn(f))}},AA=function(t,i){var f=kn(t),y,C;return!f&&ta(t)&&(y=f=t.radius||Ks,t.values?(t=js(t.values),(C=!_a(t[0]))&&(y*=y)):t=Og(t.increment)),Jo(i,f?_i(t)?function(o){return C=t(o),Math.abs(C-o)<=y?C:o}:function(o){for(var E=parseFloat(C?o.x:o),e=parseFloat(C?o.y:0),a=Ks,x=0,u=t.length,r,h;u--;)C?(r=t[u].x-E,h=t[u].y-e,r=r*r+h*h):r=Math.abs(t[u]-E),r<a&&(a=r,x=u);return x=!y||a<=y?t[x]:o,C||x===o||_a(o)?x:x+Xn(o)}:Og(t))},wA=function(t,i,f,y){return Jo(kn(t)?!i:f===!0?!!(f=0):!y,function(){return kn(t)?t[~~(Math.random()*t.length)]:(f=f||1e-5)&&(y=f<1?Math.pow(10,(f+"").length-2):1)&&Math.floor(Math.round((t-f/2+Math.random()*(i-t+f*.99))/f)*f*y)/y})},M6=function(){for(var t=arguments.length,i=new Array(t),f=0;f<t;f++)i[f]=arguments[f];return function(y){return i.reduce(function(C,o){return o(C)},y)}},R6=function(t,i){return function(f){return t(parseFloat(f))+(i||Xn(f))}},P6=function(t,i,f){return RA(t,i,0,1,f)},MA=function(t,i,f){return Jo(f,function(y){return t[~~i(y)]})},b6=function v(t,i,f){var y=i-t;return kn(t)?MA(t,v(0,t.length),i):Jo(f,function(C){return(y+(C-t)%y)%y+t})},I6=function v(t,i,f){var y=i-t,C=y*2;return kn(t)?MA(t,v(0,t.length-1),i):Jo(f,function(o){return o=(C+(o-t)%C)%C||0,t+(o>y?C-o:o)})},yc=function(t){return t.replace(h6,function(i){var f=i.indexOf("[")+1,y=i.substring(f||7,f?i.indexOf("]"):i.length-1).split(u6);return wA(f?y:+y[0],f?0:+y[1],+y[2]||1e-5)})},RA=function(t,i,f,y,C){var o=i-t,E=y-f;return Jo(C,function(e){return f+((e-t)/o*E||0)})},L6=function v(t,i,f,y){var C=isNaN(t+i)?0:function(h){return(1-h)*t+h*i};if(!C){var o=An(t),E={},e,a,x,u,r;if(f===!0&&(y=1)&&(f=null),o)t={p:t},i={p:i};else if(kn(t)&&!kn(i)){for(x=[],u=t.length,r=u-2,a=1;a<u;a++)x.push(v(t[a-1],t[a]));u--,C=function(n){n*=u;var l=Math.min(r,~~n);return x[l](n-l)},f=i}else y||(t=Fu(kn(t)?[]:{},t));if(!x){for(e in i)Zx.call(E,t,e,"get",i[e]);C=function(n){return ty(n,E)||(o?t.p:t)}}}return Jo(f,C)},mE=function(t,i,f){var y=t.labels,C=Ks,o,E,e;for(o in y)E=y[o]-i,E<0==!!f&&E&&C>(E=Math.abs(E))&&(e=o,C=E);return e},ws=function(t,i,f){var y=t.vars,C=y[i],o=Li,E=t._ctx,e,a,x;if(C)return e=y[i+"Params"],a=y.callbackScope||t,f&&Lo.length&&Hp(),E&&(Li=E),x=e?C.apply(a,e):C.call(a),Li=o,x},kf=function(t){return Go(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Dn),t.progress()<1&&ws(t,"onInterrupt"),t},Jh,PA=[],bA=function(t){if(t)if(t=!t.name&&t.default||t,_x()||t.headless){var i=t.name,f=_i(t),y=i&&!f&&t.init?function(){this._props=[]}:t,C={init:xc,render:ty,add:Zx,kill:$6,modifier:k6,rawVars:0},o={targetTest:0,get:0,getSetter:qx,aliases:{},register:0};if(Nu(),t!==y){if(Ss[i])return;Fs(y,Fs(_p(t,C),o)),Fu(y.prototype,Fu(C,_p(t,o))),Ss[y.prop=i]=y,t.targetTest&&(yp.push(y),kx[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}fA(i,y),t.register&&t.register(ms,y,ps)}else PA.push(t)},yi=255,$f={aqua:[0,yi,yi],lime:[0,yi,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,yi],navy:[0,0,128],white:[yi,yi,yi],olive:[128,128,0],yellow:[yi,yi,0],orange:[yi,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[yi,0,0],pink:[yi,192,203],cyan:[0,yi,yi],transparent:[yi,yi,yi,0]},Zm=function(t,i,f){return t+=t<0?1:t>1?-1:0,(t*6<1?i+(f-i)*t*6:t<.5?f:t*3<2?i+(f-i)*(2/3-t)*6:i)*yi+.5|0},IA=function(t,i,f){var y=t?_a(t)?[t>>16,t>>8&yi,t&yi]:0:$f.black,C,o,E,e,a,x,u,r,h,n;if(!y){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),$f[t])y=$f[t];else if(t.charAt(0)==="#"){if(t.length<6&&(C=t.charAt(1),o=t.charAt(2),E=t.charAt(3),t="#"+C+C+o+o+E+E+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return y=parseInt(t.substr(1,6),16),[y>>16,y>>8&yi,y&yi,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),y=[t>>16,t>>8&yi,t&yi]}else if(t.substr(0,3)==="hsl"){if(y=n=t.match(fE),!i)e=+y[0]%360/360,a=+y[1]/100,x=+y[2]/100,o=x<=.5?x*(a+1):x+a-x*a,C=x*2-o,y.length>3&&(y[3]*=1),y[0]=Zm(e+1/3,C,o),y[1]=Zm(e,C,o),y[2]=Zm(e-1/3,C,o);else if(~t.indexOf("="))return y=t.match(oA),f&&y.length<4&&(y[3]=1),y}else y=t.match(fE)||$f.transparent;y=y.map(Number)}return i&&!n&&(C=y[0]/yi,o=y[1]/yi,E=y[2]/yi,u=Math.max(C,o,E),r=Math.min(C,o,E),x=(u+r)/2,u===r?e=a=0:(h=u-r,a=x>.5?h/(2-u-r):h/(u+r),e=u===C?(o-E)/h+(o<E?6:0):u===o?(E-C)/h+2:(C-o)/h+4,e*=60),y[0]=~~(e+.5),y[1]=~~(a*100+.5),y[2]=~~(x*100+.5)),f&&y.length<4&&(y[3]=1),y},LA=function(t){var i=[],f=[],y=-1;return t.split(Fo).forEach(function(C){var o=C.match(Zh)||[];i.push.apply(i,o),f.push(y+=o.length+1)}),i.c=f,i},gE=function(t,i,f){var y="",C=(t+y).match(Fo),o=i?"hsla(":"rgba(",E=0,e,a,x,u;if(!C)return t;if(C=C.map(function(r){return(r=IA(r,i,1))&&o+(i?r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:r.join(","))+")"}),f&&(x=LA(t),e=f.c,e.join(y)!==x.c.join(y)))for(a=t.replace(Fo,"1").split(Zh),u=a.length-1;E<u;E++)y+=a[E]+(~e.indexOf(E)?C.shift()||o+"0,0,0,0)":(x.length?x:C.length?C:f).shift());if(!a)for(a=t.split(Fo),u=a.length-1;E<u;E++)y+=a[E]+C[E];return y+a[u]},Fo=(function(){var v="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in $f)v+="|"+t+"\\b";return new RegExp(v+")","gi")})(),F6=/hsl[a]?\(/,FA=function(t){var i=t.join(" "),f;if(Fo.lastIndex=0,Fo.test(i))return f=F6.test(i),t[1]=gE(t[1],f),t[0]=gE(t[0],f,LA(t[1])),!0},Tc,As=(function(){var v=Date.now,t=500,i=33,f=v(),y=f,C=1e3/240,o=C,E=[],e,a,x,u,r,h,n=function l(c){var s=v()-y,d=c===!0,m,p,g,T;if((s>t||s<0)&&(f+=s-i),y+=s,g=y-f,m=g-o,(m>0||d)&&(T=++u.frame,r=g-u.time*1e3,u.time=g=g/1e3,o+=m+(m>=C?4:C-m),p=1),d||(e=a(l)),p)for(h=0;h<E.length;h++)E[h](g,r,T,c)};return u={time:0,frame:0,tick:function(){n(!0)},deltaRatio:function(c){return r/(1e3/(c||60))},wake:function(){hA&&(!Pg&&_x()&&(Nr=Pg=window,Xx=Nr.document||{},Ls.gsap=ms,(Nr.gsapVersions||(Nr.gsapVersions=[])).push(ms.version),uA(Wp||Nr.GreenSockGlobals||!Nr.gsap&&Nr||{}),PA.forEach(bA)),x=typeof requestAnimationFrame<"u"&&requestAnimationFrame,e&&u.sleep(),a=x||function(c){return setTimeout(c,o-u.time*1e3+1|0)},Tc=1,n(2))},sleep:function(){(x?cancelAnimationFrame:clearTimeout)(e),Tc=0,a=xc},lagSmoothing:function(c,s){t=c||1/0,i=Math.min(s||33,t)},fps:function(c){C=1e3/(c||240),o=u.time*1e3+C},add:function(c,s,d){var m=s?function(p,g,T,S){c(p,g,T,S),u.remove(m)}:c;return u.remove(c),E[d?"unshift":"push"](m),Nu(),m},remove:function(c,s){~(s=E.indexOf(c))&&E.splice(s,1)&&h>=s&&h--},_listeners:E},u})(),Nu=function(){return!Tc&&As.wake()},ti={},D6=/^[\d.\-M][\d.\-,\s]/,O6=/["']/g,N6=function(t){for(var i={},f=t.substr(1,t.length-3).split(":"),y=f[0],C=1,o=f.length,E,e,a;C<o;C++)e=f[C],E=C!==o-1?e.lastIndexOf(","):e.length,a=e.substr(0,E),i[y]=isNaN(a)?a.replace(O6,"").trim():+a,y=e.substr(E+1).trim();return i},B6=function(t){var i=t.indexOf("(")+1,f=t.indexOf(")"),y=t.indexOf("(",i);return t.substring(i,~y&&y<f?t.indexOf(")",f+1):f)},U6=function(t){var i=(t+"").split("("),f=ti[i[0]];return f&&i.length>1&&f.config?f.config.apply(null,~t.indexOf("{")?[N6(i[1])]:B6(t).split(",").map(vA)):ti._CE&&D6.test(t)?ti._CE("",t):f},DA=function(t){return function(i){return 1-t(1-i)}},OA=function v(t,i){for(var f=t._first,y;f;)f instanceof Qn?v(f,i):f.vars.yoyoEase&&(!f._yoyo||!f._repeat)&&f._yoyo!==i&&(f.timeline?v(f.timeline,i):(y=f._ease,f._ease=f._yEase,f._yEase=y,f._yoyo=i)),f=f._next},Gl=function(t,i){return t&&(_i(t)?t:ti[t]||U6(t))||i},nh=function(t,i,f,y){f===void 0&&(f=function(e){return 1-i(1-e)}),y===void 0&&(y=function(e){return e<.5?i(e*2)/2:1-i((1-e)*2)/2});var C={easeIn:i,easeOut:f,easeInOut:y},o;return ds(t,function(E){ti[E]=Ls[E]=C,ti[o=E.toLowerCase()]=f;for(var e in C)ti[o+(e==="easeIn"?".in":e==="easeOut"?".out":".inOut")]=ti[E+"."+e]=C[e]}),C},NA=function(t){return function(i){return i<.5?(1-t(1-i*2))/2:.5+t((i-.5)*2)/2}},Jm=function v(t,i,f){var y=i>=1?i:1,C=(f||(t?.3:.45))/(i<1?i:1),o=C/Rg*(Math.asin(1/y)||0),E=function(x){return x===1?1:y*Math.pow(2,-10*x)*l6((x-o)*C)+1},e=t==="out"?E:t==="in"?function(a){return 1-E(1-a)}:NA(E);return C=Rg/C,e.config=function(a,x){return v(t,a,x)},e},Qm=function v(t,i){i===void 0&&(i=1.70158);var f=function(o){return o?--o*o*((i+1)*o+i)+1:0},y=t==="out"?f:t==="in"?function(C){return 1-f(1-C)}:NA(f);return y.config=function(C){return v(t,C)},y};ds("Linear,Quad,Cubic,Quart,Quint,Strong",function(v,t){var i=t<5?t+1:t;nh(v+",Power"+(i-1),t?function(f){return Math.pow(f,i)}:function(f){return f},function(f){return 1-Math.pow(1-f,i)},function(f){return f<.5?Math.pow(f*2,i)/2:1-Math.pow((1-f)*2,i)/2})});ti.Linear.easeNone=ti.none=ti.Linear.easeIn;nh("Elastic",Jm("in"),Jm("out"),Jm());(function(v,t){var i=1/t,f=2*i,y=2.5*i,C=function(E){return E<i?v*E*E:E<f?v*Math.pow(E-1.5/t,2)+.75:E<y?v*(E-=2.25/t)*E+.9375:v*Math.pow(E-2.625/t,2)+.984375};nh("Bounce",function(o){return 1-C(1-o)},C)})(7.5625,2.75);nh("Expo",function(v){return Math.pow(2,10*(v-1))*v+v*v*v*v*v*v*(1-v)});nh("Circ",function(v){return-(rA(1-v*v)-1)});nh("Sine",function(v){return v===1?1:-o6(v*r6)+1});nh("Back",Qm("in"),Qm("out"),Qm());ti.SteppedEase=ti.steps=Ls.SteppedEase={config:function(t,i){t===void 0&&(t=1);var f=1/t,y=t+(i?0:1),C=i?1:0,o=1-Ti;return function(E){return((y*Zc(0,o,E)|0)+C)*f}}};Lu.ease=ti["quad.out"];ds("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(v){return $x+=v+","+v+"Params,"});var BA=function(t,i){this.id=a6++,t._gsap=this,this.target=t,this.harness=i,this.get=i?i.get:dA,this.set=i?i.getSetter:qx},Ec=(function(){function v(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,Ou(this,+i.duration,1,1),this.data=i.data,Li&&(this._ctx=Li,Li.data.push(this)),Tc||As.wake()}var t=v.prototype;return t.delay=function(f){return f||f===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+f-this._delay),this._delay=f,this):this._delay},t.duration=function(f){return arguments.length?this.totalDuration(this._repeat>0?f+(f+this._rDelay)*this._repeat:f):this.totalDuration()&&this._dur},t.totalDuration=function(f){return arguments.length?(this._dirty=0,Ou(this,this._repeat<0?f:(f-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(f,y){if(Nu(),!arguments.length)return this._tTime;var C=this._dp;if(C&&C.smoothChildTiming&&this._ts){for(bv(this,f),!C._dp||C.parent||xA(C,this);C&&C.parent;)C.parent._time!==C._start+(C._ts>=0?C._tTime/C._ts:(C.totalDuration()-C._tTime)/-C._ts)&&C.totalTime(C._tTime,!0),C=C.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&f<this._tDur||this._ts<0&&f>0||!this._tDur&&!f)&&Hr(this._dp,this,this._start-this._delay)}return(this._tTime!==f||!this._dur&&!y||this._initted&&Math.abs(this._zTime)===Ti||!this._initted&&this._dur&&f||!f&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=f),pA(this,f,y)),this},t.time=function(f,y){return arguments.length?this.totalTime(Math.min(this.totalDuration(),f+pE(this))%(this._dur+this._rDelay)||(f?this._dur:0),y):this._time},t.totalProgress=function(f,y){return arguments.length?this.totalTime(this.totalDuration()*f,y):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(f,y){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-f:f)+pE(this),y):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(f,y){var C=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(f-1)*C,y):this._repeat?Du(this._tTime,C)+1:1},t.timeScale=function(f,y){if(!arguments.length)return this._rts===-Ti?0:this._rts;if(this._rts===f)return this;var C=this.parent&&this._ts?Xp(this.parent._time,this):this._tTime;return this._rts=+f||0,this._ts=this._ps||f===-Ti?0:this._rts,this.totalTime(Zc(-Math.abs(this._delay),this.totalDuration(),C),y!==!1),Pv(this),x6(this)},t.paused=function(f){return arguments.length?(this._ps!==f&&(this._ps=f,f?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Nu(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ti&&(this._tTime-=Ti)))),this):this._ps},t.startTime=function(f){if(arguments.length){this._start=Oi(f);var y=this.parent||this._dp;return y&&(y._sort||!this.parent)&&Hr(y,this,this._start-this._delay),this}return this._start},t.endTime=function(f){return this._start+(cs(f)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(f){var y=this.parent||this._dp;return y?f&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Xp(y.rawTime(f),this):this._tTime:this._tTime},t.revert=function(f){f===void 0&&(f=p6);var y=Dn;return Dn=f,jx(this)&&(this.timeline&&this.timeline.revert(f),this.totalTime(-.01,f.suppressEvents)),this.data!=="nested"&&f.kill!==!1&&this.kill(),Dn=y,this},t.globalTime=function(f){for(var y=this,C=arguments.length?f:y.rawTime();y;)C=y._start+C/(Math.abs(y._ts)||1),y=y._dp;return!this.parent&&this._sat?this._sat.globalTime(f):C},t.repeat=function(f){return arguments.length?(this._repeat=f===1/0?-2:f,vE(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(f){if(arguments.length){var y=this._time;return this._rDelay=f,vE(this),y?this.time(y):this}return this._rDelay},t.yoyo=function(f){return arguments.length?(this._yoyo=f,this):this._yoyo},t.seek=function(f,y){return this.totalTime(Gs(this,f),cs(y))},t.restart=function(f,y){return this.play().totalTime(f?-this._delay:0,cs(y)),this._dur||(this._zTime=-Ti),this},t.play=function(f,y){return f!=null&&this.seek(f,y),this.reversed(!1).paused(!1)},t.reverse=function(f,y){return f!=null&&this.seek(f||this.totalDuration(),y),this.reversed(!0).paused(!1)},t.pause=function(f,y){return f!=null&&this.seek(f,y),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(f){return arguments.length?(!!f!==this.reversed()&&this.timeScale(-this._rts||(f?-Ti:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ti,this},t.isActive=function(){var f=this.parent||this._dp,y=this._start,C;return!!(!f||this._ts&&this._initted&&f.isActive()&&(C=f.rawTime(!0))>=y&&C<this.endTime(!0)-Ti)},t.eventCallback=function(f,y,C){var o=this.vars;return arguments.length>1?(y?(o[f]=y,C&&(o[f+"Params"]=C),f==="onUpdate"&&(this._onUpdate=y)):delete o[f],this):o[f]},t.then=function(f){var y=this,C=y._prom;return new Promise(function(o){var E=_i(f)?f:mA,e=function(){var x=y.then;y.then=null,C&&C(),_i(E)&&(E=E(y))&&(E.then||E===y)&&(y.then=x),o(E),y.then=x};y._initted&&y.totalProgress()===1&&y._ts>=0||!y._tTime&&y._ts<0?e():y._prom=e})},t.kill=function(){kf(this)},v})();Fs(Ec.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ti,_prom:0,_ps:!1,_rts:1});var Qn=(function(v){sA(t,v);function t(f,y){var C;return f===void 0&&(f={}),C=v.call(this,f)||this,C.labels={},C.smoothChildTiming=!!f.smoothChildTiming,C.autoRemoveChildren=!!f.autoRemoveChildren,C._sort=cs(f.sortChildren),Ni&&Hr(f.parent||Ni,Sa(C),y),f.reversed&&C.reverse(),f.paused&&C.paused(!0),f.scrollTrigger&&yA(Sa(C),f.scrollTrigger),C}var i=t.prototype;return i.to=function(y,C,o){return rc(0,arguments,this),this},i.from=function(y,C,o){return rc(1,arguments,this),this},i.fromTo=function(y,C,o,E){return rc(2,arguments,this),this},i.set=function(y,C,o){return C.duration=0,C.parent=this,sc(C).repeatDelay||(C.repeat=0),C.immediateRender=!!C.immediateRender,new rn(y,C,Gs(this,o),1),this},i.call=function(y,C,o){return Hr(this,rn.delayedCall(0,y,C),o)},i.staggerTo=function(y,C,o,E,e,a,x){return o.duration=C,o.stagger=o.stagger||E,o.onComplete=a,o.onCompleteParams=x,o.parent=this,new rn(y,o,Gs(this,e)),this},i.staggerFrom=function(y,C,o,E,e,a,x){return o.runBackwards=1,sc(o).immediateRender=cs(o.immediateRender),this.staggerTo(y,C,o,E,e,a,x)},i.staggerFromTo=function(y,C,o,E,e,a,x,u){return E.startAt=o,sc(E).immediateRender=cs(E.immediateRender),this.staggerTo(y,C,E,e,a,x,u)},i.render=function(y,C,o){var E=this._time,e=this._dirty?this.totalDuration():this._tDur,a=this._dur,x=y<=0?0:Oi(y),u=this._zTime<0!=y<0&&(this._initted||!a),r,h,n,l,c,s,d,m,p,g,T,S;if(this!==Ni&&x>e&&y>=0&&(x=e),x!==this._tTime||o||u){if(E!==this._time&&a&&(x+=this._time-E,y+=this._time-E),r=x,p=this._start,m=this._ts,s=!m,u&&(a||(E=this._zTime),(y||!C)&&(this._zTime=y)),this._repeat){if(T=this._yoyo,c=a+this._rDelay,this._repeat<-1&&y<0)return this.totalTime(c*100+y,C,o);if(r=Oi(x%c),x===e?(l=this._repeat,r=a):(g=Oi(x/c),l=~~g,l&&l===g&&(r=a,l--),r>a&&(r=a)),g=Du(this._tTime,c),!E&&this._tTime&&g!==l&&this._tTime-g*c-this._dur<=0&&(g=l),T&&l&1&&(r=a-r,S=1),l!==g&&!this._lock){var w=T&&g&1,A=w===(T&&l&1);if(l<g&&(w=!w),E=w?0:x%a?a:x,this._lock=1,this.render(E||(S?0:Oi(l*c)),C,!a)._lock=0,this._tTime=x,!C&&this.parent&&ws(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1,g=l),E&&E!==this._time||s!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(a=this._dur,e=this._tDur,A&&(this._lock=2,E=w?a:-1e-4,this.render(E,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!s)return this;OA(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(d=S6(this,Oi(E),Oi(r)),d&&(x-=r-(r=d._start))),this._tTime=x,this._time=r,this._act=!m,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=y,E=0),!E&&x&&a&&!C&&!g&&(ws(this,"onStart"),this._tTime!==x))return this;if(r>=E&&y>=0)for(h=this._first;h;){if(n=h._next,(h._act||r>=h._start)&&h._ts&&d!==h){if(h.parent!==this)return this.render(y,C,o);if(h.render(h._ts>0?(r-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(r-h._start)*h._ts,C,o),r!==this._time||!this._ts&&!s){d=0,n&&(x+=this._zTime=-Ti);break}}h=n}else{h=this._last;for(var M=y<0?y:r;h;){if(n=h._prev,(h._act||M<=h._end)&&h._ts&&d!==h){if(h.parent!==this)return this.render(y,C,o);if(h.render(h._ts>0?(M-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(M-h._start)*h._ts,C,o||Dn&&jx(h)),r!==this._time||!this._ts&&!s){d=0,n&&(x+=this._zTime=M?-Ti:Ti);break}}h=n}}if(d&&!C&&(this.pause(),d.render(r>=E?0:-Ti)._zTime=r>=E?1:-1,this._ts))return this._start=p,Pv(this),this.render(y,C,o);this._onUpdate&&!C&&ws(this,"onUpdate",!0),(x===e&&this._tTime>=this.totalDuration()||!x&&E)&&(p===this._start||Math.abs(m)!==Math.abs(this._ts))&&(this._lock||((y||!a)&&(x===e&&this._ts>0||!x&&this._ts<0)&&Go(this,1),!C&&!(y<0&&!E)&&(x||E||!e)&&(ws(this,x===e&&y>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(x<e&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(y,C){var o=this;if(_a(C)||(C=Gs(this,C,y)),!(y instanceof Ec)){if(kn(y))return y.forEach(function(E){return o.add(E,C)}),this;if(An(y))return this.addLabel(y,C);if(_i(y))y=rn.delayedCall(0,y);else return this}return this!==y?Hr(this,y,C):this},i.getChildren=function(y,C,o,E){y===void 0&&(y=!0),C===void 0&&(C=!0),o===void 0&&(o=!0),E===void 0&&(E=-Ks);for(var e=[],a=this._first;a;)a._start>=E&&(a instanceof rn?C&&e.push(a):(o&&e.push(a),y&&e.push.apply(e,a.getChildren(!0,C,o)))),a=a._next;return e},i.getById=function(y){for(var C=this.getChildren(1,1,1),o=C.length;o--;)if(C[o].vars.id===y)return C[o]},i.remove=function(y){return An(y)?this.removeLabel(y):_i(y)?this.killTweensOf(y):(y.parent===this&&Rv(this,y),y===this._recent&&(this._recent=this._last),zl(this))},i.totalTime=function(y,C){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Oi(As.time-(this._ts>0?y/this._ts:(this.totalDuration()-y)/-this._ts))),v.prototype.totalTime.call(this,y,C),this._forcing=0,this):this._tTime},i.addLabel=function(y,C){return this.labels[y]=Gs(this,C),this},i.removeLabel=function(y){return delete this.labels[y],this},i.addPause=function(y,C,o){var E=rn.delayedCall(0,C||xc,o);return E.data="isPause",this._hasPause=1,Hr(this,E,Gs(this,y))},i.removePause=function(y){var C=this._first;for(y=Gs(this,y);C;)C._start===y&&C.data==="isPause"&&Go(C),C=C._next},i.killTweensOf=function(y,C,o){for(var E=this.getTweensOf(y,o),e=E.length;e--;)So!==E[e]&&E[e].kill(y,C);return this},i.getTweensOf=function(y,C){for(var o=[],E=js(y),e=this._first,a=_a(C),x;e;)e instanceof rn?v6(e._targets,E)&&(a?(!So||e._initted&&e._ts)&&e.globalTime(0)<=C&&e.globalTime(e.totalDuration())>C:!C||e.isActive())&&o.push(e):(x=e.getTweensOf(E,C)).length&&o.push.apply(o,x),e=e._next;return o},i.tweenTo=function(y,C){C=C||{};var o=this,E=Gs(o,y),e=C,a=e.startAt,x=e.onStart,u=e.onStartParams,r=e.immediateRender,h,n=rn.to(o,Fs({ease:C.ease||"none",lazy:!1,immediateRender:!1,time:E,overwrite:"auto",duration:C.duration||Math.abs((E-(a&&"time"in a?a.time:o._time))/o.timeScale())||Ti,onStart:function(){if(o.pause(),!h){var c=C.duration||Math.abs((E-(a&&"time"in a?a.time:o._time))/o.timeScale());n._dur!==c&&Ou(n,c,0,1).render(n._time,!0,!0),h=1}x&&x.apply(n,u||[])}},C));return r?n.render(0):n},i.tweenFromTo=function(y,C,o){return this.tweenTo(C,Fs({startAt:{time:Gs(this,y)}},o))},i.recent=function(){return this._recent},i.nextLabel=function(y){return y===void 0&&(y=this._time),mE(this,Gs(this,y))},i.previousLabel=function(y){return y===void 0&&(y=this._time),mE(this,Gs(this,y),1)},i.currentLabel=function(y){return arguments.length?this.seek(y,!0):this.previousLabel(this._time+Ti)},i.shiftChildren=function(y,C,o){o===void 0&&(o=0);var E=this._first,e=this.labels,a;for(y=Oi(y);E;)E._start>=o&&(E._start+=y,E._end+=y),E=E._next;if(C)for(a in e)e[a]>=o&&(e[a]+=y);return zl(this)},i.invalidate=function(y){var C=this._first;for(this._lock=0;C;)C.invalidate(y),C=C._next;return v.prototype.invalidate.call(this,y)},i.clear=function(y){y===void 0&&(y=!0);for(var C=this._first,o;C;)o=C._next,this.remove(C),C=o;return this._dp&&(this._time=this._tTime=this._pTime=0),y&&(this.labels={}),zl(this)},i.totalDuration=function(y){var C=0,o=this,E=o._last,e=Ks,a,x,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-y:y));if(o._dirty){for(u=o.parent;E;)a=E._prev,E._dirty&&E.totalDuration(),x=E._start,x>e&&o._sort&&E._ts&&!o._lock?(o._lock=1,Hr(o,E,x-E._delay,1)._lock=0):e=x,x<0&&E._ts&&(C-=x,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=Oi(x/o._ts),o._time-=x,o._tTime-=x),o.shiftChildren(-x,!1,-1/0),e=0),E._end>C&&E._ts&&(C=E._end),E=a;Ou(o,o===Ni&&o._time>C?o._time:C,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(y){if(Ni._ts&&(pA(Ni,Xp(y,Ni)),cA=As.frame),As.frame>=cE){cE+=bs.autoSleep||120;var C=Ni._first;if((!C||!C._ts)&&bs.autoSleep&&As._listeners.length<2){for(;C&&!C._ts;)C=C._next;C||As.sleep()}}},t})(Ec);Fs(Qn.prototype,{_lock:0,_hasPause:0,_forcing:0});var V6=function(t,i,f,y,C,o,E){var e=new ps(this._pt,t,i,0,1,HA,null,C),a=0,x=0,u,r,h,n,l,c,s,d;for(e.b=f,e.e=y,f+="",y+="",(s=~y.indexOf("random("))&&(y=yc(y)),o&&(d=[f,y],o(d,t,i),f=d[0],y=d[1]),r=f.match(Km)||[];u=Km.exec(y);)n=u[0],l=y.substring(a,u.index),h?h=(h+1)%5:l.substr(-5)==="rgba("&&(h=1),n!==r[x++]&&(c=parseFloat(r[x-1])||0,e._pt={_next:e._pt,p:l||x===1?l:",",s:c,c:n.charAt(1)==="="?iu(c,n)-c:parseFloat(n)-c,m:h&&h<4?Math.round:0},a=Km.lastIndex);return e.c=a<y.length?y.substring(a,y.length):"",e.fp=E,(lA.test(y)||s)&&(e.e=0),this._pt=e,e},Zx=function(t,i,f,y,C,o,E,e,a,x){_i(y)&&(y=y(C||0,t,o));var u=t[i],r=f!=="get"?f:_i(u)?a?t[i.indexOf("set")||!_i(t["get"+i.substr(3)])?i:"get"+i.substr(3)](a):t[i]():u,h=_i(u)?a?_6:GA:Qx,n;if(An(y)&&(~y.indexOf("random(")&&(y=yc(y)),y.charAt(1)==="="&&(n=iu(r,y)+(Xn(r)||0),(n||n===0)&&(y=n))),!x||r!==y||Ng)return!isNaN(r*y)&&y!==""?(n=new ps(this._pt,t,i,+r||0,y-(r||0),typeof u=="boolean"?Y6:WA,0,h),a&&(n.fp=a),E&&n.modifier(E,this,t),this._pt=n):(!u&&!(i in t)&&Yx(i,y),V6.call(this,t,i,r,y,h,e||bs.stringFilter,a))},z6=function(t,i,f,y,C){if(_i(t)&&(t=ac(t,C,i,f,y)),!ta(t)||t.style&&t.nodeType||kn(t)||aA(t))return An(t)?ac(t,C,i,f,y):t;var o={},E;for(E in t)o[E]=ac(t[E],C,i,f,y);return o},UA=function(t,i,f,y,C,o){var E,e,a,x;if(Ss[t]&&(E=new Ss[t]).init(C,E.rawVars?i[t]:z6(i[t],y,C,o,f),f,y,o)!==!1&&(f._pt=e=new ps(f._pt,C,t,0,1,E.render,E,0,E.priority),f!==Jh))for(a=f._ptLookup[f._targets.indexOf(C)],x=E._props.length;x--;)a[E._props[x]]=e;return E},So,Ng,Jx=function v(t,i,f){var y=t.vars,C=y.ease,o=y.startAt,E=y.immediateRender,e=y.lazy,a=y.onUpdate,x=y.runBackwards,u=y.yoyoEase,r=y.keyframes,h=y.autoRevert,n=t._dur,l=t._startAt,c=t._targets,s=t.parent,d=s&&s.data==="nested"?s.vars.targets:c,m=t._overwrite==="auto"&&!Wx,p=t.timeline,g,T,S,w,A,M,R,P,b,F,I,L,D;if(p&&(!r||!C)&&(C="none"),t._ease=Gl(C,Lu.ease),t._yEase=u?DA(Gl(u===!0?C:u,Lu.ease)):0,u&&t._yoyo&&!t._repeat&&(u=t._yEase,t._yEase=t._ease,t._ease=u),t._from=!p&&!!y.runBackwards,!p||r&&!y.stagger){if(P=c[0]?Vl(c[0]).harness:0,L=P&&y[P.prop],g=_p(y,kx),l&&(l._zTime<0&&l.progress(1),i<0&&x&&E&&!h?l.render(-1,!0):l.revert(x&&n?xp:d6),l._lazy=0),o){if(Go(t._startAt=rn.set(c,Fs({data:"isStart",overwrite:!1,parent:s,immediateRender:!0,lazy:!l&&cs(e),startAt:null,delay:0,onUpdate:a&&function(){return ws(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,i<0&&(Dn||!E&&!h)&&t._startAt.revert(xp),E&&n&&i<=0&&f<=0){i&&(t._zTime=i);return}}else if(x&&n&&!l){if(i&&(E=!1),S=Fs({overwrite:!1,data:"isFromStart",lazy:E&&!l&&cs(e),immediateRender:E,stagger:0,parent:s},g),L&&(S[P.prop]=L),Go(t._startAt=rn.set(c,S)),t._startAt._dp=0,t._startAt._sat=t,i<0&&(Dn?t._startAt.revert(xp):t._startAt.render(-1,!0)),t._zTime=i,!E)v(t._startAt,Ti,Ti);else if(!i)return}for(t._pt=t._ptCache=0,e=n&&cs(e)||e&&!n,T=0;T<c.length;T++){if(A=c[T],R=A._gsap||Kx(c)[T]._gsap,t._ptLookup[T]=F={},bg[R.id]&&Lo.length&&Hp(),I=d===c?T:d.indexOf(A),P&&(b=new P).init(A,L||g,t,I,d)!==!1&&(t._pt=w=new ps(t._pt,A,b.name,0,1,b.render,b,0,b.priority),b._props.forEach(function(O){F[O]=w}),b.priority&&(M=1)),!P||L)for(S in g)Ss[S]&&(b=UA(S,g,t,I,A,d))?b.priority&&(M=1):F[S]=w=Zx.call(t,A,S,"get",g[S],I,d,0,y.stringFilter);t._op&&t._op[T]&&t.kill(A,t._op[T]),m&&t._pt&&(So=t,Ni.killTweensOf(A,F,t.globalTime(i)),D=!t.parent,So=0),t._pt&&e&&(bg[R.id]=1)}M&&_A(t),t._onInit&&t._onInit(t)}t._onUpdate=a,t._initted=(!t._op||t._pt)&&!D,r&&i<=0&&p.render(Ks,!0,!0)},G6=function(t,i,f,y,C,o,E,e){var a=(t._pt&&t._ptCache||(t._ptCache={}))[i],x,u,r,h;if(!a)for(a=t._ptCache[i]=[],r=t._ptLookup,h=t._targets.length;h--;){if(x=r[h][i],x&&x.d&&x.d._pt)for(x=x.d._pt;x&&x.p!==i&&x.fp!==i;)x=x._next;if(!x)return Ng=1,t.vars[i]="+=0",Jx(t,E),Ng=0,e?gc(i+" not eligible for reset"):1;a.push(x)}for(h=a.length;h--;)u=a[h],x=u._pt||u,x.s=(y||y===0)&&!C?y:x.s+(y||0)+o*x.c,x.c=f-x.s,u.e&&(u.e=ki(f)+Xn(u.e)),u.b&&(u.b=x.s+Xn(u.b))},W6=function(t,i){var f=t[0]?Vl(t[0]).harness:0,y=f&&f.aliases,C,o,E,e;if(!y)return i;C=Fu({},i);for(o in y)if(o in C)for(e=y[o].split(","),E=e.length;E--;)C[e[E]]=C[o];return C},H6=function(t,i,f,y){var C=i.ease||y||"power1.inOut",o,E;if(kn(i))E=f[t]||(f[t]=[]),i.forEach(function(e,a){return E.push({t:a/(i.length-1)*100,v:e,e:C})});else for(o in i)E=f[o]||(f[o]=[]),o==="ease"||E.push({t:parseFloat(t),v:i[o],e:C})},ac=function(t,i,f,y,C){return _i(t)?t.call(i,f,y,C):An(t)&&~t.indexOf("random(")?yc(t):t},VA=$x+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",zA={};ds(VA+",id,stagger,delay,duration,paused,scrollTrigger",function(v){return zA[v]=1});var rn=(function(v){sA(t,v);function t(f,y,C,o){var E;typeof y=="number"&&(C.duration=y,y=C,C=null),E=v.call(this,o?y:sc(y))||this;var e=E.vars,a=e.duration,x=e.delay,u=e.immediateRender,r=e.stagger,h=e.overwrite,n=e.keyframes,l=e.defaults,c=e.scrollTrigger,s=e.yoyoEase,d=y.parent||Ni,m=(kn(f)||aA(f)?_a(f[0]):"length"in y)?[f]:js(f),p,g,T,S,w,A,M,R;if(E._targets=m.length?Kx(m):gc("GSAP target "+f+" not found. https://gsap.com",!bs.nullTargetWarn)||[],E._ptLookup=[],E._overwrite=h,n||r||ep(a)||ep(x)){if(y=E.vars,p=E.timeline=new Qn({data:"nested",defaults:l||{},targets:d&&d.data==="nested"?d.vars.targets:m}),p.kill(),p.parent=p._dp=Sa(E),p._start=0,r||ep(a)||ep(x)){if(S=m.length,M=r&&CA(r),ta(r))for(w in r)~VA.indexOf(w)&&(R||(R={}),R[w]=r[w]);for(g=0;g<S;g++)T=_p(y,zA),T.stagger=0,s&&(T.yoyoEase=s),R&&Fu(T,R),A=m[g],T.duration=+ac(a,Sa(E),g,A,m),T.delay=(+ac(x,Sa(E),g,A,m)||0)-E._delay,!r&&S===1&&T.delay&&(E._delay=x=T.delay,E._start+=x,T.delay=0),p.to(A,T,M?M(g,A,m):0),p._ease=ti.none;p.duration()?a=x=0:E.timeline=0}else if(n){sc(Fs(p.vars.defaults,{ease:"none"})),p._ease=Gl(n.ease||y.ease||"none");var P=0,b,F,I;if(kn(n))n.forEach(function(L){return p.to(m,L,">")}),p.duration();else{T={};for(w in n)w==="ease"||w==="easeEach"||H6(w,n[w],T,n.easeEach);for(w in T)for(b=T[w].sort(function(L,D){return L.t-D.t}),P=0,g=0;g<b.length;g++)F=b[g],I={ease:F.e,duration:(F.t-(g?b[g-1].t:0))/100*a},I[w]=F.v,p.to(m,I,P),P+=I.duration;p.duration()<a&&p.to({},{duration:a-p.duration()})}}a||E.duration(a=p.duration())}else E.timeline=0;return h===!0&&!Wx&&(So=Sa(E),Ni.killTweensOf(m),So=0),Hr(d,Sa(E),C),y.reversed&&E.reverse(),y.paused&&E.paused(!0),(u||!a&&!n&&E._start===Oi(d._time)&&cs(u)&&y6(Sa(E))&&d.data!=="nested")&&(E._tTime=-Ti,E.render(Math.max(0,-x)||0)),c&&yA(Sa(E),c),E}var i=t.prototype;return i.render=function(y,C,o){var E=this._time,e=this._tDur,a=this._dur,x=y<0,u=y>e-Ti&&!x?e:y<Ti?0:y,r,h,n,l,c,s,d,m,p;if(!a)E6(this,y,C,o);else if(u!==this._tTime||!y||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==x||this._lazy){if(r=u,m=this.timeline,this._repeat){if(l=a+this._rDelay,this._repeat<-1&&x)return this.totalTime(l*100+y,C,o);if(r=Oi(u%l),u===e?(n=this._repeat,r=a):(c=Oi(u/l),n=~~c,n&&n===c?(r=a,n--):r>a&&(r=a)),s=this._yoyo&&n&1,s&&(p=this._yEase,r=a-r),c=Du(this._tTime,l),r===E&&!o&&this._initted&&n===c)return this._tTime=u,this;n!==c&&(m&&this._yEase&&OA(m,s),this.vars.repeatRefresh&&!s&&!this._lock&&r!==l&&this._initted&&(this._lock=o=1,this.render(Oi(l*n),!0).invalidate()._lock=0))}if(!this._initted){if(TA(this,x?y:r,o,C,u))return this._tTime=0,this;if(E!==this._time&&!(o&&this.vars.repeatRefresh&&n!==c))return this;if(a!==this._dur)return this.render(y,C,o)}if(this._tTime=u,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=d=(p||this._ease)(r/a),this._from&&(this.ratio=d=1-d),!E&&u&&!C&&!c&&(ws(this,"onStart"),this._tTime!==u))return this;for(h=this._pt;h;)h.r(d,h.d),h=h._next;m&&m.render(y<0?y:m._dur*m._ease(r/this._dur),C,o)||this._startAt&&(this._zTime=y),this._onUpdate&&!C&&(x&&Ig(this,y,C,o),ws(this,"onUpdate")),this._repeat&&n!==c&&this.vars.onRepeat&&!C&&this.parent&&ws(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(x&&!this._onUpdate&&Ig(this,y,!0,!0),(y||!a)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&Go(this,1),!C&&!(x&&!E)&&(u||E||s)&&(ws(this,u===e?"onComplete":"onReverseComplete",!0),this._prom&&!(u<e&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(y){return(!y||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(y),v.prototype.invalidate.call(this,y)},i.resetTo=function(y,C,o,E,e){Tc||As.wake(),this._ts||this.play();var a=Math.min(this._dur,(this._dp._time-this._start)*this._ts),x;return this._initted||Jx(this,a),x=this._ease(a/this._dur),G6(this,y,C,o,E,x,a,e)?this.resetTo(y,C,o,E,1):(bv(this,0),this.parent||gA(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(y,C){if(C===void 0&&(C="all"),!y&&(!C||C==="all"))return this._lazy=this._pt=0,this.parent?kf(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Dn),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(y,C,So&&So.vars.overwrite!==!0)._first||kf(this),this.parent&&o!==this.timeline.totalDuration()&&Ou(this,this._dur*this.timeline._tDur/o,0,1),this}var E=this._targets,e=y?js(y):E,a=this._ptLookup,x=this._pt,u,r,h,n,l,c,s;if((!C||C==="all")&&g6(E,e))return C==="all"&&(this._pt=0),kf(this);for(u=this._op=this._op||[],C!=="all"&&(An(C)&&(l={},ds(C,function(d){return l[d]=1}),C=l),C=W6(E,C)),s=E.length;s--;)if(~e.indexOf(E[s])){r=a[s],C==="all"?(u[s]=C,n=r,h={}):(h=u[s]=u[s]||{},n=C);for(l in n)c=r&&r[l],c&&((!("kill"in c.d)||c.d.kill(l)===!0)&&Rv(this,c,"_pt"),delete r[l]),h!=="all"&&(h[l]=1)}return this._initted&&!this._pt&&x&&kf(this),this},t.to=function(y,C){return new t(y,C,arguments[2])},t.from=function(y,C){return rc(1,arguments)},t.delayedCall=function(y,C,o,E){return new t(C,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:y,onComplete:C,onReverseComplete:C,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:E})},t.fromTo=function(y,C,o){return rc(2,arguments)},t.set=function(y,C){return C.duration=0,C.repeatDelay||(C.repeat=0),new t(y,C)},t.killTweensOf=function(y,C,o){return Ni.killTweensOf(y,C,o)},t})(Ec);Fs(rn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ds("staggerTo,staggerFrom,staggerFromTo",function(v){rn[v]=function(){var t=new Qn,i=Fg.call(arguments,0);return i.splice(v==="staggerFromTo"?5:4,0,0),t[v].apply(t,i)}});var Qx=function(t,i,f){return t[i]=f},GA=function(t,i,f){return t[i](f)},_6=function(t,i,f,y){return t[i](y.fp,f)},X6=function(t,i,f){return t.setAttribute(i,f)},qx=function(t,i){return _i(t[i])?GA:Hx(t[i])&&t.setAttribute?X6:Qx},WA=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e6)/1e6,i)},Y6=function(t,i){return i.set(i.t,i.p,!!(i.s+i.c*t),i)},HA=function(t,i){var f=i._pt,y="";if(!t&&i.b)y=i.b;else if(t===1&&i.e)y=i.e;else{for(;f;)y=f.p+(f.m?f.m(f.s+f.c*t):Math.round((f.s+f.c*t)*1e4)/1e4)+y,f=f._next;y+=i.c}i.set(i.t,i.p,y,i)},ty=function(t,i){for(var f=i._pt;f;)f.r(t,f.d),f=f._next},k6=function(t,i,f,y){for(var C=this._pt,o;C;)o=C._next,C.p===y&&C.modifier(t,i,f),C=o},$6=function(t){for(var i=this._pt,f,y;i;)y=i._next,i.p===t&&!i.op||i.op===t?Rv(this,i,"_pt"):i.dep||(f=1),i=y;return!f},K6=function(t,i,f,y){y.mSet(t,i,y.m.call(y.tween,f,y.mt),y)},_A=function(t){for(var i=t._pt,f,y,C,o;i;){for(f=i._next,y=C;y&&y.pr>i.pr;)y=y._next;(i._prev=y?y._prev:o)?i._prev._next=i:C=i,(i._next=y)?y._prev=i:o=i,i=f}t._pt=C},ps=(function(){function v(i,f,y,C,o,E,e,a,x){this.t=f,this.s=C,this.c=o,this.p=y,this.r=E||WA,this.d=e||this,this.set=a||Qx,this.pr=x||0,this._next=i,i&&(i._prev=this)}var t=v.prototype;return t.modifier=function(f,y,C){this.mSet=this.mSet||this.set,this.set=K6,this.m=f,this.mt=C,this.tween=y},v})();ds($x+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(v){return kx[v]=1});Ls.TweenMax=Ls.TweenLite=rn;Ls.TimelineLite=Ls.TimelineMax=Qn;Ni=new Qn({sortChildren:!1,defaults:Lu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});bs.stringFilter=FA;var Wl=[],Tp={},j6=[],xE=0,Z6=0,qm=function(t){return(Tp[t]||j6).map(function(i){return i()})},Bg=function(){var t=Date.now(),i=[];t-xE>2&&(qm("matchMediaInit"),Wl.forEach(function(f){var y=f.queries,C=f.conditions,o,E,e,a;for(E in y)o=Nr.matchMedia(y[E]).matches,o&&(e=1),o!==C[E]&&(C[E]=o,a=1);a&&(f.revert(),e&&i.push(f))}),qm("matchMediaRevert"),i.forEach(function(f){return f.onMatch(f,function(y){return f.add(null,y)})}),xE=t,qm("matchMedia"))},XA=(function(){function v(i,f){this.selector=f&&Dg(f),this.data=[],this._r=[],this.isReverted=!1,this.id=Z6++,i&&this.add(i)}var t=v.prototype;return t.add=function(f,y,C){_i(f)&&(C=y,y=f,f=_i);var o=this,E=function(){var a=Li,x=o.selector,u;return a&&a!==o&&a.data.push(o),C&&(o.selector=Dg(C)),Li=o,u=y.apply(o,arguments),_i(u)&&o._r.push(u),Li=a,o.selector=x,o.isReverted=!1,u};return o.last=E,f===_i?E(o,function(e){return o.add(null,e)}):f?o[f]=E:E},t.ignore=function(f){var y=Li;Li=null,f(this),Li=y},t.getTweens=function(){var f=[];return this.data.forEach(function(y){return y instanceof v?f.push.apply(f,y.getTweens()):y instanceof rn&&!(y.parent&&y.parent.data==="nested")&&f.push(y)}),f},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(f,y){var C=this;if(f?(function(){for(var E=C.getTweens(),e=C.data.length,a;e--;)a=C.data[e],a.data==="isFlip"&&(a.revert(),a.getChildren(!0,!0,!1).forEach(function(x){return E.splice(E.indexOf(x),1)}));for(E.map(function(x){return{g:x._dur||x._delay||x._sat&&!x._sat.vars.immediateRender?x.globalTime(0):-1/0,t:x}}).sort(function(x,u){return u.g-x.g||-1/0}).forEach(function(x){return x.t.revert(f)}),e=C.data.length;e--;)a=C.data[e],a instanceof Qn?a.data!=="nested"&&(a.scrollTrigger&&a.scrollTrigger.revert(),a.kill()):!(a instanceof rn)&&a.revert&&a.revert(f);C._r.forEach(function(x){return x(f,C)}),C.isReverted=!0})():this.data.forEach(function(E){return E.kill&&E.kill()}),this.clear(),y)for(var o=Wl.length;o--;)Wl[o].id===this.id&&Wl.splice(o,1)},t.revert=function(f){this.kill(f||{})},v})(),J6=(function(){function v(i){this.contexts=[],this.scope=i,Li&&Li.data.push(this)}var t=v.prototype;return t.add=function(f,y,C){ta(f)||(f={matches:f});var o=new XA(0,C||this.scope),E=o.conditions={},e,a,x;Li&&!o.selector&&(o.selector=Li.selector),this.contexts.push(o),y=o.add("onMatch",y),o.queries=f;for(a in f)a==="all"?x=1:(e=Nr.matchMedia(f[a]),e&&(Wl.indexOf(o)<0&&Wl.push(o),(E[a]=e.matches)&&(x=1),e.addListener?e.addListener(Bg):e.addEventListener("change",Bg)));return x&&y(o,function(u){return o.add(null,u)}),this},t.revert=function(f){this.kill(f||{})},t.kill=function(f){this.contexts.forEach(function(y){return y.kill(f,!0)})},v})(),Yp={registerPlugin:function(){for(var t=arguments.length,i=new Array(t),f=0;f<t;f++)i[f]=arguments[f];i.forEach(function(y){return bA(y)})},timeline:function(t){return new Qn(t)},getTweensOf:function(t,i){return Ni.getTweensOf(t,i)},getProperty:function(t,i,f,y){An(t)&&(t=js(t)[0]);var C=Vl(t||{}).get,o=f?mA:vA;return f==="native"&&(f=""),t&&(i?o((Ss[i]&&Ss[i].get||C)(t,i,f,y)):function(E,e,a){return o((Ss[E]&&Ss[E].get||C)(t,E,e,a))})},quickSetter:function(t,i,f){if(t=js(t),t.length>1){var y=t.map(function(x){return ms.quickSetter(x,i,f)}),C=y.length;return function(x){for(var u=C;u--;)y[u](x)}}t=t[0]||{};var o=Ss[i],E=Vl(t),e=E.harness&&(E.harness.aliases||{})[i]||i,a=o?function(x){var u=new o;Jh._pt=0,u.init(t,f?x+f:x,Jh,0,[t]),u.render(1,u),Jh._pt&&ty(1,Jh)}:E.set(t,e);return o?a:function(x){return a(t,e,f?x+f:x,E,1)}},quickTo:function(t,i,f){var y,C=ms.to(t,Fs((y={},y[i]="+=0.1",y.paused=!0,y.stagger=0,y),f||{})),o=function(e,a,x){return C.resetTo(i,e,a,x)};return o.tween=C,o},isTweening:function(t){return Ni.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Gl(t.ease,Lu.ease)),dE(Lu,t||{})},config:function(t){return dE(bs,t||{})},registerEffect:function(t){var i=t.name,f=t.effect,y=t.plugins,C=t.defaults,o=t.extendTimeline;(y||"").split(",").forEach(function(E){return E&&!Ss[E]&&!Ls[E]&&gc(i+" effect requires "+E+" plugin.")}),jm[i]=function(E,e,a){return f(js(E),Fs(e||{},C),a)},o&&(Qn.prototype[i]=function(E,e,a){return this.add(jm[i](E,ta(e)?e:(a=e)&&{},this),a)})},registerEase:function(t,i){ti[t]=Gl(i)},parseEase:function(t,i){return arguments.length?Gl(t,i):ti},getById:function(t){return Ni.getById(t)},exportRoot:function(t,i){t===void 0&&(t={});var f=new Qn(t),y,C;for(f.smoothChildTiming=cs(t.smoothChildTiming),Ni.remove(f),f._dp=0,f._time=f._tTime=Ni._time,y=Ni._first;y;)C=y._next,(i||!(!y._dur&&y instanceof rn&&y.vars.onComplete===y._targets[0]))&&Hr(f,y,y._start-y._delay),y=C;return Hr(Ni,f,0),f},context:function(t,i){return t?new XA(t,i):Li},matchMedia:function(t){return new J6(t)},matchMediaRefresh:function(){return Wl.forEach(function(t){var i=t.conditions,f,y;for(y in i)i[y]&&(i[y]=!1,f=1);f&&t.revert()})||Bg()},addEventListener:function(t,i){var f=Tp[t]||(Tp[t]=[]);~f.indexOf(i)||f.push(i)},removeEventListener:function(t,i){var f=Tp[t],y=f&&f.indexOf(i);y>=0&&f.splice(y,1)},utils:{wrap:b6,wrapYoyo:I6,distribute:CA,random:wA,snap:AA,normalize:P6,getUnit:Xn,clamp:A6,splitColor:IA,toArray:js,selector:Dg,mapRange:RA,pipe:M6,unitize:R6,interpolate:L6,shuffle:SA},install:uA,effects:jm,ticker:As,updateRoot:Qn.updateRoot,plugins:Ss,globalTimeline:Ni,core:{PropTween:ps,globals:fA,Tween:rn,Timeline:Qn,Animation:Ec,getCache:Vl,_removeLinkedListItem:Rv,reverting:function(){return Dn},context:function(t){return t&&Li&&(Li.data.push(t),t._ctx=Li),Li},suppressOverwrites:function(t){return Wx=t}}};ds("to,from,fromTo,delayedCall,set,killTweensOf",function(v){return Yp[v]=rn[v]});As.add(Qn.updateRoot);Jh=Yp.to({},{duration:0});var Q6=function(t,i){for(var f=t._pt;f&&f.p!==i&&f.op!==i&&f.fp!==i;)f=f._next;return f},q6=function(t,i){var f=t._targets,y,C,o;for(y in i)for(C=f.length;C--;)o=t._ptLookup[C][y],o&&(o=o.d)&&(o._pt&&(o=Q6(o,y)),o&&o.modifier&&o.modifier(i[y],t,f[C],y))},t0=function(t,i){return{name:t,headless:1,rawVars:1,init:function(y,C,o){o._onInit=function(E){var e,a;if(An(C)&&(e={},ds(C,function(x){return e[x]=1}),C=e),i){e={};for(a in C)e[a]=i(C[a]);C=e}q6(E,C)}}}},ms=Yp.registerPlugin({name:"attr",init:function(t,i,f,y,C){var o,E,e;this.tween=f;for(o in i)e=t.getAttribute(o)||"",E=this.add(t,"setAttribute",(e||0)+"",i[o],y,C,0,0,o),E.op=o,E.b=e,this._props.push(o)},render:function(t,i){for(var f=i._pt;f;)Dn?f.set(f.t,f.p,f.b,f):f.r(t,f.d),f=f._next}},{name:"endArray",headless:1,init:function(t,i){for(var f=i.length;f--;)this.add(t,f,t[f]||0,i[f],0,0,0,0,0,1)}},t0("roundProps",Og),t0("modifiers"),t0("snap",AA))||Yp;rn.version=Qn.version=ms.version="3.14.2";hA=1;_x()&&Nu();ti.Power0;ti.Power1;ti.Power2;ti.Power3;ti.Power4;ti.Linear;ti.Quad;ti.Cubic;ti.Quart;ti.Quint;ti.Strong;ti.Elastic;ti.Back;ti.SteppedEase;ti.Bounce;ti.Sine;ti.Expo;ti.Circ;/*!
 * CSSPlugin 3.14.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var yE,Co,nu,ey,wl,TE,iy,t8=function(){return typeof window<"u"},Xa={},ml=180/Math.PI,su=Math.PI/180,Wh=Math.atan2,EE=1e8,ny=/([A-Z])/g,e8=/(left|right|width|margin|padding|x)/i,i8=/[\s,\(]\S/,Xr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ug=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},n8=function(t,i){return i.set(i.t,i.p,t===1?i.e:Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},s8=function(t,i){return i.set(i.t,i.p,t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},r8=function(t,i){return i.set(i.t,i.p,t===1?i.e:t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},a8=function(t,i){var f=i.s+i.c*t;i.set(i.t,i.p,~~(f+(f<0?-.5:.5))+i.u,i)},YA=function(t,i){return i.set(i.t,i.p,t?i.e:i.b,i)},kA=function(t,i){return i.set(i.t,i.p,t!==1?i.b:i.e,i)},o8=function(t,i,f){return t.style[i]=f},l8=function(t,i,f){return t.style.setProperty(i,f)},h8=function(t,i,f){return t._gsap[i]=f},u8=function(t,i,f){return t._gsap.scaleX=t._gsap.scaleY=f},f8=function(t,i,f,y,C){var o=t._gsap;o.scaleX=o.scaleY=f,o.renderTransform(C,o)},c8=function(t,i,f,y,C){var o=t._gsap;o[i]=f,o.renderTransform(C,o)},Bi="transform",vs=Bi+"Origin",d8=function v(t,i){var f=this,y=this.target,C=y.style,o=y._gsap;if(t in Xa&&C){if(this.tfm=this.tfm||{},t!=="transform")t=Xr[t]||t,~t.indexOf(",")?t.split(",").forEach(function(E){return f.tfm[E]=Ca(y,E)}):this.tfm[t]=o.x?o[t]:Ca(y,t),t===vs&&(this.tfm.zOrigin=o.zOrigin);else return Xr.transform.split(",").forEach(function(E){return v.call(f,E,i)});if(this.props.indexOf(Bi)>=0)return;o.svg&&(this.svgo=y.getAttribute("data-svg-origin"),this.props.push(vs,i,"")),t=Bi}(C||i)&&this.props.push(t,i,C[t])},$A=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},p8=function(){var t=this.props,i=this.target,f=i.style,y=i._gsap,C,o;for(C=0;C<t.length;C+=3)t[C+1]?t[C+1]===2?i[t[C]](t[C+2]):i[t[C]]=t[C+2]:t[C+2]?f[t[C]]=t[C+2]:f.removeProperty(t[C].substr(0,2)==="--"?t[C]:t[C].replace(ny,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)y[o]=this.tfm[o];y.svg&&(y.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),C=iy(),(!C||!C.isStart)&&!f[Bi]&&($A(f),y.zOrigin&&f[vs]&&(f[vs]+=" "+y.zOrigin+"px",y.zOrigin=0,y.renderTransform()),y.uncache=1)}},KA=function(t,i){var f={target:t,props:[],revert:p8,save:d8};return t._gsap||ms.core.getCache(t),i&&t.style&&t.nodeType&&i.split(",").forEach(function(y){return f.save(y)}),f},jA,Vg=function(t,i){var f=Co.createElementNS?Co.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Co.createElement(t);return f&&f.style?f:Co.createElement(t)},Ms=function v(t,i,f){var y=getComputedStyle(t);return y[i]||y.getPropertyValue(i.replace(ny,"-$1").toLowerCase())||y.getPropertyValue(i)||!f&&v(t,Bu(i)||i,1)||""},SE="O,Moz,ms,Ms,Webkit".split(","),Bu=function(t,i,f){var y=i||wl,C=y.style,o=5;if(t in C&&!f)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(SE[o]+t in C););return o<0?null:(o===3?"ms":o>=0?SE[o]:"")+t},zg=function(){t8()&&window.document&&(yE=window,Co=yE.document,nu=Co.documentElement,wl=Vg("div")||{style:{}},Vg("div"),Bi=Bu(Bi),vs=Bi+"Origin",wl.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",jA=!!Bu("perspective"),iy=ms.core.reverting,ey=1)},CE=function(t){var i=t.ownerSVGElement,f=Vg("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),y=t.cloneNode(!0),C;y.style.display="block",f.appendChild(y),nu.appendChild(f);try{C=y.getBBox()}catch{}return f.removeChild(y),nu.removeChild(f),C},AE=function(t,i){for(var f=i.length;f--;)if(t.hasAttribute(i[f]))return t.getAttribute(i[f])},ZA=function(t){var i,f;try{i=t.getBBox()}catch{i=CE(t),f=1}return i&&(i.width||i.height)||f||(i=CE(t)),i&&!i.width&&!i.x&&!i.y?{x:+AE(t,["x","cx","x1"])||0,y:+AE(t,["y","cy","y1"])||0,width:0,height:0}:i},JA=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&ZA(t))},Wo=function(t,i){if(i){var f=t.style,y;i in Xa&&i!==vs&&(i=Bi),f.removeProperty?(y=i.substr(0,2),(y==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),f.removeProperty(y==="--"?i:i.replace(ny,"-$1").toLowerCase())):f.removeAttribute(i)}},Ao=function(t,i,f,y,C,o){var E=new ps(t._pt,i,f,0,1,o?kA:YA);return t._pt=E,E.b=y,E.e=C,t._props.push(f),E},wE={deg:1,rad:1,turn:1},v8={grid:1,flex:1},Ho=function v(t,i,f,y){var C=parseFloat(f)||0,o=(f+"").trim().substr((C+"").length)||"px",E=wl.style,e=e8.test(i),a=t.tagName.toLowerCase()==="svg",x=(a?"client":"offset")+(e?"Width":"Height"),u=100,r=y==="px",h=y==="%",n,l,c,s;if(y===o||!C||wE[y]||wE[o])return C;if(o!=="px"&&!r&&(C=v(t,i,f,"px")),s=t.getCTM&&JA(t),(h||o==="%")&&(Xa[i]||~i.indexOf("adius")))return n=s?t.getBBox()[e?"width":"height"]:t[x],ki(h?C/n*u:C/100*n);if(E[e?"width":"height"]=u+(r?o:y),l=y!=="rem"&&~i.indexOf("adius")||y==="em"&&t.appendChild&&!a?t:t.parentNode,s&&(l=(t.ownerSVGElement||{}).parentNode),(!l||l===Co||!l.appendChild)&&(l=Co.body),c=l._gsap,c&&h&&c.width&&e&&c.time===As.time&&!c.uncache)return ki(C/c.width*u);if(h&&(i==="height"||i==="width")){var d=t.style[i];t.style[i]=u+y,n=t[x],d?t.style[i]=d:Wo(t,i)}else(h||o==="%")&&!v8[Ms(l,"display")]&&(E.position=Ms(t,"position")),l===t&&(E.position="static"),l.appendChild(wl),n=wl[x],l.removeChild(wl),E.position="absolute";return e&&h&&(c=Vl(l),c.time=As.time,c.width=l[x]),ki(r?n*C/u:n&&C?u/n*C:0)},Ca=function(t,i,f,y){var C;return ey||zg(),i in Xr&&i!=="transform"&&(i=Xr[i],~i.indexOf(",")&&(i=i.split(",")[0])),Xa[i]&&i!=="transform"?(C=Cc(t,y),C=i!=="transformOrigin"?C[i]:C.svg?C.origin:$p(Ms(t,vs))+" "+C.zOrigin+"px"):(C=t.style[i],(!C||C==="auto"||y||~(C+"").indexOf("calc("))&&(C=kp[i]&&kp[i](t,i,f)||Ms(t,i)||dA(t,i)||(i==="opacity"?1:0))),f&&!~(C+"").trim().indexOf(" ")?Ho(t,i,C,f)+f:C},m8=function(t,i,f,y){if(!f||f==="none"){var C=Bu(i,t,1),o=C&&Ms(t,C,1);o&&o!==f?(i=C,f=o):i==="borderColor"&&(f=Ms(t,"borderTopColor"))}var E=new ps(this._pt,t.style,i,0,1,HA),e=0,a=0,x,u,r,h,n,l,c,s,d,m,p,g;if(E.b=f,E.e=y,f+="",y+="",y.substring(0,6)==="var(--"&&(y=Ms(t,y.substring(4,y.indexOf(")")))),y==="auto"&&(l=t.style[i],t.style[i]=y,y=Ms(t,i)||y,l?t.style[i]=l:Wo(t,i)),x=[f,y],FA(x),f=x[0],y=x[1],r=f.match(Zh)||[],g=y.match(Zh)||[],g.length){for(;u=Zh.exec(y);)c=u[0],d=y.substring(e,u.index),n?n=(n+1)%5:(d.substr(-5)==="rgba("||d.substr(-5)==="hsla(")&&(n=1),c!==(l=r[a++]||"")&&(h=parseFloat(l)||0,p=l.substr((h+"").length),c.charAt(1)==="="&&(c=iu(h,c)+p),s=parseFloat(c),m=c.substr((s+"").length),e=Zh.lastIndex-m.length,m||(m=m||bs.units[i]||p,e===y.length&&(y+=m,E.e+=m)),p!==m&&(h=Ho(t,i,l,m)||0),E._pt={_next:E._pt,p:d||a===1?d:",",s:h,c:s-h,m:n&&n<4||i==="zIndex"?Math.round:0});E.c=e<y.length?y.substring(e,y.length):""}else E.r=i==="display"&&y==="none"?kA:YA;return lA.test(y)&&(E.e=0),this._pt=E,E},ME={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},g8=function(t){var i=t.split(" "),f=i[0],y=i[1]||"50%";return(f==="top"||f==="bottom"||y==="left"||y==="right")&&(t=f,f=y,y=t),i[0]=ME[f]||f,i[1]=ME[y]||y,i.join(" ")},x8=function(t,i){if(i.tween&&i.tween._time===i.tween._dur){var f=i.t,y=f.style,C=i.u,o=f._gsap,E,e,a;if(C==="all"||C===!0)y.cssText="",e=1;else for(C=C.split(","),a=C.length;--a>-1;)E=C[a],Xa[E]&&(e=1,E=E==="transformOrigin"?vs:Bi),Wo(f,E);e&&(Wo(f,Bi),o&&(o.svg&&f.removeAttribute("transform"),y.scale=y.rotate=y.translate="none",Cc(f,1),o.uncache=1,$A(y)))}},kp={clearProps:function(t,i,f,y,C){if(C.data!=="isFromStart"){var o=t._pt=new ps(t._pt,i,f,0,0,x8);return o.u=y,o.pr=-10,o.tween=C,t._props.push(f),1}}},Sc=[1,0,0,1,0,0],QA={},qA=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},RE=function(t){var i=Ms(t,Bi);return qA(i)?Sc:i.substr(7).match(oA).map(ki)},sy=function(t,i){var f=t._gsap||Vl(t),y=t.style,C=RE(t),o,E,e,a;return f.svg&&t.getAttribute("transform")?(e=t.transform.baseVal.consolidate().matrix,C=[e.a,e.b,e.c,e.d,e.e,e.f],C.join(",")==="1,0,0,1,0,0"?Sc:C):(C===Sc&&!t.offsetParent&&t!==nu&&!f.svg&&(e=y.display,y.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(a=1,E=t.nextElementSibling,nu.appendChild(t)),C=RE(t),e?y.display=e:Wo(t,"display"),a&&(E?o.insertBefore(t,E):o?o.appendChild(t):nu.removeChild(t))),i&&C.length>6?[C[0],C[1],C[4],C[5],C[12],C[13]]:C)},Gg=function(t,i,f,y,C,o){var E=t._gsap,e=C||sy(t,!0),a=E.xOrigin||0,x=E.yOrigin||0,u=E.xOffset||0,r=E.yOffset||0,h=e[0],n=e[1],l=e[2],c=e[3],s=e[4],d=e[5],m=i.split(" "),p=parseFloat(m[0])||0,g=parseFloat(m[1])||0,T,S,w,A;f?e!==Sc&&(S=h*c-n*l)&&(w=p*(c/S)+g*(-l/S)+(l*d-c*s)/S,A=p*(-n/S)+g*(h/S)-(h*d-n*s)/S,p=w,g=A):(T=ZA(t),p=T.x+(~m[0].indexOf("%")?p/100*T.width:p),g=T.y+(~(m[1]||m[0]).indexOf("%")?g/100*T.height:g)),y||y!==!1&&E.smooth?(s=p-a,d=g-x,E.xOffset=u+(s*h+d*l)-s,E.yOffset=r+(s*n+d*c)-d):E.xOffset=E.yOffset=0,E.xOrigin=p,E.yOrigin=g,E.smooth=!!y,E.origin=i,E.originIsAbsolute=!!f,t.style[vs]="0px 0px",o&&(Ao(o,E,"xOrigin",a,p),Ao(o,E,"yOrigin",x,g),Ao(o,E,"xOffset",u,E.xOffset),Ao(o,E,"yOffset",r,E.yOffset)),t.setAttribute("data-svg-origin",p+" "+g)},Cc=function(t,i){var f=t._gsap||new BA(t);if("x"in f&&!i&&!f.uncache)return f;var y=t.style,C=f.scaleX<0,o="px",E="deg",e=getComputedStyle(t),a=Ms(t,vs)||"0",x,u,r,h,n,l,c,s,d,m,p,g,T,S,w,A,M,R,P,b,F,I,L,D,O,z,W,X,_,U,G,N;return x=u=r=l=c=s=d=m=p=0,h=n=1,f.svg=!!(t.getCTM&&JA(t)),e.translate&&((e.translate!=="none"||e.scale!=="none"||e.rotate!=="none")&&(y[Bi]=(e.translate!=="none"?"translate3d("+(e.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(e.rotate!=="none"?"rotate("+e.rotate+") ":"")+(e.scale!=="none"?"scale("+e.scale.split(" ").join(",")+") ":"")+(e[Bi]!=="none"?e[Bi]:"")),y.scale=y.rotate=y.translate="none"),S=sy(t,f.svg),f.svg&&(f.uncache?(O=t.getBBox(),a=f.xOrigin-O.x+"px "+(f.yOrigin-O.y)+"px",D=""):D=!i&&t.getAttribute("data-svg-origin"),Gg(t,D||a,!!D||f.originIsAbsolute,f.smooth!==!1,S)),g=f.xOrigin||0,T=f.yOrigin||0,S!==Sc&&(R=S[0],P=S[1],b=S[2],F=S[3],x=I=S[4],u=L=S[5],S.length===6?(h=Math.sqrt(R*R+P*P),n=Math.sqrt(F*F+b*b),l=R||P?Wh(P,R)*ml:0,d=b||F?Wh(b,F)*ml+l:0,d&&(n*=Math.abs(Math.cos(d*su))),f.svg&&(x-=g-(g*R+T*b),u-=T-(g*P+T*F))):(N=S[6],U=S[7],W=S[8],X=S[9],_=S[10],G=S[11],x=S[12],u=S[13],r=S[14],w=Wh(N,_),c=w*ml,w&&(A=Math.cos(-w),M=Math.sin(-w),D=I*A+W*M,O=L*A+X*M,z=N*A+_*M,W=I*-M+W*A,X=L*-M+X*A,_=N*-M+_*A,G=U*-M+G*A,I=D,L=O,N=z),w=Wh(-b,_),s=w*ml,w&&(A=Math.cos(-w),M=Math.sin(-w),D=R*A-W*M,O=P*A-X*M,z=b*A-_*M,G=F*M+G*A,R=D,P=O,b=z),w=Wh(P,R),l=w*ml,w&&(A=Math.cos(w),M=Math.sin(w),D=R*A+P*M,O=I*A+L*M,P=P*A-R*M,L=L*A-I*M,R=D,I=O),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,s=180-s),h=ki(Math.sqrt(R*R+P*P+b*b)),n=ki(Math.sqrt(L*L+N*N)),w=Wh(I,L),d=Math.abs(w)>2e-4?w*ml:0,p=G?1/(G<0?-G:G):0),f.svg&&(D=t.getAttribute("transform"),f.forceCSS=t.setAttribute("transform","")||!qA(Ms(t,Bi)),D&&t.setAttribute("transform",D))),Math.abs(d)>90&&Math.abs(d)<270&&(C?(h*=-1,d+=l<=0?180:-180,l+=l<=0?180:-180):(n*=-1,d+=d<=0?180:-180)),i=i||f.uncache,f.x=x-((f.xPercent=x&&(!i&&f.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-x)?-50:0)))?t.offsetWidth*f.xPercent/100:0)+o,f.y=u-((f.yPercent=u&&(!i&&f.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-u)?-50:0)))?t.offsetHeight*f.yPercent/100:0)+o,f.z=r+o,f.scaleX=ki(h),f.scaleY=ki(n),f.rotation=ki(l)+E,f.rotationX=ki(c)+E,f.rotationY=ki(s)+E,f.skewX=d+E,f.skewY=m+E,f.transformPerspective=p+o,(f.zOrigin=parseFloat(a.split(" ")[2])||!i&&f.zOrigin||0)&&(y[vs]=$p(a)),f.xOffset=f.yOffset=0,f.force3D=bs.force3D,f.renderTransform=f.svg?T8:jA?tw:y8,f.uncache=0,f},$p=function(t){return(t=t.split(" "))[0]+" "+t[1]},e0=function(t,i,f){var y=Xn(i);return ki(parseFloat(i)+parseFloat(Ho(t,"x",f+"px",y)))+y},y8=function(t,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,tw(t,i)},cl="0deg",Vf="0px",dl=") ",tw=function(t,i){var f=i||this,y=f.xPercent,C=f.yPercent,o=f.x,E=f.y,e=f.z,a=f.rotation,x=f.rotationY,u=f.rotationX,r=f.skewX,h=f.skewY,n=f.scaleX,l=f.scaleY,c=f.transformPerspective,s=f.force3D,d=f.target,m=f.zOrigin,p="",g=s==="auto"&&t&&t!==1||s===!0;if(m&&(u!==cl||x!==cl)){var T=parseFloat(x)*su,S=Math.sin(T),w=Math.cos(T),A;T=parseFloat(u)*su,A=Math.cos(T),o=e0(d,o,S*A*-m),E=e0(d,E,-Math.sin(T)*-m),e=e0(d,e,w*A*-m+m)}c!==Vf&&(p+="perspective("+c+dl),(y||C)&&(p+="translate("+y+"%, "+C+"%) "),(g||o!==Vf||E!==Vf||e!==Vf)&&(p+=e!==Vf||g?"translate3d("+o+", "+E+", "+e+") ":"translate("+o+", "+E+dl),a!==cl&&(p+="rotate("+a+dl),x!==cl&&(p+="rotateY("+x+dl),u!==cl&&(p+="rotateX("+u+dl),(r!==cl||h!==cl)&&(p+="skew("+r+", "+h+dl),(n!==1||l!==1)&&(p+="scale("+n+", "+l+dl),d.style[Bi]=p||"translate(0, 0)"},T8=function(t,i){var f=i||this,y=f.xPercent,C=f.yPercent,o=f.x,E=f.y,e=f.rotation,a=f.skewX,x=f.skewY,u=f.scaleX,r=f.scaleY,h=f.target,n=f.xOrigin,l=f.yOrigin,c=f.xOffset,s=f.yOffset,d=f.forceCSS,m=parseFloat(o),p=parseFloat(E),g,T,S,w,A;e=parseFloat(e),a=parseFloat(a),x=parseFloat(x),x&&(x=parseFloat(x),a+=x,e+=x),e||a?(e*=su,a*=su,g=Math.cos(e)*u,T=Math.sin(e)*u,S=Math.sin(e-a)*-r,w=Math.cos(e-a)*r,a&&(x*=su,A=Math.tan(a-x),A=Math.sqrt(1+A*A),S*=A,w*=A,x&&(A=Math.tan(x),A=Math.sqrt(1+A*A),g*=A,T*=A)),g=ki(g),T=ki(T),S=ki(S),w=ki(w)):(g=u,w=r,T=S=0),(m&&!~(o+"").indexOf("px")||p&&!~(E+"").indexOf("px"))&&(m=Ho(h,"x",o,"px"),p=Ho(h,"y",E,"px")),(n||l||c||s)&&(m=ki(m+n-(n*g+l*S)+c),p=ki(p+l-(n*T+l*w)+s)),(y||C)&&(A=h.getBBox(),m=ki(m+y/100*A.width),p=ki(p+C/100*A.height)),A="matrix("+g+","+T+","+S+","+w+","+m+","+p+")",h.setAttribute("transform",A),d&&(h.style[Bi]=A)},E8=function(t,i,f,y,C){var o=360,E=An(C),e=parseFloat(C)*(E&&~C.indexOf("rad")?ml:1),a=e-y,x=y+a+"deg",u,r;return E&&(u=C.split("_")[1],u==="short"&&(a%=o,a!==a%(o/2)&&(a+=a<0?o:-o)),u==="cw"&&a<0?a=(a+o*EE)%o-~~(a/o)*o:u==="ccw"&&a>0&&(a=(a-o*EE)%o-~~(a/o)*o)),t._pt=r=new ps(t._pt,i,f,y,a,n8),r.e=x,r.u="deg",t._props.push(f),r},PE=function(t,i){for(var f in i)t[f]=i[f];return t},S8=function(t,i,f){var y=PE({},f._gsap),C="perspective,force3D,transformOrigin,svgOrigin",o=f.style,E,e,a,x,u,r,h,n;y.svg?(a=f.getAttribute("transform"),f.setAttribute("transform",""),o[Bi]=i,E=Cc(f,1),Wo(f,Bi),f.setAttribute("transform",a)):(a=getComputedStyle(f)[Bi],o[Bi]=i,E=Cc(f,1),o[Bi]=a);for(e in Xa)a=y[e],x=E[e],a!==x&&C.indexOf(e)<0&&(h=Xn(a),n=Xn(x),u=h!==n?Ho(f,e,a,n):parseFloat(a),r=parseFloat(x),t._pt=new ps(t._pt,E,e,u,r-u,Ug),t._pt.u=n||0,t._props.push(e));PE(E,y)};ds("padding,margin,Width,Radius",function(v,t){var i="Top",f="Right",y="Bottom",C="Left",o=(t<3?[i,f,y,C]:[i+C,i+f,y+f,y+C]).map(function(E){return t<2?v+E:"border"+E+v});kp[t>1?"border"+v:v]=function(E,e,a,x,u){var r,h;if(arguments.length<4)return r=o.map(function(n){return Ca(E,n,a)}),h=r.join(" "),h.split(r[0]).length===5?r[0]:h;r=(x+"").split(" "),h={},o.forEach(function(n,l){return h[n]=r[l]=r[l]||r[(l-1)/2|0]}),E.init(e,h,u)}});var ew={name:"css",register:zg,targetTest:function(t){return t.style&&t.nodeType},init:function(t,i,f,y,C){var o=this._props,E=t.style,e=f.vars.startAt,a,x,u,r,h,n,l,c,s,d,m,p,g,T,S,w,A;ey||zg(),this.styles=this.styles||KA(t),w=this.styles.props,this.tween=f;for(l in i)if(l!=="autoRound"&&(x=i[l],!(Ss[l]&&UA(l,i,f,y,t,C)))){if(h=typeof x,n=kp[l],h==="function"&&(x=x.call(f,y,t,C),h=typeof x),h==="string"&&~x.indexOf("random(")&&(x=yc(x)),n)n(this,t,l,x,f)&&(S=1);else if(l.substr(0,2)==="--")a=(getComputedStyle(t).getPropertyValue(l)+"").trim(),x+="",Fo.lastIndex=0,Fo.test(a)||(c=Xn(a),s=Xn(x),s?c!==s&&(a=Ho(t,l,a,s)+s):c&&(x+=c)),this.add(E,"setProperty",a,x,y,C,0,0,l),o.push(l),w.push(l,0,E[l]);else if(h!=="undefined"){if(e&&l in e?(a=typeof e[l]=="function"?e[l].call(f,y,t,C):e[l],An(a)&&~a.indexOf("random(")&&(a=yc(a)),Xn(a+"")||a==="auto"||(a+=bs.units[l]||Xn(Ca(t,l))||""),(a+"").charAt(1)==="="&&(a=Ca(t,l))):a=Ca(t,l),r=parseFloat(a),d=h==="string"&&x.charAt(1)==="="&&x.substr(0,2),d&&(x=x.substr(2)),u=parseFloat(x),l in Xr&&(l==="autoAlpha"&&(r===1&&Ca(t,"visibility")==="hidden"&&u&&(r=0),w.push("visibility",0,E.visibility),Ao(this,E,"visibility",r?"inherit":"hidden",u?"inherit":"hidden",!u)),l!=="scale"&&l!=="transform"&&(l=Xr[l],~l.indexOf(",")&&(l=l.split(",")[0]))),m=l in Xa,m){if(this.styles.save(l),A=x,h==="string"&&x.substring(0,6)==="var(--"){if(x=Ms(t,x.substring(4,x.indexOf(")"))),x.substring(0,5)==="calc("){var M=t.style.perspective;t.style.perspective=x,x=Ms(t,"perspective"),M?t.style.perspective=M:Wo(t,"perspective")}u=parseFloat(x)}if(p||(g=t._gsap,g.renderTransform&&!i.parseTransform||Cc(t,i.parseTransform),T=i.smoothOrigin!==!1&&g.smooth,p=this._pt=new ps(this._pt,E,Bi,0,1,g.renderTransform,g,0,-1),p.dep=1),l==="scale")this._pt=new ps(this._pt,g,"scaleY",g.scaleY,(d?iu(g.scaleY,d+u):u)-g.scaleY||0,Ug),this._pt.u=0,o.push("scaleY",l),l+="X";else if(l==="transformOrigin"){w.push(vs,0,E[vs]),x=g8(x),g.svg?Gg(t,x,0,T,0,this):(s=parseFloat(x.split(" ")[2])||0,s!==g.zOrigin&&Ao(this,g,"zOrigin",g.zOrigin,s),Ao(this,E,l,$p(a),$p(x)));continue}else if(l==="svgOrigin"){Gg(t,x,1,T,0,this);continue}else if(l in QA){E8(this,g,l,r,d?iu(r,d+x):x);continue}else if(l==="smoothOrigin"){Ao(this,g,"smooth",g.smooth,x);continue}else if(l==="force3D"){g[l]=x;continue}else if(l==="transform"){S8(this,x,t);continue}}else l in E||(l=Bu(l)||l);if(m||(u||u===0)&&(r||r===0)&&!i8.test(x)&&l in E)c=(a+"").substr((r+"").length),u||(u=0),s=Xn(x)||(l in bs.units?bs.units[l]:c),c!==s&&(r=Ho(t,l,a,s)),this._pt=new ps(this._pt,m?g:E,l,r,(d?iu(r,d+u):u)-r,!m&&(s==="px"||l==="zIndex")&&i.autoRound!==!1?a8:Ug),this._pt.u=s||0,m&&A!==x?(this._pt.b=a,this._pt.e=A,this._pt.r=r8):c!==s&&s!=="%"&&(this._pt.b=a,this._pt.r=s8);else if(l in E)m8.call(this,t,l,a,d?d+x:x);else if(l in t)this.add(t,l,a||t[l],d?d+x:x,y,C);else if(l!=="parseTransform"){Yx(l,x);continue}m||(l in E?w.push(l,0,E[l]):typeof t[l]=="function"?w.push(l,2,t[l]()):w.push(l,1,a||t[l])),o.push(l)}}S&&_A(this)},render:function(t,i){if(i.tween._time||!iy())for(var f=i._pt;f;)f.r(t,f.d),f=f._next;else i.styles.revert()},get:Ca,aliases:Xr,getSetter:function(t,i,f){var y=Xr[i];return y&&y.indexOf(",")<0&&(i=y),i in Xa&&i!==vs&&(t._gsap.x||Ca(t,"x"))?f&&TE===f?i==="scale"?u8:h8:(TE=f||{})&&(i==="scale"?f8:c8):t.style&&!Hx(t.style[i])?o8:~i.indexOf("-")?l8:qx(t,i)},core:{_removeProperty:Wo,_getMatrix:sy}};ms.utils.checkPrefix=Bu;ms.core.getStyleSaver=KA;(function(v,t,i,f){var y=ds(v+","+t+","+i,function(C){Xa[C]=1});ds(t,function(C){bs.units[C]="deg",QA[C]=1}),Xr[y[13]]=v+","+t,ds(f,function(C){var o=C.split(":");Xr[o[1]]=y[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ds("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(v){bs.units[v]="px"});ms.registerPlugin(ew);var Wg=ms.registerPlugin(ew)||ms;Wg.core.Tween;var C8=Jt('<div class="w-[14%] bg-black/20 rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] flex flex-col overflow-hidden relative group"><div class="flex-1 relative cursor-pointer"></div></div>');function A8(v,t){Ds(t,!1);let i=Pe(t,"show",8,!1),f=Pe(t,"rollDuration",8,3.5);const y=Zo();let C=ue(),o=ue(),E,e,a,x=[],u,r,h,n=!1;const l={size:7.2,edgeRadius:1.6,segments:12},c=16,s=4;function d(){const b=new ju(l.size,l.size,l.size,l.segments,l.segments,l.segments),F=b.attributes.position,I=l.size/2-l.edgeRadius;for(let L=0;L<F.count;L++){let D=F.getX(L),O=F.getY(L),z=F.getZ(L);if(Math.abs(D)>I&&Math.abs(O)>I&&Math.abs(z)>I){const W=new St(D>0?D-I:D+I,O>0?O-I:O+I,z>0?z-I:z+I);W.normalize().multiplyScalar(l.edgeRadius),F.setXYZ(L,(D>0?I:-I)+W.x,(O>0?I:-I)+W.y,(z>0?I:-I)+W.z)}else if(Math.abs(D)>I&&Math.abs(O)>I){const W=new ei(D>0?D-I:D+I,O>0?O-I:O+I);W.normalize().multiplyScalar(l.edgeRadius),F.setXY(L,(D>0?I:-I)+W.x,(O>0?I:-I)+W.y)}else if(Math.abs(D)>I&&Math.abs(z)>I){const W=new ei(D>0?D-I:D+I,z>0?z-I:z+I);W.normalize().multiplyScalar(l.edgeRadius),F.setX(L,(D>0?I:-I)+W.x),F.setZ(L,(z>0?I:-I)+W.y)}else if(Math.abs(O)>I&&Math.abs(z)>I){const W=new ei(O>0?O-I:O+I,z>0?z-I:z+I);W.normalize().multiplyScalar(l.edgeRadius),F.setY(L,(O>0?I:-I)+W.x),F.setZ(L,(z>0?I:-I)+W.y)}}return b.computeVertexNormals(),b}function m(){const b=d(),F=new kd({color:15790320,roughness:.6,metalness:.05}),I=new Xf,L=new hs(b,F);L.castShadow=!0,I.add(L);const D=.1*l.size,O=new zp(D,12,12),z=new kd({color:2236962,roughness:.4,metalness:0}),X=l.size/2-D*.4,_=.22*l.size;return[{face:"front",axis:"z",val:X,dots:[[0,0]]},{face:"back",axis:"z",val:-X,dots:[[-_,-_],[-_,0],[-_,_],[_,-_],[_,0],[_,_]]},{face:"top",axis:"y",val:X,dots:[[-_,-_],[_,_]]},{face:"bottom",axis:"y",val:-X,dots:[[-_,-_],[0,0],[_,_],[_,-_],[-_,_]]},{face:"right",axis:"x",val:X,dots:[[-_,-_],[0,0],[_,_]]},{face:"left",axis:"x",val:-X,dots:[[-_,-_],[_,-_],[-_,_],[_,_]]}].forEach(G=>{G.dots.forEach(N=>{const H=new hs(O,z);G.axis==="z"?H.position.set(N[0],N[1],G.val):G.axis==="y"?H.position.set(N[0],G.val,N[1]):H.position.set(G.val,N[0],N[1]),I.add(H)})}),I}let p=0;function g(){ut(o,new G4),E=new Cs(60,Y(C).clientWidth/Y(C).clientHeight,.1,100),E.position.set(0,18,28),E.lookAt(0,4,0),e=new FO({antialias:!0,alpha:!0}),e.setSize(Y(C).clientWidth,Y(C).clientHeight),e.shadowMap.enabled=!0,Y(C).appendChild(e.domElement);const b=new j4(16777215,.7);Y(o).add(b);const F=new K4(16777215,1.2);F.position.set(10,25,15),F.castShadow=!0,F.shadow.mapSize.width=1024,F.shadow.mapSize.height=1024,Y(o).add(F);const I=new k4(16777215,.5);I.position.set(-15,10,-10),Y(o).add(I),a=new QN,a.gravity.set(0,-200,0),a.allowSleep=!0,a.solver.iterations=20;const L=new Ul({friction:.2,restitution:.5}),D=new Ul({friction:.4,restitution:.3}),O=new Ul({friction:.05,restitution:.8}),z=new Bl(L,L,{friction:.2,restitution:.5,contactEquationStiffness:1e6,contactEquationRelaxation:3});a.addContactMaterial(z);const W=new Bl(L,D,{friction:.4,restitution:.4});a.addContactMaterial(W);const X=new Bl(L,O,{friction:.05,restitution:.7});a.addContactMaterial(X),r=new ce({mass:0,shape:new Ym,material:D}),r.quaternion.setFromEuler(-Math.PI/2,0,0),a.addBody(r),u=new hs(new Vp(c,c,s,32),new kd({color:1118481,roughness:.4,metalness:.2})),u.position.y=-s/2,u.receiveShadow=!0,Y(o).add(u);const _=6,U=new Vp(c,c,_,32,1,!0),G=new kd({color:16777215,transparent:!0,opacity:.1,side:Wa,metalness:.1,roughness:.05}),N=new hs(U,G);N.position.y=_/2,Y(o).add(N);const H=new zp(c,32,16,0,Math.PI*2,0,Math.PI/2),V=new hs(H,G);V.position.y=_,Y(o).add(V);const $=12;for(let k=0;k<$;k++){const Q=k/$*Math.PI*2,et=Math.cos(Q)*c,at=Math.sin(Q)*c,q=new ce({mass:0,shape:new Ym,material:O});q.position.set(et,_/2,at),q.quaternion.setFromEuler(0,-Q-Math.PI/2,0),a.addBody(q)}const j=new ce({mass:0,shape:new Ym,material:O});j.position.set(0,_+c,0),j.quaternion.setFromEuler(Math.PI/2,0,0),a.addBody(j);for(let k=0;k<2;k++){const Q=m();Y(o).add(Q);const et=new ce({mass:20,shape:new Mv(new tt(l.size/2,l.size/2,l.size/2)),material:L,linearDamping:.4,angularDamping:.3});et.position.set(k===0?-7.2*1.2:l.size*1.2,l.size/2,0),a.addBody(et),x.push({mesh:Q,body:et})}T()}function T(){if(h=requestAnimationFrame(T),a.fixedStep(),x.forEach(b=>{const I=b.body.velocity;I.length()>30&&I.scale(30/I.length(),I);const L=20,D=b.body.angularVelocity;D.length()>L&&D.scale(L/D.length(),D),b.mesh.position.copy(b.body.position),b.mesh.quaternion.copy(b.body.quaternion)}),n){const b=x.every(I=>I.body.velocity.length()<.3&&I.body.angularVelocity.length()<.3),F=Date.now()-p>f()*1e3;b&&F&&setTimeout(()=>{n&&(n=!1,S())},300)}e.render(Y(o),E)}function S(){const b=x.map(F=>{const I=F.mesh.quaternion,L=new St(0,1,0).applyQuaternion(I.clone().invert()),D=[{val:1,vec:new St(0,0,1)},{val:6,vec:new St(0,0,-1)},{val:2,vec:new St(0,1,0)},{val:5,vec:new St(0,-1,0)},{val:3,vec:new St(1,0,0)},{val:4,vec:new St(-1,0,0)}];let O=-1/0,z=1;return D.forEach(W=>{const X=W.vec.dot(L);X>O&&(O=X,z=W.val)}),z});y("rolled",{dice:b,total:b[0]+b[1]})}function w(){n||(n=!0,y("rollStart"),p=Date.now(),x.forEach(b=>{b.body.wakeUp(),b.body.velocity.set((Math.random()>.5?1:-1)*(15+Math.random()*10),4+Math.random()*4,(Math.random()>.5?1:-1)*(15+Math.random()*10)),b.body.angularVelocity.set((Math.random()-.5)*15,(Math.random()-.5)*15,(Math.random()-.5)*15)}),u&&Wg.to({},{duration:f(),onUpdate(){const b=this.progress(),F=Date.now()*.016,I=(1-b*.8)*1,L=I*6,D=I*.3,O=Math.abs(Math.sin(F))*L;u.position.y=-s/2+O,r.position.y=O*.5,u.position.x=0,u.position.z=0,r.position.x=0,r.position.z=0;const z=Math.sin(F*.5)*D,W=Math.cos(F*.5)*D;if(r.quaternion.setFromEuler(-Math.PI/2+z,0,W),x.forEach(X=>{X.body.wakeUp();const _=Math.sin(F)>0?.4:.1,U=new tt((Math.random()-.5)*1200*I,(200+Math.random()*300)*I*_,(Math.random()-.5)*1200*I);X.body.applyForce(U,X.body.position),X.body.velocity.length()<18&&X.body.velocity.set(X.body.velocity.x+(Math.random()-.5)*60*I,X.body.velocity.y+10*I,X.body.velocity.z+(Math.random()-.5)*60*I),X.body.angularVelocity.length()<3&&X.body.angularVelocity.set((Math.random()-.5)*40*I,(Math.random()-.5)*40*I,(Math.random()-.5)*40*I),Math.random()>.94&&X.body.position.y<4.5&&X.body.applyImpulse(new tt(0,150*I,0),X.body.position)}),x.length>=2&&x[0].body&&x[1].body){const X=x[0].body,_=x[1].body,U=l.size*1.1;if(X.position.distanceTo(_.position)<U){const N=X.position.vsub(_.position);N.normalize();const H=100*I;X.applyImpulse(N.scale(H),X.position),_.applyImpulse(N.scale(-H),_.position)}}},onComplete:()=>{Wg.to(u.position,{x:0,y:-s/2,z:0,duration:.4,ease:"power2.out"}),r.position.set(0,0,0),r.quaternion.setFromEuler(-Math.PI/2,0,0)}}))}function A(){!Y(C)||!E||!e||(E.aspect=Y(C).clientWidth/Y(C).clientHeight,E.updateProjectionMatrix(),e.setSize(Y(C).clientWidth,Y(C).clientHeight))}vc(()=>{g(),window.addEventListener("resize",A)}),Mx(()=>{window.removeEventListener("resize",A),cancelAnimationFrame(h),e&&(e.dispose(),e.forceContextLoss())}),nn(()=>(cn(i()),Y(C),Y(o)),()=>{i()&&Y(C)&&!Y(o)&&g()}),ih();var M={roll:w};ir();var R=C8(),P=ht(R);return Op(P,b=>ut(C,b),()=>Y(C)),$e("click",P,w),$e("click",R,f3(()=>y("close"))),Gt(v,R),B0(t,"roll",w),Os(M)}var w8=Jt('<span class="text-[10px] bg-emerald-500 text-black px-1.5 py-0.5 rounded-md not-italic font-black">YOU</span>'),M8=Jt('<span class="flex items-center gap-1 text-[9px] font-bold text-emerald-400 uppercase tracking-tighter"><span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span> Online</span>'),R8=Jt('<span class="flex items-center gap-1 text-[9px] font-bold text-zinc-600 uppercase tracking-tighter"><span class="w-1.5 h-1.5 rounded-full bg-zinc-700"></span> Offline</span>'),P8=Jt('<span class="flex items-center gap-1 text-[9px] font-bold text-zinc-500 uppercase tracking-tighter ml-1"><!> Local</span>'),b8=Jt('<tr><td class="px-6 py-4"><div></div></td><td class="px-6 py-4"><div class="flex items-center gap-3"><div><!></div> <div class="flex flex-col"><span class="font-black text-white uppercase tracking-tight italic flex items-center gap-2"> <!></span> <div class="flex items-center gap-2 mt-0.5"><!> <!></div></div></div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-white tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-emerald-400 tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-yellow-400 tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-red-400 tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-zinc-500 tabular-nums"><!> </div></td></tr>'),I8=Jt('<div class="py-20 flex flex-col items-center justify-center text-zinc-500"><!> <p class="font-black uppercase tracking-widest text-sm italic">No ranking players yet</p></div>'),L8=Jt('<div class="fixed inset-0 z-[110] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-300"><div class="w-full max-w-4xl p-8 bg-[#1a4d2e] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8),inset_0_0_30px_rgba(0,0,0,0.4)] relative overflow-hidden group"><div class="flex items-center justify-between mb-8 relative z-10"><div class="flex items-center gap-4"><div class="p-3 rounded-2xl bg-yellow-500/20 border border-yellow-500/30 text-yellow-500 shadow-lg"><!></div> <div><h2 class="text-3xl font-black text-white tracking-tighter uppercase italic leading-none">Global <span class="text-emerald-400">Leaderboard</span></h2> <div class="flex items-center gap-2 mt-1"><span class="flex h-2 w-2 relative"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span></span> <p class="text-zinc-400 text-xs font-medium uppercase tracking-widest"> </p></div></div></div> <div class="flex items-center gap-3"><button class="flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/20 transition-all disabled:opacity-50" title="Refresh Stats"><!> <span class="text-xs font-black uppercase tracking-widest">Refresh</span></button> <button class="p-2 rounded-xl bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-all hover:scale-110"><!></button></div></div> <div class="relative z-10 overflow-hidden rounded-2xl border border-white/5 bg-black/40 shadow-inner max-h-[60vh] overflow-y-auto custom-scrollbar"><table class="w-full text-left border-collapse"><thead><tr class="bg-black/60 border-b border-white/10"><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest">Rank</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest">Player</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Balance</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Highest</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Win</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Loss</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Resets</th></tr></thead><tbody class="divide-y divide-white/5"></tbody></table> <!></div> <div class="absolute -bottom-24 -left-24 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none"></div> <div class="absolute -top-24 -right-24 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none"></div></div></div>');function F8(v,t){Ds(t,!1);const i=ue(),f=Zo();let y=Pe(t,"users",24,()=>[]),C=Pe(t,"loading",8,!1);function o(R){if(!R)return!1;const P=new Date(R).getTime();return Date.now()-P<6e4}nn(()=>cn(y()),()=>{ut(i,[...y()].filter(R=>R.username!=="Guest").sort((R,P)=>{const b=(P.balance||0)-(R.balance||0);if(b!==0)return b;const F=o(R.lastUpdate),I=o(P.lastUpdate);return F&&!I?-1:!F&&I?1:(P.highestBalance||0)-(R.highestBalance||0)}))}),ih(),ir();var E=L8(),e=ht(E),a=ht(e),x=ht(a),u=ht(x),r=ht(u);V0(r,{size:32});var h=xt(u,2),n=xt(ht(h),2),l=xt(ht(n),2),c=ht(l),s=xt(x,2),d=ht(s),m=ht(d);{let R=en(()=>C()?"animate-spin":"");ic(m,{size:18,get class(){return Y(R)}})}var p=xt(d,2),g=ht(p);Sv(g,{size:24});var T=xt(a,2),S=ht(T),w=xt(ht(S));Yi(w,5,()=>Y(i),Xi,(R,P,b)=>{var F=b8(),I=ht(F),L=ht(I);Xe(L,1,`flex items-center justify-center w-8 h-8 rounded-lg font-black italic 
                  ${b===0?"bg-yellow-500 text-black shadow-[0_0_15px_rgba(234,179,8,0.4)]":b===1?"bg-zinc-300 text-black shadow-[0_0_15px_rgba(212,212,216,0.3)]":b===2?"bg-orange-400 text-black shadow-[0_0_15px_rgba(251,146,60,0.3)]":"bg-white/5 text-zinc-400"}`),L.textContent=b+1;var D=xt(I),O=ht(D),z=ht(O),W=ht(z);vC(W,{size:16});var X=xt(z,2),_=ht(X),U=ht(_),G=xt(U);{var N=Ut=>{var Xt=w8();Gt(Ut,Xt)};Ae(G,Ut=>{Y(P),_t(()=>Y(P).isYou)&&Ut(N)})}var H=xt(_,2),V=ht(H);{var $=Ut=>{var Xt=M8();Gt(Ut,Xt)},j=Ut=>{var Xt=R8();Gt(Ut,Xt)};Ae(V,Ut=>{Y(P),_t(()=>o(Y(P).lastUpdate))?Ut($):Ut(j,!1)})}var k=xt(V,2);{var Q=Ut=>{var Xt=P8(),Pt=ht(Xt);T3(Pt,{size:10}),Gt(Ut,Xt)};Ae(k,Ut=>{Y(P),_t(()=>Y(P).isLocal)&&Ut(Q)})}var et=xt(D),at=ht(et),q=ht(at);U0(q,{size:14,class:"text-emerald-400"});var ft=xt(q),vt=xt(et),Tt=ht(vt),ct=ht(Tt);U0(ct,{size:14});var Nt=xt(ct),yt=xt(vt),it=ht(yt),Z=ht(it);R3(Z,{size:14});var lt=xt(Z),pt=xt(yt),Rt=ht(pt),At=ht(Rt);M3(At,{size:14});var Kt=xt(At),Bt=xt(pt),Wt=ht(Bt),he=ht(Wt);ic(he,{size:12});var zt=xt(he);si((Ut,Xt,Pt,$t)=>{Xe(F,1,`hover:bg-white/[0.02] transition-colors ${Y(P),_t(()=>Y(P).isYou?"bg-emerald-500/10":b===0?"bg-yellow-500/5":"")??""}`),Xe(z,1,`p-1.5 rounded-lg ${Y(P),_t(()=>Y(P).isYou?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-emerald-500/10 border-emerald-500/20 text-emerald-400")??""} border`),we(U,`${Y(P),_t(()=>Y(P).nickname||Y(P).username)??""} `),we(ft,` ${Ut??""}`),we(Nt,` ${Xt??""}`),we(lt,` ${Pt??""}`),we(Kt,` ${$t??""}`),we(zt,` ${Y(P),_t(()=>Y(P).resetCount||0)??""}`)},[()=>(Y(P),_t(()=>(Y(P).balance||0).toLocaleString(void 0,{minimumFractionDigits:2}))),()=>(Y(P),_t(()=>(Y(P).highestBalance||0).toLocaleString(void 0,{minimumFractionDigits:2}))),()=>(Y(P),_t(()=>(Y(P).largestWin||0).toLocaleString(void 0,{minimumFractionDigits:2}))),()=>(Y(P),_t(()=>(Y(P).largestLoss||0).toLocaleString(void 0,{minimumFractionDigits:2})))]),Gt(R,F)});var A=xt(S,2);{var M=R=>{var P=I8(),b=ht(P);V0(b,{size:48,class:"opacity-10 mb-4"}),Gt(R,P)};Ae(A,R=>{Y(i),_t(()=>Y(i).length===0)&&R(M)})}si(()=>{we(c,`Live Updates â¢ Showing ${Y(i),_t(()=>Y(i).length)??""} Players`),d.disabled=C()}),$e("click",d,()=>f("refresh")),$e("click",p,()=>f("close")),Gt(v,E),Os()}var D8=Jt('<div class="p-4 rounded-2xl bg-black/40 border border-white/5 shadow-inner"><h4 class="text-xs font-black text-emerald-400 uppercase mb-2 tracking-tight"> </h4> <p class="text-[11px] text-zinc-400 leading-relaxed font-medium uppercase"> </p></div>'),O8=Jt('<tr class="hover:bg-white/[0.02] transition-colors"><td class="px-4 py-3 text-xs font-black text-white uppercase"> </td><td class="px-4 py-3 text-xs font-black text-emerald-400 tabular-nums"> </td><td class="px-4 py-3 text-[10px] font-medium text-zinc-500 uppercase leading-tight"> </td></tr>'),N8=Jt('<div class="fixed inset-0 z-[150] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-300 px-4"><div class="w-full max-w-2xl bg-[#0a2e0a] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] overflow-hidden"><div class="p-6 border-b border-white/10 flex items-center justify-between bg-black/20 shrink-0"><div class="flex items-center gap-3"><div class="p-2 rounded-xl bg-emerald-500/20 text-emerald-400"><!></div> <div><h2 class="text-2xl font-black text-white tracking-tighter uppercase italic leading-none">How to <span class="text-emerald-400">Play</span></h2> <p class="text-[10px] font-medium text-zinc-500 uppercase tracking-widest mt-1">Rules & Payouts Guide</p></div></div> <button class="p-2 rounded-xl bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-all hover:scale-110"><!></button></div> <div class="flex-1 overflow-y-auto p-6 space-y-8 custom-scrollbar svelte-1eyj1wx"><section><div class="flex items-center gap-2 mb-4"><!> <h3 class="text-xs font-black text-zinc-400 uppercase tracking-[0.2em]">Game Rules</h3></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"></div></section> <section><div class="flex items-center gap-2 mb-4"><!> <h3 class="text-xs font-black text-zinc-400 uppercase tracking-[0.2em]">Payout Guide</h3></div> <div class="rounded-2xl border border-white/5 overflow-hidden bg-black/40 shadow-inner"><table class="w-full text-left"><thead><tr class="bg-black/60 border-b border-white/10"><th class="px-4 py-3 text-[10px] font-black text-zinc-500 uppercase">Bet Type</th><th class="px-4 py-3 text-[10px] font-black text-zinc-500 uppercase">Payout</th><th class="px-4 py-3 text-[10px] font-black text-zinc-500 uppercase">Description</th></tr></thead><tbody class="divide-y divide-white/5"></tbody></table></div></section> <section class="p-4 rounded-2xl bg-emerald-500/10 border border-emerald-500/20"><div class="flex items-start gap-3"><div class="p-2 rounded-lg bg-emerald-500/20 text-emerald-400 shrink-0"><!></div> <div><h4 class="text-xs font-black text-emerald-400 uppercase tracking-tight mb-1">Pro Tip</h4> <p class="text-[10px] font-medium text-zinc-400 uppercase leading-relaxed">Use "Odds" bets behind your Pass Line. They pay true mathematical odds with zero house edge, making them the best bets in the casino!</p></div></div></section></div> <div class="p-6 border-t border-white/10 bg-black/20 flex justify-center shrink-0"><button class="px-8 py-3 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-black font-black uppercase tracking-widest text-xs transition-all active:scale-95 shadow-lg shadow-emerald-500/20">Got it!</button></div></div></div>');function B8(v,t){Ds(t,!1);const i=Zo(),f=[{title:"The Game",content:"Crapless Bubble Craps is a variation where 2, 3, 11, and 12 are point numbers instead of immediate losers (craps) or winners (naturals) on the come-out roll."},{title:"Come Out Roll",content:"The first roll of a round. 7 is an immediate win for the Pass Line. Any other number becomes the 'Point'."},{title:"Point Phase",content:"Once a point is established, you want to roll that number again before rolling a 7. If you roll the point, you win. If you roll a 7, you lose (Seven Out)."}],y=[{bet:"Pass Line",payout:"1 to 1",description:"Win on 7 (come out) or hitting the point."},{bet:"Place Bets (6, 8)",payout:"7 to 6",description:"Bet on specific numbers to roll before a 7."},{bet:"Place Bets (5, 9)",payout:"7 to 5",description:"Bet on specific numbers to roll before a 7."},{bet:"Place Bets (4, 10)",payout:"9 to 5",description:"Bet on specific numbers to roll before a 7."},{bet:"Place Bets (2, 3, 11, 12)",payout:"11 to 2 / 3 to 1",description:"Extreme outside numbers in Crapless Craps."},{bet:"Hardways",payout:"7 to 1 / 9 to 1",description:"Rolling a number as a pair (e.g., 2-2 for Hard 4)."},{bet:"Any 7",payout:"4 to 1",description:"The next roll will be a 7."}];ir();var C=N8(),o=ht(C),E=ht(o),e=ht(E),a=ht(e),x=ht(a);pC(x,{size:24});var u=xt(e,2),r=ht(u);Sv(r,{size:20});var h=xt(E,2),n=ht(h),l=ht(n),c=ht(l);E3(c,{size:16,class:"text-emerald-400"});var s=xt(l,2);Yi(s,5,()=>f,Xi,(F,I)=>{var L=D8(),D=ht(L),O=ht(D),z=xt(D,2),W=ht(z);si(()=>{we(O,Y(I).title),we(W,Y(I).content)}),Gt(F,L)});var d=xt(n,2),m=ht(d),p=ht(m);U0(p,{size:16,class:"text-emerald-400"});var g=xt(m,2),T=ht(g),S=xt(ht(T));Yi(S,5,()=>y,Xi,(F,I)=>{var L=O8(),D=ht(L),O=ht(D),z=xt(D),W=ht(z),X=xt(z),_=ht(X);si(()=>{we(O,Y(I).bet),we(W,Y(I).payout),we(_,Y(I).description)}),Gt(F,L)});var w=xt(d,2),A=ht(w),M=ht(A),R=ht(M);L3(R,{size:16});var P=xt(h,2),b=ht(P);$e("click",u,()=>i("close")),$e("click",b,()=>i("close")),Gt(v,C),Os()}const U8=()=>{};var bE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=function(v){const t=[];let i=0;for(let f=0;f<v.length;f++){let y=v.charCodeAt(f);y<128?t[i++]=y:y<2048?(t[i++]=y>>6|192,t[i++]=y&63|128):(y&64512)===55296&&f+1<v.length&&(v.charCodeAt(f+1)&64512)===56320?(y=65536+((y&1023)<<10)+(v.charCodeAt(++f)&1023),t[i++]=y>>18|240,t[i++]=y>>12&63|128,t[i++]=y>>6&63|128,t[i++]=y&63|128):(t[i++]=y>>12|224,t[i++]=y>>6&63|128,t[i++]=y&63|128)}return t},V8=function(v){const t=[];let i=0,f=0;for(;i<v.length;){const y=v[i++];if(y<128)t[f++]=String.fromCharCode(y);else if(y>191&&y<224){const C=v[i++];t[f++]=String.fromCharCode((y&31)<<6|C&63)}else if(y>239&&y<365){const C=v[i++],o=v[i++],E=v[i++],e=((y&7)<<18|(C&63)<<12|(o&63)<<6|E&63)-65536;t[f++]=String.fromCharCode(55296+(e>>10)),t[f++]=String.fromCharCode(56320+(e&1023))}else{const C=v[i++],o=v[i++];t[f++]=String.fromCharCode((y&15)<<12|(C&63)<<6|o&63)}}return t.join("")},nw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(v,t){if(!Array.isArray(v))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,f=[];for(let y=0;y<v.length;y+=3){const C=v[y],o=y+1<v.length,E=o?v[y+1]:0,e=y+2<v.length,a=e?v[y+2]:0,x=C>>2,u=(C&3)<<4|E>>4;let r=(E&15)<<2|a>>6,h=a&63;e||(h=64,o||(r=64)),f.push(i[x],i[u],i[r],i[h])}return f.join("")},encodeString(v,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(v):this.encodeByteArray(iw(v),t)},decodeString(v,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(v):V8(this.decodeStringToByteArray(v,t))},decodeStringToByteArray(v,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,f=[];for(let y=0;y<v.length;){const C=i[v.charAt(y++)],E=y<v.length?i[v.charAt(y)]:0;++y;const a=y<v.length?i[v.charAt(y)]:64;++y;const u=y<v.length?i[v.charAt(y)]:64;if(++y,C==null||E==null||a==null||u==null)throw new z8;const r=C<<2|E>>4;if(f.push(r),a!==64){const h=E<<4&240|a>>2;if(f.push(h),u!==64){const n=a<<6&192|u;f.push(n)}}}return f},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let v=0;v<this.ENCODED_VALS.length;v++)this.byteToCharMap_[v]=this.ENCODED_VALS.charAt(v),this.charToByteMap_[this.byteToCharMap_[v]]=v,this.byteToCharMapWebSafe_[v]=this.ENCODED_VALS_WEBSAFE.charAt(v),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[v]]=v,v>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(v)]=v,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(v)]=v)}}};class z8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G8=function(v){const t=iw(v);return nw.encodeByteArray(t,!0)},sw=function(v){return G8(v).replace(/\./g,"")},rw=function(v){try{return nw.decodeString(v,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=()=>W8().__FIREBASE_DEFAULTS__,_8=()=>{if(typeof process>"u"||typeof bE>"u")return;const v=bE.__FIREBASE_DEFAULTS__;if(v)return JSON.parse(v)},X8=()=>{if(typeof document>"u")return;let v;try{v=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=v&&rw(v[1]);return t&&JSON.parse(t)},Iv=()=>{try{return U8()||H8()||_8()||X8()}catch(v){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${v}`);return}},Y8=v=>{var t,i;return(i=(t=Iv())==null?void 0:t.emulatorHosts)==null?void 0:i[v]},aw=()=>{var v;return(v=Iv())==null?void 0:v.config},ow=v=>{var t;return(t=Iv())==null?void 0:t[`_${v}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,f)=>{i?this.reject(i):this.resolve(f),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(v){try{return(v.startsWith("http://")||v.startsWith("https://")?new URL(v).hostname:v).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lw(v){return(await fetch(v,{credentials:"include"})).ok}const oc={};function $8(){const v={prod:[],emulator:[]};for(const t of Object.keys(oc))oc[t]?v.emulator.push(t):v.prod.push(t);return v}function K8(v){let t=document.getElementById(v),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",v),i=!0),{created:i,element:t}}let IE=!1;function j8(v,t){if(typeof window>"u"||typeof document>"u"||!Ju(window.location.host)||oc[v]===t||oc[v]||IE)return;oc[v]=t;function i(r){return`__firebase__banner__${r}`}const f="__firebase__banner",C=$8().prod.length>0;function o(){const r=document.getElementById(f);r&&r.remove()}function E(r){r.style.display="flex",r.style.background="#7faaf0",r.style.position="fixed",r.style.bottom="5px",r.style.left="5px",r.style.padding=".5em",r.style.borderRadius="5px",r.style.alignItems="center"}function e(r,h){r.setAttribute("width","24"),r.setAttribute("id",h),r.setAttribute("height","24"),r.setAttribute("viewBox","0 0 24 24"),r.setAttribute("fill","none"),r.style.marginLeft="-6px"}function a(){const r=document.createElement("span");return r.style.cursor="pointer",r.style.marginLeft="16px",r.style.fontSize="24px",r.innerHTML=" &times;",r.onclick=()=>{IE=!0,o()},r}function x(r,h){r.setAttribute("id",h),r.innerText="Learn more",r.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",r.setAttribute("target","__blank"),r.style.paddingLeft="5px",r.style.textDecoration="underline"}function u(){const r=K8(f),h=i("text"),n=document.getElementById(h)||document.createElement("span"),l=i("learnmore"),c=document.getElementById(l)||document.createElement("a"),s=i("preprendIcon"),d=document.getElementById(s)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.created){const m=r.element;E(m),x(c,l);const p=a();e(d,s),m.append(d,n,c,p),document.body.appendChild(m)}C?(n.innerText="Preview backend disconnected.",d.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(d.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,n.innerText="Preview backend running in this workspace."),n.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",u):u()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($n())}function J8(){var t;const v=(t=Iv())==null?void 0:t.forceEnvironment;if(v==="node")return!0;if(v==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hw(){const v=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof v=="object"&&v.id!==void 0}function q8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tB(){const v=$n();return v.indexOf("MSIE ")>=0||v.indexOf("Trident/")>=0}function eB(){return!J8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uw(){try{return typeof indexedDB=="object"}catch{return!1}}function fw(){return new Promise((v,t)=>{try{let i=!0;const f="validate-browser-context-for-indexeddb-analytics-module",y=self.indexedDB.open(f);y.onsuccess=()=>{y.result.close(),i||self.indexedDB.deleteDatabase(f),v(!0)},y.onupgradeneeded=()=>{i=!1},y.onerror=()=>{var C;t(((C=y.error)==null?void 0:C.message)||"")}}catch(i){t(i)}})}function iB(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB="FirebaseError";class Mr extends Error{constructor(t,i,f){super(i),this.code=t,this.customData=f,this.name=nB,Object.setPrototypeOf(this,Mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sh.prototype.create)}}class sh{constructor(t,i,f){this.service=t,this.serviceName=i,this.errors=f}create(t,...i){const f=i[0]||{},y=`${this.service}/${t}`,C=this.errors[t],o=C?sB(C,f):"Error",E=`${this.serviceName}: ${o} (${y}).`;return new Mr(y,E,f)}}function sB(v,t){return v.replace(rB,(i,f)=>{const y=t[f];return y!=null?String(y):`<${f}?>`})}const rB=/\{\$([^}]+)}/g;function aB(v){for(const t in v)if(Object.prototype.hasOwnProperty.call(v,t))return!1;return!0}function _o(v,t){if(v===t)return!0;const i=Object.keys(v),f=Object.keys(t);for(const y of i){if(!f.includes(y))return!1;const C=v[y],o=t[y];if(LE(C)&&LE(o)){if(!_o(C,o))return!1}else if(C!==o)return!1}for(const y of f)if(!i.includes(y))return!1;return!0}function LE(v){return v!==null&&typeof v=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(v){const t=[];for(const[i,f]of Object.entries(v))Array.isArray(f)?f.forEach(y=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(y))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(f));return t.length?"&"+t.join("&"):""}function Kf(v){const t={};return v.replace(/^\?/,"").split("&").forEach(f=>{if(f){const[y,C]=f.split("=");t[decodeURIComponent(y)]=decodeURIComponent(C)}}),t}function jf(v){const t=v.indexOf("?");if(!t)return"";const i=v.indexOf("#",t);return v.substring(t,i>0?i:void 0)}function oB(v,t){const i=new lB(v,t);return i.subscribe.bind(i)}class lB{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(f=>{this.error(f)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,f){let y;if(t===void 0&&i===void 0&&f===void 0)throw new Error("Missing Observer.");hB(t,["next","error","complete"])?y=t:y={next:t,error:i,complete:f},y.next===void 0&&(y.next=i0),y.error===void 0&&(y.error=i0),y.complete===void 0&&(y.complete=i0);const C=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?y.error(this.finalError):y.complete()}catch{}}),this.observers.push(y),C}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(f){typeof console<"u"&&console.error&&console.error(f)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hB(v,t){if(typeof v!="object"||v===null)return!1;for(const i of t)if(i in v&&typeof v[i]=="function")return!0;return!1}function i0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=1e3,fB=2,cB=14400*1e3,dB=.5;function FE(v,t=uB,i=fB){const f=t*Math.pow(i,v),y=Math.round(dB*f*(Math.random()-.5)*2);return Math.min(cB,f+y)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(v){return v&&v._delegate?v._delegate:v}class Er{constructor(t,i,f){this.name=t,this.instanceFactory=i,this.type=f,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const f=new k8;if(this.instancesDeferred.set(i,f),this.isInitialized(i)||this.shouldAutoInitialize())try{const y=this.getOrInitializeService({instanceIdentifier:i});y&&f.resolve(y)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),f=(t==null?void 0:t.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(y){if(f)return null;throw y}else{if(f)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(mB(t))try{this.getOrInitializeService({instanceIdentifier:gl})}catch{}for(const[i,f]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(i);try{const C=this.getOrInitializeService({instanceIdentifier:y});f.resolve(C)}catch{}}}}clearInstance(t=gl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gl){return this.instances.has(t)}getOptions(t=gl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,f=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(f))throw Error(`${this.name}(${f}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const y=this.getOrInitializeService({instanceIdentifier:f,options:i});for(const[C,o]of this.instancesDeferred.entries()){const E=this.normalizeInstanceIdentifier(C);f===E&&o.resolve(y)}return y}onInit(t,i){const f=this.normalizeInstanceIdentifier(i),y=this.onInitCallbacks.get(f)??new Set;y.add(t),this.onInitCallbacks.set(f,y);const C=this.instances.get(f);return C&&t(C,f),()=>{y.delete(t)}}invokeOnInitCallbacks(t,i){const f=this.onInitCallbacks.get(i);if(f)for(const y of f)try{y(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let f=this.instances.get(t);if(!f&&this.component&&(f=this.component.instanceFactory(this.container,{instanceIdentifier:vB(t),options:i}),this.instances.set(t,f),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(f,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,f)}catch{}return f||null}normalizeInstanceIdentifier(t=gl){return this.component?this.component.multipleInstances?t:gl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vB(v){return v===gl?void 0:v}function mB(v){return v.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new pB(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(v){v[v.DEBUG=0]="DEBUG",v[v.VERBOSE=1]="VERBOSE",v[v.INFO=2]="INFO",v[v.WARN=3]="WARN",v[v.ERROR=4]="ERROR",v[v.SILENT=5]="SILENT"})(je||(je={}));const xB={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},yB=je.INFO,TB={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},EB=(v,t,...i)=>{if(t<v.logLevel)return;const f=new Date().toISOString(),y=TB[t];if(y)console[y](`[${f}]  ${v.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Lv{constructor(t){this.name=t,this._logLevel=yB,this._logHandler=EB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in je))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?xB[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...t),this._logHandler(this,je.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...t),this._logHandler(this,je.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,je.INFO,...t),this._logHandler(this,je.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,je.WARN,...t),this._logHandler(this,je.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...t),this._logHandler(this,je.ERROR,...t)}}const SB=(v,t)=>t.some(i=>v instanceof i);let DE,OE;function CB(){return DE||(DE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AB(){return OE||(OE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cw=new WeakMap,Hg=new WeakMap,dw=new WeakMap,n0=new WeakMap,ry=new WeakMap;function wB(v){const t=new Promise((i,f)=>{const y=()=>{v.removeEventListener("success",C),v.removeEventListener("error",o)},C=()=>{i(Do(v.result)),y()},o=()=>{f(v.error),y()};v.addEventListener("success",C),v.addEventListener("error",o)});return t.then(i=>{i instanceof IDBCursor&&cw.set(i,v)}).catch(()=>{}),ry.set(t,v),t}function MB(v){if(Hg.has(v))return;const t=new Promise((i,f)=>{const y=()=>{v.removeEventListener("complete",C),v.removeEventListener("error",o),v.removeEventListener("abort",o)},C=()=>{i(),y()},o=()=>{f(v.error||new DOMException("AbortError","AbortError")),y()};v.addEventListener("complete",C),v.addEventListener("error",o),v.addEventListener("abort",o)});Hg.set(v,t)}let _g={get(v,t,i){if(v instanceof IDBTransaction){if(t==="done")return Hg.get(v);if(t==="objectStoreNames")return v.objectStoreNames||dw.get(v);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Do(v[t])},set(v,t,i){return v[t]=i,!0},has(v,t){return v instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in v}};function RB(v){_g=v(_g)}function PB(v){return v===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const f=v.call(s0(this),t,...i);return dw.set(f,t.sort?t.sort():[t]),Do(f)}:AB().includes(v)?function(...t){return v.apply(s0(this),t),Do(cw.get(this))}:function(...t){return Do(v.apply(s0(this),t))}}function bB(v){return typeof v=="function"?PB(v):(v instanceof IDBTransaction&&MB(v),SB(v,CB())?new Proxy(v,_g):v)}function Do(v){if(v instanceof IDBRequest)return wB(v);if(n0.has(v))return n0.get(v);const t=bB(v);return t!==v&&(n0.set(v,t),ry.set(t,v)),t}const s0=v=>ry.get(v);function pw(v,t,{blocked:i,upgrade:f,blocking:y,terminated:C}={}){const o=indexedDB.open(v,t),E=Do(o);return f&&o.addEventListener("upgradeneeded",e=>{f(Do(o.result),e.oldVersion,e.newVersion,Do(o.transaction),e)}),i&&o.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),E.then(e=>{C&&e.addEventListener("close",()=>C()),y&&e.addEventListener("versionchange",a=>y(a.oldVersion,a.newVersion,a))}).catch(()=>{}),E}const IB=["get","getKey","getAll","getAllKeys","count"],LB=["put","add","delete","clear"],r0=new Map;function NE(v,t){if(!(v instanceof IDBDatabase&&!(t in v)&&typeof t=="string"))return;if(r0.get(t))return r0.get(t);const i=t.replace(/FromIndex$/,""),f=t!==i,y=LB.includes(i);if(!(i in(f?IDBIndex:IDBObjectStore).prototype)||!(y||IB.includes(i)))return;const C=async function(o,...E){const e=this.transaction(o,y?"readwrite":"readonly");let a=e.store;return f&&(a=a.index(E.shift())),(await Promise.all([a[i](...E),y&&e.done]))[0]};return r0.set(t,C),C}RB(v=>({...v,get:(t,i,f)=>NE(t,i)||v.get(t,i,f),has:(t,i)=>!!NE(t,i)||v.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(DB(i)){const f=i.getImmediate();return`${f.library}/${f.version}`}else return null}).filter(i=>i).join(" ")}}function DB(v){const t=v.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Xg="@firebase/app",BE="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new Lv("@firebase/app"),OB="@firebase/app-compat",NB="@firebase/analytics-compat",BB="@firebase/analytics",UB="@firebase/app-check-compat",VB="@firebase/app-check",zB="@firebase/auth",GB="@firebase/auth-compat",WB="@firebase/database",HB="@firebase/data-connect",_B="@firebase/database-compat",XB="@firebase/functions",YB="@firebase/functions-compat",kB="@firebase/installations",$B="@firebase/installations-compat",KB="@firebase/messaging",jB="@firebase/messaging-compat",ZB="@firebase/performance",JB="@firebase/performance-compat",QB="@firebase/remote-config",qB="@firebase/remote-config-compat",tU="@firebase/storage",eU="@firebase/storage-compat",iU="@firebase/firestore",nU="@firebase/ai",sU="@firebase/firestore-compat",rU="firebase",aU="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="[DEFAULT]",oU={[Xg]:"fire-core",[OB]:"fire-core-compat",[BB]:"fire-analytics",[NB]:"fire-analytics-compat",[VB]:"fire-app-check",[UB]:"fire-app-check-compat",[zB]:"fire-auth",[GB]:"fire-auth-compat",[WB]:"fire-rtdb",[HB]:"fire-data-connect",[_B]:"fire-rtdb-compat",[XB]:"fire-fn",[YB]:"fire-fn-compat",[kB]:"fire-iid",[$B]:"fire-iid-compat",[KB]:"fire-fcm",[jB]:"fire-fcm-compat",[ZB]:"fire-perf",[JB]:"fire-perf-compat",[QB]:"fire-rc",[qB]:"fire-rc-compat",[tU]:"fire-gcs",[eU]:"fire-gcs-compat",[iU]:"fire-fst",[sU]:"fire-fst-compat",[nU]:"fire-vertex","fire-js":"fire-js",[rU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=new Map,lU=new Map,kg=new Map;function UE(v,t){try{v.container.addComponent(t)}catch(i){Ya.debug(`Component ${t.name} failed to register with FirebaseApp ${v.name}`,i)}}function ea(v){const t=v.name;if(kg.has(t))return Ya.debug(`There were multiple attempts to register component ${t}.`),!1;kg.set(t,v);for(const i of Kp.values())UE(i,v);for(const i of lU.values())UE(i,v);return!0}function rh(v,t){const i=v.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),v.container.getProvider(t)}function Ys(v){return v==null?!1:v.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oo=new sh("app","Firebase",hU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(t,i,f){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=f,this.container.addComponent(new Er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=aU;function vw(v,t={}){let i=v;typeof t!="object"&&(t={name:t});const f={name:Yg,automaticDataCollectionEnabled:!0,...t},y=f.name;if(typeof y!="string"||!y)throw Oo.create("bad-app-name",{appName:String(y)});if(i||(i=aw()),!i)throw Oo.create("no-options");const C=Kp.get(y);if(C){if(_o(i,C.options)&&_o(f,C.config))return C;throw Oo.create("duplicate-app",{appName:y})}const o=new gB(y);for(const e of kg.values())o.addComponent(e);const E=new uU(i,f,o);return Kp.set(y,E),E}function mw(v=Yg){const t=Kp.get(v);if(!t&&v===Yg&&aw())return vw();if(!t)throw Oo.create("no-app",{appName:v});return t}function Qs(v,t,i){let f=oU[v]??v;i&&(f+=`-${i}`);const y=f.match(/\s|\//),C=t.match(/\s|\//);if(y||C){const o=[`Unable to register library "${f}" with version "${t}":`];y&&o.push(`library name "${f}" contains illegal characters (whitespace or "/")`),y&&C&&o.push("and"),C&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ya.warn(o.join(" "));return}ea(new Er(`${f}-version`,()=>({library:f,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU="firebase-heartbeat-database",cU=1,Ac="firebase-heartbeat-store";let a0=null;function gw(){return a0||(a0=pw(fU,cU,{upgrade:(v,t)=>{switch(t){case 0:try{v.createObjectStore(Ac)}catch(i){console.warn(i)}}}}).catch(v=>{throw Oo.create("idb-open",{originalErrorMessage:v.message})})),a0}async function dU(v){try{const i=(await gw()).transaction(Ac),f=await i.objectStore(Ac).get(xw(v));return await i.done,f}catch(t){if(t instanceof Mr)Ya.warn(t.message);else{const i=Oo.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ya.warn(i.message)}}}async function VE(v,t){try{const f=(await gw()).transaction(Ac,"readwrite");await f.objectStore(Ac).put(t,xw(v)),await f.done}catch(i){if(i instanceof Mr)Ya.warn(i.message);else{const f=Oo.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Ya.warn(f.message)}}}function xw(v){return`${v.name}!${v.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=1024,vU=30;class mU{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new xU(i),this._heartbeatsCachePromise=this._storage.read().then(f=>(this._heartbeatsCache=f,f))}async triggerHeartbeat(){var t,i;try{const y=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),C=zE();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===C||this._heartbeatsCache.heartbeats.some(o=>o.date===C))return;if(this._heartbeatsCache.heartbeats.push({date:C,agent:y}),this._heartbeatsCache.heartbeats.length>vU){const o=yU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(f){Ya.warn(f)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=zE(),{heartbeatsToSend:f,unsentEntries:y}=gU(this._heartbeatsCache.heartbeats),C=sw(JSON.stringify({version:2,heartbeats:f}));return this._heartbeatsCache.lastSentHeartbeatDate=i,y.length>0?(this._heartbeatsCache.heartbeats=y,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),C}catch(i){return Ya.warn(i),""}}}function zE(){return new Date().toISOString().substring(0,10)}function gU(v,t=pU){const i=[];let f=v.slice();for(const y of v){const C=i.find(o=>o.agent===y.agent);if(C){if(C.dates.push(y.date),GE(i)>t){C.dates.pop();break}}else if(i.push({agent:y.agent,dates:[y.date]}),GE(i)>t){i.pop();break}f=f.slice(1)}return{heartbeatsToSend:i,unsentEntries:f}}class xU{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uw()?fw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await dU(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const f=await this.read();return VE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??f.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const f=await this.read();return VE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??f.lastSentHeartbeatDate,heartbeats:[...f.heartbeats,...t.heartbeats]})}else return}}function GE(v){return sw(JSON.stringify({version:2,heartbeats:v})).length}function yU(v){if(v.length===0)return-1;let t=0,i=v[0].date;for(let f=1;f<v.length;f++)v[f].date<i&&(i=v[f].date,t=f);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(v){ea(new Er("platform-logger",t=>new FB(t),"PRIVATE")),ea(new Er("heartbeat",t=>new mU(t),"PRIVATE")),Qs(Xg,BE,v),Qs(Xg,BE,"esm2020"),Qs("fire-js","")}TU("");var EU="firebase",SU="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qs(EU,SU,"app");var WE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var No,yw;(function(){var v;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,w){function A(){}A.prototype=w.prototype,S.F=w.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(M,R,P){for(var b=Array(arguments.length-2),F=2;F<arguments.length;F++)b[F-2]=arguments[F];return w.prototype[R].apply(M,b)}}function i(){this.blockSize=-1}function f(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(f,i),f.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function y(S,w,A){A||(A=0);const M=Array(16);if(typeof w=="string")for(var R=0;R<16;++R)M[R]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(R=0;R<16;++R)M[R]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=S.g[0],A=S.g[1],R=S.g[2];let P=S.g[3],b;b=w+(P^A&(R^P))+M[0]+3614090360&4294967295,w=A+(b<<7&4294967295|b>>>25),b=P+(R^w&(A^R))+M[1]+3905402710&4294967295,P=w+(b<<12&4294967295|b>>>20),b=R+(A^P&(w^A))+M[2]+606105819&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(w^R&(P^w))+M[3]+3250441966&4294967295,A=R+(b<<22&4294967295|b>>>10),b=w+(P^A&(R^P))+M[4]+4118548399&4294967295,w=A+(b<<7&4294967295|b>>>25),b=P+(R^w&(A^R))+M[5]+1200080426&4294967295,P=w+(b<<12&4294967295|b>>>20),b=R+(A^P&(w^A))+M[6]+2821735955&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(w^R&(P^w))+M[7]+4249261313&4294967295,A=R+(b<<22&4294967295|b>>>10),b=w+(P^A&(R^P))+M[8]+1770035416&4294967295,w=A+(b<<7&4294967295|b>>>25),b=P+(R^w&(A^R))+M[9]+2336552879&4294967295,P=w+(b<<12&4294967295|b>>>20),b=R+(A^P&(w^A))+M[10]+4294925233&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(w^R&(P^w))+M[11]+2304563134&4294967295,A=R+(b<<22&4294967295|b>>>10),b=w+(P^A&(R^P))+M[12]+1804603682&4294967295,w=A+(b<<7&4294967295|b>>>25),b=P+(R^w&(A^R))+M[13]+4254626195&4294967295,P=w+(b<<12&4294967295|b>>>20),b=R+(A^P&(w^A))+M[14]+2792965006&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(w^R&(P^w))+M[15]+1236535329&4294967295,A=R+(b<<22&4294967295|b>>>10),b=w+(R^P&(A^R))+M[1]+4129170786&4294967295,w=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(w^A))+M[6]+3225465664&4294967295,P=w+(b<<9&4294967295|b>>>23),b=R+(w^A&(P^w))+M[11]+643717713&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^w&(R^P))+M[0]+3921069994&4294967295,A=R+(b<<20&4294967295|b>>>12),b=w+(R^P&(A^R))+M[5]+3593408605&4294967295,w=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(w^A))+M[10]+38016083&4294967295,P=w+(b<<9&4294967295|b>>>23),b=R+(w^A&(P^w))+M[15]+3634488961&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^w&(R^P))+M[4]+3889429448&4294967295,A=R+(b<<20&4294967295|b>>>12),b=w+(R^P&(A^R))+M[9]+568446438&4294967295,w=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(w^A))+M[14]+3275163606&4294967295,P=w+(b<<9&4294967295|b>>>23),b=R+(w^A&(P^w))+M[3]+4107603335&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^w&(R^P))+M[8]+1163531501&4294967295,A=R+(b<<20&4294967295|b>>>12),b=w+(R^P&(A^R))+M[13]+2850285829&4294967295,w=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(w^A))+M[2]+4243563512&4294967295,P=w+(b<<9&4294967295|b>>>23),b=R+(w^A&(P^w))+M[7]+1735328473&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^w&(R^P))+M[12]+2368359562&4294967295,A=R+(b<<20&4294967295|b>>>12),b=w+(A^R^P)+M[5]+4294588738&4294967295,w=A+(b<<4&4294967295|b>>>28),b=P+(w^A^R)+M[8]+2272392833&4294967295,P=w+(b<<11&4294967295|b>>>21),b=R+(P^w^A)+M[11]+1839030562&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^w)+M[14]+4259657740&4294967295,A=R+(b<<23&4294967295|b>>>9),b=w+(A^R^P)+M[1]+2763975236&4294967295,w=A+(b<<4&4294967295|b>>>28),b=P+(w^A^R)+M[4]+1272893353&4294967295,P=w+(b<<11&4294967295|b>>>21),b=R+(P^w^A)+M[7]+4139469664&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^w)+M[10]+3200236656&4294967295,A=R+(b<<23&4294967295|b>>>9),b=w+(A^R^P)+M[13]+681279174&4294967295,w=A+(b<<4&4294967295|b>>>28),b=P+(w^A^R)+M[0]+3936430074&4294967295,P=w+(b<<11&4294967295|b>>>21),b=R+(P^w^A)+M[3]+3572445317&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^w)+M[6]+76029189&4294967295,A=R+(b<<23&4294967295|b>>>9),b=w+(A^R^P)+M[9]+3654602809&4294967295,w=A+(b<<4&4294967295|b>>>28),b=P+(w^A^R)+M[12]+3873151461&4294967295,P=w+(b<<11&4294967295|b>>>21),b=R+(P^w^A)+M[15]+530742520&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^w)+M[2]+3299628645&4294967295,A=R+(b<<23&4294967295|b>>>9),b=w+(R^(A|~P))+M[0]+4096336452&4294967295,w=A+(b<<6&4294967295|b>>>26),b=P+(A^(w|~R))+M[7]+1126891415&4294967295,P=w+(b<<10&4294967295|b>>>22),b=R+(w^(P|~A))+M[14]+2878612391&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~w))+M[5]+4237533241&4294967295,A=R+(b<<21&4294967295|b>>>11),b=w+(R^(A|~P))+M[12]+1700485571&4294967295,w=A+(b<<6&4294967295|b>>>26),b=P+(A^(w|~R))+M[3]+2399980690&4294967295,P=w+(b<<10&4294967295|b>>>22),b=R+(w^(P|~A))+M[10]+4293915773&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~w))+M[1]+2240044497&4294967295,A=R+(b<<21&4294967295|b>>>11),b=w+(R^(A|~P))+M[8]+1873313359&4294967295,w=A+(b<<6&4294967295|b>>>26),b=P+(A^(w|~R))+M[15]+4264355552&4294967295,P=w+(b<<10&4294967295|b>>>22),b=R+(w^(P|~A))+M[6]+2734768916&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~w))+M[13]+1309151649&4294967295,A=R+(b<<21&4294967295|b>>>11),b=w+(R^(A|~P))+M[4]+4149444226&4294967295,w=A+(b<<6&4294967295|b>>>26),b=P+(A^(w|~R))+M[11]+3174756917&4294967295,P=w+(b<<10&4294967295|b>>>22),b=R+(w^(P|~A))+M[2]+718787259&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~w))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+P&4294967295}f.prototype.v=function(S,w){w===void 0&&(w=S.length);const A=w-this.blockSize,M=this.C;let R=this.h,P=0;for(;P<w;){if(R==0)for(;P<=A;)y(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<w;)if(M[R++]=S.charCodeAt(P++),R==this.blockSize){y(this,M),R=0;break}}else for(;P<w;)if(M[R++]=S[P++],R==this.blockSize){y(this,M),R=0;break}}this.h=R,this.o+=w},f.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;w=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=w&255,w/=256;for(this.v(S),S=Array(16),w=0,A=0;A<4;++A)for(let M=0;M<32;M+=8)S[w++]=this.g[A]>>>M&255;return S};function C(S,w){var A=E;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=w(S)}function o(S,w){this.h=w;const A=[];let M=!0;for(let R=S.length-1;R>=0;R--){const P=S[R]|0;M&&P==w||(A[R]=P,M=!1)}this.g=A}var E={};function e(S){return-128<=S&&S<128?C(S,function(w){return new o([w|0],w<0?-1:0)}):new o([S|0],S<0?-1:0)}function a(S){if(isNaN(S)||!isFinite(S))return u;if(S<0)return c(a(-S));const w=[];let A=1;for(let M=0;S>=A;M++)w[M]=S/A|0,A*=4294967296;return new o(w,0)}function x(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return c(x(S.substring(1),w));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=a(Math.pow(w,8));let M=u;for(let P=0;P<S.length;P+=8){var R=Math.min(8,S.length-P);const b=parseInt(S.substring(P,P+R),w);R<8?(R=a(Math.pow(w,R)),M=M.j(R).add(a(b))):(M=M.j(A),M=M.add(a(b)))}return M}var u=e(0),r=e(1),h=e(16777216);v=o.prototype,v.m=function(){if(l(this))return-c(this).m();let S=0,w=1;for(let A=0;A<this.g.length;A++){const M=this.i(A);S+=(M>=0?M:4294967296+M)*w,w*=4294967296}return S},v.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(n(this))return"0";if(l(this))return"-"+c(this).toString(S);const w=a(Math.pow(S,6));var A=this;let M="";for(;;){const R=p(A,w).g;A=s(A,R.j(w));let P=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=R,n(A))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},v.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function n(S){if(S.h!=0)return!1;for(let w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function l(S){return S.h==-1}v.l=function(S){return S=s(this,S),l(S)?-1:n(S)?0:1};function c(S){const w=S.g.length,A=[];for(let M=0;M<w;M++)A[M]=~S.g[M];return new o(A,~S.h).add(r)}v.abs=function(){return l(this)?c(this):this},v.add=function(S){const w=Math.max(this.g.length,S.g.length),A=[];let M=0;for(let R=0;R<=w;R++){let P=M+(this.i(R)&65535)+(S.i(R)&65535),b=(P>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);M=b>>>16,P&=65535,b&=65535,A[R]=b<<16|P}return new o(A,A[A.length-1]&-2147483648?-1:0)};function s(S,w){return S.add(c(w))}v.j=function(S){if(n(this)||n(S))return u;if(l(this))return l(S)?c(this).j(c(S)):c(c(this).j(S));if(l(S))return c(this.j(c(S)));if(this.l(h)<0&&S.l(h)<0)return a(this.m()*S.m());const w=this.g.length+S.g.length,A=[];for(var M=0;M<2*w;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(let R=0;R<S.g.length;R++){const P=this.i(M)>>>16,b=this.i(M)&65535,F=S.i(R)>>>16,I=S.i(R)&65535;A[2*M+2*R]+=b*I,d(A,2*M+2*R),A[2*M+2*R+1]+=P*I,d(A,2*M+2*R+1),A[2*M+2*R+1]+=b*F,d(A,2*M+2*R+1),A[2*M+2*R+2]+=P*F,d(A,2*M+2*R+2)}for(S=0;S<w;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=w;S<2*w;S++)A[S]=0;return new o(A,0)};function d(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function m(S,w){this.g=S,this.h=w}function p(S,w){if(n(w))throw Error("division by zero");if(n(S))return new m(u,u);if(l(S))return w=p(c(S),w),new m(c(w.g),c(w.h));if(l(w))return w=p(S,c(w)),new m(c(w.g),w.h);if(S.g.length>30){if(l(S)||l(w))throw Error("slowDivide_ only works with positive integers.");for(var A=r,M=w;M.l(S)<=0;)A=g(A),M=g(M);var R=T(A,1),P=T(M,1);for(M=T(M,2),A=T(A,2);!n(M);){var b=P.add(M);b.l(S)<=0&&(R=R.add(A),P=b),M=T(M,1),A=T(A,1)}return w=s(S,R.j(w)),new m(R,w)}for(R=u;S.l(w)>=0;){for(A=Math.max(1,Math.floor(S.m()/w.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=a(A),b=P.j(w);l(b)||b.l(S)>0;)A-=M,P=a(A),b=P.j(w);n(P)&&(P=r),R=R.add(P),S=s(S,b)}return new m(R,S)}v.B=function(S){return p(this,S).h},v.and=function(S){const w=Math.max(this.g.length,S.g.length),A=[];for(let M=0;M<w;M++)A[M]=this.i(M)&S.i(M);return new o(A,this.h&S.h)},v.or=function(S){const w=Math.max(this.g.length,S.g.length),A=[];for(let M=0;M<w;M++)A[M]=this.i(M)|S.i(M);return new o(A,this.h|S.h)},v.xor=function(S){const w=Math.max(this.g.length,S.g.length),A=[];for(let M=0;M<w;M++)A[M]=this.i(M)^S.i(M);return new o(A,this.h^S.h)};function g(S){const w=S.g.length+1,A=[];for(let M=0;M<w;M++)A[M]=S.i(M)<<1|S.i(M-1)>>>31;return new o(A,S.h)}function T(S,w){const A=w>>5;w%=32;const M=S.g.length-A,R=[];for(let P=0;P<M;P++)R[P]=w>0?S.i(P+A)>>>w|S.i(P+A+1)<<32-w:S.i(P+A);return new o(R,S.h)}f.prototype.digest=f.prototype.A,f.prototype.reset=f.prototype.u,f.prototype.update=f.prototype.v,yw=f,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=a,o.fromString=x,No=o}).apply(typeof WE<"u"?WE:typeof self<"u"?self:typeof window<"u"?window:{});var ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tw,Zf,Ew,Ep,$g,Sw,Cw,Aw;(function(){var v,t=Object.defineProperty;function i(B){B=[typeof globalThis=="object"&&globalThis,B,typeof window=="object"&&window,typeof self=="object"&&self,typeof ip=="object"&&ip];for(var K=0;K<B.length;++K){var J=B[K];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var f=i(this);function y(B,K){if(K)t:{var J=f;B=B.split(".");for(var st=0;st<B.length-1;st++){var Ct=B[st];if(!(Ct in J))break t;J=J[Ct]}B=B[B.length-1],st=J[B],K=K(st),K!=st&&K!=null&&t(J,B,{configurable:!0,writable:!0,value:K})}}y("Symbol.dispose",function(B){return B||Symbol("Symbol.dispose")}),y("Array.prototype.values",function(B){return B||function(){return this[Symbol.iterator]()}}),y("Object.entries",function(B){return B||function(K){var J=[],st;for(st in K)Object.prototype.hasOwnProperty.call(K,st)&&J.push([st,K[st]]);return J}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var C=C||{},o=this||self;function E(B){var K=typeof B;return K=="object"&&B!=null||K=="function"}function e(B,K,J){return B.call.apply(B.bind,arguments)}function a(B,K,J){return a=e,a.apply(null,arguments)}function x(B,K){var J=Array.prototype.slice.call(arguments,1);return function(){var st=J.slice();return st.push.apply(st,arguments),B.apply(this,st)}}function u(B,K){function J(){}J.prototype=K.prototype,B.Z=K.prototype,B.prototype=new J,B.prototype.constructor=B,B.Ob=function(st,Ct,Lt){for(var Qt=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Qt[Oe-2]=arguments[Oe];return K.prototype[Ct].apply(st,Qt)}}var r=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?B=>B&&AsyncContext.Snapshot.wrap(B):B=>B;function h(B){const K=B.length;if(K>0){const J=Array(K);for(let st=0;st<K;st++)J[st]=B[st];return J}return[]}function n(B,K){for(let st=1;st<arguments.length;st++){const Ct=arguments[st];var J=typeof Ct;if(J=J!="object"?J:Ct?Array.isArray(Ct)?"array":J:"null",J=="array"||J=="object"&&typeof Ct.length=="number"){J=B.length||0;const Lt=Ct.length||0;B.length=J+Lt;for(let Qt=0;Qt<Lt;Qt++)B[J+Qt]=Ct[Qt]}else B.push(Ct)}}class l{constructor(K,J){this.i=K,this.j=J,this.h=0,this.g=null}get(){let K;return this.h>0?(this.h--,K=this.g,this.g=K.next,K.next=null):K=this.i(),K}}function c(B){o.setTimeout(()=>{throw B},0)}function s(){var B=S;let K=null;return B.g&&(K=B.g,B.g=B.g.next,B.g||(B.h=null),K.next=null),K}class d{constructor(){this.h=this.g=null}add(K,J){const st=m.get();st.set(K,J),this.h?this.h.next=st:this.g=st,this.h=st}}var m=new l(()=>new p,B=>B.reset());class p{constructor(){this.next=this.g=this.h=null}set(K,J){this.h=K,this.g=J,this.next=null}reset(){this.next=this.g=this.h=null}}let g,T=!1,S=new d,w=()=>{const B=Promise.resolve(void 0);g=()=>{B.then(A)}};function A(){for(var B;B=s();){try{B.h.call(B.g)}catch(J){c(J)}var K=m;K.j(B),K.h<100&&(K.h++,B.next=K.g,K.g=B)}T=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(B,K){this.type=B,this.g=this.target=K,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var B=!1,K=Object.defineProperty({},"passive",{get:function(){B=!0}});try{const J=()=>{};o.addEventListener("test",J,K),o.removeEventListener("test",J,K)}catch{}return B})();function b(B){return/^[\s\xa0]*$/.test(B)}function F(B,K){R.call(this,B?B.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,B&&this.init(B,K)}u(F,R),F.prototype.init=function(B,K){const J=this.type=B.type,st=B.changedTouches&&B.changedTouches.length?B.changedTouches[0]:null;this.target=B.target||B.srcElement,this.g=K,K=B.relatedTarget,K||(J=="mouseover"?K=B.fromElement:J=="mouseout"&&(K=B.toElement)),this.relatedTarget=K,st?(this.clientX=st.clientX!==void 0?st.clientX:st.pageX,this.clientY=st.clientY!==void 0?st.clientY:st.pageY,this.screenX=st.screenX||0,this.screenY=st.screenY||0):(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0),this.button=B.button,this.key=B.key||"",this.ctrlKey=B.ctrlKey,this.altKey=B.altKey,this.shiftKey=B.shiftKey,this.metaKey=B.metaKey,this.pointerId=B.pointerId||0,this.pointerType=B.pointerType,this.state=B.state,this.i=B,B.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const B=this.i;B.preventDefault?B.preventDefault():B.returnValue=!1};var I="closure_listenable_"+(Math.random()*1e6|0),L=0;function D(B,K,J,st,Ct){this.listener=B,this.proxy=null,this.src=K,this.type=J,this.capture=!!st,this.ha=Ct,this.key=++L,this.da=this.fa=!1}function O(B){B.da=!0,B.listener=null,B.proxy=null,B.src=null,B.ha=null}function z(B,K,J){for(const st in B)K.call(J,B[st],st,B)}function W(B,K){for(const J in B)K.call(void 0,B[J],J,B)}function X(B){const K={};for(const J in B)K[J]=B[J];return K}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(B,K){let J,st;for(let Ct=1;Ct<arguments.length;Ct++){st=arguments[Ct];for(J in st)B[J]=st[J];for(let Lt=0;Lt<_.length;Lt++)J=_[Lt],Object.prototype.hasOwnProperty.call(st,J)&&(B[J]=st[J])}}function G(B){this.src=B,this.g={},this.h=0}G.prototype.add=function(B,K,J,st,Ct){const Lt=B.toString();B=this.g[Lt],B||(B=this.g[Lt]=[],this.h++);const Qt=H(B,K,st,Ct);return Qt>-1?(K=B[Qt],J||(K.fa=!1)):(K=new D(K,this.src,Lt,!!st,Ct),K.fa=J,B.push(K)),K};function N(B,K){const J=K.type;if(J in B.g){var st=B.g[J],Ct=Array.prototype.indexOf.call(st,K,void 0),Lt;(Lt=Ct>=0)&&Array.prototype.splice.call(st,Ct,1),Lt&&(O(K),B.g[J].length==0&&(delete B.g[J],B.h--))}}function H(B,K,J,st){for(let Ct=0;Ct<B.length;++Ct){const Lt=B[Ct];if(!Lt.da&&Lt.listener==K&&Lt.capture==!!J&&Lt.ha==st)return Ct}return-1}var V="closure_lm_"+(Math.random()*1e6|0),$={};function j(B,K,J,st,Ct){if(Array.isArray(K)){for(let Lt=0;Lt<K.length;Lt++)j(B,K[Lt],J,st,Ct);return null}return J=ct(J),B&&B[I]?B.J(K,J,E(st)?!!st.capture:!1,Ct):k(B,K,J,!1,st,Ct)}function k(B,K,J,st,Ct,Lt){if(!K)throw Error("Invalid event type");const Qt=E(Ct)?!!Ct.capture:!!Ct;let Oe=vt(B);if(Oe||(B[V]=Oe=new G(B)),J=Oe.add(K,J,st,Qt,Lt),J.proxy)return J;if(st=Q(),J.proxy=st,st.src=B,st.listener=J,B.addEventListener)P||(Ct=Qt),Ct===void 0&&(Ct=!1),B.addEventListener(K.toString(),st,Ct);else if(B.attachEvent)B.attachEvent(q(K.toString()),st);else if(B.addListener&&B.removeListener)B.addListener(st);else throw Error("addEventListener and attachEvent are unavailable.");return J}function Q(){function B(J){return K.call(B.src,B.listener,J)}const K=ft;return B}function et(B,K,J,st,Ct){if(Array.isArray(K))for(var Lt=0;Lt<K.length;Lt++)et(B,K[Lt],J,st,Ct);else st=E(st)?!!st.capture:!!st,J=ct(J),B&&B[I]?(B=B.i,Lt=String(K).toString(),Lt in B.g&&(K=B.g[Lt],J=H(K,J,st,Ct),J>-1&&(O(K[J]),Array.prototype.splice.call(K,J,1),K.length==0&&(delete B.g[Lt],B.h--)))):B&&(B=vt(B))&&(K=B.g[K.toString()],B=-1,K&&(B=H(K,J,st,Ct)),(J=B>-1?K[B]:null)&&at(J))}function at(B){if(typeof B!="number"&&B&&!B.da){var K=B.src;if(K&&K[I])N(K.i,B);else{var J=B.type,st=B.proxy;K.removeEventListener?K.removeEventListener(J,st,B.capture):K.detachEvent?K.detachEvent(q(J),st):K.addListener&&K.removeListener&&K.removeListener(st),(J=vt(K))?(N(J,B),J.h==0&&(J.src=null,K[V]=null)):O(B)}}}function q(B){return B in $?$[B]:$[B]="on"+B}function ft(B,K){if(B.da)B=!0;else{K=new F(K,this);const J=B.listener,st=B.ha||B.src;B.fa&&at(B),B=J.call(st,K)}return B}function vt(B){return B=B[V],B instanceof G?B:null}var Tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ct(B){return typeof B=="function"?B:(B[Tt]||(B[Tt]=function(K){return B.handleEvent(K)}),B[Tt])}function Nt(){M.call(this),this.i=new G(this),this.M=this,this.G=null}u(Nt,M),Nt.prototype[I]=!0,Nt.prototype.removeEventListener=function(B,K,J,st){et(this,B,K,J,st)};function yt(B,K){var J,st=B.G;if(st)for(J=[];st;st=st.G)J.push(st);if(B=B.M,st=K.type||K,typeof K=="string")K=new R(K,B);else if(K instanceof R)K.target=K.target||B;else{var Ct=K;K=new R(st,B),U(K,Ct)}Ct=!0;let Lt,Qt;if(J)for(Qt=J.length-1;Qt>=0;Qt--)Lt=K.g=J[Qt],Ct=it(Lt,st,!0,K)&&Ct;if(Lt=K.g=B,Ct=it(Lt,st,!0,K)&&Ct,Ct=it(Lt,st,!1,K)&&Ct,J)for(Qt=0;Qt<J.length;Qt++)Lt=K.g=J[Qt],Ct=it(Lt,st,!1,K)&&Ct}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var B=this.i;for(const K in B.g){const J=B.g[K];for(let st=0;st<J.length;st++)O(J[st]);delete B.g[K],B.h--}}this.G=null},Nt.prototype.J=function(B,K,J,st){return this.i.add(String(B),K,!1,J,st)},Nt.prototype.K=function(B,K,J,st){return this.i.add(String(B),K,!0,J,st)};function it(B,K,J,st){if(K=B.i.g[String(K)],!K)return!0;K=K.concat();let Ct=!0;for(let Lt=0;Lt<K.length;++Lt){const Qt=K[Lt];if(Qt&&!Qt.da&&Qt.capture==J){const Oe=Qt.listener,Di=Qt.ha||Qt.src;Qt.fa&&N(B.i,Qt),Ct=Oe.call(Di,st)!==!1&&Ct}}return Ct&&!st.defaultPrevented}function Z(B,K){if(typeof B!="function")if(B&&typeof B.handleEvent=="function")B=a(B.handleEvent,B);else throw Error("Invalid listener argument");return Number(K)>2147483647?-1:o.setTimeout(B,K||0)}function lt(B){B.g=Z(()=>{B.g=null,B.i&&(B.i=!1,lt(B))},B.l);const K=B.h;B.h=null,B.m.apply(null,K)}class pt extends M{constructor(K,J){super(),this.m=K,this.l=J,this.h=null,this.i=!1,this.g=null}j(K){this.h=arguments,this.g?this.i=!0:lt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rt(B){M.call(this),this.h=B,this.g={}}u(Rt,M);var At=[];function Kt(B){z(B.g,function(K,J){this.g.hasOwnProperty(J)&&at(K)},B),B.g={}}Rt.prototype.N=function(){Rt.Z.N.call(this),Kt(this)},Rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=o.JSON.stringify,Wt=o.JSON.parse,he=class{stringify(B){return o.JSON.stringify(B,void 0)}parse(B){return o.JSON.parse(B,void 0)}};function zt(){}function Ut(){}var Xt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){R.call(this,"d")}u(Pt,R);function $t(){R.call(this,"c")}u($t,R);var pe={},fe=null;function Fe(){return fe=fe||new Nt}pe.Ia="serverreachability";function dt(B){R.call(this,pe.Ia,B)}u(dt,R);function Zt(B){const K=Fe();yt(K,new dt(K))}pe.STAT_EVENT="statevent";function Ft(B,K){R.call(this,pe.STAT_EVENT,B),this.stat=K}u(Ft,R);function Dt(B){const K=Fe();yt(K,new Ft(K,B))}pe.Ja="timingevent";function ne(B,K){R.call(this,pe.Ja,B),this.size=K}u(ne,R);function ee(B,K){if(typeof B!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){B()},K)}function Se(){this.g=!0}Se.prototype.ua=function(){this.g=!1};function Ei(B,K,J,st,Ct,Lt){B.info(function(){if(B.g)if(Lt){var Qt="",Oe=Lt.split("&");for(let vi=0;vi<Oe.length;vi++){var Di=Oe[vi].split("=");if(Di.length>1){const Ji=Di[0];Di=Di[1];const Us=Ji.split("_");Qt=Us.length>=2&&Us[1]=="type"?Qt+(Ji+"="+Di+"&"):Qt+(Ji+"=redacted&")}}}else Qt=null;else Qt=Lt;return"XMLHTTP REQ ("+st+") [attempt "+Ct+"]: "+K+`
`+J+`
`+Qt})}function Fi(B,K,J,st,Ct,Lt,Qt){B.info(function(){return"XMLHTTP RESP ("+st+") [ attempt "+Ct+"]: "+K+`
`+J+`
`+Lt+" "+Qt})}function We(B,K,J,st){B.info(function(){return"XMLHTTP TEXT ("+K+"): "+Gi(B,J)+(st?" "+st:"")})}function Si(B,K){B.info(function(){return"TIMEOUT: "+K})}Se.prototype.info=function(){};function Gi(B,K){if(!B.g)return K;if(!K)return null;try{const Lt=JSON.parse(K);if(Lt){for(B=0;B<Lt.length;B++)if(Array.isArray(Lt[B])){var J=Lt[B];if(!(J.length<2)){var st=J[1];if(Array.isArray(st)&&!(st.length<1)){var Ct=st[0];if(Ct!="noop"&&Ct!="stop"&&Ct!="close")for(let Qt=1;Qt<st.length;Qt++)st[Qt]=""}}}}return Bt(Lt)}catch{return K}}var wn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},De;function sa(){}u(sa,zt),sa.prototype.g=function(){return new XMLHttpRequest},De=new sa;function Rr(B){return encodeURIComponent(String(B))}function dh(B){var K=1;B=B.split(":");const J=[];for(;K>0&&B.length;)J.push(B.shift()),K--;return B.length&&J.push(B.join(":")),J}function jn(B,K,J,st){this.j=B,this.i=K,this.l=J,this.S=st||1,this.V=new Rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qo}function qo(){this.i=null,this.g="",this.h=!1}var ra={},aa={};function qa(B,K,J){B.M=1,B.A=hn(Qe(K)),B.u=J,B.R=!0,to(B,null)}function to(B,K){B.F=Date.now(),eo(B),B.B=Qe(B.A);var J=B.B,st=B.S;Array.isArray(st)||(st=[String(st)]),ph(J.i,"t",st),B.C=0,J=B.j.L,B.h=new qo,B.g=Ad(B.j,J?K:null,!B.u),B.P>0&&(B.O=new pt(a(B.Y,B,B.g),B.P)),K=B.V,J=B.g,st=B.ba;var Ct="readystatechange";Array.isArray(Ct)||(Ct&&(At[0]=Ct.toString()),Ct=At);for(let Lt=0;Lt<Ct.length;Lt++){const Qt=j(J,Ct[Lt],st||K.handleEvent,!1,K.h||K);if(!Qt)break;K.g[Qt.key]=Qt}K=B.J?X(B.J):{},B.u?(B.v||(B.v="POST"),K["Content-Type"]="application/x-www-form-urlencoded",B.g.ea(B.B,B.v,B.u,K)):(B.v="GET",B.g.ea(B.B,B.v,null,K)),Zt(),Ei(B.i,B.v,B.B,B.l,B.S,B.u)}jn.prototype.ba=function(B){B=B.target;const K=this.O;K&&sr(B)==3?K.j():this.Y(B)},jn.prototype.Y=function(B){try{if(B==this.g)t:{const Oe=sr(this.g),Di=this.g.ya(),vi=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||df(this.g)))){this.K||Oe!=4||Di==7||(Di==8||vi<=0?Zt(3):Zt(2)),nt(this);var K=this.g.ca();this.X=K;var J=af(this);if(this.o=K==200,Fi(this.i,this.v,this.B,this.l,this.S,Oe,K),this.o){if(this.U&&!this.L){e:{if(this.g){var st,Ct=this.g;if((st=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(st)){var Lt=st;break e}}Lt=null}if(B=Lt)We(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bt(this,B);else{this.o=!1,this.m=3,Dt(12),Mt(this),gt(this);break t}}if(this.R){B=!0;let Ji;for(;!this.K&&this.C<J.length;)if(Ji=of(this,J),Ji==aa){Oe==4&&(this.m=4,Dt(14),B=!1),We(this.i,this.l,null,"[Incomplete Response]");break}else if(Ji==ra){this.m=4,Dt(15),We(this.i,this.l,J,"[Invalid Chunk]"),B=!1;break}else We(this.i,this.l,Ji,null),bt(this,Ji);if(tl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||J.length!=0||this.h.h||(this.m=1,Dt(16),B=!1),this.o=this.o&&B,!B)We(this.i,this.l,J,"[Invalid Chunked Response]"),Mt(this),gt(this);else if(J.length>0&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.aa&&!Qt.P&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),gf(Qt),Qt.P=!0,Dt(11))}}else We(this.i,this.l,J,null),bt(this,J);Oe==4&&Mt(this),this.o&&!this.K&&(Oe==4?Sd(this.j,this):(this.o=!1,eo(this)))}else md(this.g),K==400&&J.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Mt(this),gt(this)}}}catch{}finally{}};function af(B){if(!tl(B))return B.g.la();const K=df(B.g);if(K==="")return"";let J="";const st=K.length,Ct=sr(B.g)==4;if(!B.h.i){if(typeof TextDecoder>"u")return Mt(B),gt(B),"";B.h.i=new o.TextDecoder}for(let Lt=0;Lt<st;Lt++)B.h.h=!0,J+=B.h.i.decode(K[Lt],{stream:!(Ct&&Lt==st-1)});return K.length=0,B.h.g+=J,B.C=0,B.h.g}function tl(B){return B.g?B.v=="GET"&&B.M!=2&&B.j.Aa:!1}function of(B,K){var J=B.C,st=K.indexOf(`
`,J);return st==-1?aa:(J=Number(K.substring(J,st)),isNaN(J)?ra:(st+=1,st+J>K.length?aa:(K=K.slice(st,st+J),B.C=st+J,K)))}jn.prototype.cancel=function(){this.K=!0,Mt(this)};function eo(B){B.T=Date.now()+B.H,ke(B,B.H)}function ke(B,K){if(B.D!=null)throw Error("WatchDog timer not null");B.D=ee(a(B.aa,B),K)}function nt(B){B.D&&(o.clearTimeout(B.D),B.D=null)}jn.prototype.aa=function(){this.D=null;const B=Date.now();B-this.T>=0?(Si(this.i,this.B),this.M!=2&&(Zt(),Dt(17)),Mt(this),this.m=2,gt(this)):ke(this,this.T-B)};function gt(B){B.j.I==0||B.K||Sd(B.j,B)}function Mt(B){nt(B);var K=B.O;K&&typeof K.dispose=="function"&&K.dispose(),B.O=null,Kt(B.V),B.g&&(K=B.g,B.g=null,K.abort(),K.dispose())}function bt(B,K){try{var J=B.j;if(J.I!=0&&(J.g==B||oe(J.h,B))){if(!B.L&&oe(J.h,B)&&J.I==3){try{var st=J.Ba.g.parse(K)}catch{st=null}if(Array.isArray(st)&&st.length==3){var Ct=st;if(Ct[0]==0){t:if(!J.v){if(J.g)if(J.g.F+3e3<B.F)yh(J),il(J);else break t;mf(J),Dt(18)}}else J.xa=Ct[1],0<J.xa-J.K&&Ct[2]<37500&&J.F&&J.A==0&&!J.C&&(J.C=ee(a(J.Va,J),6e3));ae(J.h)<=1&&J.ta&&(J.ta=void 0)}else la(J,11)}else if((B.L||J.g==B)&&yh(J),!b(K))for(Ct=J.Ba.g.parse(K),K=0;K<Ct.length;K++){let vi=Ct[K];const Ji=vi[0];if(!(Ji<=J.K))if(J.K=Ji,vi=vi[1],J.I==2)if(vi[0]=="c"){J.M=vi[1],J.ba=vi[2];const Us=vi[3];Us!=null&&(J.ka=Us,J.j.info("VER="+J.ka));const ua=vi[4];ua!=null&&(J.za=ua,J.j.info("SVER="+J.za));const br=vi[5];br!=null&&typeof br=="number"&&br>0&&(st=1.5*br,J.O=st,J.j.info("backChannelRequestTimeoutMs_="+st)),st=J;const Ir=B.g;if(Ir){const Eh=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eh){var Lt=st.h;Lt.g||Eh.indexOf("spdy")==-1&&Eh.indexOf("quic")==-1&&Eh.indexOf("h2")==-1||(Lt.j=Lt.l,Lt.g=new Set,Lt.h&&(Ee(Lt,Lt.h),Lt.h=null))}if(st.G){const Sh=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Sh&&(st.wa=Sh,me(st.J,st.G,Sh))}}J.I=3,J.l&&J.l.ra(),J.aa&&(J.T=Date.now()-B.F,J.j.info("Handshake RTT: "+J.T+"ms")),st=J;var Qt=B;if(st.na=Cd(st,st.L?st.ba:null,st.W),Qt.L){Ce(st.h,Qt);var Oe=Qt,Di=st.O;Di&&(Oe.H=Di),Oe.D&&(nt(Oe),eo(Oe)),st.g=Qt}else Td(st);J.i.length>0&&xh(J)}else vi[0]!="stop"&&vi[0]!="close"||la(J,7);else J.I==3&&(vi[0]=="stop"||vi[0]=="close"?vi[0]=="stop"?la(J,7):pf(J):vi[0]!="noop"&&J.l&&J.l.qa(vi),J.A=0)}}Zt(4)}catch{}}var Et=class{constructor(B,K){this.g=B,this.map=K}};function kt(B){this.l=B||10,o.PerformanceNavigationTiming?(B=o.performance.getEntriesByType("navigation"),B=B.length>0&&(B[0].nextHopProtocol=="hq"||B[0].nextHopProtocol=="h2")):B=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=B?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ie(B){return B.h?!0:B.g?B.g.size>=B.j:!1}function ae(B){return B.h?1:B.g?B.g.size:0}function oe(B,K){return B.h?B.h==K:B.g?B.g.has(K):!1}function Ee(B,K){B.g?B.g.add(K):B.h=K}function Ce(B,K){B.h&&B.h==K?B.h=null:B.g&&B.g.has(K)&&B.g.delete(K)}kt.prototype.cancel=function(){if(this.i=ge(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const B of this.g.values())B.cancel();this.g.clear()}};function ge(B){if(B.h!=null)return B.i.concat(B.h.G);if(B.g!=null&&B.g.size!==0){let K=B.i;for(const J of B.g.values())K=K.concat(J.G);return K}return h(B.i)}var Ve=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ii(B,K){if(B){B=B.split("&");for(let J=0;J<B.length;J++){const st=B[J].indexOf("=");let Ct,Lt=null;st>=0?(Ct=B[J].substring(0,st),Lt=B[J].substring(st+1)):Ct=B[J],K(Ct,Lt?decodeURIComponent(Lt.replace(/\+/g," ")):"")}}}function ai(B){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let K;B instanceof ai?(this.l=B.l,Ne(this,B.j),this.o=B.o,this.g=B.g,ve(this,B.u),this.h=B.h,bi(this,ud(B.i)),this.m=B.m):B&&(K=String(B).match(Ve))?(this.l=!1,Ne(this,K[1]||"",!0),this.o=ts(K[2]||""),this.g=ts(K[3]||"",!0),ve(this,K[4]),this.h=ts(K[5]||"",!0),bi(this,K[6]||"",!0),this.m=ts(K[7]||"")):(this.l=!1,this.i=new Bs(null,this.l))}ai.prototype.toString=function(){const B=[];var K=this.j;K&&B.push(Wi(K,pi,!0),":");var J=this.g;return(J||K=="file")&&(B.push("//"),(K=this.o)&&B.push(Wi(K,pi,!0),"@"),B.push(Rr(J).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),J=this.u,J!=null&&B.push(":",String(J))),(J=this.h)&&(this.g&&J.charAt(0)!="/"&&B.push("/"),B.push(Wi(J,J.charAt(0)=="/"?Mn:Un,!0))),(J=this.i.toString())&&B.push("?",J),(J=this.m)&&B.push("#",Wi(J,yn)),B.join("")},ai.prototype.resolve=function(B){const K=Qe(this);let J=!!B.j;J?Ne(K,B.j):J=!!B.o,J?K.o=B.o:J=!!B.g,J?K.g=B.g:J=B.u!=null;var st=B.h;if(J)ve(K,B.u);else if(J=!!B.h){if(st.charAt(0)!="/")if(this.g&&!this.h)st="/"+st;else{var Ct=K.h.lastIndexOf("/");Ct!=-1&&(st=K.h.slice(0,Ct+1)+st)}if(Ct=st,Ct==".."||Ct==".")st="";else if(Ct.indexOf("./")!=-1||Ct.indexOf("/.")!=-1){st=Ct.lastIndexOf("/",0)==0,Ct=Ct.split("/");const Lt=[];for(let Qt=0;Qt<Ct.length;){const Oe=Ct[Qt++];Oe=="."?st&&Qt==Ct.length&&Lt.push(""):Oe==".."?((Lt.length>1||Lt.length==1&&Lt[0]!="")&&Lt.pop(),st&&Qt==Ct.length&&Lt.push("")):(Lt.push(Oe),st=!0)}st=Lt.join("/")}else st=Ct}return J?K.h=st:J=B.i.toString()!=="",J?bi(K,ud(B.i)):J=!!B.m,J&&(K.m=B.m),K};function Qe(B){return new ai(B)}function Ne(B,K,J){B.j=J?ts(K,!0):K,B.j&&(B.j=B.j.replace(/:$/,""))}function ve(B,K){if(K){if(K=Number(K),isNaN(K)||K<0)throw Error("Bad port number "+K);B.u=K}else B.u=null}function bi(B,K,J){K instanceof Bs?(B.i=K,Qv(B.i,B.l)):(J||(K=Wi(K,un)),B.i=new Bs(K,B.l))}function me(B,K,J){B.i.set(K,J)}function hn(B){return me(B,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),B}function ts(B,K){return B?K?decodeURI(B.replace(/%25/g,"%2525")):decodeURIComponent(B):""}function Wi(B,K,J){return typeof B=="string"?(B=encodeURI(B).replace(K,Pr),J&&(B=B.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B):null}function Pr(B){return B=B.charCodeAt(0),"%"+(B>>4&15).toString(16)+(B&15).toString(16)}var pi=/[#\/\?@]/g,Un=/[#\?:]/g,Mn=/[#\?]/g,un=/[#\?@]/g,yn=/#/g;function Bs(B,K){this.h=this.g=null,this.i=B||null,this.j=!!K}function Rn(B){B.g||(B.g=new Map,B.h=0,B.i&&ii(B.i,function(K,J){B.add(decodeURIComponent(K.replace(/\+/g," ")),J)}))}v=Bs.prototype,v.add=function(B,K){Rn(this),this.i=null,B=oa(this,B);let J=this.g.get(B);return J||this.g.set(B,J=[]),J.push(K),this.h+=1,this};function ld(B,K){Rn(B),K=oa(B,K),B.g.has(K)&&(B.i=null,B.h-=B.g.get(K).length,B.g.delete(K))}function lf(B,K){return Rn(B),K=oa(B,K),B.g.has(K)}v.forEach=function(B,K){Rn(this),this.g.forEach(function(J,st){J.forEach(function(Ct){B.call(K,Ct,st,this)},this)},this)};function hd(B,K){Rn(B);let J=[];if(typeof K=="string")lf(B,K)&&(J=J.concat(B.g.get(oa(B,K))));else for(B=Array.from(B.g.values()),K=0;K<B.length;K++)J=J.concat(B[K]);return J}v.set=function(B,K){return Rn(this),this.i=null,B=oa(this,B),lf(this,B)&&(this.h-=this.g.get(B).length),this.g.set(B,[K]),this.h+=1,this},v.get=function(B,K){return B?(B=hd(this,B),B.length>0?String(B[0]):K):K};function ph(B,K,J){ld(B,K),J.length>0&&(B.i=null,B.g.set(oa(B,K),h(J)),B.h+=J.length)}v.toString=function(){if(this.i)return this.i;if(!this.g)return"";const B=[],K=Array.from(this.g.keys());for(let st=0;st<K.length;st++){var J=K[st];const Ct=Rr(J);J=hd(this,J);for(let Lt=0;Lt<J.length;Lt++){let Qt=Ct;J[Lt]!==""&&(Qt+="="+Rr(J[Lt])),B.push(Qt)}}return this.i=B.join("&")};function ud(B){const K=new Bs;return K.i=B.i,B.g&&(K.g=new Map(B.g),K.h=B.h),K}function oa(B,K){return K=String(K),B.j&&(K=K.toLowerCase()),K}function Qv(B,K){K&&!B.j&&(Rn(B),B.i=null,B.g.forEach(function(J,st){const Ct=st.toLowerCase();st!=Ct&&(ld(this,st),ph(this,Ct,J))},B)),B.j=K}function qv(B,K){const J=new Se;if(o.Image){const st=new Image;st.onload=x(nr,J,"TestLoadImage: loaded",!0,K,st),st.onerror=x(nr,J,"TestLoadImage: error",!1,K,st),st.onabort=x(nr,J,"TestLoadImage: abort",!1,K,st),st.ontimeout=x(nr,J,"TestLoadImage: timeout",!1,K,st),o.setTimeout(function(){st.ontimeout&&st.ontimeout()},1e4),st.src=B}else K(!1)}function fd(B,K){const J=new Se,st=new AbortController,Ct=setTimeout(()=>{st.abort(),nr(J,"TestPingServer: timeout",!1,K)},1e4);fetch(B,{signal:st.signal}).then(Lt=>{clearTimeout(Ct),Lt.ok?nr(J,"TestPingServer: ok",!0,K):nr(J,"TestPingServer: server error",!1,K)}).catch(()=>{clearTimeout(Ct),nr(J,"TestPingServer: error",!1,K)})}function nr(B,K,J,st,Ct){try{Ct&&(Ct.onload=null,Ct.onerror=null,Ct.onabort=null,Ct.ontimeout=null),st(J)}catch{}}function cd(){this.g=new he}function vh(B){this.i=B.Sb||null,this.h=B.ab||!1}u(vh,zt),vh.prototype.g=function(){return new mh(this.i,this.h)};function mh(B,K){Nt.call(this),this.H=B,this.o=K,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}u(mh,Nt),v=mh.prototype,v.open=function(B,K){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=B,this.D=K,this.readyState=1,io(this)},v.send=function(B){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const K={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};B&&(K.body=B),(this.H||o).fetch(new Request(this.D,K)).then(this.Pa.bind(this),this.ga.bind(this))},v.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,el(this)),this.readyState=0},v.Pa=function(B){if(this.g&&(this.l=B,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=B.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")B.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in B){if(this.j=B.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hf(this)}else B.text().then(this.Oa.bind(this),this.ga.bind(this))};function hf(B){B.j.read().then(B.Ma.bind(B)).catch(B.ga.bind(B))}v.Ma=function(B){if(this.g){if(this.o&&B.value)this.response.push(B.value);else if(!this.o){var K=B.value?B.value:new Uint8Array(0);(K=this.B.decode(K,{stream:!B.done}))&&(this.response=this.responseText+=K)}B.done?el(this):io(this),this.readyState==3&&hf(this)}},v.Oa=function(B){this.g&&(this.response=this.responseText=B,el(this))},v.Na=function(B){this.g&&(this.response=B,el(this))},v.ga=function(){this.g&&el(this)};function el(B){B.readyState=4,B.l=null,B.j=null,B.B=null,io(B)}v.setRequestHeader=function(B,K){this.A.append(B,K)},v.getResponseHeader=function(B){return this.h&&this.h.get(B.toLowerCase())||""},v.getAllResponseHeaders=function(){if(!this.h)return"";const B=[],K=this.h.entries();for(var J=K.next();!J.done;)J=J.value,B.push(J[0]+": "+J[1]),J=K.next();return B.join(`\r
`)};function io(B){B.onreadystatechange&&B.onreadystatechange.call(B)}Object.defineProperty(mh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(B){this.m=B?"include":"same-origin"}});function dd(B){let K="";return z(B,function(J,st){K+=st,K+=":",K+=J,K+=`\r
`}),K}function uf(B,K,J){t:{for(st in J){var st=!1;break t}st=!0}st||(J=dd(J),typeof B=="string"?J!=null&&Rr(J):me(B,K,J))}function Ii(B){Nt.call(this),this.headers=new Map,this.L=B||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}u(Ii,Nt);var tm=/^https?$/i,pd=["POST","PUT"];v=Ii.prototype,v.Fa=function(B){this.H=B},v.ea=function(B,K,J,st){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+B);K=K?K.toUpperCase():"GET",this.D=B,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():De.g(),this.g.onreadystatechange=r(a(this.Ca,this));try{this.B=!0,this.g.open(K,String(B),!0),this.B=!1}catch(Lt){ff(this,Lt);return}if(B=J||"",J=new Map(this.headers),st)if(Object.getPrototypeOf(st)===Object.prototype)for(var Ct in st)J.set(Ct,st[Ct]);else if(typeof st.keys=="function"&&typeof st.get=="function")for(const Lt of st.keys())J.set(Lt,st.get(Lt));else throw Error("Unknown input type for opt_headers: "+String(st));st=Array.from(J.keys()).find(Lt=>Lt.toLowerCase()=="content-type"),Ct=o.FormData&&B instanceof o.FormData,!(Array.prototype.indexOf.call(pd,K,void 0)>=0)||st||Ct||J.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Lt,Qt]of J)this.g.setRequestHeader(Lt,Qt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(B),this.v=!1}catch(Lt){ff(this,Lt)}};function ff(B,K){B.h=!1,B.g&&(B.j=!0,B.g.abort(),B.j=!1),B.l=K,B.o=5,vd(B),gh(B)}function vd(B){B.A||(B.A=!0,yt(B,"complete"),yt(B,"error"))}v.abort=function(B){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=B||7,yt(this,"complete"),yt(this,"abort"),gh(this))},v.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gh(this,!0)),Ii.Z.N.call(this)},v.Ca=function(){this.u||(this.B||this.v||this.j?cf(this):this.Xa())},v.Xa=function(){cf(this)};function cf(B){if(B.h&&typeof C<"u"){if(B.v&&sr(B)==4)setTimeout(B.Ca.bind(B),0);else if(yt(B,"readystatechange"),sr(B)==4){B.h=!1;try{const Lt=B.ca();t:switch(Lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var K=!0;break t;default:K=!1}var J;if(!(J=K)){var st;if(st=Lt===0){let Qt=String(B.D).match(Ve)[1]||null;!Qt&&o.self&&o.self.location&&(Qt=o.self.location.protocol.slice(0,-1)),st=!tm.test(Qt?Qt.toLowerCase():"")}J=st}if(J)yt(B,"complete"),yt(B,"success");else{B.o=6;try{var Ct=sr(B)>2?B.g.statusText:""}catch{Ct=""}B.l=Ct+" ["+B.ca()+"]",vd(B)}}finally{gh(B)}}}}function gh(B,K){if(B.g){B.m&&(clearTimeout(B.m),B.m=null);const J=B.g;B.g=null,K||yt(B,"ready");try{J.onreadystatechange=null}catch{}}}v.isActive=function(){return!!this.g};function sr(B){return B.g?B.g.readyState:0}v.ca=function(){try{return sr(this)>2?this.g.status:-1}catch{return-1}},v.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},v.La=function(B){if(this.g){var K=this.g.responseText;return B&&K.indexOf(B)==0&&(K=K.substring(B.length)),Wt(K)}};function df(B){try{if(!B.g)return null;if("response"in B.g)return B.g.response;switch(B.F){case"":case"text":return B.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in B.g)return B.g.mozResponseArrayBuffer}return null}catch{return null}}function md(B){const K={};B=(B.g&&sr(B)>=2&&B.g.getAllResponseHeaders()||"").split(`\r
`);for(let st=0;st<B.length;st++){if(b(B[st]))continue;var J=dh(B[st]);const Ct=J[0];if(J=J[1],typeof J!="string")continue;J=J.trim();const Lt=K[Ct]||[];K[Ct]=Lt,Lt.push(J)}W(K,function(st){return st.join(", ")})}v.ya=function(){return this.o},v.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function no(B,K,J){return J&&J.internalChannelParams&&J.internalChannelParams[B]||K}function gd(B){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=no("failFast",!1,B),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=no("baseRetryDelayMs",5e3,B),this.Za=no("retryDelaySeedMs",1e4,B),this.Ta=no("forwardChannelMaxRetries",2,B),this.va=no("forwardChannelRequestTimeoutMs",2e4,B),this.ma=B&&B.xmlHttpFactory||void 0,this.Ua=B&&B.Rb||void 0,this.Aa=B&&B.useFetchStreams||!1,this.O=void 0,this.L=B&&B.supportsCrossDomainXhr||!1,this.M="",this.h=new kt(B&&B.concurrentRequestLimit),this.Ba=new cd,this.S=B&&B.fastHandshake||!1,this.R=B&&B.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=B&&B.Pb||!1,B&&B.ua&&this.j.ua(),B&&B.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&B&&B.detectBufferingProxy||!1,this.ia=void 0,B&&B.longPollingTimeout&&B.longPollingTimeout>0&&(this.ia=B.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}v=gd.prototype,v.ka=8,v.I=1,v.connect=function(B,K,J,st){Dt(0),this.W=B,this.H=K||{},J&&st!==void 0&&(this.H.OSID=J,this.H.OAID=st),this.F=this.X,this.J=Cd(this,null,this.W),xh(this)};function pf(B){if(xd(B),B.I==3){var K=B.V++,J=Qe(B.J);if(me(J,"SID",B.M),me(J,"RID",K),me(J,"TYPE","terminate"),nl(B,J),K=new jn(B,B.j,K),K.M=2,K.A=hn(Qe(J)),J=!1,o.navigator&&o.navigator.sendBeacon)try{J=o.navigator.sendBeacon(K.A.toString(),"")}catch{}!J&&o.Image&&(new Image().src=K.A,J=!0),J||(K.g=Ad(K.j,null),K.g.ea(K.A)),K.F=Date.now(),eo(K)}yf(B)}function il(B){B.g&&(gf(B),B.g.cancel(),B.g=null)}function xd(B){il(B),B.v&&(o.clearTimeout(B.v),B.v=null),yh(B),B.h.cancel(),B.m&&(typeof B.m=="number"&&o.clearTimeout(B.m),B.m=null)}function xh(B){if(!ie(B.h)&&!B.m){B.m=!0;var K=B.Ea;g||w(),T||(g(),T=!0),S.add(K,B),B.D=0}}function em(B,K){return ae(B.h)>=B.h.j-(B.m?1:0)?!1:B.m?(B.i=K.G.concat(B.i),!0):B.I==1||B.I==2||B.D>=(B.Sa?0:B.Ta)?!1:(B.m=ee(a(B.Ea,B,K),xf(B,B.D)),B.D++,!0)}v.Ea=function(B){if(this.m)if(this.m=null,this.I==1){if(!B){this.V=Math.floor(Math.random()*1e5),B=this.V++;const Ct=new jn(this,this.j,B);let Lt=this.o;if(this.U&&(Lt?(Lt=X(Lt),U(Lt,this.U)):Lt=this.U),this.u!==null||this.R||(Ct.J=Lt,Lt=null),this.S)t:{for(var K=0,J=0;J<this.i.length;J++){e:{var st=this.i[J];if("__data__"in st.map&&(st=st.map.__data__,typeof st=="string")){st=st.length;break e}st=void 0}if(st===void 0)break;if(K+=st,K>4096){K=J;break t}if(K===4096||J===this.i.length-1){K=J+1;break t}}K=1e3}else K=1e3;K=yd(this,Ct,K),J=Qe(this.J),me(J,"RID",B),me(J,"CVER",22),this.G&&me(J,"X-HTTP-Session-Id",this.G),nl(this,J),Lt&&(this.R?K="headers="+Rr(dd(Lt))+"&"+K:this.u&&uf(J,this.u,Lt)),Ee(this.h,Ct),this.Ra&&me(J,"TYPE","init"),this.S?(me(J,"$req",K),me(J,"SID","null"),Ct.U=!0,qa(Ct,J,null)):qa(Ct,J,K),this.I=2}}else this.I==3&&(B?vf(this,B):this.i.length==0||ie(this.h)||vf(this))};function vf(B,K){var J;K?J=K.l:J=B.V++;const st=Qe(B.J);me(st,"SID",B.M),me(st,"RID",J),me(st,"AID",B.K),nl(B,st),B.u&&B.o&&uf(st,B.u,B.o),J=new jn(B,B.j,J,B.D+1),B.u===null&&(J.J=B.o),K&&(B.i=K.G.concat(B.i)),K=yd(B,J,1e3),J.H=Math.round(B.va*.5)+Math.round(B.va*.5*Math.random()),Ee(B.h,J),qa(J,st,K)}function nl(B,K){B.H&&z(B.H,function(J,st){me(K,st,J)}),B.l&&z({},function(J,st){me(K,st,J)})}function yd(B,K,J){J=Math.min(B.i.length,J);const st=B.l?a(B.l.Ka,B.l,B):null;t:{var Ct=B.i;let Oe=-1;for(;;){const Di=["count="+J];Oe==-1?J>0?(Oe=Ct[0].g,Di.push("ofs="+Oe)):Oe=0:Di.push("ofs="+Oe);let vi=!0;for(let Ji=0;Ji<J;Ji++){var Lt=Ct[Ji].g;const Us=Ct[Ji].map;if(Lt-=Oe,Lt<0)Oe=Math.max(0,Ct[Ji].g-100),vi=!1;else try{Lt="req"+Lt+"_"||"";try{var Qt=Us instanceof Map?Us:Object.entries(Us);for(const[ua,br]of Qt){let Ir=br;E(br)&&(Ir=Bt(br)),Di.push(Lt+ua+"="+encodeURIComponent(Ir))}}catch(ua){throw Di.push(Lt+"type="+encodeURIComponent("_badmap")),ua}}catch{st&&st(Us)}}if(vi){Qt=Di.join("&");break t}}Qt=void 0}return B=B.i.splice(0,J),K.G=B,Qt}function Td(B){if(!B.g&&!B.v){B.Y=1;var K=B.Da;g||w(),T||(g(),T=!0),S.add(K,B),B.A=0}}function mf(B){return B.g||B.v||B.A>=3?!1:(B.Y++,B.v=ee(a(B.Da,B),xf(B,B.A)),B.A++,!0)}v.Da=function(){if(this.v=null,Ed(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var B=4*this.T;this.j.info("BP detection timer enabled: "+B),this.B=ee(a(this.Wa,this),B)}},v.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),il(this),Ed(this))};function gf(B){B.B!=null&&(o.clearTimeout(B.B),B.B=null)}function Ed(B){B.g=new jn(B,B.j,"rpc",B.Y),B.u===null&&(B.g.J=B.o),B.g.P=0;var K=Qe(B.na);me(K,"RID","rpc"),me(K,"SID",B.M),me(K,"AID",B.K),me(K,"CI",B.F?"0":"1"),!B.F&&B.ia&&me(K,"TO",B.ia),me(K,"TYPE","xmlhttp"),nl(B,K),B.u&&B.o&&uf(K,B.u,B.o),B.O&&(B.g.H=B.O);var J=B.g;B=B.ba,J.M=1,J.A=hn(Qe(K)),J.u=null,J.R=!0,to(J,B)}v.Va=function(){this.C!=null&&(this.C=null,il(this),mf(this),Dt(19))};function yh(B){B.C!=null&&(o.clearTimeout(B.C),B.C=null)}function Sd(B,K){var J=null;if(B.g==K){yh(B),gf(B),B.g=null;var st=2}else if(oe(B.h,K))J=K.G,Ce(B.h,K),st=1;else return;if(B.I!=0){if(K.o)if(st==1){J=K.u?K.u.length:0,K=Date.now()-K.F;var Ct=B.D;st=Fe(),yt(st,new ne(st,J)),xh(B)}else Td(B);else if(Ct=K.m,Ct==3||Ct==0&&K.X>0||!(st==1&&em(B,K)||st==2&&mf(B)))switch(J&&J.length>0&&(K=B.h,K.i=K.i.concat(J)),Ct){case 1:la(B,5);break;case 4:la(B,10);break;case 3:la(B,6);break;default:la(B,2)}}}function xf(B,K){let J=B.Qa+Math.floor(Math.random()*B.Za);return B.isActive()||(J*=2),J*K}function la(B,K){if(B.j.info("Error code "+K),K==2){var J=a(B.bb,B),st=B.Ua;const Ct=!st;st=new ai(st||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ne(st,"https"),hn(st),Ct?qv(st.toString(),J):fd(st.toString(),J)}else Dt(2);B.I=0,B.l&&B.l.pa(K),yf(B),xd(B)}v.bb=function(B){B?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function yf(B){if(B.I=0,B.ja=[],B.l){const K=ge(B.h);(K.length!=0||B.i.length!=0)&&(n(B.ja,K),n(B.ja,B.i),B.h.i.length=0,h(B.i),B.i.length=0),B.l.oa()}}function Cd(B,K,J){var st=J instanceof ai?Qe(J):new ai(J);if(st.g!="")K&&(st.g=K+"."+st.g),ve(st,st.u);else{var Ct=o.location;st=Ct.protocol,K=K?K+"."+Ct.hostname:Ct.hostname,Ct=+Ct.port;const Lt=new ai(null);st&&Ne(Lt,st),K&&(Lt.g=K),Ct&&ve(Lt,Ct),J&&(Lt.h=J),st=Lt}return J=B.G,K=B.wa,J&&K&&me(st,J,K),me(st,"VER",B.ka),nl(B,st),st}function Ad(B,K,J){if(K&&!B.L)throw Error("Can't create secondary domain capable XhrIo object.");return K=B.Aa&&!B.ma?new Ii(new vh({ab:J})):new Ii(B.ma),K.Fa(B.L),K}v.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tf(){}v=Tf.prototype,v.ra=function(){},v.qa=function(){},v.pa=function(){},v.oa=function(){},v.isActive=function(){return!0},v.Ka=function(){};function Th(){}Th.prototype.g=function(B,K){return new Pn(B,K)};function Pn(B,K){Nt.call(this),this.g=new gd(K),this.l=B,this.h=K&&K.messageUrlParams||null,B=K&&K.messageHeaders||null,K&&K.clientProtocolHeaderRequired&&(B?B["X-Client-Protocol"]="webchannel":B={"X-Client-Protocol":"webchannel"}),this.g.o=B,B=K&&K.initMessageHeaders||null,K&&K.messageContentType&&(B?B["X-WebChannel-Content-Type"]=K.messageContentType:B={"X-WebChannel-Content-Type":K.messageContentType}),K&&K.sa&&(B?B["X-WebChannel-Client-Profile"]=K.sa:B={"X-WebChannel-Client-Profile":K.sa}),this.g.U=B,(B=K&&K.Qb)&&!b(B)&&(this.g.u=B),this.A=K&&K.supportsCrossDomainXhr||!1,this.v=K&&K.sendRawJson||!1,(K=K&&K.httpSessionIdParam)&&!b(K)&&(this.g.G=K,B=this.h,B!==null&&K in B&&(B=this.h,K in B&&delete B[K])),this.j=new ha(this)}u(Pn,Nt),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){pf(this.g)},Pn.prototype.o=function(B){var K=this.g;if(typeof B=="string"){var J={};J.__data__=B,B=J}else this.v&&(J={},J.__data__=Bt(B),B=J);K.i.push(new Et(K.Ya++,B)),K.I==3&&xh(K)},Pn.prototype.N=function(){this.g.l=null,delete this.j,pf(this.g),delete this.g,Pn.Z.N.call(this)};function Ef(B){Pt.call(this),B.__headers__&&(this.headers=B.__headers__,this.statusCode=B.__status__,delete B.__headers__,delete B.__status__);var K=B.__sm__;if(K){t:{for(const J in K){B=J;break t}B=void 0}(this.i=B)&&(B=this.i,K=K!==null&&B in K?K[B]:void 0),this.data=K}else this.data=B}u(Ef,Pt);function Sf(){$t.call(this),this.status=1}u(Sf,$t);function ha(B){this.g=B}u(ha,Tf),ha.prototype.ra=function(){yt(this.g,"a")},ha.prototype.qa=function(B){yt(this.g,new Ef(B))},ha.prototype.pa=function(B){yt(this.g,new Sf)},ha.prototype.oa=function(){yt(this.g,"b")},Th.prototype.createWebChannel=Th.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,Aw=function(){return new Th},Cw=function(){return Fe()},Sw=pe,$g={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wn.NO_ERROR=0,wn.TIMEOUT=8,wn.HTTP_ERROR=6,Ep=wn,Kn.COMPLETE="complete",Ew=Kn,Ut.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Zf=Ut,Ii.prototype.listenOnce=Ii.prototype.K,Ii.prototype.getLastError=Ii.prototype.Ha,Ii.prototype.getLastErrorCode=Ii.prototype.ya,Ii.prototype.getStatus=Ii.prototype.ca,Ii.prototype.getResponseJson=Ii.prototype.La,Ii.prototype.getResponseText=Ii.prototype.la,Ii.prototype.send=Ii.prototype.ea,Ii.prototype.setWithCredentials=Ii.prototype.Fa,Tw=Ii}).apply(typeof ip<"u"?ip:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu="12.9.0";function CU(v){qu=v}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Lv("@firebase/firestore");function _h(){return Kl.logLevel}function le(v,...t){if(Kl.logLevel<=je.DEBUG){const i=t.map(ay);Kl.debug(`Firestore (${qu}): ${v}`,...i)}}function ka(v,...t){if(Kl.logLevel<=je.ERROR){const i=t.map(ay);Kl.error(`Firestore (${qu}): ${v}`,...i)}}function Uu(v,...t){if(Kl.logLevel<=je.WARN){const i=t.map(ay);Kl.warn(`Firestore (${qu}): ${v}`,...i)}}function ay(v){if(typeof v=="string")return v;try{return(function(i){return JSON.stringify(i)})(v)}catch{return v}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(v,t,i){let f="Unexpected state";typeof t=="string"?f=t:i=t,ww(v,f,i)}function ww(v,t,i){let f=`FIRESTORE (${qu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${v.toString(16)})`;if(i!==void 0)try{f+=" CONTEXT: "+JSON.stringify(i)}catch{f+=" CONTEXT: "+i}throw ka(f),new Error(f)}function di(v,t,i,f){let y="Unexpected state";typeof i=="string"?y=i:f=i,v||ww(t,y,f)}function Le(v,t){return v}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Mr{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class wU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(as.UNAUTHENTICATED)))}shutdown(){}}class MU{constructor(t){this.t=t,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){di(this.o===void 0,42304);let f=this.i;const y=e=>this.i!==f?(f=this.i,i(e)):Promise.resolve();let C=new Ua;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new Ua,t.enqueueRetryable((()=>y(this.currentUser)))};const o=()=>{const e=C;t.enqueueRetryable((async()=>{await e.promise,await y(this.currentUser)}))},E=e=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((e=>E(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?E(e):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new Ua)}}),0),o()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((f=>this.i!==t?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):f?(di(typeof f.accessToken=="string",31837,{l:f}),new AU(f.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return di(t===null||typeof t=="string",2055,{h:t}),new as(t)}}class RU{constructor(t,i,f){this.P=t,this.T=i,this.I=f,this.type="FirstParty",this.user=as.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class PU{constructor(t,i,f){this.P=t,this.T=i,this.I=f}getToken(){return Promise.resolve(new RU(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(as.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class HE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bU{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ys(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){di(this.o===void 0,3512);const f=C=>{C.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${C.error.message}`);const o=C.token!==this.m;return this.m=C.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?i(C.token):Promise.resolve()};this.o=C=>{t.enqueueRetryable((()=>f(C)))};const y=C=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=C,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((C=>y(C))),setTimeout((()=>{if(!this.appCheck){const C=this.V.getImmediate({optional:!0});C?y(C):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new HE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(di(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new HE(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(v){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(v);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let f=0;f<v;f++)i[f]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let f="";for(;f.length<20;){const y=IU(40);for(let C=0;C<y.length;++C)f.length<20&&y[C]<i&&(f+=t.charAt(y[C]%62))}return f}}function Ze(v,t){return v<t?-1:v>t?1:0}function Kg(v,t){const i=Math.min(v.length,t.length);for(let f=0;f<i;f++){const y=v.charAt(f),C=t.charAt(f);if(y!==C)return o0(y)===o0(C)?Ze(y,C):o0(y)?1:-1}return Ze(v.length,t.length)}const LU=55296,FU=57343;function o0(v){const t=v.charCodeAt(0);return t>=LU&&t<=FU}function Vu(v,t,i){return v.length===t.length&&v.every(((f,y)=>i(f,t[y])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="__name__";class Br{constructor(t,i,f){i===void 0?i=0:i>t.length&&Re(637,{offset:i,range:t.length}),f===void 0?f=t.length-i:f>t.length-i&&Re(1746,{length:f,range:t.length-i}),this.segments=t,this.offset=i,this.len=f}get length(){return this.len}isEqual(t){return Br.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Br?t.forEach((f=>{i.push(f)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,f=this.limit();i<f;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const f=Math.min(t.length,i.length);for(let y=0;y<f;y++){const C=Br.compareSegments(t.get(y),i.get(y));if(C!==0)return C}return Ze(t.length,i.length)}static compareSegments(t,i){const f=Br.isNumericId(t),y=Br.isNumericId(i);return f&&!y?-1:!f&&y?1:f&&y?Br.extractNumericId(t).compare(Br.extractNumericId(i)):Kg(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return No.fromString(t.substring(4,t.length-2))}}class Ci extends Br{construct(t,i,f){return new Ci(t,i,f)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const f of t){if(f.indexOf("//")>=0)throw new re(Vt.INVALID_ARGUMENT,`Invalid segment (${f}). Paths must not contain // in them.`);i.push(...f.split("/").filter((y=>y.length>0)))}return new Ci(i)}static emptyPath(){return new Ci([])}}const DU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends Br{construct(t,i,f){return new Ln(t,i,f)}static isValidIdentifier(t){return DU.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_E}static keyField(){return new Ln([_E])}static fromServerFormat(t){const i=[];let f="",y=0;const C=()=>{if(f.length===0)throw new re(Vt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(f),f=""};let o=!1;for(;y<t.length;){const E=t[y];if(E==="\\"){if(y+1===t.length)throw new re(Vt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[y+1];if(e!=="\\"&&e!=="."&&e!=="`")throw new re(Vt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);f+=e,y+=2}else E==="`"?(o=!o,y++):E!=="."||o?(f+=E,y++):(C(),y++)}if(C(),o)throw new re(Vt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ln(i)}static emptyPath(){return new Ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.path=t}static fromPath(t){return new Te(Ci.fromString(t))}static fromName(t){return new Te(Ci.fromString(t).popFirst(5))}static empty(){return new Te(Ci.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ci.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return Ci.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Te(new Ci(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(v,t,i){if(!i)throw new re(Vt.INVALID_ARGUMENT,`Function ${v}() cannot be called with an empty ${t}.`)}function OU(v,t,i,f){if(t===!0&&f===!0)throw new re(Vt.INVALID_ARGUMENT,`${v} and ${i} cannot be used together.`)}function XE(v){if(!Te.isDocumentKey(v))throw new re(Vt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${v} has ${v.length}.`)}function YE(v){if(Te.isDocumentKey(v))throw new re(Vt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${v} has ${v.length}.`)}function Rw(v){return typeof v=="object"&&v!==null&&(Object.getPrototypeOf(v)===Object.prototype||Object.getPrototypeOf(v)===null)}function Fv(v){if(v===void 0)return"undefined";if(v===null)return"null";if(typeof v=="string")return v.length>20&&(v=`${v.substring(0,20)}...`),JSON.stringify(v);if(typeof v=="number"||typeof v=="boolean")return""+v;if(typeof v=="object"){if(v instanceof Array)return"an array";{const t=(function(f){return f.constructor?f.constructor.name:null})(v);return t?`a custom ${t} object`:"an object"}}return typeof v=="function"?"a function":Re(12329,{type:typeof v})}function Va(v,t){if("_delegate"in v&&(v=v._delegate),!(v instanceof t)){if(t.name===v.constructor.name)throw new re(Vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Fv(v);throw new re(Vt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return v}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(v,t){const i={typeString:v};return t&&(i.value=t),i}function Qc(v,t){if(!Rw(v))throw new re(Vt.INVALID_ARGUMENT,"JSON must be an object");let i;for(const f in t)if(t[f]){const y=t[f].typeString,C="value"in t[f]?{value:t[f].value}:void 0;if(!(f in v)){i=`JSON missing required field: '${f}'`;break}const o=v[f];if(y&&typeof o!==y){i=`JSON field '${f}' must be a ${y}.`;break}if(C!==void 0&&o!==C.value){i=`Expected '${f}' field to equal '${C.value}'`;break}}if(i)throw new re(Vt.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=-62135596800,$E=1e6;class Ri{static now(){return Ri.fromMillis(Date.now())}static fromDate(t){return Ri.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),f=Math.floor((t-1e3*i)*$E);return new Ri(i,f)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new re(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new re(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<kE)throw new re(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new re(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$E}_compareTo(t){return this.seconds===t.seconds?Ze(this.nanoseconds,t.nanoseconds):Ze(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ri._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qc(t,Ri._jsonSchema))return new Ri(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-kE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ri._jsonSchemaVersion="firestore/timestamp/1.0",Ri._jsonSchema={type:ln("string",Ri._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(t){return new be(t)}static min(){return new be(new Ri(0,0))}static max(){return new be(new Ri(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=-1;function NU(v,t){const i=v.toTimestamp().seconds,f=v.toTimestamp().nanoseconds+1,y=be.fromTimestamp(f===1e9?new Ri(i+1,0):new Ri(i,f));return new Xo(y,Te.empty(),t)}function BU(v){return new Xo(v.readTime,v.key,wc)}class Xo{constructor(t,i,f){this.readTime=t,this.documentKey=i,this.largestBatchId=f}static min(){return new Xo(be.min(),Te.empty(),wc)}static max(){return new Xo(be.max(),Te.empty(),wc)}}function UU(v,t){let i=v.readTime.compareTo(t.readTime);return i!==0?i:(i=Te.comparator(v.documentKey,t.documentKey),i!==0?i:Ze(v.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tf(v){if(v.code!==Vt.FAILED_PRECONDITION||v.message!==VU)throw v;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Ht(((f,y)=>{this.nextCallback=C=>{this.wrapSuccess(t,C).next(f,y)},this.catchCallback=C=>{this.wrapFailure(i,C).next(f,y)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof Ht?i:Ht.resolve(i)}catch(i){return Ht.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):Ht.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):Ht.reject(i)}static resolve(t){return new Ht(((i,f)=>{i(t)}))}static reject(t){return new Ht(((i,f)=>{f(t)}))}static waitFor(t){return new Ht(((i,f)=>{let y=0,C=0,o=!1;t.forEach((E=>{++y,E.next((()=>{++C,o&&C===y&&i()}),(e=>f(e)))})),o=!0,C===y&&i()}))}static or(t){let i=Ht.resolve(!1);for(const f of t)i=i.next((y=>y?Ht.resolve(y):f()));return i}static forEach(t,i){const f=[];return t.forEach(((y,C)=>{f.push(i.call(this,y,C))})),this.waitFor(f)}static mapArray(t,i){return new Ht(((f,y)=>{const C=t.length,o=new Array(C);let E=0;for(let e=0;e<C;e++){const a=e;i(t[a]).next((x=>{o[a]=x,++E,E===C&&f(o)}),(x=>y(x)))}}))}static doWhile(t,i){return new Ht(((f,y)=>{const C=()=>{t()===!0?i().next((()=>{C()}),y):f()};C()}))}}function GU(v){const t=v.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function ef(v){return v.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=f=>this.ae(f),this.ue=f=>i.writeSequenceNumber(f))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Dv.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function Ov(v){return v==null}function jp(v){return v===0&&1/v==-1/0}function WU(v){return typeof v=="number"&&Number.isInteger(v)&&!jp(v)&&v<=Number.MAX_SAFE_INTEGER&&v>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="";function HU(v){let t="";for(let i=0;i<v.length;i++)t.length>0&&(t=KE(t)),t=_U(v.get(i),t);return KE(t)}function _U(v,t){let i=t;const f=v.length;for(let y=0;y<f;y++){const C=v.charAt(y);switch(C){case"\0":i+="";break;case Pw:i+="";break;default:i+=C}}return i}function KE(v){return v+Pw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(v){let t=0;for(const i in v)Object.prototype.hasOwnProperty.call(v,i)&&t++;return t}function ah(v,t){for(const i in v)Object.prototype.hasOwnProperty.call(v,i)&&t(i,v[i])}function bw(v){for(const t in v)if(Object.prototype.hasOwnProperty.call(v,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t,i){this.comparator=t,this.root=i||bn.EMPTY}insert(t,i){return new zi(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(t){return new zi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const f=this.comparator(t,i.key);if(f===0)return i.value;f<0?i=i.left:f>0&&(i=i.right)}return null}indexOf(t){let i=0,f=this.root;for(;!f.isEmpty();){const y=this.comparator(t,f.key);if(y===0)return i+f.left.size;y<0?f=f.left:(i+=f.left.size+1,f=f.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,f)=>(t(i,f),!1)))}toString(){const t=[];return this.inorderTraversal(((i,f)=>(t.push(`${i}:${f}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new np(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new np(this.root,t,this.comparator,!1)}getReverseIterator(){return new np(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new np(this.root,t,this.comparator,!0)}}class np{constructor(t,i,f,y){this.isReverse=y,this.nodeStack=[];let C=1;for(;!t.isEmpty();)if(C=i?f(t.key,i):1,i&&y&&(C*=-1),C<0)t=this.isReverse?t.left:t.right;else{if(C===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bn{constructor(t,i,f,y,C){this.key=t,this.value=i,this.color=f??bn.RED,this.left=y??bn.EMPTY,this.right=C??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,f,y,C){return new bn(t??this.key,i??this.value,f??this.color,y??this.left,C??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,f){let y=this;const C=f(t,y.key);return y=C<0?y.copy(null,null,null,y.left.insert(t,i,f),null):C===0?y.copy(null,i,null,null,null):y.copy(null,null,null,null,y.right.insert(t,i,f)),y.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let f,y=this;if(i(t,y.key)<0)y.left.isEmpty()||y.left.isRed()||y.left.left.isRed()||(y=y.moveRedLeft()),y=y.copy(null,null,null,y.left.remove(t,i),null);else{if(y.left.isRed()&&(y=y.rotateRight()),y.right.isEmpty()||y.right.isRed()||y.right.left.isRed()||(y=y.moveRedRight()),i(t,y.key)===0){if(y.right.isEmpty())return bn.EMPTY;f=y.right.min(),y=y.copy(f.key,f.value,null,null,y.right.removeMin())}y=y.copy(null,null,null,null,y.right.remove(t,i))}return y.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Re(27949);return t+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(t,i,f,y,C){return this}insert(t,i,f){return new bn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t){this.comparator=t,this.data=new zi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,f)=>(t(i),!1)))}forEachInRange(t,i){const f=this.data.getIteratorFrom(t[0]);for(;f.hasNext();){const y=f.getNext();if(this.comparator(y.key,t[1])>=0)return;i(y.key)}}forEachWhile(t,i){let f;for(f=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();f.hasNext();)if(!t(f.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new ZE(this.data.getIterator())}getIteratorFrom(t){return new ZE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((f=>{i=i.add(f)})),i}isEqual(t){if(!(t instanceof pn)||this.size!==t.size)return!1;const i=this.data.getIterator(),f=t.data.getIterator();for(;i.hasNext();){const y=i.getNext().key,C=f.getNext().key;if(this.comparator(y,C)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new pn(this.comparator);return i.data=t,i}}class ZE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(t){this.fields=t,t.sort(Ln.comparator)}static empty(){return new gr([])}unionWith(t){let i=new pn(Ln.comparator);for(const f of this.fields)i=i.add(f);for(const f of t)i=i.add(f);return new gr(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Vu(this.fields,t.fields,((i,f)=>i.isEqual(f)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(y){try{return atob(y)}catch(C){throw typeof DOMException<"u"&&C instanceof DOMException?new Iw("Invalid base64 string: "+C):C}})(t);return new Bn(i)}static fromUint8Array(t){const i=(function(y){let C="";for(let o=0;o<y.length;++o)C+=String.fromCharCode(y[o]);return C})(t);return new Bn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const f=new Uint8Array(i.length);for(let y=0;y<i.length;y++)f[y]=i.charCodeAt(y);return f})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ze(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const XU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(v){if(di(!!v,39018),typeof v=="string"){let t=0;const i=XU.exec(v);if(di(!!i,46558,{timestamp:v}),i[1]){let y=i[1];y=(y+"000000000").substr(0,9),t=Number(y)}const f=new Date(v);return{seconds:Math.floor(f.getTime()/1e3),nanos:t}}return{seconds:$i(v.seconds),nanos:$i(v.nanos)}}function $i(v){return typeof v=="number"?v:typeof v=="string"?Number(v):0}function ko(v){return typeof v=="string"?Bn.fromBase64String(v):Bn.fromUint8Array(v)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="server_timestamp",Fw="__type__",Dw="__previous_value__",Ow="__local_write_time__";function hy(v){var i,f;return((f=(((i=v==null?void 0:v.mapValue)==null?void 0:i.fields)||{})[Fw])==null?void 0:f.stringValue)===Lw}function Nv(v){const t=v.mapValue.fields[Dw];return hy(t)?Nv(t):t}function Mc(v){const t=Yo(v.mapValue.fields[Ow].timestampValue);return new Ri(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(t,i,f,y,C,o,E,e,a,x,u){this.databaseId=t,this.appId=i,this.persistenceKey=f,this.host=y,this.ssl=C,this.forceLongPolling=o,this.autoDetectLongPolling=E,this.longPollingOptions=e,this.useFetchStreams=a,this.isUsingEmulator=x,this.apiKey=u}}const Zp="(default)";class Rc{constructor(t,i){this.projectId=t,this.database=i||Zp}static empty(){return new Rc("","")}get isDefaultDatabase(){return this.database===Zp}isEqual(t){return t instanceof Rc&&t.projectId===this.projectId&&t.database===this.database}}function kU(v,t){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new re(Vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rc(v.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="__type__",$U="__max__",sp={mapValue:{}},Bw="__vector__",Jp="value";function $o(v){return"nullValue"in v?0:"booleanValue"in v?1:"integerValue"in v||"doubleValue"in v?2:"timestampValue"in v?3:"stringValue"in v?5:"bytesValue"in v?6:"referenceValue"in v?7:"geoPointValue"in v?8:"arrayValue"in v?9:"mapValue"in v?hy(v)?4:jU(v)?9007199254740991:KU(v)?10:11:Re(28295,{value:v})}function ia(v,t){if(v===t)return!0;const i=$o(v);if(i!==$o(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return v.booleanValue===t.booleanValue;case 4:return Mc(v).isEqual(Mc(t));case 3:return(function(y,C){if(typeof y.timestampValue=="string"&&typeof C.timestampValue=="string"&&y.timestampValue.length===C.timestampValue.length)return y.timestampValue===C.timestampValue;const o=Yo(y.timestampValue),E=Yo(C.timestampValue);return o.seconds===E.seconds&&o.nanos===E.nanos})(v,t);case 5:return v.stringValue===t.stringValue;case 6:return(function(y,C){return ko(y.bytesValue).isEqual(ko(C.bytesValue))})(v,t);case 7:return v.referenceValue===t.referenceValue;case 8:return(function(y,C){return $i(y.geoPointValue.latitude)===$i(C.geoPointValue.latitude)&&$i(y.geoPointValue.longitude)===$i(C.geoPointValue.longitude)})(v,t);case 2:return(function(y,C){if("integerValue"in y&&"integerValue"in C)return $i(y.integerValue)===$i(C.integerValue);if("doubleValue"in y&&"doubleValue"in C){const o=$i(y.doubleValue),E=$i(C.doubleValue);return o===E?jp(o)===jp(E):isNaN(o)&&isNaN(E)}return!1})(v,t);case 9:return Vu(v.arrayValue.values||[],t.arrayValue.values||[],ia);case 10:case 11:return(function(y,C){const o=y.mapValue.fields||{},E=C.mapValue.fields||{};if(jE(o)!==jE(E))return!1;for(const e in o)if(o.hasOwnProperty(e)&&(E[e]===void 0||!ia(o[e],E[e])))return!1;return!0})(v,t);default:return Re(52216,{left:v})}}function Pc(v,t){return(v.values||[]).find((i=>ia(i,t)))!==void 0}function zu(v,t){if(v===t)return 0;const i=$o(v),f=$o(t);if(i!==f)return Ze(i,f);switch(i){case 0:case 9007199254740991:return 0;case 1:return Ze(v.booleanValue,t.booleanValue);case 2:return(function(C,o){const E=$i(C.integerValue||C.doubleValue),e=$i(o.integerValue||o.doubleValue);return E<e?-1:E>e?1:E===e?0:isNaN(E)?isNaN(e)?0:-1:1})(v,t);case 3:return JE(v.timestampValue,t.timestampValue);case 4:return JE(Mc(v),Mc(t));case 5:return Kg(v.stringValue,t.stringValue);case 6:return(function(C,o){const E=ko(C),e=ko(o);return E.compareTo(e)})(v.bytesValue,t.bytesValue);case 7:return(function(C,o){const E=C.split("/"),e=o.split("/");for(let a=0;a<E.length&&a<e.length;a++){const x=Ze(E[a],e[a]);if(x!==0)return x}return Ze(E.length,e.length)})(v.referenceValue,t.referenceValue);case 8:return(function(C,o){const E=Ze($i(C.latitude),$i(o.latitude));return E!==0?E:Ze($i(C.longitude),$i(o.longitude))})(v.geoPointValue,t.geoPointValue);case 9:return QE(v.arrayValue,t.arrayValue);case 10:return(function(C,o){var r,h,n,l;const E=C.fields||{},e=o.fields||{},a=(r=E[Jp])==null?void 0:r.arrayValue,x=(h=e[Jp])==null?void 0:h.arrayValue,u=Ze(((n=a==null?void 0:a.values)==null?void 0:n.length)||0,((l=x==null?void 0:x.values)==null?void 0:l.length)||0);return u!==0?u:QE(a,x)})(v.mapValue,t.mapValue);case 11:return(function(C,o){if(C===sp.mapValue&&o===sp.mapValue)return 0;if(C===sp.mapValue)return 1;if(o===sp.mapValue)return-1;const E=C.fields||{},e=Object.keys(E),a=o.fields||{},x=Object.keys(a);e.sort(),x.sort();for(let u=0;u<e.length&&u<x.length;++u){const r=Kg(e[u],x[u]);if(r!==0)return r;const h=zu(E[e[u]],a[x[u]]);if(h!==0)return h}return Ze(e.length,x.length)})(v.mapValue,t.mapValue);default:throw Re(23264,{he:i})}}function JE(v,t){if(typeof v=="string"&&typeof t=="string"&&v.length===t.length)return Ze(v,t);const i=Yo(v),f=Yo(t),y=Ze(i.seconds,f.seconds);return y!==0?y:Ze(i.nanos,f.nanos)}function QE(v,t){const i=v.values||[],f=t.values||[];for(let y=0;y<i.length&&y<f.length;++y){const C=zu(i[y],f[y]);if(C)return C}return Ze(i.length,f.length)}function Gu(v){return jg(v)}function jg(v){return"nullValue"in v?"null":"booleanValue"in v?""+v.booleanValue:"integerValue"in v?""+v.integerValue:"doubleValue"in v?""+v.doubleValue:"timestampValue"in v?(function(i){const f=Yo(i);return`time(${f.seconds},${f.nanos})`})(v.timestampValue):"stringValue"in v?v.stringValue:"bytesValue"in v?(function(i){return ko(i).toBase64()})(v.bytesValue):"referenceValue"in v?(function(i){return Te.fromName(i).toString()})(v.referenceValue):"geoPointValue"in v?(function(i){return`geo(${i.latitude},${i.longitude})`})(v.geoPointValue):"arrayValue"in v?(function(i){let f="[",y=!0;for(const C of i.values||[])y?y=!1:f+=",",f+=jg(C);return f+"]"})(v.arrayValue):"mapValue"in v?(function(i){const f=Object.keys(i.fields||{}).sort();let y="{",C=!0;for(const o of f)C?C=!1:y+=",",y+=`${o}:${jg(i.fields[o])}`;return y+"}"})(v.mapValue):Re(61005,{value:v})}function Sp(v){switch($o(v)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nv(v);return t?16+Sp(t):16;case 5:return 2*v.stringValue.length;case 6:return ko(v.bytesValue).approximateByteSize();case 7:return v.referenceValue.length;case 9:return(function(f){return(f.values||[]).reduce(((y,C)=>y+Sp(C)),0)})(v.arrayValue);case 10:case 11:return(function(f){let y=0;return ah(f.fields,((C,o)=>{y+=C.length+Sp(o)})),y})(v.mapValue);default:throw Re(13486,{value:v})}}function qE(v,t){return{referenceValue:`projects/${v.projectId}/databases/${v.database}/documents/${t.path.canonicalString()}`}}function Zg(v){return!!v&&"integerValue"in v}function uy(v){return!!v&&"arrayValue"in v}function tS(v){return!!v&&"nullValue"in v}function eS(v){return!!v&&"doubleValue"in v&&isNaN(Number(v.doubleValue))}function Cp(v){return!!v&&"mapValue"in v}function KU(v){var i,f;return((f=(((i=v==null?void 0:v.mapValue)==null?void 0:i.fields)||{})[Nw])==null?void 0:f.stringValue)===Bw}function lc(v){if(v.geoPointValue)return{geoPointValue:{...v.geoPointValue}};if(v.timestampValue&&typeof v.timestampValue=="object")return{timestampValue:{...v.timestampValue}};if(v.mapValue){const t={mapValue:{fields:{}}};return ah(v.mapValue.fields,((i,f)=>t.mapValue.fields[i]=lc(f))),t}if(v.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(v.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=lc(v.arrayValue.values[i]);return t}return{...v}}function jU(v){return(((v.mapValue||{}).fields||{}).__type__||{}).stringValue===$U}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t){this.value=t}static empty(){return new ks({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let f=0;f<t.length-1;++f)if(i=(i.mapValue.fields||{})[t.get(f)],!Cp(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=lc(i)}setAll(t){let i=Ln.emptyPath(),f={},y=[];t.forEach(((o,E)=>{if(!i.isImmediateParentOf(E)){const e=this.getFieldsMap(i);this.applyChanges(e,f,y),f={},y=[],i=E.popLast()}o?f[E.lastSegment()]=lc(o):y.push(E.lastSegment())}));const C=this.getFieldsMap(i);this.applyChanges(C,f,y)}delete(t){const i=this.field(t.popLast());Cp(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return ia(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let f=0;f<t.length;++f){let y=i.mapValue.fields[t.get(f)];Cp(y)&&y.mapValue.fields||(y={mapValue:{fields:{}}},i.mapValue.fields[t.get(f)]=y),i=y}return i.mapValue.fields}applyChanges(t,i,f){ah(i,((y,C)=>t[y]=C));for(const y of f)delete t[y]}clone(){return new ks(lc(this.value))}}function Uw(v){const t=[];return ah(v.fields,((i,f)=>{const y=new Ln([i]);if(Cp(f)){const C=Uw(f.mapValue).fields;if(C.length===0)t.push(y);else for(const o of C)t.push(y.child(o))}else t.push(y)})),new gr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t,i,f,y,C,o,E){this.key=t,this.documentType=i,this.version=f,this.readTime=y,this.createTime=C,this.data=o,this.documentState=E}static newInvalidDocument(t){return new _n(t,0,be.min(),be.min(),be.min(),ks.empty(),0)}static newFoundDocument(t,i,f,y){return new _n(t,1,i,be.min(),f,y,0)}static newNoDocument(t,i){return new _n(t,2,i,be.min(),be.min(),ks.empty(),0)}static newUnknownDocument(t,i){return new _n(t,3,i,be.min(),be.min(),ks.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ks.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ks.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof _n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t,i){this.position=t,this.inclusive=i}}function iS(v,t,i){let f=0;for(let y=0;y<v.position.length;y++){const C=t[y],o=v.position[y];if(C.field.isKeyField()?f=Te.comparator(Te.fromName(o.referenceValue),i.key):f=zu(o,i.data.field(C.field)),C.dir==="desc"&&(f*=-1),f!==0)break}return f}function nS(v,t){if(v===null)return t===null;if(t===null||v.inclusive!==t.inclusive||v.position.length!==t.position.length)return!1;for(let i=0;i<v.position.length;i++)if(!ia(v.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(t,i="asc"){this.field=t,this.dir=i}}function ZU(v,t){return v.dir===t.dir&&v.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{}class on extends Vw{constructor(t,i,f){super(),this.field=t,this.op=i,this.value=f}static create(t,i,f){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,f):new QU(t,i,f):i==="array-contains"?new e7(t,f):i==="in"?new i7(t,f):i==="not-in"?new n7(t,f):i==="array-contains-any"?new s7(t,f):new on(t,i,f)}static createKeyFieldInFilter(t,i,f){return i==="in"?new qU(t,f):new t7(t,f)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(zu(i,this.value)):i!==null&&$o(this.value)===$o(i)&&this.matchesComparison(zu(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sr extends Vw{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Sr(t,i)}matches(t){return zw(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zw(v){return v.op==="and"}function Gw(v){return JU(v)&&zw(v)}function JU(v){for(const t of v.filters)if(t instanceof Sr)return!1;return!0}function Jg(v){if(v instanceof on)return v.field.canonicalString()+v.op.toString()+Gu(v.value);if(Gw(v))return v.filters.map((t=>Jg(t))).join(",");{const t=v.filters.map((i=>Jg(i))).join(",");return`${v.op}(${t})`}}function Ww(v,t){return v instanceof on?(function(f,y){return y instanceof on&&f.op===y.op&&f.field.isEqual(y.field)&&ia(f.value,y.value)})(v,t):v instanceof Sr?(function(f,y){return y instanceof Sr&&f.op===y.op&&f.filters.length===y.filters.length?f.filters.reduce(((C,o,E)=>C&&Ww(o,y.filters[E])),!0):!1})(v,t):void Re(19439)}function Hw(v){return v instanceof on?(function(i){return`${i.field.canonicalString()} ${i.op} ${Gu(i.value)}`})(v):v instanceof Sr?(function(i){return i.op.toString()+" {"+i.getFilters().map(Hw).join(" ,")+"}"})(v):"Filter"}class QU extends on{constructor(t,i,f){super(t,i,f),this.key=Te.fromName(f.referenceValue)}matches(t){const i=Te.comparator(t.key,this.key);return this.matchesComparison(i)}}class qU extends on{constructor(t,i){super(t,"in",i),this.keys=_w("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class t7 extends on{constructor(t,i){super(t,"not-in",i),this.keys=_w("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function _w(v,t){var i;return(((i=t.arrayValue)==null?void 0:i.values)||[]).map((f=>Te.fromName(f.referenceValue)))}class e7 extends on{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return uy(i)&&Pc(i.arrayValue,this.value)}}class i7 extends on{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Pc(this.value.arrayValue,i)}}class n7 extends on{constructor(t,i){super(t,"not-in",i)}matches(t){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Pc(this.value.arrayValue,i)}}class s7 extends on{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!uy(i)||!i.arrayValue.values)&&i.arrayValue.values.some((f=>Pc(this.value.arrayValue,f)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(t,i=null,f=[],y=[],C=null,o=null,E=null){this.path=t,this.collectionGroup=i,this.orderBy=f,this.filters=y,this.limit=C,this.startAt=o,this.endAt=E,this.Te=null}}function sS(v,t=null,i=[],f=[],y=null,C=null,o=null){return new r7(v,t,i,f,y,C,o)}function fy(v){const t=Le(v);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((f=>Jg(f))).join(","),i+="|ob:",i+=t.orderBy.map((f=>(function(C){return C.field.canonicalString()+C.dir})(f))).join(","),Ov(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((f=>Gu(f))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((f=>Gu(f))).join(",")),t.Te=i}return t.Te}function cy(v,t){if(v.limit!==t.limit||v.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<v.orderBy.length;i++)if(!ZU(v.orderBy[i],t.orderBy[i]))return!1;if(v.filters.length!==t.filters.length)return!1;for(let i=0;i<v.filters.length;i++)if(!Ww(v.filters[i],t.filters[i]))return!1;return v.collectionGroup===t.collectionGroup&&!!v.path.isEqual(t.path)&&!!nS(v.startAt,t.startAt)&&nS(v.endAt,t.endAt)}function Qg(v){return Te.isDocumentKey(v.path)&&v.collectionGroup===null&&v.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t,i=null,f=[],y=[],C=null,o="F",E=null,e=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=f,this.filters=y,this.limit=C,this.limitType=o,this.startAt=E,this.endAt=e,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function a7(v,t,i,f,y,C,o,E){return new nf(v,t,i,f,y,C,o,E)}function Bv(v){return new nf(v)}function rS(v){return v.filters.length===0&&v.limit===null&&v.startAt==null&&v.endAt==null&&(v.explicitOrderBy.length===0||v.explicitOrderBy.length===1&&v.explicitOrderBy[0].field.isKeyField())}function o7(v){return Te.isDocumentKey(v.path)&&v.collectionGroup===null&&v.filters.length===0}function Xw(v){return v.collectionGroup!==null}function hc(v){const t=Le(v);if(t.Ie===null){t.Ie=[];const i=new Set;for(const C of t.explicitOrderBy)t.Ie.push(C),i.add(C.field.canonicalString());const f=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let E=new pn(Ln.comparator);return o.filters.forEach((e=>{e.getFlattenedFilters().forEach((a=>{a.isInequality()&&(E=E.add(a.field))}))})),E})(t).forEach((C=>{i.has(C.canonicalString())||C.isKeyField()||t.Ie.push(new bc(C,f))})),i.has(Ln.keyField().canonicalString())||t.Ie.push(new bc(Ln.keyField(),f))}return t.Ie}function Kr(v){const t=Le(v);return t.Ee||(t.Ee=l7(t,hc(v))),t.Ee}function l7(v,t){if(v.limitType==="F")return sS(v.path,v.collectionGroup,t,v.filters,v.limit,v.startAt,v.endAt);{t=t.map((y=>{const C=y.dir==="desc"?"asc":"desc";return new bc(y.field,C)}));const i=v.endAt?new Qp(v.endAt.position,v.endAt.inclusive):null,f=v.startAt?new Qp(v.startAt.position,v.startAt.inclusive):null;return sS(v.path,v.collectionGroup,t,v.filters,v.limit,i,f)}}function qg(v,t){const i=v.filters.concat([t]);return new nf(v.path,v.collectionGroup,v.explicitOrderBy.slice(),i,v.limit,v.limitType,v.startAt,v.endAt)}function h7(v,t){const i=v.explicitOrderBy.concat([t]);return new nf(v.path,v.collectionGroup,i,v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}function qp(v,t,i){return new nf(v.path,v.collectionGroup,v.explicitOrderBy.slice(),v.filters.slice(),t,i,v.startAt,v.endAt)}function Uv(v,t){return cy(Kr(v),Kr(t))&&v.limitType===t.limitType}function Yw(v){return`${fy(Kr(v))}|lt:${v.limitType}`}function Xh(v){return`Query(target=${(function(i){let f=i.path.canonicalString();return i.collectionGroup!==null&&(f+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(f+=`, filters: [${i.filters.map((y=>Hw(y))).join(", ")}]`),Ov(i.limit)||(f+=", limit: "+i.limit),i.orderBy.length>0&&(f+=`, orderBy: [${i.orderBy.map((y=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(y))).join(", ")}]`),i.startAt&&(f+=", startAt: ",f+=i.startAt.inclusive?"b:":"a:",f+=i.startAt.position.map((y=>Gu(y))).join(",")),i.endAt&&(f+=", endAt: ",f+=i.endAt.inclusive?"a:":"b:",f+=i.endAt.position.map((y=>Gu(y))).join(",")),`Target(${f})`})(Kr(v))}; limitType=${v.limitType})`}function Vv(v,t){return t.isFoundDocument()&&(function(f,y){const C=y.key.path;return f.collectionGroup!==null?y.key.hasCollectionId(f.collectionGroup)&&f.path.isPrefixOf(C):Te.isDocumentKey(f.path)?f.path.isEqual(C):f.path.isImmediateParentOf(C)})(v,t)&&(function(f,y){for(const C of hc(f))if(!C.field.isKeyField()&&y.data.field(C.field)===null)return!1;return!0})(v,t)&&(function(f,y){for(const C of f.filters)if(!C.matches(y))return!1;return!0})(v,t)&&(function(f,y){return!(f.startAt&&!(function(o,E,e){const a=iS(o,E,e);return o.inclusive?a<=0:a<0})(f.startAt,hc(f),y)||f.endAt&&!(function(o,E,e){const a=iS(o,E,e);return o.inclusive?a>=0:a>0})(f.endAt,hc(f),y))})(v,t)}function u7(v){return v.collectionGroup||(v.path.length%2==1?v.path.lastSegment():v.path.get(v.path.length-2))}function kw(v){return(t,i)=>{let f=!1;for(const y of hc(v)){const C=f7(y,t,i);if(C!==0)return C;f=f||y.field.isKeyField()}return 0}}function f7(v,t,i){const f=v.field.isKeyField()?Te.comparator(t.key,i.key):(function(C,o,E){const e=o.data.field(C),a=E.data.field(C);return e!==null&&a!==null?zu(e,a):Re(42886)})(v.field,t,i);switch(v.dir){case"asc":return f;case"desc":return-1*f;default:return Re(19790,{direction:v.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),f=this.inner[i];if(f!==void 0){for(const[y,C]of f)if(this.equalsFn(y,t))return C}}has(t){return this.get(t)!==void 0}set(t,i){const f=this.mapKeyFn(t),y=this.inner[f];if(y===void 0)return this.inner[f]=[[t,i]],void this.innerSize++;for(let C=0;C<y.length;C++)if(this.equalsFn(y[C][0],t))return void(y[C]=[t,i]);y.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),f=this.inner[i];if(f===void 0)return!1;for(let y=0;y<f.length;y++)if(this.equalsFn(f[y][0],t))return f.length===1?delete this.inner[i]:f.splice(y,1),this.innerSize--,!0;return!1}forEach(t){ah(this.inner,((i,f)=>{for(const[y,C]of f)t(y,C)}))}isEmpty(){return bw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=new zi(Te.comparator);function $a(){return c7}const $w=new zi(Te.comparator);function Jf(...v){let t=$w;for(const i of v)t=t.insert(i.key,i);return t}function Kw(v){let t=$w;return v.forEach(((i,f)=>t=t.insert(i,f.overlayedDocument))),t}function Ml(){return uc()}function jw(){return uc()}function uc(){return new oh((v=>v.toString()),((v,t)=>v.isEqual(t)))}const d7=new zi(Te.comparator),p7=new pn(Te.comparator);function Je(...v){let t=p7;for(const i of v)t=t.add(i);return t}const v7=new pn(Ze);function m7(){return v7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(v,t){if(v.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jp(t)?"-0":t}}function Zw(v){return{integerValue:""+v}}function g7(v,t){return WU(t)?Zw(t):dy(v,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this._=void 0}}function x7(v,t,i){return v instanceof Ic?(function(y,C){const o={fields:{[Fw]:{stringValue:Lw},[Ow]:{timestampValue:{seconds:y.seconds,nanos:y.nanoseconds}}}};return C&&hy(C)&&(C=Nv(C)),C&&(o.fields[Dw]=C),{mapValue:o}})(i,t):v instanceof Lc?Qw(v,t):v instanceof Fc?qw(v,t):(function(y,C){const o=Jw(y,C),E=aS(o)+aS(y.Ae);return Zg(o)&&Zg(y.Ae)?Zw(E):dy(y.serializer,E)})(v,t)}function y7(v,t,i){return v instanceof Lc?Qw(v,t):v instanceof Fc?qw(v,t):i}function Jw(v,t){return v instanceof tv?(function(f){return Zg(f)||(function(C){return!!C&&"doubleValue"in C})(f)})(t)?t:{integerValue:0}:null}class Ic extends zv{}class Lc extends zv{constructor(t){super(),this.elements=t}}function Qw(v,t){const i=tM(t);for(const f of v.elements)i.some((y=>ia(y,f)))||i.push(f);return{arrayValue:{values:i}}}class Fc extends zv{constructor(t){super(),this.elements=t}}function qw(v,t){let i=tM(t);for(const f of v.elements)i=i.filter((y=>!ia(y,f)));return{arrayValue:{values:i}}}class tv extends zv{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function aS(v){return $i(v.integerValue||v.doubleValue)}function tM(v){return uy(v)&&v.arrayValue.values?v.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(t,i){this.field=t,this.transform=i}}function E7(v,t){return v.field.isEqual(t.field)&&(function(f,y){return f instanceof Lc&&y instanceof Lc||f instanceof Fc&&y instanceof Fc?Vu(f.elements,y.elements,ia):f instanceof tv&&y instanceof tv?ia(f.Ae,y.Ae):f instanceof Ic&&y instanceof Ic})(v.transform,t.transform)}class S7{constructor(t,i){this.version=t,this.transformResults=i}}class za{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new za}static exists(t){return new za(void 0,t)}static updateTime(t){return new za(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ap(v,t){return v.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(v.updateTime):v.exists===void 0||v.exists===t.isFoundDocument()}class Gv{}function eM(v,t){if(!v.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return v.isNoDocument()?new nM(v.key,za.none()):new qc(v.key,v.data,za.none());{const i=v.data,f=ks.empty();let y=new pn(Ln.comparator);for(let C of t.fields)if(!y.has(C)){let o=i.field(C);o===null&&C.length>1&&(C=C.popLast(),o=i.field(C)),o===null?f.delete(C):f.set(C,o),y=y.add(C)}return new lh(v.key,f,new gr(y.toArray()),za.none())}}function C7(v,t,i){v instanceof qc?(function(y,C,o){const E=y.value.clone(),e=lS(y.fieldTransforms,C,o.transformResults);E.setAll(e),C.convertToFoundDocument(o.version,E).setHasCommittedMutations()})(v,t,i):v instanceof lh?(function(y,C,o){if(!Ap(y.precondition,C))return void C.convertToUnknownDocument(o.version);const E=lS(y.fieldTransforms,C,o.transformResults),e=C.data;e.setAll(iM(y)),e.setAll(E),C.convertToFoundDocument(o.version,e).setHasCommittedMutations()})(v,t,i):(function(y,C,o){C.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,i)}function fc(v,t,i,f){return v instanceof qc?(function(C,o,E,e){if(!Ap(C.precondition,o))return E;const a=C.value.clone(),x=hS(C.fieldTransforms,e,o);return a.setAll(x),o.convertToFoundDocument(o.version,a).setHasLocalMutations(),null})(v,t,i,f):v instanceof lh?(function(C,o,E,e){if(!Ap(C.precondition,o))return E;const a=hS(C.fieldTransforms,e,o),x=o.data;return x.setAll(iM(C)),x.setAll(a),o.convertToFoundDocument(o.version,x).setHasLocalMutations(),E===null?null:E.unionWith(C.fieldMask.fields).unionWith(C.fieldTransforms.map((u=>u.field)))})(v,t,i,f):(function(C,o,E){return Ap(C.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):E})(v,t,i)}function A7(v,t){let i=null;for(const f of v.fieldTransforms){const y=t.data.field(f.field),C=Jw(f.transform,y||null);C!=null&&(i===null&&(i=ks.empty()),i.set(f.field,C))}return i||null}function oS(v,t){return v.type===t.type&&!!v.key.isEqual(t.key)&&!!v.precondition.isEqual(t.precondition)&&!!(function(f,y){return f===void 0&&y===void 0||!(!f||!y)&&Vu(f,y,((C,o)=>E7(C,o)))})(v.fieldTransforms,t.fieldTransforms)&&(v.type===0?v.value.isEqual(t.value):v.type!==1||v.data.isEqual(t.data)&&v.fieldMask.isEqual(t.fieldMask))}class qc extends Gv{constructor(t,i,f,y=[]){super(),this.key=t,this.value=i,this.precondition=f,this.fieldTransforms=y,this.type=0}getFieldMask(){return null}}class lh extends Gv{constructor(t,i,f,y,C=[]){super(),this.key=t,this.data=i,this.fieldMask=f,this.precondition=y,this.fieldTransforms=C,this.type=1}getFieldMask(){return this.fieldMask}}function iM(v){const t=new Map;return v.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const f=v.data.field(i);t.set(i,f)}})),t}function lS(v,t,i){const f=new Map;di(v.length===i.length,32656,{Ve:i.length,de:v.length});for(let y=0;y<i.length;y++){const C=v[y],o=C.transform,E=t.data.field(C.field);f.set(C.field,y7(o,E,i[y]))}return f}function hS(v,t,i){const f=new Map;for(const y of v){const C=y.transform,o=i.data.field(y.field);f.set(y.field,x7(C,o,t))}return f}class nM extends Gv{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w7 extends Gv{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(t,i,f,y){this.batchId=t,this.localWriteTime=i,this.baseMutations=f,this.mutations=y}applyToRemoteDocument(t,i){const f=i.mutationResults;for(let y=0;y<this.mutations.length;y++){const C=this.mutations[y];C.key.isEqual(t.key)&&C7(C,t,f[y])}}applyToLocalView(t,i){for(const f of this.baseMutations)f.key.isEqual(t.key)&&(i=fc(f,t,i,this.localWriteTime));for(const f of this.mutations)f.key.isEqual(t.key)&&(i=fc(f,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const f=jw();return this.mutations.forEach((y=>{const C=t.get(y.key),o=C.overlayedDocument;let E=this.applyToLocalView(o,C.mutatedFields);E=i.has(y.key)?null:E;const e=eM(o,E);e!==null&&f.set(y.key,e),o.isValidDocument()||o.convertToNoDocument(be.min())})),f}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),Je())}isEqual(t){return this.batchId===t.batchId&&Vu(this.mutations,t.mutations,((i,f)=>oS(i,f)))&&Vu(this.baseMutations,t.baseMutations,((i,f)=>oS(i,f)))}}class py{constructor(t,i,f,y){this.batch=t,this.commitVersion=i,this.mutationResults=f,this.docVersions=y}static from(t,i,f){di(t.mutations.length===f.length,58842,{me:t.mutations.length,fe:f.length});let y=(function(){return d7})();const C=t.mutations;for(let o=0;o<C.length;o++)y=y.insert(C[o].key,f[o].version);return new py(t,i,f,y)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,ni;function b7(v){switch(v){case Vt.OK:return Re(64938);case Vt.CANCELLED:case Vt.UNKNOWN:case Vt.DEADLINE_EXCEEDED:case Vt.RESOURCE_EXHAUSTED:case Vt.INTERNAL:case Vt.UNAVAILABLE:case Vt.UNAUTHENTICATED:return!1;case Vt.INVALID_ARGUMENT:case Vt.NOT_FOUND:case Vt.ALREADY_EXISTS:case Vt.PERMISSION_DENIED:case Vt.FAILED_PRECONDITION:case Vt.ABORTED:case Vt.OUT_OF_RANGE:case Vt.UNIMPLEMENTED:case Vt.DATA_LOSS:return!0;default:return Re(15467,{code:v})}}function sM(v){if(v===void 0)return ka("GRPC error has no .code"),Vt.UNKNOWN;switch(v){case tn.OK:return Vt.OK;case tn.CANCELLED:return Vt.CANCELLED;case tn.UNKNOWN:return Vt.UNKNOWN;case tn.DEADLINE_EXCEEDED:return Vt.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return Vt.RESOURCE_EXHAUSTED;case tn.INTERNAL:return Vt.INTERNAL;case tn.UNAVAILABLE:return Vt.UNAVAILABLE;case tn.UNAUTHENTICATED:return Vt.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return Vt.INVALID_ARGUMENT;case tn.NOT_FOUND:return Vt.NOT_FOUND;case tn.ALREADY_EXISTS:return Vt.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return Vt.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return Vt.FAILED_PRECONDITION;case tn.ABORTED:return Vt.ABORTED;case tn.OUT_OF_RANGE:return Vt.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return Vt.UNIMPLEMENTED;case tn.DATA_LOSS:return Vt.DATA_LOSS;default:return Re(39323,{code:v})}}(ni=tn||(tn={}))[ni.OK=0]="OK",ni[ni.CANCELLED=1]="CANCELLED",ni[ni.UNKNOWN=2]="UNKNOWN",ni[ni.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ni[ni.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ni[ni.NOT_FOUND=5]="NOT_FOUND",ni[ni.ALREADY_EXISTS=6]="ALREADY_EXISTS",ni[ni.PERMISSION_DENIED=7]="PERMISSION_DENIED",ni[ni.UNAUTHENTICATED=16]="UNAUTHENTICATED",ni[ni.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ni[ni.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ni[ni.ABORTED=10]="ABORTED",ni[ni.OUT_OF_RANGE=11]="OUT_OF_RANGE",ni[ni.UNIMPLEMENTED=12]="UNIMPLEMENTED",ni[ni.INTERNAL=13]="INTERNAL",ni[ni.UNAVAILABLE=14]="UNAVAILABLE",ni[ni.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new No([4294967295,4294967295],0);function uS(v){const t=I7().encode(v),i=new yw;return i.update(t),new Uint8Array(i.digest())}function fS(v){const t=new DataView(v.buffer),i=t.getUint32(0,!0),f=t.getUint32(4,!0),y=t.getUint32(8,!0),C=t.getUint32(12,!0);return[new No([i,f],0),new No([y,C],0)]}class vy{constructor(t,i,f){if(this.bitmap=t,this.padding=i,this.hashCount=f,i<0||i>=8)throw new Qf(`Invalid padding: ${i}`);if(f<0)throw new Qf(`Invalid hash count: ${f}`);if(t.length>0&&this.hashCount===0)throw new Qf(`Invalid hash count: ${f}`);if(t.length===0&&i!==0)throw new Qf(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=No.fromNumber(this.ge)}ye(t,i,f){let y=t.add(i.multiply(No.fromNumber(f)));return y.compare(L7)===1&&(y=new No([y.getBits(0),y.getBits(1)],0)),y.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=uS(t),[f,y]=fS(i);for(let C=0;C<this.hashCount;C++){const o=this.ye(f,y,C);if(!this.we(o))return!1}return!0}static create(t,i,f){const y=t%8==0?0:8-t%8,C=new Uint8Array(Math.ceil(t/8)),o=new vy(C,y,i);return f.forEach((E=>o.insert(E))),o}insert(t){if(this.ge===0)return;const i=uS(t),[f,y]=fS(i);for(let C=0;C<this.hashCount;C++){const o=this.ye(f,y,C);this.be(o)}}be(t){const i=Math.floor(t/8),f=t%8;this.bitmap[i]|=1<<f}}class Qf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(t,i,f,y,C){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=f,this.documentUpdates=y,this.resolvedLimboDocuments=C}static createSynthesizedRemoteEventForCurrentChange(t,i,f){const y=new Map;return y.set(t,td.createSynthesizedTargetChangeForCurrentChange(t,i,f)),new Wv(be.min(),y,new zi(Ze),$a(),Je())}}class td{constructor(t,i,f,y,C){this.resumeToken=t,this.current=i,this.addedDocuments=f,this.modifiedDocuments=y,this.removedDocuments=C}static createSynthesizedTargetChangeForCurrentChange(t,i,f){return new td(f,i,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,i,f,y){this.Se=t,this.removedTargetIds=i,this.key=f,this.De=y}}class rM{constructor(t,i){this.targetId=t,this.Ce=i}}class aM{constructor(t,i,f=Bn.EMPTY_BYTE_STRING,y=null){this.state=t,this.targetIds=i,this.resumeToken=f,this.cause=y}}class cS{constructor(){this.ve=0,this.Fe=dS(),this.Me=Bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Je(),i=Je(),f=Je();return this.Fe.forEach(((y,C)=>{switch(C){case 0:t=t.add(y);break;case 2:i=i.add(y);break;case 1:f=f.add(y);break;default:Re(38017,{changeType:C})}})),new td(this.Me,this.xe,t,i,f)}Ke(){this.Oe=!1,this.Fe=dS()}qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,di(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class F7{constructor(t){this.Ge=t,this.ze=new Map,this.je=$a(),this.He=rp(),this.Je=rp(),this.Ze=new zi(Ze)}Xe(t){for(const i of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const f=this.nt(i);switch(t.state){case 0:this.rt(i)&&f.Le(t.resumeToken);break;case 1:f.We(),f.Ne||f.Ke(),f.Le(t.resumeToken);break;case 2:f.We(),f.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(f.Qe(),f.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),f.Le(t.resumeToken));break;default:Re(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((f,y)=>{this.rt(y)&&i(y)}))}st(t){const i=t.targetId,f=t.Ce.count,y=this.ot(i);if(y){const C=y.target;if(Qg(C))if(f===0){const o=new Te(C.path);this.et(i,o,_n.newNoDocument(o,be.min()))}else di(f===1,20013,{expectedCount:f});else{const o=this._t(i);if(o!==f){const E=this.ut(t),e=E?this.ct(E,t,o):1;if(e!==0){this.it(i);const a=e===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,a)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:f="",padding:y=0},hashCount:C=0}=i;let o,E;try{o=ko(f).toUint8Array()}catch(e){if(e instanceof Iw)return Uu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{E=new vy(o,y,C)}catch(e){return Uu(e instanceof Qf?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return E.ge===0?null:E}ct(t,i,f){return i.Ce.count===f-this.Pt(t,i.targetId)?0:2}Pt(t,i){const f=this.Ge.getRemoteKeysForTarget(i);let y=0;return f.forEach((C=>{const o=this.Ge.ht(),E=`projects/${o.projectId}/databases/${o.database}/documents/${C.path.canonicalString()}`;t.mightContain(E)||(this.et(i,C,null),y++)})),y}Tt(t){const i=new Map;this.ze.forEach(((C,o)=>{const E=this.ot(o);if(E){if(C.current&&Qg(E.target)){const e=new Te(E.target.path);this.It(e).has(o)||this.Et(o,e)||this.et(o,e,_n.newNoDocument(e,t))}C.Be&&(i.set(o,C.ke()),C.Ke())}}));let f=Je();this.Je.forEach(((C,o)=>{let E=!0;o.forEachWhile((e=>{const a=this.ot(e);return!a||a.purpose==="TargetPurposeLimboResolution"||(E=!1,!1)})),E&&(f=f.add(C))})),this.je.forEach(((C,o)=>o.setReadTime(t)));const y=new Wv(t,i,this.Ze,this.je,f);return this.je=$a(),this.He=rp(),this.Je=rp(),this.Ze=new zi(Ze),y}Ye(t,i){if(!this.rt(t))return;const f=this.Et(t,i.key)?2:0;this.nt(t).qe(i.key,f),this.je=this.je.insert(i.key,i),this.He=this.He.insert(i.key,this.It(i.key).add(t)),this.Je=this.Je.insert(i.key,this.Rt(i.key).add(t))}et(t,i,f){if(!this.rt(t))return;const y=this.nt(t);this.Et(t,i)?y.qe(i,1):y.Ue(i),this.Je=this.Je.insert(i,this.Rt(i).delete(t)),this.Je=this.Je.insert(i,this.Rt(i).add(t)),f&&(this.je=this.je.insert(i,f))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let i=this.ze.get(t);return i||(i=new cS,this.ze.set(t,i)),i}Rt(t){let i=this.Je.get(t);return i||(i=new pn(Ze),this.Je=this.Je.insert(t,i)),i}It(t){let i=this.He.get(t);return i||(i=new pn(Ze),this.He=this.He.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||le("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new cS),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function rp(){return new zi(Te.comparator)}function dS(){return new zi(Te.comparator)}const D7={asc:"ASCENDING",desc:"DESCENDING"},O7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N7={and:"AND",or:"OR"};class B7{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function tx(v,t){return v.useProto3Json||Ov(t)?t:{value:t}}function ev(v,t){return v.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function oM(v,t){return v.useProto3Json?t.toBase64():t.toUint8Array()}function U7(v,t){return ev(v,t.toTimestamp())}function jr(v){return di(!!v,49232),be.fromTimestamp((function(i){const f=Yo(i);return new Ri(f.seconds,f.nanos)})(v))}function my(v,t){return ex(v,t).canonicalString()}function ex(v,t){const i=(function(y){return new Ci(["projects",y.projectId,"databases",y.database])})(v).child("documents");return t===void 0?i:i.child(t)}function lM(v){const t=Ci.fromString(v);return di(dM(t),10190,{key:t.toString()}),t}function ix(v,t){return my(v.databaseId,t.path)}function l0(v,t){const i=lM(t);if(i.get(1)!==v.databaseId.projectId)throw new re(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+v.databaseId.projectId);if(i.get(3)!==v.databaseId.database)throw new re(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+v.databaseId.database);return new Te(uM(i))}function hM(v,t){return my(v.databaseId,t)}function V7(v){const t=lM(v);return t.length===4?Ci.emptyPath():uM(t)}function nx(v){return new Ci(["projects",v.databaseId.projectId,"databases",v.databaseId.database]).canonicalString()}function uM(v){return di(v.length>4&&v.get(4)==="documents",29091,{key:v.toString()}),v.popFirst(5)}function pS(v,t,i){return{name:ix(v,t),fields:i.value.mapValue.fields}}function z7(v,t){let i;if("targetChange"in t){t.targetChange;const f=(function(a){return a==="NO_CHANGE"?0:a==="ADD"?1:a==="REMOVE"?2:a==="CURRENT"?3:a==="RESET"?4:Re(39313,{state:a})})(t.targetChange.targetChangeType||"NO_CHANGE"),y=t.targetChange.targetIds||[],C=(function(a,x){return a.useProto3Json?(di(x===void 0||typeof x=="string",58123),Bn.fromBase64String(x||"")):(di(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Bn.fromUint8Array(x||new Uint8Array))})(v,t.targetChange.resumeToken),o=t.targetChange.cause,E=o&&(function(a){const x=a.code===void 0?Vt.UNKNOWN:sM(a.code);return new re(x,a.message||"")})(o);i=new aM(f,y,C,E||null)}else if("documentChange"in t){t.documentChange;const f=t.documentChange;f.document,f.document.name,f.document.updateTime;const y=l0(v,f.document.name),C=jr(f.document.updateTime),o=f.document.createTime?jr(f.document.createTime):be.min(),E=new ks({mapValue:{fields:f.document.fields}}),e=_n.newFoundDocument(y,C,o,E),a=f.targetIds||[],x=f.removedTargetIds||[];i=new wp(a,x,e.key,e)}else if("documentDelete"in t){t.documentDelete;const f=t.documentDelete;f.document;const y=l0(v,f.document),C=f.readTime?jr(f.readTime):be.min(),o=_n.newNoDocument(y,C),E=f.removedTargetIds||[];i=new wp([],E,o.key,o)}else if("documentRemove"in t){t.documentRemove;const f=t.documentRemove;f.document;const y=l0(v,f.document),C=f.removedTargetIds||[];i=new wp([],C,y,null)}else{if(!("filter"in t))return Re(11601,{Vt:t});{t.filter;const f=t.filter;f.targetId;const{count:y=0,unchangedNames:C}=f,o=new P7(y,C),E=f.targetId;i=new rM(E,o)}}return i}function G7(v,t){let i;if(t instanceof qc)i={update:pS(v,t.key,t.value)};else if(t instanceof nM)i={delete:ix(v,t.key)};else if(t instanceof lh)i={update:pS(v,t.key,t.data),updateMask:j7(t.fieldMask)};else{if(!(t instanceof w7))return Re(16599,{dt:t.type});i={verify:ix(v,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((f=>(function(C,o){const E=o.transform;if(E instanceof Ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof Lc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof Fc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof tv)return{fieldPath:o.field.canonicalString(),increment:E.Ae};throw Re(20930,{transform:o.transform})})(0,f)))),t.precondition.isNone||(i.currentDocument=(function(y,C){return C.updateTime!==void 0?{updateTime:U7(y,C.updateTime)}:C.exists!==void 0?{exists:C.exists}:Re(27497)})(v,t.precondition)),i}function W7(v,t){return v&&v.length>0?(di(t!==void 0,14353),v.map((i=>(function(y,C){let o=y.updateTime?jr(y.updateTime):jr(C);return o.isEqual(be.min())&&(o=jr(C)),new S7(o,y.transformResults||[])})(i,t)))):[]}function H7(v,t){return{documents:[hM(v,t.path)]}}function _7(v,t){const i={structuredQuery:{}},f=t.path;let y;t.collectionGroup!==null?(y=f,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(y=f.popLast(),i.structuredQuery.from=[{collectionId:f.lastSegment()}]),i.parent=hM(v,y);const C=(function(a){if(a.length!==0)return cM(Sr.create(a,"and"))})(t.filters);C&&(i.structuredQuery.where=C);const o=(function(a){if(a.length!==0)return a.map((x=>(function(r){return{field:Yh(r.field),direction:k7(r.dir)}})(x)))})(t.orderBy);o&&(i.structuredQuery.orderBy=o);const E=tx(v,t.limit);return E!==null&&(i.structuredQuery.limit=E),t.startAt&&(i.structuredQuery.startAt=(function(a){return{before:a.inclusive,values:a.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(a){return{before:!a.inclusive,values:a.position}})(t.endAt)),{ft:i,parent:y}}function X7(v){let t=V7(v.parent);const i=v.structuredQuery,f=i.from?i.from.length:0;let y=null;if(f>0){di(f===1,65062);const x=i.from[0];x.allDescendants?y=x.collectionId:t=t.child(x.collectionId)}let C=[];i.where&&(C=(function(u){const r=fM(u);return r instanceof Sr&&Gw(r)?r.getFilters():[r]})(i.where));let o=[];i.orderBy&&(o=(function(u){return u.map((r=>(function(n){return new bc(kh(n.field),(function(c){switch(c){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(n.direction))})(r)))})(i.orderBy));let E=null;i.limit&&(E=(function(u){let r;return r=typeof u=="object"?u.value:u,Ov(r)?null:r})(i.limit));let e=null;i.startAt&&(e=(function(u){const r=!!u.before,h=u.values||[];return new Qp(h,r)})(i.startAt));let a=null;return i.endAt&&(a=(function(u){const r=!u.before,h=u.values||[];return new Qp(h,r)})(i.endAt)),a7(t,y,o,C,E,"F",e,a)}function Y7(v,t){const i=(function(y){switch(y){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:y})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function fM(v){return v.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const f=kh(i.unaryFilter.field);return on.create(f,"==",{doubleValue:NaN});case"IS_NULL":const y=kh(i.unaryFilter.field);return on.create(y,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const C=kh(i.unaryFilter.field);return on.create(C,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kh(i.unaryFilter.field);return on.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(v):v.fieldFilter!==void 0?(function(i){return on.create(kh(i.fieldFilter.field),(function(y){switch(y){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(v):v.compositeFilter!==void 0?(function(i){return Sr.create(i.compositeFilter.filters.map((f=>fM(f))),(function(y){switch(y){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(i.compositeFilter.op))})(v):Re(30097,{filter:v})}function k7(v){return D7[v]}function $7(v){return O7[v]}function K7(v){return N7[v]}function Yh(v){return{fieldPath:v.canonicalString()}}function kh(v){return Ln.fromServerFormat(v.fieldPath)}function cM(v){return v instanceof on?(function(i){if(i.op==="=="){if(eS(i.value))return{unaryFilter:{field:Yh(i.field),op:"IS_NAN"}};if(tS(i.value))return{unaryFilter:{field:Yh(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(eS(i.value))return{unaryFilter:{field:Yh(i.field),op:"IS_NOT_NAN"}};if(tS(i.value))return{unaryFilter:{field:Yh(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yh(i.field),op:$7(i.op),value:i.value}}})(v):v instanceof Sr?(function(i){const f=i.getFilters().map((y=>cM(y)));return f.length===1?f[0]:{compositeFilter:{op:K7(i.op),filters:f}}})(v):Re(54877,{filter:v})}function j7(v){const t=[];return v.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function dM(v){return v.length>=4&&v.get(0)==="projects"&&v.get(2)==="databases"}function pM(v){return!!v&&typeof v._toProto=="function"&&v._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,i,f,y,C=be.min(),o=be.min(),E=Bn.EMPTY_BYTE_STRING,e=null){this.target=t,this.targetId=i,this.purpose=f,this.sequenceNumber=y,this.snapshotVersion=C,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=E,this.expectedCount=e}withSequenceNumber(t){return new wo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(t){this.yt=t}}function J7(v){const t=X7({parent:v.parent,structuredQuery:v.structuredQuery});return v.limitType==="LAST"?qp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(){this.Sn=new q7}addToCollectionParentIndex(t,i){return this.Sn.add(i),Ht.resolve()}getCollectionParents(t,i){return Ht.resolve(this.Sn.getEntries(i))}addFieldIndex(t,i){return Ht.resolve()}deleteFieldIndex(t,i){return Ht.resolve()}deleteAllFieldIndexes(t){return Ht.resolve()}createTargetIndexes(t,i){return Ht.resolve()}getDocumentsMatchingTarget(t,i){return Ht.resolve(null)}getIndexType(t,i){return Ht.resolve(0)}getFieldIndexes(t,i){return Ht.resolve([])}getNextCollectionGroupToUpdate(t){return Ht.resolve(null)}getMinOffset(t,i){return Ht.resolve(Xo.min())}getMinOffsetFromCollectionGroup(t,i){return Ht.resolve(Xo.min())}updateCollectionGroup(t,i,f){return Ht.resolve()}updateIndexEntries(t,i){return Ht.resolve()}}class q7{constructor(){this.index={}}add(t){const i=t.lastSegment(),f=t.popLast(),y=this.index[i]||new pn(Ci.comparator),C=!y.has(f);return this.index[i]=y.add(f),C}has(t){const i=t.lastSegment(),f=t.popLast(),y=this.index[i];return y&&y.has(f)}getEntries(t){return(this.index[t]||new pn(Ci.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vM=41943040;class os{static withCacheSize(t){return new os(t,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,f){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=f}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os.DEFAULT_COLLECTION_PERCENTILE=10,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,os.DEFAULT=new os(vM,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),os.DISABLED=new os(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new Wu(0)}static ar(){return new Wu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="LruGarbageCollector",mM=1048576;function gS([v,t],[i,f]){const y=Ze(v,i);return y===0?Ze(t,f):y}class tV{constructor(t){this.Pr=t,this.buffer=new pn(gS),this.Tr=0}Ir(){return++this.Tr}Er(t){const i=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(i);else{const f=this.buffer.last();gS(i,f)<0&&(this.buffer=this.buffer.delete(f).add(i))}}get maxValue(){return this.buffer.last()[0]}}class eV{constructor(t,i,f){this.garbageCollector=t,this.asyncQueue=i,this.localStore=f,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){le(mS,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){ef(i)?le(mS,"Ignoring IndexedDB error during garbage collection: ",i):await tf(i)}await this.Ar(3e5)}))}}class iV{constructor(t,i){this.Vr=t,this.params=i}calculateTargetCount(t,i){return this.Vr.dr(t).next((f=>Math.floor(i/100*f)))}nthSequenceNumber(t,i){if(i===0)return Ht.resolve(Dv.ce);const f=new tV(i);return this.Vr.forEachTarget(t,(y=>f.Er(y.sequenceNumber))).next((()=>this.Vr.mr(t,(y=>f.Er(y))))).next((()=>f.maxValue))}removeTargets(t,i,f){return this.Vr.removeTargets(t,i,f)}removeOrphanedDocuments(t,i){return this.Vr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),Ht.resolve(vS)):this.getCacheSize(t).next((f=>f<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${f} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vS):this.gr(t,i)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,i){let f,y,C,o,E,e,a;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((u=>(u>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),y=this.params.maximumSequenceNumbersToCollect):y=u,o=Date.now(),this.nthSequenceNumber(t,y)))).next((u=>(f=u,E=Date.now(),this.removeTargets(t,f,i)))).next((u=>(C=u,e=Date.now(),this.removeOrphanedDocuments(t,f)))).next((u=>(a=Date.now(),_h()<=je.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-x}ms
	Determined least recently used ${y} in `+(E-o)+`ms
	Removed ${C} targets in `+(e-E)+`ms
	Removed ${u} documents in `+(a-e)+`ms
Total Duration: ${a-x}ms`),Ht.resolve({didRun:!0,sequenceNumbersCollected:y,targetsRemoved:C,documentsRemoved:u}))))}}function nV(v,t){return new iV(v,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this.changes=new oh((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,_n.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const f=this.changes.get(i);return f!==void 0?Ht.resolve(f):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(t,i,f,y){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=f,this.indexManager=y}getDocument(t,i){let f=null;return this.documentOverlayCache.getOverlay(t,i).next((y=>(f=y,this.remoteDocumentCache.getEntry(t,i)))).next((y=>(f!==null&&fc(f.mutation,y,gr.empty(),Ri.now()),y)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((f=>this.getLocalViewOfDocuments(t,f,Je()).next((()=>f))))}getLocalViewOfDocuments(t,i,f=Je()){const y=Ml();return this.populateOverlays(t,y,i).next((()=>this.computeViews(t,i,y,f).next((C=>{let o=Jf();return C.forEach(((E,e)=>{o=o.insert(E,e.overlayedDocument)})),o}))))}getOverlayedDocuments(t,i){const f=Ml();return this.populateOverlays(t,f,i).next((()=>this.computeViews(t,i,f,Je())))}populateOverlays(t,i,f){const y=[];return f.forEach((C=>{i.has(C)||y.push(C)})),this.documentOverlayCache.getOverlays(t,y).next((C=>{C.forEach(((o,E)=>{i.set(o,E)}))}))}computeViews(t,i,f,y){let C=$a();const o=uc(),E=(function(){return uc()})();return i.forEach(((e,a)=>{const x=f.get(a.key);y.has(a.key)&&(x===void 0||x.mutation instanceof lh)?C=C.insert(a.key,a):x!==void 0?(o.set(a.key,x.mutation.getFieldMask()),fc(x.mutation,a,x.mutation.getFieldMask(),Ri.now())):o.set(a.key,gr.empty())})),this.recalculateAndSaveOverlays(t,C).next((e=>(e.forEach(((a,x)=>o.set(a,x))),i.forEach(((a,x)=>E.set(a,new rV(x,o.get(a)??null)))),E)))}recalculateAndSaveOverlays(t,i){const f=uc();let y=new zi(((o,E)=>o-E)),C=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((o=>{for(const E of o)E.keys().forEach((e=>{const a=i.get(e);if(a===null)return;let x=f.get(e)||gr.empty();x=E.applyToLocalView(a,x),f.set(e,x);const u=(y.get(E.batchId)||Je()).add(e);y=y.insert(E.batchId,u)}))})).next((()=>{const o=[],E=y.getReverseIterator();for(;E.hasNext();){const e=E.getNext(),a=e.key,x=e.value,u=jw();x.forEach((r=>{if(!C.has(r)){const h=eM(i.get(r),f.get(r));h!==null&&u.set(r,h),C=C.add(r)}})),o.push(this.documentOverlayCache.saveOverlays(t,a,u))}return Ht.waitFor(o)})).next((()=>f))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((f=>this.recalculateAndSaveOverlays(t,f)))}getDocumentsMatchingQuery(t,i,f,y){return o7(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):Xw(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,f,y):this.getDocumentsMatchingCollectionQuery(t,i,f,y)}getNextDocuments(t,i,f,y){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,f,y).next((C=>{const o=y-C.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,f.largestBatchId,y-C.size):Ht.resolve(Ml());let E=wc,e=C;return o.next((a=>Ht.forEach(a,((x,u)=>(E<u.largestBatchId&&(E=u.largestBatchId),C.get(x)?Ht.resolve():this.remoteDocumentCache.getEntry(t,x).next((r=>{e=e.insert(x,r)}))))).next((()=>this.populateOverlays(t,a,C))).next((()=>this.computeViews(t,e,a,Je()))).next((x=>({batchId:E,changes:Kw(x)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new Te(i)).next((f=>{let y=Jf();return f.isFoundDocument()&&(y=y.insert(f.key,f)),y}))}getDocumentsMatchingCollectionGroupQuery(t,i,f,y){const C=i.collectionGroup;let o=Jf();return this.indexManager.getCollectionParents(t,C).next((E=>Ht.forEach(E,(e=>{const a=(function(u,r){return new nf(r,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)})(i,e.child(C));return this.getDocumentsMatchingCollectionQuery(t,a,f,y).next((x=>{x.forEach(((u,r)=>{o=o.insert(u,r)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,i,f,y){let C;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,f.largestBatchId).next((o=>(C=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,f,C,y)))).next((o=>{C.forEach(((e,a)=>{const x=a.getKey();o.get(x)===null&&(o=o.insert(x,_n.newInvalidDocument(x)))}));let E=Jf();return o.forEach(((e,a)=>{const x=C.get(e);x!==void 0&&fc(x.mutation,a,gr.empty(),Ri.now()),Vv(i,a)&&(E=E.insert(e,a))})),E}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,i){return Ht.resolve(this.Nr.get(i))}saveBundleMetadata(t,i){return this.Nr.set(i.id,(function(y){return{id:y.id,version:y.version,createTime:jr(y.createTime)}})(i)),Ht.resolve()}getNamedQuery(t,i){return Ht.resolve(this.Br.get(i))}saveNamedQuery(t,i){return this.Br.set(i.name,(function(y){return{name:y.name,query:J7(y.bundledQuery),readTime:jr(y.readTime)}})(i)),Ht.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.overlays=new zi(Te.comparator),this.Lr=new Map}getOverlay(t,i){return Ht.resolve(this.overlays.get(i))}getOverlays(t,i){const f=Ml();return Ht.forEach(i,(y=>this.getOverlay(t,y).next((C=>{C!==null&&f.set(y,C)})))).next((()=>f))}saveOverlays(t,i,f){return f.forEach(((y,C)=>{this.bt(t,i,C)})),Ht.resolve()}removeOverlaysForBatchId(t,i,f){const y=this.Lr.get(f);return y!==void 0&&(y.forEach((C=>this.overlays=this.overlays.remove(C))),this.Lr.delete(f)),Ht.resolve()}getOverlaysForCollection(t,i,f){const y=Ml(),C=i.length+1,o=new Te(i.child("")),E=this.overlays.getIteratorFrom(o);for(;E.hasNext();){const e=E.getNext().value,a=e.getKey();if(!i.isPrefixOf(a.path))break;a.path.length===C&&e.largestBatchId>f&&y.set(e.getKey(),e)}return Ht.resolve(y)}getOverlaysForCollectionGroup(t,i,f,y){let C=new zi(((a,x)=>a-x));const o=this.overlays.getIterator();for(;o.hasNext();){const a=o.getNext().value;if(a.getKey().getCollectionGroup()===i&&a.largestBatchId>f){let x=C.get(a.largestBatchId);x===null&&(x=Ml(),C=C.insert(a.largestBatchId,x)),x.set(a.getKey(),a)}}const E=Ml(),e=C.getIterator();for(;e.hasNext()&&(e.getNext().value.forEach(((a,x)=>E.set(a,x))),!(E.size()>=y)););return Ht.resolve(E)}bt(t,i,f){const y=this.overlays.get(f.key);if(y!==null){const o=this.Lr.get(y.largestBatchId).delete(f.key);this.Lr.set(y.largestBatchId,o)}this.overlays=this.overlays.insert(f.key,new R7(i,f));let C=this.Lr.get(i);C===void 0&&(C=Je(),this.Lr.set(i,C)),this.Lr.set(i,C.add(f.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(t){return Ht.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Ht.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.kr=new pn(Sn.Kr),this.qr=new pn(Sn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,i){const f=new Sn(t,i);this.kr=this.kr.add(f),this.qr=this.qr.add(f)}$r(t,i){t.forEach((f=>this.addReference(f,i)))}removeReference(t,i){this.Wr(new Sn(t,i))}Qr(t,i){t.forEach((f=>this.removeReference(f,i)))}Gr(t){const i=new Te(new Ci([])),f=new Sn(i,t),y=new Sn(i,t+1),C=[];return this.qr.forEachInRange([f,y],(o=>{this.Wr(o),C.push(o.key)})),C}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const i=new Te(new Ci([])),f=new Sn(i,t),y=new Sn(i,t+1);let C=Je();return this.qr.forEachInRange([f,y],(o=>{C=C.add(o.key)})),C}containsKey(t){const i=new Sn(t,0),f=this.kr.firstAfterOrEqual(i);return f!==null&&t.isEqual(f.key)}}class Sn{constructor(t,i){this.key=t,this.Hr=i}static Kr(t,i){return Te.comparator(t.key,i.key)||Ze(t.Hr,i.Hr)}static Ur(t,i){return Ze(t.Hr,i.Hr)||Te.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.Yn=1,this.Jr=new pn(Sn.Kr)}checkEmpty(t){return Ht.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,f,y){const C=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new M7(C,i,f,y);this.mutationQueue.push(o);for(const E of y)this.Jr=this.Jr.add(new Sn(E.key,C)),this.indexManager.addToCollectionParentIndex(t,E.key.path.popLast());return Ht.resolve(o)}lookupMutationBatch(t,i){return Ht.resolve(this.Zr(i))}getNextMutationBatchAfterBatchId(t,i){const f=i+1,y=this.Xr(f),C=y<0?0:y;return Ht.resolve(this.mutationQueue.length>C?this.mutationQueue[C]:null)}getHighestUnacknowledgedBatchId(){return Ht.resolve(this.mutationQueue.length===0?ly:this.Yn-1)}getAllMutationBatches(t){return Ht.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const f=new Sn(i,0),y=new Sn(i,Number.POSITIVE_INFINITY),C=[];return this.Jr.forEachInRange([f,y],(o=>{const E=this.Zr(o.Hr);C.push(E)})),Ht.resolve(C)}getAllMutationBatchesAffectingDocumentKeys(t,i){let f=new pn(Ze);return i.forEach((y=>{const C=new Sn(y,0),o=new Sn(y,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([C,o],(E=>{f=f.add(E.Hr)}))})),Ht.resolve(this.Yr(f))}getAllMutationBatchesAffectingQuery(t,i){const f=i.path,y=f.length+1;let C=f;Te.isDocumentKey(C)||(C=C.child(""));const o=new Sn(new Te(C),0);let E=new pn(Ze);return this.Jr.forEachWhile((e=>{const a=e.key.path;return!!f.isPrefixOf(a)&&(a.length===y&&(E=E.add(e.Hr)),!0)}),o),Ht.resolve(this.Yr(E))}Yr(t){const i=[];return t.forEach((f=>{const y=this.Zr(f);y!==null&&i.push(y)})),i}removeMutationBatch(t,i){di(this.ei(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let f=this.Jr;return Ht.forEach(i.mutations,(y=>{const C=new Sn(y.key,i.batchId);return f=f.delete(C),this.referenceDelegate.markPotentiallyOrphaned(t,y.key)})).next((()=>{this.Jr=f}))}nr(t){}containsKey(t,i){const f=new Sn(i,0),y=this.Jr.firstAfterOrEqual(f);return Ht.resolve(i.isEqual(y&&y.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ht.resolve()}ei(t,i){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const i=this.Xr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(t){this.ti=t,this.docs=(function(){return new zi(Te.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const f=i.key,y=this.docs.get(f),C=y?y.size:0,o=this.ti(i);return this.docs=this.docs.insert(f,{document:i.mutableCopy(),size:o}),this.size+=o-C,this.indexManager.addToCollectionParentIndex(t,f.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const f=this.docs.get(i);return Ht.resolve(f?f.document.mutableCopy():_n.newInvalidDocument(i))}getEntries(t,i){let f=$a();return i.forEach((y=>{const C=this.docs.get(y);f=f.insert(y,C?C.document.mutableCopy():_n.newInvalidDocument(y))})),Ht.resolve(f)}getDocumentsMatchingQuery(t,i,f,y){let C=$a();const o=i.path,E=new Te(o.child("__id-9223372036854775808__")),e=this.docs.getIteratorFrom(E);for(;e.hasNext();){const{key:a,value:{document:x}}=e.getNext();if(!o.isPrefixOf(a.path))break;a.path.length>o.length+1||UU(BU(x),f)<=0||(y.has(x.key)||Vv(i,x))&&(C=C.insert(x.key,x.mutableCopy()))}return Ht.resolve(C)}getAllFromCollectionGroup(t,i,f,y){Re(9500)}ni(t,i){return Ht.forEach(this.docs,(f=>i(f)))}newChangeBuffer(t){return new cV(this)}getSize(t){return Ht.resolve(this.size)}}class cV extends sV{constructor(t){super(),this.Mr=t}applyChanges(t){const i=[];return this.changes.forEach(((f,y)=>{y.isValidDocument()?i.push(this.Mr.addEntry(t,y)):this.Mr.removeEntry(f)})),Ht.waitFor(i)}getFromCache(t,i){return this.Mr.getEntry(t,i)}getAllFromCache(t,i){return this.Mr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(t){this.persistence=t,this.ri=new oh((i=>fy(i)),cy),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.ii=0,this.si=new gy,this.targetCount=0,this.oi=Wu._r()}forEachTarget(t,i){return this.ri.forEach(((f,y)=>i(y))),Ht.resolve()}getLastRemoteSnapshotVersion(t){return Ht.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ht.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),Ht.resolve(this.highestTargetId)}setTargetsMetadata(t,i,f){return f&&(this.lastRemoteSnapshotVersion=f),i>this.ii&&(this.ii=i),Ht.resolve()}lr(t){this.ri.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.oi=new Wu(i),this.highestTargetId=i),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,i){return this.lr(i),this.targetCount+=1,Ht.resolve()}updateTargetData(t,i){return this.lr(i),Ht.resolve()}removeTargetData(t,i){return this.ri.delete(i.target),this.si.Gr(i.targetId),this.targetCount-=1,Ht.resolve()}removeTargets(t,i,f){let y=0;const C=[];return this.ri.forEach(((o,E)=>{E.sequenceNumber<=i&&f.get(E.targetId)===null&&(this.ri.delete(o),C.push(this.removeMatchingKeysForTargetId(t,E.targetId)),y++)})),Ht.waitFor(C).next((()=>y))}getTargetCount(t){return Ht.resolve(this.targetCount)}getTargetData(t,i){const f=this.ri.get(i)||null;return Ht.resolve(f)}addMatchingKeys(t,i,f){return this.si.$r(i,f),Ht.resolve()}removeMatchingKeys(t,i,f){this.si.Qr(i,f);const y=this.persistence.referenceDelegate,C=[];return y&&i.forEach((o=>{C.push(y.markPotentiallyOrphaned(t,o))})),Ht.waitFor(C)}removeMatchingKeysForTargetId(t,i){return this.si.Gr(i),Ht.resolve()}getMatchingKeysForTargetId(t,i){const f=this.si.jr(i);return Ht.resolve(f)}containsKey(t,i){return Ht.resolve(this.si.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(t,i){this._i={},this.overlays={},this.ai=new Dv(0),this.ui=!1,this.ui=!0,this.ci=new hV,this.referenceDelegate=t(this),this.li=new dV(this),this.indexManager=new Q7,this.remoteDocumentCache=(function(y){return new fV(y)})((f=>this.referenceDelegate.hi(f))),this.serializer=new Z7(i),this.Pi=new oV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new lV,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let f=this._i[t.toKey()];return f||(f=new uV(i,this.referenceDelegate),this._i[t.toKey()]=f),f}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,i,f){le("MemoryPersistence","Starting transaction:",t);const y=new pV(this.ai.next());return this.referenceDelegate.Ti(),f(y).next((C=>this.referenceDelegate.Ii(y).next((()=>C)))).toPromise().then((C=>(y.raiseOnCommittedEvent(),C)))}Ei(t,i){return Ht.or(Object.values(this._i).map((f=>()=>f.containsKey(t,i))))}}class pV extends zU{constructor(t){super(),this.currentSequenceNumber=t}}class xy{constructor(t){this.persistence=t,this.Ri=new gy,this.Ai=null}static Vi(t){return new xy(t)}get di(){if(this.Ai)return this.Ai;throw Re(60996)}addReference(t,i,f){return this.Ri.addReference(f,i),this.di.delete(f.toString()),Ht.resolve()}removeReference(t,i,f){return this.Ri.removeReference(f,i),this.di.add(f.toString()),Ht.resolve()}markPotentiallyOrphaned(t,i){return this.di.add(i.toString()),Ht.resolve()}removeTarget(t,i){this.Ri.Gr(i.targetId).forEach((y=>this.di.add(y.toString())));const f=this.persistence.getTargetCache();return f.getMatchingKeysForTargetId(t,i.targetId).next((y=>{y.forEach((C=>this.di.add(C.toString())))})).next((()=>f.removeTargetData(t,i)))}Ti(){this.Ai=new Set}Ii(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ht.forEach(this.di,(f=>{const y=Te.fromPath(f);return this.mi(t,y).next((C=>{C||i.removeEntry(y,be.min())}))})).next((()=>(this.Ai=null,i.apply(t))))}updateLimboDocument(t,i){return this.mi(t,i).next((f=>{f?this.di.delete(i.toString()):this.di.add(i.toString())}))}hi(t){return 0}mi(t,i){return Ht.or([()=>Ht.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ei(t,i)])}}class iv{constructor(t,i){this.persistence=t,this.fi=new oh((f=>HU(f.path)),((f,y)=>f.isEqual(y))),this.garbageCollector=nV(this,i)}static Vi(t,i){return new iv(t,i)}Ti(){}Ii(t){return Ht.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}dr(t){const i=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((f=>i.next((y=>f+y))))}pr(t){let i=0;return this.mr(t,(f=>{i++})).next((()=>i))}mr(t,i){return Ht.forEach(this.fi,((f,y)=>this.wr(t,f,y).next((C=>C?Ht.resolve():i(y)))))}removeTargets(t,i,f){return this.persistence.getTargetCache().removeTargets(t,i,f)}removeOrphanedDocuments(t,i){let f=0;const y=this.persistence.getRemoteDocumentCache(),C=y.newChangeBuffer();return y.ni(t,(o=>this.wr(t,o,i).next((E=>{E||(f++,C.removeEntry(o,be.min()))})))).next((()=>C.apply(t))).next((()=>f))}markPotentiallyOrphaned(t,i){return this.fi.set(i,t.currentSequenceNumber),Ht.resolve()}removeTarget(t,i){const f=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,f)}addReference(t,i,f){return this.fi.set(f,t.currentSequenceNumber),Ht.resolve()}removeReference(t,i,f){return this.fi.set(f,t.currentSequenceNumber),Ht.resolve()}updateLimboDocument(t,i){return this.fi.set(i,t.currentSequenceNumber),Ht.resolve()}hi(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Sp(t.data.value)),i}wr(t,i,f){return Ht.or([()=>this.persistence.Ei(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const y=this.fi.get(i);return Ht.resolve(y!==void 0&&y>f)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(t,i,f,y){this.targetId=t,this.fromCache=i,this.Ts=f,this.Is=y}static Es(t,i){let f=Je(),y=Je();for(const C of i.docChanges)switch(C.type){case 0:f=f.add(C.doc.key);break;case 1:y=y.add(C.doc.key)}return new yy(t,i.fromCache,f,y)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return eB()?8:GU($n())>0?6:4})()}initialize(t,i){this.fs=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,f,y){const C={result:null};return this.gs(t,i).next((o=>{C.result=o})).next((()=>{if(!C.result)return this.ps(t,i,y,f).next((o=>{C.result=o}))})).next((()=>{if(C.result)return;const o=new vV;return this.ys(t,i,o).next((E=>{if(C.result=E,this.As)return this.ws(t,i,o,E.size)}))})).next((()=>C.result))}ws(t,i,f,y){return f.documentReadCount<this.Vs?(_h()<=je.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Xh(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ht.resolve()):(_h()<=je.DEBUG&&le("QueryEngine","Query:",Xh(i),"scans",f.documentReadCount,"local documents and returns",y,"documents as results."),f.documentReadCount>this.ds*y?(_h()<=je.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Xh(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Kr(i))):Ht.resolve())}gs(t,i){if(rS(i))return Ht.resolve(null);let f=Kr(i);return this.indexManager.getIndexType(t,f).next((y=>y===0?null:(i.limit!==null&&y===1&&(i=qp(i,null,"F"),f=Kr(i)),this.indexManager.getDocumentsMatchingTarget(t,f).next((C=>{const o=Je(...C);return this.fs.getDocuments(t,o).next((E=>this.indexManager.getMinOffset(t,f).next((e=>{const a=this.bs(i,E);return this.Ss(i,a,o,e.readTime)?this.gs(t,qp(i,null,"F")):this.Ds(t,a,i,e)}))))})))))}ps(t,i,f,y){return rS(i)||y.isEqual(be.min())?Ht.resolve(null):this.fs.getDocuments(t,f).next((C=>{const o=this.bs(i,C);return this.Ss(i,o,f,y)?Ht.resolve(null):(_h()<=je.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",y.toString(),Xh(i)),this.Ds(t,o,i,NU(y,wc)).next((E=>E)))}))}bs(t,i){let f=new pn(kw(t));return i.forEach(((y,C)=>{Vv(t,C)&&(f=f.add(C))})),f}Ss(t,i,f,y){if(t.limit===null)return!1;if(f.size!==i.size)return!0;const C=t.limitType==="F"?i.last():i.first();return!!C&&(C.hasPendingWrites||C.version.compareTo(y)>0)}ys(t,i,f){return _h()<=je.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Xh(i)),this.fs.getDocumentsMatchingQuery(t,i,Xo.min(),f)}Ds(t,i,f,y){return this.fs.getDocumentsMatchingQuery(t,f,y).next((C=>(i.forEach((o=>{C=C.insert(o.key,o)})),C)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="LocalStore",gV=3e8;class xV{constructor(t,i,f,y){this.persistence=t,this.Cs=i,this.serializer=y,this.vs=new zi(Ze),this.Fs=new oh((C=>fy(C)),cy),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(f)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new aV(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.vs)))}}function yV(v,t,i,f){return new xV(v,t,i,f)}async function xM(v,t){const i=Le(v);return await i.persistence.runTransaction("Handle user change","readonly",(f=>{let y;return i.mutationQueue.getAllMutationBatches(f).next((C=>(y=C,i.Os(t),i.mutationQueue.getAllMutationBatches(f)))).next((C=>{const o=[],E=[];let e=Je();for(const a of y){o.push(a.batchId);for(const x of a.mutations)e=e.add(x.key)}for(const a of C){E.push(a.batchId);for(const x of a.mutations)e=e.add(x.key)}return i.localDocuments.getDocuments(f,e).next((a=>({Ns:a,removedBatchIds:o,addedBatchIds:E})))}))}))}function TV(v,t){const i=Le(v);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(f=>{const y=t.batch.keys(),C=i.xs.newChangeBuffer({trackRemovals:!0});return(function(E,e,a,x){const u=a.batch,r=u.keys();let h=Ht.resolve();return r.forEach((n=>{h=h.next((()=>x.getEntry(e,n))).next((l=>{const c=a.docVersions.get(n);di(c!==null,48541),l.version.compareTo(c)<0&&(u.applyToRemoteDocument(l,a),l.isValidDocument()&&(l.setReadTime(a.commitVersion),x.addEntry(l)))}))})),h.next((()=>E.mutationQueue.removeMutationBatch(e,u)))})(i,f,t,C).next((()=>C.apply(f))).next((()=>i.mutationQueue.performConsistencyCheck(f))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(f,y,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,(function(E){let e=Je();for(let a=0;a<E.mutationResults.length;++a)E.mutationResults[a].transformResults.length>0&&(e=e.add(E.batch.mutations[a].key));return e})(t)))).next((()=>i.localDocuments.getDocuments(f,y)))}))}function yM(v){const t=Le(v);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.li.getLastRemoteSnapshotVersion(i)))}function EV(v,t){const i=Le(v),f=t.snapshotVersion;let y=i.vs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(C=>{const o=i.xs.newChangeBuffer({trackRemovals:!0});y=i.vs;const E=[];t.targetChanges.forEach(((x,u)=>{const r=y.get(u);if(!r)return;E.push(i.li.removeMatchingKeys(C,x.removedDocuments,u).next((()=>i.li.addMatchingKeys(C,x.addedDocuments,u))));let h=r.withSequenceNumber(C.currentSequenceNumber);t.targetMismatches.get(u)!==null?h=h.withResumeToken(Bn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):x.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(x.resumeToken,f)),y=y.insert(u,h),(function(l,c,s){return l.resumeToken.approximateByteSize()===0||c.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=gV?!0:s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0})(r,h,x)&&E.push(i.li.updateTargetData(C,h))}));let e=$a(),a=Je();if(t.documentUpdates.forEach((x=>{t.resolvedLimboDocuments.has(x)&&E.push(i.persistence.referenceDelegate.updateLimboDocument(C,x))})),E.push(SV(C,o,t.documentUpdates).next((x=>{e=x.Bs,a=x.Ls}))),!f.isEqual(be.min())){const x=i.li.getLastRemoteSnapshotVersion(C).next((u=>i.li.setTargetsMetadata(C,C.currentSequenceNumber,f)));E.push(x)}return Ht.waitFor(E).next((()=>o.apply(C))).next((()=>i.localDocuments.getLocalViewOfDocuments(C,e,a))).next((()=>e))})).then((C=>(i.vs=y,C)))}function SV(v,t,i){let f=Je(),y=Je();return i.forEach((C=>f=f.add(C))),t.getEntries(v,f).next((C=>{let o=$a();return i.forEach(((E,e)=>{const a=C.get(E);e.isFoundDocument()!==a.isFoundDocument()&&(y=y.add(E)),e.isNoDocument()&&e.version.isEqual(be.min())?(t.removeEntry(E,e.readTime),o=o.insert(E,e)):!a.isValidDocument()||e.version.compareTo(a.version)>0||e.version.compareTo(a.version)===0&&a.hasPendingWrites?(t.addEntry(e),o=o.insert(E,e)):le(Ty,"Ignoring outdated watch update for ",E,". Current version:",a.version," Watch version:",e.version)})),{Bs:o,Ls:y}}))}function CV(v,t){const i=Le(v);return i.persistence.runTransaction("Get next mutation batch","readonly",(f=>(t===void 0&&(t=ly),i.mutationQueue.getNextMutationBatchAfterBatchId(f,t))))}function AV(v,t){const i=Le(v);return i.persistence.runTransaction("Allocate target","readwrite",(f=>{let y;return i.li.getTargetData(f,t).next((C=>C?(y=C,Ht.resolve(y)):i.li.allocateTargetId(f).next((o=>(y=new wo(t,o,"TargetPurposeListen",f.currentSequenceNumber),i.li.addTargetData(f,y).next((()=>y)))))))})).then((f=>{const y=i.vs.get(f.targetId);return(y===null||f.snapshotVersion.compareTo(y.snapshotVersion)>0)&&(i.vs=i.vs.insert(f.targetId,f),i.Fs.set(t,f.targetId)),f}))}async function sx(v,t,i){const f=Le(v),y=f.vs.get(t),C=i?"readwrite":"readwrite-primary";try{i||await f.persistence.runTransaction("Release target",C,(o=>f.persistence.referenceDelegate.removeTarget(o,y)))}catch(o){if(!ef(o))throw o;le(Ty,`Failed to update sequence numbers for target ${t}: ${o}`)}f.vs=f.vs.remove(t),f.Fs.delete(y.target)}function xS(v,t,i){const f=Le(v);let y=be.min(),C=Je();return f.persistence.runTransaction("Execute query","readwrite",(o=>(function(e,a,x){const u=Le(e),r=u.Fs.get(x);return r!==void 0?Ht.resolve(u.vs.get(r)):u.li.getTargetData(a,x)})(f,o,Kr(t)).next((E=>{if(E)return y=E.lastLimboFreeSnapshotVersion,f.li.getMatchingKeysForTargetId(o,E.targetId).next((e=>{C=e}))})).next((()=>f.Cs.getDocumentsMatchingQuery(o,t,i?y:be.min(),i?C:Je()))).next((E=>(wV(f,u7(t),E),{documents:E,ks:C})))))}function wV(v,t,i){let f=v.Ms.get(t)||be.min();i.forEach(((y,C)=>{C.readTime.compareTo(f)>0&&(f=C.readTime)})),v.Ms.set(t,f)}class yS{constructor(){this.activeTargetIds=m7()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class MV{constructor(){this.vo=new yS,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,f){}addLocalQueryTarget(t,i=!0){return i&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,i,f){this.Fo[t]=i}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new yS,Promise.resolve()}handleUserChange(t,i,f){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="ConnectivityMonitor";class ES{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){le(TS,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){le(TS,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ap=null;function rx(){return ap===null?ap=(function(){return 268435456+Math.round(2147483648*Math.random())})():ap++,"0x"+ap.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="RestConnection",PV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class bV{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",f=encodeURIComponent(this.databaseId.projectId),y=encodeURIComponent(this.databaseId.database);this.qo=i+"://"+t.host,this.Uo=`projects/${f}/databases/${y}`,this.$o=this.databaseId.database===Zp?`project_id=${f}`:`project_id=${f}&database_id=${y}`}Wo(t,i,f,y,C){const o=rx(),E=this.Qo(t,i.toUriEncodedString());le(h0,`Sending RPC '${t}' ${o}:`,E,f);const e={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(e,y,C);const{host:a}=new URL(E),x=Ju(a);return this.zo(t,E,e,f,x).then((u=>(le(h0,`Received RPC '${t}' ${o}: `,u),u)),(u=>{throw Uu(h0,`RPC '${t}' ${o} failed with error: `,u,"url: ",E,"request:",f),u}))}jo(t,i,f,y,C,o){return this.Wo(t,i,f,y,C)}Go(t,i,f){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qu})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((y,C)=>t[C]=y)),f&&f.headers.forEach(((y,C)=>t[C]=y))}Qo(t,i){const f=PV[t];let y=`${this.qo}/v1/${i}:${f}`;return this.databaseInfo.apiKey&&(y=`${y}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),y}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="WebChannelConnection",zf=(v,t,i)=>{v.listen(t,(f=>{try{i(f)}catch(y){setTimeout((()=>{throw y}),0)}}))};class ru extends bV{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!ru.c_){const t=Cw();zf(t,Sw.STAT_EVENT,(i=>{i.stat===$g.PROXY?le(Hn,"STAT_EVENT: detected buffering proxy"):i.stat===$g.NOPROXY&&le(Hn,"STAT_EVENT: detected no buffering proxy")})),ru.c_=!0}}zo(t,i,f,y,C){const o=rx();return new Promise(((E,e)=>{const a=new Tw;a.setWithCredentials(!0),a.listenOnce(Ew.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ep.NO_ERROR:const u=a.getResponseJson();le(Hn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(u)),E(u);break;case Ep.TIMEOUT:le(Hn,`RPC '${t}' ${o} timed out`),e(new re(Vt.DEADLINE_EXCEEDED,"Request time out"));break;case Ep.HTTP_ERROR:const r=a.getStatus();if(le(Hn,`RPC '${t}' ${o} failed with status:`,r,"response text:",a.getResponseText()),r>0){let h=a.getResponseJson();Array.isArray(h)&&(h=h[0]);const n=h==null?void 0:h.error;if(n&&n.status&&n.message){const l=(function(s){const d=s.toLowerCase().replace(/_/g,"-");return Object.values(Vt).indexOf(d)>=0?d:Vt.UNKNOWN})(n.status);e(new re(l,n.message))}else e(new re(Vt.UNKNOWN,"Server responded with status "+a.getStatus()))}else e(new re(Vt.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:t,streamId:o,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{le(Hn,`RPC '${t}' ${o} completed.`)}}));const x=JSON.stringify(y);le(Hn,`RPC '${t}' ${o} sending request:`,y),a.send(i,"POST",x,f,15)}))}T_(t,i,f){const y=rx(),C=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=this.createWebChannelTransport(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},e=this.longPollingOptions.timeoutSeconds;e!==void 0&&(E.longPollingTimeout=Math.round(1e3*e)),this.useFetchStreams&&(E.useFetchStreams=!0),this.Go(E.initMessageHeaders,i,f),E.encodeInitMessageHeaders=!0;const a=C.join("");le(Hn,`Creating RPC '${t}' stream ${y}: ${a}`,E);const x=o.createWebChannel(a,E);this.I_(x);let u=!1,r=!1;const h=new IV({Ho:n=>{r?le(Hn,`Not sending because RPC '${t}' stream ${y} is closed:`,n):(u||(le(Hn,`Opening RPC '${t}' stream ${y} transport.`),x.open(),u=!0),le(Hn,`RPC '${t}' stream ${y} sending:`,n),x.send(n))},Jo:()=>x.close()});return zf(x,Zf.EventType.OPEN,(()=>{r||(le(Hn,`RPC '${t}' stream ${y} transport opened.`),h.i_())})),zf(x,Zf.EventType.CLOSE,(()=>{r||(r=!0,le(Hn,`RPC '${t}' stream ${y} transport closed`),h.o_(),this.E_(x))})),zf(x,Zf.EventType.ERROR,(n=>{r||(r=!0,Uu(Hn,`RPC '${t}' stream ${y} transport errored. Name:`,n.name,"Message:",n.message),h.o_(new re(Vt.UNAVAILABLE,"The operation could not be completed")))})),zf(x,Zf.EventType.MESSAGE,(n=>{var l;if(!r){const c=n.data[0];di(!!c,16349);const s=c,d=(s==null?void 0:s.error)||((l=s[0])==null?void 0:l.error);if(d){le(Hn,`RPC '${t}' stream ${y} received error:`,d);const m=d.status;let p=(function(S){const w=tn[S];if(w!==void 0)return sM(w)})(m),g=d.message;m==="NOT_FOUND"&&g.includes("database")&&g.includes("does not exist")&&g.includes(this.databaseId.database)&&Uu(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),p===void 0&&(p=Vt.INTERNAL,g="Unknown error status: "+m+" with message "+d.message),r=!0,h.o_(new re(p,g)),x.close()}else le(Hn,`RPC '${t}' stream ${y} received:`,c),h.__(c)}})),ru.u_(),setTimeout((()=>{h.s_()}),0),h}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((i=>i===t))}Go(t,i,f){super.Go(t,i,f),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Aw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(v){return new ru(v)}function u0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(v){return new B7(v,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ru.c_=!1;class TM{constructor(t,i,f=1e3,y=1.5,C=6e4){this.Ci=t,this.timerId=i,this.R_=f,this.A_=y,this.V_=C,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const i=Math.floor(this.d_+this.y_()),f=Math.max(0,Date.now()-this.f_),y=Math.max(0,i-f);y>0&&le("ExponentialBackoff",`Backing off for ${y} ms (base delay: ${this.d_} ms, delay with jitter: ${i} ms, last attempt: ${f} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,y,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="PersistentStream";class EM{constructor(t,i,f,y,C,o,E,e){this.Ci=t,this.b_=f,this.S_=y,this.connection=C,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=E,this.listener=e,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TM(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Vt.RESOURCE_EXHAUSTED?(ka(i.toString()),ka("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Vt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(i)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([f,y])=>{this.D_===i&&this.G_(f,y)}),(f=>{t((()=>{const y=new re(Vt.UNKNOWN,"Fetching auth token failed: "+f.message);return this.z_(y)}))}))}G_(t,i){const f=this.Q_(this.D_);this.stream=this.j_(t,i),this.stream.Zo((()=>{f((()=>this.listener.Zo()))})),this.stream.Yo((()=>{f((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((y=>{f((()=>this.z_(y)))})),this.stream.onMessage((y=>{f((()=>++this.F_==1?this.H_(y):this.onNext(y)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return le(SS,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return i=>{this.Ci.enqueueAndForget((()=>this.D_===t?i():(le(SS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FV extends EM{constructor(t,i,f,y,C,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,f,y,o),this.serializer=C}j_(t,i){return this.connection.T_("Listen",t,i)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=z7(this.serializer,t),f=(function(C){if(!("targetChange"in C))return be.min();const o=C.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?jr(o.readTime):be.min()})(t);return this.listener.J_(i,f)}Z_(t){const i={};i.database=nx(this.serializer),i.addTarget=(function(C,o){let E;const e=o.target;if(E=Qg(e)?{documents:H7(C,e)}:{query:_7(C,e).ft},E.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){E.resumeToken=oM(C,o.resumeToken);const a=tx(C,o.expectedCount);a!==null&&(E.expectedCount=a)}else if(o.snapshotVersion.compareTo(be.min())>0){E.readTime=ev(C,o.snapshotVersion.toTimestamp());const a=tx(C,o.expectedCount);a!==null&&(E.expectedCount=a)}return E})(this.serializer,t);const f=Y7(this.serializer,t);f&&(i.labels=f),this.K_(i)}X_(t){const i={};i.database=nx(this.serializer),i.removeTarget=t,this.K_(i)}}class DV extends EM{constructor(t,i,f,y,C,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,f,y,o),this.serializer=C}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}H_(t){return di(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,di(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){di(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=W7(t.writeResults,t.commitTime),f=jr(t.commitTime);return this.listener.na(f,i)}ra(){const t={};t.database=nx(this.serializer),this.K_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((f=>G7(this.serializer,f)))};this.K_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{}class NV extends OV{constructor(t,i,f,y){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=f,this.serializer=y,this.ia=!1}sa(){if(this.ia)throw new re(Vt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,i,f,y){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([C,o])=>this.connection.Wo(t,ex(i,f),y,C,o))).catch((C=>{throw C.name==="FirebaseError"?(C.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),C):new re(Vt.UNKNOWN,C.toString())}))}jo(t,i,f,y,C){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,E])=>this.connection.jo(t,ex(i,f),y,o,E,C))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(Vt.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function BV(v,t,i,f){return new NV(v,t,i,f)}class UV{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ka(i),this.aa=!1):le("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="RemoteStore";class VV{constructor(t,i,f,y,C){this.localStore=t,this.datastore=i,this.asyncQueue=f,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=C,this.Aa.Mo((o=>{f.enqueueAndForget((async()=>{hh(this)&&(le(jl,"Restarting streams for network reachability change."),await(async function(e){const a=Le(e);a.Ea.add(4),await ed(a),a.Va.set("Unknown"),a.Ea.delete(4),await _v(a)})(this))}))})),this.Va=new UV(f,y)}}async function _v(v){if(hh(v))for(const t of v.Ra)await t(!0)}async function ed(v){for(const t of v.Ra)await t(!1)}function SM(v,t){const i=Le(v);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),Ay(i)?Cy(i):sf(i).O_()&&Sy(i,t))}function Ey(v,t){const i=Le(v),f=sf(i);i.Ia.delete(t),f.O_()&&CM(i,t),i.Ia.size===0&&(f.O_()?f.L_():hh(i)&&i.Va.set("Unknown"))}function Sy(v,t){if(v.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(be.min())>0){const i=v.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}sf(v).Z_(t)}function CM(v,t){v.da.$e(t),sf(v).X_(t)}function Cy(v){v.da=new F7({getRemoteKeysForTarget:t=>v.remoteSyncer.getRemoteKeysForTarget(t),At:t=>v.Ia.get(t)||null,ht:()=>v.datastore.serializer.databaseId}),sf(v).start(),v.Va.ua()}function Ay(v){return hh(v)&&!sf(v).x_()&&v.Ia.size>0}function hh(v){return Le(v).Ea.size===0}function AM(v){v.da=void 0}async function zV(v){v.Va.set("Online")}async function GV(v){v.Ia.forEach(((t,i)=>{Sy(v,t)}))}async function WV(v,t){AM(v),Ay(v)?(v.Va.ha(t),Cy(v)):v.Va.set("Unknown")}async function HV(v,t,i){if(v.Va.set("Online"),t instanceof aM&&t.state===2&&t.cause)try{await(async function(y,C){const o=C.cause;for(const E of C.targetIds)y.Ia.has(E)&&(await y.remoteSyncer.rejectListen(E,o),y.Ia.delete(E),y.da.removeTarget(E))})(v,t)}catch(f){le(jl,"Failed to remove targets %s: %s ",t.targetIds.join(","),f),await nv(v,f)}else if(t instanceof wp?v.da.Xe(t):t instanceof rM?v.da.st(t):v.da.tt(t),!i.isEqual(be.min()))try{const f=await yM(v.localStore);i.compareTo(f)>=0&&await(function(C,o){const E=C.da.Tt(o);return E.targetChanges.forEach(((e,a)=>{if(e.resumeToken.approximateByteSize()>0){const x=C.Ia.get(a);x&&C.Ia.set(a,x.withResumeToken(e.resumeToken,o))}})),E.targetMismatches.forEach(((e,a)=>{const x=C.Ia.get(e);if(!x)return;C.Ia.set(e,x.withResumeToken(Bn.EMPTY_BYTE_STRING,x.snapshotVersion)),CM(C,e);const u=new wo(x.target,e,a,x.sequenceNumber);Sy(C,u)})),C.remoteSyncer.applyRemoteEvent(E)})(v,i)}catch(f){le(jl,"Failed to raise snapshot:",f),await nv(v,f)}}async function nv(v,t,i){if(!ef(t))throw t;v.Ea.add(1),await ed(v),v.Va.set("Offline"),i||(i=()=>yM(v.localStore)),v.asyncQueue.enqueueRetryable((async()=>{le(jl,"Retrying IndexedDB access"),await i(),v.Ea.delete(1),await _v(v)}))}function wM(v,t){return t().catch((i=>nv(v,i,t)))}async function Xv(v){const t=Le(v),i=Ko(t);let f=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ly;for(;_V(t);)try{const y=await CV(t.localStore,f);if(y===null){t.Ta.length===0&&i.L_();break}f=y.batchId,XV(t,y)}catch(y){await nv(t,y)}MM(t)&&RM(t)}function _V(v){return hh(v)&&v.Ta.length<10}function XV(v,t){v.Ta.push(t);const i=Ko(v);i.O_()&&i.Y_&&i.ea(t.mutations)}function MM(v){return hh(v)&&!Ko(v).x_()&&v.Ta.length>0}function RM(v){Ko(v).start()}async function YV(v){Ko(v).ra()}async function kV(v){const t=Ko(v);for(const i of v.Ta)t.ea(i.mutations)}async function $V(v,t,i){const f=v.Ta.shift(),y=py.from(f,t,i);await wM(v,(()=>v.remoteSyncer.applySuccessfulWrite(y))),await Xv(v)}async function KV(v,t){t&&Ko(v).Y_&&await(async function(f,y){if((function(o){return b7(o)&&o!==Vt.ABORTED})(y.code)){const C=f.Ta.shift();Ko(f).B_(),await wM(f,(()=>f.remoteSyncer.rejectFailedWrite(C.batchId,y))),await Xv(f)}})(v,t),MM(v)&&RM(v)}async function CS(v,t){const i=Le(v);i.asyncQueue.verifyOperationInProgress(),le(jl,"RemoteStore received new credentials");const f=hh(i);i.Ea.add(3),await ed(i),f&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await _v(i)}async function jV(v,t){const i=Le(v);t?(i.Ea.delete(2),await _v(i)):t||(i.Ea.add(2),await ed(i),i.Va.set("Unknown"))}function sf(v){return v.ma||(v.ma=(function(i,f,y){const C=Le(i);return C.sa(),new FV(f,C.connection,C.authCredentials,C.appCheckCredentials,C.serializer,y)})(v.datastore,v.asyncQueue,{Zo:zV.bind(null,v),Yo:GV.bind(null,v),t_:WV.bind(null,v),J_:HV.bind(null,v)}),v.Ra.push((async t=>{t?(v.ma.B_(),Ay(v)?Cy(v):v.Va.set("Unknown")):(await v.ma.stop(),AM(v))}))),v.ma}function Ko(v){return v.fa||(v.fa=(function(i,f,y){const C=Le(i);return C.sa(),new DV(f,C.connection,C.authCredentials,C.appCheckCredentials,C.serializer,y)})(v.datastore,v.asyncQueue,{Zo:()=>Promise.resolve(),Yo:YV.bind(null,v),t_:KV.bind(null,v),ta:kV.bind(null,v),na:$V.bind(null,v)}),v.Ra.push((async t=>{t?(v.fa.B_(),await Xv(v)):(await v.fa.stop(),v.Ta.length>0&&(le(jl,`Stopping write stream with ${v.Ta.length} pending writes`),v.Ta=[]))}))),v.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t,i,f,y,C){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=f,this.op=y,this.removalCallback=C,this.deferred=new Ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,f,y,C){const o=Date.now()+f,E=new wy(t,i,o,y,C);return E.start(f),E}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(Vt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function My(v,t){if(ka("AsyncQueue",`${t}: ${v}`),ef(v))return new re(Vt.UNAVAILABLE,`${t}: ${v}`);throw v}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{static emptySet(t){return new au(t.comparator)}constructor(t){this.comparator=t?(i,f)=>t(i,f)||Te.comparator(i.key,f.key):(i,f)=>Te.comparator(i.key,f.key),this.keyedMap=Jf(),this.sortedSet=new zi(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,f)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof au)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),f=t.sortedSet.getIterator();for(;i.hasNext();){const y=i.getNext().key,C=f.getNext().key;if(!y.isEqual(C))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const f=new au;return f.comparator=this.comparator,f.keyedMap=t,f.sortedSet=i,f}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.ga=new zi(Te.comparator)}track(t){const i=t.doc.key,f=this.ga.get(i);f?t.type!==0&&f.type===3?this.ga=this.ga.insert(i,t):t.type===3&&f.type!==1?this.ga=this.ga.insert(i,{type:f.type,doc:t.doc}):t.type===2&&f.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&f.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&f.type===0?this.ga=this.ga.remove(i):t.type===1&&f.type===2?this.ga=this.ga.insert(i,{type:1,doc:f.doc}):t.type===0&&f.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):Re(63341,{Vt:t,pa:f}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,f)=>{t.push(f)})),t}}class Hu{constructor(t,i,f,y,C,o,E,e,a){this.query=t,this.docs=i,this.oldDocs=f,this.docChanges=y,this.mutatedKeys=C,this.fromCache=o,this.syncStateChanged=E,this.excludesMetadataChanges=e,this.hasCachedResults=a}static fromInitialDocuments(t,i,f,y,C){const o=[];return i.forEach((E=>{o.push({type:0,doc:E})})),new Hu(t,i,au.emptySet(i),o,f,y,!0,!1,C)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Uv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,f=t.docChanges;if(i.length!==f.length)return!1;for(let y=0;y<i.length;y++)if(i[y].type!==f[y].type||!i[y].doc.isEqual(f[y].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class JV{constructor(){this.queries=wS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,f){const y=Le(i),C=y.queries;y.queries=wS(),C.forEach(((o,E)=>{for(const e of E.ba)e.onError(f)}))})(this,new re(Vt.ABORTED,"Firestore shutting down"))}}function wS(){return new oh((v=>Yw(v)),Uv)}async function Ry(v,t){const i=Le(v);let f=3;const y=t.query;let C=i.queries.get(y);C?!C.Sa()&&t.Da()&&(f=2):(C=new ZV,f=t.Da()?0:1);try{switch(f){case 0:C.wa=await i.onListen(y,!0);break;case 1:C.wa=await i.onListen(y,!1);break;case 2:await i.onFirstRemoteStoreListen(y)}}catch(o){const E=My(o,`Initialization of query '${Xh(t.query)}' failed`);return void t.onError(E)}i.queries.set(y,C),C.ba.push(t),t.va(i.onlineState),C.wa&&t.Fa(C.wa)&&by(i)}async function Py(v,t){const i=Le(v),f=t.query;let y=3;const C=i.queries.get(f);if(C){const o=C.ba.indexOf(t);o>=0&&(C.ba.splice(o,1),C.ba.length===0?y=t.Da()?0:1:!C.Sa()&&t.Da()&&(y=2))}switch(y){case 0:return i.queries.delete(f),i.onUnlisten(f,!0);case 1:return i.queries.delete(f),i.onUnlisten(f,!1);case 2:return i.onLastRemoteStoreUnlisten(f);default:return}}function QV(v,t){const i=Le(v);let f=!1;for(const y of t){const C=y.query,o=i.queries.get(C);if(o){for(const E of o.ba)E.Fa(y)&&(f=!0);o.wa=y}}f&&by(i)}function qV(v,t,i){const f=Le(v),y=f.queries.get(t);if(y)for(const C of y.ba)C.onError(i);f.queries.delete(t)}function by(v){v.Ca.forEach((t=>{t.next()}))}var ax,MS;(MS=ax||(ax={})).Ma="default",MS.Cache="cache";class Iy{constructor(t,i,f){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=f||{}}Fa(t){if(!this.options.includeMetadataChanges){const f=[];for(const y of t.docChanges)y.type!==3&&f.push(y);t=new Hu(t.query,t.docs,t.oldDocs,f,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const f=i!=="Offline";return(!this.options.Ka||!f)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=Hu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ax.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(t){this.key=t}}class bM{constructor(t){this.key=t}}class tz{constructor(t,i){this.query=t,this.Za=i,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Je(),this.mutatedKeys=Je(),this.eu=kw(t),this.tu=new au(this.eu)}get nu(){return this.Za}ru(t,i){const f=i?i.iu:new AS,y=i?i.tu:this.tu;let C=i?i.mutatedKeys:this.mutatedKeys,o=y,E=!1;const e=this.query.limitType==="F"&&y.size===this.query.limit?y.last():null,a=this.query.limitType==="L"&&y.size===this.query.limit?y.first():null;if(t.inorderTraversal(((x,u)=>{const r=y.get(x),h=Vv(this.query,u)?u:null,n=!!r&&this.mutatedKeys.has(r.key),l=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let c=!1;r&&h?r.data.isEqual(h.data)?n!==l&&(f.track({type:3,doc:h}),c=!0):this.su(r,h)||(f.track({type:2,doc:h}),c=!0,(e&&this.eu(h,e)>0||a&&this.eu(h,a)<0)&&(E=!0)):!r&&h?(f.track({type:0,doc:h}),c=!0):r&&!h&&(f.track({type:1,doc:r}),c=!0,(e||a)&&(E=!0)),c&&(h?(o=o.add(h),C=l?C.add(x):C.delete(x)):(o=o.delete(x),C=C.delete(x)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const x=this.query.limitType==="F"?o.last():o.first();o=o.delete(x.key),C=C.delete(x.key),f.track({type:1,doc:x})}return{tu:o,iu:f,Ss:E,mutatedKeys:C}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,f,y){const C=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((x,u)=>(function(h,n){const l=c=>{switch(c){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Vt:c})}};return l(h)-l(n)})(x.type,u.type)||this.eu(x.doc,u.doc))),this.ou(f),y=y??!1;const E=i&&!y?this._u():[],e=this.Ya.size===0&&this.current&&!y?1:0,a=e!==this.Xa;return this.Xa=e,o.length!==0||a?{snapshot:new Hu(this.query,t.tu,C,o,t.mutatedKeys,e===0,a,!1,!!f&&f.resumeToken.approximateByteSize()>0),au:E}:{au:E}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Za=this.Za.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Za=this.Za.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Je(),this.tu.forEach((f=>{this.uu(f.key)&&(this.Ya=this.Ya.add(f.key))}));const i=[];return t.forEach((f=>{this.Ya.has(f)||i.push(new bM(f))})),this.Ya.forEach((f=>{t.has(f)||i.push(new PM(f))})),i}cu(t){this.Za=t.ks,this.Ya=Je();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return Hu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ly="SyncEngine";class ez{constructor(t,i,f){this.query=t,this.targetId=i,this.view=f}}class iz{constructor(t){this.key=t,this.hu=!1}}class nz{constructor(t,i,f,y,C,o){this.localStore=t,this.remoteStore=i,this.eventManager=f,this.sharedClientState=y,this.currentUser=C,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new oh((E=>Yw(E)),Uv),this.Iu=new Map,this.Eu=new Set,this.Ru=new zi(Te.comparator),this.Au=new Map,this.Vu=new gy,this.du={},this.mu=new Map,this.fu=Wu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sz(v,t,i=!0){const f=NM(v);let y;const C=f.Tu.get(t);return C?(f.sharedClientState.addLocalQueryTarget(C.targetId),y=C.view.lu()):y=await IM(f,t,i,!0),y}async function rz(v,t){const i=NM(v);await IM(i,t,!0,!1)}async function IM(v,t,i,f){const y=await AV(v.localStore,Kr(t)),C=y.targetId,o=v.sharedClientState.addLocalQueryTarget(C,i);let E;return f&&(E=await az(v,t,C,o==="current",y.resumeToken)),v.isPrimaryClient&&i&&SM(v.remoteStore,y),E}async function az(v,t,i,f,y){v.pu=(u,r,h)=>(async function(l,c,s,d){let m=c.view.ru(s);m.Ss&&(m=await xS(l.localStore,c.query,!1).then((({documents:S})=>c.view.ru(S,m))));const p=d&&d.targetChanges.get(c.targetId),g=d&&d.targetMismatches.get(c.targetId)!=null,T=c.view.applyChanges(m,l.isPrimaryClient,p,g);return PS(l,c.targetId,T.au),T.snapshot})(v,u,r,h);const C=await xS(v.localStore,t,!0),o=new tz(t,C.ks),E=o.ru(C.documents),e=td.createSynthesizedTargetChangeForCurrentChange(i,f&&v.onlineState!=="Offline",y),a=o.applyChanges(E,v.isPrimaryClient,e);PS(v,i,a.au);const x=new ez(t,i,o);return v.Tu.set(t,x),v.Iu.has(i)?v.Iu.get(i).push(t):v.Iu.set(i,[t]),a.snapshot}async function oz(v,t,i){const f=Le(v),y=f.Tu.get(t),C=f.Iu.get(y.targetId);if(C.length>1)return f.Iu.set(y.targetId,C.filter((o=>!Uv(o,t)))),void f.Tu.delete(t);f.isPrimaryClient?(f.sharedClientState.removeLocalQueryTarget(y.targetId),f.sharedClientState.isActiveQueryTarget(y.targetId)||await sx(f.localStore,y.targetId,!1).then((()=>{f.sharedClientState.clearQueryState(y.targetId),i&&Ey(f.remoteStore,y.targetId),ox(f,y.targetId)})).catch(tf)):(ox(f,y.targetId),await sx(f.localStore,y.targetId,!0))}async function lz(v,t){const i=Le(v),f=i.Tu.get(t),y=i.Iu.get(f.targetId);i.isPrimaryClient&&y.length===1&&(i.sharedClientState.removeLocalQueryTarget(f.targetId),Ey(i.remoteStore,f.targetId))}async function hz(v,t,i){const f=mz(v);try{const y=await(function(o,E){const e=Le(o),a=Ri.now(),x=E.reduce(((h,n)=>h.add(n.key)),Je());let u,r;return e.persistence.runTransaction("Locally write mutations","readwrite",(h=>{let n=$a(),l=Je();return e.xs.getEntries(h,x).next((c=>{n=c,n.forEach(((s,d)=>{d.isValidDocument()||(l=l.add(s))}))})).next((()=>e.localDocuments.getOverlayedDocuments(h,n))).next((c=>{u=c;const s=[];for(const d of E){const m=A7(d,u.get(d.key).overlayedDocument);m!=null&&s.push(new lh(d.key,m,Uw(m.value.mapValue),za.exists(!0)))}return e.mutationQueue.addMutationBatch(h,a,s,E)})).next((c=>{r=c;const s=c.applyToLocalDocumentSet(u,l);return e.documentOverlayCache.saveOverlays(h,c.batchId,s)}))})).then((()=>({batchId:r.batchId,changes:Kw(u)})))})(f.localStore,t);f.sharedClientState.addPendingMutation(y.batchId),(function(o,E,e){let a=o.du[o.currentUser.toKey()];a||(a=new zi(Ze)),a=a.insert(E,e),o.du[o.currentUser.toKey()]=a})(f,y.batchId,i),await id(f,y.changes),await Xv(f.remoteStore)}catch(y){const C=My(y,"Failed to persist write");i.reject(C)}}async function LM(v,t){const i=Le(v);try{const f=await EV(i.localStore,t);t.targetChanges.forEach(((y,C)=>{const o=i.Au.get(C);o&&(di(y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size<=1,22616),y.addedDocuments.size>0?o.hu=!0:y.modifiedDocuments.size>0?di(o.hu,14607):y.removedDocuments.size>0&&(di(o.hu,42227),o.hu=!1))})),await id(i,f,t)}catch(f){await tf(f)}}function RS(v,t,i){const f=Le(v);if(f.isPrimaryClient&&i===0||!f.isPrimaryClient&&i===1){const y=[];f.Tu.forEach(((C,o)=>{const E=o.view.va(t);E.snapshot&&y.push(E.snapshot)})),(function(o,E){const e=Le(o);e.onlineState=E;let a=!1;e.queries.forEach(((x,u)=>{for(const r of u.ba)r.va(E)&&(a=!0)})),a&&by(e)})(f.eventManager,t),y.length&&f.Pu.J_(y),f.onlineState=t,f.isPrimaryClient&&f.sharedClientState.setOnlineState(t)}}async function uz(v,t,i){const f=Le(v);f.sharedClientState.updateQueryState(t,"rejected",i);const y=f.Au.get(t),C=y&&y.key;if(C){let o=new zi(Te.comparator);o=o.insert(C,_n.newNoDocument(C,be.min()));const E=Je().add(C),e=new Wv(be.min(),new Map,new zi(Ze),o,E);await LM(f,e),f.Ru=f.Ru.remove(C),f.Au.delete(t),Fy(f)}else await sx(f.localStore,t,!1).then((()=>ox(f,t,i))).catch(tf)}async function fz(v,t){const i=Le(v),f=t.batch.batchId;try{const y=await TV(i.localStore,t);DM(i,f,null),FM(i,f),i.sharedClientState.updateMutationState(f,"acknowledged"),await id(i,y)}catch(y){await tf(y)}}async function cz(v,t,i){const f=Le(v);try{const y=await(function(o,E){const e=Le(o);return e.persistence.runTransaction("Reject batch","readwrite-primary",(a=>{let x;return e.mutationQueue.lookupMutationBatch(a,E).next((u=>(di(u!==null,37113),x=u.keys(),e.mutationQueue.removeMutationBatch(a,u)))).next((()=>e.mutationQueue.performConsistencyCheck(a))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(a,x,E))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,x))).next((()=>e.localDocuments.getDocuments(a,x)))}))})(f.localStore,t);DM(f,t,i),FM(f,t),f.sharedClientState.updateMutationState(t,"rejected",i),await id(f,y)}catch(y){await tf(y)}}function FM(v,t){(v.mu.get(t)||[]).forEach((i=>{i.resolve()})),v.mu.delete(t)}function DM(v,t,i){const f=Le(v);let y=f.du[f.currentUser.toKey()];if(y){const C=y.get(t);C&&(i?C.reject(i):C.resolve(),y=y.remove(t)),f.du[f.currentUser.toKey()]=y}}function ox(v,t,i=null){v.sharedClientState.removeLocalQueryTarget(t);for(const f of v.Iu.get(t))v.Tu.delete(f),i&&v.Pu.yu(f,i);v.Iu.delete(t),v.isPrimaryClient&&v.Vu.Gr(t).forEach((f=>{v.Vu.containsKey(f)||OM(v,f)}))}function OM(v,t){v.Eu.delete(t.path.canonicalString());const i=v.Ru.get(t);i!==null&&(Ey(v.remoteStore,i),v.Ru=v.Ru.remove(t),v.Au.delete(i),Fy(v))}function PS(v,t,i){for(const f of i)f instanceof PM?(v.Vu.addReference(f.key,t),dz(v,f)):f instanceof bM?(le(Ly,"Document no longer in limbo: "+f.key),v.Vu.removeReference(f.key,t),v.Vu.containsKey(f.key)||OM(v,f.key)):Re(19791,{wu:f})}function dz(v,t){const i=t.key,f=i.path.canonicalString();v.Ru.get(i)||v.Eu.has(f)||(le(Ly,"New document in limbo: "+i),v.Eu.add(f),Fy(v))}function Fy(v){for(;v.Eu.size>0&&v.Ru.size<v.maxConcurrentLimboResolutions;){const t=v.Eu.values().next().value;v.Eu.delete(t);const i=new Te(Ci.fromString(t)),f=v.fu.next();v.Au.set(f,new iz(i)),v.Ru=v.Ru.insert(i,f),SM(v.remoteStore,new wo(Kr(Bv(i.path)),f,"TargetPurposeLimboResolution",Dv.ce))}}async function id(v,t,i){const f=Le(v),y=[],C=[],o=[];f.Tu.isEmpty()||(f.Tu.forEach(((E,e)=>{o.push(f.pu(e,t,i).then((a=>{var x;if((a||i)&&f.isPrimaryClient){const u=a?!a.fromCache:(x=i==null?void 0:i.targetChanges.get(e.targetId))==null?void 0:x.current;f.sharedClientState.updateQueryState(e.targetId,u?"current":"not-current")}if(a){y.push(a);const u=yy.Es(e.targetId,a);C.push(u)}})))})),await Promise.all(o),f.Pu.J_(y),await(async function(e,a){const x=Le(e);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(u=>Ht.forEach(a,(r=>Ht.forEach(r.Ts,(h=>x.persistence.referenceDelegate.addReference(u,r.targetId,h))).next((()=>Ht.forEach(r.Is,(h=>x.persistence.referenceDelegate.removeReference(u,r.targetId,h)))))))))}catch(u){if(!ef(u))throw u;le(Ty,"Failed to update sequence numbers: "+u)}for(const u of a){const r=u.targetId;if(!u.fromCache){const h=x.vs.get(r),n=h.snapshotVersion,l=h.withLastLimboFreeSnapshotVersion(n);x.vs=x.vs.insert(r,l)}}})(f.localStore,C))}async function pz(v,t){const i=Le(v);if(!i.currentUser.isEqual(t)){le(Ly,"User change. New user:",t.toKey());const f=await xM(i.localStore,t);i.currentUser=t,(function(C,o){C.mu.forEach((E=>{E.forEach((e=>{e.reject(new re(Vt.CANCELLED,o))}))})),C.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,f.removedBatchIds,f.addedBatchIds),await id(i,f.Ns)}}function vz(v,t){const i=Le(v),f=i.Au.get(t);if(f&&f.hu)return Je().add(f.key);{let y=Je();const C=i.Iu.get(t);if(!C)return y;for(const o of C){const E=i.Tu.get(o);y=y.unionWith(E.view.nu)}return y}}function NM(v){const t=Le(v);return t.remoteStore.remoteSyncer.applyRemoteEvent=LM.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vz.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uz.bind(null,t),t.Pu.J_=QV.bind(null,t.eventManager),t.Pu.yu=qV.bind(null,t.eventManager),t}function mz(v){const t=Le(v);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fz.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cz.bind(null,t),t}class sv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Hv(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return yV(this.persistence,new mV,t.initialUser,this.serializer)}Cu(t){return new gM(xy.Vi,this.serializer)}Du(t){return new MV}async terminate(){var t,i;(t=this.gcScheduler)==null||t.stop(),(i=this.indexBackfillerScheduler)==null||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sv.provider={build:()=>new sv};class gz extends sv{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){di(this.persistence.referenceDelegate instanceof iv,46915);const f=this.persistence.referenceDelegate.garbageCollector;return new eV(f,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?os.withCacheSize(this.cacheSizeBytes):os.DEFAULT;return new gM((f=>iv.Vi(f,i)),this.serializer)}}class lx{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=f=>RS(this.syncEngine,f,1),this.remoteStore.remoteSyncer.handleCredentialChange=pz.bind(null,this.syncEngine),await jV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new JV})()}createDatastore(t){const i=Hv(t.databaseInfo.databaseId),f=LV(t.databaseInfo);return BV(t.authCredentials,t.appCheckCredentials,f,i)}createRemoteStore(t){return(function(f,y,C,o,E){return new VV(f,y,C,o,E)})(this.localStore,this.datastore,t.asyncQueue,(i=>RS(this.syncEngine,i,0)),(function(){return ES.v()?new ES:new RV})())}createSyncEngine(t,i){return(function(y,C,o,E,e,a,x){const u=new nz(y,C,o,E,e,a);return x&&(u.gu=!0),u})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await(async function(y){const C=Le(y);le(jl,"RemoteStore shutting down."),C.Ea.add(5),await ed(C),C.Aa.shutdown(),C.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(i=this.eventManager)==null||i.terminate()}}lx.provider={build:()=>new lx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ka("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="FirestoreClient";class xz{constructor(t,i,f,y,C){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=f,this._databaseInfo=y,this.user=as.UNAUTHENTICATED,this.clientId=oy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=C,this.authCredentials.start(f,(async o=>{le(jo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(f,(o=>(le(jo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const f=My(i,"Failed to shutdown persistence");t.reject(f)}})),t.promise}}async function f0(v,t){v.asyncQueue.verifyOperationInProgress(),le(jo,"Initializing OfflineComponentProvider");const i=v.configuration;await t.initialize(i);let f=i.initialUser;v.setCredentialChangeListener((async y=>{f.isEqual(y)||(await xM(t.localStore,y),f=y)})),t.persistence.setDatabaseDeletedListener((()=>v.terminate())),v._offlineComponents=t}async function bS(v,t){v.asyncQueue.verifyOperationInProgress();const i=await yz(v);le(jo,"Initializing OnlineComponentProvider"),await t.initialize(i,v.configuration),v.setCredentialChangeListener((f=>CS(t.remoteStore,f))),v.setAppCheckTokenChangeListener(((f,y)=>CS(t.remoteStore,y))),v._onlineComponents=t}async function yz(v){if(!v._offlineComponents)if(v._uninitializedComponentsProvider){le(jo,"Using user provided OfflineComponentProvider");try{await f0(v,v._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(y){return y.name==="FirebaseError"?y.code===Vt.FAILED_PRECONDITION||y.code===Vt.UNIMPLEMENTED:!(typeof DOMException<"u"&&y instanceof DOMException)||y.code===22||y.code===20||y.code===11})(i))throw i;Uu("Error using user provided cache. Falling back to memory cache: "+i),await f0(v,new sv)}}else le(jo,"Using default OfflineComponentProvider"),await f0(v,new gz(void 0));return v._offlineComponents}async function BM(v){return v._onlineComponents||(v._uninitializedComponentsProvider?(le(jo,"Using user provided OnlineComponentProvider"),await bS(v,v._uninitializedComponentsProvider._online)):(le(jo,"Using default OnlineComponentProvider"),await bS(v,new lx))),v._onlineComponents}function Tz(v){return BM(v).then((t=>t.syncEngine))}async function rv(v){const t=await BM(v),i=t.eventManager;return i.onListen=sz.bind(null,t.syncEngine),i.onUnlisten=oz.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=rz.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=lz.bind(null,t.syncEngine),i}function Ez(v,t,i,f){const y=new Dy(f),C=new Iy(t,y,i);return v.asyncQueue.enqueueAndForget((async()=>Ry(await rv(v),C))),()=>{y.Nu(),v.asyncQueue.enqueueAndForget((async()=>Py(await rv(v),C)))}}function Sz(v,t,i={}){const f=new Ua;return v.asyncQueue.enqueueAndForget((async()=>(function(C,o,E,e,a){const x=new Dy({next:r=>{x.Nu(),o.enqueueAndForget((()=>Py(C,u)));const h=r.docs.has(E);!h&&r.fromCache?a.reject(new re(Vt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&r.fromCache&&e&&e.source==="server"?a.reject(new re(Vt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(r)},error:r=>a.reject(r)}),u=new Iy(Bv(E.path),x,{includeMetadataChanges:!0,Ka:!0});return Ry(C,u)})(await rv(v),v.asyncQueue,t,i,f))),f.promise}function Cz(v,t,i={}){const f=new Ua;return v.asyncQueue.enqueueAndForget((async()=>(function(C,o,E,e,a){const x=new Dy({next:r=>{x.Nu(),o.enqueueAndForget((()=>Py(C,u))),r.fromCache&&e.source==="server"?a.reject(new re(Vt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(r)},error:r=>a.reject(r)}),u=new Iy(E,x,{includeMetadataChanges:!0,Ka:!0});return Ry(C,u)})(await rv(v),v.asyncQueue,t,i,f))),f.promise}function Az(v,t){const i=new Ua;return v.asyncQueue.enqueueAndForget((async()=>hz(await Tz(v),t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(v){const t={};return v.timeoutSeconds!==void 0&&(t.timeoutSeconds=v.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz="ComponentProvider",IS=new Map;function Mz(v,t,i,f,y){return new YU(v,t,i,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,UM(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator,f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz="firestore.googleapis.com",LS=!0;class FS{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new re(Vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rz,this.ssl=LS}else this.host=t.host,this.ssl=t.ssl??LS;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=vM;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<mM)throw new re(Vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}OU("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UM(t.experimentalLongPollingOptions??{}),(function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new re(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new re(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new re(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(f,y){return f.timeoutSeconds===y.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Oy{constructor(t,i,f,y){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=f,this._app=y,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(Vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new re(Vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FS(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(f){if(!f)return new wU;switch(f.type){case"firstParty":return new PU(f.sessionIndex||"0",f.iamToken||null,f.authTokenFactory||null);case"provider":return f.client;default:throw new re(Vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const f=IS.get(i);f&&(le(wz,"Removing Datastore"),IS.delete(i),f.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t,i,f){this.converter=i,this._query=f,this.type="query",this.firestore=t}withConverter(t){return new Ja(this.firestore,t,this._query)}}class Ki{constructor(t,i,f){this.converter=i,this._key=f,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ki(this.firestore,t,this._key)}toJSON(){return{type:Ki._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,f){if(Qc(i,Ki._jsonSchema))return new Ki(t,f||null,new Te(Ci.fromString(i.referencePath)))}}Ki._jsonSchemaVersion="firestore/documentReference/1.0",Ki._jsonSchema={type:ln("string",Ki._jsonSchemaVersion),referencePath:ln("string")};class Bo extends Ja{constructor(t,i,f){super(t,i,Bv(f)),this._path=f,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ki(this.firestore,null,new Te(t))}withConverter(t){return new Bo(this.firestore,t,this._path)}}function VM(v,t,...i){if(v=Zi(v),Mw("collection","path",t),v instanceof Oy){const f=Ci.fromString(t,...i);return YE(f),new Bo(v,null,f)}{if(!(v instanceof Ki||v instanceof Bo))throw new re(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=v._path.child(Ci.fromString(t,...i));return YE(f),new Bo(v.firestore,null,f)}}function nd(v,t,...i){if(v=Zi(v),arguments.length===1&&(t=oy.newId()),Mw("doc","path",t),v instanceof Oy){const f=Ci.fromString(t,...i);return XE(f),new Ki(v,null,new Te(f))}{if(!(v instanceof Ki||v instanceof Bo))throw new re(Vt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=v._path.child(Ci.fromString(t,...i));return XE(f),new Ki(v.firestore,v instanceof Bo?v.converter:null,new Te(f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="AsyncQueue";class OS{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TM(this,"async_queue_retry"),this._c=()=>{const f=u0();f&&le(DS,"Visibility state changed to "+f.visibilityState),this.M_.w_()},this.ac=t;const i=u0();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=u0();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Ua;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!ef(t))throw t;le(DS,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((f=>{throw this.nc=f,this.rc=!1,ka("INTERNAL UNHANDLED ERROR: ",NS(f)),f})).then((f=>(this.rc=!1,f))))));return this.ac=i,i}enqueueAfterDelay(t,i,f){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const y=wy.createAndSchedule(this,t,i,f,(C=>this.hc(C)));return this.tc.push(y),y}uc(){this.nc&&Re(47125,{Pc:NS(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,f)=>i.targetTimeMs-f.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function NS(v){let t=v.message||"";return v.stack&&(t=v.stack.includes(v.message)?v.stack:v.message+`
`+v.stack),t}class _u extends Oy{constructor(t,i,f,y){super(t,i,f,y),this.type="firestore",this._queue=new OS,this._persistenceKey=(y==null?void 0:y.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new OS(t),this._firestoreClient=void 0,await t}}}function Pz(v,t,i){i||(i=Zp);const f=rh(v,"firestore");if(f.isInitialized(i)){const y=f.getImmediate({identifier:i}),C=f.getOptions(i);if(_o(C,t))return y;throw new re(Vt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new re(Vt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<mM)throw new re(Vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&Ju(t.host)&&lw(t.host),f.initialize({options:t,instanceIdentifier:i})}function Yv(v){if(v._terminated)throw new re(Vt.FAILED_PRECONDITION,"The client has already been terminated.");return v._firestoreClient||bz(v),v._firestoreClient}function bz(v){var f,y,C,o;const t=v._freezeSettings(),i=Mz(v._databaseId,((f=v._app)==null?void 0:f.options.appId)||"",v._persistenceKey,(y=v._app)==null?void 0:y.options.apiKey,t);v._componentsProvider||(C=t.localCache)!=null&&C._offlineComponentProvider&&((o=t.localCache)!=null&&o._onlineComponentProvider)&&(v._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),v._firestoreClient=new xz(v._authCredentials,v._appCheckCredentials,v._queue,i,v._componentsProvider&&(function(e){const a=e==null?void 0:e._online.build();return{_offline:e==null?void 0:e._offline.build(a),_online:a}})(v._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $s(Bn.fromBase64String(t))}catch(i){throw new re(Vt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new $s(Bn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$s._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qc(t,$s._jsonSchema))return $s.fromBase64String(t.bytes)}}$s._jsonSchemaVersion="firestore/bytes/1.0",$s._jsonSchema={type:ln("string",$s._jsonSchemaVersion),bytes:ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new re(Vt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new re(Vt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new re(Vt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ze(this._lat,t._lat)||Ze(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zr._jsonSchemaVersion}}static fromJSON(t){if(Qc(t,Zr._jsonSchema))return new Zr(t.latitude,t.longitude)}}Zr._jsonSchemaVersion="firestore/geoPoint/1.0",Zr._jsonSchema={type:ln("string",Zr._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(f,y){if(f.length!==y.length)return!1;for(let C=0;C<f.length;++C)if(f[C]!==y[C])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qc(t,Tr._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Tr(t.vectorValues);throw new re(Vt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tr._jsonSchemaVersion="firestore/vectorValue/1.0",Tr._jsonSchema={type:ln("string",Tr._jsonSchemaVersion),vectorValues:ln("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=/^__.*__$/;class Lz{constructor(t,i,f){this.data=t,this.fieldMask=i,this.fieldTransforms=f}toMutation(t,i){return this.fieldMask!==null?new lh(t,this.data,this.fieldMask,i,this.fieldTransforms):new qc(t,this.data,i,this.fieldTransforms)}}function GM(v){switch(v){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{dataSource:v})}}class By{constructor(t,i,f,y,C,o){this.settings=t,this.databaseId=i,this.serializer=f,this.ignoreUndefinedProperties=y,C===void 0&&this.validatePath(),this.fieldTransforms=C||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new By({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var y;const i=(y=this.path)==null?void 0:y.child(t),f=this.contextWith({path:i,arrayElement:!1});return f.validatePathSegment(t),f}childContextForFieldPath(t){var y;const i=(y=this.path)==null?void 0:y.child(t),f=this.contextWith({path:i,arrayElement:!1});return f.validatePath(),f}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return av(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(GM(this.dataSource)&&Iz.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class Fz{constructor(t,i,f){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=f||Hv(t)}createContext(t,i,f,y=!1){return new By({dataSource:t,methodName:i,targetDoc:f,path:Ln.emptyPath(),arrayElement:!1,hasConverter:y},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function WM(v){const t=v._freezeSettings(),i=Hv(v._databaseId);return new Fz(v._databaseId,!!t.ignoreUndefinedProperties,i)}function Dz(v,t,i,f,y,C={}){const o=v.createContext(C.merge||C.mergeFields?2:0,t,i,y);XM("Data must be an object, but it was:",o,f);const E=HM(f,o);let e,a;if(C.merge)e=new gr(o.fieldMask),a=o.fieldTransforms;else if(C.mergeFields){const x=[];for(const u of C.mergeFields){const r=kv(t,u,i);if(!o.contains(r))throw new re(Vt.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Uz(x,r)||x.push(r)}e=new gr(x),a=o.fieldTransforms.filter((u=>e.covers(u.field)))}else e=null,a=o.fieldTransforms;return new Lz(new ks(E),e,a)}class Uy extends Ny{_toFieldTransform(t){return new T7(t.path,new Ic)}isEqual(t){return t instanceof Uy}}function Oz(v,t,i,f=!1){return Vy(i,v.createContext(f?4:3,t))}function Vy(v,t){if(_M(v=Zi(v)))return XM("Unsupported field value:",t,v),HM(v,t);if(v instanceof Ny)return(function(f,y){if(!GM(y.dataSource))throw y.createError(`${f._methodName}() can only be used with update() and set()`);if(!y.path)throw y.createError(`${f._methodName}() is not currently supported inside arrays`);const C=f._toFieldTransform(y);C&&y.fieldTransforms.push(C)})(v,t),null;if(v===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),v instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(f,y){const C=[];let o=0;for(const E of f){let e=Vy(E,y.childContextForArray(o));e==null&&(e={nullValue:"NULL_VALUE"}),C.push(e),o++}return{arrayValue:{values:C}}})(v,t)}return(function(f,y){if((f=Zi(f))===null)return{nullValue:"NULL_VALUE"};if(typeof f=="number")return g7(y.serializer,f);if(typeof f=="boolean")return{booleanValue:f};if(typeof f=="string")return{stringValue:f};if(f instanceof Date){const C=Ri.fromDate(f);return{timestampValue:ev(y.serializer,C)}}if(f instanceof Ri){const C=new Ri(f.seconds,1e3*Math.floor(f.nanoseconds/1e3));return{timestampValue:ev(y.serializer,C)}}if(f instanceof Zr)return{geoPointValue:{latitude:f.latitude,longitude:f.longitude}};if(f instanceof $s)return{bytesValue:oM(y.serializer,f._byteString)};if(f instanceof Ki){const C=y.databaseId,o=f.firestore._databaseId;if(!o.isEqual(C))throw y.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${C.projectId}/${C.database}`);return{referenceValue:my(f.firestore._databaseId||y.databaseId,f._key.path)}}if(f instanceof Tr)return(function(o,E){const e=o instanceof Tr?o.toArray():o;return{mapValue:{fields:{[Nw]:{stringValue:Bw},[Jp]:{arrayValue:{values:e.map((x=>{if(typeof x!="number")throw E.createError("VectorValues must only contain numeric values.");return dy(E.serializer,x)}))}}}}}})(f,y);if(pM(f))return f._toProto(y.serializer);throw y.createError(`Unsupported field value: ${Fv(f)}`)})(v,t)}function HM(v,t){const i={};return bw(v)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ah(v,((f,y)=>{const C=Vy(y,t.childContextForField(f));C!=null&&(i[f]=C)})),{mapValue:{fields:i}}}function _M(v){return!(typeof v!="object"||v===null||v instanceof Array||v instanceof Date||v instanceof Ri||v instanceof Zr||v instanceof $s||v instanceof Ki||v instanceof Ny||v instanceof Tr||pM(v))}function XM(v,t,i){if(!_M(i)||!Rw(i)){const f=Fv(i);throw f==="an object"?t.createError(v+" a custom object"):t.createError(v+" "+f)}}function kv(v,t,i){if((t=Zi(t))instanceof zM)return t._internalPath;if(typeof t=="string")return Bz(v,t);throw av("Field path arguments must be of type string or ",v,!1,void 0,i)}const Nz=new RegExp("[~\\*/\\[\\]]");function Bz(v,t,i){if(t.search(Nz)>=0)throw av(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,v,!1,void 0,i);try{return new zM(...t.split("."))._internalPath}catch{throw av(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,v,!1,void 0,i)}}function av(v,t,i,f,y){const C=f&&!f.isEmpty(),o=y!==void 0;let E=`Function ${t}() called with invalid data`;i&&(E+=" (via `toFirestore()`)"),E+=". ";let e="";return(C||o)&&(e+=" (found",C&&(e+=` in field ${f}`),o&&(e+=` in document ${y}`),e+=")"),new re(Vt.INVALID_ARGUMENT,E+v+e)}function Uz(v,t){return v.some((i=>i.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{convertValue(t,i="none"){switch($o(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $i(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(ko(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Re(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const f={};return ah(t,((y,C)=>{f[y]=this.convertValue(C,i)})),f}convertVectorValue(t){var f,y,C;const i=(C=(y=(f=t.fields)==null?void 0:f[Jp].arrayValue)==null?void 0:y.values)==null?void 0:C.map((o=>$i(o.doubleValue)));return new Tr(i)}convertGeoPoint(t){return new Zr($i(t.latitude),$i(t.longitude))}convertArray(t,i){return(t.values||[]).map((f=>this.convertValue(f,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const f=Nv(t);return f==null?null:this.convertValue(f,i);case"estimate":return this.convertTimestamp(Mc(t));default:return null}}convertTimestamp(t){const i=Yo(t);return new Ri(i.seconds,i.nanos)}convertDocumentKey(t,i){const f=Ci.fromString(t);di(dM(f),9688,{name:t});const y=new Rc(f.get(1),f.get(3)),C=new Te(f.popFirst(5));return y.isEqual(i)||ka(`Document ${C} contains a document reference within a different database (${y.projectId}/${y.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),C}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends Vz{constructor(t){super(),this.firestore=t}convertBytes(t){return new $s(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Ki(this.firestore,null,i)}}function YM(){return new Uy("serverTimestamp")}const BS="@firebase/firestore",US="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(v){return(function(i,f){if(typeof i!="object"||i===null)return!1;const y=i;for(const C of f)if(C in y&&typeof y[C]=="function")return!0;return!1})(v,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(t,i,f,y,C){this._firestore=t,this._userDataWriter=i,this._key=f,this._document=y,this._converter=C}get id(){return this._key.path.lastSegment()}get ref(){return new Ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new zz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const i=this._document.data.field(kv("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class zz extends kM{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(v){if(v.limitType==="L"&&v.explicitOrderBy.length===0)throw new re(Vt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gy{}class Wy extends Gy{}function KM(v,t,...i){let f=[];t instanceof Gy&&f.push(t),f=f.concat(i),(function(C){const o=C.filter((e=>e instanceof _y)).length,E=C.filter((e=>e instanceof Hy)).length;if(o>1||o>0&&E>0)throw new re(Vt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(f);for(const y of f)v=y._apply(v);return v}class Hy extends Wy{constructor(t,i,f){super(),this._field=t,this._op=i,this._value=f,this.type="where"}static _create(t,i,f){return new Hy(t,i,f)}_apply(t){const i=this._parse(t);return ZM(t._query,i),new Ja(t.firestore,t.converter,qg(t._query,i))}_parse(t){const i=WM(t.firestore);return(function(C,o,E,e,a,x,u){let r;if(a.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new re(Vt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){GS(u,x);const n=[];for(const l of u)n.push(zS(e,C,l));r={arrayValue:{values:n}}}else r=zS(e,C,u)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||GS(u,x),r=Oz(E,o,u,x==="in"||x==="not-in");return on.create(a,x,r)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}class _y extends Gy{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new _y(t,i)}_parse(t){const i=this._queryConstraints.map((f=>f._parse(t))).filter((f=>f.getFilters().length>0));return i.length===1?i[0]:Sr.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(y,C){let o=y;const E=C.getFlattenedFilters();for(const e of E)ZM(o,e),o=qg(o,e)})(t._query,i),new Ja(t.firestore,t.converter,qg(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xy extends Wy{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new Xy(t,i)}_apply(t){const i=(function(y,C,o){if(y.startAt!==null)throw new re(Vt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(y.endAt!==null)throw new re(Vt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bc(C,o)})(t._query,this._field,this._direction);return new Ja(t.firestore,t.converter,h7(t._query,i))}}function jM(v,t="asc"){const i=t,f=kv("orderBy",v);return Xy._create(f,i)}class Yy extends Wy{constructor(t,i,f){super(),this.type=t,this._limit=i,this._limitType=f}static _create(t,i,f){return new Yy(t,i,f)}_apply(t){return new Ja(t.firestore,t.converter,qp(t._query,this._limit,this._limitType))}}function Gz(v){return Yy._create("limit",v,"F")}function zS(v,t,i){if(typeof(i=Zi(i))=="string"){if(i==="")throw new re(Vt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xw(t)&&i.indexOf("/")!==-1)throw new re(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const f=t.path.child(Ci.fromString(i));if(!Te.isDocumentKey(f))throw new re(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${f}' is not because it has an odd number of segments (${f.length}).`);return qE(v,new Te(f))}if(i instanceof Ki)return qE(v,i._key);throw new re(Vt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fv(i)}.`)}function GS(v,t){if(!Array.isArray(v)||v.length===0)throw new re(Vt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ZM(v,t){const i=(function(y,C){for(const o of y)for(const E of o.getFlattenedFilters())if(C.indexOf(E.op)>=0)return E.op;return null})(v.filters,(function(y){switch(y){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new re(Vt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new re(Vt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}function Wz(v,t,i){let f;return f=v?i&&(i.merge||i.mergeFields)?v.toFirestore(t,i):v.toFirestore(t):t,f}class qf{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Hl extends kM{constructor(t,i,f,y,C,o){super(t,i,f,y,o),this._firestore=t,this._firestoreImpl=t,this.metadata=C}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Mp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const f=this._document.data.field(kv("DocumentSnapshot.get",t));if(f!==null)return this._userDataWriter.convertValue(f,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(Vt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=Hl._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Hl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hl._jsonSchema={type:ln("string",Hl._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class Mp extends Hl{data(t={}){return super.data(t)}}class _l{constructor(t,i,f,y){this._firestore=t,this._userDataWriter=i,this._snapshot=y,this.metadata=new qf(y.hasPendingWrites,y.fromCache),this.query=f}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((f=>{t.call(i,new Mp(this._firestore,this._userDataWriter,f.key,f,new qf(this._snapshot.mutatedKeys.has(f.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new re(Vt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(y,C){if(y._snapshot.oldDocs.isEmpty()){let o=0;return y._snapshot.docChanges.map((E=>{const e=new Mp(y._firestore,y._userDataWriter,E.doc.key,E.doc,new qf(y._snapshot.mutatedKeys.has(E.doc.key),y._snapshot.fromCache),y.query.converter);return E.doc,{type:"added",doc:e,oldIndex:-1,newIndex:o++}}))}{let o=y._snapshot.oldDocs;return y._snapshot.docChanges.filter((E=>C||E.type!==3)).map((E=>{const e=new Mp(y._firestore,y._userDataWriter,E.doc.key,E.doc,new qf(y._snapshot.mutatedKeys.has(E.doc.key),y._snapshot.fromCache),y.query.converter);let a=-1,x=-1;return E.type!==0&&(a=o.indexOf(E.doc.key),o=o.delete(E.doc.key)),E.type!==1&&(o=o.add(E.doc),x=o.indexOf(E.doc.key)),{type:Hz(E.type),doc:e,oldIndex:a,newIndex:x}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(Vt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=_l._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=oy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],f=[],y=[];return this.docs.forEach((C=>{C._document!==null&&(i.push(C._document),f.push(this._userDataWriter.convertObjectMap(C._document.data.value.mapValue.fields,"previous")),y.push(C.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Hz(v){switch(v){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:v})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_l._jsonSchemaVersion="firestore/querySnapshot/1.0",_l._jsonSchema={type:ln("string",_l._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(v){v=Va(v,Ki);const t=Va(v.firestore,_u),i=Yv(t);return Sz(i,v._key).then((f=>qM(t,v,f)))}function _z(v){v=Va(v,Ja);const t=Va(v.firestore,_u),i=Yv(t),f=new zy(t);return $M(v._query),Cz(i,v._query).then((y=>new _l(t,f,v,y)))}function QM(v,t,i){v=Va(v,Ki);const f=Va(v.firestore,_u),y=Wz(v.converter,t,i),C=WM(f);return Yz(f,[Dz(C,"setDoc",v._key,y,v.converter!==null,i).toMutation(v._key,za.none())])}function Xz(v,...t){var a,x,u;v=Zi(v);let i={includeMetadataChanges:!1,source:"default"},f=0;typeof t[f]!="object"||VS(t[f])||(i=t[f++]);const y={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(VS(t[f])){const r=t[f];t[f]=(a=r.next)==null?void 0:a.bind(r),t[f+1]=(x=r.error)==null?void 0:x.bind(r),t[f+2]=(u=r.complete)==null?void 0:u.bind(r)}let C,o,E;if(v instanceof Ki)o=Va(v.firestore,_u),E=Bv(v._key.path),C={next:r=>{t[f]&&t[f](qM(o,v,r))},error:t[f+1],complete:t[f+2]};else{const r=Va(v,Ja);o=Va(r.firestore,_u),E=r._query;const h=new zy(o);C={next:n=>{t[f]&&t[f](new _l(o,h,r,n))},error:t[f+1],complete:t[f+2]},$M(v._query)}const e=Yv(o);return Ez(e,E,y,C)}function Yz(v,t){const i=Yv(v);return Az(i,t)}function qM(v,t,i){const f=i.docs.get(t._key),y=new zy(v);return new Hl(v,y,t._key,f,new qf(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){CU(Qu),ea(new Er("firestore",((f,{instanceIdentifier:y,options:C})=>{const o=f.getProvider("app").getImmediate(),E=new _u(new MU(f.getProvider("auth-internal")),new bU(o,f.getProvider("app-check-internal")),kU(o,y),o);return C={useFetchStreams:i,...C},E._setSettings(C),E}),"PUBLIC").setMultipleInstances(!0)),Qs(BS,US,t),Qs(BS,US,"esm2020")})();function tR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kz=tR,eR=new sh("auth","Firebase",tR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Lv("@firebase/auth");function $z(v,...t){ov.logLevel<=je.WARN&&ov.warn(`Auth (${Qu}): ${v}`,...t)}function Rp(v,...t){ov.logLevel<=je.ERROR&&ov.error(`Auth (${Qu}): ${v}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(v,...t){throw ky(v,...t)}function Jr(v,...t){return ky(v,...t)}function iR(v,t,i){const f={...kz(),[t]:i};return new sh("auth","Firebase",f).create(t,{appName:v.name})}function Ga(v){return iR(v,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ky(v,...t){if(typeof v!="string"){const i=t[0],f=[...t.slice(1)];return f[0]&&(f[0].appName=v.name),v._errorFactory.create(i,...f)}return eR.create(v,...t)}function Me(v,t,...i){if(!v)throw ky(t,...i)}function La(v){const t="INTERNAL ASSERTION FAILED: "+v;throw Rp(t),new Error(t)}function Ka(v,t){v||La(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(){var v;return typeof self<"u"&&((v=self.location)==null?void 0:v.href)||""}function Kz(){return WS()==="http:"||WS()==="https:"}function WS(){var v;return typeof self<"u"&&((v=self.location)==null?void 0:v.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Kz()||hw()||"connection"in navigator)?navigator.onLine:!0}function Zz(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t,i){this.shortDelay=t,this.longDelay=i,Ka(i>t,"Short delay should be less than long delay!"),this.isMobile=Z8()||q8()}get(){return jz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(v,t){Ka(v.emulator,"Emulator should always be set here");const{url:i}=v.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{static initialize(t,i,f){this.fetchImpl=t,i&&(this.headersImpl=i),f&&(this.responseImpl=f)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;La("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;La("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;La("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qz=new sd(3e4,6e4);function Qo(v,t){return v.tenantId&&!t.tenantId?{...t,tenantId:v.tenantId}:t}async function Qa(v,t,i,f,y={}){return sR(v,y,async()=>{let C={},o={};f&&(t==="GET"?o=f:C={body:JSON.stringify(f)});const E=Jc({key:v.config.apiKey,...o}).slice(1),e=await v._getAdditionalHeaders();e["Content-Type"]="application/json",v.languageCode&&(e["X-Firebase-Locale"]=v.languageCode);const a={method:t,headers:e,...C};return Q8()||(a.referrerPolicy="no-referrer"),v.emulatorConfig&&Ju(v.emulatorConfig.host)&&(a.credentials="include"),nR.fetch()(await rR(v,v.config.apiHost,i,E),a)})}async function sR(v,t,i){v._canInitEmulator=!1;const f={...Jz,...t};try{const y=new eG(v),C=await Promise.race([i(),y.promise]);y.clearNetworkTimeout();const o=await C.json();if("needConfirmation"in o)throw op(v,"account-exists-with-different-credential",o);if(C.ok&&!("errorMessage"in o))return o;{const E=C.ok?o.errorMessage:o.error.message,[e,a]=E.split(" : ");if(e==="FEDERATED_USER_ID_ALREADY_LINKED")throw op(v,"credential-already-in-use",o);if(e==="EMAIL_EXISTS")throw op(v,"email-already-in-use",o);if(e==="USER_DISABLED")throw op(v,"user-disabled",o);const x=f[e]||e.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw iR(v,x,a);Cr(v,x)}}catch(y){if(y instanceof Mr)throw y;Cr(v,"network-request-failed",{message:String(y)})}}async function rd(v,t,i,f,y={}){const C=await Qa(v,t,i,f,y);return"mfaPendingCredential"in C&&Cr(v,"multi-factor-auth-required",{_serverResponse:C}),C}async function rR(v,t,i,f){const y=`${t}${i}?${f}`,C=v,o=C.config.emulator?$y(v.config,y):`${v.config.apiScheme}://${y}`;return Qz.includes(i)&&(await C._persistenceManagerAvailable,C._getPersistenceType()==="COOKIE")?C._getPersistence()._getFinalTarget(o).toString():o}function tG(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,f)=>{this.timer=setTimeout(()=>f(Jr(this.auth,"network-request-failed")),qz.get())})}}function op(v,t,i){const f={appName:v.name};i.email&&(f.email=i.email),i.phoneNumber&&(f.phoneNumber=i.phoneNumber);const y=Jr(v,t,f);return y.customData._tokenResponse=i,y}function HS(v){return v!==void 0&&v.enterprise!==void 0}class iG{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return tG(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nG(v,t){return Qa(v,"GET","/v2/recaptchaConfig",Qo(v,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sG(v,t){return Qa(v,"POST","/v1/accounts:delete",t)}async function lv(v,t){return Qa(v,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(v){if(v)try{const t=new Date(Number(v));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rG(v,t=!1){const i=Zi(v),f=await i.getIdToken(t),y=Ky(f);Me(y&&y.exp&&y.auth_time&&y.iat,i.auth,"internal-error");const C=typeof y.firebase=="object"?y.firebase:void 0,o=C==null?void 0:C.sign_in_provider;return{claims:y,token:f,authTime:cc(c0(y.auth_time)),issuedAtTime:cc(c0(y.iat)),expirationTime:cc(c0(y.exp)),signInProvider:o||null,signInSecondFactor:(C==null?void 0:C.sign_in_second_factor)||null}}function c0(v){return Number(v)*1e3}function Ky(v){const[t,i,f]=v.split(".");if(t===void 0||i===void 0||f===void 0)return Rp("JWT malformed, contained fewer than 3 sections"),null;try{const y=rw(i);return y?JSON.parse(y):(Rp("Failed to decode base64 JWT payload"),null)}catch(y){return Rp("Caught error parsing JWT payload as JSON",y==null?void 0:y.toString()),null}}function _S(v){const t=Ky(v);return Me(t,"internal-error"),Me(typeof t.exp<"u","internal-error"),Me(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(v,t,i=!1){if(i)return t;try{return await t}catch(f){throw f instanceof Mr&&aG(f)&&v.auth.currentUser===v&&await v.auth.signOut(),f}}function aG({code:v}){return v==="auth/user-disabled"||v==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const f=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,f)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hv(v){var u;const t=v.auth,i=await v.getIdToken(),f=await Xu(v,lv(t,{idToken:i}));Me(f==null?void 0:f.users.length,t,"internal-error");const y=f.users[0];v._notifyReloadListener(y);const C=(u=y.providerUserInfo)!=null&&u.length?aR(y.providerUserInfo):[],o=hG(v.providerData,C),E=v.isAnonymous,e=!(v.email&&y.passwordHash)&&!(o!=null&&o.length),a=E?e:!1,x={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:o,metadata:new ux(y.createdAt,y.lastLoginAt),isAnonymous:a};Object.assign(v,x)}async function lG(v){const t=Zi(v);await hv(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function hG(v,t){return[...v.filter(f=>!t.some(y=>y.providerId===f.providerId)),...t]}function aR(v){return v.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uG(v,t){const i=await sR(v,{},async()=>{const f=Jc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:y,apiKey:C}=v.config,o=await rR(v,y,"/v1/token",`key=${C}`),E=await v._getAdditionalHeaders();E["Content-Type"]="application/x-www-form-urlencoded";const e={method:"POST",headers:E,body:f};return v.emulatorConfig&&Ju(v.emulatorConfig.host)&&(e.credentials="include"),nR.fetch()(o,e)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function fG(v,t){return Qa(v,"POST","/v2/accounts:revokeToken",Qo(v,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Me(t.idToken,"internal-error"),Me(typeof t.idToken<"u","internal-error"),Me(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):_S(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Me(t.length!==0,"internal-error");const i=_S(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:f,refreshToken:y,expiresIn:C}=await uG(t,i);this.updateTokensAndExpiration(f,y,Number(C))}updateTokensAndExpiration(t,i,f){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+f*1e3}static fromJSON(t,i){const{refreshToken:f,accessToken:y,expirationTime:C}=i,o=new ou;return f&&(Me(typeof f=="string","internal-error",{appName:t}),o.refreshToken=f),y&&(Me(typeof y=="string","internal-error",{appName:t}),o.accessToken=y),C&&(Me(typeof C=="number","internal-error",{appName:t}),o.expirationTime=C),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ou,this.toJSON())}_performRefresh(){return La("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(v,t){Me(typeof v=="string"||typeof v>"u","internal-error",{appName:t})}class xr{constructor({uid:t,auth:i,stsTokenManager:f,...y}){this.providerId="firebase",this.proactiveRefresh=new oG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=f,this.accessToken=f.accessToken,this.displayName=y.displayName||null,this.email=y.email||null,this.emailVerified=y.emailVerified||!1,this.phoneNumber=y.phoneNumber||null,this.photoURL=y.photoURL||null,this.isAnonymous=y.isAnonymous||!1,this.tenantId=y.tenantId||null,this.providerData=y.providerData?[...y.providerData]:[],this.metadata=new ux(y.createdAt||void 0,y.lastLoginAt||void 0)}async getIdToken(t){const i=await Xu(this,this.stsTokenManager.getToken(this.auth,t));return Me(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return rG(this,t)}reload(){return lG(this)}_assign(t){this!==t&&(Me(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new xr({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let f=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),f=!0),i&&await hv(this),await this.auth._persistUserIfCurrent(this),f&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ys(this.auth.app))return Promise.reject(Ga(this.auth));const t=await this.getIdToken();return await Xu(this,sG(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const f=i.displayName??void 0,y=i.email??void 0,C=i.phoneNumber??void 0,o=i.photoURL??void 0,E=i.tenantId??void 0,e=i._redirectEventId??void 0,a=i.createdAt??void 0,x=i.lastLoginAt??void 0,{uid:u,emailVerified:r,isAnonymous:h,providerData:n,stsTokenManager:l}=i;Me(u&&l,t,"internal-error");const c=ou.fromJSON(this.name,l);Me(typeof u=="string",t,"internal-error"),po(f,t.name),po(y,t.name),Me(typeof r=="boolean",t,"internal-error"),Me(typeof h=="boolean",t,"internal-error"),po(C,t.name),po(o,t.name),po(E,t.name),po(e,t.name),po(a,t.name),po(x,t.name);const s=new xr({uid:u,auth:t,email:y,emailVerified:r,displayName:f,isAnonymous:h,photoURL:o,phoneNumber:C,tenantId:E,stsTokenManager:c,createdAt:a,lastLoginAt:x});return n&&Array.isArray(n)&&(s.providerData=n.map(d=>({...d}))),e&&(s._redirectEventId=e),s}static async _fromIdTokenResponse(t,i,f=!1){const y=new ou;y.updateFromServerResponse(i);const C=new xr({uid:i.localId,auth:t,stsTokenManager:y,isAnonymous:f});return await hv(C),C}static async _fromGetAccountInfoResponse(t,i,f){const y=i.users[0];Me(y.localId!==void 0,"internal-error");const C=y.providerUserInfo!==void 0?aR(y.providerUserInfo):[],o=!(y.email&&y.passwordHash)&&!(C!=null&&C.length),E=new ou;E.updateFromIdToken(f);const e=new xr({uid:y.localId,auth:t,stsTokenManager:E,isAnonymous:o}),a={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:C,metadata:new ux(y.createdAt,y.lastLoginAt),isAnonymous:!(y.email&&y.passwordHash)&&!(C!=null&&C.length)};return Object.assign(e,a),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=new Map;function Fa(v){Ka(v instanceof Function,"Expected a class definition");let t=XS.get(v);return t?(Ka(t instanceof v,"Instance stored in cache mismatched with class"),t):(t=new v,XS.set(v,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}oR.type="NONE";const YS=oR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(v,t,i){return`firebase:${v}:${t}:${i}`}class lu{constructor(t,i,f){this.persistence=t,this.auth=i,this.userKey=f;const{config:y,name:C}=this.auth;this.fullUserKey=Pp(this.userKey,y.apiKey,C),this.fullPersistenceKey=Pp("persistence",y.apiKey,C),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await lv(this.auth,{idToken:t}).catch(()=>{});return i?xr._fromGetAccountInfoResponse(this.auth,i,t):null}return xr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,f="authUser"){if(!i.length)return new lu(Fa(YS),t,f);const y=(await Promise.all(i.map(async a=>{if(await a._isAvailable())return a}))).filter(a=>a);let C=y[0]||Fa(YS);const o=Pp(f,t.config.apiKey,t.name);let E=null;for(const a of i)try{const x=await a._get(o);if(x){let u;if(typeof x=="string"){const r=await lv(t,{idToken:x}).catch(()=>{});if(!r)break;u=await xr._fromGetAccountInfoResponse(t,r,x)}else u=xr._fromJSON(t,x);a!==C&&(E=u),C=a;break}}catch{}const e=y.filter(a=>a._shouldAllowMigration);return!C._shouldAllowMigration||!e.length?new lu(C,t,f):(C=e[0],E&&await C._set(o,E.toJSON()),await Promise.all(i.map(async a=>{if(a!==C)try{await a._remove(o)}catch{}})),new lu(C,t,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(v){const t=v.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fR(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(lR(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dR(t))return"Blackberry";if(pR(t))return"Webos";if(hR(t))return"Safari";if((t.includes("chrome/")||uR(t))&&!t.includes("edge/"))return"Chrome";if(cR(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,f=v.match(i);if((f==null?void 0:f.length)===2)return f[1]}return"Other"}function lR(v=$n()){return/firefox\//i.test(v)}function hR(v=$n()){const t=v.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function uR(v=$n()){return/crios\//i.test(v)}function fR(v=$n()){return/iemobile/i.test(v)}function cR(v=$n()){return/android/i.test(v)}function dR(v=$n()){return/blackberry/i.test(v)}function pR(v=$n()){return/webos/i.test(v)}function jy(v=$n()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function cG(v=$n()){var t;return jy(v)&&!!((t=window.navigator)!=null&&t.standalone)}function dG(){return tB()&&document.documentMode===10}function vR(v=$n()){return jy(v)||cR(v)||pR(v)||dR(v)||/windows phone/i.test(v)||fR(v)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(v,t=[]){let i;switch(v){case"Browser":i=kS($n());break;case"Worker":i=`${kS($n())}-${v}`;break;default:i=v}const f=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Qu}/${f}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const f=C=>new Promise((o,E)=>{try{const e=t(C);o(e)}catch(e){E(e)}});f.onAbort=i,this.queue.push(f);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const f of this.queue)await f(t),f.onAbort&&i.push(f.onAbort)}catch(f){i.reverse();for(const y of i)try{y()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:f==null?void 0:f.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vG(v,t={}){return Qa(v,"GET","/v2/passwordPolicy",Qo(v,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG=6;class gG{constructor(t){var f;const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??mG,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((f=t.allowedNonAlphanumericCharacters)==null?void 0:f.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const f=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;f&&(i.meetsMinPasswordLength=t.length>=f),y&&(i.meetsMaxPasswordLength=t.length<=y)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let f;for(let y=0;y<t.length;y++)f=t.charAt(y),this.updatePasswordCharacterOptionsStatuses(i,f>="a"&&f<="z",f>="A"&&f<="Z",f>="0"&&f<="9",this.allowedNonAlphanumericCharacters.includes(f))}updatePasswordCharacterOptionsStatuses(t,i,f,y,C){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=f)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(t,i,f,y){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=f,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $S(this),this.idTokenSubscription=new $S(this),this.beforeStateQueue=new pG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=y.sdkClientVersion,this._persistenceManagerAvailable=new Promise(C=>this._resolvePersistenceManagerAvailable=C)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Fa(i)),this._initializationPromise=this.queue(async()=>{var f,y,C;if(!this._deleted&&(this.persistenceManager=await lu.create(this,t),(f=this._resolvePersistenceManagerAvailable)==null||f.call(this),!this._deleted)){if((y=this._popupRedirectResolver)!=null&&y._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((C=this.currentUser)==null?void 0:C.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await lv(this,{idToken:t}),f=await xr._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(f)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var C;if(Ys(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(E=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(E,E))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let f=i,y=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(C=this.redirectUser)==null?void 0:C._redirectEventId,E=f==null?void 0:f._redirectEventId,e=await this.tryRedirectSignIn(t);(!o||o===E)&&(e!=null&&e.user)&&(f=e.user,y=!0)}if(!f)return this.directlySetCurrentUser(null);if(!f._redirectEventId){if(y)try{await this.beforeStateQueue.runMiddleware(f)}catch(o){f=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return f?this.reloadAndSetCurrentUserOrClear(f):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===f._redirectEventId?this.directlySetCurrentUser(f):this.reloadAndSetCurrentUserOrClear(f)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await hv(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Zz()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ys(this.app))return Promise.reject(Ga(this));const i=t?Zi(t):null;return i&&Me(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Me(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ys(this.app)?Promise.reject(Ga(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ys(this.app)?Promise.reject(Ga(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await vG(this),i=new gG(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new sh("auth","Firebase",t())}onAuthStateChanged(t,i,f){return this.registerStateListener(this.authStateSubscription,t,i,f)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,f){return this.registerStateListener(this.idTokenSubscription,t,i,f)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const f=this.onAuthStateChanged(()=>{f(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),f={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(f.tenantId=this.tenantId),await fG(this,f)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,i){const f=await this.getOrInitRedirectPersistenceManager(i);return t===null?f.removeCurrentUser():f.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Fa(t)||this._popupRedirectResolver;Me(i,this,"argument-error"),this.redirectPersistenceManager=await lu.create(this,[Fa(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,f;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)==null?void 0:i._redirectEventId)===t?this._currentUser:((f=this.redirectUser)==null?void 0:f._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((i=this.currentUser)==null?void 0:i.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,f,y){if(this._deleted)return()=>{};const C=typeof i=="function"?i:i.next.bind(i);let o=!1;const E=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(E,this,"internal-error"),E.then(()=>{o||C(this.currentUser)}),typeof i=="function"){const e=t.addObserver(i,f,y);return()=>{o=!0,e()}}else{const e=t.addObserver(i);return()=>{o=!0,e()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=mR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var y;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((y=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:y.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const f=await this._getAppCheckToken();return f&&(t["X-Firebase-AppCheck"]=f),t}async _getAppCheckToken(){var i;if(Ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((i=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getToken());return t!=null&&t.error&&$z(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function uh(v){return Zi(v)}class $S{constructor(t){this.auth=t,this.observer=null,this.addObserver=oB(i=>this.observer=i)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $v={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yG(v){$v=v}function gR(v){return $v.loadJS(v)}function TG(){return $v.recaptchaEnterpriseScript}function EG(){return $v.gapiScript}function SG(v){return`__${v}${Math.floor(Math.random()*1e6)}`}class CG{constructor(){this.enterprise=new AG}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class AG{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const wG="recaptcha-enterprise",xR="NO_RECAPTCHA";class MG{constructor(t){this.type=wG,this.auth=uh(t)}async verify(t="verify",i=!1){async function f(C){if(!i){if(C.tenantId==null&&C._agentRecaptchaConfig!=null)return C._agentRecaptchaConfig.siteKey;if(C.tenantId!=null&&C._tenantRecaptchaConfigs[C.tenantId]!==void 0)return C._tenantRecaptchaConfigs[C.tenantId].siteKey}return new Promise(async(o,E)=>{nG(C,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(e=>{if(e.recaptchaKey===void 0)E(new Error("recaptcha Enterprise site key undefined"));else{const a=new iG(e);return C.tenantId==null?C._agentRecaptchaConfig=a:C._tenantRecaptchaConfigs[C.tenantId]=a,o(a.siteKey)}}).catch(e=>{E(e)})})}function y(C,o,E){const e=window.grecaptcha;HS(e)?e.enterprise.ready(()=>{e.enterprise.execute(C,{action:t}).then(a=>{o(a)}).catch(()=>{o(xR)})}):E(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CG().execute("siteKey",{action:"verify"}):new Promise((C,o)=>{f(this.auth).then(E=>{if(!i&&HS(window.grecaptcha))y(E,C,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let e=TG();e.length!==0&&(e+=E),gR(e).then(()=>{y(E,C,o)}).catch(a=>{o(a)})}}).catch(E=>{o(E)})})}}async function KS(v,t,i,f=!1,y=!1){const C=new MG(v);let o;if(y)o=xR;else try{o=await C.verify(i)}catch{o=await C.verify(i,!0)}const E={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in E){const e=E.phoneEnrollmentInfo.phoneNumber,a=E.phoneEnrollmentInfo.recaptchaToken;Object.assign(E,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:a,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in E){const e=E.phoneSignInInfo.recaptchaToken;Object.assign(E,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return E}return f?Object.assign(E,{captchaResp:o}):Object.assign(E,{captchaResponse:o}),Object.assign(E,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(E,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),E}async function fx(v,t,i,f,y){var C;if((C=v._getRecaptchaConfig())!=null&&C.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await KS(v,t,i,i==="getOobCode");return f(v,o)}else return f(v,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const E=await KS(v,t,i,i==="getOobCode");return f(v,E)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RG(v,t){const i=rh(v,"auth");if(i.isInitialized()){const y=i.getImmediate(),C=i.getOptions();if(_o(C,t??{}))return y;Cr(y,"already-initialized")}return i.initialize({options:t})}function PG(v,t){const i=(t==null?void 0:t.persistence)||[],f=(Array.isArray(i)?i:[i]).map(Fa);t!=null&&t.errorMap&&v._updateErrorMap(t.errorMap),v._initializeWithPersistence(f,t==null?void 0:t.popupRedirectResolver)}function bG(v,t,i){const f=uh(v);Me(/^https?:\/\//.test(t),f,"invalid-emulator-scheme");const y=!1,C=yR(t),{host:o,port:E}=IG(t),e=E===null?"":`:${E}`,a={url:`${C}//${o}${e}/`},x=Object.freeze({host:o,port:E,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:y})});if(!f._canInitEmulator){Me(f.config.emulator&&f.emulatorConfig,f,"emulator-config-failed"),Me(_o(a,f.config.emulator)&&_o(x,f.emulatorConfig),f,"emulator-config-failed");return}f.config.emulator=a,f.emulatorConfig=x,f.settings.appVerificationDisabledForTesting=!0,Ju(o)?(lw(`${C}//${o}${e}`),j8("Auth",!0)):LG()}function yR(v){const t=v.indexOf(":");return t<0?"":v.substr(0,t+1)}function IG(v){const t=yR(v),i=/(\/\/)?([^?#/]+)/.exec(v.substr(t.length));if(!i)return{host:"",port:null};const f=i[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(f);if(y){const C=y[1];return{host:C,port:jS(f.substr(C.length+1))}}else{const[C,o]=f.split(":");return{host:C,port:jS(o)}}}function jS(v){if(!v)return null;const t=Number(v);return isNaN(t)?null:t}function LG(){function v(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return La("not implemented")}_getIdTokenResponse(t){return La("not implemented")}_linkToIdToken(t,i){return La("not implemented")}_getReauthenticationResolver(t){return La("not implemented")}}async function FG(v,t){return Qa(v,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DG(v,t){return rd(v,"POST","/v1/accounts:signInWithPassword",Qo(v,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OG(v,t){return rd(v,"POST","/v1/accounts:signInWithEmailLink",Qo(v,t))}async function NG(v,t){return rd(v,"POST","/v1/accounts:signInWithEmailLink",Qo(v,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends Zy{constructor(t,i,f,y=null){super("password",f),this._email=t,this._password=i,this._tenantId=y}static _fromEmailAndPassword(t,i){return new Dc(t,i,"password")}static _fromEmailAndCode(t,i,f=null){return new Dc(t,i,"emailLink",f)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fx(t,i,"signInWithPassword",DG);case"emailLink":return OG(t,{email:this._email,oobCode:this._password});default:Cr(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const f={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fx(t,f,"signUpPassword",FG);case"emailLink":return NG(t,{idToken:i,email:this._email,oobCode:this._password});default:Cr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(v,t){return rd(v,"POST","/v1/accounts:signInWithIdp",Qo(v,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG="http://localhost";class Zl extends Zy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Zl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Cr("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:f,signInMethod:y,...C}=i;if(!f||!y)return null;const o=new Zl(f,y);return o.idToken=C.idToken||void 0,o.accessToken=C.accessToken||void 0,o.secret=C.secret,o.nonce=C.nonce,o.pendingToken=C.pendingToken||null,o}_getIdTokenResponse(t){const i=this.buildRequest();return hu(t,i)}_linkToIdToken(t,i){const f=this.buildRequest();return f.idToken=i,hu(t,f)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,hu(t,i)}buildRequest(){const t={requestUri:BG,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Jc(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VG(v){const t=Kf(jf(v)).link,i=t?Kf(jf(t)).deep_link_id:null,f=Kf(jf(v)).deep_link_id;return(f?Kf(jf(f)).link:null)||f||i||t||v}class Jy{constructor(t){const i=Kf(jf(t)),f=i.apiKey??null,y=i.oobCode??null,C=UG(i.mode??null);Me(f&&y&&C,"argument-error"),this.apiKey=f,this.operation=C,this.code=y,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=VG(t);try{return new Jy(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this.providerId=rf.PROVIDER_ID}static credential(t,i){return Dc._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const f=Jy.parseLink(i);return Me(f,"argument-error"),Dc._fromEmailAndCode(t,f.code,f.tenantId)}}rf.PROVIDER_ID="password";rf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad extends TR{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends ad{constructor(){super("facebook.com")}static credential(t){return Zl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return mo.credentialFromTaggedObject(t)}static credentialFromError(t){return mo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return mo.credential(t.oauthAccessToken)}catch{return null}}}mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends ad{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Zl._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return go.credentialFromTaggedObject(t)}static credentialFromError(t){return go.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:f}=t;if(!i&&!f)return null;try{return go.credential(i,f)}catch{return null}}}go.GOOGLE_SIGN_IN_METHOD="google.com";go.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends ad{constructor(){super("github.com")}static credential(t){return Zl._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xo.credentialFromTaggedObject(t)}static credentialFromError(t){return xo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xo.credential(t.oauthAccessToken)}catch{return null}}}xo.GITHUB_SIGN_IN_METHOD="github.com";xo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends ad{constructor(){super("twitter.com")}static credential(t,i){return Zl._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return yo.credentialFromTaggedObject(t)}static credentialFromError(t){return yo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:f}=t;if(!i||!f)return null;try{return yo.credential(i,f)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zG(v,t){return rd(v,"POST","/v1/accounts:signUp",Qo(v,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,f,y=!1){const C=await xr._fromIdTokenResponse(t,f,y),o=ZS(f);return new Jl({user:C,providerId:o,_tokenResponse:f,operationType:i})}static async _forOperation(t,i,f){await t._updateTokensIfNecessary(f,!0);const y=ZS(f);return new Jl({user:t,providerId:y,_tokenResponse:f,operationType:i})}}function ZS(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends Mr{constructor(t,i,f,y){super(i.code,i.message),this.operationType=f,this.user=y,Object.setPrototypeOf(this,uv.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:f}}static _fromErrorAndOperation(t,i,f,y){return new uv(t,i,f,y)}}function ER(v,t,i,f){return(t==="reauthenticate"?i._getReauthenticationResolver(v):i._getIdTokenResponse(v)).catch(C=>{throw C.code==="auth/multi-factor-auth-required"?uv._fromErrorAndOperation(v,C,t,f):C})}async function GG(v,t,i=!1){const f=await Xu(v,t._linkToIdToken(v.auth,await v.getIdToken()),i);return Jl._forOperation(v,"link",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WG(v,t,i=!1){const{auth:f}=v;if(Ys(f.app))return Promise.reject(Ga(f));const y="reauthenticate";try{const C=await Xu(v,ER(f,y,t,v),i);Me(C.idToken,f,"internal-error");const o=Ky(C.idToken);Me(o,f,"internal-error");const{sub:E}=o;return Me(v.uid===E,f,"user-mismatch"),Jl._forOperation(v,y,C)}catch(C){throw(C==null?void 0:C.code)==="auth/user-not-found"&&Cr(f,"user-mismatch"),C}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(v,t,i=!1){if(Ys(v.app))return Promise.reject(Ga(v));const f="signIn",y=await ER(v,f,t),C=await Jl._fromIdTokenResponse(v,f,y);return i||await v._updateCurrentUser(C.user),C}async function HG(v,t){return SR(uh(v),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(v){const t=uh(v);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function AR(v,t,i){if(Ys(v.app))return Promise.reject(Ga(v));const f=uh(v),o=await fx(f,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zG).catch(e=>{throw e.code==="auth/password-does-not-meet-requirements"&&CR(v),e}),E=await Jl._fromIdTokenResponse(f,"signIn",o);return await f._updateCurrentUser(E.user),E}function _G(v,t,i){return Ys(v.app)?Promise.reject(Ga(v)):HG(Zi(v),rf.credential(t,i)).catch(async f=>{throw f.code==="auth/password-does-not-meet-requirements"&&CR(v),f})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XG(v,t){return Qa(v,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(v,{displayName:t,photoURL:i}){if(t===void 0&&i===void 0)return;const f=Zi(v),C={idToken:await f.getIdToken(),displayName:t,photoUrl:i,returnSecureToken:!0},o=await Xu(f,XG(f.auth,C));f.displayName=o.displayName||null,f.photoURL=o.photoUrl||null;const E=f.providerData.find(({providerId:e})=>e==="password");E&&(E.displayName=f.displayName,E.photoURL=f.photoURL),await f._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YG(v,t){return Zi(v).setPersistence(t)}function kG(v,t,i,f){return Zi(v).onIdTokenChanged(t,i,f)}function $G(v,t,i){return Zi(v).beforeAuthStateChanged(t,i)}function KG(v,t,i,f){return Zi(v).onAuthStateChanged(t,i,f)}function jG(v){return Zi(v).signOut()}const fv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(fv,"1"),this.storage.removeItem(fv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZG=1e3,JG=10;class RR extends MR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const f=this.storage.getItem(i),y=this.localCache[i];f!==y&&t(i,y,f)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((o,E,e)=>{this.notifyListeners(o,e)});return}const f=t.key;i?this.detachListener():this.stopPolling();const y=()=>{const o=this.storage.getItem(f);!i&&this.localCache[f]===o||this.notifyListeners(f,o)},C=this.storage.getItem(f);dG()&&C!==t.newValue&&t.newValue!==t.oldValue?setTimeout(y,JG):y()}notifyListeners(t,i){this.localCache[t]=i;const f=this.listeners[t];if(f)for(const y of Array.from(f))y(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,f)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:f}),!0)})},ZG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}RR.type="LOCAL";const PR=RR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR extends MR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}bR.type="SESSION";const IR=bR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QG(v){return Promise.all(v.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(y=>y.isListeningto(t));if(i)return i;const f=new Kv(t);return this.receivers.push(f),f}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:f,eventType:y,data:C}=i.data,o=this.handlersMap[y];if(!(o!=null&&o.size))return;i.ports[0].postMessage({status:"ack",eventId:f,eventType:y});const E=Array.from(o).map(async a=>a(i.origin,C)),e=await QG(E);i.ports[0].postMessage({status:"done",eventId:f,eventType:y,response:e})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(v="",t=10){let i="";for(let f=0;f<t;f++)i+=Math.floor(Math.random()*10);return v+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qG{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,f=50){const y=typeof MessageChannel<"u"?new MessageChannel:null;if(!y)throw new Error("connection_unavailable");let C,o;return new Promise((E,e)=>{const a=Qy("",20);y.port1.start();const x=setTimeout(()=>{e(new Error("unsupported_event"))},f);o={messageChannel:y,onMessage(u){const r=u;if(r.data.eventId===a)switch(r.data.status){case"ack":clearTimeout(x),C=setTimeout(()=>{e(new Error("timeout"))},3e3);break;case"done":clearTimeout(C),E(r.data.response);break;default:clearTimeout(x),clearTimeout(C),e(new Error("invalid_response"));break}}},this.handlers.add(o),y.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:a,data:i},[y.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function tW(v){Qr().location.href=v}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function eW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iW(){var v;return((v=navigator==null?void 0:navigator.serviceWorker)==null?void 0:v.controller)||null}function nW(){return LR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="firebaseLocalStorageDb",sW=1,cv="firebaseLocalStorage",DR="fbase_key";class od{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function jv(v,t){return v.transaction([cv],t?"readwrite":"readonly").objectStore(cv)}function rW(){const v=indexedDB.deleteDatabase(FR);return new od(v).toPromise()}function cx(){const v=indexedDB.open(FR,sW);return new Promise((t,i)=>{v.addEventListener("error",()=>{i(v.error)}),v.addEventListener("upgradeneeded",()=>{const f=v.result;try{f.createObjectStore(cv,{keyPath:DR})}catch(y){i(y)}}),v.addEventListener("success",async()=>{const f=v.result;f.objectStoreNames.contains(cv)?t(f):(f.close(),await rW(),t(await cx()))})})}async function JS(v,t,i){const f=jv(v,!0).put({[DR]:t,value:i});return new od(f).toPromise()}async function aW(v,t){const i=jv(v,!1).get(t),f=await new od(i).toPromise();return f===void 0?null:f.value}function QS(v,t){const i=jv(v,!0).delete(t);return new od(i).toPromise()}const oW=800,lW=3;class OR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cx(),this.db)}async _withRetries(t){let i=0;for(;;)try{const f=await this._openDb();return await t(f)}catch(f){if(i++>lW)throw f;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kv._getInstance(nW()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var i,f;if(this.activeServiceWorker=await eW(),!this.activeServiceWorker)return;this.sender=new qG(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(i=t[0])!=null&&i.fulfilled&&(f=t[0])!=null&&f.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||iW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await cx();return await JS(t,fv,"1"),await QS(t,fv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(f=>JS(f,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(f=>aW(f,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>QS(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(y=>{const C=jv(y,!1).getAll();return new od(C).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],f=new Set;if(t.length!==0)for(const{fbase_key:y,value:C}of t)f.add(y),JSON.stringify(this.localCache[y])!==JSON.stringify(C)&&(this.notifyListeners(y,C),i.push(y));for(const y of Object.keys(this.localCache))this.localCache[y]&&!f.has(y)&&(this.notifyListeners(y,null),i.push(y));return i}notifyListeners(t,i){this.localCache[t]=i;const f=this.listeners[t];if(f)for(const y of Array.from(f))y(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OR.type="LOCAL";const hW=OR;new sd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(v,t){return t?Fa(t):(Me(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends Zy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return hu(t,this._buildIdpRequest())}_linkToIdToken(t,i){return hu(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return hu(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function fW(v){return SR(v.auth,new qy(v),v.bypassAuthState)}function cW(v){const{auth:t,user:i}=v;return Me(i,t,"internal-error"),WG(i,new qy(v),v.bypassAuthState)}async function dW(v){const{auth:t,user:i}=v;return Me(i,t,"internal-error"),GG(i,new qy(v),v.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(t,i,f,y,C=!1){this.auth=t,this.resolver=f,this.user=y,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(f){this.reject(f)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:f,postBody:y,tenantId:C,error:o,type:E}=t;if(o){this.reject(o);return}const e={auth:this.auth,requestUri:i,sessionId:f,tenantId:C||void 0,postBody:y||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(E)(e))}catch(a){this.reject(a)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return fW;case"linkViaPopup":case"linkViaRedirect":return dW;case"reauthViaPopup":case"reauthViaRedirect":return cW;default:Cr(this.auth,"internal-error")}}resolve(t){Ka(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ka(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW=new sd(2e3,1e4);class Qh extends NR{constructor(t,i,f,y,C){super(t,i,y,C),this.provider=f,this.authWindow=null,this.pollId=null,Qh.currentPopupAction&&Qh.currentPopupAction.cancel(),Qh.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Me(t,this.auth,"internal-error"),t}async onExecution(){Ka(this.filter.length===1,"Popup operations only handle one event");const t=Qy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qh.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,f;if((f=(i=this.authWindow)==null?void 0:i.window)!=null&&f.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,pW.get())};t()}}Qh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW="pendingRedirect",bp=new Map;class mW extends NR{constructor(t,i,f=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,f),this.eventId=null}async execute(){let t=bp.get(this.auth._key());if(!t){try{const f=await gW(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(f)}catch(i){t=()=>Promise.reject(i)}bp.set(this.auth._key(),t)}return this.bypassAuthState||bp.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gW(v,t){const i=TW(t),f=yW(v);if(!await f._isAvailable())return!1;const y=await f._get(i)==="true";return await f._remove(i),y}function xW(v,t){bp.set(v._key(),t)}function yW(v){return Fa(v._redirectPersistence)}function TW(v){return Pp(vW,v.config.apiKey,v.name)}async function EW(v,t,i=!1){if(Ys(v.app))return Promise.reject(Ga(v));const f=uh(v),y=uW(f,t),o=await new mW(f,y,i).execute();return o&&!i&&(delete o.user._redirectEventId,await f._persistUserIfCurrent(o.user),await f._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW=600*1e3;class CW{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(f=>{this.isEventForConsumer(t,f)&&(i=!0,this.sendToConsumer(t,f),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!AW(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var f;if(t.error&&!BR(t)){const y=((f=t.error.code)==null?void 0:f.split("auth/")[1])||"internal-error";i.onError(Jr(this.auth,y))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const f=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&f}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=SW&&this.cachedEventUids.clear(),this.cachedEventUids.has(qS(t))}saveEventToCache(t){this.cachedEventUids.add(qS(t)),this.lastProcessedEventTime=Date.now()}}function qS(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(t=>t).join("-")}function BR({type:v,error:t}){return v==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function AW(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BR(v);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wW(v,t={}){return Qa(v,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RW=/^https?/;async function PW(v){if(v.config.emulator)return;const{authorizedDomains:t}=await wW(v);for(const i of t)try{if(bW(i))return}catch{}Cr(v,"unauthorized-domain")}function bW(v){const t=hx(),{protocol:i,hostname:f}=new URL(t);if(v.startsWith("chrome-extension://")){const o=new URL(v);return o.hostname===""&&f===""?i==="chrome-extension:"&&v.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&o.hostname===f}if(!RW.test(i))return!1;if(MW.test(v))return f===v;const y=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(f)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW=new sd(3e4,6e4);function t2(){const v=Qr().___jsl;if(v!=null&&v.H){for(const t of Object.keys(v.H))if(v.H[t].r=v.H[t].r||[],v.H[t].L=v.H[t].L||[],v.H[t].r=[...v.H[t].L],v.CP)for(let i=0;i<v.CP.length;i++)v.CP[i]=null}}function LW(v){return new Promise((t,i)=>{var y,C,o;function f(){t2(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{t2(),i(Jr(v,"network-request-failed"))},timeout:IW.get()})}if((C=(y=Qr().gapi)==null?void 0:y.iframes)!=null&&C.Iframe)t(gapi.iframes.getContext());else if((o=Qr().gapi)!=null&&o.load)f();else{const E=SG("iframefcb");return Qr()[E]=()=>{gapi.load?f():i(Jr(v,"network-request-failed"))},gR(`${EG()}?onload=${E}`).catch(e=>i(e))}}).catch(t=>{throw Ip=null,t})}let Ip=null;function FW(v){return Ip=Ip||LW(v),Ip}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW=new sd(5e3,15e3),OW="__/auth/iframe",NW="emulator/auth/iframe",BW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VW(v){const t=v.config;Me(t.authDomain,v,"auth-domain-config-required");const i=t.emulator?$y(t,NW):`https://${v.config.authDomain}/${OW}`,f={apiKey:t.apiKey,appName:v.name,v:Qu},y=UW.get(v.config.apiHost);y&&(f.eid=y);const C=v._getFrameworks();return C.length&&(f.fw=C.join(",")),`${i}?${Jc(f).slice(1)}`}async function zW(v){const t=await FW(v),i=Qr().gapi;return Me(i,v,"internal-error"),t.open({where:document.body,url:VW(v),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BW,dontclear:!0},f=>new Promise(async(y,C)=>{await f.restyle({setHideOnLeave:!1});const o=Jr(v,"network-request-failed"),E=Qr().setTimeout(()=>{C(o)},DW.get());function e(){Qr().clearTimeout(E),y(f)}f.ping(e).then(e,()=>{C(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WW=500,HW=600,_W="_blank",XW="http://localhost";class e2{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YW(v,t,i,f=WW,y=HW){const C=Math.max((window.screen.availHeight-y)/2,0).toString(),o=Math.max((window.screen.availWidth-f)/2,0).toString();let E="";const e={...GW,width:f.toString(),height:y.toString(),top:C,left:o},a=$n().toLowerCase();i&&(E=uR(a)?_W:i),lR(a)&&(t=t||XW,e.scrollbars="yes");const x=Object.entries(e).reduce((r,[h,n])=>`${r}${h}=${n},`,"");if(cG(a)&&E!=="_self")return kW(t||"",E),new e2(null);const u=window.open(t||"",E,x);Me(u,v,"popup-blocked");try{u.focus()}catch{}return new e2(u)}function kW(v,t){const i=document.createElement("a");i.href=v,i.target=t;const f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(f)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $W="__/auth/handler",KW="emulator/auth/handler",jW=encodeURIComponent("fac");async function i2(v,t,i,f,y,C){Me(v.config.authDomain,v,"auth-domain-config-required"),Me(v.config.apiKey,v,"invalid-api-key");const o={apiKey:v.config.apiKey,appName:v.name,authType:i,redirectUrl:f,v:Qu,eventId:y};if(t instanceof TR){t.setDefaultLanguage(v.languageCode),o.providerId=t.providerId||"",aB(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[x,u]of Object.entries({}))o[x]=u}if(t instanceof ad){const x=t.getScopes().filter(u=>u!=="");x.length>0&&(o.scopes=x.join(","))}v.tenantId&&(o.tid=v.tenantId);const E=o;for(const x of Object.keys(E))E[x]===void 0&&delete E[x];const e=await v._getAppCheckToken(),a=e?`#${jW}=${encodeURIComponent(e)}`:"";return`${ZW(v)}?${Jc(E).slice(1)}${a}`}function ZW({config:v}){return v.emulator?$y(v,KW):`https://${v.authDomain}/${$W}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="webStorageSupport";class JW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IR,this._completeRedirectFn=EW,this._overrideRedirectResult=xW}async _openPopup(t,i,f,y){var o;Ka((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const C=await i2(t,i,f,hx(),y);return YW(t,C,Qy())}async _openRedirect(t,i,f,y){await this._originValidation(t);const C=await i2(t,i,f,hx(),y);return tW(C),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:y,promise:C}=this.eventManagers[i];return y?Promise.resolve(y):(Ka(C,"If manager is not set, promise should be"),C)}const f=this.initAndGetManager(t);return this.eventManagers[i]={promise:f},f.catch(()=>{delete this.eventManagers[i]}),f}async initAndGetManager(t){const i=await zW(t),f=new CW(t);return i.register("authEvent",y=>(Me(y==null?void 0:y.authEvent,t,"invalid-auth-event"),{status:f.onEvent(y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:f},this.iframes[t._key()]=i,f}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(d0,{type:d0},y=>{var o;const C=(o=y==null?void 0:y[0])==null?void 0:o[d0];C!==void 0&&i(!!C),Cr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=PW(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return vR()||hR()||jy()}}const QW=JW;var n2="@firebase/auth",s2="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(f=>{t((f==null?void 0:f.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eH(v){ea(new Er("auth",(t,{options:i})=>{const f=t.getProvider("app").getImmediate(),y=t.getProvider("heartbeat"),C=t.getProvider("app-check-internal"),{apiKey:o,authDomain:E}=f.options;Me(o&&!o.includes(":"),"invalid-api-key",{appName:f.name});const e={apiKey:o,authDomain:E,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mR(v)},a=new xG(f,y,C,e);return PG(a,i),a},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,f)=>{t.getProvider("auth-internal").initialize()})),ea(new Er("auth-internal",t=>{const i=uh(t.getProvider("auth").getImmediate());return(f=>new qW(f))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qs(n2,s2,tH(v)),Qs(n2,s2,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH=300,nH=ow("authIdTokenMaxAge")||iH;let r2=null;const sH=v=>async t=>{const i=t&&await t.getIdTokenResult(),f=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(f&&f>nH)return;const y=i==null?void 0:i.token;r2!==y&&(r2=y,await fetch(v,{method:y?"POST":"DELETE",headers:y?{Authorization:`Bearer ${y}`}:{}}))};function rH(v=mw()){const t=rh(v,"auth");if(t.isInitialized())return t.getImmediate();const i=RG(v,{popupRedirectResolver:QW,persistence:[hW,PR,IR]}),f=ow("authTokenSyncURL");if(f&&typeof isSecureContext=="boolean"&&isSecureContext){const C=new URL(f,location.origin);if(location.origin===C.origin){const o=sH(C.toString());$G(i,o,()=>o(i.currentUser)),kG(i,E=>o(E))}}const y=Y8("auth");return y&&bG(i,`http://${y}`),i}function aH(){var v;return((v=document.getElementsByTagName("head"))==null?void 0:v[0])??document}yG({loadJS(v){return new Promise((t,i)=>{const f=document.createElement("script");f.setAttribute("src",v),f.onload=t,f.onerror=y=>{const C=Jr("internal-error");C.customData=y,i(C)},f.type="text/javascript",f.charset="UTF-8",aH().appendChild(f)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eH("Browser");const UR="@firebase/installations",t1="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=1e4,zR=`w:${t1}`,GR="FIS_v2",oH="https://firebaseinstallations.googleapis.com/v1",lH=3600*1e3,hH="installations",uH="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ql=new sh(hH,uH,fH);function WR(v){return v instanceof Mr&&v.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR({projectId:v}){return`${oH}/projects/${v}/installations`}function _R(v){return{token:v.token,requestStatus:2,expiresIn:dH(v.expiresIn),creationTime:Date.now()}}async function XR(v,t){const f=(await t.json()).error;return Ql.create("request-failed",{requestName:v,serverCode:f.code,serverMessage:f.message,serverStatus:f.status})}function YR({apiKey:v}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":v})}function cH(v,{refreshToken:t}){const i=YR(v);return i.append("Authorization",pH(t)),i}async function kR(v){const t=await v();return t.status>=500&&t.status<600?v():t}function dH(v){return Number(v.replace("s","000"))}function pH(v){return`${GR} ${v}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vH({appConfig:v,heartbeatServiceProvider:t},{fid:i}){const f=HR(v),y=YR(v),C=t.getImmediate({optional:!0});if(C){const a=await C.getHeartbeatsHeader();a&&y.append("x-firebase-client",a)}const o={fid:i,authVersion:GR,appId:v.appId,sdkVersion:zR},E={method:"POST",headers:y,body:JSON.stringify(o)},e=await kR(()=>fetch(f,E));if(e.ok){const a=await e.json();return{fid:a.fid||i,registrationStatus:2,refreshToken:a.refreshToken,authToken:_R(a.authToken)}}else throw await XR("Create Installation",e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(v){return new Promise(t=>{setTimeout(t,v)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(v){return btoa(String.fromCharCode(...v)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH=/^[cdef][\w-]{21}$/,dx="";function xH(){try{const v=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(v),v[0]=112+v[0]%16;const i=yH(v);return gH.test(i)?i:dx}catch{return dx}}function yH(v){return mH(v).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(v){return`${v.appName}!${v.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new Map;function jR(v,t){const i=Zv(v);ZR(i,t),TH(i,t)}function ZR(v,t){const i=KR.get(v);if(i)for(const f of i)f(t)}function TH(v,t){const i=EH();i&&i.postMessage({key:v,fid:t}),SH()}let Rl=null;function EH(){return!Rl&&"BroadcastChannel"in self&&(Rl=new BroadcastChannel("[Firebase] FID Change"),Rl.onmessage=v=>{ZR(v.data.key,v.data.fid)}),Rl}function SH(){KR.size===0&&Rl&&(Rl.close(),Rl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH="firebase-installations-database",AH=1,ql="firebase-installations-store";let p0=null;function e1(){return p0||(p0=pw(CH,AH,{upgrade:(v,t)=>{switch(t){case 0:v.createObjectStore(ql)}}})),p0}async function dv(v,t){const i=Zv(v),y=(await e1()).transaction(ql,"readwrite"),C=y.objectStore(ql),o=await C.get(i);return await C.put(t,i),await y.done,(!o||o.fid!==t.fid)&&jR(v,t.fid),t}async function JR(v){const t=Zv(v),f=(await e1()).transaction(ql,"readwrite");await f.objectStore(ql).delete(t),await f.done}async function Jv(v,t){const i=Zv(v),y=(await e1()).transaction(ql,"readwrite"),C=y.objectStore(ql),o=await C.get(i),E=t(o);return E===void 0?await C.delete(i):await C.put(E,i),await y.done,E&&(!o||o.fid!==E.fid)&&jR(v,E.fid),E}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(v){let t;const i=await Jv(v.appConfig,f=>{const y=wH(f),C=MH(v,y);return t=C.registrationPromise,C.installationEntry});return i.fid===dx?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}function wH(v){const t=v||{fid:xH(),registrationStatus:0};return QR(t)}function MH(v,t){if(t.registrationStatus===0){if(!navigator.onLine){const y=Promise.reject(Ql.create("app-offline"));return{installationEntry:t,registrationPromise:y}}const i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},f=RH(v,i);return{installationEntry:i,registrationPromise:f}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:PH(v)}:{installationEntry:t}}async function RH(v,t){try{const i=await vH(v,t);return dv(v.appConfig,i)}catch(i){throw WR(i)&&i.customData.serverCode===409?await JR(v.appConfig):await dv(v.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function PH(v){let t=await a2(v.appConfig);for(;t.registrationStatus===1;)await $R(100),t=await a2(v.appConfig);if(t.registrationStatus===0){const{installationEntry:i,registrationPromise:f}=await i1(v);return f||i}return t}function a2(v){return Jv(v,t=>{if(!t)throw Ql.create("installation-not-found");return QR(t)})}function QR(v){return bH(v)?{fid:v.fid,registrationStatus:0}:v}function bH(v){return v.registrationStatus===1&&v.registrationTime+VR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IH({appConfig:v,heartbeatServiceProvider:t},i){const f=LH(v,i),y=cH(v,i),C=t.getImmediate({optional:!0});if(C){const a=await C.getHeartbeatsHeader();a&&y.append("x-firebase-client",a)}const o={installation:{sdkVersion:zR,appId:v.appId}},E={method:"POST",headers:y,body:JSON.stringify(o)},e=await kR(()=>fetch(f,E));if(e.ok){const a=await e.json();return _R(a)}else throw await XR("Generate Auth Token",e)}function LH(v,{fid:t}){return`${HR(v)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(v,t=!1){let i;const f=await Jv(v.appConfig,C=>{if(!qR(C))throw Ql.create("not-registered");const o=C.authToken;if(!t&&OH(o))return C;if(o.requestStatus===1)return i=FH(v,t),C;{if(!navigator.onLine)throw Ql.create("app-offline");const E=BH(C);return i=DH(v,E),E}});return i?await i:f.authToken}async function FH(v,t){let i=await o2(v.appConfig);for(;i.authToken.requestStatus===1;)await $R(100),i=await o2(v.appConfig);const f=i.authToken;return f.requestStatus===0?n1(v,t):f}function o2(v){return Jv(v,t=>{if(!qR(t))throw Ql.create("not-registered");const i=t.authToken;return UH(i)?{...t,authToken:{requestStatus:0}}:t})}async function DH(v,t){try{const i=await IH(v,t),f={...t,authToken:i};return await dv(v.appConfig,f),i}catch(i){if(WR(i)&&(i.customData.serverCode===401||i.customData.serverCode===404))await JR(v.appConfig);else{const f={...t,authToken:{requestStatus:0}};await dv(v.appConfig,f)}throw i}}function qR(v){return v!==void 0&&v.registrationStatus===2}function OH(v){return v.requestStatus===2&&!NH(v)}function NH(v){const t=Date.now();return t<v.creationTime||v.creationTime+v.expiresIn<t+lH}function BH(v){const t={requestStatus:1,requestTime:Date.now()};return{...v,authToken:t}}function UH(v){return v.requestStatus===1&&v.requestTime+VR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VH(v){const t=v,{installationEntry:i,registrationPromise:f}=await i1(t);return f?f.catch(console.error):n1(t).catch(console.error),i.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zH(v,t=!1){const i=v;return await GH(i),(await n1(i,t)).token}async function GH(v){const{registrationPromise:t}=await i1(v);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WH(v){if(!v||!v.options)throw v0("App Configuration");if(!v.name)throw v0("App Name");const t=["projectId","apiKey","appId"];for(const i of t)if(!v.options[i])throw v0(i);return{appName:v.name,projectId:v.options.projectId,apiKey:v.options.apiKey,appId:v.options.appId}}function v0(v){return Ql.create("missing-app-config-values",{valueName:v})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="installations",HH="installations-internal",_H=v=>{const t=v.getProvider("app").getImmediate(),i=WH(t),f=rh(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:f,_delete:()=>Promise.resolve()}},XH=v=>{const t=v.getProvider("app").getImmediate(),i=rh(t,tP).getImmediate();return{getId:()=>VH(i),getToken:y=>zH(i,y)}};function YH(){ea(new Er(tP,_H,"PUBLIC")),ea(new Er(HH,XH,"PRIVATE"))}YH();Qs(UR,t1);Qs(UR,t1,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="analytics",kH="firebase_id",$H="origin",KH=60*1e3,jH="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",s1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new Lv("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Is=new sh("analytics","Analytics",ZH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(v){if(!v.startsWith(s1)){const t=Is.create("invalid-gtag-resource",{gtagURL:v});return qn.warn(t.message),""}return v}function eP(v){return Promise.all(v.map(t=>t.catch(i=>i)))}function QH(v,t){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(v,t)),i}function qH(v,t){const i=QH("firebase-js-sdk-policy",{createScriptURL:JH}),f=document.createElement("script"),y=`${s1}?l=${v}&id=${t}`;f.src=i?i==null?void 0:i.createScriptURL(y):y,f.async=!0,document.head.appendChild(f)}function t_(v){let t=[];return Array.isArray(window[v])?t=window[v]:window[v]=t,t}async function e_(v,t,i,f,y,C){const o=f[y];try{if(o)await t[o];else{const e=(await eP(i)).find(a=>a.measurementId===y);e&&await t[e.appId]}}catch(E){qn.error(E)}v("config",y,C)}async function i_(v,t,i,f,y){try{let C=[];if(y&&y.send_to){let o=y.send_to;Array.isArray(o)||(o=[o]);const E=await eP(i);for(const e of o){const a=E.find(u=>u.measurementId===e),x=a&&t[a.appId];if(x)C.push(x);else{C=[];break}}}C.length===0&&(C=Object.values(t)),await Promise.all(C),v("event",f,y||{})}catch(C){qn.error(C)}}function n_(v,t,i,f){async function y(C,...o){try{if(C==="event"){const[E,e]=o;await i_(v,t,i,E,e)}else if(C==="config"){const[E,e]=o;await e_(v,t,i,f,E,e)}else if(C==="consent"){const[E,e]=o;v("consent",E,e)}else if(C==="get"){const[E,e,a]=o;v("get",E,e,a)}else if(C==="set"){const[E]=o;v("set",E)}else v(C,...o)}catch(E){qn.error(E)}}return y}function s_(v,t,i,f,y){let C=function(...o){window[f].push(arguments)};return window[y]&&typeof window[y]=="function"&&(C=window[y]),window[y]=n_(C,v,t,i),{gtagCore:C,wrappedGtag:window[y]}}function r_(v){const t=window.document.getElementsByTagName("script");for(const i of Object.values(t))if(i.src&&i.src.includes(s1)&&i.src.includes(v))return i;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=30,o_=1e3;class l_{constructor(t={},i=o_){this.throttleMetadata=t,this.intervalMillis=i}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,i){this.throttleMetadata[t]=i}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const iP=new l_;function h_(v){return new Headers({Accept:"application/json","x-goog-api-key":v})}async function u_(v){var o;const{appId:t,apiKey:i}=v,f={method:"GET",headers:h_(i)},y=jH.replace("{app-id}",t),C=await fetch(y,f);if(C.status!==200&&C.status!==304){let E="";try{const e=await C.json();(o=e.error)!=null&&o.message&&(E=e.error.message)}catch{}throw Is.create("config-fetch-failed",{httpStatus:C.status,responseMessage:E})}return C.json()}async function f_(v,t=iP,i){const{appId:f,apiKey:y,measurementId:C}=v.options;if(!f)throw Is.create("no-app-id");if(!y){if(C)return{measurementId:C,appId:f};throw Is.create("no-api-key")}const o=t.getThrottleMetadata(f)||{backoffCount:0,throttleEndTimeMillis:Date.now()},E=new p_;return setTimeout(async()=>{E.abort()},KH),nP({appId:f,apiKey:y,measurementId:C},o,E,t)}async function nP(v,{throttleEndTimeMillis:t,backoffCount:i},f,y=iP){var E;const{appId:C,measurementId:o}=v;try{await c_(f,t)}catch(e){if(o)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e==null?void 0:e.message}]`),{appId:C,measurementId:o};throw e}try{const e=await u_(v);return y.deleteThrottleMetadata(C),e}catch(e){const a=e;if(!d_(a)){if(y.deleteThrottleMetadata(C),o)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:C,measurementId:o};throw e}const x=Number((E=a==null?void 0:a.customData)==null?void 0:E.httpStatus)===503?FE(i,y.intervalMillis,a_):FE(i,y.intervalMillis),u={throttleEndTimeMillis:Date.now()+x,backoffCount:i+1};return y.setThrottleMetadata(C,u),qn.debug(`Calling attemptFetch again in ${x} millis`),nP(v,u,f,y)}}function c_(v,t){return new Promise((i,f)=>{const y=Math.max(t-Date.now(),0),C=setTimeout(i,y);v.addEventListener(()=>{clearTimeout(C),f(Is.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function d_(v){if(!(v instanceof Mr)||!v.customData)return!1;const t=Number(v.customData.httpStatus);return t===429||t===500||t===503||t===504}class p_{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function v_(v,t,i,f,y){if(y&&y.global){v("event",i,f);return}else{const C=await t,o={...f,send_to:C};v("event",i,o)}}async function m_(v,t,i,f){if(f&&f.global){const y={};for(const C of Object.keys(i))y[`user_properties.${C}`]=i[C];return v("set",y),Promise.resolve()}else{const y=await t;v("config",y,{update:!0,user_properties:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g_(){if(uw())try{await fw()}catch(v){return qn.warn(Is.create("indexeddb-unavailable",{errorInfo:v==null?void 0:v.toString()}).message),!1}else return qn.warn(Is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function x_(v,t,i,f,y,C,o){const E=f_(v);E.then(r=>{i[r.measurementId]=r.appId,v.options.measurementId&&r.measurementId!==v.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${v.options.measurementId}) does not match the measurement ID fetched from the server (${r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(r=>qn.error(r)),t.push(E);const e=g_().then(r=>{if(r)return f.getId()}),[a,x]=await Promise.all([E,e]);r_(C)||qH(C,a.measurementId),y("js",new Date);const u=(o==null?void 0:o.config)??{};return u[$H]="firebase",u.update=!0,x!=null&&(u[kH]=x),y("config",a.measurementId,u),a.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(t){this.app=t}_delete(){return delete uu[this.app.options.appId],Promise.resolve()}}let uu={},l2=[];const h2={};let m0="dataLayer",T_="gtag",u2,r1,f2=!1;function E_(){const v=[];if(hw()&&v.push("This is a browser extension environment."),iB()||v.push("Cookies are not available."),v.length>0){const t=v.map((f,y)=>`(${y+1}) ${f}`).join(" "),i=Is.create("invalid-analytics-context",{errorInfo:t});qn.warn(i.message)}}function S_(v,t,i){E_();const f=v.options.appId;if(!f)throw Is.create("no-app-id");if(!v.options.apiKey)if(v.options.measurementId)qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${v.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Is.create("no-api-key");if(uu[f]!=null)throw Is.create("already-exists",{id:f});if(!f2){t_(m0);const{wrappedGtag:C,gtagCore:o}=s_(uu,l2,h2,m0,T_);r1=C,u2=o,f2=!0}return uu[f]=x_(v,l2,h2,t,u2,m0,i),new y_(v)}function C_(v=mw()){v=Zi(v);const t=rh(v,pv);return t.isInitialized()?t.getImmediate():A_(v)}function A_(v,t={}){const i=rh(v,pv);if(i.isInitialized()){const y=i.getImmediate();if(_o(t,i.getOptions()))return y;throw Is.create("already-initialized")}return i.initialize({options:t})}function w_(v,t,i){v=Zi(v),m_(r1,uu[v.app.options.appId],t,i).catch(f=>qn.error(f))}function M_(v,t,i,f){v=Zi(v),v_(r1,uu[v.app.options.appId],t,i,f).catch(y=>qn.error(y))}const c2="@firebase/analytics",d2="0.10.19";function R_(){ea(new Er(pv,(t,{options:i})=>{const f=t.getProvider("app").getImmediate(),y=t.getProvider("installations-internal").getImmediate();return S_(f,y,i)},"PUBLIC")),ea(new Er("analytics-internal",v,"PRIVATE")),Qs(c2,d2),Qs(c2,d2,"esm2020");function v(t){try{const i=t.getProvider(pv).getImmediate();return{logEvent:(f,y,C)=>M_(i,f,y,C),setUserProperties:(f,y)=>w_(i,f,y)}}catch(i){throw Is.create("interop-component-reg-failed",{reason:i})}}}R_();const P_={apiKey:"AIzaSyA6LqmoYS8tHiBqr3n9TjleBWegKhmD5T0",authDomain:"bobbys-craps.firebaseapp.com",projectId:"bobbys-craps",storageBucket:"bobbys-craps.firebasestorage.app",messagingSenderId:"606884201685",appId:"1:606884201685:web:174d6b394f015cf680ce5c",measurementId:"G-R9TPBJ5T4X"},a1=vw(P_);typeof window<"u"&&C_(a1);const fh=Pz(a1,{experimentalForceLongPolling:!0}),th=rH(a1);typeof window<"u"&&YG(th,PR).catch(v=>{console.error("Auth persistence error:",v)});const ch="users";async function sP(v){try{return await JM(v)}catch(t){throw console.error("leaderboard: fatal doc fetch error",t),t}}async function b_(v,t,i){console.log("leaderboard: signupUser called",{username:v,nickname:i});const f=v.toLowerCase(),y=`${f}@craps.local`;try{const o=(await AR(th,y,t)).user;console.log("leaderboard: auth user created",o.uid),await wR(o,{displayName:i});const E={username:v,nickname:i,balance:300,highestBalance:300,largestWin:0,largestLoss:0,resetCount:0,lastUpdate:YM()};return console.log("leaderboard: setting firestore doc",f),await QM(nd(fh,ch,f),E),{...E,uid:o.uid}}catch(C){throw console.error("leaderboard: signup error:",C),C}}async function I_(v,t){console.log("leaderboard: loginUser called",v);const i=v.toLowerCase(),f=`${i}@craps.local`;try{const C=(await _G(th,f,t)).user;console.log("leaderboard: auth login successful",C.uid),console.log("leaderboard: fetching firestore doc",i);const o=await sP(nd(fh,ch,i));return o.exists()?(console.log("leaderboard: firestore doc found"),{...o.data(),uid:C.uid}):(console.log("leaderboard: firestore doc NOT found, using fallback"),{username:v,nickname:C.displayName||v,balance:300,uid:C.uid})}catch(y){throw console.error("leaderboard: login error:",y),y}}async function L_(){return await jG(th)}function F_(v){return KG(th,async t=>{if(t){const i=t.email.split("@")[0];console.log("leaderboard: auth state change - logged in",i);const f=await sP(nd(fh,ch,i));f.exists()?v({...f.data(),uid:t.uid}):v({username:i,nickname:t.displayName||i,balance:300,uid:t.uid})}else console.log("leaderboard: auth state change - logged out"),v(null)})}async function D_(){console.log("leaderboard: fetchGlobalUsers called");const v=KM(VM(fh,ch),jM("balance","desc"),Gz(100));try{const i=(await _z(v)).docs.map(f=>{var y,C,o;return{id:f.id,...f.data(),lastUpdate:((o=(C=(y=f.data().lastUpdate)==null?void 0:y.toDate)==null?void 0:C.call(y))==null?void 0:o.toISOString())||new Date().toISOString()}});return console.log(`leaderboard: fetched ${i.length} users`),i}catch(t){throw console.error("leaderboard: error fetching users:",t),t}}function O_(v){const t=KM(VM(fh,ch),jM("balance","desc"));let i=0;const f=3,y=()=>Xz(t,C=>{i=0;const o=C.docs.map(E=>{var e,a,x;return{id:E.id,...E.data(),lastUpdate:((x=(a=(e=E.data().lastUpdate)==null?void 0:e.toDate)==null?void 0:a.call(e))==null?void 0:x.toISOString())||new Date().toISOString()}});console.log(`Leaderboard synced: ${o.length} users found.`),v(o)},C=>{if(console.error("Leaderboard subscription error:",C),i<f){i++;const o=Math.pow(2,i)*1e3;console.warn(`Attempting to reconnect leaderboard (attempt ${i}/${f}) in ${o}ms...`),setTimeout(y,o)}});return y()}async function Lp(v){if(!v||v.username==="Guest")return;const t=v.username.toLowerCase(),i=nd(fh,ch,t),f={username:v.username,nickname:v.nickname||v.username,balance:v.balance||300,highestBalance:v.highestBalance||0,largestWin:v.largestWin||0,largestLoss:v.largestLoss||0,resetCount:v.resetCount||0,lastUpdate:YM()};try{await QM(i,f,{merge:!0})}catch(y){console.error("Error updating global user:",y)}}async function g0(v){if(!(!v||v.length===0)){console.log(`Checking ${v.length} local users for Firebase sync...`);for(const t of v)if(t.username!=="Guest")try{const i=t.username.toLowerCase(),f=nd(fh,ch,i);if(!(await JM(f)).exists()){if(console.log(`Migrating user ${t.username} to Firebase...`),t.password)try{const C=`${i}@craps.local`;await AR(th,C,t.password),await wR(th.currentUser,{displayName:t.nickname||t.username}),console.log(`Auth account created for ${t.username}`)}catch(C){C.code!=="auth/email-already-in-use"&&console.warn(`Auth creation failed for ${t.username}:`,C.message)}await Lp(t)}}catch(i){console.error(`Error syncing user ${t.username}:`,i)}console.log("Local users sync check complete.")}}var N_=Jt('<div class="fixed inset-0 z-[120] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-300 svelte-1n46o8q"><div class="w-full max-w-sm p-8 bg-[#1a4d2e] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8),inset_0_0_30px_rgba(0,0,0,0.4)] relative overflow-hidden group svelte-1n46o8q"><div class="flex items-center justify-between mb-8 relative z-10 svelte-1n46o8q"><div class="flex items-center gap-3 svelte-1n46o8q"><div class="p-2 rounded-xl bg-black/40 border border-white/10 text-emerald-400 svelte-1n46o8q"><!></div> <h2 class="text-2xl font-black text-white tracking-tighter uppercase italic svelte-1n46o8q">Settings</h2></div> <button class="p-2 rounded-xl bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-all hover:scale-110 svelte-1n46o8q"><!></button></div> <div class="space-y-6 relative z-10 svelte-1n46o8q"><div class="flex items-center justify-between p-4 bg-black/40 rounded-2xl border border-white/5 shadow-inner svelte-1n46o8q"><div class="flex items-center gap-3 svelte-1n46o8q"><div><!></div> <div class="svelte-1n46o8q"><span class="block text-sm font-black text-white uppercase tracking-tight svelte-1n46o8q">Sound Effects</span> <span class="text-[10px] font-medium text-zinc-500 uppercase svelte-1n46o8q"> </span></div></div> <button><div></div></button></div> <div class="p-4 bg-black/40 rounded-2xl border border-white/5 shadow-inner svelte-1n46o8q"><div class="flex items-center gap-3 mb-4 svelte-1n46o8q"><div class="p-2 rounded-lg bg-yellow-500/20 text-yellow-500 svelte-1n46o8q"><!></div> <div class="svelte-1n46o8q"><span class="block text-sm font-black text-white uppercase tracking-tight svelte-1n46o8q">Reset Bankroll</span> <span class="text-[10px] font-medium text-zinc-500 uppercase svelte-1n46o8q">Return to $300.00</span></div></div> <button class="w-full py-3 bg-white hover:bg-zinc-200 text-black font-black uppercase tracking-widest text-xs rounded-xl transition-all active:scale-[0.98] shadow-lg svelte-1n46o8q">Confirm Reset</button></div> <button class="w-full p-4 bg-emerald-500/10 hover:bg-emerald-500/20 rounded-2xl border border-emerald-500/20 transition-all flex items-center gap-4 group svelte-1n46o8q"><div class="p-2 rounded-lg bg-emerald-500/20 text-emerald-400 group-hover:scale-110 transition-transform svelte-1n46o8q"><!></div> <div class="text-left svelte-1n46o8q"><span class="block text-sm font-black text-white uppercase tracking-tight svelte-1n46o8q">How to Play</span> <span class="text-[10px] font-medium text-zinc-500 uppercase svelte-1n46o8q">Rules & Payouts</span></div></button></div> <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none svelte-1n46o8q"></div></div></div>'),B_=Jt(`<div class="fixed inset-0 flex items-center justify-center z-[100] pointer-events-none svelte-1n46o8q"><div><div class="relative flex items-center svelte-1n46o8q"><span class="text-7xl font-black italic tracking-tighter drop-shadow-[0_4px_12px_rgba(0,0,0,0.9)] 
                       bg-gradient-to-b from-emerald-200 via-emerald-400 to-emerald-600 bg-clip-text text-transparent
                       border-text-stroke flex items-baseline svelte-1n46o8q"><span class="svelte-1n46o8q"> </span> <span class="relative svelte-1n46o8q">. <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] flex items-center justify-center opacity-80 pointer-events-none -z-10 svelte-1n46o8q"><div class="absolute inset-0 bg-[radial-gradient(circle,rgba(158,255,0,0.6)_0%,transparent_70%)] animate-pulse svelte-1n46o8q"></div> <div class="absolute inset-[-40px] rounded-full z-0 pointer-events-none overflow-hidden svelte-1n46o8q"><div class="absolute inset-0 animate-eclipse-rays svelte-1n46o8q" style="background: repeating-conic-gradient(from 0deg, #9eff00 0deg 1deg, transparent 1deg 6deg);
                              mask-image: radial-gradient(circle, black 30%, transparent 75%);
                              -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div></div></span> <span class="svelte-1n46o8q"> </span></span></div></div></div>`),U_=Jt(`<div class="fixed inset-0 flex items-center justify-center z-[100] pointer-events-none svelte-1n46o8q"><div><div class="relative flex items-center svelte-1n46o8q"><span class="text-7xl font-black italic tracking-tighter drop-shadow-[0_4px_12px_rgba(0,0,0,0.9)] 
                       bg-gradient-to-b from-red-200 via-red-500 to-red-800 bg-clip-text text-transparent
                       border-text-stroke flex items-baseline svelte-1n46o8q"><span class="svelte-1n46o8q"> </span> <span class="relative svelte-1n46o8q">. <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] flex items-center justify-center opacity-80 pointer-events-none -z-10 svelte-1n46o8q"><div class="absolute inset-0 bg-[radial-gradient(circle,rgba(255,59,48,0.6)_0%,transparent_70%)] animate-pulse svelte-1n46o8q"></div> <div class="absolute inset-[-40px] rounded-full z-0 pointer-events-none overflow-hidden svelte-1n46o8q"><div class="absolute inset-0 animate-eclipse-rays svelte-1n46o8q" style="background: repeating-conic-gradient(from 0deg, #ff3b30 0deg 1deg, transparent 1deg 6deg);
                              mask-image: radial-gradient(circle, black 30%, transparent 75%);
                              -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div></div></span> <span class="svelte-1n46o8q"> </span></span></div></div></div>`),V_=Jt('<button class="ml-2 text-[8px] font-black text-zinc-500 hover:text-red-400 uppercase transition-colors svelte-1n46o8q">[ Logout ]</button>'),z_=Jt('<div class="absolute left-1/2 -translate-x-1/2 flex items-center gap-2 animate-in fade-in duration-500 svelte-1n46o8q"><span class="text-[10px] font-black text-zinc-500 uppercase tracking-widest svelte-1n46o8q">Welcome</span> <span class="text-sm font-black text-emerald-400 uppercase tracking-tight italic drop-shadow-lg svelte-1n46o8q"> </span> <!></div>'),G_=Jt('<div class="w-1.5 h-1.5 rounded-full bg-yellow-400 animate-pulse svelte-1n46o8q"></div>'),W_=Jt('<div class="w-1.5 h-1.5 rounded-full bg-emerald-400 svelte-1n46o8q"></div>'),H_=Jt('<div class="w-1.5 h-1.5 rounded-full bg-white/30 svelte-1n46o8q"></div>'),__=Jt("<div> </div>"),X_=Jt("<div> </div>"),Y_=Jt('<span class="text-[9px] font-black text-white tracking-widest uppercase svelte-1n46o8q">LOW ROLLS</span> <span class="text-[7px] font-bold text-emerald-400/60 uppercase svelte-1n46o8q">BET HERE</span> <span class="text-base font-black text-white drop-shadow-md leading-none svelte-1n46o8q">30 <span class="text-[9px] opacity-60 svelte-1n46o8q">TO</span> 1</span>',1),k_=Jt(`<span class="text-[9px] font-black text-white tracking-widest uppercase svelte-1n46o8q">ROLL 'EM ALL</span> <span class="text-[7px] font-bold text-emerald-400/60 uppercase svelte-1n46o8q">BET HERE</span> <span class="text-lg font-black text-white drop-shadow-md leading-none svelte-1n46o8q">155 <span class="text-xs opacity-60 svelte-1n46o8q">TO</span> 1</span>`,1),$_=Jt('<span class="text-[9px] font-black text-white tracking-widest uppercase svelte-1n46o8q">HIGH ROLLS</span> <span class="text-[7px] font-bold text-emerald-400/60 uppercase svelte-1n46o8q">BET HERE</span> <span class="text-base font-black text-white drop-shadow-md leading-none svelte-1n46o8q">30 <span class="text-[9px] opacity-60 svelte-1n46o8q">TO</span> 1</span>',1),K_=Jt('<div class="w-2 h-2 rounded-full bg-yellow-400 animate-ping svelte-1n46o8q"></div>'),j_=Jt('<div class="w-2 h-2 rounded-full bg-red-500 svelte-1n46o8q"></div>'),Z_=Jt('<div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse svelte-1n46o8q"></div>'),J_=Jt('<div class="absolute inset-[-2px] rounded-t-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div>'),Q_=Jt('<div class="absolute inset-[-2px] rounded-t-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div>'),q_=Jt('<span class="absolute left-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">4 TO 1</span> <span class="text-xl font-black text-[#d63a30] uppercase tracking-wide drop-shadow-[0_0_8px_rgba(214,58,48,0.4)] svelte-1n46o8q">SEVEN</span> <span class="absolute right-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">4 TO 1</span>',1),tX=Jt('<span class="text-[10px] font-black text-white uppercase tracking-wider svelte-1n46o8q">Horn Bet</span>'),eX=Jt('<span class="absolute left-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">7 TO 1</span> <span class="text-xl font-black text-[#d63a30] uppercase tracking-wide drop-shadow-[0_0_8px_rgba(214,58,48,0.4)] svelte-1n46o8q">ANY CRAPS</span> <span class="absolute right-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">7 TO 1</span>',1),iX=Jt('<div class="flex flex-col flex-1 min-h-0 svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 text-center border-t border-b border-white/20 mb-2 svelte-1n46o8q"><span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">HARD WAYS <span class="opacity-70 font-bold svelte-1n46o8q">(# of rolls since last)</span></span></div> <div class="grid grid-cols-2 gap-x-2 gap-y-2 flex-[0_0_30%] min-h-[120px] svelte-1n46o8q"><div class="flex flex-col gap-2 border-r-2 border-white/20 pr-1 svelte-1n46o8q"><!> <!></div> <div class="flex flex-col gap-2 pl-1 svelte-1n46o8q"><!> <!></div></div> <div class="flex-1 flex flex-col mt-3 min-h-0 svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 text-center border-t border-b border-white/20 svelte-1n46o8q"><span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">One Roll Bets</span></div> <div class="flex-1 flex flex-col gap-2 mt-2 svelte-1n46o8q"><!> <div class="flex-[0_0_48%] min-h-[120px] grid grid-cols-2 grid-rows-2 gap-px relative border border-white/20 shadow-[inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl overflow-hidden svelte-1n46o8q"><!> <!> <!> <!> <div class="absolute inset-0 flex items-center justify-center pointer-events-none svelte-1n46o8q"><!></div></div> <div class="flex-[0_0_15%] min-h-[40px] flex svelte-1n46o8q"><!></div></div></div></div>'),nX=Jt('<div class="flex flex-col flex-1 min-h-0 gap-2 svelte-1n46o8q"><div class="flex flex-col h-[35%] svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 flex items-center justify-between px-4 border-t border-b border-white/20 rounded-t-lg svelte-1n46o8q"><span class="text-[9px] font-black text-white/60 svelte-1n46o8q">31 FOR 1</span> <span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">â¢ HOPPING HARD WAYS â¢</span> <span class="text-[9px] font-black text-white/60 svelte-1n46o8q">31 FOR 1</span></div> <div class="flex-1 grid grid-cols-2 grid-rows-2 gap-1 mt-1 svelte-1n46o8q"><!> <!> <!> <!></div></div> <div class="flex-1 flex flex-col min-h-0 svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 flex items-center justify-between px-4 border-t border-b border-white/20 svelte-1n46o8q"><span class="text-[9px] font-black text-white/60 svelte-1n46o8q">16 FOR 1</span> <span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">â¢ HOP BETS â¢</span> <span class="text-[9px] font-black text-white/60 svelte-1n46o8q">16 FOR 1</span></div> <div class="flex-1 flex gap-1 mt-1 min-h-0 svelte-1n46o8q"><div class="flex-1 flex flex-col gap-1 svelte-1n46o8q"></div> <div class="flex-1 flex flex-col gap-1 py-4 svelte-1n46o8q"></div> <div class="flex-1 flex flex-col gap-1 svelte-1n46o8q"></div></div></div></div>'),sX=Jt('<span class="text-[10px] font-black text-red-400/60 border border-red-400/40 px-3 py-1 rounded -rotate-12 bg-black/20 uppercase tracking-widest svelte-1n46o8q">Global Off</span>'),rX=Jt('<div class="absolute inset-0 bg-red-900/10 backdrop-blur-[0.5px] z-10 flex items-center justify-center pointer-events-none overflow-hidden svelte-1n46o8q"><div class="flex gap-8 svelte-1n46o8q"></div></div>'),aX=Jt('<div class="absolute -inset-[3px] border-2 border-white rounded-lg pointer-events-none z-20 svelte-1n46o8q"></div>'),oX=Jt(`<div class="relative w-10 h-10 flex items-center justify-center svelte-1n46o8q"><div class="absolute inset-[-4px] rounded-full bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div> <div class="absolute inset-[-20px] rounded-full z-0 pointer-events-none svelte-1n46o8q"><div class="absolute inset-0 animate-eclipse-rays svelte-1n46o8q" style="background: repeating-conic-gradient(from 0deg, #9eff00 0deg 1deg, transparent 1deg 6deg);
                                    mask-image: radial-gradient(circle, black 30%, transparent 75%);
                                    -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div> <div class="absolute inset-[-12px] rounded-full bg-[#9eff00]/30 blur-2xl z-0 svelte-1n46o8q"></div> <div class="relative w-full h-full rounded-full bg-white border-2 border-zinc-400 flex items-center justify-center shadow-[0_4px_8px_rgba(0,0,0,0.5),inset_0_2px_2px_rgba(255,255,255,1)] z-10 transform scale-90 svelte-1n46o8q"><div class="w-7 h-7 rounded-full bg-white border border-black/10 flex items-center justify-center shadow-[inset_0_2px_4px_rgba(0,0,0,0.4)] svelte-1n46o8q"><span class="text-[10px] font-black text-zinc-800 uppercase drop-shadow-sm svelte-1n46o8q">ON</span></div></div></div>`),lX=Jt('<div class="w-10 h-10 rounded-full bg-zinc-800 border-2 border-zinc-900 flex items-center justify-center shadow-[0_4px_8px_rgba(0,0,0,0.6),inset_0_1px_1px_rgba(255,255,255,0.2)] transform scale-90 svelte-1n46o8q"><div class="w-7 h-7 rounded-full bg-zinc-900 border border-black flex items-center justify-center shadow-[inset_0_2px_4px_rgba(0,0,0,0.8)] svelte-1n46o8q"><span class="text-[10px] font-black text-white/90 uppercase svelte-1n46o8q">OFF</span></div></div>'),hX=Jt('<div class="absolute -top-16 left-1/2 -translate-x-1/2 z-30 pointer-events-none svelte-1n46o8q"><!></div>'),uX=Jt('<div class="flex-1 flex flex-col gap-1 relative svelte-1n46o8q"><!> <div class="h-[15%] bg-emerald-900/40 border border-white/5 rounded flex items-center justify-center relative overflow-hidden svelte-1n46o8q"><!></div> <!> <!> <div class="h-[18%] flex gap-1 relative svelte-1n46o8q"><!> <!></div></div>'),fX=Jt('<div class="absolute inset-[-4px] rounded-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div> <div class="absolute inset-[-8px] rounded-xl bg-[#9eff00]/20 blur-xl animate-pulse z-0 svelte-1n46o8q"></div>',1),cX=Jt('<div class="absolute inset-[-4px] rounded-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div> <div class="absolute inset-[-8px] rounded-xl bg-[#9eff00]/20 blur-xl animate-pulse z-0 svelte-1n46o8q"></div>',1),dX=Jt('<span class="text-5xl font-black italic text-[#ff3b30] drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)] uppercase tracking-tighter svelte-1n46o8q">COME</span>'),pX=Jt('<div class="flex flex-col items-center justify-center w-full h-full py-2 svelte-1n46o8q"><div class="flex items-end justify-center w-full px-4 text-white font-black gap-3 relative -mt-3 svelte-1n46o8q"><div class="flex flex-col items-center translate-y-0.5 mx-3 svelte-1n46o8q"><div class="w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-xl shadow-lg bg-black/30 svelte-1n46o8q">2</div> <span class="text-[11px] font-black uppercase mt-1 leading-none svelte-1n46o8q">PAYS DOUBLE</span></div> <span class="text-xl opacity-80 translate-y-[-4px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md translate-y-[-8px] svelte-1n46o8q">3</span> <span class="text-xl opacity-80 translate-y-[-11px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md -translate-y-[14px] svelte-1n46o8q">4</span> <span class="text-xl opacity-80 translate-y-[-17px] mx-1.5 svelte-1n46o8q">â¢</span> <div class="flex flex-col items-center -translate-y-[20px] relative svelte-1n46o8q"><span class="text-4xl drop-shadow-xl text-white svelte-1n46o8q">9</span> <div class="absolute top-[42px] left-1/2 -translate-x-1/2 flex flex-col items-center svelte-1n46o8q"><span class="text-2xl font-black text-white tracking-normal leading-none svelte-1n46o8q">FIELD</span></div></div> <span class="text-xl opacity-80 translate-y-[-17px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md -translate-y-[14px] svelte-1n46o8q">10</span> <span class="text-xl opacity-80 translate-y-[-11px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md translate-y-[-8px] svelte-1n46o8q">11</span> <span class="text-xl opacity-80 translate-y-[-4px] mx-1.5 svelte-1n46o8q">â¢</span> <div class="flex flex-col items-center translate-y-0.5 mx-3 svelte-1n46o8q"><div class="w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-xl shadow-lg bg-black/30 svelte-1n46o8q">12</div> <span class="text-[11px] font-black uppercase mt-1 leading-none svelte-1n46o8q">PAYS DOUBLE</span></div></div></div>'),vX=Jt('<span class="text-[11px] font-black text-white leading-tight text-center uppercase tracking-tighter svelte-1n46o8q">TAKE<br class="svelte-1n46o8q"/>ODDS</span>'),mX=Jt('<span class="text-4xl font-serif italic text-white font-medium tracking-widest drop-shadow-lg svelte-1n46o8q">Pass Line</span>'),gX=Jt('<div class="absolute w-[18%] h-[18%] bg-zinc-900 rounded-full svelte-1n46o8q"></div>'),xX=Jt('<div class="w-4 h-4 bg-white rounded-[2px] relative shadow-inner svelte-1n46o8q"></div>'),yX=Jt('<div><div> </div> <div class="flex gap-2 scale-90 svelte-1n46o8q"></div></div>'),TX=Jt('<button class="relative svelte-1n46o8q"><!></button>'),EX=Jt(`<main class="h-screen w-full bg-[#0a2e0a] text-white flex flex-col font-sans overflow-hidden select-none relative svelte-1n46o8q" style="background-image: radial-gradient(circle at 50% 50%, #1a4d2e 0%, #0a2e0a 100%)"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="h-12 flex items-center justify-between px-6 bg-black/60 border-b border-white/10 shrink-0 backdrop-blur-md svelte-1n46o8q"><div class="flex items-center gap-3 svelte-1n46o8q"><div class="flex items-center gap-2 p-2 rounded-xl bg-black/40 border border-white/10 shadow-inner svelte-1n46o8q"><img src="https://img.icons8.com/color/48/dice.png" alt="logo" class="w-6 h-6 drop-shadow-md svelte-1n46o8q"/> <img src="https://img.icons8.com/color/48/dice.png" alt="logo" class="w-6 h-6 drop-shadow-md svelte-1n46o8q"/></div> <h1 class="text-xl font-black text-white tracking-tighter uppercase italic svelte-1n46o8q">Bobby's Bubble <span class="text-emerald-400 svelte-1n46o8q">Craps</span></h1></div> <!> <div class="flex items-center gap-4 svelte-1n46o8q"><div class="flex items-center gap-3 bg-black/40 px-4 py-1.5 rounded-full border border-white/5 shadow-inner svelte-1n46o8q"><div class="flex flex-col items-end svelte-1n46o8q"><span class="text-[9px] font-black text-zinc-500 uppercase tracking-widest leading-none svelte-1n46o8q">Game Status</span> <div class="flex items-center gap-2 svelte-1n46o8q"><!> <span> </span></div></div></div> <button class="flex items-center gap-2 bg-black/40 px-4 py-2 rounded-full border border-white/5 shadow-inner text-zinc-400 hover:text-white transition-all active:scale-95 group svelte-1n46o8q"><!> <span class="text-[10px] font-black uppercase tracking-widest svelte-1n46o8q">Leaderboard</span></button> <button class="p-1.5 rounded-full bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-colors shadow-inner svelte-1n46o8q"><!></button></div></div> <div class="flex-1 flex flex-col p-2 gap-1.5 overflow-hidden max-w-[1400px] mx-auto w-full svelte-1n46o8q"><div class="h-[18%] flex justify-between items-stretch gap-3 shrink-0 mb-1 svelte-1n46o8q"><div class="w-[42%] bg-[#1a4d2e] rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] flex flex-col overflow-hidden relative group svelte-1n46o8q"><div class="h-[55%] flex items-center justify-between px-6 relative z-10 svelte-1n46o8q"><div class="flex flex-col items-center svelte-1n46o8q"><span class="text-4xl font-black italic text-yellow-500/20 drop-shadow-2xl tracking-tighter mb-1 svelte-1n46o8q" style="font-family: 'Brush Script MT', cursive;">Lucky</span> <div class="flex gap-1 svelte-1n46o8q"></div></div> <div class="flex-1 flex justify-center items-center px-2 relative h-full svelte-1n46o8q"><div class="flex gap-2 items-center scale-110 svelte-1n46o8q"><img src="https://img.icons8.com/color/96/dice.png" alt="dice"/> <img src="https://img.icons8.com/color/96/dice.png" alt="dice"/></div></div> <div class="flex flex-col items-center svelte-1n46o8q"><span class="text-4xl font-black italic text-yellow-500/20 drop-shadow-2xl tracking-tighter mb-1 svelte-1n46o8q" style="font-family: 'Brush Script MT', cursive;">Roller</span> <div class="flex gap-1 svelte-1n46o8q"></div></div></div> <div class="h-[45%] flex divide-x-2 divide-white/10 bg-[#0a2e0a]/80 border-t border-white/10 svelte-1n46o8q"><!> <!> <!></div></div> <!> <div class="flex-1 min-w-[500px] bg-[#1a4d2e] rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] flex flex-col justify-center gap-1.5 px-4 overflow-hidden relative group svelte-1n46o8q"><div class="absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-transparent svelte-1n46o8q"></div> <div class="flex items-center justify-between w-full relative z-10 svelte-1n46o8q"><div class="flex items-center gap-4 flex-1 min-w-0 svelte-1n46o8q"><div class="flex items-center bg-black/40 rounded-xl border border-white/10 shadow-[inset_0_2px_8px_rgba(0,0,0,0.5)] divide-x divide-white/10 shrink-0 overflow-hidden svelte-1n46o8q"><div class="flex flex-col items-center px-3 py-1 bg-white/[0.02] svelte-1n46o8q"><span class="text-[8px] font-black text-zinc-500 uppercase tracking-tighter mb-0.5 svelte-1n46o8q">Last Bet</span> <span class="text-sm font-black text-white leading-tight tabular-nums svelte-1n46o8q"> </span></div> <div class="flex flex-col items-center px-3 py-1 bg-white/[0.04] svelte-1n46o8q"><span class="text-[8px] font-black text-zinc-500 uppercase tracking-tighter mb-0.5 svelte-1n46o8q">Last Win</span> <span class="text-sm font-black text-emerald-400 leading-tight tabular-nums svelte-1n46o8q"> </span></div> <div class="flex flex-col items-center px-3 py-1 min-w-[100px] bg-white/[0.06] svelte-1n46o8q"><span class="text-[8px] font-black text-zinc-400 uppercase tracking-tighter mb-0.5 svelte-1n46o8q">Shooter P/L</span> <span> </span></div></div> <div class="flex flex-col playable-balance shrink-0 ml-2 svelte-1n46o8q"><span class="text-[9px] font-black text-zinc-400 uppercase leading-none tracking-tighter svelte-1n46o8q">Balance</span> <span class="text-xl font-black text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)] svelte-1n46o8q"> </span></div></div> <div class="flex items-center gap-3 shrink-0 svelte-1n46o8q"><div class="flex flex-col items-end svelte-1n46o8q"><span class="text-[9px] font-black text-zinc-400 uppercase leading-none tracking-tighter svelte-1n46o8q">Current Bet</span> <span class="text-xl font-black text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)] svelte-1n46o8q"> </span></div></div></div> <div><div class="flex items-center gap-2 svelte-1n46o8q"><!> <span> </span></div></div></div></div> <div><div class="w-[35%] flex flex-col gap-1 shrink-0 svelte-1n46o8q"><div class="flex gap-1 h-12 mb-2 svelte-1n46o8q"><div class="flex-1 relative svelte-1n46o8q"><!> <button><span class="text-[11px] font-black text-zinc-800 uppercase tracking-tight svelte-1n46o8q">HARDWAYS</span> <div class="bg-black/30 px-3 py-1 rounded shadow-inner text-[11px] font-black text-white border border-black/10 min-w-[60px] text-right svelte-1n46o8q"> </div></button></div> <div class="flex-1 relative svelte-1n46o8q"><!> <button><span class="text-[11px] font-black text-zinc-800 uppercase tracking-tight svelte-1n46o8q">HOP BETS</span> <div class="bg-black/30 px-3 py-1 rounded shadow-inner text-[11px] font-black text-white border border-black/10 min-w-[60px] text-right svelte-1n46o8q"> </div></button></div></div> <div class="bg-[#1a4d2e] rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] p-1.5 flex-1 flex flex-col gap-1.5 relative overflow-hidden group svelte-1n46o8q"><!></div></div> <div class="flex-1 flex flex-col gap-1 min-w-0 svelte-1n46o8q"><div class="flex gap-1 h-[45%] relative svelte-1n46o8q"><!> <!></div> <div class="flex-1 flex gap-2 svelte-1n46o8q"><div class="w-24 flex flex-col gap-1 py-1 shrink-0 svelte-1n46o8q"><button> </button> <div class="h-[16%] relative group svelte-1n46o8q"><!> <button>Press</button></div> <div class="h-[16%] relative group svelte-1n46o8q"><!> <button>Across</button></div> <div class="flex-1 flex flex-col items-center justify-between py-1 shrink-0 mt-2 svelte-1n46o8q"><!> <!> <!></div></div> <div class="flex-1 flex flex-col gap-2 min-w-0 svelte-1n46o8q"><!> <!> <div class="h-[28%] flex gap-2 svelte-1n46o8q"><!> <!></div></div></div></div></div> <div class="h-24 shrink-0 flex flex-col gap-2 svelte-1n46o8q"><div class="h-10 bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.4),inset_0_0_15px_rgba(0,0,0,0.3)] flex items-center px-3 gap-4 overflow-x-auto whitespace-nowrap scrollbar-hide relative group svelte-1n46o8q"></div> <div class="flex-1 bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-between px-6 backdrop-blur-xl svelte-1n46o8q"><div class="flex gap-2 svelte-1n46o8q"><button class="px-4 py-2 bg-gradient-to-b from-zinc-100 to-zinc-300 rounded-xl border-b-2 border-white/20 flex items-center gap-2 text-zinc-800 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] hover:scale-105 transition-transform active:scale-95 group svelte-1n46o8q"><div class="w-5 h-5 rounded-full bg-red-500/80 flex items-center justify-center group-hover:rotate-180 transition-transform duration-500 shadow-sm svelte-1n46o8q"><!></div> <div class="flex flex-col items-start leading-none svelte-1n46o8q"><span class="text-[9px] font-black uppercase tracking-tighter svelte-1n46o8q">Take Down</span> <span class="text-[8px] font-bold opacity-80 text-red-600 svelte-1n46o8q">ALL BETS</span></div></button></div> <div class="flex items-center gap-2 svelte-1n46o8q"></div> <div class="flex gap-2 svelte-1n46o8q"><button class="px-3 py-2 bg-gradient-to-b from-zinc-100 to-zinc-300 rounded-xl border-b-2 border-white/20 flex items-center gap-1.5 text-zinc-800 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] hover:scale-105 transition-transform active:scale-95 svelte-1n46o8q"><div class="w-4 h-4 rounded-full bg-zinc-800/20 flex items-center justify-center text-[8px] font-black text-zinc-800 border border-zinc-800/30 svelte-1n46o8q">x2</div> <div class="flex flex-col items-start leading-none svelte-1n46o8q"><span class="text-[8px] font-black uppercase svelte-1n46o8q">Double</span> <span class="text-[7px] font-bold opacity-70 svelte-1n46o8q">Bet</span></div></button> <button class="px-3 py-2 bg-gradient-to-b from-zinc-100 to-zinc-300 rounded-xl border-b-2 border-white/20 flex items-center gap-1.5 text-zinc-800 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] hover:scale-105 transition-transform active:scale-95 svelte-1n46o8q"><div class="w-4 h-4 rounded-full bg-zinc-800/20 flex items-center justify-center border border-zinc-800/30 svelte-1n46o8q"><!></div> <div class="flex flex-col items-start leading-none svelte-1n46o8q"><span class="text-[8px] font-black uppercase svelte-1n46o8q">Repeat</span> <span class="text-[7px] font-bold opacity-70 svelte-1n46o8q">Last Bet</span></div></button> <button class="px-8 py-2 bg-[#1a4d2e] text-white rounded-xl border-2 border-emerald-400/50 text-xs font-black uppercase shadow-[0_0_20px_rgba(52,211,153,0.3),inset_0_0_15px_rgba(0,0,0,0.4)] hover:shadow-[0_0_30px_rgba(52,211,153,0.5)] hover:bg-emerald-800 transition-all active:scale-95 disabled:opacity-50 disabled:scale-100 svelte-1n46o8q"> </button></div></div></div></div></main>`);function SX(v,t){Ds(t,!1);const i=ue(),f=ue(),y=ue(),C=ue(),o=ue(),E=ue(),e=ue(),a=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let x=null,u=ue(null),r=null,h=null;async function n(){if(!a)return;const rt="./";try{const ot=`${rt}poker_chip.mp3`.replace(/\/+/g,"/"),wt=await fetch(ot);if(wt.ok){const mt=await wt.arrayBuffer();x=await a.decodeAudioData(mt)}}catch(ot){console.error("Failed to load chip sound:",ot)}try{const ot=`${rt}roll.mp3`.replace(/\/+/g,"/"),wt=await fetch(ot);if(wt.ok){const mt=await wt.arrayBuffer();ut(u,await a.decodeAudioData(mt))}}catch(ot){console.error("Failed to load roll sound:",ot)}try{const ot=`${rt}win.mp3`.replace(/\/+/g,"/"),wt=await fetch(ot);if(wt.ok){const mt=await wt.arrayBuffer();r=await a.decodeAudioData(mt)}}catch(ot){console.error("Failed to load win sound:",ot)}try{const ot=`${rt}lose.mp3`.replace(/\/+/g,"/"),wt=await fetch(ot);if(wt.ok){const mt=await wt.arrayBuffer();h=await a.decodeAudioData(mt)}}catch(ot){console.error("Failed to load lose sound:",ot)}}function l(){return JSON.parse(localStorage.getItem("bubble_craps_db")||'{"users":[]}')}function c(rt){localStorage.setItem("bubble_craps_db",JSON.stringify(rt))}async function s(rt){const{username:ot,password:wt,nickname:mt}=rt.detail;console.log("App: handleSignup triggered for",ot),ut(D,"");try{const te=await b_(ot,wt,mt);console.log("App: signupUser successful",te),p(te),ut(yt,"ACCOUNT CREATED SUCCESSFULLY")}catch(te){console.error("App: Signup failed error:",te),ut(D,te.message||"Signup failed"),ut(L,!0)}}async function d(rt){const{username:ot,password:wt}=rt.detail;console.log("App: handleLogin triggered for",ot),ut(D,"");try{const mt=await I_(ot,wt);console.log("App: loginUser successful",mt),p(mt),ut(yt,"WELCOME BACK, "+(mt.nickname||mt.username).toUpperCase())}catch(mt){console.error("App: Login failed error:",mt),ut(D,mt.message||"Invalid username or password"),ut(L,!0)}}function m(){p({username:"Guest",nickname:"Guest",mode:"guest",balance:300,highestBalance:300,largestWin:0,largestLoss:0,resetCount:0})}function p(rt){ut(F,rt),ut(U,rt.balance),ut(L,!1),ut(Gi,rt.highestBalance||rt.balance),wn=rt.largestWin||0,Kn=rt.largestLoss||0,ut(Z,{4:0,6:0,8:0,10:0}),localStorage.setItem("bubble_craps_session",JSON.stringify({username:rt.username,mode:rt.mode||"user"})),rt.mode!=="guest"&&Lp(rt)}function g(){Y(F)&&Y(F).mode!=="guest"&&S(),L_(),ut(F,null),ut(L,!0),localStorage.removeItem("bubble_craps_session")}let T;function S(){if(!Y(F)||Y(F).mode==="guest")return;const rt=l(),ot=rt.users.findIndex(wt=>wt.username.toLowerCase()===Y(F).username.toLowerCase());ot!==-1&&(rt.users[ot].balance=Y(U),rt.users[ot].highestBalance=Math.max(rt.users[ot].highestBalance||0,Y(Gi)),rt.users[ot].largestWin=Math.max(rt.users[ot].largestWin||0,wn),rt.users[ot].largestLoss=Math.max(rt.users[ot].largestLoss||0,Kn),c(rt),ut(F,{...rt.users[ot],mode:"user"}),T&&clearTimeout(T),T=setTimeout(()=>{Lp(Y(F))},5e3))}function w(){if(Y(F)){if(ut(U,300),ut(Gi,300),wn=0,Kn=0,Y(F).mode!=="guest"){const rt=l(),ot=rt.users.findIndex(wt=>wt.username.toLowerCase()===Y(F).username.toLowerCase());ot!==-1&&(rt.users[ot].resetCount=(rt.users[ot].resetCount||0)+1,rt.users[ot].balance=300,c(rt),ut(F,{...rt.users[ot],mode:"user"}))}else Vs(F,Y(F).resetCount=(Y(F).resetCount||0)+1),Vs(F,Y(F).balance=300);ut(yt,"BALANCE RESET TO $300"),ut(O,!1)}}let A,M;async function R(){const rt=l();rt.users.length>0&&await g0(rt.users),A=O_(ot=>{if(ut(I,ot),Y(F)&&Y(F).mode!=="guest"){const wt=ot.find(mt=>mt.username.toLowerCase()===Y(F).username.toLowerCase());if(wt){let mt=!1;wt.highestBalance>Y(Gi)&&(ut(Gi,wt.highestBalance),mt=!0),wt.largestWin>wn&&(wn=wt.largestWin,mt=!0),wt.largestLoss>Kn&&(Kn=wt.largestLoss,mt=!0),wt.balance!==Y(U)&&(ut(U,wt.balance),mt=!0),mt&&S()}}}),M=setInterval(()=>{Y(F)&&Y(F).mode!=="guest"&&Lp(Y(F))},3e4)}vc(async()=>{n(),setTimeout(async()=>{await R(),F_(ot=>{ot&&!Y(F)&&p({...ot,mode:"user"})});const rt=JSON.parse(localStorage.getItem("bubble_craps_session"));rt&&rt.mode==="guest"&&(localStorage.removeItem("bubble_craps_session"),ut(L,!0))},1e3)}),Mx(()=>{A&&A(),M&&clearInterval(M)});function P(rt="place"){if(!a||Y(X))return;if(rt==="roll"){if(!Y(u))return;const te=a.createBufferSource();te.buffer=Y(u);const Yt=a.createGain();te.connect(Yt),Yt.connect(a.destination),Yt.gain.setValueAtTime(.6,a.currentTime),te.start(0);return}if(rt==="win"){if(!r)return;const te=a.createBufferSource();te.buffer=r;const Yt=a.createGain();te.connect(Yt),Yt.connect(a.destination),Yt.gain.setValueAtTime(.7,a.currentTime),te.start(0);return}if(rt==="7out"){if(!h)return;const te=a.createBufferSource();te.buffer=h;const Yt=a.createGain();te.connect(Yt),Yt.connect(a.destination),Yt.gain.setValueAtTime(.7,a.currentTime),te.start(0);return}if(x){const te=a.createBufferSource();te.buffer=x;const Yt=a.createGain();if(te.connect(Yt),Yt.connect(a.destination),te.playbackRate.value=.9+Math.random()*.2,rt==="select")Yt.gain.setValueAtTime(.3,a.currentTime);else if(rt==="win"){Yt.gain.setValueAtTime(.7,a.currentTime);const Ie=a.createBufferSource();Ie.buffer=x,Ie.playbackRate.value=1.1+Math.random()*.2,Ie.connect(Yt),Ie.start(a.currentTime+.1)}else rt==="loss"?(Yt.gain.setValueAtTime(.4,a.currentTime),te.playbackRate.value=.7+Math.random()*.1):Yt.gain.setValueAtTime(.5,a.currentTime);te.start(0);return}const ot=a.createOscillator(),wt=a.createGain();ot.connect(wt),wt.connect(a.destination);const mt=a.currentTime;rt==="win"?(ot.type="sine",ot.frequency.setValueAtTime(800,mt),ot.frequency.exponentialRampToValueAtTime(1200,mt+.1),wt.gain.setValueAtTime(0,mt),wt.gain.linearRampToValueAtTime(.2,mt+.02),wt.gain.exponentialRampToValueAtTime(.01,mt+.3),ot.start(mt),ot.stop(mt+.3)):rt==="loss"?(ot.type="sawtooth",ot.frequency.setValueAtTime(200,mt),ot.frequency.exponentialRampToValueAtTime(50,mt+.2),wt.gain.setValueAtTime(.1,mt),wt.gain.exponentialRampToValueAtTime(.01,mt+.2),ot.start(mt),ot.stop(mt+.2)):(ot.type="square",ot.frequency.setValueAtTime(1500,mt),ot.frequency.exponentialRampToValueAtTime(400,mt+.05),wt.gain.setValueAtTime(.1,mt),wt.gain.exponentialRampToValueAtTime(.01,mt+.05),ot.start(mt),ot.stop(mt+.05))}let b=ue(),F=ue(null),I=ue([]),L=ue(!0),D=ue(""),O=ue(!1),z=ue(!1),W=ue(!1),X=ue(!1),_=ue(!1),U=ue(300),G=ue(5),N=ue("hardways"),H=ue(0),V=ue(!1),$=ue();function j(rt){return Object.keys(Y(k)).filter(ot=>ot.startsWith(rt)).reduce((ot,wt)=>ot+Y(k)[wt],0)}let k=ue({}),Q=ue({}),et=ue(!1),at=ue(null),q=ue(!1),ft=ue(!1),vt=ue(!1),Tt=ue(!1),ct=ue({id:"",amount:0,betType:"",commission:0}),Nt={id:"",amount:0},yt=ue("MINIMUM TOTAL BET: $3"),it=ue([{dice:[6,6],total:12,establishesPoint:!1},{dice:[4,4],total:8,establishesPoint:!1},{dice:[3,5],total:8,establishesPoint:!1},{dice:[2,6],total:8,establishesPoint:!1},{dice:[1,5],total:6,establishesPoint:!1},{dice:[4,2],total:6,establishesPoint:!1},{dice:[5,6],total:11,establishesPoint:!1},{dice:[3,5],total:8,establishesPoint:!1},{dice:[4,4],total:8,establishesPoint:!1},{dice:[2,3],total:5,establishesPoint:!1},{dice:[5,6],total:11,establishesPoint:!1}]),Z=ue({4:0,6:0,8:0,10:0}),lt=ue(new Set),pt=!0;async function Rt(){ut(_,!0);try{const rt=await D_();if(ut(I,rt),Y(F)&&Y(F).mode!=="guest"){const ot=rt.find(wt=>wt.username.toLowerCase()===Y(F).username.toLowerCase());ot&&(ut(Gi,Math.max(Y(Gi),ot.highestBalance||0)),wn=Math.max(wn,ot.largestWin||0),Kn=Math.max(Kn,ot.largestLoss||0),ot.balance!==Y(U)&&ut(U,ot.balance),S())}}catch(rt){console.error("App: Manual refresh failed",rt)}finally{ut(_,!1)}}let At=ue(!1),Kt=ue(!1),Bt=ue(0),Wt=ue(0),he=null,zt=null,Ut=ue(!1),Xt=null,Pt=ue(""),$t=ue(0),pe=ue(0),fe=ue(0),Fe=!1,dt=ue(!1),Zt=ue(""),Ft=ue([]),Dt=ue(0);function ne(rt){if(rt<=0)return;rt>wn&&(wn=rt),ut(Bt,0),ut(At,!0),ut(Kt,!1),ut(Ut,!1),Xt&&clearInterval(Xt),he&&clearTimeout(he);const ot=r?r.duration*1e3:4500,wt=ot*.95,mt=60,te=rt/mt;let Yt=0,Ie=0;Xt=setInterval(()=>{Yt+=te,Yt>=rt&&(Yt=rt,clearInterval(Xt));const xi=Math.floor(Yt/10);xi>Ie&&(Ie=xi,Se()),ut(Bt,Yt)},wt/mt),he=setTimeout(()=>{ut(At,!1)},ot)}function ee(rt){if(rt<=0)return;rt>Kn&&(Kn=rt),ut(Wt,0),ut(Kt,!0),ut(At,!1),ut(Ut,!1),Xt&&clearInterval(Xt),zt&&clearTimeout(zt);const ot=1200,wt=60,mt=rt/wt;let te=0,Yt=0;Xt=setInterval(()=>{te+=mt,te>=rt&&(te=rt,clearInterval(Xt));const Ie=Math.floor(te/10);Ie>Yt&&(Yt=Ie,Se()),ut(Wt,te)},ot/wt),zt=setTimeout(()=>{ut(Kt,!1)},4e3)}function Se(){ut(Ut,!0),P("select"),setTimeout(()=>{ut(Ut,!1)},100)}function Ei(){if(!Y(C)){Y(pe)===0?ut(yt,"NO WINNINGS TO PRESS"):ut(yt,"WINNINGS ALREADY PRESSED");return}let rt=0,ot=0;Y(Ft).forEach(wt=>{const mt=Fi[wt]||0;mt>0&&(Vs(k,Y(k)[wt]=(Y(k)[wt]||0)+mt),ot+=mt,rt++)}),rt>0&&(ut(U,Y(U)-ot),ut(Dt,0),ut(Ft,[]),ut(k,Y(k)),ut(yt,`PRESSED ${rt} BETS WITH $${ot.toFixed(2)}`),P("place"))}let Fi={};function We(){if(Y(at)===null){ut(yt,"ACROSS ONLY AFTER COME-OUT");return}const ot=[2,3,4,5,6,8,9,10,11,12].filter(mt=>mt!==Y(at)),wt=ot.length*Y(G);if(Y(U)<wt){ut(yt,"INSUFFICIENT CREDIT FOR ACROSS");return}ot.forEach(mt=>{const te=`place_${mt}`;ut(U,Y(U)-Y(G)),Vs(k,Y(k)[te]=(Y(k)[te]||0)+Y(G))}),ut(k,Y(k)),ut(yt,`PLACED $${Y(G)} ACROSS`)}let Si=ue([1,1]),Gi=ue(300),wn=0,Kn=0;vc(()=>{});function De(rt){if(!(Y(et)||Y(Tt))){if(Y(k)[rt]>0,rt==="passline"&&Y(at)!==null){ut(yt,"PASS LINE IS LOCKED");return}if(rt==="come"&&Y(at)===null){ut(yt,"PLACE COME BET AFTER POINT");return}if(["low_rolls","high_rolls","roll_em_all"].includes(rt)&&!pt){ut(yt,"PLACEMENT ONLY AFTER SEVEN");return}if(rt==="take_odds"){if(Y(at)===null){ut(yt,"POINT NOT SET");return}const ot=Y(k).passline||0;if(ot===0){ut(yt,"PLACE PASS LINE FIRST");return}const wt=Y(k).take_odds||0,te={2:2,12:2,3:2,11:2,4:3,10:3,5:4,9:4,6:5,8:5}[Y(at)]||3,Yt=ot*te;if(wt+Y(G)>Yt){ut(yt,`${te}X ODDS LIMIT ($${Yt})`);return}}if(Y(U)<Y(G)){ut(yt,"INSUFFICIENT CREDIT");return}if(rt.startsWith("buy_")||rt.startsWith("lay_")){const ot=Y(G)*.05;if(Y(U)<Y(G)+ot){ut(yt,"INSUFFICIENT CREDIT FOR COMMISSION");return}ut(ct,{id:rt,amount:Y(G),betType:rt.startsWith("buy_")?"Buy":"Lay",commission:ot}),ut(Tt,!0);return}ut(U,Y(U)-Y(G)),Vs(k,Y(k)[rt]=(Y(k)[rt]||0)+Y(G)),P("place"),ut(k,Y(k))}}function sa(){const{id:rt,amount:ot,commission:wt}=Y(ct);ut(U,Y(U)-(ot+wt)),Vs(k,Y(k)[rt]=(Y(k)[rt]||0)+ot),ut(k,Y(k)),ut(Tt,!1),ut(yt,"COMMISSION PAID")}function Rr(){ut(Tt,!1),ut(yt,"BET CANCELLED")}function dh(rt){const ot=rt.detail;if(ut(ft,!1),ot>0&&Y(at)!==null&&Y(k).passline>0){const wt=Y(k).passline*ot;Y(U)>=wt?(ut(U,Y(U)-wt),Vs(k,Y(k).take_odds=(Y(k).take_odds||0)+wt),ut(k,Y(k)),ut(yt,`${ot}X ODDS APPLIED`)):ut(yt,"INSUFFICIENT CREDIT FOR ODDS")}}function jn(rt){const{targetNumber:ot,type:wt,amount:mt,sourceId:te}=rt.detail;ut(vt,!1),delete Y(k)[te];const Yt=`${wt}_${ot}`;Vs(k,Y(k)[Yt]=(Y(k)[Yt]||0)+mt),wt==="place"&&Y(k)[Yt]>=20?(Vs(k,Y(k)[`buy_${ot}`]=(Y(k)[`buy_${ot}`]||0)+Y(k)[Yt]),delete Y(k)[Yt],ut(yt,`MOVED TO BUY ${ot}`)):ut(yt,`MOVED TO ${wt.toUpperCase()} ${ot}`),ut(k,Y(k))}function qo(){if(!(Y(et)||Y(Tt))){if(!Y(E)){Y(at)===null?ut(yt,"PLACE PASS LINE BET"):ut(yt,"NO ACTIVE BETS");return}ut(V,!0),ut(yt,"ROLLING..."),Y($)?Y($).roll():setTimeout(()=>{Y($)&&Y($).roll()},50)}}function ra(rt){const{dice:ot,total:wt}=rt.detail;ut(dt,!1);const mt=Y(at)===null&&wt!==7;ut(Si,ot),ut(it,[{dice:ot,total:wt,establishesPoint:mt},...Y(it).slice(0,14)]),ut(yt,`YOU ROLLED ${wt}`),eo(wt),ut(et,!1)}function aa(){Y(et)||Y(Tt)||(Y($)?Y($).roll():qo())}function qa(rt){rt.code==="Space"&&(rt.preventDefault(),aa())}const to=[2,3,4,5,6,8,9,10,11,12],af={2:11/2,3:11/4,4:9/5,5:7/5,6:7/6,8:7/6,9:7/5,10:9/5,11:11/4,12:11/2},tl={2:6/1,3:3/1,4:2/1,5:3/2,6:6/5,8:6/5,9:3/2,10:2/1,11:3/1,12:6/1},of={4:7,6:9,8:9,10:7};function eo(rt){let ot=0,wt=0;const mt={...Y(k)},te=[],Yt=[],Ie=Y(at)!==null,xi=Fe;ut(Ft,[]),Fi={},ut(Dt,0);const ze=(It,qt)=>{te.push(It),Y(Ft).push(It),Fi[It]=(Fi[It]||0)+qt,ut(Dt,Y(Dt)+qt)};ut($t,Object.keys(Y(k)).reduce((It,qt)=>It+(Y(k)[qt]||0),0));const wi=It=>!(Y(q)&&(It.startsWith("place_")||It.startsWith("buy_")||It.startsWith("num_")||It.startsWith("hard_")||It==="take_odds")||Y(Q)[It]==="off"||It.startsWith("num_")&&Y(Q)[It]==="off"||Y(at)===null&&It.startsWith("hard_")&&Y(Q)[It]!=="on");if([4,6,8,10].forEach(It=>Vs(Z,Y(Z)[It]++)),Y(Si)[0]===Y(Si)[1]&&[4,6,8,10].includes(rt)&&Vs(Z,Y(Z)[rt]=0),ut(Z,Y(Z)),ut(Pt,""),rt!==7&&(Y(lt).add(rt),ut(lt,Y(lt)),pt=!1),mt.field)if([2,3,4,9,10,11,12].includes(rt)){let It=rt===2||rt===12?2:1;const qt=mt.field*It;ot+=mt.field+qt,wt+=qt,ze("field",qt),ut(Pt,Y(Pt)+`Field $${qt.toFixed(2)} WIN. `),delete Y(k).field}else Yt.push("field"),ut(Pt,Y(Pt)+`Field $${mt.field.toFixed(2)} LOSS. `),delete Y(k).field;if(mt.any_7){if(rt===7){const It=mt.any_7*4;ot+=mt.any_7+It,wt+=It,ze("any_7",It),ut(Pt,Y(Pt)+`Any 7 $${It.toFixed(2)} WIN. `)}else Yt.push("any_7"),ut(Pt,Y(Pt)+`Any 7 $${mt.any_7.toFixed(2)} LOSS. `);delete Y(k).any_7}if(mt.any_craps||mt.bet_c){const It=(mt.any_craps||0)+(mt.bet_c||0);if([2,3,12].includes(rt)){const qt=It*7;ot+=It+qt,wt+=qt,mt.any_craps&&ze("any_craps",mt.any_craps*7),mt.bet_c&&ze("bet_c",mt.bet_c*7),ut(Pt,Y(Pt)+`Craps $${qt.toFixed(2)} WIN. `)}else mt.any_craps&&Yt.push("any_craps"),mt.bet_c&&Yt.push("bet_c"),ut(Pt,Y(Pt)+`Craps $${It.toFixed(2)} LOSS. `);delete Y(k).any_craps,delete Y(k).bet_c}if(mt.bet_e||mt.horn_11){const It=(mt.bet_e||0)+(mt.horn_11||0);if(rt===11){const qt=It*15;ot+=It+qt,wt+=qt,mt.bet_e&&ze("bet_e",mt.bet_e*15),mt.horn_11&&ze("horn_11",mt.horn_11*15),ut(Pt,Y(Pt)+`Yo-11 $${qt.toFixed(2)} WIN. `)}else mt.bet_e&&Yt.push("bet_e"),mt.horn_11&&Yt.push("horn_11"),ut(Pt,Y(Pt)+`Yo-11 $${It.toFixed(2)} LOSS. `);delete Y(k).bet_e,delete Y(k).horn_11}if(mt.horn_bet){const It=mt.horn_bet/4;if(rt===2||rt===12||rt===3||rt===11){let qt=0;rt===2||rt===12?qt=It*30-3*It:(rt===3||rt===11)&&(qt=It*15-3*It),ot+=It+qt,wt+=qt,ze("horn_bet",qt),ut(Pt,Y(Pt)+`Horn $${qt.toFixed(2)} WIN. `)}else Yt.push("horn_bet"),ut(Pt,Y(Pt)+`Horn $${mt.horn_bet.toFixed(2)} LOSS. `);delete Y(k).horn_bet}if(mt.bet_ce){if([2,3,12,11].includes(rt)){let It=0;[2,3,12].includes(rt)?It=mt.bet_ce*3:rt===11&&(It=mt.bet_ce*7),ot+=mt.bet_ce+It,wt+=It,ze("bet_ce",It),ut(Pt,Y(Pt)+`C&E $${It.toFixed(2)} WIN. `)}else Yt.push("bet_ce"),ut(Pt,Y(Pt)+`C&E $${mt.bet_ce.toFixed(2)} LOSS. `);delete Y(k).bet_ce}if(["horn_2","horn_3","horn_12"].forEach(It=>{if(mt[It]){const qt=parseInt(It.split("_")[1]);if(rt===qt){const ye=mt[It]*(qt===2||qt===12?30:15);ot+=mt[It]+ye,wt+=ye,ze(It,ye),ut(Pt,Y(Pt)+`Horn ${qt} $${ye.toFixed(2)} WIN. `)}else Yt.push(It),ut(Pt,Y(Pt)+`Horn ${qt} $${mt[It].toFixed(2)} LOSS. `);delete Y(k)[It]}}),Object.keys(mt).forEach(It=>{if(It.startsWith("hop_")){const qt=It.split("_"),ye=parseInt(qt[1]),jt=parseInt(qt[2]),xe=mt[It];if(Y(Si)[0]===ye&&Y(Si)[1]===jt||Y(Si)[0]===jt&&Y(Si)[1]===ye){const He=xe*(ye===jt?30:15);ot+=xe+He,wt+=He,ze(It,He),ut(Pt,Y(Pt)+`Hop ${ye}/${jt} $${He.toFixed(2)} WIN. `)}else Yt.push(It),ut(Pt,Y(Pt)+`Hop ${ye}/${jt} $${xe.toFixed(2)} LOSS. `);delete Y(k)[It]}}),[4,6,8,10].forEach(It=>{const qt=`hard_${It}`;if(mt[qt]&&wi(qt))if(rt===It&&Y(Si)[0]===Y(Si)[1]){const ye=mt[qt]*of[It];ot+=mt[qt]+ye,wt+=ye,ze(qt,ye),ut(Pt,Y(Pt)+`Hard ${It} $${ye.toFixed(2)} WIN. `),delete Y(k)[qt]}else(rt===7||rt===It&&Y(Si)[0]!==Y(Si)[1])&&(Yt.push(qt),ut(Pt,Y(Pt)+`Hard ${It} $${mt[qt].toFixed(2)} LOSS. `),delete Y(k)[qt])}),Y(at)===null)if(rt===7){if(mt.passline){const It=mt.passline;ot+=mt.passline+It,wt+=It,ze("passline",It),ut(Pt,Y(Pt)+`Pass Line $${It.toFixed(2)} WIN. `)}Object.keys(Y(k)).forEach(It=>{It!=="passline"&&(Yt.push(It),mt[It]&&ut(Pt,Y(Pt)+`${It.replace("_"," ")} $${mt[It].toFixed(2)} LOSS. `)),delete Y(k)[It]}),ut(q,!0)}else ut(at,rt),ut(yt,`POINT IS ${Y(at)}`),ut(Pt,Y(Pt)+`Point set to ${Y(at)}. `),ut(q,!1),Y(k).take_odds&&(ut(U,Y(U)+Y(k).take_odds),delete Y(k).take_odds),Y(k).passline>0&&ut(ft,!0);else{if(mt.come)if(rt===7){const It=mt.come;ot+=mt.come+It,wt+=It,te.push("come"),ut(Pt,Y(Pt)+`Come $${It.toFixed(2)} WIN. `),delete Y(k).come}else{const It=`come_${rt}`;Vs(k,Y(k)[It]=(Y(k)[It]||0)+mt.come),delete Y(k).come,ut(Pt,Y(Pt)+`Come moved to ${rt}. `)}if(to.forEach(It=>{const qt=`come_${It}`;if(mt[qt])if(rt===It){const ye=mt[qt];ot+=mt[qt]+ye,wt+=ye,te.push(qt),ut(Pt,Y(Pt)+`Come ${It} $${ye.toFixed(2)} WIN. `),delete Y(k)[qt]}else rt===7&&(Yt.push(qt),ut(Pt,Y(Pt)+`Come ${It} $${mt[qt].toFixed(2)} LOSS. `),delete Y(k)[qt])}),rt===Y(at)){if(mt.passline){const It=mt.passline;ot+=mt.passline+It,wt+=It,ze("passline",It),ut(Pt,Y(Pt)+`Pass Line $${It.toFixed(2)} WIN. `)}if(mt.take_odds&&wi("take_odds")){const It=mt.take_odds*tl[Y(at)];ot+=mt.take_odds+It,wt+=It,ze("take_odds",It),ut(Pt,Y(Pt)+`Odds $${It.toFixed(2)} WIN. `)}delete Y(k).passline,delete Y(k).take_odds,ut(at,null),ut(yt,"WINNER! PASS LINE PAYS")}else rt===7&&(mt.passline&&(Yt.push("passline"),ut(Pt,Y(Pt)+`Pass Line $${mt.passline.toFixed(2)} LOSS. `)),mt.take_odds&&(Yt.push("take_odds"),ut(Pt,Y(Pt)+`Odds $${mt.take_odds.toFixed(2)} LOSS. `)),Object.keys(Y(k)).forEach(It=>{It!=="passline"&&It!=="take_odds"&&(Yt.push(It),mt[It]&&ut(Pt,Y(Pt)+`${It.replace("_"," ")} $${mt[It].toFixed(2)} LOSS. `)),delete Y(k)[It]}),ut(at,null),ut(yt,"SEVEN OUT"),ut(q,!0),Fe=!0)}if(to.forEach(It=>{const qt=`place_${It}`;if(mt[qt]&&wi(qt)&&rt===It){const jt=Math.floor(mt[qt]*af[It]);ot+=jt,wt+=jt,ze(qt,jt),ut(Pt,Y(Pt)+`Place ${It} $${jt.toFixed(2)} WIN. `)}const ye=`buy_${It}`;if(mt[ye]&&wi(ye)&&rt===It){const jt=Math.floor(mt[ye]*tl[It]);ot+=jt,wt+=jt,ze(ye,jt),ut(Pt,Y(Pt)+`Buy ${It} $${jt.toFixed(2)} WIN. `)}}),rt===7)ut(lt,new Set),pt=!0;else{const It=[2,3,4,5,6],qt=[8,9,10,11,12],ye=[...It,...qt];if(Y(k).low_rolls&&It.every(jt=>Y(lt).has(jt))){const jt=Y(k).low_rolls*30;ot+=Y(k).low_rolls+jt,wt+=jt,ze("low_rolls",jt),delete Y(k).low_rolls,ut(yt,"LUCKY ROLLER LOW WIN!"),ut(Pt,Y(Pt)+`Lucky Low $${jt.toFixed(2)} WIN. `)}if(Y(k).high_rolls&&qt.every(jt=>Y(lt).has(jt))){const jt=Y(k).high_rolls*30;ot+=Y(k).high_rolls+jt,wt+=jt,ze("high_rolls",jt),delete Y(k).high_rolls,ut(yt,"LUCKY ROLLER HIGH WIN!"),ut(Pt,Y(Pt)+`Lucky High $${jt.toFixed(2)} WIN. `)}if(Y(k).roll_em_all&&ye.every(jt=>Y(lt).has(jt))){const jt=Y(k).roll_em_all*155;ot+=Y(k).roll_em_all+jt,wt+=jt,ze("roll_em_all",jt),delete Y(k).roll_em_all,ut(yt,"ROLL 'EM ALL WIN!"),ut(Pt,Y(Pt)+`Roll 'Em All $${jt.toFixed(2)} WIN. `)}}ut(pe,ot);const Qi=Yt.reduce((It,qt)=>It+(mt[qt]||0),0),Vn=wt-Qi;xi&&!Ie?(ut(fe,Vn),Fe=!1):ut(fe,Y(fe)+Vn),rt===7&&Ie&&(ut(dt,!0),ut(Zt,`SHOOTER SEVEN-OUT! ROUND P/L: ${Y(fe)>=0?"+":""}$${Math.abs(Y(fe)).toFixed(2)}`)),ut($t,Number(Y($t))),ut(pe,Number(Y(pe))),ut(fe,Number(Y(fe))),console.log("Finalized Stats:",{lastRollTotalBet:Y($t),lastRollWinnings:Y(pe),rollerTally:Y(fe),netRoll:Vn});try{if(Y(b)){const It=ye=>{const jt=document.querySelector(`[data-bet-id="${ye}"]`);if(jt){const xe=jt.getBoundingClientRect();return{x:xe.left+xe.width/2,y:xe.top+xe.height/2}}return null},qt=Yt.reduce((ye,jt)=>ye+(mt[jt]||0),0);if(rt===7){const ye=Yt.map(It).filter(jt=>jt!==null);if(ye.length>0&&(Y(b).triggerLossAnimation(ye),qt>0&&(P("7out"),ee(qt))),te.length>0){const jt=te.map(It).filter(xe=>xe!==null);jt.length>0&&(Y(b).triggerWinAnimation(jt),P("win"),ne(ot))}}else{if(te.length>0){const ye=te.map(It).filter(jt=>jt!==null);ye.length>0&&(Y(b).triggerWinAnimation(ye),P("win"),ne(ot))}if(Yt.length>0){const ye=Yt.map(It).filter(jt=>jt!==null);ye.length>0&&(Y(b).triggerLossAnimation(ye),qt>0&&(P("loss"),ee(qt)))}}}}catch(It){console.error("Error in animation/sound processing:",It)}ut(U,Y(U)+ot),ut(k,Y(k)),ot>0&&ut(yt,`WINNER! $${ot.toFixed(2)}`),S()}function ke(rt,ot){if(!(Y(et)||Y(Tt))){if(ot&&ot.preventDefault(),rt==="passline"&&Y(at)!==null){ut(yt,"PASS LINE IS A CONTRACT BET");return}Y(k)[rt]&&(ut(U,Y(U)+Y(k)[rt]),delete Y(k)[rt],ut(k,Y(k)),ut(yt,"BET REMOVED"),P("remove"))}}function nt(){if(Y(et)||Y(Tt))return;const rt={};let ot=0;Object.keys(Y(k)).forEach(wt=>{wt==="passline"&&Y(at)!==null?rt[wt]=Y(k)[wt]:ot+=Y(k)[wt]}),ut(U,Y(U)+ot),ut(k,rt),Y(k).passline&&Y(at)!==null&&ut(yt,"CONTRACT BETS REMAINED")}const gt={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]};nn(()=>Y(I),()=>{ut(i,[...Y(I)].filter(rt=>rt.username!=="Guest").sort((rt,ot)=>(ot.highestBalance||0)-(rt.highestBalance||0)))}),nn(()=>{},()=>{ut(f,l().users.filter(rt=>rt.username!=="Guest"))}),nn(()=>(Y(I),Y(f),Y(F),Y(U)),()=>{ut(y,(()=>{const rt=[...Y(I)];return Y(f).forEach(ot=>{const wt=rt.findIndex(mt=>mt.username.toLowerCase()===ot.username.toLowerCase());if(wt!==-1){const mt=Y(F)&&ot.username.toLowerCase()===Y(F).username.toLowerCase(),te=mt?Y(U):ot.balance;rt[wt]={...rt[wt],...ot,balance:te,highestBalance:Math.max(rt[wt].highestBalance||0,ot.highestBalance||0,te),isLocal:!0,isYou:mt}}else rt.push({...ot,isLocal:!0,isYou:Y(F)&&ot.username.toLowerCase()===Y(F).username.toLowerCase()})}),rt})())}),nn(()=>Y(F),()=>{Y(F)&&Y(F).mode!=="guest"&&S()}),nn(()=>(Y(f),g0),()=>{Y(f).length>0&&g0(Y(f)).catch(rt=>console.error("Auto-sync failed",rt))}),nn(()=>(Y($t),Y(pe),Y(fe)),()=>{console.log("Stats Update:",{lastRollTotalBet:Y($t),lastRollWinnings:Y(pe),rollerTally:Y(fe)})}),nn(()=>Y(H),()=>{Y(H)===2&&(ut(q,!0),ut(H,0))}),nn(()=>(Y(Dt),Y(Ft)),()=>{ut(C,Y(Dt)>0&&Y(Ft).length>0)}),nn(()=>(Y(k),Y(q),Y(Q),Y(at)),()=>{ut(o,Object.entries(Y(k)).reduce((rt,[ot,wt])=>{let mt=!0;return Y(q)?(ot.startsWith("place_")||ot.startsWith("buy_")||ot.startsWith("hard_")||ot==="take_odds")&&(mt=!1):(Y(Q)[ot]==="off"&&(mt=!1),Y(at)===null&&ot.startsWith("hard_")&&Y(Q)[ot]!=="on"&&(mt=!1)),mt?rt+wt:rt},0))}),nn(()=>(Y(at),Y(o),Y(k)),()=>{ut(E,Y(at)!==null?Y(o)>0||Object.values(Y(k)).some(rt=>rt>0):Y(k).passline>0)}),nn(()=>(Y(U),Y(Gi)),()=>{Y(U)>Y(Gi)&&ut(Gi,Y(U))}),nn(()=>Y(k),()=>{ut(e,Object.values(Y(k)).reduce((rt,ot)=>rt+ot,0))}),ih(),ir();var Mt=EX();$e("keydown",b0,qa);var bt=ht(Mt);Op(dI(bt,{get roll(){return Y(Si)},$$legacy:!0}),rt=>ut(b,rt),()=>Y(b));var Et=xt(bt,2);{var kt=rt=>{G3(rt,{get errorMessage(){return Y(D)},$$events:{login:d,signup:s,guest:m}})};Ae(Et,rt=>{Y(L)&&rt(kt)})}var ie=xt(Et,2);{var ae=rt=>{var ot=N_(),wt=ht(ot),mt=ht(wt),te=ht(mt),Yt=ht(te),Ie=ht(Yt);Y1(Ie,{size:24});var xi=xt(te,2),ze=ht(xi);Sv(ze,{size:20});var wi=xt(mt,2),Qi=ht(wi),Vn=ht(Qi),It=ht(Vn),qt=ht(It);{var ye=Ch=>{I3(Ch,{size:20})},jt=Ch=>{b3(Ch,{size:20})};Ae(qt,Ch=>{Y(X)?Ch(ye):Ch(jt,!1)})}var xe=xt(It,2),He=xt(ht(xe),2),gs=ht(He),Zn=xt(Vn,2),rr=ht(Zn),ci=xt(Qi,2),Cf=ht(ci),sl=ht(Cf),AP=ht(sl);ic(AP,{size:20});var wP=xt(Cf,2),M1=xt(ci,2),MP=ht(M1),RP=ht(MP);pC(RP,{size:20}),si(()=>{Xe(It,1,`p-2 rounded-lg ${Y(X)?"bg-red-500/20 text-red-400":"bg-emerald-500/20 text-emerald-400"}`,"svelte-1n46o8q"),we(gs,Y(X)?"Muted":"Active"),Xe(Zn,1,`w-12 h-6 rounded-full transition-colors relative ${Y(X)?"bg-red-500/40":"bg-emerald-500/40"} border border-white/10`,"svelte-1n46o8q"),Xe(rr,1,`absolute top-1 w-4 h-4 rounded-full bg-white shadow-lg transition-all ${Y(X)?"left-1":"left-7"}`,"svelte-1n46o8q")}),$e("click",xi,()=>ut(O,!1)),$e("click",Zn,()=>ut(X,!Y(X))),$e("click",wP,w),$e("click",M1,()=>{ut(O,!1),ut(W,!0)}),Gt(rt,ot)};Ae(ie,rt=>{Y(O)&&rt(ae)})}var oe=xt(ie,2);{var Ee=rt=>{F8(rt,{get users(){return Y(y)},get loading(){return Y(_)},$$events:{refresh:Rt,close:()=>ut(z,!1)}})};Ae(oe,rt=>{Y(z)&&rt(Ee)})}var Ce=xt(oe,2);{var ge=rt=>{B8(rt,{$$events:{close:()=>ut(W,!1)}})};Ae(Ce,rt=>{Y(W)&&rt(ge)})}var Ve=xt(Ce,2);{var ii=rt=>{var ot=B_(),wt=ht(ot),mt=ht(wt),te=ht(mt),Yt=ht(te),Ie=ht(Yt),xi=xt(Yt,4),ze=ht(xi);si((wi,Qi)=>{Xe(wt,1,`relative flex items-center justify-center scale-[1.5] animate-bounce ${Y(Ut)?"scale-[1.7] brightness-150":""} transition-all duration-75`,"svelte-1n46o8q"),we(Ie,`$${wi??""}`),we(ze,Qi)},[()=>(Y(Bt),_t(()=>Math.floor(Y(Bt)))),()=>(Y(Bt),_t(()=>(Y(Bt)%1).toFixed(2).split(".")[1]))]),Gt(rt,ot)};Ae(Ve,rt=>{Y(At)&&rt(ii)})}var ai=xt(Ve,2);{var Qe=rt=>{var ot=U_(),wt=ht(ot),mt=ht(wt),te=ht(mt),Yt=ht(te),Ie=ht(Yt),xi=xt(Yt,4),ze=ht(xi);si((wi,Qi)=>{Xe(wt,1,`relative flex items-center justify-center scale-[1.5] animate-bounce ${Y(Ut)?"scale-[1.7] brightness-150":""} transition-all duration-75`,"svelte-1n46o8q"),we(Ie,`-$${wi??""}`),we(ze,Qi)},[()=>(Y(Wt),_t(()=>Math.floor(Y(Wt)))),()=>(Y(Wt),_t(()=>(Y(Wt)%1).toFixed(2).split(".")[1]))]),Gt(rt,ot)};Ae(ai,rt=>{Y(Kt)&&rt(Qe)})}var Ne=xt(ai,2);{var ve=rt=>{{let ot=en(()=>(Y(k),_t(()=>Y(k).passline||0)));gI(rt,{get point(){return Y(at)},get passlineAmount(){return Y(ot)},$$events:{select:dh}})}};Ae(Ne,rt=>{Y(ft)&&rt(ve)})}var bi=xt(Ne,2);{var me=rt=>{TI(rt,{get currentPoint(){return Y(at)},get betToMove(){return Nt},$$events:{move:jn,close:()=>ut(vt,!1)}})};Ae(bi,rt=>{Y(vt)&&rt(me)})}var hn=xt(bi,2);{var ts=rt=>{SI(rt,{get amount(){return Y(ct),_t(()=>Y(ct).amount)},get betType(){return Y(ct),_t(()=>Y(ct).betType)},get commission(){return Y(ct),_t(()=>Y(ct).commission)},$$events:{confirm:sa,decline:Rr}})};Ae(hn,rt=>{Y(Tt)&&rt(ts)})}var Wi=xt(hn,2),Pr=xt(ht(Wi),2);{var pi=rt=>{var ot=z_(),wt=xt(ht(ot),2),mt=ht(wt),te=xt(wt,2);{var Yt=Ie=>{var xi=V_();$e("click",xi,g),Gt(Ie,xi)};Ae(te,Ie=>{Y(F),_t(()=>Y(F).mode!=="guest")&&Ie(Yt)})}si(()=>we(mt,(Y(F),_t(()=>Y(F).nickname||Y(F).username)))),Gt(rt,ot)};Ae(Pr,rt=>{Y(F)&&rt(pi)})}var Un=xt(Pr,2),Mn=ht(Un),un=ht(Mn),yn=xt(ht(un),2),Bs=ht(yn);{var Rn=rt=>{var ot=G_();Gt(rt,ot)},ld=rt=>{var ot=Ai(),wt=fi(ot);{var mt=Yt=>{var Ie=W_();Gt(Yt,Ie)},te=Yt=>{var Ie=H_();Gt(Yt,Ie)};Ae(wt,Yt=>{Y(at)?Yt(mt):Yt(te,!1)},!0)}Gt(rt,ot)};Ae(Bs,rt=>{Y(et)?rt(Rn):rt(ld,!1)})}var lf=xt(Bs,2),hd=ht(lf),ph=xt(Mn,2),ud=ht(ph);V0(ud,{size:16,class:"text-yellow-500 group-hover:scale-110 transition-transform"});var oa=xt(ph,2),Qv=ht(oa);Y1(Qv,{size:18});var qv=xt(Wi,2),fd=ht(qv),nr=ht(fd),cd=ht(nr),vh=ht(cd),mh=xt(ht(vh),2);Yi(mh,4,()=>[2,3,4,5,6],Xi,(rt,ot)=>{var wt=__(),mt=ht(wt);si(te=>{Xe(wt,1,`w-7 h-7 rounded-full ${te??""} text-xs flex items-center justify-center font-black transition-all duration-300 border border-emerald-400/20`,"svelte-1n46o8q"),we(mt,ot)},[()=>(Y(lt),_t(()=>Y(lt).has(ot)?"bg-yellow-400 text-black shadow-[0_0_12px_rgba(250,204,21,0.6)]":"bg-emerald-800/60 text-emerald-400/40"))]),Gt(rt,wt)});var hf=xt(vh,2),el=ht(hf),io=ht(el),dd=xt(io,2),uf=xt(hf,2),Ii=xt(ht(uf),2);Yi(Ii,4,()=>[8,9,10,11,12],Xi,(rt,ot)=>{var wt=X_(),mt=ht(wt);si(te=>{Xe(wt,1,`w-7 h-7 rounded-full ${te??""} text-xs flex items-center justify-center font-black transition-all duration-300 border border-emerald-400/20`,"svelte-1n46o8q"),we(mt,ot)},[()=>(Y(lt),_t(()=>Y(lt).has(ot)?"bg-yellow-400 text-black shadow-[0_0_12px_rgba(250,204,21,0.6)]":"bg-emerald-800/60 text-emerald-400/40"))]),Gt(rt,wt)});var tm=xt(cd,2),pd=ht(tm);li(pd,{id:"low_rolls",className:"flex-1 flex flex-col items-center justify-center p-0.5 hover:bg-white/5 transition-all relative overflow-hidden",get amount(){return Y(k),_t(()=>Y(k).low_rolls)},$$events:{click:()=>De("low_rolls"),contextmenu:rt=>ke("low_rolls",rt)},children:(rt,ot)=>{var wt=Y_();Gt(rt,wt)},$$slots:{default:!0}});var ff=xt(pd,2);li(ff,{id:"roll_em_all",className:"flex-[1.2] flex flex-col items-center justify-center p-0.5 hover:bg-white/5 transition-all relative overflow-hidden",get amount(){return Y(k),_t(()=>Y(k).roll_em_all)},$$events:{click:()=>De("roll_em_all"),contextmenu:rt=>ke("roll_em_all",rt)},children:(rt,ot)=>{var wt=k_();Gt(rt,wt)},$$slots:{default:!0}});var vd=xt(ff,2);li(vd,{id:"high_rolls",className:"flex-1 flex flex-col items-center justify-center p-0.5 hover:bg-white/5 transition-all relative overflow-hidden",get amount(){return Y(k),_t(()=>Y(k).high_rolls)},$$events:{click:()=>De("high_rolls"),contextmenu:rt=>ke("high_rolls",rt)},children:(rt,ot)=>{var wt=$_();Gt(rt,wt)},$$slots:{default:!0}});var cf=xt(nr,2);{let rt=en(()=>(Y(u),_t(()=>Y(u)?Y(u).duration:3.5)));Op(A8(cf,{show:!0,get rollDuration(){return Y(rt)},$$events:{rollStart:()=>{ut(et,!0),P("roll")},rolled:ra,close:()=>{ut(V,!1),ut(et,!1)}},$$legacy:!0}),ot=>ut($,ot),()=>Y($))}var gh=xt(cf,2),sr=xt(ht(gh),2),df=ht(sr),md=ht(df),no=ht(md),gd=xt(ht(no),2),pf=ht(gd),il=xt(no,2),xd=xt(ht(il),2),xh=ht(xd),em=xt(il,2),vf=xt(ht(em),2),nl=ht(vf),yd=xt(md,2),Td=xt(ht(yd),2),mf=ht(Td),gf=xt(df,2),Ed=ht(gf),yh=xt(ht(Ed),2),Sd=ht(yh),xf=xt(sr,2),la=ht(xf),yf=ht(la);{var Cd=rt=>{var ot=K_();Gt(rt,ot)},Ad=rt=>{var ot=Ai(),wt=fi(ot);{var mt=Yt=>{var Ie=j_();Gt(Yt,Ie)},te=Yt=>{var Ie=Ai(),xi=fi(Ie);{var ze=wi=>{var Qi=Z_();Gt(wi,Qi)};Ae(xi,wi=>{Y(Pt),_t(()=>Y(Pt).includes("WIN"))&&wi(ze)},!0)}Gt(Yt,Ie)};Ae(wt,Yt=>{Y(dt)?Yt(mt):Yt(te,!1)},!0)}Gt(rt,ot)};Ae(yf,rt=>{Y(et)?rt(Cd):rt(Ad,!1)})}var Tf=xt(yf,2),Th=ht(Tf),Pn=xt(fd,2),Ef=ht(Pn),Sf=ht(Ef),ha=ht(Sf),B=ht(ha);{var K=rt=>{var ot=J_();Gt(rt,ot)};Ae(B,rt=>{Y(N)==="hardways"&&rt(K)})}var J=xt(B,2),st=xt(ht(J),2),Ct=ht(st),Lt=xt(ha,2),Qt=ht(Lt);{var Oe=rt=>{var ot=Q_();Gt(rt,ot)};Ae(Qt,rt=>{Y(N)==="hops"&&rt(Oe)})}var Di=xt(Qt,2),vi=xt(ht(Di),2),Ji=ht(vi),Us=xt(Sf,2),ua=ht(Us);{var br=rt=>{var ot=iX(),wt=xt(ht(ot),2),mt=ht(wt),te=ht(mt);li(te,{id:"hard_6",type:"dice",dice:[3,3],label:"Hard 6",payout:"9:1",get hardwayCounter(){return Y(Z),_t(()=>Y(Z)[6])},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),_t(()=>Y(k).hard_6)},get status(){return Y(Q),_t(()=>Y(Q).hard_6)},$$events:{click:()=>De("hard_6"),contextmenu:ci=>ke("hard_6",ci)}});var Yt=xt(te,2);li(Yt,{id:"hard_8",type:"dice",dice:[4,4],label:"Hard 8",payout:"9:1",get hardwayCounter(){return Y(Z),_t(()=>Y(Z)[8])},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),_t(()=>Y(k).hard_8)},get status(){return Y(Q),_t(()=>Y(Q).hard_8)},$$events:{click:()=>De("hard_8"),contextmenu:ci=>ke("hard_8",ci)}});var Ie=xt(mt,2),xi=ht(Ie);li(xi,{id:"hard_10",type:"dice",dice:[5,5],label:"Hard 10",payout:"7:1",get hardwayCounter(){return Y(Z),_t(()=>Y(Z)[10])},reverse:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),_t(()=>Y(k).hard_10)},get status(){return Y(Q),_t(()=>Y(Q).hard_10)},$$events:{click:()=>De("hard_10"),contextmenu:ci=>ke("hard_10",ci)}});var ze=xt(xi,2);li(ze,{id:"hard_4",type:"dice",dice:[2,2],label:"Hard 4",payout:"7:1",get hardwayCounter(){return Y(Z),_t(()=>Y(Z)[4])},reverse:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),_t(()=>Y(k).hard_4)},get status(){return Y(Q),_t(()=>Y(Q).hard_4)},$$events:{click:()=>De("hard_4"),contextmenu:ci=>ke("hard_4",ci)}});var wi=xt(wt,2),Qi=xt(ht(wi),2),Vn=ht(Qi);li(Vn,{id:"any_7",className:"flex-[0_0_15%] min-h-[40px] bg-[#0d2b18] border border-white/20 shadow-[inset_0_0_20px_rgba(0,0,0,0.5)] rounded-xl flex flex-row items-center justify-center px-4 relative overflow-hidden",get amount(){return Y(k),_t(()=>Y(k).any_7)},$$events:{click:()=>De("any_7"),contextmenu:ci=>ke("any_7",ci)},children:(ci,Cf)=>{var sl=q_();Gt(ci,sl)},$$slots:{default:!0}});var It=xt(Vn,2),qt=ht(It);li(qt,{id:"horn_2",type:"dice",dice:[1,1],payout:"30 TO 1",className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(k),_t(()=>Y(k).horn_2)},$$events:{click:()=>De("horn_2"),contextmenu:ci=>ke("horn_2",ci)}});var ye=xt(qt,2);li(ye,{id:"horn_3",type:"dice",dice:[1,2],payout:"15 TO 1",reverse:!0,className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(k),_t(()=>Y(k).horn_3)},$$events:{click:()=>De("horn_3"),contextmenu:ci=>ke("horn_3",ci)}});var jt=xt(ye,2);li(jt,{id:"horn_12",type:"dice",dice:[6,6],payout:"30 TO 1",className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(k),_t(()=>Y(k).horn_12)},$$events:{click:()=>De("horn_12"),contextmenu:ci=>ke("horn_12",ci)}});var xe=xt(jt,2);li(xe,{id:"horn_11",type:"dice",dice:[5,6],payout:"15 TO 1",reverse:!0,className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(k),_t(()=>Y(k).horn_11)},$$events:{click:()=>De("horn_11"),contextmenu:ci=>ke("horn_11",ci)}});var He=xt(xe,2),gs=ht(He);li(gs,{id:"horn_bet",className:"bg-[#1a4d2e] border border-white/30 px-3 py-0.5 rounded-lg shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] pointer-events-auto",get amount(){return Y(k),_t(()=>Y(k).horn_bet)},$$events:{click:()=>De("horn_bet"),contextmenu:ci=>ke("horn_bet",ci)},children:(ci,Cf)=>{var sl=tX();Gt(ci,sl)},$$slots:{default:!0}});var Zn=xt(It,2),rr=ht(Zn);li(rr,{id:"any_craps",className:"flex-1 bg-[#0d2b18] border border-white/20 shadow-[inset_0_0_20px_rgba(0,0,0,0.5)] rounded-xl flex flex-row items-center justify-center px-4 relative overflow-hidden",get amount(){return Y(k),_t(()=>Y(k).any_craps)},$$events:{click:()=>De("any_craps"),contextmenu:ci=>ke("any_craps",ci)},children:(ci,Cf)=>{var sl=eX();Gt(ci,sl)},$$slots:{default:!0}}),Gt(rt,ot)},Ir=rt=>{var ot=nX(),wt=ht(ot),mt=xt(ht(wt),2),te=ht(mt);li(te,{id:"hop_2_2",type:"dice",dice:[2,2],label:"2-2",className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),_t(()=>Y(k).hop_2_2)},$$events:{click:()=>De("hop_2_2"),contextmenu:()=>ke("hop_2_2")}});var Yt=xt(te,2);li(Yt,{id:"hop_4_4",type:"dice",dice:[4,4],label:"4-4",reverse:!0,className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),_t(()=>Y(k).hop_4_4)},$$events:{click:()=>De("hop_4_4"),contextmenu:()=>ke("hop_4_4")}});var Ie=xt(Yt,2);li(Ie,{id:"hop_3_3",type:"dice",dice:[3,3],label:"3-3",className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),_t(()=>Y(k).hop_3_3)},$$events:{click:()=>De("hop_3_3"),contextmenu:()=>ke("hop_3_3")}});var xi=xt(Ie,2);li(xi,{id:"hop_5_5",type:"dice",dice:[5,5],label:"5-5",reverse:!0,className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),_t(()=>Y(k).hop_5_5)},$$events:{click:()=>De("hop_5_5"),contextmenu:()=>ke("hop_5_5")}});var ze=xt(wt,2),wi=xt(ht(ze),2),Qi=ht(wi);Yi(Qi,4,()=>[[1,3,"1-3"],[1,4,"1-4"],[2,3,"2-3"],[2,4,"2-4"],[1,5,"1-5"]],Xi,(qt,ye)=>{var jt=Wf(()=>Gf(ye,3));let xe=()=>Y(jt)[0],He=()=>Y(jt)[1],gs=()=>Y(jt)[2];{let Zn=en(()=>`hop_${xe()}_${He()}`),rr=en(()=>[xe(),He()]);li(qt,{get id(){return Y(Zn)},type:"dice",get dice(){return Y(rr)},get label(){return gs()},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),xe(),He(),_t(()=>Y(k)[`hop_${xe()}_${He()}`])},$$events:{click:()=>De(`hop_${xe()}_${He()}`),contextmenu:()=>ke(`hop_${xe()}_${He()}`)}})}});var Vn=xt(Qi,2);Yi(Vn,4,()=>[[1,6,"1-6"],[2,5,"2-5"],[3,4,"3-4"]],Xi,(qt,ye)=>{var jt=Wf(()=>Gf(ye,3));let xe=()=>Y(jt)[0],He=()=>Y(jt)[1],gs=()=>Y(jt)[2];{let Zn=en(()=>`hop_${xe()}_${He()}`),rr=en(()=>[xe(),He()]);li(qt,{get id(){return Y(Zn)},type:"dice",get dice(){return Y(rr)},get label(){return gs()},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors flex-col gap-0 px-0",get amount(){return Y(k),xe(),He(),_t(()=>Y(k)[`hop_${xe()}_${He()}`])},$$events:{click:()=>De(`hop_${xe()}_${He()}`),contextmenu:()=>ke(`hop_${xe()}_${He()}`)}})}});var It=xt(Vn,2);Yi(It,4,()=>[[2,6,"2-6"],[3,5,"3-5"],[3,6,"3-6"],[4,5,"4-5"],[4,6,"4-6"]],Xi,(qt,ye)=>{var jt=Wf(()=>Gf(ye,3));let xe=()=>Y(jt)[0],He=()=>Y(jt)[1],gs=()=>Y(jt)[2];{let Zn=en(()=>`hop_${xe()}_${He()}`),rr=en(()=>[xe(),He()]);li(qt,{get id(){return Y(Zn)},type:"dice",get dice(){return Y(rr)},get label(){return gs()},reverse:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(k),xe(),He(),_t(()=>Y(k)[`hop_${xe()}_${He()}`])},$$events:{click:()=>De(`hop_${xe()}_${He()}`),contextmenu:()=>ke(`hop_${xe()}_${He()}`)}})}}),Gt(rt,ot)};Ae(ua,rt=>{Y(N)==="hardways"?rt(br):rt(Ir,!1)})}var Eh=xt(Ef,2),Sh=ht(Eh),l1=ht(Sh);{var rP=rt=>{var ot=rX(),wt=ht(ot);Yi(wt,4,()=>[1,2,3],Xi,(mt,te)=>{var Yt=sX();Gt(mt,Yt)}),Gt(rt,ot)};Ae(l1,rt=>{Y(q)&&rt(rP)})}var aP=xt(l1,2);Yi(aP,1,()=>to,Xi,(rt,ot)=>{var wt=uX(),mt=ht(wt);{var te=jt=>{var xe=aX();Gt(jt,xe)};Ae(mt,jt=>{Y(at)===Y(ot)&&jt(te)})}var Yt=xt(mt,2),Ie=ht(Yt);{var xi=jt=>{var xe=oX();Gt(jt,xe)},ze=jt=>{var xe=Ai(),He=fi(xe);{var gs=Zn=>{var rr=lX();Gt(Zn,rr)};Ae(He,Zn=>{Y(at)===null&&Y(ot)===4&&Zn(gs)},!0)}Gt(jt,xe)};Ae(Ie,jt=>{Y(at)===Y(ot)?jt(xi):jt(ze,!1)})}var wi=xt(Yt,2);{let jt=en(()=>`buy_${Y(ot)}`);li(wi,{get id(){return Y(jt)},label:"BUY",betType:"BUY",className:"h-[16%] bg-emerald-700/50 border-2 border-emerald-400/50 rounded-xl shadow-[0_0_15px_rgba(0,0,0,0.4),inset_0_0_10px_rgba(0,0,0,0.3)]",labelClassName:"leading-none text-xs",get amount(){return Y(k),Y(ot),_t(()=>Y(k)[`buy_${Y(ot)}`])},get status(){return Y(Q),Y(ot),_t(()=>Y(Q)[`buy_${Y(ot)}`])},$$events:{click:()=>De(`buy_${Y(ot)}`),contextmenu:xe=>ke(`buy_${Y(ot)}`,xe)}})}var Qi=xt(wi,2);{let jt=en(()=>`place_${Y(ot)}`),xe=en(()=>Y(ot)===6?"SIX":Y(ot)===9?"NINE":Y(ot));li(Qi,{get id(){return Y(jt)},get label(){return Y(xe)},type:"number",hideChips:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 rounded-xl shadow-[0_0_20px_rgba(0,0,0,0.5),inset_0_0_15px_rgba(0,0,0,0.4)]",get amount(){return Y(k),Y(ot),_t(()=>Y(k)[`place_${Y(ot)}`])},get status(){return Y(Q),Y(ot),_t(()=>Y(Q)[`place_${Y(ot)}`])},$$events:{click:()=>De(`place_${Y(ot)}`),contextmenu:He=>ke(`place_${Y(ot)}`,He)}})}var Vn=xt(Qi,2),It=ht(Vn);{let jt=en(()=>`place_label_${Y(ot)}`);li(It,{get id(){return Y(jt)},label:"PLACE",betType:"PLACE",className:"flex-1 bg-emerald-700/50 border-2 border-emerald-400/50 rounded-xl shadow-[0_0_15px_rgba(0,0,0,0.4),inset_0_0_10px_rgba(0,0,0,0.3)]",labelClassName:"leading-none text-xs",get amount(){return Y(k),Y(ot),_t(()=>Y(k)[`place_${Y(ot)}`])},get status(){return Y(Q),Y(ot),_t(()=>Y(Q)[`place_${Y(ot)}`])},$$events:{click:()=>De(`place_${Y(ot)}`),contextmenu:xe=>ke(`place_${Y(ot)}`,xe)}})}var qt=xt(It,2);{var ye=jt=>{var xe=hX(),He=ht(xe);z0(He,{get value(){return Y(k),Y(ot),_t(()=>Y(k)[`come_${Y(ot)}`])},size:"w-10 h-10",fontSize:"text-[8px]",betType:"COME"}),Gt(jt,xe)};Ae(qt,jt=>{Y(k),Y(ot),_t(()=>Y(k)[`come_${Y(ot)}`])&&jt(ye)})}Gt(rt,wt)});var oP=xt(Sh,2),h1=ht(oP),wd=ht(h1),lP=ht(wd),u1=xt(wd,2),f1=ht(u1);{var hP=rt=>{var ot=fX();Gt(rt,ot)};Ae(f1,rt=>{Y(C)&&rt(hP)})}var c1=xt(f1,2),d1=xt(u1,2),p1=ht(d1);{var uP=rt=>{var ot=cX();Gt(rt,ot)};Ae(p1,rt=>{Y(C)&&rt(uP)})}var v1=xt(p1,2),fP=xt(d1,2),m1=ht(fP);li(m1,{id:"bet_c",label:"C",className:"w-12 h-12 rounded-full border-2 border-emerald-400/50 bg-[#1a4d2e] shadow-[0_4px_10px_rgba(0,0,0,0.5),inset_0_0_10px_rgba(0,0,0,0.3)] active:translate-y-0.5 active:shadow-inner transition-all",get amount(){return Y(k),_t(()=>Y(k).bet_c)},$$events:{click:()=>De("bet_c"),contextmenu:()=>ke("bet_c")}});var g1=xt(m1,2);li(g1,{id:"bet_ce",label:"C&E",className:"w-14 h-14 rounded-full border-2 border-emerald-400/50 bg-[#1a4d2e] shadow-[0_4px_10px_rgba(0,0,0,0.5),inset_0_0_10px_rgba(0,0,0,0.3)] active:translate-y-0.5 active:shadow-inner transition-all",get amount(){return Y(k),_t(()=>Y(k).bet_ce)},$$events:{click:()=>De("bet_ce"),contextmenu:()=>ke("bet_ce")}});var cP=xt(g1,2);li(cP,{id:"bet_e",label:"E",className:"w-12 h-12 rounded-full border-2 border-emerald-400/50 bg-[#1a4d2e] shadow-[0_4px_10px_rgba(0,0,0,0.5),inset_0_0_10px_rgba(0,0,0,0.3)] active:translate-y-0.5 active:shadow-inner transition-all",get amount(){return Y(k),_t(()=>Y(k).bet_e)},$$events:{click:()=>De("bet_e"),contextmenu:()=>ke("bet_e")}});var dP=xt(h1,2),x1=ht(dP);li(x1,{id:"come",className:"h-[30%] bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-center",get amount(){return Y(k),_t(()=>Y(k).come)},$$events:{click:()=>De("come"),contextmenu:rt=>ke("come",rt)},children:(rt,ot)=>{var wt=dX();Gt(rt,wt)},$$slots:{default:!0}});var y1=xt(x1,2);li(y1,{id:"field",className:"h-[42%] bg-[#1a4d2e]/60 rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)]",get amount(){return Y(k),_t(()=>Y(k).field)},$$events:{click:()=>De("field"),contextmenu:rt=>ke("field",rt)},children:(rt,ot)=>{var wt=pX();Gt(rt,wt)},$$slots:{default:!0}});var pP=xt(y1,2),T1=ht(pP);li(T1,{id:"take_odds",betType:"ODDS",className:"w-[25%] bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-center px-2",get amount(){return Y(k),_t(()=>Y(k).take_odds)},$$events:{click:()=>De("take_odds"),contextmenu:rt=>ke("take_odds",rt)},children:(rt,ot)=>{var wt=vX();Gt(rt,wt)},$$slots:{default:!0}});var vP=xt(T1,2);{let rt=en(()=>Y(at)!==null);li(vP,{id:"passline",betType:"PASS",get isLocked(){return Y(rt)},className:"flex-1 bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-center",get amount(){return Y(k),_t(()=>Y(k).passline)},$$events:{click:()=>De("passline"),contextmenu:ot=>ke("passline",ot)},children:(ot,wt)=>{var mt=mX();Gt(ot,mt)},$$slots:{default:!0}})}var mP=xt(Pn,2),E1=ht(mP);Yi(E1,5,()=>Y(it),Xi,(rt,ot,wt)=>{var mt=Wf(()=>Gf(Y(ot).dice,2));let te=()=>Y(mt)[0],Yt=()=>Y(mt)[1],Ie=()=>Y(ot).total,xi=()=>Y(ot).establishesPoint;var ze=yX();Xe(ze,1,`flex items-center gap-1.5 ${wt===0?"opacity-100":"opacity-40"}`,"svelte-1n46o8q");var wi=ht(ze),Qi=ht(wi),Vn=xt(wi,2);Yi(Vn,5,()=>[te(),Yt()],Xi,(It,qt)=>{var ye=xX();Yi(ye,5,()=>(Y(qt),_t(()=>gt[Y(qt)])),Xi,(jt,xe)=>{var He=gX();si(gs=>pc(He,`left: ${Y(xe)%3*25+16}%; top: ${gs??""}%`),[()=>(Y(xe),_t(()=>Math.floor(Y(xe)/3)*25+16))]),Gt(jt,He)}),Gt(It,ye)}),si(()=>{Xe(wi,1,`w-6 h-6 rounded flex items-center justify-center text-[10px] font-black border
                      ${Ie()===7?"bg-red-600 border-red-500 text-white":xi()?"bg-blue-600 border-blue-500 text-white":"bg-emerald-500/20 border-emerald-500/30 text-emerald-400"}`,"svelte-1n46o8q"),we(Qi,Ie())}),Gt(rt,ze)});var gP=xt(E1,2),S1=ht(gP),C1=ht(S1),xP=ht(C1),yP=ht(xP);ic(yP,{size:12,color:"white"});var A1=xt(S1,2);Yi(A1,4,()=>[1,2,3,5,10,25,50,100],Xi,(rt,ot)=>{var wt=TX(),mt=ht(wt);{let te=en(()=>Y(G)===ot);z0(mt,{get value(){return ot},get selected(){return Y(te)}})}$e("click",wt,()=>{ut(G,ot),P("select")}),Gt(rt,wt)});var TP=xt(A1,2),w1=xt(ht(TP),2),EP=ht(w1),SP=ht(EP);ic(SP,{size:10,color:"#27272a"});var im=xt(w1,2),CP=ht(im);si((rt,ot,wt,mt,te,Yt,Ie,xi,ze)=>{Xe(lf,1,`text-xs font-black ${Y(et)?"text-yellow-400":Y(at)?"text-emerald-400":"text-white/60"} tracking-tight uppercase`,"svelte-1n46o8q"),we(hd,Y(et)?"DICE ROLLING":Y(at)?`POINT IS ${Y(at)}`:"COME OUT ROLL"),Xe(io,1,`w-16 h-16 drop-shadow-[0_10px_15px_rgba(0,0,0,0.5)] rotate-[15deg] ${Y(et)?"animate-bounce":"opacity-90"} brightness-110 contrast-110`,"svelte-1n46o8q"),Xe(dd,1,`w-16 h-16 drop-shadow-[0_10px_15px_rgba(0,0,0,0.5)] -rotate-[15deg] ${Y(et)?"animate-bounce [animation-delay:0.1s]":"opacity-90"} brightness-110 contrast-110`,"svelte-1n46o8q"),we(pf,`$${rt??""}`),we(xh,`$${ot??""}`),Xe(vf,1,`text-sm font-black ${Y(fe)>=0?"text-emerald-400":"text-red-400"} leading-tight tabular-nums`,"svelte-1n46o8q"),we(nl,`${Y(fe)>=0?"+":""}$${wt??""}`),we(mf,`$${mt??""}`),we(Sd,`$${te??""}`),Xe(xf,1,`w-full bg-black/40 rounded-xl border border-white/10 shadow-[inset_0_2px_8px_rgba(0,0,0,0.5)] px-4 py-1.5 relative z-10 flex items-center justify-center min-h-[36px] transition-all duration-300
          ${Yt??""}`,"svelte-1n46o8q"),Xe(Tf,1,`text-[11px] font-black uppercase tracking-widest text-center
              ${Ie??""}`,"svelte-1n46o8q"),we(Th,Y(et)?"DICE ARE IN THE AIR...":Y(dt)?Y(Zt):Y(Pt)||Y(yt)),Xe(Pn,1,`flex-1 flex gap-2 min-h-0 ${Y(et)?"pointer-events-none opacity-80":""} transition-all duration-300`,"svelte-1n46o8q"),Xe(J,1,`relative w-full h-full flex items-center justify-between px-3 py-1.5 rounded-t-xl transition-all border-b-2 z-10
              bg-gradient-to-b from-zinc-100 to-zinc-300 border-white/20 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)]
              ${Y(N)==="hardways"?"ring-1 ring-[#9eff00]/50":"opacity-80"}`,"svelte-1n46o8q"),we(Ct,`$${xi??""}`),Xe(Di,1,`relative w-full h-full flex items-center justify-between px-3 py-1.5 rounded-t-xl transition-all border-b-2 z-10
              bg-gradient-to-b from-zinc-100 to-zinc-300 border-white/20 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)]
              ${Y(N)==="hops"?"ring-1 ring-[#9eff00]/50":"opacity-80"}`,"svelte-1n46o8q"),we(Ji,`$${ze??""}`),Xe(wd,1,`h-[16%] ${Y(q)?"bg-red-600 text-white":"bg-gradient-to-b from-zinc-100 to-zinc-300 text-zinc-800"} rounded-xl border-b-2 border-white/20 transition-all active:translate-y-1 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] text-[9px] font-black uppercase`,"svelte-1n46o8q"),we(lP,Y(q)?"Off":"Bets Off"),Xe(c1,1,`relative w-full h-full bg-gradient-to-b from-zinc-100 to-zinc-300 text-zinc-800 rounded-xl border-b-2 border-white/20 transition-all active:translate-y-1 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] z-10 text-[9px] font-black uppercase
                       ${Y(C)?"ring-1 ring-[#9eff00]/50":"opacity-60 cursor-not-allowed"}`,"svelte-1n46o8q"),Xe(v1,1,`relative w-full h-full bg-gradient-to-b from-zinc-100 to-zinc-300 text-zinc-800 rounded-xl border-b-2 border-white/20 transition-all active:translate-y-1 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] z-10 text-[9px] font-black uppercase
                       ${Y(C)?"ring-1 ring-[#9eff00]/50":"opacity-60 cursor-not-allowed"}`,"svelte-1n46o8q"),im.disabled=Y(et)||!Y(E),we(CP,Y(et)?"Rolling":"Roll")},[()=>(Y($t),_t(()=>Y($t).toFixed(2))),()=>(Y(pe),_t(()=>Y(pe).toFixed(2))),()=>(Y(fe),_t(()=>Math.abs(Y(fe)).toFixed(2))),()=>(Y(U),_t(()=>Y(U).toFixed(2))),()=>(Y(e),_t(()=>Y(e).toFixed(2))),()=>(Y(et),Y(dt),Y(Pt),_t(()=>Y(et)?"bg-yellow-500/10 border-yellow-500/30":Y(dt)?"bg-red-500/20 border-red-500/40":Y(Pt).includes("WIN")?"bg-emerald-500/10 border-emerald-500/30":"")),()=>(Y(et),Y(dt),Y(Pt),_t(()=>Y(et)||Y(dt)?"text-yellow-400":Y(Pt).includes("WIN")?"text-emerald-400":"text-white/70")),()=>_t(()=>(j("hard_")+j("any_")+j("horn_")+j("bet_")).toFixed(2)),()=>_t(()=>j("hop_").toFixed(2))]),$e("click",ph,()=>ut(z,!0)),$e("click",oa,()=>ut(O,!0)),$e("click",J,()=>ut(N,"hardways")),$e("click",Di,()=>ut(N,"hops")),$e("click",wd,()=>ut(q,!Y(q))),$e("click",c1,Ei),$e("click",v1,We),$e("click",C1,nt),$e("click",im,aa),Gt(v,Mt),Os()}Zb(SX,{target:document.getElementById("app")});
