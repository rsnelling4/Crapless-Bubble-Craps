var NL=Object.defineProperty;var HS=f=>{throw TypeError(f)};var BL=(f,t,i)=>t in f?NL(f,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):f[t]=i;var ta=(f,t,i)=>BL(f,typeof t!="symbol"?t+"":t,i),F0=(f,t,i)=>t.has(f)||HS("Cannot "+i);var Nt=(f,t,i)=>(F0(f,t,"read from private field"),i?i.call(f):t.get(f)),je=(f,t,i)=>t.has(f)?HS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(f):t.set(f,i),We=(f,t,i,n)=>(F0(f,t,"write to private field"),n?n.call(f,i):t.set(f,i),i),qn=(f,t,i)=>(F0(f,t,"access private method"),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))n(v);new MutationObserver(v=>{for(const S of v)if(S.type==="childList")for(const s of S.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function i(v){const S={};return v.integrity&&(S.integrity=v.integrity),v.referrerPolicy&&(S.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?S.credentials="include":v.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function n(v){if(v.ep)return;v.ep=!0;const S=i(v);fetch(v.href,S)}})();const Qx=!1;var Vg=Array.isArray,UL=Array.prototype.indexOf,bc=Array.prototype.includes,zg=Array.from,VL=Object.defineProperty,so=Object.getOwnPropertyDescriptor,iM=Object.getOwnPropertyDescriptors,zL=Object.prototype,GL=Array.prototype,sT=Object.getPrototypeOf,XS=Object.isExtensible;function td(f){return typeof f=="function"}function _L(f){return f()}function Zx(f){for(var t=0;t<f.length;t++)f[t]()}function nM(){var f,t,i=new Promise((n,v)=>{f=n,t=v});return{promise:i,resolve:f,reject:t}}function Ed(f,t){if(Array.isArray(f))return f;if(t===void 0||!(Symbol.iterator in f))return Array.from(f);const i=[];for(const n of f)if(i.push(n),i.length===t)break;return i}const Kn=2,Km=4,Ip=8,rT=1<<24,yo=16,kr=32,su=64,aT=128,vr=512,An=1024,jn=2048,xr=4096,$s=8192,ro=16384,oT=32768,_h=65536,kS=1<<17,sM=1<<18,gf=1<<19,rM=1<<20,Za=1<<25,Wh=32768,Jx=1<<21,lT=1<<22,sl=1<<23,xa=Symbol("$state"),aM=Symbol("legacy props"),WL=Symbol(""),nc=new class extends Error{constructor(){super(...arguments);ta(this,"name","StaleReactionError");ta(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function hT(f){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function HL(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function XL(f,t,i){throw new Error("https://svelte.dev/e/each_key_duplicate")}function kL(f){throw new Error("https://svelte.dev/e/effect_in_teardown")}function YL(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $L(f){throw new Error("https://svelte.dev/e/effect_orphan")}function KL(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function jL(f){throw new Error("https://svelte.dev/e/props_invalid_value")}function QL(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ZL(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function JL(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function qL(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const tF=1,eF=2,oM=4,iF=8,nF=16,sF=1,rF=2,lM=4,aF=8,oF=16,lF=1,hF=2,Fn=Symbol(),uF="http://www.w3.org/1999/xhtml",cF="http://www.w3.org/2000/svg",fF="@attach";function dF(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function pF(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function hM(f){return f===this.v}function vF(f,t){return f!=f?t==t:f!==t||f!==null&&typeof f=="object"||typeof f=="function"}function uM(f){return!vF(f,this.v)}let xf=!1,mF=!1;function gF(){xf=!0}let Vi=null;function Ic(f){Vi=f}function er(f,t=!1,i){Vi={p:Vi,i:!1,c:null,e:null,s:f,x:null,l:xf&&!t?{s:null,u:null,$:[]}:null}}function ir(f){var t=Vi,i=t.e;if(i!==null){t.e=null;for(var n of i)IM(n)}return f!==void 0&&(t.x=f),t.i=!0,Vi=t.p,f??{}}function Lp(){return!xf||Vi!==null&&Vi.l===null}let gh=[];function cM(){var f=gh;gh=[],Zx(f)}function ya(f){if(gh.length===0&&!Nd){var t=gh;queueMicrotask(()=>{t===gh&&cM()})}gh.push(f)}function xF(){for(;gh.length>0;)cM()}function fM(f){var t=hi;if(t===null)return ti.f|=sl,f;if((t.f&oT)===0){if((t.f&aT)===0)throw f;t.b.error(f)}else Lc(f,t)}function Lc(f,t){for(;t!==null;){if((t.f&aT)!==0)try{t.b.error(f);return}catch(i){f=i}t=t.parent}throw f}const yF=-7169;function Ji(f,t){f.f=f.f&yF|t}function uT(f){(f.f&vr)!==0||f.deps===null?Ji(f,An):Ji(f,xr)}function dM(f){if(f!==null)for(const t of f)(t.f&Kn)===0||(t.f&Wh)===0||(t.f^=Wh,dM(t.deps))}function pM(f,t,i){(f.f&jn)!==0?t.add(f):(f.f&xr)!==0&&i.add(f),dM(f.deps),Ji(f,An)}const Nv=new Set;let Ze=null,qx=null,kn=null,xs=[],Gg=null,ty=!1,Nd=!1;var Sc,wc,Ah,Ac,Mp,Rp,Ch,$a,Cc,ba,ey,iy,vM;const AS=class AS{constructor(){je(this,ba);ta(this,"committed",!1);ta(this,"current",new Map);ta(this,"previous",new Map);je(this,Sc,new Set);je(this,wc,new Set);je(this,Ah,0);je(this,Ac,0);je(this,Mp,null);je(this,Rp,new Set);je(this,Ch,new Set);je(this,$a,new Map);ta(this,"is_fork",!1);je(this,Cc,!1)}is_deferred(){return this.is_fork||Nt(this,Ac)>0}skip_effect(t){Nt(this,$a).has(t)||Nt(this,$a).set(t,{d:[],m:[]})}unskip_effect(t){var i=Nt(this,$a).get(t);if(i){Nt(this,$a).delete(t);for(var n of i.d)Ji(n,jn),Nr(n);for(n of i.m)Ji(n,xr),Nr(n)}}process(t){var v;xs=[],this.apply();var i=[],n=[];for(const S of t)qn(this,ba,ey).call(this,S,i,n);if(this.is_deferred()){qn(this,ba,iy).call(this,n),qn(this,ba,iy).call(this,i);for(const[S,s]of Nt(this,$a))yM(S,s)}else{for(const S of Nt(this,Sc))S();Nt(this,Sc).clear(),Nt(this,Ah)===0&&qn(this,ba,vM).call(this),qx=this,Ze=null,YS(n),YS(i),qx=null,(v=Nt(this,Mp))==null||v.resolve()}kn=null}capture(t,i){i!==Fn&&!this.previous.has(t)&&this.previous.set(t,i),(t.f&sl)===0&&(this.current.set(t,t.v),kn==null||kn.set(t,t.v))}activate(){Ze=this,this.apply()}deactivate(){Ze===this&&(Ze=null,kn=null)}flush(){if(this.activate(),xs.length>0){if(mM(),Ze!==null&&Ze!==this)return}else Nt(this,Ah)===0&&this.process([]);this.deactivate()}discard(){for(const t of Nt(this,wc))t(this);Nt(this,wc).clear()}increment(t){We(this,Ah,Nt(this,Ah)+1),t&&We(this,Ac,Nt(this,Ac)+1)}decrement(t){We(this,Ah,Nt(this,Ah)-1),t&&We(this,Ac,Nt(this,Ac)-1),!Nt(this,Cc)&&(We(this,Cc,!0),ya(()=>{We(this,Cc,!1),this.is_deferred()?xs.length>0&&this.flush():this.revive()}))}revive(){for(const t of Nt(this,Rp))Nt(this,Ch).delete(t),Ji(t,jn),Nr(t);for(const t of Nt(this,Ch))Ji(t,xr),Nr(t);this.flush()}oncommit(t){Nt(this,Sc).add(t)}ondiscard(t){Nt(this,wc).add(t)}settled(){return(Nt(this,Mp)??We(this,Mp,nM())).promise}static ensure(){if(Ze===null){const t=Ze=new AS;Nv.add(Ze),Nd||ya(()=>{Ze===t&&t.flush()})}return Ze}apply(){}};Sc=new WeakMap,wc=new WeakMap,Ah=new WeakMap,Ac=new WeakMap,Mp=new WeakMap,Rp=new WeakMap,Ch=new WeakMap,$a=new WeakMap,Cc=new WeakMap,ba=new WeakSet,ey=function(t,i,n){t.f^=An;for(var v=t.first,S=null;v!==null;){var s=v.f,T=(s&(kr|su))!==0,e=T&&(s&An)!==0,a=e||(s&$s)!==0||Nt(this,$a).has(v);if(!a&&v.fn!==null){T?v.f^=An:S!==null&&(s&(Km|Ip|rT))!==0?S.b.defer_effect(v):(s&Km)!==0?i.push(v):yf(v)&&((s&yo)!==0&&Nt(this,Ch).add(v),Oc(v));var m=v.first;if(m!==null){v=m;continue}}var c=v.parent;for(v=v.next;v===null&&c!==null;)c===S&&(S=null),v=c.next,c=c.parent}},iy=function(t){for(var i=0;i<t.length;i+=1)pM(t[i],Nt(this,Rp),Nt(this,Ch))},vM=function(){var v;if(Nv.size>1){this.previous.clear();var t=kn,i=!0;for(const S of Nv){if(S===this){i=!1;continue}const s=[];for(const[e,a]of this.current){if(S.current.has(e))if(i&&a!==S.current.get(e))S.current.set(e,a);else continue;s.push(e)}if(s.length===0)continue;const T=[...S.current.keys()].filter(e=>!this.current.has(e));if(T.length>0){var n=xs;xs=[];const e=new Set,a=new Map;for(const m of s)gM(m,T,e,a);if(xs.length>0){Ze=S,S.apply();for(const m of xs)qn(v=S,ba,ey).call(v,m,[],[]);S.deactivate()}xs=n}}Ze=null,kn=t}this.committed=!0,Nv.delete(this)};let rl=AS;function TF(f){var t=Nd;Nd=!0;try{for(var i;;){if(xF(),xs.length===0&&(Ze==null||Ze.flush(),xs.length===0))return Gg=null,i;mM()}}finally{Nd=t}}function mM(){ty=!0;var f=null;try{for(var t=0;xs.length>0;){var i=rl.ensure();if(t++>1e3){var n,v;EF()}i.process(xs),al.clear()}}finally{xs=[],ty=!1,Gg=null}}function EF(){try{KL()}catch(f){Lc(f,Gg)}}let Lr=null;function YS(f){var t=f.length;if(t!==0){for(var i=0;i<t;){var n=f[i++];if((n.f&(ro|$s))===0&&yf(n)&&(Lr=new Set,Oc(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?OM(n):n.fn=null),(Lr==null?void 0:Lr.size)>0)){al.clear();for(const v of Lr){if((v.f&(ro|$s))!==0)continue;const S=[v];let s=v.parent;for(;s!==null;)Lr.has(s)&&(Lr.delete(s),S.push(s)),s=s.parent;for(let T=S.length-1;T>=0;T--){const e=S[T];(e.f&(ro|$s))===0&&Oc(e)}}Lr.clear()}}Lr=null}}function gM(f,t,i,n){if(!i.has(f)&&(i.add(f),f.reactions!==null))for(const v of f.reactions){const S=v.f;(S&Kn)!==0?gM(v,t,i,n):(S&(lT|yo))!==0&&(S&jn)===0&&xM(v,t,n)&&(Ji(v,jn),Nr(v))}}function xM(f,t,i){const n=i.get(f);if(n!==void 0)return n;if(f.deps!==null)for(const v of f.deps){if(bc.call(t,v))return!0;if((v.f&Kn)!==0&&xM(v,t,i))return i.set(v,!0),!0}return i.set(f,!1),!1}function Nr(f){for(var t=Gg=f;t.parent!==null;){t=t.parent;var i=t.f;if(ty&&t===hi&&(i&yo)!==0&&(i&sM)===0)return;if((i&(su|kr))!==0){if((i&An)===0)return;t.f^=An}}xs.push(t)}function yM(f,t){if(!((f.f&kr)!==0&&(f.f&An)!==0)){(f.f&jn)!==0?t.d.push(f):(f.f&xr)!==0&&t.m.push(f),Ji(f,An);for(var i=f.first;i!==null;)yM(i,t),i=i.next}}function SF(f){let t=0,i=vl(0),n;return()=>{fT()&&(Y(i),Np(()=>(t===0&&(n=kt(()=>f(()=>Bd(i)))),t+=1,()=>{ya(()=>{t-=1,t===0&&(n==null||n(),n=void 0,Bd(i))})})))}}var wF=_h|gf|aT;function AF(f,t,i){new CF(f,t,i)}var hr,nT,oa,Mh,la,ur,gs,ha,Ka,Zo,Rh,Jo,Mc,Ph,Rc,Pc,ja,Bg,Un,MF,RF,ny,Em,Sm,sy;class CF{constructor(t,i,n){je(this,Un);ta(this,"parent");ta(this,"is_pending",!1);je(this,hr);je(this,nT,null);je(this,oa);je(this,Mh);je(this,la);je(this,ur,null);je(this,gs,null);je(this,ha,null);je(this,Ka,null);je(this,Zo,null);je(this,Rh,0);je(this,Jo,0);je(this,Mc,!1);je(this,Ph,!1);je(this,Rc,new Set);je(this,Pc,new Set);je(this,ja,null);je(this,Bg,SF(()=>(We(this,ja,vl(Nt(this,Rh))),()=>{We(this,ja,null)})));We(this,hr,t),We(this,oa,i),We(this,Mh,n),this.parent=hi.b,this.is_pending=!!Nt(this,oa).pending,We(this,la,Wg(()=>{hi.b=this;{var v=qn(this,Un,ny).call(this);try{We(this,ur,Ts(()=>n(v)))}catch(S){this.error(S)}Nt(this,Jo)>0?qn(this,Un,Sm).call(this):this.is_pending=!1}return()=>{var S;(S=Nt(this,Zo))==null||S.remove()}},wF))}defer_effect(t){pM(t,Nt(this,Rc),Nt(this,Pc))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!Nt(this,oa).pending}update_pending_count(t){qn(this,Un,sy).call(this,t),We(this,Rh,Nt(this,Rh)+t),!(!Nt(this,ja)||Nt(this,Mc))&&(We(this,Mc,!0),ya(()=>{We(this,Mc,!1),Nt(this,ja)&&Fc(Nt(this,ja),Nt(this,Rh))}))}get_effect_pending(){return Nt(this,Bg).call(this),Y(Nt(this,ja))}error(t){var i=Nt(this,oa).onerror;let n=Nt(this,oa).failed;if(Nt(this,Ph)||!i&&!n)throw t;Nt(this,ur)&&(Yn(Nt(this,ur)),We(this,ur,null)),Nt(this,gs)&&(Yn(Nt(this,gs)),We(this,gs,null)),Nt(this,ha)&&(Yn(Nt(this,ha)),We(this,ha,null));var v=!1,S=!1;const s=()=>{if(v){pF();return}v=!0,S&&qL(),rl.ensure(),We(this,Rh,0),Nt(this,ha)!==null&&Ih(Nt(this,ha),()=>{We(this,ha,null)}),this.is_pending=this.has_pending_snippet(),We(this,ur,qn(this,Un,Em).call(this,()=>(We(this,Ph,!1),Ts(()=>Nt(this,Mh).call(this,Nt(this,hr)))))),Nt(this,Jo)>0?qn(this,Un,Sm).call(this):this.is_pending=!1};ya(()=>{try{S=!0,i==null||i(t,s),S=!1}catch(T){Lc(T,Nt(this,la)&&Nt(this,la).parent)}n&&We(this,ha,qn(this,Un,Em).call(this,()=>{rl.ensure(),We(this,Ph,!0);try{return Ts(()=>{n(Nt(this,hr),()=>t,()=>s)})}catch(T){return Lc(T,Nt(this,la).parent),null}finally{We(this,Ph,!1)}}))})}}hr=new WeakMap,nT=new WeakMap,oa=new WeakMap,Mh=new WeakMap,la=new WeakMap,ur=new WeakMap,gs=new WeakMap,ha=new WeakMap,Ka=new WeakMap,Zo=new WeakMap,Rh=new WeakMap,Jo=new WeakMap,Mc=new WeakMap,Ph=new WeakMap,Rc=new WeakMap,Pc=new WeakMap,ja=new WeakMap,Bg=new WeakMap,Un=new WeakSet,MF=function(){try{We(this,ur,Ts(()=>Nt(this,Mh).call(this,Nt(this,hr))))}catch(t){this.error(t)}},RF=function(){const t=Nt(this,oa).pending;t&&(We(this,gs,Ts(()=>t(Nt(this,hr)))),ya(()=>{var i=qn(this,Un,ny).call(this);We(this,ur,qn(this,Un,Em).call(this,()=>(rl.ensure(),Ts(()=>Nt(this,Mh).call(this,i))))),Nt(this,Jo)>0?qn(this,Un,Sm).call(this):(Ih(Nt(this,gs),()=>{We(this,gs,null)}),this.is_pending=!1)}))},ny=function(){var t=Nt(this,hr);return this.is_pending&&(We(this,Zo,ao()),Nt(this,hr).before(Nt(this,Zo)),t=Nt(this,Zo)),t},Em=function(t){var i=hi,n=ti,v=Vi;Tr(Nt(this,la)),yr(Nt(this,la)),Ic(Nt(this,la).ctx);try{return t()}catch(S){return fM(S),null}finally{Tr(i),yr(n),Ic(v)}},Sm=function(){const t=Nt(this,oa).pending;Nt(this,ur)!==null&&(We(this,Ka,document.createDocumentFragment()),Nt(this,Ka).append(Nt(this,Zo)),UM(Nt(this,ur),Nt(this,Ka))),Nt(this,gs)===null&&We(this,gs,Ts(()=>t(Nt(this,hr))))},sy=function(t){var i;if(!this.has_pending_snippet()){this.parent&&qn(i=this.parent,Un,sy).call(i,t);return}if(We(this,Jo,Nt(this,Jo)+t),Nt(this,Jo)===0){this.is_pending=!1;for(const n of Nt(this,Rc))Ji(n,jn),Nr(n);for(const n of Nt(this,Pc))Ji(n,xr),Nr(n);Nt(this,Rc).clear(),Nt(this,Pc).clear(),Nt(this,gs)&&Ih(Nt(this,gs),()=>{We(this,gs,null)}),Nt(this,Ka)&&(Nt(this,hr).before(Nt(this,Ka)),We(this,Ka,null))}};function TM(f,t,i,n){const v=Lp()?Fp:pn;var S=f.filter(o=>!o.settled);if(i.length===0&&S.length===0){n(t.map(v));return}var s=Ze,T=hi,e=PF(),a=S.length===1?S[0].promise:S.length>1?Promise.all(S.map(o=>o.promise)):null;function m(o){e();try{n(o)}catch(u){(T.f&ro)===0&&Lc(u,T)}s==null||s.deactivate(),ry()}if(i.length===0){a.then(()=>m(t.map(v)));return}function c(){e(),Promise.all(i.map(o=>bF(o))).then(o=>m([...t.map(v),...o])).catch(o=>Lc(o,T))}a?a.then(c):c()}function PF(){var f=hi,t=ti,i=Vi,n=Ze;return function(S=!0){Tr(f),yr(t),Ic(i),S&&(n==null||n.activate())}}function ry(){Tr(null),yr(null),Ic(null)}function Fp(f){var t=Kn|jn,i=ti!==null&&(ti.f&Kn)!==0?ti:null;return hi!==null&&(hi.f|=gf),{ctx:Vi,deps:null,effects:null,equals:hM,f:t,fn:f,reactions:null,rv:0,v:Fn,wv:0,parent:i??hi,ac:null}}function bF(f,t,i){let n=hi;n===null&&HL();var v=n.b,S=void 0,s=vl(Fn),T=!ti,e=new Map;return _F(()=>{var u;var a=nM();S=a.promise;try{Promise.resolve(f()).then(a.resolve,a.reject).then(()=>{m===Ze&&m.committed&&m.deactivate(),ry()})}catch(r){a.reject(r),ry()}var m=Ze;if(T){var c=v.is_rendered();v.update_pending_count(1),m.increment(c),(u=e.get(m))==null||u.reject(nc),e.delete(m),e.set(m,a)}const o=(r,h=void 0)=>{if(m.activate(),h)h!==nc&&(s.f|=sl,Fc(s,h));else{(s.f&sl)!==0&&(s.f^=sl),Fc(s,r);for(const[d,l]of e){if(e.delete(d),d===m)break;l.reject(nc)}}T&&(v.update_pending_count(-1),m.decrement(c))};a.promise.then(o,r=>o(null,r||"unknown"))}),Op(()=>{for(const a of e.values())a.reject(nc)}),new Promise(a=>{function m(c){function o(){c===S?a(s):m(S)}c.then(o,o)}m(S)})}function Sd(f){const t=Fp(f);return VM(t),t}function pn(f){const t=Fp(f);return t.equals=uM,t}function EM(f){var t=f.effects;if(t!==null){f.effects=null;for(var i=0;i<t.length;i+=1)Yn(t[i])}}function IF(f){for(var t=f.parent;t!==null;){if((t.f&Kn)===0)return(t.f&ro)===0?t:null;t=t.parent}return null}function cT(f){var t,i=hi;Tr(IF(f));try{f.f&=~Wh,EM(f),t=WM(f)}finally{Tr(i)}return t}function SM(f){var t=cT(f);if(!f.equals(t)&&(f.wv=GM(),(!(Ze!=null&&Ze.is_fork)||f.deps===null)&&(f.v=t,f.deps===null))){Ji(f,An);return}ml||(kn!==null?(fT()||Ze!=null&&Ze.is_fork)&&kn.set(f,t):uT(f))}let ay=new Set;const al=new Map;let wM=!1;function vl(f,t){var i={f:0,v:f,reactions:null,equals:hM,rv:0,wv:0};return i}function Lo(f,t){const i=vl(f);return VM(i),i}function de(f,t=!1,i=!0){var v;const n=vl(f);return t||(n.equals=uM),xf&&i&&Vi!==null&&Vi.l!==null&&((v=Vi.l).s??(v.s=[])).push(n),n}function ea(f,t){return ht(f,kt(()=>Y(f))),t}function ht(f,t,i=!1){ti!==null&&(!Br||(ti.f&kS)!==0)&&Lp()&&(ti.f&(Kn|yo|lT|kS))!==0&&(mr===null||!bc.call(mr,f))&&JL();let n=i?sc(t):t;return Fc(f,n)}function Fc(f,t){if(!f.equals(t)){var i=f.v;ml?al.set(f,t):al.set(f,i),f.v=t;var n=rl.ensure();if(n.capture(f,i),(f.f&Kn)!==0){const v=f;(f.f&jn)!==0&&cT(v),uT(v)}f.wv=GM(),AM(f,jn),Lp()&&hi!==null&&(hi.f&An)!==0&&(hi.f&(kr|su))===0&&(lr===null?XF([f]):lr.push(f)),!n.is_fork&&ay.size>0&&!wM&&LF()}return t}function LF(){wM=!1;for(const f of ay)(f.f&An)!==0&&Ji(f,xr),yf(f)&&Oc(f);ay.clear()}function $S(f,t=1){var i=Y(f),n=t===1?i++:i--;return ht(f,i),n}function Bd(f){ht(f,f.v+1)}function AM(f,t){var i=f.reactions;if(i!==null)for(var n=Lp(),v=i.length,S=0;S<v;S++){var s=i[S],T=s.f;if(!(!n&&s===hi)){var e=(T&jn)===0;if(e&&Ji(s,t),(T&Kn)!==0){var a=s;kn==null||kn.delete(a),(T&Wh)===0&&(T&vr&&(s.f|=Wh),AM(a,xr))}else e&&((T&yo)!==0&&Lr!==null&&Lr.add(s),Nr(s))}}}function sc(f){if(typeof f!="object"||f===null||xa in f)return f;const t=sT(f);if(t!==zL&&t!==GL)return f;var i=new Map,n=Vg(f),v=Lo(0),S=Lh,s=T=>{if(Lh===S)return T();var e=ti,a=Lh;yr(null),ZS(S);var m=T();return yr(e),ZS(a),m};return n&&i.set("length",Lo(f.length)),new Proxy(f,{defineProperty(T,e,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&QL();var m=i.get(e);return m===void 0?m=s(()=>{var c=Lo(a.value);return i.set(e,c),c}):ht(m,a.value,!0),!0},deleteProperty(T,e){var a=i.get(e);if(a===void 0){if(e in T){const m=s(()=>Lo(Fn));i.set(e,m),Bd(v)}}else ht(a,Fn),Bd(v);return!0},get(T,e,a){var u;if(e===xa)return f;var m=i.get(e),c=e in T;if(m===void 0&&(!c||(u=so(T,e))!=null&&u.writable)&&(m=s(()=>{var r=sc(c?T[e]:Fn),h=Lo(r);return h}),i.set(e,m)),m!==void 0){var o=Y(m);return o===Fn?void 0:o}return Reflect.get(T,e,a)},getOwnPropertyDescriptor(T,e){var a=Reflect.getOwnPropertyDescriptor(T,e);if(a&&"value"in a){var m=i.get(e);m&&(a.value=Y(m))}else if(a===void 0){var c=i.get(e),o=c==null?void 0:c.v;if(c!==void 0&&o!==Fn)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return a},has(T,e){var o;if(e===xa)return!0;var a=i.get(e),m=a!==void 0&&a.v!==Fn||Reflect.has(T,e);if(a!==void 0||hi!==null&&(!m||(o=so(T,e))!=null&&o.writable)){a===void 0&&(a=s(()=>{var u=m?sc(T[e]):Fn,r=Lo(u);return r}),i.set(e,a));var c=Y(a);if(c===Fn)return!1}return m},set(T,e,a,m){var g;var c=i.get(e),o=e in T;if(n&&e==="length")for(var u=a;u<c.v;u+=1){var r=i.get(u+"");r!==void 0?ht(r,Fn):u in T&&(r=s(()=>Lo(Fn)),i.set(u+"",r))}if(c===void 0)(!o||(g=so(T,e))!=null&&g.writable)&&(c=s(()=>Lo(void 0)),ht(c,sc(a)),i.set(e,c));else{o=c.v!==Fn;var h=s(()=>sc(a));ht(c,h)}var d=Reflect.getOwnPropertyDescriptor(T,e);if(d!=null&&d.set&&d.set.call(m,a),!o){if(n&&typeof e=="string"){var l=i.get("length"),p=Number(e);Number.isInteger(p)&&p>=l.v&&ht(l,p+1)}Bd(v)}return!0},ownKeys(T){Y(v);var e=Reflect.ownKeys(T).filter(c=>{var o=i.get(c);return o===void 0||o.v!==Fn});for(var[a,m]of i)m.v!==Fn&&!(a in T)&&e.push(a);return e},setPrototypeOf(){ZL()}})}function KS(f){try{if(f!==null&&typeof f=="object"&&xa in f)return f[xa]}catch{}return f}function FF(f,t){return Object.is(KS(f),KS(t))}var oy,CM,MM,RM;function DF(){if(oy===void 0){oy=window,CM=/Firefox/.test(navigator.userAgent);var f=Element.prototype,t=Node.prototype,i=Text.prototype;MM=so(t,"firstChild").get,RM=so(t,"nextSibling").get,XS(f)&&(f.__click=void 0,f.__className=void 0,f.__attributes=null,f.__style=void 0,f.__e=void 0),XS(i)&&(i.__t=void 0)}}function ao(f=""){return document.createTextNode(f)}function Dc(f){return MM.call(f)}function Dp(f){return RM.call(f)}function ct(f,t){return Dc(f)}function xi(f,t=!1){{var i=Dc(f);return i instanceof Comment&&i.data===""?Dp(i):i}}function gt(f,t=1,i=!1){let n=f;for(;t--;)n=Dp(n);return n}function OF(f){f.textContent=""}function PM(){return!1}function NF(f,t){if(t){const i=document.body;f.autofocus=!0,ya(()=>{document.activeElement===i&&f.focus()})}}let jS=!1;function BF(){jS||(jS=!0,document.addEventListener("reset",f=>{Promise.resolve().then(()=>{var t;if(!f.defaultPrevented)for(const i of f.target.elements)(t=i.__on_r)==null||t.call(i)})},{capture:!0}))}function _g(f){var t=ti,i=hi;yr(null),Tr(null);try{return f()}finally{yr(t),Tr(i)}}function UF(f,t,i,n=i){f.addEventListener(t,()=>_g(i));const v=f.__on_r;v?f.__on_r=()=>{v(),n(!0)}:f.__on_r=()=>n(!0),BF()}function bM(f){hi===null&&(ti===null&&$L(),YL()),ml&&kL()}function VF(f,t){var i=t.last;i===null?t.last=t.first=f:(i.next=f,f.prev=i,t.last=f)}function Yr(f,t,i){var n=hi;n!==null&&(n.f&$s)!==0&&(f|=$s);var v={ctx:Vi,deps:null,nodes:null,f:f|jn|vr,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(i)try{Oc(v),v.f|=oT}catch(T){throw Yn(v),T}else t!==null&&Nr(v);var S=v;if(i&&S.deps===null&&S.teardown===null&&S.nodes===null&&S.first===S.last&&(S.f&gf)===0&&(S=S.first,(f&yo)!==0&&(f&_h)!==0&&S!==null&&(S.f|=_h)),S!==null&&(S.parent=n,n!==null&&VF(S,n),ti!==null&&(ti.f&Kn)!==0&&(f&su)===0)){var s=ti;(s.effects??(s.effects=[])).push(S)}return v}function fT(){return ti!==null&&!Br}function Op(f){const t=Yr(Ip,null,!1);return Ji(t,An),t.teardown=f,t}function ly(f){bM();var t=hi.f,i=!ti&&(t&kr)!==0&&(t&oT)===0;if(i){var n=Vi;(n.e??(n.e=[])).push(f)}else return IM(f)}function IM(f){return Yr(Km|rM,f,!1)}function zF(f){return bM(),Yr(Ip|rM,f,!0)}function GF(f){rl.ensure();const t=Yr(su|gf,f,!0);return(i={})=>new Promise(n=>{i.outro?Ih(t,()=>{Yn(t),n(void 0)}):(Yn(t),n(void 0))})}function dT(f){return Yr(Km,f,!1)}function Hn(f,t){var i=Vi,n={effect:null,ran:!1,deps:f};i.l.$.push(n),n.effect=Np(()=>{f(),!n.ran&&(n.ran=!0,kt(t))})}function ru(){var f=Vi;Np(()=>{for(var t of f.l.$){t.deps();var i=t.effect;(i.f&An)!==0&&i.deps!==null&&Ji(i,xr),yf(i)&&Oc(i),t.ran=!1}})}function _F(f){return Yr(lT|gf,f,!0)}function Np(f,t=0){return Yr(Ip|t,f,!0)}function li(f,t=[],i=[],n=[]){TM(n,t,i,v=>{Yr(Ip,()=>f(...v.map(Y)),!0)})}function Wg(f,t=0){var i=Yr(yo|t,f,!0);return i}function LM(f,t=0){var i=Yr(rT|t,f,!0);return i}function Ts(f){return Yr(kr|gf,f,!0)}function FM(f){var t=f.teardown;if(t!==null){const i=ml,n=ti;QS(!0),yr(null);try{t.call(null)}finally{QS(i),yr(n)}}}function DM(f,t=!1){var i=f.first;for(f.first=f.last=null;i!==null;){const v=i.ac;v!==null&&_g(()=>{v.abort(nc)});var n=i.next;(i.f&su)!==0?i.parent=null:Yn(i,t),i=n}}function WF(f){for(var t=f.first;t!==null;){var i=t.next;(t.f&kr)===0&&Yn(t),t=i}}function Yn(f,t=!0){var i=!1;(t||(f.f&sM)!==0)&&f.nodes!==null&&f.nodes.end!==null&&(HF(f.nodes.start,f.nodes.end),i=!0),DM(f,t&&!i),jm(f,0),Ji(f,ro);var n=f.nodes&&f.nodes.t;if(n!==null)for(const S of n)S.stop();FM(f);var v=f.parent;v!==null&&v.first!==null&&OM(f),f.next=f.prev=f.teardown=f.ctx=f.deps=f.fn=f.nodes=f.ac=null}function HF(f,t){for(;f!==null;){var i=f===t?null:Dp(f);f.remove(),f=i}}function OM(f){var t=f.parent,i=f.prev,n=f.next;i!==null&&(i.next=n),n!==null&&(n.prev=i),t!==null&&(t.first===f&&(t.first=n),t.last===f&&(t.last=i))}function Ih(f,t,i=!0){var n=[];NM(f,n,!0);var v=()=>{i&&Yn(f),t&&t()},S=n.length;if(S>0){var s=()=>--S||v();for(var T of n)T.out(s)}else v()}function NM(f,t,i){if((f.f&$s)===0){f.f^=$s;var n=f.nodes&&f.nodes.t;if(n!==null)for(const T of n)(T.is_global||i)&&t.push(T);for(var v=f.first;v!==null;){var S=v.next,s=(v.f&_h)!==0||(v.f&kr)!==0&&(f.f&yo)!==0;NM(v,t,s?i:!1),v=S}}}function pT(f){BM(f,!0)}function BM(f,t){if((f.f&$s)!==0){f.f^=$s,(f.f&An)===0&&(Ji(f,jn),Nr(f));for(var i=f.first;i!==null;){var n=i.next,v=(i.f&_h)!==0||(i.f&kr)!==0;BM(i,v?t:!1),i=n}var S=f.nodes&&f.nodes.t;if(S!==null)for(const s of S)(s.is_global||t)&&s.in()}}function UM(f,t){if(f.nodes)for(var i=f.nodes.start,n=f.nodes.end;i!==null;){var v=i===n?null:Dp(i);t.append(i),i=v}}let wm=!1,ml=!1;function QS(f){ml=f}let ti=null,Br=!1;function yr(f){ti=f}let hi=null;function Tr(f){hi=f}let mr=null;function VM(f){ti!==null&&(mr===null?mr=[f]:mr.push(f))}let ys=null,zs=0,lr=null;function XF(f){lr=f}let zM=1,xh=0,Lh=xh;function ZS(f){Lh=f}function GM(){return++zM}function yf(f){var t=f.f;if((t&jn)!==0)return!0;if(t&Kn&&(f.f&=~Wh),(t&xr)!==0){for(var i=f.deps,n=i.length,v=0;v<n;v++){var S=i[v];if(yf(S)&&SM(S),S.wv>f.wv)return!0}(t&vr)!==0&&kn===null&&Ji(f,An)}return!1}function _M(f,t,i=!0){var n=f.reactions;if(n!==null&&!(mr!==null&&bc.call(mr,f)))for(var v=0;v<n.length;v++){var S=n[v];(S.f&Kn)!==0?_M(S,t,!1):t===S&&(i?Ji(S,jn):(S.f&An)!==0&&Ji(S,xr),Nr(S))}}function WM(f){var h;var t=ys,i=zs,n=lr,v=ti,S=mr,s=Vi,T=Br,e=Lh,a=f.f;ys=null,zs=0,lr=null,ti=(a&(kr|su))===0?f:null,mr=null,Ic(f.ctx),Br=!1,Lh=++xh,f.ac!==null&&(_g(()=>{f.ac.abort(nc)}),f.ac=null);try{f.f|=Jx;var m=f.fn,c=m(),o=f.deps,u=Ze==null?void 0:Ze.is_fork;if(ys!==null){var r;if(u||jm(f,zs),o!==null&&zs>0)for(o.length=zs+ys.length,r=0;r<ys.length;r++)o[zs+r]=ys[r];else f.deps=o=ys;if(fT()&&(f.f&vr)!==0)for(r=zs;r<o.length;r++)((h=o[r]).reactions??(h.reactions=[])).push(f)}else!u&&o!==null&&zs<o.length&&(jm(f,zs),o.length=zs);if(Lp()&&lr!==null&&!Br&&o!==null&&(f.f&(Kn|xr|jn))===0)for(r=0;r<lr.length;r++)_M(lr[r],f);if(v!==null&&v!==f){if(xh++,v.deps!==null)for(let d=0;d<i;d+=1)v.deps[d].rv=xh;if(t!==null)for(const d of t)d.rv=xh;lr!==null&&(n===null?n=lr:n.push(...lr))}return(f.f&sl)!==0&&(f.f^=sl),c}catch(d){return fM(d)}finally{f.f^=Jx,ys=t,zs=i,lr=n,ti=v,mr=S,Ic(s),Br=T,Lh=e}}function kF(f,t){let i=t.reactions;if(i!==null){var n=UL.call(i,f);if(n!==-1){var v=i.length-1;v===0?i=t.reactions=null:(i[n]=i[v],i.pop())}}if(i===null&&(t.f&Kn)!==0&&(ys===null||!bc.call(ys,t))){var S=t;(S.f&vr)!==0&&(S.f^=vr,S.f&=~Wh),uT(S),EM(S),jm(S,0)}}function jm(f,t){var i=f.deps;if(i!==null)for(var n=t;n<i.length;n++)kF(f,i[n])}function Oc(f){var t=f.f;if((t&ro)===0){Ji(f,An);var i=hi,n=wm;hi=f,wm=!0;try{(t&(yo|rT))!==0?WF(f):DM(f),FM(f);var v=WM(f);f.teardown=typeof v=="function"?v:null,f.wv=zM;var S;Qx&&mF&&(f.f&jn)!==0&&f.deps}finally{wm=n,hi=i}}}async function YF(){await Promise.resolve(),TF()}function Y(f){var t=f.f,i=(t&Kn)!==0;if(ti!==null&&!Br){var n=hi!==null&&(hi.f&ro)!==0;if(!n&&(mr===null||!bc.call(mr,f))){var v=ti.deps;if((ti.f&Jx)!==0)f.rv<xh&&(f.rv=xh,ys===null&&v!==null&&v[zs]===f?zs++:ys===null?ys=[f]:ys.push(f));else{(ti.deps??(ti.deps=[])).push(f);var S=f.reactions;S===null?f.reactions=[ti]:bc.call(S,ti)||S.push(ti)}}}if(ml&&al.has(f))return al.get(f);if(i){var s=f;if(ml){var T=s.v;return((s.f&An)===0&&s.reactions!==null||XM(s))&&(T=cT(s)),al.set(s,T),T}var e=(s.f&vr)===0&&!Br&&ti!==null&&(wm||(ti.f&vr)!==0),a=s.deps===null;yf(s)&&(e&&(s.f|=vr),SM(s)),e&&!a&&HM(s)}if(kn!=null&&kn.has(f))return kn.get(f);if((f.f&sl)!==0)throw f.v;return f.v}function HM(f){if(f.deps!==null){f.f|=vr;for(const t of f.deps)(t.reactions??(t.reactions=[])).push(f),(t.f&Kn)!==0&&(t.f&vr)===0&&HM(t)}}function XM(f){if(f.v===Fn)return!0;if(f.deps===null)return!1;for(const t of f.deps)if(al.has(t)||(t.f&Kn)!==0&&XM(t))return!0;return!1}function kt(f){var t=Br;try{return Br=!0,f()}finally{Br=t}}function wn(f){if(!(typeof f!="object"||!f||f instanceof EventTarget)){if(xa in f)hy(f);else if(!Array.isArray(f))for(let t in f){const i=f[t];typeof i=="object"&&i&&xa in i&&hy(i)}}}function hy(f,t=new Set){if(typeof f=="object"&&f!==null&&!(f instanceof EventTarget)&&!t.has(f)){t.add(f),f instanceof Date&&f.getTime();for(let n in f)try{hy(f[n],t)}catch{}const i=sT(f);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const n=iM(i);for(let v in n){const S=n[v].get;if(S)try{S.call(f)}catch{}}}}}function $F(f){return f.endsWith("capture")&&f!=="gotpointercapture"&&f!=="lostpointercapture"}const KF=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function jF(f){return KF.includes(f)}const QF={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function ZF(f){return f=f.toLowerCase(),QF[f]??f}const JF=["touchstart","touchmove"];function qF(f){return JF.includes(f)}const kM=new Set,uy=new Set;function YM(f,t,i,n={}){function v(S){if(n.capture||wd.call(t,S),!S.cancelBubble)return _g(()=>i==null?void 0:i.call(this,S))}return f.startsWith("pointer")||f.startsWith("touch")||f==="wheel"?ya(()=>{t.addEventListener(f,v,n)}):t.addEventListener(f,v,n),v}function qe(f,t,i,n,v){var S={capture:n,passive:v},s=YM(f,t,i,S);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Op(()=>{t.removeEventListener(f,s,S)})}function tD(f){for(var t=0;t<f.length;t++)kM.add(f[t]);for(var i of uy)i(f)}let JS=null;function wd(f){var d;var t=this,i=t.ownerDocument,n=f.type,v=((d=f.composedPath)==null?void 0:d.call(f))||[],S=v[0]||f.target;JS=f;var s=0,T=JS===f&&f.__root;if(T){var e=v.indexOf(T);if(e!==-1&&(t===document||t===window)){f.__root=t;return}var a=v.indexOf(t);if(a===-1)return;e<=a&&(s=e)}if(S=v[s]||f.target,S!==t){VL(f,"currentTarget",{configurable:!0,get(){return S||i}});var m=ti,c=hi;yr(null),Tr(null);try{for(var o,u=[];S!==null;){var r=S.assignedSlot||S.parentNode||S.host||null;try{var h=S["__"+n];h!=null&&(!S.disabled||f.target===S)&&h.call(S,f)}catch(l){o?u.push(l):o=l}if(f.cancelBubble||r===t||r===null)break;S=r}if(o){for(let l of u)queueMicrotask(()=>{throw l});throw o}}finally{f.__root=t,delete f.currentTarget,yr(m),Tr(c)}}}function $M(f){var t=document.createElement("template");return t.innerHTML=f.replaceAll("<!>","<!---->"),t.content}function tp(f,t){var i=hi;i.nodes===null&&(i.nodes={start:f,end:t,a:null,t:null})}function Jt(f,t){var i=(t&lF)!==0,n=(t&hF)!==0,v,S=!f.startsWith("<!>");return()=>{v===void 0&&(v=$M(S?f:"<!>"+f),i||(v=Dc(v)));var s=n||CM?document.importNode(v,!0):v.cloneNode(!0);if(i){var T=Dc(s),e=s.lastChild;tp(T,e)}else tp(s,s);return s}}function eD(f,t,i="svg"){var n=!f.startsWith("<!>"),v=`<${i}>${n?f:"<!>"+f}</${i}>`,S;return()=>{if(!S){var s=$M(v),T=Dc(s);S=Dc(T)}var e=S.cloneNode(!0);return tp(e,e),e}}function iD(f,t){return eD(f,t,"svg")}function Ui(){var f=document.createDocumentFragment(),t=document.createComment(""),i=ao();return f.append(t,i),tp(t,i),f}function _t(f,t){f!==null&&f.before(t)}function Me(f,t){var i=t==null?"":typeof t=="object"?t+"":t;i!==(f.__t??(f.__t=f.nodeValue))&&(f.__t=i,f.nodeValue=i+"")}function nD(f,t){return sD(f,t)}const Pu=new Map;function sD(f,{target:t,anchor:i,props:n={},events:v,context:S,intro:s=!0}){DF();var T=new Set,e=c=>{for(var o=0;o<c.length;o++){var u=c[o];if(!T.has(u)){T.add(u);var r=qF(u);t.addEventListener(u,wd,{passive:r});var h=Pu.get(u);h===void 0?(document.addEventListener(u,wd,{passive:r}),Pu.set(u,1)):Pu.set(u,h+1)}}};e(zg(kM)),uy.add(e);var a=void 0,m=GF(()=>{var c=i??t.appendChild(ao());return AF(c,{pending:()=>{}},o=>{er({});var u=Vi;S&&(u.c=S),v&&(n.$$events=v),a=f(o,n)||{},ir()}),()=>{var r;for(var o of T){t.removeEventListener(o,wd);var u=Pu.get(o);--u===0?(document.removeEventListener(o,wd),Pu.delete(o)):Pu.set(o,u)}uy.delete(e),c!==i&&((r=c.parentNode)==null||r.removeChild(c))}});return rD.set(a,m),a}let rD=new WeakMap;var Fr,ua,Gs,bh,Pp,bp,Ug;class KM{constructor(t,i=!0){ta(this,"anchor");je(this,Fr,new Map);je(this,ua,new Map);je(this,Gs,new Map);je(this,bh,new Set);je(this,Pp,!0);je(this,bp,()=>{var t=Ze;if(Nt(this,Fr).has(t)){var i=Nt(this,Fr).get(t),n=Nt(this,ua).get(i);if(n)pT(n),Nt(this,bh).delete(i);else{var v=Nt(this,Gs).get(i);v&&(Nt(this,ua).set(i,v.effect),Nt(this,Gs).delete(i),v.fragment.lastChild.remove(),this.anchor.before(v.fragment),n=v.effect)}for(const[S,s]of Nt(this,Fr)){if(Nt(this,Fr).delete(S),S===t)break;const T=Nt(this,Gs).get(s);T&&(Yn(T.effect),Nt(this,Gs).delete(s))}for(const[S,s]of Nt(this,ua)){if(S===i||Nt(this,bh).has(S))continue;const T=()=>{if(Array.from(Nt(this,Fr).values()).includes(S)){var a=document.createDocumentFragment();UM(s,a),a.append(ao()),Nt(this,Gs).set(S,{effect:s,fragment:a})}else Yn(s);Nt(this,bh).delete(S),Nt(this,ua).delete(S)};Nt(this,Pp)||!n?(Nt(this,bh).add(S),Ih(s,T,!1)):T()}}});je(this,Ug,t=>{Nt(this,Fr).delete(t);const i=Array.from(Nt(this,Fr).values());for(const[n,v]of Nt(this,Gs))i.includes(n)||(Yn(v.effect),Nt(this,Gs).delete(n))});this.anchor=t,We(this,Pp,i)}ensure(t,i){var n=Ze,v=PM();if(i&&!Nt(this,ua).has(t)&&!Nt(this,Gs).has(t))if(v){var S=document.createDocumentFragment(),s=ao();S.append(s),Nt(this,Gs).set(t,{effect:Ts(()=>i(s)),fragment:S})}else Nt(this,ua).set(t,Ts(()=>i(this.anchor)));if(Nt(this,Fr).set(n,t),v){for(const[T,e]of Nt(this,ua))T===t?n.unskip_effect(e):n.skip_effect(e);for(const[T,e]of Nt(this,Gs))T===t?n.unskip_effect(e.effect):n.skip_effect(e.effect);n.oncommit(Nt(this,bp)),n.ondiscard(Nt(this,Ug))}else Nt(this,bp).call(this)}}Fr=new WeakMap,ua=new WeakMap,Gs=new WeakMap,bh=new WeakMap,Pp=new WeakMap,bp=new WeakMap,Ug=new WeakMap;function Ie(f,t,i=!1){var n=new KM(f),v=i?_h:0;function S(s,T){n.ensure(s,T)}Wg(()=>{var s=!1;t((T,e=!0)=>{s=!0,S(e,T)}),s||S(!1,null)},v)}function nn(f,t){return t}function aD(f,t,i){for(var n=[],v=t.length,S,s=t.length,T=0;T<v;T++){let c=t[T];Ih(c,()=>{if(S){if(S.pending.delete(c),S.done.add(c),S.pending.size===0){var o=f.outrogroups;cy(zg(S.done)),o.delete(S),o.size===0&&(f.outrogroups=null)}}else s-=1},!1)}if(s===0){var e=n.length===0&&i!==null;if(e){var a=i,m=a.parentNode;OF(m),m.append(a),f.items.clear()}cy(t,!e)}else S={pending:new Set(t),done:new Set},(f.outrogroups??(f.outrogroups=new Set)).add(S)}function cy(f,t=!0){for(var i=0;i<f.length;i++)Yn(f[i],t)}var qS;function sn(f,t,i,n,v,S=null){var s=f,T=new Map,e=(t&oM)!==0;if(e){var a=f;s=a.appendChild(ao())}var m=null,c=pn(()=>{var l=i();return Vg(l)?l:l==null?[]:zg(l)}),o,u=!0;function r(){d.fallback=m,oD(d,o,s,t,n),m!==null&&(o.length===0?(m.f&Za)===0?pT(m):(m.f^=Za,Ad(m,null,s)):Ih(m,()=>{m=null}))}var h=Wg(()=>{o=Y(c);for(var l=o.length,p=new Set,g=Ze,x=PM(),y=0;y<l;y+=1){var E=o[y],w=n(E,y),C=u?null:T.get(w);C?(C.v&&Fc(C.v,E),C.i&&Fc(C.i,y),x&&g.unskip_effect(C.e)):(C=lD(T,u?s:qS??(qS=ao()),E,w,y,v,t,i),u||(C.e.f|=Za),T.set(w,C)),p.add(w)}if(l===0&&S&&!m&&(u?m=Ts(()=>S(s)):(m=Ts(()=>S(qS??(qS=ao()))),m.f|=Za)),l>p.size&&XL(),!u)if(x){for(const[A,M]of T)p.has(A)||g.skip_effect(M.e);g.oncommit(r),g.ondiscard(()=>{})}else r();Y(c)}),d={effect:h,items:T,outrogroups:null,fallback:m};u=!1}function ed(f){for(;f!==null&&(f.f&kr)===0;)f=f.next;return f}function oD(f,t,i,n,v){var M,R,P,b,F,I,L,D,O;var S=(n&iF)!==0,s=t.length,T=f.items,e=ed(f.effect.first),a,m=null,c,o=[],u=[],r,h,d,l;if(S)for(l=0;l<s;l+=1)r=t[l],h=v(r,l),d=T.get(h).e,(d.f&Za)===0&&((R=(M=d.nodes)==null?void 0:M.a)==null||R.measure(),(c??(c=new Set)).add(d));for(l=0;l<s;l+=1){if(r=t[l],h=v(r,l),d=T.get(h).e,f.outrogroups!==null)for(const z of f.outrogroups)z.pending.delete(d),z.done.delete(d);if((d.f&Za)!==0)if(d.f^=Za,d===e)Ad(d,null,i);else{var p=m?m.next:e;d===f.effect.last&&(f.effect.last=d.prev),d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev),Fo(f,m,d),Fo(f,d,p),Ad(d,p,i),m=d,o=[],u=[],e=ed(m.next);continue}if((d.f&$s)!==0&&(pT(d),S&&((b=(P=d.nodes)==null?void 0:P.a)==null||b.unfix(),(c??(c=new Set)).delete(d))),d!==e){if(a!==void 0&&a.has(d)){if(o.length<u.length){var g=u[0],x;m=g.prev;var y=o[0],E=o[o.length-1];for(x=0;x<o.length;x+=1)Ad(o[x],g,i);for(x=0;x<u.length;x+=1)a.delete(u[x]);Fo(f,y.prev,E.next),Fo(f,m,y),Fo(f,E,g),e=g,m=E,l-=1,o=[],u=[]}else a.delete(d),Ad(d,e,i),Fo(f,d.prev,d.next),Fo(f,d,m===null?f.effect.first:m.next),Fo(f,m,d),m=d;continue}for(o=[],u=[];e!==null&&e!==d;)(a??(a=new Set)).add(e),u.push(e),e=ed(e.next);if(e===null)continue}(d.f&Za)===0&&o.push(d),m=d,e=ed(d.next)}if(f.outrogroups!==null){for(const z of f.outrogroups)z.pending.size===0&&(cy(zg(z.done)),(F=f.outrogroups)==null||F.delete(z));f.outrogroups.size===0&&(f.outrogroups=null)}if(e!==null||a!==void 0){var w=[];if(a!==void 0)for(d of a)(d.f&$s)===0&&w.push(d);for(;e!==null;)(e.f&$s)===0&&e!==f.fallback&&w.push(e),e=ed(e.next);var C=w.length;if(C>0){var A=(n&oM)!==0&&s===0?i:null;if(S){for(l=0;l<C;l+=1)(L=(I=w[l].nodes)==null?void 0:I.a)==null||L.measure();for(l=0;l<C;l+=1)(O=(D=w[l].nodes)==null?void 0:D.a)==null||O.fix()}aD(f,w,A)}}S&&ya(()=>{var z,W;if(c!==void 0)for(d of c)(W=(z=d.nodes)==null?void 0:z.a)==null||W.apply()})}function lD(f,t,i,n,v,S,s,T){var e=(s&tF)!==0?(s&nF)===0?de(i,!1,!1):vl(i):null,a=(s&eF)!==0?vl(v):null;return{v:e,i:a,e:Ts(()=>(S(t,e??i,a??v,T),()=>{f.delete(n)}))}}function Ad(f,t,i){if(f.nodes)for(var n=f.nodes.start,v=f.nodes.end,S=t&&(t.f&Za)===0?t.nodes.start:i;n!==null;){var s=Dp(n);if(S.before(n),n===v)return;n=s}}function Fo(f,t,i){t===null?f.effect.first=i:t.next=i,i===null?f.effect.last=t:i.prev=t}function tn(f,t,i,n,v){var T;var S=(T=t.$$slots)==null?void 0:T[i],s=!1;S===!0&&(S=t[i==="default"?"children":i],s=!0),S===void 0||S(f,s?()=>n:n)}function hD(f,t,i,n,v,S){var s=null,T=f,e=new KM(T,!1);Wg(()=>{const a=t()||null;var m=cF;if(a===null){e.ensure(null,null);return}return e.ensure(a,c=>{if(a){if(s=document.createElementNS(m,a),tp(s,s),n){var o=s.appendChild(ao());n(s,o)}hi.nodes.end=s,c.before(s)}}),()=>{}},_h),Op(()=>{})}function uD(f,t){var i=void 0,n;LM(()=>{i!==(i=t())&&(n&&(Yn(n),n=null),i&&(n=Ts(()=>{dT(()=>i(f))})))})}function jM(f){var t,i,n="";if(typeof f=="string"||typeof f=="number")n+=f;else if(typeof f=="object")if(Array.isArray(f)){var v=f.length;for(t=0;t<v;t++)f[t]&&(i=jM(f[t]))&&(n&&(n+=" "),n+=i)}else for(i in f)f[i]&&(n&&(n+=" "),n+=i);return n}function cD(){for(var f,t,i=0,n="",v=arguments.length;i<v;i++)(f=arguments[i])&&(t=jM(f))&&(n&&(n+=" "),n+=t);return n}function fD(f){return typeof f=="object"?cD(f):f??""}const t2=[...` 	
\r\fÂ \v\uFEFF`];function dD(f,t,i){var n=f==null?"":""+f;if(t&&(n=n?n+" "+t:t),i){for(var v in i)if(i[v])n=n?n+" "+v:v;else if(n.length)for(var S=v.length,s=0;(s=n.indexOf(v,s))>=0;){var T=s+S;(s===0||t2.includes(n[s-1]))&&(T===n.length||t2.includes(n[T]))?n=(s===0?"":n.substring(0,s))+n.substring(T+1):s=T}}return n===""?null:n}function e2(f,t=!1){var i=t?" !important;":";",n="";for(var v in f){var S=f[v];S!=null&&S!==""&&(n+=" "+v+": "+S+i)}return n}function D0(f){return f[0]!=="-"||f[1]!=="-"?f.toLowerCase():f}function pD(f,t){if(t){var i="",n,v;if(Array.isArray(t)?(n=t[0],v=t[1]):n=t,f){f=String(f).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var S=!1,s=0,T=!1,e=[];n&&e.push(...Object.keys(n).map(D0)),v&&e.push(...Object.keys(v).map(D0));var a=0,m=-1;const h=f.length;for(var c=0;c<h;c++){var o=f[c];if(T?o==="/"&&f[c-1]==="*"&&(T=!1):S?S===o&&(S=!1):o==="/"&&f[c+1]==="*"?T=!0:o==='"'||o==="'"?S=o:o==="("?s++:o===")"&&s--,!T&&S===!1&&s===0){if(o===":"&&m===-1)m=c;else if(o===";"||c===h-1){if(m!==-1){var u=D0(f.substring(a,m).trim());if(!e.includes(u)){o!==";"&&c++;var r=f.substring(a,c).trim();i+=" "+r+";"}}a=c+1,m=-1}}}}return n&&(i+=e2(n)),v&&(i+=e2(v,!0)),i=i.trim(),i===""?null:i}return f==null?null:String(f)}function Qe(f,t,i,n,v,S){var s=f.__className;if(s!==i||s===void 0){var T=dD(i,n,S);T==null?f.removeAttribute("class"):t?f.className=T:f.setAttribute("class",T),f.__className=i}else if(S&&v!==S)for(var e in S){var a=!!S[e];(v==null||a!==!!v[e])&&f.classList.toggle(e,a)}return S}function O0(f,t={},i,n){for(var v in i){var S=i[v];t[v]!==S&&(i[v]==null?f.style.removeProperty(v):f.style.setProperty(v,S,n))}}function ep(f,t,i,n){var v=f.__style;if(v!==t){var S=pD(t,n);S==null?f.removeAttribute("style"):f.style.cssText=S,f.__style=t}else n&&(Array.isArray(n)?(O0(f,i==null?void 0:i[0],n[0]),O0(f,i==null?void 0:i[1],n[1],"important")):O0(f,i,n));return n}function fy(f,t,i=!1){if(f.multiple){if(t==null)return;if(!Vg(t))return dF();for(var n of f.options)n.selected=t.includes(i2(n));return}for(n of f.options){var v=i2(n);if(FF(v,t)){n.selected=!0;return}}(!i||t!==void 0)&&(f.selectedIndex=-1)}function vD(f){var t=new MutationObserver(()=>{fy(f,f.__value)});t.observe(f,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Op(()=>{t.disconnect()})}function i2(f){return"__value"in f?f.__value:f.value}const id=Symbol("class"),nd=Symbol("style"),QM=Symbol("is custom element"),ZM=Symbol("is html");function mD(f,t){t?f.hasAttribute("selected")||f.setAttribute("selected",""):f.removeAttribute("selected")}function dy(f,t,i,n){var v=JM(f);v[t]!==(v[t]=i)&&(t==="loading"&&(f[WL]=i),i==null?f.removeAttribute(t):typeof i!="string"&&qM(f).includes(t)?f[t]=i:f.setAttribute(t,i))}function gD(f,t,i,n,v=!1,S=!1){var s=JM(f),T=s[QM],e=!s[ZM],a=t||{},m=f.tagName==="OPTION";for(var c in t)c in i||(i[c]=null);i.class?i.class=fD(i.class):i[id]&&(i.class=null),i[nd]&&(i.style??(i.style=null));var o=qM(f);for(const g in i){let x=i[g];if(m&&g==="value"&&x==null){f.value=f.__value="",a[g]=x;continue}if(g==="class"){var u=f.namespaceURI==="http://www.w3.org/1999/xhtml";Qe(f,u,x,n,t==null?void 0:t[id],i[id]),a[g]=x,a[id]=i[id];continue}if(g==="style"){ep(f,x,t==null?void 0:t[nd],i[nd]),a[g]=x,a[nd]=i[nd];continue}var r=a[g];if(!(x===r&&!(x===void 0&&f.hasAttribute(g)))){a[g]=x;var h=g[0]+g[1];if(h!=="$$")if(h==="on"){const y={},E="$$"+g;let w=g.slice(2);var d=jF(w);if($F(w)&&(w=w.slice(0,-7),y.capture=!0),!d&&r){if(x!=null)continue;f.removeEventListener(w,a[E],y),a[E]=null}if(x!=null)if(d)f[`__${w}`]=x,tD([w]);else{let C=function(A){a[g].call(this,A)};a[E]=YM(w,f,C,y)}else d&&(f[`__${w}`]=void 0)}else if(g==="style")dy(f,g,x);else if(g==="autofocus")NF(f,!!x);else if(!T&&(g==="__value"||g==="value"&&x!=null))f.value=f.__value=x;else if(g==="selected"&&m)mD(f,x);else{var l=g;e||(l=ZF(l));var p=l==="defaultValue"||l==="defaultChecked";if(x==null&&!T&&!p)if(s[g]=null,l==="value"||l==="checked"){let y=f;const E=t===void 0;if(l==="value"){let w=y.defaultValue;y.removeAttribute(l),y.defaultValue=w,y.value=y.__value=E?w:null}else{let w=y.defaultChecked;y.removeAttribute(l),y.defaultChecked=w,y.checked=E?w:!1}}else f.removeAttribute(g);else p||o.includes(l)&&(T||typeof x!="string")?(f[l]=x,l in s&&(s[l]=Fn)):typeof x!="function"&&dy(f,l,x)}}}return a}function n2(f,t,i=[],n=[],v=[],S,s=!1,T=!1){TM(v,i,n,e=>{var a=void 0,m={},c=f.nodeName==="SELECT",o=!1;if(LM(()=>{var r=t(...e.map(Y)),h=gD(f,a,r,S,s,T);o&&c&&"value"in r&&fy(f,r.value);for(let l of Object.getOwnPropertySymbols(m))r[l]||Yn(m[l]);for(let l of Object.getOwnPropertySymbols(r)){var d=r[l];l.description===fF&&(!a||d!==a[l])&&(m[l]&&Yn(m[l]),m[l]=Ts(()=>uD(f,()=>d))),h[l]=d}a=h}),c){var u=f;dT(()=>{fy(u,a.value,!0),vD(u)})}o=!0})}function JM(f){return f.__attributes??(f.__attributes={[QM]:f.nodeName.includes("-"),[ZM]:f.namespaceURI===uF})}var s2=new Map;function qM(f){var t=f.getAttribute("is")||f.nodeName,i=s2.get(t);if(i)return i;s2.set(t,i=[]);for(var n,v=f,S=Element.prototype;S!==v;){n=iM(v);for(var s in n)n[s].set&&i.push(s);v=sT(v)}return i}function N0(f,t,i=t){var n=new WeakSet;UF(f,"input",async v=>{var S=v?f.defaultValue:f.value;if(S=B0(f)?U0(S):S,i(S),Ze!==null&&n.add(Ze),await YF(),S!==(S=t())){var s=f.selectionStart,T=f.selectionEnd,e=f.value.length;if(f.value=S??"",T!==null){var a=f.value.length;s===T&&T===e&&a>e?(f.selectionStart=a,f.selectionEnd=a):(f.selectionStart=s,f.selectionEnd=Math.min(T,a))}}}),kt(t)==null&&f.value&&(i(B0(f)?U0(f.value):f.value),Ze!==null&&n.add(Ze)),Np(()=>{var v=t();if(f===document.activeElement){var S=qx??Ze;if(n.has(S))return}B0(f)&&v===U0(f.value)||f.type==="date"&&!v&&!f.value||v!==f.value&&(f.value=v??"")})}function B0(f){var t=f.type;return t==="number"||t==="range"}function U0(f){return f===""?null:+f}function py(f,t,i){var n=so(f,t);n&&n.set&&(f[t]=i,Op(()=>{f[t]=null}))}function r2(f,t){return f===t||(f==null?void 0:f[xa])===t}function Qm(f={},t,i,n){return dT(()=>{var v,S;return Np(()=>{v=S,S=[],kt(()=>{f!==i(...S)&&(t(f,...S),v&&r2(i(...v),f)&&t(null,...v))})}),()=>{ya(()=>{S&&r2(i(...S),f)&&t(null,...S)})}}),f}function xD(f){return function(...t){var i=t[0];i.target===this&&(f==null||f.apply(this,t))}}function tR(f){return function(...t){var i=t[0];return i.preventDefault(),f==null?void 0:f.apply(this,t)}}function Sr(f=!1){const t=Vi,i=t.l.u;if(!i)return;let n=()=>wn(t.s);if(f){let v=0,S={};const s=Fp(()=>{let T=!1;const e=t.s;for(const a in e)e[a]!==S[a]&&(S[a]=e[a],T=!0);return T&&v++,v});n=()=>Y(s)}i.b.length&&zF(()=>{a2(t,n),Zx(i.b)}),ly(()=>{const v=kt(()=>i.m.map(_L));return()=>{for(const S of v)typeof S=="function"&&S()}}),i.a.length&&ly(()=>{a2(t,n),Zx(i.a)})}function a2(f,t){if(f.l.s)for(const i of f.l.s)Y(i);t()}let Bv=!1;function yD(f){var t=Bv;try{return Bv=!1,[f(),Bv]}finally{Bv=t}}const TD={get(f,t){if(!f.exclude.includes(t))return Y(f.version),t in f.special?f.special[t]():f.props[t]},set(f,t,i){if(!(t in f.special)){var n=hi;try{Tr(f.parent_effect),f.special[t]=Oe({get[t](){return f.props[t]}},t,lM)}finally{Tr(n)}}return f.special[t](i),$S(f.version),!0},getOwnPropertyDescriptor(f,t){if(!f.exclude.includes(t)&&t in f.props)return{enumerable:!0,configurable:!0,value:f.props[t]}},deleteProperty(f,t){return f.exclude.includes(t)||(f.exclude.push(t),$S(f.version)),!0},has(f,t){return f.exclude.includes(t)?!1:t in f.props},ownKeys(f){return Reflect.ownKeys(f.props).filter(t=>!f.exclude.includes(t))}};function yn(f,t){return new Proxy({props:f,exclude:t,special:{},version:vl(0),parent_effect:hi},TD)}const ED={get(f,t){let i=f.props.length;for(;i--;){let n=f.props[i];if(td(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(f,t,i){let n=f.props.length;for(;n--;){let v=f.props[n];td(v)&&(v=v());const S=so(v,t);if(S&&S.set)return S.set(i),!0}return!1},getOwnPropertyDescriptor(f,t){let i=f.props.length;for(;i--;){let n=f.props[i];if(td(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const v=so(n,t);return v&&!v.configurable&&(v.configurable=!0),v}}},has(f,t){if(t===xa||t===aM)return!1;for(let i of f.props)if(td(i)&&(i=i()),i!=null&&t in i)return!0;return!1},ownKeys(f){const t=[];for(let i of f.props)if(td(i)&&(i=i()),!!i){for(const n in i)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(i))t.includes(n)||t.push(n)}return t}};function zn(...f){return new Proxy({props:f},ED)}function Oe(f,t,i,n){var g;var v=!xf||(i&rF)!==0,S=(i&aF)!==0,s=(i&oF)!==0,T=n,e=!0,a=()=>(e&&(e=!1,T=s?kt(n):n),T),m;if(S){var c=xa in f||aM in f;m=((g=so(f,t))==null?void 0:g.set)??(c&&t in f?x=>f[t]=x:void 0)}var o,u=!1;S?[o,u]=yD(()=>f[t]):o=f[t],o===void 0&&n!==void 0&&(o=a(),m&&(v&&jL(),m(o)));var r;if(v?r=()=>{var x=f[t];return x===void 0?a():(e=!0,x)}:r=()=>{var x=f[t];return x!==void 0&&(T=void 0),x===void 0?T:x},v&&(i&lM)===0)return r;if(m){var h=f.$$legacy;return(function(x,y){return arguments.length>0?((!v||!y||h||u)&&m(y?r():x),x):r()})}var d=!1,l=((i&sF)!==0?Fp:pn)(()=>(d=!1,r()));S&&Y(l);var p=hi;return(function(x,y){if(arguments.length>0){const E=y?Y(l):v&&S?sc(x):x;return ht(l,E),d=!0,T!==void 0&&(T=E),x}return ml&&d||(p.f&ro)!==0?l.v:Y(l)})}function ip(f){Vi===null&&hT(),xf&&Vi.l!==null?wD(Vi).m.push(f):ly(()=>{const t=kt(f);if(typeof t=="function")return t})}function vT(f){Vi===null&&hT(),ip(()=>()=>kt(f))}function SD(f,t,{bubbles:i=!1,cancelable:n=!1}={}){return new CustomEvent(f,{detail:t,bubbles:i,cancelable:n})}function bl(){const f=Vi;return f===null&&hT(),(t,i,n)=>{var S;const v=(S=f.s.$$events)==null?void 0:S[t];if(v){const s=Vg(v)?v.slice():[v],T=SD(t,i,n);for(const e of s)e.call(f.x,T);return!T.defaultPrevented}return!0}}function wD(f){var t=f.l;return t.u??(t.u={a:[],b:[],m:[]})}const AD="5";var eM;typeof window<"u"&&((eM=window.__svelte??(window.__svelte={})).v??(eM.v=new Set)).add(AD);gF();/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const CD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var MD=iD("<svg><!><!></svg>");function Gn(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]),n=yn(i,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);er(t,!1);let v=Oe(t,"name",8,void 0),S=Oe(t,"color",8,"currentColor"),s=Oe(t,"size",8,24),T=Oe(t,"strokeWidth",8,2),e=Oe(t,"absoluteStrokeWidth",8,!1),a=Oe(t,"iconNode",24,()=>[]);const m=(...r)=>r.filter((h,d,l)=>!!h&&l.indexOf(h)===d).join(" ");Sr();var c=MD();n2(c,(r,h)=>({...CD,...n,width:s(),height:s(),stroke:S(),"stroke-width":r,class:h}),[()=>(wn(e()),wn(T()),wn(s()),kt(()=>e()?Number(T())*24/Number(s()):T())),()=>(wn(v()),wn(i),kt(()=>m("lucide-icon","lucide",v()?`lucide-${v()}`:"",i.class)))]);var o=ct(c);sn(o,1,a,nn,(r,h)=>{var d=Sd(()=>Ed(Y(h),2));let l=()=>Y(d)[0],p=()=>Y(d)[1];var g=Ui(),x=xi(g);hD(x,l,!0,(y,E)=>{n2(y,()=>({...p()}))}),_t(r,g)});var u=gt(o);tn(u,t,"default",{}),_t(f,c),ir()}function eR(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];Gn(f,zn({name:"circle-help"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function vy(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["line",{x1:"12",x2:"12",y1:"2",y2:"22"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}]];Gn(f,zn({name:"dollar-sign"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function RD(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];Gn(f,zn({name:"info"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function PD(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]];Gn(f,zn({name:"lock"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function bD(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}],["polyline",{points:"10 17 15 12 10 7"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}]];Gn(f,zn({name:"log-in"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function ID(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["polygon",{points:"6 3 20 12 6 21 6 3"}]];Gn(f,zn({name:"play"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function Ud(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];Gn(f,zn({name:"rotate-ccw"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function o2(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];Gn(f,zn({name:"settings"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function LD(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]];Gn(f,zn({name:"smile"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function FD(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}],["polyline",{points:"16 17 22 17 22 11"}]];Gn(f,zn({name:"trending-down"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function DD(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}],["polyline",{points:"16 7 22 7 22 13"}]];Gn(f,zn({name:"trending-up"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function my(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}],["path",{d:"M4 22h16"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"}]];Gn(f,zn({name:"trophy"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function OD(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];Gn(f,zn({name:"user-plus"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function iR(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];Gn(f,zn({name:"user"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function ND(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]];Gn(f,zn({name:"volume-2"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function BD(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15"}]];Gn(f,zn({name:"volume-x"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function Hg(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];Gn(f,zn({name:"x"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}function UD(f,t){const i=yn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.475.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];Gn(f,zn({name:"zap"},()=>i,{get iconNode(){return n},children:(v,S)=>{var s=Ui(),T=xi(s);tn(T,t,"default",{}),_t(v,s)},$$slots:{default:!0}}))}var VD=Jt('<div class="relative animate-in fade-in slide-in-from-top-2 duration-300"><!> <input type="text" placeholder="Display Nickname" class="w-full bg-black/40 border border-white/10 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-zinc-500 focus:outline-none focus:border-emerald-500/50 transition-colors shadow-inner disabled:opacity-50"/></div>'),zD=Jt('<p class="text-red-400 text-xs font-bold text-center animate-pulse"> </p>'),GD=Jt('<div class="w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"></div> Processing...',1),_D=Jt("<!> Sign In",1),WD=Jt("<!> Create Account",1),HD=Jt('<div class="space-y-4"><div class="relative"><!> <input type="text" placeholder="Username" class="w-full bg-black/40 border border-white/10 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-zinc-500 focus:outline-none focus:border-emerald-500/50 transition-colors shadow-inner disabled:opacity-50"/> <p class="text-[9px] text-zinc-500 mt-1 ml-2 uppercase font-bold tracking-tighter">Note: Usernames are case insensitive</p></div> <div class="relative"><!> <input type="password" placeholder="Password" class="w-full bg-black/40 border border-white/10 rounded-xl py-3.5 pl-12 pr-4 text-white placeholder-zinc-500 focus:outline-none focus:border-emerald-500/50 transition-colors shadow-inner disabled:opacity-50"/></div> <!></div> <!> <button type="submit" class="w-full py-4 bg-emerald-500 hover:bg-emerald-400 text-black font-black uppercase tracking-widest rounded-xl transition-all shadow-lg shadow-emerald-500/20 active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <div class="flex items-center justify-between px-2"><button type="button" class="text-xs font-black text-zinc-400 hover:text-white uppercase tracking-tighter transition-colors disabled:opacity-50"> </button> <button type="button" class="text-xs font-black text-emerald-400 hover:text-emerald-300 uppercase tracking-tighter transition-colors disabled:opacity-50">Play as Guest</button></div>',1),XD=Jt('<div class="text-center py-4 space-y-6 animate-in zoom-in-95 duration-300"><p class="text-zinc-300 text-sm font-medium px-4">Guest progress is <span class="text-red-400">not saved</span>. Create an account to track your bankroll and shooter stats across sessions!</p> <button type="button" class="w-full py-4 bg-white hover:bg-zinc-200 text-black font-black uppercase tracking-widest rounded-xl transition-all shadow-lg active:scale-[0.98] flex items-center justify-center gap-2"><!> Start Guest Session</button> <button type="button" class="text-xs font-black text-zinc-400 hover:text-white uppercase tracking-tighter transition-colors">Go Back to Login</button></div>'),kD=Jt(`<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-xl"><div class="w-full max-w-md p-8 bg-[#1a4d2e] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8),inset_0_0_30px_rgba(0,0,0,0.4)] relative overflow-hidden group"><div class="absolute -top-24 -left-24 w-48 h-48 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors duration-700"></div> <div class="absolute -bottom-24 -right-24 w-48 h-48 bg-emerald-500/10 rounded-full blur-3xl group-hover:bg-emerald-500/20 transition-colors duration-700"></div> <div class="text-center mb-8 relative z-10"><div class="inline-flex gap-2 p-4 rounded-2xl bg-black/40 border border-white/10 mb-4 shadow-inner"><img src="https://img.icons8.com/color/96/dice.png" alt="logo" class="w-16 h-16 drop-shadow-lg"/> <img src="https://img.icons8.com/color/96/dice.png" alt="logo" class="w-16 h-16 drop-shadow-lg"/></div> <h1 class="text-3xl font-black text-white tracking-tighter uppercase italic">Bobby's Bubble <span class="text-emerald-400">Craps</span></h1> <p class="text-zinc-400 text-sm font-medium mt-1">Authentic Casino Craps Experience</p></div> <form class="space-y-4 relative z-10"><!></form></div></div>`);function YD(f,t){er(t,!1);const i=bl();let n=Oe(t,"errorMessage",8,""),v=de("login"),S=de(""),s=de(""),T=de(""),e=de(""),a=de(!1);function m(){if(ht(e,""),console.log("handleAuth triggered",{mode:Y(v),username:Y(S),password:Y(s),nickname:Y(T)}),Y(v)==="signup"){if(!Y(S)||!Y(s)||!Y(T)){ht(e,"All fields are required for signup");return}ht(a,!0),i("signup",{username:Y(S),password:Y(s),nickname:Y(T)})}else if(Y(v)==="login"){if(!Y(S)||!Y(s)){ht(e,"Username and password are required");return}console.log("Dispatching login event",{username:Y(S),password:Y(s)}),ht(a,!0),i("login",{username:Y(S),password:Y(s)})}}function c(){console.log("handleGuest triggered"),i("guest")}Hn(()=>wn(n()),()=>{n()&&(ht(e,n()),ht(a,!1))}),Hn(()=>Y(e),()=>{Y(e)&&ht(a,!1)}),ru(),Sr();var o=kD(),u=ct(o),r=gt(ct(u),6),h=ct(r);{var d=p=>{var g=HD(),x=xi(g),y=ct(x),E=ct(y);iR(E,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500",size:18});var w=gt(E,2),C=gt(y,2),A=ct(C);PD(A,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500",size:18});var M=gt(A,2),R=gt(C,2);{var P=V=>{var G=VD(),N=ct(G);LD(N,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500",size:18});var H=gt(N,2);li(()=>H.disabled=Y(a)),N0(H,()=>Y(T),U=>ht(T,U)),_t(V,G)};Ie(R,V=>{Y(v)==="signup"&&V(P)})}var b=gt(x,2);{var F=V=>{var G=zD(),N=ct(G);li(()=>Me(N,Y(e))),_t(V,G)};Ie(b,V=>{Y(e)&&V(F)})}var I=gt(b,2),L=ct(I);{var D=V=>{var G=GD();_t(V,G)},O=V=>{var G=Ui(),N=xi(G);{var H=_=>{var $=_D(),j=xi($);bD(j,{size:20}),_t(_,$)},U=_=>{var $=WD(),j=xi($);OD(j,{size:20}),_t(_,$)};Ie(N,_=>{Y(v)==="login"?_(H):_(U,!1)})}_t(V,G)};Ie(L,V=>{Y(a)?V(D):V(O,!1)})}var z=gt(I,2),W=ct(z),k=ct(W),X=gt(W,2);li(()=>{w.disabled=Y(a),M.disabled=Y(a),I.disabled=Y(a),W.disabled=Y(a),Me(k,Y(v)==="login"?"Don't have an account? Sign Up":"Already have an account? Sign In"),X.disabled=Y(a)}),N0(w,()=>Y(S),V=>ht(S,V)),N0(M,()=>Y(s),V=>ht(s,V)),qe("click",W,()=>{ht(v,Y(v)==="login"?"signup":"login"),ht(e,""),i("toggleMode")}),qe("click",X,()=>ht(v,"guest")),_t(p,g)},l=p=>{var g=XD(),x=gt(ct(g),2),y=ct(x);ID(y,{size:20,fill:"currentColor"});var E=gt(x,2);qe("click",x,c),qe("click",E,()=>ht(v,"login")),_t(p,g)};Ie(h,p=>{Y(v)!=="guest"?p(d):p(l,!1)})}qe("submit",r,tR(m)),_t(f,o),ir()}var $D=Jt(`<div class="absolute inset-[-8px] rounded-full bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-ogjsci"></div> <div class="absolute inset-[-25px] rounded-full z-0 pointer-events-none svelte-ogjsci"><div class="absolute inset-0 animate-eclipse-rays svelte-ogjsci" style="background: repeating-conic-gradient(from 0deg, #9eff00 0deg 1deg, transparent 1deg 6deg);
                  mask-image: radial-gradient(circle, black 30%, transparent 75%);
                  -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div> <div class="absolute inset-[-15px] rounded-full bg-[#9eff00]/30 blur-2xl z-0 svelte-ogjsci"></div>`,1),KD=Jt("<div></div>"),jD=Jt("<span> </span>"),QD=Jt('<div class="absolute -top-1 -left-1 z-[100] svelte-ogjsci"><div class="absolute inset-0 rounded-full bg-[#9eff00]/80 blur-[4px] animate-pulse svelte-ogjsci"></div> <div class="relative w-4 h-4 bg-white rounded-sm border border-zinc-400 flex items-center justify-center shadow-[0_2px_4px_rgba(0,0,0,0.5),inset_0_1px_1px_white] svelte-ogjsci"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-2.5 h-2.5 text-zinc-800 svelte-ogjsci"><path fill-rule="evenodd" d="M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z" clip-rule="evenodd" class="svelte-ogjsci"></path></svg></div></div>'),ZD=Jt('<div><!> <div><div class="absolute inset-0 opacity-10 pointer-events-none svelte-ogjsci" style="background: repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.5) 2px, rgba(0,0,0,0.5) 4px);"></div> <div class="absolute inset-0 rounded-full overflow-hidden svelte-ogjsci"></div> <div class="absolute inset-[6px] rounded-full bg-white shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] border border-black/5 flex flex-col items-center justify-center svelte-ogjsci"><!> <span> </span></div> <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-transparent via-white/30 to-white/10 pointer-events-none svelte-ogjsci"></div></div> <!></div>');function gy(f,t){er(t,!1);const i=de();let n=Oe(t,"value",8,1),v=Oe(t,"displayValue",8,null),S=Oe(t,"selected",8,!1),s=Oe(t,"size",8,"w-12 h-12"),T=Oe(t,"fontSize",8,"text-[10px]"),e=Oe(t,"locked",8,!1),a=Oe(t,"betType",8,"");const m={1:{border:"border-zinc-300",accent:"bg-zinc-400"},2:{border:"border-blue-500",accent:"bg-blue-600"},3:{border:"border-amber-300",accent:"bg-amber-400"},5:{border:"border-red-500",accent:"bg-red-600"},10:{border:"border-orange-400",accent:"bg-orange-500"},25:{border:"border-emerald-400",accent:"bg-emerald-500"},50:{border:"border-blue-400",accent:"bg-blue-500"},100:{border:"border-zinc-800",accent:"bg-zinc-900"}};Hn(()=>wn(n()),()=>{ht(i,m[n()]||m[1])}),ru(),Sr();var c=ZD(),o=ct(c);{var u=w=>{var C=$D();_t(w,C)};Ie(o,w=>{S()&&w(u)})}var r=gt(o,2),h=gt(ct(r),2);sn(h,4,()=>Array(3),nn,(w,C,A)=>{var M=KD();ep(M,`transform: translate(-50%, -50%) rotate(${A*60}deg); clip-path: polygon(0 0, 15% 0, 15% 100%, 0 100%, 85% 0, 100% 0, 100% 100%, 85% 100%);`),li(()=>Qe(M,1,`absolute top-1/2 left-1/2 w-[120%] h-[20%] ${Y(i),kt(()=>Y(i).accent)??""} -translate-x-1/2 -translate-y-1/2 opacity-90`,"svelte-ogjsci")),_t(w,M)});var d=gt(h,2),l=ct(d);{var p=w=>{var C=jD(),A=ct(C);li(()=>{Qe(C,1,`${wn(a()),kt(()=>a().length>3?"text-[7px]":"text-[9px]")??""} font-black text-zinc-500 uppercase leading-none -mb-0.5`,"svelte-ogjsci"),Me(A,a())}),_t(w,C)};Ie(l,w=>{a()&&w(p)})}var g=gt(l,2),x=ct(g),y=gt(r,2);{var E=w=>{var C=QD();_t(w,C)};Ie(y,w=>{e()&&w(E)})}li(()=>{Qe(c,1,`relative ${s()??""} rounded-full flex items-center justify-center transition-all duration-300
         ${S()?"scale-110 -translate-y-2":""}`,"svelte-ogjsci"),Qe(r,1,`absolute inset-0 rounded-full bg-white shadow-xl overflow-hidden border-2 ${Y(i),kt(()=>Y(i).border)??""} z-10`,"svelte-ogjsci"),Qe(g,1,`${T()??""} font-black text-zinc-800 drop-shadow-sm tracking-tighter leading-none`,"svelte-ogjsci"),Me(x,`$${(v()!==null?v():n())??""}`)}),_t(f,c),ir()}var JD=Jt('<div class="absolute w-[18%] h-[18%] bg-zinc-900 rounded-full"></div>'),qD=Jt('<div class="w-6 h-6 bg-white rounded-[4px] relative shadow-[0_1px_2px_rgba(0,0,0,0.3)] flex-shrink-0"></div>'),tO=Jt('<span class="text-[10px] font-black text-white drop-shadow-md mb-0.5 italic"> </span>'),eO=Jt('<span class="text-sm font-black text-white italic leading-none uppercase drop-shadow-sm"> </span>'),iO=Jt('<span class="text-[10px] font-bold text-white/60 uppercase tracking-tighter drop-shadow-sm"> </span> <span class="text-xl font-black text-white italic leading-none drop-shadow-md"> </span>',1),nO=Jt('<div class="flex flex-col items-center justify-center bg-black/50 rounded-lg px-2 py-1 border border-white/10 min-w-[32px] shadow-lg"><span class="text-[8px] font-bold text-white/50 uppercase leading-none mb-0.5 tracking-tighter">Rolls</span> <span> </span></div>'),sO=Jt('<div><div class="flex gap-1"></div> <div><!> <div class="flex items-baseline gap-1"><!></div></div> <!></div>'),rO=Jt('<span class="text-[10px] font-bold uppercase tracking-widest opacity-60 leading-none mb-1 pointer-events-none"> </span>'),aO=Jt("<span> </span>"),oO=Jt('<span class="text-[9px] font-black mt-1 opacity-30 pointer-events-none"> </span>'),lO=Jt("<!> <!> <!> <!>",1),hO=Jt('<div class="absolute"><!></div>'),uO=Jt('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-10"><div class="relative w-12 h-12 flex items-center justify-center"></div></div>'),cO=Jt('<div class="absolute inset-0 bg-emerald-500/20 animate-pulse pointer-events-none border-2 border-emerald-400"></div>'),fO=Jt('<div class="absolute inset-0 bg-red-500/20 animate-pulse pointer-events-none border-2 border-red-400"></div>'),dO=Jt('<button><div class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"></div> <!> <!> <!> <!> <!></button>');function di(f,t){er(t,!1);const i=de(),n=bl();let v=Oe(t,"label",8,""),S=Oe(t,"subLabel",8,""),s=Oe(t,"odds",8,""),T=Oe(t,"amount",8,0),e=Oe(t,"className",8,""),a=Oe(t,"isActive",8,!1),m=Oe(t,"color",8,"green"),c=Oe(t,"glow",8,!1),o=Oe(t,"isLocked",8,!1),u=Oe(t,"labelClassName",8,""),r=Oe(t,"id",8,""),h=Oe(t,"type",8,""),d=Oe(t,"dice",24,()=>[]),l=Oe(t,"payout",8,""),p=Oe(t,"hardwayCounter",8,null),g=Oe(t,"reverse",8,!1),x=Oe(t,"status",8,null),y=Oe(t,"hideChips",8,!1),E=Oe(t,"betType",8,"");const w={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]},C={green:a()?"bg-emerald-500/20 border-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.4)]":"bg-emerald-950/40 hover:bg-emerald-900/60 border-emerald-500/20",zinc:"bg-zinc-900/60 hover:bg-zinc-800/80 border-white/10 backdrop-blur-md",blue:"bg-blue-950/40 hover:bg-blue-900/60 border-blue-500/20",red:"bg-red-950/40 hover:bg-red-900/60 border-red-500/20",gold:"bg-amber-950/40 hover:bg-amber-900/60 border-amber-500/20"};function A(X){const V=[];let G=X;const N=[100,50,25,10,5,3,2,1];for(const H of N){const U=Math.floor(G/H);for(let _=0;_<U&&(V.push(H),G-=H,!(V.length>=6));_++);if(V.length>=6)break}return V}function M(X,V){const G=V.split("").reduce((_,$)=>_+$.charCodeAt(0),0)+X*137,N=G*123.456%16-8,H=G*789.012%8-4,U=G*456.789%60-30;return`
            z-index: ${X};
            transform: translate(${N}px, ${-X*5+H}px) rotate(${U}deg);
        `}Hn(()=>wn(T()),()=>{ht(i,T()>0?A(T()):[])}),ru(),Sr();var R=dO(),P=gt(ct(R),2);tn(P,t,"top",{});var b=gt(P,2);{var F=X=>{var V=sO(),G=ct(V);sn(G,5,d,nn,(q,ft)=>{var vt=qD();sn(vt,5,()=>(Y(ft),kt(()=>w[Y(ft)]||[])),nn,(Tt,ut)=>{var Bt=JD();li(Pt=>ep(Bt,`left: ${Y(ut)%3*25+16}%; top: ${Pt??""}%`),[()=>(Y(ut),kt(()=>Math.floor(Y(ut)/3)*25+16))]),_t(Tt,Bt)}),_t(q,vt)});var N=gt(G,2),H=ct(N);{var U=q=>{var ft=tO(),vt=ct(ft);li(()=>Me(vt,l())),_t(q,ft)};Ie(H,q=>{l()&&q(U)})}var _=gt(H,2),$=ct(_);{var j=q=>{var ft=eO(),vt=ct(ft);li(()=>Me(vt,v())),_t(q,ft)},Z=q=>{var ft=iO(),vt=xi(ft),Tt=ct(vt),ut=gt(vt,2),Bt=ct(ut);li(()=>{Me(Tt,(wn(d()),kt(()=>d()[0]===d()[1]?"Hard":""))),Me(Bt,(wn(d()),kt(()=>d()[0]+d()[1])))}),_t(q,ft)};Ie($,q=>{v()?q(j):q(Z,!1)})}var it=gt(N,2);{var at=q=>{var ft=nO(),vt=gt(ct(ft),2),Tt=ct(vt);li(()=>{Qe(vt,1,`text-sm font-black ${p()>15?"text-red-400":"text-emerald-400"} leading-none drop-shadow-sm`),Me(Tt,p())}),_t(q,ft)};Ie(it,q=>{p()!==null&&q(at)})}li(()=>{Qe(V,1,`flex ${g()?"flex-row-reverse":"flex-row"} items-center gap-2 w-full px-2`),Qe(N,1,`flex-1 flex flex-col ${g()?"items-end":"items-start"} leading-none`)}),_t(X,V)},I=X=>{var V=lO(),G=xi(V);{var N=Z=>{var it=rO(),at=ct(it);li(()=>Me(at,S())),_t(Z,it)};Ie(G,Z=>{S()&&Z(N)})}var H=gt(G,2);{var U=Z=>{var it=aO(),at=ct(it);li(()=>{Qe(it,1,`font-black leading-none pointer-events-none tracking-tight ${(u()||"text-xl")??""}`),Me(at,v())}),_t(Z,it)};Ie(H,Z=>{v()&&Z(U)})}var _=gt(H,2);tn(_,t,"default",{});var $=gt(_,2);{var j=Z=>{var it=oO(),at=ct(it);li(()=>Me(at,s())),_t(Z,it)};Ie($,Z=>{s()&&Z(j)})}_t(X,V)};Ie(b,X=>{h()==="dice"?X(F):X(I,!1)})}var L=gt(b,2);tn(L,t,"bottom",{});var D=gt(L,2);{var O=X=>{var V=uO(),G=ct(V);sn(G,5,()=>Y(i),nn,(N,H,U)=>{var _=hO(),$=ct(_);{let j=pn(()=>(wn(o()),Y(i),kt(()=>o()&&U===Y(i).length-1)));gy($,{get value(){return Y(H)},size:"w-12 h-12",fontSize:"text-[10px]",get locked(){return Y(j)},get betType(){return E()}})}li(j=>ep(_,j),[()=>(wn(r()),kt(()=>M(U,r())))]),_t(N,_)}),_t(X,V)};Ie(D,X=>{T()>0&&!y()&&X(O)})}var z=gt(D,2);{var W=X=>{var V=cO();_t(X,V)},k=X=>{var V=Ui(),G=xi(V);{var N=H=>{var U=fO();_t(H,U)};Ie(G,H=>{x()==="lose"&&H(N)},!0)}_t(X,V)};Ie(z,X=>{x()==="win"?X(W):X(k,!1)})}li(()=>{dy(R,"data-bet-id",r()),Qe(R,1,`relative flex flex-col items-center justify-center border transition-all active:scale-95 overflow-hidden ${wn(m()),kt(()=>C[m()])??""} ${c()?"animate-pulse":""} ${e()??""}`)}),qe("click",R,X=>n("click",X)),qe("contextmenu",R,tR(X=>n("contextmenu",X))),_t(f,R),ir()}function pO(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Am={exports:{}},vO=Am.exports,l2;function mO(){return l2||(l2=1,(function(f,t){(function(n,v){f.exports=v()})(vO,()=>(()=>{var i={50792:(s=>{var T=Object.prototype.hasOwnProperty,e="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(e=!1));function m(r,h,d){this.fn=r,this.context=h,this.once=d||!1}function c(r,h,d,l,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new m(d,l||r,p),x=e?e+h:h;return r._events[x]?r._events[x].fn?r._events[x]=[r._events[x],g]:r._events[x].push(g):(r._events[x]=g,r._eventsCount++),r}function o(r,h){--r._eventsCount===0?r._events=new a:delete r._events[h]}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],d,l;if(this._eventsCount===0)return h;for(l in d=this._events)T.call(d,l)&&h.push(e?l.slice(1):l);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},u.prototype.listeners=function(h){var d=e?e+h:h,l=this._events[d];if(!l)return[];if(l.fn)return[l.fn];for(var p=0,g=l.length,x=new Array(g);p<g;p++)x[p]=l[p].fn;return x},u.prototype.listenerCount=function(h){var d=e?e+h:h,l=this._events[d];return l?l.fn?1:l.length:0},u.prototype.emit=function(h,d,l,p,g,x){var y=e?e+h:h;if(!this._events[y])return!1;var E=this._events[y],w=arguments.length,C,A;if(E.fn){switch(E.once&&this.removeListener(h,E.fn,void 0,!0),w){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,d),!0;case 3:return E.fn.call(E.context,d,l),!0;case 4:return E.fn.call(E.context,d,l,p),!0;case 5:return E.fn.call(E.context,d,l,p,g),!0;case 6:return E.fn.call(E.context,d,l,p,g,x),!0}for(A=1,C=new Array(w-1);A<w;A++)C[A-1]=arguments[A];E.fn.apply(E.context,C)}else{var M=E.length,R;for(A=0;A<M;A++)switch(E[A].once&&this.removeListener(h,E[A].fn,void 0,!0),w){case 1:E[A].fn.call(E[A].context);break;case 2:E[A].fn.call(E[A].context,d);break;case 3:E[A].fn.call(E[A].context,d,l);break;case 4:E[A].fn.call(E[A].context,d,l,p);break;default:if(!C)for(R=1,C=new Array(w-1);R<w;R++)C[R-1]=arguments[R];E[A].fn.apply(E[A].context,C)}}return!0},u.prototype.on=function(h,d,l){return c(this,h,d,l,!1)},u.prototype.once=function(h,d,l){return c(this,h,d,l,!0)},u.prototype.removeListener=function(h,d,l,p){var g=e?e+h:h;if(!this._events[g])return this;if(!d)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===d&&(!p||x.once)&&(!l||x.context===l)&&o(this,g);else{for(var y=0,E=[],w=x.length;y<w;y++)(x[y].fn!==d||p&&!x[y].once||l&&x[y].context!==l)&&E.push(x[y]);E.length?this._events[g]=E.length===1?E[0]:E:o(this,g)}return this},u.prototype.removeAllListeners=function(h){var d;return h?(d=e?e+h:h,this._events[d]&&o(this,d)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,s.exports=u}),11517:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38829),m=function(c,o,u,r){for(var h=c[0],d=1;d<c.length;d++){var l=c[d];a(l,h,o,u,r),h=l}return c};s.exports=m}),80318:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),m=function(c,o,u,r,h){return a(c,"angle",o,u,r,h)};s.exports=m}),60757:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){for(var c=0;c<e.length;c++){var o=e[c];a.call(m,o)}return e};s.exports=T}),69927:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){m===void 0&&(m=0);for(var c=m;c<e.length;c++){var o=e[c],u=!0;for(var r in a)o[r]!==a[r]&&(u=!1);if(u)return o}return null};s.exports=T}),32265:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){m===void 0&&(m=0);for(var c=e.length-1;c>=m;c--){var o=e[c],u=!0;for(var r in a)o[r]!==a[r]&&(u=!1);if(u)return o}return null};s.exports=T}),94420:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(11879),m=e(60461),c=e(95540),o=e(29747),u=e(41481),r=new u({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1).setOrigin(0,0),h=function(d,l){l===void 0&&(l={});var p=l.hasOwnProperty("width"),g=l.hasOwnProperty("height"),x=c(l,"width",-1),y=c(l,"height",-1),E=c(l,"cellWidth",1),w=c(l,"cellHeight",E),C=c(l,"position",m.TOP_LEFT),A=c(l,"x",0),M=c(l,"y",0),R=0,P=0,b=x*E,F=y*w;r.setPosition(A,M),r.setSize(E,w);for(var I=0;I<d.length;I++)if(a(d[I],r,C),p&&x===-1)r.x+=E;else if(g&&y===-1)r.y+=w;else if(g&&!p){if(P+=w,r.y+=w,P===F&&(P=0,R+=E,r.y=M,r.x+=E,R===b))break}else if(R+=E,r.x+=E,R===b&&(R=0,P+=w,r.x=A,r.y+=w,P===F))break;return d};s.exports=h}),41721:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),m=function(c,o,u,r,h){return a(c,"alpha",o,u,r,h)};s.exports=m}),67285:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),m=function(c,o,u,r,h){return a(c,"x",o,u,r,h)};s.exports=m}),9074:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),m=function(c,o,u,r,h,d,l){return u==null&&(u=o),a(c,"x",o,r,d,l),a(c,"y",u,h,d,l)};s.exports=m}),75222:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),m=function(c,o,u,r,h){return a(c,"y",o,u,r,h)};s.exports=m}),22983:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m===void 0&&(m=0),c===void 0&&(c=6.28);for(var o=m,u=(c-m)/e.length,r=a.x,h=a.y,d=a.radius,l=0;l<e.length;l++)e[l].x=r+d*Math.cos(o),e[l].y=h+d*Math.sin(o),o+=u;return e};s.exports=T}),95253:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m===void 0&&(m=0),c===void 0&&(c=6.28);for(var o=m,u=(c-m)/e.length,r=a.width/2,h=a.height/2,d=0;d<e.length;d++)e[d].x=a.x+r*Math.cos(o),e[d].y=a.y+h*Math.sin(o),o+=u;return e};s.exports=T}),88505:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15258),m=e(26708),c=function(o,u,r){var h;r?h=m(u,r,o.length):h=a(u,o.length);for(var d=0;d<o.length;d++){var l=o[d],p=h[d];l.x=p.x,l.y=p.y}return o};s.exports=c}),41346:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14649),m=e(86003),c=e(49498),o=function(u,r,h){h===void 0&&(h=0);var d=a(r,!1,u.length);h>0?m(d,h):h<0&&c(d,Math.abs(h));for(var l=0;l<u.length;l++)u[l].x=d[l].x,u[l].y=d[l].y;return u};s.exports=o}),11575:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84993),m=function(c,o,u){var r=a({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},u),h=a({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},u),d=a({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},u);r.pop(),h.pop(),d.pop(),r=r.concat(h,d);for(var l=r.length/c.length,p=0,g=0;g<c.length;g++){var x=c[g],y=r[Math.floor(p)];x.x=y.x,x.y=y.y,p+=l}return c};s.exports=m}),29953:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){for(var c=0;c<e.length;c++){var o=e[c];o.anims&&o.anims.play(a,m)}return e};s.exports=T}),66979:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o,u){c===void 0&&(c=0),o===void 0&&(o=0),u===void 0&&(u=1);var r,h=0,d=e.length;if(u===1)for(r=o;r<d;r++)e[r][a]+=m+h*c,h++;else for(r=o;r>=0;r--)e[r][a]+=m+h*c,h++;return e};s.exports=T}),43967:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o,u){c===void 0&&(c=0),o===void 0&&(o=0),u===void 0&&(u=1);var r,h=0,d=e.length;if(u===1)for(r=o;r<d;r++)e[r][a]=m+h*c,h++;else for(r=o;r>=0;r--)e[r][a]=m+h*c,h++;return e};s.exports=T}),88926:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28176),m=function(c,o){for(var u=0;u<c.length;u++)a(o,c[u]);return c};s.exports=m}),33286:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(24820),m=function(c,o){for(var u=0;u<c.length;u++)a(o,c[u]);return c};s.exports=m}),96e3:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65822),m=function(c,o){for(var u=0;u<c.length;u++)a(o,c[u]);return c};s.exports=m}),28789:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26597),m=function(c,o){for(var u=0;u<c.length;u++)a(o,c[u]);return c};s.exports=m}),97154:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90260),m=function(c,o){for(var u=0;u<c.length;u++)a(o,c[u]);return c};s.exports=m}),20510:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),m=function(c,o,u,r,h){return a(c,"rotation",o,u,r,h)};s.exports=m}),91051:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1163),m=e(20339),c=function(o,u,r){for(var h=u.x,d=u.y,l=0;l<o.length;l++){var p=o[l];a(p,h,d,r,Math.max(1,m(p.x,p.y,h,d)))}return o};s.exports=c}),76332:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1163),m=function(c,o,u,r){var h=o.x,d=o.y;if(r===0)return c;for(var l=0;l<c.length;l++)a(c[l],h,d,u,r);return c};s.exports=m}),61619:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),m=function(c,o,u,r,h){return a(c,"scaleX",o,u,r,h)};s.exports=m}),94868:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),m=function(c,o,u,r,h,d,l){return u==null&&(u=o),a(c,"scaleX",o,r,d,l),a(c,"scaleY",u,h,d,l)};s.exports=m}),95532:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66979),m=function(c,o,u,r,h){return a(c,"scaleY",o,u,r,h)};s.exports=m}),8689:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h){return a(c,"alpha",o,u,r,h)};s.exports=m}),2645:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r){return a(c,"blendMode",o,0,u,r)};s.exports=m}),32372:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h){return a(c,"depth",o,u,r,h)};s.exports=m}),85373:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){for(var c=0;c<e.length;c++)e[c].setInteractive(a,m);return e};s.exports=T}),81583:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h,d,l){return u==null&&(u=o),a(c,"originX",o,r,d,l),a(c,"originY",u,h,d,l),c.forEach(function(p){p.updateDisplayOrigin()}),c};s.exports=m}),79939:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h){return a(c,"rotation",o,u,r,h)};s.exports=m}),2699:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h,d,l){return u==null&&(u=o),a(c,"scaleX",o,r,d,l),a(c,"scaleY",u,h,d,l)};s.exports=m}),98739:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h){return a(c,"scaleX",o,u,r,h)};s.exports=m}),98476:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h){return a(c,"scaleY",o,u,r,h)};s.exports=m}),6207:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h,d,l){return u==null&&(u=o),a(c,"scrollFactorX",o,r,d,l),a(c,"scrollFactorY",u,h,d,l)};s.exports=m}),6607:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h){return a(c,"scrollFactorX",o,u,r,h)};s.exports=m}),72248:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h){return a(c,"scrollFactorY",o,u,r,h)};s.exports=m}),14036:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o){for(var u=0;u<e.length;u++)e[u].setTint(a,m,c,o);return e};s.exports=T}),50159:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r){return a(c,"visible",o,0,u,r)};s.exports=m}),77597:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h){return a(c,"x",o,u,r,h)};s.exports=m}),83194:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h,d,l){return u==null&&(u=o),a(c,"x",o,r,d,l),a(c,"y",u,h,d,l)};s.exports=m}),67678:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43967),m=function(c,o,u,r,h){return a(c,"y",o,u,r,h)};s.exports=m}),35850:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r,h){r===void 0&&(r=0),h===void 0&&(h=new a);var d,l,p=c.length;if(p===1)d=c[0].x,l=c[0].y,c[0].x=o,c[0].y=u;else{var g=1,x=0;r===0&&(x=p-1,g=p-2),d=c[x].x,l=c[x].y,c[x].x=o,c[x].y=u;for(var y=0;y<p;y++)if(!(g>=p||g===-1)){var E=c[g],w=E.x,C=E.y;E.x=d,E.y=l,d=w,l=C,r===0?g--:g++}}return h.x=d,h.y=l,h};s.exports=m}),8628:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33680),m=function(c){return a(c)};s.exports=m}),21837:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7602),m=function(c,o,u,r,h){h===void 0&&(h=!1);var d=Math.abs(r-u)/c.length,l;if(h)for(l=0;l<c.length;l++)c[l][o]+=a(l*d,u,r);else for(l=0;l<c.length;l++)c[l][o]=a(l*d,u,r);return c};s.exports=m}),21910:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54261),m=function(c,o,u,r,h){h===void 0&&(h=!1);var d=Math.abs(r-u)/c.length,l;if(h)for(l=0;l<c.length;l++)c[l][o]+=a(l*d,u,r);else for(l=0;l<c.length;l++)c[l][o]=a(l*d,u,r);return c};s.exports=m}),62054:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o){if(o===void 0&&(o=!1),e.length===0)return e;if(e.length===1)return o?e[0][a]+=(c+m)/2:e[0][a]=(c+m)/2,e;var u=Math.abs(c-m)/(e.length-1),r;if(o)for(r=0;r<e.length;r++)e[r][a]+=r*u+m;else for(r=0;r<e.length;r++)e[r][a]=r*u+m;return e};s.exports=T}),79815:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=0;a<e.length;a++)e[a].visible=!e[a].visible;return e};s.exports=T}),39665:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),m=function(c,o,u){u===void 0&&(u=0);for(var r=0;r<c.length;r++){var h=c[r];h.x=a(h.x,o.left-u,o.right+u),h.y=a(h.y,o.top-u,o.bottom+u)}return c};s.exports=m}),61061:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AlignTo:e(11517),Angle:e(80318),Call:e(60757),GetFirst:e(69927),GetLast:e(32265),GridAlign:e(94420),IncAlpha:e(41721),IncX:e(67285),IncXY:e(9074),IncY:e(75222),PlaceOnCircle:e(22983),PlaceOnEllipse:e(95253),PlaceOnLine:e(88505),PlaceOnRectangle:e(41346),PlaceOnTriangle:e(11575),PlayAnimation:e(29953),PropertyValueInc:e(66979),PropertyValueSet:e(43967),RandomCircle:e(88926),RandomEllipse:e(33286),RandomLine:e(96e3),RandomRectangle:e(28789),RandomTriangle:e(97154),Rotate:e(20510),RotateAround:e(91051),RotateAroundDistance:e(76332),ScaleX:e(61619),ScaleXY:e(94868),ScaleY:e(95532),SetAlpha:e(8689),SetBlendMode:e(2645),SetDepth:e(32372),SetHitArea:e(85373),SetOrigin:e(81583),SetRotation:e(79939),SetScale:e(2699),SetScaleX:e(98739),SetScaleY:e(98476),SetScrollFactor:e(6207),SetScrollFactorX:e(6607),SetScrollFactorY:e(72248),SetTint:e(14036),SetVisible:e(50159),SetX:e(77597),SetXY:e(83194),SetY:e(67678),ShiftPosition:e(35850),Shuffle:e(8628),SmootherStep:e(21910),SmoothStep:e(21837),Spread:e(62054),ToggleVisible:e(79815),WrapInRectangle:e(39665)}}),42099:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(74943),o=e(81957),u=e(41138),r=e(35154),h=e(90126),d=new m({initialize:function(p,g,x){this.manager=p,this.key=g,this.type="frame",this.frames=this.getFrames(p.textureManager,r(x,"frames",[]),r(x,"defaultTextureKey",null),r(x,"sortFrames",!0)),this.frameRate=r(x,"frameRate",null),this.duration=r(x,"duration",null),this.msPerFrame,this.skipMissedFrames=r(x,"skipMissedFrames",!0),this.delay=r(x,"delay",0),this.repeat=r(x,"repeat",0),this.repeatDelay=r(x,"repeatDelay",0),this.yoyo=r(x,"yoyo",!1),this.showBeforeDelay=r(x,"showBeforeDelay",!1),this.showOnStart=r(x,"showOnStart",!1),this.hideOnComplete=r(x,"hideOnComplete",!1),this.randomFrame=r(x,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(c.PAUSE_ALL,this.pause,this),this.manager.on(c.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(l,p,g,x){g===null&&x===null?(l.frameRate=24,l.duration=24/p*1e3):g&&x===null?(l.duration=g,l.frameRate=p/(g/1e3)):(l.frameRate=x,l.duration=p/x*1e3),l.msPerFrame=1e3/l.frameRate},addFrame:function(l){return this.addFrameAt(this.frames.length,l)},addFrameAt:function(l,p){var g=this.getFrames(this.manager.textureManager,p);if(g.length>0){if(l===0)this.frames=g.concat(this.frames);else if(l===this.frames.length)this.frames=this.frames.concat(g);else{var x=this.frames.slice(0,l),y=this.frames.slice(l);this.frames=x.concat(g,y)}this.updateFrameSequence()}return this},checkFrame:function(l){return l>=0&&l<this.frames.length},getFirstTick:function(l){l.accumulator=0,l.nextTick=l.frameRate===l.currentAnim.frameRate&&l.currentFrame.duration||l.msPerFrame},getFrameAt:function(l){return this.frames[l]},getFrames:function(l,p,g,x){x===void 0&&(x=!0);var y=[],E,w,C=1,A,M;if(typeof p=="string"){if(M=p,!l.exists(M))return console.warn('Texture "%s" not found',M),y;var R=l.get(M),P=R.getFrameNames();x&&h(P),p=[],P.forEach(function(O){p.push({key:M,frame:O})})}if(!Array.isArray(p)||p.length===0)return y;for(A=0;A<p.length;A++){var b=p[A],F=r(b,"key",g);if(F){var I=r(b,"frame",0),L=l.getFrame(F,I);if(!L){console.warn('Texture "%s" not found',F);continue}w=new u(F,I,C,L),w.duration=r(b,"duration",0),w.isFirst=!E,E&&(E.nextFrame=w,w.prevFrame=E),y.push(w),E=w,C++}}if(y.length>0){w.isLast=!0,w.nextFrame=y[0],y[0].prevFrame=w;var D=1/(y.length-1);for(A=0;A<y.length;A++)y[A].progress=A*D}return y},getNextTick:function(l){l.accumulator-=l.nextTick,l.nextTick=l.frameRate===l.currentAnim.frameRate&&l.currentFrame.duration||l.msPerFrame},getFrameByProgress:function(l){return l=a(l,0,1),o(l,this.frames,"progress")},nextFrame:function(l){var p=l.currentFrame;p.isLast?l.yoyo?this.handleYoyoFrame(l,!1):l.repeatCounter>0?l.inReverse&&l.forward?l.forward=!1:this.repeatAnimation(l):l.complete():this.updateAndGetNextTick(l,p.nextFrame)},handleYoyoFrame:function(l,p){if(p||(p=!1),l.inReverse===!p&&l.repeatCounter>0){(l.repeatDelay===0||l.pendingRepeat)&&(l.forward=p),this.repeatAnimation(l);return}if(l.inReverse!==p&&l.repeatCounter===0){l.complete();return}l.forward=p;var g=p?l.currentFrame.nextFrame:l.currentFrame.prevFrame;this.updateAndGetNextTick(l,g)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(l){var p=l.currentFrame;p.isFirst?l.yoyo?this.handleYoyoFrame(l,!0):l.repeatCounter>0?l.inReverse&&!l.forward?this.repeatAnimation(l):(l.forward=!0,this.repeatAnimation(l)):l.complete():this.updateAndGetNextTick(l,p.prevFrame)},updateAndGetNextTick:function(l,p){l.setCurrentFrame(p),this.getNextTick(l)},removeFrame:function(l){var p=this.frames.indexOf(l);return p!==-1&&this.removeFrameAt(p),this},removeFrameAt:function(l){return this.frames.splice(l,1),this.updateFrameSequence(),this},repeatAnimation:function(l){if(l._pendingStop===2){if(l._pendingStopValue===0)return l.stop();l._pendingStopValue--}l.repeatDelay>0&&!l.pendingRepeat?(l.pendingRepeat=!0,l.accumulator-=l.nextTick,l.nextTick+=l.repeatDelay):(l.repeatCounter--,l.forward?l.setCurrentFrame(l.currentFrame.nextFrame):l.setCurrentFrame(l.currentFrame.prevFrame),l.isPlaying&&(this.getNextTick(l),l.handleRepeat()))},toJSON:function(){var l={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(p){l.frames.push(p.toJSON())}),l},updateFrameSequence:function(){for(var l=this.frames.length,p=1/(l-1),g,x=0;x<l;x++)g=this.frames[x],g.index=x+1,g.isFirst=!1,g.isLast=!1,g.progress=x*p,x===0?(g.isFirst=!0,l===1?(g.isLast=!0,g.nextFrame=g,g.prevFrame=g):(g.isLast=!1,g.prevFrame=this.frames[l-1],g.nextFrame=this.frames[x+1])):x===l-1&&l>1?(g.isLast=!0,g.prevFrame=this.frames[l-2],g.nextFrame=this.frames[0]):l>1&&(g.prevFrame=this.frames[x-1],g.nextFrame=this.frames[x+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(c.PAUSE_ALL,this.pause,this),this.manager.off(c.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var l=0;l<this.frames.length;l++)this.frames[l].destroy();this.frames=[],this.manager=null}});s.exports=d}),41138:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r,h,d){d===void 0&&(d=!1),this.textureKey=o,this.textureFrame=u,this.index=r,this.frame=h,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});s.exports=m}),60848:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42099),m=e(83419),c=e(90330),o=e(50792),u=e(74943),r=e(8443),h=e(95540),d=e(35154),l=e(36383),p=e(20283),g=e(41836),x=new m({Extends:o,initialize:function(E){o.call(this),this.game=E,this.textureManager=null,this.globalTimeScale=1,this.anims=new c,this.mixes=new c,this.paused=!1,this.name="AnimationManager",E.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(y,E,w){var C=this.anims,A=this.mixes,M=typeof y=="string"?y:y.key,R=typeof E=="string"?E:E.key;if(C.has(M)&&C.has(R)){var P=A.get(M);P||(P={}),P[R]=w,A.set(M,P)}return this},removeMix:function(y,E){var w=this.mixes,C=typeof y=="string"?y:y.key,A=w.get(C);if(A)if(E){var M=typeof E=="string"?E:E.key;A.hasOwnProperty(M)&&delete A[M]}else E||w.delete(C);return this},getMix:function(y,E){var w=this.mixes,C=typeof y=="string"?y:y.key,A=typeof E=="string"?E:E.key,M=w.get(C);return M&&M.hasOwnProperty(A)?M[A]:0},add:function(y,E){return this.anims.has(y)?(console.warn("Animation key exists: "+y),this):(E.key=y,this.anims.set(y,E),this.emit(u.ADD_ANIMATION,y,E),this)},exists:function(y){return this.anims.has(y)},createFromAseprite:function(y,E,w){var C=[],A=this.game.cache.json.get(y);if(!A)return console.warn("No Aseprite data found for: "+y),C;var M=this,R=d(A,"meta",null),P=d(A,"frames",null);if(R&&P){var b=d(R,"frameTags",[]);b.forEach(function(F){var I=[],L=h(F,"name",null),D=h(F,"from",0),O=h(F,"to",0),z=h(F,"direction","forward");if(L&&(!E||E&&E.indexOf(L)>-1)){for(var W=0,k=D;k<=O;k++){var X=k.toString(),V=P[X];if(V){var G=h(V,"duration",l.MAX_SAFE_INTEGER);I.push({key:y,frame:X,duration:G}),W+=G}}z==="reverse"&&(I=I.reverse());var N={key:L,frames:I,duration:W,yoyo:z==="pingpong"},H;w?w.anims&&(H=w.anims.create(N)):H=M.create(N),H&&C.push(H)}})}return C},create:function(y){var E=y.key,w=!1;return E&&(w=this.get(E),w?console.warn("AnimationManager key already exists: "+E):(w=new a(this,E,y),this.anims.set(E,w),this.emit(u.ADD_ANIMATION,E,w))),w},fromJSON:function(y,E){E===void 0&&(E=!1),E&&this.anims.clear(),typeof y=="string"&&(y=JSON.parse(y));var w=[];if(y.hasOwnProperty("anims")&&Array.isArray(y.anims)){for(var C=0;C<y.anims.length;C++)w.push(this.create(y.anims[C]));y.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=y.globalTimeScale)}else y.hasOwnProperty("key")&&y.type==="frame"&&w.push(this.create(y));return w},generateFrameNames:function(y,E){var w=d(E,"prefix",""),C=d(E,"start",0),A=d(E,"end",0),M=d(E,"suffix",""),R=d(E,"zeroPad",0),P=d(E,"outputArray",[]),b=d(E,"frames",!1);if(!this.textureManager.exists(y))return console.warn('Texture "%s" not found',y),P;var F=this.textureManager.get(y);if(!F)return P;var I;if(E)for(b||(b=p(C,A)),I=0;I<b.length;I++){var L=w+g(b[I],R,"0",1)+M;F.has(L)?P.push({key:y,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,y)}else for(b=F.getFrameNames(),I=0;I<b.length;I++)P.push({key:y,frame:b[I]});return P},generateFrameNumbers:function(y,E){var w=d(E,"start",0),C=d(E,"end",-1),A=d(E,"first",!1),M=d(E,"outputArray",[]),R=d(E,"frames",!1);if(!this.textureManager.exists(y))return console.warn('Texture "%s" not found',y),M;var P=this.textureManager.get(y);if(!P)return M;A&&P.has(A)&&M.push({key:y,frame:A}),R||(C===-1&&(C=P.frameTotal-2),R=p(w,C));for(var b=0;b<R.length;b++){var F=R[b];P.has(F)?M.push({key:y,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,y)}return M},get:function(y){return this.anims.get(y)},getAnimsFromTexture:function(y){for(var E=this.textureManager.get(y),w=E.key,C=this.anims.getArray(),A=[],M=0;M<C.length;M++)for(var R=C[M],P=R.frames,b=0;b<P.length;b++)if(P[b].textureKey===w){A.push(R.key);break}return A},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(u.PAUSE_ALL)),this},play:function(y,E){Array.isArray(E)||(E=[E]);for(var w=0;w<E.length;w++)E[w].anims.play(y);return this},staggerPlay:function(y,E,w,C){w===void 0&&(w=0),C===void 0&&(C=!0),Array.isArray(E)||(E=[E]);var A=E.length;C||A--;for(var M=0;M<E.length;M++){var R=w<0?Math.abs(w)*(A-M):w*M;E[M].anims.playAfterDelay(y,R)}return this},remove:function(y){var E=this.get(y);return E&&(this.emit(u.REMOVE_ANIMATION,y,E),this.anims.delete(y),this.removeMix(y)),E},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(u.RESUME_ALL)),this},toJSON:function(y){var E={anims:[],globalTimeScale:this.globalTimeScale};return y!==void 0&&y!==""?E.anims.push(this.anims.get(y).toJSON()):this.anims.each(function(w,C){E.anims.push(C.toJSON())}),E},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});s.exports=x}),9674:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42099),m=e(30976),c=e(83419),o=e(90330),u=e(74943),r=e(95540),h=new c({initialize:function(l){this.parent=l,this.animationManager=l.scene.sys.anims,this.animationManager.on(u.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(d){var l=this.parent;if(d===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,l;Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++){var g=d[p];this.nextAnim?this.nextAnimsQueue.push(g):this.nextAnim=g}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(d){this.isPlaying&&this.stop();var l=this.animationManager,p=typeof d=="string"?d:r(d,"key",null),g=this.exists(p)?this.get(p):l.get(p);if(!g)console.warn("Missing animation: "+p);else{this.currentAnim=g;var x=g.getTotalFrames(),y=r(d,"frameRate",g.frameRate),E=r(d,"duration",g.duration);g.calculateDuration(this,x,E,y),this.delay=r(d,"delay",g.delay),this.repeat=r(d,"repeat",g.repeat),this.repeatDelay=r(d,"repeatDelay",g.repeatDelay),this.yoyo=r(d,"yoyo",g.yoyo),this.showBeforeDelay=r(d,"showBeforeDelay",g.showBeforeDelay),this.showOnStart=r(d,"showOnStart",g.showOnStart),this.hideOnComplete=r(d,"hideOnComplete",g.hideOnComplete),this.skipMissedFrames=r(d,"skipMissedFrames",g.skipMissedFrames),this.randomFrame=r(d,"randomFrame",g.randomFrame),this.timeScale=r(d,"timeScale",this.timeScale);var w=r(d,"startFrame",0);w>x&&(w=0),this.randomFrame&&(w=m(0,x-1));var C=g.frames[w];w===0&&!this.forward&&(C=g.getLastFrame()),this.currentFrame=C}return this.parent},pause:function(d){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),d!==void 0&&this.setCurrentFrame(d),this.parent},resume:function(d){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),d!==void 0&&this.setCurrentFrame(d),this.parent},playAfterDelay:function(d,l){if(!this.isPlaying)this.delayCounter=l,this.play(d,!0);else{var p=this.nextAnim,g=this.nextAnimsQueue;p&&g.unshift(p),this.nextAnim=d,this._pendingStop=1,this._pendingStopValue=l}return this.parent},playAfterRepeat:function(d,l){if(l===void 0&&(l=1),!this.isPlaying)this.play(d);else{var p=this.nextAnim,g=this.nextAnimsQueue;p&&g.unshift(p),this.repeatCounter!==-1&&l>this.repeatCounter&&(l=this.repeatCounter),this.nextAnim=d,this._pendingStop=2,this._pendingStopValue=l}return this.parent},play:function(d,l){l===void 0&&(l=!1);var p=this.currentAnim,g=this.parent,x=typeof d=="string"?d:d.key;if(l&&this.isPlaying&&p.key===x)return g;if(p&&this.isPlaying){var y=this.animationManager.getMix(p.key,d);if(y>0)return this.playAfterDelay(d,y)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d)},playReverse:function(d,l){l===void 0&&(l=!1);var p=typeof d=="string"?d:d.key;return l&&this.isPlaying&&this.currentAnim.key===p?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d))},startAnimation:function(d){this.load(d);var l=this.currentAnim,p=this.parent;return l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,l.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),p},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(u.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(u.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(u.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(u.ANIMATION_COMPLETE,u.ANIMATION_COMPLETE_KEY)},emitEvents:function(d,l){var p=this.currentAnim;if(p){var g=this.currentFrame,x=this.parent,y=g.textureFrame;x.emit(d,p,g,x,y),l&&x.emit(l+p.key,p,g,x,y)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var d=this.currentFrame;if(!d)return 0;var l=d.progress;return this.inReverse&&(l*=-1),l},setProgress:function(d){return this.forward||(d=1-d),this.setCurrentFrame(this.currentAnim.getFrameByProgress(d)),this.parent},setRepeat:function(d){return this.repeatCounter=d===-1?Number.MAX_VALUE:d,this.parent},globalRemove:function(d,l){l===void 0&&(l=this.currentAnim),this.isPlaying&&l.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(d,l){d===void 0&&(d=!1),l===void 0&&(l=!1);var p=this.currentAnim,g=this.parent;return p?(l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),p.getFirstTick(this),this.emitEvents(u.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!d,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(p.frames[0]),this.parent):g},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(d)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(d)}return this.parent},stopAfterDelay:function(d){return this._pendingStop=1,this._pendingStopValue=d,this.parent},stopAfterRepeat:function(d){return d===void 0&&(d=1),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=d,this.parent},stopOnFrame:function(d){return this._pendingStop=3,this._pendingStopValue=d,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(d,l){var p=this.currentAnim;if(!(!this.isPlaying||!p||p.paused)){if(this.accumulator+=l*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=l,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?p.nextFrame(this):p.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var g=0;do this.forward?p.nextFrame(this):p.previousFrame(this),g++;while(this.isPlaying&&this.accumulator>this.nextTick&&g<60)}}},setCurrentFrame:function(d){var l=this.parent;return this.currentFrame=d,l.texture=d.frame.texture,l.frame=d.frame,l.isCropped&&l.frame.updateCropUVs(l._crop,l.flipX,l.flipY),d.setAlpha&&(l.alpha=d.alpha),l.setSizeToFrame(),l._originComponent&&(d.frame.customPivot?l.setOrigin(d.frame.pivotX,d.frame.pivotY):l.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(u.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===d&&this.stop()),l},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(d){return this.anims?this.anims.get(d):null},exists:function(d){return this.anims?this.anims.has(d):!1},create:function(d){var l=d.key,p=!1;return l&&(p=this.get(l),p?console.warn("Animation key already exists: "+l):(p=new a(this,l,d),this.anims||(this.anims=new o),this.anims.set(l,p))),p},createFromAseprite:function(d,l){return this.animationManager.createFromAseprite(d,l,this.parent)},generateFrameNames:function(d,l){return this.animationManager.generateFrameNames(d,l)},generateFrameNumbers:function(d,l){return this.animationManager.generateFrameNumbers(d,l)},remove:function(d){var l=this.get(d);return l&&(this.currentAnim===l&&this.stop(),this.anims.delete(d)),l},destroy:function(){this.animationManager.off(u.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});s.exports=h}),57090:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="add"}),25312:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationcomplete"}),89580:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationcomplete-"}),52860:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationrepeat"}),63850:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationrestart"}),99085:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationstart"}),28087:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationstop"}),1794:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="animationupdate"}),52562:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pauseall"}),57953:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="remove"}),68339:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resumeall"}),74943:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADD_ANIMATION:e(57090),ANIMATION_COMPLETE:e(25312),ANIMATION_COMPLETE_KEY:e(89580),ANIMATION_REPEAT:e(52860),ANIMATION_RESTART:e(63850),ANIMATION_START:e(99085),ANIMATION_STOP:e(28087),ANIMATION_UPDATE:e(1794),PAUSE_ALL:e(52562),REMOVE_ANIMATION:e(57953),RESUME_ALL:e(68339)}}),60421:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Animation:e(42099),AnimationFrame:e(41138),AnimationManager:e(60848),AnimationState:e(9674),Events:e(74943)}}),2161:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(90330),c=e(50792),o=e(24736),u=new a({initialize:function(){this.entries=new m,this.events=new c},add:function(r,h){return this.entries.set(r,h),this.events.emit(o.ADD,this,r,h),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var h=this.get(r);return h&&(this.entries.delete(r),this.events.emit(o.REMOVE,this,r,h.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});s.exports=u}),24047:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2161),m=e(83419),c=e(8443),o=new m({initialize:function(r){this.game=r,this.binary=new a,this.bitmapFont=new a,this.json=new a,this.physics=new a,this.shader=new a,this.audio=new a,this.video=new a,this.text=new a,this.html=new a,this.obj=new a,this.tilemap=new a,this.xml=new a,this.custom={},this.game.events.once(c.DESTROY,this.destroy,this)},addCustom:function(u){return this.custom.hasOwnProperty(u)||(this.custom[u]=new a),this.custom[u]},destroy:function(){for(var u=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<u.length;r++)this[u[r]].destroy(),this[u[r]]=null;for(var h in this.custom)this.custom[h].destroy();this.custom=null,this.game=null}});s.exports=o}),51464:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="add"}),59261:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="remove"}),24736:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADD:e(51464),REMOVE:e(59261)}}),83388:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BaseCache:e(2161),CacheManager:e(24047),Events:e(24736)}}),71911:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(39506),o=e(50792),u=e(19715),r=e(87841),h=e(61340),d=e(80333),l=e(26099),p=new a({Extends:o,Mixins:[m.AlphaSingle,m.Visible],initialize:function(x,y,E,w){x===void 0&&(x=0),y===void 0&&(y=0),E===void 0&&(E=0),w===void 0&&(w=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=x,this._y=y,this._width=E,this._height=w,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new h,this.transparent=!0,this.backgroundColor=d("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(E/2,w/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(g){this.renderList.push(g)},setOrigin:function(g,x){return g===void 0&&(g=.5),x===void 0&&(x=g),this.originX=g,this.originY=x,this},getScroll:function(g,x,y){y===void 0&&(y=new l);var E=this.width*.5,w=this.height*.5;return y.x=g-E,y.y=x-w,this.useBounds&&(y.x=this.clampX(y.x),y.y=this.clampY(y.y)),y},centerOnX:function(g){var x=this.width*.5;return this.midPoint.x=g,this.scrollX=g-x,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(g){var x=this.height*.5;return this.midPoint.y=g,this.scrollY=g-x,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(g,x){return this.centerOnX(g),this.centerOnY(x),this},centerToBounds:function(){if(this.useBounds){var g=this._bounds,x=this.width*.5,y=this.height*.5;this.midPoint.set(g.centerX,g.centerY),this.scrollX=g.centerX-x,this.scrollY=g.centerY-y}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(g){if(this.disableCull)return g;var x=this.matrix.matrix,y=x[0],E=x[1],w=x[2],C=x[3],A=y*C-E*w;if(!A)return g;var M=x[4],R=x[5],P=this.scrollX,b=this.scrollY,F=this.width,I=this.height,L=this.y,D=L+I,O=this.x,z=O+F,W=this.culledObjects,k=g.length;A=1/A,W.length=0;for(var X=0;X<k;++X){var V=g[X];if(!V.hasOwnProperty("width")||V.parentContainer){W.push(V);continue}var G=V.width,N=V.height,H=V.x-P*V.scrollFactorX-G*V.originX,U=V.y-b*V.scrollFactorY-N*V.originY,_=H*y+U*w+M,$=H*E+U*C+R,j=(H+G)*y+(U+N)*w+M,Z=(H+G)*E+(U+N)*C+R;j>O&&_<z&&Z>L&&$<D&&W.push(V)}return W},getWorldPoint:function(g,x,y){y===void 0&&(y=new l);var E=this.matrix.matrix,w=E[0],C=E[1],A=E[2],M=E[3],R=E[4],P=E[5],b=w*M-C*A;if(!b)return y.x=g,y.y=x,y;b=1/b;var F=M*b,I=-C*b,L=-A*b,D=w*b,O=(A*P-M*R)*b,z=(C*R-w*P)*b,W=Math.cos(this.rotation),k=Math.sin(this.rotation),X=this.zoomX,V=this.zoomY,G=this.scrollX,N=this.scrollY,H=g+(G*W-N*k)*X,U=x+(G*k+N*W)*V;return y.x=H*F+U*L+O,y.y=H*I+U*D+z,y},ignore:function(g){var x=this.id;Array.isArray(g)||(g=[g]);for(var y=0;y<g.length;y++){var E=g[y];Array.isArray(E)?this.ignore(E):E.isParent?this.ignore(E.getChildren()):E.cameraFilter|=x}return this},clampX:function(g){var x=this._bounds,y=this.displayWidth,E=x.x+(y-this.width)/2,w=Math.max(E,E+x.width-y);return g<E?g=E:g>w&&(g=w),g},clampY:function(g){var x=this._bounds,y=this.displayHeight,E=x.y+(y-this.height)/2,w=Math.max(E,E+x.height-y);return g<E?g=E:g>w&&(g=w),g},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(g){return g===void 0&&(g=0),this.rotation=c(g),this},setBackgroundColor:function(g){return g===void 0&&(g="rgba(0,0,0,0)"),this.backgroundColor=d(g),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(g,x,y,E,w){return w===void 0&&(w=!1),this._bounds.setTo(g,x,y,E),this.dirty=!0,this.useBounds=!0,w?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(g){g===void 0&&(g=new r);var x=this._bounds;return g.setTo(x.x,x.y,x.width,x.height),g},setName:function(g){return g===void 0&&(g=""),this.name=g,this},setPosition:function(g,x){return x===void 0&&(x=g),this.x=g,this.y=x,this},setRotation:function(g){return g===void 0&&(g=0),this.rotation=g,this},setRoundPixels:function(g){return this.roundPixels=g,this},setScene:function(g,x){x===void 0&&(x=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=g,this.isSceneCamera=x;var y=g.sys;return this.sceneManager=y.game.scene,this.scaleManager=y.scale,this.cameraManager=y.cameras,this.updateSystem(),this},setScroll:function(g,x){return x===void 0&&(x=g),this.scrollX=g,this.scrollY=x,this},setSize:function(g,x){return x===void 0&&(x=g),this.width=g,this.height=x,this},setViewport:function(g,x,y,E){return this.x=g,this.y=x,this.width=y,this.height=E,this},setZoom:function(g,x){return g===void 0&&(g=1),x===void 0&&(x=g),g===0&&(g=.001),x===0&&(x=.001),this.zoomX=g,this.zoomY=x,this},setMask:function(g,x){return x===void 0&&(x=!0),this.mask=g,this._maskCamera=x?this.cameraManager.default:this,this},clearMask:function(g){return g===void 0&&(g=!1),g&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var g={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(g.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),g},update:function(){},setIsSceneCamera:function(g){return this.isSceneCamera=g,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var g=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,x=this.sceneManager;g&&!this._customViewport?x.customViewports++:!g&&this._customViewport&&x.customViewports--,this.dirty=!0,this._customViewport=g}},destroy:function(){this.emit(u.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(g){this._x=g,this.updateSystem()}},y:{get:function(){return this._y},set:function(g){this._y=g,this.updateSystem()}},width:{get:function(){return this._width},set:function(g){this._width=g,this.updateSystem()}},height:{get:function(){return this._height},set:function(g){this._height=g,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(g){g!==this._scrollX&&(this._scrollX=g,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(g){g!==this._scrollY&&(this._scrollY=g,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(g){this._zoomX=g,this._zoomY=g,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(g){this._zoomX=g,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(g){this._zoomY=g,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(g){this._rotation=g,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});s.exports=p}),38058:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71911),m=e(67502),c=e(45319),o=e(83419),u=e(31401),r=e(20052),h=e(19715),d=e(28915),l=e(87841),p=e(26099),g=new o({Extends:a,Mixins:[u.PostPipeline],initialize:function(y,E,w,C){a.call(this,y,E,w,C),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new p(1,1),this.followOffset=new p,this.deadzone=null,this._follow=null},setDeadzone:function(x,y){if(x===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=x,this.deadzone.height=y):this.deadzone=new l(0,0,x,y),this._follow){var E=this.width/2,w=this.height/2,C=this._follow.x-this.followOffset.x,A=this._follow.y-this.followOffset.y;this.midPoint.set(C,A),this.scrollX=C-E,this.scrollY=A-w}m(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(x,y,E,w,C,A){return this.fadeEffect.start(!1,x,y,E,w,!0,C,A)},fadeOut:function(x,y,E,w,C,A){return this.fadeEffect.start(!0,x,y,E,w,!0,C,A)},fadeFrom:function(x,y,E,w,C,A,M){return this.fadeEffect.start(!1,x,y,E,w,C,A,M)},fade:function(x,y,E,w,C,A,M){return this.fadeEffect.start(!0,x,y,E,w,C,A,M)},flash:function(x,y,E,w,C,A,M){return this.flashEffect.start(x,y,E,w,C,A,M)},shake:function(x,y,E,w,C){return this.shakeEffect.start(x,y,E,w,C)},pan:function(x,y,E,w,C,A,M){return this.panEffect.start(x,y,E,w,C,A,M)},rotateTo:function(x,y,E,w,C,A,M){return this.rotateToEffect.start(x,y,E,w,C,A,M)},zoomTo:function(x,y,E,w,C,A){return this.zoomEffect.start(x,y,E,w,C,A)},preRender:function(){this.renderList.length=0;var x=this.width,y=this.height,E=x*.5,w=y*.5,C=this.zoomX,A=this.zoomY,M=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(C)&&Number.isInteger(A);var R=x*this.originX,P=y*this.originY,b=this._follow,F=this.deadzone,I=this.scrollX,L=this.scrollY;F&&m(F,this.midPoint.x,this.midPoint.y);var D=!1;if(b&&!this.panEffect.isRunning){var O=this.lerp,z=b.x-this.followOffset.x,W=b.y-this.followOffset.y;F?(z<F.x?I=d(I,I-(F.x-z),O.x):z>F.right&&(I=d(I,I+(z-F.right),O.x)),W<F.y?L=d(L,L-(F.y-W),O.y):W>F.bottom&&(L=d(L,L+(W-F.bottom),O.y))):(I=d(I,z-R,O.x),L=d(L,W-P,O.y)),D=!0}this.roundPixels&&(I=Math.floor(I),L=Math.floor(L)),this.useBounds&&(I=this.clampX(I),L=this.clampY(L)),this.scrollX=I,this.scrollY=L;var k=I+E,X=L+w;this.midPoint.set(k,X);var V=Math.floor(x/C+.5),G=Math.floor(y/A+.5),N=Math.floor(k-V/2+.5),H=Math.floor(X-G/2+.5);this.worldView.setTo(N,H,V,G),M.applyITRS(Math.floor(this.x+R+.5),Math.floor(this.y+P+.5),this.rotation,C,A),M.translate(-R,-P),this.shakeEffect.preRender(),D&&this.emit(h.FOLLOW_UPDATE,this,b)},setLerp:function(x,y){return x===void 0&&(x=1),y===void 0&&(y=x),this.lerp.set(x,y),this},setFollowOffset:function(x,y){return x===void 0&&(x=0),y===void 0&&(y=0),this.followOffset.set(x,y),this},startFollow:function(x,y,E,w,C,A){y===void 0&&(y=!1),E===void 0&&(E=1),w===void 0&&(w=E),C===void 0&&(C=0),A===void 0&&(A=C),this._follow=x,this.roundPixels=y,E=c(E,0,1),w=c(w,0,1),this.lerp.set(E,w),this.followOffset.set(C,A);var M=this.width/2,R=this.height/2,P=x.x-C,b=x.y-A;return this.midPoint.set(P,b),this.scrollX=P-M,this.scrollY=b-R,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(x,y){this.visible&&(this.rotateToEffect.update(x,y),this.panEffect.update(x,y),this.zoomEffect.update(x,y),this.shakeEffect.update(x,y),this.flashEffect.update(x,y),this.fadeEffect.update(x,y))},destroy:function(){this.resetFX(),a.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});s.exports=g}),32743:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38058),m=e(83419),c=e(95540),o=e(37277),u=e(37303),r=e(97480),h=e(44594),d=new m({initialize:function(p){this.scene=p,this.systems=p.sys,this.roundPixels=p.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,p.sys.events.once(h.BOOT,this.boot,this),p.sys.events.on(h.START,this.start,this)},boot:function(){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new a(0,0,l.scale.width,l.scale.height).setScene(this.scene),l.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){if(!this.main){var l=this.systems;l.settings.cameras?this.fromJSON(l.settings.cameras):this.add(),this.main=this.cameras[0]}var p=this.systems.events;p.on(h.UPDATE,this.update,this),p.once(h.SHUTDOWN,this.shutdown,this)},add:function(l,p,g,x,y,E){l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=this.scene.sys.scale.width),x===void 0&&(x=this.scene.sys.scale.height),y===void 0&&(y=!1),E===void 0&&(E="");var w=new a(l,p,g,x);return w.setName(E),w.setScene(this.scene),w.setRoundPixels(this.roundPixels),w.id=this.getNextID(),this.cameras.push(w),y&&(this.main=w),w},addExisting:function(l,p){p===void 0&&(p=!1);var g=this.cameras.indexOf(l);return g===-1?(l.id=this.getNextID(),l.setRoundPixels(this.roundPixels),this.cameras.push(l),p&&(this.main=l),l):null},getNextID:function(){for(var l=this.cameras,p=1,g=0;g<32;g++){for(var x=!1,y=0;y<l.length;y++){var E=l[y];if(E&&E.id===p){x=!0;continue}}if(x)p=p<<1;else return p}return 0},getTotal:function(l){l===void 0&&(l=!1);for(var p=0,g=this.cameras,x=0;x<g.length;x++){var y=g[x];(!l||l&&y.visible)&&p++}return p},fromJSON:function(l){Array.isArray(l)||(l=[l]);for(var p=this.scene.sys.scale.width,g=this.scene.sys.scale.height,x=0;x<l.length;x++){var y=l[x],E=c(y,"x",0),w=c(y,"y",0),C=c(y,"width",p),A=c(y,"height",g),M=this.add(E,w,C,A);M.name=c(y,"name",""),M.zoom=c(y,"zoom",1),M.rotation=c(y,"rotation",0),M.scrollX=c(y,"scrollX",0),M.scrollY=c(y,"scrollY",0),M.roundPixels=c(y,"roundPixels",!1),M.visible=c(y,"visible",!0);var R=c(y,"backgroundColor",!1);R&&M.setBackgroundColor(R);var P=c(y,"bounds",null);if(P){var b=c(P,"x",0),F=c(P,"y",0),I=c(P,"width",p),L=c(P,"height",g);M.setBounds(b,F,I,L)}}return this},getCamera:function(l){for(var p=this.cameras,g=0;g<p.length;g++)if(p[g].name===l)return p[g];return null},getCamerasBelowPointer:function(l){for(var p=this.cameras,g=l.x,x=l.y,y=[],E=0;E<p.length;E++){var w=p[E];w.visible&&w.inputEnabled&&u(w,g,x)&&y.unshift(w)}return y},remove:function(l,p){p===void 0&&(p=!0),Array.isArray(l)||(l=[l]);for(var g=0,x=this.cameras,y=0;y<l.length;y++){var E=x.indexOf(l[y]);E!==-1&&(p?x[E].destroy():x[E].renderList=[],x.splice(E,1),g++)}return!this.main&&x[0]&&(this.main=x[0]),g},render:function(l,p){for(var g=this.scene,x=this.cameras,y=0;y<x.length;y++){var E=x[y];if(E.visible&&E.alpha>0){E.preRender();var w=this.getVisibleChildren(p.getChildren(),E);l.render(g,w,E)}}},getVisibleChildren:function(l,p){return l.filter(function(g){return g.willRender(p)})},resetAll:function(){for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(l,p){for(var g=0;g<this.cameras.length;g++)this.cameras[g].update(l,p)},onResize:function(l,p,g,x,y){for(var E=0;E<this.cameras.length;E++){var w=this.cameras[E];w._x===0&&w._y===0&&w._width===x&&w._height===y&&w.setSize(p.width,p.height)}},resize:function(l,p){for(var g=0;g<this.cameras.length;g++)this.cameras[g].setSize(l,p)},shutdown:function(){this.main=void 0;for(var l=0;l<this.cameras.length;l++)this.cameras[l].destroy();this.cameras=[];var p=this.systems.events;p.off(h.UPDATE,this.update,this),p.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(h.START,this.start,this),this.systems.events.off(h.DESTROY,this.destroy,this),this.systems.game.scale.off(r.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});o.register("CameraManager",d,"cameras"),s.exports=d}),5020:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(19715),o=new m({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,r,h,d,l,p,g,x){if(u===void 0&&(u=!0),r===void 0&&(r=1e3),h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=!1),g===void 0&&(g=null),x===void 0&&(x=this.camera.scene),!p&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=u,this.progress=0,this.red=h,this.green=d,this.blue=l,this.alpha=u?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=g,this._onUpdateScope=x;var y=u?c.FADE_OUT_START:c.FADE_IN_START;return this.camera.emit(y,this.camera,this,r,h,d,l),this.camera},update:function(u,r){this.isRunning&&(this._elapsed+=r,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(u){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(u,r){if(!this.isRunning&&!this.isComplete)return!1;var h=this.camera,d=this.red/255,l=this.green/255,p=this.blue/255;return u.drawFillRect(h.x,h.y,h.width,h.height,r(p,l,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var u=this.direction?c.FADE_OUT_COMPLETE:c.FADE_IN_COMPLETE;this.camera.emit(u,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=o}),10662:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(19715),o=new m({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(u,r,h,d,l,p,g){return u===void 0&&(u=250),r===void 0&&(r=255),h===void 0&&(h=255),d===void 0&&(d=255),l===void 0&&(l=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!l&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=u,this.progress=0,this.red=r,this.green=h,this.blue=d,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.camera.emit(c.FLASH_START,this.camera,this,u,r,h,d),this.camera)},update:function(u,r){this.isRunning&&(this._elapsed+=r,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(u){if(!this.isRunning)return!1;var r=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(u,r){if(!this.isRunning)return!1;var h=this.camera,d=this.red/255,l=this.green/255,p=this.blue/255;return u.drawFillRect(h.x,h.y,h.width,h.height,r(p,l,d,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=o}),20359:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(62640),o=e(19715),u=e(26099),r=new m({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=new u,this.current=new u,this.destination=new u,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,d,l,p,g,x,y){l===void 0&&(l=1e3),p===void 0&&(p=c.Linear),g===void 0&&(g=!1),x===void 0&&(x=null),y===void 0&&(y=this.camera.scene);var E=this.camera;return!g&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source.set(E.scrollX,E.scrollY),this.destination.set(h,d),E.getScroll(h,d,this.current),typeof p=="string"&&c.hasOwnProperty(p)?this.ease=c[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=x,this._onUpdateScope=y,this.camera.emit(o.PAN_START,this.camera,this,l,h,d)),E},update:function(h,d){if(this.isRunning){this._elapsed+=d;var l=a(this._elapsed/this.duration,0,1);this.progress=l;var p=this.camera;if(this._elapsed<this.duration){var g=this.ease(l);p.getScroll(this.destination.x,this.destination.y,this.current);var x=this.source.x+(this.current.x-this.source.x)*g,y=this.source.y+(this.current.y-this.source.y)*g;p.setScroll(x,y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,l,x,y)}else p.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,l,p.scrollX,p.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});s.exports=r}),34208:((s,T,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var a=e(45319),m=e(83419),c=e(19715),o=e(62640),u=new m({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,h,d,l,p,g,x){d===void 0&&(d=1e3),l===void 0&&(l=o.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),x===void 0&&(x=this.camera.scene),h===void 0&&(h=!1),this.shortestPath=h;var y=r;r<0?(y=-1*r,this.clockwise=!1):this.clockwise=!0;var E=360*Math.PI/180;y=y-Math.floor(y/E)*E;var w=this.camera;if(!p&&this.isRunning)return w;if(this.isRunning=!0,this.duration=d,this.progress=0,this.source=w.rotation,this.destination=y,typeof l=="string"&&o.hasOwnProperty(l)?this.ease=o[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=x,this.shortestPath){var C=0,A=0;this.destination>this.source?C=Math.abs(this.destination-this.source):C=Math.abs(this.destination+E)-this.source,this.source>this.destination?A=Math.abs(this.source-this.destination):A=Math.abs(this.source+E)-this.destination,C<A?this.clockwise=!0:C>A&&(this.clockwise=!1)}return this.camera.emit(c.ROTATE_START,this.camera,this,d,y),w},update:function(r,h){if(this.isRunning){this._elapsed+=h;var d=a(this._elapsed/this.duration,0,1);this.progress=d;var l=this.camera;if(this._elapsed<this.duration){var p=this.ease(d);this.current=l.rotation;var g=0,x=360*Math.PI/180,y=this.destination,E=this.current;this.clockwise===!1&&(y=this.current,E=this.destination),y>=E?g=Math.abs(y-E):g=Math.abs(y+x)-E;var w=0;this.clockwise?w=l.rotation+g*p:w=l.rotation-g*p,l.rotation=w,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,d,w)}else l.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,d,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});s.exports=u}),30330:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(19715),o=e(26099),u=new m({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,h,d,l,p){return r===void 0&&(r=100),h===void 0&&(h=.05),d===void 0&&(d=!1),l===void 0&&(l=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof h=="number"?this.intensity.set(h):this.intensity.set(h.x,h.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=l,this._onUpdateScope=p,this.camera.emit(c.SHAKE_START,this.camera,this,r,h),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,h){if(this.isRunning)if(this._elapsed+=h,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var d=this.intensity,l=this.camera.width,p=this.camera.height,g=this.camera.zoom;this._offsetX=(Math.random()*d.x*l*2-d.x*l)*g,this._offsetY=(Math.random()*d.y*p*2-d.y*p)*g,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});s.exports=u}),45641:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(62640),o=e(19715),u=new m({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,h,d,l,p,g){h===void 0&&(h=1e3),d===void 0&&(d=c.Linear),l===void 0&&(l=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene);var x=this.camera;return!l&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source=x.zoom,this.destination=r,typeof d=="string"&&c.hasOwnProperty(d)?this.ease=c[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.camera.emit(o.ZOOM_START,this.camera,this,h,r)),x},update:function(r,h){this.isRunning&&(this._elapsed+=h,this.progress=a(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=u}),20052:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Fade:e(5020),Flash:e(10662),Pan:e(20359),Shake:e(30330),RotateTo:e(34208),Zoom:e(45641)}}),16438:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="cameradestroy"}),32726:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerafadeincomplete"}),87807:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerafadeinstart"}),45917:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerafadeoutcomplete"}),95666:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerafadeoutstart"}),47056:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="cameraflashcomplete"}),91261:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="cameraflashstart"}),45047:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="followupdate"}),81927:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerapancomplete"}),74264:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerapanstart"}),54419:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postrender"}),79330:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prerender"}),93183:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerarotatecomplete"}),80112:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerarotatestart"}),62252:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerashakecomplete"}),86017:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerashakestart"}),539:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerazoomcomplete"}),51892:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="camerazoomstart"}),19715:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={DESTROY:e(16438),FADE_IN_COMPLETE:e(32726),FADE_IN_START:e(87807),FADE_OUT_COMPLETE:e(45917),FADE_OUT_START:e(95666),FLASH_COMPLETE:e(47056),FLASH_START:e(91261),FOLLOW_UPDATE:e(45047),PAN_COMPLETE:e(81927),PAN_START:e(74264),POST_RENDER:e(54419),PRE_RENDER:e(79330),ROTATE_COMPLETE:e(93183),ROTATE_START:e(80112),SHAKE_COMPLETE:e(62252),SHAKE_START:e(86017),ZOOM_COMPLETE:e(539),ZOOM_START:e(51892)}}),87969:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Camera:e(38058),BaseCamera:e(71911),CameraManager:e(32743),Effects:e(20052),Events:e(19715)}}),63091:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(35154),c=new a({initialize:function(u){this.camera=m(u,"camera",null),this.left=m(u,"left",null),this.right=m(u,"right",null),this.up=m(u,"up",null),this.down=m(u,"down",null),this.zoomIn=m(u,"zoomIn",null),this.zoomOut=m(u,"zoomOut",null),this.zoomSpeed=m(u,"zoomSpeed",.01),this.minZoom=m(u,"minZoom",.001),this.maxZoom=m(u,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=m(u,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=m(u,"speed.x",0),this.speedY=m(u,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var u=this.camera;this.up&&this.up.isDown?u.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(u.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?u.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(u.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(u.zoom-=this.zoomSpeed,u.zoom<this.minZoom&&(u.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(u.zoom+=this.zoomSpeed,u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});s.exports=c}),58818:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(35154),c=new a({initialize:function(u){this.camera=m(u,"camera",null),this.left=m(u,"left",null),this.right=m(u,"right",null),this.up=m(u,"up",null),this.down=m(u,"down",null),this.zoomIn=m(u,"zoomIn",null),this.zoomOut=m(u,"zoomOut",null),this.zoomSpeed=m(u,"zoomSpeed",.01),this.minZoom=m(u,"minZoom",.001),this.maxZoom=m(u,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=m(u,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=m(u,"acceleration.x",0),this.accelY=m(u,"acceleration.y",0)),this.dragX=0,this.dragY=0;var h=m(u,"drag",null);typeof h=="number"?(this.dragX=h,this.dragY=h):(this.dragX=m(u,"drag.x",0),this.dragY=m(u,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var d=m(u,"maxSpeed",null);typeof d=="number"?(this.maxSpeedX=d,this.maxSpeedY=d):(this.maxSpeedX=m(u,"maxSpeed.x",0),this.maxSpeedY=m(u,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var u=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(u.scrollX-=this._speedX*o|0),this._speedY!==0&&(u.scrollY-=this._speedY*o|0),this._zoom!==0&&(u.zoom+=this._zoom,u.zoom<this.minZoom?u.zoom=this.minZoom:u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});s.exports=c}),38865:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={FixedKeyControl:e(63091),SmoothedKeyControl:e(58818)}}),26638:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Controls:e(38865),Scene2D:e(87969)}}),8054:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:e(10312),ScaleModes:e(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};s.exports=a}),69547:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(8054),c=e(42363),o=e(82264),u=e(95540),r=e(35154),h=e(41212),d=e(29747),l=e(75508),p=e(36060),g=e(80333),x=new a({initialize:function(E){E===void 0&&(E={});var w=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],C="#ffffff",A=r(E,"scale",null);this.width=r(A,"width",1024,E),this.height=r(A,"height",768,E),this.zoom=r(A,"zoom",1,E),this.parent=r(A,"parent",void 0,E),this.scaleMode=r(A,A?"mode":"scaleMode",0,E),this.expandParent=r(A,"expandParent",!0,E),this.autoRound=r(A,"autoRound",!1,E),this.autoCenter=r(A,"autoCenter",0,E),this.resizeInterval=r(A,"resizeInterval",500,E),this.fullscreenTarget=r(A,"fullscreenTarget",null,E),this.minWidth=r(A,"min.width",0,E),this.maxWidth=r(A,"max.width",0,E),this.minHeight=r(A,"min.height",0,E),this.maxHeight=r(A,"max.height",0,E),this.snapWidth=r(A,"snap.width",0,E),this.snapHeight=r(A,"snap.height",0,E),this.renderType=r(E,"type",m.AUTO),this.canvas=r(E,"canvas",null),this.context=r(E,"context",null),this.canvasStyle=r(E,"canvasStyle",null),this.customEnvironment=r(E,"customEnvironment",!1),this.sceneConfig=r(E,"scene",null),this.seed=r(E,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=r(E,"title",""),this.gameURL=r(E,"url","https://phaser.io/"+m.LOG_VERSION),this.gameVersion=r(E,"version",""),this.autoFocus=r(E,"autoFocus",!0),this.stableSort=r(E,"stableSort",-1),this.stableSort===-1&&(this.stableSort=o.browser.es2019?1:0),o.features.stableSort=this.stableSort,this.domCreateContainer=r(E,"dom.createContainer",!1),this.domPointerEvents=r(E,"dom.pointerEvents","none"),this.inputKeyboard=r(E,"input.keyboard",!0),this.inputKeyboardEventTarget=r(E,"input.keyboard.target",window),this.inputKeyboardCapture=r(E,"input.keyboard.capture",[]),this.inputMouse=r(E,"input.mouse",!0),this.inputMouseEventTarget=r(E,"input.mouse.target",null),this.inputMousePreventDefaultDown=r(E,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=r(E,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=r(E,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=r(E,"input.mouse.preventDefaultWheel",!0),this.inputTouch=r(E,"input.touch",o.input.touch),this.inputTouchEventTarget=r(E,"input.touch.target",null),this.inputTouchCapture=r(E,"input.touch.capture",!0),this.inputActivePointers=r(E,"input.activePointers",1),this.inputSmoothFactor=r(E,"input.smoothFactor",0),this.inputWindowEvents=r(E,"input.windowEvents",!0),this.inputGamepad=r(E,"input.gamepad",!1),this.inputGamepadEventTarget=r(E,"input.gamepad.target",window),this.disableContextMenu=r(E,"disableContextMenu",!1),this.audio=r(E,"audio",{}),this.hideBanner=r(E,"banner",null)===!1,this.hidePhaser=r(E,"banner.hidePhaser",!1),this.bannerTextColor=r(E,"banner.text",C),this.bannerBackgroundColor=r(E,"banner.background",w),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=r(E,"fps",null),this.disablePreFX=r(E,"disablePreFX",!1),this.disablePostFX=r(E,"disablePostFX",!1);var M=r(E,"render",null);this.pipeline=r(M,"pipeline",null,E),this.autoMobilePipeline=r(M,"autoMobilePipeline",!0,E),this.defaultPipeline=r(M,"defaultPipeline",p.MULTI_PIPELINE,E),this.antialias=r(M,"antialias",!0,E),this.antialiasGL=r(M,"antialiasGL",!0,E),this.mipmapFilter=r(M,"mipmapFilter","",E),this.desynchronized=r(M,"desynchronized",!1,E),this.roundPixels=r(M,"roundPixels",!1,E),this.pixelArt=r(M,"pixelArt",this.zoom!==1,E),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=r(M,"transparent",!1,E),this.clearBeforeRender=r(M,"clearBeforeRender",!0,E),this.preserveDrawingBuffer=r(M,"preserveDrawingBuffer",!1,E),this.premultipliedAlpha=r(M,"premultipliedAlpha",!0,E),this.failIfMajorPerformanceCaveat=r(M,"failIfMajorPerformanceCaveat",!1,E),this.powerPreference=r(M,"powerPreference","default",E),this.batchSize=r(M,"batchSize",4096,E),this.maxTextures=r(M,"maxTextures",-1,E),this.maxLights=r(M,"maxLights",10,E);var R=r(E,"backgroundColor",0);this.backgroundColor=g(R),this.transparent&&(this.backgroundColor=g(0),this.backgroundColor.alpha=0),this.preBoot=r(E,"callbacks.preBoot",d),this.postBoot=r(E,"callbacks.postBoot",d),this.physics=r(E,"physics",{}),this.defaultPhysicsSystem=r(this.physics,"default",!1),this.loaderBaseURL=r(E,"loader.baseURL",""),this.loaderPath=r(E,"loader.path",""),this.loaderMaxParallelDownloads=r(E,"loader.maxParallelDownloads",o.os.android?6:32),this.loaderCrossOrigin=r(E,"loader.crossOrigin",void 0),this.loaderResponseType=r(E,"loader.responseType",""),this.loaderAsync=r(E,"loader.async",!0),this.loaderUser=r(E,"loader.user",""),this.loaderPassword=r(E,"loader.password",""),this.loaderTimeout=r(E,"loader.timeout",0),this.loaderMaxRetries=r(E,"loader.maxRetries",2),this.loaderWithCredentials=r(E,"loader.withCredentials",!1),this.loaderImageLoadType=r(E,"loader.imageLoadType","XHR"),this.loaderLocalScheme=r(E,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=r(E,"fx.glow.quality",.1),this.glowFXDistance=r(E,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=r(E,"plugins",null),b=c.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:h(P)&&(this.installGlobalPlugins=u(P,"global",[]),this.installScenePlugins=u(P,"scene",[]),Array.isArray(P.default)?b=P.default:Array.isArray(P.defaultMerge)&&(b=b.concat(P.defaultMerge)))),this.defaultPlugins=b;var F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=r(E,"images.default",F+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=r(E,"images.missing",F+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=r(E,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=m.WEBGL:window.FORCE_CANVAS&&(this.renderType=m.CANVAS))}});s.exports=x}),86054:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20623),m=e(27919),c=e(8054),o=e(89357),u=function(r){var h=r.config;if((h.customEnvironment||h.canvas)&&h.renderType===c.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!h.customEnvironment&&!h.canvas&&h.renderType!==c.HEADLESS)if(h.renderType===c.AUTO&&(h.renderType=o.webGL?c.WEBGL:c.CANVAS),h.renderType===c.WEBGL){if(!o.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(h.renderType===c.CANVAS){if(!o.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+h.renderType);h.antialias||m.disableSmoothing();var d=r.scale.baseSize,l=d.width,p=d.height;if(h.canvas?(r.canvas=h.canvas,r.canvas.width=l,r.canvas.height=p):r.canvas=m.create(r,l,p,h.renderType),h.canvasStyle&&(r.canvas.style=h.canvasStyle),h.antialias||a.setCrisp(r.canvas),h.renderType!==c.HEADLESS){var g,x;g=e(68627),x=e(74797),h.renderType===c.WEBGL?r.renderer=new x(r):(r.renderer=new g(r),r.context=r.renderer.gameContext)}};s.exports=u}),96391:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8054),m=function(c){var o=c.config;if(!o.hideBanner){var u="WebGL";o.renderType===a.CANVAS?u="Canvas":o.renderType===a.HEADLESS&&(u="Headless");var r=o.audio,h=c.device.audio,d;if(h.webAudio&&!r.disableWebAudio?d="Web Audio":r.noAudio||!h.webAudio&&!h.audioData?d="No Audio":d="HTML5 Audio",c.device.browser.ie)window.console&&console.log("Phaser v"+a.VERSION+" / https://phaser.io");else{var l="",p=[l];if(Array.isArray(o.bannerBackgroundColor)){var g;o.bannerBackgroundColor.forEach(function(y){l=l.concat("%c "),p.push("background: "+y),g=y}),p[p.length-1]="color: "+o.bannerTextColor+"; background: "+g}else l=l.concat("%c "),p.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);p.push("background: transparent"),o.gameTitle&&(l=l.concat(o.gameTitle),o.gameVersion&&(l=l.concat(" v"+o.gameVersion)),o.hidePhaser||(l=l.concat(" / ")));var x="";o.hidePhaser||(l=l.concat("Phaser v"+a.VERSION+x+" ("+u+" | "+d+")")),l=l.concat(" %c "+o.gameURL),p[0]=l,console.log.apply(console,p)}}};s.exports=m}),50127:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),m=e(60848),c=e(24047),o=e(27919),u=e(83419),r=e(69547),h=e(83719),d=e(86054),l=e(45893),p=e(96391),g=e(82264),x=e(57264),y=e(50792),E=e(8443),w=e(7003),C=e(37277),A=e(77332),M=e(76531),R=e(60903),P=e(69442),b=e(17130),F=e(65898),I=e(51085),L=e(14747),D=new u({initialize:function(z){this.config=new r(z),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new y,this.anims=new m(this),this.textures=new b(this),this.cache=new c(this),this.registry=new l(this,new y),this.input=new w(this,this.config),this.scene=new R(this,this.config.sceneConfig),this.device=g,this.scale=new M(this,this.config),this.sound=null,this.sound=L.create(this),this.loop=new F(this,this.config.fps),this.plugins=new A(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,x(this.boot.bind(this))},boot:function(){if(!C.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),d(this),h(this),p(this),a(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(E.BOOT)},texturesReady:function(){this.events.emit(E.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),I(this);var O=this.events;O.on(E.HIDDEN,this.onHidden,this),O.on(E.VISIBLE,this.onVisible,this),O.on(E.BLUR,this.onBlur,this),O.on(E.FOCUS,this.onFocus,this)},step:function(O,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(E.PRE_STEP,O,z),W.emit(E.STEP,O,z),this.scene.update(O,z),W.emit(E.POST_STEP,O,z);var k=this.renderer;k.preRender(),W.emit(E.PRE_RENDER,k,O,z),this.scene.render(k),k.postRender(),W.emit(E.POST_RENDER,k,O,z)}},headlessStep:function(O,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(E.PRE_STEP,O,z),W.emit(E.STEP,O,z),this.scene.update(O,z),W.emit(E.POST_STEP,O,z),this.scene.isProcessing=!1,W.emit(E.PRE_RENDER,null,O,z),W.emit(E.POST_RENDER,null,O,z)}},onHidden:function(){this.loop.pause(),this.events.emit(E.PAUSE)},pause:function(){var O=this.isPaused;this.isPaused=!0,O||this.events.emit(E.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(E.RESUME,this.loop.pauseDuration)},resume:function(){var O=this.isPaused;this.isPaused=!1,O&&this.events.emit(E.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(O,z){z===void 0&&(z=!1),this.pendingDestroy=!0,this.removeCanvas=O,this.noReturn=z},runDestroy:function(){this.scene.destroy(),this.events.emit(E.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});s.exports=D}),65898:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(35154),c=e(29747),o=e(43092),u=new a({initialize:function(h,d){this.game=h,this.raf=new o,this.started=!1,this.running=!1,this.minFps=m(d,"min",5),this.targetFps=m(d,"target",60),this.fpsLimit=m(d,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=c,this.forceSetTimeOut=m(d,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=m(d,"deltaHistory",10),this.panicMax=m(d,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=m(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=Math.min(this._target,this.deltaHistory[h]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var h=0;h<this.deltaSmoothingMax;h++)this.deltaHistory[h]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r;var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target)},smoothDelta:function(r){var h=this.deltaIndex,d=this.deltaHistory,l=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,r=Math.min(r,this._target)),r>this._min&&(r=d[h],r=Math.min(r,this._min)),d[h]=r,this.deltaIndex++,this.deltaIndex>=l&&(this.deltaIndex=0);for(var p=0,g=0;g<l;g++)p+=d[g];return p/=l,p},updateFPS:function(r){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0},stepLimitFPS:function(r){this.now=r;var h=Math.max(0,r-this.lastTime);this.rawDelta=h,this.time+=this.rawDelta,this.smoothStep&&(h=this.smoothDelta(h)),this.delta+=h,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(r,this.delta),this.delta=0),this.lastTime=r,this.frame++},step:function(r){this.now=r;var h=Math.max(0,r-this.lastTime);this.rawDelta=h,this.time+=this.rawDelta,this.smoothStep&&(h=this.smoothDelta(h)),this.delta=h,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.callback(r,h),this.lastTime=r,this.frame++},tick:function(){var r=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(r):this.step(r)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){r===void 0&&(r=!1);var h=window.performance.now();if(!this.running){r&&(this.startTime+=-this.lastTime+(this.lastTime+h));var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=h+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});s.exports=u}),51085:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8443),m=function(c){var o,u=c.events;if(document.hidden!==void 0)o="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(d){document[d+"Hidden"]!==void 0&&(document.hidden=function(){return document[d+"Hidden"]},o=d+"visibilitychange")})}var h=function(d){document.hidden||d.type==="pause"?u.emit(a.HIDDEN):u.emit(a.VISIBLE)};o&&document.addEventListener(o,h,!1),window.onblur=function(){u.emit(a.BLUR)},window.onfocus=function(){u.emit(a.FOCUS)},window.focus&&c.config.autoFocus&&window.focus()};s.exports=m}),97217:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="blur"}),47548:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="boot"}),19814:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="contextlost"}),68446:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),41700:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="focus"}),25432:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="hidden"}),65942:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),59211:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postrender"}),47789:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="poststep"}),39066:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prerender"}),460:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prestep"}),16175:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="ready"}),42331:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),11966:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="step"}),32969:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="systemready"}),94830:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="visible"}),8443:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BLUR:e(97217),BOOT:e(47548),CONTEXT_LOST:e(19814),DESTROY:e(68446),FOCUS:e(41700),HIDDEN:e(25432),PAUSE:e(65942),POST_RENDER:e(59211),POST_STEP:e(47789),PRE_RENDER:e(39066),PRE_STEP:e(460),READY:e(16175),RESUME:e(42331),STEP:e(11966),SYSTEM_READY:e(32969),VISIBLE:e(94830)}}),42857:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Config:e(69547),CreateRenderer:e(86054),DebugHeader:e(96391),Events:e(8443),TimeStep:e(65898),VisibilityHandler:e(51085)}}),99584:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(5290),m=e(27919),c=e(35154),o=function(u){var r=c(u,"data",[]),h=c(u,"canvas",null),d=c(u,"palette",a),l=c(u,"pixelWidth",1),p=c(u,"pixelHeight",l),g=c(u,"resizeCanvas",!0),x=c(u,"clearCanvas",!0),y=c(u,"preRender",null),E=c(u,"postRender",null),w=Math.floor(Math.abs(r[0].length*l)),C=Math.floor(Math.abs(r.length*p));h||(h=m.create2D(this,w,C),g=!1,x=!1),g&&(h.width=w,h.height=C);var A=h.getContext("2d",{willReadFrequently:!0});x&&A.clearRect(0,0,w,C),y&&y(h,A);for(var M=0;M<r.length;M++)for(var R=r[M],P=0;P<R.length;P++){var b=R[P];b!=="."&&b!==" "&&(A.fillStyle=d[b],A.fillRect(P*l,M*p,l,p))}return E&&E(h,A),h};s.exports=o}),15822:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={GenerateTexture:e(99584),Palettes:e(57763)}}),5290:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}}),23816:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}}),9866:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}}),77552:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}}),92259:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}}),57763:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ARNE16:e(5290),C64:e(23816),CGA:e(9866),JMP:e(77552),MSX:e(92259)}}),46728:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(36316),c=e(80021),o=e(26099),u=new a({Extends:c,initialize:function(h,d,l,p){c.call(this,"CubicBezierCurve"),Array.isArray(h)&&(p=new o(h[6],h[7]),l=new o(h[4],h[5]),d=new o(h[2],h[3]),h=new o(h[0],h[1])),this.p0=h,this.p1=d,this.p2=l,this.p3=p},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,h){h===void 0&&(h=new o);var d=this.p0,l=this.p1,p=this.p2,g=this.p3;return h.set(m(r,d.x,l.x,p.x,g.x),m(r,d.y,l.y,p.y,g.y))},draw:function(r,h){h===void 0&&(h=32);var d=this.getPoints(h);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<d.length;l++)r.lineTo(d[l].x,d[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});u.fromJSON=function(r){var h=r.points,d=new o(h[0],h[1]),l=new o(h[2],h[3]),p=new o(h[4],h[5]),g=new o(h[6],h[7]);return new u(d,l,p,g)},s.exports=u}),80021:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(19217),c=e(87841),o=e(26099),u=new a({initialize:function(h){this.type=h,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(r,h){return h===void 0&&(h=32),r.strokePoints(this.getPoints(h))},getBounds:function(r,h){r||(r=new c),h===void 0&&(h=16);var d=this.getLength();h>d&&(h=d/2);var l=Math.max(1,Math.round(d/h));return m(this.getSpacedPoints(l),r)},getDistancePoints:function(r){var h=this.getLength(),d=Math.max(1,h/r);return this.getSpacedPoints(d)},getEndPoint:function(r){return r===void 0&&(r=new o),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var h=[],d,l=this.getPoint(0,this._tmpVec2A),p=0;h.push(0);for(var g=1;g<=r;g++)d=this.getPoint(g/r,this._tmpVec2B),p+=d.distance(l),h.push(p),l.copy(d);return this.cacheArcLengths=h,h},getPointAt:function(r,h){var d=this.getUtoTmapping(r);return this.getPoint(d,h)},getPoints:function(r,h,d){d===void 0&&(d=[]),r||(h?r=this.getLength()/h:r=this.defaultDivisions);for(var l=0;l<=r;l++)d.push(this.getPoint(l/r));return d},getRandomPoint:function(r){return r===void 0&&(r=new o),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,h,d){d===void 0&&(d=[]),r||(h?r=this.getLength()/h:r=this.defaultDivisions);for(var l=0;l<=r;l++){var p=this.getUtoTmapping(l/r,null,r);d.push(this.getPoint(p))}return d},getStartPoint:function(r){return r===void 0&&(r=new o),this.getPointAt(0,r)},getTangent:function(r,h){h===void 0&&(h=new o);var d=1e-4,l=r-d,p=r+d;return l<0&&(l=0),p>1&&(p=1),this.getPoint(l,this._tmpVec2A),this.getPoint(p,h),h.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,h){var d=this.getUtoTmapping(r);return this.getTangent(d,h)},getTFromDistance:function(r,h){return r<=0?0:this.getUtoTmapping(0,r,h)},getUtoTmapping:function(r,h,d){var l=this.getLengths(d),p=0,g=l.length,x;h?x=Math.min(h,l[g-1]):x=r*l[g-1];for(var y=0,E=g-1,w;y<=E;)if(p=Math.floor(y+(E-y)/2),w=l[p]-x,w<0)y=p+1;else if(w>0)E=p-1;else{E=p;break}if(p=E,l[p]===x)return p/(g-1);var C=l[p],A=l[p+1],M=A-C,R=(x-C)/M;return(p+R)/(g-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});s.exports=u}),73825:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(80021),c=e(39506),o=e(35154),u=e(43396),r=e(26099),h=new a({Extends:m,initialize:function(l,p,g,x,y,E,w,C){if(typeof l=="object"){var A=l;l=o(A,"x",0),p=o(A,"y",0),g=o(A,"xRadius",0),x=o(A,"yRadius",g),y=o(A,"startAngle",0),E=o(A,"endAngle",360),w=o(A,"clockwise",!1),C=o(A,"rotation",0)}else x===void 0&&(x=g),y===void 0&&(y=0),E===void 0&&(E=360),w===void 0&&(w=!1),C===void 0&&(C=0);m.call(this,"EllipseCurve"),this.p0=new r(l,p),this._xRadius=g,this._yRadius=x,this._startAngle=c(y),this._endAngle=c(E),this._clockwise=w,this._rotation=c(C)},getStartPoint:function(d){return d===void 0&&(d=new r),this.getPoint(0,d)},getResolution:function(d){return d*2},getPoint:function(d,l){l===void 0&&(l=new r);for(var p=Math.PI*2,g=this._endAngle-this._startAngle,x=Math.abs(g)<Number.EPSILON;g<0;)g+=p;for(;g>p;)g-=p;g<Number.EPSILON&&(x?g=0:g=p),this._clockwise&&!x&&(g===p?g=-p:g=g-p);var y=this._startAngle+d*g,E=this.p0.x+this._xRadius*Math.cos(y),w=this.p0.y+this._yRadius*Math.sin(y);if(this._rotation!==0){var C=Math.cos(this._rotation),A=Math.sin(this._rotation),M=E-this.p0.x,R=w-this.p0.y;E=M*C-R*A+this.p0.x,w=M*A+R*C+this.p0.y}return l.set(E,w)},setXRadius:function(d){return this.xRadius=d,this},setYRadius:function(d){return this.yRadius=d,this},setWidth:function(d){return this.xRadius=d/2,this},setHeight:function(d){return this.yRadius=d/2,this},setStartAngle:function(d){return this.startAngle=d,this},setEndAngle:function(d){return this.endAngle=d,this},setClockwise:function(d){return this.clockwise=d,this},setRotation:function(d){return this.rotation=d,this},x:{get:function(){return this.p0.x},set:function(d){this.p0.x=d}},y:{get:function(){return this.p0.y},set:function(d){this.p0.y=d}},xRadius:{get:function(){return this._xRadius},set:function(d){this._xRadius=d}},yRadius:{get:function(){return this._yRadius},set:function(d){this._yRadius=d}},startAngle:{get:function(){return u(this._startAngle)},set:function(d){this._startAngle=c(d)}},endAngle:{get:function(){return u(this._endAngle)},set:function(d){this._endAngle=c(d)}},clockwise:{get:function(){return this._clockwise},set:function(d){this._clockwise=d}},angle:{get:function(){return u(this._rotation)},set:function(d){this._rotation=c(d)}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:u(this._startAngle),endAngle:u(this._endAngle),clockwise:this._clockwise,rotation:u(this._rotation)}}});h.fromJSON=function(d){return new h(d)},s.exports=h}),33951:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(80021),c=e(19217),o=e(87841),u=e(26099),r=new a({Extends:m,initialize:function(d,l){m.call(this,"LineCurve"),Array.isArray(d)&&(l=new u(d[2],d[3]),d=new u(d[0],d[1])),this.p0=d,this.p1=l,this.arcLengthDivisions=1},getBounds:function(h){return h===void 0&&(h=new o),c([this.p0,this.p1],h)},getStartPoint:function(h){return h===void 0&&(h=new u),h.copy(this.p0)},getResolution:function(h){return h===void 0&&(h=1),h},getPoint:function(h,d){return d===void 0&&(d=new u),h===1?d.copy(this.p1):(d.copy(this.p1).subtract(this.p0).scale(h).add(this.p0),d)},getPointAt:function(h,d){return this.getPoint(h,d)},getTangent:function(h,d){return d===void 0&&(d=new u),d.copy(this.p1).subtract(this.p0).normalize(),d},getUtoTmapping:function(h,d,l){var p;if(d){var g=this.getLengths(l),x=g[g.length-1],y=Math.min(d,x);p=y/x}else p=h;return p},draw:function(h){return h.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),h},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(h){var d=h.points,l=new u(d[0],d[1]),p=new u(d[2],d[3]);return new r(l,p)},s.exports=r}),14744:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(80021),c=e(32112),o=e(26099),u=new a({Extends:m,initialize:function(h,d,l){m.call(this,"QuadraticBezierCurve"),Array.isArray(h)&&(l=new o(h[4],h[5]),d=new o(h[2],h[3]),h=new o(h[0],h[1])),this.p0=h,this.p1=d,this.p2=l},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,h){h===void 0&&(h=new o);var d=this.p0,l=this.p1,p=this.p2;return h.set(c(r,d.x,l.x,p.x),c(r,d.y,l.y,p.y))},draw:function(r,h){h===void 0&&(h=32);var d=this.getPoints(h);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var l=1;l<d.length;l++)r.lineTo(d[l].x,d[l].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});u.fromJSON=function(r){var h=r.points,d=new o(h[0],h[1]),l=new o(h[2],h[3]),p=new o(h[4],h[5]);return new u(d,l,p)},s.exports=u}),42534:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87842),m=e(83419),c=e(80021),o=e(26099),u=new m({Extends:c,initialize:function(h){h===void 0&&(h=[]),c.call(this,"SplineCurve"),this.points=[],this.addPoints(h)},addPoints:function(r){for(var h=0;h<r.length;h++){var d=new o;typeof r[h]=="number"?(d.x=r[h],d.y=r[h+1],h++):Array.isArray(r[h])?(d.x=r[h][0],d.y=r[h][1]):(d.x=r[h].x,d.y=r[h].y),this.points.push(d)}return this},addPoint:function(r,h){var d=new o(r,h);return this.points.push(d),d},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,h){h===void 0&&(h=new o);var d=this.points,l=(d.length-1)*r,p=Math.floor(l),g=l-p,x=d[p===0?p:p-1],y=d[p],E=d[p>d.length-2?d.length-1:p+1],w=d[p>d.length-3?d.length-1:p+2];return h.set(a(g,x.x,y.x,E.x,w.x),a(g,x.y,y.y,E.y,w.y))},toJSON:function(){for(var r=[],h=0;h<this.points.length;h++)r.push(this.points[h].x),r.push(this.points[h].y);return{type:this.type,points:r}}});u.fromJSON=function(r){return new u(r.points)},s.exports=u}),25410:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Path:e(46669),MoveTo:e(68618),CubicBezier:e(46728),Curve:e(80021),Ellipse:e(73825),Line:e(33951),QuadraticBezier:e(14744),Spline:e(42534)}}),68618:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(26099),c=new a({initialize:function(u,r){this.active=!1,this.p0=new m(u,r)},getPoint:function(o,u){return u===void 0&&(u=new m),u.copy(this.p0)},getPointAt:function(o,u){return this.getPoint(o,u)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});s.exports=c}),46669:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(46728),c=e(73825),o=e(39429),u=e(33951),r=e(68618),h=e(14744),d=e(87841),l=e(42534),p=e(26099),g=e(36383),x=new a({initialize:function(E,w){E===void 0&&(E=0),w===void 0&&(w=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new p,this._tmpVec2A=new p,this._tmpVec2B=new p,typeof E=="object"?this.fromJSON(E):this.startPoint.set(E,w)},add:function(y){return this.curves.push(y),this},circleTo:function(y,E,w){return E===void 0&&(E=!1),this.ellipseTo(y,y,0,360,E,w)},closePath:function(){var y=this.curves[0].getPoint(0),E=this.curves[this.curves.length-1].getPoint(1);return y.equals(E)||this.curves.push(new u(E,y)),this},cubicBezierTo:function(y,E,w,C,A,M){var R=this.getEndPoint(),P,b,F;return y instanceof p?(P=y,b=E,F=w):(P=new p(w,C),b=new p(A,M),F=new p(y,E)),this.add(new m(R,P,b,F))},quadraticBezierTo:function(y,E,w,C){var A=this.getEndPoint(),M,R;return y instanceof p?(M=y,R=E):(M=new p(w,C),R=new p(y,E)),this.add(new h(A,M,R))},draw:function(y,E){for(var w=0;w<this.curves.length;w++){var C=this.curves[w];C.active&&C.draw(y,E)}return y},ellipseTo:function(y,E,w,C,A,M){var R=new c(0,0,y,E,w,C,A,M),P=this.getEndPoint(this._tmpVec2A),b=R.getStartPoint(this._tmpVec2B);return P.subtract(b),R.x=P.x,R.y=P.y,this.add(R)},fromJSON:function(y){this.curves=[],this.cacheLengths=[],this.startPoint.set(y.x,y.y),this.autoClose=y.autoClose;for(var E=0;E<y.curves.length;E++){var w=y.curves[E];switch(w.type){case"LineCurve":this.add(u.fromJSON(w));break;case"EllipseCurve":this.add(c.fromJSON(w));break;case"SplineCurve":this.add(l.fromJSON(w));break;case"CubicBezierCurve":this.add(m.fromJSON(w));break;case"QuadraticBezierCurve":this.add(h.fromJSON(w));break}}return this},getBounds:function(y,E){y===void 0&&(y=new d),E===void 0&&(E=16),y.x=Number.MAX_VALUE,y.y=Number.MAX_VALUE;for(var w=new d,C=g.MIN_SAFE_INTEGER,A=g.MIN_SAFE_INTEGER,M=0;M<this.curves.length;M++){var R=this.curves[M];R.active&&(R.getBounds(w,E),y.x=Math.min(y.x,w.x),y.y=Math.min(y.y,w.y),C=Math.max(C,w.right),A=Math.max(A,w.bottom))}return y.right=C,y.bottom=A,y},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var y=[],E=0,w=0;w<this.curves.length;w++)E+=this.curves[w].getLength(),y.push(E);return this.cacheLengths=y,y},getCurveAt:function(y){for(var E=y*this.getLength(),w=this.getCurveLengths(),C=0;C<w.length;){if(w[C]>=E)return this.curves[C];C++}return null},getEndPoint:function(y){return y===void 0&&(y=new p),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,y):y.copy(this.startPoint),y},getLength:function(){var y=this.getCurveLengths();return y[y.length-1]},getPoint:function(y,E){E===void 0&&(E=new p);for(var w=y*this.getLength(),C=this.getCurveLengths(),A=0;A<C.length;){if(C[A]>=w){var M=C[A]-w,R=this.curves[A],P=R.getLength(),b=P===0?0:1-M/P;return R.getPointAt(b,E)}A++}return null},getPoints:function(y,E){!y&&!E&&(y=this.defaultDivisions);for(var w=[],C,A=0;A<this.curves.length;A++){var M=this.curves[A];if(M.active)for(var R=M.getResolution(y),P=M.getPoints(R,E),b=0;b<P.length;b++){var F=P[b];C&&C.equals(F)||(w.push(F),C=F)}}return this.autoClose&&w.length>1&&!w[w.length-1].equals(w[0])&&w.push(w[0]),w},getRandomPoint:function(y){return y===void 0&&(y=new p),this.getPoint(Math.random(),y)},getSpacedPoints:function(y){y===void 0&&(y=40);for(var E=[],w=0;w<=y;w++)E.push(this.getPoint(w/y));return this.autoClose&&E.push(E[0]),E},getStartPoint:function(y){return y===void 0&&(y=new p),y.copy(this.startPoint)},getTangent:function(y,E){E===void 0&&(E=new p);for(var w=y*this.getLength(),C=this.getCurveLengths(),A=0;A<C.length;){if(C[A]>=w){var M=C[A]-w,R=this.curves[A],P=R.getLength(),b=P===0?0:1-M/P;return R.getTangentAt(b,E)}A++}return null},lineTo:function(y,E){y instanceof p?this._tmpVec2B.copy(y):typeof y=="object"?this._tmpVec2B.setFromObject(y):this._tmpVec2B.set(y,E);var w=this.getEndPoint(this._tmpVec2A);return this.add(new u([w.x,w.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(y){return y.unshift(this.getEndPoint()),this.add(new l(y))},moveTo:function(y,E){return y instanceof p?this.add(new r(y.x,y.y)):this.add(new r(y,E))},toJSON:function(){for(var y=[],E=0;E<this.curves.length;E++)y.push(this.curves[E].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:y}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(y,E){return new x(y,E)}),s.exports=x}),45893:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(24882),c=new a({initialize:function(u,r){this.parent=u,this.events=r,r||(this.events=u.events?u.events:u),this.list={},this.values={},this._frozen=!1,!u.hasOwnProperty("sys")&&this.events&&this.events.once(m.DESTROY,this.destroy,this)},get:function(o){var u=this.list;if(Array.isArray(o)){for(var r=[],h=0;h<o.length;h++)r.push(u[o[h]]);return r}else return u[o]},getAll:function(){var o={};for(var u in this.list)this.list.hasOwnProperty(u)&&(o[u]=this.list[u]);return o},query:function(o){var u={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(o)&&(u[r]=this.list[r]);return u},set:function(o,u){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,u);for(var r in o)this.setValue(r,o[r]);return this},inc:function(o,u){if(this._frozen)return this;u===void 0&&(u=1);var r=this.get(o);return r===void 0&&(r=0),this.set(o,r+u),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,u){if(this._frozen)return this;if(this.has(o))this.values[o]=u;else{var r=this,h=this.list,d=this.events,l=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return h[o]},set:function(p){if(!r._frozen){var g=h[o];h[o]=p,d.emit(m.CHANGE_DATA,l,o,p,g),d.emit(m.CHANGE_DATA_KEY+o,l,p,g)}}}),h[o]=u,d.emit(m.SET_DATA,l,o,u)}return this},each:function(o,u){for(var r=[this.parent,null,void 0],h=1;h<arguments.length;h++)r.push(arguments[h]);for(var d in this.list)r[1]=d,r[2]=this.list[d],o.apply(u,r);return this},merge:function(o,u){u===void 0&&(u=!0);for(var r in o)o.hasOwnProperty(r)&&(u||!u&&!this.has(r))&&this.setValue(r,o[r]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var u=0;u<o.length;u++)this.removeValue(o[u]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var u=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(m.REMOVE_DATA,this.parent,o,u)}return this},pop:function(o){var u=void 0;return!this._frozen&&this.has(o)&&(u=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(m.REMOVE_DATA,this.parent,o,u)),u},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(m.CHANGE_DATA),this.events.off(m.SET_DATA),this.events.off(m.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var u in this.list)this.list[u]!==void 0&&o++;return o}}});s.exports=c}),63646:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(45893),c=e(37277),o=e(44594),u=new a({Extends:m,initialize:function(h){m.call(this,h,h.sys.events),this.scene=h,this.systems=h.sys,h.sys.events.once(o.BOOT,this.boot,this),h.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){m.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});c.register("DataManagerPlugin",u,"data"),s.exports=u}),10700:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="changedata"}),93608:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="changedata-"}),60883:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),69780:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removedata"}),22166:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="setdata"}),24882:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CHANGE_DATA:e(10700),CHANGE_DATA_KEY:e(93608),DESTROY:e(60883),REMOVE_DATA:e(69780),SET_DATA:e(22166)}}),44965:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={DataManager:e(45893),DataManagerPlugin:e(63646),Events:e(24882)}}),7098:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84148),m={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function c(){if(typeof importScripts=="function")return m;m.audioData=!!window.Audio,m.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),u=!!o.canPlayType;try{if(u){var r=function(l,p){var g=o.canPlayType("audio/"+l).replace(/^no$/,"");return p?!!(g||o.canPlayType("audio/"+p).replace(/^no$/,"")):!!g};if(m.ogg=r('ogg; codecs="vorbis"'),m.opus=r('ogg; codecs="opus"',"opus"),m.mp3=r("mpeg"),m.wav=r("wav"),m.m4a=r("x-m4a"),m.aac=r("aac"),m.flac=r("flac","x-flac"),m.webm=r('webm; codecs="vorbis"'),o.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(a.edge)m.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var h=parseInt(RegExp.$1,10),d=parseInt(RegExp.$2,10);(h===10&&d>=11||h>10)&&(m.dolby=!0)}}}}catch{}return m}s.exports=c()}),84148:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),m={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function c(){var o=navigator.userAgent;return/Edg\/\d+/.test(o)?(m.edge=!0,m.es2019=!0):/OPR/.test(o)?(m.opera=!0,m.es2019=!0):/Chrome\/(\d+)/.test(o)&&!a.windowsPhone?(m.chrome=!0,m.chromeVersion=parseInt(RegExp.$1,10),m.es2019=m.chromeVersion>69):/Firefox\D+(\d+)/.test(o)?(m.firefox=!0,m.firefoxVersion=parseInt(RegExp.$1,10),m.es2019=m.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(o)&&a.iOS?(m.mobileSafari=!0,m.es2019=!0):/MSIE (\d+\.\d+);/.test(o)?(m.ie=!0,m.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(o)&&!a.windowsPhone?(m.safari=!0,m.safariVersion=parseInt(RegExp.$1,10),m.es2019=m.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(m.ie=!0,m.trident=!0,m.tridentVersion=parseInt(RegExp.$1,10),m.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(m.silk=!0),m}s.exports=c()}),89289:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),m={supportInverseAlpha:!1,supportNewBlendModes:!1};function c(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",h="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",d=new Image;return d.onload=function(){var l=new Image;l.onload=function(){var p=a.create2D(l,6),g=p.getContext("2d",{willReadFrequently:!0});if(g.globalCompositeOperation="multiply",g.drawImage(d,0,0),g.drawImage(l,2,0),!g.getImageData(2,0,1,1))return!1;var x=g.getImageData(2,0,1,1).data;a.remove(l),m.supportNewBlendModes=x[0]===255&&x[1]===0&&x[2]===0},l.src=r+"/wCKxvRF"+h},d.src=r+"AP804Oa6"+h,!1}function o(){var r=a.create2D(this,2),h=r.getContext("2d",{willReadFrequently:!0});h.fillStyle="rgba(10, 20, 30, 0.5)",h.fillRect(0,0,1,1);var d=h.getImageData(0,0,1,1);if(d===null)return!1;h.putImageData(d,1,0);var l=h.getImageData(1,0,1,1),p=l.data[0]===d.data[0]&&l.data[1]===d.data[1]&&l.data[2]===d.data[2]&&l.data[3]===d.data[3];return a.remove(this),p}function u(){return typeof importScripts!="function"&&document!==void 0&&(m.supportNewBlendModes=c(),m.supportInverseAlpha=o()),m}s.exports=u()}),89357:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),m=e(84148),c=e(27919),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function u(){var h=new ArrayBuffer(4),d=new Uint8Array(h),l=new Uint32Array(h);return d[0]=161,d[1]=178,d[2]=195,d[3]=212,l[0]===3569595041?!0:l[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch{o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var h=!1,d=function(){if(window.WebGLRenderingContext)try{var l=c.createWebGL(this),p=l.getContext("webgl")||l.getContext("experimental-webgl"),g=c.create2D(this),x=g.getContext("2d",{willReadFrequently:!0}),y=x.createImageData(1,1);return h=y.data instanceof Uint8ClampedArray,c.remove(l),c.remove(g),!!p}catch{return!1}return!1};return o.webGL=d(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,m.firefox&&m.firefoxVersion<21&&(o.getUserMedia=!1),!a.iOS&&(m.ie||m.firefox||m.chrome)&&(o.canvasBitBltShift=!0),(m.safari||m.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(o.littleEndian=u()),o.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&o.littleEndian!==null&&h,o}s.exports=r()}),91639:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return T;var a,m="Fullscreen",c="FullScreen",o=["request"+m,"request"+c,"webkitRequest"+m,"webkitRequest"+c,"msRequest"+m,"msRequest"+c,"mozRequest"+c,"mozRequest"+m];for(a=0;a<o.length;a++)if(document.documentElement[o[a]]){T.available=!0,T.request=o[a];break}var u=["cancel"+c,"exit"+m,"webkitCancel"+c,"webkitExit"+m,"msCancel"+c,"msExit"+m,"mozCancel"+c,"mozExit"+m];if(T.available){for(a=0;a<u.length;a++)if(document[u[a]]){T.cancel=u[a];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(T.keyboard=!0),Object.defineProperty(T,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),T}s.exports=e()}),31784:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84148),m={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function c(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(m.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(m.mspointer=!0),navigator.getGamepads&&(m.gamepads=!0),"onwheel"in window||a.ie&&"WheelEvent"in window?m.wheelEvent="wheel":"onmousewheel"in window?m.wheelEvent="mousewheel":a.firefox&&"MouseScrollEvent"in window&&(m.wheelEvent="DOMMouseScroll")),m}s.exports=c()}),25892:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return T;var a=navigator.userAgent;/Windows/.test(a)?T.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(T.iOS=!0,T.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),T.iOSVersion=parseInt(RegExp.$1,10)):T.macOS=!0:/Android/.test(a)?T.android=!0:/Linux/.test(a)?T.linux=!0:/iP[ao]d|iPhone/i.test(a)?(T.iOS=!0,navigator.appVersion.match(/OS (\d+)/),T.iOSVersion=parseInt(RegExp.$1,10),T.iPhone=a.toLowerCase().indexOf("iphone")!==-1,T.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?T.kindle=!0:/CrOS/.test(a)&&(T.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(T.android=!1,T.iOS=!1,T.macOS=!1,T.windows=!0,T.windowsPhone=!0);var m=/Silk/.test(a);return(T.windows||T.macOS||T.linux&&!m||T.chromeOS)&&(T.desktop=!0),(T.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(T.desktop=!1),navigator.standalone&&(T.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(T.cordova=!0),window.ejecta!==void 0&&(T.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(T.node=!0),T.node&&typeof process.versions=="object"&&(T.nodeWebkit=!!process.versions["node-webkit"],T.electron=!!process.versions.electron),/Crosswalk/.test(a)&&(T.crosswalk=!0),T.pixelRatio=window.devicePixelRatio||1,T}s.exports=e()}),43267:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),m={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function c(){if(typeof importScripts=="function")return m;var o=document.createElement("video"),u=!!o.canPlayType,r=/^no$/;try{u&&(o.canPlayType('video/ogg; codecs="theora"').replace(r,"")&&(m.ogg=!0),o.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(r,"")&&(m.h264=!0,m.mp4=!0),o.canPlayType("video/x-m4v").replace(r,"")&&(m.m4v=!0),o.canPlayType('video/webm; codecs="vp8, vorbis"').replace(r,"")&&(m.webm=!0),o.canPlayType('video/webm; codecs="vp9"').replace(r,"")&&(m.vp9=!0),o.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(r,"")&&(m.hls=!0))}catch{}return o.parentNode&&o.parentNode.removeChild(o),m.getVideoURL=function(h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var l=a(h[d],"url",h[d]);if(l.indexOf("blob:")===0)return{url:l,type:""};var p;if(l.indexOf("data:")===0?p=l.split(",")[0].match(/\/(.*?);/):p=l.match(/\.([a-zA-Z0-9]+)($|\?)/),p=a(h[d],"type",p?p[1]:"").toLowerCase(),m[p])return{url:l,type:p}}return null},m}s.exports=c()}),82264:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={os:e(25892),browser:e(84148),features:e(89357),input:e(31784),audio:e(7098),video:e(43267),fullscreen:e(91639),canvasFeatures:e(89289)}}),89422:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new Float32Array(20),c=new a({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(o){return this._matrix.set(o),this._dirty=!0,this},reset:function(){var o=this._matrix;return o.fill(0),o[0]=1,o[6]=1,o[12]=1,o[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var o=this._data;return this._dirty&&(o.set(this._matrix),o[4]/=255,o[9]/=255,o[14]/=255,o[19]/=255,this._dirty=!1),o},brightness:function(o,u){o===void 0&&(o=0),u===void 0&&(u=!1);var r=o;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],u)},saturate:function(o,u){o===void 0&&(o=0),u===void 0&&(u=!1);var r=o*2/3+1,h=(r-1)*-.5;return this.multiply([r,h,h,0,0,h,r,h,0,0,h,h,r,0,0,0,0,0,1,0],u)},desaturate:function(o){return o===void 0&&(o=!1),this.saturate(-1,o)},hue:function(o,u){o===void 0&&(o=0),u===void 0&&(u=!1),o=o/180*Math.PI;var r=Math.cos(o),h=Math.sin(o),d=.213,l=.715,p=.072;return this.multiply([d+r*(1-d)+h*-d,l+r*-l+h*-l,p+r*-p+h*(1-p),0,0,d+r*-d+h*.143,l+r*(1-l)+h*.14,p+r*-p+h*-.283,0,0,d+r*-d+h*-.787,l+r*-l+h*l,p+r*(1-p)+h*p,0,0,0,0,0,1,0],u)},grayscale:function(o,u){return o===void 0&&(o=1),u===void 0&&(u=!1),this.saturate(-o,u)},blackWhite:function(o){return o===void 0&&(o=!1),this.multiply(c.BLACK_WHITE,o)},contrast:function(o,u){o===void 0&&(o=0),u===void 0&&(u=!1);var r=o+1,h=-.5*(r-1);return this.multiply([r,0,0,0,h,0,r,0,0,h,0,0,r,0,h,0,0,0,1,0],u)},negative:function(o){return o===void 0&&(o=!1),this.multiply(c.NEGATIVE,o)},desaturateLuminance:function(o){return o===void 0&&(o=!1),this.multiply(c.DESATURATE_LUMINANCE,o)},sepia:function(o){return o===void 0&&(o=!1),this.multiply(c.SEPIA,o)},night:function(o,u){return o===void 0&&(o=.1),u===void 0&&(u=!1),this.multiply([o*-2,-o,0,0,0,-o,0,o,0,0,0,o,o*2,0,0,0,0,0,1,0],u)},lsd:function(o){return o===void 0&&(o=!1),this.multiply(c.LSD,o)},brown:function(o){return o===void 0&&(o=!1),this.multiply(c.BROWN,o)},vintagePinhole:function(o){return o===void 0&&(o=!1),this.multiply(c.VINTAGE,o)},kodachrome:function(o){return o===void 0&&(o=!1),this.multiply(c.KODACHROME,o)},technicolor:function(o){return o===void 0&&(o=!1),this.multiply(c.TECHNICOLOR,o)},polaroid:function(o){return o===void 0&&(o=!1),this.multiply(c.POLAROID,o)},shiftToBGR:function(o){return o===void 0&&(o=!1),this.multiply(c.SHIFT_BGR,o)},multiply:function(o,u){u===void 0&&(u=!1),u||this.reset();var r=this._matrix,h=m;return h.set(r),r.set([h[0]*o[0]+h[1]*o[5]+h[2]*o[10]+h[3]*o[15],h[0]*o[1]+h[1]*o[6]+h[2]*o[11]+h[3]*o[16],h[0]*o[2]+h[1]*o[7]+h[2]*o[12]+h[3]*o[17],h[0]*o[3]+h[1]*o[8]+h[2]*o[13]+h[3]*o[18],h[0]*o[4]+h[1]*o[9]+h[2]*o[14]+h[3]*o[19]+h[4],h[5]*o[0]+h[6]*o[5]+h[7]*o[10]+h[8]*o[15],h[5]*o[1]+h[6]*o[6]+h[7]*o[11]+h[8]*o[16],h[5]*o[2]+h[6]*o[7]+h[7]*o[12]+h[8]*o[17],h[5]*o[3]+h[6]*o[8]+h[7]*o[13]+h[8]*o[18],h[5]*o[4]+h[6]*o[9]+h[7]*o[14]+h[8]*o[19]+h[9],h[10]*o[0]+h[11]*o[5]+h[12]*o[10]+h[13]*o[15],h[10]*o[1]+h[11]*o[6]+h[12]*o[11]+h[13]*o[16],h[10]*o[2]+h[11]*o[7]+h[12]*o[12]+h[13]*o[17],h[10]*o[3]+h[11]*o[8]+h[12]*o[13]+h[13]*o[18],h[10]*o[4]+h[11]*o[9]+h[12]*o[14]+h[13]*o[19]+h[14],h[15]*o[0]+h[16]*o[5]+h[17]*o[10]+h[18]*o[15],h[15]*o[1]+h[16]*o[6]+h[17]*o[11]+h[18]*o[16],h[15]*o[2]+h[16]*o[7]+h[17]*o[12]+h[18]*o[17],h[15]*o[3]+h[16]*o[8]+h[17]*o[13]+h[18]*o[18],h[15]*o[4]+h[16]*o[9]+h[17]*o[14]+h[18]*o[19]+h[19]]),this._dirty=!0,this}});c.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],c.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],c.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],c.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],c.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],c.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],c.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],c.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],c.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],c.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],c.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],s.exports=c}),51767:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(29747),c=new a({initialize:function(u,r,h){this._rgb=[0,0,0],this.onChangeCallback=m,this.dirty=!1,this.set(u,r,h)},set:function(o,u,r){return o===void 0&&(o=0),u===void 0&&(u=0),r===void 0&&(r=0),this._rgb=[o,u,r],this.onChange(),this},equals:function(o,u,r){var h=this._rgb;return h[0]===o&&h[1]===u&&h[2]===r},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});s.exports=c}),60461:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};s.exports=T}),54312:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),m=e(35893),c=e(86327),o=e(88417),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,m(h)+d),c(r,a(h)+l),r};s.exports=u}),46768:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),m=e(26541),c=e(86327),o=e(385),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,m(h)-d),c(r,a(h)+l),r};s.exports=u}),35827:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),m=e(54380),c=e(86327),o=e(40136),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,m(h)+d),c(r,a(h)+l),r};s.exports=u}),46871:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66786),m=e(35893),c=e(7702),o=function(u,r,h,d){return h===void 0&&(h=0),d===void 0&&(d=0),a(u,m(r)+h,c(r)+d),u};s.exports=o}),5198:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),m=e(26541),c=e(20786),o=e(385),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,m(h)-d),c(r,a(h)+l),r};s.exports=u}),11879:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),m=[];m[a.BOTTOM_CENTER]=e(54312),m[a.BOTTOM_LEFT]=e(46768),m[a.BOTTOM_RIGHT]=e(35827),m[a.CENTER]=e(46871),m[a.LEFT_CENTER]=e(5198),m[a.RIGHT_CENTER]=e(80503),m[a.TOP_CENTER]=e(89698),m[a.TOP_LEFT]=e(922),m[a.TOP_RIGHT]=e(21373),m[a.LEFT_BOTTOM]=m[a.BOTTOM_LEFT],m[a.LEFT_TOP]=m[a.TOP_LEFT],m[a.RIGHT_BOTTOM]=m[a.BOTTOM_RIGHT],m[a.RIGHT_TOP]=m[a.TOP_RIGHT];var c=function(o,u,r,h,d){return m[r](o,u,h,d)};s.exports=c}),80503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),m=e(54380),c=e(20786),o=e(40136),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,m(h)+d),c(r,a(h)+l),r};s.exports=u}),89698:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35893),m=e(17717),c=e(88417),o=e(66737),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),c(r,a(h)+d),o(r,m(h)-l),r};s.exports=u}),922:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),m=e(17717),c=e(385),o=e(66737),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),c(r,a(h)-d),o(r,m(h)-l),r};s.exports=u}),21373:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),m=e(17717),c=e(40136),o=e(66737),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),c(r,a(h)+d),o(r,m(h)-l),r};s.exports=u}),91660:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BottomCenter:e(54312),BottomLeft:e(46768),BottomRight:e(35827),Center:e(46871),LeftCenter:e(5198),QuickSet:e(11879),RightCenter:e(80503),TopCenter:e(89698),TopLeft:e(922),TopRight:e(21373)}}),71926:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),m=e(79291),c={In:e(91660),To:e(16694)};c=m(!1,c,a),s.exports=c}),21578:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),m=e(35893),c=e(88417),o=e(66737),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),c(r,m(h)+d),o(r,a(h)+l),r};s.exports=u}),10210:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),m=e(26541),c=e(385),o=e(66737),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),c(r,m(h)-d),o(r,a(h)+l),r};s.exports=u}),82341:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),m=e(54380),c=e(40136),o=e(66737),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),c(r,m(h)+d),o(r,a(h)+l),r};s.exports=u}),87958:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),m=e(26541),c=e(86327),o=e(40136),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,m(h)-d),c(r,a(h)+l),r};s.exports=u}),40080:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),m=e(26541),c=e(20786),o=e(40136),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,m(h)-d),c(r,a(h)+l),r};s.exports=u}),88466:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),m=e(17717),c=e(40136),o=e(66737),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),c(r,a(h)-d),o(r,m(h)-l),r};s.exports=u}),38829:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),m=[];m[a.BOTTOM_CENTER]=e(21578),m[a.BOTTOM_LEFT]=e(10210),m[a.BOTTOM_RIGHT]=e(82341),m[a.LEFT_BOTTOM]=e(87958),m[a.LEFT_CENTER]=e(40080),m[a.LEFT_TOP]=e(88466),m[a.RIGHT_BOTTOM]=e(19211),m[a.RIGHT_CENTER]=e(34609),m[a.RIGHT_TOP]=e(48741),m[a.TOP_CENTER]=e(49440),m[a.TOP_LEFT]=e(81288),m[a.TOP_RIGHT]=e(61323);var c=function(o,u,r,h,d){return m[r](o,u,h,d)};s.exports=c}),19211:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),m=e(54380),c=e(86327),o=e(385),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,m(h)+d),c(r,a(h)+l),r};s.exports=u}),34609:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7702),m=e(54380),c=e(20786),o=e(385),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,m(h)+d),c(r,a(h)+l),r};s.exports=u}),48741:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),m=e(17717),c=e(385),o=e(66737),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),c(r,a(h)+d),o(r,m(h)-l),r};s.exports=u}),49440:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35893),m=e(17717),c=e(86327),o=e(88417),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,a(h)+d),c(r,m(h)-l),r};s.exports=u}),81288:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26541),m=e(17717),c=e(86327),o=e(385),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,a(h)-d),c(r,m(h)-l),r};s.exports=u}),61323:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54380),m=e(17717),c=e(86327),o=e(40136),u=function(r,h,d,l){return d===void 0&&(d=0),l===void 0&&(l=0),o(r,a(h)+d),c(r,m(h)-l),r};s.exports=u}),16694:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BottomCenter:e(21578),BottomLeft:e(10210),BottomRight:e(82341),LeftBottom:e(87958),LeftCenter:e(40080),LeftTop:e(88466),QuickSet:e(38829),RightBottom:e(19211),RightCenter:e(34609),RightTop:e(48741),TopCenter:e(49440),TopLeft:e(81288),TopRight:e(61323)}}),66786:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88417),m=e(20786),c=function(o,u,r){return a(o,u),m(o,r)};s.exports=c}),62235:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y+e.height-e.height*e.originY};s.exports=T}),72873:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62235),m=e(26541),c=e(54380),o=e(17717),u=e(87841),r=function(h,d){d===void 0&&(d=new u);var l=m(h),p=o(h);return d.x=l,d.y=p,d.width=c(h)-l,d.height=a(h)-p,d};s.exports=r}),35893:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX+e.width*.5};s.exports=T}),7702:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY+e.height*.5};s.exports=T}),26541:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX};s.exports=T}),87431:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.originX};s.exports=T}),46928:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height*e.originY};s.exports=T}),54380:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x+e.width-e.width*e.originX};s.exports=T}),17717:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY};s.exports=T}),86327:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.y=a-e.height+e.height*e.originY,e};s.exports=T}),88417:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.width*e.originX;return e.x=a+m-e.width*.5,e};s.exports=T}),20786:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.height*e.originY;return e.y=a+m-e.height*.5,e};s.exports=T}),385:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x=a+e.width*e.originX,e};s.exports=T}),40136:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x=a-e.width+e.width*e.originX,e};s.exports=T}),66737:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.y=a+e.height*e.originY,e};s.exports=T}),58724:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CenterOn:e(66786),GetBottom:e(62235),GetBounds:e(72873),GetCenterX:e(35893),GetCenterY:e(7702),GetLeft:e(26541),GetOffsetX:e(87431),GetOffsetY:e(46928),GetRight:e(54380),GetTop:e(17717),SetBottom:e(86327),SetCenterX:e(88417),SetCenterY:e(20786),SetLeft:e(385),SetRight:e(40136),SetTop:e(66737)}}),20623:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCrisp:function(e){var a=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return a.forEach(function(m){e.style["image-rendering"]=m}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};s.exports=T}),27919:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8054),m=e(68703),c=[],o=!1,u=function(){var r=function(w,C,A,M,R){C===void 0&&(C=1),A===void 0&&(A=1),M===void 0&&(M=a.CANVAS),R===void 0&&(R=!1);var P,b=l(M);return b===null?(b={parent:w,canvas:document.createElement("canvas"),type:M},M===a.CANVAS&&c.push(b),P=b.canvas):(b.parent=w,P=b.canvas),R&&(b.parent=P),P.width=C,P.height=A,o&&M===a.CANVAS&&m.disable(P.getContext("2d",{willReadFrequently:!1})),P},h=function(w,C,A){return r(w,C,A,a.CANVAS)},d=function(w,C,A){return r(w,C,A,a.WEBGL)},l=function(w){if(w===void 0&&(w=a.CANVAS),w===a.WEBGL)return null;for(var C=0;C<c.length;C++){var A=c[C];if(!A.parent&&A.type===w)return A}return null},p=function(w){var C=w instanceof HTMLCanvasElement;c.forEach(function(A){(C&&A.canvas===w||!C&&A.parent===w)&&(A.parent=null,A.canvas.width=1,A.canvas.height=1)})},g=function(){var w=0;return c.forEach(function(C){C.parent&&w++}),w},x=function(){return c.length-g()},y=function(){o=!0},E=function(){o=!1};return{create2D:h,create:r,createWebGL:d,disableSmoothing:y,enableSmoothing:E,first:l,free:x,pool:c,remove:p,total:g}};s.exports=u()}),68703:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="",e=function(){var a=function(u){for(var r=["i","webkitI","msI","mozI","oI"],h=0;h<r.length;h++){var d=r[h]+"mageSmoothingEnabled";if(d in u)return d}return null},m=function(u){return T===""&&(T=a(u)),T&&(u[T]=!0),u},c=function(u){return T===""&&(T=a(u)),T&&(u[T]=!1),u},o=function(u){return T!==null?u[T]:null};return{disable:c,enable:m,getPrefix:a,isEnabled:o}};s.exports=e()}),65208:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a="none"),e.style.msTouchAction=a,e.style["ms-touch-action"]=a,e.style["touch-action"]=a,e};s.exports=T}),91610:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a="none");var m=["-webkit-","-khtml-","-moz-","-ms-",""];return m.forEach(function(c){e.style[c+"user-select"]=a}),e.style["-webkit-touch-callout"]=a,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};s.exports=T}),26253:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CanvasInterpolation:e(20623),CanvasPool:e(27919),Smoothing:e(68703),TouchAction:e(65208),UserSelect:e(91610)}}),40987:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(37589),c=e(1e3),o=e(7537),u=e(87837),r=new a({initialize:function(d,l,p,g){d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(d,l,p,g)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(h,d,l,p,g){return p===void 0&&(p=255),g===void 0&&(g=!0),this._locked=!0,this.red=h,this.green=d,this.blue=l,this.alpha=p,this._locked=!1,this.update(g)},setGLTo:function(h,d,l,p){return p===void 0&&(p=1),this._locked=!0,this.redGL=h,this.greenGL=d,this.blueGL=l,this.alphaGL=p,this._locked=!1,this.update(!0)},setFromRGB:function(h){return this._locked=!0,this.red=h.r,this.green=h.g,this.blue=h.b,h.hasOwnProperty("a")&&(this.alpha=h.a),this._locked=!1,this.update(!0)},setFromHSV:function(h,d,l){return o(h,d,l,this)},update:function(h){if(h===void 0&&(h=!1),this._locked)return this;var d=this.r,l=this.g,p=this.b,g=this.a;return this._color=m(d,l,p),this._color32=c(d,l,p,g),this._rgba="rgba("+d+","+l+","+p+","+g/255+")",h&&u(d,l,p,this),this},updateHSV:function(){var h=this.r,d=this.g,l=this.b;return u(h,d,l,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(h){return this.setTo(h,h,h)},random:function(h,d){h===void 0&&(h=0),d===void 0&&(d=255);var l=Math.floor(h+Math.random()*(d-h)),p=Math.floor(h+Math.random()*(d-h)),g=Math.floor(h+Math.random()*(d-h));return this.setTo(l,p,g)},randomGray:function(h,d){h===void 0&&(h=0),d===void 0&&(d=255);var l=Math.floor(h+Math.random()*(d-h));return this.setTo(l,l,l)},saturate:function(h){return this.s+=h/100,this},desaturate:function(h){return this.s-=h/100,this},lighten:function(h){return this.v+=h/100,this},darken:function(h){return this.v-=h/100,this},brighten:function(h){var d=this.r,l=this.g,p=this.b;return d=Math.max(0,Math.min(255,d-Math.round(255*-(h/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(h/100)))),p=Math.max(0,Math.min(255,p-Math.round(255*-(h/100)))),this.setTo(d,l,p)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(h){this.gl[0]=Math.min(Math.abs(h),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(h){this.gl[1]=Math.min(Math.abs(h),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(h){this.gl[2]=Math.min(Math.abs(h),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(h){this.gl[3]=Math.min(Math.abs(h),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(h){h=Math.floor(Math.abs(h)),this.r=Math.min(h,255),this.gl[0]=h/255,this.update(!0)}},green:{get:function(){return this.g},set:function(h){h=Math.floor(Math.abs(h)),this.g=Math.min(h,255),this.gl[1]=h/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(h){h=Math.floor(Math.abs(h)),this.b=Math.min(h,255),this.gl[2]=h/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(h){h=Math.floor(Math.abs(h)),this.a=Math.min(h,255),this.gl[3]=h/255,this.update()}},h:{get:function(){return this._h},set:function(h){this._h=h,o(h,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(h){this._s=h,o(this._h,h,this._v,this)}},v:{get:function(){return this._v},set:function(h){this._v=h,o(this._h,this._s,h,this)}}});s.exports=r}),92728:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589),m=function(c){c===void 0&&(c=1024);var o=[],u=255,r,h=255,d=0,l=0;for(r=0;r<=u;r++)o.push({r:h,g:r,b:l,color:a(h,r,l)});for(d=255,r=u;r>=0;r--)o.push({r,g:d,b:l,color:a(r,d,l)});for(h=0,r=0;r<=u;r++,d--)o.push({r:h,g:d,b:r,color:a(h,d,r)});for(d=0,l=255,r=0;r<=u;r++,l--,h++)o.push({r:h,g:d,b:l,color:a(h,d,l)});if(c===1024)return o;var p=[],g=0,x=1024/c;for(r=0;r<c;r++)p.push(o[Math.floor(g)]),g+=x;return p};s.exports=m}),91588:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(a.a=e>>>24),a};s.exports=T}),62957:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=e.toString(16);return a.length===1?"0"+a:a};s.exports=T}),37589:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e<<16|a<<8|m};s.exports=T}),1e3:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){return c<<24|e<<16|a<<8|m};s.exports=T}),62183:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),m=e(89528),c=function(o,u,r){var h=r,d=r,l=r;if(u!==0){var p=r<.5?r*(1+u):r+u-r*u,g=2*r-p;h=m(g,p,o+1/3),d=m(g,p,o),l=m(g,p,o-1/3)}var x=new a;return x.setGLTo(h,d,l,1)};s.exports=c}),27939:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7537),m=function(c,o){c===void 0&&(c=1),o===void 0&&(o=1);for(var u=[],r=0;r<=359;r++)u.push(a(r/359,c,o));return u};s.exports=m}),7537:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589);function m(o,u,r,h){var d=(o+u*6)%6,l=Math.min(d,4-d,1);return Math.round(255*(h-h*r*Math.max(0,l)))}var c=function(o,u,r,h){u===void 0&&(u=1),r===void 0&&(r=1);var d=m(5,o,u,r),l=m(3,o,u,r),p=m(1,o,u,r);return h?h.setTo?h.setTo(d,l,p,h.alpha,!0):(h.r=d,h.g=l,h.b=p,h.color=a(d,l,p),h):{r:d,g:l,b:p,color:a(d,l,p)}};s.exports=c}),70238:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),m=function(c){var o=new a;c=c.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(l,p,g,x){return p+p+g+g+x+x});var u=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);if(u){var r=parseInt(u[1],16),h=parseInt(u[2],16),d=parseInt(u[3],16);o.setTo(r,h,d)}return o};s.exports=m}),89528:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return m<0&&(m+=1),m>1&&(m-=1),m<.16666666666666666?e+(a-e)*6*m:m<.5?a:m<.6666666666666666?e+(a-e)*(.6666666666666666-m)*6:e};s.exports=T}),30100:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),m=e(90664),c=function(o){var u=m(o);return new a(u.r,u.g,u.b,u.a)};s.exports=c}),90664:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};s.exports=T}),13699:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28915),m=e(37589),c=function(r,h,d,l,p,g,x,y){x===void 0&&(x=100),y===void 0&&(y=0);var E=y/x,w=a(r,l,E),C=a(h,p,E),A=a(d,g,E);return{r:w,g:C,b:A,a:255,color:m(w,C,A)}},o=function(r,h,d,l){return d===void 0&&(d=100),l===void 0&&(l=0),c(r.r,r.g,r.b,h.r,h.g,h.b,d,l)},u=function(r,h,d,l,p,g){return p===void 0&&(p=100),g===void 0&&(g=0),c(r.r,r.g,r.b,h,d,l,p,g)};s.exports={RGBWithRGB:c,ColorWithRGB:u,ColorWithColor:o}}),68957:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),m=function(c){return new a(c.r,c.g,c.b,c.a)};s.exports=m}),87388:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987),m=function(c){var o=new a,u=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(c.toLowerCase());if(u){var r=parseInt(u[1],10),h=parseInt(u[2],10),d=parseInt(u[3],10),l=u[4]!==void 0?parseFloat(u[4]):1;o.setTo(r,h,d,l*255)}return o};s.exports=m}),87837:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){c===void 0&&(c={h:0,s:0,v:0}),e/=255,a/=255,m/=255;var o=Math.min(e,a,m),u=Math.max(e,a,m),r=u-o,h=0,d=u===0?0:r/u,l=u;return u!==o&&(u===e?h=(a-m)/r+(a<m?6:0):u===a?h=(m-e)/r+2:u===m&&(h=(e-a)/r+4),h/=6),c.hasOwnProperty("_h")?(c._h=h,c._s=d,c._v=l):(c.h=h,c.s=d,c.v=l),c};s.exports=T}),75723:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62957),m=function(c,o,u,r,h){return r===void 0&&(r=255),h===void 0&&(h="#"),h==="#"?"#"+((1<<24)+(c<<16)+(o<<8)+u).toString(16).slice(1,7):"0x"+a(r)+a(c)+a(o)+a(u)};s.exports=m}),85386:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),m=e(40987),c=function(o,u){return o===void 0&&(o=0),u===void 0&&(u=255),new m(a(o,u),a(o,u),a(o,u))};s.exports=c}),80333:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70238),m=e(30100),c=e(68957),o=e(87388),u=function(r){var h=typeof r;switch(h){case"string":return r.substr(0,3).toLowerCase()==="rgb"?o(r):a(r);case"number":return m(r);case"object":return c(r)}};s.exports=u}),3956:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40987);a.ColorSpectrum=e(92728),a.ColorToRGBA=e(91588),a.ComponentToHex=e(62957),a.GetColor=e(37589),a.GetColor32=e(1e3),a.HexStringToColor=e(70238),a.HSLToColor=e(62183),a.HSVColorWheel=e(27939),a.HSVToRGB=e(7537),a.HueToComponent=e(89528),a.IntegerToColor=e(30100),a.IntegerToRGB=e(90664),a.Interpolate=e(13699),a.ObjectToColor=e(68957),a.RandomRGB=e(85386),a.RGBStringToColor=e(87388),a.RGBToHSV=e(87837),a.RGBToString=e(75723),a.ValueToColor=e(80333),s.exports=a}),27460:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Align:e(71926),BaseShader:e(73894),Bounds:e(58724),Canvas:e(26253),Color:e(3956),ColorMatrix:e(89422),Masks:e(69781),RGB:e(51767)}}),6858:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(39429),c=new a({initialize:function(u,r,h,d,l,p){r||(r=u.sys.make.image({x:h,y:d,key:l,frame:p,add:!1})),this.bitmapMask=r,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(o){this.bitmapMask=o},preRenderWebGL:function(o,u,r){o.pipelines.BITMAPMASK_PIPELINE.beginMask(this,u,r)},postRenderWebGL:function(o,u,r){o.pipelines.BITMAPMASK_PIPELINE.endMask(this,u,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});m.register("bitmapMask",function(o,u,r,h,d){return new c(this.scene,o,u,r,h,d)}),s.exports=c}),80661:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u){this.geometryMask=u,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(c){return this.geometryMask=c,this},setInvertAlpha:function(c){return c===void 0&&(c=!0),this.invertAlpha=c,this},preRenderWebGL:function(c,o,u){var r=c.gl;c.flush(),c.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),c.maskCount=0),c.currentCameraMask.mask!==this&&(c.currentMask.mask=this),c.maskStack.push({mask:this,camera:u}),this.applyStencil(c,u,!0),c.maskCount++},applyStencil:function(c,o,u){var r=c.gl,h=this.geometryMask,d=c.maskCount,l=255;r.colorMask(!1,!1,!1,!1),u?(r.stencilFunc(r.EQUAL,d,l),r.stencilOp(r.KEEP,r.KEEP,r.INCR),d++):(r.stencilFunc(r.EQUAL,d+1,l),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),this.level=d,h.renderWebGL(c,h,o),c.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.invertAlpha?r.stencilFunc(r.NOTEQUAL,d,l):r.stencilFunc(r.EQUAL,d,l)},postRenderWebGL:function(c){var o=c.gl;c.maskStack.pop(),c.maskCount--,c.flush();var u=c.currentMask;if(c.maskStack.length===0)u.mask=null,o.disable(o.STENCIL_TEST);else{var r=c.maskStack[c.maskStack.length-1];r.mask.applyStencil(c,r.camera,!1),c.currentCameraMask.mask!==r.mask?(u.mask=r.mask,u.camera=r.camera):u.mask=null}},preRenderCanvas:function(c,o,u){var r=this.geometryMask;c.currentContext.save(),r.renderCanvas(c,r,u,null,null,!0),c.currentContext.clip()},postRenderCanvas:function(c){c.currentContext.restore()},destroy:function(){this.geometryMask=null}});s.exports=m}),69781:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BitmapMask:e(6858),GeometryMask:e(80661)}}),73894:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r,h){(!u||u==="")&&(u=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),h===void 0&&(h=null),this.key=o,this.fragmentSrc=u,this.vertexSrc=r,this.uniforms=h}});s.exports=m}),40366:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m;if(a)typeof a=="string"?m=document.getElementById(a):typeof a=="object"&&a.nodeType===1&&(m=a);else if(e.parentElement||a===null)return e;return m||(m=document.body),m.appendChild(e),e};s.exports=T}),83719:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),m=function(c){var o=c.config;if(!(!o.parent||!o.domCreateContainer)){var u=document.createElement("div");u.style.cssText=["display: block;","width: "+c.scale.width+"px;","height: "+c.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),c.domContainer=u,a(u,o.parent)}};s.exports=m}),57264:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25892),m=function(c){if(document.readyState==="complete"||document.readyState==="interactive"){c();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),c()};document.body?a.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};s.exports=m}),57811:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e)return window.innerHeight;var a=Math.abs(window.orientation),m={w:0,h:0},c=document.createElement("div");return c.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(c),m.w=a===90?c.offsetHeight:window.innerWidth,m.h=a===90?window.innerWidth:c.offsetHeight,document.documentElement.removeChild(c),c=null,Math.abs(window.orientation)!==90?m.h:m.w};s.exports=T}),45818:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13560),m=function(c,o){var u=window.screen,r=u?u.orientation||u.mozOrientation||u.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return a.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return a.ORIENTATION.LANDSCAPE}else return o>c?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE};s.exports=m}),74403:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a;return e!==""&&(typeof e=="string"?a=document.getElementById(e):e&&e.nodeType===1&&(a=e)),a||(a=document.body),a};s.exports=T}),56836:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a="";try{if(window.DOMParser){var m=new DOMParser;a=m.parseFromString(e,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.loadXML(e)}catch{a=null}return!a||!a.documentElement||a.getElementsByTagName("parsererror").length?null:a};s.exports=T}),35846:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){e.parentNode&&e.parentNode.removeChild(e)};s.exports=T}),43092:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(29747),c=new a({initialize:function(){this.isRunning=!1,this.callback=m,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var u=this;this.step=function r(h){u.callback(h),u.isRunning&&(u.timeOutID=window.requestAnimationFrame(r))},this.stepTimeout=function r(){u.isRunning&&(u.timeOutID=window.setTimeout(r,u.delay)),u.callback(window.performance.now())}},start:function(o,u,r){this.isRunning||(this.callback=o,this.isSetTimeOut=u,this.delay=r,this.isRunning=!0,this.timeOutID=u?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=m}});s.exports=c}),84902:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={AddToDOM:e(40366),DOMContentLoaded:e(57264),GetInnerHeight:e(57811),GetScreenOrientation:e(45818),GetTarget:e(74403),ParseXML:e(56836),RemoveFromDOM:e(35846),RequestAnimationFrame:e(43092)};s.exports=a}),47565:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50792),c=e(37277),o=new a({Extends:m,initialize:function(){m.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});c.register("EventEmitter",o,"events"),s.exports=o}),93055:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={EventEmitter:e(47565)}}),20122:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h){h===void 0&&(h=1),m.call(this,c.BARREL,r),this.amount=h}});s.exports=o}),32251:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p,g,x){d===void 0&&(d=1),l===void 0&&(l=1),p===void 0&&(p=1),g===void 0&&(g=1),x===void 0&&(x=4),m.call(this,c.BLOOM,r),this.steps=x,this.offsetX=d,this.offsetY=l,this.blurStrength=p,this.strength=g,this.glcolor=[1,1,1],h!=null&&(this.color=h)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}}});s.exports=o}),9047:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p,g,x){h===void 0&&(h=0),d===void 0&&(d=2),l===void 0&&(l=2),p===void 0&&(p=1),x===void 0&&(x=4),m.call(this,c.BLUR,r),this.quality=h,this.x=d,this.y=l,this.steps=x,this.strength=p,this.glcolor=[1,1,1],g!=null&&(this.color=g)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}}});s.exports=o}),27885:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p,g,x,y){h===void 0&&(h=.5),d===void 0&&(d=1),l===void 0&&(l=.2),p===void 0&&(p=!1),g===void 0&&(g=1),x===void 0&&(x=1),y===void 0&&(y=1),m.call(this,c.BOKEH,r),this.radius=h,this.amount=d,this.contrast=l,this.isTiltShift=p,this.strength=y,this.blurX=g,this.blurY=x}});s.exports=o}),12578:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p,g){h===void 0&&(h=8),p===void 0&&(p=1),g===void 0&&(g=.005),m.call(this,c.CIRCLE,r),this.scale=p,this.feather=g,this.thickness=h,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],d!=null&&(this.color=d),l!=null&&(this.backgroundColor=l)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}},backgroundColor:{get:function(){var u=this.glcolor2;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor2;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(u){this.glcolor2[3]=u}}});s.exports=o}),15802:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(89422),c=e(14811),o=new a({Extends:m,initialize:function(r){m.call(this),this.type=c.COLOR_MATRIX,this.gameObject=r,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});s.exports=o}),72898:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u){this.type=o,this.gameObject=u,this.active=!0},setActive:function(c){return this.active=c,this},destroy:function(){this.gameObject=null,this.active=!1}});s.exports=m}),44553:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l){h===void 0&&(h="__WHITE"),d===void 0&&(d=.005),l===void 0&&(l=.005),m.call(this,c.DISPLACEMENT,r),this.x=d,this.y=l,this.glTexture,this.setTexture(h)},setTexture:function(u){var r=this.gameObject.scene.sys.textures.getFrame(u);return r&&(this.glTexture=r.glTexture),this}});s.exports=o}),68531:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p){d===void 0&&(d=4),l===void 0&&(l=0),p===void 0&&(p=!1),m.call(this,c.GLOW,r),this.outerStrength=d,this.innerStrength=l,this.knockout=p,this.glcolor=[1,1,1,1],h!==void 0&&(this.color=h)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}}});s.exports=o}),37102:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p,g,x,y,E){l===void 0&&(l=.2),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=1),E===void 0&&(E=0),m.call(this,c.GRADIENT,r),this.alpha=l,this.size=E,this.fromX=p,this.fromY=g,this.toX=x,this.toY=y,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],h!=null&&(this.color1=h),d!=null&&(this.color2=d)},color1:{get:function(){var u=this.glcolor1;return(u[0]<<16)+(u[1]<<8)+(u[2]|0)},set:function(u){var r=this.glcolor1;r[0]=u>>16&255,r[1]=u>>8&255,r[2]=u&255}},color2:{get:function(){var u=this.glcolor2;return(u[0]<<16)+(u[1]<<8)+(u[2]|0)},set:function(u){var r=this.glcolor2;r[0]=u>>16&255,r[1]=u>>8&255,r[2]=u&255}}});s.exports=o}),86886:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h){h===void 0&&(h=1),m.call(this,c.PIXELATE,r),this.amount=h}});s.exports=o}),92322:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p,g,x,y){h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=.1),p===void 0&&(p=1),x===void 0&&(x=6),y===void 0&&(y=1),m.call(this,c.SHADOW,r),this.x=h,this.y=d,this.decay=l,this.power=p,this.glcolor=[0,0,0,1],this.samples=x,this.intensity=y,g!==void 0&&(this.color=g)},color:{get:function(){var u=this.glcolor;return(u[0]*255<<16)+(u[1]*255<<8)+(u[2]*255|0)},set:function(u){var r=this.glcolor;r[0]=(u>>16&255)/255,r[1]=(u>>8&255)/255,r[2]=(u&255)/255}}});s.exports=o}),39563:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p){h===void 0&&(h=.5),d===void 0&&(d=.5),l===void 0&&(l=3),p===void 0&&(p=!1),m.call(this,c.SHINE,r),this.speed=h,this.lineWidth=d,this.gradient=l,this.reveal=p}});s.exports=o}),56448:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p){h===void 0&&(h=.5),d===void 0&&(d=.5),l===void 0&&(l=.5),p===void 0&&(p=.5),m.call(this,c.VIGNETTE,r),this.x=h,this.y=d,this.radius=l,this.strength=p}});s.exports=o}),38433:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72898),c=e(14811),o=new a({Extends:m,initialize:function(r,h,d,l,p){h===void 0&&(h=.1),d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=!1),m.call(this,c.WIPE,r),this.progress=0,this.wipeWidth=h,this.direction=d,this.axis=l,this.reveal=p}});s.exports=o}),14811:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};s.exports=T}),66064:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),m=e(14811),c={Barrel:e(20122),Controller:e(72898),Bloom:e(32251),Blur:e(9047),Bokeh:e(27885),Circle:e(12578),ColorMatrix:e(15802),Displacement:e(44553),Glow:e(68531),Gradient:e(37102),Pixelate:e(86886),Shadow:e(92322),Shine:e(39563),Vignette:e(56448),Wipe:e(38433)};c=a(!1,c,m),s.exports=c}),25305:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),m=e(23568),c=function(o,u,r){u.x=m(r,"x",0),u.y=m(r,"y",0),u.depth=m(r,"depth",0),u.flipX=m(r,"flipX",!1),u.flipY=m(r,"flipY",!1);var h=m(r,"scale",null);typeof h=="number"?u.setScale(h):h!==null&&(u.scaleX=m(h,"x",1),u.scaleY=m(h,"y",1));var d=m(r,"scrollFactor",null);typeof d=="number"?u.setScrollFactor(d):d!==null&&(u.scrollFactorX=m(d,"x",1),u.scrollFactorY=m(d,"y",1)),u.rotation=m(r,"rotation",0);var l=m(r,"angle",null);l!==null&&(u.angle=l),u.alpha=m(r,"alpha",1);var p=m(r,"origin",null);if(typeof p=="number")u.setOrigin(p);else if(p!==null){var g=m(p,"x",.5),x=m(p,"y",.5);u.setOrigin(g,x)}u.blendMode=m(r,"blendMode",a.NORMAL),u.visible=m(r,"visible",!0);var y=m(r,"add",!0);return y&&o.sys.displayList.add(u),u.preUpdate&&o.sys.updateList.add(u),u};s.exports=c}),13059:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23568),m=function(c,o){var u=a(o,"anims",null);if(u===null)return c;if(typeof u=="string")c.anims.play(u);else if(typeof u=="object"){var r=c.anims,h=a(u,"key",void 0);if(h){var d=a(u,"startFrame",void 0),l=a(u,"delay",0),p=a(u,"repeat",0),g=a(u,"repeatDelay",0),x=a(u,"yoyo",!1),y=a(u,"play",!1),E=a(u,"delayedPlay",0),w={key:h,delay:l,repeat:p,repeatDelay:g,yoyo:x,startFrame:d};y?r.play(w):E>0?r.playAfterDelay(w,E):r.load(w)}}return c};s.exports=m}),8050:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(73162),c=e(37277),o=e(51708),u=e(44594),r=e(19186),h=new a({Extends:m,initialize:function(l){m.call(this,l),this.sortChildrenFlag=!1,this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.events.once(u.DESTROY,this.destroy,this)},addChildCallback:function(d){d.displayList&&d.displayList!==this&&d.removeFromDisplayList(),d.parentContainer&&d.parentContainer.remove(d),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(o.ADDED_TO_SCENE,d,this.scene),this.events.emit(u.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(o.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(u.REMOVED_FROM_SCENE,d,this.scene)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,l){return d._depth-l._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list,l=d.length;l--;)d[l]&&d[l].destroy(!0);d.length=0,this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});c.register("DisplayList",h,"displayList"),s.exports=h}),95643:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(53774),c=e(45893),o=e(50792),u=e(51708),r=e(44594),h=new a({Extends:o,initialize:function(l,p){o.call(this),this.scene=l,this.displayList=null,this.type=p,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this),l.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new c(this)),this},setData:function(d,l){return this.data||(this.data=new c(this)),this.data.set(d,l),this},incData:function(d,l){return this.data||(this.data=new c(this)),this.data.inc(d,l),this},toggleData:function(d){return this.data||(this.data=new c(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new c(this)),this.data.get(d)},setInteractive:function(d,l,p){return this.scene.sys.input.enable(this,d,l,p),this},disableInteractive:function(d){return d===void 0&&(d=!1),this.scene.sys.input.disable(this,d),this},removeInteractive:function(d){return d===void 0&&(d=!1),this.scene.sys.input.clear(this),d&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return m(this)},willRender:function(d){var l=this.displayList&&this.displayList.active?this.displayList.willRender(d):!0;return!(!l||h.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,l=this.parentContainer,p=[];l&&(p.unshift(l.getIndex(d)),d=l,l.parentContainer);)l=l.parentContainer;return this.displayList?p.unshift(this.displayList.getIndex(d)):p.unshift(this.scene.sys.displayList.getIndex(d)),p},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(u.ADDED_TO_SCENE,this,this.scene),d.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d&&d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(u.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var d=null;return this.parentContainer?d=this.parentContainer.list:this.displayList&&(d=this.displayList.list),d},destroy:function(d){!this.scene||this.ignoreDestroy||(d===void 0&&(d=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(u.DESTROY,this,d),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});h.RENDER_MASK=15,s.exports=h}),44603:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(37277),c=e(44594),o=new a({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(u,r){o.prototype.hasOwnProperty(u)||(o.prototype[u]=r)},o.remove=function(u){o.prototype.hasOwnProperty(u)&&delete o.prototype[u]},m.register("GameObjectCreator",o,"make"),s.exports=o}),39429:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(37277),c=e(44594),o=new a({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},existing:function(u){return(u.renderCanvas||u.renderWebGL)&&this.displayList.add(u),u.preUpdate&&this.updateList.add(u),u},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(u,r){o.prototype.hasOwnProperty(u)||(o.prototype[u]=r)},o.remove=function(u){o.prototype.hasOwnProperty(u)&&delete o.prototype[u]},m.register("GameObjectFactory",o,"add"),s.exports=o}),91296:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),m=new a,c=new a,o=new a,u={camera:m,sprite:c,calc:o},r=function(h,d,l){var p=m,g=c,x=o;return g.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),p.copyFrom(d.matrix),l?(p.multiplyWithOffset(l,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),g.e=h.x,g.f=h.y):(g.e-=d.scrollX*h.scrollFactorX,g.f-=d.scrollY*h.scrollFactorY),p.multiply(g,x),u};s.exports=r}),45027:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(25774),c=e(37277),o=e(44594),u=new a({Extends:m,initialize:function(h){m.call(this),this.checkQueue=!0,this.scene=h,this.systems=h.sys,h.sys.events.once(o.BOOT,this.boot,this),h.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(o.PRE_UPDATE,this.update,this),r.on(o.UPDATE,this.sceneUpdate,this),r.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,h){for(var d=this._active,l=d.length,p=0;p<l;p++){var g=d[p];g.active&&g.preUpdate.call(g,r,h)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var h=this.systems.events;h.off(o.PRE_UPDATE,this.update,this),h.off(o.UPDATE,this.sceneUpdate,this),h.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});c.register("UpdateList",u,"updateList"),s.exports=u}),3217:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o,u,r,h,d,l,p,g,x,y,E){var w=m.x-a.displayOriginX+o,C=m.y-a.displayOriginY+u,A=w+m.w,M=C+m.h,R=r.a,P=r.b,b=r.c,F=r.d,I=r.e,L=r.f,D=w*R+C*b+I,O=w*P+C*F+L,z=w*R+M*b+I,W=w*P+M*F+L,k=A*R+M*b+I,X=A*P+M*F+L,V=A*R+C*b+I,G=A*P+C*F+L;h&&(D=Math.round(D),O=Math.round(O),z=Math.round(z),W=Math.round(W),k=Math.round(k),X=Math.round(X),V=Math.round(V),G=Math.round(G)),e.batchQuad(a,D,O,z,W,k,X,V,G,c.u0,c.v0,c.u1,c.v1,d,l,p,g,x,y,E)};s.exports=T}),53048:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){if(m===void 0&&(m=!1),c===void 0)return c={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},c;var o=e.text,u=o.length,r=e.maxWidth,h=e.wordWrapCharCode,d=Number.MAX_VALUE,l=Number.MAX_VALUE,p=0,g=0,x=e.fontData.chars,y=e.fontData.lineHeight,E=e.letterSpacing,w=e.lineSpacing,C=0,A=0,M=0,R=null,P=e._align,b=0,F=0,I=e.fontSize/e.fontData.size,L=I*e.scaleX,D=I*e.scaleY,O=null,z=0,W=[],k=Number.MAX_VALUE,X=0,V=0,G=0,N,H,U,_=[],$=[],j=null,Z=function(ae,zt){for(var Ht=0,At=0;At<ae.length;At++){var ne=ae.charCodeAt(At),jt=zt.chars[ne];jt&&(Ht+=jt.xAdvance)}return Ht*L};if(r>0){U=o.split(`
`);var it=[];for(N=0;N<U.length;N++){var at=U[N],q="",ft="",vt="",Tt="";for(H=0;H<at.length;H++)if(M=at.charCodeAt(H),q+=at[H],M===h||H===at.length-1){Tt=vt+q;var ut=Z(Tt,e.fontData);ut<=r?vt=Tt:(ft=ft.slice(0,-1),ft+=(ft?`
`:"")+vt,vt=q),q=""}ft=ft.slice(0,-1),ft+=(ft?`
`:"")+vt,it.push(ft)}o=it.join(`
`),c.wrappedText=o,u=o.length}var Bt=0;for(N=0;N<u;N++){if(M=o.charCodeAt(N),M===10){j!==null&&(_.push({word:j.word,i:j.i,x:j.x*L,y:j.y*D,w:j.w*L,h:j.h*D}),j=null),O=null,W[V]=G,G>X&&(X=G),G<k&&(k=G),V++,G=0,C=0,A=(y+w)*V;continue}if(R=x[M],!!R){if(b=C,F=A,O!==null){var Pt=R.kerning[z];b+=Pt!==void 0?Pt:0}d>b&&(d=b),l>F&&(l=F);var et=b+R.xAdvance,Q=F+y;p<et&&(p=et),g<Q&&(g=Q);var lt=R.xOffset+R.xAdvance+(Pt!==void 0?Pt:0);M===h?j!==null&&(_.push({word:j.word,i:j.i,x:j.x*L,y:j.y*D,w:j.w*L,h:j.h*D}),j=null):(j===null&&(j={word:"",i:Bt,x:C,y:A,w:0,h:y}),j.word=j.word.concat(o[N]),j.w+=lt),$.push({i:Bt,idx:N,char:o[N],code:M,x:(R.xOffset+b)*I,y:(R.yOffset+A)*I,w:R.width*I,h:R.height*I,t:A*I,r:et*I,b:y*I,line:V,glyph:R}),C+=R.xAdvance+E+(Pt!==void 0?Pt:0),O=R,z=M,G=et*I,Bt++}}if(j!==null&&_.push({word:j.word,i:j.i,x:j.x*L,y:j.y*D,w:j.w*L,h:j.h*D}),W[V]=G,G>X&&(X=G),G<k&&(k=G),P>0)for(var pt=0;pt<$.length;pt++){var Mt=$[pt];if(P===1){var Ct=(X-W[Mt.line])/2;Mt.x+=Ct,Mt.r+=Ct}else if(P===2){var Kt=X-W[Mt.line];Mt.x+=Kt,Mt.r+=Kt}}var Ut=c.local,Wt=c.global;return U=c.lines,Ut.x=d*I,Ut.y=l*I,Ut.width=p*I,Ut.height=g*I,Wt.x=e.x-e._displayOriginX+d*L,Wt.y=e.y-e._displayOriginY+l*D,Wt.width=p*L,Wt.height=g*D,U.shortest=k,U.longest=X,U.lengths=W,a&&(Ut.x=Math.ceil(Ut.x),Ut.y=Math.ceil(Ut.y),Ut.width=Math.ceil(Ut.width),Ut.height=Math.ceil(Ut.height),Wt.x=Math.ceil(Wt.x),Wt.y=Math.ceil(Wt.y),Wt.width=Math.ceil(Wt.width),Wt.height=Math.ceil(Wt.height),U.shortest=Math.ceil(k),U.longest=Math.ceil(X)),m&&(e._displayOriginX=e.originX*Ut.width,e._displayOriginY=e.originY*Ut.height,Wt.x=e.x-e._displayOriginX*e.scaleX,Wt.y=e.y-e._displayOriginY*e.scaleY,a&&(Wt.x=Math.ceil(Wt.x),Wt.y=Math.ceil(Wt.y))),c.words=_,c.characters=$,c.lines.height=y,c.scale=I,c.scaleX=e.scaleX,c.scaleY=e.scaleY,c};s.exports=T}),61327:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21859),m=function(c,o,u,r,h,d,l){var p=c.sys.textures.get(u),g=p.get(r),x=c.sys.cache.xml.get(h);if(g&&x){var y=a(x,g,d,l,p);return c.sys.cache.bitmapFont.add(o,{data:y,texture:u,frame:r,fromAtlas:!0}),!0}else return!1};s.exports=m}),6925:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),m=function(c,o){var u=o.width,r=o.height,h=Math.floor(u/2),d=Math.floor(r/2),l=a(o,"chars","");if(l!==""){var p=a(o,"image",""),g=c.sys.textures.getFrame(p),x=g.cutX,y=g.cutY,E=g.source.width,w=g.source.height,C=a(o,"offset.x",0),A=a(o,"offset.y",0),M=a(o,"spacing.x",0),R=a(o,"spacing.y",0),P=a(o,"lineSpacing",0),b=a(o,"charsPerRow",null);b===null&&(b=E/u,b>l.length&&(b=l.length));for(var F=C,I=A,L={retroFont:!0,font:p,size:u,lineHeight:r+P,chars:{}},D=0,O=0;O<l.length;O++){var z=l.charCodeAt(O),W=(x+F)/E,k=(y+I)/w,X=(x+F+u)/E,V=(y+I+r)/w;L.chars[z]={x:F,y:I,width:u,height:r,centerX:h,centerY:d,xOffset:0,yOffset:0,xAdvance:u,data:{},kerning:{},u0:W,v0:k,u1:X,v1:V},D++,D===b?(D=0,F=C,I+=r+R):F+=u+M}var G={data:L,frame:null,texture:p};return G}};s.exports=m}),21859:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(a,m){return parseInt(a.getAttribute(m),10)}var e=function(a,m,c,o,u){c===void 0&&(c=0),o===void 0&&(o=0);var r=m.cutX,h=m.cutY,d=m.source.width,l=m.source.height,p=m.sourceIndex,g={},x=a.getElementsByTagName("info")[0],y=a.getElementsByTagName("common")[0];g.font=x.getAttribute("face"),g.size=T(x,"size"),g.lineHeight=T(y,"lineHeight")+o,g.chars={};var E=a.getElementsByTagName("char"),w=m!==void 0&&m.trimmed;if(w)var C=m.height,A=m.width;for(var M=0;M<E.length;M++){var R=E[M],P=T(R,"id"),b=String.fromCharCode(P),F=T(R,"x"),I=T(R,"y"),L=T(R,"width"),D=T(R,"height");w&&(F<A&&(A=F),I<C&&(C=I)),w&&C!==0&&A!==0&&(F-=m.x,I-=m.y);var O=(r+F)/d,z=(h+I)/l,W=(r+F+L)/d,k=(h+I+D)/l;if(g.chars[P]={x:F,y:I,width:L,height:D,centerX:Math.floor(L/2),centerY:Math.floor(D/2),xOffset:T(R,"xoffset"),yOffset:T(R,"yoffset"),xAdvance:T(R,"xadvance")+c,data:{},kerning:{},u0:O,v0:z,u1:W,v1:k},u&&L!==0&&D!==0){var X=u.add(b,p,F,I,L,D);X&&X.setUVs(L,D,O,z,W,k)}}var V=a.getElementsByTagName("kerning");for(M=0;M<V.length;M++){var G=V[M],N=T(G,"first"),H=T(G,"second"),U=T(G,"amount");g.chars[H].kerning[N]=U}return g};s.exports=e}),196:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87662),m=e(79291),c={Parse:e(6925)};c=m(!1,c,a),s.exports=c}),87662:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};s.exports=T}),2638:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),m=e(83419),c=e(12310),o=new m({Extends:a,Mixins:[c],initialize:function(r,h,d,l,p,g,x){a.call(this,r,h,d,l,p,g,x),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(u,r){return this.cropWidth=u,this.cropHeight=r,this},setDisplayCallback:function(u){return this.displayCallback=u,this},setScrollX:function(u){return this.scrollX=u,this},setScrollY:function(u){return this.scrollY=u,this}});s.exports=o}),86741:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20926),m=function(c,o,u,r){var h=o._text,d=h.length,l=c.currentContext;if(!(d===0||!a(c,l,o,u,r))){u.addToRenderList(o);var p=o.fromAtlas?o.frame:o.texture.frames.__BASE,g=o.displayCallback,x=o.callbackData,y=o.fontData.chars,E=o.fontData.lineHeight,w=o._letterSpacing,C=0,A=0,M=0,R=null,P=0,b=0,F=0,I=0,L=0,D=0,O=null,z=0,W=o.frame.source.image,k=p.cutX,X=p.cutY,V=0,G=0,N=o._fontSize/o.fontData.size,H=o._align,U=0,_=0;o.getTextBounds(!1);var $=o._bounds.lines;H===1?_=($.longest-$.lengths[0])/2:H===2&&(_=$.longest-$.lengths[0]),l.translate(-o.displayOriginX,-o.displayOriginY);var j=u.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(l.beginPath(),l.rect(0,0,o.cropWidth,o.cropHeight),l.clip());for(var Z=0;Z<d;Z++){if(G=N,V=0,M=h.charCodeAt(Z),M===10){U++,H===1?_=($.longest-$.lengths[U])/2:H===2&&(_=$.longest-$.lengths[U]),C=0,A+=E,O=null;continue}if(R=y[M],!!R){if(P=k+R.x,b=X+R.y,F=R.width,I=R.height,L=R.xOffset+C-o.scrollX,D=R.yOffset+A-o.scrollY,O!==null){var it=R.kerning[z];L+=it!==void 0?it:0}if(g){x.index=Z,x.charCode=M,x.x=L,x.y=D,x.scale=G,x.rotation=V,x.data=R.data;var at=g(x);L=at.x,D=at.y,G=at.scale,V=at.rotation}L*=G,D*=G,L+=_,C+=R.xAdvance+w+(it!==void 0?it:0),O=R,z=M,!(F===0||I===0||M===32)&&(j&&(L=Math.round(L),D=Math.round(D)),l.save(),l.translate(L,D),l.rotate(V),l.scale(G,G),l.drawImage(W,P,b,F,I,0,0,F,I),l.restore())}}l.restore()}};s.exports=m}),11164:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2638),m=e(25305),c=e(44603),o=e(23568);c.register("dynamicBitmapText",function(u,r){u===void 0&&(u={});var h=o(u,"font",""),d=o(u,"text",""),l=o(u,"size",!1),p=new a(this.scene,0,0,h,d,l);return r!==void 0&&(u.add=r),m(this.scene,p,u),p})}),72566:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2638),m=e(39429);m.register("dynamicBitmapText",function(c,o,u,r,h){return this.displayList.add(new a(this.scene,c,o,u,r,h))})}),12310:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(73482),c=e(86741),s.exports={renderWebGL:m,renderCanvas:c}}),73482:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=e(61340),c=e(70554),o=new m,u=function(r,h,d,l){var p=h.text,g=p.length;if(g!==0){d.addToRenderList(h);var x=r.pipelines.set(h.pipeline,h),y=a(h,d,l);r.pipelines.preBatch(h);var E=y.sprite,w=y.calc,C=o,A=h.cropWidth>0||h.cropHeight>0;A&&(x.flush(),r.pushScissor(w.tx,w.ty,h.cropWidth*w.scaleX,h.cropHeight*w.scaleY));var M=h.frame,R=M.glTexture,P=h.tintFill,b=c.getTintAppendFloatAlpha(h.tintTopLeft,d.alpha*h._alphaTL),F=c.getTintAppendFloatAlpha(h.tintTopRight,d.alpha*h._alphaTR),I=c.getTintAppendFloatAlpha(h.tintBottomLeft,d.alpha*h._alphaBL),L=c.getTintAppendFloatAlpha(h.tintBottomRight,d.alpha*h._alphaBR),D=x.setGameObject(h),O=0,z=0,W=0,k=0,X=h.letterSpacing,V,G=0,N=0,H,U=h.scrollX,_=h.scrollY,$=h.fontData,j=$.chars,Z=$.lineHeight,it=h.fontSize/$.size,at=0,q=h._align,ft=0,vt=0,Tt=h.getTextBounds(!1);h.maxWidth>0&&(p=Tt.wrappedText,g=p.length);var ut=h._bounds.lines;q===1?vt=(ut.longest-ut.lengths[0])/2:q===2&&(vt=ut.longest-ut.lengths[0]);for(var Bt=d.roundPixels,Pt=h.displayCallback,et=h.callbackData,Q=0;Q<g;Q++){if(W=p.charCodeAt(Q),W===10){ft++,q===1?vt=(ut.longest-ut.lengths[ft])/2:q===2&&(vt=ut.longest-ut.lengths[ft]),O=0,z+=Z,H=null;continue}if(V=j[W],!!V){G=V.width,N=V.height;var lt=V.xOffset+O-U,pt=V.yOffset+z-_;if(H!==null){var Mt=V.kerning[k]||0;lt+=Mt,O+=Mt}if(O+=V.xAdvance+X,H=V,k=W,!(G===0||N===0||W===32)){if(it=h.fontSize/h.fontData.size,at=0,Pt){et.color=0,et.tint.topLeft=b,et.tint.topRight=F,et.tint.bottomLeft=I,et.tint.bottomRight=L,et.index=Q,et.charCode=W,et.x=lt,et.y=pt,et.scale=it,et.rotation=at,et.data=V.data;var Ct=Pt(et);lt=Ct.x,pt=Ct.y,it=Ct.scale,at=Ct.rotation,Ct.color?(b=Ct.color,F=Ct.color,I=Ct.color,L=Ct.color):(b=Ct.tint.topLeft,F=Ct.tint.topRight,I=Ct.tint.bottomLeft,L=Ct.tint.bottomRight),b=c.getTintAppendFloatAlpha(b,d.alpha*h._alphaTL),F=c.getTintAppendFloatAlpha(F,d.alpha*h._alphaTR),I=c.getTintAppendFloatAlpha(I,d.alpha*h._alphaBL),L=c.getTintAppendFloatAlpha(L,d.alpha*h._alphaBR)}lt*=it,pt*=it,lt-=h.displayOriginX,pt-=h.displayOriginY,lt+=vt,C.applyITRS(lt,pt,at,it,it),w.multiply(C,E);var Kt=V.u0,Ut=V.v0,Wt=V.u1,ae=V.v1,zt=G,Ht=N,At=E.e,ne=E.f,jt=Ht*E.c+E.e,ve=Ht*E.d+E.f,we=zt*E.a+Ht*E.c+E.e,De=zt*E.b+Ht*E.d+E.f,dt=zt*E.a+E.e,Qt=zt*E.b+E.f;Bt&&(At=Math.round(At),ne=Math.round(ne),jt=Math.round(jt),ve=Math.round(ve),we=Math.round(we),De=Math.round(De),dt=Math.round(dt),Qt=Math.round(Qt)),x.shouldFlush(6)&&(x.flush(),D=x.setGameObject(h)),x.batchQuad(h,At,ne,jt,ve,we,De,dt,Qt,Kt,Ut,Wt,ae,b,F,I,L,P,R,D)}}}A&&(x.flush(),r.popScissor()),r.pipelines.postBatch(h)}};s.exports=u}),22186:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(45319),c=e(31401),o=e(95643),u=e(53048),r=e(61327),h=e(21859),d=e(87841),l=e(18658),p=new a({Extends:o,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Texture,c.Tint,c.Transform,c.Visible,l],initialize:function(x,y,E,w,C,A,M){C===void 0&&(C=""),M===void 0&&(M=0),o.call(this,x,"BitmapText"),this.font=w;var R=this.scene.sys.cache.bitmapFont.get(w);if(!R)throw new Error("Invalid BitmapText key: "+w);this.fontData=R.data,this._text="",this._fontSize=A||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=M,this._bounds=u(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=R.fromAtlas,this.setTexture(R.texture,R.frame),this.setPosition(y,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(C)},setLeftAlign:function(){return this._align=p.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=p.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=p.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(g){return this._fontSize=g,this._dirty=!0,this},setLetterSpacing:function(g){return g===void 0&&(g=0),this._letterSpacing=g,this._dirty=!0,this},setLineSpacing:function(g){return g===void 0&&(g=0),this.lineSpacing=g,this},setText:function(g){return!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g!==this.text&&(this._text=g.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(g,x,y,E){return g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=0),E===void 0&&(E=.5),this.dropShadowX=g,this.dropShadowY=x,this.dropShadowColor=y,this.dropShadowAlpha=E,this},setCharacterTint:function(g,x,y,E,w,C,A){g===void 0&&(g=0),x===void 0&&(x=1),y===void 0&&(y=!1),E===void 0&&(E=-1),w===void 0&&(w=E,C=E,A=E);var M=this.text.length;x===-1&&(x=M),g<0&&(g=M+g),g=m(g,0,M-1);for(var R=m(g+x,g,M),P=this.charColors,b=g;b<R;b++){var F=P[b];if(E===-1)P[b]=null;else{var I=y?1:0;F?(F.tintEffect=I,F.tintTL=E,F.tintTR=w,F.tintBL=C,F.tintBR=A):P[b]={tintEffect:I,tintTL:E,tintTR:w,tintBL:C,tintBR:A}}}return this},setWordTint:function(g,x,y,E,w,C,A){x===void 0&&(x=1);for(var M=this.getTextBounds(),R=M.words,P=typeof g=="number",b=0,F=0;F<R.length;F++){var I=R[F];if((P&&F===g||!P&&I.word===g)&&(this.setCharacterTint(I.i,I.word.length,y,E,w,C,A),b++,b===x))return this}return this},getTextBounds:function(g){var x=this._bounds;return(this._dirty||g||this.scaleX!==x.scaleX||this.scaleY!==x.scaleY)&&(u(this,g,!0,x),this._dirty=!1),x},getCharacterAt:function(g,x,y){for(var E=this.getLocalPoint(g,x,null,y),w=this.getTextBounds(),C=w.characters,A=new d,M=0;M<C.length;M++){var R=C[M];if(A.setTo(R.x,R.t,R.r-R.x,R.b),A.contains(E.x,E.y))return R}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(g,x,y){x===void 0&&(x=this._fontSize),y===void 0&&(y=this._align);var E=this.scene.sys.cache.bitmapFont.get(g);return E&&(this.font=g,this.fontData=E.data,this._fontSize=x,this._align=y,this.fromAtlas=E.fromAtlas===!0,this.setTexture(E.texture,E.frame),u(this,!1,!0,this._bounds)),this},setMaxWidth:function(g,x){return this._maxWidth=g,this._dirty=!0,x!==void 0&&(this.wordWrapCharCode=x),this},setDisplaySize:function(g,x){this.setScale(1,1),this.getTextBounds(!1);var y=g/this.width,E=x/this.height;return this.setScale(y,E),this},align:{set:function(g){this._align=g,this._dirty=!0},get:function(){return this._align}},text:{set:function(g){this.setText(g)},get:function(){return this._text}},fontSize:{set:function(g){this._fontSize=g,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(g){this._letterSpacing=g,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(g){this._lineSpacing=g,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(g){this._maxWidth=g,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(g){this.setScaleX(1),this.getTextBounds(!1);var x=g/this.width;this.setScaleX(x)},get:function(){return this.width}},displayHeight:{set:function(g){this.setScaleY(1),this.getTextBounds(!1);var x=g/this.height;this.setScaleY(x)},get:function(){return this.height}},toJSON:function(){var g=c.ToJSON(this),x={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return g.data=x,g},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});p.ALIGN_LEFT=0,p.ALIGN_CENTER=1,p.ALIGN_RIGHT=2,p.ParseFromAtlas=r,p.ParseXMLBitmapFont=h,s.exports=p}),37289:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20926),m=function(c,o,u,r){var h=o._text,d=h.length,l=c.currentContext;if(!(d===0||!a(c,l,o,u,r))){u.addToRenderList(o);var p=o.fromAtlas?o.frame:o.texture.frames.__BASE,g=o.fontData.chars,x=o.fontData.lineHeight,y=o._letterSpacing,E=o._lineSpacing,w=0,C=0,A=0,M=null,R=0,P=0,b=0,F=0,I=0,L=0,D=null,O=0,z=p.source.image,W=p.cutX,k=p.cutY,X=o._fontSize/o.fontData.size,V=o._align,G=0,N=0,H=o.getTextBounds(!1);o.maxWidth>0&&(h=H.wrappedText,d=h.length);var U=o._bounds.lines;V===1?N=(U.longest-U.lengths[0])/2:V===2&&(N=U.longest-U.lengths[0]),l.translate(-o.displayOriginX,-o.displayOriginY);for(var _=u.roundPixels,$=0;$<d;$++){if(A=h.charCodeAt($),A===10){G++,V===1?N=(U.longest-U.lengths[G])/2:V===2&&(N=U.longest-U.lengths[G]),w=0,C+=x+E,D=null;continue}if(M=g[A],!!M){if(R=W+M.x,P=k+M.y,b=M.width,F=M.height,I=M.xOffset+w,L=M.yOffset+C,D!==null){var j=M.kerning[O];I+=j!==void 0?j:0}I*=X,L*=X,I+=N,w+=M.xAdvance+y+(j!==void 0?j:0),D=M,O=A,!(b===0||F===0||A===32)&&(_&&(I=Math.round(I),L=Math.round(L)),l.save(),l.translate(I,L),l.scale(X,X),l.drawImage(z,R,P,b,F,0,0,b,F),l.restore())}}l.restore()}};s.exports=m}),57336:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),m=e(25305),c=e(44603),o=e(23568),u=e(35154);c.register("bitmapText",function(r,h){r===void 0&&(r={});var d=u(r,"font",""),l=o(r,"text",""),p=o(r,"size",!1),g=u(r,"align",0),x=new a(this.scene,0,0,d,l,p,g);return h!==void 0&&(r.add=h),m(this.scene,x,r),x})}),34914:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22186),m=e(39429);m.register("bitmapText",function(c,o,u,r,h,d){return this.displayList.add(new a(this.scene,c,o,u,r,h,d))})}),18658:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(33590),c=e(37289),s.exports={renderWebGL:m,renderCanvas:c}}),33590:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3217),m=e(91296),c=e(70554),o=function(u,r,h,d){var l=r._text,p=l.length;if(p!==0){h.addToRenderList(r);var g=u.pipelines.set(r.pipeline,r),x=m(r,h,d).calc;u.pipelines.preBatch(r);var y=h.roundPixels,E=h.alpha,w=r.charColors,C=r.tintFill,A=c.getTintAppendFloatAlpha,M=A(r.tintTopLeft,E*r._alphaTL),R=A(r.tintTopRight,E*r._alphaTR),P=A(r.tintBottomLeft,E*r._alphaBL),b=A(r.tintBottomRight,E*r._alphaBR),F=r.frame.glTexture,I=g.setGameObject(r),L=r.getTextBounds(!1),D,O,z,W=L.characters,k=r.dropShadowX,X=r.dropShadowY,V=k!==0||X!==0;if(V){var G=r.dropShadowColor,N=r.dropShadowAlpha,H=A(G,E*N*r._alphaTL),U=A(G,E*N*r._alphaTR),_=A(G,E*N*r._alphaBL),$=A(G,E*N*r._alphaBR);for(D=0;D<W.length;D++)O=W[D],z=O.glyph,!(O.code===32||z.width===0||z.height===0)&&a(g,r,O,z,k,X,x,y,H,U,_,$,1,F,I)}for(D=0;D<W.length;D++)if(O=W[D],z=O.glyph,!(O.code===32||z.width===0||z.height===0))if(g.shouldFlush(6)&&(g.flush(),I=g.setGameObject(r)),w[O.i]){var j=w[O.i],Z=j.tintEffect,it=A(j.tintTL,E*r._alphaTL),at=A(j.tintTR,E*r._alphaTR),q=A(j.tintBL,E*r._alphaBL),ft=A(j.tintBR,E*r._alphaBR);a(g,r,O,z,0,0,x,y,it,at,q,ft,Z,F,I)}else a(g,r,O,z,0,0,x,y,M,R,P,b,C,F,I);u.pipelines.postBatch(r)}};s.exports=o}),6107:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(48011),m=e(46590),c=e(83419),o=e(31401),u=e(4327),r=e(95643),h=e(73162),d=new c({Extends:r,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,a],initialize:function(p,g,x,y,E){r.call(this,p,"Blitter"),this.setTexture(y,E),this.setPosition(g,x),this.initPipeline(),this.initPostPipeline(),this.children=new h,this.renderList=[],this.dirty=!1},create:function(l,p,g,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.children.length),g===void 0?g=this.frame:g instanceof u||(g=this.texture.get(g));var E=new m(this,l,p,g,x);return this.children.addAt(E,y,!1),this.dirty=!0,E},createFromCallback:function(l,p,g,x){for(var y=this.createMultiple(p,g,x),E=0;E<y.length;E++){var w=y[E];l.call(this,w,E)}return y},createMultiple:function(l,p,g){p===void 0&&(p=this.frame.name),g===void 0&&(g=!0),Array.isArray(p)||(p=[p]);var x=[],y=this;return p.forEach(function(E){for(var w=0;w<l;w++)x.push(y.create(0,0,E,g))}),x},childCanRender:function(l){return l.visible&&l.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});s.exports=d}),72396:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=a.getRenderList();if(o.length!==0){var u=e.currentContext,r=m.alpha*a.alpha;if(r!==0){m.addToRenderList(a),u.globalCompositeOperation=e.blendModes[a.blendMode],u.imageSmoothingEnabled=!a.frame.source.scaleMode;var h=a.x-m.scrollX*a.scrollFactorX,d=a.y-m.scrollY*a.scrollFactorY;u.save(),c&&c.copyToContext(u);for(var l=m.roundPixels,p=0;p<o.length;p++){var g=o[p],x=g.flipX||g.flipY,y=g.frame,E=y.canvasData,w=y.x,C=y.y,A=1,M=1,R=g.alpha*r;R!==0&&(u.globalAlpha=R,x?(g.flipX&&(A=-1,w-=E.width),g.flipY&&(M=-1,C-=E.height),E.width>0&&E.height>0&&(u.save(),u.translate(g.x+h,g.y+d),u.scale(A,M),u.drawImage(y.source.image,E.x,E.y,E.width,E.height,w,C,E.width,E.height),u.restore())):(l&&(w=Math.round(w),C=Math.round(C)),E.width>0&&E.height>0&&u.drawImage(y.source.image,E.x,E.y,E.width,E.height,w+g.x+h,C+g.y+d,E.width,E.height)))}u.restore()}}};s.exports=T}),9403:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6107),m=e(25305),c=e(44603),o=e(23568);c.register("blitter",function(u,r){u===void 0&&(u={});var h=o(u,"key",null),d=o(u,"frame",null),l=new a(this.scene,0,0,h,d);return r!==void 0&&(u.add=r),m(this.scene,l,u),l})}),12709:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6107),m=e(39429);m.register("blitter",function(c,o,u,r){return this.displayList.add(new a(this.scene,c,o,u,r))})}),48011:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(99485),c=e(72396),s.exports={renderWebGL:m,renderCanvas:c}}),99485:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),m=e(70554),c=new a,o=function(u,r,h,d){var l=r.getRenderList(),p=h.alpha*r.alpha;if(!(l.length===0||p===0)){h.addToRenderList(r);var g=u.pipelines.set(this.pipeline,r),x=h.scrollX*r.scrollFactorX,y=h.scrollY*r.scrollFactorY,E=c.copyFrom(h.matrix);d&&(E.multiplyWithOffset(d,-x,-y),x=0,y=0);var w=r.x-x,C=r.y-y,A=-1,M=!1,R=h.roundPixels;u.pipelines.preBatch(r);for(var P=0;P<l.length;P++){var b=l[P],F=b.frame,I=b.alpha*p;if(I!==0){var L=F.width,D=F.height,O=w+b.x+F.x,z=C+b.y+F.y;b.flipX&&(L*=-1,O+=F.width),b.flipY&&(D*=-1,z+=F.height);var W=E.setQuad(O,z,O+L,z+D,R),k=m.getTintAppendFloatAlpha(b.tint,I);if(F.sourceIndex!==A){var X=g.setGameObject(r,F);A=F.sourceIndex}g.batchQuad(r,W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],F.u0,F.v0,F.u1,F.v1,k,k,k,k,M,F.glTexture,X)&&(A=-1)}}u.pipelines.postBatch(r)}};s.exports=o}),46590:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(4327),c=new a({initialize:function(u,r,h,d,l){this.parent=u,this.x=r,this.y=h,this.frame=d,this.data={},this.tint=16777215,this._visible=l,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof m&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,u,r){return this.x=o,this.y=u,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(o,u){return this.x=o,this.y=u,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,u){return this.flipX=o,this.flipY=u,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});s.exports=c}),16005:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=2,c={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,u,r,h){return o===void 0&&(o=1),u===void 0?this.alpha=o:(this._alphaTL=a(o,0,1),this._alphaTR=a(u,0,1),this._alphaBL=a(r,0,1),this._alphaBR=a(h,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var u=a(o,0,1);this._alpha=u,this._alphaTL=u,this._alphaTR=u,this._alphaBL=u,this._alphaBR=u,u===0?this.renderFlags&=~m:this.renderFlags|=m}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var u=a(o,0,1);this._alphaTL=u,u!==0&&(this.renderFlags|=m)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var u=a(o,0,1);this._alphaTR=u,u!==0&&(this.renderFlags|=m)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var u=a(o,0,1);this._alphaBL=u,u!==0&&(this.renderFlags|=m)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var u=a(o,0,1);this._alphaBR=u,u!==0&&(this.renderFlags|=m)}}};s.exports=c}),88509:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=2,c={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var u=a(o,0,1);this._alpha=u,u===0?this.renderFlags&=~m:this.renderFlags|=m}}};s.exports=c}),90065:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),m={_blendMode:a.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(c){typeof c=="string"&&(c=a[c]),c|=0,c>=-1&&(this._blendMode=c)}},setBlendMode:function(c){return this.blendMode=c,this}};s.exports=m}),94215:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};s.exports=T}),61683:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={texture:null,frame:null,isCropped:!1,setCrop:function(e,a,m,c){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,a,m,c,this.flipX,this.flipY);else{var o=e;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};s.exports=T}),89272:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),m={_depth:0,depth:{get:function(){return this._depth},set:function(c){this.displayList&&this.displayList.queueDepthSort(),this._depth=c}},setDepth:function(c){return c===void 0&&(c=0),this.depth=c,this},setToTop:function(){var c=this.getDisplayList();return c&&a.BringToTop(c,this),this},setToBack:function(){var c=this.getDisplayList();return c&&a.SendToBack(c,this),this},setAbove:function(c){var o=this.getDisplayList();return o&&c&&a.MoveAbove(o,this,c),this},setBelow:function(c){var o=this.getDisplayList();return o&&c&&a.MoveBelow(o,this,c),this}};s.exports=m}),47059:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(66064),c=e(19133),o=new a({initialize:function(r,h){this.gameObject=r,this.isPost=h,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(u){return u===void 0&&(u=0),this.padding=u,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(u){if(!this.isPost){var r=this.gameObject.scene.sys.renderer;r&&r.pipelines?(this.gameObject.pipeline=r.pipelines.FX_PIPELINE,u!==void 0&&(this.padding=u),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var u=this.list,r=0;r<u.length;r++)u[r].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(u){var r;if(this.isPost){var h=this.gameObject.getPostPipeline(String(u.type));for(Array.isArray(h)||(h=[h]),r=0;r<h.length;r++){var d=h[r];if(d.controller===u){this.gameObject.removePostPipeline(d),u.destroy();break}}}else{var l=this.list;for(r=0;r<l.length;r++)l[r]===u&&(c(l,r),u.destroy())}return this.gameObject},disable:function(u){return u===void 0&&(u=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,u&&this.clear(),this.gameObject},add:function(u,r){if(this.isPost){var h=String(u.type);this.gameObject.setPostPipeline(h,r);var d=this.gameObject.getPostPipeline(h);if(d)return Array.isArray(d)&&(d=d.pop()),d&&(d.controller=u),u}else return this.enabled||this.enable(),this.list.push(u),u},addGlow:function(u,r,h,d,l,p){return this.add(new m.Glow(this.gameObject,u,r,h,d),{quality:l,distance:p})},addShadow:function(u,r,h,d,l,p,g){return this.add(new m.Shadow(this.gameObject,u,r,h,d,l,p,g))},addPixelate:function(u){return this.add(new m.Pixelate(this.gameObject,u))},addVignette:function(u,r,h,d){return this.add(new m.Vignette(this.gameObject,u,r,h,d))},addShine:function(u,r,h,d){return this.add(new m.Shine(this.gameObject,u,r,h,d))},addBlur:function(u,r,h,d,l,p){return this.add(new m.Blur(this.gameObject,u,r,h,d,l,p))},addGradient:function(u,r,h,d,l,p,g,x){return this.add(new m.Gradient(this.gameObject,u,r,h,d,l,p,g,x))},addBloom:function(u,r,h,d,l,p){return this.add(new m.Bloom(this.gameObject,u,r,h,d,l,p))},addColorMatrix:function(){return this.add(new m.ColorMatrix(this.gameObject))},addCircle:function(u,r,h,d,l){return this.add(new m.Circle(this.gameObject,u,r,h,d,l))},addBarrel:function(u){return this.add(new m.Barrel(this.gameObject,u))},addDisplacement:function(u,r,h){return this.add(new m.Displacement(this.gameObject,u,r,h))},addWipe:function(u,r,h){return this.add(new m.Wipe(this.gameObject,u,r,h))},addReveal:function(u,r,h){return this.add(new m.Wipe(this.gameObject,u,r,h,!0))},addBokeh:function(u,r,h){return this.add(new m.Bokeh(this.gameObject,u,r,h))},addTiltShift:function(u,r,h,d,l,p){return this.add(new m.Bokeh(this.gameObject,u,r,h,!0,d,l,p))},destroy:function(){this.clear(),this.gameObject=null}});s.exports=o}),54434:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,a){return this.flipX=e,this.flipY=a,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};s.exports=T}),8004:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=e(11520),c=e(26099),o={prepareBoundsOutput:function(u,r){if(r===void 0&&(r=!1),this.rotation!==0&&m(u,this.x,this.y,this.rotation),r&&this.parentContainer){var h=this.parentContainer.getBoundsTransformMatrix();h.transformPoint(u.x,u.y,u)}return u},getCenter:function(u,r){return u===void 0&&(u=new c),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,r)},getTopLeft:function(u,r){return u||(u=new c),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,r)},getTopCenter:function(u,r){return u||(u=new c),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,r)},getTopRight:function(u,r){return u||(u=new c),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,r)},getLeftCenter:function(u,r){return u||(u=new c),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,r)},getRightCenter:function(u,r){return u||(u=new c),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,r)},getBottomLeft:function(u,r){return u||(u=new c),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,r)},getBottomCenter:function(u,r){return u||(u=new c),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,r)},getBottomRight:function(u,r){return u||(u=new c),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,r)},getBounds:function(u){u===void 0&&(u=new a);var r,h,d,l,p,g,x,y;if(this.parentContainer){var E=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(u),E.transformPoint(u.x,u.y,u),r=u.x,h=u.y,this.getTopRight(u),E.transformPoint(u.x,u.y,u),d=u.x,l=u.y,this.getBottomLeft(u),E.transformPoint(u.x,u.y,u),p=u.x,g=u.y,this.getBottomRight(u),E.transformPoint(u.x,u.y,u),x=u.x,y=u.y}else this.getTopLeft(u),r=u.x,h=u.y,this.getTopRight(u),d=u.x,l=u.y,this.getBottomLeft(u),p=u.x,g=u.y,this.getBottomRight(u),x=u.x,y=u.y;return u.x=Math.min(r,d,p,x),u.y=Math.min(h,l,g,y),u.width=Math.max(r,d,p,x)-u.x,u.height=Math.max(h,l,g,y)-u.y,u}};s.exports=o}),8573:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6858),m=e(80661),c={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o,u,r,h,d){return o===void 0&&(this.texture||this.shader||this.geom)&&(o=this),new a(this.scene,o,u,r,h,d)},createGeometryMask:function(o){return o===void 0&&(this.type==="Graphics"||this.geom)&&(o=this),new m(this.scene,o)}};s.exports=c}),27387:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,a){return e===void 0&&(e=.5),a===void 0&&(a=e),this.originX=e,this.originY=a,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,a){return e===void 0&&(e=0),a===void 0&&(a=e),this.displayOriginX=e,this.displayOriginY=a,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};s.exports=T}),37640:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39506),m=e(57355),c=e(35154),o=e(86353),u=e(26099),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(h,d){d===void 0&&(d=this.pathConfig);var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this.path=h,d&&this.startFollow(d),this},setRotateToPath:function(h,d){return d===void 0&&(d=0),this.rotateToPath=h,this.pathRotationOffset=d,this},isFollowing:function(){var h=this.pathTween;return h&&h.isPlaying()},startFollow:function(h,d){h===void 0&&(h={}),d===void 0&&(d=0);var l=this.pathTween;l&&l.isPlaying()&&l.stop(),typeof h=="number"&&(h={duration:h}),h.from=c(h,"from",0),h.to=c(h,"to",1);var p=m(h,"positionOnPath",!1);this.rotateToPath=m(h,"rotateToPath",!1),this.pathRotationOffset=c(h,"rotationOffset",0);var g=c(h,"startAt",d);if(g&&(h.onStart=function(y){var E=y.data[0];E.progress=g,E.elapsed=E.duration*g;var w=E.ease(E.progress);E.current=E.start+(E.end-E.start)*w,E.setTargetValue()}),this.pathOffset||(this.pathOffset=new u(this.x,this.y)),this.pathVector||(this.pathVector=new u),this.pathDelta||(this.pathDelta=new u),this.pathDelta.reset(),h.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(h),this.path.getStartPoint(this.pathOffset),p&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var x=this.path.getPoint(.1);this.rotation=Math.atan2(x.y-this.y,x.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=h,this},pauseFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.pause(),this},resumeFollow:function(){var h=this.pathTween;return h&&h.isPaused()&&h.resume(),this},stopFollow:function(){var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this},pathUpdate:function(){var h=this.pathTween;if(h&&h.data){var d=h.data[0],l=this.pathDelta,p=this.pathVector;if(l.copy(p).negate(),d.state===o.COMPLETE){this.path.getPoint(d.end,p),l.add(p),p.add(this.pathOffset),this.setPosition(p.x,p.y);return}else if(d.state!==o.PLAYING_FORWARD&&d.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(h.getValue(),p),l.add(p),p.add(this.pathOffset);var g=this.x,x=this.y;this.setPosition(p.x,p.y);var y=this.x-g,E=this.y-x;if(y===0&&E===0)return;if(d.state!==this._prevDirection){this._prevDirection=d.state;return}this.rotateToPath&&(this.rotation=Math.atan2(E,y)+a(this.pathRotationOffset))}}};s.exports=r}),72699:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),m={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(c){this.pipelineData={};var o=this.scene.sys.renderer;if(!o)return!1;var u=o.pipelines;if(u){c===void 0&&(c=u.default);var r=u.get(c);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(c,o,u){var r=this.scene.sys.renderer;if(!r)return this;var h=r.pipelines;if(h){var d=h.get(c);d&&(this.pipeline=d),o&&(this.pipelineData=u?a(o):o)}return this},setPipelineData:function(c,o){var u=this.pipelineData;return o===void 0?delete u[c]:u[c]=o,this},resetPipeline:function(c){return c===void 0&&(c=!1),this.pipeline=this.defaultPipeline,c&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};s.exports=m}),17581:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),m=e(47059),c=e(19133),o={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(u){this.postPipelines=[],this.postPipelineData={},this.postFX=new m(this,!0),u&&(this.preFX=new m(this,!1))},setPostPipeline:function(u,r,h){var d=this.scene.sys.renderer;if(!d)return this;var l=d.pipelines;if(l){Array.isArray(u)||(u=[u]);for(var p=0;p<u.length;p++){var g=l.getPostPipeline(u[p],this,r);g&&this.postPipelines.push(g)}r&&(this.postPipelineData=h?a(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(u,r){var h=this.postPipelineData;return r===void 0?delete h[u]:h[u]=r,this},getPostPipeline:function(u){for(var r=typeof u=="string",h=this.postPipelines,d=[],l=0;l<h.length;l++){var p=h[l];(r&&p.name===u||!r&&p instanceof u)&&d.push(p)}return d.length===1?d[0]:d},resetPostPipeline:function(u){u===void 0&&(u=!1);for(var r=this.postPipelines,h=0;h<r.length;h++)r[h].destroy();this.postPipelines=[],this.hasPostPipeline=!1,u&&(this.postPipelineData={})},removePostPipeline:function(u){for(var r=typeof u=="string",h=this.postPipelines,d=h.length-1;d>=0;d--){var l=h[d];(r&&l.name===u||!r&&l===u)&&(l.destroy(),c(h,d))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};s.exports=o}),80227:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,a){return a===void 0&&(a=e),this.scrollFactorX=e,this.scrollFactorY=a,this}};s.exports=T}),16736:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};s.exports=T}),37726:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4327),m=8,c={texture:null,frame:null,isCropped:!1,setTexture:function(o,u,r,h){return this.texture=this.scene.sys.textures.get(o),this.setFrame(u,r,h)},setFrame:function(o,u,r){return u===void 0&&(u=!0),r===void 0&&(r=!0),o instanceof a?(this.texture=this.scene.sys.textures.get(o.texture.key),this.frame=o):this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~m:this.renderFlags|=m,this._sizeComponent&&u&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};s.exports=c}),79812:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4327),m=8,c={texture:null,frame:null,isCropped:!1,setCrop:function(o,u,r,h){if(o===void 0)this.isCropped=!1;else if(this.frame){if(typeof o=="number")this.frame.setCropUVs(this._crop,o,u,r,h,this.flipX,this.flipY);else{var d=o;this.frame.setCropUVs(this._crop,d.x,d.y,d.width,d.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(o,u){return this.texture=this.scene.sys.textures.get(o),this.setFrame(u)},setFrame:function(o,u,r){return u===void 0&&(u=!0),r===void 0&&(r=!0),o instanceof a?(this.texture=this.scene.sys.textures.get(o.texture.key),this.frame=o):this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~m:this.renderFlags|=m,this._sizeComponent&&u&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};s.exports=c}),27472:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,a,m,c){return e===void 0&&(e=16777215),a===void 0&&(a=e,m=e,c=e),this.tintTopLeft=e,this.tintTopRight=a,this.tintBottomLeft=m,this.tintBottomRight=c,this.tintFill=!1,this},setTintFill:function(e,a,m,c){return this.setTint(e,a,m,c),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};s.exports=T}),53774:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(a.textureKey=e.texture.key,a.frameKey=e.frame.name),a};s.exports=T}),16901:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=e(61340),c=e(85955),o=e(86554),u=e(30954),r=e(26099),h=4,d={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(l){this._scaleX=l,this._scaleY=l,l===0?this.renderFlags&=~h:this.renderFlags|=h}},scaleX:{get:function(){return this._scaleX},set:function(l){this._scaleX=l,l===0?this.renderFlags&=~h:this._scaleY!==0&&(this.renderFlags|=h)}},scaleY:{get:function(){return this._scaleY},set:function(l){this._scaleY=l,l===0?this.renderFlags&=~h:this._scaleX!==0&&(this.renderFlags|=h)}},angle:{get:function(){return u(this._rotation*a.RAD_TO_DEG)},set:function(l){this.rotation=u(l)*a.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=o(l)}},setPosition:function(l,p,g,x){return l===void 0&&(l=0),p===void 0&&(p=l),g===void 0&&(g=0),x===void 0&&(x=0),this.x=l,this.y=p,this.z=g,this.w=x,this},copyPosition:function(l){return l.x!==void 0&&(this.x=l.x),l.y!==void 0&&(this.y=l.y),l.z!==void 0&&(this.z=l.z),l.w!==void 0&&(this.w=l.w),this},setRandomPosition:function(l,p,g,x){return l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=this.scene.sys.scale.width),x===void 0&&(x=this.scene.sys.scale.height),this.x=l+Math.random()*g,this.y=p+Math.random()*x,this},setRotation:function(l){return l===void 0&&(l=0),this.rotation=l,this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,this},setScale:function(l,p){return l===void 0&&(l=1),p===void 0&&(p=l),this.scaleX=l,this.scaleY=p,this},setX:function(l){return l===void 0&&(l=0),this.x=l,this},setY:function(l){return l===void 0&&(l=0),this.y=l,this},setZ:function(l){return l===void 0&&(l=0),this.z=l,this},setW:function(l){return l===void 0&&(l=0),this.w=l,this},getLocalTransformMatrix:function(l){return l===void 0&&(l=new m),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(l,p){l===void 0&&(l=new m);var g=this.parentContainer;if(!g)return this.getLocalTransformMatrix(l);var x=!1;for(p||(p=new m,x=!0),l.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);g;)p.applyITRS(g.x,g.y,g._rotation,g._scaleX,g._scaleY),p.multiply(l,l),g=g.parentContainer;return x&&p.destroy(),l},getLocalPoint:function(l,p,g,x){g||(g=new r),x||(x=this.scene.sys.cameras.main);var y=x.scrollX,E=x.scrollY,w=l+y*this.scrollFactorX-y,C=p+E*this.scrollFactorY-E;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(w,C,g):c(w,C,this.x,this.y,this.rotation,this.scaleX,this.scaleY,g),this._originComponent&&(g.x+=this._displayOriginX,g.y+=this._displayOriginY),g},getWorldPoint:function(l,p,g){l===void 0&&(l=new r);var x=this.parentContainer;if(!x)return l.x=this.x,l.y=this.y,l;var y=this.getWorldTransformMatrix(p,g);return l.x=y.tx,l.y=y.ty,l},getParentRotation:function(){for(var l=0,p=this.parentContainer;p;)l+=p.rotation,p=p.parentContainer;return l}};s.exports=d}),61340:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(36383),c=e(26099),o=new a({initialize:function(r,h,d,l,p,g){r===void 0&&(r=1),h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=1),p===void 0&&(p=0),g===void 0&&(g=0),this.matrix=new Float32Array([r,h,d,l,p,g,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(u){this.matrix[0]=u}},b:{get:function(){return this.matrix[1]},set:function(u){this.matrix[1]=u}},c:{get:function(){return this.matrix[2]},set:function(u){this.matrix[2]=u}},d:{get:function(){return this.matrix[3]},set:function(u){this.matrix[3]=u}},e:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},f:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},tx:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},ty:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var u=this.matrix,r=u[0],h=u[1],d=u[2],l=u[3];return r||h?h>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):d||l?m.TAU-(l>0?Math.acos(-d/this.scaleY):-Math.acos(d/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var u=this.matrix;return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0,this},translate:function(u,r){var h=this.matrix;return h[4]=h[0]*u+h[2]*r+h[4],h[5]=h[1]*u+h[3]*r+h[5],this},scale:function(u,r){var h=this.matrix;return h[0]*=u,h[1]*=u,h[2]*=r,h[3]*=r,this},rotate:function(u){var r=Math.sin(u),h=Math.cos(u),d=this.matrix,l=d[0],p=d[1],g=d[2],x=d[3];return d[0]=l*h+g*r,d[1]=p*h+x*r,d[2]=l*-r+g*h,d[3]=p*-r+x*h,this},multiply:function(u,r){var h=this.matrix,d=u.matrix,l=h[0],p=h[1],g=h[2],x=h[3],y=h[4],E=h[5],w=d[0],C=d[1],A=d[2],M=d[3],R=d[4],P=d[5],b=r===void 0?h:r.matrix;return b[0]=w*l+C*g,b[1]=w*p+C*x,b[2]=A*l+M*g,b[3]=A*p+M*x,b[4]=R*l+P*g+y,b[5]=R*p+P*x+E,b},multiplyWithOffset:function(u,r,h){var d=this.matrix,l=u.matrix,p=d[0],g=d[1],x=d[2],y=d[3],E=d[4],w=d[5],C=r*p+h*x+E,A=r*g+h*y+w,M=l[0],R=l[1],P=l[2],b=l[3],F=l[4],I=l[5];return d[0]=M*p+R*x,d[1]=M*g+R*y,d[2]=P*p+b*x,d[3]=P*g+b*y,d[4]=F*p+I*x+C,d[5]=F*g+I*y+A,this},transform:function(u,r,h,d,l,p){var g=this.matrix,x=g[0],y=g[1],E=g[2],w=g[3],C=g[4],A=g[5];return g[0]=u*x+r*E,g[1]=u*y+r*w,g[2]=h*x+d*E,g[3]=h*y+d*w,g[4]=l*x+p*E+C,g[5]=l*y+p*w+A,this},transformPoint:function(u,r,h){h===void 0&&(h={x:0,y:0});var d=this.matrix,l=d[0],p=d[1],g=d[2],x=d[3],y=d[4],E=d[5];return h.x=u*l+r*g+y,h.y=u*p+r*x+E,h},invert:function(){var u=this.matrix,r=u[0],h=u[1],d=u[2],l=u[3],p=u[4],g=u[5],x=r*l-h*d;return u[0]=l/x,u[1]=-h/x,u[2]=-d/x,u[3]=r/x,u[4]=(d*g-l*p)/x,u[5]=-(r*g-h*p)/x,this},copyFrom:function(u){var r=this.matrix;return r[0]=u.a,r[1]=u.b,r[2]=u.c,r[3]=u.d,r[4]=u.e,r[5]=u.f,this},copyFromArray:function(u){var r=this.matrix;return r[0]=u[0],r[1]=u[1],r[2]=u[2],r[3]=u[3],r[4]=u[4],r[5]=u[5],this},copyToContext:function(u){var r=this.matrix;return u.transform(r[0],r[1],r[2],r[3],r[4],r[5]),u},setToContext:function(u){return u.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),u},copyToArray:function(u){var r=this.matrix;return u===void 0?u=[r[0],r[1],r[2],r[3],r[4],r[5]]:(u[0]=r[0],u[1]=r[1],u[2]=r[2],u[3]=r[3],u[4]=r[4],u[5]=r[5]),u},setTransform:function(u,r,h,d,l,p){var g=this.matrix;return g[0]=u,g[1]=r,g[2]=h,g[3]=d,g[4]=l,g[5]=p,this},decomposeMatrix:function(){var u=this.decomposedMatrix,r=this.matrix,h=r[0],d=r[1],l=r[2],p=r[3],g=h*p-d*l;if(u.translateX=r[4],u.translateY=r[5],h||d){var x=Math.sqrt(h*h+d*d);u.rotation=d>0?Math.acos(h/x):-Math.acos(h/x),u.scaleX=x,u.scaleY=g/x}else if(l||p){var y=Math.sqrt(l*l+p*p);u.rotation=Math.PI*.5-(p>0?Math.acos(-l/y):-Math.acos(l/y)),u.scaleX=g/y,u.scaleY=y}else u.rotation=0,u.scaleX=0,u.scaleY=0;return u},applyITRS:function(u,r,h,d,l){var p=this.matrix,g=Math.sin(h),x=Math.cos(h);return p[4]=u,p[5]=r,p[0]=x*d,p[1]=g*d,p[2]=-g*l,p[3]=x*l,this},applyInverse:function(u,r,h){h===void 0&&(h=new c);var d=this.matrix,l=d[0],p=d[1],g=d[2],x=d[3],y=d[4],E=d[5],w=1/(l*x+g*-p);return h.x=x*w*u+-g*w*r+(E*g-y*x)*w,h.y=l*w*r+-p*w*u+(-E*l+y*p)*w,h},setQuad:function(u,r,h,d,l,p){l===void 0&&(l=!1),p===void 0&&(p=this.quad);var g=this.matrix,x=g[0],y=g[1],E=g[2],w=g[3],C=g[4],A=g[5],M=u*x+r*E+C,R=u*y+r*w+A,P=u*x+d*E+C,b=u*y+d*w+A,F=h*x+d*E+C,I=h*y+d*w+A,L=h*x+r*E+C,D=h*y+r*w+A;if(l){var O=Math.floor(M+.5),z=Math.floor(R+.5),W=O-M,k=z-R;p[0]=O,p[1]=z,p[2]=P+W,p[3]=b+k,p[4]=F+W,p[5]=I+k,p[6]=L+W,p[7]=D+k}else p[0]=M,p[1]=R,p[2]=P,p[3]=b,p[4]=F,p[5]=I,p[6]=L,p[7]=D;return p},getX:function(u,r){return u*this.a+r*this.c+this.e},getY:function(u,r){return u*this.b+r*this.d+this.f},getXRound:function(u,r,h){var d=this.getX(u,r);return h&&(d=Math.floor(d+.5)),d},getYRound:function(u,r,h){var d=this.getY(u,r);return h&&(d=Math.floor(d+.5)),d},getCSSMatrix:function(){var u=this.matrix;return"matrix("+u[0]+","+u[1]+","+u[2]+","+u[3]+","+u[4]+","+u[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});s.exports=o}),59715:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(a){a?(this._visible=!0,this.renderFlags|=T):(this._visible=!1,this.renderFlags&=~T)}},setVisible:function(a){return this.visible=a,this}};s.exports=e}),31401:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Alpha:e(16005),AlphaSingle:e(88509),BlendMode:e(90065),ComputedSize:e(94215),Crop:e(61683),Depth:e(89272),Flip:e(54434),FX:e(47059),GetBounds:e(8004),Mask:e(8573),Origin:e(27387),PathFollower:e(37640),Pipeline:e(72699),PostPipeline:e(17581),ScrollFactor:e(80227),Size:e(16736),Texture:e(37726),TextureCrop:e(79812),Tint:e(27472),ToJSON:e(53774),Transform:e(16901),TransformMatrix:e(61340),Visible:e(59715)}}),31559:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),m=e(10312),c=e(83419),o=e(31401),u=e(51708),r=e(95643),h=e(87841),d=e(29959),l=e(36899),p=e(26099),g=new o.TransformMatrix,x=new c({Extends:r,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.PostPipeline,o.Transform,o.Visible,d],initialize:function(E,w,C,A){r.call(this,E,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this._sortKey="",this._sysEvents=E.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(w,C),this.setBlendMode(m.SKIP_CHECK),A&&this.add(A)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(y){return y===void 0&&(y=!0),this.exclusive=y,this},getBounds:function(y){if(y===void 0&&(y=new h),y.setTo(this.x,this.y,0,0),this.parentContainer){var E=this.parentContainer.getBoundsTransformMatrix(),w=E.transformPoint(this.x,this.y);y.setTo(w.x,w.y,0,0)}if(this.list.length>0){var C=this.list,A=new h,M=!1;y.setEmpty();for(var R=0;R<C.length;R++){var P=C[R];P.getBounds&&(P.getBounds(A),M?l(A,y,y):(y.setTo(A.x,A.y,A.width,A.height),M=!0))}}return y},addHandler:function(y){y.once(u.DESTROY,this.onChildDestroyed,this),this.exclusive&&(y.parentContainer&&y.parentContainer.remove(y),y.parentContainer=this,y.removeFromDisplayList(),y.addedToScene())},removeHandler:function(y){y.off(u.DESTROY,this.remove,this),this.exclusive&&(y.parentContainer=null,y.removedFromScene(),y.addToDisplayList())},pointToContainer:function(y,E){E===void 0&&(E=new p),this.parentContainer?this.parentContainer.pointToContainer(y,E):(E.x=y.x,E.y=y.y);var w=g;return w.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),w.invert(),w.transformPoint(y.x,y.y,E),E},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(g,this.localTransform)},add:function(y){return a.Add(this.list,y,this.maxSize,this.addHandler,this),this},addAt:function(y,E){return a.AddAt(this.list,y,E,this.maxSize,this.addHandler,this),this},getAt:function(y){return this.list[y]},getIndex:function(y){return this.list.indexOf(y)},sort:function(y,E){return y?(E===void 0&&(E=function(w,C){return w[y]-C[y]}),a.StableSort(this.list,E),this):this},getByName:function(y){return a.GetFirst(this.list,"name",y)},getRandom:function(y,E){return a.GetRandom(this.list,y,E)},getFirst:function(y,E,w,C){return a.GetFirst(this.list,y,E,w,C)},getAll:function(y,E,w,C){return a.GetAll(this.list,y,E,w,C)},count:function(y,E,w,C){return a.CountAllMatching(this.list,y,E,w,C)},swap:function(y,E){return a.Swap(this.list,y,E),this},moveTo:function(y,E){return a.MoveTo(this.list,y,E),this},moveAbove:function(y,E){return a.MoveAbove(this.list,y,E),this},moveBelow:function(y,E){return a.MoveBelow(this.list,y,E),this},remove:function(y,E){var w=a.Remove(this.list,y,this.removeHandler,this);if(E&&w){Array.isArray(w)||(w=[w]);for(var C=0;C<w.length;C++)w[C].destroy()}return this},removeAt:function(y,E){var w=a.RemoveAt(this.list,y,this.removeHandler,this);return E&&w&&w.destroy(),this},removeBetween:function(y,E,w){var C=a.RemoveBetween(this.list,y,E,this.removeHandler,this);if(w)for(var A=0;A<C.length;A++)C[A].destroy();return this},removeAll:function(y){var E=this.list;if(y){for(var w=0;w<E.length;w++)E[w]&&E[w].scene&&(E[w].off(u.DESTROY,this.onChildDestroyed,this),E[w].destroy());this.list=[]}else a.RemoveBetween(E,0,E.length,this.removeHandler,this);return this},bringToTop:function(y){return a.BringToTop(this.list,y),this},sendToBack:function(y){return a.SendToBack(this.list,y),this},moveUp:function(y){return a.MoveUp(this.list,y),this},moveDown:function(y){return a.MoveDown(this.list,y),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(y,E,w){var C=a.Replace(this.list,y,E);return C&&(this.addHandler(E),this.removeHandler(y),w&&y.destroy()),this},exists:function(y){return this.list.indexOf(y)>-1},setAll:function(y,E,w,C){return a.SetAll(this.list,y,E,w,C),this},each:function(y,E){var w=[null],C,A=this.list.slice(),M=A.length;for(C=2;C<arguments.length;C++)w.push(arguments[C]);for(C=0;C<M;C++)w[0]=A[C],y.apply(E,w);return this},iterate:function(y,E){var w=[null],C;for(C=2;C<arguments.length;C++)w.push(arguments[C]);for(C=0;C<this.list.length;C++)w[0]=this.list[C],y.apply(E,w);return this},setScrollFactor:function(y,E,w){return E===void 0&&(E=y),w===void 0&&(w=!1),this.scrollFactorX=y,this.scrollFactorY=E,w&&(a.SetAll(this.list,"scrollFactorX",y),a.SetAll(this.list,"scrollFactorY",E)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(y){a.Remove(this.list,y),this.exclusive&&(y.parentContainer=null,y.removedFromScene())}});s.exports=x}),53584:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m.addToRenderList(a);var o=a.list;if(o.length!==0){var u=a.localTransform;c?(u.loadIdentity(),u.multiply(c),u.translate(a.x,a.y),u.rotate(a.rotation),u.scale(a.scaleX,a.scaleY)):u.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var r=a.blendMode!==-1;r||e.setBlendMode(0);var h=a._alpha,d=a.scrollFactorX,l=a.scrollFactorY;a.mask&&a.mask.preRenderCanvas(e,null,m);for(var p=0;p<o.length;p++){var g=o[p];if(g.willRender(m)){var x=g.alpha,y=g.scrollFactorX,E=g.scrollFactorY;!r&&g.blendMode!==e.currentBlendMode&&e.setBlendMode(g.blendMode),g.setScrollFactor(y*d,E*l),g.setAlpha(x*h),g.renderCanvas(e,g,m,u),g.setAlpha(x),g.setScrollFactor(y,E)}}a.mask&&a.mask.postRenderCanvas(e)}};s.exports=T}),77143:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(31559),c=e(44603),o=e(23568),u=e(95540);c.register("container",function(r,h){r===void 0&&(r={});var d=o(r,"x",0),l=o(r,"y",0),p=u(r,"children",null),g=new m(this.scene,d,l,p);return h!==void 0&&(r.add=h),a(this.scene,g,r),g})}),24961:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31559),m=e(39429);m.register("container",function(c,o,u){return this.displayList.add(new a(this.scene,c,o,u))})}),29959:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(72249),c=e(53584),s.exports={renderWebGL:m,renderCanvas:c}}),72249:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m.addToRenderList(a);var o=a.list,u=o.length;if(u!==0){var r=a.localTransform;c?(r.loadIdentity(),r.multiply(c),r.translate(a.x,a.y),r.rotate(a.rotation),r.scale(a.scaleX,a.scaleY)):r.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),e.pipelines.preBatch(a);var h=a.blendMode!==-1;h||e.setBlendMode(0);for(var d=a.alpha,l=a.scrollFactorX,p=a.scrollFactorY,g=0;g<u;g++){var x=o[g];if(x.willRender(m)){var y,E,w,C;if(x.alphaTopLeft!==void 0)y=x.alphaTopLeft,E=x.alphaTopRight,w=x.alphaBottomLeft,C=x.alphaBottomRight;else{var A=x.alpha;y=A,E=A,w=A,C=A}var M=x.scrollFactorX,R=x.scrollFactorY;!h&&x.blendMode!==e.currentBlendMode&&e.setBlendMode(x.blendMode);var P=x.mask;P&&P.preRenderWebGL(e,x,m);var b=x.type;b!==e.currentType&&(e.newType=!0,e.currentType=b),e.nextTypeMatch=g<u-1?o[g+1].type===e.currentType:!1,x.setScrollFactor(M*l,R*p),x.setAlpha(y*d,E*d,w*d,C*d),x.renderWebGL(e,x,m,r,a),x.setAlpha(y,E,w,C),x.setScrollFactor(M,R),P&&P.postRenderWebGL(e,m),e.newType=!1}}e.pipelines.postBatch(a)}};s.exports=T}),47407:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}),3069:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(441),o=e(95643),u=e(41212),r=e(35846),h=e(44594),d=e(61369),l=new a({Extends:o,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Origin,m.ScrollFactor,m.Transform,m.Visible,c],initialize:function(g,x,y,E,w,C){if(o.call(this,g,"DOMElement"),this.parent=g.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=g.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(x,y),typeof E=="string"?E[0]==="#"?this.setElement(E.substr(1),w,C):this.createElement(E,w,C):E&&this.setElement(E,w,C),g.sys.events.on(h.SLEEP,this.handleSceneEvent,this),g.sys.events.on(h.WAKE,this.handleSceneEvent,this),g.sys.events.on(h.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(p){var g=this.node,x=g.style;g&&(x.display=p.settings.visible?"block":"none")},setSkew:function(p,g){return p===void 0&&(p=0),g===void 0&&(g=p),this.skewX=p,this.skewY=g,this},setPerspective:function(p){return this.parent.style.perspective=p+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(p){this.parent.style.perspective=p+"px"}},addListener:function(p){if(this.node){p=p.split(" ");for(var g=0;g<p.length;g++)this.node.addEventListener(p[g],this.handler,!1)}return this},removeListener:function(p){if(this.node){p=p.split(" ");for(var g=0;g<p.length;g++)this.node.removeEventListener(p[g],this.handler)}return this},dispatchNativeEvent:function(p){this.emit(p.type,p)},createElement:function(p,g,x){return this.setElement(document.createElement(p),g,x)},setElement:function(p,g,x){this.removeElement();var y;if(typeof p=="string"?(p[0]==="#"&&(p=p.substr(1)),y=document.getElementById(p)):typeof p=="object"&&p.nodeType===1&&(y=p),!y)return this;if(this.node=y,g&&u(g))for(var E in g)y.style[E]=g[E];else typeof g=="string"&&(y.style=g);return y.style.zIndex="0",y.style.display="inline",y.style.position="absolute",y.phaser=this,this.parent.appendChild(y),x&&(y.innerText=x),this.updateSize()},createFromCache:function(p,g){var x=this.cache.get(p);return x&&this.createFromHTML(x,g),this},createFromHTML:function(p,g){g===void 0&&(g="div"),this.removeElement();var x=document.createElement(g);return this.node=x,x.style.zIndex="0",x.style.display="inline",x.style.position="absolute",x.phaser=this,this.parent.appendChild(x),x.innerHTML=p,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var p=this.node;return this.width=p.clientWidth,this.height=p.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(p,g){if(this.node){for(var x=this.node.querySelectorAll("*"),y=0;y<x.length;y++)if(x[y][p]===g)return x[y]}return null},getChildByID:function(p){return this.getChildByProperty("id",p)},getChildByName:function(p){return this.getChildByProperty("name",p)},setClassName:function(p){return this.node&&(this.node.className=p,this.updateSize()),this},setText:function(p){return this.node&&(this.node.innerText=p,this.updateSize()),this},setHTML:function(p){return this.node&&(this.node.innerHTML=p,this.updateSize()),this},preRender:function(){var p=this.parentContainer,g=this.node;g&&p&&!p.willRender()&&(g.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(h.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(h.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(h.PRE_RENDER,this.preRender,this)}});s.exports=l}),49381:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47407),m=e(95643),c=e(61340),o=new c,u=new c,r=new c,h=function(d,l,p,g){if(l.node){var x=l.node.style,y=l.scene.sys.settings;if(!x||!y.visible||m.RENDER_MASK!==l.renderFlags||l.cameraFilter!==0&&l.cameraFilter&p.id||l.parentContainer&&!l.parentContainer.willRender()){x.display="none";return}var E=l.parentContainer,w=p.alpha*l.alpha;E&&(w*=E.alpha);var C=o,A=u,M=r,R=0,P=0,b="0%",F="0%";g?(R=l.width*l.scaleX*l.originX,P=l.height*l.scaleY*l.originY,A.applyITRS(l.x-R,l.y-P,l.rotation,l.scaleX,l.scaleY),C.copyFrom(p.matrix),C.multiplyWithOffset(g,-p.scrollX*l.scrollFactorX,-p.scrollY*l.scrollFactorY),A.e=l.x-R,A.f=l.y-P,C.multiply(A,M)):(R=l.width*l.originX,P=l.height*l.originY,A.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),C.copyFrom(p.matrix),b=100*l.originX+"%",F=100*l.originY+"%",A.e-=p.scrollX*l.scrollFactorX,A.f-=p.scrollY*l.scrollFactorY,C.multiply(A,M),M.e-=R,M.f-=P),l.transformOnly||(x.display="block",x.opacity=w,x.zIndex=l._depth,x.pointerEvents=l.pointerEvents,x.mixBlendMode=a[l._blendMode]),x.transform=M.getCSSMatrix()+" skew("+l.skewX+"rad, "+l.skewY+"rad) rotate3d("+l.rotate3d.x+","+l.rotate3d.y+","+l.rotate3d.z+","+l.rotate3d.w+l.rotate3dAngle+")",x.transformOrigin=b+" "+F}};s.exports=h}),2611:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3069),m=e(39429);m.register("dom",function(c,o,u,r,h){var d=new a(this.scene,c,o,u,r,h);return this.displayList.add(d),d})}),441:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(49381),c=e(49381),s.exports={renderWebGL:m,renderCanvas:c}}),62980:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addedtoscene"}),41337:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),44947:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removedfromscene"}),49358:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),35163:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="created"}),97249:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="error"}),19483:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="locked"}),56059:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="loop"}),26772:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="metadata"}),64437:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="playing"}),83411:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="play"}),75780:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="seeked"}),67799:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="seeking"}),63500:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stalled"}),55541:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stop"}),53208:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="textureready"}),4992:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="unlocked"}),12:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="unsupported"}),51708:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADDED_TO_SCENE:e(62980),DESTROY:e(41337),REMOVED_FROM_SCENE:e(44947),VIDEO_COMPLETE:e(49358),VIDEO_CREATED:e(35163),VIDEO_ERROR:e(97249),VIDEO_LOCKED:e(19483),VIDEO_LOOP:e(56059),VIDEO_METADATA:e(26772),VIDEO_PLAY:e(83411),VIDEO_PLAYING:e(64437),VIDEO_SEEKED:e(75780),VIDEO_SEEKING:e(67799),VIDEO_STALLED:e(63500),VIDEO_STOP:e(55541),VIDEO_TEXTURE:e(53208),VIDEO_UNLOCKED:e(4992),VIDEO_UNSUPPORTED:e(12)}}),42421:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(95643),o=e(64993),u=new a({Extends:c,Mixins:[m.Alpha,m.BlendMode,m.Depth,m.Flip,m.Origin,m.ScrollFactor,m.Size,m.Texture,m.Tint,m.Transform,m.Visible,o],initialize:function(h){c.call(this,h,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});s.exports=u}),70217:(()=>{}),56315:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42421),m=e(39429);m.register("extern",function(){var c=new a(this.scene);return this.displayList.add(c),c})}),64993:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(80287),c=e(70217),s.exports={renderWebGL:m,renderCanvas:c}}),80287:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=function(c,o,u,r){c.pipelines.clear();var h=a(o,u,r).calc;o.render.call(o,c,u,h),c.pipelines.rebind()};s.exports=m}),85592:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}}),43831:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71911),m=e(83419),c=e(85592),o=e(31401),u=e(8497),r=e(95643),h=e(95540),d=e(35154),l=e(36383),p=e(84503),g=new m({Extends:r,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.PostPipeline,o.Transform,o.Visible,o.ScrollFactor,p],initialize:function(y,E){var w=d(E,"x",0),C=d(E,"y",0);r.call(this,y,"Graphics"),this.setPosition(w,C),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(E)},setDefaultStyles:function(x){return d(x,"lineStyle",null)&&(this.defaultStrokeWidth=d(x,"lineStyle.width",1),this.defaultStrokeColor=d(x,"lineStyle.color",16777215),this.defaultStrokeAlpha=d(x,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),d(x,"fillStyle",null)&&(this.defaultFillColor=d(x,"fillStyle.color",16777215),this.defaultFillAlpha=d(x,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(x,y,E){return E===void 0&&(E=1),this.commandBuffer.push(c.LINE_STYLE,x,y,E),this._lineWidth=x,this},fillStyle:function(x,y){return y===void 0&&(y=1),this.commandBuffer.push(c.FILL_STYLE,x,y),this},fillGradientStyle:function(x,y,E,w,C,A,M,R){return C===void 0&&(C=1),A===void 0&&(A=C),M===void 0&&(M=C),R===void 0&&(R=C),this.commandBuffer.push(c.GRADIENT_FILL_STYLE,C,A,M,R,x,y,E,w),this},lineGradientStyle:function(x,y,E,w,C,A){return A===void 0&&(A=1),this.commandBuffer.push(c.GRADIENT_LINE_STYLE,x,A,y,E,w,C),this},beginPath:function(){return this.commandBuffer.push(c.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(c.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(c.FILL_PATH),this},fill:function(){return this.commandBuffer.push(c.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(c.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(c.STROKE_PATH),this},fillCircleShape:function(x){return this.fillCircle(x.x,x.y,x.radius)},strokeCircleShape:function(x){return this.strokeCircle(x.x,x.y,x.radius)},fillCircle:function(x,y,E){return this.beginPath(),this.arc(x,y,E,0,l.PI2),this.fillPath(),this},strokeCircle:function(x,y,E){return this.beginPath(),this.arc(x,y,E,0,l.PI2),this.strokePath(),this},fillRectShape:function(x){return this.fillRect(x.x,x.y,x.width,x.height)},strokeRectShape:function(x){return this.strokeRect(x.x,x.y,x.width,x.height)},fillRect:function(x,y,E,w){return this.commandBuffer.push(c.FILL_RECT,x,y,E,w),this},strokeRect:function(x,y,E,w){var C=this._lineWidth/2,A=x-C,M=x+C;return this.beginPath(),this.moveTo(x,y),this.lineTo(x,y+w),this.strokePath(),this.beginPath(),this.moveTo(x+E,y),this.lineTo(x+E,y+w),this.strokePath(),this.beginPath(),this.moveTo(A,y),this.lineTo(M+E,y),this.strokePath(),this.beginPath(),this.moveTo(A,y+w),this.lineTo(M+E,y+w),this.strokePath(),this},fillRoundedRect:function(x,y,E,w,C){C===void 0&&(C=20);var A=C,M=C,R=C,P=C;typeof C!="number"&&(A=h(C,"tl",20),M=h(C,"tr",20),R=h(C,"bl",20),P=h(C,"br",20));var b=A>=0,F=M>=0,I=R>=0,L=P>=0;return A=Math.abs(A),M=Math.abs(M),R=Math.abs(R),P=Math.abs(P),this.beginPath(),this.moveTo(x+A,y),this.lineTo(x+E-M,y),F?this.arc(x+E-M,y+M,M,-l.TAU,0):this.arc(x+E,y,M,Math.PI,l.TAU,!0),this.lineTo(x+E,y+w-P),L?this.arc(x+E-P,y+w-P,P,0,l.TAU):this.arc(x+E,y+w,P,-l.TAU,Math.PI,!0),this.lineTo(x+R,y+w),I?this.arc(x+R,y+w-R,R,l.TAU,Math.PI):this.arc(x,y+w,R,0,-l.TAU,!0),this.lineTo(x,y+A),b?this.arc(x+A,y+A,A,-Math.PI,-l.TAU):this.arc(x,y,A,l.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(x,y,E,w,C){C===void 0&&(C=20);var A=C,M=C,R=C,P=C,b=Math.min(E,w)/2;typeof C!="number"&&(A=h(C,"tl",20),M=h(C,"tr",20),R=h(C,"bl",20),P=h(C,"br",20));var F=A>=0,I=M>=0,L=R>=0,D=P>=0;return A=Math.min(Math.abs(A),b),M=Math.min(Math.abs(M),b),R=Math.min(Math.abs(R),b),P=Math.min(Math.abs(P),b),this.beginPath(),this.moveTo(x+A,y),this.lineTo(x+E-M,y),this.moveTo(x+E-M,y),I?this.arc(x+E-M,y+M,M,-l.TAU,0):this.arc(x+E,y,M,Math.PI,l.TAU,!0),this.lineTo(x+E,y+w-P),this.moveTo(x+E,y+w-P),D?this.arc(x+E-P,y+w-P,P,0,l.TAU):this.arc(x+E,y+w,P,-l.TAU,Math.PI,!0),this.lineTo(x+R,y+w),this.moveTo(x+R,y+w),L?this.arc(x+R,y+w-R,R,l.TAU,Math.PI):this.arc(x,y+w,R,0,-l.TAU,!0),this.lineTo(x,y+A),this.moveTo(x,y+A),F?this.arc(x+A,y+A,A,-Math.PI,-l.TAU):this.arc(x,y,A,l.TAU,0,!0),this.strokePath(),this},fillPointShape:function(x,y){return this.fillPoint(x.x,x.y,y)},fillPoint:function(x,y,E){return!E||E<1?E=1:(x-=E/2,y-=E/2),this.commandBuffer.push(c.FILL_RECT,x,y,E,E),this},fillTriangleShape:function(x){return this.fillTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,x.y3)},strokeTriangleShape:function(x){return this.strokeTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,x.y3)},fillTriangle:function(x,y,E,w,C,A){return this.commandBuffer.push(c.FILL_TRIANGLE,x,y,E,w,C,A),this},strokeTriangle:function(x,y,E,w,C,A){return this.commandBuffer.push(c.STROKE_TRIANGLE,x,y,E,w,C,A),this},strokeLineShape:function(x){return this.lineBetween(x.x1,x.y1,x.x2,x.y2)},lineBetween:function(x,y,E,w){return this.beginPath(),this.moveTo(x,y),this.lineTo(E,w),this.strokePath(),this},lineTo:function(x,y){return this.commandBuffer.push(c.LINE_TO,x,y),this},moveTo:function(x,y){return this.commandBuffer.push(c.MOVE_TO,x,y),this},strokePoints:function(x,y,E,w){y===void 0&&(y=!1),E===void 0&&(E=!1),w===void 0&&(w=x.length),this.beginPath(),this.moveTo(x[0].x,x[0].y);for(var C=1;C<w;C++)this.lineTo(x[C].x,x[C].y);return y&&this.lineTo(x[0].x,x[0].y),E&&this.closePath(),this.strokePath(),this},fillPoints:function(x,y,E,w){y===void 0&&(y=!1),E===void 0&&(E=!1),w===void 0&&(w=x.length),this.beginPath(),this.moveTo(x[0].x,x[0].y);for(var C=1;C<w;C++)this.lineTo(x[C].x,x[C].y);return y&&this.lineTo(x[0].x,x[0].y),E&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(x,y){y===void 0&&(y=32);var E=x.getPoints(y);return this.strokePoints(E,!0)},strokeEllipse:function(x,y,E,w,C){C===void 0&&(C=32);var A=new u(x,y,E,w),M=A.getPoints(C);return this.strokePoints(M,!0)},fillEllipseShape:function(x,y){y===void 0&&(y=32);var E=x.getPoints(y);return this.fillPoints(E,!0)},fillEllipse:function(x,y,E,w,C){C===void 0&&(C=32);var A=new u(x,y,E,w),M=A.getPoints(C);return this.fillPoints(M,!0)},arc:function(x,y,E,w,C,A,M){return A===void 0&&(A=!1),M===void 0&&(M=0),this.commandBuffer.push(c.ARC,x,y,E,w,C,A,M),this},slice:function(x,y,E,w,C,A,M){return A===void 0&&(A=!1),M===void 0&&(M=0),this.commandBuffer.push(c.BEGIN_PATH),this.commandBuffer.push(c.MOVE_TO,x,y),this.commandBuffer.push(c.ARC,x,y,E,w,C,A,M),this.commandBuffer.push(c.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(c.SAVE),this},restore:function(){return this.commandBuffer.push(c.RESTORE),this},translateCanvas:function(x,y){return this.commandBuffer.push(c.TRANSLATE,x,y),this},scaleCanvas:function(x,y){return this.commandBuffer.push(c.SCALE,x,y),this},rotateCanvas:function(x){return this.commandBuffer.push(c.ROTATE,x),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(x,y,E){var w=this.scene.sys,C=w.game.renderer;y===void 0&&(y=w.scale.width),E===void 0&&(E=w.scale.height),g.TargetCamera.setScene(this.scene),g.TargetCamera.setViewport(0,0,y,E),g.TargetCamera.scrollX=this.x,g.TargetCamera.scrollY=this.y;var A,M,R={willReadFrequently:!0};if(typeof x=="string")if(w.textures.exists(x)){A=w.textures.get(x);var P=A.getSourceImage();P instanceof HTMLCanvasElement&&(M=P.getContext("2d",R))}else A=w.textures.createCanvas(x,y,E),M=A.getSourceImage().getContext("2d",R);else x instanceof HTMLCanvasElement&&(M=x.getContext("2d",R));return M&&(this.renderCanvas(C,this,g.TargetCamera,null,M,!1),A&&A.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});g.TargetCamera=new a,s.exports=g}),32768:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85592),m=e(20926),c=function(o,u,r,h,d,l){var p=u.commandBuffer,g=p.length,x=d||o.currentContext;if(!(g===0||!m(o,x,u,r,h))){r.addToRenderList(u);var y=1,E=1,w=0,C=0,A=1,M=0,R=0,P=0;x.beginPath();for(var b=0;b<g;++b){var F=p[b];switch(F){case a.ARC:x.arc(p[b+1],p[b+2],p[b+3],p[b+4],p[b+5],p[b+6]),b+=7;break;case a.LINE_STYLE:A=p[b+1],w=p[b+2],y=p[b+3],M=(w&16711680)>>>16,R=(w&65280)>>>8,P=w&255,x.strokeStyle="rgba("+M+","+R+","+P+","+y+")",x.lineWidth=A,b+=3;break;case a.FILL_STYLE:C=p[b+1],E=p[b+2],M=(C&16711680)>>>16,R=(C&65280)>>>8,P=C&255,x.fillStyle="rgba("+M+","+R+","+P+","+E+")",b+=2;break;case a.BEGIN_PATH:x.beginPath();break;case a.CLOSE_PATH:x.closePath();break;case a.FILL_PATH:l||x.fill();break;case a.STROKE_PATH:l||x.stroke();break;case a.FILL_RECT:l?x.rect(p[b+1],p[b+2],p[b+3],p[b+4]):x.fillRect(p[b+1],p[b+2],p[b+3],p[b+4]),b+=4;break;case a.FILL_TRIANGLE:x.beginPath(),x.moveTo(p[b+1],p[b+2]),x.lineTo(p[b+3],p[b+4]),x.lineTo(p[b+5],p[b+6]),x.closePath(),l||x.fill(),b+=6;break;case a.STROKE_TRIANGLE:x.beginPath(),x.moveTo(p[b+1],p[b+2]),x.lineTo(p[b+3],p[b+4]),x.lineTo(p[b+5],p[b+6]),x.closePath(),l||x.stroke(),b+=6;break;case a.LINE_TO:x.lineTo(p[b+1],p[b+2]),b+=2;break;case a.MOVE_TO:x.moveTo(p[b+1],p[b+2]),b+=2;break;case a.LINE_FX_TO:x.lineTo(p[b+1],p[b+2]),b+=5;break;case a.MOVE_FX_TO:x.moveTo(p[b+1],p[b+2]),b+=5;break;case a.SAVE:x.save();break;case a.RESTORE:x.restore();break;case a.TRANSLATE:x.translate(p[b+1],p[b+2]),b+=2;break;case a.SCALE:x.scale(p[b+1],p[b+2]),b+=2;break;case a.ROTATE:x.rotate(p[b+1]),b+=1;break;case a.GRADIENT_FILL_STYLE:b+=5;break;case a.GRADIENT_LINE_STYLE:b+=6;break}}x.restore()}};s.exports=c}),87079:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),m=e(43831);a.register("graphics",function(c,o){c===void 0&&(c={}),o!==void 0&&(c.add=o);var u=new m(this.scene,c);return c.add&&this.scene.sys.displayList.add(u),u})}),1201:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43831),m=e(39429);m.register("graphics",function(c){return this.displayList.add(new a(this.scene,c))})}),84503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(77545),c=e(32768),c=e(32768),s.exports={renderWebGL:m,renderCanvas:c}}),77545:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85592),m=e(91296),c=e(61340),o=e(70554),u=function(p,g,x){this.x=p,this.y=g,this.width=x},r=function(p,g,x){this.points=[],this.pointsLength=1,this.points[0]=new u(p,g,x)},h=[],d=new c,l=function(p,g,x,y){if(g.commandBuffer.length!==0){x.addToRenderList(g);var E=p.pipelines.set(g.pipeline,g);p.pipelines.preBatch(g);for(var w=m(g,x,y).calc,C=d.loadIdentity(),A=g.commandBuffer,M=x.alpha*g.alpha,R=1,P=E.fillTint,b=E.strokeTint,F=0,I=0,L=0,D=.01,O=Math.PI*2,z,W=[],k=0,X=!0,V=null,G=o.getTintAppendFloatAlpha,N=0;N<A.length;N++)switch(z=A[N],z){case a.BEGIN_PATH:{W.length=0,V=null,X=!0;break}case a.CLOSE_PATH:{X=!1,V&&V.points.length&&V.points.push(V.points[0]);break}case a.FILL_PATH:{for(k=0;k<W.length;k++)E.batchFillPath(W[k].points,C,w);break}case a.STROKE_PATH:{for(k=0;k<W.length;k++)E.batchStrokePath(W[k].points,R,X,C,w);break}case a.LINE_STYLE:{R=A[++N];var H=A[++N],U=A[++N]*M,_=G(H,U);b.TL=_,b.TR=_,b.BL=_,b.BR=_;break}case a.FILL_STYLE:{var $=A[++N],j=A[++N]*M,Z=G($,j);P.TL=Z,P.TR=Z,P.BL=Z,P.BR=Z;break}case a.GRADIENT_FILL_STYLE:{var it=A[++N]*M,at=A[++N]*M,q=A[++N]*M,ft=A[++N]*M;P.TL=G(A[++N],it),P.TR=G(A[++N],at),P.BL=G(A[++N],q),P.BR=G(A[++N],ft);break}case a.GRADIENT_LINE_STYLE:{R=A[++N];var vt=A[++N]*M;b.TL=G(A[++N],vt),b.TR=G(A[++N],vt),b.BL=G(A[++N],vt),b.BR=G(A[++N],vt);break}case a.ARC:{var Tt=0,ut=A[++N],Bt=A[++N],Pt=A[++N],et=A[++N],Q=A[++N],lt=A[++N],pt=A[++N];for(Q-=et,lt?Q<-O?Q=-O:Q>0&&(Q=-O+Q%O):Q>O?Q=O:Q<0&&(Q=O+Q%O),V===null&&(V=new r(ut+Math.cos(et)*Pt,Bt+Math.sin(et)*Pt,R),W.push(V),Tt+=D);Tt<1+pt;)L=Q*Tt+et,F=ut+Math.cos(L)*Pt,I=Bt+Math.sin(L)*Pt,V.points.push(new u(F,I,R)),Tt+=D;L=Q+et,F=ut+Math.cos(L)*Pt,I=Bt+Math.sin(L)*Pt,V.points.push(new u(F,I,R));break}case a.FILL_RECT:{E.batchFillRect(A[++N],A[++N],A[++N],A[++N],C,w);break}case a.FILL_TRIANGLE:{E.batchFillTriangle(A[++N],A[++N],A[++N],A[++N],A[++N],A[++N],C,w);break}case a.STROKE_TRIANGLE:{E.batchStrokeTriangle(A[++N],A[++N],A[++N],A[++N],A[++N],A[++N],R,C,w);break}case a.LINE_TO:{V!==null?V.points.push(new u(A[++N],A[++N],R)):(V=new r(A[++N],A[++N],R),W.push(V));break}case a.MOVE_TO:{V=new r(A[++N],A[++N],R),W.push(V);break}case a.SAVE:{h.push(C.copyToArray());break}case a.RESTORE:{C.copyFromArray(h.pop());break}case a.TRANSLATE:{ut=A[++N],Bt=A[++N],C.translate(ut,Bt);break}case a.SCALE:{ut=A[++N],Bt=A[++N],C.scale(ut,Bt);break}case a.ROTATE:{C.rotate(A[++N]);break}}p.pipelines.postBatch(g)}};s.exports=l}),26479:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61061),m=e(83419),c=e(51708),o=e(50792),u=e(46710),r=e(95540),h=e(35154),d=e(97022),l=e(41212),p=e(88492),g=e(35072),x=e(68287),y=new m({Extends:o,initialize:function(w,C,A){o.call(this),A?C&&!Array.isArray(C)&&(C=[C]):Array.isArray(C)?l(C[0])&&(A=C,C=null):l(C)&&(A=C,C=null),this.scene=w,this.children=new g,this.isParent=!0,this.type="Group",this.classType=r(A,"classType",x),this.name=r(A,"name",""),this.active=r(A,"active",!0),this.maxSize=r(A,"maxSize",-1),this.defaultKey=r(A,"defaultKey",null),this.defaultFrame=r(A,"defaultFrame",null),this.runChildUpdate=r(A,"runChildUpdate",!1),this.createCallback=r(A,"createCallback",null),this.removeCallback=r(A,"removeCallback",null),this.createMultipleCallback=r(A,"createMultipleCallback",null),this.internalCreateCallback=r(A,"internalCreateCallback",null),this.internalRemoveCallback=r(A,"internalRemoveCallback",null),C&&this.addMultiple(C),A&&this.createMultiple(A),this.on(c.ADDED_TO_SCENE,this.addedToScene,this),this.on(c.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(E,w,C,A,M,R){if(E===void 0&&(E=0),w===void 0&&(w=0),C===void 0&&(C=this.defaultKey),A===void 0&&(A=this.defaultFrame),M===void 0&&(M=!0),R===void 0&&(R=!0),this.isFull())return null;var P=new this.classType(this.scene,E,w,C,A);return P.addToDisplayList(this.scene.sys.displayList),P.addToUpdateList(),P.visible=M,P.setActive(R),this.add(P),P},createMultiple:function(E){if(this.isFull())return[];Array.isArray(E)||(E=[E]);var w=[];if(E[0].key)for(var C=0;C<E.length;C++){var A=this.createFromConfig(E[C]);w=w.concat(A)}return w},createFromConfig:function(E){if(this.isFull())return[];this.classType=r(E,"classType",this.classType);var w=r(E,"key",void 0),C=r(E,"frame",null),A=r(E,"visible",!0),M=r(E,"active",!0),R=[];if(w===void 0)return R;Array.isArray(w)||(w=[w]),Array.isArray(C)||(C=[C]);var P=r(E,"repeat",0),b=r(E,"randomKey",!1),F=r(E,"randomFrame",!1),I=r(E,"yoyo",!1),L=r(E,"quantity",!1),D=r(E,"frameQuantity",1),O=r(E,"max",0),z=p(w,C,{max:O,qty:L||D,random:b,randomB:F,repeat:P,yoyo:I});E.createCallback&&(this.createCallback=E.createCallback),E.removeCallback&&(this.removeCallback=E.removeCallback),E.internalCreateCallback&&(this.internalCreateCallback=E.internalCreateCallback),E.internalRemoveCallback&&(this.internalRemoveCallback=E.internalRemoveCallback);for(var W=0;W<z.length;W++){var k=this.create(0,0,z[W].a,z[W].b,A,M);if(!k)break;R.push(k)}if(d(E,"setXY")){var X=h(E,"setXY.x",0),V=h(E,"setXY.y",0),G=h(E,"setXY.stepX",0),N=h(E,"setXY.stepY",0);a.SetXY(R,X,V,G,N)}if(d(E,"setRotation")){var H=h(E,"setRotation.value",0),U=h(E,"setRotation.step",0);a.SetRotation(R,H,U)}if(d(E,"setScale")){var _=h(E,"setScale.x",1),$=h(E,"setScale.y",_),j=h(E,"setScale.stepX",0),Z=h(E,"setScale.stepY",0);a.SetScale(R,_,$,j,Z)}if(d(E,"setOrigin")){var it=h(E,"setOrigin.x",.5),at=h(E,"setOrigin.y",it),q=h(E,"setOrigin.stepX",0),ft=h(E,"setOrigin.stepY",0);a.SetOrigin(R,it,at,q,ft)}if(d(E,"setAlpha")){var vt=h(E,"setAlpha.value",1),Tt=h(E,"setAlpha.step",0);a.SetAlpha(R,vt,Tt)}if(d(E,"setDepth")){var ut=h(E,"setDepth.value",0),Bt=h(E,"setDepth.step",0);a.SetDepth(R,ut,Bt)}if(d(E,"setScrollFactor")){var Pt=h(E,"setScrollFactor.x",1),et=h(E,"setScrollFactor.y",Pt),Q=h(E,"setScrollFactor.stepX",0),lt=h(E,"setScrollFactor.stepY",0);a.SetScrollFactor(R,Pt,et,Q,lt)}var pt=r(E,"hitArea",null),Mt=r(E,"hitAreaCallback",null);pt&&a.SetHitArea(R,pt,Mt);var Ct=r(E,"gridAlign",!1);return Ct&&a.GridAlign(R,Ct),this.createMultipleCallback&&this.createMultipleCallback.call(this,R),R},preUpdate:function(E,w){if(!(!this.runChildUpdate||this.children.size===0))for(var C=this.children.entries.slice(),A=0;A<C.length;A++){var M=C[A];M.active&&M.update(E,w)}},add:function(E,w){return w===void 0&&(w=!1),this.isFull()?this:(this.children.set(E),this.internalCreateCallback&&this.internalCreateCallback.call(this,E),this.createCallback&&this.createCallback.call(this,E),w&&(E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList()),E.on(c.DESTROY,this.remove,this),this)},addMultiple:function(E,w){if(w===void 0&&(w=!1),Array.isArray(E))for(var C=0;C<E.length;C++)this.add(E[C],w);return this},remove:function(E,w,C){return w===void 0&&(w=!1),C===void 0&&(C=!1),this.children.contains(E)?(this.children.delete(E),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,E),this.removeCallback&&this.removeCallback.call(this,E),E.off(c.DESTROY,this.remove,this),C?E.destroy():w&&(E.removeFromDisplayList(),E.removeFromUpdateList()),this):this},clear:function(E,w){E===void 0&&(E=!1),w===void 0&&(w=!1);for(var C=this.children,A=0;A<C.size;A++){var M=C.entries[A];M.off(c.DESTROY,this.remove,this),w?M.destroy():E&&(M.removeFromDisplayList(),M.removeFromUpdateList())}return this.children.clear(),this},contains:function(E){return this.children.contains(E)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(E,w,C,A){return u(this.children.entries,E,w,C,A)},getFirst:function(E,w,C,A,M,R,P){return this.getHandler(!0,1,E,w,C,A,M,R,P)},getFirstNth:function(E,w,C,A,M,R,P,b){return this.getHandler(!0,E,w,C,A,M,R,P,b)},getLast:function(E,w,C,A,M,R,P){return this.getHandler(!1,1,E,w,C,A,M,R,P)},getLastNth:function(E,w,C,A,M,R,P,b){return this.getHandler(!1,E,w,C,A,M,R,P,b)},getHandler:function(E,w,C,A,M,R,P,b,F){C===void 0&&(C=!1),A===void 0&&(A=!1);var I,L,D=0,O=this.children.entries;if(E)for(L=0;L<O.length;L++)if(I=O[L],I.active===C){if(D++,D===w)break}else I=null;else for(L=O.length-1;L>=0;L--)if(I=O[L],I.active===C){if(D++,D===w)break}else I=null;return I?(typeof M=="number"&&(I.x=M),typeof R=="number"&&(I.y=R),I):A?this.create(M,R,P,b,F):null},get:function(E,w,C,A,M){return this.getFirst(!1,!0,E,w,C,A,M)},getFirstAlive:function(E,w,C,A,M,R){return this.getFirst(!0,E,w,C,A,M,R)},getFirstDead:function(E,w,C,A,M,R){return this.getFirst(!1,E,w,C,A,M,R)},playAnimation:function(E,w){return a.PlayAnimation(this.children.entries,E,w),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(E){E===void 0&&(E=!0);for(var w=0,C=0;C<this.children.size;C++)this.children.entries[C].active===E&&w++;return w},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var E=this.getTotalUsed(),w=this.maxSize===-1?999999999999:this.maxSize;return w-E},setActive:function(E){return this.active=E,this},setName:function(E){return this.name=E,this},propertyValueSet:function(E,w,C,A,M){return a.PropertyValueSet(this.children.entries,E,w,C,A,M),this},propertyValueInc:function(E,w,C,A,M){return a.PropertyValueInc(this.children.entries,E,w,C,A,M),this},setX:function(E,w){return a.SetX(this.children.entries,E,w),this},setY:function(E,w){return a.SetY(this.children.entries,E,w),this},setXY:function(E,w,C,A){return a.SetXY(this.children.entries,E,w,C,A),this},incX:function(E,w){return a.IncX(this.children.entries,E,w),this},incY:function(E,w){return a.IncY(this.children.entries,E,w),this},incXY:function(E,w,C,A){return a.IncXY(this.children.entries,E,w,C,A),this},shiftPosition:function(E,w,C){return a.ShiftPosition(this.children.entries,E,w,C),this},angle:function(E,w){return a.Angle(this.children.entries,E,w),this},rotate:function(E,w){return a.Rotate(this.children.entries,E,w),this},rotateAround:function(E,w){return a.RotateAround(this.children.entries,E,w),this},rotateAroundDistance:function(E,w,C){return a.RotateAroundDistance(this.children.entries,E,w,C),this},setAlpha:function(E,w){return a.SetAlpha(this.children.entries,E,w),this},setTint:function(E,w,C,A){return a.SetTint(this.children.entries,E,w,C,A),this},setOrigin:function(E,w,C,A){return a.SetOrigin(this.children.entries,E,w,C,A),this},scaleX:function(E,w){return a.ScaleX(this.children.entries,E,w),this},scaleY:function(E,w){return a.ScaleY(this.children.entries,E,w),this},scaleXY:function(E,w,C,A){return a.ScaleXY(this.children.entries,E,w,C,A),this},setDepth:function(E,w){return a.SetDepth(this.children.entries,E,w),this},setBlendMode:function(E){return a.SetBlendMode(this.children.entries,E),this},setHitArea:function(E,w){return a.SetHitArea(this.children.entries,E,w),this},shuffle:function(){return a.Shuffle(this.children.entries),this},kill:function(E){this.children.contains(E)&&E.setActive(!1)},killAndHide:function(E){this.children.contains(E)&&(E.setActive(!1),E.setVisible(!1))},setVisible:function(E,w,C){return a.SetVisible(this.children.entries,E,w,C),this},toggleVisible:function(){return a.ToggleVisible(this.children.entries),this},destroy:function(E,w){E===void 0&&(E=!1),w===void 0&&(w=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(c.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(w,E),this.scene=void 0,this.children=void 0)}});s.exports=y}),94975:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),m=e(26479);a.register("group",function(c){return new m(this.scene,null,c)})}),3385:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26479),m=e(39429);m.register("group",function(c,o){return this.updateList.add(new a(this.scene,c,o))})}),88571:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(95643),o=e(59819),u=new a({Extends:c,Mixins:[m.Alpha,m.BlendMode,m.Depth,m.Flip,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Size,m.TextureCrop,m.Tint,m.Transform,m.Visible,o],initialize:function(h,d,l,p,g){c.call(this,h,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,g),this.setPosition(d,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=u}),40652:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m.addToRenderList(a),e.batchSprite(a,a.frame,m,c)};s.exports=T}),82459:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(88571);m.register("image",function(u,r){u===void 0&&(u={});var h=c(u,"key",null),d=c(u,"frame",null),l=new o(this.scene,0,0,h,d);return r!==void 0&&(u.add=r),a(this.scene,l,u),l})}),2117:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88571),m=e(39429);m.register("image",function(c,o,u,r){return this.displayList.add(new a(this.scene,c,o,u,r))})}),59819:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(99517),c=e(40652),s.exports={renderWebGL:m,renderCanvas:c}}),99517:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m.addToRenderList(a),this.pipeline.batchSprite(a,m,c)};s.exports=T}),77856:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Events:e(51708),DisplayList:e(8050),GameObjectCreator:e(44603),GameObjectFactory:e(39429),UpdateList:e(45027),Components:e(31401),GetCalcMatrix:e(91296),BuildGameObject:e(25305),BuildGameObjectAnimation:e(13059),GameObject:e(95643),BitmapText:e(22186),Blitter:e(6107),Bob:e(46590),Container:e(31559),DOMElement:e(3069),DynamicBitmapText:e(2638),Extern:e(42421),Graphics:e(43831),Group:e(26479),Image:e(88571),Layer:e(93595),Particles:e(18404),PathFollower:e(1159),RenderTexture:e(591),RetroFont:e(196),Rope:e(77757),Sprite:e(68287),Text:e(50171),GetTextSize:e(14220),MeasureText:e(79557),TextStyle:e(35762),TileSprite:e(20839),Zone:e(41481),Video:e(18471),Shape:e(17803),Arc:e(23629),Curve:e(89),Ellipse:e(19921),Grid:e(30479),IsoBox:e(61475),IsoTriangle:e(16933),Line:e(57847),Polygon:e(24949),Rectangle:e(74561),Star:e(55911),Triangle:e(36931),Factories:{Blitter:e(12709),Container:e(24961),DOMElement:e(2611),DynamicBitmapText:e(72566),Extern:e(56315),Graphics:e(1201),Group:e(3385),Image:e(2117),Layer:e(20005),Particles:e(676),PathFollower:e(90145),RenderTexture:e(60505),Rope:e(96819),Sprite:e(46409),StaticBitmapText:e(34914),Text:e(68005),TileSprite:e(91681),Zone:e(84175),Video:e(89025),Arc:e(42563),Curve:e(40511),Ellipse:e(1543),Grid:e(34137),IsoBox:e(3933),IsoTriangle:e(49803),Line:e(2481),Polygon:e(64827),Rectangle:e(87959),Star:e(93697),Triangle:e(45245)},Creators:{Blitter:e(9403),Container:e(77143),DynamicBitmapText:e(11164),Graphics:e(87079),Group:e(94975),Image:e(82459),Layer:e(25179),Particles:e(92730),RenderTexture:e(34495),Rope:e(26209),Sprite:e(15567),StaticBitmapText:e(57336),Text:e(71259),TileSprite:e(14167),Zone:e(95261),Video:e(11511)}};a.Shader=e(20071),a.Mesh=e(4703),a.NineSlice=e(28103),a.PointLight=e(80321),a.Plane=e(33663),a.Factories.Shader=e(74177),a.Factories.Mesh=e(9225),a.Factories.NineSlice=e(47521),a.Factories.PointLight=e(71255),a.Factories.Plane=e(30985),a.Creators.Shader=e(54935),a.Creators.Mesh=e(20527),a.Creators.NineSlice=e(28279),a.Creators.PointLight=e(39829),a.Creators.Plane=e(56015),a.Light=e(41432),a.LightsManager=e(61356),a.LightsPlugin=e(88992),s.exports=a}),93595:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),m=e(83419),c=e(31401),o=e(53774),u=e(45893),r=e(50792),h=e(51708),d=e(73162),l=e(33963),p=e(44594),g=e(19186),x=new m({Extends:d,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Mask,c.PostPipeline,c.Visible,r,l],initialize:function(E,w){d.call(this,E),r.call(this),this.scene=E,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=E.sys,this.events=E.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),w&&this.add(w),E.sys.queueDepthSort()},setActive:function(y){return this.active=y,this},setName:function(y){return this.name=y,this},setState:function(y){return this.state=y,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(y,E){return this.data||(this.data=new u(this)),this.data.set(y,E),this},incData:function(y,E){return this.data||(this.data=new u(this)),this.data.inc(y,E),this},toggleData:function(y){return this.data||(this.data=new u(this)),this.data.toggle(y),this},getData:function(y){return this.data||(this.data=new u(this)),this.data.get(y)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(y){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&y.id)},getIndexList:function(){for(var y=this,E=this.parentContainer,w=[];E&&(w.unshift(E.getIndex(y)),y=E,E.parentContainer);)E=E.parentContainer;return w.unshift(this.displayList.getIndex(y)),w},addChildCallback:function(y){var E=y.displayList;E&&E!==this&&y.removeFromDisplayList(),y.displayList||(this.queueDepthSort(),y.displayList=this,y.emit(h.ADDED_TO_SCENE,y,this.scene),this.events.emit(p.ADDED_TO_SCENE,y,this.scene))},removeChildCallback:function(y){this.queueDepthSort(),y.displayList=null,y.emit(h.REMOVED_FROM_SCENE,y,this.scene),this.events.emit(p.REMOVED_FROM_SCENE,y,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(g(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(y,E){return y._depth-E._depth},getChildren:function(){return this.list},addToDisplayList:function(y){return y===void 0&&(y=this.scene.sys.displayList),this.displayList&&this.displayList!==y&&this.removeFromDisplayList(),y.exists(this)||(this.displayList=y,y.add(this,!0),y.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),y.events.emit(p.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var y=this.displayList||this.scene.sys.displayList;return y.exists(this)&&(y.remove(this,!0),y.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),y.events.emit(p.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var y=null;return this.parentContainer?y=this.parentContainer.list:this.displayList&&(y=this.displayList.list),y},destroy:function(y){if(!(!this.scene||this.ignoreDestroy)){this.emit(h.DESTROY,this);for(var E=this.list;E.length;)E[0].destroy(y);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});s.exports=x}),2956:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=a.list;if(c.length!==0){a.depthSort();var o=a.blendMode!==-1;o||e.setBlendMode(0);var u=a._alpha;a.mask&&a.mask.preRenderCanvas(e,null,m);for(var r=0;r<c.length;r++){var h=c[r];if(h.willRender(m)){var d=h.alpha;!o&&h.blendMode!==e.currentBlendMode&&e.setBlendMode(h.blendMode),h.setAlpha(d*u),h.renderCanvas(e,h,m),h.setAlpha(d)}}a.mask&&a.mask.postRenderCanvas(e)}};s.exports=T}),25179:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(93595),c=e(44603),o=e(23568);c.register("layer",function(u,r){u===void 0&&(u={});var h=o(u,"children",null),d=new m(this.scene,h);return r!==void 0&&(u.add=r),a(this.scene,d,u),d})}),20005:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93595),m=e(39429);m.register("layer",function(c){return this.displayList.add(new a(this.scene,c))})}),33963:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(15869),c=e(2956),s.exports={renderWebGL:m,renderCanvas:c}}),15869:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=a.list,o=c.length;if(o!==0){a.depthSort(),e.pipelines.preBatch(a);var u=a.blendMode!==-1;u||e.setBlendMode(0);for(var r=a.alpha,h=0;h<o;h++){var d=c[h];if(d.willRender(m)){var l,p,g,x;if(d.alphaTopLeft!==void 0)l=d.alphaTopLeft,p=d.alphaTopRight,g=d.alphaBottomLeft,x=d.alphaBottomRight;else{var y=d.alpha;l=y,p=y,g=y,x=y}!u&&d.blendMode!==e.currentBlendMode&&e.setBlendMode(d.blendMode);var E=d.mask;E&&E.preRenderWebGL(e,d,m);var w=d.type;w!==e.currentType&&(e.newType=!0,e.currentType=w),e.nextTypeMatch=h<o-1?c[h+1].type===e.currentType:!1,d.setAlpha(l*r,p*r,g*r,x*r),d.renderWebGL(e,d,m),d.setAlpha(l,p,g,x),E&&E.postRenderWebGL(e,m),e.newType=!1}}e.pipelines.postBatch(a)}};s.exports=T}),41432:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),m=e(83419),c=e(31401),o=e(51767),u=e(70554),r=new m({Extends:a,Mixins:[c.Origin,c.ScrollFactor,c.Visible],initialize:function(d,l,p,g,x,y,E){a.call(this,d,l,p),this.color=new o(g,x,y),this.intensity=E,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(p)},displayWidth:{get:function(){return this.diameter},set:function(h){this.diameter=h}},displayHeight:{get:function(){return this.diameter},set:function(h){this.diameter=h}},width:{get:function(){return this.diameter},set:function(h){this.diameter=h}},height:{get:function(){return this.diameter},set:function(h){this.diameter=h}},willRender:function(h){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&h.id)},setColor:function(h){var d=u.getFloatsFromUintRGB(h);return this.color.set(d[0],d[1],d[2]),this},setIntensity:function(h){return this.intensity=h,this},setRadius:function(h){return this.radius=h,this}});r.RENDER_MASK=15,s.exports=r}),61356:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81491),m=e(83419),c=e(20339),o=e(41432),u=e(80321),r=e(51767),h=e(19133),d=e(19186),l=e(70554),p=new m({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(g,x,y,E,w,C){return this.systems.displayList.add(new u(this.scene,g,x,y,E,w,C))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(g){for(var x=this.lights,y=g.worldView,E=[],w=0;w<x.length;w++){var C=x[w];C.willRender(g)&&a(C,y)&&E.push({light:C,distance:c(C.x,C.y,y.centerX,y.centerY)})}return E.length>this.maxLights&&(d(E,this.sortByDistance),E=E.slice(0,this.maxLights)),this.visibleLights=E.length,E},sortByDistance:function(g,x){return g.distance>=x.distance},setAmbientColor:function(g){var x=l.getFloatsFromUintRGB(g);return this.ambientColor.set(x[0],x[1],x[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(g,x,y,E,w){g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=128),E===void 0&&(E=16777215),w===void 0&&(w=1);var C=l.getFloatsFromUintRGB(E),A=new o(g,x,y,C[0],C[1],C[2],w);return this.lights.push(A),A},removeLight:function(g){var x=this.lights.indexOf(g);return x>=0&&h(this.lights,x),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});s.exports=p}),88992:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(61356),c=e(37277),o=e(44594),u=new a({Extends:m,initialize:function(h){this.scene=h,this.systems=h.sys,h.sys.settings.isBooted||h.sys.events.once(o.BOOT,this.boot,this),m.call(this)},boot:function(){var r=this.systems.events;r.on(o.SHUTDOWN,this.shutdown,this),r.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});c.register("LightsPlugin",u,"lights"),s.exports=u}),4703:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(39506),o=e(83997),u=e(95643),r=e(34684),h=e(92515),d=e(91296),l=e(37867),p=e(29807),g=e(43396),x=e(19186),y=e(25836),E=e(39318),w=new a({Extends:u,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Size,m.Texture,m.Transform,m.Visible,p],initialize:function(A,M,R,P,b,F,I,L,D,O,z,W){M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P="__WHITE"),u.call(this,A,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new y,this.modelScale=new y(1,1,1),this.modelRotation=new y,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new l,this.viewPosition=new y,this.viewMatrix=new l,this.projectionMatrix=new l,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var k=A.sys.renderer;this.setPosition(M,R),this.setTexture(P,b),this.setSize(k.width,k.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(k.width,k.height),F&&this.addVertices(F,I,L,D,O,z,W)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(C){return this.viewPosition.addScale(y.LEFT,C),this.dirtyCache[10]=1,this},panY:function(C){return this.viewPosition.y+=y.DOWN.y*C,this.dirtyCache[10]=1,this},panZ:function(C){return this.viewPosition.z+=C,this.dirtyCache[10]=1,this},setPerspective:function(C,A,M,R,P){return M===void 0&&(M=45),R===void 0&&(R=.01),P===void 0&&(P=1e3),this.fov=M,this.projectionMatrix.perspective(c(M),C/A,R,P),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(C,A,M,R){return C===void 0&&(C=this.scene.sys.renderer.getAspectRatio()),A===void 0&&(A=1),M===void 0&&(M=-1e3),R===void 0&&(R=1e3),this.fov=0,this.projectionMatrix.ortho(-C,C,-A,A,M,R),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(C){C.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(C,A,M,R,P,b,F,I,L){var D=this.scene.sys.cache.obj.get(C),O;return D&&(O=r(D,this,A,M,R,P,b,F,I,L)),(!O||O.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",C),this},sortByDepth:function(C,A){return C.depth-A.depth},depthSort:function(){return x(this.faces,this.sortByDepth),this},addVertex:function(C,A,M,R,P,b,F){var I=new E(C,A,M,R,P,b,F);return this.vertices.push(I),I},addFace:function(C,A,M){var R=new o(C,A,M);return this.faces.push(R),this.dirtyCache[9]=-1,R},addVertices:function(C,A,M,R,P,b,F){var I=h(C,A,M,R,P,b,F);return I?(this.faces=this.faces.concat(I.faces),this.vertices=this.vertices.concat(I.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(C){return this.faces[C]},hasFaceAt:function(C,A,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var R=d(this,M).calc,P=this.faces,b=0;b<P.length;b++){var F=P[b];if(F.contains(C,A,R))return!0}return!1},getFaceAt:function(C,A,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var R=d(this,M).calc,P=this.faces,b=[],F=0;F<P.length;F++){var I=P[F];I.contains(C,A,R)&&b.push(I)}return x(b,this.sortByDepth)},setDebug:function(C,A){return this.debugGraphic=C,!C&&!A?this.debugCallback=null:A?this.debugCallback=A:this.debugCallback=this.renderDebug,this},isDirty:function(){var C=this.modelPosition,A=this.modelRotation,M=this.modelScale,R=this.dirtyCache,P=C.x,b=C.y,F=C.z,I=A.x,L=A.y,D=A.z,O=M.x,z=M.y,W=M.z,k=this.getFaceCount(),X=R[0],V=R[1],G=R[2],N=R[3],H=R[4],U=R[5],_=R[6],$=R[7],j=R[8],Z=R[9];return R[0]=P,R[1]=b,R[2]=F,R[3]=I,R[4]=L,R[5]=D,R[6]=O,R[7]=z,R[8]=W,R[9]=k,X!==P||V!==b||G!==F||N!==I||H!==L||U!==D||_!==O||$!==z||j!==W||Z!==k},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var C=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!C[10]&&!this.isDirty())){var A=this.width,M=this.height,R=this.viewMatrix,P=this.viewPosition;C[10]&&(R.identity(),R.translate(P),R.invert(),C[10]=0);var b=this.transformMatrix;b.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var F=P.z,I=this.faces,L=0;L<I.length;L++)I[L].transformCoordinatesLocal(b,A,M,F);this.depthSort()}},renderDebug:function(C,A){for(var M=C.debugGraphic,R=0;R<A.length;R++){var P=A[R],b=P.vertex1.tx,F=P.vertex1.ty,I=P.vertex2.tx,L=P.vertex2.ty,D=P.vertex3.tx,O=P.vertex3.ty;M.strokeTriangle(b,F,I,L,D,O)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(C){C===void 0&&(C={});var A=(function(M,R,P){for(var b=this.faces,F=0;F<b.length;F++){var I=b[F];if(I.contains(R,P))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,C,A),this},setTint:function(C){C===void 0&&(C=16777215);for(var A=this.vertices,M=0;M<A.length;M++)A[M].color=C;return this},uvScroll:function(C,A){for(var M=this.faces,R=0;R<M.length;R++)M[R].scrollUV(C,A);return this},uvScale:function(C,A){for(var M=this.faces,R=0;R<M.length;R++)M[R].scaleUV(C,A);return this},tint:{set:function(C){this.setTint(C)}},rotateX:{get:function(){return g(this.modelRotation.x)},set:function(C){this.modelRotation.x=c(C)}},rotateY:{get:function(){return g(this.modelRotation.y)},set:function(C){this.modelRotation.y=c(C)}},rotateZ:{get:function(){return g(this.modelRotation.z)},set:function(C){this.modelRotation.z=c(C)}}});s.exports=w}),36488:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};s.exports=T}),20527:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(35154),u=e(4703);m.register("mesh",function(r,h){r===void 0&&(r={});var d=c(r,"key",null),l=c(r,"frame",null),p=o(r,"vertices",[]),g=o(r,"uvs",[]),x=o(r,"indicies",[]),y=o(r,"containsZ",!1),E=o(r,"normals",[]),w=o(r,"colors",16777215),C=o(r,"alphas",1),A=new u(this.scene,0,0,d,l,p,g,x,y,E,w,C);return h!==void 0&&(r.add=h),a(this.scene,A,r),A})}),9225:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4703),m=e(39429);m.register("mesh",function(c,o,u,r,h,d,l,p,g,x,y){return this.displayList.add(new a(this.scene,c,o,u,r,h,d,l,p,g,x,y))})}),29807:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(48833),c=e(36488),s.exports={renderWebGL:m,renderCanvas:c}}),48833:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=function(c,o,u,r){var h=o.faces,d=h.length;if(d!==0){u.addToRenderList(o);var l=c.pipelines.set(o.pipeline,o),p=a(o,u,r).calc;c.pipelines.preBatch(o);for(var g=l.setGameObject(o),x=l.vertexViewF32,y=l.vertexViewU32,E=l.vertexCount*l.currentShader.vertexComponentCount-1,w=o.tintFill,C=[],A=o.debugCallback,M=p.a,R=p.b,P=p.c,b=p.d,F=p.e,I=p.f,L=o.viewPosition.z,D=o.hideCCW,O=u.roundPixels,z=u.alpha*o.alpha,W=0,k=0;k<d;k++){var X=h[k];X.isInView(u,D,L,z,M,R,P,b,F,I,O)&&(l.shouldFlush(3)&&(l.flush(),g=l.setGameObject(o),E=l.vertexCount*l.currentShader.vertexComponentCount-1),E=X.load(x,y,E,g,w),W++,l.vertexCount+=3,l.currentBatch.count=l.vertexCount-l.currentBatch.start,A&&C.push(X))}o.totalFrame+=W,A&&A.call(o,o,C),c.pipelines.postBatch(o)}};s.exports=m}),28103:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(95643),o=e(78023),u=e(39318),r=new a({Extends:c,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Texture,m.Transform,m.Visible,o],initialize:function(d,l,p,g,x,y,E,w,C,A,M){c.call(this,d,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var R=d.textures.getFrame(g,x);this.is3Slice=!A&&!M,R&&R.scale9&&(this.is3Slice=R.is3Slice);for(var P=this.is3Slice?18:54,b=0;b<P;b++)this.vertices.push(new u);this.setPosition(l,p),this.setTexture(g,x),this.setSlices(y,E,w,C,A,M,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(h,d,l,p,g,x,y){l===void 0&&(l=10),p===void 0&&(p=10),g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=!1);var E=this.frame,w=!1;if(this.is3Slice&&y&&g!==0&&x!==0&&(w=!0),w)console.warn("Cannot change 9 slice to 3 slice");else{if(E&&E.scale9&&!y){var C=E.data.scale9Borders,A=C.x,M=C.y;l=A,p=E.width-C.w-A,g=M,x=E.height-C.h-M,h===void 0&&(h=E.width),d===void 0&&(d=E.height)}else h===void 0&&(h=256),d===void 0&&(d=256);this._width=h,this._height=d,this.leftWidth=l,this.rightWidth=p,this.topHeight=g,this.bottomHeight=x,this.is3Slice&&(d=E.height,this._height=d,this.topHeight=d,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var h=this.leftWidth,d=this.rightWidth,l=this.topHeight,p=this.bottomHeight,g=this.frame.width,x=this.frame.height;this.updateQuadUVs(0,0,0,h/g,l/x),this.updateQuadUVs(6,h/g,0,1-d/g,l/x),this.updateQuadUVs(12,1-d/g,0,1,l/x),this.is3Slice||(this.updateQuadUVs(18,0,l/x,h/g,1-p/x),this.updateQuadUVs(24,h/g,l/x,1-d/g,1-p/x),this.updateQuadUVs(30,1-d/g,l/x,1,1-p/x),this.updateQuadUVs(36,0,1-p/x,h/g,1),this.updateQuadUVs(42,h/g,1-p/x,1-d/g,1),this.updateQuadUVs(48,1-d/g,1-p/x,1,1))},updateVertices:function(){var h=this.leftWidth,d=this.rightWidth,l=this.topHeight,p=this.bottomHeight,g=this.width,x=this.height;this.updateQuad(0,-.5,.5,-.5+h/g,.5-l/x),this.updateQuad(6,-.5+h/g,.5,.5-d/g,.5-l/x),this.updateQuad(12,.5-d/g,.5,.5,.5-l/x),this.is3Slice||(this.updateQuad(18,-.5,.5-l/x,-.5+h/g,-.5+p/x),this.updateQuad(24,-.5+h/g,.5-l/x,.5-d/g,-.5+p/x),this.updateQuad(30,.5-d/g,.5-l/x,.5,-.5+p/x),this.updateQuad(36,-.5,-.5+p/x,-.5+h/g,-.5),this.updateQuad(42,-.5+h/g,-.5+p/x,.5-d/g,-.5),this.updateQuad(48,.5-d/g,-.5+p/x,.5,-.5))},updateQuad:function(h,d,l,p,g){var x=this.width,y=this.height,E=this.originX,w=this.originY,C=this.vertices;C[h+0].resize(d,l,x,y,E,w),C[h+1].resize(d,g,x,y,E,w),C[h+2].resize(p,l,x,y,E,w),C[h+3].resize(d,g,x,y,E,w),C[h+4].resize(p,g,x,y,E,w),C[h+5].resize(p,l,x,y,E,w)},updateQuadUVs:function(h,d,l,p,g){var x=this.vertices,y=this.frame,E=y.u0,w=y.v0,C=y.u1,A=y.v1;if(E!==0||C!==1){var M=C-E;d=E+d*M,p=E+p*M}if(w!==0||A!==1){var R=A-w;l=w+l*R,g=w+g*R}x[h+0].setUVs(d,l),x[h+1].setUVs(d,g),x[h+2].setUVs(p,l),x[h+3].setUVs(d,g),x[h+4].setUVs(p,g),x[h+5].setUVs(p,l)},clearTint:function(){return this.setTint(16777215),this},setTint:function(h){return h===void 0&&(h=16777215),this.tint=h,this.tintFill=!1,this},setTintFill:function(h){return this.setTint(h),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(h){this._width=Math.max(h,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(h){this.is3Slice||(this._height=Math.max(h,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(h){this.scaleX=h/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(h){this.scaleY=h/this.height}},setSize:function(h,d){this.width=h,this.height=d,this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=this.width,l.hitArea.height=this.height),this},setDisplaySize:function(h,d){return this.displayWidth=h,this.displayHeight=d,this},originX:{get:function(){return this._originX},set:function(h){this._originX=h,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(h){this._originY=h,this.updateVertices()}},setOrigin:function(h,d){return h===void 0&&(h=.5),d===void 0&&(d=h),this._originX=h,this._originY=d,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var h=this.frame.height;this._height=h,this.topHeight=h,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});s.exports=r}),28279:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(35154),u=e(28103);m.register("nineslice",function(r,h){r===void 0&&(r={});var d=c(r,"key",null),l=c(r,"frame",null),p=o(r,"width",256),g=o(r,"height",256),x=o(r,"leftWidth",10),y=o(r,"rightWidth",10),E=o(r,"topHeight",0),w=o(r,"bottomHeight",0),C=new u(this.scene,0,0,d,l,p,g,x,y,E,w);return h!==void 0&&(r.add=h),a(this.scene,C,r),C})}),47521:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28103),m=e(39429);m.register("nineslice",function(c,o,u,r,h,d,l,p,g,x){return this.displayList.add(new a(this.scene,c,o,u,r,h,d,l,p,g,x))})}),78023:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(52230),s.exports={renderWebGL:m,renderCanvas:c}}),52230:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=e(70554),c=function(o,u,r,h){var d=u.vertices,l=d.length;if(l!==0){r.addToRenderList(u);var p=o.pipelines.set(u.pipeline,u),g=a(u,r,h,!1).calc;o.pipelines.preBatch(u);var x=p.setGameObject(u),y=p.vertexViewF32,E=p.vertexViewU32,w=p.vertexCount*p.currentShader.vertexComponentCount-1,C=r.roundPixels,A=u.tintFill,M=r.alpha*u.alpha,R=m.getTintAppendFloatAlpha(u.tint,M),P=p.vertexAvailable(),b=-1;P<l&&(b=P);for(var F=0;F<l;F++){var I=d[F];F===b&&(p.flush(),x=p.setGameObject(u),w=0),y[++w]=g.getXRound(I.vx,I.vy,C),y[++w]=g.getYRound(I.vx,I.vy,C),y[++w]=I.u,y[++w]=I.v,y[++w]=x,y[++w]=A,E[++w]=R,p.vertexCount++,p.currentBatch.count=p.vertexCount-p.currentBatch.start}o.pipelines.postBatch(u)}};s.exports=c}),76472:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(44777),c=e(37589),o=e(6113),u=e(91389),r=e(90664),h=new a({Extends:m,initialize:function(l){m.call(this,l,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var d=this.propertyValue,l=d,p=this.defaultEmit,g=this.defaultUpdate;if(this.method===9){this.start=d[0],this.ease=o("Linear"),this.interpolation=u("linear"),p=this.easedValueEmit,g=this.easeValueUpdate,l=d[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var x=0;x<d.length;x++){var y=r(d[x]);this.r.push(y.r),this.g.push(y.g),this.b.push(y.b)}}return this.onEmit=p,this.onUpdate=g,this.current=l,this},setEase:function(d){this.easeName=d,this.ease=o(d)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(d,l,p){var g=this.ease(p),x=this.interpolation(this.r,g),y=this.interpolation(this.g,g),E=this.interpolation(this.b,g),w=c(x,y,E);return this.current=w,w}});s.exports=h}),44777:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),m=e(45319),c=e(83419),o=e(99472),u=e(6113),r=e(95540),h=e(91389),d=e(77720),l=e(15994),p=new c({initialize:function(x,y,E){E===void 0&&(E=!1),this.propertyKey=x,this.propertyValue=y,this.defaultValue=y,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=E,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(g,x){g===void 0&&(g={}),x&&(this.propertyKey=x),this.propertyValue=r(g,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(g){var x;switch(this.method){case 1:case 3:case 8:x=g;break;case 2:this.propertyValue.indexOf(g)>=0&&(x=g);break;case 4:var y=(this.end-this.start)/this.steps;x=d(g,y),this.counter=x;break;case 5:case 6:case 7:x=m(g,this.start,this.end);break;case 9:x=this.start[0];break}return this.current=x,this},getMethod:function(){var g=this.propertyValue;if(g===null)return 0;var x=typeof g;if(x==="number")return 1;if(Array.isArray(g))return 2;if(x==="function")return 3;if(x==="object"){if(this.hasBoth(g,"start","end"))return this.has(g,"steps")?4:5;if(this.hasBoth(g,"min","max"))return 6;if(this.has(g,"random"))return 7;if(this.hasEither(g,"onEmit","onUpdate"))return 8;if(this.hasEither(g,"values","interpolation"))return 9}return 0},setMethods:function(){var g=this.propertyValue,x=g,y=this.defaultEmit,E=this.defaultUpdate;switch(this.method){case 1:y=this.staticValueEmit;break;case 2:y=this.randomStaticValueEmit,x=g[0];break;case 3:this._onEmit=g,y=this.proxyEmit,x=this.defaultValue;break;case 4:this.start=g.start,this.end=g.end,this.steps=g.steps,this.counter=this.start,this.yoyo=this.has(g,"yoyo")?g.yoyo:!1,this.direction=0,y=this.steppedEmit,x=this.start;break;case 5:this.start=g.start,this.end=g.end;var w=this.has(g,"ease")?g.ease:"Linear";this.ease=u(w,g.easeParams),y=this.has(g,"random")&&g.random?this.randomRangedValueEmit:this.easedValueEmit,E=this.easeValueUpdate,x=this.start;break;case 6:this.start=g.min,this.end=g.max,y=this.has(g,"int")&&g.int?this.randomRangedIntEmit:this.randomRangedValueEmit,x=this.start;break;case 7:var C=g.random;Array.isArray(C)&&(this.start=C[0],this.end=C[1]),y=this.randomRangedIntEmit,x=this.start;break;case 8:this._onEmit=this.has(g,"onEmit")?g.onEmit:this.defaultEmit,this._onUpdate=this.has(g,"onUpdate")?g.onUpdate:this.defaultUpdate,y=this.proxyEmit,E=this.proxyUpdate,x=this.defaultValue;break;case 9:this.start=g.values;var A=this.has(g,"ease")?g.ease:"Linear";this.ease=u(A,g.easeParams),this.interpolation=h(g.interpolation),y=this.easedValueEmit,E=this.easeValueUpdate,x=this.start[0];break}return this.onEmit=y,this.onUpdate=E,this.current=x,this},has:function(g,x){return g.hasOwnProperty(x)},hasBoth:function(g,x,y){return g.hasOwnProperty(x)&&g.hasOwnProperty(y)},hasEither:function(g,x,y){return g.hasOwnProperty(x)||g.hasOwnProperty(y)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(g,x,y,E){return E},proxyEmit:function(g,x,y){var E=this._onEmit(g,x,y);return this.current=E,E},proxyUpdate:function(g,x,y,E){var w=this._onUpdate(g,x,y,E);return this.current=w,w},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var g=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[g],this.current},randomRangedValueEmit:function(g,x){var y=o(this.start,this.end);return g&&g.data[x]&&(g.data[x].min=y,g.data[x].max=this.end),this.current=y,y},randomRangedIntEmit:function(g,x){var y=a(this.start,this.end);return g&&g.data[x]&&(g.data[x].min=y,g.data[x].max=this.end),this.current=y,y},steppedEmit:function(){var g=this.counter,x=g,y=(this.end-this.start)/this.steps;if(this.yoyo){var E;this.direction===0?(x+=y,x>=this.end&&(E=x-this.end,x=this.end-E,this.direction=1)):(x-=y,x<=this.start&&(E=this.start-x,x=this.start+E,this.direction=0)),this.counter=x}else this.counter=l(x+y,this.start,this.end);return this.current=g,g},easedValueEmit:function(g,x){if(g&&g.data[x]){var y=g.data[x];y.min=this.start,y.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(g,x,y){var E=g.data[x],w,C=this.ease(y);return this.interpolation?w=this.interpolation(this.start,C):w=(E.max-E.min)*C+E.min,this.current=w,w},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});s.exports=p}),24502:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=e(20286),o=new a({Extends:c,initialize:function(r,h,d,l,p){if(typeof r=="object"){var g=r;r=m(g,"x",0),h=m(g,"y",0),d=m(g,"power",0),l=m(g,"epsilon",100),p=m(g,"gravity",50)}else r===void 0&&(r=0),h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=100),p===void 0&&(p=50);c.call(this,r,h,!0),this._gravity=p,this._power=d*p,this._epsilon=l*l},update:function(u,r){var h=this.x-u.x,d=this.y-u.y,l=h*h+d*d;if(l!==0){var p=Math.sqrt(l);l<this._epsilon&&(l=this._epsilon);var g=this._power*r/(l*p)*100;u.velocityX+=h*g,u.velocityY+=d*g}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(u){this._epsilon=u*u}},power:{get:function(){return this._power/this._gravity},set:function(u){this._power=u*this._gravity}},gravity:{get:function(){return this._gravity},set:function(u){var r=this.power;this._gravity=u,this.power=r}}});s.exports=o}),56480:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),m=e(45319),c=e(83419),o=e(39506),u=e(87841),r=e(11520),h=e(26099),d=new c({initialize:function(p){this.emitter=p,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new h,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=p.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new a(this)),this.bounds=new u},emit:function(l,p,g,x,y,E){return this.emitter.emit(l,p,g,x,y,E)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(l,p){l===void 0&&(l=0),p===void 0&&(p=0),this.x=l,this.y=p},fire:function(l,p){var g=this.emitter,x=g.ops,y=g.getAnim();if(y?this.anims.play(y):(this.frame=g.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(g.getEmitZone(this),l===void 0?this.x+=x.x.onEmit(this,"x"):x.x.steps>0?this.x+=l+x.x.onEmit(this,"x"):this.x+=l,p===void 0?this.y+=x.y.onEmit(this,"y"):x.y.steps>0?this.y+=p+x.y.onEmit(this,"y"):this.y+=p,this.life=x.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=x.delay.onEmit(this,"delay"),this.holdCurrent=x.hold.onEmit(this,"hold"),this.scaleX=x.scaleX.onEmit(this,"scaleX"),this.scaleY=x.scaleY.active?x.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=x.rotate.onEmit(this,"rotate"),this.rotation=o(this.angle),g.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&g.getDeathZone(this))return this.lifeCurrent=0,!1;var E=x.speedX.onEmit(this,"speedX"),w=x.speedY.active?x.speedY.onEmit(this,"speedY"):E;if(g.radial){var C=o(x.angle.onEmit(this,"angle"));this.velocityX=Math.cos(C)*Math.abs(E),this.velocityY=Math.sin(C)*Math.abs(w)}else if(g.moveTo){var A=x.moveToX.onEmit(this,"moveToX"),M=x.moveToY.onEmit(this,"moveToY"),R=this.life/1e3;this.velocityX=(A-this.x)/R,this.velocityY=(M-this.y)/R}else this.velocityX=E,this.velocityY=w;return g.acceleration&&(this.accelerationX=x.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=x.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=x.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=x.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=x.bounce.onEmit(this,"bounce"),this.alpha=x.alpha.onEmit(this,"alpha"),x.color.active?this.tint=x.color.onEmit(this,"tint"):this.tint=x.tint.onEmit(this,"tint"),!0},update:function(l,p,g){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=l,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=l,!1;this.anims&&this.anims.update(0,l);var x=this.emitter,y=x.ops,E=1-this.lifeCurrent/this.life;if(this.lifeT=E,this.x=y.x.onUpdate(this,"x",E,this.x),this.y=y.y.onUpdate(this,"y",E,this.y),x.moveTo){var w=y.moveToX.onUpdate(this,"moveToX",E,x.moveToX),C=y.moveToY.onUpdate(this,"moveToY",E,x.moveToY),A=this.lifeCurrent/1e3;this.velocityX=(w-this.x)/A,this.velocityY=(C-this.y)/A}return this.computeVelocity(x,l,p,g,E),this.scaleX=y.scaleX.onUpdate(this,"scaleX",E,this.scaleX),y.scaleY.active?this.scaleY=y.scaleY.onUpdate(this,"scaleY",E,this.scaleY):this.scaleY=this.scaleX,this.angle=y.rotate.onUpdate(this,"rotate",E,this.angle),this.rotation=o(this.angle),x.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=m(y.alpha.onUpdate(this,"alpha",E,this.alpha),0,1),y.color.active?this.tint=y.color.onUpdate(this,"color",E,this.tint):this.tint=y.tint.onUpdate(this,"tint",E,this.tint),this.lifeCurrent-=l,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(l,p,g,x,y){var E=l.ops,w=this.velocityX,C=this.velocityY,A=E.accelerationX.onUpdate(this,"accelerationX",y,this.accelerationX),M=E.accelerationY.onUpdate(this,"accelerationY",y,this.accelerationY),R=E.maxVelocityX.onUpdate(this,"maxVelocityX",y,this.maxVelocityX),P=E.maxVelocityY.onUpdate(this,"maxVelocityY",y,this.maxVelocityY);this.bounce=E.bounce.onUpdate(this,"bounce",y,this.bounce),w+=l.gravityX*g+A*g,C+=l.gravityY*g+M*g,w=m(w,-R,R),C=m(C,-P,P),this.velocityX=w,this.velocityY=C,this.x+=w*g,this.y+=C*g,l.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var b=0;b<x.length;b++){var F=x[b];F.active&&F.update(this,p,g,y)}},setSizeToFrame:function(){},getBounds:function(l){l===void 0&&(l=this.emitter.getWorldTransformMatrix());var p=Math.abs(l.scaleX)*this.scaleX,g=Math.abs(l.scaleY)*this.scaleY,x=this.x,y=this.y,E=this.rotation,w=this.frame.width*p/2,C=this.frame.height*g/2,A=this.bounds,M=new h(x-w,y-C),R=new h(x+w,y-C),P=new h(x-w,y+C),b=new h(x+w,y+C);return E!==0&&(r(M,x,y,E),r(R,x,y,E),r(P,x,y,E),r(b,x,y,E)),l.transformPoint(M.x,M.y,M),l.transformPoint(R.x,R.y,R),l.transformPoint(P.x,P.y,P),l.transformPoint(b.x,b.y,b),A.x=Math.min(M.x,R.x,P.x,b.x),A.y=Math.min(M.y,R.y,P.y,b.y),A.width=Math.max(M.x,R.x,P.x,b.x)-A.x,A.height=Math.max(M.y,R.y,P.y,b.y)-A.y,A},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});s.exports=d}),69601:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(20286),c=e(87841),o=new a({Extends:m,initialize:function(r,h,d,l,p,g,x,y){p===void 0&&(p=!0),g===void 0&&(g=!0),x===void 0&&(x=!0),y===void 0&&(y=!0),m.call(this,r,h,!0),this.bounds=new c(r,h,d,l),this.collideLeft=p,this.collideRight=g,this.collideTop=x,this.collideBottom=y},update:function(u){var r=this.bounds,h=-u.bounce,d=u.worldPosition;d.x<r.x&&this.collideLeft?(u.x+=r.x-d.x,u.velocityX*=h):d.x>r.right&&this.collideRight&&(u.x-=d.x-r.right,u.velocityX*=h),d.y<r.y&&this.collideTop?(u.y+=r.y-d.y,u.velocityY*=h):d.y>r.bottom&&this.collideBottom&&(u.y-=d.y-r.bottom,u.velocityY*=h)}});s.exports=o}),31600:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(53774),o=e(43459),u=e(26388),r=e(19909),h=e(76472),d=e(44777),l=e(20696),p=e(95643),g=e(95540),x=e(26546),y=e(24502),E=e(69036),w=e(1985),C=e(97022),A=e(86091),M=e(73162),R=e(20074),P=e(269),b=e(56480),F=e(69601),I=e(68875),L=e(87841),D=e(59996),O=e(72905),z=e(90668),W=e(19186),k=e(61340),X=e(26099),V=e(15994),G=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],N=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],H=new a({Extends:p,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Texture,m.Transform,m.Visible,z],initialize:function(_,$,j,Z,it){p.call(this,_,"ParticleEmitter"),this.particleClass=b,this.config=null,this.ops={accelerationX:new d("accelerationX",0),accelerationY:new d("accelerationY",0),alpha:new d("alpha",1),angle:new d("angle",{min:0,max:360},!0),bounce:new d("bounce",0),color:new h("color"),delay:new d("delay",0,!0),hold:new d("hold",0,!0),lifespan:new d("lifespan",1e3,!0),maxVelocityX:new d("maxVelocityX",1e4),maxVelocityY:new d("maxVelocityY",1e4),moveToX:new d("moveToX",0),moveToY:new d("moveToY",0),quantity:new d("quantity",1,!0),rotate:new d("rotate",0),scaleX:new d("scaleX",1),scaleY:new d("scaleY",1),speedX:new d("speedX",0,!0),speedY:new d("speedY",0,!0),tint:new d("tint",16777215),x:new d("x",0),y:new d("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new X,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new k,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new M(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition($,j),this.setTexture(Z),it&&this.setConfig(it)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(U){if(!U)return this;this.config=U;var _=0,$="",j=this.ops;for(_=0;_<N.length;_++)$=N[_],j[$].loadConfig(U);for(_=0;_<G.length;_++)$=G[_],C(U,$)&&(this[$]=g(U,$));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=E(U,["moveToX","moveToY"]),C(U,"speed")&&(j.speedX.loadConfig(U,"speed"),j.speedY.active=!1),(w(U,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),C(U,"scale")&&(j.scaleX.loadConfig(U,"scale"),j.scaleY.active=!1),C(U,"callbackScope")){var Z=g(U,"callbackScope",null);this.emitCallbackScope=Z,this.deathCallbackScope=Z}if(C(U,"emitZone")&&this.addEmitZone(U.emitZone),C(U,"deathZone")&&this.addDeathZone(U.deathZone),C(U,"bounds")){var it=this.addParticleBounds(U.bounds);it.collideLeft=g(U,"collideLeft",!0),it.collideRight=g(U,"collideRight",!0),it.collideTop=g(U,"collideTop",!0),it.collideBottom=g(U,"collideBottom",!0)}return C(U,"followOffset")&&this.followOffset.setFromObject(g(U,"followOffset",0)),C(U,"texture")&&this.setTexture(U.texture),C(U,"frame")?this.setEmitterFrame(U.frame):C(U,"anim")&&this.setAnim(U.anim),C(U,"reserve")&&this.reserve(U.reserve),C(U,"advance")&&this.fastForward(U.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(l.START,this),this},updateConfig:function(U){return U&&(this.config?this.setConfig(P(this.config,U)):this.setConfig(U)),this},toJSON:function(){var U=c(this),_=0,$="";for(_=0;_<G.length;_++)$=G[_],U[$]=this[$];var j=this.ops;for(_=0;_<N.length;_++)$=N[_],j[$]&&(U[$]=j[$].toJSON());return j.speedY.active||(delete U.speedX,U.speed=j.speedX.toJSON()),this.scaleX===this.scaleY&&(delete U.scaleX,delete U.scaleY,U.scale=j.scaleX.toJSON()),U},resetCounters:function(U,_){var $=this.counters;$.fill(0),$[0]=U,_&&($[5]=1)},startFollow:function(U,_,$,j){return _===void 0&&(_=0),$===void 0&&($=0),j===void 0&&(j=!1),this.follow=U,this.followOffset.set(_,$),this.trackVisible=j,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var U=this.frames,_=U.length,$;return _===1?$=U[0]:this.randomFrame?$=x(U):($=U[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===_&&(this.currentFrame=0))),this.texture.get($)},setEmitterFrame:function(U,_,$){_===void 0&&(_=!0),$===void 0&&($=1),this.randomFrame=_,this.frameQuantity=$,this.currentFrame=0;var j=typeof U;if(this.frames.length=0,Array.isArray(U))this.frames=this.frames.concat(U);else if(j==="string"||j==="number")this.frames.push(U);else if(j==="object"){var Z=U;U=g(Z,"frames",null),U&&(this.frames=this.frames.concat(U));var it=g(Z,"cycle",!1);this.randomFrame=!it,this.frameQuantity=g(Z,"quantity",$)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var U=this.anims,_=U.length;if(_===0)return null;if(_===1)return U[0];if(this.randomAnim)return x(U);var $=U[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=V(this.currentAnim+1,0,_)),$},setAnim:function(U,_,$){_===void 0&&(_=!0),$===void 0&&($=1),this.randomAnim=_,this.animQuantity=$,this.currentAnim=0;var j=typeof U;if(this.anims.length=0,Array.isArray(U))this.anims=this.anims.concat(U);else if(j==="string")this.anims.push(U);else if(j==="object"){var Z=U;U=g(Z,"anims",null),U&&(this.anims=this.anims.concat(U));var it=g(Z,"cycle",!1);this.randomAnim=!it,this.animQuantity=g(Z,"quantity",$)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(U){return U===void 0&&(U=!0),this.radial=U,this},addParticleBounds:function(U,_,$,j,Z,it,at,q){if(typeof U=="object"){var ft=U;U=ft.x,_=ft.y,$=C(ft,"w")?ft.w:ft.width,j=C(ft,"h")?ft.h:ft.height}return this.addParticleProcessor(new F(U,_,$,j,Z,it,at,q))},setParticleSpeed:function(U,_){return _===void 0&&(_=U),this.ops.speedX.onChange(U),U===_?this.ops.speedY.active=!1:this.ops.speedY.onChange(_),this.radial=!0,this},setParticleScale:function(U,_){return U===void 0&&(U=1),_===void 0&&(_=U),this.ops.scaleX.onChange(U),this.ops.scaleY.onChange(_),this},setParticleGravity:function(U,_){return this.gravityX=U,this.gravityY=_,this},setParticleAlpha:function(U){return this.ops.alpha.onChange(U),this},setParticleTint:function(U){return this.ops.tint.onChange(U),this},setEmitterAngle:function(U){return this.ops.angle.onChange(U),this},setParticleLifespan:function(U){return this.ops.lifespan.onChange(U),this},setQuantity:function(U){return this.quantity=U,this},setFrequency:function(U,_){return this.frequency=U,this.flowCounter=U>0?U:0,_&&(this.quantity=_),this},addDeathZone:function(U){Array.isArray(U)||(U=[U]);for(var _,$=[],j=0;j<U.length;j++)if(_=U[j],_ instanceof u)$.push(_);else if(typeof _.contains=="function")_=new u(_,!0),$.push(_);else{var Z=g(_,"type","onEnter"),it=g(_,"source",null);if(it&&typeof it.contains=="function"){var at=Z==="onEnter";_=new u(it,at),$.push(_)}}return this.deathZones=this.deathZones.concat($),$},removeDeathZone:function(U){return O(this.deathZones,U),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(U){Array.isArray(U)||(U=[U]);for(var _,$=[],j=0;j<U.length;j++)if(_=U[j],_ instanceof I||_ instanceof r)$.push(_);else{var Z=g(_,"source",null);if(Z){var it=g(_,"type","random");if(it==="random"&&typeof Z.getRandomPoint=="function")_=new I(Z),$.push(_);else if(it==="edge"&&typeof Z.getPoints=="function"){var at=g(_,"quantity",1),q=g(_,"stepRate",0),ft=g(_,"yoyo",!1),vt=g(_,"seamless",!0),Tt=g(_,"total",-1);_=new r(Z,at,q,ft,vt,Tt),$.push(_)}}}return this.emitZones=this.emitZones.concat($),$},removeEmitZone:function(U){return O(this.emitZones,U),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(U){var _=this.emitZones,$=_.length;if($!==0){var j=_[this.zoneIndex];j.getPoint(U),j.total>-1&&(this.zoneTotal++,this.zoneTotal===j.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===$&&(this.zoneIndex=0)))}},getDeathZone:function(U){for(var _=this.deathZones,$=0;$<_.length;$++){var j=_[$];if(j.willKill(U))return this.emit(l.DEATH_ZONE,this,U,j),!0}return!1},setEmitZone:function(U){var _;return isFinite(U)?_=U:_=this.emitZones.indexOf(U),_>=0&&(this.zoneIndex=_),this},addParticleProcessor:function(U){return this.processors.exists(U)||(U.emitter&&U.emitter.removeParticleProcessor(U),this.processors.add(U),U.emitter=this),U},removeParticleProcessor:function(U){return this.processors.exists(U)&&(this.processors.remove(U,!0),U.emitter=null),U},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(U){return this.addParticleProcessor(new y(U))},reserve:function(U){var _=this.dead;if(this.maxParticles>0){var $=this.getParticleCount();$+U>this.maxParticles&&(U=this.maxParticles-($+U))}for(var j=0;j<U;j++)_.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(U,_){return U===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof U=="function"&&(this.emitCallback=U,_&&(this.emitCallbackScope=_)),this},onParticleDeath:function(U,_){return U===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof U=="function"&&(this.deathCallback=U,_&&(this.deathCallbackScope=_)),this},killAll:function(){for(var U=this.dead,_=this.alive;_.length>0;)U.push(_.pop());return this},forEachAlive:function(U,_){for(var $=this.alive,j=$.length,Z=0;Z<j;Z++)U.call(_,$[Z],this);return this},forEachDead:function(U,_){for(var $=this.dead,j=$.length,Z=0;Z<j;Z++)U.call(_,$[Z],this);return this},start:function(U,_){return U===void 0&&(U=0),this.emitting||(U>0&&this.fastForward(U),this.emitting=!0,this.resetCounters(this.frequency,!0),_!==void 0&&(this.duration=Math.abs(_)),this.emit(l.START,this)),this},stop:function(U){return U===void 0&&(U=!1),this.emitting&&(this.emitting=!1,U&&this.killAll(),this.emit(l.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(U,_){return U===void 0&&(U=""),_===void 0&&(_=this.true),this.sortProperty=U,this.sortOrderAsc=_,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(U){return this.sortProperty!==""?U=this.depthSortCallback:U=null,this.sortCallback=U,this},depthSort:function(){return W(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(U,_){var $=this.sortProperty;return this.sortOrderAsc?U[$]-_[$]:_[$]-U[$]},flow:function(U,_,$){return _===void 0&&(_=1),this.emitting=!1,this.frequency=U,this.quantity=_,$!==void 0&&(this.stopAfter=$),this.start()},explode:function(U,_,$){this.frequency=-1,this.resetCounters(-1,!0);var j=this.emitParticle(U,_,$);return this.emit(l.EXPLODE,this,j),j},emitParticleAt:function(U,_,$){return this.emitParticle($,U,_)},emitParticle:function(U,_,$){if(!this.atLimit()){U===void 0&&(U=this.ops.quantity.onEmit());for(var j=this.dead,Z=this.stopAfter,it=this.follow?this.follow.x+this.followOffset.x:_,at=this.follow?this.follow.y+this.followOffset.y:$,q=0;q<U;q++){var ft=j.pop();if(ft||(ft=new this.particleClass(this)),ft.fire(it,at)?(this.particleBringToTop?this.alive.push(ft):this.alive.unshift(ft),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,ft,this)):this.dead.push(ft),Z>0&&(this.stopCounter++,this.stopCounter>=Z)||this.atLimit())break}return ft}},fastForward:function(U,_){_===void 0&&(_=1e3/60);var $=0;for(this.skipping=!0;$<Math.abs(U);)this.preUpdate(0,_),$+=_;return this.skipping=!1,this},preUpdate:function(U,_){_*=this.timeScale;var $=_/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var j=this.getProcessors(),Z=this.alive,it=this.dead,at=0,q=[],ft=Z.length;for(at=0;at<ft;at++){var vt=Z[at];vt.update(_,$,j)&&q.push({index:at,particle:vt})}if(ft=q.length,ft>0){var Tt=this.deathCallback,ut=this.deathCallbackScope;for(at=ft-1;at>=0;at--){var Bt=q[at];Z.splice(Bt.index,1),it.push(Bt.particle),Tt&&Tt.call(ut,Bt.particle),Bt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&Z.length===0&&(this.completeFlag=0,this.emit(l.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=_;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=_,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(U){for(var _=this.getWorldTransformMatrix(),$=this.alive,j=$.length,Z=[],it=0;it<j;it++){var at=$[it];D(U,at.getBounds(_))&&Z.push(at)}return Z},getBounds:function(U,_,$,j){U===void 0&&(U=0),_===void 0&&(_=0),$===void 0&&($=1e3/60),j===void 0&&(j=new L);var Z=this.getWorldTransformMatrix(),it,at,q=this.alive,ft=!1;if(j.setTo(0,0,0,0),_>0){var vt=0;for(this.skipping=!0;vt<Math.abs(_);){for(this.preUpdate(0,$),it=0;it<q.length;it++)at=q[it].getBounds(Z),ft?R(j,at):(ft=!0,o(at,j));vt+=$}this.skipping=!1}else for(it=0;it<q.length;it++)at=q[it].getBounds(Z),ft?R(j,at):(ft=!0,o(at,j));return U>0&&A(j,U,U),j},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(U){this.ops.x.onChange(U)}},particleY:{get:function(){return this.ops.y.current},set:function(U){this.ops.y.onChange(U)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(U){this.ops.accelerationX.onChange(U)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(U){this.ops.accelerationY.onChange(U)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(U){this.ops.maxVelocityX.onChange(U)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(U){this.ops.maxVelocityY.onChange(U)}},speed:{get:function(){return this.ops.speedX.current},set:function(U){this.ops.speedX.onChange(U),this.ops.speedY.onChange(U)}},speedX:{get:function(){return this.ops.speedX.current},set:function(U){this.ops.speedX.onChange(U)}},speedY:{get:function(){return this.ops.speedY.current},set:function(U){this.ops.speedY.onChange(U)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(U){this.ops.moveToX.onChange(U)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(U){this.ops.moveToY.onChange(U)}},bounce:{get:function(){return this.ops.bounce.current},set:function(U){this.ops.bounce.onChange(U)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(U){this.ops.scaleX.onChange(U)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(U){this.ops.scaleY.onChange(U)}},particleColor:{get:function(){return this.ops.color.current},set:function(U){this.ops.color.onChange(U)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(U){this.ops.color.setEase(U)}},particleTint:{get:function(){return this.ops.tint.current},set:function(U){this.ops.tint.onChange(U)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(U){this.ops.alpha.onChange(U)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(U){this.ops.lifespan.onChange(U)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(U){this.ops.angle.onChange(U)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(U){this.ops.rotate.onChange(U)}},quantity:{get:function(){return this.ops.quantity.current},set:function(U){this.ops.quantity.onChange(U)}},delay:{get:function(){return this.ops.delay.current},set:function(U){this.ops.delay.onChange(U)}},hold:{get:function(){return this.ops.hold.current},set:function(U){this.ops.hold.onChange(U)}},flowCounter:{get:function(){return this.counters[0]},set:function(U){this.counters[0]=U}},frameCounter:{get:function(){return this.counters[1]},set:function(U){this.counters[1]=U}},animCounter:{get:function(){return this.counters[2]},set:function(U){this.counters[2]=U}},elapsed:{get:function(){return this.counters[3]},set:function(U){this.counters[3]=U}},stopCounter:{get:function(){return this.counters[4]},set:function(U){this.counters[4]=U}},completeFlag:{get:function(){return this.counters[5]},set:function(U){this.counters[5]=U}},zoneIndex:{get:function(){return this.counters[6]},set:function(U){this.counters[6]=U}},zoneTotal:{get:function(){return this.counters[7]},set:function(U){this.counters[7]=U}},currentFrame:{get:function(){return this.counters[8]},set:function(U){this.counters[8]=U}},currentAnim:{get:function(){return this.counters[9]},set:function(U){this.counters[9]=U}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var U,_=this.ops;for(U=0;U<N.length;U++){var $=N[U];_[$].destroy()}for(U=0;U<this.alive.length;U++)this.alive[U].destroy();for(U=0;U<this.dead.length;U++)this.dead[U].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});s.exports=H}),9871:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59996),m=e(61340),c=new m,o=new m,u=new m,r=new m,h=function(d,l,p,g){var x=c,y=o,E=u,w=r;g?(w.loadIdentity(),w.multiply(g),w.translate(l.x,l.y),w.rotate(l.rotation),w.scale(l.scaleX,l.scaleY)):w.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var C=d.currentContext,A=p.roundPixels,M=p.alpha,R=l.alpha,P=l.alive,b=P.length,F=l.viewBounds;if(!(!l.visible||b===0||F&&!a(F,p.worldView))){l.sortCallback&&l.depthSort(),p.addToRenderList(l);var I=l.scrollFactorX,L=l.scrollFactorY;C.save(),C.globalCompositeOperation=d.blendModes[l.blendMode];for(var D=0;D<b;D++){var O=P[D],z=O.alpha*R*M;if(!(z<=0||O.scaleX===0||O.scaleY===0)){E.applyITRS(O.x,O.y,O.rotation,O.scaleX,O.scaleY),x.copyFrom(p.matrix),x.multiplyWithOffset(w,-p.scrollX*I,-p.scrollY*L),E.e=O.x,E.f=O.y,x.multiply(E,y);var W=O.frame,k=W.canvasData;if(k.width>0&&k.height>0){var X=-W.halfWidth,V=-W.halfHeight;C.globalAlpha=z,C.save(),y.setToContext(C),A&&(X=Math.round(X),V=Math.round(V)),C.imageSmoothingEnabled=!W.source.scaleMode,C.drawImage(W.source.image,k.x,k.y,k.width,k.height,X,V,k.width,k.height),C.restore()}}}C.restore()}};s.exports=h}),92730:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(95540),u=e(31600);m.register("particles",function(r,h){r===void 0&&(r={});var d=c(r,"key",null),l=o(r,"config",null),p=new u(this.scene,0,0,d);return h!==void 0&&(r.add=h),a(this.scene,p,r),l&&p.setConfig(l),p})}),676:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(31600);a.register("particles",function(c,o,u,r){return c!==void 0&&typeof c=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new m(this.scene,c,o,u,r))})}),90668:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(21188),c=e(9871),s.exports={renderWebGL:m,renderCanvas:c}}),21188:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59996),m=e(61340),c=e(70554),o=new m,u=new m,r=new m,h=new m,d=function(l,p,g,x){var y=l.pipelines.set(p.pipeline),E=o,w=u,C=r,A=h;x?(A.loadIdentity(),A.multiply(x),A.translate(p.x,p.y),A.rotate(p.rotation),A.scale(p.scaleX,p.scaleY)):A.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY);var M=c.getTintAppendFloatAlpha,R=g.alpha,P=p.alpha;l.pipelines.preBatch(p);var b=p.alive,F=b.length,I=p.viewBounds;if(!(F===0||I&&!a(I,g.worldView))){p.sortCallback&&p.depthSort(),g.addToRenderList(p),E.copyFrom(g.matrix),E.multiplyWithOffset(A,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),l.setBlendMode(p.blendMode),p.mask&&(p.mask.preRenderWebGL(l,p,g),l.pipelines.set(p.pipeline));for(var L=p.tintFill,D,O,z=0;z<F;z++){var W=b[z],k=W.alpha*P*R;if(!(k<=0||W.scaleX===0||W.scaleY===0)){C.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),C.e=W.x,C.f=W.y,E.multiply(C,w);var X=W.frame;X.glTexture!==O&&(O=X.glTexture,D=y.setGameObject(p,X));var V=-X.halfWidth,G=-X.halfHeight,N=w.setQuad(V,G,V+X.width,G+X.height),H=M(W.tint,k);y.shouldFlush(6)&&(y.flush(),D=y.setGameObject(p,X)),y.batchQuad(p,N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],X.u0,X.v0,X.u1,X.v1,H,H,H,H,L,O,D)}}p.mask&&p.mask.postRenderWebGL(l,g),l.pipelines.postBatch(p)}};s.exports=d}),20286:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r){o===void 0&&(o=0),u===void 0&&(u=0),r===void 0&&(r=!0),this.emitter,this.x=o,this.y=u,this.active=r},update:function(){},destroy:function(){this.emitter=null}});s.exports=m}),9774:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),812:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="deathzone"}),30522:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="explode"}),96695:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),18677:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stop"}),20696:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={COMPLETE:e(9774),DEATH_ZONE:e(812),EXPLODE:e(30522),START:e(96695),STOP:e(18677)}}),18404:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={EmitterColorOp:e(76472),EmitterOp:e(44777),Events:e(20696),GravityWell:e(24502),Particle:e(56480),ParticleBounds:e(69601),ParticleEmitter:e(31600),ParticleProcessor:e(20286),Zones:e(21024)}}),26388:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u){this.source=o,this.killOnEnter=u},willKill:function(c){var o=c.worldPosition,u=this.source.contains(o.x,o.y);return u&&this.killOnEnter||!u&&!this.killOnEnter}});s.exports=m}),19909:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r,h,d,l){h===void 0&&(h=!1),d===void 0&&(d=!0),l===void 0&&(l=-1),this.source=o,this.points=[],this.quantity=u,this.stepRate=r,this.yoyo=h,this.counter=-1,this.seamless=d,this._length=0,this._direction=0,this.total=l,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var c=this.points[0],o=this.points[this.points.length-1];c.x===o.x&&c.y===o.y&&this.points.pop()}var u=this._length;return this._length=this.points.length,this._length<u&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(c){return this.source=c,this.updateSource()},getPoint:function(c){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(c.x=o.x,c.y=o.y)}});s.exports=m}),68875:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(26099),c=new a({initialize:function(u){this.source=u,this._tempVec=new m,this.total=-1},getPoint:function(o){var u=this._tempVec;this.source.getRandomPoint(u),o.x=u.x,o.y=u.y}});s.exports=c}),21024:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={DeathZone:e(26388),EdgeZone:e(19909),RandomZone:e(68875)}}),1159:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(68287),o=new a({Extends:c,Mixins:[m.PathFollower],initialize:function(r,h,d,l,p,g){c.call(this,r,d,l,p,g),this.path=h},preUpdate:function(u,r){this.anims.update(u,r),this.pathUpdate(u)}});s.exports=o}),90145:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(1159);a.register("follower",function(c,o,u,r,h){var d=new m(this.scene,c,o,u,r,h);return this.displayList.add(d),this.updateList.add(d),d})}),33663:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),m=e(83419),c=e(48803),o=e(90664),u=e(4703),r=e(45650),h=new m({Extends:u,initialize:function(l,p,g,x,y,E,w,C){x||(x="__DEFAULT"),u.call(this,l,p,g,x,y),this.type="Plane",this.anims=new a(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(E,w,C),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(d,l,p){d===void 0&&(d=8),l===void 0&&(l=8),p===void 0&&(p=!1);var g=!1;return p&&(g=!0),this.gridWidth=d,this.gridHeight=l,this.isTiled=p,this.clear(),c({mesh:this,widthSegments:d,heightSegments:l,isOrtho:!1,tile:p,flipY:g}),this},setSizeToFrame:function(d){d===void 0&&(d=!0);var l=this.frame;if(this.setPerspective(this.width/l.width,this.height/l.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!d)return this;var p=this.gridWidth,g=this.gridHeight,x=this.vertices,y=l.u0,E=l.u1,w=l.v0,C=l.v1,A,M,R=0;if(this.isTiled)for(w=l.v1,C=l.v0,M=0;M<g;M++)for(A=0;A<p;A++)x[R++].setUVs(y,C),x[R++].setUVs(y,w),x[R++].setUVs(E,C),x[R++].setUVs(y,w),x[R++].setUVs(E,w),x[R++].setUVs(E,C);else{var P=p+1,b=g+1,F=E-y,I=C-w,L=[];for(M=0;M<b;M++)for(A=0;A<P;A++){var D=y+F*(A/p),O=w+I*(M/g);L.push(D,O)}for(M=0;M<g;M++)for(A=0;A<p;A++){var z=(A+P*M)*2,W=(A+P*(M+1))*2,k=(A+1+P*(M+1))*2,X=(A+1+P*M)*2;x[R++].setUVs(L[z],L[z+1]),x[R++].setUVs(L[W],L[W+1]),x[R++].setUVs(L[X],L[X+1]),x[R++].setUVs(L[W],L[W+1]),x[R++].setUVs(L[k],L[k+1]),x[R++].setUVs(L[X],L[X+1])}}return this},setViewHeight:function(d){d===void 0&&(d=this.frame.height);var l=this.fov*(Math.PI/180);this.viewPosition.z=this.height/d/Math.tan(l/2),this.dirtyCache[10]=1},createCheckerboard:function(d,l,p,g,x){d===void 0&&(d=16777215),l===void 0&&(l=255),p===void 0&&(p=255),g===void 0&&(g=255),x===void 0&&(x=128);for(var y=o(d),E=o(l),w=[],C=0;C<16;C++)for(var A=0;A<16;A++)C<8&&A<8||C>7&&A>7?w.push(y.r,y.g,y.b,p):w.push(E.r,E.g,E.b,g);var M=this.scene.sys.textures.addUint8Array(r(),new Uint8Array(w),16,16);return this.removeCheckerboard(),this.setTexture(M),this.setSizeToFrame(),this.setViewHeight(x),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(d,l){return this.anims.play(d,l)},playReverse:function(d,l){return this.anims.playReverse(d,l)},playAfterDelay:function(d,l){return this.anims.playAfterDelay(d,l)},playAfterRepeat:function(d,l){return this.anims.playAfterRepeat(d,l)},stop:function(){return this.anims.stop()},stopAfterDelay:function(d){return this.anims.stopAfterDelay(d)},stopAfterRepeat:function(d){return this.anims.stopAfterRepeat(d)},stopOnFrame:function(d){return this.anims.stopOnFrame(d)},preUpdate:function(d,l){u.prototype.preUpdate.call(this,d,l),this.anims.update(d,l)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});s.exports=h}),56015:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(13059),c=e(44603),o=e(23568),u=e(35154),r=e(33663);c.register("plane",function(h,d){h===void 0&&(h={});var l=o(h,"key",null),p=o(h,"frame",null),g=u(h,"width",8),x=u(h,"height",8),y=u(h,"tile",!1),E=new r(this.scene,0,0,l,p,g,x,y);d!==void 0&&(h.add=d);var w=u(h,"checkerboard",null);if(w){var C=u(w,"color1",16777215),A=u(w,"color2",255),M=u(w,"alpha1",255),R=u(w,"alpha2",255),P=u(w,"height",128);E.createCheckerboard(C,A,M,R,P)}return a(this.scene,E,h),m(E,h),E})}),30985:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33663),m=e(39429);m.register("plane",function(c,o,u,r,h,d,l){return this.displayList.add(new a(this.scene,c,o,u,r,h,d,l))})}),80321:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(95643),o=e(30100),u=e(36060),r=e(67277),h=new a({Extends:c,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Transform,m.Visible,r],initialize:function(l,p,g,x,y,E,w){x===void 0&&(x=16777215),y===void 0&&(y=128),E===void 0&&(E=1),w===void 0&&(w=.1),c.call(this,l,"PointLight"),this.initPipeline(u.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(p,g),this.color=o(x),this.intensity=E,this.attenuation=w,this.width=y*2,this.height=y*2,this._radius=y},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this.width=d*2,this.height=d*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});s.exports=h}),39829:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(80321);m.register("pointlight",function(u,r){u===void 0&&(u={});var h=c(u,"color",16777215),d=c(u,"radius",128),l=c(u,"intensity",1),p=c(u,"attenuation",.1),g=new o(this.scene,0,0,h,d,l,p);return r!==void 0&&(u.add=r),a(this.scene,g,u),g})}),71255:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(80321);a.register("pointlight",function(c,o,u,r,h,d){return this.displayList.add(new m(this.scene,c,o,u,r,h,d))})}),67277:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(57787),s.exports={renderWebGL:m,renderCanvas:c}}),57787:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=function(c,o,u,r){u.addToRenderList(o);var h=c.pipelines.set(o.pipeline),d=a(o,u,r).calc,l=o.width,p=o.height,g=-o._radius,x=-o._radius,y=g+l,E=x+p,w=d.getX(0,0),C=d.getY(0,0),A=d.getX(g,x),M=d.getY(g,x),R=d.getX(g,E),P=d.getY(g,E),b=d.getX(y,E),F=d.getY(y,E),I=d.getX(y,x),L=d.getY(y,x);c.pipelines.preBatch(o),h.batchPointLight(o,u,A,M,R,P,b,F,I,L,w,C),c.pipelines.postBatch(o)};s.exports=m}),591:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(81320),c=e(88571),o=new a({Extends:c,initialize:function(r,h,d,l,p,g){h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=32),p===void 0&&(p=32),g===void 0&&(g=!0);var x=new m(r.sys.textures,"",l,p,g);c.call(this,r,h,d,x),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(u,r){this.width=u,this.height=r,this.updateDisplayOrigin();var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=u,h.hitArea.height=r),this},resize:function(u,r,h){return this.texture.setSize(u,r,h),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(u){var r=this.texture;return r.key=u,r.manager.addDynamicTexture(r)&&(this._saved=!0),r},fill:function(u,r,h,d,l,p){return this.texture.fill(u,r,h,d,l,p),this},clear:function(){return this.texture.clear(),this},stamp:function(u,r,h,d,l){return this.texture.stamp(u,r,h,d,l),this},erase:function(u,r,h){return this.texture.erase(u,r,h),this},draw:function(u,r,h,d,l){return this.texture.draw(u,r,h,d,l),this},drawFrame:function(u,r,h,d,l,p){return this.texture.drawFrame(u,r,h,d,l,p),this},repeat:function(u,r,h,d,l,p,g,x,y){return this.texture.repeat(u,r,h,d,l,p,g,x,y),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(u,r,h,d,l){return this.texture.batchDraw(u,r,h,d,l),this},batchDrawFrame:function(u,r,h,d,l,p){return this.texture.batchDrawFrame(u,r,h,d,l,p),this},endDraw:function(u){return this.texture.endDraw(u),this},snapshotArea:function(u,r,h,d,l,p,g){return this.texture.snapshotArea(u,r,h,d,l,p,g),this},snapshot:function(u,r,h){return this.snapshotArea(0,0,this.width,this.height,u,r,h)},snapshotPixel:function(u,r,h){return this.snapshotArea(u,r,1,1,h,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});s.exports=o}),34495:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(591);m.register("renderTexture",function(u,r){u===void 0&&(u={});var h=c(u,"x",0),d=c(u,"y",0),l=c(u,"width",32),p=c(u,"height",32),g=new o(this.scene,h,d,l,p);return r!==void 0&&(u.add=r),a(this.scene,g,u),g})}),60505:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(591);a.register("renderTexture",function(c,o,u,r){return this.displayList.add(new m(this.scene,c,o,u,r))})}),77757:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),m=e(83419),c=e(31401),o=e(95643),u=e(36060),r=e(38745),h=e(26099),d=new m({Extends:o,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Flip,c.Mask,c.Pipeline,c.PostPipeline,c.Size,c.Texture,c.Transform,c.Visible,c.ScrollFactor,r],initialize:function(p,g,x,y,E,w,C,A,M){y===void 0&&(y="__DEFAULT"),w===void 0&&(w=2),C===void 0&&(C=!0),o.call(this,p,"Rope"),this.anims=new a(this),this.points=w,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=y==="__DEFAULT",this.dirty=!1,this.horizontal=C,this._flipX=!1,this._flipY=!1,this._perp=new h,this.debugCallback=null,this.debugGraphic=null,this.setTexture(y,E),this.setPosition(g,x),this.setSizeToFrame(),this.initPipeline(u.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(w)&&this.resizeArrays(w.length),this.setPoints(w,A,M),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,p){var g=this.anims.currentFrame;this.anims.update(l,p),this.anims.currentFrame!==g&&(this.updateUVs(),this.updateVertices())},play:function(l,p,g){return this.anims.play(l,p,g),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(l,p,g){return l===void 0&&(l=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(l,p,g))},setVertical:function(l,p,g){return l===void 0&&(l=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(l,p,g)):this},setTintFill:function(l){return l===void 0&&(l=!1),this.tintFill=l,this},setAlphas:function(l,p){var g=this.points.length;if(g<1)return this;var x=this.alphas;l===void 0?l=[1]:!Array.isArray(l)&&p===void 0&&(l=[l]);var y,E=0;if(p!==void 0)for(y=0;y<g;y++)E=y*2,x[E]=l,x[E+1]=p;else if(l.length===g)for(y=0;y<g;y++)E=y*2,x[E]=l[y],x[E+1]=l[y];else{var w=l[0];for(y=0;y<g;y++)E=y*2,l.length>E&&(w=l[E]),x[E]=w,l.length>E+1&&(w=l[E+1]),x[E+1]=w}return this},setColors:function(l){var p=this.points.length;if(p<1)return this;var g=this.colors;l===void 0?l=[16777215]:Array.isArray(l)||(l=[l]);var x,y=0;if(l.length===p)for(x=0;x<p;x++)y=x*2,g[y]=l[x],g[y+1]=l[x];else{var E=l[0];for(x=0;x<p;x++)y=x*2,l.length>y&&(E=l[y]),g[y]=E,l.length>y+1&&(E=l[y+1]),g[y+1]=E}return this},setPoints:function(l,p,g){if(l===void 0&&(l=2),typeof l=="number"){var x=l;x<2&&(x=2),l=[];var y,E,w;if(this.horizontal)for(w=-this.frame.halfWidth,E=this.frame.width/(x-1),y=0;y<x;y++)l.push({x:w+y*E,y:0});else for(w=-this.frame.halfHeight,E=this.frame.height/(x-1),y=0;y<x;y++)l.push({x:0,y:w+y*E})}var C=l.length,A=this.points.length;return C<1?(console.warn("Rope: Not enough points given"),this):(C===1&&(l.unshift({x:0,y:0}),C++),A!==C&&this.resizeArrays(C),this.dirty=!0,this.points=l,this.updateUVs(),p!=null&&this.setColors(p),g!=null&&this.setAlphas(g),this)},updateUVs:function(){for(var l=this.uv,p=this.points.length,g=this.frame.u0,x=this.frame.v0,y=this.frame.u1,E=this.frame.v1,w=(y-g)/(p-1),C=(E-x)/(p-1),A=0;A<p;A++){var M=A*4,R,P,b,F;this.horizontal?(this._flipX?(R=y-A*w,b=y-A*w):(R=g+A*w,b=g+A*w),this._flipY?(P=E,F=x):(P=x,F=E)):(this._flipX?(R=g,b=y):(R=y,b=g),this._flipY?(P=E-A*C,F=E-A*C):(P=x+A*C,F=x+A*C)),l[M+0]=R,l[M+1]=P,l[M+2]=b,l[M+3]=F}return this},resizeArrays:function(l){var p=this.colors,g=this.alphas;this.vertices=new Float32Array(l*4),this.uv=new Float32Array(l*4),p=new Uint32Array(l*2),g=new Float32Array(l*2);for(var x=0;x<l*2;x++)p[x]=16777215,g[x]=1;return this.colors=p,this.alphas=g,this.dirty=!0,this},updateVertices:function(){var l=this._perp,p=this.points,g=this.vertices,x=p.length;if(this.dirty=!1,!(x<1)){for(var y,E=p[0],w=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,C=0;C<x;C++){var A=p[C],M=C*4;C<x-1?y=p[C+1]:y=A,l.x=y.y-E.y,l.y=-(y.x-E.x);var R=l.length();l.x/=R,l.y/=R,l.x*=w,l.y*=w,g[M]=A.x+l.x,g[M+1]=A.y+l.y,g[M+2]=A.x-l.x,g[M+3]=A.y-l.y,E=A}return this}},setDebug:function(l,p){return this.debugGraphic=l,!l&&!p?this.debugCallback=null:p?this.debugCallback=p:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(l,p,g){var x=l.debugGraphic,y=g[0],E=g[1],w=g[2],C=g[3];x.lineBetween(y,E,w,C);for(var A=4;A<p;A+=4){var M=g[A+0],R=g[A+1],P=g[A+2],b=g[A+3];x.lineBetween(y,E,M,R),x.lineBetween(w,C,P,b),x.lineBetween(w,C,M,R),x.lineBetween(M,R,P,b),y=M,E=R,w=P,C=b}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(l){return this._flipX=l,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(l){return this._flipY=l,this.updateUVs()}}});s.exports=d}),95262:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};s.exports=T}),26209:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(35154),u=e(77757);m.register("rope",function(r,h){r===void 0&&(r={});var d=c(r,"key",null),l=c(r,"frame",null),p=c(r,"horizontal",!0),g=o(r,"points",void 0),x=o(r,"colors",void 0),y=o(r,"alphas",void 0),E=new u(this.scene,0,0,d,l,g,p,x,y);return h!==void 0&&(r.add=h),a(this.scene,E,r),E})}),96819:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(77757),m=e(39429);m.register("rope",function(c,o,u,r,h,d,l,p){return this.displayList.add(new a(this.scene,c,o,u,r,h,d,l,p))})}),38745:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(20439),c=e(95262),s.exports={renderWebGL:m,renderCanvas:c}}),20439:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=e(70554),c=function(o,u,r,h){r.addToRenderList(u);var d=o.pipelines.set(u.pipeline,u),l=a(u,r,h).calc,p=u.vertices,g=u.uv,x=u.colors,y=u.alphas,E=u.alpha,w=m.getTintAppendFloatAlpha,C=r.roundPixels,A=p.length,M=Math.floor(A*.5);d.flush(),o.pipelines.preBatch(u);var R=d.setGameObject(u),P=d.vertexViewF32,b=d.vertexViewU32,F=d.vertexCount*d.currentShader.vertexComponentCount-1,I=0,L=u.tintFill;u.dirty&&u.updateVertices();for(var D=u.debugCallback,O=[],z=0;z<A;z+=2){var W=p[z+0],k=p[z+1],X=W*l.a+k*l.c+l.e,V=W*l.b+k*l.d+l.f;C&&(X=Math.round(X),V=Math.round(V)),P[++F]=X,P[++F]=V,P[++F]=g[z+0],P[++F]=g[z+1],P[++F]=R,P[++F]=L,b[++F]=w(x[I],r.alpha*(y[I]*E)),I++,D&&(O[z+0]=X,O[z+1]=V)}D&&D.call(u,u,A,O),d.vertexCount+=M,d.currentBatch.count=d.vertexCount-d.currentBatch.start,o.pipelines.postBatch(u)};s.exports=c}),20071:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(95643),o=e(95540),u=e(79291),r=e(61622),h=e(25479),d=e(61340),l=e(95428),p=e(92503),g=new a({Extends:c,Mixins:[m.ComputedSize,m.Depth,m.GetBounds,m.Mask,m.Origin,m.ScrollFactor,m.Transform,m.Visible,h],initialize:function(y,E,w,C,A,M,R,P){w===void 0&&(w=0),C===void 0&&(C=0),A===void 0&&(A=128),M===void 0&&(M=128),c.call(this,y,"Shader"),this.blendMode=-1,this.shader;var b=y.sys.renderer;this.renderer=b,this.gl=b.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=b.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=b.width,this._rendererHeight=b.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(w,C),this.setSize(A,M),this.setOrigin(.5,.5),this.setShader(E,R,P),this.renderer.on(p.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(x){return this.renderToTexture?!0:!(c.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&x.id)},setRenderToTexture:function(x,y){if(!this.renderToTexture){var E=this.width,w=this.height,C=this.renderer;this.glTexture=C.createTextureFromSource(null,E,w,0),this.framebuffer=C.createFramebuffer(E,w,this.glTexture,!1),this._rendererWidth=E,this._rendererHeight=w,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),x&&(this.texture=this.scene.sys.textures.addGLTexture(x,this.glTexture))}return this.shader&&(C.pipelines.clear(),this.load(),this.flush(),C.pipelines.rebind()),this},setShader:function(x,y,E){if(this.renderer.contextLost)return this._deferSetShader={key:x,textures:y,textureData:E},this;if(y===void 0&&(y=[]),typeof x=="string"){var w=this.scene.sys.cache.shader;if(!w.has(x))return console.warn("Shader missing: "+x),this;this.shader=w.get(x)}else this.shader=x;var C=this.gl,A=this.renderer;this.program&&A.deleteProgram(this.program);var M=A.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);C.uniformMatrix4fv(C.getUniformLocation(M.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),C.uniformMatrix4fv(C.getUniformLocation(M.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),C.uniform2f(C.getUniformLocation(M.webGLProgram,"uResolution"),this.width,this.height),this.program=M;var R=new Date,P={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[R.getFullYear(),R.getMonth(),R.getDate(),R.getHours()*60*60+R.getMinutes()*60+R.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=u(!0,{},this.shader.uniforms,P):this.uniforms=P;for(var b=0;b<4;b++)y[b]&&this.setSampler2D("iChannel"+b,y[b],b,E);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(x){return this.pointer=x,this},projOrtho:function(x,y,E,w){if(this.renderer.contextLost){this._deferProjOrtho={left:x,right:y,bottom:E,top:w};return}var C=-1e3,A=1e3,M=1/(x-y),R=1/(E-w),P=1/(C-A),b=this.projectionMatrix;b[0]=-2*M,b[5]=-2*R,b[10]=2*P,b[12]=(x+y)*M,b[13]=(w+E)*R,b[14]=(A+C)*P;var F=this.program,I=this.gl,L=this.renderer;L.setProgram(F),I.uniformMatrix4fv(I.getUniformLocation(F.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=y,this._rendererHeight=E},initUniforms:function(){var x=this.renderer.glFuncMap,y=this.program;this._textureCount=0;for(var E in this.uniforms){var w=this.uniforms[E],C=w.type,A=x[C];w.uniformLocation=this.renderer.createUniformLocation(y,E),C!=="sampler2D"&&(w.glMatrix=A.matrix,w.glValueLength=A.length,w.glFunc=A.func)}},setSampler2DBuffer:function(x,y,E,w,C,A){C===void 0&&(C=0),A===void 0&&(A={});var M=this.uniforms[x];return M.value=y,A.width=E,A.height=w,M.textureData=A,this._textureCount=C,this.initSampler2D(M),this},setSampler2D:function(x,y,E,w){E===void 0&&(E=0);var C=this.scene.sys.textures;if(C.exists(y)){var A=C.getFrame(y);if(A.glTexture&&A.glTexture.isRenderTexture)return this.setSampler2DBuffer(x,A.glTexture,A.width,A.height,E,w);var M=this.uniforms[x],R=A.source;M.textureKey=y,M.source=R.image,M.value=A.glTexture,R.isGLTexture&&(w||(w={}),w.width=R.width,w.height=R.height),w&&(M.textureData=w),this._textureCount=E,this.initSampler2D(M)}return this},setUniform:function(x,y){return r(this.uniforms,x,y),this},getUniform:function(x){return o(this.uniforms,x,null)},setChannel0:function(x,y){return this.setSampler2D("iChannel0",x,0,y)},setChannel1:function(x,y){return this.setSampler2D("iChannel1",x,1,y)},setChannel2:function(x,y){return this.setSampler2D("iChannel2",x,2,y)},setChannel3:function(x,y){return this.setSampler2D("iChannel3",x,3,y)},initSampler2D:function(x){if(x.value){var y=x.textureData;if(y&&!x.value.isRenderTexture){var E=this.gl,w=x.value,C=E[o(y,"magFilter","linear").toUpperCase()],A=E[o(y,"minFilter","linear").toUpperCase()],M=E[o(y,"wrapS","repeat").toUpperCase()],R=E[o(y,"wrapT","repeat").toUpperCase()],P=E[o(y,"format","rgba").toUpperCase()],b=o(y,"flipY",!1),F=o(y,"width",w.width),I=o(y,"height",w.height),L=o(y,"source",w.pixels);y.repeat&&(M=E.REPEAT,R=E.REPEAT),y.width&&(L=null),w.update(L,F,I,b,M,R,A,C,P)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var x=this.gl,y=this.uniforms,E,w,C,A,M,R=0;for(var P in y)E=y[P],C=E.glFunc,w=E.glValueLength,A=E.uniformLocation,M=E.value,M!==null&&(w===1?E.glMatrix?C.call(x,A.webGLUniformLocation,E.transpose,M):C.call(x,A.webGLUniformLocation,M):w===2?C.call(x,A.webGLUniformLocation,M.x,M.y):w===3?C.call(x,A.webGLUniformLocation,M.x,M.y,M.z):w===4?C.call(x,A.webGLUniformLocation,M.x,M.y,M.z,M.w):E.type==="sampler2D"&&(x.activeTexture(x.TEXTURE0+R),x.bindTexture(x.TEXTURE_2D,M.webGLTexture),x.uniform1i(A.webGLUniformLocation,R),R++))},load:function(x){var y=this.gl,E=this.width,w=this.height,C=this.renderer,A=this.program,M=this.viewMatrix;if(!this.renderToTexture){var R=-this._displayOriginX,P=-this._displayOriginY;M[0]=x[0],M[1]=x[1],M[4]=x[2],M[5]=x[3],M[8]=x[4],M[9]=x[5],M[12]=M[0]*R+M[4]*P,M[13]=M[1]*R+M[5]*P}y.useProgram(A.webGLProgram),y.uniformMatrix4fv(y.getUniformLocation(A.webGLProgram,"uViewMatrix"),!1,M),y.uniformMatrix4fv(y.getUniformLocation(A.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),y.uniform2f(y.getUniformLocation(A.webGLProgram,"uResolution"),this.width,this.height);var b=this.uniforms,F=b.resolution;F.value.x=E,F.value.y=w,b.time.value=C.game.loop.getDuration();var I=this.pointer;if(I){var L=b.mouse,D=I.x/E,O=1-I.y/w;L.value.x=D.toFixed(2),L.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var x=this.width,y=this.height,E=this.program,w=this.gl,C=this.vertexBuffer,A=this.renderer,M=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(A.setFramebuffer(this.framebuffer),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT)),w.bindBuffer(w.ARRAY_BUFFER,C.webGLBuffer);var R=w.getAttribLocation(E.webGLProgram,"inPosition");R!==-1&&(w.enableVertexAttribArray(R),w.vertexAttribPointer(R,2,w.FLOAT,!1,M,0));var P=this.vertexViewF32;P[3]=y,P[4]=x,P[5]=y,P[8]=x,P[9]=y,P[10]=x;var b=6;w.bufferSubData(w.ARRAY_BUFFER,0,this.bytes.subarray(0,b*M)),w.drawArrays(w.TRIANGLES,0,b),this.renderToTexture&&A.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var x=this._deferSetShader.key,y=this._deferSetShader.textures,E=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(x,y,E)}if(this._deferProjOrtho!==null){var w=this._deferProjOrtho.left,C=this._deferProjOrtho.right,A=this._deferProjOrtho.bottom,M=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(w,C,A,M)}},preDestroy:function(){var x=this.renderer;x.off(p.RESTORE_WEBGL,this.onContextRestored,this),x.deleteProgram(this.program),x.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(x.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),l(this.uniforms,function(y){x.deleteUniformLocation(y.uniformLocation),y.uniformLocation=null})}});s.exports=g}),80464:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};s.exports=T}),54935:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(20071);m.register("shader",function(u,r){u===void 0&&(u={});var h=c(u,"key",null),d=c(u,"x",0),l=c(u,"y",0),p=c(u,"width",128),g=c(u,"height",128),x=new o(this.scene,h,d,l,p,g);return r!==void 0&&(u.add=r),a(this.scene,x,u),x})}),74177:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20071),m=e(39429);m.register("shader",function(c,o,u,r,h,d,l){return this.displayList.add(new a(this.scene,c,o,u,r,h,d,l))})}),25479:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(19257),c=e(80464),s.exports={renderWebGL:m,renderCanvas:c}}),19257:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=function(c,o,u,r){if(o.shader){if(u.addToRenderList(o),c.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var h=a(o,u,r).calc;(c.width!==o._rendererWidth||c.height!==o._rendererHeight)&&o.projOrtho(0,c.width,c.height,0),o.load(h.matrix),o.flush()}c.pipelines.rebind()}};s.exports=m}),10441:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),m=function(c,o,u,r,h,d){for(var l=a.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*r),p=u.pathData,g=u.pathIndexes,x=0;x<g.length;x+=3){var y=g[x]*2,E=g[x+1]*2,w=g[x+2]*2,C=p[y+0]-h,A=p[y+1]-d,M=p[E+0]-h,R=p[E+1]-d,P=p[w+0]-h,b=p[w+1]-d,F=o.getX(C,A),I=o.getY(C,A),L=o.getX(M,R),D=o.getY(M,R),O=o.getX(P,b),z=o.getY(P,b);c.batchTri(u,F,I,L,D,O,z,0,0,1,1,l,l,l,2)}};s.exports=m}),65960:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=m||a.fillColor,u=c||a.fillAlpha,r=(o&16711680)>>>16,h=(o&65280)>>>8,d=o&255;e.fillStyle="rgba("+r+","+h+","+d+","+u+")"};s.exports=T}),75177:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=m||a.strokeColor,u=c||a.strokeAlpha,r=(o&16711680)>>>16,h=(o&65280)>>>8,d=o&255;e.strokeStyle="rgba("+r+","+h+","+d+","+u+")",e.lineWidth=a.lineWidth};s.exports=T}),17803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(95643),o=e(23031),u=new a({Extends:c,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Transform,m.Visible],initialize:function(h,d,l){d===void 0&&(d="Shape"),c.call(this,h,d),this.geom=l,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(r,h){return h===void 0&&(h=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=h,this.isFilled=!0),this},setStrokeStyle:function(r,h,d){return d===void 0&&(d=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=h,this.strokeAlpha=d,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,h){return this.width=r,this.height=h,this},setDisplaySize:function(r,h){return this.displayWidth=r,this.displayHeight=h,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});s.exports=u}),34682:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),m=function(c,o,u,r,h){var d=c.strokeTint,l=a.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*u);d.TL=l,d.TR=l,d.BL=l,d.BR=l;var p=o.pathData,g=p.length-1,x=o.lineWidth,y=x/2,E=p[0]-r,w=p[1]-h;o.closePath||(g-=2);for(var C=2;C<g;C+=2){var A=p[C]-r,M=p[C+1]-h;c.batchLine(E,w,A,M,y,y,x,C-2,o.closePath?C===g-1:!1),E=A,w=M}};s.exports=m}),23629:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13609),m=e(83419),c=e(39506),o=e(94811),u=e(96503),r=e(36383),h=e(17803),d=new m({Extends:h,Mixins:[a],initialize:function(p,g,x,y,E,w,C,A,M){g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=128),E===void 0&&(E=0),w===void 0&&(w=360),C===void 0&&(C=!1),h.call(this,p,"Arc",new u(0,0,y)),this._startAngle=E,this._endAngle=w,this._anticlockwise=C,this._iterations=.01,this.setPosition(g,x);var R=this.geom.radius*2;this.setSize(R,R),A!==void 0&&this.setFillStyle(A,M),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(l){this._iterations=l,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(l){this.geom.radius=l;var p=l*2;this.setSize(p,p),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(l){this._startAngle=l,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(l){this._endAngle=l,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(l){this._anticlockwise=l,this.updateData()}},setRadius:function(l){return this.radius=l,this},setIterations:function(l){return l===void 0&&(l=.01),this.iterations=l,this},setStartAngle:function(l,p){return this._startAngle=l,p!==void 0&&(this._anticlockwise=p),this.updateData()},setEndAngle:function(l,p){return this._endAngle=l,p!==void 0&&(this._anticlockwise=p),this.updateData()},updateData:function(){var l=this._iterations,p=l,g=this.geom.radius,x=c(this._startAngle),y=c(this._endAngle),E=this._anticlockwise,w=g,C=g;y-=x,E?y<-r.PI2?y=-r.PI2:y>0&&(y=-r.PI2+y%r.PI2):y>r.PI2?y=r.PI2:y<0&&(y=r.PI2+y%r.PI2);for(var A=[w+Math.cos(x)*g,C+Math.sin(x)*g],M;p<1;)M=y*p+x,A.push(w+Math.cos(M)*g,C+Math.sin(M)*g),p+=l;return M=y+x,A.push(w+Math.cos(M)*g,C+Math.sin(M)*g),A.push(w+Math.cos(x)*g,C+Math.sin(x)*g),this.pathIndexes=o(A),this.pathData=A,this}});s.exports=d}),42542:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39506),m=e(65960),c=e(75177),o=e(20926),u=function(r,h,d,l){d.addToRenderList(h);var p=r.currentContext;if(o(r,p,h,d,l)){var g=h.radius;p.beginPath(),p.arc(g-h.originX*(g*2),g-h.originY*(g*2),g,a(h._startAngle),a(h._endAngle),h.anticlockwise),h.closePath&&p.closePath(),h.isFilled&&(m(p,h),p.fill()),h.isStroked&&(c(p,h),p.stroke()),p.restore()}};s.exports=u}),42563:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23629),m=e(39429);m.register("arc",function(c,o,u,r,h,d,l,p){return this.displayList.add(new a(this.scene,c,o,u,r,h,d,l,p))}),m.register("circle",function(c,o,u,r,h){return this.displayList.add(new a(this.scene,c,o,u,0,360,!1,r,h))})}),13609:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(41447),c=e(42542),s.exports={renderWebGL:m,renderCanvas:c}}),41447:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=e(10441),c=e(34682),o=function(u,r,h,d){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=a(r,h,d),g=l.calcMatrix.copyFrom(p.calc),x=r._displayOriginX,y=r._displayOriginY,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&m(l,g,r,E,x,y),r.isStroked&&c(l,r,E,x,y),u.pipelines.postBatch(r)};s.exports=o}),89:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(33141),c=e(94811),o=e(87841),u=e(17803),r=new a({Extends:u,Mixins:[m],initialize:function(d,l,p,g,x,y){l===void 0&&(l=0),p===void 0&&(p=0),u.call(this,d,"Curve",g),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(l,p),x!==void 0&&this.setFillStyle(x,y),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){var h=this._curveBounds,d=this._smoothness;this.geom.getBounds(h,d),this.setSize(h.width,h.height),this.updateDisplayOrigin();for(var l=[],p=this.geom.getPoints(d),g=0;g<p.length;g++)l.push(p[g].x,p[g].y);return l.push(p[0].x,p[0].y),this.pathIndexes=c(l),this.pathData=l,this}});s.exports=r}),3170:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),m=e(75177),c=e(20926),o=function(u,r,h,d){h.addToRenderList(r);var l=u.currentContext;if(c(u,l,r,h,d)){var p=r._displayOriginX+r._curveBounds.x,g=r._displayOriginY+r._curveBounds.y,x=r.pathData,y=x.length-1,E=x[0]-p,w=x[1]-g;l.beginPath(),l.moveTo(E,w),r.closePath||(y-=2);for(var C=2;C<y;C+=2){var A=x[C]-p,M=x[C+1]-g;l.lineTo(A,M)}r.closePath&&l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(m(l,r),l.stroke()),l.restore()}};s.exports=o}),40511:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(89);a.register("curve",function(c,o,u,r,h){return this.displayList.add(new m(this.scene,c,o,u,r,h))})}),33141:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(53987),c=e(3170),s.exports={renderWebGL:m,renderCanvas:c}}),53987:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),m=e(91296),c=e(34682),o=function(u,r,h,d){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=m(r,h,d),g=l.calcMatrix.copyFrom(p.calc),x=r._displayOriginX+r._curveBounds.x,y=r._displayOriginY+r._curveBounds.y,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&a(l,g,r,E,x,y),r.isStroked&&c(l,r,E,x,y),u.pipelines.postBatch(r)};s.exports=o}),19921:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(94811),c=e(54205),o=e(8497),u=e(17803),r=new a({Extends:u,Mixins:[c],initialize:function(d,l,p,g,x,y,E){l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=128),x===void 0&&(x=128),u.call(this,d,"Ellipse",new o(g/2,x/2,g,x)),this._smoothness=64,this.setPosition(l,p),this.width=g,this.height=x,y!==void 0&&this.setFillStyle(y,E),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(h){this._smoothness=h,this.updateData()}},setSize:function(h,d){return this.width=h,this.height=d,this.geom.setPosition(h/2,d/2),this.geom.setSize(h,d),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(h){return this._smoothness=h,this.updateData()},updateData:function(){for(var h=[],d=this.geom.getPoints(this._smoothness),l=0;l<d.length;l++)h.push(d[l].x,d[l].y);return h.push(d[0].x,d[0].y),this.pathIndexes=m(h),this.pathData=h,this}});s.exports=r}),7930:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),m=e(75177),c=e(20926),o=function(u,r,h,d){h.addToRenderList(r);var l=u.currentContext;if(c(u,l,r,h,d)){var p=r._displayOriginX,g=r._displayOriginY,x=r.pathData,y=x.length-1,E=x[0]-p,w=x[1]-g;l.beginPath(),l.moveTo(E,w),r.closePath||(y-=2);for(var C=2;C<y;C+=2){var A=x[C]-p,M=x[C+1]-g;l.lineTo(A,M)}l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(m(l,r),l.stroke()),l.restore()}};s.exports=o}),1543:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19921),m=e(39429);m.register("ellipse",function(c,o,u,r,h,d){return this.displayList.add(new a(this.scene,c,o,u,r,h,d))})}),54205:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(19467),c=e(7930),s.exports={renderWebGL:m,renderCanvas:c}}),19467:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),m=e(91296),c=e(34682),o=function(u,r,h,d){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=m(r,h,d),g=l.calcMatrix.copyFrom(p.calc),x=r._displayOriginX,y=r._displayOriginY,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&a(l,g,r,E,x,y),r.isStroked&&c(l,r,E,x,y),u.pipelines.postBatch(r)};s.exports=o}),30479:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(17803),c=e(26015),o=new a({Extends:m,Mixins:[c],initialize:function(r,h,d,l,p,g,x,y,E,w,C){h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=128),p===void 0&&(p=128),g===void 0&&(g=32),x===void 0&&(x=32),m.call(this,r,"Grid",null),this.cellWidth=g,this.cellHeight=x,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(h,d),this.setSize(l,p),this.setFillStyle(y,E),w!==void 0&&this.setOutlineStyle(w,C),this.updateDisplayOrigin()},setFillStyle:function(u,r){return r===void 0&&(r=1),u===void 0?this.showCells=!1:(this.fillColor=u,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(u,r){return r===void 0&&(r=1),u===void 0?this.showAltCells=!1:(this.altFillColor=u,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(u,r){return r===void 0&&(r=1),u===void 0?this.showOutline=!1:(this.outlineFillColor=u,this.outlineFillAlpha=r,this.showOutline=!0),this}});s.exports=o}),49912:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),m=e(75177),c=e(20926),o=function(u,r,h,d){h.addToRenderList(r);var l=u.currentContext;if(c(u,l,r,h,d)){var p=-r._displayOriginX,g=-r._displayOriginY,x=h.alpha*r.alpha,y=r.width,E=r.height,w=r.cellWidth,C=r.cellHeight,A=Math.ceil(y/w),M=Math.ceil(E/C),R=w,P=C,b=w-(A*w-y),F=C-(M*C-E),I=r.showCells,L=r.showAltCells,D=r.showOutline,O=0,z=0,W=0,k=0,X=0;if(D&&(R--,P--,b===w&&b--,F===C&&F--),I&&r.fillAlpha>0)for(a(l,r),z=0;z<M;z++)for(L&&(W=z%2),O=0;O<A;O++){if(L&&W){W=0;continue}W++,k=O<A-1?R:b,X=z<M-1?P:F,l.fillRect(p+O*w,g+z*C,k,X)}if(L&&r.altFillAlpha>0)for(a(l,r,r.altFillColor,r.altFillAlpha*x),z=0;z<M;z++)for(L&&(W=z%2),O=0;O<A;O++){if(L&&!W){W=1;continue}W=0,k=O<A-1?R:b,X=z<M-1?P:F,l.fillRect(p+O*w,g+z*C,k,X)}if(D&&r.outlineFillAlpha>0){for(m(l,r,r.outlineFillColor,r.outlineFillAlpha*x),O=1;O<A;O++){var V=O*w;l.beginPath(),l.moveTo(V+p,g),l.lineTo(V+p,E+g),l.stroke()}for(z=1;z<M;z++){var G=z*C;l.beginPath(),l.moveTo(p,G+g),l.lineTo(p+y,G+g),l.stroke()}}l.restore()}};s.exports=o}),34137:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(30479);a.register("grid",function(c,o,u,r,h,d,l,p,g,x){return this.displayList.add(new m(this.scene,c,o,u,r,h,d,l,p,g,x))})}),26015:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(46161),c=e(49912),s.exports={renderWebGL:m,renderCanvas:c}}),46161:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=e(70554),c=function(o,u,r,h){r.addToRenderList(u);var d=o.pipelines.set(u.pipeline),l=a(u,r,h),p=d.calcMatrix.copyFrom(l.calc);p.translate(-u._displayOriginX,-u._displayOriginY);var g=r.alpha*u.alpha,x=u.width,y=u.height,E=u.cellWidth,w=u.cellHeight,C=Math.ceil(x/E),A=Math.ceil(y/w),M=E,R=w,P=E-(C*E-x),b=w-(A*w-y),F,I,L=u.showCells,D=u.showAltCells,O=u.showOutline,z=0,W=0,k=0,X=0,V=0;if(O&&(M--,R--,P===E&&P--,b===w&&b--),o.pipelines.preBatch(u),L&&u.fillAlpha>0)for(F=d.fillTint,I=m.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*g),F.TL=I,F.TR=I,F.BL=I,F.BR=I,W=0;W<A;W++)for(D&&(k=W%2),z=0;z<C;z++){if(D&&k){k=0;continue}k++,X=z<C-1?M:P,V=W<A-1?R:b,d.batchFillRect(z*E,W*w,X,V)}if(D&&u.altFillAlpha>0)for(F=d.fillTint,I=m.getTintAppendFloatAlpha(u.altFillColor,u.altFillAlpha*g),F.TL=I,F.TR=I,F.BL=I,F.BR=I,W=0;W<A;W++)for(D&&(k=W%2),z=0;z<C;z++){if(D&&!k){k=1;continue}k=0,X=z<C-1?M:P,V=W<A-1?R:b,d.batchFillRect(z*E,W*w,X,V)}if(O&&u.outlineFillAlpha>0){var G=d.strokeTint,N=m.getTintAppendFloatAlpha(u.outlineFillColor,u.outlineFillAlpha*g);for(G.TL=N,G.TR=N,G.BL=N,G.BR=N,z=1;z<C;z++){var H=z*E;d.batchLine(H,0,H,y,u.lineWidth,u.lineWidth,1,0,!1)}for(W=1;W<A;W++){var U=W*w;d.batchLine(0,U,x,U,u.lineWidth,u.lineWidth,1,0,!1)}}o.pipelines.postBatch(u)};s.exports=c}),61475:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99651),m=e(83419),c=e(17803),o=new m({Extends:c,Mixins:[a],initialize:function(r,h,d,l,p,g,x,y){h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=48),p===void 0&&(p=32),g===void 0&&(g=15658734),x===void 0&&(x=10066329),y===void 0&&(y=13421772),c.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=g,this.fillLeft=x,this.fillRight=y,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(h,d),this.setSize(l,p),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setFaces:function(u,r,h){return u===void 0&&(u=!0),r===void 0&&(r=!0),h===void 0&&(h=!0),this.showTop=u,this.showLeft=r,this.showRight=h,this},setFillStyle:function(u,r,h){return this.fillTop=u,this.fillLeft=r,this.fillRight=h,this.isFilled=!0,this}});s.exports=o}),11508:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),m=e(20926),c=function(o,u,r,h){r.addToRenderList(u);var d=o.currentContext;if(m(o,d,u,r,h)&&u.isFilled){var l=u.width,p=u.height,g=l/2,x=l/u.projection;u.showTop&&(a(d,u,u.fillTop),d.beginPath(),d.moveTo(-g,-p),d.lineTo(0,-x-p),d.lineTo(g,-p),d.lineTo(g,-1),d.lineTo(0,x-1),d.lineTo(-g,-1),d.lineTo(-g,-p),d.fill()),u.showLeft&&(a(d,u,u.fillLeft),d.beginPath(),d.moveTo(-g,0),d.lineTo(0,x),d.lineTo(0,x-p),d.lineTo(-g,-p),d.lineTo(-g,0),d.fill()),u.showRight&&(a(d,u,u.fillRight),d.beginPath(),d.moveTo(g,0),d.lineTo(0,x),d.lineTo(0,x-p),d.lineTo(g,-p),d.lineTo(g,0),d.fill()),d.restore()}};s.exports=c}),3933:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(61475);a.register("isobox",function(c,o,u,r,h,d,l){return this.displayList.add(new m(this.scene,c,o,u,r,h,d,l))})}),99651:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(68149),c=e(11508),s.exports={renderWebGL:m,renderCanvas:c}}),68149:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=e(70554),c=function(o,u,r,h){r.addToRenderList(u);var d=o.pipelines.set(u.pipeline),l=a(u,r,h),p=d.calcMatrix.copyFrom(l.calc),g=u.width,x=u.height,y=g/2,E=g/u.projection,w=r.alpha*u.alpha;if(u.isFilled){var C,A,M,R,P,b,F,I,L;o.pipelines.preBatch(u),u.showTop&&(C=m.getTintAppendFloatAlpha(u.fillTop,w),A=p.getX(-y,-x),M=p.getY(-y,-x),R=p.getX(0,-E-x),P=p.getY(0,-E-x),b=p.getX(y,-x),F=p.getY(y,-x),I=p.getX(0,E-x),L=p.getY(0,E-x),d.batchQuad(u,A,M,R,P,b,F,I,L,0,0,1,1,C,C,C,C,2)),u.showLeft&&(C=m.getTintAppendFloatAlpha(u.fillLeft,w),A=p.getX(-y,0),M=p.getY(-y,0),R=p.getX(0,E),P=p.getY(0,E),b=p.getX(0,E-x),F=p.getY(0,E-x),I=p.getX(-y,-x),L=p.getY(-y,-x),d.batchQuad(u,A,M,R,P,b,F,I,L,0,0,1,1,C,C,C,C,2)),u.showRight&&(C=m.getTintAppendFloatAlpha(u.fillRight,w),A=p.getX(y,0),M=p.getY(y,0),R=p.getX(0,E),P=p.getY(0,E),b=p.getX(0,E-x),F=p.getY(0,E-x),I=p.getX(y,-x),L=p.getY(y,-x),d.batchQuad(u,A,M,R,P,b,F,I,L,0,0,1,1,C,C,C,C,2)),o.pipelines.postBatch(u)}};s.exports=c}),16933:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(60561),c=e(17803),o=new a({Extends:c,Mixins:[m],initialize:function(r,h,d,l,p,g,x,y,E){h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l=48),p===void 0&&(p=32),g===void 0&&(g=!1),x===void 0&&(x=15658734),y===void 0&&(y=10066329),E===void 0&&(E=13421772),c.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=x,this.fillLeft=y,this.fillRight=E,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=g,this.isFilled=!0,this.setPosition(h,d),this.setSize(l,p),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setReversed:function(u){return this.isReversed=u,this},setFaces:function(u,r,h){return u===void 0&&(u=!0),r===void 0&&(r=!0),h===void 0&&(h=!0),this.showTop=u,this.showLeft=r,this.showRight=h,this},setFillStyle:function(u,r,h){return this.fillTop=u,this.fillLeft=r,this.fillRight=h,this.isFilled=!0,this}});s.exports=o}),79590:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),m=e(20926),c=function(o,u,r,h){r.addToRenderList(u);var d=o.currentContext;if(m(o,d,u,r,h)&&u.isFilled){var l=u.width,p=u.height,g=l/2,x=l/u.projection,y=u.isReversed;u.showTop&&y&&(a(d,u,u.fillTop),d.beginPath(),d.moveTo(-g,-p),d.lineTo(0,-x-p),d.lineTo(g,-p),d.lineTo(0,x-p),d.fill()),u.showLeft&&(a(d,u,u.fillLeft),d.beginPath(),y?(d.moveTo(-g,-p),d.lineTo(0,x),d.lineTo(0,x-p)):(d.moveTo(-g,0),d.lineTo(0,x),d.lineTo(0,x-p)),d.fill()),u.showRight&&(a(d,u,u.fillRight),d.beginPath(),y?(d.moveTo(g,-p),d.lineTo(0,x),d.lineTo(0,x-p)):(d.moveTo(g,0),d.lineTo(0,x),d.lineTo(0,x-p)),d.fill()),d.restore()}};s.exports=c}),49803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(16933);a.register("isotriangle",function(c,o,u,r,h,d,l,p){return this.displayList.add(new m(this.scene,c,o,u,r,h,d,l,p))})}),60561:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(51503),c=e(79590),s.exports={renderWebGL:m,renderCanvas:c}}),51503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=e(70554),c=function(o,u,r,h){r.addToRenderList(u);var d=o.pipelines.set(u.pipeline),l=a(u,r,h),p=d.calcMatrix.copyFrom(l.calc),g=u.width,x=u.height,y=g/2,E=g/u.projection,w=u.isReversed,C=r.alpha*u.alpha;if(u.isFilled){o.pipelines.preBatch(u);var A,M,R,P,b,F,I;if(u.showTop&&w){A=m.getTintAppendFloatAlpha(u.fillTop,C),M=p.getX(-y,-x),R=p.getY(-y,-x),P=p.getX(0,-E-x),b=p.getY(0,-E-x),F=p.getX(y,-x),I=p.getY(y,-x);var L=p.getX(0,E-x),D=p.getY(0,E-x);d.batchQuad(u,M,R,P,b,F,I,L,D,0,0,1,1,A,A,A,A,2)}u.showLeft&&(A=m.getTintAppendFloatAlpha(u.fillLeft,C),w?(M=p.getX(-y,-x),R=p.getY(-y,-x),P=p.getX(0,E),b=p.getY(0,E),F=p.getX(0,E-x),I=p.getY(0,E-x)):(M=p.getX(-y,0),R=p.getY(-y,0),P=p.getX(0,E),b=p.getY(0,E),F=p.getX(0,E-x),I=p.getY(0,E-x)),d.batchTri(u,M,R,P,b,F,I,0,0,1,1,A,A,A,2)),u.showRight&&(A=m.getTintAppendFloatAlpha(u.fillRight,C),w?(M=p.getX(y,-x),R=p.getY(y,-x),P=p.getX(0,E),b=p.getY(0,E),F=p.getX(0,E-x),I=p.getY(0,E-x)):(M=p.getX(y,0),R=p.getY(y,0),P=p.getX(0,E),b=p.getY(0,E),F=p.getX(0,E-x),I=p.getY(0,E-x)),d.batchTri(u,M,R,P,b,F,I,0,0,1,1,A,A,A,2)),o.pipelines.postBatch(u)}};s.exports=c}),57847:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(17803),c=e(23031),o=e(36823),u=new a({Extends:m,Mixins:[o],initialize:function(h,d,l,p,g,x,y,E,w){d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=128),y===void 0&&(y=0),m.call(this,h,"Line",new c(p,g,x,y));var C=Math.max(1,this.geom.right-this.geom.left),A=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(d,l),this.setSize(C,A),E!==void 0&&this.setStrokeStyle(1,E,w),this.updateDisplayOrigin()},setLineWidth:function(r,h){return h===void 0&&(h=r),this._startWidth=r,this._endWidth=h,this.lineWidth=r,this},setTo:function(r,h,d,l){return this.geom.setTo(r,h,d,l),this}});s.exports=u}),17440:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75177),m=e(20926),c=function(o,u,r,h){r.addToRenderList(u);var d=o.currentContext;if(m(o,d,u,r,h)){var l=u._displayOriginX,p=u._displayOriginY;u.isStroked&&(a(d,u),d.beginPath(),d.moveTo(u.geom.x1-l,u.geom.y1-p),d.lineTo(u.geom.x2-l,u.geom.y2-p),d.stroke()),d.restore()}};s.exports=c}),2481:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(57847);a.register("line",function(c,o,u,r,h,d,l,p){return this.displayList.add(new m(this.scene,c,o,u,r,h,d,l,p))})}),36823:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(77385),c=e(17440),s.exports={renderWebGL:m,renderCanvas:c}}),77385:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=e(70554),c=function(o,u,r,h){r.addToRenderList(u);var d=o.pipelines.set(u.pipeline),l=a(u,r,h);d.calcMatrix.copyFrom(l.calc);var p=u._displayOriginX,g=u._displayOriginY,x=r.alpha*u.alpha;if(o.pipelines.preBatch(u),u.isStroked){var y=d.strokeTint,E=m.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*x);y.TL=E,y.TR=E,y.BL=E,y.BR=E,d.batchLine(u.geom.x1-p,u.geom.y1-g,u.geom.x2-p,u.geom.y2-g,u._startWidth/2,u._endWidth/2,1,0,!1,l.sprite,l.camera)}o.pipelines.postBatch(u)};s.exports=c}),24949:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90273),m=e(83419),c=e(94811),o=e(13829),u=e(25717),r=e(17803),h=e(5469),d=new m({Extends:r,Mixins:[a],initialize:function(p,g,x,y,E,w){g===void 0&&(g=0),x===void 0&&(x=0),r.call(this,p,"Polygon",new u(y));var C=o(this.geom);this.setPosition(g,x),this.setSize(C.width,C.height),E!==void 0&&this.setFillStyle(E,w),this.updateDisplayOrigin(),this.updateData()},smooth:function(l){l===void 0&&(l=1);for(var p=0;p<l;p++)h(this.geom);return this.updateData()},setTo:function(l){this.geom.setTo(l);var p=o(this.geom);return this.setSize(p.width,p.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var l=[],p=this.geom.points,g=0;g<p.length;g++)l.push(p[g].x,p[g].y);return l.push(p[0].x,p[0].y),this.pathIndexes=c(l),this.pathData=l,this}});s.exports=d}),38710:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),m=e(75177),c=e(20926),o=function(u,r,h,d){h.addToRenderList(r);var l=u.currentContext;if(c(u,l,r,h,d)){var p=r._displayOriginX,g=r._displayOriginY,x=r.pathData,y=x.length-1,E=x[0]-p,w=x[1]-g;l.beginPath(),l.moveTo(E,w),r.closePath||(y-=2);for(var C=2;C<y;C+=2){var A=x[C]-p,M=x[C+1]-g;l.lineTo(A,M)}r.closePath&&l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(m(l,r),l.stroke()),l.restore()}};s.exports=o}),64827:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(24949);a.register("polygon",function(c,o,u,r,h){return this.displayList.add(new m(this.scene,c,o,u,r,h))})}),90273:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(73695),c=e(38710),s.exports={renderWebGL:m,renderCanvas:c}}),73695:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),m=e(91296),c=e(34682),o=function(u,r,h,d){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=m(r,h,d),g=l.calcMatrix.copyFrom(p.calc),x=r._displayOriginX,y=r._displayOriginY,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&a(l,g,r,E,x,y),r.isStroked&&c(l,r,E,x,y),u.pipelines.postBatch(r)};s.exports=o}),74561:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(94811),c=e(87841),o=e(17803),u=e(95597),r=new a({Extends:o,Mixins:[u],initialize:function(d,l,p,g,x,y,E){l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=128),x===void 0&&(x=128),o.call(this,d,"Rectangle",new c(0,0,g,x)),this.radius=20,this.isRounded=!1,this.setPosition(l,p),this.setSize(g,x),y!==void 0&&this.setFillStyle(y,E),this.updateDisplayOrigin(),this.updateData()},setRounded:function(h){return h===void 0&&(h=16),this.radius=h,this.isRounded=h>0,this.updateRoundedData()},setSize:function(h,d){this.width=h,this.height=d,this.geom.setSize(h,d),this.updateData(),this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=h,l.hitArea.height=d),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var h=[],d=this.geom,l=this._tempLine;return d.getLineA(l),h.push(l.x1,l.y1,l.x2,l.y2),d.getLineB(l),h.push(l.x2,l.y2),d.getLineC(l),h.push(l.x2,l.y2),d.getLineD(l),h.push(l.x2,l.y2),this.pathData=h,this},updateRoundedData:function(){var h=[],d=this.width/2,l=this.height/2,p=Math.min(d,l),g=Math.min(this.radius,p),x=d,y=l,E=Math.max(1,Math.floor(g/5));return this.arcTo(h,x-d+g,y-l+g,g,Math.PI,Math.PI*1.5,E),h.push(x+d-g,y-l),this.arcTo(h,x+d-g,y-l+g,g,Math.PI*1.5,Math.PI*2,E),h.push(x+d,y+l-g),this.arcTo(h,x+d-g,y+l-g,g,0,Math.PI*.5,E),h.push(x-d+g,y+l),this.arcTo(h,x-d+g,y+l-g,g,Math.PI*.5,Math.PI,E),h.push(x-d,y-l+g),this.pathIndexes=m(h),this.pathData=h,this},arcTo:function(h,d,l,p,g,x,y){for(var E=(x-g)/y,w=0;w<=y;w++){var C=g+E*w;h.push(d+Math.cos(C)*p,l+Math.sin(C)*p)}}});s.exports=r}),48682:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),m=e(75177),c=e(20926),o=function(r,h,d,l,p,g){var x=Math.min(l/2,p/2),y=Math.min(g,x);if(y===0){r.rect(h,d,l,p);return}r.moveTo(h+y,d),r.lineTo(h+l-y,d),r.arcTo(h+l,d,h+l,d+y,y),r.lineTo(h+l,d+p-y),r.arcTo(h+l,d+p,h+l-y,d+p,y),r.lineTo(h+y,d+p),r.arcTo(h,d+p,h,d+p-y,y),r.lineTo(h,d+y),r.arcTo(h,d,h+y,d,y),r.closePath()},u=function(r,h,d,l){d.addToRenderList(h);var p=r.currentContext;if(c(r,p,h,d,l)){var g=h._displayOriginX,x=h._displayOriginY;h.isFilled&&(a(p,h),h.isRounded?(p.beginPath(),o(p,-g,-x,h.width,h.height,h.radius),p.fill()):p.fillRect(-g,-x,h.width,h.height)),h.isStroked&&(m(p,h),p.beginPath(),h.isRounded?o(p,-g,-x,h.width,h.height,h.radius):p.rect(-g,-x,h.width,h.height),p.stroke()),p.restore()}};s.exports=u}),87959:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(74561);a.register("rectangle",function(c,o,u,r,h,d){return this.displayList.add(new m(this.scene,c,o,u,r,h,d))})}),95597:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(52059),c=e(48682),s.exports={renderWebGL:m,renderCanvas:c}}),52059:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),m=e(91296),c=e(34682),o=e(70554),u=function(r,h,d,l){d.addToRenderList(h);var p=r.pipelines.set(h.pipeline),g=m(h,d,l);p.calcMatrix.copyFrom(g.calc);var x=h._displayOriginX,y=h._displayOriginY,E=d.alpha*h.alpha;if(r.pipelines.preBatch(h),h.isRounded&&h.isFilled)a(p,g.calc,h,E,x,y);else if(h.isFilled){var w=p.fillTint,C=o.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*E);w.TL=C,w.TR=C,w.BL=C,w.BR=C,p.batchFillRect(-x,-y,h.width,h.height)}h.isStroked&&c(p,h,E,x,y),r.pipelines.postBatch(h)};s.exports=u}),55911:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81991),m=e(83419),c=e(94811),o=e(17803),u=new m({Extends:o,Mixins:[a],initialize:function(h,d,l,p,g,x,y,E){d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=5),g===void 0&&(g=32),x===void 0&&(x=64),o.call(this,h,"Star",null),this._points=p,this._innerRadius=g,this._outerRadius=x,this.setPosition(d,l),this.setSize(x*2,x*2),y!==void 0&&this.setFillStyle(y,E),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],h=this._points,d=this._innerRadius,l=this._outerRadius,p=Math.PI/2*3,g=Math.PI/h,x=l,y=l;r.push(x,y+-l);for(var E=0;E<h;E++)r.push(x+Math.cos(p)*l,y+Math.sin(p)*l),p+=g,r.push(x+Math.cos(p)*d,y+Math.sin(p)*d),p+=g;return r.push(x,y+-l),this.pathIndexes=c(r),this.pathData=r,this}});s.exports=u}),64272:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),m=e(75177),c=e(20926),o=function(u,r,h,d){h.addToRenderList(r);var l=u.currentContext;if(c(u,l,r,h,d)){var p=r._displayOriginX,g=r._displayOriginY,x=r.pathData,y=x.length-1,E=x[0]-p,w=x[1]-g;l.beginPath(),l.moveTo(E,w),r.closePath||(y-=2);for(var C=2;C<y;C+=2){var A=x[C]-p,M=x[C+1]-g;l.lineTo(A,M)}l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(m(l,r),l.stroke()),l.restore()}};s.exports=o}),93697:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55911),m=e(39429);m.register("star",function(c,o,u,r,h,d,l){return this.displayList.add(new a(this.scene,c,o,u,r,h,d,l))})}),81991:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(57017),c=e(64272),s.exports={renderWebGL:m,renderCanvas:c}}),57017:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10441),m=e(91296),c=e(34682),o=function(u,r,h,d){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=m(r,h,d),g=l.calcMatrix.copyFrom(p.calc),x=r._displayOriginX,y=r._displayOriginY,E=h.alpha*r.alpha;u.pipelines.preBatch(r),r.isFilled&&a(l,g,r,E,x,y),r.isStroked&&c(l,r,E,x,y),u.pipelines.postBatch(r)};s.exports=o}),36931:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(17803),c=e(16483),o=e(96195),u=new a({Extends:m,Mixins:[o],initialize:function(h,d,l,p,g,x,y,E,w,C,A){d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=128),x===void 0&&(x=64),y===void 0&&(y=0),E===void 0&&(E=128),w===void 0&&(w=128),m.call(this,h,"Triangle",new c(p,g,x,y,E,w));var M=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(d,l),this.setSize(M,R),C!==void 0&&this.setFillStyle(C,A),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,h,d,l,p,g){return this.geom.setTo(r,h,d,l,p,g),this.updateData()},updateData:function(){var r=[],h=this.geom,d=this._tempLine;return h.getLineA(d),r.push(d.x1,d.y1,d.x2,d.y2),h.getLineB(d),r.push(d.x2,d.y2),h.getLineC(d),r.push(d.x2,d.y2),this.pathData=r,this}});s.exports=u}),85172:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65960),m=e(75177),c=e(20926),o=function(u,r,h,d){h.addToRenderList(r);var l=u.currentContext;if(c(u,l,r,h,d)){var p=r._displayOriginX,g=r._displayOriginY,x=r.geom.x1-p,y=r.geom.y1-g,E=r.geom.x2-p,w=r.geom.y2-g,C=r.geom.x3-p,A=r.geom.y3-g;l.beginPath(),l.moveTo(x,y),l.lineTo(E,w),l.lineTo(C,A),l.closePath(),r.isFilled&&(a(l,r),l.fill()),r.isStroked&&(m(l,r),l.stroke()),l.restore()}};s.exports=o}),45245:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(36931);a.register("triangle",function(c,o,u,r,h,d,l,p,g,x){return this.displayList.add(new m(this.scene,c,o,u,r,h,d,l,p,g,x))})}),96195:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(83253),c=e(85172),s.exports={renderWebGL:m,renderCanvas:c}}),83253:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=e(34682),c=e(70554),o=function(u,r,h,d){h.addToRenderList(r);var l=u.pipelines.set(r.pipeline),p=a(r,h,d);l.calcMatrix.copyFrom(p.calc);var g=r._displayOriginX,x=r._displayOriginY,y=h.alpha*r.alpha;if(u.pipelines.preBatch(r),r.isFilled){var E=l.fillTint,w=c.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*y);E.TL=w,E.TR=w,E.BL=w,E.BR=w;var C=r.geom.x1-g,A=r.geom.y1-x,M=r.geom.x2-g,R=r.geom.y2-x,P=r.geom.x3-g,b=r.geom.y3-x;l.batchFillTriangle(C,A,M,R,P,b,p.sprite,p.camera)}r.isStroked&&m(l,r,y,g,x),u.pipelines.postBatch(r)};s.exports=o}),68287:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),m=e(83419),c=e(31401),o=e(95643),u=e(92751),r=new m({Extends:o,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Size,c.TextureCrop,c.Tint,c.Transform,c.Visible,u],initialize:function(d,l,p,g,x){o.call(this,d,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(g,x),this.setPosition(l,p),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,d){this.anims.update(h,d)},play:function(h,d){return this.anims.play(h,d)},playReverse:function(h,d){return this.anims.playReverse(h,d)},playAfterDelay:function(h,d){return this.anims.playAfterDelay(h,d)},playAfterRepeat:function(h,d){return this.anims.playAfterRepeat(h,d)},chain:function(h){return this.anims.chain(h)},stop:function(){return this.anims.stop()},stopAfterDelay:function(h){return this.anims.stopAfterDelay(h)},stopAfterRepeat:function(h){return this.anims.stopAfterRepeat(h)},stopOnFrame:function(h){return this.anims.stopOnFrame(h)},toJSON:function(){return c.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});s.exports=r}),76552:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m.addToRenderList(a),e.batchSprite(a,a.frame,m,c)};s.exports=T}),15567:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(13059),c=e(44603),o=e(23568),u=e(68287);c.register("sprite",function(r,h){r===void 0&&(r={});var d=o(r,"key",null),l=o(r,"frame",null),p=new u(this.scene,0,0,d,l);return h!==void 0&&(r.add=h),a(this.scene,p,r),m(p,r),p})}),46409:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(68287);a.register("sprite",function(c,o,u,r){return this.displayList.add(new m(this.scene,c,o,u,r))})}),92751:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(9409),c=e(76552),s.exports={renderWebGL:m,renderCanvas:c}}),9409:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m.addToRenderList(a),a.pipeline.batchSprite(a,m,c)};s.exports=T}),14220:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=e.canvas,o=e.context,u=e.style,r=[],h=0,d=m.length;u.maxLines>0&&u.maxLines<m.length&&(d=u.maxLines),u.syncFont(c,o);for(var l=e.letterSpacing,p=0;p<d;p++){var g=u.strokeThickness;if(l===0)g+=o.measureText(m[p]).width;else{for(var x=m[p],y=0;y<x.length;y++)g+=o.measureText(x[y]).width;x.length>1&&(g+=l*(x.length-1))}u.wordWrap&&(g-=o.measureText(" ").width),r[p]=Math.ceil(g),h=Math.max(h,r[p])}var E=a.fontSize+u.strokeThickness,w=E*d,C=e.lineSpacing;return d>1&&(w+=C*(d-1)),{width:h,height:w,lines:d,lineWidths:r,lineSpacing:C,lineHeight:E}};s.exports=T}),79557:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),m=function(c){var o=a.create(this),u=o.getContext("2d",{willReadFrequently:!0});c.syncFont(o,u);var r=u.measureText(c.testString);if("actualBoundingBoxAscent"in r){var h=r.actualBoundingBoxAscent,d=r.actualBoundingBoxDescent;return a.remove(o),{ascent:h,descent:d,fontSize:h+d}}var l=Math.ceil(r.width*c.baselineX),p=l,g=2*p;p=p*c.baselineY|0,o.width=l,o.height=g,u.fillStyle="#f00",u.fillRect(0,0,l,g),u.font=c._font,u.textBaseline="alphabetic",u.fillStyle="#000",u.fillText(c.testString,0,p);var x={ascent:0,descent:0,fontSize:0},y=u.getImageData(0,0,l,g);if(!y)return x.ascent=p,x.descent=p+6,x.fontSize=x.ascent+x.descent,a.remove(o),x;var E=y.data,w=E.length,C=l*4,A,M,R=0,P=!1;for(A=0;A<p;A++){for(M=0;M<C;M+=4)if(E[R+M]!==255){P=!0;break}if(!P)R+=C;else break}for(x.ascent=p-A,R=w-C,P=!1,A=g;A>p;A--){for(M=0;M<C;M+=4)if(E[R+M]!==255){P=!0;break}if(!P)R-=C;else break}return x.descent=A-p,x.fontSize=x.ascent+x.descent,a.remove(o),x};s.exports=m}),50171:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40366),m=e(27919),c=e(83419),o=e(31401),u=e(95643),r=e(14220),h=e(35154),d=e(35846),l=e(61771),p=e(35762),g=e(45650),x=new c({Extends:u,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,l],initialize:function(E,w,C,A,M){w===void 0&&(w=0),C===void 0&&(C=0),u.call(this,E,"Text"),this.renderer=E.sys.renderer,this.setPosition(w,C),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=m.create(this),this.context,this.style=new p(this,M),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=g(),this.texture=E.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(A),M&&M.padding&&this.setPadding(M.padding),M&&M.lineSpacing&&this.setLineSpacing(M.lineSpacing),M&&M.letterSpacing&&this.setLetterSpacing(M.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(y){var E=this.style;if(E.wordWrapCallback){var w=E.wordWrapCallback.call(E.wordWrapCallbackScope,y,this);return Array.isArray(w)&&(w=w.join(`
`)),w}else return E.wordWrapWidth?E.wordWrapUseAdvanced?this.advancedWordWrap(y,this.context,this.style.wordWrapWidth):this.basicWordWrap(y,this.context,this.style.wordWrapWidth):y},advancedWordWrap:function(y,E,w){for(var C="",A=y.replace(/ +/gi," ").split(this.splitRegExp),M=A.length,R=0;R<M;R++){var P=A[R],b="";P=P.replace(/^ *|\s*$/gi,"");var F=P.length*this.letterSpacing,I=E.measureText(P).width+F;if(I<w){C+=P+`
`;continue}for(var L=w,D=P.split(" "),O=0;O<D.length;O++){var z=D[O],W=z+" ",k=W.length*this.letterSpacing,X=E.measureText(W).width+k;if(X>L){if(O===0){for(var V=W;V.length;){V=V.slice(0,-1);var G=V.length*this.letterSpacing;if(X=E.measureText(V).width+G,X<=L)break}if(!V.length)throw new Error("wordWrapWidth < a single character");var N=z.substr(V.length);D[O]=N,b+=V}var H=D[O].length?O:O+1,U=D.slice(H).join(" ").replace(/[ \n]*$/gi,"");A.splice(R+1,0,U),M=A.length;break}else b+=W,L-=X}C+=b.replace(/[ \n]*$/gi,"")+`
`}return C=C.replace(/[\s|\n]*$/gi,""),C},basicWordWrap:function(y,E,w){for(var C="",A=y.split(this.splitRegExp),M=A.length-1,R=E.measureText(" ").width,P=0;P<=M;P++){for(var b=w,F=A[P].split(" "),I=F.length-1,L=0;L<=I;L++){var D=F[L],O=D.length*this.letterSpacing,z=E.measureText(D).width+O,W=z;L<I&&(W+=R),W>b&&L>0&&(C+=`
`,b=w),C+=D,L<I?(C+=" ",b-=W):b-=z}P<M&&(C+=`
`)}return C},getWrappedText:function(y){y===void 0&&(y=this._text),this.style.syncFont(this.canvas,this.context);var E=this.runWordWrap(y);return E.split(this.splitRegExp)},setText:function(y){return!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y!==this._text&&(this._text=y.toString(),this.updateText()),this},appendText:function(y,E){E===void 0&&(E=!0),!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y=y.toString();var w=this._text.concat(E?`
`+y:y);return w!==this._text&&(this._text=w,this.updateText()),this},setStyle:function(y){return this.style.setStyle(y)},setFont:function(y){return this.style.setFont(y)},setFontFamily:function(y){return this.style.setFontFamily(y)},setFontSize:function(y){return this.style.setFontSize(y)},setFontStyle:function(y){return this.style.setFontStyle(y)},setFixedSize:function(y,E){return this.style.setFixedSize(y,E)},setBackgroundColor:function(y){return this.style.setBackgroundColor(y)},setFill:function(y){return this.style.setFill(y)},setColor:function(y){return this.style.setColor(y)},setStroke:function(y,E){return this.style.setStroke(y,E)},setShadow:function(y,E,w,C,A,M){return this.style.setShadow(y,E,w,C,A,M)},setShadowOffset:function(y,E){return this.style.setShadowOffset(y,E)},setShadowColor:function(y){return this.style.setShadowColor(y)},setShadowBlur:function(y){return this.style.setShadowBlur(y)},setShadowStroke:function(y){return this.style.setShadowStroke(y)},setShadowFill:function(y){return this.style.setShadowFill(y)},setWordWrapWidth:function(y,E){return this.style.setWordWrapWidth(y,E)},setWordWrapCallback:function(y,E){return this.style.setWordWrapCallback(y,E)},setAlign:function(y){return this.style.setAlign(y)},setResolution:function(y){return this.style.setResolution(y)},setLineSpacing:function(y){return this.lineSpacing=y,this.updateText()},setLetterSpacing:function(y){return this.letterSpacing=y,this.updateText()},setPadding:function(y,E,w,C){if(typeof y=="object"){var A=y,M=h(A,"x",null);M!==null?(y=M,w=M):(y=h(A,"left",0),w=h(A,"right",y));var R=h(A,"y",null);R!==null?(E=R,C=R):(E=h(A,"top",0),C=h(A,"bottom",E))}else y===void 0&&(y=0),E===void 0&&(E=y),w===void 0&&(w=y),C===void 0&&(C=E);return this.padding.left=y,this.padding.top=E,this.padding.right=w,this.padding.bottom=C,this.updateText()},setMaxLines:function(y){return this.style.setMaxLines(y)},setRTL:function(y){y===void 0&&(y=!0);var E=this.style;return E.rtl===y?this:(E.rtl=y,y?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),E.align==="left"?E.align="right":E.align==="right"&&(E.align="left"),this)},updateText:function(){var y=this.canvas,E=this.context,w=this.style,C=w.resolution,A=w.metrics;w.syncFont(y,E);var M=this._text;(w.wordWrapWidth||w.wordWrapCallback)&&(M=this.runWordWrap(this._text));var R=M.split(this.splitRegExp),P=r(this,A,R),b=this.padding,F;w.fixedWidth===0?(this.width=P.width+b.left+b.right,F=P.width):(this.width=w.fixedWidth,F=this.width-b.left-b.right,F<P.width&&(F=P.width)),w.fixedHeight===0?this.height=P.height+b.top+b.bottom:this.height=w.fixedHeight;var I=this.width,L=this.height;this.updateDisplayOrigin(),I*=C,L*=C,I=Math.max(I,1),L=Math.max(L,1),y.width!==I||y.height!==L?(y.width=I,y.height=L,this.frame.setSize(I,L),w.syncFont(y,E),w.rtl&&(E.direction="rtl")):E.clearRect(0,0,I,L),E.save(),E.scale(C,C),w.backgroundColor&&(E.fillStyle=w.backgroundColor,E.fillRect(0,0,I,L)),w.syncStyle(y,E),E.translate(b.left,b.top);for(var D,O,z=0;z<P.lines;z++){if(D=w.strokeThickness/2,O=w.strokeThickness/2+z*P.lineHeight+A.ascent,z>0&&(O+=P.lineSpacing*z),w.rtl)D=I-D-b.left-b.right;else if(w.align==="right")D+=F-P.lineWidths[z];else if(w.align==="center")D+=(F-P.lineWidths[z])/2;else if(w.align==="justify"){var W=.85;if(P.lineWidths[z]/P.width>=W){var k=P.width-P.lineWidths[z],X=E.measureText(" ").width,V=R[z].trim(),G=V.split(" ");k+=(R[z].length-V.length)*X;for(var N=Math.floor(k/X),H=0;N>0;)G[H]+=" ",H=(H+1)%(G.length-1||1),--N;R[z]=G.join(" ")}}this.autoRound&&(D=Math.round(D),O=Math.round(O));var U=this.letterSpacing;if(w.strokeThickness&&U===0&&(w.syncShadow(E,w.shadowStroke),E.strokeText(R[z],D,O)),w.color)if(w.syncShadow(E,w.shadowFill),U!==0)for(var _=0,$=R[z].split(""),j=0;j<$.length;j++)w.strokeThickness&&(w.syncShadow(E,w.shadowStroke),E.strokeText($[j],D+_,O),w.syncShadow(E,w.shadowFill)),E.fillText($[j],D+_,O),_+=E.measureText($[j]).width+U;else E.fillText(R[z],D,O)}E.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(y,this.frame.source.glTexture,!0));var Z=this.input;return Z&&!Z.customHitArea&&(Z.hitArea.width=this.width,Z.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(y){this.setText(y)}},toJSON:function(){var y=o.ToJSON(this),E={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return y.data=E,y},preDestroy:function(){d(this.canvas),m.remove(this.canvas);var y=this.texture;y&&y.destroy()}});s.exports=x}),79724:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){a.width===0||a.height===0||(m.addToRenderList(a),e.batchSprite(a,a.frame,m,c))};s.exports=T}),71259:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(50171);m.register("text",function(u,r){u===void 0&&(u={});var h=c(u,"text",""),d=c(u,"style",null),l=c(u,"padding",null);l!==null&&(d.padding=l);var p=new o(this.scene,0,0,h,d);return r!==void 0&&(u.add=r),a(this.scene,p,u),p.autoRound=c(u,"autoRound",!0),p.resolution=c(u,"resolution",1),p})}),68005:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50171),m=e(39429);m.register("text",function(c,o,u,r){return this.displayList.add(new a(this.scene,c,o,u,r))})}),61771:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(34397),c=e(79724),s.exports={renderWebGL:m,renderCanvas:c}}),35762:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23568),c=e(35154),o=e(79557),u={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃâ°qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new a({initialize:function(d,l){this.parent=d,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(l,!1,!0)},setStyle:function(h,d,l){d===void 0&&(d=!0),l===void 0&&(l=!1);for(var p in u){var g=l?u[p][1]:this[p];p==="wordWrapCallback"||p==="wordWrapCallbackScope"?this[p]=c(h,u[p][0],g):h&&p==="fontSize"&&typeof h.fontSize=="number"?this[p]=h.fontSize.toString()+"px":this[p]=m(h,u[p][0],g)}var x=c(h,"font",null);x!==null&&this.setFont(x,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var y=c(h,"fill",null);y!==null&&(this.color=y);var E=c(h,"metrics",!1);return E?this.metrics={ascent:c(E,"ascent",0),descent:c(E,"descent",0),fontSize:c(E,"fontSize",0)}:(d||!this.metrics)&&(this.metrics=o(this)),d?this.parent.updateText():this.parent},syncFont:function(h,d){d.font=this._font},syncStyle:function(h,d){d.textBaseline="alphabetic",d.fillStyle=this.color,d.strokeStyle=this.stroke,d.lineWidth=this.strokeThickness,d.lineCap="round",d.lineJoin="round"},syncShadow:function(h,d){d?(h.shadowOffsetX=this.shadowOffsetX,h.shadowOffsetY=this.shadowOffsetY,h.shadowColor=this.shadowColor,h.shadowBlur=this.shadowBlur):(h.shadowOffsetX=0,h.shadowOffsetY=0,h.shadowColor=0,h.shadowBlur=0)},update:function(h){return h&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(h,d){d===void 0&&(d=!0);var l=h,p="",g="";if(typeof h!="string")l=c(h,"fontFamily","Courier"),p=c(h,"fontSize","16px"),g=c(h,"fontStyle","");else{var x=h.split(" "),y=0;g=x.length>2?x[y++]:"",p=x[y++]||"16px",l=x[y++]||"Courier"}return(l!==this.fontFamily||p!==this.fontSize||g!==this.fontStyle)&&(this.fontFamily=l,this.fontSize=p,this.fontStyle=g,d&&this.update(!0)),this.parent},setFontFamily:function(h){return this.fontFamily!==h&&(this.fontFamily=h,this.update(!0)),this.parent},setFontStyle:function(h){return this.fontStyle!==h&&(this.fontStyle=h,this.update(!0)),this.parent},setFontSize:function(h){return typeof h=="number"&&(h=h.toString()+"px"),this.fontSize!==h&&(this.fontSize=h,this.update(!0)),this.parent},setTestString:function(h){return this.testString=h,this.update(!0)},setFixedSize:function(h,d){return this.fixedWidth=h,this.fixedHeight=d,h&&(this.parent.width=h),d&&(this.parent.height=d),this.update(!1)},setBackgroundColor:function(h){return this.backgroundColor=h,this.update(!1)},setFill:function(h){return this.color=h,this.update(!1)},setColor:function(h){return this.color=h,this.update(!1)},setResolution:function(h){return this.resolution=h,this.update(!1)},setStroke:function(h,d){return d===void 0&&(d=this.strokeThickness),h===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==h||this.strokeThickness!==d)&&(this.stroke=h,this.strokeThickness=d,this.update(!0)),this.parent},setShadow:function(h,d,l,p,g,x){return h===void 0&&(h=0),d===void 0&&(d=0),l===void 0&&(l="#000"),p===void 0&&(p=0),g===void 0&&(g=!1),x===void 0&&(x=!0),this.shadowOffsetX=h,this.shadowOffsetY=d,this.shadowColor=l,this.shadowBlur=p,this.shadowStroke=g,this.shadowFill=x,this.update(!1)},setShadowOffset:function(h,d){return h===void 0&&(h=0),d===void 0&&(d=h),this.shadowOffsetX=h,this.shadowOffsetY=d,this.update(!1)},setShadowColor:function(h){return h===void 0&&(h="#000"),this.shadowColor=h,this.update(!1)},setShadowBlur:function(h){return h===void 0&&(h=0),this.shadowBlur=h,this.update(!1)},setShadowStroke:function(h){return this.shadowStroke=h,this.update(!1)},setShadowFill:function(h){return this.shadowFill=h,this.update(!1)},setWordWrapWidth:function(h,d){return d===void 0&&(d=!1),this.wordWrapWidth=h,this.wordWrapUseAdvanced=d,this.update(!1)},setWordWrapCallback:function(h,d){return d===void 0&&(d=null),this.wordWrapCallback=h,this.wordWrapCallbackScope=d,this.update(!1)},setAlign:function(h){return h===void 0&&(h="left"),this.align=h,this.update(!1)},setMaxLines:function(h){return h===void 0&&(h=0),this.maxLines=h,this.update(!1)},getTextMetrics:function(){var h=this.metrics;return{ascent:h.ascent,descent:h.descent,fontSize:h.fontSize}},toJSON:function(){var h={};for(var d in u)h[d]=this[d];return h.metrics=this.getTextMetrics(),h},destroy:function(){this.parent=void 0}});s.exports=r}),34397:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),m=function(c,o,u,r){if(!(o.width===0||o.height===0)){u.addToRenderList(o);var h=o.frame,d=h.width,l=h.height,p=a.getTintAppendFloatAlpha,g=c.pipelines.set(o.pipeline,o),x=g.setTexture2D(h.glTexture,o);g.batchTexture(o,h.glTexture,d,l,o.x,o.y,d/o.style.resolution,l/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,d,l,p(o.tintTopLeft,u.alpha*o._alphaTL),p(o.tintTopRight,u.alpha*o._alphaTR),p(o.tintBottomLeft,u.alpha*o._alphaBL),p(o.tintBottomRight,u.alpha*o._alphaBR),o.tintFill,0,0,u,r,!1,x)}};s.exports=m}),20839:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),m=e(83419),c=e(31401),o=e(95643),u=e(98439),r=e(68703),h=e(56295),d=e(45650),l=e(26099),p=8,g=new m({Extends:o,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Crop,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Tint,c.Transform,c.Visible,h],initialize:function(y,E,w,C,A,M,R){var P=y.sys.renderer;o.call(this,y,"TileSprite");var b=y.sys.textures.get(M),F=b.get(R);F.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),b=y.sys.textures.get("__MISSING"),F=b.get()),b.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),b=y.sys.textures.get("__MISSING"),F=b.get()),!C||!A?(C=C||F.width,A=A||F.height):(C=Math.floor(C),A=Math.floor(A)),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=P,this.canvas=a.create(this,C,A),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=b,this.displayFrame=F,this._crop=this.resetCropObject(),this._textureKey=d(),this.texture=y.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=u(F.width),this.potHeight=u(F.height),this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(E,w),this.setSize(C,A),this.setFrame(R),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(x,y){return this.displayTexture=this.scene.sys.textures.get(x),this.setFrame(y)},setFrame:function(x){var y=this.displayTexture.get(x);return this.potWidth=u(y.width),this.potHeight=u(y.height),this.canvas.width=0,!y.cutWidth||!y.cutHeight?this.renderFlags&=~p:this.renderFlags|=p,this.displayFrame=y,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(x,y){return x!==void 0&&(this.tilePositionX=x),y!==void 0&&(this.tilePositionY=y),this},setTileScale:function(x,y){return x===void 0&&(x=this.tileScaleX),y===void 0&&(y=x),this.tileScaleX=x,this.tileScaleY=y,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var x=this.displayFrame;if(x.source.isRenderTexture||x.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var y=this.fillContext,E=this.fillCanvas,w=this.potWidth,C=this.potHeight;(!this.renderer||!this.renderer.gl)&&(w=x.cutWidth,C=x.cutHeight),y.clearRect(0,0,w,C),E.width=w,E.height=C,y.drawImage(x.source.image,x.cutX,x.cutY,x.cutWidth,x.cutHeight,0,0,w,C),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(E,this.fillPattern):this.fillPattern=y.createPattern(E,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var x=this.canvas;if((x.width!==this.width||x.height!==this.height)&&(x.width=this.width,x.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var y=this.context;this.scene.sys.game.config.antialias||r.disable(y);var E=this._tileScale.x,w=this._tileScale.y,C=this._tilePosition.x,A=this._tilePosition.y;y.clearRect(0,0,this.width,this.height),y.save(),y.scale(E,w),y.translate(-C,-A),y.fillStyle=this.fillPattern,y.fillRect(C,A,this.width/E,this.height/w),y.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),a.remove(this.canvas),a.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var x=this.texture;x&&x.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(x){this._tilePosition.x=x,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(x){this._tilePosition.y=x,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(x){this._tileScale.x=x,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(x){this._tileScale.y=x,this.dirty=!0}}});s.exports=g}),46992:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){a.updateCanvas(),m.addToRenderList(a),e.batchSprite(a,a.frame,m,c)};s.exports=T}),14167:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(20839);m.register("tileSprite",function(u,r){u===void 0&&(u={});var h=c(u,"x",0),d=c(u,"y",0),l=c(u,"width",512),p=c(u,"height",512),g=c(u,"key",""),x=c(u,"frame",""),y=new o(this.scene,h,d,l,p,g,x);return r!==void 0&&(u.add=r),a(this.scene,y,u),y})}),91681:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20839),m=e(39429);m.register("tileSprite",function(c,o,u,r,h,d){return this.displayList.add(new a(this.scene,c,o,u,r,h,d))})}),56295:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(18553),c=e(46992),s.exports={renderWebGL:m,renderCanvas:c}}),18553:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),m=function(c,o,u,r){o.updateCanvas();var h=o.width,d=o.height;if(!(h===0||d===0)){u.addToRenderList(o);var l=a.getTintAppendFloatAlpha,p=c.pipelines.set(o.pipeline,o),g=p.setTexture2D(o.fillPattern,o);p.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,h,d,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*h,o.originY*d,0,0,h,d,l(o.tintTopLeft,u.alpha*o._alphaTL),l(o.tintTopRight,u.alpha*o._alphaTR),l(o.tintBottomLeft,u.alpha*o._alphaBL),l(o.tintBottomRight,u.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,u,r,!1,g)}};s.exports=m}),18471:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(31401),o=e(51708),u=e(8443),r=e(95643),h=e(36383),d=e(14463),l=e(45650),p=e(10247),g=new m({Extends:r,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.TextureCrop,c.Tint,c.Transform,c.Visible,p],initialize:function(y,E,w,C){r.call(this,y,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=l(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var A=y.sys.game;this._device=A.device.video,this.setPosition(E,w),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),A.events.on(u.PAUSE,this.globalPause,this),A.events.on(u.RESUME,this.globalResume,this);var M=y.sys.sound;M&&M.on(d.GLOBAL_MUTE,this.globalMute,this),C&&this.load(C)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(x){var y=this.scene.sys.cache.video.get(x);return y?(this.cacheKey=x,this.loadHandler(y.url,y.noAudio,y.crossOrigin)):console.warn("No video in cache for key: "+x),this},changeSource:function(x,y,E,w,C){y===void 0&&(y=!0),E===void 0&&(E=!1),this.cacheKey!==x&&(this.load(x),y&&this.play(E,w,C))},getVideoKey:function(){return this.cacheKey},loadURL:function(x,y,E){y===void 0&&(y=!1);var w=this._device.getVideoURL(x);return w?(this.cacheKey="",this.loadHandler(w.url,y,E)):console.warn("No supported video format found for "+x),this},loadMediaStream:function(x,y,E){return this.loadHandler(null,y,E,x)},loadHandler:function(x,y,E,w){y||(y=!1);var C=this.video;if(C?(this.removeLoadEventHandlers(),this.stop()):(C=document.createElement("video"),C.controls=!1,C.setAttribute("playsinline","playsinline"),C.setAttribute("preload","auto"),C.setAttribute("disablePictureInPicture","true")),y?(C.muted=!0,C.defaultMuted=!0,C.setAttribute("autoplay","autoplay")):(C.muted=!1,C.defaultMuted=!1,C.removeAttribute("autoplay")),E?C.setAttribute("crossorigin",E):C.removeAttribute("crossorigin"),w)if("srcObject"in C)try{C.srcObject=w}catch(M){if(M.name!=="TypeError")throw M;C.src=URL.createObjectURL(w)}else C.src=URL.createObjectURL(w);else C.src=x;this.retry=0,this.video=C,this._playCalled=!1,C.load(),this.addLoadEventHandlers();var A=this.scene.sys.textures.get(this._key);return this.setTexture(A),this},requestVideoFrame:function(x,y){var E=this.video;if(E){var w=y.width,C=y.height,A=this.videoTexture,M=this.videoTextureSource,R=!A||M.source!==E;R?(this._codePaused=E.paused,this._codeMuted=E.muted,A?(M.source=E,M.width=w,M.height=C,A.get().setSize(w,C)):(A=this.scene.sys.textures.create(this._key,E,w,C),A.add("__BASE",0,0,0,w,C),this.setTexture(A),this.videoTexture=A,this.videoTextureSource=A.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(o.VIDEO_TEXTURE,this,A)),this.setSizeToFrame(),this.updateDisplayOrigin()):M.update(),this.isStalled=!1,this.metadata=y;var P=y.mediaTime;R&&(this._lastUpdate=P,this.emit(o.VIDEO_CREATED,this,w,C),this.frameReady||(this.frameReady=!0,this.emit(o.VIDEO_PLAY,this))),this._playingMarker?P>=this._markerOut&&(E.loop?(E.currentTime=this._markerIn,this.emit(o.VIDEO_LOOP,this)):(this.stop(!1),this.emit(o.VIDEO_COMPLETE,this))):P<this._lastUpdate&&this.emit(o.VIDEO_LOOP,this),this._lastUpdate=P,this._getFrame?(this.removeEventHandlers(),E.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(x,y,E){y===void 0&&(y=-1),E===void 0&&(E=h.MAX_SAFE_INTEGER);var w=this.video;return!w||this.isPlaying()?(w||console.warn("Video not loaded"),this):(x===void 0&&(x=w.loop),w.loop=x,this._markerIn=y,this._markerOut=E,this._playingMarker=y>-1&&E>y&&E<h.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=w.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var x=this.video;return!x||this.isPlaying()?(x||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=x.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var x=this.video;x&&(x.addEventListener("error",this._loadCallbackHandler),x.addEventListener("abort",this._loadCallbackHandler),x.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var x=this.video;x&&(x.removeEventListener("error",this._loadCallbackHandler),x.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var x=this.video;if(x){var y=this._callbacks;for(var E in y)x.addEventListener(E,y[E])}},removeEventHandlers:function(){var x=this.video;if(x){var y=this._callbacks;for(var E in y)x.removeEventListener(E,y[E])}},createPlayPromise:function(x){x===void 0&&(x=!0);var y=this.video,E=y.play();if(E!==void 0){var w=this.playSuccess.bind(this),C=this.playError.bind(this);if(!x){var A=this;C=function(){A.failedPlayAttempts++}}E.then(w).catch(C)}else y.addEventListener("playing",this._callbacks.legacy),x||this.failedPlayAttempts++},addMarker:function(x,y,E){return!isNaN(y)&&y>=0&&!isNaN(E)&&E>y&&(this.markers[x]=[y,E]),this},playMarker:function(x,y){var E=this.markers[x];return E&&this.play(y,E[0],E[1]),this},removeMarker:function(x){return delete this.markers[x],this},snapshot:function(x,y){return x===void 0&&(x=this.width),y===void 0&&(y=this.height),this.snapshotArea(0,0,this.width,this.height,x,y)},snapshotArea:function(x,y,E,w,C,A){x===void 0&&(x=0),y===void 0&&(y=0),E===void 0&&(E=this.width),w===void 0&&(w=this.height),C===void 0&&(C=E),A===void 0&&(A=w);var M=this.video,R=this.snapshotTexture;return R?(R.setSize(C,A),M&&R.context.drawImage(M,x,y,E,w,0,0,C,A)):(R=this.scene.sys.textures.createCanvas(l(),C,A),this.snapshotTexture=R,M&&R.context.drawImage(M,x,y,E,w,0,0,C,A)),R.update()},saveSnapshotTexture:function(x){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,x):this.snapshotTexture=this.scene.sys.textures.createCanvas(x,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(o.VIDEO_UNLOCKED,this));var x=this.scene.sys.sound;x&&x.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(x){var y=x.name;y==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(o.VIDEO_LOCKED,this)):y==="NotSupportedError"?(this.stop(!1),this.emit(o.VIDEO_UNSUPPORTED,this,x)):(this.stop(!1),this.emit(o.VIDEO_ERROR,this,x))},legacyPlayHandler:function(){var x=this.video;x&&(this.playSuccess(),x.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(o.VIDEO_PLAYING,this)},loadErrorHandler:function(x){this.stop(!1),this.emit(o.VIDEO_ERROR,this,x)},metadataHandler:function(x){this.emit(o.VIDEO_METADATA,this,x)},setSizeToFrame:function(x){x||(x=this.frame),this.width=x.realWidth,this.height=x.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var y=this.input;return y&&!y.customHitArea&&(y.hitArea.width=this.width,y.hitArea.height=this.height),this},stalledHandler:function(x){this.isStalled=!0,this.emit(o.VIDEO_STALLED,this,x)},completeHandler:function(){this._playCalled=!1,this.emit(o.VIDEO_COMPLETE,this)},preUpdate:function(x,y){var E=this.video;!E||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=y,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(x){var y=this.video;if(y){var E=y.duration;if(E!==1/0&&!isNaN(E)){var w=E*x;this.setCurrentTime(w)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(x){var y=this.video;if(y){if(typeof x=="string"){var E=x[0],w=parseFloat(x.substr(1));E==="+"?x=y.currentTime+w:E==="-"&&(x=y.currentTime-w)}y.currentTime=x}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(o.VIDEO_SEEKED,this)},getProgress:function(){var x=this.video;if(x){var y=x.duration;if(y!==1/0&&!isNaN(y))return x.currentTime/y}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(x){x===void 0&&(x=!0),this._codeMuted=x;var y=this.video;return y&&(y.muted=this._systemMuted?!0:x),this},isMuted:function(){return this._codeMuted},globalMute:function(x,y){this._systemMuted=y;var E=this.video;E&&(E.muted=this._codeMuted?!0:y)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(x){x===void 0&&(x=!0);var y=this.video;return this._codePaused=x,y&&!y.ended&&(x?y.paused||(this.removeEventHandlers(),y.pause()):x||(this._playCalled?y.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(x){return x===void 0&&(x=1),this.video&&(this.video.volume=a(x,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(x){return this.video&&(this.video.playbackRate=x),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(x){return x===void 0&&(x=!0),this.video&&(this.video.loop=x),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(x,y){return y===void 0&&(y=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,x),this.videoTextureSource.setFlipY(y)),this._key=x,this.flipY=y,!!this.videoTexture},stop:function(x){x===void 0&&(x=!0);var y=this.video;return y&&(this.removeEventHandlers(),y.cancelVideoFrameCallback(this._rfvCallbackId),y.pause()),this.retry=0,this._playCalled=!1,x&&this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var x=this.video;if(x){for(x.parentNode&&x.parentNode.removeChild(x);x.hasChildNodes();)x.removeChild(x.firstChild);x.removeAttribute("autoplay"),x.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var x=this.scene.sys.game.events;x.off(u.PAUSE,this.globalPause,this),x.off(u.RESUME,this.globalResume,this);var y=this.scene.sys.sound;y&&y.off(d.GLOBAL_MUTE,this.globalMute,this)}});s.exports=g}),58352:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){a.videoTexture&&(m.addToRenderList(a),e.batchSprite(a,a.frame,m,c))};s.exports=T}),11511:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25305),m=e(44603),c=e(23568),o=e(18471);m.register("video",function(u,r){u===void 0&&(u={});var h=c(u,"key",null),d=new o(this.scene,0,0,h);return r!==void 0&&(u.add=r),a(this.scene,d,u),d})}),89025:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18471),m=e(39429);m.register("video",function(c,o,u){return this.displayList.add(new a(this.scene,c,o,u))})}),10247:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(29849),c=e(58352),s.exports={renderWebGL:m,renderCanvas:c}}),29849:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){a.videoTexture&&(m.addToRenderList(a),a.pipeline.batchSprite(a,m,c))};s.exports=T}),41481:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),m=e(96503),c=e(87902),o=e(83419),u=e(31401),r=e(95643),h=e(87841),d=e(37303),l=new o({Extends:r,Mixins:[u.Depth,u.GetBounds,u.Origin,u.Transform,u.ScrollFactor,u.Visible],initialize:function(g,x,y,E,w){E===void 0&&(E=1),w===void 0&&(w=E),r.call(this,g,"Zone"),this.setPosition(x,y),this.width=E,this.height=w,this.blendMode=a.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(p){this.scaleX=p/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(p){this.scaleY=p/this.height}},setSize:function(p,g,x){x===void 0&&(x=!0),this.width=p,this.height=g,this.updateDisplayOrigin();var y=this.input;return x&&y&&!y.customHitArea&&(y.hitArea.width=p,y.hitArea.height=g),this},setDisplaySize:function(p,g){return this.displayWidth=p,this.displayHeight=g,this},setCircleDropZone:function(p){return this.setDropZone(new m(0,0,p),c)},setRectangleDropZone:function(p,g){return this.setDropZone(new h(0,0,p,g),d)},setDropZone:function(p,g){return this.input||this.setInteractive(p,g,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(p,g,x){x.addToRenderList(g)},renderWebGL:function(p,g,x){x.addToRenderList(g)}});s.exports=l}),95261:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),m=e(23568),c=e(41481);a.register("zone",function(o){var u=m(o,"x",0),r=m(o,"y",0),h=m(o,"width",1),d=m(o,"height",h);return new c(this.scene,u,r,h,d)})}),84175:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41481),m=e(39429);m.register("zone",function(c,o,u,r){return this.displayList.add(new a(this.scene,c,o,u,r))})}),95166:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};s.exports=T}),96503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(87902),c=e(26241),o=e(79124),u=e(23777),r=e(28176),h=new a({initialize:function(l,p,g){l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=u.CIRCLE,this.x=l,this.y=p,this._radius=g,this._diameter=g*2},contains:function(d,l){return m(this,d,l)},getPoint:function(d,l){return c(this,d,l)},getPoints:function(d,l,p){return o(this,d,l,p)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,l,p){return this.x=d,this.y=l,this._radius=p,this._diameter=p*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(d,l){return l===void 0&&(l=d),this.x=d,this.y=l,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this._diameter=d*2}},diameter:{get:function(){return this._diameter},set:function(d){this._diameter=d,this._radius=d*.5}},left:{get:function(){return this.x-this._radius},set:function(d){this.x=d+this._radius}},right:{get:function(){return this.x+this._radius},set:function(d){this.x=d-this._radius}},top:{get:function(){return this.y-this._radius},set:function(d){this.y=d+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(d){this.y=d-this._radius}}});s.exports=h}),71562:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(Math.PI*e.radius)};s.exports=T}),92110:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o,u){return u===void 0&&(u=new a),u.x=c.x+c.radius*Math.cos(o),u.y=c.y+c.radius*Math.sin(o),u};s.exports=m}),42250:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),m=function(c){return new a(c.x,c.y,c.radius)};s.exports=m}),87902:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(e.radius>0&&a>=e.left&&a<=e.right&&m>=e.top&&m<=e.bottom){var c=(e.x-a)*(e.x-a),o=(e.y-m)*(e.y-m);return c+o<=e.radius*e.radius}else return!1};s.exports=T}),5698:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),m=function(c,o){return a(c,o.x,o.y)};s.exports=m}),70588:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),m=function(c,o){return a(c,o.x,o.y)&&a(c,o.right,o.y)&&a(c,o.x,o.bottom)&&a(c,o.right,o.bottom)};s.exports=m}),26394:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x,e.y,e.radius)};s.exports=T}),76278:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x===a.x&&e.y===a.y&&e.radius===a.radius};s.exports=T}),2074:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=function(c,o){return o===void 0&&(o=new a),o.x=c.left,o.y=c.top,o.width=c.diameter,o.height=c.diameter,o};s.exports=m}),26241:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92110),m=e(62945),c=e(36383),o=e(2141),u=function(r,h,d){d===void 0&&(d=new o);var l=m(h,0,c.PI2);return a(r,l,d)};s.exports=u}),79124:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71562),m=e(92110),c=e(62945),o=e(36383),u=function(r,h,d,l){l===void 0&&(l=[]),!h&&d>0&&(h=a(r)/d);for(var p=0;p<h;p++){var g=c(p/h,0,o.PI2);l.push(m(r,g))}return l};s.exports=u}),50884:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e.x+=a,e.y+=m,e};s.exports=T}),39212:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x+=a.x,e.y+=a.y,e};s.exports=T}),28176:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){o===void 0&&(o=new a);var u=2*Math.PI*Math.random(),r=Math.random()+Math.random(),h=r>1?2-r:r,d=h*Math.cos(u),l=h*Math.sin(u);return o.x=c.x+d*c.radius,o.y=c.y+l*c.radius,o};s.exports=m}),88911:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503);a.Area=e(95166),a.Circumference=e(71562),a.CircumferencePoint=e(92110),a.Clone=e(42250),a.Contains=e(87902),a.ContainsPoint=e(5698),a.ContainsRect=e(70588),a.CopyFrom=e(26394),a.Equals=e(76278),a.GetBounds=e(2074),a.GetPoint=e(26241),a.GetPoints=e(79124),a.Offset=e(50884),a.OffsetPoint=e(39212),a.Random=e(28176),s.exports=a}),23777:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};s.exports=T}),78874:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};s.exports=T}),92990:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=e.width/2,m=e.height/2,c=Math.pow(a-m,2)/Math.pow(a+m,2);return Math.PI*(a+m)*(1+3*c/(10+Math.sqrt(4-3*c)))};s.exports=T}),79522:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o,u){u===void 0&&(u=new a);var r=c.width/2,h=c.height/2;return u.x=c.x+r*Math.cos(o),u.y=c.y+h*Math.sin(o),u};s.exports=m}),58102:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8497),m=function(c){return new a(c.x,c.y,c.width,c.height)};s.exports=m}),81154:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(e.width<=0||e.height<=0)return!1;var c=(a-e.x)/e.width,o=(m-e.y)/e.height;return c*=c,o*=o,c+o<.25};s.exports=T}),46662:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81154),m=function(c,o){return a(c,o.x,o.y)};s.exports=m}),1632:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81154),m=function(c,o){return a(c,o.x,o.y)&&a(c,o.right,o.y)&&a(c,o.x,o.bottom)&&a(c,o.right,o.bottom)};s.exports=m}),65534:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};s.exports=T}),8497:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(81154),c=e(90549),o=e(48320),u=e(23777),r=e(24820),h=new a({initialize:function(l,p,g,x){l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),this.type=u.ELLIPSE,this.x=l,this.y=p,this.width=g,this.height=x},contains:function(d,l){return m(this,d,l)},getPoint:function(d,l){return c(this,d,l)},getPoints:function(d,l,p){return o(this,d,l,p)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,l,p,g){return this.x=d,this.y=l,this.width=p,this.height=g,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(d,l){return l===void 0&&(l=d),this.x=d,this.y=l,this},setSize:function(d,l){return l===void 0&&(l=d),this.width=d,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(d){this.x=d+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(d){this.y=d+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});s.exports=h}),36146:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};s.exports=T}),23694:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=function(c,o){return o===void 0&&(o=new a),o.x=c.left,o.y=c.top,o.width=c.width,o.height=c.height,o};s.exports=m}),90549:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79522),m=e(62945),c=e(36383),o=e(2141),u=function(r,h,d){d===void 0&&(d=new o);var l=m(h,0,c.PI2);return a(r,l,d)};s.exports=u}),48320:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92990),m=e(79522),c=e(62945),o=e(36383),u=function(r,h,d,l){l===void 0&&(l=[]),!h&&d>0&&(h=a(r)/d);for(var p=0;p<h;p++){var g=c(p/h,0,o.PI2);l.push(m(r,g))}return l};s.exports=u}),73424:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e.x+=a,e.y+=m,e};s.exports=T}),44808:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x+=a.x,e.y+=a.y,e};s.exports=T}),24820:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){o===void 0&&(o=new a);var u=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return o.x=c.x+r*Math.cos(u)*c.width/2,o.y=c.y+r*Math.sin(u)*c.height/2,o};s.exports=m}),49203:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8497);a.Area=e(78874),a.Circumference=e(92990),a.CircumferencePoint=e(79522),a.Clone=e(58102),a.Contains=e(81154),a.ContainsPoint=e(46662),a.ContainsRect=e(1632),a.CopyFrom=e(65534),a.Equals=e(36146),a.GetBounds=e(23694),a.GetPoint=e(90549),a.GetPoints=e(48320),a.Offset=e(73424),a.OffsetPoint=e(44808),a.Random=e(24820),s.exports=a}),55738:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23777),m=e(79291),c={Circle:e(88911),Ellipse:e(49203),Intersects:e(91865),Line:e(2529),Mesh:e(73090),Point:e(43711),Polygon:e(58423),Rectangle:e(93232),Triangle:e(84435)};c=m(!1,c,a),s.exports=c}),2044:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20339),m=function(c,o){return a(c.x,c.y,o.x,o.y)<=c.radius+o.radius};s.exports=m}),81491:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=a.width/2,c=a.height/2,o=Math.abs(e.x-a.x-m),u=Math.abs(e.y-a.y-c),r=m+e.radius,h=c+e.radius;if(o>r||u>h)return!1;if(o<=m||u<=c)return!0;var d=o-m,l=u-c,p=d*d,g=l*l,x=e.radius*e.radius;return p+g<=x};s.exports=T}),63376:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=e(2044),c=function(o,u,r){if(r===void 0&&(r=[]),m(o,u)){var h=o.x,d=o.y,l=o.radius,p=u.x,g=u.y,x=u.radius,y,E,w,C,A;if(d===g)A=(x*x-l*l-p*p+h*h)/(2*(h-p)),y=1,E=-2*g,w=p*p+A*A-2*p*A+g*g-x*x,C=E*E-4*y*w,C===0?r.push(new a(A,-E/(2*y))):C>0&&(r.push(new a(A,(-E+Math.sqrt(C))/(2*y))),r.push(new a(A,(-E-Math.sqrt(C))/(2*y))));else{var M=(h-p)/(d-g),R=(x*x-l*l-p*p+h*h-g*g+d*d)/(2*(d-g));y=M*M+1,E=2*d*M-2*R*M-2*h,w=h*h+d*d+R*R-l*l-2*d*R,C=E*E-4*y*w,C===0?(A=-E/(2*y),r.push(new a(A,R-A*M))):C>0&&(A=(-E+Math.sqrt(C))/(2*y),r.push(new a(A,R-A*M)),A=(-E-Math.sqrt(C))/(2*y),r.push(new a(A,R-A*M)))}}return r};s.exports=c}),97439:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4042),m=e(81491),c=function(o,u,r){if(r===void 0&&(r=[]),m(o,u)){var h=u.getLineA(),d=u.getLineB(),l=u.getLineC(),p=u.getLineD();a(h,o,r),a(d,o,r),a(l,o,r),a(p,o,r)}return r};s.exports=c}),4042:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=e(80462),c=function(o,u,r){if(r===void 0&&(r=[]),m(o,u)){var h=o.x1,d=o.y1,l=o.x2,p=o.y2,g=u.x,x=u.y,y=u.radius,E=l-h,w=p-d,C=h-g,A=d-x,M=E*E+w*w,R=2*(E*C+w*A),P=C*C+A*A-y*y,b=R*R-4*M*P,F,I;if(b===0){var L=-R/(2*M);F=h+L*E,I=d+L*w,L>=0&&L<=1&&r.push(new a(F,I))}else if(b>0){var D=(-R-Math.sqrt(b))/(2*M);F=h+D*E,I=d+D*w,D>=0&&D<=1&&r.push(new a(F,I));var O=(-R+Math.sqrt(b))/(2*M);F=h+O*E,I=d+O*w,O>=0&&O<=1&&r.push(new a(F,I))}}return r};s.exports=c}),36100:((s,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),m=function(c,o,u,r){u===void 0&&(u=!1);var h=c.x1,d=c.y1,l=c.x2,p=c.y2,g=o.x1,x=o.y1,y=o.x2,E=o.y2,w=l-h,C=p-d,A=y-g,M=E-x,R=w*M-C*A;if(R===0)return null;var P,b,F;if(u){if(P=(w*(x-d)+C*(h-g))/(A*C-M*w),w!==0)b=(g+A*P-h)/w;else if(C!==0)b=(x+M*P-d)/C;else return null;if(b<0||P<0||P>1)return null;F=b}else{if(P=((g-h)*M-(x-d)*A)/R,b=((d-x)*w-(h-g)*C)/R,P<0||P>1||b<0||b>1)return null;F=P}return r===void 0&&(r=new a),r.set(h+w*F,d+C*F,F)};s.exports=m}),3073:((s,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36100),m=e(23031),c=e(25836),o=new m,u=new c,r=function(h,d,l,p){l===void 0&&(l=!1),p===void 0&&(p=new c);var g=!1;p.set(),u.set();for(var x=d[d.length-1],y=0;y<d.length;y++){var E=d[y];o.setTo(x.x,x.y,E.x,E.y),x=E,a(h,o,l,u)&&(!g||u.z<p.z)&&(p.copy(u),g=!0)}return g?p:null};s.exports=r}),56362:((s,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),m=e(61369),c=e(3073),o=new a,u=function(r,h,d,l){l===void 0&&(l=new m),Array.isArray(h)||(h=[h]);var p=!1;l.set(),o.set();for(var g=0;g<h.length;g++)c(r,h[g].points,d,o)&&(!p||o.z<l.z)&&(l.set(o.x,o.y,o.z,g),p=!0);return p?l:null};s.exports=u}),60646:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=e(76112),c=e(92773),o=function(u,r,h){if(h===void 0&&(h=[]),c(u,r))for(var d=r.getLineA(),l=r.getLineB(),p=r.getLineC(),g=r.getLineD(),x=[new a,new a,new a,new a],y=[m(d,u,x[0]),m(l,u,x[1]),m(p,u,x[2]),m(g,u,x[3])],E=0;E<4;E++)y[E]&&h.push(x[E]);return h};s.exports=o}),71147:((s,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61369),m=e(56362),c=e(23031),o=new c;function u(d,l,p,g,x){var y=Math.cos(d),E=Math.sin(d);o.setTo(l,p,l+y,p+E);var w=m(o,g,!0);w&&x.push(new a(w.x,w.y,d,w.w))}function r(d,l){return d.z-l.z}var h=function(d,l,p){Array.isArray(p)||(p=[p]);for(var g=[],x=[],y=0;y<p.length;y++)for(var E=p[y].points,w=0;w<E.length;w++){var C=Math.atan2(E[w].y-l,E[w].x-d);x.indexOf(C)===-1&&(u(C,d,l,p,g),u(C-1e-5,d,l,p,g),u(C+1e-5,d,l,p,g),x.push(C))}return g.sort(r)};s.exports=h}),68389:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=e(59996),c=function(o,u,r){return r===void 0&&(r=new a),m(o,u)&&(r.x=Math.max(o.x,u.x),r.y=Math.max(o.y,u.y),r.width=Math.min(o.right,u.right)-r.x,r.height=Math.min(o.bottom,u.bottom)-r.y),r};s.exports=c}),52784:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60646),m=e(59996),c=function(o,u,r){if(r===void 0&&(r=[]),m(o,u)){var h=o.getLineA(),d=o.getLineB(),l=o.getLineC(),p=o.getLineD();a(h,u,r),a(d,u,r),a(l,u,r),a(p,u,r)}return r};s.exports=c}),26341:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89265),m=e(60646),c=function(o,u,r){if(r===void 0&&(r=[]),a(o,u)){var h=u.getLineA(),d=u.getLineB(),l=u.getLineC();m(h,o,r),m(d,o,r),m(l,o,r)}return r};s.exports=c}),38720:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(4042),m=e(67636),c=function(o,u,r){if(r===void 0&&(r=[]),m(o,u)){var h=o.getLineA(),d=o.getLineB(),l=o.getLineC();a(h,u,r),a(d,u,r),a(l,u,r)}return r};s.exports=c}),13882:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=e(2822),c=e(76112),o=function(u,r,h){if(h===void 0&&(h=[]),m(u,r))for(var d=u.getLineA(),l=u.getLineB(),p=u.getLineC(),g=[new a,new a,new a],x=[c(d,r,g[0]),c(l,r,g[1]),c(p,r,g[2])],y=0;y<3;y++)x[y]&&h.push(g[y]);return h};s.exports=o}),75636:((s,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82944),m=e(13882),c=function(o,u,r){if(r===void 0&&(r=[]),a(o,u)){var h=u.getLineA(),d=u.getLineB(),l=u.getLineC();m(o,h,r),m(o,d,r),m(o,l,r)}return r};s.exports=c}),80462:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),m=e(2141),c=new m,o=function(u,r,h){if(h===void 0&&(h=c),a(r,u.x1,u.y1))return h.x=u.x1,h.y=u.y1,!0;if(a(r,u.x2,u.y2))return h.x=u.x2,h.y=u.y2,!0;var d=u.x2-u.x1,l=u.y2-u.y1,p=r.x-u.x1,g=r.y-u.y1,x=d*d+l*l,y=d,E=l;if(x>0){var w=(p*d+g*l)/x;y*=w,E*=w}h.x=u.x1+y,h.y=u.y1+E;var C=y*y+E*E;return C<=x&&y*d+E*l>=0&&a(r,h.x,h.y)};s.exports=o}),76112:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=e.x1,o=e.y1,u=e.x2,r=e.y2,h=a.x1,d=a.y1,l=a.x2,p=a.y2;if(c===u&&o===r||h===l&&d===p)return!1;var g=(p-d)*(u-c)-(l-h)*(r-o);if(g===0)return!1;var x=((l-h)*(o-d)-(p-d)*(c-h))/g,y=((u-c)*(o-d)-(r-o)*(c-h))/g;return x<0||x>1||y<0||y>1?!1:(m&&(m.x=c+x*(u-c),m.y=o+x*(r-o)),!0)};s.exports=T}),92773:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.x1,c=e.y1,o=e.x2,u=e.y2,r=a.x,h=a.y,d=a.right,l=a.bottom,p=0;if(m>=r&&m<=d&&c>=h&&c<=l||o>=r&&o<=d&&u>=h&&u<=l)return!0;if(m<r&&o>=r){if(p=c+(u-c)*(r-m)/(o-m),p>h&&p<=l)return!0}else if(m>d&&o<=d&&(p=c+(u-c)*(d-m)/(o-m),p>=h&&p<=l))return!0;if(c<h&&u>=h){if(p=m+(o-m)*(h-c)/(u-c),p>=r&&p<=d)return!0}else if(c>l&&u<=l&&(p=m+(o-m)*(l-c)/(u-c),p>=r&&p<=d))return!0;return!1};s.exports=T}),16204:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){m===void 0&&(m=1);var c=a.x1,o=a.y1,u=a.x2,r=a.y2,h=e.x,d=e.y,l=(u-c)*(u-c)+(r-o)*(r-o);if(l===0)return!1;var p=((h-c)*(u-c)+(d-o)*(r-o))/l;if(p<0)return Math.sqrt((c-h)*(c-h)+(o-d)*(o-d))<=m;if(p>=0&&p<=1){var g=((o-d)*(u-c)-(c-h)*(r-o))/l;return Math.abs(g)*Math.sqrt(l)<=m}else return Math.sqrt((u-h)*(u-h)+(r-d)*(r-d))<=m};s.exports=T}),14199:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16204),m=function(c,o){if(!a(c,o))return!1;var u=Math.min(o.x1,o.x2),r=Math.max(o.x1,o.x2),h=Math.min(o.y1,o.y2),d=Math.max(o.y1,o.y2);return c.x>=u&&c.x<=r&&c.y>=h&&c.y<=d};s.exports=m}),59996:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.width<=0||e.height<=0||a.width<=0||a.height<=0?!1:!(e.right<a.x||e.bottom<a.y||e.x>a.right||e.y>a.bottom)};s.exports=T}),89265:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76112),m=e(37303),c=e(48653),o=e(77493),u=function(r,h){if(h.left>r.right||h.right<r.left||h.top>r.bottom||h.bottom<r.top)return!1;var d=h.getLineA(),l=h.getLineB(),p=h.getLineC();if(m(r,d.x1,d.y1)||m(r,d.x2,d.y2)||m(r,l.x1,l.y1)||m(r,l.x2,l.y2)||m(r,p.x1,p.y1)||m(r,p.x2,p.y2))return!0;var g=r.getLineA(),x=r.getLineB(),y=r.getLineC(),E=r.getLineD();if(a(d,g)||a(d,x)||a(d,y)||a(d,E)||a(l,g)||a(l,x)||a(l,y)||a(l,E)||a(p,g)||a(p,x)||a(p,y)||a(p,E))return!0;var w=o(r),C=c(h,w,!0);return C.length>0};s.exports=u}),84411:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o,u){return u===void 0&&(u=0),!(a>e.right+u||m<e.left-u||c>e.bottom+u||o<e.top-u)};s.exports=T}),67636:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80462),m=e(10690),c=function(o,u){return o.left>u.right||o.right<u.left||o.top>u.bottom||o.bottom<u.top?!1:!!(m(o,u.x,u.y)||a(o.getLineA(),u)||a(o.getLineB(),u)||a(o.getLineC(),u))};s.exports=c}),2822:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76112),m=function(c,o){return!!(c.contains(o.x1,o.y1)||c.contains(o.x2,o.y2)||a(c.getLineA(),o)||a(c.getLineB(),o)||a(c.getLineC(),o))};s.exports=m}),82944:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(48653),m=e(71694),c=e(76112),o=function(u,r){if(u.left>r.right||u.right<r.left||u.top>r.bottom||u.bottom<r.top)return!1;var h=u.getLineA(),d=u.getLineB(),l=u.getLineC(),p=r.getLineA(),g=r.getLineB(),x=r.getLineC();if(c(h,p)||c(h,g)||c(h,x)||c(d,p)||c(d,g)||c(d,x)||c(l,p)||c(l,g)||c(l,x))return!0;var y=m(u),E=a(r,y,!0);return E.length>0||(y=m(r),E=a(u,y,!0),E.length>0)};s.exports=o}),91865:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CircleToCircle:e(2044),CircleToRectangle:e(81491),GetCircleToCircle:e(63376),GetCircleToRectangle:e(97439),GetLineToCircle:e(4042),GetLineToLine:e(36100),GetLineToPoints:e(3073),GetLineToPolygon:e(56362),GetLineToRectangle:e(60646),GetRaysFromPointToPolygon:e(71147),GetRectangleIntersection:e(68389),GetRectangleToRectangle:e(52784),GetRectangleToTriangle:e(26341),GetTriangleToCircle:e(38720),GetTriangleToLine:e(13882),GetTriangleToTriangle:e(75636),LineToCircle:e(80462),LineToLine:e(76112),LineToRectangle:e(92773),PointToLine:e(16204),PointToLineSegment:e(14199),RectangleToRectangle:e(59996),RectangleToTriangle:e(89265),RectangleToValues:e(84411),TriangleToCircle:e(67636),TriangleToLine:e(2822),TriangleToTriangle:e(82944)}}),91938:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};s.exports=T}),84993:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){a===void 0&&(a=1),m===void 0&&(m=[]);var c=Math.round(e.x1),o=Math.round(e.y1),u=Math.round(e.x2),r=Math.round(e.y2),h=Math.abs(u-c),d=Math.abs(r-o),l=c<u?1:-1,p=o<r?1:-1,g=h-d;m.push({x:c,y:o});for(var x=1;!(c===u&&o===r);){var y=g<<1;y>-d&&(g-=d,c+=l),y<h&&(g+=h,o+=p),x%a===0&&m.push({x:c,y:o}),x++}return m};s.exports=T}),36469:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=a-(e.x1+e.x2)/2,o=m-(e.y1+e.y2)/2;return e.x1+=c,e.y1+=o,e.x2+=c,e.y2+=o,e};s.exports=T}),31116:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23031),m=function(c){return new a(c.x1,c.y1,c.x2,c.y2)};s.exports=m}),59944:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2)};s.exports=T}),59220:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2};s.exports=T}),78177:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),m=function(c,o,u){u===void 0&&(u=o);var r=a(c),h=c.x2-c.x1,d=c.y2-c.y1;return o&&(c.x1=c.x1-h/r*o,c.y1=c.y1-d/r*o),u&&(c.x2=c.x2+h/r*u,c.y2=c.y2+d/r*u),c};s.exports=m}),26708:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(52816),m=e(6113),c=e(2141),o=function(u,r,h,d,l){d===void 0&&(d=0),l===void 0&&(l=[]);var p=[],g=u.x1,x=u.y1,y=u.x2-g,E=u.y2-x,w=m(r,l),C,A,M=h-1;for(C=0;C<M;C++)A=w(C/M),p.push(new c(g+y*A,x+E*A));if(A=w(1),p.push(new c(g+y*A,x+E*A)),d>0){var R=p[0],P=[R];for(C=1;C<p.length-1;C++){var b=p[C];a(R,b)>=d&&(P.push(b),R=b)}var F=p[p.length-1];return a(R,F)<d&&P.pop(),P.push(F),P}else return p};s.exports=o}),32125:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){return o===void 0&&(o=new a),o.x=(c.x1+c.x2)/2,o.y=(c.y1+c.y2)/2,o};s.exports=m}),99569:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o,u){u===void 0&&(u=new a);var r=c.x1,h=c.y1,d=c.x2,l=c.y2,p=(d-r)*(d-r)+(l-h)*(l-h);if(p===0)return u;var g=((o.x-r)*(d-r)+(o.y-h)*(l-h))/p;return u.x=r+g*(d-r),u.y=h+g*(l-h),u};s.exports=m}),34638:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=e(91938),c=e(2141),o=function(u,r){r===void 0&&(r=new c);var h=m(u)-a.TAU;return r.x=Math.cos(h),r.y=Math.sin(h),r};s.exports=o}),13151:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o,u){return u===void 0&&(u=new a),u.x=c.x1+(c.x2-c.x1)*o,u.y=c.y1+(c.y2-c.y1)*o,u};s.exports=m}),15258:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),m=e(2141),c=function(o,u,r,h){h===void 0&&(h=[]),!u&&r>0&&(u=a(o)/r);for(var d=o.x1,l=o.y1,p=o.x2,g=o.y2,x=0;x<u;x++){var y=x/u,E=d+(p-d)*y,w=l+(g-l)*y;h.push(new m(E,w))}return h};s.exports=c}),26408:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.x1,c=e.y1,o=e.x2,u=e.y2,r=(o-m)*(o-m)+(u-c)*(u-c);if(r===0)return!1;var h=((c-a.y)*(o-m)-(m-a.x)*(u-c))/r;return Math.abs(h)*Math.sqrt(r)};s.exports=T}),98770:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.y1-e.y2)};s.exports=T}),35001:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};s.exports=T}),23031:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(13151),c=e(15258),o=e(23777),u=e(65822),r=e(26099),h=new a({initialize:function(l,p,g,x){l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),this.type=o.LINE,this.x1=l,this.y1=p,this.x2=g,this.y2=x},getPoint:function(d,l){return m(this,d,l)},getPoints:function(d,l,p){return c(this,d,l,p)},getRandomPoint:function(d){return u(this,d)},setTo:function(d,l,p,g){return d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=0),this.x1=d,this.y1=l,this.x2=p,this.y2=g,this},setFromObjects:function(d,l){return this.x1=d.x,this.y1=d.y,this.x2=l.x,this.y2=l.y,this},getPointA:function(d){return d===void 0&&(d=new r),d.set(this.x1,this.y1),d},getPointB:function(d){return d===void 0&&(d=new r),d.set(this.x2,this.y2),d},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(d){this.x1<=this.x2?this.x1=d:this.x2=d}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(d){this.x1>this.x2?this.x1=d:this.x2=d}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(d){this.y1<=this.y2?this.y1=d:this.y2=d}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(d){this.y1>this.y2?this.y1=d:this.y2=d}}});s.exports=h}),64795:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=e(15994),c=e(91938),o=function(u){var r=c(u)-a.TAU;return m(r,-Math.PI,Math.PI)};s.exports=o}),52616:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=e(91938),c=function(o){return Math.cos(m(o)-a.TAU)};s.exports=c}),87231:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=e(91938),c=function(o){return Math.sin(m(o)-a.TAU)};s.exports=c}),89662:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e.x1+=a,e.y1+=m,e.x2+=a,e.y2+=m,e};s.exports=T}),71165:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};s.exports=T}),65822:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){o===void 0&&(o=new a);var u=Math.random();return o.x=c.x1+u*(c.x2-c.x1),o.y=c.y1+u*(c.y2-c.y1),o};s.exports=m}),69777:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91938),m=e(64795),c=function(o,u){return 2*m(u)-Math.PI-a(o)};s.exports=c}),39706:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64400),m=function(c,o){var u=(c.x1+c.x2)/2,r=(c.y1+c.y2)/2;return a(c,u,r,o)};s.exports=m}),82585:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64400),m=function(c,o,u){return a(c,o.x,o.y,u)};s.exports=m}),64400:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=Math.cos(c),u=Math.sin(c),r=e.x1-a,h=e.y1-m;return e.x1=r*o-h*u+a,e.y1=r*u+h*o+m,r=e.x2-a,h=e.y2-m,e.x2=r*o-h*u+a,e.y2=r*u+h*o+m,e};s.exports=T}),62377:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o){return e.x1=a,e.y1=m,e.x2=a+Math.cos(c)*o,e.y2=m+Math.sin(c)*o,e};s.exports=T}),71366:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};s.exports=T}),10809:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.x1-e.x2)};s.exports=T}),2529:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23031);a.Angle=e(91938),a.BresenhamPoints=e(84993),a.CenterOn=e(36469),a.Clone=e(31116),a.CopyFrom=e(59944),a.Equals=e(59220),a.Extend=e(78177),a.GetEasedPoints=e(26708),a.GetMidPoint=e(32125),a.GetNearestPoint=e(99569),a.GetNormal=e(34638),a.GetPoint=e(13151),a.GetPoints=e(15258),a.GetShortestDistance=e(26408),a.Height=e(98770),a.Length=e(35001),a.NormalAngle=e(64795),a.NormalX=e(52616),a.NormalY=e(87231),a.Offset=e(89662),a.PerpSlope=e(71165),a.Random=e(65822),a.ReflectAngle=e(69777),a.Rotate=e(39706),a.RotateAroundPoint=e(82585),a.RotateAroundXY=e(64400),a.SetToAngle=e(62377),a.Slope=e(71366),a.Width=e(10809),s.exports=a}),83997:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(87841),c=e(26099);function o(r,h,d,l){var p=r-d,g=h-l,x=p*p+g*g;return Math.sqrt(x)}var u=new a({initialize:function(h,d,l){this.vertex1=h,this.vertex2=d,this.vertex3=l,this.bounds=new m,this._inCenter=new c},getInCenter:function(r){r===void 0&&(r=!0);var h=this.vertex1,d=this.vertex2,l=this.vertex3,p,g,x,y,E,w;r?(p=h.x,g=h.y,x=d.x,y=d.y,E=l.x,w=l.y):(p=h.vx,g=h.vy,x=d.vx,y=d.vy,E=l.vx,w=l.vy);var C=o(E,w,x,y),A=o(p,g,E,w),M=o(x,y,p,g),R=C+A+M;return this._inCenter.set((p*C+x*A+E*M)/R,(g*C+y*A+w*M)/R)},contains:function(r,h,d){var l=this.vertex1,p=this.vertex2,g=this.vertex3,x=l.vx,y=l.vy,E=p.vx,w=p.vy,C=g.vx,A=g.vy;if(d){var M=d.a,R=d.b,P=d.c,b=d.d,F=d.e,I=d.f;x=l.vx*M+l.vy*P+F,y=l.vx*R+l.vy*b+I,E=p.vx*M+p.vy*P+F,w=p.vx*R+p.vy*b+I,C=g.vx*M+g.vy*P+F,A=g.vx*R+g.vy*b+I}var L=C-x,D=A-y,O=E-x,z=w-y,W=r-x,k=h-y,X=L*L+D*D,V=L*O+D*z,G=L*W+D*k,N=O*O+z*z,H=O*W+z*k,U=X*N-V*V,_=U===0?0:1/U,$=(N*G-V*H)*_,j=(X*H-V*G)*_;return $>=0&&j>=0&&$+j<1},isCounterClockwise:function(r){var h=this.vertex1,d=this.vertex2,l=this.vertex3,p=(d.vx-h.vx)*(l.vy-h.vy)-(d.vy-h.vy)*(l.vx-h.vx);return r<=0?p>=0:p<0},load:function(r,h,d,l,p){return d=this.vertex1.load(r,h,d,l,p),d=this.vertex2.load(r,h,d,l,p),d=this.vertex3.load(r,h,d,l,p),d},transformCoordinatesLocal:function(r,h,d,l){return this.vertex1.transformCoordinatesLocal(r,h,d,l),this.vertex2.transformCoordinatesLocal(r,h,d,l),this.vertex3.transformCoordinatesLocal(r,h,d,l),this},updateBounds:function(){var r=this.vertex1,h=this.vertex2,d=this.vertex3,l=this.bounds;return l.x=Math.min(r.vx,h.vx,d.vx),l.y=Math.min(r.vy,h.vy,d.vy),l.width=Math.max(r.vx,h.vx,d.vx)-l.x,l.height=Math.max(r.vy,h.vy,d.vy)-l.y,this},isInView:function(r,h,d,l,p,g,x,y,E,w,C){this.update(l,p,g,x,y,E,w,C);var A=this.vertex1,M=this.vertex2,R=this.vertex3;if(A.ta<=0&&M.ta<=0&&R.ta<=0||h&&!this.isCounterClockwise(d))return!1;var P=this.bounds;P.x=Math.min(A.tx,M.tx,R.tx),P.y=Math.min(A.ty,M.ty,R.ty),P.width=Math.max(A.tx,M.tx,R.tx)-P.x,P.height=Math.max(A.ty,M.ty,R.ty)-P.y;var b=r.x+r.width,F=r.y+r.height;return P.width<=0||P.height<=0||r.width<=0||r.height<=0?!1:!(P.right<r.x||P.bottom<r.y||P.x>b||P.y>F)},scrollUV:function(r,h){return this.vertex1.scrollUV(r,h),this.vertex2.scrollUV(r,h),this.vertex3.scrollUV(r,h),this},scaleUV:function(r,h){return this.vertex1.scaleUV(r,h),this.vertex2.scaleUV(r,h),this.vertex3.scaleUV(r,h),this},setColor:function(r){return this.vertex1.color=r,this.vertex2.color=r,this.vertex3.color=r,this},update:function(r,h,d,l,p,g,x,y){return this.vertex1.update(h,d,l,p,g,x,y,r),this.vertex2.update(h,d,l,p,g,x,y,r),this.vertex3.update(h,d,l,p,g,x,y,r),this},translate:function(r,h){h===void 0&&(h=0);var d=this.vertex1,l=this.vertex2,p=this.vertex3;return d.x+=r,d.y+=h,l.x+=r,l.y+=h,p.x+=r,p.y+=h,this},x:{get:function(){return this.getInCenter().x},set:function(r){var h=this.getInCenter();this.translate(r-h.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var h=this.getInCenter();this.translate(0,r-h.y)}},alpha:{get:function(){var r=this.vertex1,h=this.vertex2,d=this.vertex3;return(r.alpha+h.alpha+d.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,h=this.vertex2,d=this.vertex3;return(r.vz+h.vz+d.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});s.exports=u}),48803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),m=e(95540),c=e(37867),o=e(25836),u=e(39318),r=new o,h=new o,d=new c,l=function(p){var g=m(p,"mesh"),x=m(p,"texture",null),y=m(p,"frame"),E=m(p,"width",1),w=m(p,"height",E),C=m(p,"widthSegments",1),A=m(p,"heightSegments",C),M=m(p,"x",0),R=m(p,"y",0),P=m(p,"z",0),b=m(p,"rotateX",0),F=m(p,"rotateY",0),I=m(p,"rotateZ",0),L=m(p,"zIsUp",!0),D=m(p,"isOrtho",g?g.dirtyCache[11]:!1),O=m(p,"colors",[16777215]),z=m(p,"alphas",[1]),W=m(p,"tile",!1),k=m(p,"flipY",!1),X=m(p,"width",null),V={faces:[],verts:[]};r.set(M,R,P),h.set(b,F,I),d.fromRotationXYTranslation(h,r,L);var G;if(!x&&g)x=g.texture,y||(G=g.frame);else if(g&&typeof x=="string")x=g.scene.sys.textures.get(x);else if(!x)return V;G||(G=x.get(y)),!X&&D&&x&&g&&(E=G.width/g.height,w=G.height/g.height);var N=E/2,H=w/2,U=Math.floor(C),_=Math.floor(A),$=U+1,j=_+1,Z=E/U,it=w/_,at=[],q=[],ft,vt,Tt=0,ut=1,Bt=0,Pt=1;G&&(Tt=G.u0,ut=G.u1,k?(Bt=G.v1,Pt=G.v0):(Bt=G.v0,Pt=G.v1));var et=ut-Tt,Q=Pt-Bt;for(vt=0;vt<j;vt++){var lt=vt*it-H;for(ft=0;ft<$;ft++){var pt=ft*Z-N;q.push(pt,-lt);var Mt=Tt+et*(ft/U),Ct=Bt+Q*(vt/_);at.push(Mt,Ct)}}Array.isArray(O)||(O=[O]),Array.isArray(z)||(z=[z]);var Kt=0,Ut=0;for(vt=0;vt<_;vt++)for(ft=0;ft<U;ft++){var Wt=(ft+$*vt)*2,ae=(ft+$*(vt+1))*2,zt=(ft+1+$*(vt+1))*2,Ht=(ft+1+$*vt)*2,At=O[Ut],ne=z[Kt],jt=new u(q[Wt],q[Wt+1],0,at[Wt],at[Wt+1],At,ne).transformMat4(d),ve=new u(q[ae],q[ae+1],0,at[ae],at[ae+1],At,ne).transformMat4(d),we=new u(q[Ht],q[Ht+1],0,at[Ht],at[Ht+1],At,ne).transformMat4(d),De=new u(q[ae],q[ae+1],0,at[ae],at[ae+1],At,ne).transformMat4(d),dt=new u(q[zt],q[zt+1],0,at[zt],at[zt+1],At,ne).transformMat4(d),Qt=new u(q[Ht],q[Ht+1],0,at[Ht],at[Ht+1],At,ne).transformMat4(d);W&&(jt.setUVs(Tt,Pt),ve.setUVs(Tt,Bt),we.setUVs(ut,Pt),De.setUVs(Tt,Bt),dt.setUVs(ut,Bt),Qt.setUVs(ut,Pt)),Ut++,Ut===O.length&&(Ut=0),Kt++,Kt===z.length&&(Kt=0),V.verts.push(jt,ve,we,De,dt,Qt),V.faces.push(new a(jt,ve,we),new a(De,dt,Qt))}return g&&(g.faces=g.faces.concat(V.faces),g.vertices=g.vertices.concat(V.verts)),V};s.exports=l}),34684:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),m=e(37867),c=e(25836),o=e(39318),u=new c,r=new c,h=new m,d=function(l,p,g,x,y,E,w,C,A,M){g===void 0&&(g=1),x===void 0&&(x=0),y===void 0&&(y=0),E===void 0&&(E=0),w===void 0&&(w=0),C===void 0&&(C=0),A===void 0&&(A=0),M===void 0&&(M=!0);var R={faces:[],verts:[]},P=l.materials;u.set(x,y,E),r.set(w,C,A),h.fromRotationXYTranslation(r,u,M);for(var b=0;b<l.models.length;b++)for(var F=l.models[b],I=F.vertices,L=F.textureCoords,D=F.faces,O=0;O<D.length;O++){var z=D[O],W=z.vertices[0],k=z.vertices[1],X=z.vertices[2],V=I[W.vertexIndex],G=I[k.vertexIndex],N=I[X.vertexIndex],H=W.textureCoordsIndex,U=k.textureCoordsIndex,_=X.textureCoordsIndex,$=H===-1?{u:0,v:1}:L[H],j=U===-1?{u:0,v:0}:L[U],Z=_===-1?{u:1,v:1}:L[_],it=16777215;z.material!==""&&P[z.material]&&(it=P[z.material]);var at=new o(V.x*g,V.y*g,V.z*g,$.u,$.v,it).transformMat4(h),q=new o(G.x*g,G.y*g,G.z*g,j.u,j.v,it).transformMat4(h),ft=new o(N.x*g,N.y*g,N.z*g,Z.u,Z.v,it).transformMat4(h);R.verts.push(at,q,ft),R.faces.push(new a(at,q,ft))}return p&&(p.faces=p.faces.concat(R.faces),p.vertices=p.vertices.concat(R.verts)),R};s.exports=d}),92515:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83997),m=e(39318),c=function(o,u,r,h,d,l,p,g){if(h===void 0&&(h=!1),l===void 0&&(l=16777215),p===void 0&&(p=1),g===void 0&&(g=!1),o.length!==u.length&&!h){console.warn("GenerateVerts: vertices and uvs count not equal");return}var x={faces:[],vertices:[]},y,E,w,C,A,M,R,P,b,F,I,L=h?3:2,D=Array.isArray(l),O=Array.isArray(p);if(Array.isArray(r)&&r.length>0)for(y=0;y<r.length;y++){var z=r[y],W=r[y]*2,k=r[y]*L;E=o[k],w=o[k+1],C=h?o[k+2]:0,A=u[W],M=u[W+1],g&&(M=1-M),R=D?l[z]:l,P=O?p[z]:p,b=0,F=0,I=0,d&&(b=d[k],F=d[k+1],I=h?d[k+2]:0),x.vertices.push(new m(E,w,C,A,M,R,P,b,F,I))}else{var X=0,V=0;for(y=0;y<o.length;y+=L)E=o[y],w=o[y+1],C=h?o[y+2]:0,A=u[X],M=u[X+1],R=D?l[V]:l,P=O?p[V]:p,b=0,F=0,I=0,d&&(b=d[y],F=d[y+1],I=h?d[y+2]:0),x.vertices.push(new m(E,w,C,A,M,R,P,b,F,I)),X+=2,V++}for(y=0;y<x.vertices.length;y+=3){var G=x.vertices[y],N=x.vertices[y+1],H=x.vertices[y+2];x.faces.push(new a(G,N,H))}return x};s.exports=c}),85048:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=!0,e="untitled",a="",m="";function c(E){var w=E.indexOf("#");return w>-1?E.substring(0,w):E}function o(E){return E.models.length===0&&E.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),a="",E.models[E.models.length-1]}function u(E,w){var C=E.length>=2?E[1]:e;w.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function r(E){E.length===2&&(a=E[1])}function h(E,w){var C=E.length,A=C>=2?parseFloat(E[1]):0,M=C>=3?parseFloat(E[2]):0,R=C>=4?parseFloat(E[3]):0;o(w).vertices.push({x:A,y:M,z:R})}function d(E,w){var C=E.length,A=C>=2?parseFloat(E[1]):0,M=C>=3?parseFloat(E[2]):0,R=C>=4?parseFloat(E[3]):0;isNaN(A)&&(A=0),isNaN(M)&&(M=0),isNaN(R)&&(R=0),T&&(M=1-M),o(w).textureCoords.push({u:A,v:M,w:R})}function l(E,w){var C=E.length,A=C>=2?parseFloat(E[1]):0,M=C>=3?parseFloat(E[2]):0,R=C>=4?parseFloat(E[3]):0;o(w).vertexNormals.push({x:A,y:M,z:R})}function p(E,w){var C=E.length-1;if(!(C<3)){for(var A={group:a,material:m,vertices:[]},M=0;M<C;M++){var R=E[M+1],P=R.split("/"),b=P.length;if(!(b<1||b>3)){var F=0,I=0,L=0;F=parseInt(P[0],10),b>1&&P[1]!==""&&(I=parseInt(P[1],10)),b>2&&(L=parseInt(P[2],10)),F!==0&&(F<0&&(F=o(w).vertices.length+1+F),I-=1,F-=1,L-=1,A.vertices.push({textureCoordsIndex:I,vertexIndex:F,vertexNormalIndex:L}))}}o(w).faces.push(A)}}function g(E,w){E.length>=2&&w.materialLibraries.push(E[1])}function x(E){E.length>=2&&(m=E[1])}var y=function(E,w){w===void 0&&(w=!0),T=w;var C={materials:{},materialLibraries:[],models:[]};a="",m="";for(var A=E.split(`
`),M=0;M<A.length;M++){var R=c(A[M]),P=R.replace(/\s\s+/g," ").trim().split(" ");switch(P[0].toLowerCase()){case"o":u(P,C);break;case"g":r(P);break;case"v":h(P,C);break;case"vt":d(P,C);break;case"vn":l(P,C);break;case"f":p(P,C);break;case"mtllib":g(P,C);break;case"usemtl":x(P);break}}return C};s.exports=y}),61485:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37589),m=function(c){for(var o={},u=c.split(`
`),r="",h=0;h<u.length;h++){var d=u[h].trim();if(!(d.indexOf("#")===0||d==="")){var l=d.replace(/\s\s+/g," ").trim().split(" ");switch(l[0].toLowerCase()){case"newmtl":{r=l[1];break}case"kd":{var p=Math.floor(l[1]*255),g=l.length>=2?Math.floor(l[2]*255):p,x=l.length>=3?Math.floor(l[3]*255):p;o[r]=a(p,g,x);break}}}}return o};s.exports=m}),92570:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o,u;if(m===void 0&&c===void 0){var r=e.getInCenter();o=r.x,u=r.y}var h=Math.cos(a),d=Math.sin(a),l=e.vertex1,p=e.vertex2,g=e.vertex3,x=l.x-o,y=l.y-u;l.set(x*h-y*d+o,x*d+y*h+u),x=p.x-o,y=p.y-u,p.set(x*h-y*d+o,x*d+y*h+u),x=g.x-o,y=g.y-u,g.set(x*h-y*d+o,x*d+y*h+u)};s.exports=T}),39318:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(70554),c=e(25836),o=new a({Extends:c,initialize:function(r,h,d,l,p,g,x,y,E,w){g===void 0&&(g=16777215),x===void 0&&(x=1),y===void 0&&(y=0),E===void 0&&(E=0),w===void 0&&(w=0),c.call(this,r,h,d),this.vx=0,this.vy=0,this.vz=0,this.nx=y,this.ny=E,this.nz=w,this.u=l,this.v=p,this.color=g,this.alpha=x,this.tx=0,this.ty=0,this.ta=0,this.tu=l,this.tv=p},setUVs:function(u,r){return this.u=u,this.v=r,this.tu=u,this.tv=r,this},scrollUV:function(u,r){return this.tu+=u,this.tv+=r,this},scaleUV:function(u,r){return this.tu=this.u*u,this.tv=this.v*r,this},transformCoordinatesLocal:function(u,r,h,d){var l=this.x,p=this.y,g=this.z,x=u.val,y=l*x[0]+p*x[4]+g*x[8]+x[12],E=l*x[1]+p*x[5]+g*x[9]+x[13],w=l*x[2]+p*x[6]+g*x[10]+x[14],C=l*x[3]+p*x[7]+g*x[11]+x[15];this.vx=y/C*r,this.vy=-(E/C)*h,d<=0?this.vz=w/C:this.vz=-(w/C)},resize:function(u,r,h,d,l,p){return this.x=u,this.y=r,this.vx=this.x*h,this.vy=-this.y*d,this.vz=0,l<.5?this.vx+=h*(.5-l):l>.5&&(this.vx-=h*(l-.5)),p<.5?this.vy+=d*(.5-p):p>.5&&(this.vy-=d*(p-.5)),this},update:function(u,r,h,d,l,p,g,x){var y=this.vx*u+this.vy*h+l,E=this.vx*r+this.vy*d+p;return g&&(y=Math.round(y),E=Math.round(E)),this.tx=y,this.ty=E,this.ta=this.alpha*x,this},load:function(u,r,h,d,l){return u[++h]=this.tx,u[++h]=this.ty,u[++h]=this.tu,u[++h]=this.tv,u[++h]=d,u[++h]=l,r[++h]=m.getTintAppendFloatAlpha(this.color,this.ta),h}});s.exports=o}),73090:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Face:e(83997),GenerateGridVerts:e(48803),GenerateObjVerts:e(34684),GenerateVerts:e(92515),ParseObj:e(85048),ParseObjMaterial:e(61485),RotateFace:e(92570),Vertex:e(39318)};s.exports=a}),96550:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};s.exports=T}),99706:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c){return new a(c.x,c.y)};s.exports=m}),68010:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x,e.y)};s.exports=T}),27814:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x===a.x&&e.y===a.y};s.exports=T}),73565:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};s.exports=T}),87555:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){if(o===void 0&&(o=new a),!Array.isArray(c))throw new Error("GetCentroid points argument must be an array");var u=c.length;if(u<1)throw new Error("GetCentroid points array must not be empty");if(u===1)o.x=c[0].x,o.y=c[0].y;else{for(var r=0;r<u;r++)o.x+=c[r].x,o.y+=c[r].y;o.x/=u,o.y/=u}return o};s.exports=m}),28793:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};s.exports=T}),44405:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x*e.x+e.y*e.y};s.exports=T}),20873:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=function(c,o){o===void 0&&(o=new a);for(var u=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,l=0;l<c.length;l++){var p=c[l];p.x>u&&(u=p.x),p.x<r&&(r=p.x),p.y>h&&(h=p.y),p.y<d&&(d=p.y)}return o.x=r,o.y=d,o.width=u-r,o.height=h-d,o};s.exports=m}),26152:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o,u,r){return u===void 0&&(u=0),r===void 0&&(r=new a),r.x=c.x+(o.x-c.x)*u,r.y=c.y+(o.y-c.y)*u,r};s.exports=m}),55767:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(e.y,e.x)};s.exports=T}),79432:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){return o===void 0&&(o=new a),o.setTo(-c.x,-c.y)};s.exports=m}),2141:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23777),c=new a({initialize:function(u,r){u===void 0&&(u=0),r===void 0&&(r=u),this.type=m.POINT,this.x=u,this.y=r},setTo:function(o,u){return o===void 0&&(o=0),u===void 0&&(u=o),this.x=o,this.y=u,this}});s.exports=c}),72930:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=e(44405),c=function(o,u,r){r===void 0&&(r=new a);var h=o.x*u.x+o.y*u.y,d=h/m(u);return d!==0&&(r.x=d*u.x,r.y=d*u.y),r};s.exports=c}),62880:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o,u){u===void 0&&(u=new a);var r=c.x*o.x+c.y*o.y;return r!==0&&(u.x=r*o.x,u.y=r*o.y),u};s.exports=m}),15093:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28793),m=function(c,o){if(c.x!==0||c.y!==0){var u=a(c);c.x/=u,c.y/=u}return c.x*=o,c.y*=o,c};s.exports=m}),43711:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141);a.Ceil=e(96550),a.Clone=e(99706),a.CopyFrom=e(68010),a.Equals=e(27814),a.Floor=e(73565),a.GetCentroid=e(87555),a.GetMagnitude=e(28793),a.GetMagnitudeSq=e(44405),a.GetRectangleFromPoints=e(20873),a.Interpolate=e(26152),a.Invert=e(55767),a.Negative=e(79432),a.Project=e(72930),a.ProjectUnit=e(62880),a.SetMagnitude=e(15093),s.exports=a}),12306:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25717),m=function(c){return new a(c.points)};s.exports=m}),63814:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){for(var c=!1,o=-1,u=e.points.length-1;++o<e.points.length;u=o){var r=e.points[o].x,h=e.points[o].y,d=e.points[u].x,l=e.points[u].y;(h<=m&&m<l||l<=m&&m<h)&&a<(d-r)*(m-h)/(l-h)+r&&(c=!c)}return c};s.exports=T}),99338:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63814),m=function(c,o){return a(c,o.x,o.y)};s.exports=m}),94811:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(V,G,N){N=N||2;var H=G&&G.length,U=H?G[0]*N:V.length,_=e(V,0,U,N,!0),$=[];if(!_||_.next===_.prev)return $;var j,Z,it,at,q,ft,vt;if(H&&(_=h(V,G,_,N)),V.length>80*N){j=it=V[0],Z=at=V[1];for(var Tt=N;Tt<U;Tt+=N)q=V[Tt],ft=V[Tt+1],q<j&&(j=q),ft<Z&&(Z=ft),q>it&&(it=q),ft>at&&(at=ft);vt=Math.max(it-j,at-Z),vt=vt!==0?32767/vt:0}return m(_,$,N,j,Z,vt,0),$}function e(V,G,N,H,U){var _,$;if(U===X(V,G,N,H)>0)for(_=G;_<N;_+=H)$=z(_,V[_],V[_+1],$);else for(_=N-H;_>=G;_-=H)$=z(_,V[_],V[_+1],$);return $&&R($,$.next)&&(W($),$=$.next),$}function a(V,G){if(!V)return V;G||(G=V);var N=V,H;do if(H=!1,!N.steiner&&(R(N,N.next)||M(N.prev,N,N.next)===0)){if(W(N),N=G=N.prev,N===N.next)break;H=!0}else N=N.next;while(H||N!==G);return G}function m(V,G,N,H,U,_,$){if(V){!$&&_&&x(V,H,U,_);for(var j=V,Z,it;V.prev!==V.next;){if(Z=V.prev,it=V.next,_?o(V,H,U,_):c(V)){G.push(Z.i/N|0),G.push(V.i/N|0),G.push(it.i/N|0),W(V),V=it.next,j=it.next;continue}if(V=it,V===j){$?$===1?(V=u(a(V),G,N),m(V,G,N,H,U,_,2)):$===2&&r(V,G,N,H,U,_):m(a(V),G,N,H,U,_,1);break}}}}function c(V){var G=V.prev,N=V,H=V.next;if(M(G,N,H)>=0)return!1;for(var U=G.x,_=N.x,$=H.x,j=G.y,Z=N.y,it=H.y,at=U<_?U<$?U:$:_<$?_:$,q=j<Z?j<it?j:it:Z<it?Z:it,ft=U>_?U>$?U:$:_>$?_:$,vt=j>Z?j>it?j:it:Z>it?Z:it,Tt=H.next;Tt!==G;){if(Tt.x>=at&&Tt.x<=ft&&Tt.y>=q&&Tt.y<=vt&&C(U,j,_,Z,$,it,Tt.x,Tt.y)&&M(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.next}return!0}function o(V,G,N,H){var U=V.prev,_=V,$=V.next;if(M(U,_,$)>=0)return!1;for(var j=U.x,Z=_.x,it=$.x,at=U.y,q=_.y,ft=$.y,vt=j<Z?j<it?j:it:Z<it?Z:it,Tt=at<q?at<ft?at:ft:q<ft?q:ft,ut=j>Z?j>it?j:it:Z>it?Z:it,Bt=at>q?at>ft?at:ft:q>ft?q:ft,Pt=E(vt,Tt,G,N,H),et=E(ut,Bt,G,N,H),Q=V.prevZ,lt=V.nextZ;Q&&Q.z>=Pt&&lt&&lt.z<=et;){if(Q.x>=vt&&Q.x<=ut&&Q.y>=Tt&&Q.y<=Bt&&Q!==U&&Q!==$&&C(j,at,Z,q,it,ft,Q.x,Q.y)&&M(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,lt.x>=vt&&lt.x<=ut&&lt.y>=Tt&&lt.y<=Bt&&lt!==U&&lt!==$&&C(j,at,Z,q,it,ft,lt.x,lt.y)&&M(lt.prev,lt,lt.next)>=0))return!1;lt=lt.nextZ}for(;Q&&Q.z>=Pt;){if(Q.x>=vt&&Q.x<=ut&&Q.y>=Tt&&Q.y<=Bt&&Q!==U&&Q!==$&&C(j,at,Z,q,it,ft,Q.x,Q.y)&&M(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;lt&&lt.z<=et;){if(lt.x>=vt&&lt.x<=ut&&lt.y>=Tt&&lt.y<=Bt&&lt!==U&&lt!==$&&C(j,at,Z,q,it,ft,lt.x,lt.y)&&M(lt.prev,lt,lt.next)>=0)return!1;lt=lt.nextZ}return!0}function u(V,G,N){var H=V;do{var U=H.prev,_=H.next.next;!R(U,_)&&P(U,H,H.next,_)&&L(U,_)&&L(_,U)&&(G.push(U.i/N|0),G.push(H.i/N|0),G.push(_.i/N|0),W(H),W(H.next),H=V=_),H=H.next}while(H!==V);return a(H)}function r(V,G,N,H,U,_){var $=V;do{for(var j=$.next.next;j!==$.prev;){if($.i!==j.i&&A($,j)){var Z=O($,j);$=a($,$.next),Z=a(Z,Z.next),m($,G,N,H,U,_,0),m(Z,G,N,H,U,_,0);return}j=j.next}$=$.next}while($!==V)}function h(V,G,N,H){var U=[],_,$,j,Z,it;for(_=0,$=G.length;_<$;_++)j=G[_]*H,Z=_<$-1?G[_+1]*H:V.length,it=e(V,j,Z,H,!1),it===it.next&&(it.steiner=!0),U.push(w(it));for(U.sort(d),_=0;_<U.length;_++)N=l(U[_],N);return N}function d(V,G){return V.x-G.x}function l(V,G){var N=p(V,G);if(!N)return G;var H=O(N,V);return a(H,H.next),a(N,N.next)}function p(V,G){var N=G,H=V.x,U=V.y,_=-1/0,$;do{if(U<=N.y&&U>=N.next.y&&N.next.y!==N.y){var j=N.x+(U-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(j<=H&&j>_&&(_=j,$=N.x<N.next.x?N:N.next,j===H))return $}N=N.next}while(N!==G);if(!$)return null;var Z=$,it=$.x,at=$.y,q=1/0,ft;N=$;do H>=N.x&&N.x>=it&&H!==N.x&&C(U<at?H:_,U,it,at,U<at?_:H,U,N.x,N.y)&&(ft=Math.abs(U-N.y)/(H-N.x),L(N,V)&&(ft<q||ft===q&&(N.x>$.x||N.x===$.x&&g($,N)))&&($=N,q=ft)),N=N.next;while(N!==Z);return $}function g(V,G){return M(V.prev,V,G.prev)<0&&M(G.next,V,V.next)<0}function x(V,G,N,H){var U=V;do U.z===0&&(U.z=E(U.x,U.y,G,N,H)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==V);U.prevZ.nextZ=null,U.prevZ=null,y(U)}function y(V){var G,N,H,U,_,$,j,Z,it=1;do{for(N=V,V=null,_=null,$=0;N;){for($++,H=N,j=0,G=0;G<it&&(j++,H=H.nextZ,!!H);G++);for(Z=it;j>0||Z>0&&H;)j!==0&&(Z===0||!H||N.z<=H.z)?(U=N,N=N.nextZ,j--):(U=H,H=H.nextZ,Z--),_?_.nextZ=U:V=U,U.prevZ=_,_=U;N=H}_.nextZ=null,it*=2}while($>1);return V}function E(V,G,N,H,U){return V=(V-N)*U|0,G=(G-H)*U|0,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,V|G<<1}function w(V){var G=V,N=V;do(G.x<N.x||G.x===N.x&&G.y<N.y)&&(N=G),G=G.next;while(G!==V);return N}function C(V,G,N,H,U,_,$,j){return(U-$)*(G-j)>=(V-$)*(_-j)&&(V-$)*(H-j)>=(N-$)*(G-j)&&(N-$)*(_-j)>=(U-$)*(H-j)}function A(V,G){return V.next.i!==G.i&&V.prev.i!==G.i&&!I(V,G)&&(L(V,G)&&L(G,V)&&D(V,G)&&(M(V.prev,V,G.prev)||M(V,G.prev,G))||R(V,G)&&M(V.prev,V,V.next)>0&&M(G.prev,G,G.next)>0)}function M(V,G,N){return(G.y-V.y)*(N.x-G.x)-(G.x-V.x)*(N.y-G.y)}function R(V,G){return V.x===G.x&&V.y===G.y}function P(V,G,N,H){var U=F(M(V,G,N)),_=F(M(V,G,H)),$=F(M(N,H,V)),j=F(M(N,H,G));return!!(U!==_&&$!==j||U===0&&b(V,N,G)||_===0&&b(V,H,G)||$===0&&b(N,V,H)||j===0&&b(N,G,H))}function b(V,G,N){return G.x<=Math.max(V.x,N.x)&&G.x>=Math.min(V.x,N.x)&&G.y<=Math.max(V.y,N.y)&&G.y>=Math.min(V.y,N.y)}function F(V){return V>0?1:V<0?-1:0}function I(V,G){var N=V;do{if(N.i!==V.i&&N.next.i!==V.i&&N.i!==G.i&&N.next.i!==G.i&&P(N,N.next,V,G))return!0;N=N.next}while(N!==V);return!1}function L(V,G){return M(V.prev,V,V.next)<0?M(V,G,V.next)>=0&&M(V,V.prev,G)>=0:M(V,G,V.prev)<0||M(V,V.next,G)<0}function D(V,G){var N=V,H=!1,U=(V.x+G.x)/2,_=(V.y+G.y)/2;do N.y>_!=N.next.y>_&&N.next.y!==N.y&&U<(N.next.x-N.x)*(_-N.y)/(N.next.y-N.y)+N.x&&(H=!H),N=N.next;while(N!==V);return H}function O(V,G){var N=new k(V.i,V.x,V.y),H=new k(G.i,G.x,G.y),U=V.next,_=G.prev;return V.next=G,G.prev=V,N.next=U,U.prev=N,H.next=N,N.prev=H,_.next=H,H.prev=_,H}function z(V,G,N,H){var U=new k(V,G,N);return H?(U.next=H.next,U.prev=H,H.next.prev=U,H.next=U):(U.prev=U,U.next=U),U}function W(V){V.next.prev=V.prev,V.prev.next=V.next,V.prevZ&&(V.prevZ.nextZ=V.nextZ),V.nextZ&&(V.nextZ.prevZ=V.prevZ)}function k(V,G,N){this.i=V,this.x=G,this.y=N,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}T.deviation=function(V,G,N,H){var U=G&&G.length,_=U?G[0]*N:V.length,$=Math.abs(X(V,0,_,N));if(U)for(var j=0,Z=G.length;j<Z;j++){var it=G[j]*N,at=j<Z-1?G[j+1]*N:V.length;$-=Math.abs(X(V,it,at,N))}var q=0;for(j=0;j<H.length;j+=3){var ft=H[j]*N,vt=H[j+1]*N,Tt=H[j+2]*N;q+=Math.abs((V[ft]-V[Tt])*(V[vt+1]-V[ft+1])-(V[ft]-V[vt])*(V[Tt+1]-V[ft+1]))}return $===0&&q===0?0:Math.abs((q-$)/$)};function X(V,G,N,H){for(var U=0,_=G,$=N-H;_<N;_+=H)U+=(V[$]-V[_])*(V[_+1]+V[$+1]),$=_;return U}T.flatten=function(V){for(var G=V[0][0].length,N={vertices:[],holes:[],dimensions:G},H=0,U=0;U<V.length;U++){for(var _=0;_<V[U].length;_++)for(var $=0;$<G;$++)N.vertices.push(V[U][_][$]);U>0&&(H+=V[U-1].length,N.holes.push(H))}return N},s.exports=T}),13829:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=function(c,o){o===void 0&&(o=new a);for(var u=1/0,r=1/0,h=-u,d=-r,l,p=0;p<c.points.length;p++)l=c.points[p],u=Math.min(u,l.x),r=Math.min(r,l.y),h=Math.max(h,l.x),d=Math.max(d,l.y);return o.x=u,o.y=r,o.width=h-u,o.height=d-r,o};s.exports=m}),26173:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=[]);for(var m=0;m<e.points.length;m++)a.push(e.points[m].x),a.push(e.points[m].y);return a};s.exports=T}),9564:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),m=e(23031),c=e(30052),o=function(u,r,h,d){d===void 0&&(d=[]);var l=u.points,p=c(u);!r&&h>0&&(r=p/h);for(var g=0;g<r;g++)for(var x=p*(g/r),y=0,E=0;E<l.length;E++){var w=l[E],C=l[(E+1)%l.length],A=new m(w.x,w.y,C.x,C.y),M=a(A);if(x<y||x>y+M){y+=M;continue}var R=A.getPoint((x-y)/M);d.push(R);break}return d};s.exports=o}),30052:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),m=e(23031),c=function(o){for(var u=o.points,r=0,h=0;h<u.length;h++){var d=u[h],l=u[(h+1)%u.length],p=new m(d.x,d.y,l.x,l.y);r+=a(p)}return r};s.exports=c}),25717:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(63814),c=e(9564),o=e(23777),u=new a({initialize:function(h){this.type=o.POLYGON,this.area=0,this.points=[],h&&this.setTo(h)},contains:function(r,h){return m(this,r,h)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var h,d=0;d<r.length;d++)h={x:0,y:0},typeof r[d]=="number"||typeof r[d]=="string"?(h.x=parseFloat(r[d]),h.y=parseFloat(r[d+1]),d++):Array.isArray(r[d])?(h.x=r[d][0],h.y=r[d][1]):(h.x=r[d].x,h.y=r[d].y),this.points.push(h);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,h,d,l=0;l<this.points.length-1;l++)h=this.points[l],d=this.points[l+1],r+=(d.x-h.x)*(h.y+d.y);return h=this.points[0],d=this.points[this.points.length-1],r+=(h.x-d.x)*(d.y+h.y),this.area=-r*.5,this.area},getPoints:function(r,h,d){return c(this,r,h,d)}});s.exports=u}),8133:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.points.reverse(),e};s.exports=T}),29524:(s=>{function T(u,r){var h=u.x-r.x,d=u.y-r.y;return h*h+d*d}function e(u,r,h){var d=r.x,l=r.y,p=h.x-d,g=h.y-l;if(p!==0||g!==0){var x=((u.x-d)*p+(u.y-l)*g)/(p*p+g*g);x>1?(d=h.x,l=h.y):x>0&&(d+=p*x,l+=g*x)}return p=u.x-d,g=u.y-l,p*p+g*g}function a(u,r){for(var h=u[0],d=[h],l,p=1,g=u.length;p<g;p++)l=u[p],T(l,h)>r&&(d.push(l),h=l);return h!==l&&d.push(l),d}function m(u,r,h,d,l){for(var p=d,g,x=r+1;x<h;x++){var y=e(u[x],u[r],u[h]);y>p&&(g=x,p=y)}p>d&&(g-r>1&&m(u,r,g,d,l),l.push(u[g]),h-g>1&&m(u,g,h,d,l))}function c(u,r){var h=u.length-1,d=[u[0]];return m(u,0,h,r,d),d.push(u[h]),d}var o=function(u,r,h){r===void 0&&(r=1),h===void 0&&(h=!1);var d=u.points;if(d.length>2){var l=r*r;h||(d=a(d,l)),u.setTo(c(d,l))}return u};s.exports=o}),5469:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(a,m){return a[0]=m[0],a[1]=m[1],a},e=function(a){var m,c=[],o=a.points;for(m=0;m<o.length;m++)c.push([o[m].x,o[m].y]);var u=[];for(c.length>0&&u.push(T([0,0],c[0])),m=0;m<c.length-1;m++){var r=c[m],h=c[m+1],d=r[0],l=r[1],p=h[0],g=h[1];u.push([.85*d+.15*p,.85*l+.15*g]),u.push([.15*d+.85*p,.15*l+.85*g])}return c.length>1&&u.push(T([0,0],c[c.length-1])),a.setTo(u)};s.exports=e}),24709:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){for(var c=e.points,o=0;o<c.length;o++)c[o].x+=a,c[o].y+=m;return e};s.exports=T}),58423:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25717);a.Clone=e(12306),a.Contains=e(63814),a.ContainsPoint=e(99338),a.Earcut=e(94811),a.GetAABB=e(13829),a.GetNumberArray=e(26173),a.GetPoints=e(9564),a.Perimeter=e(30052),a.Reverse=e(8133),a.Simplify=e(29524),a.Smooth=e(5469),a.Translate=e(24709),s.exports=a}),62224:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.height};s.exports=T}),98615:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};s.exports=T}),31688:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};s.exports=T}),67502:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e.x=a-e.width/2,e.y=m-e.height/2,e};s.exports=T}),65085:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=function(c){return new a(c.x,c.y,c.width,c.height)};s.exports=m}),37303:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e.width<=0||e.height<=0?!1:e.x<=a&&e.x+e.width>=a&&e.y<=m&&e.y+e.height>=m};s.exports=T}),96553:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37303),m=function(c,o){return a(c,o.x,o.y)};s.exports=m}),70273:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.width*a.height>e.width*e.height?!1:a.x>e.x&&a.x<e.right&&a.right>e.x&&a.right<e.right&&a.y>e.y&&a.y<e.bottom&&a.bottom>e.y&&a.bottom<e.bottom};s.exports=T}),43459:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};s.exports=T}),77493:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x,y:e.y}),a.push({x:e.right,y:e.y}),a.push({x:e.right,y:e.bottom}),a.push({x:e.x,y:e.bottom}),a};s.exports=T}),9219:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};s.exports=T}),53751:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8249),m=function(c,o){var u=a(c);return u<a(o)?c.setSize(o.height*u,o.height):c.setSize(o.width,o.width/u),c.setPosition(o.centerX-c.width/2,o.centerY-c.height/2)};s.exports=m}),16088:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8249),m=function(c,o){var u=a(c);return u>a(o)?c.setSize(o.height*u,o.height):c.setSize(o.width,o.width/u),c.setPosition(o.centerX-c.width/2,o.centerY-c.height/2)};s.exports=m}),80774:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};s.exports=T}),83859:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};s.exports=T}),19217:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=e(36383),c=function(o,u){if(u===void 0&&(u=new a),o.length===0)return u;for(var r=Number.MAX_VALUE,h=Number.MAX_VALUE,d=m.MIN_SAFE_INTEGER,l=m.MIN_SAFE_INTEGER,p,g,x,y=0;y<o.length;y++)p=o[y],Array.isArray(p)?(g=p[0],x=p[1]):(g=p.x,x=p.y),r=Math.min(r,g),h=Math.min(h,x),d=Math.max(d,g),l=Math.max(l,x);return u.x=r,u.y=h,u.width=d-r,u.height=l-h,u};s.exports=c}),9477:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=function(c,o,u,r,h){return h===void 0&&(h=new a),h.setTo(Math.min(c,u),Math.min(o,r),Math.abs(c-u),Math.abs(o-r))};s.exports=m}),8249:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height===0?NaN:e.width/e.height};s.exports=T}),27165:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){return o===void 0&&(o=new a),o.x=c.centerX,o.y=c.centerY,o};s.exports=m}),20812:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13019),m=e(2141),c=function(o,u,r){if(r===void 0&&(r=new m),u<=0||u>=1)return r.x=o.x,r.y=o.y,r;var h=a(o)*u;return u>.5?(h-=o.width+o.height,h<=o.width?(r.x=o.right-h,r.y=o.bottom):(r.x=o.x,r.y=o.bottom-(h-o.width))):h<=o.width?(r.x=o.x+h,r.y=o.y):(r.x=o.right,r.y=o.y+(h-o.width)),r};s.exports=c}),34819:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20812),m=e(13019),c=function(o,u,r,h){h===void 0&&(h=[]),!u&&r>0&&(u=m(o)/r);for(var d=0;d<u;d++){var l=d/u;h.push(a(o,l))}return h};s.exports=c}),51313:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){return o===void 0&&(o=new a),o.x=c.width,o.y=c.height,o};s.exports=m}),86091:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67502),m=function(c,o,u){var r=c.centerX,h=c.centerY;return c.setSize(c.width+o*2,c.height+u*2),a(c,r,h)};s.exports=m}),53951:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=e(59996),c=function(o,u,r){return r===void 0&&(r=new a),m(o,u)?(r.x=Math.max(o.x,u.x),r.y=Math.max(o.y,u.y),r.width=Math.min(o.right,u.right)-r.x,r.height=Math.min(o.bottom,u.bottom)-r.y):r.setEmpty(),r};s.exports=c}),14649:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13019),m=e(2141),c=function(o,u,r,h){if(h===void 0&&(h=[]),!u&&!r)return h;u?r=Math.round(a(o)/u):u=a(o)/r;for(var d=o.x,l=o.y,p=0,g=0;g<r;g++)switch(h.push(new m(d,l)),p){case 0:d+=u,d>=o.right&&(p=1,l+=d-o.right,d=o.right);break;case 1:l+=u,l>=o.bottom&&(p=2,d-=l-o.bottom,l=o.bottom);break;case 2:d-=u,d<=o.left&&(p=3,l-=o.left-d,d=o.left);break;case 3:l-=u,l<=o.top&&(p=0,l=o.top);break}return h};s.exports=c}),33595:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){for(var m=e.x,c=e.right,o=e.y,u=e.bottom,r=0;r<a.length;r++)m=Math.min(m,a[r].x),c=Math.max(c,a[r].x),o=Math.min(o,a[r].y),u=Math.max(u,a[r].y);return e.x=m,e.y=o,e.width=c-m,e.height=u-o,e};s.exports=T}),20074:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=Math.min(e.x,a.x),c=Math.max(e.right,a.right);e.x=m,e.width=c-m;var o=Math.min(e.y,a.y),u=Math.max(e.bottom,a.bottom);return e.y=o,e.height=u-o,e};s.exports=T}),92171:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=Math.min(e.x,a),o=Math.max(e.right,a);e.x=c,e.width=o-c;var u=Math.min(e.y,m),r=Math.max(e.bottom,m);return e.y=u,e.height=r-u,e};s.exports=T}),42981:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e.x+=a,e.y+=m,e};s.exports=T}),46907:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x+=a.x,e.y+=a.y,e};s.exports=T}),60170:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x<a.right&&e.right>a.x&&e.y<a.bottom&&e.bottom>a.y};s.exports=T}),13019:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(e.width+e.height)};s.exports=T}),85133:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=e(39506),c=function(o,u,r){r===void 0&&(r=new a),u=m(u);var h=Math.sin(u),d=Math.cos(u),l=d>0?o.width/2:o.width/-2,p=h>0?o.height/2:o.height/-2;return Math.abs(l*h)<Math.abs(p*d)?p=l*h/d:l=p*d/h,r.x=l+o.centerX,r.y=p+o.centerY,r};s.exports=c}),26597:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){return o===void 0&&(o=new a),o.x=c.x+Math.random()*c.width,o.y=c.y+Math.random()*c.height,o};s.exports=m}),86470:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),m=e(70273),c=e(2141),o=function(u,r,h){if(h===void 0&&(h=new c),m(u,r))switch(a(0,3)){case 0:h.x=u.x+Math.random()*(r.right-u.x),h.y=u.y+Math.random()*(r.top-u.y);break;case 1:h.x=r.x+Math.random()*(u.right-r.x),h.y=r.bottom+Math.random()*(u.bottom-r.bottom);break;case 2:h.x=u.x+Math.random()*(r.x-u.x),h.y=r.y+Math.random()*(u.bottom-r.y);break;case 3:h.x=r.right+Math.random()*(u.right-r.right),h.y=u.y+Math.random()*(r.bottom-u.y);break}return h};s.exports=o}),87841:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(37303),c=e(20812),o=e(34819),u=e(23777),r=e(23031),h=e(26597),d=new a({initialize:function(p,g,x,y){p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=u.RECTANGLE,this.x=p,this.y=g,this.width=x,this.height=y},contains:function(l,p){return m(this,l,p)},getPoint:function(l,p){return c(this,l,p)},getPoints:function(l,p,g){return o(this,l,p,g)},getRandomPoint:function(l){return h(this,l)},setTo:function(l,p,g,x){return this.x=l,this.y=p,this.width=g,this.height=x,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(l,p){return p===void 0&&(p=l),this.x=l,this.y=p,this},setSize:function(l,p){return p===void 0&&(p=l),this.width=l,this.height=p,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.y,this.right,this.y),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.y,this.right,this.bottom),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.right,this.bottom,this.x,this.bottom),l},getLineD:function(l){return l===void 0&&(l=new r),l.setTo(this.x,this.bottom,this.x,this.y),l},left:{get:function(){return this.x},set:function(l){l>=this.right?this.width=0:this.width=this.right-l,this.x=l}},right:{get:function(){return this.x+this.width},set:function(l){l<=this.x?this.width=0:this.width=l-this.x}},top:{get:function(){return this.y},set:function(l){l>=this.bottom?this.height=0:this.height=this.bottom-l,this.y=l}},bottom:{get:function(){return this.y+this.height},set:function(l){l<=this.y?this.height=0:this.height=l-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});s.exports=d}),94845:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.width===a.width&&e.height===a.height};s.exports=T}),31730:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return m===void 0&&(m=a),e.width*=a,e.height*=m,e};s.exports=T}),36899:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=function(c,o,u){u===void 0&&(u=new a);var r=Math.min(c.x,o.x),h=Math.min(c.y,o.y),d=Math.max(c.right,o.right)-r,l=Math.max(c.bottom,o.bottom)-h;return u.setTo(r,h,d,l)};s.exports=m}),93232:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841);a.Area=e(62224),a.Ceil=e(98615),a.CeilAll=e(31688),a.CenterOn=e(67502),a.Clone=e(65085),a.Contains=e(37303),a.ContainsPoint=e(96553),a.ContainsRect=e(70273),a.CopyFrom=e(43459),a.Decompose=e(77493),a.Equals=e(9219),a.FitInside=e(53751),a.FitOutside=e(16088),a.Floor=e(80774),a.FloorAll=e(83859),a.FromPoints=e(19217),a.FromXY=e(9477),a.GetAspectRatio=e(8249),a.GetCenter=e(27165),a.GetPoint=e(20812),a.GetPoints=e(34819),a.GetSize=e(51313),a.Inflate=e(86091),a.Intersection=e(53951),a.MarchingAnts=e(14649),a.MergePoints=e(33595),a.MergeRect=e(20074),a.MergeXY=e(92171),a.Offset=e(42981),a.OffsetPoint=e(46907),a.Overlaps=e(60170),a.Perimeter=e(13019),a.PerimeterPoint=e(85133),a.Random=e(26597),a.RandomOutside=e(86470),a.SameDimensions=e(94845),a.Scale=e(31730),a.Union=e(36899),s.exports=a}),41658:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=e.x1,m=e.y1,c=e.x2,o=e.y2,u=e.x3,r=e.y3;return Math.abs(((u-a)*(o-m)-(c-a)*(r-m))/2)};s.exports=T}),39208:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),m=function(c,o,u){var r=u*(Math.sqrt(3)/2),h=c,d=o,l=c+u/2,p=o+r,g=c-u/2,x=o+r;return new a(h,d,l,p,g,x)};s.exports=m}),39545:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(94811),m=e(16483),c=function(o,u,r,h,d){u===void 0&&(u=null),r===void 0&&(r=1),h===void 0&&(h=1),d===void 0&&(d=[]);for(var l=a(o,u),p,g,x,y,E,w,C,A,M,R=0;R<l.length;R+=3)p=l[R],g=l[R+1],x=l[R+2],y=o[p*2]*r,E=o[p*2+1]*h,w=o[g*2]*r,C=o[g*2+1]*h,A=o[x*2]*r,M=o[x*2+1]*h,d.push(new m(y,E,w,C,A,M));return d};s.exports=c}),90301:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),m=function(c,o,u,r){r===void 0&&(r=u);var h=c,d=o,l=c,p=o-r,g=c+u,x=o;return new a(h,d,l,p,g,x)};s.exports=m}),23707:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97523),m=e(13584),c=function(o,u,r,h){h===void 0&&(h=a);var d=h(o),l=u-d.x,p=r-d.y;return m(o,l,p)};s.exports=c}),97523:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){return o===void 0&&(o=new a),o.x=(c.x1+c.x2+c.x3)/3,o.y=(c.y1+c.y2+c.y3)/3,o};s.exports=m}),24951:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099);function m(o,u,r,h){return o*h-u*r}var c=function(o,u){u===void 0&&(u=new a);var r=o.x3,h=o.y3,d=o.x1-r,l=o.y1-h,p=o.x2-r,g=o.y2-h,x=2*m(d,l,p,g),y=m(l,d*d+l*l,g,p*p+g*g),E=m(d,d*d+l*l,p,p*p+g*g);return u.x=r-y/x,u.y=h+E/x,u};s.exports=c}),85614:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),m=function(c,o){o===void 0&&(o=new a);var u=c.x1,r=c.y1,h=c.x2,d=c.y2,l=c.x3,p=c.y3,g=h-u,x=d-r,y=l-u,E=p-r,w=g*(u+h)+x*(r+d),C=y*(u+l)+E*(r+p),A=2*(g*(p-d)-x*(l-h)),M,R;if(Math.abs(A)<1e-6){var P=Math.min(u,h,l),b=Math.min(r,d,p);M=(Math.max(u,h,l)-P)*.5,R=(Math.max(r,d,p)-b)*.5,o.x=P+M,o.y=b+R,o.radius=Math.sqrt(M*M+R*R)}else o.x=(E*w-x*C)/A,o.y=(g*C-y*w)/A,M=o.x-u,R=o.y-r,o.radius=Math.sqrt(M*M+R*R);return o};s.exports=m}),74422:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483),m=function(c){return new a(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)};s.exports=m}),10690:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=e.x3-e.x1,o=e.y3-e.y1,u=e.x2-e.x1,r=e.y2-e.y1,h=a-e.x1,d=m-e.y1,l=c*c+o*o,p=c*u+o*r,g=c*h+o*d,x=u*u+r*r,y=u*h+r*d,E=l*x-p*p,w=E===0?0:1/E,C=(x*g-p*y)*w,A=(l*y-p*g)*w;return C>=0&&A>=0&&C+A<1};s.exports=T}),48653:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m===void 0&&(m=!1),c===void 0&&(c=[]);for(var o=e.x3-e.x1,u=e.y3-e.y1,r=e.x2-e.x1,h=e.y2-e.y1,d=o*o+u*u,l=o*r+u*h,p=r*r+h*h,g=d*p-l*l,x=g===0?0:1/g,y,E,w,C,A,M,R=e.x1,P=e.y1,b=0;b<a.length&&(w=a[b].x-R,C=a[b].y-P,A=o*w+u*C,M=r*w+h*C,y=(p*A-l*M)*x,E=(d*M-l*A)*x,!(y>=0&&E>=0&&y+E<1&&(c.push({x:a[b].x,y:a[b].y}),m)));b++);return c};s.exports=T}),96006:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10690),m=function(c,o){return a(c,o.x,o.y)};s.exports=m}),71326:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};s.exports=T}),71694:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x1,y:e.y1}),a.push({x:e.x2,y:e.y2}),a.push({x:e.x3,y:e.y3}),a};s.exports=T}),33522:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2&&e.x3===a.x3&&e.y3===a.y3};s.exports=T}),20437:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=e(35001),c=function(o,u,r){r===void 0&&(r=new a);var h=o.getLineA(),d=o.getLineB(),l=o.getLineC();if(u<=0||u>=1)return r.x=h.x1,r.y=h.y1,r;var p=m(h),g=m(d),x=m(l),y=p+g+x,E=y*u,w=0;return E<p?(w=E/p,r.x=h.x1+(h.x2-h.x1)*w,r.y=h.y1+(h.y2-h.y1)*w):E>p+g?(E-=p+g,w=E/x,r.x=l.x1+(l.x2-l.x1)*w,r.y=l.y1+(l.y2-l.y1)*w):(E-=p,w=E/g,r.x=d.x1+(d.x2-d.x1)*w,r.y=d.y1+(d.y2-d.y1)*w),r};s.exports=c}),80672:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),m=e(2141),c=function(o,u,r,h){h===void 0&&(h=[]);var d=o.getLineA(),l=o.getLineB(),p=o.getLineC(),g=a(d),x=a(l),y=a(p),E=g+x+y;!u&&r>0&&(u=E/r);for(var w=0;w<u;w++){var C=E*(w/u),A=0,M=new m;C<g?(A=C/g,M.x=d.x1+(d.x2-d.x1)*A,M.y=d.y1+(d.y2-d.y1)*A):C>g+x?(C-=g+x,A=C/y,M.x=p.x1+(p.x2-p.x1)*A,M.y=p.y1+(p.y2-p.y1)*A):(C-=g,A=C/x,M.x=l.x1+(l.x2-l.x1)*A,M.y=l.y1+(l.y2-l.y1)*A),h.push(M)}return h};s.exports=c}),39757:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141);function m(o,u,r,h){var d=o-r,l=u-h,p=d*d+l*l;return Math.sqrt(p)}var c=function(o,u){u===void 0&&(u=new a);var r=o.x1,h=o.y1,d=o.x2,l=o.y2,p=o.x3,g=o.y3,x=m(p,g,d,l),y=m(r,h,p,g),E=m(d,l,r,h),w=x+y+E;return u.x=(r*x+d*y+p*E)/w,u.y=(h*x+l*y+g*E)/w,u};s.exports=c}),13584:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e.x1+=a,e.y1+=m,e.x2+=a,e.y2+=m,e.x3+=a,e.y3+=m,e};s.exports=T}),1376:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35001),m=function(c){var o=c.getLineA(),u=c.getLineB(),r=c.getLineC();return a(o)+a(u)+a(r)};s.exports=m}),90260:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2141),m=function(c,o){o===void 0&&(o=new a);var u=c.x2-c.x1,r=c.y2-c.y1,h=c.x3-c.x1,d=c.y3-c.y1,l=Math.random(),p=Math.random();return l+p>=1&&(l=1-l,p=1-p),o.x=c.x1+(u*l+h*p),o.y=c.y1+(r*l+d*p),o};s.exports=m}),52172:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99614),m=e(39757),c=function(o,u){var r=m(o);return a(o,r.x,r.y,u)};s.exports=c}),49907:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99614),m=function(c,o,u){return a(c,o.x,o.y,u)};s.exports=m}),99614:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=Math.cos(c),u=Math.sin(c),r=e.x1-a,h=e.y1-m;return e.x1=r*o-h*u+a,e.y1=r*u+h*o+m,r=e.x2-a,h=e.y2-m,e.x2=r*o-h*u+a,e.y2=r*u+h*o+m,r=e.x3-a,h=e.y3-m,e.x3=r*o-h*u+a,e.y3=r*u+h*o+m,e};s.exports=T}),16483:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(10690),c=e(20437),o=e(80672),u=e(23777),r=e(23031),h=e(90260),d=new a({initialize:function(p,g,x,y,E,w){p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=0),E===void 0&&(E=0),w===void 0&&(w=0),this.type=u.TRIANGLE,this.x1=p,this.y1=g,this.x2=x,this.y2=y,this.x3=E,this.y3=w},contains:function(l,p){return m(this,l,p)},getPoint:function(l,p){return c(this,l,p)},getPoints:function(l,p,g){return o(this,l,p,g)},getRandomPoint:function(l){return h(this,l)},setTo:function(l,p,g,x,y,E){return l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=0),E===void 0&&(E=0),this.x1=l,this.y1=p,this.x2=g,this.y2=x,this.x3=y,this.y3=E,this},getLineA:function(l){return l===void 0&&(l=new r),l.setTo(this.x1,this.y1,this.x2,this.y2),l},getLineB:function(l){return l===void 0&&(l=new r),l.setTo(this.x2,this.y2,this.x3,this.y3),l},getLineC:function(l){return l===void 0&&(l=new r),l.setTo(this.x3,this.y3,this.x1,this.y1),l},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(l){var p=0;this.x1<=this.x2&&this.x1<=this.x3?p=this.x1-l:this.x2<=this.x1&&this.x2<=this.x3?p=this.x2-l:p=this.x3-l,this.x1-=p,this.x2-=p,this.x3-=p}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(l){var p=0;this.x1>=this.x2&&this.x1>=this.x3?p=this.x1-l:this.x2>=this.x1&&this.x2>=this.x3?p=this.x2-l:p=this.x3-l,this.x1-=p,this.x2-=p,this.x3-=p}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(l){var p=0;this.y1<=this.y2&&this.y1<=this.y3?p=this.y1-l:this.y2<=this.y1&&this.y2<=this.y3?p=this.y2-l:p=this.y3-l,this.y1-=p,this.y2-=p,this.y3-=p}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(l){var p=0;this.y1>=this.y2&&this.y1>=this.y3?p=this.y1-l:this.y2>=this.y1&&this.y2>=this.y3?p=this.y2-l:p=this.y3-l,this.y1-=p,this.y2-=p,this.y3-=p}}});s.exports=d}),84435:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16483);a.Area=e(41658),a.BuildEquilateral=e(39208),a.BuildFromPolygon=e(39545),a.BuildRight=e(90301),a.CenterOn=e(23707),a.Centroid=e(97523),a.CircumCenter=e(24951),a.CircumCircle=e(85614),a.Clone=e(74422),a.Contains=e(10690),a.ContainsArray=e(48653),a.ContainsPoint=e(96006),a.CopyFrom=e(71326),a.Decompose=e(71694),a.Equals=e(33522),a.GetPoint=e(20437),a.GetPoints=e(80672),a.InCenter=e(39757),a.Perimeter=e(1376),a.Offset=e(13584),a.Random=e(90260),a.Rotate=e(52172),a.RotateAroundPoint=e(49907),a.RotateAroundXY=e(99614),s.exports=a}),74457:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:a,hitAreaCallback:m,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};s.exports=T}),84409:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return function(m,c,o,u){var r=e.getPixelAlpha(c,o,u.texture.key,u.frame.name);return r&&r>=a}};s.exports=T}),7003:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(93301),c=e(50792),o=e(8214),u=e(8443),r=e(78970),h=e(85098),d=e(42515),l=e(36210),p=e(61340),g=e(85955),x=new a({initialize:function(E,w){this.game=E,this.scaleManager,this.canvas,this.config=w,this.enabled=!0,this.events=new c,this.isOver=!0,this.defaultCursor="",this.keyboard=w.inputKeyboard?new r(this):null,this.mouse=w.inputMouse?new h(this):null,this.touch=w.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=w.inputActivePointers;for(var C=0;C<=this.pointersTotal;C++){var A=new d(this,C);A.smoothFactor=w.inputSmoothFactor,this.pointers.push(A)}this.mousePointer=w.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new p,this._tempMatrix2=new p,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],E.events.once(u.BOOT,this.boot,this)},boot:function(){var y=this.game,E=y.events;this.canvas=y.canvas,this.scaleManager=y.scale,this.events.emit(o.MANAGER_BOOT),E.on(u.PRE_RENDER,this.preRender,this),E.once(u.DESTROY,this.destroy,this)},setCanvasOver:function(y){this.isOver=!0,this.events.emit(o.GAME_OVER,y)},setCanvasOut:function(y){this.isOver=!1,this.events.emit(o.GAME_OUT,y)},preRender:function(){var y=this.game.loop.now,E=this.game.loop.delta,w=this.game.scene.getScenes(!0,!0);this.time=y,this.events.emit(o.MANAGER_UPDATE);for(var C=0;C<w.length;C++){var A=w[C];if(A.sys.input&&A.sys.input.updatePoll(y,E)&&this.globalTopOnly)return}},setDefaultCursor:function(y){this.defaultCursor=y,this.canvas.style.cursor!==y&&(this.canvas.style.cursor=y)},setCursor:function(y){y.cursor&&(this.canvas.style.cursor=y.cursor)},resetCursor:function(y,E){(E||y&&y.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(y){y===void 0&&(y=1);var E=[];this.pointersTotal+y>10&&(y=10-this.pointersTotal);for(var w=0;w<y;w++){var C=this.pointers.length,A=new d(this,C);A.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(A),this.pointersTotal++,E.push(A)}return E},updateInputPlugins:function(y,E){var w=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var C=0;C<w.length;C++){var A=w[C];if(A.sys.input){var M=A.sys.input.update(y,E);if(M&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(y){for(var E=this.pointers,w=[],C=0;C<y.changedTouches.length;C++)for(var A=y.changedTouches[C],M=1;M<E.length;M++){var R=E[M];if(!R.active){R.touchstart(A,y),this.activePointer=R,w.push(R);break}}this.updateInputPlugins(m.TOUCH_START,w)},onTouchMove:function(y){for(var E=this.pointers,w=[],C=0;C<y.changedTouches.length;C++)for(var A=y.changedTouches[C],M=1;M<E.length;M++){var R=E[M];if(R.active&&R.identifier===A.identifier){var P=document.elementFromPoint(A.clientX,A.clientY),b=P===this.canvas;!this.isOver&&b?this.setCanvasOver(y):this.isOver&&!b&&this.setCanvasOut(y),this.isOver&&(R.touchmove(A,y),this.activePointer=R,w.push(R));break}}this.updateInputPlugins(m.TOUCH_MOVE,w)},onTouchEnd:function(y){for(var E=this.pointers,w=[],C=0;C<y.changedTouches.length;C++)for(var A=y.changedTouches[C],M=1;M<E.length;M++){var R=E[M];if(R.active&&R.identifier===A.identifier){R.touchend(A,y),w.push(R);break}}this.updateInputPlugins(m.TOUCH_END,w)},onTouchCancel:function(y){for(var E=this.pointers,w=[],C=0;C<y.changedTouches.length;C++)for(var A=y.changedTouches[C],M=1;M<E.length;M++){var R=E[M];if(R.active&&R.identifier===A.identifier){R.touchcancel(A,y),w.push(R);break}}this.updateInputPlugins(m.TOUCH_CANCEL,w)},onMouseDown:function(y){var E=this.mousePointer;E.down(y),E.updateMotion(),this.activePointer=E,this.updateInputPlugins(m.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(y){var E=this.mousePointer;E.move(y),E.updateMotion(),this.activePointer=E,this.updateInputPlugins(m.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(y){var E=this.mousePointer;E.up(y),E.updateMotion(),this.activePointer=E,this.updateInputPlugins(m.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(y){var E=this.mousePointer;E.wheel(y),this.activePointer=E,this.updateInputPlugins(m.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(y){var E=this.mouse.locked;this.mousePointer.locked=E,this.events.emit(o.POINTERLOCK_CHANGE,y,E)},inputCandidate:function(y,E){var w=y.input;if(!w||!w.enabled||!y.willRender(E))return!1;var C=!0,A=y.parentContainer;if(A)do{if(!A.willRender(E)){C=!1;break}A=A.parentContainer}while(A);return C},hitTest:function(y,E,w,C){C===void 0&&(C=this._tempHitTest);var A=this._tempPoint,M=w.scrollX,R=w.scrollY;C.length=0;var P=y.x,b=y.y;w.getWorldPoint(P,b,A),y.worldX=A.x,y.worldY=A.y;for(var F={x:0,y:0},I=this._tempMatrix,L=this._tempMatrix2,D=0;D<E.length;D++){var O=E[D];if(this.inputCandidate(O,w)){var z=A.x+M*O.scrollFactorX-M,W=A.y+R*O.scrollFactorY-R;O.parentContainer?(O.getWorldTransformMatrix(I,L),I.applyInverse(z,W,F)):g(z,W,O.x,O.y,O.rotation,O.scaleX,O.scaleY,F),this.pointWithinHitArea(O,F.x,F.y)&&C.push(O)}}return C},pointWithinHitArea:function(y,E,w){E+=y.displayOriginX,w+=y.displayOriginY;var C=y.input;return C&&C.hitAreaCallback(C.hitArea,E,w,y)?(C.localX=E,C.localY=w,!0):!1},pointWithinInteractiveObject:function(y,E,w){return y.hitArea?(E+=y.gameObject.displayOriginX,w+=y.gameObject.displayOriginY,y.localX=E,y.localY=w,y.hitAreaCallback(y.hitArea,E,w,y)):!1},transformPointer:function(y,E,w,C){var A=y.position,M=y.prevPosition;M.x=A.x,M.y=A.y;var R=this.scaleManager.transformX(E),P=this.scaleManager.transformY(w),b=y.smoothFactor;!C||b===0?(A.x=R,A.y=P):(A.x=R*b+M.x*(1-b),A.y=P*b+M.y*(1-b))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(u.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var y=0;y<this.pointers.length;y++)this.pointers[y].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});s.exports=x}),48205:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96503),m=e(87902),c=e(83419),o=e(93301),u=e(74457),r=e(84409),h=e(20339),d=e(8497),l=e(81154),p=e(8214),g=e(50792),x=e(95540),y=e(23777),E=e(89639),w=e(41212),C=e(37277),A=e(87841),M=e(37303),R=e(44594),P=e(16483),b=e(10690),F=new c({Extends:g,initialize:function(L){g.call(this),this.scene=L,this.systems=L.sys,this.settings=L.sys.settings,this.manager=L.sys.game.input,this.pluginEvents=new g,this.enabled=!0,this.displayList,this.cameras,E.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,L.sys.events.once(R.BOOT,this.boot,this),L.sys.events.on(R.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(R.DESTROY,this.destroy,this),this.pluginEvents.emit(p.BOOT)},start:function(){var I=this.systems.events;I.on(R.TRANSITION_START,this.transitionIn,this),I.on(R.TRANSITION_OUT,this.transitionOut,this),I.on(R.TRANSITION_COMPLETE,this.transitionComplete,this),I.on(R.PRE_UPDATE,this.preUpdate,this),I.once(R.SHUTDOWN,this.shutdown,this),this.manager.events.on(p.GAME_OUT,this.onGameOut,this),this.manager.events.on(p.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(p.START)},onGameOver:function(I){this.isActive()&&this.emit(p.GAME_OVER,I.timeStamp,I)},onGameOut:function(I){this.isActive()&&this.emit(p.GAME_OUT,I.timeStamp,I)},preUpdate:function(){this.pluginEvents.emit(p.PRE_UPDATE);var I=this._pendingRemoval,L=this._pendingInsertion,D=I.length,O=L.length;if(!(D===0&&O===0)){for(var z=this._list,W=0;W<D;W++){var k=I[W],X=z.indexOf(k);X>-1&&(z.splice(X,1),this.clear(k,!0))}this._pendingRemoval.length=0,this._list=z.concat(L.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(I){this.manager&&this.manager.setCursor(I)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(I,L){if(!this.isActive())return!1;if(this.pluginEvents.emit(p.UPDATE,I,L),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,O=this.manager,z=O.pointers;for(D=0;D<z.length;D++)z[D].updateMotion();if(this._list.length===0)return!1;var W=this.pollRate;if(W===-1)return!1;if(W>0)if(this._pollTimer-=L,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var k=!1;for(D=0;D<z.length;D++){var X=0,V=z[D];this._tempZones=[],this._temp=this.hitTestPointer(V),this.sortGameObjects(this._temp,V),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),X+=this.processOverOutEvents(V),this.getDragState(V)===2&&this.processDragThresholdEvent(V,I),X>0&&(k=!0)}return k},update:function(I,L){if(!this.isActive())return!1;for(var D=!1,O=0;O<L.length;O++){var z=0,W=L[O];switch(this._tempZones=[],this._temp=this.hitTestPointer(W),this.sortGameObjects(this._temp,W),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),I){case o.MOUSE_DOWN:z+=this.processDragDownEvent(W),z+=this.processDownEvents(W),z+=this.processOverOutEvents(W);break;case o.MOUSE_UP:z+=this.processDragUpEvent(W),z+=this.processUpEvents(W),z+=this.processOverOutEvents(W);break;case o.TOUCH_START:z+=this.processDragDownEvent(W),z+=this.processDownEvents(W),z+=this.processOverEvents(W);break;case o.TOUCH_END:case o.TOUCH_CANCEL:z+=this.processDragUpEvent(W),z+=this.processUpEvents(W),z+=this.processOutEvents(W);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:z+=this.processDragMoveEvent(W),z+=this.processMoveEvents(W),z+=this.processOverOutEvents(W);break;case o.MOUSE_WHEEL:z+=this.processWheelEvent(W);break}z>0&&(D=!0)}return this._updatedThisFrame=!0,D},clear:function(I,L){L===void 0&&(L=!1),this.disable(I);var D=I.input;D&&(this.removeDebug(I),this.manager.resetCursor(D),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,I.input=null),L||this.queueForRemoval(I);var O=this._draggable.indexOf(I);return O>-1&&this._draggable.splice(O,1),I},disable:function(I,L){L===void 0&&(L=!1);var D=I.input;D&&(D.enabled=!1,D.dragState=0);for(var O=this._drag,z=this._over,W=this.manager,k=0,X;k<W.pointers.length;k++)X=O[k].indexOf(I),X>-1&&O[k].splice(X,1),X=z[k].indexOf(I),X>-1&&z[k].splice(X,1);return L&&this.resetCursor(),this},enable:function(I,L,D,O){return O===void 0&&(O=!1),I.input?I.input.enabled=!0:this.setHitArea(I,L,D),I.input&&O&&!I.input.dropZone&&(I.input.dropZone=O),this},hitTestPointer:function(I){for(var L=this.cameras.getCamerasBelowPointer(I),D=0;D<L.length;D++){for(var O=L[D],z=this.manager.hitTest(I,this._list,O),W=0;W<z.length;W++){var k=z[W];k.input.dropZone&&this._tempZones.push(k)}if(z.length>0)return I.camera=O,z}return I.camera=L[0],[]},processDownEvents:function(I){var L=0,D=this._temp,O=this._eventData,z=this._eventContainer;O.cancelled=!1;for(var W=0;W<D.length;W++){var k=D[W];if(!(!k.input||!k.input.enabled)&&(L++,k.emit(p.GAMEOBJECT_POINTER_DOWN,I,k.input.localX,k.input.localY,z),O.cancelled||!this.isActive()||k.input&&k.input.enabled&&(this.emit(p.GAMEOBJECT_DOWN,I,k,z),O.cancelled||!this.isActive())))break}return!O.cancelled&&this.isActive()&&(I.downElement===this.manager.game.canvas?this.emit(p.POINTER_DOWN,I,D):this.emit(p.POINTER_DOWN_OUTSIDE,I)),L},getDragState:function(I){return this._dragState[I.id]},setDragState:function(I,L){this._dragState[I.id]=L},processDragThresholdEvent:function(I,L){var D=!1,O=this.dragTimeThreshold,z=this.dragDistanceThreshold;if((z>0&&h(I.x,I.y,I.downX,I.downY)>=z||O>0&&L>=I.downTime+O)&&(D=!0),D)return this.setDragState(I,3),this.processDragStartList(I)},processDragStartList:function(I){if(this.getDragState(I)!==3)return 0;var L=this._drag[I.id];L.length>1&&(L=L.slice(0));for(var D=0;D<L.length;D++){var O=L[D],z=O.input;z.dragState=2,z.dragStartX=O.x,z.dragStartY=O.y,z.dragStartXGlobal=I.worldX,z.dragStartYGlobal=I.worldY,z.dragStartCamera=I.camera,z.dragX=z.dragStartXGlobal-z.dragStartX,z.dragY=z.dragStartYGlobal-z.dragStartY,O.emit(p.GAMEOBJECT_DRAG_START,I,z.dragX,z.dragY),this.emit(p.DRAG_START,I,O)}return this.setDragState(I,4),L.length},processDragDownEvent:function(I){var L=this._temp;if(this._draggable.length===0||L.length===0||!I.primaryDown||this.getDragState(I)!==0)return 0;this.setDragState(I,1);for(var D=[],O=0;O<L.length;O++){var z=L[O];z.input.draggable&&z.input.dragState===0&&D.push(z)}return D.length===0?(this.setDragState(I,0),0):(D.length>1&&(this.sortGameObjects(D,I),this.topOnly&&D.splice(1)),this._drag[I.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(I,3),this.processDragStartList(I)):(this.setDragState(I,2),0))},processDragMoveEvent:function(I){if(this.getDragState(I)===2&&this.processDragThresholdEvent(I,this.manager.game.loop.now),this.getDragState(I)!==4)return 0;var L=this._tempZones,D=this._drag[I.id];D.length>1&&(D=D.slice(0));for(var O=0;O<D.length;O++){var z=D[O],W=z.input,k=W.target;if(k){var X=L.indexOf(k);X===0?(z.emit(p.GAMEOBJECT_DRAG_OVER,I,k),this.emit(p.DRAG_OVER,I,z,k)):X>0?(z.emit(p.GAMEOBJECT_DRAG_LEAVE,I,k),this.emit(p.DRAG_LEAVE,I,z,k),W.target=L[0],k=W.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,I,k),this.emit(p.DRAG_ENTER,I,z,k)):(z.emit(p.GAMEOBJECT_DRAG_LEAVE,I,k),this.emit(p.DRAG_LEAVE,I,z,k),L[0]?(W.target=L[0],k=W.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,I,k),this.emit(p.DRAG_ENTER,I,z,k)):W.target=null)}else!k&&L[0]&&(W.target=L[0],k=W.target,z.emit(p.GAMEOBJECT_DRAG_ENTER,I,k),this.emit(p.DRAG_ENTER,I,z,k));var V,G,N=I.positionToCamera(W.dragStartCamera);if(!z.parentContainer)V=N.x-W.dragX,G=N.y-W.dragY;else{var H=N.x-W.dragStartXGlobal,U=N.y-W.dragStartYGlobal,_=z.getParentRotation(),$=H*Math.cos(_)+U*Math.sin(_),j=U*Math.cos(_)-H*Math.sin(_);$*=1/z.parentContainer.scaleX,j*=1/z.parentContainer.scaleY,V=$+W.dragStartX,G=j+W.dragStartY}z.emit(p.GAMEOBJECT_DRAG,I,V,G),this.emit(p.DRAG,I,z,V,G)}return D.length},processDragUpEvent:function(I){var L=this._drag[I.id];L.length>1&&(L=L.slice(0));for(var D=0;D<L.length;D++){var O=L[D],z=O.input;if(z&&z.dragState===2){z.dragState=0,z.dragX=z.localX-O.displayOriginX,z.dragY=z.localY-O.displayOriginY,z.dragStartCamera=null;var W=!1,k=z.target;k&&(O.emit(p.GAMEOBJECT_DROP,I,k),this.emit(p.DROP,I,O,k),z.target=null,W=!0),O.input&&O.input.enabled&&(O.emit(p.GAMEOBJECT_DRAG_END,I,z.dragX,z.dragY,W),this.emit(p.DRAG_END,I,O,W))}}return this.setDragState(I,0),L.splice(0),0},processMoveEvents:function(I){var L=0,D=this._temp,O=this._eventData,z=this._eventContainer;O.cancelled=!1;for(var W=0;W<D.length;W++){var k=D[W];if(!(!k.input||!k.input.enabled)&&(L++,k.emit(p.GAMEOBJECT_POINTER_MOVE,I,k.input.localX,k.input.localY,z),O.cancelled||!this.isActive()||k.input&&k.input.enabled&&(this.emit(p.GAMEOBJECT_MOVE,I,k,z),O.cancelled||!this.isActive()||this.topOnly)))break}return!O.cancelled&&this.isActive()&&this.emit(p.POINTER_MOVE,I,D),L},processWheelEvent:function(I){var L=0,D=this._temp,O=this._eventData,z=this._eventContainer;O.cancelled=!1;for(var W=I.deltaX,k=I.deltaY,X=I.deltaZ,V=0;V<D.length;V++){var G=D[V];if(!(!G.input||!G.input.enabled)&&(L++,G.emit(p.GAMEOBJECT_POINTER_WHEEL,I,W,k,X,z),O.cancelled||!this.isActive()||G.input&&G.input.enabled&&(this.emit(p.GAMEOBJECT_WHEEL,I,G,W,k,X,z),O.cancelled||!this.isActive())))break}return!O.cancelled&&this.isActive()&&this.emit(p.POINTER_WHEEL,I,D,W,k,X),L},processOverEvents:function(I){var L=this._temp,D=0,O=L.length,z=[];if(O>0){var W=this.manager,k=this._eventData,X=this._eventContainer;k.cancelled=!1;for(var V=0;V<O;V++){var G=L[V];if(!(!G.input||!G.input.enabled)&&(z.push(G),W.setCursor(G.input),G.emit(p.GAMEOBJECT_POINTER_OVER,I,G.input.localX,G.input.localY,X),D++,k.cancelled||!this.isActive()||G.input&&G.input.enabled&&(this.emit(p.GAMEOBJECT_OVER,I,G,X),k.cancelled||!this.isActive())))break}!k.cancelled&&this.isActive()&&this.emit(p.POINTER_OVER,I,z)}return this._over[I.id]=z,D},processOutEvents:function(I){var L=this._over[I.id],D=0,O=L.length;if(O>0){var z=this.manager,W=this._eventData,k=this._eventContainer;W.cancelled=!1,this.sortGameObjects(L,I);for(var X=0;X<O;X++){var V=L[X];if(V=L[X],!(!V.input||!V.input.enabled)&&(z.resetCursor(V.input),V.emit(p.GAMEOBJECT_POINTER_OUT,I,k),D++,W.cancelled||!this.isActive()||V.input&&V.input.enabled&&(this.emit(p.GAMEOBJECT_OUT,I,V,k),W.cancelled||!this.isActive())))break}!W.cancelled&&this.isActive()&&this.emit(p.POINTER_OUT,I,L),this._over[I.id]=[]}return D},processOverOutEvents:function(I){var L=this._temp,D,O,z=[],W=[],k=[],X=this._over[I.id],V=this._drag[I.id],G=this.manager;for(D=0;D<X.length;D++)O=X[D],L.indexOf(O)===-1&&V.indexOf(O)===-1?z.push(O):k.push(O);for(D=0;D<L.length;D++)O=L[D],X.indexOf(O)===-1&&W.push(O);var N=z.length,H=0,U=this._eventData,_=this._eventContainer;if(U.cancelled=!1,N>0){for(this.sortGameObjects(z,I),D=0;D<N&&(O=z[D],!(!(!O.input||!O.input.enabled)&&(G.resetCursor(O.input),O.emit(p.GAMEOBJECT_POINTER_OUT,I,_),H++,U.cancelled||!this.isActive()||O.input&&O.input.enabled&&(this.emit(p.GAMEOBJECT_OUT,I,O,_),U.cancelled||!this.isActive()))));D++);(!U.cancelled||this.isActive())&&this.emit(p.POINTER_OUT,I,z)}if(N=W.length,U.cancelled=!1,N>0){for(this.sortGameObjects(W,I),D=0;D<N&&(O=W[D],!(!(!O.input||!O.input.enabled)&&(G.setCursor(O.input),O.emit(p.GAMEOBJECT_POINTER_OVER,I,O.input.localX,O.input.localY,_),H++,U.cancelled||!this.isActive()||O.input&&O.input.enabled&&(this.emit(p.GAMEOBJECT_OVER,I,O,_),U.cancelled||!this.isActive()))));D++);!U.cancelled&&this.isActive()&&this.emit(p.POINTER_OVER,I,W)}return X=k.concat(W),this._over[I.id]=this.sortGameObjects(X,I),H},processUpEvents:function(I){var L=this._temp,D=this._eventData,O=this._eventContainer;D.cancelled=!1;for(var z=0;z<L.length;z++){var W=L[z];if(!(!W.input||!W.input.enabled)&&(W.emit(p.GAMEOBJECT_POINTER_UP,I,W.input.localX,W.input.localY,O),D.cancelled||!this.isActive()||W.input&&W.input.enabled&&(this.emit(p.GAMEOBJECT_UP,I,W,O),D.cancelled||!this.isActive())))break}return!D.cancelled&&this.isActive()&&(I.upElement===this.manager.game.canvas?this.emit(p.POINTER_UP,I,L):this.emit(p.POINTER_UP_OUTSIDE,I)),L.length},forceDownState:function(I,L){this.forceState(I,L,p.GAMEOBJECT_POINTER_DOWN,p.GAMEOBJECT_DOWN,!1)},forceUpState:function(I,L){this.forceState(I,L,p.GAMEOBJECT_POINTER_UP,p.GAMEOBJECT_UP,!1)},forceOverState:function(I,L){this.forceState(I,L,p.GAMEOBJECT_POINTER_OVER,p.GAMEOBJECT_OVER,!0)},forceOutState:function(I,L){this.forceState(I,L,p.GAMEOBJECT_POINTER_OUT,p.GAMEOBJECT_OUT,!1)},forceState:function(I,L,D,O,z){var W=this._eventData,k=this._eventContainer;W.cancelled=!1,L.input&&L.input.enabled&&(L.emit(D,I,L.input.localX,L.input.localY,k),z&&this.setCursor(L.input),!W.cancelled&&this.isActive()&&L.input&&L.input.enabled&&this.emit(O,I,L,k))},queueForInsertion:function(I){return this._pendingInsertion.indexOf(I)===-1&&this._list.indexOf(I)===-1&&this._pendingInsertion.push(I),this},queueForRemoval:function(I){return this._pendingRemoval.push(I),this},setDraggable:function(I,L){L===void 0&&(L=!0),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var O=I[D];O.input.draggable=L;var z=this._draggable.indexOf(O);L&&z===-1?this._draggable.push(O):!L&&z>-1&&this._draggable.splice(z,1)}return this},makePixelPerfect:function(I){I===void 0&&(I=1);var L=this.systems.textures;return r(L,I)},setHitArea:function(I,L,D){if(L===void 0)return this.setHitAreaFromTexture(I);Array.isArray(I)||(I=[I]);var O=!1,z=!1,W=!1,k=!1,X=!1,V=!0;if(w(L)&&Object.keys(L).length){var G=L,N=I.some(function(j){return j.hasOwnProperty("faces")});if(!N){L=x(G,"hitArea",null),D=x(G,"hitAreaCallback",null),X=x(G,"pixelPerfect",!1);var H=x(G,"alphaTolerance",1);X&&(L={},D=this.makePixelPerfect(H))}O=x(G,"draggable",!1),z=x(G,"dropZone",!1),W=x(G,"cursor",!1),k=x(G,"useHandCursor",!1),(!L||!D)&&(this.setHitAreaFromTexture(I),V=!1)}else typeof L=="function"&&!D&&(D=L,L={});for(var U=0;U<I.length;U++){var _=I[U];if(X&&_.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var $=_.input?_.input:u(_,L,D);$.customHitArea=V,$.dropZone=z,$.cursor=k?"pointer":W,_.input=$,O&&this.setDraggable(_),this.queueForInsertion(_)}return this},setHitAreaCircle:function(I,L,D,O,z){z===void 0&&(z=m);var W=new a(L,D,O);return this.setHitArea(I,W,z)},setHitAreaEllipse:function(I,L,D,O,z,W){W===void 0&&(W=l);var k=new d(L,D,O,z);return this.setHitArea(I,k,W)},setHitAreaFromTexture:function(I,L){L===void 0&&(L=M),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var O=I[D],z=O.frame,W=0,k=0;if(O.width?(W=O.width,k=O.height):z&&(W=z.realWidth,k=z.realHeight),O.type==="Container"&&(W===0||k===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}W!==0&&k!==0&&(O.input=u(O,new A(0,0,W,k),L),this.queueForInsertion(O))}return this},setHitAreaRectangle:function(I,L,D,O,z,W){W===void 0&&(W=M);var k=new A(L,D,O,z);return this.setHitArea(I,k,W)},setHitAreaTriangle:function(I,L,D,O,z,W,k,X){X===void 0&&(X=b);var V=new P(L,D,O,z,W,k);return this.setHitArea(I,V,X)},enableDebug:function(I,L){L===void 0&&(L=65280);var D=I.input;if(!D||!D.hitArea)return this;var O=D.hitArea,z=O.type,W=D.hitAreaDebug,k=this.systems.add,X=this.systems.updateList;W&&(X.remove(W),W.destroy(),W=null);var V=0,G=0;switch(z){case y.CIRCLE:W=k.arc(0,0,O.radius),V=O.x-O.radius,G=O.y-O.radius;break;case y.ELLIPSE:W=k.ellipse(0,0,O.width,O.height),V=O.x-O.width/2,G=O.y-O.height/2;break;case y.LINE:W=k.line(0,0,O.x1,O.y1,O.x2,O.y2);break;case y.POLYGON:W=k.polygon(0,0,O.points);break;case y.RECTANGLE:W=k.rectangle(0,0,O.width,O.height),V=O.x,G=O.y;break;case y.TRIANGLE:W=k.triangle(0,0,O.x1,O.y1,O.x2,O.y2,O.x3,O.y3);break}return W&&(W.isFilled=!1,W.strokeColor=L,W.preUpdate=function(){W.setVisible(I.visible),W.setStrokeStyle(1/I.scale,W.strokeColor),W.setDisplayOrigin(I.displayOriginX,I.displayOriginY);var N=I.x,H=I.y,U=I.rotation,_=I.scaleX,$=I.scaleY;if(I.parentContainer){var j=I.getWorldTransformMatrix();N=j.tx,H=j.ty,U=j.rotation,_=j.scaleX,$=j.scaleY}W.setRotation(U),W.setScale(_,$),W.setPosition(N+V*_,H+G*$),W.setScrollFactor(I.scrollFactorX,I.scrollFactorY),W.setDepth(I.depth)},X.add(W),D.hitAreaDebug=W),this},removeDebug:function(I){var L=I.input;if(L&&L.hitAreaDebug){var D=L.hitAreaDebug;D.destroy(),L.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(I){return this.pollRate=I,this._pollTimer=0,this},setGlobalTopOnly:function(I){return this.manager.globalTopOnly=I,this},setTopOnly:function(I){return this.topOnly=I,this},sortGameObjects:function(I,L){if(I.length<2||!L.camera)return I;var D=L.camera.renderList;return I.sort(function(O,z){var W=Math.max(D.indexOf(O),0),k=Math.max(D.indexOf(z),0);return k-W})},sortDropZones:function(I){return I.length<2?I:(this.scene.sys.depthSort(),I.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(I,L){if(!I.parentContainer&&!L.parentContainer)return this.displayList.getIndex(L)-this.displayList.getIndex(I);if(I.parentContainer===L.parentContainer)return L.parentContainer.getIndex(L)-I.parentContainer.getIndex(I);if(I.parentContainer===L)return-1;if(L.parentContainer===I)return 1;for(var D=I.getIndexList(),O=L.getIndexList(),z=Math.min(D.length,O.length),W=0;W<z;W++){var k=D[W],X=O[W];if(k!==X)return X-k}return O.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(I){return this.manager.addPointer(I)},setDefaultCursor:function(I){return this.manager.setDefaultCursor(I),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(p.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var I=0;I<10;I++)this._drag[I]=[],this._over[I]=[];this.removeAllListeners();var L=this.manager;L.canvas.style.cursor=L.defaultCursor;var D=this.systems.events;D.off(R.TRANSITION_START,this.transitionIn,this),D.off(R.TRANSITION_OUT,this.transitionOut,this),D.off(R.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(R.PRE_UPDATE,this.preUpdate,this),L.events.off(p.GAME_OUT,this.onGameOut,this),L.events.off(p.GAME_OVER,this.onGameOver,this),D.off(R.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var I=this.manager.pointers,L=0;L<I.length;L++)I[L].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(p.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(R.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});C.register("InputPlugin",F,"input"),s.exports=F}),89639:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),m={},c={};c.register=function(o,u,r,h,d){m[o]={plugin:u,mapping:r,settingsKey:h,configKey:d}},c.getPlugin=function(o){return m[o]},c.install=function(o){var u=o.scene.sys,r=u.settings.input,h=u.game.config;for(var d in m){var l=m[d].plugin,p=m[d].mapping,g=m[d].settingsKey,x=m[d].configKey;a(r,g,h[x])&&(o[p]=new l(o))}},c.remove=function(o){m.hasOwnProperty(o)&&delete m[o]},s.exports=c}),42515:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31040),m=e(83419),c=e(20339),o=e(43855),u=e(47235),r=e(26099),h=e(25892),d=new m({initialize:function(p,g){this.manager=p,this.id=g,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=g===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(l){var p=l.getWorldPoint(this.x,this.y);return this.worldX=p.x,this.worldY=p.y,this},positionToCamera:function(l,p){return l.getWorldPoint(this.x,this.y,p)},updateMotion:function(){var l=this.position.x,p=this.position.y,g=this.midPoint.x,x=this.midPoint.y;if(!(l===g&&p===x)){var y=u(this.motionFactor,g,l),E=u(this.motionFactor,x,p);o(y,l,.1)&&(y=l),o(E,p,.1)&&(E=p),this.midPoint.set(y,E);var w=l-y,C=p-E;this.velocity.set(w,C),this.angle=a(y,E,l,p),this.distance=Math.sqrt(w*w+C*C)}},up:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=l.timeStamp,this.wasTouch=!1)},down:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.button=l.button,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),l.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),h.macOS&&l.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=l.timeStamp),this.wasTouch=!1},move:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.locked&&(this.movementX=l.movementX||l.mozMovementX||l.webkitMovementX||0,this.movementY=l.movementY||l.mozMovementY||l.webkitMovementY||0),this.moveTime=l.timeStamp,this.wasTouch=!1},wheel:function(l){"buttons"in l&&(this.buttons=l.buttons),this.event=l,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.deltaX=l.deltaX,this.deltaY=l.deltaY,this.deltaZ=l.deltaZ,this.wasTouch=!1},touchstart:function(l,p){l.pointerId&&(this.pointerId=l.pointerId),this.identifier=l.identifier,this.target=l.target,this.active=!0,this.buttons=1,this.event=p,this.downElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=p.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(l,p){this.event=p,this.manager.transformPointer(this,l.pageX,l.pageY,!0),this.moveTime=p.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(l,p){this.buttons=0,this.event=p,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(l,p){this.buttons=0,this.event=p,this.upElement=l.target,this.manager.transformPointer(this,l.pageX,l.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?c(this.downX,this.downY,this.x,this.y):c(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(l,p){l===void 0&&(l=10),p===void 0&&(p=[]);for(var g=this.prevPosition.x,x=this.prevPosition.y,y=this.position.x,E=this.position.y,w=0;w<l;w++){var C=1/l*w;p[w]={x:u(C,g,y),y:u(C,x,E)}}return p},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(l){this.position.x=l}},y:{get:function(){return this.position.y},set:function(l){this.position.y=l}},time:{get:function(){return this.event?this.event.timeStamp:0}}});s.exports=d}),93301:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};s.exports=T}),7179:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="boot"}),85375:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),39843:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragend"}),23388:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragenter"}),16133:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drag"}),27829:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragleave"}),53904:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragover"}),56058:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragstart"}),2642:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drop"}),88171:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectdown"}),36147:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragend"}),71692:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragenter"}),96149:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drag"}),81285:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragleave"}),74048:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragover"}),21322:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragstart"}),49378:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drop"}),86754:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectmove"}),86433:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectout"}),60709:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectover"}),24081:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerdown"}),11172:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointermove"}),18907:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerout"}),95579:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerover"}),35368:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerup"}),26972:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="wheel"}),47078:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectup"}),73802:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameobjectwheel"}),56718:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameout"}),25936:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="gameover"}),27503:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="boot"}),50852:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="process"}),96438:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="update"}),59152:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerlockchange"}),47777:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerdown"}),27957:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerdownoutside"}),19444:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointermove"}),54251:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerout"}),18667:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerover"}),27192:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerup"}),24652:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pointerupoutside"}),45132:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="wheel"}),44512:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="preupdate"}),15757:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="shutdown"}),41637:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),93802:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="update"}),8214:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BOOT:e(7179),DESTROY:e(85375),DRAG_END:e(39843),DRAG_ENTER:e(23388),DRAG:e(16133),DRAG_LEAVE:e(27829),DRAG_OVER:e(53904),DRAG_START:e(56058),DROP:e(2642),GAME_OUT:e(56718),GAME_OVER:e(25936),GAMEOBJECT_DOWN:e(88171),GAMEOBJECT_DRAG_END:e(36147),GAMEOBJECT_DRAG_ENTER:e(71692),GAMEOBJECT_DRAG:e(96149),GAMEOBJECT_DRAG_LEAVE:e(81285),GAMEOBJECT_DRAG_OVER:e(74048),GAMEOBJECT_DRAG_START:e(21322),GAMEOBJECT_DROP:e(49378),GAMEOBJECT_MOVE:e(86754),GAMEOBJECT_OUT:e(86433),GAMEOBJECT_OVER:e(60709),GAMEOBJECT_POINTER_DOWN:e(24081),GAMEOBJECT_POINTER_MOVE:e(11172),GAMEOBJECT_POINTER_OUT:e(18907),GAMEOBJECT_POINTER_OVER:e(95579),GAMEOBJECT_POINTER_UP:e(35368),GAMEOBJECT_POINTER_WHEEL:e(26972),GAMEOBJECT_UP:e(47078),GAMEOBJECT_WHEEL:e(73802),MANAGER_BOOT:e(27503),MANAGER_PROCESS:e(50852),MANAGER_UPDATE:e(96438),POINTER_DOWN:e(47777),POINTER_DOWN_OUTSIDE:e(27957),POINTER_MOVE:e(19444),POINTER_OUT:e(54251),POINTER_OVER:e(18667),POINTER_UP:e(27192),POINTER_UP_OUTSIDE:e(24652),POINTER_WHEEL:e(45132),POINTERLOCK_CHANGE:e(59152),PRE_UPDATE:e(44512),SHUTDOWN:e(15757),START:e(41637),UPDATE:e(93802)}}),97421:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u){this.pad=o,this.events=o.events,this.index=u,this.value=0,this.threshold=.1},update:function(c){this.value=c},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});s.exports=m}),28884:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(92734),c=new a({initialize:function(u,r){this.pad=u,this.events=u.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var u=this.pad,r=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(m.BUTTON_DOWN,u,this,o),this.pad.emit(m.GAMEPAD_BUTTON_DOWN,r,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(m.BUTTON_UP,u,this,o),this.pad.emit(m.GAMEPAD_BUTTON_UP,r,o,this))},destroy:function(){this.pad=null,this.events=null}});s.exports=c}),99125:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97421),m=e(28884),c=e(83419),o=e(50792),u=e(26099),r=new c({Extends:o,initialize:function(d,l){o.call(this),this.manager=d,this.pad=l,this.id=l.id,this.index=l.index;for(var p=[],g=0;g<l.buttons.length;g++)p.push(new m(this,g));this.buttons=p;var x=[];for(g=0;g<l.axes.length;g++)x.push(new a(this,g));this.axes=x,this.vibration=l.vibrationActuator;var y={value:0,pressed:!1};this._LCLeft=p[14]?p[14]:y,this._LCRight=p[15]?p[15]:y,this._LCTop=p[12]?p[12]:y,this._LCBottom=p[13]?p[13]:y,this._RCLeft=p[2]?p[2]:y,this._RCRight=p[1]?p[1]:y,this._RCTop=p[3]?p[3]:y,this._RCBottom=p[0]?p[0]:y,this._FBLeftTop=p[4]?p[4]:y,this._FBLeftBottom=p[6]?p[6]:y,this._FBRightTop=p[5]?p[5]:y,this._FBRightBottom=p[7]?p[7]:y;var E={value:0};this._HAxisLeft=x[0]?x[0]:E,this._VAxisLeft=x[1]?x[1]:E,this._HAxisRight=x[2]?x[2]:E,this._VAxisRight=x[3]?x[3]:E,this.leftStick=new u,this.rightStick=new u,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(h){return this.axes[h].getValue()},setAxisThreshold:function(h){for(var d=0;d<this.axes.length;d++)this.axes[d].threshold=h},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(h){return this.buttons[h].value},isButtonDown:function(h){return this.buttons[h].pressed},update:function(h){if(!(h.timestamp<this._created)){var d,l=this.buttons,p=h.buttons,g=l.length;for(d=0;d<g;d++)l[d].update(p[d].value);var x=this.axes,y=h.axes;for(g=x.length,d=0;d<g;d++)x[d].update(y[d]);g>=2&&(this.leftStick.set(x[0].getValue(),x[1].getValue()),g>=4&&this.rightStick.set(x[2].getValue(),x[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var h;for(h=0;h<this.buttons.length;h++)this.buttons[h].destroy();for(h=0;h<this.axes.length;h++)this.axes[h].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});s.exports=r}),56654:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50792),c=e(92734),o=e(99125),u=e(35154),r=e(89639),h=e(8214),d=new a({Extends:m,initialize:function(p){m.call(this),this.scene=p.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=p,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,p.pluginEvents.once(h.BOOT,this.boot,this),p.pluginEvents.on(h.START,this.start,this)},boot:function(){var l=this.scene.sys.game,p=this.settings.input,g=l.config;this.enabled=u(p,"gamepad",g.inputGamepad)&&l.device.input.gamepads,this.target=u(p,"gamepad.target",g.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var l=this,p=this.target,g=function(x){x.defaultPrevented||!l.isActive()||(l.refreshPads(),l.queue.push(x))};this.onGamepadHandler=g,p.addEventListener("gamepadconnected",g,!1),p.addEventListener("gamepaddisconnected",g,!1),this.sceneInputPlugin.pluginEvents.on(h.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(h.UPDATE,this.update);for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].removeAllListeners()},disconnectAll:function(){for(var l=0;l<this.gamepads.length;l++)this.gamepads[l].pad.connected=!1},refreshPads:function(){var l=navigator.getGamepads();if(!l)this.disconnectAll();else for(var p=this.gamepads,g=0;g<l.length;g++){var x=l[g];if(x){var y=x.id,E=x.index,w=p[E];if(w)w.id!==y?(w.destroy(),p[E]=new o(this,x)):w.update(x);else{var C=new o(this,x);p[E]=C,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=C):this._pad3=C:this._pad2=C:this._pad1=C}}}},getAll:function(){for(var l=[],p=this.gamepads,g=0;g<p.length;g++)p[g]&&l.push(p[g]);return l},getPad:function(l){for(var p=this.gamepads,g=0;g<p.length;g++)if(p[g]&&p[g].index===l)return p[g]},update:function(){if(this.enabled){this.refreshPads();var l=this.queue.length;if(l!==0)for(var p=this.queue.splice(0,l),g=0;g<l;g++){var x=p[g],y=this.getPad(x.gamepad.index);x.type==="gamepadconnected"?this.emit(c.CONNECTED,y,x):x.type==="gamepaddisconnected"&&this.emit(c.DISCONNECTED,y,x)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var l=0;l<this.gamepads.length;l++)this.gamepads[l]&&this.gamepads[l].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",d,"gamepad","gamepad","inputGamepad"),s.exports=d}),89651:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}}),65294:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),90089:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),64894:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={DUALSHOCK_4:e(65294),SNES_USB:e(89651),XBOX_360:e(90089)}}),46008:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="down"}),7629:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="up"}),42206:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="connected"}),86544:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="disconnected"}),94784:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="down"}),14325:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="up"}),92734:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BUTTON_DOWN:e(46008),BUTTON_UP:e(7629),CONNECTED:e(42206),DISCONNECTED:e(86544),GAMEPAD_BUTTON_DOWN:e(94784),GAMEPAD_BUTTON_UP:e(14325)}}),48646:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Axis:e(97421),Button:e(28884),Events:e(92734),Gamepad:e(99125),GamepadPlugin:e(56654),Configs:e(64894)}}),14350:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93301),m=e(79291),c={CreatePixelPerfectHandler:e(84409),CreateInteractiveObject:e(74457),Events:e(8214),Gamepad:e(48646),InputManager:e(7003),InputPlugin:e(48205),InputPluginCache:e(89639),Keyboard:e(51442),Mouse:e(87078),Pointer:e(42515),Touch:e(95618)};c=m(!1,c,a),s.exports=c}),78970:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),m=e(83419),c=e(8443),o=e(8214),u=e(46032),r=e(29747),h=new m({initialize:function(l){this.manager=l,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,l.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputKeyboard,this.target=d.inputKeyboardEventTarget,this.addCapture(d.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(c.POST_STEP,this.postUpdate,this)},startListeners:function(){var d=this;this.onKeyDown=function(p){if(!(p.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(p),d.manager.events.emit(o.MANAGER_PROCESS);var g=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;d.preventDefault&&!g&&d.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}},this.onKeyUp=function(p){if(!(p.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(p),d.manager.events.emit(o.MANAGER_PROCESS);var g=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;d.preventDefault&&!g&&d.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}};var l=this.target;l&&(l.addEventListener("keydown",this.onKeyDown,!1),l.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var d=this.target;d.removeEventListener("keydown",this.onKeyDown,!1),d.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var l=this.captures,p=0;p<d.length;p++){var g=d[p];typeof g=="string"&&(g=u[g.trim().toUpperCase()]),l.indexOf(g)===-1&&l.push(g)}this.preventDefault=l.length>0},removeCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var l=this.captures,p=0;p<d.length;p++){var g=d[p];typeof g=="string"&&(g=u[g.toUpperCase()]),a(l,g)}this.preventDefault=l.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(c.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});s.exports=h}),28846:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50792),c=e(95922),o=e(8443),u=e(35154),r=e(8214),h=e(89639),d=e(30472),l=e(46032),p=e(87960),g=e(74600),x=e(44594),y=e(56583),E=new a({Extends:m,initialize:function(C){m.call(this),this.game=C.systems.game,this.scene=C.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=C,this.manager=C.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,C.pluginEvents.once(r.BOOT,this.boot,this),C.pluginEvents.on(r.START,this.start,this)},boot:function(){var w=this.settings.input;this.enabled=u(w,"keyboard",!0);var C=u(w,"keyboard.capture",null);C&&this.addCaptures(C),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(x.PAUSE,this.resetKeys,this),this.scene.sys.events.on(x.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(w){return this.manager.addCapture(w),this},removeCapture:function(w){return this.manager.removeCapture(w),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(w,C,A){C===void 0&&(C=!0),A===void 0&&(A=!1);var M={};if(typeof w=="string"){w=w.split(",");for(var R=0;R<w.length;R++){var P=w[R].trim();P&&(M[P]=this.addKey(P,C,A))}}else for(var b in w)M[b]=this.addKey(w[b],C,A);return M},addKey:function(w,C,A){C===void 0&&(C=!0),A===void 0&&(A=!1);var M=this.keys;if(w instanceof d){var R=M.indexOf(w);return R>-1?M[R]=w:M[w.keyCode]=w,C&&this.addCapture(w.keyCode),w.setEmitOnRepeat(A),w}return typeof w=="string"&&(w=l[w.toUpperCase()]),M[w]||(M[w]=new d(this,w),C&&this.addCapture(w),M[w].setEmitOnRepeat(A)),M[w]},removeKey:function(w,C,A){C===void 0&&(C=!1),A===void 0&&(A=!1);var M=this.keys,R;if(w instanceof d){var P=M.indexOf(w);P>-1&&(R=this.keys[P],this.keys[P]=void 0)}else typeof w=="string"&&(w=l[w.toUpperCase()]);return M[w]&&(R=M[w],M[w]=void 0),R&&(R.plugin=null,A&&this.removeCapture(R.keyCode),C&&R.destroy()),this},removeAllKeys:function(w,C){w===void 0&&(w=!1),C===void 0&&(C=!1);for(var A=this.keys,M=0;M<A.length;M++){var R=A[M];R&&(A[M]=void 0,C&&this.removeCapture(R.keyCode),w&&R.destroy())}return this},createCombo:function(w,C){return new p(this,w,C)},checkDown:function(w,C){if(C===void 0&&(C=0),this.enabled&&w.isDown){var A=y(this.time-w.timeDown,C);if(A>w._tick)return w._tick=A,!0}return!1},update:function(){var w=this.manager.queue,C=w.length;if(!(!this.isActive()||C===0))for(var A=this.keys,M=0;M<C;M++){var R=w[M],P=R.keyCode,b=A[P],F=!1;R.cancelled===void 0&&(R.cancelled=0,R.stopImmediatePropagation=function(){R.cancelled=1},R.stopPropagation=function(){R.cancelled=-1}),R.cancelled!==-1&&(P===this.prevCode&&R.timeStamp===this.prevTime&&R.type===this.prevType||(this.prevCode=P,this.prevTime=R.timeStamp,this.prevType=R.type,R.type==="keydown"?(b&&(F=b.isDown,b.onDown(R)),!R.cancelled&&(!b||!F)&&(g[P]&&this.emit(c.KEY_DOWN+g[P],R),R.cancelled||this.emit(c.ANY_KEY_DOWN,R))):(b&&b.onUp(R),R.cancelled||(g[P]&&this.emit(c.KEY_UP+g[P],R),R.cancelled||this.emit(c.ANY_KEY_UP,R))),R.cancelled===1&&(R.cancelled=0)))}},resetKeys:function(){for(var w=this.keys,C=0;C<w.length;C++)w[C]&&w[C].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(x.PAUSE,this.resetKeys,this),this.scene.sys.events.off(x.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var w=this.keys,C=0;C<w.length;C++)w[C]&&w[C].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});h.register("KeyboardPlugin",E,"keyboard","keyboard","inputKeyboard"),s.exports=E}),66970:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a.timeLastMatched=e.timeStamp,a.index++,a.index===a.size?!0:(a.current=a.keyCodes[a.index],!1)};s.exports=T}),87960:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95922),c=e(95540),o=e(68769),u=e(92803),r=new a({initialize:function(d,l,p){if(p===void 0&&(p={}),l.length<2)return!1;this.manager=d,this.enabled=!0,this.keyCodes=[];for(var g=0;g<l.length;g++){var x=l[g];typeof x=="string"?this.keyCodes.push(x.toUpperCase().charCodeAt(0)):typeof x=="number"?this.keyCodes.push(x):x.hasOwnProperty("keyCode")&&this.keyCodes.push(x.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=c(p,"resetOnWrongKey",!0),this.maxKeyDelay=c(p,"maxKeyDelay",0),this.resetOnMatch=c(p,"resetOnMatch",!1),this.deleteOnMatch=c(p,"deleteOnMatch",!1);var y=this,E=function(w){if(!(y.matched||!y.enabled)){var C=o(w,y);C&&(y.manager.emit(m.COMBO_MATCH,y,w),y.resetOnMatch?u(y):y.deleteOnMatch&&y.destroy())}};this.onKeyDown=E,this.manager.on(m.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(m.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});s.exports=r}),68769:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66970),m=function(c,o){if(o.matched)return!0;var u=!1,r=!1;if(c.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var h=o.timeLastMatched+o.maxKeyDelay;c.timeStamp<=h&&(r=!0,u=a(c,o))}else r=!0,u=a(c,o);return!r&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),u&&(o.timeLastMatched=c.timeStamp,o.matched=!0,o.timeMatched=c.timeStamp),u};s.exports=m}),92803:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};s.exports=T}),92612:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keydown"}),23345:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keyup"}),21957:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keycombomatch"}),44743:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="down"}),3771:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keydown-"}),46358:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="keyup-"}),75674:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="up"}),95922:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ANY_KEY_DOWN:e(92612),ANY_KEY_UP:e(23345),COMBO_MATCH:e(21957),DOWN:e(44743),KEY_DOWN:e(3771),KEY_UP:e(46358),UP:e(75674)}}),51442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Events:e(95922),KeyboardManager:e(78970),KeyboardPlugin:e(28846),Key:e(30472),KeyCodes:e(46032),KeyCombo:e(87960),AdvanceKeyCombo:e(66970),ProcessKeyCombo:e(68769),ResetKeyCombo:e(92803),JustDown:e(90229),JustUp:e(38796),DownDuration:e(37015),UpDuration:e(41170)}}),37015:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=50);var m=e.plugin.game.loop.time-e.timeDown;return e.isDown&&m<a};s.exports=T}),90229:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justDown?(e._justDown=!1,!0):!1};s.exports=T}),38796:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justUp?(e._justUp=!1,!0):!1};s.exports=T}),30472:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50792),c=e(95922),o=new a({Extends:m,initialize:function(r,h){m.call(this),this.plugin=r,this.keyCode=h,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(u){return this.emitOnRepeat=u,this},onDown:function(u){this.originalEvent=u,this.enabled&&(this.altKey=u.altKey,this.ctrlKey=u.ctrlKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.location=u.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(c.DOWN,this,u):(this.isDown=!0,this.isUp=!1,this.timeDown=u.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(c.DOWN,this,u)))},onUp:function(u){this.originalEvent=u,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=u.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(c.UP,this,u))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});s.exports=o}),46032:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};s.exports=T}),74600:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(46032),m={};for(var c in a)m[a[c]]=c;s.exports=m}),41170:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=50);var m=e.plugin.game.loop.time-e.timeUp;return e.isUp&&m<a};s.exports=T}),85098:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(89357),c=e(8214),o=e(29747),u=new a({initialize:function(h){this.manager=h,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,h.events.once(c.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(m.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){m.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(r){var h=this,d=this.manager,l=d.canvas,p=window&&window.focus&&d.game.config.autoFocus;this.onMouseMove=function(x){!x.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseMove(x),h.preventDefaultMove&&x.preventDefault())},this.onMouseDown=function(x){p&&window.focus(),!x.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseDown(x),h.preventDefaultDown&&x.target===l&&x.preventDefault())},this.onMouseDownWindow=function(x){x.sourceCapabilities&&x.sourceCapabilities.firesTouchEvents||!x.defaultPrevented&&h.enabled&&d&&d.enabled&&x.target!==l&&d.onMouseDown(x)},this.onMouseUp=function(x){!x.defaultPrevented&&h.enabled&&d&&d.enabled&&(d.onMouseUp(x),h.preventDefaultUp&&x.target===l&&x.preventDefault())},this.onMouseUpWindow=function(x){x.sourceCapabilities&&x.sourceCapabilities.firesTouchEvents||!x.defaultPrevented&&h.enabled&&d&&d.enabled&&x.target!==l&&d.onMouseUp(x)},this.onMouseOver=function(x){!x.defaultPrevented&&h.enabled&&d&&d.enabled&&d.setCanvasOver(x)},this.onMouseOut=function(x){!x.defaultPrevented&&h.enabled&&d&&d.enabled&&d.setCanvasOut(x)},this.onMouseWheel=function(x){!x.defaultPrevented&&h.enabled&&d&&d.enabled&&d.onMouseWheel(x),h.preventDefaultWheel&&x.target===l&&x.preventDefault()};var g={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,g),r.addEventListener("mouseout",this.onMouseOut,g),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,g),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,g),window.top.addEventListener("mouseup",this.onMouseUpWindow,g)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,g),window.addEventListener("mouseup",this.onMouseUpWindow,g),this.isTop=!1}m.pointerLock&&(this.pointerLockChange=function(x){var y=h.target;h.locked=document.pointerLockElement===y||document.mozPointerLockElement===y||document.webkitPointerLockElement===y,d.onPointerLockChange(x)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),m.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});s.exports=u}),87078:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={MouseManager:e(85098)}}),36210:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(8214),c=e(29747),o=new a({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=c,this.onTouchStartWindow=c,this.onTouchMove=c,this.onTouchEnd=c,this.onTouchEndWindow=c,this.onTouchCancel=c,this.onTouchCancelWindow=c,this.isTop=!0,r.events.once(m.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputTouch,this.target=u.inputTouchEventTarget,this.capture=u.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,u.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),this},startListeners:function(){var u=this.target;if(u){var r=this,h=this.manager,d=h.canvas,l=window&&window.focus&&h.game.config.autoFocus;this.onTouchMove=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&(h.onTouchMove(y),r.capture&&y.cancelable&&y.preventDefault())},this.onTouchStart=function(y){l&&window.focus(),!y.defaultPrevented&&r.enabled&&h&&h.enabled&&(h.onTouchStart(y),r.capture&&y.cancelable&&y.target===d&&y.preventDefault())},this.onTouchStartWindow=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&y.target!==d&&h.onTouchStart(y)},this.onTouchEnd=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&(h.onTouchEnd(y),r.capture&&y.cancelable&&y.target===d&&y.preventDefault())},this.onTouchEndWindow=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&y.target!==d&&h.onTouchEnd(y)},this.onTouchCancel=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&(h.onTouchCancel(y),r.capture&&y.preventDefault())},this.onTouchCancelWindow=function(y){!y.defaultPrevented&&r.enabled&&h&&h.enabled&&h.onTouchCancel(y)};var p=this.capture,g={passive:!0},x={passive:!1};if(u.addEventListener("touchstart",this.onTouchStart,p?x:g),u.addEventListener("touchmove",this.onTouchMove,p?x:g),u.addEventListener("touchend",this.onTouchEnd,p?x:g),u.addEventListener("touchcancel",this.onTouchCancel,p?x:g),window&&h.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,x),window.top.addEventListener("touchend",this.onTouchEndWindow,x),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,x)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,x),window.addEventListener("touchend",this.onTouchEndWindow,x),window.addEventListener("touchcancel",this.onTouchCancelWindow,x),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var u=this.target;u.removeEventListener("touchstart",this.onTouchStart),u.removeEventListener("touchmove",this.onTouchMove),u.removeEventListener("touchend",this.onTouchEnd),u.removeEventListener("touchcancel",this.onTouchCancel),window&&(u=this.isTop?window.top:window,u.removeEventListener("touchstart",this.onTouchStartWindow),u.removeEventListener("touchend",this.onTouchEndWindow),u.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});s.exports=o}),95618:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={TouchManager:e(36210)}}),41299:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(54899),o=e(95540),u=e(98356),r=e(3374),h=e(84376),d=e(92638),l=new a({initialize:function(g,x){if(this.loader=g,this.cache=o(x,"cache",!1),this.type=o(x,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=o(x,"key",!1);var y=this.key;if(g.prefix&&g.prefix!==""&&(this.key=g.prefix+y),!this.key)throw new Error("Invalid File key: "+this.key);var E=o(x,"url");E===void 0?E=g.path+y+"."+o(x,"extension",""):typeof E=="string"&&!E.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(E=g.path+E),this.url=E,this.src="",this.xhrSettings=d(o(x,"responseType",void 0)),o(x,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,o(x,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?m.FILE_POPULATED:m.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(x,"config",{}),this.multiFile,this.linkFile,this.base64=typeof E=="string"&&E.indexOf("data:")===0,this.retryAttempts=o(x,"maxRetries",g.maxRetries)},setLink:function(p){this.linkFile=p,p.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===m.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=m.FILE_LOADING,this.src=u(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=h(this,this.loader.xhr)}},onLoad:function(p,g){var x=p.responseURL&&this.loader.localSchemes.some(function(w){return p.responseURL.indexOf(w)===0}),y=x&&g.target.status===0,E=!(g.target&&g.target.status!==200)||y;p.readyState===4&&p.status>=400&&p.status<=599&&(E=!1),this.state=m.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,E)},onBase64Load:function(p){this.xhrLoader=p,this.state=m.FILE_LOADED,this.percentComplete=1,this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(p){p.lengthComputable&&(this.bytesLoaded=p.loaded,this.bytesTotal=p.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=m.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=m.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=m.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(p){if(this.state!==m.FILE_PENDING_DESTROY){p===void 0&&(p=this.data);var g=this.key,x=this.type;this.loader.emit(c.FILE_COMPLETE,g,x,p),this.loader.emit(c.FILE_KEY_COMPLETE+x+"-"+g,g,x,p),this.loader.flagForRemoval(this),this.state=m.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(p,g,x){if(typeof URL=="function")p.src=URL.createObjectURL(g);else{var y=new FileReader;y.onload=function(){p.removeAttribute("crossOrigin"),p.src="data:"+(g.type||x)+";base64,"+y.result.split(",")[1]},y.onerror=p.onerror,y.readAsDataURL(g)}},l.revokeObjectURL=function(p){typeof URL=="function"&&URL.revokeObjectURL(p.src)},s.exports=l}),74099:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={install:function(a){for(var m in T)a[m]=T[m]},register:function(a,m){T[a]=m},destroy:function(){T={}}};s.exports=e}),98356:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:a+e.url:!1};s.exports=T}),74261:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(35072),o=e(50792),u=e(54899),r=e(74099),h=e(95540),d=e(35154),l=e(41212),p=e(37277),g=e(44594),x=e(92638),y=new a({Extends:o,initialize:function(w){o.call(this);var C=w.sys.game.config,A=w.sys.settings.loader;this.scene=w,this.systems=w.sys,this.cacheManager=w.sys.cache,this.textureManager=w.sys.textures,this.sceneManager=w.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(h(A,"baseURL",C.loaderBaseURL)),this.setPath(h(A,"path",C.loaderPath)),this.setPrefix(h(A,"prefix",C.loaderPrefix)),this.maxParallelDownloads=h(A,"maxParallelDownloads",C.loaderMaxParallelDownloads),this.xhr=x(h(A,"responseType",C.loaderResponseType),h(A,"async",C.loaderAsync),h(A,"user",C.loaderUser),h(A,"password",C.loaderPassword),h(A,"timeout",C.loaderTimeout),h(A,"withCredentials",C.loaderWithCredentials)),this.crossOrigin=h(A,"crossOrigin",C.loaderCrossOrigin),this.imageLoadType=h(A,"imageLoadType",C.loaderImageLoadType),this.localSchemes=h(A,"localScheme",C.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new c,this.inflight=new c,this.queue=new c,this._deleteQueue=new c,this.totalFailed=0,this.totalComplete=0,this.state=m.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=h(A,"maxRetries",C.loaderMaxRetries),w.sys.events.once(g.BOOT,this.boot,this),w.sys.events.on(g.START,this.pluginStart,this)},boot:function(){this.systems.events.once(g.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(g.SHUTDOWN,this.shutdown,this)},setBaseURL:function(E){return E===void 0&&(E=""),E!==""&&E.substr(-1)!=="/"&&(E=E.concat("/")),this.baseURL=E,this},setPath:function(E){return E===void 0&&(E=""),E!==""&&E.substr(-1)!=="/"&&(E=E.concat("/")),this.path=E,this},setPrefix:function(E){return E===void 0&&(E=""),this.prefix=E,this},setCORS:function(E){return this.crossOrigin=E,this},addFile:function(E){Array.isArray(E)||(E=[E]);for(var w=0;w<E.length;w++){var C=E[w];this.keyExists(C)||(this.list.set(C),this.emit(u.ADD,C.key,C.type,this,C),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(E){var w=E.hasCacheConflict();return w||this.list.iterate(function(C){if(C.type===E.type&&C.key===E.key)return w=!0,!1}),!w&&this.isLoading()&&(this.inflight.iterate(function(C){if(C.type===E.type&&C.key===E.key)return w=!0,!1}),this.queue.iterate(function(C){if(C.type===E.type&&C.key===E.key)return w=!0,!1})),w},addPack:function(E,w){if(typeof w=="string"){var C=d(E,w);C&&(E={packKey:C})}var A=0,M=this.baseURL,R=this.path,P=this.prefix;for(var b in E)if(Object.prototype.hasOwnProperty.call(E,b)){var F=E[b],I=h(F,"baseURL",M),L=h(F,"path",R),D=h(F,"prefix",P),O=h(F,"files",null),z=h(F,"defaultType","void");if(Array.isArray(O)){this.setBaseURL(I),this.setPath(L),this.setPrefix(D);for(var W=0;W<O.length;W++){var k=O[W],X=k.hasOwnProperty("type")?k.type:z;this[X]&&(this[X](k),A++)}}}return this.setBaseURL(M),this.setPath(R),this.setPrefix(P),A>0},removePack:function(E,w){var C=this.systems.anims,A=this.cacheManager,M=this.textureManager,R={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},P;if(l(E))P=E;else if(P=A.json.get(E),!P){console.warn("Asset Pack not found in JSON cache:",E);return}w&&(P={_:P[w]});for(var b in P){var F=P[b],I=h(F,"prefix",""),L=h(F,"files"),D=h(F,"defaultType");if(Array.isArray(L))for(var O=0;O<L.length;O++){var z=L[O],W=z.hasOwnProperty("type")?z.type:D;if(!W){console.warn("No type:",z);continue}var k=I+z.key;if(W==="animation"&&C.remove(k),!((W==="aseprite"||W==="atlas"||W==="atlasXML"||W==="htmlTexture"||W==="image"||W==="multiatlas"||W==="spritesheet"||W==="svg"||W==="texture"||W==="unityAtlas")&&(M.remove(k),!R[W]))){if(W==="pack"){this.removePack(k,z.dataKey);continue}if(W==="spine"){var X=A.custom.spine.get(k);if(!X)continue;var V=X.prefix===void 0?"":X.prefix;A.custom.spine.remove(k);var G=A.custom.spineTextures.get(k);if(!G)continue;A.custom.spineTextures.remove(k);for(var N=0;N<G.pages.length;N++){var H=G.pages[N],U=V+H.name,_=k+":"+U;M.exists(_)?M.remove(_):M.remove(U)}}var $=R[W];if($!==null){if(!$){console.warn("Unknown type:",W);continue}var j=A[$];j.remove(k)}}}}},isLoading:function(){return this.state===m.LOADER_LOADING||this.state===m.LOADER_PROCESSING},isReady:function(){return this.state===m.LOADER_IDLE||this.state===m.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(u.START,this),this.list.size===0?this.loadComplete():(this.state=m.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(g.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(u.PROGRESS,this.progress)},update:function(){this.state===m.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(E){if((E.state===m.FILE_POPULATED||E.state===m.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(E),this.list.delete(E),E.crossOrigin||(E.crossOrigin=this.crossOrigin),E.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(E,w){this.inflight&&(this.inflight.delete(E),this.updateProgress(),w?(this.totalComplete++,this.queue.set(E),this.emit(u.FILE_LOAD,E),E.onProcess()):(this.totalFailed++,this._deleteQueue.set(E),this.emit(u.FILE_LOAD_ERROR,E),this.fileProcessComplete(E)))},fileProcessComplete:function(E){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(E.state===m.FILE_ERRORED?E.multiFile&&E.multiFile.onFileFailed(E):E.state===m.FILE_COMPLETE&&(E.multiFile?E.multiFile.isReadyToProcess()&&(E.multiFile.addToCache(),E.multiFile.pendingDestroy()):(E.addToCache(),E.pendingDestroy())),this.queue.delete(E),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(u.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=m.LOADER_COMPLETE,this.systems.events.off(g.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(u.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(E){this._deleteQueue.set(E)},saveJSON:function(E,w){return this.save(JSON.stringify(E),w)},save:function(E,w,C){w===void 0&&(w="file.json"),C===void 0&&(C="application/json");var A=new Blob([E],{type:C}),M=URL.createObjectURL(A),R=document.createElement("a");return R.download=w,R.textContent="Download "+w,R.href=M,R.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var E=this.systems.game.config,w=this.systems.settings.loader;this.setBaseURL(h(w,"baseURL",E.loaderBaseURL)),this.setPath(h(w,"path",E.loaderPath)),this.setPrefix(h(w,"prefix",E.loaderPrefix)),this.state=m.LOADER_IDLE},shutdown:function(){this.reset(),this.state=m.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=m.LOADER_DESTROYED,this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});p.register("Loader",y,"load"),s.exports=y}),3374:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),m=e(92638),c=function(o,u){var r=o===void 0?m():a({},o);if(u)for(var h in u)u[h]!==void 0&&(r[h]=u[h]);return r};s.exports=c}),26430:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(54899),o=new a({initialize:function(r,h,d,l){var p=[];l.forEach(function(y){y&&p.push(y)}),this.loader=r,this.type=h,this.key=d;var g=this.key;r.prefix&&r.prefix!==""&&(this.key=r.prefix+g),this.multiKeyIndex=r.multiKeyIndex++,this.files=p,this.state=m.FILE_PENDING,this.complete=!1,this.pending=p.length,this.failed=0,this.config={},this.baseURL=r.baseURL,this.path=r.path,this.prefix=r.prefix;for(var x=0;x<p.length;x++)p[x].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(u){return this.files.push(u),u.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(u){var r=this.files.indexOf(u);r!==-1&&this.pending--},onFileFailed:function(u){var r=this.files.indexOf(u);r!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,u.type,u.key))},pendingDestroy:function(){if(this.state!==m.FILE_PENDING_DESTROY){var u=this.key,r=this.type;this.loader.emit(c.FILE_COMPLETE,u,r),this.loader.emit(c.FILE_KEY_COMPLETE+r+"-"+u,u,r),this.loader.flagForRemoval(this);for(var h=0;h<this.files.length;h++)this.files[h].pendingDestroy();this.state=m.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});s.exports=o}),84376:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(3374),m=function(c,o){var u=a(o,c.xhrSettings);if(c.base64){var r=c.url.split(";base64,").pop()||c.url.split(",").pop(),h;c.xhrSettings.responseType==="arraybuffer"?h={response:Uint8Array.from(atob(r),function(p){return p.charCodeAt(0)}).buffer}:h={responseText:atob(r)},c.onBase64Load(h);return}var d=new XMLHttpRequest;if(d.open("GET",c.src,u.async,u.user,u.password),d.responseType=c.xhrSettings.responseType,d.timeout=u.timeout,u.headers)for(var l in u.headers)d.setRequestHeader(l,u.headers[l]);return u.header&&u.headerValue&&d.setRequestHeader(u.header,u.headerValue),u.requestedWith&&d.setRequestHeader("X-Requested-With",u.requestedWith),u.overrideMimeType&&d.overrideMimeType(u.overrideMimeType),u.withCredentials&&(d.withCredentials=!0),d.onload=c.onLoad.bind(c,d),d.onerror=c.onError.bind(c,d),d.onprogress=c.onProgress.bind(c),d.ontimeout=c.onError.bind(c,d),d.send(),d};s.exports=m}),92638:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o,u){return e===void 0&&(e=""),a===void 0&&(a=!0),m===void 0&&(m=""),c===void 0&&(c=""),o===void 0&&(o=0),u===void 0&&(u=!1),{responseType:e,async:a,user:m,password:c,timeout:o,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:u}};s.exports=T}),23906:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};s.exports=T}),42155:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addfile"}),38991:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),27540:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="filecomplete"}),87464:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="filecomplete-"}),94486:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="loaderror"}),13035:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="load"}),38144:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="fileprogress"}),97520:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postprocess"}),85595:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="progress"}),55680:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),54899:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADD:e(42155),COMPLETE:e(38991),FILE_COMPLETE:e(27540),FILE_KEY_COMPLETE:e(87464),FILE_LOAD_ERROR:e(94486),FILE_LOAD:e(13035),FILE_PROGRESS:e(38144),POST_PROCESS:e(97520),PROGRESS:e(85595),START:e(55680)}}),14135:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(518),o=e(54899),u=new a({Extends:c,initialize:function(h,d,l,p,g){c.call(this,h,d,l,p,g),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),c.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});m.register("animation",function(r,h,d,l){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new u(this,r[p]));else this.addFile(new u(this,r,h,l,d));return this}),s.exports=u}),76272:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(95540),o=e(19550),u=e(41212),r=e(518),h=e(26430),d=new a({Extends:h,initialize:function(p,g,x,y,E,w){var C,A;if(u(g)){var M=g;g=c(M,"key"),C=new o(p,{key:g,url:c(M,"textureURL"),extension:c(M,"textureExtension","png"),normalMap:c(M,"normalMap"),xhrSettings:c(M,"textureXhrSettings")}),A=new r(p,{key:g,url:c(M,"atlasURL"),extension:c(M,"atlasExtension","json"),xhrSettings:c(M,"atlasXhrSettings")})}else C=new o(p,g,x,E),A=new r(p,g,y,w);C.linkFile?h.call(this,p,"atlasjson",g,[C,A,C.linkFile]):h.call(this,p,"atlasjson",g,[C,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,p.data,g),p.addToCache(),this.complete=!0}}});m.register("aseprite",function(l,p,g,x,y){var E;if(Array.isArray(l))for(var w=0;w<l.length;w++)E=new d(this,l[w]),this.addFile(E.files);else E=new d(this,l,p,g,x,y),this.addFile(E.files);return this}),s.exports=d}),38734:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(95540),o=e(19550),u=e(41212),r=e(518),h=e(26430),d=new a({Extends:h,initialize:function(p,g,x,y,E,w){var C,A;if(u(g)){var M=g;g=c(M,"key"),C=new o(p,{key:g,url:c(M,"textureURL"),extension:c(M,"textureExtension","png"),normalMap:c(M,"normalMap"),xhrSettings:c(M,"textureXhrSettings")}),A=new r(p,{key:g,url:c(M,"atlasURL"),extension:c(M,"atlasExtension","json"),xhrSettings:c(M,"atlasXhrSettings")})}else C=new o(p,g,x,E),A=new r(p,g,y,w);C.linkFile?h.call(this,p,"atlasjson",g,[C,A,C.linkFile]):h.call(this,p,"atlasjson",g,[C,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(l.key,l.data,p.data,g),this.complete=!0}}});m.register("atlas",function(l,p,g,x,y){var E;if(Array.isArray(l))for(var w=0;w<l.length;w++)E=new d(this,l[w]),this.addFile(E.files);else E=new d(this,l,p,g,x,y),this.addFile(E.files);return this}),s.exports=d}),74599:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(95540),o=e(19550),u=e(41212),r=e(26430),h=e(57318),d=new a({Extends:r,initialize:function(p,g,x,y,E,w){var C,A;if(u(g)){var M=g;g=c(M,"key"),C=new o(p,{key:g,url:c(M,"textureURL"),extension:c(M,"textureExtension","png"),normalMap:c(M,"normalMap"),xhrSettings:c(M,"textureXhrSettings")}),A=new h(p,{key:g,url:c(M,"atlasURL"),extension:c(M,"atlasExtension","xml"),xhrSettings:c(M,"atlasXhrSettings")})}else C=new o(p,g,x,E),A=new h(p,g,y,w);C.linkFile?r.call(this,p,"atlasxml",g,[C,A,C.linkFile]):r.call(this,p,"atlasxml",g,[C,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(l.key,l.data,p.data,g),this.complete=!0}}});m.register("atlasXML",function(l,p,g,x,y){var E;if(Array.isArray(l))for(var w=0;w<l.length;w++)E=new d(this,l[w]),this.addFile(E.files);else E=new d(this,l,p,g,x,y),this.addFile(E.files);return this}),s.exports=d}),21097:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(89749),h=e(41212),d=new a({Extends:c,initialize:function(p,g,x,y,E){if(h(g)){var w=g;g=u(w,"key"),y=u(w,"xhrSettings"),E=u(w,"context",E)}var C={type:"audio",cache:p.cacheManager.audio,extension:x.type,responseType:"arraybuffer",key:g,url:x.url,xhrSettings:y,config:{context:E}};c.call(this,p,C)},onProcess:function(){this.state=m.FILE_PROCESSING;var l=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(p){l.data=p,l.onProcessComplete()},function(p){console.error("Error decoding audio: "+l.key+" - ",p?p.message:null),l.onProcessError()}),this.config.context=null}});d.create=function(l,p,g,x,y){var E=l.systems.game,w=E.config.audio,C=E.device.audio;h(p)&&(g=u(p,"url",[]),x=u(p,"config",{}));var A=d.getAudioURL(E,g);return A?C.webAudio&&!w.disableWebAudio?new d(l,p,A,y,E.sound.context):new r(l,p,A,x):(console.warn('No audio URLs for "%s" can play on this device',p),null)},d.getAudioURL=function(l,p){Array.isArray(p)||(p=[p]);for(var g=0;g<p.length;g++){var x=u(p[g],"url",p[g]);if(x.indexOf("blob:")===0||x.indexOf("data:")===0)return{url:x,type:""};var y=x.match(/\.([a-zA-Z0-9]+)($|\?)/);if(y=u(p[g],"type",y?y[1]:"").toLowerCase(),l.device.audio[y])return{url:x,type:y}}return null},o.register("audio",function(l,p,g,x){var y=this.systems.game,E=y.config.audio,w=y.device.audio;if(E.noAudio||!w.webAudio&&!w.audioData)return this;var C;if(Array.isArray(l))for(var A=0;A<l.length;A++)C=d.create(this,l[A]),C&&this.addFile(C);else C=d.create(this,l,p,g,x),C&&this.addFile(C);return this}),s.exports=d}),89524:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21097),m=e(83419),c=e(74099),o=e(95540),u=e(41212),r=e(518),h=e(26430),d=new m({Extends:h,initialize:function(p,g,x,y,E,w,C){if(u(g)){var A=g;g=o(A,"key"),x=o(A,"jsonURL"),y=o(A,"audioURL"),E=o(A,"audioConfig"),w=o(A,"audioXhrSettings"),C=o(A,"jsonXhrSettings")}var M;if(!y)M=new r(p,g,x,C),h.call(this,p,"audiosprite",g,[M]),this.config.resourceLoad=!0,this.config.audioConfig=E,this.config.audioXhrSettings=w;else{var R=a.create(p,g,y,E,w);R&&(M=new r(p,g,x,C),h.call(this,p,"audiosprite",g,[R,M]),this.config.resourceLoad=!1)}},onFileComplete:function(l){var p=this.files.indexOf(l);if(p!==-1&&(this.pending--,this.config.resourceLoad&&l.type==="json"&&l.data.hasOwnProperty("resources"))){var g=l.data.resources,x=o(this.config,"audioConfig"),y=o(this.config,"audioXhrSettings"),E=a.create(this.loader,l.key,g,x,y);E&&(this.addToMultiFile(E),this.loader.addFile(E))}},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1];l.addToCache(),p.addToCache(),this.complete=!0}}});c.register("audioSprite",function(l,p,g,x,y,E){var w=this.systems.game,C=w.config.audio,A=w.device.audio;if(C&&C.noAudio||!A.webAudio&&!A.audioData)return this;var M;if(Array.isArray(l))for(var R=0;R<l.length;R++)M=new d(this,l[R]),M.files&&this.addFile(M.files);else M=new d(this,l,p,g,x,y,E),M.files&&this.addFile(M.files);return this})}),85722:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x,y){var E="bin";if(r(p)){var w=p;p=u(w,"key"),g=u(w,"url"),x=u(w,"xhrSettings"),E=u(w,"extension",E),y=u(w,"dataType",y)}var C={type:"binary",cache:l.cacheManager.binary,extension:E,responseType:"arraybuffer",key:p,url:g,xhrSettings:x,config:{dataType:y}};c.call(this,l,C)},onProcess:function(){this.state=m.FILE_PROCESSING;var d=this.config.dataType;this.data=d?new d(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(d,l,p,g){if(Array.isArray(d))for(var x=0;x<d.length;x++)this.addFile(new h(this,d[x]));else this.addFile(new h(this,d,l,g,p));return this}),s.exports=h}),97025:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(95540),o=e(19550),u=e(41212),r=e(26430),h=e(21859),d=e(57318),l=new a({Extends:r,initialize:function(g,x,y,E,w,C){var A,M;if(u(x)){var R=x;x=c(R,"key"),A=new o(g,{key:x,url:c(R,"textureURL"),extension:c(R,"textureExtension","png"),normalMap:c(R,"normalMap"),xhrSettings:c(R,"textureXhrSettings")}),M=new d(g,{key:x,url:c(R,"fontDataURL"),extension:c(R,"fontDataExtension","xml"),xhrSettings:c(R,"fontDataXhrSettings")})}else A=new o(g,x,y,w),M=new d(g,x,E,C);A.linkFile?r.call(this,g,"bitmapfont",x,[A,M,A.linkFile]):r.call(this,g,"bitmapfont",x,[A,M])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],g=this.files[1];p.addToCache();var x=p.cache.get(p.key),y=h(g.data,p.cache.getFrame(p.key),0,0,x);this.loader.cacheManager.bitmapFont.add(p.key,{data:y,texture:p.key,frame:null}),this.complete=!0}}});m.register("bitmapFont",function(p,g,x,y,E){var w;if(Array.isArray(p))for(var C=0;C<p.length;C++)w=new l(this,p[C]),this.addFile(w.files);else w=new l(this,p,g,x,y,E),this.addFile(w.files);return this}),s.exports=l}),16024:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x){var y="css";if(r(p)){var E=p;p=u(E,"key"),g=u(E,"url"),x=u(E,"xhrSettings"),y=u(E,"extension",y)}var w={type:"script",cache:!1,extension:y,responseType:"text",key:p,url:g,xhrSettings:x};c.call(this,l,w)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(d,l,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,l,p));return this}),s.exports=h}),69559:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38734),m=e(85722),c=e(83419),o=e(74099),u=e(95540),r=e(19550),h=e(41212),d=e(518),l=e(31403),p=e(46975),g=e(59327),x=e(26430),y=e(82038),E=e(55222),w=new c({Extends:x,initialize:function(A,M,R,P){if(R.multiAtlasURL){var b=new d(A,{key:M,url:R.multiAtlasURL,xhrSettings:P,config:R});x.call(this,A,"texture",M,[b])}else{var F=R.textureURL.substr(R.textureURL.length-3);R.type||(R.type=F.toLowerCase()==="ktx"?"KTX":"PVR");var I=new m(A,{key:M,url:R.textureURL,extension:F,xhrSettings:P,config:R});if(R.atlasURL){var L=new d(A,{key:M,url:R.atlasURL,xhrSettings:P,config:R});x.call(this,A,"texture",M,[I,L])}else x.call(this,A,"texture",M,[I])}this.config=R},onFileComplete:function(C){var A=this.files.indexOf(C);if(A!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(C.type==="json"&&C.data.hasOwnProperty("textures")){var M=C.data.textures,R=this.config,P=this.loader,b=P.baseURL,F=P.path,I=P.prefix,L=u(R,"multiBaseURL",this.baseURL),D=u(R,"multiPath",this.path),O=u(R,"prefix",this.prefix),z=u(R,"textureXhrSettings");L&&P.setBaseURL(L),D&&P.setPath(D),O&&P.setPrefix(O);for(var W=0;W<M.length;W++){var k=M[W].image,X="CMA"+this.multiKeyIndex+"_"+k,V=new m(P,X,k,z);if(this.addToMultiFile(V),P.addFile(V),M[W].normalMap){var G=new m(P,X,M[W].normalMap,z);G.type="normalMap",V.setLink(G),this.addToMultiFile(G),P.addFile(G)}}P.setBaseURL(b),P.setPath(F),P.setPrefix(I)}}},addToCache:function(){function C(L){console.warn('Compressed Texture Invalid: "'+b.key+'". '+L)}if(this.isReadyToProcess()){var A=this.config;if(A.multiAtlasURL)this.addMultiToCache();else{var M=this.loader.systems.renderer,R=this.loader.textureManager,P,b=this.files[0],F=this.files[1];if(A.type==="PVR"?P=y(b.data):A.type==="KTX"&&(P=l(b.data),P||C("KTX file contains unsupported format.")),P&&!E(P)&&(C("Texture dimensions failed verification. Check the texture format specifications for "+A.format+" 0x"+P.internalFormat.toString(16)+"."),P=null),P&&!M.supportsCompressedTexture(A.format,P.internalFormat)&&(C("Texture format "+A.format+" with internal format "+P.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),P=null),P){P.format=M.getCompressedTextureName(A.format,P.internalFormat);var I=F&&F.data?F.data:null;R.addCompressedTexture(b.key,P,I)}}this.complete=!0}},addMultiToCache:function(){for(var C=this.config,A=this.files[0],M=[],R=[],P=[],b=this.loader.systems.renderer,F=this.loader.textureManager,I,L=1;L<this.files.length;L++){var D=this.files[L];if(D.type!=="normalMap")for(var O=D.key.indexOf("_"),z=D.key.substr(O+1),W=D.data,k=0;k<A.data.textures.length;k++){var X=A.data.textures[k];if(X.image===z){C.type==="PVR"?I=y(W):C.type==="KTX"&&(I=l(W)),I&&b.supportsCompressedTexture(C.format,I.internalFormat)&&(I.format=b.getCompressedTextureName(C.format,I.internalFormat),R.push(I),M.push(X),D.linkFile&&P.push(D.linkFile.data));break}}}P.length===0&&(P=void 0),F.addAtlasJSONArray(this.key,R,M,P),this.complete=!0}});o.register("texture",function(C,A,M){var R=this.systems.renderer,P=function(F,I,L,D){var O={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(h(I)){var z=I;I=u(z,"key"),L=u(z,"url"),D=u(z,"xhrSettings")}var W=!1;for(var k in L)if(R.supportsCompressedTexture(k)){var X=L[k];typeof X=="string"?O.textureURL=X:O=p(X,O),O.format=k.toUpperCase(),W=!0;break}if(!W)console.warn("No supported compressed texture format or IMG fallback",I);else if(O.format==="IMG"){var V,G;O.multiAtlasURL?(G=new g(F,I,O.multiAtlasURL,O.multiPath,O.multiBaseURL,D),V=G.files):O.atlasURL?(G=new a(F,I,O.textureURL,O.atlasURL,D),V=G.files):V=new r(F,I,O.textureURL,D),F.addFile(V)}else{var N=new w(F,I,O,D);F.addFile(N.files)}};if(Array.isArray(C))for(var b=0;b<C.length;b++)P(this,C[b]);else P(this,C,A,M);return this}),s.exports=w}),87674:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(98356),h=e(41212),d=new a({Extends:c,initialize:function(p,g,x,y,E,w){var C="ttf";if(h(g)){var A=g;g=u(A,"key"),x=u(A,"url"),y=u(A,"format","truetype"),E=u(A,"descriptors",null),w=u(A,"xhrSettings"),C=u(A,"extension",C)}else y===void 0&&(y="truetype");var M={type:"font",cache:!1,extension:C,responseType:"text",key:g,url:x,xhrSettings:w};c.call(this,p,M),this.data={format:y,descriptors:E},this.state=m.FILE_POPULATED},onProcess:function(){this.state=m.FILE_PROCESSING,this.src=r(this,this.loader.baseURL);var l,p=this.key,g="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?l=new FontFace(p,g,this.data.descriptors):l=new FontFace(p,g);var x=this;l.load().then(function(){document.fonts.add(l),document.body.classList.add("fonts-loaded"),x.onProcessComplete()}).catch(function(){console.warn("Font failed to load",g),x.onProcessComplete()})}});o.register("font",function(l,p,g,x,y){if(Array.isArray(l))for(var E=0;E<l.length;E++)this.addFile(new d(this,l[E]));else this.addFile(new d(this,l,p,g,x,y));return this}),s.exports=d}),47931:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=e(73894),d=new a({Extends:c,initialize:function(p,g,x,y,E){var w="glsl";if(r(g)){var C=g;g=u(C,"key"),x=u(C,"url"),y=u(C,"shaderType","fragment"),E=u(C,"xhrSettings"),w=u(C,"extension",w)}else y===void 0&&(y="fragment");var A={type:"glsl",cache:p.cacheManager.shader,extension:w,responseType:"text",key:g,url:x,config:{shaderType:y},xhrSettings:E};c.call(this,p,A)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.split(`
`),p=this.extractBlock(l,0);if(p)for(;p;){var g=this.getShaderName(p.header),x=this.getShaderType(p.header),y=this.getShaderUniforms(p.header),E=p.shader;if(this.cache.has(g)){var w=this.cache.get(g);x==="fragment"?w.fragmentSrc=E:w.vertexSrc=E,w.uniforms||(w.uniforms=y)}else x==="fragment"?this.cache.add(g,new h(g,E,"",y)):this.cache.add(g,new h(g,"",E,y));p=this.extractBlock(l,p.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new h(this.key,this.data)):this.cache.add(this.key,new h(this.key,"",this.data))},getShaderName:function(l){for(var p=0;p<l.length;p++){var g=l[p].trim();if(g.substring(0,5)==="name:")return g.substring(5).trim()}return this.key},getShaderType:function(l){for(var p=0;p<l.length;p++){var g=l[p].trim();if(g.substring(0,5)==="type:")return g.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(l){for(var p={},g=0;g<l.length;g++){var x=l[g].trim();if(x.substring(0,8)==="uniform."){var y=x.indexOf(":");if(y){var E=x.substring(8,y);try{p[E]=JSON.parse(x.substring(y+1))}catch{console.warn("Invalid uniform JSON: "+E)}}}}return p},extractBlock:function(l,p){for(var g=-1,x=-1,y=-1,E=!1,w=!1,C=[],A=[],M=p;M<l.length;M++){var R=l[M].trim();if(R==="---")if(g===-1)g=M,E=!0;else if(E)x=M,E=!1,w=!0;else{w=!1;break}else E?C.push(R):w&&(A.push(R),y=M)}return!E&&x!==-1?{header:C,shader:A.join(`
`),offset:y}:null}});o.register("glsl",function(l,p,g,x){if(Array.isArray(l))for(var y=0;y<l.length;y++)this.addFile(new d(this,l[y]));else this.addFile(new d(this,l,p,g,x));return this}),s.exports=d}),89749:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(54899),c=e(41299),o=e(95540),u=e(98356),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x){if(r(p)){var y=p;p=o(y,"key"),x=o(y,"config",x)}var E={type:"audio",cache:l.cacheManager.audio,extension:g.type,key:p,url:g.url,config:x};c.call(this,l,E),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var d=0;d<this.data.length;d++){var l=this.data[d];l.oncanplaythrough=null,l.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(d){var l=d.target;l.oncanplaythrough=null,l.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(m.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var d=this.config&&this.config.instances||1;this.filesTotal=d,this.filesLoaded=0,this.percentComplete=0;for(var l=0;l<d;l++){var p=new Audio;p.dataset||(p.dataset={}),p.dataset.name=this.key+("0"+l).slice(-2),p.dataset.used="false",this.locked?p.dataset.locked="true":(p.dataset.locked="false",p.preload="auto",p.oncanplaythrough=this.onProgress.bind(this),p.onerror=this.onError.bind(this)),this.data.push(p)}for(l=0;l<this.data.length;l++)p=this.data[l],p.src=u(this,this.loader.baseURL),this.locked||p.load();this.locked&&setTimeout(this.onLoad.bind(this))}});s.exports=h}),88470:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x){var y="html";if(r(p)){var E=p;p=u(E,"key"),g=u(E,"url"),x=u(E,"xhrSettings"),y=u(E,"extension",y)}var w={type:"text",cache:l.cacheManager.html,extension:y,responseType:"text",key:p,url:g,xhrSettings:x};c.call(this,l,w)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(d,l,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,l,p));return this}),s.exports=h}),14643:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x,y,E){x===void 0&&(x=512),y===void 0&&(y=512);var w="html";if(r(p)){var C=p;p=u(C,"key"),g=u(C,"url"),E=u(C,"xhrSettings"),w=u(C,"extension",w),x=u(C,"width",x),y=u(C,"height",y)}var A={type:"html",cache:l.textureManager,extension:w,responseType:"text",key:p,url:g,xhrSettings:E,config:{width:x,height:y}};c.call(this,l,A)},onProcess:function(){this.state=m.FILE_PROCESSING;var d=this.config.width,l=this.config.height,p=[];p.push('<svg width="'+d+'px" height="'+l+'px" viewBox="0 0 '+d+" "+l+'" xmlns="http://www.w3.org/2000/svg">'),p.push('<foreignObject width="100%" height="100%">'),p.push('<body xmlns="http://www.w3.org/1999/xhtml">'),p.push(this.xhrLoader.responseText),p.push("</body>"),p.push("</foreignObject>"),p.push("</svg>");var g=[p.join(`
`)],x=this;try{var y=new window.Blob(g,{type:"image/svg+xml;charset=utf-8"})}catch{x.state=m.FILE_ERRORED,x.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){c.revokeObjectURL(x.data),x.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(x.data),x.onProcessError()},c.createObjectURL(this.data,y,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});o.register("htmlTexture",function(d,l,p,g,x){if(Array.isArray(d))for(var y=0;y<d.length;y++)this.addFile(new h(this,d[y]));else this.addFile(new h(this,d,l,p,g,x));return this}),s.exports=h}),19550:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=e(98356),d=new a({Extends:c,initialize:function l(p,g,x,y,E){var w="png",C;if(r(g)){var A=g;g=u(A,"key"),x=u(A,"url"),C=u(A,"normalMap"),y=u(A,"xhrSettings"),w=u(A,"extension",w),E=u(A,"frameConfig")}Array.isArray(x)&&(C=x[1],x=x[0]);var M={type:"image",cache:p.textureManager,extension:w,responseType:"blob",key:g,url:x,xhrSettings:y,config:E};if(c.call(this,p,M),C){var R=new l(p,this.key,C,y,E);R.type="normalMap",this.setLink(R),p.addFile(R)}this.useImageElementLoad=p.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){c.revokeObjectURL(l.data),l.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(l.data),l.onProcessError()},c.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var l=this.state;this.state=m.FILE_PROCESSING,l===m.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=m.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){l.state=m.FILE_LOADED,l.loader.nextFile(l,!0)},this.data.onerror=function(){l.loader.nextFile(l,!1)},this.data.src=this.src},addToCache:function(){var l=this.linkFile;l?l.state>=m.FILE_COMPLETE&&(l.type==="spritesheet"?l.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,l.data,this.data):this.cache.addImage(this.key,this.data,l.data)):this.cache.addImage(this.key,this.data)}});o.register("image",function(l,p,g){if(Array.isArray(l))for(var x=0;x<l.length;x++)this.addFile(new d(this,l[x]));else this.addFile(new d(this,l,p,g));return this}),s.exports=d}),518:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(35154),h=e(41212),d=new a({Extends:c,initialize:function(p,g,x,y,E){var w="json";if(h(g)){var C=g;g=u(C,"key"),x=u(C,"url"),y=u(C,"xhrSettings"),w=u(C,"extension",w),E=u(C,"dataKey",E)}var A={type:"json",cache:p.cacheManager.json,extension:w,responseType:"text",key:g,url:x,xhrSettings:y,config:E};c.call(this,p,A),h(x)&&(E?this.data=r(x,E):this.data=x,this.state=m.FILE_POPULATED)},onProcess:function(){if(this.state!==m.FILE_POPULATED){this.state=m.FILE_PROCESSING;try{var l=JSON.parse(this.xhrLoader.responseText)}catch(g){throw this.onProcessError(),g}var p=this.config;typeof p=="string"?this.data=r(l,p,l):this.data=l}this.onProcessComplete()}});o.register("json",function(l,p,g,x){if(Array.isArray(l))for(var y=0;y<l.length;y++)this.addFile(new d(this,l[y]));else this.addFile(new d(this,l,p,x,g));return this}),s.exports=d}),59327:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(95540),o=e(19550),u=e(41212),r=e(518),h=e(26430),d=new a({Extends:h,initialize:function(p,g,x,y,E,w,C){if(u(g)){var A=g;g=c(A,"key"),c(A,"url",!1)?x=c(A,"url"):x=c(A,"atlasURL"),w=c(A,"xhrSettings"),y=c(A,"path"),E=c(A,"baseURL"),C=c(A,"textureXhrSettings")}var M=new r(p,g,x,w);h.call(this,p,"multiatlas",g,[M]),this.config.path=y,this.config.baseURL=E,this.config.textureXhrSettings=C},onFileComplete:function(l){var p=this.files.indexOf(l);if(p!==-1&&(this.pending--,l.type==="json"&&l.data.hasOwnProperty("textures"))){var g=l.data.textures,x=this.config,y=this.loader,E=y.baseURL,w=y.path,C=y.prefix,A=c(x,"baseURL",this.baseURL),M=c(x,"path",this.path),R=c(x,"prefix",this.prefix),P=c(x,"textureXhrSettings");y.setBaseURL(A),y.setPath(M),y.setPrefix(R);for(var b=0;b<g.length;b++){var F=g[b].image,I="MA"+this.multiKeyIndex+"_"+F,L=new o(y,I,F,P);if(this.addToMultiFile(L),y.addFile(L),g[b].normalMap){var D=new o(y,I,g[b].normalMap,P);D.type="normalMap",L.setLink(D),this.addToMultiFile(D),y.addFile(D)}}y.setBaseURL(E),y.setPath(w),y.setPrefix(C)}},addToCache:function(){if(this.isReadyToProcess()){for(var l=this.files[0],p=[],g=[],x=[],y=1;y<this.files.length;y++){var E=this.files[y];if(E.type!=="normalMap")for(var w=E.key.indexOf("_"),C=E.key.substr(w+1),A=E.data,M=0;M<l.data.textures.length;M++){var R=l.data.textures[M];if(R.image===C){g.push(A),p.push(R),E.linkFile&&x.push(E.linkFile.data);break}}}x.length===0&&(x=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,g,p,x),this.complete=!0}}});m.register("multiatlas",function(l,p,g,x,y){var E;if(Array.isArray(l))for(var w=0;w<l.length;w++)E=new d(this,l[w]),this.addFile(E.files);else E=new d(this,l,p,g,x,y),this.addFile(E.files);return this}),s.exports=d}),99297:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(95540),o=e(41212),u=e(26430),r=e(34328),h=new a({Extends:u,initialize:function(l,p,g,x){var y="js",E=[];if(o(p)){var w=p;p=c(w,"key"),g=c(w,"url"),x=c(w,"xhrSettings"),y=c(w,"extension",y)}Array.isArray(g)||(g=[g]);for(var C=0;C<g.length;C++){var A=new r(l,{key:p+"_"+C.toString(),url:g[C],extension:y,xhrSettings:x});A.onProcess=function(){this.onProcessComplete()},E.push(A)}u.call(this,l,"scripts",p,E)},addToCache:function(){if(this.isReadyToProcess()){for(var d=0;d<this.files.length;d++){var l=this.files[d];l.data=document.createElement("script"),l.data.language="javascript",l.data.type="text/javascript",l.data.defer=!1,l.data.text=l.xhrLoader.responseText,document.head.appendChild(l.data)}this.complete=!0}}});m.register("scripts",function(d,l,p){var g;if(Array.isArray(d))for(var x=0;x<d.length;x++)g=new h(this,d[x]),this.addFile(g.files);else g=new h(this,d,l,p),this.addFile(g.files);return this}),s.exports=h}),41846:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(95540),o=e(41212),u=e(26430),r=e(85048),h=e(61485),d=e(78776),l=new a({Extends:u,initialize:function(g,x,y,E,w,C){var A,M,R=g.cacheManager.obj;if(o(x)){var P=x;x=c(P,"key"),A=new d(g,{key:x,type:"obj",cache:R,url:c(P,"url"),extension:c(P,"extension","obj"),xhrSettings:c(P,"xhrSettings"),config:{flipUV:c(P,"flipUV",w)}}),E=c(P,"matURL"),E&&(M=new d(g,{key:x,type:"mat",cache:R,url:E,extension:c(P,"matExtension","mat"),xhrSettings:c(P,"xhrSettings")}))}else A=new d(g,{key:x,url:y,type:"obj",cache:R,extension:"obj",xhrSettings:C,config:{flipUV:w}}),E&&(M=new d(g,{key:x,url:E,type:"mat",cache:R,extension:"mat",xhrSettings:C}));u.call(this,g,"obj",x,[A,M])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],g=this.files[1],x=r(p.data,p.config.flipUV);g&&(x.materials=h(g.data)),p.cache.add(p.key,x),this.complete=!0}}});m.register("obj",function(p,g,x,y,E){var w;if(Array.isArray(p))for(var C=0;C<p.length;C++)w=new l(this,p[C]),this.addFile(w.files);else w=new l(this,p,g,x,y,E),this.addFile(w.files);return this}),s.exports=l}),58610:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(74099),o=e(518),u=new a({Extends:o,initialize:function(h,d,l,p,g){o.call(this,h,d,l,p,g),this.type="packfile"},onProcess:function(){if(this.state!==m.FILE_POPULATED&&(this.state=m.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var r={};r[this.config]=this.data,this.data=r}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});c.register("pack",function(r,h,d,l){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new u(this,r[p]));else this.addFile(new u(this,r,h,l,d));return this}),s.exports=u}),48988:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x,y,E){var w="js";if(r(p)){var C=p;p=u(C,"key"),g=u(C,"url"),E=u(C,"xhrSettings"),w=u(C,"extension",w),x=u(C,"start"),y=u(C,"mapping")}var A={type:"plugin",cache:!1,extension:w,responseType:"text",key:p,url:g,xhrSettings:E,config:{start:x,mapping:y}};c.call(this,l,A),typeof g=="function"&&(this.data=g,this.state=m.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,l=this.config,p=u(l,"start",!1),g=u(l,"mapping",null);if(this.state===m.FILE_POPULATED)d.install(this.key,this.data,p,g);else{this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var x=d.install(this.key,window[this.key],p,g);(p||g)&&(this.loader.systems[g]=x,this.loader.scene[g]=x)}this.onProcessComplete()}});o.register("plugin",function(d,l,p,g,x){if(Array.isArray(d))for(var y=0;y<d.length;y++)this.addFile(new h(this,d[y]));else this.addFile(new h(this,d,l,p,g,x));return this}),s.exports=h}),67397:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x,y){var E="svg";if(r(p)){var w=p;p=u(w,"key"),g=u(w,"url"),x=u(w,"svgConfig",{}),y=u(w,"xhrSettings"),E=u(w,"extension",E)}var C={type:"svg",cache:l.textureManager,extension:E,responseType:"text",key:p,url:g,xhrSettings:y,config:{width:u(x,"width"),height:u(x,"height"),scale:u(x,"scale")}};c.call(this,l,C)},onProcess:function(){this.state=m.FILE_PROCESSING;var d=this.xhrLoader.responseText,l=[d],p=this.config.width,g=this.config.height,x=this.config.scale;t:if(p&&g||x){var y=null,E=new DOMParser;y=E.parseFromString(d,"text/xml");var w=y.getElementsByTagName("svg")[0],C=w.hasAttribute("viewBox"),A=parseFloat(w.getAttribute("width")),M=parseFloat(w.getAttribute("height"));if(!C&&A&&M)w.setAttribute("viewBox","0  0 "+A+" "+M);else if(C&&!A&&!M){var R=w.getAttribute("viewBox").split(/\s+|,/);A=R[2],M=R[3]}if(x)if(A&&M)p=A*x,g=M*x;else break t;w.setAttribute("width",p.toString()+"px"),w.setAttribute("height",g.toString()+"px"),l=[new XMLSerializer().serializeToString(w)]}try{var P=new window.Blob(l,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var b=this,F=!1;this.data.onload=function(){F||c.revokeObjectURL(b.data),b.onProcessComplete()},this.data.onerror=function(){F?b.onProcessError():(F=!0,c.revokeObjectURL(b.data),b.data.src="data:image/svg+xml,"+encodeURIComponent(l.join("")))},c.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});o.register("svg",function(d,l,p,g){if(Array.isArray(d))for(var x=0;x<d.length;x++)this.addFile(new h(this,d[x]));else this.addFile(new h(this,d,l,p,g));return this}),s.exports=h}),88423:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x){var y="js";if(r(p)){var E=p;p=u(E,"key"),g=u(E,"url"),x=u(E,"xhrSettings"),y=u(E,"extension",y)}var w={type:"text",extension:y,responseType:"text",key:p,url:g,xhrSettings:x};c.call(this,l,w)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),l=eval;this.loader.sceneManager.add(this.key,l(d)),this.complete=!0}});o.register("sceneFile",function(d,l,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,l,p));return this}),s.exports=h}),56812:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x,y,E){var w="js";if(r(p)){var C=p;p=u(C,"key"),g=u(C,"url"),E=u(C,"xhrSettings"),w=u(C,"extension",w),x=u(C,"systemKey"),y=u(C,"sceneKey")}var A={type:"scenePlugin",cache:!1,extension:w,responseType:"text",key:p,url:g,xhrSettings:E,config:{systemKey:x,sceneKey:y}};c.call(this,l,A),typeof g=="function"&&(this.data=g,this.state=m.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,l=this.config,p=this.key,g=u(l,"systemKey",p),x=u(l,"sceneKey",p);this.state===m.FILE_POPULATED?d.installScenePlugin(g,this.data,x,this.loader.scene,!0):(this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),d.installScenePlugin(g,window[this.key],x,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(d,l,p,g,x){if(Array.isArray(d))for(var y=0;y<d.length;y++)this.addFile(new h(this,d[y]));else this.addFile(new h(this,d,l,p,g,x));return this}),s.exports=h}),34328:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x,y){var E="js";if(r(p)){var w=p;p=u(w,"key"),g=u(w,"url"),x=u(w,"type","script"),y=u(w,"xhrSettings"),E=u(w,"extension",E)}else x===void 0&&(x="script");var C={type:x,cache:!1,extension:E,responseType:"text",key:p,url:g,xhrSettings:y};c.call(this,l,C)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(d,l,p,g){if(Array.isArray(d))for(var x=0;x<d.length;x++)this.addFile(new h(this,d[x]));else this.addFile(new h(this,d,l,p,g));return this}),s.exports=h}),85035:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(74099),o=e(19550),u=new a({Extends:o,initialize:function(h,d,l,p,g){o.call(this,h,d,l,g,p),this.type="spritesheet"},addToCache:function(){var r=this.linkFile;r?r.state>=m.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,r.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,r.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});c.register("spritesheet",function(r,h,d,l){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new u(this,r[p]));else this.addFile(new u(this,r,h,d,l));return this}),s.exports=u}),78776:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=new a({Extends:c,initialize:function(l,p,g,x){var y="text",E="txt",w=l.cacheManager.text;if(r(p)){var C=p;p=u(C,"key"),g=u(C,"url"),x=u(C,"xhrSettings"),E=u(C,"extension",E),y=u(C,"type",y),w=u(C,"cache",w)}var A={type:y,cache:w,extension:E,responseType:"text",key:p,url:g,xhrSettings:x};c.call(this,l,A)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(d,l,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new h(this,d[g]));else this.addFile(new h(this,d,l,p));return this}),s.exports=h}),49477:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=e(80341),d=new a({Extends:c,initialize:function(p,g,x,y){var E="csv";if(r(g)){var w=g;g=u(w,"key"),x=u(w,"url"),y=u(w,"xhrSettings"),E=u(w,"extension",E)}var C={type:"tilemapCSV",cache:p.cacheManager.tilemap,extension:E,responseType:"text",key:g,url:x,xhrSettings:y};c.call(this,p,C),this.tilemapFormat=h.CSV},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,l)}});o.register("tilemapCSV",function(l,p,g){if(Array.isArray(l))for(var x=0;x<l.length;x++)this.addFile(new d(this,l[x]));else this.addFile(new d(this,l,p,g));return this}),s.exports=d}),40807:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(518),o=e(80341),u=new a({Extends:c,initialize:function(h,d,l,p){c.call(this,h,d,l,p),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var r={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,r)}});m.register("tilemapImpact",function(r,h,d){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new u(this,r[l]));else this.addFile(new u(this,r,h,d));return this}),s.exports=u}),56775:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(518),o=e(80341),u=new a({Extends:c,initialize:function(h,d,l,p){c.call(this,h,d,l,p),this.type="tilemapJSON",this.cache=h.cacheManager.tilemap},addToCache:function(){var r={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,r)}});m.register("tilemapTiledJSON",function(r,h,d){if(Array.isArray(r))for(var l=0;l<r.length;l++)this.addFile(new u(this,r[l]));else this.addFile(new u(this,r,h,d));return this}),s.exports=u}),25771:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(74099),c=e(95540),o=e(19550),u=e(41212),r=e(26430),h=e(78776),d=new a({Extends:r,initialize:function(p,g,x,y,E,w){var C,A;if(u(g)){var M=g;g=c(M,"key"),C=new o(p,{key:g,url:c(M,"textureURL"),extension:c(M,"textureExtension","png"),normalMap:c(M,"normalMap"),xhrSettings:c(M,"textureXhrSettings")}),A=new h(p,{key:g,url:c(M,"atlasURL"),extension:c(M,"atlasExtension","txt"),xhrSettings:c(M,"atlasXhrSettings")})}else C=new o(p,g,x,E),A=new h(p,g,y,w);C.linkFile?r.call(this,p,"unityatlas",g,[C,A,C.linkFile]):r.call(this,p,"unityatlas",g,[C,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],p=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(l.key,l.data,p.data,g),this.complete=!0}}});m.register("unityAtlas",function(l,p,g,x,y){var E;if(Array.isArray(l))for(var w=0;w<l.length;w++)E=new d(this,l[w]),this.addFile(E.files);else E=new d(this,l,p,g,x,y),this.addFile(E.files);return this}),s.exports=d}),33720:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(98356),r=e(95540),h=e(41212),d=new a({Extends:c,initialize:function(p,g,x,y){if(y===void 0&&(y=!1),h(g)){var E=g;g=r(E,"key"),x=r(E,"url",[]),y=r(E,"noAudio",!1)}var w=p.systems.game.device.video.getVideoURL(x);w||console.warn("VideoFile: No supported format for "+g);var C={type:"video",cache:p.cacheManager.video,extension:w.type,key:g,url:w.url,config:{noAudio:y}};c.call(this,p,C)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=u(this,this.loader.baseURL),this.state=m.FILE_LOADED,this.loader.nextFile(this,!0)}});o.register("video",function(l,p,g){if(Array.isArray(l))for(var x=0;x<l.length;x++)this.addFile(new d(this,l[x]));else this.addFile(new d(this,l,p,g));return this}),s.exports=d}),57318:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(23906),c=e(41299),o=e(74099),u=e(95540),r=e(41212),h=e(56836),d=new a({Extends:c,initialize:function(p,g,x,y){var E="xml";if(r(g)){var w=g;g=u(w,"key"),x=u(w,"url"),y=u(w,"xhrSettings"),E=u(w,"extension",E)}var C={type:"xml",cache:p.cacheManager.xml,extension:E,responseType:"text",key:g,url:x,xhrSettings:y};c.call(this,p,C)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=h(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});o.register("xml",function(l,p,g){if(Array.isArray(l))for(var x=0;x<l.length;x++)this.addFile(new d(this,l[x]));else this.addFile(new d(this,l,p,g));return this}),s.exports=d}),64589:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AnimationJSONFile:e(14135),AsepriteFile:e(76272),AtlasJSONFile:e(38734),AtlasXMLFile:e(74599),AudioFile:e(21097),AudioSpriteFile:e(89524),BinaryFile:e(85722),BitmapFontFile:e(97025),CompressedTextureFile:e(69559),CSSFile:e(16024),FontFile:e(87674),GLSLFile:e(47931),HTML5AudioFile:e(89749),HTMLFile:e(88470),HTMLTextureFile:e(14643),ImageFile:e(19550),JSONFile:e(518),MultiAtlasFile:e(59327),MultiScriptFile:e(99297),OBJFile:e(41846),PackFile:e(58610),PluginFile:e(48988),SceneFile:e(88423),ScenePluginFile:e(56812),ScriptFile:e(34328),SpriteSheetFile:e(85035),SVGFile:e(67397),TextFile:e(78776),TilemapCSVFile:e(49477),TilemapImpactFile:e(40807),TilemapJSONFile:e(56775),UnityAtlasFile:e(25771),VideoFile:e(33720),XMLFile:e(57318)}}),57777:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23906),m=e(79291),c={Events:e(54899),FileTypes:e(64589),File:e(41299),FileTypesManager:e(74099),GetURL:e(98356),LoaderPlugin:e(74261),MergeXHRSettings:e(3374),MultiFile:e(26430),XHRLoader:e(84376),XHRSettings:e(92638)};c=m(!1,c,a),s.exports=c}),53307:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=0,m=0;m<e.length;m++)a+=+e[m];return a/e.length};s.exports=T}),85710:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6411),m=function(c,o){return a(c)/a(o)/a(c-o)};s.exports=m}),30976:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.floor(Math.random()*(a-e+1)+e)};s.exports=T}),87842:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o){var u=(c-a)*.5,r=(o-m)*.5,h=e*e,d=e*h;return(2*m-2*c+u+r)*d+(-3*m+3*c-2*u-r)*h+u*e+m};s.exports=T}),26302:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){a===void 0&&(a=0),m===void 0&&(m=10);var c=Math.pow(m,-a);return Math.ceil(e*c)/c};s.exports=T}),45319:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return Math.max(a,Math.min(m,e))};s.exports=T}),39506:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=function(c){return c*a.DEG_TO_RAD};s.exports=m}),61241:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.abs(e-a)};s.exports=T}),38857:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(37867),o=e(29747),u=new c,r=new m({initialize:function h(d,l,p,g){d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g=h.DefaultOrder),this._x=d,this._y=l,this._z=p,this._order=g,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(h){this._x=h,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(h){this._y=h,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(h){this._z=h,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(h){this._order=h,this.onChangeCallback(this)}},set:function(h,d,l,p){return p===void 0&&(p=this._order),this._x=h,this._y=d,this._z=l,this._order=p,this.onChangeCallback(this),this},copy:function(h){return this.set(h.x,h.y,h.z,h.order)},setFromQuaternion:function(h,d,l){return d===void 0&&(d=this._order),l===void 0&&(l=!1),u.fromQuat(h),this.setFromRotationMatrix(u,d,l)},setFromRotationMatrix:function(h,d,l){d===void 0&&(d=this._order),l===void 0&&(l=!1);var p=h.val,g=p[0],x=p[4],y=p[8],E=p[1],w=p[5],C=p[9],A=p[2],M=p[6],R=p[10],P=0,b=0,F=0,I=.99999;switch(d){case"XYZ":{b=Math.asin(a(y,-1,1)),Math.abs(y)<I?(P=Math.atan2(-C,R),F=Math.atan2(-x,g)):P=Math.atan2(M,w);break}case"YXZ":{P=Math.asin(-a(C,-1,1)),Math.abs(C)<I?(b=Math.atan2(y,R),F=Math.atan2(E,w)):b=Math.atan2(-A,g);break}case"ZXY":{P=Math.asin(a(M,-1,1)),Math.abs(M)<I?(b=Math.atan2(-A,R),F=Math.atan2(-x,w)):F=Math.atan2(E,g);break}case"ZYX":{b=Math.asin(-a(A,-1,1)),Math.abs(A)<I?(P=Math.atan2(M,R),F=Math.atan2(E,g)):F=Math.atan2(-x,w);break}case"YZX":{F=Math.asin(a(E,-1,1)),Math.abs(E)<I?(P=Math.atan2(-C,w),b=Math.atan2(-A,g)):b=Math.atan2(y,R);break}case"XZY":{F=Math.asin(-a(x,-1,1)),Math.abs(x)<I?(P=Math.atan2(M,w),b=Math.atan2(y,g)):P=Math.atan2(-C,R);break}}return this._x=P,this._y=b,this._z=F,this._order=d,l&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",s.exports=r}),6411:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(e===0)return 1;for(var a=e;--e;)a*=e;return a};s.exports=T}),99472:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.random()*(a-e)+e};s.exports=T}),77623:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){a===void 0&&(a=0),m===void 0&&(m=10);var c=Math.pow(m,-a);return Math.floor(e*c)/c};s.exports=T}),62945:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=function(c,o,u){return c=a(c,0,1),(u-o)*c+o};s.exports=m}),38265:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e/a/1e3};s.exports=T}),78702:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e==parseFloat(e)?!(e%2):void 0};s.exports=T}),94883:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===parseFloat(e)?!(e%2):void 0};s.exports=T}),28915:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return(a-e)*m+e};s.exports=T}),94908:(s=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return m===void 0&&(m=0),e.clone().lerp(a,m)};s.exports=T}),94434:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new m(this)},set:function(c){return this.copy(c)},copy:function(c){var o=this.val,u=c.val;return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],this},fromMat4:function(c){var o=c.val,u=this.val;return u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[4],u[4]=o[5],u[5]=o[6],u[6]=o[8],u[7]=o[9],u[8]=o[10],this},fromArray:function(c){var o=this.val;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],this},identity:function(){var c=this.val;return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=1,c[5]=0,c[6]=0,c[7]=0,c[8]=1,this},transpose:function(){var c=this.val,o=c[1],u=c[2],r=c[5];return c[1]=c[3],c[2]=c[6],c[3]=o,c[5]=c[7],c[6]=u,c[7]=r,this},invert:function(){var c=this.val,o=c[0],u=c[1],r=c[2],h=c[3],d=c[4],l=c[5],p=c[6],g=c[7],x=c[8],y=x*d-l*g,E=-x*h+l*p,w=g*h-d*p,C=o*y+u*E+r*w;return C?(C=1/C,c[0]=y*C,c[1]=(-x*u+r*g)*C,c[2]=(l*u-r*d)*C,c[3]=E*C,c[4]=(x*o-r*p)*C,c[5]=(-l*o+r*h)*C,c[6]=w*C,c[7]=(-g*o+u*p)*C,c[8]=(d*o-u*h)*C,this):null},adjoint:function(){var c=this.val,o=c[0],u=c[1],r=c[2],h=c[3],d=c[4],l=c[5],p=c[6],g=c[7],x=c[8];return c[0]=d*x-l*g,c[1]=r*g-u*x,c[2]=u*l-r*d,c[3]=l*p-h*x,c[4]=o*x-r*p,c[5]=r*h-o*l,c[6]=h*g-d*p,c[7]=u*p-o*g,c[8]=o*d-u*h,this},determinant:function(){var c=this.val,o=c[0],u=c[1],r=c[2],h=c[3],d=c[4],l=c[5],p=c[6],g=c[7],x=c[8];return o*(x*d-l*g)+u*(-x*h+l*p)+r*(g*h-d*p)},multiply:function(c){var o=this.val,u=o[0],r=o[1],h=o[2],d=o[3],l=o[4],p=o[5],g=o[6],x=o[7],y=o[8],E=c.val,w=E[0],C=E[1],A=E[2],M=E[3],R=E[4],P=E[5],b=E[6],F=E[7],I=E[8];return o[0]=w*u+C*d+A*g,o[1]=w*r+C*l+A*x,o[2]=w*h+C*p+A*y,o[3]=M*u+R*d+P*g,o[4]=M*r+R*l+P*x,o[5]=M*h+R*p+P*y,o[6]=b*u+F*d+I*g,o[7]=b*r+F*l+I*x,o[8]=b*h+F*p+I*y,this},translate:function(c){var o=this.val,u=c.x,r=c.y;return o[6]=u*o[0]+r*o[3]+o[6],o[7]=u*o[1]+r*o[4]+o[7],o[8]=u*o[2]+r*o[5]+o[8],this},rotate:function(c){var o=this.val,u=o[0],r=o[1],h=o[2],d=o[3],l=o[4],p=o[5],g=Math.sin(c),x=Math.cos(c);return o[0]=x*u+g*d,o[1]=x*r+g*l,o[2]=x*h+g*p,o[3]=x*d-g*u,o[4]=x*l-g*r,o[5]=x*p-g*h,this},scale:function(c){var o=this.val,u=c.x,r=c.y;return o[0]=u*o[0],o[1]=u*o[1],o[2]=u*o[2],o[3]=r*o[3],o[4]=r*o[4],o[5]=r*o[5],this},fromQuat:function(c){var o=c.x,u=c.y,r=c.z,h=c.w,d=o+o,l=u+u,p=r+r,g=o*d,x=o*l,y=o*p,E=u*l,w=u*p,C=r*p,A=h*d,M=h*l,R=h*p,P=this.val;return P[0]=1-(E+C),P[3]=x+R,P[6]=y-M,P[1]=x-R,P[4]=1-(g+C),P[7]=w+A,P[2]=y+M,P[5]=w-A,P[8]=1-(g+E),this},normalFromMat4:function(c){var o=c.val,u=this.val,r=o[0],h=o[1],d=o[2],l=o[3],p=o[4],g=o[5],x=o[6],y=o[7],E=o[8],w=o[9],C=o[10],A=o[11],M=o[12],R=o[13],P=o[14],b=o[15],F=r*g-h*p,I=r*x-d*p,L=r*y-l*p,D=h*x-d*g,O=h*y-l*g,z=d*y-l*x,W=E*R-w*M,k=E*P-C*M,X=E*b-A*M,V=w*P-C*R,G=w*b-A*R,N=C*b-A*P,H=F*N-I*G+L*V+D*X-O*k+z*W;return H?(H=1/H,u[0]=(g*N-x*G+y*V)*H,u[1]=(x*X-p*N-y*k)*H,u[2]=(p*G-g*X+y*W)*H,u[3]=(d*G-h*N-l*V)*H,u[4]=(r*N-d*X+l*k)*H,u[5]=(h*X-r*G-l*W)*H,u[6]=(R*z-P*O+b*D)*H,u[7]=(P*L-M*z-b*I)*H,u[8]=(M*O-R*L+b*F)*H,this):null}});s.exports=m}),37867:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(25836),c=1e-6,o=new a({initialize:function(g){this.val=new Float32Array(16),g?this.copy(g):this.identity()},clone:function(){return new o(this)},set:function(p){return this.copy(p)},setValues:function(p,g,x,y,E,w,C,A,M,R,P,b,F,I,L,D){var O=this.val;return O[0]=p,O[1]=g,O[2]=x,O[3]=y,O[4]=E,O[5]=w,O[6]=C,O[7]=A,O[8]=M,O[9]=R,O[10]=P,O[11]=b,O[12]=F,O[13]=I,O[14]=L,O[15]=D,this},copy:function(p){var g=p.val;return this.setValues(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15])},fromArray:function(p){return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(p,g,x){var y=u.fromQuat(x),E=y.val,w=g.x,C=g.y,A=g.z;return this.setValues(E[0]*w,E[1]*w,E[2]*w,0,E[4]*C,E[5]*C,E[6]*C,0,E[8]*A,E[9]*A,E[10]*A,0,p.x,p.y,p.z,1)},xyz:function(p,g,x){this.identity();var y=this.val;return y[12]=p,y[13]=g,y[14]=x,this},scaling:function(p,g,x){this.zero();var y=this.val;return y[0]=p,y[5]=g,y[10]=x,y[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var p=this.val,g=p[1],x=p[2],y=p[3],E=p[6],w=p[7],C=p[11];return p[1]=p[4],p[2]=p[8],p[3]=p[12],p[4]=g,p[6]=p[9],p[7]=p[13],p[8]=x,p[9]=E,p[11]=p[14],p[12]=y,p[13]=w,p[14]=C,this},getInverse:function(p){return this.copy(p),this.invert()},invert:function(){var p=this.val,g=p[0],x=p[1],y=p[2],E=p[3],w=p[4],C=p[5],A=p[6],M=p[7],R=p[8],P=p[9],b=p[10],F=p[11],I=p[12],L=p[13],D=p[14],O=p[15],z=g*C-x*w,W=g*A-y*w,k=g*M-E*w,X=x*A-y*C,V=x*M-E*C,G=y*M-E*A,N=R*L-P*I,H=R*D-b*I,U=R*O-F*I,_=P*D-b*L,$=P*O-F*L,j=b*O-F*D,Z=z*j-W*$+k*_+X*U-V*H+G*N;return Z?(Z=1/Z,this.setValues((C*j-A*$+M*_)*Z,(y*$-x*j-E*_)*Z,(L*G-D*V+O*X)*Z,(b*V-P*G-F*X)*Z,(A*U-w*j-M*H)*Z,(g*j-y*U+E*H)*Z,(D*k-I*G-O*W)*Z,(R*G-b*k+F*W)*Z,(w*$-C*U+M*N)*Z,(x*U-g*$-E*N)*Z,(I*V-L*k+O*z)*Z,(P*k-R*V-F*z)*Z,(C*H-w*_-A*N)*Z,(g*_-x*H+y*N)*Z,(L*W-I*X-D*z)*Z,(R*X-P*W+b*z)*Z)):this},adjoint:function(){var p=this.val,g=p[0],x=p[1],y=p[2],E=p[3],w=p[4],C=p[5],A=p[6],M=p[7],R=p[8],P=p[9],b=p[10],F=p[11],I=p[12],L=p[13],D=p[14],O=p[15];return this.setValues(C*(b*O-F*D)-P*(A*O-M*D)+L*(A*F-M*b),-(x*(b*O-F*D)-P*(y*O-E*D)+L*(y*F-E*b)),x*(A*O-M*D)-C*(y*O-E*D)+L*(y*M-E*A),-(x*(A*F-M*b)-C*(y*F-E*b)+P*(y*M-E*A)),-(w*(b*O-F*D)-R*(A*O-M*D)+I*(A*F-M*b)),g*(b*O-F*D)-R*(y*O-E*D)+I*(y*F-E*b),-(g*(A*O-M*D)-w*(y*O-E*D)+I*(y*M-E*A)),g*(A*F-M*b)-w*(y*F-E*b)+R*(y*M-E*A),w*(P*O-F*L)-R*(C*O-M*L)+I*(C*F-M*P),-(g*(P*O-F*L)-R*(x*O-E*L)+I*(x*F-E*P)),g*(C*O-M*L)-w*(x*O-E*L)+I*(x*M-E*C),-(g*(C*F-M*P)-w*(x*F-E*P)+R*(x*M-E*C)),-(w*(P*D-b*L)-R*(C*D-A*L)+I*(C*b-A*P)),g*(P*D-b*L)-R*(x*D-y*L)+I*(x*b-y*P),-(g*(C*D-A*L)-w*(x*D-y*L)+I*(x*A-y*C)),g*(C*b-A*P)-w*(x*b-y*P)+R*(x*A-y*C))},determinant:function(){var p=this.val,g=p[0],x=p[1],y=p[2],E=p[3],w=p[4],C=p[5],A=p[6],M=p[7],R=p[8],P=p[9],b=p[10],F=p[11],I=p[12],L=p[13],D=p[14],O=p[15],z=g*C-x*w,W=g*A-y*w,k=g*M-E*w,X=x*A-y*C,V=x*M-E*C,G=y*M-E*A,N=R*L-P*I,H=R*D-b*I,U=R*O-F*I,_=P*D-b*L,$=P*O-F*L,j=b*O-F*D;return z*j-W*$+k*_+X*U-V*H+G*N},multiply:function(p){var g=this.val,x=g[0],y=g[1],E=g[2],w=g[3],C=g[4],A=g[5],M=g[6],R=g[7],P=g[8],b=g[9],F=g[10],I=g[11],L=g[12],D=g[13],O=g[14],z=g[15],W=p.val,k=W[0],X=W[1],V=W[2],G=W[3];return g[0]=k*x+X*C+V*P+G*L,g[1]=k*y+X*A+V*b+G*D,g[2]=k*E+X*M+V*F+G*O,g[3]=k*w+X*R+V*I+G*z,k=W[4],X=W[5],V=W[6],G=W[7],g[4]=k*x+X*C+V*P+G*L,g[5]=k*y+X*A+V*b+G*D,g[6]=k*E+X*M+V*F+G*O,g[7]=k*w+X*R+V*I+G*z,k=W[8],X=W[9],V=W[10],G=W[11],g[8]=k*x+X*C+V*P+G*L,g[9]=k*y+X*A+V*b+G*D,g[10]=k*E+X*M+V*F+G*O,g[11]=k*w+X*R+V*I+G*z,k=W[12],X=W[13],V=W[14],G=W[15],g[12]=k*x+X*C+V*P+G*L,g[13]=k*y+X*A+V*b+G*D,g[14]=k*E+X*M+V*F+G*O,g[15]=k*w+X*R+V*I+G*z,this},multiplyLocal:function(p){var g=this.val,x=p.val;return this.setValues(g[0]*x[0]+g[1]*x[4]+g[2]*x[8]+g[3]*x[12],g[0]*x[1]+g[1]*x[5]+g[2]*x[9]+g[3]*x[13],g[0]*x[2]+g[1]*x[6]+g[2]*x[10]+g[3]*x[14],g[0]*x[3]+g[1]*x[7]+g[2]*x[11]+g[3]*x[15],g[4]*x[0]+g[5]*x[4]+g[6]*x[8]+g[7]*x[12],g[4]*x[1]+g[5]*x[5]+g[6]*x[9]+g[7]*x[13],g[4]*x[2]+g[5]*x[6]+g[6]*x[10]+g[7]*x[14],g[4]*x[3]+g[5]*x[7]+g[6]*x[11]+g[7]*x[15],g[8]*x[0]+g[9]*x[4]+g[10]*x[8]+g[11]*x[12],g[8]*x[1]+g[9]*x[5]+g[10]*x[9]+g[11]*x[13],g[8]*x[2]+g[9]*x[6]+g[10]*x[10]+g[11]*x[14],g[8]*x[3]+g[9]*x[7]+g[10]*x[11]+g[11]*x[15],g[12]*x[0]+g[13]*x[4]+g[14]*x[8]+g[15]*x[12],g[12]*x[1]+g[13]*x[5]+g[14]*x[9]+g[15]*x[13],g[12]*x[2]+g[13]*x[6]+g[14]*x[10]+g[15]*x[14],g[12]*x[3]+g[13]*x[7]+g[14]*x[11]+g[15]*x[15])},premultiply:function(p){return this.multiplyMatrices(p,this)},multiplyMatrices:function(p,g){var x=p.val,y=g.val,E=x[0],w=x[4],C=x[8],A=x[12],M=x[1],R=x[5],P=x[9],b=x[13],F=x[2],I=x[6],L=x[10],D=x[14],O=x[3],z=x[7],W=x[11],k=x[15],X=y[0],V=y[4],G=y[8],N=y[12],H=y[1],U=y[5],_=y[9],$=y[13],j=y[2],Z=y[6],it=y[10],at=y[14],q=y[3],ft=y[7],vt=y[11],Tt=y[15];return this.setValues(E*X+w*H+C*j+A*q,M*X+R*H+P*j+b*q,F*X+I*H+L*j+D*q,O*X+z*H+W*j+k*q,E*V+w*U+C*Z+A*ft,M*V+R*U+P*Z+b*ft,F*V+I*U+L*Z+D*ft,O*V+z*U+W*Z+k*ft,E*G+w*_+C*it+A*vt,M*G+R*_+P*it+b*vt,F*G+I*_+L*it+D*vt,O*G+z*_+W*it+k*vt,E*N+w*$+C*at+A*Tt,M*N+R*$+P*at+b*Tt,F*N+I*$+L*at+D*Tt,O*N+z*$+W*at+k*Tt)},translate:function(p){return this.translateXYZ(p.x,p.y,p.z)},translateXYZ:function(p,g,x){var y=this.val;return y[12]=y[0]*p+y[4]*g+y[8]*x+y[12],y[13]=y[1]*p+y[5]*g+y[9]*x+y[13],y[14]=y[2]*p+y[6]*g+y[10]*x+y[14],y[15]=y[3]*p+y[7]*g+y[11]*x+y[15],this},scale:function(p){return this.scaleXYZ(p.x,p.y,p.z)},scaleXYZ:function(p,g,x){var y=this.val;return y[0]=y[0]*p,y[1]=y[1]*p,y[2]=y[2]*p,y[3]=y[3]*p,y[4]=y[4]*g,y[5]=y[5]*g,y[6]=y[6]*g,y[7]=y[7]*g,y[8]=y[8]*x,y[9]=y[9]*x,y[10]=y[10]*x,y[11]=y[11]*x,this},makeRotationAxis:function(p,g){var x=Math.cos(g),y=Math.sin(g),E=1-x,w=p.x,C=p.y,A=p.z,M=E*w,R=E*C;return this.setValues(M*w+x,M*C-y*A,M*A+y*C,0,M*C+y*A,R*C+x,R*A-y*w,0,M*A-y*C,R*A+y*w,E*A*A+x,0,0,0,0,1)},rotate:function(p,g){var x=this.val,y=g.x,E=g.y,w=g.z,C=Math.sqrt(y*y+E*E+w*w);if(Math.abs(C)<c)return this;C=1/C,y*=C,E*=C,w*=C;var A=Math.sin(p),M=Math.cos(p),R=1-M,P=x[0],b=x[1],F=x[2],I=x[3],L=x[4],D=x[5],O=x[6],z=x[7],W=x[8],k=x[9],X=x[10],V=x[11],G=x[12],N=x[13],H=x[14],U=x[15],_=y*y*R+M,$=E*y*R+w*A,j=w*y*R-E*A,Z=y*E*R-w*A,it=E*E*R+M,at=w*E*R+y*A,q=y*w*R+E*A,ft=E*w*R-y*A,vt=w*w*R+M;return this.setValues(P*_+L*$+W*j,b*_+D*$+k*j,F*_+O*$+X*j,I*_+z*$+V*j,P*Z+L*it+W*at,b*Z+D*it+k*at,F*Z+O*it+X*at,I*Z+z*it+V*at,P*q+L*ft+W*vt,b*q+D*ft+k*vt,F*q+O*ft+X*vt,I*q+z*ft+V*vt,G,N,H,U)},rotateX:function(p){var g=this.val,x=Math.sin(p),y=Math.cos(p),E=g[4],w=g[5],C=g[6],A=g[7],M=g[8],R=g[9],P=g[10],b=g[11];return g[4]=E*y+M*x,g[5]=w*y+R*x,g[6]=C*y+P*x,g[7]=A*y+b*x,g[8]=M*y-E*x,g[9]=R*y-w*x,g[10]=P*y-C*x,g[11]=b*y-A*x,this},rotateY:function(p){var g=this.val,x=Math.sin(p),y=Math.cos(p),E=g[0],w=g[1],C=g[2],A=g[3],M=g[8],R=g[9],P=g[10],b=g[11];return g[0]=E*y-M*x,g[1]=w*y-R*x,g[2]=C*y-P*x,g[3]=A*y-b*x,g[8]=E*x+M*y,g[9]=w*x+R*y,g[10]=C*x+P*y,g[11]=A*x+b*y,this},rotateZ:function(p){var g=this.val,x=Math.sin(p),y=Math.cos(p),E=g[0],w=g[1],C=g[2],A=g[3],M=g[4],R=g[5],P=g[6],b=g[7];return g[0]=E*y+M*x,g[1]=w*y+R*x,g[2]=C*y+P*x,g[3]=A*y+b*x,g[4]=M*y-E*x,g[5]=R*y-w*x,g[6]=P*y-C*x,g[7]=b*y-A*x,this},fromRotationTranslation:function(p,g){var x=p.x,y=p.y,E=p.z,w=p.w,C=x+x,A=y+y,M=E+E,R=x*C,P=x*A,b=x*M,F=y*A,I=y*M,L=E*M,D=w*C,O=w*A,z=w*M;return this.setValues(1-(F+L),P+z,b-O,0,P-z,1-(R+L),I+D,0,b+O,I-D,1-(R+F),0,g.x,g.y,g.z,1)},fromQuat:function(p){var g=p.x,x=p.y,y=p.z,E=p.w,w=g+g,C=x+x,A=y+y,M=g*w,R=g*C,P=g*A,b=x*C,F=x*A,I=y*A,L=E*w,D=E*C,O=E*A;return this.setValues(1-(b+I),R+O,P-D,0,R-O,1-(M+I),F+L,0,P+D,F-L,1-(M+b),0,0,0,0,1)},frustum:function(p,g,x,y,E,w){var C=1/(g-p),A=1/(y-x),M=1/(E-w);return this.setValues(E*2*C,0,0,0,0,E*2*A,0,0,(g+p)*C,(y+x)*A,(w+E)*M,-1,0,0,w*E*2*M,0)},perspective:function(p,g,x,y){var E=1/Math.tan(p/2),w=1/(x-y);return this.setValues(E/g,0,0,0,0,E,0,0,0,0,(y+x)*w,-1,0,0,2*y*x*w,0)},perspectiveLH:function(p,g,x,y){return this.setValues(2*x/p,0,0,0,0,2*x/g,0,0,0,0,-y/(x-y),1,0,0,x*y/(x-y),0)},ortho:function(p,g,x,y,E,w){var C=p-g,A=x-y,M=E-w;return C=C===0?C:1/C,A=A===0?A:1/A,M=M===0?M:1/M,this.setValues(-2*C,0,0,0,0,-2*A,0,0,0,0,2*M,0,(p+g)*C,(y+x)*A,(w+E)*M,1)},lookAtRH:function(p,g,x){var y=this.val;return l.subVectors(p,g),l.lengthSq()===0&&(l.z=1),l.normalize(),h.crossVectors(x,l),h.lengthSq()===0&&(Math.abs(x.z)===1?l.x+=1e-4:l.z+=1e-4,l.normalize(),h.crossVectors(x,l)),h.normalize(),d.crossVectors(l,h),y[0]=h.x,y[1]=h.y,y[2]=h.z,y[4]=d.x,y[5]=d.y,y[6]=d.z,y[8]=l.x,y[9]=l.y,y[10]=l.z,this},lookAt:function(p,g,x){var y=p.x,E=p.y,w=p.z,C=x.x,A=x.y,M=x.z,R=g.x,P=g.y,b=g.z;if(Math.abs(y-R)<c&&Math.abs(E-P)<c&&Math.abs(w-b)<c)return this.identity();var F=y-R,I=E-P,L=w-b,D=1/Math.sqrt(F*F+I*I+L*L);F*=D,I*=D,L*=D;var O=A*L-M*I,z=M*F-C*L,W=C*I-A*F;D=Math.sqrt(O*O+z*z+W*W),D?(D=1/D,O*=D,z*=D,W*=D):(O=0,z=0,W=0);var k=I*W-L*z,X=L*O-F*W,V=F*z-I*O;return D=Math.sqrt(k*k+X*X+V*V),D?(D=1/D,k*=D,X*=D,V*=D):(k=0,X=0,V=0),this.setValues(O,k,F,0,z,X,I,0,W,V,L,0,-(O*y+z*E+W*w),-(k*y+X*E+V*w),-(F*y+I*E+L*w),1)},yawPitchRoll:function(p,g,x){this.zero(),u.zero(),r.zero();var y=this.val,E=u.val,w=r.val,C=Math.sin(x),A=Math.cos(x);return y[10]=1,y[15]=1,y[0]=A,y[1]=C,y[4]=-C,y[5]=A,C=Math.sin(g),A=Math.cos(g),E[0]=1,E[15]=1,E[5]=A,E[10]=A,E[9]=-C,E[6]=C,C=Math.sin(p),A=Math.cos(p),w[5]=1,w[15]=1,w[0]=A,w[2]=-C,w[8]=C,w[10]=A,this.multiplyLocal(u),this.multiplyLocal(r),this},setWorldMatrix:function(p,g,x,y,E){return this.yawPitchRoll(p.y,p.x,p.z),u.scaling(x.x,x.y,x.z),r.xyz(g.x,g.y,g.z),this.multiplyLocal(u),this.multiplyLocal(r),y&&this.multiplyLocal(y),E&&this.multiplyLocal(E),this},multiplyToMat4:function(p,g){var x=this.val,y=p.val,E=x[0],w=x[1],C=x[2],A=x[3],M=x[4],R=x[5],P=x[6],b=x[7],F=x[8],I=x[9],L=x[10],D=x[11],O=x[12],z=x[13],W=x[14],k=x[15],X=y[0],V=y[1],G=y[2],N=y[3],H=y[4],U=y[5],_=y[6],$=y[7],j=y[8],Z=y[9],it=y[10],at=y[11],q=y[12],ft=y[13],vt=y[14],Tt=y[15];return g.setValues(X*E+V*M+G*F+N*O,V*w+V*R+G*I+N*z,G*C+V*P+G*L+N*W,N*A+V*b+G*D+N*k,H*E+U*M+_*F+$*O,H*w+U*R+_*I+$*z,H*C+U*P+_*L+$*W,H*A+U*b+_*D+$*k,j*E+Z*M+it*F+at*O,j*w+Z*R+it*I+at*z,j*C+Z*P+it*L+at*W,j*A+Z*b+it*D+at*k,q*E+ft*M+vt*F+Tt*O,q*w+ft*R+vt*I+Tt*z,q*C+ft*P+vt*L+Tt*W,q*A+ft*b+vt*D+Tt*k)},fromRotationXYTranslation:function(p,g,x){var y=g.x,E=g.y,w=g.z,C=Math.sin(p.x),A=Math.cos(p.x),M=Math.sin(p.y),R=Math.cos(p.y),P=y,b=E,F=w,I=-C,L=0-I*M,D=0-A*M,O=I*R,z=A*R;return x||(P=R*y+M*w,b=L*y+A*E+O*w,F=D*y+C*E+z*w),this.setValues(R,L,D,0,0,A,C,0,M,O,z,0,P,b,F,1)},getMaxScaleOnAxis:function(){var p=this.val,g=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],x=p[4]*p[4]+p[5]*p[5]+p[6]*p[6],y=p[8]*p[8]+p[9]*p[9]+p[10]*p[10];return Math.sqrt(Math.max(g,x,y))}}),u=new o,r=new o,h=new m,d=new m,l=new m;s.exports=o}),86883:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return Math.min(e+a,m)};s.exports=T}),50040:(s=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=e.length;if(a===0)return 0;e.sort(function(c,o){return c-o});var m=Math.floor(a/2);return a%2===0?(e[m]+e[m-1])/2:e[m]};s.exports=T}),37204:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return Math.max(e-a,m)};s.exports=T}),65201:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){m===void 0&&(m=a+1);var o=(e-a)/(m-a);return o>1?c!==void 0?(o=(c-e)/(c-m),o<0&&(o=0)):o=1:o<0&&(o=0),o};s.exports=T}),15746:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(94434),c=e(29747),o=e(25836),u=1e-6,r=new Int8Array([1,2,0]),h=new Float32Array([0,0,0]),d=new o(1,0,0),l=new o(0,1,0),p=new o,g=new m,x=new a({initialize:function(E,w,C,A){this.onChangeCallback=c,this.set(E,w,C,A)},x:{get:function(){return this._x},set:function(y){this._x=y,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(y){this._y=y,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(y){this._z=y,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(y){this._w=y,this.onChangeCallback(this)}},copy:function(y){return this.set(y)},set:function(y,E,w,C,A){return A===void 0&&(A=!0),typeof y=="object"?(this._x=y.x||0,this._y=y.y||0,this._z=y.z||0,this._w=y.w||0):(this._x=y||0,this._y=E||0,this._z=w||0,this._w=C||0),A&&this.onChangeCallback(this),this},add:function(y){return this._x+=y.x,this._y+=y.y,this._z+=y.z,this._w+=y.w,this.onChangeCallback(this),this},subtract:function(y){return this._x-=y.x,this._y-=y.y,this._z-=y.z,this._w-=y.w,this.onChangeCallback(this),this},scale:function(y){return this._x*=y,this._y*=y,this._z*=y,this._w*=y,this.onChangeCallback(this),this},length:function(){var y=this.x,E=this.y,w=this.z,C=this.w;return Math.sqrt(y*y+E*E+w*w+C*C)},lengthSq:function(){var y=this.x,E=this.y,w=this.z,C=this.w;return y*y+E*E+w*w+C*C},normalize:function(){var y=this.x,E=this.y,w=this.z,C=this.w,A=y*y+E*E+w*w+C*C;return A>0&&(A=1/Math.sqrt(A),this._x=y*A,this._y=E*A,this._z=w*A,this._w=C*A),this.onChangeCallback(this),this},dot:function(y){return this.x*y.x+this.y*y.y+this.z*y.z+this.w*y.w},lerp:function(y,E){E===void 0&&(E=0);var w=this.x,C=this.y,A=this.z,M=this.w;return this.set(w+E*(y.x-w),C+E*(y.y-C),A+E*(y.z-A),M+E*(y.w-M))},rotationTo:function(y,E){var w=y.x*E.x+y.y*E.y+y.z*E.z;return w<-.999999?(p.copy(d).cross(y).length()<u&&p.copy(l).cross(y),p.normalize(),this.setAxisAngle(p,Math.PI)):w>.999999?this.set(0,0,0,1):(p.copy(y).cross(E),this._x=p.x,this._y=p.y,this._z=p.z,this._w=1+w,this.normalize())},setAxes:function(y,E,w){var C=g.val;return C[0]=E.x,C[3]=E.y,C[6]=E.z,C[1]=w.x,C[4]=w.y,C[7]=w.z,C[2]=-y.x,C[5]=-y.y,C[8]=-y.z,this.fromMat3(g).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(y,E){E=E*.5;var w=Math.sin(E);return this.set(w*y.x,w*y.y,w*y.z,Math.cos(E))},multiply:function(y){var E=this.x,w=this.y,C=this.z,A=this.w,M=y.x,R=y.y,P=y.z,b=y.w;return this.set(E*b+A*M+w*P-C*R,w*b+A*R+C*M-E*P,C*b+A*P+E*R-w*M,A*b-E*M-w*R-C*P)},slerp:function(y,E){var w=this.x,C=this.y,A=this.z,M=this.w,R=y.x,P=y.y,b=y.z,F=y.w,I=w*R+C*P+A*b+M*F;I<0&&(I=-I,R=-R,P=-P,b=-b,F=-F);var L=1-E,D=E;if(1-I>u){var O=Math.acos(I),z=Math.sin(O);L=Math.sin((1-E)*O)/z,D=Math.sin(E*O)/z}return this.set(L*w+D*R,L*C+D*P,L*A+D*b,L*M+D*F)},invert:function(){var y=this.x,E=this.y,w=this.z,C=this.w,A=y*y+E*E+w*w+C*C,M=A?1/A:0;return this.set(-y*M,-E*M,-w*M,C*M)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(y){y*=.5;var E=this.x,w=this.y,C=this.z,A=this.w,M=Math.sin(y),R=Math.cos(y);return this.set(E*R+A*M,w*R+C*M,C*R-w*M,A*R-E*M)},rotateY:function(y){y*=.5;var E=this.x,w=this.y,C=this.z,A=this.w,M=Math.sin(y),R=Math.cos(y);return this.set(E*R-C*M,w*R+A*M,C*R+E*M,A*R-w*M)},rotateZ:function(y){y*=.5;var E=this.x,w=this.y,C=this.z,A=this.w,M=Math.sin(y),R=Math.cos(y);return this.set(E*R+w*M,w*R-E*M,C*R+A*M,A*R-C*M)},calculateW:function(){var y=this.x,E=this.y,w=this.z;return this.w=-Math.sqrt(1-y*y-E*E-w*w),this},setFromEuler:function(y,E){var w=y.x/2,C=y.y/2,A=y.z/2,M=Math.cos(w),R=Math.cos(C),P=Math.cos(A),b=Math.sin(w),F=Math.sin(C),I=Math.sin(A);switch(y.order){case"XYZ":{this.set(b*R*P+M*F*I,M*F*P-b*R*I,M*R*I+b*F*P,M*R*P-b*F*I,E);break}case"YXZ":{this.set(b*R*P+M*F*I,M*F*P-b*R*I,M*R*I-b*F*P,M*R*P+b*F*I,E);break}case"ZXY":{this.set(b*R*P-M*F*I,M*F*P+b*R*I,M*R*I+b*F*P,M*R*P-b*F*I,E);break}case"ZYX":{this.set(b*R*P-M*F*I,M*F*P+b*R*I,M*R*I-b*F*P,M*R*P+b*F*I,E);break}case"YZX":{this.set(b*R*P+M*F*I,M*F*P+b*R*I,M*R*I-b*F*P,M*R*P-b*F*I,E);break}case"XZY":{this.set(b*R*P-M*F*I,M*F*P-b*R*I,M*R*I+b*F*P,M*R*P+b*F*I,E);break}}return this},setFromRotationMatrix:function(y){var E=y.val,w=E[0],C=E[4],A=E[8],M=E[1],R=E[5],P=E[9],b=E[2],F=E[6],I=E[10],L=w+R+I,D;return L>0?(D=.5/Math.sqrt(L+1),this.set((F-P)*D,(A-b)*D,(M-C)*D,.25/D)):w>R&&w>I?(D=2*Math.sqrt(1+w-R-I),this.set(.25*D,(C+M)/D,(A+b)/D,(F-P)/D)):R>I?(D=2*Math.sqrt(1+R-w-I),this.set((C+M)/D,.25*D,(P+F)/D,(A-b)/D)):(D=2*Math.sqrt(1+I-w-R),this.set((A+b)/D,(P+F)/D,.25*D,(M-C)/D)),this},fromMat3:function(y){var E=y.val,w=E[0]+E[4]+E[8],C;if(w>0)C=Math.sqrt(w+1),this.w=.5*C,C=.5/C,this._x=(E[7]-E[5])*C,this._y=(E[2]-E[6])*C,this._z=(E[3]-E[1])*C;else{var A=0;E[4]>E[0]&&(A=1),E[8]>E[A*3+A]&&(A=2);var M=r[A],R=r[M];C=Math.sqrt(E[A*3+A]-E[M*3+M]-E[R*3+R]+1),h[A]=.5*C,C=.5/C,h[M]=(E[M*3+A]+E[A*3+M])*C,h[R]=(E[R*3+A]+E[A*3+R])*C,this._x=h[0],this._y=h[1],this._z=h[2],this._w=(E[R*3+M]-E[M*3+R])*C}return this.onChangeCallback(this),this}});s.exports=x}),43396:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=function(c){return c*a.RAD_TO_DEG};s.exports=m}),74362:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1);var m=Math.random()*2*Math.PI;return e.x=Math.cos(m)*a,e.y=Math.sin(m)*a,e};s.exports=T}),60706:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1);var m=Math.random()*2*Math.PI,c=Math.random()*2-1,o=Math.sqrt(1-c*c)*a;return e.x=Math.cos(m)*o,e.y=Math.sin(m)*o,e.z=c*a,e};s.exports=T}),67421:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1),e.x=(Math.random()*2-1)*a,e.y=(Math.random()*2-1)*a,e.z=(Math.random()*2-1)*a,e.w=(Math.random()*2-1)*a,e};s.exports=T}),36305:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.x,c=e.y;return e.x=m*Math.cos(a)-c*Math.sin(a),e.y=m*Math.sin(a)+c*Math.cos(a),e};s.exports=T}),11520:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=Math.cos(c),u=Math.sin(c),r=e.x-a,h=e.y-m;return e.x=r*o-h*u+a,e.y=r*u+h*o+m,e};s.exports=T}),1163:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o){var u=c+Math.atan2(e.y-m,e.x-a);return e.x=a+o*Math.cos(u),e.y=m+o*Math.sin(u),e};s.exports=T}),70336:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o){return e.x=a+o*Math.cos(c),e.y=m+o*Math.sin(c),e};s.exports=T}),72678:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25836),m=e(37867),c=e(15746),o=new m,u=new c,r=new a,h=function(d,l,p){return u.setAxisAngle(l,p),o.fromRotationTranslation(u,r.set(0,0,0)),d.transformMat4(o)};s.exports=h}),2284:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0?Math.ceil(e):Math.floor(e)};s.exports=T}),41013:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){a===void 0&&(a=0),m===void 0&&(m=10);var c=Math.pow(m,-a);return Math.round(e*c)/c};s.exports=T}),16922:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){a===void 0&&(a=1),m===void 0&&(m=1),c===void 0&&(c=1),c*=Math.PI/e;for(var o=[],u=[],r=0;r<e;r++)m-=a*c,a+=m*c,o[r]=m,u[r]=a;return{sin:u,cos:o,length:e}};s.exports=T}),7602:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e<=a?0:e>=m?1:(e=(e-a)/(m-a),e*e*(3-2*e))};s.exports=T}),54261:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e=Math.max(0,Math.min(1,(e-a)/(m-a))),e*e*e*(e*(e*6-15)+10)};s.exports=T}),44408:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r){r===void 0&&(r=new a);var h=0,d=0,l=o*u;return c>0&&c<=l&&(c>o-1?(d=Math.floor(c/o),h=c-d*o):h=c),r.set(h,d)};s.exports=m}),85955:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r,h,d,l,p){p===void 0&&(p=new a);var g=Math.sin(h),x=Math.cos(h),y=x*d,E=g*d,w=-g*l,C=x*l,A=1/(y*C+w*-E);return p.x=C*A*c+-w*A*o+(r*w-u*C)*A,p.y=y*A*o+-E*A*c+(-r*y+u*E)*A,p};s.exports=m}),26099:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(43855),c=new a({initialize:function(u,r){this.x=0,this.y=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0):(r===void 0&&(r=u),this.x=u||0,this.y=r||0)},clone:function(){return new c(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,u){return u===void 0&&(u=o),this.x=o,this.y=u,this},setTo:function(o,u){return this.set(o,u)},setToPolar:function(o,u){return u==null&&(u=1),this.x=Math.cos(o)*u,this.y=Math.sin(o)*u,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,u){return m(this.x,o.x,u)&&m(this.y,o.y,u)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var u=o.x-this.x,r=o.y-this.y;return Math.sqrt(u*u+r*r)},distanceSq:function(o){var u=o.x-this.x,r=o.y-this.y;return u*u+r*r},length:function(){var o=this.x,u=this.y;return Math.sqrt(o*o+u*u)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,u=this.y;return o*o+u*u},normalize:function(){var o=this.x,u=this.y,r=o*o+u*u;return r>0&&(r=1/Math.sqrt(r),this.x=o*r,this.y=u*r),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,u){u===void 0&&(u=0);var r=this.x,h=this.y;return this.x=r+u*(o.x-r),this.y=h+u*(o.y-h),this},transformMat3:function(o){var u=this.x,r=this.y,h=o.val;return this.x=h[0]*u+h[3]*r+h[6],this.y=h[1]*u+h[4]*r+h[7],this},transformMat4:function(o){var u=this.x,r=this.y,h=o.val;return this.x=h[0]*u+h[4]*r+h[12],this.y=h[1]*u+h[5]*r+h[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var u=this.length();return u&&u>o&&this.scale(o/u),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var u=Math.cos(o),r=Math.sin(o);return this.set(u*this.x-r*this.y,r*this.x+u*this.y)},project:function(o){var u=this.dot(o)/o.dot(o);return this.copy(o).scale(u)}});c.ZERO=new c,c.RIGHT=new c(1,0),c.LEFT=new c(-1,0),c.UP=new c(0,-1),c.DOWN=new c(0,1),c.ONE=new c(1,1),s.exports=c}),25836:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=u||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this.z=Math.min(this.z,c.z),this},max:function(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this},clone:function(){return new m(this.x,this.y,this.z)},addVectors:function(c,o){return this.x=c.x+o.x,this.y=c.y+o.y,this.z=c.z+o.z,this},subVectors:function(c,o){return this.x=c.x-o.x,this.y=c.y-o.y,this.z=c.z-o.z,this},crossVectors:function(c,o){var u=c.x,r=c.y,h=c.z,d=o.x,l=o.y,p=o.z;return this.x=r*p-h*l,this.y=h*d-u*p,this.z=u*l-r*d,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this},set:function(c,o,u){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0):(this.x=c||0,this.y=o||0,this.z=u||0),this},setFromMatrixPosition:function(c){return this.fromArray(c.val,12)},setFromMatrixColumn:function(c,o){return this.fromArray(c.val,o*4)},fromArray:function(c,o){return o===void 0&&(o=0),this.x=c[o],this.y=c[o+1],this.z=c[o+2],this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this},addScalar:function(c){return this.x+=c,this.y+=c,this.z+=c,this},addScale:function(c,o){return this.x+=c.x*o,this.y+=c.y*o,this.z+=c.z*o||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this},scale:function(c){return isFinite(c)?(this.x*=c,this.y*=c,this.z*=c):(this.x=0,this.y=0,this.z=0),this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(c){var o=c.x-this.x,u=c.y-this.y,r=c.z-this.z||0;return Math.sqrt(o*o+u*u+r*r)},distanceSq:function(c){var o=c.x-this.x,u=c.y-this.y,r=c.z-this.z||0;return o*o+u*u+r*r},length:function(){var c=this.x,o=this.y,u=this.z;return Math.sqrt(c*c+o*o+u*u)},lengthSq:function(){var c=this.x,o=this.y,u=this.z;return c*c+o*o+u*u},normalize:function(){var c=this.x,o=this.y,u=this.z,r=c*c+o*o+u*u;return r>0&&(r=1/Math.sqrt(r),this.x=c*r,this.y=o*r,this.z=u*r),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z},cross:function(c){var o=this.x,u=this.y,r=this.z,h=c.x,d=c.y,l=c.z;return this.x=u*l-r*d,this.y=r*h-o*l,this.z=o*d-u*h,this},lerp:function(c,o){o===void 0&&(o=0);var u=this.x,r=this.y,h=this.z;return this.x=u+o*(c.x-u),this.y=r+o*(c.y-r),this.z=h+o*(c.z-h),this},applyMatrix3:function(c){var o=this.x,u=this.y,r=this.z,h=c.val;return this.x=h[0]*o+h[3]*u+h[6]*r,this.y=h[1]*o+h[4]*u+h[7]*r,this.z=h[2]*o+h[5]*u+h[8]*r,this},applyMatrix4:function(c){var o=this.x,u=this.y,r=this.z,h=c.val,d=1/(h[3]*o+h[7]*u+h[11]*r+h[15]);return this.x=(h[0]*o+h[4]*u+h[8]*r+h[12])*d,this.y=(h[1]*o+h[5]*u+h[9]*r+h[13])*d,this.z=(h[2]*o+h[6]*u+h[10]*r+h[14])*d,this},transformMat3:function(c){var o=this.x,u=this.y,r=this.z,h=c.val;return this.x=o*h[0]+u*h[3]+r*h[6],this.y=o*h[1]+u*h[4]+r*h[7],this.z=o*h[2]+u*h[5]+r*h[8],this},transformMat4:function(c){var o=this.x,u=this.y,r=this.z,h=c.val;return this.x=h[0]*o+h[4]*u+h[8]*r+h[12],this.y=h[1]*o+h[5]*u+h[9]*r+h[13],this.z=h[2]*o+h[6]*u+h[10]*r+h[14],this},transformCoordinates:function(c){var o=this.x,u=this.y,r=this.z,h=c.val,d=o*h[0]+u*h[4]+r*h[8]+h[12],l=o*h[1]+u*h[5]+r*h[9]+h[13],p=o*h[2]+u*h[6]+r*h[10]+h[14],g=o*h[3]+u*h[7]+r*h[11]+h[15];return this.x=d/g,this.y=l/g,this.z=p/g,this},transformQuat:function(c){var o=this.x,u=this.y,r=this.z,h=c.x,d=c.y,l=c.z,p=c.w,g=p*o+d*r-l*u,x=p*u+l*o-h*r,y=p*r+h*u-d*o,E=-h*o-d*u-l*r;return this.x=g*p+E*-h+x*-l-y*-d,this.y=x*p+E*-d+y*-h-g*-l,this.z=y*p+E*-l+g*-d-x*-h,this},project:function(c){var o=this.x,u=this.y,r=this.z,h=c.val,d=h[0],l=h[1],p=h[2],g=h[3],x=h[4],y=h[5],E=h[6],w=h[7],C=h[8],A=h[9],M=h[10],R=h[11],P=h[12],b=h[13],F=h[14],I=h[15],L=1/(o*g+u*w+r*R+I);return this.x=(o*d+u*x+r*C+P)*L,this.y=(o*l+u*y+r*A+b)*L,this.z=(o*p+u*E+r*M+F)*L,this},projectViewMatrix:function(c,o){return this.applyMatrix4(c).applyMatrix4(o)},unprojectViewMatrix:function(c,o){return this.applyMatrix4(c).applyMatrix4(o)},unproject:function(c,o){var u=c.x,r=c.y,h=c.z,d=c.w,l=this.x-u,p=d-this.y-1-r,g=this.z;return this.x=2*l/h-1,this.y=2*p/d-1,this.z=2*g-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});m.ZERO=new m,m.RIGHT=new m(1,0,0),m.LEFT=new m(-1,0,0),m.UP=new m(0,-1,0),m.DOWN=new m(0,1,0),m.FORWARD=new m(0,0,1),m.BACK=new m(0,0,-1),m.ONE=new m(1,1,1),s.exports=m}),61369:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r,h){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=u||0,this.z=r||0,this.w=h||0)},clone:function(){return new m(this.x,this.y,this.z,this.w)},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this.w=c.w||0,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z&&this.w===c.w},set:function(c,o,u,r){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0,this.w=c.w||0):(this.x=c||0,this.y=o||0,this.z=u||0,this.w=r||0),this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this.w+=c.w||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this.w-=c.w||0,this},scale:function(c){return this.x*=c,this.y*=c,this.z*=c,this.w*=c,this},length:function(){var c=this.x,o=this.y,u=this.z,r=this.w;return Math.sqrt(c*c+o*o+u*u+r*r)},lengthSq:function(){var c=this.x,o=this.y,u=this.z,r=this.w;return c*c+o*o+u*u+r*r},normalize:function(){var c=this.x,o=this.y,u=this.z,r=this.w,h=c*c+o*o+u*u+r*r;return h>0&&(h=1/Math.sqrt(h),this.x=c*h,this.y=o*h,this.z=u*h,this.w=r*h),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w},lerp:function(c,o){o===void 0&&(o=0);var u=this.x,r=this.y,h=this.z,d=this.w;return this.x=u+o*(c.x-u),this.y=r+o*(c.y-r),this.z=h+o*(c.z-h),this.w=d+o*(c.w-d),this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this.w*=c.w||1,this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this.w/=c.w||1,this},distance:function(c){var o=c.x-this.x,u=c.y-this.y,r=c.z-this.z||0,h=c.w-this.w||0;return Math.sqrt(o*o+u*u+r*r+h*h)},distanceSq:function(c){var o=c.x-this.x,u=c.y-this.y,r=c.z-this.z||0,h=c.w-this.w||0;return o*o+u*u+r*r+h*h},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(c){var o=this.x,u=this.y,r=this.z,h=this.w,d=c.val;return this.x=d[0]*o+d[4]*u+d[8]*r+d[12]*h,this.y=d[1]*o+d[5]*u+d[9]*r+d[13]*h,this.z=d[2]*o+d[6]*u+d[10]*r+d[14]*h,this.w=d[3]*o+d[7]*u+d[11]*r+d[15]*h,this},transformQuat:function(c){var o=this.x,u=this.y,r=this.z,h=c.x,d=c.y,l=c.z,p=c.w,g=p*o+d*r-l*u,x=p*u+l*o-h*r,y=p*r+h*u-d*o,E=-h*o-d*u-l*r;return this.x=g*p+E*-h+x*-l-y*-d,this.y=x*p+E*-d+y*-h-g*-l,this.z=y*p+E*-l+g*-d-x*-h,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});m.prototype.sub=m.prototype.subtract,m.prototype.mul=m.prototype.multiply,m.prototype.div=m.prototype.divide,m.prototype.dist=m.prototype.distance,m.prototype.distSq=m.prototype.distanceSq,m.prototype.len=m.prototype.length,m.prototype.lenSq=m.prototype.lengthSq,s.exports=m}),60417:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return Math.abs(e-a)<=m};s.exports=T}),15994:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=m-a;return a+((e-a)%c+c)%c};s.exports=T}),31040:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){return Math.atan2(c-a,m-e)};s.exports=T}),55495:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)};s.exports=T}),128:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return Math.atan2(a.x-e.x,a.y-e.y)};s.exports=T}),41273:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){return Math.atan2(m-e,c-a)};s.exports=T}),1432:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=function(c){return c>Math.PI&&(c-=a.PI2),Math.abs(((c+a.TAU)%a.PI2-a.PI2)%a.PI2)};s.exports=m}),49127:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),m=function(c,o){return a(o-c)};s.exports=m}),52285:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),m=2*Math.PI,c=function(o,u){var r=a(u-o);return r>0&&(r-=m),r};s.exports=c}),67317:((s,T,e)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86554),m=function(c,o){return a(o-c)};s.exports=m}),12407:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};s.exports=T}),53993:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99472),m=function(){return a(-Math.PI,Math.PI)};s.exports=m}),86564:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99472),m=function(){return a(-180,180)};s.exports=m}),90154:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12407),m=function(c){return a(c+Math.PI)};s.exports=m}),48736:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=function(c,o,u){return u===void 0&&(u=.05),c===o||(Math.abs(o-c)<=u||Math.abs(o-c)>=a.PI2-u?c=o:(Math.abs(o-c)>Math.PI&&(o<c?o+=a.PI2:o-=a.PI2),o>c?c+=u:o<c&&(c-=u))),c};s.exports=m}),61430:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=a-e;if(m===0)return 0;var c=Math.floor((m- -180)/360);return m-c*360};s.exports=T}),86554:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),m=function(c){return a(c,-Math.PI,Math.PI)};s.exports=m}),30954:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15994),m=function(c){return a(c,-180,180)};s.exports=m}),25588:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Between:e(31040),BetweenPoints:e(55495),BetweenPointsY:e(128),BetweenY:e(41273),CounterClockwise:e(1432),GetClockwiseDistance:e(49127),GetCounterClockwiseDistance:e(52285),GetShortestDistance:e(67317),Normalize:e(12407),Random:e(53993),RandomDegrees:e(86564),Reverse:e(90154),RotateTo:e(48736),ShortestBetween:e(61430),Wrap:e(86554),WrapDegrees:e(30954)}}),36383:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};s.exports=T}),20339:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=e-m,u=a-c;return Math.sqrt(o*o+u*u)};s.exports=T}),52816:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.x-a.x,c=e.y-a.y;return Math.sqrt(m*m+c*c)};s.exports=T}),64559:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.x-a.x,c=e.y-a.y;return m*m+c*c};s.exports=T}),82340:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){return Math.max(Math.abs(e-m),Math.abs(a-c))};s.exports=T}),14390:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o){return o===void 0&&(o=2),Math.sqrt(Math.pow(m-e,o)+Math.pow(c-a,o))};s.exports=T}),2243:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){return Math.abs(e-m)+Math.abs(a-c)};s.exports=T}),89774:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=e-m,u=a-c;return o*o+u*u};s.exports=T}),50994:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Between:e(20339),BetweenPoints:e(52816),BetweenPointsSquared:e(64559),Chebyshev:e(82340),Power:e(14390),Snake:e(2243),Squared:e(89774)}}),62640:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54178),m=e(41521),c=e(79980),o=e(85433),u=e(99140),r=e(48857),h=e(81596),d=e(59133),l=e(98516),p=e(35248),g=e(82500),x=e(49752);s.exports={Power0:h,Power1:d.Out,Power2:o.Out,Power3:l.Out,Power4:p.Out,Linear:h,Quad:d.Out,Cubic:o.Out,Quart:l.Out,Quint:p.Out,Sine:g.Out,Expo:r.Out,Circ:c.Out,Elastic:u.Out,Back:a.Out,Bounce:m.Out,Stepped:x,"Quad.easeIn":d.In,"Cubic.easeIn":o.In,"Quart.easeIn":l.In,"Quint.easeIn":p.In,"Sine.easeIn":g.In,"Expo.easeIn":r.In,"Circ.easeIn":c.In,"Elastic.easeIn":u.In,"Back.easeIn":a.In,"Bounce.easeIn":m.In,"Quad.easeOut":d.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":l.Out,"Quint.easeOut":p.Out,"Sine.easeOut":g.Out,"Expo.easeOut":r.Out,"Circ.easeOut":c.Out,"Elastic.easeOut":u.Out,"Back.easeOut":a.Out,"Bounce.easeOut":m.Out,"Quad.easeInOut":d.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":p.InOut,"Sine.easeInOut":g.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":c.InOut,"Elastic.easeInOut":u.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":m.InOut}}),1639:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1.70158),e*e*((a+1)*e-a)};s.exports=T}),50099:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1.70158);var m=a*1.525;return(e*=2)<1?.5*(e*e*((m+1)*e-m)):.5*((e-=2)*e*((m+1)*e+m)+2)};s.exports=T}),41286:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1.70158),--e*e*((a+1)*e+a)+1};s.exports=T}),54178:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(1639),Out:e(41286),InOut:e(50099)}}),59590:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};s.exports=T}),41788:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=!1;return e<.5?(e=1-e*2,a=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,a?(1-e)*.5:e*.5+.5};s.exports=T}),69905:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};s.exports=T}),41521:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(59590),Out:e(69905),InOut:e(41788)}}),91861:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.sqrt(1-e*e)};s.exports=T}),4177:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};s.exports=T}),57512:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(1- --e*e)};s.exports=T}),79980:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(91861),Out:e(57512),InOut:e(4177)}}),51150:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e};s.exports=T}),82820:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};s.exports=T}),35033:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e+1};s.exports=T}),85433:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(51150),Out:e(35033),InOut:e(82820)}}),69965:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(a===void 0&&(a=.1),m===void 0&&(m=.1),e===0)return 0;if(e===1)return 1;var c=m/4;return a<1?a=1:c=m*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/m))};s.exports=T}),50665:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(a===void 0&&(a=.1),m===void 0&&(m=.1),e===0)return 0;if(e===1)return 1;var c=m/4;return a<1?a=1:c=m*Math.asin(1/a)/(2*Math.PI),(e*=2)<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/m)):a*Math.pow(2,-10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/m)*.5+1};s.exports=T}),7744:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(a===void 0&&(a=.1),m===void 0&&(m=.1),e===0)return 0;if(e===1)return 1;var c=m/4;return a<1?a=1:c=m*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*e)*Math.sin((e-c)*(2*Math.PI)/m)+1};s.exports=T}),99140:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(69965),Out:e(7744),InOut:e(50665)}}),24590:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.pow(2,10*(e-1))-.001};s.exports=T}),87844:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};s.exports=T}),89433:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.pow(2,-10*e)};s.exports=T}),48857:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(24590),Out:e(89433),InOut:e(87844)}}),48820:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Back:e(54178),Bounce:e(41521),Circular:e(79980),Cubic:e(85433),Elastic:e(99140),Expo:e(48857),Linear:e(81596),Quadratic:e(59133),Quartic:e(98516),Quintic:e(35248),Sine:e(82500),Stepped:e(49752)}}),7147:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e};s.exports=T}),81596:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports=e(7147)}),34826:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e};s.exports=T}),20544:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};s.exports=T}),92029:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*(2-e)};s.exports=T}),59133:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(34826),Out:e(92029),InOut:e(20544)}}),64413:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e};s.exports=T}),78137:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};s.exports=T}),45840:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1- --e*e*e*e};s.exports=T}),98516:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(64413),Out:e(45840),InOut:e(78137)}}),87745:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e*e};s.exports=T}),16509:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};s.exports=T}),17868:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e*e*e+1};s.exports=T}),35248:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(87745),Out:e(17868),InOut:e(16509)}}),80461:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};s.exports=T}),34025:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};s.exports=T}),52768:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};s.exports=T}),82500:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={In:e(80461),Out:e(52768),InOut:e(34025)}}),72251:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1),e<=0?0:e>=1?1:((a*e|0)+1)*(1/a)};s.exports=T}),49752:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports=e(72251)}),75698:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1e-4),Math.ceil(e-a)};s.exports=T}),43855:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return m===void 0&&(m=1e-4),Math.abs(e-a)<m};s.exports=T}),25777:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a=1e-4),Math.floor(e+a)};s.exports=T}),5470:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return m===void 0&&(m=1e-4),e>a-m};s.exports=T}),94977:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return m===void 0&&(m=1e-4),e<a+m};s.exports=T}),48379:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Ceil:e(75698),Equal:e(43855),Floor:e(25777),GreaterThan:e(5470),LessThan:e(94977)}}),75508:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36383),m=e(79291),c={Angle:e(25588),Distance:e(50994),Easing:e(48820),Fuzzy:e(48379),Interpolation:e(38289),Pow2:e(49001),Snap:e(73697),RandomDataGenerator:e(28453),Average:e(53307),Bernstein:e(85710),Between:e(30976),CatmullRom:e(87842),CeilTo:e(26302),Clamp:e(45319),DegToRad:e(39506),Difference:e(61241),Euler:e(38857),Factorial:e(6411),FloatBetween:e(99472),FloorTo:e(77623),FromPercent:e(62945),GetSpeed:e(38265),IsEven:e(78702),IsEvenStrict:e(94883),Linear:e(28915),LinearXY:e(94908),MaxAdd:e(86883),Median:e(50040),MinSub:e(37204),Percent:e(65201),RadToDeg:e(43396),RandomXY:e(74362),RandomXYZ:e(60706),RandomXYZW:e(67421),Rotate:e(36305),RotateAround:e(11520),RotateAroundDistance:e(1163),RotateTo:e(70336),RoundAwayFromZero:e(2284),RoundTo:e(41013),SinCosTableGenerator:e(16922),SmootherStep:e(54261),SmoothStep:e(7602),ToXY:e(44408),TransformXY:e(85955),Within:e(60417),Wrap:e(15994),Vector2:e(26099),Vector3:e(25836),Vector4:e(61369),Matrix3:e(94434),Matrix4:e(37867),Quaternion:e(15746),RotateVec3:e(72678)};c=m(!1,c,a),s.exports=c}),89318:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85710),m=function(c,o){for(var u=0,r=c.length-1,h=0;h<=r;h++)u+=Math.pow(1-o,r-h)*Math.pow(o,h)*c[h]*a(r,h);return u};s.exports=m}),77259:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87842),m=function(c,o){var u=c.length-1,r=u*o,h=Math.floor(r);return c[0]===c[u]?(o<0&&(h=Math.floor(r=u*(1+o))),a(r-h,c[(h-1+u)%u],c[h],c[(h+1)%u],c[(h+2)%u])):o<0?c[0]-(a(-r,c[0],c[0],c[1],c[1])-c[0]):o>1?c[u]-(a(r-u,c[u],c[u],c[u-1],c[u-1])-c[u]):a(r-h,c[h?h-1:0],c[h],c[u<h+1?u:h+1],c[u<h+2?u:h+2])};s.exports=m}),36316:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(o,u){var r=1-o;return r*r*r*u}function e(o,u){var r=1-o;return 3*r*r*o*u}function a(o,u){return 3*(1-o)*o*o*u}function m(o,u){return o*o*o*u}var c=function(o,u,r,h,d){return T(o,u)+e(o,r)+a(o,h)+m(o,d)};s.exports=c}),28392:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28915),m=function(c,o){var u=c.length-1,r=u*o,h=Math.floor(r);return o<0?a(c[0],c[1],r):o>1?a(c[u],c[u-1],u-r):a(c[h],c[h+1>u?u:h+1],r-h)};s.exports=m}),32112:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(c,o){var u=1-c;return u*u*o}function e(c,o){return 2*(1-c)*c*o}function a(c,o){return c*c*o}var m=function(c,o,u,r){return T(c,o)+e(c,u)+a(c,r)};s.exports=m}),47235:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7602),m=function(c,o,u){return o+(u-o)*a(c,0,1)};s.exports=m}),50178:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(54261),m=function(c,o,u){return o+(u-o)*a(c,0,1)};s.exports=m}),38289:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Bezier:e(89318),CatmullRom:e(77259),CubicBezier:e(36316),Linear:e(28392),QuadraticBezier:e(32112),SmoothStep:e(47235),SmootherStep:e(50178)}}),98439:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=Math.log(e)/.6931471805599453;return 1<<Math.ceil(a)};s.exports=T}),50030:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e>0&&(e&e-1)===0&&a>0&&(a&a-1)===0};s.exports=T}),81230:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0&&(e&e-1)===0};s.exports=T}),49001:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={GetNext:e(98439),IsSize:e(50030),IsValue:e(81230)}}),28453:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var c=2091639*this.s0+this.c*23283064365386963e-26;return this.c=c|0,this.s0=this.s1,this.s1=this.s2,this.s2=c-this.c,this.s2},hash:function(c){var o,u=this.n;c=c.toString();for(var r=0;r<c.length;r++)u+=c.charCodeAt(r),o=.02519603282416938*u,u=o>>>0,o-=u,o*=u,u=o>>>0,o-=u,u+=o*4294967296;return this.n=u,(u>>>0)*23283064365386963e-26},init:function(c){typeof c=="string"?this.state(c):this.sow(c)},sow:function(c){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!c)for(var o=0;o<c.length&&c[o]!=null;o++){var u=c[o];this.s0-=this.hash(u),this.s0+=~~(this.s0<0),this.s1-=this.hash(u),this.s1+=~~(this.s1<0),this.s2-=this.hash(u),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(c,o){return Math.floor(this.realInRange(0,o-c+1)+c)},between:function(c,o){return Math.floor(this.realInRange(0,o-c+1)+c)},realInRange:function(c,o){return this.frac()*(o-c)+c},normal:function(){return 1-2*this.frac()},uuid:function(){var c="",o="";for(o=c="";c++<36;o+=~c%5|c*3&4?(c^15?8^this.frac()*(c^20?16:4):4).toString(16):"-");return o},pick:function(c){return c[this.integerInRange(0,c.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(c){return c[~~(Math.pow(this.frac(),2)*(c.length-.5)+.5)]},timestamp:function(c,o){return this.realInRange(c||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(c){return typeof c=="string"&&c.match(/^!rnd/)&&(c=c.split(","),this.c=parseFloat(c[1]),this.s0=parseFloat(c[2]),this.s1=parseFloat(c[3]),this.s2=parseFloat(c[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(c){for(var o=c.length-1,u=o;u>0;u--){var r=Math.floor(this.frac()*(u+1)),h=c[r];c[r]=c[u],c[u]=h}return c}});s.exports=m}),63448:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){return m===void 0&&(m=0),a===0?e:(e-=m,e=a*Math.ceil(e/a),c?(m+e)/a:m+e)};s.exports=T}),56583:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){return m===void 0&&(m=0),a===0?e:(e-=m,e=a*Math.floor(e/a),c?(m+e)/a:m+e)};s.exports=T}),77720:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){return m===void 0&&(m=0),a===0?e:(e-=m,e=a*Math.round(e/a),c?(m+e)/a:m+e)};s.exports=T}),73697:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Ceil:e(63448),Floor:e(56583),To:e(77720)}}),85454:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(63595);var a=e(8054),m=e(79291),c={Actions:e(61061),Animations:e(60421),BlendModes:e(10312),Cache:e(83388),Cameras:e(26638),Core:e(42857),Class:e(83419),Create:e(15822),Curves:e(25410),Data:e(44965),Display:e(27460),DOM:e(84902),Events:e(93055),FX:e(66064),Game:e(50127),GameObjects:e(77856),Geom:e(55738),Input:e(14350),Loader:e(57777),Math:e(75508),Physics:e(44563),Plugins:e(18922),Renderer:e(36909),Scale:e(93364),ScaleModes:e(29795),Scene:e(97482),Scenes:e(62194),Structs:e(41392),Textures:e(27458),Tilemaps:e(62501),Time:e(90291),Tweens:e(43066),Utils:e(91799)};c.Sound=e(23717),c=m(!1,c,a),s.exports=c,e.g.Phaser=c}),71289:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(92209),c=e(88571),o=new a({Extends:c,Mixins:[m.Acceleration,m.Angular,m.Bounce,m.Collision,m.Debug,m.Drag,m.Enable,m.Friction,m.Gravity,m.Immovable,m.Mass,m.Pushable,m.Size,m.Velocity],initialize:function(r,h,d,l,p){c.call(this,r,h,d,l,p),this.body=null}});s.exports=o}),86689:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(39506),c=e(20339),o=e(89774),u=e(66022),r=e(95540),h=e(46975),d=e(72441),l=e(47956),p=e(37277),g=e(44594),x=e(26099),y=e(82248),E=new a({initialize:function(C){this.scene=C,this.systems=C.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,C.sys.events.once(g.BOOT,this.boot,this),C.sys.events.on(g.START,this.start,this)},boot:function(){this.world=new y(this.scene,this.config),this.add=new u(this.world),this.systems.events.once(g.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new y(this.scene,this.config),this.add=new u(this.world));var w=this.systems.events;r(this.config,"customUpdate",!1)||w.on(g.UPDATE,this.world.update,this.world),w.on(g.POST_UPDATE,this.world.postUpdate,this.world),w.once(g.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(g.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(g.UPDATE,this.world.update,this.world)},getConfig:function(){var w=this.systems.game.config.physics,C=this.systems.settings.physics,A=h(r(C,"arcade",{}),r(w,"arcade",{}));return A},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(w,C,A,M,R){return A===void 0&&(A=null),M===void 0&&(M=null),R===void 0&&(R=A),this.world.collideObjects(w,C,A,M,R,!0)},collide:function(w,C,A,M,R){return A===void 0&&(A=null),M===void 0&&(M=null),R===void 0&&(R=A),this.world.collideObjects(w,C,A,M,R,!1)},collideTiles:function(w,C,A,M,R){return this.world.collideTiles(w,C,A,M,R)},overlapTiles:function(w,C,A,M,R){return this.world.overlapTiles(w,C,A,M,R)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(w,C,A,M,R,P){M===void 0&&(M=60);var b=Math.atan2(A-w.y,C-w.x);return w.body.acceleration.setToPolar(b,M),R!==void 0&&P!==void 0&&w.body.maxVelocity.set(R,P),b},accelerateToObject:function(w,C,A,M,R){return this.accelerateTo(w,C.x,C.y,A,M,R)},closest:function(w,C){C||(C=this.world.bodies.entries);for(var A=Number.MAX_VALUE,M=null,R=w.x,P=w.y,b=C.length,F=0;F<b;F++){var I=C[F],L=I.body||I;if(!(w===I||w===L||w===L.gameObject||w===L.center)){var D=o(R,P,L.center.x,L.center.y);D<A&&(M=I,A=D)}}return M},furthest:function(w,C){C||(C=this.world.bodies.entries);for(var A=-1,M=null,R=w.x,P=w.y,b=C.length,F=0;F<b;F++){var I=C[F],L=I.body||I;if(!(w===I||w===L||w===L.gameObject||w===L.center)){var D=o(R,P,L.center.x,L.center.y);D>A&&(M=I,A=D)}}return M},moveTo:function(w,C,A,M,R){M===void 0&&(M=60),R===void 0&&(R=0);var P=Math.atan2(A-w.y,C-w.x);return R>0&&(M=c(w.x,w.y,C,A)/(R/1e3)),w.body.velocity.setToPolar(P,M),P},moveToObject:function(w,C,A,M){return this.moveTo(w,C.x,C.y,A,M)},velocityFromAngle:function(w,C,A){return C===void 0&&(C=60),A===void 0&&(A=new x),A.setToPolar(m(w),C)},velocityFromRotation:function(w,C,A){return C===void 0&&(C=60),A===void 0&&(A=new x),A.setToPolar(w,C)},overlapRect:function(w,C,A,M,R,P){return l(this.world,w,C,A,M,R,P)},overlapCirc:function(w,C,A,M,R){return d(this.world,w,C,A,M,R)},shutdown:function(){if(this.world){var w=this.systems.events;w.off(g.UPDATE,this.world.update,this.world),w.off(g.POST_UPDATE,this.world.postUpdate,this.world),w.off(g.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(g.START,this.start,this),this.scene=null,this.systems=null}});p.register("ArcadePhysics",E,"arcadePhysics"),s.exports=E}),13759:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(92209),c=e(68287),o=new a({Extends:c,Mixins:[m.Acceleration,m.Angular,m.Bounce,m.Collision,m.Debug,m.Drag,m.Enable,m.Friction,m.Gravity,m.Immovable,m.Mass,m.Pushable,m.Size,m.Velocity],initialize:function(r,h,d,l,p){c.call(this,r,h,d,l,p),this.body=null}});s.exports=o}),37742:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(78389),c=e(37747),o=e(63012),u=e(43396),r=e(87841),h=e(37303),d=e(95829),l=e(26099),p=new a({Mixins:[m],initialize:function(x,y){var E=64,w=64,C={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},A=y!==void 0;A&&y.displayWidth&&(E=y.displayWidth,w=y.displayHeight),A||(y=C),this.world=x,this.gameObject=A?y:void 0,this.isBody=!0,this.transform={x:y.x,y:y.y,rotation:y.angle,scaleX:y.scaleX,scaleY:y.scaleY,displayOriginX:y.displayOriginX,displayOriginY:y.displayOriginY},this.debugShowBody=x.defaults.debugShowBody,this.debugShowVelocity=x.defaults.debugShowVelocity,this.debugBodyColor=x.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(y.x-y.scaleX*y.displayOriginX,y.y-y.scaleY*y.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=y.angle,this.preRotation=y.angle,this.width=E,this.height=w,this.sourceWidth=E,this.sourceHeight=w,y.frame&&(this.sourceWidth=y.frame.realWidth,this.sourceHeight=y.frame.realHeight),this.halfWidth=Math.abs(E/2),this.halfHeight=Math.abs(w/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=x.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=c.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new l(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=d(!1),this.touching=d(!0),this.wasTouching=d(!0),this.blocked=d(!0),this.syncBounds=!1,this.physicsType=c.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=y.scaleX,this._sy=y.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new r,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var g=this.gameObject,x=this.transform;if(g.parentContainer){var y=g.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);x.x=y.tx,x.y=y.ty,x.rotation=u(y.rotation),x.scaleX=y.scaleX,x.scaleY=y.scaleY,x.displayOriginX=g.displayOriginX,x.displayOriginY=g.displayOriginY}else x.x=g.x,x.y=g.y,x.rotation=g.angle,x.scaleX=g.scaleX,x.scaleY=g.scaleY,x.displayOriginX=g.displayOriginX,x.displayOriginY=g.displayOriginY;var E=!1;if(this.syncBounds){var w=g.getBounds(this._bounds);this.width=w.width,this.height=w.height,E=!0}else{var C=Math.abs(x.scaleX),A=Math.abs(x.scaleY);(this._sx!==C||this._sy!==A)&&(this.width=this.sourceWidth*C,this.height=this.sourceHeight*A,this._sx=C,this._sy=A,E=!0)}E&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var g=this.transform;this.position.x=g.x+g.scaleX*(this.offset.x-g.displayOriginX),this.position.y=g.y+g.scaleY*(this.offset.y-g.displayOriginY),this.updateCenter()},resetFlags:function(g){g===void 0&&(g=!1);var x=this.wasTouching,y=this.touching,E=this.blocked;g?d(!0,x):(x.none=y.none,x.up=y.up,x.down=y.down,x.left=y.left,x.right=y.right),d(!0,y),d(!0,E),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(g,x){if(g&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var y=this.position;this.prev.x=y.x,this.prev.y=y.y,this.prevFrame.x=y.x,this.prevFrame.y=y.y}g&&this.update(x)},update:function(g){var x=this.prev,y=this.position,E=this.velocity;if(x.set(y.x,y.y),!this.moves){this._dx=y.x-x.x,this._dy=y.y-x.y;return}if(this.directControl){var w=this.autoFrame;E.set((y.x-w.x)/g,(y.y-w.y)/g),this.world.updateMotion(this,g),this._dx=y.x-w.x,this._dy=y.y-w.y}else this.world.updateMotion(this,g),this.newVelocity.set(E.x*g,E.y*g),y.add(this.newVelocity),this._dx=y.x-x.x,this._dy=y.y-x.y;var C=E.x,A=E.y;if(this.updateCenter(),this.angle=Math.atan2(A,C),this.speed=Math.sqrt(C*C+A*A),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var M=this.blocked;this.world.emit(o.WORLD_BOUNDS,this,M.up,M.down,M.left,M.right)}},postUpdate:function(){var g=this.position,x=g.x-this.prevFrame.x,y=g.y-this.prevFrame.y,E=this.gameObject;if(this.moves){var w=this.deltaMax.x,C=this.deltaMax.y;w!==0&&x!==0&&(x<0&&x<-w?x=-w:x>0&&x>w&&(x=w)),C!==0&&y!==0&&(y<0&&y<-C?y=-C:y>0&&y>C&&(y=C)),E&&(E.x+=x,E.y+=y)}x<0?this.facing=c.FACING_LEFT:x>0&&(this.facing=c.FACING_RIGHT),y<0?this.facing=c.FACING_UP:y>0&&(this.facing=c.FACING_DOWN),this.allowRotation&&E&&(E.angle+=this.deltaZ()),this._tx=x,this._ty=y,this.autoFrame.set(g.x,g.y)},setBoundsRectangle:function(g){return this.customBoundsRectangle=g||this.world.bounds,this},checkWorldBounds:function(){var g=this.position,x=this.velocity,y=this.blocked,E=this.customBoundsRectangle,w=this.world.checkCollision,C=this.worldBounce?-this.worldBounce.x:-this.bounce.x,A=this.worldBounce?-this.worldBounce.y:-this.bounce.y,M=!1;return g.x<E.x&&w.left?(g.x=E.x,x.x*=C,y.left=!0,M=!0):this.right>E.right&&w.right&&(g.x=E.right-this.width,x.x*=C,y.right=!0,M=!0),g.y<E.y&&w.up?(g.y=E.y,x.y*=A,y.up=!0,M=!0):this.bottom>E.bottom&&w.down&&(g.y=E.bottom-this.height,x.y*=A,y.down=!0,M=!0),M&&(this.blocked.none=!1,this.updateCenter()),M},setOffset:function(g,x){return x===void 0&&(x=g),this.offset.set(g,x),this},setGameObject:function(g,x){if(x===void 0&&(x=!0),!g||!g.hasTransformComponent)return this;var y=this.world;return this.gameObject&&this.gameObject.body&&(y.disable(this.gameObject),this.gameObject.body=null),g.body&&y.disable(g),this.gameObject=g,g.body=this,this.setSize(),this.enable=x,this},setSize:function(g,x,y){y===void 0&&(y=!0);var E=this.gameObject;if(E&&(!g&&E.frame&&(g=E.frame.realWidth),!x&&E.frame&&(x=E.frame.realHeight)),this.sourceWidth=g,this.sourceHeight=x,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),y&&E&&E.getCenter){var w=(E.width-g)/2,C=(E.height-x)/2;this.offset.set(w,C)}return this.isCircle=!1,this.radius=0,this},setCircle:function(g,x,y){return x===void 0&&(x=this.offset.x),y===void 0&&(y=this.offset.y),g>0?(this.isCircle=!0,this.radius=g,this.sourceWidth=g*2,this.sourceHeight=g*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(x,y),this.updateCenter()):this.isCircle=!1,this},reset:function(g,x){this.stop();var y=this.gameObject;y&&(y.setPosition(g,x),this.rotation=y.angle,this.preRotation=y.angle);var E=this.position;y&&y.getTopLeft?y.getTopLeft(E):E.set(g,x),this.prev.copy(E),this.prevFrame.copy(E),this.autoFrame.copy(E),y&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(g){return g.x=this.x,g.y=this.y,g.right=this.right,g.bottom=this.bottom,g},hitTest:function(g,x){if(!this.isCircle)return h(this,g,x);if(this.radius>0&&g>=this.left&&g<=this.right&&x>=this.top&&x<=this.bottom){var y=(this.center.x-g)*(this.center.x-g),E=(this.center.y-x)*(this.center.y-x);return y+E<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(g){var x=this.position,y=x.x+this.halfWidth,E=x.y+this.halfHeight;this.debugShowBody&&(g.lineStyle(g.defaultStrokeWidth,this.debugBodyColor),this.isCircle?g.strokeCircle(y,E,this.width/2):(this.checkCollision.up&&g.lineBetween(x.x,x.y,x.x+this.width,x.y),this.checkCollision.right&&g.lineBetween(x.x+this.width,x.y,x.x+this.width,x.y+this.height),this.checkCollision.down&&g.lineBetween(x.x,x.y+this.height,x.x+this.width,x.y+this.height),this.checkCollision.left&&g.lineBetween(x.x,x.y,x.x,x.y+this.height))),this.debugShowVelocity&&(g.lineStyle(g.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),g.lineBetween(y,E,y+this.velocity.x/2,E+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(g){return g===void 0&&(g=!0),this.directControl=g,this},setCollideWorldBounds:function(g,x,y,E){g===void 0&&(g=!0),this.collideWorldBounds=g;var w=x!==void 0,C=y!==void 0;return(w||C)&&(this.worldBounce||(this.worldBounce=new l),w&&(this.worldBounce.x=x),C&&(this.worldBounce.y=y)),E!==void 0&&(this.onWorldBounds=E),this},setVelocity:function(g,x){return this.velocity.set(g,x),g=this.velocity.x,x=this.velocity.y,this.speed=Math.sqrt(g*g+x*x),this},setVelocityX:function(g){return this.setVelocity(g,this.velocity.y)},setVelocityY:function(g){return this.setVelocity(this.velocity.x,g)},setMaxVelocity:function(g,x){return this.maxVelocity.set(g,x),this},setMaxVelocityX:function(g){return this.maxVelocity.x=g,this},setMaxVelocityY:function(g){return this.maxVelocity.y=g,this},setMaxSpeed:function(g){return this.maxSpeed=g,this},setSlideFactor:function(g,x){return this.slideFactor.set(g,x),this},setBounce:function(g,x){return this.bounce.set(g,x),this},setBounceX:function(g){return this.bounce.x=g,this},setBounceY:function(g){return this.bounce.y=g,this},setAcceleration:function(g,x){return this.acceleration.set(g,x),this},setAccelerationX:function(g){return this.acceleration.x=g,this},setAccelerationY:function(g){return this.acceleration.y=g,this},setAllowDrag:function(g){return g===void 0&&(g=!0),this.allowDrag=g,this},setAllowGravity:function(g){return g===void 0&&(g=!0),this.allowGravity=g,this},setAllowRotation:function(g){return g===void 0&&(g=!0),this.allowRotation=g,this},setDrag:function(g,x){return this.drag.set(g,x),this},setDamping:function(g){return this.useDamping=g,this},setDragX:function(g){return this.drag.x=g,this},setDragY:function(g){return this.drag.y=g,this},setGravity:function(g,x){return this.gravity.set(g,x),this},setGravityX:function(g){return this.gravity.x=g,this},setGravityY:function(g){return this.gravity.y=g,this},setFriction:function(g,x){return this.friction.set(g,x),this},setFrictionX:function(g){return this.friction.x=g,this},setFrictionY:function(g){return this.friction.y=g,this},setAngularVelocity:function(g){return this.angularVelocity=g,this},setAngularAcceleration:function(g){return this.angularAcceleration=g,this},setAngularDrag:function(g){return this.angularDrag=g,this},setMass:function(g){return this.mass=g,this},setImmovable:function(g){return g===void 0&&(g=!0),this.immovable=g,this},setEnable:function(g){return g===void 0&&(g=!0),this.enable=g,this},processX:function(g,x,y,E){this.x+=g,this.updateCenter(),x!==null&&(this.velocity.x=x*this.slideFactor.x);var w=this.blocked;y&&(w.left=!0,w.none=!1),E&&(w.right=!0,w.none=!1)},processY:function(g,x,y,E){this.y+=g,this.updateCenter(),x!==null&&(this.velocity.y=x*this.slideFactor.y);var w=this.blocked;y&&(w.up=!0,w.none=!1),E&&(w.down=!0,w.none=!1)},x:{get:function(){return this.position.x},set:function(g){this.position.x=g}},y:{get:function(){return this.position.y},set:function(g){this.position.y=g}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});s.exports=p}),79342:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r,h,d,l,p){this.world=o,this.name="",this.active=!0,this.overlapOnly=u,this.object1=r,this.object2=h,this.collideCallback=d,this.processCallback=l,this.callbackContext=p},setName:function(c){return this.name=c,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});s.exports=m}),66022:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71289),m=e(13759),c=e(37742),o=e(83419),u=e(37747),r=e(60758),h=e(72624),d=e(71464),l=new o({initialize:function(g){this.world=g,this.scene=g.scene,this.sys=g.scene.sys},collider:function(p,g,x,y,E){return this.world.addCollider(p,g,x,y,E)},overlap:function(p,g,x,y,E){return this.world.addOverlap(p,g,x,y,E)},existing:function(p,g){var x=g?u.STATIC_BODY:u.DYNAMIC_BODY;return this.world.enableBody(p,x),p},staticImage:function(p,g,x,y){var E=new a(this.scene,p,g,x,y);return this.sys.displayList.add(E),this.world.enableBody(E,u.STATIC_BODY),E},image:function(p,g,x,y){var E=new a(this.scene,p,g,x,y);return this.sys.displayList.add(E),this.world.enableBody(E,u.DYNAMIC_BODY),E},staticSprite:function(p,g,x,y){var E=new m(this.scene,p,g,x,y);return this.sys.displayList.add(E),this.sys.updateList.add(E),this.world.enableBody(E,u.STATIC_BODY),E},sprite:function(p,g,x,y){var E=new m(this.scene,p,g,x,y);return this.sys.displayList.add(E),this.sys.updateList.add(E),this.world.enableBody(E,u.DYNAMIC_BODY),E},staticGroup:function(p,g){return this.sys.updateList.add(new d(this.world,this.world.scene,p,g))},group:function(p,g){return this.sys.updateList.add(new r(this.world,this.world.scene,p,g))},body:function(p,g,x,y){var E=new c(this.world);return E.position.set(p,g),x&&y&&E.setSize(x,y),this.world.add(E,u.DYNAMIC_BODY),E},staticBody:function(p,g,x,y){var E=new h(this.world);return E.position.set(p,g),x&&y&&E.setSize(x,y),this.world.add(E,u.STATIC_BODY),E},destroy:function(){this.world=null,this.scene=null,this.sys=null}});s.exports=l}),79599:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=0;if(!Array.isArray(e))a=e;else for(var m=0;m<e.length;m++)a|=e[m];return a};s.exports=T}),64897:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),m=function(c,o,u,r){var h=0,d=c.deltaAbsX()+o.deltaAbsX()+r;return c._dx===0&&o._dx===0?(c.embedded=!0,o.embedded=!0):c._dx>o._dx?(h=c.right-o.x,h>d&&!u||c.checkCollision.right===!1||o.checkCollision.left===!1?h=0:(c.touching.none=!1,c.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===a.STATIC_BODY&&!u&&(c.blocked.none=!1,c.blocked.right=!0),c.physicsType===a.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.left=!0))):c._dx<o._dx&&(h=c.x-o.width-o.x,-h>d&&!u||c.checkCollision.left===!1||o.checkCollision.right===!1?h=0:(c.touching.none=!1,c.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===a.STATIC_BODY&&!u&&(c.blocked.none=!1,c.blocked.left=!0),c.physicsType===a.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.right=!0))),c.overlapX=h,o.overlapX=h,h};s.exports=m}),45170:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),m=function(c,o,u,r){var h=0,d=c.deltaAbsY()+o.deltaAbsY()+r;return c._dy===0&&o._dy===0?(c.embedded=!0,o.embedded=!0):c._dy>o._dy?(h=c.bottom-o.y,h>d&&!u||c.checkCollision.down===!1||o.checkCollision.up===!1?h=0:(c.touching.none=!1,c.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===a.STATIC_BODY&&!u&&(c.blocked.none=!1,c.blocked.down=!0),c.physicsType===a.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.up=!0))):c._dy<o._dy&&(h=c.y-o.bottom,-h>d&&!u||c.checkCollision.up===!1||o.checkCollision.down===!1?h=0:(c.touching.none=!1,c.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===a.STATIC_BODY&&!u&&(c.blocked.none=!1,c.blocked.up=!0),c.physicsType===a.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.down=!0))),c.overlapY=h,o.overlapY=h,h};s.exports=m}),60758:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13759),m=e(83419),c=e(78389),o=e(37747),u=e(95540),r=e(26479),h=e(41212),d=new m({Extends:r,Mixins:[c],initialize:function(p,g,x,y){if(!x&&!y)y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(h(x))y=x,x=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(x)&&h(x[0])){var E=this;x.forEach(function(w){w.internalCreateCallback=E.createCallbackHandler,w.internalRemoveCallback=E.removeCallbackHandler,w.classType=u(w,"classType",a)}),y=null}else y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=p,y&&(y.classType=u(y,"classType",a)),this.physicsType=o.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:u(y,"collideWorldBounds",!1),setBoundsRectangle:u(y,"customBoundsRectangle",null),setAccelerationX:u(y,"accelerationX",0),setAccelerationY:u(y,"accelerationY",0),setAllowDrag:u(y,"allowDrag",!0),setAllowGravity:u(y,"allowGravity",!0),setAllowRotation:u(y,"allowRotation",!0),setDamping:u(y,"useDamping",!1),setBounceX:u(y,"bounceX",0),setBounceY:u(y,"bounceY",0),setDragX:u(y,"dragX",0),setDragY:u(y,"dragY",0),setEnable:u(y,"enable",!0),setGravityX:u(y,"gravityX",0),setGravityY:u(y,"gravityY",0),setFrictionX:u(y,"frictionX",0),setFrictionY:u(y,"frictionY",0),setMaxSpeed:u(y,"maxSpeed",-1),setMaxVelocityX:u(y,"maxVelocityX",1e4),setMaxVelocityY:u(y,"maxVelocityY",1e4),setVelocityX:u(y,"velocityX",0),setVelocityY:u(y,"velocityY",0),setAngularVelocity:u(y,"angularVelocity",0),setAngularAcceleration:u(y,"angularAcceleration",0),setAngularDrag:u(y,"angularDrag",0),setMass:u(y,"mass",1),setImmovable:u(y,"immovable",!1)},r.call(this,g,x,y),this.type="PhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,o.DYNAMIC_BODY);var p=l.body;for(var g in this.defaults)p[g](this.defaults[g])},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},setVelocity:function(l,p,g){g===void 0&&(g=0);for(var x=this.getChildren(),y=0;y<x.length;y++)x[y].body.velocity.set(l+y*g,p+y*g);return this},setVelocityX:function(l,p){p===void 0&&(p=0);for(var g=this.getChildren(),x=0;x<g.length;x++)g[x].body.velocity.x=l+x*p;return this},setVelocityY:function(l,p){p===void 0&&(p=0);for(var g=this.getChildren(),x=0;x<g.length;x++)g[x].body.velocity.y=l+x*p;return this}});s.exports=d}),3017:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,a,m,c,o,u,r,h,d,l,p,g,x,y,E,w,C=function(F,I,L){T=F,e=I;var D=T.velocity.x,O=e.velocity.x;return a=T.pushable,h=T._dx<0,d=T._dx>0,l=T._dx===0,y=Math.abs(T.right-e.x)<=Math.abs(e.right-T.x),u=O-D*T.bounce.x,m=e.pushable,p=e._dx<0,g=e._dx>0,x=e._dx===0,E=!y,r=D-O*e.bounce.x,w=Math.abs(L),A()},A=function(){return d&&y&&e.blocked.right?(T.processX(-w,u,!1,!0),1):h&&E&&e.blocked.left?(T.processX(w,u,!0),1):g&&E&&T.blocked.right?(e.processX(-w,r,!1,!0),2):p&&y&&T.blocked.left?(e.processX(w,r,!0),2):0},M=function(){var F=T.velocity.x,I=e.velocity.x,L=Math.sqrt(I*I*e.mass/T.mass)*(I>0?1:-1),D=Math.sqrt(F*F*T.mass/e.mass)*(F>0?1:-1),O=(L+D)*.5;return L-=O,D-=O,c=O+L*T.bounce.x,o=O+D*e.bounce.x,h&&E?R(0):p&&y?R(1):d&&y?R(2):g&&E?R(3):!1},R=function(F){if(a&&m)w*=.5,F===0||F===3?(T.processX(w,c),e.processX(-w,o)):(T.processX(-w,c),e.processX(w,o));else if(a&&!m)F===0||F===3?T.processX(w,u,!0):T.processX(-w,u,!1,!0);else if(!a&&m)F===0||F===3?e.processX(-w,r,!1,!0):e.processX(w,r,!0);else{var I=w*.5;F===0?x?(T.processX(w,0,!0),e.processX(0,null,!1,!0)):g?(T.processX(I,0,!0),e.processX(-I,0,!1,!0)):(T.processX(I,e.velocity.x,!0),e.processX(-I,null,!1,!0)):F===1?l?(T.processX(0,null,!1,!0),e.processX(w,0,!0)):d?(T.processX(-I,0,!1,!0),e.processX(I,0,!0)):(T.processX(-I,null,!1,!0),e.processX(I,T.velocity.x,!0)):F===2?x?(T.processX(-w,0,!1,!0),e.processX(0,null,!0)):p?(T.processX(-I,0,!1,!0),e.processX(I,0,!0)):(T.processX(-I,e.velocity.x,!1,!0),e.processX(I,null,!0)):F===3&&(l?(T.processX(0,null,!0),e.processX(-w,0,!1,!0)):h?(T.processX(I,0,!0),e.processX(-I,0,!1,!0)):(T.processX(I,e.velocity.y,!0),e.processX(-I,null,!1,!0)))}return!0},P=function(F){if(F===1?e.velocity.x=0:y?e.processX(w,r,!0):e.processX(-w,r,!1,!0),T.moves){var I=T.directControl?T.y-T.autoFrame.y:T.y-T.prev.y;e.y+=I*T.friction.y,e._dy=e.y-e.prev.y}},b=function(F){if(F===2?T.velocity.x=0:E?T.processX(w,u,!0):T.processX(-w,u,!1,!0),e.moves){var I=e.directControl?e.y-e.autoFrame.y:e.y-e.prev.y;T.y+=I*e.friction.y,T._dy=T.y-T.prev.y}};s.exports={BlockCheck:A,Check:M,Set:C,Run:R,RunImmovableBody1:P,RunImmovableBody2:b}}),47962:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,a,m,c,o,u,r,h,d,l,p,g,x,y,E,w,C=function(F,I,L){T=F,e=I;var D=T.velocity.y,O=e.velocity.y;return a=T.pushable,h=T._dy<0,d=T._dy>0,l=T._dy===0,y=Math.abs(T.bottom-e.y)<=Math.abs(e.bottom-T.y),u=O-D*T.bounce.y,m=e.pushable,p=e._dy<0,g=e._dy>0,x=e._dy===0,E=!y,r=D-O*e.bounce.y,w=Math.abs(L),A()},A=function(){return d&&y&&e.blocked.down?(T.processY(-w,u,!1,!0),1):h&&E&&e.blocked.up?(T.processY(w,u,!0),1):g&&E&&T.blocked.down?(e.processY(-w,r,!1,!0),2):p&&y&&T.blocked.up?(e.processY(w,r,!0),2):0},M=function(){var F=T.velocity.y,I=e.velocity.y,L=Math.sqrt(I*I*e.mass/T.mass)*(I>0?1:-1),D=Math.sqrt(F*F*T.mass/e.mass)*(F>0?1:-1),O=(L+D)*.5;return L-=O,D-=O,c=O+L*T.bounce.y,o=O+D*e.bounce.y,h&&E?R(0):p&&y?R(1):d&&y?R(2):g&&E?R(3):!1},R=function(F){if(a&&m)w*=.5,F===0||F===3?(T.processY(w,c),e.processY(-w,o)):(T.processY(-w,c),e.processY(w,o));else if(a&&!m)F===0||F===3?T.processY(w,u,!0):T.processY(-w,u,!1,!0);else if(!a&&m)F===0||F===3?e.processY(-w,r,!1,!0):e.processY(w,r,!0);else{var I=w*.5;F===0?x?(T.processY(w,0,!0),e.processY(0,null,!1,!0)):g?(T.processY(I,0,!0),e.processY(-I,0,!1,!0)):(T.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)):F===1?l?(T.processY(0,null,!1,!0),e.processY(w,0,!0)):d?(T.processY(-I,0,!1,!0),e.processY(I,0,!0)):(T.processY(-I,null,!1,!0),e.processY(I,T.velocity.y,!0)):F===2?x?(T.processY(-w,0,!1,!0),e.processY(0,null,!0)):p?(T.processY(-I,0,!1,!0),e.processY(I,0,!0)):(T.processY(-I,e.velocity.y,!1,!0),e.processY(I,null,!0)):F===3&&(l?(T.processY(0,null,!0),e.processY(-w,0,!1,!0)):h?(T.processY(I,0,!0),e.processY(-I,0,!1,!0)):(T.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)))}return!0},P=function(F){if(F===1?e.velocity.y=0:y?e.processY(w,r,!0):e.processY(-w,r,!1,!0),T.moves){var I=T.directControl?T.x-T.autoFrame.x:T.x-T.prev.x;e.x+=I*T.friction.x,e._dx=e.x-e.prev.x}},b=function(F){if(F===2?T.velocity.y=0:E?T.processY(w,u,!0):T.processY(-w,u,!1,!0),e.moves){var I=e.directControl?e.x-e.autoFrame.x:e.x-e.prev.x;T.x+=I*e.friction.x,T._dx=T.x-T.prev.x}};s.exports={BlockCheck:A,Check:M,Set:C,Run:R,RunImmovableBody1:P,RunImmovableBody2:b}}),14087:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(64897),m=e(3017),c=function(o,u,r,h,d){d===void 0&&(d=a(o,u,r,h));var l=o.immovable,p=u.immovable;if(r||d===0||l&&p||o.customSeparateX||u.customSeparateX)return d!==0||o.embedded&&u.embedded;var g=m.Set(o,u,d);return!l&&!p?g>0?!0:m.Check():(l?m.RunImmovableBody1(g):p&&m.RunImmovableBody2(g),!0)};s.exports=c}),89936:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45170),m=e(47962),c=function(o,u,r,h,d){d===void 0&&(d=a(o,u,r,h));var l=o.immovable,p=u.immovable;if(r||d===0||l&&p||o.customSeparateY||u.customSeparateY)return d!==0||o.embedded&&u.embedded;var g=m.Set(o,u,d);return!l&&!p?g>0?!0:m.Check():(l?m.RunImmovableBody1(g):p&&m.RunImmovableBody2(g),!0)};s.exports=c}),95829:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===void 0&&(a={}),a.none=e,a.up=!1,a.down=!1,a.left=!1,a.right=!1,e||(a.up=!0,a.down=!0,a.left=!0,a.right=!0),a};s.exports=T}),72624:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87902),m=e(83419),c=e(78389),o=e(37747),u=e(37303),r=e(95829),h=e(26099),d=new m({Mixins:[c],initialize:function(p,g){var x=64,y=64,E={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},w=g!==void 0;w&&g.displayWidth&&(x=g.displayWidth,y=g.displayHeight),w||(g=E),this.world=p,this.gameObject=w?g:void 0,this.isBody=!0,this.debugShowBody=p.defaults.debugShowStaticBody,this.debugBodyColor=p.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(g.x-x*g.originX,g.y-y*g.originY),this.width=x,this.height=y,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=r(!1),this.touching=r(!0),this.wasTouching=r(!0),this.blocked=r(!0),this.physicsType=o.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(l,p,g){if(p===void 0&&(p=!0),g===void 0&&(g=!0),!l||!l.hasTransformComponent)return this;var x=this.world;return this.gameObject&&this.gameObject.body&&(x.disable(this.gameObject),this.gameObject.body=null),l.body&&x.disable(l),this.gameObject=l,l.body=this,this.setSize(),p&&this.updateFromGameObject(),this.enable=g,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var l=this.gameObject;return l.getTopLeft(this.position),this.width=l.displayWidth,this.height=l.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(l,p){return p===void 0&&(p=l),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(l,p),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(l,p,g){g===void 0&&(g=!0);var x=this.gameObject;if(x&&x.frame&&(l||(l=x.frame.realWidth),p||(p=x.frame.realHeight)),this.world.staticTree.remove(this),this.width=l,this.height=p,this.halfWidth=Math.floor(l/2),this.halfHeight=Math.floor(p/2),g&&x&&x.getCenter){var y=x.displayWidth/2,E=x.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(y-this.halfWidth,E-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(l,p,g){return p===void 0&&(p=this.offset.x),g===void 0&&(g=this.offset.y),l>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=l,this.width=l*2,this.height=l*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(p,g),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(l,p){var g=this.gameObject;l===void 0&&(l=g.x),p===void 0&&(p=g.y),this.world.staticTree.remove(this),g.setPosition(l,p),g.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,p){return this.isCircle?a(this,l,p):u(this,l,p)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(l){var p=this.position,g=p.x+this.halfWidth,x=p.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?l.strokeCircle(g,x,this.width/2):l.strokeRect(p.x,p.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(l){return l<=0&&(l=.1),this.mass=l,this},x:{get:function(){return this.position.x},set:function(l){this.world.staticTree.remove(this),this.position.x=l,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(l){this.world.staticTree.remove(this),this.position.y=l,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});s.exports=d}),71464:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13759),m=e(83419),c=e(78389),o=e(37747),u=e(95540),r=e(26479),h=e(41212),d=new m({Extends:r,Mixins:[c],initialize:function(p,g,x,y){!x&&!y?y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a}:h(x)?(y=x,x=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler,y.createMultipleCallback=this.createMultipleCallbackHandler,y.classType=u(y,"classType",a)):Array.isArray(x)&&h(x[0])?(y=x,x=null,y.forEach(function(E){E.internalCreateCallback=this.createCallbackHandler,E.internalRemoveCallback=this.removeCallbackHandler,E.createMultipleCallback=this.createMultipleCallbackHandler,E.classType=u(E,"classType",a)})):y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=p,this.physicsType=o.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,r.call(this,g,x,y),this.type="StaticPhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,o.STATIC_BODY)},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var l=this.children.entries,p=0;p<l.length;p++)l[p].body.reset();return this}});s.exports=d}),82248:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55495),m=e(37742),c=e(45319),o=e(83419),u=e(79342),r=e(37747),h=e(20339),d=e(52816),l=e(50792),p=e(63012),g=e(43855),x=e(5470),y=e(94977),E=e(64897),w=e(45170),C=e(96523),A=e(35154),M=e(36383),R=e(25774),P=e(96602),b=e(87841),F=e(59542),I=e(40012),L=e(14087),D=e(89936),O=e(35072),z=e(72624),W=e(2483),k=e(61340),X=e(26099),V=e(15994),G=new o({Extends:l,initialize:function(H,U){l.call(this),this.scene=H,this.bodies=new O,this.staticBodies=new O,this.pendingDestroy=new O,this.colliders=new R,this.gravity=new X(A(U,"gravity.x",0),A(U,"gravity.y",0)),this.bounds=new b(A(U,"x",0),A(U,"y",0),A(U,"width",H.sys.scale.width),A(U,"height",H.sys.scale.height)),this.checkCollision={up:A(U,"checkCollision.up",!0),down:A(U,"checkCollision.down",!0),left:A(U,"checkCollision.left",!0),right:A(U,"checkCollision.right",!0)},this.fps=A(U,"fps",60),this.fixedStep=A(U,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=A(U,"timeScale",1),this.OVERLAP_BIAS=A(U,"overlapBias",4),this.TILE_BIAS=A(U,"tileBias",16),this.forceX=A(U,"forceX",!1),this.isPaused=A(U,"isPaused",!1),this._total=0,this.drawDebug=A(U,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:A(U,"debugShowBody",!0),debugShowStaticBody:A(U,"debugShowStaticBody",!0),debugShowVelocity:A(U,"debugShowVelocity",!0),bodyDebugColor:A(U,"debugBodyColor",16711935),staticBodyDebugColor:A(U,"debugStaticBodyColor",255),velocityDebugColor:A(U,"debugVelocityColor",65280)},this.maxEntries=A(U,"maxEntries",16),this.useTree=A(U,"useTree",!0),this.tree=new F(this.maxEntries),this.staticTree=new F(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new k,this._tempMatrix2=new k,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(N,H){H===void 0&&(H=r.DYNAMIC_BODY),Array.isArray(N)||(N=[N]);for(var U=0;U<N.length;U++){var _=N[U];if(_.isParent)for(var $=_.getChildren(),j=0;j<$.length;j++){var Z=$[j];Z.isParent?this.enable(Z,H):this.enableBody(Z,H)}else this.enableBody(_,H)}},enableBody:function(N,H){return H===void 0&&(H=r.DYNAMIC_BODY),N.hasTransformComponent&&(N.body||(H===r.DYNAMIC_BODY?N.body=new m(this,N):H===r.STATIC_BODY&&(N.body=new z(this,N))),this.add(N.body)),N},add:function(N){return N.physicsType===r.DYNAMIC_BODY?this.bodies.set(N):N.physicsType===r.STATIC_BODY&&(this.staticBodies.set(N),this.staticTree.insert(N)),N.enable=!0,N},disable:function(N){Array.isArray(N)||(N=[N]);for(var H=0;H<N.length;H++){var U=N[H];if(U.isParent)for(var _=U.getChildren(),$=0;$<_.length;$++){var j=_[$];j.isParent?this.disable(j):this.disableBody(j.body)}else this.disableBody(U.body)}},disableBody:function(N){this.remove(N),N.enable=!1},remove:function(N){N.physicsType===r.DYNAMIC_BODY?(this.tree.remove(N),this.bodies.delete(N)):N.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(N),this.staticTree.remove(N))},createDebugGraphic:function(){var N=this.scene.sys.add.graphics({x:0,y:0});return N.setDepth(Number.MAX_VALUE),this.debugGraphic=N,this.drawDebug=!0,N},setBounds:function(N,H,U,_,$,j,Z,it){return this.bounds.setTo(N,H,U,_),$!==void 0&&this.setBoundsCollision($,j,Z,it),this},setBoundsCollision:function(N,H,U,_){return N===void 0&&(N=!0),H===void 0&&(H=!0),U===void 0&&(U=!0),_===void 0&&(_=!0),this.checkCollision.left=N,this.checkCollision.right=H,this.checkCollision.up=U,this.checkCollision.down=_,this},pause:function(){return this.isPaused=!0,this.emit(p.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(p.RESUME),this},addCollider:function(N,H,U,_,$){U===void 0&&(U=null),_===void 0&&(_=null),$===void 0&&($=U);var j=new u(this,!1,N,H,U,_,$);return this.colliders.add(j),j},addOverlap:function(N,H,U,_,$){U===void 0&&(U=null),_===void 0&&(_=null),$===void 0&&($=U);var j=new u(this,!0,N,H,U,_,$);return this.colliders.add(j),j},removeCollider:function(N){return this.colliders.remove(N),this},setFPS:function(N){return this.fps=N,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(N,H){if(!(this.isPaused||this.bodies.size===0)){var U,_=this._frameTime,$=this._frameTimeMS*this.timeScale;this._elapsed+=H;var j,Z=this.bodies.entries,it=this._elapsed>=$;for(this.fixedStep||(_=H*.001,it=!0,this._elapsed=0),U=0;U<Z.length;U++)j=Z[U],j.enable&&j.preUpdate(it,_);if(it){this._elapsed-=$,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Z));var at=this.colliders.update();for(U=0;U<at.length;U++){var q=at[U];q.active&&q.update()}this.emit(p.WORLD_STEP,_)}for(;this._elapsed>=$;)this._elapsed-=$,this.step(_)}},step:function(N){var H,U,_=this.bodies.entries,$=_.length;for(H=0;H<$;H++)U=_[H],U.enable&&U.update(N);this.useTree&&(this.tree.clear(),this.tree.load(_));var j=this.colliders.update();for(H=0;H<j.length;H++){var Z=j[H];Z.active&&Z.update()}this.emit(p.WORLD_STEP,N),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var N,H,U=this.bodies.entries,_=U.length,$=this.bodies,j=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,N=0;N<_;N++)H=U[N],H.enable&&H.postUpdate();if(this.drawDebug){var Z=this.debugGraphic;for(Z.clear(),N=0;N<_;N++)H=U[N],H.willDrawDebug()&&H.drawDebug(Z);for(U=j.entries,_=U.length,N=0;N<_;N++)H=U[N],H.willDrawDebug()&&H.drawDebug(Z)}var it=this.pendingDestroy;if(it.size>0){var at=this.tree,q=this.staticTree;for(U=it.entries,_=U.length,N=0;N<_;N++)H=U[N],H.physicsType===r.DYNAMIC_BODY?(at.remove(H),$.delete(H)):H.physicsType===r.STATIC_BODY&&(q.remove(H),j.delete(H)),H.world=void 0,H.gameObject=void 0;it.clear()}},updateMotion:function(N,H){N.allowRotation&&this.computeAngularVelocity(N,H),this.computeVelocity(N,H)},computeAngularVelocity:function(N,H){var U=N.angularVelocity,_=N.angularAcceleration,$=N.angularDrag,j=N.maxAngular;_?U+=_*H:N.allowDrag&&$&&($*=H,x(U-$,0,.1)?U-=$:y(U+$,0,.1)?U+=$:U=0),U=c(U,-j,j);var Z=U-N.angularVelocity;N.angularVelocity+=Z,N.rotation+=N.angularVelocity*H},computeVelocity:function(N,H){var U=N.velocity.x,_=N.acceleration.x,$=N.drag.x,j=N.maxVelocity.x,Z=N.velocity.y,it=N.acceleration.y,at=N.drag.y,q=N.maxVelocity.y,ft=N.speed,vt=N.maxSpeed,Tt=N.allowDrag,ut=N.useDamping;N.allowGravity&&(U+=(this.gravity.x+N.gravity.x)*H,Z+=(this.gravity.y+N.gravity.y)*H),_?U+=_*H:Tt&&$&&(ut?($=Math.pow($,H),U*=$,ft=Math.sqrt(U*U+Z*Z),g(ft,0,.001)&&(U=0)):($*=H,x(U-$,0,.01)?U-=$:y(U+$,0,.01)?U+=$:U=0)),it?Z+=it*H:Tt&&at&&(ut?(at=Math.pow(at,H),Z*=at,ft=Math.sqrt(U*U+Z*Z),g(ft,0,.001)&&(Z=0)):(at*=H,x(Z-at,0,.01)?Z-=at:y(Z+at,0,.01)?Z+=at:Z=0)),U=c(U,-j,j),Z=c(Z,-q,q),N.velocity.set(U,Z),vt>-1&&N.velocity.length()>vt&&(N.velocity.normalize().scale(vt),ft=vt),N.speed=ft},separate:function(N,H,U,_,$){var j,Z,it=!1,at=!0;if(!N.enable||!H.enable||N.checkCollision.none||H.checkCollision.none||!this.intersects(N,H)||(N.collisionMask&H.collisionCategory)===0||(H.collisionMask&N.collisionCategory)===0||U&&U.call(_,N.gameObject||N,H.gameObject||H)===!1)return it;if(N.isCircle||H.isCircle){var q=this.separateCircle(N,H,$);q.result?(it=!0,at=!1):(j=q.x,Z=q.y,at=!0)}if(at){var ft=!1,vt=!1,Tt=this.OVERLAP_BIAS;$?(ft=L(N,H,$,Tt,j),vt=D(N,H,$,Tt,Z)):this.forceX||Math.abs(this.gravity.y+N.gravity.y)<Math.abs(this.gravity.x+N.gravity.x)?(ft=L(N,H,$,Tt,j),this.intersects(N,H)&&(vt=D(N,H,$,Tt,Z))):(vt=D(N,H,$,Tt,Z),this.intersects(N,H)&&(ft=L(N,H,$,Tt,j))),it=ft||vt}return it&&($?(N.onOverlap||H.onOverlap)&&this.emit(p.OVERLAP,N.gameObject,H.gameObject,N,H):(N.onCollide||H.onCollide)&&this.emit(p.COLLIDE,N.gameObject,H.gameObject,N,H)),it},separateCircle:function(N,H,U){E(N,H,!1,0),w(N,H,!1,0);var _=N.isCircle,$=H.isCircle,j=N.center,Z=H.center,it=N.immovable,at=H.immovable,q=N.velocity,ft=H.velocity,vt=0,Tt=!0;if(_!==$){Tt=!1;var ut=j.x,Bt=j.y,Pt=N.halfWidth,et=H.position.x,Q=H.position.y,lt=H.right,pt=H.bottom;$&&(ut=Z.x,Bt=Z.y,Pt=H.halfWidth,et=N.position.x,Q=N.position.y,lt=N.right,pt=N.bottom),Bt<Q?ut<et?vt=h(ut,Bt,et,Q)-Pt:ut>lt&&(vt=h(ut,Bt,lt,Q)-Pt):Bt>pt&&(ut<et?vt=h(ut,Bt,et,pt)-Pt:ut>lt&&(vt=h(ut,Bt,lt,pt)-Pt)),vt*=-1}else vt=N.halfWidth+H.halfWidth-d(j,Z);N.overlapR=vt,H.overlapR=vt;var Mt=a(j,Z),Ct=(vt+M.EPSILON)*Math.cos(Mt),Kt=(vt+M.EPSILON)*Math.sin(Mt),Ut={overlap:vt,result:!1,x:Ct,y:Kt};if(U&&(!Tt||Tt&&vt!==0))return Ut.result=!0,Ut;if(!Tt&&vt===0||it&&at||N.customSeparateX||H.customSeparateX)return Ut.x=void 0,Ut.y=void 0,Ut;var Wt=!N.pushable&&!H.pushable;if(Tt){var ae=j.x-Z.x,zt=j.y-Z.y,Ht=Math.sqrt(Math.pow(ae,2)+Math.pow(zt,2)),At=(Z.x-j.x)/Ht||0,ne=(Z.y-j.y)/Ht||0,jt=2*(q.x*At+q.y*ne-ft.x*At-ft.y*ne)/(N.mass+H.mass);(it||at||!N.pushable||!H.pushable)&&(jt*=2),!it&&N.pushable&&(q.x=q.x-jt/N.mass*At,q.y=q.y-jt/N.mass*ne,q.multiply(N.bounce)),!at&&H.pushable&&(ft.x=ft.x+jt/H.mass*At,ft.y=ft.y+jt/H.mass*ne,ft.multiply(H.bounce)),!it&&!at&&(Ct*=.5,Kt*=.5),(!it||N.pushable||Wt)&&(N.x-=Ct,N.y-=Kt,N.updateCenter()),(!at||H.pushable||Wt)&&(H.x+=Ct,H.y+=Kt,H.updateCenter()),Ut.result=!0}else!it&&(N.pushable||Wt)&&(N.x-=Ct,N.y-=Kt,N.updateCenter()),!at&&(H.pushable||Wt)&&(H.x+=Ct,H.y+=Kt,H.updateCenter()),Ut.x=void 0,Ut.y=void 0;return Ut},intersects:function(N,H){return N===H?!1:!N.isCircle&&!H.isCircle?!(N.right<=H.left||N.bottom<=H.top||N.left>=H.right||N.top>=H.bottom):N.isCircle?H.isCircle?d(N.center,H.center)<=N.halfWidth+H.halfWidth:this.circleBodyIntersects(N,H):this.circleBodyIntersects(H,N)},circleBodyIntersects:function(N,H){var U=c(N.center.x,H.left,H.right),_=c(N.center.y,H.top,H.bottom),$=(N.center.x-U)*(N.center.x-U),j=(N.center.y-_)*(N.center.y-_);return $+j<=N.halfWidth*N.halfWidth},overlap:function(N,H,U,_,$){return U===void 0&&(U=null),_===void 0&&(_=null),$===void 0&&($=U),this.collideObjects(N,H,U,_,$,!0)},collide:function(N,H,U,_,$){return U===void 0&&(U=null),_===void 0&&(_=null),$===void 0&&($=U),this.collideObjects(N,H,U,_,$,!1)},collideObjects:function(N,H,U,_,$,j){var Z,it;N.isParent&&(N.physicsType===void 0||H===void 0||N===H)&&(N=N.children.entries),H&&H.isParent&&H.physicsType===void 0&&(H=H.children.entries);var at=Array.isArray(N),q=Array.isArray(H);if(this._total=0,!at&&!q)this.collideHandler(N,H,U,_,$,j);else if(!at&&q)for(Z=0;Z<H.length;Z++)this.collideHandler(N,H[Z],U,_,$,j);else if(at&&!q)if(H)for(Z=0;Z<N.length;Z++)this.collideHandler(N[Z],H,U,_,$,j);else for(Z=0;Z<N.length;Z++){var ft=N[Z];for(it=Z+1;it<N.length;it++)Z!==it&&this.collideHandler(ft,N[it],U,_,$,j)}else for(Z=0;Z<N.length;Z++)for(it=0;it<H.length;it++)this.collideHandler(N[Z],H[it],U,_,$,j);return this._total>0},collideHandler:function(N,H,U,_,$,j){if(H===void 0&&N.isParent)return this.collideGroupVsGroup(N,N,U,_,$,j);if(!N||!H)return!1;if(N.body||N.isBody){if(H.body||H.isBody)return this.collideSpriteVsSprite(N,H,U,_,$,j);if(H.isParent)return this.collideSpriteVsGroup(N,H,U,_,$,j);if(H.isTilemap)return this.collideSpriteVsTilemapLayer(N,H,U,_,$,j)}else if(N.isParent){if(H.body||H.isBody)return this.collideSpriteVsGroup(H,N,U,_,$,j);if(H.isParent)return this.collideGroupVsGroup(N,H,U,_,$,j);if(H.isTilemap)return this.collideGroupVsTilemapLayer(N,H,U,_,$,j)}else if(N.isTilemap){if(H.body||H.isBody)return this.collideSpriteVsTilemapLayer(H,N,U,_,$,j);if(H.isParent)return this.collideGroupVsTilemapLayer(H,N,U,_,$,j)}},canCollide:function(N,H){return N&&H&&(N.collisionMask&H.collisionCategory)!==0&&(H.collisionMask&N.collisionCategory)!==0},collideSpriteVsSprite:function(N,H,U,_,$,j){var Z=N.isBody?N:N.body,it=H.isBody?H:H.body;return this.canCollide(Z,it)?(this.separate(Z,it,_,$,j)&&(U&&U.call($,N,H),this._total++),!0):!1},collideSpriteVsGroup:function(N,H,U,_,$,j){var Z=N.isBody?N:N.body;if(!(H.getLength()===0||!Z||!Z.enable||Z.checkCollision.none||!this.canCollide(Z,H))){var it,at,q;if(this.useTree||H.physicsType===r.STATIC_BODY){var ft=this.treeMinMax;ft.minX=Z.left,ft.minY=Z.top,ft.maxX=Z.right,ft.maxY=Z.bottom;var vt=H.physicsType===r.DYNAMIC_BODY?this.tree.search(ft):this.staticTree.search(ft);for(at=vt.length,it=0;it<at;it++)q=vt[it],!(Z===q||!q.enable||q.checkCollision.none||!H.contains(q.gameObject))&&this.separate(Z,q,_,$,j)&&(U&&U.call($,Z.gameObject,q.gameObject),this._total++)}else{var Tt=H.getChildren(),ut=H.children.entries.indexOf(N);for(at=Tt.length,it=0;it<at;it++)q=Tt[it].body,!(!q||it===ut||!q.enable)&&this.separate(Z,q,_,$,j)&&(U&&U.call($,Z.gameObject,q.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(N,H,U,_,$,j){if(!this.canCollide(N,H))return!1;var Z=N.getChildren();if(Z.length===0)return!1;for(var it=!1,at=0;at<Z.length;at++)(Z[at].body||Z[at].isBody)&&this.collideSpriteVsTilemapLayer(Z[at],H,U,_,$,j)&&(it=!0);return it},collideTiles:function(N,H,U,_,$){return H.length===0||N.body&&!N.body.enable||N.isBody&&!N.enable?!1:this.collideSpriteVsTilesHandler(N,H,U,_,$,!1,!1)},overlapTiles:function(N,H,U,_,$){return H.length===0||N.body&&!N.body.enable||N.isBody&&!N.enable?!1:this.collideSpriteVsTilesHandler(N,H,U,_,$,!0,!1)},collideSpriteVsTilemapLayer:function(N,H,U,_,$,j){var Z=N.isBody?N:N.body;if(!Z.enable||Z.checkCollision.none||!this.canCollide(Z,H))return!1;var it=H.layer,at=Z.x-it.tileWidth*H.scaleX,q=Z.y-it.tileHeight*H.scaleY,ft=Z.width+it.tileWidth*H.scaleX,vt=Z.height+it.tileHeight*H.scaleY,Tt=j?null:this.tileFilterOptions,ut=C(at,q,ft,vt,Tt,H.scene.cameras.main,H.layer);return ut.length===0?!1:this.collideSpriteVsTilesHandler(N,ut,U,_,$,j,!0)},collideSpriteVsTilesHandler:function(N,H,U,_,$,j,Z){for(var it=N.isBody?N:N.body,at,q={left:0,right:0,top:0,bottom:0},ft,vt=!1,Tt=0;Tt<H.length;Tt++){at=H[Tt],ft=at.tilemapLayer;var ut=ft.tileToWorldXY(at.x,at.y);q.left=ut.x,q.top=ut.y,q.right=q.left+at.width*ft.scaleX,q.bottom=q.top+at.height*ft.scaleY,W(q,it)&&(!_||_.call($,N,at))&&P(at,N)&&(j||I(Tt,it,at,q,ft,this.TILE_BIAS,Z))&&(this._total++,vt=!0,U&&U.call($,N,at),j&&it.onOverlap?this.emit(p.TILE_OVERLAP,N,at,it):it.onCollide&&this.emit(p.TILE_COLLIDE,N,at,it))}return vt},collideGroupVsGroup:function(N,H,U,_,$,j){if(!(N.getLength()===0||H.getLength()===0||!this.canCollide(N,H)))for(var Z=N.getChildren(),it=0;it<Z.length;it++)this.collideSpriteVsGroup(Z[it],H,U,_,$,j)},wrap:function(N,H){N.body?this.wrapObject(N,H):N.getChildren?this.wrapArray(N.getChildren(),H):Array.isArray(N)?this.wrapArray(N,H):this.wrapObject(N,H)},wrapArray:function(N,H){for(var U=0;U<N.length;U++)this.wrapObject(N[U],H)},wrapObject:function(N,H){H===void 0&&(H=0),N.x=V(N.x,this.bounds.left-H,this.bounds.right+H),N.y=V(N.y,this.bounds.top-H,this.bounds.bottom+H)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});s.exports=G}),1093:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAcceleration:function(e,a){return this.body.acceleration.set(e,a),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};s.exports=T}),59023:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};s.exports=T}),62069:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e,a){return this.body.bounce.set(e,a),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,a,m,c){return this.body.setCollideWorldBounds(e,a,m,c),this}};s.exports=T}),78389:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79599),m={setCollisionCategory:function(c){var o=this.body?this.body:this;return o.collisionCategory=c,this},willCollideWith:function(c){var o=this.body?this.body:this;return(o.collisionMask&c)!==0},addCollidesWith:function(c){var o=this.body?this.body:this;return o.collisionMask=o.collisionMask|c,this},removeCollidesWith:function(c){var o=this.body?this.body:this;return o.collisionMask=o.collisionMask&~c,this},setCollidesWith:function(c){var o=this.body?this.body:this;return o.collisionMask=a(c),this},resetCollisionCategory:function(){var c=this.body?this.body:this;return c.collisionCategory=1,c.collisionMask=2147483647,this}};s.exports=m}),87118:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDebug:function(e,a,m){return this.debugShowBody=e,this.debugShowVelocity=a,this.debugBodyColor=m,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};s.exports=T}),52819:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDrag:function(e,a){return this.body.drag.set(e,a),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};s.exports=T}),4074:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDirectControl:function(e){return this.body.setDirectControl(e),this},enableBody:function(e,a,m,c,o){return e&&this.body.reset(a,m),c&&(this.body.gameObject.active=!0),o&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,a){return e===void 0&&(e=!1),a===void 0&&(a=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),a&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};s.exports=T}),40831:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,a){return this.body.friction.set(e,a),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};s.exports=T}),26775:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setGravity:function(e,a){return this.body.gravity.set(e,a),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};s.exports=T}),9437:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};s.exports=T}),30621:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setMass:function(e){return this.body.mass=e,this}};s.exports=T}),72441:((s,T,e)=>{var a=e(47956),m=e(96503),c=e(2044),o=e(81491),u=function(r,h,d,l,p,g){var x=a(r,h-l,d-l,2*l,2*l,p,g);if(x.length===0)return x;for(var y=new m(h,d,l),E=new m,w=[],C=0;C<x.length;C++){var A=x[C];A.isCircle?(E.setTo(A.center.x,A.center.y,A.halfWidth),c(y,E)&&w.push(A)):o(y,A)&&w.push(A)}return w};s.exports=u}),47956:(s=>{var T=function(e,a,m,c,o,u,r){u===void 0&&(u=!0),r===void 0&&(r=!1);var h=[],d=[],l=e.treeMinMax;if(l.minX=a,l.minY=m,l.maxX=a+c,l.maxY=m+o,r&&(d=e.staticTree.search(l)),u&&e.useTree)h=e.tree.search(l);else if(u){var p=e.bodies,g={position:{x:a,y:m},left:a,top:m,right:a+c,bottom:m+o,isCircle:!1},x=e.intersects;p.iterate(function(y){x(y,g)&&h.push(y)})}return d.concat(h)};s.exports=T}),62121:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};s.exports=T}),29384:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setOffset:function(e,a){return this.body.setOffset(e,a),this},setSize:function(e,a,m){return this.body.setSize(e,a,m),this},setBodySize:function(e,a,m){return this.body.setSize(e,a,m),this},setCircle:function(e,a,m){return this.body.setCircle(e,a,m),this}};s.exports=T}),15098:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setVelocity:function(e,a){return this.body.setVelocity(e,a),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,a){return this.body.maxVelocity.set(e,a),this}};s.exports=T}),92209:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Acceleration:e(1093),Angular:e(59023),Bounce:e(62069),Collision:e(78389),Debug:e(87118),Drag:e(52819),Enable:e(4074),Friction:e(40831),Gravity:e(26775),Immovable:e(9437),Mass:e(30621),OverlapCirc:e(72441),OverlapRect:e(47956),Pushable:e(62121),Size:e(29384),Velocity:e(15098)}}),37747:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};s.exports=T}),20009:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="collide"}),36768:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="overlap"}),60473:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),89954:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),61804:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="tilecollide"}),7161:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="tileoverlap"}),34689:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="worldbounds"}),16006:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="worldstep"}),63012:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={COLLIDE:e(20009),OVERLAP:e(36768),PAUSE:e(60473),RESUME:e(89954),TILE_COLLIDE:e(61804),TILE_OVERLAP:e(7161),WORLD_BOUNDS:e(34689),WORLD_STEP:e(16006)}}),27064:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37747),m=e(79291),c={ArcadePhysics:e(86689),Body:e(37742),Collider:e(79342),Components:e(92209),Events:e(63012),Factory:e(66022),GetCollidesWith:e(79599),GetOverlapX:e(64897),GetOverlapY:e(45170),SeparateX:e(14087),SeparateY:e(89936),Group:e(60758),Image:e(71289),Sprite:e(13759),StaticBody:e(72624),StaticGroup:e(71464),Tilemap:e(55173),World:e(82248)};c=m(!1,c,a),s.exports=c}),96602:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,a,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,a,e):!0};s.exports=T}),36294:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a<0?(e.blocked.none=!1,e.blocked.left=!0):a>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=a,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};s.exports=T}),67013:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a<0?(e.blocked.none=!1,e.blocked.up=!0):a>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=a,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};s.exports=T}),40012:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21329),m=e(53442),c=e(2483),o=function(u,r,h,d,l,p,g){var x=d.left,y=d.top,E=d.right,w=d.bottom,C=h.faceLeft||h.faceRight,A=h.faceTop||h.faceBottom;if(g||(C=!0,A=!0),!C&&!A)return!1;var M=0,R=0,P=0,b=1;if(r.deltaAbsX()>r.deltaAbsY()?P=-1:r.deltaAbsX()<r.deltaAbsY()&&(b=-1),r.deltaX()!==0&&r.deltaY()!==0&&C&&A&&(P=Math.min(Math.abs(r.position.x-E),Math.abs(r.right-x)),b=Math.min(Math.abs(r.position.y-w),Math.abs(r.bottom-y))),P<b){if(C&&(M=a(r,h,x,E,p,g),M!==0&&!c(d,r)))return!0;A&&(R=m(r,h,y,w,p,g))}else{if(A&&(R=m(r,h,y,w,p,g),R!==0&&!c(d,r)))return!0;C&&(M=a(r,h,x,E,p,g))}return M!==0||R!==0};s.exports=o}),21329:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36294),m=function(c,o,u,r,h,d){var l=0,p=o.faceLeft,g=o.faceRight,x=o.collideLeft,y=o.collideRight;return d||(p=!0,g=!0,x=!0,y=!0),c.deltaX()<0&&y&&c.checkCollision.left?g&&c.x<r&&(l=c.x-r,l<-h&&(l=0)):c.deltaX()>0&&x&&c.checkCollision.right&&p&&c.right>u&&(l=c.right-u,l>h&&(l=0)),l!==0&&(c.customSeparateX?c.overlapX=l:a(c,l)),l};s.exports=m}),53442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67013),m=function(c,o,u,r,h,d){var l=0,p=o.faceTop,g=o.faceBottom,x=o.collideUp,y=o.collideDown;return d||(p=!0,g=!0,x=!0,y=!0),c.deltaY()<0&&y&&c.checkCollision.up?g&&c.y<r&&(l=c.y-r,l<-h&&(l=0)):c.deltaY()>0&&x&&c.checkCollision.down&&p&&c.bottom>u&&(l=c.bottom-u,l>h&&(l=0)),l!==0&&(c.customSeparateY?c.overlapY=l:a(c,l)),l};s.exports=m}),2483:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return!(a.right<=e.left||a.bottom<=e.top||a.position.x>=e.right||a.position.y>=e.bottom)};s.exports=T}),55173:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ProcessTileCallbacks:e(96602),ProcessTileSeparationX:e(36294),ProcessTileSeparationY:e(67013),SeparateTile:e(40012),TileCheckX:e(21329),TileCheckY:e(53442),TileIntersectsBody:e(2483)};s.exports=a}),44563:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Arcade:e(27064),Matter:e(3875)}}),68174:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(26099),c=new a({initialize:function(){this.boundsCenter=new m,this.centerDiff=new m},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var u=this.boundsCenter,r=this.centerDiff,h=o.bounds.max.x-o.bounds.min.x,d=o.bounds.max.y-o.bounds.min.y,l=h*o.centerOfMass.x,p=d*o.centerOfMass.y;return u.set(h/2,d/2),r.set(l-u.x,p-u.y),!0},getTopLeft:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,d=this.centerDiff;return new m(u+h.x+d.x,r+h.y+d.y)}return!1},getTopCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,d=this.centerDiff;return new m(u+d.x,r+h.y+d.y)}return!1},getTopRight:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,d=this.centerDiff;return new m(u-(h.x-d.x),r+h.y+d.y)}return!1},getLeftCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,d=this.centerDiff;return new m(u+h.x+d.x,r+d.y)}return!1},getCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.centerDiff;return new m(u+h.x,r+h.y)}return!1},getRightCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,d=this.centerDiff;return new m(u-(h.x-d.x),r+d.y)}return!1},getBottomLeft:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,d=this.centerDiff;return new m(u+h.x+d.x,r-(h.y-d.y))}return!1},getBottomCenter:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,d=this.centerDiff;return new m(u+d.x,r-(h.y-d.y))}return!1},getBottomRight:function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),this.parseBody(o)){var h=this.boundsCenter,d=this.centerDiff;return new m(u-(h.x-d.x),r-(h.y-d.y))}return!1}});s.exports=c}),19933:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6790);a.Body=e(22562),a.Composite=e(69351),a.World=e(4372),a.Collision=e(52284),a.Detector=e(81388),a.Pairs=e(99561),a.Pair=e(4506),a.Query=e(73296),a.Resolver=e(66272),a.Constraint=e(48140),a.Common=e(53402),a.Engine=e(48413),a.Events=e(35810),a.Sleeping=e(53614),a.Plugin=e(73832),a.Bodies=e(66280),a.Composites=e(74116),a.Axes=e(66615),a.Bounds=e(15647),a.Svg=e(74058),a.Vector=e(31725),a.Vertices=e(41598),a.World.add=a.Composite.add,a.World.remove=a.Composite.remove,a.World.addComposite=a.Composite.addComposite,a.World.addBody=a.Composite.addBody,a.World.addConstraint=a.Composite.addConstraint,a.World.clear=a.Composite.clear,s.exports=a}),28137:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),m=e(83419),c=e(74116),o=e(48140),u=e(74058),r=e(75803),h=e(23181),d=e(34803),l=e(73834),p=e(19496),g=e(85791),x=e(98713),y=e(41598),E=new m({initialize:function(C){this.world=C,this.scene=C.scene,this.sys=C.scene.sys},rectangle:function(w,C,A,M,R){var P=a.rectangle(w,C,A,M,R);return this.world.add(P),P},trapezoid:function(w,C,A,M,R,P){var b=a.trapezoid(w,C,A,M,R,P);return this.world.add(b),b},circle:function(w,C,A,M,R){var P=a.circle(w,C,A,M,R);return this.world.add(P),P},polygon:function(w,C,A,M,R){var P=a.polygon(w,C,A,M,R);return this.world.add(P),P},fromVertices:function(w,C,A,M,R,P,b){typeof A=="string"&&(A=y.fromPath(A));var F=a.fromVertices(w,C,A,M,R,P,b);return this.world.add(F),F},fromPhysicsEditor:function(w,C,A,M,R){R===void 0&&(R=!0);var P=p.parseBody(w,C,A,M);return R&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(w,C,A,M,R,P){M===void 0&&(M=1),R===void 0&&(R={}),P===void 0&&(P=!0);for(var b=A.getElementsByTagName("path"),F=[],I=0;I<b.length;I++){var L=u.pathToVertices(b[I],30);M!==1&&y.scale(L,M,M),F.push(L)}var D=a.fromVertices(w,C,F,R);return P&&this.world.add(D),D},fromJSON:function(w,C,A,M,R){M===void 0&&(M={}),R===void 0&&(R=!0);var P=g.parseBody(w,C,A,M);return P&&R&&this.world.add(P),P},imageStack:function(w,C,A,M,R,P,b,F,I){b===void 0&&(b=0),F===void 0&&(F=0),I===void 0&&(I={});var L=this.world,D=this.sys.displayList;I.addToWorld=!1;var O=c.stack(A,M,R,P,b,F,function(z,W){var k=new h(L,z,W,w,C,I);return D.add(k),k.body});return L.add(O),O},stack:function(w,C,A,M,R,P,b){var F=c.stack(w,C,A,M,R,P,b);return this.world.add(F),F},pyramid:function(w,C,A,M,R,P,b){var F=c.pyramid(w,C,A,M,R,P,b);return this.world.add(F),F},chain:function(w,C,A,M,R,P){return c.chain(w,C,A,M,R,P)},mesh:function(w,C,A,M,R){return c.mesh(w,C,A,M,R)},newtonsCradle:function(w,C,A,M,R){var P=c.newtonsCradle(w,C,A,M,R);return this.world.add(P),P},car:function(w,C,A,M,R){var P=c.car(w,C,A,M,R);return this.world.add(P),P},softBody:function(w,C,A,M,R,P,b,F,I,L){var D=c.softBody(w,C,A,M,R,P,b,F,I,L);return this.world.add(D),D},joint:function(w,C,A,M,R){return this.constraint(w,C,A,M,R)},spring:function(w,C,A,M,R){return this.constraint(w,C,A,M,R)},constraint:function(w,C,A,M,R){M===void 0&&(M=1),R===void 0&&(R={}),R.bodyA=w.type==="body"?w:w.body,R.bodyB=C.type==="body"?C:C.body,isNaN(A)||(R.length=A),R.stiffness=M;var P=o.create(R);return this.world.add(P),P},worldConstraint:function(w,C,A,M){A===void 0&&(A=1),M===void 0&&(M={}),M.bodyB=w.type==="body"?w:w.body,isNaN(C)||(M.length=C),M.stiffness=A;var R=o.create(M);return this.world.add(R),R},mouseSpring:function(w){return this.pointerConstraint(w)},pointerConstraint:function(w){w===void 0&&(w={}),w.hasOwnProperty("render")||(w.render={visible:!1});var C=new x(this.scene,this.world,w);return this.world.add(C.constraint),C},image:function(w,C,A,M,R){var P=new h(this.world,w,C,A,M,R);return this.sys.displayList.add(P),P},tileBody:function(w,C){return new l(this.world,w,C)},sprite:function(w,C,A,M,R){var P=new d(this.world,w,C,A,M,R);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(w,C,A){return r(this.world,w,C,A)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});s.exports=E}),75803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31884),m=e(95540),c=e(26099);function o(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var u=function(r,h,d,l){d===void 0&&(d={}),l===void 0&&(l=!0);var p=h.x,g=h.y;h.body={temp:!0,position:{x:p,y:g}};var x=[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity];if(x.forEach(function(E){for(var w in E)o(E[w])?Object.defineProperty(h,w,{get:E[w].get,set:E[w].set}):Object.defineProperty(h,w,{value:E[w]})}),h.world=r,h._tempVec2=new c(p,g),d.hasOwnProperty("type")&&d.type==="body")h.setExistingBody(d,l);else{var y=m(d,"shape",null);y||(y="rectangle"),d.addToWorld=l,h.setBody(y,d)}return h};s.exports=u}),23181:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31884),c=e(95643),o=e(95540),u=e(88571),r=e(72699),h=e(26099),d=new a({Extends:u,Mixins:[m.Bounce,m.Collision,m.Force,m.Friction,m.Gravity,m.Mass,m.Sensor,m.SetBody,m.Sleep,m.Static,m.Transform,m.Velocity,r],initialize:function(p,g,x,y,E,w){c.call(this,p.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(y,E),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new h(g,x);var C=o(w,"shape",null);C?this.setBody(C,w):this.setRectangle(this.width,this.height,w),this.setPosition(g,x),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=d}),42045:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60461),m=e(66615),c=e(66280),o=e(22562),u=e(68174),r=e(15647),h=e(83419),d=e(52284),l=e(53402),p=e(69351),g=e(74116),x=e(48140),y=e(81388),E=e(20339),w=e(28137),C=e(95540),A=e(35154),M=e(46975),R=e(4506),P=e(99561),b=e(37277),F=e(73296),I=e(66272),L=e(44594),D=e(74058),O=e(31725),z=e(41598),W=e(68243);l.setDecomp(e(55973));var k=new h({initialize:function(V){this.scene=V,this.systems=V.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=p,this.collision=d,this.detector=y,this.pair=R,this.pairs=P,this.query=F,this.resolver=I,this.constraint=x,this.bodies=c,this.composites=g,this.axes=m,this.bounds=r,this.svg=D,this.vector=O,this.vertices=z,this.verts=z,this._tempVec2=O.create(),I._restingThresh=A(this.config,"restingThresh",4),I._restingThreshTangent=A(this.config,"restingThreshTangent",6),I._positionDampen=A(this.config,"positionDampen",.9),I._positionWarming=A(this.config,"positionWarming",.8),I._frictionNormalMultiplier=A(this.config,"frictionNormalMultiplier",5),V.sys.events.once(L.BOOT,this.boot,this),V.sys.events.on(L.START,this.start,this)},boot:function(){this.world=new W(this.scene,this.config),this.add=new w(this.world),this.bodyBounds=new u,this.systems.events.once(L.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new W(this.scene,this.config),this.add=new w(this.world));var X=this.systems.events;X.on(L.UPDATE,this.world.update,this.world),X.on(L.POST_UPDATE,this.world.postUpdate,this.world),X.once(L.SHUTDOWN,this.shutdown,this)},getConfig:function(){var X=this.systems.game.config.physics,V=this.systems.settings.physics,G=M(C(V,"matter",{}),C(X,"matter",{}));return G},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(X,V){this.world.step(X,V)},containsPoint:function(X,V,G){X=this.getMatterBodies(X);var N=O.create(V,G),H=F.point(X,N);return H.length>0},intersectPoint:function(X,V,G){G=this.getMatterBodies(G);var N=O.create(X,V),H=[],U=F.point(G,N);return U.forEach(function(_){H.indexOf(_)===-1&&H.push(_)}),H},intersectRect:function(X,V,G,N,H,U){H===void 0&&(H=!1),U=this.getMatterBodies(U);var _={min:{x:X,y:V},max:{x:X+G,y:V+N}},$=[],j=F.region(U,_,H);return j.forEach(function(Z){$.indexOf(Z)===-1&&$.push(Z)}),$},intersectRay:function(X,V,G,N,H,U){H===void 0&&(H=1),U=this.getMatterBodies(U);for(var _=[],$=F.ray(U,O.create(X,V),O.create(G,N),H),j=0;j<$.length;j++)_.push($[j].body);return _},intersectBody:function(X,V){V=this.getMatterBodies(V);for(var G=[],N=F.collides(X,V),H=0;H<N.length;H++){var U=N[H];U.bodyA===X?G.push(U.bodyB):G.push(U.bodyA)}return G},overlap:function(X,V,G,N,H){G===void 0&&(G=null),N===void 0&&(N=null),H===void 0&&(H=G),Array.isArray(X)||(X=[X]),X=this.getMatterBodies(X),V=this.getMatterBodies(V);for(var U=!1,_=0;_<X.length;_++)for(var $=X[_],j=F.collides($,V),Z=0;Z<j.length;Z++){var it=j[Z],at=it.bodyA.id===$.id?it.bodyB:it.bodyA;if(!N||N.call(H,$,at,it)){if(U=!0,G)G.call(H,$,at,it);else if(!N)return!0}}return U},setCollisionCategory:function(X,V){return X=this.getMatterBodies(X),X.forEach(function(G){G.collisionFilter.category=V}),this},setCollisionGroup:function(X,V){return X=this.getMatterBodies(X),X.forEach(function(G){G.collisionFilter.group=V}),this},setCollidesWith:function(X,V){X=this.getMatterBodies(X);var G=0;if(!Array.isArray(V))G=V;else for(var N=0;N<V.length;N++)G|=V[N];return X.forEach(function(H){H.collisionFilter.mask=G}),this},getMatterBodies:function(X){if(!X)return this.world.getAllBodies();Array.isArray(X)||(X=[X]);for(var V=[],G=0;G<X.length;G++){var N=X[G].hasOwnProperty("body")?X[G].body:X[G];V.push(N)}return V},setVelocity:function(X,V,G){X=this.getMatterBodies(X);var N=this._tempVec2;return N.x=V,N.y=G,X.forEach(function(H){o.setVelocity(H,N)}),this},setVelocityX:function(X,V){X=this.getMatterBodies(X);var G=this._tempVec2;return G.x=V,X.forEach(function(N){G.y=N.velocity.y,o.setVelocity(N,G)}),this},setVelocityY:function(X,V){X=this.getMatterBodies(X);var G=this._tempVec2;return G.y=V,X.forEach(function(N){G.x=N.velocity.x,o.setVelocity(N,G)}),this},setAngularVelocity:function(X,V){return X=this.getMatterBodies(X),X.forEach(function(G){o.setAngularVelocity(G,V)}),this},applyForce:function(X,V){X=this.getMatterBodies(X);var G=this._tempVec2;return X.forEach(function(N){G.x=N.position.x,G.y=N.position.y,o.applyForce(N,G,V)}),this},applyForceFromPosition:function(X,V,G,N){X=this.getMatterBodies(X);var H=this._tempVec2;return X.forEach(function(U){N===void 0&&(N=U.angle),H.x=G*Math.cos(N),H.y=G*Math.sin(N),o.applyForce(U,V,H)}),this},applyForceFromAngle:function(X,V,G){X=this.getMatterBodies(X);var N=this._tempVec2;return X.forEach(function(H){G===void 0&&(G=H.angle),N.x=V*Math.cos(G),N.y=V*Math.sin(G),o.applyForce(H,{x:H.position.x,y:H.position.y},N)}),this},getConstraintLength:function(X){var V=X.pointA.x,G=X.pointA.y,N=X.pointB.x,H=X.pointB.y;return X.bodyA&&(V+=X.bodyA.position.x,G+=X.bodyA.position.y),X.bodyB&&(N+=X.bodyB.position.x,H+=X.bodyB.position.y),E(V,G,N,H)},alignBody:function(X,V,G,N){X=X.hasOwnProperty("body")?X.body:X;var H;switch(N){case a.TOP_LEFT:case a.LEFT_TOP:H=this.bodyBounds.getTopLeft(X,V,G);break;case a.TOP_CENTER:H=this.bodyBounds.getTopCenter(X,V,G);break;case a.TOP_RIGHT:case a.RIGHT_TOP:H=this.bodyBounds.getTopRight(X,V,G);break;case a.LEFT_CENTER:H=this.bodyBounds.getLeftCenter(X,V,G);break;case a.CENTER:H=this.bodyBounds.getCenter(X,V,G);break;case a.RIGHT_CENTER:H=this.bodyBounds.getRightCenter(X,V,G);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:H=this.bodyBounds.getBottomLeft(X,V,G);break;case a.BOTTOM_CENTER:H=this.bodyBounds.getBottomCenter(X,V,G);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:H=this.bodyBounds.getBottomRight(X,V,G);break}return H&&o.setPosition(X,H),this},shutdown:function(){var X=this.systems.events;this.world&&(X.off(L.UPDATE,this.world.update,this.world),X.off(L.POST_UPDATE,this.world.postUpdate,this.world)),X.off(L.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(L.START,this.start,this),this.scene=null,this.systems=null}});b.register("MatterPhysics",k,"matterPhysics"),s.exports=k}),34803:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9674),m=e(83419),c=e(31884),o=e(95643),u=e(95540),r=e(72699),h=e(68287),d=e(26099),l=new m({Extends:h,Mixins:[c.Bounce,c.Collision,c.Force,c.Friction,c.Gravity,c.Mass,c.Sensor,c.SetBody,c.Sleep,c.Static,c.Transform,c.Velocity,r],initialize:function(g,x,y,E,w,C){o.call(this,g.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(E,w),this.setSizeToFrame(),this.setOrigin(),this.world=g,this._tempVec2=new d(x,y);var A=u(C,"shape",null);A?this.setBody(A,C):this.setRectangle(this.width,this.height,C),this.setPosition(x,y),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=l}),73834:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),m=e(22562),c=e(83419),o=e(31884),u=e(62644),r=e(50792),h=e(95540),d=e(97022),l=e(41598),p=new c({Extends:r,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(x,y,E){r.call(this),this.tile=y,this.world=x,y.physics.matterBody&&y.physics.matterBody.destroy(),y.physics.matterBody=this;var w=h(E,"body",null),C=h(E,"addToWorld",!0);if(w)this.setBody(w,C);else{var A=y.getCollisionGroup(),M=h(A,"objects",[]);M.length>0?this.setFromTileCollision(E):this.setFromTileRectangle(E)}if(y.flipX||y.flipY){var R={x:y.getCenterX(),y:y.getCenterY()},P=y.flipX?-1:1,b=y.flipY?-1:1;m.scale(w,P,b,R)}},setFromTileRectangle:function(g){g===void 0&&(g={}),d(g,"isStatic")||(g.isStatic=!0),d(g,"addToWorld")||(g.addToWorld=!0);var x=this.tile.getBounds(),y=x.x+x.width/2,E=x.y+x.height/2,w=a.rectangle(y,E,x.width,x.height,g);return this.setBody(w,g.addToWorld),this},setFromTileCollision:function(g){g===void 0&&(g={}),d(g,"isStatic")||(g.isStatic=!0),d(g,"addToWorld")||(g.addToWorld=!0);for(var x=this.tile.tilemapLayer.scaleX,y=this.tile.tilemapLayer.scaleY,E=this.tile.getLeft(),w=this.tile.getTop(),C=this.tile.getCollisionGroup(),A=h(C,"objects",[]),M=[],R=0;R<A.length;R++){var P=A[R],b=E+P.x*x,F=w+P.y*y,I=P.width*x,L=P.height*y,D=null;if(P.rectangle)D=a.rectangle(b+I/2,F+L/2,I,L,g);else if(P.ellipse)D=a.circle(b+I/2,F+L/2,I/2,g);else if(P.polygon||P.polyline){var O=P.polygon?P.polygon:P.polyline,z=O.map(function(V){return{x:V.x*x,y:V.y*y}}),W=l.create(z),k=l.centre(W);b+=k.x,F+=k.y,D=a.fromVertices(b,F,W,g)}D&&M.push(D)}if(M.length===1)this.setBody(M[0],g.addToWorld);else if(M.length>1){var X=u(g);X.parts=M,this.setBody(m.create(X),X.addToWorld)}return this},setBody:function(g,x){return x===void 0&&(x=!0),this.body&&this.removeBody(),this.body=g,this.body.gameObject=this,x&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});s.exports=p}),19496:((s,T,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),m=e(22562),c=e(53402),o=e(95540),u=e(41598),r={parseBody:function(h,d,l,p){p===void 0&&(p={});for(var g=o(l,"fixtures",[]),x=[],y=0;y<g.length;y++)for(var E=this.parseFixture(g[y]),w=0;w<E.length;w++)x.push(E[w]);var C=c.clone(l,!0);c.extend(C,p,!0),delete C.fixtures,delete C.type;var A=m.create(C);return m.setParts(A,x),m.setPosition(A,{x:h,y:d}),A},parseFixture:function(h){var d=c.extend({},!1,h);delete d.circle,delete d.vertices;var l;if(h.circle){var p=o(h.circle,"x"),g=o(h.circle,"y"),x=o(h.circle,"radius");l=[a.circle(p,g,x,d)]}else h.vertices&&(l=this.parseVertices(h.vertices,d));return l},parseVertices:function(h,d){d===void 0&&(d={});for(var l=[],p=0;p<h.length;p++)u.clockwiseSort(h[p]),l.push(m.create(c.extend({position:u.centre(h[p]),vertices:h[p]},d)));return a.flagCoincidentParts(l)}};s.exports=r}),85791:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),m=e(22562),c={parseBody:function(o,u,r,h){h===void 0&&(h={});var d,l=r.vertices;if(l.length===1)h.vertices=l[0],d=m.create(h),a.flagCoincidentParts(d.parts);else{for(var p=[],g=0;g<l.length;g++){var x=m.create({vertices:l[g]});p.push(x)}a.flagCoincidentParts(p),h.parts=p,d=m.create(h)}return d.label=r.label,m.setPosition(d,{x:o,y:u}),d}};s.exports=c}),98713:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15647),m=e(83419),c=e(69351),o=e(48140),u=e(81388),r=e(1121),h=e(8214),d=e(46975),l=e(53614),p=e(26099),g=e(41598),x=new m({initialize:function(E,w,C){C===void 0&&(C={});var A={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=E,this.world=w,this.camera=null,this.pointer=null,this.active=!0,this.position=new p,this.body=null,this.part=null,this.constraint=o.create(d(C,A)),this.world.on(r.BEFORE_UPDATE,this.update,this),E.sys.input.on(h.POINTER_DOWN,this.onDown,this),E.sys.input.on(h.POINTER_UP,this.onUp,this)},onDown:function(y){this.pointer||(this.pointer=y,this.camera=y.camera)},onUp:function(y){y===this.pointer&&(this.pointer=null)},getBody:function(y){var E=this.position,w=this.constraint;this.camera.getWorldPoint(y.x,y.y,E);for(var C=c.allBodies(this.world.localWorld),A=0;A<C.length;A++){var M=C[A];if(!M.ignorePointer&&a.contains(M.bounds,E)&&u.canCollide(M.collisionFilter,w.collisionFilter)&&this.hitTestBody(M,E))return this.world.emit(r.DRAG_START,M,this.part,this),!0}return!1},hitTestBody:function(y,E){for(var w=this.constraint,C=y.parts.length,A=C>1?1:0,M=A;M<C;M++){var R=y.parts[M];if(g.contains(R.vertices,E))return w.pointA=E,w.pointB={x:E.x-y.position.x,y:E.y-y.position.y},w.bodyB=y,w.angleB=y.angle,l.set(y,!1),this.part=R,this.body=y,!0}return!1},update:function(){var y=this.pointer,E=this.body;if(!this.active||!y){E&&this.stopDrag();return}if(!y.isDown&&E){this.stopDrag();return}else if(y.isDown){if(!this.camera||!E&&!this.getBody(y))return;E=this.body;var w=this.position,C=this.constraint;this.camera.getWorldPoint(y.x,y.y,w),C.pointA.x=w.x,C.pointA.y=w.y,l.set(E,!1),this.world.emit(r.DRAG,E,this)}},stopDrag:function(){var y=this.body,E=this.constraint;E.bodyB=null,E.pointB=null,this.pointer=null,this.body=null,this.part=null,y&&this.world.emit(r.DRAG_END,y,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(h.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(h.POINTER_UP,this.onUp,this)}});s.exports=x}),68243:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),m=e(22562),c=e(83419),o=e(53402),u=e(69351),r=e(48413),h=e(50792),d=e(1121),l=e(95540),p=e(35154),g=e(22562),x=e(35810),y=e(73834),E=e(4372),w=e(13037),C=e(31725),A=new c({Extends:h,initialize:function(R,P){h.call(this),this.scene=R,this.engine=r.create(P),this.localWorld=this.engine.world;var b=p(P,"gravity",null);b?this.setGravity(b.x,b.y,b.scale):b===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=p(P,"enabled",!0),this.getDelta=p(P,"getDelta",this.update60Hz);var F=l(P,"runner",{}),I=l(F,"fps",!1);I&&(F.delta=1e3/l(F,"fps",60)),this.runner=w.create(F),this.autoUpdate=p(P,"autoUpdate",!0);var L=p(P,"debug",!1);if(this.drawDebug=typeof L=="object"?!0:L,this.debugGraphic,this.debugConfig={showAxes:l(L,"showAxes",!1),showAngleIndicator:l(L,"showAngleIndicator",!1),angleColor:l(L,"angleColor",15208787),showBroadphase:l(L,"showBroadphase",!1),broadphaseColor:l(L,"broadphaseColor",16757760),showBounds:l(L,"showBounds",!1),boundsColor:l(L,"boundsColor",16777215),showVelocity:l(L,"showVelocity",!1),velocityColor:l(L,"velocityColor",44783),showCollisions:l(L,"showCollisions",!1),collisionColor:l(L,"collisionColor",16094476),showSeparations:l(L,"showSeparations",!1),separationColor:l(L,"separationColor",16753920),showBody:l(L,"showBody",!0),showStaticBody:l(L,"showStaticBody",!0),showInternalEdges:l(L,"showInternalEdges",!1),renderFill:l(L,"renderFill",!1),renderLine:l(L,"renderLine",!0),fillColor:l(L,"fillColor",1075465),fillOpacity:l(L,"fillOpacity",1),lineColor:l(L,"lineColor",2678297),lineOpacity:l(L,"lineOpacity",1),lineThickness:l(L,"lineThickness",1),staticFillColor:l(L,"staticFillColor",857979),staticLineColor:l(L,"staticLineColor",1255396),showSleeping:l(L,"showSleeping",!1),staticBodySleepOpacity:l(L,"staticBodySleepOpacity",.7),sleepFillColor:l(L,"sleepFillColor",4605510),sleepLineColor:l(L,"sleepLineColor",10066585),showSensors:l(L,"showSensors",!0),sensorFillColor:l(L,"sensorFillColor",857979),sensorLineColor:l(L,"sensorLineColor",1255396),showPositions:l(L,"showPositions",!0),positionSize:l(L,"positionSize",4),positionColor:l(L,"positionColor",14697178),showJoint:l(L,"showJoint",!0),jointColor:l(L,"jointColor",14737474),jointLineOpacity:l(L,"jointLineOpacity",1),jointLineThickness:l(L,"jointLineThickness",2),pinSize:l(L,"pinSize",4),pinColor:l(L,"pinColor",4382944),springColor:l(L,"springColor",14697184),anchorColor:l(L,"anchorColor",15724527),anchorSize:l(L,"anchorSize",4),showConvexHulls:l(L,"showConvexHulls",!1),hullColor:l(L,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),l(P,"setBounds",!1)){var D=P.setBounds;if(typeof D=="boolean")this.setBounds();else{var O=l(D,"x",0),z=l(D,"y",0),W=l(D,"width",R.sys.scale.width),k=l(D,"height",R.sys.scale.height),X=l(D,"thickness",64),V=l(D,"left",!0),G=l(D,"right",!0),N=l(D,"top",!0),H=l(D,"bottom",!0);this.setBounds(O,z,W,k,X,V,G,N,H)}}},setCompositeRenderStyle:function(M){var R=M.bodies,P=M.constraints,b=M.composites,F,I,L;for(F=0;F<R.length;F++)I=R[F],L=I.render,this.setBodyRenderStyle(I,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity);for(F=0;F<P.length;F++)I=P[F],L=I.render,this.setConstraintRenderStyle(I,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize);for(F=0;F<b.length;F++)I=b[F],this.setCompositeRenderStyle(I);return this},setBodyRenderStyle:function(M,R,P,b,F,I){var L=M.render,D=this.debugConfig;return L?(R==null&&(R=M.isStatic?D.staticLineColor:D.lineColor),P==null&&(P=D.lineOpacity),b==null&&(b=D.lineThickness),F==null&&(F=M.isStatic?D.staticFillColor:D.fillColor),I==null&&(I=D.fillOpacity),R!==!1&&(L.lineColor=R),P!==!1&&(L.lineOpacity=P),b!==!1&&(L.lineThickness=b),F!==!1&&(L.fillColor=F),I!==!1&&(L.fillOpacity=I),this):this},setConstraintRenderStyle:function(M,R,P,b,F,I,L){var D=M.render,O=this.debugConfig;if(!D)return this;if(R==null){var z=D.type;z==="line"?R=O.jointColor:z==="pin"?R=O.pinColor:z==="spring"&&(R=O.springColor)}return P==null&&(P=O.jointLineOpacity),b==null&&(b=O.jointLineThickness),F==null&&(F=O.pinSize),I==null&&(I=O.anchorColor),L==null&&(L=O.anchorSize),R!==!1&&(D.lineColor=R),P!==!1&&(D.lineOpacity=P),b!==!1&&(D.lineThickness=b),F!==!1&&(D.pinSize=F),I!==!1&&(D.anchorColor=I),L!==!1&&(D.anchorSize=L),this},setEventsProxy:function(){var M=this,R=this.engine,P=this.localWorld;this.drawDebug&&(x.on(P,"compositeModified",function(b){M.setCompositeRenderStyle(b)}),x.on(P,"beforeAdd",function(b){for(var F=[].concat(b.object),I=0;I<F.length;I++){var L=F[I],D=L.render;L.type==="body"?M.setBodyRenderStyle(L,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):L.type==="composite"?M.setCompositeRenderStyle(L):L.type==="constraint"&&M.setConstraintRenderStyle(L,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),x.on(P,"beforeAdd",function(b){M.emit(d.BEFORE_ADD,b)}),x.on(P,"afterAdd",function(b){M.emit(d.AFTER_ADD,b)}),x.on(P,"beforeRemove",function(b){M.emit(d.BEFORE_REMOVE,b)}),x.on(P,"afterRemove",function(b){M.emit(d.AFTER_REMOVE,b)}),x.on(R,"beforeUpdate",function(b){M.emit(d.BEFORE_UPDATE,b)}),x.on(R,"afterUpdate",function(b){M.emit(d.AFTER_UPDATE,b)}),x.on(R,"collisionStart",function(b){var F=b.pairs,I,L;F.length>0&&F.map(function(D){I=D.bodyA,L=D.bodyB,I.gameObject&&I.gameObject.emit("collide",I,L,D),L.gameObject&&L.gameObject.emit("collide",L,I,D),x.trigger(I,"onCollide",{pair:D}),x.trigger(L,"onCollide",{pair:D}),I.onCollideCallback&&I.onCollideCallback(D),L.onCollideCallback&&L.onCollideCallback(D),I.onCollideWith[L.id]&&I.onCollideWith[L.id](L,D),L.onCollideWith[I.id]&&L.onCollideWith[I.id](I,D)}),M.emit(d.COLLISION_START,b,I,L)}),x.on(R,"collisionActive",function(b){var F=b.pairs,I,L;F.length>0&&F.map(function(D){I=D.bodyA,L=D.bodyB,I.gameObject&&I.gameObject.emit("collideActive",I,L,D),L.gameObject&&L.gameObject.emit("collideActive",L,I,D),x.trigger(I,"onCollideActive",{pair:D}),x.trigger(L,"onCollideActive",{pair:D}),I.onCollideActiveCallback&&I.onCollideActiveCallback(D),L.onCollideActiveCallback&&L.onCollideActiveCallback(D)}),M.emit(d.COLLISION_ACTIVE,b,I,L)}),x.on(R,"collisionEnd",function(b){var F=b.pairs,I,L;F.length>0&&F.map(function(D){I=D.bodyA,L=D.bodyB,I.gameObject&&I.gameObject.emit("collideEnd",I,L,D),L.gameObject&&L.gameObject.emit("collideEnd",L,I,D),x.trigger(I,"onCollideEnd",{pair:D}),x.trigger(L,"onCollideEnd",{pair:D}),I.onCollideEndCallback&&I.onCollideEndCallback(D),L.onCollideEndCallback&&L.onCollideEndCallback(D)}),M.emit(d.COLLISION_END,b,I,L)})},setBounds:function(M,R,P,b,F,I,L,D,O){return M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P=this.scene.sys.scale.width),b===void 0&&(b=this.scene.sys.scale.height),F===void 0&&(F=64),I===void 0&&(I=!0),L===void 0&&(L=!0),D===void 0&&(D=!0),O===void 0&&(O=!0),this.updateWall(I,"left",M-F,R-F,F,b+F*2),this.updateWall(L,"right",M+P,R-F,F,b+F*2),this.updateWall(D,"top",M,R-F,P,F),this.updateWall(O,"bottom",M,R+b,P,F),this},updateWall:function(M,R,P,b,F,I){var L=this.walls[R];M?(L&&E.remove(this.localWorld,L),P+=F/2,b+=I/2,this.walls[R]=this.create(P,b,F,I,{isStatic:!0,friction:0,frictionStatic:0})):(L&&E.remove(this.localWorld,L),this.walls[R]=null)},createDebugGraphic:function(){var M=this.scene.sys.add.graphics({x:0,y:0});return M.setDepth(Number.MAX_VALUE),this.debugGraphic=M,this.drawDebug=!0,M},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(M,R,P){return M===void 0&&(M=0),R===void 0&&(R=1),P===void 0&&(P=.001),this.localWorld.gravity.x=M,this.localWorld.gravity.y=R,this.localWorld.gravity.scale=P,this},create:function(M,R,P,b,F){var I=a.rectangle(M,R,P,b,F);return E.add(this.localWorld,I),I},add:function(M){return E.add(this.localWorld,M),this},remove:function(M,R){Array.isArray(M)||(M=[M]);for(var P=0;P<M.length;P++){var b=M[P],F=b.body?b.body:b;u.remove(this.localWorld,F,R)}return this},removeConstraint:function(M,R){return u.remove(this.localWorld,M,R),this},convertTilemapLayer:function(M,R){var P=M.layer,b=M.getTilesWithin(0,0,P.width,P.height,{isColliding:!0});return this.convertTiles(b,R),this},convertTiles:function(M,R){if(M.length===0)return this;for(var P=0;P<M.length;P++)new y(this,M[P],R);return this},nextGroup:function(M){return g.nextGroup(M)},nextCategory:function(){return g.nextCategory()},pause:function(){return this.enabled=!1,this.emit(d.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=o.now(),this.emit(d.RESUME),this},update:function(M){if(!(!this.enabled||!this.autoUpdate)){var R=this.engine,P=this.runner,b=o.now(),F=P.delta,I=0,L=M-P.timeLastTick;if((!L||!P.timeLastTick||L>Math.max(w._maxFrameDelta,P.maxFrameTime))&&(L=P.frameDelta||w._frameDeltaFallback),P.frameDeltaSmoothing){P.frameDeltaHistory.push(L),P.frameDeltaHistory=P.frameDeltaHistory.slice(-P.frameDeltaHistorySize);var D=P.frameDeltaHistory.slice(0).sort(),O=P.frameDeltaHistory.slice(D.length*w._smoothingLowerBound,D.length*w._smoothingUpperBound),z=w._mean(O);L=z||L}P.frameDeltaSnapping&&(L=1e3/Math.round(1e3/L)),P.frameDelta=L,P.timeLastTick=M,P.timeBuffer+=P.frameDelta,P.timeBuffer=o.clamp(P.timeBuffer,0,P.frameDelta+F*w._timeBufferMargin),P.lastUpdatesDeferred=0;for(var W=P.maxUpdates||Math.ceil(P.maxFrameTime/F),k=o.now();F>0&&P.timeBuffer>=F*w._timeBufferMargin;){r.update(R,F),P.timeBuffer-=F,I+=1;var X=o.now()-b,V=o.now()-k,G=X+w._elapsedNextEstimate*V/I;if(I>=W||G>P.maxFrameTime){P.lastUpdatesDeferred=Math.round(Math.max(0,P.timeBuffer/F-w._timeBufferMargin));break}}}},step:function(M){r.update(this.engine,M)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(M){var R=M.hasOwnProperty("body")?M.body:M;return u.get(this.localWorld,R.id,R.type)!==null},getAllBodies:function(){return u.allBodies(this.localWorld)},getAllConstraints:function(){return u.allConstraints(this.localWorld)},getAllComposites:function(){return u.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var M=this.debugConfig,R=this.engine,P=this.debugGraphic,b=u.allBodies(this.localWorld);this.debugGraphic.clear(),M.showBroadphase&&R.broadphase.controller&&this.renderGrid(R.broadphase,P,M.broadphaseColor,.5),M.showBounds&&this.renderBodyBounds(b,P,M.boundsColor,.5),(M.showBody||M.showStaticBody)&&this.renderBodies(b),M.showJoint&&this.renderJoints(),(M.showAxes||M.showAngleIndicator)&&this.renderBodyAxes(b,P,M.showAxes,M.angleColor,.5),M.showVelocity&&this.renderBodyVelocity(b,P,M.velocityColor,1,2),M.showSeparations&&this.renderSeparations(R.pairs.list,P,M.separationColor),M.showCollisions&&this.renderCollisions(R.pairs.list,P,M.collisionColor)}},renderGrid:function(M,R,P,b){R.lineStyle(1,P,b);for(var F=o.keys(M.buckets),I=0;I<F.length;I++){var L=F[I];if(!(M.buckets[L].length<2)){var D=L.split(/C|R/);R.strokeRect(parseInt(D[1],10)*M.bucketWidth,parseInt(D[2],10)*M.bucketHeight,M.bucketWidth,M.bucketHeight)}}return this},renderSeparations:function(M,R,P){R.lineStyle(1,P,1);for(var b=0;b<M.length;b++){var F=M[b];if(F.isActive){var I=F.collision,L=I.bodyA,D=I.bodyB,O=L.position,z=D.position,W=I.penetration,k=!L.isStatic&&!D.isStatic?4:1;D.isStatic&&(k=0),R.lineBetween(z.x,z.y,z.x-W.x*k,z.y-W.y*k),k=!L.isStatic&&!D.isStatic?4:1,L.isStatic&&(k=0),R.lineBetween(O.x,O.y,O.x-W.x*k,O.y-W.y*k)}}return this},renderCollisions:function(M,R,P){R.lineStyle(1,P,.5),R.fillStyle(P,1);var b,F;for(b=0;b<M.length;b++)if(F=M[b],!!F.isActive)for(var I=0;I<F.contactCount;I++){var L=F.contacts[I],D=L.vertex;D&&R.fillRect(D.x-2,D.y-2,5,5)}for(b=0;b<M.length;b++)if(F=M[b],!!F.isActive){var O=F.collision,z=F.contacts;if(F.contactCount>0){var W=z[0].vertex.x,k=z[0].vertex.y;F.contactCount===2&&(W=(z[0].vertex.x+z[1].vertex.x)/2,k=(z[0].vertex.y+z[1].vertex.y)/2),O.bodyB===O.supports[0].body||O.bodyA.isStatic?R.lineBetween(W-O.normal.x*8,k-O.normal.y*8,W,k):R.lineBetween(W+O.normal.x*8,k+O.normal.y*8,W,k)}}return this},renderBodyBounds:function(M,R,P,b){R.lineStyle(1,P,b);for(var F=0;F<M.length;F++){var I=M[F];if(I.render.visible){var L=I.bounds;if(L)R.strokeRect(L.min.x,L.min.y,L.max.x-L.min.x,L.max.y-L.min.y);else for(var D=I.parts,O=D.length>1?1:0;O<D.length;O++){var z=D[O];R.strokeRect(z.bounds.min.x,z.bounds.min.y,z.bounds.max.x-z.bounds.min.x,z.bounds.max.y-z.bounds.min.y)}}}return this},renderBodyAxes:function(M,R,P,b,F){R.lineStyle(1,b,F);for(var I=0;I<M.length;I++){var L=M[I],D=L.parts;if(L.render.visible){var O,z,W;if(P)for(z=D.length>1?1:0;z<D.length;z++)for(O=D[z],W=0;W<O.axes.length;W++){var k=O.axes[W];R.lineBetween(O.position.x,O.position.y,O.position.x+k.x*20,O.position.y+k.y*20)}else for(z=D.length>1?1:0;z<D.length;z++)for(O=D[z],W=0;W<O.axes.length;W++)R.lineBetween(O.position.x,O.position.y,(O.vertices[0].x+O.vertices[O.vertices.length-1].x)/2,(O.vertices[0].y+O.vertices[O.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(M,R,P,b,F){R.lineStyle(F,P,b);for(var I=0;I<M.length;I++){var L=M[I];L.render.visible&&R.lineBetween(L.position.x,L.position.y,L.position.x+(L.position.x-L.positionPrev.x)*2,L.position.y+(L.position.y-L.positionPrev.y)*2)}return this},renderBodies:function(M){for(var R=this.debugGraphic,P=this.debugConfig,b=P.showBody,F=P.showStaticBody,I=P.showSleeping,L=P.showInternalEdges,D=P.showConvexHulls,O=P.renderFill,z=P.renderLine,W=P.staticBodySleepOpacity,k=P.sleepFillColor,X=P.sleepLineColor,V=P.hullColor,G=0;G<M.length;G++){var N=M[G];if(N.render.visible&&!(!F&&N.isStatic||!b&&!N.isStatic)){var H=N.render.lineColor,U=N.render.lineOpacity,_=N.render.lineThickness,$=N.render.fillColor,j=N.render.fillOpacity;I&&N.isSleeping&&(N.isStatic?(U*=W,j*=W):(H=X,$=k)),O||($=null),z||(H=null),this.renderBody(N,R,L,H,U,_,$,j);var Z=N.parts.length;D&&Z>1&&this.renderConvexHull(N,R,V,_)}}},renderBody:function(M,R,P,b,F,I,L,D){b===void 0&&(b=null),F===void 0&&(F=null),I===void 0&&(I=1),L===void 0&&(L=null),D===void 0&&(D=null);for(var O=this.debugConfig,z=O.sensorFillColor,W=O.sensorLineColor,k=M.parts,X=k.length,V=X>1?1:0;V<X;V++){var G=k[V],N=G.render,H=N.opacity;if(!(!N.visible||H===0||G.isSensor&&!O.showSensors)){var U=G.circleRadius;if(R.beginPath(),G.isSensor?(L!==null&&R.fillStyle(z,D*H),b!==null&&R.lineStyle(I,W,F*H)):(L!==null&&R.fillStyle(L,D*H),b!==null&&R.lineStyle(I,b,F*H)),U)R.arc(G.position.x,G.position.y,U,0,2*Math.PI);else{var _=G.vertices,$=_.length;R.moveTo(_[0].x,_[0].y);for(var j=1;j<$;j++){var Z=_[j];if(!_[j-1].isInternal||P?R.lineTo(Z.x,Z.y):R.moveTo(Z.x,Z.y),j<$&&Z.isInternal&&!P){var it=(j+1)%$;R.moveTo(_[it].x,_[it].y)}}R.closePath()}L!==null&&R.fillPath(),b!==null&&R.strokePath()}}if(O.showPositions&&!M.isStatic){var at=M.position.x,q=M.position.y,ft=Math.ceil(O.positionSize/2);R.fillStyle(O.positionColor,1),R.fillRect(at-ft,q-ft,O.positionSize,O.positionSize)}return this},renderConvexHull:function(M,R,P,b){b===void 0&&(b=1);var F=M.parts,I=F.length;if(I>1){var L=M.vertices;R.lineStyle(b,P),R.beginPath(),R.moveTo(L[0].x,L[0].y);for(var D=1;D<L.length;D++)R.lineTo(L[D].x,L[D].y);R.lineTo(L[0].x,L[0].y),R.strokePath()}return this},renderJoints:function(){for(var M=this.debugGraphic,R=u.allConstraints(this.localWorld),P=0;P<R.length;P++){var b=R[P].render,F=b.lineColor,I=b.lineOpacity,L=b.lineThickness,D=b.pinSize,O=b.anchorColor,z=b.anchorSize;this.renderConstraint(R[P],M,F,I,L,D,O,z)}},renderConstraint:function(M,R,P,b,F,I,L,D){var O=M.render;if(!O.visible||!M.pointA||!M.pointB)return this;R.lineStyle(F,P,b);var z=M.bodyA,W=M.bodyB,k,X;if(z?k=C.add(z.position,M.pointA):k=M.pointA,O.type==="pin")R.strokeCircle(k.x,k.y,I);else{if(W?X=C.add(W.position,M.pointB):X=M.pointB,R.beginPath(),R.moveTo(k.x,k.y),O.type==="spring")for(var V=C.sub(X,k),G=C.perp(C.normalise(V)),N=Math.ceil(o.clamp(M.length/5,12,20)),H,U=1;U<N;U+=1)H=U%2===0?1:-1,R.lineTo(k.x+V.x*(U/N)+G.x*H*4,k.y+V.y*(U/N)+G.y*H*4);R.lineTo(X.x,X.y)}return R.strokePath(),O.anchors&&D>0&&(R.fillStyle(L),R.fillCircle(k.x,k.y,D),R.fillCircle(X.x,X.y,D)),this},resetCollisionIDs:function(){return m._nextCollidingGroupId=1,m._nextNonCollidingGroupId=-1,m._nextCategory=1,this},shutdown:function(){x.off(this.engine),this.removeAllListeners(),E.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});s.exports=A}),70410:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e){return this.body.restitution=e,this}};s.exports=T}),66968:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var a=0;if(!Array.isArray(e))a=e;else for(var m=0;m<e.length;m++)a|=e[m];return this.body.collisionFilter.mask=a,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,a){Array.isArray(e)||(e=[e]);for(var m=0;m<e.length;m++){var c=e[m].hasOwnProperty("body")?e[m].body:e[m];this.body.setOnCollideWith(c,a)}return this}};s.exports=T}),51607:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),m={applyForce:function(c){return this._tempVec2.set(this.body.position.x,this.body.position.y),a.applyForce(this.body,this._tempVec2,c),this},applyForceFrom:function(c,o){return a.applyForce(this.body,c,o),this},thrust:function(c){var o=this.body.angle;return this._tempVec2.set(c*Math.cos(o),c*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(c){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(c*Math.cos(o),c*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(c){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(c*Math.cos(o),c*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(c){var o=this.body.angle-Math.PI;return this._tempVec2.set(c*Math.cos(o),c*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};s.exports=m}),5436:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,a,m){return this.body.friction=e,a!==void 0&&(this.body.frictionAir=a),m!==void 0&&(this.body.frictionStatic=m),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};s.exports=T}),39858:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};s.exports=T}),37302:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),m=e(26099),c={setMass:function(o){return a.setMass(this.body,o),this},setDensity:function(o){return a.setDensity(this.body,o),this},centerOfMass:{get:function(){return new m(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};s.exports=c}),39132:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};s.exports=T}),57772:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66280),m=e(22562),c=e(43855),o=e(95540),u=e(19496),r=e(85791),h=e(41598),d={setRectangle:function(l,p,g){return this.setBody({type:"rectangle",width:l,height:p},g)},setCircle:function(l,p){return this.setBody({type:"circle",radius:l},p)},setPolygon:function(l,p,g){return this.setBody({type:"polygon",sides:p,radius:l},g)},setTrapezoid:function(l,p,g,x){return this.setBody({type:"trapezoid",width:l,height:p,slope:g},x)},setExistingBody:function(l,p){p===void 0&&(p=!0),this.body&&this.world.remove(this.body,!0),this.body=l;for(var g=0;g<l.parts.length;g++)l.parts[g].gameObject=this;var x=this;if(l.destroy=function(){x.world.remove(x.body,!0),x.body.gameObject=null},p&&(this.world.has(l)&&this.world.remove(l,!0),this.world.add(l)),this._originComponent){var y=l.render.sprite.xOffset,E=l.render.sprite.yOffset,w=l.centerOfMass.x,C=l.centerOfMass.y;if(c(w,.5)&&c(C,.5))this.setOrigin(y+.5,E+.5);else{var A=l.centerOffset.x,M=l.centerOffset.y;this.setOrigin(y+A/this.displayWidth,E+M/this.displayHeight)}}return this},setBody:function(l,p){if(!l)return this;var g;typeof l=="string"&&(l={type:l});var x=o(l,"type","rectangle"),y=o(l,"x",this._tempVec2.x),E=o(l,"y",this._tempVec2.y),w=o(l,"width",this.width),C=o(l,"height",this.height);switch(x){case"rectangle":g=a.rectangle(y,E,w,C,p);break;case"circle":var A=o(l,"radius",Math.max(w,C)/2),M=o(l,"maxSides",25);g=a.circle(y,E,A,p,M);break;case"trapezoid":var R=o(l,"slope",.5);g=a.trapezoid(y,E,w,C,R,p);break;case"polygon":var P=o(l,"sides",5),b=o(l,"radius",Math.max(w,C)/2);g=a.polygon(y,E,P,b,p);break;case"fromVertices":case"fromVerts":var F=o(l,"verts",null);if(F)if(typeof F=="string"&&(F=h.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))m.setVertices(this.body,F),g=this.body;else{var I=o(l,"flagInternal",!1),L=o(l,"removeCollinear",.01),D=o(l,"minimumArea",10);g=a.fromVertices(y,E,F,p,I,L,D)}break;case"fromPhysicsEditor":g=u.parseBody(y,E,l,p);break;case"fromPhysicsTracer":g=r.parseBody(y,E,l,p);break}return g&&this.setExistingBody(g,l.addToWorld),this}};s.exports=d}),38083:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1121),m=e(53614),c=e(35810),o={setToSleep:function(){return m.set(this.body,!0),this},setAwake:function(){return m.set(this.body,!1),this},setSleepThreshold:function(u){return u===void 0&&(u=60),this.body.sleepThreshold=u,this},setSleepEvents:function(u,r){return this.setSleepStartEvent(u),this.setSleepEndEvent(r),this},setSleepStartEvent:function(u){if(u){var r=this.world;c.on(this.body,"sleepStart",function(h){r.emit(a.SLEEP_START,h,this)})}else c.off(this.body,"sleepStart");return this},setSleepEndEvent:function(u){if(u){var r=this.world;c.on(this.body,"sleepEnd",function(h){r.emit(a.SLEEP_END,h,this)})}else c.off(this.body,"sleepEnd");return this}};s.exports=o}),90556:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),m={setStatic:function(c){return a.setStatic(this.body,c),this},isStatic:function(){return this.body.isStatic}};s.exports=m}),85436:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),m=e(36383),c=e(86554),o=e(30954),u=4,r={x:{get:function(){return this.body.position.x},set:function(h){this._tempVec2.set(h,this.y),a.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(h){this._tempVec2.set(this.x,h),a.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(h){this.setScale(h,h)}},scaleX:{get:function(){return this._scaleX},set:function(h){var d=1/this._scaleX,l=1/this._scaleY;this._scaleX=h,this._scaleX===0?this.renderFlags&=~u:this.renderFlags|=u,a.scale(this.body,d,l),a.scale(this.body,h,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(h){var d=1/this._scaleX,l=1/this._scaleY;this._scaleY=h,this._scaleY===0?this.renderFlags&=~u:this.renderFlags|=u,a.scale(this.body,d,l),a.scale(this.body,this._scaleX,h)}},angle:{get:function(){return o(this.body.angle*m.RAD_TO_DEG)},set:function(h){this.rotation=o(h)*m.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(h){this._rotation=c(h),a.setAngle(this.body,this._rotation)}},setPosition:function(h,d){return h===void 0&&(h=0),d===void 0&&(d=h),this._tempVec2.set(h,d),a.setPosition(this.body,this._tempVec2),this},setRotation:function(h){return h===void 0&&(h=0),this._rotation=c(h),a.setAngle(this.body,h),this},setFixedRotation:function(){return a.setInertia(this.body,1/0),this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,a.setAngle(this.body,this.rotation),this},setScale:function(h,d,l){h===void 0&&(h=1),d===void 0&&(d=h);var p=1/this._scaleX,g=1/this._scaleY;return this._scaleX=h,this._scaleY=d,a.scale(this.body,p,g,l),a.scale(this.body,h,d,l),this}};s.exports=r}),42081:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22562),m={setVelocityX:function(c){return this._tempVec2.set(c,this.body.velocity.y),a.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(c){return this._tempVec2.set(this.body.velocity.x,c),a.setVelocity(this.body,this._tempVec2),this},setVelocity:function(c,o){return this._tempVec2.set(c,o),a.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return a.getVelocity(this.body)},setAngularVelocity:function(c){return a.setAngularVelocity(this.body,c),this},getAngularVelocity:function(){return a.getAngularVelocity(this.body)},setAngularSpeed:function(c){return a.setAngularSpeed(this.body,c),this},getAngularSpeed:function(){return a.getAngularSpeed(this.body)}};s.exports=m}),31884:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Bounce:e(70410),Collision:e(66968),Force:e(51607),Friction:e(5436),Gravity:e(39858),Mass:e(37302),Sensor:e(39132),SetBody:e(57772),Sleep:e(38083),Static:e(90556),Transform:e(85436),Velocity:e(42081)}}),85608:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="afteradd"}),1213:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="afterremove"}),25968:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="afterupdate"}),67205:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="beforeadd"}),39438:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="beforeremove"}),44823:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="beforeupdate"}),92593:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="collisionactive"}),60128:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="collisionend"}),76861:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="collisionstart"}),92362:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragend"}),76408:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="drag"}),93971:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="dragstart"}),5656:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),47861:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),79099:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="sleepend"}),35906:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="sleepstart"}),1121:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AFTER_ADD:e(85608),AFTER_REMOVE:e(1213),AFTER_UPDATE:e(25968),BEFORE_ADD:e(67205),BEFORE_REMOVE:e(39438),BEFORE_UPDATE:e(44823),COLLISION_ACTIVE:e(92593),COLLISION_END:e(60128),COLLISION_START:e(76861),DRAG_END:e(92362),DRAG:e(76408),DRAG_START:e(93971),PAUSE:e(5656),RESUME:e(47861),SLEEP_END:e(79099),SLEEP_START:e(35906)}}),3875:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BodyBounds:e(68174),Components:e(31884),Events:e(1121),Factory:e(28137),MatterGameObject:e(75803),Image:e(23181),Matter:e(19933),MatterPhysics:e(42045),PolyDecomp:e(55973),Sprite:e(34803),TileBody:e(73834),PhysicsEditorParser:e(19496),PhysicsJSONParser:e(85791),PointerConstraint:e(98713),World:e(68243)}}),22562:((s,T,e)=>{var a={};s.exports=a;var m=e(41598),c=e(31725),o=e(53614),u=e(53402),r=e(15647),h=e(66615);(function(){a._timeCorrection=!0,a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a._baseDelta=16.666666666666668,a.create=function(l){var p={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:l.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!l.hasOwnProperty("position")&&l.hasOwnProperty("vertices")?l.position=m.centre(l.vertices):l.hasOwnProperty("vertices")||(p.vertices=m.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var g=u.extend(p,l);return d(g,l),g.setOnCollideWith=function(x,y){return y?this.onCollideWith[x.id]=y:delete this.onCollideWith[x.id],this},g},a.nextGroup=function(l){return l?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var d=function(l,p){if(p=p||{},a.set(l,{bounds:l.bounds||r.create(l.vertices),positionPrev:l.positionPrev||c.clone(l.position),anglePrev:l.anglePrev||l.angle,vertices:l.vertices,parts:l.parts||[l],isStatic:l.isStatic,isSleeping:l.isSleeping,parent:l.parent||l}),m.rotate(l.vertices,l.angle,l.position),h.rotate(l.axes,l.angle),r.update(l.bounds,l.vertices,l.velocity),a.set(l,{axes:p.axes||l.axes,area:p.area||l.area,mass:p.mass||l.mass,inertia:p.inertia||l.inertia}),l.parts.length===1){var g=l.bounds,x=l.centerOfMass,y=l.centerOffset,E=g.max.x-g.min.x,w=g.max.y-g.min.y;x.x=-(g.min.x-l.position.x)/E,x.y=-(g.min.y-l.position.y)/w,y.x=E*x.x,y.y=w*x.y}};a.set=function(l,p,g){var x;typeof p=="string"&&(x=p,p={},p[x]=g);for(x in p)if(Object.prototype.hasOwnProperty.call(p,x))switch(g=p[x],x){case"isStatic":a.setStatic(l,g);break;case"isSleeping":o.set(l,g);break;case"mass":a.setMass(l,g);break;case"density":a.setDensity(l,g);break;case"inertia":a.setInertia(l,g);break;case"vertices":a.setVertices(l,g);break;case"position":a.setPosition(l,g);break;case"angle":a.setAngle(l,g);break;case"velocity":a.setVelocity(l,g);break;case"angularVelocity":a.setAngularVelocity(l,g);break;case"speed":a.setSpeed(l,g);break;case"angularSpeed":a.setAngularSpeed(l,g);break;case"parts":a.setParts(l,g);break;case"centre":a.setCentre(l,g);break;default:l[x]=g}},a.setStatic=function(l,p){for(var g=0;g<l.parts.length;g++){var x=l.parts[g];p?(x.isStatic||(x._original={restitution:x.restitution,friction:x.friction,mass:x.mass,inertia:x.inertia,density:x.density,inverseMass:x.inverseMass,inverseInertia:x.inverseInertia}),x.restitution=0,x.friction=1,x.mass=x.inertia=x.density=1/0,x.inverseMass=x.inverseInertia=0,x.positionPrev.x=x.position.x,x.positionPrev.y=x.position.y,x.anglePrev=x.angle,x.angularVelocity=0,x.speed=0,x.angularSpeed=0,x.motion=0):x._original&&(x.restitution=x._original.restitution,x.friction=x._original.friction,x.mass=x._original.mass,x.inertia=x._original.inertia,x.density=x._original.density,x.inverseMass=x._original.inverseMass,x.inverseInertia=x._original.inverseInertia,x._original=null),x.isStatic=p}},a.setMass=function(l,p){var g=l.inertia/(l.mass/6);l.inertia=g*(p/6),l.inverseInertia=1/l.inertia,l.mass=p,l.inverseMass=1/l.mass,l.density=l.mass/l.area},a.setDensity=function(l,p){a.setMass(l,p*l.area),l.density=p},a.setInertia=function(l,p){l.inertia=p,l.inverseInertia=1/l.inertia},a.setVertices=function(l,p){p[0].body===l?l.vertices=p:l.vertices=m.create(p,l),l.axes=h.fromVertices(l.vertices),l.area=m.area(l.vertices),a.setMass(l,l.density*l.area);var g=m.centre(l.vertices);m.translate(l.vertices,g,-1),a.setInertia(l,a._inertiaScale*m.inertia(l.vertices,l.mass)),m.translate(l.vertices,l.position),r.update(l.bounds,l.vertices,l.velocity)},a.setParts=function(l,p,g){var x;for(p=p.slice(0),l.parts.length=0,l.parts.push(l),l.parent=l,x=0;x<p.length;x++){var y=p[x];y!==l&&(y.parent=l,l.parts.push(y))}if(l.parts.length!==1){if(g=typeof g<"u"?g:!0,g){var E=[];for(x=0;x<p.length;x++)E=E.concat(p[x].vertices);m.clockwiseSort(E);var w=m.hull(E),C=m.centre(w);a.setVertices(l,w),m.translate(l.vertices,C)}var A=a._totalProperties(l),M=A.centre.x,R=A.centre.y,P=l.bounds,b=l.centerOfMass,F=l.centerOffset;r.update(P,l.vertices,l.velocity),b.x=-(P.min.x-M)/(P.max.x-P.min.x),b.y=-(P.min.y-R)/(P.max.y-P.min.y),F.x=M,F.y=R,l.area=A.area,l.parent=l,l.position.x=M,l.position.y=R,l.positionPrev.x=M,l.positionPrev.y=R,a.setMass(l,A.mass),a.setInertia(l,A.inertia),a.setPosition(l,A.centre)}},a.setCentre=function(l,p,g){g?(l.positionPrev.x+=p.x,l.positionPrev.y+=p.y,l.position.x+=p.x,l.position.y+=p.y):(l.positionPrev.x=p.x-(l.position.x-l.positionPrev.x),l.positionPrev.y=p.y-(l.position.y-l.positionPrev.y),l.position.x=p.x,l.position.y=p.y)},a.setPosition=function(l,p,g){var x=c.sub(p,l.position);g?(l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.velocity.x=x.x,l.velocity.y=x.y,l.speed=c.magnitude(x)):(l.positionPrev.x+=x.x,l.positionPrev.y+=x.y);for(var y=0;y<l.parts.length;y++){var E=l.parts[y];E.position.x+=x.x,E.position.y+=x.y,m.translate(E.vertices,x),r.update(E.bounds,E.vertices,l.velocity)}},a.setAngle=function(l,p,g){var x=p-l.angle;g?(l.anglePrev=l.angle,l.angularVelocity=x,l.angularSpeed=Math.abs(x)):l.anglePrev+=x;for(var y=0;y<l.parts.length;y++){var E=l.parts[y];E.angle+=x,m.rotate(E.vertices,x,l.position),h.rotate(E.axes,x),r.update(E.bounds,E.vertices,l.velocity),y>0&&c.rotateAbout(E.position,x,l.position,E.position)}},a.setVelocity=function(l,p){var g=l.deltaTime/a._baseDelta;l.positionPrev.x=l.position.x-p.x*g,l.positionPrev.y=l.position.y-p.y*g,l.velocity.x=(l.position.x-l.positionPrev.x)/g,l.velocity.y=(l.position.y-l.positionPrev.y)/g,l.speed=c.magnitude(l.velocity)},a.getVelocity=function(l){var p=a._baseDelta/l.deltaTime;return{x:(l.position.x-l.positionPrev.x)*p,y:(l.position.y-l.positionPrev.y)*p}},a.getSpeed=function(l){return c.magnitude(a.getVelocity(l))},a.setSpeed=function(l,p){a.setVelocity(l,c.mult(c.normalise(a.getVelocity(l)),p))},a.setAngularVelocity=function(l,p){var g=l.deltaTime/a._baseDelta;l.anglePrev=l.angle-p*g,l.angularVelocity=(l.angle-l.anglePrev)/g,l.angularSpeed=Math.abs(l.angularVelocity)},a.getAngularVelocity=function(l){return(l.angle-l.anglePrev)*a._baseDelta/l.deltaTime},a.getAngularSpeed=function(l){return Math.abs(a.getAngularVelocity(l))},a.setAngularSpeed=function(l,p){a.setAngularVelocity(l,u.sign(a.getAngularVelocity(l))*p)},a.translate=function(l,p,g){a.setPosition(l,c.add(l.position,p),g)},a.rotate=function(l,p,g,x){if(!g)a.setAngle(l,l.angle+p,x);else{var y=Math.cos(p),E=Math.sin(p),w=l.position.x-g.x,C=l.position.y-g.y;a.setPosition(l,{x:g.x+(w*y-C*E),y:g.y+(w*E+C*y)},x),a.setAngle(l,l.angle+p,x)}},a.scale=function(l,p,g,x){var y=0,E=0;x=x||l.position;for(var w=l.inertia===1/0,C=0;C<l.parts.length;C++){var A=l.parts[C];A.scale.x=p,A.scale.y=g,m.scale(A.vertices,p,g,x),A.axes=h.fromVertices(A.vertices),A.area=m.area(A.vertices),a.setMass(A,l.density*A.area),m.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),a.setInertia(A,a._inertiaScale*m.inertia(A.vertices,A.mass)),m.translate(A.vertices,{x:A.position.x,y:A.position.y}),C>0&&(y+=A.area,E+=A.inertia),A.position.x=x.x+(A.position.x-x.x)*p,A.position.y=x.y+(A.position.y-x.y)*g,r.update(A.bounds,A.vertices,l.velocity)}l.parts.length>1&&(l.area=y,l.isStatic||(a.setMass(l,l.density*y),a.setInertia(l,E))),l.circleRadius&&(p===g?l.circleRadius*=p:l.circleRadius=null),w&&a.setInertia(l,1/0)},a.update=function(l,p){p=(typeof p<"u"?p:16.666666666666668)*l.timeScale;var g=p*p,x=a._timeCorrection?p/(l.deltaTime||p):1,y=1-l.frictionAir*(p/u._baseDelta),E=(l.position.x-l.positionPrev.x)*x,w=(l.position.y-l.positionPrev.y)*x;l.velocity.x=E*y+l.force.x/l.mass*g,l.velocity.y=w*y+l.force.y/l.mass*g,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.position.x+=l.velocity.x,l.position.y+=l.velocity.y,l.deltaTime=p,l.angularVelocity=(l.angle-l.anglePrev)*y*x+l.torque/l.inertia*g,l.anglePrev=l.angle,l.angle+=l.angularVelocity,l.speed=c.magnitude(l.velocity),l.angularSpeed=Math.abs(l.angularVelocity);for(var C=0;C<l.parts.length;C++){var A=l.parts[C];m.translate(A.vertices,l.velocity),C>0&&(A.position.x+=l.velocity.x,A.position.y+=l.velocity.y),l.angularVelocity!==0&&(m.rotate(A.vertices,l.angularVelocity,l.position),h.rotate(A.axes,l.angularVelocity),C>0&&c.rotateAbout(A.position,l.angularVelocity,l.position,A.position)),r.update(A.bounds,A.vertices,l.velocity)}},a.updateVelocities=function(l){var p=a._baseDelta/l.deltaTime,g=l.velocity;g.x=(l.position.x-l.positionPrev.x)*p,g.y=(l.position.y-l.positionPrev.y)*p,l.speed=Math.sqrt(g.x*g.x+g.y*g.y),l.angularVelocity=(l.angle-l.anglePrev)*p,l.angularSpeed=Math.abs(l.angularVelocity)},a.applyForce=function(l,p,g){var x={x:p.x-l.position.x,y:p.y-l.position.y};l.force.x+=g.x,l.force.y+=g.y,l.torque+=x.x*g.y-x.y*g.x},a._totalProperties=function(l){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=l.parts.length===1?0:1;g<l.parts.length;g++){var x=l.parts[g],y=x.mass!==1/0?x.mass:1;p.mass+=y,p.area+=x.area,p.inertia+=x.inertia,p.centre=c.add(p.centre,c.mult(x.position,y))}return p.centre=c.div(p.centre,p.mass),p},a.wrap=function(l,p){var g=r.wrap(l.bounds,p);return g&&a.translate(l,g),g}})()}),69351:((s,T,e)=>{var a={};s.exports=a;var m=e(35810),c=e(53402),o=e(15647),u=e(22562);(function(){a.create=function(r){return c.extend({id:c.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},a.setModified=function(r,h,d,l){if(m.trigger(r,"compositeModified",r),r.isModified=h,h&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),d&&r.parent&&a.setModified(r.parent,h,d,l),l)for(var p=0;p<r.composites.length;p++){var g=r.composites[p];a.setModified(g,h,d,l)}},a.add=function(r,h){var d=[].concat(h);m.trigger(r,"beforeAdd",{object:h});for(var l=0;l<d.length;l++){var p=d[l];switch(p.type){case"body":if(p.parent!==p){c.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(r,p);break;case"constraint":a.addConstraint(r,p);break;case"composite":a.addComposite(r,p);break;case"mouseConstraint":a.addConstraint(r,p.constraint);break}}return m.trigger(r,"afterAdd",{object:h}),r},a.remove=function(r,h,d){var l=[].concat(h);m.trigger(r,"beforeRemove",{object:h});for(var p=0;p<l.length;p++){var g=l[p];switch(g.type){case"body":a.removeBody(r,g,d);break;case"constraint":a.removeConstraint(r,g,d);break;case"composite":a.removeComposite(r,g,d);break;case"mouseConstraint":a.removeConstraint(r,g.constraint);break}}return m.trigger(r,"afterRemove",{object:h}),r},a.addComposite=function(r,h){return r.composites.push(h),h.parent=r,a.setModified(r,!0,!0,!1),r},a.removeComposite=function(r,h,d){var l=c.indexOf(r.composites,h);if(l!==-1){var p=a.allBodies(h);a.removeCompositeAt(r,l);for(var g=0;g<p.length;g++)p[g].sleepCounter=0}if(d)for(var g=0;g<r.composites.length;g++)a.removeComposite(r.composites[g],h,!0);return r},a.removeCompositeAt=function(r,h){return r.composites.splice(h,1),a.setModified(r,!0,!0,!1),r},a.addBody=function(r,h){return r.bodies.push(h),a.setModified(r,!0,!0,!1),r},a.removeBody=function(r,h,d){var l=c.indexOf(r.bodies,h);if(l!==-1&&(a.removeBodyAt(r,l),h.sleepCounter=0),d)for(var p=0;p<r.composites.length;p++)a.removeBody(r.composites[p],h,!0);return r},a.removeBodyAt=function(r,h){return r.bodies.splice(h,1),a.setModified(r,!0,!0,!1),r},a.addConstraint=function(r,h){return r.constraints.push(h),a.setModified(r,!0,!0,!1),r},a.removeConstraint=function(r,h,d){var l=c.indexOf(r.constraints,h);if(l!==-1&&a.removeConstraintAt(r,l),d)for(var p=0;p<r.composites.length;p++)a.removeConstraint(r.composites[p],h,!0);return r},a.removeConstraintAt=function(r,h){return r.constraints.splice(h,1),a.setModified(r,!0,!0,!1),r},a.clear=function(r,h,d){if(d)for(var l=0;l<r.composites.length;l++)a.clear(r.composites[l],h,!0);return h?r.bodies=r.bodies.filter(function(p){return p.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,a.setModified(r,!0,!0,!1),r},a.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var h=[].concat(r.bodies),d=0;d<r.composites.length;d++)h=h.concat(a.allBodies(r.composites[d]));return r.cache&&(r.cache.allBodies=h),h},a.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var h=[].concat(r.constraints),d=0;d<r.composites.length;d++)h=h.concat(a.allConstraints(r.composites[d]));return r.cache&&(r.cache.allConstraints=h),h},a.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var h=[].concat(r.composites),d=0;d<r.composites.length;d++)h=h.concat(a.allComposites(r.composites[d]));return r.cache&&(r.cache.allComposites=h),h},a.get=function(r,h,d){var l,p;switch(d){case"body":l=a.allBodies(r);break;case"constraint":l=a.allConstraints(r);break;case"composite":l=a.allComposites(r).concat(r);break}return l?(p=l.filter(function(g){return g.id.toString()===h.toString()}),p.length===0?null:p[0]):null},a.move=function(r,h,d){return a.remove(r,h),a.add(d,h),r},a.rebase=function(r){for(var h=a.allBodies(r).concat(a.allConstraints(r)).concat(a.allComposites(r)),d=0;d<h.length;d++)h[d].id=c.nextId();return r},a.translate=function(r,h,d){for(var l=d?a.allBodies(r):r.bodies,p=0;p<l.length;p++)u.translate(l[p],h);return r},a.rotate=function(r,h,d,l){for(var p=Math.cos(h),g=Math.sin(h),x=l?a.allBodies(r):r.bodies,y=0;y<x.length;y++){var E=x[y],w=E.position.x-d.x,C=E.position.y-d.y;u.setPosition(E,{x:d.x+(w*p-C*g),y:d.y+(w*g+C*p)}),u.rotate(E,h)}return r},a.scale=function(r,h,d,l,p){for(var g=p?a.allBodies(r):r.bodies,x=0;x<g.length;x++){var y=g[x],E=y.position.x-l.x,w=y.position.y-l.y;u.setPosition(y,{x:l.x+E*h,y:l.y+w*d}),u.scale(y,h,d)}return r},a.bounds=function(r){for(var h=a.allBodies(r),d=[],l=0;l<h.length;l+=1){var p=h[l];d.push(p.bounds.min,p.bounds.max)}return o.create(d)},a.wrap=function(r,h){var d=o.wrap(a.bounds(r),h);return d&&a.translate(r,d),d}})()}),4372:((s,T,e)=>{var a={};s.exports=a;var m=e(69351);(function(){a.create=m.create,a.add=m.add,a.remove=m.remove,a.clear=m.clear,a.addComposite=m.addComposite,a.addBody=m.addBody,a.addConstraint=m.addConstraint})()}),52284:((s,T,e)=>{var a={};s.exports=a;var m=e(41598),c=e(4506);(function(){var o=[],u={overlap:0,axis:null},r={overlap:0,axis:null};a.create=function(h,d){return{pair:null,collided:!1,bodyA:h,bodyB:d,parentA:h.parent,parentB:d.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},a.collides=function(h,d,l){if(a._overlapAxes(u,h.vertices,d.vertices,h.axes),u.overlap<=0||(a._overlapAxes(r,d.vertices,h.vertices,d.axes),r.overlap<=0))return null;var p=l&&l.table[c.id(h,d)],g;p?g=p.collision:(g=a.create(h,d),g.collided=!0,g.bodyA=h.id<d.id?h:d,g.bodyB=h.id<d.id?d:h,g.parentA=g.bodyA.parent,g.parentB=g.bodyB.parent),h=g.bodyA,d=g.bodyB;var x;u.overlap<r.overlap?x=u:x=r;var y=g.normal,E=g.tangent,w=g.penetration,C=g.supports,A=x.overlap,M=x.axis,R=M.x,P=M.y,b=d.position.x-h.position.x,F=d.position.y-h.position.y;R*b+P*F>=0&&(R=-R,P=-P),y.x=R,y.y=P,E.x=-P,E.y=R,w.x=R*A,w.y=P*A,g.depth=A;var I=a._findSupports(h,d,y,1),L=0;if(m.contains(h.vertices,I[0])&&(C[L++]=I[0]),m.contains(h.vertices,I[1])&&(C[L++]=I[1]),L<2){var D=a._findSupports(d,h,y,-1);m.contains(d.vertices,D[0])&&(C[L++]=D[0]),L<2&&m.contains(d.vertices,D[1])&&(C[L++]=D[1])}return L===0&&(C[L++]=I[0]),g.supportCount=L,g},a._overlapAxes=function(h,d,l,p){var g=d.length,x=l.length,y=d[0].x,E=d[0].y,w=l[0].x,C=l[0].y,A=p.length,M=Number.MAX_VALUE,R=0,P,b,F,I,L,D;for(L=0;L<A;L++){var O=p[L],z=O.x,W=O.y,k=y*z+E*W,X=w*z+C*W,V=k,G=X;for(D=1;D<g;D+=1)I=d[D].x*z+d[D].y*W,I>V?V=I:I<k&&(k=I);for(D=1;D<x;D+=1)I=l[D].x*z+l[D].y*W,I>G?G=I:I<X&&(X=I);if(b=V-X,F=G-k,P=b<F?b:F,P<M&&(M=P,R=L,P<=0))break}h.axis=p[R],h.overlap=M},a._findSupports=function(h,d,l,p){var g=d.vertices,x=g.length,y=h.position.x,E=h.position.y,w=l.x*p,C=l.y*p,A=g[0],M=A,R=w*(y-M.x)+C*(E-M.y),P,b,F;for(F=1;F<x;F+=1)M=g[F],b=w*(y-M.x)+C*(E-M.y),b<R&&(R=b,A=M);return P=g[(x+A.index-1)%x],R=w*(y-P.x)+C*(E-P.y),M=g[(A.index+1)%x],w*(y-M.x)+C*(E-M.y)<R?(o[0]=A,o[1]=M,o):(o[0]=A,o[1]=P,o)}})()}),43424:(s=>{var T={};s.exports=T,(function(){T.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}})()}),81388:((s,T,e)=>{var a={};s.exports=a;var m=e(53402),c=e(52284);(function(){a.create=function(o){var u={bodies:[],collisions:[],pairs:null};return m.extend(u,o)},a.setBodies=function(o,u){o.bodies=u.slice(0)},a.clear=function(o){o.bodies=[],o.collisions=[]},a.collisions=function(o){var u=o.pairs,r=o.bodies,h=r.length,d=a.canCollide,l=c.collides,p=o.collisions,g=0,x,y;for(r.sort(a._compareBoundsX),x=0;x<h;x++){var E=r[x],w=E.bounds,C=E.bounds.max.x,A=E.bounds.max.y,M=E.bounds.min.y,R=E.isStatic||E.isSleeping,P=E.parts.length,b=P===1;for(y=x+1;y<h;y++){var F=r[y],I=F.bounds;if(I.min.x>C)break;if(!(A<I.min.y||M>I.max.y)&&!(R&&(F.isStatic||F.isSleeping))&&d(E.collisionFilter,F.collisionFilter)){var L=F.parts.length;if(b&&L===1){var D=l(E,F,u);D&&(p[g++]=D)}else for(var O=P>1?1:0,z=L>1?1:0,W=O;W<P;W++)for(var k=E.parts[W],w=k.bounds,X=z;X<L;X++){var V=F.parts[X],I=V.bounds;if(!(w.min.x>I.max.x||w.max.x<I.min.x||w.max.y<I.min.y||w.min.y>I.max.y)){var D=l(k,V,u);D&&(p[g++]=D)}}}}}return p.length!==g&&(p.length=g),p},a.canCollide=function(o,u){return o.group===u.group&&o.group!==0?o.group>0:(o.mask&u.category)!==0&&(u.mask&o.category)!==0},a._compareBoundsX=function(o,u){return o.bounds.min.x-u.bounds.min.x}})()}),4506:((s,T,e)=>{var a={};s.exports=a;var m=e(43424);(function(){a.create=function(c,o){var u=c.bodyA,r=c.bodyB,h={id:a.id(u,r),bodyA:u,bodyB:r,collision:c,contacts:[m.create(),m.create()],contactCount:0,separation:0,isActive:!0,isSensor:u.isSensor||r.isSensor,timeCreated:o,timeUpdated:o,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(h,c,o),h},a.update=function(c,o,u){var r=o.supports,h=o.supportCount,d=c.contacts,l=o.parentA,p=o.parentB;c.isActive=!0,c.timeUpdated=u,c.collision=o,c.separation=o.depth,c.inverseMass=l.inverseMass+p.inverseMass,c.friction=l.friction<p.friction?l.friction:p.friction,c.frictionStatic=l.frictionStatic>p.frictionStatic?l.frictionStatic:p.frictionStatic,c.restitution=l.restitution>p.restitution?l.restitution:p.restitution,c.slop=l.slop>p.slop?l.slop:p.slop,c.contactCount=h,o.pair=c;var g=r[0],x=d[0],y=r[1],E=d[1];(E.vertex===g||x.vertex===y)&&(d[1]=x,d[0]=x=E,E=d[1]),x.vertex=g,E.vertex=y},a.setActive=function(c,o,u){o?(c.isActive=!0,c.timeUpdated=u):(c.isActive=!1,c.contactCount=0)},a.id=function(c,o){return c.id<o.id?c.id.toString(36)+":"+o.id.toString(36):o.id.toString(36)+":"+c.id.toString(36)}})()}),99561:((s,T,e)=>{var a={};s.exports=a;var m=e(4506),c=e(53402);(function(){a.create=function(o){return c.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},a.update=function(o,u,r){var h=m.update,d=m.create,l=m.setActive,p=o.table,g=o.list,x=g.length,y=x,E=o.collisionStart,w=o.collisionEnd,C=o.collisionActive,A=u.length,M=0,R=0,P=0,b,F,I;for(I=0;I<A;I++)b=u[I],F=b.pair,F?(F.isActive&&(C[P++]=F),h(F,b,r)):(F=d(b,r),p[F.id]=F,E[M++]=F,g[y++]=F);for(y=0,x=g.length,I=0;I<x;I++)F=g[I],F.timeUpdated>=r?g[y++]=F:(l(F,!1,r),F.collision.bodyA.sleepCounter>0&&F.collision.bodyB.sleepCounter>0?g[y++]=F:(w[R++]=F,delete p[F.id]));g.length!==y&&(g.length=y),E.length!==M&&(E.length=M),w.length!==R&&(w.length=R),C.length!==P&&(C.length=P)},a.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()}),73296:((s,T,e)=>{var a={};s.exports=a;var m=e(31725),c=e(52284),o=e(15647),u=e(66280),r=e(41598);(function(){a.collides=function(h,d){for(var l=[],p=d.length,g=h.bounds,x=c.collides,y=o.overlaps,E=0;E<p;E++){var w=d[E],C=w.parts.length,A=C===1?0:1;if(h!==w&&y(w.bounds,g))for(var M=A;M<C;M++){var R=w.parts[M];if(y(R.bounds,g)){var P=x(R,h);if(P){l.push(P);break}}}}return l},a.ray=function(h,d,l,p){p=p||1e-100;for(var g=m.angle(d,l),x=m.magnitude(m.sub(d,l)),y=(l.x+d.x)*.5,E=(l.y+d.y)*.5,w=u.rectangle(y,E,x,p,{angle:g}),C=a.collides(w,h),A=0;A<C.length;A+=1){var M=C[A];M.body=M.bodyB=M.bodyA}return C},a.region=function(h,d,l){for(var p=[],g=0;g<h.length;g++){var x=h[g],y=o.overlaps(x.bounds,d);(y&&!l||!y&&l)&&p.push(x)}return p},a.point=function(h,d){for(var l=[],p=0;p<h.length;p++){var g=h[p];if(o.contains(g.bounds,d))for(var x=g.parts.length===1?0:1;x<g.parts.length;x++){var y=g.parts[x];if(o.contains(y.bounds,d)&&r.contains(y.vertices,d)){l.push(g);break}}}return l}})()}),66272:((s,T,e)=>{var a={};s.exports=a;var m=e(41598),c=e(53402),o=e(15647);(function(){a._restingThresh=2,a._restingThreshTangent=Math.sqrt(6),a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a._frictionMaxStatic=Number.MAX_VALUE,a.preSolvePosition=function(u){var r,h,d,l=u.length;for(r=0;r<l;r++)h=u[r],h.isActive&&(d=h.contactCount,h.collision.parentA.totalContacts+=d,h.collision.parentB.totalContacts+=d)},a.solvePosition=function(u,r,h){var d,l,p,g,x,y,E,w,C=a._positionDampen*(h||1),A=c.clamp(r/c._baseDelta,0,1),M=u.length;for(d=0;d<M;d++)l=u[d],!(!l.isActive||l.isSensor)&&(p=l.collision,g=p.parentA,x=p.parentB,y=p.normal,l.separation=p.depth+y.x*(x.positionImpulse.x-g.positionImpulse.x)+y.y*(x.positionImpulse.y-g.positionImpulse.y));for(d=0;d<M;d++)l=u[d],!(!l.isActive||l.isSensor)&&(p=l.collision,g=p.parentA,x=p.parentB,y=p.normal,w=l.separation-l.slop*A,(g.isStatic||x.isStatic)&&(w*=2),g.isStatic||g.isSleeping||(E=C/g.totalContacts,g.positionImpulse.x+=y.x*w*E,g.positionImpulse.y+=y.y*w*E),x.isStatic||x.isSleeping||(E=C/x.totalContacts,x.positionImpulse.x-=y.x*w*E,x.positionImpulse.y-=y.y*w*E))},a.postSolvePosition=function(u){for(var r=a._positionWarming,h=u.length,d=m.translate,l=o.update,p=0;p<h;p++){var g=u[p],x=g.positionImpulse,y=x.x,E=x.y,w=g.velocity;if(g.totalContacts=0,y!==0||E!==0){for(var C=0;C<g.parts.length;C++){var A=g.parts[C];d(A.vertices,x),l(A.bounds,A.vertices,w),A.position.x+=y,A.position.y+=E}g.positionPrev.x+=y,g.positionPrev.y+=E,y*w.x+E*w.y<0?(x.x=0,x.y=0):(x.x*=r,x.y*=r)}}},a.preSolveVelocity=function(u){var r=u.length,h,d;for(h=0;h<r;h++){var l=u[h];if(!(!l.isActive||l.isSensor)){var p=l.contacts,g=l.contactCount,x=l.collision,y=x.parentA,E=x.parentB,w=x.normal,C=x.tangent;for(d=0;d<g;d++){var A=p[d],M=A.vertex,R=A.normalImpulse,P=A.tangentImpulse;if(R!==0||P!==0){var b=w.x*R+C.x*P,F=w.y*R+C.y*P;y.isStatic||y.isSleeping||(y.positionPrev.x+=b*y.inverseMass,y.positionPrev.y+=F*y.inverseMass,y.anglePrev+=y.inverseInertia*((M.x-y.position.x)*F-(M.y-y.position.y)*b)),E.isStatic||E.isSleeping||(E.positionPrev.x-=b*E.inverseMass,E.positionPrev.y-=F*E.inverseMass,E.anglePrev-=E.inverseInertia*((M.x-E.position.x)*F-(M.y-E.position.y)*b))}}}}},a.solveVelocity=function(u,r){var h=r/c._baseDelta,d=h*h,l=d*h,p=-a._restingThresh*h,g=a._restingThreshTangent,x=a._frictionNormalMultiplier*h,y=a._frictionMaxStatic,E=u.length,w,C,A,M;for(A=0;A<E;A++){var R=u[A];if(!(!R.isActive||R.isSensor)){var P=R.collision,b=P.parentA,F=P.parentB,I=P.normal.x,L=P.normal.y,D=P.tangent.x,O=P.tangent.y,z=R.inverseMass,W=R.friction*R.frictionStatic*x,k=R.contacts,X=R.contactCount,V=1/X,G=b.position.x-b.positionPrev.x,N=b.position.y-b.positionPrev.y,H=b.angle-b.anglePrev,U=F.position.x-F.positionPrev.x,_=F.position.y-F.positionPrev.y,$=F.angle-F.anglePrev;for(M=0;M<X;M++){var j=k[M],Z=j.vertex,it=Z.x-b.position.x,at=Z.y-b.position.y,q=Z.x-F.position.x,ft=Z.y-F.position.y,vt=G-at*H,Tt=N+it*H,ut=U-ft*$,Bt=_+q*$,Pt=vt-ut,et=Tt-Bt,Q=I*Pt+L*et,lt=D*Pt+O*et,pt=R.separation+Q,Mt=Math.min(pt,1);Mt=pt<0?0:Mt;var Ct=Mt*W;lt<-Ct||lt>Ct?(C=lt>0?lt:-lt,w=R.friction*(lt>0?1:-1)*l,w<-C?w=-C:w>C&&(w=C)):(w=lt,C=y);var Kt=it*L-at*I,Ut=q*L-ft*I,Wt=V/(z+b.inverseInertia*Kt*Kt+F.inverseInertia*Ut*Ut),ae=(1+R.restitution)*Q*Wt;if(w*=Wt,Q<p)j.normalImpulse=0;else{var zt=j.normalImpulse;j.normalImpulse+=ae,j.normalImpulse>0&&(j.normalImpulse=0),ae=j.normalImpulse-zt}if(lt<-g||lt>g)j.tangentImpulse=0;else{var Ht=j.tangentImpulse;j.tangentImpulse+=w,j.tangentImpulse<-C&&(j.tangentImpulse=-C),j.tangentImpulse>C&&(j.tangentImpulse=C),w=j.tangentImpulse-Ht}var At=I*ae+D*w,ne=L*ae+O*w;b.isStatic||b.isSleeping||(b.positionPrev.x+=At*b.inverseMass,b.positionPrev.y+=ne*b.inverseMass,b.anglePrev+=(it*ne-at*At)*b.inverseInertia),F.isStatic||F.isSleeping||(F.positionPrev.x-=At*F.inverseMass,F.positionPrev.y-=ne*F.inverseMass,F.anglePrev-=(q*ne-ft*At)*F.inverseInertia)}}}}})()}),48140:((s,T,e)=>{var a={};s.exports=a;var m=e(41598),c=e(31725),o=e(53614),u=e(15647),r=e(66615),h=e(53402);(function(){a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(d){var l=d;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var p=l.bodyA?c.add(l.bodyA.position,l.pointA):l.pointA,g=l.bodyB?c.add(l.bodyB.position,l.pointB):l.pointB,x=c.magnitude(c.sub(p,g));l.length=typeof l.length<"u"?l.length:x,l.id=l.id||h.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var y={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return l.length===0&&l.stiffness>.1?(y.type="pin",y.anchors=!1):l.stiffness<.9&&(y.type="spring"),l.render=h.extend(y,l.render),l},a.preSolveAll=function(d){for(var l=0;l<d.length;l+=1){var p=d[l],g=p.constraintImpulse;p.isStatic||g.x===0&&g.y===0&&g.angle===0||(p.position.x+=g.x,p.position.y+=g.y,p.angle+=g.angle)}},a.solveAll=function(d,l){for(var p=h.clamp(l/h._baseDelta,0,1),g=0;g<d.length;g+=1){var x=d[g],y=!x.bodyA||x.bodyA&&x.bodyA.isStatic,E=!x.bodyB||x.bodyB&&x.bodyB.isStatic;(y||E)&&a.solve(d[g],p)}for(g=0;g<d.length;g+=1)x=d[g],y=!x.bodyA||x.bodyA&&x.bodyA.isStatic,E=!x.bodyB||x.bodyB&&x.bodyB.isStatic,!y&&!E&&a.solve(d[g],p)},a.solve=function(d,l){var p=d.bodyA,g=d.bodyB,x=d.pointA,y=d.pointB;if(!(!p&&!g)){p&&!p.isStatic&&(c.rotate(x,p.angle-d.angleA,x),d.angleA=p.angle),g&&!g.isStatic&&(c.rotate(y,g.angle-d.angleB,y),d.angleB=g.angle);var E=x,w=y;if(p&&(E=c.add(p.position,x)),g&&(w=c.add(g.position,y)),!(!E||!w)){var C=c.sub(E,w),A=c.magnitude(C);A<a._minLength&&(A=a._minLength);var M=(A-d.length)/A,R=d.stiffness>=1||d.length===0,P=R?d.stiffness*l:d.stiffness*l*l,b=d.damping*l,F=c.mult(C,M*P),I=(p?p.inverseMass:0)+(g?g.inverseMass:0),L=(p?p.inverseInertia:0)+(g?g.inverseInertia:0),D=I+L,O,z,W,k,X;if(b>0){var V=c.create();W=c.div(C,A),X=c.sub(g&&c.sub(g.position,g.positionPrev)||V,p&&c.sub(p.position,p.positionPrev)||V),k=c.dot(W,X)}p&&!p.isStatic&&(z=p.inverseMass/I,p.constraintImpulse.x-=F.x*z,p.constraintImpulse.y-=F.y*z,p.position.x-=F.x*z,p.position.y-=F.y*z,b>0&&(p.positionPrev.x-=b*W.x*k*z,p.positionPrev.y-=b*W.y*k*z),O=c.cross(x,F)/D*a._torqueDampen*p.inverseInertia*(1-d.angularStiffness),p.constraintImpulse.angle-=O,p.angle-=O),g&&!g.isStatic&&(z=g.inverseMass/I,g.constraintImpulse.x+=F.x*z,g.constraintImpulse.y+=F.y*z,g.position.x+=F.x*z,g.position.y+=F.y*z,b>0&&(g.positionPrev.x+=b*W.x*k*z,g.positionPrev.y+=b*W.y*k*z),O=c.cross(y,F)/D*a._torqueDampen*g.inverseInertia*(1-d.angularStiffness),g.constraintImpulse.angle+=O,g.angle+=O)}}},a.postSolveAll=function(d){for(var l=0;l<d.length;l++){var p=d[l],g=p.constraintImpulse;if(!(p.isStatic||g.x===0&&g.y===0&&g.angle===0)){o.set(p,!1);for(var x=0;x<p.parts.length;x++){var y=p.parts[x];m.translate(y.vertices,g),x>0&&(y.position.x+=g.x,y.position.y+=g.y),g.angle!==0&&(m.rotate(y.vertices,g.angle,p.position),r.rotate(y.axes,g.angle),x>0&&c.rotateAbout(y.position,g.angle,p.position,y.position)),u.update(y.bounds,y.vertices,p.velocity)}g.angle*=a._warming,g.x*=a._warming,g.y*=a._warming}}},a.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),y:(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0)}},a.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),y:(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0)}},a.currentLength=function(d){var l=(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),p=(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0),g=(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),x=(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0),y=l-g,E=p-x;return Math.sqrt(y*y+E*E)}})()}),53402:((s,T,e)=>{var a={};s.exports=a,(function(){a._baseDelta=16.666666666666668,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(c,o){var u,r;typeof o=="boolean"?(u=2,r=o):(u=1,r=!0);for(var h=u;h<arguments.length;h++){var d=arguments[h];if(d)for(var l in d)r&&d[l]&&d[l].constructor===Object&&(!c[l]||c[l].constructor===Object)?(c[l]=c[l]||{},a.extend(c[l],r,d[l])):c[l]=d[l]}return c},a.clone=function(c,o){return a.extend({},o,c)},a.keys=function(c){if(Object.keys)return Object.keys(c);var o=[];for(var u in c)o.push(u);return o},a.values=function(c){var o=[];if(Object.keys){for(var u=Object.keys(c),r=0;r<u.length;r++)o.push(c[u[r]]);return o}for(var h in c)o.push(c[h]);return o},a.get=function(c,o,u,r){o=o.split(".").slice(u,r);for(var h=0;h<o.length;h+=1)c=c[o[h]];return c},a.set=function(c,o,u,r,h){var d=o.split(".").slice(r,h);return a.get(c,o,0,-1)[d[d.length-1]]=u,u},a.shuffle=function(c){for(var o=c.length-1;o>0;o--){var u=Math.floor(a.random()*(o+1)),r=c[o];c[o]=c[u],c[u]=r}return c},a.choose=function(c){return c[Math.floor(a.random()*c.length)]},a.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},a.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},a.isFunction=function(c){return typeof c=="function"},a.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},a.isString=function(c){return toString.call(c)==="[object String]"},a.clamp=function(c,o,u){return c<o?o:c>u?u:c},a.sign=function(c){return c<0?-1:1},a.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(c,o){return c=typeof c<"u"?c:0,o=typeof o<"u"?o:1,c+m()*(o-c)};var m=function(){return a._seed=(a._seed*9301+49297)%233280,a._seed/233280};a.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[c]||(a.warn(c),a._warnedOnce[c]=!0)},a.deprecated=function(c,o,u){c[o]=a.chain(function(){a.warnOnce("ð deprecated ð",u)},c[o])},a.nextId=function(){return a._nextId++},a.indexOf=function(c,o){if(c.indexOf)return c.indexOf(o);for(var u=0;u<c.length;u++)if(c[u]===o)return u;return-1},a.map=function(c,o){if(c.map)return c.map(o);for(var u=[],r=0;r<c.length;r+=1)u.push(o(c[r]));return u},a.topologicalSort=function(c){var o=[],u=[],r=[];for(var h in c)!u[h]&&!r[h]&&a._topologicalSort(h,u,r,c,o);return o},a._topologicalSort=function(c,o,u,r,h){var d=r[c]||[];u[c]=!0;for(var l=0;l<d.length;l+=1){var p=d[l];u[p]||o[p]||a._topologicalSort(p,o,u,r,h)}u[c]=!1,o[c]=!0,h.push(c)},a.chain=function(){for(var c=[],o=0;o<arguments.length;o+=1){var u=arguments[o];u._chained?c.push.apply(c,u._chained):c.push(u)}var r=function(){for(var h,d=new Array(arguments.length),l=0,p=arguments.length;l<p;l++)d[l]=arguments[l];for(l=0;l<c.length;l+=1){var g=c[l].apply(h,d);typeof g<"u"&&(h=g)}return h};return r._chained=c,r},a.chainPathBefore=function(c,o,u){return a.set(c,o,a.chain(u,a.get(c,o)))},a.chainPathAfter=function(c,o,u){return a.set(c,o,a.chain(a.get(c,o),u))},a.setDecomp=function(c){a._decomp=c},a.getDecomp=function(){var c=a._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof e.g<"u"&&(c=e.g.decomp)}catch{c=null}return c}})()}),48413:((s,T,e)=>{var a={};s.exports=a;var m=e(53614),c=e(66272),o=e(81388),u=e(99561),r=e(35810),h=e(69351),d=e(48140),l=e(53402),p=e(22562);(function(){a._deltaMax=16.666666666666668,a.create=function(g){g=g||{};var x={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},y=l.extend(x,g);return y.world=g.world||h.create({label:"World"}),y.pairs=g.pairs||u.create(),y.detector=g.detector||o.create(),y.detector.pairs=y.pairs,y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},a.update=function(g,x){var y=l.now(),E=g.world,w=g.detector,C=g.pairs,A=g.timing,M=A.timestamp,R;x>a._deltaMax&&l.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",a._deltaMax.toFixed(3),"ms."),x=typeof x<"u"?x:l._baseDelta,x*=A.timeScale,A.timestamp+=x,A.lastDelta=x;var P={timestamp:A.timestamp,delta:x};r.trigger(g,"beforeUpdate",P);var b=h.allBodies(E),F=h.allConstraints(E),I=h.allComposites(E);for(E.isModified&&(o.setBodies(w,b),h.setModified(E,!1,!1,!0)),g.enableSleeping&&m.update(b,x),a._bodiesApplyGravity(b,g.gravity),a.wrap(b,I),a.attractors(b),x>0&&a._bodiesUpdate(b,x),r.trigger(g,"beforeSolve",P),d.preSolveAll(b),R=0;R<g.constraintIterations;R++)d.solveAll(F,x);d.postSolveAll(b);var L=o.collisions(w);u.update(C,L,M),g.enableSleeping&&m.afterCollisions(C.list),C.collisionStart.length>0&&r.trigger(g,"collisionStart",{pairs:C.collisionStart,timestamp:A.timestamp,delta:x});var D=l.clamp(20/g.positionIterations,0,1);for(c.preSolvePosition(C.list),R=0;R<g.positionIterations;R++)c.solvePosition(C.list,x,D);for(c.postSolvePosition(b),d.preSolveAll(b),R=0;R<g.constraintIterations;R++)d.solveAll(F,x);for(d.postSolveAll(b),c.preSolveVelocity(C.list),R=0;R<g.velocityIterations;R++)c.solveVelocity(C.list,x);return a._bodiesUpdateVelocities(b),C.collisionActive.length>0&&r.trigger(g,"collisionActive",{pairs:C.collisionActive,timestamp:A.timestamp,delta:x}),C.collisionEnd.length>0&&r.trigger(g,"collisionEnd",{pairs:C.collisionEnd,timestamp:A.timestamp,delta:x}),a._bodiesClearForces(b),r.trigger(g,"afterUpdate",P),g.timing.lastElapsed=l.now()-y,g},a.merge=function(g,x){if(l.extend(g,x),x.world){g.world=x.world,a.clear(g);for(var y=h.allBodies(g.world),E=0;E<y.length;E++){var w=y[E];m.set(w,!1),w.id=l.nextId()}}},a.clear=function(g){u.clear(g.pairs),o.clear(g.detector)},a._bodiesClearForces=function(g){for(var x=g.length,y=0;y<x;y++){var E=g[y];E.force.x=0,E.force.y=0,E.torque=0}},a._bodiesApplyGravity=function(g,x){var y=typeof x.scale<"u"?x.scale:.001,E=g.length;if(!(x.x===0&&x.y===0||y===0))for(var w=0;w<E;w++){var C=g[w];C.ignoreGravity||C.isStatic||C.isSleeping||(C.force.y+=C.mass*x.y*y,C.force.x+=C.mass*x.x*y)}},a._bodiesUpdate=function(g,x){for(var y=g.length,E=0;E<y;E++){var w=g[E];w.isStatic||w.isSleeping||p.update(w,x)}},a._bodiesUpdateVelocities=function(g){for(var x=g.length,y=0;y<x;y++)p.updateVelocities(g[y])},a.wrap=function(g,x){for(var y=0;y<g.length;y+=1){var E=g[y];E.wrapBounds!==null&&p.wrap(E,E.wrapBounds)}for(y=0;y<x.length;y+=1){var w=x[y];w.wrapBounds!==null&&h.wrap(w,w.wrapBounds)}},a.attractors=function(g){for(var x=0;x<g.length;x++){var y=g[x],E=y.attractors;if(E&&E.length>0)for(var w=0;w<g.length;w++){var C=g[w];if(x!==w)for(var A=0;A<E.length;A++){var M=E[A],R=M;l.isFunction(M)&&(R=M(y,C)),R&&p.applyForce(C,C.position,R)}}}}})()}),35810:((s,T,e)=>{var a={};s.exports=a;var m=e(53402);(function(){a.on=function(c,o,u){for(var r=o.split(" "),h,d=0;d<r.length;d++)h=r[d],c.events=c.events||{},c.events[h]=c.events[h]||[],c.events[h].push(u);return u},a.off=function(c,o,u){if(!o){c.events={};return}typeof o=="function"&&(u=o,o=m.keys(c.events).join(" "));for(var r=o.split(" "),h=0;h<r.length;h++){var d=c.events[r[h]],l=[];if(u&&d)for(var p=0;p<d.length;p++)d[p]!==u&&l.push(d[p]);c.events[r[h]]=l}},a.trigger=function(c,o,u){var r,h,d,l,p=c.events;if(p&&m.keys(p).length>0){u||(u={}),r=o.split(" ");for(var g=0;g<r.length;g++)if(h=r[g],d=p[h],d){l=m.clone(u,!1),l.name=h,l.source=c;for(var x=0;x<d.length;x++)d[x].apply(c,[l])}}}})()}),6790:((s,T,e)=>{var a={};s.exports=a;var m=e(73832),c=e(53402);(function(){a.name="matter-js",a.version="0.20.0",a.uses=[],a.used=[],a.use=function(){m.use(a,Array.prototype.slice.call(arguments))},a.before=function(o,u){return o=o.replace(/^Matter./,""),c.chainPathBefore(a,o,u)},a.after=function(o,u){return o=o.replace(/^Matter./,""),c.chainPathAfter(a,o,u)}})()}),73832:((s,T,e)=>{var a={};s.exports=a;var m=e(53402);(function(){a._registry={},a.register=function(c){if(a.isPlugin(c)||m.warn("Plugin.register:",a.toString(c),"does not implement all required fields."),c.name in a._registry){var o=a._registry[c.name],u=a.versionParse(c.version).number,r=a.versionParse(o.version).number;u>r?(m.warn("Plugin.register:",a.toString(o),"was upgraded to",a.toString(c)),a._registry[c.name]=c):u<r?m.warn("Plugin.register:",a.toString(o),"can not be downgraded to",a.toString(c)):c!==o&&m.warn("Plugin.register:",a.toString(c),"is already registered to different plugin object")}else a._registry[c.name]=c;return c},a.resolve=function(c){return a._registry[a.dependencyParse(c).name]},a.toString=function(c){return typeof c=="string"?c:(c.name||"anonymous")+"@"+(c.version||c.range||"0.0.0")},a.isPlugin=function(c){return c&&c.name&&c.version&&c.install},a.isUsed=function(c,o){return c.used.indexOf(o)>-1},a.isFor=function(c,o){var u=c.for&&a.dependencyParse(c.for);return!c.for||o.name===u.name&&a.versionSatisfies(o.version,u.range)},a.use=function(c,o){if(c.uses=(c.uses||[]).concat(o||[]),c.uses.length===0){m.warn("Plugin.use:",a.toString(c),"does not specify any dependencies to install.");return}for(var u=a.dependencies(c),r=m.topologicalSort(u),h=[],d=0;d<r.length;d+=1)if(r[d]!==c.name){var l=a.resolve(r[d]);if(!l){h.push("â "+r[d]);continue}a.isUsed(c,l.name)||(a.isFor(l,c)||(m.warn("Plugin.use:",a.toString(l),"is for",l.for,"but installed on",a.toString(c)+"."),l._warned=!0),l.install?l.install(c):(m.warn("Plugin.use:",a.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(h.push("ð¶ "+a.toString(l)),delete l._warned):h.push("â "+a.toString(l)),c.used.push(l.name))}h.length>0&&!l.silent&&m.info(h.join("  "))},a.dependencies=function(c,o){var u=a.dependencyParse(c),r=u.name;if(o=o||{},!(r in o)){c=a.resolve(c)||c,o[r]=m.map(c.uses||[],function(d){a.isPlugin(d)&&a.register(d);var l=a.dependencyParse(d),p=a.resolve(d);return p&&!a.versionSatisfies(p.version,l.range)?(m.warn("Plugin.dependencies:",a.toString(p),"does not satisfy",a.toString(l),"used by",a.toString(u)+"."),p._warned=!0,c._warned=!0):p||(m.warn("Plugin.dependencies:",a.toString(d),"used by",a.toString(u),"could not be resolved."),c._warned=!0),l.name});for(var h=0;h<o[r].length;h+=1)a.dependencies(o[r][h],o);return o}},a.dependencyParse=function(c){if(m.isString(c)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return o.test(c)||m.warn("Plugin.dependencyParse:",c,"is not a valid dependency string."),{name:c.split("@")[0],range:c.split("@")[1]||"*"}}return{name:c.name,range:c.range||c.version}},a.versionParse=function(c){var o=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;o.test(c)||m.warn("Plugin.versionParse:",c,"is not a valid version or range.");var u=o.exec(c),r=Number(u[4]),h=Number(u[5]),d=Number(u[6]);return{isRange:!!(u[1]||u[2]),version:u[3],range:c,operator:u[1]||u[2]||"",major:r,minor:h,patch:d,parts:[r,h,d],prerelease:u[7],number:r*1e8+h*1e4+d}},a.versionSatisfies=function(c,o){o=o||"*";var u=a.versionParse(o),r=a.versionParse(c);if(u.isRange){if(u.operator==="*"||c==="*")return!0;if(u.operator===">")return r.number>u.number;if(u.operator===">=")return r.number>=u.number;if(u.operator==="~")return r.major===u.major&&r.minor===u.minor&&r.patch>=u.patch;if(u.operator==="^")return u.major>0?r.major===u.major&&r.number>=u.number:u.minor>0?r.minor===u.minor&&r.patch>=u.patch:r.patch===u.patch}return c===o||c==="*"}})()}),13037:((s,T,e)=>{var a={};s.exports=a;var m=e(35810),c=e(48413),o=e(53402);(function(){a._maxFrameDelta=66.66666666666667,a._frameDeltaFallback=16.666666666666668,a._timeBufferMargin=1.5,a._elapsedNextEstimate=1,a._smoothingLowerBound=.1,a._smoothingUpperBound=.9,a.create=function(r){var h={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},d=o.extend(h,r);return d.fps=0,d},a.run=function(r,h){return r.timeBuffer=a._frameDeltaFallback,(function d(l){r.frameRequestId=a._onNextFrame(r,d),l&&r.enabled&&a.tick(r,h,l)})(),r},a.tick=function(r,h,d){var l=o.now(),p=r.delta,g=0,x=d-r.timeLastTick;if((!x||!r.timeLastTick||x>Math.max(a._maxFrameDelta,r.maxFrameTime))&&(x=r.frameDelta||a._frameDeltaFallback),r.frameDeltaSmoothing){r.frameDeltaHistory.push(x),r.frameDeltaHistory=r.frameDeltaHistory.slice(-r.frameDeltaHistorySize);var y=r.frameDeltaHistory.slice(0).sort(),E=r.frameDeltaHistory.slice(y.length*a._smoothingLowerBound,y.length*a._smoothingUpperBound),w=u(E);x=w||x}r.frameDeltaSnapping&&(x=1e3/Math.round(1e3/x)),r.frameDelta=x,r.timeLastTick=d,r.timeBuffer+=r.frameDelta,r.timeBuffer=o.clamp(r.timeBuffer,0,r.frameDelta+p*a._timeBufferMargin),r.lastUpdatesDeferred=0;var C=r.maxUpdates||Math.ceil(r.maxFrameTime/p),A={timestamp:h.timing.timestamp};m.trigger(r,"beforeTick",A),m.trigger(r,"tick",A);for(var M=o.now();p>0&&r.timeBuffer>=p*a._timeBufferMargin;){m.trigger(r,"beforeUpdate",A),c.update(h,p),m.trigger(r,"afterUpdate",A),r.timeBuffer-=p,g+=1;var R=o.now()-l,P=o.now()-M,b=R+a._elapsedNextEstimate*P/g;if(g>=C||b>r.maxFrameTime){r.lastUpdatesDeferred=Math.round(Math.max(0,r.timeBuffer/p-a._timeBufferMargin));break}}h.timing.lastUpdatesPerFrame=g,m.trigger(r,"afterTick",A),r.frameDeltaHistory.length>=100&&(r.lastUpdatesDeferred&&Math.round(r.frameDelta/p)>C?o.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):r.lastUpdatesDeferred&&o.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof r.isFixed<"u"&&o.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(r.deltaMin||r.deltaMax)&&o.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),r.fps!==0&&o.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},a.stop=function(r){a._cancelNextFrame(r)},a._onNextFrame=function(r,h){if(typeof window<"u"&&window.requestAnimationFrame)r.frameRequestId=window.requestAnimationFrame(h);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return r.frameRequestId},a._cancelNextFrame=function(r){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(r.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var u=function(r){for(var h=0,d=r.length,l=0;l<d;l+=1)h+=r[l];return h/d||0};a._mean=u})()}),53614:((s,T,e)=>{var a={};s.exports=a;var m=e(22562),c=e(35810),o=e(53402);(function(){a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(u,r){for(var h=r/o._baseDelta,d=a._motionSleepThreshold,l=0;l<u.length;l++){var p=u[l],g=m.getSpeed(p),x=m.getAngularSpeed(p),y=g*g+x*x;if(p.force.x!==0||p.force.y!==0){a.set(p,!1);continue}var E=Math.min(p.motion,y),w=Math.max(p.motion,y);p.motion=a._minBias*E+(1-a._minBias)*w,p.sleepThreshold>0&&p.motion<d?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/h&&a.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},a.afterCollisions=function(u){for(var r=a._motionSleepThreshold,h=0;h<u.length;h++){var d=u[h];if(d.isActive){var l=d.collision,p=l.bodyA.parent,g=l.bodyB.parent;if(!(p.isSleeping&&g.isSleeping||p.isStatic||g.isStatic)&&(p.isSleeping||g.isSleeping)){var x=p.isSleeping&&!p.isStatic?p:g,y=x===p?g:p;!x.isStatic&&y.motion>r&&a.set(x,!1)}}}},a.set=function(u,r){var h=u.isSleeping;r?(u.isSleeping=!0,u.sleepCounter=u.sleepThreshold,u.positionImpulse.x=0,u.positionImpulse.y=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.speed=0,u.angularSpeed=0,u.motion=0,h||c.trigger(u,"sleepStart")):(u.isSleeping=!1,u.sleepCounter=0,h&&c.trigger(u,"sleepEnd"))}})()}),66280:((s,T,e)=>{var a={};s.exports=a;var m=e(41598),c=e(53402),o=e(22562),u=e(15647),r=e(31725);(function(){a.rectangle=function(h,d,l,p,g){g=g||{};var x={label:"Rectangle Body",position:{x:h,y:d},vertices:m.fromPath("L 0 0 L "+l+" 0 L "+l+" "+p+" L 0 "+p)};if(g.chamfer){var y=g.chamfer;x.vertices=m.chamfer(x.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete g.chamfer}return o.create(c.extend({},x,g))},a.trapezoid=function(h,d,l,p,g,x){x=x||{},g>=1&&c.warn("Bodies.trapezoid: slope parameter must be < 1."),g*=.5;var y=(1-g*2)*l,E=l*g,w=E+y,C=w+E,A;g<.5?A="L 0 0 L "+E+" "+-p+" L "+w+" "+-p+" L "+C+" 0":A="L 0 0 L "+w+" "+-p+" L "+C+" 0";var M={label:"Trapezoid Body",position:{x:h,y:d},vertices:m.fromPath(A)};if(x.chamfer){var R=x.chamfer;M.vertices=m.chamfer(M.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete x.chamfer}return o.create(c.extend({},M,x))},a.circle=function(h,d,l,p,g){p=p||{};var x={label:"Circle Body",circleRadius:l};g=g||25;var y=Math.ceil(Math.max(10,Math.min(g,l)));return y%2===1&&(y+=1),a.polygon(h,d,y,l,c.extend({},x,p))},a.polygon=function(h,d,l,p,g){if(g=g||{},l<3)return a.circle(h,d,p,g);for(var x=2*Math.PI/l,y="",E=x*.5,w=0;w<l;w+=1){var C=E+w*x,A=Math.cos(C)*p,M=Math.sin(C)*p;y+="L "+A.toFixed(3)+" "+M.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:h,y:d},vertices:m.fromPath(y)};if(g.chamfer){var P=g.chamfer;R.vertices=m.chamfer(R.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete g.chamfer}return o.create(c.extend({},R,g))},a.fromVertices=function(h,d,l,p,g,x,y,E){var w=c.getDecomp(),C,A,M,R,P,b,F,I,L,D,O;for(C=!!(w&&w.quickDecomp),p=p||{},M=[],g=typeof g<"u"?g:!1,x=typeof x<"u"?x:.01,y=typeof y<"u"?y:10,E=typeof E<"u"?E:.01,c.isArray(l[0])||(l=[l]),D=0;D<l.length;D+=1)if(b=l[D],R=m.isConvex(b),P=!R,P&&!C&&c.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!C)R?b=m.clockwiseSort(b):b=m.hull(b),M.push({position:{x:h,y:d},vertices:b});else{var z=b.map(function(j){return[j.x,j.y]});w.makeCCW(z),x!==!1&&w.removeCollinearPoints(z,x),E!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(z,E);var W=w.quickDecomp(z);for(F=0;F<W.length;F++){var k=W[F],X=k.map(function(j){return{x:j[0],y:j[1]}});y>0&&m.area(X)<y||M.push({position:m.centre(X),vertices:X})}}for(F=0;F<M.length;F++)M[F]=o.create(c.extend(M[F],p));if(g){var V=5;for(F=0;F<M.length;F++){var G=M[F];for(I=F+1;I<M.length;I++){var N=M[I];if(u.overlaps(G.bounds,N.bounds)){var H=G.vertices,U=N.vertices;for(L=0;L<G.vertices.length;L++)for(O=0;O<N.vertices.length;O++){var _=r.magnitudeSquared(r.sub(H[(L+1)%H.length],U[O])),$=r.magnitudeSquared(r.sub(H[L],U[(O+1)%U.length]));_<V&&$<V&&(H[L].isInternal=!0,U[O].isInternal=!0)}}}}}return M.length>1?(A=o.create(c.extend({parts:M.slice(0)},p)),o.setPosition(A,{x:h,y:d}),A):M[0]},a.flagCoincidentParts=function(h,d){d===void 0&&(d=5);for(var l=0;l<h.length;l++)for(var p=h[l],g=l+1;g<h.length;g++){var x=h[g];if(u.overlaps(p.bounds,x.bounds))for(var y=p.vertices,E=x.vertices,w=0;w<p.vertices.length;w++)for(var C=0;C<x.vertices.length;C++){var A=r.magnitudeSquared(r.sub(y[(w+1)%y.length],E[C])),M=r.magnitudeSquared(r.sub(y[w],E[(C+1)%E.length]));A<d&&M<d&&(y[w].isInternal=!0,E[C].isInternal=!0)}}return h}})()}),74116:((s,T,e)=>{var a={};s.exports=a;var m=e(69351),c=e(48140),o=e(53402),u=e(22562),r=e(66280);(function(){a.stack=function(h,d,l,p,g,x,y){for(var E=m.create({label:"Stack"}),w=h,C=d,A,M=0,R=0;R<p;R++){for(var P=0,b=0;b<l;b++){var F=y(w,C,b,R,A,M);if(F){var I=F.bounds.max.y-F.bounds.min.y,L=F.bounds.max.x-F.bounds.min.x;I>P&&(P=I),u.translate(F,{x:L*.5,y:I*.5}),w=F.bounds.max.x+g,m.addBody(E,F),A=F,M+=1}else w+=g}C+=P+x,w=h}return E},a.chain=function(h,d,l,p,g,x){for(var y=h.bodies,E=1;E<y.length;E++){var w=y[E-1],C=y[E],A=w.bounds.max.y-w.bounds.min.y,M=w.bounds.max.x-w.bounds.min.x,R=C.bounds.max.y-C.bounds.min.y,P=C.bounds.max.x-C.bounds.min.x,b={bodyA:w,pointA:{x:M*d,y:A*l},bodyB:C,pointB:{x:P*p,y:R*g}},F=o.extend(b,x);m.addConstraint(h,c.create(F))}return h.label+=" Chain",h},a.mesh=function(h,d,l,p,g){var x=h.bodies,y,E,w,C,A;for(y=0;y<l;y++){for(E=1;E<d;E++)w=x[E-1+y*d],C=x[E+y*d],m.addConstraint(h,c.create(o.extend({bodyA:w,bodyB:C},g)));if(y>0)for(E=0;E<d;E++)w=x[E+(y-1)*d],C=x[E+y*d],m.addConstraint(h,c.create(o.extend({bodyA:w,bodyB:C},g))),p&&E>0&&(A=x[E-1+(y-1)*d],m.addConstraint(h,c.create(o.extend({bodyA:A,bodyB:C},g)))),p&&E<d-1&&(A=x[E+1+(y-1)*d],m.addConstraint(h,c.create(o.extend({bodyA:A,bodyB:C},g))))}return h.label+=" Mesh",h},a.pyramid=function(h,d,l,p,g,x,y){return a.stack(h,d,l,p,g,x,function(E,w,C,A,M,R){var P=Math.min(p,Math.ceil(l/2)),b=M?M.bounds.max.x-M.bounds.min.x:0;if(!(A>P)){A=P-A;var F=A,I=l-1-A;if(!(C<F||C>I)){R===1&&u.translate(M,{x:(C+(l%2===1?1:-1))*b,y:0});var L=M?C*b:0;return y(h+L+C*g,w,C,A,M,R)}}})},a.newtonsCradle=function(h,d,l,p,g){for(var x=m.create({label:"Newtons Cradle"}),y=0;y<l;y++){var E=1.9,w=r.circle(h+y*(p*E),d+g,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),C=c.create({pointA:{x:h+y*(p*E),y:d},bodyB:w});m.addBody(x,w),m.addConstraint(x,C)}return x},a.car=function(h,d,l,p,g){var x=u.nextGroup(!0),y=20,E=-l*.5+y,w=l*.5-y,C=0,A=m.create({label:"Car"}),M=r.rectangle(h,d,l,p,{collisionFilter:{group:x},chamfer:{radius:p*.5},density:2e-4}),R=r.circle(h+E,d+C,g,{collisionFilter:{group:x},friction:.8}),P=r.circle(h+w,d+C,g,{collisionFilter:{group:x},friction:.8}),b=c.create({bodyB:M,pointB:{x:E,y:C},bodyA:R,stiffness:1,length:0}),F=c.create({bodyB:M,pointB:{x:w,y:C},bodyA:P,stiffness:1,length:0});return m.addBody(A,M),m.addBody(A,R),m.addBody(A,P),m.addConstraint(A,b),m.addConstraint(A,F),A},a.softBody=function(h,d,l,p,g,x,y,E,w,C){w=o.extend({inertia:1/0},w),C=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},C);var A=a.stack(h,d,l,p,g,x,function(M,R){return r.circle(M,R,E,w)});return a.mesh(A,l,p,y,C),A.label="Soft Body",A}})()}),66615:((s,T,e)=>{var a={};s.exports=a;var m=e(31725),c=e(53402);(function(){a.fromVertices=function(o){for(var u={},r=0;r<o.length;r++){var h=(r+1)%o.length,d=m.normalise({x:o[h].y-o[r].y,y:o[r].x-o[h].x}),l=d.y===0?1/0:d.x/d.y;l=l.toFixed(3).toString(),u[l]=d}return c.values(u)},a.rotate=function(o,u){if(u!==0)for(var r=Math.cos(u),h=Math.sin(u),d=0;d<o.length;d++){var l=o[d],p;p=l.x*r-l.y*h,l.y=l.x*h+l.y*r,l.x=p}}})()}),15647:(s=>{var T={};s.exports=T,(function(){T.create=function(e){var a={min:{x:0,y:0},max:{x:0,y:0}};return e&&T.update(a,e),a},T.update=function(e,a,m){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var c=0;c<a.length;c++){var o=a[c];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}m&&(m.x>0?e.max.x+=m.x:e.min.x+=m.x,m.y>0?e.max.y+=m.y:e.min.y+=m.y)},T.contains=function(e,a){return a.x>=e.min.x&&a.x<=e.max.x&&a.y>=e.min.y&&a.y<=e.max.y},T.overlaps=function(e,a){return e.min.x<=a.max.x&&e.max.x>=a.min.x&&e.max.y>=a.min.y&&e.min.y<=a.max.y},T.translate=function(e,a){e.min.x+=a.x,e.max.x+=a.x,e.min.y+=a.y,e.max.y+=a.y},T.shift=function(e,a){var m=e.max.x-e.min.x,c=e.max.y-e.min.y;e.min.x=a.x,e.max.x=a.x+m,e.min.y=a.y,e.max.y=a.y+c},T.wrap=function(e,a,m){var c=null,o=null;if(typeof a.min.x<"u"&&typeof a.max.x<"u"&&(e.min.x>a.max.x?c=a.min.x-e.max.x:e.max.x<a.min.x&&(c=a.max.x-e.min.x)),typeof a.min.y<"u"&&typeof a.max.y<"u"&&(e.min.y>a.max.y?o=a.min.y-e.max.y:e.max.y<a.min.y&&(o=a.max.y-e.min.y)),c!==null||o!==null)return{x:c||0,y:o||0}}})()}),74058:((s,T,e)=>{var a={};s.exports=a,e(15647);var m=e(53402);(function(){a.pathToVertices=function(c,o){typeof window<"u"&&!("SVGPathSeg"in window)&&m.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,r,h,d,l,p,g,x,y,E,w=[],C,A,M=0,R=0,P=0;o=o||15;var b=function(I,L,D){var O=D%2===1&&D>1;if(!y||I!=y.x||L!=y.y){y&&O?(C=y.x,A=y.y):(C=0,A=0);var z={x:C+I,y:A+L};(O||!y)&&(y=z),w.push(z),R=C+I,P=A+L}},F=function(I){var L=I.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":R=I.x,P=I.y;break;case"H":R=I.x;break;case"V":P=I.y;break}b(R,P,I.pathSegType)}};for(a._svgPathToAbsolute(c),h=c.getTotalLength(),p=[],u=0;u<c.pathSegList.numberOfItems;u+=1)p.push(c.pathSegList.getItem(u));for(g=p.concat();M<h;){if(E=c.getPathSegAtLength(M),l=p[E],l!=x){for(;g.length&&g[0]!=l;)F(g.shift());x=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=c.getPointAtLength(M),b(d.x,d.y,0);break}M+=o}for(u=0,r=g.length;u<r;++u)F(g[u]);return w},a._svgPathToAbsolute=function(c){for(var o,u,r,h,d,l,p=c.pathSegList,g=0,x=0,y=p.numberOfItems,E=0;E<y;++E){var w=p.getItem(E),C=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(C))"x"in w&&(g=w.x),"y"in w&&(x=w.y);else switch("x1"in w&&(r=g+w.x1),"x2"in w&&(d=g+w.x2),"y1"in w&&(h=x+w.y1),"y2"in w&&(l=x+w.y2),"x"in w&&(g+=w.x),"y"in w&&(x+=w.y),C){case"m":p.replaceItem(c.createSVGPathSegMovetoAbs(g,x),E);break;case"l":p.replaceItem(c.createSVGPathSegLinetoAbs(g,x),E);break;case"h":p.replaceItem(c.createSVGPathSegLinetoHorizontalAbs(g),E);break;case"v":p.replaceItem(c.createSVGPathSegLinetoVerticalAbs(x),E);break;case"c":p.replaceItem(c.createSVGPathSegCurvetoCubicAbs(g,x,r,h,d,l),E);break;case"s":p.replaceItem(c.createSVGPathSegCurvetoCubicSmoothAbs(g,x,d,l),E);break;case"q":p.replaceItem(c.createSVGPathSegCurvetoQuadraticAbs(g,x,r,h),E);break;case"t":p.replaceItem(c.createSVGPathSegCurvetoQuadraticSmoothAbs(g,x),E);break;case"a":p.replaceItem(c.createSVGPathSegArcAbs(g,x,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),E);break;case"z":case"Z":g=o,x=u;break}(C=="M"||C=="m")&&(o=g,u=x)}}})()}),31725:(s=>{var T={};s.exports=T,(function(){T.create=function(e,a){return{x:e||0,y:a||0}},T.clone=function(e){return{x:e.x,y:e.y}},T.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},T.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},T.rotate=function(e,a,m){var c=Math.cos(a),o=Math.sin(a);m||(m={});var u=e.x*c-e.y*o;return m.y=e.x*o+e.y*c,m.x=u,m},T.rotateAbout=function(e,a,m,c){var o=Math.cos(a),u=Math.sin(a);c||(c={});var r=m.x+((e.x-m.x)*o-(e.y-m.y)*u);return c.y=m.y+((e.x-m.x)*u+(e.y-m.y)*o),c.x=r,c},T.normalise=function(e){var a=T.magnitude(e);return a===0?{x:0,y:0}:{x:e.x/a,y:e.y/a}},T.dot=function(e,a){return e.x*a.x+e.y*a.y},T.cross=function(e,a){return e.x*a.y-e.y*a.x},T.cross3=function(e,a,m){return(a.x-e.x)*(m.y-e.y)-(a.y-e.y)*(m.x-e.x)},T.add=function(e,a,m){return m||(m={}),m.x=e.x+a.x,m.y=e.y+a.y,m},T.sub=function(e,a,m){return m||(m={}),m.x=e.x-a.x,m.y=e.y-a.y,m},T.mult=function(e,a){return{x:e.x*a,y:e.y*a}},T.div=function(e,a){return{x:e.x/a,y:e.y/a}},T.perp=function(e,a){return a=a===!0?-1:1,{x:a*-e.y,y:a*e.x}},T.neg=function(e){return{x:-e.x,y:-e.y}},T.angle=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)},T._temp=[T.create(),T.create(),T.create(),T.create(),T.create(),T.create()]})()}),41598:((s,T,e)=>{var a={};s.exports=a;var m=e(31725),c=e(53402);(function(){a.create=function(o,u){for(var r=[],h=0;h<o.length;h++){var d=o[h],l={x:d.x,y:d.y,index:h,body:u,isInternal:!1};r.push(l)}return r},a.fromPath=function(o,u){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,h=[];return o.replace(r,function(d,l,p){h.push({x:parseFloat(l),y:parseFloat(p)})}),a.create(h,u)},a.centre=function(o){for(var u=a.area(o,!0),r={x:0,y:0},h,d,l,p=0;p<o.length;p++)l=(p+1)%o.length,h=m.cross(o[p],o[l]),d=m.mult(m.add(o[p],o[l]),h),r=m.add(r,d);return m.div(r,6*u)},a.mean=function(o){for(var u={x:0,y:0},r=0;r<o.length;r++)u.x+=o[r].x,u.y+=o[r].y;return m.div(u,o.length)},a.area=function(o,u){for(var r=0,h=o.length-1,d=0;d<o.length;d++)r+=(o[h].x-o[d].x)*(o[h].y+o[d].y),h=d;return u?r/2:Math.abs(r)/2},a.inertia=function(o,u){for(var r=0,h=0,d=o,l,p,g=0;g<d.length;g++)p=(g+1)%d.length,l=Math.abs(m.cross(d[p],d[g])),r+=l*(m.dot(d[p],d[p])+m.dot(d[p],d[g])+m.dot(d[g],d[g])),h+=l;return u/6*(r/h)},a.translate=function(o,u,r){r=typeof r<"u"?r:1;var h=o.length,d=u.x*r,l=u.y*r,p;for(p=0;p<h;p++)o[p].x+=d,o[p].y+=l;return o},a.rotate=function(o,u,r){if(u!==0){var h=Math.cos(u),d=Math.sin(u),l=r.x,p=r.y,g=o.length,x,y,E,w;for(w=0;w<g;w++)x=o[w],y=x.x-l,E=x.y-p,x.x=l+(y*h-E*d),x.y=p+(y*d+E*h);return o}},a.contains=function(o,u){for(var r=u.x,h=u.y,d=o.length,l=o[d-1],p,g=0;g<d;g++){if(p=o[g],(r-l.x)*(p.y-l.y)+(h-l.y)*(l.x-p.x)>0)return!1;l=p}return!0},a.scale=function(o,u,r,h){if(u===1&&r===1)return o;h=h||a.centre(o);for(var d,l,p=0;p<o.length;p++)d=o[p],l=m.sub(d,h),o[p].x=h.x+l.x*u,o[p].y=h.y+l.y*r;return o},a.chamfer=function(o,u,r,h,d){typeof u=="number"?u=[u]:u=u||[8],r=typeof r<"u"?r:-1,h=h||2,d=d||14;for(var l=[],p=0;p<o.length;p++){var g=o[p-1>=0?p-1:o.length-1],x=o[p],y=o[(p+1)%o.length],E=u[p<u.length?p:u.length-1];if(E===0){l.push(x);continue}var w=m.normalise({x:x.y-g.y,y:g.x-x.x}),C=m.normalise({x:y.y-x.y,y:x.x-y.x}),A=Math.sqrt(2*Math.pow(E,2)),M=m.mult(c.clone(w),E),R=m.normalise(m.mult(m.add(w,C),.5)),P=m.sub(x,m.mult(R,A)),b=r;r===-1&&(b=Math.pow(E,.32)*1.75),b=c.clamp(b,h,d),b%2===1&&(b+=1);for(var F=Math.acos(m.dot(w,C)),I=F/b,L=0;L<b;L++)l.push(m.add(m.rotate(M,I*L),P))}return l},a.clockwiseSort=function(o){var u=a.mean(o);return o.sort(function(r,h){return m.angle(u,r)-m.angle(u,h)}),o},a.isConvex=function(o){var u=0,r=o.length,h,d,l,p;if(r<3)return null;for(h=0;h<r;h++)if(d=(h+1)%r,l=(h+2)%r,p=(o[d].x-o[h].x)*(o[l].y-o[d].y),p-=(o[d].y-o[h].y)*(o[l].x-o[d].x),p<0?u|=1:p>0&&(u|=2),u===3)return!1;return u!==0?!0:null},a.hull=function(o){var u=[],r=[],h,d;for(o=o.slice(0),o.sort(function(l,p){var g=l.x-p.x;return g!==0?g:l.y-p.y}),d=0;d<o.length;d+=1){for(h=o[d];r.length>=2&&m.cross3(r[r.length-2],r[r.length-1],h)<=0;)r.pop();r.push(h)}for(d=o.length-1;d>=0;d-=1){for(h=o[d];u.length>=2&&m.cross3(u[u.length-2],u[u.length-1],h)<=0;)u.pop();u.push(h)}return u.pop(),r.pop(),u.concat(r)}})()}),55973:(s=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={decomp:F,quickDecomp:O,isSimple:L,removeCollinearPoints:z,removeDuplicatePoints:W,makeCCW:y};function T(V,G,N){N=N||0;var H=[0,0],U,_,$,j,Z,it,at;return U=V[1][1]-V[0][1],_=V[0][0]-V[1][0],$=U*V[0][0]+_*V[0][1],j=G[1][1]-G[0][1],Z=G[0][0]-G[1][0],it=j*G[0][0]+Z*G[0][1],at=U*Z-j*_,k(at,0,N)||(H[0]=(Z*$-_*it)/at,H[1]=(U*it-j*$)/at),H}function e(V,G,N,H){var U=G[0]-V[0],_=G[1]-V[1],$=H[0]-N[0],j=H[1]-N[1];if($*_-j*U===0)return!1;var Z=(U*(N[1]-V[1])+_*(V[0]-N[0]))/($*_-j*U),it=($*(V[1]-N[1])+j*(N[0]-V[0]))/(j*U-$*_);return Z>=0&&Z<=1&&it>=0&&it<=1}function a(V,G,N){return(G[0]-V[0])*(N[1]-V[1])-(N[0]-V[0])*(G[1]-V[1])}function m(V,G,N){return a(V,G,N)>0}function c(V,G,N){return a(V,G,N)>=0}function o(V,G,N){return a(V,G,N)<0}function u(V,G,N){return a(V,G,N)<=0}var r=[],h=[];function d(V,G,N,H){if(H){var U=r,_=h;U[0]=G[0]-V[0],U[1]=G[1]-V[1],_[0]=N[0]-G[0],_[1]=N[1]-G[1];var $=U[0]*_[0]+U[1]*_[1],j=Math.sqrt(U[0]*U[0]+U[1]*U[1]),Z=Math.sqrt(_[0]*_[0]+_[1]*_[1]),it=Math.acos($/(j*Z));return it<H}else return a(V,G,N)===0}function l(V,G){var N=G[0]-V[0],H=G[1]-V[1];return N*N+H*H}function p(V,G){var N=V.length;return V[G<0?G%N+N:G%N]}function g(V){V.length=0}function x(V,G,N,H){for(var U=N;U<H;U++)V.push(G[U])}function y(V){for(var G=0,N=V,H=1;H<V.length;++H)(N[H][1]<N[G][1]||N[H][1]===N[G][1]&&N[H][0]>N[G][0])&&(G=H);return m(p(V,G-1),p(V,G),p(V,G+1))?!1:(E(V),!0)}function E(V){for(var G=[],N=V.length,H=0;H!==N;H++)G.push(V.pop());for(var H=0;H!==N;H++)V[H]=G[H]}function w(V,G){return o(p(V,G-1),p(V,G),p(V,G+1))}var C=[],A=[];function M(V,G,N){var H,U,_=C,$=A;if(c(p(V,G+1),p(V,G),p(V,N))&&u(p(V,G-1),p(V,G),p(V,N)))return!1;U=l(p(V,G),p(V,N));for(var j=0;j!==V.length;++j)if(!((j+1)%V.length===G||j===G)&&c(p(V,G),p(V,N),p(V,j+1))&&u(p(V,G),p(V,N),p(V,j))&&(_[0]=p(V,G),_[1]=p(V,N),$[0]=p(V,j),$[1]=p(V,j+1),H=T(_,$),l(p(V,G),H)<U))return!1;return!0}function R(V,G,N){for(var H=0;H!==V.length;++H)if(!(H===G||H===N||(H+1)%V.length===G||(H+1)%V.length===N)&&e(p(V,G),p(V,N),p(V,H),p(V,H+1)))return!1;return!0}function P(V,G,N,H){var U=H||[];if(g(U),G<N)for(var _=G;_<=N;_++)U.push(V[_]);else{for(var _=0;_<=N;_++)U.push(V[_]);for(var _=G;_<V.length;_++)U.push(V[_])}return U}function b(V){for(var G=[],N=[],H=[],U=[],_=Number.MAX_VALUE,$=0;$<V.length;++$)if(w(V,$)){for(var j=0;j<V.length;++j)if(M(V,$,j)){N=b(P(V,$,j,U)),H=b(P(V,j,$,U));for(var Z=0;Z<H.length;Z++)N.push(H[Z]);N.length<_&&(G=N,_=N.length,G.push([p(V,$),p(V,j)]))}}return G}function F(V){var G=b(V);return G.length>0?I(V,G):[V]}function I(V,G){if(G.length===0)return[V];if(G instanceof Array&&G.length&&G[0]instanceof Array&&G[0].length===2&&G[0][0]instanceof Array){for(var N=[V],H=0;H<G.length;H++)for(var U=G[H],_=0;_<N.length;_++){var $=N[_],j=I($,U);if(j){N.splice(_,1),N.push(j[0],j[1]);break}}return N}else{var U=G,H=V.indexOf(U[0]),_=V.indexOf(U[1]);return H!==-1&&_!==-1?[P(V,H,_),P(V,_,H)]:!1}}function L(V){var G=V,N;for(N=0;N<G.length-1;N++)for(var H=0;H<N-1;H++)if(e(G[N],G[N+1],G[H],G[H+1]))return!1;for(N=1;N<G.length-2;N++)if(e(G[0],G[G.length-1],G[N],G[N+1]))return!1;return!0}function D(V,G,N,H,U){U=U||0;var _=G[1]-V[1],$=V[0]-G[0],j=_*V[0]+$*V[1],Z=H[1]-N[1],it=N[0]-H[0],at=Z*N[0]+it*N[1],q=_*it-Z*$;return k(q,0,U)?[0,0]:[(it*j-$*at)/q,(_*at-Z*j)/q]}function O(V,G,N,H,U,_,$){_=_||100,$=$||0,U=U||25,G=typeof G<"u"?G:[],N=N||[],H=H||[];var j=[0,0],Z=[0,0],it=[0,0],at=0,q=0,ft=0,vt=0,Tt=0,ut=0,Bt=0,Pt=[],et=[],Q=V,lt=V;if(lt.length<3)return G;if($++,$>_)return console.warn("quickDecomp: max level ("+_+") reached."),G;for(var pt=0;pt<V.length;++pt)if(w(Q,pt)){N.push(Q[pt]),at=q=Number.MAX_VALUE;for(var Mt=0;Mt<V.length;++Mt)m(p(Q,pt-1),p(Q,pt),p(Q,Mt))&&u(p(Q,pt-1),p(Q,pt),p(Q,Mt-1))&&(it=D(p(Q,pt-1),p(Q,pt),p(Q,Mt),p(Q,Mt-1)),o(p(Q,pt+1),p(Q,pt),it)&&(ft=l(Q[pt],it),ft<q&&(q=ft,Z=it,ut=Mt))),m(p(Q,pt+1),p(Q,pt),p(Q,Mt+1))&&u(p(Q,pt+1),p(Q,pt),p(Q,Mt))&&(it=D(p(Q,pt+1),p(Q,pt),p(Q,Mt),p(Q,Mt+1)),m(p(Q,pt-1),p(Q,pt),it)&&(ft=l(Q[pt],it),ft<at&&(at=ft,j=it,Tt=Mt)));if(ut===(Tt+1)%V.length)it[0]=(Z[0]+j[0])/2,it[1]=(Z[1]+j[1])/2,H.push(it),pt<Tt?(x(Pt,Q,pt,Tt+1),Pt.push(it),et.push(it),ut!==0&&x(et,Q,ut,Q.length),x(et,Q,0,pt+1)):(pt!==0&&x(Pt,Q,pt,Q.length),x(Pt,Q,0,Tt+1),Pt.push(it),et.push(it),x(et,Q,ut,pt+1));else{if(ut>Tt&&(Tt+=V.length),vt=Number.MAX_VALUE,Tt<ut)return G;for(var Mt=ut;Mt<=Tt;++Mt)c(p(Q,pt-1),p(Q,pt),p(Q,Mt))&&u(p(Q,pt+1),p(Q,pt),p(Q,Mt))&&(ft=l(p(Q,pt),p(Q,Mt)),ft<vt&&R(Q,pt,Mt)&&(vt=ft,Bt=Mt%V.length));pt<Bt?(x(Pt,Q,pt,Bt+1),Bt!==0&&x(et,Q,Bt,lt.length),x(et,Q,0,pt+1)):(pt!==0&&x(Pt,Q,pt,lt.length),x(Pt,Q,0,Bt+1),x(et,Q,Bt,pt+1))}return Pt.length<et.length?(O(Pt,G,N,H,U,_,$),O(et,G,N,H,U,_,$)):(O(et,G,N,H,U,_,$),O(Pt,G,N,H,U,_,$)),G}return G.push(V),G}function z(V,G){for(var N=0,H=V.length-1;V.length>3&&H>=0;--H)d(p(V,H-1),p(V,H),p(V,H+1),G)&&(V.splice(H%V.length,1),N++);return N}function W(V,G){for(var N=V.length-1;N>=1;--N)for(var H=V[N],U=N-1;U>=0;--U)if(X(H,V[U],G)){V.splice(N,1);continue}}function k(V,G,N){return N=N||0,Math.abs(V-G)<=N}function X(V,G,N){return k(V[0],G[0],N)&&k(V[1],G[1],N)}}),52018:((s,T,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(83419),m=new a({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});s.exports=m}),42363:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};s.exports=T}),37277:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={},a={};a.register=function(m,c,o,u){u===void 0&&(u=!1),T[m]={plugin:c,mapping:o,custom:u}},a.registerCustom=function(m,c,o,u){e[m]={plugin:c,mapping:o,data:u}},a.hasCore=function(m){return T.hasOwnProperty(m)},a.hasCustom=function(m){return e.hasOwnProperty(m)},a.getCore=function(m){return T[m]},a.getCustom=function(m){return e[m]},a.getCustomClass=function(m){return e.hasOwnProperty(m)?e[m].plugin:null},a.remove=function(m){T.hasOwnProperty(m)&&delete T[m]},a.removeCustom=function(m){e.hasOwnProperty(m)&&delete e[m]},a.destroyCorePlugins=function(){for(var m in T)T.hasOwnProperty(m)&&delete T[m]},a.destroyCustomPlugins=function(){for(var m in e)e.hasOwnProperty(m)&&delete e[m]},s.exports=a}),77332:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(8443),c=e(50792),o=e(74099),u=e(44603),r=e(39429),h=e(95540),d=e(37277),l=e(72905),p=e(8054),g=new a({Extends:c,initialize:function(y){c.call(this),this.game=y,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],y.isBooted||y.config.renderType===p.HEADLESS?this.boot():y.events.once(m.BOOT,this.boot,this)},boot:function(){var x,y,E,w,C,A,M,R=this.game.config,P=R.installGlobalPlugins;for(P=P.concat(this._pendingGlobal),x=0;x<P.length;x++)y=P[x],E=h(y,"key",null),w=h(y,"plugin",null),C=h(y,"start",!1),A=h(y,"mapping",null),M=h(y,"data",null),E&&(w?this.install(E,w,C,A,M):console.warn("Missing `plugin` for key: "+E));for(P=R.installScenePlugins,P=P.concat(this._pendingScene),x=0;x<P.length;x++)y=P[x],E=h(y,"key",null),w=h(y,"plugin",null),A=h(y,"mapping",null),E&&(w?this.installScenePlugin(E,w,A):console.warn("Missing `plugin` for key: "+E));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(m.DESTROY,this.destroy,this)},addToScene:function(x,y,E){var w,C,A,M=this.game,R=x.scene,P=x.settings.map,b=x.settings.isBooted;for(w=0;w<y.length;w++)C=y[w],M[C]?(x[C]=M[C],P.hasOwnProperty(C)&&(R[P[C]]=x[C])):C==="game"&&P.hasOwnProperty(C)&&(R[P[C]]=M);for(var F=0;F<E.length;F++)for(A=E[F],w=0;w<A.length;w++)if(C=A[w],!!d.hasCore(C)){var I=d.getCore(C),L=I.mapping,D=new I.plugin(R,this,L);x[L]=D,I.custom?R[L]=D:P.hasOwnProperty(L)&&(R[P[L]]=D),b&&D.boot()}for(A=this.plugins,w=0;w<A.length;w++){var O=A[w];O.mapping&&(R[O.mapping]=O.plugin)}},getDefaultScenePlugins:function(){var x=this.game.config.defaultPlugins;return x=x.concat(this.scenePlugins),x},installScenePlugin:function(x,y,E,w,C){if(C===void 0&&(C=!1),typeof y!="function"){console.warn("Invalid Scene Plugin: "+x);return}if(d.hasCore(x)||d.register(x,y,E,!0),this.scenePlugins.indexOf(x)===-1)this.scenePlugins.push(x);else if(!C&&d.hasCore(x)){console.warn("Scene Plugin key in use: "+x);return}if(w){var A=new y(w,this,x);w.sys[x]=A,E&&E!==""&&(w[E]=A),A.boot()}},install:function(x,y,E,w,C){if(E===void 0&&(E=!1),w===void 0&&(w=null),C===void 0&&(C=null),typeof y!="function")return console.warn("Invalid Plugin: "+x),null;if(d.hasCustom(x))return console.warn("Plugin key in use: "+x),null;if(w!==null&&(E=!0),!this.game.isBooted)this._pendingGlobal.push({key:x,plugin:y,start:E,mapping:w,data:C});else if(d.registerCustom(x,y,w,C),E)return this.start(x);return null},getIndex:function(x){for(var y=this.plugins,E=0;E<y.length;E++){var w=y[E];if(w.key===x)return E}return-1},getEntry:function(x){var y=this.getIndex(x);if(y!==-1)return this.plugins[y]},isActive:function(x){var y=this.getEntry(x);return y&&y.active},start:function(x,y){y===void 0&&(y=x);var E=this.getEntry(y);return E&&!E.active?(E.active=!0,E.plugin.start()):E||(E=this.createEntry(x,y)),E?E.plugin:null},createEntry:function(x,y){var E=d.getCustom(x);if(E){var w=new E.plugin(this);E={key:y,plugin:w,active:!0,mapping:E.mapping,data:E.data},this.plugins.push(E),w.init(E.data),w.start()}return E},stop:function(x){var y=this.getEntry(x);return y&&y.active&&(y.active=!1,y.plugin.stop()),this},get:function(x,y){y===void 0&&(y=!0);var E=this.getEntry(x);if(E)return E.plugin;var w=this.getClass(x);return w&&y?(E=this.createEntry(x,x),E?E.plugin:null):w||null},getClass:function(x){return d.getCustomClass(x)},removeGlobalPlugin:function(x){var y=this.getEntry(x);y&&l(this.plugins,y),d.removeCustom(x)},removeScenePlugin:function(x){l(this.scenePlugins,x),d.remove(x)},registerGameObject:function(x,y,E){return y&&r.register(x,y),E&&u.register(x,E),this},removeGameObject:function(x,y,E){return y===void 0&&(y=!0),E===void 0&&(E=!0),y&&r.remove(x),E&&u.remove(x),this},registerFileType:function(x,y,E){o.register(x,y),E&&E.sys.load&&(E.sys.load[x]=y)},destroy:function(){for(var x=0;x<this.plugins.length;x++)this.plugins[x].plugin.destroy();d.destroyCustomPlugins(),this.game.noReturn&&d.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});s.exports=g}),45145:((s,T,e)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(52018),m=e(83419),c=e(44594),o=new m({Extends:a,initialize:function(r,h,d){a.call(this,h),this.scene=r,this.systems=r.sys,this.pluginKey=d,r.sys.events.once(c.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});s.exports=o}),18922:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={BasePlugin:e(52018),DefaultPlugins:e(42363),PluginCache:e(37277),PluginManager:e(77332),ScenePlugin:e(45145)}}),63595:(()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(s){const T=performance.now(),e=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,m=(c,o)=>{const u=this.getVideoPlaybackQuality(),r=this.mozPresentedFrames||this.mozPaintedFrames||u.totalVideoFrames-u.droppedVideoFrames;if(r>a){const h=this.mozFrameDelay||u.totalFrameDelay-e.totalFrameDelay||0,d=o-c;s(o,{presentationTime:o+h*1e3,expectedDisplayTime:o+d,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+d/1e3,presentedFrames:r,processingDuration:h}),delete this._rvfcpolyfillmap[T]}else this._rvfcpolyfillmap[T]=requestAnimationFrame(h=>m(o,h))};return this._rvfcpolyfillmap[T]=requestAnimationFrame(c=>m(T,c)),T},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(s){cancelAnimationFrame(this._rvfcpolyfillmap[s]),delete this._rvfcpolyfillmap[s]})}),10312:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}}),29795:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DEFAULT:0,LINEAR:0,NEAREST:1};s.exports=T}),68627:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19715),m=e(32880),c=e(83419),o=e(8054),u=e(50792),r=e(92503),h=e(56373),d=e(97480),l=e(69442),p=e(8443),g=e(61340),x=new c({Extends:u,initialize:function(E){u.call(this);var w=E.config;this.config={clearBeforeRender:w.clearBeforeRender,backgroundColor:w.backgroundColor,antialias:w.antialias,roundPixels:w.roundPixels,transparent:w.transparent},this.game=E,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=E.canvas;var C={alpha:w.transparent,desynchronized:w.desynchronized,willReadFrequently:!1};this.gameContext=w.context?w.context:this.gameCanvas.getContext("2d",C),this.currentContext=this.gameContext,this.antialias=w.antialias,this.blendModes=h(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new g,this._tempMatrix2=new g,this._tempMatrix3=new g,this.isBooted=!1,this.init()},init:function(){var y=this.game;y.events.once(p.BOOT,function(){var E=this.config;if(!E.transparent){var w=this.gameContext,C=this.gameCanvas;w.fillStyle=E.backgroundColor.rgba,w.fillRect(0,0,C.width,C.height)}},this),y.textures.once(l.READY,this.boot,this)},boot:function(){var y=this.game,E=y.scale.baseSize;this.width=E.width,this.height=E.height,this.isBooted=!0,y.scale.on(d.RESIZE,this.onResize,this),this.resize(E.width,E.height)},onResize:function(y,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},resize:function(y,E){this.width=y,this.height=E,this.emit(r.RESIZE,y,E)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(y){return this.currentContext.globalCompositeOperation=y,this},setContext:function(y){return this.currentContext=y||this.gameContext,this},setAlpha:function(y){return this.currentContext.globalAlpha=y,this},preRender:function(){var y=this.gameContext,E=this.config,w=this.width,C=this.height;y.globalAlpha=1,y.globalCompositeOperation="source-over",y.setTransform(1,0,0,1,0,0),this.emit(r.PRE_RENDER_CLEAR),E.clearBeforeRender&&(y.clearRect(0,0,w,C),E.transparent||(y.fillStyle=E.backgroundColor.rgba,y.fillRect(0,0,w,C))),y.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(y,E,w){var C=E.length;this.emit(r.RENDER,y,w);var A=w.x,M=w.y,R=w.width,P=w.height,b=w.renderToTexture?w.context:y.sys.context;b.save(),this.game.scene.customViewports&&(b.beginPath(),b.rect(A,M,R,P),b.clip()),w.emit(a.PRE_RENDER,w),this.currentContext=b;var F=w.mask;F&&F.preRenderCanvas(this,null,w._maskCamera),w.transparent||(b.fillStyle=w.backgroundColor.rgba,b.fillRect(A,M,R,P)),b.globalAlpha=w.alpha,b.globalCompositeOperation="source-over",this.drawCount+=C,w.renderToTexture&&w.emit(a.PRE_RENDER,w),w.matrix.copyToContext(b);for(var I=0;I<C;I++){var L=E[I];L.mask&&L.mask.preRenderCanvas(this,L,w),L.renderCanvas(this,L,w),L.mask&&L.mask.postRenderCanvas(this,L,w)}b.setTransform(1,0,0,1,0,0),b.globalCompositeOperation="source-over",b.globalAlpha=1,w.flashEffect.postRenderCanvas(b),w.fadeEffect.postRenderCanvas(b),w.dirty=!1,F&&F.postRenderCanvas(this),b.restore(),w.renderToTexture&&(w.emit(a.POST_RENDER,w),w.renderToGame&&y.sys.context.drawImage(w.canvas,A,M)),w.emit(a.POST_RENDER,w)},postRender:function(){var y=this.gameContext;y.restore(),this.emit(r.POST_RENDER);var E=this.snapshotState;E.callback&&(m(this.gameCanvas,E),E.callback=null)},snapshotCanvas:function(y,E,w,C,A,M,R,P,b){w===void 0&&(w=!1),this.snapshotArea(C,A,M,R,E,P,b);var F=this.snapshotState;return F.getPixel=w,m(y,F),F.callback=null,this},snapshot:function(y,E,w){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,y,E,w)},snapshotArea:function(y,E,w,C,A,M,R){var P=this.snapshotState;return P.callback=A,P.type=M,P.encoder=R,P.getPixel=!1,P.x=y,P.y=E,P.width=Math.min(w,this.gameCanvas.width),P.height=Math.min(C,this.gameCanvas.height),this},snapshotPixel:function(y,E,w){return this.snapshotArea(y,E,1,1,w),this.snapshotState.getPixel=!0,this},batchSprite:function(y,E,w,C){var A=w.alpha*y.alpha;if(A!==0){var M=this.currentContext,R=this._tempMatrix1,P=this._tempMatrix2,b=E.canvasData,F=b.x,I=b.y,L=E.cutWidth,D=E.cutHeight,O=E.customPivot,z=E.source.resolution,W=y.displayOriginX,k=y.displayOriginY,X=-W+E.x,V=-k+E.y;if(y.isCropped){var G=y._crop;(G.flipX!==y.flipX||G.flipY!==y.flipY)&&E.updateCropUVs(G,y.flipX,y.flipY),L=G.cw,D=G.ch,F=G.cx,I=G.cy,X=-W+G.x,V=-k+G.y,y.flipX&&(X>=0?X=-(X+L):X<0&&(X=Math.abs(X)-L)),y.flipY&&(V>=0?V=-(V+D):V<0&&(V=Math.abs(V)-D))}var N=1,H=1;y.flipX&&(O||(X+=-E.realWidth+W*2),N=-1),y.flipY&&(O||(V+=-E.realHeight+k*2),H=-1);var U=y.x,_=y.y;if(w.roundPixels&&(U=Math.floor(U),_=Math.floor(_)),P.applyITRS(U,_,y.rotation,y.scaleX*N,y.scaleY*H),R.copyFrom(w.matrix),C?(R.multiplyWithOffset(C,-w.scrollX*y.scrollFactorX,-w.scrollY*y.scrollFactorY),P.e=U,P.f=_):(P.e-=w.scrollX*y.scrollFactorX,P.f-=w.scrollY*y.scrollFactorY),R.multiply(P),w.renderRoundPixels&&(R.e=Math.floor(R.e+.5),R.f=Math.floor(R.f+.5)),M.save(),R.setToContext(M),M.globalCompositeOperation=this.blendModes[y.blendMode],M.globalAlpha=A,M.imageSmoothingEnabled=!E.source.scaleMode,y.mask&&y.mask.preRenderCanvas(this,y,w),L>0&&D>0){var $=L/z,j=D/z;w.roundPixels&&(X=Math.floor(X+.5),V=Math.floor(V+.5),$+=.5,j+=.5),M.drawImage(E.source.image,F,I,L,D,X,V,$,j)}y.mask&&y.mask.postRenderCanvas(this,y,w),M.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});s.exports=x}),55830:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CanvasRenderer:e(68627),GetBlendModes:e(56373),SetTransform:e(20926)}}),56373:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),m=e(89289),c=function(){var o=[],u=m.supportNewBlendModes,r="source-over";return o[a.NORMAL]=r,o[a.ADD]="lighter",o[a.MULTIPLY]=u?"multiply":r,o[a.SCREEN]=u?"screen":r,o[a.OVERLAY]=u?"overlay":r,o[a.DARKEN]=u?"darken":r,o[a.LIGHTEN]=u?"lighten":r,o[a.COLOR_DODGE]=u?"color-dodge":r,o[a.COLOR_BURN]=u?"color-burn":r,o[a.HARD_LIGHT]=u?"hard-light":r,o[a.SOFT_LIGHT]=u?"soft-light":r,o[a.DIFFERENCE]=u?"difference":r,o[a.EXCLUSION]=u?"exclusion":r,o[a.HUE]=u?"hue":r,o[a.SATURATION]=u?"saturation":r,o[a.COLOR]=u?"color":r,o[a.LUMINOSITY]=u?"luminosity":r,o[a.ERASE]="destination-out",o[a.SOURCE_IN]="source-in",o[a.SOURCE_OUT]="source-out",o[a.SOURCE_ATOP]="source-atop",o[a.DESTINATION_OVER]="destination-over",o[a.DESTINATION_IN]="destination-in",o[a.DESTINATION_OUT]="destination-out",o[a.DESTINATION_ATOP]="destination-atop",o[a.LIGHTER]="lighter",o[a.COPY]="copy",o[a.XOR]="xor",o};s.exports=c}),20926:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91296),m=function(c,o,u,r,h){var d=r.alpha*u.alpha;if(d<=0)return!1;var l=a(u,r,h).calc;return o.globalCompositeOperation=c.blendModes[u.blendMode],o.globalAlpha=d,o.save(),l.setToContext(o),o.imageSmoothingEnabled=u.frame?!u.frame.source.scaleMode:c.antialias,!0};s.exports=m}),63899:(s=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="losewebgl"}),6119:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postrender"}),48070:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prerender"}),15640:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="render"}),8912:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resize"}),87124:(s=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="restorewebgl"}),92503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={LOSE_WEBGL:e(63899),POST_RENDER:e(6119),PRE_RENDER:e(48070),RENDER:e(15640),RESIZE:e(8912),RESTORE_WEBGL:e(87124)}}),36909:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Events:e(92503),Snapshot:e(89966)},s.exports.Canvas=e(55830),s.exports.WebGL=e(4159)}),32880:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),m=e(40987),c=e(95540),o=function(u,r){var h=c(r,"callback"),d=c(r,"type","image/png"),l=c(r,"encoder",.92),p=Math.abs(Math.round(c(r,"x",0))),g=Math.abs(Math.round(c(r,"y",0))),x=Math.floor(c(r,"width",u.width)),y=Math.floor(c(r,"height",u.height)),E=c(r,"getPixel",!1);if(E){var w=u.getContext("2d",{willReadFrequently:!1}),C=w.getImageData(p,g,1,1),A=C.data;h.call(null,new m(A[0],A[1],A[2],A[3]))}else if(p!==0||g!==0||x!==u.width||y!==u.height){var M=a.createWebGL(this,x,y),R=M.getContext("2d",{willReadFrequently:!0});x>0&&y>0&&R.drawImage(u,p,g,x,y,0,0,x,y);var P=new Image;P.onerror=function(){h.call(null),a.remove(M)},P.onload=function(){h.call(null,P),a.remove(M)},P.src=M.toDataURL(d,l)}else{var b=new Image;b.onerror=function(){h.call(null)},b.onload=function(){h.call(null,b)},b.src=u.toDataURL(d,l)}};s.exports=o}),88815:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),m=e(40987),c=e(95540),o=function(u,r){var h=u,d=c(r,"callback"),l=c(r,"type","image/png"),p=c(r,"encoder",.92),g=Math.abs(Math.round(c(r,"x",0))),x=Math.abs(Math.round(c(r,"y",0))),y=c(r,"getPixel",!1),E=c(r,"isFramebuffer",!1),w=E?c(r,"bufferWidth",1):h.drawingBufferWidth,C=E?c(r,"bufferHeight",1):h.drawingBufferHeight;if(y){var A=new Uint8Array(4),M=E?x:C-x;h.readPixels(g,M,1,1,h.RGBA,h.UNSIGNED_BYTE,A),d.call(null,new m(A[0],A[1],A[2],A[3]))}else{var R=Math.floor(c(r,"width",w)),P=Math.floor(c(r,"height",C)),b=R*P*4,F=new Uint8Array(b);h.readPixels(g,C-x-P,R,P,h.RGBA,h.UNSIGNED_BYTE,F);for(var I=a.createWebGL(this,R,P),L=I.getContext("2d",{willReadFrequently:!0}),D=L.getImageData(0,0,R,P),O=D.data,z=0;z<P;z++)for(var W=0;W<R;W++){var k=((P-z-1)*R+W)*4,X=E?b-(z*R+(R-W))*4:(z*R+W)*4;O[X+0]=F[k+0],O[X+1]=F[k+1],O[X+2]=F[k+2],O[X+3]=F[k+3]}L.putImageData(D,0,0);var V=new Image;V.onerror=function(){d.call(null),a.remove(I)},V.onload=function(){d.call(null,V),a.remove(I)},V.src=I.toDataURL(l,p)}};s.exports=o}),89966:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Canvas:e(32880),WebGL:e(88815)}}),7530:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(36060),c=e(90330),o=e(82264),u=e(95540),r=e(32302),h=e(63448),d=e(31302),l=e(58918),p=e(14811),g=e(92651),x=e(96569),y=e(56527),E=e(57516),w=e(43439),C=e(81041),A=e(12385),M=e(7589),R=e(95428),P=e(72905),b=new a({initialize:function(I){this.game=I.game,this.renderer=I,this.classes=new c([[m.UTILITY_PIPELINE,M],[m.MULTI_PIPELINE,E],[m.BITMAPMASK_PIPELINE,d],[m.SINGLE_PIPELINE,A],[m.ROPE_PIPELINE,C],[m.LIGHT_PIPELINE,x],[m.POINTLIGHT_PIPELINE,w],[m.MOBILE_PIPELINE,y]]),this.postPipelineClasses=new c,this.pipelines=new c,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(F,I,L){var D=this.renderer,O=this.renderTargets;this.frameInc=Math.floor(u(F,"frameInc",32));var z=D.width,W=D.height,k=this.game.config.disablePreFX,X=this.game.config.disablePostFX;if(X||this.postPipelineClasses.setAll([[String(p.BARREL),l.Barrel],[String(p.BLOOM),l.Bloom],[String(p.BLUR),l.Blur],[String(p.BOKEH),l.Bokeh],[String(p.CIRCLE),l.Circle],[String(p.COLOR_MATRIX),l.ColorMatrix],[String(p.DISPLACEMENT),l.Displacement],[String(p.GLOW),l.Glow],[String(p.GRADIENT),l.Gradient],[String(p.PIXELATE),l.Pixelate],[String(p.SHADOW),l.Shadow],[String(p.SHINE),l.Shine],[String(p.VIGNETTE),l.Vignette],[String(p.WIPE),l.Wipe]]),!k){this.classes.set(m.FX_PIPELINE,g);for(var V=Math.min(z,W),G=Math.ceil(V/this.frameInc),N=1;N<G;N++){var H=N*this.frameInc;O.push(new r(D,H,H)),O.push(new r(D,H,H)),O.push(new r(D,H,H)),this.maxDimension=H}O.push(new r(D,z,W,1,0,!0,!0)),O.push(new r(D,z,W,1,0,!0,!0)),O.push(new r(D,z,W,1,0,!0,!0))}var U,_,$=this,j=this.game;if(this.classes.each(function(it,at){U=$.add(it,new at({game:j})),it===m.UTILITY_PIPELINE&&($.UTILITY_PIPELINE=U,$.fullFrame1=U.fullFrame1,$.fullFrame2=U.fullFrame2,$.halfFrame1=U.halfFrame1,$.halfFrame2=U.halfFrame2)}),this.MULTI_PIPELINE=this.get(m.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(m.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(m.MOBILE_PIPELINE),k||(this.FX_PIPELINE=this.get(m.FX_PIPELINE)),F)for(_ in F){var Z=F[_];U=new Z(j),U.name=_,U.isPostFX?this.postPipelineClasses.set(_,Z):this.has(_)||(this.classes.set(_,Z),this.add(_,U))}this.default=this.get(I),L&&!o.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(F){var I=this.get(F);return I&&(this.default=I),I},add:function(F,I){if(I.isPostFX){console.warn(F+" is a Post Pipeline. Use `addPostPipeline` instead");return}var L=this.pipelines,D=this.renderer;return L.has(F)?console.warn("Pipeline exists: "+F):(I.name=F,I.manager=this,L.set(F,I)),I.hasBooted||I.boot(),D.width!==0&&D.height!==0&&!I.isPreFX&&I.resize(D.width,D.height),I},addPostPipeline:function(F,I){this.postPipelineClasses.has(F)||this.postPipelineClasses.set(F,I)},flush:function(){this.current&&this.current.flush()},has:function(F){var I=this.pipelines;return typeof F=="string"?I.has(F):!!I.contains(F)},get:function(F){var I=this.pipelines;if(typeof F=="string")return I.get(F);if(I.contains(F))return F},getPostPipeline:function(F,I,L){var D=this.postPipelineClasses,O,z="",W=typeof F;if(W==="string"||W==="number"?(O=D.get(F),z=F):W==="function"?(D.contains(F)&&(O=F),z=F.name):W==="object"&&(O=D.get(F.name),z=F.name),O){var k=new O(this.game,L);return k.name=z,I&&(k.gameObject=I),this.postPipelineInstances.push(k),k}},removePostPipeline:function(F){P(this.postPipelineInstances,F)},remove:function(F,I,L){I===void 0&&(I=!0),L===void 0&&(L=!0),this.pipelines.delete(F),I&&this.classes.delete(F),L&&this.postPipelineClasses.delete(F)},set:function(F,I,L){if(!F.isPostFX)return this.isCurrent(F,L)||(this.flush(),this.current&&this.current.unbind(),this.current=F,F.bind(L)),F.updateProjectionMatrix(),F.onBind(I),F},preBatch:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=I.length-1;L>=0;L--){var D=I[L];D.active&&D.preBatch(F)}}},postBatch:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=0;L<I.length;L++){var D=I[L];D.active&&D.postBatch(F)}}},preBatchCamera:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=I.length-1;L>=0;L--){var D=I[L];D.active&&D.preBatch(F)}}},postBatchCamera:function(F){if(F.hasPostPipeline){this.flush();for(var I=F.postPipelines,L=0;L<I.length;L++){var D=I[L];D.active&&D.postBatch(F)}}},isCurrent:function(F,I){var L=this.renderer,D=this.current;return D&&!I&&(I=D.currentShader),!(D!==F||I.program!==L.currentProgram)},copyFrame:function(F,I,L,D,O){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(F,I,L,D,O),this},copyToGame:function(F){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(F),this},drawFrame:function(F,I,L,D){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(F,I,L,D),this},blendFrames:function(F,I,L,D,O){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(F,I,L,D,O),this},blendFramesAdditive:function(F,I,L,D,O){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(F,I,L,D,O),this},clearFrame:function(F,I){return this.UTILITY_PIPELINE.clearFrame(F,I),this},blitFrame:function(F,I,L,D,O,z){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(F,I,L,D,O,z),this},copyFrameRect:function(F,I,L,D,O,z,W,k){return this.UTILITY_PIPELINE.copyFrameRect(F,I,L,D,O,z,W,k),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(F){return this.UTILITY_PIPELINE.bind(F)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(F,I){I.restoreContext()}),R(this.postPipelineInstances,function(F){F.restoreContext()})},rebind:function(F){F===void 0&&this.previous&&(F=this.previous);var I=this.renderer,L=I.gl;L.disable(L.DEPTH_TEST),L.disable(L.CULL_FACE),I.hasActiveStencilMask()?L.clear(L.DEPTH_BUFFER_BIT):(L.disable(L.STENCIL_TEST),L.clear(L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)),L.viewport(0,0,I.width,I.height),I.currentProgram=null,I.setBlendMode(0,!0);var D=I.vaoExtension;D&&D.bindVertexArrayOES(null);var O=this.pipelines.entries;for(var z in O)O[z].glReset=!0;F&&(this.current=F,F.rebind())},clear:function(){var F=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,F.currentProgram=null,F.setBlendMode(0,!0);var I=F.vaoExtension;I&&I.bindVertexArrayOES(null)},getRenderTarget:function(F){var I=this.renderTargets,L=3;if(F>this.maxDimension)return this.targetIndex=I.length-L,I[this.targetIndex];var D=(h(F,this.frameInc,0,!0)-1)*L;return this.targetIndex=D,I[D]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});s.exports=b}),32302:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(92503),c=new a({initialize:function(u,r,h,d,l,p,g,x,y){d===void 0&&(d=1),l===void 0&&(l=0),p===void 0&&(p=!0),g===void 0&&(g=!1),x===void 0&&(x=!0),y===void 0&&(y=!0),this.renderer=u,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=d,this.minFilter=l,this.autoClear=p,this.autoResize=!0,this.hasDepthBuffer=x,this.forceClamp=y,this.init(r,h),g?this.renderer.on(m.RESIZE,this.resize,this):this.autoResize=!1},init:function(o,u){var r=this.renderer;this.texture=r.createTextureFromSource(null,o,u,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(o,u,this.texture,this.hasDepthBuffer),this.width=o,this.height=u},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(m.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(m.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,u){if(this.autoResize&&this.willResize(o,u)){var r=this.renderer;r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.texture=r.createTextureFromSource(null,o,u,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(o,u,this.texture,this.hasDepthBuffer),this.width=o,this.height=u}return this},willResize:function(o,u){return typeof o!="number"||typeof u!="number"?!1:(o=Math.round(o*this.scale),u=Math.round(u*this.scale),o=Math.max(o,1),u=Math.max(u,1),o!==this.width||u!==this.height)},bind:function(o,u,r){o===void 0&&(o=!1);var h=this.renderer;if(o&&h.flush(),u&&r&&this.resize(u,r),h.pushFramebuffer(this.framebuffer,!1,!1),o&&this.adjustViewport(),this.autoClear){var d=this.renderer.gl;d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT)}h.clearStencilMask()},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(o,u,r,h){var d=this.renderer,l=d.gl;d.pushFramebuffer(this.framebuffer),o!==void 0&&u!==void 0&&r!==void 0&&h!==void 0?(l.enable(l.SCISSOR_TEST),l.scissor(o,u,r,h)):l.disable(l.SCISSOR_TEST),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),d.popFramebuffer(),d.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var u=this.renderer;return o&&u.flush(),u.popFramebuffer()},destroy:function(){var o=this.renderer;o.off(m.RESIZE,this.resize,this),o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});s.exports=c}),70554:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={getTintFromFloats:function(T,e,a,m){var c=(T*255|0)&255,o=(e*255|0)&255,u=(a*255|0)&255,r=(m*255|0)&255;return(r<<24|c<<16|o<<8|u)>>>0},getTintAppendFloatAlpha:function(T,e){var a=(e*255|0)&255;return(a<<24|T)>>>0},getTintAppendFloatAlphaAndSwap:function(T,e){var a=(T>>16|0)&255,m=(T>>8|0)&255,c=(T|0)&255,o=(e*255|0)&255;return(o<<24|c<<16|m<<8|a)>>>0},getFloatsFromUintRGB:function(T){var e=(T>>16|0)&255,a=(T>>8|0)&255,m=(T|0)&255;return[e/255,a/255,m/255]},checkShaderMax:function(T,e){var a=Math.min(16,T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?a:Math.min(a,e)},parseFragmentShaderMaxTextures:function(T,e){if(!T)return"";for(var a="",m=0;m<e;m++)m>0&&(a+=`
	else `),m<e-1&&(a+="if (outTexId < "+m+".5)"),a+=`
	{`,a+=`
		texture = texture2D(uMainSampler[`+m+"], outTexCoord);",a+=`
	}`;return T=T.replace(/%count%/gi,e.toString()),T.replace(/%forloop%/gi,a)},setGlowQuality:function(T,e,a,m){return a===void 0&&(a=e.config.glowFXQuality),m===void 0&&(m=e.config.glowFXDistance),T=T.replace(/__SIZE__/gi,(1/a/m).toFixed(7)),T=T.replace(/__DIST__/gi,m.toFixed(0)+".0"),T}}}),29100:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(62644),c=e(50792),o=e(77085),u=e(95540),r=e(37867),h=e(92503),d=e(32302),l=e(70554),p=e(38683),g=new a({Extends:c,initialize:function(y){c.call(this);var E=y.game,w=E.renderer,C=w.gl;this.name=u(y,"name","WebGLPipeline"),this.game=E,this.renderer=w,this.manager,this.gl=C,this.view=E.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=u(y,"topology",C.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=u(y,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=y,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=u(y,"resizeUniform","")},boot:function(){var x,y=this.gl,E=this.config,w=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var C=this.renderTargets,A=u(E,"renderTarget",!1);typeof A=="boolean"&&A&&(A=1);var M=w.width,R=w.height;if(typeof A=="number")for(x=0;x<A;x++)C.push(new d(w,M,R,1,0,!0));else if(Array.isArray(A))for(x=0;x<A.length;x++){var P=u(A[x],"scale",1),b=u(A[x],"minFilter",0),F=u(A[x],"autoClear",1),I=u(A[x],"autoResize",!1),L=u(A[x],"width",null),D=u(A[x],"height",L);L?C.push(new d(w,L,D,1,b,F,I)):C.push(new d(w,M,R,P,b,F,I))}C.length&&(this.currentRenderTarget=C[0]),this.setShadersFromConfig(E);var O=this.shaders,z=0;for(x=0;x<O.length;x++)O[x].vertexSize>z&&(z=O[x].vertexSize);var W=u(E,"batchSize",w.config.batchSize);this.vertexCapacity=W*6;var k=new ArrayBuffer(this.vertexCapacity*z);this.vertexData=k,this.bytes=new Uint8Array(k),this.vertexViewF32=new Float32Array(k),this.vertexViewU32=new Uint32Array(k);var X=u(E,"vertices",null);for(X?(this.vertexViewF32.set(X),this.vertexBuffer=w.createVertexBuffer(k,y.STATIC_DRAW)):this.vertexBuffer=w.createVertexBuffer(k.byteLength,y.DYNAMIC_DRAW),this.setVertexBuffer(),x=O.length-1;x>=0;x--)O[x].rebind();this.hasBooted=!0,w.on(h.RESIZE,this.resize,this),w.on(h.PRE_RENDER,this.onPreRender,this),w.on(h.RENDER,this.onRender,this),w.on(h.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(x,y,E){var w=this.renderer;if(x!==this.currentShader||w.currentProgram!==this.currentShader.program){this.flush();var C=this.setVertexBuffer(E);C&&!y&&(y=!0),x.bind(y,!1),this.currentShader=x}return this},getShaderByName:function(x){for(var y=this.shaders,E=0;E<y.length;E++)if(y[E].name===x)return y[E]},setShadersFromConfig:function(x){var y,E=this.shaders,w=this.renderer;for(y=0;y<E.length;y++)E[y].destroy();var C="vertShader",A="fragShader",M="attributes",R=u(x,C,null),P=l.parseFragmentShaderMaxTextures(u(x,A,null),w.maxTextures),b=u(x,M,null),F=u(x,"shaders",[]),I=F.length;if(I===0)R&&P&&(this.shaders=[new p(this,"default",R,P,m(b))]);else{var L=[];for(y=0;y<I;y++){var D=F[y],O,z,W,k;if(typeof D=="string"?(O="default",z=R,W=l.parseFragmentShaderMaxTextures(D,w.maxTextures),k=b):(O=u(D,"name","default"),z=u(D,C,R),W=l.parseFragmentShaderMaxTextures(u(D,A,P),w.maxTextures),k=u(D,M,b)),O==="default"){var X=W.split(`
`),V=X[0].trim();V.indexOf("#define SHADER_NAME")>-1&&(O=V.substring(20))}z&&W&&L.push(new p(this,O,z,W,m(k)))}this.shaders=L}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(x){return this.currentBatch={start:this.vertexCount,count:0,texture:[x],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=x,this.batch.push(this.currentBatch),0},addTextureToBatch:function(x){var y=this.currentBatch;y&&(y.texture.push(x),y.unit++,y.maxUnit++)},pushBatch:function(x){if(!this.currentBatch||this.forceZero&&x!==this.currentTexture)return this.createBatch(x);if(x===this.currentTexture)return this.currentUnit;var y=this.currentBatch,E=y.texture.indexOf(x);return E===-1?y.texture.length===this.renderer.maxTextures?this.createBatch(x):(y.unit++,y.maxUnit++,y.texture.push(x),this.currentUnit=y.unit,this.currentTexture=x,y.unit):(this.currentUnit=E,this.currentTexture=x,E)},setGameObject:function(x,y){return y===void 0&&(y=x.frame),this.pushBatch(y.source.glTexture)},shouldFlush:function(x){return x===void 0&&(x=0),this.vertexCount+x>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(x,y){(x!==this.width||y!==this.height)&&this.flush(),this.width=x,this.height=y;for(var E=this.renderTargets,w=0;w<E.length;w++)E[w].resize(x,y);return this.setProjectionMatrix(x,y),this.resizeUniform&&this.set2f(this.resizeUniform,x,y),this.emit(o.RESIZE,x,y,this),this.onResize(x,y),this},setProjectionMatrix:function(x,y){var E=this.projectionMatrix;if(!E)return this;this.projectionWidth=x,this.projectionHeight=y,E.ortho(0,x,y,0,-1e3,1e3);for(var w=this.shaders,C="uProjectionMatrix",A=0;A<w.length;A++){var M=w[A];M.hasUniform(C)&&(M.resetUniform(C),M.setMatrix4fv(C,!1,E.val,M))}return this},flipProjectionMatrix:function(x){x===void 0&&(x=!0);var y=this.projectionMatrix;if(!y)return this;var E=this.projectionWidth,w=this.projectionHeight;x?y.ortho(0,E,0,w,-1e3,1e3):y.ortho(0,E,w,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,y.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var x=this.renderer.projectionWidth,y=this.renderer.projectionHeight;(this.projectionWidth!==x||this.projectionHeight!==y)&&this.setProjectionMatrix(x,y)}},bind:function(x){if(x===void 0&&(x=this.currentShader),this.glReset)return this.rebind(x);var y=!1,E=this.gl;return E.getParameter(E.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(E.bindBuffer(E.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,y=!0),x.bind(y),this.currentShader=x,this.activeTextures.length=0,this.emit(o.BIND,this,x),this.onActive(x),this},rebind:function(x){this.activeBuffer=null,this.setVertexBuffer();for(var y=this.shaders,E=y.length-1;E>=0;E--){var w=y[E].rebind();(!x||w===x)&&(this.currentShader=w)}return this.activeTextures.length=0,this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var x=this.shaders,y=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,y&&this.setVertexBuffer();for(var E=0;E<x.length;E++){var w=x[E];w.syncUniforms(),y&&w.rebind()}},setVertexBuffer:function(x){if(x===void 0&&(x=this.vertexBuffer),x!==this.activeBuffer){var y=this.gl;return this.gl.bindBuffer(y.ARRAY_BUFFER,x.webGLBuffer),this.activeBuffer=x,!0}return!1},preBatch:function(x){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(x),this},postBatch:function(x){return this.onDraw(this.currentRenderTarget),this.onPostBatch(x),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(x){if(x===void 0&&(x=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,x),this.onBeforeFlush(x);var y=this.gl,E=this.vertexCount,w=this.currentShader.vertexSize,C=this.topology;if(this.active){this.setVertexBuffer(),E===this.vertexCapacity?y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.DYNAMIC_DRAW):y.bufferSubData(y.ARRAY_BUFFER,0,this.bytes.subarray(0,E*w));var A,M,R,P=this.batch,b=this.activeTextures;if(this.forceZero)for(b[0]||y.activeTexture(y.TEXTURE0),A=0;A<P.length;A++)M=P[A],R=M.texture[0],b[0]!==R&&(y.bindTexture(y.TEXTURE_2D,R.webGLTexture),b[0]=R),y.drawArrays(C,M.start,M.count);else for(A=0;A<P.length;A++){M=P[A];for(var F=0;F<=M.maxUnit;F++)R=M.texture[F],b[F]!==R&&(y.activeTexture(y.TEXTURE0+F),y.bindTexture(y.TEXTURE_2D,R.webGLTexture),b[F]=R);y.drawArrays(C,M.start,M.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(o.AFTER_FLUSH,this,x),this.onAfterFlush(x)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(x,y,E,w,C,A,M){var R=this.vertexViewF32,P=this.vertexViewU32,b=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++b]=x,R[++b]=y,R[++b]=E,R[++b]=w,R[++b]=C,R[++b]=A,P[++b]=M,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(x,y,E,w,C,A,M,R,P,b,F,I,L,D,O,z,W,k,X,V){V===void 0&&(V=this.currentUnit);var G=!1;this.shouldFlush(6)&&(this.flush(),G=!0),this.currentBatch||(V=this.setTexture2D(X));var N=this.vertexViewF32,H=this.vertexViewU32,U=this.vertexCount*this.currentShader.vertexComponentCount-1;return N[++U]=y,N[++U]=E,N[++U]=b,N[++U]=F,N[++U]=V,N[++U]=k,H[++U]=D,N[++U]=w,N[++U]=C,N[++U]=b,N[++U]=L,N[++U]=V,N[++U]=k,H[++U]=z,N[++U]=A,N[++U]=M,N[++U]=I,N[++U]=L,N[++U]=V,N[++U]=k,H[++U]=W,N[++U]=y,N[++U]=E,N[++U]=b,N[++U]=F,N[++U]=V,N[++U]=k,H[++U]=D,N[++U]=A,N[++U]=M,N[++U]=I,N[++U]=L,N[++U]=V,N[++U]=k,H[++U]=W,N[++U]=R,N[++U]=P,N[++U]=I,N[++U]=F,N[++U]=V,N[++U]=k,H[++U]=O,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(x),G},batchTri:function(x,y,E,w,C,A,M,R,P,b,F,I,L,D,O,z,W){W===void 0&&(W=this.currentUnit);var k=!1;this.shouldFlush(3)&&(this.flush(),k=!0),this.currentBatch||(W=this.setTexture2D(z));var X=this.vertexViewF32,V=this.vertexViewU32,G=this.vertexCount*this.currentShader.vertexComponentCount-1;return X[++G]=y,X[++G]=E,X[++G]=R,X[++G]=P,X[++G]=W,X[++G]=O,V[++G]=I,X[++G]=w,X[++G]=C,X[++G]=R,X[++G]=F,X[++G]=W,X[++G]=O,V[++G]=L,X[++G]=A,X[++G]=M,X[++G]=b,X[++G]=F,X[++G]=W,X[++G]=O,V[++G]=D,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(x),k},drawFillRect:function(x,y,E,w,C,A,M,R){M===void 0&&(M=this.renderer.whiteTexture),R===void 0&&(R=!0),x=Math.floor(x),y=Math.floor(y);var P=Math.floor(x+E),b=Math.floor(y+w),F=this.setTexture2D(M),I=l.getTintAppendFloatAlphaAndSwap(C,A),L=0,D=0,O=1,z=1;R&&(D=1,z=0),this.batchQuad(null,x,y,x,b,P,b,P,y,L,D,O,z,I,I,I,I,0,M,F)},setTexture2D:function(x){return x===void 0&&(x=this.renderer.whiteTexture),this.pushBatch(x)},bindTexture:function(x,y){y===void 0&&(y=0);var E=this.gl;return E.activeTexture(E.TEXTURE0+y),E.bindTexture(E.TEXTURE_2D,x.webGLTexture),this},bindRenderTarget:function(x,y){return this.bindTexture(x.texture,y)},setTime:function(x,y){return this.set1f(x,this.game.loop.getDuration(),y),this},setBoolean:function(x,y,E){return E===void 0&&(E=this.currentShader),E.setBoolean(x,y),this},set1f:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set1f(x,y),this},set2f:function(x,y,E,w){return w===void 0&&(w=this.currentShader),w.set2f(x,y,E),this},set3f:function(x,y,E,w,C){return C===void 0&&(C=this.currentShader),C.set3f(x,y,E,w),this},set4f:function(x,y,E,w,C,A){return A===void 0&&(A=this.currentShader),A.set4f(x,y,E,w,C),this},set1fv:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set1fv(x,y),this},set2fv:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set2fv(x,y),this},set3fv:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set3fv(x,y),this},set4fv:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set4fv(x,y),this},set1iv:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set1iv(x,y),this},set2iv:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set2iv(x,y),this},set3iv:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set3iv(x,y),this},set4iv:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set4iv(x,y),this},set1i:function(x,y,E){return E===void 0&&(E=this.currentShader),E.set1i(x,y),this},set2i:function(x,y,E,w){return w===void 0&&(w=this.currentShader),w.set2i(x,y,E),this},set3i:function(x,y,E,w,C){return C===void 0&&(C=this.currentShader),C.set3i(x,y,E,w),this},set4i:function(x,y,E,w,C,A){return A===void 0&&(A=this.currentShader),A.set4i(x,y,E,w,C),this},setMatrix2fv:function(x,y,E,w){return w===void 0&&(w=this.currentShader),w.setMatrix2fv(x,y,E),this},setMatrix3fv:function(x,y,E,w){return w===void 0&&(w=this.currentShader),w.setMatrix3fv(x,y,E),this},setMatrix4fv:function(x,y,E,w){return w===void 0&&(w=this.currentShader),w.setMatrix4fv(x,y,E),this},destroy:function(){this.emit(o.DESTROY,this);var x,y=this.shaders;for(x=0;x<y.length;x++)y[x].destroy();var E=this.renderTargets;for(x=0;x<E.length;x++)E[x].destroy();var w=this.renderer;return w.deleteBuffer(this.vertexBuffer),w.off(h.RESIZE,this.resize,this),w.off(h.PRE_RENDER,this.onPreRender,this),w.off(h.RENDER,this.onRender,this),w.off(h.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});s.exports=g}),74797:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95428),m=e(72905),c=e(19715),o=e(83419),u=e(8054),r=e(50792),h=e(92503),d=e(50030),l=e(37867),p=e(29747),g=e(7530),x=e(32302),y=e(97480),E=e(69442),w=e(70554),C=e(88815),A=e(26128),M=e(1482),R=e(82751),P=e(84387),b=e(93567),F=e(57183),I=new o({Extends:r,initialize:function(D){r.call(this);var O=D.config,z={alpha:O.transparent,desynchronized:O.desynchronized,depth:!0,antialias:O.antialiasGL,premultipliedAlpha:O.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:O.failIfMajorPerformanceCaveat,powerPreference:O.powerPreference,preserveDrawingBuffer:O.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:O.clearBeforeRender,antialias:O.antialias,backgroundColor:O.backgroundColor,contextCreation:z,roundPixels:O.roundPixels,maxTextures:O.maxTextures,maxTextureSize:O.maxTextureSize,batchSize:O.batchSize,maxLights:O.maxLights,mipmapFilter:O.mipmapFilter},this.game=D,this.type=u.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=D.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=p,this.contextRestoredHandler=p,this.previousContextLostHandler=p,this.previousContextRestoredHandler=p,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(L){var D,O=this.game,z=this.canvas,W=L.backgroundColor;if(O.config.context?D=O.config.context:D=z.getContext("webgl",L.contextCreation)||z.getContext("experimental-webgl",L.contextCreation),!D||D.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=D,this.setExtensions(),this.setContextHandlers(),O.context=D;for(var k=0;k<=27;k++)this.blendModes.push({func:[D.ONE,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_ADD});this.blendModes[1].func=[D.ONE,D.DST_ALPHA],this.blendModes[2].func=[D.DST_COLOR,D.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[D.ONE,D.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[D.ZERO,D.ONE_MINUS_SRC_ALPHA],equation:D.FUNC_REVERSE_SUBTRACT},this.glFormats=[D.BYTE,D.SHORT,D.UNSIGNED_BYTE,D.UNSIGNED_SHORT,D.FLOAT],this.glFuncMap={mat2:{func:D.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:D.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:D.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:D.uniform1f,length:1},"1fv":{func:D.uniform1fv,length:1},"1i":{func:D.uniform1i,length:1},"1iv":{func:D.uniform1iv,length:1},"2f":{func:D.uniform2f,length:2},"2fv":{func:D.uniform2fv,length:1},"2i":{func:D.uniform2i,length:2},"2iv":{func:D.uniform2iv,length:1},"3f":{func:D.uniform3f,length:3},"3fv":{func:D.uniform3fv,length:1},"3i":{func:D.uniform3i,length:3},"3iv":{func:D.uniform3iv,length:1},"4f":{func:D.uniform4f,length:4},"4fv":{func:D.uniform4fv,length:1},"4i":{func:D.uniform4i,length:4},"4iv":{func:D.uniform4iv,length:1}},(!L.maxTextures||L.maxTextures===-1)&&(L.maxTextures=D.getParameter(D.MAX_TEXTURE_IMAGE_UNITS)),L.maxTextureSize||(L.maxTextureSize=D.getParameter(D.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),D.disable(D.DEPTH_TEST),D.disable(D.CULL_FACE),D.enable(D.BLEND),D.clearColor(W.redGL,W.greenGL,W.blueGL,W.alphaGL),D.clear(D.COLOR_BUFFER_BIT);var X=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return X.indexOf(L.mipmapFilter)!==-1&&(this.mipmapFilter=D[L.mipmapFilter]),this.maxTextures=w.checkShaderMax(D,L.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new g(this),this.setBlendMode(u.BlendModes.NORMAL),this.projectionMatrix=new l().identity(),O.textures.once(E.READY,this.boot,this),this},boot:function(){var L=this.game,D=this.pipelines,O=L.scale.baseSize,z=O.width,W=O.height;this.width=z,this.height=W,this.isBooted=!0,this.renderTarget=new x(this,z,W,1,0,!0,!0),this.maskTarget=new x(this,z,W,1,0,!0,!0),this.maskSource=new x(this,z,W,1,0,!0,!0);var k=L.config;D.boot(k.pipeline,k.defaultPipeline,k.autoMobilePipeline),this.blankTexture=L.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=L.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=L.textures.getFrame("__WHITE").glTexture;var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,null),X.enable(X.SCISSOR_TEST),L.scale.on(y.RESIZE,this.onResize,this),this.resize(z,W)},setExtensions:function(){var L=this.gl,D=L.getSupportedExtensions();this.supportedExtensions=D;var O="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(O)>-1?L.getExtension(O):null;var z="OES_vertex_array_object";this.vaoExtension=D.indexOf(z)>-1?L.getExtension(z):null},setContextHandlers:function(L,D){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof L=="function"?this.contextLostHandler=L.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof D=="function"?this.contextRestoredHandler=D.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(L){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(h.LOSE_WEBGL,this),L.preventDefault()},dispatchContextRestored:function(L){var D=this.gl;if(D.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(u.BlendModes.NORMAL),D.disable(D.BLEND),D.disable(D.DEPTH_TEST),D.enable(D.CULL_FACE),this.compression=this.getCompressedTextures();var O=function(z){z.createResource()};a(this.glTextureWrappers,O),a(this.glBufferWrappers,O),a(this.glFramebufferWrappers,O),a(this.glProgramWrappers,O),a(this.glAttribLocationWrappers,O),a(this.glUniformLocationWrappers,O),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(h.RESTORE_WEBGL,this),L.preventDefault()},createTemporaryTextures:function(){for(var L=this.gl,D=0;D<this.maxTextures;D++){var O=L.createTexture();L.activeTexture(L.TEXTURE0+D),L.bindTexture(L.TEXTURE_2D,O),L.texImage2D(L.TEXTURE_2D,0,L.RGBA,1,1,0,L.RGBA,L.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(D)}},captureFrame:function(L,D){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(L,D,O){},stopCapture:function(){},onCapture:function(L){},onResize:function(L,D){(D.width!==this.width||D.height!==this.height)&&this.resize(D.width,D.height)},beginCapture:function(L,D){L===void 0&&(L=this.width),D===void 0&&(D=this.height),this.renderTarget.bind(!0,L,D),this.setProjectionMatrix(L,D)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(L,D){var O=this.gl;return this.width=L,this.height=D,this.setProjectionMatrix(L,D),O.viewport(0,0,L,D),this.drawingBufferHeight=O.drawingBufferHeight,O.scissor(0,O.drawingBufferHeight-D,L,D),this.defaultScissor[2]=L,this.defaultScissor[3]=D,this.emit(h.RESIZE,L,D),this},getCompressedTextures:function(){var L="WEBGL_compressed_texture_",D="WEBKIT_"+L,O="EXT_texture_compression_",z=function(k,X){var V=k.getExtension(L+X)||k.getExtension(D+X)||k.getExtension(O+X);if(V){var G={};for(var N in V)G[V[N]]=N;return G}},W=this.gl;return{ETC:z(W,"etc"),ETC1:z(W,"etc1"),ATC:z(W,"atc"),ASTC:z(W,"astc"),BPTC:z(W,"bptc"),RGTC:z(W,"rgtc"),PVRTC:z(W,"pvrtc"),S3TC:z(W,"s3tc"),S3TCSRGB:z(W,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(L,D){var O=this.compression[L.toUpperCase()];if(D in O)return O[D]},supportsCompressedTexture:function(L,D){var O=this.compression[L.toUpperCase()];return O?D?D in O:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(L,D){return(L!==this.projectionWidth||D!==this.projectionHeight)&&(this.projectionWidth=L,this.projectionHeight=D,this.projectionMatrix.ortho(0,L,D,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(L){return this.supportedExtensions?this.supportedExtensions.indexOf(L):!1},getExtension:function(L){return this.hasExtension(L)?(L in this.extensions||(this.extensions[L]=this.gl.getExtension(L)),this.extensions[L]):null},flush:function(){this.pipelines.flush()},pushScissor:function(L,D,O,z,W){W===void 0&&(W=this.drawingBufferHeight);var k=this.scissorStack,X=[L,D,O,z];return k.push(X),this.setScissor(L,D,O,z,W),this.currentScissor=X,X},setScissor:function(L,D,O,z,W){W===void 0&&(W=this.drawingBufferHeight);var k=this.gl,X=this.currentScissor,V=O>0&&z>0;if(X&&V){var G=X[0],N=X[1],H=X[2],U=X[3];V=G!==L||N!==D||H!==O||U!==z}V&&(this.flush(),k.scissor(L,W-D-z,O,z))},resetScissor:function(){var L=this.gl;L.enable(L.SCISSOR_TEST);var D=this.currentScissor;if(D){var O=D[0],z=D[1],W=D[2],k=D[3];W>0&&k>0&&L.scissor(O,this.drawingBufferHeight-z-k,W,k)}},popScissor:function(){var L=this.scissorStack;L.pop();var D=L[L.length-1];D&&this.setScissor(D[0],D[1],D[2],D[3]),this.currentScissor=D},hasActiveStencilMask:function(){var L=this.currentMask.mask,D=this.currentCameraMask.mask;return L&&L.isStencil||D&&D.isStencil},resetViewport:function(){var L=this.gl;L.viewport(0,0,this.width,this.height),this.drawingBufferHeight=L.drawingBufferHeight},setBlendMode:function(L,D){D===void 0&&(D=!1);var O=this.gl,z=this.blendModes[L];return D||L!==u.BlendModes.SKIP_CHECK&&this.currentBlendMode!==L?(this.flush(),O.enable(O.BLEND),O.blendEquation(z.equation),z.func.length>2?O.blendFuncSeparate(z.func[0],z.func[1],z.func[2],z.func[3]):O.blendFunc(z.func[0],z.func[1]),this.currentBlendMode=L,!0):!1},addBlendMode:function(L,D){var O=this.blendModes.push({func:L,equation:D});return O-1},updateBlendMode:function(L,D,O){return this.blendModes[L]&&(this.blendModes[L].func=D,O&&(this.blendModes[L].equation=O)),this},removeBlendMode:function(L){return L>17&&this.blendModes[L]&&this.blendModes.splice(L,1),this},pushFramebuffer:function(L,D,O,z,W){return L===this.currentFramebuffer?this:(this.fboStack.push(L),this.setFramebuffer(L,D,O,z,W))},setFramebuffer:function(L,D,O,z,W){if(D===void 0&&(D=!1),O===void 0&&(O=!0),z===void 0&&(z=null),W===void 0&&(W=!1),L===this.currentFramebuffer)return this;var k=this.gl,X=this.width,V=this.height;return L&&L.renderTexture&&O?(X=L.renderTexture.width,V=L.renderTexture.height):this.flush(),L?k.bindFramebuffer(k.FRAMEBUFFER,L.webGLFramebuffer):k.bindFramebuffer(k.FRAMEBUFFER,null),O&&k.viewport(0,0,X,V),z&&k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,z.webGLTexture,0),W&&(k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT)),D&&(L?(this.drawingBufferHeight=V,this.pushScissor(0,0,X,V)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=L,this},popFramebuffer:function(L,D){L===void 0&&(L=!1),D===void 0&&(D=!0);var O=this.fboStack;O.pop();var z=O[O.length-1];return z||(z=null),this.setFramebuffer(z,L,D),z},restoreFramebuffer:function(L,D){L===void 0&&(L=!1),D===void 0&&(D=!0);var O=this.fboStack,z=O[O.length-1];z||(z=null),this.currentFramebuffer=null,this.setFramebuffer(z,L,D)},setProgram:function(L){return L!==this.currentProgram?(this.flush(),this.gl.useProgram(L.webGLProgram),this.currentProgram=L,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(L,D,O,z,W){W===void 0&&(W=!1);var k=this.gl,X=k.NEAREST,V=k.NEAREST,G=k.CLAMP_TO_EDGE,N=null;D=L?L.width:D,O=L?L.height:O;var H=d(D,O);if(H&&!W&&(G=k.REPEAT),z===u.ScaleModes.LINEAR&&this.config.antialias){var U=L&&L.compressed,_=!U&&H||U&&L.mipmaps.length>1;X=this.mipmapFilter&&_?this.mipmapFilter:k.LINEAR,V=k.LINEAR}return!L&&typeof D=="number"&&typeof O=="number"?N=this.createTexture2D(0,X,V,G,G,k.RGBA,null,D,O):N=this.createTexture2D(0,X,V,G,G,k.RGBA,L),N},createTexture2D:function(L,D,O,z,W,k,X,V,G,N,H,U){typeof V!="number"&&(V=X?X.width:1),typeof G!="number"&&(G=X?X.height:1);var _=new R(this.gl,L,D,O,z,W,k,X,V,G,N,H,U);return this.glTextureWrappers.push(_),_},createFramebuffer:function(L,D,O,z){this.currentFramebuffer=null;var W=new P(this.gl,L,D,O,z);return this.glFramebufferWrappers.push(W),W},beginBitmapMask:function(L,D){var O=this.gl;O&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==L&&(this.currentMask.mask=L,this.currentMask.camera=D))},drawBitmapMask:function(L,D,O){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),L.renderWebGL(this,L,D),this.maskSource.unbind(!0),this.maskTarget.unbind();var z=this.gl,W=this.getCurrentStencilMask();W?(z.enable(z.STENCIL_TEST),W.mask.applyStencil(this,W.camera,!0)):this.currentMask.mask=null,this.pipelines.set(O),z.activeTexture(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,this.maskTarget.texture.webGLTexture),z.activeTexture(z.TEXTURE1),z.bindTexture(z.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(L,D){var O=new M(this.gl,L,D);return this.glProgramWrappers.push(O),O},createVertexBuffer:function(L,D){var O=this.gl,z=new A(O,L,O.ARRAY_BUFFER,D);return this.glBufferWrappers.push(z),z},createAttribLocation:function(L,D){var O=new b(this.gl,L,D);return this.glAttribLocationWrappers.push(O),O},createUniformLocation:function(L,D){var O=new F(this.gl,L,D);return this.glUniformLocationWrappers.push(O),O},createIndexBuffer:function(L,D){var O=this.gl,z=new A(O,L,O.ELEMENT_ARRAY_BUFFER,D);return this.glBufferWrappers.push(z),z},deleteTexture:function(L){if(L)return m(this.glTextureWrappers,L),L.destroy(),this},deleteFramebuffer:function(L){return L?(m(this.fboStack,L),m(this.glFramebufferWrappers,L),L.destroy(),this):this},deleteProgram:function(L){return L&&(m(this.glProgramWrappers,L),L.destroy()),this},deleteAttribLocation:function(L){return L&&(m(this.glAttribLocationWrappers,L),L.destroy()),this},deleteUniformLocation:function(L){return L&&(m(this.glUniformLocationWrappers,L),L.destroy()),this},deleteBuffer:function(L){return L?(m(this.glBufferWrappers,L),L.destroy(),this):this},preRenderCamera:function(L){var D=L.x,O=L.y,z=L.width,W=L.height,k=L.backgroundColor;if(L.emit(c.PRE_RENDER,L),this.pipelines.preBatchCamera(L),this.pushScissor(D,O,z,W),L.mask&&(this.currentCameraMask.mask=L.mask,this.currentCameraMask.camera=L._maskCamera,L.mask.preRenderWebGL(this,L,L._maskCamera)),k.alphaGL>0){var X=this.pipelines.setMulti();X.drawFillRect(D,O,z,W,w.getTintFromFloats(k.blueGL,k.greenGL,k.redGL,1),k.alphaGL)}},getCurrentStencilMask:function(){var L=null,D=this.maskStack,O=this.currentCameraMask;return D.length>0?L=D[D.length-1]:O.mask&&O.mask.isStencil&&(L=O),L},postRenderCamera:function(L){var D=L.flashEffect,O=L.fadeEffect;if(D.isRunning||O.isRunning||O.isComplete){var z=this.pipelines.setMulti();D.postRenderWebGL(z,w.getTintFromFloats),O.postRenderWebGL(z,w.getTintFromFloats)}L.dirty=!1,this.popScissor(),L.mask&&(this.currentCameraMask.mask=null,L.mask.postRenderWebGL(this,L._maskCamera)),this.pipelines.postBatchCamera(L),L.emit(c.POST_RENDER,L)},preRender:function(){if(!this.contextLost){var L=this.gl;if(L.bindFramebuffer(L.FRAMEBUFFER,null),this.emit(h.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var D=this.config.backgroundColor;L.clearColor(D.redGL,D.greenGL,D.blueGL,D.alphaGL),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)}L.enable(L.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&L.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(h.PRE_RENDER)}},render:function(L,D,O){if(!this.contextLost){var z=D.length;if(this.emit(h.RENDER,L,O),this.preRenderCamera(O),z===0){this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(O);return}this.currentType="";for(var W=this.currentMask,k=0;k<z;k++){this.finalType=k===z-1;var X=D[k],V=X.mask;W=this.currentMask,W.mask&&W.mask!==V&&W.mask.postRenderWebGL(this,W.camera),V&&W.mask!==V&&V.preRenderWebGL(this,X,O),X.blendMode!==this.currentBlendMode&&this.setBlendMode(X.blendMode);var G=X.type;G!==this.currentType&&(this.newType=!0,this.currentType=G),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=D[k+1].type===this.currentType,X.renderWebGL(this,X,O),this.newType=!1}W=this.currentMask,W.mask&&W.mask.postRenderWebGL(this,W.camera),this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(O)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(h.POST_RENDER);var L=this.snapshotState;L.callback&&(C(this.gl,L),L.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var L=this.gl,D=this.getCurrentStencilMask();if(D){var O=D.mask;L.enable(L.STENCIL_TEST),O.invertAlpha?L.stencilFunc(L.NOTEQUAL,O.level,255):L.stencilFunc(L.EQUAL,O.level,255)}},snapshot:function(L,D,O){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,L,D,O)},snapshotArea:function(L,D,O,z,W,k,X){var V=this.snapshotState;return V.callback=W,V.type=k,V.encoder=X,V.getPixel=!1,V.x=L,V.y=D,V.width=O,V.height=z,this},snapshotPixel:function(L,D,O){return this.snapshotArea(L,D,1,1,O),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(L,D,O,z,W,k,X,V,G,N,H){W===void 0&&(W=!1),k===void 0&&(k=0),X===void 0&&(X=0),V===void 0&&(V=D),G===void 0&&(G=O),N==="pixel"&&(W=!0,N="image/png");var U=this.currentFramebuffer;this.snapshotArea(k,X,V,G,z,N,H);var _=this.snapshotState;return _.getPixel=W,_.isFramebuffer=!0,_.bufferWidth=D,_.bufferHeight=O,_.width=Math.min(_.width,D),_.height=Math.min(_.height,O),this.setFramebuffer(L),C(this.gl,_),this.setFramebuffer(U),_.callback=null,_.isFramebuffer=!1,this},canvasToTexture:function(L,D,O,z){O===void 0&&(O=!1),z===void 0&&(z=!1);var W=this.gl,k=W.NEAREST,X=W.NEAREST,V=L.width,G=L.height,N=W.CLAMP_TO_EDGE,H=d(V,G);return!O&&H&&(N=W.REPEAT),this.config.antialias&&(k=H&&this.mipmapFilter?this.mipmapFilter:W.LINEAR,X=W.LINEAR),D?(D.update(L,V,G,z,N,N,k,X,D.format),D):this.createTexture2D(0,k,X,N,N,W.RGBA,L,V,G,!0,!1,z)},createCanvasTexture:function(L,D,O){return D===void 0&&(D=!1),O===void 0&&(O=!1),this.canvasToTexture(L,null,D,O)},updateCanvasTexture:function(L,D,O,z){return O===void 0&&(O=!1),z===void 0&&(z=!1),this.canvasToTexture(L,D,z,O)},videoToTexture:function(L,D,O,z){O===void 0&&(O=!1),z===void 0&&(z=!1);var W=this.gl,k=W.NEAREST,X=W.NEAREST,V=L.videoWidth,G=L.videoHeight,N=W.CLAMP_TO_EDGE,H=d(V,G);return!O&&H&&(N=W.REPEAT),this.config.antialias&&(k=H&&this.mipmapFilter?this.mipmapFilter:W.LINEAR,X=W.LINEAR),D?(D.update(L,V,G,z,N,N,k,X,D.format),D):this.createTexture2D(0,k,X,N,N,W.RGBA,L,V,G,!0,!0,z)},createVideoTexture:function(L,D,O){return D===void 0&&(D=!1),O===void 0&&(O=!1),this.videoToTexture(L,null,D,O)},updateVideoTexture:function(L,D,O,z){return O===void 0&&(O=!1),z===void 0&&(z=!1),this.videoToTexture(L,D,z,O)},createUint8ArrayTexture:function(L,D,O){var z=this.gl,W=z.NEAREST,k=z.NEAREST,X=z.CLAMP_TO_EDGE,V=d(D,O);return V&&(X=z.REPEAT),this.createTexture2D(0,W,k,X,X,z.RGBA,L,D,O)},setTextureFilter:function(L,D){var O=this.gl,z=D===0?O.LINEAR:O.NEAREST;O.activeTexture(O.TEXTURE0);var W=O.getParameter(O.TEXTURE_BINDING_2D);return O.bindTexture(O.TEXTURE_2D,L.webGLTexture),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,z),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,z),L.minFilter=z,L.magFilter=z,W&&O.bindTexture(O.TEXTURE_2D,W),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var L=function(D){D.destroy()};a(this.glAttribLocationWrappers,L),a(this.glBufferWrappers,L),a(this.glFramebufferWrappers,L),a(this.glProgramWrappers,L),a(this.glTextureWrappers,L),a(this.glUniformLocationWrappers,L),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});s.exports=I}),38683:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95428),c=e(95540),o=e(14500),u=new a({initialize:function(h,d,l,p,g){this.pipeline=h,this.name=d,this.renderer=h.renderer,this.gl=this.renderer.gl,this.fragSrc=p,this.vertSrc=l,this.program=this.renderer.createProgram(l,p),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(g),this.createUniforms()},createAttributes:function(r){var h=0,d=0,l=[];this.vertexComponentCount=0;for(var p=0;p<r.length;p++){var g=r[p],x=g.name,y=c(g,"size",1),E=c(g,"type",o.FLOAT),w=E.enum,C=E.size,A=!!g.normalized;l.push({name:x,size:y,type:w,normalized:A,offset:d,enabled:!1,location:-1}),C===4?h+=y:h++,d+=y*C}this.vertexSize=d,this.vertexComponentCount=h,this.attributes=l},bind:function(r,h){return r===void 0&&(r=!1),h===void 0&&(h=!1),h&&this.pipeline.flush(),this.renderer.setProgram(this.program),r&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(r){r===void 0&&(r=!1);for(var h=this.gl,d=this.renderer,l=this.vertexSize,p=this.attributes,g=this.program,x=0;x<p.length;x++){var y=p[x],E=y.size,w=y.type,C=y.offset,A=y.enabled,M=y.location,R=!!y.normalized;if(r){M!==-1&&d.deleteAttribLocation(M);var P=this.renderer.createAttribLocation(g,y.name);P.webGLAttribLocation>=0?(h.enableVertexAttribArray(P.webGLAttribLocation),h.vertexAttribPointer(P.webGLAttribLocation,E,w,R,l,C),y.enabled=!0,y.location=P):P.webGLAttribLocation!==-1&&h.disableVertexAttribArray(P.webGLAttribLocation)}else A?h.vertexAttribPointer(M.webGLAttribLocation,E,w,R,l,C):!A&&M!==-1&&M.webGLAttribLocation>-1&&(h.disableVertexAttribArray(M.webGLAttribLocation),y.location=-1)}return this},createUniforms:function(){var r=this.gl,h=this.program,d=this.uniforms,l,p,g,x=r.getProgramParameter(h.webGLProgram,r.ACTIVE_UNIFORMS);for(l=0;l<x;l++){var y=r.getActiveUniform(h.webGLProgram,l);if(y){p=y.name,g=this.renderer.createUniformLocation(h,p),g!==null&&(d[p]={name:p,location:g,setter:null,value1:null,value2:null,value3:null,value4:null});var E=p.indexOf("[");E>0&&(p=p.substr(0,E),d.hasOwnProperty(p)||(g=this.renderer.createUniformLocation(h,p),g!==null&&(d[p]={name:p,location:g,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var r=this.gl;this.renderer.setProgram(this.program);for(var h in this.uniforms){var d=this.uniforms[h];d.setter&&d.setter.call(r,d.location.webGLUniformLocation,d.value1,d.value2,d.value3,d.value4)}},hasUniform:function(r){return this.uniforms.hasOwnProperty(r)},resetUniform:function(r){var h=this.uniforms[r];return h&&(h.value1=null,h.value2=null,h.value3=null,h.value4=null),this},setUniform1:function(r,h,d,l){var p=this.uniforms[h];return p?((l||p.value1!==d)&&(p.setter||(p.setter=r),p.value1=d,this.renderer.setProgram(this.program),r.call(this.gl,p.location.webGLUniformLocation,d),this.pipeline.currentShader=this),this):this},setUniform2:function(r,h,d,l,p){var g=this.uniforms[h];return g?((p||g.value1!==d||g.value2!==l)&&(g.setter||(g.setter=r),g.value1=d,g.value2=l,this.renderer.setProgram(this.program),r.call(this.gl,g.location.webGLUniformLocation,d,l),this.pipeline.currentShader=this),this):this},setUniform3:function(r,h,d,l,p,g){var x=this.uniforms[h];return x?((g||x.value1!==d||x.value2!==l||x.value3!==p)&&(x.setter||(x.setter=r),x.value1=d,x.value2=l,x.value3=p,this.renderer.setProgram(this.program),r.call(this.gl,x.location.webGLUniformLocation,d,l,p),this.pipeline.currentShader=this),this):this},setUniform4:function(r,h,d,l,p,g,x){var y=this.uniforms[h];return y?((x||y.value1!==d||y.value2!==l||y.value3!==p||y.value4!==g)&&(y.setter||(y.setter=r),y.value1=d,y.value2=l,y.value3=p,y.value4=g,this.renderer.setProgram(this.program),r.call(this.gl,y.location.webGLUniformLocation,d,l,p,g),this.pipeline.currentShader=this),this):this},setBoolean:function(r,h){return this.setUniform1(this.gl.uniform1i,r,Number(h))},set1f:function(r,h){return this.setUniform1(this.gl.uniform1f,r,h)},set2f:function(r,h,d){return this.setUniform2(this.gl.uniform2f,r,h,d)},set3f:function(r,h,d,l){return this.setUniform3(this.gl.uniform3f,r,h,d,l)},set4f:function(r,h,d,l,p){return this.setUniform4(this.gl.uniform4f,r,h,d,l,p)},set1fv:function(r,h){return this.setUniform1(this.gl.uniform1fv,r,h,!0)},set2fv:function(r,h){return this.setUniform1(this.gl.uniform2fv,r,h,!0)},set3fv:function(r,h){return this.setUniform1(this.gl.uniform3fv,r,h,!0)},set4fv:function(r,h){return this.setUniform1(this.gl.uniform4fv,r,h,!0)},set1iv:function(r,h){return this.setUniform1(this.gl.uniform1iv,r,h,!0)},set2iv:function(r,h){return this.setUniform1(this.gl.uniform2iv,r,h,!0)},set3iv:function(r,h){return this.setUniform1(this.gl.uniform3iv,r,h,!0)},set4iv:function(r,h){return this.setUniform1(this.gl.uniform4iv,r,h,!0)},set1i:function(r,h){return this.setUniform1(this.gl.uniform1i,r,h)},set2i:function(r,h,d){return this.setUniform2(this.gl.uniform2i,r,h,d)},set3i:function(r,h,d,l){return this.setUniform3(this.gl.uniform3i,r,h,d,l)},set4i:function(r,h,d,l,p){return this.setUniform4(this.gl.uniform4i,r,h,d,l,p)},setMatrix2fv:function(r,h,d){return this.setUniform2(this.gl.uniformMatrix2fv,r,h,d,!0)},setMatrix3fv:function(r,h,d){return this.setUniform2(this.gl.uniformMatrix3fv,r,h,d,!0)},setMatrix4fv:function(r,h,d){return this.setUniform2(this.gl.uniformMatrix4fv,r,h,d,!0)},createProgram:function(r,h){return r===void 0&&(r=this.vertSrc),h===void 0&&(h=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=r,this.fragSrc=h,this.program=this.renderer.createProgram(r,h),this.createUniforms(),this.rebind()},destroy:function(){var r=this.renderer;m(this.uniforms,function(h){r.deleteUniformLocation(h.location)}),this.uniforms=null,m(this.attributes,function(h){r.deleteAttribLocation(h.location)}),this.attributes=null,r.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});s.exports=u}),14500:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};s.exports=T}),4159:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14500),m=e(79291),c={PipelineManager:e(7530),Pipelines:e(96615),RenderTarget:e(32302),Utils:e(70554),WebGLPipeline:e(29100),WebGLRenderer:e(74797),WebGLShader:e(38683),Wrappers:e(9503)};c=m(!1,c,a),s.exports=c}),31302:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=e(78908),o=e(85191),u=e(14500),r=e(29100),h=new a({Extends:r,initialize:function(l){l.fragShader=m(l,"fragShader",c),l.vertShader=m(l,"vertShader",o),l.batchSize=m(l,"batchSize",1),l.vertices=m(l,"vertices",[-1,1,-1,-7,7,1]),l.attributes=m(l,"attributes",[{name:"inPosition",size:2,type:u.FLOAT}]),r.call(this,l)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(d,l){r.prototype.resize.call(this,d,l),this.set2f("uResolution",d,l)},beginMask:function(d,l,p){this.renderer.beginBitmapMask(d,p)},endMask:function(d,l,p){var g=this.gl,x=this.renderer,y=d.bitmapMask;y&&g&&(x.drawBitmapMask(y,l,this),p&&this.set2f("uResolution",p.width,p.height),this.set1i("uInvertMaskAlpha",d.invertAlpha),g.drawArrays(this.topology,0,3),p&&this.set2f("uResolution",this.width,this.height),g.bindTexture(g.TEXTURE_2D,null))}});s.exports=h}),92651:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(58918),c=e(14811),o=e(95540),u=e(43558),r=e(89350),h=e(70554),d=new a({Extends:u,initialize:function(p){p.shaders=[h.setGlowQuality(r.FXGlowFrag,p.game),r.FXShadowFrag,r.FXPixelateFrag,r.FXVignetteFrag,r.FXShineFrag,r.FXBlurLowFrag,r.FXBlurMedFrag,r.FXBlurHighFrag,r.FXGradientFrag,r.FXBloomFrag,r.ColorMatrixFrag,r.FXCircleFrag,r.FXBarrelFrag,r.FXDisplacementFrag,r.FXWipeFrag,r.FXBokehFrag],u.call(this,p);var g=this.game;this.glow=new m.Glow(g),this.shadow=new m.Shadow(g),this.pixelate=new m.Pixelate(g),this.vignette=new m.Vignette(g),this.shine=new m.Shine(g),this.gradient=new m.Gradient(g),this.circle=new m.Circle(g),this.barrel=new m.Barrel(g),this.wipe=new m.Wipe(g),this.bokeh=new m.Bokeh(g);var x=[];x[c.GLOW]=this.onGlow,x[c.SHADOW]=this.onShadow,x[c.PIXELATE]=this.onPixelate,x[c.VIGNETTE]=this.onVignette,x[c.SHINE]=this.onShine,x[c.BLUR]=this.onBlur,x[c.GRADIENT]=this.onGradient,x[c.BLOOM]=this.onBloom,x[c.COLOR_MATRIX]=this.onColorMatrix,x[c.CIRCLE]=this.onCircle,x[c.BARREL]=this.onBarrel,x[c.DISPLACEMENT]=this.onDisplacement,x[c.WIPE]=this.onWipe,x[c.BOKEH]=this.onBokeh,this.fxHandlers=x,this.source,this.target,this.swap},onDraw:function(l,p,g){this.source=l,this.target=p,this.swap=g;var x=l.width,y=l.height,E=this.tempSprite,w=this.fxHandlers;if(E&&E.preFX)for(var C=E.preFX.list,A=0;A<C.length;A++){var M=C[A];M.active&&w[M.type].call(this,M,x,y)}this.drawToGame(this.source)},runDraw:function(){var l=this.source,p=this.target;this.copy(l,p),this.source=p,this.target=l},onGlow:function(l,p,g){var x=this.shaders[c.GLOW];this.setShader(x),this.glow.onPreRender(l,x,p,g),this.runDraw()},onShadow:function(l){var p=this.shaders[c.SHADOW];this.setShader(p),this.shadow.onPreRender(l,p),this.runDraw()},onPixelate:function(l,p,g){var x=this.shaders[c.PIXELATE];this.setShader(x),this.pixelate.onPreRender(l,x,p,g),this.runDraw()},onVignette:function(l){var p=this.shaders[c.VIGNETTE];this.setShader(p),this.vignette.onPreRender(l,p),this.runDraw()},onShine:function(l,p,g){var x=this.shaders[c.SHINE];this.setShader(x),this.shine.onPreRender(l,x,p,g),this.runDraw()},onBlur:function(l,p,g){var x=o(l,"quality"),y=this.shaders[c.BLUR+x];this.setShader(y),this.set1i("uMainSampler",0),this.set2f("resolution",p,g),this.set1f("strength",o(l,"strength")),this.set3fv("color",o(l,"glcolor"));for(var E=o(l,"x"),w=o(l,"y"),C=o(l,"steps"),A=0;A<C;A++)this.set2f("offset",E,0),this.runDraw(),this.set2f("offset",0,w),this.runDraw()},onGradient:function(l){var p=this.shaders[c.GRADIENT];this.setShader(p),this.gradient.onPreRender(l,p),this.runDraw()},onBloom:function(l,p,g){var x=this.shaders[c.BLOOM];this.copySprite(this.source,this.swap),this.setShader(x),this.set1i("uMainSampler",0),this.set1f("strength",o(l,"blurStrength")),this.set3fv("color",o(l,"glcolor"));for(var y=2/p*o(l,"offsetX"),E=2/g*o(l,"offsetY"),w=o(l,"steps"),C=0;C<w;C++)this.set2f("offset",y,0),this.runDraw(),this.set2f("offset",0,E),this.runDraw();this.blendFrames(this.swap,this.source,this.target,o(l,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(l){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",l.getData()),this.set1f("uAlpha",l.alpha),this.runDraw()},onCircle:function(l,p,g){var x=this.shaders[c.CIRCLE];this.setShader(x),this.circle.onPreRender(l,x,p,g),this.runDraw()},onBarrel:function(l){var p=this.shaders[c.BARREL];this.setShader(p),this.barrel.onPreRender(l,p),this.runDraw()},onDisplacement:function(l){this.setShader(this.shaders[c.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",l.x,l.y),this.bindTexture(l.glTexture,1),this.runDraw()},onWipe:function(l){var p=this.shaders[c.WIPE];this.setShader(p),this.wipe.onPreRender(l,p),this.runDraw()},onBokeh:function(l,p,g){var x=this.shaders[c.BOKEH];this.setShader(x),this.bokeh.onPreRender(l,x,p,g),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,u.prototype.destroy.call(this),this}});s.exports=d}),96569:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=e(31063),o=e(57516),u=e(61340),r=e(26099),h=e(29100),d=new a({Extends:o,initialize:function(p){var g=m(p,"fragShader",c);p.fragShader=g.replace("%LIGHT_COUNT%",p.game.renderer.config.maxLights),o.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new r,this._tempMatrix=new u,this._tempMatrix2=new u},boot:function(){h.prototype.boot.call(this)},onRender:function(l,p){var g=l.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var x=g.getLights(p),y=x.length;this.lightsActive=!0;var E,w=this.renderer,C=w.height,A=p.matrix,M=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),this.set1i("uLightCount",y),E=0;E<y;E++){var R=x[E].light,P=R.color,b="uLights["+E+"].";A.transformPoint(R.x,R.y,M),this.set2f(b+"position",M.x-p.scrollX*R.scrollFactorX*p.zoom,C-(M.y-p.scrollY*R.scrollFactorY*p.zoom)),this.set3f(b+"color",P.r,P.g,P.b),this.set1f(b+"intensity",R.intensity),this.set1f(b+"radius",R.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(l){if(l!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(l){var g=-l,x=Math.cos(g),y=Math.sin(g);p[1]=y,p[3]=-y,p[0]=p[4]=x}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=l}},setTexture2D:function(l,p){var g=this.renderer;l===void 0&&(l=g.whiteTexture);var x=this.getNormalMap(p);this.isNewNormalMap(l,x)&&(this.flush(),this.createBatch(l),this.addTextureToBatch(x),this.currentNormalMap=x);var y=0;if(p&&p.parentContainer){var E=p.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);y=E.rotationNormalized}else p&&(y=p.rotation);return this.currentBatch===null&&(this.createBatch(l),this.addTextureToBatch(x)),this.setNormalMapRotation(y),0},setGameObject:function(l,p){p===void 0&&(p=l.frame);var g=p.glTexture,x=this.getNormalMap(l);if(this.isNewNormalMap(g,x)&&(this.flush(),this.createBatch(g),this.addTextureToBatch(x),this.currentNormalMap=x),l.parentContainer){var y=l.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(y.rotationNormalized)}else this.setNormalMapRotation(l.rotation);return this.currentBatch===null&&(this.createBatch(g),this.addTextureToBatch(x)),0},isNewNormalMap:function(l,p){return this.currentTexture!==l||this.currentNormalMap!==p},getNormalMap:function(l){var p;if(l)l.displayTexture?p=l.displayTexture.dataSource[l.displayFrame.sourceIndex]:l.texture?p=l.texture.dataSource[l.frame.sourceIndex]:l.tileset&&(Array.isArray(l.tileset)?p=l.tileset[0].image.dataSource[0]:p=l.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return p?p.glTexture:this.renderer.normalTexture},batchSprite:function(l,p,g){this.lightsActive&&o.prototype.batchSprite.call(this,l,p,g)},batchTexture:function(l,p,g,x,y,E,w,C,A,M,R,P,b,F,I,L,D,O,z,W,k,X,V,G,N,H,U,_,$,j,Z,it){this.lightsActive&&o.prototype.batchTexture.call(this,l,p,g,x,y,E,w,C,A,M,R,P,b,F,I,L,D,O,z,W,k,X,V,G,N,H,U,_,$,j,Z,it)},batchTextureFrame:function(l,p,g,x,y,E,w){this.lightsActive&&o.prototype.batchTextureFrame.call(this,l,p,g,x,y,E,w)}});s.exports=d}),56527:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=e(57516),o=e(45561),u=e(60722),r=e(14500),h=e(29100),d=new a({Extends:c,initialize:function(p){p.fragShader=m(p,"fragShader",o),p.vertShader=m(p,"vertShader",u),p.attributes=m(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),p.forceZero=!0,p.resizeUniform="uResolution",c.call(this,p)},boot:function(){h.prototype.boot.call(this);var l=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height)}});s.exports=d}),57516:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(94811),c=e(95540),o=e(98840),u=e(44667),r=e(61340),h=e(70554),d=e(14500),l=e(29100),p=new a({Extends:l,initialize:function(x){var y=x.game.renderer,E=c(x,"fragShader",o);x.fragShader=h.parseFragmentShaderMaxTextures(E,y.maxTextures),x.vertShader=c(x,"vertShader",u),x.attributes=c(x,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),x.resizeUniform="uResolution",l.call(this,x),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this);var g=this.renderer;this.set1iv("uMainSampler",g.textureIndexes),this.set2f("uResolution",g.width,g.height)},batchSprite:function(g,x,y){this.manager.set(this,g);var E=this._tempMatrix1,w=this._tempMatrix2,C=this._tempMatrix3,A=g.frame,M=A.glTexture,R=A.u0,P=A.v0,b=A.u1,F=A.v1,I=A.x,L=A.y,D=A.cutWidth,O=A.cutHeight,z=A.customPivot,W=g.displayOriginX,k=g.displayOriginY,X=-W+I,V=-k+L;if(g.isCropped){var G=g._crop;(G.flipX!==g.flipX||G.flipY!==g.flipY)&&A.updateCropUVs(G,g.flipX,g.flipY),R=G.u0,P=G.v0,b=G.u1,F=G.v1,D=G.width,O=G.height,I=G.x,L=G.y,X=-W+I,V=-k+L}var N=1,H=1;g.flipX&&(z||(X+=-A.realWidth+W*2),N=-1),g.flipY&&(z||(V+=-A.realHeight+k*2),H=-1);var U=g.x,_=g.y;x.roundPixels&&(U=Math.floor(U),_=Math.floor(_)),w.applyITRS(U,_,g.rotation,g.scaleX*N,g.scaleY*H),E.copyFrom(x.matrix),y?(E.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),w.e=U,w.f=_):(w.e-=x.scrollX*g.scrollFactorX,w.f-=x.scrollY*g.scrollFactorY),E.multiply(w,C);var $=C.setQuad(X,V,X+D,V+O,x.renderRoundPixels),j=h.getTintAppendFloatAlpha,Z=x.alpha,it=j(g.tintTopLeft,Z*g._alphaTL),at=j(g.tintTopRight,Z*g._alphaTR),q=j(g.tintBottomLeft,Z*g._alphaBL),ft=j(g.tintBottomRight,Z*g._alphaBR);this.shouldFlush(6)&&this.flush();var vt=this.setGameObject(g,A);this.manager.preBatch(g),this.batchQuad(g,$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],R,P,b,F,it,at,q,ft,g.tintFill,M,vt),this.manager.postBatch(g)},batchTexture:function(g,x,y,E,w,C,A,M,R,P,b,F,I,L,D,O,z,W,k,X,V,G,N,H,U,_,$,j,Z,it,at,q,ft){ft===void 0&&(ft=!1),this.manager.set(this,g);var vt=this._tempMatrix1,Tt=this._tempMatrix2,ut=this._tempMatrix3,Bt=W/y+$,Pt=k/E+j,et=(W+X)/y+$,Q=(k+V)/E+j,lt=A,pt=M,Mt=-O,Ct=-z;if(g.isCropped){var Kt=g._crop,Ut=Kt.width,Wt=Kt.height;lt=Ut,pt=Wt,A=Ut,M=Wt,W=Kt.x,k=Kt.y;var ae=W,zt=k;F&&(ae=X-Kt.x-Ut),I&&(zt=V-Kt.y-Wt),Bt=ae/y+$,Pt=zt/E+j,et=(ae+Ut)/y+$,Q=(zt+Wt)/E+j,Mt=-O+W,Ct=-z+k}I=I^(!at&&x.isRenderTexture?1:0),F&&(lt*=-1,Mt+=A),I&&(pt*=-1,Ct+=M),Z.roundPixels&&(w=Math.floor(w),C=Math.floor(C)),Tt.applyITRS(w,C,b,R,P),vt.copyFrom(Z.matrix),it?(vt.multiplyWithOffset(it,-Z.scrollX*L,-Z.scrollY*D),Tt.e=w,Tt.f=C):(Tt.e-=Z.scrollX*L,Tt.f-=Z.scrollY*D),vt.multiply(Tt,ut);var Ht=ut.setQuad(Mt,Ct,Mt+lt,Ct+pt,Z.renderRoundPixels);q==null&&(q=this.setTexture2D(x)),g&&!ft&&this.manager.preBatch(g),this.batchQuad(g,Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5],Ht[6],Ht[7],Bt,Pt,et,Q,G,N,H,U,_,x,q),g&&!ft&&this.manager.postBatch(g)},batchTextureFrame:function(g,x,y,E,w,C,A){this.manager.set(this);var M=this._tempMatrix1.copyFrom(C),R=this._tempMatrix2;A?M.multiply(A,R):R=M;var P=R.setQuad(x,y,x+g.width,y+g.height),b=this.setTexture2D(g.source.glTexture);E=h.getTintAppendFloatAlpha(E,w),this.batchQuad(null,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],g.u0,g.v0,g.u1,g.v1,E,E,E,E,0,g.glTexture,b)},batchFillRect:function(g,x,y,E,w,C){this.renderer.pipelines.set(this);var A=this.calcMatrix;C&&C.multiply(w,A);var M=A.setQuad(g,x,g+y,x+E),R=this.fillTint;this.batchQuad(null,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],0,0,1,1,R.TL,R.TR,R.BL,R.BR,2)},batchFillTriangle:function(g,x,y,E,w,C,A,M){this.renderer.pipelines.set(this);var R=this.calcMatrix;M&&M.multiply(A,R);var P=R.getX(g,x),b=R.getY(g,x),F=R.getX(y,E),I=R.getY(y,E),L=R.getX(w,C),D=R.getY(w,C),O=this.fillTint;this.batchTri(null,P,b,F,I,L,D,0,0,1,1,O.TL,O.TR,O.BL,2)},batchStrokeTriangle:function(g,x,y,E,w,C,A,M,R){var P=this.tempTriangle;P[0].x=g,P[0].y=x,P[0].width=A,P[1].x=y,P[1].y=E,P[1].width=A,P[2].x=w,P[2].y=C,P[2].width=A,P[3].x=g,P[3].y=x,P[3].width=A,this.batchStrokePath(P,A,!1,M,R)},batchFillPath:function(g,x,y){this.renderer.pipelines.set(this);var E=this.calcMatrix;y&&y.multiply(x,E);for(var w=g.length,C=this.polygonCache,A,M,R=this.fillTint.TL,P=this.fillTint.TR,b=this.fillTint.BL,F=0;F<w;++F)M=g[F],C.push(M.x,M.y);A=m(C),w=A.length;for(var I=0;I<w;I+=3){var L=A[I+0]*2,D=A[I+1]*2,O=A[I+2]*2,z=C[L+0],W=C[L+1],k=C[D+0],X=C[D+1],V=C[O+0],G=C[O+1],N=E.getX(z,W),H=E.getY(z,W),U=E.getX(k,X),_=E.getY(k,X),$=E.getX(V,G),j=E.getY(V,G);this.batchTri(null,N,H,U,_,$,j,0,0,1,1,R,P,b,2)}C.length=0},batchStrokePath:function(g,x,y,E,w){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var C=g.length-1,A=0;A<C;A++){var M=g[A],R=g[A+1];this.batchLine(M.x,M.y,R.x,R.y,M.width/2,R.width/2,x,A,!y&&A===C-1,E,w)}},batchLine:function(g,x,y,E,w,C,A,M,R,P,b){this.renderer.pipelines.set(this);var F=this.calcMatrix;b&&b.multiply(P,F);var I=y-g,L=E-x,D=Math.sqrt(I*I+L*L);if(D!==0){var O=w*(E-x)/D,z=w*(g-y)/D,W=C*(E-x)/D,k=C*(g-y)/D,X=y-W,V=E-k,G=g-O,N=x-z,H=y+W,U=E+k,_=g+O,$=x+z,j=F.getX(X,V),Z=F.getY(X,V),it=F.getX(G,N),at=F.getY(G,N),q=F.getX(H,U),ft=F.getY(H,U),vt=F.getX(_,$),Tt=F.getY(_,$),ut=this.strokeTint,Bt=ut.TL,Pt=ut.TR,et=ut.BL,Q=ut.BR;if(this.batchQuad(null,vt,Tt,it,at,j,Z,q,ft,0,0,1,1,Bt,Pt,et,Q,2),!(A<=2)){var lt=this.prevQuad,pt=this.firstQuad;M>0&&lt[4]?this.batchQuad(null,vt,Tt,it,at,lt[0],lt[1],lt[2],lt[3],0,0,1,1,Bt,Pt,et,Q,2):(pt[0]=vt,pt[1]=Tt,pt[2]=it,pt[3]=at,pt[4]=1),R&&pt[4]?this.batchQuad(null,j,Z,q,ft,pt[0],pt[1],pt[2],pt[3],0,0,1,1,Bt,Pt,et,Q,2):(lt[0]=j,lt[1]=Z,lt[2]=q,lt[3]=ft,lt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,l.prototype.destroy.call(this),this}});s.exports=p}),43439:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=e(4127),o=e(89924),u=e(29100),r=new a({Extends:u,initialize:function(d){d.vertShader=m(d,"vertShader",o),d.fragShader=m(d,"fragShader",c),d.attributes=m(d,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),u.call(this,d)},onRender:function(h,d){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",d.zoom)},batchPointLight:function(h,d,l,p,g,x,y,E,w,C,A,M){var R=h.color,P=h.intensity,b=h.radius,F=h.attenuation,I=R.r*P,L=R.g*P,D=R.b*P,O=d.alpha*h.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(l,p,A,M,b,F,I,L,D,O),this.batchLightVert(g,x,A,M,b,F,I,L,D,O),this.batchLightVert(y,E,A,M,b,F,I,L,D,O),this.batchLightVert(l,p,A,M,b,F,I,L,D,O),this.batchLightVert(y,E,A,M,b,F,I,L,D,O),this.batchLightVert(w,C,A,M,b,F,I,L,D,O),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(h,d,l,p,g,x,y,E,w,C){var A=this.vertexViewF32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;A[++M]=h,A[++M]=d,A[++M]=l,A[++M]=p,A[++M]=g,A[++M]=x,A[++M]=y,A[++M]=E,A[++M]=w,A[++M]=C,this.vertexCount++}});s.exports=r}),84057:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(89422),c=e(95540),o=e(27681),u=e(49627),r=e(29100),h=new a({Extends:r,initialize:function(l){l.renderTarget=c(l,"renderTarget",1),l.fragShader=c(l,"fragShader",o),l.vertShader=c(l,"vertShader",u),l.attributes=c(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),l.batchSize=1,l.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,l),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new m,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){r.prototype.boot.call(this);var d=this.manager.UTILITY_PIPELINE;this.fullFrame1=d.fullFrame1,this.fullFrame2=d.fullFrame2,this.halfFrame1=d.halfFrame1,this.halfFrame2=d.halfFrame2;var l=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height);for(var p=this.renderTargets,g=0;g<p.length;g++)p[g].autoResize=!0},postBatch:function(d){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(d){this.bindAndDraw(d)},getController:function(d){return d!==void 0?d:this.controller?this.controller:this},copySprite:function(d,l,p){p===void 0&&(p=!1);var g=this.gl;g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,d.texture.webGLTexture);var x=g.getParameter(g.FRAMEBUFFER_BINDING);g.bindFramebuffer(g.FRAMEBUFFER,l.framebuffer.webGLFramebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,l.texture.webGLTexture,0),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),p&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,x))},copyFrame:function(d,l,p,g,x){this.manager.copyFrame(d,l,p,g,x)},copyToGame:function(d){this.manager.copyToGame(d)},drawFrame:function(d,l,p){this.manager.drawFrame(d,l,p,this.colorMatrix)},blendFrames:function(d,l,p,g,x){this.manager.blendFrames(d,l,p,g,x)},blendFramesAdditive:function(d,l,p,g,x){this.manager.blendFramesAdditive(d,l,p,g,x)},clearFrame:function(d,l){this.manager.clearFrame(d,l)},blitFrame:function(d,l,p,g,x,y){this.manager.blitFrame(d,l,p,g,x,y)},copyFrameRect:function(d,l,p,g,x,y,E,w){this.manager.copyFrameRect(d,l,p,g,x,y,E,w)},bindAndDraw:function(d,l,p,g,x){p===void 0&&(p=!0),g===void 0&&(g=!0);var y=this.gl,E=this.renderer;this.bind(x),this.set1i("uMainSampler",0),l?(y.viewport(0,0,l.width,l.height),y.bindFramebuffer(y.FRAMEBUFFER,l.framebuffer.webGLFramebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,l.texture.webGLTexture,0),p&&(g?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT))):(E.popFramebuffer(!1,!1),E.currentFramebuffer||y.viewport(0,0,E.width,E.height)),E.restoreStencilMask(),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,d.texture.webGLTexture),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),l&&(y.bindTexture(y.TEXTURE_2D,null),y.bindFramebuffer(y.FRAMEBUFFER,E.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),r.prototype.destroy.call(this),this}});s.exports=h}),43558:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),m=e(67502),c=e(83419),o=e(96293),u=e(95540),r=e(57516),h=e(27681),d=e(87841),l=e(32302),p=e(45561),g=e(60722),x=e(29100),y=new c({Extends:r,initialize:function(w){var C=u(w,"fragShader",h),A=u(w,"vertShader",g),M=u(w,"drawShader",h),R=[{name:"DrawSprite",fragShader:p,vertShader:g},{name:"CopySprite",fragShader:C,vertShader:A},{name:"DrawGame",fragShader:M,vertShader:g},{name:"ColorMatrix",fragShader:o}],P=u(w,"shaders",[]);w.shaders=R.concat(P),w.vertShader||(w.vertShader=A),w.batchSize=1,r.call(this,w),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new d,this.targetBounds=new d,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){x.prototype.boot.call(this);var E=this.shaders,w=this.renderer;this.drawSpriteShader=E[0],this.copyShader=E[1],this.gameShader=E[2],this.colorMatrixShader=E[3],this.fsTarget=new l(w,w.width,w.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var C=new ArrayBuffer(168);this.quadVertexData=C,this.quadVertexViewF32=new Float32Array(C),this.quadVertexBuffer=w.createVertexBuffer(C,this.gl.STATIC_DRAW),this.onResize(w.width,w.height),this.currentShader=this.copyShader,this.set2f("uResolution",w.width,w.height)},onResize:function(E,w){var C=this.quadVertexViewF32;C[1]=w,C[22]=w,C[14]=E,C[28]=E,C[35]=E,C[36]=w},batchQuad:function(E,w,C,A,M,R,P,b,F,I,L,D,O,z,W,k,X,V,G){var N=Math.min(w,A,R,b),H=Math.min(C,M,P,F),U=Math.max(w,A,R,b),_=Math.max(C,M,P,F),$=U-N,j=_-H,Z=this.spriteBounds.setTo(N,H,$,j),it=E?E.preFX.padding:0,at=$+it*2,q=j+it*2,ft=Math.abs(Math.max(at,q)),vt=this.manager.getRenderTarget(ft),Tt=this.targetBounds.setTo(0,0,vt.width,vt.height);m(Tt,Math.round(Z.centerX),Math.round(Z.centerY)),this.tempSprite=E;var ut=this.gl,Bt=this.renderer;Bt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Bt.width,Bt.height),this.flipProjectionMatrix(!0),E&&(this.onDrawSprite(E,vt),E.preFX.onFX(this));var Pt=this.fsTarget;return this.flush(),ut.viewport(0,0,Bt.width,Bt.height),ut.bindFramebuffer(ut.FRAMEBUFFER,Pt.framebuffer.webGLFramebuffer),ut.framebufferTexture2D(ut.FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_2D,Pt.texture.webGLTexture,0),ut.clearColor(0,0,0,0),ut.clear(ut.COLOR_BUFFER_BIT),this.setTexture2D(G),this.batchVert(w,C,I,L,0,V,z),this.batchVert(A,M,I,O,0,V,k),this.batchVert(R,P,D,O,0,V,X),this.batchVert(w,C,I,L,0,V,z),this.batchVert(R,P,D,O,0,V,X),this.batchVert(b,F,D,L,0,V,W),this.flush(),this.flipProjectionMatrix(!1),ut.activeTexture(ut.TEXTURE0),ut.bindTexture(ut.TEXTURE_2D,vt.texture.webGLTexture),ut.copyTexSubImage2D(ut.TEXTURE_2D,0,0,0,Tt.x,Tt.y,Tt.width,Tt.height),ut.bindFramebuffer(ut.FRAMEBUFFER,null),ut.bindTexture(ut.TEXTURE_2D,null),this.onBatch(E),this.currentShader=this.copyShader,this.onDraw(vt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(E,w,C,A,M,R,P){C===void 0&&(C=!0),A===void 0&&(A=!0),M===void 0&&(M=!1),P===void 0&&(P=this.copyShader);var b=this.gl,F=this.tempSprite;R&&(P=this.colorMatrixShader),this.currentShader=P;var I=this.setVertexBuffer(this.quadVertexBuffer);P.bind(I,!1);var L=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",L.width,L.height),F.preFX.onFXCopy(this),this.onCopySprite(E,w,F),R&&(this.set1fv("uColorMatrix",R.getData()),this.set1f("uAlpha",R.alpha)),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,E.texture.webGLTexture),E.height>w.height)b.viewport(0,0,E.width,E.height),this.setTargetUVs(E,w);else{var D=w.height-E.height;b.viewport(0,D,E.width,E.height),this.resetUVs()}if(b.bindFramebuffer(b.FRAMEBUFFER,w.framebuffer.webGLFramebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,w.texture.webGLTexture,0),C&&(b.clearColor(0,0,0,+!A),b.clear(b.COLOR_BUFFER_BIT)),M){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}b.bufferData(b.ARRAY_BUFFER,this.quadVertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),M&&this.renderer.setBlendMode(O),b.bindFramebuffer(b.FRAMEBUFFER,null)},copy:function(E,w){var C=this.gl;this.set1i("uMainSampler",0),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,E.texture.webGLTexture),C.viewport(0,0,E.width,E.height),this.setUVs(0,0,0,1,1,1,1,0),C.bindFramebuffer(C.FRAMEBUFFER,w.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,w.texture.webGLTexture,0),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.quadVertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null)},blendFrames:function(E,w,C,A,M){this.manager.blendFrames(E,w,C,A,M)},blendFramesAdditive:function(E,w,C,A,M){this.manager.blendFramesAdditive(E,w,C,A,M)},drawToGame:function(E){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(E)},copyToGame:function(E){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(E)},bindAndDraw:function(E){var w=this.gl,C=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(E.texture);var A=this._tempMatrix1.loadIdentity(),M=this.targetBounds.x,R=this.targetBounds.y,P=M+E.width,b=R+E.height,F=A.getX(M,R),I=A.getX(M,b),L=A.getX(P,b),D=A.getX(P,R),O=A.getY(M,R),z=A.getY(M,b),W=A.getY(P,b),k=A.getY(P,R),X=16777215;this.batchVert(F,O,0,0,0,0,X),this.batchVert(I,z,0,1,0,0,X),this.batchVert(L,W,1,1,0,0,X),this.batchVert(F,O,0,0,0,0,X),this.batchVert(L,W,1,1,0,0,X),this.batchVert(D,k,1,0,0,0,X),C.restoreFramebuffer(!1,!0),C.currentFramebuffer||w.viewport(0,0,C.width,C.height),C.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(E){this.drawToGame(E)},setUVs:function(E,w,C,A,M,R,P,b){var F=this.quadVertexViewF32;F[2]=E,F[3]=w,F[9]=C,F[10]=A,F[16]=M,F[17]=R,F[23]=E,F[24]=w,F[30]=M,F[31]=R,F[37]=P,F[38]=b},setTargetUVs:function(E,w){var C=w.height/E.height;C>.5?C=.5-(C-.5):C=.5+(.5-C),this.setUVs(0,C,0,1+C,1,1+C,1,C)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,r.prototype.destroy.call(this),this}});s.exports=y}),81041:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=e(57516),o=new a({Extends:c,initialize:function(r){r.topology=5,r.batchSize=m(r,"batchSize",256),c.call(this,r)}});s.exports=o}),12385:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=e(57516),o=e(45561),u=e(60722),r=e(29100),h=new a({Extends:c,initialize:function(l){l.fragShader=m(l,"fragShader",o),l.vertShader=m(l,"vertShader",u),l.forceZero=!0,c.call(this,l)},boot:function(){r.prototype.boot.call(this);var d=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",d.width,d.height)}});s.exports=h}),7589:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35407),m=e(10312),c=e(83419),o=e(89422),u=e(96293),r=e(36682),h=e(95540),d=e(48247),l=e(49627),p=e(29100),g=new c({Extends:p,initialize:function(y){y.renderTarget=h(y,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),y.vertShader=h(y,"vertShader",l),y.shaders=h(y,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:a},{name:"LinearBlend",fragShader:d},{name:"ColorMatrix",fragShader:u}]),y.attributes=h(y,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),y.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],y.batchSize=1,p.call(this,y),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){p.prototype.boot.call(this);var x=this.shaders,y=this.renderTargets;this.copyShader=x[0],this.addShader=x[1],this.linearShader=x[2],this.colorMatrixShader=x[3],this.fullFrame1=y[0],this.fullFrame2=y[1],this.halfFrame1=y[2],this.halfFrame2=y[3]},copyFrame:function(x,y,E,w,C){E===void 0&&(E=1),w===void 0&&(w=!0),C===void 0&&(C=!0);var A=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",E),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,x.texture.webGLTexture),y?(A.viewport(0,0,y.width,y.height),A.bindFramebuffer(A.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,y.texture.webGLTexture,0)):A.viewport(0,0,x.width,x.height),w&&(C?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blitFrame:function(x,y,E,w,C,A,M){E===void 0&&(E=1),w===void 0&&(w=!0),C===void 0&&(C=!0),A===void 0&&(A=!1),M===void 0&&(M=!1);var R=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",E),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,x.texture.webGLTexture),x.height>y.height)R.viewport(0,0,x.width,x.height),this.setTargetUVs(x,y);else{var P=y.height-x.height;R.viewport(0,P,x.width,x.height)}if(R.bindFramebuffer(R.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,y.texture.webGLTexture,0),w&&(C?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),A){var b=this.renderer.currentBlendMode;this.renderer.setBlendMode(m.ERASE)}M&&this.flipY(),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),A&&this.renderer.setBlendMode(b),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(x,y,E,w,C,A,M,R){M===void 0&&(M=!0),R===void 0&&(R=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,x.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,x.texture.webGLTexture,0),M&&(R?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,y.texture.webGLTexture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,E,w,C,A),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(x){var y=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,x.texture.webGLTexture),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6)},drawFrame:function(x,y,E,w){E===void 0&&(E=!0),w===void 0&&(w=this.colorMatrix);var C=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",w.getData()),this.set1f("uAlpha",w.alpha),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,x.texture.webGLTexture),y?(C.viewport(0,0,y.width,y.height),C.bindFramebuffer(C.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,y.texture.webGLTexture,0)):C.viewport(0,0,x.width,x.height),E?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blendFrames:function(x,y,E,w,C,A){w===void 0&&(w=1),C===void 0&&(C=!0),A===void 0&&(A=this.linearShader);var M=this.gl;this.setShader(A),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",w),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,x.texture.webGLTexture),M.activeTexture(M.TEXTURE1),M.bindTexture(M.TEXTURE_2D,y.texture.webGLTexture),E?(M.bindFramebuffer(M.FRAMEBUFFER,E.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,E.texture.webGLTexture,0),M.viewport(0,0,E.width,E.height)):M.viewport(0,0,x.width,x.height),C?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blendFramesAdditive:function(x,y,E,w,C){this.blendFrames(x,y,E,w,C,this.addShader)},clearFrame:function(x,y){y===void 0&&(y=!0);var E=this.gl;E.viewport(0,0,x.width,x.height),E.bindFramebuffer(E.FRAMEBUFFER,x.framebuffer.webGLFramebuffer),y?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT);var w=this.renderer.currentFramebuffer;E.bindFramebuffer(E.FRAMEBUFFER,w.webGLFramebuffer)},setUVs:function(x,y,E,w,C,A,M,R){var P=this.vertexViewF32;P[2]=x,P[3]=y,P[6]=E,P[7]=w,P[10]=C,P[11]=A,P[14]=x,P[15]=y,P[18]=C,P[19]=A,P[22]=M,P[23]=R},setTargetUVs:function(x,y){var E=y.height/x.height;E>.5?E=.5-(E-.5):E=.5+(.5-E),this.setUVs(0,E,0,1+E,1,1+E,1,E)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});s.exports=g}),36060:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};s.exports=T}),84817:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelineafterflush"}),36712:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelinebeforeflush"}),40285:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelinebind"}),65918:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelineboot"}),92852:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelinedestroy"}),56072:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelinerebind"}),57566:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pipelineresize"}),77085:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AFTER_FLUSH:e(84817),BEFORE_FLUSH:e(36712),BIND:e(40285),BOOT:e(65918),DESTROY:e(92852),REBIND:e(56072),RESIZE:e(57566)}}),54812:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(99155),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.amount=1},onPreRender:function(u,r){u=this.getController(u),this.set1f("amount",u.amount,r)}});s.exports=o}),67329:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(24400),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(u){u=this.getController(u),this.set1f("strength",u.blurStrength),this.set3fv("color",u.glcolor)},onDraw:function(u){var r=this.getController(),h=this.fullFrame1,d=this.fullFrame2;this.copyFrame(u,d);for(var l=2/u.width*r.offsetX,p=2/u.height*r.offsetY,g=0;g<r.steps;g++)this.set2f("offset",l,0),this.copySprite(u,h),this.set2f("offset",0,p),this.copySprite(h,u);this.blendFrames(d,u,h,r.strength),this.copyToGame(h)}});s.exports=o}),8861:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(41514),c=e(51078),o=e(94328),u=e(84057),r=new a({Extends:u,initialize:function(d){u.call(this,{game:d,shaders:[{name:"Gaussian5",fragShader:m},{name:"Gaussian9",fragShader:c},{name:"Gaussian13",fragShader:o}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(h){var d=this.getController(),l=this.gl,p=this.fullFrame1,g=l.getParameter(l.FRAMEBUFFER_BINDING);this.bind(this.shaders[d.quality]),l.activeTexture(l.TEXTURE0),l.viewport(0,0,h.width,h.height),this.set1i("uMainSampler",0),this.set2f("resolution",h.width,h.height),this.set1f("strength",d.strength),this.set3fv("color",d.glcolor);for(var x=0;x<d.steps;x++)this.set2f("offset",d.x,0),this.copySprite(h,p),this.set2f("offset",0,d.y),this.copySprite(p,h);l.bindFramebuffer(l.FRAMEBUFFER,g),l.bindTexture(l.TEXTURE_2D,null),this.copyToGame(h)}});s.exports=r}),51051:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(90610),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(u,r,h,d){u=this.getController(u),this.set1f("radius",u.radius,r),this.set1f("amount",u.amount,r),this.set1f("contrast",u.contrast,r),this.set1f("strength",u.strength,r),this.set2f("blur",u.blurX,u.blurY,r),this.setBoolean("isTiltShift",u.isTiltShift,r),h&&d&&this.set2f("resolution",h,d,r)},onDraw:function(u){this.set2f("resolution",u.width,u.height),this.bindAndDraw(u)}});s.exports=o}),89428:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(91899),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(u,r,h,d){u=this.getController(u),this.set1f("scale",u.scale,r),this.set1f("feather",u.feather,r),this.set1f("thickness",u.thickness,r),this.set3fv("color",u.glcolor,r),this.set4fv("backgroundColor",u.glcolor2,r),h&&d&&this.set2f("resolution",h,d,r)},onDraw:function(u){this.set2f("resolution",u.width,u.height),this.bindAndDraw(u)}});s.exports=o}),88904:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(84057),c=new a({Extends:m,initialize:function(u){m.call(this,{game:u})},onDraw:function(o){var u=this.fullFrame1;this.controller?this.manager.drawFrame(o,u,!0,this.controller):this.drawFrame(o,u),this.copyToGame(u)}});s.exports=c}),63563:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(47838),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(u){var r=this.game.textures.getFrame(u);r&&(this.glTexture=r.glTexture)},onDraw:function(u){var r=this.getController(),h=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",r.x,r.y),this.bindTexture(r.glTexture,1),this.copySprite(u,h),this.copyToGame(h)}});s.exports=o}),94045:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=e(98656),o=e(84057),u=e(70554),r=new a({Extends:o,initialize:function(d,l){var p=m(l,"quality",.1),g=m(l,"distance",10);o.call(this,{game:d,fragShader:u.setGlowQuality(c,d,p,g)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(h,d,l,p){h=this.getController(h),this.set1f("outerStrength",h.outerStrength,d),this.set1f("innerStrength",h.innerStrength,d),this.set4fv("glowColor",h.glcolor,d),this.setBoolean("knockout",h.knockout,d),l&&p&&this.set2f("resolution",l,p,d)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});s.exports=r}),74088:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(70463),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(u,r){u=this.getController(u),this.set1f("alpha",u.alpha,r),this.set1i("size",u.size,r),this.set3fv("color1",u.glcolor1,r),this.set3fv("color2",u.glcolor2,r),this.set2f("positionFrom",u.fromX,u.fromY,r),this.set2f("positionTo",u.toX,u.toY,r)}});s.exports=o}),99636:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50831),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.amount=1},onPreRender:function(u,r,h,d){u=this.getController(u),this.set1f("amount",u.amount,r),h&&d&&this.set2f("resolution",h,d,r)},onDraw:function(u){this.set2f("resolution",u.width,u.height),this.bindAndDraw(u)}});s.exports=o}),34700:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(92595),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(u,r){u=this.getController(u);var h=u.samples;this.set1i("samples",h,r),this.set1f("intensity",u.intensity,r),this.set1f("decay",u.decay,r),this.set1f("power",u.power/h,r),this.set2f("lightPosition",u.x,u.y,r),this.set4fv("color",u.glcolor,r)}});s.exports=o}),91157:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(72464),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(u,r,h,d){u=this.getController(u),this.setTime("time",r),this.set1f("speed",u.speed,r),this.set1f("lineWidth",u.lineWidth,r),this.set1f("gradient",u.gradient,r),this.setBoolean("reveal",u.reveal,r),h&&d&&this.set2f("resolution",h,d,r)},onDraw:function(u){this.set2f("resolution",u.width,u.height),this.bindAndDraw(u)}});s.exports=o}),27797:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(39249),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(u,r){u=this.getController(u),this.set1f("radius",u.radius,r),this.set1f("strength",u.strength,r),this.set2f("position",u.x,u.y,r)}});s.exports=o}),67603:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(2878),c=e(84057),o=new a({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:m}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(u,r){u=this.getController(u);var h=u.progress,d=u.wipeWidth,l=u.direction,p=u.axis;this.set4f("config",h,d,l,p,r),this.setBoolean("reveal",u.reveal,r)}});s.exports=o}),58918:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Barrel:e(54812),Bloom:e(67329),Blur:e(8861),Bokeh:e(51051),Circle:e(89428),ColorMatrix:e(88904),Displacement:e(63563),Glow:e(94045),Gradient:e(74088),Pixelate:e(99636),Shadow:e(34700),Shine:e(91157),Vignette:e(27797),Wipe:e(67603)};s.exports=a}),96615:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36060),m=e(79291),c={FX:e(58918),BitmapMaskPipeline:e(31302),Events:e(77085),FXPipeline:e(92651),LightPipeline:e(96569),MobilePipeline:e(56527),MultiPipeline:e(57516),PointLightPipeline:e(43439),PostFXPipeline:e(84057),PreFXPipeline:e(43558),RopePipeline:e(81041),SinglePipeline:e(12385),UtilityPipeline:e(7589)};c=m(!1,c,a),s.exports=c}),35407:(s=>{s.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)}),78908:(s=>{s.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)}),85191:(s=>{s.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)}),96293:(s=>{s.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)}),36682:(s=>{s.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)}),99155:(s=>{s.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)}),24400:(s=>{s.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)}),94328:(s=>{s.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),41514:(s=>{s.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),51078:(s=>{s.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),90610:(s=>{s.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)}),91899:(s=>{s.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)}),47838:(s=>{s.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)}),98656:(s=>{s.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)}),70463:(s=>{s.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)}),50831:(s=>{s.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)}),92595:(s=>{s.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)}),72464:(s=>{s.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)}),39249:(s=>{s.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)}),2878:(s=>{s.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)}),31063:(s=>{s.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)}),48247:(s=>{s.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)}),41214:(s=>{s.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)}),39653:(s=>{s.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)}),62143:(s=>{s.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),47940:(s=>{s.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),98840:(s=>{s.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),44667:(s=>{s.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),4127:(s=>{s.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)}),89924:(s=>{s.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)}),27681:(s=>{s.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)}),49627:(s=>{s.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)}),45561:(s=>{s.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),60722:(s=>{s.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),89350:((s,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AddBlendFrag:e(35407),BitmapMaskFrag:e(78908),BitmapMaskVert:e(85191),ColorMatrixFrag:e(96293),CopyFrag:e(36682),FXBarrelFrag:e(99155),FXBloomFrag:e(24400),FXBlurHighFrag:e(94328),FXBlurLowFrag:e(41514),FXBlurMedFrag:e(51078),FXBokehFrag:e(90610),FXCircleFrag:e(91899),FXDisplacementFrag:e(47838),FXGlowFrag:e(98656),FXGradientFrag:e(70463),FXPixelateFrag:e(50831),FXShadowFrag:e(92595),FXShineFrag:e(72464),FXVignetteFrag:e(39249),FXWipeFrag:e(2878),LightFrag:e(31063),LinearBlendFrag:e(48247),MeshFrag:e(41214),MeshVert:e(39653),MobileFrag:e(62143),MobileVert:e(47940),MultiFrag:e(98840),MultiVert:e(44667),PointLightFrag:e(4127),PointLightVert:e(89924),PostFXFrag:e(27681),QuadVert:e(49627),SingleFrag:e(45561),SingleVert:e(60722)}}),93567:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r){this.webGLAttribLocation=-1,this.gl=o,this.program=u,this.name=r,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var c=this.gl;c.isContextLost()||(this.webGLAttribLocation=c.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});s.exports=m}),26128:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r,h){this.webGLBuffer=null,this.gl=o,this.initialDataOrSize=u,this.bufferType=r,this.bufferUsage=h,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var c=this.gl;if(!c.isContextLost()){var o=this.bufferType,u=c.createBuffer();this.webGLBuffer=u,c.bindBuffer(o,this.webGLBuffer),c.bufferData(o,this.initialDataOrSize,this.bufferUsage),c.bindBuffer(o,null)}}},destroy:function(){var c=this.gl;c.isContextLost()||c.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});s.exports=m}),84387:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},c=new a({initialize:function(u,r,h,d,l){this.webGLFramebuffer=null,this.gl=u,this.width=r,this.height=h,this.renderTexture=d,this.addDepthStencilBuffer=!!l,this.createResource()},createResource:function(){var o=this.gl;if(!o.isContextLost()){var u=this.renderTexture,r=0,h=o.createFramebuffer();if(this.webGLFramebuffer=h,o.bindFramebuffer(o.FRAMEBUFFER,h),u.isRenderTexture=!0,u.isAlphaPremultiplied=!1,o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,u.webGLTexture,0),r=o.checkFramebufferStatus(o.FRAMEBUFFER),r!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(m[r]||r));if(this.addDepthStencilBuffer){var d=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,d),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,this.width,this.height),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,d)}o.bindFramebuffer(o.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var o=this.gl;if(!o.isContextLost()){o.bindFramebuffer(o.FRAMEBUFFER,this.webGLFramebuffer);var u=o.getFramebufferAttachmentParameter(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);u!==null&&(o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,null,0),o.deleteTexture(u));var r=o.getFramebufferAttachmentParameter(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);r!==null&&o.deleteRenderbuffer(r),o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});s.exports=c}),1482:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r){this.webGLProgram=null,this.gl=o,this.vertexSource=u,this.fragmentSource=r,this.createResource()},createResource:function(){var c=this.gl;if(!c.isContextLost()){var o=c.createProgram(),u=c.createShader(c.VERTEX_SHADER),r=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(u,this.vertexSource),c.shaderSource(r,this.fragmentSource),c.compileShader(u),c.compileShader(r);var h=`Shader failed:
`;if(!c.getShaderParameter(u,c.COMPILE_STATUS))throw new Error("Vertex "+h+c.getShaderInfoLog(u));if(!c.getShaderParameter(r,c.COMPILE_STATUS))throw new Error("Fragment "+h+c.getShaderInfoLog(r));if(c.attachShader(o,u),c.attachShader(o,r),c.linkProgram(o),!c.getProgramParameter(o,c.LINK_STATUS))throw new Error("Link "+h+c.getProgramInfoLog(o));c.useProgram(o),this.webGLProgram=o}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});s.exports=m}),82751:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50030),c=new a({initialize:function(u,r,h,d,l,p,g,x,y,E,w,C,A){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=u,this.mipLevel=r,this.minFilter=h,this.magFilter=d,this.wrapT=l,this.wrapS=p,this.format=g,this.pixels=x,this.width=y,this.height=E,this.pma=w??!0,this.forceSize=!!C,this.flipY=!!A,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var o=this.gl;if(!o.isContextLost()){if(this.pixels instanceof c){this.webGLTexture=this.pixels.webGLTexture;return}var u=o.createTexture();u.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=u,this._processTexture()}},update:function(o,u,r,h,d,l,p,g,x){if(!(u===0||r===0)){this.pixels=o,this.width=u,this.height=r,this.flipY=h,this.wrapS=d,this.wrapT=l,this.minFilter=p,this.magFilter=g,this.format=x;var y=this.gl;y.isContextLost()||this._processTexture()}},_processTexture:function(){var o=this.gl;o.activeTexture(o.TEXTURE0);var u=o.getParameter(o.TEXTURE_BINDING_2D);o.bindTexture(o.TEXTURE_2D,this.webGLTexture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.minFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,this.magFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,this.wrapS),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,this.wrapT),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,this.flipY);var r=this.pixels,h=this.mipLevel,d=this.width,l=this.height,p=this.format,g=!1;if(r==null)o.texImage2D(o.TEXTURE_2D,h,p,d,l,0,p,o.UNSIGNED_BYTE,null),g=m(d,l);else if(r.compressed){d=r.width,l=r.height,g=r.generateMipmap;for(var x=0;x<r.mipmaps.length;x++)o.compressedTexImage2D(o.TEXTURE_2D,x,r.internalFormat,r.mipmaps[x].width,r.mipmaps[x].height,0,r.mipmaps[x].data)}else r instanceof Uint8Array?(o.texImage2D(o.TEXTURE_2D,h,p,d,l,0,p,o.UNSIGNED_BYTE,r),g=m(d,l)):(this.forceSize||(d=r.width,l=r.height),o.texImage2D(o.TEXTURE_2D,h,p,p,o.UNSIGNED_BYTE,r),g=m(d,l));g&&o.generateMipmap(o.TEXTURE_2D),u?o.bindTexture(o.TEXTURE_2D,u):o.bindTexture(o.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(o){this.__SPECTOR_Metadata=o,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=o)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof c||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});s.exports=c}),57183:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r){this.webGLUniformLocation=null,this.gl=o,this.program=u,this.name=r,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var c=this.gl;c.isContextLost()||(this.webGLUniformLocation=c.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});s.exports=m}),9503:((s,T,e)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={WebGLAttribLocationWrapper:e(93567),WebGLBufferWrapper:e(26128),WebGLProgramWrapper:e(1482),WebGLTextureWrapper:e(82751),WebGLFramebufferWrapper:e(84387),WebGLUniformLocationWrapper:e(57183)};s.exports=a}),76531:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13560),m=e(83419),c=e(45319),o=e(50792),u=e(97480),r=e(8443),h=e(57811),d=e(74403),l=e(45818),p=e(29747),g=e(87841),x=e(86555),y=e(56583),E=e(26099),w=e(38058),C=new m({Extends:o,initialize:function(M){o.call(this),this.game=M,this.canvas,this.canvasBounds=new g,this.parent=null,this.parentIsWindow=!1,this.parentSize=new x,this.gameSize=new x,this.baseSize=new x,this.displaySize=new x,this.scaleMode=a.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new E(1,1),this.autoRound=!1,this.autoCenter=a.CENTER.NO_CENTER,this.orientation=a.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:p,windowResize:p,fullScreenChange:p,fullScreenError:p}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(r.BOOT,this.boot,this)},boot:function(){var A=this.game;this.canvas=A.canvas,this.fullscreen=A.device.fullscreen;var M=this.scaleMode;M!==a.SCALE_MODE.RESIZE&&M!==a.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(M),M===a.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),A.events.on(r.PRE_STEP,this.step,this),A.events.once(r.READY,this.refresh,this),A.events.once(r.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(A){this.getParent(A),this.getParentBounds();var M=A.width,R=A.height,P=A.scaleMode,b=A.zoom,F=A.autoRound;if(typeof M=="string")if(M.substr(-1)!=="%")M=parseInt(M,10);else{var I=this.parentSize.width;I===0&&(I=window.innerWidth);var L=parseInt(M,10)/100;M=Math.floor(I*L)}if(typeof R=="string")if(R.substr(-1)!=="%")R=parseInt(R,10);else{var D=this.parentSize.height;D===0&&(D=window.innerHeight);var O=parseInt(R,10)/100;R=Math.floor(D*O)}this.scaleMode=P,this.autoRound=F,this.autoCenter=A.autoCenter,this.resizeInterval=A.resizeInterval,F&&(M=Math.floor(M),R=Math.floor(R)),this.gameSize.setSize(M,R),b===a.ZOOM.MAX_ZOOM&&(b=this.getMaxZoom()),this.zoom=b,b!==1&&(this._resetZoom=!0),this.baseSize.setSize(M,R),F&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),A.minWidth>0&&this.displaySize.setMin(A.minWidth*b,A.minHeight*b),A.maxWidth>0&&this.displaySize.setMax(A.maxWidth*b,A.maxHeight*b),this.displaySize.setSize(M,R),(A.snapWidth>0||A.snapHeight>0)&&this.displaySize.setSnap(A.snapWidth,A.snapHeight),this.orientation=l(M,R)},getParent:function(A){var M=A.parent;if(M!==null){if(this.parent=d(M),this.parentIsWindow=this.parent===document.body,A.expandParent&&A.scaleMode!==a.SCALE_MODE.NONE){var R=this.parent.getBoundingClientRect();(this.parentIsWindow||R.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",R=this.parent.getBoundingClientRect(),!this.parentIsWindow&&R.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}A.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=d(A.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var A=this.parentSize,M=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(M.height=h(!0));var R=M.width,P=M.height;if(A.width!==R||A.height!==P)return A.setSize(R,P),!0;if(this.canvas){var b=this.canvasBounds,F=this.canvas.getBoundingClientRect();if(F.x!==b.x||F.y!==b.y)return!0}return!1},lockOrientation:function(A){var M=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return M?M.call(screen,A):!1},setParentSize:function(A,M){return this.parentSize.setSize(A,M),this.refresh()},setGameSize:function(A,M){var R=this.autoRound;R&&(A=Math.floor(A),M=Math.floor(M));var P=this.width,b=this.height;return this.gameSize.resize(A,M),this.baseSize.resize(A,M),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(A/M),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(P,b)},resize:function(A,M){var R=this.zoom,P=this.autoRound;P&&(A=Math.floor(A),M=Math.floor(M));var b=this.width,F=this.height;this.gameSize.resize(A,M),this.baseSize.resize(A,M),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(A*R,M*R),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var I=this.canvas.style,L=A*R,D=M*R;return P&&(L=Math.floor(L),D=Math.floor(D)),(L!==A||D!==M)&&(I.width=L+"px",I.height=D+"px"),this.refresh(b,F)},setZoom:function(A){return this.zoom=A,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(A,M){return A===void 0&&(A=0),M===void 0&&(M=A),this.displaySize.setSnap(A,M),this.refresh()},refresh:function(A,M){A===void 0&&(A=this.width),M===void 0&&(M=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var R=this.game.domContainer;if(R){this.baseSize.setCSS(R);var P=this.canvas.style,b=R.style;b.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",b.marginLeft=P.marginLeft,b.marginTop=P.marginTop}return this.emit(u.RESIZE,this.gameSize,this.baseSize,this.displaySize,A,M),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var A=l(this.width,this.height);A!==this.orientation&&(this.orientation=A,this.emit(u.ORIENTATION_CHANGE,A))}},updateScale:function(){var A=this.canvas.style,M=this.gameSize.width,R=this.gameSize.height,P,b,F=this.zoom,I=this.autoRound;if(this.scaleMode===a.SCALE_MODE.NONE)this.displaySize.setSize(M*F,R*F),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),this._resetZoom&&(A.width=P+"px",A.height=b+"px",this._resetZoom=!1);else if(this.scaleMode===a.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),this.canvas.width=P,this.canvas.height=b;else if(this.scaleMode===a.SCALE_MODE.EXPAND){var L=this.game.config.width,D=this.game.config.height,O=this.parentSize.width,z=this.parentSize.height,W=O/L,k=z/D,X,V;W<k?(X=L,V=W!==0?z/W:D):(X=k!==0?O/k:L,V=D);var G=c(X,this.displaySize.minWidth,this.displaySize.maxWidth),N=c(V,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(G,N),this.gameSize.setSize(G,N),I&&(G=Math.floor(G),N=Math.floor(N)),this.canvas.width=G,this.canvas.height=N;var H=O*(G/X),U=z*(N/V);this.displaySize.setSize(H,U),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),A.width=P+"px",A.height=b+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),P=this.displaySize.width,b=this.displaySize.height,I&&(P=Math.floor(P),b=Math.floor(b)),A.width=P+"px",A.height=b+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var A=y(this.parentSize.width,this.gameSize.width,0,!0),M=y(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(A,M),1)},updateCenter:function(){var A=this.autoCenter;if(A!==a.CENTER.NO_CENTER){var M=this.canvas,R=M.style,P=M.getBoundingClientRect(),b=P.width,F=P.height,I=Math.floor((this.parentSize.width-b)/2),L=Math.floor((this.parentSize.height-F)/2);A===a.CENTER.CENTER_HORIZONTALLY?L=0:A===a.CENTER.CENTER_VERTICALLY&&(I=0),R.marginLeft=I+"px",R.marginTop=L+"px"}},updateBounds:function(){var A=this.canvasBounds,M=this.canvas.getBoundingClientRect();A.x=M.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),A.y=M.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),A.width=M.width,A.height=M.height},transformX:function(A){return(A-this.canvasBounds.left)*this.displayScale.x},transformY:function(A){return(A-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(A){A===void 0&&(A={navigationUI:"hide"});var M=this.fullscreen;if(!M.available){this.emit(u.FULLSCREEN_UNSUPPORTED);return}if(!M.active){var R=this.getFullscreenTarget();M.keyboard?R[M.request](Element.ALLOW_KEYBOARD_INPUT):R[M.request](A)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(u.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(A){this.removeFullscreenTarget(),this.emit(u.FULLSCREEN_FAILED,A)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var A=document.createElement("div");A.style.margin="0",A.style.padding="0",A.style.width="100%",A.style.height="100%",this.fullscreenTarget=A,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var M=this.canvas.parentNode;M.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var A=this.fullscreenTarget;if(A&&A.parentNode){var M=A.parentNode;M.insertBefore(this.canvas,A),M.removeChild(A)}}},stopFullscreen:function(){var A=this.fullscreen;if(!A.available)return this.emit(u.FULLSCREEN_UNSUPPORTED),!1;A.active&&document[A.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(u.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(A){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(A)},startListeners:function(){var A=this,M=this.domlisteners;if(M.orientationChange=function(){A.updateBounds(),A._checkOrientation=!0,A.dirty=!0,A.refresh()},M.windowResize=function(){A.updateBounds(),A.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",M.orientationChange,!1):window.addEventListener("orientationchange",M.orientationChange,!1),window.addEventListener("resize",M.windowResize,!1),this.fullscreen.available){M.fullScreenChange=function(P){return A.onFullScreenChange(P)},M.fullScreenError=function(P){return A.onFullScreenError(P)};var R=["webkit","moz",""];R.forEach(function(P){document.addEventListener(P+"fullscreenchange",M.fullScreenChange,!1),document.addEventListener(P+"fullscreenerror",M.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",M.fullScreenChange,!1),document.addEventListener("MSFullscreenError",M.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(A,M){A instanceof w||(M=A,A=void 0),M===void 0&&(M=new g);var R=this.baseSize,P=this.parentSize,b=this.canvasBounds,F=this.displayScale,I=b.x>=0?0:-(b.x*F.x),L=b.y>=0?0:-(b.y*F.y),D;P.width>=b.width?D=R.width:D=R.width-(b.width-P.width)*F.x;var O;return P.height>=b.height?O=R.height:O=R.height-(b.height-P.height)*F.y,M.setTo(I,L,D,O),A&&(M.width/=A.zoomX,M.height/=A.zoomY,M.centerX=A.centerX+A.scrollX,M.centerY=A.centerY+A.scrollY),M},step:function(A,M){this.parent&&(this._lastCheck+=M,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var A=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",A.orientationChange,!1):window.removeEventListener("orientationchange",A.orientationChange,!1),window.removeEventListener("resize",A.windowResize,!1);var M=["webkit","moz",""];M.forEach(function(R){document.removeEventListener(R+"fullscreenchange",A.fullScreenChange,!1),document.removeEventListener(R+"fullscreenerror",A.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",A.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",A.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});s.exports=C}),64743:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}}),39218:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}}),81050:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}}),80805:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}}),13560:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={CENTER:e(64743),ORIENTATION:e(39218),SCALE_MODE:e(81050),ZOOM:e(80805)};s.exports=a}),56139:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="enterfullscreen"}),2336:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="fullscreenfailed"}),47412:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="fullscreenunsupported"}),51452:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="leavefullscreen"}),20666:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="orientationchange"}),47945:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resize"}),97480:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ENTER_FULLSCREEN:e(56139),FULLSCREEN_FAILED:e(2336),FULLSCREEN_UNSUPPORTED:e(47412),LEAVE_FULLSCREEN:e(51452),ORIENTATION_CHANGE:e(20666),RESIZE:e(47945)}}),93364:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),m=e(13560),c={Center:e(64743),Events:e(97480),Orientation:e(39218),ScaleManager:e(76531),ScaleModes:e(81050),Zoom:e(80805)};c=a(!1,c,m.CENTER),c=a(!1,c,m.ORIENTATION),c=a(!1,c,m.SCALE_MODE),c=a(!1,c,m.ZOOM),s.exports=c}),27397:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),m=e(35355),c=function(o){var u=o.game.config.defaultPhysicsSystem,r=a(o.settings,"physics",!1);if(!(!u&&!r)){var h=[];if(u&&h.push(m(u+"Physics")),r)for(var d in r)d=m(d.concat("Physics")),h.indexOf(d)===-1&&h.push(d);return h}};s.exports=c}),52106:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),m=function(c){var o=c.plugins.getDefaultScenePlugins(),u=a(c.settings,"plugins",!1);return Array.isArray(u)?u:o||[]};s.exports=m}),87033:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};s.exports=T}),97482:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(2368),c=new a({initialize:function(u){this.sys=new m(this,u),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});s.exports=c}),60903:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(89993),c=e(44594),o=e(8443),u=e(35154),r=e(54899),h=e(29747),d=e(97482),l=e(2368),p=new a({initialize:function(x,y){if(this.game=x,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,y){Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++)this._pending.push({key:"default",scene:y[E],autoStart:E===0,data:{}})}x.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new d),this.game.events.emit(o.SYSTEM_READY,this.systemScene,this);var g,x,y,E;for(g=0;g<this._pending.length;g++){x=this._pending[g],y=x.key,E=x.scene;var w;E instanceof d?w=this.createSceneFromInstance(y,E):typeof E=="object"?w=this.createSceneFromObject(y,E):typeof E=="function"&&(w=this.createSceneFromFunction(y,E)),y=w.sys.settings.key,this.keys[y]=w,this.scenes.push(w),this._data[y]&&(w.sys.settings.data=this._data[y].data,this._data[y].autoStart&&(x.autoStart=!0)),(x.autoStart||w.sys.settings.active)&&this._start.push(y)}for(this._pending.length=0,this._data={},this.isBooted=!0,g=0;g<this._start.length;g++)x=this._start[g],this.start(x);this._start.length=0}},processQueue:function(){var g=this._pending.length,x=this._queue.length;if(!(g===0&&x===0)){var y,E;if(g){for(y=0;y<g;y++)E=this._pending[y],this.add(E.key,E.scene,E.autoStart,E.data);for(y=0;y<this._start.length;y++)E=this._start[y],this.start(E);this._start.length=0,this._pending.length=0}for(y=0;y<this._queue.length;y++)E=this._queue[y],this[E.op](E.keyA,E.keyB,E.data);this._queue.length=0}},add:function(g,x,y,E){if(y===void 0&&(y=!1),E===void 0&&(E={}),this.isProcessing||!this.isBooted)return this._pending.push({key:g,scene:x,autoStart:y,data:E}),this.isBooted||(this._data[g]={data:E}),null;g=this.getKey(g,x);var w;return x instanceof d?w=this.createSceneFromInstance(g,x):typeof x=="object"?(x.key=g,w=this.createSceneFromObject(g,x)):typeof x=="function"&&(w=this.createSceneFromFunction(g,x)),w.sys.settings.data=E,g=w.sys.settings.key,this.keys[g]=w,this.scenes.push(w),(y||w.sys.settings.active)&&(this._pending.length?this._start.push(g):this.start(g)),w},remove:function(g){if(this.isProcessing)return this.queueOp("remove",g);var x=this.getScene(g);if(!x||x.sys.isTransitioning())return this;var y=this.scenes.indexOf(x),E=x.sys.settings.key;return y>-1&&(delete this.keys[E],this.scenes.splice(y,1),this._start.indexOf(E)>-1&&(y=this._start.indexOf(E),this._start.splice(y,1)),x.sys.destroy()),this},bootScene:function(g){var x=g.sys,y=x.settings;x.sceneUpdate=h,g.init&&(g.init.call(g,y.data),y.status=m.INIT,y.isTransition&&x.events.emit(c.TRANSITION_INIT,y.transitionFrom,y.transitionDuration));var E;x.load&&(E=x.load,E.reset()),E&&g.preload?(g.preload.call(g),y.status=m.LOADING,E.once(r.COMPLETE,this.loadComplete,this),E.start()):this.create(g)},loadComplete:function(g){this.create(g.scene)},payloadComplete:function(g){this.bootScene(g.scene)},update:function(g,x){this.processQueue(),this.isProcessing=!0;for(var y=this.scenes.length-1;y>=0;y--){var E=this.scenes[y].sys;E.settings.status>m.START&&E.settings.status<=m.RUNNING&&E.step(g,x),E.scenePlugin&&E.scenePlugin._target&&E.scenePlugin.step(g,x)}},render:function(g){for(var x=0;x<this.scenes.length;x++){var y=this.scenes[x].sys;y.settings.visible&&y.settings.status>=m.LOADING&&y.settings.status<m.SLEEPING&&y.render(g)}this.isProcessing=!1},create:function(g){var x=g.sys,y=x.settings;g.create&&(y.status=m.CREATING,g.create.call(g,y.data),y.status===m.DESTROYED)||(y.isTransition&&x.events.emit(c.TRANSITION_START,y.transitionFrom,y.transitionDuration),g.update&&(x.sceneUpdate=g.update),y.status=m.RUNNING,x.events.emit(c.CREATE,g))},createSceneFromFunction:function(g,x){var y=new x;if(y instanceof d){var E=y.sys.settings.key;if(E!==""&&(g=E),this.keys.hasOwnProperty(g))throw new Error("Cannot add Scene with duplicate key: "+g);return this.createSceneFromInstance(g,y)}else return y.sys=new l(y),y.sys.settings.key=g,y.sys.init(this.game),y},createSceneFromInstance:function(g,x){var y=x.sys.settings.key;return y===""&&(x.sys.settings.key=g),x.sys.init(this.game),x},createSceneFromObject:function(g,x){var y=new d(x),E=y.sys.settings.key;E!==""?g=E:y.sys.settings.key=g,y.sys.init(this.game);for(var w=["init","preload","create","update","render"],C=0;C<w.length;C++){var A=u(x,w[C],null);A&&(y[w[C]]=A)}if(x.hasOwnProperty("extend")){for(var M in x.extend)if(x.extend.hasOwnProperty(M)){var R=x.extend[M];M==="data"&&y.hasOwnProperty("data")&&typeof R=="object"?y.data.merge(R):M!=="sys"&&(y[M]=R)}}return y},getKey:function(g,x){if(g||(g="default"),typeof x=="function")return g;if(x instanceof d?g=x.sys.settings.key:typeof x=="object"&&x.hasOwnProperty("key")&&(g=x.key),this.keys.hasOwnProperty(g))throw new Error("Cannot add Scene with duplicate key: "+g);return g},getScenes:function(g,x){g===void 0&&(g=!0),x===void 0&&(x=!1);for(var y=[],E=this.scenes,w=0;w<E.length;w++){var C=E[w];C&&(!g||g&&C.sys.isActive())&&y.push(C)}return x?y.reverse():y},getScene:function(g){if(typeof g=="string"){if(this.keys[g])return this.keys[g]}else for(var x=0;x<this.scenes.length;x++)if(g===this.scenes[x])return g;return null},isActive:function(g){var x=this.getScene(g);return x?x.sys.isActive():null},isPaused:function(g){var x=this.getScene(g);return x?x.sys.isPaused():null},isVisible:function(g){var x=this.getScene(g);return x?x.sys.isVisible():null},isSleeping:function(g){var x=this.getScene(g);return x?x.sys.isSleeping():null},pause:function(g,x){var y=this.getScene(g);return y&&y.sys.pause(x),this},resume:function(g,x){var y=this.getScene(g);return y&&y.sys.resume(x),this},sleep:function(g,x){var y=this.getScene(g);return y&&!y.sys.isTransitioning()&&y.sys.sleep(x),this},wake:function(g,x){var y=this.getScene(g);return y&&y.sys.wake(x),this},run:function(g,x){var y=this.getScene(g);if(!y){for(var E=0;E<this._pending.length;E++)if(this._pending[E].key===g){this.queueOp("start",g,x);break}return this}y.sys.isSleeping()?y.sys.wake(x):y.sys.isPaused()?y.sys.resume(x):this.start(g,x)},start:function(g,x){if(!this.isBooted)return this._data[g]={autoStart:!0,data:x},this;var y=this.getScene(g);if(!y)return console.warn("Scene key not found: "+g),this;var E=y.sys,w=E.settings.status;if(w>=m.START&&w<=m.CREATING)return this;if(w>=m.RUNNING&&w<=m.SLEEPING)E.shutdown(),E.sceneUpdate=h,E.start(x);else{E.sceneUpdate=h,E.start(x);var C;if(E.load&&(C=E.load),C&&E.settings.hasOwnProperty("pack")&&(C.reset(),C.addPack({payload:E.settings.pack})))return E.settings.status=m.LOADING,C.once(r.COMPLETE,this.payloadComplete,this),C.start(),this}return this.bootScene(y),this},stop:function(g,x){var y=this.getScene(g);if(y&&!y.sys.isTransitioning()&&y.sys.settings.status!==m.SHUTDOWN){var E=y.sys.load;E&&(E.off(r.COMPLETE,this.loadComplete,this),E.off(r.COMPLETE,this.payloadComplete,this)),y.sys.shutdown(x)}return this},switch:function(g,x,y){var E=this.getScene(g),w=this.getScene(x);return E&&w&&E!==w&&(this.sleep(g),this.isSleeping(x)?this.wake(x,y):this.start(x,y)),this},getAt:function(g){return this.scenes[g]},getIndex:function(g){var x=this.getScene(g);return this.scenes.indexOf(x)},bringToTop:function(g){if(this.isProcessing)return this.queueOp("bringToTop",g);var x=this.getIndex(g),y=this.scenes;if(x!==-1&&x<y.length){var E=this.getScene(g);y.splice(x,1),y.push(E)}return this},sendToBack:function(g){if(this.isProcessing)return this.queueOp("sendToBack",g);var x=this.getIndex(g);if(x!==-1&&x>0){var y=this.getScene(g);this.scenes.splice(x,1),this.scenes.unshift(y)}return this},moveDown:function(g){if(this.isProcessing)return this.queueOp("moveDown",g);var x=this.getIndex(g);if(x>0){var y=x-1,E=this.getScene(g),w=this.getAt(y);this.scenes[x]=w,this.scenes[y]=E}return this},moveUp:function(g){if(this.isProcessing)return this.queueOp("moveUp",g);var x=this.getIndex(g);if(x<this.scenes.length-1){var y=x+1,E=this.getScene(g),w=this.getAt(y);this.scenes[x]=w,this.scenes[y]=E}return this},moveAbove:function(g,x){if(g===x)return this;if(this.isProcessing)return this.queueOp("moveAbove",g,x);var y=this.getIndex(g),E=this.getIndex(x);if(y!==-1&&E!==-1&&E<y){var w=this.getAt(E);this.scenes.splice(E,1),this.scenes.splice(y+(E>y),0,w)}return this},moveBelow:function(g,x){if(g===x)return this;if(this.isProcessing)return this.queueOp("moveBelow",g,x);var y=this.getIndex(g),E=this.getIndex(x);if(y!==-1&&E!==-1&&E>y){var w=this.getAt(E);this.scenes.splice(E,1),y===0?this.scenes.unshift(w):this.scenes.splice(y-(E<y),0,w)}return this},queueOp:function(g,x,y,E){return this._queue.push({op:g,keyA:x,keyB:y,data:E}),this},swapPosition:function(g,x){if(g===x)return this;if(this.isProcessing)return this.queueOp("swapPosition",g,x);var y=this.getIndex(g),E=this.getIndex(x);if(y!==E&&y!==-1&&E!==-1){var w=this.getAt(y);this.scenes[y]=this.scenes[E],this.scenes[E]=w}return this},dump:function(){for(var g=[],x=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],y=0;y<this.scenes.length;y++){var E=this.scenes[y].sys,w=E.settings.visible&&(E.settings.status===m.RUNNING||E.settings.status===m.PAUSED)?"[*] ":"[-] ";w+=E.settings.key+" ("+x[E.settings.status]+")",g.push(w)}console.log(g.join(`
`))},destroy:function(){for(var g=0;g<this.scenes.length;g++){var x=this.scenes[g].sys;x.destroy()}this.systemScene.sys.destroy(),this.update=h,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});s.exports=p}),52209:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(44594),o=e(95540),u=e(37277),r=new m({initialize:function(d){this.scene=d,this.systems=d.sys,this.settings=d.sys.settings,this.key=d.sys.settings.key,this.manager=d.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,d.sys.events.once(c.BOOT,this.boot,this),d.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},start:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",h,d),this},restart:function(h){var d=this.key;return this.manager.queueOp("stop",d),this.manager.queueOp("start",d,h),this},transition:function(h){h===void 0&&(h={});var d=o(h,"target",!1),l=this.manager.getScene(d);if(!d||!this.checkValidTransition(l))return!1;var p=o(h,"duration",1e3);this._elapsed=0,this._target=l,this._duration=p,this._willSleep=o(h,"sleep",!1),this._willRemove=o(h,"remove",!1);var g=o(h,"onUpdate",null);g&&(this._onUpdate=g,this._onUpdateScope=o(h,"onUpdateScope",this.scene));var x=o(h,"allowInput",!1);this.settings.transitionAllowInput=x;var y=l.sys.settings;y.isTransition=!0,y.transitionFrom=this.scene,y.transitionDuration=p,y.transitionAllowInput=x,o(h,"moveAbove",!1)?this.manager.moveAbove(this.key,d):o(h,"moveBelow",!1)&&this.manager.moveBelow(this.key,d),l.sys.isSleeping()?l.sys.wake(o(h,"data")):this.manager.start(d,o(h,"data"));var E=o(h,"onStart",null),w=o(h,"onStartScope",this.scene);return E&&E.call(w,this.scene,l,p),this.systems.events.emit(c.TRANSITION_OUT,l,p),!0},checkValidTransition:function(h){return!(!h||h.sys.isActive()||h.sys.isTransitioning()||h===this.scene||this.systems.isTransitioning())},step:function(h,d){this._elapsed+=d,this.transitionProgress=a(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var h=this._target.sys,d=this._target.sys.settings;h.events.emit(c.TRANSITION_COMPLETE,this.scene),d.isTransition=!1,d.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(h,d,l,p){return this.manager.add(h,d,l,p)},launch:function(h,d){return h&&h!==this.key&&this.manager.queueOp("start",h,d),this},run:function(h,d){return h&&h!==this.key&&this.manager.queueOp("run",h,d),this},pause:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("pause",h,d),this},resume:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("resume",h,d),this},sleep:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("sleep",h,d),this},wake:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("wake",h,d),this},switch:function(h,d){return h!==this.key&&this.manager.queueOp("switch",this.key,h,d),this},stop:function(h,d){return h===void 0&&(h=this.key),this.manager.queueOp("stop",h,d),this},setActive:function(h,d,l){d===void 0&&(d=this.key);var p=this.manager.getScene(d);return p&&p.sys.setActive(h,l),this},setVisible:function(h,d){d===void 0&&(d=this.key);var l=this.manager.getScene(d);return l&&l.sys.setVisible(h),this},isSleeping:function(h){return h===void 0&&(h=this.key),this.manager.isSleeping(h)},isActive:function(h){return h===void 0&&(h=this.key),this.manager.isActive(h)},isPaused:function(h){return h===void 0&&(h=this.key),this.manager.isPaused(h)},isVisible:function(h){return h===void 0&&(h=this.key),this.manager.isVisible(h)},swapPosition:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.swapPosition(h,d),this},moveAbove:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.moveAbove(h,d),this},moveBelow:function(h,d){return d===void 0&&(d=this.key),h!==d&&this.manager.moveBelow(h,d),this},remove:function(h){return h===void 0&&(h=this.key),this.manager.remove(h),this},moveUp:function(h){return h===void 0&&(h=this.key),this.manager.moveUp(h),this},moveDown:function(h){return h===void 0&&(h=this.key),this.manager.moveDown(h),this},bringToTop:function(h){return h===void 0&&(h=this.key),this.manager.bringToTop(h),this},sendToBack:function(h){return h===void 0&&(h=this.key),this.manager.sendToBack(h),this},get:function(h){return this.manager.getScene(h)},getStatus:function(h){var d=this.manager.getScene(h);if(d)return d.sys.getStatus()},getIndex:function(h){return h===void 0&&(h=this.key),this.manager.getIndex(h)},shutdown:function(){var h=this.systems.events;h.off(c.SHUTDOWN,this.shutdown,this),h.off(c.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});u.register("ScenePlugin",r,"scenePlugin"),s.exports=r}),55681:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89993),m=e(35154),c=e(46975),o=e(87033),u={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:a.PENDING,key:m(r,"key",""),active:m(r,"active",!1),visible:m(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:m(r,"pack",!1),cameras:m(r,"cameras",null),map:m(r,"map",c(o,m(r,"mapAdd",{}))),physics:m(r,"physics",{}),loader:m(r,"loader",{}),plugins:m(r,"plugins",!1),input:m(r,"input",{})}}};s.exports=u}),2368:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(89993),c=e(42363),o=e(44594),u=e(27397),r=e(52106),h=e(29747),d=e(55681),l=new a({initialize:function(g,x){this.scene=g,this.game,this.renderer,this.config=x,this.settings=d.create(x),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=h},init:function(p){this.settings.status=m.INIT,this.sceneUpdate=h,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,c.Global,[c.CoreScene,r(this),u(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var x=this.events;x.emit(o.PRE_UPDATE,p,g),x.emit(o.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),x.emit(o.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(o.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(o.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.settings,x=this.getStatus();return x!==m.CREATING&&x!==m.RUNNING?console.warn("Cannot pause non-running Scene",g.key):this.settings.active&&(g.status=m.PAUSED,g.active=!1,this.events.emit(o.PAUSE,this,p)),this},resume:function(p){var g=this.events,x=this.settings;return this.settings.active||(x.status=m.RUNNING,x.active=!0,g.emit(o.RESUME,this,p)),this},sleep:function(p){var g=this.settings,x=this.getStatus();return x!==m.CREATING&&x!==m.RUNNING?console.warn("Cannot sleep non-running Scene",g.key):(g.status=m.SLEEPING,g.active=!1,g.visible=!1,this.events.emit(o.SLEEP,this,p)),this},wake:function(p){var g=this.events,x=this.settings;return x.status=m.RUNNING,x.active=!0,x.visible=!0,g.emit(o.WAKE,this,p),x.isTransition&&g.emit(o.TRANSITION_WAKE,x.transitionFrom,x.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var p=this.settings.status;return p>m.PENDING&&p<=m.RUNNING},isSleeping:function(){return this.settings.status===m.SLEEPING},isActive:function(){return this.settings.status===m.RUNNING},isPaused:function(){return this.settings.status===m.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,x=this.settings;p&&(x.data=p),x.status=m.START,x.active=!0,x.visible=!0,g.emit(o.START,this),g.emit(o.READY,this,p)},shutdown:function(p){var g=this.events,x=this.settings;g.off(o.TRANSITION_INIT),g.off(o.TRANSITION_START),g.off(o.TRANSITION_COMPLETE),g.off(o.TRANSITION_OUT),x.status=m.SHUTDOWN,x.active=!1,x.visible=!1,g.emit(o.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=m.DESTROYED,g.active=!1,g.visible=!1,p.emit(o.DESTROY,this),p.removeAllListeners();for(var x=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],y=0;y<x.length;y++)this[x[y]]=null}});s.exports=l}),89993:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};s.exports=T}),69830:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addedtoscene"}),7919:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="boot"}),46763:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="create"}),11763:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),71555:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),36735:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="postupdate"}),3809:(s=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="prerender"}),90716:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="preupdate"}),58262:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="ready"}),91633:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removedfromscene"}),10319:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="render"}),87132:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),81961:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="shutdown"}),90194:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="sleep"}),6265:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),33178:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitioncomplete"}),43063:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitioninit"}),11259:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitionout"}),61611:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitionstart"}),45209:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="transitionwake"}),22966:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="update"}),21747:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="wake"}),44594:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADDED_TO_SCENE:e(69830),BOOT:e(7919),CREATE:e(46763),DESTROY:e(11763),PAUSE:e(71555),POST_UPDATE:e(36735),PRE_RENDER:e(3809),PRE_UPDATE:e(90716),READY:e(58262),REMOVED_FROM_SCENE:e(91633),RENDER:e(10319),RESUME:e(87132),SHUTDOWN:e(81961),SLEEP:e(90194),START:e(6265),TRANSITION_COMPLETE:e(33178),TRANSITION_INIT:e(43063),TRANSITION_OUT:e(11259),TRANSITION_START:e(61611),TRANSITION_WAKE:e(45209),UPDATE:e(22966),WAKE:e(21747)}}),62194:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89993),m=e(79291),c={Events:e(44594),GetPhysicsPlugins:e(27397),GetScenePlugins:e(52106),SceneManager:e(60903),ScenePlugin:e(52209),Settings:e(55681),Systems:e(2368)};c=m(!1,c,a),s.exports=c}),30341:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50792),c=e(14463),o=e(79291),u=e(29747),r=new a({Extends:m,initialize:function(d,l,p){m.call(this),this.manager=d,this.key=l,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,p),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(console.error("addMarker "+h.name+" already exists in Sound"),!1):(h=o(!0,{name:"",start:0,duration:this.totalDuration-(h.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},h),this.markers[h.name]=h,!0)},updateMarker:function(h){return!h||!h.name||typeof h.name!="string"?!1:this.markers[h.name]?(this.markers[h.name]=o(!0,this.markers[h.name],h),!0):(console.warn("Audio Marker: "+h.name+" missing in Sound: "+this.key),!1)},removeMarker:function(h){var d=this.markers[h];return d?(this.markers[h]=null,d):null},play:function(h,d){if(h===void 0&&(h=""),typeof h=="object"&&(d=h,h=""),typeof h!="string")return!1;if(!h)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[h])return console.warn("Marker: "+h+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[h],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,d),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:u,calculateRate:function(){var h=1.0005777895065548,d=this.currentConfig.detune+this.manager.detune,l=Math.pow(h,d);this.totalRate=this.currentConfig.rate*this.manager.rate*l},destroy:function(){this.pendingRemove||(this.stop(),this.emit(c.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});s.exports=r}),85034:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(41786),c=e(50792),o=e(14463),u=e(8443),r=e(46710),h=e(58731),d=e(29747),l=e(26099),p=new a({Extends:c,initialize:function(x){c.call(this),this.game=x,this.jsonCache=x.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new l;var y=x.events;y.on(u.BLUR,this.onGameBlur,this),y.on(u.FOCUS,this.onGameFocus,this),y.on(u.PRE_STEP,this.update,this),y.once(u.DESTROY,this.destroy,this)},add:d,addAudioSprite:function(g,x){x===void 0&&(x={});var y=this.add(g,x);y.spritemap=this.jsonCache.get(g).spritemap;for(var E in y.spritemap)if(y.spritemap.hasOwnProperty(E)){var w=m(x),C=y.spritemap[E];w.loop=C.hasOwnProperty("loop")?C.loop:!1,y.addMarker({name:E,start:C.start,duration:C.end-C.start,config:w})}return y},get:function(g){return h(this.sounds,"key",g)},getAll:function(g){return g?r(this.sounds,"key",g):r(this.sounds)},getAllPlaying:function(){return r(this.sounds,"isPlaying",!0)},play:function(g,x){var y=this.add(g);return y.once(o.COMPLETE,y.destroy,y),x?x.name?(y.addMarker(x),y.play(x.name)):y.play(x):y.play()},playAudioSprite:function(g,x,y){var E=this.addAudioSprite(g);return E.once(o.COMPLETE,E.destroy,E),E.play(x,y)},remove:function(g){var x=this.sounds.indexOf(g);return x!==-1?(g.destroy(),this.sounds.splice(x,1),!0):!1},removeAll:function(){this.sounds.forEach(function(g){g.destroy()}),this.sounds.length=0},removeByKey:function(g){for(var x=0,y=this.sounds.length-1;y>=0;y--){var E=this.sounds[y];E.key===g&&(E.destroy(),this.sounds.splice(y,1),x++)}return x},pauseAll:function(){this.forEachActiveSound(function(g){g.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(g){g.resume()}),this.emit(o.RESUME_ALL,this)},setListenerPosition:d,stopAll:function(){this.forEachActiveSound(function(g){g.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(g){var x=0;return this.getAll(g).forEach(function(y){y.stop()&&x++}),x},isPlaying:function(g){var x=this.sounds,y=x.length-1,E;if(g===void 0){for(;y>=0;y--)if(E=this.sounds[y],E.isPlaying)return!0}else for(;y>=0;y--)if(E=this.sounds[y],E.key===g&&E.isPlaying)return!0;return!1},unlock:d,onBlur:d,onFocus:d,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(g,x){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var y=this.sounds.length-1;y>=0;y--)this.sounds[y].pendingRemove&&this.sounds.splice(y,1);this.sounds.forEach(function(E){E.update(g,x)})},destroy:function(){this.game.events.off(u.BLUR,this.onGameBlur,this),this.game.events.off(u.FOCUS,this.onGameFocus,this),this.game.events.off(u.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(g,x){var y=this;this.sounds.forEach(function(E,w){E&&!E.pendingRemove&&g.call(x||y,E,w,y.sounds)})},setRate:function(g){return this.rate=g,this},rate:{get:function(){return this._rate},set:function(g){this._rate=g,this.forEachActiveSound(function(x){x.calculateRate()}),this.emit(o.GLOBAL_RATE,this,g)}},setDetune:function(g){return this.detune=g,this},detune:{get:function(){return this._detune},set:function(g){this._detune=g,this.forEachActiveSound(function(x){x.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,g)}}});s.exports=p}),14747:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33684),m=e(25960),c=e(57490),o={create:function(u){var r=u.config.audio,h=u.device.audio;return r.noAudio||!h.webAudio&&!h.audioData?new m(u):h.webAudio&&!r.disableWebAudio?new c(u):new a(u)}};s.exports=o}),19723:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),98882:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="decodedall"}),57506:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="decoded"}),73146:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="destroy"}),11305:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="detune"}),40577:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="detune"}),30333:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="mute"}),20394:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="rate"}),21802:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="volume"}),1299:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="looped"}),99190:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="loop"}),97125:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="mute"}),89259:(s=>{/**
 * @author       pi-kei
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pan"}),79986:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pauseall"}),17586:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),19618:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="play"}),42306:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="rate"}),10387:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resumeall"}),48959:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),9960:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="seek"}),19180:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stopall"}),98328:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stop"}),50401:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="unlocked"}),52498:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="volume"}),14463:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={COMPLETE:e(19723),DECODED:e(57506),DECODED_ALL:e(98882),DESTROY:e(73146),DETUNE:e(11305),GLOBAL_DETUNE:e(40577),GLOBAL_MUTE:e(30333),GLOBAL_RATE:e(20394),GLOBAL_VOLUME:e(21802),LOOP:e(99190),LOOPED:e(1299),MUTE:e(97125),PAN:e(89259),PAUSE_ALL:e(79986),PAUSE:e(17586),PLAY:e(19618),RATE:e(42306),RESUME_ALL:e(10387),RESUME:e(48959),SEEK:e(9960),STOP_ALL:e(19180),STOP:e(98328),UNLOCKED:e(50401),VOLUME:e(52498)}}),64895:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),m=e(83419),c=e(14463),o=e(45319),u=new m({Extends:a,initialize:function(h,d,l){if(l===void 0&&(l={}),this.tags=h.game.cache.audio.get(d),!this.tags)throw new Error('No cached audio asset with key "'+d);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,a.call(this,h,d,l)},play:function(r,h){return this.manager.isLocked(this,"play",[r,h])||!a.prototype.play.call(this,r,h)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!a.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!a.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(c.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,h=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=d,this.audio.currentTime=d,this.applyConfig(),h===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+h*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var h=this.tags[r];if(h.dataset.used==="false")return h.dataset.used="true",this.audio=h,!0}if(!this.manager.override)return!1;var d=[];this.manager.forEachActiveSound(function(p){p.key===this.key&&p.audio&&d.push(p)},this),d.sort(function(p,g){return p.loop===g.loop?g.seek/g.duration-p.seek/p.duration:p.loop?1:-1});var l=d[0];return this.audio=l.audio,l.reset(),l.audio=null,l.startTime=0,l.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(h){console.warn(h)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){a.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var h=this.currentMarker?this.currentMarker.start:0,d=h+this.duration,l=this.audio.currentTime;if(this.currentConfig.loop)l>=d-this.manager.loopEndOffset?(this.audio.currentTime=h+Math.max(0,l-d),l=this.audio.currentTime):l<h&&(this.audio.currentTime+=h,l=this.audio.currentTime),l<this.previousTime&&this.emit(c.LOOPED,this);else if(l>=d){this.reset(),this.stopAndReleaseAudioTag(),this.emit(c.COMPLETE,this);return}this.previousTime=l}},destroy:function(){a.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){a.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(c.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(c.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,c.RATE,r)&&(this.calculateRate(),this.emit(c.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,c.DETUNE,r)&&(this.calculateRate(),this.emit(c.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(c.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(c.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(c.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});s.exports=u}),33684:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85034),m=e(83419),c=e(14463),o=e(64895),u=new m({Extends:a,initialize:function(h){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,a.call(this,h)},add:function(r,h){var d=new o(this,r,h);return this.sounds.push(d),d},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(p,g){for(var x=0;x<g.length;x++)if(g[x].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var h=!1,d=function(){h=!0},l=function(){if(h){h=!1;return}document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",l);var p=[];if(r.game.cache.audio.entries.each(function(x,y){for(var E=0;E<y.length;E++){var w=y[E];w.dataset.locked==="true"&&p.push(w)}return!0}),p.length!==0){var g=p[p.length-1];g.oncanplaythrough=function(){g.oncanplaythrough=null,p.forEach(function(x){x.dataset.locked="false"}),r.unlocked=!0},p.forEach(function(x){x.load()})}};this.once(c.UNLOCKED,function(){for(this.forEachActiveSound(function(g){g.currentMarker===null&&g.duration===0&&(g.duration=g.tags[0].duration),g.totalDuration=g.tags[0].duration});this.lockedActionsQueue.length;){var p=this.lockedActionsQueue.shift();p.sound[p.prop].apply?p.sound[p.prop].apply(p.sound,p.value||[]):p.sound[p.prop]=p.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",l,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){a.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,h,d){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:h,value:d}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(h){h.updateMute()}),this.emit(c.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(h){h.updateVolume()}),this.emit(c.GLOBAL_VOLUME,this,r)}}});s.exports=u}),23717:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={SoundManagerCreator:e(14747),Events:e(14463),BaseSound:e(30341),BaseSoundManager:e(85034),WebAudioSound:e(71741),WebAudioSoundManager:e(57490),HTML5AudioSound:e(64895),HTML5AudioSoundManager:e(33684),NoAudioSound:e(4603),NoAudioSoundManager:e(25960)}}),4603:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),m=e(83419),c=e(50792),o=e(79291),u=e(29747),r=function(){return!1},h=function(){return null},d=function(){return this},l=new m({Extends:c,initialize:function(g,x,y){y===void 0&&(y={}),c.call(this),this.manager=g,this.key=x,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},y),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:r,updateMarker:r,removeMarker:h,play:r,pause:r,resume:r,stop:r,setMute:d,setVolume:d,setRate:d,setDetune:d,setSeek:d,setLoop:d,setPan:d,applyConfig:h,resetConfig:h,update:u,calculateRate:h,destroy:function(){a.prototype.destroy.call(this)}});s.exports=l}),25960:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85034),m=e(83419),c=e(50792),o=e(4603),u=e(29747),r=new m({Extends:c,initialize:function(d){c.call(this),this.game=d,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(h,d){var l=new o(this,h,d);return this.sounds.push(l),l},addAudioSprite:function(h,d){var l=this.add(h,d);return l.spritemap={},l},get:function(h){return a.prototype.get.call(this,h)},getAll:function(h){return a.prototype.getAll.call(this,h)},play:function(h,d){return!1},playAudioSprite:function(h,d,l){return!1},remove:function(h){return a.prototype.remove.call(this,h)},removeAll:function(){return a.prototype.removeAll.call(this)},removeByKey:function(h){return a.prototype.removeByKey.call(this,h)},stopByKey:function(h){return a.prototype.stopByKey.call(this,h)},onBlur:u,onFocus:u,onGameBlur:u,onGameFocus:u,pauseAll:u,resumeAll:u,stopAll:u,update:u,setRate:u,setDetune:u,setMute:u,setVolume:u,unlock:u,forEachActiveSound:function(h,d){a.prototype.forEachActiveSound.call(this,h,d)},destroy:function(){a.prototype.destroy.call(this)}});s.exports=r}),71741:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30341),m=e(83419),c=e(14463),o=e(95540),u=new m({Extends:a,initialize:function(h,d,l){if(l===void 0&&(l={}),this.audioBuffer=h.game.cache.audio.get(d),!this.audioBuffer)throw new Error('Audio key "'+d+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=h.context.createGain(),this.volumeNode=h.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),h.context.createPanner&&(this.spatialNode=h.context.createPanner(),this.volumeNode.connect(this.spatialNode)),h.context.createStereoPanner?(this.pannerNode=h.context.createStereoPanner(),h.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(h.destination)):h.context.createPanner?this.spatialNode.connect(h.destination):this.volumeNode.connect(h.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,a.call(this,h,d,l)},play:function(r,h){return a.prototype.play.call(this,r,h)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(c.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(c.RESUME,this),!0)},stop:function(){return a.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(c.STOP,this),!0):!1},createAndStartBufferSource:function(){var r=this.currentConfig.seek,h=this.currentConfig.delay,d=this.manager.context.currentTime+h,l=(this.currentMarker?this.currentMarker.start:0)+r,p=this.duration-r;this.playTime=d-r,this.startTime=d,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,d),Math.max(0,l),Math.max(0,p)),this.resetConfig()},createAndStartLoopBufferSource:function(){var r=this.getLoopTime(),h=this.currentMarker?this.currentMarker.start:0,d=this.duration;this.loopTime=r,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,r),Math.max(0,h),Math.max(0,d))},createBufferSource:function(){var r=this,h=this.manager.context.createBufferSource();return h.buffer=this.audioBuffer,h.connect(this.muteNode),h.onended=function(d){var l=d.target;(l===r.source||l===r.loopSource)&&(r.currentConfig.loop?r.hasLooped=!0:r.hasEnded=!0)},h},stopAndRemoveBufferSource:function(){if(this.source){var r=this.source;this.source=null,r.stop(),r.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var r=this.currentConfig.source;if(r&&this.manager.context.createPanner){var h=this.spatialNode;h.panningModel=o(r,"panningModel","equalpower"),h.distanceModel=o(r,"distanceModel","inverse"),h.orientationX.value=o(r,"orientationX",0),h.orientationY.value=o(r,"orientationY",0),h.orientationZ.value=o(r,"orientationZ",-1),h.refDistance=o(r,"refDistance",1),h.maxDistance=o(r,"maxDistance",1e4),h.rolloffFactor=o(r,"rolloffFactor",1),h.coneInnerAngle=o(r,"coneInnerAngle",360),h.coneOuterAngle=o(r,"coneOuterAngle",0),h.coneOuterGain=o(r,"coneOuterGain",0),this.spatialSource=o(r,"follow",null),this.spatialSource||(h.positionX.value=o(r,"x",0),h.positionY.value=o(r,"y",0),h.positionZ.value=o(r,"z",0))}a.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(r){this.spatialNode&&(this.spatialNode.positionX.value=r)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(r){this.spatialNode&&(this.spatialNode.positionY.value=r)}},update:function(){if(this.isPlaying&&this.spatialSource){var r=o(this.spatialSource,"x",null),h=o(this.spatialSource,"y",null);r&&r!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=r),h&&h!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=h)}this.hasEnded?(a.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(c.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(c.LOOPED,this))},destroy:function(){this.pendingRemove||(a.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){a.prototype.calculateRate.call(this);var r=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,r),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,r)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var r=0,h=0;h<this.rateUpdates.length;h++){var d=0;h<this.rateUpdates.length-1?d=this.rateUpdates[h+1].time:d=this.manager.context.currentTime-this.playTime,r+=(d-this.rateUpdates[h].time)*this.rateUpdates[h].rate}return r},getLoopTime:function(){for(var r=0,h=0;h<this.rateUpdates.length-1;h++)r+=(this.rateUpdates[h+1].time-this.rateUpdates[h].time)*this.rateUpdates[h].rate;var d=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+d.time+(this.duration-r)/d.rate},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,this.calculateRate(),this.emit(c.RATE,this,r)}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,this.calculateRate(),this.emit(c.DETUNE,this,r)}},setDetune:function(r){return this.detune=r,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(r){this.currentConfig.mute=r,this.muteNode.gain.setValueAtTime(r?0:1,0),this.emit(c.MUTE,this,r)}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(r){this.currentConfig.volume=r,this.volumeNode.gain.setValueAtTime(r,0),this.emit(c.VOLUME,this,r)}},setVolume:function(r){return this.volume=r,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.currentConfig.seek=r,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(c.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),r&&this.createAndStartLoopBufferSource()),this.emit(c.LOOP,this,r)}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(r){this.currentConfig.pan=r,this.pannerNode&&this.pannerNode.pan.setValueAtTime(r,this.manager.context.currentTime),this.emit(c.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});s.exports=u}),57490:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(53134),m=e(85034),c=e(83419),o=e(14463),u=e(8443),r=e(71741),h=e(95540),d=new c({Extends:m,initialize:function(p){this.context=this.createAudioContext(p),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",m.call(this,p),this.locked&&(p.isBooted?this.unlock():p.events.once(u.BOOT,this.unlock,this)),p.events.on(u.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var l=this.context;window.setTimeout(function(){l&&(l.suspend(),l.resume())},100)},createAudioContext:function(l){var p=l.config.audio;if(p.context)return p.context.resume(),p.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(l){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=l,this.masterMuteNode=l.createGain(),this.masterVolumeNode=l.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(l.destination),this.destination=this.masterMuteNode,this},add:function(l,p){var g=new r(this,l,p);return this.sounds.push(g),g},decodeAudio:function(l,p){var g;Array.isArray(l)?g=l:g=[{key:l,data:p}];for(var x=this.game.cache.audio,y=g.length,E=0;E<g.length;E++){var w=g[E],C=w.key,A=w.data;typeof A=="string"&&(A=a(A));var M=(function(P,b){x.add(P,b),this.emit(o.DECODED,P),y--,y===0&&this.emit(o.DECODED_ALL)}).bind(this,C),R=(function(P,b){console.error("Error decoding audio: "+P+" - ",b?b.message:""),y--,y===0&&this.emit(o.DECODED_ALL)}).bind(this,C);this.context.decodeAudioData(A,M,R)}},setListenerPosition:function(l,p){return l===void 0&&(l=this.game.scale.width/2),p===void 0&&(p=this.game.scale.height/2),this.listenerPosition.set(l,p),this},unlock:function(){var l=this,p=document.body,g=function x(){if(l.context&&p){var y=p.removeEventListener.bind(p);l.context.resume().then(function(){y("touchstart",x),y("touchend",x),y("mousedown",x),y("mouseup",x),y("keydown",x),l.unlocked=!0},function(){y("touchstart",x),y("touchend",x),y("mousedown",x),y("mouseup",x),y("keydown",x)})}};p&&(p.addEventListener("touchstart",g,!1),p.addEventListener("touchend",g,!1),p.addEventListener("mousedown",g,!1),p.addEventListener("mouseup",g,!1),p.addEventListener("keydown",g,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var l=this.context;l&&!this.locked&&(l.state==="suspended"||l.state==="interrupted")&&l.resume()},update:function(l,p){var g=this.context.listener,x=h(this.listenerPosition,"x",null),y=h(this.listenerPosition,"y",null);if(g&&g.positionX!==void 0)x&&x!==this._spatialx&&(this._spatialx=g.positionX.value=x),y&&y!==this._spatialy&&(this._spatialy=g.positionY.value=y);else if(g){x&&x!==this._spatialx&&(this._spatialx=x),y&&y!==this._spatialy&&(this._spatialy=y);var E=h(g,"z",0);g.setPosition(this._spatialx||0,this._spatialy||0,E)}m.prototype.update.call(this,l,p),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var l=this;this.context.close().then(function(){l.context=null})}this.game.events.off(u.VISIBLE,this.onGameVisible,this),m.prototype.destroy.call(this)},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(l){this.masterMuteNode.gain.setValueAtTime(l?0:1,0),this.emit(o.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(l){this.masterVolumeNode.gain.setValueAtTime(l,0),this.emit(o.GLOBAL_VOLUME,this,l)}}});s.exports=d}),73162:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37105),m=e(83419),c=e(29747),o=e(19186),u=new m({initialize:function(h){this.parent=h,this.list=[],this.position=0,this.addCallback=c,this.removeCallback=c,this._sortKey=""},add:function(r,h){return h?a.Add(this.list,r):a.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,h,d){return d?a.AddAt(this.list,r,h):a.AddAt(this.list,r,h,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,h){return r?(h===void 0&&(h=function(d,l){return d[r]-l[r]}),o(this.list,h),this):this},getByName:function(r){return a.GetFirst(this.list,"name",r)},getRandom:function(r,h){return a.GetRandom(this.list,r,h)},getFirst:function(r,h,d,l){return a.GetFirst(this.list,r,h,d,l)},getAll:function(r,h,d,l){return a.GetAll(this.list,r,h,d,l)},count:function(r,h){return a.CountAllMatching(this.list,r,h)},swap:function(r,h){a.Swap(this.list,r,h)},moveTo:function(r,h){return a.MoveTo(this.list,r,h)},moveAbove:function(r,h){return a.MoveAbove(this.list,r,h)},moveBelow:function(r,h){return a.MoveBelow(this.list,r,h)},remove:function(r,h){return h?a.Remove(this.list,r):a.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,h){return h?a.RemoveAt(this.list,r):a.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,h,d){return d?a.RemoveBetween(this.list,r,h):a.RemoveBetween(this.list,r,h,this.removeCallback,this)},removeAll:function(r){for(var h=this.list.length;h--;)this.remove(this.list[h],r);return this},bringToTop:function(r){return a.BringToTop(this.list,r)},sendToBack:function(r){return a.SendToBack(this.list,r)},moveUp:function(r){return a.MoveUp(this.list,r),r},moveDown:function(r){return a.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(r,h){return a.Replace(this.list,r,h)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,h,d,l){return a.SetAll(this.list,r,h,d,l),this},each:function(r,h){for(var d=[null],l=2;l<arguments.length;l++)d.push(arguments[l]);for(l=0;l<this.list.length;l++)d[0]=this.list[l],r.apply(h,d)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});s.exports=u}),90330:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o){this.entries={},this.size=0,this.setAll(o)},setAll:function(c){if(Array.isArray(c))for(var o=0;o<c.length;o++)this.set(c[o][0],c[o][1]);return this},set:function(c,o){return this.has(c)||this.size++,this.entries[c]=o,this},get:function(c){if(this.has(c))return this.entries[c]},getArray:function(){var c=[],o=this.entries;for(var u in o)c.push(o[u]);return c},has:function(c){return this.entries.hasOwnProperty(c)},delete:function(c){return this.has(c)&&(delete this.entries[c],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(c){delete this.entries[c]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var c=[],o=this.entries;for(var u in o)c.push(o[u]);return c},dump:function(){var c=this.entries;console.group("Map");for(var o in c)console.log(o,c[o]);console.groupEnd()},each:function(c){var o=this.entries;for(var u in o)if(c(u,o[u])===!1)break;return this},contains:function(c){var o=this.entries;for(var u in o)if(o[u]===c)return!0;return!1},merge:function(c,o){o===void 0&&(o=!1);var u=this.entries,r=c.entries;for(var h in r)u.hasOwnProperty(h)&&o?u[h]=r[h]:this.set(h,r[h]);return this}});s.exports=m}),25774:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50792),c=e(82348),o=new a({Extends:m,initialize:function(){m.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(u){return this._active.indexOf(u)>-1},isPending:function(u){return this._toProcess>0&&this._pending.indexOf(u)>-1},isDestroying:function(u){return this._destroy.indexOf(u)>-1},add:function(u){return this.checkQueue&&this.isActive(u)&&!this.isDestroying(u)||this.isPending(u)||(this._pending.push(u),this._toProcess++),u},remove:function(u){if(this.isPending(u)){var r=this._pending,h=r.indexOf(u);h!==-1&&r.splice(h,1)}else this.isActive(u)&&(this._destroy.push(u),this._toProcess++);return u},removeAll:function(){for(var u=this._active,r=this._destroy,h=u.length;h--;)r.push(u[h]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var u=this._destroy,r=this._active,h,d;for(h=0;h<u.length;h++){d=u[h];var l=r.indexOf(d);l!==-1&&(r.splice(l,1),this.emit(c.PROCESS_QUEUE_REMOVE,d))}for(u.length=0,u=this._pending,h=0;h<u.length;h++)d=u[h],(!this.checkQueue||this.checkQueue&&r.indexOf(d)===-1)&&(r.push(d),this.emit(c.PROCESS_QUEUE_ADD,d));return u.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});s.exports=o}),59542:((s,T,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43886);function m(A){if(!(this instanceof m))return new m(A);this._maxEntries=Math.max(4,A||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}m.prototype={all:function(){return this._all(this.data,[])},search:function(A){var M=this.data,R=[],P=this.toBBox;if(!E(A,M))return R;for(var b=[],F,I,L,D;M;){for(F=0,I=M.children.length;F<I;F++)L=M.children[F],D=M.leaf?P(L):L,E(A,D)&&(M.leaf?R.push(L):y(A,D)?this._all(L,R):b.push(L));M=b.pop()}return R},collides:function(A){var M=this.data,R=this.toBBox;if(!E(A,M))return!1;for(var P=[],b,F,I,L;M;){for(b=0,F=M.children.length;b<F;b++)if(I=M.children[b],L=M.leaf?R(I):I,E(A,L)){if(M.leaf||y(A,L))return!0;P.push(I)}M=P.pop()}return!1},load:function(A){if(!(A&&A.length))return this;if(A.length<this._minEntries){for(var M=0,R=A.length;M<R;M++)this.insert(A[M]);return this}var P=this._build(A.slice(),0,A.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var b=this.data;this.data=P,P=b}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(A){return A&&this._insert(A,this.data.height-1),this},clear:function(){return this.data=w([]),this},remove:function(A,M){if(!A)return this;for(var R=this.data,P=this.toBBox(A),b=[],F=[],I,L,D,O;R||b.length;){if(R||(R=b.pop(),L=b[b.length-1],I=F.pop(),O=!0),R.leaf&&(D=c(A,R.children,M),D!==-1))return R.children.splice(D,1),b.push(R),this._condense(b),this;!O&&!R.leaf&&y(R,P)?(b.push(R),F.push(I),I=0,L=R,R=R.children[0]):L?(I++,R=L.children[I],O=!1):R=null}return this},toBBox:function(A){return A},compareMinX:h,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(A){return this.data=A,this},_all:function(A,M){for(var R=[];A;)A.leaf?M.push.apply(M,A.children):R.push.apply(R,A.children),A=R.pop();return M},_build:function(A,M,R,P){var b=R-M+1,F=this._maxEntries,I;if(b<=F)return I=w(A.slice(M,R+1)),o(I,this.toBBox),I;P||(P=Math.ceil(Math.log(b)/Math.log(F)),F=Math.ceil(b/Math.pow(F,P-1))),I=w([]),I.leaf=!1,I.height=P;var L=Math.ceil(b/F),D=L*Math.ceil(Math.sqrt(F)),O,z,W,k;for(C(A,M,R,D,this.compareMinX),O=M;O<=R;O+=D)for(W=Math.min(O+D-1,R),C(A,O,W,L,this.compareMinY),z=O;z<=W;z+=L)k=Math.min(z+L-1,W),I.children.push(this._build(A,z,k,P-1));return o(I,this.toBBox),I},_chooseSubtree:function(A,M,R,P){for(var b,F,I,L,D,O,z,W;P.push(M),!(M.leaf||P.length-1===R);){for(z=W=1/0,b=0,F=M.children.length;b<F;b++)I=M.children[b],D=l(I),O=g(A,I)-D,O<W?(W=O,z=D<z?D:z,L=I):O===W&&D<z&&(z=D,L=I);M=L||M.children[0]}return M},_insert:function(A,M,R){var P=this.toBBox,b=R?A:P(A),F=[],I=this._chooseSubtree(b,this.data,M,F);for(I.children.push(A),r(I,b);M>=0&&F[M].children.length>this._maxEntries;)this._split(F,M),M--;this._adjustParentBBoxes(b,F,M)},_split:function(A,M){var R=A[M],P=R.children.length,b=this._minEntries;this._chooseSplitAxis(R,b,P);var F=this._chooseSplitIndex(R,b,P),I=w(R.children.splice(F,R.children.length-F));I.height=R.height,I.leaf=R.leaf,o(R,this.toBBox),o(I,this.toBBox),M?A[M-1].children.push(I):this._splitRoot(R,I)},_splitRoot:function(A,M){this.data=w([A,M]),this.data.height=A.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(A,M,R){var P,b,F,I,L,D,O,z;for(D=O=1/0,P=M;P<=R-M;P++)b=u(A,0,P,this.toBBox),F=u(A,P,R,this.toBBox),I=x(b,F),L=l(b)+l(F),I<D?(D=I,z=P,O=L<O?L:O):I===D&&L<O&&(O=L,z=P);return z},_chooseSplitAxis:function(A,M,R){var P=A.leaf?this.compareMinX:h,b=A.leaf?this.compareMinY:d,F=this._allDistMargin(A,M,R,P),I=this._allDistMargin(A,M,R,b);F<I&&A.children.sort(P)},_allDistMargin:function(A,M,R,P){A.children.sort(P);var b=this.toBBox,F=u(A,0,M,b),I=u(A,R-M,R,b),L=p(F)+p(I),D,O;for(D=M;D<R-M;D++)O=A.children[D],r(F,A.leaf?b(O):O),L+=p(F);for(D=R-M-1;D>=M;D--)O=A.children[D],r(I,A.leaf?b(O):O),L+=p(I);return L},_adjustParentBBoxes:function(A,M,R){for(var P=R;P>=0;P--)r(M[P],A)},_condense:function(A){for(var M=A.length-1,R;M>=0;M--)A[M].children.length===0?M>0?(R=A[M-1].children,R.splice(R.indexOf(A[M]),1)):this.clear():o(A[M],this.toBBox)},compareMinX:function(A,M){return A.left-M.left},compareMinY:function(A,M){return A.top-M.top},toBBox:function(A){return{minX:A.left,minY:A.top,maxX:A.right,maxY:A.bottom}}};function c(A,M,R){if(!R)return M.indexOf(A);for(var P=0;P<M.length;P++)if(R(A,M[P]))return P;return-1}function o(A,M){u(A,0,A.children.length,M,A)}function u(A,M,R,P,b){b||(b=w(null)),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0;for(var F=M,I;F<R;F++)I=A.children[F],r(b,A.leaf?P(I):I);return b}function r(A,M){return A.minX=Math.min(A.minX,M.minX),A.minY=Math.min(A.minY,M.minY),A.maxX=Math.max(A.maxX,M.maxX),A.maxY=Math.max(A.maxY,M.maxY),A}function h(A,M){return A.minX-M.minX}function d(A,M){return A.minY-M.minY}function l(A){return(A.maxX-A.minX)*(A.maxY-A.minY)}function p(A){return A.maxX-A.minX+(A.maxY-A.minY)}function g(A,M){return(Math.max(M.maxX,A.maxX)-Math.min(M.minX,A.minX))*(Math.max(M.maxY,A.maxY)-Math.min(M.minY,A.minY))}function x(A,M){var R=Math.max(A.minX,M.minX),P=Math.max(A.minY,M.minY),b=Math.min(A.maxX,M.maxX),F=Math.min(A.maxY,M.maxY);return Math.max(0,b-R)*Math.max(0,F-P)}function y(A,M){return A.minX<=M.minX&&A.minY<=M.minY&&M.maxX<=A.maxX&&M.maxY<=A.maxY}function E(A,M){return M.minX<=A.maxX&&M.minY<=A.maxY&&M.maxX>=A.minX&&M.maxY>=A.minY}function w(A){return{children:A,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function C(A,M,R,P,b){for(var F=[M,R],I;F.length;)R=F.pop(),M=F.pop(),!(R-M<=P)&&(I=M+Math.ceil((R-M)/P/2)*P,a(A,I,M,R,b),F.push(M,I,I,R))}s.exports=m}),35072:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var u=0;u<o.length;u++)this.set(o[u])},set:function(c){return this.entries.indexOf(c)===-1&&this.entries.push(c),this},get:function(c,o){for(var u=0;u<this.entries.length;u++){var r=this.entries[u];if(r[c]===o)return r}},getArray:function(){return this.entries.slice(0)},delete:function(c){var o=this.entries.indexOf(c);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var c=0;c<this.entries.length;c++){var o=this.entries[c];console.log(o)}console.groupEnd()},each:function(c,o){var u,r=this.entries.slice(),h=r.length;if(o)for(u=0;u<h&&c.call(o,r[u],u)!==!1;u++);else for(u=0;u<h&&c(r[u],u)!==!1;u++);return this},iterate:function(c,o){var u,r=this.entries.length;if(o)for(u=0;u<r&&c.call(o,this.entries[u],u)!==!1;u++);else for(u=0;u<r&&c(this.entries[u],u)!==!1;u++);return this},iterateLocal:function(c){var o,u=[];for(o=1;o<arguments.length;o++)u.push(arguments[o]);var r=this.entries.length;for(o=0;o<r;o++){var h=this.entries[o];h[c].apply(h,u)}return this},clear:function(){return this.entries.length=0,this},contains:function(c){return this.entries.indexOf(c)>-1},union:function(c){var o=new m;return c.entries.forEach(function(u){o.set(u)}),this.entries.forEach(function(u){o.set(u)}),o},intersect:function(c){var o=new m;return this.entries.forEach(function(u){c.contains(u)&&o.set(u)}),o},difference:function(c){var o=new m;return this.entries.forEach(function(u){c.contains(u)||o.set(u)}),o},size:{get:function(){return this.entries.length},set:function(c){return c<this.entries.length?this.entries.length=c:this.entries.length}}});s.exports=m}),86555:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45319),m=e(83419),c=e(56583),o=e(26099),u=new m({initialize:function(h,d,l,p){h===void 0&&(h=0),d===void 0&&(d=h),l===void 0&&(l=0),p===void 0&&(p=null),this._width=h,this._height=d,this._parent=p,this.aspectMode=l,this.aspectRatio=d===0?1:h/d,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,h){return r===void 0&&(r=0),h===void 0&&(h=r),this.snapTo.set(r,h),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,h){return r===void 0&&(r=0),h===void 0&&(h=r),this.minWidth=a(r,0,this.maxWidth),this.minHeight=a(h,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,h){return r===void 0&&(r=Number.MAX_VALUE),h===void 0&&(h=r),this.maxWidth=a(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=a(h,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,h){switch(r===void 0&&(r=0),h===void 0&&(h=r),this.aspectMode){case u.NONE:this._width=this.getNewWidth(c(r,this.snapTo.x)),this._height=this.getNewHeight(c(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case u.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(c(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case u.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(c(h,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case u.FIT:this.constrain(r,h,!0);break;case u.ENVELOP:this.constrain(r,h,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,h){return this._width=this.getNewWidth(c(r,this.snapTo.x)),this._height=this.getNewHeight(c(h,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,h){return h===void 0&&(h=!0),r=a(r,this.minWidth,this.maxWidth),h&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,h){return h===void 0&&(h=!0),r=a(r,this.minHeight,this.maxHeight),h&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,h,d){r===void 0&&(r=0),h===void 0&&(h=r),d===void 0&&(d=!0),r=this.getNewWidth(r),h=this.getNewHeight(h);var l=this.snapTo,p=h===0?1:r/h;return d&&this.aspectRatio>p||!d&&this.aspectRatio<p?(r=c(r,l.x),h=r/this.aspectRatio,l.y>0&&(h=c(h,l.y),r=h*this.aspectRatio)):(d&&this.aspectRatio<p||!d&&this.aspectRatio>p)&&(h=c(h,l.y),r=h*this.aspectRatio,l.x>0&&(r=c(r,l.x),h=r*(1/this.aspectRatio))),this._width=r,this._height=h,this},fitTo:function(r,h){return this.constrain(r,h,!0)},envelop:function(r,h){return this.constrain(r,h,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});u.NONE=0,u.WIDTH_CONTROLS_HEIGHT=1,u.HEIGHT_CONTROLS_WIDTH=2,u.FIT=3,u.ENVELOP=4,s.exports=u}),15238:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="add"}),56187:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="remove"}),82348:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={PROCESS_QUEUE_ADD:e(15238),PROCESS_QUEUE_REMOVE:e(56187)}}),41392:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Events:e(82348),List:e(73162),Map:e(90330),ProcessQueue:e(25774),RTree:e(59542),Set:e(35072),Size:e(86555)}}),57382:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(45319),c=e(40987),o=e(8054),u=e(50030),r=e(79237),h=new a({Extends:r,initialize:function(l,p,g,x,y){r.call(this,l,p,g,x,y),this.add("__BASE",0,0,0,x,y),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=x,this.height=y,this.imageData=this.context.getImageData(0,0,x,y),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(d,l,p,g){return g===void 0&&(g=!0),this.context.drawImage(p,d,l),g&&this.update(),this},drawFrame:function(d,l,p,g,x){p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=!0);var y=this.manager.getFrame(d,l);if(y){var E=y.canvasData,w=y.cutWidth,C=y.cutHeight,A=y.source.resolution;this.context.drawImage(y.source.image,E.x,E.y,w,C,p,g,w/A,C/A),x&&this.update()}return this},setPixel:function(d,l,p,g,x,y){y===void 0&&(y=255),d=Math.abs(Math.floor(d)),l=Math.abs(Math.floor(l));var E=this.getIndex(d,l);if(E>-1){var w=this.context.getImageData(d,l,1,1);w.data[0]=p,w.data[1]=g,w.data[2]=x,w.data[3]=y,this.context.putImageData(w,d,l)}return this},putData:function(d,l,p,g,x,y,E){return g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=d.width),E===void 0&&(E=d.height),this.context.putImageData(d,l,p,g,x,y,E),this},getData:function(d,l,p,g){d=m(Math.floor(d),0,this.width-1),l=m(Math.floor(l),0,this.height-1),p=m(p,1,this.width-d),g=m(g,1,this.height-l);var x=this.context.getImageData(d,l,p,g);return x},getPixel:function(d,l,p){p||(p=new c);var g=this.getIndex(d,l);if(g>-1){var x=this.data,y=x[g+0],E=x[g+1],w=x[g+2],C=x[g+3];p.setTo(y,E,w,C)}return p},getPixels:function(d,l,p,g){d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=this.width),g===void 0&&(g=p),d=Math.abs(Math.round(d)),l=Math.abs(Math.round(l));for(var x=m(d,0,this.width),y=m(d+p,0,this.width),E=m(l,0,this.height),w=m(l+g,0,this.height),C=new c,A=[],M=E;M<w;M++){for(var R=[],P=x;P<y;P++)C=this.getPixel(P,M,C),R.push({x:P,y:M,color:C.color,alpha:C.alphaGL});A.push(R)}return A},getIndex:function(d,l){return d=Math.abs(Math.round(d)),l=Math.abs(Math.round(l)),d<this.width&&l<this.height?(d+l*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(d,l,p,g,x){return d===void 0&&(d=0),l===void 0&&(l=0),p===void 0&&(p=this.width),g===void 0&&(g=this.height),x===void 0&&(x=!0),this.context.clearRect(d,l,p,g),x&&this.update(),this},setSize:function(d,l){return l===void 0&&(l=d),(d!==this.width||l!==this.height)&&(this.canvas.width=d,this.canvas.height=l,this._source.width=d,this._source.height=l,this._source.isPowerOf2=u(d,l),this.frames.__BASE.setSize(d,l,0,0),this.width=d,this.height=l,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});s.exports=h}),81320:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10312),m=e(38058),c=e(27919),o=e(83419),u=e(8054),r=e(4327),h=e(95540),d=e(36060),l=e(32302),p=e(79237),g=e(70554),x=new o({Extends:p,initialize:function(E,w,C,A,M){C===void 0&&(C=256),A===void 0&&(A=256),M===void 0&&(M=!0),this.type="DynamicTexture";var R=E.game.renderer,P=R&&R.type===u.CANVAS,b=P?c.create2D(this,C,A):[this];p.call(this,E,w,b,C,A),this.add("__BASE",0,0,0,C,A),this.renderer=R,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=P?b:null,this.context=P?b.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new m(0,0,C,A).setScene(E.game.scene.systemScene,!1),this.renderTarget=P?null:new l(R,C,A,1,0,!1,!1,!0,!1),this.pipeline=P?null:R.pipelines.get(d.SINGLE_PIPELINE),this.setSize(C,A,M)},setSize:function(y,E,w){E===void 0&&(E=y),w===void 0&&(w=!0),w&&(y=Math.floor(y),E=Math.floor(E),y%2!==0&&y++,E%2!==0&&E++);var C=this.get(),A=C.source;if(y!==this.width||E!==this.height){this.canvas&&(this.canvas.width=y,this.canvas.height=E);var M=this.renderTarget;M&&(M.willResize(y,E)&&M.resize(y,E),M.texture!==A.glTexture&&this.renderer.deleteTexture(A.glTexture),this.setFromRenderTarget()),this.camera.setSize(y,E),A.width=y,A.height=E,C.setSize(y,E),this.width=y,this.height=E}else{var R=this.getSourceImage();C.cutX+y>R.width&&(y=R.width-C.cutX),C.cutY+E>R.height&&(E=R.height-C.cutY),C.setSize(y,E,C.cutX,C.cutY)}return this},setFromRenderTarget:function(){var y=this.get(),E=y.source,w=this.renderTarget;return E.isRenderTexture=!0,E.isGLTexture=!0,E.glTexture=w.texture,this},setIsSpriteTexture:function(y){return this.isSpriteTexture=y,this},fill:function(y,E,w,C,A,M){var R=this.camera,P=this.renderer;E===void 0&&(E=1),w===void 0&&(w=0),C===void 0&&(C=0),A===void 0&&(A=this.width),M===void 0&&(M=this.height);var b=y>>16&255,F=y>>8&255,I=y&255,L=this.renderTarget;if(R.preRender(),L){L.bind(!0);var D=this.pipeline.manager.set(this.pipeline),O=P.width/L.width,z=P.height/L.height,W=L.height-(C+M);D.drawFillRect(w*O,W*z,A*O,M*z,g.getTintFromFloats(I/255,F/255,b/255,1),E),L.unbind(!0)}else{var k=this.context;P.setContext(k),k.globalCompositeOperation="source-over",k.fillStyle="rgba("+b+","+F+","+I+","+E+")",k.fillRect(w,C,A,M),P.setContext()}return this.dirty=!0,this},clear:function(y,E,w,C){if(this.dirty){var A=this.context,M=this.renderTarget;M?M.clear(y,E,w,C):A&&(y!==void 0&&E!==void 0&&w!==void 0&&C!==void 0?A.clearRect(y,E,w,C):(A.save(),A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,this.width,this.height),A.restore())),this.dirty=!1}return this},stamp:function(y,E,w,C,A){w===void 0&&(w=0),C===void 0&&(C=0);var M=h(A,"alpha",1),R=h(A,"tint",16777215),P=h(A,"angle",0),b=h(A,"rotation",0),F=h(A,"scale",1),I=h(A,"scaleX",F),L=h(A,"scaleY",F),D=h(A,"originX",.5),O=h(A,"originY",.5),z=h(A,"blendMode",0),W=h(A,"erase",!1),k=h(A,"skipBatch",!1),X=this.manager.resetStamp(M,R);return X.setAngle(0),P!==0?X.setAngle(P):b!==0&&X.setRotation(b),X.setScale(I,L),X.setTexture(y,E),X.setOrigin(D,O),X.setBlendMode(z),W&&(this._eraseMode=!0),k?this.batchGameObject(X,w,C):this.draw(X,w,C),W&&(this._eraseMode=!1),this},erase:function(y,E,w){return this._eraseMode=!0,this.draw(y,E,w),this._eraseMode=!1,this},draw:function(y,E,w,C,A){return this.beginDraw(),this.batchDraw(y,E,w,C,A),this.endDraw(),this},drawFrame:function(y,E,w,C,A,M){return this.beginDraw(),this.batchDrawFrame(y,E,w,C,A,M),this.endDraw(),this},repeat:function(y,E,w,C,A,M,R,P,b){if(w===void 0&&(w=0),C===void 0&&(C=0),A===void 0&&(A=this.width),M===void 0&&(M=this.height),R===void 0&&(R=1),P===void 0&&(P=16777215),b===void 0&&(b=!1),y instanceof r?E=y:E=this.manager.getFrame(y,E),!E)return this;var F=this.manager.resetStamp(R,P);F.setFrame(E),F.setOrigin(0);var I=E.width,L=E.height;A=Math.floor(A),M=Math.floor(M);var D=Math.ceil(A/I),O=Math.ceil(M/L),z=D*I-A,W=O*L-M;z>0&&(z=I-z),W>0&&(W=L-W),w<0&&(D+=Math.ceil(Math.abs(w)/I)),C<0&&(O+=Math.ceil(Math.abs(C)/L));var k=w,X=C,V=!1,G=this.manager.stampCrop.setTo(0,0,I,L);b||this.beginDraw();for(var N=0;N<O;N++){if(X+L<0){X+=L;continue}for(var H=0;H<D;H++){if(V=!1,k+I<0){k+=I;continue}else k<0&&(V=!0,G.width=I+k,G.x=I-G.width);X<0&&(V=!0,G.height=L+X,G.y=L-G.height),z>0&&H===D-1&&(V=!0,G.width=z),W>0&&N===O-1&&(V=!0,G.height=W),V&&F.setCrop(G),this.batchGameObject(F,k,X),F.isCropped=!1,G.setTo(0,0,I,L),k+=I}k=w,X+=L}return b||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var y=this.camera,E=this.renderer,w=this.renderTarget;y.preRender(),w?E.beginCapture(w.width,w.height):E.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(y,E,w,C,A){return Array.isArray(y)||(y=[y]),this.batchList(y,E,w,C,A),this},batchDrawFrame:function(y,E,w,C,A,M){w===void 0&&(w=0),C===void 0&&(C=0),A===void 0&&(A=1),M===void 0&&(M=16777215);var R=this.manager.getFrame(y,E);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,w,C,M,A,this.camera.matrix,null):this.batchTextureFrame(R,w,C,A,M)),this},endDraw:function(y){if(y===void 0&&(y=this._eraseMode),this.isDrawing){var E=this.renderer,w=this.renderTarget;if(w){var C=E.endCapture(),A=E.pipelines.setUtility();A.blitFrame(C,w,1,!1,!1,y,this.isSpriteTexture),E.resetScissor(),E.resetViewport()}else E.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(y,E,w,C,A){var M=y.length;if(M!==0)for(var R=0;R<M;R++){var P=y[R];!P||P===this||(P.renderWebGL||P.renderCanvas?this.batchGameObject(P,E,w):P.isParent||P.list?this.batchGroup(P.getChildren(),E,w):typeof P=="string"?this.batchTextureFrameKey(P,null,E,w,C,A):P instanceof r?this.batchTextureFrame(P,E,w,C,A):Array.isArray(P)&&this.batchList(P,E,w,C,A))}},batchGroup:function(y,E,w){E===void 0&&(E=0),w===void 0&&(w=0);for(var C=0;C<y.length;C++){var A=y[C];A.willRender(this.camera)&&this.batchGameObject(A,A.x+E,A.y+w)}},batchGameObject:function(y,E,w){E===void 0&&(E=y.x),w===void 0&&(w=y.y);var C=y.x,A=y.y,M=this.camera,R=this.renderer,P=this._eraseMode,b=y.mask;if(y.setPosition(E,w),this.canvas){if(P){var F=y.blendMode;y.blendMode=a.ERASE}b&&b.preRenderCanvas(R,y,M),y.renderCanvas(R,y,M,null),b&&b.postRenderCanvas(R,y,M),P&&(y.blendMode=F)}else R&&(b&&b.preRenderWebGL(R,y,M),P||R.setBlendMode(y.blendMode),y.renderWebGL(R,y,M),b&&b.postRenderWebGL(R,M,this.renderTarget));y.setPosition(C,A)},batchTextureFrameKey:function(y,E,w,C,A,M){var R=this.manager.getFrame(y,E);R&&this.batchTextureFrame(R,w,C,A,M)},batchTextureFrame:function(y,E,w,C,A){E===void 0&&(E=0),w===void 0&&(w=0),C===void 0&&(C=1),A===void 0&&(A=16777215);var M=this.camera.matrix,R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(y,E,w,A,C,M,null);else{var P=this.context,b=y.canvasData,F=y.source.image;P.save(),P.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",P.globalAlpha=C,M.setToContext(P),b.width>0&&b.height>0&&P.drawImage(F,b.x,b.y,b.width,b.height,E,w,b.width,b.height),P.restore()}},snapshotArea:function(y,E,w,C,A,M,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,A,!1,y,E,w,C,M,R):this.renderer.snapshotCanvas(this.canvas,A,!1,y,E,w,C,M,R),this},snapshot:function(y,E,w){return this.snapshotArea(0,0,this.width,this.height,y,E,w)},snapshotPixel:function(y,E,w){return this.snapshotArea(y,E,1,1,w,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(y,E,w,C){var A=this.manager.resetStamp();A.setTexture(this),A.setOrigin(0),A.renderWebGL(y,A,w,C)},renderCanvas:function(){},destroy:function(){var y=this.manager.stamp;y&&y.texture===this&&this.manager.resetStamp(),p.prototype.destroy.call(this),c.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});s.exports=x}),4327:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(45319),c=e(79291),o=new a({initialize:function(r,h,d,l,p,g,x){this.texture=r,this.name=h,this.source=r.source[d],this.sourceIndex=d,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(g,x,l,p)},setCutPosition:function(u,r){return u===void 0&&(u=0),r===void 0&&(r=0),this.cutX=u,this.cutY=r,this.updateUVs()},setCutSize:function(u,r){return this.cutWidth=u,this.cutHeight=r,this.updateUVs()},setSize:function(u,r,h,d){h===void 0&&(h=0),d===void 0&&(d=0),this.setCutPosition(h,d),this.setCutSize(u,r),this.width=u,this.height=r,this.halfWidth=Math.floor(u*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(u/2),this.centerY=Math.floor(r/2);var l=this.data,p=l.cut;p.x=h,p.y=d,p.w=u,p.h=r,p.r=h+u,p.b=d+r,l.sourceSize.w=u,l.sourceSize.h=r,l.spriteSourceSize.w=u,l.spriteSourceSize.h=r,l.radius=.5*Math.sqrt(u*u+r*r);var g=l.drawImage;return g.x=h,g.y=d,g.width=u,g.height=r,this.updateUVs()},setTrim:function(u,r,h,d,l,p){var g=this.data,x=g.spriteSourceSize;return g.trim=!0,g.sourceSize.w=u,g.sourceSize.h=r,x.x=h,x.y=d,x.w=l,x.h=p,x.r=h+l,x.b=d+p,this.x=h,this.y=d,this.width=l,this.height=p,this.halfWidth=l*.5,this.halfHeight=p*.5,this.centerX=Math.floor(l/2),this.centerY=Math.floor(p/2),this.updateUVs()},setScale9:function(u,r,h,d){var l=this.data;return l.scale9=!0,l.is3Slice=r===0&&d===this.height,l.scale9Borders.x=u,l.scale9Borders.y=r,l.scale9Borders.w=h,l.scale9Borders.h=d,this},setCropUVs:function(u,r,h,d,l,p,g){var x=this.cutX,y=this.cutY,E=this.cutWidth,w=this.cutHeight,C=this.realWidth,A=this.realHeight;r=m(r,0,C),h=m(h,0,A),d=m(d,0,C-r),l=m(l,0,A-h);var M=x+r,R=y+h,P=d,b=l,F=this.data;if(F.trim){var I=F.spriteSourceSize;d=m(d,0,I.x+E-r),l=m(l,0,I.y+w-h);var L=r+d,D=h+l,O=!(I.r<r||I.b<h||I.x>L||I.y>D);if(O){var z=Math.max(I.x,r),W=Math.max(I.y,h),k=Math.min(I.r,L)-z,X=Math.min(I.b,D)-W;P=k,b=X,p?M=x+(E-(z-I.x)-k):M=x+(z-I.x),g?R=y+(w-(W-I.y)-X):R=y+(W-I.y),r=z,h=W,d=k,l=X}else M=0,R=0,P=0,b=0}else p&&(M=x+(E-r-d)),g&&(R=y+(w-h-l));var V=this.source.width,G=this.source.height;return u.u0=Math.max(0,M/V),u.v0=Math.max(0,R/G),u.u1=Math.min(1,(M+P)/V),u.v1=Math.min(1,(R+b)/G),u.x=r,u.y=h,u.cx=M,u.cy=R,u.cw=P,u.ch=b,u.width=d,u.height=l,u.flipX=p,u.flipY=g,u},updateCropUVs:function(u,r,h){return this.setCropUVs(u,u.x,u.y,u.width,u.height,r,h)},setUVs:function(u,r,h,d,l,p){var g=this.data.drawImage;return g.width=u,g.height=r,this.u0=h,this.v0=d,this.u1=l,this.v1=p,this},updateUVs:function(){var u=this.cutX,r=this.cutY,h=this.cutWidth,d=this.cutHeight,l=this.data.drawImage;l.width=h,l.height=d;var p=this.source.width,g=this.source.height;return this.u0=u/p,this.v0=r/g,this.u1=(u+h)/p,this.v1=(r+d)/g,this},updateUVsInverted:function(){var u=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/u,this.v0=this.cutY/r,this.u1=this.cutX/u,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var u=new o(this.texture,this.name,this.sourceIndex);return u.cutX=this.cutX,u.cutY=this.cutY,u.cutWidth=this.cutWidth,u.cutHeight=this.cutHeight,u.x=this.x,u.y=this.y,u.width=this.width,u.height=this.height,u.halfWidth=this.halfWidth,u.halfHeight=this.halfHeight,u.centerX=this.centerX,u.centerY=this.centerY,u.rotated=this.rotated,u.data=c(!0,u.data,this.data),u.updateUVs(),u},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});s.exports=o}),79237:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(4327),c=e(11876),o='Texture "%s" has no frame "%s"',u=new a({initialize:function(h,d,l,p,g){Array.isArray(l)||(l=[l]),this.manager=h,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var x=0;x<l.length;x++)this.source.push(new c(this,l[x],p,g))},add:function(r,h,d,l,p,g){if(this.has(r))return null;var x=new m(this,r,h,d,l,p,g);return this.frames[r]=x,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,x},remove:function(r){if(this.has(r)){var h=this.get(r);return h.destroy(),delete this.frames[r],!0}return!1},has:function(r){return this.frames.hasOwnProperty(r)},get:function(r){r||(r=this.firstFrame);var h=this.frames[r];return h||(console.warn(o,this.key,r),h=this.frames[this.firstFrame]),h},getTextureSourceIndex:function(r){for(var h=0;h<this.source.length;h++)if(this.source[h]===r)return h;return-1},getFramesFromTextureSource:function(r,h){h===void 0&&(h=!1);var d=[];for(var l in this.frames)if(!(l==="__BASE"&&!h)){var p=this.frames[l];p.sourceIndex===r&&d.push(p)}return d},getFrameBounds:function(r){r===void 0&&(r=0);for(var h=this.getFramesFromTextureSource(r,!0),d=h[0],l=d.cutX,p=d.cutY,g=d.cutX+d.cutWidth,x=d.cutY+d.cutHeight,y=1;y<h.length;y++){var E=h[y];E.cutX<l&&(l=E.cutX),E.cutY<p&&(p=E.cutY),E.cutX+E.cutWidth>g&&(g=E.cutX+E.cutWidth),E.cutY+E.cutHeight>x&&(x=E.cutY+E.cutHeight)}return{x:l,y:p,width:g-l,height:x-p}},getFrameNames:function(r){r===void 0&&(r=!1);var h=Object.keys(this.frames);if(!r){var d=h.indexOf("__BASE");d!==-1&&h.splice(d,1)}return h},getSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var h=this.frames[r];return h?h.source.image:(console.warn(o,this.key,r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var h=this.frames[r],d;return h?d=h.sourceIndex:(console.warn(o,this.key,r),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var h=0;h<r.length;h++){var d=this.source[h];this.dataSource.push(new c(this,r[h],d.width,d.height))}},setFilter:function(r){var h;for(h=0;h<this.source.length;h++)this.source[h].setFilter(r);for(h=0;h<this.dataSource.length;h++)this.dataSource[h].setFilter(r)},destroy:function(){var r,h=this.source,d=this.dataSource;for(r=0;r<h.length;r++)h[r]&&h[r].destroy();for(r=0;r<d.length;r++)d[r]&&d[r].destroy();for(var l in this.frames){var p=this.frames[l];p&&p.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});s.exports=u}),17130:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),m=e(57382),c=e(83419),o=e(40987),u=e(8054),r=e(81320),h=e(50792),d=e(69442),l=e(4327),p=e(8443),g=e(99584),x=e(35154),y=e(88571),E=e(41212),w=e(61309),C=e(87841),A=e(79237),M=new c({Extends:h,initialize:function(P){h.call(this),this.game=P,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new C,this.silentWarnings=!1,P.events.once(p.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(d.LOAD,this.updatePending,this),this.on(d.ERROR,this.updatePending,this);var R=this.game.config;R.defaultImage!==null&&this.addBase64("__DEFAULT",R.defaultImage),R.missingImage!==null&&this.addBase64("__MISSING",R.missingImage),R.whiteImage!==null&&this.addBase64("__WHITE",R.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(p.DESTROY,this.destroy,this),this.game.events.once(p.SYSTEM_READY,function(P){this.stamp=new y(P).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(d.LOAD),this.off(d.ERROR),this.emit(d.READY))},checkKey:function(R){return!R||typeof R!="string"||this.exists(R)?(this.silentWarnings||console.error("Texture key already in use: "+R),!1):!0},remove:function(R){if(typeof R=="string")if(this.exists(R))R=this.get(R);else return this.silentWarnings||console.warn("No texture found matching key: "+R),this;var P=R.key;return this.list.hasOwnProperty(P)&&(R.destroy(),this.emit(d.REMOVE,P),this.emit(d.REMOVE_KEY+P)),this},removeKey:function(R){return this.list.hasOwnProperty(R)&&delete this.list[R],this},addBase64:function(R,P){if(this.checkKey(R)){var b=this,F=new Image;F.onerror=function(){b.emit(d.ERROR,R)},F.onload=function(){var I=b.create(R,F);I&&(w.Image(I,0),b.emit(d.ADD,R,I),b.emit(d.ADD_KEY+R,I),b.emit(d.LOAD,R,I))},F.src=P}return this},getBase64:function(R,P,b,F){b===void 0&&(b="image/png"),F===void 0&&(F=.92);var I="",L=this.getFrame(R,P);if(L&&(L.source.isRenderTexture||L.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(L){var D=L.canvasData,O=a.create2D(this,D.width,D.height),z=O.getContext("2d",{willReadFrequently:!0});D.width>0&&D.height>0&&z.drawImage(L.source.image,D.x,D.y,D.width,D.height,0,0,D.width,D.height),I=O.toDataURL(b,F),a.remove(O)}return I},addImage:function(R,P,b){var F=null;return this.checkKey(R)&&(F=this.create(R,P),w.Image(F,0),b&&F.setDataSource(b),this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)),F},addGLTexture:function(R,P){var b=null;if(this.checkKey(R)){var F=P.width,I=P.height;b=this.create(R,P,F,I),b.add("__BASE",0,0,0,F,I),this.emit(d.ADD,R,b),this.emit(d.ADD_KEY+R,b)}return b},addCompressedTexture:function(R,P,b){var F=null;if(this.checkKey(R)){if(F=this.create(R,P),F.add("__BASE",0,0,0,P.width,P.height),b){var I=function(D,O,z){Array.isArray(z.textures)||Array.isArray(z.frames)?w.JSONArray(D,O,z):w.JSONHash(D,O,z)};if(Array.isArray(b))for(var L=0;L<b.length;L++)I(F,L,b[L]);else I(F,0,b)}this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)}return F},addRenderTexture:function(R,P){var b=null;return this.checkKey(R)&&(b=this.create(R,P),b.add("__BASE",0,0,0,P.width,P.height),this.emit(d.ADD,R,b),this.emit(d.ADD_KEY+R,b)),b},generate:function(R,P){if(this.checkKey(R)){var b=a.create(this,1,1);return P.canvas=b,g(P),this.addCanvas(R,b)}else return null},createCanvas:function(R,P,b){if(P===void 0&&(P=256),b===void 0&&(b=256),this.checkKey(R)){var F=a.create(this,P,b,u.CANVAS,!0);return this.addCanvas(R,F)}return null},addCanvas:function(R,P,b){b===void 0&&(b=!1);var F=null;return b?F=new m(this,R,P,P.width,P.height):this.checkKey(R)&&(F=new m(this,R,P,P.width,P.height),this.list[R]=F,this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)),F},addDynamicTexture:function(R,P,b){var F=null;return typeof R=="string"&&!this.exists(R)?F=new r(this,R,P,b):(F=R,R=F.key),this.checkKey(R)?(this.list[R]=F,this.emit(d.ADD,R,F),this.emit(d.ADD_KEY+R,F)):F=null,F},addAtlas:function(R,P,b,F){return Array.isArray(b.textures)||Array.isArray(b.frames)?this.addAtlasJSONArray(R,P,b,F):this.addAtlasJSONHash(R,P,b,F)},addAtlasJSONArray:function(R,P,b,F){var I=null;if(P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I){if(Array.isArray(b))for(var L=b.length===1,D=0;D<I.source.length;D++){var O=L?b[0]:b[D];w.JSONArray(I,D,O)}else w.JSONArray(I,0,b);F&&I.setDataSource(F),this.emit(d.ADD,R,I),this.emit(d.ADD_KEY+R,I)}return I},addAtlasJSONHash:function(R,P,b,F){var I=null;if(P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I){if(Array.isArray(b))for(var L=0;L<b.length;L++)w.JSONHash(I,L,b[L]);else w.JSONHash(I,0,b);F&&I.setDataSource(F),this.emit(d.ADD,R,I),this.emit(d.ADD_KEY+R,I)}return I},addAtlasXML:function(R,P,b,F){var I=null;return P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I&&(w.AtlasXML(I,0,b),F&&I.setDataSource(F),this.emit(d.ADD,R,I),this.emit(d.ADD_KEY+R,I)),I},addUnityAtlas:function(R,P,b,F){var I=null;return P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I&&(w.UnityYAML(I,0,b),F&&I.setDataSource(F),this.emit(d.ADD,R,I),this.emit(d.ADD_KEY+R,I)),I},addSpriteSheet:function(R,P,b,F){var I=null;if(P instanceof A?(R=P.key,I=P):this.checkKey(R)&&(I=this.create(R,P)),I){var L=I.source[0].width,D=I.source[0].height;w.SpriteSheet(I,0,0,0,L,D,b),F&&I.setDataSource(F),this.emit(d.ADD,R,I),this.emit(d.ADD_KEY+R,I)}return I},addSpriteSheetFromAtlas:function(R,P){if(!this.checkKey(R))return null;var b=x(P,"atlas",null),F=x(P,"frame",null);if(!(!b||!F)){var I=this.get(b),L=I.get(F);if(L){var D=L.source.image;D||(D=L.source.glTexture);var O=this.create(R,D);return L.trimmed?w.SpriteSheetFromAtlas(O,L,P):w.SpriteSheet(O,0,L.cutX,L.cutY,L.cutWidth,L.cutHeight,P),this.emit(d.ADD,R,O),this.emit(d.ADD_KEY+R,O),O}}},addUint8Array:function(R,P,b,F){if(!this.checkKey(R)||P.length/4!==b*F)return null;var I=this.create(R,P,b,F);return I.add("__BASE",0,0,0,b,F),this.emit(d.ADD,R,I),this.emit(d.ADD_KEY+R,I),I},create:function(R,P,b,F){var I=null;return this.checkKey(R)&&(I=new A(this,R,P,b,F),this.list[R]=I),I},exists:function(R){return this.list.hasOwnProperty(R)},get:function(R){return R===void 0&&(R="__DEFAULT"),this.list[R]?this.list[R]:R instanceof A?R:R instanceof l?R.texture:this.list.__MISSING},cloneFrame:function(R,P){if(this.list[R])return this.list[R].get(P).clone()},getFrame:function(R,P){if(this.list[R])return this.list[R].get(P)},parseFrame:function(R){if(R){if(typeof R=="string")return this.getFrame(R);if(Array.isArray(R)&&R.length===2)return this.getFrame(R[0],R[1]);if(E(R))return this.getFrame(R.key,R.frame);if(R instanceof A)return R.get();if(R instanceof l)return R}else return},getTextureKeys:function(){var R=[];for(var P in this.list)P!=="__DEFAULT"&&P!=="__MISSING"&&P!=="__WHITE"&&P!=="__NORMAL"&&R.push(P);return R},getPixel:function(R,P,b,F){var I=this.getFrame(b,F);if(I){R-=I.x,P-=I.y;var L=I.data.cut;if(R+=L.x,P+=L.y,R>=L.x&&R<L.r&&P>=L.y&&P<L.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,R,P,1,1,0,0,1,1);var O=D.getImageData(0,0,1,1);return new o(O.data[0],O.data[1],O.data[2],O.data[3])}}return null},getPixelAlpha:function(R,P,b,F){var I=this.getFrame(b,F);if(I){R-=I.x,P-=I.y;var L=I.data.cut;if(R+=L.x,P+=L.y,R>=L.x&&R<L.r&&P>=L.y&&P<L.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,R,P,1,1,0,0,1,1);var O=D.getImageData(0,0,1,1);return O.data[3]}}return null},setTexture:function(R,P,b){return this.list[P]&&(R.texture=this.list[P],R.frame=R.texture.get(b)),R},renameTexture:function(R,P){var b=this.get(R);return b&&R!==P?(b.key=P,this.list[P]=b,delete this.list[R],!0):!1},each:function(R,P){for(var b=[null],F=1;F<arguments.length;F++)b.push(arguments[F]);for(var I in this.list)b[0]=this.list[I],R.apply(P,b)},resetStamp:function(R,P){R===void 0&&(R=1),P===void 0&&(P=16777215);var b=this.stamp;return b.setCrop(),b.setPosition(0),b.setAngle(0),b.setScale(1),b.setAlpha(R),b.setTint(P),b.setTexture("__WHITE"),b},destroy:function(){for(var R in this.list)this.list[R].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,a.remove(this._tempCanvas)}});s.exports=M}),11876:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27919),m=e(83419),c=e(50030),o=e(29795),u=e(82751),r=new m({initialize:function(d,l,p,g,x){x===void 0&&(x=!1);var y=d.manager.game;this.renderer=y.renderer,this.texture=d,this.source=l,this.image=l.compressed?null:l,this.compressionAlgorithm=l.compressed?l.format:null,this.resolution=1,this.width=p||l.naturalWidth||l.videoWidth||l.width||0,this.height=g||l.naturalHeight||l.videoHeight||l.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=l instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&l instanceof HTMLVideoElement,this.isRenderTexture=l.type==="RenderTexture"||l.type==="DynamicTexture",this.isGLTexture=l instanceof u,this.isPowerOf2=c(this.width,this.height),this.glTexture=null,this.flipY=x,this.init(y)},init:function(h){var d=this.renderer;if(d){var l=this.source;if(d.gl){var p=this.image,g=this.flipY,x=this.width,y=this.height,E=this.scaleMode;this.isCanvas?this.glTexture=d.createCanvasTexture(p,!1,g):this.isVideo?this.glTexture=d.createVideoTexture(p,!1,g):this.isRenderTexture?this.glTexture=d.createTextureFromSource(null,x,y,E):this.isGLTexture?this.glTexture=l:this.compressionAlgorithm?this.glTexture=d.createTextureFromSource(l,void 0,void 0,E):l instanceof Uint8Array?this.glTexture=d.createUint8ArrayTexture(l,x,y,E):this.glTexture=d.createTextureFromSource(p,x,y,E)}else this.isRenderTexture&&(this.image=l.canvas)}h.config.antialias||this.setFilter(1)},setFilter:function(h){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,h),this.scaleMode=h},setFlipY:function(h){return h===void 0&&(h=!0),h===this.flipY?this:(this.flipY=h,this.update(),this)},update:function(){var h=this.renderer,d=this.image,l=this.flipY,p=h.gl;p&&this.isCanvas?h.updateCanvasTexture(d,this.glTexture,l):p&&this.isVideo&&h.updateVideoTexture(d,this.glTexture,l)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&a.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});s.exports=r}),19673:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LINEAR:0,NEAREST:1};s.exports=T}),44538:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addtexture"}),63486:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="addtexture-"}),94851:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="onerror"}),29099:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="onload"}),8678:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="ready"}),86415:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removetexture"}),30879:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="removetexture-"}),69442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ADD:e(44538),ADD_KEY:e(63486),ERROR:e(94851),LOAD:e(29099),READY:e(8678),REMOVE:e(86415),REMOVE_KEY:e(30879)}}),27458:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),m=e(19673),c={CanvasTexture:e(57382),DynamicTexture:e(81320),Events:e(69442),FilterMode:m,Frame:e(4327),Parsers:e(61309),Texture:e(79237),TextureManager:e(17130),TextureSource:e(11876)};c=a(!1,c,m),s.exports=c}),89905:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(!m.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var c=e.source[a];e.add("__BASE",a,0,0,c.width,c.height);for(var o=m.getElementsByTagName("SubTexture"),u,r=0;r<o.length;r++){var h=o[r].attributes,d=h.name.value,l=parseInt(h.x.value,10),p=parseInt(h.y.value,10),g=parseInt(h.width.value,10),x=parseInt(h.height.value,10);if(u=e.add(d,a,l,p,g,x),h.frameX){var y=Math.abs(parseInt(h.frameX.value,10)),E=Math.abs(parseInt(h.frameY.value,10)),w=parseInt(h.frameWidth.value,10),C=parseInt(h.frameHeight.value,10);u.setTrim(g,x,y,E,w,C)}}return e};s.exports=T}),72893:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.source[a];return e.add("__BASE",a,0,0,m.width,m.height),e};s.exports=T}),4832:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.source[a];return e.add("__BASE",a,0,0,m.width,m.height),e};s.exports=T}),78566:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),m=function(c,o,u){if(!u.frames&&!u.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=c.source[o];c.add("__BASE",o,0,0,r.width,r.height);for(var h=Array.isArray(u.textures)?u.textures[o].frames:u.frames,d,l=0;l<h.length;l++){var p=h[l];if(d=c.add(p.filename,o,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+p.filename);continue}p.trimmed&&d.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(d.rotated=!0,d.updateUVsInverted());var g=p.anchor||p.pivot;g&&(d.customPivot=!0,d.pivotX=g.x,d.pivotY=g.y),p.scale9Borders&&d.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),d.customData=a(p)}for(var x in u)x!=="frames"&&(Array.isArray(u[x])?c.customData[x]=u[x].slice(0):c.customData[x]=u[x]);return c};s.exports=m}),39711:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),m=function(c,o,u){if(!u.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=c.source[o];c.add("__BASE",o,0,0,r.width,r.height);var h=u.frames,d;for(var l in h)if(h.hasOwnProperty(l)){var p=h[l];if(d=c.add(l,o,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+l);continue}p.trimmed&&d.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(d.rotated=!0,d.updateUVsInverted());var g=p.anchor||p.pivot;g&&(d.customPivot=!0,d.pivotX=g.x,d.pivotY=g.y),p.scale9Borders&&d.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),d.customData=a(p)}for(var x in u)x!=="frames"&&(Array.isArray(u[x])?c.customData[x]=u[x].slice(0):c.customData[x]=u[x]);return c};s.exports=m}),31403:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=[171,75,84,88,32,49,49,187,13,10,26,10],m,c=new Uint8Array(e,0,12);for(m=0;m<c.length;m++)if(c[m]!==a[m]){console.warn("KTXParser - Invalid file format");return}var o=Uint32Array.BYTES_PER_ELEMENT,u=new DataView(e,12,13*o),r=u.getUint32(0,!0)===67305985,h=u.getUint32(1*o,r);if(h!==0){console.warn("KTXParser - Only compressed formats supported");return}var d=u.getUint32(4*o,r),l=u.getUint32(6*o,r),p=u.getUint32(7*o,r),g=Math.max(1,u.getUint32(11*o,r)),x=u.getUint32(12*o,r),y=new Array(g),E=64+x,w=l,C=p;for(m=0;m<g;m++){var A=new Int32Array(e,E,1)[0];E+=4,y[m]={data:new Uint8Array(e,E,A),width:w,height:C},w=Math.max(1,w>>1),C=Math.max(1,C>>1),E+=A}return{mipmaps:y,width:l,height:p,internalFormat:d,compressed:!0,generateMipmap:!1}};s.exports=T}),82038:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(P,b,F,I,L,D,O){return O===void 0&&(O=16),Math.floor((P+F)/L)*Math.floor((b+I)/D)*O}function e(P,b){return P=Math.max(P,16),b=Math.max(b,8),P*b/4}function a(P,b){return P=Math.max(P,8),b=Math.max(b,8),P*b/2}function m(P,b){return Math.ceil(P/4)*Math.ceil(b/4)*16}function c(P,b){return T(P,b,3,3,4,4,8)}function o(P,b){return T(P,b,3,3,4,4)}function u(P,b){return T(P,b,4,3,5,4)}function r(P,b){return T(P,b,4,4,5,5)}function h(P,b){return T(P,b,5,4,6,5)}function d(P,b){return T(P,b,5,5,6,6)}function l(P,b){return T(P,b,7,4,8,5)}function p(P,b){return T(P,b,7,5,8,6)}function g(P,b){return T(P,b,7,7,8,8)}function x(P,b){return T(P,b,9,4,10,5)}function y(P,b){return T(P,b,9,5,10,6)}function E(P,b){return T(P,b,9,7,10,8)}function w(P,b){return T(P,b,9,9,10,10)}function C(P,b){return T(P,b,11,9,12,10)}function A(P,b){return T(P,b,11,11,12,12)}var M={0:{sizeFunc:e,glFormat:[35841]},1:{sizeFunc:e,glFormat:[35843]},2:{sizeFunc:a,glFormat:[35840]},3:{sizeFunc:a,glFormat:[35842]},6:{sizeFunc:c,glFormat:[36196]},7:{sizeFunc:c,glFormat:[33776,35916]},8:{sizeFunc:o,glFormat:[33777,35917]},9:{sizeFunc:o,glFormat:[33778,35918]},11:{sizeFunc:o,glFormat:[33779,35919]},14:{sizeFunc:m,glFormat:[36494,36495]},15:{sizeFunc:m,glFormat:[36492,36493]},22:{sizeFunc:c,glFormat:[37492,37493]},23:{sizeFunc:o,glFormat:[37496,37497]},24:{sizeFunc:c,glFormat:[37494,37495]},25:{sizeFunc:c,glFormat:[37488]},26:{sizeFunc:o,glFormat:[37490]},27:{sizeFunc:o,glFormat:[37808,37840]},28:{sizeFunc:u,glFormat:[37809,37841]},29:{sizeFunc:r,glFormat:[37810,37842]},30:{sizeFunc:h,glFormat:[37811,37843]},31:{sizeFunc:d,glFormat:[37812,37844]},32:{sizeFunc:l,glFormat:[37813,37845]},33:{sizeFunc:p,glFormat:[37814,37846]},34:{sizeFunc:g,glFormat:[37815,37847]},35:{sizeFunc:x,glFormat:[37816,37848]},36:{sizeFunc:y,glFormat:[37817,37849]},37:{sizeFunc:E,glFormat:[37818,37850]},38:{sizeFunc:w,glFormat:[37819,37851]},39:{sizeFunc:C,glFormat:[37820,37852]},40:{sizeFunc:A,glFormat:[37821,37853]}},R=function(P){for(var b=new Uint32Array(P,0,13),F=b[0],I=F===55727696,L=I?b[2]:b[3],D=b[4],O=M[L].glFormat[D],z=M[L].sizeFunc,W=b[11],k=b[7],X=b[6],V=52+b[12],G=new Uint8Array(P,V),N=new Array(W),H=0,U=k,_=X,$=0;$<W;$++){var j=z(U,_);N[$]={data:new Uint8Array(G.buffer,G.byteOffset+H,j),width:U,height:_},U=Math.max(1,U>>1),_=Math.max(1,_>>1),H+=j}return{mipmaps:N,width:k,height:X,internalFormat:O,compressed:!0,generateMipmap:!1}};s.exports=R}),75549:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),m=function(c,o,u,r,h,d,l){var p=a(l,"frameWidth",null),g=a(l,"frameHeight",p);if(p===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var x=c.source[o];c.add("__BASE",o,0,0,x.width,x.height);var y=a(l,"startFrame",0),E=a(l,"endFrame",-1),w=a(l,"margin",0),C=a(l,"spacing",0),A=Math.floor((h-w+C)/(p+C)),M=Math.floor((d-w+C)/(g+C)),R=A*M;R===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",c.key),(y>R||y<-R)&&(y=0),y<0&&(y=R+y),(E===-1||E>R||E<y)&&(E=R);for(var P=w,b=w,F=0,I=0,L=0,D=0;D<R;D++){F=0,I=0;var O=P+p,z=b+g;O>h&&(F=O-h),z>d&&(I=z-d),D>=y&&D<=E&&(c.add(L,o,u+P,r+b,p-F,g-I),L++),P+=p+C,P+p>h&&(P=w,b+=g+C)}return c};s.exports=m}),47534:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),m=function(c,o,u){var r=a(u,"frameWidth",null),h=a(u,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=c.source[0];c.add("__BASE",0,0,0,d.width,d.height),a(u,"startFrame",0),a(u,"endFrame",-1);for(var l=a(u,"margin",0),p=a(u,"spacing",0),g=o.cutX,x=o.cutY,y=o.cutWidth,E=o.cutHeight,w=o.realWidth,C=o.realHeight,A=Math.floor((w-l+p)/(r+p)),M=Math.floor((C-l+p)/(h+p)),R=o.x,P=r-R,b=r-(w-y-R),F=o.y,I=h-F,L=h-(C-E-F),D,O=l,z=l,W=0,k=0,X=0;X<M;X++){for(var V=X===0,G=X===M-1,N=0;N<A;N++){var H=N===0,U=N===A-1;if(D=c.add(W,k,g+O,x+z,r,h),H||V||U||G){var _=H?R:0,$=V?F:0,j=0,Z=0;H&&(j+=r-P),U&&(j+=r-b),V&&(Z+=h-I),G&&(Z+=h-L);var it=r-j,at=h-Z;D.cutWidth=it,D.cutHeight=at,D.setTrim(r,h,_,$,it,at)}O+=p,H?O+=P:U?O+=b:O+=r,W++}O=l,z+=p,V?z+=I:G?z+=L:z+=h}return c};s.exports=m}),86147:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=0,e=function(m,c,o,u){var r=T-u.y-u.height;m.add(o,c,u.x,r,u.width,u.height)},a=function(m,c,o){var u=m.source[c];m.add("__BASE",c,0,0,u.width,u.height),T=u.height;for(var r=o.split(`
`),h=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",l="",p={x:0,y:0,width:0,height:0},g=0;g<r.length;g++){var x=r[g].match(h);if(x){var y=x[1]==="- ",E=x[2],w=x[3];if(y&&(l!==d&&(e(m,c,l,p),d=l),p={x:0,y:0,width:0,height:0}),E==="name"){l=w;continue}switch(E){case"x":case"y":case"width":case"height":p[E]=parseInt(w,10);break}}}return l!==d&&e(m,c,l,p),m};s.exports=a}),55222:((s,T,e)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50030),m=function(d){for(var l=d.mipmaps,p=1;p<l.length;p++){var g=l[p].width,x=l[p].height;if(!a(g,x))return console.warn("Mip level "+p+" is not a power-of-two size: "+g+"x"+x),!1}var y=h[d.internalFormat];return y?y(d):(console.warn("No format checker found for internal format "+d.internalFormat+". Assuming valid."),!0)};function c(d){for(var l=d.mipmaps,p=0;p<l.length;p++){var g=l[p].width,x=l[p].height;if((g<<p)%4!==0||(x<<p)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+p+" is "+g+"x"+x),!1}return!0}function o(){return!0}function u(d){var l=d.mipmaps,p=l[0];return a(p.width,p.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+p.width+"x"+p.height),!1)}function r(d){var l=d.mipmaps,p=l[0];return p.width%4!==0||p.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+p.width+"x"+p.height+" pixels"),!1):!0}var h={37488:o,37489:o,37490:o,37491:o,37492:o,37493:o,37494:o,37495:o,37496:o,37497:o,36196:o,37808:o,37809:o,37810:o,37811:o,37812:o,37813:o,37814:o,37815:o,37816:o,37817:o,37818:o,37819:o,37820:o,37821:o,37840:o,37841:o,37842:o,37843:o,37844:o,37845:o,37846:o,37847:o,37848:o,37849:o,37850:o,37851:o,37852:o,37853:o,36492:c,36493:c,36494:c,36495:c,36283:c,36284:c,36285:c,36286:c,35840:u,35841:u,35842:u,35843:u,33776:c,33777:c,33778:c,33779:c,35916:r,35917:r,35918:r,35919:r};s.exports=m}),61309:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AtlasXML:e(89905),Canvas:e(72893),Image:e(4832),JSONArray:e(78566),JSONHash:e(39711),KTXParser:e(31403),PVRParser:e(82038),SpriteSheet:e(75549),SpriteSheetFromAtlas:e(47534),UnityYAML:e(86147)}}),80341:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}}),16536:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o,u,r,h,d,l,p){(r===void 0||r<=0)&&(r=32),(h===void 0||h<=0)&&(h=32),d===void 0&&(d=0),l===void 0&&(l=0),this.name=o,this.firstgid=u|0,this.imageWidth=r|0,this.imageHeight=h|0,this.imageMargin=d|0,this.imageSpacing=l|0,this.properties=p||{},this.images=[],this.total=0},containsImageIndex:function(c){return c>=this.firstgid&&c<this.firstgid+this.total},addImage:function(c,o,u,r){return this.images.push({gid:c,image:o,width:u,height:r}),this.total++,this}});s.exports=m}),27462:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=new a({initialize:function(o){if(this.gids=[],o!==void 0)for(var u=0;u<o.length;++u)for(var r=o[u],h=0;h<r.total;++h)this.gids[r.firstgid+h]=r;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(c){this.gids=c?this._gids:void 0}},getTypeIncludingTile:function(c){if(c.type!==void 0&&c.type!=="")return c.type;if(!(!this.gids||c.gid===void 0)){var o=this.gids[c.gid];if(o){var u=o.getTileData(c.gid);if(u)return u.type}}},setTextureAndFrame:function(c,o,u,r){if(o===null&&this.gids&&r.gid!==void 0){var h=this.gids[r.gid];h&&(o===null&&h.image!==void 0&&(o=h.image.key),u===null&&(u=r.gid-h.firstgid),c.scene.textures.getFrame(o,u)||(o=null,u=null))}c.setTexture(o,u)},setPropertiesFromTiledObject:function(c,o){if(this.gids!==void 0&&o.gid!==void 0){var u=this.gids[o.gid];u!==void 0&&this.setFromJSON(c,u.getTileProperties(o.gid))}this.setFromJSON(c,o.properties)},setFromJSON:function(c,o){if(o){if(Array.isArray(o)){for(var u=0;u<o.length;u++){var r=o[u];c[r.name]!==void 0?c[r.name]=r.value:c.setData(r.name,r.value)}return}for(var h in o)c[h]!==void 0?c[h]=o[h]:c.setData(h,o[h])}}});s.exports=m}),31989:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),m=e(87010),c=e(46177),o=e(49075),u=function(r,h,d,l,p,g,x,y){d===void 0&&(d=32),l===void 0&&(l=32),p===void 0&&(p=10),g===void 0&&(g=10),y===void 0&&(y=!1);var E=null;if(Array.isArray(x)){var w=h!==void 0?h:"map";E=c(w,a.ARRAY_2D,x,d,l,y)}else if(h!==void 0){var C=r.cache.tilemap.get(h);C?E=c(h,C.format,C.data,d,l,y):console.warn("No map data found for key "+h)}return E===null&&(E=new m({tileWidth:d,tileHeight:l,width:p,height:g})),new o(r,E)};s.exports=u}),23029:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(31401),c=e(91907),o=e(62644),u=e(93232),r=new a({Mixins:[m.AlphaSingle,m.Flip,m.Visible],initialize:function(d,l,p,g,x,y,E,w){this.layer=d,this.index=l,this.x=p,this.y=g,this.width=x,this.height=y,this.right,this.bottom,this.baseWidth=E!==void 0?E:x,this.baseHeight=w!==void 0?w:y,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(h,d){return!(h<this.pixelX||d<this.pixelY||h>this.right||d>this.bottom)},copy:function(h){return this.index=h.index,this.alpha=h.alpha,this.properties=o(h.properties),this.visible=h.visible,this.setFlip(h.flipX,h.flipY),this.tint=h.tint,this.rotation=h.rotation,this.collideUp=h.collideUp,this.collideDown=h.collideDown,this.collideLeft=h.collideLeft,this.collideRight=h.collideRight,this.collisionCallback=h.collisionCallback,this.collisionCallbackContext=h.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(h){var d=this.tilemapLayer;if(d){var l=d.tileToWorldXY(this.x,this.y,void 0,h);return l.x}return this.x*this.baseWidth},getRight:function(h){var d=this.tilemapLayer;return d?this.getLeft(h)+this.width*d.scaleX:this.getLeft(h)+this.width},getTop:function(h){var d=this.tilemapLayer;if(d){var l=d.tileToWorldXY(this.x,this.y,void 0,h);return l.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(h){var d=this.tilemapLayer;return d?this.getTop(h)+this.height*d.scaleY:this.getTop(h)+this.height},getBounds:function(h,d){return d===void 0&&(d=new u),d.x=this.getLeft(h),d.y=this.getTop(h),d.width=this.getRight(h)-d.x,d.height=this.getBottom(h)-d.y,d},getCenterX:function(h){return(this.getLeft(h)+this.getRight(h))/2},getCenterY:function(h){return(this.getTop(h)+this.getBottom(h))/2},intersects:function(h,d,l,p){return!(l<=this.pixelX||p<=this.pixelY||h>=this.right||d>=this.bottom)},isInteresting:function(h,d){return h&&d?this.canCollide||this.hasInterestingFace:h?this.collides:d?this.hasInterestingFace:!1},resetCollision:function(h){if(h===void 0&&(h=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,h){var d=this.tilemapLayer;d&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(h,d,l,p,g){if(d===void 0&&(d=h),l===void 0&&(l=h),p===void 0&&(p=h),g===void 0&&(g=!0),this.collideLeft=h,this.collideRight=d,this.collideUp=l,this.collideDown=p,this.faceLeft=h,this.faceRight=d,this.faceTop=l,this.faceBottom=p,g){var x=this.tilemapLayer;x&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(h,d){return h===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=h,this.collisionCallbackContext=d),this},setSize:function(h,d,l,p){return h!==void 0&&(this.width=h),d!==void 0&&(this.height=d),l!==void 0&&(this.baseWidth=l),p!==void 0&&(this.baseHeight=p),this.updatePixelXY(),this},updatePixelXY:function(){var h=this.layer.orientation;if(h===c.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(h===c.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(h===c.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(h===c.HEXAGONAL){var d=this.layer.staggerAxis,l=this.layer.staggerIndex,p=this.layer.hexSideLength,g,x;d==="y"?(x=(this.baseHeight-p)/2+p,l==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*x):d==="x"&&(g=(this.baseWidth-p)/2+p,this.pixelX=this.x*g,l==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var h=this.layer.tilemapLayer;if(h){var d=h.gidMap[this.index];if(d)return d}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var h=this.tilemapLayer;return h?h.tilemap:null}}});s.exports=r}),49075:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84101),m=e(83419),c=e(39506),o=e(80341),u=e(95540),r=e(14977),h=e(27462),d=e(91907),l=e(36305),p=e(19133),g=e(68287),x=e(23029),y=e(81086),E=e(20442),w=e(33629),C=new m({initialize:function(M,R){this.scene=M,this.tileWidth=R.tileWidth,this.tileHeight=R.tileHeight,this.width=R.width,this.height=R.height,this.orientation=R.orientation,this.renderOrder=R.renderOrder,this.format=R.format,this.version=R.version,this.properties=R.properties,this.widthInPixels=R.widthInPixels,this.heightInPixels=R.heightInPixels,this.imageCollections=R.imageCollections,this.images=R.images,this.layers=R.layers,this.tiles=R.tiles,this.tilesets=R.tilesets,this.objects=R.objects,this.currentLayerIndex=0,this.hexSideLength=R.hexSideLength;var P=this.orientation;this._convert={WorldToTileXY:y.GetWorldToTileXYFunction(P),WorldToTileX:y.GetWorldToTileXFunction(P),WorldToTileY:y.GetWorldToTileYFunction(P),TileToWorldXY:y.GetTileToWorldXYFunction(P),TileToWorldX:y.GetTileToWorldXFunction(P),TileToWorldY:y.GetTileToWorldYFunction(P),GetTileCorners:y.GetTileCornersFunction(P)}},setRenderOrder:function(A){var M=["right-down","left-down","right-up","left-up"];return typeof A=="number"&&(A=M[A]),M.indexOf(A)>-1&&(this.renderOrder=A),this},addTilesetImage:function(A,M,R,P,b,F,I,L){if(A===void 0)return null;M==null&&(M=A);var D=this.scene.sys.textures;if(!D.exists(M))return console.warn('Texture key "%s" not found',M),null;var O=D.get(M),z=this.getTilesetIndex(A);if(z===null&&this.format===o.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',A,this.tilesets),null;var W=this.tilesets[z];return W?((R||P)&&W.setTileSize(R,P),(b||F)&&W.setSpacing(b,F),W.setImage(O),W):(R===void 0&&(R=this.tileWidth),P===void 0&&(P=this.tileHeight),b===void 0&&(b=0),F===void 0&&(F=0),I===void 0&&(I=0),L===void 0&&(L={x:0,y:0}),W=new w(A,I,R,P,b,F,void 0,void 0,L),W.setImage(O),this.tilesets.push(W),this.tiles=a(this),W)},copy:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L!==null?(y.Copy(A,M,R,P,b,F,I,L),this):null},createBlankLayer:function(A,M,R,P,b,F,I,L){R===void 0&&(R=0),P===void 0&&(P=0),b===void 0&&(b=this.width),F===void 0&&(F=this.height),I===void 0&&(I=this.tileWidth),L===void 0&&(L=this.tileHeight);var D=this.getLayerIndex(A);if(D!==null)return console.warn("Invalid Tilemap Layer ID: "+A),null;for(var O=new r({name:A,tileWidth:I,tileHeight:L,width:b,height:F,orientation:this.orientation,hexSideLength:this.hexSideLength}),z,W=0;W<F;W++){z=[];for(var k=0;k<b;k++)z.push(new x(O,-1,k,W,I,L,this.tileWidth,this.tileHeight));O.data.push(z)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var X=new E(this.scene,this,this.currentLayerIndex,M,R,P);return X.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(X),X},createLayer:function(A,M,R,P){var b=this.getLayerIndex(A);if(b===null)return console.warn("Invalid Tilemap Layer ID: "+A),typeof A=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var F=this.layers[b];if(F.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+A),null;this.currentLayerIndex=b,R===void 0&&(R=F.x),P===void 0&&(P=F.y);var I=new E(this.scene,this,b,M,R,P);return I.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(I),I},createFromObjects:function(A,M,R){R===void 0&&(R=!0);var P=[],b=this.getObjectLayer(A);if(!b)return console.warn("createFromObjects: Invalid objectLayerName given: "+A),P;var F=new h(R?this.tilesets:void 0);Array.isArray(M)||(M=[M]);for(var I=b.objects,L=0;L<M.length;L++){var D=M[L],O=u(D,"id",null),z=u(D,"gid",null),W=u(D,"name",null),k=u(D,"type",null);F.enabled=!u(D,"ignoreTileset",null);for(var X,V=[],G=0;G<I.length;G++)X=I[G],(O===null&&z===null&&W===null&&k===null||O!==null&&X.id===O||z!==null&&X.gid===z||W!==null&&X.name===W||k!==null&&F.getTypeIncludingTile(X)===k)&&V.push(X);for(var N=u(D,"classType",g),H=u(D,"scene",this.scene),U=u(D,"container",null),_=u(D,"key",null),$=u(D,"frame",null),j=0;j<V.length;j++){X=V[j];var Z=new N(H);if(Z.setName(X.name),Z.setPosition(X.x,X.y),F.setTextureAndFrame(Z,_,$,X),X.width&&(Z.displayWidth=X.width),X.height&&(Z.displayHeight=X.height),this.orientation===d.ISOMETRIC){var it=this.tileWidth/this.tileHeight,at={x:Z.x-Z.y,y:(Z.x+Z.y)/it};Z.x=at.x,Z.y=at.y}var q={x:Z.originX*X.width,y:(Z.originY-(X.gid?1:0))*X.height};if(X.rotation){var ft=c(X.rotation);l(q,ft),Z.rotation=ft}Z.x+=q.x,Z.y+=q.y,(X.flippedHorizontal!==void 0||X.flippedVertical!==void 0)&&Z.setFlip(X.flippedHorizontal,X.flippedVertical),X.visible||(Z.visible=!1),F.setPropertiesFromTiledObject(Z,X),U?U.add(Z):H.add.existing(Z),P.push(Z)}}return P},createFromTiles:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:y.CreateFromTiles(A,M,R,P,b,F)},fill:function(A,M,R,P,b,F,I){return F===void 0&&(F=!0),I=this.getLayer(I),I===null?null:(y.Fill(A,M,R,P,b,F,I),this)},filterObjects:function(A,M,R){if(typeof A=="string"){var P=A;if(A=this.getObjectLayer(A),!A)return console.warn("No object layer found with the name: "+P),null}return A.objects.filter(M,R)},filterTiles:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L===null?null:y.FilterTiles(A,M,R,P,b,F,I,L)},findByIndex:function(A,M,R,P){return P=this.getLayer(P),P===null?null:y.FindByIndex(A,M,R,P)},findObject:function(A,M,R){if(typeof A=="string"){var P=A;if(A=this.getObjectLayer(A),!A)return console.warn("No object layer found with the name: "+P),null}return A.objects.find(M,R)||null},findTile:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L===null?null:y.FindTile(A,M,R,P,b,F,I,L)},forEachTile:function(A,M,R,P,b,F,I,L){return L=this.getLayer(L),L===null?null:(y.ForEachTile(A,M,R,P,b,F,I,L),this)},getImageIndex:function(A){return this.getIndex(this.images,A)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(A){return A.name})},getIndex:function(A,M){for(var R=0;R<A.length;R++)if(A[R].name===M)return R;return null},getLayer:function(A){var M=this.getLayerIndex(A);return M!==null?this.layers[M]:null},getObjectLayer:function(A){var M=this.getIndex(this.objects,A);return M!==null?this.objects[M]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(A){return A.name})},getLayerIndex:function(A){return A===void 0?this.currentLayerIndex:typeof A=="string"?this.getLayerIndexByName(A):typeof A=="number"&&A<this.layers.length?A:A instanceof E&&A.tilemap===this?A.layerIndex:null},getLayerIndexByName:function(A){return this.getIndex(this.layers,A)},getTileAt:function(A,M,R,P){return P=this.getLayer(P),P===null?null:y.GetTileAt(A,M,R,P)},getTileAtWorldXY:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:y.GetTileAtWorldXY(A,M,R,P,b)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(A){return A.name})},getTilesWithin:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:y.GetTilesWithin(A,M,R,P,b,F)},getTilesWithinShape:function(A,M,R,P){return P=this.getLayer(P),P===null?null:y.GetTilesWithinShape(A,M,R,P)},getTilesWithinWorldXY:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:y.GetTilesWithinWorldXY(A,M,R,P,b,F,I)},getTileset:function(A){var M=this.getIndex(this.tilesets,A);return M!==null?this.tilesets[M]:null},getTilesetIndex:function(A){return this.getIndex(this.tilesets,A)},hasTileAt:function(A,M,R){return R=this.getLayer(R),R===null?null:y.HasTileAt(A,M,R)},hasTileAtWorldXY:function(A,M,R,P){return P=this.getLayer(P),P===null?null:y.HasTileAtWorldXY(A,M,R,P)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(A){this.setLayer(A)}},putTileAt:function(A,M,R,P,b){return P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:y.PutTileAt(A,M,R,P,b)},putTileAtWorldXY:function(A,M,R,P,b,F){return P===void 0&&(P=!0),F=this.getLayer(F),F===null?null:y.PutTileAtWorldXY(A,M,R,P,b,F)},putTilesAt:function(A,M,R,P,b){return P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:(y.PutTilesAt(A,M,R,P,b),this)},randomize:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:(y.Randomize(A,M,R,P,b,F),this)},calculateFacesAt:function(A,M,R){return R=this.getLayer(R),R===null?null:(y.CalculateFacesAt(A,M,R),this)},calculateFacesWithin:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:(y.CalculateFacesWithin(A,M,R,P,b),this)},removeLayer:function(A){var M=this.getLayerIndex(A);if(M!==null){p(this.layers,M);for(var R=M;R<this.layers.length;R++)this.layers[R].tilemapLayer&&this.layers[R].tilemapLayer.layerIndex--;return this.currentLayerIndex===M&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(A){var M=this.getLayerIndex(A);return M!==null?(A=this.layers[M],A.tilemapLayer.destroy(),p(this.layers,M),this.currentLayerIndex===M&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var A=this.layers,M=0;M<A.length;M++)A[M].tilemapLayer&&A[M].tilemapLayer.destroy(!1);return A.length=0,this.currentLayerIndex=0,this},removeTile:function(A,M,R){M===void 0&&(M=-1),R===void 0&&(R=!0);var P=[];Array.isArray(A)||(A=[A]);for(var b=0;b<A.length;b++){var F=A[b];P.push(this.removeTileAt(F.x,F.y,!0,R,F.tilemapLayer)),M>-1&&this.putTileAt(M,F.x,F.y,R,F.tilemapLayer)}return P},removeTileAt:function(A,M,R,P,b){return R===void 0&&(R=!0),P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:y.RemoveTileAt(A,M,R,P,b)},removeTileAtWorldXY:function(A,M,R,P,b,F){return R===void 0&&(R=!0),P===void 0&&(P=!0),F=this.getLayer(F),F===null?null:y.RemoveTileAtWorldXY(A,M,R,P,b,F)},renderDebug:function(A,M,R){return R=this.getLayer(R),R===null?null:(this.orientation===d.ORTHOGONAL&&y.RenderDebug(A,M,R),this)},renderDebugFull:function(A,M){for(var R=this.layers,P=0;P<R.length;P++)y.RenderDebug(A,M,R[P]);return this},replaceByIndex:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:(y.ReplaceByIndex(A,M,R,P,b,F,I),this)},setCollision:function(A,M,R,P,b){return M===void 0&&(M=!0),R===void 0&&(R=!0),b===void 0&&(b=!0),P=this.getLayer(P),P===null?null:(y.SetCollision(A,M,R,P,b),this)},setCollisionBetween:function(A,M,R,P,b){return R===void 0&&(R=!0),P===void 0&&(P=!0),b=this.getLayer(b),b===null?null:(y.SetCollisionBetween(A,M,R,P,b),this)},setCollisionByProperty:function(A,M,R,P){return M===void 0&&(M=!0),R===void 0&&(R=!0),P=this.getLayer(P),P===null?null:(y.SetCollisionByProperty(A,M,R,P),this)},setCollisionByExclusion:function(A,M,R,P){return M===void 0&&(M=!0),R===void 0&&(R=!0),P=this.getLayer(P),P===null?null:(y.SetCollisionByExclusion(A,M,R,P),this)},setCollisionFromCollisionGroup:function(A,M,R){return A===void 0&&(A=!0),M===void 0&&(M=!0),R=this.getLayer(R),R===null?null:(y.SetCollisionFromCollisionGroup(A,M,R),this)},setTileIndexCallback:function(A,M,R,P){return P=this.getLayer(P),P===null?null:(y.SetTileIndexCallback(A,M,R,P),this)},setTileLocationCallback:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:(y.SetTileLocationCallback(A,M,R,P,b,F,I),this)},setLayer:function(A){var M=this.getLayerIndex(A);return M!==null&&(this.currentLayerIndex=M),this},setBaseTileSize:function(A,M){this.tileWidth=A,this.tileHeight=M,this.widthInPixels=this.width*A,this.heightInPixels=this.height*M;for(var R=0;R<this.layers.length;R++){this.layers[R].baseTileWidth=A,this.layers[R].baseTileHeight=M;for(var P=this.layers[R].data,b=this.layers[R].width,F=this.layers[R].height,I=0;I<F;I++)for(var L=0;L<b;L++){var D=P[I][L];D!==null&&D.setSize(void 0,void 0,A,M)}}return this},setLayerTileSize:function(A,M,R){if(R=this.getLayer(R),R===null)return this;R.tileWidth=A,R.tileHeight=M;for(var P=R.data,b=R.width,F=R.height,I=0;I<F;I++)for(var L=0;L<b;L++){var D=P[I][L];D!==null&&D.setSize(A,M)}return this},shuffle:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:(y.Shuffle(A,M,R,P,b),this)},swapByIndex:function(A,M,R,P,b,F,I){return I=this.getLayer(I),I===null?null:(y.SwapByIndex(A,M,R,P,b,F,I),this)},tileToWorldX:function(A,M,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldX(A,M,R)},tileToWorldY:function(A,M,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldY(A,M,R)},tileToWorldXY:function(A,M,R,P,b){return b=this.getLayer(b),b===null?null:this._convert.TileToWorldXY(A,M,R,P,b)},getTileCorners:function(A,M,R,P){return P=this.getLayer(P),P===null?null:this._convert.GetTileCorners(A,M,R,P)},weightedRandomize:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:(y.WeightedRandomize(M,R,P,b,A,F),this)},worldToTileX:function(A,M,R,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileX(A,M,R,P)},worldToTileY:function(A,M,R,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileY(A,M,R,P)},worldToTileXY:function(A,M,R,P,b,F){return F=this.getLayer(F),F===null?null:this._convert.WorldToTileXY(A,M,R,P,b,F)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});s.exports=C}),45939:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44603),m=e(31989);a.register("tilemap",function(c){var o=c!==void 0?c:{};return m(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})}),46029:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39429),m=e(31989);a.register("tilemap",function(c,o,u,r,h,d,l){return c===null&&(c=void 0),o===null&&(o=void 0),u===null&&(u=void 0),r===null&&(r=void 0),h===null&&(h=void 0),m(this.scene,c,o,u,r,h,d,l)})}),20442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(78389),c=e(31401),o=e(95643),u=e(81086),r=e(19218),h=e(26099),d=new a({Extends:o,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.Transform,c.Visible,c.ScrollFactor,m,r],initialize:function(p,g,x,y,E,w){o.call(this,p,"TilemapLayer"),this.isTilemap=!0,this.tilemap=g,this.layerIndex=x,this.layer=g.layers[x],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=u.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new h,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(y),this.setAlpha(this.layer.alpha),this.setPosition(E,w),this.setOrigin(0,0),this.setSize(g.tileWidth*this.layer.width,g.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(l){var p=[],g=[],x=this.tilemap;Array.isArray(l)||(l=[l]);for(var y=0;y<l.length;y++){var E=l[y];if(typeof E=="string"&&(E=x.getTileset(E)),E){g.push(E);for(var w=E.firstgid,C=0;C<E.total;C++)p[w+C]=E}}this.gidMap=p,this.tileset=g},setRenderOrder:function(l){var p=["right-down","left-down","right-up","left-up"];return typeof l=="string"&&(l=p.indexOf(l)),l>=0&&l<4&&(this._renderOrder=l),this},calculateFacesAt:function(l,p){return u.CalculateFacesAt(l,p,this.layer),this},calculateFacesWithin:function(l,p,g,x){return u.CalculateFacesWithin(l,p,g,x,this.layer),this},createFromTiles:function(l,p,g,x,y){return u.CreateFromTiles(l,p,g,x,y,this.layer)},cull:function(l){return this.cullCallback(this.layer,l,this.culledTiles,this._renderOrder)},copy:function(l,p,g,x,y,E,w){return u.Copy(l,p,g,x,y,E,w,this.layer),this},fill:function(l,p,g,x,y,E){return u.Fill(l,p,g,x,y,E,this.layer),this},filterTiles:function(l,p,g,x,y,E,w){return u.FilterTiles(l,p,g,x,y,E,w,this.layer)},findByIndex:function(l,p,g){return u.FindByIndex(l,p,g,this.layer)},findTile:function(l,p,g,x,y,E,w){return u.FindTile(l,p,g,x,y,E,w,this.layer)},forEachTile:function(l,p,g,x,y,E,w){return u.ForEachTile(l,p,g,x,y,E,w,this.layer),this},setTint:function(l,p,g,x,y,E){l===void 0&&(l=16777215);var w=function(C){C.tint=l,C.tintFill=!1};return this.forEachTile(w,this,p,g,x,y,E)},setTintFill:function(l,p,g,x,y,E){l===void 0&&(l=16777215);var w=function(C){C.tint=l,C.tintFill=!0};return this.forEachTile(w,this,p,g,x,y,E)},getTileAt:function(l,p,g){return u.GetTileAt(l,p,g,this.layer)},getTileAtWorldXY:function(l,p,g,x){return u.GetTileAtWorldXY(l,p,g,x,this.layer)},getIsoTileAtWorldXY:function(l,p,g,x,y){g===void 0&&(g=!0);var E=this.tempVec;return u.IsometricWorldToTileXY(l,p,!0,E,y,this.layer,g),this.getTileAt(E.x,E.y,x)},getTilesWithin:function(l,p,g,x,y){return u.GetTilesWithin(l,p,g,x,y,this.layer)},getTilesWithinShape:function(l,p,g){return u.GetTilesWithinShape(l,p,g,this.layer)},getTilesWithinWorldXY:function(l,p,g,x,y,E){return u.GetTilesWithinWorldXY(l,p,g,x,y,E,this.layer)},hasTileAt:function(l,p){return u.HasTileAt(l,p,this.layer)},hasTileAtWorldXY:function(l,p,g){return u.HasTileAtWorldXY(l,p,g,this.layer)},putTileAt:function(l,p,g,x){return u.PutTileAt(l,p,g,x,this.layer)},putTileAtWorldXY:function(l,p,g,x,y){return u.PutTileAtWorldXY(l,p,g,x,y,this.layer)},putTilesAt:function(l,p,g,x){return u.PutTilesAt(l,p,g,x,this.layer),this},randomize:function(l,p,g,x,y){return u.Randomize(l,p,g,x,y,this.layer),this},removeTileAt:function(l,p,g,x){return u.RemoveTileAt(l,p,g,x,this.layer)},removeTileAtWorldXY:function(l,p,g,x,y){return u.RemoveTileAtWorldXY(l,p,g,x,y,this.layer)},renderDebug:function(l,p){return u.RenderDebug(l,p,this.layer),this},replaceByIndex:function(l,p,g,x,y,E){return u.ReplaceByIndex(l,p,g,x,y,E,this.layer),this},setSkipCull:function(l){return l===void 0&&(l=!0),this.skipCull=l,this},setCullPadding:function(l,p){return l===void 0&&(l=1),p===void 0&&(p=1),this.cullPaddingX=l,this.cullPaddingY=p,this},setCollision:function(l,p,g,x){return u.SetCollision(l,p,g,this.layer,x),this},setCollisionBetween:function(l,p,g,x){return u.SetCollisionBetween(l,p,g,x,this.layer),this},setCollisionByProperty:function(l,p,g){return u.SetCollisionByProperty(l,p,g,this.layer),this},setCollisionByExclusion:function(l,p,g){return u.SetCollisionByExclusion(l,p,g,this.layer),this},setCollisionFromCollisionGroup:function(l,p){return u.SetCollisionFromCollisionGroup(l,p,this.layer),this},setTileIndexCallback:function(l,p,g){return u.SetTileIndexCallback(l,p,g,this.layer),this},setTileLocationCallback:function(l,p,g,x,y,E){return u.SetTileLocationCallback(l,p,g,x,y,E,this.layer),this},shuffle:function(l,p,g,x){return u.Shuffle(l,p,g,x,this.layer),this},swapByIndex:function(l,p,g,x,y,E){return u.SwapByIndex(l,p,g,x,y,E,this.layer),this},tileToWorldX:function(l,p){return this.tilemap.tileToWorldX(l,p,this)},tileToWorldY:function(l,p){return this.tilemap.tileToWorldY(l,p,this)},tileToWorldXY:function(l,p,g,x){return this.tilemap.tileToWorldXY(l,p,g,x,this)},getTileCorners:function(l,p,g){return this.tilemap.getTileCorners(l,p,g,this)},weightedRandomize:function(l,p,g,x,y){return u.WeightedRandomize(p,g,x,y,l,this.layer),this},worldToTileX:function(l,p,g){return this.tilemap.worldToTileX(l,p,g,this)},worldToTileY:function(l,p,g){return this.tilemap.worldToTileY(l,p,g,this)},worldToTileXY:function(l,p,g,x,y){return this.tilemap.worldToTileXY(l,p,g,x,y,this)},destroy:function(l){l===void 0&&(l=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),l&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],o.prototype.destroy.call(this))}});s.exports=d}),16153:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61340),m=new a,c=new a,o=new a,u=function(r,h,d,l){var p=h.cull(d),g=p.length,x=d.alpha*h.alpha;if(!(g===0||x<=0)){var y=m,E=c,w=o;E.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),y.copyFrom(d.matrix);var C=r.currentContext,A=h.gidMap;C.save(),l?(y.multiplyWithOffset(l,-d.scrollX*h.scrollFactorX,-d.scrollY*h.scrollFactorY),E.e=h.x,E.f=h.y,y.multiply(E,w),w.copyToContext(C)):(E.e-=d.scrollX*h.scrollFactorX,E.f-=d.scrollY*h.scrollFactorY,E.copyToContext(C)),(!r.antialias||h.scaleX>1||h.scaleY>1)&&(C.imageSmoothingEnabled=!1);for(var M=0;M<g;M++){var R=p[M],P=A[R.index];if(P){var b=P.image.getSourceImage(),F=P.getTileTextureCoordinates(R.index),I=P.tileWidth,L=P.tileHeight;if(!(F===null||I===0||L===0)){var D=I*.5,O=L*.5;F.x+=P.tileOffset.x,F.y+=P.tileOffset.y,C.save(),C.translate(R.pixelX+D,R.pixelY+O),R.rotation!==0&&C.rotate(R.rotation),(R.flipX||R.flipY)&&C.scale(R.flipX?-1:1,R.flipY?-1:1),C.globalAlpha=x*R.alpha,C.drawImage(b,F.x,F.y,I,L,-D,-O,I,L),C.restore()}}}C.restore()}};s.exports=u}),19218:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29747),m=a,c=a;m=e(99558),c=e(16153),s.exports={renderWebGL:m,renderCanvas:c}}),99558:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70554),m=function(c,o,u){var r=o.cull(u),h=r.length,d=u.alpha*o.alpha;if(!(h===0||d<=0)){var l=o.gidMap,p=c.pipelines.set(o.pipeline,o),g=a.getTintAppendFloatAlpha,x=o.scrollFactorX,y=o.scrollFactorY,E=o.x,w=o.y,C=o.scaleX,A=o.scaleY;c.pipelines.preBatch(o);for(var M=0;M<h;M++){var R=r[M],P=l[R.index];if(P){var b=P.getTileTextureCoordinates(R.index),F=P.tileWidth,I=P.tileHeight;if(!(!b||F===0||I===0)){var L=F*.5,D=I*.5,O=P.glTexture,z=p.setTexture2D(O,o),W=F,k=I,X=b.x,V=b.y,G=P.tileOffset.x,N=P.tileOffset.y,H=g(R.tint,d*R.alpha);p.batchTexture(o,O,O.width,O.height,E+R.pixelX*C+(L*C-G),w+R.pixelY*A+(D*A-N),F,I,C,A,R.rotation,R.flipX,R.flipY,x,y,L,D,X,V,W,k,H,H,H,H,R.tintFill,0,0,u,null,!0,z,!0)}}}c.pipelines.postBatch(o)}};s.exports=m}),33629:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(26099),c=new a({initialize:function(u,r,h,d,l,p,g,x,y){(h===void 0||h<=0)&&(h=32),(d===void 0||d<=0)&&(d=32),l===void 0&&(l=0),p===void 0&&(p=0),g===void 0&&(g={}),x===void 0&&(x={}),this.name=u,this.firstgid=r,this.tileWidth=h,this.tileHeight=d,this.tileMargin=l,this.tileSpacing=p,this.tileProperties=g,this.tileData=x,this.tileOffset=new m,y!==void 0&&this.tileOffset.set(y.x,y.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(o){return this.containsTileIndex(o)?this.tileProperties[o-this.firstgid]:null},getTileData:function(o){return this.containsTileIndex(o)?this.tileData[o-this.firstgid]:null},getTileCollisionGroup:function(o){var u=this.getTileData(o);return u&&u.objectgroup?u.objectgroup:null},containsTileIndex:function(o){return o>=this.firstgid&&o<this.firstgid+this.total},getTileTextureCoordinates:function(o){return this.containsTileIndex(o)?this.texCoordinates[o-this.firstgid]:null},setImage:function(o){this.image=o;var u=o.get(),r=o.getFrameBounds();return this.glTexture=u.source.glTexture,u.width>r.width||u.height>r.height?this.updateTileData(u.width,u.height):this.updateTileData(r.width,r.height,r.x,r.y),this},setTileSize:function(o,u){return o!==void 0&&(this.tileWidth=o),u!==void 0&&(this.tileHeight=u),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(o,u){return o!==void 0&&(this.tileMargin=o),u!==void 0&&(this.tileSpacing=u),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(o,u,r,h){r===void 0&&(r=0),h===void 0&&(h=0);var d=(u-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),l=(o-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(d%1!==0||l%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),d=Math.floor(d),l=Math.floor(l),this.rows=d,this.columns=l,this.total=d*l,this.texCoordinates.length=0;for(var p=this.tileMargin+r,g=this.tileMargin+h,x=0;x<this.rows;x++){for(var y=0;y<this.columns;y++)this.texCoordinates.push({x:p,y:g}),p+=this.tileWidth+this.tileSpacing;p=this.tileMargin+r,g+=this.tileHeight+this.tileSpacing}return this}});s.exports=c}),72023:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),m=function(c,o,u){var r=a(c,o,!0,u),h=a(c,o-1,!0,u),d=a(c,o+1,!0,u),l=a(c-1,o,!0,u),p=a(c+1,o,!0,u),g=r&&r.collides;return g&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),h&&h.collides&&(g&&(r.faceTop=!1),h.faceBottom=!g),d&&d.collides&&(g&&(r.faceBottom=!1),d.faceTop=!g),l&&l.collides&&(g&&(r.faceLeft=!1),l.faceRight=!g),p&&p.collides&&(g&&(r.faceRight=!1),p.faceLeft=!g),r&&!r.collides&&r.resetFaces(),r};s.exports=m}),42573:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),m=e(7386),c=function(o,u,r,h,d){for(var l=null,p=null,g=null,x=null,y=m(o,u,r,h,null,d),E=0;E<y.length;E++){var w=y[E];w&&(w.collides?(l=a(w.x,w.y-1,!0,d),p=a(w.x,w.y+1,!0,d),g=a(w.x-1,w.y,!0,d),x=a(w.x+1,w.y,!0,d),w.faceTop=!(l&&l.collides),w.faceBottom=!(p&&p.collides),w.faceLeft=!(g&&g.collides),w.faceRight=!(x&&x.collides)):w.resetFaces())}};s.exports=c}),33528:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=new a,c=function(o,u,r,h){var d=r.tilemapLayer,l=d.cullPaddingX,p=d.cullPaddingY,g=d.tilemap.tileToWorldXY(o,u,m,h,d);return g.x>h.worldView.x+d.scaleX*r.tileWidth*(-l-.5)&&g.x<h.worldView.right+d.scaleX*r.tileWidth*(l-.5)&&g.y>h.worldView.y+d.scaleY*r.tileHeight*(-p-1)&&g.y<h.worldView.bottom+d.scaleY*r.tileHeight*(p-.5)};s.exports=c}),1785:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42573),m=e(7386),c=e(62991),o=e(23029),u=function(r,h,d,l,p,g,x,y){x===void 0&&(x=!0);var E=m(r,h,d,l,null,y),w=[];E.forEach(function(F){var I=new o(F.layer,F.index,F.x,F.y,F.width,F.height,F.baseWidth,F.baseHeight);I.copy(F),w.push(I)});for(var C=p-r,A=g-h,M=0;M<w.length;M++){var R=w[M],P=R.x+C,b=R.y+A;c(P,b,y)&&y.data[b][P]&&(R.x=P,R.y=b,R.updatePixelXY(),y.data[b][P]=R)}x&&a(p-1,g-1,d+2,l+2,y),E.length=0,w.length=0};s.exports=u}),78419:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62644),m=e(7386),c=e(27987),o=function(u,r,h,d,l,p){h||(h={}),Array.isArray(u)||(u=[u]);var g=p.tilemapLayer;d||(d=g.scene),l||(l=d.cameras.main);var x=p.width,y=p.height,E=m(0,0,x,y,null,p),w=[],C,A=function(b,F,I){for(var L=0;L<I.length;L++){var D=I[L];b.hasOwnProperty(D)||(b[D]=F[D])}};for(C=0;C<E.length;C++){var M=E[C],R=a(h);if(u.indexOf(M.index)!==-1){var P=g.tileToWorldXY(M.x,M.y,void 0,l,p);R.x=P.x,R.y=P.y,A(R,M,["rotation","flipX","flipY","alpha","visible","tint"]),R.hasOwnProperty("origin")||(R.x+=M.width*.5,R.y+=M.height*.5),R.hasOwnProperty("useSpriteSheet")&&(R.key=M.tileset.image,R.frame=M.index-M.tileset.firstgid),w.push(d.make.sprite(R))}}if(Array.isArray(r))for(C=0;C<u.length;C++)c(u[C],r[C],0,0,x,y,p);else if(r!==null)for(C=0;C<u.length;C++)c(u[C],r,0,0,x,y,p);return w};s.exports=o}),19545:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87841),m=e(63448),c=e(56583),o=new a,u=function(r,h){var d=r.tilemapLayer.tilemap,l=r.tilemapLayer,p=Math.floor(d.tileWidth*l.scaleX),g=Math.floor(d.tileHeight*l.scaleY),x=c(h.worldView.x-l.x,p,0,!0)-l.cullPaddingX,y=m(h.worldView.right-l.x,p,0,!0)+l.cullPaddingX,E=c(h.worldView.y-l.y,g,0,!0)-l.cullPaddingY,w=m(h.worldView.bottom-l.y,g,0,!0)+l.cullPaddingY;return o.setTo(x,E,y-x,w-E)};s.exports=u}),30003:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19545),m=e(32483),c=function(o,u,r,h){r===void 0&&(r=[]),h===void 0&&(h=0),r.length=0;var d=o.tilemapLayer,l=a(o,u);return(d.skipCull||d.scrollFactorX!==1||d.scrollFactorY!==1)&&(l.left=0,l.right=o.width,l.top=0,l.bottom=o.height),m(o,l,h,r),r};s.exports=c}),35137:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=e(42573),c=e(20576),o=function(u,r,h,d,l,p,g){for(var x=g.collideIndexes.indexOf(u)!==-1,y=a(r,h,d,l,null,g),E=0;E<y.length;E++)y[E].index=u,c(y[E],x);p&&m(r-1,h-1,d+2,l+2,g)};s.exports=o}),40253:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=function(c,o,u,r,h,d,l,p){var g=a(u,r,h,d,l,p);return g.filter(c,o)};s.exports=m}),52692:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){a===void 0&&(a=0),m===void 0&&(m=!1);var o=0,u,r,h;if(m){for(r=c.height-1;r>=0;r--)for(u=c.width-1;u>=0;u--)if(h=c.data[r][u],h&&h.index===e){if(o===a)return h;o+=1}}else for(r=0;r<c.height;r++)for(u=0;u<c.width;u++)if(h=c.data[r][u],h&&h.index===e){if(o===a)return h;o+=1}return null};s.exports=T}),66151:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=function(c,o,u,r,h,d,l,p){var g=a(u,r,h,d,l,p);return g.find(c,o)||null};s.exports=m}),97560:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=function(c,o,u,r,h,d,l,p){var g=a(u,r,h,d,l,p);g.forEach(c,o)};s.exports=m}),43305:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),m=e(30003),c=e(9474),o=e(14018),u=e(29747),r=e(54503),h=function(d){return d===a.ORTHOGONAL?m:d===a.HEXAGONAL?c:d===a.STAGGERED?r:d===a.ISOMETRIC?o:u};s.exports=h}),7423:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62991),m=function(c,o,u,r){if(a(c,o,r)){var h=r.data[o][c]||null;return h?h.index===-1?u?h:null:h:null}else return null};s.exports=m}),60540:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7423),m=e(26099),c=new m,o=function(u,r,h,d,l){return l.tilemapLayer.worldToTileXY(u,r,!0,c,d),a(c.x,c.y,h,l)};s.exports=o}),55826:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r){var h=r.baseTileWidth,d=r.baseTileHeight,l=r.tilemapLayer,p=0,g=0;l&&(u||(u=l.scene.cameras.main),p=l.x+u.scrollX*(1-l.scrollFactorX),g=l.y+u.scrollY*(1-l.scrollFactorY),h*=l.scaleX,d*=l.scaleY);var x=p+c*h,y=g+o*d;return[new a(x,y),new a(x+h,y),new a(x+h,y+d),new a(x,y+d)]};s.exports=m}),11758:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),m=e(27229),c=e(29747),o=e(55826),u=function(r){return r===a.ORTHOGONAL?o:r===a.ISOMETRIC?c:r===a.HEXAGONAL?m:(r===a.STAGGERED,c)};s.exports=u}),39167:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),m=e(29747),c=e(97281),o=function(u){return u===a.ORTHOGONAL?c:m};s.exports=o}),62e3:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),m=e(19951),c=e(14127),o=e(29747),u=e(97202),r=e(70326),h=function(d){return d===a.ORTHOGONAL?r:d===a.ISOMETRIC?c:d===a.HEXAGONAL?m:d===a.STAGGERED?u:o};s.exports=h}),5984:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),m=e(29747),c=e(28054),o=e(29650),u=function(r){return r===a.ORTHOGONAL?o:r===a.STAGGERED?c:m};s.exports=u}),7386:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),m=function(c,o,u,r,h,d){c===void 0&&(c=0),o===void 0&&(o=0),u===void 0&&(u=d.width),r===void 0&&(r=d.height),h||(h={});var l=a(h,"isNotEmpty",!1),p=a(h,"isColliding",!1),g=a(h,"hasInterestingFace",!1);c<0&&(u+=c,c=0),o<0&&(r+=o,o=0),c+u>d.width&&(u=Math.max(d.width-c,0)),o+r>d.height&&(r=Math.max(d.height-o,0));for(var x=[],y=o;y<o+r;y++)for(var E=c;E<c+u;E++){var w=d.data[y][E];if(w!==null){if(l&&w.index===-1||p&&!w.collides||g&&!w.hasInterestingFace)continue;x.push(w)}}return x};s.exports=m}),91141:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55738),m=e(7386),c=e(91865),o=e(29747),u=e(26099),r=e(91907),h=function(x,y){return c.RectangleToTriangle(y,x)},d=new u,l=new u,p=new u,g=function(x,y,E,w){if(w.orientation!==r.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(x===void 0)return[];var C=o;x instanceof a.Circle?C=c.CircleToRectangle:x instanceof a.Rectangle?C=c.RectangleToRectangle:x instanceof a.Triangle?C=h:x instanceof a.Line&&(C=c.LineToRectangle),w.tilemapLayer.worldToTileXY(x.left,x.top,!0,l,E);var A=l.x,M=l.y;w.tilemapLayer.worldToTileXY(x.right,x.bottom,!1,p,E);var R=Math.ceil(p.x),P=Math.ceil(p.y),b=Math.max(R-A,1),F=Math.max(P-M,1),I=m(A,M,b,F,y,w),L=w.tileWidth,D=w.tileHeight;w.tilemapLayer&&(L*=w.tilemapLayer.scaleX,D*=w.tilemapLayer.scaleY);for(var O=[],z=new a.Rectangle(0,0,L,D),W=0;W<I.length;W++){var k=I[W];w.tilemapLayer.tileToWorldXY(k.x,k.y,d,E),z.x=d.x,z.y=d.y,C(x,z)&&O.push(k)}return O};s.exports=g}),96523:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=e(26099),c=new m,o=new m,u=function(r,h,d,l,p,g,x){var y=x.tilemapLayer.tilemap._convert.WorldToTileXY;y(r,h,!0,c,g,x);var E=c.x,w=c.y;y(r+d,h+l,!1,o,g,x);var C=Math.ceil(o.x),A=Math.ceil(o.y);return a(E,w,C-E,A-w,p,x)};s.exports=u}),96113:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),m=e(20242),c=e(10095),o=function(u){return u===a.ORTHOGONAL?c:m};s.exports=o}),16926:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),m=e(86625),c=e(96897),o=e(29747),u=e(15108),r=e(85896),h=function(d){return d===a.ORTHOGONAL?r:d===a.ISOMETRIC?c:d===a.HEXAGONAL?m:d===a.STAGGERED?u:o};s.exports=h}),55762:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),m=e(20242),c=e(51900),o=e(63288),u=function(r){return r===a.ORTHOGONAL?o:r===a.STAGGERED?c:m};s.exports=u}),45091:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62991),m=function(c,o,u){if(a(c,o,u)){var r=u.data[o][c];return r!==null&&r.index>-1}else return!1};s.exports=m}),24152:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45091),m=e(26099),c=new m,o=function(u,r,h,d){d.tilemapLayer.worldToTileXY(u,r,!0,c,h);var l=c.x,p=c.y;return a(l,p,d)};s.exports=o}),90454:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63448),m=e(56583),c=function(o,u){var r=o.tilemapLayer.tilemap,h=o.tilemapLayer,d=Math.floor(r.tileWidth*h.scaleX),l=Math.floor(r.tileHeight*h.scaleY),p=o.hexSideLength,g,x,y,E;if(o.staggerAxis==="y"){var w=(l-p)/2+p;g=m(u.worldView.x-h.x,d,0,!0)-h.cullPaddingX,x=a(u.worldView.right-h.x,d,0,!0)+h.cullPaddingX,y=m(u.worldView.y-h.y,w,0,!0)-h.cullPaddingY,E=a(u.worldView.bottom-h.y,w,0,!0)+h.cullPaddingY}else{var C=(d-p)/2+p;g=m(u.worldView.x-h.x,C,0,!0)-h.cullPaddingX,x=a(u.worldView.right-h.x,C,0,!0)+h.cullPaddingX,y=m(u.worldView.y-h.y,l,0,!0)-h.cullPaddingY,E=a(u.worldView.bottom-h.y,l,0,!0)+h.cullPaddingY}return{left:g,right:x,top:y,bottom:E}};s.exports=c}),9474:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90454),m=e(32483),c=function(o,u,r,h){r===void 0&&(r=[]),h===void 0&&(h=0),r.length=0;var d=o.tilemapLayer,l=a(o,u);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(l.left=0,l.right=o.width,l.top=0,l.bottom=o.height),m(o,l,h,r),r};s.exports=c}),27229:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19951),m=e(26099),c=new m,o=function(u,r,h,d){var l=d.baseTileWidth,p=d.baseTileHeight,g=d.tilemapLayer;g&&(l*=g.scaleX,p*=g.scaleY);var x=a(u,r,c,h,d),y=[],E=.5773502691896257,w,C;d.staggerAxis==="y"?(w=E*l,C=p/2):(w=l/2,C=E*p);for(var A=0;A<6;A++){var M=2*Math.PI*(.5-A)/6;y.push(new m(x.x+w*Math.cos(M),x.y+C*Math.sin(M)))}return y};s.exports=o}),19951:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r,h){u||(u=new a);var d=h.baseTileWidth,l=h.baseTileHeight,p=h.tilemapLayer,g=0,x=0;p&&(r||(r=p.scene.cameras.main),g=p.x+r.scrollX*(1-p.scrollFactorX),x=p.y+r.scrollY*(1-p.scrollFactorY),d*=p.scaleX,l*=p.scaleY);var y=d/2,E=l/2,w,C,A=h.staggerAxis,M=h.staggerIndex;return A==="y"?(w=g+d*c+d,C=x+1.5*o*E+E,o%2===0&&(M==="odd"?w-=y:w+=y)):A==="x"&&M==="odd"&&(w=g+1.5*c*y+y,C=x+l*c+l,c%2===0&&(M==="odd"?C-=E:C+=E)),u.set(w,C)};s.exports=m}),86625:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r,h,d){r||(r=new a);var l=d.baseTileWidth,p=d.baseTileHeight,g=d.tilemapLayer;g&&(h||(h=g.scene.cameras.main),c=c-(g.x+h.scrollX*(1-g.scrollFactorX)),o=o-(g.y+h.scrollY*(1-g.scrollFactorY)),l*=g.scaleX,p*=g.scaleY);var x=.5773502691896257,y=-.3333333333333333,E=0,w=.6666666666666666,C=l/2,A=p/2,M,R,P,b,F;d.staggerAxis==="y"?(M=(c-C)/(x*l),R=(o-A)/A,P=x*M+y*R,b=E*M+w*R):(M=(c-C)/C,R=(o-A)/(x*p),P=y*M+x*R,b=w*M+E*R),F=-P-b;var I=Math.round(P),L=Math.round(b),D=Math.round(F),O=Math.abs(I-P),z=Math.abs(L-b),W=Math.abs(D-F);O>z&&O>W?I=-L-D:z>W&&(L=-I-D);var k,X=L;return d.staggerIndex==="odd"?k=X%2===0?L/2+I:L/2+I-.5:k=X%2===0?L/2+I:L/2+I+.5,r.set(k,X)};s.exports=m}),62991:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e>=0&&e<m.width&&a>=0&&a<m.height};s.exports=T}),14018:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33528),m=function(c,o,u,r){u===void 0&&(u=[]),r===void 0&&(r=0),u.length=0;var h=c.tilemapLayer,d=c.data,l=c.width,p=c.height,g=h.skipCull,x=0,y=l,E=0,w=p,C,A,M;if(r===0)for(A=E;A<w;A++)for(C=x;C<y;C++)M=d[A][C],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!g&&!a(C,A,c,o)||u.push(M));else if(r===1)for(A=E;A<w;A++)for(C=y;C>=x;C--)M=d[A][C],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!g&&!a(C,A,c,o)||u.push(M));else if(r===2)for(A=w;A>=E;A--)for(C=x;C<y;C++)M=d[A][C],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!g&&!a(C,A,c,o)||u.push(M));else if(r===3)for(A=w;A>=E;A--)for(C=y;C>=x;C--)M=d[A][C],!(!M||M.index===-1||!M.visible||M.alpha===0)&&(!g&&!a(C,A,c,o)||u.push(M));return h.tilesDrawn=u.length,h.tilesTotal=l*p,u};s.exports=m}),14127:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r,h){u||(u=new a);var d=h.baseTileWidth,l=h.baseTileHeight,p=h.tilemapLayer,g=0,x=0;p&&(r||(r=p.scene.cameras.main),g=p.x+r.scrollX*(1-p.scrollFactorX),d*=p.scaleX,x=p.y+r.scrollY*(1-p.scrollFactorY),l*=p.scaleY);var y=g+(c-o)*(d/2),E=x+(c+o)*(l/2);return u.set(y,E)};s.exports=m}),96897:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r,h,d,l){r||(r=new a);var p=d.baseTileWidth,g=d.baseTileHeight,x=d.tilemapLayer;x&&(h||(h=x.scene.cameras.main),o=o-(x.y+h.scrollY*(1-x.scrollFactorY)),g*=x.scaleY,c=c-(x.x+h.scrollX*(1-x.scrollFactorX)),p*=x.scaleX);var y=p/2,E=g/2;c=c-y,l||(o=o-g);var w=.5*(c/y+o/E),C=.5*(-c/y+o/E);return u&&(w=Math.floor(w),C=Math.floor(C)),r.set(w,C)};s.exports=m}),71558:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23029),m=e(62991),c=e(72023),o=e(20576),u=function(r,h,d,l,p){if(l===void 0&&(l=!0),!m(h,d,p))return null;var g,x=p.data[d][h],y=x&&x.collides;r instanceof a?(p.data[d][h]===null&&(p.data[d][h]=new a(p,r.index,h,d,p.tileWidth,p.tileHeight)),p.data[d][h].copy(r)):(g=r,p.data[d][h]===null?p.data[d][h]=new a(p,g,h,d,p.tileWidth,p.tileHeight):p.data[d][h].index=g);var E=p.data[d][h],w=p.collideIndexes.indexOf(E.index)!==-1;if(g=r instanceof a?r.index:r,g===-1)E.width=p.tileWidth,E.height=p.tileHeight;else{var C=p.tilemapLayer.tilemap,A=C.tiles,M=A[g][2],R=C.tilesets[M];E.width=R.tileWidth,E.height=R.tileHeight}return o(E,w),l&&y!==E.collides&&c(h,d,p),E};s.exports=u}),26303:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71558),m=e(26099),c=new m,o=function(u,r,h,d,l,p){return p.tilemapLayer.worldToTileXY(r,h,!0,c,l,p),a(u,c.x,c.y,d,p)};s.exports=o}),14051:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42573),m=e(71558),c=function(o,u,r,h,d){if(h===void 0&&(h=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var l=o.length,p=o[0].length,g=0;g<l;g++)for(var x=0;x<p;x++){var y=o[g][x];m(y,u+x,r+g,!1,d)}h&&a(u-1,r-1,p+2,l+2,d)};s.exports=c}),77389:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=e(26546),c=function(o,u,r,h,d,l){var p,g=a(o,u,r,h,{},l);if(!d)for(d=[],p=0;p<g.length;p++)d.indexOf(g[p].index)===-1&&d.push(g[p].index);for(p=0;p<g.length;p++)g[p].index=m(d)};s.exports=c}),63557:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23029),m=e(62991),c=e(72023),o=function(u,r,h,d,l){if(h===void 0&&(h=!0),d===void 0&&(d=!0),!m(u,r,l))return null;var p=l.data[r][u];if(p)l.data[r][u]=h?null:new a(l,-1,u,r,l.tileWidth,l.tileHeight);else return null;return d&&p&&p.collides&&c(u,r,l),p};s.exports=o}),94178:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63557),m=e(26099),c=new m,o=function(u,r,h,d,l,p){return p.tilemapLayer.worldToTileXY(u,r,!0,c,l,p),a(c.x,c.y,h,d,p)};s.exports=o}),15533:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=e(3956),c=new m(105,210,231,150),o=new m(243,134,48,200),u=new m(40,39,37,150),r=function(h,d,l){d===void 0&&(d={});var p=d.tileColor!==void 0?d.tileColor:c,g=d.collidingTileColor!==void 0?d.collidingTileColor:o,x=d.faceColor!==void 0?d.faceColor:u,y=a(0,0,l.width,l.height,null,l);h.translateCanvas(l.tilemapLayer.x,l.tilemapLayer.y),h.scaleCanvas(l.tilemapLayer.scaleX,l.tilemapLayer.scaleY);for(var E=0;E<y.length;E++){var w=y[E],C=w.tileset?w.tileset.tileOffset:{x:0,y:0},A=w.width,M=w.height,R=w.pixelX-C.x,P=w.pixelY-C.y,b=w.collides?g:p;b!==null&&(h.fillStyle(b.color,b.alpha/255),h.fillRect(R,P,A,M)),R+=1,P+=1,A-=2,M-=2,x!==null&&(h.lineStyle(1,x.color,x.alpha/255),w.faceTop&&h.lineBetween(R,P,R+A,P),w.faceRight&&h.lineBetween(R+A,P,R+A,P+M),w.faceBottom&&h.lineBetween(R,P+M,R+A,P+M),w.faceLeft&&h.lineBetween(R,P,R,P+M))}};s.exports=r}),27987:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=function(c,o,u,r,h,d,l){for(var p=a(u,r,h,d,null,l),g=0;g<p.length;g++)p[g]&&p[g].index===c&&(p[g].index=o)};s.exports=m}),32483:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=e.data,u=e.width,r=e.height,h=e.tilemapLayer,d=Math.max(0,a.left),l=Math.min(u,a.right),p=Math.max(0,a.top),g=Math.min(r,a.bottom),x,y,E;if(m===0)for(y=p;y<g;y++)for(x=d;o[y]&&x<l;x++)E=o[y][x],!(!E||E.index===-1||!E.visible||E.alpha===0)&&c.push(E);else if(m===1)for(y=p;y<g;y++)for(x=l;o[y]&&x>=d;x--)E=o[y][x],!(!E||E.index===-1||!E.visible||E.alpha===0)&&c.push(E);else if(m===2)for(y=g;y>=p;y--)for(x=d;o[y]&&x<l;x++)E=o[y][x],!(!E||E.index===-1||!E.visible||E.alpha===0)&&c.push(E);else if(m===3)for(y=g;y>=p;y--)for(x=l;o[y]&&x>=d;x--)E=o[y][x],!(!E||E.index===-1||!E.visible||E.alpha===0)&&c.push(E);return h.tilesDrawn=c.length,h.tilesTotal=u*r,c};s.exports=T}),57068:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),m=e(42573),c=e(9589),o=function(u,r,h,d,l){r===void 0&&(r=!0),h===void 0&&(h=!0),l===void 0&&(l=!0),Array.isArray(u)||(u=[u]);for(var p=0;p<u.length;p++)c(u[p],r,d);if(l)for(var g=0;g<d.height;g++)for(var x=0;x<d.width;x++){var y=d.data[g][x];y&&u.indexOf(y.index)!==-1&&a(y,r)}h&&m(0,0,d.width,d.height,d)};s.exports=o}),37266:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),m=e(42573),c=e(9589),o=function(u,r,h,d,l,p){if(h===void 0&&(h=!0),d===void 0&&(d=!0),p===void 0&&(p=!0),!(u>r)){for(var g=u;g<=r;g++)c(g,h,l);if(p)for(var x=0;x<l.height;x++)for(var y=0;y<l.width;y++){var E=l.data[x][y];E&&E.index>=u&&E.index<=r&&a(E,h)}d&&m(0,0,l.width,l.height,l)}};s.exports=o}),75661:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),m=e(42573),c=e(9589),o=function(u,r,h,d){r===void 0&&(r=!0),h===void 0&&(h=!0),Array.isArray(u)||(u=[u]);for(var l=0;l<d.height;l++)for(var p=0;p<d.width;p++){var g=d.data[l][p];g&&u.indexOf(g.index)===-1&&(a(g,r),c(g.index,r,d))}h&&m(0,0,d.width,d.height,d)};s.exports=o}),64740:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),m=e(42573),c=e(97022),o=function(u,r,h,d){r===void 0&&(r=!0),h===void 0&&(h=!0);for(var l=0;l<d.height;l++)for(var p=0;p<d.width;p++){var g=d.data[l][p];if(g){for(var x in u)if(c(g.properties,x)){var y=u[x];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++)g.properties[x]===y[E]&&a(g,r)}}}h&&m(0,0,d.width,d.height,d)};s.exports=o}),63307:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20576),m=e(42573),c=function(o,u,r){o===void 0&&(o=!0),u===void 0&&(u=!0);for(var h=0;h<r.height;h++)for(var d=0;d<r.width;d++){var l=r.data[h][d];if(l){var p=l.getCollisionGroup();p&&p.objects&&p.objects.length>0&&a(l,o)}}u&&m(0,0,r.width,r.height,r)};s.exports=c}),9589:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=m.collideIndexes.indexOf(e);a&&c===-1?m.collideIndexes.push(e):!a&&c!==-1&&m.collideIndexes.splice(c,1)};s.exports=T}),20576:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};s.exports=T}),79583:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){if(typeof e=="number")c.callbacks[e]=a!==null?{callback:a,callbackContext:m}:void 0;else for(var o=0,u=e.length;o<u;o++)c.callbacks[e[o]]=a!==null?{callback:a,callbackContext:m}:void 0};s.exports=T}),93254:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=function(c,o,u,r,h,d,l){for(var p=a(c,o,u,r,null,l),g=0;g<p.length;g++)p[g].setCollisionCallback(h,d)};s.exports=m}),32903:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=e(33680),c=function(o,u,r,h,d){var l=a(o,u,r,h,null,d),p=l.map(function(x){return x.index});m(p);for(var g=0;g<l.length;g++)l[g].index=p[g]};s.exports=c}),61325:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63448),m=e(56583),c=function(o,u){var r=o.tilemapLayer.tilemap,h=o.tilemapLayer,d=Math.floor(r.tileWidth*h.scaleX),l=Math.floor(r.tileHeight*h.scaleY),p=m(u.worldView.x-h.x,d,0,!0)-h.cullPaddingX,g=a(u.worldView.right-h.x,d,0,!0)+h.cullPaddingX,x=m(u.worldView.y-h.y,l/2,0,!0)-h.cullPaddingY,y=a(u.worldView.bottom-h.y,l/2,0,!0)+h.cullPaddingY;return{left:p,right:g,top:x,bottom:y}};s.exports=c}),54503:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61325),m=e(32483),c=function(o,u,r,h){r===void 0&&(r=[]),h===void 0&&(h=0),r.length=0;var d=o.tilemapLayer,l=a(o,u);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(l.left=0,l.right=o.width,l.top=0,l.bottom=o.height),m(o,l,h,r),r};s.exports=c}),97202:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r,h){u||(u=new a);var d=h.baseTileWidth,l=h.baseTileHeight,p=h.tilemapLayer,g=0,x=0;p&&(r||(r=p.scene.cameras.main),g=p.x+r.scrollX*(1-p.scrollFactorX),d*=p.scaleX,x=p.y+r.scrollY*(1-p.scrollFactorY),l*=p.scaleY);var y=g+c*d+o%2*(d/2),E=x+o*(l/2);return u.set(y,E)};s.exports=m}),28054:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=m.baseTileHeight,o=m.tilemapLayer,u=0;return o&&(a===void 0&&(a=o.scene.cameras.main),u=o.y+a.scrollY*(1-o.scrollFactorY),c*=o.scaleY),u+e*(c/2)+c};s.exports=T}),15108:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r,h,d){r||(r=new a);var l=d.baseTileWidth,p=d.baseTileHeight,g=d.tilemapLayer;g&&(h||(h=g.scene.cameras.main),o=o-(g.y+h.scrollY*(1-g.scrollFactorY)),p*=g.scaleY,c=c-(g.x+h.scrollX*(1-g.scrollFactorX)),l*=g.scaleX);var x=u?Math.floor(o/(p/2)):o/(p/2),y=u?Math.floor((c+x%2*.5*l)/l):(c+x%2*.5*l)/l;return r.set(y,x)};s.exports=m}),51900:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=c.baseTileHeight,u=c.tilemapLayer;return u&&(m||(m=u.scene.cameras.main),e=e-(u.y+m.scrollY*(1-u.scrollFactorY)),o*=u.scaleY),a?Math.floor(e/(o/2)):e/(o/2)};s.exports=T}),86560:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=function(c,o,u,r,h,d,l){for(var p=a(u,r,h,d,null,l),g=0;g<p.length;g++)p[g]&&(p[g].index===c?p[g].index=o:p[g].index===o&&(p[g].index=c))};s.exports=m}),97281:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=m.baseTileWidth,o=m.tilemapLayer,u=0;return o&&(a||(a=o.scene.cameras.main),u=o.x+a.scrollX*(1-o.scrollFactorX),c*=o.scaleX),u+e*c};s.exports=T}),70326:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97281),m=e(29650),c=e(26099),o=function(u,r,h,d,l){return h||(h=new c(0,0)),h.x=a(u,d,l),h.y=m(r,d,l),h};s.exports=o}),29650:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=m.baseTileHeight,o=m.tilemapLayer,u=0;return o&&(a||(a=o.scene.cameras.main),u=o.y+a.scrollY*(1-o.scrollFactorY),c*=o.scaleY),u+e*c};s.exports=T}),77366:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(7386),m=e(75508),c=function(o,u,r,h,d,l){if(d){var p,g=a(o,u,r,h,null,l),x=0;for(p=0;p<d.length;p++)x+=d[p].weight;if(!(x<=0))for(p=0;p<g.length;p++){for(var y=m.RND.frac()*x,E=0,w=-1,C=0;C<d.length;C++)if(E+=d[C].weight,y<=E){var A=d[C].index;w=Array.isArray(A)?A[Math.floor(m.RND.frac()*A.length)]:A;break}g[p].index=w}}};s.exports=c}),10095:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85896),m=e(26099),c=new m,o=function(u,r,h,d){return a(u,0,r,c,h,d),c.x};s.exports=o}),85896:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26099),m=function(c,o,u,r,h,d){u===void 0&&(u=!0),r||(r=new a);var l=d.baseTileWidth,p=d.baseTileHeight,g=d.tilemapLayer;g&&(h||(h=g.scene.cameras.main),c=c-(g.x+h.scrollX*(1-g.scrollFactorX)),o=o-(g.y+h.scrollY*(1-g.scrollFactorY)),l*=g.scaleX,p*=g.scaleY);var x=c/l,y=o/p;return u&&(x=Math.floor(x),y=Math.floor(y)),r.set(x,y)};s.exports=m}),63288:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85896),m=e(26099),c=new m,o=function(u,r,h,d){return a(0,u,r,c,h,d),c.y};s.exports=o}),81086:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CalculateFacesAt:e(72023),CalculateFacesWithin:e(42573),CheckIsoBounds:e(33528),Copy:e(1785),CreateFromTiles:e(78419),CullBounds:e(19545),CullTiles:e(30003),Fill:e(35137),FilterTiles:e(40253),FindByIndex:e(52692),FindTile:e(66151),ForEachTile:e(97560),GetCullTilesFunction:e(43305),GetTileAt:e(7423),GetTileAtWorldXY:e(60540),GetTileCorners:e(55826),GetTileCornersFunction:e(11758),GetTilesWithin:e(7386),GetTilesWithinShape:e(91141),GetTilesWithinWorldXY:e(96523),GetTileToWorldXFunction:e(39167),GetTileToWorldXYFunction:e(62e3),GetTileToWorldYFunction:e(5984),GetWorldToTileXFunction:e(96113),GetWorldToTileXYFunction:e(16926),GetWorldToTileYFunction:e(55762),HasTileAt:e(45091),HasTileAtWorldXY:e(24152),HexagonalCullBounds:e(90454),HexagonalCullTiles:e(9474),HexagonalGetTileCorners:e(27229),HexagonalTileToWorldXY:e(19951),HexagonalWorldToTileXY:e(86625),IsInLayerBounds:e(62991),IsometricCullTiles:e(14018),IsometricTileToWorldXY:e(14127),IsometricWorldToTileXY:e(96897),PutTileAt:e(71558),PutTileAtWorldXY:e(26303),PutTilesAt:e(14051),Randomize:e(77389),RemoveTileAt:e(63557),RemoveTileAtWorldXY:e(94178),RenderDebug:e(15533),ReplaceByIndex:e(27987),RunCull:e(32483),SetCollision:e(57068),SetCollisionBetween:e(37266),SetCollisionByExclusion:e(75661),SetCollisionByProperty:e(64740),SetCollisionFromCollisionGroup:e(63307),SetLayerCollisionIndex:e(9589),SetTileCollision:e(20576),SetTileIndexCallback:e(79583),SetTileLocationCallback:e(93254),Shuffle:e(32903),StaggeredCullBounds:e(61325),StaggeredCullTiles:e(54503),StaggeredTileToWorldXY:e(97202),StaggeredTileToWorldY:e(28054),StaggeredWorldToTileXY:e(15108),StaggeredWorldToTileY:e(51900),SwapByIndex:e(86560),TileToWorldX:e(97281),TileToWorldXY:e(70326),TileToWorldY:e(29650),WeightedRandomize:e(77366),WorldToTileX:e(10095),WorldToTileXY:e(85896),WorldToTileY:e(63288)}}),91907:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}}),21829:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ORIENTATION:e(91907)};s.exports=a}),62501:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),m=e(21829),c={Components:e(81086),Parsers:e(57442),Formats:e(80341),ImageCollection:e(16536),ParseToTilemap:e(31989),Tile:e(23029),Tilemap:e(49075),TilemapCreator:e(45939),TilemapFactory:e(46029),Tileset:e(33629),TilemapLayer:e(20442),Orientation:e(91907),LayerData:e(14977),MapData:e(87010),ObjectLayer:e(48700)};c=a(!1,c,m.ORIENTATION),s.exports=c}),14977:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(91907),c=e(95540),o=new a({initialize:function(r){r===void 0&&(r={}),this.name=c(r,"name","layer"),this.id=c(r,"id",0),this.x=c(r,"x",0),this.y=c(r,"y",0),this.width=c(r,"width",0),this.height=c(r,"height",0),this.tileWidth=c(r,"tileWidth",0),this.tileHeight=c(r,"tileHeight",0),this.baseTileWidth=c(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=c(r,"baseTileHeight",this.tileHeight),this.orientation=c(r,"orientation",m.ORTHOGONAL),this.widthInPixels=c(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=c(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=c(r,"alpha",1),this.visible=c(r,"visible",!0),this.properties=c(r,"properties",[]),this.indexes=c(r,"indexes",[]),this.collideIndexes=c(r,"collideIndexes",[]),this.callbacks=c(r,"callbacks",[]),this.bodies=c(r,"bodies",[]),this.data=c(r,"data",[]),this.tilemapLayer=c(r,"tilemapLayer",null),this.hexSideLength=c(r,"hexSideLength",0),this.staggerAxis=c(r,"staggerAxis","y"),this.staggerIndex=c(r,"staggerIndex","odd")}});s.exports=o}),87010:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(91907),c=e(95540),o=new a({initialize:function(r){r===void 0&&(r={}),this.name=c(r,"name","map"),this.width=c(r,"width",0),this.height=c(r,"height",0),this.infinite=c(r,"infinite",!1),this.tileWidth=c(r,"tileWidth",0),this.tileHeight=c(r,"tileHeight",0),this.widthInPixels=c(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=c(r,"heightInPixels",this.height*this.tileHeight),this.format=c(r,"format",null),this.orientation=c(r,"orientation",m.ORTHOGONAL),this.renderOrder=c(r,"renderOrder","right-down"),this.version=c(r,"version","1"),this.properties=c(r,"properties",{}),this.layers=c(r,"layers",[]),this.images=c(r,"images",[]),this.objects=c(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=c(r,"collision",{}),this.tilesets=c(r,"tilesets",[]),this.imageCollections=c(r,"imageCollections",[]),this.tiles=c(r,"tiles",[]),this.hexSideLength=c(r,"hexSideLength",0),this.staggerAxis=c(r,"staggerAxis","y"),this.staggerIndex=c(r,"staggerIndex","odd")}});s.exports=o}),48700:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=new a({initialize:function(u){u===void 0&&(u={}),this.name=m(u,"name","object layer"),this.id=m(u,"id",0),this.opacity=m(u,"opacity",1),this.properties=m(u,"properties",{}),this.propertyTypes=m(u,"propertytypes",{}),this.type=m(u,"type","objectgroup"),this.visible=m(u,"visible",!0),this.objects=m(u,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});s.exports=c}),6641:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91907),m=function(c){return c=c.toLowerCase(),c==="isometric"?a.ISOMETRIC:c==="staggered"?a.STAGGERED:c==="hexagonal"?a.HEXAGONAL:a.ORTHOGONAL};s.exports=m}),46177:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),m=e(2342),c=e(82593),o=e(46594),u=e(87021),r=function(h,d,l,p,g,x){var y;switch(d){case a.ARRAY_2D:y=m(h,l,p,g,x);break;case a.CSV:y=c(h,l,p,g,x);break;case a.TILED_JSON:y=o(h,l,x);break;case a.WELTMEISTER:y=u(h,l,x);break;default:console.warn("Unrecognized tilemap data format: "+d),y=null}return y};s.exports=r}),2342:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),m=e(14977),c=e(87010),o=e(23029),u=function(r,h,d,l,p){for(var g=new m({tileWidth:d,tileHeight:l}),x=new c({name:r,tileWidth:d,tileHeight:l,format:a.ARRAY_2D,layers:[g]}),y=[],E=h.length,w=0,C=0;C<h.length;C++){y[C]=[];for(var A=h[C],M=0;M<A.length;M++){var R=parseInt(A[M],10);isNaN(R)||R===-1?y[C][M]=p?null:new o(g,-1,M,C,d,l):y[C][M]=new o(g,R,M,C,d,l)}w===0&&(w=A.length)}return x.width=g.width=w,x.height=g.height=E,x.widthInPixels=g.widthInPixels=w*d,x.heightInPixels=g.heightInPixels=E*l,g.data=y,x};s.exports=u}),82593:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),m=e(2342),c=function(o,u,r,h,d){var l=u.trim().split(`
`).map(function(g){return g.split(",")}),p=m(o,l,r,h,d);return p.format=a.CSV,p};s.exports=c}),6656:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14977),m=e(23029),c=function(o,u){for(var r=[],h=0;h<o.layer.length;h++){for(var d=o.layer[h],l=new a({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:d.visible===1}),p=[],g=[],x=0;x<d.data.length;x++){for(var y=0;y<d.data[x].length;y++){var E=d.data[x][y]-1,w;E>-1?w=new m(l,E,y,x,d.tilesize,d.tilesize):w=u?null:new m(l,-1,y,x,d.tilesize,d.tilesize),p.push(w)}g.push(p),p=[]}l.data=g,r.push(l)}return r};s.exports=c}),96483:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),m=function(c){for(var o=[],u=[],r=0;r<c.layer.length;r++){var h=c.layer[r],d=h.tilesetName;d!==""&&u.indexOf(d)===-1&&(u.push(d),o.push(new a(d,0,h.tilesize,h.tilesize,0,0)))}return o};s.exports=m}),87021:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(80341),m=e(87010),c=e(6656),o=e(96483),u=function(r,h,d){if(h.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var l=0,p=0,g=0;g<h.layer.length;g++)h.layer[g].width>l&&(l=h.layer[g].width),h.layer[g].height>p&&(p=h.layer[g].height);var x=new m({width:l,height:p,name:r,tileWidth:h.layer[0].tilesize,tileHeight:h.layer[0].tilesize,format:a.WELTMEISTER});return x.layers=c(h,d),x.tilesets=o(h),x};s.exports=u}),52833:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ParseTileLayers:e(6656),ParseTilesets:e(96483),ParseWeltmeister:e(87021)}}),57442:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={FromOrientationString:e(6641),Parse:e(46177),Parse2DArray:e(2342),ParseCSV:e(82593),Impact:e(52833),Tiled:e(96761)}}),51233:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79291),m=function(c){for(var o,u,r,h,d,l=0;l<c.layers.length;l++){o=c.layers[l],h=null;for(var p=0;p<o.data.length;p++){d=o.data[p];for(var g=0;g<d.length;g++)u=d[g],!(u===null||u.index<0)&&(r=c.tiles[u.index][2],h=c.tilesets[r],u.width=h.tileWidth,u.height=h.tileHeight,h.tileProperties&&h.tileProperties[u.index-h.firstgid]&&(u.properties=a(u.properties,h.tileProperties[u.index-h.firstgid])))}}};s.exports=m}),41868:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=window.atob(e),m=a.length,c=new Array(m/4),o=0;o<m;o+=4)c[o/4]=(a.charCodeAt(o)|a.charCodeAt(o+1)<<8|a.charCodeAt(o+2)<<16|a.charCodeAt(o+3)<<24)>>>0;return c};s.exports=T}),84101:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),m=function(c){var o,u,r=[];for(o=0;o<c.imageCollections.length;o++)for(var h=c.imageCollections[o],d=h.images,l=0;l<d.length;l++){var p=d[l],g={x:0,y:p.height-c.tileHeight};u=new a(p.image,p.gid,p.width,p.height,0,0,void 0,void 0,g),u.updateTileData(p.width,p.height),c.tilesets.push(u)}for(o=0;o<c.tilesets.length;o++){u=c.tilesets[o];for(var x=u.tileMargin,y=u.tileMargin,E=0,w=0,C=0,A=u.firstgid;A<u.firstgid+u.total&&(r[A]=[x,y,o],x+=u.tileWidth+u.tileSpacing,E++,!(E===u.total||(w++,w===u.columns&&(x=u.tileMargin,y+=u.tileHeight+u.tileSpacing,w=0,C++,C===u.rows))));A++);}return r};s.exports=m}),79677:((s,T,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),m=function(c,o,u){if(!o)return{i:0,layers:c.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=o.x+a(o,"startx",0)*c.tilewidth+a(o,"offsetx",0),h=o.y+a(o,"starty",0)*c.tileheight+a(o,"offsety",0);return{i:0,layers:o.layers,name:u.name+o.name+"/",opacity:u.opacity*o.opacity,visible:u.visible&&o.visible,x:u.x+r,y:u.y+h}};s.exports=m}),29920:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=2147483648,e=1073741824,a=536870912,m=function(c){var o=!!(c&T),u=!!(c&e),r=!!(c&a);c=c&536870911;var h=0,d=!1;return o&&u&&r?(h=Math.PI/2,d=!0):o&&u&&!r?(h=Math.PI,d=!1):o&&!u&&r?(h=Math.PI/2,d=!1):o&&!u&&!r?(h=0,d=!0):!o&&u&&r?(h=3*Math.PI/2,d=!1):!o&&u&&!r?(h=Math.PI,d=!0):!o&&!u&&r?(h=3*Math.PI/2,d=!0):!o&&!u&&!r&&(h=0,d=!1),{gid:c,flippedHorizontal:o,flippedVertical:u,flippedAntiDiagonal:r,rotation:h,flipped:d}};s.exports=m}),12635:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),m=e(79677),c=function(o){for(var u=[],r=[],h=m(o);h.i<h.layers.length||r.length>0;){if(h.i>=h.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=r.pop();continue}var d=h.layers[h.i];if(h.i++,d.type!=="imagelayer"){if(d.type==="group"){var l=m(o,d,h);r.push(h),h=l}continue}var p=a(d,"offsetx",0)+a(d,"startx",0),g=a(d,"offsety",0)+a(d,"starty",0);u.push({name:h.name+d.name,image:d.image,x:h.x+p+d.x,y:h.y+g+d.y,alpha:h.opacity*d.opacity,visible:h.visible&&d.visible,properties:a(d,"properties",{})})}return u};s.exports=c}),46594:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(51233),m=e(84101),c=e(91907),o=e(62644),u=e(80341),r=e(6641),h=e(87010),d=e(12635),l=e(22611),p=e(28200),g=e(24619),x=function(y,E,w){var C=o(E),A=new h({width:C.width,height:C.height,name:y,tileWidth:C.tilewidth,tileHeight:C.tileheight,orientation:r(C.orientation),format:u.TILED_JSON,version:C.version,properties:C.properties,renderOrder:C.renderorder,infinite:C.infinite});if(A.orientation===c.HEXAGONAL)if(A.hexSideLength=C.hexsidelength,A.staggerAxis=C.staggeraxis,A.staggerIndex=C.staggerindex,A.staggerAxis==="y"){var M=(A.tileHeight-A.hexSideLength)/2;A.widthInPixels=A.tileWidth*(A.width+.5),A.heightInPixels=A.height*(A.hexSideLength+M)+M}else{var R=(A.tileWidth-A.hexSideLength)/2;A.widthInPixels=A.width*(A.hexSideLength+R)+R,A.heightInPixels=A.tileHeight*(A.height+.5)}A.layers=p(C,w),A.images=d(C);var P=g(C);return A.tilesets=P.tilesets,A.imageCollections=P.imageCollections,A.objects=l(C),A.tiles=m(A),a(A),A};s.exports=x}),52205:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18254),m=e(29920),c=function(r){return{x:r.x,y:r.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],u=function(r,h,d){h===void 0&&(h=0),d===void 0&&(d=0);var l=a(r,o);if(l.x+=h,l.y+=d,r.gid){var p=m(r.gid);l.gid=p.gid,l.flippedHorizontal=p.flippedHorizontal,l.flippedVertical=p.flippedVertical,l.flippedAntiDiagonal=p.flippedAntiDiagonal}else r.polyline?l.polyline=r.polyline.map(c):r.polygon?l.polygon=r.polygon.map(c):r.ellipse?l.ellipse=r.ellipse:r.text?l.text=r.text:r.point?l.point=!0:l.rectangle=!0;return l};s.exports=u}),22611:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95540),m=e(52205),c=e(48700),o=e(79677),u=function(r){for(var h=[],d=[],l=o(r);l.i<l.layers.length||d.length>0;){if(l.i>=l.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=d.pop();continue}var p=l.layers[l.i];if(l.i++,p.opacity*=l.opacity,p.visible=l.visible&&p.visible,p.type!=="objectgroup"){if(p.type==="group"){var g=o(r,p,l);d.push(l),l=g}continue}p.name=l.name+p.name;for(var x=l.x+a(p,"startx",0)+a(p,"offsetx",0),y=l.y+a(p,"starty",0)+a(p,"offsety",0),E=[],w=0;w<p.objects.length;w++){var C=m(p.objects[w],x,y);E.push(C)}var A=new c(p);A.objects=E,h.push(A)}return h};s.exports=u}),28200:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41868),m=e(91907),c=e(79677),o=e(6641),u=e(95540),r=e(14977),h=e(29920),d=e(23029),l=function(p,g){for(var x=u(p,"infinite",!1),y=[],E=[],w=c(p);w.i<w.layers.length||E.length>0;){if(w.i>=w.layers.length){if(E.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}w=E.pop();continue}var C=w.layers[w.i];if(w.i++,C.type!=="tilelayer"){if(C.type==="group"){var A=c(p,C,w);E.push(w),w=A}continue}if(C.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+C.name+"'");continue}else if(C.encoding&&C.encoding==="base64"){if(C.chunks)for(var M=0;M<C.chunks.length;M++)C.chunks[M].data=a(C.chunks[M].data);C.data&&(C.data=a(C.data)),delete C.encoding}var R,P,b,F,I,L,D=[],O=0;if(x){var z=u(C,"startx",0)+C.x,W=u(C,"starty",0)+C.y;R=new r({name:w.name+C.name,id:C.id,x:w.x+u(C,"offsetx",0)+z*p.tilewidth,y:w.y+u(C,"offsety",0)+W*p.tileheight,width:C.width,height:C.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:w.opacity*C.opacity,visible:w.visible&&C.visible,properties:u(C,"properties",[]),orientation:o(p.orientation)}),R.orientation===m.HEXAGONAL&&(R.hexSideLength=p.hexsidelength,R.staggerAxis=p.staggeraxis,R.staggerIndex=p.staggerindex,R.staggerAxis==="y"?(I=(R.tileHeight-R.hexSideLength)/2,R.widthInPixels=R.tileWidth*(R.width+.5),R.heightInPixels=R.height*(R.hexSideLength+I)+I):(L=(R.tileWidth-R.hexSideLength)/2,R.widthInPixels=R.width*(R.hexSideLength+L)+L,R.heightInPixels=R.tileHeight*(R.height+.5)));for(var k=0;k<C.height;k++){D[k]=[null];for(var X=0;X<C.width;X++)D[k][X]=null}for(k=0,at=C.chunks.length;k<at;k++)for(var V=C.chunks[k],G=V.x-z,N=V.y-W,H=0,U=0,_=V.data.length;U<_;U++){var $=O+G,j=H+N;P=h(V.data[U]),P.gid>0?(b=new d(R,P.gid,$,j,p.tilewidth,p.tileheight),b.rotation=P.rotation,b.flipX=P.flipped,D[j][$]=b):(F=g?null:new d(R,-1,$,j,p.tilewidth,p.tileheight),D[j][$]=F),O++,O===V.width&&(H++,O=0)}}else{R=new r({name:w.name+C.name,id:C.id,x:w.x+u(C,"offsetx",0)+C.x,y:w.y+u(C,"offsety",0)+C.y,width:C.width,height:C.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:w.opacity*C.opacity,visible:w.visible&&C.visible,properties:u(C,"properties",[]),orientation:o(p.orientation)}),R.orientation===m.HEXAGONAL&&(R.hexSideLength=p.hexsidelength,R.staggerAxis=p.staggeraxis,R.staggerIndex=p.staggerindex,R.staggerAxis==="y"?(I=(R.tileHeight-R.hexSideLength)/2,R.widthInPixels=R.tileWidth*(R.width+.5),R.heightInPixels=R.height*(R.hexSideLength+I)+I):(L=(R.tileWidth-R.hexSideLength)/2,R.widthInPixels=R.width*(R.hexSideLength+L)+L,R.heightInPixels=R.tileHeight*(R.height+.5)));for(var Z=[],it=0,at=C.data.length;it<at;it++)P=h(C.data[it]),P.gid>0?(b=new d(R,P.gid,O,D.length,p.tilewidth,p.tileheight),b.rotation=P.rotation,b.flipX=P.flipped,Z.push(b)):(F=g?null:new d(R,-1,O,D.length,p.tilewidth,p.tileheight),Z.push(F)),O++,O===C.width&&(D.push(Z),O=0,Z=[])}R.data=D,y.push(R)}return y};s.exports=l}),24619:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33629),m=e(16536),c=e(52205),o=e(57880),u=function(r){for(var h=[],d=[],l=null,p,g=0;g<r.tilesets.length;g++){var x=r.tilesets[g];if(x.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(x.image){var y=new a(x.name,x.firstgid,x.tilewidth,x.tileheight,x.margin,x.spacing,void 0,void 0,x.tileoffset);if(r.version>1){var E=void 0,w=void 0;if(Array.isArray(x.tiles)){E=E||{},w=w||{};for(var C=0;C<x.tiles.length;C++){var A=x.tiles[C];if(A.properties){var M={};A.properties.forEach(function(k){M[k.name]=k.value}),w[A.id]=M}if(A.objectgroup&&((E[A.id]||(E[A.id]={})).objectgroup=A.objectgroup,A.objectgroup.objects)){var R=A.objectgroup.objects.map(function(k){return c(k)});E[A.id].objectgroup.objects=R}A.animation&&((E[A.id]||(E[A.id]={})).animation=A.animation),A.type&&((E[A.id]||(E[A.id]={})).type=A.type)}}Array.isArray(x.wangsets)&&(E=E||{},w=w||{},o(x.wangsets,E)),E&&(y.tileData=E,y.tileProperties=w)}else if(x.tileproperties&&(y.tileProperties=x.tileproperties),x.tiles){y.tileData=x.tiles;for(p in y.tileData){var P=y.tileData[p].objectgroup;if(P&&P.objects){var b=P.objects.map(function(k){return c(k)});y.tileData[p].objectgroup.objects=b}}}y.updateTileData(x.imagewidth,x.imageheight),h.push(y)}else{var F=new m(x.name,x.firstgid,x.tilewidth,x.tileheight,x.margin,x.spacing,x.properties),I=0;for(C=0;C<x.tiles.length;C++){A=x.tiles[C];var L=A.image,D=parseInt(A.id,10),O=x.firstgid+D,z=A.imagewidth,W=A.imageheight;F.addImage(O,L,z,W),I=Math.max(D,I)}F.maxId=I,d.push(F)}l&&(l.lastgid=x.firstgid-1),l=x}return{tilesets:h,imageCollections:d}};s.exports=u}),57880:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){for(var m=0;m<e.length;m++){var c=e[m],o=m;if(c.name&&c.name!==""&&(o=c.name),Array.isArray(c.wangtiles)&&c.wangtiles.length>0){var u={},r={},h,d,l;if(Array.isArray(c.edgecolors))for(h=0;h<c.edgecolors.length;h++)l=1+h,d=c.edgecolors[h],d.name!==""&&(u[l]=d.name);if(Array.isArray(c.cornercolors))for(h=0;h<c.cornercolors.length;h++)l=1+h,d=c.cornercolors[h],d.name!==""&&(r[l]=d.name);if(Array.isArray(c.colors))for(h=0;h<c.colors.length;h++)d=c.colors[h],l=1+h,d.name!==""&&(u[l]=r[l]=d.name);for(var p=[u,r,u,r,u,r,u,r],g=0;g<c.wangtiles.length;g++){var x=c.wangtiles[g],y=a[x.tileid]||(a[x.tileid]={});y=y.wangid||(y.wangid={});for(var E=[],w=0;w<Math.min(p.length,x.wangid.length);w++){if(d=x.wangid[w],d===0){E.push(void 0);continue}var C=p[w][d];if(C!==void 0){E.push(C);continue}E.push(d)}y[o]=E}}}};s.exports=T}),96761:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={AssignTileProperties:e(51233),Base64Decode:e(41868),BuildTilesetIndex:e(84101),CreateGroupLayer:e(79677),ParseGID:e(29920),ParseImageLayers:e(12635),ParseJSONTiled:e(46594),ParseObject:e(52205),ParseObjectLayers:e(22611),ParseTileLayers:e(28200),ParseTilesets:e(24619)}}),33385:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(37277),c=e(44594),o=e(94880),u=e(72905),r=new a({initialize:function(d){this.scene=d,this.systems=d.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],d.sys.events.once(c.BOOT,this.boot,this),d.sys.events.on(c.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var h=this.systems.events;h.on(c.PRE_UPDATE,this.preUpdate,this),h.on(c.UPDATE,this.update,this),h.once(c.SHUTDOWN,this.shutdown,this)},addEvent:function(h){var d;if(h instanceof o){if(d=h,this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=d.repeat===-1||d.loop?999999999999:d.repeat,d.delay<=0&&d.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else d=new o(h);return this._pendingInsertion.push(d),d},delayedCall:function(h,d,l,p){return this.addEvent({delay:h,callback:d,args:l,callbackScope:p})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(h){Array.isArray(h)||(h=[h]);for(var d=0;d<h.length;d++){var l=h[d];u(this._pendingRemoval,l),u(this._pendingInsertion,l),u(this._active,l)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var h=this._pendingRemoval.length,d=this._pendingInsertion.length;if(!(h===0&&d===0)){var l,p;for(l=0;l<h;l++){p=this._pendingRemoval[l];var g=this._active.indexOf(p);g>-1&&this._active.splice(g,1),p.destroy()}for(l=0;l<d;l++)p=this._pendingInsertion[l],this._active.push(p);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(h,d){if(this.now=h,!this.paused){d*=this.timeScale;for(var l=0;l<this._active.length;l++){var p=this._active[l];if(!p.paused&&(p.elapsed+=d*p.timeScale,p.elapsed>=p.delay)){var g=p.elapsed-p.delay;if(p.elapsed=p.delay,!p.hasDispatched&&p.callback&&(p.hasDispatched=!0,p.callback.apply(p.callbackScope,p.args)),p.repeatCount>0){if(p.repeatCount--,g>=p.delay)for(;g>=p.delay&&p.repeatCount>0;)p.callback&&p.callback.apply(p.callbackScope,p.args),g-=p.delay,p.repeatCount--;p.elapsed=g,p.hasDispatched=!1}else p.hasDispatched&&this._pendingRemoval.push(p)}}}},shutdown:function(){var h;for(h=0;h<this._pendingInsertion.length;h++)this._pendingInsertion[h].destroy();for(h=0;h<this._active.length;h++)this._active[h].destroy();for(h=0;h<this._pendingRemoval.length;h++)this._pendingRemoval[h].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(c.PRE_UPDATE,this.preUpdate,this),d.off(c.UPDATE,this.update,this),d.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});m.register("Clock",r,"time"),s.exports=r}),96120:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50792),c=e(39429),o=e(95540),u=e(44594),r=e(89809),h=new a({Extends:m,initialize:function(l,p){m.call(this),this.scene=l,this.systems=l.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var g=this.systems.events;g.on(u.PRE_UPDATE,this.preUpdate,this),g.on(u.UPDATE,this.update,this),g.once(u.SHUTDOWN,this.destroy,this),p&&this.add(p)},preUpdate:function(d,l){this.paused||(this.elapsed+=l*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var d,l=this.events,p=!1,g=this.systems,x;for(d=0;d<l.length;d++){var y=l[d];if(!y.complete&&y.time<=this.elapsed){if(y.complete=!0,this.totalComplete++,x=y.target?y.target:this,y.if&&!y.if.call(x,y))continue;if(y.once&&(p=!0),y.set&&y.target)for(var E in y.set)y.target[E]=y.set[E];this.iteration&&y.repeat++,y.loop&&y.repeat&&y.loop.call(x),y.tween&&(y.tweenInstance=g.tweens.add(y.tween)),y.sound&&(typeof y.sound=="string"?g.sound.play(y.sound):g.sound.play(y.sound.key,y.sound.config)),y.event&&this.emit(y.event,x),y.run&&y.run.call(x),y.stop&&this.stop()}}if(p)for(d=0;d<l.length;d++)l[d].complete&&l[d].once&&(l.splice(d,1),d--);this.totalComplete>=l.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(r.COMPLETE,this)}},play:function(d){return d===void 0&&(d=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,d&&this.reset(),this},pause:function(){this.paused=!0;for(var d=this.events,l=0;l<d.length;l++){var p=d[l];p.tweenInstance&&(p.tweenInstance.paused=!0)}return this},repeat:function(d){return(d===void 0||d===!0)&&(d=-1),d===!1&&(d=0),this.loop=d,this},resume:function(){this.paused=!1;for(var d=this.events,l=0;l<d.length;l++){var p=d[l];p.tweenInstance&&(p.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(d){d===void 0&&(d=!1),this.elapsed=0,d||(this.iteration=0);for(var l=this.events,p=0;p<l.length;p++){var g=l[p];g.complete=!1,d||(g.repeat=0),g.tweenInstance&&g.tweenInstance.stop()}return this.play(!1)},add:function(d){Array.isArray(d)||(d=[d]);var l=this.events,p=0;l.length>0&&(p=l[l.length-1].time);for(var g=0;g<d.length;g++){var x=d[g],y=o(x,"at",0),E=o(x,"in",null);E!==null&&(y=this.elapsed+E);var w=o(x,"from",null);w!==null&&(y=p+w),l.push({complete:!1,time:y,repeat:0,if:o(x,"if",null),run:o(x,"run",null),loop:o(x,"loop",null),event:o(x,"event",null),target:o(x,"target",null),set:o(x,"set",null),tween:o(x,"tween",null),sound:o(x,"sound",null),once:o(x,"once",!1),stop:o(x,"stop",!1)}),p=y}return this.complete=!1,this},clear:function(){for(var d=this.events,l=0;l<d.length;l++){var p=d[l];p.tweenInstance&&p.tweenInstance.stop()}return d=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var d=Math.min(this.totalComplete,this.events.length);return d/this.events.length},destroy:function(){var d=this.systems.events;d.off(u.PRE_UPDATE,this.preUpdate,this),d.off(u.UPDATE,this.update,this),d.off(u.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});c.register("timeline",function(d){return new h(this.scene,d)}),s.exports=h}),94880:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(95540),c=new a({initialize:function(u){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(u)},reset:function(o){if(this.delay=m(o,"delay",0),this.repeat=m(o,"repeat",0),this.loop=m(o,"loop",!1),this.callback=m(o,"callback",void 0),this.callbackScope=m(o,"callbackScope",this),this.args=m(o,"args",[]),this.timeScale=m(o,"timeScale",1),this.startAt=m(o,"startAt",0),this.paused=m(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,u=this.elapsed+this.delay*(this.repeat-this.repeatCount);return u/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});s.exports=c}),35945:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),89809:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={COMPLETE:e(35945)}}),90291:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Clock:e(33385),Events:e(89809),Timeline:e(96120),TimerEvent:e(94880)}}),40382:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),m=e(83419),c=e(43491),o=e(88032),u=e(37277),r=e(44594),h=e(93109),d=e(86081),l=e(8357),p=e(43960),g=e(26012),x=new m({initialize:function(E){this.scene=E,this.events=E.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(r.UPDATE,this.update,this),this.events.once(r.SHUTDOWN,this.shutdown,this)},create:function(y){Array.isArray(y)||(y=[y]);for(var E=[],w=0;w<y.length;w++){var C=y[w];C instanceof d||C instanceof p?E.push(C):Array.isArray(C.tweens)?E.push(g(this,C)):E.push(l(this,C))}return E.length===1?E[0]:E},add:function(y){var E=y,w=this.tweens;return E instanceof d||E instanceof p||(Array.isArray(E.tweens)?E=g(this,E):E=l(this,E)),w.push(E.reset()),E},addMultiple:function(y){for(var E,w=[],C=this.tweens,A=0;A<y.length;A++)E=y[A],E instanceof d||E instanceof p||(Array.isArray(E.tweens)?E=g(this,E):E=l(this,E)),C.push(E.reset()),w.push(E);return w},chain:function(y){var E=g(this,y);return this.tweens.push(E.init()),E},getChainedTweens:function(y){return y.getChainedTweens()},has:function(y){return this.tweens.indexOf(y)>-1},existing:function(y){return this.has(y)||this.tweens.push(y.reset()),this},addCounter:function(y){var E=o(this,y);return this.tweens.push(E.reset()),E},stagger:function(y,E){return h(y,E)},setLagSmooth:function(y,E){return y===void 0&&(y=1/1e-8),E===void 0&&(E=0),this.maxLag=y,this.lagSkip=Math.min(E,this.maxLag),this},setFps:function(y){return y===void 0&&(y=240),this.gap=1e3/y,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(y){var E=Date.now()-this.prevTime;E>this.maxLag&&(this.startTime+=E-this.lagSkip),this.prevTime+=E;var w=this.prevTime-this.startTime,C=w-this.nextTime,A=w-this.time*1e3;return C>0||y?(w/=1e3,this.time=w,this.nextTime+=C+(C>=this.gap?4:this.gap-C)):A=0,A},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(y){y===void 0&&(y=!1);var E=this.getDelta(y);if(!(E<=0)){this.processing=!0;var w,C,A=[],M=this.tweens;for(w=0;w<M.length;w++)C=M[w],C.update(E)&&A.push(C);var R=A.length;if(R&&M.length>0){for(w=0;w<R;w++){C=A[w];var P=M.indexOf(C);P>-1&&(C.isPendingRemove()||C.isDestroyed())&&(M.splice(P,1),C.destroy())}A.length=0}this.processing=!1}},remove:function(y){return this.processing?y.setPendingRemoveState():(a(this.tweens,y),y.setRemovedState()),this},reset:function(y){return this.existing(y),y.seek(),y.setActiveState(),this},makeActive:function(y){return this.existing(y),y.setActiveState(),this},each:function(y,E){var w,C=[null];for(w=1;w<arguments.length;w++)C.push(arguments[w]);return this.tweens.forEach(function(A){C[0]=A,y.apply(E,C)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(y){var E=[],w=this.tweens;Array.isArray(y)?y=c(y):y=[y];for(var C=y.length,A=0;A<w.length;A++)for(var M=w[A],R=0;R<C;R++)!M.isDestroyed()&&M.hasTarget(y[R])&&E.push(M);return E},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(y){return this.timeScale=y,this},isTweening:function(y){for(var E=this.tweens,w,C=0;C<E.length;C++)if(w=E[C],w.isPlaying()&&w.hasTarget(y))return!0;return!1},killAll:function(){for(var y=this.processing?this.getTweens():this.tweens,E=0;E<y.length;E++)y[E].destroy();return this.processing||(y.length=0),this},killTweensOf:function(y){for(var E=this.getTweensOf(y),w=0;w<E.length;w++)E[w].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(r.UPDATE,this.update,this),this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.events=null}});u.register("TweenManager",x,"tweens"),s.exports=x}),57355:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){return e&&e.hasOwnProperty(a)?e[a]:m};s.exports=T}),6113:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62640),m=e(35355),c=function(o,u){var r=a.Power0;if(typeof o=="string")if(a.hasOwnProperty(o))r=a[o];else{var h="";if(o.indexOf(".")){h=o.substring(o.indexOf(".")+1);var d=h.toLowerCase();d==="in"?h="easeIn":d==="out"?h="easeOut":d==="inout"&&(h="easeInOut")}o=m(o.substring(0,o.indexOf(".")+1)+h),a.hasOwnProperty(o)&&(r=a[o])}else typeof o=="function"&&(r=o);if(!u)return r;var l=u.slice(0);return l.unshift(0),function(p){return l[0]=p,r.apply(this,l)}};s.exports=c}),91389:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89318),m=e(77259),c=e(28392),o={bezier:a,catmull:m,catmullrom:m,linear:c},u=function(r){if(r===null)return null;var h=o.linear;return typeof r=="string"?o.hasOwnProperty(r)&&(h=o[r]):typeof r=="function"&&(h=r),h};s.exports=u}),55292:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c;if(e.hasOwnProperty(a)){var o=typeof e[a];o==="function"?c=function(u,r,h,d,l,p){return e[a](u,r,h,d,l,p)}:c=function(){return e[a]}}else typeof m=="function"?c=m:c=function(){return m};return c};s.exports=T}),82985:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81076),m=function(c){var o,u=[];if(c.hasOwnProperty("props"))for(o in c.props)o.substring(0,1)!=="_"&&u.push({key:o,value:c.props[o]});else for(o in c)a.indexOf(o)===-1&&o.substring(0,1)!=="_"&&u.push({key:o,value:c[o]});return u};s.exports=m}),62329:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),m=function(c){var o=a(c,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};s.exports=m}),17777:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30976),m=e(99472);function c(d){return!!d.getActive&&typeof d.getActive=="function"}function o(d){return!!d.getStart&&typeof d.getStart=="function"}function u(d){return!!d.getEnd&&typeof d.getEnd=="function"}function r(d){return o(d)||u(d)||c(d)}var h=function(d,l){var p,g=function(k,X,V){return V},x=function(k,X,V){return V},y=null,E=typeof l;if(E==="number")g=function(){return l};else if(Array.isArray(l))x=function(){return l[0]},g=function(){return l[l.length-1]};else if(E==="string"){var w=l.toLowerCase(),C=w.substring(0,6)==="random",A=w.substring(0,3)==="int";if(C||A){var M=w.indexOf("("),R=w.indexOf(")"),P=w.indexOf(",");if(M&&R&&P){var b=parseFloat(w.substring(M+1,P)),F=parseFloat(w.substring(P+1,R));C?g=function(){return m(b,F)}:g=function(){return a(b,F)}}else throw new Error("invalid random() format")}else{w=w[0];var I=parseFloat(l.substr(2));switch(w){case"+":g=function(k,X,V){return V+I};break;case"-":g=function(k,X,V){return V-I};break;case"*":g=function(k,X,V){return V*I};break;case"/":g=function(k,X,V){return V/I};break;default:g=function(){return parseFloat(l)}}}}else if(E==="function")g=l;else if(E==="object")if(r(l))c(l)&&(y=l.getActive),u(l)&&(g=l.getEnd),o(l)&&(x=l.getStart);else if(l.hasOwnProperty("value"))p=h(d,l.value);else{var L=l.hasOwnProperty("to"),D=l.hasOwnProperty("from"),O=l.hasOwnProperty("start");if(L&&(D||O)){if(p=h(d,l.to),O){var z=h(d,l.start);p.getActive=z.getEnd}if(D){var W=h(d,l.from);p.getStart=W.getEnd}}}return p||(p={getActive:y,getEnd:g,getStart:x}),p};s.exports=h}),88032:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),m=e(69902),c=e(23568),o=e(57355),u=e(6113),r=e(95540),h=e(55292),d=e(35154),l=e(17777),p=e(269),g=e(86081),x=function(y,E,w){if(E instanceof g)return E.parent=y,E;w===void 0?w=m:w=p(m,w);var C=r(E,"from",0),A=r(E,"to",1),M=[{value:C}],R=r(E,"delay",w.delay),P=r(E,"easeParams",w.easeParams),b=r(E,"ease",w.ease),F=l("value",A),I=new g(y,M),L=I.add(0,"value",F.getEnd,F.getStart,F.getActive,u(r(E,"ease",b),r(E,"easeParams",P)),h(E,"delay",R),r(E,"duration",w.duration),o(E,"yoyo",w.yoyo),r(E,"hold",w.hold),r(E,"repeat",w.repeat),r(E,"repeatDelay",w.repeatDelay),!1,!1);L.start=C,L.current=C,I.completeDelay=c(E,"completeDelay",0),I.loop=Math.round(c(E,"loop",0)),I.loopDelay=Math.round(c(E,"loopDelay",0)),I.paused=o(E,"paused",!1),I.persist=o(E,"persist",!1),I.isNumberTween=!0,I.callbackScope=d(E,"callbackScope",I);for(var D=a.TYPES,O=0;O<D.length;O++){var z=D[O],W=d(E,z,!1);if(W){var k=d(E,z+"Params",[]);I.setCallback(z,W,k)}}return I};s.exports=x}),93109:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6113),m=e(35154),c=e(36383),o=function(u,r){r===void 0&&(r={});var h,d=m(r,"start",0),l=m(r,"ease",null),p=m(r,"grid",null),g=m(r,"from",0),x=g==="first",y=g==="center",E=g==="last",w=typeof g=="number",C=Array.isArray(u),A=parseFloat(C?u[0]:u),M=C?parseFloat(u[1]):0,R=Math.max(A,M);if(C&&(d+=A),p){var P=p[0],b=p[1],F=0,I=0,L=0,D=0,O=[];E?(F=P-1,I=b-1):w?(F=g%P,I=Math.floor(g/P)):y&&(F=(P-1)/2,I=(b-1)/2);for(var z=c.MIN_SAFE_INTEGER,W=0;W<b;W++){O[W]=[];for(var k=0;k<P;k++){L=F-k,D=I-W;var X=Math.sqrt(L*L+D*D);X>z&&(z=X),O[W][k]=X}}}var V=l?a(l):null;return p?h=function(G,N,H,U){var _=0,$=U%P,j=Math.floor(U/P);$>=0&&$<P&&j>=0&&j<b&&(_=O[j][$]);var Z;if(C){var it=M-A;V?Z=_/z*it*V(_/z):Z=_/z*it}else V?Z=_*A*V(_/z):Z=_*A;return Z+d}:h=function(G,N,H,U,_){_--;var $;x?$=U:y?$=Math.abs(_/2-U):E?$=_-U:w&&($=Math.abs(g-U));var j;if(C){var Z;y?Z=(M-A)/_*($*2):Z=(M-A)/_*$,V?j=Z*V($/_):j=Z}else V?j=_*R*V($/_):j=$*A;return j+d},h};s.exports=o}),8357:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),m=e(69902),c=e(23568),o=e(57355),u=e(6113),r=e(95540),h=e(91389),d=e(55292),l=e(82985),p=e(62329),g=e(35154),x=e(17777),y=e(269),E=e(86081),w=function(C,A,M){if(A instanceof E)return A.parent=C,A;M===void 0?M=m:M=y(m,M);var R=p(A);!R&&M.targets&&(R=M.targets);for(var P=l(A),b=r(A,"delay",M.delay),F=r(A,"duration",M.duration),I=r(A,"easeParams",M.easeParams),L=r(A,"ease",M.ease),D=r(A,"hold",M.hold),O=r(A,"repeat",M.repeat),z=r(A,"repeatDelay",M.repeatDelay),W=o(A,"yoyo",M.yoyo),k=o(A,"flipX",M.flipX),X=o(A,"flipY",M.flipY),V=r(A,"interpolation",M.interpolation),G=function(ft,vt,Tt,ut){if(Tt==="texture"){var Bt=ut,Pt=void 0;Array.isArray(ut)?(Bt=ut[0],Pt=ut[1]):ut.hasOwnProperty("value")?(Bt=ut.value,Array.isArray(ut.value)?(Bt=ut.value[0],Pt=ut.value[1]):typeof ut.value=="string"&&(Bt=ut.value)):typeof ut=="string"&&(Bt=ut),ft.addFrame(vt,Bt,Pt,d(ut,"delay",b),r(ut,"duration",F),r(ut,"hold",D),r(ut,"repeat",O),r(ut,"repeatDelay",z),o(ut,"flipX",k),o(ut,"flipY",X))}else{var et=x(Tt,ut),Q=h(r(ut,"interpolation",V));ft.add(vt,Tt,et.getEnd,et.getStart,et.getActive,u(r(ut,"ease",L),r(ut,"easeParams",I)),d(ut,"delay",b),r(ut,"duration",F),o(ut,"yoyo",W),r(ut,"hold",D),r(ut,"repeat",O),r(ut,"repeatDelay",z),o(ut,"flipX",k),o(ut,"flipY",X),Q,Q?ut:null)}},N=new E(C,R),H=0;H<P.length;H++)for(var U=P[H].key,_=P[H].value,$=0;$<R.length;$++)U==="scale"&&!R[$].hasOwnProperty("scale")?(G(N,$,"scaleX",_),G(N,$,"scaleY",_)):G(N,$,U,_);N.completeDelay=c(A,"completeDelay",0),N.loop=Math.round(c(A,"loop",0)),N.loopDelay=Math.round(c(A,"loopDelay",0)),N.paused=o(A,"paused",!1),N.persist=o(A,"persist",!1),N.callbackScope=r(A,"callbackScope",N);for(var j=a.TYPES,Z=0;Z<j.length;Z++){var it=j[Z],at=g(A,it,!1);if(at){var q=g(A,it+"Params",[]);N.setCallback(it,at,q)}}return N};s.exports=w}),26012:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),m=e(23568),c=e(57355),o=e(62329),u=e(35154),r=e(8357),h=e(43960),d=function(l,p){if(p instanceof h)return p.parent=l,p;var g=new h(l);g.startDelay=u(p,"delay",0),g.completeDelay=m(p,"completeDelay",0),g.loop=Math.round(m(p,"loop",u(p,"repeat",0))),g.loopDelay=Math.round(m(p,"loopDelay",u(p,"repeatDelay",0))),g.paused=c(p,"paused",!1),g.persist=c(p,"persist",!1),g.callbackScope=u(p,"callbackScope",g);var x,y=a.TYPES;for(x=0;x<y.length;x++){var E=y[x],w=u(p,E,!1);if(w){var C=u(p,E+"Params",[]);g.setCallback(E,w,C)}}var A=u(p,"tweens",null);if(Array.isArray(A)){var M=[],R=o(p),P=void 0;for(R&&(P={targets:R}),x=0;x<A.length;x++)M.push(r(g,A[x],P));g.add(M)}return g};s.exports=d}),30231:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={GetBoolean:e(57355),GetEaseFunction:e(6113),GetInterpolationFunction:e(91389),GetNewValue:e(55292),GetProps:e(82985),GetTargets:e(62329),GetValueOp:e(17777),NumberTweenBuilder:e(88032),StaggerBuilder:e(93109),TweenBuilder:e(8357)}}),73685:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="active"}),98540:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="complete"}),67233:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="loop"}),2859:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="pause"}),98336:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="repeat"}),25764:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="resume"}),32193:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="start"}),84371:(s=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="stop"}),70766:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="update"}),55659:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports="yoyo"}),842:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={TWEEN_ACTIVE:e(73685),TWEEN_COMPLETE:e(98540),TWEEN_LOOP:e(67233),TWEEN_PAUSE:e(2859),TWEEN_RESUME:e(25764),TWEEN_REPEAT:e(98336),TWEEN_START:e(32193),TWEEN_STOP:e(84371),TWEEN_UPDATE:e(70766),TWEEN_YOYO:e(55659)}}),43066:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={States:e(86353),Builders:e(30231),Events:e(842),TweenManager:e(40382),Tween:e(86081),TweenData:e(48177),TweenFrameData:e(42220),BaseTween:e(70402),TweenChain:e(43960)};s.exports=a}),70402:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(50792),c=e(842),o=e(86353),u=new a({Extends:m,initialize:function(h){m.call(this),this.parent=h,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=o.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(c.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(c.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(c.TWEEN_COMPLETE,"onComplete")},complete:function(r){return r===void 0&&(r=0),r?(this.setCompleteDelayState(),this.countdown=r):this.onCompleteHandler(),this},completeAfterLoop:function(r){return r===void 0&&(r=0),this.loopCounter>r&&(this.loopCounter=r),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(c.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(r){this.countdown-=r,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(r){return this.countdown-=r,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(c.TWEEN_START,"onStart"),r=0),r},updateCompleteDelay:function(r){this.countdown-=r,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(r,h,d){return d===void 0&&(d=[]),this.callbacks.hasOwnProperty(r)&&(this.callbacks[r]={func:h,params:d}),this},setPendingState:function(){this.state=o.PENDING},setActiveState:function(){this.state=o.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=o.LOOP_DELAY},setCompleteDelayState:function(){this.state=o.COMPLETE_DELAY},setStartDelayState:function(){this.state=o.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=o.PENDING_REMOVE},setRemovedState:function(){this.state=o.REMOVED},setFinishedState:function(){this.state=o.FINISHED},setDestroyedState:function(){this.state=o.DESTROYED},isPending:function(){return this.state===o.PENDING},isActive:function(){return this.state===o.ACTIVE},isLoopDelayed:function(){return this.state===o.LOOP_DELAY},isCompleteDelayed:function(){return this.state===o.COMPLETE_DELAY},isStartDelayed:function(){return this.state===o.START_DELAY},isPendingRemove:function(){return this.state===o.PENDING_REMOVE},isRemoved:function(){return this.state===o.REMOVED},isFinished:function(){return this.state===o.FINISHED},isDestroyed:function(){return this.state===o.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(r){r.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});u.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],s.exports=u}),95042:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83419),m=e(842),c=e(86353),o=new a({initialize:function(r,h,d,l,p,g,x,y,E,w){this.tween=r,this.targetIndex=h,this.duration=l<=0?.01:l,this.totalDuration=0,this.delay=0,this.getDelay=d,this.yoyo=p,this.hold=g,this.repeat=x,this.repeatDelay=y,this.repeatCounter=0,this.flipX=E,this.flipY=w,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(u){u===void 0&&(u=this.current),this.tween.targets[this.targetIndex][this.key]=u},setCreatedState:function(){this.state=c.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=c.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=c.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=c.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=c.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=c.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=c.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=c.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===c.CREATED},isDelayed:function(){return this.state===c.DELAY},isPendingRender:function(){return this.state===c.PENDING_RENDER},isPlayingForward:function(){return this.state===c.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===c.PLAYING_BACKWARD},isHolding:function(){return this.state===c.HOLD_DELAY},isRepeating:function(){return this.state===c.REPEAT_DELAY},isComplete:function(){return this.state===c.COMPLETE},setStateFromEnd:function(u){this.yoyo?this.onRepeat(u,!0,!0):this.repeatCounter>0?this.onRepeat(u,!0,!1):this.setCompleteState()},setStateFromStart:function(u){this.repeatCounter>0?this.onRepeat(u,!1):this.setCompleteState()},reset:function(){var u=this.tween,r=u.totalTargets,h=this.targetIndex,d=u.targets[h],l=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(d,l,0,h,r,u),this.repeatCounter=this.repeat===-1?c.MAX:this.repeat,this.setPendingRenderState();var p=this.duration+this.hold;this.yoyo&&(p+=this.duration);var g=p+this.repeatDelay;this.totalDuration=this.delay+p,this.repeat===-1?(this.totalDuration+=g*c.MAX,u.isInfinite=!0):this.repeat>0&&(this.totalDuration+=g*this.repeat),this.totalDuration>u.duration&&(u.duration=this.totalDuration),this.delay<u.startDelay&&(u.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(u,r,h){var d=this.tween,l=d.totalTargets,p=this.targetIndex,g=d.targets[p],x=this.key,y=x!=="texture";if(this.elapsed=u,this.progress=u/this.duration,this.flipX&&g.toggleFlipX(),this.flipY&&g.toggleFlipY(),y&&(r||h)&&(this.start=this.getStartValue(g,x,this.start,p,l,d)),h){this.setPlayingBackwardState(),this.dispatchEvent(m.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,y&&(this.end=this.getEndValue(g,x,this.start,p,l,d)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-u,y&&(this.current=this.start,g[x]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(m.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});s.exports=o}),69902:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};s.exports=T}),81076:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]}),86081:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70402),m=e(83419),c=e(842),o=e(44603),u=e(39429),r=e(36383),h=e(86353),d=e(48177),l=e(42220),p=new m({Extends:a,initialize:function(x,y){a.call(this,x),this.targets=y,this.totalTargets=y.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(g,x,y,E,w,C,A,M,R,P,b,F,I,L,D,O){var z=new d(this,g,x,y,E,w,C,A,M,R,P,b,F,I,L,D,O);return this.totalData=this.data.push(z),z},addFrame:function(g,x,y,E,w,C,A,M,R,P){var b=new l(this,g,x,y,E,w,C,A,M,R,P);return this.totalData=this.data.push(b),b},getValue:function(g){g===void 0&&(g=0);var x=null;return this.data&&(x=this.data[g].current),x},hasTarget:function(g){return this.targets&&this.targets.indexOf(g)!==-1},updateTo:function(g,x,y){if(y===void 0&&(y=!1),g!=="texture")for(var E=0;E<this.totalData;E++){var w=this.data[E];w.key===g&&(w.isPlayingForward()||w.isPlayingBackward())&&(w.end=x,y&&(w.start=w.current))}return this},restart:function(){switch(this.state){case h.REMOVED:case h.FINISHED:this.seek(),this.parent.makeActive(this);break;case h.PENDING:case h.PENDING_REMOVE:this.parent.reset(this);break;case h.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,a.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(g,x,y){if(g===void 0&&(g=0),x===void 0&&(x=16.6),y===void 0&&(y=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;y||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive");var E=this.paused;if(this.paused=!1,g>0){for(var w=Math.floor(g/x),C=g-w*x,A=0;A<w;A++)this.update(x);C>0&&this.update(C)}return this.paused=E,this.isSeeking=!1,this},initTweenData:function(g){g===void 0&&(g=!1),this.duration=0,this.startDelay=r.MAX_SAFE_INTEGER;for(var x=this.data,y=0;y<this.totalData;y++)x[y].reset(g);this.duration=Math.max(this.duration,.01);var E=this.duration,w=this.completeDelay,C=this.loopCounter,A=this.loopDelay;C>0?this.totalDuration=E+w+(E+A)*C:this.totalDuration=E+w},reset:function(g){return g===void 0&&(g=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=h.MAX),g||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")),this},update:function(g){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(g*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(g),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(g),!1;this.hasStarted||(this.startDelay-=g,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(c.TWEEN_START,"onStart"),g=0));var x=!1;if(this.isActive())for(var y=this.data,E=0;E<this.totalData;E++)y[E].update(g)&&(x=!0);this.elapsed+=g,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=g,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),x||this.nextState();var w=this.isPendingRemove();return w&&this.persist&&(this.setFinishedState(),w=!1),w},forward:function(g){return this.update(g),this},rewind:function(g){return this.update(-g),this},dispatchEvent:function(g,x){if(!this.isSeeking){if(this.emit(g,this,this.targets),!this.callbacks)return;var y=this.callbacks[x];y&&y.func.apply(this.callbackScope,[this,this.targets].concat(y.params))}},destroy:function(){a.prototype.destroy.call(this),this.targets=null}});u.register("tween",function(g){return this.scene.sys.tweens.add(g)}),o.register("tween",function(g){return this.scene.sys.tweens.create(g)}),s.exports=p}),43960:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72905),m=e(70402),c=e(83419),o=e(842),u=e(44603),r=e(39429),h=e(86353),d=new c({Extends:m,initialize:function(p){m.call(this,p),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?h.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(l){var p=this.parent.create(l);Array.isArray(p)||(p=[p]);for(var g=this.data,x=0;x<p.length;x++){var y=p[x];y.parent=this,g.push(y.reset())}return this.totalData=g.length,this},remove:function(l){return a(this.data,l),l.setRemovedState(),l===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(l){for(var p=this.data,g=0;g<this.totalData;g++)if(p[g].hasTarget(l))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(l){return l.seek(),l.setActiveState(),this},makeActive:function(l){return l.reset(),l.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var l=this.data,p=this.totalData,g=0;g<p;g++)l[g].reset(!1);this.setCurrentTween(0)},update:function(l){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(l*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(l),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(l),!1;this.hasStarted||(this.startDelay-=l,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(o.TWEEN_START,"onStart"),l=0));var p=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(l)&&this.nextTween()&&this.nextState(),p=this.isPendingRemove(),p&&this.persist&&(this.setFinishedState(),p=!1)),p},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(l){this.currentIndex=l,this.currentTween=this.data[l],this.currentTween.setActiveState()},dispatchEvent:function(l,p){this.emit(l,this);var g=this.callbacks[p];g&&g.func.apply(this.callbackScope,[this].concat(g.params))},destroy:function(){m.prototype.destroy.call(this),this.currentTween=null}});r.register("tweenchain",function(l){return this.scene.sys.tweens.chain(l)}),u.register("tweenchain",function(l){return this.scene.sys.tweens.create(l)}),s.exports=d}),48177:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95042),m=e(45319),c=e(83419),o=e(842),u=new c({Extends:a,initialize:function(h,d,l,p,g,x,y,E,w,C,A,M,R,P,b,F,I){a.call(this,h,d,E,w,C,A,M,R,P,b),this.key=l,this.getActiveValue=x,this.getEndValue=p,this.getStartValue=g,this.ease=y,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=F,this.interpolationData=I},reset:function(r){a.prototype.reset.call(this);var h=this.tween.targets[this.targetIndex],d=this.key;r&&(h[d]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(h[d]=this.getActiveValue(h,d,0))},update:function(r){var h=this.tween,d=h.totalTargets,l=this.targetIndex,p=h.targets[l],g=this.key;if(!p)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(o.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(p,g,p[g],l,d,h),this.end=this.getEndValue(p,g,this.start,l,d,h),this.current=this.start,p[g]=this.start,this.setPlayingForwardState(),!0;var x=this.isPlayingForward(),y=this.isPlayingBackward();if(x||y){var E=this.elapsed,w=this.duration,C=0,A=!1;E+=r,E>=w?(C=E-w,E=w,A=!0):E<0&&(E=0);var M=m(E/w,0,1);this.elapsed=E,this.progress=M,this.previous=this.current,x||(M=1-M);var R=this.ease(M);this.interpolation?this.current=this.interpolation(this.interpolationData,R):this.current=this.start+(this.end-this.start)*R,p[g]=this.current,A&&(x?(h.isNumberTween&&(this.current=this.end,p[g]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(C)):(h.isNumberTween&&(this.current=this.start,p[g]=this.current),this.setStateFromStart(C))),this.dispatchEvent(o.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,h){var d=this.tween;if(!d.isSeeking){var l=d.targets[this.targetIndex],p=this.key,g=this.current,x=this.previous;d.emit(r,d,p,l,g,x);var y=d.callbacks[h];y&&y.func.apply(d.callbackScope,[d,l,p,g,x].concat(y.params))}},destroy:function(){a.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});s.exports=u}),42220:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95042),m=e(45319),c=e(83419),o=e(842),u=new c({Extends:a,initialize:function(h,d,l,p,g,x,y,E,w,C,A){a.call(this,h,d,g,x,!1,y,E,w,C,A),this.key="texture",this.startTexture=null,this.endTexture=l,this.startFrame=null,this.endFrame=p,this.yoyo=E!==0},reset:function(r){a.prototype.reset.call(this);var h=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=h.texture.key,this.startFrame=h.frame.name),r&&h.setTexture(this.startTexture,this.startFrame)},update:function(r){var h=this.tween,d=this.targetIndex,l=h.targets[d];if(!l)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(o.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&l.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),g=this.isPlayingBackward();if(p||g){var x=this.elapsed,y=this.duration,E=0,w=!1;x+=r,x>=y?(E=x-y,x=y,w=!0):x<0&&(x=0);var C=m(x/y,0,1);this.elapsed=x,this.progress=C,w&&(p?(l.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(E)):(l.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(E))),this.dispatchEvent(o.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,h){var d=this.tween;if(!d.isSeeking){var l=d.targets[this.targetIndex],p=this.key;d.emit(r,d,p,l);var g=d.callbacks[h];g&&g.func.apply(d.callbackScope,[d,l,p].concat(g.params))}},destroy:function(){a.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});s.exports=u}),86353:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};s.exports=T}),83419:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(u){return!!u.get&&typeof u.get=="function"||!!u.set&&typeof u.set=="function"}function e(u,r,h){var d=h?u[r]:Object.getOwnPropertyDescriptor(u,r);return!h&&d.value&&typeof d.value=="object"&&(d=d.value),d&&T(d)?(typeof d.enumerable>"u"&&(d.enumerable=!0),typeof d.configurable>"u"&&(d.configurable=!0),d):!1}function a(u,r){var h=Object.getOwnPropertyDescriptor(u,r);return h?(h.value&&typeof h.value=="object"&&(h=h.value),h.configurable===!1):!1}function m(u,r,h,d){for(var l in r)if(r.hasOwnProperty(l)){var p=e(r,l,h);if(p!==!1){var g=d||u;if(a(g.prototype,l)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+l+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(u.prototype,l,p)}else u.prototype[l]=r[l]}}function c(u,r){if(r){Array.isArray(r)||(r=[r]);for(var h=0;h<r.length;h++)m(u,r[h].prototype||r[h])}}function o(u){u||(u={});var r,h;if(u.initialize){if(typeof u.initialize!="function")throw new Error("initialize must be a function");r=u.initialize,delete u.initialize}else if(u.Extends){var d=u.Extends;r=function(){d.apply(this,arguments)}}else r=function(){};u.Extends?(r.prototype=Object.create(u.Extends.prototype),r.prototype.constructor=r,h=u.Extends,delete u.Extends):r.prototype.constructor=r;var l=null;return u.Mixins&&(l=u.Mixins,delete u.Mixins),c(r,l),m(r,u,!0,h),r}o.extend=m,o.mixin=c,o.ignoreFinals=!1,s.exports=o}),29747:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};s.exports=T}),20242:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return null};s.exports=T}),71146:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o){if(o===void 0&&(o=e),m>0){var u=m-e.length;if(u<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.push(a),c&&c.call(o,a),a):null;for(var r=a.length-1;r>=0;)e.indexOf(a[r])!==-1&&a.splice(r,1),r--;if(r=a.length,r===0)return null;m>0&&r>u&&(a.splice(u),r=u);for(var h=0;h<r;h++){var d=a[h];e.push(d),c&&c.call(o,d)}return a};s.exports=T}),51067:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c,o,u){if(m===void 0&&(m=0),u===void 0&&(u=e),c>0){var r=c-e.length;if(r<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.splice(m,0,a),o&&o.call(u,a),a):null;for(var h=a.length-1;h>=0;)e.indexOf(a[h])!==-1&&a.pop(),h--;if(h=a.length,h===0)return null;c>0&&h>r&&(a.splice(r),h=r);for(var d=h-1;d>=0;d--){var l=a[d];e.splice(m,0,l),o&&o.call(u,l)}return a};s.exports=T}),66905:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.indexOf(a);return m!==-1&&m<e.length&&(e.splice(m,1),e.push(a)),a};s.exports=T}),21612:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),m=function(c,o,u,r,h){r===void 0&&(r=0),h===void 0&&(h=c.length);var d=0;if(a(c,r,h))for(var l=r;l<h;l++){var p=c[l];p[o]===u&&d++}return d};s.exports=m}),95428:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c,o=[null];for(c=3;c<arguments.length;c++)o.push(arguments[c]);for(c=0;c<e.length;c++)o[0]=e[c],a.apply(m,o);return e};s.exports=T}),36914:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),m=function(c,o,u,r,h){if(r===void 0&&(r=0),h===void 0&&(h=c.length),a(c,r,h)){var d,l=[null];for(d=5;d<arguments.length;d++)l.push(arguments[d]);for(d=r;d<h;d++)l[0]=c[d],o.apply(u,l)}return c};s.exports=m}),81957:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(a.length){if(a.length===1)return a[0]}else return NaN;var c=1,o,u;if(m){if(e<a[0][m])return a[0];for(;a[c][m]<e;)c++}else for(;a[c]<e;)c++;return c>a.length&&(c=a.length),m?(o=a[c-1][m],u=a[c][m],u-e<=e-o?a[c]:a[c-1]):(o=a[c-1],u=a[c],u-e<=e-o?u:o)};s.exports=T}),43491:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=[]);for(var m=0;m<e.length;m++)Array.isArray(e[m])?T(e[m],a):a.push(e[m]);return a};s.exports=T}),46710:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),m=function(c,o,u,r,h){r===void 0&&(r=0),h===void 0&&(h=c.length);var d=[];if(a(c,r,h))for(var l=r;l<h;l++){var p=c[l];(!o||o&&u===void 0&&p.hasOwnProperty(o)||o&&u!==void 0&&p[o]===u)&&d.push(p)}return d};s.exports=m}),58731:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),m=function(c,o,u,r,h){if(r===void 0&&(r=0),h===void 0&&(h=c.length),r!==-1){if(a(c,r,h))for(var d=r;d<h;d++){var l=c[d];if(!o||o&&u===void 0&&l.hasOwnProperty(o)||o&&u!==void 0&&l[o]===u)return l}}else if(a(c,0,h))for(var d=h;d>=0;d--){var l=c[d];if(!o||o&&u===void 0&&l.hasOwnProperty(o)||o&&u!==void 0&&l[o]===u)return l}return null};s.exports=m}),26546:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){a===void 0&&(a=0),m===void 0&&(m=e.length);var c=a+Math.floor(Math.random()*m);return e[c]===void 0?null:e[c]};s.exports=T}),85835:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(a===m)return e;var c=e.indexOf(a),o=e.indexOf(m);if(c<0||o<0)throw new Error("Supplied items must be elements of the same array");return c>o||(e.splice(c,1),o=e.indexOf(m),e.splice(o+1,0,a)),e};s.exports=T}),83371:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(a===m)return e;var c=e.indexOf(a),o=e.indexOf(m);if(c<0||o<0)throw new Error("Supplied items must be elements of the same array");return c<o||(e.splice(c,1),o===0?e.unshift(a):e.splice(o,0,a)),e};s.exports=T}),70864:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.indexOf(a);if(m>0){var c=e[m-1],o=e.indexOf(c);e[m]=c,e[o]=a}return e};s.exports=T}),69693:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=e.indexOf(a);if(c===-1||m<0||m>=e.length)throw new Error("Supplied index out of bounds");return c!==m&&(e.splice(c,1),e.splice(m,0,a)),a};s.exports=T}),40853:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.indexOf(a);if(m!==-1&&m<e.length-1){var c=e[m+1],o=e.indexOf(c);e[m]=c,e[o]=a}return e};s.exports=T}),20283:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=[],u,r=!1;if((m||c)&&(r=!0,m||(m=""),c||(c="")),a<e)for(u=e;u>=a;u--)r?o.push(m+u.toString()+c):o.push(u);else for(u=e;u<=a;u++)r?o.push(m+u.toString()+c):o.push(u);return o};s.exports=T}),593:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2284),m=function(c,o,u){c===void 0&&(c=0),o===void 0&&(o=null),u===void 0&&(u=1),o===null&&(o=c,c=0);for(var r=[],h=Math.max(a((o-c)/(u||1)),0),d=0;d<h;d++)r.push(c),c+=u;return r};s.exports=m}),43886:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(m,c,o){var u=m[c];m[c]=m[o],m[o]=u}function e(m,c){return m<c?-1:m>c?1:0}var a=function(m,c,o,u,r){for(o===void 0&&(o=0),u===void 0&&(u=m.length-1),r===void 0&&(r=e);u>o;){if(u-o>600){var h=u-o+1,d=c-o+1,l=Math.log(h),p=.5*Math.exp(2*l/3),g=.5*Math.sqrt(l*p*(h-p)/h)*(d-h/2<0?-1:1),x=Math.max(o,Math.floor(c-d*p/h+g)),y=Math.min(u,Math.floor(c+(h-d)*p/h+g));a(m,c,x,y,r)}var E=m[c],w=o,C=u;for(T(m,o,c),r(m[u],E)>0&&T(m,o,u);w<C;){for(T(m,w,C),w++,C--;r(m[w],E)<0;)w++;for(;r(m[C],E)>0;)C--}r(m[o],E)===0?T(m,o,C):(C++,T(m,C,u)),C<=c&&(o=C+1),c<=C&&(u=C-1)}};s.exports=a}),88492:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),m=e(33680),c=function(u,r,h){for(var d=[],l=0;l<u.length;l++)for(var p=0;p<r.length;p++)for(var g=0;g<h;g++)d.push({a:u[l],b:r[p]});return d},o=function(u,r,h){var d=a(h,"max",0),l=a(h,"qty",1),p=a(h,"random",!1),g=a(h,"randomB",!1),x=a(h,"repeat",0),y=a(h,"yoyo",!1),E=[];if(g&&m(r),x===-1)if(d===0)x=0;else{var w=u.length*r.length*l;y&&(w*=2),x=Math.ceil(d/w)}for(var C=0;C<=x;C++){var A=c(u,r,l);p&&m(A),E=E.concat(A),y&&(A.reverse(),E=E.concat(A))}return d&&E.splice(d),E};s.exports=o}),72905:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),m=function(c,o,u,r){r===void 0&&(r=c);var h;if(!Array.isArray(o))return h=c.indexOf(o),h!==-1?(a(c,h),u&&u.call(r,o),o):null;for(var d=o.length-1,l=[];d>=0;){var p=o[d];h=c.indexOf(p),h!==-1&&(a(c,h),l.push(p),u&&u.call(r,p)),d--}return l};s.exports=m}),60248:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),m=function(c,o,u,r){if(r===void 0&&(r=c),o<0||o>c.length-1)throw new Error("Index out of bounds");var h=a(c,o);return u&&u.call(r,h),h};s.exports=m}),81409:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),m=function(c,o,u,r,h){if(o===void 0&&(o=0),u===void 0&&(u=c.length),h===void 0&&(h=c),a(c,o,u)){var d=u-o,l=c.splice(o,d);if(r)for(var p=0;p<l.length;p++){var g=l[p];r.call(h,g)}return l}else return[]};s.exports=m}),31856:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19133),m=function(c,o,u){o===void 0&&(o=0),u===void 0&&(u=c.length);var r=o+Math.floor(Math.random()*u);return a(c,r)};s.exports=m}),42169:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=e.indexOf(a),o=e.indexOf(m);return c!==-1&&o===-1?(e[c]=m,!0):!1};s.exports=T}),86003:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1);for(var m=null,c=0;c<a;c++)m=e.shift(),e.push(m);return m};s.exports=T}),49498:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){a===void 0&&(a=1);for(var m=null,c=0;c<a;c++)m=e.pop(),e.unshift(m);return m};s.exports=T}),82011:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){var o=e.length;if(a<0||a>=o||a>=m||m>o){if(c)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};s.exports=T}),89545:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){var m=e.indexOf(a);return m!==-1&&m>0&&(e.splice(m,1),e.unshift(a)),a};s.exports=T}),17810:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82011),m=function(c,o,u,r,h){if(r===void 0&&(r=0),h===void 0&&(h=c.length),a(c,r,h))for(var d=r;d<h;d++){var l=c[d];l.hasOwnProperty(o)&&(l[o]=u)}return c};s.exports=m}),33680:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=e.length-1;a>0;a--){var m=Math.floor(Math.random()*(a+1)),c=e[a];e[a]=e[m],e[m]=c}return e};s.exports=T}),90126:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a=/\D/g;return e.sort(function(m,c){return parseInt(m.replace(a,""),10)-parseInt(c.replace(a,""),10)}),e};s.exports=T}),19133:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){if(!(a>=e.length)){for(var m=e.length-1,c=e[a],o=a;o<m;o++)e[o]=e[o+1];return e.length=m,c}};s.exports=T}),19186:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82264);function m(r,h){return String(r).localeCompare(h)}function c(r,h){var d=r.length;if(d<=1)return r;for(var l=new Array(d),p=1;p<d;p*=2){o(r,h,p,l);var g=r;r=l,l=g}return r}function o(r,h,d,l){var p=r.length,g=0,x=d*2,y,E,w,C,A;for(y=0;y<p;y+=x)for(E=y+d,w=E+d,E>p&&(E=p),w>p&&(w=p),C=y,A=E;;)if(C<E&&A<w)h(r[C],r[A])<=0?l[g++]=r[C++]:l[g++]=r[A++];else if(C<E)l[g++]=r[C++];else if(A<w)l[g++]=r[A++];else break}var u=function(r,h){if(h===void 0&&(h=m),!r||r.length<2)return r;if(a.features.stableSort)return r.sort(h);var d=c(r,h);return d!==r&&o(d,null,r.length,r),r};s.exports=u}),25630:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(a===m)return e;var c=e.indexOf(a),o=e.indexOf(m);if(c<0||o<0)throw new Error("Supplied items must be elements of the same array");return e[c]=m,e[o]=a,e};s.exports=T}),37105:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Matrix:e(54915),Add:e(71146),AddAt:e(51067),BringToTop:e(66905),CountAllMatching:e(21612),Each:e(95428),EachInRange:e(36914),FindClosestInSorted:e(81957),Flatten:e(43491),GetAll:e(46710),GetFirst:e(58731),GetRandom:e(26546),MoveDown:e(70864),MoveTo:e(69693),MoveUp:e(40853),MoveAbove:e(85835),MoveBelow:e(83371),NumberArray:e(20283),NumberArrayStep:e(593),QuickSelect:e(43886),Range:e(88492),Remove:e(72905),RemoveAt:e(60248),RemoveBetween:e(81409),RemoveRandomElement:e(31856),Replace:e(42169),RotateLeft:e(86003),RotateRight:e(49498),SafeRange:e(82011),SendToBack:e(89545),SetAll:e(17810),Shuffle:e(33680),SortByDigits:e(90126),SpliceOne:e(19133),StableSort:e(19186),Swap:e(25630)}}),86922:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var a=e[0].length,m=1;m<e.length;m++)if(e[m].length!==a)return!1;return!0};s.exports=T}),63362:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41836),m=e(86922),c=function(o){var u="";if(!m(o))return u;for(var r=0;r<o.length;r++){for(var h=0;h<o[r].length;h++){var d=o[r][h].toString();d!=="undefined"?u+=a(d,2):u+="?",h<o[r].length-1&&(u+=" |")}if(r<o.length-1){u+=`
`;for(var l=0;l<o[r].length;l++)u+="---",l<o[r].length-1&&(u+="+");u+=`
`}}return u};s.exports=c}),92598:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.reverse()};s.exports=T}),21224:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=0;a<e.length;a++)e[a].reverse();return e};s.exports=T}),98717:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),m=function(c){return a(c,180)};s.exports=m}),44657:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),m=function(c,o){o===void 0&&(o=1);for(var u=0;u<o;u++)c=a(c,90);return c};s.exports=m}),37829:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86922),m=e(2429),c=function(o,u){if(u===void 0&&(u=90),!a(o))return null;if(typeof u!="string"&&(u=(u%360+360)%360),u===90||u===-270||u==="rotateLeft")o=m(o),o.reverse();else if(u===-90||u===270||u==="rotateRight")o.reverse(),o=m(o);else if(Math.abs(u)===180||u==="rotate180"){for(var r=0;r<o.length;r++)o[r].reverse();o.reverse()}return o};s.exports=c}),92632:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37829),m=function(c,o){o===void 0&&(o=1);for(var u=0;u<o;u++)c=a(c,-90);return c};s.exports=m}),69512:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86003),m=e(49498),c=function(o,u,r){if(u===void 0&&(u=0),r===void 0&&(r=0),r!==0&&(r<0?a(o,Math.abs(r)):m(o,r)),u!==0)for(var h=0;h<o.length;h++){var d=o[h];u<0?a(d,Math.abs(u)):m(d,u)}return o};s.exports=c}),2429:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var a=e.length,m=e[0].length,c=new Array(m),o=0;o<m;o++){c[o]=new Array(a);for(var u=a-1;u>-1;u--)c[o][u]=e[u][o]}return c};s.exports=T}),54915:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={CheckMatrix:e(86922),MatrixToString:e(63362),ReverseColumns:e(92598),ReverseRows:e(21224),Rotate180:e(98717),RotateLeft:e(44657),RotateMatrix:e(37829),RotateRight:e(92632),Translate:e(69512),TransposeMatrix:e(2429)}}),71334:(s=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(a,m){for(var c=new Uint8Array(a),o=c.length,u=m?"data:"+m+";base64,":"",r=0;r<o;r+=3)u+=T[c[r]>>2],u+=T[(c[r]&3)<<4|c[r+1]>>4],u+=T[(c[r+1]&15)<<2|c[r+2]>>6],u+=T[c[r+2]&63];return o%3===2?u=u.substring(0,u.length-1)+"=":o%3===1&&(u=u.substring(0,u.length-2)+"=="),u};s.exports=e}),53134:(s=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),a=0;a<T.length;a++)e[T.charCodeAt(a)]=a;var m=function(c){c=c.substr(c.indexOf(",")+1);var o=c.length,u=o*.75,r=0,h,d,l,p;c[o-1]==="="&&(u--,c[o-2]==="="&&u--);for(var g=new ArrayBuffer(u),x=new Uint8Array(g),y=0;y<o;y+=4)h=e[c.charCodeAt(y)],d=e[c.charCodeAt(y+1)],l=e[c.charCodeAt(y+2)],p=e[c.charCodeAt(y+3)],x[r++]=h<<2|d>>4,x[r++]=(d&15)<<4|l>>2,x[r++]=(l&3)<<6|p&63;return g};s.exports=m}),65839:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={ArrayBufferToBase64:e(71334),Base64ToArrayBuffer:e(53134)}}),91799:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Array:e(37105),Base64:e(65839),Objects:e(1183),String:e(31749),NOOP:e(29747),NULL:e(20242)}}),41786:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a={};for(var m in e)Array.isArray(e[m])?a[m]=e[m].slice(0):a[m]=e[m];return a};s.exports=T}),62644:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var a,m,c;if(typeof e!="object"||e===null)return e;a=Array.isArray(e)?[]:{};for(c in e)m=e[c],a[c]=T(m);return a};s.exports=T}),79291:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41212),m=function(){var c,o,u,r,h,d,l=arguments[0]||{},p=1,g=arguments.length,x=!1;for(typeof l=="boolean"&&(x=l,l=arguments[1]||{},p=2),g===p&&(l=this,--p);p<g;p++)if((c=arguments[p])!=null)for(o in c)u=l[o],r=c[o],l!==r&&(x&&r&&(a(r)||(h=Array.isArray(r)))?(h?(h=!1,d=u&&Array.isArray(u)?u:[]):d=u&&a(u)?u:{},l[o]=m(x,d,r)):r!==void 0&&(l[o]=r));return l};s.exports=m}),23568:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75508),m=e(35154),c=function(o,u,r){var h=m(o,u,null);if(h===null)return r;if(Array.isArray(h))return a.RND.pick(h);if(typeof h=="object"){if(h.hasOwnProperty("randInt"))return a.RND.integerInRange(h.randInt[0],h.randInt[1]);if(h.hasOwnProperty("randFloat"))return a.RND.realInRange(h.randFloat[0],h.randFloat[1])}else if(typeof h=="function")return h(u);return h};s.exports=c}),95540:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){var c=typeof e;return!e||c==="number"||c==="string"?m:e.hasOwnProperty(a)&&e[a]!==void 0?e[a]:m};s.exports=T}),82840:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35154),m=e(45319),c=function(o,u,r,h,d){d===void 0&&(d=r);var l=a(o,u,d);return m(l,r,h)};s.exports=c}),35154:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){if(!e&&!c||typeof e=="number")return m;if(e&&e.hasOwnProperty(a))return e[a];if(c&&c.hasOwnProperty(a))return c[a];if(a.indexOf(".")!==-1){for(var o=a.split("."),u=e,r=c,h=m,d=m,l=!0,p=!0,g=0;g<o.length;g++)u&&u.hasOwnProperty(o[g])?(h=u[o[g]],u=u[o[g]]):l=!1,r&&r.hasOwnProperty(o[g])?(d=r[o[g]],r=r[o[g]]):p=!1;return l?h:p?d:m}else return m};s.exports=T}),69036:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){for(var m=0;m<a.length;m++)if(!e.hasOwnProperty(a[m]))return!1;return!0};s.exports=T}),1985:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){for(var m=0;m<a.length;m++)if(e.hasOwnProperty(a[m]))return!0;return!1};s.exports=T}),97022:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.hasOwnProperty(a)};s.exports=T}),41212:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};s.exports=T}),46975:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),m=function(c,o){var u=a(c);for(var r in o)u.hasOwnProperty(r)||(u[r]=o[r]);return u};s.exports=m}),269:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(41786),m=function(c,o){var u=a(c);for(var r in o)u.hasOwnProperty(r)&&(u[r]=o[r]);return u};s.exports=m}),18254:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97022),m=function(c,o){for(var u={},r=0;r<o.length;r++){var h=o[r];a(c,h)&&(u[h]=c[h])}return u};s.exports=m}),61622:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(a))return e[a]=m,!0;if(a.indexOf(".")!==-1){for(var c=a.split("."),o=e,u=e,r=0;r<c.length;r++)if(o.hasOwnProperty(c[r]))u=o,o=o[c[r]];else return!1;return u[c[c.length-1]]=m,!0}return!1};s.exports=T}),1183:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Clone:e(41786),DeepCopy:e(62644),Extend:e(79291),GetAdvancedValue:e(23568),GetFastValue:e(95540),GetMinMaxValue:e(82840),GetValue:e(35154),HasAll:e(69036),HasAny:e(1985),HasValue:e(97022),IsPlainObject:e(41212),Merge:e(46975),MergeRight:e(269),Pick:e(18254),SetValue:e(61622)}}),27902:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return e.replace(/%([0-9]+)/g,function(m,c){return a[Number(c)-1]})};s.exports=T}),41836:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a,m,c){a===void 0&&(a=0),m===void 0&&(m=" "),c===void 0&&(c=3),e=e.toString();var o=0;if(a+1>=e.length)switch(c){case 1:e=new Array(a+1-e.length).join(m)+e;break;case 3:var u=Math.ceil((o=a-e.length)/2),r=o-u;e=new Array(r+1).join(m)+e+new Array(u+1).join(m);break;default:e=e+new Array(a+1-e.length).join(m);break}return e};s.exports=T}),33628:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,a){return a===0?e.slice(1):e.slice(0,a)+e.slice(a+1)};s.exports=T}),27671:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.split("").reverse().join("")};s.exports=T}),45650:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=Math.random()*16|0,m=e==="x"?a:a&3|8;return m.toString(16)})};s.exports=T}),35355:(s=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e&&e[0].toUpperCase()+e.slice(1)};s.exports=T}),31749:((s,T,e)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s.exports={Format:e(27902),Pad:e(41836),RemoveAt:e(33628),Reverse:e(27671),UppercaseFirst:e(35355),UUID:e(45650)}})},n={};function v(s){var T=n[s];if(T!==void 0)return T.exports;var e=n[s]={exports:{}};return i[s](e,e.exports,v),e.exports}v.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var S=v(85454);return S})())})(Am)),Am.exports}var gO=mO();const h2=pO(gO);var xO=Jt('<div class="absolute inset-0 pointer-events-none z-0 svelte-qbv4n9"></div>');function yO(f,t){er(t,!1);let i=de(),n,v={x:0,y:0};function S(a){if(!n||!n.scene.scenes[0])return;const m=n.scene.scenes[0];a.forEach(c=>{if(c)for(let o=0;o<3;o++){const u=m.add.circle(c.x,c.y,10,10419968,.8);m.physics.add.existing(u),m.tweens.add({targets:u,x:v.x,y:v.y,duration:1500+Math.random()*1e3,ease:"Cubic.easeOut",onComplete:()=>u.destroy()})}})}function s(a){if(!n||!n.scene.scenes[0])return;const m=n.scene.scenes[0];a.forEach(c=>{if(c)for(let o=0;o<3;o++){const u=m.add.circle(c.x,c.y,10,16726832,.8);m.physics.add.existing(u),m.tweens.add({targets:u,x:c.x+(Math.random()-.5)*100,y:window.innerHeight+100,duration:800+Math.random()*400,ease:"Power2.easeIn",onComplete:()=>u.destroy()})}})}ip(()=>{const a=document.querySelector(".playable-balance");if(a){const u=a.getBoundingClientRect();v={x:u.left+u.width/2,y:u.top+u.height/2}}else v={x:window.innerWidth*.8,y:150};const m={type:h2.AUTO,parent:Y(i),width:"100%",height:"100%",transparent:!0,backgroundColor:"rgba(0,0,0,0)",scene:{create:c,update:o},physics:{default:"arcade",arcade:{gravity:{y:0}}}};n=new h2.Game(m);function c(){const u=this;u.input.on("pointerdown",r=>{const h=u.add.circle(r.x,r.y,2,16777215,.3);u.tweens.add({targets:h,radius:100,alpha:0,duration:1e3,ease:"Power2",onComplete:()=>h.destroy()})}),this.particles=u.add.particles(0,0,"flare",{speed:{min:-5,max:5},scale:{start:.05,end:0},alpha:{start:.15,end:0},blendMode:"ADD",frequency:-1,gravityY:0}),u.input.on("pointermove",r=>{Math.random()>.5&&this.particles.emitParticleAt(r.x,r.y)})}function o(u,r){}window.addEventListener("resize",()=>{n&&n.scale.resize(window.innerWidth,window.innerHeight)})}),vT(()=>{n&&n.destroy(!0)});var T={triggerWinAnimation:S,triggerLossAnimation:s};Sr();var e=xO();return Qm(e,a=>ht(i,a),()=>Y(i)),_t(f,e),py(t,"triggerWinAnimation",S),py(t,"triggerLossAnimation",s),ir(T)}var TO=Jt('<button class="w-16 h-16 rounded-full bg-[#e5e7eb] border-2 border-zinc-400 shadow-[0_4px_8px_rgba(0,0,0,0.4),inset_0_2px_4px_white] flex items-center justify-center transition-transform active:scale-95"><span class="text-zinc-800 font-black text-xl"> </span></button>'),EO=Jt('<div class="text-white/40 text-[10px] uppercase tracking-widest font-bold"> </div>'),SO=Jt('<div class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[200] flex items-center justify-center p-4"><div class="bg-[#2a2a2a] rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.5),inset_0_1px_1px_rgba(255,255,255,0.1)] border border-white/10 p-8 max-w-lg w-full flex flex-col items-center gap-8"><h2 class="text-white text-xl font-medium text-center leading-tight">What odds do you want to take on a bet "Pass line odds"?</h2> <div class="flex flex-wrap items-center justify-center gap-4"><!> <button class="w-16 h-16 rounded-full bg-[#e5e7eb] border-2 border-zinc-400 shadow-[0_4px_8px_rgba(0,0,0,0.4),inset_0_2px_4px_white] flex items-center justify-center transition-transform active:scale-95"><span class="text-zinc-800 font-black text-[10px] leading-tight text-center uppercase">NO ODDS</span></button></div> <!></div></div>');function wO(f,t){er(t,!1);const i=de(),n=de(),v=bl();let S=Oe(t,"passlineAmount",8,0),s=Oe(t,"point",8,null);const T={2:2,12:2,3:2,11:2,4:3,10:3,5:4,9:4,6:5,8:5};function e(d){v("select",d)}Hn(()=>wn(s()),()=>{ht(i,T[s()]||3)}),Hn(()=>Y(i),()=>{ht(n,Array.from({length:Y(i)},(d,l)=>l+1))}),ru(),Sr();var a=SO(),m=ct(a),c=gt(ct(m),2),o=ct(c);sn(o,1,()=>Y(n),nn,(d,l)=>{var p=TO(),g=ct(p),x=ct(g);li(()=>Me(x,`${Y(l)??""}x`)),qe("click",p,()=>e(Y(l))),_t(d,p)});var u=gt(o,2),r=gt(c,2);{var h=d=>{var l=EO(),p=ct(l);li(()=>Me(p,`Point: ${s()??""} | Line Bet: $${S()??""}`)),_t(d,l)};Ie(r,d=>{S()>0&&d(h)})}qe("click",u,()=>e(0)),_t(f,a),ir()}var AO=Jt('<div><button class="flex-1 bg-[#0d3b1e] border border-white/20 rounded-t-md p-4 flex flex-col items-center justify-center hover:bg-[#1a4d2e] transition-colors group"><span> </span></button> <div class="flex border border-white/20 rounded-b-md overflow-hidden h-10"><div class="flex-1 bg-transparent border-r border-white/10"></div> <button class="flex-1 bg-[#0d3b1e] hover:bg-[#1a4d2e] transition-colors flex items-center justify-center px-2"><span class="text-[10px] font-black text-white tracking-widest uppercase">BUY</span></button></div></div>'),CO=Jt('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[200] flex items-center justify-center p-4"><div class="bg-[#2a2a2a] rounded-lg shadow-2xl border border-white/10 max-w-4xl w-full flex flex-col overflow-hidden"><div class="flex items-center justify-between px-4 py-2 border-b border-white/5"><span class="text-zinc-300 text-sm font-medium">You have chips on the new point... Where do you want to move them?</span> <button class="text-zinc-500 hover:text-white transition-colors"><!></button></div> <div class="p-2 flex gap-1 overflow-x-auto svelte-a32c0m"></div></div></div>');function MO(f,t){er(t,!1);const i=bl();let n=Oe(t,"currentPoint",8,null),v=Oe(t,"betToMove",24,()=>({id:"",amount:0}));const S=[2,3,4,5,6,8,9,10,11,12];function s(h,d){i("move",{targetNumber:h,type:d,amount:v().amount,sourceId:v().id})}function T(){i("close")}function e(h){return h===6?"SIX":h===9?"NINE":h.toString()}Sr();var a=CO(),m=ct(a),c=ct(m),o=gt(ct(c),2),u=ct(o);Hg(u,{size:20});var r=gt(c,2);sn(r,5,()=>S,nn,(h,d)=>{const l=pn(()=>Y(d)===n());var p=AO(),g=ct(p),x=ct(g),y=ct(x),E=gt(g,2),w=gt(ct(E),2);li(C=>{Qe(p,1,`flex-1 min-w-[100px] flex flex-col gap-1 ${Y(l)?"opacity-40 grayscale pointer-events-none":""}`),Qe(x,1,`text-4xl font-black text-white drop-shadow-md ${Y(d)===6||Y(d)===9?"rotate-[-15deg]":""}`),Me(y,C)},[()=>(Y(d),kt(()=>e(Y(d))))]),qe("click",g,()=>s(Y(d),"place")),qe("click",w,()=>s(Y(d),"buy")),_t(h,p)}),qe("click",o,T),_t(f,a),ir()}var RO=Jt('<div class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[200] flex items-center justify-center p-4"><div class="bg-[#2a2a2a] rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.5),inset_0_1px_1px_rgba(255,255,255,0.1)] border border-white/10 p-8 max-w-md w-full flex flex-col items-center gap-8"><div class="flex flex-col items-center gap-2"><h2 class="text-white text-xl font-medium text-center leading-tight"> </h2> <p class="text-zinc-400 text-sm text-center">A 5% commission of <span class="text-emerald-400 font-bold"> </span> </p></div> <div class="flex items-center justify-center gap-6 w-full"><button class="flex-1 h-16 rounded-lg bg-emerald-500 hover:bg-emerald-400 border-2 border-emerald-600 shadow-lg flex items-center justify-center transition-all active:scale-95 group"><span class="text-white font-black text-xl uppercase tracking-widest">YES</span></button> <button class="flex-1 h-16 rounded-lg bg-red-500 hover:bg-red-400 border-2 border-red-600 shadow-lg flex items-center justify-center transition-all active:scale-95 group"><span class="text-white font-black text-xl uppercase tracking-widest">NO</span></button></div> <div class="text-white/40 text-[10px] uppercase tracking-widest font-bold text-center">COMMISSION IS DEDUCTED UPON CONFIRMATION</div></div></div>');function PO(f,t){er(t,!1);const i=bl();let n=Oe(t,"amount",8,0),v=Oe(t,"betType",8,"Buy"),S=Oe(t,"commission",8,0);function s(){i("confirm")}function T(){i("decline")}Sr();var e=RO(),a=ct(e),m=ct(a),c=ct(m),o=ct(c),u=gt(c,2),r=gt(ct(u)),h=ct(r),d=gt(r),l=gt(m,2),p=ct(l),g=gt(p,2);li(x=>{Me(o,`Confirm ${v()??""} Bet Commission`),Me(h,`$${x??""}`),Me(d,` is required for this $${n()??""} ${v()??""} bet.`)},[()=>(wn(S()),kt(()=>S().toFixed(2)))]),qe("click",p,s),qe("click",g,T),_t(f,e),ir()}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const mT="173",bO=0,u2=1,IO=2,nR=1,LO=2,Xa=3,ho=0,Ms=1,Qa=2,ol=0,hc=1,c2=2,f2=3,d2=4,FO=5,uh=100,DO=101,OO=102,NO=103,BO=104,UO=200,VO=201,zO=202,GO=203,xy=204,yy=205,_O=206,WO=207,HO=208,XO=209,kO=210,YO=211,$O=212,KO=213,jO=214,Ty=0,Ey=1,Sy=2,Nc=3,wy=4,Ay=5,Cy=6,My=7,sR=0,QO=1,ZO=2,ll=0,JO=1,qO=2,t5=3,e5=4,i5=5,n5=6,s5=7,rR=300,Bc=301,Uc=302,Ry=303,Py=304,Xg=306,by=1e3,yh=1001,Iy=1002,Gr=1003,r5=1004,Uv=1005,pa=1006,V0=1007,Th=1008,uo=1009,aR=1010,oR=1011,np=1012,gT=1013,Hh=1014,Ja=1015,Bp=1016,xT=1017,yT=1018,Vc=1020,lR=35902,hR=1021,uR=1022,Ur=1023,cR=1024,fR=1025,uc=1026,zc=1027,dR=1028,TT=1029,pR=1030,ET=1031,ST=1033,Cm=33776,Mm=33777,Rm=33778,Pm=33779,Ly=35840,Fy=35841,Dy=35842,Oy=35843,Ny=36196,By=37492,Uy=37496,Vy=37808,zy=37809,Gy=37810,_y=37811,Wy=37812,Hy=37813,Xy=37814,ky=37815,Yy=37816,$y=37817,Ky=37818,jy=37819,Qy=37820,Zy=37821,bm=36492,Jy=36494,qy=36495,vR=36283,t1=36284,e1=36285,i1=36286,a5=3200,o5=3201,mR=0,l5=1,Xo="",cr="srgb",Gc="srgb-linear",Zm="linear",Ci="srgb",bu=7680,p2=519,h5=512,u5=513,c5=514,gR=515,f5=516,d5=517,p5=518,v5=519,v2=35044,m2="300 es",qa=2e3,Jm=2001;class Tf{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(i)===-1&&n[t].push(i)}hasEventListener(t,i){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(i)!==-1}removeEventListener(t,i){const n=this._listeners;if(n===void 0)return;const v=n[t];if(v!==void 0){const S=v.indexOf(i);S!==-1&&v.splice(S,1)}}dispatchEvent(t){const i=this._listeners;if(i===void 0)return;const n=i[t.type];if(n!==void 0){t.target=this;const v=n.slice(0);for(let S=0,s=v.length;S<s;S++)v[S].call(this,t);t.target=null}}}const ts=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],z0=Math.PI/180,n1=180/Math.PI;function Up(){const f=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ts[f&255]+ts[f>>8&255]+ts[f>>16&255]+ts[f>>24&255]+"-"+ts[t&255]+ts[t>>8&255]+"-"+ts[t>>16&15|64]+ts[t>>24&255]+"-"+ts[i&63|128]+ts[i>>8&255]+"-"+ts[i>>16&255]+ts[i>>24&255]+ts[n&255]+ts[n>>8&255]+ts[n>>16&255]+ts[n>>24&255]).toLowerCase()}function si(f,t,i){return Math.max(t,Math.min(i,f))}function m5(f,t){return(f%t+t)%t}function G0(f,t,i){return(1-i)*f+i*t}function sd(f,t){switch(t.constructor){case Float32Array:return f;case Uint32Array:return f/4294967295;case Uint16Array:return f/65535;case Uint8Array:return f/255;case Int32Array:return Math.max(f/2147483647,-1);case Int16Array:return Math.max(f/32767,-1);case Int8Array:return Math.max(f/127,-1);default:throw new Error("Invalid component type.")}}function vs(f,t){switch(t.constructor){case Float32Array:return f;case Uint32Array:return Math.round(f*4294967295);case Uint16Array:return Math.round(f*65535);case Uint8Array:return Math.round(f*255);case Int32Array:return Math.round(f*2147483647);case Int16Array:return Math.round(f*32767);case Int8Array:return Math.round(f*127);default:throw new Error("Invalid component type.")}}class ai{constructor(t=0,i=0){ai.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,n=this.y,v=t.elements;return this.x=v[0]*i+v[3]*n+v[6],this.y=v[1]*i+v[4]*n+v[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=si(this.x,t.x,i.x),this.y=si(this.y,t.y,i.y),this}clampScalar(t,i){return this.x=si(this.x,t,i),this.y=si(this.y,t,i),this}clampLength(t,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(si(n,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const n=this.dot(t)/i;return Math.acos(si(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,n=this.y-t.y;return i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const n=Math.cos(i),v=Math.sin(i),S=this.x-t.x,s=this.y-t.y;return this.x=S*n-s*v+t.x,this.y=S*v+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ve{constructor(t,i,n,v,S,s,T,e,a){Ve.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,i,n,v,S,s,T,e,a)}set(t,i,n,v,S,s,T,e,a){const m=this.elements;return m[0]=t,m[1]=v,m[2]=T,m[3]=i,m[4]=S,m[5]=e,m[6]=n,m[7]=s,m[8]=a,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,n=t.elements;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this}extractBasis(t,i,n){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const n=t.elements,v=i.elements,S=this.elements,s=n[0],T=n[3],e=n[6],a=n[1],m=n[4],c=n[7],o=n[2],u=n[5],r=n[8],h=v[0],d=v[3],l=v[6],p=v[1],g=v[4],x=v[7],y=v[2],E=v[5],w=v[8];return S[0]=s*h+T*p+e*y,S[3]=s*d+T*g+e*E,S[6]=s*l+T*x+e*w,S[1]=a*h+m*p+c*y,S[4]=a*d+m*g+c*E,S[7]=a*l+m*x+c*w,S[2]=o*h+u*p+r*y,S[5]=o*d+u*g+r*E,S[8]=o*l+u*x+r*w,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],n=t[1],v=t[2],S=t[3],s=t[4],T=t[5],e=t[6],a=t[7],m=t[8];return i*s*m-i*T*a-n*S*m+n*T*e+v*S*a-v*s*e}invert(){const t=this.elements,i=t[0],n=t[1],v=t[2],S=t[3],s=t[4],T=t[5],e=t[6],a=t[7],m=t[8],c=m*s-T*a,o=T*e-m*S,u=a*S-s*e,r=i*c+n*o+v*u;if(r===0)return this.set(0,0,0,0,0,0,0,0,0);const h=1/r;return t[0]=c*h,t[1]=(v*a-m*n)*h,t[2]=(T*n-v*s)*h,t[3]=o*h,t[4]=(m*i-v*e)*h,t[5]=(v*S-T*i)*h,t[6]=u*h,t[7]=(n*e-a*i)*h,t[8]=(s*i-n*S)*h,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,n,v,S,s,T){const e=Math.cos(S),a=Math.sin(S);return this.set(n*e,n*a,-n*(e*s+a*T)+s+t,-v*a,v*e,-v*(-a*s+e*T)+T+i,0,0,1),this}scale(t,i){return this.premultiply(_0.makeScale(t,i)),this}rotate(t){return this.premultiply(_0.makeRotation(-t)),this}translate(t,i){return this.premultiply(_0.makeTranslation(t,i)),this}makeTranslation(t,i){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,i,0,0,1),this}makeRotation(t){const i=Math.cos(t),n=Math.sin(t);return this.set(i,-n,0,n,i,0,0,0,1),this}makeScale(t,i){return this.set(t,0,0,0,i,0,0,0,1),this}equals(t){const i=this.elements,n=t.elements;for(let v=0;v<9;v++)if(i[v]!==n[v])return!1;return!0}fromArray(t,i=0){for(let n=0;n<9;n++)this.elements[n]=t[n+i];return this}toArray(t=[],i=0){const n=this.elements;return t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const _0=new Ve;function xR(f){for(let t=f.length-1;t>=0;--t)if(f[t]>=65535)return!0;return!1}function qm(f){return document.createElementNS("http://www.w3.org/1999/xhtml",f)}function g5(){const f=qm("canvas");return f.style.display="block",f}const g2={};function Ju(f){f in g2||(g2[f]=!0,console.warn(f))}function x5(f,t,i){return new Promise(function(n,v){function S(){switch(f.clientWaitSync(t,f.SYNC_FLUSH_COMMANDS_BIT,0)){case f.WAIT_FAILED:v();break;case f.TIMEOUT_EXPIRED:setTimeout(S,i);break;default:n()}}setTimeout(S,i)})}function y5(f){const t=f.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function T5(f){const t=f.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const x2=new Ve().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),y2=new Ve().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function E5(){const f={enabled:!0,workingColorSpace:Gc,spaces:{},convert:function(v,S,s){return this.enabled===!1||S===s||!S||!s||(this.spaces[S].transfer===Ci&&(v.r=oo(v.r),v.g=oo(v.g),v.b=oo(v.b)),this.spaces[S].primaries!==this.spaces[s].primaries&&(v.applyMatrix3(this.spaces[S].toXYZ),v.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Ci&&(v.r=cc(v.r),v.g=cc(v.g),v.b=cc(v.b))),v},fromWorkingColorSpace:function(v,S){return this.convert(v,this.workingColorSpace,S)},toWorkingColorSpace:function(v,S){return this.convert(v,S,this.workingColorSpace)},getPrimaries:function(v){return this.spaces[v].primaries},getTransfer:function(v){return v===Xo?Zm:this.spaces[v].transfer},getLuminanceCoefficients:function(v,S=this.workingColorSpace){return v.fromArray(this.spaces[S].luminanceCoefficients)},define:function(v){Object.assign(this.spaces,v)},_getMatrix:function(v,S,s){return v.copy(this.spaces[S].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(v){return this.spaces[v].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(v=this.workingColorSpace){return this.spaces[v].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],n=[.3127,.329];return f.define({[Gc]:{primaries:t,whitePoint:n,transfer:Zm,toXYZ:x2,fromXYZ:y2,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:cr},outputColorSpaceConfig:{drawingBufferColorSpace:cr}},[cr]:{primaries:t,whitePoint:n,transfer:Ci,toXYZ:x2,fromXYZ:y2,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:cr}}}),f}const ci=E5();function oo(f){return f<.04045?f*.0773993808:Math.pow(f*.9478672986+.0521327014,2.4)}function cc(f){return f<.0031308?f*12.92:1.055*Math.pow(f,.41666)-.055}let Iu;class S5{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{Iu===void 0&&(Iu=qm("canvas")),Iu.width=t.width,Iu.height=t.height;const n=Iu.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),i=Iu}return i.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const i=qm("canvas");i.width=t.width,i.height=t.height;const n=i.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const v=n.getImageData(0,0,t.width,t.height),S=v.data;for(let s=0;s<S.length;s++)S[s]=oo(S[s]/255)*255;return n.putImageData(v,0,0),i}else if(t.data){const i=t.data.slice(0);for(let n=0;n<i.length;n++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[n]=Math.floor(oo(i[n]/255)*255):i[n]=oo(i[n]);return{data:i,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let w5=0;class yR{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:w5++}),this.uuid=Up(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},v=this.data;if(v!==null){let S;if(Array.isArray(v)){S=[];for(let s=0,T=v.length;s<T;s++)v[s].isDataTexture?S.push(W0(v[s].image)):S.push(W0(v[s]))}else S=W0(v);n.url=S}return i||(t.images[this.uuid]=n),n}}function W0(f){return typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&f instanceof ImageBitmap?S5.getDataURL(f):f.data?{data:Array.from(f.data),width:f.width,height:f.height,type:f.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let A5=0;class Rs extends Tf{constructor(t=Rs.DEFAULT_IMAGE,i=Rs.DEFAULT_MAPPING,n=yh,v=yh,S=pa,s=Th,T=Ur,e=uo,a=Rs.DEFAULT_ANISOTROPY,m=Xo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:A5++}),this.uuid=Up(),this.name="",this.source=new yR(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=n,this.wrapT=v,this.magFilter=S,this.minFilter=s,this.anisotropy=a,this.format=T,this.internalFormat=null,this.type=e,this.offset=new ai(0,0),this.repeat=new ai(1,1),this.center=new ai(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ve,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),i||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==rR)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case by:t.x=t.x-Math.floor(t.x);break;case yh:t.x=t.x<0?0:1;break;case Iy:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case by:t.y=t.y-Math.floor(t.y);break;case yh:t.y=t.y<0?0:1;break;case Iy:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Rs.DEFAULT_IMAGE=null;Rs.DEFAULT_MAPPING=rR;Rs.DEFAULT_ANISOTROPY=1;class Mi{constructor(t=0,i=0,n=0,v=1){Mi.prototype.isVector4=!0,this.x=t,this.y=i,this.z=n,this.w=v}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,n,v){return this.x=t,this.y=i,this.z=n,this.w=v,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,n=this.y,v=this.z,S=this.w,s=t.elements;return this.x=s[0]*i+s[4]*n+s[8]*v+s[12]*S,this.y=s[1]*i+s[5]*n+s[9]*v+s[13]*S,this.z=s[2]*i+s[6]*n+s[10]*v+s[14]*S,this.w=s[3]*i+s[7]*n+s[11]*v+s[15]*S,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,n,v,S;const e=t.elements,a=e[0],m=e[4],c=e[8],o=e[1],u=e[5],r=e[9],h=e[2],d=e[6],l=e[10];if(Math.abs(m-o)<.01&&Math.abs(c-h)<.01&&Math.abs(r-d)<.01){if(Math.abs(m+o)<.1&&Math.abs(c+h)<.1&&Math.abs(r+d)<.1&&Math.abs(a+u+l-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const g=(a+1)/2,x=(u+1)/2,y=(l+1)/2,E=(m+o)/4,w=(c+h)/4,C=(r+d)/4;return g>x&&g>y?g<.01?(n=0,v=.707106781,S=.707106781):(n=Math.sqrt(g),v=E/n,S=w/n):x>y?x<.01?(n=.707106781,v=0,S=.707106781):(v=Math.sqrt(x),n=E/v,S=C/v):y<.01?(n=.707106781,v=.707106781,S=0):(S=Math.sqrt(y),n=w/S,v=C/S),this.set(n,v,S,i),this}let p=Math.sqrt((d-r)*(d-r)+(c-h)*(c-h)+(o-m)*(o-m));return Math.abs(p)<.001&&(p=1),this.x=(d-r)/p,this.y=(c-h)/p,this.z=(o-m)/p,this.w=Math.acos((a+u+l-1)/2),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this.w=i[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=si(this.x,t.x,i.x),this.y=si(this.y,t.y,i.y),this.z=si(this.z,t.z,i.z),this.w=si(this.w,t.w,i.w),this}clampScalar(t,i){return this.x=si(this.x,t,i),this.y=si(this.y,t,i),this.z=si(this.z,t,i),this.w=si(this.w,t,i),this}clampLength(t,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(si(n,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this.w=t.w+(i.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class C5 extends Tf{constructor(t=1,i=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=i,this.depth=1,this.scissor=new Mi(0,0,t,i),this.scissorTest=!1,this.viewport=new Mi(0,0,t,i);const v={width:t,height:i,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:pa,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const S=new Rs(v,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);S.flipY=!1,S.generateMipmaps=n.generateMipmaps,S.internalFormat=n.internalFormat,this.textures=[];const s=n.count;for(let T=0;T<s;T++)this.textures[T]=S.clone(),this.textures[T].isRenderTargetTexture=!0,this.textures[T].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,i,n=1){if(this.width!==t||this.height!==i||this.depth!==n){this.width=t,this.height=i,this.depth=n;for(let v=0,S=this.textures.length;v<S;v++)this.textures[v].image.width=t,this.textures[v].image.height=i,this.textures[v].image.depth=n;this.dispose()}this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,v=t.textures.length;n<v;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},t.texture.image);return this.texture.source=new yR(i),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xh extends C5{constructor(t=1,i=1,n={}){super(t,i,n),this.isWebGLRenderTarget=!0}}class TR extends Rs{constructor(t=null,i=1,n=1,v=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:i,height:n,depth:v},this.magFilter=Gr,this.minFilter=Gr,this.wrapR=yh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class M5 extends Rs{constructor(t=null,i=1,n=1,v=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:i,height:n,depth:v},this.magFilter=Gr,this.minFilter=Gr,this.wrapR=yh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let Vp=class{constructor(t=0,i=0,n=0,v=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=n,this._w=v}static slerpFlat(t,i,n,v,S,s,T){let e=n[v+0],a=n[v+1],m=n[v+2],c=n[v+3];const o=S[s+0],u=S[s+1],r=S[s+2],h=S[s+3];if(T===0){t[i+0]=e,t[i+1]=a,t[i+2]=m,t[i+3]=c;return}if(T===1){t[i+0]=o,t[i+1]=u,t[i+2]=r,t[i+3]=h;return}if(c!==h||e!==o||a!==u||m!==r){let d=1-T;const l=e*o+a*u+m*r+c*h,p=l>=0?1:-1,g=1-l*l;if(g>Number.EPSILON){const y=Math.sqrt(g),E=Math.atan2(y,l*p);d=Math.sin(d*E)/y,T=Math.sin(T*E)/y}const x=T*p;if(e=e*d+o*x,a=a*d+u*x,m=m*d+r*x,c=c*d+h*x,d===1-T){const y=1/Math.sqrt(e*e+a*a+m*m+c*c);e*=y,a*=y,m*=y,c*=y}}t[i]=e,t[i+1]=a,t[i+2]=m,t[i+3]=c}static multiplyQuaternionsFlat(t,i,n,v,S,s){const T=n[v],e=n[v+1],a=n[v+2],m=n[v+3],c=S[s],o=S[s+1],u=S[s+2],r=S[s+3];return t[i]=T*r+m*c+e*u-a*o,t[i+1]=e*r+m*o+a*c-T*u,t[i+2]=a*r+m*u+T*o-e*c,t[i+3]=m*r-T*c-e*o-a*u,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,n,v){return this._x=t,this._y=i,this._z=n,this._w=v,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i=!0){const n=t._x,v=t._y,S=t._z,s=t._order,T=Math.cos,e=Math.sin,a=T(n/2),m=T(v/2),c=T(S/2),o=e(n/2),u=e(v/2),r=e(S/2);switch(s){case"XYZ":this._x=o*m*c+a*u*r,this._y=a*u*c-o*m*r,this._z=a*m*r+o*u*c,this._w=a*m*c-o*u*r;break;case"YXZ":this._x=o*m*c+a*u*r,this._y=a*u*c-o*m*r,this._z=a*m*r-o*u*c,this._w=a*m*c+o*u*r;break;case"ZXY":this._x=o*m*c-a*u*r,this._y=a*u*c+o*m*r,this._z=a*m*r+o*u*c,this._w=a*m*c-o*u*r;break;case"ZYX":this._x=o*m*c-a*u*r,this._y=a*u*c+o*m*r,this._z=a*m*r-o*u*c,this._w=a*m*c+o*u*r;break;case"YZX":this._x=o*m*c+a*u*r,this._y=a*u*c+o*m*r,this._z=a*m*r-o*u*c,this._w=a*m*c-o*u*r;break;case"XZY":this._x=o*m*c-a*u*r,this._y=a*u*c-o*m*r,this._z=a*m*r+o*u*c,this._w=a*m*c+o*u*r;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const n=i/2,v=Math.sin(n);return this._x=t.x*v,this._y=t.y*v,this._z=t.z*v,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,n=i[0],v=i[4],S=i[8],s=i[1],T=i[5],e=i[9],a=i[2],m=i[6],c=i[10],o=n+T+c;if(o>0){const u=.5/Math.sqrt(o+1);this._w=.25/u,this._x=(m-e)*u,this._y=(S-a)*u,this._z=(s-v)*u}else if(n>T&&n>c){const u=2*Math.sqrt(1+n-T-c);this._w=(m-e)/u,this._x=.25*u,this._y=(v+s)/u,this._z=(S+a)/u}else if(T>c){const u=2*Math.sqrt(1+T-n-c);this._w=(S-a)/u,this._x=(v+s)/u,this._y=.25*u,this._z=(e+m)/u}else{const u=2*Math.sqrt(1+c-n-T);this._w=(s-v)/u,this._x=(S+a)/u,this._y=(e+m)/u,this._z=.25*u}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let n=t.dot(i)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(si(this.dot(t),-1,1)))}rotateTowards(t,i){const n=this.angleTo(t);if(n===0)return this;const v=Math.min(1,i/n);return this.slerp(t,v),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const n=t._x,v=t._y,S=t._z,s=t._w,T=i._x,e=i._y,a=i._z,m=i._w;return this._x=n*m+s*T+v*a-S*e,this._y=v*m+s*e+S*T-n*a,this._z=S*m+s*a+n*e-v*T,this._w=s*m-n*T-v*e-S*a,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);const n=this._x,v=this._y,S=this._z,s=this._w;let T=s*t._w+n*t._x+v*t._y+S*t._z;if(T<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,T=-T):this.copy(t),T>=1)return this._w=s,this._x=n,this._y=v,this._z=S,this;const e=1-T*T;if(e<=Number.EPSILON){const u=1-i;return this._w=u*s+i*this._w,this._x=u*n+i*this._x,this._y=u*v+i*this._y,this._z=u*S+i*this._z,this.normalize(),this}const a=Math.sqrt(e),m=Math.atan2(a,T),c=Math.sin((1-i)*m)/a,o=Math.sin(i*m)/a;return this._w=s*c+this._w*o,this._x=n*c+this._x*o,this._y=v*c+this._y*o,this._z=S*c+this._z*o,this._onChangeCallback(),this}slerpQuaternions(t,i,n){return this.copy(t).slerp(i,n)}random(){const t=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),n=Math.random(),v=Math.sqrt(1-n),S=Math.sqrt(n);return this.set(v*Math.sin(t),v*Math.cos(t),S*Math.sin(i),S*Math.cos(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};class St{constructor(t=0,i=0,n=0){St.prototype.isVector3=!0,this.x=t,this.y=i,this.z=n}set(t,i,n){return n===void 0&&(n=this.z),this.x=t,this.y=i,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(T2.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(T2.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,n=this.y,v=this.z,S=t.elements;return this.x=S[0]*i+S[3]*n+S[6]*v,this.y=S[1]*i+S[4]*n+S[7]*v,this.z=S[2]*i+S[5]*n+S[8]*v,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,n=this.y,v=this.z,S=t.elements,s=1/(S[3]*i+S[7]*n+S[11]*v+S[15]);return this.x=(S[0]*i+S[4]*n+S[8]*v+S[12])*s,this.y=(S[1]*i+S[5]*n+S[9]*v+S[13])*s,this.z=(S[2]*i+S[6]*n+S[10]*v+S[14])*s,this}applyQuaternion(t){const i=this.x,n=this.y,v=this.z,S=t.x,s=t.y,T=t.z,e=t.w,a=2*(s*v-T*n),m=2*(T*i-S*v),c=2*(S*n-s*i);return this.x=i+e*a+s*c-T*m,this.y=n+e*m+T*a-S*c,this.z=v+e*c+S*m-s*a,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,n=this.y,v=this.z,S=t.elements;return this.x=S[0]*i+S[4]*n+S[8]*v,this.y=S[1]*i+S[5]*n+S[9]*v,this.z=S[2]*i+S[6]*n+S[10]*v,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=si(this.x,t.x,i.x),this.y=si(this.y,t.y,i.y),this.z=si(this.z,t.z,i.z),this}clampScalar(t,i){return this.x=si(this.x,t,i),this.y=si(this.y,t,i),this.z=si(this.z,t,i),this}clampLength(t,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(si(n,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const n=t.x,v=t.y,S=t.z,s=i.x,T=i.y,e=i.z;return this.x=v*e-S*T,this.y=S*s-n*e,this.z=n*T-v*s,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const n=t.dot(this)/i;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return H0.copy(this).projectOnVector(t),this.sub(H0)}reflect(t){return this.sub(H0.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const n=this.dot(t)/i;return Math.acos(si(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,n=this.y-t.y,v=this.z-t.z;return i*i+n*n+v*v}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,n){const v=Math.sin(i)*t;return this.x=v*Math.sin(n),this.y=Math.cos(i)*t,this.z=v*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,n){return this.x=t*Math.sin(i),this.y=n,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),v=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=n,this.z=v,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,i=Math.random()*2-1,n=Math.sqrt(1-i*i);return this.x=n*Math.cos(t),this.y=i,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const H0=new St,T2=new Vp;class zp{constructor(t=new St(1/0,1/0,1/0),i=new St(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){this.makeEmpty();for(let i=0,n=t.length;i<n;i+=3)this.expandByPoint(Rr.fromArray(t,i));return this}setFromBufferAttribute(t){this.makeEmpty();for(let i=0,n=t.count;i<n;i++)this.expandByPoint(Rr.fromBufferAttribute(t,i));return this}setFromPoints(t){this.makeEmpty();for(let i=0,n=t.length;i<n;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const n=Rr.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const S=n.getAttribute("position");if(i===!0&&S!==void 0&&t.isInstancedMesh!==!0)for(let s=0,T=S.count;s<T;s++)t.isMesh===!0?t.getVertexPosition(s,Rr):Rr.fromBufferAttribute(S,s),Rr.applyMatrix4(t.matrixWorld),this.expandByPoint(Rr);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Vv.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Vv.copy(n.boundingBox)),Vv.applyMatrix4(t.matrixWorld),this.union(Vv)}const v=t.children;for(let S=0,s=v.length;S<s;S++)this.expandByObject(v[S],i);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Rr),Rr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,n;return t.normal.x>0?(i=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),i<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(rd),zv.subVectors(this.max,rd),Lu.subVectors(t.a,rd),Fu.subVectors(t.b,rd),Du.subVectors(t.c,rd),Do.subVectors(Fu,Lu),Oo.subVectors(Du,Fu),$l.subVectors(Lu,Du);let i=[0,-Do.z,Do.y,0,-Oo.z,Oo.y,0,-$l.z,$l.y,Do.z,0,-Do.x,Oo.z,0,-Oo.x,$l.z,0,-$l.x,-Do.y,Do.x,0,-Oo.y,Oo.x,0,-$l.y,$l.x,0];return!X0(i,Lu,Fu,Du,zv)||(i=[1,0,0,0,1,0,0,0,1],!X0(i,Lu,Fu,Du,zv))?!1:(Gv.crossVectors(Do,Oo),i=[Gv.x,Gv.y,Gv.z],X0(i,Lu,Fu,Du,zv))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Rr).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Rr).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Oa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Oa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Oa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Oa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Oa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Oa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Oa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Oa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Oa),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Oa=[new St,new St,new St,new St,new St,new St,new St,new St],Rr=new St,Vv=new zp,Lu=new St,Fu=new St,Du=new St,Do=new St,Oo=new St,$l=new St,rd=new St,zv=new St,Gv=new St,Kl=new St;function X0(f,t,i,n,v){for(let S=0,s=f.length-3;S<=s;S+=3){Kl.fromArray(f,S);const T=v.x*Math.abs(Kl.x)+v.y*Math.abs(Kl.y)+v.z*Math.abs(Kl.z),e=t.dot(Kl),a=i.dot(Kl),m=n.dot(Kl);if(Math.max(-Math.max(e,a,m),Math.min(e,a,m))>T)return!1}return!0}const R5=new zp,ad=new St,k0=new St;class wT{constructor(t=new St,i=-1){this.isSphere=!0,this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const n=this.center;i!==void 0?n.copy(i):R5.setFromPoints(t).getCenter(n);let v=0;for(let S=0,s=t.length;S<s;S++)v=Math.max(v,n.distanceToSquared(t[S]));return this.radius=Math.sqrt(v),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const n=this.center.distanceToSquared(t);return i.copy(t),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ad.subVectors(t,this.center);const i=ad.lengthSq();if(i>this.radius*this.radius){const n=Math.sqrt(i),v=(n-this.radius)*.5;this.center.addScaledVector(ad,v/n),this.radius+=v}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(k0.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ad.copy(t.center).add(k0)),this.expandByPoint(ad.copy(t.center).sub(k0))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Na=new St,Y0=new St,_v=new St,No=new St,$0=new St,Wv=new St,K0=new St;let P5=class{constructor(t=new St,i=new St(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Na)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);const n=i.dot(this.direction);return n<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=Na.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(Na.copy(this.origin).addScaledVector(this.direction,i),Na.distanceToSquared(t))}distanceSqToSegment(t,i,n,v){Y0.copy(t).add(i).multiplyScalar(.5),_v.copy(i).sub(t).normalize(),No.copy(this.origin).sub(Y0);const S=t.distanceTo(i)*.5,s=-this.direction.dot(_v),T=No.dot(this.direction),e=-No.dot(_v),a=No.lengthSq(),m=Math.abs(1-s*s);let c,o,u,r;if(m>0)if(c=s*e-T,o=s*T-e,r=S*m,c>=0)if(o>=-r)if(o<=r){const h=1/m;c*=h,o*=h,u=c*(c+s*o+2*T)+o*(s*c+o+2*e)+a}else o=S,c=Math.max(0,-(s*o+T)),u=-c*c+o*(o+2*e)+a;else o=-S,c=Math.max(0,-(s*o+T)),u=-c*c+o*(o+2*e)+a;else o<=-r?(c=Math.max(0,-(-s*S+T)),o=c>0?-S:Math.min(Math.max(-S,-e),S),u=-c*c+o*(o+2*e)+a):o<=r?(c=0,o=Math.min(Math.max(-S,-e),S),u=o*(o+2*e)+a):(c=Math.max(0,-(s*S+T)),o=c>0?S:Math.min(Math.max(-S,-e),S),u=-c*c+o*(o+2*e)+a);else o=s>0?-S:S,c=Math.max(0,-(s*o+T)),u=-c*c+o*(o+2*e)+a;return n&&n.copy(this.origin).addScaledVector(this.direction,c),v&&v.copy(Y0).addScaledVector(_v,o),u}intersectSphere(t,i){Na.subVectors(t.center,this.origin);const n=Na.dot(this.direction),v=Na.dot(Na)-n*n,S=t.radius*t.radius;if(v>S)return null;const s=Math.sqrt(S-v),T=n-s,e=n+s;return e<0?null:T<0?this.at(e,i):this.at(T,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/i;return n>=0?n:null}intersectPlane(t,i){const n=this.distanceToPlane(t);return n===null?null:this.at(n,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return i===0||t.normal.dot(this.direction)*i<0}intersectBox(t,i){let n,v,S,s,T,e;const a=1/this.direction.x,m=1/this.direction.y,c=1/this.direction.z,o=this.origin;return a>=0?(n=(t.min.x-o.x)*a,v=(t.max.x-o.x)*a):(n=(t.max.x-o.x)*a,v=(t.min.x-o.x)*a),m>=0?(S=(t.min.y-o.y)*m,s=(t.max.y-o.y)*m):(S=(t.max.y-o.y)*m,s=(t.min.y-o.y)*m),n>s||S>v||((S>n||isNaN(n))&&(n=S),(s<v||isNaN(v))&&(v=s),c>=0?(T=(t.min.z-o.z)*c,e=(t.max.z-o.z)*c):(T=(t.max.z-o.z)*c,e=(t.min.z-o.z)*c),n>e||T>v)||((T>n||n!==n)&&(n=T),(e<v||v!==v)&&(v=e),v<0)?null:this.at(n>=0?n:v,i)}intersectsBox(t){return this.intersectBox(t,Na)!==null}intersectTriangle(t,i,n,v,S){$0.subVectors(i,t),Wv.subVectors(n,t),K0.crossVectors($0,Wv);let s=this.direction.dot(K0),T;if(s>0){if(v)return null;T=1}else if(s<0)T=-1,s=-s;else return null;No.subVectors(this.origin,t);const e=T*this.direction.dot(Wv.crossVectors(No,Wv));if(e<0)return null;const a=T*this.direction.dot($0.cross(No));if(a<0||e+a>s)return null;const m=-T*No.dot(K0);return m<0?null:this.at(m/s,S)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class ji{constructor(t,i,n,v,S,s,T,e,a,m,c,o,u,r,h,d){ji.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,i,n,v,S,s,T,e,a,m,c,o,u,r,h,d)}set(t,i,n,v,S,s,T,e,a,m,c,o,u,r,h,d){const l=this.elements;return l[0]=t,l[4]=i,l[8]=n,l[12]=v,l[1]=S,l[5]=s,l[9]=T,l[13]=e,l[2]=a,l[6]=m,l[10]=c,l[14]=o,l[3]=u,l[7]=r,l[11]=h,l[15]=d,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ji().fromArray(this.elements)}copy(t){const i=this.elements,n=t.elements;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this}copyPosition(t){const i=this.elements,n=t.elements;return i[12]=n[12],i[13]=n[13],i[14]=n[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,n){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,i,n){return this.set(t.x,i.x,n.x,0,t.y,i.y,n.y,0,t.z,i.z,n.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,n=t.elements,v=1/Ou.setFromMatrixColumn(t,0).length(),S=1/Ou.setFromMatrixColumn(t,1).length(),s=1/Ou.setFromMatrixColumn(t,2).length();return i[0]=n[0]*v,i[1]=n[1]*v,i[2]=n[2]*v,i[3]=0,i[4]=n[4]*S,i[5]=n[5]*S,i[6]=n[6]*S,i[7]=0,i[8]=n[8]*s,i[9]=n[9]*s,i[10]=n[10]*s,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){const i=this.elements,n=t.x,v=t.y,S=t.z,s=Math.cos(n),T=Math.sin(n),e=Math.cos(v),a=Math.sin(v),m=Math.cos(S),c=Math.sin(S);if(t.order==="XYZ"){const o=s*m,u=s*c,r=T*m,h=T*c;i[0]=e*m,i[4]=-e*c,i[8]=a,i[1]=u+r*a,i[5]=o-h*a,i[9]=-T*e,i[2]=h-o*a,i[6]=r+u*a,i[10]=s*e}else if(t.order==="YXZ"){const o=e*m,u=e*c,r=a*m,h=a*c;i[0]=o+h*T,i[4]=r*T-u,i[8]=s*a,i[1]=s*c,i[5]=s*m,i[9]=-T,i[2]=u*T-r,i[6]=h+o*T,i[10]=s*e}else if(t.order==="ZXY"){const o=e*m,u=e*c,r=a*m,h=a*c;i[0]=o-h*T,i[4]=-s*c,i[8]=r+u*T,i[1]=u+r*T,i[5]=s*m,i[9]=h-o*T,i[2]=-s*a,i[6]=T,i[10]=s*e}else if(t.order==="ZYX"){const o=s*m,u=s*c,r=T*m,h=T*c;i[0]=e*m,i[4]=r*a-u,i[8]=o*a+h,i[1]=e*c,i[5]=h*a+o,i[9]=u*a-r,i[2]=-a,i[6]=T*e,i[10]=s*e}else if(t.order==="YZX"){const o=s*e,u=s*a,r=T*e,h=T*a;i[0]=e*m,i[4]=h-o*c,i[8]=r*c+u,i[1]=c,i[5]=s*m,i[9]=-T*m,i[2]=-a*m,i[6]=u*c+r,i[10]=o-h*c}else if(t.order==="XZY"){const o=s*e,u=s*a,r=T*e,h=T*a;i[0]=e*m,i[4]=-c,i[8]=a*m,i[1]=o*c+h,i[5]=s*m,i[9]=u*c-r,i[2]=r*c-u,i[6]=T*m,i[10]=h*c+o}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(b5,t,I5)}lookAt(t,i,n){const v=this.elements;return Us.subVectors(t,i),Us.lengthSq()===0&&(Us.z=1),Us.normalize(),Bo.crossVectors(n,Us),Bo.lengthSq()===0&&(Math.abs(n.z)===1?Us.x+=1e-4:Us.z+=1e-4,Us.normalize(),Bo.crossVectors(n,Us)),Bo.normalize(),Hv.crossVectors(Us,Bo),v[0]=Bo.x,v[4]=Hv.x,v[8]=Us.x,v[1]=Bo.y,v[5]=Hv.y,v[9]=Us.y,v[2]=Bo.z,v[6]=Hv.z,v[10]=Us.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const n=t.elements,v=i.elements,S=this.elements,s=n[0],T=n[4],e=n[8],a=n[12],m=n[1],c=n[5],o=n[9],u=n[13],r=n[2],h=n[6],d=n[10],l=n[14],p=n[3],g=n[7],x=n[11],y=n[15],E=v[0],w=v[4],C=v[8],A=v[12],M=v[1],R=v[5],P=v[9],b=v[13],F=v[2],I=v[6],L=v[10],D=v[14],O=v[3],z=v[7],W=v[11],k=v[15];return S[0]=s*E+T*M+e*F+a*O,S[4]=s*w+T*R+e*I+a*z,S[8]=s*C+T*P+e*L+a*W,S[12]=s*A+T*b+e*D+a*k,S[1]=m*E+c*M+o*F+u*O,S[5]=m*w+c*R+o*I+u*z,S[9]=m*C+c*P+o*L+u*W,S[13]=m*A+c*b+o*D+u*k,S[2]=r*E+h*M+d*F+l*O,S[6]=r*w+h*R+d*I+l*z,S[10]=r*C+h*P+d*L+l*W,S[14]=r*A+h*b+d*D+l*k,S[3]=p*E+g*M+x*F+y*O,S[7]=p*w+g*R+x*I+y*z,S[11]=p*C+g*P+x*L+y*W,S[15]=p*A+g*b+x*D+y*k,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],n=t[4],v=t[8],S=t[12],s=t[1],T=t[5],e=t[9],a=t[13],m=t[2],c=t[6],o=t[10],u=t[14],r=t[3],h=t[7],d=t[11],l=t[15];return r*(+S*e*c-v*a*c-S*T*o+n*a*o+v*T*u-n*e*u)+h*(+i*e*u-i*a*o+S*s*o-v*s*u+v*a*m-S*e*m)+d*(+i*a*c-i*T*u-S*s*c+n*s*u+S*T*m-n*a*m)+l*(-v*T*m-i*e*c+i*T*o+v*s*c-n*s*o+n*e*m)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,n){const v=this.elements;return t.isVector3?(v[12]=t.x,v[13]=t.y,v[14]=t.z):(v[12]=t,v[13]=i,v[14]=n),this}invert(){const t=this.elements,i=t[0],n=t[1],v=t[2],S=t[3],s=t[4],T=t[5],e=t[6],a=t[7],m=t[8],c=t[9],o=t[10],u=t[11],r=t[12],h=t[13],d=t[14],l=t[15],p=c*d*a-h*o*a+h*e*u-T*d*u-c*e*l+T*o*l,g=r*o*a-m*d*a-r*e*u+s*d*u+m*e*l-s*o*l,x=m*h*a-r*c*a+r*T*u-s*h*u-m*T*l+s*c*l,y=r*c*e-m*h*e-r*T*o+s*h*o+m*T*d-s*c*d,E=i*p+n*g+v*x+S*y;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/E;return t[0]=p*w,t[1]=(h*o*S-c*d*S-h*v*u+n*d*u+c*v*l-n*o*l)*w,t[2]=(T*d*S-h*e*S+h*v*a-n*d*a-T*v*l+n*e*l)*w,t[3]=(c*e*S-T*o*S-c*v*a+n*o*a+T*v*u-n*e*u)*w,t[4]=g*w,t[5]=(m*d*S-r*o*S+r*v*u-i*d*u-m*v*l+i*o*l)*w,t[6]=(r*e*S-s*d*S-r*v*a+i*d*a+s*v*l-i*e*l)*w,t[7]=(s*o*S-m*e*S+m*v*a-i*o*a-s*v*u+i*e*u)*w,t[8]=x*w,t[9]=(r*c*S-m*h*S-r*n*u+i*h*u+m*n*l-i*c*l)*w,t[10]=(s*h*S-r*T*S+r*n*a-i*h*a-s*n*l+i*T*l)*w,t[11]=(m*T*S-s*c*S-m*n*a+i*c*a+s*n*u-i*T*u)*w,t[12]=y*w,t[13]=(m*h*v-r*c*v+r*n*o-i*h*o-m*n*d+i*c*d)*w,t[14]=(r*T*v-s*h*v-r*n*e+i*h*e+s*n*d-i*T*d)*w,t[15]=(s*c*v-m*T*v+m*n*e-i*c*e-s*n*o+i*T*o)*w,this}scale(t){const i=this.elements,n=t.x,v=t.y,S=t.z;return i[0]*=n,i[4]*=v,i[8]*=S,i[1]*=n,i[5]*=v,i[9]*=S,i[2]*=n,i[6]*=v,i[10]*=S,i[3]*=n,i[7]*=v,i[11]*=S,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],v=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,n,v))}makeTranslation(t,i,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,i,0,0,1,n,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),n=Math.sin(t);return this.set(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),n=Math.sin(t);return this.set(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const n=Math.cos(i),v=Math.sin(i),S=1-n,s=t.x,T=t.y,e=t.z,a=S*s,m=S*T;return this.set(a*s+n,a*T-v*e,a*e+v*T,0,a*T+v*e,m*T+n,m*e-v*s,0,a*e-v*T,m*e+v*s,S*e*e+n,0,0,0,0,1),this}makeScale(t,i,n){return this.set(t,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,i,n,v,S,s){return this.set(1,n,S,0,t,1,s,0,i,v,1,0,0,0,0,1),this}compose(t,i,n){const v=this.elements,S=i._x,s=i._y,T=i._z,e=i._w,a=S+S,m=s+s,c=T+T,o=S*a,u=S*m,r=S*c,h=s*m,d=s*c,l=T*c,p=e*a,g=e*m,x=e*c,y=n.x,E=n.y,w=n.z;return v[0]=(1-(h+l))*y,v[1]=(u+x)*y,v[2]=(r-g)*y,v[3]=0,v[4]=(u-x)*E,v[5]=(1-(o+l))*E,v[6]=(d+p)*E,v[7]=0,v[8]=(r+g)*w,v[9]=(d-p)*w,v[10]=(1-(o+h))*w,v[11]=0,v[12]=t.x,v[13]=t.y,v[14]=t.z,v[15]=1,this}decompose(t,i,n){const v=this.elements;let S=Ou.set(v[0],v[1],v[2]).length();const s=Ou.set(v[4],v[5],v[6]).length(),T=Ou.set(v[8],v[9],v[10]).length();this.determinant()<0&&(S=-S),t.x=v[12],t.y=v[13],t.z=v[14],Pr.copy(this);const a=1/S,m=1/s,c=1/T;return Pr.elements[0]*=a,Pr.elements[1]*=a,Pr.elements[2]*=a,Pr.elements[4]*=m,Pr.elements[5]*=m,Pr.elements[6]*=m,Pr.elements[8]*=c,Pr.elements[9]*=c,Pr.elements[10]*=c,i.setFromRotationMatrix(Pr),n.x=S,n.y=s,n.z=T,this}makePerspective(t,i,n,v,S,s,T=qa){const e=this.elements,a=2*S/(i-t),m=2*S/(n-v),c=(i+t)/(i-t),o=(n+v)/(n-v);let u,r;if(T===qa)u=-(s+S)/(s-S),r=-2*s*S/(s-S);else if(T===Jm)u=-s/(s-S),r=-s*S/(s-S);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+T);return e[0]=a,e[4]=0,e[8]=c,e[12]=0,e[1]=0,e[5]=m,e[9]=o,e[13]=0,e[2]=0,e[6]=0,e[10]=u,e[14]=r,e[3]=0,e[7]=0,e[11]=-1,e[15]=0,this}makeOrthographic(t,i,n,v,S,s,T=qa){const e=this.elements,a=1/(i-t),m=1/(n-v),c=1/(s-S),o=(i+t)*a,u=(n+v)*m;let r,h;if(T===qa)r=(s+S)*c,h=-2*c;else if(T===Jm)r=S*c,h=-1*c;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+T);return e[0]=2*a,e[4]=0,e[8]=0,e[12]=-o,e[1]=0,e[5]=2*m,e[9]=0,e[13]=-u,e[2]=0,e[6]=0,e[10]=h,e[14]=-r,e[3]=0,e[7]=0,e[11]=0,e[15]=1,this}equals(t){const i=this.elements,n=t.elements;for(let v=0;v<16;v++)if(i[v]!==n[v])return!1;return!0}fromArray(t,i=0){for(let n=0;n<16;n++)this.elements[n]=t[n+i];return this}toArray(t=[],i=0){const n=this.elements;return t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t[i+9]=n[9],t[i+10]=n[10],t[i+11]=n[11],t[i+12]=n[12],t[i+13]=n[13],t[i+14]=n[14],t[i+15]=n[15],t}}const Ou=new St,Pr=new ji,b5=new St(0,0,0),I5=new St(1,1,1),Bo=new St,Hv=new St,Us=new St,E2=new ji,S2=new Vp;class Ca{constructor(t=0,i=0,n=0,v=Ca.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=n,this._order=v}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,n,v=this._order){return this._x=t,this._y=i,this._z=n,this._order=v,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,n=!0){const v=t.elements,S=v[0],s=v[4],T=v[8],e=v[1],a=v[5],m=v[9],c=v[2],o=v[6],u=v[10];switch(i){case"XYZ":this._y=Math.asin(si(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(-m,u),this._z=Math.atan2(-s,S)):(this._x=Math.atan2(o,a),this._z=0);break;case"YXZ":this._x=Math.asin(-si(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(T,u),this._z=Math.atan2(e,a)):(this._y=Math.atan2(-c,S),this._z=0);break;case"ZXY":this._x=Math.asin(si(o,-1,1)),Math.abs(o)<.9999999?(this._y=Math.atan2(-c,u),this._z=Math.atan2(-s,a)):(this._y=0,this._z=Math.atan2(e,S));break;case"ZYX":this._y=Math.asin(-si(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(o,u),this._z=Math.atan2(e,S)):(this._x=0,this._z=Math.atan2(-s,a));break;case"YZX":this._z=Math.asin(si(e,-1,1)),Math.abs(e)<.9999999?(this._x=Math.atan2(-m,a),this._y=Math.atan2(-c,S)):(this._x=0,this._y=Math.atan2(T,u));break;case"XZY":this._z=Math.asin(-si(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(o,a),this._y=Math.atan2(T,S)):(this._x=Math.atan2(-m,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,n){return E2.makeRotationFromQuaternion(t),this.setFromRotationMatrix(E2,i,n)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return S2.setFromEuler(this),this.setFromQuaternion(S2,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ca.DEFAULT_ORDER="XYZ";class ER{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let L5=0;const w2=new St,Nu=new Vp,Ba=new ji,Xv=new St,od=new St,F5=new St,D5=new Vp,A2=new St(1,0,0),C2=new St(0,1,0),M2=new St(0,0,1),R2={type:"added"},O5={type:"removed"},Bu={type:"childadded",child:null},j0={type:"childremoved",child:null};class rs extends Tf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:L5++}),this.uuid=Up(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=rs.DEFAULT_UP.clone();const t=new St,i=new Ca,n=new Vp,v=new St(1,1,1);function S(){n.setFromEuler(i,!1)}function s(){i.setFromQuaternion(n,void 0,!1)}i._onChange(S),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:v},modelViewMatrix:{value:new ji},normalMatrix:{value:new Ve}}),this.matrix=new ji,this.matrixWorld=new ji,this.matrixAutoUpdate=rs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=rs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ER,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Nu.setFromAxisAngle(t,i),this.quaternion.multiply(Nu),this}rotateOnWorldAxis(t,i){return Nu.setFromAxisAngle(t,i),this.quaternion.premultiply(Nu),this}rotateX(t){return this.rotateOnAxis(A2,t)}rotateY(t){return this.rotateOnAxis(C2,t)}rotateZ(t){return this.rotateOnAxis(M2,t)}translateOnAxis(t,i){return w2.copy(t).applyQuaternion(this.quaternion),this.position.add(w2.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(A2,t)}translateY(t){return this.translateOnAxis(C2,t)}translateZ(t){return this.translateOnAxis(M2,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ba.copy(this.matrixWorld).invert())}lookAt(t,i,n){t.isVector3?Xv.copy(t):Xv.set(t,i,n);const v=this.parent;this.updateWorldMatrix(!0,!1),od.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ba.lookAt(od,Xv,this.up):Ba.lookAt(Xv,od,this.up),this.quaternion.setFromRotationMatrix(Ba),v&&(Ba.extractRotation(v.matrixWorld),Nu.setFromRotationMatrix(Ba),this.quaternion.premultiply(Nu.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(R2),Bu.child=t,this.dispatchEvent(Bu),Bu.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(O5),j0.child=t,this.dispatchEvent(j0),j0.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ba.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ba.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ba),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(R2),Bu.child=t,this.dispatchEvent(Bu),Bu.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let n=0,v=this.children.length;n<v;n++){const s=this.children[n].getObjectByProperty(t,i);if(s!==void 0)return s}}getObjectsByProperty(t,i,n=[]){this[t]===i&&n.push(this);const v=this.children;for(let S=0,s=v.length;S<s;S++)v[S].getObjectsByProperty(t,i,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(od,t,F5),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(od,D5,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let n=0,v=i.length;n<v;n++)i[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const i=this.children;for(let n=0,v=i.length;n<v;n++)i[n].traverseVisible(t)}traverseAncestors(t){const i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let n=0,v=i.length;n<v;n++)i[n].updateMatrixWorld(t)}updateWorldMatrix(t,i){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){const v=this.children;for(let S=0,s=v.length;S<s;S++)v[S].updateWorldMatrix(!1,!0)}}toJSON(t){const i=t===void 0||typeof t=="string",n={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const v={};v.uuid=this.uuid,v.type=this.type,this.name!==""&&(v.name=this.name),this.castShadow===!0&&(v.castShadow=!0),this.receiveShadow===!0&&(v.receiveShadow=!0),this.visible===!1&&(v.visible=!1),this.frustumCulled===!1&&(v.frustumCulled=!1),this.renderOrder!==0&&(v.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(v.userData=this.userData),v.layers=this.layers.mask,v.matrix=this.matrix.toArray(),v.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(v.matrixAutoUpdate=!1),this.isInstancedMesh&&(v.type="InstancedMesh",v.count=this.count,v.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(v.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(v.type="BatchedMesh",v.perObjectFrustumCulled=this.perObjectFrustumCulled,v.sortObjects=this.sortObjects,v.drawRanges=this._drawRanges,v.reservedRanges=this._reservedRanges,v.visibility=this._visibility,v.active=this._active,v.bounds=this._bounds.map(T=>({boxInitialized:T.boxInitialized,boxMin:T.box.min.toArray(),boxMax:T.box.max.toArray(),sphereInitialized:T.sphereInitialized,sphereRadius:T.sphere.radius,sphereCenter:T.sphere.center.toArray()})),v.maxInstanceCount=this._maxInstanceCount,v.maxVertexCount=this._maxVertexCount,v.maxIndexCount=this._maxIndexCount,v.geometryInitialized=this._geometryInitialized,v.geometryCount=this._geometryCount,v.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(v.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(v.boundingSphere={center:v.boundingSphere.center.toArray(),radius:v.boundingSphere.radius}),this.boundingBox!==null&&(v.boundingBox={min:v.boundingBox.min.toArray(),max:v.boundingBox.max.toArray()}));function S(T,e){return T[e.uuid]===void 0&&(T[e.uuid]=e.toJSON(t)),e.uuid}if(this.isScene)this.background&&(this.background.isColor?v.background=this.background.toJSON():this.background.isTexture&&(v.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(v.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){v.geometry=S(t.geometries,this.geometry);const T=this.geometry.parameters;if(T!==void 0&&T.shapes!==void 0){const e=T.shapes;if(Array.isArray(e))for(let a=0,m=e.length;a<m;a++){const c=e[a];S(t.shapes,c)}else S(t.shapes,e)}}if(this.isSkinnedMesh&&(v.bindMode=this.bindMode,v.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(S(t.skeletons,this.skeleton),v.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const T=[];for(let e=0,a=this.material.length;e<a;e++)T.push(S(t.materials,this.material[e]));v.material=T}else v.material=S(t.materials,this.material);if(this.children.length>0){v.children=[];for(let T=0;T<this.children.length;T++)v.children.push(this.children[T].toJSON(t).object)}if(this.animations.length>0){v.animations=[];for(let T=0;T<this.animations.length;T++){const e=this.animations[T];v.animations.push(S(t.animations,e))}}if(i){const T=s(t.geometries),e=s(t.materials),a=s(t.textures),m=s(t.images),c=s(t.shapes),o=s(t.skeletons),u=s(t.animations),r=s(t.nodes);T.length>0&&(n.geometries=T),e.length>0&&(n.materials=e),a.length>0&&(n.textures=a),m.length>0&&(n.images=m),c.length>0&&(n.shapes=c),o.length>0&&(n.skeletons=o),u.length>0&&(n.animations=u),r.length>0&&(n.nodes=r)}return n.object=v,n;function s(T){const e=[];for(const a in T){const m=T[a];delete m.metadata,e.push(m)}return e}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let n=0;n<t.children.length;n++){const v=t.children[n];this.add(v.clone())}return this}}rs.DEFAULT_UP=new St(0,1,0);rs.DEFAULT_MATRIX_AUTO_UPDATE=!0;rs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const br=new St,Ua=new St,Q0=new St,Va=new St,Uu=new St,Vu=new St,P2=new St,Z0=new St,J0=new St,q0=new St,tx=new Mi,ex=new Mi,ix=new Mi;class Or{constructor(t=new St,i=new St,n=new St){this.a=t,this.b=i,this.c=n}static getNormal(t,i,n,v){v.subVectors(n,i),br.subVectors(t,i),v.cross(br);const S=v.lengthSq();return S>0?v.multiplyScalar(1/Math.sqrt(S)):v.set(0,0,0)}static getBarycoord(t,i,n,v,S){br.subVectors(v,i),Ua.subVectors(n,i),Q0.subVectors(t,i);const s=br.dot(br),T=br.dot(Ua),e=br.dot(Q0),a=Ua.dot(Ua),m=Ua.dot(Q0),c=s*a-T*T;if(c===0)return S.set(0,0,0),null;const o=1/c,u=(a*e-T*m)*o,r=(s*m-T*e)*o;return S.set(1-u-r,r,u)}static containsPoint(t,i,n,v){return this.getBarycoord(t,i,n,v,Va)===null?!1:Va.x>=0&&Va.y>=0&&Va.x+Va.y<=1}static getInterpolation(t,i,n,v,S,s,T,e){return this.getBarycoord(t,i,n,v,Va)===null?(e.x=0,e.y=0,"z"in e&&(e.z=0),"w"in e&&(e.w=0),null):(e.setScalar(0),e.addScaledVector(S,Va.x),e.addScaledVector(s,Va.y),e.addScaledVector(T,Va.z),e)}static getInterpolatedAttribute(t,i,n,v,S,s){return tx.setScalar(0),ex.setScalar(0),ix.setScalar(0),tx.fromBufferAttribute(t,i),ex.fromBufferAttribute(t,n),ix.fromBufferAttribute(t,v),s.setScalar(0),s.addScaledVector(tx,S.x),s.addScaledVector(ex,S.y),s.addScaledVector(ix,S.z),s}static isFrontFacing(t,i,n,v){return br.subVectors(n,i),Ua.subVectors(t,i),br.cross(Ua).dot(v)<0}set(t,i,n){return this.a.copy(t),this.b.copy(i),this.c.copy(n),this}setFromPointsAndIndices(t,i,n,v){return this.a.copy(t[i]),this.b.copy(t[n]),this.c.copy(t[v]),this}setFromAttributeAndIndices(t,i,n,v){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,v),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return br.subVectors(this.c,this.b),Ua.subVectors(this.a,this.b),br.cross(Ua).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Or.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return Or.getBarycoord(t,this.a,this.b,this.c,i)}getInterpolation(t,i,n,v,S){return Or.getInterpolation(t,this.a,this.b,this.c,i,n,v,S)}containsPoint(t){return Or.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Or.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){const n=this.a,v=this.b,S=this.c;let s,T;Uu.subVectors(v,n),Vu.subVectors(S,n),Z0.subVectors(t,n);const e=Uu.dot(Z0),a=Vu.dot(Z0);if(e<=0&&a<=0)return i.copy(n);J0.subVectors(t,v);const m=Uu.dot(J0),c=Vu.dot(J0);if(m>=0&&c<=m)return i.copy(v);const o=e*c-m*a;if(o<=0&&e>=0&&m<=0)return s=e/(e-m),i.copy(n).addScaledVector(Uu,s);q0.subVectors(t,S);const u=Uu.dot(q0),r=Vu.dot(q0);if(r>=0&&u<=r)return i.copy(S);const h=u*a-e*r;if(h<=0&&a>=0&&r<=0)return T=a/(a-r),i.copy(n).addScaledVector(Vu,T);const d=m*r-u*c;if(d<=0&&c-m>=0&&u-r>=0)return P2.subVectors(S,v),T=(c-m)/(c-m+(u-r)),i.copy(v).addScaledVector(P2,T);const l=1/(d+h+o);return s=h*l,T=o*l,i.copy(n).addScaledVector(Uu,s).addScaledVector(Vu,T)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const SR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Uo={h:0,s:0,l:0},kv={h:0,s:0,l:0};function nx(f,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?f+(t-f)*6*i:i<1/2?t:i<2/3?f+(t-f)*6*(2/3-i):f}class vi{constructor(t,i,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,i,n)}set(t,i,n){if(i===void 0&&n===void 0){const v=t;v&&v.isColor?this.copy(v):typeof v=="number"?this.setHex(v):typeof v=="string"&&this.setStyle(v)}else this.setRGB(t,i,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=cr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,ci.toWorkingColorSpace(this,i),this}setRGB(t,i,n,v=ci.workingColorSpace){return this.r=t,this.g=i,this.b=n,ci.toWorkingColorSpace(this,v),this}setHSL(t,i,n,v=ci.workingColorSpace){if(t=m5(t,1),i=si(i,0,1),n=si(n,0,1),i===0)this.r=this.g=this.b=n;else{const S=n<=.5?n*(1+i):n+i-n*i,s=2*n-S;this.r=nx(s,S,t+1/3),this.g=nx(s,S,t),this.b=nx(s,S,t-1/3)}return ci.toWorkingColorSpace(this,v),this}setStyle(t,i=cr){function n(S){S!==void 0&&parseFloat(S)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let v;if(v=/^(\w+)\(([^\)]*)\)/.exec(t)){let S;const s=v[1],T=v[2];switch(s){case"rgb":case"rgba":if(S=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return n(S[4]),this.setRGB(Math.min(255,parseInt(S[1],10))/255,Math.min(255,parseInt(S[2],10))/255,Math.min(255,parseInt(S[3],10))/255,i);if(S=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return n(S[4]),this.setRGB(Math.min(100,parseInt(S[1],10))/100,Math.min(100,parseInt(S[2],10))/100,Math.min(100,parseInt(S[3],10))/100,i);break;case"hsl":case"hsla":if(S=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(T))return n(S[4]),this.setHSL(parseFloat(S[1])/360,parseFloat(S[2])/100,parseFloat(S[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(v=/^\#([A-Fa-f\d]+)$/.exec(t)){const S=v[1],s=S.length;if(s===3)return this.setRGB(parseInt(S.charAt(0),16)/15,parseInt(S.charAt(1),16)/15,parseInt(S.charAt(2),16)/15,i);if(s===6)return this.setHex(parseInt(S,16),i);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,i);return this}setColorName(t,i=cr){const n=SR[t.toLowerCase()];return n!==void 0?this.setHex(n,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=oo(t.r),this.g=oo(t.g),this.b=oo(t.b),this}copyLinearToSRGB(t){return this.r=cc(t.r),this.g=cc(t.g),this.b=cc(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=cr){return ci.fromWorkingColorSpace(es.copy(this),t),Math.round(si(es.r*255,0,255))*65536+Math.round(si(es.g*255,0,255))*256+Math.round(si(es.b*255,0,255))}getHexString(t=cr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=ci.workingColorSpace){ci.fromWorkingColorSpace(es.copy(this),i);const n=es.r,v=es.g,S=es.b,s=Math.max(n,v,S),T=Math.min(n,v,S);let e,a;const m=(T+s)/2;if(T===s)e=0,a=0;else{const c=s-T;switch(a=m<=.5?c/(s+T):c/(2-s-T),s){case n:e=(v-S)/c+(v<S?6:0);break;case v:e=(S-n)/c+2;break;case S:e=(n-v)/c+4;break}e/=6}return t.h=e,t.s=a,t.l=m,t}getRGB(t,i=ci.workingColorSpace){return ci.fromWorkingColorSpace(es.copy(this),i),t.r=es.r,t.g=es.g,t.b=es.b,t}getStyle(t=cr){ci.fromWorkingColorSpace(es.copy(this),t);const i=es.r,n=es.g,v=es.b;return t!==cr?`color(${t} ${i.toFixed(3)} ${n.toFixed(3)} ${v.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(n*255)},${Math.round(v*255)})`}offsetHSL(t,i,n){return this.getHSL(Uo),this.setHSL(Uo.h+t,Uo.s+i,Uo.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,n){return this.r=t.r+(i.r-t.r)*n,this.g=t.g+(i.g-t.g)*n,this.b=t.b+(i.b-t.b)*n,this}lerpHSL(t,i){this.getHSL(Uo),t.getHSL(kv);const n=G0(Uo.h,kv.h,i),v=G0(Uo.s,kv.s,i),S=G0(Uo.l,kv.l,i);return this.setHSL(n,v,S),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const i=this.r,n=this.g,v=this.b,S=t.elements;return this.r=S[0]*i+S[3]*n+S[6]*v,this.g=S[1]*i+S[4]*n+S[7]*v,this.b=S[2]*i+S[5]*n+S[8]*v,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const es=new vi;vi.NAMES=SR;let N5=0,Gp=class extends Tf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:N5++}),this.uuid=Up(),this.name="",this.type="Material",this.blending=hc,this.side=ho,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=xy,this.blendDst=yy,this.blendEquation=uh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new vi(0,0,0),this.blendAlpha=0,this.depthFunc=Nc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=p2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bu,this.stencilZFail=bu,this.stencilZPass=bu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const i in t){const n=t[i];if(n===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}const v=this[i];if(v===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}v&&v.isColor?v.set(n):v&&v.isVector3&&n&&n.isVector3?v.copy(n):this[i]=n}}toJSON(t){const i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==hc&&(n.blending=this.blending),this.side!==ho&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==xy&&(n.blendSrc=this.blendSrc),this.blendDst!==yy&&(n.blendDst=this.blendDst),this.blendEquation!==uh&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Nc&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==p2&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==bu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==bu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==bu&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function v(S){const s=[];for(const T in S){const e=S[T];delete e.metadata,s.push(e)}return s}if(i){const S=v(t.textures),s=v(t.images);S.length>0&&(n.textures=S),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let n=null;if(i!==null){const v=i.length;n=new Array(v);for(let S=0;S!==v;++S)n[S]=i[S].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class wR extends Gp{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.combine=sR,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const fn=new St,Yv=new ai;let B5=0;class Ta{constructor(t,i,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:B5++}),this.name="",this.array=t,this.itemSize=i,this.count=t!==void 0?t.length/i:0,this.normalized=n,this.usage=v2,this.updateRanges=[],this.gpuType=Ja,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,i,n){t*=this.itemSize,n*=i.itemSize;for(let v=0,S=this.itemSize;v<S;v++)this.array[t+v]=i.array[n+v];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let i=0,n=this.count;i<n;i++)Yv.fromBufferAttribute(this,i),Yv.applyMatrix3(t),this.setXY(i,Yv.x,Yv.y);else if(this.itemSize===3)for(let i=0,n=this.count;i<n;i++)fn.fromBufferAttribute(this,i),fn.applyMatrix3(t),this.setXYZ(i,fn.x,fn.y,fn.z);return this}applyMatrix4(t){for(let i=0,n=this.count;i<n;i++)fn.fromBufferAttribute(this,i),fn.applyMatrix4(t),this.setXYZ(i,fn.x,fn.y,fn.z);return this}applyNormalMatrix(t){for(let i=0,n=this.count;i<n;i++)fn.fromBufferAttribute(this,i),fn.applyNormalMatrix(t),this.setXYZ(i,fn.x,fn.y,fn.z);return this}transformDirection(t){for(let i=0,n=this.count;i<n;i++)fn.fromBufferAttribute(this,i),fn.transformDirection(t),this.setXYZ(i,fn.x,fn.y,fn.z);return this}set(t,i=0){return this.array.set(t,i),this}getComponent(t,i){let n=this.array[t*this.itemSize+i];return this.normalized&&(n=sd(n,this.array)),n}setComponent(t,i,n){return this.normalized&&(n=vs(n,this.array)),this.array[t*this.itemSize+i]=n,this}getX(t){let i=this.array[t*this.itemSize];return this.normalized&&(i=sd(i,this.array)),i}setX(t,i){return this.normalized&&(i=vs(i,this.array)),this.array[t*this.itemSize]=i,this}getY(t){let i=this.array[t*this.itemSize+1];return this.normalized&&(i=sd(i,this.array)),i}setY(t,i){return this.normalized&&(i=vs(i,this.array)),this.array[t*this.itemSize+1]=i,this}getZ(t){let i=this.array[t*this.itemSize+2];return this.normalized&&(i=sd(i,this.array)),i}setZ(t,i){return this.normalized&&(i=vs(i,this.array)),this.array[t*this.itemSize+2]=i,this}getW(t){let i=this.array[t*this.itemSize+3];return this.normalized&&(i=sd(i,this.array)),i}setW(t,i){return this.normalized&&(i=vs(i,this.array)),this.array[t*this.itemSize+3]=i,this}setXY(t,i,n){return t*=this.itemSize,this.normalized&&(i=vs(i,this.array),n=vs(n,this.array)),this.array[t+0]=i,this.array[t+1]=n,this}setXYZ(t,i,n,v){return t*=this.itemSize,this.normalized&&(i=vs(i,this.array),n=vs(n,this.array),v=vs(v,this.array)),this.array[t+0]=i,this.array[t+1]=n,this.array[t+2]=v,this}setXYZW(t,i,n,v,S){return t*=this.itemSize,this.normalized&&(i=vs(i,this.array),n=vs(n,this.array),v=vs(v,this.array),S=vs(S,this.array)),this.array[t+0]=i,this.array[t+1]=n,this.array[t+2]=v,this.array[t+3]=S,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==v2&&(t.usage=this.usage),t}}class AR extends Ta{constructor(t,i,n){super(new Uint16Array(t),i,n)}}class CR extends Ta{constructor(t,i,n){super(new Uint32Array(t),i,n)}}class Ks extends Ta{constructor(t,i,n){super(new Float32Array(t),i,n)}}let U5=0;const ar=new ji,sx=new rs,zu=new St,Vs=new zp,ld=new zp,Ln=new St;class To extends Tf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:U5++}),this.uuid=Up(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(xR(t)?CR:AR)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,i,n=0){this.groups.push({start:t,count:i,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const S=new Ve().getNormalMatrix(t);n.applyNormalMatrix(S),n.needsUpdate=!0}const v=this.attributes.tangent;return v!==void 0&&(v.transformDirection(t),v.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return ar.makeRotationFromQuaternion(t),this.applyMatrix4(ar),this}rotateX(t){return ar.makeRotationX(t),this.applyMatrix4(ar),this}rotateY(t){return ar.makeRotationY(t),this.applyMatrix4(ar),this}rotateZ(t){return ar.makeRotationZ(t),this.applyMatrix4(ar),this}translate(t,i,n){return ar.makeTranslation(t,i,n),this.applyMatrix4(ar),this}scale(t,i,n){return ar.makeScale(t,i,n),this.applyMatrix4(ar),this}lookAt(t){return sx.lookAt(t),sx.updateMatrix(),this.applyMatrix4(sx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zu).negate(),this.translate(zu.x,zu.y,zu.z),this}setFromPoints(t){const i=this.getAttribute("position");if(i===void 0){const n=[];for(let v=0,S=t.length;v<S;v++){const s=t[v];n.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Ks(n,3))}else{const n=Math.min(t.length,i.count);for(let v=0;v<n;v++){const S=t[v];i.setXYZ(v,S.x,S.y,S.z||0)}t.length>i.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),i.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zp);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new St(-1/0,-1/0,-1/0),new St(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i)for(let n=0,v=i.length;n<v;n++){const S=i[n];Vs.setFromBufferAttribute(S),this.morphTargetsRelative?(Ln.addVectors(this.boundingBox.min,Vs.min),this.boundingBox.expandByPoint(Ln),Ln.addVectors(this.boundingBox.max,Vs.max),this.boundingBox.expandByPoint(Ln)):(this.boundingBox.expandByPoint(Vs.min),this.boundingBox.expandByPoint(Vs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wT);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new St,1/0);return}if(t){const n=this.boundingSphere.center;if(Vs.setFromBufferAttribute(t),i)for(let S=0,s=i.length;S<s;S++){const T=i[S];ld.setFromBufferAttribute(T),this.morphTargetsRelative?(Ln.addVectors(Vs.min,ld.min),Vs.expandByPoint(Ln),Ln.addVectors(Vs.max,ld.max),Vs.expandByPoint(Ln)):(Vs.expandByPoint(ld.min),Vs.expandByPoint(ld.max))}Vs.getCenter(n);let v=0;for(let S=0,s=t.count;S<s;S++)Ln.fromBufferAttribute(t,S),v=Math.max(v,n.distanceToSquared(Ln));if(i)for(let S=0,s=i.length;S<s;S++){const T=i[S],e=this.morphTargetsRelative;for(let a=0,m=T.count;a<m;a++)Ln.fromBufferAttribute(T,a),e&&(zu.fromBufferAttribute(t,a),Ln.add(zu)),v=Math.max(v,n.distanceToSquared(Ln))}this.boundingSphere.radius=Math.sqrt(v),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,i=this.attributes;if(t===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=i.position,v=i.normal,S=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ta(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),T=[],e=[];for(let C=0;C<n.count;C++)T[C]=new St,e[C]=new St;const a=new St,m=new St,c=new St,o=new ai,u=new ai,r=new ai,h=new St,d=new St;function l(C,A,M){a.fromBufferAttribute(n,C),m.fromBufferAttribute(n,A),c.fromBufferAttribute(n,M),o.fromBufferAttribute(S,C),u.fromBufferAttribute(S,A),r.fromBufferAttribute(S,M),m.sub(a),c.sub(a),u.sub(o),r.sub(o);const R=1/(u.x*r.y-r.x*u.y);isFinite(R)&&(h.copy(m).multiplyScalar(r.y).addScaledVector(c,-u.y).multiplyScalar(R),d.copy(c).multiplyScalar(u.x).addScaledVector(m,-r.x).multiplyScalar(R),T[C].add(h),T[A].add(h),T[M].add(h),e[C].add(d),e[A].add(d),e[M].add(d))}let p=this.groups;p.length===0&&(p=[{start:0,count:t.count}]);for(let C=0,A=p.length;C<A;++C){const M=p[C],R=M.start,P=M.count;for(let b=R,F=R+P;b<F;b+=3)l(t.getX(b+0),t.getX(b+1),t.getX(b+2))}const g=new St,x=new St,y=new St,E=new St;function w(C){y.fromBufferAttribute(v,C),E.copy(y);const A=T[C];g.copy(A),g.sub(y.multiplyScalar(y.dot(A))).normalize(),x.crossVectors(E,A);const R=x.dot(e[C])<0?-1:1;s.setXYZW(C,g.x,g.y,g.z,R)}for(let C=0,A=p.length;C<A;++C){const M=p[C],R=M.start,P=M.count;for(let b=R,F=R+P;b<F;b+=3)w(t.getX(b+0)),w(t.getX(b+1)),w(t.getX(b+2))}}computeVertexNormals(){const t=this.index,i=this.getAttribute("position");if(i!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ta(new Float32Array(i.count*3),3),this.setAttribute("normal",n);else for(let o=0,u=n.count;o<u;o++)n.setXYZ(o,0,0,0);const v=new St,S=new St,s=new St,T=new St,e=new St,a=new St,m=new St,c=new St;if(t)for(let o=0,u=t.count;o<u;o+=3){const r=t.getX(o+0),h=t.getX(o+1),d=t.getX(o+2);v.fromBufferAttribute(i,r),S.fromBufferAttribute(i,h),s.fromBufferAttribute(i,d),m.subVectors(s,S),c.subVectors(v,S),m.cross(c),T.fromBufferAttribute(n,r),e.fromBufferAttribute(n,h),a.fromBufferAttribute(n,d),T.add(m),e.add(m),a.add(m),n.setXYZ(r,T.x,T.y,T.z),n.setXYZ(h,e.x,e.y,e.z),n.setXYZ(d,a.x,a.y,a.z)}else for(let o=0,u=i.count;o<u;o+=3)v.fromBufferAttribute(i,o+0),S.fromBufferAttribute(i,o+1),s.fromBufferAttribute(i,o+2),m.subVectors(s,S),c.subVectors(v,S),m.cross(c),n.setXYZ(o+0,m.x,m.y,m.z),n.setXYZ(o+1,m.x,m.y,m.z),n.setXYZ(o+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let i=0,n=t.count;i<n;i++)Ln.fromBufferAttribute(t,i),Ln.normalize(),t.setXYZ(i,Ln.x,Ln.y,Ln.z)}toNonIndexed(){function t(T,e){const a=T.array,m=T.itemSize,c=T.normalized,o=new a.constructor(e.length*m);let u=0,r=0;for(let h=0,d=e.length;h<d;h++){T.isInterleavedBufferAttribute?u=e[h]*T.data.stride+T.offset:u=e[h]*m;for(let l=0;l<m;l++)o[r++]=a[u++]}return new Ta(o,m,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new To,n=this.index.array,v=this.attributes;for(const T in v){const e=v[T],a=t(e,n);i.setAttribute(T,a)}const S=this.morphAttributes;for(const T in S){const e=[],a=S[T];for(let m=0,c=a.length;m<c;m++){const o=a[m],u=t(o,n);e.push(u)}i.morphAttributes[T]=e}i.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let T=0,e=s.length;T<e;T++){const a=s[T];i.addGroup(a.start,a.count,a.materialIndex)}return i}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const e=this.parameters;for(const a in e)e[a]!==void 0&&(t[a]=e[a]);return t}t.data={attributes:{}};const i=this.index;i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const n=this.attributes;for(const e in n){const a=n[e];t.data.attributes[e]=a.toJSON(t.data)}const v={};let S=!1;for(const e in this.morphAttributes){const a=this.morphAttributes[e],m=[];for(let c=0,o=a.length;c<o;c++){const u=a[c];m.push(u.toJSON(t.data))}m.length>0&&(v[e]=m,S=!0)}S&&(t.data.morphAttributes=v,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const T=this.boundingSphere;return T!==null&&(t.data.boundingSphere={center:T.center.toArray(),radius:T.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone(i));const v=t.attributes;for(const a in v){const m=v[a];this.setAttribute(a,m.clone(i))}const S=t.morphAttributes;for(const a in S){const m=[],c=S[a];for(let o=0,u=c.length;o<u;o++)m.push(c[o].clone(i));this.morphAttributes[a]=m}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let a=0,m=s.length;a<m;a++){const c=s[a];this.addGroup(c.start,c.count,c.materialIndex)}const T=t.boundingBox;T!==null&&(this.boundingBox=T.clone());const e=t.boundingSphere;return e!==null&&(this.boundingSphere=e.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const b2=new ji,jl=new P5,$v=new wT,I2=new St,Kv=new St,jv=new St,Qv=new St,rx=new St,Zv=new St,L2=new St,Jv=new St;class Es extends rs{constructor(t=new To,i=new wR){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,n=Object.keys(i);if(n.length>0){const v=i[n[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let S=0,s=v.length;S<s;S++){const T=v[S].name||String(S);this.morphTargetInfluences.push(0),this.morphTargetDictionary[T]=S}}}}getVertexPosition(t,i){const n=this.geometry,v=n.attributes.position,S=n.morphAttributes.position,s=n.morphTargetsRelative;i.fromBufferAttribute(v,t);const T=this.morphTargetInfluences;if(S&&T){Zv.set(0,0,0);for(let e=0,a=S.length;e<a;e++){const m=T[e],c=S[e];m!==0&&(rx.fromBufferAttribute(c,t),s?Zv.addScaledVector(rx,m):Zv.addScaledVector(rx.sub(i),m))}i.add(Zv)}return i}raycast(t,i){const n=this.geometry,v=this.material,S=this.matrixWorld;v!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),$v.copy(n.boundingSphere),$v.applyMatrix4(S),jl.copy(t.ray).recast(t.near),!($v.containsPoint(jl.origin)===!1&&(jl.intersectSphere($v,I2)===null||jl.origin.distanceToSquared(I2)>(t.far-t.near)**2))&&(b2.copy(S).invert(),jl.copy(t.ray).applyMatrix4(b2),!(n.boundingBox!==null&&jl.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,i,jl)))}_computeIntersections(t,i,n){let v;const S=this.geometry,s=this.material,T=S.index,e=S.attributes.position,a=S.attributes.uv,m=S.attributes.uv1,c=S.attributes.normal,o=S.groups,u=S.drawRange;if(T!==null)if(Array.isArray(s))for(let r=0,h=o.length;r<h;r++){const d=o[r],l=s[d.materialIndex],p=Math.max(d.start,u.start),g=Math.min(T.count,Math.min(d.start+d.count,u.start+u.count));for(let x=p,y=g;x<y;x+=3){const E=T.getX(x),w=T.getX(x+1),C=T.getX(x+2);v=qv(this,l,t,n,a,m,c,E,w,C),v&&(v.faceIndex=Math.floor(x/3),v.face.materialIndex=d.materialIndex,i.push(v))}}else{const r=Math.max(0,u.start),h=Math.min(T.count,u.start+u.count);for(let d=r,l=h;d<l;d+=3){const p=T.getX(d),g=T.getX(d+1),x=T.getX(d+2);v=qv(this,s,t,n,a,m,c,p,g,x),v&&(v.faceIndex=Math.floor(d/3),i.push(v))}}else if(e!==void 0)if(Array.isArray(s))for(let r=0,h=o.length;r<h;r++){const d=o[r],l=s[d.materialIndex],p=Math.max(d.start,u.start),g=Math.min(e.count,Math.min(d.start+d.count,u.start+u.count));for(let x=p,y=g;x<y;x+=3){const E=x,w=x+1,C=x+2;v=qv(this,l,t,n,a,m,c,E,w,C),v&&(v.faceIndex=Math.floor(x/3),v.face.materialIndex=d.materialIndex,i.push(v))}}else{const r=Math.max(0,u.start),h=Math.min(e.count,u.start+u.count);for(let d=r,l=h;d<l;d+=3){const p=d,g=d+1,x=d+2;v=qv(this,s,t,n,a,m,c,p,g,x),v&&(v.faceIndex=Math.floor(d/3),i.push(v))}}}}function V5(f,t,i,n,v,S,s,T){let e;if(t.side===Ms?e=n.intersectTriangle(s,S,v,!0,T):e=n.intersectTriangle(v,S,s,t.side===ho,T),e===null)return null;Jv.copy(T),Jv.applyMatrix4(f.matrixWorld);const a=i.ray.origin.distanceTo(Jv);return a<i.near||a>i.far?null:{distance:a,point:Jv.clone(),object:f}}function qv(f,t,i,n,v,S,s,T,e,a){f.getVertexPosition(T,Kv),f.getVertexPosition(e,jv),f.getVertexPosition(a,Qv);const m=V5(f,t,i,n,Kv,jv,Qv,L2);if(m){const c=new St;Or.getBarycoord(L2,Kv,jv,Qv,c),v&&(m.uv=Or.getInterpolatedAttribute(v,T,e,a,c,new ai)),S&&(m.uv1=Or.getInterpolatedAttribute(S,T,e,a,c,new ai)),s&&(m.normal=Or.getInterpolatedAttribute(s,T,e,a,c,new St),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const o={a:T,b:e,c:a,normal:new St,materialIndex:0};Or.getNormal(Kv,jv,Qv,o.normal),m.face=o,m.barycoord=c}return m}class Ef extends To{constructor(t=1,i=1,n=1,v=1,S=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:n,widthSegments:v,heightSegments:S,depthSegments:s};const T=this;v=Math.floor(v),S=Math.floor(S),s=Math.floor(s);const e=[],a=[],m=[],c=[];let o=0,u=0;r("z","y","x",-1,-1,n,i,t,s,S,0),r("z","y","x",1,-1,n,i,-t,s,S,1),r("x","z","y",1,1,t,n,i,v,s,2),r("x","z","y",1,-1,t,n,-i,v,s,3),r("x","y","z",1,-1,t,i,n,v,S,4),r("x","y","z",-1,-1,t,i,-n,v,S,5),this.setIndex(e),this.setAttribute("position",new Ks(a,3)),this.setAttribute("normal",new Ks(m,3)),this.setAttribute("uv",new Ks(c,2));function r(h,d,l,p,g,x,y,E,w,C,A){const M=x/w,R=y/C,P=x/2,b=y/2,F=E/2,I=w+1,L=C+1;let D=0,O=0;const z=new St;for(let W=0;W<L;W++){const k=W*R-b;for(let X=0;X<I;X++){const V=X*M-P;z[h]=V*p,z[d]=k*g,z[l]=F,a.push(z.x,z.y,z.z),z[h]=0,z[d]=0,z[l]=E>0?1:-1,m.push(z.x,z.y,z.z),c.push(X/w),c.push(1-W/C),D+=1}}for(let W=0;W<C;W++)for(let k=0;k<w;k++){const X=o+k+I*W,V=o+k+I*(W+1),G=o+(k+1)+I*(W+1),N=o+(k+1)+I*W;e.push(X,V,N),e.push(V,G,N),O+=6}T.addGroup(u,O,A),u+=O,o+=D}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ef(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function _c(f){const t={};for(const i in f){t[i]={};for(const n in f[i]){const v=f[i][n];v&&(v.isColor||v.isMatrix3||v.isMatrix4||v.isVector2||v.isVector3||v.isVector4||v.isTexture||v.isQuaternion)?v.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[i][n]=null):t[i][n]=v.clone():Array.isArray(v)?t[i][n]=v.slice():t[i][n]=v}}return t}function fs(f){const t={};for(let i=0;i<f.length;i++){const n=_c(f[i]);for(const v in n)t[v]=n[v]}return t}function z5(f){const t=[];for(let i=0;i<f.length;i++)t.push(f[i].clone());return t}function MR(f){const t=f.getRenderTarget();return t===null?f.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:ci.workingColorSpace}const G5={clone:_c,merge:fs};var _5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,W5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class gl extends Gp{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_5,this.fragmentShader=W5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=_c(t.uniforms),this.uniformsGroups=z5(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(const v in this.uniforms){const s=this.uniforms[v].value;s&&s.isTexture?i.uniforms[v]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?i.uniforms[v]={type:"c",value:s.getHex()}:s&&s.isVector2?i.uniforms[v]={type:"v2",value:s.toArray()}:s&&s.isVector3?i.uniforms[v]={type:"v3",value:s.toArray()}:s&&s.isVector4?i.uniforms[v]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?i.uniforms[v]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?i.uniforms[v]={type:"m4",value:s.toArray()}:i.uniforms[v]={value:s}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;const n={};for(const v in this.extensions)this.extensions[v]===!0&&(n[v]=!0);return Object.keys(n).length>0&&(i.extensions=n),i}}class RR extends rs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ji,this.projectionMatrix=new ji,this.projectionMatrixInverse=new ji,this.coordinateSystem=qa}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Vo=new St,F2=new ai,D2=new ai;class Hs extends RR{constructor(t=50,i=1,n=.1,v=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=v,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const i=.5*this.getFilmHeight()/t;this.fov=n1*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(z0*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return n1*2*Math.atan(Math.tan(z0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,i,n){Vo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Vo.x,Vo.y).multiplyScalar(-t/Vo.z),Vo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Vo.x,Vo.y).multiplyScalar(-t/Vo.z)}getViewSize(t,i){return this.getViewBounds(t,F2,D2),i.subVectors(D2,F2)}setViewOffset(t,i,n,v,S,s){this.aspect=t/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=n,this.view.offsetY=v,this.view.width=S,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let i=t*Math.tan(z0*.5*this.fov)/this.zoom,n=2*i,v=this.aspect*n,S=-.5*v;const s=this.view;if(this.view!==null&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;S+=s.offsetX*v/e,i-=s.offsetY*n/a,v*=s.width/e,n*=s.height/a}const T=this.filmOffset;T!==0&&(S+=t*T/this.getFilmWidth()),this.projectionMatrix.makePerspective(S,S+v,i,i-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const Gu=-90,_u=1;class H5 extends rs{constructor(t,i,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const v=new Hs(Gu,_u,t,i);v.layers=this.layers,this.add(v);const S=new Hs(Gu,_u,t,i);S.layers=this.layers,this.add(S);const s=new Hs(Gu,_u,t,i);s.layers=this.layers,this.add(s);const T=new Hs(Gu,_u,t,i);T.layers=this.layers,this.add(T);const e=new Hs(Gu,_u,t,i);e.layers=this.layers,this.add(e);const a=new Hs(Gu,_u,t,i);a.layers=this.layers,this.add(a)}updateCoordinateSystem(){const t=this.coordinateSystem,i=this.children.concat(),[n,v,S,s,T,e]=i;for(const a of i)this.remove(a);if(t===qa)n.up.set(0,1,0),n.lookAt(1,0,0),v.up.set(0,1,0),v.lookAt(-1,0,0),S.up.set(0,0,-1),S.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),T.up.set(0,1,0),T.lookAt(0,0,1),e.up.set(0,1,0),e.lookAt(0,0,-1);else if(t===Jm)n.up.set(0,-1,0),n.lookAt(-1,0,0),v.up.set(0,-1,0),v.lookAt(1,0,0),S.up.set(0,0,1),S.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),T.up.set(0,-1,0),T.lookAt(0,0,1),e.up.set(0,-1,0),e.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const a of i)this.add(a),a.updateMatrixWorld()}update(t,i){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:v}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[S,s,T,e,a,m]=this.children,c=t.getRenderTarget(),o=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),r=t.xr.enabled;t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,v),t.render(i,S),t.setRenderTarget(n,1,v),t.render(i,s),t.setRenderTarget(n,2,v),t.render(i,T),t.setRenderTarget(n,3,v),t.render(i,e),t.setRenderTarget(n,4,v),t.render(i,a),n.texture.generateMipmaps=h,t.setRenderTarget(n,5,v),t.render(i,m),t.setRenderTarget(c,o,u),t.xr.enabled=r,n.texture.needsPMREMUpdate=!0}}class PR extends Rs{constructor(t,i,n,v,S,s,T,e,a,m){t=t!==void 0?t:[],i=i!==void 0?i:Bc,super(t,i,n,v,S,s,T,e,a,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class X5 extends Xh{constructor(t=1,i={}){super(t,t,i),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},v=[n,n,n,n,n,n];this.texture=new PR(v,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:pa}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},v=new Ef(5,5,5),S=new gl({name:"CubemapFromEquirect",uniforms:_c(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ms,blending:ol});S.uniforms.tEquirect.value=i;const s=new Es(v,S),T=i.minFilter;return i.minFilter===Th&&(i.minFilter=pa),new H5(1,10,this).update(t,s),i.minFilter=T,s.geometry.dispose(),s.material.dispose(),this}clear(t,i,n,v){const S=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(i,n,v);t.setRenderTarget(S)}}class Cd extends rs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const k5={type:"move"};class ax{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Cd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Cd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new St,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new St),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Cd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new St,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new St),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const i=this._hand;if(i)for(const n of t.hand.values())this._getHandJoint(i,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,i,n){let v=null,S=null,s=null;const T=this._targetRay,e=this._grip,a=this._hand;if(t&&i.session.visibilityState!=="visible-blurred"){if(a&&t.hand){s=!0;for(const h of t.hand.values()){const d=i.getJointPose(h,n),l=this._getHandJoint(a,h);d!==null&&(l.matrix.fromArray(d.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,l.jointRadius=d.radius),l.visible=d!==null}const m=a.joints["index-finger-tip"],c=a.joints["thumb-tip"],o=m.position.distanceTo(c.position),u=.02,r=.005;a.inputState.pinching&&o>u+r?(a.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!a.inputState.pinching&&o<=u-r&&(a.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else e!==null&&t.gripSpace&&(S=i.getPose(t.gripSpace,n),S!==null&&(e.matrix.fromArray(S.transform.matrix),e.matrix.decompose(e.position,e.rotation,e.scale),e.matrixWorldNeedsUpdate=!0,S.linearVelocity?(e.hasLinearVelocity=!0,e.linearVelocity.copy(S.linearVelocity)):e.hasLinearVelocity=!1,S.angularVelocity?(e.hasAngularVelocity=!0,e.angularVelocity.copy(S.angularVelocity)):e.hasAngularVelocity=!1));T!==null&&(v=i.getPose(t.targetRaySpace,n),v===null&&S!==null&&(v=S),v!==null&&(T.matrix.fromArray(v.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,v.linearVelocity?(T.hasLinearVelocity=!0,T.linearVelocity.copy(v.linearVelocity)):T.hasLinearVelocity=!1,v.angularVelocity?(T.hasAngularVelocity=!0,T.angularVelocity.copy(v.angularVelocity)):T.hasAngularVelocity=!1,this.dispatchEvent(k5)))}return T!==null&&(T.visible=v!==null),e!==null&&(e.visible=S!==null),a!==null&&(a.visible=s!==null),this}_getHandJoint(t,i){if(t.joints[i.jointName]===void 0){const n=new Cd;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[i.jointName]=n,t.add(n)}return t.joints[i.jointName]}}class Y5 extends rs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ca,this.environmentIntensity=1,this.environmentRotation=new Ca,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}const ox=new St,$5=new St,K5=new Ve;let sh=class{constructor(t=new St(1,0,0),i=0){this.isPlane=!0,this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,n,v){return this.normal.set(t,i,n),this.constant=v,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,n){const v=ox.subVectors(n,i).cross($5.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(v,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,i){const n=t.delta(ox),v=this.normal.dot(n);if(v===0)return this.distanceToPoint(t.start)===0?i.copy(t.start):null;const S=-(t.start.dot(this.normal)+this.constant)/v;return S<0||S>1?null:i.copy(t.start).addScaledVector(n,S)}intersectsLine(t){const i=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return i<0&&n>0||n<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const n=i||K5.getNormalMatrix(t),v=this.coplanarPoint(ox).applyMatrix4(t),S=this.normal.applyMatrix3(n).normalize();return this.constant=-v.dot(S),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Ql=new wT,tm=new St;class AT{constructor(t=new sh,i=new sh,n=new sh,v=new sh,S=new sh,s=new sh){this.planes=[t,i,n,v,S,s]}set(t,i,n,v,S,s){const T=this.planes;return T[0].copy(t),T[1].copy(i),T[2].copy(n),T[3].copy(v),T[4].copy(S),T[5].copy(s),this}copy(t){const i=this.planes;for(let n=0;n<6;n++)i[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,i=qa){const n=this.planes,v=t.elements,S=v[0],s=v[1],T=v[2],e=v[3],a=v[4],m=v[5],c=v[6],o=v[7],u=v[8],r=v[9],h=v[10],d=v[11],l=v[12],p=v[13],g=v[14],x=v[15];if(n[0].setComponents(e-S,o-a,d-u,x-l).normalize(),n[1].setComponents(e+S,o+a,d+u,x+l).normalize(),n[2].setComponents(e+s,o+m,d+r,x+p).normalize(),n[3].setComponents(e-s,o-m,d-r,x-p).normalize(),n[4].setComponents(e-T,o-c,d-h,x-g).normalize(),i===qa)n[5].setComponents(e+T,o+c,d+h,x+g).normalize();else if(i===Jm)n[5].setComponents(T,c,h,g).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Ql.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const i=t.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),Ql.copy(i.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Ql)}intersectsSprite(t){return Ql.center.set(0,0,0),Ql.radius=.7071067811865476,Ql.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ql)}intersectsSphere(t){const i=this.planes,n=t.center,v=-t.radius;for(let S=0;S<6;S++)if(i[S].distanceToPoint(n)<v)return!1;return!0}intersectsBox(t){const i=this.planes;for(let n=0;n<6;n++){const v=i[n];if(tm.x=v.normal.x>0?t.max.x:t.min.x,tm.y=v.normal.y>0?t.max.y:t.min.y,tm.z=v.normal.z>0?t.max.z:t.min.z,v.distanceToPoint(tm)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let n=0;n<6;n++)if(i[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class bR extends Rs{constructor(t,i,n,v,S,s,T,e,a,m=uc){if(m!==uc&&m!==zc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&m===uc&&(n=Hh),n===void 0&&m===zc&&(n=Vc),super(null,v,S,s,T,e,m,n,a),this.isDepthTexture=!0,this.image={width:t,height:i},this.magFilter=T!==void 0?T:Gr,this.minFilter=e!==void 0?e:Gr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const i=super.toJSON(t);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}}class tg extends To{constructor(t=1,i=1,n=1,v=32,S=1,s=!1,T=0,e=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:i,height:n,radialSegments:v,heightSegments:S,openEnded:s,thetaStart:T,thetaLength:e};const a=this;v=Math.floor(v),S=Math.floor(S);const m=[],c=[],o=[],u=[];let r=0;const h=[],d=n/2;let l=0;p(),s===!1&&(t>0&&g(!0),i>0&&g(!1)),this.setIndex(m),this.setAttribute("position",new Ks(c,3)),this.setAttribute("normal",new Ks(o,3)),this.setAttribute("uv",new Ks(u,2));function p(){const x=new St,y=new St;let E=0;const w=(i-t)/n;for(let C=0;C<=S;C++){const A=[],M=C/S,R=M*(i-t)+t;for(let P=0;P<=v;P++){const b=P/v,F=b*e+T,I=Math.sin(F),L=Math.cos(F);y.x=R*I,y.y=-M*n+d,y.z=R*L,c.push(y.x,y.y,y.z),x.set(I,w,L).normalize(),o.push(x.x,x.y,x.z),u.push(b,1-M),A.push(r++)}h.push(A)}for(let C=0;C<v;C++)for(let A=0;A<S;A++){const M=h[A][C],R=h[A+1][C],P=h[A+1][C+1],b=h[A][C+1];(t>0||A!==0)&&(m.push(M,R,b),E+=3),(i>0||A!==S-1)&&(m.push(R,P,b),E+=3)}a.addGroup(l,E,0),l+=E}function g(x){const y=r,E=new ai,w=new St;let C=0;const A=x===!0?t:i,M=x===!0?1:-1;for(let P=1;P<=v;P++)c.push(0,d*M,0),o.push(0,M,0),u.push(.5,.5),r++;const R=r;for(let P=0;P<=v;P++){const F=P/v*e+T,I=Math.cos(F),L=Math.sin(F);w.x=A*L,w.y=d*M,w.z=A*I,c.push(w.x,w.y,w.z),o.push(0,M,0),E.x=I*.5+.5,E.y=L*.5*M+.5,u.push(E.x,E.y),r++}for(let P=0;P<v;P++){const b=y+P,F=R+P;x===!0?m.push(F,F+1,b):m.push(F+1,F,b),C+=3}a.addGroup(l,C,x===!0?1:2),l+=C}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new tg(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class kg extends To{constructor(t=1,i=1,n=1,v=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:n,heightSegments:v};const S=t/2,s=i/2,T=Math.floor(n),e=Math.floor(v),a=T+1,m=e+1,c=t/T,o=i/e,u=[],r=[],h=[],d=[];for(let l=0;l<m;l++){const p=l*o-s;for(let g=0;g<a;g++){const x=g*c-S;r.push(x,-p,0),h.push(0,0,1),d.push(g/T),d.push(1-l/e)}}for(let l=0;l<e;l++)for(let p=0;p<T;p++){const g=p+a*l,x=p+a*(l+1),y=p+1+a*(l+1),E=p+1+a*l;u.push(g,x,E),u.push(x,y,E)}this.setIndex(u),this.setAttribute("position",new Ks(r,3)),this.setAttribute("normal",new Ks(h,3)),this.setAttribute("uv",new Ks(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new kg(t.width,t.height,t.widthSegments,t.heightSegments)}}class eg extends To{constructor(t=1,i=32,n=16,v=0,S=Math.PI*2,s=0,T=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:i,heightSegments:n,phiStart:v,phiLength:S,thetaStart:s,thetaLength:T},i=Math.max(3,Math.floor(i)),n=Math.max(2,Math.floor(n));const e=Math.min(s+T,Math.PI);let a=0;const m=[],c=new St,o=new St,u=[],r=[],h=[],d=[];for(let l=0;l<=n;l++){const p=[],g=l/n;let x=0;l===0&&s===0?x=.5/i:l===n&&e===Math.PI&&(x=-.5/i);for(let y=0;y<=i;y++){const E=y/i;c.x=-t*Math.cos(v+E*S)*Math.sin(s+g*T),c.y=t*Math.cos(s+g*T),c.z=t*Math.sin(v+E*S)*Math.sin(s+g*T),r.push(c.x,c.y,c.z),o.copy(c).normalize(),h.push(o.x,o.y,o.z),d.push(E+x,1-g),p.push(a++)}m.push(p)}for(let l=0;l<n;l++)for(let p=0;p<i;p++){const g=m[l][p+1],x=m[l][p],y=m[l+1][p],E=m[l+1][p+1];(l!==0||s>0)&&u.push(g,x,E),(l!==n-1||e<Math.PI)&&u.push(x,y,E)}this.setIndex(u),this.setAttribute("position",new Ks(r,3)),this.setAttribute("normal",new Ks(h,3)),this.setAttribute("uv",new Ks(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new eg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class em extends Gp{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new vi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=mR,this.normalScale=new ai(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ca,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class j5 extends Gp{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=a5,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Q5 extends Gp{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class CT extends rs{constructor(t,i=1){super(),this.isLight=!0,this.type="Light",this.color=new vi(t),this.intensity=i}dispose(){}copy(t,i){return super.copy(t,i),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(i.object.target=this.target.uuid),i}}const lx=new ji,O2=new St,N2=new St;class IR{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ai(512,512),this.map=null,this.mapPass=null,this.matrix=new ji,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new AT,this._frameExtents=new ai(1,1),this._viewportCount=1,this._viewports=[new Mi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const i=this.camera,n=this.matrix;O2.setFromMatrixPosition(t.matrixWorld),i.position.copy(O2),N2.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(N2),i.updateMatrixWorld(),lx.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lx),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(lx)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}const B2=new ji,hd=new St,hx=new St;class Z5 extends IR{constructor(){super(new Hs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ai(4,2),this._viewportCount=6,this._viewports=[new Mi(2,1,1,1),new Mi(0,1,1,1),new Mi(3,1,1,1),new Mi(1,1,1,1),new Mi(3,0,1,1),new Mi(1,0,1,1)],this._cubeDirections=[new St(1,0,0),new St(-1,0,0),new St(0,0,1),new St(0,0,-1),new St(0,1,0),new St(0,-1,0)],this._cubeUps=[new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,0,1),new St(0,0,-1)]}updateMatrices(t,i=0){const n=this.camera,v=this.matrix,S=t.distance||n.far;S!==n.far&&(n.far=S,n.updateProjectionMatrix()),hd.setFromMatrixPosition(t.matrixWorld),n.position.copy(hd),hx.copy(n.position),hx.add(this._cubeDirections[i]),n.up.copy(this._cubeUps[i]),n.lookAt(hx),n.updateMatrixWorld(),v.makeTranslation(-hd.x,-hd.y,-hd.z),B2.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(B2)}}class J5 extends CT{constructor(t,i,n=0,v=2){super(t,i),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=v,this.shadow=new Z5}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class LR extends RR{constructor(t=-1,i=1,n=1,v=-1,S=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=n,this.bottom=v,this.near=S,this.far=s,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,i,n,v,S,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=n,this.view.offsetY=v,this.view.width=S,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,v=(this.top+this.bottom)/2;let S=n-t,s=n+t,T=v+i,e=v-i;if(this.view!==null&&this.view.enabled){const a=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;S+=a*this.view.offsetX,s=S+a*this.view.width,T-=m*this.view.offsetY,e=T-m*this.view.height}this.projectionMatrix.makeOrthographic(S,s,T,e,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}class q5 extends IR{constructor(){super(new LR(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class tN extends CT{constructor(t,i){super(t,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(rs.DEFAULT_UP),this.updateMatrix(),this.target=new rs,this.shadow=new q5}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class eN extends CT{constructor(t,i){super(t,i),this.isAmbientLight=!0,this.type="AmbientLight"}}class iN extends Hs{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}function U2(f,t,i,n){const v=nN(n);switch(i){case hR:return f*t;case cR:return f*t;case fR:return f*t*2;case dR:return f*t/v.components*v.byteLength;case TT:return f*t/v.components*v.byteLength;case pR:return f*t*2/v.components*v.byteLength;case ET:return f*t*2/v.components*v.byteLength;case uR:return f*t*3/v.components*v.byteLength;case Ur:return f*t*4/v.components*v.byteLength;case ST:return f*t*4/v.components*v.byteLength;case Cm:case Mm:return Math.floor((f+3)/4)*Math.floor((t+3)/4)*8;case Rm:case Pm:return Math.floor((f+3)/4)*Math.floor((t+3)/4)*16;case Fy:case Oy:return Math.max(f,16)*Math.max(t,8)/4;case Ly:case Dy:return Math.max(f,8)*Math.max(t,8)/2;case Ny:case By:return Math.floor((f+3)/4)*Math.floor((t+3)/4)*8;case Uy:return Math.floor((f+3)/4)*Math.floor((t+3)/4)*16;case Vy:return Math.floor((f+3)/4)*Math.floor((t+3)/4)*16;case zy:return Math.floor((f+4)/5)*Math.floor((t+3)/4)*16;case Gy:return Math.floor((f+4)/5)*Math.floor((t+4)/5)*16;case _y:return Math.floor((f+5)/6)*Math.floor((t+4)/5)*16;case Wy:return Math.floor((f+5)/6)*Math.floor((t+5)/6)*16;case Hy:return Math.floor((f+7)/8)*Math.floor((t+4)/5)*16;case Xy:return Math.floor((f+7)/8)*Math.floor((t+5)/6)*16;case ky:return Math.floor((f+7)/8)*Math.floor((t+7)/8)*16;case Yy:return Math.floor((f+9)/10)*Math.floor((t+4)/5)*16;case $y:return Math.floor((f+9)/10)*Math.floor((t+5)/6)*16;case Ky:return Math.floor((f+9)/10)*Math.floor((t+7)/8)*16;case jy:return Math.floor((f+9)/10)*Math.floor((t+9)/10)*16;case Qy:return Math.floor((f+11)/12)*Math.floor((t+9)/10)*16;case Zy:return Math.floor((f+11)/12)*Math.floor((t+11)/12)*16;case bm:case Jy:case qy:return Math.ceil(f/4)*Math.ceil(t/4)*16;case vR:case t1:return Math.ceil(f/4)*Math.ceil(t/4)*8;case e1:case i1:return Math.ceil(f/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${i} format.`)}function nN(f){switch(f){case uo:case aR:return{byteLength:1,components:1};case np:case oR:case Bp:return{byteLength:2,components:1};case xT:case yT:return{byteLength:2,components:4};case Hh:case gT:case Ja:return{byteLength:4,components:1};case lR:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${f}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:mT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=mT);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function FR(){let f=null,t=!1,i=null,n=null;function v(S,s){i(S,s),n=f.requestAnimationFrame(v)}return{start:function(){t!==!0&&i!==null&&(n=f.requestAnimationFrame(v),t=!0)},stop:function(){f.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(S){i=S},setContext:function(S){f=S}}}function sN(f){const t=new WeakMap;function i(T,e){const a=T.array,m=T.usage,c=a.byteLength,o=f.createBuffer();f.bindBuffer(e,o),f.bufferData(e,a,m),T.onUploadCallback();let u;if(a instanceof Float32Array)u=f.FLOAT;else if(a instanceof Uint16Array)T.isFloat16BufferAttribute?u=f.HALF_FLOAT:u=f.UNSIGNED_SHORT;else if(a instanceof Int16Array)u=f.SHORT;else if(a instanceof Uint32Array)u=f.UNSIGNED_INT;else if(a instanceof Int32Array)u=f.INT;else if(a instanceof Int8Array)u=f.BYTE;else if(a instanceof Uint8Array)u=f.UNSIGNED_BYTE;else if(a instanceof Uint8ClampedArray)u=f.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);return{buffer:o,type:u,bytesPerElement:a.BYTES_PER_ELEMENT,version:T.version,size:c}}function n(T,e,a){const m=e.array,c=e.updateRanges;if(f.bindBuffer(a,T),c.length===0)f.bufferSubData(a,0,m);else{c.sort((u,r)=>u.start-r.start);let o=0;for(let u=1;u<c.length;u++){const r=c[o],h=c[u];h.start<=r.start+r.count+1?r.count=Math.max(r.count,h.start+h.count-r.start):(++o,c[o]=h)}c.length=o+1;for(let u=0,r=c.length;u<r;u++){const h=c[u];f.bufferSubData(a,h.start*m.BYTES_PER_ELEMENT,m,h.start,h.count)}e.clearUpdateRanges()}e.onUploadCallback()}function v(T){return T.isInterleavedBufferAttribute&&(T=T.data),t.get(T)}function S(T){T.isInterleavedBufferAttribute&&(T=T.data);const e=t.get(T);e&&(f.deleteBuffer(e.buffer),t.delete(T))}function s(T,e){if(T.isInterleavedBufferAttribute&&(T=T.data),T.isGLBufferAttribute){const m=t.get(T);(!m||m.version<T.version)&&t.set(T,{buffer:T.buffer,type:T.type,bytesPerElement:T.elementSize,version:T.version});return}const a=t.get(T);if(a===void 0)t.set(T,i(T,e));else if(a.version<T.version){if(a.size!==T.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(a.buffer,T,e),a.version=T.version}}return{get:v,remove:S,update:s}}var rN=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,aN=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,oN=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,lN=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hN=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,uN=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,cN=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,fN=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,dN=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,pN=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,vN=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,mN=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,gN=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xN=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,yN=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,TN=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,EN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,SN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,wN=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,AN=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,CN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,MN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,RN=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,PN=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,bN=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,IN=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,LN=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,FN=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,DN=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ON=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,NN="gl_FragColor = linearToOutputTexel( gl_FragColor );",BN=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,UN=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VN=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zN=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,GN=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_N=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,WN=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,HN=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,XN=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,kN=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,YN=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,$N=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,KN=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,jN=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,QN=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ZN=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,JN=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,qN=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,t9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,e9=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,i9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,n9=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,s9=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,r9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,a9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,o9=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,l9=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,h9=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,u9=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,c9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,f9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,d9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,p9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,v9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,m9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,g9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,x9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,y9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,T9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,E9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,S9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,w9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,A9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,C9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,M9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,R9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,P9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,b9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,I9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,L9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,F9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,D9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,O9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,N9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,B9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,U9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,V9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,z9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,G9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,_9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,W9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,H9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,X9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,k9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Y9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,$9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,K9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,j9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Q9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Z9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,J9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,q9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,t6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,e6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,i6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,n6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const s6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,r6=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,a6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,o6=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,l6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,h6=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,u6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,c6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,f6=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,d6=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,p6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,v6=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,m6=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,g6=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,x6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,y6=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,T6=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,E6=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,S6=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,w6=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A6=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,C6=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,M6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,R6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P6=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,b6=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,I6=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,L6=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F6=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,D6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,O6=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,N6=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,B6=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,U6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ge={alphahash_fragment:rN,alphahash_pars_fragment:aN,alphamap_fragment:oN,alphamap_pars_fragment:lN,alphatest_fragment:hN,alphatest_pars_fragment:uN,aomap_fragment:cN,aomap_pars_fragment:fN,batching_pars_vertex:dN,batching_vertex:pN,begin_vertex:vN,beginnormal_vertex:mN,bsdfs:gN,iridescence_fragment:xN,bumpmap_pars_fragment:yN,clipping_planes_fragment:TN,clipping_planes_pars_fragment:EN,clipping_planes_pars_vertex:SN,clipping_planes_vertex:wN,color_fragment:AN,color_pars_fragment:CN,color_pars_vertex:MN,color_vertex:RN,common:PN,cube_uv_reflection_fragment:bN,defaultnormal_vertex:IN,displacementmap_pars_vertex:LN,displacementmap_vertex:FN,emissivemap_fragment:DN,emissivemap_pars_fragment:ON,colorspace_fragment:NN,colorspace_pars_fragment:BN,envmap_fragment:UN,envmap_common_pars_fragment:VN,envmap_pars_fragment:zN,envmap_pars_vertex:GN,envmap_physical_pars_fragment:ZN,envmap_vertex:_N,fog_vertex:WN,fog_pars_vertex:HN,fog_fragment:XN,fog_pars_fragment:kN,gradientmap_pars_fragment:YN,lightmap_pars_fragment:$N,lights_lambert_fragment:KN,lights_lambert_pars_fragment:jN,lights_pars_begin:QN,lights_toon_fragment:JN,lights_toon_pars_fragment:qN,lights_phong_fragment:t9,lights_phong_pars_fragment:e9,lights_physical_fragment:i9,lights_physical_pars_fragment:n9,lights_fragment_begin:s9,lights_fragment_maps:r9,lights_fragment_end:a9,logdepthbuf_fragment:o9,logdepthbuf_pars_fragment:l9,logdepthbuf_pars_vertex:h9,logdepthbuf_vertex:u9,map_fragment:c9,map_pars_fragment:f9,map_particle_fragment:d9,map_particle_pars_fragment:p9,metalnessmap_fragment:v9,metalnessmap_pars_fragment:m9,morphinstance_vertex:g9,morphcolor_vertex:x9,morphnormal_vertex:y9,morphtarget_pars_vertex:T9,morphtarget_vertex:E9,normal_fragment_begin:S9,normal_fragment_maps:w9,normal_pars_fragment:A9,normal_pars_vertex:C9,normal_vertex:M9,normalmap_pars_fragment:R9,clearcoat_normal_fragment_begin:P9,clearcoat_normal_fragment_maps:b9,clearcoat_pars_fragment:I9,iridescence_pars_fragment:L9,opaque_fragment:F9,packing:D9,premultiplied_alpha_fragment:O9,project_vertex:N9,dithering_fragment:B9,dithering_pars_fragment:U9,roughnessmap_fragment:V9,roughnessmap_pars_fragment:z9,shadowmap_pars_fragment:G9,shadowmap_pars_vertex:_9,shadowmap_vertex:W9,shadowmask_pars_fragment:H9,skinbase_vertex:X9,skinning_pars_vertex:k9,skinning_vertex:Y9,skinnormal_vertex:$9,specularmap_fragment:K9,specularmap_pars_fragment:j9,tonemapping_fragment:Q9,tonemapping_pars_fragment:Z9,transmission_fragment:J9,transmission_pars_fragment:q9,uv_pars_fragment:t6,uv_pars_vertex:e6,uv_vertex:i6,worldpos_vertex:n6,background_vert:s6,background_frag:r6,backgroundCube_vert:a6,backgroundCube_frag:o6,cube_vert:l6,cube_frag:h6,depth_vert:u6,depth_frag:c6,distanceRGBA_vert:f6,distanceRGBA_frag:d6,equirect_vert:p6,equirect_frag:v6,linedashed_vert:m6,linedashed_frag:g6,meshbasic_vert:x6,meshbasic_frag:y6,meshlambert_vert:T6,meshlambert_frag:E6,meshmatcap_vert:S6,meshmatcap_frag:w6,meshnormal_vert:A6,meshnormal_frag:C6,meshphong_vert:M6,meshphong_frag:R6,meshphysical_vert:P6,meshphysical_frag:b6,meshtoon_vert:I6,meshtoon_frag:L6,points_vert:F6,points_frag:D6,shadow_vert:O6,shadow_frag:N6,sprite_vert:B6,sprite_frag:U6},he={common:{diffuse:{value:new vi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ve},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ve}},envmap:{envMap:{value:null},envMapRotation:{value:new Ve},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ve}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ve}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ve},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ve},normalScale:{value:new ai(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ve},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ve}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ve}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ve}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0},uvTransform:{value:new Ve}},sprite:{diffuse:{value:new vi(16777215)},opacity:{value:1},center:{value:new ai(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ve},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0}}},ca={basic:{uniforms:fs([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.fog]),vertexShader:Ge.meshbasic_vert,fragmentShader:Ge.meshbasic_frag},lambert:{uniforms:fs([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.fog,he.lights,{emissive:{value:new vi(0)}}]),vertexShader:Ge.meshlambert_vert,fragmentShader:Ge.meshlambert_frag},phong:{uniforms:fs([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.fog,he.lights,{emissive:{value:new vi(0)},specular:{value:new vi(1118481)},shininess:{value:30}}]),vertexShader:Ge.meshphong_vert,fragmentShader:Ge.meshphong_frag},standard:{uniforms:fs([he.common,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.roughnessmap,he.metalnessmap,he.fog,he.lights,{emissive:{value:new vi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ge.meshphysical_vert,fragmentShader:Ge.meshphysical_frag},toon:{uniforms:fs([he.common,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.gradientmap,he.fog,he.lights,{emissive:{value:new vi(0)}}]),vertexShader:Ge.meshtoon_vert,fragmentShader:Ge.meshtoon_frag},matcap:{uniforms:fs([he.common,he.bumpmap,he.normalmap,he.displacementmap,he.fog,{matcap:{value:null}}]),vertexShader:Ge.meshmatcap_vert,fragmentShader:Ge.meshmatcap_frag},points:{uniforms:fs([he.points,he.fog]),vertexShader:Ge.points_vert,fragmentShader:Ge.points_frag},dashed:{uniforms:fs([he.common,he.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ge.linedashed_vert,fragmentShader:Ge.linedashed_frag},depth:{uniforms:fs([he.common,he.displacementmap]),vertexShader:Ge.depth_vert,fragmentShader:Ge.depth_frag},normal:{uniforms:fs([he.common,he.bumpmap,he.normalmap,he.displacementmap,{opacity:{value:1}}]),vertexShader:Ge.meshnormal_vert,fragmentShader:Ge.meshnormal_frag},sprite:{uniforms:fs([he.sprite,he.fog]),vertexShader:Ge.sprite_vert,fragmentShader:Ge.sprite_frag},background:{uniforms:{uvTransform:{value:new Ve},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ge.background_vert,fragmentShader:Ge.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ve}},vertexShader:Ge.backgroundCube_vert,fragmentShader:Ge.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ge.cube_vert,fragmentShader:Ge.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ge.equirect_vert,fragmentShader:Ge.equirect_frag},distanceRGBA:{uniforms:fs([he.common,he.displacementmap,{referencePosition:{value:new St},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ge.distanceRGBA_vert,fragmentShader:Ge.distanceRGBA_frag},shadow:{uniforms:fs([he.lights,he.fog,{color:{value:new vi(0)},opacity:{value:1}}]),vertexShader:Ge.shadow_vert,fragmentShader:Ge.shadow_frag}};ca.physical={uniforms:fs([ca.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ve},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ve},clearcoatNormalScale:{value:new ai(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ve},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ve},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ve},sheen:{value:0},sheenColor:{value:new vi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ve},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ve},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ve},transmissionSamplerSize:{value:new ai},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ve},attenuationDistance:{value:0},attenuationColor:{value:new vi(0)},specularColor:{value:new vi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ve},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ve},anisotropyVector:{value:new ai},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ve}}]),vertexShader:Ge.meshphysical_vert,fragmentShader:Ge.meshphysical_frag};const im={r:0,b:0,g:0},Zl=new Ca,V6=new ji;function z6(f,t,i,n,v,S,s){const T=new vi(0);let e=S===!0?0:1,a,m,c=null,o=0,u=null;function r(g){let x=g.isScene===!0?g.background:null;return x&&x.isTexture&&(x=(g.backgroundBlurriness>0?i:t).get(x)),x}function h(g){let x=!1;const y=r(g);y===null?l(T,e):y&&y.isColor&&(l(y,1),x=!0);const E=f.xr.getEnvironmentBlendMode();E==="additive"?n.buffers.color.setClear(0,0,0,1,s):E==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,s),(f.autoClear||x)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),f.clear(f.autoClearColor,f.autoClearDepth,f.autoClearStencil))}function d(g,x){const y=r(x);y&&(y.isCubeTexture||y.mapping===Xg)?(m===void 0&&(m=new Es(new Ef(1,1,1),new gl({name:"BackgroundCubeMaterial",uniforms:_c(ca.backgroundCube.uniforms),vertexShader:ca.backgroundCube.vertexShader,fragmentShader:ca.backgroundCube.fragmentShader,side:Ms,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(E,w,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),v.update(m)),Zl.copy(x.backgroundRotation),Zl.x*=-1,Zl.y*=-1,Zl.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(Zl.y*=-1,Zl.z*=-1),m.material.uniforms.envMap.value=y,m.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(V6.makeRotationFromEuler(Zl)),m.material.toneMapped=ci.getTransfer(y.colorSpace)!==Ci,(c!==y||o!==y.version||u!==f.toneMapping)&&(m.material.needsUpdate=!0,c=y,o=y.version,u=f.toneMapping),m.layers.enableAll(),g.unshift(m,m.geometry,m.material,0,0,null)):y&&y.isTexture&&(a===void 0&&(a=new Es(new kg(2,2),new gl({name:"BackgroundMaterial",uniforms:_c(ca.background.uniforms),vertexShader:ca.background.vertexShader,fragmentShader:ca.background.fragmentShader,side:ho,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),v.update(a)),a.material.uniforms.t2D.value=y,a.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,a.material.toneMapped=ci.getTransfer(y.colorSpace)!==Ci,y.matrixAutoUpdate===!0&&y.updateMatrix(),a.material.uniforms.uvTransform.value.copy(y.matrix),(c!==y||o!==y.version||u!==f.toneMapping)&&(a.material.needsUpdate=!0,c=y,o=y.version,u=f.toneMapping),a.layers.enableAll(),g.unshift(a,a.geometry,a.material,0,0,null))}function l(g,x){g.getRGB(im,MR(f)),n.buffers.color.setClear(im.r,im.g,im.b,x,s)}function p(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),a!==void 0&&(a.geometry.dispose(),a.material.dispose(),a=void 0)}return{getClearColor:function(){return T},setClearColor:function(g,x=1){T.set(g),e=x,l(T,e)},getClearAlpha:function(){return e},setClearAlpha:function(g){e=g,l(T,e)},render:h,addToRenderList:d,dispose:p}}function G6(f,t){const i=f.getParameter(f.MAX_VERTEX_ATTRIBS),n={},v=o(null);let S=v,s=!1;function T(M,R,P,b,F){let I=!1;const L=c(b,P,R);S!==L&&(S=L,a(S.object)),I=u(M,b,P,F),I&&r(M,b,P,F),F!==null&&t.update(F,f.ELEMENT_ARRAY_BUFFER),(I||s)&&(s=!1,x(M,R,P,b),F!==null&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,t.get(F).buffer))}function e(){return f.createVertexArray()}function a(M){return f.bindVertexArray(M)}function m(M){return f.deleteVertexArray(M)}function c(M,R,P){const b=P.wireframe===!0;let F=n[M.id];F===void 0&&(F={},n[M.id]=F);let I=F[R.id];I===void 0&&(I={},F[R.id]=I);let L=I[b];return L===void 0&&(L=o(e()),I[b]=L),L}function o(M){const R=[],P=[],b=[];for(let F=0;F<i;F++)R[F]=0,P[F]=0,b[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:P,attributeDivisors:b,object:M,attributes:{},index:null}}function u(M,R,P,b){const F=S.attributes,I=R.attributes;let L=0;const D=P.getAttributes();for(const O in D)if(D[O].location>=0){const W=F[O];let k=I[O];if(k===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(k=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(k=M.instanceColor)),W===void 0||W.attribute!==k||k&&W.data!==k.data)return!0;L++}return S.attributesNum!==L||S.index!==b}function r(M,R,P,b){const F={},I=R.attributes;let L=0;const D=P.getAttributes();for(const O in D)if(D[O].location>=0){let W=I[O];W===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(W=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(W=M.instanceColor));const k={};k.attribute=W,W&&W.data&&(k.data=W.data),F[O]=k,L++}S.attributes=F,S.attributesNum=L,S.index=b}function h(){const M=S.newAttributes;for(let R=0,P=M.length;R<P;R++)M[R]=0}function d(M){l(M,0)}function l(M,R){const P=S.newAttributes,b=S.enabledAttributes,F=S.attributeDivisors;P[M]=1,b[M]===0&&(f.enableVertexAttribArray(M),b[M]=1),F[M]!==R&&(f.vertexAttribDivisor(M,R),F[M]=R)}function p(){const M=S.newAttributes,R=S.enabledAttributes;for(let P=0,b=R.length;P<b;P++)R[P]!==M[P]&&(f.disableVertexAttribArray(P),R[P]=0)}function g(M,R,P,b,F,I,L){L===!0?f.vertexAttribIPointer(M,R,P,F,I):f.vertexAttribPointer(M,R,P,b,F,I)}function x(M,R,P,b){h();const F=b.attributes,I=P.getAttributes(),L=R.defaultAttributeValues;for(const D in I){const O=I[D];if(O.location>=0){let z=F[D];if(z===void 0&&(D==="instanceMatrix"&&M.instanceMatrix&&(z=M.instanceMatrix),D==="instanceColor"&&M.instanceColor&&(z=M.instanceColor)),z!==void 0){const W=z.normalized,k=z.itemSize,X=t.get(z);if(X===void 0)continue;const V=X.buffer,G=X.type,N=X.bytesPerElement,H=G===f.INT||G===f.UNSIGNED_INT||z.gpuType===gT;if(z.isInterleavedBufferAttribute){const U=z.data,_=U.stride,$=z.offset;if(U.isInstancedInterleavedBuffer){for(let j=0;j<O.locationSize;j++)l(O.location+j,U.meshPerAttribute);M.isInstancedMesh!==!0&&b._maxInstanceCount===void 0&&(b._maxInstanceCount=U.meshPerAttribute*U.count)}else for(let j=0;j<O.locationSize;j++)d(O.location+j);f.bindBuffer(f.ARRAY_BUFFER,V);for(let j=0;j<O.locationSize;j++)g(O.location+j,k/O.locationSize,G,W,_*N,($+k/O.locationSize*j)*N,H)}else{if(z.isInstancedBufferAttribute){for(let U=0;U<O.locationSize;U++)l(O.location+U,z.meshPerAttribute);M.isInstancedMesh!==!0&&b._maxInstanceCount===void 0&&(b._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let U=0;U<O.locationSize;U++)d(O.location+U);f.bindBuffer(f.ARRAY_BUFFER,V);for(let U=0;U<O.locationSize;U++)g(O.location+U,k/O.locationSize,G,W,k*N,k/O.locationSize*U*N,H)}}else if(L!==void 0){const W=L[D];if(W!==void 0)switch(W.length){case 2:f.vertexAttrib2fv(O.location,W);break;case 3:f.vertexAttrib3fv(O.location,W);break;case 4:f.vertexAttrib4fv(O.location,W);break;default:f.vertexAttrib1fv(O.location,W)}}}}p()}function y(){C();for(const M in n){const R=n[M];for(const P in R){const b=R[P];for(const F in b)m(b[F].object),delete b[F];delete R[P]}delete n[M]}}function E(M){if(n[M.id]===void 0)return;const R=n[M.id];for(const P in R){const b=R[P];for(const F in b)m(b[F].object),delete b[F];delete R[P]}delete n[M.id]}function w(M){for(const R in n){const P=n[R];if(P[M.id]===void 0)continue;const b=P[M.id];for(const F in b)m(b[F].object),delete b[F];delete P[M.id]}}function C(){A(),s=!0,S!==v&&(S=v,a(S.object))}function A(){v.geometry=null,v.program=null,v.wireframe=!1}return{setup:T,reset:C,resetDefaultState:A,dispose:y,releaseStatesOfGeometry:E,releaseStatesOfProgram:w,initAttributes:h,enableAttribute:d,disableUnusedAttributes:p}}function _6(f,t,i){let n;function v(a){n=a}function S(a,m){f.drawArrays(n,a,m),i.update(m,n,1)}function s(a,m,c){c!==0&&(f.drawArraysInstanced(n,a,m,c),i.update(m,n,c))}function T(a,m,c){if(c===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,a,0,m,0,c);let u=0;for(let r=0;r<c;r++)u+=m[r];i.update(u,n,1)}function e(a,m,c,o){if(c===0)return;const u=t.get("WEBGL_multi_draw");if(u===null)for(let r=0;r<a.length;r++)s(a[r],m[r],o[r]);else{u.multiDrawArraysInstancedWEBGL(n,a,0,m,0,o,0,c);let r=0;for(let h=0;h<c;h++)r+=m[h]*o[h];i.update(r,n,1)}}this.setMode=v,this.render=S,this.renderInstances=s,this.renderMultiDraw=T,this.renderMultiDrawInstances=e}function W6(f,t,i,n){let v;function S(){if(v!==void 0)return v;if(t.has("EXT_texture_filter_anisotropic")===!0){const w=t.get("EXT_texture_filter_anisotropic");v=f.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else v=0;return v}function s(w){return!(w!==Ur&&n.convert(w)!==f.getParameter(f.IMPLEMENTATION_COLOR_READ_FORMAT))}function T(w){const C=w===Bp&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(w!==uo&&n.convert(w)!==f.getParameter(f.IMPLEMENTATION_COLOR_READ_TYPE)&&w!==Ja&&!C)}function e(w){if(w==="highp"){if(f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_FLOAT).precision>0&&f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT).precision>0)return"highp";w="mediump"}return w==="mediump"&&f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_FLOAT).precision>0&&f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=i.precision!==void 0?i.precision:"highp";const m=e(a);m!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",m,"instead."),a=m);const c=i.logarithmicDepthBuffer===!0,o=i.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),u=f.getParameter(f.MAX_TEXTURE_IMAGE_UNITS),r=f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=f.getParameter(f.MAX_TEXTURE_SIZE),d=f.getParameter(f.MAX_CUBE_MAP_TEXTURE_SIZE),l=f.getParameter(f.MAX_VERTEX_ATTRIBS),p=f.getParameter(f.MAX_VERTEX_UNIFORM_VECTORS),g=f.getParameter(f.MAX_VARYING_VECTORS),x=f.getParameter(f.MAX_FRAGMENT_UNIFORM_VECTORS),y=r>0,E=f.getParameter(f.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:S,getMaxPrecision:e,textureFormatReadable:s,textureTypeReadable:T,precision:a,logarithmicDepthBuffer:c,reverseDepthBuffer:o,maxTextures:u,maxVertexTextures:r,maxTextureSize:h,maxCubemapSize:d,maxAttributes:l,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:y,maxSamples:E}}function H6(f){const t=this;let i=null,n=0,v=!1,S=!1;const s=new sh,T=new Ve,e={value:null,needsUpdate:!1};this.uniform=e,this.numPlanes=0,this.numIntersection=0,this.init=function(c,o){const u=c.length!==0||o||n!==0||v;return v=o,n=c.length,u},this.beginShadows=function(){S=!0,m(null)},this.endShadows=function(){S=!1},this.setGlobalState=function(c,o){i=m(c,o,0)},this.setState=function(c,o,u){const r=c.clippingPlanes,h=c.clipIntersection,d=c.clipShadows,l=f.get(c);if(!v||r===null||r.length===0||S&&!d)S?m(null):a();else{const p=S?0:n,g=p*4;let x=l.clippingState||null;e.value=x,x=m(r,o,g,u);for(let y=0;y!==g;++y)x[y]=i[y];l.clippingState=x,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=p}};function a(){e.value!==i&&(e.value=i,e.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function m(c,o,u,r){const h=c!==null?c.length:0;let d=null;if(h!==0){if(d=e.value,r!==!0||d===null){const l=u+h*4,p=o.matrixWorldInverse;T.getNormalMatrix(p),(d===null||d.length<l)&&(d=new Float32Array(l));for(let g=0,x=u;g!==h;++g,x+=4)s.copy(c[g]).applyMatrix4(p,T),s.normal.toArray(d,x),d[x+3]=s.constant}e.value=d,e.needsUpdate=!0}return t.numPlanes=h,t.numIntersection=0,d}}function X6(f){let t=new WeakMap;function i(s,T){return T===Ry?s.mapping=Bc:T===Py&&(s.mapping=Uc),s}function n(s){if(s&&s.isTexture){const T=s.mapping;if(T===Ry||T===Py)if(t.has(s)){const e=t.get(s).texture;return i(e,s.mapping)}else{const e=s.image;if(e&&e.height>0){const a=new X5(e.height);return a.fromEquirectangularTexture(f,s),t.set(s,a),s.addEventListener("dispose",v),i(a.texture,s.mapping)}else return null}}return s}function v(s){const T=s.target;T.removeEventListener("dispose",v);const e=t.get(T);e!==void 0&&(t.delete(T),e.dispose())}function S(){t=new WeakMap}return{get:n,dispose:S}}const rc=4,V2=[.125,.215,.35,.446,.526,.582],ch=20,ux=new LR,z2=new vi;let cx=null,fx=0,dx=0,px=!1;const rh=(1+Math.sqrt(5))/2,Wu=1/rh,G2=[new St(-rh,Wu,0),new St(rh,Wu,0),new St(-Wu,0,rh),new St(Wu,0,rh),new St(0,rh,-Wu),new St(0,rh,Wu),new St(-1,1,-1),new St(1,1,-1),new St(-1,1,1),new St(1,1,1)];class _2{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,n=.1,v=100){cx=this._renderer.getRenderTarget(),fx=this._renderer.getActiveCubeFace(),dx=this._renderer.getActiveMipmapLevel(),px=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const S=this._allocateTargets();return S.depthBuffer=!0,this._sceneToCubeUV(t,n,v,S),i>0&&this._blur(S,0,0,i),this._applyPMREM(S),this._cleanup(S),S}fromEquirectangular(t,i=null){return this._fromTexture(t,i)}fromCubemap(t,i=null){return this._fromTexture(t,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=X2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=H2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(cx,fx,dx),this._renderer.xr.enabled=px,t.scissorTest=!1,nm(t,0,0,t.width,t.height)}_fromTexture(t,i){t.mapping===Bc||t.mapping===Uc?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),cx=this._renderer.getRenderTarget(),fx=this._renderer.getActiveCubeFace(),dx=this._renderer.getActiveMipmapLevel(),px=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=i||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,n={magFilter:pa,minFilter:pa,generateMipmaps:!1,type:Bp,format:Ur,colorSpace:Gc,depthBuffer:!1},v=W2(t,i,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=W2(t,i,n);const{_lodMax:S}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=k6(S)),this._blurMaterial=Y6(S,t,i)}return v}_compileMaterial(t){const i=new Es(this._lodPlanes[0],t);this._renderer.compile(i,ux)}_sceneToCubeUV(t,i,n,v){const T=new Hs(90,1,i,n),e=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],m=this._renderer,c=m.autoClear,o=m.toneMapping;m.getClearColor(z2),m.toneMapping=ll,m.autoClear=!1;const u=new wR({name:"PMREM.Background",side:Ms,depthWrite:!1,depthTest:!1}),r=new Es(new Ef,u);let h=!1;const d=t.background;d?d.isColor&&(u.color.copy(d),t.background=null,h=!0):(u.color.copy(z2),h=!0);for(let l=0;l<6;l++){const p=l%3;p===0?(T.up.set(0,e[l],0),T.lookAt(a[l],0,0)):p===1?(T.up.set(0,0,e[l]),T.lookAt(0,a[l],0)):(T.up.set(0,e[l],0),T.lookAt(0,0,a[l]));const g=this._cubeSize;nm(v,p*g,l>2?g:0,g,g),m.setRenderTarget(v),h&&m.render(r,T),m.render(t,T)}r.geometry.dispose(),r.material.dispose(),m.toneMapping=o,m.autoClear=c,t.background=d}_textureToCubeUV(t,i){const n=this._renderer,v=t.mapping===Bc||t.mapping===Uc;v?(this._cubemapMaterial===null&&(this._cubemapMaterial=X2()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=H2());const S=v?this._cubemapMaterial:this._equirectMaterial,s=new Es(this._lodPlanes[0],S),T=S.uniforms;T.envMap.value=t;const e=this._cubeSize;nm(i,0,0,3*e,2*e),n.setRenderTarget(i),n.render(s,ux)}_applyPMREM(t){const i=this._renderer,n=i.autoClear;i.autoClear=!1;const v=this._lodPlanes.length;for(let S=1;S<v;S++){const s=Math.sqrt(this._sigmas[S]*this._sigmas[S]-this._sigmas[S-1]*this._sigmas[S-1]),T=G2[(v-S-1)%G2.length];this._blur(t,S-1,S,s,T)}i.autoClear=n}_blur(t,i,n,v,S){const s=this._pingPongRenderTarget;this._halfBlur(t,s,i,n,v,"latitudinal",S),this._halfBlur(s,t,n,n,v,"longitudinal",S)}_halfBlur(t,i,n,v,S,s,T){const e=this._renderer,a=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,c=new Es(this._lodPlanes[v],a),o=a.uniforms,u=this._sizeLods[n]-1,r=isFinite(S)?Math.PI/(2*u):2*Math.PI/(2*ch-1),h=S/r,d=isFinite(S)?1+Math.floor(m*h):ch;d>ch&&console.warn(`sigmaRadians, ${S}, is too large and will clip, as it requested ${d} samples when the maximum is set to ${ch}`);const l=[];let p=0;for(let w=0;w<ch;++w){const C=w/h,A=Math.exp(-C*C/2);l.push(A),w===0?p+=A:w<d&&(p+=2*A)}for(let w=0;w<l.length;w++)l[w]=l[w]/p;o.envMap.value=t.texture,o.samples.value=d,o.weights.value=l,o.latitudinal.value=s==="latitudinal",T&&(o.poleAxis.value=T);const{_lodMax:g}=this;o.dTheta.value=r,o.mipInt.value=g-n;const x=this._sizeLods[v],y=3*x*(v>g-rc?v-g+rc:0),E=4*(this._cubeSize-x);nm(i,y,E,3*x,2*x),e.setRenderTarget(i),e.render(c,ux)}}function k6(f){const t=[],i=[],n=[];let v=f;const S=f-rc+1+V2.length;for(let s=0;s<S;s++){const T=Math.pow(2,v);i.push(T);let e=1/T;s>f-rc?e=V2[s-f+rc-1]:s===0&&(e=0),n.push(e);const a=1/(T-2),m=-a,c=1+a,o=[m,m,c,m,c,c,m,m,c,c,m,c],u=6,r=6,h=3,d=2,l=1,p=new Float32Array(h*r*u),g=new Float32Array(d*r*u),x=new Float32Array(l*r*u);for(let E=0;E<u;E++){const w=E%3*2/3-1,C=E>2?0:-1,A=[w,C,0,w+2/3,C,0,w+2/3,C+1,0,w,C,0,w+2/3,C+1,0,w,C+1,0];p.set(A,h*r*E),g.set(o,d*r*E);const M=[E,E,E,E,E,E];x.set(M,l*r*E)}const y=new To;y.setAttribute("position",new Ta(p,h)),y.setAttribute("uv",new Ta(g,d)),y.setAttribute("faceIndex",new Ta(x,l)),t.push(y),v>rc&&v--}return{lodPlanes:t,sizeLods:i,sigmas:n}}function W2(f,t,i){const n=new Xh(f,t,i);return n.texture.mapping=Xg,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function nm(f,t,i,n,v){f.viewport.set(t,i,n,v),f.scissor.set(t,i,n,v)}function Y6(f,t,i){const n=new Float32Array(ch),v=new St(0,1,0);return new gl({name:"SphericalGaussianBlur",defines:{n:ch,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${f}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:v}},vertexShader:MT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ol,depthTest:!1,depthWrite:!1})}function H2(){return new gl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:MT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ol,depthTest:!1,depthWrite:!1})}function X2(){return new gl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:MT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ol,depthTest:!1,depthWrite:!1})}function MT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function $6(f){let t=new WeakMap,i=null;function n(T){if(T&&T.isTexture){const e=T.mapping,a=e===Ry||e===Py,m=e===Bc||e===Uc;if(a||m){let c=t.get(T);const o=c!==void 0?c.texture.pmremVersion:0;if(T.isRenderTargetTexture&&T.pmremVersion!==o)return i===null&&(i=new _2(f)),c=a?i.fromEquirectangular(T,c):i.fromCubemap(T,c),c.texture.pmremVersion=T.pmremVersion,t.set(T,c),c.texture;if(c!==void 0)return c.texture;{const u=T.image;return a&&u&&u.height>0||m&&u&&v(u)?(i===null&&(i=new _2(f)),c=a?i.fromEquirectangular(T):i.fromCubemap(T),c.texture.pmremVersion=T.pmremVersion,t.set(T,c),T.addEventListener("dispose",S),c.texture):null}}}return T}function v(T){let e=0;const a=6;for(let m=0;m<a;m++)T[m]!==void 0&&e++;return e===a}function S(T){const e=T.target;e.removeEventListener("dispose",S);const a=t.get(e);a!==void 0&&(t.delete(e),a.dispose())}function s(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:n,dispose:s}}function K6(f){const t={};function i(n){if(t[n]!==void 0)return t[n];let v;switch(n){case"WEBGL_depth_texture":v=f.getExtension("WEBGL_depth_texture")||f.getExtension("MOZ_WEBGL_depth_texture")||f.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":v=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":v=f.getExtension("WEBGL_compressed_texture_s3tc")||f.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||f.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":v=f.getExtension("WEBGL_compressed_texture_pvrtc")||f.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:v=f.getExtension(n)}return t[n]=v,v}return{has:function(n){return i(n)!==null},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(n){const v=i(n);return v===null&&Ju("THREE.WebGLRenderer: "+n+" extension not supported."),v}}}function j6(f,t,i,n){const v={},S=new WeakMap;function s(c){const o=c.target;o.index!==null&&t.remove(o.index);for(const r in o.attributes)t.remove(o.attributes[r]);o.removeEventListener("dispose",s),delete v[o.id];const u=S.get(o);u&&(t.remove(u),S.delete(o)),n.releaseStatesOfGeometry(o),o.isInstancedBufferGeometry===!0&&delete o._maxInstanceCount,i.memory.geometries--}function T(c,o){return v[o.id]===!0||(o.addEventListener("dispose",s),v[o.id]=!0,i.memory.geometries++),o}function e(c){const o=c.attributes;for(const u in o)t.update(o[u],f.ARRAY_BUFFER)}function a(c){const o=[],u=c.index,r=c.attributes.position;let h=0;if(u!==null){const p=u.array;h=u.version;for(let g=0,x=p.length;g<x;g+=3){const y=p[g+0],E=p[g+1],w=p[g+2];o.push(y,E,E,w,w,y)}}else if(r!==void 0){const p=r.array;h=r.version;for(let g=0,x=p.length/3-1;g<x;g+=3){const y=g+0,E=g+1,w=g+2;o.push(y,E,E,w,w,y)}}else return;const d=new(xR(o)?CR:AR)(o,1);d.version=h;const l=S.get(c);l&&t.remove(l),S.set(c,d)}function m(c){const o=S.get(c);if(o){const u=c.index;u!==null&&o.version<u.version&&a(c)}else a(c);return S.get(c)}return{get:T,update:e,getWireframeAttribute:m}}function Q6(f,t,i){let n;function v(o){n=o}let S,s;function T(o){S=o.type,s=o.bytesPerElement}function e(o,u){f.drawElements(n,u,S,o*s),i.update(u,n,1)}function a(o,u,r){r!==0&&(f.drawElementsInstanced(n,u,S,o*s,r),i.update(u,n,r))}function m(o,u,r){if(r===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,u,0,S,o,0,r);let d=0;for(let l=0;l<r;l++)d+=u[l];i.update(d,n,1)}function c(o,u,r,h){if(r===0)return;const d=t.get("WEBGL_multi_draw");if(d===null)for(let l=0;l<o.length;l++)a(o[l]/s,u[l],h[l]);else{d.multiDrawElementsInstancedWEBGL(n,u,0,S,o,0,h,0,r);let l=0;for(let p=0;p<r;p++)l+=u[p]*h[p];i.update(l,n,1)}}this.setMode=v,this.setIndex=T,this.render=e,this.renderInstances=a,this.renderMultiDraw=m,this.renderMultiDrawInstances=c}function Z6(f){const t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function n(S,s,T){switch(i.calls++,s){case f.TRIANGLES:i.triangles+=T*(S/3);break;case f.LINES:i.lines+=T*(S/2);break;case f.LINE_STRIP:i.lines+=T*(S-1);break;case f.LINE_LOOP:i.lines+=T*S;break;case f.POINTS:i.points+=T*S;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function v(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:v,update:n}}function J6(f,t,i){const n=new WeakMap,v=new Mi;function S(s,T,e){const a=s.morphTargetInfluences,m=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,c=m!==void 0?m.length:0;let o=n.get(T);if(o===void 0||o.count!==c){let A=function(){w.dispose(),n.delete(T),T.removeEventListener("dispose",A)};o!==void 0&&o.texture.dispose();const u=T.morphAttributes.position!==void 0,r=T.morphAttributes.normal!==void 0,h=T.morphAttributes.color!==void 0,d=T.morphAttributes.position||[],l=T.morphAttributes.normal||[],p=T.morphAttributes.color||[];let g=0;u===!0&&(g=1),r===!0&&(g=2),h===!0&&(g=3);let x=T.attributes.position.count*g,y=1;x>t.maxTextureSize&&(y=Math.ceil(x/t.maxTextureSize),x=t.maxTextureSize);const E=new Float32Array(x*y*4*c),w=new TR(E,x,y,c);w.type=Ja,w.needsUpdate=!0;const C=g*4;for(let M=0;M<c;M++){const R=d[M],P=l[M],b=p[M],F=x*y*4*M;for(let I=0;I<R.count;I++){const L=I*C;u===!0&&(v.fromBufferAttribute(R,I),E[F+L+0]=v.x,E[F+L+1]=v.y,E[F+L+2]=v.z,E[F+L+3]=0),r===!0&&(v.fromBufferAttribute(P,I),E[F+L+4]=v.x,E[F+L+5]=v.y,E[F+L+6]=v.z,E[F+L+7]=0),h===!0&&(v.fromBufferAttribute(b,I),E[F+L+8]=v.x,E[F+L+9]=v.y,E[F+L+10]=v.z,E[F+L+11]=b.itemSize===4?v.w:1)}}o={count:c,texture:w,size:new ai(x,y)},n.set(T,o),T.addEventListener("dispose",A)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)e.getUniforms().setValue(f,"morphTexture",s.morphTexture,i);else{let u=0;for(let h=0;h<a.length;h++)u+=a[h];const r=T.morphTargetsRelative?1:1-u;e.getUniforms().setValue(f,"morphTargetBaseInfluence",r),e.getUniforms().setValue(f,"morphTargetInfluences",a)}e.getUniforms().setValue(f,"morphTargetsTexture",o.texture,i),e.getUniforms().setValue(f,"morphTargetsTextureSize",o.size)}return{update:S}}function q6(f,t,i,n){let v=new WeakMap;function S(e){const a=n.render.frame,m=e.geometry,c=t.get(e,m);if(v.get(c)!==a&&(t.update(c),v.set(c,a)),e.isInstancedMesh&&(e.hasEventListener("dispose",T)===!1&&e.addEventListener("dispose",T),v.get(e)!==a&&(i.update(e.instanceMatrix,f.ARRAY_BUFFER),e.instanceColor!==null&&i.update(e.instanceColor,f.ARRAY_BUFFER),v.set(e,a))),e.isSkinnedMesh){const o=e.skeleton;v.get(o)!==a&&(o.update(),v.set(o,a))}return c}function s(){v=new WeakMap}function T(e){const a=e.target;a.removeEventListener("dispose",T),i.remove(a.instanceMatrix),a.instanceColor!==null&&i.remove(a.instanceColor)}return{update:S,dispose:s}}const DR=new Rs,k2=new bR(1,1),OR=new TR,NR=new M5,BR=new PR,Y2=[],$2=[],K2=new Float32Array(16),j2=new Float32Array(9),Q2=new Float32Array(4);function Sf(f,t,i){const n=f[0];if(n<=0||n>0)return f;const v=t*i;let S=Y2[v];if(S===void 0&&(S=new Float32Array(v),Y2[v]=S),t!==0){n.toArray(S,0);for(let s=1,T=0;s!==t;++s)T+=i,f[s].toArray(S,T)}return S}function Cn(f,t){if(f.length!==t.length)return!1;for(let i=0,n=f.length;i<n;i++)if(f[i]!==t[i])return!1;return!0}function Mn(f,t){for(let i=0,n=t.length;i<n;i++)f[i]=t[i]}function Yg(f,t){let i=$2[t];i===void 0&&(i=new Int32Array(t),$2[t]=i);for(let n=0;n!==t;++n)i[n]=f.allocateTextureUnit();return i}function t8(f,t){const i=this.cache;i[0]!==t&&(f.uniform1f(this.addr,t),i[0]=t)}function e8(f,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(f.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Cn(i,t))return;f.uniform2fv(this.addr,t),Mn(i,t)}}function i8(f,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(f.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(f.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Cn(i,t))return;f.uniform3fv(this.addr,t),Mn(i,t)}}function n8(f,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(f.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Cn(i,t))return;f.uniform4fv(this.addr,t),Mn(i,t)}}function s8(f,t){const i=this.cache,n=t.elements;if(n===void 0){if(Cn(i,t))return;f.uniformMatrix2fv(this.addr,!1,t),Mn(i,t)}else{if(Cn(i,n))return;Q2.set(n),f.uniformMatrix2fv(this.addr,!1,Q2),Mn(i,n)}}function r8(f,t){const i=this.cache,n=t.elements;if(n===void 0){if(Cn(i,t))return;f.uniformMatrix3fv(this.addr,!1,t),Mn(i,t)}else{if(Cn(i,n))return;j2.set(n),f.uniformMatrix3fv(this.addr,!1,j2),Mn(i,n)}}function a8(f,t){const i=this.cache,n=t.elements;if(n===void 0){if(Cn(i,t))return;f.uniformMatrix4fv(this.addr,!1,t),Mn(i,t)}else{if(Cn(i,n))return;K2.set(n),f.uniformMatrix4fv(this.addr,!1,K2),Mn(i,n)}}function o8(f,t){const i=this.cache;i[0]!==t&&(f.uniform1i(this.addr,t),i[0]=t)}function l8(f,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(f.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Cn(i,t))return;f.uniform2iv(this.addr,t),Mn(i,t)}}function h8(f,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(f.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Cn(i,t))return;f.uniform3iv(this.addr,t),Mn(i,t)}}function u8(f,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(f.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Cn(i,t))return;f.uniform4iv(this.addr,t),Mn(i,t)}}function c8(f,t){const i=this.cache;i[0]!==t&&(f.uniform1ui(this.addr,t),i[0]=t)}function f8(f,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(f.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Cn(i,t))return;f.uniform2uiv(this.addr,t),Mn(i,t)}}function d8(f,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(f.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Cn(i,t))return;f.uniform3uiv(this.addr,t),Mn(i,t)}}function p8(f,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(f.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Cn(i,t))return;f.uniform4uiv(this.addr,t),Mn(i,t)}}function v8(f,t,i){const n=this.cache,v=i.allocateTextureUnit();n[0]!==v&&(f.uniform1i(this.addr,v),n[0]=v);let S;this.type===f.SAMPLER_2D_SHADOW?(k2.compareFunction=gR,S=k2):S=DR,i.setTexture2D(t||S,v)}function m8(f,t,i){const n=this.cache,v=i.allocateTextureUnit();n[0]!==v&&(f.uniform1i(this.addr,v),n[0]=v),i.setTexture3D(t||NR,v)}function g8(f,t,i){const n=this.cache,v=i.allocateTextureUnit();n[0]!==v&&(f.uniform1i(this.addr,v),n[0]=v),i.setTextureCube(t||BR,v)}function x8(f,t,i){const n=this.cache,v=i.allocateTextureUnit();n[0]!==v&&(f.uniform1i(this.addr,v),n[0]=v),i.setTexture2DArray(t||OR,v)}function y8(f){switch(f){case 5126:return t8;case 35664:return e8;case 35665:return i8;case 35666:return n8;case 35674:return s8;case 35675:return r8;case 35676:return a8;case 5124:case 35670:return o8;case 35667:case 35671:return l8;case 35668:case 35672:return h8;case 35669:case 35673:return u8;case 5125:return c8;case 36294:return f8;case 36295:return d8;case 36296:return p8;case 35678:case 36198:case 36298:case 36306:case 35682:return v8;case 35679:case 36299:case 36307:return m8;case 35680:case 36300:case 36308:case 36293:return g8;case 36289:case 36303:case 36311:case 36292:return x8}}function T8(f,t){f.uniform1fv(this.addr,t)}function E8(f,t){const i=Sf(t,this.size,2);f.uniform2fv(this.addr,i)}function S8(f,t){const i=Sf(t,this.size,3);f.uniform3fv(this.addr,i)}function w8(f,t){const i=Sf(t,this.size,4);f.uniform4fv(this.addr,i)}function A8(f,t){const i=Sf(t,this.size,4);f.uniformMatrix2fv(this.addr,!1,i)}function C8(f,t){const i=Sf(t,this.size,9);f.uniformMatrix3fv(this.addr,!1,i)}function M8(f,t){const i=Sf(t,this.size,16);f.uniformMatrix4fv(this.addr,!1,i)}function R8(f,t){f.uniform1iv(this.addr,t)}function P8(f,t){f.uniform2iv(this.addr,t)}function b8(f,t){f.uniform3iv(this.addr,t)}function I8(f,t){f.uniform4iv(this.addr,t)}function L8(f,t){f.uniform1uiv(this.addr,t)}function F8(f,t){f.uniform2uiv(this.addr,t)}function D8(f,t){f.uniform3uiv(this.addr,t)}function O8(f,t){f.uniform4uiv(this.addr,t)}function N8(f,t,i){const n=this.cache,v=t.length,S=Yg(i,v);Cn(n,S)||(f.uniform1iv(this.addr,S),Mn(n,S));for(let s=0;s!==v;++s)i.setTexture2D(t[s]||DR,S[s])}function B8(f,t,i){const n=this.cache,v=t.length,S=Yg(i,v);Cn(n,S)||(f.uniform1iv(this.addr,S),Mn(n,S));for(let s=0;s!==v;++s)i.setTexture3D(t[s]||NR,S[s])}function U8(f,t,i){const n=this.cache,v=t.length,S=Yg(i,v);Cn(n,S)||(f.uniform1iv(this.addr,S),Mn(n,S));for(let s=0;s!==v;++s)i.setTextureCube(t[s]||BR,S[s])}function V8(f,t,i){const n=this.cache,v=t.length,S=Yg(i,v);Cn(n,S)||(f.uniform1iv(this.addr,S),Mn(n,S));for(let s=0;s!==v;++s)i.setTexture2DArray(t[s]||OR,S[s])}function z8(f){switch(f){case 5126:return T8;case 35664:return E8;case 35665:return S8;case 35666:return w8;case 35674:return A8;case 35675:return C8;case 35676:return M8;case 5124:case 35670:return R8;case 35667:case 35671:return P8;case 35668:case 35672:return b8;case 35669:case 35673:return I8;case 5125:return L8;case 36294:return F8;case 36295:return D8;case 36296:return O8;case 35678:case 36198:case 36298:case 36306:case 35682:return N8;case 35679:case 36299:case 36307:return B8;case 35680:case 36300:case 36308:case 36293:return U8;case 36289:case 36303:case 36311:case 36292:return V8}}class G8{constructor(t,i,n){this.id=t,this.addr=n,this.cache=[],this.type=i.type,this.setValue=y8(i.type)}}class _8{constructor(t,i,n){this.id=t,this.addr=n,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=z8(i.type)}}class W8{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,i,n){const v=this.seq;for(let S=0,s=v.length;S!==s;++S){const T=v[S];T.setValue(t,i[T.id],n)}}}const vx=/(\w+)(\])?(\[|\.)?/g;function Z2(f,t){f.seq.push(t),f.map[t.id]=t}function H8(f,t,i){const n=f.name,v=n.length;for(vx.lastIndex=0;;){const S=vx.exec(n),s=vx.lastIndex;let T=S[1];const e=S[2]==="]",a=S[3];if(e&&(T=T|0),a===void 0||a==="["&&s+2===v){Z2(i,a===void 0?new G8(T,f,t):new _8(T,f,t));break}else{let c=i.map[T];c===void 0&&(c=new W8(T),Z2(i,c)),i=c}}}class Im{constructor(t,i){this.seq=[],this.map={};const n=t.getProgramParameter(i,t.ACTIVE_UNIFORMS);for(let v=0;v<n;++v){const S=t.getActiveUniform(i,v),s=t.getUniformLocation(i,S.name);H8(S,s,this)}}setValue(t,i,n,v){const S=this.map[i];S!==void 0&&S.setValue(t,n,v)}setOptional(t,i,n){const v=i[n];v!==void 0&&this.setValue(t,n,v)}static upload(t,i,n,v){for(let S=0,s=i.length;S!==s;++S){const T=i[S],e=n[T.id];e.needsUpdate!==!1&&T.setValue(t,e.value,v)}}static seqWithValue(t,i){const n=[];for(let v=0,S=t.length;v!==S;++v){const s=t[v];s.id in i&&n.push(s)}return n}}function J2(f,t,i){const n=f.createShader(t);return f.shaderSource(n,i),f.compileShader(n),n}const X8=37297;let k8=0;function Y8(f,t){const i=f.split(`
`),n=[],v=Math.max(t-6,0),S=Math.min(t+6,i.length);for(let s=v;s<S;s++){const T=s+1;n.push(`${T===t?">":" "} ${T}: ${i[s]}`)}return n.join(`
`)}const q2=new Ve;function $8(f){ci._getMatrix(q2,ci.workingColorSpace,f);const t=`mat3( ${q2.elements.map(i=>i.toFixed(4))} )`;switch(ci.getTransfer(f)){case Zm:return[t,"LinearTransferOETF"];case Ci:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",f),[t,"LinearTransferOETF"]}}function tw(f,t,i){const n=f.getShaderParameter(t,f.COMPILE_STATUS),v=f.getShaderInfoLog(t).trim();if(n&&v==="")return"";const S=/ERROR: 0:(\d+)/.exec(v);if(S){const s=parseInt(S[1]);return i.toUpperCase()+`

`+v+`

`+Y8(f.getShaderSource(t),s)}else return v}function K8(f,t){const i=$8(t);return[`vec4 ${f}( vec4 value ) {`,`	return ${i[1]}( vec4( value.rgb * ${i[0]}, value.a ) );`,"}"].join(`
`)}function j8(f,t){let i;switch(t){case JO:i="Linear";break;case qO:i="Reinhard";break;case t5:i="Cineon";break;case e5:i="ACESFilmic";break;case n5:i="AgX";break;case s5:i="Neutral";break;case i5:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+f+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}const sm=new St;function Q8(){ci.getLuminanceCoefficients(sm);const f=sm.x.toFixed(4),t=sm.y.toFixed(4),i=sm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${f}, ${t}, ${i} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Z8(f){return[f.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",f.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Md).join(`
`)}function J8(f){const t=[];for(const i in f){const n=f[i];n!==!1&&t.push("#define "+i+" "+n)}return t.join(`
`)}function q8(f,t){const i={},n=f.getProgramParameter(t,f.ACTIVE_ATTRIBUTES);for(let v=0;v<n;v++){const S=f.getActiveAttrib(t,v),s=S.name;let T=1;S.type===f.FLOAT_MAT2&&(T=2),S.type===f.FLOAT_MAT3&&(T=3),S.type===f.FLOAT_MAT4&&(T=4),i[s]={type:S.type,location:f.getAttribLocation(t,s),locationSize:T}}return i}function Md(f){return f!==""}function ew(f,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return f.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function iw(f,t){return f.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const tB=/^[ \t]*#include +<([\w\d./]+)>/gm;function s1(f){return f.replace(tB,iB)}const eB=new Map;function iB(f,t){let i=Ge[t];if(i===void 0){const n=eB.get(t);if(n!==void 0)i=Ge[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return s1(i)}const nB=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nw(f){return f.replace(nB,sB)}function sB(f,t,i,n){let v="";for(let S=parseInt(t);S<parseInt(i);S++)v+=n.replace(/\[\s*i\s*\]/g,"[ "+S+" ]").replace(/UNROLLED_LOOP_INDEX/g,S);return v}function sw(f){let t=`precision ${f.precision} float;
	precision ${f.precision} int;
	precision ${f.precision} sampler2D;
	precision ${f.precision} samplerCube;
	precision ${f.precision} sampler3D;
	precision ${f.precision} sampler2DArray;
	precision ${f.precision} sampler2DShadow;
	precision ${f.precision} samplerCubeShadow;
	precision ${f.precision} sampler2DArrayShadow;
	precision ${f.precision} isampler2D;
	precision ${f.precision} isampler3D;
	precision ${f.precision} isamplerCube;
	precision ${f.precision} isampler2DArray;
	precision ${f.precision} usampler2D;
	precision ${f.precision} usampler3D;
	precision ${f.precision} usamplerCube;
	precision ${f.precision} usampler2DArray;
	`;return f.precision==="highp"?t+=`
#define HIGH_PRECISION`:f.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:f.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function rB(f){let t="SHADOWMAP_TYPE_BASIC";return f.shadowMapType===nR?t="SHADOWMAP_TYPE_PCF":f.shadowMapType===LO?t="SHADOWMAP_TYPE_PCF_SOFT":f.shadowMapType===Xa&&(t="SHADOWMAP_TYPE_VSM"),t}function aB(f){let t="ENVMAP_TYPE_CUBE";if(f.envMap)switch(f.envMapMode){case Bc:case Uc:t="ENVMAP_TYPE_CUBE";break;case Xg:t="ENVMAP_TYPE_CUBE_UV";break}return t}function oB(f){let t="ENVMAP_MODE_REFLECTION";if(f.envMap)switch(f.envMapMode){case Uc:t="ENVMAP_MODE_REFRACTION";break}return t}function lB(f){let t="ENVMAP_BLENDING_NONE";if(f.envMap)switch(f.combine){case sR:t="ENVMAP_BLENDING_MULTIPLY";break;case QO:t="ENVMAP_BLENDING_MIX";break;case ZO:t="ENVMAP_BLENDING_ADD";break}return t}function hB(f){const t=f.envMapCubeUVHeight;if(t===null)return null;const i=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}function uB(f,t,i,n){const v=f.getContext(),S=i.defines;let s=i.vertexShader,T=i.fragmentShader;const e=rB(i),a=aB(i),m=oB(i),c=lB(i),o=hB(i),u=Z8(i),r=J8(S),h=v.createProgram();let d,l,p=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(d=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,r].filter(Md).join(`
`),d.length>0&&(d+=`
`),l=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,r].filter(Md).join(`
`),l.length>0&&(l+=`
`)):(d=[sw(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,r,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+m:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+e:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Md).join(`
`),l=[sw(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,r,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+a:"",i.envMap?"#define "+m:"",i.envMap?"#define "+c:"",o?"#define CUBEUV_TEXEL_WIDTH "+o.texelWidth:"",o?"#define CUBEUV_TEXEL_HEIGHT "+o.texelHeight:"",o?"#define CUBEUV_MAX_MIP "+o.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+e:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==ll?"#define TONE_MAPPING":"",i.toneMapping!==ll?Ge.tonemapping_pars_fragment:"",i.toneMapping!==ll?j8("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Ge.colorspace_pars_fragment,K8("linearToOutputTexel",i.outputColorSpace),Q8(),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(Md).join(`
`)),s=s1(s),s=ew(s,i),s=iw(s,i),T=s1(T),T=ew(T,i),T=iw(T,i),s=nw(s),T=nw(T),i.isRawShaderMaterial!==!0&&(p=`#version 300 es
`,d=[u,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+d,l=["#define varying in",i.glslVersion===m2?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===m2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+l);const g=p+d+s,x=p+l+T,y=J2(v,v.VERTEX_SHADER,g),E=J2(v,v.FRAGMENT_SHADER,x);v.attachShader(h,y),v.attachShader(h,E),i.index0AttributeName!==void 0?v.bindAttribLocation(h,0,i.index0AttributeName):i.morphTargets===!0&&v.bindAttribLocation(h,0,"position"),v.linkProgram(h);function w(R){if(f.debug.checkShaderErrors){const P=v.getProgramInfoLog(h).trim(),b=v.getShaderInfoLog(y).trim(),F=v.getShaderInfoLog(E).trim();let I=!0,L=!0;if(v.getProgramParameter(h,v.LINK_STATUS)===!1)if(I=!1,typeof f.debug.onShaderError=="function")f.debug.onShaderError(v,h,y,E);else{const D=tw(v,y,"vertex"),O=tw(v,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+v.getError()+" - VALIDATE_STATUS "+v.getProgramParameter(h,v.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+P+`
`+D+`
`+O)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(b===""||F==="")&&(L=!1);L&&(R.diagnostics={runnable:I,programLog:P,vertexShader:{log:b,prefix:d},fragmentShader:{log:F,prefix:l}})}v.deleteShader(y),v.deleteShader(E),C=new Im(v,h),A=q8(v,h)}let C;this.getUniforms=function(){return C===void 0&&w(this),C};let A;this.getAttributes=function(){return A===void 0&&w(this),A};let M=i.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=v.getProgramParameter(h,X8)),M},this.destroy=function(){n.releaseStatesOfProgram(this),v.deleteProgram(h),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=k8++,this.cacheKey=t,this.usedTimes=1,this.program=h,this.vertexShader=y,this.fragmentShader=E,this}let cB=0;class fB{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.vertexShader,n=t.fragmentShader,v=this._getShaderStage(i),S=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return s.has(v)===!1&&(s.add(v),v.usedTimes++),s.has(S)===!1&&(s.add(S),S.usedTimes++),this}remove(t){const i=this.materialCache.get(t);for(const n of i)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const i=this.materialCache;let n=i.get(t);return n===void 0&&(n=new Set,i.set(t,n)),n}_getShaderStage(t){const i=this.shaderCache;let n=i.get(t);return n===void 0&&(n=new dB(t),i.set(t,n)),n}}class dB{constructor(t){this.id=cB++,this.code=t,this.usedTimes=0}}function pB(f,t,i,n,v,S,s){const T=new ER,e=new fB,a=new Set,m=[],c=v.logarithmicDepthBuffer,o=v.vertexTextures;let u=v.precision;const r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function h(A){return a.add(A),A===0?"uv":`uv${A}`}function d(A,M,R,P,b){const F=P.fog,I=b.geometry,L=A.isMeshStandardMaterial?P.environment:null,D=(A.isMeshStandardMaterial?i:t).get(A.envMap||L),O=D&&D.mapping===Xg?D.image.height:null,z=r[A.type];A.precision!==null&&(u=v.getMaxPrecision(A.precision),u!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",u,"instead."));const W=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,k=W!==void 0?W.length:0;let X=0;I.morphAttributes.position!==void 0&&(X=1),I.morphAttributes.normal!==void 0&&(X=2),I.morphAttributes.color!==void 0&&(X=3);let V,G,N,H;if(z){const Pe=ca[z];V=Pe.vertexShader,G=Pe.fragmentShader}else V=A.vertexShader,G=A.fragmentShader,e.update(A),N=e.getVertexShaderID(A),H=e.getFragmentShaderID(A);const U=f.getRenderTarget(),_=f.state.buffers.depth.getReversed(),$=b.isInstancedMesh===!0,j=b.isBatchedMesh===!0,Z=!!A.map,it=!!A.matcap,at=!!D,q=!!A.aoMap,ft=!!A.lightMap,vt=!!A.bumpMap,Tt=!!A.normalMap,ut=!!A.displacementMap,Bt=!!A.emissiveMap,Pt=!!A.metalnessMap,et=!!A.roughnessMap,Q=A.anisotropy>0,lt=A.clearcoat>0,pt=A.dispersion>0,Mt=A.iridescence>0,Ct=A.sheen>0,Kt=A.transmission>0,Ut=Q&&!!A.anisotropyMap,Wt=lt&&!!A.clearcoatMap,ae=lt&&!!A.clearcoatNormalMap,zt=lt&&!!A.clearcoatRoughnessMap,Ht=Mt&&!!A.iridescenceMap,At=Mt&&!!A.iridescenceThicknessMap,ne=Ct&&!!A.sheenColorMap,jt=Ct&&!!A.sheenRoughnessMap,ve=!!A.specularMap,we=!!A.specularColorMap,De=!!A.specularIntensityMap,dt=Kt&&!!A.transmissionMap,Qt=Kt&&!!A.thicknessMap,Ot=!!A.gradientMap,Vt=!!A.alphaMap,le=A.alphaTest>0,se=!!A.alphaHash,Re=!!A.extensions;let yi=ll;A.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(yi=f.toneMapping);const ln={shaderID:z,shaderType:A.type,shaderName:A.name,vertexShader:V,fragmentShader:G,defines:A.defines,customVertexShaderID:N,customFragmentShaderID:H,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:u,batching:j,batchingColor:j&&b._colorsTexture!==null,instancing:$,instancingColor:$&&b.instanceColor!==null,instancingMorph:$&&b.morphTexture!==null,supportsVertexTextures:o,outputColorSpace:U===null?f.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:Gc,alphaToCoverage:!!A.alphaToCoverage,map:Z,matcap:it,envMap:at,envMapMode:at&&D.mapping,envMapCubeUVHeight:O,aoMap:q,lightMap:ft,bumpMap:vt,normalMap:Tt,displacementMap:o&&ut,emissiveMap:Bt,normalMapObjectSpace:Tt&&A.normalMapType===l5,normalMapTangentSpace:Tt&&A.normalMapType===mR,metalnessMap:Pt,roughnessMap:et,anisotropy:Q,anisotropyMap:Ut,clearcoat:lt,clearcoatMap:Wt,clearcoatNormalMap:ae,clearcoatRoughnessMap:zt,dispersion:pt,iridescence:Mt,iridescenceMap:Ht,iridescenceThicknessMap:At,sheen:Ct,sheenColorMap:ne,sheenRoughnessMap:jt,specularMap:ve,specularColorMap:we,specularIntensityMap:De,transmission:Kt,transmissionMap:dt,thicknessMap:Qt,gradientMap:Ot,opaque:A.transparent===!1&&A.blending===hc&&A.alphaToCoverage===!1,alphaMap:Vt,alphaTest:le,alphaHash:se,combine:A.combine,mapUv:Z&&h(A.map.channel),aoMapUv:q&&h(A.aoMap.channel),lightMapUv:ft&&h(A.lightMap.channel),bumpMapUv:vt&&h(A.bumpMap.channel),normalMapUv:Tt&&h(A.normalMap.channel),displacementMapUv:ut&&h(A.displacementMap.channel),emissiveMapUv:Bt&&h(A.emissiveMap.channel),metalnessMapUv:Pt&&h(A.metalnessMap.channel),roughnessMapUv:et&&h(A.roughnessMap.channel),anisotropyMapUv:Ut&&h(A.anisotropyMap.channel),clearcoatMapUv:Wt&&h(A.clearcoatMap.channel),clearcoatNormalMapUv:ae&&h(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:zt&&h(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ht&&h(A.iridescenceMap.channel),iridescenceThicknessMapUv:At&&h(A.iridescenceThicknessMap.channel),sheenColorMapUv:ne&&h(A.sheenColorMap.channel),sheenRoughnessMapUv:jt&&h(A.sheenRoughnessMap.channel),specularMapUv:ve&&h(A.specularMap.channel),specularColorMapUv:we&&h(A.specularColorMap.channel),specularIntensityMapUv:De&&h(A.specularIntensityMap.channel),transmissionMapUv:dt&&h(A.transmissionMap.channel),thicknessMapUv:Qt&&h(A.thicknessMap.channel),alphaMapUv:Vt&&h(A.alphaMap.channel),vertexTangents:!!I.attributes.tangent&&(Tt||Q),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!I.attributes.color&&I.attributes.color.itemSize===4,pointsUvs:b.isPoints===!0&&!!I.attributes.uv&&(Z||Vt),fog:!!F,useFog:A.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:c,reverseDepthBuffer:_,skinning:b.isSkinnedMesh===!0,morphTargets:I.morphAttributes.position!==void 0,morphNormals:I.morphAttributes.normal!==void 0,morphColors:I.morphAttributes.color!==void 0,morphTargetsCount:k,morphTextureStride:X,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:A.dithering,shadowMapEnabled:f.shadowMap.enabled&&R.length>0,shadowMapType:f.shadowMap.type,toneMapping:yi,decodeVideoTexture:Z&&A.map.isVideoTexture===!0&&ci.getTransfer(A.map.colorSpace)===Ci,decodeVideoTextureEmissive:Bt&&A.emissiveMap.isVideoTexture===!0&&ci.getTransfer(A.emissiveMap.colorSpace)===Ci,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===Qa,flipSided:A.side===Ms,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Re&&A.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Re&&A.extensions.multiDraw===!0||j)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return ln.vertexUv1s=a.has(1),ln.vertexUv2s=a.has(2),ln.vertexUv3s=a.has(3),a.clear(),ln}function l(A){const M=[];if(A.shaderID?M.push(A.shaderID):(M.push(A.customVertexShaderID),M.push(A.customFragmentShaderID)),A.defines!==void 0)for(const R in A.defines)M.push(R),M.push(A.defines[R]);return A.isRawShaderMaterial===!1&&(p(M,A),g(M,A),M.push(f.outputColorSpace)),M.push(A.customProgramCacheKey),M.join()}function p(A,M){A.push(M.precision),A.push(M.outputColorSpace),A.push(M.envMapMode),A.push(M.envMapCubeUVHeight),A.push(M.mapUv),A.push(M.alphaMapUv),A.push(M.lightMapUv),A.push(M.aoMapUv),A.push(M.bumpMapUv),A.push(M.normalMapUv),A.push(M.displacementMapUv),A.push(M.emissiveMapUv),A.push(M.metalnessMapUv),A.push(M.roughnessMapUv),A.push(M.anisotropyMapUv),A.push(M.clearcoatMapUv),A.push(M.clearcoatNormalMapUv),A.push(M.clearcoatRoughnessMapUv),A.push(M.iridescenceMapUv),A.push(M.iridescenceThicknessMapUv),A.push(M.sheenColorMapUv),A.push(M.sheenRoughnessMapUv),A.push(M.specularMapUv),A.push(M.specularColorMapUv),A.push(M.specularIntensityMapUv),A.push(M.transmissionMapUv),A.push(M.thicknessMapUv),A.push(M.combine),A.push(M.fogExp2),A.push(M.sizeAttenuation),A.push(M.morphTargetsCount),A.push(M.morphAttributeCount),A.push(M.numDirLights),A.push(M.numPointLights),A.push(M.numSpotLights),A.push(M.numSpotLightMaps),A.push(M.numHemiLights),A.push(M.numRectAreaLights),A.push(M.numDirLightShadows),A.push(M.numPointLightShadows),A.push(M.numSpotLightShadows),A.push(M.numSpotLightShadowsWithMaps),A.push(M.numLightProbes),A.push(M.shadowMapType),A.push(M.toneMapping),A.push(M.numClippingPlanes),A.push(M.numClipIntersection),A.push(M.depthPacking)}function g(A,M){T.disableAll(),M.supportsVertexTextures&&T.enable(0),M.instancing&&T.enable(1),M.instancingColor&&T.enable(2),M.instancingMorph&&T.enable(3),M.matcap&&T.enable(4),M.envMap&&T.enable(5),M.normalMapObjectSpace&&T.enable(6),M.normalMapTangentSpace&&T.enable(7),M.clearcoat&&T.enable(8),M.iridescence&&T.enable(9),M.alphaTest&&T.enable(10),M.vertexColors&&T.enable(11),M.vertexAlphas&&T.enable(12),M.vertexUv1s&&T.enable(13),M.vertexUv2s&&T.enable(14),M.vertexUv3s&&T.enable(15),M.vertexTangents&&T.enable(16),M.anisotropy&&T.enable(17),M.alphaHash&&T.enable(18),M.batching&&T.enable(19),M.dispersion&&T.enable(20),M.batchingColor&&T.enable(21),A.push(T.mask),T.disableAll(),M.fog&&T.enable(0),M.useFog&&T.enable(1),M.flatShading&&T.enable(2),M.logarithmicDepthBuffer&&T.enable(3),M.reverseDepthBuffer&&T.enable(4),M.skinning&&T.enable(5),M.morphTargets&&T.enable(6),M.morphNormals&&T.enable(7),M.morphColors&&T.enable(8),M.premultipliedAlpha&&T.enable(9),M.shadowMapEnabled&&T.enable(10),M.doubleSided&&T.enable(11),M.flipSided&&T.enable(12),M.useDepthPacking&&T.enable(13),M.dithering&&T.enable(14),M.transmission&&T.enable(15),M.sheen&&T.enable(16),M.opaque&&T.enable(17),M.pointsUvs&&T.enable(18),M.decodeVideoTexture&&T.enable(19),M.decodeVideoTextureEmissive&&T.enable(20),M.alphaToCoverage&&T.enable(21),A.push(T.mask)}function x(A){const M=r[A.type];let R;if(M){const P=ca[M];R=G5.clone(P.uniforms)}else R=A.uniforms;return R}function y(A,M){let R;for(let P=0,b=m.length;P<b;P++){const F=m[P];if(F.cacheKey===M){R=F,++R.usedTimes;break}}return R===void 0&&(R=new uB(f,M,A,S),m.push(R)),R}function E(A){if(--A.usedTimes===0){const M=m.indexOf(A);m[M]=m[m.length-1],m.pop(),A.destroy()}}function w(A){e.remove(A)}function C(){e.dispose()}return{getParameters:d,getProgramCacheKey:l,getUniforms:x,acquireProgram:y,releaseProgram:E,releaseShaderCache:w,programs:m,dispose:C}}function vB(){let f=new WeakMap;function t(s){return f.has(s)}function i(s){let T=f.get(s);return T===void 0&&(T={},f.set(s,T)),T}function n(s){f.delete(s)}function v(s,T,e){f.get(s)[T]=e}function S(){f=new WeakMap}return{has:t,get:i,remove:n,update:v,dispose:S}}function mB(f,t){return f.groupOrder!==t.groupOrder?f.groupOrder-t.groupOrder:f.renderOrder!==t.renderOrder?f.renderOrder-t.renderOrder:f.material.id!==t.material.id?f.material.id-t.material.id:f.z!==t.z?f.z-t.z:f.id-t.id}function rw(f,t){return f.groupOrder!==t.groupOrder?f.groupOrder-t.groupOrder:f.renderOrder!==t.renderOrder?f.renderOrder-t.renderOrder:f.z!==t.z?t.z-f.z:f.id-t.id}function aw(){const f=[];let t=0;const i=[],n=[],v=[];function S(){t=0,i.length=0,n.length=0,v.length=0}function s(c,o,u,r,h,d){let l=f[t];return l===void 0?(l={id:c.id,object:c,geometry:o,material:u,groupOrder:r,renderOrder:c.renderOrder,z:h,group:d},f[t]=l):(l.id=c.id,l.object=c,l.geometry=o,l.material=u,l.groupOrder=r,l.renderOrder=c.renderOrder,l.z=h,l.group=d),t++,l}function T(c,o,u,r,h,d){const l=s(c,o,u,r,h,d);u.transmission>0?n.push(l):u.transparent===!0?v.push(l):i.push(l)}function e(c,o,u,r,h,d){const l=s(c,o,u,r,h,d);u.transmission>0?n.unshift(l):u.transparent===!0?v.unshift(l):i.unshift(l)}function a(c,o){i.length>1&&i.sort(c||mB),n.length>1&&n.sort(o||rw),v.length>1&&v.sort(o||rw)}function m(){for(let c=t,o=f.length;c<o;c++){const u=f[c];if(u.id===null)break;u.id=null,u.object=null,u.geometry=null,u.material=null,u.group=null}}return{opaque:i,transmissive:n,transparent:v,init:S,push:T,unshift:e,finish:m,sort:a}}function gB(){let f=new WeakMap;function t(n,v){const S=f.get(n);let s;return S===void 0?(s=new aw,f.set(n,[s])):v>=S.length?(s=new aw,S.push(s)):s=S[v],s}function i(){f=new WeakMap}return{get:t,dispose:i}}function xB(){const f={};return{get:function(t){if(f[t.id]!==void 0)return f[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new St,color:new vi};break;case"SpotLight":i={position:new St,direction:new St,color:new vi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new St,color:new vi,distance:0,decay:0};break;case"HemisphereLight":i={direction:new St,skyColor:new vi,groundColor:new vi};break;case"RectAreaLight":i={color:new vi,position:new St,halfWidth:new St,halfHeight:new St};break}return f[t.id]=i,i}}}function yB(){const f={};return{get:function(t){if(f[t.id]!==void 0)return f[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ai};break;case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ai};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ai,shadowCameraNear:1,shadowCameraFar:1e3};break}return f[t.id]=i,i}}}let TB=0;function EB(f,t){return(t.castShadow?2:0)-(f.castShadow?2:0)+(t.map?1:0)-(f.map?1:0)}function SB(f){const t=new xB,i=yB(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)n.probe.push(new St);const v=new St,S=new ji,s=new ji;function T(a){let m=0,c=0,o=0;for(let A=0;A<9;A++)n.probe[A].set(0,0,0);let u=0,r=0,h=0,d=0,l=0,p=0,g=0,x=0,y=0,E=0,w=0;a.sort(EB);for(let A=0,M=a.length;A<M;A++){const R=a[A],P=R.color,b=R.intensity,F=R.distance,I=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)m+=P.r*b,c+=P.g*b,o+=P.b*b;else if(R.isLightProbe){for(let L=0;L<9;L++)n.probe[L].addScaledVector(R.sh.coefficients[L],b);w++}else if(R.isDirectionalLight){const L=t.get(R);if(L.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const D=R.shadow,O=i.get(R);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,n.directionalShadow[u]=O,n.directionalShadowMap[u]=I,n.directionalShadowMatrix[u]=R.shadow.matrix,p++}n.directional[u]=L,u++}else if(R.isSpotLight){const L=t.get(R);L.position.setFromMatrixPosition(R.matrixWorld),L.color.copy(P).multiplyScalar(b),L.distance=F,L.coneCos=Math.cos(R.angle),L.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),L.decay=R.decay,n.spot[h]=L;const D=R.shadow;if(R.map&&(n.spotLightMap[y]=R.map,y++,D.updateMatrices(R),R.castShadow&&E++),n.spotLightMatrix[h]=D.matrix,R.castShadow){const O=i.get(R);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,n.spotShadow[h]=O,n.spotShadowMap[h]=I,x++}h++}else if(R.isRectAreaLight){const L=t.get(R);L.color.copy(P).multiplyScalar(b),L.halfWidth.set(R.width*.5,0,0),L.halfHeight.set(0,R.height*.5,0),n.rectArea[d]=L,d++}else if(R.isPointLight){const L=t.get(R);if(L.color.copy(R.color).multiplyScalar(R.intensity),L.distance=R.distance,L.decay=R.decay,R.castShadow){const D=R.shadow,O=i.get(R);O.shadowIntensity=D.intensity,O.shadowBias=D.bias,O.shadowNormalBias=D.normalBias,O.shadowRadius=D.radius,O.shadowMapSize=D.mapSize,O.shadowCameraNear=D.camera.near,O.shadowCameraFar=D.camera.far,n.pointShadow[r]=O,n.pointShadowMap[r]=I,n.pointShadowMatrix[r]=R.shadow.matrix,g++}n.point[r]=L,r++}else if(R.isHemisphereLight){const L=t.get(R);L.skyColor.copy(R.color).multiplyScalar(b),L.groundColor.copy(R.groundColor).multiplyScalar(b),n.hemi[l]=L,l++}}d>0&&(f.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=he.LTC_FLOAT_1,n.rectAreaLTC2=he.LTC_FLOAT_2):(n.rectAreaLTC1=he.LTC_HALF_1,n.rectAreaLTC2=he.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=c,n.ambient[2]=o;const C=n.hash;(C.directionalLength!==u||C.pointLength!==r||C.spotLength!==h||C.rectAreaLength!==d||C.hemiLength!==l||C.numDirectionalShadows!==p||C.numPointShadows!==g||C.numSpotShadows!==x||C.numSpotMaps!==y||C.numLightProbes!==w)&&(n.directional.length=u,n.spot.length=h,n.rectArea.length=d,n.point.length=r,n.hemi.length=l,n.directionalShadow.length=p,n.directionalShadowMap.length=p,n.pointShadow.length=g,n.pointShadowMap.length=g,n.spotShadow.length=x,n.spotShadowMap.length=x,n.directionalShadowMatrix.length=p,n.pointShadowMatrix.length=g,n.spotLightMatrix.length=x+y-E,n.spotLightMap.length=y,n.numSpotLightShadowsWithMaps=E,n.numLightProbes=w,C.directionalLength=u,C.pointLength=r,C.spotLength=h,C.rectAreaLength=d,C.hemiLength=l,C.numDirectionalShadows=p,C.numPointShadows=g,C.numSpotShadows=x,C.numSpotMaps=y,C.numLightProbes=w,n.version=TB++)}function e(a,m){let c=0,o=0,u=0,r=0,h=0;const d=m.matrixWorldInverse;for(let l=0,p=a.length;l<p;l++){const g=a[l];if(g.isDirectionalLight){const x=n.directional[c];x.direction.setFromMatrixPosition(g.matrixWorld),v.setFromMatrixPosition(g.target.matrixWorld),x.direction.sub(v),x.direction.transformDirection(d),c++}else if(g.isSpotLight){const x=n.spot[u];x.position.setFromMatrixPosition(g.matrixWorld),x.position.applyMatrix4(d),x.direction.setFromMatrixPosition(g.matrixWorld),v.setFromMatrixPosition(g.target.matrixWorld),x.direction.sub(v),x.direction.transformDirection(d),u++}else if(g.isRectAreaLight){const x=n.rectArea[r];x.position.setFromMatrixPosition(g.matrixWorld),x.position.applyMatrix4(d),s.identity(),S.copy(g.matrixWorld),S.premultiply(d),s.extractRotation(S),x.halfWidth.set(g.width*.5,0,0),x.halfHeight.set(0,g.height*.5,0),x.halfWidth.applyMatrix4(s),x.halfHeight.applyMatrix4(s),r++}else if(g.isPointLight){const x=n.point[o];x.position.setFromMatrixPosition(g.matrixWorld),x.position.applyMatrix4(d),o++}else if(g.isHemisphereLight){const x=n.hemi[h];x.direction.setFromMatrixPosition(g.matrixWorld),x.direction.transformDirection(d),h++}}}return{setup:T,setupView:e,state:n}}function ow(f){const t=new SB(f),i=[],n=[];function v(m){a.camera=m,i.length=0,n.length=0}function S(m){i.push(m)}function s(m){n.push(m)}function T(){t.setup(i)}function e(m){t.setupView(i,m)}const a={lightsArray:i,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:v,state:a,setupLights:T,setupLightsView:e,pushLight:S,pushShadow:s}}function wB(f){let t=new WeakMap;function i(v,S=0){const s=t.get(v);let T;return s===void 0?(T=new ow(f),t.set(v,[T])):S>=s.length?(T=new ow(f),s.push(T)):T=s[S],T}function n(){t=new WeakMap}return{get:i,dispose:n}}const AB=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,CB=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function MB(f,t,i){let n=new AT;const v=new ai,S=new ai,s=new Mi,T=new j5({depthPacking:o5}),e=new Q5,a={},m=i.maxTextureSize,c={[ho]:Ms,[Ms]:ho,[Qa]:Qa},o=new gl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ai},radius:{value:4}},vertexShader:AB,fragmentShader:CB}),u=o.clone();u.defines.HORIZONTAL_PASS=1;const r=new To;r.setAttribute("position",new Ta(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const h=new Es(r,o),d=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=nR;let l=this.type;this.render=function(E,w,C){if(d.enabled===!1||d.autoUpdate===!1&&d.needsUpdate===!1||E.length===0)return;const A=f.getRenderTarget(),M=f.getActiveCubeFace(),R=f.getActiveMipmapLevel(),P=f.state;P.setBlending(ol),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const b=l!==Xa&&this.type===Xa,F=l===Xa&&this.type!==Xa;for(let I=0,L=E.length;I<L;I++){const D=E[I],O=D.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;v.copy(O.mapSize);const z=O.getFrameExtents();if(v.multiply(z),S.copy(O.mapSize),(v.x>m||v.y>m)&&(v.x>m&&(S.x=Math.floor(m/z.x),v.x=S.x*z.x,O.mapSize.x=S.x),v.y>m&&(S.y=Math.floor(m/z.y),v.y=S.y*z.y,O.mapSize.y=S.y)),O.map===null||b===!0||F===!0){const k=this.type!==Xa?{minFilter:Gr,magFilter:Gr}:{};O.map!==null&&O.map.dispose(),O.map=new Xh(v.x,v.y,k),O.map.texture.name=D.name+".shadowMap",O.camera.updateProjectionMatrix()}f.setRenderTarget(O.map),f.clear();const W=O.getViewportCount();for(let k=0;k<W;k++){const X=O.getViewport(k);s.set(S.x*X.x,S.y*X.y,S.x*X.z,S.y*X.w),P.viewport(s),O.updateMatrices(D,k),n=O.getFrustum(),x(w,C,O.camera,D,this.type)}O.isPointLightShadow!==!0&&this.type===Xa&&p(O,C),O.needsUpdate=!1}l=this.type,d.needsUpdate=!1,f.setRenderTarget(A,M,R)};function p(E,w){const C=t.update(h);o.defines.VSM_SAMPLES!==E.blurSamples&&(o.defines.VSM_SAMPLES=E.blurSamples,u.defines.VSM_SAMPLES=E.blurSamples,o.needsUpdate=!0,u.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new Xh(v.x,v.y)),o.uniforms.shadow_pass.value=E.map.texture,o.uniforms.resolution.value=E.mapSize,o.uniforms.radius.value=E.radius,f.setRenderTarget(E.mapPass),f.clear(),f.renderBufferDirect(w,null,C,o,h,null),u.uniforms.shadow_pass.value=E.mapPass.texture,u.uniforms.resolution.value=E.mapSize,u.uniforms.radius.value=E.radius,f.setRenderTarget(E.map),f.clear(),f.renderBufferDirect(w,null,C,u,h,null)}function g(E,w,C,A){let M=null;const R=C.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(R!==void 0)M=R;else if(M=C.isPointLight===!0?e:T,f.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const P=M.uuid,b=w.uuid;let F=a[P];F===void 0&&(F={},a[P]=F);let I=F[b];I===void 0&&(I=M.clone(),F[b]=I,w.addEventListener("dispose",y)),M=I}if(M.visible=w.visible,M.wireframe=w.wireframe,A===Xa?M.side=w.shadowSide!==null?w.shadowSide:w.side:M.side=w.shadowSide!==null?w.shadowSide:c[w.side],M.alphaMap=w.alphaMap,M.alphaTest=w.alphaTest,M.map=w.map,M.clipShadows=w.clipShadows,M.clippingPlanes=w.clippingPlanes,M.clipIntersection=w.clipIntersection,M.displacementMap=w.displacementMap,M.displacementScale=w.displacementScale,M.displacementBias=w.displacementBias,M.wireframeLinewidth=w.wireframeLinewidth,M.linewidth=w.linewidth,C.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const P=f.properties.get(M);P.light=C}return M}function x(E,w,C,A,M){if(E.visible===!1)return;if(E.layers.test(w.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&M===Xa)&&(!E.frustumCulled||n.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,E.matrixWorld);const b=t.update(E),F=E.material;if(Array.isArray(F)){const I=b.groups;for(let L=0,D=I.length;L<D;L++){const O=I[L],z=F[O.materialIndex];if(z&&z.visible){const W=g(E,z,A,M);E.onBeforeShadow(f,E,w,C,b,W,O),f.renderBufferDirect(C,null,b,W,E,O),E.onAfterShadow(f,E,w,C,b,W,O)}}}else if(F.visible){const I=g(E,F,A,M);E.onBeforeShadow(f,E,w,C,b,I,null),f.renderBufferDirect(C,null,b,I,E,null),E.onAfterShadow(f,E,w,C,b,I,null)}}const P=E.children;for(let b=0,F=P.length;b<F;b++)x(P[b],w,C,A,M)}function y(E){E.target.removeEventListener("dispose",y);for(const C in a){const A=a[C],M=E.target.uuid;M in A&&(A[M].dispose(),delete A[M])}}}const RB={[Ty]:Ey,[Sy]:Cy,[wy]:My,[Nc]:Ay,[Ey]:Ty,[Cy]:Sy,[My]:wy,[Ay]:Nc};function PB(f,t){function i(){let dt=!1;const Qt=new Mi;let Ot=null;const Vt=new Mi(0,0,0,0);return{setMask:function(le){Ot!==le&&!dt&&(f.colorMask(le,le,le,le),Ot=le)},setLocked:function(le){dt=le},setClear:function(le,se,Re,yi,ln){ln===!0&&(le*=yi,se*=yi,Re*=yi),Qt.set(le,se,Re,yi),Vt.equals(Qt)===!1&&(f.clearColor(le,se,Re,yi),Vt.copy(Qt))},reset:function(){dt=!1,Ot=null,Vt.set(-1,0,0,0)}}}function n(){let dt=!1,Qt=!1,Ot=null,Vt=null,le=null;return{setReversed:function(se){if(Qt!==se){const Re=t.get("EXT_clip_control");Qt?Re.clipControlEXT(Re.LOWER_LEFT_EXT,Re.ZERO_TO_ONE_EXT):Re.clipControlEXT(Re.LOWER_LEFT_EXT,Re.NEGATIVE_ONE_TO_ONE_EXT);const yi=le;le=null,this.setClear(yi)}Qt=se},getReversed:function(){return Qt},setTest:function(se){se?U(f.DEPTH_TEST):_(f.DEPTH_TEST)},setMask:function(se){Ot!==se&&!dt&&(f.depthMask(se),Ot=se)},setFunc:function(se){if(Qt&&(se=RB[se]),Vt!==se){switch(se){case Ty:f.depthFunc(f.NEVER);break;case Ey:f.depthFunc(f.ALWAYS);break;case Sy:f.depthFunc(f.LESS);break;case Nc:f.depthFunc(f.LEQUAL);break;case wy:f.depthFunc(f.EQUAL);break;case Ay:f.depthFunc(f.GEQUAL);break;case Cy:f.depthFunc(f.GREATER);break;case My:f.depthFunc(f.NOTEQUAL);break;default:f.depthFunc(f.LEQUAL)}Vt=se}},setLocked:function(se){dt=se},setClear:function(se){le!==se&&(Qt&&(se=1-se),f.clearDepth(se),le=se)},reset:function(){dt=!1,Ot=null,Vt=null,le=null,Qt=!1}}}function v(){let dt=!1,Qt=null,Ot=null,Vt=null,le=null,se=null,Re=null,yi=null,ln=null;return{setTest:function(Pe){dt||(Pe?U(f.STENCIL_TEST):_(f.STENCIL_TEST))},setMask:function(Pe){Qt!==Pe&&!dt&&(f.stencilMask(Pe),Qt=Pe)},setFunc:function(Pe,Pi,zi){(Ot!==Pe||Vt!==Pi||le!==zi)&&(f.stencilFunc(Pe,Pi,zi),Ot=Pe,Vt=Pi,le=zi)},setOp:function(Pe,Pi,zi){(se!==Pe||Re!==Pi||yi!==zi)&&(f.stencilOp(Pe,Pi,zi),se=Pe,Re=Pi,yi=zi)},setLocked:function(Pe){dt=Pe},setClear:function(Pe){ln!==Pe&&(f.clearStencil(Pe),ln=Pe)},reset:function(){dt=!1,Qt=null,Ot=null,Vt=null,le=null,se=null,Re=null,yi=null,ln=null}}}const S=new i,s=new n,T=new v,e=new WeakMap,a=new WeakMap;let m={},c={},o=new WeakMap,u=[],r=null,h=!1,d=null,l=null,p=null,g=null,x=null,y=null,E=null,w=new vi(0,0,0),C=0,A=!1,M=null,R=null,P=null,b=null,F=null;const I=f.getParameter(f.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,D=0;const O=f.getParameter(f.VERSION);O.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL (\d)/.exec(O)[1]),L=D>=1):O.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),L=D>=2);let z=null,W={};const k=f.getParameter(f.SCISSOR_BOX),X=f.getParameter(f.VIEWPORT),V=new Mi().fromArray(k),G=new Mi().fromArray(X);function N(dt,Qt,Ot,Vt){const le=new Uint8Array(4),se=f.createTexture();f.bindTexture(dt,se),f.texParameteri(dt,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(dt,f.TEXTURE_MAG_FILTER,f.NEAREST);for(let Re=0;Re<Ot;Re++)dt===f.TEXTURE_3D||dt===f.TEXTURE_2D_ARRAY?f.texImage3D(Qt,0,f.RGBA,1,1,Vt,0,f.RGBA,f.UNSIGNED_BYTE,le):f.texImage2D(Qt+Re,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,le);return se}const H={};H[f.TEXTURE_2D]=N(f.TEXTURE_2D,f.TEXTURE_2D,1),H[f.TEXTURE_CUBE_MAP]=N(f.TEXTURE_CUBE_MAP,f.TEXTURE_CUBE_MAP_POSITIVE_X,6),H[f.TEXTURE_2D_ARRAY]=N(f.TEXTURE_2D_ARRAY,f.TEXTURE_2D_ARRAY,1,1),H[f.TEXTURE_3D]=N(f.TEXTURE_3D,f.TEXTURE_3D,1,1),S.setClear(0,0,0,1),s.setClear(1),T.setClear(0),U(f.DEPTH_TEST),s.setFunc(Nc),vt(!1),Tt(u2),U(f.CULL_FACE),q(ol);function U(dt){m[dt]!==!0&&(f.enable(dt),m[dt]=!0)}function _(dt){m[dt]!==!1&&(f.disable(dt),m[dt]=!1)}function $(dt,Qt){return c[dt]!==Qt?(f.bindFramebuffer(dt,Qt),c[dt]=Qt,dt===f.DRAW_FRAMEBUFFER&&(c[f.FRAMEBUFFER]=Qt),dt===f.FRAMEBUFFER&&(c[f.DRAW_FRAMEBUFFER]=Qt),!0):!1}function j(dt,Qt){let Ot=u,Vt=!1;if(dt){Ot=o.get(Qt),Ot===void 0&&(Ot=[],o.set(Qt,Ot));const le=dt.textures;if(Ot.length!==le.length||Ot[0]!==f.COLOR_ATTACHMENT0){for(let se=0,Re=le.length;se<Re;se++)Ot[se]=f.COLOR_ATTACHMENT0+se;Ot.length=le.length,Vt=!0}}else Ot[0]!==f.BACK&&(Ot[0]=f.BACK,Vt=!0);Vt&&f.drawBuffers(Ot)}function Z(dt){return r!==dt?(f.useProgram(dt),r=dt,!0):!1}const it={[uh]:f.FUNC_ADD,[DO]:f.FUNC_SUBTRACT,[OO]:f.FUNC_REVERSE_SUBTRACT};it[NO]=f.MIN,it[BO]=f.MAX;const at={[UO]:f.ZERO,[VO]:f.ONE,[zO]:f.SRC_COLOR,[xy]:f.SRC_ALPHA,[kO]:f.SRC_ALPHA_SATURATE,[HO]:f.DST_COLOR,[_O]:f.DST_ALPHA,[GO]:f.ONE_MINUS_SRC_COLOR,[yy]:f.ONE_MINUS_SRC_ALPHA,[XO]:f.ONE_MINUS_DST_COLOR,[WO]:f.ONE_MINUS_DST_ALPHA,[YO]:f.CONSTANT_COLOR,[$O]:f.ONE_MINUS_CONSTANT_COLOR,[KO]:f.CONSTANT_ALPHA,[jO]:f.ONE_MINUS_CONSTANT_ALPHA};function q(dt,Qt,Ot,Vt,le,se,Re,yi,ln,Pe){if(dt===ol){h===!0&&(_(f.BLEND),h=!1);return}if(h===!1&&(U(f.BLEND),h=!0),dt!==FO){if(dt!==d||Pe!==A){if((l!==uh||x!==uh)&&(f.blendEquation(f.FUNC_ADD),l=uh,x=uh),Pe)switch(dt){case hc:f.blendFuncSeparate(f.ONE,f.ONE_MINUS_SRC_ALPHA,f.ONE,f.ONE_MINUS_SRC_ALPHA);break;case c2:f.blendFunc(f.ONE,f.ONE);break;case f2:f.blendFuncSeparate(f.ZERO,f.ONE_MINUS_SRC_COLOR,f.ZERO,f.ONE);break;case d2:f.blendFuncSeparate(f.ZERO,f.SRC_COLOR,f.ZERO,f.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",dt);break}else switch(dt){case hc:f.blendFuncSeparate(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA,f.ONE,f.ONE_MINUS_SRC_ALPHA);break;case c2:f.blendFunc(f.SRC_ALPHA,f.ONE);break;case f2:f.blendFuncSeparate(f.ZERO,f.ONE_MINUS_SRC_COLOR,f.ZERO,f.ONE);break;case d2:f.blendFunc(f.ZERO,f.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",dt);break}p=null,g=null,y=null,E=null,w.set(0,0,0),C=0,d=dt,A=Pe}return}le=le||Qt,se=se||Ot,Re=Re||Vt,(Qt!==l||le!==x)&&(f.blendEquationSeparate(it[Qt],it[le]),l=Qt,x=le),(Ot!==p||Vt!==g||se!==y||Re!==E)&&(f.blendFuncSeparate(at[Ot],at[Vt],at[se],at[Re]),p=Ot,g=Vt,y=se,E=Re),(yi.equals(w)===!1||ln!==C)&&(f.blendColor(yi.r,yi.g,yi.b,ln),w.copy(yi),C=ln),d=dt,A=!1}function ft(dt,Qt){dt.side===Qa?_(f.CULL_FACE):U(f.CULL_FACE);let Ot=dt.side===Ms;Qt&&(Ot=!Ot),vt(Ot),dt.blending===hc&&dt.transparent===!1?q(ol):q(dt.blending,dt.blendEquation,dt.blendSrc,dt.blendDst,dt.blendEquationAlpha,dt.blendSrcAlpha,dt.blendDstAlpha,dt.blendColor,dt.blendAlpha,dt.premultipliedAlpha),s.setFunc(dt.depthFunc),s.setTest(dt.depthTest),s.setMask(dt.depthWrite),S.setMask(dt.colorWrite);const Vt=dt.stencilWrite;T.setTest(Vt),Vt&&(T.setMask(dt.stencilWriteMask),T.setFunc(dt.stencilFunc,dt.stencilRef,dt.stencilFuncMask),T.setOp(dt.stencilFail,dt.stencilZFail,dt.stencilZPass)),Bt(dt.polygonOffset,dt.polygonOffsetFactor,dt.polygonOffsetUnits),dt.alphaToCoverage===!0?U(f.SAMPLE_ALPHA_TO_COVERAGE):_(f.SAMPLE_ALPHA_TO_COVERAGE)}function vt(dt){M!==dt&&(dt?f.frontFace(f.CW):f.frontFace(f.CCW),M=dt)}function Tt(dt){dt!==bO?(U(f.CULL_FACE),dt!==R&&(dt===u2?f.cullFace(f.BACK):dt===IO?f.cullFace(f.FRONT):f.cullFace(f.FRONT_AND_BACK))):_(f.CULL_FACE),R=dt}function ut(dt){dt!==P&&(L&&f.lineWidth(dt),P=dt)}function Bt(dt,Qt,Ot){dt?(U(f.POLYGON_OFFSET_FILL),(b!==Qt||F!==Ot)&&(f.polygonOffset(Qt,Ot),b=Qt,F=Ot)):_(f.POLYGON_OFFSET_FILL)}function Pt(dt){dt?U(f.SCISSOR_TEST):_(f.SCISSOR_TEST)}function et(dt){dt===void 0&&(dt=f.TEXTURE0+I-1),z!==dt&&(f.activeTexture(dt),z=dt)}function Q(dt,Qt,Ot){Ot===void 0&&(z===null?Ot=f.TEXTURE0+I-1:Ot=z);let Vt=W[Ot];Vt===void 0&&(Vt={type:void 0,texture:void 0},W[Ot]=Vt),(Vt.type!==dt||Vt.texture!==Qt)&&(z!==Ot&&(f.activeTexture(Ot),z=Ot),f.bindTexture(dt,Qt||H[dt]),Vt.type=dt,Vt.texture=Qt)}function lt(){const dt=W[z];dt!==void 0&&dt.type!==void 0&&(f.bindTexture(dt.type,null),dt.type=void 0,dt.texture=void 0)}function pt(){try{f.compressedTexImage2D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Mt(){try{f.compressedTexImage3D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Ct(){try{f.texSubImage2D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Kt(){try{f.texSubImage3D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Ut(){try{f.compressedTexSubImage2D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Wt(){try{f.compressedTexSubImage3D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function ae(){try{f.texStorage2D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function zt(){try{f.texStorage3D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function Ht(){try{f.texImage2D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function At(){try{f.texImage3D.apply(f,arguments)}catch(dt){console.error("THREE.WebGLState:",dt)}}function ne(dt){V.equals(dt)===!1&&(f.scissor(dt.x,dt.y,dt.z,dt.w),V.copy(dt))}function jt(dt){G.equals(dt)===!1&&(f.viewport(dt.x,dt.y,dt.z,dt.w),G.copy(dt))}function ve(dt,Qt){let Ot=a.get(Qt);Ot===void 0&&(Ot=new WeakMap,a.set(Qt,Ot));let Vt=Ot.get(dt);Vt===void 0&&(Vt=f.getUniformBlockIndex(Qt,dt.name),Ot.set(dt,Vt))}function we(dt,Qt){const Vt=a.get(Qt).get(dt);e.get(Qt)!==Vt&&(f.uniformBlockBinding(Qt,Vt,dt.__bindingPointIndex),e.set(Qt,Vt))}function De(){f.disable(f.BLEND),f.disable(f.CULL_FACE),f.disable(f.DEPTH_TEST),f.disable(f.POLYGON_OFFSET_FILL),f.disable(f.SCISSOR_TEST),f.disable(f.STENCIL_TEST),f.disable(f.SAMPLE_ALPHA_TO_COVERAGE),f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ZERO),f.blendFuncSeparate(f.ONE,f.ZERO,f.ONE,f.ZERO),f.blendColor(0,0,0,0),f.colorMask(!0,!0,!0,!0),f.clearColor(0,0,0,0),f.depthMask(!0),f.depthFunc(f.LESS),s.setReversed(!1),f.clearDepth(1),f.stencilMask(4294967295),f.stencilFunc(f.ALWAYS,0,4294967295),f.stencilOp(f.KEEP,f.KEEP,f.KEEP),f.clearStencil(0),f.cullFace(f.BACK),f.frontFace(f.CCW),f.polygonOffset(0,0),f.activeTexture(f.TEXTURE0),f.bindFramebuffer(f.FRAMEBUFFER,null),f.bindFramebuffer(f.DRAW_FRAMEBUFFER,null),f.bindFramebuffer(f.READ_FRAMEBUFFER,null),f.useProgram(null),f.lineWidth(1),f.scissor(0,0,f.canvas.width,f.canvas.height),f.viewport(0,0,f.canvas.width,f.canvas.height),m={},z=null,W={},c={},o=new WeakMap,u=[],r=null,h=!1,d=null,l=null,p=null,g=null,x=null,y=null,E=null,w=new vi(0,0,0),C=0,A=!1,M=null,R=null,P=null,b=null,F=null,V.set(0,0,f.canvas.width,f.canvas.height),G.set(0,0,f.canvas.width,f.canvas.height),S.reset(),s.reset(),T.reset()}return{buffers:{color:S,depth:s,stencil:T},enable:U,disable:_,bindFramebuffer:$,drawBuffers:j,useProgram:Z,setBlending:q,setMaterial:ft,setFlipSided:vt,setCullFace:Tt,setLineWidth:ut,setPolygonOffset:Bt,setScissorTest:Pt,activeTexture:et,bindTexture:Q,unbindTexture:lt,compressedTexImage2D:pt,compressedTexImage3D:Mt,texImage2D:Ht,texImage3D:At,updateUBOMapping:ve,uniformBlockBinding:we,texStorage2D:ae,texStorage3D:zt,texSubImage2D:Ct,texSubImage3D:Kt,compressedTexSubImage2D:Ut,compressedTexSubImage3D:Wt,scissor:ne,viewport:jt,reset:De}}function bB(f,t,i,n,v,S,s){const T=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,e=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),a=new ai,m=new WeakMap;let c;const o=new WeakMap;let u=!1;try{u=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function r(et,Q){return u?new OffscreenCanvas(et,Q):qm("canvas")}function h(et,Q,lt){let pt=1;const Mt=Pt(et);if((Mt.width>lt||Mt.height>lt)&&(pt=lt/Math.max(Mt.width,Mt.height)),pt<1)if(typeof HTMLImageElement<"u"&&et instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&et instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&et instanceof ImageBitmap||typeof VideoFrame<"u"&&et instanceof VideoFrame){const Ct=Math.floor(pt*Mt.width),Kt=Math.floor(pt*Mt.height);c===void 0&&(c=r(Ct,Kt));const Ut=Q?r(Ct,Kt):c;return Ut.width=Ct,Ut.height=Kt,Ut.getContext("2d").drawImage(et,0,0,Ct,Kt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Mt.width+"x"+Mt.height+") to ("+Ct+"x"+Kt+")."),Ut}else return"data"in et&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Mt.width+"x"+Mt.height+")."),et;return et}function d(et){return et.generateMipmaps}function l(et){f.generateMipmap(et)}function p(et){return et.isWebGLCubeRenderTarget?f.TEXTURE_CUBE_MAP:et.isWebGL3DRenderTarget?f.TEXTURE_3D:et.isWebGLArrayRenderTarget||et.isCompressedArrayTexture?f.TEXTURE_2D_ARRAY:f.TEXTURE_2D}function g(et,Q,lt,pt,Mt=!1){if(et!==null){if(f[et]!==void 0)return f[et];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+et+"'")}let Ct=Q;if(Q===f.RED&&(lt===f.FLOAT&&(Ct=f.R32F),lt===f.HALF_FLOAT&&(Ct=f.R16F),lt===f.UNSIGNED_BYTE&&(Ct=f.R8)),Q===f.RED_INTEGER&&(lt===f.UNSIGNED_BYTE&&(Ct=f.R8UI),lt===f.UNSIGNED_SHORT&&(Ct=f.R16UI),lt===f.UNSIGNED_INT&&(Ct=f.R32UI),lt===f.BYTE&&(Ct=f.R8I),lt===f.SHORT&&(Ct=f.R16I),lt===f.INT&&(Ct=f.R32I)),Q===f.RG&&(lt===f.FLOAT&&(Ct=f.RG32F),lt===f.HALF_FLOAT&&(Ct=f.RG16F),lt===f.UNSIGNED_BYTE&&(Ct=f.RG8)),Q===f.RG_INTEGER&&(lt===f.UNSIGNED_BYTE&&(Ct=f.RG8UI),lt===f.UNSIGNED_SHORT&&(Ct=f.RG16UI),lt===f.UNSIGNED_INT&&(Ct=f.RG32UI),lt===f.BYTE&&(Ct=f.RG8I),lt===f.SHORT&&(Ct=f.RG16I),lt===f.INT&&(Ct=f.RG32I)),Q===f.RGB_INTEGER&&(lt===f.UNSIGNED_BYTE&&(Ct=f.RGB8UI),lt===f.UNSIGNED_SHORT&&(Ct=f.RGB16UI),lt===f.UNSIGNED_INT&&(Ct=f.RGB32UI),lt===f.BYTE&&(Ct=f.RGB8I),lt===f.SHORT&&(Ct=f.RGB16I),lt===f.INT&&(Ct=f.RGB32I)),Q===f.RGBA_INTEGER&&(lt===f.UNSIGNED_BYTE&&(Ct=f.RGBA8UI),lt===f.UNSIGNED_SHORT&&(Ct=f.RGBA16UI),lt===f.UNSIGNED_INT&&(Ct=f.RGBA32UI),lt===f.BYTE&&(Ct=f.RGBA8I),lt===f.SHORT&&(Ct=f.RGBA16I),lt===f.INT&&(Ct=f.RGBA32I)),Q===f.RGB&&lt===f.UNSIGNED_INT_5_9_9_9_REV&&(Ct=f.RGB9_E5),Q===f.RGBA){const Kt=Mt?Zm:ci.getTransfer(pt);lt===f.FLOAT&&(Ct=f.RGBA32F),lt===f.HALF_FLOAT&&(Ct=f.RGBA16F),lt===f.UNSIGNED_BYTE&&(Ct=Kt===Ci?f.SRGB8_ALPHA8:f.RGBA8),lt===f.UNSIGNED_SHORT_4_4_4_4&&(Ct=f.RGBA4),lt===f.UNSIGNED_SHORT_5_5_5_1&&(Ct=f.RGB5_A1)}return(Ct===f.R16F||Ct===f.R32F||Ct===f.RG16F||Ct===f.RG32F||Ct===f.RGBA16F||Ct===f.RGBA32F)&&t.get("EXT_color_buffer_float"),Ct}function x(et,Q){let lt;return et?Q===null||Q===Hh||Q===Vc?lt=f.DEPTH24_STENCIL8:Q===Ja?lt=f.DEPTH32F_STENCIL8:Q===np&&(lt=f.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Q===null||Q===Hh||Q===Vc?lt=f.DEPTH_COMPONENT24:Q===Ja?lt=f.DEPTH_COMPONENT32F:Q===np&&(lt=f.DEPTH_COMPONENT16),lt}function y(et,Q){return d(et)===!0||et.isFramebufferTexture&&et.minFilter!==Gr&&et.minFilter!==pa?Math.log2(Math.max(Q.width,Q.height))+1:et.mipmaps!==void 0&&et.mipmaps.length>0?et.mipmaps.length:et.isCompressedTexture&&Array.isArray(et.image)?Q.mipmaps.length:1}function E(et){const Q=et.target;Q.removeEventListener("dispose",E),C(Q),Q.isVideoTexture&&m.delete(Q)}function w(et){const Q=et.target;Q.removeEventListener("dispose",w),M(Q)}function C(et){const Q=n.get(et);if(Q.__webglInit===void 0)return;const lt=et.source,pt=o.get(lt);if(pt){const Mt=pt[Q.__cacheKey];Mt.usedTimes--,Mt.usedTimes===0&&A(et),Object.keys(pt).length===0&&o.delete(lt)}n.remove(et)}function A(et){const Q=n.get(et);f.deleteTexture(Q.__webglTexture);const lt=et.source,pt=o.get(lt);delete pt[Q.__cacheKey],s.memory.textures--}function M(et){const Q=n.get(et);if(et.depthTexture&&(et.depthTexture.dispose(),n.remove(et.depthTexture)),et.isWebGLCubeRenderTarget)for(let pt=0;pt<6;pt++){if(Array.isArray(Q.__webglFramebuffer[pt]))for(let Mt=0;Mt<Q.__webglFramebuffer[pt].length;Mt++)f.deleteFramebuffer(Q.__webglFramebuffer[pt][Mt]);else f.deleteFramebuffer(Q.__webglFramebuffer[pt]);Q.__webglDepthbuffer&&f.deleteRenderbuffer(Q.__webglDepthbuffer[pt])}else{if(Array.isArray(Q.__webglFramebuffer))for(let pt=0;pt<Q.__webglFramebuffer.length;pt++)f.deleteFramebuffer(Q.__webglFramebuffer[pt]);else f.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&f.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&f.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let pt=0;pt<Q.__webglColorRenderbuffer.length;pt++)Q.__webglColorRenderbuffer[pt]&&f.deleteRenderbuffer(Q.__webglColorRenderbuffer[pt]);Q.__webglDepthRenderbuffer&&f.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}const lt=et.textures;for(let pt=0,Mt=lt.length;pt<Mt;pt++){const Ct=n.get(lt[pt]);Ct.__webglTexture&&(f.deleteTexture(Ct.__webglTexture),s.memory.textures--),n.remove(lt[pt])}n.remove(et)}let R=0;function P(){R=0}function b(){const et=R;return et>=v.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+et+" texture units while this GPU supports only "+v.maxTextures),R+=1,et}function F(et){const Q=[];return Q.push(et.wrapS),Q.push(et.wrapT),Q.push(et.wrapR||0),Q.push(et.magFilter),Q.push(et.minFilter),Q.push(et.anisotropy),Q.push(et.internalFormat),Q.push(et.format),Q.push(et.type),Q.push(et.generateMipmaps),Q.push(et.premultiplyAlpha),Q.push(et.flipY),Q.push(et.unpackAlignment),Q.push(et.colorSpace),Q.join()}function I(et,Q){const lt=n.get(et);if(et.isVideoTexture&&ut(et),et.isRenderTargetTexture===!1&&et.version>0&&lt.__version!==et.version){const pt=et.image;if(pt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{G(lt,et,Q);return}}i.bindTexture(f.TEXTURE_2D,lt.__webglTexture,f.TEXTURE0+Q)}function L(et,Q){const lt=n.get(et);if(et.version>0&&lt.__version!==et.version){G(lt,et,Q);return}i.bindTexture(f.TEXTURE_2D_ARRAY,lt.__webglTexture,f.TEXTURE0+Q)}function D(et,Q){const lt=n.get(et);if(et.version>0&&lt.__version!==et.version){G(lt,et,Q);return}i.bindTexture(f.TEXTURE_3D,lt.__webglTexture,f.TEXTURE0+Q)}function O(et,Q){const lt=n.get(et);if(et.version>0&&lt.__version!==et.version){N(lt,et,Q);return}i.bindTexture(f.TEXTURE_CUBE_MAP,lt.__webglTexture,f.TEXTURE0+Q)}const z={[by]:f.REPEAT,[yh]:f.CLAMP_TO_EDGE,[Iy]:f.MIRRORED_REPEAT},W={[Gr]:f.NEAREST,[r5]:f.NEAREST_MIPMAP_NEAREST,[Uv]:f.NEAREST_MIPMAP_LINEAR,[pa]:f.LINEAR,[V0]:f.LINEAR_MIPMAP_NEAREST,[Th]:f.LINEAR_MIPMAP_LINEAR},k={[h5]:f.NEVER,[v5]:f.ALWAYS,[u5]:f.LESS,[gR]:f.LEQUAL,[c5]:f.EQUAL,[p5]:f.GEQUAL,[f5]:f.GREATER,[d5]:f.NOTEQUAL};function X(et,Q){if(Q.type===Ja&&t.has("OES_texture_float_linear")===!1&&(Q.magFilter===pa||Q.magFilter===V0||Q.magFilter===Uv||Q.magFilter===Th||Q.minFilter===pa||Q.minFilter===V0||Q.minFilter===Uv||Q.minFilter===Th)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),f.texParameteri(et,f.TEXTURE_WRAP_S,z[Q.wrapS]),f.texParameteri(et,f.TEXTURE_WRAP_T,z[Q.wrapT]),(et===f.TEXTURE_3D||et===f.TEXTURE_2D_ARRAY)&&f.texParameteri(et,f.TEXTURE_WRAP_R,z[Q.wrapR]),f.texParameteri(et,f.TEXTURE_MAG_FILTER,W[Q.magFilter]),f.texParameteri(et,f.TEXTURE_MIN_FILTER,W[Q.minFilter]),Q.compareFunction&&(f.texParameteri(et,f.TEXTURE_COMPARE_MODE,f.COMPARE_REF_TO_TEXTURE),f.texParameteri(et,f.TEXTURE_COMPARE_FUNC,k[Q.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(Q.magFilter===Gr||Q.minFilter!==Uv&&Q.minFilter!==Th||Q.type===Ja&&t.has("OES_texture_float_linear")===!1)return;if(Q.anisotropy>1||n.get(Q).__currentAnisotropy){const lt=t.get("EXT_texture_filter_anisotropic");f.texParameterf(et,lt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,v.getMaxAnisotropy())),n.get(Q).__currentAnisotropy=Q.anisotropy}}}function V(et,Q){let lt=!1;et.__webglInit===void 0&&(et.__webglInit=!0,Q.addEventListener("dispose",E));const pt=Q.source;let Mt=o.get(pt);Mt===void 0&&(Mt={},o.set(pt,Mt));const Ct=F(Q);if(Ct!==et.__cacheKey){Mt[Ct]===void 0&&(Mt[Ct]={texture:f.createTexture(),usedTimes:0},s.memory.textures++,lt=!0),Mt[Ct].usedTimes++;const Kt=Mt[et.__cacheKey];Kt!==void 0&&(Mt[et.__cacheKey].usedTimes--,Kt.usedTimes===0&&A(Q)),et.__cacheKey=Ct,et.__webglTexture=Mt[Ct].texture}return lt}function G(et,Q,lt){let pt=f.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(pt=f.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(pt=f.TEXTURE_3D);const Mt=V(et,Q),Ct=Q.source;i.bindTexture(pt,et.__webglTexture,f.TEXTURE0+lt);const Kt=n.get(Ct);if(Ct.version!==Kt.__version||Mt===!0){i.activeTexture(f.TEXTURE0+lt);const Ut=ci.getPrimaries(ci.workingColorSpace),Wt=Q.colorSpace===Xo?null:ci.getPrimaries(Q.colorSpace),ae=Q.colorSpace===Xo||Ut===Wt?f.NONE:f.BROWSER_DEFAULT_WEBGL;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,Q.flipY),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),f.pixelStorei(f.UNPACK_ALIGNMENT,Q.unpackAlignment),f.pixelStorei(f.UNPACK_COLORSPACE_CONVERSION_WEBGL,ae);let zt=h(Q.image,!1,v.maxTextureSize);zt=Bt(Q,zt);const Ht=S.convert(Q.format,Q.colorSpace),At=S.convert(Q.type);let ne=g(Q.internalFormat,Ht,At,Q.colorSpace,Q.isVideoTexture);X(pt,Q);let jt;const ve=Q.mipmaps,we=Q.isVideoTexture!==!0,De=Kt.__version===void 0||Mt===!0,dt=Ct.dataReady,Qt=y(Q,zt);if(Q.isDepthTexture)ne=x(Q.format===zc,Q.type),De&&(we?i.texStorage2D(f.TEXTURE_2D,1,ne,zt.width,zt.height):i.texImage2D(f.TEXTURE_2D,0,ne,zt.width,zt.height,0,Ht,At,null));else if(Q.isDataTexture)if(ve.length>0){we&&De&&i.texStorage2D(f.TEXTURE_2D,Qt,ne,ve[0].width,ve[0].height);for(let Ot=0,Vt=ve.length;Ot<Vt;Ot++)jt=ve[Ot],we?dt&&i.texSubImage2D(f.TEXTURE_2D,Ot,0,0,jt.width,jt.height,Ht,At,jt.data):i.texImage2D(f.TEXTURE_2D,Ot,ne,jt.width,jt.height,0,Ht,At,jt.data);Q.generateMipmaps=!1}else we?(De&&i.texStorage2D(f.TEXTURE_2D,Qt,ne,zt.width,zt.height),dt&&i.texSubImage2D(f.TEXTURE_2D,0,0,0,zt.width,zt.height,Ht,At,zt.data)):i.texImage2D(f.TEXTURE_2D,0,ne,zt.width,zt.height,0,Ht,At,zt.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){we&&De&&i.texStorage3D(f.TEXTURE_2D_ARRAY,Qt,ne,ve[0].width,ve[0].height,zt.depth);for(let Ot=0,Vt=ve.length;Ot<Vt;Ot++)if(jt=ve[Ot],Q.format!==Ur)if(Ht!==null)if(we){if(dt)if(Q.layerUpdates.size>0){const le=U2(jt.width,jt.height,Q.format,Q.type);for(const se of Q.layerUpdates){const Re=jt.data.subarray(se*le/jt.data.BYTES_PER_ELEMENT,(se+1)*le/jt.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(f.TEXTURE_2D_ARRAY,Ot,0,0,se,jt.width,jt.height,1,Ht,Re)}Q.clearLayerUpdates()}else i.compressedTexSubImage3D(f.TEXTURE_2D_ARRAY,Ot,0,0,0,jt.width,jt.height,zt.depth,Ht,jt.data)}else i.compressedTexImage3D(f.TEXTURE_2D_ARRAY,Ot,ne,jt.width,jt.height,zt.depth,0,jt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else we?dt&&i.texSubImage3D(f.TEXTURE_2D_ARRAY,Ot,0,0,0,jt.width,jt.height,zt.depth,Ht,At,jt.data):i.texImage3D(f.TEXTURE_2D_ARRAY,Ot,ne,jt.width,jt.height,zt.depth,0,Ht,At,jt.data)}else{we&&De&&i.texStorage2D(f.TEXTURE_2D,Qt,ne,ve[0].width,ve[0].height);for(let Ot=0,Vt=ve.length;Ot<Vt;Ot++)jt=ve[Ot],Q.format!==Ur?Ht!==null?we?dt&&i.compressedTexSubImage2D(f.TEXTURE_2D,Ot,0,0,jt.width,jt.height,Ht,jt.data):i.compressedTexImage2D(f.TEXTURE_2D,Ot,ne,jt.width,jt.height,0,jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?dt&&i.texSubImage2D(f.TEXTURE_2D,Ot,0,0,jt.width,jt.height,Ht,At,jt.data):i.texImage2D(f.TEXTURE_2D,Ot,ne,jt.width,jt.height,0,Ht,At,jt.data)}else if(Q.isDataArrayTexture)if(we){if(De&&i.texStorage3D(f.TEXTURE_2D_ARRAY,Qt,ne,zt.width,zt.height,zt.depth),dt)if(Q.layerUpdates.size>0){const Ot=U2(zt.width,zt.height,Q.format,Q.type);for(const Vt of Q.layerUpdates){const le=zt.data.subarray(Vt*Ot/zt.data.BYTES_PER_ELEMENT,(Vt+1)*Ot/zt.data.BYTES_PER_ELEMENT);i.texSubImage3D(f.TEXTURE_2D_ARRAY,0,0,0,Vt,zt.width,zt.height,1,Ht,At,le)}Q.clearLayerUpdates()}else i.texSubImage3D(f.TEXTURE_2D_ARRAY,0,0,0,0,zt.width,zt.height,zt.depth,Ht,At,zt.data)}else i.texImage3D(f.TEXTURE_2D_ARRAY,0,ne,zt.width,zt.height,zt.depth,0,Ht,At,zt.data);else if(Q.isData3DTexture)we?(De&&i.texStorage3D(f.TEXTURE_3D,Qt,ne,zt.width,zt.height,zt.depth),dt&&i.texSubImage3D(f.TEXTURE_3D,0,0,0,0,zt.width,zt.height,zt.depth,Ht,At,zt.data)):i.texImage3D(f.TEXTURE_3D,0,ne,zt.width,zt.height,zt.depth,0,Ht,At,zt.data);else if(Q.isFramebufferTexture){if(De)if(we)i.texStorage2D(f.TEXTURE_2D,Qt,ne,zt.width,zt.height);else{let Ot=zt.width,Vt=zt.height;for(let le=0;le<Qt;le++)i.texImage2D(f.TEXTURE_2D,le,ne,Ot,Vt,0,Ht,At,null),Ot>>=1,Vt>>=1}}else if(ve.length>0){if(we&&De){const Ot=Pt(ve[0]);i.texStorage2D(f.TEXTURE_2D,Qt,ne,Ot.width,Ot.height)}for(let Ot=0,Vt=ve.length;Ot<Vt;Ot++)jt=ve[Ot],we?dt&&i.texSubImage2D(f.TEXTURE_2D,Ot,0,0,Ht,At,jt):i.texImage2D(f.TEXTURE_2D,Ot,ne,Ht,At,jt);Q.generateMipmaps=!1}else if(we){if(De){const Ot=Pt(zt);i.texStorage2D(f.TEXTURE_2D,Qt,ne,Ot.width,Ot.height)}dt&&i.texSubImage2D(f.TEXTURE_2D,0,0,0,Ht,At,zt)}else i.texImage2D(f.TEXTURE_2D,0,ne,Ht,At,zt);d(Q)&&l(pt),Kt.__version=Ct.version,Q.onUpdate&&Q.onUpdate(Q)}et.__version=Q.version}function N(et,Q,lt){if(Q.image.length!==6)return;const pt=V(et,Q),Mt=Q.source;i.bindTexture(f.TEXTURE_CUBE_MAP,et.__webglTexture,f.TEXTURE0+lt);const Ct=n.get(Mt);if(Mt.version!==Ct.__version||pt===!0){i.activeTexture(f.TEXTURE0+lt);const Kt=ci.getPrimaries(ci.workingColorSpace),Ut=Q.colorSpace===Xo?null:ci.getPrimaries(Q.colorSpace),Wt=Q.colorSpace===Xo||Kt===Ut?f.NONE:f.BROWSER_DEFAULT_WEBGL;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,Q.flipY),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),f.pixelStorei(f.UNPACK_ALIGNMENT,Q.unpackAlignment),f.pixelStorei(f.UNPACK_COLORSPACE_CONVERSION_WEBGL,Wt);const ae=Q.isCompressedTexture||Q.image[0].isCompressedTexture,zt=Q.image[0]&&Q.image[0].isDataTexture,Ht=[];for(let Vt=0;Vt<6;Vt++)!ae&&!zt?Ht[Vt]=h(Q.image[Vt],!0,v.maxCubemapSize):Ht[Vt]=zt?Q.image[Vt].image:Q.image[Vt],Ht[Vt]=Bt(Q,Ht[Vt]);const At=Ht[0],ne=S.convert(Q.format,Q.colorSpace),jt=S.convert(Q.type),ve=g(Q.internalFormat,ne,jt,Q.colorSpace),we=Q.isVideoTexture!==!0,De=Ct.__version===void 0||pt===!0,dt=Mt.dataReady;let Qt=y(Q,At);X(f.TEXTURE_CUBE_MAP,Q);let Ot;if(ae){we&&De&&i.texStorage2D(f.TEXTURE_CUBE_MAP,Qt,ve,At.width,At.height);for(let Vt=0;Vt<6;Vt++){Ot=Ht[Vt].mipmaps;for(let le=0;le<Ot.length;le++){const se=Ot[le];Q.format!==Ur?ne!==null?we?dt&&i.compressedTexSubImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,le,0,0,se.width,se.height,ne,se.data):i.compressedTexImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,le,ve,se.width,se.height,0,se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):we?dt&&i.texSubImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,le,0,0,se.width,se.height,ne,jt,se.data):i.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,le,ve,se.width,se.height,0,ne,jt,se.data)}}}else{if(Ot=Q.mipmaps,we&&De){Ot.length>0&&Qt++;const Vt=Pt(Ht[0]);i.texStorage2D(f.TEXTURE_CUBE_MAP,Qt,ve,Vt.width,Vt.height)}for(let Vt=0;Vt<6;Vt++)if(zt){we?dt&&i.texSubImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,0,0,Ht[Vt].width,Ht[Vt].height,ne,jt,Ht[Vt].data):i.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,ve,Ht[Vt].width,Ht[Vt].height,0,ne,jt,Ht[Vt].data);for(let le=0;le<Ot.length;le++){const Re=Ot[le].image[Vt].image;we?dt&&i.texSubImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,le+1,0,0,Re.width,Re.height,ne,jt,Re.data):i.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,le+1,ve,Re.width,Re.height,0,ne,jt,Re.data)}}else{we?dt&&i.texSubImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,0,0,ne,jt,Ht[Vt]):i.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,0,ve,ne,jt,Ht[Vt]);for(let le=0;le<Ot.length;le++){const se=Ot[le];we?dt&&i.texSubImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,le+1,0,0,ne,jt,se.image[Vt]):i.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,le+1,ve,ne,jt,se.image[Vt])}}}d(Q)&&l(f.TEXTURE_CUBE_MAP),Ct.__version=Mt.version,Q.onUpdate&&Q.onUpdate(Q)}et.__version=Q.version}function H(et,Q,lt,pt,Mt,Ct){const Kt=S.convert(lt.format,lt.colorSpace),Ut=S.convert(lt.type),Wt=g(lt.internalFormat,Kt,Ut,lt.colorSpace),ae=n.get(Q),zt=n.get(lt);if(zt.__renderTarget=Q,!ae.__hasExternalTextures){const Ht=Math.max(1,Q.width>>Ct),At=Math.max(1,Q.height>>Ct);Mt===f.TEXTURE_3D||Mt===f.TEXTURE_2D_ARRAY?i.texImage3D(Mt,Ct,Wt,Ht,At,Q.depth,0,Kt,Ut,null):i.texImage2D(Mt,Ct,Wt,Ht,At,0,Kt,Ut,null)}i.bindFramebuffer(f.FRAMEBUFFER,et),Tt(Q)?T.framebufferTexture2DMultisampleEXT(f.FRAMEBUFFER,pt,Mt,zt.__webglTexture,0,vt(Q)):(Mt===f.TEXTURE_2D||Mt>=f.TEXTURE_CUBE_MAP_POSITIVE_X&&Mt<=f.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&f.framebufferTexture2D(f.FRAMEBUFFER,pt,Mt,zt.__webglTexture,Ct),i.bindFramebuffer(f.FRAMEBUFFER,null)}function U(et,Q,lt){if(f.bindRenderbuffer(f.RENDERBUFFER,et),Q.depthBuffer){const pt=Q.depthTexture,Mt=pt&&pt.isDepthTexture?pt.type:null,Ct=x(Q.stencilBuffer,Mt),Kt=Q.stencilBuffer?f.DEPTH_STENCIL_ATTACHMENT:f.DEPTH_ATTACHMENT,Ut=vt(Q);Tt(Q)?T.renderbufferStorageMultisampleEXT(f.RENDERBUFFER,Ut,Ct,Q.width,Q.height):lt?f.renderbufferStorageMultisample(f.RENDERBUFFER,Ut,Ct,Q.width,Q.height):f.renderbufferStorage(f.RENDERBUFFER,Ct,Q.width,Q.height),f.framebufferRenderbuffer(f.FRAMEBUFFER,Kt,f.RENDERBUFFER,et)}else{const pt=Q.textures;for(let Mt=0;Mt<pt.length;Mt++){const Ct=pt[Mt],Kt=S.convert(Ct.format,Ct.colorSpace),Ut=S.convert(Ct.type),Wt=g(Ct.internalFormat,Kt,Ut,Ct.colorSpace),ae=vt(Q);lt&&Tt(Q)===!1?f.renderbufferStorageMultisample(f.RENDERBUFFER,ae,Wt,Q.width,Q.height):Tt(Q)?T.renderbufferStorageMultisampleEXT(f.RENDERBUFFER,ae,Wt,Q.width,Q.height):f.renderbufferStorage(f.RENDERBUFFER,Wt,Q.width,Q.height)}}f.bindRenderbuffer(f.RENDERBUFFER,null)}function _(et,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(f.FRAMEBUFFER,et),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const pt=n.get(Q.depthTexture);pt.__renderTarget=Q,(!pt.__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),I(Q.depthTexture,0);const Mt=pt.__webglTexture,Ct=vt(Q);if(Q.depthTexture.format===uc)Tt(Q)?T.framebufferTexture2DMultisampleEXT(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.TEXTURE_2D,Mt,0,Ct):f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.TEXTURE_2D,Mt,0);else if(Q.depthTexture.format===zc)Tt(Q)?T.framebufferTexture2DMultisampleEXT(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.TEXTURE_2D,Mt,0,Ct):f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.TEXTURE_2D,Mt,0);else throw new Error("Unknown depthTexture format")}function $(et){const Q=n.get(et),lt=et.isWebGLCubeRenderTarget===!0;if(Q.__boundDepthTexture!==et.depthTexture){const pt=et.depthTexture;if(Q.__depthDisposeCallback&&Q.__depthDisposeCallback(),pt){const Mt=()=>{delete Q.__boundDepthTexture,delete Q.__depthDisposeCallback,pt.removeEventListener("dispose",Mt)};pt.addEventListener("dispose",Mt),Q.__depthDisposeCallback=Mt}Q.__boundDepthTexture=pt}if(et.depthTexture&&!Q.__autoAllocateDepthBuffer){if(lt)throw new Error("target.depthTexture not supported in Cube render targets");_(Q.__webglFramebuffer,et)}else if(lt){Q.__webglDepthbuffer=[];for(let pt=0;pt<6;pt++)if(i.bindFramebuffer(f.FRAMEBUFFER,Q.__webglFramebuffer[pt]),Q.__webglDepthbuffer[pt]===void 0)Q.__webglDepthbuffer[pt]=f.createRenderbuffer(),U(Q.__webglDepthbuffer[pt],et,!1);else{const Mt=et.stencilBuffer?f.DEPTH_STENCIL_ATTACHMENT:f.DEPTH_ATTACHMENT,Ct=Q.__webglDepthbuffer[pt];f.bindRenderbuffer(f.RENDERBUFFER,Ct),f.framebufferRenderbuffer(f.FRAMEBUFFER,Mt,f.RENDERBUFFER,Ct)}}else if(i.bindFramebuffer(f.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer===void 0)Q.__webglDepthbuffer=f.createRenderbuffer(),U(Q.__webglDepthbuffer,et,!1);else{const pt=et.stencilBuffer?f.DEPTH_STENCIL_ATTACHMENT:f.DEPTH_ATTACHMENT,Mt=Q.__webglDepthbuffer;f.bindRenderbuffer(f.RENDERBUFFER,Mt),f.framebufferRenderbuffer(f.FRAMEBUFFER,pt,f.RENDERBUFFER,Mt)}i.bindFramebuffer(f.FRAMEBUFFER,null)}function j(et,Q,lt){const pt=n.get(et);Q!==void 0&&H(pt.__webglFramebuffer,et,et.texture,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,0),lt!==void 0&&$(et)}function Z(et){const Q=et.texture,lt=n.get(et),pt=n.get(Q);et.addEventListener("dispose",w);const Mt=et.textures,Ct=et.isWebGLCubeRenderTarget===!0,Kt=Mt.length>1;if(Kt||(pt.__webglTexture===void 0&&(pt.__webglTexture=f.createTexture()),pt.__version=Q.version,s.memory.textures++),Ct){lt.__webglFramebuffer=[];for(let Ut=0;Ut<6;Ut++)if(Q.mipmaps&&Q.mipmaps.length>0){lt.__webglFramebuffer[Ut]=[];for(let Wt=0;Wt<Q.mipmaps.length;Wt++)lt.__webglFramebuffer[Ut][Wt]=f.createFramebuffer()}else lt.__webglFramebuffer[Ut]=f.createFramebuffer()}else{if(Q.mipmaps&&Q.mipmaps.length>0){lt.__webglFramebuffer=[];for(let Ut=0;Ut<Q.mipmaps.length;Ut++)lt.__webglFramebuffer[Ut]=f.createFramebuffer()}else lt.__webglFramebuffer=f.createFramebuffer();if(Kt)for(let Ut=0,Wt=Mt.length;Ut<Wt;Ut++){const ae=n.get(Mt[Ut]);ae.__webglTexture===void 0&&(ae.__webglTexture=f.createTexture(),s.memory.textures++)}if(et.samples>0&&Tt(et)===!1){lt.__webglMultisampledFramebuffer=f.createFramebuffer(),lt.__webglColorRenderbuffer=[],i.bindFramebuffer(f.FRAMEBUFFER,lt.__webglMultisampledFramebuffer);for(let Ut=0;Ut<Mt.length;Ut++){const Wt=Mt[Ut];lt.__webglColorRenderbuffer[Ut]=f.createRenderbuffer(),f.bindRenderbuffer(f.RENDERBUFFER,lt.__webglColorRenderbuffer[Ut]);const ae=S.convert(Wt.format,Wt.colorSpace),zt=S.convert(Wt.type),Ht=g(Wt.internalFormat,ae,zt,Wt.colorSpace,et.isXRRenderTarget===!0),At=vt(et);f.renderbufferStorageMultisample(f.RENDERBUFFER,At,Ht,et.width,et.height),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0+Ut,f.RENDERBUFFER,lt.__webglColorRenderbuffer[Ut])}f.bindRenderbuffer(f.RENDERBUFFER,null),et.depthBuffer&&(lt.__webglDepthRenderbuffer=f.createRenderbuffer(),U(lt.__webglDepthRenderbuffer,et,!0)),i.bindFramebuffer(f.FRAMEBUFFER,null)}}if(Ct){i.bindTexture(f.TEXTURE_CUBE_MAP,pt.__webglTexture),X(f.TEXTURE_CUBE_MAP,Q);for(let Ut=0;Ut<6;Ut++)if(Q.mipmaps&&Q.mipmaps.length>0)for(let Wt=0;Wt<Q.mipmaps.length;Wt++)H(lt.__webglFramebuffer[Ut][Wt],et,Q,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+Ut,Wt);else H(lt.__webglFramebuffer[Ut],et,Q,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+Ut,0);d(Q)&&l(f.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(Kt){for(let Ut=0,Wt=Mt.length;Ut<Wt;Ut++){const ae=Mt[Ut],zt=n.get(ae);i.bindTexture(f.TEXTURE_2D,zt.__webglTexture),X(f.TEXTURE_2D,ae),H(lt.__webglFramebuffer,et,ae,f.COLOR_ATTACHMENT0+Ut,f.TEXTURE_2D,0),d(ae)&&l(f.TEXTURE_2D)}i.unbindTexture()}else{let Ut=f.TEXTURE_2D;if((et.isWebGL3DRenderTarget||et.isWebGLArrayRenderTarget)&&(Ut=et.isWebGL3DRenderTarget?f.TEXTURE_3D:f.TEXTURE_2D_ARRAY),i.bindTexture(Ut,pt.__webglTexture),X(Ut,Q),Q.mipmaps&&Q.mipmaps.length>0)for(let Wt=0;Wt<Q.mipmaps.length;Wt++)H(lt.__webglFramebuffer[Wt],et,Q,f.COLOR_ATTACHMENT0,Ut,Wt);else H(lt.__webglFramebuffer,et,Q,f.COLOR_ATTACHMENT0,Ut,0);d(Q)&&l(Ut),i.unbindTexture()}et.depthBuffer&&$(et)}function it(et){const Q=et.textures;for(let lt=0,pt=Q.length;lt<pt;lt++){const Mt=Q[lt];if(d(Mt)){const Ct=p(et),Kt=n.get(Mt).__webglTexture;i.bindTexture(Ct,Kt),l(Ct),i.unbindTexture()}}}const at=[],q=[];function ft(et){if(et.samples>0){if(Tt(et)===!1){const Q=et.textures,lt=et.width,pt=et.height;let Mt=f.COLOR_BUFFER_BIT;const Ct=et.stencilBuffer?f.DEPTH_STENCIL_ATTACHMENT:f.DEPTH_ATTACHMENT,Kt=n.get(et),Ut=Q.length>1;if(Ut)for(let Wt=0;Wt<Q.length;Wt++)i.bindFramebuffer(f.FRAMEBUFFER,Kt.__webglMultisampledFramebuffer),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0+Wt,f.RENDERBUFFER,null),i.bindFramebuffer(f.FRAMEBUFFER,Kt.__webglFramebuffer),f.framebufferTexture2D(f.DRAW_FRAMEBUFFER,f.COLOR_ATTACHMENT0+Wt,f.TEXTURE_2D,null,0);i.bindFramebuffer(f.READ_FRAMEBUFFER,Kt.__webglMultisampledFramebuffer),i.bindFramebuffer(f.DRAW_FRAMEBUFFER,Kt.__webglFramebuffer);for(let Wt=0;Wt<Q.length;Wt++){if(et.resolveDepthBuffer&&(et.depthBuffer&&(Mt|=f.DEPTH_BUFFER_BIT),et.stencilBuffer&&et.resolveStencilBuffer&&(Mt|=f.STENCIL_BUFFER_BIT)),Ut){f.framebufferRenderbuffer(f.READ_FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,Kt.__webglColorRenderbuffer[Wt]);const ae=n.get(Q[Wt]).__webglTexture;f.framebufferTexture2D(f.DRAW_FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,ae,0)}f.blitFramebuffer(0,0,lt,pt,0,0,lt,pt,Mt,f.NEAREST),e===!0&&(at.length=0,q.length=0,at.push(f.COLOR_ATTACHMENT0+Wt),et.depthBuffer&&et.resolveDepthBuffer===!1&&(at.push(Ct),q.push(Ct),f.invalidateFramebuffer(f.DRAW_FRAMEBUFFER,q)),f.invalidateFramebuffer(f.READ_FRAMEBUFFER,at))}if(i.bindFramebuffer(f.READ_FRAMEBUFFER,null),i.bindFramebuffer(f.DRAW_FRAMEBUFFER,null),Ut)for(let Wt=0;Wt<Q.length;Wt++){i.bindFramebuffer(f.FRAMEBUFFER,Kt.__webglMultisampledFramebuffer),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0+Wt,f.RENDERBUFFER,Kt.__webglColorRenderbuffer[Wt]);const ae=n.get(Q[Wt]).__webglTexture;i.bindFramebuffer(f.FRAMEBUFFER,Kt.__webglFramebuffer),f.framebufferTexture2D(f.DRAW_FRAMEBUFFER,f.COLOR_ATTACHMENT0+Wt,f.TEXTURE_2D,ae,0)}i.bindFramebuffer(f.DRAW_FRAMEBUFFER,Kt.__webglMultisampledFramebuffer)}else if(et.depthBuffer&&et.resolveDepthBuffer===!1&&e){const Q=et.stencilBuffer?f.DEPTH_STENCIL_ATTACHMENT:f.DEPTH_ATTACHMENT;f.invalidateFramebuffer(f.DRAW_FRAMEBUFFER,[Q])}}}function vt(et){return Math.min(v.maxSamples,et.samples)}function Tt(et){const Q=n.get(et);return et.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function ut(et){const Q=s.render.frame;m.get(et)!==Q&&(m.set(et,Q),et.update())}function Bt(et,Q){const lt=et.colorSpace,pt=et.format,Mt=et.type;return et.isCompressedTexture===!0||et.isVideoTexture===!0||lt!==Gc&&lt!==Xo&&(ci.getTransfer(lt)===Ci?(pt!==Ur||Mt!==uo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",lt)),Q}function Pt(et){return typeof HTMLImageElement<"u"&&et instanceof HTMLImageElement?(a.width=et.naturalWidth||et.width,a.height=et.naturalHeight||et.height):typeof VideoFrame<"u"&&et instanceof VideoFrame?(a.width=et.displayWidth,a.height=et.displayHeight):(a.width=et.width,a.height=et.height),a}this.allocateTextureUnit=b,this.resetTextureUnits=P,this.setTexture2D=I,this.setTexture2DArray=L,this.setTexture3D=D,this.setTextureCube=O,this.rebindTextures=j,this.setupRenderTarget=Z,this.updateRenderTargetMipmap=it,this.updateMultisampleRenderTarget=ft,this.setupDepthRenderbuffer=$,this.setupFrameBufferTexture=H,this.useMultisampledRTT=Tt}function IB(f,t){function i(n,v=Xo){let S;const s=ci.getTransfer(v);if(n===uo)return f.UNSIGNED_BYTE;if(n===xT)return f.UNSIGNED_SHORT_4_4_4_4;if(n===yT)return f.UNSIGNED_SHORT_5_5_5_1;if(n===lR)return f.UNSIGNED_INT_5_9_9_9_REV;if(n===aR)return f.BYTE;if(n===oR)return f.SHORT;if(n===np)return f.UNSIGNED_SHORT;if(n===gT)return f.INT;if(n===Hh)return f.UNSIGNED_INT;if(n===Ja)return f.FLOAT;if(n===Bp)return f.HALF_FLOAT;if(n===hR)return f.ALPHA;if(n===uR)return f.RGB;if(n===Ur)return f.RGBA;if(n===cR)return f.LUMINANCE;if(n===fR)return f.LUMINANCE_ALPHA;if(n===uc)return f.DEPTH_COMPONENT;if(n===zc)return f.DEPTH_STENCIL;if(n===dR)return f.RED;if(n===TT)return f.RED_INTEGER;if(n===pR)return f.RG;if(n===ET)return f.RG_INTEGER;if(n===ST)return f.RGBA_INTEGER;if(n===Cm||n===Mm||n===Rm||n===Pm)if(s===Ci)if(S=t.get("WEBGL_compressed_texture_s3tc_srgb"),S!==null){if(n===Cm)return S.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Mm)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Rm)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Pm)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(S=t.get("WEBGL_compressed_texture_s3tc"),S!==null){if(n===Cm)return S.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Mm)return S.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Rm)return S.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Pm)return S.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Ly||n===Fy||n===Dy||n===Oy)if(S=t.get("WEBGL_compressed_texture_pvrtc"),S!==null){if(n===Ly)return S.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Fy)return S.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Dy)return S.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Oy)return S.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Ny||n===By||n===Uy)if(S=t.get("WEBGL_compressed_texture_etc"),S!==null){if(n===Ny||n===By)return s===Ci?S.COMPRESSED_SRGB8_ETC2:S.COMPRESSED_RGB8_ETC2;if(n===Uy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:S.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Vy||n===zy||n===Gy||n===_y||n===Wy||n===Hy||n===Xy||n===ky||n===Yy||n===$y||n===Ky||n===jy||n===Qy||n===Zy)if(S=t.get("WEBGL_compressed_texture_astc"),S!==null){if(n===Vy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:S.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===zy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:S.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Gy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:S.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===_y)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:S.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Wy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:S.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Hy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:S.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Xy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:S.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ky)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:S.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Yy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:S.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===$y)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:S.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Ky)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:S.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===jy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:S.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Qy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:S.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Zy)return s===Ci?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:S.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===bm||n===Jy||n===qy)if(S=t.get("EXT_texture_compression_bptc"),S!==null){if(n===bm)return s===Ci?S.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:S.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Jy)return S.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===qy)return S.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===vR||n===t1||n===e1||n===i1)if(S=t.get("EXT_texture_compression_rgtc"),S!==null){if(n===bm)return S.COMPRESSED_RED_RGTC1_EXT;if(n===t1)return S.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===e1)return S.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===i1)return S.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Vc?f.UNSIGNED_INT_24_8:f[n]!==void 0?f[n]:null}return{convert:i}}const LB=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,FB=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class DB{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,i,n){if(this.texture===null){const v=new Rs,S=t.properties.get(v);S.__webglTexture=i.texture,(i.depthNear!==n.depthNear||i.depthFar!==n.depthFar)&&(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=v}}getMesh(t){if(this.texture!==null&&this.mesh===null){const i=t.cameras[0].viewport,n=new gl({vertexShader:LB,fragmentShader:FB,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Es(new kg(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class OB extends Tf{constructor(t,i){super();const n=this;let v=null,S=1,s=null,T="local-floor",e=1,a=null,m=null,c=null,o=null,u=null,r=null;const h=new DB,d=i.getContextAttributes();let l=null,p=null;const g=[],x=[],y=new ai;let E=null;const w=new Hs;w.viewport=new Mi;const C=new Hs;C.viewport=new Mi;const A=[w,C],M=new iN;let R=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let N=g[G];return N===void 0&&(N=new ax,g[G]=N),N.getTargetRaySpace()},this.getControllerGrip=function(G){let N=g[G];return N===void 0&&(N=new ax,g[G]=N),N.getGripSpace()},this.getHand=function(G){let N=g[G];return N===void 0&&(N=new ax,g[G]=N),N.getHandSpace()};function b(G){const N=x.indexOf(G.inputSource);if(N===-1)return;const H=g[N];H!==void 0&&(H.update(G.inputSource,G.frame,a||s),H.dispatchEvent({type:G.type,data:G.inputSource}))}function F(){v.removeEventListener("select",b),v.removeEventListener("selectstart",b),v.removeEventListener("selectend",b),v.removeEventListener("squeeze",b),v.removeEventListener("squeezestart",b),v.removeEventListener("squeezeend",b),v.removeEventListener("end",F),v.removeEventListener("inputsourceschange",I);for(let G=0;G<g.length;G++){const N=x[G];N!==null&&(x[G]=null,g[G].disconnect(N))}R=null,P=null,h.reset(),t.setRenderTarget(l),u=null,o=null,c=null,v=null,p=null,V.stop(),n.isPresenting=!1,t.setPixelRatio(E),t.setSize(y.width,y.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){S=G,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){T=G,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||s},this.setReferenceSpace=function(G){a=G},this.getBaseLayer=function(){return o!==null?o:u},this.getBinding=function(){return c},this.getFrame=function(){return r},this.getSession=function(){return v},this.setSession=async function(G){if(v=G,v!==null){if(l=t.getRenderTarget(),v.addEventListener("select",b),v.addEventListener("selectstart",b),v.addEventListener("selectend",b),v.addEventListener("squeeze",b),v.addEventListener("squeezestart",b),v.addEventListener("squeezeend",b),v.addEventListener("end",F),v.addEventListener("inputsourceschange",I),d.xrCompatible!==!0&&await i.makeXRCompatible(),E=t.getPixelRatio(),t.getSize(y),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let H=null,U=null,_=null;d.depth&&(_=d.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,H=d.stencil?zc:uc,U=d.stencil?Vc:Hh);const $={colorFormat:i.RGBA8,depthFormat:_,scaleFactor:S};c=new XRWebGLBinding(v,i),o=c.createProjectionLayer($),v.updateRenderState({layers:[o]}),t.setPixelRatio(1),t.setSize(o.textureWidth,o.textureHeight,!1),p=new Xh(o.textureWidth,o.textureHeight,{format:Ur,type:uo,depthTexture:new bR(o.textureWidth,o.textureHeight,U,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:d.stencil,colorSpace:t.outputColorSpace,samples:d.antialias?4:0,resolveDepthBuffer:o.ignoreDepthValues===!1})}else{const H={antialias:d.antialias,alpha:!0,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:S};u=new XRWebGLLayer(v,i,H),v.updateRenderState({baseLayer:u}),t.setPixelRatio(1),t.setSize(u.framebufferWidth,u.framebufferHeight,!1),p=new Xh(u.framebufferWidth,u.framebufferHeight,{format:Ur,type:uo,colorSpace:t.outputColorSpace,stencilBuffer:d.stencil})}p.isXRRenderTarget=!0,this.setFoveation(e),a=null,s=await v.requestReferenceSpace(T),V.setContext(v),V.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(v!==null)return v.environmentBlendMode},this.getDepthTexture=function(){return h.getDepthTexture()};function I(G){for(let N=0;N<G.removed.length;N++){const H=G.removed[N],U=x.indexOf(H);U>=0&&(x[U]=null,g[U].disconnect(H))}for(let N=0;N<G.added.length;N++){const H=G.added[N];let U=x.indexOf(H);if(U===-1){for(let $=0;$<g.length;$++)if($>=x.length){x.push(H),U=$;break}else if(x[$]===null){x[$]=H,U=$;break}if(U===-1)break}const _=g[U];_&&_.connect(H)}}const L=new St,D=new St;function O(G,N,H){L.setFromMatrixPosition(N.matrixWorld),D.setFromMatrixPosition(H.matrixWorld);const U=L.distanceTo(D),_=N.projectionMatrix.elements,$=H.projectionMatrix.elements,j=_[14]/(_[10]-1),Z=_[14]/(_[10]+1),it=(_[9]+1)/_[5],at=(_[9]-1)/_[5],q=(_[8]-1)/_[0],ft=($[8]+1)/$[0],vt=j*q,Tt=j*ft,ut=U/(-q+ft),Bt=ut*-q;if(N.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(Bt),G.translateZ(ut),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert(),_[10]===-1)G.projectionMatrix.copy(N.projectionMatrix),G.projectionMatrixInverse.copy(N.projectionMatrixInverse);else{const Pt=j+ut,et=Z+ut,Q=vt-Bt,lt=Tt+(U-Bt),pt=it*Z/et*Pt,Mt=at*Z/et*Pt;G.projectionMatrix.makePerspective(Q,lt,pt,Mt,Pt,et),G.projectionMatrixInverse.copy(G.projectionMatrix).invert()}}function z(G,N){N===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(N.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(v===null)return;let N=G.near,H=G.far;h.texture!==null&&(h.depthNear>0&&(N=h.depthNear),h.depthFar>0&&(H=h.depthFar)),M.near=C.near=w.near=N,M.far=C.far=w.far=H,(R!==M.near||P!==M.far)&&(v.updateRenderState({depthNear:M.near,depthFar:M.far}),R=M.near,P=M.far),w.layers.mask=G.layers.mask|2,C.layers.mask=G.layers.mask|4,M.layers.mask=w.layers.mask|C.layers.mask;const U=G.parent,_=M.cameras;z(M,U);for(let $=0;$<_.length;$++)z(_[$],U);_.length===2?O(M,w,C):M.projectionMatrix.copy(w.projectionMatrix),W(G,M,U)};function W(G,N,H){H===null?G.matrix.copy(N.matrixWorld):(G.matrix.copy(H.matrixWorld),G.matrix.invert(),G.matrix.multiply(N.matrixWorld)),G.matrix.decompose(G.position,G.quaternion,G.scale),G.updateMatrixWorld(!0),G.projectionMatrix.copy(N.projectionMatrix),G.projectionMatrixInverse.copy(N.projectionMatrixInverse),G.isPerspectiveCamera&&(G.fov=n1*2*Math.atan(1/G.projectionMatrix.elements[5]),G.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(o===null&&u===null))return e},this.setFoveation=function(G){e=G,o!==null&&(o.fixedFoveation=G),u!==null&&u.fixedFoveation!==void 0&&(u.fixedFoveation=G)},this.hasDepthSensing=function(){return h.texture!==null},this.getDepthSensingMesh=function(){return h.getMesh(M)};let k=null;function X(G,N){if(m=N.getViewerPose(a||s),r=N,m!==null){const H=m.views;u!==null&&(t.setRenderTargetFramebuffer(p,u.framebuffer),t.setRenderTarget(p));let U=!1;H.length!==M.cameras.length&&(M.cameras.length=0,U=!0);for(let j=0;j<H.length;j++){const Z=H[j];let it=null;if(u!==null)it=u.getViewport(Z);else{const q=c.getViewSubImage(o,Z);it=q.viewport,j===0&&(t.setRenderTargetTextures(p,q.colorTexture,o.ignoreDepthValues?void 0:q.depthStencilTexture),t.setRenderTarget(p))}let at=A[j];at===void 0&&(at=new Hs,at.layers.enable(j),at.viewport=new Mi,A[j]=at),at.matrix.fromArray(Z.transform.matrix),at.matrix.decompose(at.position,at.quaternion,at.scale),at.projectionMatrix.fromArray(Z.projectionMatrix),at.projectionMatrixInverse.copy(at.projectionMatrix).invert(),at.viewport.set(it.x,it.y,it.width,it.height),j===0&&(M.matrix.copy(at.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),U===!0&&M.cameras.push(at)}const _=v.enabledFeatures;if(_&&_.includes("depth-sensing")&&v.depthUsage=="gpu-optimized"&&c){const j=c.getDepthInformation(H[0]);j&&j.isValid&&j.texture&&h.init(t,j,v.renderState)}}for(let H=0;H<g.length;H++){const U=x[H],_=g[H];U!==null&&_!==void 0&&_.update(U,N,a||s)}k&&k(G,N),N.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:N}),r=null}const V=new FR;V.setAnimationLoop(X),this.setAnimationLoop=function(G){k=G},this.dispose=function(){}}}const Jl=new Ca,NB=new ji;function BB(f,t){function i(d,l){d.matrixAutoUpdate===!0&&d.updateMatrix(),l.value.copy(d.matrix)}function n(d,l){l.color.getRGB(d.fogColor.value,MR(f)),l.isFog?(d.fogNear.value=l.near,d.fogFar.value=l.far):l.isFogExp2&&(d.fogDensity.value=l.density)}function v(d,l,p,g,x){l.isMeshBasicMaterial||l.isMeshLambertMaterial?S(d,l):l.isMeshToonMaterial?(S(d,l),c(d,l)):l.isMeshPhongMaterial?(S(d,l),m(d,l)):l.isMeshStandardMaterial?(S(d,l),o(d,l),l.isMeshPhysicalMaterial&&u(d,l,x)):l.isMeshMatcapMaterial?(S(d,l),r(d,l)):l.isMeshDepthMaterial?S(d,l):l.isMeshDistanceMaterial?(S(d,l),h(d,l)):l.isMeshNormalMaterial?S(d,l):l.isLineBasicMaterial?(s(d,l),l.isLineDashedMaterial&&T(d,l)):l.isPointsMaterial?e(d,l,p,g):l.isSpriteMaterial?a(d,l):l.isShadowMaterial?(d.color.value.copy(l.color),d.opacity.value=l.opacity):l.isShaderMaterial&&(l.uniformsNeedUpdate=!1)}function S(d,l){d.opacity.value=l.opacity,l.color&&d.diffuse.value.copy(l.color),l.emissive&&d.emissive.value.copy(l.emissive).multiplyScalar(l.emissiveIntensity),l.map&&(d.map.value=l.map,i(l.map,d.mapTransform)),l.alphaMap&&(d.alphaMap.value=l.alphaMap,i(l.alphaMap,d.alphaMapTransform)),l.bumpMap&&(d.bumpMap.value=l.bumpMap,i(l.bumpMap,d.bumpMapTransform),d.bumpScale.value=l.bumpScale,l.side===Ms&&(d.bumpScale.value*=-1)),l.normalMap&&(d.normalMap.value=l.normalMap,i(l.normalMap,d.normalMapTransform),d.normalScale.value.copy(l.normalScale),l.side===Ms&&d.normalScale.value.negate()),l.displacementMap&&(d.displacementMap.value=l.displacementMap,i(l.displacementMap,d.displacementMapTransform),d.displacementScale.value=l.displacementScale,d.displacementBias.value=l.displacementBias),l.emissiveMap&&(d.emissiveMap.value=l.emissiveMap,i(l.emissiveMap,d.emissiveMapTransform)),l.specularMap&&(d.specularMap.value=l.specularMap,i(l.specularMap,d.specularMapTransform)),l.alphaTest>0&&(d.alphaTest.value=l.alphaTest);const p=t.get(l),g=p.envMap,x=p.envMapRotation;g&&(d.envMap.value=g,Jl.copy(x),Jl.x*=-1,Jl.y*=-1,Jl.z*=-1,g.isCubeTexture&&g.isRenderTargetTexture===!1&&(Jl.y*=-1,Jl.z*=-1),d.envMapRotation.value.setFromMatrix4(NB.makeRotationFromEuler(Jl)),d.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,d.reflectivity.value=l.reflectivity,d.ior.value=l.ior,d.refractionRatio.value=l.refractionRatio),l.lightMap&&(d.lightMap.value=l.lightMap,d.lightMapIntensity.value=l.lightMapIntensity,i(l.lightMap,d.lightMapTransform)),l.aoMap&&(d.aoMap.value=l.aoMap,d.aoMapIntensity.value=l.aoMapIntensity,i(l.aoMap,d.aoMapTransform))}function s(d,l){d.diffuse.value.copy(l.color),d.opacity.value=l.opacity,l.map&&(d.map.value=l.map,i(l.map,d.mapTransform))}function T(d,l){d.dashSize.value=l.dashSize,d.totalSize.value=l.dashSize+l.gapSize,d.scale.value=l.scale}function e(d,l,p,g){d.diffuse.value.copy(l.color),d.opacity.value=l.opacity,d.size.value=l.size*p,d.scale.value=g*.5,l.map&&(d.map.value=l.map,i(l.map,d.uvTransform)),l.alphaMap&&(d.alphaMap.value=l.alphaMap,i(l.alphaMap,d.alphaMapTransform)),l.alphaTest>0&&(d.alphaTest.value=l.alphaTest)}function a(d,l){d.diffuse.value.copy(l.color),d.opacity.value=l.opacity,d.rotation.value=l.rotation,l.map&&(d.map.value=l.map,i(l.map,d.mapTransform)),l.alphaMap&&(d.alphaMap.value=l.alphaMap,i(l.alphaMap,d.alphaMapTransform)),l.alphaTest>0&&(d.alphaTest.value=l.alphaTest)}function m(d,l){d.specular.value.copy(l.specular),d.shininess.value=Math.max(l.shininess,1e-4)}function c(d,l){l.gradientMap&&(d.gradientMap.value=l.gradientMap)}function o(d,l){d.metalness.value=l.metalness,l.metalnessMap&&(d.metalnessMap.value=l.metalnessMap,i(l.metalnessMap,d.metalnessMapTransform)),d.roughness.value=l.roughness,l.roughnessMap&&(d.roughnessMap.value=l.roughnessMap,i(l.roughnessMap,d.roughnessMapTransform)),l.envMap&&(d.envMapIntensity.value=l.envMapIntensity)}function u(d,l,p){d.ior.value=l.ior,l.sheen>0&&(d.sheenColor.value.copy(l.sheenColor).multiplyScalar(l.sheen),d.sheenRoughness.value=l.sheenRoughness,l.sheenColorMap&&(d.sheenColorMap.value=l.sheenColorMap,i(l.sheenColorMap,d.sheenColorMapTransform)),l.sheenRoughnessMap&&(d.sheenRoughnessMap.value=l.sheenRoughnessMap,i(l.sheenRoughnessMap,d.sheenRoughnessMapTransform))),l.clearcoat>0&&(d.clearcoat.value=l.clearcoat,d.clearcoatRoughness.value=l.clearcoatRoughness,l.clearcoatMap&&(d.clearcoatMap.value=l.clearcoatMap,i(l.clearcoatMap,d.clearcoatMapTransform)),l.clearcoatRoughnessMap&&(d.clearcoatRoughnessMap.value=l.clearcoatRoughnessMap,i(l.clearcoatRoughnessMap,d.clearcoatRoughnessMapTransform)),l.clearcoatNormalMap&&(d.clearcoatNormalMap.value=l.clearcoatNormalMap,i(l.clearcoatNormalMap,d.clearcoatNormalMapTransform),d.clearcoatNormalScale.value.copy(l.clearcoatNormalScale),l.side===Ms&&d.clearcoatNormalScale.value.negate())),l.dispersion>0&&(d.dispersion.value=l.dispersion),l.iridescence>0&&(d.iridescence.value=l.iridescence,d.iridescenceIOR.value=l.iridescenceIOR,d.iridescenceThicknessMinimum.value=l.iridescenceThicknessRange[0],d.iridescenceThicknessMaximum.value=l.iridescenceThicknessRange[1],l.iridescenceMap&&(d.iridescenceMap.value=l.iridescenceMap,i(l.iridescenceMap,d.iridescenceMapTransform)),l.iridescenceThicknessMap&&(d.iridescenceThicknessMap.value=l.iridescenceThicknessMap,i(l.iridescenceThicknessMap,d.iridescenceThicknessMapTransform))),l.transmission>0&&(d.transmission.value=l.transmission,d.transmissionSamplerMap.value=p.texture,d.transmissionSamplerSize.value.set(p.width,p.height),l.transmissionMap&&(d.transmissionMap.value=l.transmissionMap,i(l.transmissionMap,d.transmissionMapTransform)),d.thickness.value=l.thickness,l.thicknessMap&&(d.thicknessMap.value=l.thicknessMap,i(l.thicknessMap,d.thicknessMapTransform)),d.attenuationDistance.value=l.attenuationDistance,d.attenuationColor.value.copy(l.attenuationColor)),l.anisotropy>0&&(d.anisotropyVector.value.set(l.anisotropy*Math.cos(l.anisotropyRotation),l.anisotropy*Math.sin(l.anisotropyRotation)),l.anisotropyMap&&(d.anisotropyMap.value=l.anisotropyMap,i(l.anisotropyMap,d.anisotropyMapTransform))),d.specularIntensity.value=l.specularIntensity,d.specularColor.value.copy(l.specularColor),l.specularColorMap&&(d.specularColorMap.value=l.specularColorMap,i(l.specularColorMap,d.specularColorMapTransform)),l.specularIntensityMap&&(d.specularIntensityMap.value=l.specularIntensityMap,i(l.specularIntensityMap,d.specularIntensityMapTransform))}function r(d,l){l.matcap&&(d.matcap.value=l.matcap)}function h(d,l){const p=t.get(l).light;d.referencePosition.value.setFromMatrixPosition(p.matrixWorld),d.nearDistance.value=p.shadow.camera.near,d.farDistance.value=p.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:v}}function UB(f,t,i,n){let v={},S={},s=[];const T=f.getParameter(f.MAX_UNIFORM_BUFFER_BINDINGS);function e(p,g){const x=g.program;n.uniformBlockBinding(p,x)}function a(p,g){let x=v[p.id];x===void 0&&(r(p),x=m(p),v[p.id]=x,p.addEventListener("dispose",d));const y=g.program;n.updateUBOMapping(p,y);const E=t.render.frame;S[p.id]!==E&&(o(p),S[p.id]=E)}function m(p){const g=c();p.__bindingPointIndex=g;const x=f.createBuffer(),y=p.__size,E=p.usage;return f.bindBuffer(f.UNIFORM_BUFFER,x),f.bufferData(f.UNIFORM_BUFFER,y,E),f.bindBuffer(f.UNIFORM_BUFFER,null),f.bindBufferBase(f.UNIFORM_BUFFER,g,x),x}function c(){for(let p=0;p<T;p++)if(s.indexOf(p)===-1)return s.push(p),p;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function o(p){const g=v[p.id],x=p.uniforms,y=p.__cache;f.bindBuffer(f.UNIFORM_BUFFER,g);for(let E=0,w=x.length;E<w;E++){const C=Array.isArray(x[E])?x[E]:[x[E]];for(let A=0,M=C.length;A<M;A++){const R=C[A];if(u(R,E,A,y)===!0){const P=R.__offset,b=Array.isArray(R.value)?R.value:[R.value];let F=0;for(let I=0;I<b.length;I++){const L=b[I],D=h(L);typeof L=="number"||typeof L=="boolean"?(R.__data[0]=L,f.bufferSubData(f.UNIFORM_BUFFER,P+F,R.__data)):L.isMatrix3?(R.__data[0]=L.elements[0],R.__data[1]=L.elements[1],R.__data[2]=L.elements[2],R.__data[3]=0,R.__data[4]=L.elements[3],R.__data[5]=L.elements[4],R.__data[6]=L.elements[5],R.__data[7]=0,R.__data[8]=L.elements[6],R.__data[9]=L.elements[7],R.__data[10]=L.elements[8],R.__data[11]=0):(L.toArray(R.__data,F),F+=D.storage/Float32Array.BYTES_PER_ELEMENT)}f.bufferSubData(f.UNIFORM_BUFFER,P,R.__data)}}}f.bindBuffer(f.UNIFORM_BUFFER,null)}function u(p,g,x,y){const E=p.value,w=g+"_"+x;if(y[w]===void 0)return typeof E=="number"||typeof E=="boolean"?y[w]=E:y[w]=E.clone(),!0;{const C=y[w];if(typeof E=="number"||typeof E=="boolean"){if(C!==E)return y[w]=E,!0}else if(C.equals(E)===!1)return C.copy(E),!0}return!1}function r(p){const g=p.uniforms;let x=0;const y=16;for(let w=0,C=g.length;w<C;w++){const A=Array.isArray(g[w])?g[w]:[g[w]];for(let M=0,R=A.length;M<R;M++){const P=A[M],b=Array.isArray(P.value)?P.value:[P.value];for(let F=0,I=b.length;F<I;F++){const L=b[F],D=h(L),O=x%y,z=O%D.boundary,W=O+z;x+=z,W!==0&&y-W<D.storage&&(x+=y-W),P.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=x,x+=D.storage}}}const E=x%y;return E>0&&(x+=y-E),p.__size=x,p.__cache={},this}function h(p){const g={boundary:0,storage:0};return typeof p=="number"||typeof p=="boolean"?(g.boundary=4,g.storage=4):p.isVector2?(g.boundary=8,g.storage=8):p.isVector3||p.isColor?(g.boundary=16,g.storage=12):p.isVector4?(g.boundary=16,g.storage=16):p.isMatrix3?(g.boundary=48,g.storage=48):p.isMatrix4?(g.boundary=64,g.storage=64):p.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",p),g}function d(p){const g=p.target;g.removeEventListener("dispose",d);const x=s.indexOf(g.__bindingPointIndex);s.splice(x,1),f.deleteBuffer(v[g.id]),delete v[g.id],delete S[g.id]}function l(){for(const p in v)f.deleteBuffer(v[p]);s=[],v={},S={}}return{bind:e,update:a,dispose:l}}class VB{constructor(t={}){const{canvas:i=g5(),context:n=null,depth:v=!0,stencil:S=!1,alpha:s=!1,antialias:T=!1,premultipliedAlpha:e=!0,preserveDrawingBuffer:a=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:c=!1,reverseDepthBuffer:o=!1}=t;this.isWebGLRenderer=!0;let u;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");u=n.getContextAttributes().alpha}else u=s;const r=new Uint32Array(4),h=new Int32Array(4);let d=null,l=null;const p=[],g=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=cr,this.toneMapping=ll,this.toneMappingExposure=1;const x=this;let y=!1,E=0,w=0,C=null,A=-1,M=null;const R=new Mi,P=new Mi;let b=null;const F=new vi(0);let I=0,L=i.width,D=i.height,O=1,z=null,W=null;const k=new Mi(0,0,L,D),X=new Mi(0,0,L,D);let V=!1;const G=new AT;let N=!1,H=!1;this.transmissionResolutionScale=1;const U=new ji,_=new ji,$=new St,j=new Mi,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let it=!1;function at(){return C===null?O:1}let q=n;function ft(nt,mt){return i.getContext(nt,mt)}try{const nt={alpha:!0,depth:v,stencil:S,antialias:T,premultipliedAlpha:e,preserveDrawingBuffer:a,powerPreference:m,failIfMajorPerformanceCaveat:c};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${mT}`),i.addEventListener("webglcontextlost",Vt,!1),i.addEventListener("webglcontextrestored",le,!1),i.addEventListener("webglcontextcreationerror",se,!1),q===null){const mt="webgl2";if(q=ft(mt,nt),q===null)throw ft(mt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(nt){throw console.error("THREE.WebGLRenderer: "+nt.message),nt}let vt,Tt,ut,Bt,Pt,et,Q,lt,pt,Mt,Ct,Kt,Ut,Wt,ae,zt,Ht,At,ne,jt,ve,we,De,dt;function Qt(){vt=new K6(q),vt.init(),we=new IB(q,vt),Tt=new W6(q,vt,t,we),ut=new PB(q,vt),Tt.reverseDepthBuffer&&o&&ut.buffers.depth.setReversed(!0),Bt=new Z6(q),Pt=new vB,et=new bB(q,vt,ut,Pt,Tt,we,Bt),Q=new X6(x),lt=new $6(x),pt=new sN(q),De=new G6(q,pt),Mt=new j6(q,pt,Bt,De),Ct=new q6(q,Mt,pt,Bt),ne=new J6(q,Tt,et),zt=new H6(Pt),Kt=new pB(x,Q,lt,vt,Tt,De,zt),Ut=new BB(x,Pt),Wt=new gB,ae=new wB(vt),At=new z6(x,Q,lt,ut,Ct,u,e),Ht=new MB(x,Ct,Tt),dt=new UB(q,Bt,Tt,ut),jt=new _6(q,vt,Bt),ve=new Q6(q,vt,Bt),Bt.programs=Kt.programs,x.capabilities=Tt,x.extensions=vt,x.properties=Pt,x.renderLists=Wt,x.shadowMap=Ht,x.state=ut,x.info=Bt}Qt();const Ot=new OB(x,q);this.xr=Ot,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const nt=vt.get("WEBGL_lose_context");nt&&nt.loseContext()},this.forceContextRestore=function(){const nt=vt.get("WEBGL_lose_context");nt&&nt.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(nt){nt!==void 0&&(O=nt,this.setSize(L,D,!1))},this.getSize=function(nt){return nt.set(L,D)},this.setSize=function(nt,mt,bt=!0){if(Ot.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=nt,D=mt,i.width=Math.floor(nt*O),i.height=Math.floor(mt*O),bt===!0&&(i.style.width=nt+"px",i.style.height=mt+"px"),this.setViewport(0,0,nt,mt)},this.getDrawingBufferSize=function(nt){return nt.set(L*O,D*O).floor()},this.setDrawingBufferSize=function(nt,mt,bt){L=nt,D=mt,O=bt,i.width=Math.floor(nt*bt),i.height=Math.floor(mt*bt),this.setViewport(0,0,nt,mt)},this.getCurrentViewport=function(nt){return nt.copy(R)},this.getViewport=function(nt){return nt.copy(k)},this.setViewport=function(nt,mt,bt,Lt){nt.isVector4?k.set(nt.x,nt.y,nt.z,nt.w):k.set(nt,mt,bt,Lt),ut.viewport(R.copy(k).multiplyScalar(O).round())},this.getScissor=function(nt){return nt.copy(X)},this.setScissor=function(nt,mt,bt,Lt){nt.isVector4?X.set(nt.x,nt.y,nt.z,nt.w):X.set(nt,mt,bt,Lt),ut.scissor(P.copy(X).multiplyScalar(O).round())},this.getScissorTest=function(){return V},this.setScissorTest=function(nt){ut.setScissorTest(V=nt)},this.setOpaqueSort=function(nt){z=nt},this.setTransparentSort=function(nt){W=nt},this.getClearColor=function(nt){return nt.copy(At.getClearColor())},this.setClearColor=function(){At.setClearColor.apply(At,arguments)},this.getClearAlpha=function(){return At.getClearAlpha()},this.setClearAlpha=function(){At.setClearAlpha.apply(At,arguments)},this.clear=function(nt=!0,mt=!0,bt=!0){let Lt=0;if(nt){let xt=!1;if(C!==null){const Yt=C.texture.format;xt=Yt===ST||Yt===ET||Yt===TT}if(xt){const Yt=C.texture.type,oe=Yt===uo||Yt===Hh||Yt===np||Yt===Vc||Yt===xT||Yt===yT,ue=At.getClearColor(),fe=At.getClearAlpha(),Ce=ue.r,be=ue.g,Ee=ue.b;oe?(r[0]=Ce,r[1]=be,r[2]=Ee,r[3]=fe,q.clearBufferuiv(q.COLOR,0,r)):(h[0]=Ce,h[1]=be,h[2]=Ee,h[3]=fe,q.clearBufferiv(q.COLOR,0,h))}else Lt|=q.COLOR_BUFFER_BIT}mt&&(Lt|=q.DEPTH_BUFFER_BIT),bt&&(Lt|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(Lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",Vt,!1),i.removeEventListener("webglcontextrestored",le,!1),i.removeEventListener("webglcontextcreationerror",se,!1),At.dispose(),Wt.dispose(),ae.dispose(),Pt.dispose(),Q.dispose(),lt.dispose(),Ct.dispose(),De.dispose(),dt.dispose(),Kt.dispose(),Ot.dispose(),Ot.removeEventListener("sessionstart",hn),Ot.removeEventListener("sessionend",Ke),sr.stop()};function Vt(nt){nt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function le(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const nt=Bt.autoReset,mt=Ht.enabled,bt=Ht.autoUpdate,Lt=Ht.needsUpdate,xt=Ht.type;Qt(),Bt.autoReset=nt,Ht.enabled=mt,Ht.autoUpdate=bt,Ht.needsUpdate=Lt,Ht.type=xt}function se(nt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",nt.statusMessage)}function Re(nt){const mt=nt.target;mt.removeEventListener("dispose",Re),yi(mt)}function yi(nt){ln(nt),Pt.remove(nt)}function ln(nt){const mt=Pt.get(nt).programs;mt!==void 0&&(mt.forEach(function(bt){Kt.releaseProgram(bt)}),nt.isShaderMaterial&&Kt.releaseShaderCache(nt))}this.renderBufferDirect=function(nt,mt,bt,Lt,xt,Yt){mt===null&&(mt=Z);const oe=xt.isMesh&&xt.matrixWorld.determinant()<0,ue=gu(nt,mt,bt,Lt,xt);ut.setMaterial(Lt,oe);let fe=bt.index,Ce=1;if(Lt.wireframe===!0){if(fe=Mt.getWireframeAttribute(bt),fe===void 0)return;Ce=2}const be=bt.drawRange,Ee=bt.attributes.position;let Xe=be.start*Ce,ni=(be.start+be.count)*Ce;Yt!==null&&(Xe=Math.max(Xe,Yt.start*Ce),ni=Math.min(ni,(Yt.start+Yt.count)*Ce)),fe!==null?(Xe=Math.max(Xe,0),ni=Math.min(ni,fe.count)):Ee!=null&&(Xe=Math.max(Xe,0),ni=Math.min(ni,Ee.count));const fi=ni-Xe;if(fi<0||fi===1/0)return;De.setup(xt,Lt,ue,bt,fe);let Je,ze=jt;if(fe!==null&&(Je=pt.get(fe),ze=ve,ze.setIndex(Je)),xt.isMesh)Lt.wireframe===!0?(ut.setLineWidth(Lt.wireframeLinewidth*at()),ze.setMode(q.LINES)):ze.setMode(q.TRIANGLES);else if(xt.isLine){let xe=Lt.linewidth;xe===void 0&&(xe=1),ut.setLineWidth(xe*at()),xt.isLineSegments?ze.setMode(q.LINES):xt.isLineLoop?ze.setMode(q.LINE_LOOP):ze.setMode(q.LINE_STRIP)}else xt.isPoints?ze.setMode(q.POINTS):xt.isSprite&&ze.setMode(q.TRIANGLES);if(xt.isBatchedMesh)if(xt._multiDrawInstances!==null)ze.renderMultiDrawInstances(xt._multiDrawStarts,xt._multiDrawCounts,xt._multiDrawCount,xt._multiDrawInstances);else if(vt.get("WEBGL_multi_draw"))ze.renderMultiDraw(xt._multiDrawStarts,xt._multiDrawCounts,xt._multiDrawCount);else{const xe=xt._multiDrawStarts,ki=xt._multiDrawCounts,ye=xt._multiDrawCount,In=fe?pt.get(fe).bytesPerElement:1,us=Pt.get(Lt).currentProgram.getUniforms();for(let Zi=0;Zi<ye;Zi++)us.setValue(q,"_gl_DrawID",Zi),ze.render(xe[Zi]/In,ki[Zi])}else if(xt.isInstancedMesh)ze.renderInstances(Xe,fi,xt.count);else if(bt.isInstancedBufferGeometry){const xe=bt._maxInstanceCount!==void 0?bt._maxInstanceCount:1/0,ki=Math.min(bt.instanceCount,xe);ze.renderInstances(Xe,fi,ki)}else ze.render(Xe,fi)};function Pe(nt,mt,bt){nt.transparent===!0&&nt.side===Qa&&nt.forceSinglePass===!1?(nt.side=Ms,nt.needsUpdate=!0,jr(nt,mt,bt),nt.side=ho,nt.needsUpdate=!0,jr(nt,mt,bt),nt.side=Qa):jr(nt,mt,bt)}this.compile=function(nt,mt,bt=null){bt===null&&(bt=nt),l=ae.get(bt),l.init(mt),g.push(l),bt.traverseVisible(function(xt){xt.isLight&&xt.layers.test(mt.layers)&&(l.pushLight(xt),xt.castShadow&&l.pushShadow(xt))}),nt!==bt&&nt.traverseVisible(function(xt){xt.isLight&&xt.layers.test(mt.layers)&&(l.pushLight(xt),xt.castShadow&&l.pushShadow(xt))}),l.setupLights();const Lt=new Set;return nt.traverse(function(xt){if(!(xt.isMesh||xt.isPoints||xt.isLine||xt.isSprite))return;const Yt=xt.material;if(Yt)if(Array.isArray(Yt))for(let oe=0;oe<Yt.length;oe++){const ue=Yt[oe];Pe(ue,bt,xt),Lt.add(ue)}else Pe(Yt,bt,xt),Lt.add(Yt)}),g.pop(),l=null,Lt},this.compileAsync=function(nt,mt,bt=null){const Lt=this.compile(nt,mt,bt);return new Promise(xt=>{function Yt(){if(Lt.forEach(function(oe){Pt.get(oe).currentProgram.isReady()&&Lt.delete(oe)}),Lt.size===0){xt(nt);return}setTimeout(Yt,10)}vt.get("KHR_parallel_shader_compile")!==null?Yt():setTimeout(Yt,10)})};let Pi=null;function zi(nt){Pi&&Pi(nt)}function hn(){sr.stop()}function Ke(){sr.start()}const sr=new FR;sr.setAnimationLoop(zi),typeof self<"u"&&sr.setContext(self),this.setAnimationLoop=function(nt){Pi=nt,Ot.setAnimationLoop(nt),nt===null?sr.stop():sr.start()},Ot.addEventListener("sessionstart",hn),Ot.addEventListener("sessionend",Ke),this.render=function(nt,mt){if(mt!==void 0&&mt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;if(nt.matrixWorldAutoUpdate===!0&&nt.updateMatrixWorld(),mt.parent===null&&mt.matrixWorldAutoUpdate===!0&&mt.updateMatrixWorld(),Ot.enabled===!0&&Ot.isPresenting===!0&&(Ot.cameraAutoUpdate===!0&&Ot.updateCamera(mt),mt=Ot.getCamera()),nt.isScene===!0&&nt.onBeforeRender(x,nt,mt,C),l=ae.get(nt,g.length),l.init(mt),g.push(l),_.multiplyMatrices(mt.projectionMatrix,mt.matrixWorldInverse),G.setFromProjectionMatrix(_),H=this.localClippingEnabled,N=zt.init(this.clippingPlanes,H),d=Wt.get(nt,p.length),d.init(),p.push(d),Ot.enabled===!0&&Ot.isPresenting===!0){const Yt=x.xr.getDepthSensingMesh();Yt!==null&&Ia(Yt,mt,-1/0,x.sortObjects)}Ia(nt,mt,0,x.sortObjects),d.finish(),x.sortObjects===!0&&d.sort(z,W),it=Ot.enabled===!1||Ot.isPresenting===!1||Ot.hasDepthSensing()===!1,it&&At.addToRenderList(d,nt),this.info.render.frame++,N===!0&&zt.beginShadows();const bt=l.state.shadowsArray;Ht.render(bt,nt,mt),N===!0&&zt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Lt=d.opaque,xt=d.transmissive;if(l.setupLights(),mt.isArrayCamera){const Yt=mt.cameras;if(xt.length>0)for(let oe=0,ue=Yt.length;oe<ue;oe++){const fe=Yt[oe];mu(Lt,xt,nt,fe)}it&&At.render(nt);for(let oe=0,ue=Yt.length;oe<ue;oe++){const fe=Yt[oe];Kr(d,nt,fe,fe.viewport)}}else xt.length>0&&mu(Lt,xt,nt,mt),it&&At.render(nt),Kr(d,nt,mt);C!==null&&w===0&&(et.updateMultisampleRenderTarget(C),et.updateRenderTargetMipmap(C)),nt.isScene===!0&&nt.onAfterRender(x,nt,mt),De.resetDefaultState(),A=-1,M=null,g.pop(),g.length>0?(l=g[g.length-1],N===!0&&zt.setGlobalState(x.clippingPlanes,l.state.camera)):l=null,p.pop(),p.length>0?d=p[p.length-1]:d=null};function Ia(nt,mt,bt,Lt){if(nt.visible===!1)return;if(nt.layers.test(mt.layers)){if(nt.isGroup)bt=nt.renderOrder;else if(nt.isLOD)nt.autoUpdate===!0&&nt.update(mt);else if(nt.isLight)l.pushLight(nt),nt.castShadow&&l.pushShadow(nt);else if(nt.isSprite){if(!nt.frustumCulled||G.intersectsSprite(nt)){Lt&&j.setFromMatrixPosition(nt.matrixWorld).applyMatrix4(_);const oe=Ct.update(nt),ue=nt.material;ue.visible&&d.push(nt,oe,ue,bt,j.z,null)}}else if((nt.isMesh||nt.isLine||nt.isPoints)&&(!nt.frustumCulled||G.intersectsObject(nt))){const oe=Ct.update(nt),ue=nt.material;if(Lt&&(nt.boundingSphere!==void 0?(nt.boundingSphere===null&&nt.computeBoundingSphere(),j.copy(nt.boundingSphere.center)):(oe.boundingSphere===null&&oe.computeBoundingSphere(),j.copy(oe.boundingSphere.center)),j.applyMatrix4(nt.matrixWorld).applyMatrix4(_)),Array.isArray(ue)){const fe=oe.groups;for(let Ce=0,be=fe.length;Ce<be;Ce++){const Ee=fe[Ce],Xe=ue[Ee.materialIndex];Xe&&Xe.visible&&d.push(nt,oe,Xe,bt,j.z,Ee)}}else ue.visible&&d.push(nt,oe,ue,bt,j.z,null)}}const Yt=nt.children;for(let oe=0,ue=Yt.length;oe<ue;oe++)Ia(Yt[oe],mt,bt,Lt)}function Kr(nt,mt,bt,Lt){const xt=nt.opaque,Yt=nt.transmissive,oe=nt.transparent;l.setupLightsView(bt),N===!0&&zt.setGlobalState(x.clippingPlanes,bt),Lt&&ut.viewport(R.copy(Lt)),xt.length>0&&hs(xt,mt,bt),Yt.length>0&&hs(Yt,mt,bt),oe.length>0&&hs(oe,mt,bt),ut.buffers.depth.setTest(!0),ut.buffers.depth.setMask(!0),ut.buffers.color.setMask(!0),ut.setPolygonOffset(!1)}function mu(nt,mt,bt,Lt){if((bt.isScene===!0?bt.overrideMaterial:null)!==null)return;l.state.transmissionRenderTarget[Lt.id]===void 0&&(l.state.transmissionRenderTarget[Lt.id]=new Xh(1,1,{generateMipmaps:!0,type:vt.has("EXT_color_buffer_half_float")||vt.has("EXT_color_buffer_float")?Bp:uo,minFilter:Th,samples:4,stencilBuffer:S,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ci.workingColorSpace}));const Yt=l.state.transmissionRenderTarget[Lt.id],oe=Lt.viewport||R;Yt.setSize(oe.z*x.transmissionResolutionScale,oe.w*x.transmissionResolutionScale);const ue=x.getRenderTarget();x.setRenderTarget(Yt),x.getClearColor(F),I=x.getClearAlpha(),I<1&&x.setClearColor(16777215,.5),x.clear(),it&&At.render(bt);const fe=x.toneMapping;x.toneMapping=ll;const Ce=Lt.viewport;if(Lt.viewport!==void 0&&(Lt.viewport=void 0),l.setupLightsView(Lt),N===!0&&zt.setGlobalState(x.clippingPlanes,Lt),hs(nt,bt,Lt),et.updateMultisampleRenderTarget(Yt),et.updateRenderTargetMipmap(Yt),vt.has("WEBGL_multisampled_render_to_texture")===!1){let be=!1;for(let Ee=0,Xe=mt.length;Ee<Xe;Ee++){const ni=mt[Ee],fi=ni.object,Je=ni.geometry,ze=ni.material,xe=ni.group;if(ze.side===Qa&&fi.layers.test(Lt.layers)){const ki=ze.side;ze.side=Ms,ze.needsUpdate=!0,zl(fi,bt,Lt,Je,ze,xe),ze.side=ki,ze.needsUpdate=!0,be=!0}}be===!0&&(et.updateMultisampleRenderTarget(Yt),et.updateRenderTargetMipmap(Yt))}x.setRenderTarget(ue),x.setClearColor(F,I),Ce!==void 0&&(Lt.viewport=Ce),x.toneMapping=fe}function hs(nt,mt,bt){const Lt=mt.isScene===!0?mt.overrideMaterial:null;for(let xt=0,Yt=nt.length;xt<Yt;xt++){const oe=nt[xt],ue=oe.object,fe=oe.geometry,Ce=Lt===null?oe.material:Lt,be=oe.group;ue.layers.test(bt.layers)&&zl(ue,mt,bt,fe,Ce,be)}}function zl(nt,mt,bt,Lt,xt,Yt){nt.onBeforeRender(x,mt,bt,Lt,xt,Yt),nt.modelViewMatrix.multiplyMatrices(bt.matrixWorldInverse,nt.matrixWorld),nt.normalMatrix.getNormalMatrix(nt.modelViewMatrix),xt.onBeforeRender(x,mt,bt,Lt,nt,Yt),xt.transparent===!0&&xt.side===Qa&&xt.forceSinglePass===!1?(xt.side=Ms,xt.needsUpdate=!0,x.renderBufferDirect(bt,mt,Lt,xt,nt,Yt),xt.side=ho,xt.needsUpdate=!0,x.renderBufferDirect(bt,mt,Lt,xt,nt,Yt),xt.side=Qa):x.renderBufferDirect(bt,mt,Lt,xt,nt,Yt),nt.onAfterRender(x,mt,bt,Lt,xt,Yt)}function jr(nt,mt,bt){mt.isScene!==!0&&(mt=Z);const Lt=Pt.get(nt),xt=l.state.lights,Yt=l.state.shadowsArray,oe=xt.state.version,ue=Kt.getParameters(nt,xt.state,Yt,mt,bt),fe=Kt.getProgramCacheKey(ue);let Ce=Lt.programs;Lt.environment=nt.isMeshStandardMaterial?mt.environment:null,Lt.fog=mt.fog,Lt.envMap=(nt.isMeshStandardMaterial?lt:Q).get(nt.envMap||Lt.environment),Lt.envMapRotation=Lt.environment!==null&&nt.envMap===null?mt.environmentRotation:nt.envMapRotation,Ce===void 0&&(nt.addEventListener("dispose",Re),Ce=new Map,Lt.programs=Ce);let be=Ce.get(fe);if(be!==void 0){if(Lt.currentProgram===be&&Lt.lightsStateVersion===oe)return Qr(nt,ue),be}else ue.uniforms=Kt.getUniforms(nt),nt.onBeforeCompile(ue,x),be=Kt.acquireProgram(ue,fe),Ce.set(fe,be),Lt.uniforms=ue.uniforms;const Ee=Lt.uniforms;return(!nt.isShaderMaterial&&!nt.isRawShaderMaterial||nt.clipping===!0)&&(Ee.clippingPlanes=zt.uniform),Qr(nt,ue),Lt.needsLights=yu(nt),Lt.lightsStateVersion=oe,Lt.needsLights&&(Ee.ambientLightColor.value=xt.state.ambient,Ee.lightProbe.value=xt.state.probe,Ee.directionalLights.value=xt.state.directional,Ee.directionalLightShadows.value=xt.state.directionalShadow,Ee.spotLights.value=xt.state.spot,Ee.spotLightShadows.value=xt.state.spotShadow,Ee.rectAreaLights.value=xt.state.rectArea,Ee.ltc_1.value=xt.state.rectAreaLTC1,Ee.ltc_2.value=xt.state.rectAreaLTC2,Ee.pointLights.value=xt.state.point,Ee.pointLightShadows.value=xt.state.pointShadow,Ee.hemisphereLights.value=xt.state.hemi,Ee.directionalShadowMap.value=xt.state.directionalShadowMap,Ee.directionalShadowMatrix.value=xt.state.directionalShadowMatrix,Ee.spotShadowMap.value=xt.state.spotShadowMap,Ee.spotLightMatrix.value=xt.state.spotLightMatrix,Ee.spotLightMap.value=xt.state.spotLightMap,Ee.pointShadowMap.value=xt.state.pointShadowMap,Ee.pointShadowMatrix.value=xt.state.pointShadowMatrix),Lt.currentProgram=be,Lt.uniformsList=null,be}function Ro(nt){if(nt.uniformsList===null){const mt=nt.currentProgram.getUniforms();nt.uniformsList=Im.seqWithValue(mt.seq,nt.uniforms)}return nt.uniformsList}function Qr(nt,mt){const bt=Pt.get(nt);bt.outputColorSpace=mt.outputColorSpace,bt.batching=mt.batching,bt.batchingColor=mt.batchingColor,bt.instancing=mt.instancing,bt.instancingColor=mt.instancingColor,bt.instancingMorph=mt.instancingMorph,bt.skinning=mt.skinning,bt.morphTargets=mt.morphTargets,bt.morphNormals=mt.morphNormals,bt.morphColors=mt.morphColors,bt.morphTargetsCount=mt.morphTargetsCount,bt.numClippingPlanes=mt.numClippingPlanes,bt.numIntersection=mt.numClipIntersection,bt.vertexAlphas=mt.vertexAlphas,bt.vertexTangents=mt.vertexTangents,bt.toneMapping=mt.toneMapping}function gu(nt,mt,bt,Lt,xt){mt.isScene!==!0&&(mt=Z),et.resetTextureUnits();const Yt=mt.fog,oe=Lt.isMeshStandardMaterial?mt.environment:null,ue=C===null?x.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Gc,fe=(Lt.isMeshStandardMaterial?lt:Q).get(Lt.envMap||oe),Ce=Lt.vertexColors===!0&&!!bt.attributes.color&&bt.attributes.color.itemSize===4,be=!!bt.attributes.tangent&&(!!Lt.normalMap||Lt.anisotropy>0),Ee=!!bt.morphAttributes.position,Xe=!!bt.morphAttributes.normal,ni=!!bt.morphAttributes.color;let fi=ll;Lt.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(fi=x.toneMapping);const Je=bt.morphAttributes.position||bt.morphAttributes.normal||bt.morphAttributes.color,ze=Je!==void 0?Je.length:0,xe=Pt.get(Lt),ki=l.state.lights;if(N===!0&&(H===!0||nt!==M)){const Tn=nt===M&&Lt.id===A;zt.setState(Lt,nt,Tn)}let ye=!1;Lt.version===xe.__version?(xe.needsLights&&xe.lightsStateVersion!==ki.state.version||xe.outputColorSpace!==ue||xt.isBatchedMesh&&xe.batching===!1||!xt.isBatchedMesh&&xe.batching===!0||xt.isBatchedMesh&&xe.batchingColor===!0&&xt.colorTexture===null||xt.isBatchedMesh&&xe.batchingColor===!1&&xt.colorTexture!==null||xt.isInstancedMesh&&xe.instancing===!1||!xt.isInstancedMesh&&xe.instancing===!0||xt.isSkinnedMesh&&xe.skinning===!1||!xt.isSkinnedMesh&&xe.skinning===!0||xt.isInstancedMesh&&xe.instancingColor===!0&&xt.instanceColor===null||xt.isInstancedMesh&&xe.instancingColor===!1&&xt.instanceColor!==null||xt.isInstancedMesh&&xe.instancingMorph===!0&&xt.morphTexture===null||xt.isInstancedMesh&&xe.instancingMorph===!1&&xt.morphTexture!==null||xe.envMap!==fe||Lt.fog===!0&&xe.fog!==Yt||xe.numClippingPlanes!==void 0&&(xe.numClippingPlanes!==zt.numPlanes||xe.numIntersection!==zt.numIntersection)||xe.vertexAlphas!==Ce||xe.vertexTangents!==be||xe.morphTargets!==Ee||xe.morphNormals!==Xe||xe.morphColors!==ni||xe.toneMapping!==fi||xe.morphTargetsCount!==ze)&&(ye=!0):(ye=!0,xe.__version=Lt.version);let In=xe.currentProgram;ye===!0&&(In=jr(Lt,mt,xt));let us=!1,Zi=!1,La=!1;const Ti=In.getUniforms(),_n=xe.uniforms;if(ut.useProgram(In.program)&&(us=!0,Zi=!0,La=!0),Lt.id!==A&&(A=Lt.id,Zi=!0),us||M!==nt){ut.buffers.depth.getReversed()?(U.copy(nt.projectionMatrix),y5(U),T5(U),Ti.setValue(q,"projectionMatrix",U)):Ti.setValue(q,"projectionMatrix",nt.projectionMatrix),Ti.setValue(q,"viewMatrix",nt.matrixWorldInverse);const En=Ti.map.cameraPosition;En!==void 0&&En.setValue(q,$.setFromMatrixPosition(nt.matrixWorld)),Tt.logarithmicDepthBuffer&&Ti.setValue(q,"logDepthBufFC",2/(Math.log(nt.far+1)/Math.LN2)),(Lt.isMeshPhongMaterial||Lt.isMeshToonMaterial||Lt.isMeshLambertMaterial||Lt.isMeshBasicMaterial||Lt.isMeshStandardMaterial||Lt.isShaderMaterial)&&Ti.setValue(q,"isOrthographic",nt.isOrthographicCamera===!0),M!==nt&&(M=nt,Zi=!0,La=!0)}if(xt.isSkinnedMesh){Ti.setOptional(q,xt,"bindMatrix"),Ti.setOptional(q,xt,"bindMatrixInverse");const Tn=xt.skeleton;Tn&&(Tn.boneTexture===null&&Tn.computeBoneTexture(),Ti.setValue(q,"boneTexture",Tn.boneTexture,et))}xt.isBatchedMesh&&(Ti.setOptional(q,xt,"batchingTexture"),Ti.setValue(q,"batchingTexture",xt._matricesTexture,et),Ti.setOptional(q,xt,"batchingIdTexture"),Ti.setValue(q,"batchingIdTexture",xt._indirectTexture,et),Ti.setOptional(q,xt,"batchingColorTexture"),xt._colorsTexture!==null&&Ti.setValue(q,"batchingColorTexture",xt._colorsTexture,et));const Qn=bt.morphAttributes;if((Qn.position!==void 0||Qn.normal!==void 0||Qn.color!==void 0)&&ne.update(xt,bt,In),(Zi||xe.receiveShadow!==xt.receiveShadow)&&(xe.receiveShadow=xt.receiveShadow,Ti.setValue(q,"receiveShadow",xt.receiveShadow)),Lt.isMeshGouraudMaterial&&Lt.envMap!==null&&(_n.envMap.value=fe,_n.flipEnvMap.value=fe.isCubeTexture&&fe.isRenderTargetTexture===!1?-1:1),Lt.isMeshStandardMaterial&&Lt.envMap===null&&mt.environment!==null&&(_n.envMapIntensity.value=mt.environmentIntensity),Zi&&(Ti.setValue(q,"toneMappingExposure",x.toneMappingExposure),xe.needsLights&&xu(_n,La),Yt&&Lt.fog===!0&&Ut.refreshFogUniforms(_n,Yt),Ut.refreshMaterialUniforms(_n,Lt,O,D,l.state.transmissionRenderTarget[nt.id]),Im.upload(q,Ro(xe),_n,et)),Lt.isShaderMaterial&&Lt.uniformsNeedUpdate===!0&&(Im.upload(q,Ro(xe),_n,et),Lt.uniformsNeedUpdate=!1),Lt.isSpriteMaterial&&Ti.setValue(q,"center",xt.center),Ti.setValue(q,"modelViewMatrix",xt.modelViewMatrix),Ti.setValue(q,"normalMatrix",xt.normalMatrix),Ti.setValue(q,"modelMatrix",xt.matrixWorld),Lt.isShaderMaterial||Lt.isRawShaderMaterial){const Tn=Lt.uniformsGroups;for(let En=0,wr=Tn.length;En<wr;En++){const Wn=Tn[En];dt.update(Wn,In),dt.bind(Wn,In)}}return In}function xu(nt,mt){nt.ambientLightColor.needsUpdate=mt,nt.lightProbe.needsUpdate=mt,nt.directionalLights.needsUpdate=mt,nt.directionalLightShadows.needsUpdate=mt,nt.pointLights.needsUpdate=mt,nt.pointLightShadows.needsUpdate=mt,nt.spotLights.needsUpdate=mt,nt.spotLightShadows.needsUpdate=mt,nt.rectAreaLights.needsUpdate=mt,nt.hemisphereLights.needsUpdate=mt}function yu(nt){return nt.isMeshLambertMaterial||nt.isMeshToonMaterial||nt.isMeshPhongMaterial||nt.isMeshStandardMaterial||nt.isShadowMaterial||nt.isShaderMaterial&&nt.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(nt,mt,bt){Pt.get(nt.texture).__webglTexture=mt,Pt.get(nt.depthTexture).__webglTexture=bt;const Lt=Pt.get(nt);Lt.__hasExternalTextures=!0,Lt.__autoAllocateDepthBuffer=bt===void 0,Lt.__autoAllocateDepthBuffer||vt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Lt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(nt,mt){const bt=Pt.get(nt);bt.__webglFramebuffer=mt,bt.__useDefaultFramebuffer=mt===void 0};const Gf=q.createFramebuffer();this.setRenderTarget=function(nt,mt=0,bt=0){C=nt,E=mt,w=bt;let Lt=!0,xt=null,Yt=!1,oe=!1;if(nt){const fe=Pt.get(nt);if(fe.__useDefaultFramebuffer!==void 0)ut.bindFramebuffer(q.FRAMEBUFFER,null),Lt=!1;else if(fe.__webglFramebuffer===void 0)et.setupRenderTarget(nt);else if(fe.__hasExternalTextures)et.rebindTextures(nt,Pt.get(nt.texture).__webglTexture,Pt.get(nt.depthTexture).__webglTexture);else if(nt.depthBuffer){const Ee=nt.depthTexture;if(fe.__boundDepthTexture!==Ee){if(Ee!==null&&Pt.has(Ee)&&(nt.width!==Ee.image.width||nt.height!==Ee.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");et.setupDepthRenderbuffer(nt)}}const Ce=nt.texture;(Ce.isData3DTexture||Ce.isDataArrayTexture||Ce.isCompressedArrayTexture)&&(oe=!0);const be=Pt.get(nt).__webglFramebuffer;nt.isWebGLCubeRenderTarget?(Array.isArray(be[mt])?xt=be[mt][bt]:xt=be[mt],Yt=!0):nt.samples>0&&et.useMultisampledRTT(nt)===!1?xt=Pt.get(nt).__webglMultisampledFramebuffer:Array.isArray(be)?xt=be[bt]:xt=be,R.copy(nt.viewport),P.copy(nt.scissor),b=nt.scissorTest}else R.copy(k).multiplyScalar(O).floor(),P.copy(X).multiplyScalar(O).floor(),b=V;if(bt!==0&&(xt=Gf),ut.bindFramebuffer(q.FRAMEBUFFER,xt)&&Lt&&ut.drawBuffers(nt,xt),ut.viewport(R),ut.scissor(P),ut.setScissorTest(b),Yt){const fe=Pt.get(nt.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+mt,fe.__webglTexture,bt)}else if(oe){const fe=Pt.get(nt.texture),Ce=mt;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,fe.__webglTexture,bt,Ce)}else if(nt!==null&&bt!==0){const fe=Pt.get(nt.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,fe.__webglTexture,bt)}A=-1},this.readRenderTargetPixels=function(nt,mt,bt,Lt,xt,Yt,oe){if(!(nt&&nt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ue=Pt.get(nt).__webglFramebuffer;if(nt.isWebGLCubeRenderTarget&&oe!==void 0&&(ue=ue[oe]),ue){ut.bindFramebuffer(q.FRAMEBUFFER,ue);try{const fe=nt.texture,Ce=fe.format,be=fe.type;if(!Tt.textureFormatReadable(Ce)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Tt.textureTypeReadable(be)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}mt>=0&&mt<=nt.width-Lt&&bt>=0&&bt<=nt.height-xt&&q.readPixels(mt,bt,Lt,xt,we.convert(Ce),we.convert(be),Yt)}finally{const fe=C!==null?Pt.get(C).__webglFramebuffer:null;ut.bindFramebuffer(q.FRAMEBUFFER,fe)}}},this.readRenderTargetPixelsAsync=async function(nt,mt,bt,Lt,xt,Yt,oe){if(!(nt&&nt.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ue=Pt.get(nt).__webglFramebuffer;if(nt.isWebGLCubeRenderTarget&&oe!==void 0&&(ue=ue[oe]),ue){const fe=nt.texture,Ce=fe.format,be=fe.type;if(!Tt.textureFormatReadable(Ce))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Tt.textureTypeReadable(be))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(mt>=0&&mt<=nt.width-Lt&&bt>=0&&bt<=nt.height-xt){ut.bindFramebuffer(q.FRAMEBUFFER,ue);const Ee=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,Ee),q.bufferData(q.PIXEL_PACK_BUFFER,Yt.byteLength,q.STREAM_READ),q.readPixels(mt,bt,Lt,xt,we.convert(Ce),we.convert(be),0);const Xe=C!==null?Pt.get(C).__webglFramebuffer:null;ut.bindFramebuffer(q.FRAMEBUFFER,Xe);const ni=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await x5(q,ni,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,Ee),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,Yt),q.deleteBuffer(Ee),q.deleteSync(ni),Yt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(nt,mt=null,bt=0){nt.isTexture!==!0&&(Ju("WebGLRenderer: copyFramebufferToTexture function signature has changed."),mt=arguments[0]||null,nt=arguments[1]);const Lt=Math.pow(2,-bt),xt=Math.floor(nt.image.width*Lt),Yt=Math.floor(nt.image.height*Lt),oe=mt!==null?mt.x:0,ue=mt!==null?mt.y:0;et.setTexture2D(nt,0),q.copyTexSubImage2D(q.TEXTURE_2D,bt,0,0,oe,ue,xt,Yt),ut.unbindTexture()};const He=q.createFramebuffer(),Tu=q.createFramebuffer();this.copyTextureToTexture=function(nt,mt,bt=null,Lt=null,xt=0,Yt=null){nt.isTexture!==!0&&(Ju("WebGLRenderer: copyTextureToTexture function signature has changed."),Lt=arguments[0]||null,nt=arguments[1],mt=arguments[2],Yt=arguments[3]||0,bt=null),Yt===null&&(xt!==0?(Ju("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Yt=xt,xt=0):Yt=0);let oe,ue,fe,Ce,be,Ee,Xe,ni,fi;const Je=nt.isCompressedTexture?nt.mipmaps[Yt]:nt.image;if(bt!==null)oe=bt.max.x-bt.min.x,ue=bt.max.y-bt.min.y,fe=bt.isBox3?bt.max.z-bt.min.z:1,Ce=bt.min.x,be=bt.min.y,Ee=bt.isBox3?bt.min.z:0;else{const Qn=Math.pow(2,-xt);oe=Math.floor(Je.width*Qn),ue=Math.floor(Je.height*Qn),nt.isDataArrayTexture?fe=Je.depth:nt.isData3DTexture?fe=Math.floor(Je.depth*Qn):fe=1,Ce=0,be=0,Ee=0}Lt!==null?(Xe=Lt.x,ni=Lt.y,fi=Lt.z):(Xe=0,ni=0,fi=0);const ze=we.convert(mt.format),xe=we.convert(mt.type);let ki;mt.isData3DTexture?(et.setTexture3D(mt,0),ki=q.TEXTURE_3D):mt.isDataArrayTexture||mt.isCompressedArrayTexture?(et.setTexture2DArray(mt,0),ki=q.TEXTURE_2D_ARRAY):(et.setTexture2D(mt,0),ki=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,mt.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,mt.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,mt.unpackAlignment);const ye=q.getParameter(q.UNPACK_ROW_LENGTH),In=q.getParameter(q.UNPACK_IMAGE_HEIGHT),us=q.getParameter(q.UNPACK_SKIP_PIXELS),Zi=q.getParameter(q.UNPACK_SKIP_ROWS),La=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,Je.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Je.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Ce),q.pixelStorei(q.UNPACK_SKIP_ROWS,be),q.pixelStorei(q.UNPACK_SKIP_IMAGES,Ee);const Ti=nt.isDataArrayTexture||nt.isData3DTexture,_n=mt.isDataArrayTexture||mt.isData3DTexture;if(nt.isDepthTexture){const Qn=Pt.get(nt),Tn=Pt.get(mt),En=Pt.get(Qn.__renderTarget),wr=Pt.get(Tn.__renderTarget);ut.bindFramebuffer(q.READ_FRAMEBUFFER,En.__webglFramebuffer),ut.bindFramebuffer(q.DRAW_FRAMEBUFFER,wr.__webglFramebuffer);for(let Wn=0;Wn<fe;Wn++)Ti&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Pt.get(nt).__webglTexture,xt,Ee+Wn),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Pt.get(mt).__webglTexture,Yt,fi+Wn)),q.blitFramebuffer(Ce,be,oe,ue,Xe,ni,oe,ue,q.DEPTH_BUFFER_BIT,q.NEAREST);ut.bindFramebuffer(q.READ_FRAMEBUFFER,null),ut.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(xt!==0||nt.isRenderTargetTexture||Pt.has(nt)){const Qn=Pt.get(nt),Tn=Pt.get(mt);ut.bindFramebuffer(q.READ_FRAMEBUFFER,He),ut.bindFramebuffer(q.DRAW_FRAMEBUFFER,Tu);for(let En=0;En<fe;En++)Ti?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Qn.__webglTexture,xt,Ee+En):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Qn.__webglTexture,xt),_n?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Tn.__webglTexture,Yt,fi+En):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Tn.__webglTexture,Yt),xt!==0?q.blitFramebuffer(Ce,be,oe,ue,Xe,ni,oe,ue,q.COLOR_BUFFER_BIT,q.NEAREST):_n?q.copyTexSubImage3D(ki,Yt,Xe,ni,fi+En,Ce,be,oe,ue):q.copyTexSubImage2D(ki,Yt,Xe,ni,Ce,be,oe,ue);ut.bindFramebuffer(q.READ_FRAMEBUFFER,null),ut.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else _n?nt.isDataTexture||nt.isData3DTexture?q.texSubImage3D(ki,Yt,Xe,ni,fi,oe,ue,fe,ze,xe,Je.data):mt.isCompressedArrayTexture?q.compressedTexSubImage3D(ki,Yt,Xe,ni,fi,oe,ue,fe,ze,Je.data):q.texSubImage3D(ki,Yt,Xe,ni,fi,oe,ue,fe,ze,xe,Je):nt.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,Yt,Xe,ni,oe,ue,ze,xe,Je.data):nt.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,Yt,Xe,ni,Je.width,Je.height,ze,Je.data):q.texSubImage2D(q.TEXTURE_2D,Yt,Xe,ni,oe,ue,ze,xe,Je);q.pixelStorei(q.UNPACK_ROW_LENGTH,ye),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,In),q.pixelStorei(q.UNPACK_SKIP_PIXELS,us),q.pixelStorei(q.UNPACK_SKIP_ROWS,Zi),q.pixelStorei(q.UNPACK_SKIP_IMAGES,La),Yt===0&&mt.generateMipmaps&&q.generateMipmap(ki),ut.unbindTexture()},this.copyTextureToTexture3D=function(nt,mt,bt=null,Lt=null,xt=0){return nt.isTexture!==!0&&(Ju("WebGLRenderer: copyTextureToTexture3D function signature has changed."),bt=arguments[0]||null,Lt=arguments[1]||null,nt=arguments[2],mt=arguments[3],xt=arguments[4]||0),Ju('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(nt,mt,bt,Lt,xt)},this.initRenderTarget=function(nt){Pt.get(nt).__webglFramebuffer===void 0&&et.setupRenderTarget(nt)},this.initTexture=function(nt){nt.isCubeTexture?et.setTextureCube(nt,0):nt.isData3DTexture?et.setTexture3D(nt,0):nt.isDataArrayTexture||nt.isCompressedArrayTexture?et.setTexture2DArray(nt,0):et.setTexture2D(nt,0),ut.unbindTexture()},this.resetState=function(){E=0,w=0,C=null,ut.reset(),De.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const i=this.getContext();i.drawingBufferColorspace=ci._getDrawingBufferColorSpace(t),i.unpackColorSpace=ci._getUnpackColorSpace()}}class Vr{constructor(t){t===void 0&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const i=this.elements;i[0]=t.x,i[4]=t.y,i[8]=t.z}getTrace(t){t===void 0&&(t=new tt);const i=this.elements;return t.x=i[0],t.y=i[4],t.z=i[8],t}vmult(t,i){i===void 0&&(i=new tt);const n=this.elements,v=t.x,S=t.y,s=t.z;return i.x=n[0]*v+n[1]*S+n[2]*s,i.y=n[3]*v+n[4]*S+n[5]*s,i.z=n[6]*v+n[7]*S+n[8]*s,i}smult(t){for(let i=0;i<this.elements.length;i++)this.elements[i]*=t}mmult(t,i){i===void 0&&(i=new Vr);const n=this.elements,v=t.elements,S=i.elements,s=n[0],T=n[1],e=n[2],a=n[3],m=n[4],c=n[5],o=n[6],u=n[7],r=n[8],h=v[0],d=v[1],l=v[2],p=v[3],g=v[4],x=v[5],y=v[6],E=v[7],w=v[8];return S[0]=s*h+T*p+e*y,S[1]=s*d+T*g+e*E,S[2]=s*l+T*x+e*w,S[3]=a*h+m*p+c*y,S[4]=a*d+m*g+c*E,S[5]=a*l+m*x+c*w,S[6]=o*h+u*p+r*y,S[7]=o*d+u*g+r*E,S[8]=o*l+u*x+r*w,i}scale(t,i){i===void 0&&(i=new Vr);const n=this.elements,v=i.elements;for(let S=0;S!==3;S++)v[3*S+0]=t.x*n[3*S+0],v[3*S+1]=t.y*n[3*S+1],v[3*S+2]=t.z*n[3*S+2];return i}solve(t,i){i===void 0&&(i=new tt);const n=3,v=4,S=[];let s,T;for(s=0;s<n*v;s++)S.push(0);for(s=0;s<3;s++)for(T=0;T<3;T++)S[s+v*T]=this.elements[s+3*T];S[3]=t.x,S[7]=t.y,S[11]=t.z;let e=3;const a=e;let m;const c=4;let o;do{if(s=a-e,S[s+v*s]===0){for(T=s+1;T<a;T++)if(S[s+v*T]!==0){m=c;do o=c-m,S[o+v*s]+=S[o+v*T];while(--m);break}}if(S[s+v*s]!==0)for(T=s+1;T<a;T++){const u=S[s+v*T]/S[s+v*s];m=c;do o=c-m,S[o+v*T]=o<=s?0:S[o+v*T]-S[o+v*s]*u;while(--m)}}while(--e);if(i.z=S[2*v+3]/S[2*v+2],i.y=(S[1*v+3]-S[1*v+2]*i.z)/S[1*v+1],i.x=(S[0*v+3]-S[0*v+2]*i.z-S[0*v+1]*i.y)/S[0*v+0],isNaN(i.x)||isNaN(i.y)||isNaN(i.z)||i.x===1/0||i.y===1/0||i.z===1/0)throw`Could not solve equation! Got x=[${i.toString()}], b=[${t.toString()}], A=[${this.toString()}]`;return i}e(t,i,n){if(n===void 0)return this.elements[i+3*t];this.elements[i+3*t]=n}copy(t){for(let i=0;i<t.elements.length;i++)this.elements[i]=t.elements[i];return this}toString(){let t="";for(let n=0;n<9;n++)t+=this.elements[n]+",";return t}reverse(t){t===void 0&&(t=new Vr);const i=3,n=6,v=zB;let S,s;for(S=0;S<3;S++)for(s=0;s<3;s++)v[S+n*s]=this.elements[S+3*s];v[3]=1,v[9]=0,v[15]=0,v[4]=0,v[10]=1,v[16]=0,v[5]=0,v[11]=0,v[17]=1;let T=3;const e=T;let a;const m=n;let c;do{if(S=e-T,v[S+n*S]===0){for(s=S+1;s<e;s++)if(v[S+n*s]!==0){a=m;do c=m-a,v[c+n*S]+=v[c+n*s];while(--a);break}}if(v[S+n*S]!==0)for(s=S+1;s<e;s++){const o=v[S+n*s]/v[S+n*S];a=m;do c=m-a,v[c+n*s]=c<=S?0:v[c+n*s]-v[c+n*S]*o;while(--a)}}while(--T);S=2;do{s=S-1;do{const o=v[S+n*s]/v[S+n*S];a=n;do c=n-a,v[c+n*s]=v[c+n*s]-v[c+n*S]*o;while(--a)}while(s--)}while(--S);S=2;do{const o=1/v[S+n*S];a=n;do c=n-a,v[c+n*S]=v[c+n*S]*o;while(--a)}while(S--);S=2;do{s=2;do{if(c=v[i+s+n*S],isNaN(c)||c===1/0)throw`Could not reverse! A=[${this.toString()}]`;t.e(S,s,c)}while(s--)}while(S--);return t}setRotationFromQuaternion(t){const i=t.x,n=t.y,v=t.z,S=t.w,s=i+i,T=n+n,e=v+v,a=i*s,m=i*T,c=i*e,o=n*T,u=n*e,r=v*e,h=S*s,d=S*T,l=S*e,p=this.elements;return p[0]=1-(o+r),p[1]=m-l,p[2]=c+d,p[3]=m+l,p[4]=1-(a+r),p[5]=u-h,p[6]=c-d,p[7]=u+h,p[8]=1-(a+o),this}transpose(t){t===void 0&&(t=new Vr);const i=this.elements,n=t.elements;let v;return n[0]=i[0],n[4]=i[4],n[8]=i[8],v=i[1],n[1]=i[3],n[3]=v,v=i[2],n[2]=i[6],n[6]=v,v=i[5],n[5]=i[7],n[7]=v,t}}const zB=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class tt{constructor(t,i,n){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=i,this.z=n}cross(t,i){i===void 0&&(i=new tt);const n=t.x,v=t.y,S=t.z,s=this.x,T=this.y,e=this.z;return i.x=T*S-e*v,i.y=e*n-s*S,i.z=s*v-T*n,i}set(t,i,n){return this.x=t,this.y=i,this.z=n,this}setZero(){this.x=this.y=this.z=0}vadd(t,i){if(i)i.x=t.x+this.x,i.y=t.y+this.y,i.z=t.z+this.z;else return new tt(this.x+t.x,this.y+t.y,this.z+t.z)}vsub(t,i){if(i)i.x=this.x-t.x,i.y=this.y-t.y,i.z=this.z-t.z;else return new tt(this.x-t.x,this.y-t.y,this.z-t.z)}crossmat(){return new Vr([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,i=this.y,n=this.z,v=Math.sqrt(t*t+i*i+n*n);if(v>0){const S=1/v;this.x*=S,this.y*=S,this.z*=S}else this.x=0,this.y=0,this.z=0;return v}unit(t){t===void 0&&(t=new tt);const i=this.x,n=this.y,v=this.z;let S=Math.sqrt(i*i+n*n+v*v);return S>0?(S=1/S,t.x=i*S,t.y=n*S,t.z=v*S):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,i=this.y,n=this.z;return Math.sqrt(t*t+i*i+n*n)}lengthSquared(){return this.dot(this)}distanceTo(t){const i=this.x,n=this.y,v=this.z,S=t.x,s=t.y,T=t.z;return Math.sqrt((S-i)*(S-i)+(s-n)*(s-n)+(T-v)*(T-v))}distanceSquared(t){const i=this.x,n=this.y,v=this.z,S=t.x,s=t.y,T=t.z;return(S-i)*(S-i)+(s-n)*(s-n)+(T-v)*(T-v)}scale(t,i){i===void 0&&(i=new tt);const n=this.x,v=this.y,S=this.z;return i.x=t*n,i.y=t*v,i.z=t*S,i}vmul(t,i){return i===void 0&&(i=new tt),i.x=t.x*this.x,i.y=t.y*this.y,i.z=t.z*this.z,i}addScaledVector(t,i,n){return n===void 0&&(n=new tt),n.x=this.x+t*i.x,n.y=this.y+t*i.y,n.z=this.z+t*i.z,n}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(t){return t===void 0&&(t=new tt),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,i){const n=this.length();if(n>0){const v=GB,S=1/n;v.set(this.x*S,this.y*S,this.z*S);const s=_B;Math.abs(v.x)<.9?(s.set(1,0,0),v.cross(s,t)):(s.set(0,1,0),v.cross(s,t)),v.cross(t,i)}else t.set(1,0,0),i.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,i,n){const v=this.x,S=this.y,s=this.z;n.x=v+(t.x-v)*i,n.y=S+(t.y-S)*i,n.z=s+(t.z-s)*i}almostEquals(t,i){return i===void 0&&(i=1e-6),!(Math.abs(this.x-t.x)>i||Math.abs(this.y-t.y)>i||Math.abs(this.z-t.z)>i)}almostZero(t){return t===void 0&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,i){return this.negate(lw),lw.almostEquals(t,i)}clone(){return new tt(this.x,this.y,this.z)}}tt.ZERO=new tt(0,0,0);tt.UNIT_X=new tt(1,0,0);tt.UNIT_Y=new tt(0,1,0);tt.UNIT_Z=new tt(0,0,1);const GB=new tt,_B=new tt,lw=new tt;class nr{constructor(t){t===void 0&&(t={}),this.lowerBound=new tt,this.upperBound=new tt,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,i,n,v){const S=this.lowerBound,s=this.upperBound,T=n;S.copy(t[0]),T&&T.vmult(S,S),s.copy(S);for(let e=1;e<t.length;e++){let a=t[e];T&&(T.vmult(a,hw),a=hw),a.x>s.x&&(s.x=a.x),a.x<S.x&&(S.x=a.x),a.y>s.y&&(s.y=a.y),a.y<S.y&&(S.y=a.y),a.z>s.z&&(s.z=a.z),a.z<S.z&&(S.z=a.z)}return i&&(i.vadd(S,S),i.vadd(s,s)),v&&(S.x-=v,S.y-=v,S.z-=v,s.x+=v,s.y+=v,s.z+=v),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return new nr().copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const i=this.lowerBound,n=this.upperBound,v=t.lowerBound,S=t.upperBound,s=v.x<=n.x&&n.x<=S.x||i.x<=S.x&&S.x<=n.x,T=v.y<=n.y&&n.y<=S.y||i.y<=S.y&&S.y<=n.y,e=v.z<=n.z&&n.z<=S.z||i.z<=S.z&&S.z<=n.z;return s&&T&&e}volume(){const t=this.lowerBound,i=this.upperBound;return(i.x-t.x)*(i.y-t.y)*(i.z-t.z)}contains(t){const i=this.lowerBound,n=this.upperBound,v=t.lowerBound,S=t.upperBound;return i.x<=v.x&&n.x>=S.x&&i.y<=v.y&&n.y>=S.y&&i.z<=v.z&&n.z>=S.z}getCorners(t,i,n,v,S,s,T,e){const a=this.lowerBound,m=this.upperBound;t.copy(a),i.set(m.x,a.y,a.z),n.set(m.x,m.y,a.z),v.set(a.x,m.y,m.z),S.set(m.x,a.y,m.z),s.set(a.x,m.y,a.z),T.set(a.x,a.y,m.z),e.copy(m)}toLocalFrame(t,i){const n=uw,v=n[0],S=n[1],s=n[2],T=n[3],e=n[4],a=n[5],m=n[6],c=n[7];this.getCorners(v,S,s,T,e,a,m,c);for(let o=0;o!==8;o++){const u=n[o];t.pointToLocal(u,u)}return i.setFromPoints(n)}toWorldFrame(t,i){const n=uw,v=n[0],S=n[1],s=n[2],T=n[3],e=n[4],a=n[5],m=n[6],c=n[7];this.getCorners(v,S,s,T,e,a,m,c);for(let o=0;o!==8;o++){const u=n[o];t.pointToWorld(u,u)}return i.setFromPoints(n)}overlapsRay(t){const{direction:i,from:n}=t,v=1/i.x,S=1/i.y,s=1/i.z,T=(this.lowerBound.x-n.x)*v,e=(this.upperBound.x-n.x)*v,a=(this.lowerBound.y-n.y)*S,m=(this.upperBound.y-n.y)*S,c=(this.lowerBound.z-n.z)*s,o=(this.upperBound.z-n.z)*s,u=Math.max(Math.max(Math.min(T,e),Math.min(a,m)),Math.min(c,o)),r=Math.min(Math.min(Math.max(T,e),Math.max(a,m)),Math.max(c,o));return!(r<0||u>r)}}const hw=new tt,uw=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt];class cw{constructor(){this.matrix=[]}get(t,i){let{index:n}=t,{index:v}=i;if(v>n){const S=v;v=n,n=S}return this.matrix[(n*(n+1)>>1)+v-1]}set(t,i,n){let{index:v}=t,{index:S}=i;if(S>v){const s=S;S=v,v=s}this.matrix[(v*(v+1)>>1)+S-1]=n?1:0}reset(){for(let t=0,i=this.matrix.length;t!==i;t++)this.matrix[t]=0}setNumObjects(t){this.matrix.length=t*(t-1)>>1}}let UR=class{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const n=this._listeners;return n[t]===void 0&&(n[t]=[]),n[t].includes(i)||n[t].push(i),this}hasEventListener(t,i){if(this._listeners===void 0)return!1;const n=this._listeners;return!!(n[t]!==void 0&&n[t].includes(i))}hasAnyEventListener(t){return this._listeners===void 0?!1:this._listeners[t]!==void 0}removeEventListener(t,i){if(this._listeners===void 0)return this;const n=this._listeners;if(n[t]===void 0)return this;const v=n[t].indexOf(i);return v!==-1&&n[t].splice(v,1),this}dispatchEvent(t){if(this._listeners===void 0)return this;const n=this._listeners[t.type];if(n!==void 0){t.target=this;for(let v=0,S=n.length;v<S;v++)n[v].call(this,t)}return this}};class gn{constructor(t,i,n,v){t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),v===void 0&&(v=1),this.x=t,this.y=i,this.z=n,this.w=v}set(t,i,n,v){return this.x=t,this.y=i,this.z=n,this.w=v,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,i){const n=Math.sin(i*.5);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(i*.5),this}toAxisAngle(t){t===void 0&&(t=new tt),this.normalize();const i=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/n,t.y=this.y/n,t.z=this.z/n),[t,i]}setFromVectors(t,i){if(t.isAntiparallelTo(i)){const n=WB,v=HB;t.tangents(n,v),this.setFromAxisAngle(n,Math.PI)}else{const n=t.cross(i);this.x=n.x,this.y=n.y,this.z=n.z,this.w=Math.sqrt(t.length()**2*i.length()**2)+t.dot(i),this.normalize()}return this}mult(t,i){i===void 0&&(i=new gn);const n=this.x,v=this.y,S=this.z,s=this.w,T=t.x,e=t.y,a=t.z,m=t.w;return i.x=n*m+s*T+v*a-S*e,i.y=v*m+s*e+S*T-n*a,i.z=S*m+s*a+n*e-v*T,i.w=s*m-n*T-v*e-S*a,i}inverse(t){t===void 0&&(t=new gn);const i=this.x,n=this.y,v=this.z,S=this.w;this.conjugate(t);const s=1/(i*i+n*n+v*v+S*S);return t.x*=s,t.y*=s,t.z*=s,t.w*=s,t}conjugate(t){return t===void 0&&(t=new gn),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,i){i===void 0&&(i=new tt);const n=t.x,v=t.y,S=t.z,s=this.x,T=this.y,e=this.z,a=this.w,m=a*n+T*S-e*v,c=a*v+e*n-s*S,o=a*S+s*v-T*n,u=-s*n-T*v-e*S;return i.x=m*a+u*-s+c*-e-o*-T,i.y=c*a+u*-T+o*-s-m*-e,i.z=o*a+u*-e+m*-T-c*-s,i}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,i){i===void 0&&(i="YZX");let n,v,S;const s=this.x,T=this.y,e=this.z,a=this.w;switch(i){case"YZX":const m=s*T+e*a;if(m>.499&&(n=2*Math.atan2(s,a),v=Math.PI/2,S=0),m<-.499&&(n=-2*Math.atan2(s,a),v=-Math.PI/2,S=0),n===void 0){const c=s*s,o=T*T,u=e*e;n=Math.atan2(2*T*a-2*s*e,1-2*o-2*u),v=Math.asin(2*m),S=Math.atan2(2*s*a-2*T*e,1-2*c-2*u)}break;default:throw new Error(`Euler order ${i} not supported yet.`)}t.y=n,t.z=v,t.x=S}setFromEuler(t,i,n,v){v===void 0&&(v="XYZ");const S=Math.cos(t/2),s=Math.cos(i/2),T=Math.cos(n/2),e=Math.sin(t/2),a=Math.sin(i/2),m=Math.sin(n/2);return v==="XYZ"?(this.x=e*s*T+S*a*m,this.y=S*a*T-e*s*m,this.z=S*s*m+e*a*T,this.w=S*s*T-e*a*m):v==="YXZ"?(this.x=e*s*T+S*a*m,this.y=S*a*T-e*s*m,this.z=S*s*m-e*a*T,this.w=S*s*T+e*a*m):v==="ZXY"?(this.x=e*s*T-S*a*m,this.y=S*a*T+e*s*m,this.z=S*s*m+e*a*T,this.w=S*s*T-e*a*m):v==="ZYX"?(this.x=e*s*T-S*a*m,this.y=S*a*T+e*s*m,this.z=S*s*m-e*a*T,this.w=S*s*T+e*a*m):v==="YZX"?(this.x=e*s*T+S*a*m,this.y=S*a*T+e*s*m,this.z=S*s*m-e*a*T,this.w=S*s*T-e*a*m):v==="XZY"&&(this.x=e*s*T-S*a*m,this.y=S*a*T-e*s*m,this.z=S*s*m+e*a*T,this.w=S*s*T+e*a*m),this}clone(){return new gn(this.x,this.y,this.z,this.w)}slerp(t,i,n){n===void 0&&(n=new gn);const v=this.x,S=this.y,s=this.z,T=this.w;let e=t.x,a=t.y,m=t.z,c=t.w,o,u,r,h,d;return u=v*e+S*a+s*m+T*c,u<0&&(u=-u,e=-e,a=-a,m=-m,c=-c),1-u>1e-6?(o=Math.acos(u),r=Math.sin(o),h=Math.sin((1-i)*o)/r,d=Math.sin(i*o)/r):(h=1-i,d=i),n.x=h*v+d*e,n.y=h*S+d*a,n.z=h*s+d*m,n.w=h*T+d*c,n}integrate(t,i,n,v){v===void 0&&(v=new gn);const S=t.x*n.x,s=t.y*n.y,T=t.z*n.z,e=this.x,a=this.y,m=this.z,c=this.w,o=i*.5;return v.x+=o*(S*c+s*m-T*a),v.y+=o*(s*c+T*e-S*m),v.z+=o*(T*c+S*a-s*e),v.w+=o*(-S*e-s*a-T*m),v}}const WB=new tt,HB=new tt,XB={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class me{constructor(t){t===void 0&&(t={}),this.id=me.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=t.collisionResponse?t.collisionResponse:!0,this.collisionFilterGroup=t.collisionFilterGroup!==void 0?t.collisionFilterGroup:1,this.collisionFilterMask=t.collisionFilterMask!==void 0?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,n,v){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}me.idCounter=0;me.types=XB;class pi{constructor(t){t===void 0&&(t={}),this.position=new tt,this.quaternion=new gn,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,i){return pi.pointToLocalFrame(this.position,this.quaternion,t,i)}pointToWorld(t,i){return pi.pointToWorldFrame(this.position,this.quaternion,t,i)}vectorToWorldFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.vmult(t,i),i}static pointToLocalFrame(t,i,n,v){return v===void 0&&(v=new tt),n.vsub(t,v),i.conjugate(fw),fw.vmult(v,v),v}static pointToWorldFrame(t,i,n,v){return v===void 0&&(v=new tt),i.vmult(n,v),v.vadd(t,v),v}static vectorToWorldFrame(t,i,n){return n===void 0&&(n=new tt),t.vmult(i,n),n}static vectorToLocalFrame(t,i,n,v){return v===void 0&&(v=new tt),i.w*=-1,i.vmult(n,v),i.w*=-1,v}}const fw=new gn;class Vd extends me{constructor(t){t===void 0&&(t={});const{vertices:i=[],faces:n=[],normals:v=[],axes:S,boundingSphereRadius:s}=t;super({type:me.types.CONVEXPOLYHEDRON}),this.vertices=i,this.faces=n,this.faceNormals=v,this.faceNormals.length===0&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=S?S.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,i=this.vertices,n=this.uniqueEdges;n.length=0;const v=new tt;for(let S=0;S!==t.length;S++){const s=t[S],T=s.length;for(let e=0;e!==T;e++){const a=(e+1)%T;i[s[e]].vsub(i[s[a]],v),v.normalize();let m=!1;for(let c=0;c!==n.length;c++)if(n[c].almostEquals(v)||n[c].almostEquals(v)){m=!0;break}m||n.push(v.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let v=0;v<this.faces[t].length;v++)if(!this.vertices[this.faces[t][v]])throw new Error(`Vertex ${this.faces[t][v]} not found!`);const i=this.faceNormals[t]||new tt;this.getFaceNormal(t,i),i.negate(i),this.faceNormals[t]=i;const n=this.vertices[this.faces[t][0]];if(i.dot(n)<0){console.error(`.faceNormals[${t}] = Vec3(${i.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let v=0;v<this.faces[t].length;v++)console.warn(`.vertices[${this.faces[t][v]}] = Vec3(${this.vertices[this.faces[t][v]].toString()})`)}}}getFaceNormal(t,i){const n=this.faces[t],v=this.vertices[n[0]],S=this.vertices[n[1]],s=this.vertices[n[2]];Vd.computeNormal(v,S,s,i)}static computeNormal(t,i,n,v){const S=new tt,s=new tt;i.vsub(t,s),n.vsub(i,S),S.cross(s,v),v.isZero()||v.normalize()}clipAgainstHull(t,i,n,v,S,s,T,e,a){const m=new tt;let c=-1,o=-Number.MAX_VALUE;for(let r=0;r<n.faces.length;r++){m.copy(n.faceNormals[r]),S.vmult(m,m);const h=m.dot(s);h>o&&(o=h,c=r)}const u=[];for(let r=0;r<n.faces[c].length;r++){const h=n.vertices[n.faces[c][r]],d=new tt;d.copy(h),S.vmult(d,d),v.vadd(d,d),u.push(d)}c>=0&&this.clipFaceAgainstHull(s,t,i,u,T,e,a)}findSeparatingAxis(t,i,n,v,S,s,T,e){const a=new tt,m=new tt,c=new tt,o=new tt,u=new tt,r=new tt;let h=Number.MAX_VALUE;const d=this;if(d.uniqueAxes)for(let l=0;l!==d.uniqueAxes.length;l++){n.vmult(d.uniqueAxes[l],a);const p=d.testSepAxis(a,t,i,n,v,S);if(p===!1)return!1;p<h&&(h=p,s.copy(a))}else{const l=T?T.length:d.faces.length;for(let p=0;p<l;p++){const g=T?T[p]:p;a.copy(d.faceNormals[g]),n.vmult(a,a);const x=d.testSepAxis(a,t,i,n,v,S);if(x===!1)return!1;x<h&&(h=x,s.copy(a))}}if(t.uniqueAxes)for(let l=0;l!==t.uniqueAxes.length;l++){S.vmult(t.uniqueAxes[l],m);const p=d.testSepAxis(m,t,i,n,v,S);if(p===!1)return!1;p<h&&(h=p,s.copy(m))}else{const l=e?e.length:t.faces.length;for(let p=0;p<l;p++){const g=e?e[p]:p;m.copy(t.faceNormals[g]),S.vmult(m,m);const x=d.testSepAxis(m,t,i,n,v,S);if(x===!1)return!1;x<h&&(h=x,s.copy(m))}}for(let l=0;l!==d.uniqueEdges.length;l++){n.vmult(d.uniqueEdges[l],o);for(let p=0;p!==t.uniqueEdges.length;p++)if(S.vmult(t.uniqueEdges[p],u),o.cross(u,r),!r.almostZero()){r.normalize();const g=d.testSepAxis(r,t,i,n,v,S);if(g===!1)return!1;g<h&&(h=g,s.copy(r))}}return v.vsub(i,c),c.dot(s)>0&&s.negate(s),!0}testSepAxis(t,i,n,v,S,s){const T=this;Vd.project(T,t,n,v,mx),Vd.project(i,t,S,s,gx);const e=mx[0],a=mx[1],m=gx[0],c=gx[1];if(e<c||m<a)return!1;const o=e-c,u=m-a;return o<u?o:u}calculateLocalInertia(t,i){const n=new tt,v=new tt;this.computeLocalAABB(v,n);const S=n.x-v.x,s=n.y-v.y,T=n.z-v.z;i.x=1/12*t*(2*s*2*s+2*T*2*T),i.y=1/12*t*(2*S*2*S+2*T*2*T),i.z=1/12*t*(2*s*2*s+2*S*2*S)}getPlaneConstantOfFace(t){const i=this.faces[t],n=this.faceNormals[t],v=this.vertices[i[0]];return-n.dot(v)}clipFaceAgainstHull(t,i,n,v,S,s,T){const e=new tt,a=new tt,m=new tt,c=new tt,o=new tt,u=new tt,r=new tt,h=new tt,d=this,l=[],p=v,g=l;let x=-1,y=Number.MAX_VALUE;for(let M=0;M<d.faces.length;M++){e.copy(d.faceNormals[M]),n.vmult(e,e);const R=e.dot(t);R<y&&(y=R,x=M)}if(x<0)return;const E=d.faces[x];E.connectedFaces=[];for(let M=0;M<d.faces.length;M++)for(let R=0;R<d.faces[M].length;R++)E.indexOf(d.faces[M][R])!==-1&&M!==x&&E.connectedFaces.indexOf(M)===-1&&E.connectedFaces.push(M);const w=E.length;for(let M=0;M<w;M++){const R=d.vertices[E[M]],P=d.vertices[E[(M+1)%w]];R.vsub(P,a),m.copy(a),n.vmult(m,m),i.vadd(m,m),c.copy(this.faceNormals[x]),n.vmult(c,c),i.vadd(c,c),m.cross(c,o),o.negate(o),u.copy(R),n.vmult(u,u),i.vadd(u,u);const b=E.connectedFaces[M];r.copy(this.faceNormals[b]);const F=this.getPlaneConstantOfFace(b);h.copy(r),n.vmult(h,h);const I=F-h.dot(i);for(this.clipFaceAgainstPlane(p,g,h,I);p.length;)p.shift();for(;g.length;)p.push(g.shift())}r.copy(this.faceNormals[x]);const C=this.getPlaneConstantOfFace(x);h.copy(r),n.vmult(h,h);const A=C-h.dot(i);for(let M=0;M<p.length;M++){let R=h.dot(p[M])+A;if(R<=S&&(console.log(`clamped: depth=${R} to minDist=${S}`),R=S),R<=s){const P=p[M];if(R<=1e-6){const b={point:P,normal:h,depth:R};T.push(b)}}}}clipFaceAgainstPlane(t,i,n,v){let S,s;const T=t.length;if(T<2)return i;let e=t[t.length-1],a=t[0];S=n.dot(e)+v;for(let m=0;m<T;m++){if(a=t[m],s=n.dot(a)+v,S<0)if(s<0){const c=new tt;c.copy(a),i.push(c)}else{const c=new tt;e.lerp(a,S/(S-s),c),i.push(c)}else if(s<0){const c=new tt;e.lerp(a,S/(S-s),c),i.push(c),i.push(a)}e=a,S=s}return i}computeWorldVertices(t,i){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new tt);const n=this.vertices,v=this.worldVertices;for(let S=0;S!==this.vertices.length;S++)i.vmult(n[S],v[S]),t.vadd(v[S],v[S]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,i){const n=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let v=0;v<this.vertices.length;v++){const S=n[v];S.x<t.x?t.x=S.x:S.x>i.x&&(i.x=S.x),S.y<t.y?t.y=S.y:S.y>i.y&&(i.y=S.y),S.z<t.z?t.z=S.z:S.z>i.z&&(i.z=S.z)}}computeWorldFaceNormals(t){const i=this.faceNormals.length;for(;this.worldFaceNormals.length<i;)this.worldFaceNormals.push(new tt);const n=this.faceNormals,v=this.worldFaceNormals;for(let S=0;S!==i;S++)t.vmult(n[S],v[S]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const i=this.vertices;for(let n=0;n!==i.length;n++){const v=i[n].lengthSquared();v>t&&(t=v)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,i,n,v){const S=this.vertices;let s,T,e,a,m,c,o=new tt;for(let u=0;u<S.length;u++){o.copy(S[u]),i.vmult(o,o),t.vadd(o,o);const r=o;(s===void 0||r.x<s)&&(s=r.x),(a===void 0||r.x>a)&&(a=r.x),(T===void 0||r.y<T)&&(T=r.y),(m===void 0||r.y>m)&&(m=r.y),(e===void 0||r.z<e)&&(e=r.z),(c===void 0||r.z>c)&&(c=r.z)}n.set(s,T,e),v.set(a,m,c)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t){t===void 0&&(t=new tt);const i=this.vertices;for(let n=0;n<i.length;n++)t.vadd(i[n],t);return t.scale(1/i.length,t),t}transformAllPoints(t,i){const n=this.vertices.length,v=this.vertices;if(i){for(let S=0;S<n;S++){const s=v[S];i.vmult(s,s)}for(let S=0;S<this.faceNormals.length;S++){const s=this.faceNormals[S];i.vmult(s,s)}}if(t)for(let S=0;S<n;S++){const s=v[S];s.vadd(t,s)}}pointIsInside(t){const i=this.vertices,n=this.faces,v=this.faceNormals,S=new tt;this.getAveragePointLocal(S);for(let s=0;s<this.faces.length;s++){let T=v[s];const e=i[n[s][0]],a=new tt;t.vsub(e,a);const m=T.dot(a),c=new tt;S.vsub(e,c);const o=T.dot(c);if(m<0&&o>0||m>0&&o<0)return!1}return-1}static project(t,i,n,v,S){const s=t.vertices.length,T=kB;let e=0,a=0;const m=YB,c=t.vertices;m.setZero(),pi.vectorToLocalFrame(n,v,i,T),pi.pointToLocalFrame(n,v,m,m);const o=m.dot(T);a=e=c[0].dot(T);for(let u=1;u<s;u++){const r=c[u].dot(T);r>e&&(e=r),r<a&&(a=r)}if(a-=o,e-=o,a>e){const u=a;a=e,e=u}S[0]=e,S[1]=a}}const mx=[],gx=[];new tt;const kB=new tt,YB=new tt;class $g extends me{constructor(t){super({type:me.types.BOX}),this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,i=this.halfExtents.y,n=this.halfExtents.z,v=tt,S=[new v(-t,-i,-n),new v(t,-i,-n),new v(t,i,-n),new v(-t,i,-n),new v(-t,-i,n),new v(t,-i,n),new v(t,i,n),new v(-t,i,n)],s=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],T=[new v(0,0,1),new v(0,1,0),new v(1,0,0)],e=new Vd({vertices:S,faces:s,axes:T});this.convexPolyhedronRepresentation=e,e.material=this.material}calculateLocalInertia(t,i){return i===void 0&&(i=new tt),$g.calculateInertia(this.halfExtents,t,i),i}static calculateInertia(t,i,n){const v=t;n.x=1/12*i*(2*v.y*2*v.y+2*v.z*2*v.z),n.y=1/12*i*(2*v.x*2*v.x+2*v.z*2*v.z),n.z=1/12*i*(2*v.y*2*v.y+2*v.x*2*v.x)}getSideNormals(t,i){const n=t,v=this.halfExtents;if(n[0].set(v.x,0,0),n[1].set(0,v.y,0),n[2].set(0,0,v.z),n[3].set(-v.x,0,0),n[4].set(0,-v.y,0),n[5].set(0,0,-v.z),i!==void 0)for(let S=0;S!==n.length;S++)i.vmult(n[S],n[S]);return n}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,i,n){const v=this.halfExtents,S=[[v.x,v.y,v.z],[-v.x,v.y,v.z],[-v.x,-v.y,v.z],[-v.x,-v.y,-v.z],[v.x,-v.y,-v.z],[v.x,v.y,-v.z],[-v.x,v.y,-v.z],[v.x,-v.y,v.z]];for(let s=0;s<S.length;s++)zo.set(S[s][0],S[s][1],S[s][2]),i.vmult(zo,zo),t.vadd(zo,zo),n(zo.x,zo.y,zo.z)}calculateWorldAABB(t,i,n,v){const S=this.halfExtents;ia[0].set(S.x,S.y,S.z),ia[1].set(-S.x,S.y,S.z),ia[2].set(-S.x,-S.y,S.z),ia[3].set(-S.x,-S.y,-S.z),ia[4].set(S.x,-S.y,-S.z),ia[5].set(S.x,S.y,-S.z),ia[6].set(-S.x,S.y,-S.z),ia[7].set(S.x,-S.y,S.z);const s=ia[0];i.vmult(s,s),t.vadd(s,s),v.copy(s),n.copy(s);for(let T=1;T<8;T++){const e=ia[T];i.vmult(e,e),t.vadd(e,e);const a=e.x,m=e.y,c=e.z;a>v.x&&(v.x=a),m>v.y&&(v.y=m),c>v.z&&(v.z=c),a<n.x&&(n.x=a),m<n.y&&(n.y=m),c<n.z&&(n.z=c)}}}const zo=new tt,ia=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt],RT={DYNAMIC:1,STATIC:2,KINEMATIC:4},PT={AWAKE:0,SLEEPY:1,SLEEPING:2};class pe extends UR{constructor(t){t===void 0&&(t={}),super(),this.id=pe.idCounter++,this.index=-1,this.world=null,this.vlambda=new tt,this.collisionFilterGroup=typeof t.collisionFilterGroup=="number"?t.collisionFilterGroup:1,this.collisionFilterMask=typeof t.collisionFilterMask=="number"?t.collisionFilterMask:-1,this.collisionResponse=typeof t.collisionResponse=="boolean"?t.collisionResponse:!0,this.position=new tt,this.previousPosition=new tt,this.interpolatedPosition=new tt,this.initPosition=new tt,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new tt,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new tt,this.force=new tt;const i=typeof t.mass=="number"?t.mass:0;this.mass=i,this.invMass=i>0?1/i:0,this.material=t.material||null,this.linearDamping=typeof t.linearDamping=="number"?t.linearDamping:.01,this.type=i<=0?pe.STATIC:pe.DYNAMIC,typeof t.type==typeof pe.STATIC&&(this.type=t.type),this.allowSleep=typeof t.allowSleep<"u"?t.allowSleep:!0,this.sleepState=pe.AWAKE,this.sleepSpeedLimit=typeof t.sleepSpeedLimit<"u"?t.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof t.sleepTimeLimit<"u"?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new tt,this.quaternion=new gn,this.initQuaternion=new gn,this.previousQuaternion=new gn,this.interpolatedQuaternion=new gn,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new tt,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new tt,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new tt,this.invInertia=new tt,this.invInertiaWorld=new Vr,this.invMassSolve=0,this.invInertiaSolve=new tt,this.invInertiaWorldSolve=new Vr,this.fixedRotation=typeof t.fixedRotation<"u"?t.fixedRotation:!1,this.angularDamping=typeof t.angularDamping<"u"?t.angularDamping:.01,this.linearFactor=new tt(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new tt(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new nr,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new tt,this.isTrigger=!!t.isTrigger,t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=pe.AWAKE,this.wakeUpAfterNarrowphase=!1,t===pe.SLEEPING&&this.dispatchEvent(pe.wakeupEvent)}sleep(){this.sleepState=pe.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const i=this.sleepState,n=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),v=this.sleepSpeedLimit**2;i===pe.AWAKE&&n<v?(this.sleepState=pe.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(pe.sleepyEvent)):i===pe.SLEEPY&&n>v?this.wakeUp():i===pe.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(pe.sleepEvent))}}updateSolveMassProperties(){this.sleepState===pe.SLEEPING||this.type===pe.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,i){return i===void 0&&(i=new tt),t.vsub(this.position,i),this.quaternion.conjugate().vmult(i,i),i}vectorToLocalFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.conjugate().vmult(t,i),i}pointToWorldFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.vmult(t,i),i.vadd(this.position,i),i}vectorToWorldFrame(t,i){return i===void 0&&(i=new tt),this.quaternion.vmult(t,i),i}addShape(t,i,n){const v=new tt,S=new gn;return i&&v.copy(i),n&&S.copy(n),this.shapes.push(t),this.shapeOffsets.push(v),this.shapeOrientations.push(S),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const i=this.shapes.indexOf(t);return i===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(i,1),this.shapeOffsets.splice(i,1),this.shapeOrientations.splice(i,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null,this)}updateBoundingRadius(){const t=this.shapes,i=this.shapeOffsets,n=t.length;let v=0;for(let S=0;S!==n;S++){const s=t[S];s.updateBoundingSphereRadius();const T=i[S].length(),e=s.boundingSphereRadius;T+e>v&&(v=T+e)}this.boundingRadius=v}updateAABB(){const t=this.shapes,i=this.shapeOffsets,n=this.shapeOrientations,v=t.length,S=$B,s=KB,T=this.quaternion,e=this.aabb,a=jB;for(let m=0;m!==v;m++){const c=t[m];T.vmult(i[m],S),S.vadd(this.position,S),T.mult(n[m],s),c.calculateWorldAABB(S,s,a.lowerBound,a.upperBound),m===0?e.copy(a):e.extend(a)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const i=this.invInertia;if(!(i.x===i.y&&i.y===i.z&&!t)){const n=QB,v=ZB;n.setRotationFromQuaternion(this.quaternion),n.transpose(v),n.scale(i,n),n.mmult(v,this.invInertiaWorld)}}applyForce(t,i){if(i===void 0&&(i=new tt),this.type!==pe.DYNAMIC)return;this.sleepState===pe.SLEEPING&&this.wakeUp();const n=JB;i.cross(t,n),this.force.vadd(t,this.force),this.torque.vadd(n,this.torque)}applyLocalForce(t,i){if(i===void 0&&(i=new tt),this.type!==pe.DYNAMIC)return;const n=qB,v=tU;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(i,v),this.applyForce(n,v)}applyTorque(t){this.type===pe.DYNAMIC&&(this.sleepState===pe.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,i){if(i===void 0&&(i=new tt),this.type!==pe.DYNAMIC)return;this.sleepState===pe.SLEEPING&&this.wakeUp();const n=i,v=eU;v.copy(t),v.scale(this.invMass,v),this.velocity.vadd(v,this.velocity);const S=iU;n.cross(t,S),this.invInertiaWorld.vmult(S,S),this.angularVelocity.vadd(S,this.angularVelocity)}applyLocalImpulse(t,i){if(i===void 0&&(i=new tt),this.type!==pe.DYNAMIC)return;const n=nU,v=sU;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(i,v),this.applyImpulse(n,v)}updateMassProperties(){const t=rU;this.invMass=this.mass>0?1/this.mass:0;const i=this.inertia,n=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),$g.calculateInertia(t,this.mass,i),this.invInertia.set(i.x>0&&!n?1/i.x:0,i.y>0&&!n?1/i.y:0,i.z>0&&!n?1/i.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,i){const n=new tt;return t.vsub(this.position,n),this.angularVelocity.cross(n,i),this.velocity.vadd(i,i),i}integrate(t,i,n){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===pe.DYNAMIC||this.type===pe.KINEMATIC)||this.sleepState===pe.SLEEPING)return;const v=this.velocity,S=this.angularVelocity,s=this.position,T=this.force,e=this.torque,a=this.quaternion,m=this.invMass,c=this.invInertiaWorld,o=this.linearFactor,u=m*t;v.x+=T.x*u*o.x,v.y+=T.y*u*o.y,v.z+=T.z*u*o.z;const r=c.elements,h=this.angularFactor,d=e.x*h.x,l=e.y*h.y,p=e.z*h.z;S.x+=t*(r[0]*d+r[1]*l+r[2]*p),S.y+=t*(r[3]*d+r[4]*l+r[5]*p),S.z+=t*(r[6]*d+r[7]*l+r[8]*p),s.x+=v.x*t,s.y+=v.y*t,s.z+=v.z*t,a.integrate(this.angularVelocity,t,this.angularFactor,a),i&&(n?a.normalizeFast():a.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}pe.idCounter=0;pe.COLLIDE_EVENT_NAME="collide";pe.DYNAMIC=RT.DYNAMIC;pe.STATIC=RT.STATIC;pe.KINEMATIC=RT.KINEMATIC;pe.AWAKE=PT.AWAKE;pe.SLEEPY=PT.SLEEPY;pe.SLEEPING=PT.SLEEPING;pe.wakeupEvent={type:"wakeup"};pe.sleepyEvent={type:"sleepy"};pe.sleepEvent={type:"sleep"};const $B=new tt,KB=new gn,jB=new nr,QB=new Vr,ZB=new Vr;new Vr;const JB=new tt,qB=new tt,tU=new tt,eU=new tt,iU=new tt,nU=new tt,sU=new tt,rU=new tt;class aU{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(t,i,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(t,i){return!((t.collisionFilterGroup&i.collisionFilterMask)===0||(i.collisionFilterGroup&t.collisionFilterMask)===0||((t.type&pe.STATIC)!==0||t.sleepState===pe.SLEEPING)&&((i.type&pe.STATIC)!==0||i.sleepState===pe.SLEEPING))}intersectionTest(t,i,n,v){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,i,n,v):this.doBoundingSphereBroadphase(t,i,n,v)}doBoundingSphereBroadphase(t,i,n,v){const S=oU;i.position.vsub(t.position,S);const s=(t.boundingRadius+i.boundingRadius)**2;S.lengthSquared()<s&&(n.push(t),v.push(i))}doBoundingBoxBroadphase(t,i,n,v){t.aabbNeedsUpdate&&t.updateAABB(),i.aabbNeedsUpdate&&i.updateAABB(),t.aabb.overlaps(i.aabb)&&(n.push(t),v.push(i))}makePairsUnique(t,i){const n=lU,v=hU,S=uU,s=t.length;for(let T=0;T!==s;T++)v[T]=t[T],S[T]=i[T];t.length=0,i.length=0;for(let T=0;T!==s;T++){const e=v[T].id,a=S[T].id,m=e<a?`${e},${a}`:`${a},${e}`;n[m]=T,n.keys.push(m)}for(let T=0;T!==n.keys.length;T++){const e=n.keys.pop(),a=n[e];t.push(v[a]),i.push(S[a]),delete n[e]}}setWorld(t){}static boundingSphereCheck(t,i){const n=new tt;t.position.vsub(i.position,n);const v=t.shapes[0],S=i.shapes[0];return Math.pow(v.boundingSphereRadius+S.boundingSphereRadius,2)>n.lengthSquared()}aabbQuery(t,i,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const oU=new tt;new tt;new gn;new tt;const lU={keys:[]},hU=[],uU=[];new tt;new tt;new tt;class cU extends aU{constructor(){super()}collisionPairs(t,i,n){const v=t.bodies,S=v.length;let s,T;for(let e=0;e!==S;e++)for(let a=0;a!==e;a++)s=v[e],T=v[a],this.needBroadphaseCollision(s,T)&&this.intersectionTest(s,T,i,n)}aabbQuery(t,i,n){n===void 0&&(n=[]);for(let v=0;v<t.bodies.length;v++){const S=t.bodies[v];S.aabbNeedsUpdate&&S.updateAABB(),S.aabb.overlaps(i)&&n.push(S)}return n}}class ig{constructor(){this.rayFromWorld=new tt,this.rayToWorld=new tt,this.hitNormalWorld=new tt,this.hitPointWorld=new tt,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,i,n,v,S,s,T){this.rayFromWorld.copy(t),this.rayToWorld.copy(i),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(v),this.shape=S,this.body=s,this.distance=T}}let VR,zR,GR,_R,WR,HR,XR;const bT={CLOSEST:1,ANY:2,ALL:4};VR=me.types.SPHERE;zR=me.types.PLANE;GR=me.types.BOX;_R=me.types.CYLINDER;WR=me.types.CONVEXPOLYHEDRON;HR=me.types.HEIGHTFIELD;XR=me.types.TRIMESH;class vn{get[VR](){return this._intersectSphere}get[zR](){return this._intersectPlane}get[GR](){return this._intersectBox}get[_R](){return this._intersectConvex}get[WR](){return this._intersectConvex}get[HR](){return this._intersectHeightfield}get[XR](){return this._intersectTrimesh}constructor(t,i){t===void 0&&(t=new tt),i===void 0&&(i=new tt),this.from=t.clone(),this.to=i.clone(),this.direction=new tt,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=vn.ANY,this.result=new ig,this.hasHit=!1,this.callback=n=>{}}intersectWorld(t,i){return this.mode=i.mode||vn.ANY,this.result=i.result||new ig,this.skipBackfaces=!!i.skipBackfaces,this.collisionFilterMask=typeof i.collisionFilterMask<"u"?i.collisionFilterMask:-1,this.collisionFilterGroup=typeof i.collisionFilterGroup<"u"?i.collisionFilterGroup:-1,this.checkCollisionResponse=typeof i.checkCollisionResponse<"u"?i.checkCollisionResponse:!0,i.from&&this.from.copy(i.from),i.to&&this.to.copy(i.to),this.callback=i.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(dw),xx.length=0,t.broadphase.aabbQuery(t,dw,xx),this.intersectBodies(xx),this.hasHit}intersectBody(t,i){i&&(this.result=i,this.updateDirection());const n=this.checkCollisionResponse;if(n&&!t.collisionResponse||(this.collisionFilterGroup&t.collisionFilterMask)===0||(t.collisionFilterGroup&this.collisionFilterMask)===0)return;const v=fU,S=dU;for(let s=0,T=t.shapes.length;s<T;s++){const e=t.shapes[s];if(!(n&&!e.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[s],S),t.quaternion.vmult(t.shapeOffsets[s],v),v.vadd(t.position,v),this.intersectShape(e,S,v,t),this.result.shouldStop))break}}intersectBodies(t,i){i&&(this.result=i,this.updateDirection());for(let n=0,v=t.length;!this.result.shouldStop&&n<v;n++)this.intersectBody(t[n])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,i,n,v){const S=this.from;if(RU(S,this.direction,n)>t.boundingSphereRadius)return;const T=this[t.type];T&&T.call(this,t,i,n,v,t)}_intersectBox(t,i,n,v,S){return this._intersectConvex(t.convexPolyhedronRepresentation,i,n,v,S)}_intersectPlane(t,i,n,v,S){const s=this.from,T=this.to,e=this.direction,a=new tt(0,0,1);i.vmult(a,a);const m=new tt;s.vsub(n,m);const c=m.dot(a);T.vsub(n,m);const o=m.dot(a);if(c*o>0||s.distanceTo(T)<c)return;const u=a.dot(e);if(Math.abs(u)<this.precision)return;const r=new tt,h=new tt,d=new tt;s.vsub(n,r);const l=-a.dot(r)/u;e.scale(l,h),s.vadd(h,d),this.reportIntersection(a,d,S,v,-1)}getAABB(t){const{lowerBound:i,upperBound:n}=t,v=this.to,S=this.from;i.x=Math.min(v.x,S.x),i.y=Math.min(v.y,S.y),i.z=Math.min(v.z,S.z),n.x=Math.max(v.x,S.x),n.y=Math.max(v.y,S.y),n.z=Math.max(v.z,S.z)}_intersectHeightfield(t,i,n,v,S){t.data,t.elementSize;const s=pU;s.from.copy(this.from),s.to.copy(this.to),pi.pointToLocalFrame(n,i,s.from,s.from),pi.pointToLocalFrame(n,i,s.to,s.to),s.updateDirection();const T=vU;let e,a,m,c;e=a=0,m=c=t.data.length-1;const o=new nr;s.getAABB(o),t.getIndexOfPosition(o.lowerBound.x,o.lowerBound.y,T,!0),e=Math.max(e,T[0]),a=Math.max(a,T[1]),t.getIndexOfPosition(o.upperBound.x,o.upperBound.y,T,!0),m=Math.min(m,T[0]+1),c=Math.min(c,T[1]+1);for(let u=e;u<m;u++)for(let r=a;r<c;r++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(u,r,o),!!o.overlapsRay(s)){if(t.getConvexTrianglePillar(u,r,!1),pi.pointToWorldFrame(n,i,t.pillarOffset,rm),this._intersectConvex(t.pillarConvex,i,rm,v,S,pw),this.result.shouldStop)return;t.getConvexTrianglePillar(u,r,!0),pi.pointToWorldFrame(n,i,t.pillarOffset,rm),this._intersectConvex(t.pillarConvex,i,rm,v,S,pw)}}}_intersectSphere(t,i,n,v,S){const s=this.from,T=this.to,e=t.radius,a=(T.x-s.x)**2+(T.y-s.y)**2+(T.z-s.z)**2,m=2*((T.x-s.x)*(s.x-n.x)+(T.y-s.y)*(s.y-n.y)+(T.z-s.z)*(s.z-n.z)),c=(s.x-n.x)**2+(s.y-n.y)**2+(s.z-n.z)**2-e**2,o=m**2-4*a*c,u=mU,r=gU;if(!(o<0))if(o===0)s.lerp(T,o,u),u.vsub(n,r),r.normalize(),this.reportIntersection(r,u,S,v,-1);else{const h=(-m-Math.sqrt(o))/(2*a),d=(-m+Math.sqrt(o))/(2*a);if(h>=0&&h<=1&&(s.lerp(T,h,u),u.vsub(n,r),r.normalize(),this.reportIntersection(r,u,S,v,-1)),this.result.shouldStop)return;d>=0&&d<=1&&(s.lerp(T,d,u),u.vsub(n,r),r.normalize(),this.reportIntersection(r,u,S,v,-1))}}_intersectConvex(t,i,n,v,S,s){const T=xU,e=vw,a=s&&s.faceList||null,m=t.faces,c=t.vertices,o=t.faceNormals,u=this.direction,r=this.from,h=this.to,d=r.distanceTo(h),l=a?a.length:m.length,p=this.result;for(let g=0;!p.shouldStop&&g<l;g++){const x=a?a[g]:g,y=m[x],E=o[x],w=i,C=n;e.copy(c[y[0]]),w.vmult(e,e),e.vadd(C,e),e.vsub(r,e),w.vmult(E,T);const A=u.dot(T);if(Math.abs(A)<this.precision)continue;const M=T.dot(e)/A;if(!(M<0)){u.scale(M,ms),ms.vadd(r,ms),Ir.copy(c[y[0]]),w.vmult(Ir,Ir),C.vadd(Ir,Ir);for(let R=1;!p.shouldStop&&R<y.length-1;R++){na.copy(c[y[R]]),sa.copy(c[y[R+1]]),w.vmult(na,na),w.vmult(sa,sa),C.vadd(na,na),C.vadd(sa,sa);const P=ms.distanceTo(r);!(vn.pointInTriangle(ms,Ir,na,sa)||vn.pointInTriangle(ms,na,Ir,sa))||P>d||this.reportIntersection(T,ms,S,v,x)}}}}_intersectTrimesh(t,i,n,v,S,s){const T=yU,e=CU,a=MU,m=vw,c=TU,o=EU,u=SU,r=AU,h=wU,d=t.indices;t.vertices;const l=this.from,p=this.to,g=this.direction;a.position.copy(n),a.quaternion.copy(i),pi.vectorToLocalFrame(n,i,g,c),pi.pointToLocalFrame(n,i,l,o),pi.pointToLocalFrame(n,i,p,u),u.x*=t.scale.x,u.y*=t.scale.y,u.z*=t.scale.z,o.x*=t.scale.x,o.y*=t.scale.y,o.z*=t.scale.z,u.vsub(o,c),c.normalize();const x=o.distanceSquared(u);t.tree.rayQuery(this,a,e);for(let y=0,E=e.length;!this.result.shouldStop&&y!==E;y++){const w=e[y];t.getNormal(w,T),t.getVertex(d[w*3],Ir),Ir.vsub(o,m);const C=c.dot(T),A=T.dot(m)/C;if(A<0)continue;c.scale(A,ms),ms.vadd(o,ms),t.getVertex(d[w*3+1],na),t.getVertex(d[w*3+2],sa);const M=ms.distanceSquared(o);!(vn.pointInTriangle(ms,na,Ir,sa)||vn.pointInTriangle(ms,Ir,na,sa))||M>x||(pi.vectorToWorldFrame(i,T,h),pi.pointToWorldFrame(n,i,ms,r),this.reportIntersection(h,r,S,v,w))}e.length=0}reportIntersection(t,i,n,v,S){const s=this.from,T=this.to,e=s.distanceTo(i),a=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(a.hitFaceIndex=typeof S<"u"?S:-1,this.mode){case vn.ALL:this.hasHit=!0,a.set(s,T,t,i,n,v,e),a.hasHit=!0,this.callback(a);break;case vn.CLOSEST:(e<a.distance||!a.hasHit)&&(this.hasHit=!0,a.hasHit=!0,a.set(s,T,t,i,n,v,e));break;case vn.ANY:this.hasHit=!0,a.hasHit=!0,a.set(s,T,t,i,n,v,e),a.shouldStop=!0;break}}static pointInTriangle(t,i,n,v){v.vsub(i,fh),n.vsub(i,ud),t.vsub(i,yx);const S=fh.dot(fh),s=fh.dot(ud),T=fh.dot(yx),e=ud.dot(ud),a=ud.dot(yx);let m,c;return(m=e*T-s*a)>=0&&(c=S*a-s*T)>=0&&m+c<S*e-s*s}}vn.CLOSEST=bT.CLOSEST;vn.ANY=bT.ANY;vn.ALL=bT.ALL;const dw=new nr,xx=[],ud=new tt,yx=new tt,fU=new tt,dU=new gn,ms=new tt,Ir=new tt,na=new tt,sa=new tt;new tt;new ig;const pw={faceList:[0]},rm=new tt,pU=new vn,vU=[],mU=new tt,gU=new tt,xU=new tt;new tt;new tt;const vw=new tt,yU=new tt,TU=new tt,EU=new tt,SU=new tt,wU=new tt,AU=new tt;new nr;const CU=[],MU=new pi,fh=new tt,am=new tt;function RU(f,t,i){i.vsub(f,fh);const n=fh.dot(t);return t.scale(n,am),am.vadd(f,am),i.distanceTo(am)}class PU{static defaults(t,i){t===void 0&&(t={});for(let n in i)n in t||(t[n]=i[n]);return t}}class mw{constructor(){this.spatial=new tt,this.rotational=new tt}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,i){return t.dot(this.spatial)+i.dot(this.rotational)}}class _p{constructor(t,i,n,v){n===void 0&&(n=-1e6),v===void 0&&(v=1e6),this.id=_p.idCounter++,this.minForce=n,this.maxForce=v,this.bi=t,this.bj=i,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new mw,this.jacobianElementB=new mw,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(t,i,n){const v=i,S=t,s=n;this.a=4/(s*(1+4*v)),this.b=4*v/(1+4*v),this.eps=4/(s*s*S*(1+4*v))}computeB(t,i,n){const v=this.computeGW(),S=this.computeGq(),s=this.computeGiMf();return-S*t-v*i-s*n}computeGq(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,v=this.bj,S=n.position,s=v.position;return t.spatial.dot(S)+i.spatial.dot(s)}computeGW(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,v=this.bj,S=n.velocity,s=v.velocity,T=n.angularVelocity,e=v.angularVelocity;return t.multiplyVectors(S,T)+i.multiplyVectors(s,e)}computeGWlambda(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,v=this.bj,S=n.vlambda,s=v.vlambda,T=n.wlambda,e=v.wlambda;return t.multiplyVectors(S,T)+i.multiplyVectors(s,e)}computeGiMf(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,v=this.bj,S=n.force,s=n.torque,T=v.force,e=v.torque,a=n.invMassSolve,m=v.invMassSolve;return S.scale(a,gw),T.scale(m,xw),n.invInertiaWorldSolve.vmult(s,yw),v.invInertiaWorldSolve.vmult(e,Tw),t.multiplyVectors(gw,yw)+i.multiplyVectors(xw,Tw)}computeGiMGt(){const t=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,v=this.bj,S=n.invMassSolve,s=v.invMassSolve,T=n.invInertiaWorldSolve,e=v.invInertiaWorldSolve;let a=S+s;return T.vmult(t.rotational,om),a+=om.dot(t.rotational),e.vmult(i.rotational,om),a+=om.dot(i.rotational),a}addToWlambda(t){const i=this.jacobianElementA,n=this.jacobianElementB,v=this.bi,S=this.bj,s=bU;v.vlambda.addScaledVector(v.invMassSolve*t,i.spatial,v.vlambda),S.vlambda.addScaledVector(S.invMassSolve*t,n.spatial,S.vlambda),v.invInertiaWorldSolve.vmult(i.rotational,s),v.wlambda.addScaledVector(t,s,v.wlambda),S.invInertiaWorldSolve.vmult(n.rotational,s),S.wlambda.addScaledVector(t,s,S.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}_p.idCounter=0;const gw=new tt,xw=new tt,yw=new tt,Tw=new tt,om=new tt,bU=new tt;class IU extends _p{constructor(t,i,n){n===void 0&&(n=1e6),super(t,i,0,n),this.restitution=0,this.ri=new tt,this.rj=new tt,this.ni=new tt}computeB(t){const i=this.a,n=this.b,v=this.bi,S=this.bj,s=this.ri,T=this.rj,e=LU,a=FU,m=v.velocity,c=v.angularVelocity;v.force,v.torque;const o=S.velocity,u=S.angularVelocity;S.force,S.torque;const r=DU,h=this.jacobianElementA,d=this.jacobianElementB,l=this.ni;s.cross(l,e),T.cross(l,a),l.negate(h.spatial),e.negate(h.rotational),d.spatial.copy(l),d.rotational.copy(a),r.copy(S.position),r.vadd(T,r),r.vsub(v.position,r),r.vsub(s,r);const p=l.dot(r),g=this.restitution+1,x=g*o.dot(l)-g*m.dot(l)+u.dot(a)-c.dot(e),y=this.computeGiMf();return-p*i-x*n-t*y}getImpactVelocityAlongNormal(){const t=OU,i=NU,n=BU,v=UU,S=VU;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,v),this.bi.getVelocityAtWorldPoint(n,t),this.bj.getVelocityAtWorldPoint(v,i),t.vsub(i,S),this.ni.dot(S)}}const LU=new tt,FU=new tt,DU=new tt,OU=new tt,NU=new tt,BU=new tt,UU=new tt,VU=new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;class Ew extends _p{constructor(t,i,n){super(t,i,-n,n),this.ri=new tt,this.rj=new tt,this.t=new tt}computeB(t){this.a;const i=this.b;this.bi,this.bj;const n=this.ri,v=this.rj,S=zU,s=GU,T=this.t;n.cross(T,S),v.cross(T,s);const e=this.jacobianElementA,a=this.jacobianElementB;T.negate(e.spatial),S.negate(e.rotational),a.spatial.copy(T),a.rotational.copy(s);const m=this.computeGW(),c=this.computeGiMf();return-m*i-t*c}}const zU=new tt,GU=new tt;class Fh{constructor(t,i,n){n=PU.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=Fh.idCounter++,this.materials=[t,i],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}}Fh.idCounter=0;class Dh{constructor(t){t===void 0&&(t={});let i="";typeof t=="string"&&(i=t,t={}),this.name=i,this.id=Dh.idCounter++,this.friction=typeof t.friction<"u"?t.friction:-1,this.restitution=typeof t.restitution<"u"?t.restitution:-1}}Dh.idCounter=0;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new vn;new tt;new tt;new tt;new tt(1,0,0),new tt(0,1,0),new tt(0,0,1);new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;class Tx extends me{constructor(){super({type:me.types.PLANE}),this.worldNormal=new tt,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}computeWorldNormal(t){const i=this.worldNormal;i.set(0,0,1),t.vmult(i,i),this.worldNormalNeedsUpdate=!1}calculateLocalInertia(t,i){return i===void 0&&(i=new tt),i}volume(){return Number.MAX_VALUE}calculateWorldAABB(t,i,n,v){za.set(0,0,1),i.vmult(za,za);const S=Number.MAX_VALUE;n.set(-S,-S,-S),v.set(S,S,S),za.x===1?v.x=t.x:za.x===-1&&(n.x=t.x),za.y===1?v.y=t.y:za.y===-1&&(n.y=t.y),za.z===1?v.z=t.z:za.z===-1&&(n.z=t.z)}updateBoundingSphereRadius(){this.boundingSphereRadius=Number.MAX_VALUE}}const za=new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new nr;new tt;new nr;new tt;new tt;new tt;new tt;new tt;new tt;new tt;new nr;new tt;new pi;new nr;class _U{constructor(){this.equations=[]}solve(t,i){return 0}addEquation(t){t.enabled&&!t.bi.isTrigger&&!t.bj.isTrigger&&this.equations.push(t)}removeEquation(t){const i=this.equations,n=i.indexOf(t);n!==-1&&i.splice(n,1)}removeAllEquations(){this.equations.length=0}}class WU extends _U{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(t,i){let n=0;const v=this.iterations,S=this.tolerance*this.tolerance,s=this.equations,T=s.length,e=i.bodies,a=e.length,m=t;let c,o,u,r,h,d;if(T!==0)for(let x=0;x!==a;x++)e[x].updateSolveMassProperties();const l=XU,p=kU,g=HU;l.length=T,p.length=T,g.length=T;for(let x=0;x!==T;x++){const y=s[x];g[x]=0,p[x]=y.computeB(m),l[x]=1/y.computeC()}if(T!==0){for(let E=0;E!==a;E++){const w=e[E],C=w.vlambda,A=w.wlambda;C.set(0,0,0),A.set(0,0,0)}for(n=0;n!==v;n++){r=0;for(let E=0;E!==T;E++){const w=s[E];c=p[E],o=l[E],d=g[E],h=w.computeGWlambda(),u=o*(c-h-w.eps*d),d+u<w.minForce?u=w.minForce-d:d+u>w.maxForce&&(u=w.maxForce-d),g[E]+=u,r+=u>0?u:-u,w.addToWlambda(u)}if(r*r<S)break}for(let E=0;E!==a;E++){const w=e[E],C=w.velocity,A=w.angularVelocity;w.vlambda.vmul(w.linearFactor,w.vlambda),C.vadd(w.vlambda,C),w.wlambda.vmul(w.angularFactor,w.wlambda),A.vadd(w.wlambda,A)}let x=s.length;const y=1/m;for(;x--;)s[x].multiplier=g[x]*y}return n}}const HU=[],XU=[],kU=[];class YU{constructor(){this.objects=[],this.type=Object}release(){const t=arguments.length;for(let i=0;i!==t;i++)this.objects.push(i<0||arguments.length<=i?void 0:arguments[i]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){const i=this.objects;for(;i.length>t;)i.pop();for(;i.length<t;)i.push(this.constructObject());return this}}class $U extends YU{constructor(){super(...arguments),this.type=tt}constructObject(){return new tt}}const Oi={sphereSphere:me.types.SPHERE,spherePlane:me.types.SPHERE|me.types.PLANE,boxBox:me.types.BOX|me.types.BOX,sphereBox:me.types.SPHERE|me.types.BOX,planeBox:me.types.PLANE|me.types.BOX,convexConvex:me.types.CONVEXPOLYHEDRON,sphereConvex:me.types.SPHERE|me.types.CONVEXPOLYHEDRON,planeConvex:me.types.PLANE|me.types.CONVEXPOLYHEDRON,boxConvex:me.types.BOX|me.types.CONVEXPOLYHEDRON,sphereHeightfield:me.types.SPHERE|me.types.HEIGHTFIELD,boxHeightfield:me.types.BOX|me.types.HEIGHTFIELD,convexHeightfield:me.types.CONVEXPOLYHEDRON|me.types.HEIGHTFIELD,sphereParticle:me.types.PARTICLE|me.types.SPHERE,planeParticle:me.types.PLANE|me.types.PARTICLE,boxParticle:me.types.BOX|me.types.PARTICLE,convexParticle:me.types.PARTICLE|me.types.CONVEXPOLYHEDRON,cylinderCylinder:me.types.CYLINDER,sphereCylinder:me.types.SPHERE|me.types.CYLINDER,planeCylinder:me.types.PLANE|me.types.CYLINDER,boxCylinder:me.types.BOX|me.types.CYLINDER,convexCylinder:me.types.CONVEXPOLYHEDRON|me.types.CYLINDER,heightfieldCylinder:me.types.HEIGHTFIELD|me.types.CYLINDER,particleCylinder:me.types.PARTICLE|me.types.CYLINDER,sphereTrimesh:me.types.SPHERE|me.types.TRIMESH,planeTrimesh:me.types.PLANE|me.types.TRIMESH};class KU{get[Oi.sphereSphere](){return this.sphereSphere}get[Oi.spherePlane](){return this.spherePlane}get[Oi.boxBox](){return this.boxBox}get[Oi.sphereBox](){return this.sphereBox}get[Oi.planeBox](){return this.planeBox}get[Oi.convexConvex](){return this.convexConvex}get[Oi.sphereConvex](){return this.sphereConvex}get[Oi.planeConvex](){return this.planeConvex}get[Oi.boxConvex](){return this.boxConvex}get[Oi.sphereHeightfield](){return this.sphereHeightfield}get[Oi.boxHeightfield](){return this.boxHeightfield}get[Oi.convexHeightfield](){return this.convexHeightfield}get[Oi.sphereParticle](){return this.sphereParticle}get[Oi.planeParticle](){return this.planeParticle}get[Oi.boxParticle](){return this.boxParticle}get[Oi.convexParticle](){return this.convexParticle}get[Oi.cylinderCylinder](){return this.convexConvex}get[Oi.sphereCylinder](){return this.sphereConvex}get[Oi.planeCylinder](){return this.planeConvex}get[Oi.boxCylinder](){return this.boxConvex}get[Oi.convexCylinder](){return this.convexConvex}get[Oi.heightfieldCylinder](){return this.heightfieldCylinder}get[Oi.particleCylinder](){return this.particleCylinder}get[Oi.sphereTrimesh](){return this.sphereTrimesh}get[Oi.planeTrimesh](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new $U,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,i,n,v,S,s){let T;this.contactPointPool.length?(T=this.contactPointPool.pop(),T.bi=t,T.bj=i):T=new IU(t,i),T.enabled=t.collisionResponse&&i.collisionResponse&&n.collisionResponse&&v.collisionResponse;const e=this.currentContactMaterial;T.restitution=e.restitution,T.setSpookParams(e.contactEquationStiffness,e.contactEquationRelaxation,this.world.dt);const a=n.material||t.material,m=v.material||i.material;return a&&m&&a.restitution>=0&&m.restitution>=0&&(T.restitution=a.restitution*m.restitution),T.si=S||n,T.sj=s||v,T}createFrictionEquationsFromContact(t,i){const n=t.bi,v=t.bj,S=t.si,s=t.sj,T=this.world,e=this.currentContactMaterial;let a=e.friction;const m=S.material||n.material,c=s.material||v.material;if(m&&c&&m.friction>=0&&c.friction>=0&&(a=m.friction*c.friction),a>0){const o=a*(T.frictionGravity||T.gravity).length();let u=n.invMass+v.invMass;u>0&&(u=1/u);const r=this.frictionEquationPool,h=r.length?r.pop():new Ew(n,v,o*u),d=r.length?r.pop():new Ew(n,v,o*u);return h.bi=d.bi=n,h.bj=d.bj=v,h.minForce=d.minForce=-o*u,h.maxForce=d.maxForce=o*u,h.ri.copy(t.ri),h.rj.copy(t.rj),d.ri.copy(t.ri),d.rj.copy(t.rj),t.ni.tangents(h.t,d.t),h.setSpookParams(e.frictionEquationStiffness,e.frictionEquationRelaxation,T.dt),d.setSpookParams(e.frictionEquationStiffness,e.frictionEquationRelaxation,T.dt),h.enabled=d.enabled=t.enabled,i.push(h,d),!0}return!1}createFrictionFromAverage(t){let i=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(i,this.frictionResult)||t===1)return;const n=this.frictionResult[this.frictionResult.length-2],v=this.frictionResult[this.frictionResult.length-1];ql.setZero(),Hu.setZero(),Xu.setZero();const S=i.bi;i.bj;for(let T=0;T!==t;T++)i=this.result[this.result.length-1-T],i.bi!==S?(ql.vadd(i.ni,ql),Hu.vadd(i.ri,Hu),Xu.vadd(i.rj,Xu)):(ql.vsub(i.ni,ql),Hu.vadd(i.rj,Hu),Xu.vadd(i.ri,Xu));const s=1/t;Hu.scale(s,n.ri),Xu.scale(s,n.rj),v.ri.copy(n.ri),v.rj.copy(n.rj),ql.normalize(),ql.tangents(n.t,v.t)}getContacts(t,i,n,v,S,s,T){this.contactPointPool=S,this.frictionEquationPool=T,this.result=v,this.frictionResult=s;const e=ZU,a=JU,m=jU,c=QU;for(let o=0,u=t.length;o!==u;o++){const r=t[o],h=i[o];let d=null;r.material&&h.material&&(d=n.getContactMaterial(r.material,h.material)||null);const l=r.type&pe.KINEMATIC&&h.type&pe.STATIC||r.type&pe.STATIC&&h.type&pe.KINEMATIC||r.type&pe.KINEMATIC&&h.type&pe.KINEMATIC;for(let p=0;p<r.shapes.length;p++){r.quaternion.mult(r.shapeOrientations[p],e),r.quaternion.vmult(r.shapeOffsets[p],m),m.vadd(r.position,m);const g=r.shapes[p];for(let x=0;x<h.shapes.length;x++){h.quaternion.mult(h.shapeOrientations[x],a),h.quaternion.vmult(h.shapeOffsets[x],c),c.vadd(h.position,c);const y=h.shapes[x];if(!(g.collisionFilterMask&y.collisionFilterGroup&&y.collisionFilterMask&g.collisionFilterGroup)||m.distanceTo(c)>g.boundingSphereRadius+y.boundingSphereRadius)continue;let E=null;g.material&&y.material&&(E=n.getContactMaterial(g.material,y.material)||null),this.currentContactMaterial=E||d||n.defaultContactMaterial;const w=g.type|y.type,C=this[w];if(C){let A=!1;g.type<y.type?A=C.call(this,g,y,m,c,e,a,r,h,g,y,l):A=C.call(this,y,g,c,m,a,e,h,r,g,y,l),A&&l&&(n.shapeOverlapKeeper.set(g.id,y.id),n.bodyOverlapKeeper.set(r.id,h.id))}}}}}sphereSphere(t,i,n,v,S,s,T,e,a,m,c){if(c)return n.distanceSquared(v)<(t.radius+i.radius)**2;const o=this.createContactEquation(T,e,t,i,a,m);v.vsub(n,o.ni),o.ni.normalize(),o.ri.copy(o.ni),o.rj.copy(o.ni),o.ri.scale(t.radius,o.ri),o.rj.scale(-i.radius,o.rj),o.ri.vadd(n,o.ri),o.ri.vsub(T.position,o.ri),o.rj.vadd(v,o.rj),o.rj.vsub(e.position,o.rj),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}spherePlane(t,i,n,v,S,s,T,e,a,m,c){const o=this.createContactEquation(T,e,t,i,a,m);if(o.ni.set(0,0,1),s.vmult(o.ni,o.ni),o.ni.negate(o.ni),o.ni.normalize(),o.ni.scale(t.radius,o.ri),n.vsub(v,lm),o.ni.scale(o.ni.dot(lm),Sw),lm.vsub(Sw,o.rj),-lm.dot(o.ni)<=t.radius){if(c)return!0;const u=o.ri,r=o.rj;u.vadd(n,u),u.vsub(T.position,u),r.vadd(v,r),r.vsub(e.position,r),this.result.push(o),this.createFrictionEquationsFromContact(o,this.frictionResult)}}boxBox(t,i,n,v,S,s,T,e,a,m,c){return t.convexPolyhedronRepresentation.material=t.material,i.convexPolyhedronRepresentation.material=i.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,i.convexPolyhedronRepresentation.collisionResponse=i.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,i.convexPolyhedronRepresentation,n,v,S,s,T,e,t,i,c)}sphereBox(t,i,n,v,S,s,T,e,a,m,c){const o=this.v3pool,u=AV;n.vsub(v,hm),i.getSideNormals(u,s);const r=t.radius;let h=!1;const d=MV,l=RV,p=PV;let g=null,x=0,y=0,E=0,w=null;for(let L=0,D=u.length;L!==D&&h===!1;L++){const O=EV;O.copy(u[L]);const z=O.length();O.normalize();const W=hm.dot(O);if(W<z+r&&W>0){const k=SV,X=wV;k.copy(u[(L+1)%3]),X.copy(u[(L+2)%3]);const V=k.length(),G=X.length();k.normalize(),X.normalize();const N=hm.dot(k),H=hm.dot(X);if(N<V&&N>-V&&H<G&&H>-G){const U=Math.abs(W-z-r);if((w===null||U<w)&&(w=U,y=N,E=H,g=z,d.copy(O),l.copy(k),p.copy(X),x++,c))return!0}}}if(x){h=!0;const L=this.createContactEquation(T,e,t,i,a,m);d.scale(-r,L.ri),L.ni.copy(d),L.ni.negate(L.ni),d.scale(g,d),l.scale(y,l),d.vadd(l,d),p.scale(E,p),d.vadd(p,L.rj),L.ri.vadd(n,L.ri),L.ri.vsub(T.position,L.ri),L.rj.vadd(v,L.rj),L.rj.vsub(e.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}let C=o.get();const A=CV;for(let L=0;L!==2&&!h;L++)for(let D=0;D!==2&&!h;D++)for(let O=0;O!==2&&!h;O++)if(C.set(0,0,0),L?C.vadd(u[0],C):C.vsub(u[0],C),D?C.vadd(u[1],C):C.vsub(u[1],C),O?C.vadd(u[2],C):C.vsub(u[2],C),v.vadd(C,A),A.vsub(n,A),A.lengthSquared()<r*r){if(c)return!0;h=!0;const z=this.createContactEquation(T,e,t,i,a,m);z.ri.copy(A),z.ri.normalize(),z.ni.copy(z.ri),z.ri.scale(r,z.ri),z.rj.copy(C),z.ri.vadd(n,z.ri),z.ri.vsub(T.position,z.ri),z.rj.vadd(v,z.rj),z.rj.vsub(e.position,z.rj),this.result.push(z),this.createFrictionEquationsFromContact(z,this.frictionResult)}o.release(C),C=null;const M=o.get(),R=o.get(),P=o.get(),b=o.get(),F=o.get(),I=u.length;for(let L=0;L!==I&&!h;L++)for(let D=0;D!==I&&!h;D++)if(L%3!==D%3){u[D].cross(u[L],M),M.normalize(),u[L].vadd(u[D],R),P.copy(n),P.vsub(R,P),P.vsub(v,P);const O=P.dot(M);M.scale(O,b);let z=0;for(;z===L%3||z===D%3;)z++;F.copy(n),F.vsub(b,F),F.vsub(R,F),F.vsub(v,F);const W=Math.abs(O),k=F.length();if(W<u[z].length()&&k<r){if(c)return!0;h=!0;const X=this.createContactEquation(T,e,t,i,a,m);R.vadd(b,X.rj),X.rj.copy(X.rj),F.negate(X.ni),X.ni.normalize(),X.ri.copy(X.rj),X.ri.vadd(v,X.ri),X.ri.vsub(n,X.ri),X.ri.normalize(),X.ri.scale(r,X.ri),X.ri.vadd(n,X.ri),X.ri.vsub(T.position,X.ri),X.rj.vadd(v,X.rj),X.rj.vsub(e.position,X.rj),this.result.push(X),this.createFrictionEquationsFromContact(X,this.frictionResult)}}o.release(M,R,P,b,F)}planeBox(t,i,n,v,S,s,T,e,a,m,c){return i.convexPolyhedronRepresentation.material=i.material,i.convexPolyhedronRepresentation.collisionResponse=i.collisionResponse,i.convexPolyhedronRepresentation.id=i.id,this.planeConvex(t,i.convexPolyhedronRepresentation,n,v,S,s,T,e,t,i,c)}convexConvex(t,i,n,v,S,s,T,e,a,m,c,o,u){const r=HV;if(!(n.distanceTo(v)>t.boundingSphereRadius+i.boundingSphereRadius)&&t.findSeparatingAxis(i,n,S,v,s,r,o,u)){const h=[],d=XV;t.clipAgainstHull(n,S,i,v,s,r,-100,100,h);let l=0;for(let p=0;p!==h.length;p++){if(c)return!0;const g=this.createContactEquation(T,e,t,i,a,m),x=g.ri,y=g.rj;r.negate(g.ni),h[p].normal.negate(d),d.scale(h[p].depth,d),h[p].point.vadd(d,x),y.copy(h[p].point),x.vsub(n,x),y.vsub(v,y),x.vadd(n,x),x.vsub(T.position,x),y.vadd(v,y),y.vsub(e.position,y),this.result.push(g),l++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(g,this.frictionResult)}this.enableFrictionReduction&&l&&this.createFrictionFromAverage(l)}}sphereConvex(t,i,n,v,S,s,T,e,a,m,c){const o=this.v3pool;n.vsub(v,bV);const u=i.faceNormals,r=i.faces,h=i.vertices,d=t.radius;let l=!1;for(let p=0;p!==h.length;p++){const g=h[p],x=DV;s.vmult(g,x),v.vadd(x,x);const y=FV;if(x.vsub(n,y),y.lengthSquared()<d*d){if(c)return!0;l=!0;const E=this.createContactEquation(T,e,t,i,a,m);E.ri.copy(y),E.ri.normalize(),E.ni.copy(E.ri),E.ri.scale(d,E.ri),x.vsub(v,E.rj),E.ri.vadd(n,E.ri),E.ri.vsub(T.position,E.ri),E.rj.vadd(v,E.rj),E.rj.vsub(e.position,E.rj),this.result.push(E),this.createFrictionEquationsFromContact(E,this.frictionResult);return}}for(let p=0,g=r.length;p!==g&&l===!1;p++){const x=u[p],y=r[p],E=OV;s.vmult(x,E);const w=NV;s.vmult(h[y[0]],w),w.vadd(v,w);const C=BV;E.scale(-d,C),n.vadd(C,C);const A=UV;C.vsub(w,A);const M=A.dot(E),R=VV;if(n.vsub(w,R),M<0&&R.dot(E)>0){const P=[];for(let b=0,F=y.length;b!==F;b++){const I=o.get();s.vmult(h[y[b]],I),v.vadd(I,I),P.push(I)}if(TV(P,E,n)){if(c)return!0;l=!0;const b=this.createContactEquation(T,e,t,i,a,m);E.scale(-d,b.ri),E.negate(b.ni);const F=o.get();E.scale(-M,F);const I=o.get();E.scale(-d,I),n.vsub(v,b.rj),b.rj.vadd(I,b.rj),b.rj.vadd(F,b.rj),b.rj.vadd(v,b.rj),b.rj.vsub(e.position,b.rj),b.ri.vadd(n,b.ri),b.ri.vsub(T.position,b.ri),o.release(F),o.release(I),this.result.push(b),this.createFrictionEquationsFromContact(b,this.frictionResult);for(let L=0,D=P.length;L!==D;L++)o.release(P[L]);return}else for(let b=0;b!==y.length;b++){const F=o.get(),I=o.get();s.vmult(h[y[(b+1)%y.length]],F),s.vmult(h[y[(b+2)%y.length]],I),v.vadd(F,F),v.vadd(I,I);const L=IV;I.vsub(F,L);const D=LV;L.unit(D);const O=o.get(),z=o.get();n.vsub(F,z);const W=z.dot(D);D.scale(W,O),O.vadd(F,O);const k=o.get();if(O.vsub(n,k),W>0&&W*W<L.lengthSquared()&&k.lengthSquared()<d*d){if(c)return!0;const X=this.createContactEquation(T,e,t,i,a,m);O.vsub(v,X.rj),O.vsub(n,X.ni),X.ni.normalize(),X.ni.scale(d,X.ri),X.rj.vadd(v,X.rj),X.rj.vsub(e.position,X.rj),X.ri.vadd(n,X.ri),X.ri.vsub(T.position,X.ri),this.result.push(X),this.createFrictionEquationsFromContact(X,this.frictionResult);for(let V=0,G=P.length;V!==G;V++)o.release(P[V]);o.release(F),o.release(I),o.release(O),o.release(k),o.release(z);return}o.release(F),o.release(I),o.release(O),o.release(k),o.release(z)}for(let b=0,F=P.length;b!==F;b++)o.release(P[b])}}}planeConvex(t,i,n,v,S,s,T,e,a,m,c){const o=zV,u=GV;u.set(0,0,1),S.vmult(u,u);let r=0;const h=_V;for(let d=0;d!==i.vertices.length;d++)if(o.copy(i.vertices[d]),s.vmult(o,o),v.vadd(o,o),o.vsub(n,h),u.dot(h)<=0){if(c)return!0;const p=this.createContactEquation(T,e,t,i,a,m),g=WV;u.scale(u.dot(h),g),o.vsub(g,g),g.vsub(n,p.ri),p.ni.copy(u),o.vsub(v,p.rj),p.ri.vadd(n,p.ri),p.ri.vsub(T.position,p.ri),p.rj.vadd(v,p.rj),p.rj.vsub(e.position,p.rj),this.result.push(p),r++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(p,this.frictionResult)}this.enableFrictionReduction&&r&&this.createFrictionFromAverage(r)}boxConvex(t,i,n,v,S,s,T,e,a,m,c){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,i,n,v,S,s,T,e,t,i,c)}sphereHeightfield(t,i,n,v,S,s,T,e,a,m,c){const o=i.data,u=t.radius,r=i.elementSize,h=i7,d=e7;pi.pointToLocalFrame(v,s,n,d);let l=Math.floor((d.x-u)/r)-1,p=Math.ceil((d.x+u)/r)+1,g=Math.floor((d.y-u)/r)-1,x=Math.ceil((d.y+u)/r)+1;if(p<0||x<0||l>o.length||g>o[0].length)return;l<0&&(l=0),p<0&&(p=0),g<0&&(g=0),x<0&&(x=0),l>=o.length&&(l=o.length-1),p>=o.length&&(p=o.length-1),x>=o[0].length&&(x=o[0].length-1),g>=o[0].length&&(g=o[0].length-1);const y=[];i.getRectMinMax(l,g,p,x,y);const E=y[0],w=y[1];if(d.z-u>w||d.z+u<E)return;const C=this.result;for(let A=l;A<p;A++)for(let M=g;M<x;M++){const R=C.length;let P=!1;if(i.getConvexTrianglePillar(A,M,!1),pi.pointToWorldFrame(v,s,i.pillarOffset,h),n.distanceTo(h)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(P=this.sphereConvex(t,i.pillarConvex,n,h,S,s,T,e,t,i,c)),c&&P||(i.getConvexTrianglePillar(A,M,!0),pi.pointToWorldFrame(v,s,i.pillarOffset,h),n.distanceTo(h)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(P=this.sphereConvex(t,i.pillarConvex,n,h,S,s,T,e,t,i,c)),c&&P))return!0;if(C.length-R>2)return}}boxHeightfield(t,i,n,v,S,s,T,e,a,m,c){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,i,n,v,S,s,T,e,t,i,c)}convexHeightfield(t,i,n,v,S,s,T,e,a,m,c){const o=i.data,u=i.elementSize,r=t.boundingSphereRadius,h=qV,d=t7,l=JV;pi.pointToLocalFrame(v,s,n,l);let p=Math.floor((l.x-r)/u)-1,g=Math.ceil((l.x+r)/u)+1,x=Math.floor((l.y-r)/u)-1,y=Math.ceil((l.y+r)/u)+1;if(g<0||y<0||p>o.length||x>o[0].length)return;p<0&&(p=0),g<0&&(g=0),x<0&&(x=0),y<0&&(y=0),p>=o.length&&(p=o.length-1),g>=o.length&&(g=o.length-1),y>=o[0].length&&(y=o[0].length-1),x>=o[0].length&&(x=o[0].length-1);const E=[];i.getRectMinMax(p,x,g,y,E);const w=E[0],C=E[1];if(!(l.z-r>C||l.z+r<w))for(let A=p;A<g;A++)for(let M=x;M<y;M++){let R=!1;if(i.getConvexTrianglePillar(A,M,!1),pi.pointToWorldFrame(v,s,i.pillarOffset,h),n.distanceTo(h)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(R=this.convexConvex(t,i.pillarConvex,n,h,S,s,T,e,null,null,c,d,null)),c&&R||(i.getConvexTrianglePillar(A,M,!0),pi.pointToWorldFrame(v,s,i.pillarOffset,h),n.distanceTo(h)<i.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(R=this.convexConvex(t,i.pillarConvex,n,h,S,s,T,e,null,null,c,d,null)),c&&R))return!0}}sphereParticle(t,i,n,v,S,s,T,e,a,m,c){const o=KV;if(o.set(0,0,1),v.vsub(n,o),o.lengthSquared()<=t.radius*t.radius){if(c)return!0;const r=this.createContactEquation(e,T,i,t,a,m);o.normalize(),r.rj.copy(o),r.rj.scale(t.radius,r.rj),r.ni.copy(o),r.ni.negate(r.ni),r.ri.set(0,0,0),this.result.push(r),this.createFrictionEquationsFromContact(r,this.frictionResult)}}planeParticle(t,i,n,v,S,s,T,e,a,m,c){const o=kV;o.set(0,0,1),T.quaternion.vmult(o,o);const u=YV;if(v.vsub(T.position,u),o.dot(u)<=0){if(c)return!0;const h=this.createContactEquation(e,T,i,t,a,m);h.ni.copy(o),h.ni.negate(h.ni),h.ri.set(0,0,0);const d=$V;o.scale(o.dot(v),d),v.vsub(d,d),h.rj.copy(d),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)}}boxParticle(t,i,n,v,S,s,T,e,a,m,c){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,i,n,v,S,s,T,e,t,i,c)}convexParticle(t,i,n,v,S,s,T,e,a,m,c){let o=-1;const u=QV,r=ZV;let h=null;const d=jV;if(d.copy(v),d.vsub(n,d),S.conjugate(ww),ww.vmult(d,d),t.pointIsInside(d)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(n,S),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(S);for(let l=0,p=t.faces.length;l!==p;l++){const g=[t.worldVertices[t.faces[l][0]]],x=t.worldFaceNormals[l];v.vsub(g[0],Aw);const y=-x.dot(Aw);if(h===null||Math.abs(y)<Math.abs(h)){if(c)return!0;h=y,o=l,u.copy(x)}}if(o!==-1){const l=this.createContactEquation(e,T,i,t,a,m);u.scale(h,r),r.vadd(v,r),r.vsub(n,r),l.rj.copy(r),u.negate(l.ni),l.ri.set(0,0,0);const p=l.ri,g=l.rj;p.vadd(v,p),p.vsub(e.position,p),g.vadd(n,g),g.vsub(T.position,g),this.result.push(l),this.createFrictionEquationsFromContact(l,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(t,i,n,v,S,s,T,e,a,m,c){return this.convexHeightfield(i,t,v,n,s,S,e,T,a,m,c)}particleCylinder(t,i,n,v,S,s,T,e,a,m,c){return this.convexParticle(i,t,v,n,s,S,e,T,a,m,c)}sphereTrimesh(t,i,n,v,S,s,T,e,a,m,c){const o=aV,u=oV,r=lV,h=hV,d=uV,l=cV,p=vV,g=rV,x=nV,y=mV;pi.pointToLocalFrame(v,s,n,d);const E=t.radius;p.lowerBound.set(d.x-E,d.y-E,d.z-E),p.upperBound.set(d.x+E,d.y+E,d.z+E),i.getTrianglesInAABB(p,y);const w=sV,C=t.radius*t.radius;for(let b=0;b<y.length;b++)for(let F=0;F<3;F++)if(i.getVertex(i.indices[y[b]*3+F],w),w.vsub(d,x),x.lengthSquared()<=C){if(g.copy(w),pi.pointToWorldFrame(v,s,g,w),w.vsub(n,x),c)return!0;let I=this.createContactEquation(T,e,t,i,a,m);I.ni.copy(x),I.ni.normalize(),I.ri.copy(I.ni),I.ri.scale(t.radius,I.ri),I.ri.vadd(n,I.ri),I.ri.vsub(T.position,I.ri),I.rj.copy(w),I.rj.vsub(e.position,I.rj),this.result.push(I),this.createFrictionEquationsFromContact(I,this.frictionResult)}for(let b=0;b<y.length;b++)for(let F=0;F<3;F++){i.getVertex(i.indices[y[b]*3+F],o),i.getVertex(i.indices[y[b]*3+(F+1)%3],u),u.vsub(o,r),d.vsub(u,l);const I=l.dot(r);d.vsub(o,l);let L=l.dot(r);if(L>0&&I<0&&(d.vsub(o,l),h.copy(r),h.normalize(),L=l.dot(h),h.scale(L,l),l.vadd(o,l),l.distanceTo(d)<t.radius)){if(c)return!0;const O=this.createContactEquation(T,e,t,i,a,m);l.vsub(d,O.ni),O.ni.normalize(),O.ni.scale(t.radius,O.ri),O.ri.vadd(n,O.ri),O.ri.vsub(T.position,O.ri),pi.pointToWorldFrame(v,s,l,l),l.vsub(e.position,O.rj),pi.vectorToWorldFrame(s,O.ni,O.ni),pi.vectorToWorldFrame(s,O.ri,O.ri),this.result.push(O),this.createFrictionEquationsFromContact(O,this.frictionResult)}}const A=fV,M=dV,R=pV,P=iV;for(let b=0,F=y.length;b!==F;b++){i.getTriangleVertices(y[b],A,M,R),i.getNormal(y[b],P),d.vsub(A,l);let I=l.dot(P);if(P.scale(I,l),d.vsub(l,l),I=l.distanceTo(d),vn.pointInTriangle(l,A,M,R)&&I<t.radius){if(c)return!0;let L=this.createContactEquation(T,e,t,i,a,m);l.vsub(d,L.ni),L.ni.normalize(),L.ni.scale(t.radius,L.ri),L.ri.vadd(n,L.ri),L.ri.vsub(T.position,L.ri),pi.pointToWorldFrame(v,s,l,l),l.vsub(e.position,L.rj),pi.vectorToWorldFrame(s,L.ni,L.ni),pi.vectorToWorldFrame(s,L.ri,L.ri),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult)}}y.length=0}planeTrimesh(t,i,n,v,S,s,T,e,a,m,c){const o=new tt,u=qU;u.set(0,0,1),S.vmult(u,u);for(let r=0;r<i.vertices.length/3;r++){i.getVertex(r,o);const h=new tt;h.copy(o),pi.pointToWorldFrame(v,s,h,o);const d=tV;if(o.vsub(n,d),u.dot(d)<=0){if(c)return!0;const p=this.createContactEquation(T,e,t,i,a,m);p.ni.copy(u);const g=eV;u.scale(d.dot(u),g),o.vsub(g,g),p.ri.copy(g),p.ri.vsub(T.position,p.ri),p.rj.copy(o),p.rj.vsub(e.position,p.rj),this.result.push(p),this.createFrictionEquationsFromContact(p,this.frictionResult)}}}}const ql=new tt,Hu=new tt,Xu=new tt,jU=new tt,QU=new tt,ZU=new gn,JU=new gn,qU=new tt,tV=new tt,eV=new tt,iV=new tt,nV=new tt;new tt;const sV=new tt,rV=new tt,aV=new tt,oV=new tt,lV=new tt,hV=new tt,uV=new tt,cV=new tt,fV=new tt,dV=new tt,pV=new tt,vV=new nr,mV=[],lm=new tt,Sw=new tt,gV=new tt,xV=new tt,yV=new tt;function TV(f,t,i){let n=null;const v=f.length;for(let S=0;S!==v;S++){const s=f[S],T=gV;f[(S+1)%v].vsub(s,T);const e=xV;T.cross(t,e);const a=yV;i.vsub(s,a);const m=e.dot(a);if(n===null||m>0&&n===!0||m<=0&&n===!1){n===null&&(n=m>0);continue}else return!1}return!0}const hm=new tt,EV=new tt,SV=new tt,wV=new tt,AV=[new tt,new tt,new tt,new tt,new tt,new tt],CV=new tt,MV=new tt,RV=new tt,PV=new tt,bV=new tt,IV=new tt,LV=new tt,FV=new tt,DV=new tt,OV=new tt,NV=new tt,BV=new tt,UV=new tt,VV=new tt;new tt;new tt;const zV=new tt,GV=new tt,_V=new tt,WV=new tt,HV=new tt,XV=new tt,kV=new tt,YV=new tt,$V=new tt,KV=new tt,ww=new gn,jV=new tt;new tt;const QV=new tt,Aw=new tt,ZV=new tt,JV=new tt,qV=new tt,t7=[0],e7=new tt,i7=new tt;class Cw{constructor(){this.current=[],this.previous=[]}getKey(t,i){if(i<t){const n=i;i=t,t=n}return t<<16|i}set(t,i){const n=this.getKey(t,i),v=this.current;let S=0;for(;n>v[S];)S++;if(n!==v[S]){for(let s=v.length-1;s>=S;s--)v[s+1]=v[s];v[S]=n}}tick(){const t=this.current;this.current=this.previous,this.previous=t,this.current.length=0}getDiff(t,i){const n=this.current,v=this.previous,S=n.length,s=v.length;let T=0;for(let e=0;e<S;e++){let a=!1;const m=n[e];for(;m>v[T];)T++;a=m===v[T],a||Mw(t,m)}T=0;for(let e=0;e<s;e++){let a=!1;const m=v[e];for(;m>n[T];)T++;a=n[T]===m,a||Mw(i,m)}}}function Mw(f,t){f.push((t&4294901760)>>16,t&65535)}const Ex=(f,t)=>f<t?`${f}-${t}`:`${t}-${f}`;class n7{constructor(){this.data={keys:[]}}get(t,i){const n=Ex(t,i);return this.data[n]}set(t,i,n){const v=Ex(t,i);this.get(t,i)||this.data.keys.push(v),this.data[v]=n}delete(t,i){const n=Ex(t,i),v=this.data.keys.indexOf(n);v!==-1&&this.data.keys.splice(v,1),delete this.data[n]}reset(){const t=this.data,i=t.keys;for(;i.length>0;){const n=i.pop();delete t[n]}}}class s7 extends UR{constructor(t){t===void 0&&(t={}),super(),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=t.quatNormalizeSkip!==void 0?t.quatNormalizeSkip:0,this.quatNormalizeFast=t.quatNormalizeFast!==void 0?t.quatNormalizeFast:!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new tt,t.gravity&&this.gravity.copy(t.gravity),t.frictionGravity&&(this.frictionGravity=new tt,this.frictionGravity.copy(t.frictionGravity)),this.broadphase=t.broadphase!==void 0?t.broadphase:new cU,this.bodies=[],this.hasActiveBodies=!1,this.solver=t.solver!==void 0?t.solver:new WU,this.constraints=[],this.narrowphase=new KU(this),this.collisionMatrix=new cw,this.collisionMatrixPrevious=new cw,this.bodyOverlapKeeper=new Cw,this.shapeOverlapKeeper=new Cw,this.contactmaterials=[],this.contactMaterialTable=new n7,this.defaultMaterial=new Dh("default"),this.defaultContactMaterial=new Fh(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(t,i){return this.contactMaterialTable.get(t.id,i.id)}collisionMatrixTick(){const t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(t){this.constraints.push(t)}removeConstraint(t){const i=this.constraints.indexOf(t);i!==-1&&this.constraints.splice(i,1)}rayTest(t,i,n){n instanceof ig?this.raycastClosest(t,i,{skipBackfaces:!0},n):this.raycastAll(t,i,{skipBackfaces:!0},n)}raycastAll(t,i,n,v){return n===void 0&&(n={}),n.mode=vn.ALL,n.from=t,n.to=i,n.callback=v,Sx.intersectWorld(this,n)}raycastAny(t,i,n,v){return n===void 0&&(n={}),n.mode=vn.ANY,n.from=t,n.to=i,n.result=v,Sx.intersectWorld(this,n)}raycastClosest(t,i,n,v){return n===void 0&&(n={}),n.mode=vn.CLOSEST,n.from=t,n.to=i,n.result=v,Sx.intersectWorld(this,n)}addBody(t){this.bodies.includes(t)||(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof pe&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))}removeBody(t){t.world=null;const i=this.bodies.length-1,n=this.bodies,v=n.indexOf(t);if(v!==-1){n.splice(v,1);for(let S=0;S!==n.length;S++)n[S].index=S;this.collisionMatrix.setNumObjects(i),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(t){return this.idToBodyMap[t]}getShapeById(t){const i=this.bodies;for(let n=0;n<i.length;n++){const v=i[n].shapes;for(let S=0;S<v.length;S++){const s=v[S];if(s.id===t)return s}}return null}addContactMaterial(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)}removeContactMaterial(t){const i=this.contactmaterials.indexOf(t);i!==-1&&(this.contactmaterials.splice(i,1),this.contactMaterialTable.delete(t.materials[0].id,t.materials[1].id))}fixedStep(t,i){t===void 0&&(t=1/60),i===void 0&&(i=10);const n=Sn.now()/1e3;if(!this.lastCallTime)this.step(t,void 0,i);else{const v=n-this.lastCallTime;this.step(t,v,i)}this.lastCallTime=n}step(t,i,n){if(n===void 0&&(n=10),i===void 0)this.internalStep(t),this.time+=t;else{this.accumulator+=i;const v=Sn.now();let S=0;for(;this.accumulator>=t&&S<n&&(this.internalStep(t),this.accumulator-=t,S++,!(Sn.now()-v>t*1e3)););this.accumulator=this.accumulator%t;const s=this.accumulator/t;for(let T=0;T!==this.bodies.length;T++){const e=this.bodies[T];e.previousPosition.lerp(e.position,s,e.interpolatedPosition),e.previousQuaternion.slerp(e.quaternion,s,e.interpolatedQuaternion),e.previousQuaternion.normalize()}this.time+=i}}internalStep(t){this.dt=t;const i=this.contacts,n=h7,v=u7,S=this.bodies.length,s=this.bodies,T=this.solver,e=this.gravity,a=this.doProfiling,m=this.profile,c=pe.DYNAMIC;let o=-1/0;const u=this.constraints,r=l7;e.length();const h=e.x,d=e.y,l=e.z;let p=0;for(a&&(o=Sn.now()),p=0;p!==S;p++){const b=s[p];if(b.type===c){const F=b.force,I=b.mass;F.x+=I*h,F.y+=I*d,F.z+=I*l}}for(let b=0,F=this.subsystems.length;b!==F;b++)this.subsystems[b].update();a&&(o=Sn.now()),n.length=0,v.length=0,this.broadphase.collisionPairs(this,n,v),a&&(m.broadphase=Sn.now()-o);let g=u.length;for(p=0;p!==g;p++){const b=u[p];if(!b.collideConnected)for(let F=n.length-1;F>=0;F-=1)(b.bodyA===n[F]&&b.bodyB===v[F]||b.bodyB===n[F]&&b.bodyA===v[F])&&(n.splice(F,1),v.splice(F,1))}this.collisionMatrixTick(),a&&(o=Sn.now());const x=o7,y=i.length;for(p=0;p!==y;p++)x.push(i[p]);i.length=0;const E=this.frictionEquations.length;for(p=0;p!==E;p++)r.push(this.frictionEquations[p]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(n,v,this,i,x,this.frictionEquations,r),a&&(m.narrowphase=Sn.now()-o),a&&(o=Sn.now()),p=0;p<this.frictionEquations.length;p++)T.addEquation(this.frictionEquations[p]);const w=i.length;for(let b=0;b!==w;b++){const F=i[b],I=F.bi,L=F.bj,D=F.si,O=F.sj;let z;if(I.material&&L.material?z=this.getContactMaterial(I.material,L.material)||this.defaultContactMaterial:z=this.defaultContactMaterial,z.friction,I.material&&L.material&&(I.material.friction>=0&&L.material.friction>=0&&I.material.friction*L.material.friction,I.material.restitution>=0&&L.material.restitution>=0&&(F.restitution=I.material.restitution*L.material.restitution)),T.addEquation(F),I.allowSleep&&I.type===pe.DYNAMIC&&I.sleepState===pe.SLEEPING&&L.sleepState===pe.AWAKE&&L.type!==pe.STATIC){const W=L.velocity.lengthSquared()+L.angularVelocity.lengthSquared(),k=L.sleepSpeedLimit**2;W>=k*2&&(I.wakeUpAfterNarrowphase=!0)}if(L.allowSleep&&L.type===pe.DYNAMIC&&L.sleepState===pe.SLEEPING&&I.sleepState===pe.AWAKE&&I.type!==pe.STATIC){const W=I.velocity.lengthSquared()+I.angularVelocity.lengthSquared(),k=I.sleepSpeedLimit**2;W>=k*2&&(L.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(I,L,!0),this.collisionMatrixPrevious.get(I,L)||(cd.body=L,cd.contact=F,I.dispatchEvent(cd),cd.body=I,L.dispatchEvent(cd)),this.bodyOverlapKeeper.set(I.id,L.id),this.shapeOverlapKeeper.set(D.id,O.id)}for(this.emitContactEvents(),a&&(m.makeContactConstraints=Sn.now()-o,o=Sn.now()),p=0;p!==S;p++){const b=s[p];b.wakeUpAfterNarrowphase&&(b.wakeUp(),b.wakeUpAfterNarrowphase=!1)}for(g=u.length,p=0;p!==g;p++){const b=u[p];b.update();for(let F=0,I=b.equations.length;F!==I;F++){const L=b.equations[F];T.addEquation(L)}}T.solve(t,this),a&&(m.solve=Sn.now()-o),T.removeAllEquations();const C=Math.pow;for(p=0;p!==S;p++){const b=s[p];if(b.type&c){const F=C(1-b.linearDamping,t),I=b.velocity;I.scale(F,I);const L=b.angularVelocity;if(L){const D=C(1-b.angularDamping,t);L.scale(D,L)}}}this.dispatchEvent(a7),a&&(o=Sn.now());const M=this.stepnumber%(this.quatNormalizeSkip+1)===0,R=this.quatNormalizeFast;for(p=0;p!==S;p++)s[p].integrate(t,M,R);this.clearForces(),this.broadphase.dirty=!0,a&&(m.integrate=Sn.now()-o),this.stepnumber+=1,this.dispatchEvent(r7);let P=!0;if(this.allowSleep)for(P=!1,p=0;p!==S;p++){const b=s[p];b.sleepTick(this.time),b.sleepState!==pe.SLEEPING&&(P=!0)}this.hasActiveBodies=P}emitContactEvents(){const t=this.hasAnyEventListener("beginContact"),i=this.hasAnyEventListener("endContact");if((t||i)&&this.bodyOverlapKeeper.getDiff(Ga,_a),t){for(let S=0,s=Ga.length;S<s;S+=2)fd.bodyA=this.getBodyById(Ga[S]),fd.bodyB=this.getBodyById(Ga[S+1]),this.dispatchEvent(fd);fd.bodyA=fd.bodyB=null}if(i){for(let S=0,s=_a.length;S<s;S+=2)dd.bodyA=this.getBodyById(_a[S]),dd.bodyB=this.getBodyById(_a[S+1]),this.dispatchEvent(dd);dd.bodyA=dd.bodyB=null}Ga.length=_a.length=0;const n=this.hasAnyEventListener("beginShapeContact"),v=this.hasAnyEventListener("endShapeContact");if((n||v)&&this.shapeOverlapKeeper.getDiff(Ga,_a),n){for(let S=0,s=Ga.length;S<s;S+=2){const T=this.getShapeById(Ga[S]),e=this.getShapeById(Ga[S+1]);Wa.shapeA=T,Wa.shapeB=e,T&&(Wa.bodyA=T.body),e&&(Wa.bodyB=e.body),this.dispatchEvent(Wa)}Wa.bodyA=Wa.bodyB=Wa.shapeA=Wa.shapeB=null}if(v){for(let S=0,s=_a.length;S<s;S+=2){const T=this.getShapeById(_a[S]),e=this.getShapeById(_a[S+1]);Ha.shapeA=T,Ha.shapeB=e,T&&(Ha.bodyA=T.body),e&&(Ha.bodyB=e.body),this.dispatchEvent(Ha)}Ha.bodyA=Ha.bodyB=Ha.shapeA=Ha.shapeB=null}}clearForces(){const t=this.bodies,i=t.length;for(let n=0;n!==i;n++){const v=t[n];v.force,v.torque,v.force.set(0,0,0),v.torque.set(0,0,0)}}}new nr;const Sx=new vn,Sn=globalThis.performance||{};if(!Sn.now){let f=Date.now();Sn.timing&&Sn.timing.navigationStart&&(f=Sn.timing.navigationStart),Sn.now=()=>Date.now()-f}new tt;const r7={type:"postStep"},a7={type:"preStep"},cd={type:pe.COLLIDE_EVENT_NAME,body:null,contact:null},o7=[],l7=[],h7=[],u7=[],Ga=[],_a=[],fd={type:"beginContact",bodyA:null,bodyB:null},dd={type:"endContact",bodyA:null,bodyB:null},Wa={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},Ha={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null};function ka(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function kR(f,t){f.prototype=Object.create(t.prototype),f.prototype.constructor=f,f.__proto__=t}/*!
 * GSAP 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var js={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Wc={duration:.5,overwrite:!1,delay:0},IT,$n,Wi,dr=1e8,Li=1/dr,r1=Math.PI*2,c7=r1/4,f7=0,YR=Math.sqrt,d7=Math.cos,p7=Math.sin,Vn=function(t){return typeof t=="string"},qi=function(t){return typeof t=="function"},co=function(t){return typeof t=="number"},LT=function(t){return typeof t>"u"},Ma=function(t){return typeof t=="object"},Ps=function(t){return t!==!1},FT=function(){return typeof window<"u"},um=function(t){return qi(t)||Vn(t)},$R=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},as=Array.isArray,v7=/random\([^)]+\)/g,m7=/,\s*/g,Rw=/(?:-?\.?\d|\.)+/gi,KR=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ac=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,wx=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,jR=/[+-]=-?[.\d]+/,g7=/[^,'"\[\]\s]+/gi,x7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,$i,ra,a1,DT,Js={},ng={},QR,ZR=function(t){return(ng=Hc(t,Js))&&Os},OT=function(t,i){return console.warn("Invalid property",t,"set to",i,"Missing plugin? gsap.registerPlugin()")},sp=function(t,i){return!i&&console.warn(t)},JR=function(t,i){return t&&(Js[t]=i)&&ng&&(ng[t]=i)||Js},rp=function(){return 0},y7={suppressEvents:!0,isStart:!0,kill:!1},Lm={suppressEvents:!0,kill:!1},T7={suppressEvents:!0},NT={},hl=[],o1={},qR,_s={},Ax={},Pw=30,Fm=[],BT="",UT=function(t){var i=t[0],n,v;if(Ma(i)||qi(i)||(t=[t]),!(n=(i._gsap||{}).harness)){for(v=Fm.length;v--&&!Fm[v].targetTest(i););n=Fm[v]}for(v=t.length;v--;)t[v]&&(t[v]._gsap||(t[v]._gsap=new wP(t[v],n)))||t.splice(v,1);return t},Oh=function(t){return t._gsap||UT(pr(t))[0]._gsap},tP=function(t,i,n){return(n=t[i])&&qi(n)?t[i]():LT(n)&&t.getAttribute&&t.getAttribute(i)||n},bs=function(t,i){return(t=t.split(",")).forEach(i)||t},rn=function(t){return Math.round(t*1e5)/1e5||0},Yi=function(t){return Math.round(t*1e7)/1e7||0},fc=function(t,i){var n=i.charAt(0),v=parseFloat(i.substr(2));return t=parseFloat(t),n==="+"?t+v:n==="-"?t-v:n==="*"?t*v:t/v},E7=function(t,i){for(var n=i.length,v=0;t.indexOf(i[v])<0&&++v<n;);return v<n},sg=function(){var t=hl.length,i=hl.slice(0),n,v;for(o1={},hl.length=0,n=0;n<t;n++)v=i[n],v&&v._lazy&&(v.render(v._lazy[0],v._lazy[1],!0)._lazy=0)},VT=function(t){return!!(t._initted||t._startAt||t.add)},eP=function(t,i,n,v){hl.length&&!$n&&sg(),t.render(i,n,!!($n&&i<0&&VT(t))),hl.length&&!$n&&sg()},iP=function(t){var i=parseFloat(t);return(i||i===0)&&(t+"").match(g7).length<2?i:Vn(t)?t.trim():t},nP=function(t){return t},qs=function(t,i){for(var n in i)n in t||(t[n]=i[n]);return t},S7=function(t){return function(i,n){for(var v in n)v in i||v==="duration"&&t||v==="ease"||(i[v]=n[v])}},Hc=function(t,i){for(var n in i)t[n]=i[n];return t},bw=function f(t,i){for(var n in i)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=Ma(i[n])?f(t[n]||(t[n]={}),i[n]):i[n]);return t},rg=function(t,i){var n={},v;for(v in t)v in i||(n[v]=t[v]);return n},zd=function(t){var i=t.parent||$i,n=t.keyframes?S7(as(t.keyframes)):qs;if(Ps(t.inherit))for(;i;)n(t,i.vars.defaults),i=i.parent||i._dp;return t},w7=function(t,i){for(var n=t.length,v=n===i.length;v&&n--&&t[n]===i[n];);return n<0},sP=function(t,i,n,v,S){var s=t[v],T;if(S)for(T=i[S];s&&s[S]>T;)s=s._prev;return s?(i._next=s._next,s._next=i):(i._next=t[n],t[n]=i),i._next?i._next._prev=i:t[v]=i,i._prev=s,i.parent=i._dp=t,i},Kg=function(t,i,n,v){n===void 0&&(n="_first"),v===void 0&&(v="_last");var S=i._prev,s=i._next;S?S._next=s:t[n]===i&&(t[n]=s),s?s._prev=S:t[v]===i&&(t[v]=S),i._next=i._prev=i.parent=null},xl=function(t,i){t.parent&&(!i||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Nh=function(t,i){if(t&&(!i||i._end>t._dur||i._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},A7=function(t){for(var i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},l1=function(t,i,n,v){return t._startAt&&($n?t._startAt.revert(Lm):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(i,!0,v))},C7=function f(t){return!t||t._ts&&f(t.parent)},Iw=function(t){return t._repeat?Xc(t._tTime,t=t.duration()+t._rDelay)*t:0},Xc=function(t,i){var n=Math.floor(t=Yi(t/i));return t&&n===t?n-1:n},ag=function(t,i){return(t-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},jg=function(t){return t._end=Yi(t._start+(t._tDur/Math.abs(t._ts||t._rts||Li)||0))},Qg=function(t,i){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Yi(n._time-(t._ts>0?i/t._ts:((t._dirty?t.totalDuration():t._tDur)-i)/-t._ts)),jg(t),n._dirty||Nh(n,t)),t},rP=function(t,i){var n;if((i._time||!i._dur&&i._initted||i._start<t._time&&(i._dur||!i.add))&&(n=ag(t.rawTime(),i),(!i._dur||Wp(0,i.totalDuration(),n)-i._tTime>Li)&&i.render(n,!0)),Nh(t,i)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Li}},da=function(t,i,n,v){return i.parent&&xl(i),i._start=Yi((co(n)?n:n||t!==$i?or(t,n,i):t._time)+i._delay),i._end=Yi(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),sP(t,i,"_first","_last",t._sort?"_start":0),h1(i)||(t._recent=i),v||rP(t,i),t._ts<0&&Qg(t,t._tTime),t},aP=function(t,i){return(Js.ScrollTrigger||OT("scrollTrigger",i))&&Js.ScrollTrigger.create(i,t)},oP=function(t,i,n,v,S){if(GT(t,i,S),!t._initted)return 1;if(!n&&t._pt&&!$n&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&qR!==Xs.frame)return hl.push(t),t._lazy=[S,v],1},M7=function f(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||f(i))},h1=function(t){var i=t.data;return i==="isFromStart"||i==="isStart"},R7=function(t,i,n,v){var S=t.ratio,s=i<0||!i&&(!t._start&&M7(t)&&!(!t._initted&&h1(t))||(t._ts<0||t._dp._ts<0)&&!h1(t))?0:1,T=t._rDelay,e=0,a,m,c;if(T&&t._repeat&&(e=Wp(0,t._tDur,i),m=Xc(e,T),t._yoyo&&m&1&&(s=1-s),m!==Xc(t._tTime,T)&&(S=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==S||$n||v||t._zTime===Li||!i&&t._zTime){if(!t._initted&&oP(t,i,v,n,e))return;for(c=t._zTime,t._zTime=i||(n?Li:0),n||(n=i&&!c),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=e,a=t._pt;a;)a.r(s,a.d),a=a._next;i<0&&l1(t,i,n,!0),t._onUpdate&&!n&&ks(t,"onUpdate"),e&&t._repeat&&!n&&t.parent&&ks(t,"onRepeat"),(i>=t._tDur||i<0)&&t.ratio===s&&(s&&xl(t,1),!n&&!$n&&(ks(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=i)},P7=function(t,i,n){var v;if(n>i)for(v=t._first;v&&v._start<=n;){if(v.data==="isPause"&&v._start>i)return v;v=v._next}else for(v=t._last;v&&v._start>=n;){if(v.data==="isPause"&&v._start<i)return v;v=v._prev}},kc=function(t,i,n,v){var S=t._repeat,s=Yi(i)||0,T=t._tTime/t._tDur;return T&&!v&&(t._time*=s/t._dur),t._dur=s,t._tDur=S?S<0?1e10:Yi(s*(S+1)+t._rDelay*S):s,T>0&&!v&&Qg(t,t._tTime=t._tDur*T),t.parent&&jg(t),n||Nh(t.parent,t),t},Lw=function(t){return t instanceof ds?Nh(t):kc(t,t._dur)},b7={_start:0,endTime:rp,totalDuration:rp},or=function f(t,i,n){var v=t.labels,S=t._recent||b7,s=t.duration()>=dr?S.endTime(!1):t._dur,T,e,a;return Vn(i)&&(isNaN(i)||i in v)?(e=i.charAt(0),a=i.substr(-1)==="%",T=i.indexOf("="),e==="<"||e===">"?(T>=0&&(i=i.replace(/=/,"")),(e==="<"?S._start:S.endTime(S._repeat>=0))+(parseFloat(i.substr(1))||0)*(a?(T<0?S:n).totalDuration()/100:1)):T<0?(i in v||(v[i]=s),v[i]):(e=parseFloat(i.charAt(T-1)+i.substr(T+1)),a&&n&&(e=e/100*(as(n)?n[0]:n).totalDuration()),T>1?f(t,i.substr(0,T-1),n)+e:s+e)):i==null?s:+i},Gd=function(t,i,n){var v=co(i[1]),S=(v?2:1)+(t<2?0:1),s=i[S],T,e;if(v&&(s.duration=i[1]),s.parent=n,t){for(T=s,e=n;e&&!("immediateRender"in T);)T=e.vars.defaults||{},e=Ps(e.vars.inherit)&&e.parent;s.immediateRender=Ps(T.immediateRender),t<2?s.runBackwards=1:s.startAt=i[S-1]}return new mn(i[0],s,i[S+1])},Il=function(t,i){return t||t===0?i(t):i},Wp=function(t,i,n){return n<t?t:n>i?i:n},ss=function(t,i){return!Vn(t)||!(i=x7.exec(t))?"":i[1]},I7=function(t,i,n){return Il(n,function(v){return Wp(t,i,v)})},u1=[].slice,lP=function(t,i){return t&&Ma(t)&&"length"in t&&(!i&&!t.length||t.length-1 in t&&Ma(t[0]))&&!t.nodeType&&t!==ra},L7=function(t,i,n){return n===void 0&&(n=[]),t.forEach(function(v){var S;return Vn(v)&&!i||lP(v,1)?(S=n).push.apply(S,pr(v)):n.push(v)})||n},pr=function(t,i,n){return Wi&&!i&&Wi.selector?Wi.selector(t):Vn(t)&&!n&&(a1||!Yc())?u1.call((i||DT).querySelectorAll(t),0):as(t)?L7(t,n):lP(t)?u1.call(t,0):t?[t]:[]},c1=function(t){return t=pr(t)[0]||sp("Invalid scope")||{},function(i){var n=t.current||t.nativeElement||t;return pr(i,n.querySelectorAll?n:n===t?sp("Invalid scope")||DT.createElement("div"):t)}},hP=function(t){return t.sort(function(){return .5-Math.random()})},uP=function(t){if(qi(t))return t;var i=Ma(t)?t:{each:t},n=Bh(i.ease),v=i.from||0,S=parseFloat(i.base)||0,s={},T=v>0&&v<1,e=isNaN(v)||T,a=i.axis,m=v,c=v;return Vn(v)?m=c={center:.5,edges:.5,end:1}[v]||0:!T&&e&&(m=v[0],c=v[1]),function(o,u,r){var h=(r||i).length,d=s[h],l,p,g,x,y,E,w,C,A;if(!d){if(A=i.grid==="auto"?0:(i.grid||[1,dr])[1],!A){for(w=-dr;w<(w=r[A++].getBoundingClientRect().left)&&A<h;);A<h&&A--}for(d=s[h]=[],l=e?Math.min(A,h)*m-.5:v%A,p=A===dr?0:e?h*c/A-.5:v/A|0,w=0,C=dr,E=0;E<h;E++)g=E%A-l,x=p-(E/A|0),d[E]=y=a?Math.abs(a==="y"?x:g):YR(g*g+x*x),y>w&&(w=y),y<C&&(C=y);v==="random"&&hP(d),d.max=w-C,d.min=C,d.v=h=(parseFloat(i.amount)||parseFloat(i.each)*(A>h?h-1:a?a==="y"?h/A:A:Math.max(A,h/A))||0)*(v==="edges"?-1:1),d.b=h<0?S-h:S,d.u=ss(i.amount||i.each)||0,n=n&&h<0?TP(n):n}return h=(d[o]-d.min)/d.max||0,Yi(d.b+(n?n(h):h)*d.v)+d.u}},f1=function(t){var i=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var v=Yi(Math.round(parseFloat(n)/t)*t*i);return(v-v%1)/i+(co(n)?0:ss(n))}},cP=function(t,i){var n=as(t),v,S;return!n&&Ma(t)&&(v=n=t.radius||dr,t.values?(t=pr(t.values),(S=!co(t[0]))&&(v*=v)):t=f1(t.increment)),Il(i,n?qi(t)?function(s){return S=t(s),Math.abs(S-s)<=v?S:s}:function(s){for(var T=parseFloat(S?s.x:s),e=parseFloat(S?s.y:0),a=dr,m=0,c=t.length,o,u;c--;)S?(o=t[c].x-T,u=t[c].y-e,o=o*o+u*u):o=Math.abs(t[c]-T),o<a&&(a=o,m=c);return m=!v||a<=v?t[m]:s,S||m===s||co(s)?m:m+ss(s)}:f1(t))},fP=function(t,i,n,v){return Il(as(t)?!i:n===!0?!!(n=0):!v,function(){return as(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(v=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(i-t+n*.99))/n)*n*v)/v})},F7=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return function(v){return i.reduce(function(S,s){return s(S)},v)}},D7=function(t,i){return function(n){return t(parseFloat(n))+(i||ss(n))}},O7=function(t,i,n){return pP(t,i,0,1,n)},dP=function(t,i,n){return Il(n,function(v){return t[~~i(v)]})},N7=function f(t,i,n){var v=i-t;return as(t)?dP(t,f(0,t.length),i):Il(n,function(S){return(v+(S-t)%v)%v+t})},B7=function f(t,i,n){var v=i-t,S=v*2;return as(t)?dP(t,f(0,t.length-1),i):Il(n,function(s){return s=(S+(s-t)%S)%S||0,t+(s>v?S-s:s)})},ap=function(t){return t.replace(v7,function(i){var n=i.indexOf("[")+1,v=i.substring(n||7,n?i.indexOf("]"):i.length-1).split(m7);return fP(n?v:+v[0],n?0:+v[1],+v[2]||1e-5)})},pP=function(t,i,n,v,S){var s=i-t,T=v-n;return Il(S,function(e){return n+((e-t)/s*T||0)})},U7=function f(t,i,n,v){var S=isNaN(t+i)?0:function(u){return(1-u)*t+u*i};if(!S){var s=Vn(t),T={},e,a,m,c,o;if(n===!0&&(v=1)&&(n=null),s)t={p:t},i={p:i};else if(as(t)&&!as(i)){for(m=[],c=t.length,o=c-2,a=1;a<c;a++)m.push(f(t[a-1],t[a]));c--,S=function(r){r*=c;var h=Math.min(o,~~r);return m[h](r-h)},n=i}else v||(t=Hc(as(t)?[]:{},t));if(!m){for(e in i)zT.call(T,t,e,"get",i[e]);S=function(r){return HT(r,T)||(s?t.p:t)}}}return Il(n,S)},Fw=function(t,i,n){var v=t.labels,S=dr,s,T,e;for(s in v)T=v[s]-i,T<0==!!n&&T&&S>(T=Math.abs(T))&&(e=s,S=T);return e},ks=function(t,i,n){var v=t.vars,S=v[i],s=Wi,T=t._ctx,e,a,m;if(S)return e=v[i+"Params"],a=v.callbackScope||t,n&&hl.length&&sg(),T&&(Wi=T),m=e?S.apply(a,e):S.call(a),Wi=s,m},Rd=function(t){return xl(t),t.scrollTrigger&&t.scrollTrigger.kill(!!$n),t.progress()<1&&ks(t,"onInterrupt"),t},oc,vP=[],mP=function(t){if(t)if(t=!t.name&&t.default||t,FT()||t.headless){var i=t.name,n=qi(t),v=i&&!n&&t.init?function(){this._props=[]}:t,S={init:rp,render:HT,add:zT,kill:q7,modifier:J7,rawVars:0},s={targetTest:0,get:0,getSetter:WT,aliases:{},register:0};if(Yc(),t!==v){if(_s[i])return;qs(v,qs(rg(t,S),s)),Hc(v.prototype,Hc(S,rg(t,s))),_s[v.prop=i]=v,t.targetTest&&(Fm.push(v),NT[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}JR(i,v),t.register&&t.register(Os,v,Is)}else vP.push(t)},Ii=255,Pd={aqua:[0,Ii,Ii],lime:[0,Ii,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ii],navy:[0,0,128],white:[Ii,Ii,Ii],olive:[128,128,0],yellow:[Ii,Ii,0],orange:[Ii,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ii,0,0],pink:[Ii,192,203],cyan:[0,Ii,Ii],transparent:[Ii,Ii,Ii,0]},Cx=function(t,i,n){return t+=t<0?1:t>1?-1:0,(t*6<1?i+(n-i)*t*6:t<.5?n:t*3<2?i+(n-i)*(2/3-t)*6:i)*Ii+.5|0},gP=function(t,i,n){var v=t?co(t)?[t>>16,t>>8&Ii,t&Ii]:0:Pd.black,S,s,T,e,a,m,c,o,u,r;if(!v){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Pd[t])v=Pd[t];else if(t.charAt(0)==="#"){if(t.length<6&&(S=t.charAt(1),s=t.charAt(2),T=t.charAt(3),t="#"+S+S+s+s+T+T+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return v=parseInt(t.substr(1,6),16),[v>>16,v>>8&Ii,v&Ii,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),v=[t>>16,t>>8&Ii,t&Ii]}else if(t.substr(0,3)==="hsl"){if(v=r=t.match(Rw),!i)e=+v[0]%360/360,a=+v[1]/100,m=+v[2]/100,s=m<=.5?m*(a+1):m+a-m*a,S=m*2-s,v.length>3&&(v[3]*=1),v[0]=Cx(e+1/3,S,s),v[1]=Cx(e,S,s),v[2]=Cx(e-1/3,S,s);else if(~t.indexOf("="))return v=t.match(KR),n&&v.length<4&&(v[3]=1),v}else v=t.match(Rw)||Pd.transparent;v=v.map(Number)}return i&&!r&&(S=v[0]/Ii,s=v[1]/Ii,T=v[2]/Ii,c=Math.max(S,s,T),o=Math.min(S,s,T),m=(c+o)/2,c===o?e=a=0:(u=c-o,a=m>.5?u/(2-c-o):u/(c+o),e=c===S?(s-T)/u+(s<T?6:0):c===s?(T-S)/u+2:(S-s)/u+4,e*=60),v[0]=~~(e+.5),v[1]=~~(a*100+.5),v[2]=~~(m*100+.5)),n&&v.length<4&&(v[3]=1),v},xP=function(t){var i=[],n=[],v=-1;return t.split(ul).forEach(function(S){var s=S.match(ac)||[];i.push.apply(i,s),n.push(v+=s.length+1)}),i.c=n,i},Dw=function(t,i,n){var v="",S=(t+v).match(ul),s=i?"hsla(":"rgba(",T=0,e,a,m,c;if(!S)return t;if(S=S.map(function(o){return(o=gP(o,i,1))&&s+(i?o[0]+","+o[1]+"%,"+o[2]+"%,"+o[3]:o.join(","))+")"}),n&&(m=xP(t),e=n.c,e.join(v)!==m.c.join(v)))for(a=t.replace(ul,"1").split(ac),c=a.length-1;T<c;T++)v+=a[T]+(~e.indexOf(T)?S.shift()||s+"0,0,0,0)":(m.length?m:S.length?S:n).shift());if(!a)for(a=t.split(ul),c=a.length-1;T<c;T++)v+=a[T]+S[T];return v+a[c]},ul=(function(){var f="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Pd)f+="|"+t+"\\b";return new RegExp(f+")","gi")})(),V7=/hsl[a]?\(/,yP=function(t){var i=t.join(" "),n;if(ul.lastIndex=0,ul.test(i))return n=V7.test(i),t[1]=Dw(t[1],n),t[0]=Dw(t[0],n,xP(t[1])),!0},op,Xs=(function(){var f=Date.now,t=500,i=33,n=f(),v=n,S=1e3/240,s=S,T=[],e,a,m,c,o,u,r=function h(d){var l=f()-v,p=d===!0,g,x,y,E;if((l>t||l<0)&&(n+=l-i),v+=l,y=v-n,g=y-s,(g>0||p)&&(E=++c.frame,o=y-c.time*1e3,c.time=y=y/1e3,s+=g+(g>=S?4:S-g),x=1),p||(e=a(h)),x)for(u=0;u<T.length;u++)T[u](y,o,E,d)};return c={time:0,frame:0,tick:function(){r(!0)},deltaRatio:function(d){return o/(1e3/(d||60))},wake:function(){QR&&(!a1&&FT()&&(ra=a1=window,DT=ra.document||{},Js.gsap=Os,(ra.gsapVersions||(ra.gsapVersions=[])).push(Os.version),ZR(ng||ra.GreenSockGlobals||!ra.gsap&&ra||{}),vP.forEach(mP)),m=typeof requestAnimationFrame<"u"&&requestAnimationFrame,e&&c.sleep(),a=m||function(d){return setTimeout(d,s-c.time*1e3+1|0)},op=1,r(2))},sleep:function(){(m?cancelAnimationFrame:clearTimeout)(e),op=0,a=rp},lagSmoothing:function(d,l){t=d||1/0,i=Math.min(l||33,t)},fps:function(d){S=1e3/(d||240),s=c.time*1e3+S},add:function(d,l,p){var g=l?function(x,y,E,w){d(x,y,E,w),c.remove(g)}:d;return c.remove(d),T[p?"unshift":"push"](g),Yc(),g},remove:function(d,l){~(l=T.indexOf(d))&&T.splice(l,1)&&u>=l&&u--},_listeners:T},c})(),Yc=function(){return!op&&Xs.wake()},ri={},z7=/^[\d.\-M][\d.\-,\s]/,G7=/["']/g,_7=function(t){for(var i={},n=t.substr(1,t.length-3).split(":"),v=n[0],S=1,s=n.length,T,e,a;S<s;S++)e=n[S],T=S!==s-1?e.lastIndexOf(","):e.length,a=e.substr(0,T),i[v]=isNaN(a)?a.replace(G7,"").trim():+a,v=e.substr(T+1).trim();return i},W7=function(t){var i=t.indexOf("(")+1,n=t.indexOf(")"),v=t.indexOf("(",i);return t.substring(i,~v&&v<n?t.indexOf(")",n+1):n)},H7=function(t){var i=(t+"").split("("),n=ri[i[0]];return n&&i.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[_7(i[1])]:W7(t).split(",").map(iP)):ri._CE&&z7.test(t)?ri._CE("",t):n},TP=function(t){return function(i){return 1-t(1-i)}},EP=function f(t,i){for(var n=t._first,v;n;)n instanceof ds?f(n,i):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==i&&(n.timeline?f(n.timeline,i):(v=n._ease,n._ease=n._yEase,n._yEase=v,n._yoyo=i)),n=n._next},Bh=function(t,i){return t&&(qi(t)?t:ri[t]||H7(t))||i},au=function(t,i,n,v){n===void 0&&(n=function(e){return 1-i(1-e)}),v===void 0&&(v=function(e){return e<.5?i(e*2)/2:1-i((1-e)*2)/2});var S={easeIn:i,easeOut:n,easeInOut:v},s;return bs(t,function(T){ri[T]=Js[T]=S,ri[s=T.toLowerCase()]=n;for(var e in S)ri[s+(e==="easeIn"?".in":e==="easeOut"?".out":".inOut")]=ri[T+"."+e]=S[e]}),S},SP=function(t){return function(i){return i<.5?(1-t(1-i*2))/2:.5+t((i-.5)*2)/2}},Mx=function f(t,i,n){var v=i>=1?i:1,S=(n||(t?.3:.45))/(i<1?i:1),s=S/r1*(Math.asin(1/v)||0),T=function(m){return m===1?1:v*Math.pow(2,-10*m)*p7((m-s)*S)+1},e=t==="out"?T:t==="in"?function(a){return 1-T(1-a)}:SP(T);return S=r1/S,e.config=function(a,m){return f(t,a,m)},e},Rx=function f(t,i){i===void 0&&(i=1.70158);var n=function(s){return s?--s*s*((i+1)*s+i)+1:0},v=t==="out"?n:t==="in"?function(S){return 1-n(1-S)}:SP(n);return v.config=function(S){return f(t,S)},v};bs("Linear,Quad,Cubic,Quart,Quint,Strong",function(f,t){var i=t<5?t+1:t;au(f+",Power"+(i-1),t?function(n){return Math.pow(n,i)}:function(n){return n},function(n){return 1-Math.pow(1-n,i)},function(n){return n<.5?Math.pow(n*2,i)/2:1-Math.pow((1-n)*2,i)/2})});ri.Linear.easeNone=ri.none=ri.Linear.easeIn;au("Elastic",Mx("in"),Mx("out"),Mx());(function(f,t){var i=1/t,n=2*i,v=2.5*i,S=function(T){return T<i?f*T*T:T<n?f*Math.pow(T-1.5/t,2)+.75:T<v?f*(T-=2.25/t)*T+.9375:f*Math.pow(T-2.625/t,2)+.984375};au("Bounce",function(s){return 1-S(1-s)},S)})(7.5625,2.75);au("Expo",function(f){return Math.pow(2,10*(f-1))*f+f*f*f*f*f*f*(1-f)});au("Circ",function(f){return-(YR(1-f*f)-1)});au("Sine",function(f){return f===1?1:-d7(f*c7)+1});au("Back",Rx("in"),Rx("out"),Rx());ri.SteppedEase=ri.steps=Js.SteppedEase={config:function(t,i){t===void 0&&(t=1);var n=1/t,v=t+(i?0:1),S=i?1:0,s=1-Li;return function(T){return((v*Wp(0,s,T)|0)+S)*n}}};Wc.ease=ri["quad.out"];bs("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(f){return BT+=f+","+f+"Params,"});var wP=function(t,i){this.id=f7++,t._gsap=this,this.target=t,this.harness=i,this.get=i?i.get:tP,this.set=i?i.getSetter:WT},lp=(function(){function f(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,kc(this,+i.duration,1,1),this.data=i.data,Wi&&(this._ctx=Wi,Wi.data.push(this)),op||Xs.wake()}var t=f.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,kc(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,v){if(Yc(),!arguments.length)return this._tTime;var S=this._dp;if(S&&S.smoothChildTiming&&this._ts){for(Qg(this,n),!S._dp||S.parent||rP(S,this);S&&S.parent;)S.parent._time!==S._start+(S._ts>=0?S._tTime/S._ts:(S.totalDuration()-S._tTime)/-S._ts)&&S.totalTime(S._tTime,!0),S=S.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&da(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!v||this._initted&&Math.abs(this._zTime)===Li||!this._initted&&this._dur&&n||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),eP(this,n,v)),this},t.time=function(n,v){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Iw(this))%(this._dur+this._rDelay)||(n?this._dur:0),v):this._time},t.totalProgress=function(n,v){return arguments.length?this.totalTime(this.totalDuration()*n,v):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(n,v){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Iw(this),v):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,v){var S=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*S,v):this._repeat?Xc(this._tTime,S)+1:1},t.timeScale=function(n,v){if(!arguments.length)return this._rts===-Li?0:this._rts;if(this._rts===n)return this;var S=this.parent&&this._ts?ag(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Li?0:this._rts,this.totalTime(Wp(-Math.abs(this._delay),this.totalDuration(),S),v!==!1),jg(this),A7(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Yc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Li&&(this._tTime-=Li)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=Yi(n);var v=this.parent||this._dp;return v&&(v._sort||!this.parent)&&da(v,this,this._start-this._delay),this}return this._start},t.endTime=function(n){return this._start+(Ps(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var v=this.parent||this._dp;return v?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ag(v.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=T7);var v=$n;return $n=n,VT(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),$n=v,this},t.globalTime=function(n){for(var v=this,S=arguments.length?n:v.rawTime();v;)S=v._start+S/(Math.abs(v._ts)||1),v=v._dp;return!this.parent&&this._sat?this._sat.globalTime(n):S},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Lw(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var v=this._time;return this._rDelay=n,Lw(this),v?this.time(v):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,v){return this.totalTime(or(this,n),Ps(v))},t.restart=function(n,v){return this.play().totalTime(n?-this._delay:0,Ps(v)),this._dur||(this._zTime=-Li),this},t.play=function(n,v){return n!=null&&this.seek(n,v),this.reversed(!1).paused(!1)},t.reverse=function(n,v){return n!=null&&this.seek(n||this.totalDuration(),v),this.reversed(!0).paused(!1)},t.pause=function(n,v){return n!=null&&this.seek(n,v),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Li:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Li,this},t.isActive=function(){var n=this.parent||this._dp,v=this._start,S;return!!(!n||this._ts&&this._initted&&n.isActive()&&(S=n.rawTime(!0))>=v&&S<this.endTime(!0)-Li)},t.eventCallback=function(n,v,S){var s=this.vars;return arguments.length>1?(v?(s[n]=v,S&&(s[n+"Params"]=S),n==="onUpdate"&&(this._onUpdate=v)):delete s[n],this):s[n]},t.then=function(n){var v=this,S=v._prom;return new Promise(function(s){var T=qi(n)?n:nP,e=function(){var m=v.then;v.then=null,S&&S(),qi(T)&&(T=T(v))&&(T.then||T===v)&&(v.then=m),s(T),v.then=m};v._initted&&v.totalProgress()===1&&v._ts>=0||!v._tTime&&v._ts<0?e():v._prom=e})},t.kill=function(){Rd(this)},f})();qs(lp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Li,_prom:0,_ps:!1,_rts:1});var ds=(function(f){kR(t,f);function t(n,v){var S;return n===void 0&&(n={}),S=f.call(this,n)||this,S.labels={},S.smoothChildTiming=!!n.smoothChildTiming,S.autoRemoveChildren=!!n.autoRemoveChildren,S._sort=Ps(n.sortChildren),$i&&da(n.parent||$i,ka(S),v),n.reversed&&S.reverse(),n.paused&&S.paused(!0),n.scrollTrigger&&aP(ka(S),n.scrollTrigger),S}var i=t.prototype;return i.to=function(v,S,s){return Gd(0,arguments,this),this},i.from=function(v,S,s){return Gd(1,arguments,this),this},i.fromTo=function(v,S,s,T){return Gd(2,arguments,this),this},i.set=function(v,S,s){return S.duration=0,S.parent=this,zd(S).repeatDelay||(S.repeat=0),S.immediateRender=!!S.immediateRender,new mn(v,S,or(this,s),1),this},i.call=function(v,S,s){return da(this,mn.delayedCall(0,v,S),s)},i.staggerTo=function(v,S,s,T,e,a,m){return s.duration=S,s.stagger=s.stagger||T,s.onComplete=a,s.onCompleteParams=m,s.parent=this,new mn(v,s,or(this,e)),this},i.staggerFrom=function(v,S,s,T,e,a,m){return s.runBackwards=1,zd(s).immediateRender=Ps(s.immediateRender),this.staggerTo(v,S,s,T,e,a,m)},i.staggerFromTo=function(v,S,s,T,e,a,m,c){return T.startAt=s,zd(T).immediateRender=Ps(T.immediateRender),this.staggerTo(v,S,T,e,a,m,c)},i.render=function(v,S,s){var T=this._time,e=this._dirty?this.totalDuration():this._tDur,a=this._dur,m=v<=0?0:Yi(v),c=this._zTime<0!=v<0&&(this._initted||!a),o,u,r,h,d,l,p,g,x,y,E,w;if(this!==$i&&m>e&&v>=0&&(m=e),m!==this._tTime||s||c){if(T!==this._time&&a&&(m+=this._time-T,v+=this._time-T),o=m,x=this._start,g=this._ts,l=!g,c&&(a||(T=this._zTime),(v||!S)&&(this._zTime=v)),this._repeat){if(E=this._yoyo,d=a+this._rDelay,this._repeat<-1&&v<0)return this.totalTime(d*100+v,S,s);if(o=Yi(m%d),m===e?(h=this._repeat,o=a):(y=Yi(m/d),h=~~y,h&&h===y&&(o=a,h--),o>a&&(o=a)),y=Xc(this._tTime,d),!T&&this._tTime&&y!==h&&this._tTime-y*d-this._dur<=0&&(y=h),E&&h&1&&(o=a-o,w=1),h!==y&&!this._lock){var C=E&&y&1,A=C===(E&&h&1);if(h<y&&(C=!C),T=C?0:m%a?a:m,this._lock=1,this.render(T||(w?0:Yi(h*d)),S,!a)._lock=0,this._tTime=m,!S&&this.parent&&ks(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1,y=h),T&&T!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(a=this._dur,e=this._tDur,A&&(this._lock=2,T=C?a:-1e-4,this.render(T,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;EP(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(p=P7(this,Yi(T),Yi(o)),p&&(m-=o-(o=p._start))),this._tTime=m,this._time=o,this._act=!g,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=v,T=0),!T&&m&&a&&!S&&!y&&(ks(this,"onStart"),this._tTime!==m))return this;if(o>=T&&v>=0)for(u=this._first;u;){if(r=u._next,(u._act||o>=u._start)&&u._ts&&p!==u){if(u.parent!==this)return this.render(v,S,s);if(u.render(u._ts>0?(o-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(o-u._start)*u._ts,S,s),o!==this._time||!this._ts&&!l){p=0,r&&(m+=this._zTime=-Li);break}}u=r}else{u=this._last;for(var M=v<0?v:o;u;){if(r=u._prev,(u._act||M<=u._end)&&u._ts&&p!==u){if(u.parent!==this)return this.render(v,S,s);if(u.render(u._ts>0?(M-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(M-u._start)*u._ts,S,s||$n&&VT(u)),o!==this._time||!this._ts&&!l){p=0,r&&(m+=this._zTime=M?-Li:Li);break}}u=r}}if(p&&!S&&(this.pause(),p.render(o>=T?0:-Li)._zTime=o>=T?1:-1,this._ts))return this._start=x,jg(this),this.render(v,S,s);this._onUpdate&&!S&&ks(this,"onUpdate",!0),(m===e&&this._tTime>=this.totalDuration()||!m&&T)&&(x===this._start||Math.abs(g)!==Math.abs(this._ts))&&(this._lock||((v||!a)&&(m===e&&this._ts>0||!m&&this._ts<0)&&xl(this,1),!S&&!(v<0&&!T)&&(m||T||!e)&&(ks(this,m===e&&v>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<e&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(v,S){var s=this;if(co(S)||(S=or(this,S,v)),!(v instanceof lp)){if(as(v))return v.forEach(function(T){return s.add(T,S)}),this;if(Vn(v))return this.addLabel(v,S);if(qi(v))v=mn.delayedCall(0,v);else return this}return this!==v?da(this,v,S):this},i.getChildren=function(v,S,s,T){v===void 0&&(v=!0),S===void 0&&(S=!0),s===void 0&&(s=!0),T===void 0&&(T=-dr);for(var e=[],a=this._first;a;)a._start>=T&&(a instanceof mn?S&&e.push(a):(s&&e.push(a),v&&e.push.apply(e,a.getChildren(!0,S,s)))),a=a._next;return e},i.getById=function(v){for(var S=this.getChildren(1,1,1),s=S.length;s--;)if(S[s].vars.id===v)return S[s]},i.remove=function(v){return Vn(v)?this.removeLabel(v):qi(v)?this.killTweensOf(v):(v.parent===this&&Kg(this,v),v===this._recent&&(this._recent=this._last),Nh(this))},i.totalTime=function(v,S){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Yi(Xs.time-(this._ts>0?v/this._ts:(this.totalDuration()-v)/-this._ts))),f.prototype.totalTime.call(this,v,S),this._forcing=0,this):this._tTime},i.addLabel=function(v,S){return this.labels[v]=or(this,S),this},i.removeLabel=function(v){return delete this.labels[v],this},i.addPause=function(v,S,s){var T=mn.delayedCall(0,S||rp,s);return T.data="isPause",this._hasPause=1,da(this,T,or(this,v))},i.removePause=function(v){var S=this._first;for(v=or(this,v);S;)S._start===v&&S.data==="isPause"&&xl(S),S=S._next},i.killTweensOf=function(v,S,s){for(var T=this.getTweensOf(v,s),e=T.length;e--;)qo!==T[e]&&T[e].kill(v,S);return this},i.getTweensOf=function(v,S){for(var s=[],T=pr(v),e=this._first,a=co(S),m;e;)e instanceof mn?E7(e._targets,T)&&(a?(!qo||e._initted&&e._ts)&&e.globalTime(0)<=S&&e.globalTime(e.totalDuration())>S:!S||e.isActive())&&s.push(e):(m=e.getTweensOf(T,S)).length&&s.push.apply(s,m),e=e._next;return s},i.tweenTo=function(v,S){S=S||{};var s=this,T=or(s,v),e=S,a=e.startAt,m=e.onStart,c=e.onStartParams,o=e.immediateRender,u,r=mn.to(s,qs({ease:S.ease||"none",lazy:!1,immediateRender:!1,time:T,overwrite:"auto",duration:S.duration||Math.abs((T-(a&&"time"in a?a.time:s._time))/s.timeScale())||Li,onStart:function(){if(s.pause(),!u){var d=S.duration||Math.abs((T-(a&&"time"in a?a.time:s._time))/s.timeScale());r._dur!==d&&kc(r,d,0,1).render(r._time,!0,!0),u=1}m&&m.apply(r,c||[])}},S));return o?r.render(0):r},i.tweenFromTo=function(v,S,s){return this.tweenTo(S,qs({startAt:{time:or(this,v)}},s))},i.recent=function(){return this._recent},i.nextLabel=function(v){return v===void 0&&(v=this._time),Fw(this,or(this,v))},i.previousLabel=function(v){return v===void 0&&(v=this._time),Fw(this,or(this,v),1)},i.currentLabel=function(v){return arguments.length?this.seek(v,!0):this.previousLabel(this._time+Li)},i.shiftChildren=function(v,S,s){s===void 0&&(s=0);var T=this._first,e=this.labels,a;for(v=Yi(v);T;)T._start>=s&&(T._start+=v,T._end+=v),T=T._next;if(S)for(a in e)e[a]>=s&&(e[a]+=v);return Nh(this)},i.invalidate=function(v){var S=this._first;for(this._lock=0;S;)S.invalidate(v),S=S._next;return f.prototype.invalidate.call(this,v)},i.clear=function(v){v===void 0&&(v=!0);for(var S=this._first,s;S;)s=S._next,this.remove(S),S=s;return this._dp&&(this._time=this._tTime=this._pTime=0),v&&(this.labels={}),Nh(this)},i.totalDuration=function(v){var S=0,s=this,T=s._last,e=dr,a,m,c;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-v:v));if(s._dirty){for(c=s.parent;T;)a=T._prev,T._dirty&&T.totalDuration(),m=T._start,m>e&&s._sort&&T._ts&&!s._lock?(s._lock=1,da(s,T,m-T._delay,1)._lock=0):e=m,m<0&&T._ts&&(S-=m,(!c&&!s._dp||c&&c.smoothChildTiming)&&(s._start+=Yi(m/s._ts),s._time-=m,s._tTime-=m),s.shiftChildren(-m,!1,-1/0),e=0),T._end>S&&T._ts&&(S=T._end),T=a;kc(s,s===$i&&s._time>S?s._time:S,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(v){if($i._ts&&(eP($i,ag(v,$i)),qR=Xs.frame),Xs.frame>=Pw){Pw+=js.autoSleep||120;var S=$i._first;if((!S||!S._ts)&&js.autoSleep&&Xs._listeners.length<2){for(;S&&!S._ts;)S=S._next;S||Xs.sleep()}}},t})(lp);qs(ds.prototype,{_lock:0,_hasPause:0,_forcing:0});var X7=function(t,i,n,v,S,s,T){var e=new Is(this._pt,t,i,0,1,bP,null,S),a=0,m=0,c,o,u,r,h,d,l,p;for(e.b=n,e.e=v,n+="",v+="",(l=~v.indexOf("random("))&&(v=ap(v)),s&&(p=[n,v],s(p,t,i),n=p[0],v=p[1]),o=n.match(wx)||[];c=wx.exec(v);)r=c[0],h=v.substring(a,c.index),u?u=(u+1)%5:h.substr(-5)==="rgba("&&(u=1),r!==o[m++]&&(d=parseFloat(o[m-1])||0,e._pt={_next:e._pt,p:h||m===1?h:",",s:d,c:r.charAt(1)==="="?fc(d,r)-d:parseFloat(r)-d,m:u&&u<4?Math.round:0},a=wx.lastIndex);return e.c=a<v.length?v.substring(a,v.length):"",e.fp=T,(jR.test(v)||l)&&(e.e=0),this._pt=e,e},zT=function(t,i,n,v,S,s,T,e,a,m){qi(v)&&(v=v(S||0,t,s));var c=t[i],o=n!=="get"?n:qi(c)?a?t[i.indexOf("set")||!qi(t["get"+i.substr(3)])?i:"get"+i.substr(3)](a):t[i]():c,u=qi(c)?a?j7:RP:_T,r;if(Vn(v)&&(~v.indexOf("random(")&&(v=ap(v)),v.charAt(1)==="="&&(r=fc(o,v)+(ss(o)||0),(r||r===0)&&(v=r))),!m||o!==v||d1)return!isNaN(o*v)&&v!==""?(r=new Is(this._pt,t,i,+o||0,v-(o||0),typeof c=="boolean"?Z7:PP,0,u),a&&(r.fp=a),T&&r.modifier(T,this,t),this._pt=r):(!c&&!(i in t)&&OT(i,v),X7.call(this,t,i,o,v,u,e||js.stringFilter,a))},k7=function(t,i,n,v,S){if(qi(t)&&(t=_d(t,S,i,n,v)),!Ma(t)||t.style&&t.nodeType||as(t)||$R(t))return Vn(t)?_d(t,S,i,n,v):t;var s={},T;for(T in t)s[T]=_d(t[T],S,i,n,v);return s},AP=function(t,i,n,v,S,s){var T,e,a,m;if(_s[t]&&(T=new _s[t]).init(S,T.rawVars?i[t]:k7(i[t],v,S,s,n),n,v,s)!==!1&&(n._pt=e=new Is(n._pt,S,t,0,1,T.render,T,0,T.priority),n!==oc))for(a=n._ptLookup[n._targets.indexOf(S)],m=T._props.length;m--;)a[T._props[m]]=e;return T},qo,d1,GT=function f(t,i,n){var v=t.vars,S=v.ease,s=v.startAt,T=v.immediateRender,e=v.lazy,a=v.onUpdate,m=v.runBackwards,c=v.yoyoEase,o=v.keyframes,u=v.autoRevert,r=t._dur,h=t._startAt,d=t._targets,l=t.parent,p=l&&l.data==="nested"?l.vars.targets:d,g=t._overwrite==="auto"&&!IT,x=t.timeline,y,E,w,C,A,M,R,P,b,F,I,L,D;if(x&&(!o||!S)&&(S="none"),t._ease=Bh(S,Wc.ease),t._yEase=c?TP(Bh(c===!0?S:c,Wc.ease)):0,c&&t._yoyo&&!t._repeat&&(c=t._yEase,t._yEase=t._ease,t._ease=c),t._from=!x&&!!v.runBackwards,!x||o&&!v.stagger){if(P=d[0]?Oh(d[0]).harness:0,L=P&&v[P.prop],y=rg(v,NT),h&&(h._zTime<0&&h.progress(1),i<0&&m&&T&&!u?h.render(-1,!0):h.revert(m&&r?Lm:y7),h._lazy=0),s){if(xl(t._startAt=mn.set(d,qs({data:"isStart",overwrite:!1,parent:l,immediateRender:!0,lazy:!h&&Ps(e),startAt:null,delay:0,onUpdate:a&&function(){return ks(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,i<0&&($n||!T&&!u)&&t._startAt.revert(Lm),T&&r&&i<=0&&n<=0){i&&(t._zTime=i);return}}else if(m&&r&&!h){if(i&&(T=!1),w=qs({overwrite:!1,data:"isFromStart",lazy:T&&!h&&Ps(e),immediateRender:T,stagger:0,parent:l},y),L&&(w[P.prop]=L),xl(t._startAt=mn.set(d,w)),t._startAt._dp=0,t._startAt._sat=t,i<0&&($n?t._startAt.revert(Lm):t._startAt.render(-1,!0)),t._zTime=i,!T)f(t._startAt,Li,Li);else if(!i)return}for(t._pt=t._ptCache=0,e=r&&Ps(e)||e&&!r,E=0;E<d.length;E++){if(A=d[E],R=A._gsap||UT(d)[E]._gsap,t._ptLookup[E]=F={},o1[R.id]&&hl.length&&sg(),I=p===d?E:p.indexOf(A),P&&(b=new P).init(A,L||y,t,I,p)!==!1&&(t._pt=C=new Is(t._pt,A,b.name,0,1,b.render,b,0,b.priority),b._props.forEach(function(O){F[O]=C}),b.priority&&(M=1)),!P||L)for(w in y)_s[w]&&(b=AP(w,y,t,I,A,p))?b.priority&&(M=1):F[w]=C=zT.call(t,A,w,"get",y[w],I,p,0,v.stringFilter);t._op&&t._op[E]&&t.kill(A,t._op[E]),g&&t._pt&&(qo=t,$i.killTweensOf(A,F,t.globalTime(i)),D=!t.parent,qo=0),t._pt&&e&&(o1[R.id]=1)}M&&IP(t),t._onInit&&t._onInit(t)}t._onUpdate=a,t._initted=(!t._op||t._pt)&&!D,o&&i<=0&&x.render(dr,!0,!0)},Y7=function(t,i,n,v,S,s,T,e){var a=(t._pt&&t._ptCache||(t._ptCache={}))[i],m,c,o,u;if(!a)for(a=t._ptCache[i]=[],o=t._ptLookup,u=t._targets.length;u--;){if(m=o[u][i],m&&m.d&&m.d._pt)for(m=m.d._pt;m&&m.p!==i&&m.fp!==i;)m=m._next;if(!m)return d1=1,t.vars[i]="+=0",GT(t,T),d1=0,e?sp(i+" not eligible for reset"):1;a.push(m)}for(u=a.length;u--;)c=a[u],m=c._pt||c,m.s=(v||v===0)&&!S?v:m.s+(v||0)+s*m.c,m.c=n-m.s,c.e&&(c.e=rn(n)+ss(c.e)),c.b&&(c.b=m.s+ss(c.b))},$7=function(t,i){var n=t[0]?Oh(t[0]).harness:0,v=n&&n.aliases,S,s,T,e;if(!v)return i;S=Hc({},i);for(s in v)if(s in S)for(e=v[s].split(","),T=e.length;T--;)S[e[T]]=S[s];return S},K7=function(t,i,n,v){var S=i.ease||v||"power1.inOut",s,T;if(as(i))T=n[t]||(n[t]=[]),i.forEach(function(e,a){return T.push({t:a/(i.length-1)*100,v:e,e:S})});else for(s in i)T=n[s]||(n[s]=[]),s==="ease"||T.push({t:parseFloat(t),v:i[s],e:S})},_d=function(t,i,n,v,S){return qi(t)?t.call(i,n,v,S):Vn(t)&&~t.indexOf("random(")?ap(t):t},CP=BT+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",MP={};bs(CP+",id,stagger,delay,duration,paused,scrollTrigger",function(f){return MP[f]=1});var mn=(function(f){kR(t,f);function t(n,v,S,s){var T;typeof v=="number"&&(S.duration=v,v=S,S=null),T=f.call(this,s?v:zd(v))||this;var e=T.vars,a=e.duration,m=e.delay,c=e.immediateRender,o=e.stagger,u=e.overwrite,r=e.keyframes,h=e.defaults,d=e.scrollTrigger,l=e.yoyoEase,p=v.parent||$i,g=(as(n)||$R(n)?co(n[0]):"length"in v)?[n]:pr(n),x,y,E,w,C,A,M,R;if(T._targets=g.length?UT(g):sp("GSAP target "+n+" not found. https://gsap.com",!js.nullTargetWarn)||[],T._ptLookup=[],T._overwrite=u,r||o||um(a)||um(m)){if(v=T.vars,x=T.timeline=new ds({data:"nested",defaults:h||{},targets:p&&p.data==="nested"?p.vars.targets:g}),x.kill(),x.parent=x._dp=ka(T),x._start=0,o||um(a)||um(m)){if(w=g.length,M=o&&uP(o),Ma(o))for(C in o)~CP.indexOf(C)&&(R||(R={}),R[C]=o[C]);for(y=0;y<w;y++)E=rg(v,MP),E.stagger=0,l&&(E.yoyoEase=l),R&&Hc(E,R),A=g[y],E.duration=+_d(a,ka(T),y,A,g),E.delay=(+_d(m,ka(T),y,A,g)||0)-T._delay,!o&&w===1&&E.delay&&(T._delay=m=E.delay,T._start+=m,E.delay=0),x.to(A,E,M?M(y,A,g):0),x._ease=ri.none;x.duration()?a=m=0:T.timeline=0}else if(r){zd(qs(x.vars.defaults,{ease:"none"})),x._ease=Bh(r.ease||v.ease||"none");var P=0,b,F,I;if(as(r))r.forEach(function(L){return x.to(g,L,">")}),x.duration();else{E={};for(C in r)C==="ease"||C==="easeEach"||K7(C,r[C],E,r.easeEach);for(C in E)for(b=E[C].sort(function(L,D){return L.t-D.t}),P=0,y=0;y<b.length;y++)F=b[y],I={ease:F.e,duration:(F.t-(y?b[y-1].t:0))/100*a},I[C]=F.v,x.to(g,I,P),P+=I.duration;x.duration()<a&&x.to({},{duration:a-x.duration()})}}a||T.duration(a=x.duration())}else T.timeline=0;return u===!0&&!IT&&(qo=ka(T),$i.killTweensOf(g),qo=0),da(p,ka(T),S),v.reversed&&T.reverse(),v.paused&&T.paused(!0),(c||!a&&!r&&T._start===Yi(p._time)&&Ps(c)&&C7(ka(T))&&p.data!=="nested")&&(T._tTime=-Li,T.render(Math.max(0,-m)||0)),d&&aP(ka(T),d),T}var i=t.prototype;return i.render=function(v,S,s){var T=this._time,e=this._tDur,a=this._dur,m=v<0,c=v>e-Li&&!m?e:v<Li?0:v,o,u,r,h,d,l,p,g,x;if(!a)R7(this,v,S,s);else if(c!==this._tTime||!v||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(o=c,g=this.timeline,this._repeat){if(h=a+this._rDelay,this._repeat<-1&&m)return this.totalTime(h*100+v,S,s);if(o=Yi(c%h),c===e?(r=this._repeat,o=a):(d=Yi(c/h),r=~~d,r&&r===d?(o=a,r--):o>a&&(o=a)),l=this._yoyo&&r&1,l&&(x=this._yEase,o=a-o),d=Xc(this._tTime,h),o===T&&!s&&this._initted&&r===d)return this._tTime=c,this;r!==d&&(g&&this._yEase&&EP(g,l),this.vars.repeatRefresh&&!l&&!this._lock&&o!==h&&this._initted&&(this._lock=s=1,this.render(Yi(h*r),!0).invalidate()._lock=0))}if(!this._initted){if(oP(this,m?v:o,s,S,c))return this._tTime=0,this;if(T!==this._time&&!(s&&this.vars.repeatRefresh&&r!==d))return this;if(a!==this._dur)return this.render(v,S,s)}if(this._tTime=c,this._time=o,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=p=(x||this._ease)(o/a),this._from&&(this.ratio=p=1-p),!T&&c&&!S&&!d&&(ks(this,"onStart"),this._tTime!==c))return this;for(u=this._pt;u;)u.r(p,u.d),u=u._next;g&&g.render(v<0?v:g._dur*g._ease(o/this._dur),S,s)||this._startAt&&(this._zTime=v),this._onUpdate&&!S&&(m&&l1(this,v,S,s),ks(this,"onUpdate")),this._repeat&&r!==d&&this.vars.onRepeat&&!S&&this.parent&&ks(this,"onRepeat"),(c===this._tDur||!c)&&this._tTime===c&&(m&&!this._onUpdate&&l1(this,v,!0,!0),(v||!a)&&(c===this._tDur&&this._ts>0||!c&&this._ts<0)&&xl(this,1),!S&&!(m&&!T)&&(c||T||l)&&(ks(this,c===e?"onComplete":"onReverseComplete",!0),this._prom&&!(c<e&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(v){return(!v||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(v),f.prototype.invalidate.call(this,v)},i.resetTo=function(v,S,s,T,e){op||Xs.wake(),this._ts||this.play();var a=Math.min(this._dur,(this._dp._time-this._start)*this._ts),m;return this._initted||GT(this,a),m=this._ease(a/this._dur),Y7(this,v,S,s,T,m,a,e)?this.resetTo(v,S,s,T,1):(Qg(this,0),this.parent||sP(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(v,S){if(S===void 0&&(S="all"),!v&&(!S||S==="all"))return this._lazy=this._pt=0,this.parent?Rd(this):this.scrollTrigger&&this.scrollTrigger.kill(!!$n),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(v,S,qo&&qo.vars.overwrite!==!0)._first||Rd(this),this.parent&&s!==this.timeline.totalDuration()&&kc(this,this._dur*this.timeline._tDur/s,0,1),this}var T=this._targets,e=v?pr(v):T,a=this._ptLookup,m=this._pt,c,o,u,r,h,d,l;if((!S||S==="all")&&w7(T,e))return S==="all"&&(this._pt=0),Rd(this);for(c=this._op=this._op||[],S!=="all"&&(Vn(S)&&(h={},bs(S,function(p){return h[p]=1}),S=h),S=$7(T,S)),l=T.length;l--;)if(~e.indexOf(T[l])){o=a[l],S==="all"?(c[l]=S,r=o,u={}):(u=c[l]=c[l]||{},r=S);for(h in r)d=o&&o[h],d&&((!("kill"in d.d)||d.d.kill(h)===!0)&&Kg(this,d,"_pt"),delete o[h]),u!=="all"&&(u[h]=1)}return this._initted&&!this._pt&&m&&Rd(this),this},t.to=function(v,S){return new t(v,S,arguments[2])},t.from=function(v,S){return Gd(1,arguments)},t.delayedCall=function(v,S,s,T){return new t(S,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:v,onComplete:S,onReverseComplete:S,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:T})},t.fromTo=function(v,S,s){return Gd(2,arguments)},t.set=function(v,S){return S.duration=0,S.repeatDelay||(S.repeat=0),new t(v,S)},t.killTweensOf=function(v,S,s){return $i.killTweensOf(v,S,s)},t})(lp);qs(mn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});bs("staggerTo,staggerFrom,staggerFromTo",function(f){mn[f]=function(){var t=new ds,i=u1.call(arguments,0);return i.splice(f==="staggerFromTo"?5:4,0,0),t[f].apply(t,i)}});var _T=function(t,i,n){return t[i]=n},RP=function(t,i,n){return t[i](n)},j7=function(t,i,n,v){return t[i](v.fp,n)},Q7=function(t,i,n){return t.setAttribute(i,n)},WT=function(t,i){return qi(t[i])?RP:LT(t[i])&&t.setAttribute?Q7:_T},PP=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e6)/1e6,i)},Z7=function(t,i){return i.set(i.t,i.p,!!(i.s+i.c*t),i)},bP=function(t,i){var n=i._pt,v="";if(!t&&i.b)v=i.b;else if(t===1&&i.e)v=i.e;else{for(;n;)v=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+v,n=n._next;v+=i.c}i.set(i.t,i.p,v,i)},HT=function(t,i){for(var n=i._pt;n;)n.r(t,n.d),n=n._next},J7=function(t,i,n,v){for(var S=this._pt,s;S;)s=S._next,S.p===v&&S.modifier(t,i,n),S=s},q7=function(t){for(var i=this._pt,n,v;i;)v=i._next,i.p===t&&!i.op||i.op===t?Kg(this,i,"_pt"):i.dep||(n=1),i=v;return!n},tz=function(t,i,n,v){v.mSet(t,i,v.m.call(v.tween,n,v.mt),v)},IP=function(t){for(var i=t._pt,n,v,S,s;i;){for(n=i._next,v=S;v&&v.pr>i.pr;)v=v._next;(i._prev=v?v._prev:s)?i._prev._next=i:S=i,(i._next=v)?v._prev=i:s=i,i=n}t._pt=S},Is=(function(){function f(i,n,v,S,s,T,e,a,m){this.t=n,this.s=S,this.c=s,this.p=v,this.r=T||PP,this.d=e||this,this.set=a||_T,this.pr=m||0,this._next=i,i&&(i._prev=this)}var t=f.prototype;return t.modifier=function(n,v,S){this.mSet=this.mSet||this.set,this.set=tz,this.m=n,this.mt=S,this.tween=v},f})();bs(BT+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(f){return NT[f]=1});Js.TweenMax=Js.TweenLite=mn;Js.TimelineLite=Js.TimelineMax=ds;$i=new ds({sortChildren:!1,defaults:Wc,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});js.stringFilter=yP;var Uh=[],Dm={},ez=[],Ow=0,iz=0,Px=function(t){return(Dm[t]||ez).map(function(i){return i()})},p1=function(){var t=Date.now(),i=[];t-Ow>2&&(Px("matchMediaInit"),Uh.forEach(function(n){var v=n.queries,S=n.conditions,s,T,e,a;for(T in v)s=ra.matchMedia(v[T]).matches,s&&(e=1),s!==S[T]&&(S[T]=s,a=1);a&&(n.revert(),e&&i.push(n))}),Px("matchMediaRevert"),i.forEach(function(n){return n.onMatch(n,function(v){return n.add(null,v)})}),Ow=t,Px("matchMedia"))},LP=(function(){function f(i,n){this.selector=n&&c1(n),this.data=[],this._r=[],this.isReverted=!1,this.id=iz++,i&&this.add(i)}var t=f.prototype;return t.add=function(n,v,S){qi(n)&&(S=v,v=n,n=qi);var s=this,T=function(){var a=Wi,m=s.selector,c;return a&&a!==s&&a.data.push(s),S&&(s.selector=c1(S)),Wi=s,c=v.apply(s,arguments),qi(c)&&s._r.push(c),Wi=a,s.selector=m,s.isReverted=!1,c};return s.last=T,n===qi?T(s,function(e){return s.add(null,e)}):n?s[n]=T:T},t.ignore=function(n){var v=Wi;Wi=null,n(this),Wi=v},t.getTweens=function(){var n=[];return this.data.forEach(function(v){return v instanceof f?n.push.apply(n,v.getTweens()):v instanceof mn&&!(v.parent&&v.parent.data==="nested")&&n.push(v)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,v){var S=this;if(n?(function(){for(var T=S.getTweens(),e=S.data.length,a;e--;)a=S.data[e],a.data==="isFlip"&&(a.revert(),a.getChildren(!0,!0,!1).forEach(function(m){return T.splice(T.indexOf(m),1)}));for(T.map(function(m){return{g:m._dur||m._delay||m._sat&&!m._sat.vars.immediateRender?m.globalTime(0):-1/0,t:m}}).sort(function(m,c){return c.g-m.g||-1/0}).forEach(function(m){return m.t.revert(n)}),e=S.data.length;e--;)a=S.data[e],a instanceof ds?a.data!=="nested"&&(a.scrollTrigger&&a.scrollTrigger.revert(),a.kill()):!(a instanceof mn)&&a.revert&&a.revert(n);S._r.forEach(function(m){return m(n,S)}),S.isReverted=!0})():this.data.forEach(function(T){return T.kill&&T.kill()}),this.clear(),v)for(var s=Uh.length;s--;)Uh[s].id===this.id&&Uh.splice(s,1)},t.revert=function(n){this.kill(n||{})},f})(),nz=(function(){function f(i){this.contexts=[],this.scope=i,Wi&&Wi.data.push(this)}var t=f.prototype;return t.add=function(n,v,S){Ma(n)||(n={matches:n});var s=new LP(0,S||this.scope),T=s.conditions={},e,a,m;Wi&&!s.selector&&(s.selector=Wi.selector),this.contexts.push(s),v=s.add("onMatch",v),s.queries=n;for(a in n)a==="all"?m=1:(e=ra.matchMedia(n[a]),e&&(Uh.indexOf(s)<0&&Uh.push(s),(T[a]=e.matches)&&(m=1),e.addListener?e.addListener(p1):e.addEventListener("change",p1)));return m&&v(s,function(c){return s.add(null,c)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(v){return v.kill(n,!0)})},f})(),og={registerPlugin:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];i.forEach(function(v){return mP(v)})},timeline:function(t){return new ds(t)},getTweensOf:function(t,i){return $i.getTweensOf(t,i)},getProperty:function(t,i,n,v){Vn(t)&&(t=pr(t)[0]);var S=Oh(t||{}).get,s=n?nP:iP;return n==="native"&&(n=""),t&&(i?s((_s[i]&&_s[i].get||S)(t,i,n,v)):function(T,e,a){return s((_s[T]&&_s[T].get||S)(t,T,e,a))})},quickSetter:function(t,i,n){if(t=pr(t),t.length>1){var v=t.map(function(m){return Os.quickSetter(m,i,n)}),S=v.length;return function(m){for(var c=S;c--;)v[c](m)}}t=t[0]||{};var s=_s[i],T=Oh(t),e=T.harness&&(T.harness.aliases||{})[i]||i,a=s?function(m){var c=new s;oc._pt=0,c.init(t,n?m+n:m,oc,0,[t]),c.render(1,c),oc._pt&&HT(1,oc)}:T.set(t,e);return s?a:function(m){return a(t,e,n?m+n:m,T,1)}},quickTo:function(t,i,n){var v,S=Os.to(t,qs((v={},v[i]="+=0.1",v.paused=!0,v.stagger=0,v),n||{})),s=function(e,a,m){return S.resetTo(i,e,a,m)};return s.tween=S,s},isTweening:function(t){return $i.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Bh(t.ease,Wc.ease)),bw(Wc,t||{})},config:function(t){return bw(js,t||{})},registerEffect:function(t){var i=t.name,n=t.effect,v=t.plugins,S=t.defaults,s=t.extendTimeline;(v||"").split(",").forEach(function(T){return T&&!_s[T]&&!Js[T]&&sp(i+" effect requires "+T+" plugin.")}),Ax[i]=function(T,e,a){return n(pr(T),qs(e||{},S),a)},s&&(ds.prototype[i]=function(T,e,a){return this.add(Ax[i](T,Ma(e)?e:(a=e)&&{},this),a)})},registerEase:function(t,i){ri[t]=Bh(i)},parseEase:function(t,i){return arguments.length?Bh(t,i):ri},getById:function(t){return $i.getById(t)},exportRoot:function(t,i){t===void 0&&(t={});var n=new ds(t),v,S;for(n.smoothChildTiming=Ps(t.smoothChildTiming),$i.remove(n),n._dp=0,n._time=n._tTime=$i._time,v=$i._first;v;)S=v._next,(i||!(!v._dur&&v instanceof mn&&v.vars.onComplete===v._targets[0]))&&da(n,v,v._start-v._delay),v=S;return da($i,n,0),n},context:function(t,i){return t?new LP(t,i):Wi},matchMedia:function(t){return new nz(t)},matchMediaRefresh:function(){return Uh.forEach(function(t){var i=t.conditions,n,v;for(v in i)i[v]&&(i[v]=!1,n=1);n&&t.revert()})||p1()},addEventListener:function(t,i){var n=Dm[t]||(Dm[t]=[]);~n.indexOf(i)||n.push(i)},removeEventListener:function(t,i){var n=Dm[t],v=n&&n.indexOf(i);v>=0&&n.splice(v,1)},utils:{wrap:N7,wrapYoyo:B7,distribute:uP,random:fP,snap:cP,normalize:O7,getUnit:ss,clamp:I7,splitColor:gP,toArray:pr,selector:c1,mapRange:pP,pipe:F7,unitize:D7,interpolate:U7,shuffle:hP},install:ZR,effects:Ax,ticker:Xs,updateRoot:ds.updateRoot,plugins:_s,globalTimeline:$i,core:{PropTween:Is,globals:JR,Tween:mn,Timeline:ds,Animation:lp,getCache:Oh,_removeLinkedListItem:Kg,reverting:function(){return $n},context:function(t){return t&&Wi&&(Wi.data.push(t),t._ctx=Wi),Wi},suppressOverwrites:function(t){return IT=t}}};bs("to,from,fromTo,delayedCall,set,killTweensOf",function(f){return og[f]=mn[f]});Xs.add(ds.updateRoot);oc=og.to({},{duration:0});var sz=function(t,i){for(var n=t._pt;n&&n.p!==i&&n.op!==i&&n.fp!==i;)n=n._next;return n},rz=function(t,i){var n=t._targets,v,S,s;for(v in i)for(S=n.length;S--;)s=t._ptLookup[S][v],s&&(s=s.d)&&(s._pt&&(s=sz(s,v)),s&&s.modifier&&s.modifier(i[v],t,n[S],v))},bx=function(t,i){return{name:t,headless:1,rawVars:1,init:function(v,S,s){s._onInit=function(T){var e,a;if(Vn(S)&&(e={},bs(S,function(m){return e[m]=1}),S=e),i){e={};for(a in S)e[a]=i(S[a]);S=e}rz(T,S)}}}},Os=og.registerPlugin({name:"attr",init:function(t,i,n,v,S){var s,T,e;this.tween=n;for(s in i)e=t.getAttribute(s)||"",T=this.add(t,"setAttribute",(e||0)+"",i[s],v,S,0,0,s),T.op=s,T.b=e,this._props.push(s)},render:function(t,i){for(var n=i._pt;n;)$n?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",headless:1,init:function(t,i){for(var n=i.length;n--;)this.add(t,n,t[n]||0,i[n],0,0,0,0,0,1)}},bx("roundProps",f1),bx("modifiers"),bx("snap",cP))||og;mn.version=ds.version=Os.version="3.14.2";QR=1;FT()&&Yc();ri.Power0;ri.Power1;ri.Power2;ri.Power3;ri.Power4;ri.Linear;ri.Quad;ri.Cubic;ri.Quart;ri.Quint;ri.Strong;ri.Elastic;ri.Back;ri.SteppedEase;ri.Bounce;ri.Sine;ri.Expo;ri.Circ;/*!
 * CSSPlugin 3.14.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Nw,tl,dc,XT,Eh,Bw,kT,az=function(){return typeof window<"u"},fo={},ah=180/Math.PI,pc=Math.PI/180,ku=Math.atan2,Uw=1e8,YT=/([A-Z])/g,oz=/(left|right|width|margin|padding|x)/i,lz=/[\s,\(]\S/,va={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},v1=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},hz=function(t,i){return i.set(i.t,i.p,t===1?i.e:Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},uz=function(t,i){return i.set(i.t,i.p,t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},cz=function(t,i){return i.set(i.t,i.p,t===1?i.e:t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},fz=function(t,i){var n=i.s+i.c*t;i.set(i.t,i.p,~~(n+(n<0?-.5:.5))+i.u,i)},FP=function(t,i){return i.set(i.t,i.p,t?i.e:i.b,i)},DP=function(t,i){return i.set(i.t,i.p,t!==1?i.b:i.e,i)},dz=function(t,i,n){return t.style[i]=n},pz=function(t,i,n){return t.style.setProperty(i,n)},vz=function(t,i,n){return t._gsap[i]=n},mz=function(t,i,n){return t._gsap.scaleX=t._gsap.scaleY=n},gz=function(t,i,n,v,S){var s=t._gsap;s.scaleX=s.scaleY=n,s.renderTransform(S,s)},xz=function(t,i,n,v,S){var s=t._gsap;s[i]=n,s.renderTransform(S,s)},Ki="transform",Ls=Ki+"Origin",yz=function f(t,i){var n=this,v=this.target,S=v.style,s=v._gsap;if(t in fo&&S){if(this.tfm=this.tfm||{},t!=="transform")t=va[t]||t,~t.indexOf(",")?t.split(",").forEach(function(T){return n.tfm[T]=Ya(v,T)}):this.tfm[t]=s.x?s[t]:Ya(v,t),t===Ls&&(this.tfm.zOrigin=s.zOrigin);else return va.transform.split(",").forEach(function(T){return f.call(n,T,i)});if(this.props.indexOf(Ki)>=0)return;s.svg&&(this.svgo=v.getAttribute("data-svg-origin"),this.props.push(Ls,i,"")),t=Ki}(S||i)&&this.props.push(t,i,S[t])},OP=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Tz=function(){var t=this.props,i=this.target,n=i.style,v=i._gsap,S,s;for(S=0;S<t.length;S+=3)t[S+1]?t[S+1]===2?i[t[S]](t[S+2]):i[t[S]]=t[S+2]:t[S+2]?n[t[S]]=t[S+2]:n.removeProperty(t[S].substr(0,2)==="--"?t[S]:t[S].replace(YT,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)v[s]=this.tfm[s];v.svg&&(v.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),S=kT(),(!S||!S.isStart)&&!n[Ki]&&(OP(n),v.zOrigin&&n[Ls]&&(n[Ls]+=" "+v.zOrigin+"px",v.zOrigin=0,v.renderTransform()),v.uncache=1)}},NP=function(t,i){var n={target:t,props:[],revert:Tz,save:yz};return t._gsap||Os.core.getCache(t),i&&t.style&&t.nodeType&&i.split(",").forEach(function(v){return n.save(v)}),n},BP,m1=function(t,i){var n=tl.createElementNS?tl.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):tl.createElement(t);return n&&n.style?n:tl.createElement(t)},Ys=function f(t,i,n){var v=getComputedStyle(t);return v[i]||v.getPropertyValue(i.replace(YT,"-$1").toLowerCase())||v.getPropertyValue(i)||!n&&f(t,$c(i)||i,1)||""},Vw="O,Moz,ms,Ms,Webkit".split(","),$c=function(t,i,n){var v=i||Eh,S=v.style,s=5;if(t in S&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(Vw[s]+t in S););return s<0?null:(s===3?"ms":s>=0?Vw[s]:"")+t},g1=function(){az()&&window.document&&(Nw=window,tl=Nw.document,dc=tl.documentElement,Eh=m1("div")||{style:{}},m1("div"),Ki=$c(Ki),Ls=Ki+"Origin",Eh.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",BP=!!$c("perspective"),kT=Os.core.reverting,XT=1)},zw=function(t){var i=t.ownerSVGElement,n=m1("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),v=t.cloneNode(!0),S;v.style.display="block",n.appendChild(v),dc.appendChild(n);try{S=v.getBBox()}catch{}return n.removeChild(v),dc.removeChild(n),S},Gw=function(t,i){for(var n=i.length;n--;)if(t.hasAttribute(i[n]))return t.getAttribute(i[n])},UP=function(t){var i,n;try{i=t.getBBox()}catch{i=zw(t),n=1}return i&&(i.width||i.height)||n||(i=zw(t)),i&&!i.width&&!i.x&&!i.y?{x:+Gw(t,["x","cx","x1"])||0,y:+Gw(t,["y","cy","y1"])||0,width:0,height:0}:i},VP=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&UP(t))},yl=function(t,i){if(i){var n=t.style,v;i in fo&&i!==Ls&&(i=Ki),n.removeProperty?(v=i.substr(0,2),(v==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),n.removeProperty(v==="--"?i:i.replace(YT,"-$1").toLowerCase())):n.removeAttribute(i)}},el=function(t,i,n,v,S,s){var T=new Is(t._pt,i,n,0,1,s?DP:FP);return t._pt=T,T.b=v,T.e=S,t._props.push(n),T},_w={deg:1,rad:1,turn:1},Ez={grid:1,flex:1},Tl=function f(t,i,n,v){var S=parseFloat(n)||0,s=(n+"").trim().substr((S+"").length)||"px",T=Eh.style,e=oz.test(i),a=t.tagName.toLowerCase()==="svg",m=(a?"client":"offset")+(e?"Width":"Height"),c=100,o=v==="px",u=v==="%",r,h,d,l;if(v===s||!S||_w[v]||_w[s])return S;if(s!=="px"&&!o&&(S=f(t,i,n,"px")),l=t.getCTM&&VP(t),(u||s==="%")&&(fo[i]||~i.indexOf("adius")))return r=l?t.getBBox()[e?"width":"height"]:t[m],rn(u?S/r*c:S/100*r);if(T[e?"width":"height"]=c+(o?s:v),h=v!=="rem"&&~i.indexOf("adius")||v==="em"&&t.appendChild&&!a?t:t.parentNode,l&&(h=(t.ownerSVGElement||{}).parentNode),(!h||h===tl||!h.appendChild)&&(h=tl.body),d=h._gsap,d&&u&&d.width&&e&&d.time===Xs.time&&!d.uncache)return rn(S/d.width*c);if(u&&(i==="height"||i==="width")){var p=t.style[i];t.style[i]=c+v,r=t[m],p?t.style[i]=p:yl(t,i)}else(u||s==="%")&&!Ez[Ys(h,"display")]&&(T.position=Ys(t,"position")),h===t&&(T.position="static"),h.appendChild(Eh),r=Eh[m],h.removeChild(Eh),T.position="absolute";return e&&u&&(d=Oh(h),d.time=Xs.time,d.width=h[m]),rn(o?r*S/c:r&&S?c/r*S:0)},Ya=function(t,i,n,v){var S;return XT||g1(),i in va&&i!=="transform"&&(i=va[i],~i.indexOf(",")&&(i=i.split(",")[0])),fo[i]&&i!=="transform"?(S=up(t,v),S=i!=="transformOrigin"?S[i]:S.svg?S.origin:hg(Ys(t,Ls))+" "+S.zOrigin+"px"):(S=t.style[i],(!S||S==="auto"||v||~(S+"").indexOf("calc("))&&(S=lg[i]&&lg[i](t,i,n)||Ys(t,i)||tP(t,i)||(i==="opacity"?1:0))),n&&!~(S+"").trim().indexOf(" ")?Tl(t,i,S,n)+n:S},Sz=function(t,i,n,v){if(!n||n==="none"){var S=$c(i,t,1),s=S&&Ys(t,S,1);s&&s!==n?(i=S,n=s):i==="borderColor"&&(n=Ys(t,"borderTopColor"))}var T=new Is(this._pt,t.style,i,0,1,bP),e=0,a=0,m,c,o,u,r,h,d,l,p,g,x,y;if(T.b=n,T.e=v,n+="",v+="",v.substring(0,6)==="var(--"&&(v=Ys(t,v.substring(4,v.indexOf(")")))),v==="auto"&&(h=t.style[i],t.style[i]=v,v=Ys(t,i)||v,h?t.style[i]=h:yl(t,i)),m=[n,v],yP(m),n=m[0],v=m[1],o=n.match(ac)||[],y=v.match(ac)||[],y.length){for(;c=ac.exec(v);)d=c[0],p=v.substring(e,c.index),r?r=(r+1)%5:(p.substr(-5)==="rgba("||p.substr(-5)==="hsla(")&&(r=1),d!==(h=o[a++]||"")&&(u=parseFloat(h)||0,x=h.substr((u+"").length),d.charAt(1)==="="&&(d=fc(u,d)+x),l=parseFloat(d),g=d.substr((l+"").length),e=ac.lastIndex-g.length,g||(g=g||js.units[i]||x,e===v.length&&(v+=g,T.e+=g)),x!==g&&(u=Tl(t,i,h,g)||0),T._pt={_next:T._pt,p:p||a===1?p:",",s:u,c:l-u,m:r&&r<4||i==="zIndex"?Math.round:0});T.c=e<v.length?v.substring(e,v.length):""}else T.r=i==="display"&&v==="none"?DP:FP;return jR.test(v)&&(T.e=0),this._pt=T,T},Ww={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},wz=function(t){var i=t.split(" "),n=i[0],v=i[1]||"50%";return(n==="top"||n==="bottom"||v==="left"||v==="right")&&(t=n,n=v,v=t),i[0]=Ww[n]||n,i[1]=Ww[v]||v,i.join(" ")},Az=function(t,i){if(i.tween&&i.tween._time===i.tween._dur){var n=i.t,v=n.style,S=i.u,s=n._gsap,T,e,a;if(S==="all"||S===!0)v.cssText="",e=1;else for(S=S.split(","),a=S.length;--a>-1;)T=S[a],fo[T]&&(e=1,T=T==="transformOrigin"?Ls:Ki),yl(n,T);e&&(yl(n,Ki),s&&(s.svg&&n.removeAttribute("transform"),v.scale=v.rotate=v.translate="none",up(n,1),s.uncache=1,OP(v)))}},lg={clearProps:function(t,i,n,v,S){if(S.data!=="isFromStart"){var s=t._pt=new Is(t._pt,i,n,0,0,Az);return s.u=v,s.pr=-10,s.tween=S,t._props.push(n),1}}},hp=[1,0,0,1,0,0],zP={},GP=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Hw=function(t){var i=Ys(t,Ki);return GP(i)?hp:i.substr(7).match(KR).map(rn)},$T=function(t,i){var n=t._gsap||Oh(t),v=t.style,S=Hw(t),s,T,e,a;return n.svg&&t.getAttribute("transform")?(e=t.transform.baseVal.consolidate().matrix,S=[e.a,e.b,e.c,e.d,e.e,e.f],S.join(",")==="1,0,0,1,0,0"?hp:S):(S===hp&&!t.offsetParent&&t!==dc&&!n.svg&&(e=v.display,v.display="block",s=t.parentNode,(!s||!t.offsetParent&&!t.getBoundingClientRect().width)&&(a=1,T=t.nextElementSibling,dc.appendChild(t)),S=Hw(t),e?v.display=e:yl(t,"display"),a&&(T?s.insertBefore(t,T):s?s.appendChild(t):dc.removeChild(t))),i&&S.length>6?[S[0],S[1],S[4],S[5],S[12],S[13]]:S)},x1=function(t,i,n,v,S,s){var T=t._gsap,e=S||$T(t,!0),a=T.xOrigin||0,m=T.yOrigin||0,c=T.xOffset||0,o=T.yOffset||0,u=e[0],r=e[1],h=e[2],d=e[3],l=e[4],p=e[5],g=i.split(" "),x=parseFloat(g[0])||0,y=parseFloat(g[1])||0,E,w,C,A;n?e!==hp&&(w=u*d-r*h)&&(C=x*(d/w)+y*(-h/w)+(h*p-d*l)/w,A=x*(-r/w)+y*(u/w)-(u*p-r*l)/w,x=C,y=A):(E=UP(t),x=E.x+(~g[0].indexOf("%")?x/100*E.width:x),y=E.y+(~(g[1]||g[0]).indexOf("%")?y/100*E.height:y)),v||v!==!1&&T.smooth?(l=x-a,p=y-m,T.xOffset=c+(l*u+p*h)-l,T.yOffset=o+(l*r+p*d)-p):T.xOffset=T.yOffset=0,T.xOrigin=x,T.yOrigin=y,T.smooth=!!v,T.origin=i,T.originIsAbsolute=!!n,t.style[Ls]="0px 0px",s&&(el(s,T,"xOrigin",a,x),el(s,T,"yOrigin",m,y),el(s,T,"xOffset",c,T.xOffset),el(s,T,"yOffset",o,T.yOffset)),t.setAttribute("data-svg-origin",x+" "+y)},up=function(t,i){var n=t._gsap||new wP(t);if("x"in n&&!i&&!n.uncache)return n;var v=t.style,S=n.scaleX<0,s="px",T="deg",e=getComputedStyle(t),a=Ys(t,Ls)||"0",m,c,o,u,r,h,d,l,p,g,x,y,E,w,C,A,M,R,P,b,F,I,L,D,O,z,W,k,X,V,G,N;return m=c=o=h=d=l=p=g=x=0,u=r=1,n.svg=!!(t.getCTM&&VP(t)),e.translate&&((e.translate!=="none"||e.scale!=="none"||e.rotate!=="none")&&(v[Ki]=(e.translate!=="none"?"translate3d("+(e.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(e.rotate!=="none"?"rotate("+e.rotate+") ":"")+(e.scale!=="none"?"scale("+e.scale.split(" ").join(",")+") ":"")+(e[Ki]!=="none"?e[Ki]:"")),v.scale=v.rotate=v.translate="none"),w=$T(t,n.svg),n.svg&&(n.uncache?(O=t.getBBox(),a=n.xOrigin-O.x+"px "+(n.yOrigin-O.y)+"px",D=""):D=!i&&t.getAttribute("data-svg-origin"),x1(t,D||a,!!D||n.originIsAbsolute,n.smooth!==!1,w)),y=n.xOrigin||0,E=n.yOrigin||0,w!==hp&&(R=w[0],P=w[1],b=w[2],F=w[3],m=I=w[4],c=L=w[5],w.length===6?(u=Math.sqrt(R*R+P*P),r=Math.sqrt(F*F+b*b),h=R||P?ku(P,R)*ah:0,p=b||F?ku(b,F)*ah+h:0,p&&(r*=Math.abs(Math.cos(p*pc))),n.svg&&(m-=y-(y*R+E*b),c-=E-(y*P+E*F))):(N=w[6],V=w[7],W=w[8],k=w[9],X=w[10],G=w[11],m=w[12],c=w[13],o=w[14],C=ku(N,X),d=C*ah,C&&(A=Math.cos(-C),M=Math.sin(-C),D=I*A+W*M,O=L*A+k*M,z=N*A+X*M,W=I*-M+W*A,k=L*-M+k*A,X=N*-M+X*A,G=V*-M+G*A,I=D,L=O,N=z),C=ku(-b,X),l=C*ah,C&&(A=Math.cos(-C),M=Math.sin(-C),D=R*A-W*M,O=P*A-k*M,z=b*A-X*M,G=F*M+G*A,R=D,P=O,b=z),C=ku(P,R),h=C*ah,C&&(A=Math.cos(C),M=Math.sin(C),D=R*A+P*M,O=I*A+L*M,P=P*A-R*M,L=L*A-I*M,R=D,I=O),d&&Math.abs(d)+Math.abs(h)>359.9&&(d=h=0,l=180-l),u=rn(Math.sqrt(R*R+P*P+b*b)),r=rn(Math.sqrt(L*L+N*N)),C=ku(I,L),p=Math.abs(C)>2e-4?C*ah:0,x=G?1/(G<0?-G:G):0),n.svg&&(D=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!GP(Ys(t,Ki)),D&&t.setAttribute("transform",D))),Math.abs(p)>90&&Math.abs(p)<270&&(S?(u*=-1,p+=h<=0?180:-180,h+=h<=0?180:-180):(r*=-1,p+=p<=0?180:-180)),i=i||n.uncache,n.x=m-((n.xPercent=m&&(!i&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-m)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+s,n.y=c-((n.yPercent=c&&(!i&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-c)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+s,n.z=o+s,n.scaleX=rn(u),n.scaleY=rn(r),n.rotation=rn(h)+T,n.rotationX=rn(d)+T,n.rotationY=rn(l)+T,n.skewX=p+T,n.skewY=g+T,n.transformPerspective=x+s,(n.zOrigin=parseFloat(a.split(" ")[2])||!i&&n.zOrigin||0)&&(v[Ls]=hg(a)),n.xOffset=n.yOffset=0,n.force3D=js.force3D,n.renderTransform=n.svg?Mz:BP?_P:Cz,n.uncache=0,n},hg=function(t){return(t=t.split(" "))[0]+" "+t[1]},Ix=function(t,i,n){var v=ss(i);return rn(parseFloat(i)+parseFloat(Tl(t,"x",n+"px",v)))+v},Cz=function(t,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,_P(t,i)},th="0deg",pd="0px",eh=") ",_P=function(t,i){var n=i||this,v=n.xPercent,S=n.yPercent,s=n.x,T=n.y,e=n.z,a=n.rotation,m=n.rotationY,c=n.rotationX,o=n.skewX,u=n.skewY,r=n.scaleX,h=n.scaleY,d=n.transformPerspective,l=n.force3D,p=n.target,g=n.zOrigin,x="",y=l==="auto"&&t&&t!==1||l===!0;if(g&&(c!==th||m!==th)){var E=parseFloat(m)*pc,w=Math.sin(E),C=Math.cos(E),A;E=parseFloat(c)*pc,A=Math.cos(E),s=Ix(p,s,w*A*-g),T=Ix(p,T,-Math.sin(E)*-g),e=Ix(p,e,C*A*-g+g)}d!==pd&&(x+="perspective("+d+eh),(v||S)&&(x+="translate("+v+"%, "+S+"%) "),(y||s!==pd||T!==pd||e!==pd)&&(x+=e!==pd||y?"translate3d("+s+", "+T+", "+e+") ":"translate("+s+", "+T+eh),a!==th&&(x+="rotate("+a+eh),m!==th&&(x+="rotateY("+m+eh),c!==th&&(x+="rotateX("+c+eh),(o!==th||u!==th)&&(x+="skew("+o+", "+u+eh),(r!==1||h!==1)&&(x+="scale("+r+", "+h+eh),p.style[Ki]=x||"translate(0, 0)"},Mz=function(t,i){var n=i||this,v=n.xPercent,S=n.yPercent,s=n.x,T=n.y,e=n.rotation,a=n.skewX,m=n.skewY,c=n.scaleX,o=n.scaleY,u=n.target,r=n.xOrigin,h=n.yOrigin,d=n.xOffset,l=n.yOffset,p=n.forceCSS,g=parseFloat(s),x=parseFloat(T),y,E,w,C,A;e=parseFloat(e),a=parseFloat(a),m=parseFloat(m),m&&(m=parseFloat(m),a+=m,e+=m),e||a?(e*=pc,a*=pc,y=Math.cos(e)*c,E=Math.sin(e)*c,w=Math.sin(e-a)*-o,C=Math.cos(e-a)*o,a&&(m*=pc,A=Math.tan(a-m),A=Math.sqrt(1+A*A),w*=A,C*=A,m&&(A=Math.tan(m),A=Math.sqrt(1+A*A),y*=A,E*=A)),y=rn(y),E=rn(E),w=rn(w),C=rn(C)):(y=c,C=o,E=w=0),(g&&!~(s+"").indexOf("px")||x&&!~(T+"").indexOf("px"))&&(g=Tl(u,"x",s,"px"),x=Tl(u,"y",T,"px")),(r||h||d||l)&&(g=rn(g+r-(r*y+h*w)+d),x=rn(x+h-(r*E+h*C)+l)),(v||S)&&(A=u.getBBox(),g=rn(g+v/100*A.width),x=rn(x+S/100*A.height)),A="matrix("+y+","+E+","+w+","+C+","+g+","+x+")",u.setAttribute("transform",A),p&&(u.style[Ki]=A)},Rz=function(t,i,n,v,S){var s=360,T=Vn(S),e=parseFloat(S)*(T&&~S.indexOf("rad")?ah:1),a=e-v,m=v+a+"deg",c,o;return T&&(c=S.split("_")[1],c==="short"&&(a%=s,a!==a%(s/2)&&(a+=a<0?s:-s)),c==="cw"&&a<0?a=(a+s*Uw)%s-~~(a/s)*s:c==="ccw"&&a>0&&(a=(a-s*Uw)%s-~~(a/s)*s)),t._pt=o=new Is(t._pt,i,n,v,a,hz),o.e=m,o.u="deg",t._props.push(n),o},Xw=function(t,i){for(var n in i)t[n]=i[n];return t},Pz=function(t,i,n){var v=Xw({},n._gsap),S="perspective,force3D,transformOrigin,svgOrigin",s=n.style,T,e,a,m,c,o,u,r;v.svg?(a=n.getAttribute("transform"),n.setAttribute("transform",""),s[Ki]=i,T=up(n,1),yl(n,Ki),n.setAttribute("transform",a)):(a=getComputedStyle(n)[Ki],s[Ki]=i,T=up(n,1),s[Ki]=a);for(e in fo)a=v[e],m=T[e],a!==m&&S.indexOf(e)<0&&(u=ss(a),r=ss(m),c=u!==r?Tl(n,e,a,r):parseFloat(a),o=parseFloat(m),t._pt=new Is(t._pt,T,e,c,o-c,v1),t._pt.u=r||0,t._props.push(e));Xw(T,v)};bs("padding,margin,Width,Radius",function(f,t){var i="Top",n="Right",v="Bottom",S="Left",s=(t<3?[i,n,v,S]:[i+S,i+n,v+n,v+S]).map(function(T){return t<2?f+T:"border"+T+f});lg[t>1?"border"+f:f]=function(T,e,a,m,c){var o,u;if(arguments.length<4)return o=s.map(function(r){return Ya(T,r,a)}),u=o.join(" "),u.split(o[0]).length===5?o[0]:u;o=(m+"").split(" "),u={},s.forEach(function(r,h){return u[r]=o[h]=o[h]||o[(h-1)/2|0]}),T.init(e,u,c)}});var WP={name:"css",register:g1,targetTest:function(t){return t.style&&t.nodeType},init:function(t,i,n,v,S){var s=this._props,T=t.style,e=n.vars.startAt,a,m,c,o,u,r,h,d,l,p,g,x,y,E,w,C,A;XT||g1(),this.styles=this.styles||NP(t),C=this.styles.props,this.tween=n;for(h in i)if(h!=="autoRound"&&(m=i[h],!(_s[h]&&AP(h,i,n,v,t,S)))){if(u=typeof m,r=lg[h],u==="function"&&(m=m.call(n,v,t,S),u=typeof m),u==="string"&&~m.indexOf("random(")&&(m=ap(m)),r)r(this,t,h,m,n)&&(w=1);else if(h.substr(0,2)==="--")a=(getComputedStyle(t).getPropertyValue(h)+"").trim(),m+="",ul.lastIndex=0,ul.test(a)||(d=ss(a),l=ss(m),l?d!==l&&(a=Tl(t,h,a,l)+l):d&&(m+=d)),this.add(T,"setProperty",a,m,v,S,0,0,h),s.push(h),C.push(h,0,T[h]);else if(u!=="undefined"){if(e&&h in e?(a=typeof e[h]=="function"?e[h].call(n,v,t,S):e[h],Vn(a)&&~a.indexOf("random(")&&(a=ap(a)),ss(a+"")||a==="auto"||(a+=js.units[h]||ss(Ya(t,h))||""),(a+"").charAt(1)==="="&&(a=Ya(t,h))):a=Ya(t,h),o=parseFloat(a),p=u==="string"&&m.charAt(1)==="="&&m.substr(0,2),p&&(m=m.substr(2)),c=parseFloat(m),h in va&&(h==="autoAlpha"&&(o===1&&Ya(t,"visibility")==="hidden"&&c&&(o=0),C.push("visibility",0,T.visibility),el(this,T,"visibility",o?"inherit":"hidden",c?"inherit":"hidden",!c)),h!=="scale"&&h!=="transform"&&(h=va[h],~h.indexOf(",")&&(h=h.split(",")[0]))),g=h in fo,g){if(this.styles.save(h),A=m,u==="string"&&m.substring(0,6)==="var(--"){if(m=Ys(t,m.substring(4,m.indexOf(")"))),m.substring(0,5)==="calc("){var M=t.style.perspective;t.style.perspective=m,m=Ys(t,"perspective"),M?t.style.perspective=M:yl(t,"perspective")}c=parseFloat(m)}if(x||(y=t._gsap,y.renderTransform&&!i.parseTransform||up(t,i.parseTransform),E=i.smoothOrigin!==!1&&y.smooth,x=this._pt=new Is(this._pt,T,Ki,0,1,y.renderTransform,y,0,-1),x.dep=1),h==="scale")this._pt=new Is(this._pt,y,"scaleY",y.scaleY,(p?fc(y.scaleY,p+c):c)-y.scaleY||0,v1),this._pt.u=0,s.push("scaleY",h),h+="X";else if(h==="transformOrigin"){C.push(Ls,0,T[Ls]),m=wz(m),y.svg?x1(t,m,0,E,0,this):(l=parseFloat(m.split(" ")[2])||0,l!==y.zOrigin&&el(this,y,"zOrigin",y.zOrigin,l),el(this,T,h,hg(a),hg(m)));continue}else if(h==="svgOrigin"){x1(t,m,1,E,0,this);continue}else if(h in zP){Rz(this,y,h,o,p?fc(o,p+m):m);continue}else if(h==="smoothOrigin"){el(this,y,"smooth",y.smooth,m);continue}else if(h==="force3D"){y[h]=m;continue}else if(h==="transform"){Pz(this,m,t);continue}}else h in T||(h=$c(h)||h);if(g||(c||c===0)&&(o||o===0)&&!lz.test(m)&&h in T)d=(a+"").substr((o+"").length),c||(c=0),l=ss(m)||(h in js.units?js.units[h]:d),d!==l&&(o=Tl(t,h,a,l)),this._pt=new Is(this._pt,g?y:T,h,o,(p?fc(o,p+c):c)-o,!g&&(l==="px"||h==="zIndex")&&i.autoRound!==!1?fz:v1),this._pt.u=l||0,g&&A!==m?(this._pt.b=a,this._pt.e=A,this._pt.r=cz):d!==l&&l!=="%"&&(this._pt.b=a,this._pt.r=uz);else if(h in T)Sz.call(this,t,h,a,p?p+m:m);else if(h in t)this.add(t,h,a||t[h],p?p+m:m,v,S);else if(h!=="parseTransform"){OT(h,m);continue}g||(h in T?C.push(h,0,T[h]):typeof t[h]=="function"?C.push(h,2,t[h]()):C.push(h,1,a||t[h])),s.push(h)}}w&&IP(this)},render:function(t,i){if(i.tween._time||!kT())for(var n=i._pt;n;)n.r(t,n.d),n=n._next;else i.styles.revert()},get:Ya,aliases:va,getSetter:function(t,i,n){var v=va[i];return v&&v.indexOf(",")<0&&(i=v),i in fo&&i!==Ls&&(t._gsap.x||Ya(t,"x"))?n&&Bw===n?i==="scale"?mz:vz:(Bw=n||{})&&(i==="scale"?gz:xz):t.style&&!LT(t.style[i])?dz:~i.indexOf("-")?pz:WT(t,i)},core:{_removeProperty:yl,_getMatrix:$T}};Os.utils.checkPrefix=$c;Os.core.getStyleSaver=NP;(function(f,t,i,n){var v=bs(f+","+t+","+i,function(S){fo[S]=1});bs(t,function(S){js.units[S]="deg",zP[S]=1}),va[v[13]]=f+","+t,bs(n,function(S){var s=S.split(":");va[s[1]]=v[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");bs("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(f){js.units[f]="px"});Os.registerPlugin(WP);var y1=Os.registerPlugin(WP)||Os;y1.core.Tween;var bz=Jt('<div class="w-[14%] bg-black/20 rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] flex flex-col overflow-hidden relative group"><div class="flex-1 relative cursor-pointer"></div></div>');function Iz(f,t){er(t,!1);let i=Oe(t,"show",8,!1),n=Oe(t,"rollDuration",8,3.5);const v=bl();let S=de(),s=de(),T,e,a,m=[],c,o,u,r=!1;const h={size:7.2,edgeRadius:1.6,segments:12},d=16,l=4;function p(){const b=new Ef(h.size,h.size,h.size,h.segments,h.segments,h.segments),F=b.attributes.position,I=h.size/2-h.edgeRadius;for(let L=0;L<F.count;L++){let D=F.getX(L),O=F.getY(L),z=F.getZ(L);if(Math.abs(D)>I&&Math.abs(O)>I&&Math.abs(z)>I){const W=new St(D>0?D-I:D+I,O>0?O-I:O+I,z>0?z-I:z+I);W.normalize().multiplyScalar(h.edgeRadius),F.setXYZ(L,(D>0?I:-I)+W.x,(O>0?I:-I)+W.y,(z>0?I:-I)+W.z)}else if(Math.abs(D)>I&&Math.abs(O)>I){const W=new ai(D>0?D-I:D+I,O>0?O-I:O+I);W.normalize().multiplyScalar(h.edgeRadius),F.setXY(L,(D>0?I:-I)+W.x,(O>0?I:-I)+W.y)}else if(Math.abs(D)>I&&Math.abs(z)>I){const W=new ai(D>0?D-I:D+I,z>0?z-I:z+I);W.normalize().multiplyScalar(h.edgeRadius),F.setX(L,(D>0?I:-I)+W.x),F.setZ(L,(z>0?I:-I)+W.y)}else if(Math.abs(O)>I&&Math.abs(z)>I){const W=new ai(O>0?O-I:O+I,z>0?z-I:z+I);W.normalize().multiplyScalar(h.edgeRadius),F.setY(L,(O>0?I:-I)+W.x),F.setZ(L,(z>0?I:-I)+W.y)}}return b.computeVertexNormals(),b}function g(){const b=p(),F=new em({color:15790320,roughness:.6,metalness:.05}),I=new Cd,L=new Es(b,F);L.castShadow=!0,I.add(L);const D=.1*h.size,O=new eg(D,12,12),z=new em({color:2236962,roughness:.4,metalness:0}),k=h.size/2-D*.4,X=.22*h.size;return[{face:"front",axis:"z",val:k,dots:[[0,0]]},{face:"back",axis:"z",val:-k,dots:[[-X,-X],[-X,0],[-X,X],[X,-X],[X,0],[X,X]]},{face:"top",axis:"y",val:k,dots:[[-X,-X],[X,X]]},{face:"bottom",axis:"y",val:-k,dots:[[-X,-X],[0,0],[X,X],[X,-X],[-X,X]]},{face:"right",axis:"x",val:k,dots:[[-X,-X],[0,0],[X,X]]},{face:"left",axis:"x",val:-k,dots:[[-X,-X],[X,-X],[-X,X],[X,X]]}].forEach(G=>{G.dots.forEach(N=>{const H=new Es(O,z);G.axis==="z"?H.position.set(N[0],N[1],G.val):G.axis==="y"?H.position.set(N[0],G.val,N[1]):H.position.set(G.val,N[0],N[1]),I.add(H)})}),I}let x=0;function y(){ht(s,new Y5),T=new Hs(60,Y(S).clientWidth/Y(S).clientHeight,.1,100),T.position.set(0,18,28),T.lookAt(0,4,0),e=new VB({antialias:!0,alpha:!0}),e.setSize(Y(S).clientWidth,Y(S).clientHeight),e.shadowMap.enabled=!0,Y(S).appendChild(e.domElement);const b=new eN(16777215,.7);Y(s).add(b);const F=new tN(16777215,1.2);F.position.set(10,25,15),F.castShadow=!0,F.shadow.mapSize.width=1024,F.shadow.mapSize.height=1024,Y(s).add(F);const I=new J5(16777215,.5);I.position.set(-15,10,-10),Y(s).add(I),a=new s7,a.gravity.set(0,-200,0),a.allowSleep=!0,a.solver.iterations=20;const L=new Dh({friction:.2,restitution:.5}),D=new Dh({friction:.4,restitution:.3}),O=new Dh({friction:.05,restitution:.8}),z=new Fh(L,L,{friction:.2,restitution:.5,contactEquationStiffness:1e6,contactEquationRelaxation:3});a.addContactMaterial(z);const W=new Fh(L,D,{friction:.4,restitution:.4});a.addContactMaterial(W);const k=new Fh(L,O,{friction:.05,restitution:.7});a.addContactMaterial(k),o=new pe({mass:0,shape:new Tx,material:D}),o.quaternion.setFromEuler(-Math.PI/2,0,0),a.addBody(o),c=new Es(new tg(d,d,l,32),new em({color:1118481,roughness:.4,metalness:.2})),c.position.y=-l/2,c.receiveShadow=!0,Y(s).add(c);const X=6,V=new tg(d,d,X,32,1,!0),G=new em({color:16777215,transparent:!0,opacity:.1,side:ho,metalness:.1,roughness:.05}),N=new Es(V,G);N.position.y=X/2,Y(s).add(N);const H=new eg(d,32,16,0,Math.PI*2,0,Math.PI/2),U=new Es(H,G);U.position.y=X,Y(s).add(U);const _=12;for(let j=0;j<_;j++){const Z=j/_*Math.PI*2,it=Math.cos(Z)*d,at=Math.sin(Z)*d,q=new pe({mass:0,shape:new Tx,material:O});q.position.set(it,X/2,at),q.quaternion.setFromEuler(0,-Z-Math.PI/2,0),a.addBody(q)}const $=new pe({mass:0,shape:new Tx,material:O});$.position.set(0,X+d,0),$.quaternion.setFromEuler(Math.PI/2,0,0),a.addBody($);for(let j=0;j<2;j++){const Z=g();Y(s).add(Z);const it=new pe({mass:20,shape:new $g(new tt(h.size/2,h.size/2,h.size/2)),material:L,linearDamping:.4,angularDamping:.3});it.position.set(j===0?-7.2*1.2:h.size*1.2,h.size/2,0),a.addBody(it),m.push({mesh:Z,body:it})}E()}function E(){if(u=requestAnimationFrame(E),a.fixedStep(),m.forEach(b=>{const I=b.body.velocity;I.length()>30&&I.scale(30/I.length(),I);const L=20,D=b.body.angularVelocity;D.length()>L&&D.scale(L/D.length(),D),b.mesh.position.copy(b.body.position),b.mesh.quaternion.copy(b.body.quaternion)}),r){const b=m.every(I=>I.body.velocity.length()<.3&&I.body.angularVelocity.length()<.3),F=Date.now()-x>n()*1e3;b&&F&&setTimeout(()=>{r&&(r=!1,w())},300)}e.render(Y(s),T)}function w(){const b=m.map(F=>{const I=F.mesh.quaternion,L=new St(0,1,0).applyQuaternion(I.clone().invert()),D=[{val:1,vec:new St(0,0,1)},{val:6,vec:new St(0,0,-1)},{val:2,vec:new St(0,1,0)},{val:5,vec:new St(0,-1,0)},{val:3,vec:new St(1,0,0)},{val:4,vec:new St(-1,0,0)}];let O=-1/0,z=1;return D.forEach(W=>{const k=W.vec.dot(L);k>O&&(O=k,z=W.val)}),z});v("rolled",{dice:b,total:b[0]+b[1]})}function C(){r||(r=!0,v("rollStart"),x=Date.now(),m.forEach(b=>{b.body.wakeUp(),b.body.velocity.set((Math.random()>.5?1:-1)*(15+Math.random()*10),4+Math.random()*4,(Math.random()>.5?1:-1)*(15+Math.random()*10)),b.body.angularVelocity.set((Math.random()-.5)*15,(Math.random()-.5)*15,(Math.random()-.5)*15)}),c&&y1.to({},{duration:n(),onUpdate(){const b=this.progress(),F=Date.now()*.016,I=(1-b*.8)*1,L=I*6,D=I*.3,O=Math.abs(Math.sin(F))*L;c.position.y=-l/2+O,o.position.y=O*.5,c.position.x=0,c.position.z=0,o.position.x=0,o.position.z=0;const z=Math.sin(F*.5)*D,W=Math.cos(F*.5)*D;if(o.quaternion.setFromEuler(-Math.PI/2+z,0,W),m.forEach(k=>{k.body.wakeUp();const X=Math.sin(F)>0?.4:.1,V=new tt((Math.random()-.5)*1200*I,(200+Math.random()*300)*I*X,(Math.random()-.5)*1200*I);k.body.applyForce(V,k.body.position),k.body.velocity.length()<18&&k.body.velocity.set(k.body.velocity.x+(Math.random()-.5)*60*I,k.body.velocity.y+10*I,k.body.velocity.z+(Math.random()-.5)*60*I),k.body.angularVelocity.length()<3&&k.body.angularVelocity.set((Math.random()-.5)*40*I,(Math.random()-.5)*40*I,(Math.random()-.5)*40*I),Math.random()>.94&&k.body.position.y<4.5&&k.body.applyImpulse(new tt(0,150*I,0),k.body.position)}),m.length>=2&&m[0].body&&m[1].body){const k=m[0].body,X=m[1].body,V=h.size*1.1;if(k.position.distanceTo(X.position)<V){const N=k.position.vsub(X.position);N.normalize();const H=100*I;k.applyImpulse(N.scale(H),k.position),X.applyImpulse(N.scale(-H),X.position)}}},onComplete:()=>{y1.to(c.position,{x:0,y:-l/2,z:0,duration:.4,ease:"power2.out"}),o.position.set(0,0,0),o.quaternion.setFromEuler(-Math.PI/2,0,0)}}))}function A(){!Y(S)||!T||!e||(T.aspect=Y(S).clientWidth/Y(S).clientHeight,T.updateProjectionMatrix(),e.setSize(Y(S).clientWidth,Y(S).clientHeight))}ip(()=>{y(),window.addEventListener("resize",A)}),vT(()=>{window.removeEventListener("resize",A),cancelAnimationFrame(u),e&&(e.dispose(),e.forceContextLoss())}),Hn(()=>(wn(i()),Y(S),Y(s)),()=>{i()&&Y(S)&&!Y(s)&&y()}),ru();var M={roll:C};Sr();var R=bz(),P=ct(R);return Qm(P,b=>ht(S,b),()=>Y(S)),qe("click",P,C),qe("click",R,xD(()=>v("close"))),_t(f,R),py(t,"roll",C),ir(M)}var Lz=Jt('<span class="text-[10px] bg-emerald-500 text-black px-1.5 py-0.5 rounded-md not-italic font-black">YOU</span>'),Fz=Jt('<span class="flex items-center gap-1 text-[9px] font-bold text-emerald-400 uppercase tracking-tighter"><span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span> Online</span>'),Dz=Jt('<span class="flex items-center gap-1 text-[9px] font-bold text-zinc-600 uppercase tracking-tighter"><span class="w-1.5 h-1.5 rounded-full bg-zinc-700"></span> Offline</span>'),Oz=Jt('<tr><td class="px-6 py-4"><div></div></td><td class="px-6 py-4"><div class="flex items-center gap-3"><div><!></div> <div class="flex flex-col"><span class="font-black text-white uppercase tracking-tight italic flex items-center gap-2"> <!></span> <div class="flex items-center gap-2 mt-0.5"><!></div></div></div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-white tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-emerald-400 tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-yellow-400 tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-red-400 tabular-nums"><!> </div></td><td class="px-6 py-4 text-right"><div class="flex items-center justify-end gap-1 font-black text-zinc-500 tabular-nums"><!> </div></td></tr>'),Nz=Jt('<div class="py-20 flex flex-col items-center justify-center text-zinc-500"><!> <p class="font-black uppercase tracking-widest text-sm italic">No ranking players yet</p></div>'),Bz=Jt('<div class="fixed inset-0 z-[110] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-300"><div class="w-full max-w-4xl p-8 bg-[#1a4d2e] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8),inset_0_0_30px_rgba(0,0,0,0.4)] relative overflow-hidden group"><div class="flex items-center justify-between mb-8 relative z-10"><div class="flex items-center gap-4"><div class="p-3 rounded-2xl bg-yellow-500/20 border border-yellow-500/30 text-yellow-500 shadow-lg"><!></div> <div><h2 class="text-3xl font-black text-white tracking-tighter uppercase italic leading-none">Global <span class="text-emerald-400">Leaderboard</span></h2> <div class="flex items-center gap-2 mt-1"><span class="flex h-2 w-2 relative"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span></span> <p class="text-zinc-400 text-xs font-medium uppercase tracking-widest"> </p></div></div></div> <div class="flex items-center gap-3"><button class="flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/20 transition-all disabled:opacity-50" title="Refresh Stats"><!> <span class="text-xs font-black uppercase tracking-widest">Refresh</span></button> <button class="p-2 rounded-xl bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-all hover:scale-110"><!></button></div></div> <div class="relative z-10 overflow-hidden rounded-2xl border border-white/5 bg-black/40 shadow-inner max-h-[60vh] overflow-y-auto custom-scrollbar"><table class="w-full text-left border-collapse"><thead><tr class="bg-black/60 border-b border-white/10"><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest">Rank</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest">Player</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Balance</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Highest</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Win</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Loss</th><th class="px-6 py-4 text-[10px] font-black text-zinc-500 uppercase tracking-widest text-right">Resets</th></tr></thead><tbody class="divide-y divide-white/5"></tbody></table> <!></div> <div class="absolute -bottom-24 -left-24 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none"></div> <div class="absolute -top-24 -right-24 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none"></div></div></div>');function Uz(f,t){er(t,!1);const i=de(),n=bl();let v=Oe(t,"users",24,()=>[]),S=Oe(t,"loading",8,!1);function s(R){if(!R)return!1;const P=new Date(R).getTime();return Date.now()-P<6e4}Hn(()=>wn(v()),()=>{ht(i,[...v()].filter(R=>R.username!=="Guest").sort((R,P)=>{const b=(P.balance||0)-(R.balance||0);if(b!==0)return b;const F=s(R.lastUpdate),I=s(P.lastUpdate);return F&&!I?-1:!F&&I?1:(P.highestBalance||0)-(R.highestBalance||0)}))}),ru(),Sr();var T=Bz(),e=ct(T),a=ct(e),m=ct(a),c=ct(m),o=ct(c);my(o,{size:32});var u=gt(c,2),r=gt(ct(u),2),h=gt(ct(r),2),d=ct(h),l=gt(m,2),p=ct(l),g=ct(p);{let R=pn(()=>S()?"animate-spin":"");Ud(g,{size:18,get class(){return Y(R)}})}var x=gt(p,2),y=ct(x);Hg(y,{size:24});var E=gt(a,2),w=ct(E),C=gt(ct(w));sn(C,5,()=>Y(i),nn,(R,P,b)=>{var F=Oz(),I=ct(F),L=ct(I);Qe(L,1,`flex items-center justify-center w-8 h-8 rounded-lg font-black italic 
                  ${b===0?"bg-yellow-500 text-black shadow-[0_0_15px_rgba(234,179,8,0.4)]":b===1?"bg-zinc-300 text-black shadow-[0_0_15px_rgba(212,212,216,0.3)]":b===2?"bg-orange-400 text-black shadow-[0_0_15px_rgba(251,146,60,0.3)]":"bg-white/5 text-zinc-400"}`),L.textContent=b+1;var D=gt(I),O=ct(D),z=ct(O),W=ct(z);iR(W,{size:16});var k=gt(z,2),X=ct(k),V=ct(X),G=gt(V);{var N=ae=>{var zt=Lz();_t(ae,zt)};Ie(G,ae=>{Y(P),kt(()=>Y(P).isYou)&&ae(N)})}var H=gt(X,2),U=ct(H);{var _=ae=>{var zt=Fz();_t(ae,zt)},$=ae=>{var zt=Dz();_t(ae,zt)};Ie(U,ae=>{Y(P),kt(()=>s(Y(P).lastUpdate))?ae(_):ae($,!1)})}var j=gt(D),Z=ct(j),it=ct(Z);vy(it,{size:14,class:"text-emerald-400"});var at=gt(it),q=gt(j),ft=ct(q),vt=ct(ft);vy(vt,{size:14});var Tt=gt(vt),ut=gt(q),Bt=ct(ut),Pt=ct(Bt);DD(Pt,{size:14});var et=gt(Pt),Q=gt(ut),lt=ct(Q),pt=ct(lt);FD(pt,{size:14});var Mt=gt(pt),Ct=gt(Q),Kt=ct(Ct),Ut=ct(Kt);Ud(Ut,{size:12});var Wt=gt(Ut);li((ae,zt,Ht,At)=>{Qe(F,1,`hover:bg-white/[0.02] transition-colors ${Y(P),kt(()=>Y(P).isYou?"bg-emerald-500/10":b===0?"bg-yellow-500/5":"")??""}`),Qe(z,1,`p-1.5 rounded-lg ${Y(P),kt(()=>Y(P).isYou?"bg-emerald-500/20 border-emerald-500/40 text-emerald-400":"bg-emerald-500/10 border-emerald-500/20 text-emerald-400")??""} border`),Me(V,`${Y(P),kt(()=>Y(P).nickname||Y(P).username)??""} `),Me(at,` ${ae??""}`),Me(Tt,` ${zt??""}`),Me(et,` ${Ht??""}`),Me(Mt,` ${At??""}`),Me(Wt,` ${Y(P),kt(()=>Y(P).resetCount||0)??""}`)},[()=>(Y(P),kt(()=>(Y(P).balance||0).toLocaleString(void 0,{minimumFractionDigits:2}))),()=>(Y(P),kt(()=>(Y(P).highestBalance||0).toLocaleString(void 0,{minimumFractionDigits:2}))),()=>(Y(P),kt(()=>(Y(P).largestWin||0).toLocaleString(void 0,{minimumFractionDigits:2}))),()=>(Y(P),kt(()=>(Y(P).largestLoss||0).toLocaleString(void 0,{minimumFractionDigits:2})))]),_t(R,F)});var A=gt(w,2);{var M=R=>{var P=Nz(),b=ct(P);my(b,{size:48,class:"opacity-10 mb-4"}),_t(R,P)};Ie(A,R=>{Y(i),kt(()=>Y(i).length===0)&&R(M)})}li(()=>{Me(d,`Live Updates â¢ Showing ${Y(i),kt(()=>Y(i).length)??""} Players`),p.disabled=S()}),qe("click",p,()=>n("refresh")),qe("click",x,()=>n("close")),_t(f,T),ir()}var Vz=Jt('<div class="p-4 rounded-2xl bg-black/40 border border-white/5 shadow-inner"><h4 class="text-xs font-black text-emerald-400 uppercase mb-2 tracking-tight"> </h4> <p class="text-[11px] text-zinc-400 leading-relaxed font-medium uppercase"> </p></div>'),zz=Jt('<tr class="hover:bg-white/[0.02] transition-colors"><td class="px-4 py-3 text-xs font-black text-white uppercase"> </td><td class="px-4 py-3 text-xs font-black text-emerald-400 tabular-nums"> </td><td class="px-4 py-3 text-[10px] font-medium text-zinc-500 uppercase leading-tight"> </td></tr>'),Gz=Jt('<div class="fixed inset-0 z-[150] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-300 px-4"><div class="w-full max-w-2xl bg-[#0a2e0a] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] overflow-hidden"><div class="p-6 border-b border-white/10 flex items-center justify-between bg-black/20 shrink-0"><div class="flex items-center gap-3"><div class="p-2 rounded-xl bg-emerald-500/20 text-emerald-400"><!></div> <div><h2 class="text-2xl font-black text-white tracking-tighter uppercase italic leading-none">How to <span class="text-emerald-400">Play</span></h2> <p class="text-[10px] font-medium text-zinc-500 uppercase tracking-widest mt-1">Rules & Payouts Guide</p></div></div> <button class="p-2 rounded-xl bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-all hover:scale-110"><!></button></div> <div class="flex-1 overflow-y-auto p-6 space-y-8 custom-scrollbar svelte-1eyj1wx"><section><div class="flex items-center gap-2 mb-4"><!> <h3 class="text-xs font-black text-zinc-400 uppercase tracking-[0.2em]">Game Rules</h3></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"></div></section> <section><div class="flex items-center gap-2 mb-4"><!> <h3 class="text-xs font-black text-zinc-400 uppercase tracking-[0.2em]">Payout Guide</h3></div> <div class="rounded-2xl border border-white/5 overflow-hidden bg-black/40 shadow-inner"><table class="w-full text-left"><thead><tr class="bg-black/60 border-b border-white/10"><th class="px-4 py-3 text-[10px] font-black text-zinc-500 uppercase">Bet Type</th><th class="px-4 py-3 text-[10px] font-black text-zinc-500 uppercase">Payout</th><th class="px-4 py-3 text-[10px] font-black text-zinc-500 uppercase">Description</th></tr></thead><tbody class="divide-y divide-white/5"></tbody></table></div></section> <section class="p-4 rounded-2xl bg-emerald-500/10 border border-emerald-500/20"><div class="flex items-start gap-3"><div class="p-2 rounded-lg bg-emerald-500/20 text-emerald-400 shrink-0"><!></div> <div><h4 class="text-xs font-black text-emerald-400 uppercase tracking-tight mb-1">Pro Tip</h4> <p class="text-[10px] font-medium text-zinc-400 uppercase leading-relaxed">Use "Odds" bets behind your Pass Line. They pay true mathematical odds with zero house edge, making them the best bets in the casino!</p></div></div></section></div> <div class="p-6 border-t border-white/10 bg-black/20 flex justify-center shrink-0"><button class="px-8 py-3 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-black font-black uppercase tracking-widest text-xs transition-all active:scale-95 shadow-lg shadow-emerald-500/20">Got it!</button></div></div></div>');function _z(f,t){er(t,!1);const i=bl(),n=[{title:"The Game",content:"Crapless Bubble Craps is a variation where 2, 3, 11, and 12 are point numbers instead of immediate losers (craps) or winners (naturals) on the come-out roll."},{title:"Come Out Roll",content:"The first roll of a round. 7 is an immediate win for the Pass Line. Any other number becomes the 'Point'."},{title:"Point Phase",content:"Once a point is established, you want to roll that number again before rolling a 7. If you roll the point, you win. If you roll a 7, you lose (Seven Out)."}],v=[{bet:"Pass Line",payout:"1 to 1",description:"Win on 7 (come out) or hitting the point."},{bet:"Place Bets (6, 8)",payout:"7 to 6",description:"Bet on specific numbers to roll before a 7."},{bet:"Place Bets (5, 9)",payout:"7 to 5",description:"Bet on specific numbers to roll before a 7."},{bet:"Place Bets (4, 10)",payout:"9 to 5",description:"Bet on specific numbers to roll before a 7."},{bet:"Place Bets (2, 3, 11, 12)",payout:"11 to 2 / 3 to 1",description:"Extreme outside numbers in Crapless Craps."},{bet:"Hardways",payout:"7 to 1 / 9 to 1",description:"Rolling a number as a pair (e.g., 2-2 for Hard 4)."},{bet:"Any 7",payout:"4 to 1",description:"The next roll will be a 7."}];Sr();var S=Gz(),s=ct(S),T=ct(s),e=ct(T),a=ct(e),m=ct(a);eR(m,{size:24});var c=gt(e,2),o=ct(c);Hg(o,{size:20});var u=gt(T,2),r=ct(u),h=ct(r),d=ct(h);RD(d,{size:16,class:"text-emerald-400"});var l=gt(h,2);sn(l,5,()=>n,nn,(F,I)=>{var L=Vz(),D=ct(L),O=ct(D),z=gt(D,2),W=ct(z);li(()=>{Me(O,Y(I).title),Me(W,Y(I).content)}),_t(F,L)});var p=gt(r,2),g=ct(p),x=ct(g);vy(x,{size:16,class:"text-emerald-400"});var y=gt(g,2),E=ct(y),w=gt(ct(E));sn(w,5,()=>v,nn,(F,I)=>{var L=zz(),D=ct(L),O=ct(D),z=gt(D),W=ct(z),k=gt(z),X=ct(k);li(()=>{Me(O,Y(I).bet),Me(W,Y(I).payout),Me(X,Y(I).description)}),_t(F,L)});var C=gt(p,2),A=ct(C),M=ct(A),R=ct(M);UD(R,{size:16});var P=gt(u,2),b=ct(P);qe("click",c,()=>i("close")),qe("click",b,()=>i("close")),_t(f,S),ir()}const Wz="modulepreload",Hz=function(f,t){return new URL(f,t).href},kw={},Xz=function(t,i,n){let v=Promise.resolve();if(i&&i.length>0){let s=function(m){return Promise.all(m.map(c=>Promise.resolve(c).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o}))))};const T=document.getElementsByTagName("link"),e=document.querySelector("meta[property=csp-nonce]"),a=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));v=s(i.map(m=>{if(m=Hz(m,n),m in kw)return;kw[m]=!0;const c=m.endsWith(".css"),o=c?'[rel="stylesheet"]':"";if(!!n)for(let h=T.length-1;h>=0;h--){const d=T[h];if(d.href===m&&(!c||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${o}`))return;const r=document.createElement("link");if(r.rel=c?"stylesheet":Wz,c||(r.as="script"),r.crossOrigin="",r.href=m,a&&r.setAttribute("nonce",a),document.head.appendChild(r),c)return new Promise((h,d)=>{r.addEventListener("load",h),r.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${m}`)))})}))}function S(s){const T=new Event("vite:preloadError",{cancelable:!0});if(T.payload=s,window.dispatchEvent(T),!T.defaultPrevented)throw s}return v.then(s=>{for(const T of s||[])T.status==="rejected"&&S(T.reason);return t().catch(S)})},kz=()=>{};var Yw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=function(f){const t=[];let i=0;for(let n=0;n<f.length;n++){let v=f.charCodeAt(n);v<128?t[i++]=v:v<2048?(t[i++]=v>>6|192,t[i++]=v&63|128):(v&64512)===55296&&n+1<f.length&&(f.charCodeAt(n+1)&64512)===56320?(v=65536+((v&1023)<<10)+(f.charCodeAt(++n)&1023),t[i++]=v>>18|240,t[i++]=v>>12&63|128,t[i++]=v>>6&63|128,t[i++]=v&63|128):(t[i++]=v>>12|224,t[i++]=v>>6&63|128,t[i++]=v&63|128)}return t},Yz=function(f){const t=[];let i=0,n=0;for(;i<f.length;){const v=f[i++];if(v<128)t[n++]=String.fromCharCode(v);else if(v>191&&v<224){const S=f[i++];t[n++]=String.fromCharCode((v&31)<<6|S&63)}else if(v>239&&v<365){const S=f[i++],s=f[i++],T=f[i++],e=((v&7)<<18|(S&63)<<12|(s&63)<<6|T&63)-65536;t[n++]=String.fromCharCode(55296+(e>>10)),t[n++]=String.fromCharCode(56320+(e&1023))}else{const S=f[i++],s=f[i++];t[n++]=String.fromCharCode((v&15)<<12|(S&63)<<6|s&63)}}return t.join("")},XP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(f,t){if(!Array.isArray(f))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let v=0;v<f.length;v+=3){const S=f[v],s=v+1<f.length,T=s?f[v+1]:0,e=v+2<f.length,a=e?f[v+2]:0,m=S>>2,c=(S&3)<<4|T>>4;let o=(T&15)<<2|a>>6,u=a&63;e||(u=64,s||(o=64)),n.push(i[m],i[c],i[o],i[u])}return n.join("")},encodeString(f,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(f):this.encodeByteArray(HP(f),t)},decodeString(f,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(f):Yz(this.decodeStringToByteArray(f,t))},decodeStringToByteArray(f,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let v=0;v<f.length;){const S=i[f.charAt(v++)],T=v<f.length?i[f.charAt(v)]:0;++v;const a=v<f.length?i[f.charAt(v)]:64;++v;const c=v<f.length?i[f.charAt(v)]:64;if(++v,S==null||T==null||a==null||c==null)throw new $z;const o=S<<2|T>>4;if(n.push(o),a!==64){const u=T<<4&240|a>>2;if(n.push(u),c!==64){const r=a<<6&192|c;n.push(r)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let f=0;f<this.ENCODED_VALS.length;f++)this.byteToCharMap_[f]=this.ENCODED_VALS.charAt(f),this.charToByteMap_[this.byteToCharMap_[f]]=f,this.byteToCharMapWebSafe_[f]=this.ENCODED_VALS_WEBSAFE.charAt(f),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[f]]=f,f>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(f)]=f,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(f)]=f)}}};class $z extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kz=function(f){const t=HP(f);return XP.encodeByteArray(t,!0)},ug=function(f){return Kz(f).replace(/\./g,"")},kP=function(f){try{return XP.decodeString(f,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=()=>YP().__FIREBASE_DEFAULTS__,Qz=()=>{if(typeof process>"u"||typeof Yw>"u")return;const f=Yw.__FIREBASE_DEFAULTS__;if(f)return JSON.parse(f)},Zz=()=>{if(typeof document>"u")return;let f;try{f=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=f&&kP(f[1]);return t&&JSON.parse(t)},Zg=()=>{try{return kz()||jz()||Qz()||Zz()}catch(f){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${f}`);return}},$P=f=>{var t,i;return(i=(t=Zg())==null?void 0:t.emulatorHosts)==null?void 0:i[f]},Jz=f=>{const t=$P(f);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),n]:[t.substring(0,i),n]},KP=()=>{var f;return(f=Zg())==null?void 0:f.config},jP=f=>{var t;return(t=Zg())==null?void 0:t[`_${f}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,n)=>{i?this.reject(i):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(f){try{return(f.startsWith("http://")||f.startsWith("https://")?new URL(f).hostname:f).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KT(f){return(await fetch(f,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(f,t){if(f.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},n=t||"demo-project",v=f.iat||0,S=f.sub||f.user_id;if(!S)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:v,exp:v+3600,auth_time:v,sub:S,user_id:S,firebase:{sign_in_provider:"custom",identities:{}},...f};return[ug(JSON.stringify(i)),ug(JSON.stringify(s)),""].join(".")}const Wd={};function eG(){const f={prod:[],emulator:[]};for(const t of Object.keys(Wd))Wd[t]?f.emulator.push(t):f.prod.push(t);return f}function iG(f){let t=document.getElementById(f),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",f),i=!0),{created:i,element:t}}let $w=!1;function QP(f,t){if(typeof window>"u"||typeof document>"u"||!ou(window.location.host)||Wd[f]===t||Wd[f]||$w)return;Wd[f]=t;function i(o){return`__firebase__banner__${o}`}const n="__firebase__banner",S=eG().prod.length>0;function s(){const o=document.getElementById(n);o&&o.remove()}function T(o){o.style.display="flex",o.style.background="#7faaf0",o.style.position="fixed",o.style.bottom="5px",o.style.left="5px",o.style.padding=".5em",o.style.borderRadius="5px",o.style.alignItems="center"}function e(o,u){o.setAttribute("width","24"),o.setAttribute("id",u),o.setAttribute("height","24"),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("fill","none"),o.style.marginLeft="-6px"}function a(){const o=document.createElement("span");return o.style.cursor="pointer",o.style.marginLeft="16px",o.style.fontSize="24px",o.innerHTML=" &times;",o.onclick=()=>{$w=!0,s()},o}function m(o,u){o.setAttribute("id",u),o.innerText="Learn more",o.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",o.setAttribute("target","__blank"),o.style.paddingLeft="5px",o.style.textDecoration="underline"}function c(){const o=iG(n),u=i("text"),r=document.getElementById(u)||document.createElement("span"),h=i("learnmore"),d=document.getElementById(h)||document.createElement("a"),l=i("preprendIcon"),p=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(o.created){const g=o.element;T(g),m(d,h);const x=a();e(p,l),g.append(p,r,d,x),document.body.appendChild(g)}S?(r.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,r.innerText="Preview backend running in this workspace."),r.setAttribute("id",u)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",c):c()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function ZP(){var t;const f=(t=Zg())==null?void 0:t.forceEnvironment;if(f==="node")return!0;if(f==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sG(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JP(){const f=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof f=="object"&&f.id!==void 0}function rG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aG(){const f=Rn();return f.indexOf("MSIE ")>=0||f.indexOf("Trident/")>=0}function qP(){return!ZP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tb(){return!ZP()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function jT(){try{return typeof indexedDB=="object"}catch{return!1}}function eb(){return new Promise((f,t)=>{try{let i=!0;const n="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(n);v.onsuccess=()=>{v.result.close(),i||self.indexedDB.deleteDatabase(n),f(!0)},v.onupgradeneeded=()=>{i=!1},v.onerror=()=>{var S;t(((S=v.error)==null?void 0:S.message)||"")}}catch(i){t(i)}})}function oG(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lG="FirebaseError";class $r extends Error{constructor(t,i,n){super(i),this.code=t,this.customData=n,this.name=lG,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(t,i,n){this.service=t,this.serviceName=i,this.errors=n}create(t,...i){const n=i[0]||{},v=`${this.service}/${t}`,S=this.errors[t],s=S?hG(S,n):"Error",T=`${this.serviceName}: ${s} (${v}).`;return new $r(v,T,n)}}function hG(f,t){return f.replace(uG,(i,n)=>{const v=t[n];return v!=null?String(v):`<${n}?>`})}const uG=/\{\$([^}]+)}/g;function cG(f){for(const t in f)if(Object.prototype.hasOwnProperty.call(f,t))return!1;return!0}function Er(f,t){if(f===t)return!0;const i=Object.keys(f),n=Object.keys(t);for(const v of i){if(!n.includes(v))return!1;const S=f[v],s=t[v];if(Kw(S)&&Kw(s)){if(!Er(S,s))return!1}else if(S!==s)return!1}for(const v of n)if(!i.includes(v))return!1;return!0}function Kw(f){return f!==null&&typeof f=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(f){const t=[];for(const[i,n]of Object.entries(f))Array.isArray(n)?n.forEach(v=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(v))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function bd(f){const t={};return f.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[v,S]=n.split("=");t[decodeURIComponent(v)]=decodeURIComponent(S)}}),t}function Id(f){const t=f.indexOf("?");if(!t)return"";const i=f.indexOf("#",t);return f.substring(t,i>0?i:void 0)}function fG(f,t){const i=new dG(f,t);return i.subscribe.bind(i)}class dG{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,n){let v;if(t===void 0&&i===void 0&&n===void 0)throw new Error("Missing Observer.");pG(t,["next","error","complete"])?v=t:v={next:t,error:i,complete:n},v.next===void 0&&(v.next=Lx),v.error===void 0&&(v.error=Lx),v.complete===void 0&&(v.complete=Lx);const S=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),S}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pG(f,t){if(typeof f!="object"||f===null)return!1;for(const i of t)if(i in f&&typeof f[i]=="function")return!0;return!1}function Lx(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG=1e3,mG=2,gG=14400*1e3,xG=.5;function jw(f,t=vG,i=mG){const n=t*Math.pow(i,f),v=Math.round(xG*n*(Math.random()-.5)*2);return Math.min(gG,n+v)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(f){return f&&f._delegate?f._delegate:f}class Hr{constructor(t,i,n){this.name=t,this.instanceFactory=i,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const n=new qz;if(this.instancesDeferred.set(i,n),this.isInitialized(i)||this.shouldAutoInitialize())try{const v=this.getOrInitializeService({instanceIdentifier:i});v&&n.resolve(v)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(v){if(n)return null;throw v}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(EG(t))try{this.getOrInitializeService({instanceIdentifier:oh})}catch{}for(const[i,n]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(i);try{const S=this.getOrInitializeService({instanceIdentifier:v});n.resolve(S)}catch{}}}}clearInstance(t=oh){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=oh){return this.instances.has(t)}getOptions(t=oh){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const v=this.getOrInitializeService({instanceIdentifier:n,options:i});for(const[S,s]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(S);n===T&&s.resolve(v)}return v}onInit(t,i){const n=this.normalizeInstanceIdentifier(i),v=this.onInitCallbacks.get(n)??new Set;v.add(t),this.onInitCallbacks.set(n,v);const S=this.instances.get(n);return S&&t(S,n),()=>{v.delete(t)}}invokeOnInitCallbacks(t,i){const n=this.onInitCallbacks.get(i);if(n)for(const v of n)try{v(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:TG(t),options:i}),this.instances.set(t,n),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=oh){return this.component?this.component.multipleInstances?t:oh:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TG(f){return f===oh?void 0:f}function EG(f){return f.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SG{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new yG(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ei;(function(f){f[f.DEBUG=0]="DEBUG",f[f.VERBOSE=1]="VERBOSE",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.SILENT=5]="SILENT"})(ei||(ei={}));const wG={debug:ei.DEBUG,verbose:ei.VERBOSE,info:ei.INFO,warn:ei.WARN,error:ei.ERROR,silent:ei.SILENT},AG=ei.INFO,CG={[ei.DEBUG]:"log",[ei.VERBOSE]:"log",[ei.INFO]:"info",[ei.WARN]:"warn",[ei.ERROR]:"error"},MG=(f,t,...i)=>{if(t<f.logLevel)return;const n=new Date().toISOString(),v=CG[t];if(v)console[v](`[${n}]  ${f.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Jg{constructor(t){this.name=t,this._logLevel=AG,this._logHandler=MG,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ei))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?wG[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ei.DEBUG,...t),this._logHandler(this,ei.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ei.VERBOSE,...t),this._logHandler(this,ei.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ei.INFO,...t),this._logHandler(this,ei.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ei.WARN,...t),this._logHandler(this,ei.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ei.ERROR,...t),this._logHandler(this,ei.ERROR,...t)}}const RG=(f,t)=>t.some(i=>f instanceof i);let Qw,Zw;function PG(){return Qw||(Qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bG(){return Zw||(Zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ib=new WeakMap,T1=new WeakMap,nb=new WeakMap,Fx=new WeakMap,QT=new WeakMap;function IG(f){const t=new Promise((i,n)=>{const v=()=>{f.removeEventListener("success",S),f.removeEventListener("error",s)},S=()=>{i(cl(f.result)),v()},s=()=>{n(f.error),v()};f.addEventListener("success",S),f.addEventListener("error",s)});return t.then(i=>{i instanceof IDBCursor&&ib.set(i,f)}).catch(()=>{}),QT.set(t,f),t}function LG(f){if(T1.has(f))return;const t=new Promise((i,n)=>{const v=()=>{f.removeEventListener("complete",S),f.removeEventListener("error",s),f.removeEventListener("abort",s)},S=()=>{i(),v()},s=()=>{n(f.error||new DOMException("AbortError","AbortError")),v()};f.addEventListener("complete",S),f.addEventListener("error",s),f.addEventListener("abort",s)});T1.set(f,t)}let E1={get(f,t,i){if(f instanceof IDBTransaction){if(t==="done")return T1.get(f);if(t==="objectStoreNames")return f.objectStoreNames||nb.get(f);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return cl(f[t])},set(f,t,i){return f[t]=i,!0},has(f,t){return f instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in f}};function FG(f){E1=f(E1)}function DG(f){return f===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const n=f.call(Dx(this),t,...i);return nb.set(n,t.sort?t.sort():[t]),cl(n)}:bG().includes(f)?function(...t){return f.apply(Dx(this),t),cl(ib.get(this))}:function(...t){return cl(f.apply(Dx(this),t))}}function OG(f){return typeof f=="function"?DG(f):(f instanceof IDBTransaction&&LG(f),RG(f,PG())?new Proxy(f,E1):f)}function cl(f){if(f instanceof IDBRequest)return IG(f);if(Fx.has(f))return Fx.get(f);const t=OG(f);return t!==f&&(Fx.set(f,t),QT.set(t,f)),t}const Dx=f=>QT.get(f);function sb(f,t,{blocked:i,upgrade:n,blocking:v,terminated:S}={}){const s=indexedDB.open(f,t),T=cl(s);return n&&s.addEventListener("upgradeneeded",e=>{n(cl(s.result),e.oldVersion,e.newVersion,cl(s.transaction),e)}),i&&s.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),T.then(e=>{S&&e.addEventListener("close",()=>S()),v&&e.addEventListener("versionchange",a=>v(a.oldVersion,a.newVersion,a))}).catch(()=>{}),T}const NG=["get","getKey","getAll","getAllKeys","count"],BG=["put","add","delete","clear"],Ox=new Map;function Jw(f,t){if(!(f instanceof IDBDatabase&&!(t in f)&&typeof t=="string"))return;if(Ox.get(t))return Ox.get(t);const i=t.replace(/FromIndex$/,""),n=t!==i,v=BG.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!(v||NG.includes(i)))return;const S=async function(s,...T){const e=this.transaction(s,v?"readwrite":"readonly");let a=e.store;return n&&(a=a.index(T.shift())),(await Promise.all([a[i](...T),v&&e.done]))[0]};return Ox.set(t,S),S}FG(f=>({...f,get:(t,i,n)=>Jw(t,i)||f.get(t,i,n),has:(t,i)=>!!Jw(t,i)||f.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(VG(i)){const n=i.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(i=>i).join(" ")}}function VG(f){const t=f.getComponent();return(t==null?void 0:t.type)==="VERSION"}const S1="@firebase/app",qw="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Jg("@firebase/app"),zG="@firebase/app-compat",GG="@firebase/analytics-compat",_G="@firebase/analytics",WG="@firebase/app-check-compat",HG="@firebase/app-check",XG="@firebase/auth",kG="@firebase/auth-compat",YG="@firebase/database",$G="@firebase/data-connect",KG="@firebase/database-compat",jG="@firebase/functions",QG="@firebase/functions-compat",ZG="@firebase/installations",JG="@firebase/installations-compat",qG="@firebase/messaging",t_="@firebase/messaging-compat",e_="@firebase/performance",i_="@firebase/performance-compat",n_="@firebase/remote-config",s_="@firebase/remote-config-compat",r_="@firebase/storage",a_="@firebase/storage-compat",o_="@firebase/firestore",l_="@firebase/ai",h_="@firebase/firestore-compat",u_="firebase",c_="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",f_={[S1]:"fire-core",[zG]:"fire-core-compat",[_G]:"fire-analytics",[GG]:"fire-analytics-compat",[HG]:"fire-app-check",[WG]:"fire-app-check-compat",[XG]:"fire-auth",[kG]:"fire-auth-compat",[YG]:"fire-rtdb",[$G]:"fire-data-connect",[KG]:"fire-rtdb-compat",[jG]:"fire-fn",[QG]:"fire-fn-compat",[ZG]:"fire-iid",[JG]:"fire-iid-compat",[qG]:"fire-fcm",[t_]:"fire-fcm-compat",[e_]:"fire-perf",[i_]:"fire-perf-compat",[n_]:"fire-rc",[s_]:"fire-rc-compat",[r_]:"fire-gcs",[a_]:"fire-gcs-compat",[o_]:"fire-fst",[h_]:"fire-fst-compat",[l_]:"fire-vertex","fire-js":"fire-js",[u_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Map,d_=new Map,w1=new Map;function tA(f,t){try{f.container.addComponent(t)}catch(i){po.debug(`Component ${t.name} failed to register with FirebaseApp ${f.name}`,i)}}function Ra(f){const t=f.name;if(w1.has(t))return po.debug(`There were multiple attempts to register component ${t}.`),!1;w1.set(t,f);for(const i of fg.values())tA(i,f);for(const i of d_.values())tA(i,f);return!0}function Eo(f,t){const i=f.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),f.container.getProvider(t)}function p_(f,t,i=cg){Eo(f,t).clearInstance(i)}function fr(f){return f==null?!1:f.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fl=new lu("app","Firebase",v_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t,i,n){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw fl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=c_;function rb(f,t={}){let i=f;typeof t!="object"&&(t={name:t});const n={name:cg,automaticDataCollectionEnabled:!0,...t},v=n.name;if(typeof v!="string"||!v)throw fl.create("bad-app-name",{appName:String(v)});if(i||(i=KP()),!i)throw fl.create("no-options");const S=fg.get(v);if(S){if(Er(i,S.options)&&Er(n,S.config))return S;throw fl.create("duplicate-app",{appName:v})}const s=new SG(v);for(const e of w1.values())s.addComponent(e);const T=new m_(i,n,s);return fg.set(v,T),T}function ZT(f=cg){const t=fg.get(f);if(!t&&f===cg&&KP())return rb();if(!t)throw fl.create("no-app",{appName:f});return t}function gr(f,t,i){let n=f_[f]??f;i&&(n+=`-${i}`);const v=n.match(/\s|\//),S=t.match(/\s|\//);if(v||S){const s=[`Unable to register library "${n}" with version "${t}":`];v&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),v&&S&&s.push("and"),S&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),po.warn(s.join(" "));return}Ra(new Hr(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="firebase-heartbeat-database",x_=1,cp="firebase-heartbeat-store";let Nx=null;function ab(){return Nx||(Nx=sb(g_,x_,{upgrade:(f,t)=>{switch(t){case 0:try{f.createObjectStore(cp)}catch(i){console.warn(i)}}}}).catch(f=>{throw fl.create("idb-open",{originalErrorMessage:f.message})})),Nx}async function y_(f){try{const i=(await ab()).transaction(cp),n=await i.objectStore(cp).get(ob(f));return await i.done,n}catch(t){if(t instanceof $r)po.warn(t.message);else{const i=fl.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});po.warn(i.message)}}}async function eA(f,t){try{const n=(await ab()).transaction(cp,"readwrite");await n.objectStore(cp).put(t,ob(f)),await n.done}catch(i){if(i instanceof $r)po.warn(i.message);else{const n=fl.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});po.warn(n.message)}}}function ob(f){return`${f.name}!${f.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=1024,E_=30;class S_{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new A_(i),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,i;try{const v=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),S=iA();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===S||this._heartbeatsCache.heartbeats.some(s=>s.date===S))return;if(this._heartbeatsCache.heartbeats.push({date:S,agent:v}),this._heartbeatsCache.heartbeats.length>E_){const s=C_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){po.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=iA(),{heartbeatsToSend:n,unsentEntries:v}=w_(this._heartbeatsCache.heartbeats),S=ug(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=i,v.length>0?(this._heartbeatsCache.heartbeats=v,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),S}catch(i){return po.warn(i),""}}}function iA(){return new Date().toISOString().substring(0,10)}function w_(f,t=T_){const i=[];let n=f.slice();for(const v of f){const S=i.find(s=>s.agent===v.agent);if(S){if(S.dates.push(v.date),nA(i)>t){S.dates.pop();break}}else if(i.push({agent:v.agent,dates:[v.date]}),nA(i)>t){i.pop();break}n=n.slice(1)}return{heartbeatsToSend:i,unsentEntries:n}}class A_{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jT()?eb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await y_(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return eA(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return eA(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function nA(f){return ug(JSON.stringify({version:2,heartbeats:f})).length}function C_(f){if(f.length===0)return-1;let t=0,i=f[0].date;for(let n=1;n<f.length;n++)f[n].date<i&&(i=f[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(f){Ra(new Hr("platform-logger",t=>new UG(t),"PRIVATE")),Ra(new Hr("heartbeat",t=>new S_(t),"PRIVATE")),gr(S1,qw,f),gr(S1,qw,"esm2020"),gr("fire-js","")}M_("");var R_="firebase",P_="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(R_,P_,"app");var sA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dl,lb;(function(){var f;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,C){function A(){}A.prototype=C.prototype,w.F=C.prototype,w.prototype=new A,w.prototype.constructor=w,w.D=function(M,R,P){for(var b=Array(arguments.length-2),F=2;F<arguments.length;F++)b[F-2]=arguments[F];return C.prototype[R].apply(M,b)}}function i(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,i),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function v(w,C,A){A||(A=0);const M=Array(16);if(typeof C=="string")for(var R=0;R<16;++R)M[R]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(R=0;R<16;++R)M[R]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=w.g[0],A=w.g[1],R=w.g[2];let P=w.g[3],b;b=C+(P^A&(R^P))+M[0]+3614090360&4294967295,C=A+(b<<7&4294967295|b>>>25),b=P+(R^C&(A^R))+M[1]+3905402710&4294967295,P=C+(b<<12&4294967295|b>>>20),b=R+(A^P&(C^A))+M[2]+606105819&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(C^R&(P^C))+M[3]+3250441966&4294967295,A=R+(b<<22&4294967295|b>>>10),b=C+(P^A&(R^P))+M[4]+4118548399&4294967295,C=A+(b<<7&4294967295|b>>>25),b=P+(R^C&(A^R))+M[5]+1200080426&4294967295,P=C+(b<<12&4294967295|b>>>20),b=R+(A^P&(C^A))+M[6]+2821735955&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(C^R&(P^C))+M[7]+4249261313&4294967295,A=R+(b<<22&4294967295|b>>>10),b=C+(P^A&(R^P))+M[8]+1770035416&4294967295,C=A+(b<<7&4294967295|b>>>25),b=P+(R^C&(A^R))+M[9]+2336552879&4294967295,P=C+(b<<12&4294967295|b>>>20),b=R+(A^P&(C^A))+M[10]+4294925233&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(C^R&(P^C))+M[11]+2304563134&4294967295,A=R+(b<<22&4294967295|b>>>10),b=C+(P^A&(R^P))+M[12]+1804603682&4294967295,C=A+(b<<7&4294967295|b>>>25),b=P+(R^C&(A^R))+M[13]+4254626195&4294967295,P=C+(b<<12&4294967295|b>>>20),b=R+(A^P&(C^A))+M[14]+2792965006&4294967295,R=P+(b<<17&4294967295|b>>>15),b=A+(C^R&(P^C))+M[15]+1236535329&4294967295,A=R+(b<<22&4294967295|b>>>10),b=C+(R^P&(A^R))+M[1]+4129170786&4294967295,C=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(C^A))+M[6]+3225465664&4294967295,P=C+(b<<9&4294967295|b>>>23),b=R+(C^A&(P^C))+M[11]+643717713&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^C&(R^P))+M[0]+3921069994&4294967295,A=R+(b<<20&4294967295|b>>>12),b=C+(R^P&(A^R))+M[5]+3593408605&4294967295,C=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(C^A))+M[10]+38016083&4294967295,P=C+(b<<9&4294967295|b>>>23),b=R+(C^A&(P^C))+M[15]+3634488961&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^C&(R^P))+M[4]+3889429448&4294967295,A=R+(b<<20&4294967295|b>>>12),b=C+(R^P&(A^R))+M[9]+568446438&4294967295,C=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(C^A))+M[14]+3275163606&4294967295,P=C+(b<<9&4294967295|b>>>23),b=R+(C^A&(P^C))+M[3]+4107603335&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^C&(R^P))+M[8]+1163531501&4294967295,A=R+(b<<20&4294967295|b>>>12),b=C+(R^P&(A^R))+M[13]+2850285829&4294967295,C=A+(b<<5&4294967295|b>>>27),b=P+(A^R&(C^A))+M[2]+4243563512&4294967295,P=C+(b<<9&4294967295|b>>>23),b=R+(C^A&(P^C))+M[7]+1735328473&4294967295,R=P+(b<<14&4294967295|b>>>18),b=A+(P^C&(R^P))+M[12]+2368359562&4294967295,A=R+(b<<20&4294967295|b>>>12),b=C+(A^R^P)+M[5]+4294588738&4294967295,C=A+(b<<4&4294967295|b>>>28),b=P+(C^A^R)+M[8]+2272392833&4294967295,P=C+(b<<11&4294967295|b>>>21),b=R+(P^C^A)+M[11]+1839030562&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^C)+M[14]+4259657740&4294967295,A=R+(b<<23&4294967295|b>>>9),b=C+(A^R^P)+M[1]+2763975236&4294967295,C=A+(b<<4&4294967295|b>>>28),b=P+(C^A^R)+M[4]+1272893353&4294967295,P=C+(b<<11&4294967295|b>>>21),b=R+(P^C^A)+M[7]+4139469664&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^C)+M[10]+3200236656&4294967295,A=R+(b<<23&4294967295|b>>>9),b=C+(A^R^P)+M[13]+681279174&4294967295,C=A+(b<<4&4294967295|b>>>28),b=P+(C^A^R)+M[0]+3936430074&4294967295,P=C+(b<<11&4294967295|b>>>21),b=R+(P^C^A)+M[3]+3572445317&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^C)+M[6]+76029189&4294967295,A=R+(b<<23&4294967295|b>>>9),b=C+(A^R^P)+M[9]+3654602809&4294967295,C=A+(b<<4&4294967295|b>>>28),b=P+(C^A^R)+M[12]+3873151461&4294967295,P=C+(b<<11&4294967295|b>>>21),b=R+(P^C^A)+M[15]+530742520&4294967295,R=P+(b<<16&4294967295|b>>>16),b=A+(R^P^C)+M[2]+3299628645&4294967295,A=R+(b<<23&4294967295|b>>>9),b=C+(R^(A|~P))+M[0]+4096336452&4294967295,C=A+(b<<6&4294967295|b>>>26),b=P+(A^(C|~R))+M[7]+1126891415&4294967295,P=C+(b<<10&4294967295|b>>>22),b=R+(C^(P|~A))+M[14]+2878612391&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~C))+M[5]+4237533241&4294967295,A=R+(b<<21&4294967295|b>>>11),b=C+(R^(A|~P))+M[12]+1700485571&4294967295,C=A+(b<<6&4294967295|b>>>26),b=P+(A^(C|~R))+M[3]+2399980690&4294967295,P=C+(b<<10&4294967295|b>>>22),b=R+(C^(P|~A))+M[10]+4293915773&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~C))+M[1]+2240044497&4294967295,A=R+(b<<21&4294967295|b>>>11),b=C+(R^(A|~P))+M[8]+1873313359&4294967295,C=A+(b<<6&4294967295|b>>>26),b=P+(A^(C|~R))+M[15]+4264355552&4294967295,P=C+(b<<10&4294967295|b>>>22),b=R+(C^(P|~A))+M[6]+2734768916&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~C))+M[13]+1309151649&4294967295,A=R+(b<<21&4294967295|b>>>11),b=C+(R^(A|~P))+M[4]+4149444226&4294967295,C=A+(b<<6&4294967295|b>>>26),b=P+(A^(C|~R))+M[11]+3174756917&4294967295,P=C+(b<<10&4294967295|b>>>22),b=R+(C^(P|~A))+M[2]+718787259&4294967295,R=P+(b<<15&4294967295|b>>>17),b=A+(P^(R|~C))+M[9]+3951481745&4294967295,w.g[0]=w.g[0]+C&4294967295,w.g[1]=w.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+P&4294967295}n.prototype.v=function(w,C){C===void 0&&(C=w.length);const A=C-this.blockSize,M=this.C;let R=this.h,P=0;for(;P<C;){if(R==0)for(;P<=A;)v(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<C;)if(M[R++]=w.charCodeAt(P++),R==this.blockSize){v(this,M),R=0;break}}else for(;P<C;)if(M[R++]=w[P++],R==this.blockSize){v(this,M),R=0;break}}this.h=R,this.o+=C},n.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var C=1;C<w.length-8;++C)w[C]=0;C=this.o*8;for(var A=w.length-8;A<w.length;++A)w[A]=C&255,C/=256;for(this.v(w),w=Array(16),C=0,A=0;A<4;++A)for(let M=0;M<32;M+=8)w[C++]=this.g[A]>>>M&255;return w};function S(w,C){var A=T;return Object.prototype.hasOwnProperty.call(A,w)?A[w]:A[w]=C(w)}function s(w,C){this.h=C;const A=[];let M=!0;for(let R=w.length-1;R>=0;R--){const P=w[R]|0;M&&P==C||(A[R]=P,M=!1)}this.g=A}var T={};function e(w){return-128<=w&&w<128?S(w,function(C){return new s([C|0],C<0?-1:0)}):new s([w|0],w<0?-1:0)}function a(w){if(isNaN(w)||!isFinite(w))return c;if(w<0)return d(a(-w));const C=[];let A=1;for(let M=0;w>=A;M++)C[M]=w/A|0,A*=4294967296;return new s(C,0)}function m(w,C){if(w.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(w.charAt(0)=="-")return d(m(w.substring(1),C));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=a(Math.pow(C,8));let M=c;for(let P=0;P<w.length;P+=8){var R=Math.min(8,w.length-P);const b=parseInt(w.substring(P,P+R),C);R<8?(R=a(Math.pow(C,R)),M=M.j(R).add(a(b))):(M=M.j(A),M=M.add(a(b)))}return M}var c=e(0),o=e(1),u=e(16777216);f=s.prototype,f.m=function(){if(h(this))return-d(this).m();let w=0,C=1;for(let A=0;A<this.g.length;A++){const M=this.i(A);w+=(M>=0?M:4294967296+M)*C,C*=4294967296}return w},f.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(r(this))return"0";if(h(this))return"-"+d(this).toString(w);const C=a(Math.pow(w,6));var A=this;let M="";for(;;){const R=x(A,C).g;A=l(A,R.j(C));let P=((A.g.length>0?A.g[0]:A.h)>>>0).toString(w);if(A=R,r(A))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},f.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function r(w){if(w.h!=0)return!1;for(let C=0;C<w.g.length;C++)if(w.g[C]!=0)return!1;return!0}function h(w){return w.h==-1}f.l=function(w){return w=l(this,w),h(w)?-1:r(w)?0:1};function d(w){const C=w.g.length,A=[];for(let M=0;M<C;M++)A[M]=~w.g[M];return new s(A,~w.h).add(o)}f.abs=function(){return h(this)?d(this):this},f.add=function(w){const C=Math.max(this.g.length,w.g.length),A=[];let M=0;for(let R=0;R<=C;R++){let P=M+(this.i(R)&65535)+(w.i(R)&65535),b=(P>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);M=b>>>16,P&=65535,b&=65535,A[R]=b<<16|P}return new s(A,A[A.length-1]&-2147483648?-1:0)};function l(w,C){return w.add(d(C))}f.j=function(w){if(r(this)||r(w))return c;if(h(this))return h(w)?d(this).j(d(w)):d(d(this).j(w));if(h(w))return d(this.j(d(w)));if(this.l(u)<0&&w.l(u)<0)return a(this.m()*w.m());const C=this.g.length+w.g.length,A=[];for(var M=0;M<2*C;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(let R=0;R<w.g.length;R++){const P=this.i(M)>>>16,b=this.i(M)&65535,F=w.i(R)>>>16,I=w.i(R)&65535;A[2*M+2*R]+=b*I,p(A,2*M+2*R),A[2*M+2*R+1]+=P*I,p(A,2*M+2*R+1),A[2*M+2*R+1]+=b*F,p(A,2*M+2*R+1),A[2*M+2*R+2]+=P*F,p(A,2*M+2*R+2)}for(w=0;w<C;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=C;w<2*C;w++)A[w]=0;return new s(A,0)};function p(w,C){for(;(w[C]&65535)!=w[C];)w[C+1]+=w[C]>>>16,w[C]&=65535,C++}function g(w,C){this.g=w,this.h=C}function x(w,C){if(r(C))throw Error("division by zero");if(r(w))return new g(c,c);if(h(w))return C=x(d(w),C),new g(d(C.g),d(C.h));if(h(C))return C=x(w,d(C)),new g(d(C.g),C.h);if(w.g.length>30){if(h(w)||h(C))throw Error("slowDivide_ only works with positive integers.");for(var A=o,M=C;M.l(w)<=0;)A=y(A),M=y(M);var R=E(A,1),P=E(M,1);for(M=E(M,2),A=E(A,2);!r(M);){var b=P.add(M);b.l(w)<=0&&(R=R.add(A),P=b),M=E(M,1),A=E(A,1)}return C=l(w,R.j(C)),new g(R,C)}for(R=c;w.l(C)>=0;){for(A=Math.max(1,Math.floor(w.m()/C.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=a(A),b=P.j(C);h(b)||b.l(w)>0;)A-=M,P=a(A),b=P.j(C);r(P)&&(P=o),R=R.add(P),w=l(w,b)}return new g(R,w)}f.B=function(w){return x(this,w).h},f.and=function(w){const C=Math.max(this.g.length,w.g.length),A=[];for(let M=0;M<C;M++)A[M]=this.i(M)&w.i(M);return new s(A,this.h&w.h)},f.or=function(w){const C=Math.max(this.g.length,w.g.length),A=[];for(let M=0;M<C;M++)A[M]=this.i(M)|w.i(M);return new s(A,this.h|w.h)},f.xor=function(w){const C=Math.max(this.g.length,w.g.length),A=[];for(let M=0;M<C;M++)A[M]=this.i(M)^w.i(M);return new s(A,this.h^w.h)};function y(w){const C=w.g.length+1,A=[];for(let M=0;M<C;M++)A[M]=w.i(M)<<1|w.i(M-1)>>>31;return new s(A,w.h)}function E(w,C){const A=C>>5;C%=32;const M=w.g.length-A,R=[];for(let P=0;P<M;P++)R[P]=C>0?w.i(P+A)>>>C|w.i(P+A+1)<<32-C:w.i(P+A);return new s(R,w.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,lb=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=a,s.fromString=m,dl=s}).apply(typeof sA<"u"?sA:typeof self<"u"?self:typeof window<"u"?window:{});var cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hb,Ld,ub,Om,A1,cb,fb,db;(function(){var f,t=Object.defineProperty;function i(B){B=[typeof globalThis=="object"&&globalThis,B,typeof window=="object"&&window,typeof self=="object"&&self,typeof cm=="object"&&cm];for(var K=0;K<B.length;++K){var J=B[K];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var n=i(this);function v(B,K){if(K)t:{var J=n;B=B.split(".");for(var st=0;st<B.length-1;st++){var wt=B[st];if(!(wt in J))break t;J=J[wt]}B=B[B.length-1],st=J[B],K=K(st),K!=st&&K!=null&&t(J,B,{configurable:!0,writable:!0,value:K})}}v("Symbol.dispose",function(B){return B||Symbol("Symbol.dispose")}),v("Array.prototype.values",function(B){return B||function(){return this[Symbol.iterator]()}}),v("Object.entries",function(B){return B||function(K){var J=[],st;for(st in K)Object.prototype.hasOwnProperty.call(K,st)&&J.push([st,K[st]]);return J}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var S=S||{},s=this||self;function T(B){var K=typeof B;return K=="object"&&B!=null||K=="function"}function e(B,K,J){return B.call.apply(B.bind,arguments)}function a(B,K,J){return a=e,a.apply(null,arguments)}function m(B,K){var J=Array.prototype.slice.call(arguments,1);return function(){var st=J.slice();return st.push.apply(st,arguments),B.apply(this,st)}}function c(B,K){function J(){}J.prototype=K.prototype,B.Z=K.prototype,B.prototype=new J,B.prototype.constructor=B,B.Ob=function(st,wt,Dt){for(var te=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)te[Ne-2]=arguments[Ne];return K.prototype[wt].apply(st,te)}}var o=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?B=>B&&AsyncContext.Snapshot.wrap(B):B=>B;function u(B){const K=B.length;if(K>0){const J=Array(K);for(let st=0;st<K;st++)J[st]=B[st];return J}return[]}function r(B,K){for(let st=1;st<arguments.length;st++){const wt=arguments[st];var J=typeof wt;if(J=J!="object"?J:wt?Array.isArray(wt)?"array":J:"null",J=="array"||J=="object"&&typeof wt.length=="number"){J=B.length||0;const Dt=wt.length||0;B.length=J+Dt;for(let te=0;te<Dt;te++)B[J+te]=wt[te]}else B.push(wt)}}class h{constructor(K,J){this.i=K,this.j=J,this.h=0,this.g=null}get(){let K;return this.h>0?(this.h--,K=this.g,this.g=K.next,K.next=null):K=this.i(),K}}function d(B){s.setTimeout(()=>{throw B},0)}function l(){var B=w;let K=null;return B.g&&(K=B.g,B.g=B.g.next,B.g||(B.h=null),K.next=null),K}class p{constructor(){this.h=this.g=null}add(K,J){const st=g.get();st.set(K,J),this.h?this.h.next=st:this.g=st,this.h=st}}var g=new h(()=>new x,B=>B.reset());class x{constructor(){this.next=this.g=this.h=null}set(K,J){this.h=K,this.g=J,this.next=null}reset(){this.next=this.g=this.h=null}}let y,E=!1,w=new p,C=()=>{const B=Promise.resolve(void 0);y=()=>{B.then(A)}};function A(){for(var B;B=l();){try{B.h.call(B.g)}catch(J){d(J)}var K=g;K.j(B),K.h<100&&(K.h++,B.next=K.g,K.g=B)}E=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(B,K){this.type=B,this.g=this.target=K,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var B=!1,K=Object.defineProperty({},"passive",{get:function(){B=!0}});try{const J=()=>{};s.addEventListener("test",J,K),s.removeEventListener("test",J,K)}catch{}return B})();function b(B){return/^[\s\xa0]*$/.test(B)}function F(B,K){R.call(this,B?B.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,B&&this.init(B,K)}c(F,R),F.prototype.init=function(B,K){const J=this.type=B.type,st=B.changedTouches&&B.changedTouches.length?B.changedTouches[0]:null;this.target=B.target||B.srcElement,this.g=K,K=B.relatedTarget,K||(J=="mouseover"?K=B.fromElement:J=="mouseout"&&(K=B.toElement)),this.relatedTarget=K,st?(this.clientX=st.clientX!==void 0?st.clientX:st.pageX,this.clientY=st.clientY!==void 0?st.clientY:st.pageY,this.screenX=st.screenX||0,this.screenY=st.screenY||0):(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0),this.button=B.button,this.key=B.key||"",this.ctrlKey=B.ctrlKey,this.altKey=B.altKey,this.shiftKey=B.shiftKey,this.metaKey=B.metaKey,this.pointerId=B.pointerId||0,this.pointerType=B.pointerType,this.state=B.state,this.i=B,B.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const B=this.i;B.preventDefault?B.preventDefault():B.returnValue=!1};var I="closure_listenable_"+(Math.random()*1e6|0),L=0;function D(B,K,J,st,wt){this.listener=B,this.proxy=null,this.src=K,this.type=J,this.capture=!!st,this.ha=wt,this.key=++L,this.da=this.fa=!1}function O(B){B.da=!0,B.listener=null,B.proxy=null,B.src=null,B.ha=null}function z(B,K,J){for(const st in B)K.call(J,B[st],st,B)}function W(B,K){for(const J in B)K.call(void 0,B[J],J,B)}function k(B){const K={};for(const J in B)K[J]=B[J];return K}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(B,K){let J,st;for(let wt=1;wt<arguments.length;wt++){st=arguments[wt];for(J in st)B[J]=st[J];for(let Dt=0;Dt<X.length;Dt++)J=X[Dt],Object.prototype.hasOwnProperty.call(st,J)&&(B[J]=st[J])}}function G(B){this.src=B,this.g={},this.h=0}G.prototype.add=function(B,K,J,st,wt){const Dt=B.toString();B=this.g[Dt],B||(B=this.g[Dt]=[],this.h++);const te=H(B,K,st,wt);return te>-1?(K=B[te],J||(K.fa=!1)):(K=new D(K,this.src,Dt,!!st,wt),K.fa=J,B.push(K)),K};function N(B,K){const J=K.type;if(J in B.g){var st=B.g[J],wt=Array.prototype.indexOf.call(st,K,void 0),Dt;(Dt=wt>=0)&&Array.prototype.splice.call(st,wt,1),Dt&&(O(K),B.g[J].length==0&&(delete B.g[J],B.h--))}}function H(B,K,J,st){for(let wt=0;wt<B.length;++wt){const Dt=B[wt];if(!Dt.da&&Dt.listener==K&&Dt.capture==!!J&&Dt.ha==st)return wt}return-1}var U="closure_lm_"+(Math.random()*1e6|0),_={};function $(B,K,J,st,wt){if(Array.isArray(K)){for(let Dt=0;Dt<K.length;Dt++)$(B,K[Dt],J,st,wt);return null}return J=ut(J),B&&B[I]?B.J(K,J,T(st)?!!st.capture:!1,wt):j(B,K,J,!1,st,wt)}function j(B,K,J,st,wt,Dt){if(!K)throw Error("Invalid event type");const te=T(wt)?!!wt.capture:!!wt;let Ne=vt(B);if(Ne||(B[U]=Ne=new G(B)),J=Ne.add(K,J,st,te,Dt),J.proxy)return J;if(st=Z(),J.proxy=st,st.src=B,st.listener=J,B.addEventListener)P||(wt=te),wt===void 0&&(wt=!1),B.addEventListener(K.toString(),st,wt);else if(B.attachEvent)B.attachEvent(q(K.toString()),st);else if(B.addListener&&B.removeListener)B.addListener(st);else throw Error("addEventListener and attachEvent are unavailable.");return J}function Z(){function B(J){return K.call(B.src,B.listener,J)}const K=ft;return B}function it(B,K,J,st,wt){if(Array.isArray(K))for(var Dt=0;Dt<K.length;Dt++)it(B,K[Dt],J,st,wt);else st=T(st)?!!st.capture:!!st,J=ut(J),B&&B[I]?(B=B.i,Dt=String(K).toString(),Dt in B.g&&(K=B.g[Dt],J=H(K,J,st,wt),J>-1&&(O(K[J]),Array.prototype.splice.call(K,J,1),K.length==0&&(delete B.g[Dt],B.h--)))):B&&(B=vt(B))&&(K=B.g[K.toString()],B=-1,K&&(B=H(K,J,st,wt)),(J=B>-1?K[B]:null)&&at(J))}function at(B){if(typeof B!="number"&&B&&!B.da){var K=B.src;if(K&&K[I])N(K.i,B);else{var J=B.type,st=B.proxy;K.removeEventListener?K.removeEventListener(J,st,B.capture):K.detachEvent?K.detachEvent(q(J),st):K.addListener&&K.removeListener&&K.removeListener(st),(J=vt(K))?(N(J,B),J.h==0&&(J.src=null,K[U]=null)):O(B)}}}function q(B){return B in _?_[B]:_[B]="on"+B}function ft(B,K){if(B.da)B=!0;else{K=new F(K,this);const J=B.listener,st=B.ha||B.src;B.fa&&at(B),B=J.call(st,K)}return B}function vt(B){return B=B[U],B instanceof G?B:null}var Tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ut(B){return typeof B=="function"?B:(B[Tt]||(B[Tt]=function(K){return B.handleEvent(K)}),B[Tt])}function Bt(){M.call(this),this.i=new G(this),this.M=this,this.G=null}c(Bt,M),Bt.prototype[I]=!0,Bt.prototype.removeEventListener=function(B,K,J,st){it(this,B,K,J,st)};function Pt(B,K){var J,st=B.G;if(st)for(J=[];st;st=st.G)J.push(st);if(B=B.M,st=K.type||K,typeof K=="string")K=new R(K,B);else if(K instanceof R)K.target=K.target||B;else{var wt=K;K=new R(st,B),V(K,wt)}wt=!0;let Dt,te;if(J)for(te=J.length-1;te>=0;te--)Dt=K.g=J[te],wt=et(Dt,st,!0,K)&&wt;if(Dt=K.g=B,wt=et(Dt,st,!0,K)&&wt,wt=et(Dt,st,!1,K)&&wt,J)for(te=0;te<J.length;te++)Dt=K.g=J[te],wt=et(Dt,st,!1,K)&&wt}Bt.prototype.N=function(){if(Bt.Z.N.call(this),this.i){var B=this.i;for(const K in B.g){const J=B.g[K];for(let st=0;st<J.length;st++)O(J[st]);delete B.g[K],B.h--}}this.G=null},Bt.prototype.J=function(B,K,J,st){return this.i.add(String(B),K,!1,J,st)},Bt.prototype.K=function(B,K,J,st){return this.i.add(String(B),K,!0,J,st)};function et(B,K,J,st){if(K=B.i.g[String(K)],!K)return!0;K=K.concat();let wt=!0;for(let Dt=0;Dt<K.length;++Dt){const te=K[Dt];if(te&&!te.da&&te.capture==J){const Ne=te.listener,en=te.ha||te.src;te.fa&&N(B.i,te),wt=Ne.call(en,st)!==!1&&wt}}return wt&&!st.defaultPrevented}function Q(B,K){if(typeof B!="function")if(B&&typeof B.handleEvent=="function")B=a(B.handleEvent,B);else throw Error("Invalid listener argument");return Number(K)>2147483647?-1:s.setTimeout(B,K||0)}function lt(B){B.g=Q(()=>{B.g=null,B.i&&(B.i=!1,lt(B))},B.l);const K=B.h;B.h=null,B.m.apply(null,K)}class pt extends M{constructor(K,J){super(),this.m=K,this.l=J,this.h=null,this.i=!1,this.g=null}j(K){this.h=arguments,this.g?this.i=!0:lt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(B){M.call(this),this.h=B,this.g={}}c(Mt,M);var Ct=[];function Kt(B){z(B.g,function(K,J){this.g.hasOwnProperty(J)&&at(K)},B),B.g={}}Mt.prototype.N=function(){Mt.Z.N.call(this),Kt(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ut=s.JSON.stringify,Wt=s.JSON.parse,ae=class{stringify(B){return s.JSON.stringify(B,void 0)}parse(B){return s.JSON.parse(B,void 0)}};function zt(){}function Ht(){}var At={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ne(){R.call(this,"d")}c(ne,R);function jt(){R.call(this,"c")}c(jt,R);var ve={},we=null;function De(){return we=we||new Bt}ve.Ia="serverreachability";function dt(B){R.call(this,ve.Ia,B)}c(dt,R);function Qt(B){const K=De();Pt(K,new dt(K))}ve.STAT_EVENT="statevent";function Ot(B,K){R.call(this,ve.STAT_EVENT,B),this.stat=K}c(Ot,R);function Vt(B){const K=De();Pt(K,new Ot(K,B))}ve.Ja="timingevent";function le(B,K){R.call(this,ve.Ja,B),this.size=K}c(le,R);function se(B,K){if(typeof B!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){B()},K)}function Re(){this.g=!0}Re.prototype.ua=function(){this.g=!1};function yi(B,K,J,st,wt,Dt){B.info(function(){if(B.g)if(Dt){var te="",Ne=Dt.split("&");for(let Ei=0;Ei<Ne.length;Ei++){var en=Ne[Ei].split("=");if(en.length>1){const un=en[0];en=en[1];const rr=un.split("_");te=rr.length>=2&&rr[1]=="type"?te+(un+"="+en+"&"):te+(un+"=redacted&")}}}else te=null;else te=Dt;return"XMLHTTP REQ ("+st+") [attempt "+wt+"]: "+K+`
`+J+`
`+te})}function ln(B,K,J,st,wt,Dt,te){B.info(function(){return"XMLHTTP RESP ("+st+") [ attempt "+wt+"]: "+K+`
`+J+`
`+Dt+" "+te})}function Pe(B,K,J,st){B.info(function(){return"XMLHTTP TEXT ("+K+"): "+zi(B,J)+(st?" "+st:"")})}function Pi(B,K){B.info(function(){return"TIMEOUT: "+K})}Re.prototype.info=function(){};function zi(B,K){if(!B.g)return K;if(!K)return null;try{const Dt=JSON.parse(K);if(Dt){for(B=0;B<Dt.length;B++)if(Array.isArray(Dt[B])){var J=Dt[B];if(!(J.length<2)){var st=J[1];if(Array.isArray(st)&&!(st.length<1)){var wt=st[0];if(wt!="noop"&&wt!="stop"&&wt!="close")for(let te=1;te<st.length;te++)st[te]=""}}}}return Ut(Dt)}catch{return K}}var hn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ke={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sr;function Ia(){}c(Ia,zt),Ia.prototype.g=function(){return new XMLHttpRequest},sr=new Ia;function Kr(B){return encodeURIComponent(String(B))}function mu(B){var K=1;B=B.split(":");const J=[];for(;K>0&&B.length;)J.push(B.shift()),K--;return B.length&&J.push(B.join(":")),J}function hs(B,K,J,st){this.j=B,this.i=K,this.l=J,this.S=st||1,this.V=new Mt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zl}function zl(){this.i=null,this.g="",this.h=!1}var jr={},Ro={};function Qr(B,K,J){B.M=1,B.A=In(Je(K)),B.u=J,B.R=!0,gu(B,null)}function gu(B,K){B.F=Date.now(),He(B),B.B=Je(B.A);var J=B.B,st=B.S;Array.isArray(st)||(st=[String(st)]),fv(J.i,"t",st),B.C=0,J=B.j.L,B.h=new zl,B.g=Qf(B.j,J?K:null,!B.u),B.P>0&&(B.O=new pt(a(B.Y,B,B.g),B.P)),K=B.V,J=B.g,st=B.ba;var wt="readystatechange";Array.isArray(wt)||(wt&&(Ct[0]=wt.toString()),wt=Ct);for(let Dt=0;Dt<wt.length;Dt++){const te=$(J,wt[Dt],st||K.handleEvent,!1,K.h||K);if(!te)break;K.g[te.key]=te}K=B.J?k(B.J):{},B.u?(B.v||(B.v="POST"),K["Content-Type"]="application/x-www-form-urlencoded",B.g.ea(B.B,B.v,B.u,K)):(B.v="GET",B.g.ea(B.B,B.v,null,K)),Qt(),yi(B.i,B.v,B.B,B.l,B.S,B.u)}hs.prototype.ba=function(B){B=B.target;const K=this.O;K&&Cr(B)==3?K.j():this.Y(B)},hs.prototype.Y=function(B){try{if(B==this.g)t:{const Ne=Cr(this.g),en=this.g.ya(),Ei=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Yf(this.g)))){this.K||Ne!=4||en==7||(en==8||Ei<=0?Qt(3):Qt(2)),nt(this);var K=this.g.ca();this.X=K;var J=xu(this);if(this.o=K==200,ln(this.i,this.v,this.B,this.l,this.S,Ne,K),this.o){if(this.U&&!this.L){e:{if(this.g){var st,wt=this.g;if((st=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(st)){var Dt=st;break e}}Dt=null}if(B=Dt)Pe(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Lt(this,B);else{this.o=!1,this.m=3,Vt(12),bt(this),mt(this);break t}}if(this.R){B=!0;let un;for(;!this.K&&this.C<J.length;)if(un=Gf(this,J),un==Ro){Ne==4&&(this.m=4,Vt(14),B=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}else if(un==jr){this.m=4,Vt(15),Pe(this.i,this.l,J,"[Invalid Chunk]"),B=!1;break}else Pe(this.i,this.l,un,null),Lt(this,un);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||J.length!=0||this.h.h||(this.m=1,Vt(16),B=!1),this.o=this.o&&B,!B)Pe(this.i,this.l,J,"[Invalid Chunked Response]"),bt(this),mt(this);else if(J.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Kf(te),te.P=!0,Vt(11))}}else Pe(this.i,this.l,J,null),Lt(this,J);Ne==4&&bt(this),this.o&&!this.K&&(Ne==4?jf(this.j,this):(this.o=!1,He(this)))}else Sv(this.g),K==400&&J.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),bt(this),mt(this)}}}catch{}finally{}};function xu(B){if(!yu(B))return B.g.la();const K=Yf(B.g);if(K==="")return"";let J="";const st=K.length,wt=Cr(B.g)==4;if(!B.h.i){if(typeof TextDecoder>"u")return bt(B),mt(B),"";B.h.i=new s.TextDecoder}for(let Dt=0;Dt<st;Dt++)B.h.h=!0,J+=B.h.i.decode(K[Dt],{stream:!(wt&&Dt==st-1)});return K.length=0,B.h.g+=J,B.C=0,B.h.g}function yu(B){return B.g?B.v=="GET"&&B.M!=2&&B.j.Aa:!1}function Gf(B,K){var J=B.C,st=K.indexOf(`
`,J);return st==-1?Ro:(J=Number(K.substring(J,st)),isNaN(J)?jr:(st+=1,st+J>K.length?Ro:(K=K.slice(st,st+J),B.C=st+J,K)))}hs.prototype.cancel=function(){this.K=!0,bt(this)};function He(B){B.T=Date.now()+B.H,Tu(B,B.H)}function Tu(B,K){if(B.D!=null)throw Error("WatchDog timer not null");B.D=se(a(B.aa,B),K)}function nt(B){B.D&&(s.clearTimeout(B.D),B.D=null)}hs.prototype.aa=function(){this.D=null;const B=Date.now();B-this.T>=0?(Pi(this.i,this.B),this.M!=2&&(Qt(),Vt(17)),bt(this),this.m=2,mt(this)):Tu(this,this.T-B)};function mt(B){B.j.I==0||B.K||jf(B.j,B)}function bt(B){nt(B);var K=B.O;K&&typeof K.dispose=="function"&&K.dispose(),B.O=null,Kt(B.V),B.g&&(K=B.g,B.g=null,K.abort(),K.dispose())}function Lt(B,K){try{var J=B.j;if(J.I!=0&&(J.g==B||fe(J.h,B))){if(!B.L&&fe(J.h,B)&&J.I==3){try{var st=J.Ba.g.parse(K)}catch{st=null}if(Array.isArray(st)&&st.length==3){var wt=st;if(wt[0]==0){t:if(!J.v){if(J.g)if(J.g.F+3e3<B.F)Cu(J),wu(J);else break t;$f(J),Vt(18)}}else J.xa=wt[1],0<J.xa-J.K&&wt[2]<37500&&J.F&&J.A==0&&!J.C&&(J.C=se(a(J.Va,J),6e3));ue(J.h)<=1&&J.ta&&(J.ta=void 0)}else Zr(J,11)}else if((B.L||J.g==B)&&Cu(J),!b(K))for(wt=J.Ba.g.parse(K),K=0;K<wt.length;K++){let Ei=wt[K];const un=Ei[0];if(!(un<=J.K))if(J.K=un,Ei=Ei[1],J.I==2)if(Ei[0]=="c"){J.M=Ei[1],J.ba=Ei[2];const rr=Ei[3];rr!=null&&(J.ka=rr,J.j.info("VER="+J.ka));const Da=Ei[4];Da!=null&&(J.za=Da,J.j.info("SVER="+J.za));const Jr=Ei[5];Jr!=null&&typeof Jr=="number"&&Jr>0&&(st=1.5*Jr,J.O=st,J.j.info("backChannelRequestTimeoutMs_="+st)),st=J;const qr=B.g;if(qr){const kl=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kl){var Dt=st.h;Dt.g||kl.indexOf("spdy")==-1&&kl.indexOf("quic")==-1&&kl.indexOf("h2")==-1||(Dt.j=Dt.l,Dt.g=new Set,Dt.h&&(Ce(Dt,Dt.h),Dt.h=null))}if(st.G){const Mu=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mu&&(st.wa=Mu,ye(st.J,st.G,Mu))}}J.I=3,J.l&&J.l.ra(),J.aa&&(J.T=Date.now()-B.F,J.j.info("Handshake RTT: "+J.T+"ms")),st=J;var te=B;if(st.na=Fv(st,st.L?st.ba:null,st.W),te.L){be(st.h,te);var Ne=te,en=st.O;en&&(Ne.H=en),Ne.D&&(nt(Ne),He(Ne)),st.g=te}else Pv(st);J.i.length>0&&Au(J)}else Ei[0]!="stop"&&Ei[0]!="close"||Zr(J,7);else J.I==3&&(Ei[0]=="stop"||Ei[0]=="close"?Ei[0]=="stop"?Zr(J,7):Su(J):Ei[0]!="noop"&&J.l&&J.l.qa(Ei),J.A=0)}}Qt(4)}catch{}}var xt=class{constructor(B,K){this.g=B,this.map=K}};function Yt(B){this.l=B||10,s.PerformanceNavigationTiming?(B=s.performance.getEntriesByType("navigation"),B=B.length>0&&(B[0].nextHopProtocol=="hq"||B[0].nextHopProtocol=="h2")):B=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=B?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function oe(B){return B.h?!0:B.g?B.g.size>=B.j:!1}function ue(B){return B.h?1:B.g?B.g.size:0}function fe(B,K){return B.h?B.h==K:B.g?B.g.has(K):!1}function Ce(B,K){B.g?B.g.add(K):B.h=K}function be(B,K){B.h&&B.h==K?B.h=null:B.g&&B.g.has(K)&&B.g.delete(K)}Yt.prototype.cancel=function(){if(this.i=Ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const B of this.g.values())B.cancel();this.g.clear()}};function Ee(B){if(B.h!=null)return B.i.concat(B.h.G);if(B.g!=null&&B.g.size!==0){let K=B.i;for(const J of B.g.values())K=K.concat(J.G);return K}return u(B.i)}var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ni(B,K){if(B){B=B.split("&");for(let J=0;J<B.length;J++){const st=B[J].indexOf("=");let wt,Dt=null;st>=0?(wt=B[J].substring(0,st),Dt=B[J].substring(st+1)):wt=B[J],K(wt,Dt?decodeURIComponent(Dt.replace(/\+/g," ")):"")}}}function fi(B){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let K;B instanceof fi?(this.l=B.l,ze(this,B.j),this.o=B.o,this.g=B.g,xe(this,B.u),this.h=B.h,ki(this,Wf(B.i)),this.m=B.m):B&&(K=String(B).match(Xe))?(this.l=!1,ze(this,K[1]||"",!0),this.o=us(K[2]||""),this.g=us(K[3]||"",!0),xe(this,K[4]),this.h=us(K[5]||"",!0),ki(this,K[6]||"",!0),this.m=us(K[7]||"")):(this.l=!1,this.i=new wr(null,this.l))}fi.prototype.toString=function(){const B=[];var K=this.j;K&&B.push(Zi(K,Ti,!0),":");var J=this.g;return(J||K=="file")&&(B.push("//"),(K=this.o)&&B.push(Zi(K,Ti,!0),"@"),B.push(Kr(J).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),J=this.u,J!=null&&B.push(":",String(J))),(J=this.h)&&(this.g&&J.charAt(0)!="/"&&B.push("/"),B.push(Zi(J,J.charAt(0)=="/"?Qn:_n,!0))),(J=this.i.toString())&&B.push("?",J),(J=this.m)&&B.push("#",Zi(J,En)),B.join("")},fi.prototype.resolve=function(B){const K=Je(this);let J=!!B.j;J?ze(K,B.j):J=!!B.o,J?K.o=B.o:J=!!B.g,J?K.g=B.g:J=B.u!=null;var st=B.h;if(J)xe(K,B.u);else if(J=!!B.h){if(st.charAt(0)!="/")if(this.g&&!this.h)st="/"+st;else{var wt=K.h.lastIndexOf("/");wt!=-1&&(st=K.h.slice(0,wt+1)+st)}if(wt=st,wt==".."||wt==".")st="";else if(wt.indexOf("./")!=-1||wt.indexOf("/.")!=-1){st=wt.lastIndexOf("/",0)==0,wt=wt.split("/");const Dt=[];for(let te=0;te<wt.length;){const Ne=wt[te++];Ne=="."?st&&te==wt.length&&Dt.push(""):Ne==".."?((Dt.length>1||Dt.length==1&&Dt[0]!="")&&Dt.pop(),st&&te==wt.length&&Dt.push("")):(Dt.push(Ne),st=!0)}st=Dt.join("/")}else st=wt}return J?K.h=st:J=B.i.toString()!=="",J?ki(K,Wf(B.i)):J=!!B.m,J&&(K.m=B.m),K};function Je(B){return new fi(B)}function ze(B,K,J){B.j=J?us(K,!0):K,B.j&&(B.j=B.j.replace(/:$/,""))}function xe(B,K){if(K){if(K=Number(K),isNaN(K)||K<0)throw Error("Bad port number "+K);B.u=K}else B.u=null}function ki(B,K,J){K instanceof wr?(B.i=K,I0(B.i,B.l)):(J||(K=Zi(K,Tn)),B.i=new wr(K,B.l))}function ye(B,K,J){B.i.set(K,J)}function In(B){return ye(B,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),B}function us(B,K){return B?K?decodeURI(B.replace(/%25/g,"%2525")):decodeURIComponent(B):""}function Zi(B,K,J){return typeof B=="string"?(B=encodeURI(B).replace(K,La),J&&(B=B.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B):null}function La(B){return B=B.charCodeAt(0),"%"+(B>>4&15).toString(16)+(B&15).toString(16)}var Ti=/[#\/\?@]/g,_n=/[#\?:]/g,Qn=/[#\?]/g,Tn=/[#\?@]/g,En=/#/g;function wr(B,K){this.h=this.g=null,this.i=B||null,this.j=!!K}function Wn(B){B.g||(B.g=new Map,B.h=0,B.i&&ni(B.i,function(K,J){B.add(decodeURIComponent(K.replace(/\+/g," ")),J)}))}f=wr.prototype,f.add=function(B,K){Wn(this),this.i=null,B=Po(this,B);let J=this.g.get(B);return J||this.g.set(B,J=[]),J.push(K),this.h+=1,this};function _f(B,K){Wn(B),K=Po(B,K),B.g.has(K)&&(B.i=null,B.h-=B.g.get(K).length,B.g.delete(K))}function cv(B,K){return Wn(B),K=Po(B,K),B.g.has(K)}f.forEach=function(B,K){Wn(this),this.g.forEach(function(J,st){J.forEach(function(wt){B.call(K,wt,st,this)},this)},this)};function Eu(B,K){Wn(B);let J=[];if(typeof K=="string")cv(B,K)&&(J=J.concat(B.g.get(Po(B,K))));else for(B=Array.from(B.g.values()),K=0;K<B.length;K++)J=J.concat(B[K]);return J}f.set=function(B,K){return Wn(this),this.i=null,B=Po(this,B),cv(this,B)&&(this.h-=this.g.get(B).length),this.g.set(B,[K]),this.h+=1,this},f.get=function(B,K){return B?(B=Eu(this,B),B.length>0?String(B[0]):K):K};function fv(B,K,J){_f(B,K),J.length>0&&(B.i=null,B.g.set(Po(B,K),u(J)),B.h+=J.length)}f.toString=function(){if(this.i)return this.i;if(!this.g)return"";const B=[],K=Array.from(this.g.keys());for(let st=0;st<K.length;st++){var J=K[st];const wt=Kr(J);J=Eu(this,J);for(let Dt=0;Dt<J.length;Dt++){let te=wt;J[Dt]!==""&&(te+="="+Kr(J[Dt])),B.push(te)}}return this.i=B.join("&")};function Wf(B){const K=new wr;return K.i=B.i,B.g&&(K.g=new Map(B.g),K.h=B.h),K}function Po(B,K){return K=String(K),B.j&&(K=K.toLowerCase()),K}function I0(B,K){K&&!B.j&&(Wn(B),B.i=null,B.g.forEach(function(J,st){const wt=st.toLowerCase();st!=wt&&(_f(this,st),fv(this,wt,J))},B)),B.j=K}function dv(B,K){const J=new Re;if(s.Image){const st=new Image;st.onload=m(Ar,J,"TestLoadImage: loaded",!0,K,st),st.onerror=m(Ar,J,"TestLoadImage: error",!1,K,st),st.onabort=m(Ar,J,"TestLoadImage: abort",!1,K,st),st.ontimeout=m(Ar,J,"TestLoadImage: timeout",!1,K,st),s.setTimeout(function(){st.ontimeout&&st.ontimeout()},1e4),st.src=B}else K(!1)}function pv(B,K){const J=new Re,st=new AbortController,wt=setTimeout(()=>{st.abort(),Ar(J,"TestPingServer: timeout",!1,K)},1e4);fetch(B,{signal:st.signal}).then(Dt=>{clearTimeout(wt),Dt.ok?Ar(J,"TestPingServer: ok",!0,K):Ar(J,"TestPingServer: server error",!1,K)}).catch(()=>{clearTimeout(wt),Ar(J,"TestPingServer: error",!1,K)})}function Ar(B,K,J,st,wt){try{wt&&(wt.onload=null,wt.onerror=null,wt.onabort=null,wt.ontimeout=null),st(J)}catch{}}function vv(){this.g=new ae}function Hf(B){this.i=B.Sb||null,this.h=B.ab||!1}c(Hf,zt),Hf.prototype.g=function(){return new Gl(this.i,this.h)};function Gl(B,K){Bt.call(this),this.H=B,this.o=K,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}c(Gl,Bt),f=Gl.prototype,f.open=function(B,K){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=B,this.D=K,this.readyState=1,_l(this)},f.send=function(B){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const K={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};B&&(K.body=B),(this.H||s).fetch(new Request(this.D,K)).then(this.Pa.bind(this),this.ga.bind(this))},f.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bo(this)),this.readyState=0},f.Pa=function(B){if(this.g&&(this.l=B,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=B.headers,this.readyState=2,_l(this)),this.g&&(this.readyState=3,_l(this),this.g)))if(this.responseType==="arraybuffer")B.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in B){if(this.j=B.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mv(this)}else B.text().then(this.Oa.bind(this),this.ga.bind(this))};function mv(B){B.j.read().then(B.Ma.bind(B)).catch(B.ga.bind(B))}f.Ma=function(B){if(this.g){if(this.o&&B.value)this.response.push(B.value);else if(!this.o){var K=B.value?B.value:new Uint8Array(0);(K=this.B.decode(K,{stream:!B.done}))&&(this.response=this.responseText+=K)}B.done?bo(this):_l(this),this.readyState==3&&mv(this)}},f.Oa=function(B){this.g&&(this.response=this.responseText=B,bo(this))},f.Na=function(B){this.g&&(this.response=B,bo(this))},f.ga=function(){this.g&&bo(this)};function bo(B){B.readyState=4,B.l=null,B.j=null,B.B=null,_l(B)}f.setRequestHeader=function(B,K){this.A.append(B,K)},f.getResponseHeader=function(B){return this.h&&this.h.get(B.toLowerCase())||""},f.getAllResponseHeaders=function(){if(!this.h)return"";const B=[],K=this.h.entries();for(var J=K.next();!J.done;)J=J.value,B.push(J[0]+": "+J[1]),J=K.next();return B.join(`\r
`)};function _l(B){B.onreadystatechange&&B.onreadystatechange.call(B)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(B){this.m=B?"include":"same-origin"}});function gv(B){let K="";return z(B,function(J,st){K+=st,K+=":",K+=J,K+=`\r
`}),K}function Xf(B,K,J){t:{for(st in J){var st=!1;break t}st=!0}st||(J=gv(J),typeof B=="string"?J!=null&&Kr(J):ye(B,K,J))}function Gi(B){Bt.call(this),this.headers=new Map,this.L=B||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}c(Gi,Bt);var xv=/^https?$/i,yv=["POST","PUT"];f=Gi.prototype,f.Fa=function(B){this.H=B},f.ea=function(B,K,J,st){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+B);K=K?K.toUpperCase():"GET",this.D=B,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sr.g(),this.g.onreadystatechange=o(a(this.Ca,this));try{this.B=!0,this.g.open(K,String(B),!0),this.B=!1}catch(Dt){Tv(this,Dt);return}if(B=J||"",J=new Map(this.headers),st)if(Object.getPrototypeOf(st)===Object.prototype)for(var wt in st)J.set(wt,st[wt]);else if(typeof st.keys=="function"&&typeof st.get=="function")for(const Dt of st.keys())J.set(Dt,st.get(Dt));else throw Error("Unknown input type for opt_headers: "+String(st));st=Array.from(J.keys()).find(Dt=>Dt.toLowerCase()=="content-type"),wt=s.FormData&&B instanceof s.FormData,!(Array.prototype.indexOf.call(yv,K,void 0)>=0)||st||wt||J.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Dt,te]of J)this.g.setRequestHeader(Dt,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(B),this.v=!1}catch(Dt){Tv(this,Dt)}};function Tv(B,K){B.h=!1,B.g&&(B.j=!0,B.g.abort(),B.j=!1),B.l=K,B.o=5,kf(B),Wl(B)}function kf(B){B.A||(B.A=!0,Pt(B,"complete"),Pt(B,"error"))}f.abort=function(B){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=B||7,Pt(this,"complete"),Pt(this,"abort"),Wl(this))},f.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wl(this,!0)),Gi.Z.N.call(this)},f.Ca=function(){this.u||(this.B||this.v||this.j?Ev(this):this.Xa())},f.Xa=function(){Ev(this)};function Ev(B){if(B.h&&typeof S<"u"){if(B.v&&Cr(B)==4)setTimeout(B.Ca.bind(B),0);else if(Pt(B,"readystatechange"),Cr(B)==4){B.h=!1;try{const Dt=B.ca();t:switch(Dt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var K=!0;break t;default:K=!1}var J;if(!(J=K)){var st;if(st=Dt===0){let te=String(B.D).match(Xe)[1]||null;!te&&s.self&&s.self.location&&(te=s.self.location.protocol.slice(0,-1)),st=!xv.test(te?te.toLowerCase():"")}J=st}if(J)Pt(B,"complete"),Pt(B,"success");else{B.o=6;try{var wt=Cr(B)>2?B.g.statusText:""}catch{wt=""}B.l=wt+" ["+B.ca()+"]",kf(B)}}finally{Wl(B)}}}}function Wl(B,K){if(B.g){B.m&&(clearTimeout(B.m),B.m=null);const J=B.g;B.g=null,K||Pt(B,"ready");try{J.onreadystatechange=null}catch{}}}f.isActive=function(){return!!this.g};function Cr(B){return B.g?B.g.readyState:0}f.ca=function(){try{return Cr(this)>2?this.g.status:-1}catch{return-1}},f.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},f.La=function(B){if(this.g){var K=this.g.responseText;return B&&K.indexOf(B)==0&&(K=K.substring(B.length)),Wt(K)}};function Yf(B){try{if(!B.g)return null;if("response"in B.g)return B.g.response;switch(B.F){case"":case"text":return B.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in B.g)return B.g.mozResponseArrayBuffer}return null}catch{return null}}function Sv(B){const K={};B=(B.g&&Cr(B)>=2&&B.g.getAllResponseHeaders()||"").split(`\r
`);for(let st=0;st<B.length;st++){if(b(B[st]))continue;var J=mu(B[st]);const wt=J[0];if(J=J[1],typeof J!="string")continue;J=J.trim();const Dt=K[wt]||[];K[wt]=Dt,Dt.push(J)}W(K,function(st){return st.join(", ")})}f.ya=function(){return this.o},f.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hl(B,K,J){return J&&J.internalChannelParams&&J.internalChannelParams[B]||K}function wv(B){this.za=0,this.i=[],this.j=new Re,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hl("failFast",!1,B),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hl("baseRetryDelayMs",5e3,B),this.Za=Hl("retryDelaySeedMs",1e4,B),this.Ta=Hl("forwardChannelMaxRetries",2,B),this.va=Hl("forwardChannelRequestTimeoutMs",2e4,B),this.ma=B&&B.xmlHttpFactory||void 0,this.Ua=B&&B.Rb||void 0,this.Aa=B&&B.useFetchStreams||!1,this.O=void 0,this.L=B&&B.supportsCrossDomainXhr||!1,this.M="",this.h=new Yt(B&&B.concurrentRequestLimit),this.Ba=new vv,this.S=B&&B.fastHandshake||!1,this.R=B&&B.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=B&&B.Pb||!1,B&&B.ua&&this.j.ua(),B&&B.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&B&&B.detectBufferingProxy||!1,this.ia=void 0,B&&B.longPollingTimeout&&B.longPollingTimeout>0&&(this.ia=B.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}f=wv.prototype,f.ka=8,f.I=1,f.connect=function(B,K,J,st){Vt(0),this.W=B,this.H=K||{},J&&st!==void 0&&(this.H.OSID=J,this.H.OAID=st),this.F=this.X,this.J=Fv(this,null,this.W),Au(this)};function Su(B){if(Av(B),B.I==3){var K=B.V++,J=Je(B.J);if(ye(J,"SID",B.M),ye(J,"RID",K),ye(J,"TYPE","terminate"),Xl(B,J),K=new hs(B,B.j,K),K.M=2,K.A=In(Je(J)),J=!1,s.navigator&&s.navigator.sendBeacon)try{J=s.navigator.sendBeacon(K.A.toString(),"")}catch{}!J&&s.Image&&(new Image().src=K.A,J=!0),J||(K.g=Qf(K.j,null),K.g.ea(K.A)),K.F=Date.now(),He(K)}Lv(B)}function wu(B){B.g&&(Kf(B),B.g.cancel(),B.g=null)}function Av(B){wu(B),B.v&&(s.clearTimeout(B.v),B.v=null),Cu(B),B.h.cancel(),B.m&&(typeof B.m=="number"&&s.clearTimeout(B.m),B.m=null)}function Au(B){if(!oe(B.h)&&!B.m){B.m=!0;var K=B.Ea;y||C(),E||(y(),E=!0),w.add(K,B),B.D=0}}function Cv(B,K){return ue(B.h)>=B.h.j-(B.m?1:0)?!1:B.m?(B.i=K.G.concat(B.i),!0):B.I==1||B.I==2||B.D>=(B.Sa?0:B.Ta)?!1:(B.m=se(a(B.Ea,B,K),Iv(B,B.D)),B.D++,!0)}f.Ea=function(B){if(this.m)if(this.m=null,this.I==1){if(!B){this.V=Math.floor(Math.random()*1e5),B=this.V++;const wt=new hs(this,this.j,B);let Dt=this.o;if(this.U&&(Dt?(Dt=k(Dt),V(Dt,this.U)):Dt=this.U),this.u!==null||this.R||(wt.J=Dt,Dt=null),this.S)t:{for(var K=0,J=0;J<this.i.length;J++){e:{var st=this.i[J];if("__data__"in st.map&&(st=st.map.__data__,typeof st=="string")){st=st.length;break e}st=void 0}if(st===void 0)break;if(K+=st,K>4096){K=J;break t}if(K===4096||J===this.i.length-1){K=J+1;break t}}K=1e3}else K=1e3;K=Rv(this,wt,K),J=Je(this.J),ye(J,"RID",B),ye(J,"CVER",22),this.G&&ye(J,"X-HTTP-Session-Id",this.G),Xl(this,J),Dt&&(this.R?K="headers="+Kr(gv(Dt))+"&"+K:this.u&&Xf(J,this.u,Dt)),Ce(this.h,wt),this.Ra&&ye(J,"TYPE","init"),this.S?(ye(J,"$req",K),ye(J,"SID","null"),wt.U=!0,Qr(wt,J,null)):Qr(wt,J,K),this.I=2}}else this.I==3&&(B?Mv(this,B):this.i.length==0||oe(this.h)||Mv(this))};function Mv(B,K){var J;K?J=K.l:J=B.V++;const st=Je(B.J);ye(st,"SID",B.M),ye(st,"RID",J),ye(st,"AID",B.K),Xl(B,st),B.u&&B.o&&Xf(st,B.u,B.o),J=new hs(B,B.j,J,B.D+1),B.u===null&&(J.J=B.o),K&&(B.i=K.G.concat(B.i)),K=Rv(B,J,1e3),J.H=Math.round(B.va*.5)+Math.round(B.va*.5*Math.random()),Ce(B.h,J),Qr(J,st,K)}function Xl(B,K){B.H&&z(B.H,function(J,st){ye(K,st,J)}),B.l&&z({},function(J,st){ye(K,st,J)})}function Rv(B,K,J){J=Math.min(B.i.length,J);const st=B.l?a(B.l.Ka,B.l,B):null;t:{var wt=B.i;let Ne=-1;for(;;){const en=["count="+J];Ne==-1?J>0?(Ne=wt[0].g,en.push("ofs="+Ne)):Ne=0:en.push("ofs="+Ne);let Ei=!0;for(let un=0;un<J;un++){var Dt=wt[un].g;const rr=wt[un].map;if(Dt-=Ne,Dt<0)Ne=Math.max(0,wt[un].g-100),Ei=!1;else try{Dt="req"+Dt+"_"||"";try{var te=rr instanceof Map?rr:Object.entries(rr);for(const[Da,Jr]of te){let qr=Jr;T(Jr)&&(qr=Ut(Jr)),en.push(Dt+Da+"="+encodeURIComponent(qr))}}catch(Da){throw en.push(Dt+"type="+encodeURIComponent("_badmap")),Da}}catch{st&&st(rr)}}if(Ei){te=en.join("&");break t}}te=void 0}return B=B.i.splice(0,J),K.G=B,te}function Pv(B){if(!B.g&&!B.v){B.Y=1;var K=B.Da;y||C(),E||(y(),E=!0),w.add(K,B),B.A=0}}function $f(B){return B.g||B.v||B.A>=3?!1:(B.Y++,B.v=se(a(B.Da,B),Iv(B,B.A)),B.A++,!0)}f.Da=function(){if(this.v=null,bv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var B=4*this.T;this.j.info("BP detection timer enabled: "+B),this.B=se(a(this.Wa,this),B)}},f.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),wu(this),bv(this))};function Kf(B){B.B!=null&&(s.clearTimeout(B.B),B.B=null)}function bv(B){B.g=new hs(B,B.j,"rpc",B.Y),B.u===null&&(B.g.J=B.o),B.g.P=0;var K=Je(B.na);ye(K,"RID","rpc"),ye(K,"SID",B.M),ye(K,"AID",B.K),ye(K,"CI",B.F?"0":"1"),!B.F&&B.ia&&ye(K,"TO",B.ia),ye(K,"TYPE","xmlhttp"),Xl(B,K),B.u&&B.o&&Xf(K,B.u,B.o),B.O&&(B.g.H=B.O);var J=B.g;B=B.ba,J.M=1,J.A=In(Je(K)),J.u=null,J.R=!0,gu(J,B)}f.Va=function(){this.C!=null&&(this.C=null,wu(this),$f(this),Vt(19))};function Cu(B){B.C!=null&&(s.clearTimeout(B.C),B.C=null)}function jf(B,K){var J=null;if(B.g==K){Cu(B),Kf(B),B.g=null;var st=2}else if(fe(B.h,K))J=K.G,be(B.h,K),st=1;else return;if(B.I!=0){if(K.o)if(st==1){J=K.u?K.u.length:0,K=Date.now()-K.F;var wt=B.D;st=De(),Pt(st,new le(st,J)),Au(B)}else Pv(B);else if(wt=K.m,wt==3||wt==0&&K.X>0||!(st==1&&Cv(B,K)||st==2&&$f(B)))switch(J&&J.length>0&&(K=B.h,K.i=K.i.concat(J)),wt){case 1:Zr(B,5);break;case 4:Zr(B,10);break;case 3:Zr(B,6);break;default:Zr(B,2)}}}function Iv(B,K){let J=B.Qa+Math.floor(Math.random()*B.Za);return B.isActive()||(J*=2),J*K}function Zr(B,K){if(B.j.info("Error code "+K),K==2){var J=a(B.bb,B),st=B.Ua;const wt=!st;st=new fi(st||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||ze(st,"https"),In(st),wt?dv(st.toString(),J):pv(st.toString(),J)}else Vt(2);B.I=0,B.l&&B.l.pa(K),Lv(B),Av(B)}f.bb=function(B){B?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Lv(B){if(B.I=0,B.ja=[],B.l){const K=Ee(B.h);(K.length!=0||B.i.length!=0)&&(r(B.ja,K),r(B.ja,B.i),B.h.i.length=0,u(B.i),B.i.length=0),B.l.oa()}}function Fv(B,K,J){var st=J instanceof fi?Je(J):new fi(J);if(st.g!="")K&&(st.g=K+"."+st.g),xe(st,st.u);else{var wt=s.location;st=wt.protocol,K=K?K+"."+wt.hostname:wt.hostname,wt=+wt.port;const Dt=new fi(null);st&&ze(Dt,st),K&&(Dt.g=K),wt&&xe(Dt,wt),J&&(Dt.h=J),st=Dt}return J=B.G,K=B.wa,J&&K&&ye(st,J,K),ye(st,"VER",B.ka),Xl(B,st),st}function Qf(B,K,J){if(K&&!B.L)throw Error("Can't create secondary domain capable XhrIo object.");return K=B.Aa&&!B.ma?new Gi(new Hf({ab:J})):new Gi(B.ma),K.Fa(B.L),K}f.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dv(){}f=Dv.prototype,f.ra=function(){},f.qa=function(){},f.pa=function(){},f.oa=function(){},f.isActive=function(){return!0},f.Ka=function(){};function Io(){}Io.prototype.g=function(B,K){return new Zn(B,K)};function Zn(B,K){Bt.call(this),this.g=new wv(K),this.l=B,this.h=K&&K.messageUrlParams||null,B=K&&K.messageHeaders||null,K&&K.clientProtocolHeaderRequired&&(B?B["X-Client-Protocol"]="webchannel":B={"X-Client-Protocol":"webchannel"}),this.g.o=B,B=K&&K.initMessageHeaders||null,K&&K.messageContentType&&(B?B["X-WebChannel-Content-Type"]=K.messageContentType:B={"X-WebChannel-Content-Type":K.messageContentType}),K&&K.sa&&(B?B["X-WebChannel-Client-Profile"]=K.sa:B={"X-WebChannel-Client-Profile":K.sa}),this.g.U=B,(B=K&&K.Qb)&&!b(B)&&(this.g.u=B),this.A=K&&K.supportsCrossDomainXhr||!1,this.v=K&&K.sendRawJson||!1,(K=K&&K.httpSessionIdParam)&&!b(K)&&(this.g.G=K,B=this.h,B!==null&&K in B&&(B=this.h,K in B&&delete B[K])),this.j=new Fa(this)}c(Zn,Bt),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){Su(this.g)},Zn.prototype.o=function(B){var K=this.g;if(typeof B=="string"){var J={};J.__data__=B,B=J}else this.v&&(J={},J.__data__=Ut(B),B=J);K.i.push(new xt(K.Ya++,B)),K.I==3&&Au(K)},Zn.prototype.N=function(){this.g.l=null,delete this.j,Su(this.g),delete this.g,Zn.Z.N.call(this)};function Zf(B){ne.call(this),B.__headers__&&(this.headers=B.__headers__,this.statusCode=B.__status__,delete B.__headers__,delete B.__status__);var K=B.__sm__;if(K){t:{for(const J in K){B=J;break t}B=void 0}(this.i=B)&&(B=this.i,K=K!==null&&B in K?K[B]:void 0),this.data=K}else this.data=B}c(Zf,ne);function Jf(){jt.call(this),this.status=1}c(Jf,jt);function Fa(B){this.g=B}c(Fa,Dv),Fa.prototype.ra=function(){Pt(this.g,"a")},Fa.prototype.qa=function(B){Pt(this.g,new Zf(B))},Fa.prototype.pa=function(B){Pt(this.g,new Jf)},Fa.prototype.oa=function(){Pt(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,db=function(){return new Io},fb=function(){return De()},cb=ve,A1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hn.NO_ERROR=0,hn.TIMEOUT=8,hn.HTTP_ERROR=6,Om=hn,Ke.COMPLETE="complete",ub=Ke,Ht.EventType=At,At.OPEN="a",At.CLOSE="b",At.ERROR="c",At.MESSAGE="d",Bt.prototype.listen=Bt.prototype.J,Ld=Ht,Gi.prototype.listenOnce=Gi.prototype.K,Gi.prototype.getLastError=Gi.prototype.Ha,Gi.prototype.getLastErrorCode=Gi.prototype.ya,Gi.prototype.getStatus=Gi.prototype.ca,Gi.prototype.getResponseJson=Gi.prototype.La,Gi.prototype.getResponseText=Gi.prototype.la,Gi.prototype.send=Gi.prototype.ea,Gi.prototype.setWithCredentials=Gi.prototype.Fa,hb=Gi}).apply(typeof cm<"u"?cm:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af="12.9.0";function b_(f){Af=f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=new Jg("@firebase/firestore");function qu(){return El.logLevel}function I_(f){El.setLogLevel(f)}function Xt(f,...t){if(El.logLevel<=ei.DEBUG){const i=t.map(JT);El.debug(`Firestore (${Af}): ${f}`,...i)}}function an(f,...t){if(El.logLevel<=ei.ERROR){const i=t.map(JT);El.error(`Firestore (${Af}): ${f}`,...i)}}function Ns(f,...t){if(El.logLevel<=ei.WARN){const i=t.map(JT);El.warn(`Firestore (${Af}): ${f}`,...i)}}function JT(f){if(typeof f=="string")return f;try{return(function(i){return JSON.stringify(i)})(f)}catch{return f}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(f,t,i){let n="Unexpected state";typeof t=="string"?n=t:i=t,pb(f,n,i)}function pb(f,t,i){let n=`FIRESTORE (${Af}) INTERNAL ASSERTION FAILED: ${t} (ID: ${f.toString(16)})`;if(i!==void 0)try{n+=" CONTEXT: "+JSON.stringify(i)}catch{n+=" CONTEXT: "+i}throw an(n),new Error(n)}function ge(f,t,i,n){let v="Unexpected state";typeof i=="string"?v=i:n=i,f||pb(t,v,n)}function L_(f,t){f||ce(57014,t)}function ie(f,t){return f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gt extends $r{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class mb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i(On.UNAUTHENTICATED)))}shutdown(){}}class F_{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class D_{constructor(t){this.t=t,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){ge(this.o===void 0,42304);let n=this.i;const v=e=>this.i!==n?(n=this.i,i(e)):Promise.resolve();let S=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),S.resolve(),S=new Bn,t.enqueueRetryable((()=>v(this.currentUser)))};const s=()=>{const e=S;t.enqueueRetryable((async()=>{await e.promise,await v(this.currentUser)}))},T=e=>{Xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>T(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?T(e):(Xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),S.resolve(),S=new Bn)}}),0),s()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((n=>this.i!==t?(Xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ge(typeof n.accessToken=="string",31837,{l:n}),new vb(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ge(t===null||typeof t=="string",2055,{h:t}),new On(t)}}class O_{constructor(t,i,n){this.P=t,this.T=i,this.I=n,this.type="FirstParty",this.user=On.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class N_{constructor(t,i,n){this.P=t,this.T=i,this.I=n}getToken(){return Promise.resolve(new O_(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i(On.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class C1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B_{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fr(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){ge(this.o===void 0,3512);const n=S=>{S.error!=null&&Xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${S.error.message}`);const s=S.token!==this.m;return this.m=S.token,Xt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?i(S.token):Promise.resolve()};this.o=S=>{t.enqueueRetryable((()=>n(S)))};const v=S=>{Xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=S,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((S=>v(S))),setTimeout((()=>{if(!this.appCheck){const S=this.V.getImmediate({optional:!0});S?v(S):Xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new C1(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(ge(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new C1(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class U_{getToken(){return Promise.resolve(new C1(""))}invalidateToken(){}start(t,i){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(f){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(f);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let n=0;n<f;n++)i[n]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const v=V_(40);for(let S=0;S<v.length;++S)n.length<20&&v[S]<i&&(n+=t.charAt(v[S]%62))}return n}}function Le(f,t){return f<t?-1:f>t?1:0}function M1(f,t){const i=Math.min(f.length,t.length);for(let n=0;n<i;n++){const v=f.charAt(n),S=t.charAt(n);if(v!==S)return Bx(v)===Bx(S)?Le(v,S):Bx(v)?1:-1}return Le(f.length,t.length)}const z_=55296,G_=57343;function Bx(f){const t=f.charCodeAt(0);return t>=z_&&t<=G_}function Kc(f,t,i){return f.length===t.length&&f.every(((n,v)=>i(n,t[v])))}function gb(f){return f+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="__name__";class aa{constructor(t,i,n){i===void 0?i=0:i>t.length&&ce(637,{offset:i,range:t.length}),n===void 0?n=t.length-i:n>t.length-i&&ce(1746,{length:n,range:t.length-i}),this.segments=t,this.offset=i,this.len=n}get length(){return this.len}isEqual(t){return aa.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof aa?t.forEach((n=>{i.push(n)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,n=this.limit();i<n;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const n=Math.min(t.length,i.length);for(let v=0;v<n;v++){const S=aa.compareSegments(t.get(v),i.get(v));if(S!==0)return S}return Le(t.length,i.length)}static compareSegments(t,i){const n=aa.isNumericId(t),v=aa.isNumericId(i);return n&&!v?-1:!n&&v?1:n&&v?aa.extractNumericId(t).compare(aa.extractNumericId(i)):M1(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return dl.fromString(t.substring(4,t.length-2))}}class Ye extends aa{construct(t,i,n){return new Ye(t,i,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const n of t){if(n.indexOf("//")>=0)throw new Gt(Rt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);i.push(...n.split("/").filter((v=>v.length>0)))}return new Ye(i)}static emptyPath(){return new Ye([])}}const __=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bi extends aa{construct(t,i,n){return new Bi(t,i,n)}static isValidIdentifier(t){return __.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===R1}static keyField(){return new Bi([R1])}static fromServerFormat(t){const i=[];let n="",v=0;const S=()=>{if(n.length===0)throw new Gt(Rt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(n),n=""};let s=!1;for(;v<t.length;){const T=t[v];if(T==="\\"){if(v+1===t.length)throw new Gt(Rt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[v+1];if(e!=="\\"&&e!=="."&&e!=="`")throw new Gt(Rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,v+=2}else T==="`"?(s=!s,v++):T!=="."||s?(n+=T,v++):(S(),v++)}if(S(),s)throw new Gt(Rt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Bi(i)}static emptyPath(){return new Bi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.path=t}static fromPath(t){return new qt(Ye.fromString(t))}static fromName(t){return new qt(Ye.fromString(t).popFirst(5))}static empty(){return new qt(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ye.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return Ye.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new qt(new Ye(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(f,t,i){if(!i)throw new Gt(Rt.INVALID_ARGUMENT,`Function ${f}() cannot be called with an empty ${t}.`)}function xb(f,t,i,n){if(t===!0&&n===!0)throw new Gt(Rt.INVALID_ARGUMENT,`${f} and ${i} cannot be used together.`)}function rA(f){if(!qt.isDocumentKey(f))throw new Gt(Rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${f} has ${f.length}.`)}function aA(f){if(qt.isDocumentKey(f))throw new Gt(Rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${f} has ${f.length}.`)}function yb(f){return typeof f=="object"&&f!==null&&(Object.getPrototypeOf(f)===Object.prototype||Object.getPrototypeOf(f)===null)}function t0(f){if(f===void 0)return"undefined";if(f===null)return"null";if(typeof f=="string")return f.length>20&&(f=`${f.substring(0,20)}...`),JSON.stringify(f);if(typeof f=="number"||typeof f=="boolean")return""+f;if(typeof f=="object"){if(f instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(f);return t?`a custom ${t} object`:"an object"}}return typeof f=="function"?"a function":ce(12329,{type:typeof f})}function $e(f,t){if("_delegate"in f&&(f=f._delegate),!(f instanceof t)){if(t.name===f.constructor.name)throw new Gt(Rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=t0(f);throw new Gt(Rt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return f}function Tb(f,t){if(t<=0)throw new Gt(Rt.INVALID_ARGUMENT,`Function ${f}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(f,t){const i={typeString:f};return t&&(i.value=t),i}function hu(f,t){if(!yb(f))throw new Gt(Rt.INVALID_ARGUMENT,"JSON must be an object");let i;for(const n in t)if(t[n]){const v=t[n].typeString,S="value"in t[n]?{value:t[n].value}:void 0;if(!(n in f)){i=`JSON missing required field: '${n}'`;break}const s=f[n];if(v&&typeof s!==v){i=`JSON field '${n}' must be a ${v}.`;break}if(S!==void 0&&s!==S.value){i=`Expected '${n}' field to equal '${S.value}'`;break}}if(i)throw new Gt(Rt.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=-62135596800,lA=1e6;class gi{static now(){return gi.fromMillis(Date.now())}static fromDate(t){return gi.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),n=Math.floor((t-1e3*i)*lA);return new gi(i,n)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new Gt(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Gt(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<oA)throw new Gt(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gt(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lA}_compareTo(t){return this.seconds===t.seconds?Le(this.nanoseconds,t.nanoseconds):Le(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(hu(t,gi._jsonSchema))return new gi(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-oA;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gi._jsonSchemaVersion="firestore/timestamp/1.0",gi._jsonSchema={type:xn("string",gi._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(t){return new Te(t)}static min(){return new Te(new gi(0,0))}static max(){return new Te(new gi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=-1;class Qc{constructor(t,i,n,v){this.indexId=t,this.collectionGroup=i,this.fields=n,this.indexState=v}}function P1(f){return f.fields.find((t=>t.kind===2))}function lh(f){return f.fields.filter((t=>t.kind!==2))}function W_(f,t){let i=Le(f.collectionGroup,t.collectionGroup);if(i!==0)return i;for(let n=0;n<Math.min(f.fields.length,t.fields.length);++n)if(i=H_(f.fields[n],t.fields[n]),i!==0)return i;return Le(f.fields.length,t.fields.length)}Qc.UNKNOWN_ID=-1;class Vh{constructor(t,i){this.fieldPath=t,this.kind=i}}function H_(f,t){const i=Bi.comparator(f.fieldPath,t.fieldPath);return i!==0?i:Le(f.kind,t.kind)}class Zc{constructor(t,i){this.sequenceNumber=t,this.offset=i}static empty(){return new Zc(0,tr.min())}}function Eb(f,t){const i=f.toTimestamp().seconds,n=f.toTimestamp().nanoseconds+1,v=Te.fromTimestamp(n===1e9?new gi(i+1,0):new gi(i,n));return new tr(v,qt.empty(),t)}function Sb(f){return new tr(f.readTime,f.key,jc)}class tr{constructor(t,i,n){this.readTime=t,this.documentKey=i,this.largestBatchId=n}static min(){return new tr(Te.min(),qt.empty(),jc)}static max(){return new tr(Te.max(),qt.empty(),jc)}}function tE(f,t){let i=f.readTime.compareTo(t.readTime);return i!==0?i:(i=qt.comparator(f.documentKey,t.documentKey),i!==0?i:Le(f.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ab{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(f){if(f.code!==Rt.FAILED_PRECONDITION||f.message!==wb)throw f;Xt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Et(((n,v)=>{this.nextCallback=S=>{this.wrapSuccess(t,S).next(n,v)},this.catchCallback=S=>{this.wrapFailure(i,S).next(n,v)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof Et?i:Et.resolve(i)}catch(i){return Et.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):Et.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):Et.reject(i)}static resolve(t){return new Et(((i,n)=>{i(t)}))}static reject(t){return new Et(((i,n)=>{n(t)}))}static waitFor(t){return new Et(((i,n)=>{let v=0,S=0,s=!1;t.forEach((T=>{++v,T.next((()=>{++S,s&&S===v&&i()}),(e=>n(e)))})),s=!0,S===v&&i()}))}static or(t){let i=Et.resolve(!1);for(const n of t)i=i.next((v=>v?Et.resolve(v):n()));return i}static forEach(t,i){const n=[];return t.forEach(((v,S)=>{n.push(i.call(this,v,S))})),this.waitFor(n)}static mapArray(t,i){return new Et(((n,v)=>{const S=t.length,s=new Array(S);let T=0;for(let e=0;e<S;e++){const a=e;i(t[a]).next((m=>{s[a]=m,++T,T===S&&n(s)}),(m=>v(m)))}}))}static doWhile(t,i){return new Et(((n,v)=>{const S=()=>{t()===!0?i().next((()=>{S()}),v):n()};S()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="SimpleDb";class e0{static open(t,i,n,v){try{return new e0(i,t.transaction(v,n))}catch(S){throw new Hd(i,S)}}constructor(t,i){this.action=t,this.transaction=i,this.aborted=!1,this.S=new Bn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{i.error?this.S.reject(new Hd(t,i.error)):this.S.resolve()},this.transaction.onerror=n=>{const v=eE(n.target.error);this.S.reject(new Hd(t,v))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(Xt(Ws,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const i=this.transaction.objectStore(t);return new k_(i)}}class Ea{static delete(t){return Xt(Ws,"Removing database:",t),dh(YP().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!jT())return!1;if(Ea.F())return!0;const t=Rn(),i=Ea.M(t),n=0<i&&i<10,v=Cb(t),S=0<v&&v<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||S)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,i){return t.store(i)}static M(t){const i=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(t,i,n){this.name=t,this.version=i,this.N=n,this.B=null,Ea.M(Rn())===12.2&&an("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(Xt(Ws,"Opening database:",this.name),this.db=await new Promise(((i,n)=>{const v=indexedDB.open(this.name,this.version);v.onsuccess=S=>{const s=S.target.result;i(s)},v.onblocked=()=>{n(new Hd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=S=>{const s=S.target.error;s.name==="VersionError"?n(new Gt(Rt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new Gt(Rt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Hd(t,s))},v.onupgradeneeded=S=>{Xt(Ws,'Database "'+this.name+'" requires upgrade from version:',S.oldVersion);const s=S.target.result;this.N.k(s,v.transaction,S.oldVersion,this.version).next((()=>{Xt(Ws,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=i=>this.K(i)),this.db}q(t){this.K=t,this.db&&(this.db.onversionchange=i=>t(i))}async runTransaction(t,i,n,v){const S=i==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(t);const T=e0.open(this.db,t,S?"readonly":"readwrite",n),e=v(T).next((a=>(T.C(),a))).catch((a=>(T.abort(a),Et.reject(a)))).toPromise();return e.catch((()=>{})),await T.D,e}catch(T){const e=T,a=e.name!=="FirebaseError"&&s<3;if(Xt(Ws,"Transaction failed with error:",e.message,"Retrying:",a),this.close(),!a)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Cb(f){const t=f.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}class X_{constructor(t){this.U=t,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(t){this.U=t}done(){this.$=!0}j(t){this.W=t}delete(){return dh(this.U.delete())}}class Hd extends Gt{constructor(t,i){super(Rt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function Fl(f){return f.name==="IndexedDbTransactionError"}class k_{constructor(t){this.store=t}put(t,i){let n;return i!==void 0?(Xt(Ws,"PUT",this.store.name,t,i),n=this.store.put(i,t)):(Xt(Ws,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),dh(n)}add(t){return Xt(Ws,"ADD",this.store.name,t,t),dh(this.store.add(t))}get(t){return dh(this.store.get(t)).next((i=>(i===void 0&&(i=null),Xt(Ws,"GET",this.store.name,t,i),i)))}delete(t){return Xt(Ws,"DELETE",this.store.name,t),dh(this.store.delete(t))}count(){return Xt(Ws,"COUNT",this.store.name),dh(this.store.count())}H(t,i){const n=this.options(t,i),v=n.index?this.store.index(n.index):this.store;if(typeof v.getAll=="function"){const S=v.getAll(n.range);return new Et(((s,T)=>{S.onerror=e=>{T(e.target.error)},S.onsuccess=e=>{s(e.target.result)}}))}{const S=this.cursor(n),s=[];return this.J(S,((T,e)=>{s.push(e)})).next((()=>s))}}Z(t,i){const n=this.store.getAll(t,i===null?void 0:i);return new Et(((v,S)=>{n.onerror=s=>{S(s.target.error)},n.onsuccess=s=>{v(s.target.result)}}))}X(t,i){Xt(Ws,"DELETE ALL",this.store.name);const n=this.options(t,i);n.Y=!1;const v=this.cursor(n);return this.J(v,((S,s,T)=>T.delete()))}ee(t,i){let n;i?n=t:(n={},i=t);const v=this.cursor(n);return this.J(v,i)}te(t){const i=this.cursor({});return new Et(((n,v)=>{i.onerror=S=>{const s=eE(S.target.error);v(s)},i.onsuccess=S=>{const s=S.target.result;s?t(s.primaryKey,s.value).next((T=>{T?s.continue():n()})):n()}}))}J(t,i){const n=[];return new Et(((v,S)=>{t.onerror=s=>{S(s.target.error)},t.onsuccess=s=>{const T=s.target.result;if(!T)return void v();const e=new X_(T),a=i(T.primaryKey,T.value,e);if(a instanceof Et){const m=a.catch((c=>(e.done(),Et.reject(c))));n.push(m)}e.isDone?v():e.G===null?T.continue():T.continue(e.G)}})).next((()=>Et.waitFor(n)))}options(t,i){let n;return t!==void 0&&(typeof t=="string"?n=t:i=t),{index:n,range:i}}cursor(t){let i="next";if(t.reverse&&(i="prev"),t.index){const n=this.store.index(t.index);return t.Y?n.openKeyCursor(t.range,i):n.openCursor(t.range,i)}return this.store.openCursor(t.range,i)}}function dh(f){return new Et(((t,i)=>{f.onsuccess=n=>{const v=n.target.result;t(v)},f.onerror=n=>{const v=eE(n.target.error);i(v)}}))}let hA=!1;function eE(f){const t=Ea.M(Rn());if(t>=12.2&&t<13){const i="An internal error was encountered in the Indexed Database server";if(f.message.indexOf(i)>=0){const n=new Gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hA||(hA=!0,setTimeout((()=>{throw n}),0)),n}}return f}const Xd="IndexBackfiller";class Y_{constructor(t,i){this.asyncQueue=t,this.ne=i,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){Xt(Xd,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const i=await this.ne.ie();Xt(Xd,`Documents written: ${i}`)}catch(i){Fl(i)?Xt(Xd,"Ignoring IndexedDB error during index backfill: ",i):await Ll(i)}await this.re(6e4)}))}}class $_{constructor(t,i){this.localStore=t,this.persistence=i}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(i=>this.se(i,t)))}se(t,i){const n=new Set;let v=i,S=!0;return Et.doWhile((()=>S===!0&&v>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((s=>{if(s!==null&&!n.has(s))return Xt(Xd,`Processing collection: ${s}`),this.oe(t,s,v).next((T=>{v-=T,n.add(s)}));S=!1})))).next((()=>i-v))}oe(t,i,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,i).next((v=>this.localStore.localDocuments.getNextDocuments(t,i,v,n).next((S=>{const s=S.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next((()=>this._e(v,S))).next((T=>(Xt(Xd,`Updating offset: ${T}`),this.localStore.indexManager.updateCollectionGroup(t,i,T)))).next((()=>s.size))}))))}_e(t,i){let n=t;return i.changes.forEach(((v,S)=>{const s=Sb(S);tE(s,n)>0&&(n=s)})),new tr(n.readTime,n.documentKey,Math.max(i.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>i.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ws.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function Xp(f){return f==null}function fp(f){return f===0&&1/f==-1/0}function Mb(f){return typeof f=="number"&&Number.isInteger(f)&&!fp(f)&&f<=Number.MAX_SAFE_INTEGER&&f>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="";function os(f){let t="";for(let i=0;i<f.length;i++)t.length>0&&(t=uA(t)),t=K_(f.get(i),t);return uA(t)}function K_(f,t){let i=t;const n=f.length;for(let v=0;v<n;v++){const S=f.charAt(v);switch(S){case"\0":i+="";break;case dg:i+="";break;default:i+=S}}return i}function uA(f){return f+dg+""}function ma(f){const t=f.length;if(ge(t>=2,64408,{path:f}),t===2)return ge(f.charAt(0)===dg&&f.charAt(1)==="",56145,{path:f}),Ye.emptyPath();const i=t-2,n=[];let v="";for(let S=0;S<t;){const s=f.indexOf(dg,S);switch((s<0||s>i)&&ce(50515,{path:f}),f.charAt(s+1)){case"":const T=f.substring(S,s);let e;v.length===0?e=T:(v+=T,e=v,v=""),n.push(e);break;case"":v+=f.substring(S,s),v+="\0";break;case"":v+=f.substring(S,s+1);break;default:ce(61167,{path:f})}S=s+2}return new Ye(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="remoteDocuments",kp="owner",Yu="owner",dp="mutationQueues",j_="userId",Dr="mutations",cA="batchId",Sh="userMutationsIndex",fA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(f,t){return[f,os(t)]}function Rb(f,t,i){return[f,os(t),i]}const Q_={},Jc="documentMutations",pg="remoteDocumentsV14",Z_=["prefixPath","collectionGroup","readTime","documentId"],Bm="documentKeyIndex",J_=["prefixPath","collectionGroup","documentId"],Pb="collectionGroupIndex",q_=["collectionGroup","readTime","prefixPath","documentId"],pp="remoteDocumentGlobal",b1="remoteDocumentGlobalKey",qc="targets",bb="queryTargetsIndex",tW=["canonicalId","targetId"],tf="targetDocuments",eW=["targetId","path"],iE="documentTargetsIndex",iW=["path","targetId"],vg="targetGlobalKey",zh="targetGlobal",vp="collectionParents",nW=["collectionId","parent"],ef="clientMetadata",sW="clientId",i0="bundles",rW="bundleId",n0="namedQueries",aW="name",nE="indexConfiguration",oW="indexId",I1="collectionGroupIndex",lW="collectionGroup",kd="indexState",hW=["indexId","uid"],Ib="sequenceNumberIndex",uW=["uid","sequenceNumber"],Yd="indexEntries",cW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lb="documentKeyIndex",fW=["indexId","uid","orderedDocumentKey"],s0="documentOverlays",dW=["userId","collectionPath","documentId"],L1="collectionPathOverlayIndex",pW=["userId","collectionPath","largestBatchId"],Fb="collectionGroupOverlayIndex",vW=["userId","collectionGroup","largestBatchId"],sE="globals",mW="name",Db=[dp,Dr,Jc,hh,qc,kp,zh,tf,ef,pp,vp,i0,n0],gW=[...Db,s0],Ob=[dp,Dr,Jc,pg,qc,kp,zh,tf,ef,pp,vp,i0,n0,s0],Nb=Ob,rE=[...Nb,nE,kd,Yd],xW=rE,Bb=[...rE,sE],yW=Bb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1 extends Ab{constructor(t,i){super(),this.le=t,this.currentSequenceNumber=i}}function bn(f,t){const i=ie(f);return Ea.O(i.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(f){let t=0;for(const i in f)Object.prototype.hasOwnProperty.call(f,i)&&t++;return t}function Dl(f,t){for(const i in f)Object.prototype.hasOwnProperty.call(f,i)&&t(i,f[i])}function Ub(f,t){const i=[];for(const n in f)Object.prototype.hasOwnProperty.call(f,n)&&i.push(t(f[n],n,f));return i}function Vb(f){for(const t in f)if(Object.prototype.hasOwnProperty.call(f,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t,i){this.comparator=t,this.root=i||Xn.EMPTY}insert(t,i){return new Fi(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(t){return new Fi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const n=this.comparator(t,i.key);if(n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}indexOf(t){let i=0,n=this.root;for(;!n.isEmpty();){const v=this.comparator(t,n.key);if(v===0)return i+n.left.size;v<0?n=n.left:(i+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,n)=>(t(i,n),!1)))}toString(){const t=[];return this.inorderTraversal(((i,n)=>(t.push(`${i}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fm(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fm(this.root,t,this.comparator,!1)}getReverseIterator(){return new fm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fm(this.root,t,this.comparator,!0)}}class fm{constructor(t,i,n,v){this.isReverse=v,this.nodeStack=[];let S=1;for(;!t.isEmpty();)if(S=i?n(t.key,i):1,i&&v&&(S*=-1),S<0)t=this.isReverse?t.left:t.right;else{if(S===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xn{constructor(t,i,n,v,S){this.key=t,this.value=i,this.color=n??Xn.RED,this.left=v??Xn.EMPTY,this.right=S??Xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,n,v,S){return new Xn(t??this.key,i??this.value,n??this.color,v??this.left,S??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,n){let v=this;const S=n(t,v.key);return v=S<0?v.copy(null,null,null,v.left.insert(t,i,n),null):S===0?v.copy(null,i,null,null,null):v.copy(null,null,null,null,v.right.insert(t,i,n)),v.fixUp()}removeMin(){if(this.left.isEmpty())return Xn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let n,v=this;if(i(t,v.key)<0)v.left.isEmpty()||v.left.isRed()||v.left.left.isRed()||(v=v.moveRedLeft()),v=v.copy(null,null,null,v.left.remove(t,i),null);else{if(v.left.isRed()&&(v=v.rotateRight()),v.right.isEmpty()||v.right.isRed()||v.right.left.isRed()||(v=v.moveRedRight()),i(t,v.key)===0){if(v.right.isEmpty())return Xn.EMPTY;n=v.right.min(),v=v.copy(n.key,n.value,null,null,v.right.removeMin())}v=v.copy(null,null,null,null,v.right.remove(t,i))}return v.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ce(27949);return t+(this.isRed()?0:1)}}Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(t,i,n,v,S){return this}insert(t,i,n){return new Xn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t){this.comparator=t,this.data=new Fi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,n)=>(t(i),!1)))}forEachInRange(t,i){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const v=n.getNext();if(this.comparator(v.key,t[1])>=0)return;i(v.key)}}forEachWhile(t,i){let n;for(n=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new pA(this.data.getIterator())}getIteratorFrom(t){return new pA(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((n=>{i=i.add(n)})),i}isEqual(t){if(!(t instanceof Ai)||this.size!==t.size)return!1;const i=this.data.getIterator(),n=t.data.getIterator();for(;i.hasNext();){const v=i.getNext().key,S=n.getNext().key;if(this.comparator(v,S)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new Ai(this.comparator);return i.data=t,i}}class pA{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $u(f){return f.hasNext()?f.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(t){this.fields=t,t.sort(Bi.comparator)}static empty(){return new As([])}unionWith(t){let i=new Ai(Bi.comparator);for(const n of this.fields)i=i.add(n);for(const n of t)i=i.add(n);return new As(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Kc(this.fields,t.fields,((i,n)=>i.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(v){try{return atob(v)}catch(S){throw typeof DOMException<"u"&&S instanceof DOMException?new zb("Invalid base64 string: "+S):S}})(t);return new Qi(i)}static fromUint8Array(t){const i=(function(v){let S="";for(let s=0;s<v.length;++s)S+=String.fromCharCode(v[s]);return S})(t);return new Qi(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const n=new Uint8Array(i.length);for(let v=0;v<i.length;v++)n[v]=i.charCodeAt(v);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Le(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qi.EMPTY_BYTE_STRING=new Qi("");const EW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(f){if(ge(!!f,39018),typeof f=="string"){let t=0;const i=EW.exec(f);if(ge(!!i,46558,{timestamp:f}),i[1]){let v=i[1];v=(v+"000000000").substr(0,9),t=Number(v)}const n=new Date(f);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:_i(f.seconds),nanos:_i(f.nanos)}}function _i(f){return typeof f=="number"?f:typeof f=="string"?Number(f):0}function mo(f){return typeof f=="string"?Qi.fromBase64String(f):Qi.fromUint8Array(f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="server_timestamp",_b="__type__",Wb="__previous_value__",Hb="__local_write_time__";function r0(f){var i,n;return((n=(((i=f==null?void 0:f.mapValue)==null?void 0:i.fields)||{})[_b])==null?void 0:n.stringValue)===Gb}function a0(f){const t=f.mapValue.fields[Wb];return r0(t)?a0(t):t}function mp(f){const t=vo(f.mapValue.fields[Hb].timestampValue);return new gi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(t,i,n,v,S,s,T,e,a,m,c){this.databaseId=t,this.appId=i,this.persistenceKey=n,this.host=v,this.ssl=S,this.forceLongPolling=s,this.autoDetectLongPolling=T,this.longPollingOptions=e,this.useFetchStreams=a,this.isUsingEmulator=m,this.apiKey=c}}const gp="(default)";class Sl{constructor(t,i){this.projectId=t,this.database=i||gp}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database===gp}isEqual(t){return t instanceof Sl&&t.projectId===this.projectId&&t.database===this.database}}function wW(f,t){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Gt(Rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(f.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="__type__",Xb="__max__",il={mapValue:{fields:{__type__:{stringValue:Xb}}}},oE="__vector__",nf="value",Um={nullValue:"NULL_VALUE"};function wl(f){return"nullValue"in f?0:"booleanValue"in f?1:"integerValue"in f||"doubleValue"in f?2:"timestampValue"in f?3:"stringValue"in f?5:"bytesValue"in f?6:"referenceValue"in f?7:"geoPointValue"in f?8:"arrayValue"in f?9:"mapValue"in f?r0(f)?4:kb(f)?9007199254740991:o0(f)?10:11:ce(28295,{value:f})}function Pa(f,t){if(f===t)return!0;const i=wl(f);if(i!==wl(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return f.booleanValue===t.booleanValue;case 4:return mp(f).isEqual(mp(t));case 3:return(function(v,S){if(typeof v.timestampValue=="string"&&typeof S.timestampValue=="string"&&v.timestampValue.length===S.timestampValue.length)return v.timestampValue===S.timestampValue;const s=vo(v.timestampValue),T=vo(S.timestampValue);return s.seconds===T.seconds&&s.nanos===T.nanos})(f,t);case 5:return f.stringValue===t.stringValue;case 6:return(function(v,S){return mo(v.bytesValue).isEqual(mo(S.bytesValue))})(f,t);case 7:return f.referenceValue===t.referenceValue;case 8:return(function(v,S){return _i(v.geoPointValue.latitude)===_i(S.geoPointValue.latitude)&&_i(v.geoPointValue.longitude)===_i(S.geoPointValue.longitude)})(f,t);case 2:return(function(v,S){if("integerValue"in v&&"integerValue"in S)return _i(v.integerValue)===_i(S.integerValue);if("doubleValue"in v&&"doubleValue"in S){const s=_i(v.doubleValue),T=_i(S.doubleValue);return s===T?fp(s)===fp(T):isNaN(s)&&isNaN(T)}return!1})(f,t);case 9:return Kc(f.arrayValue.values||[],t.arrayValue.values||[],Pa);case 10:case 11:return(function(v,S){const s=v.mapValue.fields||{},T=S.mapValue.fields||{};if(dA(s)!==dA(T))return!1;for(const e in s)if(s.hasOwnProperty(e)&&(T[e]===void 0||!Pa(s[e],T[e])))return!1;return!0})(f,t);default:return ce(52216,{left:f})}}function xp(f,t){return(f.values||[]).find((i=>Pa(i,t)))!==void 0}function Al(f,t){if(f===t)return 0;const i=wl(f),n=wl(t);if(i!==n)return Le(i,n);switch(i){case 0:case 9007199254740991:return 0;case 1:return Le(f.booleanValue,t.booleanValue);case 2:return(function(S,s){const T=_i(S.integerValue||S.doubleValue),e=_i(s.integerValue||s.doubleValue);return T<e?-1:T>e?1:T===e?0:isNaN(T)?isNaN(e)?0:-1:1})(f,t);case 3:return vA(f.timestampValue,t.timestampValue);case 4:return vA(mp(f),mp(t));case 5:return M1(f.stringValue,t.stringValue);case 6:return(function(S,s){const T=mo(S),e=mo(s);return T.compareTo(e)})(f.bytesValue,t.bytesValue);case 7:return(function(S,s){const T=S.split("/"),e=s.split("/");for(let a=0;a<T.length&&a<e.length;a++){const m=Le(T[a],e[a]);if(m!==0)return m}return Le(T.length,e.length)})(f.referenceValue,t.referenceValue);case 8:return(function(S,s){const T=Le(_i(S.latitude),_i(s.latitude));return T!==0?T:Le(_i(S.longitude),_i(s.longitude))})(f.geoPointValue,t.geoPointValue);case 9:return mA(f.arrayValue,t.arrayValue);case 10:return(function(S,s){var o,u,r,h;const T=S.fields||{},e=s.fields||{},a=(o=T[nf])==null?void 0:o.arrayValue,m=(u=e[nf])==null?void 0:u.arrayValue,c=Le(((r=a==null?void 0:a.values)==null?void 0:r.length)||0,((h=m==null?void 0:m.values)==null?void 0:h.length)||0);return c!==0?c:mA(a,m)})(f.mapValue,t.mapValue);case 11:return(function(S,s){if(S===il.mapValue&&s===il.mapValue)return 0;if(S===il.mapValue)return 1;if(s===il.mapValue)return-1;const T=S.fields||{},e=Object.keys(T),a=s.fields||{},m=Object.keys(a);e.sort(),m.sort();for(let c=0;c<e.length&&c<m.length;++c){const o=M1(e[c],m[c]);if(o!==0)return o;const u=Al(T[e[c]],a[m[c]]);if(u!==0)return u}return Le(e.length,m.length)})(f.mapValue,t.mapValue);default:throw ce(23264,{he:i})}}function vA(f,t){if(typeof f=="string"&&typeof t=="string"&&f.length===t.length)return Le(f,t);const i=vo(f),n=vo(t),v=Le(i.seconds,n.seconds);return v!==0?v:Le(i.nanos,n.nanos)}function mA(f,t){const i=f.values||[],n=t.values||[];for(let v=0;v<i.length&&v<n.length;++v){const S=Al(i[v],n[v]);if(S)return S}return Le(i.length,n.length)}function sf(f){return D1(f)}function D1(f){return"nullValue"in f?"null":"booleanValue"in f?""+f.booleanValue:"integerValue"in f?""+f.integerValue:"doubleValue"in f?""+f.doubleValue:"timestampValue"in f?(function(i){const n=vo(i);return`time(${n.seconds},${n.nanos})`})(f.timestampValue):"stringValue"in f?f.stringValue:"bytesValue"in f?(function(i){return mo(i).toBase64()})(f.bytesValue):"referenceValue"in f?(function(i){return qt.fromName(i).toString()})(f.referenceValue):"geoPointValue"in f?(function(i){return`geo(${i.latitude},${i.longitude})`})(f.geoPointValue):"arrayValue"in f?(function(i){let n="[",v=!0;for(const S of i.values||[])v?v=!1:n+=",",n+=D1(S);return n+"]"})(f.arrayValue):"mapValue"in f?(function(i){const n=Object.keys(i.fields||{}).sort();let v="{",S=!0;for(const s of n)S?S=!1:v+=",",v+=`${s}:${D1(i.fields[s])}`;return v+"}"})(f.mapValue):ce(61005,{value:f})}function Vm(f){switch(wl(f)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=a0(f);return t?16+Vm(t):16;case 5:return 2*f.stringValue.length;case 6:return mo(f.bytesValue).approximateByteSize();case 7:return f.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((v,S)=>v+Vm(S)),0)})(f.arrayValue);case 10:case 11:return(function(n){let v=0;return Dl(n.fields,((S,s)=>{v+=S.length+Vm(s)})),v})(f.mapValue);default:throw ce(13486,{value:f})}}function kh(f,t){return{referenceValue:`projects/${f.projectId}/databases/${f.database}/documents/${t.path.canonicalString()}`}}function O1(f){return!!f&&"integerValue"in f}function yp(f){return!!f&&"arrayValue"in f}function gA(f){return!!f&&"nullValue"in f}function xA(f){return!!f&&"doubleValue"in f&&isNaN(Number(f.doubleValue))}function zm(f){return!!f&&"mapValue"in f}function o0(f){var i,n;return((n=(((i=f==null?void 0:f.mapValue)==null?void 0:i.fields)||{})[aE])==null?void 0:n.stringValue)===oE}function $d(f){if(f.geoPointValue)return{geoPointValue:{...f.geoPointValue}};if(f.timestampValue&&typeof f.timestampValue=="object")return{timestampValue:{...f.timestampValue}};if(f.mapValue){const t={mapValue:{fields:{}}};return Dl(f.mapValue.fields,((i,n)=>t.mapValue.fields[i]=$d(n))),t}if(f.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(f.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=$d(f.arrayValue.values[i]);return t}return{...f}}function kb(f){return(((f.mapValue||{}).fields||{}).__type__||{}).stringValue===Xb}const Yb={mapValue:{fields:{[aE]:{stringValue:oE},[nf]:{arrayValue:{}}}}};function AW(f){return"nullValue"in f?Um:"booleanValue"in f?{booleanValue:!1}:"integerValue"in f||"doubleValue"in f?{doubleValue:NaN}:"timestampValue"in f?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in f?{stringValue:""}:"bytesValue"in f?{bytesValue:""}:"referenceValue"in f?kh(Sl.empty(),qt.empty()):"geoPointValue"in f?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in f?{arrayValue:{}}:"mapValue"in f?o0(f)?Yb:{mapValue:{}}:ce(35942,{value:f})}function CW(f){return"nullValue"in f?{booleanValue:!1}:"booleanValue"in f?{doubleValue:NaN}:"integerValue"in f||"doubleValue"in f?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in f?{stringValue:""}:"stringValue"in f?{bytesValue:""}:"bytesValue"in f?kh(Sl.empty(),qt.empty()):"referenceValue"in f?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in f?{arrayValue:{}}:"arrayValue"in f?Yb:"mapValue"in f?o0(f)?{mapValue:{}}:il:ce(61959,{value:f})}function yA(f,t){const i=Al(f.value,t.value);return i!==0?i:f.inclusive&&!t.inclusive?-1:!f.inclusive&&t.inclusive?1:0}function TA(f,t){const i=Al(f.value,t.value);return i!==0?i:f.inclusive&&!t.inclusive?1:!f.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t){this.value=t}static empty(){return new Nn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let n=0;n<t.length-1;++n)if(i=(i.mapValue.fields||{})[t.get(n)],!zm(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=$d(i)}setAll(t){let i=Bi.emptyPath(),n={},v=[];t.forEach(((s,T)=>{if(!i.isImmediateParentOf(T)){const e=this.getFieldsMap(i);this.applyChanges(e,n,v),n={},v=[],i=T.popLast()}s?n[T.lastSegment()]=$d(s):v.push(T.lastSegment())}));const S=this.getFieldsMap(i);this.applyChanges(S,n,v)}delete(t){const i=this.field(t.popLast());zm(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Pa(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let n=0;n<t.length;++n){let v=i.mapValue.fields[t.get(n)];zm(v)&&v.mapValue.fields||(v={mapValue:{fields:{}}},i.mapValue.fields[t.get(n)]=v),i=v}return i.mapValue.fields}applyChanges(t,i,n){Dl(i,((v,S)=>t[v]=S));for(const v of n)delete t[v]}clone(){return new Nn($d(this.value))}}function $b(f){const t=[];return Dl(f.fields,((i,n)=>{const v=new Bi([i]);if(zm(n)){const S=$b(n.mapValue).fields;if(S.length===0)t.push(v);else for(const s of S)t.push(v.child(s))}else t.push(v)})),new As(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t,i,n,v,S,s,T){this.key=t,this.documentType=i,this.version=n,this.readTime=v,this.createTime=S,this.data=s,this.documentState=T}static newInvalidDocument(t){return new Ni(t,0,Te.min(),Te.min(),Te.min(),Nn.empty(),0)}static newFoundDocument(t,i,n,v){return new Ni(t,1,i,Te.min(),n,v,0)}static newNoDocument(t,i){return new Ni(t,2,i,Te.min(),Te.min(),Nn.empty(),0)}static newUnknownDocument(t,i){return new Ni(t,3,i,Te.min(),Te.min(),Nn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ni&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ni(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(t,i){this.position=t,this.inclusive=i}}function EA(f,t,i){let n=0;for(let v=0;v<f.position.length;v++){const S=t[v],s=f.position[v];if(S.field.isKeyField()?n=qt.comparator(qt.fromName(s.referenceValue),i.key):n=Al(s,i.data.field(S.field)),S.dir==="desc"&&(n*=-1),n!==0)break}return n}function SA(f,t){if(f===null)return t===null;if(t===null||f.inclusive!==t.inclusive||f.position.length!==t.position.length)return!1;for(let i=0;i<f.position.length;i++)if(!Pa(f.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t,i="asc"){this.field=t,this.dir=i}}function MW(f,t){return f.dir===t.dir&&f.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{}class ii extends Kb{constructor(t,i,n){super(),this.field=t,this.op=i,this.value=n}static create(t,i,n){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,n):new RW(t,i,n):i==="array-contains"?new IW(t,n):i==="in"?new tI(t,n):i==="not-in"?new LW(t,n):i==="array-contains-any"?new FW(t,n):new ii(t,i,n)}static createKeyFieldInFilter(t,i,n){return i==="in"?new PW(t,n):new bW(t,n)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Al(i,this.value)):i!==null&&wl(this.value)===wl(i)&&this.matchesComparison(Al(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends Kb{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Si(t,i)}matches(t){return rf(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rf(f){return f.op==="and"}function N1(f){return f.op==="or"}function lE(f){return jb(f)&&rf(f)}function jb(f){for(const t of f.filters)if(t instanceof Si)return!1;return!0}function B1(f){if(f instanceof ii)return f.field.canonicalString()+f.op.toString()+sf(f.value);if(lE(f))return f.filters.map((t=>B1(t))).join(",");{const t=f.filters.map((i=>B1(i))).join(",");return`${f.op}(${t})`}}function Qb(f,t){return f instanceof ii?(function(n,v){return v instanceof ii&&n.op===v.op&&n.field.isEqual(v.field)&&Pa(n.value,v.value)})(f,t):f instanceof Si?(function(n,v){return v instanceof Si&&n.op===v.op&&n.filters.length===v.filters.length?n.filters.reduce(((S,s,T)=>S&&Qb(s,v.filters[T])),!0):!1})(f,t):void ce(19439)}function Zb(f,t){const i=f.filters.concat(t);return Si.create(i,f.op)}function Jb(f){return f instanceof ii?(function(i){return`${i.field.canonicalString()} ${i.op} ${sf(i.value)}`})(f):f instanceof Si?(function(i){return i.op.toString()+" {"+i.getFilters().map(Jb).join(" ,")+"}"})(f):"Filter"}class RW extends ii{constructor(t,i,n){super(t,i,n),this.key=qt.fromName(n.referenceValue)}matches(t){const i=qt.comparator(t.key,this.key);return this.matchesComparison(i)}}class PW extends ii{constructor(t,i){super(t,"in",i),this.keys=qb("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class bW extends ii{constructor(t,i){super(t,"not-in",i),this.keys=qb("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function qb(f,t){var i;return(((i=t.arrayValue)==null?void 0:i.values)||[]).map((n=>qt.fromName(n.referenceValue)))}class IW extends ii{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return yp(i)&&xp(i.arrayValue,this.value)}}class tI extends ii{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&xp(this.value.arrayValue,i)}}class LW extends ii{constructor(t,i){super(t,"not-in",i)}matches(t){if(xp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!xp(this.value.arrayValue,i)}}class FW extends ii{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!yp(i)||!i.arrayValue.values)&&i.arrayValue.values.some((n=>xp(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(t,i=null,n=[],v=[],S=null,s=null,T=null){this.path=t,this.collectionGroup=i,this.orderBy=n,this.filters=v,this.limit=S,this.startAt=s,this.endAt=T,this.Te=null}}function U1(f,t=null,i=[],n=[],v=null,S=null,s=null){return new DW(f,t,i,n,v,S,s)}function Yh(f){const t=ie(f);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((n=>B1(n))).join(","),i+="|ob:",i+=t.orderBy.map((n=>(function(S){return S.field.canonicalString()+S.dir})(n))).join(","),Xp(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((n=>sf(n))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((n=>sf(n))).join(",")),t.Te=i}return t.Te}function Yp(f,t){if(f.limit!==t.limit||f.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<f.orderBy.length;i++)if(!MW(f.orderBy[i],t.orderBy[i]))return!1;if(f.filters.length!==t.filters.length)return!1;for(let i=0;i<f.filters.length;i++)if(!Qb(f.filters[i],t.filters[i]))return!1;return f.collectionGroup===t.collectionGroup&&!!f.path.isEqual(t.path)&&!!SA(f.startAt,t.startAt)&&SA(f.endAt,t.endAt)}function mg(f){return qt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}function gg(f,t){return f.filters.filter((i=>i instanceof ii&&i.field.isEqual(t)))}function wA(f,t,i){let n=Um,v=!0;for(const S of gg(f,t)){let s=Um,T=!0;switch(S.op){case"<":case"<=":s=AW(S.value);break;case"==":case"in":case">=":s=S.value;break;case">":s=S.value,T=!1;break;case"!=":case"not-in":s=Um}yA({value:n,inclusive:v},{value:s,inclusive:T})<0&&(n=s,v=T)}if(i!==null){for(let S=0;S<f.orderBy.length;++S)if(f.orderBy[S].field.isEqual(t)){const s=i.position[S];yA({value:n,inclusive:v},{value:s,inclusive:i.inclusive})<0&&(n=s,v=i.inclusive);break}}return{value:n,inclusive:v}}function AA(f,t,i){let n=il,v=!0;for(const S of gg(f,t)){let s=il,T=!0;switch(S.op){case">=":case">":s=CW(S.value),T=!1;break;case"==":case"in":case"<=":s=S.value;break;case"<":s=S.value,T=!1;break;case"!=":case"not-in":s=il}TA({value:n,inclusive:v},{value:s,inclusive:T})>0&&(n=s,v=T)}if(i!==null){for(let S=0;S<f.orderBy.length;++S)if(f.orderBy[S].field.isEqual(t)){const s=i.position[S];TA({value:n,inclusive:v},{value:s,inclusive:i.inclusive})>0&&(n=s,v=i.inclusive);break}}return{value:n,inclusive:v}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(t,i=null,n=[],v=[],S=null,s="F",T=null,e=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=n,this.filters=v,this.limit=S,this.limitType=s,this.startAt=T,this.endAt=e,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function eI(f,t,i,n,v,S,s,T){return new So(f,t,i,n,v,S,s,T)}function Cf(f){return new So(f)}function CA(f){return f.filters.length===0&&f.limit===null&&f.startAt==null&&f.endAt==null&&(f.explicitOrderBy.length===0||f.explicitOrderBy.length===1&&f.explicitOrderBy[0].field.isKeyField())}function OW(f){return qt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}function hE(f){return f.collectionGroup!==null}function vc(f){const t=ie(f);if(t.Ie===null){t.Ie=[];const i=new Set;for(const S of t.explicitOrderBy)t.Ie.push(S),i.add(S.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let T=new Ai(Bi.comparator);return s.filters.forEach((e=>{e.getFlattenedFilters().forEach((a=>{a.isInequality()&&(T=T.add(a.field))}))})),T})(t).forEach((S=>{i.has(S.canonicalString())||S.isKeyField()||t.Ie.push(new Tp(S,n))})),i.has(Bi.keyField().canonicalString())||t.Ie.push(new Tp(Bi.keyField(),n))}return t.Ie}function ls(f){const t=ie(f);return t.Ee||(t.Ee=nI(t,vc(f))),t.Ee}function iI(f){const t=ie(f);return t.Re||(t.Re=nI(t,f.explicitOrderBy)),t.Re}function nI(f,t){if(f.limitType==="F")return U1(f.path,f.collectionGroup,t,f.filters,f.limit,f.startAt,f.endAt);{t=t.map((v=>{const S=v.dir==="desc"?"asc":"desc";return new Tp(v.field,S)}));const i=f.endAt?new Cl(f.endAt.position,f.endAt.inclusive):null,n=f.startAt?new Cl(f.startAt.position,f.startAt.inclusive):null;return U1(f.path,f.collectionGroup,t,f.filters,f.limit,i,n)}}function V1(f,t){const i=f.filters.concat([t]);return new So(f.path,f.collectionGroup,f.explicitOrderBy.slice(),i,f.limit,f.limitType,f.startAt,f.endAt)}function NW(f,t){const i=f.explicitOrderBy.concat([t]);return new So(f.path,f.collectionGroup,i,f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}function xg(f,t,i){return new So(f.path,f.collectionGroup,f.explicitOrderBy.slice(),f.filters.slice(),t,i,f.startAt,f.endAt)}function BW(f,t){return new So(f.path,f.collectionGroup,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,t,f.endAt)}function UW(f,t){return new So(f.path,f.collectionGroup,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,t)}function $p(f,t){return Yp(ls(f),ls(t))&&f.limitType===t.limitType}function sI(f){return`${Yh(ls(f))}|lt:${f.limitType}`}function tc(f){return`Query(target=${(function(i){let n=i.path.canonicalString();return i.collectionGroup!==null&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map((v=>Jb(v))).join(", ")}]`),Xp(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map((v=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(v))).join(", ")}]`),i.startAt&&(n+=", startAt: ",n+=i.startAt.inclusive?"b:":"a:",n+=i.startAt.position.map((v=>sf(v))).join(",")),i.endAt&&(n+=", endAt: ",n+=i.endAt.inclusive?"a:":"b:",n+=i.endAt.position.map((v=>sf(v))).join(",")),`Target(${n})`})(ls(f))}; limitType=${f.limitType})`}function Kp(f,t){return t.isFoundDocument()&&(function(n,v){const S=v.key.path;return n.collectionGroup!==null?v.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(S):qt.isDocumentKey(n.path)?n.path.isEqual(S):n.path.isImmediateParentOf(S)})(f,t)&&(function(n,v){for(const S of vc(n))if(!S.field.isKeyField()&&v.data.field(S.field)===null)return!1;return!0})(f,t)&&(function(n,v){for(const S of n.filters)if(!S.matches(v))return!1;return!0})(f,t)&&(function(n,v){return!(n.startAt&&!(function(s,T,e){const a=EA(s,T,e);return s.inclusive?a<=0:a<0})(n.startAt,vc(n),v)||n.endAt&&!(function(s,T,e){const a=EA(s,T,e);return s.inclusive?a>=0:a>0})(n.endAt,vc(n),v))})(f,t)}function rI(f){return f.collectionGroup||(f.path.length%2==1?f.path.lastSegment():f.path.get(f.path.length-2))}function aI(f){return(t,i)=>{let n=!1;for(const v of vc(f)){const S=VW(v,t,i);if(S!==0)return S;n=n||v.field.isKeyField()}return 0}}function VW(f,t,i){const n=f.field.isKeyField()?qt.comparator(t.key,i.key):(function(S,s,T){const e=s.data.field(S),a=T.data.field(S);return e!==null&&a!==null?Al(e,a):ce(42886)})(f.field,t,i);switch(f.dir){case"asc":return n;case"desc":return-1*n;default:return ce(19790,{direction:f.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),n=this.inner[i];if(n!==void 0){for(const[v,S]of n)if(this.equalsFn(v,t))return S}}has(t){return this.get(t)!==void 0}set(t,i){const n=this.mapKeyFn(t),v=this.inner[n];if(v===void 0)return this.inner[n]=[[t,i]],void this.innerSize++;for(let S=0;S<v.length;S++)if(this.equalsFn(v[S][0],t))return void(v[S]=[t,i]);v.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),n=this.inner[i];if(n===void 0)return!1;for(let v=0;v<n.length;v++)if(this.equalsFn(n[v][0],t))return n.length===1?delete this.inner[i]:n.splice(v,1),this.innerSize--,!0;return!1}forEach(t){Dl(this.inner,((i,n)=>{for(const[v,S]of n)t(v,S)}))}isEmpty(){return Vb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zW=new Fi(qt.comparator);function Cs(){return zW}const oI=new Fi(qt.comparator);function Fd(...f){let t=oI;for(const i of f)t=t.insert(i.key,i);return t}function lI(f){let t=oI;return f.forEach(((i,n)=>t=t.insert(i,n.overlayedDocument))),t}function ga(){return Kd()}function hI(){return Kd()}function Kd(){return new wo((f=>f.toString()),((f,t)=>f.isEqual(t)))}const GW=new Fi(qt.comparator),_W=new Ai(qt.comparator);function Ue(...f){let t=_W;for(const i of f)t=t.add(i);return t}const WW=new Ai(Le);function uE(){return WW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(f,t){if(f.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fp(t)?"-0":t}}function uI(f){return{integerValue:""+f}}function cI(f,t){return Mb(t)?uI(t):cE(f,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(){this._=void 0}}function HW(f,t,i){return f instanceof af?(function(v,S){const s={fields:{[_b]:{stringValue:Gb},[Hb]:{timestampValue:{seconds:v.seconds,nanos:v.nanoseconds}}}};return S&&r0(S)&&(S=a0(S)),S&&(s.fields[Wb]=S),{mapValue:s}})(i,t):f instanceof $h?dI(f,t):f instanceof Kh?pI(f,t):(function(v,S){const s=fI(v,S),T=MA(s)+MA(v.Ae);return O1(s)&&O1(v.Ae)?uI(T):cE(v.serializer,T)})(f,t)}function XW(f,t,i){return f instanceof $h?dI(f,t):f instanceof Kh?pI(f,t):i}function fI(f,t){return f instanceof of?(function(n){return O1(n)||(function(S){return!!S&&"doubleValue"in S})(n)})(t)?t:{integerValue:0}:null}class af extends l0{}class $h extends l0{constructor(t){super(),this.elements=t}}function dI(f,t){const i=vI(t);for(const n of f.elements)i.some((v=>Pa(v,n)))||i.push(n);return{arrayValue:{values:i}}}class Kh extends l0{constructor(t){super(),this.elements=t}}function pI(f,t){let i=vI(t);for(const n of f.elements)i=i.filter((v=>!Pa(v,n)));return{arrayValue:{values:i}}}class of extends l0{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function MA(f){return _i(f.integerValue||f.doubleValue)}function vI(f){return yp(f)&&f.arrayValue.values?f.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(t,i){this.field=t,this.transform=i}}function kW(f,t){return f.field.isEqual(t.field)&&(function(n,v){return n instanceof $h&&v instanceof $h||n instanceof Kh&&v instanceof Kh?Kc(n.elements,v.elements,Pa):n instanceof of&&v instanceof of?Pa(n.Ae,v.Ae):n instanceof af&&v instanceof af})(f.transform,t.transform)}class YW{constructor(t,i){this.version=t,this.transformResults=i}}class Hi{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Hi}static exists(t){return new Hi(void 0,t)}static updateTime(t){return new Hi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Gm(f,t){return f.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(f.updateTime):f.exists===void 0||f.exists===t.isFoundDocument()}class h0{}function mI(f,t){if(!f.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return f.isNoDocument()?new Rf(f.key,Hi.none()):new Mf(f.key,f.data,Hi.none());{const i=f.data,n=Nn.empty();let v=new Ai(Bi.comparator);for(let S of t.fields)if(!v.has(S)){let s=i.field(S);s===null&&S.length>1&&(S=S.popLast(),s=i.field(S)),s===null?n.delete(S):n.set(S,s),v=v.add(S)}return new Ao(f.key,n,new As(v.toArray()),Hi.none())}}function $W(f,t,i){f instanceof Mf?(function(v,S,s){const T=v.value.clone(),e=PA(v.fieldTransforms,S,s.transformResults);T.setAll(e),S.convertToFoundDocument(s.version,T).setHasCommittedMutations()})(f,t,i):f instanceof Ao?(function(v,S,s){if(!Gm(v.precondition,S))return void S.convertToUnknownDocument(s.version);const T=PA(v.fieldTransforms,S,s.transformResults),e=S.data;e.setAll(gI(v)),e.setAll(T),S.convertToFoundDocument(s.version,e).setHasCommittedMutations()})(f,t,i):(function(v,S,s){S.convertToNoDocument(s.version).setHasCommittedMutations()})(0,t,i)}function jd(f,t,i,n){return f instanceof Mf?(function(S,s,T,e){if(!Gm(S.precondition,s))return T;const a=S.value.clone(),m=bA(S.fieldTransforms,e,s);return a.setAll(m),s.convertToFoundDocument(s.version,a).setHasLocalMutations(),null})(f,t,i,n):f instanceof Ao?(function(S,s,T,e){if(!Gm(S.precondition,s))return T;const a=bA(S.fieldTransforms,e,s),m=s.data;return m.setAll(gI(S)),m.setAll(a),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),T===null?null:T.unionWith(S.fieldMask.fields).unionWith(S.fieldTransforms.map((c=>c.field)))})(f,t,i,n):(function(S,s,T){return Gm(S.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):T})(f,t,i)}function KW(f,t){let i=null;for(const n of f.fieldTransforms){const v=t.data.field(n.field),S=fI(n.transform,v||null);S!=null&&(i===null&&(i=Nn.empty()),i.set(n.field,S))}return i||null}function RA(f,t){return f.type===t.type&&!!f.key.isEqual(t.key)&&!!f.precondition.isEqual(t.precondition)&&!!(function(n,v){return n===void 0&&v===void 0||!(!n||!v)&&Kc(n,v,((S,s)=>kW(S,s)))})(f.fieldTransforms,t.fieldTransforms)&&(f.type===0?f.value.isEqual(t.value):f.type!==1||f.data.isEqual(t.data)&&f.fieldMask.isEqual(t.fieldMask))}class Mf extends h0{constructor(t,i,n,v=[]){super(),this.key=t,this.value=i,this.precondition=n,this.fieldTransforms=v,this.type=0}getFieldMask(){return null}}class Ao extends h0{constructor(t,i,n,v,S=[]){super(),this.key=t,this.data=i,this.fieldMask=n,this.precondition=v,this.fieldTransforms=S,this.type=1}getFieldMask(){return this.fieldMask}}function gI(f){const t=new Map;return f.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const n=f.data.field(i);t.set(i,n)}})),t}function PA(f,t,i){const n=new Map;ge(f.length===i.length,32656,{Ve:i.length,de:f.length});for(let v=0;v<i.length;v++){const S=f[v],s=S.transform,T=t.data.field(S.field);n.set(S.field,XW(s,T,i[v]))}return n}function bA(f,t,i){const n=new Map;for(const v of f){const S=v.transform,s=i.data.field(v.field);n.set(v.field,HW(S,s,t))}return n}class Rf extends h0{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fE extends h0{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t,i,n,v){this.batchId=t,this.localWriteTime=i,this.baseMutations=n,this.mutations=v}applyToRemoteDocument(t,i){const n=i.mutationResults;for(let v=0;v<this.mutations.length;v++){const S=this.mutations[v];S.key.isEqual(t.key)&&$W(S,t,n[v])}}applyToLocalView(t,i){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(i=jd(n,t,i,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(i=jd(n,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const n=hI();return this.mutations.forEach((v=>{const S=t.get(v.key),s=S.overlayedDocument;let T=this.applyToLocalView(s,S.mutatedFields);T=i.has(v.key)?null:T;const e=mI(s,T);e!==null&&n.set(v.key,e),s.isValidDocument()||s.convertToNoDocument(Te.min())})),n}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),Ue())}isEqual(t){return this.batchId===t.batchId&&Kc(this.mutations,t.mutations,((i,n)=>RA(i,n)))&&Kc(this.baseMutations,t.baseMutations,((i,n)=>RA(i,n)))}}class pE{constructor(t,i,n,v){this.batch=t,this.commitVersion=i,this.mutationResults=n,this.docVersions=v}static from(t,i,n){ge(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let v=(function(){return GW})();const S=t.mutations;for(let s=0;s<S.length;s++)v=v.insert(S[s].key,n[s].version);return new pE(t,i,n,v)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(t,i,n){this.alias=t,this.aggregateType=i,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,oi;function yI(f){switch(f){case Rt.OK:return ce(64938);case Rt.CANCELLED:case Rt.UNKNOWN:case Rt.DEADLINE_EXCEEDED:case Rt.RESOURCE_EXHAUSTED:case Rt.INTERNAL:case Rt.UNAVAILABLE:case Rt.UNAUTHENTICATED:return!1;case Rt.INVALID_ARGUMENT:case Rt.NOT_FOUND:case Rt.ALREADY_EXISTS:case Rt.PERMISSION_DENIED:case Rt.FAILED_PRECONDITION:case Rt.ABORTED:case Rt.OUT_OF_RANGE:case Rt.UNIMPLEMENTED:case Rt.DATA_LOSS:return!0;default:return ce(15467,{code:f})}}function TI(f){if(f===void 0)return an("GRPC error has no .code"),Rt.UNKNOWN;switch(f){case dn.OK:return Rt.OK;case dn.CANCELLED:return Rt.CANCELLED;case dn.UNKNOWN:return Rt.UNKNOWN;case dn.DEADLINE_EXCEEDED:return Rt.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return Rt.RESOURCE_EXHAUSTED;case dn.INTERNAL:return Rt.INTERNAL;case dn.UNAVAILABLE:return Rt.UNAVAILABLE;case dn.UNAUTHENTICATED:return Rt.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return Rt.INVALID_ARGUMENT;case dn.NOT_FOUND:return Rt.NOT_FOUND;case dn.ALREADY_EXISTS:return Rt.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return Rt.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return Rt.FAILED_PRECONDITION;case dn.ABORTED:return Rt.ABORTED;case dn.OUT_OF_RANGE:return Rt.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return Rt.UNIMPLEMENTED;case dn.DATA_LOSS:return Rt.DATA_LOSS;default:return ce(39323,{code:f})}}(oi=dn||(dn={}))[oi.OK=0]="OK",oi[oi.CANCELLED=1]="CANCELLED",oi[oi.UNKNOWN=2]="UNKNOWN",oi[oi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oi[oi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oi[oi.NOT_FOUND=5]="NOT_FOUND",oi[oi.ALREADY_EXISTS=6]="ALREADY_EXISTS",oi[oi.PERMISSION_DENIED=7]="PERMISSION_DENIED",oi[oi.UNAUTHENTICATED=16]="UNAUTHENTICATED",oi[oi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oi[oi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oi[oi.ABORTED=10]="ABORTED",oi[oi.OUT_OF_RANGE=11]="OUT_OF_RANGE",oi[oi.UNIMPLEMENTED=12]="UNIMPLEMENTED",oi[oi.INTERNAL=13]="INTERNAL",oi[oi.UNAVAILABLE=14]="UNAVAILABLE",oi[oi.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd=null;function QW(f){if(Qd)throw new Error("a TestingHooksSpi instance is already set");Qd=f}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZW=new dl([4294967295,4294967295],0);function IA(f){const t=EI().encode(f),i=new lb;return i.update(t),new Uint8Array(i.digest())}function LA(f){const t=new DataView(f.buffer),i=t.getUint32(0,!0),n=t.getUint32(4,!0),v=t.getUint32(8,!0),S=t.getUint32(12,!0);return[new dl([i,n],0),new dl([v,S],0)]}class mE{constructor(t,i,n){if(this.bitmap=t,this.padding=i,this.hashCount=n,i<0||i>=8)throw new Dd(`Invalid padding: ${i}`);if(n<0)throw new Dd(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Dd(`Invalid hash count: ${n}`);if(t.length===0&&i!==0)throw new Dd(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=dl.fromNumber(this.ge)}ye(t,i,n){let v=t.add(i.multiply(dl.fromNumber(n)));return v.compare(ZW)===1&&(v=new dl([v.getBits(0),v.getBits(1)],0)),v.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=IA(t),[n,v]=LA(i);for(let S=0;S<this.hashCount;S++){const s=this.ye(n,v,S);if(!this.we(s))return!1}return!0}static create(t,i,n){const v=t%8==0?0:8-t%8,S=new Uint8Array(Math.ceil(t/8)),s=new mE(S,v,i);return n.forEach((T=>s.insert(T))),s}insert(t){if(this.ge===0)return;const i=IA(t),[n,v]=LA(i);for(let S=0;S<this.hashCount;S++){const s=this.ye(n,v,S);this.be(s)}}be(t){const i=Math.floor(t/8),n=t%8;this.bitmap[i]|=1<<n}}class Dd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t,i,n,v,S){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=n,this.documentUpdates=v,this.resolvedLimboDocuments=S}static createSynthesizedRemoteEventForCurrentChange(t,i,n){const v=new Map;return v.set(t,Zp.createSynthesizedTargetChangeForCurrentChange(t,i,n)),new Qp(Te.min(),v,new Fi(Le),Cs(),Ue())}}class Zp{constructor(t,i,n,v,S){this.resumeToken=t,this.current=i,this.addedDocuments=n,this.modifiedDocuments=v,this.removedDocuments=S}static createSynthesizedTargetChangeForCurrentChange(t,i,n){return new Zp(n,i,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t,i,n,v){this.Se=t,this.removedTargetIds=i,this.key=n,this.De=v}}class SI{constructor(t,i){this.targetId=t,this.Ce=i}}class wI{constructor(t,i,n=Qi.EMPTY_BYTE_STRING,v=null){this.state=t,this.targetIds=i,this.resumeToken=n,this.cause=v}}class FA{constructor(){this.ve=0,this.Fe=DA(),this.Me=Qi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ue(),i=Ue(),n=Ue();return this.Fe.forEach(((v,S)=>{switch(S){case 0:t=t.add(v);break;case 2:i=i.add(v);break;case 1:n=n.add(v);break;default:ce(38017,{changeType:S})}})),new Zp(this.Me,this.xe,t,i,n)}Ke(){this.Oe=!1,this.Fe=DA()}qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class JW{constructor(t){this.Ge=t,this.ze=new Map,this.je=Cs(),this.He=dm(),this.Je=dm(),this.Ze=new Fi(Le)}Xe(t){for(const i of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const n=this.nt(i);switch(t.state){case 0:this.rt(i)&&n.Le(t.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(t.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(n.Qe(),n.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),n.Le(t.resumeToken));break;default:ce(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((n,v)=>{this.rt(v)&&i(v)}))}st(t){const i=t.targetId,n=t.Ce.count,v=this.ot(i);if(v){const S=v.target;if(mg(S))if(n===0){const s=new qt(S.path);this.et(i,s,Ni.newNoDocument(s,Te.min()))}else ge(n===1,20013,{expectedCount:n});else{const s=this._t(i);if(s!==n){const T=this.ut(t),e=T?this.ct(T,t,s):1;if(e!==0){this.it(i);const a=e===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,a)}Qd==null||Qd.lt((function(m,c,o,u,r){var l,p,g;const h={localCacheCount:m,existenceFilterCount:c.count,databaseId:o.database,projectId:o.projectId},d=c.unchangedNames;return d&&(h.bloomFilter={applied:r===0,hashCount:(d==null?void 0:d.hashCount)??0,bitmapLength:((p=(l=d==null?void 0:d.bits)==null?void 0:l.bitmap)==null?void 0:p.length)??0,padding:((g=d==null?void 0:d.bits)==null?void 0:g.padding)??0,mightContain:x=>(u==null?void 0:u.mightContain(x))??!1}),h})(s,t.Ce,this.Ge.ht(),T,e))}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:n="",padding:v=0},hashCount:S=0}=i;let s,T;try{s=mo(n).toUint8Array()}catch(e){if(e instanceof zb)return Ns("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{T=new mE(s,v,S)}catch(e){return Ns(e instanceof Dd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return T.ge===0?null:T}ct(t,i,n){return i.Ce.count===n-this.Pt(t,i.targetId)?0:2}Pt(t,i){const n=this.Ge.getRemoteKeysForTarget(i);let v=0;return n.forEach((S=>{const s=this.Ge.ht(),T=`projects/${s.projectId}/databases/${s.database}/documents/${S.path.canonicalString()}`;t.mightContain(T)||(this.et(i,S,null),v++)})),v}Tt(t){const i=new Map;this.ze.forEach(((S,s)=>{const T=this.ot(s);if(T){if(S.current&&mg(T.target)){const e=new qt(T.target.path);this.It(e).has(s)||this.Et(s,e)||this.et(s,e,Ni.newNoDocument(e,t))}S.Be&&(i.set(s,S.ke()),S.Ke())}}));let n=Ue();this.Je.forEach(((S,s)=>{let T=!0;s.forEachWhile((e=>{const a=this.ot(e);return!a||a.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(n=n.add(S))})),this.je.forEach(((S,s)=>s.setReadTime(t)));const v=new Qp(t,i,this.Ze,this.je,n);return this.je=Cs(),this.He=dm(),this.Je=dm(),this.Ze=new Fi(Le),v}Ye(t,i){if(!this.rt(t))return;const n=this.Et(t,i.key)?2:0;this.nt(t).qe(i.key,n),this.je=this.je.insert(i.key,i),this.He=this.He.insert(i.key,this.It(i.key).add(t)),this.Je=this.Je.insert(i.key,this.Rt(i.key).add(t))}et(t,i,n){if(!this.rt(t))return;const v=this.nt(t);this.Et(t,i)?v.qe(i,1):v.Ue(i),this.Je=this.Je.insert(i,this.Rt(i).delete(t)),this.Je=this.Je.insert(i,this.Rt(i).add(t)),n&&(this.je=this.je.insert(i,n))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let i=this.ze.get(t);return i||(i=new FA,this.ze.set(t,i)),i}Rt(t){let i=this.Je.get(t);return i||(i=new Ai(Le),this.Je=this.Je.insert(t,i)),i}It(t){let i=this.He.get(t);return i||(i=new Ai(Le),this.He=this.He.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||Xt("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new FA),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function dm(){return new Fi(qt.comparator)}function DA(){return new Fi(qt.comparator)}const qW={asc:"ASCENDING",desc:"DESCENDING"},tH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eH={and:"AND",or:"OR"};class iH{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function z1(f,t){return f.useProto3Json||Xp(t)?t:{value:t}}function lf(f,t){return f.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function AI(f,t){return f.useProto3Json?t.toBase64():t.toUint8Array()}function nH(f,t){return lf(f,t.toTimestamp())}function on(f){return ge(!!f,49232),Te.fromTimestamp((function(i){const n=vo(i);return new gi(n.seconds,n.nanos)})(f))}function gE(f,t){return G1(f,t).canonicalString()}function G1(f,t){const i=(function(v){return new Ye(["projects",v.projectId,"databases",v.database])})(f).child("documents");return t===void 0?i:i.child(t)}function CI(f){const t=Ye.fromString(f);return ge(OI(t),10190,{key:t.toString()}),t}function Ep(f,t){return gE(f.databaseId,t.path)}function Sa(f,t){const i=CI(t);if(i.get(1)!==f.databaseId.projectId)throw new Gt(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+f.databaseId.projectId);if(i.get(3)!==f.databaseId.database)throw new Gt(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+f.databaseId.database);return new qt(PI(i))}function MI(f,t){return gE(f.databaseId,t)}function RI(f){const t=CI(f);return t.length===4?Ye.emptyPath():PI(t)}function _1(f){return new Ye(["projects",f.databaseId.projectId,"databases",f.databaseId.database]).canonicalString()}function PI(f){return ge(f.length>4&&f.get(4)==="documents",29091,{key:f.toString()}),f.popFirst(5)}function OA(f,t,i){return{name:Ep(f,t),fields:i.value.mapValue.fields}}function u0(f,t,i){const n=Sa(f,t.name),v=on(t.updateTime),S=t.createTime?on(t.createTime):Te.min(),s=new Nn({mapValue:{fields:t.fields}}),T=Ni.newFoundDocument(n,v,S,s);return i&&T.setHasCommittedMutations(),i?T.setHasCommittedMutations():T}function sH(f,t){return"found"in t?(function(n,v){ge(!!v.found,43571),v.found.name,v.found.updateTime;const S=Sa(n,v.found.name),s=on(v.found.updateTime),T=v.found.createTime?on(v.found.createTime):Te.min(),e=new Nn({mapValue:{fields:v.found.fields}});return Ni.newFoundDocument(S,s,T,e)})(f,t):"missing"in t?(function(n,v){ge(!!v.missing,3894),ge(!!v.readTime,22933);const S=Sa(n,v.missing),s=on(v.readTime);return Ni.newNoDocument(S,s)})(f,t):ce(7234,{result:t})}function rH(f,t){let i;if("targetChange"in t){t.targetChange;const n=(function(a){return a==="NO_CHANGE"?0:a==="ADD"?1:a==="REMOVE"?2:a==="CURRENT"?3:a==="RESET"?4:ce(39313,{state:a})})(t.targetChange.targetChangeType||"NO_CHANGE"),v=t.targetChange.targetIds||[],S=(function(a,m){return a.useProto3Json?(ge(m===void 0||typeof m=="string",58123),Qi.fromBase64String(m||"")):(ge(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Qi.fromUint8Array(m||new Uint8Array))})(f,t.targetChange.resumeToken),s=t.targetChange.cause,T=s&&(function(a){const m=a.code===void 0?Rt.UNKNOWN:TI(a.code);return new Gt(m,a.message||"")})(s);i=new wI(n,v,S,T||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const v=Sa(f,n.document.name),S=on(n.document.updateTime),s=n.document.createTime?on(n.document.createTime):Te.min(),T=new Nn({mapValue:{fields:n.document.fields}}),e=Ni.newFoundDocument(v,S,s,T),a=n.targetIds||[],m=n.removedTargetIds||[];i=new _m(a,m,e.key,e)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const v=Sa(f,n.document),S=n.readTime?on(n.readTime):Te.min(),s=Ni.newNoDocument(v,S),T=n.removedTargetIds||[];i=new _m([],T,s.key,s)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const v=Sa(f,n.document),S=n.removedTargetIds||[];i=new _m([],S,v,null)}else{if(!("filter"in t))return ce(11601,{Vt:t});{t.filter;const n=t.filter;n.targetId;const{count:v=0,unchangedNames:S}=n,s=new jW(v,S),T=n.targetId;i=new SI(T,s)}}return i}function Sp(f,t){let i;if(t instanceof Mf)i={update:OA(f,t.key,t.value)};else if(t instanceof Rf)i={delete:Ep(f,t.key)};else if(t instanceof Ao)i={update:OA(f,t.key,t.data),updateMask:cH(t.fieldMask)};else{if(!(t instanceof fE))return ce(16599,{dt:t.type});i={verify:Ep(f,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((n=>(function(S,s){const T=s.transform;if(T instanceof af)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof $h)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof Kh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof of)return{fieldPath:s.field.canonicalString(),increment:T.Ae};throw ce(20930,{transform:s.transform})})(0,n)))),t.precondition.isNone||(i.currentDocument=(function(v,S){return S.updateTime!==void 0?{updateTime:nH(v,S.updateTime)}:S.exists!==void 0?{exists:S.exists}:ce(27497)})(f,t.precondition)),i}function W1(f,t){const i=t.currentDocument?(function(S){return S.updateTime!==void 0?Hi.updateTime(on(S.updateTime)):S.exists!==void 0?Hi.exists(S.exists):Hi.none()})(t.currentDocument):Hi.none(),n=t.updateTransforms?t.updateTransforms.map((v=>(function(s,T){let e=null;if("setToServerValue"in T)ge(T.setToServerValue==="REQUEST_TIME",16630,{proto:T}),e=new af;else if("appendMissingElements"in T){const m=T.appendMissingElements.values||[];e=new $h(m)}else if("removeAllFromArray"in T){const m=T.removeAllFromArray.values||[];e=new Kh(m)}else"increment"in T?e=new of(s,T.increment):ce(16584,{proto:T});const a=Bi.fromServerFormat(T.fieldPath);return new jp(a,e)})(f,v))):[];if(t.update){t.update.name;const v=Sa(f,t.update.name),S=new Nn({mapValue:{fields:t.update.fields}});if(t.updateMask){const s=(function(e){const a=e.fieldPaths||[];return new As(a.map((m=>Bi.fromServerFormat(m))))})(t.updateMask);return new Ao(v,S,s,i,n)}return new Mf(v,S,i,n)}if(t.delete){const v=Sa(f,t.delete);return new Rf(v,i)}if(t.verify){const v=Sa(f,t.verify);return new fE(v,i)}return ce(1463,{proto:t})}function aH(f,t){return f&&f.length>0?(ge(t!==void 0,14353),f.map((i=>(function(v,S){let s=v.updateTime?on(v.updateTime):on(S);return s.isEqual(Te.min())&&(s=on(S)),new YW(s,v.transformResults||[])})(i,t)))):[]}function bI(f,t){return{documents:[MI(f,t.path)]}}function c0(f,t){const i={structuredQuery:{}},n=t.path;let v;t.collectionGroup!==null?(v=n,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(v=n.popLast(),i.structuredQuery.from=[{collectionId:n.lastSegment()}]),i.parent=MI(f,v);const S=(function(a){if(a.length!==0)return DI(Si.create(a,"and"))})(t.filters);S&&(i.structuredQuery.where=S);const s=(function(a){if(a.length!==0)return a.map((m=>(function(o){return{field:ko(o.field),direction:lH(o.dir)}})(m)))})(t.orderBy);s&&(i.structuredQuery.orderBy=s);const T=z1(f,t.limit);return T!==null&&(i.structuredQuery.limit=T),t.startAt&&(i.structuredQuery.startAt=(function(a){return{before:a.inclusive,values:a.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(a){return{before:!a.inclusive,values:a.position}})(t.endAt)),{ft:i,parent:v}}function II(f,t,i,n){const{ft:v,parent:S}=c0(f,t),s={},T=[];let e=0;return i.forEach((a=>{const m=n?a.alias:"aggregate_"+e++;s[m]=a.alias,a.aggregateType==="count"?T.push({alias:m,count:{}}):a.aggregateType==="avg"?T.push({alias:m,avg:{field:ko(a.fieldPath)}}):a.aggregateType==="sum"&&T.push({alias:m,sum:{field:ko(a.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:T,structuredQuery:v.structuredQuery},parent:v.parent},gt:s,parent:S}}function LI(f){let t=RI(f.parent);const i=f.structuredQuery,n=i.from?i.from.length:0;let v=null;if(n>0){ge(n===1,65062);const m=i.from[0];m.allDescendants?v=m.collectionId:t=t.child(m.collectionId)}let S=[];i.where&&(S=(function(c){const o=FI(c);return o instanceof Si&&lE(o)?o.getFilters():[o]})(i.where));let s=[];i.orderBy&&(s=(function(c){return c.map((o=>(function(r){return new Tp(ec(r.field),(function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(r.direction))})(o)))})(i.orderBy));let T=null;i.limit&&(T=(function(c){let o;return o=typeof c=="object"?c.value:c,Xp(o)?null:o})(i.limit));let e=null;i.startAt&&(e=(function(c){const o=!!c.before,u=c.values||[];return new Cl(u,o)})(i.startAt));let a=null;return i.endAt&&(a=(function(c){const o=!c.before,u=c.values||[];return new Cl(u,o)})(i.endAt)),eI(t,v,s,S,T,"F",e,a)}function oH(f,t){const i=(function(v){switch(v){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:v})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function FI(f){return f.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const n=ec(i.unaryFilter.field);return ii.create(n,"==",{doubleValue:NaN});case"IS_NULL":const v=ec(i.unaryFilter.field);return ii.create(v,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const S=ec(i.unaryFilter.field);return ii.create(S,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ec(i.unaryFilter.field);return ii.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}})(f):f.fieldFilter!==void 0?(function(i){return ii.create(ec(i.fieldFilter.field),(function(v){switch(v){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(f):f.compositeFilter!==void 0?(function(i){return Si.create(i.compositeFilter.filters.map((n=>FI(n))),(function(v){switch(v){case"AND":return"and";case"OR":return"or";default:return ce(1026)}})(i.compositeFilter.op))})(f):ce(30097,{filter:f})}function lH(f){return qW[f]}function hH(f){return tH[f]}function uH(f){return eH[f]}function ko(f){return{fieldPath:f.canonicalString()}}function ec(f){return Bi.fromServerFormat(f.fieldPath)}function DI(f){return f instanceof ii?(function(i){if(i.op==="=="){if(xA(i.value))return{unaryFilter:{field:ko(i.field),op:"IS_NAN"}};if(gA(i.value))return{unaryFilter:{field:ko(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(xA(i.value))return{unaryFilter:{field:ko(i.field),op:"IS_NOT_NAN"}};if(gA(i.value))return{unaryFilter:{field:ko(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(i.field),op:hH(i.op),value:i.value}}})(f):f instanceof Si?(function(i){const n=i.getFilters().map((v=>DI(v)));return n.length===1?n[0]:{compositeFilter:{op:uH(i.op),filters:n}}})(f):ce(54877,{filter:f})}function cH(f){const t=[];return f.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function OI(f){return f.length>=4&&f.get(0)==="projects"&&f.get(2)==="databases"}function NI(f){return!!f&&typeof f._toProto=="function"&&f._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t,i,n,v,S=Te.min(),s=Te.min(),T=Qi.EMPTY_BYTE_STRING,e=null){this.target=t,this.targetId=i,this.purpose=n,this.sequenceNumber=v,this.snapshotVersion=S,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=T,this.expectedCount=e}withSequenceNumber(t){return new to(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t){this.yt=t}}function fH(f,t){let i;if(t.document)i=u0(f.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const n=qt.fromSegments(t.noDocument.path),v=Qh(t.noDocument.readTime);i=Ni.newNoDocument(n,v),t.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!t.unknownDocument)return ce(56709);{const n=qt.fromSegments(t.unknownDocument.path),v=Qh(t.unknownDocument.version);i=Ni.newUnknownDocument(n,v)}}return t.readTime&&i.setReadTime((function(v){const S=new gi(v[0],v[1]);return Te.fromTimestamp(S)})(t.readTime)),i}function NA(f,t){const i=t.key,n={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:yg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=(function(S,s){return{name:Ep(S,s.key),fields:s.data.value.mapValue.fields,updateTime:lf(S,s.version.toTimestamp()),createTime:lf(S,s.createTime.toTimestamp())}})(f.yt,t);else if(t.isNoDocument())n.noDocument={path:i.path.toArray(),readTime:jh(t.version)};else{if(!t.isUnknownDocument())return ce(57904,{document:t});n.unknownDocument={path:i.path.toArray(),version:jh(t.version)}}return n}function yg(f){const t=f.toTimestamp();return[t.seconds,t.nanoseconds]}function jh(f){const t=f.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Qh(f){const t=new gi(f.seconds,f.nanoseconds);return Te.fromTimestamp(t)}function ph(f,t){const i=(t.baseMutations||[]).map((S=>W1(f.yt,S)));for(let S=0;S<t.mutations.length-1;++S){const s=t.mutations[S];if(S+1<t.mutations.length&&t.mutations[S+1].transform!==void 0){const T=t.mutations[S+1];s.updateTransforms=T.transform.fieldTransforms,t.mutations.splice(S+1,1),++S}}const n=t.mutations.map((S=>W1(f.yt,S))),v=gi.fromMillis(t.localWriteTimeMs);return new dE(t.batchId,v,i,n)}function Od(f){const t=Qh(f.readTime),i=f.lastLimboFreeSnapshotVersion!==void 0?Qh(f.lastLimboFreeSnapshotVersion):Te.min();let n;return n=(function(S){return S.documents!==void 0})(f.query)?(function(S){const s=S.documents.length;return ge(s===1,1966,{count:s}),ls(Cf(RI(S.documents[0])))})(f.query):(function(S){return ls(LI(S))})(f.query),new to(n,f.targetId,"TargetPurposeListen",f.lastListenSequenceNumber,t,i,Qi.fromBase64String(f.resumeToken))}function UI(f,t){const i=jh(t.snapshotVersion),n=jh(t.lastLimboFreeSnapshotVersion);let v;v=mg(t.target)?bI(f.yt,t.target):c0(f.yt,t.target).ft;const S=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Yh(t.target),readTime:i,resumeToken:S,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:v}}function f0(f){const t=LI({parent:f.parent,structuredQuery:f.structuredQuery});return f.limitType==="LAST"?xg(t,t.limit,"L"):t}function Ux(f,t){return new vE(t.largestBatchId,W1(f.yt,t.overlayMutation))}function BA(f,t){const i=t.path.lastSegment();return[f,os(t.path.popLast()),i]}function UA(f,t,i,n){return{indexId:f,uid:t,sequenceNumber:i,readTime:jh(n.readTime),documentKey:os(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{getBundleMetadata(t,i){return VA(t).get(i).next((n=>{if(n)return(function(S){return{id:S.bundleId,createTime:Qh(S.createTime),version:S.version}})(n)}))}saveBundleMetadata(t,i){return VA(t).put((function(v){return{bundleId:v.id,createTime:jh(on(v.createTime)),version:v.version}})(i))}getNamedQuery(t,i){return zA(t).get(i).next((n=>{if(n)return(function(S){return{name:S.name,query:f0(S.bundledQuery),readTime:Qh(S.readTime)}})(n)}))}saveNamedQuery(t,i){return zA(t).put((function(v){return{name:v.name,readTime:jh(on(v.readTime)),bundledQuery:v.bundledQuery}})(i))}}function VA(f){return bn(f,i0)}function zA(f){return bn(f,n0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t,i){this.serializer=t,this.userId=i}static wt(t,i){const n=i.uid||"";return new d0(t,n)}getOverlay(t,i){return vd(t).get(BA(this.userId,i)).next((n=>n?Ux(this.serializer,n):null))}getOverlays(t,i){const n=ga();return Et.forEach(i,(v=>this.getOverlay(t,v).next((S=>{S!==null&&n.set(v,S)})))).next((()=>n))}saveOverlays(t,i,n){const v=[];return n.forEach(((S,s)=>{const T=new vE(i,s);v.push(this.bt(t,T))})),Et.waitFor(v)}removeOverlaysForBatchId(t,i,n){const v=new Set;i.forEach((s=>v.add(os(s.getCollectionPath()))));const S=[];return v.forEach((s=>{const T=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);S.push(vd(t).X(L1,T))})),Et.waitFor(S)}getOverlaysForCollection(t,i,n){const v=ga(),S=os(i),s=IDBKeyRange.bound([this.userId,S,n],[this.userId,S,Number.POSITIVE_INFINITY],!0);return vd(t).H(L1,s).next((T=>{for(const e of T){const a=Ux(this.serializer,e);v.set(a.getKey(),a)}return v}))}getOverlaysForCollectionGroup(t,i,n,v){const S=ga();let s;const T=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return vd(t).ee({index:Fb,range:T},((e,a,m)=>{const c=Ux(this.serializer,a);S.size()<v||c.largestBatchId===s?(S.set(c.getKey(),c),s=c.largestBatchId):m.done()})).next((()=>S))}bt(t,i){return vd(t).put((function(v,S,s){const[T,e,a]=BA(S,s.mutation.key);return{userId:S,collectionPath:e,documentId:a,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Sp(v.yt,s.mutation)}})(this.serializer,this.userId,i))}}function vd(f){return bn(f,s0)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{St(t){return bn(t,sE)}getSessionToken(t){return this.St(t).get("sessionToken").next((i=>{const n=i==null?void 0:i.value;return n?Qi.fromUint8Array(n):Qi.EMPTY_BYTE_STRING}))}setSessionToken(t,i){return this.St(t).put({name:"sessionToken",value:i.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){}Dt(t,i){this.Ct(t,i),i.vt()}Ct(t,i){if("nullValue"in t)this.Ft(i,5);else if("booleanValue"in t)this.Ft(i,10),i.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(i,15),i.Mt(_i(t.integerValue));else if("doubleValue"in t){const n=_i(t.doubleValue);isNaN(n)?this.Ft(i,13):(this.Ft(i,15),fp(n)?i.Mt(0):i.Mt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Ft(i,20),typeof n=="string"&&(n=vo(n)),i.xt(`${n.seconds||""}`),i.Mt(n.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,i),this.Nt(i);else if("bytesValue"in t)this.Ft(i,30),i.Bt(mo(t.bytesValue)),this.Nt(i);else if("referenceValue"in t)this.Lt(t.referenceValue,i);else if("geoPointValue"in t){const n=t.geoPointValue;this.Ft(i,45),i.Mt(n.latitude||0),i.Mt(n.longitude||0)}else"mapValue"in t?kb(t)?this.Ft(i,Number.MAX_SAFE_INTEGER):o0(t)?this.kt(t.mapValue,i):(this.Kt(t.mapValue,i),this.Nt(i)):"arrayValue"in t?(this.qt(t.arrayValue,i),this.Nt(i)):ce(19022,{Ut:t})}Ot(t,i){this.Ft(i,25),this.$t(t,i)}$t(t,i){i.xt(t)}Kt(t,i){const n=t.fields||{};this.Ft(i,55);for(const v of Object.keys(n))this.Ot(v,i),this.Ct(n[v],i)}kt(t,i){var s,T;const n=t.fields||{};this.Ft(i,53);const v=nf,S=((T=(s=n[v].arrayValue)==null?void 0:s.values)==null?void 0:T.length)||0;this.Ft(i,15),i.Mt(_i(S)),this.Ot(v,i),this.Ct(n[v],i)}qt(t,i){const n=t.values||[];this.Ft(i,50);for(const v of n)this.Ct(v,i)}Lt(t,i){this.Ft(i,37),qt.fromName(t).path.forEach((n=>{this.Ft(i,60),this.$t(n,i)}))}Ft(t,i){t.Mt(i)}Nt(t){t.Mt(2)}}vh.Wt=new vh;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=255;function vH(f){if(f===0)return 8;let t=0;return f>>4||(t+=4,f<<=4),f>>6||(t+=2,f<<=2),f>>7||(t+=1),t}function GA(f){const t=64-(function(n){let v=0;for(let S=0;S<8;++S){const s=vH(255&n[S]);if(v+=s,s!==8)break}return v})(f);return Math.ceil(t/8)}class mH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(t){const i=t[Symbol.iterator]();let n=i.next();for(;!n.done;)this.Gt(n.value),n=i.next();this.zt()}jt(t){const i=t[Symbol.iterator]();let n=i.next();for(;!n.done;)this.Ht(n.value),n=i.next();this.Jt()}Zt(t){for(const i of t){const n=i.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const v=i.codePointAt(0);this.Gt(240|v>>>18),this.Gt(128|63&v>>>12),this.Gt(128|63&v>>>6),this.Gt(128|63&v)}}this.zt()}Xt(t){for(const i of t){const n=i.charCodeAt(0);if(n<128)this.Ht(n);else if(n<2048)this.Ht(960|n>>>6),this.Ht(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Ht(480|n>>>12),this.Ht(128|63&n>>>6),this.Ht(128|63&n);else{const v=i.codePointAt(0);this.Ht(240|v>>>18),this.Ht(128|63&v>>>12),this.Ht(128|63&v>>>6),this.Ht(128|63&v)}}this.Jt()}Yt(t){const i=this.en(t),n=GA(i);this.tn(1+n),this.buffer[this.position++]=255&n;for(let v=i.length-n;v<i.length;++v)this.buffer[this.position++]=255&i[v]}nn(t){const i=this.en(t),n=GA(i);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let v=i.length-n;v<i.length;++v)this.buffer[this.position++]=~(255&i[v])}rn(){this.sn(Ku),this.sn(255)}_n(){this.an(Ku),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const i=(function(S){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,S,!1),new Uint8Array(s.buffer)})(t),n=!!(128&i[0]);i[0]^=n?255:128;for(let v=1;v<i.length;++v)i[v]^=n?255:0;return i}Gt(t){const i=255&t;i===0?(this.sn(0),this.sn(255)):i===Ku?(this.sn(Ku),this.sn(0)):this.sn(i)}Ht(t){const i=255&t;i===0?(this.an(0),this.an(255)):i===Ku?(this.an(Ku),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const i=t+this.position;if(i<=this.buffer.length)return;let n=2*this.buffer.length;n<i&&(n=i);const v=new Uint8Array(n);v.set(this.buffer),this.buffer=v}}class gH{constructor(t){this.cn=t}Bt(t){this.cn.Qt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.Yt(t)}vt(){this.cn.rn()}}class xH{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Xt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class md{constructor(){this.cn=new mH,this.ascending=new gH(this.cn),this.descending=new xH(this.cn)}seed(t){this.cn.seed(t)}ln(t){return t===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(t,i,n,v){this.hn=t,this.Pn=i,this.Tn=n,this.In=v}En(){const t=this.In.length,i=t===0||this.In[t-1]===255?t+1:t,n=new Uint8Array(i);return n.set(this.In,0),i!==t?n.set([0],this.In.length):++n[n.length-1],new mh(this.hn,this.Pn,this.Tn,n)}Rn(t,i,n){return{indexId:this.hn,uid:t,arrayValue:Wm(this.Tn),directionalValue:Wm(this.In),orderedDocumentKey:Wm(i),documentKey:n.path.toArray()}}An(t,i,n){const v=this.Rn(t,i,n);return[v.indexId,v.uid,v.arrayValue,v.directionalValue,v.orderedDocumentKey,v.documentKey]}}function Go(f,t){let i=f.hn-t.hn;return i!==0?i:(i=_A(f.Tn,t.Tn),i!==0?i:(i=_A(f.In,t.In),i!==0?i:qt.comparator(f.Pn,t.Pn)))}function _A(f,t){for(let i=0;i<f.length&&i<t.length;++i){const n=f[i]-t[i];if(n!==0)return n}return f.length-t.length}function Wm(f){return tb()?(function(i){let n="";for(let v=0;v<i.length;v++)n+=String.fromCharCode(i[v]);return n})(f):f}function WA(f){return typeof f!="string"?f:(function(i){const n=new Uint8Array(i.length);for(let v=0;v<i.length;v++)n[v]=i.charCodeAt(v);return n})(f)}class HA{constructor(t){this.Vn=new Ai(((i,n)=>Bi.comparator(i.field,n.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.dn=t.orderBy,this.mn=[];for(const i of t.filters){const n=i;n.isInequality()?this.Vn=this.Vn.add(n):this.mn.push(n)}}get fn(){return this.Vn.size>1}gn(t){if(ge(t.collectionGroup===this.collectionId,49279),this.fn)return!1;const i=P1(t);if(i!==void 0&&!this.pn(i))return!1;const n=lh(t);let v=new Set,S=0,s=0;for(;S<n.length&&this.pn(n[S]);++S)v=v.add(n[S].fieldPath.canonicalString());if(S===n.length)return!0;if(this.Vn.size>0){const T=this.Vn.getIterator().getNext();if(!v.has(T.field.canonicalString())){const e=n[S];if(!this.yn(T,e)||!this.wn(this.dn[s++],e))return!1}++S}for(;S<n.length;++S){const T=n[S];if(s>=this.dn.length||!this.wn(this.dn[s++],T))return!1}return!0}bn(){if(this.fn)return null;let t=new Ai(Bi.comparator);const i=[];for(const n of this.mn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")i.push(new Vh(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),i.push(new Vh(n.field,0))}for(const n of this.dn)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),i.push(new Vh(n.field,n.dir==="asc"?0:1)));return new Qc(Qc.UNKNOWN_ID,this.collectionId,i,Zc.empty())}pn(t){for(const i of this.mn)if(this.yn(i,t))return!0;return!1}yn(t,i){if(t===void 0||!t.field.isEqual(i.fieldPath))return!1;const n=t.op==="array-contains"||t.op==="array-contains-any";return i.kind===2===n}wn(t,i){return!!t.field.isEqual(i.fieldPath)&&(i.kind===0&&t.dir==="asc"||i.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(f){var i,n;if(ge(f instanceof ii||f instanceof Si,20012),f instanceof ii){if(f instanceof tI){const v=((n=(i=f.value.arrayValue)==null?void 0:i.values)==null?void 0:n.map((S=>ii.create(f.field,"==",S))))||[];return Si.create(v,"or")}return f}const t=f.filters.map((v=>VI(v)));return Si.create(t,f.op)}function yH(f){if(f.getFilters().length===0)return[];const t=k1(VI(f));return ge(zI(t),7391),H1(t)||X1(t)?[t]:t.getFilters()}function H1(f){return f instanceof ii}function X1(f){return f instanceof Si&&lE(f)}function zI(f){return H1(f)||X1(f)||(function(i){if(i instanceof Si&&N1(i)){for(const n of i.getFilters())if(!H1(n)&&!X1(n))return!1;return!0}return!1})(f)}function k1(f){if(ge(f instanceof ii||f instanceof Si,34018),f instanceof ii)return f;if(f.filters.length===1)return k1(f.filters[0]);const t=f.filters.map((n=>k1(n)));let i=Si.create(t,f.op);return i=Tg(i),zI(i)?i:(ge(i instanceof Si,64498),ge(rf(i),40251),ge(i.filters.length>1,57927),i.filters.reduce(((n,v)=>xE(n,v))))}function xE(f,t){let i;return ge(f instanceof ii||f instanceof Si,38388),ge(t instanceof ii||t instanceof Si,25473),i=f instanceof ii?t instanceof ii?(function(v,S){return Si.create([v,S],"and")})(f,t):XA(f,t):t instanceof ii?XA(t,f):(function(v,S){if(ge(v.filters.length>0&&S.filters.length>0,48005),rf(v)&&rf(S))return Zb(v,S.getFilters());const s=N1(v)?v:S,T=N1(v)?S:v,e=s.filters.map((a=>xE(a,T)));return Si.create(e,"or")})(f,t),Tg(i)}function XA(f,t){if(rf(t))return Zb(t,f.getFilters());{const i=t.filters.map((n=>xE(f,n)));return Si.create(i,"or")}}function Tg(f){if(ge(f instanceof ii||f instanceof Si,11850),f instanceof ii)return f;const t=f.getFilters();if(t.length===1)return Tg(t[0]);if(jb(f))return f;const i=t.map((v=>Tg(v))),n=[];return i.forEach((v=>{v instanceof ii?n.push(v):v instanceof Si&&(v.op===f.op?n.push(...v.filters):n.push(v))})),n.length===1?n[0]:Si.create(n,f.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(){this.Sn=new yE}addToCollectionParentIndex(t,i){return this.Sn.add(i),Et.resolve()}getCollectionParents(t,i){return Et.resolve(this.Sn.getEntries(i))}addFieldIndex(t,i){return Et.resolve()}deleteFieldIndex(t,i){return Et.resolve()}deleteAllFieldIndexes(t){return Et.resolve()}createTargetIndexes(t,i){return Et.resolve()}getDocumentsMatchingTarget(t,i){return Et.resolve(null)}getIndexType(t,i){return Et.resolve(0)}getFieldIndexes(t,i){return Et.resolve([])}getNextCollectionGroupToUpdate(t){return Et.resolve(null)}getMinOffset(t,i){return Et.resolve(tr.min())}getMinOffsetFromCollectionGroup(t,i){return Et.resolve(tr.min())}updateCollectionGroup(t,i,n){return Et.resolve()}updateIndexEntries(t,i){return Et.resolve()}}class yE{constructor(){this.index={}}add(t){const i=t.lastSegment(),n=t.popLast(),v=this.index[i]||new Ai(Ye.comparator),S=!v.has(n);return this.index[i]=v.add(n),S}has(t){const i=t.lastSegment(),n=t.popLast(),v=this.index[i];return v&&v.has(n)}getEntries(t){return(this.index[t]||new Ai(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="IndexedDbIndexManager",pm=new Uint8Array(0);class EH{constructor(t,i){this.databaseId=i,this.Dn=new yE,this.Cn=new wo((n=>Yh(n)),((n,v)=>Yp(n,v))),this.uid=t.uid||""}addToCollectionParentIndex(t,i){if(!this.Dn.has(i)){const n=i.lastSegment(),v=i.popLast();t.addOnCommittedListener((()=>{this.Dn.add(i)}));const S={collectionId:n,parent:os(v)};return YA(t).put(S)}return Et.resolve()}getCollectionParents(t,i){const n=[],v=IDBKeyRange.bound([i,""],[gb(i),""],!1,!0);return YA(t).H(v).next((S=>{for(const s of S){if(s.collectionId!==i)break;n.push(ma(s.parent))}return n}))}addFieldIndex(t,i){const n=gd(t),v=(function(T){return{indexId:T.indexId,collectionGroup:T.collectionGroup,fields:T.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}})(i);delete v.indexId;const S=n.add(v);if(i.indexState){const s=Qu(t);return S.next((T=>{s.put(UA(T,this.uid,i.indexState.sequenceNumber,i.indexState.offset))}))}return S.next()}deleteFieldIndex(t,i){const n=gd(t),v=Qu(t),S=ju(t);return n.delete(i.indexId).next((()=>v.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))).next((()=>S.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const i=gd(t),n=ju(t),v=Qu(t);return i.X().next((()=>n.X())).next((()=>v.X()))}createTargetIndexes(t,i){return Et.forEach(this.vn(i),(n=>this.getIndexType(t,n).next((v=>{if(v===0||v===1){const S=new HA(n).bn();if(S!=null)return this.addFieldIndex(t,S)}}))))}getDocumentsMatchingTarget(t,i){const n=ju(t);let v=!0;const S=new Map;return Et.forEach(this.vn(i),(s=>this.Fn(t,s).next((T=>{v&&(v=!!T),S.set(s,T)})))).next((()=>{if(v){let s=Ue();const T=[];return Et.forEach(S,((e,a)=>{Xt(kA,`Using index ${(function(g){return`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map((x=>`${x.fieldPath}:${x.kind}`)).join(",")}`})(e)} to execute ${Yh(i)}`);const m=(function(g,x){const y=P1(x);if(y===void 0)return null;for(const E of gg(g,y.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null})(a,e),c=(function(g,x){const y=new Map;for(const E of lh(x))for(const w of gg(g,E.fieldPath))switch(w.op){case"==":case"in":y.set(E.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return y.set(E.fieldPath.canonicalString(),w.value),Array.from(y.values())}return null})(a,e),o=(function(g,x){const y=[];let E=!0;for(const w of lh(x)){const C=w.kind===0?wA(g,w.fieldPath,g.startAt):AA(g,w.fieldPath,g.startAt);y.push(C.value),E&&(E=C.inclusive)}return new Cl(y,E)})(a,e),u=(function(g,x){const y=[];let E=!0;for(const w of lh(x)){const C=w.kind===0?AA(g,w.fieldPath,g.endAt):wA(g,w.fieldPath,g.endAt);y.push(C.value),E&&(E=C.inclusive)}return new Cl(y,E)})(a,e),r=this.Mn(e,a,o),h=this.Mn(e,a,u),d=this.xn(e,a,c),l=this.On(e.indexId,m,r,o.inclusive,h,u.inclusive,d);return Et.forEach(l,(p=>n.Z(p,i.limit).next((g=>{g.forEach((x=>{const y=qt.fromSegments(x.documentKey);s.has(y)||(s=s.add(y),T.push(y))}))}))))})).next((()=>T))}return Et.resolve(null)}))}vn(t){let i=this.Cn.get(t);return i||(t.filters.length===0?i=[t]:i=yH(Si.create(t.filters,"and")).map((n=>U1(t.path,t.collectionGroup,t.orderBy,n.getFilters(),t.limit,t.startAt,t.endAt))),this.Cn.set(t,i),i)}On(t,i,n,v,S,s,T){const e=(i!=null?i.length:1)*Math.max(n.length,S.length),a=e/(i!=null?i.length:1),m=[];for(let c=0;c<e;++c){const o=i?this.Nn(i[c/a]):pm,u=this.Bn(t,o,n[c%a],v),r=this.Ln(t,o,S[c%a],s),h=T.map((d=>this.Bn(t,o,d,!0)));m.push(...this.createRange(u,r,h))}return m}Bn(t,i,n,v){const S=new mh(t,qt.empty(),i,n);return v?S:S.En()}Ln(t,i,n,v){const S=new mh(t,qt.empty(),i,n);return v?S.En():S}Fn(t,i){const n=new HA(i),v=i.collectionGroup!=null?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(t,v).next((S=>{let s=null;for(const T of S)n.gn(T)&&(!s||T.fields.length>s.fields.length)&&(s=T);return s}))}getIndexType(t,i){let n=2;const v=this.vn(i);return Et.forEach(v,(S=>this.Fn(t,S).next((s=>{s?n!==0&&s.fields.length<(function(e){let a=new Ai(Bi.comparator),m=!1;for(const c of e.filters)for(const o of c.getFlattenedFilters())o.field.isKeyField()||(o.op==="array-contains"||o.op==="array-contains-any"?m=!0:a=a.add(o.field));for(const c of e.orderBy)c.field.isKeyField()||(a=a.add(c.field));return a.size+(m?1:0)})(S)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(i)&&v.length>1&&n===2?1:n))}kn(t,i){const n=new md;for(const v of lh(t)){const S=i.data.field(v.fieldPath);if(S==null)return null;const s=n.ln(v.kind);vh.Wt.Dt(S,s)}return n.un()}Nn(t){const i=new md;return vh.Wt.Dt(t,i.ln(0)),i.un()}Kn(t,i){const n=new md;return vh.Wt.Dt(kh(this.databaseId,i),n.ln((function(S){const s=lh(S);return s.length===0?0:s[s.length-1].kind})(t))),n.un()}xn(t,i,n){if(n===null)return[];let v=[];v.push(new md);let S=0;for(const s of lh(t)){const T=n[S++];for(const e of v)if(this.qn(i,s.fieldPath)&&yp(T))v=this.Un(v,s,T);else{const a=e.ln(s.kind);vh.Wt.Dt(T,a)}}return this.$n(v)}Mn(t,i,n){return this.xn(t,i,n.position)}$n(t){const i=[];for(let n=0;n<t.length;++n)i[n]=t[n].un();return i}Un(t,i,n){const v=[...t],S=[];for(const s of n.arrayValue.values||[])for(const T of v){const e=new md;e.seed(T.un()),vh.Wt.Dt(s,e.ln(i.kind)),S.push(e)}return S}qn(t,i){return!!t.filters.find((n=>n instanceof ii&&n.field.isEqual(i)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(t,i){const n=gd(t),v=Qu(t);return(i?n.H(I1,IDBKeyRange.bound(i,i)):n.H()).next((S=>{const s=[];return Et.forEach(S,(T=>v.get([T.indexId,this.uid]).next((e=>{s.push((function(m,c){const o=c?new Zc(c.sequenceNumber,new tr(Qh(c.readTime),new qt(ma(c.documentKey)),c.largestBatchId)):Zc.empty(),u=m.fields.map((([r,h])=>new Vh(Bi.fromServerFormat(r),h)));return new Qc(m.indexId,m.collectionGroup,u,o)})(T,e))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((i=>i.length===0?null:(i.sort(((n,v)=>{const S=n.indexState.sequenceNumber-v.indexState.sequenceNumber;return S!==0?S:Le(n.collectionGroup,v.collectionGroup)})),i[0].collectionGroup)))}updateCollectionGroup(t,i,n){const v=gd(t),S=Qu(t);return this.Wn(t).next((s=>v.H(I1,IDBKeyRange.bound(i,i)).next((T=>Et.forEach(T,(e=>S.put(UA(e.indexId,this.uid,s,n))))))))}updateIndexEntries(t,i){const n=new Map;return Et.forEach(i,((v,S)=>{const s=n.get(v.collectionGroup);return(s?Et.resolve(s):this.getFieldIndexes(t,v.collectionGroup)).next((T=>(n.set(v.collectionGroup,T),Et.forEach(T,(e=>this.Qn(t,v,e).next((a=>{const m=this.Gn(S,e);return a.isEqual(m)?Et.resolve():this.zn(t,S,e,a,m)})))))))}))}jn(t,i,n,v){return ju(t).put(v.Rn(this.uid,this.Kn(n,i.key),i.key))}Hn(t,i,n,v){return ju(t).delete(v.An(this.uid,this.Kn(n,i.key),i.key))}Qn(t,i,n){const v=ju(t);let S=new Ai(Go);return v.ee({index:Lb,range:IDBKeyRange.only([n.indexId,this.uid,Wm(this.Kn(n,i))])},((s,T)=>{S=S.add(new mh(n.indexId,i,WA(T.arrayValue),WA(T.directionalValue)))})).next((()=>S))}Gn(t,i){let n=new Ai(Go);const v=this.kn(i,t);if(v==null)return n;const S=P1(i);if(S!=null){const s=t.data.field(S.fieldPath);if(yp(s))for(const T of s.arrayValue.values||[])n=n.add(new mh(i.indexId,t.key,this.Nn(T),v))}else n=n.add(new mh(i.indexId,t.key,pm,v));return n}zn(t,i,n,v,S){Xt(kA,"Updating index entries for document '%s'",i.key);const s=[];return(function(e,a,m,c,o){const u=e.getIterator(),r=a.getIterator();let h=$u(u),d=$u(r);for(;h||d;){let l=!1,p=!1;if(h&&d){const g=m(h,d);g<0?p=!0:g>0&&(l=!0)}else h!=null?p=!0:l=!0;l?(c(d),d=$u(r)):p?(o(h),h=$u(u)):(h=$u(u),d=$u(r))}})(v,S,Go,(T=>{s.push(this.jn(t,i,n,T))}),(T=>{s.push(this.Hn(t,i,n,T))})),Et.waitFor(s)}Wn(t){let i=1;return Qu(t).ee({index:Ib,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,v,S)=>{S.done(),i=v.sequenceNumber+1})).next((()=>i))}createRange(t,i,n){n=n.sort(((s,T)=>Go(s,T))).filter(((s,T,e)=>!T||Go(s,e[T-1])!==0));const v=[];v.push(t);for(const s of n){const T=Go(s,t),e=Go(s,i);if(T===0)v[0]=t.En();else if(T>0&&e<0)v.push(s),v.push(s.En());else if(e>0)break}v.push(i);const S=[];for(let s=0;s<v.length;s+=2){if(this.Jn(v[s],v[s+1]))return[];const T=v[s].An(this.uid,pm,qt.empty()),e=v[s+1].An(this.uid,pm,qt.empty());S.push(IDBKeyRange.bound(T,e))}return S}Jn(t,i){return Go(t,i)>0}getMinOffsetFromCollectionGroup(t,i){return this.getFieldIndexes(t,i).next($A)}getMinOffset(t,i){return Et.mapArray(this.vn(i),(n=>this.Fn(t,n).next((v=>v||ce(44426))))).next($A)}}function YA(f){return bn(f,vp)}function ju(f){return bn(f,Yd)}function gd(f){return bn(f,nE)}function Qu(f){return bn(f,kd)}function $A(f){ge(f.length!==0,28825);let t=f[0].indexState.offset,i=t.largestBatchId;for(let n=1;n<f.length;n++){const v=f[n].indexState.offset;tE(v,t)<0&&(t=v),i<v.largestBatchId&&(i=v.largestBatchId)}return new tr(t.readTime,t.documentKey,i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GI=41943040;class ns{static withCacheSize(t){return new ns(t,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(f,t,i){const n=f.store(Dr),v=f.store(Jc),S=[],s=IDBKeyRange.only(i.batchId);let T=0;const e=n.ee({range:s},((m,c,o)=>(T++,o.delete())));S.push(e.next((()=>{ge(T===1,47070,{batchId:i.batchId})})));const a=[];for(const m of i.mutations){const c=Rb(t,m.key.path,i.batchId);S.push(v.delete(c)),a.push(m.key)}return Et.waitFor(S).next((()=>a))}function Eg(f){if(!f)return 0;let t;if(f.document)t=f.document;else if(f.unknownDocument)t=f.unknownDocument;else{if(!f.noDocument)throw ce(14731);t=f.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(GI,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class p0{constructor(t,i,n,v){this.userId=t,this.serializer=i,this.indexManager=n,this.referenceDelegate=v,this.Zn={}}static wt(t,i,n,v){ge(t.uid!=="",64387);const S=t.isAuthenticated()?t.uid:"";return new p0(S,i,n,v)}checkEmpty(t){let i=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _o(t).ee({index:Sh,range:n},((v,S,s)=>{i=!1,s.done()})).next((()=>i))}addMutationBatch(t,i,n,v){const S=ic(t),s=_o(t);return s.add({}).next((T=>{ge(typeof T=="number",49019);const e=new dE(T,i,n,v),a=(function(u,r,h){const d=h.baseMutations.map((p=>Sp(u.yt,p))),l=h.mutations.map((p=>Sp(u.yt,p)));return{userId:r,batchId:h.batchId,localWriteTimeMs:h.localWriteTime.toMillis(),baseMutations:d,mutations:l}})(this.serializer,this.userId,e),m=[];let c=new Ai(((o,u)=>Le(o.canonicalString(),u.canonicalString())));for(const o of v){const u=Rb(this.userId,o.key.path,T);c=c.add(o.key.path.popLast()),m.push(s.put(a)),m.push(S.put(u,Q_))}return c.forEach((o=>{m.push(this.indexManager.addToCollectionParentIndex(t,o))})),t.addOnCommittedListener((()=>{this.Zn[T]=e.keys()})),Et.waitFor(m).next((()=>e))}))}lookupMutationBatch(t,i){return _o(t).get(i).next((n=>n?(ge(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:i}),ph(this.serializer,n)):null))}Xn(t,i){return this.Zn[i]?Et.resolve(this.Zn[i]):this.lookupMutationBatch(t,i).next((n=>{if(n){const v=n.keys();return this.Zn[i]=v,v}return null}))}getNextMutationBatchAfterBatchId(t,i){const n=i+1,v=IDBKeyRange.lowerBound([this.userId,n]);let S=null;return _o(t).ee({index:Sh,range:v},((s,T,e)=>{T.userId===this.userId&&(ge(T.batchId>=n,47524,{Yn:n}),S=ph(this.serializer,T)),e.done()})).next((()=>S))}getHighestUnacknowledgedBatchId(t){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=pl;return _o(t).ee({index:Sh,range:i,reverse:!0},((v,S,s)=>{n=S.batchId,s.done()})).next((()=>n))}getAllMutationBatches(t){const i=IDBKeyRange.bound([this.userId,pl],[this.userId,Number.POSITIVE_INFINITY]);return _o(t).H(Sh,i).next((n=>n.map((v=>ph(this.serializer,v)))))}getAllMutationBatchesAffectingDocumentKey(t,i){const n=Nm(this.userId,i.path),v=IDBKeyRange.lowerBound(n),S=[];return ic(t).ee({range:v},((s,T,e)=>{const[a,m,c]=s,o=ma(m);if(a===this.userId&&i.path.isEqual(o))return _o(t).get(c).next((u=>{if(!u)throw ce(61480,{er:s,batchId:c});ge(u.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:u.userId,batchId:c}),S.push(ph(this.serializer,u))}));e.done()})).next((()=>S))}getAllMutationBatchesAffectingDocumentKeys(t,i){let n=new Ai(Le);const v=[];return i.forEach((S=>{const s=Nm(this.userId,S.path),T=IDBKeyRange.lowerBound(s),e=ic(t).ee({range:T},((a,m,c)=>{const[o,u,r]=a,h=ma(u);o===this.userId&&S.path.isEqual(h)?n=n.add(r):c.done()}));v.push(e)})),Et.waitFor(v).next((()=>this.tr(t,n)))}getAllMutationBatchesAffectingQuery(t,i){const n=i.path,v=n.length+1,S=Nm(this.userId,n),s=IDBKeyRange.lowerBound(S);let T=new Ai(Le);return ic(t).ee({range:s},((e,a,m)=>{const[c,o,u]=e,r=ma(o);c===this.userId&&n.isPrefixOf(r)?r.length===v&&(T=T.add(u)):m.done()})).next((()=>this.tr(t,T)))}tr(t,i){const n=[],v=[];return i.forEach((S=>{v.push(_o(t).get(S).next((s=>{if(s===null)throw ce(35274,{batchId:S});ge(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:S}),n.push(ph(this.serializer,s))})))})),Et.waitFor(v).next((()=>n))}removeMutationBatch(t,i){return _I(t.le,this.userId,i).next((n=>(t.addOnCommittedListener((()=>{this.nr(i.batchId)})),Et.forEach(n,(v=>this.referenceDelegate.markPotentiallyOrphaned(t,v))))))}nr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((i=>{if(!i)return Et.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),v=[];return ic(t).ee({range:n},((S,s,T)=>{if(S[0]===this.userId){const e=ma(S[1]);v.push(e)}else T.done()})).next((()=>{ge(v.length===0,56720,{rr:v.map((S=>S.canonicalString()))})}))}))}containsKey(t,i){return WI(t,this.userId,i)}ir(t){return HI(t).get(this.userId).next((i=>i||{userId:this.userId,lastAcknowledgedBatchId:pl,lastStreamToken:""}))}}function WI(f,t,i){const n=Nm(t,i.path),v=n[1],S=IDBKeyRange.lowerBound(n);let s=!1;return ic(f).ee({range:S,Y:!0},((T,e,a)=>{const[m,c,o]=T;m===t&&c===v&&(s=!0),a.done()})).next((()=>s))}function _o(f){return bn(f,Dr)}function ic(f){return bn(f,Jc)}function HI(f){return bn(f,dp)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new Zh(0)}static ar(){return new Zh(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(t,i){this.referenceDelegate=t,this.serializer=i}allocateTargetId(t){return this.ur(t).next((i=>{const n=new Zh(i.highestTargetId);return i.highestTargetId=n.next(),this.cr(t,i).next((()=>i.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.ur(t).next((i=>Te.fromTimestamp(new gi(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.ur(t).next((i=>i.highestListenSequenceNumber))}setTargetsMetadata(t,i,n){return this.ur(t).next((v=>(v.highestListenSequenceNumber=i,n&&(v.lastRemoteSnapshotVersion=n.toTimestamp()),i>v.highestListenSequenceNumber&&(v.highestListenSequenceNumber=i),this.cr(t,v))))}addTargetData(t,i){return this.lr(t,i).next((()=>this.ur(t).next((n=>(n.targetCount+=1,this.hr(i,n),this.cr(t,n))))))}updateTargetData(t,i){return this.lr(t,i)}removeTargetData(t,i){return this.removeMatchingKeysForTargetId(t,i.targetId).next((()=>Zu(t).delete(i.targetId))).next((()=>this.ur(t))).next((n=>(ge(n.targetCount>0,8065),n.targetCount-=1,this.cr(t,n))))}removeTargets(t,i,n){let v=0;const S=[];return Zu(t).ee(((s,T)=>{const e=Od(T);e.sequenceNumber<=i&&n.get(e.targetId)===null&&(v++,S.push(this.removeTargetData(t,e)))})).next((()=>Et.waitFor(S))).next((()=>v))}forEachTarget(t,i){return Zu(t).ee(((n,v)=>{const S=Od(v);i(S)}))}ur(t){return jA(t).get(vg).next((i=>(ge(i!==null,2888),i)))}cr(t,i){return jA(t).put(vg,i)}lr(t,i){return Zu(t).put(UI(this.serializer,i))}hr(t,i){let n=!1;return t.targetId>i.highestTargetId&&(i.highestTargetId=t.targetId,n=!0),t.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.ur(t).next((i=>i.targetCount))}getTargetData(t,i){const n=Yh(i),v=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let S=null;return Zu(t).ee({range:v,index:bb},((s,T,e)=>{const a=Od(T);Yp(i,a.target)&&(S=a,e.done())})).next((()=>S))}addMatchingKeys(t,i,n){const v=[],S=Yo(t);return i.forEach((s=>{const T=os(s.path);v.push(S.put({targetId:n,path:T})),v.push(this.referenceDelegate.addReference(t,n,s))})),Et.waitFor(v)}removeMatchingKeys(t,i,n){const v=Yo(t);return Et.forEach(i,(S=>{const s=os(S.path);return Et.waitFor([v.delete([n,s]),this.referenceDelegate.removeReference(t,n,S)])}))}removeMatchingKeysForTargetId(t,i){const n=Yo(t),v=IDBKeyRange.bound([i],[i+1],!1,!0);return n.delete(v)}getMatchingKeysForTargetId(t,i){const n=IDBKeyRange.bound([i],[i+1],!1,!0),v=Yo(t);let S=Ue();return v.ee({range:n,Y:!0},((s,T,e)=>{const a=ma(s[1]),m=new qt(a);S=S.add(m)})).next((()=>S))}containsKey(t,i){const n=os(i.path),v=IDBKeyRange.bound([n],[gb(n)],!1,!0);let S=0;return Yo(t).ee({index:iE,Y:!0,range:v},(([s,T],e,a)=>{s!==0&&(S++,a.done())})).next((()=>S>0))}At(t,i){return Zu(t).get(i).next((n=>n?Od(n):null))}}function Zu(f){return bn(f,qc)}function jA(f){return bn(f,zh)}function Yo(f){return bn(f,tf)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="LruGarbageCollector",XI=1048576;function ZA([f,t],[i,n]){const v=Le(f,i);return v===0?Le(t,n):v}class wH{constructor(t){this.Pr=t,this.buffer=new Ai(ZA),this.Tr=0}Ir(){return++this.Tr}Er(t){const i=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(i);else{const n=this.buffer.last();ZA(i,n)<0&&(this.buffer=this.buffer.delete(n).add(i))}}get maxValue(){return this.buffer.last()[0]}}class kI{constructor(t,i,n){this.garbageCollector=t,this.asyncQueue=i,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){Xt(QA,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Fl(i)?Xt(QA,"Ignoring IndexedDB error during garbage collection: ",i):await Ll(i)}await this.Ar(3e5)}))}}class AH{constructor(t,i){this.Vr=t,this.params=i}calculateTargetCount(t,i){return this.Vr.dr(t).next((n=>Math.floor(i/100*n)))}nthSequenceNumber(t,i){if(i===0)return Et.resolve(ws.ce);const n=new wH(i);return this.Vr.forEachTarget(t,(v=>n.Er(v.sequenceNumber))).next((()=>this.Vr.mr(t,(v=>n.Er(v))))).next((()=>n.maxValue))}removeTargets(t,i,n){return this.Vr.removeTargets(t,i,n)}removeOrphanedDocuments(t,i){return this.Vr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(Xt("LruGarbageCollector","Garbage collection skipped; disabled"),Et.resolve(KA)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(Xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KA):this.gr(t,i)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,i){let n,v,S,s,T,e,a;const m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((c=>(c>this.params.maximumSequenceNumbersToCollect?(Xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${c}`),v=this.params.maximumSequenceNumbersToCollect):v=c,s=Date.now(),this.nthSequenceNumber(t,v)))).next((c=>(n=c,T=Date.now(),this.removeTargets(t,n,i)))).next((c=>(S=c,e=Date.now(),this.removeOrphanedDocuments(t,n)))).next((c=>(a=Date.now(),qu()<=ei.DEBUG&&Xt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-m}ms
	Determined least recently used ${v} in `+(T-s)+`ms
	Removed ${S} targets in `+(e-T)+`ms
	Removed ${c} documents in `+(a-e)+`ms
Total Duration: ${a-m}ms`),Et.resolve({didRun:!0,sequenceNumbersCollected:v,targetsRemoved:S,documentsRemoved:c}))))}}function YI(f,t){return new AH(f,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{constructor(t,i){this.db=t,this.garbageCollector=YI(this,i)}dr(t){const i=this.pr(t);return this.db.getTargetCache().getTargetCount(t).next((n=>i.next((v=>n+v))))}pr(t){let i=0;return this.mr(t,(n=>{i++})).next((()=>i))}forEachTarget(t,i){return this.db.getTargetCache().forEachTarget(t,i)}mr(t,i){return this.yr(t,((n,v)=>i(v)))}addReference(t,i,n){return vm(t,n)}removeReference(t,i,n){return vm(t,n)}removeTargets(t,i,n){return this.db.getTargetCache().removeTargets(t,i,n)}markPotentiallyOrphaned(t,i){return vm(t,i)}wr(t,i){return(function(v,S){let s=!1;return HI(v).te((T=>WI(v,T,S).next((e=>(e&&(s=!0),Et.resolve(!e)))))).next((()=>s))})(t,i)}removeOrphanedDocuments(t,i){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),v=[];let S=0;return this.yr(t,((s,T)=>{if(T<=i){const e=this.wr(t,s).next((a=>{if(!a)return S++,n.getEntry(t,s).next((()=>(n.removeEntry(s,Te.min()),Yo(t).delete((function(c){return[0,os(c.path)]})(s)))))}));v.push(e)}})).next((()=>Et.waitFor(v))).next((()=>n.apply(t))).next((()=>S))}removeTarget(t,i){const n=i.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,i){return vm(t,i)}yr(t,i){const n=Yo(t);let v,S=ws.ce;return n.ee({index:iE},(([s,T],{path:e,sequenceNumber:a})=>{s===0?(S!==ws.ce&&i(new qt(ma(v)),S),S=a,v=e):S=ws.ce})).next((()=>{S!==ws.ce&&i(new qt(ma(v)),S)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function vm(f,t){return Yo(f).put((function(n,v){return{targetId:0,path:os(n.path),sequenceNumber:v}})(t,f.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.changes=new wo((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,Ni.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const n=this.changes.get(i);return n!==void 0?Et.resolve(n):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,i,n){return ih(t).put(n)}removeEntry(t,i,n){return ih(t).delete((function(S,s){const T=S.path.toArray();return[T.slice(0,T.length-2),T[T.length-2],yg(s),T[T.length-1]]})(i,n))}updateMetadata(t,i){return this.getMetadata(t).next((n=>(n.byteSize+=i,this.br(t,n))))}getEntry(t,i){let n=Ni.newInvalidDocument(i);return ih(t).ee({index:Bm,range:IDBKeyRange.only(xd(i))},((v,S)=>{n=this.Sr(i,S)})).next((()=>n))}Dr(t,i){let n={size:0,document:Ni.newInvalidDocument(i)};return ih(t).ee({index:Bm,range:IDBKeyRange.only(xd(i))},((v,S)=>{n={document:this.Sr(i,S),size:Eg(S)}})).next((()=>n))}getEntries(t,i){let n=Cs();return this.Cr(t,i,((v,S)=>{const s=this.Sr(v,S);n=n.insert(v,s)})).next((()=>n))}vr(t,i){let n=Cs(),v=new Fi(qt.comparator);return this.Cr(t,i,((S,s)=>{const T=this.Sr(S,s);n=n.insert(S,T),v=v.insert(S,Eg(s))})).next((()=>({documents:n,Fr:v})))}Cr(t,i,n){if(i.isEmpty())return Et.resolve();let v=new Ai(tC);i.forEach((e=>v=v.add(e)));const S=IDBKeyRange.bound(xd(v.first()),xd(v.last())),s=v.getIterator();let T=s.getNext();return ih(t).ee({index:Bm,range:S},((e,a,m)=>{const c=qt.fromSegments([...a.prefixPath,a.collectionGroup,a.documentId]);for(;T&&tC(T,c)<0;)n(T,null),T=s.getNext();T&&T.isEqual(c)&&(n(T,a),T=s.hasNext()?s.getNext():null),T?m.j(xd(T)):m.done()})).next((()=>{for(;T;)n(T,null),T=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(t,i,n,v,S){const s=i.path,T=[s.popLast().toArray(),s.lastSegment(),yg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],e=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ih(t).H(IDBKeyRange.bound(T,e,!0)).next((a=>{S==null||S.incrementDocumentReadCount(a.length);let m=Cs();for(const c of a){const o=this.Sr(qt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o.isFoundDocument()&&(Kp(i,o)||v.has(o.key))&&(m=m.insert(o.key,o))}return m}))}getAllFromCollectionGroup(t,i,n,v){let S=Cs();const s=qA(i,n),T=qA(i,tr.max());return ih(t).ee({index:Pb,range:IDBKeyRange.bound(s,T,!0)},((e,a,m)=>{const c=this.Sr(qt.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);S=S.insert(c.key,c),S.size===v&&m.done()})).next((()=>S))}newChangeBuffer(t){return new RH(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((i=>i.byteSize))}getMetadata(t){return JA(t).get(b1).next((i=>(ge(!!i,20021),i)))}br(t,i){return JA(t).put(b1,i)}Sr(t,i){if(i){const n=fH(this.serializer,i);if(!(n.isNoDocument()&&n.version.isEqual(Te.min())))return n}return Ni.newInvalidDocument(t)}}function KI(f){return new MH(f)}class RH extends $I{constructor(t,i){super(),this.Mr=t,this.trackRemovals=i,this.Or=new wo((n=>n.toString()),((n,v)=>n.isEqual(v)))}applyChanges(t){const i=[];let n=0,v=new Ai(((S,s)=>Le(S.canonicalString(),s.canonicalString())));return this.changes.forEach(((S,s)=>{const T=this.Or.get(S);if(i.push(this.Mr.removeEntry(t,S,T.readTime)),s.isValidDocument()){const e=NA(this.Mr.serializer,s);v=v.add(S.path.popLast());const a=Eg(e);n+=a-T.size,i.push(this.Mr.addEntry(t,S,e))}else if(n-=T.size,this.trackRemovals){const e=NA(this.Mr.serializer,s.convertToNoDocument(Te.min()));i.push(this.Mr.addEntry(t,S,e))}})),v.forEach((S=>{i.push(this.Mr.indexManager.addToCollectionParentIndex(t,S))})),i.push(this.Mr.updateMetadata(t,n)),Et.waitFor(i)}getFromCache(t,i){return this.Mr.Dr(t,i).next((n=>(this.Or.set(i,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(t,i){return this.Mr.vr(t,i).next((({documents:n,Fr:v})=>(v.forEach(((S,s)=>{this.Or.set(S,{size:s,readTime:n.get(S).readTime})})),n)))}}function JA(f){return bn(f,pp)}function ih(f){return bn(f,pg)}function xd(f){const t=f.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function qA(f,t){const i=t.documentKey.path.toArray();return[f,yg(t.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function tC(f,t){const i=f.path.toArray(),n=t.path.toArray();let v=0;for(let S=0;S<i.length-2&&S<n.length-2;++S)if(v=Le(i[S],n[S]),v)return v;return v=Le(i.length,n.length),v||(v=Le(i[i.length-2],n[n.length-2]),v||Le(i[i.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t,i,n,v){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=n,this.indexManager=v}getDocument(t,i){let n=null;return this.documentOverlayCache.getOverlay(t,i).next((v=>(n=v,this.remoteDocumentCache.getEntry(t,i)))).next((v=>(n!==null&&jd(n.mutation,v,As.empty(),gi.now()),v)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((n=>this.getLocalViewOfDocuments(t,n,Ue()).next((()=>n))))}getLocalViewOfDocuments(t,i,n=Ue()){const v=ga();return this.populateOverlays(t,v,i).next((()=>this.computeViews(t,i,v,n).next((S=>{let s=Fd();return S.forEach(((T,e)=>{s=s.insert(T,e.overlayedDocument)})),s}))))}getOverlayedDocuments(t,i){const n=ga();return this.populateOverlays(t,n,i).next((()=>this.computeViews(t,i,n,Ue())))}populateOverlays(t,i,n){const v=[];return n.forEach((S=>{i.has(S)||v.push(S)})),this.documentOverlayCache.getOverlays(t,v).next((S=>{S.forEach(((s,T)=>{i.set(s,T)}))}))}computeViews(t,i,n,v){let S=Cs();const s=Kd(),T=(function(){return Kd()})();return i.forEach(((e,a)=>{const m=n.get(a.key);v.has(a.key)&&(m===void 0||m.mutation instanceof Ao)?S=S.insert(a.key,a):m!==void 0?(s.set(a.key,m.mutation.getFieldMask()),jd(m.mutation,a,m.mutation.getFieldMask(),gi.now())):s.set(a.key,As.empty())})),this.recalculateAndSaveOverlays(t,S).next((e=>(e.forEach(((a,m)=>s.set(a,m))),i.forEach(((a,m)=>T.set(a,new PH(m,s.get(a)??null)))),T)))}recalculateAndSaveOverlays(t,i){const n=Kd();let v=new Fi(((s,T)=>s-T)),S=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((s=>{for(const T of s)T.keys().forEach((e=>{const a=i.get(e);if(a===null)return;let m=n.get(e)||As.empty();m=T.applyToLocalView(a,m),n.set(e,m);const c=(v.get(T.batchId)||Ue()).add(e);v=v.insert(T.batchId,c)}))})).next((()=>{const s=[],T=v.getReverseIterator();for(;T.hasNext();){const e=T.getNext(),a=e.key,m=e.value,c=hI();m.forEach((o=>{if(!S.has(o)){const u=mI(i.get(o),n.get(o));u!==null&&c.set(o,u),S=S.add(o)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return Et.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,i,n,v){return OW(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):hE(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,n,v):this.getDocumentsMatchingCollectionQuery(t,i,n,v)}getNextDocuments(t,i,n,v){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,n,v).next((S=>{const s=v-S.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,n.largestBatchId,v-S.size):Et.resolve(ga());let T=jc,e=S;return s.next((a=>Et.forEach(a,((m,c)=>(T<c.largestBatchId&&(T=c.largestBatchId),S.get(m)?Et.resolve():this.remoteDocumentCache.getEntry(t,m).next((o=>{e=e.insert(m,o)}))))).next((()=>this.populateOverlays(t,a,S))).next((()=>this.computeViews(t,e,a,Ue()))).next((m=>({batchId:T,changes:lI(m)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new qt(i)).next((n=>{let v=Fd();return n.isFoundDocument()&&(v=v.insert(n.key,n)),v}))}getDocumentsMatchingCollectionGroupQuery(t,i,n,v){const S=i.collectionGroup;let s=Fd();return this.indexManager.getCollectionParents(t,S).next((T=>Et.forEach(T,(e=>{const a=(function(c,o){return new So(o,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)})(i,e.child(S));return this.getDocumentsMatchingCollectionQuery(t,a,n,v).next((m=>{m.forEach(((c,o)=>{s=s.insert(c,o)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,i,n,v){let S;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,n.largestBatchId).next((s=>(S=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,n,S,v)))).next((s=>{S.forEach(((e,a)=>{const m=a.getKey();s.get(m)===null&&(s=s.insert(m,Ni.newInvalidDocument(m)))}));let T=Fd();return s.forEach(((e,a)=>{const m=S.get(e);m!==void 0&&jd(m.mutation,a,As.empty(),gi.now()),Kp(i,a)&&(T=T.insert(e,a))})),T}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,i){return Et.resolve(this.Nr.get(i))}saveBundleMetadata(t,i){return this.Nr.set(i.id,(function(v){return{id:v.id,version:v.version,createTime:on(v.createTime)}})(i)),Et.resolve()}getNamedQuery(t,i){return Et.resolve(this.Br.get(i))}saveNamedQuery(t,i){return this.Br.set(i.name,(function(v){return{name:v.name,query:f0(v.bundledQuery),readTime:on(v.readTime)}})(i)),Et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(){this.overlays=new Fi(qt.comparator),this.Lr=new Map}getOverlay(t,i){return Et.resolve(this.overlays.get(i))}getOverlays(t,i){const n=ga();return Et.forEach(i,(v=>this.getOverlay(t,v).next((S=>{S!==null&&n.set(v,S)})))).next((()=>n))}saveOverlays(t,i,n){return n.forEach(((v,S)=>{this.bt(t,i,S)})),Et.resolve()}removeOverlaysForBatchId(t,i,n){const v=this.Lr.get(n);return v!==void 0&&(v.forEach((S=>this.overlays=this.overlays.remove(S))),this.Lr.delete(n)),Et.resolve()}getOverlaysForCollection(t,i,n){const v=ga(),S=i.length+1,s=new qt(i.child("")),T=this.overlays.getIteratorFrom(s);for(;T.hasNext();){const e=T.getNext().value,a=e.getKey();if(!i.isPrefixOf(a.path))break;a.path.length===S&&e.largestBatchId>n&&v.set(e.getKey(),e)}return Et.resolve(v)}getOverlaysForCollectionGroup(t,i,n,v){let S=new Fi(((a,m)=>a-m));const s=this.overlays.getIterator();for(;s.hasNext();){const a=s.getNext().value;if(a.getKey().getCollectionGroup()===i&&a.largestBatchId>n){let m=S.get(a.largestBatchId);m===null&&(m=ga(),S=S.insert(a.largestBatchId,m)),m.set(a.getKey(),a)}}const T=ga(),e=S.getIterator();for(;e.hasNext()&&(e.getNext().value.forEach(((a,m)=>T.set(a,m))),!(T.size()>=v)););return Et.resolve(T)}bt(t,i,n){const v=this.overlays.get(n.key);if(v!==null){const s=this.Lr.get(v.largestBatchId).delete(n.key);this.Lr.set(v.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new vE(i,n));let S=this.Lr.get(i);S===void 0&&(S=Ue(),this.Lr.set(i,S)),this.Lr.set(i,S.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH{constructor(){this.sessionToken=Qi.EMPTY_BYTE_STRING}getSessionToken(t){return Et.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Et.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.kr=new Ai(Dn.Kr),this.qr=new Ai(Dn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,i){const n=new Dn(t,i);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(t,i){t.forEach((n=>this.addReference(n,i)))}removeReference(t,i){this.Wr(new Dn(t,i))}Qr(t,i){t.forEach((n=>this.removeReference(n,i)))}Gr(t){const i=new qt(new Ye([])),n=new Dn(i,t),v=new Dn(i,t+1),S=[];return this.qr.forEachInRange([n,v],(s=>{this.Wr(s),S.push(s.key)})),S}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const i=new qt(new Ye([])),n=new Dn(i,t),v=new Dn(i,t+1);let S=Ue();return this.qr.forEachInRange([n,v],(s=>{S=S.add(s.key)})),S}containsKey(t){const i=new Dn(t,0),n=this.kr.firstAfterOrEqual(i);return n!==null&&t.isEqual(n.key)}}class Dn{constructor(t,i){this.key=t,this.Hr=i}static Kr(t,i){return qt.comparator(t.key,i.key)||Le(t.Hr,i.Hr)}static Ur(t,i){return Le(t.Hr,i.Hr)||qt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.Yn=1,this.Jr=new Ai(Dn.Kr)}checkEmpty(t){return Et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,n,v){const S=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new dE(S,i,n,v);this.mutationQueue.push(s);for(const T of v)this.Jr=this.Jr.add(new Dn(T.key,S)),this.indexManager.addToCollectionParentIndex(t,T.key.path.popLast());return Et.resolve(s)}lookupMutationBatch(t,i){return Et.resolve(this.Zr(i))}getNextMutationBatchAfterBatchId(t,i){const n=i+1,v=this.Xr(n),S=v<0?0:v;return Et.resolve(this.mutationQueue.length>S?this.mutationQueue[S]:null)}getHighestUnacknowledgedBatchId(){return Et.resolve(this.mutationQueue.length===0?pl:this.Yn-1)}getAllMutationBatches(t){return Et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const n=new Dn(i,0),v=new Dn(i,Number.POSITIVE_INFINITY),S=[];return this.Jr.forEachInRange([n,v],(s=>{const T=this.Zr(s.Hr);S.push(T)})),Et.resolve(S)}getAllMutationBatchesAffectingDocumentKeys(t,i){let n=new Ai(Le);return i.forEach((v=>{const S=new Dn(v,0),s=new Dn(v,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([S,s],(T=>{n=n.add(T.Hr)}))})),Et.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(t,i){const n=i.path,v=n.length+1;let S=n;qt.isDocumentKey(S)||(S=S.child(""));const s=new Dn(new qt(S),0);let T=new Ai(Le);return this.Jr.forEachWhile((e=>{const a=e.key.path;return!!n.isPrefixOf(a)&&(a.length===v&&(T=T.add(e.Hr)),!0)}),s),Et.resolve(this.Yr(T))}Yr(t){const i=[];return t.forEach((n=>{const v=this.Zr(n);v!==null&&i.push(v)})),i}removeMutationBatch(t,i){ge(this.ei(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return Et.forEach(i.mutations,(v=>{const S=new Dn(v.key,i.batchId);return n=n.delete(S),this.referenceDelegate.markPotentiallyOrphaned(t,v.key)})).next((()=>{this.Jr=n}))}nr(t){}containsKey(t,i){const n=new Dn(i,0),v=this.Jr.firstAfterOrEqual(n);return Et.resolve(i.isEqual(v&&v.key))}performConsistencyCheck(t){return this.mutationQueue.length,Et.resolve()}ei(t,i){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const i=this.Xr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(t){this.ti=t,this.docs=(function(){return new Fi(qt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const n=i.key,v=this.docs.get(n),S=v?v.size:0,s=this.ti(i);return this.docs=this.docs.insert(n,{document:i.mutableCopy(),size:s}),this.size+=s-S,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const n=this.docs.get(i);return Et.resolve(n?n.document.mutableCopy():Ni.newInvalidDocument(i))}getEntries(t,i){let n=Cs();return i.forEach((v=>{const S=this.docs.get(v);n=n.insert(v,S?S.document.mutableCopy():Ni.newInvalidDocument(v))})),Et.resolve(n)}getDocumentsMatchingQuery(t,i,n,v){let S=Cs();const s=i.path,T=new qt(s.child("__id-9223372036854775808__")),e=this.docs.getIteratorFrom(T);for(;e.hasNext();){const{key:a,value:{document:m}}=e.getNext();if(!s.isPrefixOf(a.path))break;a.path.length>s.length+1||tE(Sb(m),n)<=0||(v.has(m.key)||Kp(i,m))&&(S=S.insert(m.key,m.mutableCopy()))}return Et.resolve(S)}getAllFromCollectionGroup(t,i,n,v){ce(9500)}ni(t,i){return Et.forEach(this.docs,(n=>i(n)))}newChangeBuffer(t){return new OH(this)}getSize(t){return Et.resolve(this.size)}}class OH extends $I{constructor(t){super(),this.Mr=t}applyChanges(t){const i=[];return this.changes.forEach(((n,v)=>{v.isValidDocument()?i.push(this.Mr.addEntry(t,v)):this.Mr.removeEntry(n)})),Et.waitFor(i)}getFromCache(t,i){return this.Mr.getEntry(t,i)}getAllFromCache(t,i){return this.Mr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{constructor(t){this.persistence=t,this.ri=new wo((i=>Yh(i)),Yp),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.ii=0,this.si=new TE,this.targetCount=0,this.oi=Zh._r()}forEachTarget(t,i){return this.ri.forEach(((n,v)=>i(v))),Et.resolve()}getLastRemoteSnapshotVersion(t){return Et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Et.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),Et.resolve(this.highestTargetId)}setTargetsMetadata(t,i,n){return n&&(this.lastRemoteSnapshotVersion=n),i>this.ii&&(this.ii=i),Et.resolve()}lr(t){this.ri.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.oi=new Zh(i),this.highestTargetId=i),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,i){return this.lr(i),this.targetCount+=1,Et.resolve()}updateTargetData(t,i){return this.lr(i),Et.resolve()}removeTargetData(t,i){return this.ri.delete(i.target),this.si.Gr(i.targetId),this.targetCount-=1,Et.resolve()}removeTargets(t,i,n){let v=0;const S=[];return this.ri.forEach(((s,T)=>{T.sequenceNumber<=i&&n.get(T.targetId)===null&&(this.ri.delete(s),S.push(this.removeMatchingKeysForTargetId(t,T.targetId)),v++)})),Et.waitFor(S).next((()=>v))}getTargetCount(t){return Et.resolve(this.targetCount)}getTargetData(t,i){const n=this.ri.get(i)||null;return Et.resolve(n)}addMatchingKeys(t,i,n){return this.si.$r(i,n),Et.resolve()}removeMatchingKeys(t,i,n){this.si.Qr(i,n);const v=this.persistence.referenceDelegate,S=[];return v&&i.forEach((s=>{S.push(v.markPotentiallyOrphaned(t,s))})),Et.waitFor(S)}removeMatchingKeysForTargetId(t,i){return this.si.Gr(i),Et.resolve()}getMatchingKeysForTargetId(t,i){const n=this.si.jr(i);return Et.resolve(n)}containsKey(t,i){return Et.resolve(this.si.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t,i){this._i={},this.overlays={},this.ai=new ws(0),this.ui=!1,this.ui=!0,this.ci=new LH,this.referenceDelegate=t(this),this.li=new NH(this),this.indexManager=new TH,this.remoteDocumentCache=(function(v){return new DH(v)})((n=>this.referenceDelegate.hi(n))),this.serializer=new BI(i),this.Pi=new bH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new IH,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let n=this._i[t.toKey()];return n||(n=new FH(i,this.referenceDelegate),this._i[t.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,i,n){Xt("MemoryPersistence","Starting transaction:",t);const v=new BH(this.ai.next());return this.referenceDelegate.Ti(),n(v).next((S=>this.referenceDelegate.Ii(v).next((()=>S)))).toPromise().then((S=>(v.raiseOnCommittedEvent(),S)))}Ei(t,i){return Et.or(Object.values(this._i).map((n=>()=>n.containsKey(t,i))))}}class BH extends Ab{constructor(t){super(),this.currentSequenceNumber=t}}class v0{constructor(t){this.persistence=t,this.Ri=new TE,this.Ai=null}static Vi(t){return new v0(t)}get di(){if(this.Ai)return this.Ai;throw ce(60996)}addReference(t,i,n){return this.Ri.addReference(n,i),this.di.delete(n.toString()),Et.resolve()}removeReference(t,i,n){return this.Ri.removeReference(n,i),this.di.add(n.toString()),Et.resolve()}markPotentiallyOrphaned(t,i){return this.di.add(i.toString()),Et.resolve()}removeTarget(t,i){this.Ri.Gr(i.targetId).forEach((v=>this.di.add(v.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,i.targetId).next((v=>{v.forEach((S=>this.di.add(S.toString())))})).next((()=>n.removeTargetData(t,i)))}Ti(){this.Ai=new Set}Ii(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Et.forEach(this.di,(n=>{const v=qt.fromPath(n);return this.mi(t,v).next((S=>{S||i.removeEntry(v,Te.min())}))})).next((()=>(this.Ai=null,i.apply(t))))}updateLimboDocument(t,i){return this.mi(t,i).next((n=>{n?this.di.delete(i.toString()):this.di.add(i.toString())}))}hi(t){return 0}mi(t,i){return Et.or([()=>Et.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ei(t,i)])}}class Sg{constructor(t,i){this.persistence=t,this.fi=new wo((n=>os(n.path)),((n,v)=>n.isEqual(v))),this.garbageCollector=YI(this,i)}static Vi(t,i){return new Sg(t,i)}Ti(){}Ii(t){return Et.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}dr(t){const i=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>i.next((v=>n+v))))}pr(t){let i=0;return this.mr(t,(n=>{i++})).next((()=>i))}mr(t,i){return Et.forEach(this.fi,((n,v)=>this.wr(t,n,v).next((S=>S?Et.resolve():i(v)))))}removeTargets(t,i,n){return this.persistence.getTargetCache().removeTargets(t,i,n)}removeOrphanedDocuments(t,i){let n=0;const v=this.persistence.getRemoteDocumentCache(),S=v.newChangeBuffer();return v.ni(t,(s=>this.wr(t,s,i).next((T=>{T||(n++,S.removeEntry(s,Te.min()))})))).next((()=>S.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,i){return this.fi.set(i,t.currentSequenceNumber),Et.resolve()}removeTarget(t,i){const n=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,i,n){return this.fi.set(n,t.currentSequenceNumber),Et.resolve()}removeReference(t,i,n){return this.fi.set(n,t.currentSequenceNumber),Et.resolve()}updateLimboDocument(t,i){return this.fi.set(i,t.currentSequenceNumber),Et.resolve()}hi(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Vm(t.data.value)),i}wr(t,i,n){return Et.or([()=>this.persistence.Ei(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const v=this.fi.get(i);return Et.resolve(v!==void 0&&v>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(t){this.serializer=t}k(t,i,n,v){const S=new e0("createOrUpgrade",i);n<1&&v>=1&&((function(e){e.createObjectStore(kp)})(t),(function(e){e.createObjectStore(dp,{keyPath:j_}),e.createObjectStore(Dr,{keyPath:cA,autoIncrement:!0}).createIndex(Sh,fA,{unique:!0}),e.createObjectStore(Jc)})(t),eC(t),(function(e){e.createObjectStore(hh)})(t));let s=Et.resolve();return n<3&&v>=3&&(n!==0&&((function(e){e.deleteObjectStore(tf),e.deleteObjectStore(qc),e.deleteObjectStore(zh)})(t),eC(t)),s=s.next((()=>(function(e){const a=e.store(zh),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return a.put(vg,m)})(S)))),n<4&&v>=4&&(n!==0&&(s=s.next((()=>(function(e,a){return a.store(Dr).H().next((c=>{e.deleteObjectStore(Dr),e.createObjectStore(Dr,{keyPath:cA,autoIncrement:!0}).createIndex(Sh,fA,{unique:!0});const o=a.store(Dr),u=c.map((r=>o.put(r)));return Et.waitFor(u)}))})(t,S)))),s=s.next((()=>{(function(e){e.createObjectStore(ef,{keyPath:sW})})(t)}))),n<5&&v>=5&&(s=s.next((()=>this.gi(S)))),n<6&&v>=6&&(s=s.next((()=>((function(e){e.createObjectStore(pp)})(t),this.pi(S))))),n<7&&v>=7&&(s=s.next((()=>this.yi(S)))),n<8&&v>=8&&(s=s.next((()=>this.wi(t,S)))),n<9&&v>=9&&(s=s.next((()=>{(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(t)}))),n<10&&v>=10&&(s=s.next((()=>this.bi(S)))),n<11&&v>=11&&(s=s.next((()=>{(function(e){e.createObjectStore(i0,{keyPath:rW})})(t),(function(e){e.createObjectStore(n0,{keyPath:aW})})(t)}))),n<12&&v>=12&&(s=s.next((()=>{(function(e){const a=e.createObjectStore(s0,{keyPath:dW});a.createIndex(L1,pW,{unique:!1}),a.createIndex(Fb,vW,{unique:!1})})(t)}))),n<13&&v>=13&&(s=s.next((()=>(function(e){const a=e.createObjectStore(pg,{keyPath:Z_});a.createIndex(Bm,J_),a.createIndex(Pb,q_)})(t))).next((()=>this.Si(t,S))).next((()=>t.deleteObjectStore(hh)))),n<14&&v>=14&&(s=s.next((()=>this.Di(t,S)))),n<15&&v>=15&&(s=s.next((()=>(function(e){e.createObjectStore(nE,{keyPath:oW,autoIncrement:!0}).createIndex(I1,lW,{unique:!1}),e.createObjectStore(kd,{keyPath:hW}).createIndex(Ib,uW,{unique:!1}),e.createObjectStore(Yd,{keyPath:cW}).createIndex(Lb,fW,{unique:!1})})(t)))),n<16&&v>=16&&(s=s.next((()=>{i.objectStore(kd).clear()})).next((()=>{i.objectStore(Yd).clear()}))),n<17&&v>=17&&(s=s.next((()=>{(function(e){e.createObjectStore(sE,{keyPath:mW})})(t)}))),n<18&&v>=18&&tb()&&(s=s.next((()=>{i.objectStore(kd).clear()})).next((()=>{i.objectStore(Yd).clear()}))),s}pi(t){let i=0;return t.store(hh).ee(((n,v)=>{i+=Eg(v)})).next((()=>{const n={byteSize:i};return t.store(pp).put(b1,n)}))}gi(t){const i=t.store(dp),n=t.store(Dr);return i.H().next((v=>Et.forEach(v,(S=>{const s=IDBKeyRange.bound([S.userId,pl],[S.userId,S.lastAcknowledgedBatchId]);return n.H(Sh,s).next((T=>Et.forEach(T,(e=>{ge(e.userId===S.userId,18650,"Cannot process batch from unexpected user",{batchId:e.batchId});const a=ph(this.serializer,e);return _I(t,S.userId,a).next((()=>{}))}))))}))))}yi(t){const i=t.store(tf),n=t.store(hh);return t.store(zh).get(vg).next((v=>{const S=[];return n.ee(((s,T)=>{const e=new Ye(s),a=(function(c){return[0,os(c)]})(e);S.push(i.get(a).next((m=>m?Et.resolve():(c=>i.put({targetId:0,path:os(c),sequenceNumber:v.highestListenSequenceNumber}))(e))))})).next((()=>Et.waitFor(S)))}))}wi(t,i){t.createObjectStore(vp,{keyPath:nW});const n=i.store(vp),v=new yE,S=s=>{if(v.add(s)){const T=s.lastSegment(),e=s.popLast();return n.put({collectionId:T,parent:os(e)})}};return i.store(hh).ee({Y:!0},((s,T)=>{const e=new Ye(s);return S(e.popLast())})).next((()=>i.store(Jc).ee({Y:!0},(([s,T,e],a)=>{const m=ma(T);return S(m.popLast())}))))}bi(t){const i=t.store(qc);return i.ee(((n,v)=>{const S=Od(v),s=UI(this.serializer,S);return i.put(s)}))}Si(t,i){const n=i.store(hh),v=[];return n.ee(((S,s)=>{const T=i.store(pg),e=(function(c){return c.document?new qt(Ye.fromString(c.document.name).popFirst(5)):c.noDocument?qt.fromSegments(c.noDocument.path):c.unknownDocument?qt.fromSegments(c.unknownDocument.path):ce(36783)})(s).path.toArray(),a={prefixPath:e.slice(0,e.length-2),collectionGroup:e[e.length-2],documentId:e[e.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};v.push(T.put(a))})).next((()=>Et.waitFor(v)))}Di(t,i){const n=i.store(Dr),v=KI(this.serializer),S=new EE(v0.Vi,this.serializer.yt);return n.H().next((s=>{const T=new Map;return s.forEach((e=>{let a=T.get(e.userId)??Ue();ph(this.serializer,e).keys().forEach((m=>a=a.add(m))),T.set(e.userId,a)})),Et.forEach(T,((e,a)=>{const m=new On(a),c=d0.wt(this.serializer,m),o=S.getIndexManager(m),u=p0.wt(m,this.serializer,o,S.referenceDelegate);return new jI(v,u,c,o).recalculateAndSaveOverlaysForDocumentKeys(new F1(i,ws.ce),e).next()}))}))}}function eC(f){f.createObjectStore(tf,{keyPath:eW}).createIndex(iE,iW,{unique:!0}),f.createObjectStore(qc,{keyPath:"targetId"}).createIndex(bb,tW,{unique:!0}),f.createObjectStore(zh)}const Wo="IndexedDbPersistence",Vx=18e5,zx=5e3,Gx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",QI="main";class SE{constructor(t,i,n,v,S,s,T,e,a,m,c=18){if(this.allowTabSynchronization=t,this.persistenceKey=i,this.clientId=n,this.Ci=S,this.window=s,this.document=T,this.Fi=a,this.Mi=m,this.xi=c,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=o=>Promise.resolve(),!SE.v())throw new Gt(Rt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CH(this,v),this.Ki=i+QI,this.serializer=new BI(e),this.qi=new Ea(this.Ki,this.xi,new UH(this.serializer)),this.ci=new pH,this.li=new SH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=KI(this.serializer),this.Pi=new dH,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,m===!1&&an(Wo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Gt(Rt.FAILED_PRECONDITION,Gx);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.li.getHighestSequenceNumber(t)))})).then((t=>{this.ai=new ws(t,this.Fi)})).then((()=>{this.ui=!0})).catch((t=>(this.qi&&this.qi.close(),Promise.reject(t))))}zi(t){return this.ki=async i=>{if(this.started)return t(i)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.qi.q((async i=>{i.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>mm(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(t).next((i=>{i||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(t))).next((i=>this.isPrimary&&!i?this.Ji(t).next((()=>!1)):!!i&&this.Zi(t).next((()=>!0)))))).catch((t=>{if(Fl(t))return Xt(Wo,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Xt(Wo,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Ci.enqueueRetryable((()=>this.ki(t))),this.isPrimary=t}))}ji(t){return yd(t).get(Yu).next((i=>Et.resolve(this.Xi(i))))}Yi(t){return mm(t).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Vx)){this.Li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(i=>{const n=bn(i,ef);return n.H().next((v=>{const S=this.ns(v,Vx),s=v.filter((T=>S.indexOf(T)===-1));return Et.forEach(s,(T=>n.delete(T.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ui)for(const i of t)this.Ui.removeItem(this.rs(i.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.Mi?Et.resolve(!0):yd(t).get(Yu).next((i=>{if(i!==null&&this.ts(i.leaseTimestampMs,zx)&&!this.ss(i.ownerId)){if(this.Xi(i)&&this.networkEnabled)return!0;if(!this.Xi(i)){if(!i.allowTabSynchronization)throw new Gt(Rt.FAILED_PRECONDITION,Gx);return!1}}return!(!this.networkEnabled||!this.inForeground)||mm(t).H().next((n=>this.ns(n,zx).find((v=>{if(this.clientId!==v.clientId){const S=!this.networkEnabled&&v.networkEnabled,s=!this.inForeground&&v.inForeground,T=this.networkEnabled===v.networkEnabled;if(S||s&&T)return!0}return!1}))===void 0))})).next((i=>(this.isPrimary!==i&&Xt(Wo,`Client ${i?"is":"is not"} eligible for a primary lease.`),i)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[kp,ef],(t=>{const i=new F1(t,ws.ce);return this.Ji(i).next((()=>this.Yi(i)))})),this.qi.close(),this.ls()}ns(t,i){return t.filter((n=>this.ts(n.updateTimeMs,i)&&!this.ss(n.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(t=>mm(t).H().next((i=>this.ns(i,Vx).map((n=>n.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(t,i){return p0.wt(t,this.serializer,i,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new EH(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return d0.wt(this.serializer,t)}getBundleCache(){return this.Pi}runTransaction(t,i,n){Xt(Wo,"Starting transaction:",t);const v=i==="readonly"?"readonly":"readwrite",S=(function(e){return e===18?yW:e===17?Bb:e===16?xW:e===15?rE:e===14?Nb:e===13?Ob:e===12?gW:e===11?Db:void ce(60245)})(this.xi);let s;return this.qi.runTransaction(t,v,S,(T=>(s=new F1(T,this.ai?this.ai.next():ws.ce),i==="readwrite-primary"?this.ji(s).next((e=>!!e||this.Hi(s))).next((e=>{if(!e)throw an(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Gt(Rt.FAILED_PRECONDITION,wb);return n(s)})).next((e=>this.Zi(s).next((()=>e)))):this.Ps(s).next((()=>n(s)))))).then((T=>(s.raiseOnCommittedEvent(),T)))}Ps(t){return yd(t).get(Yu).next((i=>{if(i!==null&&this.ts(i.leaseTimestampMs,zx)&&!this.ss(i.ownerId)&&!this.Xi(i)&&!(this.Mi||this.allowTabSynchronization&&i.allowTabSynchronization))throw new Gt(Rt.FAILED_PRECONDITION,Gx)}))}Zi(t){const i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yd(t).put(Yu,i)}static v(){return Ea.v()}Ji(t){const i=yd(t);return i.get(Yu).next((n=>this.Xi(n)?(Xt(Wo,"Releasing primary lease."),i.delete(Yu)):Et.resolve()))}ts(t,i){const n=Date.now();return!(t<n-i)&&(!(t>n)||(an(`Detected an update time that is in the future: ${t} > ${n}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Oi=()=>{this._s();const i=/(?:Version|Mobile)\/1[456]/;qP()&&(navigator.appVersion.match(i)||navigator.userAgent.match(i))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(t){var i;try{const n=((i=this.Ui)==null?void 0:i.getItem(this.rs(t)))!==null;return Xt(Wo,`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return an(Wo,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(t){an("Failed to set zombie client id.",t)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function yd(f){return bn(f,kp)}function mm(f){return bn(f,ef)}function wE(f,t){let i=f.projectId;return f.isDefaultDatabase||(i+="."+f.database),"firestore/"+t+"/"+i+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t,i,n,v){this.targetId=t,this.fromCache=i,this.Ts=n,this.Is=v}static Es(t,i){let n=Ue(),v=Ue();for(const S of i.docChanges)switch(S.type){case 0:n=n.add(S.doc.key);break;case 1:v=v.add(S.doc.key)}return new AE(t,i.fromCache,n,v)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return qP()?8:Cb(Rn())>0?6:4})()}initialize(t,i){this.fs=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,n,v){const S={result:null};return this.gs(t,i).next((s=>{S.result=s})).next((()=>{if(!S.result)return this.ps(t,i,v,n).next((s=>{S.result=s}))})).next((()=>{if(S.result)return;const s=new VH;return this.ys(t,i,s).next((T=>{if(S.result=T,this.As)return this.ws(t,i,s,T.size)}))})).next((()=>S.result))}ws(t,i,n,v){return n.documentReadCount<this.Vs?(qu()<=ei.DEBUG&&Xt("QueryEngine","SDK will not create cache indexes for query:",tc(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Et.resolve()):(qu()<=ei.DEBUG&&Xt("QueryEngine","Query:",tc(i),"scans",n.documentReadCount,"local documents and returns",v,"documents as results."),n.documentReadCount>this.ds*v?(qu()<=ei.DEBUG&&Xt("QueryEngine","The SDK decides to create cache indexes for query:",tc(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ls(i))):Et.resolve())}gs(t,i){if(CA(i))return Et.resolve(null);let n=ls(i);return this.indexManager.getIndexType(t,n).next((v=>v===0?null:(i.limit!==null&&v===1&&(i=xg(i,null,"F"),n=ls(i)),this.indexManager.getDocumentsMatchingTarget(t,n).next((S=>{const s=Ue(...S);return this.fs.getDocuments(t,s).next((T=>this.indexManager.getMinOffset(t,n).next((e=>{const a=this.bs(i,T);return this.Ss(i,a,s,e.readTime)?this.gs(t,xg(i,null,"F")):this.Ds(t,a,i,e)}))))})))))}ps(t,i,n,v){return CA(i)||v.isEqual(Te.min())?Et.resolve(null):this.fs.getDocuments(t,n).next((S=>{const s=this.bs(i,S);return this.Ss(i,s,n,v)?Et.resolve(null):(qu()<=ei.DEBUG&&Xt("QueryEngine","Re-using previous result from %s to execute query: %s",v.toString(),tc(i)),this.Ds(t,s,i,Eb(v,jc)).next((T=>T)))}))}bs(t,i){let n=new Ai(aI(t));return i.forEach(((v,S)=>{Kp(t,S)&&(n=n.add(S))})),n}Ss(t,i,n,v){if(t.limit===null)return!1;if(n.size!==i.size)return!0;const S=t.limitType==="F"?i.last():i.first();return!!S&&(S.hasPendingWrites||S.version.compareTo(v)>0)}ys(t,i,n){return qu()<=ei.DEBUG&&Xt("QueryEngine","Using full collection scan to execute query:",tc(i)),this.fs.getDocumentsMatchingQuery(t,i,tr.min(),n)}Ds(t,i,n,v){return this.fs.getDocumentsMatchingQuery(t,n,v).next((S=>(i.forEach((s=>{S=S.insert(s.key,s)})),S)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="LocalStore",zH=3e8;class GH{constructor(t,i,n,v){this.persistence=t,this.Cs=i,this.serializer=v,this.vs=new Fi(Le),this.Fs=new wo((S=>Yh(S)),Yp),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(n)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new jI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.vs)))}}function JI(f,t,i,n){return new GH(f,t,i,n)}async function qI(f,t){const i=ie(f);return await i.persistence.runTransaction("Handle user change","readonly",(n=>{let v;return i.mutationQueue.getAllMutationBatches(n).next((S=>(v=S,i.Os(t),i.mutationQueue.getAllMutationBatches(n)))).next((S=>{const s=[],T=[];let e=Ue();for(const a of v){s.push(a.batchId);for(const m of a.mutations)e=e.add(m.key)}for(const a of S){T.push(a.batchId);for(const m of a.mutations)e=e.add(m.key)}return i.localDocuments.getDocuments(n,e).next((a=>({Ns:a,removedBatchIds:s,addedBatchIds:T})))}))}))}function _H(f,t){const i=ie(f);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const v=t.batch.keys(),S=i.xs.newChangeBuffer({trackRemovals:!0});return(function(T,e,a,m){const c=a.batch,o=c.keys();let u=Et.resolve();return o.forEach((r=>{u=u.next((()=>m.getEntry(e,r))).next((h=>{const d=a.docVersions.get(r);ge(d!==null,48541),h.version.compareTo(d)<0&&(c.applyToRemoteDocument(h,a),h.isValidDocument()&&(h.setReadTime(a.commitVersion),m.addEntry(h)))}))})),u.next((()=>T.mutationQueue.removeMutationBatch(e,c)))})(i,n,t,S).next((()=>S.apply(n))).next((()=>i.mutationQueue.performConsistencyCheck(n))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(n,v,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(T){let e=Ue();for(let a=0;a<T.mutationResults.length;++a)T.mutationResults[a].transformResults.length>0&&(e=e.add(T.batch.mutations[a].key));return e})(t)))).next((()=>i.localDocuments.getDocuments(n,v)))}))}function t3(f){const t=ie(f);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.li.getLastRemoteSnapshotVersion(i)))}function WH(f,t){const i=ie(f),n=t.snapshotVersion;let v=i.vs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(S=>{const s=i.xs.newChangeBuffer({trackRemovals:!0});v=i.vs;const T=[];t.targetChanges.forEach(((m,c)=>{const o=v.get(c);if(!o)return;T.push(i.li.removeMatchingKeys(S,m.removedDocuments,c).next((()=>i.li.addMatchingKeys(S,m.addedDocuments,c))));let u=o.withSequenceNumber(S.currentSequenceNumber);t.targetMismatches.get(c)!==null?u=u.withResumeToken(Qi.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):m.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(m.resumeToken,n)),v=v.insert(c,u),(function(h,d,l){return h.resumeToken.approximateByteSize()===0||d.snapshotVersion.toMicroseconds()-h.snapshotVersion.toMicroseconds()>=zH?!0:l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size>0})(o,u,m)&&T.push(i.li.updateTargetData(S,u))}));let e=Cs(),a=Ue();if(t.documentUpdates.forEach((m=>{t.resolvedLimboDocuments.has(m)&&T.push(i.persistence.referenceDelegate.updateLimboDocument(S,m))})),T.push(e3(S,s,t.documentUpdates).next((m=>{e=m.Bs,a=m.Ls}))),!n.isEqual(Te.min())){const m=i.li.getLastRemoteSnapshotVersion(S).next((c=>i.li.setTargetsMetadata(S,S.currentSequenceNumber,n)));T.push(m)}return Et.waitFor(T).next((()=>s.apply(S))).next((()=>i.localDocuments.getLocalViewOfDocuments(S,e,a))).next((()=>e))})).then((S=>(i.vs=v,S)))}function e3(f,t,i){let n=Ue(),v=Ue();return i.forEach((S=>n=n.add(S))),t.getEntries(f,n).next((S=>{let s=Cs();return i.forEach(((T,e)=>{const a=S.get(T);e.isFoundDocument()!==a.isFoundDocument()&&(v=v.add(T)),e.isNoDocument()&&e.version.isEqual(Te.min())?(t.removeEntry(T,e.readTime),s=s.insert(T,e)):!a.isValidDocument()||e.version.compareTo(a.version)>0||e.version.compareTo(a.version)===0&&a.hasPendingWrites?(t.addEntry(e),s=s.insert(T,e)):Xt(CE,"Ignoring outdated watch update for ",T,". Current version:",a.version," Watch version:",e.version)})),{Bs:s,Ls:v}}))}function HH(f,t){const i=ie(f);return i.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=pl),i.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function hf(f,t){const i=ie(f);return i.persistence.runTransaction("Allocate target","readwrite",(n=>{let v;return i.li.getTargetData(n,t).next((S=>S?(v=S,Et.resolve(v)):i.li.allocateTargetId(n).next((s=>(v=new to(t,s,"TargetPurposeListen",n.currentSequenceNumber),i.li.addTargetData(n,v).next((()=>v)))))))})).then((n=>{const v=i.vs.get(n.targetId);return(v===null||n.snapshotVersion.compareTo(v.snapshotVersion)>0)&&(i.vs=i.vs.insert(n.targetId,n),i.Fs.set(t,n.targetId)),n}))}async function uf(f,t,i){const n=ie(f),v=n.vs.get(t),S=i?"readwrite":"readwrite-primary";try{i||await n.persistence.runTransaction("Release target",S,(s=>n.persistence.referenceDelegate.removeTarget(s,v)))}catch(s){if(!Fl(s))throw s;Xt(CE,`Failed to update sequence numbers for target ${t}: ${s}`)}n.vs=n.vs.remove(t),n.Fs.delete(v.target)}function wg(f,t,i){const n=ie(f);let v=Te.min(),S=Ue();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(e,a,m){const c=ie(e),o=c.Fs.get(m);return o!==void 0?Et.resolve(c.vs.get(o)):c.li.getTargetData(a,m)})(n,s,ls(t)).next((T=>{if(T)return v=T.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(s,T.targetId).next((e=>{S=e}))})).next((()=>n.Cs.getDocumentsMatchingQuery(s,t,i?v:Te.min(),i?S:Ue()))).next((T=>(s3(n,rI(t),T),{documents:T,ks:S})))))}function i3(f,t){const i=ie(f),n=ie(i.li),v=i.vs.get(t);return v?Promise.resolve(v.target):i.persistence.runTransaction("Get target data","readonly",(S=>n.At(S,t).next((s=>s?s.target:null))))}function n3(f,t){const i=ie(f),n=i.Ms.get(t)||Te.min();return i.persistence.runTransaction("Get new document changes","readonly",(v=>i.xs.getAllFromCollectionGroup(v,t,Eb(n,jc),Number.MAX_SAFE_INTEGER))).then((v=>(s3(i,t,v),v)))}function s3(f,t,i){let n=f.Ms.get(t)||Te.min();i.forEach(((v,S)=>{S.readTime.compareTo(n)>0&&(n=S.readTime)})),f.Ms.set(t,n)}async function XH(f,t,i,n){const v=ie(f);let S=Ue(),s=Cs();for(const a of i){const m=t.Ks(a.metadata.name);a.document&&(S=S.add(m));const c=t.qs(a);c.setReadTime(t.Us(a.metadata.readTime)),s=s.insert(m,c)}const T=v.xs.newChangeBuffer({trackRemovals:!0}),e=await hf(v,(function(m){return ls(Cf(Ye.fromString(`__bundle__/docs/${m}`)))})(n));return v.persistence.runTransaction("Apply bundle documents","readwrite",(a=>e3(a,T,s).next((m=>(T.apply(a),m))).next((m=>v.li.removeMatchingKeysForTargetId(a,e.targetId).next((()=>v.li.addMatchingKeys(a,S,e.targetId))).next((()=>v.localDocuments.getLocalViewOfDocuments(a,m.Bs,m.Ls))).next((()=>m.Bs))))))}async function kH(f,t,i=Ue()){const n=await hf(f,ls(f0(t.bundledQuery))),v=ie(f);return v.persistence.runTransaction("Save named query","readwrite",(S=>{const s=on(t.readTime);if(n.snapshotVersion.compareTo(s)>=0)return v.Pi.saveNamedQuery(S,t);const T=n.withResumeToken(Qi.EMPTY_BYTE_STRING,s);return v.vs=v.vs.insert(T.targetId,T),v.li.updateTargetData(S,T).next((()=>v.li.removeMatchingKeysForTargetId(S,n.targetId))).next((()=>v.li.addMatchingKeys(S,i,n.targetId))).next((()=>v.Pi.saveNamedQuery(S,t)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="firestore_clients";function iC(f,t){return`${r3}_${f}_${t}`}const a3="firestore_mutations";function nC(f,t,i){let n=`${a3}_${f}_${i}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}const o3="firestore_targets";function _x(f,t){return`${o3}_${f}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="SharedClientState";class Ag{constructor(t,i,n,v){this.user=t,this.batchId=i,this.state=n,this.error=v}static $s(t,i,n){const v=JSON.parse(n);let S,s=typeof v=="object"&&["pending","acknowledged","rejected"].indexOf(v.state)!==-1&&(v.error===void 0||typeof v.error=="object");return s&&v.error&&(s=typeof v.error.message=="string"&&typeof v.error.code=="string",s&&(S=new Gt(v.error.code,v.error.message))),s?new Ag(t,i,v.state,S):(an(fa,`Failed to parse mutation state for ID '${i}': ${n}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Zd{constructor(t,i,n){this.targetId=t,this.state=i,this.error=n}static $s(t,i){const n=JSON.parse(i);let v,S=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return S&&n.error&&(S=typeof n.error.message=="string"&&typeof n.error.code=="string",S&&(v=new Gt(n.error.code,n.error.message))),S?new Zd(t,n.state,v):(an(fa,`Failed to parse target state for ID '${t}': ${i}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Cg{constructor(t,i){this.clientId=t,this.activeTargetIds=i}static $s(t,i){const n=JSON.parse(i);let v=typeof n=="object"&&n.activeTargetIds instanceof Array,S=uE();for(let s=0;v&&s<n.activeTargetIds.length;++s)v=Mb(n.activeTargetIds[s]),S=S.add(n.activeTargetIds[s]);return v?new Cg(t,S):(an(fa,`Failed to parse client data for instance '${t}': ${i}`),null)}}class ME{constructor(t,i){this.clientId=t,this.onlineState=i}static $s(t){const i=JSON.parse(t);return typeof i=="object"&&["Unknown","Online","Offline"].indexOf(i.onlineState)!==-1&&typeof i.clientId=="string"?new ME(i.clientId,i.onlineState):(an(fa,`Failed to parse online state: ${t}`),null)}}class Y1{constructor(){this.activeTargetIds=uE()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Wx{constructor(t,i,n,v,S){this.window=t,this.Ci=i,this.persistenceKey=n,this.zs=v,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Fi(Le),this.started=!1,this.Zs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=S,this.Xs=iC(this.persistenceKey,this.zs),this.Ys=(function(e){return`firestore_sequence_number_${e}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Y1),this.eo=new RegExp(`^${r3}_${s}_([^_]*)$`),this.no=new RegExp(`^${a3}_${s}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${o3}_${s}_(\\d+)$`),this.io=(function(e){return`firestore_online_state_${e}`})(this.persistenceKey),this.so=(function(e){return`firestore_bundle_loaded_v2_${e}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.hs();for(const n of t){if(n===this.zs)continue;const v=this.getItem(iC(this.persistenceKey,n));if(v){const S=Cg.$s(n,v);S&&(this.Js=this.Js.insert(S.clientId,S))}}this.oo();const i=this.storage.getItem(this.io);if(i){const n=this._o(i);n&&this.ao(n)}for(const n of this.Zs)this.Hs(n);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ys,JSON.stringify(t))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(t){let i=!1;return this.Js.forEach(((n,v)=>{v.activeTargetIds.has(t)&&(i=!0)})),i}addPendingMutation(t){this.co(t,"pending")}updateMutationState(t,i,n){this.co(t,i,n),this.lo(t)}addLocalQueryTarget(t,i=!0){let n="not-current";if(this.isActiveQueryTarget(t)){const v=this.storage.getItem(_x(this.persistenceKey,t));if(v){const S=Zd.$s(t,v);S&&(n=S.state)}}return i&&this.ho.Qs(t),this.oo(),n}removeLocalQueryTarget(t){this.ho.Gs(t),this.oo()}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(_x(this.persistenceKey,t))}updateQueryState(t,i,n){this.Po(t,i,n)}handleUserChange(t,i,n){i.forEach((v=>{this.lo(v)})),this.currentUser=t,n.forEach((v=>{this.addPendingMutation(v)}))}setOnlineState(t){this.To(t)}notifyBundleLoaded(t){this.Io(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const i=this.storage.getItem(t);return Xt(fa,"READ",t,i),i}setItem(t,i){Xt(fa,"SET",t,i),this.storage.setItem(t,i)}removeItem(t){Xt(fa,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const i=t;if(i.storageArea===this.storage){if(Xt(fa,"EVENT",i.key,i.newValue),i.key===this.Xs)return void an("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(i.key!==null){if(this.eo.test(i.key)){if(i.newValue==null){const n=this.Eo(i.key);return this.Ro(n,null)}{const n=this.Ao(i.key,i.newValue);if(n)return this.Ro(n.clientId,n)}}else if(this.no.test(i.key)){if(i.newValue!==null){const n=this.Vo(i.key,i.newValue);if(n)return this.mo(n)}}else if(this.ro.test(i.key)){if(i.newValue!==null){const n=this.fo(i.key,i.newValue);if(n)return this.po(n)}}else if(i.key===this.io){if(i.newValue!==null){const n=this._o(i.newValue);if(n)return this.ao(n)}}else if(i.key===this.Ys){const n=(function(S){let s=ws.ce;if(S!=null)try{const T=JSON.parse(S);ge(typeof T=="number",30636,{yo:S}),s=T}catch(T){an(fa,"Failed to read sequence number from WebStorage",T)}return s})(i.newValue);n!==ws.ce&&this.sequenceNumberHandler(n)}else if(i.key===this.so){const n=this.wo(i.newValue);await Promise.all(n.map((v=>this.syncEngine.bo(v))))}}}else this.Zs.push(i)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(t,i,n){const v=new Ag(this.currentUser,t,i,n),S=nC(this.persistenceKey,this.currentUser,t);this.setItem(S,v.Ws())}lo(t){const i=nC(this.persistenceKey,this.currentUser,t);this.removeItem(i)}To(t){const i={clientId:this.zs,onlineState:t};this.storage.setItem(this.io,JSON.stringify(i))}Po(t,i,n){const v=_x(this.persistenceKey,t),S=new Zd(t,i,n);this.setItem(v,S.Ws())}Io(t){const i=JSON.stringify(Array.from(t));this.setItem(this.so,i)}Eo(t){const i=this.eo.exec(t);return i?i[1]:null}Ao(t,i){const n=this.Eo(t);return Cg.$s(n,i)}Vo(t,i){const n=this.no.exec(t),v=Number(n[1]),S=n[2]!==void 0?n[2]:null;return Ag.$s(new On(S),v,i)}fo(t,i){const n=this.ro.exec(t),v=Number(n[1]);return Zd.$s(v,i)}_o(t){return ME.$s(t)}wo(t){return JSON.parse(t)}async mo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.So(t.batchId,t.state,t.error);Xt(fa,`Ignoring mutation for non-active user ${t.user.uid}`)}po(t){return this.syncEngine.Do(t.targetId,t.state,t.error)}Ro(t,i){const n=i?this.Js.insert(t,i):this.Js.remove(t),v=this.uo(this.Js),S=this.uo(n),s=[],T=[];return S.forEach((e=>{v.has(e)||s.push(e)})),v.forEach((e=>{S.has(e)||T.push(e)})),this.syncEngine.Co(s,T).then((()=>{this.Js=n}))}ao(t){this.Js.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}uo(t){let i=uE();return t.forEach(((n,v)=>{i=i.unionWith(v.activeTargetIds)})),i}}class l3{constructor(){this.vo=new Y1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,n){}addLocalQueryTarget(t,i=!0){return i&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,i,n){this.Fo[t]=i}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new Y1,Promise.resolve()}handleUserChange(t,i,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="ConnectivityMonitor";class rC{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Xt(sC,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){Xt(sC,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gm=null;function $1(){return gm===null?gm=(function(){return 268435456+Math.round(2147483648*Math.random())})():gm++,"0x"+gm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="RestConnection",$H={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class KH{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),v=encodeURIComponent(this.databaseId.database);this.qo=i+"://"+t.host,this.Uo=`projects/${n}/databases/${v}`,this.$o=this.databaseId.database===gp?`project_id=${n}`:`project_id=${n}&database_id=${v}`}Wo(t,i,n,v,S){const s=$1(),T=this.Qo(t,i.toUriEncodedString());Xt(Hx,`Sending RPC '${t}' ${s}:`,T,n);const e={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(e,v,S);const{host:a}=new URL(T),m=ou(a);return this.zo(t,T,e,n,m).then((c=>(Xt(Hx,`Received RPC '${t}' ${s}: `,c),c)),(c=>{throw Ns(Hx,`RPC '${t}' ${s} failed with error: `,c,"url: ",T,"request:",n),c}))}jo(t,i,n,v,S,s){return this.Wo(t,i,n,v,S)}Go(t,i,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Af})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((v,S)=>t[S]=v)),n&&n.headers.forEach(((v,S)=>t[S]=v))}Qo(t,i){const n=$H[t];let v=`${this.qo}/v1/${i}:${n}`;return this.databaseInfo.apiKey&&(v=`${v}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),v}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="WebChannelConnection",Td=(f,t,i)=>{f.listen(t,(n=>{try{i(n)}catch(v){setTimeout((()=>{throw v}),0)}}))};class mc extends KH{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!mc.c_){const t=fb();Td(t,cb.STAT_EVENT,(i=>{i.stat===A1.PROXY?Xt(is,"STAT_EVENT: detected buffering proxy"):i.stat===A1.NOPROXY&&Xt(is,"STAT_EVENT: detected no buffering proxy")})),mc.c_=!0}}zo(t,i,n,v,S){const s=$1();return new Promise(((T,e)=>{const a=new hb;a.setWithCredentials(!0),a.listenOnce(ub.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Om.NO_ERROR:const c=a.getResponseJson();Xt(is,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),T(c);break;case Om.TIMEOUT:Xt(is,`RPC '${t}' ${s} timed out`),e(new Gt(Rt.DEADLINE_EXCEEDED,"Request time out"));break;case Om.HTTP_ERROR:const o=a.getStatus();if(Xt(is,`RPC '${t}' ${s} failed with status:`,o,"response text:",a.getResponseText()),o>0){let u=a.getResponseJson();Array.isArray(u)&&(u=u[0]);const r=u==null?void 0:u.error;if(r&&r.status&&r.message){const h=(function(l){const p=l.toLowerCase().replace(/_/g,"-");return Object.values(Rt).indexOf(p)>=0?p:Rt.UNKNOWN})(r.status);e(new Gt(h,r.message))}else e(new Gt(Rt.UNKNOWN,"Server responded with status "+a.getStatus()))}else e(new Gt(Rt.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:t,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Xt(is,`RPC '${t}' ${s} completed.`)}}));const m=JSON.stringify(v);Xt(is,`RPC '${t}' ${s} sending request:`,v),a.send(i,"POST",m,n,15)}))}T_(t,i,n){const v=$1(),S=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=this.createWebChannelTransport(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},e=this.longPollingOptions.timeoutSeconds;e!==void 0&&(T.longPollingTimeout=Math.round(1e3*e)),this.useFetchStreams&&(T.useFetchStreams=!0),this.Go(T.initMessageHeaders,i,n),T.encodeInitMessageHeaders=!0;const a=S.join("");Xt(is,`Creating RPC '${t}' stream ${v}: ${a}`,T);const m=s.createWebChannel(a,T);this.I_(m);let c=!1,o=!1;const u=new jH({Ho:r=>{o?Xt(is,`Not sending because RPC '${t}' stream ${v} is closed:`,r):(c||(Xt(is,`Opening RPC '${t}' stream ${v} transport.`),m.open(),c=!0),Xt(is,`RPC '${t}' stream ${v} sending:`,r),m.send(r))},Jo:()=>m.close()});return Td(m,Ld.EventType.OPEN,(()=>{o||(Xt(is,`RPC '${t}' stream ${v} transport opened.`),u.i_())})),Td(m,Ld.EventType.CLOSE,(()=>{o||(o=!0,Xt(is,`RPC '${t}' stream ${v} transport closed`),u.o_(),this.E_(m))})),Td(m,Ld.EventType.ERROR,(r=>{o||(o=!0,Ns(is,`RPC '${t}' stream ${v} transport errored. Name:`,r.name,"Message:",r.message),u.o_(new Gt(Rt.UNAVAILABLE,"The operation could not be completed")))})),Td(m,Ld.EventType.MESSAGE,(r=>{var h;if(!o){const d=r.data[0];ge(!!d,16349);const l=d,p=(l==null?void 0:l.error)||((h=l[0])==null?void 0:h.error);if(p){Xt(is,`RPC '${t}' stream ${v} received error:`,p);const g=p.status;let x=(function(w){const C=dn[w];if(C!==void 0)return TI(C)})(g),y=p.message;g==="NOT_FOUND"&&y.includes("database")&&y.includes("does not exist")&&y.includes(this.databaseId.database)&&Ns(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),x===void 0&&(x=Rt.INTERNAL,y="Unknown error status: "+g+" with message "+p.message),o=!0,u.o_(new Gt(x,y)),m.close()}else Xt(is,`RPC '${t}' stream ${v} received:`,d),u.__(d)}})),mc.u_(),setTimeout((()=>{u.s_()}),0),u}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((i=>i===t))}Go(t,i,n){super.Go(t,i,n),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return db()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(f){return new mc(f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(){return typeof window<"u"?window:null}function Hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(f){return new iH(f,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mc.c_=!1;class RE{constructor(t,i,n=1e3,v=1.5,S=6e4){this.Ci=t,this.timerId=i,this.R_=n,this.A_=v,this.V_=S,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const i=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),v=Math.max(0,i-n);v>0&&Xt("ExponentialBackoff",`Backing off for ${v} ms (base delay: ${this.d_} ms, delay with jitter: ${i} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,v,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="PersistentStream";class u3{constructor(t,i,n,v,S,s,T,e){this.Ci=t,this.b_=n,this.S_=v,this.connection=S,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=T,this.listener=e,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RE(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Rt.RESOURCE_EXHAUSTED?(an(i.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Rt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(i)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,v])=>{this.D_===i&&this.G_(n,v)}),(n=>{t((()=>{const v=new Gt(Rt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(v)}))}))}G_(t,i){const n=this.Q_(this.D_);this.stream=this.j_(t,i),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((v=>{n((()=>this.z_(v)))})),this.stream.onMessage((v=>{n((()=>++this.F_==1?this.H_(v):this.onNext(v)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Xt(aC,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return i=>{this.Ci.enqueueAndForget((()=>this.D_===t?i():(Xt(aC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZH extends u3{constructor(t,i,n,v,S,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,n,v,s),this.serializer=S}j_(t,i){return this.connection.T_("Listen",t,i)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=rH(this.serializer,t),n=(function(S){if(!("targetChange"in S))return Te.min();const s=S.targetChange;return s.targetIds&&s.targetIds.length?Te.min():s.readTime?on(s.readTime):Te.min()})(t);return this.listener.J_(i,n)}Z_(t){const i={};i.database=_1(this.serializer),i.addTarget=(function(S,s){let T;const e=s.target;if(T=mg(e)?{documents:bI(S,e)}:{query:c0(S,e).ft},T.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){T.resumeToken=AI(S,s.resumeToken);const a=z1(S,s.expectedCount);a!==null&&(T.expectedCount=a)}else if(s.snapshotVersion.compareTo(Te.min())>0){T.readTime=lf(S,s.snapshotVersion.toTimestamp());const a=z1(S,s.expectedCount);a!==null&&(T.expectedCount=a)}return T})(this.serializer,t);const n=oH(this.serializer,t);n&&(i.labels=n),this.K_(i)}X_(t){const i={};i.database=_1(this.serializer),i.removeTarget=t,this.K_(i)}}class JH extends u3{constructor(t,i,n,v,S,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,n,v,s),this.serializer=S}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}H_(t){return ge(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ge(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ge(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=aH(t.writeResults,t.commitTime),n=on(t.commitTime);return this.listener.na(n,i)}ra(){const t={};t.database=_1(this.serializer),this.K_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((n=>Sp(this.serializer,n)))};this.K_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{}class tX extends qH{constructor(t,i,n,v){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=n,this.serializer=v,this.ia=!1}sa(){if(this.ia)throw new Gt(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,i,n,v){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([S,s])=>this.connection.Wo(t,G1(i,n),v,S,s))).catch((S=>{throw S.name==="FirebaseError"?(S.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),S):new Gt(Rt.UNKNOWN,S.toString())}))}jo(t,i,n,v,S){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,T])=>this.connection.jo(t,G1(i,n),v,s,T,S))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Gt(Rt.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function eX(f,t,i,n){return new tX(f,t,i,n)}class iX{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(an(i),this.aa=!1):Xt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="RemoteStore";class nX{constructor(t,i,n,v,S){this.localStore=t,this.datastore=i,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=S,this.Aa.Mo((s=>{n.enqueueAndForget((async()=>{Ol(this)&&(Xt(Jh,"Restarting streams for network reachability change."),await(async function(e){const a=ie(e);a.Ea.add(4),await Pf(a),a.Va.set("Unknown"),a.Ea.delete(4),await Jp(a)})(this))}))})),this.Va=new iX(n,v)}}async function Jp(f){if(Ol(f))for(const t of f.Ra)await t(!0)}async function Pf(f){for(const t of f.Ra)await t(!1)}function m0(f,t){const i=ie(f);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),IE(i)?bE(i):If(i).O_()&&PE(i,t))}function cf(f,t){const i=ie(f),n=If(i);i.Ia.delete(t),n.O_()&&c3(i,t),i.Ia.size===0&&(n.O_()?n.L_():Ol(i)&&i.Va.set("Unknown"))}function PE(f,t){if(f.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Te.min())>0){const i=f.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}If(f).Z_(t)}function c3(f,t){f.da.$e(t),If(f).X_(t)}function bE(f){f.da=new JW({getRemoteKeysForTarget:t=>f.remoteSyncer.getRemoteKeysForTarget(t),At:t=>f.Ia.get(t)||null,ht:()=>f.datastore.serializer.databaseId}),If(f).start(),f.Va.ua()}function IE(f){return Ol(f)&&!If(f).x_()&&f.Ia.size>0}function Ol(f){return ie(f).Ea.size===0}function f3(f){f.da=void 0}async function sX(f){f.Va.set("Online")}async function rX(f){f.Ia.forEach(((t,i)=>{PE(f,t)}))}async function aX(f,t){f3(f),IE(f)?(f.Va.ha(t),bE(f)):f.Va.set("Unknown")}async function oX(f,t,i){if(f.Va.set("Online"),t instanceof wI&&t.state===2&&t.cause)try{await(async function(v,S){const s=S.cause;for(const T of S.targetIds)v.Ia.has(T)&&(await v.remoteSyncer.rejectListen(T,s),v.Ia.delete(T),v.da.removeTarget(T))})(f,t)}catch(n){Xt(Jh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Mg(f,n)}else if(t instanceof _m?f.da.Xe(t):t instanceof SI?f.da.st(t):f.da.tt(t),!i.isEqual(Te.min()))try{const n=await t3(f.localStore);i.compareTo(n)>=0&&await(function(S,s){const T=S.da.Tt(s);return T.targetChanges.forEach(((e,a)=>{if(e.resumeToken.approximateByteSize()>0){const m=S.Ia.get(a);m&&S.Ia.set(a,m.withResumeToken(e.resumeToken,s))}})),T.targetMismatches.forEach(((e,a)=>{const m=S.Ia.get(e);if(!m)return;S.Ia.set(e,m.withResumeToken(Qi.EMPTY_BYTE_STRING,m.snapshotVersion)),c3(S,e);const c=new to(m.target,e,a,m.sequenceNumber);PE(S,c)})),S.remoteSyncer.applyRemoteEvent(T)})(f,i)}catch(n){Xt(Jh,"Failed to raise snapshot:",n),await Mg(f,n)}}async function Mg(f,t,i){if(!Fl(t))throw t;f.Ea.add(1),await Pf(f),f.Va.set("Offline"),i||(i=()=>t3(f.localStore)),f.asyncQueue.enqueueRetryable((async()=>{Xt(Jh,"Retrying IndexedDB access"),await i(),f.Ea.delete(1),await Jp(f)}))}function d3(f,t){return t().catch((i=>Mg(f,i,t)))}async function bf(f){const t=ie(f),i=Ml(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:pl;for(;lX(t);)try{const v=await HH(t.localStore,n);if(v===null){t.Ta.length===0&&i.L_();break}n=v.batchId,hX(t,v)}catch(v){await Mg(t,v)}p3(t)&&v3(t)}function lX(f){return Ol(f)&&f.Ta.length<10}function hX(f,t){f.Ta.push(t);const i=Ml(f);i.O_()&&i.Y_&&i.ea(t.mutations)}function p3(f){return Ol(f)&&!Ml(f).x_()&&f.Ta.length>0}function v3(f){Ml(f).start()}async function uX(f){Ml(f).ra()}async function cX(f){const t=Ml(f);for(const i of f.Ta)t.ea(i.mutations)}async function fX(f,t,i){const n=f.Ta.shift(),v=pE.from(n,t,i);await d3(f,(()=>f.remoteSyncer.applySuccessfulWrite(v))),await bf(f)}async function dX(f,t){t&&Ml(f).Y_&&await(async function(n,v){if((function(s){return yI(s)&&s!==Rt.ABORTED})(v.code)){const S=n.Ta.shift();Ml(n).B_(),await d3(n,(()=>n.remoteSyncer.rejectFailedWrite(S.batchId,v))),await bf(n)}})(f,t),p3(f)&&v3(f)}async function oC(f,t){const i=ie(f);i.asyncQueue.verifyOperationInProgress(),Xt(Jh,"RemoteStore received new credentials");const n=Ol(i);i.Ea.add(3),await Pf(i),n&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await Jp(i)}async function K1(f,t){const i=ie(f);t?(i.Ea.delete(2),await Jp(i)):t||(i.Ea.add(2),await Pf(i),i.Va.set("Unknown"))}function If(f){return f.ma||(f.ma=(function(i,n,v){const S=ie(i);return S.sa(),new ZH(n,S.connection,S.authCredentials,S.appCheckCredentials,S.serializer,v)})(f.datastore,f.asyncQueue,{Zo:sX.bind(null,f),Yo:rX.bind(null,f),t_:aX.bind(null,f),J_:oX.bind(null,f)}),f.Ra.push((async t=>{t?(f.ma.B_(),IE(f)?bE(f):f.Va.set("Unknown")):(await f.ma.stop(),f3(f))}))),f.ma}function Ml(f){return f.fa||(f.fa=(function(i,n,v){const S=ie(i);return S.sa(),new JH(n,S.connection,S.authCredentials,S.appCheckCredentials,S.serializer,v)})(f.datastore,f.asyncQueue,{Zo:()=>Promise.resolve(),Yo:uX.bind(null,f),t_:dX.bind(null,f),ta:cX.bind(null,f),na:fX.bind(null,f)}),f.Ra.push((async t=>{t?(f.fa.B_(),await bf(f)):(await f.fa.stop(),f.Ta.length>0&&(Xt(Jh,`Stopping write stream with ${f.Ta.length} pending writes`),f.Ta=[]))}))),f.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(t,i,n,v,S){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=n,this.op=v,this.removalCallback=S,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,n,v,S){const s=Date.now()+n,T=new LE(t,i,s,v,S);return T.start(n),T}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Gt(Rt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lf(f,t){if(an("AsyncQueue",`${t}: ${f}`),Fl(f))return new Gt(Rt.UNAVAILABLE,`${t}: ${f}`);throw f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{static emptySet(t){return new Gh(t.comparator)}constructor(t){this.comparator=t?(i,n)=>t(i,n)||qt.comparator(i.key,n.key):(i,n)=>qt.comparator(i.key,n.key),this.keyedMap=Fd(),this.sortedSet=new Fi(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,n)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Gh)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;i.hasNext();){const v=i.getNext().key,S=n.getNext().key;if(!v.isEqual(S))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const n=new Gh;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=i,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.ga=new Fi(qt.comparator)}track(t){const i=t.doc.key,n=this.ga.get(i);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(i,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(i,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(i):t.type===1&&n.type===2?this.ga=this.ga.insert(i,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):ce(63341,{Vt:t,pa:n}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,n)=>{t.push(n)})),t}}class qh{constructor(t,i,n,v,S,s,T,e,a){this.query=t,this.docs=i,this.oldDocs=n,this.docChanges=v,this.mutatedKeys=S,this.fromCache=s,this.syncStateChanged=T,this.excludesMetadataChanges=e,this.hasCachedResults=a}static fromInitialDocuments(t,i,n,v,S){const s=[];return i.forEach((T=>{s.push({type:0,doc:T})})),new qh(t,i,Gh.emptySet(i),s,n,v,!0,!1,S)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$p(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,n=t.docChanges;if(i.length!==n.length)return!1;for(let v=0;v<i.length;v++)if(i[v].type!==n[v].type||!i[v].doc.isEqual(n[v].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pX{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class vX{constructor(){this.queries=hC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,n){const v=ie(i),S=v.queries;v.queries=hC(),S.forEach(((s,T)=>{for(const e of T.ba)e.onError(n)}))})(this,new Gt(Rt.ABORTED,"Firestore shutting down"))}}function hC(){return new wo((f=>sI(f)),$p)}async function FE(f,t){const i=ie(f);let n=3;const v=t.query;let S=i.queries.get(v);S?!S.Sa()&&t.Da()&&(n=2):(S=new pX,n=t.Da()?0:1);try{switch(n){case 0:S.wa=await i.onListen(v,!0);break;case 1:S.wa=await i.onListen(v,!1);break;case 2:await i.onFirstRemoteStoreListen(v)}}catch(s){const T=Lf(s,`Initialization of query '${tc(t.query)}' failed`);return void t.onError(T)}i.queries.set(v,S),S.ba.push(t),t.va(i.onlineState),S.wa&&t.Fa(S.wa)&&OE(i)}async function DE(f,t){const i=ie(f),n=t.query;let v=3;const S=i.queries.get(n);if(S){const s=S.ba.indexOf(t);s>=0&&(S.ba.splice(s,1),S.ba.length===0?v=t.Da()?0:1:!S.Sa()&&t.Da()&&(v=2))}switch(v){case 0:return i.queries.delete(n),i.onUnlisten(n,!0);case 1:return i.queries.delete(n),i.onUnlisten(n,!1);case 2:return i.onLastRemoteStoreUnlisten(n);default:return}}function mX(f,t){const i=ie(f);let n=!1;for(const v of t){const S=v.query,s=i.queries.get(S);if(s){for(const T of s.ba)T.Fa(v)&&(n=!0);s.wa=v}}n&&OE(i)}function gX(f,t,i){const n=ie(f),v=n.queries.get(t);if(v)for(const S of v.ba)S.onError(i);n.queries.delete(t)}function OE(f){f.Ca.forEach((t=>{t.next()}))}var j1,uC;(uC=j1||(j1={})).Ma="default",uC.Cache="cache";class NE{constructor(t,i,n){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const v of t.docChanges)v.type!==3&&n.push(v);t=new qh(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const n=i!=="Offline";return(!this.options.Ka||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=qh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==j1.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(t,i){this.qa=t,this.byteLength=i}Ua(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(t){this.serializer=t}Ks(t){return Sa(this.serializer,t)}qs(t){return t.metadata.exists?u0(this.serializer,t.document,!1):Ni.newNoDocument(this.Ks(t.metadata.name),this.Us(t.metadata.readTime))}Us(t){return on(t)}}class BE{constructor(t,i){this.$a=t,this.serializer=i,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=g3(t)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(t){this.progress.bytesLoaded+=t.byteLength;let i=this.progress.documentsLoaded;if(t.qa.namedQuery)this.Wa.push(t.qa.namedQuery);else if(t.qa.documentMetadata){this.Qa.push({metadata:t.qa.documentMetadata}),t.qa.documentMetadata.exists||++i;const n=Ye.fromString(t.qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.qa.document&&(this.Qa[this.Qa.length-1].document=t.qa.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,{...this.progress}):null}za(t){const i=new Map,n=new cC(this.serializer);for(const v of t)if(v.metadata.queries){const S=n.Ks(v.metadata.name);for(const s of v.metadata.queries){const T=(i.get(s)||Ue()).add(S);i.set(s,T)}}return i}async ja(t){const i=await XH(t,new cC(this.serializer),this.Qa,this.$a.id),n=this.za(this.documents);for(const v of this.Wa)await kH(t,v,n.get(v.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:i}}}function g3(f){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(t){this.key=t}}class y3{constructor(t){this.key=t}}class T3{constructor(t,i){this.query=t,this.Za=i,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ue(),this.mutatedKeys=Ue(),this.eu=aI(t),this.tu=new Gh(this.eu)}get nu(){return this.Za}ru(t,i){const n=i?i.iu:new lC,v=i?i.tu:this.tu;let S=i?i.mutatedKeys:this.mutatedKeys,s=v,T=!1;const e=this.query.limitType==="F"&&v.size===this.query.limit?v.last():null,a=this.query.limitType==="L"&&v.size===this.query.limit?v.first():null;if(t.inorderTraversal(((m,c)=>{const o=v.get(m),u=Kp(this.query,c)?c:null,r=!!o&&this.mutatedKeys.has(o.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let d=!1;o&&u?o.data.isEqual(u.data)?r!==h&&(n.track({type:3,doc:u}),d=!0):this.su(o,u)||(n.track({type:2,doc:u}),d=!0,(e&&this.eu(u,e)>0||a&&this.eu(u,a)<0)&&(T=!0)):!o&&u?(n.track({type:0,doc:u}),d=!0):o&&!u&&(n.track({type:1,doc:o}),d=!0,(e||a)&&(T=!0)),d&&(u?(s=s.add(u),S=h?S.add(m):S.delete(m)):(s=s.delete(m),S=S.delete(m)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const m=this.query.limitType==="F"?s.last():s.first();s=s.delete(m.key),S=S.delete(m.key),n.track({type:1,doc:m})}return{tu:s,iu:n,Ss:T,mutatedKeys:S}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,n,v){const S=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const s=t.iu.ya();s.sort(((m,c)=>(function(u,r){const h=d=>{switch(d){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Vt:d})}};return h(u)-h(r)})(m.type,c.type)||this.eu(m.doc,c.doc))),this.ou(n),v=v??!1;const T=i&&!v?this._u():[],e=this.Ya.size===0&&this.current&&!v?1:0,a=e!==this.Xa;return this.Xa=e,s.length!==0||a?{snapshot:new qh(this.query,t.tu,S,s,t.mutatedKeys,e===0,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lC,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Za=this.Za.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Za=this.Za.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Ue(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))}));const i=[];return t.forEach((n=>{this.Ya.has(n)||i.push(new y3(n))})),this.Ya.forEach((n=>{t.has(n)||i.push(new x3(n))})),i}cu(t){this.Za=t.ks,this.Ya=Ue();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return qh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Nl="SyncEngine";class xX{constructor(t,i,n){this.query=t,this.targetId=i,this.view=n}}class yX{constructor(t){this.key=t,this.hu=!1}}class TX{constructor(t,i,n,v,S,s){this.localStore=t,this.remoteStore=i,this.eventManager=n,this.sharedClientState=v,this.currentUser=S,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new wo((T=>sI(T)),$p),this.Iu=new Map,this.Eu=new Set,this.Ru=new Fi(qt.comparator),this.Au=new Map,this.Vu=new TE,this.du={},this.mu=new Map,this.fu=Zh.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EX(f,t,i=!0){const n=g0(f);let v;const S=n.Tu.get(t);return S?(n.sharedClientState.addLocalQueryTarget(S.targetId),v=S.view.lu()):v=await E3(n,t,i,!0),v}async function SX(f,t){const i=g0(f);await E3(i,t,!0,!1)}async function E3(f,t,i,n){const v=await hf(f.localStore,ls(t)),S=v.targetId,s=f.sharedClientState.addLocalQueryTarget(S,i);let T;return n&&(T=await UE(f,t,S,s==="current",v.resumeToken)),f.isPrimaryClient&&i&&m0(f.remoteStore,v),T}async function UE(f,t,i,n,v){f.pu=(c,o,u)=>(async function(h,d,l,p){let g=d.view.ru(l);g.Ss&&(g=await wg(h.localStore,d.query,!1).then((({documents:w})=>d.view.ru(w,g))));const x=p&&p.targetChanges.get(d.targetId),y=p&&p.targetMismatches.get(d.targetId)!=null,E=d.view.applyChanges(g,h.isPrimaryClient,x,y);return Q1(h,d.targetId,E.au),E.snapshot})(f,c,o,u);const S=await wg(f.localStore,t,!0),s=new T3(t,S.ks),T=s.ru(S.documents),e=Zp.createSynthesizedTargetChangeForCurrentChange(i,n&&f.onlineState!=="Offline",v),a=s.applyChanges(T,f.isPrimaryClient,e);Q1(f,i,a.au);const m=new xX(t,i,s);return f.Tu.set(t,m),f.Iu.has(i)?f.Iu.get(i).push(t):f.Iu.set(i,[t]),a.snapshot}async function wX(f,t,i){const n=ie(f),v=n.Tu.get(t),S=n.Iu.get(v.targetId);if(S.length>1)return n.Iu.set(v.targetId,S.filter((s=>!$p(s,t)))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(v.targetId),n.sharedClientState.isActiveQueryTarget(v.targetId)||await uf(n.localStore,v.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(v.targetId),i&&cf(n.remoteStore,v.targetId),ff(n,v.targetId)})).catch(Ll)):(ff(n,v.targetId),await uf(n.localStore,v.targetId,!0))}async function AX(f,t){const i=ie(f),n=i.Tu.get(t),v=i.Iu.get(n.targetId);i.isPrimaryClient&&v.length===1&&(i.sharedClientState.removeLocalQueryTarget(n.targetId),cf(i.remoteStore,n.targetId))}async function CX(f,t,i){const n=_E(f);try{const v=await(function(s,T){const e=ie(s),a=gi.now(),m=T.reduce(((u,r)=>u.add(r.key)),Ue());let c,o;return e.persistence.runTransaction("Locally write mutations","readwrite",(u=>{let r=Cs(),h=Ue();return e.xs.getEntries(u,m).next((d=>{r=d,r.forEach(((l,p)=>{p.isValidDocument()||(h=h.add(l))}))})).next((()=>e.localDocuments.getOverlayedDocuments(u,r))).next((d=>{c=d;const l=[];for(const p of T){const g=KW(p,c.get(p.key).overlayedDocument);g!=null&&l.push(new Ao(p.key,g,$b(g.value.mapValue),Hi.exists(!0)))}return e.mutationQueue.addMutationBatch(u,a,l,T)})).next((d=>{o=d;const l=d.applyToLocalDocumentSet(c,h);return e.documentOverlayCache.saveOverlays(u,d.batchId,l)}))})).then((()=>({batchId:o.batchId,changes:lI(c)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(v.batchId),(function(s,T,e){let a=s.du[s.currentUser.toKey()];a||(a=new Fi(Le)),a=a.insert(T,e),s.du[s.currentUser.toKey()]=a})(n,v.batchId,i),await Co(n,v.changes),await bf(n.remoteStore)}catch(v){const S=Lf(v,"Failed to persist write");i.reject(S)}}async function S3(f,t){const i=ie(f);try{const n=await WH(i.localStore,t);t.targetChanges.forEach(((v,S)=>{const s=i.Au.get(S);s&&(ge(v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size<=1,22616),v.addedDocuments.size>0?s.hu=!0:v.modifiedDocuments.size>0?ge(s.hu,14607):v.removedDocuments.size>0&&(ge(s.hu,42227),s.hu=!1))})),await Co(i,n,t)}catch(n){await Ll(n)}}function fC(f,t,i){const n=ie(f);if(n.isPrimaryClient&&i===0||!n.isPrimaryClient&&i===1){const v=[];n.Tu.forEach(((S,s)=>{const T=s.view.va(t);T.snapshot&&v.push(T.snapshot)})),(function(s,T){const e=ie(s);e.onlineState=T;let a=!1;e.queries.forEach(((m,c)=>{for(const o of c.ba)o.va(T)&&(a=!0)})),a&&OE(e)})(n.eventManager,t),v.length&&n.Pu.J_(v),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function MX(f,t,i){const n=ie(f);n.sharedClientState.updateQueryState(t,"rejected",i);const v=n.Au.get(t),S=v&&v.key;if(S){let s=new Fi(qt.comparator);s=s.insert(S,Ni.newNoDocument(S,Te.min()));const T=Ue().add(S),e=new Qp(Te.min(),new Map,new Fi(Le),s,T);await S3(n,e),n.Ru=n.Ru.remove(S),n.Au.delete(t),GE(n)}else await uf(n.localStore,t,!1).then((()=>ff(n,t,i))).catch(Ll)}async function RX(f,t){const i=ie(f),n=t.batch.batchId;try{const v=await _H(i.localStore,t);zE(i,n,null),VE(i,n),i.sharedClientState.updateMutationState(n,"acknowledged"),await Co(i,v)}catch(v){await Ll(v)}}async function PX(f,t,i){const n=ie(f);try{const v=await(function(s,T){const e=ie(s);return e.persistence.runTransaction("Reject batch","readwrite-primary",(a=>{let m;return e.mutationQueue.lookupMutationBatch(a,T).next((c=>(ge(c!==null,37113),m=c.keys(),e.mutationQueue.removeMutationBatch(a,c)))).next((()=>e.mutationQueue.performConsistencyCheck(a))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(a,m,T))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,m))).next((()=>e.localDocuments.getDocuments(a,m)))}))})(n.localStore,t);zE(n,t,i),VE(n,t),n.sharedClientState.updateMutationState(t,"rejected",i),await Co(n,v)}catch(v){await Ll(v)}}async function bX(f,t){const i=ie(f);Ol(i.remoteStore)||Xt(Nl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(s){const T=ie(s);return T.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>T.mutationQueue.getHighestUnacknowledgedBatchId(e)))})(i.localStore);if(n===pl)return void t.resolve();const v=i.mu.get(n)||[];v.push(t),i.mu.set(n,v)}catch(n){const v=Lf(n,"Initialization of waitForPendingWrites() operation failed");t.reject(v)}}function VE(f,t){(f.mu.get(t)||[]).forEach((i=>{i.resolve()})),f.mu.delete(t)}function zE(f,t,i){const n=ie(f);let v=n.du[n.currentUser.toKey()];if(v){const S=v.get(t);S&&(i?S.reject(i):S.resolve(),v=v.remove(t)),n.du[n.currentUser.toKey()]=v}}function ff(f,t,i=null){f.sharedClientState.removeLocalQueryTarget(t);for(const n of f.Iu.get(t))f.Tu.delete(n),i&&f.Pu.yu(n,i);f.Iu.delete(t),f.isPrimaryClient&&f.Vu.Gr(t).forEach((n=>{f.Vu.containsKey(n)||w3(f,n)}))}function w3(f,t){f.Eu.delete(t.path.canonicalString());const i=f.Ru.get(t);i!==null&&(cf(f.remoteStore,i),f.Ru=f.Ru.remove(t),f.Au.delete(i),GE(f))}function Q1(f,t,i){for(const n of i)n instanceof x3?(f.Vu.addReference(n.key,t),IX(f,n)):n instanceof y3?(Xt(Nl,"Document no longer in limbo: "+n.key),f.Vu.removeReference(n.key,t),f.Vu.containsKey(n.key)||w3(f,n.key)):ce(19791,{wu:n})}function IX(f,t){const i=t.key,n=i.path.canonicalString();f.Ru.get(i)||f.Eu.has(n)||(Xt(Nl,"New document in limbo: "+i),f.Eu.add(n),GE(f))}function GE(f){for(;f.Eu.size>0&&f.Ru.size<f.maxConcurrentLimboResolutions;){const t=f.Eu.values().next().value;f.Eu.delete(t);const i=new qt(Ye.fromString(t)),n=f.fu.next();f.Au.set(n,new yX(i)),f.Ru=f.Ru.insert(i,n),m0(f.remoteStore,new to(ls(Cf(i.path)),n,"TargetPurposeLimboResolution",ws.ce))}}async function Co(f,t,i){const n=ie(f),v=[],S=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach(((T,e)=>{s.push(n.pu(e,t,i).then((a=>{var m;if((a||i)&&n.isPrimaryClient){const c=a?!a.fromCache:(m=i==null?void 0:i.targetChanges.get(e.targetId))==null?void 0:m.current;n.sharedClientState.updateQueryState(e.targetId,c?"current":"not-current")}if(a){v.push(a);const c=AE.Es(e.targetId,a);S.push(c)}})))})),await Promise.all(s),n.Pu.J_(v),await(async function(e,a){const m=ie(e);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(c=>Et.forEach(a,(o=>Et.forEach(o.Ts,(u=>m.persistence.referenceDelegate.addReference(c,o.targetId,u))).next((()=>Et.forEach(o.Is,(u=>m.persistence.referenceDelegate.removeReference(c,o.targetId,u)))))))))}catch(c){if(!Fl(c))throw c;Xt(CE,"Failed to update sequence numbers: "+c)}for(const c of a){const o=c.targetId;if(!c.fromCache){const u=m.vs.get(o),r=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(r);m.vs=m.vs.insert(o,h)}}})(n.localStore,S))}async function LX(f,t){const i=ie(f);if(!i.currentUser.isEqual(t)){Xt(Nl,"User change. New user:",t.toKey());const n=await qI(i.localStore,t);i.currentUser=t,(function(S,s){S.mu.forEach((T=>{T.forEach((e=>{e.reject(new Gt(Rt.CANCELLED,s))}))})),S.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Co(i,n.Ns)}}function FX(f,t){const i=ie(f),n=i.Au.get(t);if(n&&n.hu)return Ue().add(n.key);{let v=Ue();const S=i.Iu.get(t);if(!S)return v;for(const s of S){const T=i.Tu.get(s);v=v.unionWith(T.view.nu)}return v}}async function DX(f,t){const i=ie(f),n=await wg(i.localStore,t.query,!0),v=t.view.cu(n);return i.isPrimaryClient&&Q1(i,t.targetId,v.au),v}async function OX(f,t){const i=ie(f);return n3(i.localStore,t).then((n=>Co(i,n)))}async function NX(f,t,i,n){const v=ie(f),S=await(function(T,e){const a=ie(T),m=ie(a.mutationQueue);return a.persistence.runTransaction("Lookup mutation documents","readonly",(c=>m.Xn(c,e).next((o=>o?a.localDocuments.getDocuments(c,o):Et.resolve(null)))))})(v.localStore,t);S!==null?(i==="pending"?await bf(v.remoteStore):i==="acknowledged"||i==="rejected"?(zE(v,t,n||null),VE(v,t),(function(T,e){ie(ie(T).mutationQueue).nr(e)})(v.localStore,t)):ce(6720,"Unknown batchState",{bu:i}),await Co(v,S)):Xt(Nl,"Cannot apply mutation batch with id: "+t)}async function BX(f,t){const i=ie(f);if(g0(i),_E(i),t===!0&&i.gu!==!0){const n=i.sharedClientState.getAllActiveQueryTargets(),v=await dC(i,n.toArray());i.gu=!0,await K1(i.remoteStore,!0);for(const S of v)m0(i.remoteStore,S)}else if(t===!1&&i.gu!==!1){const n=[];let v=Promise.resolve();i.Iu.forEach(((S,s)=>{i.sharedClientState.isLocalQueryTarget(s)?n.push(s):v=v.then((()=>(ff(i,s),uf(i.localStore,s,!0)))),cf(i.remoteStore,s)})),await v,await dC(i,n),(function(s){const T=ie(s);T.Au.forEach(((e,a)=>{cf(T.remoteStore,a)})),T.Vu.zr(),T.Au=new Map,T.Ru=new Fi(qt.comparator)})(i),i.gu=!1,await K1(i.remoteStore,!1)}}async function dC(f,t,i){const n=ie(f),v=[],S=[];for(const s of t){let T;const e=n.Iu.get(s);if(e&&e.length!==0){T=await hf(n.localStore,ls(e[0]));for(const a of e){const m=n.Tu.get(a),c=await DX(n,m);c.snapshot&&S.push(c.snapshot)}}else{const a=await i3(n.localStore,s);T=await hf(n.localStore,a),await UE(n,A3(a),s,!1,T.resumeToken)}v.push(T)}return n.Pu.J_(S),v}function A3(f){return eI(f.path,f.collectionGroup,f.orderBy,f.filters,f.limit,"F",f.startAt,f.endAt)}function UX(f){return(function(i){return ie(ie(i).persistence).hs()})(ie(f).localStore)}async function VX(f,t,i,n){const v=ie(f);if(v.gu)return void Xt(Nl,"Ignoring unexpected query state notification.");const S=v.Iu.get(t);if(S&&S.length>0)switch(i){case"current":case"not-current":{const s=await n3(v.localStore,rI(S[0])),T=Qp.createSynthesizedRemoteEventForCurrentChange(t,i==="current",Qi.EMPTY_BYTE_STRING);await Co(v,s,T);break}case"rejected":await uf(v.localStore,t,!0),ff(v,t,n);break;default:ce(64155,i)}}async function zX(f,t,i){const n=g0(f);if(n.gu){for(const v of t){if(n.Iu.has(v)&&n.sharedClientState.isActiveQueryTarget(v)){Xt(Nl,"Adding an already active target "+v);continue}const S=await i3(n.localStore,v),s=await hf(n.localStore,S);await UE(n,A3(S),s.targetId,!1,s.resumeToken),m0(n.remoteStore,s)}for(const v of i)n.Iu.has(v)&&await uf(n.localStore,v,!1).then((()=>{cf(n.remoteStore,v),ff(n,v)})).catch(Ll)}}function g0(f){const t=ie(f);return t.remoteStore.remoteSyncer.applyRemoteEvent=S3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FX.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=MX.bind(null,t),t.Pu.J_=mX.bind(null,t.eventManager),t.Pu.yu=gX.bind(null,t.eventManager),t}function _E(f){const t=ie(f);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RX.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=PX.bind(null,t),t}function GX(f,t,i){const n=ie(f);(async function(S,s,T){try{const e=await s.getMetadata();if(await(function(u,r){const h=ie(u),d=on(r.createTime);return h.persistence.runTransaction("hasNewerBundle","readonly",(l=>h.Pi.getBundleMetadata(l,r.id))).then((l=>!!l&&l.createTime.compareTo(d)>=0))})(S.localStore,e))return await s.close(),T._completeWith((function(u){return{taskState:"Success",documentsLoaded:u.totalDocuments,bytesLoaded:u.totalBytes,totalDocuments:u.totalDocuments,totalBytes:u.totalBytes}})(e)),Promise.resolve(new Set);T._updateProgress(g3(e));const a=new BE(e,s.serializer);let m=await s.Su();for(;m;){const o=await a.Ga(m);o&&T._updateProgress(o),m=await s.Su()}const c=await a.ja(S.localStore);return await Co(S,c.Ja,void 0),await(function(u,r){const h=ie(u);return h.persistence.runTransaction("Save bundle","readwrite",(d=>h.Pi.saveBundleMetadata(d,r)))})(S.localStore,e),T._completeWith(c.progress),Promise.resolve(c.Ha)}catch(e){return Ns(Nl,`Loading bundle failed with ${e}`),T._failWith(e),Promise.resolve(new Set)}})(n,t,i).then((v=>{n.sharedClientState.notifyBundleLoaded(v)}))}class df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=uu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return JI(this.persistence,new ZI,t.initialUser,this.serializer)}Cu(t){return new EE(v0.Vi,this.serializer)}Du(t){return new l3}async terminate(){var t,i;(t=this.gcScheduler)==null||t.stop(),(i=this.indexBackfillerScheduler)==null||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}df.provider={build:()=>new df};class WE extends df{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){ge(this.persistence.referenceDelegate instanceof Sg,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new kI(n,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new EE((n=>Sg.Vi(n,i)),this.serializer)}}class HE extends df{constructor(t,i,n){super(),this.xu=t,this.cacheSizeBytes=i,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await _E(this.xu.syncEngine),await bf(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return JI(this.persistence,new ZI,t.initialUser,this.serializer)}Fu(t,i){const n=this.persistence.referenceDelegate.garbageCollector;return new kI(n,t.asyncQueue,i)}Mu(t,i){const n=new $_(i,this.persistence);return new Y_(t.asyncQueue,n)}Cu(t){const i=wE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new SE(this.synchronizeTabs,i,t.clientId,n,t.asyncQueue,h3(),Hm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new l3}}class C3 extends HE{constructor(t,i){super(t,i,!1),this.xu=t,this.cacheSizeBytes=i,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const i=this.xu.syncEngine;this.sharedClientState instanceof Wx&&(this.sharedClientState.syncEngine={So:NX.bind(null,i),Do:VX.bind(null,i),Co:zX.bind(null,i),hs:UX.bind(null,i),bo:OX.bind(null,i)},await this.sharedClientState.start()),await this.persistence.zi((async n=>{await BX(this.xu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Du(t){const i=h3();if(!Wx.v(i))throw new Gt(Rt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=wE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Wx(i,t.asyncQueue,n,t.clientId,t.initialUser)}}class Rl{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>fC(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=LX.bind(null,this.syncEngine),await K1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new vX})()}createDatastore(t){const i=uu(t.databaseInfo.databaseId),n=QH(t.databaseInfo);return eX(t.authCredentials,t.appCheckCredentials,n,i)}createRemoteStore(t){return(function(n,v,S,s,T){return new nX(n,v,S,s,T)})(this.localStore,this.datastore,t.asyncQueue,(i=>fC(this.syncEngine,i,0)),(function(){return rC.v()?new rC:new YH})())}createSyncEngine(t,i){return(function(v,S,s,T,e,a,m){const c=new TX(v,S,s,T,e,a);return m&&(c.gu=!0),c})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await(async function(v){const S=ie(v);Xt(Jh,"RemoteStore shutting down."),S.Ea.add(5),await Pf(S),S.Aa.shutdown(),S.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(i=this.eventManager)==null||i.terminate()}}Rl.provider={build:()=>new Rl};function pC(f,t=10240){let i=0;return{async read(){if(i<f.byteLength){const n={value:f.slice(i,i+t),done:!1};return i+=t,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):an("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(t,i){this.Bu=t,this.serializer=i,this.metadata=new Bn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((n=>{n&&n.Ua()?this.metadata.resolve(n.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.qa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const t=await this.Ku();if(t===null)return null;const i=this.Lu.decode(t),n=Number(i);isNaN(n)&&this.qu(`length string (${i}) is not valid number`);const v=await this.Uu(n);return new m3(JSON.parse(v),t.length+n)}$u(){return this.buffer.findIndex((t=>t===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const t=this.$u();t<0&&this.qu("Reached the end of bundle when a length string is expected.");const i=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),i}async Uu(t){for(;this.buffer.length<t;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const i=this.Lu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),i}qu(t){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${t}`)}async Wu(){const t=await this.Bu.read();if(!t.done){const i=new Uint8Array(this.buffer.length+t.value.length);i.set(this.buffer),i.set(t.value,this.buffer.length),this.buffer=i}return t.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WX{constructor(t,i){this.bundleData=t,this.serializer=i,this.cursor=0,this.elements=[];let n=this.Su();if(!n||!n.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(n==null?void 0:n.qa)}`);this.metadata=n;do n=this.Su(),n!==null&&this.elements.push(n);while(n!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const t=this.Ku(),i=this.Uu(t);return new m3(JSON.parse(i),t)}Uu(t){if(this.cursor+t>this.bundleData.length)throw new Gt(Rt.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=t)}Ku(){const t=this.cursor;let i=this.cursor;for(;i<this.bundleData.length;){if(this.bundleData[i]==="{"){if(i===t)throw new Error("First character is a bracket and not a number");return this.cursor=i,Number(this.bundleData.slice(t,i))}i++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HX=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Gt(Rt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const i=await(async function(v,S){const s=ie(v),T={documents:S.map((c=>Ep(s.serializer,c)))},e=await s.jo("BatchGetDocuments",s.serializer.databaseId,Ye.emptyPath(),T,S.length),a=new Map;e.forEach((c=>{const o=sH(s.serializer,c);a.set(o.key.toString(),o)}));const m=[];return S.forEach((c=>{const o=a.get(c.toString());ge(!!o,55234,{key:c}),m.push(o)})),m})(this.datastore,t);return i.forEach((n=>this.recordVersion(n))),i}set(t,i){this.write(i.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,i){try{this.write(i.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new Rf(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((i=>{t.delete(i.key.toString())})),t.forEach(((i,n)=>{const v=qt.fromPath(n);this.mutations.push(new fE(v,this.precondition(v)))})),await(async function(n,v){const S=ie(n),s={writes:v.map((T=>Sp(S.serializer,T)))};await S.Wo("Commit",S.serializer.databaseId,Ye.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let i;if(t.isFoundDocument())i=t.version;else{if(!t.isNoDocument())throw ce(50498,{Gu:t.constructor.name});i=Te.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!i.isEqual(n))throw new Gt(Rt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),i)}precondition(t){const i=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&i?i.isEqual(Te.min())?Hi.exists(!1):Hi.updateTime(i):Hi.none()}preconditionForUpdate(t){const i=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&i){if(i.isEqual(Te.min()))throw new Gt(Rt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hi.updateTime(i)}return Hi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX{constructor(t,i,n,v,S){this.asyncQueue=t,this.datastore=i,this.options=n,this.updateFunction=v,this.deferred=S,this.zu=n.maxAttempts,this.M_=new RE(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const t=new HX(this.datastore),i=this.Ju(t);i&&i.then((n=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(n)})).catch((v=>{this.Zu(v)}))))})).catch((n=>{this.Zu(n)}))}))}Ju(t){try{const i=this.updateFunction(t);return!Xp(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}Zu(t){this.zu>0&&this.Xu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(t)}Xu(t){if((t==null?void 0:t.name)==="FirebaseError"){const i=t.code;return i==="aborted"||i==="failed-precondition"||i==="already-exists"||!yI(i)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl="FirestoreClient";class kX{constructor(t,i,n,v,S){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=n,this._databaseInfo=v,this.user=On.UNAUTHENTICATED,this.clientId=qg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=S,this.authCredentials.start(n,(async s=>{Xt(Pl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(Xt(Pl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const n=Lf(i,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Xx(f,t){f.asyncQueue.verifyOperationInProgress(),Xt(Pl,"Initializing OfflineComponentProvider");const i=f.configuration;await t.initialize(i);let n=i.initialUser;f.setCredentialChangeListener((async v=>{n.isEqual(v)||(await qI(t.localStore,v),n=v)})),t.persistence.setDatabaseDeletedListener((()=>f.terminate())),f._offlineComponents=t}async function vC(f,t){f.asyncQueue.verifyOperationInProgress();const i=await XE(f);Xt(Pl,"Initializing OnlineComponentProvider"),await t.initialize(i,f.configuration),f.setCredentialChangeListener((n=>oC(t.remoteStore,n))),f.setAppCheckTokenChangeListener(((n,v)=>oC(t.remoteStore,v))),f._onlineComponents=t}async function XE(f){if(!f._offlineComponents)if(f._uninitializedComponentsProvider){Xt(Pl,"Using user provided OfflineComponentProvider");try{await Xx(f,f._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(v){return v.name==="FirebaseError"?v.code===Rt.FAILED_PRECONDITION||v.code===Rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&v instanceof DOMException)||v.code===22||v.code===20||v.code===11})(i))throw i;Ns("Error using user provided cache. Falling back to memory cache: "+i),await Xx(f,new df)}}else Xt(Pl,"Using default OfflineComponentProvider"),await Xx(f,new WE(void 0));return f._offlineComponents}async function y0(f){return f._onlineComponents||(f._uninitializedComponentsProvider?(Xt(Pl,"Using user provided OnlineComponentProvider"),await vC(f,f._uninitializedComponentsProvider._online)):(Xt(Pl,"Using default OnlineComponentProvider"),await vC(f,new Rl))),f._onlineComponents}function M3(f){return XE(f).then((t=>t.persistence))}function Ff(f){return XE(f).then((t=>t.localStore))}function R3(f){return y0(f).then((t=>t.remoteStore))}function kE(f){return y0(f).then((t=>t.syncEngine))}function P3(f){return y0(f).then((t=>t.datastore))}async function pf(f){const t=await y0(f),i=t.eventManager;return i.onListen=EX.bind(null,t.syncEngine),i.onUnlisten=wX.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=SX.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=AX.bind(null,t.syncEngine),i}function YX(f){return f.asyncQueue.enqueue((async()=>{const t=await M3(f),i=await R3(f);return t.setNetworkEnabled(!0),(function(v){const S=ie(v);return S.Ea.delete(0),Jp(S)})(i)}))}function $X(f){return f.asyncQueue.enqueue((async()=>{const t=await M3(f),i=await R3(f);return t.setNetworkEnabled(!1),(async function(v){const S=ie(v);S.Ea.add(0),await Pf(S),S.Va.set("Offline")})(i)}))}function KX(f,t,i,n){const v=new x0(n),S=new NE(t,v,i);return f.asyncQueue.enqueueAndForget((async()=>FE(await pf(f),S))),()=>{v.Nu(),f.asyncQueue.enqueueAndForget((async()=>DE(await pf(f),S)))}}function jX(f,t){const i=new Bn;return f.asyncQueue.enqueueAndForget((async()=>(async function(v,S,s){try{const T=await(function(a,m){const c=ie(a);return c.persistence.runTransaction("read document","readonly",(o=>c.localDocuments.getDocument(o,m)))})(v,S);T.isFoundDocument()?s.resolve(T):T.isNoDocument()?s.resolve(null):s.reject(new Gt(Rt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(T){const e=Lf(T,`Failed to get document '${S} from cache`);s.reject(e)}})(await Ff(f),t,i))),i.promise}function b3(f,t,i={}){const n=new Bn;return f.asyncQueue.enqueueAndForget((async()=>(function(S,s,T,e,a){const m=new x0({next:o=>{m.Nu(),s.enqueueAndForget((()=>DE(S,c)));const u=o.docs.has(T);!u&&o.fromCache?a.reject(new Gt(Rt.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&e&&e.source==="server"?a.reject(new Gt(Rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(o)},error:o=>a.reject(o)}),c=new NE(Cf(T.path),m,{includeMetadataChanges:!0,Ka:!0});return FE(S,c)})(await pf(f),f.asyncQueue,t,i,n))),n.promise}function QX(f,t){const i=new Bn;return f.asyncQueue.enqueueAndForget((async()=>(async function(v,S,s){try{const T=await wg(v,S,!0),e=new T3(S,T.ks),a=e.ru(T.documents),m=e.applyChanges(a,!1);s.resolve(m.snapshot)}catch(T){const e=Lf(T,`Failed to execute query '${S} against cache`);s.reject(e)}})(await Ff(f),t,i))),i.promise}function I3(f,t,i={}){const n=new Bn;return f.asyncQueue.enqueueAndForget((async()=>(function(S,s,T,e,a){const m=new x0({next:o=>{m.Nu(),s.enqueueAndForget((()=>DE(S,c))),o.fromCache&&e.source==="server"?a.reject(new Gt(Rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(o)},error:o=>a.reject(o)}),c=new NE(T,m,{includeMetadataChanges:!0,Ka:!0});return FE(S,c)})(await pf(f),f.asyncQueue,t,i,n))),n.promise}function ZX(f,t,i){const n=new Bn;return f.asyncQueue.enqueueAndForget((async()=>{try{const v=await P3(f);n.resolve((async function(s,T,e){var h;const a=ie(s),{request:m,gt:c,parent:o}=II(a.serializer,iI(T),e);a.connection.Ko||delete m.parent;const u=(await a.jo("RunAggregationQuery",a.serializer.databaseId,o,m,1)).filter((d=>!!d.result));ge(u.length===1,64727);const r=(h=u[0].result)==null?void 0:h.aggregateFields;return Object.keys(r).reduce(((d,l)=>(d[c[l]]=r[l],d)),{})})(v,t,i))}catch(v){n.reject(v)}})),n.promise}function JX(f,t){const i=new Bn;return f.asyncQueue.enqueueAndForget((async()=>CX(await kE(f),t,i))),i.promise}function qX(f,t){const i=new x0(t);return f.asyncQueue.enqueueAndForget((async()=>(function(v,S){ie(v).Ca.add(S),S.next()})(await pf(f),i))),()=>{i.Nu(),f.asyncQueue.enqueueAndForget((async()=>(function(v,S){ie(v).Ca.delete(S)})(await pf(f),i)))}}function tk(f,t,i){const n=new Bn;return f.asyncQueue.enqueueAndForget((async()=>{const v=await P3(f);new XX(f.asyncQueue,v,i,t,n).ju()})),n.promise}function ek(f,t,i,n){const v=(function(s,T){let e;return e=typeof s=="string"?EI().encode(s):s,(function(m,c){return new _X(m,c)})((function(m,c){if(m instanceof Uint8Array)return pC(m,c);if(m instanceof ArrayBuffer)return pC(new Uint8Array(m),c);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(e),T)})(i,uu(t));f.asyncQueue.enqueueAndForget((async()=>{GX(await kE(f),v,n)}))}function ik(f,t){return f.asyncQueue.enqueue((async()=>(function(n,v){const S=ie(n);return S.persistence.runTransaction("Get named query","readonly",(s=>S.Pi.getNamedQuery(s,v)))})(await Ff(f),t)))}function L3(f,t){return(function(n,v){return new WX(n,v)})(f,t)}function nk(f,t){return f.asyncQueue.enqueue((async()=>(async function(n,v){const S=ie(n),s=S.indexManager,T=[];return S.persistence.runTransaction("Configure indexes","readwrite",(e=>s.getFieldIndexes(e).next((a=>(function(c,o,u,r,h){c=[...c],o=[...o],c.sort(u),o.sort(u);const d=c.length,l=o.length;let p=0,g=0;for(;p<l&&g<d;){const x=u(c[g],o[p]);x<0?h(c[g++]):x>0?r(o[p++]):(p++,g++)}for(;p<l;)r(o[p++]);for(;g<d;)h(c[g++])})(a,v,W_,(m=>{T.push(s.addFieldIndex(e,m))}),(m=>{T.push(s.deleteFieldIndex(e,m))})))).next((()=>Et.waitFor(T)))))})(await Ff(f),t)))}function sk(f,t){return f.asyncQueue.enqueue((async()=>(function(n,v){ie(n).Cs.As=v})(await Ff(f),t)))}function rk(f){return f.asyncQueue.enqueue((async()=>(function(i){const n=ie(i),v=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",(S=>v.deleteAllFieldIndexes(S)))})(await Ff(f))))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(f){const t={};return f.timeoutSeconds!==void 0&&(t.timeoutSeconds=f.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="ComponentProvider",mC=new Map;function ok(f,t,i,n,v){return new SW(f,t,i,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,F3(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="firestore.googleapis.com",gC=!0;class xC{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Gt(Rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D3,this.ssl=gC}else this.host=t.host,this.ssl=t.ssl??gC;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=GI;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<XI)throw new Gt(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}xb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F3(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Gt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Gt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Gt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,v){return n.timeoutSeconds===v.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qp{constructor(t,i,n,v){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=n,this._app=v,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Gt(Rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Gt(Rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xC(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new mb;switch(n.type){case"firstParty":return new N_(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Gt(Rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const n=mC.get(i);n&&(Xt(ak,"Removing Datastore"),mC.delete(i),n.terminate())})(this),Promise.resolve()}}function O3(f,t,i,n={}){var a;f=$e(f,qp);const v=ou(t),S=f._getSettings(),s={...S,emulatorOptions:f._getEmulatorOptions()},T=`${t}:${i}`;v&&(KT(`https://${T}`),QP("Firestore",!0)),S.host!==D3&&S.host!==T&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const e={...S,host:T,ssl:v,emulatorOptions:n};if(!Er(e,s)&&(f._setSettings(e),n.mockUserToken)){let m,c;if(typeof n.mockUserToken=="string")m=n.mockUserToken,c=On.MOCK_USER;else{m=tG(n.mockUserToken,(a=f._app)==null?void 0:a.options.projectId);const o=n.mockUserToken.sub||n.mockUserToken.user_id;if(!o)throw new Gt(Rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new On(o)}f._authCredentials=new F_(new vb(m,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t,i,n){this.converter=i,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Pn(this.firestore,t,this._query)}}class wi{constructor(t,i,n){this.converter=i,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new wi(this.firestore,t,this._key)}toJSON(){return{type:wi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,n){if(hu(i,wi._jsonSchema))return new wi(t,n||null,new qt(Ye.fromString(i.referencePath)))}}wi._jsonSchemaVersion="firestore/documentReference/1.0",wi._jsonSchema={type:xn("string",wi._jsonSchemaVersion),referencePath:xn("string")};class _r extends Pn{constructor(t,i,n){super(t,i,Cf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new wi(this.firestore,null,new qt(t))}withConverter(t){return new _r(this.firestore,t,this._path)}}function YE(f,t,...i){if(f=ui(f),qT("collection","path",t),f instanceof qp){const n=Ye.fromString(t,...i);return aA(n),new _r(f,null,n)}{if(!(f instanceof wi||f instanceof _r))throw new Gt(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=f._path.child(Ye.fromString(t,...i));return aA(n),new _r(f.firestore,null,n)}}function lk(f,t){if(f=$e(f,qp),qT("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Gt(Rt.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pn(f,null,(function(n){return new So(Ye.emptyPath(),n)})(t))}function Df(f,t,...i){if(f=ui(f),arguments.length===1&&(t=qg.newId()),qT("doc","path",t),f instanceof qp){const n=Ye.fromString(t,...i);return rA(n),new wi(f,null,new qt(n))}{if(!(f instanceof wi||f instanceof _r))throw new Gt(Rt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=f._path.child(Ye.fromString(t,...i));return rA(n),new wi(f.firestore,f instanceof _r?f.converter:null,new qt(n))}}function hk(f,t){return f=ui(f),t=ui(t),(f instanceof wi||f instanceof _r)&&(t instanceof wi||t instanceof _r)&&f.firestore===t.firestore&&f.path===t.path&&f.converter===t.converter}function $E(f,t){return f=ui(f),t=ui(t),f instanceof Pn&&t instanceof Pn&&f.firestore===t.firestore&&$p(f._query,t._query)&&f.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="AsyncQueue";class TC{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RE(this,"async_queue_retry"),this._c=()=>{const n=Hm();n&&Xt(yC,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const i=Hm();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=Hm();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Bn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Fl(t))throw t;Xt(yC,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,an("INTERNAL UNHANDLED ERROR: ",EC(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=i,i}enqueueAfterDelay(t,i,n){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const v=LE.createAndSchedule(this,t,i,n,(S=>this.hc(S)));return this.tc.push(v),v}uc(){this.nc&&ce(47125,{Pc:EC(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,n)=>i.targetTimeMs-n.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function EC(f){let t=f.message||"";return f.stack&&(t=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,i,n){this._progressObserver={next:t,error:i,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,i){return this._taskCompletionResolver.promise.then(t,i)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=-1;class Ri extends qp{constructor(t,i,n,v){super(t,i,n,v),this.type="firestore",this._queue=new TC,this._persistenceKey=(v==null?void 0:v.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new TC(t),this._firestoreClient=void 0,await t}}}function B3(f,t,i){i||(i=gp);const n=Eo(f,"firestore");if(n.isInitialized(i)){const v=n.getImmediate({identifier:i}),S=n.getOptions(i);if(Er(S,t))return v;throw new Gt(Rt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Gt(Rt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<XI)throw new Gt(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&ou(t.host)&&KT(t.host),n.initialize({options:t,instanceIdentifier:i})}function ck(f,t){const i=typeof f=="object"?f:ZT(),n=typeof f=="string"?f:t||gp,v=Eo(i,"firestore").getImmediate({identifier:n});if(!v._initialized){const S=Jz("firestore");S&&O3(v,...S)}return v}function Xi(f){if(f._terminated)throw new Gt(Rt.FAILED_PRECONDITION,"The client has already been terminated.");return f._firestoreClient||U3(f),f._firestoreClient}function U3(f){var n,v,S,s;const t=f._freezeSettings(),i=ok(f._databaseId,((n=f._app)==null?void 0:n.options.appId)||"",f._persistenceKey,(v=f._app)==null?void 0:v.options.apiKey,t);f._componentsProvider||(S=t.localCache)!=null&&S._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(f._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),f._firestoreClient=new kX(f._authCredentials,f._appCheckCredentials,f._queue,i,f._componentsProvider&&(function(e){const a=e==null?void 0:e._online.build();return{_offline:e==null?void 0:e._offline.build(a),_online:a}})(f._componentsProvider))}function fk(f,t){Ns("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=f._freezeSettings();return V3(f,Rl.provider,{build:n=>new HE(n,i.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}async function dk(f){Ns("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=f._freezeSettings();V3(f,Rl.provider,{build:i=>new C3(i,t.cacheSizeBytes)})}function V3(f,t,i){if((f=$e(f,Ri))._firestoreClient||f._terminated)throw new Gt(Rt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(f._componentsProvider||f._getSettings().localCache)throw new Gt(Rt.FAILED_PRECONDITION,"SDK cache is already specified.");f._componentsProvider={_online:t,_offline:i},U3(f)}function pk(f){if(f._initialized&&!f._terminated)throw new Gt(Rt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Bn;return f._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!Ea.v())return Promise.resolve();const v=n+QI;await Ea.delete(v)})(wE(f._databaseId,f._persistenceKey)),t.resolve()}catch(i){t.reject(i)}})),t.promise}function vk(f){return(function(i){const n=new Bn;return i.asyncQueue.enqueueAndForget((async()=>bX(await kE(i),n))),n.promise})(Xi(f=$e(f,Ri)))}function mk(f){return YX(Xi(f=$e(f,Ri)))}function gk(f){return $X(Xi(f=$e(f,Ri)))}function xk(f){return p_(f.app,"firestore",f._databaseId.database),f._delete()}function Z1(f,t){const i=Xi(f=$e(f,Ri)),n=new N3;return ek(i,f._databaseId,t,n),n}function z3(f,t){return ik(Xi(f=$e(f,Ri)),t).then((i=>i?new Pn(f,null,i.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ss(Qi.fromBase64String(t))}catch(i){throw new Gt(Rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Ss(Qi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ss._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(hu(t,Ss._jsonSchema))return Ss.fromBase64String(t.bytes)}}Ss._jsonSchemaVersion="firestore/bytes/1.0",Ss._jsonSchema={type:xn("string",Ss._jsonSchemaVersion),bytes:xn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new Gt(Rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}function yk(){return new cu(R1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new Gt(Rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new Gt(Rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Le(this._lat,t._lat)||Le(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wr._jsonSchemaVersion}}static fromJSON(t){if(hu(t,Wr._jsonSchema))return new Wr(t.latitude,t.longitude)}}Wr._jsonSchemaVersion="firestore/geoPoint/1.0",Wr._jsonSchema={type:xn("string",Wr._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,v){if(n.length!==v.length)return!1;for(let S=0;S<n.length;++S)if(n[S]!==v[S])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(hu(t,Qs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Qs(t.vectorValues);throw new Gt(Rt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qs._jsonSchemaVersion="firestore/vectorValue/1.0",Qs._jsonSchema={type:xn("string",Qs._jsonSchemaVersion),vectorValues:xn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=/^__.*__$/;class Ek{constructor(t,i,n){this.data=t,this.fieldMask=i,this.fieldTransforms=n}toMutation(t,i){return this.fieldMask!==null?new Ao(t,this.data,this.fieldMask,i,this.fieldTransforms):new Mf(t,this.data,i,this.fieldTransforms)}}class G3{constructor(t,i,n){this.data=t,this.fieldMask=i,this.fieldTransforms=n}toMutation(t,i){return new Ao(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function _3(f){switch(f){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{dataSource:f})}}class T0{constructor(t,i,n,v,S,s){this.settings=t,this.databaseId=i,this.serializer=n,this.ignoreUndefinedProperties=v,S===void 0&&this.validatePath(),this.fieldTransforms=S||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new T0({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var v;const i=(v=this.path)==null?void 0:v.child(t),n=this.contextWith({path:i,arrayElement:!1});return n.validatePathSegment(t),n}childContextForFieldPath(t){var v;const i=(v=this.path)==null?void 0:v.child(t),n=this.contextWith({path:i,arrayElement:!1});return n.validatePath(),n}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Rg(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(_3(this.dataSource)&&Tk.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class Sk{constructor(t,i,n){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=n||uu(t)}createContext(t,i,n,v=!1){return new T0({dataSource:t,methodName:i,targetDoc:n,path:Bi.emptyPath(),arrayElement:!1,hasConverter:v},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fu(f){const t=f._freezeSettings(),i=uu(f._databaseId);return new Sk(f._databaseId,!!t.ignoreUndefinedProperties,i)}function E0(f,t,i,n,v,S={}){const s=f.createContext(S.merge||S.mergeFields?2:0,t,i,v);tS("Data must be an object, but it was:",s,n);const T=X3(n,s);let e,a;if(S.merge)e=new As(s.fieldMask),a=s.fieldTransforms;else if(S.mergeFields){const m=[];for(const c of S.mergeFields){const o=go(t,c,i);if(!s.contains(o))throw new Gt(Rt.INVALID_ARGUMENT,`Field '${o}' is specified in your field mask but missing from your input data.`);Y3(m,o)||m.push(o)}e=new As(m),a=s.fieldTransforms.filter((c=>e.covers(c.field)))}else e=null,a=s.fieldTransforms;return new Ek(new Nn(T),e,a)}class tv extends Bl{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof tv}}function W3(f,t,i){return new T0({dataSource:3,targetDoc:t.settings.targetDoc,methodName:f._methodName,arrayElement:i},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class KE extends Bl{_toFieldTransform(t){return new jp(t.path,new af)}isEqual(t){return t instanceof KE}}class jE extends Bl{constructor(t,i){super(t),this.Ac=i}_toFieldTransform(t){const i=W3(this,t,!0),n=this.Ac.map((S=>du(S,i))),v=new $h(n);return new jp(t.path,v)}isEqual(t){return t instanceof jE&&Er(this.Ac,t.Ac)}}class QE extends Bl{constructor(t,i){super(t),this.Ac=i}_toFieldTransform(t){const i=W3(this,t,!0),n=this.Ac.map((S=>du(S,i))),v=new Kh(n);return new jp(t.path,v)}isEqual(t){return t instanceof QE&&Er(this.Ac,t.Ac)}}class ZE extends Bl{constructor(t,i){super(t),this.Vc=i}_toFieldTransform(t){const i=new of(t.serializer,cI(t.serializer,this.Vc));return new jp(t.path,i)}isEqual(t){return t instanceof ZE&&this.Vc===t.Vc}}function JE(f,t,i,n){const v=f.createContext(1,t,i);tS("Data must be an object, but it was:",v,n);const S=[],s=Nn.empty();Dl(n,((e,a)=>{const m=eS(t,e,i);a=ui(a);const c=v.childContextForFieldPath(m);if(a instanceof tv)S.push(m);else{const o=du(a,c);o!=null&&(S.push(m),s.set(m,o))}}));const T=new As(S);return new G3(s,T,v.fieldTransforms)}function qE(f,t,i,n,v,S){const s=f.createContext(1,t,i),T=[go(t,n,i)],e=[v];if(S.length%2!=0)throw new Gt(Rt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let o=0;o<S.length;o+=2)T.push(go(t,S[o])),e.push(S[o+1]);const a=[],m=Nn.empty();for(let o=T.length-1;o>=0;--o)if(!Y3(a,T[o])){const u=T[o];let r=e[o];r=ui(r);const h=s.childContextForFieldPath(u);if(r instanceof tv)a.push(u);else{const d=du(r,h);d!=null&&(a.push(u),m.set(u,d))}}const c=new As(a);return new G3(m,c,s.fieldTransforms)}function H3(f,t,i,n=!1){return du(i,f.createContext(n?4:3,t))}function du(f,t){if(k3(f=ui(f)))return tS("Unsupported field value:",t,f),X3(f,t);if(f instanceof Bl)return(function(n,v){if(!_3(v.dataSource))throw v.createError(`${n._methodName}() can only be used with update() and set()`);if(!v.path)throw v.createError(`${n._methodName}() is not currently supported inside arrays`);const S=n._toFieldTransform(v);S&&v.fieldTransforms.push(S)})(f,t),null;if(f===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),f instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(n,v){const S=[];let s=0;for(const T of n){let e=du(T,v.childContextForArray(s));e==null&&(e={nullValue:"NULL_VALUE"}),S.push(e),s++}return{arrayValue:{values:S}}})(f,t)}return(function(n,v){if((n=ui(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return cI(v.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const S=gi.fromDate(n);return{timestampValue:lf(v.serializer,S)}}if(n instanceof gi){const S=new gi(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:lf(v.serializer,S)}}if(n instanceof Wr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ss)return{bytesValue:AI(v.serializer,n._byteString)};if(n instanceof wi){const S=v.databaseId,s=n.firestore._databaseId;if(!s.isEqual(S))throw v.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${S.projectId}/${S.database}`);return{referenceValue:gE(n.firestore._databaseId||v.databaseId,n._key.path)}}if(n instanceof Qs)return(function(s,T){const e=s instanceof Qs?s.toArray():s;return{mapValue:{fields:{[aE]:{stringValue:oE},[nf]:{arrayValue:{values:e.map((m=>{if(typeof m!="number")throw T.createError("VectorValues must only contain numeric values.");return cE(T.serializer,m)}))}}}}}})(n,v);if(NI(n))return n._toProto(v.serializer);throw v.createError(`Unsupported field value: ${t0(n)}`)})(f,t)}function X3(f,t){const i={};return Vb(f)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Dl(f,((n,v)=>{const S=du(v,t.childContextForField(n));S!=null&&(i[n]=S)})),{mapValue:{fields:i}}}function k3(f){return!(typeof f!="object"||f===null||f instanceof Array||f instanceof Date||f instanceof gi||f instanceof Wr||f instanceof Ss||f instanceof wi||f instanceof Bl||f instanceof Qs||NI(f))}function tS(f,t,i){if(!k3(i)||!yb(i)){const n=t0(i);throw n==="an object"?t.createError(f+" a custom object"):t.createError(f+" "+n)}}function go(f,t,i){if((t=ui(t))instanceof cu)return t._internalPath;if(typeof t=="string")return eS(f,t);throw Rg("Field path arguments must be of type string or ",f,!1,void 0,i)}const wk=new RegExp("[~\\*/\\[\\]]");function eS(f,t,i){if(t.search(wk)>=0)throw Rg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,f,!1,void 0,i);try{return new cu(...t.split("."))._internalPath}catch{throw Rg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,f,!1,void 0,i)}}function Rg(f,t,i,n,v){const S=n&&!n.isEmpty(),s=v!==void 0;let T=`Function ${t}() called with invalid data`;i&&(T+=" (via `toFirestore()`)"),T+=". ";let e="";return(S||s)&&(e+=" (found",S&&(e+=` in field ${n}`),s&&(e+=` in document ${v}`),e+=")"),new Gt(Rt.INVALID_ARGUMENT,T+f+e)}function Y3(f,t){return f.some((i=>i.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{convertValue(t,i="none"){switch(wl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _i(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(mo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw ce(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const n={};return Dl(t,((v,S)=>{n[v]=this.convertValue(S,i)})),n}convertVectorValue(t){var n,v,S;const i=(S=(v=(n=t.fields)==null?void 0:n[nf].arrayValue)==null?void 0:v.values)==null?void 0:S.map((s=>_i(s.doubleValue)));return new Qs(i)}convertGeoPoint(t){return new Wr(_i(t.latitude),_i(t.longitude))}convertArray(t,i){return(t.values||[]).map((n=>this.convertValue(n,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const n=a0(t);return n==null?null:this.convertValue(n,i);case"estimate":return this.convertTimestamp(mp(t));default:return null}}convertTimestamp(t){const i=vo(t);return new gi(i.seconds,i.nanos)}convertDocumentKey(t,i){const n=Ye.fromString(t);ge(OI(n),9688,{name:t});const v=new Sl(n.get(1),n.get(3)),S=new qt(n.popFirst(5));return v.isEqual(i)||an(`Document ${S} contains a document reference within a different database (${v.projectId}/${v.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),S}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends iS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ss(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new wi(this.firestore,null,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(){return new tv("deleteField")}function ev(){return new KE("serverTimestamp")}function Ck(...f){return new jE("arrayUnion",f)}function Mk(...f){return new QE("arrayRemove",f)}function Rk(f){return new ZE("increment",f)}function Pk(f){return new Qs(f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(f){var n;const t=Xi($e(f.firestore,Ri)),i=(n=t._onlineComponents)==null?void 0:n.datastore.serializer;return i===void 0?null:c0(i,ls(f._query)).ft}function Ik(f,t){var S;const i=Ub(t,((s,T)=>new xI(T,s.aggregateType,s._internalFieldPath))),n=Xi($e(f.firestore,Ri)),v=(S=n._onlineComponents)==null?void 0:S.datastore.serializer;return v===void 0?null:II(v,iI(f._query),i,!0).request}const SC="@firebase/firestore",wC="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(f){return(function(i,n){if(typeof i!="object"||i===null)return!1;const v=i;for(const S of n)if(S in v&&typeof v[S]=="function")return!0;return!1})(f,["next","error","complete"])}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(t="count",i){this._internalFieldPath=i,this.type="AggregateField",this.aggregateType=t}}class $3{constructor(t,i,n){this._userDataWriter=i,this._data=n,this.type="AggregateQuerySnapshot",this.query=t}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new Nn({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,i,n,v,S){this._firestore=t,this._userDataWriter=i,this._key=n,this._document=v,this._converter=S}get id(){return this._key.path.lastSegment()}get ref(){return new wi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Lk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const i=this._document.data.field(go("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class Lk extends wp{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(f){if(f.limitType==="L"&&f.explicitOrderBy.length===0)throw new Gt(Rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nS{}class Of extends nS{}function sS(f,t,...i){let n=[];t instanceof nS&&n.push(t),n=n.concat(i),(function(S){const s=S.filter((e=>e instanceof pu)).length,T=S.filter((e=>e instanceof Nf)).length;if(s>1||s>0&&T>0)throw new Gt(Rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const v of n)f=v._apply(f);return f}class Nf extends Of{constructor(t,i,n){super(),this._field=t,this._op=i,this._value=n,this.type="where"}static _create(t,i,n){return new Nf(t,i,n)}_apply(t){const i=this._parse(t);return Z3(t._query,i),new Pn(t.firestore,t.converter,V1(t._query,i))}_parse(t){const i=fu(t.firestore);return(function(S,s,T,e,a,m,c){let o;if(a.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Gt(Rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){CC(c,m);const r=[];for(const h of c)r.push(AC(e,S,h));o={arrayValue:{values:r}}}else o=AC(e,S,c)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||CC(c,m),o=H3(T,s,c,m==="in"||m==="not-in");return ii.create(a,m,o)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function Fk(f,t,i){const n=t,v=go("where",f);return Nf._create(v,n,i)}class pu extends nS{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new pu(t,i)}_parse(t){const i=this._queryConstraints.map((n=>n._parse(t))).filter((n=>n.getFilters().length>0));return i.length===1?i[0]:Si.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(v,S){let s=v;const T=S.getFlattenedFilters();for(const e of T)Z3(s,e),s=V1(s,e)})(t._query,i),new Pn(t.firestore,t.converter,V1(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Dk(...f){return f.forEach((t=>J3("or",t))),pu._create("or",f)}function Ok(...f){return f.forEach((t=>J3("and",t))),pu._create("and",f)}class S0 extends Of{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new S0(t,i)}_apply(t){const i=(function(v,S,s){if(v.startAt!==null)throw new Gt(Rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(v.endAt!==null)throw new Gt(Rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tp(S,s)})(t._query,this._field,this._direction);return new Pn(t.firestore,t.converter,NW(t._query,i))}}function rS(f,t="asc"){const i=t,n=go("orderBy",f);return S0._create(n,i)}class iv extends Of{constructor(t,i,n){super(),this.type=t,this._limit=i,this._limitType=n}static _create(t,i,n){return new iv(t,i,n)}_apply(t){return new Pn(t.firestore,t.converter,xg(t._query,this._limit,this._limitType))}}function j3(f){return Tb("limit",f),iv._create("limit",f,"F")}function Nk(f){return Tb("limitToLast",f),iv._create("limitToLast",f,"L")}class nv extends Of{constructor(t,i,n){super(),this.type=t,this._docOrFields=i,this._inclusive=n}static _create(t,i,n){return new nv(t,i,n)}_apply(t){const i=Q3(t,this.type,this._docOrFields,this._inclusive);return new Pn(t.firestore,t.converter,BW(t._query,i))}}function Bk(...f){return nv._create("startAt",f,!0)}function Uk(...f){return nv._create("startAfter",f,!1)}class sv extends Of{constructor(t,i,n){super(),this.type=t,this._docOrFields=i,this._inclusive=n}static _create(t,i,n){return new sv(t,i,n)}_apply(t){const i=Q3(t,this.type,this._docOrFields,this._inclusive);return new Pn(t.firestore,t.converter,UW(t._query,i))}}function Vk(...f){return sv._create("endBefore",f,!1)}function zk(...f){return sv._create("endAt",f,!0)}function Q3(f,t,i,n){if(i[0]=ui(i[0]),i[0]instanceof wp)return(function(S,s,T,e,a){if(!e)throw new Gt(Rt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${T}().`);const m=[];for(const c of vc(S))if(c.field.isKeyField())m.push(kh(s,e.key));else{const o=e.data.field(c.field);if(r0(o))throw new Gt(Rt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(o===null){const u=c.field.canonicalString();throw new Gt(Rt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${u}' (used as the orderBy) does not exist.`)}m.push(o)}return new Cl(m,a)})(f._query,f.firestore._databaseId,t,i[0]._document,n);{const v=fu(f.firestore);return(function(s,T,e,a,m,c){const o=s.explicitOrderBy;if(m.length>o.length)throw new Gt(Rt.INVALID_ARGUMENT,`Too many arguments provided to ${a}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const u=[];for(let r=0;r<m.length;r++){const h=m[r];if(o[r].field.isKeyField()){if(typeof h!="string")throw new Gt(Rt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${a}(), but got a ${typeof h}`);if(!hE(s)&&h.indexOf("/")!==-1)throw new Gt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${a}() must be a plain document ID, but '${h}' contains a slash.`);const d=s.path.child(Ye.fromString(h));if(!qt.isDocumentKey(d))throw new Gt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${a}() must result in a valid document path, but '${d}' is not because it contains an odd number of segments.`);const l=new qt(d);u.push(kh(T,l))}else{const d=H3(e,a,h);u.push(d)}}return new Cl(u,c)})(f._query,f.firestore._databaseId,v,t,i,n)}}function AC(f,t,i){if(typeof(i=ui(i))=="string"){if(i==="")throw new Gt(Rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hE(t)&&i.indexOf("/")!==-1)throw new Gt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const n=t.path.child(Ye.fromString(i));if(!qt.isDocumentKey(n))throw new Gt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return kh(f,new qt(n))}if(i instanceof wi)return kh(f,i._key);throw new Gt(Rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${t0(i)}.`)}function CC(f,t){if(!Array.isArray(f)||f.length===0)throw new Gt(Rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Z3(f,t){const i=(function(v,S){for(const s of v)for(const T of s.getFlattenedFilters())if(S.indexOf(T.op)>=0)return T.op;return null})(f.filters,(function(v){switch(v){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new Gt(Rt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Gt(Rt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}function J3(f,t){if(!(t instanceof Nf||t instanceof pu))throw new Gt(Rt.INVALID_ARGUMENT,`Function ${f}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function w0(f,t,i){let n;return n=f?i&&(i.merge||i.mergeFields)?f.toFirestore(t,i):f.toFirestore(t):t,n}class aS extends iS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ss(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new wi(this.firestore,null,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(f){return new vf("sum",go("sum",f))}function _k(f){return new vf("avg",go("average",f))}function q3(){return new vf("count")}function Wk(f,t){var i,n;return f instanceof vf&&t instanceof vf&&f.aggregateType===t.aggregateType&&((i=f._internalFieldPath)==null?void 0:i.canonicalString())===((n=t._internalFieldPath)==null?void 0:n.canonicalString())}function Hk(f,t){return $E(f.query,t.query)&&Er(f.data(),t.data())}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(f){return t4(f,{count:q3()})}function t4(f,t){const i=$e(f.firestore,Ri),n=Xi(i),v=Ub(t,((S,s)=>new xI(s,S.aggregateType,S._internalFieldPath)));return ZX(n,f._query,v).then((S=>(function(T,e,a){const m=new Ul(T);return new $3(e,m,a)})(i,f,S)))}class kk{constructor(t){this.kind="memory",this._onlineComponentProvider=Rl.provider,this._offlineComponentProvider=t!=null&&t.garbageCollector?t.garbageCollector._offlineComponentProvider:{build:()=>new WE(void 0)}}toJSON(){return{kind:this.kind}}}class Yk{constructor(t){let i;this.kind="persistent",t!=null&&t.tabManager?(t.tabManager._initialize(t),i=t.tabManager):(i=i4(void 0),i._initialize(t)),this._onlineComponentProvider=i._onlineComponentProvider,this._offlineComponentProvider=i._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class $k{constructor(){this.kind="memoryEager",this._offlineComponentProvider=df.provider}toJSON(){return{kind:this.kind}}}class Kk{constructor(t){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new WE(t)}}toJSON(){return{kind:this.kind}}}function jk(){return new $k}function Qk(f){return new Kk(f==null?void 0:f.cacheSizeBytes)}function Zk(f){return new kk(f)}function e4(f){return new Yk(f)}class Jk{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Rl.provider,this._offlineComponentProvider={build:i=>new HE(i,t==null?void 0:t.cacheSizeBytes,this.forceOwnership)}}}class qk{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=Rl.provider,this._offlineComponentProvider={build:i=>new C3(i,t==null?void 0:t.cacheSizeBytes)}}}function i4(f){return new Jk(f==null?void 0:f.forceOwnership)}function n4(){return new qk}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="NOT SUPPORTED";class eo{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Fs extends wp{constructor(t,i,n,v,S,s){super(t,i,n,v,s),this._firestore=t,this._firestoreImpl=t,this.metadata=S}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const n=this._document.data.field(go("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Gt(Rt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=Fs._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}function tY(f,t,i){if(hu(t,Fs._jsonSchema)){if(t.bundle===s4)throw new Gt(Rt.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const n=uu(f._databaseId),v=L3(t.bundle,n),S=v.t(),s=new BE(v.getMetadata(),n);for(const m of S)s.o(m);const T=s.documents;if(T.length!==1)throw new Gt(Rt.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${T.length} documents.`);const e=u0(n,T[0].document),a=new qt(Ye.fromString(t.bundleName));return new Fs(f,new aS(f),a,e,new eo(!1,!1),i||null)}}Fs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fs._jsonSchema={type:xn("string",Fs._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class Jd extends Fs{data(t={}){return super.data(t)}}class Ds{constructor(t,i,n,v){this._firestore=t,this._userDataWriter=i,this._snapshot=v,this.metadata=new eo(v.hasPendingWrites,v.fromCache),this.query=n}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((n=>{t.call(i,new Jd(this._firestore,this._userDataWriter,n.key,n,new eo(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Gt(Rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(v,S){if(v._snapshot.oldDocs.isEmpty()){let s=0;return v._snapshot.docChanges.map((T=>{const e=new Jd(v._firestore,v._userDataWriter,T.doc.key,T.doc,new eo(v._snapshot.mutatedKeys.has(T.doc.key),v._snapshot.fromCache),v.query.converter);return T.doc,{type:"added",doc:e,oldIndex:-1,newIndex:s++}}))}{let s=v._snapshot.oldDocs;return v._snapshot.docChanges.filter((T=>S||T.type!==3)).map((T=>{const e=new Jd(v._firestore,v._userDataWriter,T.doc.key,T.doc,new eo(v._snapshot.mutatedKeys.has(T.doc.key),v._snapshot.fromCache),v.query.converter);let a=-1,m=-1;return T.type!==0&&(a=s.indexOf(T.doc.key),s=s.delete(T.doc.key)),T.type!==1&&(s=s.add(T.doc),m=s.indexOf(T.doc.key)),{type:iY(T.type),doc:e,oldIndex:a,newIndex:m}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Gt(Rt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ds._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=qg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],n=[],v=[];return this.docs.forEach((S=>{S._document!==null&&(i.push(S._document),n.push(this._userDataWriter.convertObjectMap(S._document.data.value.mapValue.fields,"previous")),v.push(S.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function eY(f,t,i){if(hu(t,Ds._jsonSchema)){if(t.bundle===s4)throw new Gt(Rt.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const n=uu(f._databaseId),v=L3(t.bundle,n),S=v.t(),s=new BE(v.getMetadata(),n);for(const o of S)s.o(o);if(s.queries.length!==1)throw new Gt(Rt.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${s.queries.length} queries.`);const T=f0(s.queries[0].bundledQuery),e=s.documents;let a=new Gh;e.map((o=>{const u=u0(n,o.document);a=a.add(u)}));const m=qh.fromInitialDocuments(T,a,Ue(),!1,!1),c=new Pn(f,i||null,T);return new Ds(f,new aS(f),c,m)}}function iY(f){switch(f){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:f})}}function nY(f,t){return f instanceof Fs&&t instanceof Fs?f._firestore===t._firestore&&f._key.isEqual(t._key)&&(f._document===null?t._document===null:f._document.isEqual(t._document))&&f._converter===t._converter:f instanceof Ds&&t instanceof Ds&&f._firestore===t._firestore&&$E(f.query,t.query)&&f.metadata.isEqual(t.metadata)&&f._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds._jsonSchemaVersion="firestore/querySnapshot/1.0",Ds._jsonSchema={type:xn("string",Ds._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};const sY={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(t,i){this._firestore=t,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=fu(t)}set(t,i,n){this._verifyNotCommitted();const v=nl(t,this._firestore),S=w0(v.converter,i,n),s=E0(this._dataReader,"WriteBatch.set",v._key,S,v.converter!==null,n);return this._mutations.push(s.toMutation(v._key,Hi.none())),this}update(t,i,n,...v){this._verifyNotCommitted();const S=nl(t,this._firestore);let s;return s=typeof(i=ui(i))=="string"||i instanceof cu?qE(this._dataReader,"WriteBatch.update",S._key,i,n,v):JE(this._dataReader,"WriteBatch.update",S._key,i),this._mutations.push(s.toMutation(S._key,Hi.exists(!0))),this}delete(t){this._verifyNotCommitted();const i=nl(t,this._firestore);return this._mutations=this._mutations.concat(new Rf(i._key,Hi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Gt(Rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nl(f,t){if((f=ui(f)).firestore!==t)throw new Gt(Rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=fu(t)}get(t){const i=nl(t,this._firestore),n=new aS(this._firestore);return this._transaction.lookup([i._key]).then((v=>{if(!v||v.length!==1)return ce(24041);const S=v[0];if(S.isFoundDocument())return new wp(this._firestore,n,S.key,S,i.converter);if(S.isNoDocument())return new wp(this._firestore,n,i._key,null,i.converter);throw ce(18433,{doc:S})}))}set(t,i,n){const v=nl(t,this._firestore),S=w0(v.converter,i,n),s=E0(this._dataReader,"Transaction.set",v._key,S,v.converter!==null,n);return this._transaction.set(v._key,s),this}update(t,i,n,...v){const S=nl(t,this._firestore);let s;return s=typeof(i=ui(i))=="string"||i instanceof cu?qE(this._dataReader,"Transaction.update",S._key,i,n,v):JE(this._dataReader,"Transaction.update",S._key,i),this._transaction.update(S._key,s),this}delete(t){const i=nl(t,this._firestore);return this._transaction.delete(i._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4 extends rY{constructor(t,i){super(t,i),this._firestore=t}get(t){const i=nl(t,this._firestore),n=new Ul(this._firestore);return super.get(t).then((v=>new Fs(this._firestore,n,i._key,v._document,new eo(!1,!1),i.converter)))}}function aY(f,t,i){f=$e(f,Ri);const n={...sY,...i};(function(s){if(s.maxAttempts<1)throw new Gt(Rt.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n);const v=Xi(f);return tk(v,(S=>t(new a4(f,S))),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(f){f=$e(f,wi);const t=$e(f.firestore,Ri),i=Xi(t);return b3(i,f._key).then((n=>oS(t,f,n)))}function oY(f){f=$e(f,wi);const t=$e(f.firestore,Ri),i=Xi(t),n=new Ul(t);return jX(i,f._key).then((v=>new Fs(t,n,f._key,v,new eo(v!==null&&v.hasLocalMutations,!0),f.converter)))}function lY(f){f=$e(f,wi);const t=$e(f.firestore,Ri),i=Xi(t);return b3(i,f._key,{source:"server"}).then((n=>oS(t,f,n)))}function o4(f){f=$e(f,Pn);const t=$e(f.firestore,Ri),i=Xi(t),n=new Ul(t);return K3(f._query),I3(i,f._query).then((v=>new Ds(t,n,f,v)))}function hY(f){f=$e(f,Pn);const t=$e(f.firestore,Ri),i=Xi(t),n=new Ul(t);return QX(i,f._query).then((v=>new Ds(t,n,f,v)))}function uY(f){f=$e(f,Pn);const t=$e(f.firestore,Ri),i=Xi(t),n=new Ul(t);return I3(i,f._query,{source:"server"}).then((v=>new Ds(t,n,f,v)))}function rv(f,t,i){f=$e(f,wi);const n=$e(f.firestore,Ri),v=w0(f.converter,t,i),S=fu(n);return Bf(n,[E0(S,"setDoc",f._key,v,f.converter!==null,i).toMutation(f._key,Hi.none())])}function cY(f,t,i,...n){f=$e(f,wi);const v=$e(f.firestore,Ri),S=fu(v);let s;return s=typeof(t=ui(t))=="string"||t instanceof cu?qE(S,"updateDoc",f._key,t,i,n):JE(S,"updateDoc",f._key,t),Bf(v,[s.toMutation(f._key,Hi.exists(!0))])}function fY(f){return Bf($e(f.firestore,Ri),[new Rf(f._key,Hi.none())])}function dY(f,t){const i=$e(f.firestore,Ri),n=Df(f),v=w0(f.converter,t),S=fu(f.firestore);return Bf(i,[E0(S,"addDoc",n._key,v,f.converter!==null,{}).toMutation(n._key,Hi.exists(!1))]).then((()=>n))}function Ap(f,...t){var a,m,c;f=ui(f);let i={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||gc(t[n])||(i=t[n++]);const v={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gc(t[n])){const o=t[n];t[n]=(a=o.next)==null?void 0:a.bind(o),t[n+1]=(m=o.error)==null?void 0:m.bind(o),t[n+2]=(c=o.complete)==null?void 0:c.bind(o)}let S,s,T;if(f instanceof wi)s=$e(f.firestore,Ri),T=Cf(f._key.path),S={next:o=>{t[n]&&t[n](oS(s,f,o))},error:t[n+1],complete:t[n+2]};else{const o=$e(f,Pn);s=$e(o.firestore,Ri),T=o._query;const u=new Ul(s);S={next:r=>{t[n]&&t[n](new Ds(s,u,o,r))},error:t[n+1],complete:t[n+2]},K3(f._query)}const e=Xi(s);return KX(e,T,v,S)}function pY(f,t,...i){const n=ui(f),v=(function(e){const a={bundle:"",bundleName:"",bundleSource:""},m=["bundle","bundleName","bundleSource"];for(const c of m){if(!(c in e)){a.error=`snapshotJson missing required field: ${c}`;break}const o=e[c];if(typeof o!="string"){a.error=`snapshotJson field '${c}' must be a string.`;break}if(o.length===0){a.error=`snapshotJson field '${c}' cannot be an empty string.`;break}c==="bundle"?a.bundle=o:c==="bundleName"?a.bundleName=o:c==="bundleSource"&&(a.bundleSource=o)}return a})(t);if(v.error)throw new Gt(Rt.INVALID_ARGUMENT,v.error);let S,s=0;if(typeof i[s]!="object"||gc(i[s])||(S=i[s++]),v.bundleSource==="QuerySnapshot"){let T=null;if(typeof i[s]=="object"&&gc(i[s])){const e=i[s++];T={next:e.next,error:e.error,complete:e.complete}}else T={next:i[s++],error:i[s++],complete:i[s++]};return(function(a,m,c,o,u){let r,h=!1;return Z1(a,m.bundle).then((()=>z3(a,m.bundleName))).then((l=>{l&&!h&&(u&&l.withConverter(u),r=Ap(l,c||{},o))})).catch((l=>(o.error&&o.error(l),()=>{}))),()=>{h||(h=!0,r&&r())}})(n,v,S,T,i[s])}if(v.bundleSource==="DocumentSnapshot"){let T=null;if(typeof i[s]=="object"&&gc(i[s])){const e=i[s++];T={next:e.next,error:e.error,complete:e.complete}}else T={next:i[s++],error:i[s++],complete:i[s++]};return(function(a,m,c,o,u){let r,h=!1;return Z1(a,m.bundle).then((()=>{if(!h){const l=new wi(a,u||null,qt.fromPath(m.bundleName));r=Ap(l,c||{},o)}})).catch((l=>(o.error&&o.error(l),()=>{}))),()=>{h||(h=!0,r&&r())}})(n,v,S,T,i[s])}throw new Gt(Rt.INVALID_ARGUMENT,`unsupported bundle source: ${v.bundleSource}`)}function vY(f,t){f=$e(f,Ri);const i=Xi(f),n=gc(t)?t:{next:t};return qX(i,n)}function Bf(f,t){const i=Xi(f);return JX(i,t)}function oS(f,t,i){const n=i.docs.get(t._key),v=new Ul(f);return new Fs(f,v,t._key,n,new eo(i.hasPendingWrites,i.fromCache),t.converter)}function mY(f){return f=$e(f,Ri),Xi(f),new r4(f,(t=>Bf(f,t)))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gY(f,t){f=$e(f,Ri);const i=Xi(f);if(!i._uninitializedComponentsProvider||i._uninitializedComponentsProvider._offline.kind==="memory")return Ns("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=(function(S){const s=typeof S=="string"?(function(a){try{return JSON.parse(a)}catch(m){throw new Gt(Rt.INVALID_ARGUMENT,"Failed to parse JSON: "+(m==null?void 0:m.message))}})(S):S,T=[];if(Array.isArray(s.indexes))for(const e of s.indexes){const a=MC(e,"collectionGroup"),m=[];if(Array.isArray(e.fields))for(const c of e.fields){const o=MC(c,"fieldPath"),u=eS("setIndexConfiguration",o);c.arrayConfig==="CONTAINS"?m.push(new Vh(u,2)):c.order==="ASCENDING"?m.push(new Vh(u,0)):c.order==="DESCENDING"&&m.push(new Vh(u,1))}T.push(new Qc(Qc.UNKNOWN_ID,a,m,Zc.empty()))}return T})(t);return nk(i,n)}function MC(f,t){if(typeof f[t]!="string")throw new Gt(Rt.INVALID_ARGUMENT,"Missing string value for: "+t);return f[t]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(t){this._firestore=t,this.type="PersistentCacheIndexManager"}}function xY(f){var v;f=$e(f,Ri);const t=RC.get(f);if(t)return t;if(((v=Xi(f)._uninitializedComponentsProvider)==null?void 0:v._offline.kind)!=="persistent")return null;const n=new l4(f);return RC.set(f,n),n}function yY(f){h4(f,!0)}function TY(f){h4(f,!1)}function EY(f){const t=Xi(f._firestore);rk(t).then((i=>Xt("deleting all persistent cache indexes succeeded"))).catch((i=>Ns("deleting all persistent cache indexes failed",i)))}function h4(f,t){const i=Xi(f._firestore);sk(i,t).then((n=>Xt(`setting persistent cache index auto creation isEnabled=${t} succeeded`))).catch((n=>Ns(`setting persistent cache index auto creation isEnabled=${t} failed`,n)))}const RC=new WeakMap;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(t){return lS.instance.onExistenceFilterMismatch(t)}}class lS{constructor(){this.i=new Map}static get instance(){return xm||(xm=new lS,QW(xm)),xm}u(t){this.i.forEach((i=>i(t)))}onExistenceFilterMismatch(t){const i=Symbol(),n=this.i;return n.set(i,t),()=>n.delete(i)}}let xm=null;(function(t,i=!0){b_(wf),Ra(new Hr("firestore",((n,{instanceIdentifier:v,options:S})=>{const s=n.getProvider("app").getImmediate(),T=new Ri(new D_(n.getProvider("auth-internal")),new B_(s,n.getProvider("app-check-internal")),wW(s,v),s);return S={useFetchStreams:i,...S},T._setSettings(S),T}),"PUBLIC").setMultipleInstances(!0)),gr(SC,wC,t),gr(SC,wC,"esm2020")})();const wY=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:iS,AggregateField:vf,AggregateQuerySnapshot:$3,Bytes:Ss,CACHE_SIZE_UNLIMITED:uk,CollectionReference:_r,DocumentReference:wi,DocumentSnapshot:Fs,FieldPath:cu,FieldValue:Bl,Firestore:Ri,FirestoreError:Gt,GeoPoint:Wr,LoadBundleTask:N3,PersistentCacheIndexManager:l4,Query:Pn,QueryCompositeFilterConstraint:pu,QueryConstraint:Of,QueryDocumentSnapshot:Jd,QueryEndAtConstraint:sv,QueryFieldFilterConstraint:Nf,QueryLimitConstraint:iv,QueryOrderByConstraint:S0,QuerySnapshot:Ds,QueryStartAtConstraint:nv,SnapshotMetadata:eo,Timestamp:gi,Transaction:a4,VectorValue:Qs,WriteBatch:r4,_AutoId:qg,_ByteString:Qi,_DatabaseId:Sl,_DocumentKey:qt,_EmptyAppCheckTokenProvider:U_,_EmptyAuthCredentialsProvider:mb,_FieldPath:Bi,_TestingHooks:SY,_cast:$e,_debugAssert:L_,_internalAggregationQueryToProtoRunAggregationQueryRequest:Ik,_internalQueryToProtoQueryTarget:bk,_isBase64Available:TW,_logWarn:Ns,_validateIsNotUsedTogether:xb,addDoc:dY,aggregateFieldEqual:Wk,aggregateQuerySnapshotEqual:Hk,and:Ok,arrayRemove:Mk,arrayUnion:Ck,average:_k,clearIndexedDbPersistence:pk,collection:YE,collectionGroup:lk,connectFirestoreEmulator:O3,count:q3,deleteAllPersistentCacheIndexes:EY,deleteDoc:fY,deleteField:Ak,disableNetwork:gk,disablePersistentCacheIndexAutoCreation:TY,doc:Df,documentId:yk,documentSnapshotFromJSON:tY,enableIndexedDbPersistence:fk,enableMultiTabIndexedDbPersistence:dk,enableNetwork:mk,enablePersistentCacheIndexAutoCreation:yY,endAt:zk,endBefore:Vk,ensureFirestoreConfigured:Xi,executeWrite:Bf,getAggregateFromServer:t4,getCountFromServer:Xk,getDoc:A0,getDocFromCache:oY,getDocFromServer:lY,getDocs:o4,getDocsFromCache:hY,getDocsFromServer:uY,getFirestore:ck,getPersistentCacheIndexManager:xY,increment:Rk,initializeFirestore:B3,limit:j3,limitToLast:Nk,loadBundle:Z1,memoryEagerGarbageCollector:jk,memoryLocalCache:Zk,memoryLruGarbageCollector:Qk,namedQuery:z3,onSnapshot:Ap,onSnapshotResume:pY,onSnapshotsInSync:vY,or:Dk,orderBy:rS,persistentLocalCache:e4,persistentMultipleTabManager:n4,persistentSingleTabManager:i4,query:sS,queryEqual:$E,querySnapshotFromJSON:eY,refEqual:hk,runTransaction:aY,serverTimestamp:ev,setDoc:rv,setIndexConfiguration:gY,setLogLevel:I_,snapshotEqual:nY,startAfter:Uk,startAt:Bk,sum:Gk,terminate:xk,updateDoc:cY,vector:Pk,waitForPendingWrites:vk,where:Fk,writeBatch:mY},Symbol.toStringTag,{value:"Module"}));function u4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AY=u4,c4=new lu("auth","Firebase",u4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=new Jg("@firebase/auth");function CY(f,...t){Pg.logLevel<=ei.WARN&&Pg.warn(`Auth (${wf}): ${f}`,...t)}function Xm(f,...t){Pg.logLevel<=ei.ERROR&&Pg.error(`Auth (${wf}): ${f}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(f,...t){throw hS(f,...t)}function wa(f,...t){return hS(f,...t)}function f4(f,t,i){const n={...AY(),[t]:i};return new lu("auth","Firebase",n).create(t,{appName:f.name})}function lo(f){return f4(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hS(f,...t){if(typeof f!="string"){const i=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=f.name),f._errorFactory.create(i,...n)}return c4.create(f,...t)}function Fe(f,t,...i){if(!f)throw hS(t,...i)}function io(f){const t="INTERNAL ASSERTION FAILED: "+f;throw Xm(t),new Error(t)}function xo(f,t){f||io(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(){var f;return typeof self<"u"&&((f=self.location)==null?void 0:f.href)||""}function MY(){return PC()==="http:"||PC()==="https:"}function PC(){var f;return typeof self<"u"&&((f=self.location)==null?void 0:f.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MY()||JP()||"connection"in navigator)?navigator.onLine:!0}function PY(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t,i){this.shortDelay=t,this.longDelay=i,xo(i>t,"Short delay should be less than long delay!"),this.isMobile=nG()||rG()}get(){return RY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(f,t){xo(f.emulator,"Emulator should always be set here");const{url:i}=f.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{static initialize(t,i,n){this.fetchImpl=t,i&&(this.headersImpl=i),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;io("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;io("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;io("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IY=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LY=new av(3e4,6e4);function Vl(f,t){return f.tenantId&&!t.tenantId?{...t,tenantId:f.tenantId}:t}async function Mo(f,t,i,n,v={}){return p4(f,v,async()=>{let S={},s={};n&&(t==="GET"?s=n:S={body:JSON.stringify(n)});const T=Hp({key:f.config.apiKey,...s}).slice(1),e=await f._getAdditionalHeaders();e["Content-Type"]="application/json",f.languageCode&&(e["X-Firebase-Locale"]=f.languageCode);const a={method:t,headers:e,...S};return sG()||(a.referrerPolicy="no-referrer"),f.emulatorConfig&&ou(f.emulatorConfig.host)&&(a.credentials="include"),d4.fetch()(await v4(f,f.config.apiHost,i,T),a)})}async function p4(f,t,i){f._canInitEmulator=!1;const n={...bY,...t};try{const v=new DY(f),S=await Promise.race([i(),v.promise]);v.clearNetworkTimeout();const s=await S.json();if("needConfirmation"in s)throw ym(f,"account-exists-with-different-credential",s);if(S.ok&&!("errorMessage"in s))return s;{const T=S.ok?s.errorMessage:s.error.message,[e,a]=T.split(" : ");if(e==="FEDERATED_USER_ID_ALREADY_LINKED")throw ym(f,"credential-already-in-use",s);if(e==="EMAIL_EXISTS")throw ym(f,"email-already-in-use",s);if(e==="USER_DISABLED")throw ym(f,"user-disabled",s);const m=n[e]||e.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw f4(f,m,a);Xr(f,m)}}catch(v){if(v instanceof $r)throw v;Xr(f,"network-request-failed",{message:String(v)})}}async function ov(f,t,i,n,v={}){const S=await Mo(f,t,i,n,v);return"mfaPendingCredential"in S&&Xr(f,"multi-factor-auth-required",{_serverResponse:S}),S}async function v4(f,t,i,n){const v=`${t}${i}?${n}`,S=f,s=S.config.emulator?uS(f.config,v):`${f.config.apiScheme}://${v}`;return IY.includes(i)&&(await S._persistenceManagerAvailable,S._getPersistenceType()==="COOKIE")?S._getPersistence()._getFinalTarget(s).toString():s}function FY(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DY{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,n)=>{this.timer=setTimeout(()=>n(wa(this.auth,"network-request-failed")),LY.get())})}}function ym(f,t,i){const n={appName:f.name};i.email&&(n.email=i.email),i.phoneNumber&&(n.phoneNumber=i.phoneNumber);const v=wa(f,t,n);return v.customData._tokenResponse=i,v}function bC(f){return f!==void 0&&f.enterprise!==void 0}class OY{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return FY(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NY(f,t){return Mo(f,"GET","/v2/recaptchaConfig",Vl(f,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BY(f,t){return Mo(f,"POST","/v1/accounts:delete",t)}async function bg(f,t){return Mo(f,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(f){if(f)try{const t=new Date(Number(f));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function UY(f,t=!1){const i=ui(f),n=await i.getIdToken(t),v=cS(n);Fe(v&&v.exp&&v.auth_time&&v.iat,i.auth,"internal-error");const S=typeof v.firebase=="object"?v.firebase:void 0,s=S==null?void 0:S.sign_in_provider;return{claims:v,token:n,authTime:qd(kx(v.auth_time)),issuedAtTime:qd(kx(v.iat)),expirationTime:qd(kx(v.exp)),signInProvider:s||null,signInSecondFactor:(S==null?void 0:S.sign_in_second_factor)||null}}function kx(f){return Number(f)*1e3}function cS(f){const[t,i,n]=f.split(".");if(t===void 0||i===void 0||n===void 0)return Xm("JWT malformed, contained fewer than 3 sections"),null;try{const v=kP(i);return v?JSON.parse(v):(Xm("Failed to decode base64 JWT payload"),null)}catch(v){return Xm("Caught error parsing JWT payload as JSON",v==null?void 0:v.toString()),null}}function IC(f){const t=cS(f);return Fe(t,"internal-error"),Fe(typeof t.exp<"u","internal-error"),Fe(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mf(f,t,i=!1){if(i)return t;try{return await t}catch(n){throw n instanceof $r&&VY(n)&&f.auth.currentUser===f&&await f.auth.signOut(),n}}function VY({code:f}){return f==="auth/user-disabled"||f==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=qd(this.lastLoginAt),this.creationTime=qd(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ig(f){var c;const t=f.auth,i=await f.getIdToken(),n=await mf(f,bg(t,{idToken:i}));Fe(n==null?void 0:n.users.length,t,"internal-error");const v=n.users[0];f._notifyReloadListener(v);const S=(c=v.providerUserInfo)!=null&&c.length?m4(v.providerUserInfo):[],s=_Y(f.providerData,S),T=f.isAnonymous,e=!(f.email&&v.passwordHash)&&!(s!=null&&s.length),a=T?e:!1,m={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:s,metadata:new q1(v.createdAt,v.lastLoginAt),isAnonymous:a};Object.assign(f,m)}async function GY(f){const t=ui(f);await Ig(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function _Y(f,t){return[...f.filter(n=>!t.some(v=>v.providerId===n.providerId)),...t]}function m4(f){return f.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WY(f,t){const i=await p4(f,{},async()=>{const n=Hp({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:v,apiKey:S}=f.config,s=await v4(f,v,"/v1/token",`key=${S}`),T=await f._getAdditionalHeaders();T["Content-Type"]="application/x-www-form-urlencoded";const e={method:"POST",headers:T,body:n};return f.emulatorConfig&&ou(f.emulatorConfig.host)&&(e.credentials="include"),d4.fetch()(s,e)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function HY(f,t){return Mo(f,"POST","/v2/accounts:revokeToken",Vl(f,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Fe(t.idToken,"internal-error"),Fe(typeof t.idToken<"u","internal-error"),Fe(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):IC(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Fe(t.length!==0,"internal-error");const i=IC(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:n,refreshToken:v,expiresIn:S}=await WY(t,i);this.updateTokensAndExpiration(n,v,Number(S))}updateTokensAndExpiration(t,i,n){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,i){const{refreshToken:n,accessToken:v,expirationTime:S}=i,s=new xc;return n&&(Fe(typeof n=="string","internal-error",{appName:t}),s.refreshToken=n),v&&(Fe(typeof v=="string","internal-error",{appName:t}),s.accessToken=v),S&&(Fe(typeof S=="number","internal-error",{appName:t}),s.expirationTime=S),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new xc,this.toJSON())}_performRefresh(){return io("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(f,t){Fe(typeof f=="string"||typeof f>"u","internal-error",{appName:t})}class zr{constructor({uid:t,auth:i,stsTokenManager:n,...v}){this.providerId="firebase",this.proactiveRefresh=new zY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new q1(v.createdAt||void 0,v.lastLoginAt||void 0)}async getIdToken(t){const i=await mf(this,this.stsTokenManager.getToken(this.auth,t));return Fe(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return UY(this,t)}reload(){return GY(this)}_assign(t){this!==t&&(Fe(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new zr({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),i&&await Ig(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(lo(this.auth));const t=await this.getIdToken();return await mf(this,BY(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const n=i.displayName??void 0,v=i.email??void 0,S=i.phoneNumber??void 0,s=i.photoURL??void 0,T=i.tenantId??void 0,e=i._redirectEventId??void 0,a=i.createdAt??void 0,m=i.lastLoginAt??void 0,{uid:c,emailVerified:o,isAnonymous:u,providerData:r,stsTokenManager:h}=i;Fe(c&&h,t,"internal-error");const d=xc.fromJSON(this.name,h);Fe(typeof c=="string",t,"internal-error"),Ho(n,t.name),Ho(v,t.name),Fe(typeof o=="boolean",t,"internal-error"),Fe(typeof u=="boolean",t,"internal-error"),Ho(S,t.name),Ho(s,t.name),Ho(T,t.name),Ho(e,t.name),Ho(a,t.name),Ho(m,t.name);const l=new zr({uid:c,auth:t,email:v,emailVerified:o,displayName:n,isAnonymous:u,photoURL:s,phoneNumber:S,tenantId:T,stsTokenManager:d,createdAt:a,lastLoginAt:m});return r&&Array.isArray(r)&&(l.providerData=r.map(p=>({...p}))),e&&(l._redirectEventId=e),l}static async _fromIdTokenResponse(t,i,n=!1){const v=new xc;v.updateFromServerResponse(i);const S=new zr({uid:i.localId,auth:t,stsTokenManager:v,isAnonymous:n});return await Ig(S),S}static async _fromGetAccountInfoResponse(t,i,n){const v=i.users[0];Fe(v.localId!==void 0,"internal-error");const S=v.providerUserInfo!==void 0?m4(v.providerUserInfo):[],s=!(v.email&&v.passwordHash)&&!(S!=null&&S.length),T=new xc;T.updateFromIdToken(n);const e=new zr({uid:v.localId,auth:t,stsTokenManager:T,isAnonymous:s}),a={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:S,metadata:new q1(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash)&&!(S!=null&&S.length)};return Object.assign(e,a),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Map;function no(f){xo(f instanceof Function,"Expected a class definition");let t=LC.get(f);return t?(xo(t instanceof f,"Instance stored in cache mismatched with class"),t):(t=new f,LC.set(f,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}g4.type="NONE";const FC=g4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(f,t,i){return`firebase:${f}:${t}:${i}`}class yc{constructor(t,i,n){this.persistence=t,this.auth=i,this.userKey=n;const{config:v,name:S}=this.auth;this.fullUserKey=km(this.userKey,v.apiKey,S),this.fullPersistenceKey=km("persistence",v.apiKey,S),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await bg(this.auth,{idToken:t}).catch(()=>{});return i?zr._fromGetAccountInfoResponse(this.auth,i,t):null}return zr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,n="authUser"){if(!i.length)return new yc(no(FC),t,n);const v=(await Promise.all(i.map(async a=>{if(await a._isAvailable())return a}))).filter(a=>a);let S=v[0]||no(FC);const s=km(n,t.config.apiKey,t.name);let T=null;for(const a of i)try{const m=await a._get(s);if(m){let c;if(typeof m=="string"){const o=await bg(t,{idToken:m}).catch(()=>{});if(!o)break;c=await zr._fromGetAccountInfoResponse(t,o,m)}else c=zr._fromJSON(t,m);a!==S&&(T=c),S=a;break}}catch{}const e=v.filter(a=>a._shouldAllowMigration);return!S._shouldAllowMigration||!e.length?new yc(S,t,n):(S=e[0],T&&await S._set(s,T.toJSON()),await Promise.all(i.map(async a=>{if(a!==S)try{await a._remove(s)}catch{}})),new yc(S,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(f){const t=f.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(E4(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(x4(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(w4(t))return"Blackberry";if(A4(t))return"Webos";if(y4(t))return"Safari";if((t.includes("chrome/")||T4(t))&&!t.includes("edge/"))return"Chrome";if(S4(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=f.match(i);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function x4(f=Rn()){return/firefox\//i.test(f)}function y4(f=Rn()){const t=f.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function T4(f=Rn()){return/crios\//i.test(f)}function E4(f=Rn()){return/iemobile/i.test(f)}function S4(f=Rn()){return/android/i.test(f)}function w4(f=Rn()){return/blackberry/i.test(f)}function A4(f=Rn()){return/webos/i.test(f)}function fS(f=Rn()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function XY(f=Rn()){var t;return fS(f)&&!!((t=window.navigator)!=null&&t.standalone)}function kY(){return aG()&&document.documentMode===10}function C4(f=Rn()){return fS(f)||S4(f)||A4(f)||w4(f)||/windows phone/i.test(f)||E4(f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(f,t=[]){let i;switch(f){case"Browser":i=DC(Rn());break;case"Worker":i=`${DC(Rn())}-${f}`;break;default:i=f}const n=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${wf}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YY{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const n=S=>new Promise((s,T)=>{try{const e=t(S);s(e)}catch(e){T(e)}});n.onAbort=i,this.queue.push(n);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const n of this.queue)await n(t),n.onAbort&&i.push(n.onAbort)}catch(n){i.reverse();for(const v of i)try{v()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Y(f,t={}){return Mo(f,"GET","/v2/passwordPolicy",Vl(f,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY=6;class jY{constructor(t){var n;const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??KY,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const n=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;n&&(i.meetsMinPasswordLength=t.length>=n),v&&(i.meetsMaxPasswordLength=t.length<=v)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let n;for(let v=0;v<t.length;v++)n=t.charAt(v),this.updatePasswordCharacterOptionsStatuses(i,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,i,n,v,S){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QY{constructor(t,i,n,v){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=n,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OC(this),this.idTokenSubscription=new OC(this),this.beforeStateQueue=new YY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=v.sdkClientVersion,this._persistenceManagerAvailable=new Promise(S=>this._resolvePersistenceManagerAvailable=S)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=no(i)),this._initializationPromise=this.queue(async()=>{var n,v,S;if(!this._deleted&&(this.persistenceManager=await yc.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((v=this._popupRedirectResolver)!=null&&v._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((S=this.currentUser)==null?void 0:S.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await bg(this,{idToken:t}),n=await zr._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(n)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var S;if(fr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(T=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(T,T))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let n=i,v=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(S=this.redirectUser)==null?void 0:S._redirectEventId,T=n==null?void 0:n._redirectEventId,e=await this.tryRedirectSignIn(t);(!s||s===T)&&(e!=null&&e.user)&&(n=e.user,v=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(v)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Ig(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=PY()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(fr(this.app))return Promise.reject(lo(this));const i=t?ui(t):null;return i&&Fe(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Fe(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(lo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return fr(this.app)?Promise.reject(lo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(no(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await $Y(this),i=new jY(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new lu("auth","Firebase",t())}onAuthStateChanged(t,i,n){return this.registerStateListener(this.authStateSubscription,t,i,n)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,n){return this.registerStateListener(this.idTokenSubscription,t,i,n)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(n.tenantId=this.tenantId),await HY(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,i){const n=await this.getOrInitRedirectPersistenceManager(i);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&no(t)||this._popupRedirectResolver;Fe(i,this,"argument-error"),this.redirectPersistenceManager=await yc.create(this,[no(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,n;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)==null?void 0:i._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((i=this.currentUser)==null?void 0:i.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,n,v){if(this._deleted)return()=>{};const S=typeof i=="function"?i:i.next.bind(i);let s=!1;const T=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(T,this,"internal-error"),T.then(()=>{s||S(this.currentUser)}),typeof i=="function"){const e=t.addObserver(i,n,v);return()=>{s=!0,e()}}else{const e=t.addObserver(i);return()=>{s=!0,e()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=M4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var v;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((v=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:v.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var i;if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((i=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getToken());return t!=null&&t.error&&CY(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function vu(f){return ui(f)}class OC{constructor(t){this.auth=t,this.observer=null,this.addObserver=fG(i=>this.observer=i)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZY(f){C0=f}function R4(f){return C0.loadJS(f)}function JY(){return C0.recaptchaEnterpriseScript}function qY(){return C0.gapiScript}function t$(f){return`__${f}${Math.floor(Math.random()*1e6)}`}class e${constructor(){this.enterprise=new i$}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class i${ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const n$="recaptcha-enterprise",P4="NO_RECAPTCHA";class s${constructor(t){this.type=n$,this.auth=vu(t)}async verify(t="verify",i=!1){async function n(S){if(!i){if(S.tenantId==null&&S._agentRecaptchaConfig!=null)return S._agentRecaptchaConfig.siteKey;if(S.tenantId!=null&&S._tenantRecaptchaConfigs[S.tenantId]!==void 0)return S._tenantRecaptchaConfigs[S.tenantId].siteKey}return new Promise(async(s,T)=>{NY(S,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(e=>{if(e.recaptchaKey===void 0)T(new Error("recaptcha Enterprise site key undefined"));else{const a=new OY(e);return S.tenantId==null?S._agentRecaptchaConfig=a:S._tenantRecaptchaConfigs[S.tenantId]=a,s(a.siteKey)}}).catch(e=>{T(e)})})}function v(S,s,T){const e=window.grecaptcha;bC(e)?e.enterprise.ready(()=>{e.enterprise.execute(S,{action:t}).then(a=>{s(a)}).catch(()=>{s(P4)})}):T(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e$().execute("siteKey",{action:"verify"}):new Promise((S,s)=>{n(this.auth).then(T=>{if(!i&&bC(window.grecaptcha))v(T,S,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let e=JY();e.length!==0&&(e+=T),R4(e).then(()=>{v(T,S,s)}).catch(a=>{s(a)})}}).catch(T=>{s(T)})})}}async function NC(f,t,i,n=!1,v=!1){const S=new s$(f);let s;if(v)s=P4;else try{s=await S.verify(i)}catch{s=await S.verify(i,!0)}const T={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in T){const e=T.phoneEnrollmentInfo.phoneNumber,a=T.phoneEnrollmentInfo.recaptchaToken;Object.assign(T,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:a,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in T){const e=T.phoneSignInInfo.recaptchaToken;Object.assign(T,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return T}return n?Object.assign(T,{captchaResp:s}):Object.assign(T,{captchaResponse:s}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T}async function tT(f,t,i,n,v){var S;if((S=f._getRecaptchaConfig())!=null&&S.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await NC(f,t,i,i==="getOobCode");return n(f,s)}else return n(f,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const T=await NC(f,t,i,i==="getOobCode");return n(f,T)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$(f,t){const i=Eo(f,"auth");if(i.isInitialized()){const v=i.getImmediate(),S=i.getOptions();if(Er(S,t??{}))return v;Xr(v,"already-initialized")}return i.initialize({options:t})}function a$(f,t){const i=(t==null?void 0:t.persistence)||[],n=(Array.isArray(i)?i:[i]).map(no);t!=null&&t.errorMap&&f._updateErrorMap(t.errorMap),f._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function o$(f,t,i){const n=vu(f);Fe(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const v=!1,S=b4(t),{host:s,port:T}=l$(t),e=T===null?"":`:${T}`,a={url:`${S}//${s}${e}/`},m=Object.freeze({host:s,port:T,protocol:S.replace(":",""),options:Object.freeze({disableWarnings:v})});if(!n._canInitEmulator){Fe(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Fe(Er(a,n.config.emulator)&&Er(m,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=a,n.emulatorConfig=m,n.settings.appVerificationDisabledForTesting=!0,ou(s)?(KT(`${S}//${s}${e}`),QP("Auth",!0)):h$()}function b4(f){const t=f.indexOf(":");return t<0?"":f.substr(0,t+1)}function l$(f){const t=b4(f),i=/(\/\/)?([^?#/]+)/.exec(f.substr(t.length));if(!i)return{host:"",port:null};const n=i[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(n);if(v){const S=v[1];return{host:S,port:BC(n.substr(S.length+1))}}else{const[S,s]=n.split(":");return{host:S,port:BC(s)}}}function BC(f){if(!f)return null;const t=Number(f);return isNaN(t)?null:t}function h$(){function f(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return io("not implemented")}_getIdTokenResponse(t){return io("not implemented")}_linkToIdToken(t,i){return io("not implemented")}_getReauthenticationResolver(t){return io("not implemented")}}async function u$(f,t){return Mo(f,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c$(f,t){return ov(f,"POST","/v1/accounts:signInWithPassword",Vl(f,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f$(f,t){return ov(f,"POST","/v1/accounts:signInWithEmailLink",Vl(f,t))}async function d$(f,t){return ov(f,"POST","/v1/accounts:signInWithEmailLink",Vl(f,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends dS{constructor(t,i,n,v=null){super("password",n),this._email=t,this._password=i,this._tenantId=v}static _fromEmailAndPassword(t,i){return new Cp(t,i,"password")}static _fromEmailAndCode(t,i,n=null){return new Cp(t,i,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tT(t,i,"signInWithPassword",c$);case"emailLink":return f$(t,{email:this._email,oobCode:this._password});default:Xr(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const n={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tT(t,n,"signUpPassword",u$);case"emailLink":return d$(t,{idToken:i,email:this._email,oobCode:this._password});default:Xr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(f,t){return ov(f,"POST","/v1/accounts:signInWithIdp",Vl(f,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$="http://localhost";class tu extends dS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new tu(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Xr("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:v,...S}=i;if(!n||!v)return null;const s=new tu(n,v);return s.idToken=S.idToken||void 0,s.accessToken=S.accessToken||void 0,s.secret=S.secret,s.nonce=S.nonce,s.pendingToken=S.pendingToken||null,s}_getIdTokenResponse(t){const i=this.buildRequest();return Tc(t,i)}_linkToIdToken(t,i){const n=this.buildRequest();return n.idToken=i,Tc(t,n)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Tc(t,i)}buildRequest(){const t={requestUri:p$,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Hp(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m$(f){const t=bd(Id(f)).link,i=t?bd(Id(t)).deep_link_id:null,n=bd(Id(f)).deep_link_id;return(n?bd(Id(n)).link:null)||n||i||t||f}class pS{constructor(t){const i=bd(Id(t)),n=i.apiKey??null,v=i.oobCode??null,S=v$(i.mode??null);Fe(n&&v&&S,"argument-error"),this.apiKey=n,this.operation=S,this.code=v,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=m$(t);try{return new pS(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this.providerId=Uf.PROVIDER_ID}static credential(t,i){return Cp._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const n=pS.parseLink(i);return Fe(n,"argument-error"),Cp._fromEmailAndCode(t,n.code,n.tenantId)}}Uf.PROVIDER_ID="password";Uf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv extends I4{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends lv{constructor(){super("facebook.com")}static credential(t){return tu._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return $o.credentialFromTaggedObject(t)}static credentialFromError(t){return $o.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return $o.credential(t.oauthAccessToken)}catch{return null}}}$o.FACEBOOK_SIGN_IN_METHOD="facebook.com";$o.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends lv{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return tu._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Ko.credentialFromTaggedObject(t)}static credentialFromError(t){return Ko.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:n}=t;if(!i&&!n)return null;try{return Ko.credential(i,n)}catch{return null}}}Ko.GOOGLE_SIGN_IN_METHOD="google.com";Ko.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends lv{constructor(){super("github.com")}static credential(t){return tu._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return jo.credentialFromTaggedObject(t)}static credentialFromError(t){return jo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return jo.credential(t.oauthAccessToken)}catch{return null}}}jo.GITHUB_SIGN_IN_METHOD="github.com";jo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends lv{constructor(){super("twitter.com")}static credential(t,i){return tu._fromParams({providerId:Qo.PROVIDER_ID,signInMethod:Qo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Qo.credentialFromTaggedObject(t)}static credentialFromError(t){return Qo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:n}=t;if(!i||!n)return null;try{return Qo.credential(i,n)}catch{return null}}}Qo.TWITTER_SIGN_IN_METHOD="twitter.com";Qo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g$(f,t){return ov(f,"POST","/v1/accounts:signUp",Vl(f,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,n,v=!1){const S=await zr._fromIdTokenResponse(t,n,v),s=UC(n);return new eu({user:S,providerId:s,_tokenResponse:n,operationType:i})}static async _forOperation(t,i,n){await t._updateTokensIfNecessary(n,!0);const v=UC(n);return new eu({user:t,providerId:v,_tokenResponse:n,operationType:i})}}function UC(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends $r{constructor(t,i,n,v){super(i.code,i.message),this.operationType=n,this.user=v,Object.setPrototypeOf(this,Lg.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,i,n,v){return new Lg(t,i,n,v)}}function L4(f,t,i,n){return(t==="reauthenticate"?i._getReauthenticationResolver(f):i._getIdTokenResponse(f)).catch(S=>{throw S.code==="auth/multi-factor-auth-required"?Lg._fromErrorAndOperation(f,S,t,n):S})}async function x$(f,t,i=!1){const n=await mf(f,t._linkToIdToken(f.auth,await f.getIdToken()),i);return eu._forOperation(f,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y$(f,t,i=!1){const{auth:n}=f;if(fr(n.app))return Promise.reject(lo(n));const v="reauthenticate";try{const S=await mf(f,L4(n,v,t,f),i);Fe(S.idToken,n,"internal-error");const s=cS(S.idToken);Fe(s,n,"internal-error");const{sub:T}=s;return Fe(f.uid===T,n,"user-mismatch"),eu._forOperation(f,v,S)}catch(S){throw(S==null?void 0:S.code)==="auth/user-not-found"&&Xr(n,"user-mismatch"),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(f,t,i=!1){if(fr(f.app))return Promise.reject(lo(f));const n="signIn",v=await L4(f,n,t),S=await eu._fromIdTokenResponse(f,n,v);return i||await f._updateCurrentUser(S.user),S}async function T$(f,t){return F4(vu(f),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(f){const t=vu(f);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function E$(f,t,i){if(fr(f.app))return Promise.reject(lo(f));const n=vu(f),s=await tT(n,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g$).catch(e=>{throw e.code==="auth/password-does-not-meet-requirements"&&D4(f),e}),T=await eu._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(T.user),T}function S$(f,t,i){return fr(f.app)?Promise.reject(lo(f)):T$(ui(f),Uf.credential(t,i)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&D4(f),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w$(f,t){return Mo(f,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A$(f,{displayName:t,photoURL:i}){if(t===void 0&&i===void 0)return;const n=ui(f),S={idToken:await n.getIdToken(),displayName:t,photoUrl:i,returnSecureToken:!0},s=await mf(n,w$(n.auth,S));n.displayName=s.displayName||null,n.photoURL=s.photoUrl||null;const T=n.providerData.find(({providerId:e})=>e==="password");T&&(T.displayName=n.displayName,T.photoURL=n.photoURL),await n._updateTokensIfNecessary(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(f,t){return ui(f).setPersistence(t)}function M$(f,t,i,n){return ui(f).onIdTokenChanged(t,i,n)}function R$(f,t,i){return ui(f).beforeAuthStateChanged(t,i)}function P$(f,t,i,n){return ui(f).onAuthStateChanged(t,i,n)}function b$(f){return ui(f).signOut()}const Fg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Fg,"1"),this.storage.removeItem(Fg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$=1e3,L$=10;class N4 extends O4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=C4(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const n=this.storage.getItem(i),v=this.localCache[i];n!==v&&t(i,v,n)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((s,T,e)=>{this.notifyListeners(s,e)});return}const n=t.key;i?this.detachListener():this.stopPolling();const v=()=>{const s=this.storage.getItem(n);!i&&this.localCache[n]===s||this.notifyListeners(n,s)},S=this.storage.getItem(n);kY()&&S!==t.newValue&&t.newValue!==t.oldValue?setTimeout(v,L$):v()}notifyListeners(t,i){this.localCache[t]=i;const n=this.listeners[t];if(n)for(const v of Array.from(n))v(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:n}),!0)})},I$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}N4.type="LOCAL";const B4=N4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4 extends O4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}U4.type="SESSION";const V4=U4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F$(f){return Promise.all(f.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(v=>v.isListeningto(t));if(i)return i;const n=new M0(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:n,eventType:v,data:S}=i.data,s=this.handlersMap[v];if(!(s!=null&&s.size))return;i.ports[0].postMessage({status:"ack",eventId:n,eventType:v});const T=Array.from(s).map(async a=>a(i.origin,S)),e=await F$(T);i.ports[0].postMessage({status:"done",eventId:n,eventType:v,response:e})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}M0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(f="",t=10){let i="";for(let n=0;n<t;n++)i+=Math.floor(Math.random()*10);return f+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,n=50){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let S,s;return new Promise((T,e)=>{const a=vS("",20);v.port1.start();const m=setTimeout(()=>{e(new Error("unsupported_event"))},n);s={messageChannel:v,onMessage(c){const o=c;if(o.data.eventId===a)switch(o.data.status){case"ack":clearTimeout(m),S=setTimeout(()=>{e(new Error("timeout"))},3e3);break;case"done":clearTimeout(S),T(o.data.response);break;default:clearTimeout(m),clearTimeout(S),e(new Error("invalid_response"));break}}},this.handlers.add(s),v.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:a,data:i},[v.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(){return window}function O$(f){Aa().location.href=f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(){return typeof Aa().WorkerGlobalScope<"u"&&typeof Aa().importScripts=="function"}async function N$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function B$(){var f;return((f=navigator==null?void 0:navigator.serviceWorker)==null?void 0:f.controller)||null}function U$(){return z4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="firebaseLocalStorageDb",V$=1,Dg="firebaseLocalStorage",_4="fbase_key";class hv{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function R0(f,t){return f.transaction([Dg],t?"readwrite":"readonly").objectStore(Dg)}function z$(){const f=indexedDB.deleteDatabase(G4);return new hv(f).toPromise()}function eT(){const f=indexedDB.open(G4,V$);return new Promise((t,i)=>{f.addEventListener("error",()=>{i(f.error)}),f.addEventListener("upgradeneeded",()=>{const n=f.result;try{n.createObjectStore(Dg,{keyPath:_4})}catch(v){i(v)}}),f.addEventListener("success",async()=>{const n=f.result;n.objectStoreNames.contains(Dg)?t(n):(n.close(),await z$(),t(await eT()))})})}async function VC(f,t,i){const n=R0(f,!0).put({[_4]:t,value:i});return new hv(n).toPromise()}async function G$(f,t){const i=R0(f,!1).get(t),n=await new hv(i).toPromise();return n===void 0?null:n.value}function zC(f,t){const i=R0(f,!0).delete(t);return new hv(i).toPromise()}const _$=800,W$=3;class W4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eT(),this.db)}async _withRetries(t){let i=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(i++>W$)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=M0._getInstance(U$()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var i,n;if(this.activeServiceWorker=await N$(),!this.activeServiceWorker)return;this.sender=new D$(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(i=t[0])!=null&&i.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||B$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await eT();return await VC(t,Fg,"1"),await zC(t,Fg),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(n=>VC(n,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(n=>G$(n,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>zC(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(v=>{const S=R0(v,!1).getAll();return new hv(S).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],n=new Set;if(t.length!==0)for(const{fbase_key:v,value:S}of t)n.add(v),JSON.stringify(this.localCache[v])!==JSON.stringify(S)&&(this.notifyListeners(v,S),i.push(v));for(const v of Object.keys(this.localCache))this.localCache[v]&&!n.has(v)&&(this.notifyListeners(v,null),i.push(v));return i}notifyListeners(t,i){this.localCache[t]=i;const n=this.listeners[t];if(n)for(const v of Array.from(n))v(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}W4.type="LOCAL";const H$=W4;new av(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(f,t){return t?no(t):(Fe(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS extends dS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Tc(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Tc(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Tc(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function k$(f){return F4(f.auth,new mS(f),f.bypassAuthState)}function Y$(f){const{auth:t,user:i}=f;return Fe(i,t,"internal-error"),y$(i,new mS(f),f.bypassAuthState)}async function $$(f){const{auth:t,user:i}=f;return Fe(i,t,"internal-error"),x$(i,new mS(f),f.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(t,i,n,v,S=!1){this.auth=t,this.resolver=n,this.user=v,this.bypassAuthState=S,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:n,postBody:v,tenantId:S,error:s,type:T}=t;if(s){this.reject(s);return}const e={auth:this.auth,requestUri:i,sessionId:n,tenantId:S||void 0,postBody:v||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(T)(e))}catch(a){this.reject(a)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return k$;case"linkViaPopup":case"linkViaRedirect":return $$;case"reauthViaPopup":case"reauthViaRedirect":return Y$;default:Xr(this.auth,"internal-error")}}resolve(t){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$=new av(2e3,1e4);class lc extends H4{constructor(t,i,n,v,S){super(t,i,v,S),this.provider=n,this.authWindow=null,this.pollId=null,lc.currentPopupAction&&lc.currentPopupAction.cancel(),lc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Fe(t,this.auth,"internal-error"),t}async onExecution(){xo(this.filter.length===1,"Popup operations only handle one event");const t=vS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(wa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(wa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,n;if((n=(i=this.authWindow)==null?void 0:i.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,K$.get())};t()}}lc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$="pendingRedirect",Ym=new Map;class Q$ extends H4{constructor(t,i,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,n),this.eventId=null}async execute(){let t=Ym.get(this.auth._key());if(!t){try{const n=await Z$(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(i){t=()=>Promise.reject(i)}Ym.set(this.auth._key(),t)}return this.bypassAuthState||Ym.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z$(f,t){const i=tK(t),n=q$(f);if(!await n._isAvailable())return!1;const v=await n._get(i)==="true";return await n._remove(i),v}function J$(f,t){Ym.set(f._key(),t)}function q$(f){return no(f._redirectPersistence)}function tK(f){return km(j$,f.config.apiKey,f.name)}async function eK(f,t,i=!1){if(fr(f.app))return Promise.reject(lo(f));const n=vu(f),v=X$(n,t),s=await new Q$(n,v,i).execute();return s&&!i&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,t)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK=600*1e3;class nK{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(i=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!sK(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var n;if(t.error&&!X4(t)){const v=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";i.onError(wa(this.auth,v))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const n=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=iK&&this.cachedEventUids.clear(),this.cachedEventUids.has(GC(t))}saveEventToCache(t){this.cachedEventUids.add(GC(t)),this.lastProcessedEventTime=Date.now()}}function GC(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(t=>t).join("-")}function X4({type:f,error:t}){return f==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function sK(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return X4(f);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rK(f,t={}){return Mo(f,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oK=/^https?/;async function lK(f){if(f.config.emulator)return;const{authorizedDomains:t}=await rK(f);for(const i of t)try{if(hK(i))return}catch{}Xr(f,"unauthorized-domain")}function hK(f){const t=J1(),{protocol:i,hostname:n}=new URL(t);if(f.startsWith("chrome-extension://")){const s=new URL(f);return s.hostname===""&&n===""?i==="chrome-extension:"&&f.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&s.hostname===n}if(!oK.test(i))return!1;if(aK.test(f))return n===f;const v=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=new av(3e4,6e4);function _C(){const f=Aa().___jsl;if(f!=null&&f.H){for(const t of Object.keys(f.H))if(f.H[t].r=f.H[t].r||[],f.H[t].L=f.H[t].L||[],f.H[t].r=[...f.H[t].L],f.CP)for(let i=0;i<f.CP.length;i++)f.CP[i]=null}}function cK(f){return new Promise((t,i)=>{var v,S,s;function n(){_C(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_C(),i(wa(f,"network-request-failed"))},timeout:uK.get()})}if((S=(v=Aa().gapi)==null?void 0:v.iframes)!=null&&S.Iframe)t(gapi.iframes.getContext());else if((s=Aa().gapi)!=null&&s.load)n();else{const T=t$("iframefcb");return Aa()[T]=()=>{gapi.load?n():i(wa(f,"network-request-failed"))},R4(`${qY()}?onload=${T}`).catch(e=>i(e))}}).catch(t=>{throw $m=null,t})}let $m=null;function fK(f){return $m=$m||cK(f),$m}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dK=new av(5e3,15e3),pK="__/auth/iframe",vK="emulator/auth/iframe",mK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xK(f){const t=f.config;Fe(t.authDomain,f,"auth-domain-config-required");const i=t.emulator?uS(t,vK):`https://${f.config.authDomain}/${pK}`,n={apiKey:t.apiKey,appName:f.name,v:wf},v=gK.get(f.config.apiHost);v&&(n.eid=v);const S=f._getFrameworks();return S.length&&(n.fw=S.join(",")),`${i}?${Hp(n).slice(1)}`}async function yK(f){const t=await fK(f),i=Aa().gapi;return Fe(i,f,"internal-error"),t.open({where:document.body,url:xK(f),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mK,dontclear:!0},n=>new Promise(async(v,S)=>{await n.restyle({setHideOnLeave:!1});const s=wa(f,"network-request-failed"),T=Aa().setTimeout(()=>{S(s)},dK.get());function e(){Aa().clearTimeout(T),v(n)}n.ping(e).then(e,()=>{S(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EK=500,SK=600,wK="_blank",AK="http://localhost";class WC{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CK(f,t,i,n=EK,v=SK){const S=Math.max((window.screen.availHeight-v)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let T="";const e={...TK,width:n.toString(),height:v.toString(),top:S,left:s},a=Rn().toLowerCase();i&&(T=T4(a)?wK:i),x4(a)&&(t=t||AK,e.scrollbars="yes");const m=Object.entries(e).reduce((o,[u,r])=>`${o}${u}=${r},`,"");if(XY(a)&&T!=="_self")return MK(t||"",T),new WC(null);const c=window.open(t||"",T,m);Fe(c,f,"popup-blocked");try{c.focus()}catch{}return new WC(c)}function MK(f,t){const i=document.createElement("a");i.href=f,i.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK="__/auth/handler",PK="emulator/auth/handler",bK=encodeURIComponent("fac");async function HC(f,t,i,n,v,S){Fe(f.config.authDomain,f,"auth-domain-config-required"),Fe(f.config.apiKey,f,"invalid-api-key");const s={apiKey:f.config.apiKey,appName:f.name,authType:i,redirectUrl:n,v:wf,eventId:v};if(t instanceof I4){t.setDefaultLanguage(f.languageCode),s.providerId=t.providerId||"",cG(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,c]of Object.entries({}))s[m]=c}if(t instanceof lv){const m=t.getScopes().filter(c=>c!=="");m.length>0&&(s.scopes=m.join(","))}f.tenantId&&(s.tid=f.tenantId);const T=s;for(const m of Object.keys(T))T[m]===void 0&&delete T[m];const e=await f._getAppCheckToken(),a=e?`#${bK}=${encodeURIComponent(e)}`:"";return`${IK(f)}?${Hp(T).slice(1)}${a}`}function IK({config:f}){return f.emulator?uS(f,PK):`https://${f.authDomain}/${RK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="webStorageSupport";class LK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V4,this._completeRedirectFn=eK,this._overrideRedirectResult=J$}async _openPopup(t,i,n,v){var s;xo((s=this.eventManagers[t._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const S=await HC(t,i,n,J1(),v);return CK(t,S,vS())}async _openRedirect(t,i,n,v){await this._originValidation(t);const S=await HC(t,i,n,J1(),v);return O$(S),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:v,promise:S}=this.eventManagers[i];return v?Promise.resolve(v):(xo(S,"If manager is not set, promise should be"),S)}const n=this.initAndGetManager(t);return this.eventManagers[i]={promise:n},n.catch(()=>{delete this.eventManagers[i]}),n}async initAndGetManager(t){const i=await yK(t),n=new nK(t);return i.register("authEvent",v=>(Fe(v==null?void 0:v.authEvent,t,"invalid-auth-event"),{status:n.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=i,n}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Yx,{type:Yx},v=>{var s;const S=(s=v==null?void 0:v[0])==null?void 0:s[Yx];S!==void 0&&i(!!S),Xr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=lK(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return C4()||y4()||fS()}}const FK=LK;var XC="@firebase/auth",kC="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NK(f){Ra(new Hr("auth",(t,{options:i})=>{const n=t.getProvider("app").getImmediate(),v=t.getProvider("heartbeat"),S=t.getProvider("app-check-internal"),{apiKey:s,authDomain:T}=n.options;Fe(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const e={apiKey:s,authDomain:T,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M4(f)},a=new QY(n,v,S,e);return a$(a,i),a},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,n)=>{t.getProvider("auth-internal").initialize()})),Ra(new Hr("auth-internal",t=>{const i=vu(t.getProvider("auth").getImmediate());return(n=>new DK(n))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(XC,kC,OK(f)),gr(XC,kC,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BK=300,UK=jP("authIdTokenMaxAge")||BK;let YC=null;const VK=f=>async t=>{const i=t&&await t.getIdTokenResult(),n=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(n&&n>UK)return;const v=i==null?void 0:i.token;YC!==v&&(YC=v,await fetch(f,{method:v?"POST":"DELETE",headers:v?{Authorization:`Bearer ${v}`}:{}}))};function zK(f=ZT()){const t=Eo(f,"auth");if(t.isInitialized())return t.getImmediate();const i=r$(f,{popupRedirectResolver:FK,persistence:[H$,B4,V4]}),n=jP("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const S=new URL(n,location.origin);if(location.origin===S.origin){const s=VK(S.toString());R$(i,s,()=>s(i.currentUser)),M$(i,T=>s(T))}}const v=$P("auth");return v&&o$(i,`http://${v}`),i}function GK(){var f;return((f=document.getElementsByTagName("head"))==null?void 0:f[0])??document}ZY({loadJS(f){return new Promise((t,i)=>{const n=document.createElement("script");n.setAttribute("src",f),n.onload=t,n.onerror=v=>{const S=wa("internal-error");S.customData=v,i(S)},n.type="text/javascript",n.charset="UTF-8",GK().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NK("Browser");const k4="@firebase/installations",gS="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=1e4,$4=`w:${gS}`,K4="FIS_v2",_K="https://firebaseinstallations.googleapis.com/v1",WK=3600*1e3,HK="installations",XK="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},iu=new lu(HK,XK,kK);function j4(f){return f instanceof $r&&f.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4({projectId:f}){return`${_K}/projects/${f}/installations`}function Z4(f){return{token:f.token,requestStatus:2,expiresIn:$K(f.expiresIn),creationTime:Date.now()}}async function J4(f,t){const n=(await t.json()).error;return iu.create("request-failed",{requestName:f,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function q4({apiKey:f}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":f})}function YK(f,{refreshToken:t}){const i=q4(f);return i.append("Authorization",KK(t)),i}async function tL(f){const t=await f();return t.status>=500&&t.status<600?f():t}function $K(f){return Number(f.replace("s","000"))}function KK(f){return`${K4} ${f}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jK({appConfig:f,heartbeatServiceProvider:t},{fid:i}){const n=Q4(f),v=q4(f),S=t.getImmediate({optional:!0});if(S){const a=await S.getHeartbeatsHeader();a&&v.append("x-firebase-client",a)}const s={fid:i,authVersion:K4,appId:f.appId,sdkVersion:$4},T={method:"POST",headers:v,body:JSON.stringify(s)},e=await tL(()=>fetch(n,T));if(e.ok){const a=await e.json();return{fid:a.fid||i,registrationStatus:2,refreshToken:a.refreshToken,authToken:Z4(a.authToken)}}else throw await J4("Create Installation",e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(f){return new Promise(t=>{setTimeout(t,f)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QK(f){return btoa(String.fromCharCode(...f)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK=/^[cdef][\w-]{21}$/,iT="";function JK(){try{const f=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(f),f[0]=112+f[0]%16;const i=qK(f);return ZK.test(i)?i:iT}catch{return iT}}function qK(f){return QK(f).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(f){return`${f.appName}!${f.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new Map;function nL(f,t){const i=P0(f);sL(i,t),tj(i,t)}function sL(f,t){const i=iL.get(f);if(i)for(const n of i)n(t)}function tj(f,t){const i=ej();i&&i.postMessage({key:f,fid:t}),ij()}let wh=null;function ej(){return!wh&&"BroadcastChannel"in self&&(wh=new BroadcastChannel("[Firebase] FID Change"),wh.onmessage=f=>{sL(f.data.key,f.data.fid)}),wh}function ij(){iL.size===0&&wh&&(wh.close(),wh=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="firebase-installations-database",sj=1,nu="firebase-installations-store";let $x=null;function xS(){return $x||($x=sb(nj,sj,{upgrade:(f,t)=>{switch(t){case 0:f.createObjectStore(nu)}}})),$x}async function Og(f,t){const i=P0(f),v=(await xS()).transaction(nu,"readwrite"),S=v.objectStore(nu),s=await S.get(i);return await S.put(t,i),await v.done,(!s||s.fid!==t.fid)&&nL(f,t.fid),t}async function rL(f){const t=P0(f),n=(await xS()).transaction(nu,"readwrite");await n.objectStore(nu).delete(t),await n.done}async function b0(f,t){const i=P0(f),v=(await xS()).transaction(nu,"readwrite"),S=v.objectStore(nu),s=await S.get(i),T=t(s);return T===void 0?await S.delete(i):await S.put(T,i),await v.done,T&&(!s||s.fid!==T.fid)&&nL(f,T.fid),T}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(f){let t;const i=await b0(f.appConfig,n=>{const v=rj(n),S=aj(f,v);return t=S.registrationPromise,S.installationEntry});return i.fid===iT?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}function rj(f){const t=f||{fid:JK(),registrationStatus:0};return aL(t)}function aj(f,t){if(t.registrationStatus===0){if(!navigator.onLine){const v=Promise.reject(iu.create("app-offline"));return{installationEntry:t,registrationPromise:v}}const i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=oj(f,i);return{installationEntry:i,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:lj(f)}:{installationEntry:t}}async function oj(f,t){try{const i=await jK(f,t);return Og(f.appConfig,i)}catch(i){throw j4(i)&&i.customData.serverCode===409?await rL(f.appConfig):await Og(f.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function lj(f){let t=await $C(f.appConfig);for(;t.registrationStatus===1;)await eL(100),t=await $C(f.appConfig);if(t.registrationStatus===0){const{installationEntry:i,registrationPromise:n}=await yS(f);return n||i}return t}function $C(f){return b0(f,t=>{if(!t)throw iu.create("installation-not-found");return aL(t)})}function aL(f){return hj(f)?{fid:f.fid,registrationStatus:0}:f}function hj(f){return f.registrationStatus===1&&f.registrationTime+Y4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj({appConfig:f,heartbeatServiceProvider:t},i){const n=cj(f,i),v=YK(f,i),S=t.getImmediate({optional:!0});if(S){const a=await S.getHeartbeatsHeader();a&&v.append("x-firebase-client",a)}const s={installation:{sdkVersion:$4,appId:f.appId}},T={method:"POST",headers:v,body:JSON.stringify(s)},e=await tL(()=>fetch(n,T));if(e.ok){const a=await e.json();return Z4(a)}else throw await J4("Generate Auth Token",e)}function cj(f,{fid:t}){return`${Q4(f)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(f,t=!1){let i;const n=await b0(f.appConfig,S=>{if(!oL(S))throw iu.create("not-registered");const s=S.authToken;if(!t&&pj(s))return S;if(s.requestStatus===1)return i=fj(f,t),S;{if(!navigator.onLine)throw iu.create("app-offline");const T=mj(S);return i=dj(f,T),T}});return i?await i:n.authToken}async function fj(f,t){let i=await KC(f.appConfig);for(;i.authToken.requestStatus===1;)await eL(100),i=await KC(f.appConfig);const n=i.authToken;return n.requestStatus===0?TS(f,t):n}function KC(f){return b0(f,t=>{if(!oL(t))throw iu.create("not-registered");const i=t.authToken;return gj(i)?{...t,authToken:{requestStatus:0}}:t})}async function dj(f,t){try{const i=await uj(f,t),n={...t,authToken:i};return await Og(f.appConfig,n),i}catch(i){if(j4(i)&&(i.customData.serverCode===401||i.customData.serverCode===404))await rL(f.appConfig);else{const n={...t,authToken:{requestStatus:0}};await Og(f.appConfig,n)}throw i}}function oL(f){return f!==void 0&&f.registrationStatus===2}function pj(f){return f.requestStatus===2&&!vj(f)}function vj(f){const t=Date.now();return t<f.creationTime||f.creationTime+f.expiresIn<t+WK}function mj(f){const t={requestStatus:1,requestTime:Date.now()};return{...f,authToken:t}}function gj(f){return f.requestStatus===1&&f.requestTime+Y4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(f){const t=f,{installationEntry:i,registrationPromise:n}=await yS(t);return n?n.catch(console.error):TS(t).catch(console.error),i.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(f,t=!1){const i=f;return await Tj(i),(await TS(i,t)).token}async function Tj(f){const{registrationPromise:t}=await yS(f);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(f){if(!f||!f.options)throw Kx("App Configuration");if(!f.name)throw Kx("App Name");const t=["projectId","apiKey","appId"];for(const i of t)if(!f.options[i])throw Kx(i);return{appName:f.name,projectId:f.options.projectId,apiKey:f.options.apiKey,appId:f.options.appId}}function Kx(f){return iu.create("missing-app-config-values",{valueName:f})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL="installations",Sj="installations-internal",wj=f=>{const t=f.getProvider("app").getImmediate(),i=Ej(t),n=Eo(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},Aj=f=>{const t=f.getProvider("app").getImmediate(),i=Eo(t,lL).getImmediate();return{getId:()=>xj(i),getToken:v=>yj(i,v)}};function Cj(){Ra(new Hr(lL,wj,"PUBLIC")),Ra(new Hr(Sj,Aj,"PRIVATE"))}Cj();gr(k4,gS);gr(k4,gS,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="analytics",Mj="firebase_id",Rj="origin",Pj=60*1e3,bj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ES="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Jg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zs=new lu("analytics","Analytics",Ij);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(f){if(!f.startsWith(ES)){const t=Zs.create("invalid-gtag-resource",{gtagURL:f});return ps.warn(t.message),""}return f}function hL(f){return Promise.all(f.map(t=>t.catch(i=>i)))}function Fj(f,t){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(f,t)),i}function Dj(f,t){const i=Fj("firebase-js-sdk-policy",{createScriptURL:Lj}),n=document.createElement("script"),v=`${ES}?l=${f}&id=${t}`;n.src=i?i==null?void 0:i.createScriptURL(v):v,n.async=!0,document.head.appendChild(n)}function Oj(f){let t=[];return Array.isArray(window[f])?t=window[f]:window[f]=t,t}async function Nj(f,t,i,n,v,S){const s=n[v];try{if(s)await t[s];else{const e=(await hL(i)).find(a=>a.measurementId===v);e&&await t[e.appId]}}catch(T){ps.error(T)}f("config",v,S)}async function Bj(f,t,i,n,v){try{let S=[];if(v&&v.send_to){let s=v.send_to;Array.isArray(s)||(s=[s]);const T=await hL(i);for(const e of s){const a=T.find(c=>c.measurementId===e),m=a&&t[a.appId];if(m)S.push(m);else{S=[];break}}}S.length===0&&(S=Object.values(t)),await Promise.all(S),f("event",n,v||{})}catch(S){ps.error(S)}}function Uj(f,t,i,n){async function v(S,...s){try{if(S==="event"){const[T,e]=s;await Bj(f,t,i,T,e)}else if(S==="config"){const[T,e]=s;await Nj(f,t,i,n,T,e)}else if(S==="consent"){const[T,e]=s;f("consent",T,e)}else if(S==="get"){const[T,e,a]=s;f("get",T,e,a)}else if(S==="set"){const[T]=s;f("set",T)}else f(S,...s)}catch(T){ps.error(T)}}return v}function Vj(f,t,i,n,v){let S=function(...s){window[n].push(arguments)};return window[v]&&typeof window[v]=="function"&&(S=window[v]),window[v]=Uj(S,f,t,i),{gtagCore:S,wrappedGtag:window[v]}}function zj(f){const t=window.document.getElementsByTagName("script");for(const i of Object.values(t))if(i.src&&i.src.includes(ES)&&i.src.includes(f))return i;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=30,_j=1e3;class Wj{constructor(t={},i=_j){this.throttleMetadata=t,this.intervalMillis=i}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,i){this.throttleMetadata[t]=i}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const uL=new Wj;function Hj(f){return new Headers({Accept:"application/json","x-goog-api-key":f})}async function Xj(f){var s;const{appId:t,apiKey:i}=f,n={method:"GET",headers:Hj(i)},v=bj.replace("{app-id}",t),S=await fetch(v,n);if(S.status!==200&&S.status!==304){let T="";try{const e=await S.json();(s=e.error)!=null&&s.message&&(T=e.error.message)}catch{}throw Zs.create("config-fetch-failed",{httpStatus:S.status,responseMessage:T})}return S.json()}async function kj(f,t=uL,i){const{appId:n,apiKey:v,measurementId:S}=f.options;if(!n)throw Zs.create("no-app-id");if(!v){if(S)return{measurementId:S,appId:n};throw Zs.create("no-api-key")}const s=t.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},T=new Kj;return setTimeout(async()=>{T.abort()},Pj),cL({appId:n,apiKey:v,measurementId:S},s,T,t)}async function cL(f,{throttleEndTimeMillis:t,backoffCount:i},n,v=uL){var T;const{appId:S,measurementId:s}=f;try{await Yj(n,t)}catch(e){if(s)return ps.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${e==null?void 0:e.message}]`),{appId:S,measurementId:s};throw e}try{const e=await Xj(f);return v.deleteThrottleMetadata(S),e}catch(e){const a=e;if(!$j(a)){if(v.deleteThrottleMetadata(S),s)return ps.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:S,measurementId:s};throw e}const m=Number((T=a==null?void 0:a.customData)==null?void 0:T.httpStatus)===503?jw(i,v.intervalMillis,Gj):jw(i,v.intervalMillis),c={throttleEndTimeMillis:Date.now()+m,backoffCount:i+1};return v.setThrottleMetadata(S,c),ps.debug(`Calling attemptFetch again in ${m} millis`),cL(f,c,n,v)}}function Yj(f,t){return new Promise((i,n)=>{const v=Math.max(t-Date.now(),0),S=setTimeout(i,v);f.addEventListener(()=>{clearTimeout(S),n(Zs.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function $j(f){if(!(f instanceof $r)||!f.customData)return!1;const t=Number(f.customData.httpStatus);return t===429||t===500||t===503||t===504}class Kj{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function jj(f,t,i,n,v){if(v&&v.global){f("event",i,n);return}else{const S=await t,s={...n,send_to:S};f("event",i,s)}}async function Qj(f,t,i,n){if(n&&n.global){const v={};for(const S of Object.keys(i))v[`user_properties.${S}`]=i[S];return f("set",v),Promise.resolve()}else{const v=await t;f("config",v,{update:!0,user_properties:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(){if(jT())try{await eb()}catch(f){return ps.warn(Zs.create("indexeddb-unavailable",{errorInfo:f==null?void 0:f.toString()}).message),!1}else return ps.warn(Zs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Jj(f,t,i,n,v,S,s){const T=kj(f);T.then(o=>{i[o.measurementId]=o.appId,f.options.measurementId&&o.measurementId!==f.options.measurementId&&ps.warn(`The measurement ID in the local Firebase config (${f.options.measurementId}) does not match the measurement ID fetched from the server (${o.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(o=>ps.error(o)),t.push(T);const e=Zj().then(o=>{if(o)return n.getId()}),[a,m]=await Promise.all([T,e]);zj(S)||Dj(S,a.measurementId),v("js",new Date);const c=(s==null?void 0:s.config)??{};return c[Rj]="firebase",c.update=!0,m!=null&&(c[Mj]=m),v("config",a.measurementId,c),a.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(t){this.app=t}_delete(){return delete Ec[this.app.options.appId],Promise.resolve()}}let Ec={},jC=[];const QC={};let jx="dataLayer",tQ="gtag",ZC,SS,JC=!1;function eQ(){const f=[];if(JP()&&f.push("This is a browser extension environment."),oG()||f.push("Cookies are not available."),f.length>0){const t=f.map((n,v)=>`(${v+1}) ${n}`).join(" "),i=Zs.create("invalid-analytics-context",{errorInfo:t});ps.warn(i.message)}}function iQ(f,t,i){eQ();const n=f.options.appId;if(!n)throw Zs.create("no-app-id");if(!f.options.apiKey)if(f.options.measurementId)ps.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${f.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zs.create("no-api-key");if(Ec[n]!=null)throw Zs.create("already-exists",{id:n});if(!JC){Oj(jx);const{wrappedGtag:S,gtagCore:s}=Vj(Ec,jC,QC,jx,tQ);SS=S,ZC=s,JC=!0}return Ec[n]=Jj(f,jC,QC,t,ZC,jx,i),new qj(f)}function nQ(f=ZT()){f=ui(f);const t=Eo(f,Ng);return t.isInitialized()?t.getImmediate():sQ(f)}function sQ(f,t={}){const i=Eo(f,Ng);if(i.isInitialized()){const v=i.getImmediate();if(Er(t,i.getOptions()))return v;throw Zs.create("already-initialized")}return i.initialize({options:t})}function rQ(f,t,i){f=ui(f),Qj(SS,Ec[f.app.options.appId],t,i).catch(n=>ps.error(n))}function aQ(f,t,i,n){f=ui(f),jj(SS,Ec[f.app.options.appId],t,i,n).catch(v=>ps.error(v))}const qC="@firebase/analytics",tM="0.10.19";function oQ(){Ra(new Hr(Ng,(t,{options:i})=>{const n=t.getProvider("app").getImmediate(),v=t.getProvider("installations-internal").getImmediate();return iQ(n,v,i)},"PUBLIC")),Ra(new Hr("analytics-internal",f,"PRIVATE")),gr(qC,tM),gr(qC,tM,"esm2020");function f(t){try{const i=t.getProvider(Ng).getImmediate();return{logEvent:(n,v,S)=>aQ(i,n,v,S),setUserProperties:(n,v)=>rQ(i,n,v)}}catch(i){throw Zs.create("interop-component-reg-failed",{reason:i})}}}oQ();const lQ={apiKey:"AIzaSyA6LqmoYS8tHiBqr3n9TjleBWegKhmD5T0",authDomain:"bobbys-craps.firebaseapp.com",projectId:"bobbys-craps",storageBucket:"bobbys-craps.firebasestorage.app",messagingSenderId:"606884201685",appId:"1:606884201685:web:174d6b394f015cf680ce5c",measurementId:"G-R9TPBJ5T4X"},wS=rb(lQ);typeof window<"u"&&nQ(wS);const Vf=B3(wS,{localCache:e4({tabManager:n4()})}),uv=zK(wS);typeof window<"u"&&C$(uv,B4).catch(f=>{console.error("Auth persistence error:",f)});const zf="users";async function hQ(f,t,i){if(console.log("leaderboard: signupUser called",{username:f,nickname:i}),!f||f.length<3)throw new Error("Username must be at least 3 characters long");const n=f.toLowerCase(),v=`${n}@craps.local`;try{const S=Df(Vf,zf,n);if((await A0(S)).exists())throw{code:"auth/email-already-in-use",message:"This username is already taken."};let T;try{T=await E$(uv,v,t)}catch(m){throw console.error("leaderboard: auth creation failed",m),m.code==="auth/email-already-in-use"?{code:"auth/email-already-in-use",message:"This username is already taken."}:m}const e=T.user;console.log("leaderboard: auth user created",e.uid),await A$(e,{displayName:i});const a={username:f,nickname:i,balance:300,highestBalance:300,largestWin:0,largestLoss:0,resetCount:0,lastUpdate:ev()};return console.log("leaderboard: setting firestore doc",n),await rv(S,a),{...a,uid:e.uid}}catch(S){throw console.error("leaderboard: signup error:",S),S}}async function uQ(f,t){console.log("leaderboard: loginUser called",f);const i=f.toLowerCase(),n=`${i}@craps.local`;try{const S=(await S$(uv,n,t)).user;console.log("leaderboard: auth login successful",S.uid),console.log("leaderboard: fetching firestore doc",i);const s=Df(Vf,zf,i);try{const e=await A0(s);if(e.exists())return console.log("leaderboard: firestore doc found"),{...e.data(),uid:S.uid}}catch(e){console.warn("leaderboard: primary getDoc failed, attempting cache...",e.message);try{const{getDocFromCache:a}=await Xz(async()=>{const{getDocFromCache:c}=await Promise.resolve().then(()=>wY);return{getDocFromCache:c}},void 0,import.meta.url),m=await a(s);if(m.exists())return console.log("leaderboard: firestore doc found in cache"),{...m.data(),uid:S.uid}}catch(a){console.error("leaderboard: cache fetch also failed",a)}}console.log("leaderboard: firestore doc NOT found or unreachable, returning basic profile");const T={username:f,nickname:S.displayName||f,balance:300,highestBalance:300,largestWin:0,largestLoss:0,resetCount:0,lastUpdate:ev()};return rv(s,T,{merge:!0}).catch(e=>console.error("Auto-repair background setDoc failed",e)),{...T,uid:S.uid}}catch(v){throw console.error("leaderboard: login error:",v),v}}async function cQ(){return await b$(uv)}let nh=null;function fQ(f){const t=P$(uv,async i=>{if(nh&&(nh(),nh=null),i){const n=i.email.split("@")[0];console.log("leaderboard: auth state change - logged in",n);const v=Df(Vf,zf,n);nh=Ap(v,async S=>{if(S.exists())console.log("leaderboard: user data updated in real-time"),f({...S.data(),uid:i.uid});else{console.warn("leaderboard: auth session found but no firestore doc. Attempting auto-repair.");try{const s={username:n,nickname:i.displayName||n,balance:300,highestBalance:300,largestWin:0,largestLoss:0,resetCount:0,lastUpdate:ev()};await rv(v,s)}catch(s){console.error("leaderboard: auto-repair failed:",s),f({username:n,nickname:i.displayName||n,balance:300,uid:i.uid})}}},S=>{console.error("leaderboard: onSnapshot error:",S),A0(v).then(s=>{s.exists()&&f({...s.data(),uid:i.uid})}).catch(s=>console.error("leaderboard: snapshot fallback failed:",s))})}else console.log("leaderboard: auth state change - logged out"),f(null)});return()=>{t(),nh&&(nh(),nh=null)}}async function dQ(){console.log("leaderboard: fetchGlobalUsers called");const f=sS(YE(Vf,zf),rS("balance","desc"),j3(100));try{const i=(await o4(f)).docs.map(n=>{var v,S,s;return{id:n.id,...n.data(),lastUpdate:((s=(S=(v=n.data().lastUpdate)==null?void 0:v.toDate)==null?void 0:S.call(v))==null?void 0:s.toISOString())||new Date().toISOString()}});return console.log(`leaderboard: fetched ${i.length} users`),i}catch(t){throw console.error("leaderboard: error fetching users:",t),t}}function pQ(f){const t=sS(YE(Vf,zf),rS("balance","desc"));let i=0;const n=3,v=()=>Ap(t,S=>{i=0;const s=S.docs.map(T=>{var e,a,m;return{id:T.id,...T.data(),lastUpdate:((m=(a=(e=T.data().lastUpdate)==null?void 0:e.toDate)==null?void 0:a.call(e))==null?void 0:m.toISOString())||new Date().toISOString()}});console.log(`Leaderboard synced: ${s.length} users found.`),f(s)},S=>{if(console.error("Leaderboard subscription error:",S),i<n){i++;const s=Math.pow(2,i)*1e3;console.warn(`Attempting to reconnect leaderboard (attempt ${i}/${n}) in ${s}ms...`),setTimeout(v,s)}});return v()}async function Tm(f){if(!f||f.username==="Guest")return;const t=f.username.toLowerCase(),i=Df(Vf,zf,t),n={username:f.username,nickname:f.nickname||f.username,balance:Number(f.balance)||300,highestBalance:Number(f.highestBalance)||0,largestWin:Number(f.largestWin)||0,largestLoss:Number(f.largestLoss)||0,resetCount:Number(f.resetCount)||0,lastUpdate:ev()};try{await rv(i,n,{merge:!0})}catch(v){console.error("Error updating global user:",v)}}var vQ=Jt('<div class="fixed inset-0 z-[120] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-300 svelte-1n46o8q"><div class="w-full max-w-sm p-8 bg-[#1a4d2e] rounded-3xl border-2 border-emerald-400/30 shadow-[0_0_50px_rgba(0,0,0,0.8),inset_0_0_30px_rgba(0,0,0,0.4)] relative overflow-hidden group svelte-1n46o8q"><div class="flex items-center justify-between mb-8 relative z-10 svelte-1n46o8q"><div class="flex items-center gap-3 svelte-1n46o8q"><div class="p-2 rounded-xl bg-black/40 border border-white/10 text-emerald-400 svelte-1n46o8q"><!></div> <h2 class="text-2xl font-black text-white tracking-tighter uppercase italic svelte-1n46o8q">Settings</h2></div> <button class="p-2 rounded-xl bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-all hover:scale-110 svelte-1n46o8q"><!></button></div> <div class="space-y-6 relative z-10 svelte-1n46o8q"><div class="flex items-center justify-between p-4 bg-black/40 rounded-2xl border border-white/5 shadow-inner svelte-1n46o8q"><div class="flex items-center gap-3 svelte-1n46o8q"><div><!></div> <div class="svelte-1n46o8q"><span class="block text-sm font-black text-white uppercase tracking-tight svelte-1n46o8q">Sound Effects</span> <span class="text-[10px] font-medium text-zinc-500 uppercase svelte-1n46o8q"> </span></div></div> <button><div></div></button></div> <div class="p-4 bg-black/40 rounded-2xl border border-white/5 shadow-inner svelte-1n46o8q"><div class="flex items-center gap-3 mb-4 svelte-1n46o8q"><div class="p-2 rounded-lg bg-yellow-500/20 text-yellow-500 svelte-1n46o8q"><!></div> <div class="svelte-1n46o8q"><span class="block text-sm font-black text-white uppercase tracking-tight svelte-1n46o8q">Reset Bankroll</span> <span class="text-[10px] font-medium text-zinc-500 uppercase svelte-1n46o8q">Return to $300.00</span></div></div> <button class="w-full py-3 bg-white hover:bg-zinc-200 text-black font-black uppercase tracking-widest text-xs rounded-xl transition-all active:scale-[0.98] shadow-lg svelte-1n46o8q">Confirm Reset</button></div> <button class="w-full p-4 bg-emerald-500/10 hover:bg-emerald-500/20 rounded-2xl border border-emerald-500/20 transition-all flex items-center gap-4 group svelte-1n46o8q"><div class="p-2 rounded-lg bg-emerald-500/20 text-emerald-400 group-hover:scale-110 transition-transform svelte-1n46o8q"><!></div> <div class="text-left svelte-1n46o8q"><span class="block text-sm font-black text-white uppercase tracking-tight svelte-1n46o8q">How to Play</span> <span class="text-[10px] font-medium text-zinc-500 uppercase svelte-1n46o8q">Rules & Payouts</span></div></button></div> <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none svelte-1n46o8q"></div></div></div>'),mQ=Jt(`<div class="fixed inset-0 flex items-center justify-center z-[100] pointer-events-none svelte-1n46o8q"><div><div class="relative flex items-center svelte-1n46o8q"><span class="text-7xl font-black italic tracking-tighter drop-shadow-[0_4px_12px_rgba(0,0,0,0.9)] 
                       bg-gradient-to-b from-emerald-200 via-emerald-400 to-emerald-600 bg-clip-text text-transparent
                       border-text-stroke flex items-baseline svelte-1n46o8q"><span class="svelte-1n46o8q"> </span> <span class="relative svelte-1n46o8q">. <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] flex items-center justify-center opacity-80 pointer-events-none -z-10 svelte-1n46o8q"><div class="absolute inset-0 bg-[radial-gradient(circle,rgba(158,255,0,0.6)_0%,transparent_70%)] animate-pulse svelte-1n46o8q"></div> <div class="absolute inset-[-40px] rounded-full z-0 pointer-events-none overflow-hidden svelte-1n46o8q"><div class="absolute inset-0 animate-eclipse-rays svelte-1n46o8q" style="background: repeating-conic-gradient(from 0deg, #9eff00 0deg 1deg, transparent 1deg 6deg);
                              mask-image: radial-gradient(circle, black 30%, transparent 75%);
                              -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div></div></span> <span class="svelte-1n46o8q"> </span></span></div></div></div>`),gQ=Jt(`<div class="fixed inset-0 flex items-center justify-center z-[100] pointer-events-none svelte-1n46o8q"><div><div class="relative flex items-center svelte-1n46o8q"><span class="text-7xl font-black italic tracking-tighter drop-shadow-[0_4px_12px_rgba(0,0,0,0.9)] 
                       bg-gradient-to-b from-red-200 via-red-500 to-red-800 bg-clip-text text-transparent
                       border-text-stroke flex items-baseline svelte-1n46o8q"><span class="svelte-1n46o8q"> </span> <span class="relative svelte-1n46o8q">. <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] flex items-center justify-center opacity-80 pointer-events-none -z-10 svelte-1n46o8q"><div class="absolute inset-0 bg-[radial-gradient(circle,rgba(255,59,48,0.6)_0%,transparent_70%)] animate-pulse svelte-1n46o8q"></div> <div class="absolute inset-[-40px] rounded-full z-0 pointer-events-none overflow-hidden svelte-1n46o8q"><div class="absolute inset-0 animate-eclipse-rays svelte-1n46o8q" style="background: repeating-conic-gradient(from 0deg, #ff3b30 0deg 1deg, transparent 1deg 6deg);
                              mask-image: radial-gradient(circle, black 30%, transparent 75%);
                              -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div></div></span> <span class="svelte-1n46o8q"> </span></span></div></div></div>`),xQ=Jt('<button class="ml-2 text-[8px] font-black text-zinc-500 hover:text-red-400 uppercase transition-colors svelte-1n46o8q">[ Logout ]</button>'),yQ=Jt('<div class="absolute left-1/2 -translate-x-1/2 flex items-center gap-2 animate-in fade-in duration-500 svelte-1n46o8q"><span class="text-[10px] font-black text-zinc-500 uppercase tracking-widest svelte-1n46o8q">Welcome</span> <span class="text-sm font-black text-emerald-400 uppercase tracking-tight italic drop-shadow-lg svelte-1n46o8q"> </span> <!></div>'),TQ=Jt('<div class="w-1.5 h-1.5 rounded-full bg-yellow-400 animate-pulse svelte-1n46o8q"></div>'),EQ=Jt('<div class="w-1.5 h-1.5 rounded-full bg-emerald-400 svelte-1n46o8q"></div>'),SQ=Jt('<div class="w-1.5 h-1.5 rounded-full bg-white/30 svelte-1n46o8q"></div>'),wQ=Jt("<div> </div>"),AQ=Jt("<div> </div>"),CQ=Jt('<span class="text-[9px] font-black text-white tracking-widest uppercase svelte-1n46o8q">LOW ROLLS</span> <span class="text-[7px] font-bold text-emerald-400/60 uppercase svelte-1n46o8q">BET HERE</span> <span class="text-base font-black text-white drop-shadow-md leading-none svelte-1n46o8q">30 <span class="text-[9px] opacity-60 svelte-1n46o8q">TO</span> 1</span>',1),MQ=Jt(`<span class="text-[9px] font-black text-white tracking-widest uppercase svelte-1n46o8q">ROLL 'EM ALL</span> <span class="text-[7px] font-bold text-emerald-400/60 uppercase svelte-1n46o8q">BET HERE</span> <span class="text-lg font-black text-white drop-shadow-md leading-none svelte-1n46o8q">155 <span class="text-xs opacity-60 svelte-1n46o8q">TO</span> 1</span>`,1),RQ=Jt('<span class="text-[9px] font-black text-white tracking-widest uppercase svelte-1n46o8q">HIGH ROLLS</span> <span class="text-[7px] font-bold text-emerald-400/60 uppercase svelte-1n46o8q">BET HERE</span> <span class="text-base font-black text-white drop-shadow-md leading-none svelte-1n46o8q">30 <span class="text-[9px] opacity-60 svelte-1n46o8q">TO</span> 1</span>',1),PQ=Jt('<div class="w-2 h-2 rounded-full bg-yellow-400 animate-ping svelte-1n46o8q"></div>'),bQ=Jt('<div class="w-2 h-2 rounded-full bg-red-500 svelte-1n46o8q"></div>'),IQ=Jt('<div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse svelte-1n46o8q"></div>'),LQ=Jt('<div class="absolute inset-[-2px] rounded-t-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div>'),FQ=Jt('<div class="absolute inset-[-2px] rounded-t-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div>'),DQ=Jt('<span class="absolute left-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">4 TO 1</span> <span class="text-xl font-black text-[#d63a30] uppercase tracking-wide drop-shadow-[0_0_8px_rgba(214,58,48,0.4)] svelte-1n46o8q">SEVEN</span> <span class="absolute right-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">4 TO 1</span>',1),OQ=Jt('<span class="text-[10px] font-black text-white uppercase tracking-wider svelte-1n46o8q">Horn Bet</span>'),NQ=Jt('<span class="absolute left-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">7 TO 1</span> <span class="text-xl font-black text-[#d63a30] uppercase tracking-wide drop-shadow-[0_0_8px_rgba(214,58,48,0.4)] svelte-1n46o8q">ANY CRAPS</span> <span class="absolute right-3 text-[9px] font-bold text-white/60 whitespace-nowrap tracking-tighter uppercase svelte-1n46o8q">7 TO 1</span>',1),BQ=Jt('<div class="flex flex-col flex-1 min-h-0 svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 text-center border-t border-b border-white/20 mb-2 svelte-1n46o8q"><span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">HARD WAYS <span class="opacity-70 font-bold svelte-1n46o8q">(# of rolls since last)</span></span></div> <div class="grid grid-cols-2 gap-x-2 gap-y-2 flex-[0_0_30%] min-h-[120px] svelte-1n46o8q"><div class="flex flex-col gap-2 border-r-2 border-white/20 pr-1 svelte-1n46o8q"><!> <!></div> <div class="flex flex-col gap-2 pl-1 svelte-1n46o8q"><!> <!></div></div> <div class="flex-1 flex flex-col mt-3 min-h-0 svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 text-center border-t border-b border-white/20 svelte-1n46o8q"><span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">One Roll Bets</span></div> <div class="flex-1 flex flex-col gap-2 mt-2 svelte-1n46o8q"><!> <div class="flex-[0_0_48%] min-h-[120px] grid grid-cols-2 grid-rows-2 gap-px relative border border-white/20 shadow-[inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl overflow-hidden svelte-1n46o8q"><!> <!> <!> <!> <div class="absolute inset-0 flex items-center justify-center pointer-events-none svelte-1n46o8q"><!></div></div> <div class="flex-[0_0_15%] min-h-[40px] flex svelte-1n46o8q"><!></div></div></div></div>'),UQ=Jt('<div class="flex flex-col flex-1 min-h-0 gap-2 svelte-1n46o8q"><div class="flex flex-col h-[35%] svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 flex items-center justify-between px-4 border-t border-b border-white/20 rounded-t-lg svelte-1n46o8q"><span class="text-[9px] font-black text-white/60 svelte-1n46o8q">31 FOR 1</span> <span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">â¢ HOPPING HARD WAYS â¢</span> <span class="text-[9px] font-black text-white/60 svelte-1n46o8q">31 FOR 1</span></div> <div class="flex-1 grid grid-cols-2 grid-rows-2 gap-1 mt-1 svelte-1n46o8q"><!> <!> <!> <!></div></div> <div class="flex-1 flex flex-col min-h-0 svelte-1n46o8q"><div class="bg-[#0a2e0a]/80 py-1 flex items-center justify-between px-4 border-t border-b border-white/20 svelte-1n46o8q"><span class="text-[9px] font-black text-white/60 svelte-1n46o8q">16 FOR 1</span> <span class="text-[10px] font-black text-white uppercase tracking-widest svelte-1n46o8q">â¢ HOP BETS â¢</span> <span class="text-[9px] font-black text-white/60 svelte-1n46o8q">16 FOR 1</span></div> <div class="flex-1 flex gap-1 mt-1 min-h-0 svelte-1n46o8q"><div class="flex-1 flex flex-col gap-1 svelte-1n46o8q"></div> <div class="flex-1 flex flex-col gap-1 py-4 svelte-1n46o8q"></div> <div class="flex-1 flex flex-col gap-1 svelte-1n46o8q"></div></div></div></div>'),VQ=Jt('<span class="text-[10px] font-black text-red-400/60 border border-red-400/40 px-3 py-1 rounded -rotate-12 bg-black/20 uppercase tracking-widest svelte-1n46o8q">Global Off</span>'),zQ=Jt('<div class="absolute inset-0 bg-red-900/10 backdrop-blur-[0.5px] z-10 flex items-center justify-center pointer-events-none overflow-hidden svelte-1n46o8q"><div class="flex gap-8 svelte-1n46o8q"></div></div>'),GQ=Jt('<div class="absolute -inset-[3px] border-2 border-white rounded-lg pointer-events-none z-20 svelte-1n46o8q"></div>'),_Q=Jt(`<div class="relative w-10 h-10 flex items-center justify-center svelte-1n46o8q"><div class="absolute inset-[-4px] rounded-full bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div> <div class="absolute inset-[-20px] rounded-full z-0 pointer-events-none svelte-1n46o8q"><div class="absolute inset-0 animate-eclipse-rays svelte-1n46o8q" style="background: repeating-conic-gradient(from 0deg, #9eff00 0deg 1deg, transparent 1deg 6deg);
                                    mask-image: radial-gradient(circle, black 30%, transparent 75%);
                                    -webkit-mask-image: radial-gradient(circle, black 30%, transparent 75%);"></div></div> <div class="absolute inset-[-12px] rounded-full bg-[#9eff00]/30 blur-2xl z-0 svelte-1n46o8q"></div> <div class="relative w-full h-full rounded-full bg-white border-2 border-zinc-400 flex items-center justify-center shadow-[0_4px_8px_rgba(0,0,0,0.5),inset_0_2px_2px_rgba(255,255,255,1)] z-10 transform scale-90 svelte-1n46o8q"><div class="w-7 h-7 rounded-full bg-white border border-black/10 flex items-center justify-center shadow-[inset_0_2px_4px_rgba(0,0,0,0.4)] svelte-1n46o8q"><span class="text-[10px] font-black text-zinc-800 uppercase drop-shadow-sm svelte-1n46o8q">ON</span></div></div></div>`),WQ=Jt('<div class="w-10 h-10 rounded-full bg-zinc-800 border-2 border-zinc-900 flex items-center justify-center shadow-[0_4px_8px_rgba(0,0,0,0.6),inset_0_1px_1px_rgba(255,255,255,0.2)] transform scale-90 svelte-1n46o8q"><div class="w-7 h-7 rounded-full bg-zinc-900 border border-black flex items-center justify-center shadow-[inset_0_2px_4px_rgba(0,0,0,0.8)] svelte-1n46o8q"><span class="text-[10px] font-black text-white/90 uppercase svelte-1n46o8q">OFF</span></div></div>'),HQ=Jt('<div class="absolute -top-16 left-1/2 -translate-x-1/2 z-30 pointer-events-none svelte-1n46o8q"><!></div>'),XQ=Jt('<div class="flex-1 flex flex-col gap-1 relative svelte-1n46o8q"><!> <div class="h-[15%] bg-emerald-900/40 border border-white/5 rounded flex items-center justify-center relative overflow-hidden svelte-1n46o8q"><!></div> <!> <!> <div class="h-[18%] flex gap-1 relative svelte-1n46o8q"><!> <!></div></div>'),kQ=Jt('<div class="absolute inset-[-4px] rounded-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div> <div class="absolute inset-[-8px] rounded-xl bg-[#9eff00]/20 blur-xl animate-pulse z-0 svelte-1n46o8q"></div>',1),YQ=Jt('<div class="absolute inset-[-4px] rounded-xl bg-[#9eff00]/60 blur-md animate-pulse z-0 svelte-1n46o8q"></div> <div class="absolute inset-[-8px] rounded-xl bg-[#9eff00]/20 blur-xl animate-pulse z-0 svelte-1n46o8q"></div>',1),$Q=Jt('<span class="text-5xl font-black italic text-[#ff3b30] drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)] uppercase tracking-tighter svelte-1n46o8q">COME</span>'),KQ=Jt('<div class="flex flex-col items-center justify-center w-full h-full py-2 svelte-1n46o8q"><div class="flex items-end justify-center w-full px-4 text-white font-black gap-3 relative -mt-3 svelte-1n46o8q"><div class="flex flex-col items-center translate-y-0.5 mx-3 svelte-1n46o8q"><div class="w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-xl shadow-lg bg-black/30 svelte-1n46o8q">2</div> <span class="text-[11px] font-black uppercase mt-1 leading-none svelte-1n46o8q">PAYS DOUBLE</span></div> <span class="text-xl opacity-80 translate-y-[-4px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md translate-y-[-8px] svelte-1n46o8q">3</span> <span class="text-xl opacity-80 translate-y-[-11px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md -translate-y-[14px] svelte-1n46o8q">4</span> <span class="text-xl opacity-80 translate-y-[-17px] mx-1.5 svelte-1n46o8q">â¢</span> <div class="flex flex-col items-center -translate-y-[20px] relative svelte-1n46o8q"><span class="text-4xl drop-shadow-xl text-white svelte-1n46o8q">9</span> <div class="absolute top-[42px] left-1/2 -translate-x-1/2 flex flex-col items-center svelte-1n46o8q"><span class="text-2xl font-black text-white tracking-normal leading-none svelte-1n46o8q">FIELD</span></div></div> <span class="text-xl opacity-80 translate-y-[-17px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md -translate-y-[14px] svelte-1n46o8q">10</span> <span class="text-xl opacity-80 translate-y-[-11px] mx-1.5 svelte-1n46o8q">â¢</span> <span class="text-3xl drop-shadow-md translate-y-[-8px] svelte-1n46o8q">11</span> <span class="text-xl opacity-80 translate-y-[-4px] mx-1.5 svelte-1n46o8q">â¢</span> <div class="flex flex-col items-center translate-y-0.5 mx-3 svelte-1n46o8q"><div class="w-10 h-10 rounded-full border-2 border-white flex items-center justify-center text-xl shadow-lg bg-black/30 svelte-1n46o8q">12</div> <span class="text-[11px] font-black uppercase mt-1 leading-none svelte-1n46o8q">PAYS DOUBLE</span></div></div></div>'),jQ=Jt('<span class="text-[11px] font-black text-white leading-tight text-center uppercase tracking-tighter svelte-1n46o8q">TAKE<br class="svelte-1n46o8q"/>ODDS</span>'),QQ=Jt('<span class="text-4xl font-serif italic text-white font-medium tracking-widest drop-shadow-lg svelte-1n46o8q">Pass Line</span>'),ZQ=Jt('<div class="absolute w-[18%] h-[18%] bg-zinc-900 rounded-full svelte-1n46o8q"></div>'),JQ=Jt('<div class="w-4 h-4 bg-white rounded-[2px] relative shadow-inner svelte-1n46o8q"></div>'),qQ=Jt('<div><div> </div> <div class="flex gap-2 scale-90 svelte-1n46o8q"></div></div>'),tZ=Jt('<button class="relative svelte-1n46o8q"><!></button>'),eZ=Jt(`<main class="h-screen w-full bg-[#0a2e0a] text-white flex flex-col font-sans overflow-hidden select-none relative svelte-1n46o8q" style="background-image: radial-gradient(circle at 50% 50%, #1a4d2e 0%, #0a2e0a 100%)"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="h-12 flex items-center justify-between px-6 bg-black/60 border-b border-white/10 shrink-0 backdrop-blur-md svelte-1n46o8q"><div class="flex items-center gap-3 svelte-1n46o8q"><div class="flex items-center gap-2 p-2 rounded-xl bg-black/40 border border-white/10 shadow-inner svelte-1n46o8q"><img src="https://img.icons8.com/color/48/dice.png" alt="logo" class="w-6 h-6 drop-shadow-md svelte-1n46o8q"/> <img src="https://img.icons8.com/color/48/dice.png" alt="logo" class="w-6 h-6 drop-shadow-md svelte-1n46o8q"/></div> <h1 class="text-xl font-black text-white tracking-tighter uppercase italic svelte-1n46o8q">Bobby's Bubble <span class="text-emerald-400 svelte-1n46o8q">Craps</span></h1></div> <!> <div class="flex items-center gap-4 svelte-1n46o8q"><div class="flex items-center gap-3 bg-black/40 px-4 py-1.5 rounded-full border border-white/5 shadow-inner svelte-1n46o8q"><div class="flex flex-col items-end svelte-1n46o8q"><span class="text-[9px] font-black text-zinc-500 uppercase tracking-widest leading-none svelte-1n46o8q">Game Status</span> <div class="flex items-center gap-2 svelte-1n46o8q"><!> <span> </span></div></div></div> <button class="flex items-center gap-2 bg-black/40 px-4 py-2 rounded-full border border-white/5 shadow-inner text-zinc-400 hover:text-white transition-all active:scale-95 group svelte-1n46o8q"><!> <span class="text-[10px] font-black uppercase tracking-widest svelte-1n46o8q">Leaderboard</span></button> <button class="p-1.5 rounded-full bg-black/40 border border-white/10 text-zinc-400 hover:text-white transition-colors shadow-inner svelte-1n46o8q"><!></button></div></div> <div class="flex-1 flex flex-col p-2 gap-1.5 overflow-hidden max-w-[1400px] mx-auto w-full svelte-1n46o8q"><div class="h-[18%] flex justify-between items-stretch gap-3 shrink-0 mb-1 svelte-1n46o8q"><div class="w-[42%] bg-[#1a4d2e] rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] flex flex-col overflow-hidden relative group svelte-1n46o8q"><div class="h-[55%] flex items-center justify-between px-6 relative z-10 svelte-1n46o8q"><div class="flex flex-col items-center svelte-1n46o8q"><span class="text-4xl font-black italic text-yellow-500/20 drop-shadow-2xl tracking-tighter mb-1 svelte-1n46o8q" style="font-family: 'Brush Script MT', cursive;">Lucky</span> <div class="flex gap-1 svelte-1n46o8q"></div></div> <div class="flex-1 flex justify-center items-center px-2 relative h-full svelte-1n46o8q"><div class="flex gap-2 items-center scale-110 svelte-1n46o8q"><img src="https://img.icons8.com/color/96/dice.png" alt="dice"/> <img src="https://img.icons8.com/color/96/dice.png" alt="dice"/></div></div> <div class="flex flex-col items-center svelte-1n46o8q"><span class="text-4xl font-black italic text-yellow-500/20 drop-shadow-2xl tracking-tighter mb-1 svelte-1n46o8q" style="font-family: 'Brush Script MT', cursive;">Roller</span> <div class="flex gap-1 svelte-1n46o8q"></div></div></div> <div class="h-[45%] flex divide-x-2 divide-white/10 bg-[#0a2e0a]/80 border-t border-white/10 svelte-1n46o8q"><!> <!> <!></div></div> <!> <div class="flex-1 min-w-[500px] bg-[#1a4d2e] rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] flex flex-col justify-center gap-1.5 px-4 overflow-hidden relative group svelte-1n46o8q"><div class="absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-transparent svelte-1n46o8q"></div> <div class="flex items-center justify-between w-full relative z-10 svelte-1n46o8q"><div class="flex items-center gap-4 flex-1 min-w-0 svelte-1n46o8q"><div class="flex items-center bg-black/40 rounded-xl border border-white/10 shadow-[inset_0_2px_8px_rgba(0,0,0,0.5)] divide-x divide-white/10 shrink-0 overflow-hidden svelte-1n46o8q"><div class="flex flex-col items-center px-3 py-1 bg-white/[0.02] svelte-1n46o8q"><span class="text-[8px] font-black text-zinc-500 uppercase tracking-tighter mb-0.5 svelte-1n46o8q">Last Bet</span> <span class="text-sm font-black text-white leading-tight tabular-nums svelte-1n46o8q"> </span></div> <div class="flex flex-col items-center px-3 py-1 bg-white/[0.04] svelte-1n46o8q"><span class="text-[8px] font-black text-zinc-500 uppercase tracking-tighter mb-0.5 svelte-1n46o8q">Last Win</span> <span class="text-sm font-black text-emerald-400 leading-tight tabular-nums svelte-1n46o8q"> </span></div> <div class="flex flex-col items-center px-3 py-1 min-w-[100px] bg-white/[0.06] svelte-1n46o8q"><span class="text-[8px] font-black text-zinc-400 uppercase tracking-tighter mb-0.5 svelte-1n46o8q">Shooter P/L</span> <span> </span></div></div> <div class="flex flex-col playable-balance shrink-0 ml-2 svelte-1n46o8q"><span class="text-[9px] font-black text-zinc-400 uppercase leading-none tracking-tighter svelte-1n46o8q">Balance</span> <span class="text-xl font-black text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)] svelte-1n46o8q"> </span></div></div> <div class="flex items-center gap-3 shrink-0 svelte-1n46o8q"><div class="flex flex-col items-end svelte-1n46o8q"><span class="text-[9px] font-black text-zinc-400 uppercase leading-none tracking-tighter svelte-1n46o8q">Current Bet</span> <span class="text-xl font-black text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)] svelte-1n46o8q"> </span></div></div></div> <div><div class="flex items-center gap-2 svelte-1n46o8q"><!> <span> </span></div></div></div></div> <div><div class="w-[35%] flex flex-col gap-1 shrink-0 svelte-1n46o8q"><div class="flex gap-1 h-12 mb-2 svelte-1n46o8q"><div class="flex-1 relative svelte-1n46o8q"><!> <button><span class="text-[11px] font-black text-zinc-800 uppercase tracking-tight svelte-1n46o8q">HARDWAYS</span> <div class="bg-black/30 px-3 py-1 rounded shadow-inner text-[11px] font-black text-white border border-black/10 min-w-[60px] text-right svelte-1n46o8q"> </div></button></div> <div class="flex-1 relative svelte-1n46o8q"><!> <button><span class="text-[11px] font-black text-zinc-800 uppercase tracking-tight svelte-1n46o8q">HOP BETS</span> <div class="bg-black/30 px-3 py-1 rounded shadow-inner text-[11px] font-black text-white border border-black/10 min-w-[60px] text-right svelte-1n46o8q"> </div></button></div></div> <div class="bg-[#1a4d2e] rounded-2xl border-2 border-emerald-400/50 shadow-[0_0_40px_rgba(0,0,0,0.6),inset_0_0_30px_rgba(0,0,0,0.4)] p-1.5 flex-1 flex flex-col gap-1.5 relative overflow-hidden group svelte-1n46o8q"><!></div></div> <div class="flex-1 flex flex-col gap-1 min-w-0 svelte-1n46o8q"><div class="flex gap-1 h-[45%] relative svelte-1n46o8q"><!> <!></div> <div class="flex-1 flex gap-2 svelte-1n46o8q"><div class="w-24 flex flex-col gap-1 py-1 shrink-0 svelte-1n46o8q"><button> </button> <div class="h-[16%] relative group svelte-1n46o8q"><!> <button>Press</button></div> <div class="h-[16%] relative group svelte-1n46o8q"><!> <button>Across</button></div> <div class="flex-1 flex flex-col items-center justify-between py-1 shrink-0 mt-2 svelte-1n46o8q"><!> <!> <!></div></div> <div class="flex-1 flex flex-col gap-2 min-w-0 svelte-1n46o8q"><!> <!> <div class="h-[28%] flex gap-2 svelte-1n46o8q"><!> <!></div></div></div></div></div> <div class="h-24 shrink-0 flex flex-col gap-2 svelte-1n46o8q"><div class="h-10 bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.4),inset_0_0_15px_rgba(0,0,0,0.3)] flex items-center px-3 gap-4 overflow-x-auto whitespace-nowrap scrollbar-hide relative group svelte-1n46o8q"></div> <div class="flex-1 bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-between px-6 backdrop-blur-xl svelte-1n46o8q"><div class="flex gap-2 svelte-1n46o8q"><button class="px-4 py-2 bg-gradient-to-b from-zinc-100 to-zinc-300 rounded-xl border-b-2 border-white/20 flex items-center gap-2 text-zinc-800 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] hover:scale-105 transition-transform active:scale-95 group svelte-1n46o8q"><div class="w-5 h-5 rounded-full bg-red-500/80 flex items-center justify-center group-hover:rotate-180 transition-transform duration-500 shadow-sm svelte-1n46o8q"><!></div> <div class="flex flex-col items-start leading-none svelte-1n46o8q"><span class="text-[9px] font-black uppercase tracking-tighter svelte-1n46o8q">Take Down</span> <span class="text-[8px] font-bold opacity-80 text-red-600 svelte-1n46o8q">ALL BETS</span></div></button></div> <div class="flex items-center gap-2 svelte-1n46o8q"></div> <div class="flex gap-2 svelte-1n46o8q"><button class="px-3 py-2 bg-gradient-to-b from-zinc-100 to-zinc-300 rounded-xl border-b-2 border-white/20 flex items-center gap-1.5 text-zinc-800 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] hover:scale-105 transition-transform active:scale-95 svelte-1n46o8q"><div class="w-4 h-4 rounded-full bg-zinc-800/20 flex items-center justify-center text-[8px] font-black text-zinc-800 border border-zinc-800/30 svelte-1n46o8q">x2</div> <div class="flex flex-col items-start leading-none svelte-1n46o8q"><span class="text-[8px] font-black uppercase svelte-1n46o8q">Double</span> <span class="text-[7px] font-bold opacity-70 svelte-1n46o8q">Bet</span></div></button> <button class="px-3 py-2 bg-gradient-to-b from-zinc-100 to-zinc-300 rounded-xl border-b-2 border-white/20 flex items-center gap-1.5 text-zinc-800 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] hover:scale-105 transition-transform active:scale-95 svelte-1n46o8q"><div class="w-4 h-4 rounded-full bg-zinc-800/20 flex items-center justify-center border border-zinc-800/30 svelte-1n46o8q"><!></div> <div class="flex flex-col items-start leading-none svelte-1n46o8q"><span class="text-[8px] font-black uppercase svelte-1n46o8q">Repeat</span> <span class="text-[7px] font-bold opacity-70 svelte-1n46o8q">Last Bet</span></div></button> <button class="px-8 py-2 bg-[#1a4d2e] text-white rounded-xl border-2 border-emerald-400/50 text-xs font-black uppercase shadow-[0_0_20px_rgba(52,211,153,0.3),inset_0_0_15px_rgba(0,0,0,0.4)] hover:shadow-[0_0_30px_rgba(52,211,153,0.5)] hover:bg-emerald-800 transition-all active:scale-95 disabled:opacity-50 disabled:scale-100 svelte-1n46o8q"> </button></div></div></div></div></main>`);function iZ(f,t){er(t,!1);const i=de(),n=de(),v=de(),S=de(),s=de(),T=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let e=null,a=de(null),m=null,c=null;async function o(){if(!T)return;const rt="./";try{const ot=`${rt}poker_chip.mp3`.replace(/\/+/g,"/"),It=await fetch(ot);if(It.ok){const yt=await It.arrayBuffer();e=await T.decodeAudioData(yt)}}catch(ot){console.error("Failed to load chip sound:",ot)}try{const ot=`${rt}roll.mp3`.replace(/\/+/g,"/"),It=await fetch(ot);if(It.ok){const yt=await It.arrayBuffer();ht(a,await T.decodeAudioData(yt))}}catch(ot){console.error("Failed to load roll sound:",ot)}try{const ot=`${rt}win.mp3`.replace(/\/+/g,"/"),It=await fetch(ot);if(It.ok){const yt=await It.arrayBuffer();m=await T.decodeAudioData(yt)}}catch(ot){console.error("Failed to load win sound:",ot)}try{const ot=`${rt}lose.mp3`.replace(/\/+/g,"/"),It=await fetch(ot);if(It.ok){const yt=await It.arrayBuffer();c=await T.decodeAudioData(yt)}}catch(ot){console.error("Failed to load lose sound:",ot)}}async function u(rt){const{username:ot,password:It,nickname:yt}=rt.detail;console.log("App: handleSignup triggered for",ot),ht(F,"");try{const re=await hQ(ot,It,yt);console.log("App: signupUser successful",re),d(re),ht(ut,"ACCOUNT CREATED SUCCESSFULLY")}catch(re){console.error("App: Signup failed error:",re),ht(F,I(re)),ht(b,!0)}}async function r(rt){const{username:ot,password:It}=rt.detail;console.log("App: handleLogin triggered for",ot),ht(F,"");try{const yt=await uQ(ot,It);console.log("App: loginUser successful",yt),d(yt),ht(ut,"WELCOME BACK, "+(yt.nickname||yt.username).toUpperCase())}catch(yt){console.error("App: Login failed error:",yt),ht(F,I(yt)),ht(b,!0)}}function h(){d({username:"Guest",nickname:"Guest",mode:"guest",balance:300,highestBalance:300,largestWin:0,largestLoss:0,resetCount:0})}function d(rt){ht(R,rt),ht(k,rt.balance),ht(b,!1),ht(Pi,rt.highestBalance||rt.balance||300),ht(zi,rt.largestWin||0),ht(hn,rt.largestLoss||0),ht(k,rt.balance||300),console.log("App: restoring session stats",{sessionHighestBalance:Y(Pi),sessionLargestWin:Y(zi),sessionLargestLoss:Y(hn),balance:Y(k)}),ht(Pt,{4:0,6:0,8:0,10:0}),localStorage.setItem("bubble_craps_session",JSON.stringify({username:rt.username,mode:rt.mode||"user"})),rt.mode!=="guest"&&Tm(rt)}function l(){Y(R)&&Y(R).mode!=="guest"&&g(),cQ(),ht(R,null),ht(b,!0),localStorage.removeItem("bubble_craps_session")}let p;function g(rt=!1){if(!Y(R)||Y(R).mode==="guest")return;const ot={...Y(R),balance:Y(k),highestBalance:Math.max(Y(R).highestBalance||0,Y(Pi)),largestWin:Math.max(Y(R).largestWin||0,Y(zi)),largestLoss:Math.max(Y(R).largestLoss||0,Y(hn))};if(JSON.stringify(Y(R))!==JSON.stringify(ot)){if(ht(R,ot),rt){p&&clearTimeout(p),Tm(Y(R));return}p&&clearTimeout(p),p=setTimeout(()=>{Tm(Y(R))},1e3)}}function x(){Y(R)&&(ht(k,300),ht(Pi,300),ht(zi,0),ht(hn,0),Y(R).mode!=="guest"&&(ht(R,{...Y(R),balance:300,resetCount:(Y(R).resetCount||0)+1}),g(!0)),ht(ut,"BALANCE RESET TO $300"),ht(L,!1))}let y,E,w;async function C(){y=pQ(rt=>{if(ht(P,rt),Y(R)&&Y(R).mode!=="guest"){const ot=rt.find(It=>It.username.toLowerCase()===Y(R).username.toLowerCase());if(ot){let It=!1;ot.highestBalance>Y(Pi)&&(ht(Pi,ot.highestBalance),It=!0),ot.largestWin>Y(zi)&&(ht(zi,ot.largestWin),It=!0),ot.largestLoss>Y(hn)&&(ht(hn,ot.largestLoss),It=!0),It&&g()}}}),w=setInterval(()=>{Y(R)&&Y(R).mode!=="guest"&&Tm(Y(R))},3e4)}ip(async()=>{o(),setTimeout(async()=>{await C(),E=fQ(ot=>{ot&&!Y(R)&&d({...ot,mode:"user"})});const rt=JSON.parse(localStorage.getItem("bubble_craps_session"));rt&&rt.mode==="guest"&&(localStorage.removeItem("bubble_craps_session"),ht(b,!0))},1e3)}),vT(()=>{y&&y(),E&&E(),w&&clearInterval(w)});function A(rt="place"){if(!T||Y(z))return;if(rt==="roll"){if(!Y(a))return;const re=T.createBufferSource();re.buffer=Y(a);const $t=T.createGain();re.connect($t),$t.connect(T.destination),$t.gain.setValueAtTime(.6,T.currentTime),re.start(0);return}if(rt==="win"){if(!m)return;const re=T.createBufferSource();re.buffer=m;const $t=T.createGain();re.connect($t),$t.connect(T.destination),$t.gain.setValueAtTime(.7,T.currentTime),re.start(0);return}if(rt==="7out"){if(!c)return;const re=T.createBufferSource();re.buffer=c;const $t=T.createGain();re.connect($t),$t.connect(T.destination),$t.gain.setValueAtTime(.7,T.currentTime),re.start(0);return}if(e){const re=T.createBufferSource();re.buffer=e;const $t=T.createGain();if(re.connect($t),$t.connect(T.destination),re.playbackRate.value=.9+Math.random()*.2,rt==="select")$t.gain.setValueAtTime(.3,T.currentTime);else if(rt==="win"){$t.gain.setValueAtTime(.7,T.currentTime);const Be=T.createBufferSource();Be.buffer=e,Be.playbackRate.value=1.1+Math.random()*.2,Be.connect($t),Be.start(T.currentTime+.1)}else rt==="loss"?($t.gain.setValueAtTime(.4,T.currentTime),re.playbackRate.value=.7+Math.random()*.1):$t.gain.setValueAtTime(.5,T.currentTime);re.start(0);return}const ot=T.createOscillator(),It=T.createGain();ot.connect(It),It.connect(T.destination);const yt=T.currentTime;rt==="win"?(ot.type="sine",ot.frequency.setValueAtTime(800,yt),ot.frequency.exponentialRampToValueAtTime(1200,yt+.1),It.gain.setValueAtTime(0,yt),It.gain.linearRampToValueAtTime(.2,yt+.02),It.gain.exponentialRampToValueAtTime(.01,yt+.3),ot.start(yt),ot.stop(yt+.3)):rt==="loss"?(ot.type="sawtooth",ot.frequency.setValueAtTime(200,yt),ot.frequency.exponentialRampToValueAtTime(50,yt+.2),It.gain.setValueAtTime(.1,yt),It.gain.exponentialRampToValueAtTime(.01,yt+.2),ot.start(yt),ot.stop(yt+.2)):(ot.type="square",ot.frequency.setValueAtTime(1500,yt),ot.frequency.exponentialRampToValueAtTime(400,yt+.05),It.gain.setValueAtTime(.1,yt),It.gain.exponentialRampToValueAtTime(.01,yt+.05),ot.start(yt),ot.stop(yt+.05))}let M=de(),R=de(null),P=de([]),b=de(!0),F=de("");function I(rt){const ot=rt.code||"",It=rt.message||"";return ot==="auth/user-not-found"||ot==="auth/wrong-password"||It.includes("invalid-credential")?"Invalid username or password. Please try again.":ot==="auth/email-already-in-use"?"This username is already taken. Please choose another.":ot==="auth/network-request-failed"?"Network error. Please check your internet connection and try again.":ot==="auth/weak-password"?"Password is too weak. Please use at least 6 characters.":ot==="auth/too-many-requests"?"Too many failed attempts. Please try again later.":It||"An unexpected error occurred. Please try again."}let L=de(!1),D=de(!1),O=de(!1),z=de(!1),W=de(!1),k=de(300),X=de(5),V=de("hardways"),G=de(0),N=de(!1),H=de();function U(rt){return Object.keys(Y(_)).filter(ot=>ot.startsWith(rt)).reduce((ot,It)=>ot+Y(_)[It],0)}let _=de({}),$=de({}),j=de(!1),Z=de(null),it=de(!1),at=de(!1),q=de(!1),ft=de(!1),vt=de({id:"",amount:0,betType:"",commission:0}),Tt={id:"",amount:0},ut=de("MINIMUM TOTAL BET: $3"),Bt=de([{dice:[6,6],total:12,establishesPoint:!1},{dice:[4,4],total:8,establishesPoint:!1},{dice:[3,5],total:8,establishesPoint:!1},{dice:[2,6],total:8,establishesPoint:!1},{dice:[1,5],total:6,establishesPoint:!1},{dice:[4,2],total:6,establishesPoint:!1},{dice:[5,6],total:11,establishesPoint:!1},{dice:[3,5],total:8,establishesPoint:!1},{dice:[4,4],total:8,establishesPoint:!1},{dice:[2,3],total:5,establishesPoint:!1},{dice:[5,6],total:11,establishesPoint:!1}]),Pt=de({4:0,6:0,8:0,10:0}),et=de(new Set),Q=!0;async function lt(){ht(W,!0);try{const rt=await dQ();if(ht(P,rt),Y(R)&&Y(R).mode!=="guest"){const ot=rt.find(It=>It.username.toLowerCase()===Y(R).username.toLowerCase());ot&&(ht(Pi,Math.max(Y(Pi),ot.highestBalance||0)),ht(zi,Math.max(Y(zi),ot.largestWin||0)),ht(hn,Math.max(Y(hn),ot.largestLoss||0)),ot.balance!==Y(k)&&ht(k,ot.balance),g())}}catch(rt){console.error("App: Manual refresh failed",rt)}finally{ht(W,!1)}}function pt(){ht(F,"")}let Mt=de(!1),Ct=de(!1),Kt=de(0),Ut=de(0),Wt=null,ae=null,zt=de(!1),Ht=null,At=de(""),ne=de(0),jt=de(0),ve=de(0),we=!1,De=de(!1),dt=de(""),Qt=de([]),Ot=de(0);function Vt(rt){if(rt<=0)return;rt>Y(zi)&&ht(zi,rt),g(!0),ht(Kt,0),ht(Mt,!0),ht(Ct,!1),ht(zt,!1),Ht&&clearInterval(Ht),Wt&&clearTimeout(Wt);const ot=m?m.duration*1e3:4500,It=ot*.95,yt=60,re=rt/yt;let $t=0,Be=0;Ht=setInterval(()=>{$t+=re,$t>=rt&&($t=rt,clearInterval(Ht));const bi=Math.floor($t/10);bi>Be&&(Be=bi,se()),ht(Kt,$t)},It/yt),Wt=setTimeout(()=>{ht(Mt,!1)},ot)}function le(rt){if(rt<=0)return;rt>Y(hn)&&ht(hn,rt),g(!0),ht(Ut,0),ht(Ct,!0),ht(Mt,!1),ht(zt,!1),Ht&&clearInterval(Ht),ae&&clearTimeout(ae);const ot=1200,It=60,yt=rt/It;let re=0,$t=0;Ht=setInterval(()=>{re+=yt,re>=rt&&(re=rt,clearInterval(Ht));const Be=Math.floor(re/10);Be>$t&&($t=Be,se()),ht(Ut,re)},ot/It),ae=setTimeout(()=>{ht(Ct,!1)},4e3)}function se(){ht(zt,!0),A("select"),setTimeout(()=>{ht(zt,!1)},100)}function Re(){if(!Y(n)){Y(jt)===0?ht(ut,"NO WINNINGS TO PRESS"):ht(ut,"WINNINGS ALREADY PRESSED");return}let rt=0,ot=0;Y(Qt).forEach(It=>{const yt=yi[It]||0;yt>0&&(ea(_,Y(_)[It]=(Y(_)[It]||0)+yt),ot+=yt,rt++)}),rt>0&&(ht(k,Y(k)-ot),ht(Ot,0),ht(Qt,[]),ht(_,Y(_)),ht(ut,`PRESSED ${rt} BETS WITH $${ot.toFixed(2)}`),A("place"))}let yi={};function ln(){if(Y(Z)===null){ht(ut,"ACROSS ONLY AFTER COME-OUT");return}const ot=[2,3,4,5,6,8,9,10,11,12].filter(yt=>yt!==Y(Z)),It=ot.length*Y(X);if(Y(k)<It){ht(ut,"INSUFFICIENT CREDIT FOR ACROSS");return}ot.forEach(yt=>{const re=`place_${yt}`;ht(k,Y(k)-Y(X)),ea(_,Y(_)[re]=(Y(_)[re]||0)+Y(X))}),ht(_,Y(_)),ht(ut,`PLACED $${Y(X)} ACROSS`)}let Pe=de([1,1]),Pi=de(300),zi=de(0),hn=de(0);ip(()=>{});function Ke(rt){if(!(Y(j)||Y(ft))){if(Y(_)[rt]>0,rt==="passline"&&Y(Z)!==null){ht(ut,"PASS LINE IS LOCKED");return}if(rt==="come"&&Y(Z)===null){ht(ut,"PLACE COME BET AFTER POINT");return}if(["low_rolls","high_rolls","roll_em_all"].includes(rt)&&!Q){ht(ut,"PLACEMENT ONLY AFTER SEVEN");return}if(rt==="take_odds"){if(Y(Z)===null){ht(ut,"POINT NOT SET");return}const ot=Y(_).passline||0;if(ot===0){ht(ut,"PLACE PASS LINE FIRST");return}const It=Y(_).take_odds||0,re={2:2,12:2,3:2,11:2,4:3,10:3,5:4,9:4,6:5,8:5}[Y(Z)]||3,$t=ot*re;if(It+Y(X)>$t){ht(ut,`${re}X ODDS LIMIT ($${$t})`);return}}if(Y(k)<Y(X)){ht(ut,"INSUFFICIENT CREDIT");return}if(rt.startsWith("buy_")||rt.startsWith("lay_")){const ot=Y(X)*.05;if(Y(k)<Y(X)+ot){ht(ut,"INSUFFICIENT CREDIT FOR COMMISSION");return}ht(vt,{id:rt,amount:Y(X),betType:rt.startsWith("buy_")?"Buy":"Lay",commission:ot}),ht(ft,!0);return}ht(k,Y(k)-Y(X)),ea(_,Y(_)[rt]=(Y(_)[rt]||0)+Y(X)),A("place"),ht(_,Y(_))}}function sr(){const{id:rt,amount:ot,commission:It}=Y(vt);ht(k,Y(k)-(ot+It)),ea(_,Y(_)[rt]=(Y(_)[rt]||0)+ot),ht(_,Y(_)),ht(ft,!1),ht(ut,"COMMISSION PAID")}function Ia(){ht(ft,!1),ht(ut,"BET CANCELLED")}function Kr(rt){const ot=rt.detail;if(ht(at,!1),ot>0&&Y(Z)!==null&&Y(_).passline>0){const It=Y(_).passline*ot;Y(k)>=It?(ht(k,Y(k)-It),ea(_,Y(_).take_odds=(Y(_).take_odds||0)+It),ht(_,Y(_)),ht(ut,`${ot}X ODDS APPLIED`)):ht(ut,"INSUFFICIENT CREDIT FOR ODDS")}}function mu(rt){const{targetNumber:ot,type:It,amount:yt,sourceId:re}=rt.detail;ht(q,!1),delete Y(_)[re];const $t=`${It}_${ot}`;ea(_,Y(_)[$t]=(Y(_)[$t]||0)+yt),It==="place"&&Y(_)[$t]>=20?(ea(_,Y(_)[`buy_${ot}`]=(Y(_)[`buy_${ot}`]||0)+Y(_)[$t]),delete Y(_)[$t],ht(ut,`MOVED TO BUY ${ot}`)):ht(ut,`MOVED TO ${It.toUpperCase()} ${ot}`),ht(_,Y(_))}function hs(){if(!(Y(j)||Y(ft))){if(!Y(S)){Y(Z)===null?ht(ut,"PLACE PASS LINE BET"):ht(ut,"NO ACTIVE BETS");return}ht(N,!0),ht(ut,"ROLLING..."),Y(H)?Y(H).roll():setTimeout(()=>{Y(H)&&Y(H).roll()},50)}}function zl(rt){const{dice:ot,total:It}=rt.detail;ht(De,!1);const yt=Y(Z)===null&&It!==7;ht(Pe,ot),ht(Bt,[{dice:ot,total:It,establishesPoint:yt},...Y(Bt).slice(0,14)]),ht(ut,`YOU ROLLED ${It}`),Gf(It),ht(j,!1)}function jr(){Y(j)||Y(ft)||(Y(H)?Y(H).roll():hs())}function Ro(rt){rt.code==="Space"&&(rt.preventDefault(),jr())}const Qr=[2,3,4,5,6,8,9,10,11,12],gu={2:11/2,3:11/4,4:9/5,5:7/5,6:7/6,8:7/6,9:7/5,10:9/5,11:11/4,12:11/2},xu={2:6/1,3:3/1,4:2/1,5:3/2,6:6/5,8:6/5,9:3/2,10:2/1,11:3/1,12:6/1},yu={4:7,6:9,8:9,10:7};function Gf(rt){let ot=0,It=0;const yt={...Y(_)},re=[],$t=[],Be=Y(Z)!==null,bi=we;ht(Qt,[]),yi={},ht(Ot,0);const _e=(Ft,ee)=>{re.push(Ft),Y(Qt).push(Ft),yi[Ft]=(yi[Ft]||0)+ee,ht(Ot,Y(Ot)+ee)};ht(ne,Object.keys(Y(_)).reduce((Ft,ee)=>Ft+(Y(_)[ee]||0),0));const Di=Ft=>!(Y(it)&&(Ft.startsWith("place_")||Ft.startsWith("buy_")||Ft.startsWith("num_")||Ft.startsWith("hard_")||Ft==="take_odds")||Y($)[Ft]==="off"||Ft.startsWith("num_")&&Y($)[Ft]==="off"||Y(Z)===null&&Ft.startsWith("hard_")&&Y($)[Ft]!=="on");if([4,6,8,10].forEach(Ft=>ea(Pt,Y(Pt)[Ft]++)),Y(Pe)[0]===Y(Pe)[1]&&[4,6,8,10].includes(rt)&&ea(Pt,Y(Pt)[rt]=0),ht(Pt,Y(Pt)),ht(At,""),rt!==7&&(Y(et).add(rt),ht(et,Y(et)),Q=!1),yt.field)if([2,3,4,9,10,11,12].includes(rt)){let Ft=rt===2||rt===12?2:1;const ee=yt.field*Ft;ot+=yt.field+ee,It+=ee,_e("field",ee),ht(At,Y(At)+`Field $${ee.toFixed(2)} WIN. `),delete Y(_).field}else $t.push("field"),ht(At,Y(At)+`Field $${yt.field.toFixed(2)} LOSS. `),delete Y(_).field;if(yt.any_7){if(rt===7){const Ft=yt.any_7*4;ot+=yt.any_7+Ft,It+=Ft,_e("any_7",Ft),ht(At,Y(At)+`Any 7 $${Ft.toFixed(2)} WIN. `)}else $t.push("any_7"),ht(At,Y(At)+`Any 7 $${yt.any_7.toFixed(2)} LOSS. `);delete Y(_).any_7}if(yt.any_craps||yt.bet_c){const Ft=(yt.any_craps||0)+(yt.bet_c||0);if([2,3,12].includes(rt)){const ee=Ft*7;ot+=Ft+ee,It+=ee,yt.any_craps&&_e("any_craps",yt.any_craps*7),yt.bet_c&&_e("bet_c",yt.bet_c*7),ht(At,Y(At)+`Craps $${ee.toFixed(2)} WIN. `)}else yt.any_craps&&$t.push("any_craps"),yt.bet_c&&$t.push("bet_c"),ht(At,Y(At)+`Craps $${Ft.toFixed(2)} LOSS. `);delete Y(_).any_craps,delete Y(_).bet_c}if(yt.bet_e||yt.horn_11){const Ft=(yt.bet_e||0)+(yt.horn_11||0);if(rt===11){const ee=Ft*15;ot+=Ft+ee,It+=ee,yt.bet_e&&_e("bet_e",yt.bet_e*15),yt.horn_11&&_e("horn_11",yt.horn_11*15),ht(At,Y(At)+`Yo-11 $${ee.toFixed(2)} WIN. `)}else yt.bet_e&&$t.push("bet_e"),yt.horn_11&&$t.push("horn_11"),ht(At,Y(At)+`Yo-11 $${Ft.toFixed(2)} LOSS. `);delete Y(_).bet_e,delete Y(_).horn_11}if(yt.horn_bet){const Ft=yt.horn_bet/4;if(rt===2||rt===12||rt===3||rt===11){let ee=0;rt===2||rt===12?ee=Ft*30-3*Ft:(rt===3||rt===11)&&(ee=Ft*15-3*Ft),ot+=Ft+ee,It+=ee,_e("horn_bet",ee),ht(At,Y(At)+`Horn $${ee.toFixed(2)} WIN. `)}else $t.push("horn_bet"),ht(At,Y(At)+`Horn $${yt.horn_bet.toFixed(2)} LOSS. `);delete Y(_).horn_bet}if(yt.bet_ce){if([2,3,12,11].includes(rt)){let Ft=0;[2,3,12].includes(rt)?Ft=yt.bet_ce*3:rt===11&&(Ft=yt.bet_ce*7),ot+=yt.bet_ce+Ft,It+=Ft,_e("bet_ce",Ft),ht(At,Y(At)+`C&E $${Ft.toFixed(2)} WIN. `)}else $t.push("bet_ce"),ht(At,Y(At)+`C&E $${yt.bet_ce.toFixed(2)} LOSS. `);delete Y(_).bet_ce}if(["horn_2","horn_3","horn_12"].forEach(Ft=>{if(yt[Ft]){const ee=parseInt(Ft.split("_")[1]);if(rt===ee){const Ae=yt[Ft]*(ee===2||ee===12?30:15);ot+=yt[Ft]+Ae,It+=Ae,_e(Ft,Ae),ht(At,Y(At)+`Horn ${ee} $${Ae.toFixed(2)} WIN. `)}else $t.push(Ft),ht(At,Y(At)+`Horn ${ee} $${yt[Ft].toFixed(2)} LOSS. `);delete Y(_)[Ft]}}),Object.keys(yt).forEach(Ft=>{if(Ft.startsWith("hop_")){const ee=Ft.split("_"),Ae=parseInt(ee[1]),Zt=parseInt(ee[2]),Se=yt[Ft];if(Y(Pe)[0]===Ae&&Y(Pe)[1]===Zt||Y(Pe)[0]===Zt&&Y(Pe)[1]===Ae){const ke=Se*(Ae===Zt?30:15);ot+=Se+ke,It+=ke,_e(Ft,ke),ht(At,Y(At)+`Hop ${Ae}/${Zt} $${ke.toFixed(2)} WIN. `)}else $t.push(Ft),ht(At,Y(At)+`Hop ${Ae}/${Zt} $${Se.toFixed(2)} LOSS. `);delete Y(_)[Ft]}}),[4,6,8,10].forEach(Ft=>{const ee=`hard_${Ft}`;if(yt[ee]&&Di(ee))if(rt===Ft&&Y(Pe)[0]===Y(Pe)[1]){const Ae=yt[ee]*yu[Ft];ot+=yt[ee]+Ae,It+=Ae,_e(ee,Ae),ht(At,Y(At)+`Hard ${Ft} $${Ae.toFixed(2)} WIN. `),delete Y(_)[ee]}else(rt===7||rt===Ft&&Y(Pe)[0]!==Y(Pe)[1])&&($t.push(ee),ht(At,Y(At)+`Hard ${Ft} $${yt[ee].toFixed(2)} LOSS. `),delete Y(_)[ee])}),Y(Z)===null)if(rt===7){if(yt.passline){const Ft=yt.passline;ot+=yt.passline+Ft,It+=Ft,_e("passline",Ft),ht(At,Y(At)+`Pass Line $${Ft.toFixed(2)} WIN. `)}Object.keys(Y(_)).forEach(Ft=>{Ft!=="passline"&&($t.push(Ft),yt[Ft]&&ht(At,Y(At)+`${Ft.replace("_"," ")} $${yt[Ft].toFixed(2)} LOSS. `)),delete Y(_)[Ft]}),ht(it,!0)}else ht(Z,rt),ht(ut,`POINT IS ${Y(Z)}`),ht(At,Y(At)+`Point set to ${Y(Z)}. `),ht(it,!1),Y(_).take_odds&&(ht(k,Y(k)+Y(_).take_odds),delete Y(_).take_odds),Y(_).passline>0&&ht(at,!0);else{if(yt.come)if(rt===7){const Ft=yt.come;ot+=yt.come+Ft,It+=Ft,re.push("come"),ht(At,Y(At)+`Come $${Ft.toFixed(2)} WIN. `),delete Y(_).come}else{const Ft=`come_${rt}`;ea(_,Y(_)[Ft]=(Y(_)[Ft]||0)+yt.come),delete Y(_).come,ht(At,Y(At)+`Come moved to ${rt}. `)}if(Qr.forEach(Ft=>{const ee=`come_${Ft}`;if(yt[ee])if(rt===Ft){const Ae=yt[ee];ot+=yt[ee]+Ae,It+=Ae,re.push(ee),ht(At,Y(At)+`Come ${Ft} $${Ae.toFixed(2)} WIN. `),delete Y(_)[ee]}else rt===7&&($t.push(ee),ht(At,Y(At)+`Come ${Ft} $${yt[ee].toFixed(2)} LOSS. `),delete Y(_)[ee])}),rt===Y(Z)){if(yt.passline){const Ft=yt.passline;ot+=yt.passline+Ft,It+=Ft,_e("passline",Ft),ht(At,Y(At)+`Pass Line $${Ft.toFixed(2)} WIN. `)}if(yt.take_odds&&Di("take_odds")){const Ft=yt.take_odds*xu[Y(Z)];ot+=yt.take_odds+Ft,It+=Ft,_e("take_odds",Ft),ht(At,Y(At)+`Odds $${Ft.toFixed(2)} WIN. `)}delete Y(_).passline,delete Y(_).take_odds,ht(Z,null),ht(ut,"WINNER! PASS LINE PAYS")}else rt===7&&(yt.passline&&($t.push("passline"),ht(At,Y(At)+`Pass Line $${yt.passline.toFixed(2)} LOSS. `)),yt.take_odds&&($t.push("take_odds"),ht(At,Y(At)+`Odds $${yt.take_odds.toFixed(2)} LOSS. `)),Object.keys(Y(_)).forEach(Ft=>{Ft!=="passline"&&Ft!=="take_odds"&&($t.push(Ft),yt[Ft]&&ht(At,Y(At)+`${Ft.replace("_"," ")} $${yt[Ft].toFixed(2)} LOSS. `)),delete Y(_)[Ft]}),ht(Z,null),ht(ut,"SEVEN OUT"),ht(it,!0),we=!0)}if(Qr.forEach(Ft=>{const ee=`place_${Ft}`;if(yt[ee]&&Di(ee)&&rt===Ft){const Zt=Math.floor(yt[ee]*gu[Ft]);ot+=Zt,It+=Zt,_e(ee,Zt),ht(At,Y(At)+`Place ${Ft} $${Zt.toFixed(2)} WIN. `)}const Ae=`buy_${Ft}`;if(yt[Ae]&&Di(Ae)&&rt===Ft){const Zt=Math.floor(yt[Ae]*xu[Ft]);ot+=Zt,It+=Zt,_e(Ae,Zt),ht(At,Y(At)+`Buy ${Ft} $${Zt.toFixed(2)} WIN. `)}}),rt===7)ht(et,new Set),Q=!0;else{const Ft=[2,3,4,5,6],ee=[8,9,10,11,12],Ae=[...Ft,...ee];if(Y(_).low_rolls&&Ft.every(Zt=>Y(et).has(Zt))){const Zt=Y(_).low_rolls*30;ot+=Y(_).low_rolls+Zt,It+=Zt,_e("low_rolls",Zt),delete Y(_).low_rolls,ht(ut,"LUCKY ROLLER LOW WIN!"),ht(At,Y(At)+`Lucky Low $${Zt.toFixed(2)} WIN. `)}if(Y(_).high_rolls&&ee.every(Zt=>Y(et).has(Zt))){const Zt=Y(_).high_rolls*30;ot+=Y(_).high_rolls+Zt,It+=Zt,_e("high_rolls",Zt),delete Y(_).high_rolls,ht(ut,"LUCKY ROLLER HIGH WIN!"),ht(At,Y(At)+`Lucky High $${Zt.toFixed(2)} WIN. `)}if(Y(_).roll_em_all&&Ae.every(Zt=>Y(et).has(Zt))){const Zt=Y(_).roll_em_all*155;ot+=Y(_).roll_em_all+Zt,It+=Zt,_e("roll_em_all",Zt),delete Y(_).roll_em_all,ht(ut,"ROLL 'EM ALL WIN!"),ht(At,Y(At)+`Roll 'Em All $${Zt.toFixed(2)} WIN. `)}}ht(jt,ot);const cn=$t.reduce((Ft,ee)=>Ft+(yt[ee]||0),0),Jn=It-cn;bi&&!Be?(ht(ve,Jn),we=!1):ht(ve,Y(ve)+Jn),rt===7&&Be&&(ht(De,!0),ht(dt,`SHOOTER SEVEN-OUT! ROUND P/L: ${Y(ve)>=0?"+":""}$${Math.abs(Y(ve)).toFixed(2)}`)),ht(ne,Number(Y(ne))),ht(jt,Number(Y(jt))),ht(ve,Number(Y(ve))),console.log("Finalized Stats:",{lastRollTotalBet:Y(ne),lastRollWinnings:Y(jt),rollerTally:Y(ve),netRoll:Jn});try{if(Y(M)){const Ft=Ae=>{const Zt=document.querySelector(`[data-bet-id="${Ae}"]`);if(Zt){const Se=Zt.getBoundingClientRect();return{x:Se.left+Se.width/2,y:Se.top+Se.height/2}}return null},ee=$t.reduce((Ae,Zt)=>Ae+(yt[Zt]||0),0);if(rt===7){const Ae=$t.map(Ft).filter(Zt=>Zt!==null);if(Ae.length>0&&(Y(M).triggerLossAnimation(Ae),ee>0&&(A("7out"),le(ee))),re.length>0){const Zt=re.map(Ft).filter(Se=>Se!==null);Zt.length>0&&(Y(M).triggerWinAnimation(Zt),A("win"),Vt(ot))}}else{if(re.length>0){const Ae=re.map(Ft).filter(Zt=>Zt!==null);Ae.length>0&&(Y(M).triggerWinAnimation(Ae),A("win"),Vt(ot))}if($t.length>0){const Ae=$t.map(Ft).filter(Zt=>Zt!==null);Ae.length>0&&(Y(M).triggerLossAnimation(Ae),ee>0&&(A("loss"),le(ee)))}}}}catch(Ft){console.error("Error in animation/sound processing:",Ft)}ht(k,Y(k)+ot),ht(_,Y(_)),ot>0&&ht(ut,`WINNER! $${ot.toFixed(2)}`),g(!0)}function He(rt,ot){if(!(Y(j)||Y(ft))){if(ot&&ot.preventDefault(),rt==="passline"&&Y(Z)!==null){ht(ut,"PASS LINE IS A CONTRACT BET");return}Y(_)[rt]&&(ht(k,Y(k)+Y(_)[rt]),delete Y(_)[rt],ht(_,Y(_)),ht(ut,"BET REMOVED"),A("remove"))}}function Tu(){if(Y(j)||Y(ft))return;const rt={};let ot=0;Object.keys(Y(_)).forEach(It=>{It==="passline"&&Y(Z)!==null?rt[It]=Y(_)[It]:ot+=Y(_)[It]}),ht(k,Y(k)+ot),ht(_,rt),Y(_).passline&&Y(Z)!==null&&ht(ut,"CONTRACT BETS REMAINED")}const nt={1:[4],2:[0,8],3:[0,4,8],4:[0,2,6,8],5:[0,2,4,6,8],6:[0,2,3,5,6,8]};Hn(()=>(Y(P),Y(R)),()=>{ht(i,[...Y(P)].filter(rt=>rt.username!=="Guest").map(rt=>({...rt,isYou:Y(R)&&rt.username.toLowerCase()===Y(R).username.toLowerCase()})).sort((rt,ot)=>(ot.balance||0)-(rt.balance||0)))}),Hn(()=>(Y(k),Y(Pi)),()=>{Y(k)>Y(Pi)&&ht(Pi,Y(k))}),Hn(()=>(Y(R),Y(k),Y(Pi),Y(zi),Y(hn)),()=>{Y(R)&&Y(R).mode!=="guest"&&(Y(k),Y(Pi),Y(zi),Y(hn),g())}),Hn(()=>(Y(ne),Y(jt),Y(ve)),()=>{console.log("Stats Update:",{lastRollTotalBet:Y(ne),lastRollWinnings:Y(jt),rollerTally:Y(ve)})}),Hn(()=>Y(G),()=>{Y(G)===2&&(ht(it,!0),ht(G,0))}),Hn(()=>(Y(Ot),Y(Qt)),()=>{ht(n,Y(Ot)>0&&Y(Qt).length>0)}),Hn(()=>(Y(_),Y(it),Y($),Y(Z)),()=>{ht(v,Object.entries(Y(_)).reduce((rt,[ot,It])=>{let yt=!0;return Y(it)?(ot.startsWith("place_")||ot.startsWith("buy_")||ot.startsWith("hard_")||ot==="take_odds")&&(yt=!1):(Y($)[ot]==="off"&&(yt=!1),Y(Z)===null&&ot.startsWith("hard_")&&Y($)[ot]!=="on"&&(yt=!1)),yt?rt+It:rt},0))}),Hn(()=>(Y(Z),Y(v),Y(_)),()=>{ht(S,Y(Z)!==null?Y(v)>0||Object.values(Y(_)).some(rt=>rt>0):Y(_).passline>0)}),Hn(()=>Y(_),()=>{ht(s,Object.values(Y(_)).reduce((rt,ot)=>rt+ot,0))}),ru(),Sr();var mt=eZ();qe("keydown",oy,Ro);var bt=ct(mt);Qm(yO(bt,{get roll(){return Y(Pe)},$$legacy:!0}),rt=>ht(M,rt),()=>Y(M));var Lt=gt(bt,2);{var xt=rt=>{YD(rt,{get errorMessage(){return Y(F)},$$events:{login:r,signup:u,guest:h,toggleMode:pt}})};Ie(Lt,rt=>{Y(b)&&rt(xt)})}var Yt=gt(Lt,2);{var oe=rt=>{var ot=vQ(),It=ct(ot),yt=ct(It),re=ct(yt),$t=ct(re),Be=ct($t);o2(Be,{size:24});var bi=gt(re,2),_e=ct(bi);Hg(_e,{size:20});var Di=gt(yt,2),cn=ct(Di),Jn=ct(cn),Ft=ct(Jn),ee=ct(Ft);{var Ae=Ru=>{BD(Ru,{size:20})},Zt=Ru=>{ND(Ru,{size:20})};Ie(ee,Ru=>{Y(z)?Ru(Ae):Ru(Zt,!1)})}var Se=gt(Ft,2),ke=gt(ct(Se),2),Bs=ct(ke),cs=gt(Jn,2),Mr=ct(cs),mi=gt(cn,2),qf=ct(mi),Yl=ct(qf),LL=ct(Yl);Ud(LL,{size:20});var FL=gt(qf,2),WS=gt(mi,2),DL=ct(WS),OL=ct(DL);eR(OL,{size:20}),li(()=>{Qe(Ft,1,`p-2 rounded-lg ${Y(z)?"bg-red-500/20 text-red-400":"bg-emerald-500/20 text-emerald-400"}`,"svelte-1n46o8q"),Me(Bs,Y(z)?"Muted":"Active"),Qe(cs,1,`w-12 h-6 rounded-full transition-colors relative ${Y(z)?"bg-red-500/40":"bg-emerald-500/40"} border border-white/10`,"svelte-1n46o8q"),Qe(Mr,1,`absolute top-1 w-4 h-4 rounded-full bg-white shadow-lg transition-all ${Y(z)?"left-1":"left-7"}`,"svelte-1n46o8q")}),qe("click",bi,()=>ht(L,!1)),qe("click",cs,()=>ht(z,!Y(z))),qe("click",FL,x),qe("click",WS,()=>{ht(L,!1),ht(O,!0)}),_t(rt,ot)};Ie(Yt,rt=>{Y(L)&&rt(oe)})}var ue=gt(Yt,2);{var fe=rt=>{Uz(rt,{get users(){return Y(i)},get loading(){return Y(W)},$$events:{refresh:lt,close:()=>ht(D,!1)}})};Ie(ue,rt=>{Y(D)&&rt(fe)})}var Ce=gt(ue,2);{var be=rt=>{_z(rt,{$$events:{close:()=>ht(O,!1)}})};Ie(Ce,rt=>{Y(O)&&rt(be)})}var Ee=gt(Ce,2);{var Xe=rt=>{var ot=mQ(),It=ct(ot),yt=ct(It),re=ct(yt),$t=ct(re),Be=ct($t),bi=gt($t,4),_e=ct(bi);li((Di,cn)=>{Qe(It,1,`relative flex items-center justify-center scale-[1.5] animate-bounce ${Y(zt)?"scale-[1.7] brightness-150":""} transition-all duration-75`,"svelte-1n46o8q"),Me(Be,`$${Di??""}`),Me(_e,cn)},[()=>(Y(Kt),kt(()=>Math.floor(Y(Kt)))),()=>(Y(Kt),kt(()=>(Y(Kt)%1).toFixed(2).split(".")[1]))]),_t(rt,ot)};Ie(Ee,rt=>{Y(Mt)&&rt(Xe)})}var ni=gt(Ee,2);{var fi=rt=>{var ot=gQ(),It=ct(ot),yt=ct(It),re=ct(yt),$t=ct(re),Be=ct($t),bi=gt($t,4),_e=ct(bi);li((Di,cn)=>{Qe(It,1,`relative flex items-center justify-center scale-[1.5] animate-bounce ${Y(zt)?"scale-[1.7] brightness-150":""} transition-all duration-75`,"svelte-1n46o8q"),Me(Be,`-$${Di??""}`),Me(_e,cn)},[()=>(Y(Ut),kt(()=>Math.floor(Y(Ut)))),()=>(Y(Ut),kt(()=>(Y(Ut)%1).toFixed(2).split(".")[1]))]),_t(rt,ot)};Ie(ni,rt=>{Y(Ct)&&rt(fi)})}var Je=gt(ni,2);{var ze=rt=>{{let ot=pn(()=>(Y(_),kt(()=>Y(_).passline||0)));wO(rt,{get point(){return Y(Z)},get passlineAmount(){return Y(ot)},$$events:{select:Kr}})}};Ie(Je,rt=>{Y(at)&&rt(ze)})}var xe=gt(Je,2);{var ki=rt=>{MO(rt,{get currentPoint(){return Y(Z)},get betToMove(){return Tt},$$events:{move:mu,close:()=>ht(q,!1)}})};Ie(xe,rt=>{Y(q)&&rt(ki)})}var ye=gt(xe,2);{var In=rt=>{PO(rt,{get amount(){return Y(vt),kt(()=>Y(vt).amount)},get betType(){return Y(vt),kt(()=>Y(vt).betType)},get commission(){return Y(vt),kt(()=>Y(vt).commission)},$$events:{confirm:sr,decline:Ia}})};Ie(ye,rt=>{Y(ft)&&rt(In)})}var us=gt(ye,2),Zi=gt(ct(us),2);{var La=rt=>{var ot=yQ(),It=gt(ct(ot),2),yt=ct(It),re=gt(It,2);{var $t=Be=>{var bi=xQ();qe("click",bi,l),_t(Be,bi)};Ie(re,Be=>{Y(R),kt(()=>Y(R).mode!=="guest")&&Be($t)})}li(()=>Me(yt,(Y(R),kt(()=>Y(R).nickname||Y(R).username)))),_t(rt,ot)};Ie(Zi,rt=>{Y(R)&&rt(La)})}var Ti=gt(Zi,2),_n=ct(Ti),Qn=ct(_n),Tn=gt(ct(Qn),2),En=ct(Tn);{var wr=rt=>{var ot=TQ();_t(rt,ot)},Wn=rt=>{var ot=Ui(),It=xi(ot);{var yt=$t=>{var Be=EQ();_t($t,Be)},re=$t=>{var Be=SQ();_t($t,Be)};Ie(It,$t=>{Y(Z)?$t(yt):$t(re,!1)},!0)}_t(rt,ot)};Ie(En,rt=>{Y(j)?rt(wr):rt(Wn,!1)})}var _f=gt(En,2),cv=ct(_f),Eu=gt(_n,2),fv=ct(Eu);my(fv,{size:16,class:"text-yellow-500 group-hover:scale-110 transition-transform"});var Wf=gt(Eu,2),Po=ct(Wf);o2(Po,{size:18});var I0=gt(us,2),dv=ct(I0),pv=ct(dv),Ar=ct(pv),vv=ct(Ar),Hf=gt(ct(vv),2);sn(Hf,4,()=>[2,3,4,5,6],nn,(rt,ot)=>{var It=wQ(),yt=ct(It);li(re=>{Qe(It,1,`w-7 h-7 rounded-full ${re??""} text-xs flex items-center justify-center font-black transition-all duration-300 border border-emerald-400/20`,"svelte-1n46o8q"),Me(yt,ot)},[()=>(Y(et),kt(()=>Y(et).has(ot)?"bg-yellow-400 text-black shadow-[0_0_12px_rgba(250,204,21,0.6)]":"bg-emerald-800/60 text-emerald-400/40"))]),_t(rt,It)});var Gl=gt(vv,2),mv=ct(Gl),bo=ct(mv),_l=gt(bo,2),gv=gt(Gl,2),Xf=gt(ct(gv),2);sn(Xf,4,()=>[8,9,10,11,12],nn,(rt,ot)=>{var It=AQ(),yt=ct(It);li(re=>{Qe(It,1,`w-7 h-7 rounded-full ${re??""} text-xs flex items-center justify-center font-black transition-all duration-300 border border-emerald-400/20`,"svelte-1n46o8q"),Me(yt,ot)},[()=>(Y(et),kt(()=>Y(et).has(ot)?"bg-yellow-400 text-black shadow-[0_0_12px_rgba(250,204,21,0.6)]":"bg-emerald-800/60 text-emerald-400/40"))]),_t(rt,It)});var Gi=gt(Ar,2),xv=ct(Gi);di(xv,{id:"low_rolls",className:"flex-1 flex flex-col items-center justify-center p-0.5 hover:bg-white/5 transition-all relative overflow-hidden",get amount(){return Y(_),kt(()=>Y(_).low_rolls)},$$events:{click:()=>Ke("low_rolls"),contextmenu:rt=>He("low_rolls",rt)},children:(rt,ot)=>{var It=CQ();_t(rt,It)},$$slots:{default:!0}});var yv=gt(xv,2);di(yv,{id:"roll_em_all",className:"flex-[1.2] flex flex-col items-center justify-center p-0.5 hover:bg-white/5 transition-all relative overflow-hidden",get amount(){return Y(_),kt(()=>Y(_).roll_em_all)},$$events:{click:()=>Ke("roll_em_all"),contextmenu:rt=>He("roll_em_all",rt)},children:(rt,ot)=>{var It=MQ();_t(rt,It)},$$slots:{default:!0}});var Tv=gt(yv,2);di(Tv,{id:"high_rolls",className:"flex-1 flex flex-col items-center justify-center p-0.5 hover:bg-white/5 transition-all relative overflow-hidden",get amount(){return Y(_),kt(()=>Y(_).high_rolls)},$$events:{click:()=>Ke("high_rolls"),contextmenu:rt=>He("high_rolls",rt)},children:(rt,ot)=>{var It=RQ();_t(rt,It)},$$slots:{default:!0}});var kf=gt(pv,2);{let rt=pn(()=>(Y(a),kt(()=>Y(a)?Y(a).duration:3.5)));Qm(Iz(kf,{show:!0,get rollDuration(){return Y(rt)},$$events:{rollStart:()=>{ht(j,!0),A("roll")},rolled:zl,close:()=>{ht(N,!1),ht(j,!1)}},$$legacy:!0}),ot=>ht(H,ot),()=>Y(H))}var Ev=gt(kf,2),Wl=gt(ct(Ev),2),Cr=ct(Wl),Yf=ct(Cr),Sv=ct(Yf),Hl=gt(ct(Sv),2),wv=ct(Hl),Su=gt(Sv,2),wu=gt(ct(Su),2),Av=ct(wu),Au=gt(Su,2),Cv=gt(ct(Au),2),Mv=ct(Cv),Xl=gt(Yf,2),Rv=gt(ct(Xl),2),Pv=ct(Rv),$f=gt(Cr,2),Kf=ct($f),bv=gt(ct(Kf),2),Cu=ct(bv),jf=gt(Wl,2),Iv=ct(jf),Zr=ct(Iv);{var Lv=rt=>{var ot=PQ();_t(rt,ot)},Fv=rt=>{var ot=Ui(),It=xi(ot);{var yt=$t=>{var Be=bQ();_t($t,Be)},re=$t=>{var Be=Ui(),bi=xi(Be);{var _e=Di=>{var cn=IQ();_t(Di,cn)};Ie(bi,Di=>{Y(At),kt(()=>Y(At).includes("WIN"))&&Di(_e)},!0)}_t($t,Be)};Ie(It,$t=>{Y(De)?$t(yt):$t(re,!1)},!0)}_t(rt,ot)};Ie(Zr,rt=>{Y(j)?rt(Lv):rt(Fv,!1)})}var Qf=gt(Zr,2),Dv=ct(Qf),Io=gt(dv,2),Zn=ct(Io),Zf=ct(Zn),Jf=ct(Zf),Fa=ct(Jf);{var B=rt=>{var ot=LQ();_t(rt,ot)};Ie(Fa,rt=>{Y(V)==="hardways"&&rt(B)})}var K=gt(Fa,2),J=gt(ct(K),2),st=ct(J),wt=gt(Jf,2),Dt=ct(wt);{var te=rt=>{var ot=FQ();_t(rt,ot)};Ie(Dt,rt=>{Y(V)==="hops"&&rt(te)})}var Ne=gt(Dt,2),en=gt(ct(Ne),2),Ei=ct(en),un=gt(Zf,2),rr=ct(un);{var Da=rt=>{var ot=BQ(),It=gt(ct(ot),2),yt=ct(It),re=ct(yt);di(re,{id:"hard_6",type:"dice",dice:[3,3],label:"Hard 6",payout:"9:1",get hardwayCounter(){return Y(Pt),kt(()=>Y(Pt)[6])},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),kt(()=>Y(_).hard_6)},get status(){return Y($),kt(()=>Y($).hard_6)},$$events:{click:()=>Ke("hard_6"),contextmenu:mi=>He("hard_6",mi)}});var $t=gt(re,2);di($t,{id:"hard_8",type:"dice",dice:[4,4],label:"Hard 8",payout:"9:1",get hardwayCounter(){return Y(Pt),kt(()=>Y(Pt)[8])},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),kt(()=>Y(_).hard_8)},get status(){return Y($),kt(()=>Y($).hard_8)},$$events:{click:()=>Ke("hard_8"),contextmenu:mi=>He("hard_8",mi)}});var Be=gt(yt,2),bi=ct(Be);di(bi,{id:"hard_10",type:"dice",dice:[5,5],label:"Hard 10",payout:"7:1",get hardwayCounter(){return Y(Pt),kt(()=>Y(Pt)[10])},reverse:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),kt(()=>Y(_).hard_10)},get status(){return Y($),kt(()=>Y($).hard_10)},$$events:{click:()=>Ke("hard_10"),contextmenu:mi=>He("hard_10",mi)}});var _e=gt(bi,2);di(_e,{id:"hard_4",type:"dice",dice:[2,2],label:"Hard 4",payout:"7:1",get hardwayCounter(){return Y(Pt),kt(()=>Y(Pt)[4])},reverse:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),kt(()=>Y(_).hard_4)},get status(){return Y($),kt(()=>Y($).hard_4)},$$events:{click:()=>Ke("hard_4"),contextmenu:mi=>He("hard_4",mi)}});var Di=gt(It,2),cn=gt(ct(Di),2),Jn=ct(cn);di(Jn,{id:"any_7",className:"flex-[0_0_15%] min-h-[40px] bg-[#0d2b18] border border-white/20 shadow-[inset_0_0_20px_rgba(0,0,0,0.5)] rounded-xl flex flex-row items-center justify-center px-4 relative overflow-hidden",get amount(){return Y(_),kt(()=>Y(_).any_7)},$$events:{click:()=>Ke("any_7"),contextmenu:mi=>He("any_7",mi)},children:(mi,qf)=>{var Yl=DQ();_t(mi,Yl)},$$slots:{default:!0}});var Ft=gt(Jn,2),ee=ct(Ft);di(ee,{id:"horn_2",type:"dice",dice:[1,1],payout:"30 TO 1",className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(_),kt(()=>Y(_).horn_2)},$$events:{click:()=>Ke("horn_2"),contextmenu:mi=>He("horn_2",mi)}});var Ae=gt(ee,2);di(Ae,{id:"horn_3",type:"dice",dice:[1,2],payout:"15 TO 1",reverse:!0,className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(_),kt(()=>Y(_).horn_3)},$$events:{click:()=>Ke("horn_3"),contextmenu:mi=>He("horn_3",mi)}});var Zt=gt(Ae,2);di(Zt,{id:"horn_12",type:"dice",dice:[6,6],payout:"30 TO 1",className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(_),kt(()=>Y(_).horn_12)},$$events:{click:()=>Ke("horn_12"),contextmenu:mi=>He("horn_12",mi)}});var Se=gt(Zt,2);di(Se,{id:"horn_11",type:"dice",dice:[5,6],payout:"15 TO 1",reverse:!0,className:"bg-[#1a4d2e] border-emerald-400/20 hover:bg-emerald-700/40 transition-colors",get amount(){return Y(_),kt(()=>Y(_).horn_11)},$$events:{click:()=>Ke("horn_11"),contextmenu:mi=>He("horn_11",mi)}});var ke=gt(Se,2),Bs=ct(ke);di(Bs,{id:"horn_bet",className:"bg-[#1a4d2e] border border-white/30 px-3 py-0.5 rounded-lg shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] pointer-events-auto",get amount(){return Y(_),kt(()=>Y(_).horn_bet)},$$events:{click:()=>Ke("horn_bet"),contextmenu:mi=>He("horn_bet",mi)},children:(mi,qf)=>{var Yl=OQ();_t(mi,Yl)},$$slots:{default:!0}});var cs=gt(Ft,2),Mr=ct(cs);di(Mr,{id:"any_craps",className:"flex-1 bg-[#0d2b18] border border-white/20 shadow-[inset_0_0_20px_rgba(0,0,0,0.5)] rounded-xl flex flex-row items-center justify-center px-4 relative overflow-hidden",get amount(){return Y(_),kt(()=>Y(_).any_craps)},$$events:{click:()=>Ke("any_craps"),contextmenu:mi=>He("any_craps",mi)},children:(mi,qf)=>{var Yl=NQ();_t(mi,Yl)},$$slots:{default:!0}}),_t(rt,ot)},Jr=rt=>{var ot=UQ(),It=ct(ot),yt=gt(ct(It),2),re=ct(yt);di(re,{id:"hop_2_2",type:"dice",dice:[2,2],label:"2-2",className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),kt(()=>Y(_).hop_2_2)},$$events:{click:()=>Ke("hop_2_2"),contextmenu:()=>He("hop_2_2")}});var $t=gt(re,2);di($t,{id:"hop_4_4",type:"dice",dice:[4,4],label:"4-4",reverse:!0,className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),kt(()=>Y(_).hop_4_4)},$$events:{click:()=>Ke("hop_4_4"),contextmenu:()=>He("hop_4_4")}});var Be=gt($t,2);di(Be,{id:"hop_3_3",type:"dice",dice:[3,3],label:"3-3",className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),kt(()=>Y(_).hop_3_3)},$$events:{click:()=>Ke("hop_3_3"),contextmenu:()=>He("hop_3_3")}});var bi=gt(Be,2);di(bi,{id:"hop_5_5",type:"dice",dice:[5,5],label:"5-5",reverse:!0,className:"bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),kt(()=>Y(_).hop_5_5)},$$events:{click:()=>Ke("hop_5_5"),contextmenu:()=>He("hop_5_5")}});var _e=gt(It,2),Di=gt(ct(_e),2),cn=ct(Di);sn(cn,4,()=>[[1,3,"1-3"],[1,4,"1-4"],[2,3,"2-3"],[2,4,"2-4"],[1,5,"1-5"]],nn,(ee,Ae)=>{var Zt=Sd(()=>Ed(Ae,3));let Se=()=>Y(Zt)[0],ke=()=>Y(Zt)[1],Bs=()=>Y(Zt)[2];{let cs=pn(()=>`hop_${Se()}_${ke()}`),Mr=pn(()=>[Se(),ke()]);di(ee,{get id(){return Y(cs)},type:"dice",get dice(){return Y(Mr)},get label(){return Bs()},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),Se(),ke(),kt(()=>Y(_)[`hop_${Se()}_${ke()}`])},$$events:{click:()=>Ke(`hop_${Se()}_${ke()}`),contextmenu:()=>He(`hop_${Se()}_${ke()}`)}})}});var Jn=gt(cn,2);sn(Jn,4,()=>[[1,6,"1-6"],[2,5,"2-5"],[3,4,"3-4"]],nn,(ee,Ae)=>{var Zt=Sd(()=>Ed(Ae,3));let Se=()=>Y(Zt)[0],ke=()=>Y(Zt)[1],Bs=()=>Y(Zt)[2];{let cs=pn(()=>`hop_${Se()}_${ke()}`),Mr=pn(()=>[Se(),ke()]);di(ee,{get id(){return Y(cs)},type:"dice",get dice(){return Y(Mr)},get label(){return Bs()},className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors flex-col gap-0 px-0",get amount(){return Y(_),Se(),ke(),kt(()=>Y(_)[`hop_${Se()}_${ke()}`])},$$events:{click:()=>Ke(`hop_${Se()}_${ke()}`),contextmenu:()=>He(`hop_${Se()}_${ke()}`)}})}});var Ft=gt(Jn,2);sn(Ft,4,()=>[[2,6,"2-6"],[3,5,"3-5"],[3,6,"3-6"],[4,5,"4-5"],[4,6,"4-6"]],nn,(ee,Ae)=>{var Zt=Sd(()=>Ed(Ae,3));let Se=()=>Y(Zt)[0],ke=()=>Y(Zt)[1],Bs=()=>Y(Zt)[2];{let cs=pn(()=>`hop_${Se()}_${ke()}`),Mr=pn(()=>[Se(),ke()]);di(ee,{get id(){return Y(cs)},type:"dice",get dice(){return Y(Mr)},get label(){return Bs()},reverse:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] rounded-xl hover:bg-emerald-700/50 transition-colors",get amount(){return Y(_),Se(),ke(),kt(()=>Y(_)[`hop_${Se()}_${ke()}`])},$$events:{click:()=>Ke(`hop_${Se()}_${ke()}`),contextmenu:()=>He(`hop_${Se()}_${ke()}`)}})}}),_t(rt,ot)};Ie(rr,rt=>{Y(V)==="hardways"?rt(Da):rt(Jr,!1)})}var qr=gt(Zn,2),kl=ct(qr),Mu=ct(kl);{var fL=rt=>{var ot=zQ(),It=ct(ot);sn(It,4,()=>[1,2,3],nn,(yt,re)=>{var $t=VQ();_t(yt,$t)}),_t(rt,ot)};Ie(Mu,rt=>{Y(it)&&rt(fL)})}var dL=gt(Mu,2);sn(dL,1,()=>Qr,nn,(rt,ot)=>{var It=XQ(),yt=ct(It);{var re=Zt=>{var Se=GQ();_t(Zt,Se)};Ie(yt,Zt=>{Y(Z)===Y(ot)&&Zt(re)})}var $t=gt(yt,2),Be=ct($t);{var bi=Zt=>{var Se=_Q();_t(Zt,Se)},_e=Zt=>{var Se=Ui(),ke=xi(Se);{var Bs=cs=>{var Mr=WQ();_t(cs,Mr)};Ie(ke,cs=>{Y(Z)===null&&Y(ot)===4&&cs(Bs)},!0)}_t(Zt,Se)};Ie(Be,Zt=>{Y(Z)===Y(ot)?Zt(bi):Zt(_e,!1)})}var Di=gt($t,2);{let Zt=pn(()=>`buy_${Y(ot)}`);di(Di,{get id(){return Y(Zt)},label:"BUY",betType:"BUY",className:"h-[16%] bg-emerald-700/50 border-2 border-emerald-400/50 rounded-xl shadow-[0_0_15px_rgba(0,0,0,0.4),inset_0_0_10px_rgba(0,0,0,0.3)]",labelClassName:"leading-none text-xs",get amount(){return Y(_),Y(ot),kt(()=>Y(_)[`buy_${Y(ot)}`])},get status(){return Y($),Y(ot),kt(()=>Y($)[`buy_${Y(ot)}`])},$$events:{click:()=>Ke(`buy_${Y(ot)}`),contextmenu:Se=>He(`buy_${Y(ot)}`,Se)}})}var cn=gt(Di,2);{let Zt=pn(()=>`place_${Y(ot)}`),Se=pn(()=>Y(ot)===6?"SIX":Y(ot)===9?"NINE":Y(ot));di(cn,{get id(){return Y(Zt)},get label(){return Y(Se)},type:"number",hideChips:!0,className:"flex-1 bg-[#1a4d2e] border-2 border-emerald-400/50 rounded-xl shadow-[0_0_20px_rgba(0,0,0,0.5),inset_0_0_15px_rgba(0,0,0,0.4)]",get amount(){return Y(_),Y(ot),kt(()=>Y(_)[`place_${Y(ot)}`])},get status(){return Y($),Y(ot),kt(()=>Y($)[`place_${Y(ot)}`])},$$events:{click:()=>Ke(`place_${Y(ot)}`),contextmenu:ke=>He(`place_${Y(ot)}`,ke)}})}var Jn=gt(cn,2),Ft=ct(Jn);{let Zt=pn(()=>`place_label_${Y(ot)}`);di(Ft,{get id(){return Y(Zt)},label:"PLACE",betType:"PLACE",className:"flex-1 bg-emerald-700/50 border-2 border-emerald-400/50 rounded-xl shadow-[0_0_15px_rgba(0,0,0,0.4),inset_0_0_10px_rgba(0,0,0,0.3)]",labelClassName:"leading-none text-xs",get amount(){return Y(_),Y(ot),kt(()=>Y(_)[`place_${Y(ot)}`])},get status(){return Y($),Y(ot),kt(()=>Y($)[`place_${Y(ot)}`])},$$events:{click:()=>Ke(`place_${Y(ot)}`),contextmenu:Se=>He(`place_${Y(ot)}`,Se)}})}var ee=gt(Ft,2);{var Ae=Zt=>{var Se=HQ(),ke=ct(Se);gy(ke,{get value(){return Y(_),Y(ot),kt(()=>Y(_)[`come_${Y(ot)}`])},size:"w-10 h-10",fontSize:"text-[8px]",betType:"COME"}),_t(Zt,Se)};Ie(ee,Zt=>{Y(_),Y(ot),kt(()=>Y(_)[`come_${Y(ot)}`])&&Zt(Ae)})}_t(rt,It)});var pL=gt(kl,2),CS=ct(pL),Ov=ct(CS),vL=ct(Ov),MS=gt(Ov,2),RS=ct(MS);{var mL=rt=>{var ot=kQ();_t(rt,ot)};Ie(RS,rt=>{Y(n)&&rt(mL)})}var PS=gt(RS,2),bS=gt(MS,2),IS=ct(bS);{var gL=rt=>{var ot=YQ();_t(rt,ot)};Ie(IS,rt=>{Y(n)&&rt(gL)})}var LS=gt(IS,2),xL=gt(bS,2),FS=ct(xL);di(FS,{id:"bet_c",label:"C",className:"w-12 h-12 rounded-full border-2 border-emerald-400/50 bg-[#1a4d2e] shadow-[0_4px_10px_rgba(0,0,0,0.5),inset_0_0_10px_rgba(0,0,0,0.3)] active:translate-y-0.5 active:shadow-inner transition-all",get amount(){return Y(_),kt(()=>Y(_).bet_c)},$$events:{click:()=>Ke("bet_c"),contextmenu:()=>He("bet_c")}});var DS=gt(FS,2);di(DS,{id:"bet_ce",label:"C&E",className:"w-14 h-14 rounded-full border-2 border-emerald-400/50 bg-[#1a4d2e] shadow-[0_4px_10px_rgba(0,0,0,0.5),inset_0_0_10px_rgba(0,0,0,0.3)] active:translate-y-0.5 active:shadow-inner transition-all",get amount(){return Y(_),kt(()=>Y(_).bet_ce)},$$events:{click:()=>Ke("bet_ce"),contextmenu:()=>He("bet_ce")}});var yL=gt(DS,2);di(yL,{id:"bet_e",label:"E",className:"w-12 h-12 rounded-full border-2 border-emerald-400/50 bg-[#1a4d2e] shadow-[0_4px_10px_rgba(0,0,0,0.5),inset_0_0_10px_rgba(0,0,0,0.3)] active:translate-y-0.5 active:shadow-inner transition-all",get amount(){return Y(_),kt(()=>Y(_).bet_e)},$$events:{click:()=>Ke("bet_e"),contextmenu:()=>He("bet_e")}});var TL=gt(CS,2),OS=ct(TL);di(OS,{id:"come",className:"h-[30%] bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-center",get amount(){return Y(_),kt(()=>Y(_).come)},$$events:{click:()=>Ke("come"),contextmenu:rt=>He("come",rt)},children:(rt,ot)=>{var It=$Q();_t(rt,It)},$$slots:{default:!0}});var NS=gt(OS,2);di(NS,{id:"field",className:"h-[42%] bg-[#1a4d2e]/60 rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)]",get amount(){return Y(_),kt(()=>Y(_).field)},$$events:{click:()=>Ke("field"),contextmenu:rt=>He("field",rt)},children:(rt,ot)=>{var It=KQ();_t(rt,It)},$$slots:{default:!0}});var EL=gt(NS,2),BS=ct(EL);di(BS,{id:"take_odds",betType:"ODDS",className:"w-[25%] bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-center px-2",get amount(){return Y(_),kt(()=>Y(_).take_odds)},$$events:{click:()=>Ke("take_odds"),contextmenu:rt=>He("take_odds",rt)},children:(rt,ot)=>{var It=jQ();_t(rt,It)},$$slots:{default:!0}});var SL=gt(BS,2);{let rt=pn(()=>Y(Z)!==null);di(SL,{id:"passline",betType:"PASS",get isLocked(){return Y(rt)},className:"flex-1 bg-[#1a4d2e] rounded-xl border-2 border-emerald-400/50 shadow-[0_0_20px_rgba(0,0,0,0.6),inset_0_0_15px_rgba(0,0,0,0.4)] flex items-center justify-center",get amount(){return Y(_),kt(()=>Y(_).passline)},$$events:{click:()=>Ke("passline"),contextmenu:ot=>He("passline",ot)},children:(ot,It)=>{var yt=QQ();_t(ot,yt)},$$slots:{default:!0}})}var wL=gt(Io,2),US=ct(wL);sn(US,5,()=>Y(Bt),nn,(rt,ot,It)=>{var yt=Sd(()=>Ed(Y(ot).dice,2));let re=()=>Y(yt)[0],$t=()=>Y(yt)[1],Be=()=>Y(ot).total,bi=()=>Y(ot).establishesPoint;var _e=qQ();Qe(_e,1,`flex items-center gap-1.5 ${It===0?"opacity-100":"opacity-40"}`,"svelte-1n46o8q");var Di=ct(_e),cn=ct(Di),Jn=gt(Di,2);sn(Jn,5,()=>[re(),$t()],nn,(Ft,ee)=>{var Ae=JQ();sn(Ae,5,()=>(Y(ee),kt(()=>nt[Y(ee)])),nn,(Zt,Se)=>{var ke=ZQ();li(Bs=>ep(ke,`left: ${Y(Se)%3*25+16}%; top: ${Bs??""}%`),[()=>(Y(Se),kt(()=>Math.floor(Y(Se)/3)*25+16))]),_t(Zt,ke)}),_t(Ft,Ae)}),li(()=>{Qe(Di,1,`w-6 h-6 rounded flex items-center justify-center text-[10px] font-black border
                      ${Be()===7?"bg-red-600 border-red-500 text-white":bi()?"bg-blue-600 border-blue-500 text-white":"bg-emerald-500/20 border-emerald-500/30 text-emerald-400"}`,"svelte-1n46o8q"),Me(cn,Be())}),_t(rt,_e)});var AL=gt(US,2),VS=ct(AL),zS=ct(VS),CL=ct(zS),ML=ct(CL);Ud(ML,{size:12,color:"white"});var GS=gt(VS,2);sn(GS,4,()=>[1,2,3,5,10,25,50,100],nn,(rt,ot)=>{var It=tZ(),yt=ct(It);{let re=pn(()=>Y(X)===ot);gy(yt,{get value(){return ot},get selected(){return Y(re)}})}qe("click",It,()=>{ht(X,ot),A("select")}),_t(rt,It)});var RL=gt(GS,2),_S=gt(ct(RL),2),PL=ct(_S),bL=ct(PL);Ud(bL,{size:10,color:"#27272a"});var L0=gt(_S,2),IL=ct(L0);li((rt,ot,It,yt,re,$t,Be,bi,_e)=>{Qe(_f,1,`text-xs font-black ${Y(j)?"text-yellow-400":Y(Z)?"text-emerald-400":"text-white/60"} tracking-tight uppercase`,"svelte-1n46o8q"),Me(cv,Y(j)?"DICE ROLLING":Y(Z)?`POINT IS ${Y(Z)}`:"COME OUT ROLL"),Qe(bo,1,`w-16 h-16 drop-shadow-[0_10px_15px_rgba(0,0,0,0.5)] rotate-[15deg] ${Y(j)?"animate-bounce":"opacity-90"} brightness-110 contrast-110`,"svelte-1n46o8q"),Qe(_l,1,`w-16 h-16 drop-shadow-[0_10px_15px_rgba(0,0,0,0.5)] -rotate-[15deg] ${Y(j)?"animate-bounce [animation-delay:0.1s]":"opacity-90"} brightness-110 contrast-110`,"svelte-1n46o8q"),Me(wv,`$${rt??""}`),Me(Av,`$${ot??""}`),Qe(Cv,1,`text-sm font-black ${Y(ve)>=0?"text-emerald-400":"text-red-400"} leading-tight tabular-nums`,"svelte-1n46o8q"),Me(Mv,`${Y(ve)>=0?"+":""}$${It??""}`),Me(Pv,`$${yt??""}`),Me(Cu,`$${re??""}`),Qe(jf,1,`w-full bg-black/40 rounded-xl border border-white/10 shadow-[inset_0_2px_8px_rgba(0,0,0,0.5)] px-4 py-1.5 relative z-10 flex items-center justify-center min-h-[36px] transition-all duration-300
          ${$t??""}`,"svelte-1n46o8q"),Qe(Qf,1,`text-[11px] font-black uppercase tracking-widest text-center
              ${Be??""}`,"svelte-1n46o8q"),Me(Dv,Y(j)?"DICE ARE IN THE AIR...":Y(De)?Y(dt):Y(At)||Y(ut)),Qe(Io,1,`flex-1 flex gap-2 min-h-0 ${Y(j)?"pointer-events-none opacity-80":""} transition-all duration-300`,"svelte-1n46o8q"),Qe(K,1,`relative w-full h-full flex items-center justify-between px-3 py-1.5 rounded-t-xl transition-all border-b-2 z-10
              bg-gradient-to-b from-zinc-100 to-zinc-300 border-white/20 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)]
              ${Y(V)==="hardways"?"ring-1 ring-[#9eff00]/50":"opacity-80"}`,"svelte-1n46o8q"),Me(st,`$${bi??""}`),Qe(Ne,1,`relative w-full h-full flex items-center justify-between px-3 py-1.5 rounded-t-xl transition-all border-b-2 z-10
              bg-gradient-to-b from-zinc-100 to-zinc-300 border-white/20 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)]
              ${Y(V)==="hops"?"ring-1 ring-[#9eff00]/50":"opacity-80"}`,"svelte-1n46o8q"),Me(Ei,`$${_e??""}`),Qe(Ov,1,`h-[16%] ${Y(it)?"bg-red-600 text-white":"bg-gradient-to-b from-zinc-100 to-zinc-300 text-zinc-800"} rounded-xl border-b-2 border-white/20 transition-all active:translate-y-1 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] text-[9px] font-black uppercase`,"svelte-1n46o8q"),Me(vL,Y(it)?"Off":"Bets Off"),Qe(PS,1,`relative w-full h-full bg-gradient-to-b from-zinc-100 to-zinc-300 text-zinc-800 rounded-xl border-b-2 border-white/20 transition-all active:translate-y-1 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] z-10 text-[9px] font-black uppercase
                       ${Y(n)?"ring-1 ring-[#9eff00]/50":"opacity-60 cursor-not-allowed"}`,"svelte-1n46o8q"),Qe(LS,1,`relative w-full h-full bg-gradient-to-b from-zinc-100 to-zinc-300 text-zinc-800 rounded-xl border-b-2 border-white/20 transition-all active:translate-y-1 shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_2px_rgba(255,255,255,0.8)] z-10 text-[9px] font-black uppercase
                       ${Y(n)?"ring-1 ring-[#9eff00]/50":"opacity-60 cursor-not-allowed"}`,"svelte-1n46o8q"),L0.disabled=Y(j)||!Y(S),Me(IL,Y(j)?"Rolling":"Roll")},[()=>(Y(ne),kt(()=>Y(ne).toFixed(2))),()=>(Y(jt),kt(()=>Y(jt).toFixed(2))),()=>(Y(ve),kt(()=>Math.abs(Y(ve)).toFixed(2))),()=>(Y(k),kt(()=>Y(k).toFixed(2))),()=>(Y(s),kt(()=>Y(s).toFixed(2))),()=>(Y(j),Y(De),Y(At),kt(()=>Y(j)?"bg-yellow-500/10 border-yellow-500/30":Y(De)?"bg-red-500/20 border-red-500/40":Y(At).includes("WIN")?"bg-emerald-500/10 border-emerald-500/30":"")),()=>(Y(j),Y(De),Y(At),kt(()=>Y(j)||Y(De)?"text-yellow-400":Y(At).includes("WIN")?"text-emerald-400":"text-white/70")),()=>kt(()=>(U("hard_")+U("any_")+U("horn_")+U("bet_")).toFixed(2)),()=>kt(()=>U("hop_").toFixed(2))]),qe("click",Eu,()=>ht(D,!0)),qe("click",Wf,()=>ht(L,!0)),qe("click",K,()=>ht(V,"hardways")),qe("click",Ne,()=>ht(V,"hops")),qe("click",Ov,()=>ht(it,!Y(it))),qe("click",PS,Re),qe("click",LS,ln),qe("click",zS,Tu),qe("click",L0,jr),_t(f,mt),ir()}nD(iZ,{target:document.getElementById("app")});
